function vV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ra(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ax={exports:{}},Lf={};var MC;function yV(){if(MC)return Lf;MC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:a}}return Lf.Fragment=e,Lf.jsx=n,Lf.jsxs=n,Lf}var zC;function bV(){return zC||(zC=1,Ax.exports=yV()),Ax.exports}var o=bV(),Tx={exports:{}},Je={};var LC;function xV(){if(LC)return Je;LC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function A(F,ne,ue){this.props=F,this.context=ne,this.refs=N,this.updater=ue||E}A.prototype.isReactComponent={},A.prototype.setState=function(F,ne){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ne,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function R(){}R.prototype=A.prototype;function C(F,ne,ue){this.props=F,this.context=ne,this.refs=N,this.updater=ue||E}var P=C.prototype=new R;P.constructor=C,j(P,A.prototype),P.isPureReactComponent=!0;var M=Array.isArray;function B(){}var D={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function k(F,ne,ue){var ve=ue.ref;return{$$typeof:t,type:F,key:ne,ref:ve!==void 0?ve:null,props:ue}}function U(F,ne){return k(F.type,ne,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function z(F){var ne={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ue){return ne[ue]})}var V=/\/+/g;function ge(F,ne){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):ne.toString(36)}function Z(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(B,B):(F.status="pending",F.then(function(ne){F.status==="pending"&&(F.status="fulfilled",F.value=ne)},function(ne){F.status==="pending"&&(F.status="rejected",F.reason=ne)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function H(F,ne,ue,ve,fe){var G=typeof F;(G==="undefined"||G==="boolean")&&(F=null);var ce=!1;if(F===null)ce=!0;else switch(G){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(F.$$typeof){case t:case e:ce=!0;break;case p:return ce=F._init,H(ce(F._payload),ne,ue,ve,fe)}}if(ce)return fe=fe(F),ce=ve===""?"."+ge(F,0):ve,M(fe)?(ue="",ce!=null&&(ue=ce.replace(V,"$&/")+"/"),H(fe,ne,ue,"",function(J){return J})):fe!=null&&(L(fe)&&(fe=U(fe,ue+(fe.key==null||F&&F.key===fe.key?"":(""+fe.key).replace(V,"$&/")+"/")+ce)),ne.push(fe)),1;ce=0;var Ce=ve===""?".":ve+":";if(M(F))for(var ie=0;ie<F.length;ie++)ve=F[ie],G=Ce+ge(ve,ie),ce+=H(ve,ne,ue,G,fe);else if(ie=x(F),typeof ie=="function")for(F=ie.call(F),ie=0;!(ve=F.next()).done;)ve=ve.value,G=Ce+ge(ve,ie++),ce+=H(ve,ne,ue,G,fe);else if(G==="object"){if(typeof F.then=="function")return H(Z(F),ne,ue,ve,fe);throw ne=String(F),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ce}function ae(F,ne,ue){if(F==null)return F;var ve=[],fe=0;return H(F,ve,"","",function(G){return ne.call(ue,G,fe++)}),ve}function X(F){if(F._status===-1){var ne=F._result;ne=ne(),ne.then(function(ue){(F._status===0||F._status===-1)&&(F._status=1,F._result=ue)},function(ue){(F._status===0||F._status===-1)&&(F._status=2,F._result=ue)}),F._status===-1&&(F._status=0,F._result=ne)}if(F._status===1)return F._result.default;throw F._result}var we=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},W={map:ae,forEach:function(F,ne,ue){ae(F,function(){ne.apply(this,arguments)},ue)},count:function(F){var ne=0;return ae(F,function(){ne++}),ne},toArray:function(F){return ae(F,function(ne){return ne})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Je.Activity=g,Je.Children=W,Je.Component=A,Je.Fragment=n,Je.Profiler=i,Je.PureComponent=C,Je.StrictMode=r,Je.Suspense=f,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Je.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},Je.cache=function(F){return function(){return F.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(F,ne,ue){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ve=j({},F.props),fe=F.key;if(ne!=null)for(G in ne.key!==void 0&&(fe=""+ne.key),ne)!O.call(ne,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&ne.ref===void 0||(ve[G]=ne[G]);var G=arguments.length-2;if(G===1)ve.children=ue;else if(1<G){for(var ce=Array(G),Ce=0;Ce<G;Ce++)ce[Ce]=arguments[Ce+2];ve.children=ce}return k(F.type,fe,ve)},Je.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Je.createElement=function(F,ne,ue){var ve,fe={},G=null;if(ne!=null)for(ve in ne.key!==void 0&&(G=""+ne.key),ne)O.call(ne,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(fe[ve]=ne[ve]);var ce=arguments.length-2;if(ce===1)fe.children=ue;else if(1<ce){for(var Ce=Array(ce),ie=0;ie<ce;ie++)Ce[ie]=arguments[ie+2];fe.children=Ce}if(F&&F.defaultProps)for(ve in ce=F.defaultProps,ce)fe[ve]===void 0&&(fe[ve]=ce[ve]);return k(F,G,fe)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(F){return{$$typeof:u,render:F}},Je.isValidElement=L,Je.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:X}},Je.memo=function(F,ne){return{$$typeof:h,type:F,compare:ne===void 0?null:ne}},Je.startTransition=function(F){var ne=D.T,ue={};D.T=ue;try{var ve=F(),fe=D.S;fe!==null&&fe(ue,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(B,we)}catch(G){we(G)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),D.T=ne}},Je.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Je.use=function(F){return D.H.use(F)},Je.useActionState=function(F,ne,ue){return D.H.useActionState(F,ne,ue)},Je.useCallback=function(F,ne){return D.H.useCallback(F,ne)},Je.useContext=function(F){return D.H.useContext(F)},Je.useDebugValue=function(){},Je.useDeferredValue=function(F,ne){return D.H.useDeferredValue(F,ne)},Je.useEffect=function(F,ne){return D.H.useEffect(F,ne)},Je.useEffectEvent=function(F){return D.H.useEffectEvent(F)},Je.useId=function(){return D.H.useId()},Je.useImperativeHandle=function(F,ne,ue){return D.H.useImperativeHandle(F,ne,ue)},Je.useInsertionEffect=function(F,ne){return D.H.useInsertionEffect(F,ne)},Je.useLayoutEffect=function(F,ne){return D.H.useLayoutEffect(F,ne)},Je.useMemo=function(F,ne){return D.H.useMemo(F,ne)},Je.useOptimistic=function(F,ne){return D.H.useOptimistic(F,ne)},Je.useReducer=function(F,ne,ue){return D.H.useReducer(F,ne,ue)},Je.useRef=function(F){return D.H.useRef(F)},Je.useState=function(F){return D.H.useState(F)},Je.useSyncExternalStore=function(F,ne,ue){return D.H.useSyncExternalStore(F,ne,ue)},Je.useTransition=function(){return D.H.useTransition()},Je.version="19.2.4",Je}var qC;function bd(){return qC||(qC=1,Tx.exports=xV()),Tx.exports}var _=bd();const tM=ra(_),nM=vV({__proto__:null,default:tM},[_]);var Cx={exports:{}},qf={},Px={exports:{}},Ix={};var UC;function _V(){return UC||(UC=1,(function(t){function e(H,ae){var X=H.length;H.push(ae);e:for(;0<X;){var we=X-1>>>1,W=H[we];if(0<i(W,ae))H[we]=ae,H[X]=W,X=we;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ae=H[0],X=H.pop();if(X!==ae){H[0]=X;e:for(var we=0,W=H.length,F=W>>>1;we<F;){var ne=2*(we+1)-1,ue=H[ne],ve=ne+1,fe=H[ve];if(0>i(ue,X))ve<W&&0>i(fe,ue)?(H[we]=fe,H[ve]=X,we=ve):(H[we]=ue,H[ne]=X,we=ne);else if(ve<W&&0>i(fe,X))H[we]=fe,H[ve]=X,we=ve;else break e}}return ae}function i(H,ae){var X=H.sortIndex-ae.sortIndex;return X!==0?X:H.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],p=1,g=null,y=3,x=!1,E=!1,j=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function P(H){for(var ae=n(h);ae!==null;){if(ae.callback===null)r(h);else if(ae.startTime<=H)r(h),ae.sortIndex=ae.expirationTime,e(f,ae);else break;ae=n(h)}}function M(H){if(j=!1,P(H),!E)if(n(f)!==null)E=!0,B||(B=!0,z());else{var ae=n(h);ae!==null&&Z(M,ae.startTime-H)}}var B=!1,D=-1,O=5,k=-1;function U(){return N?!0:!(t.unstable_now()-k<O)}function L(){if(N=!1,B){var H=t.unstable_now();k=H;var ae=!0;try{e:{E=!1,j&&(j=!1,R(D),D=-1),x=!0;var X=y;try{t:{for(P(H),g=n(f);g!==null&&!(g.expirationTime>H&&U());){var we=g.callback;if(typeof we=="function"){g.callback=null,y=g.priorityLevel;var W=we(g.expirationTime<=H);if(H=t.unstable_now(),typeof W=="function"){g.callback=W,P(H),ae=!0;break t}g===n(f)&&r(f),P(H)}else r(f);g=n(f)}if(g!==null)ae=!0;else{var F=n(h);F!==null&&Z(M,F.startTime-H),ae=!1}}break e}finally{g=null,y=X,x=!1}ae=void 0}}finally{ae?z():B=!1}}}var z;if(typeof C=="function")z=function(){C(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ge=V.port2;V.port1.onmessage=L,z=function(){ge.postMessage(null)}}else z=function(){A(L,0)};function Z(H,ae){D=A(function(){H(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var X=y;y=ae;try{return H()}finally{y=X}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=y;y=H;try{return ae()}finally{y=X}},t.unstable_scheduleCallback=function(H,ae,X){var we=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?we+X:we):X=we,H){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=X+W,H={id:p++,callback:ae,priorityLevel:H,startTime:X,expirationTime:W,sortIndex:-1},X>we?(H.sortIndex=X,e(h,H),n(f)===null&&H===n(h)&&(j?(R(D),D=-1):j=!0,Z(M,X-we))):(H.sortIndex=W,e(f,H),E||x||(E=!0,B||(B=!0,z()))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var ae=y;return function(){var X=y;y=ae;try{return H.apply(this,arguments)}finally{y=X}}}})(Ix)),Ix}var VC;function jV(){return VC||(VC=1,Px.exports=_V()),Px.exports}var Ox={exports:{}},vr={};var BC;function wV(){if(BC)return vr;BC=1;var t=bd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vr.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,p)},vr.flushSync=function(f){var h=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=h,r.p=p,r.d.f()}},vr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},vr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},vr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},vr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},vr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},vr.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},vr.requestFormReset=function(f){r.d.r(f)},vr.unstable_batchedUpdates=function(f,h){return f(h)},vr.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},vr.useFormStatus=function(){return c.H.useHostTransitionStatus()},vr.version="19.2.4",vr}var $C;function rM(){if($C)return Ox.exports;$C=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ox.exports=wV(),Ox.exports}var FC;function EV(){if(FC)return qf;FC=1;var t=jV(),e=bd(),n=rM();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(r(188))}function h(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var d=s,m=l;;){var b=d.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===d)return f(b),s;if(w===m)return f(b),l;w=w.sibling}throw Error(r(188))}if(d.return!==m.return)d=b,m=w;else{for(var T=!1,q=b.child;q;){if(q===d){T=!0,d=b,m=w;break}if(q===m){T=!0,m=b,d=w;break}q=q.sibling}if(!T){for(q=w.child;q;){if(q===d){T=!0,d=w,m=b;break}if(q===m){T=!0,m=w,d=b;break}q=q.sibling}if(!T)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),C=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case A:return"Profiler";case N:return"StrictMode";case M:return"Suspense";case B:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case C:return s.displayName||"Context";case R:return(s._context.displayName||"Context")+".Consumer";case P:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return l=s.displayName||null,l!==null?l:ge(s.type)||"Memo";case O:l=s._payload,s=s._init;try{return ge(s(l))}catch{}}return null}var Z=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},we=[],W=-1;function F(s){return{current:s}}function ne(s){0>W||(s.current=we[W],we[W]=null,W--)}function ue(s,l){W++,we[W]=s.current,s.current=l}var ve=F(null),fe=F(null),G=F(null),ce=F(null);function Ce(s,l){switch(ue(G,l),ue(fe,s),ue(ve,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?sC(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=sC(l),s=aC(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(ve),ue(ve,s)}function ie(){ne(ve),ne(fe),ne(G)}function J(s){s.memoizedState!==null&&ue(ce,s);var l=ve.current,d=aC(l,s.type);l!==d&&(ue(fe,s),ue(ve,d))}function Q(s){fe.current===s&&(ne(ve),ne(fe)),ce.current===s&&(ne(ce),kf._currentValue=X)}var me,Te;function ze(s){if(me===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);me=l&&l[1]||"",Te=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+s+Te}var ot=!1;function mt(s,l){if(!s||ot)return"";ot=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(pe){var le=pe}Reflect.construct(s,[],je)}else{try{je.call()}catch(pe){le=pe}s.call(je.prototype)}}else{try{throw Error()}catch(pe){le=pe}(je=s())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(pe){if(pe&&le&&typeof pe.stack=="string")return[pe.stack,le.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),T=w[0],q=w[1];if(T&&q){var K=T.split(`
`),oe=q.split(`
`);for(b=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;b<oe.length&&!oe[b].includes("DetermineComponentFrameRoot");)b++;if(m===K.length||b===oe.length)for(m=K.length-1,b=oe.length-1;1<=m&&0<=b&&K[m]!==oe[b];)b--;for(;1<=m&&0<=b;m--,b--)if(K[m]!==oe[b]){if(m!==1||b!==1)do if(m--,b--,0>b||K[m]!==oe[b]){var be=`
`+K[m].replace(" at new "," at ");return s.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",s.displayName)),be}while(1<=m&&0<=b);break}}}finally{ot=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?ze(d):""}function vt(s,l){switch(s.tag){case 26:case 27:case 5:return ze(s.type);case 16:return ze("Lazy");case 13:return s.child!==l&&l!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return mt(s.type,!1);case 11:return mt(s.type.render,!1);case 1:return mt(s.type,!0);case 31:return ze("Activity");default:return""}}function pr(s){try{var l="",d=null;do l+=vt(s,d),d=s,s=s.return;while(s);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Rt=Object.prototype.hasOwnProperty,kt=t.unstable_scheduleCallback,Lr=t.unstable_cancelCallback,ye=t.unstable_shouldYield,ke=t.unstable_requestPaint,Be=t.unstable_now,Qe=t.unstable_getCurrentPriorityLevel,Vt=t.unstable_ImmediatePriority,zn=t.unstable_UserBlockingPriority,qr=t.unstable_NormalPriority,oo=t.unstable_LowPriority,Ur=t.unstable_IdlePriority,Hi=t.log,Gc=t.unstable_setDisableYieldValue,on=null,At=null;function Vr(s){if(typeof Hi=="function"&&Gc(s),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(on,s)}catch{}}var nn=Math.clz32?Math.clz32:Kc,Sl=Math.log,lo=Math.LN2;function Kc(s){return s>>>=0,s===0?32:31-(Sl(s)/lo|0)|0}var bi=256,aa=262144,ln=4194304;function xi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function gr(s,l,d){var m=s.pendingLanes;if(m===0)return 0;var b=0,w=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var q=m&134217727;return q!==0?(m=q&~w,m!==0?b=xi(m):(T&=q,T!==0?b=xi(T):d||(d=q&~s,d!==0&&(b=xi(d))))):(q=m&~w,q!==0?b=xi(q):T!==0?b=xi(T):d||(d=m&~s,d!==0&&(b=xi(d)))),b===0?0:l!==0&&l!==b&&(l&w)===0&&(w=b&-b,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:b}function ti(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function te(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(){var s=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),s}function yt(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Hn(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Al(s,l,d,m,b,w){var T=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var q=s.entanglements,K=s.expirationTimes,oe=s.hiddenUpdates;for(d=T&~d;0<d;){var be=31-nn(d),je=1<<be;q[be]=0,K[be]=-1;var le=oe[be];if(le!==null)for(oe[be]=null,be=0;be<le.length;be++){var pe=le[be];pe!==null&&(pe.lane&=-536870913)}d&=~je}m!==0&&_i(s,m,0),w!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=w&~(T&~l))}function _i(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var m=31-nn(l);s.entangledLanes|=l,s.entanglements[m]=s.entanglements[m]|1073741824|d&261930}function Ld(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var m=31-nn(d),b=1<<m;b&l|s[m]&l&&(s[m]|=l),d&=~b}}function qd(s,l){var d=l&-l;return d=(d&42)!==0?1:Tl(d),(d&(s.suspendedLanes|l))!==0?0:d}function Tl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function oa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Pm(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:CC(s.type))}function Gi(s,l){var d=ae.p;try{return ae.p=s,l()}finally{ae.p=d}}var Ki=Math.random().toString(36).slice(2),En="__reactFiber$"+Ki,Gn="__reactProps$"+Ki,vs="__reactContainer$"+Ki,Qc="__reactEvents$"+Ki,R0="__reactListeners$"+Ki,Im="__reactHandles$"+Ki,Om="__reactResources$"+Ki,ys="__reactMarker$"+Ki;function Wc(s){delete s[En],delete s[Gn],delete s[Qc],delete s[R0],delete s[Im]}function bs(s){var l=s[En];if(l)return l;for(var d=s.parentNode;d;){if(l=d[vs]||d[En]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=hC(s);s!==null;){if(d=s[En])return d;s=hC(s)}return l}s=d,d=s.parentNode}return null}function ji(s){if(s=s[En]||s[vs]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function ni(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function xs(s){var l=s[Om];return l||(l=s[Om]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Nn(s){s[ys]=!0}var Ud=new Set,Vd={};function _s(s,l){js(s,l),js(s+"Capture",l)}function js(s,l){for(Vd[s]=l,s=0;s<l.length;s++)Ud.add(l[s])}var Bd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$d={},Fd={};function Rm(s){return Rt.call(Fd,s)?!0:Rt.call($d,s)?!1:Bd.test(s)?Fd[s]=!0:($d[s]=!0,!1)}function Yc(s,l,d){if(Rm(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function ri(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function Sn(s,l,d,m){if(m===null)s.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+m)}}function Kn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function co(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Hd(s,l,d){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,w=m.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(T){d=""+T,w.call(this,T)}}),Object.defineProperty(s,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Tt(s){if(!s._valueTracker){var l=co(s)?"checked":"value";s._valueTracker=Hd(s,l,""+s[l])}}function Cl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return s&&(m=co(s)?s.checked?"true":"false":s.value),s=m,s!==d?(l.setValue(s),!0):!1}function ws(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Pl=/[\n"\\]/g;function Br(s){return s.replace(Pl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Xc(s,l,d,m,b,w,T,q){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Kn(l)):s.value!==""+Kn(l)&&(s.value=""+Kn(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?Gd(s,T,Kn(l)):d!=null?Gd(s,T,Kn(d)):m!=null&&s.removeAttribute("value"),b==null&&w!=null&&(s.defaultChecked=!!w),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+Kn(q):s.removeAttribute("name")}function km(s,l,d,m,b,w,T,q){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Tt(s);return}d=d!=null?""+Kn(d):"",l=l!=null?""+Kn(l):d,q||l===s.value||(s.value=l),s.defaultValue=l}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=q?s.checked:!!m,s.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Tt(s)}function Gd(s,l,d){l==="number"&&ws(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function uo(s,l,d,m){if(s=s.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<s.length;d++)b=l.hasOwnProperty("$"+s[d].value),s[d].selected!==b&&(s[d].selected=b),b&&m&&(s[d].defaultSelected=!0)}else{for(d=""+Kn(d),l=null,b=0;b<s.length;b++){if(s[b].value===d){s[b].selected=!0,m&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function Dm(s,l,d){if(l!=null&&(l=""+Kn(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+Kn(d):""}function fo(s,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(Z(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Kn(l),s.defaultValue=d,m=s.textContent,m===d&&m!==""&&m!==null&&(s.value=m),Tt(s)}function $r(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var Mm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kd(s,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":m?s.setProperty(l,d):typeof d!="number"||d===0||Mm.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function Qd(s,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var b in l)m=l[b],l.hasOwnProperty(b)&&d[b]!==m&&Kd(s,b,m)}else for(var w in l)l.hasOwnProperty(w)&&Kd(s,w,l[w])}function Jc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ho=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zc(s){return ho.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Qi(){}var Wd=null;function wi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var mo=null,Es=null;function Il(s){var l=ji(s);if(l&&(s=l.stateNode)){var d=s[Gn]||null;e:switch(s=l.stateNode,l.type){case"input":if(Xc(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Br(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==s&&m.form===s.form){var b=m[Gn]||null;if(!b)throw Error(r(90));Xc(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===s.form&&Cl(m)}break e;case"textarea":Dm(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&uo(s,!!d.multiple,l,!1)}}}var eu=!1;function po(s,l,d){if(eu)return s(l,d);eu=!0;try{var m=s(l);return m}finally{if(eu=!1,(mo!==null||Es!==null)&&(Pp(),mo&&(l=mo,s=Es,Es=mo=null,Il(l),s)))for(l=0;l<s.length;l++)Il(s[l])}}function Wi(s,l){var d=s.stateNode;if(d===null)return null;var m=d[Gn]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=!1;if(Ei)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Ol=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Ol=!1}var Ns=null,Yd=null,Rl=null;function Xd(){if(Rl)return Rl;var s,l=Yd,d=l.length,m,b="value"in Ns?Ns.value:Ns.textContent,w=b.length;for(s=0;s<d&&l[s]===b[s];s++);var T=d-s;for(m=1;m<=T&&l[d-m]===b[w-m];m++);return Rl=b.slice(s,1<m?1-m:void 0)}function kl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function la(){return!0}function Yi(){return!1}function ir(s){function l(d,m,b,w,T){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(d=s[q],this[q]=d?d(w):w[q]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?la:Yi,this.isPropagationStopped=Yi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),l}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=ir(ca),go=g({},ca,{view:0,detail:0}),Jd=ir(go),vo,tu,As,nu=g({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==As&&(As&&s.type==="mousemove"?(vo=s.screenX-As.screenX,tu=s.screenY-As.screenY):tu=vo=0,As=s),vo)},movementY:function(s){return"movementY"in s?s.movementY:tu}}),Zd=ir(nu),Dl=g({},nu,{dataTransfer:0}),Lm=ir(Dl),qm=g({},go,{relatedTarget:0}),Ml=ir(qm),ef=g({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),Um=ir(ef),ru=g({},ca,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Vm=ir(ru),Bm=g({},ca,{data:0}),Ts=ir(Bm),$m={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gm(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Hm[s])?!!l[s]:!1}function yo(){return Gm}var Ar=g({},go,{key:function(s){if(s.key){var l=$m[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=kl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Fm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(s){return s.type==="keypress"?kl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?kl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Km=ir(Ar),Qm=g({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=ir(Qm),v=g({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),S=ir(v),I=g({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),$=ir(I),re=g({},nu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),he=ir(re),Se=g({},ca,{newState:0,oldState:0}),tt=ir(Se),yn=[9,13,27,32],Et=Ei&&"CompositionEvent"in window,Xt=null;Ei&&"documentMode"in document&&(Xt=document.documentMode);var Ni=Ei&&"TextEvent"in window&&!Xt,Cs=Ei&&(!Et||Xt&&8<Xt&&11>=Xt),Xi=" ",Ji=!1;function zl(s,l){switch(s){case"keyup":return yn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var su=!1;function VU(s,l){switch(s){case"compositionend":return iu(l);case"keypress":return l.which!==32?null:(Ji=!0,Xi);case"textInput":return s=l.data,s===Xi&&Ji?null:s;default:return null}}function BU(s,l){if(su)return s==="compositionend"||!Et&&zl(s,l)?(s=Xd(),Rl=Yd=Ns=null,su=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Cs&&l.locale!=="ko"?null:l.data;default:return null}}var $U={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!$U[s.type]:l==="textarea"}function vS(s,l,d,m){mo?Es?Es.push(m):Es=[m]:mo=m,l=zp(l,"onChange"),0<l.length&&(d=new Ss("onChange","change",null,d,m),s.push({event:d,listeners:l}))}var tf=null,nf=null;function FU(s){ZT(s,0)}function Wm(s){var l=ni(s);if(Cl(l))return s}function yS(s,l){if(s==="change")return l}var bS=!1;if(Ei){var k0;if(Ei){var D0="oninput"in document;if(!D0){var xS=document.createElement("div");xS.setAttribute("oninput","return;"),D0=typeof xS.oninput=="function"}k0=D0}else k0=!1;bS=k0&&(!document.documentMode||9<document.documentMode)}function _S(){tf&&(tf.detachEvent("onpropertychange",jS),nf=tf=null)}function jS(s){if(s.propertyName==="value"&&Wm(nf)){var l=[];vS(l,nf,s,wi(s)),po(FU,l)}}function HU(s,l,d){s==="focusin"?(_S(),tf=l,nf=d,tf.attachEvent("onpropertychange",jS)):s==="focusout"&&_S()}function GU(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wm(nf)}function KU(s,l){if(s==="click")return Wm(l)}function QU(s,l){if(s==="input"||s==="change")return Wm(l)}function WU(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ii=typeof Object.is=="function"?Object.is:WU;function rf(s,l){if(ii(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!Rt.call(l,b)||!ii(s[b],l[b]))return!1}return!0}function wS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ES(s,l){var d=wS(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=l&&m>=l)return{node:d,offset:l-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=wS(d)}}function NS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?NS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function SS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ws(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=ws(s.document)}return l}function M0(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var YU=Ei&&"documentMode"in document&&11>=document.documentMode,au=null,z0=null,sf=null,L0=!1;function AS(s,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;L0||au==null||au!==ws(m)||(m=au,"selectionStart"in m&&M0(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),sf&&rf(sf,m)||(sf=m,m=zp(z0,"onSelect"),0<m.length&&(l=new Ss("onSelect","select",null,l,d),s.push({event:l,listeners:m}),l.target=au)))}function Ll(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var ou={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionrun:Ll("Transition","TransitionRun"),transitionstart:Ll("Transition","TransitionStart"),transitioncancel:Ll("Transition","TransitionCancel"),transitionend:Ll("Transition","TransitionEnd")},q0={},TS={};Ei&&(TS=document.createElement("div").style,"AnimationEvent"in window||(delete ou.animationend.animation,delete ou.animationiteration.animation,delete ou.animationstart.animation),"TransitionEvent"in window||delete ou.transitionend.transition);function ql(s){if(q0[s])return q0[s];if(!ou[s])return s;var l=ou[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in TS)return q0[s]=l[d];return s}var CS=ql("animationend"),PS=ql("animationiteration"),IS=ql("animationstart"),XU=ql("transitionrun"),JU=ql("transitionstart"),ZU=ql("transitioncancel"),OS=ql("transitionend"),RS=new Map,U0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");U0.push("scrollEnd");function Zi(s,l){RS.set(s,l),_s(l,[s])}var Ym=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Si=[],lu=0,V0=0;function Xm(){for(var s=lu,l=V0=lu=0;l<s;){var d=Si[l];Si[l++]=null;var m=Si[l];Si[l++]=null;var b=Si[l];Si[l++]=null;var w=Si[l];if(Si[l++]=null,m!==null&&b!==null){var T=m.pending;T===null?b.next=b:(b.next=T.next,T.next=b),m.pending=b}w!==0&&kS(d,b,w)}}function Jm(s,l,d,m){Si[lu++]=s,Si[lu++]=l,Si[lu++]=d,Si[lu++]=m,V0|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function B0(s,l,d,m){return Jm(s,l,d,m),Zm(s)}function Ul(s,l){return Jm(s,null,null,l),Zm(s)}function kS(s,l,d){s.lanes|=d;var m=s.alternate;m!==null&&(m.lanes|=d);for(var b=!1,w=s.return;w!==null;)w.childLanes|=d,m=w.alternate,m!==null&&(m.childLanes|=d),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(b=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,b&&l!==null&&(b=31-nn(d),s=w.hiddenUpdates,m=s[b],m===null?s[b]=[l]:m.push(l),l.lane=d|536870912),w):null}function Zm(s){if(50<Af)throw Af=0,Xb=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var cu={};function e9(s,l,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(s,l,d,m){return new e9(s,l,d,m)}function $0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function da(s,l){var d=s.alternate;return d===null?(d=si(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function DS(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function ep(s,l,d,m,b,w){var T=0;if(m=s,typeof s=="function")$0(s)&&(T=1);else if(typeof s=="string")T=sV(s,d,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=si(31,d,l,b),s.elementType=k,s.lanes=w,s;case j:return Vl(d.children,b,w,l);case N:T=8,b|=24;break;case A:return s=si(12,d,l,b|2),s.elementType=A,s.lanes=w,s;case M:return s=si(13,d,l,b),s.elementType=M,s.lanes=w,s;case B:return s=si(19,d,l,b),s.elementType=B,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:T=10;break e;case R:T=9;break e;case P:T=11;break e;case D:T=14;break e;case O:T=16,m=null;break e}T=29,d=Error(r(130,s===null?"null":typeof s,"")),m=null}return l=si(T,d,l,b),l.elementType=s,l.type=m,l.lanes=w,l}function Vl(s,l,d,m){return s=si(7,s,m,l),s.lanes=d,s}function F0(s,l,d){return s=si(6,s,null,l),s.lanes=d,s}function MS(s){var l=si(18,null,null,0);return l.stateNode=s,l}function H0(s,l,d){return l=si(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var zS=new WeakMap;function Ai(s,l){if(typeof s=="object"&&s!==null){var d=zS.get(s);return d!==void 0?d:(l={value:s,source:l,stack:pr(l)},zS.set(s,l),l)}return{value:s,source:l,stack:pr(l)}}var uu=[],du=0,tp=null,af=0,Ti=[],Ci=0,bo=null,Ps=1,Is="";function fa(s,l){uu[du++]=af,uu[du++]=tp,tp=s,af=l}function LS(s,l,d){Ti[Ci++]=Ps,Ti[Ci++]=Is,Ti[Ci++]=bo,bo=s;var m=Ps;s=Is;var b=32-nn(m)-1;m&=~(1<<b),d+=1;var w=32-nn(l)+b;if(30<w){var T=b-b%5;w=(m&(1<<T)-1).toString(32),m>>=T,b-=T,Ps=1<<32-nn(l)+b|d<<b|m,Is=w+s}else Ps=1<<w|d<<b|m,Is=s}function G0(s){s.return!==null&&(fa(s,1),LS(s,1,0))}function K0(s){for(;s===tp;)tp=uu[--du],uu[du]=null,af=uu[--du],uu[du]=null;for(;s===bo;)bo=Ti[--Ci],Ti[Ci]=null,Is=Ti[--Ci],Ti[Ci]=null,Ps=Ti[--Ci],Ti[Ci]=null}function qS(s,l){Ti[Ci++]=Ps,Ti[Ci++]=Is,Ti[Ci++]=bo,Ps=l.id,Is=l.overflow,bo=s}var sr=null,Qt=null,pt=!1,xo=null,Pi=!1,Q0=Error(r(519));function _o(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw of(Ai(l,s)),Q0}function US(s){var l=s.stateNode,d=s.type,m=s.memoizedProps;switch(l[En]=s,l[Gn]=m,d){case"dialog":at("cancel",l),at("close",l);break;case"iframe":case"object":case"embed":at("load",l);break;case"video":case"audio":for(d=0;d<Cf.length;d++)at(Cf[d],l);break;case"source":at("error",l);break;case"img":case"image":case"link":at("error",l),at("load",l);break;case"details":at("toggle",l);break;case"input":at("invalid",l),km(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":at("invalid",l);break;case"textarea":at("invalid",l),fo(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||rC(l.textContent,d)?(m.popover!=null&&(at("beforetoggle",l),at("toggle",l)),m.onScroll!=null&&at("scroll",l),m.onScrollEnd!=null&&at("scrollend",l),m.onClick!=null&&(l.onclick=Qi),l=!0):l=!1,l||_o(s,!0)}function VS(s){for(sr=s.return;sr;)switch(sr.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:sr=sr.return}}function fu(s){if(s!==sr)return!1;if(!pt)return VS(s),pt=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||fx(s.type,s.memoizedProps)),d=!d),d&&Qt&&_o(s),VS(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=fC(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=fC(s)}else l===27?(l=Qt,Do(s.type)?(s=vx,vx=null,Qt=s):Qt=l):Qt=sr?Oi(s.stateNode.nextSibling):null;return!0}function Bl(){Qt=sr=null,pt=!1}function W0(){var s=xo;return s!==null&&(Kr===null?Kr=s:Kr.push.apply(Kr,s),xo=null),s}function of(s){xo===null?xo=[s]:xo.push(s)}var Y0=F(null),$l=null,ha=null;function jo(s,l,d){ue(Y0,l._currentValue),l._currentValue=d}function ma(s){s._currentValue=Y0.current,ne(Y0)}function X0(s,l,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===d)break;s=s.return}}function J0(s,l,d,m){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var w=b.dependencies;if(w!==null){var T=b.child;w=w.firstContext;e:for(;w!==null;){var q=w;w=b;for(var K=0;K<l.length;K++)if(q.context===l[K]){w.lanes|=d,q=w.alternate,q!==null&&(q.lanes|=d),X0(w.return,d,s),m||(T=null);break e}w=q.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(r(341));T.lanes|=d,w=T.alternate,w!==null&&(w.lanes|=d),X0(T,d,s),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===s){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function hu(s,l,d,m){s=null;for(var b=l,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var q=b.type;ii(b.pendingProps.value,T.value)||(s!==null?s.push(q):s=[q])}}else if(b===ce.current){if(T=b.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(kf):s=[kf])}b=b.return}s!==null&&J0(l,s,d,m),l.flags|=262144}function np(s){for(s=s.firstContext;s!==null;){if(!ii(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Fl(s){$l=s,ha=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ar(s){return BS($l,s)}function rp(s,l){return $l===null&&Fl(s),BS(s,l)}function BS(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},ha===null){if(s===null)throw Error(r(308));ha=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ha=ha.next=l;return d}var t9=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,m){s.push(m)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},n9=t.unstable_scheduleCallback,r9=t.unstable_NormalPriority,An={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z0(){return{controller:new t9,data:new Map,refCount:0}}function lf(s){s.refCount--,s.refCount===0&&n9(r9,function(){s.controller.abort()})}var cf=null,eb=0,mu=0,pu=null;function i9(s,l){if(cf===null){var d=cf=[];eb=0,mu=rx(),pu={status:"pending",value:void 0,then:function(m){d.push(m)}}}return eb++,l.then($S,$S),l}function $S(){if(--eb===0&&cf!==null){pu!==null&&(pu.status="fulfilled");var s=cf;cf=null,mu=0,pu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function s9(s,l){var d=[],m={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return s.then(function(){m.status="fulfilled",m.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(m.status="rejected",m.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),m}var FS=H.S;H.S=function(s,l){AT=Be(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&i9(s,l),FS!==null&&FS(s,l)};var Hl=F(null);function tb(){var s=Hl.current;return s!==null?s:Bt.pooledCache}function ip(s,l){l===null?ue(Hl,Hl.current):ue(Hl,l.pool)}function HS(){var s=tb();return s===null?null:{parent:An._currentValue,pool:s}}var gu=Error(r(460)),nb=Error(r(474)),sp=Error(r(542)),ap={then:function(){}};function GS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function KS(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(Qi,Qi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,WS(s),s;default:if(typeof l.status=="string")l.then(Qi,Qi);else{if(s=Bt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(m){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=m}},function(m){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,WS(s),s}throw Kl=l,gu}}function Gl(s){try{var l=s._init;return l(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Kl=d,gu):d}}var Kl=null;function QS(){if(Kl===null)throw Error(r(459));var s=Kl;return Kl=null,s}function WS(s){if(s===gu||s===sp)throw Error(r(483))}var vu=null,uf=0;function op(s){var l=uf;return uf+=1,vu===null&&(vu=[]),KS(vu,s,l)}function df(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function lp(s,l){throw l.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function YS(s){function l(ee,Y){if(s){var se=ee.deletions;se===null?(ee.deletions=[Y],ee.flags|=16):se.push(Y)}}function d(ee,Y){if(!s)return null;for(;Y!==null;)l(ee,Y),Y=Y.sibling;return null}function m(ee){for(var Y=new Map;ee!==null;)ee.key!==null?Y.set(ee.key,ee):Y.set(ee.index,ee),ee=ee.sibling;return Y}function b(ee,Y){return ee=da(ee,Y),ee.index=0,ee.sibling=null,ee}function w(ee,Y,se){return ee.index=se,s?(se=ee.alternate,se!==null?(se=se.index,se<Y?(ee.flags|=67108866,Y):se):(ee.flags|=67108866,Y)):(ee.flags|=1048576,Y)}function T(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function q(ee,Y,se,_e){return Y===null||Y.tag!==6?(Y=F0(se,ee.mode,_e),Y.return=ee,Y):(Y=b(Y,se),Y.return=ee,Y)}function K(ee,Y,se,_e){var qe=se.type;return qe===j?be(ee,Y,se.props.children,_e,se.key):Y!==null&&(Y.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===O&&Gl(qe)===Y.type)?(Y=b(Y,se.props),df(Y,se),Y.return=ee,Y):(Y=ep(se.type,se.key,se.props,null,ee.mode,_e),df(Y,se),Y.return=ee,Y)}function oe(ee,Y,se,_e){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==se.containerInfo||Y.stateNode.implementation!==se.implementation?(Y=H0(se,ee.mode,_e),Y.return=ee,Y):(Y=b(Y,se.children||[]),Y.return=ee,Y)}function be(ee,Y,se,_e,qe){return Y===null||Y.tag!==7?(Y=Vl(se,ee.mode,_e,qe),Y.return=ee,Y):(Y=b(Y,se),Y.return=ee,Y)}function je(ee,Y,se){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=F0(""+Y,ee.mode,se),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return se=ep(Y.type,Y.key,Y.props,null,ee.mode,se),df(se,Y),se.return=ee,se;case E:return Y=H0(Y,ee.mode,se),Y.return=ee,Y;case O:return Y=Gl(Y),je(ee,Y,se)}if(Z(Y)||z(Y))return Y=Vl(Y,ee.mode,se,null),Y.return=ee,Y;if(typeof Y.then=="function")return je(ee,op(Y),se);if(Y.$$typeof===C)return je(ee,rp(ee,Y),se);lp(ee,Y)}return null}function le(ee,Y,se,_e){var qe=Y!==null?Y.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return qe!==null?null:q(ee,Y,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return se.key===qe?K(ee,Y,se,_e):null;case E:return se.key===qe?oe(ee,Y,se,_e):null;case O:return se=Gl(se),le(ee,Y,se,_e)}if(Z(se)||z(se))return qe!==null?null:be(ee,Y,se,_e,null);if(typeof se.then=="function")return le(ee,Y,op(se),_e);if(se.$$typeof===C)return le(ee,Y,rp(ee,se),_e);lp(ee,se)}return null}function pe(ee,Y,se,_e,qe){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return ee=ee.get(se)||null,q(Y,ee,""+_e,qe);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case x:return ee=ee.get(_e.key===null?se:_e.key)||null,K(Y,ee,_e,qe);case E:return ee=ee.get(_e.key===null?se:_e.key)||null,oe(Y,ee,_e,qe);case O:return _e=Gl(_e),pe(ee,Y,se,_e,qe)}if(Z(_e)||z(_e))return ee=ee.get(se)||null,be(Y,ee,_e,qe,null);if(typeof _e.then=="function")return pe(ee,Y,se,op(_e),qe);if(_e.$$typeof===C)return pe(ee,Y,se,rp(Y,_e),qe);lp(Y,_e)}return null}function Oe(ee,Y,se,_e){for(var qe=null,_t=null,De=Y,rt=Y=0,ct=null;De!==null&&rt<se.length;rt++){De.index>rt?(ct=De,De=null):ct=De.sibling;var jt=le(ee,De,se[rt],_e);if(jt===null){De===null&&(De=ct);break}s&&De&&jt.alternate===null&&l(ee,De),Y=w(jt,Y,rt),_t===null?qe=jt:_t.sibling=jt,_t=jt,De=ct}if(rt===se.length)return d(ee,De),pt&&fa(ee,rt),qe;if(De===null){for(;rt<se.length;rt++)De=je(ee,se[rt],_e),De!==null&&(Y=w(De,Y,rt),_t===null?qe=De:_t.sibling=De,_t=De);return pt&&fa(ee,rt),qe}for(De=m(De);rt<se.length;rt++)ct=pe(De,ee,rt,se[rt],_e),ct!==null&&(s&&ct.alternate!==null&&De.delete(ct.key===null?rt:ct.key),Y=w(ct,Y,rt),_t===null?qe=ct:_t.sibling=ct,_t=ct);return s&&De.forEach(function(Uo){return l(ee,Uo)}),pt&&fa(ee,rt),qe}function Fe(ee,Y,se,_e){if(se==null)throw Error(r(151));for(var qe=null,_t=null,De=Y,rt=Y=0,ct=null,jt=se.next();De!==null&&!jt.done;rt++,jt=se.next()){De.index>rt?(ct=De,De=null):ct=De.sibling;var Uo=le(ee,De,jt.value,_e);if(Uo===null){De===null&&(De=ct);break}s&&De&&Uo.alternate===null&&l(ee,De),Y=w(Uo,Y,rt),_t===null?qe=Uo:_t.sibling=Uo,_t=Uo,De=ct}if(jt.done)return d(ee,De),pt&&fa(ee,rt),qe;if(De===null){for(;!jt.done;rt++,jt=se.next())jt=je(ee,jt.value,_e),jt!==null&&(Y=w(jt,Y,rt),_t===null?qe=jt:_t.sibling=jt,_t=jt);return pt&&fa(ee,rt),qe}for(De=m(De);!jt.done;rt++,jt=se.next())jt=pe(De,ee,rt,jt.value,_e),jt!==null&&(s&&jt.alternate!==null&&De.delete(jt.key===null?rt:jt.key),Y=w(jt,Y,rt),_t===null?qe=jt:_t.sibling=jt,_t=jt);return s&&De.forEach(function(gV){return l(ee,gV)}),pt&&fa(ee,rt),qe}function Lt(ee,Y,se,_e){if(typeof se=="object"&&se!==null&&se.type===j&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case x:e:{for(var qe=se.key;Y!==null;){if(Y.key===qe){if(qe=se.type,qe===j){if(Y.tag===7){d(ee,Y.sibling),_e=b(Y,se.props.children),_e.return=ee,ee=_e;break e}}else if(Y.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===O&&Gl(qe)===Y.type){d(ee,Y.sibling),_e=b(Y,se.props),df(_e,se),_e.return=ee,ee=_e;break e}d(ee,Y);break}else l(ee,Y);Y=Y.sibling}se.type===j?(_e=Vl(se.props.children,ee.mode,_e,se.key),_e.return=ee,ee=_e):(_e=ep(se.type,se.key,se.props,null,ee.mode,_e),df(_e,se),_e.return=ee,ee=_e)}return T(ee);case E:e:{for(qe=se.key;Y!==null;){if(Y.key===qe)if(Y.tag===4&&Y.stateNode.containerInfo===se.containerInfo&&Y.stateNode.implementation===se.implementation){d(ee,Y.sibling),_e=b(Y,se.children||[]),_e.return=ee,ee=_e;break e}else{d(ee,Y);break}else l(ee,Y);Y=Y.sibling}_e=H0(se,ee.mode,_e),_e.return=ee,ee=_e}return T(ee);case O:return se=Gl(se),Lt(ee,Y,se,_e)}if(Z(se))return Oe(ee,Y,se,_e);if(z(se)){if(qe=z(se),typeof qe!="function")throw Error(r(150));return se=qe.call(se),Fe(ee,Y,se,_e)}if(typeof se.then=="function")return Lt(ee,Y,op(se),_e);if(se.$$typeof===C)return Lt(ee,Y,rp(ee,se),_e);lp(ee,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Y!==null&&Y.tag===6?(d(ee,Y.sibling),_e=b(Y,se),_e.return=ee,ee=_e):(d(ee,Y),_e=F0(se,ee.mode,_e),_e.return=ee,ee=_e),T(ee)):d(ee,Y)}return function(ee,Y,se,_e){try{uf=0;var qe=Lt(ee,Y,se,_e);return vu=null,qe}catch(De){if(De===gu||De===sp)throw De;var _t=si(29,De,null,ee.mode);return _t.lanes=_e,_t.return=ee,_t}}}var Ql=YS(!0),XS=YS(!1),wo=!1;function rb(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ib(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Eo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function No(s,l,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Nt&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,l=Zm(s),kS(s,null,d),l}return Jm(s,m,l,d),Zm(s)}function ff(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,Ld(s,d)}}function sb(s,l){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?b=w=T:w=w.next=T,d=d.next}while(d!==null);w===null?b=w=l:w=w.next=l}else b=w=l;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var ab=!1;function hf(){if(ab){var s=pu;if(s!==null)throw s}}function mf(s,l,d,m){ab=!1;var b=s.updateQueue;wo=!1;var w=b.firstBaseUpdate,T=b.lastBaseUpdate,q=b.shared.pending;if(q!==null){b.shared.pending=null;var K=q,oe=K.next;K.next=null,T===null?w=oe:T.next=oe,T=K;var be=s.alternate;be!==null&&(be=be.updateQueue,q=be.lastBaseUpdate,q!==T&&(q===null?be.firstBaseUpdate=oe:q.next=oe,be.lastBaseUpdate=K))}if(w!==null){var je=b.baseState;T=0,be=oe=K=null,q=w;do{var le=q.lane&-536870913,pe=le!==q.lane;if(pe?(lt&le)===le:(m&le)===le){le!==0&&le===mu&&(ab=!0),be!==null&&(be=be.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Oe=s,Fe=q;le=l;var Lt=d;switch(Fe.tag){case 1:if(Oe=Fe.payload,typeof Oe=="function"){je=Oe.call(Lt,je,le);break e}je=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Fe.payload,le=typeof Oe=="function"?Oe.call(Lt,je,le):Oe,le==null)break e;je=g({},je,le);break e;case 2:wo=!0}}le=q.callback,le!==null&&(s.flags|=64,pe&&(s.flags|=8192),pe=b.callbacks,pe===null?b.callbacks=[le]:pe.push(le))}else pe={lane:le,tag:q.tag,payload:q.payload,callback:q.callback,next:null},be===null?(oe=be=pe,K=je):be=be.next=pe,T|=le;if(q=q.next,q===null){if(q=b.shared.pending,q===null)break;pe=q,q=pe.next,pe.next=null,b.lastBaseUpdate=pe,b.shared.pending=null}}while(!0);be===null&&(K=je),b.baseState=K,b.firstBaseUpdate=oe,b.lastBaseUpdate=be,w===null&&(b.shared.lanes=0),Po|=T,s.lanes=T,s.memoizedState=je}}function JS(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function ZS(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)JS(d[s],l)}var yu=F(null),cp=F(0);function eA(s,l){s=wa,ue(cp,s),ue(yu,l),wa=s|l.baseLanes}function ob(){ue(cp,wa),ue(yu,yu.current)}function lb(){wa=cp.current,ne(yu),ne(cp)}var ai=F(null),Ii=null;function So(s){var l=s.alternate;ue(bn,bn.current&1),ue(ai,s),Ii===null&&(l===null||yu.current!==null||l.memoizedState!==null)&&(Ii=s)}function cb(s){ue(bn,bn.current),ue(ai,s),Ii===null&&(Ii=s)}function tA(s){s.tag===22?(ue(bn,bn.current),ue(ai,s),Ii===null&&(Ii=s)):Ao()}function Ao(){ue(bn,bn.current),ue(ai,ai.current)}function oi(s){ne(ai),Ii===s&&(Ii=null),ne(bn)}var bn=F(0);function up(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||px(d)||gx(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var pa=0,nt=null,Mt=null,Tn=null,dp=!1,bu=!1,Wl=!1,fp=0,pf=0,xu=null,a9=0;function cn(){throw Error(r(321))}function ub(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!ii(s[d],l[d]))return!1;return!0}function db(s,l,d,m,b,w){return pa=w,nt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?LA:Sb,Wl=!1,w=d(m,b),Wl=!1,bu&&(w=rA(l,d,m,b)),nA(s),w}function nA(s){H.H=yf;var l=Mt!==null&&Mt.next!==null;if(pa=0,Tn=Mt=nt=null,dp=!1,pf=0,xu=null,l)throw Error(r(300));s===null||Cn||(s=s.dependencies,s!==null&&np(s)&&(Cn=!0))}function rA(s,l,d,m){nt=s;var b=0;do{if(bu&&(xu=null),pf=0,bu=!1,25<=b)throw Error(r(301));if(b+=1,Tn=Mt=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}H.H=qA,w=l(d,m)}while(bu);return w}function o9(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?gf(l):l,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&(nt.flags|=1024),l}function fb(){var s=fp!==0;return fp=0,s}function hb(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function mb(s){if(dp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}dp=!1}pa=0,Tn=Mt=nt=null,bu=!1,pf=fp=0,xu=null}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?nt.memoizedState=Tn=s:Tn=Tn.next=s,Tn}function xn(){if(Mt===null){var s=nt.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var l=Tn===null?nt.memoizedState:Tn.next;if(l!==null)Tn=l,Mt=s;else{if(s===null)throw nt.alternate===null?Error(r(467)):Error(r(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Tn===null?nt.memoizedState=Tn=s:Tn=Tn.next=s}return Tn}function hp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gf(s){var l=pf;return pf+=1,xu===null&&(xu=[]),s=KS(xu,s,l),l=nt,(Tn===null?l.memoizedState:Tn.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?LA:Sb),s}function mp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return gf(s);if(s.$$typeof===C)return ar(s)}throw Error(r(438,String(s)))}function pb(s){var l=null,d=nt.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=nt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=hp(),nt.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),m=0;m<s;m++)d[m]=U;return l.index++,d}function ga(s,l){return typeof l=="function"?l(s):l}function pp(s){var l=xn();return gb(l,Mt,s)}function gb(s,l,d){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var b=s.baseQueue,w=m.pending;if(w!==null){if(b!==null){var T=b.next;b.next=w.next,w.next=T}l.baseQueue=b=w,m.pending=null}if(w=s.baseState,b===null)s.memoizedState=w;else{l=b.next;var q=T=null,K=null,oe=l,be=!1;do{var je=oe.lane&-536870913;if(je!==oe.lane?(lt&je)===je:(pa&je)===je){var le=oe.revertLane;if(le===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),je===mu&&(be=!0);else if((pa&le)===le){oe=oe.next,le===mu&&(be=!0);continue}else je={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(q=K=je,T=w):K=K.next=je,nt.lanes|=le,Po|=le;je=oe.action,Wl&&d(w,je),w=oe.hasEagerState?oe.eagerState:d(w,je)}else le={lane:je,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(q=K=le,T=w):K=K.next=le,nt.lanes|=je,Po|=je;oe=oe.next}while(oe!==null&&oe!==l);if(K===null?T=w:K.next=q,!ii(w,s.memoizedState)&&(Cn=!0,be&&(d=pu,d!==null)))throw d;s.memoizedState=w,s.baseState=T,s.baseQueue=K,m.lastRenderedState=w}return b===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function vb(s){var l=xn(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var m=d.dispatch,b=d.pending,w=l.memoizedState;if(b!==null){d.pending=null;var T=b=b.next;do w=s(w,T.action),T=T.next;while(T!==b);ii(w,l.memoizedState)||(Cn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,m]}function iA(s,l,d){var m=nt,b=xn(),w=pt;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=l();var T=!ii((Mt||b).memoizedState,d);if(T&&(b.memoizedState=d,Cn=!0),b=b.queue,xb(oA.bind(null,m,b,s),[s]),b.getSnapshot!==l||T||Tn!==null&&Tn.memoizedState.tag&1){if(m.flags|=2048,_u(9,{destroy:void 0},aA.bind(null,m,b,d,l),null),Bt===null)throw Error(r(349));w||(pa&127)!==0||sA(m,l,d)}return d}function sA(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=nt.updateQueue,l===null?(l=hp(),nt.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function aA(s,l,d,m){l.value=d,l.getSnapshot=m,lA(l)&&cA(s)}function oA(s,l,d){return d(function(){lA(l)&&cA(s)})}function lA(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!ii(s,d)}catch{return!0}}function cA(s){var l=Ul(s,2);l!==null&&Qr(l,s,2)}function yb(s){var l=Tr();if(typeof s=="function"){var d=s;if(s=d(),Wl){Vr(!0);try{d()}finally{Vr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:s},l}function uA(s,l,d,m){return s.baseState=d,gb(s,Mt,typeof m=="function"?m:ga)}function l9(s,l,d,m,b){if(yp(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};H.T!==null?d(!0):w.isTransition=!1,m(w),d=l.pending,d===null?(w.next=l.pending=w,dA(l,w)):(w.next=d.next,l.pending=d.next=w)}}function dA(s,l){var d=l.action,m=l.payload,b=s.state;if(l.isTransition){var w=H.T,T={};H.T=T;try{var q=d(b,m),K=H.S;K!==null&&K(T,q),fA(s,l,q)}catch(oe){bb(s,l,oe)}finally{w!==null&&T.types!==null&&(w.types=T.types),H.T=w}}else try{w=d(b,m),fA(s,l,w)}catch(oe){bb(s,l,oe)}}function fA(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){hA(s,l,m)},function(m){return bb(s,l,m)}):hA(s,l,d)}function hA(s,l,d){l.status="fulfilled",l.value=d,mA(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,dA(s,d)))}function bb(s,l,d){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,mA(l),l=l.next;while(l!==m)}s.action=null}function mA(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function pA(s,l){return l}function gA(s,l){if(pt){var d=Bt.formState;if(d!==null){e:{var m=nt;if(pt){if(Qt){t:{for(var b=Qt,w=Pi;b.nodeType!==8;){if(!w){b=null;break t}if(b=Oi(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){Qt=Oi(b.nextSibling),m=b.data==="F!";break e}}_o(m)}m=!1}m&&(l=d[0])}}return d=Tr(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pA,lastRenderedState:l},d.queue=m,d=DA.bind(null,nt,m),m.dispatch=d,m=yb(!1),w=Nb.bind(null,nt,!1,m.queue),m=Tr(),b={state:l,dispatch:null,action:s,pending:null},m.queue=b,d=l9.bind(null,nt,b,w,d),b.dispatch=d,m.memoizedState=s,[l,d,!1]}function vA(s){var l=xn();return yA(l,Mt,s)}function yA(s,l,d){if(l=gb(s,l,pA)[0],s=pp(ga)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=gf(l)}catch(T){throw T===gu?sp:T}else m=l;l=xn();var b=l.queue,w=b.dispatch;return d!==l.memoizedState&&(nt.flags|=2048,_u(9,{destroy:void 0},c9.bind(null,b,d),null)),[m,w,s]}function c9(s,l){s.action=l}function bA(s){var l=xn(),d=Mt;if(d!==null)return yA(l,d,s);xn(),l=l.memoizedState,d=xn();var m=d.queue.dispatch;return d.memoizedState=s,[l,m,!1]}function _u(s,l,d,m){return s={tag:s,create:d,deps:m,inst:l,next:null},l=nt.updateQueue,l===null&&(l=hp(),nt.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,l.lastEffect=s),s}function xA(){return xn().memoizedState}function gp(s,l,d,m){var b=Tr();nt.flags|=s,b.memoizedState=_u(1|l,{destroy:void 0},d,m===void 0?null:m)}function vp(s,l,d,m){var b=xn();m=m===void 0?null:m;var w=b.memoizedState.inst;Mt!==null&&m!==null&&ub(m,Mt.memoizedState.deps)?b.memoizedState=_u(l,w,d,m):(nt.flags|=s,b.memoizedState=_u(1|l,w,d,m))}function _A(s,l){gp(8390656,8,s,l)}function xb(s,l){vp(2048,8,s,l)}function u9(s){nt.flags|=4;var l=nt.updateQueue;if(l===null)l=hp(),nt.updateQueue=l,l.events=[s];else{var d=l.events;d===null?l.events=[s]:d.push(s)}}function jA(s){var l=xn().memoizedState;return u9({ref:l,nextImpl:s}),function(){if((Nt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function wA(s,l){return vp(4,2,s,l)}function EA(s,l){return vp(4,4,s,l)}function NA(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function SA(s,l,d){d=d!=null?d.concat([s]):null,vp(4,4,NA.bind(null,l,s),d)}function _b(){}function AA(s,l){var d=xn();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&ub(l,m[1])?m[0]:(d.memoizedState=[s,l],s)}function TA(s,l){var d=xn();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&ub(l,m[1]))return m[0];if(m=s(),Wl){Vr(!0);try{s()}finally{Vr(!1)}}return d.memoizedState=[m,l],m}function jb(s,l,d){return d===void 0||(pa&1073741824)!==0&&(lt&261930)===0?s.memoizedState=l:(s.memoizedState=d,s=CT(),nt.lanes|=s,Po|=s,d)}function CA(s,l,d,m){return ii(d,l)?d:yu.current!==null?(s=jb(s,d,m),ii(s,l)||(Cn=!0),s):(pa&42)===0||(pa&1073741824)!==0&&(lt&261930)===0?(Cn=!0,s.memoizedState=d):(s=CT(),nt.lanes|=s,Po|=s,l)}function PA(s,l,d,m,b){var w=ae.p;ae.p=w!==0&&8>w?w:8;var T=H.T,q={};H.T=q,Nb(s,!1,l,d);try{var K=b(),oe=H.S;if(oe!==null&&oe(q,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var be=s9(K,m);vf(s,l,be,ui(s))}else vf(s,l,m,ui(s))}catch(je){vf(s,l,{then:function(){},status:"rejected",reason:je},ui())}finally{ae.p=w,T!==null&&q.types!==null&&(T.types=q.types),H.T=T}}function d9(){}function wb(s,l,d,m){if(s.tag!==5)throw Error(r(476));var b=IA(s).queue;PA(s,b,l,X,d===null?d9:function(){return OA(s),d(m)})}function IA(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:X},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function OA(s){var l=IA(s);l.next===null&&(l=s.alternate.memoizedState),vf(s,l.next.queue,{},ui())}function Eb(){return ar(kf)}function RA(){return xn().memoizedState}function kA(){return xn().memoizedState}function f9(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=ui();s=Eo(d);var m=No(l,s,d);m!==null&&(Qr(m,l,d),ff(m,l,d)),l={cache:Z0()},s.payload=l;return}l=l.return}}function h9(s,l,d){var m=ui();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},yp(s)?MA(l,d):(d=B0(s,l,d,m),d!==null&&(Qr(d,s,m),zA(d,l,m)))}function DA(s,l,d){var m=ui();vf(s,l,d,m)}function vf(s,l,d,m){var b={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(yp(s))MA(l,b);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var T=l.lastRenderedState,q=w(T,d);if(b.hasEagerState=!0,b.eagerState=q,ii(q,T))return Jm(s,l,b,0),Bt===null&&Xm(),!1}catch{}if(d=B0(s,l,b,m),d!==null)return Qr(d,s,m),zA(d,l,m),!0}return!1}function Nb(s,l,d,m){if(m={lane:2,revertLane:rx(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},yp(s)){if(l)throw Error(r(479))}else l=B0(s,d,m,2),l!==null&&Qr(l,s,2)}function yp(s){var l=s.alternate;return s===nt||l!==null&&l===nt}function MA(s,l){bu=dp=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function zA(s,l,d){if((d&4194048)!==0){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,Ld(s,d)}}var yf={readContext:ar,use:mp,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};yf.useEffectEvent=cn;var LA={readContext:ar,use:mp,useCallback:function(s,l){return Tr().memoizedState=[s,l===void 0?null:l],s},useContext:ar,useEffect:_A,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,gp(4194308,4,NA.bind(null,l,s),d)},useLayoutEffect:function(s,l){return gp(4194308,4,s,l)},useInsertionEffect:function(s,l){gp(4,2,s,l)},useMemo:function(s,l){var d=Tr();l=l===void 0?null:l;var m=s();if(Wl){Vr(!0);try{s()}finally{Vr(!1)}}return d.memoizedState=[m,l],m},useReducer:function(s,l,d){var m=Tr();if(d!==void 0){var b=d(l);if(Wl){Vr(!0);try{d(l)}finally{Vr(!1)}}}else b=l;return m.memoizedState=m.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},m.queue=s,s=s.dispatch=h9.bind(null,nt,s),[m.memoizedState,s]},useRef:function(s){var l=Tr();return s={current:s},l.memoizedState=s},useState:function(s){s=yb(s);var l=s.queue,d=DA.bind(null,nt,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:_b,useDeferredValue:function(s,l){var d=Tr();return jb(d,s,l)},useTransition:function(){var s=yb(!1);return s=PA.bind(null,nt,s.queue,!0,!1),Tr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var m=nt,b=Tr();if(pt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Bt===null)throw Error(r(349));(lt&127)!==0||sA(m,l,d)}b.memoizedState=d;var w={value:d,getSnapshot:l};return b.queue=w,_A(oA.bind(null,m,w,s),[s]),m.flags|=2048,_u(9,{destroy:void 0},aA.bind(null,m,w,d,l),null),d},useId:function(){var s=Tr(),l=Bt.identifierPrefix;if(pt){var d=Is,m=Ps;d=(m&~(1<<32-nn(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=fp++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=a9++,l="_"+l+"r_"+d.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Eb,useFormState:gA,useActionState:gA,useOptimistic:function(s){var l=Tr();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Nb.bind(null,nt,!0,d),d.dispatch=l,[s,l]},useMemoCache:pb,useCacheRefresh:function(){return Tr().memoizedState=f9.bind(null,nt)},useEffectEvent:function(s){var l=Tr(),d={impl:s};return l.memoizedState=d,function(){if((Nt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},Sb={readContext:ar,use:mp,useCallback:AA,useContext:ar,useEffect:xb,useImperativeHandle:SA,useInsertionEffect:wA,useLayoutEffect:EA,useMemo:TA,useReducer:pp,useRef:xA,useState:function(){return pp(ga)},useDebugValue:_b,useDeferredValue:function(s,l){var d=xn();return CA(d,Mt.memoizedState,s,l)},useTransition:function(){var s=pp(ga)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:gf(s),l]},useSyncExternalStore:iA,useId:RA,useHostTransitionStatus:Eb,useFormState:vA,useActionState:vA,useOptimistic:function(s,l){var d=xn();return uA(d,Mt,s,l)},useMemoCache:pb,useCacheRefresh:kA};Sb.useEffectEvent=jA;var qA={readContext:ar,use:mp,useCallback:AA,useContext:ar,useEffect:xb,useImperativeHandle:SA,useInsertionEffect:wA,useLayoutEffect:EA,useMemo:TA,useReducer:vb,useRef:xA,useState:function(){return vb(ga)},useDebugValue:_b,useDeferredValue:function(s,l){var d=xn();return Mt===null?jb(d,s,l):CA(d,Mt.memoizedState,s,l)},useTransition:function(){var s=vb(ga)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:gf(s),l]},useSyncExternalStore:iA,useId:RA,useHostTransitionStatus:Eb,useFormState:bA,useActionState:bA,useOptimistic:function(s,l){var d=xn();return Mt!==null?uA(d,Mt,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:pb,useCacheRefresh:kA};qA.useEffectEvent=jA;function Ab(s,l,d,m){l=s.memoizedState,d=d(m,l),d=d==null?l:g({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Tb={enqueueSetState:function(s,l,d){s=s._reactInternals;var m=ui(),b=Eo(m);b.payload=l,d!=null&&(b.callback=d),l=No(s,b,m),l!==null&&(Qr(l,s,m),ff(l,s,m))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var m=ui(),b=Eo(m);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=No(s,b,m),l!==null&&(Qr(l,s,m),ff(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=ui(),m=Eo(d);m.tag=2,l!=null&&(m.callback=l),l=No(s,m,d),l!==null&&(Qr(l,s,d),ff(l,s,d))}};function UA(s,l,d,m,b,w,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,w,T):l.prototype&&l.prototype.isPureReactComponent?!rf(d,m)||!rf(b,w):!0}function VA(s,l,d,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==s&&Tb.enqueueReplaceState(l,l.state,null)}function Yl(s,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(s=s.defaultProps){d===l&&(d=g({},d));for(var b in s)d[b]===void 0&&(d[b]=s[b])}return d}function BA(s){Ym(s)}function $A(s){console.error(s)}function FA(s){Ym(s)}function bp(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function HA(s,l,d){try{var m=s.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Cb(s,l,d){return d=Eo(d),d.tag=3,d.payload={element:null},d.callback=function(){bp(s,l)},d}function GA(s){return s=Eo(s),s.tag=3,s}function KA(s,l,d,m){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;s.payload=function(){return b(w)},s.callback=function(){HA(l,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){HA(l,d,m),typeof b!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var q=m.stack;this.componentDidCatch(m.value,{componentStack:q!==null?q:""})})}function m9(s,l,d,m,b){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&hu(l,d,b,!0),d=ai.current,d!==null){switch(d.tag){case 31:case 13:return Ii===null?Ip():d.alternate===null&&un===0&&(un=3),d.flags&=-257,d.flags|=65536,d.lanes=b,m===ap?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),ex(s,m,b)),!1;case 22:return d.flags|=65536,m===ap?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),ex(s,m,b)),!1}throw Error(r(435,d.tag))}return ex(s,m,b),Ip(),!1}if(pt)return l=ai.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,m!==Q0&&(s=Error(r(422),{cause:m}),of(Ai(s,d)))):(m!==Q0&&(l=Error(r(423),{cause:m}),of(Ai(l,d))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,m=Ai(m,d),b=Cb(s.stateNode,m,b),sb(s,b),un!==4&&(un=2)),!1;var w=Error(r(520),{cause:m});if(w=Ai(w,d),Sf===null?Sf=[w]:Sf.push(w),un!==4&&(un=2),l===null)return!0;m=Ai(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=b&-b,d.lanes|=s,s=Cb(d.stateNode,m,s),sb(d,s),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Io===null||!Io.has(w))))return d.flags|=65536,b&=-b,d.lanes|=b,b=GA(b),KA(b,s,d,m),sb(d,b),!1}d=d.return}while(d!==null);return!1}var Pb=Error(r(461)),Cn=!1;function or(s,l,d,m){l.child=s===null?XS(l,null,d,m):Ql(l,s.child,d,m)}function QA(s,l,d,m,b){d=d.render;var w=l.ref;if("ref"in m){var T={};for(var q in m)q!=="ref"&&(T[q]=m[q])}else T=m;return Fl(l),m=db(s,l,d,T,w,b),q=fb(),s!==null&&!Cn?(hb(s,l,b),va(s,l,b)):(pt&&q&&G0(l),l.flags|=1,or(s,l,m,b),l.child)}function WA(s,l,d,m,b){if(s===null){var w=d.type;return typeof w=="function"&&!$0(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,YA(s,l,w,m,b)):(s=ep(d.type,null,m,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!Lb(s,b)){var T=w.memoizedProps;if(d=d.compare,d=d!==null?d:rf,d(T,m)&&s.ref===l.ref)return va(s,l,b)}return l.flags|=1,s=da(w,m),s.ref=l.ref,s.return=l,l.child=s}function YA(s,l,d,m,b){if(s!==null){var w=s.memoizedProps;if(rf(w,m)&&s.ref===l.ref)if(Cn=!1,l.pendingProps=m=w,Lb(s,b))(s.flags&131072)!==0&&(Cn=!0);else return l.lanes=s.lanes,va(s,l,b)}return Ib(s,l,d,m,b)}function XA(s,l,d,m){var b=m.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|d:d,s!==null){for(m=l.child=s.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~w}else m=0,l.child=null;return JA(s,l,w,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&ip(l,w!==null?w.cachePool:null),w!==null?eA(l,w):ob(),tA(l);else return m=l.lanes=536870912,JA(s,l,w!==null?w.baseLanes|d:d,d,m)}else w!==null?(ip(l,w.cachePool),eA(l,w),Ao(),l.memoizedState=null):(s!==null&&ip(l,null),ob(),Ao());return or(s,l,b,d),l.child}function bf(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function JA(s,l,d,m,b){var w=tb();return w=w===null?null:{parent:An._currentValue,pool:w},l.memoizedState={baseLanes:d,cachePool:w},s!==null&&ip(l,null),ob(),tA(l),s!==null&&hu(s,l,m,!0),l.childLanes=b,null}function xp(s,l){return l=jp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function ZA(s,l,d){return Ql(l,s.child,null,d),s=xp(l,l.pendingProps),s.flags|=2,oi(l),l.memoizedState=null,s}function p9(s,l,d){var m=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(pt){if(m.mode==="hidden")return s=xp(l,m),l.lanes=536870912,bf(null,s);if(cb(l),(s=Qt)?(s=dC(s,Pi),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Ps,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},d=MS(s),d.return=l,l.child=d,sr=l,Qt=null)):s=null,s===null)throw _o(l);return l.lanes=536870912,null}return xp(l,m)}var w=s.memoizedState;if(w!==null){var T=w.dehydrated;if(cb(l),b)if(l.flags&256)l.flags&=-257,l=ZA(s,l,d);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Cn||hu(s,l,d,!1),b=(d&s.childLanes)!==0,Cn||b){if(m=Bt,m!==null&&(T=qd(m,d),T!==0&&T!==w.retryLane))throw w.retryLane=T,Ul(s,T),Qr(m,s,T),Pb;Ip(),l=ZA(s,l,d)}else s=w.treeContext,Qt=Oi(T.nextSibling),sr=l,pt=!0,xo=null,Pi=!1,s!==null&&qS(l,s),l=xp(l,m),l.flags|=4096;return l}return s=da(s.child,{mode:m.mode,children:m.children}),s.ref=l.ref,l.child=s,s.return=l,s}function _p(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function Ib(s,l,d,m,b){return Fl(l),d=db(s,l,d,m,void 0,b),m=fb(),s!==null&&!Cn?(hb(s,l,b),va(s,l,b)):(pt&&m&&G0(l),l.flags|=1,or(s,l,d,b),l.child)}function eT(s,l,d,m,b,w){return Fl(l),l.updateQueue=null,d=rA(l,m,d,b),nA(s),m=fb(),s!==null&&!Cn?(hb(s,l,w),va(s,l,w)):(pt&&m&&G0(l),l.flags|=1,or(s,l,d,w),l.child)}function tT(s,l,d,m,b){if(Fl(l),l.stateNode===null){var w=cu,T=d.contextType;typeof T=="object"&&T!==null&&(w=ar(T)),w=new d(m,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Tb,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=m,w.state=l.memoizedState,w.refs={},rb(l),T=d.contextType,w.context=typeof T=="object"&&T!==null?ar(T):cu,w.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(Ab(l,d,T,m),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&Tb.enqueueReplaceState(w,w.state,null),mf(l,m,w,b),hf(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(s===null){w=l.stateNode;var q=l.memoizedProps,K=Yl(d,q);w.props=K;var oe=w.context,be=d.contextType;T=cu,typeof be=="object"&&be!==null&&(T=ar(be));var je=d.getDerivedStateFromProps;be=typeof je=="function"||typeof w.getSnapshotBeforeUpdate=="function",q=l.pendingProps!==q,be||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(q||oe!==T)&&VA(l,w,m,T),wo=!1;var le=l.memoizedState;w.state=le,mf(l,m,w,b),hf(),oe=l.memoizedState,q||le!==oe||wo?(typeof je=="function"&&(Ab(l,d,je,m),oe=l.memoizedState),(K=wo||UA(l,d,K,m,le,oe,T))?(be||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=oe),w.props=m,w.state=oe,w.context=T,m=K):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{w=l.stateNode,ib(s,l),T=l.memoizedProps,be=Yl(d,T),w.props=be,je=l.pendingProps,le=w.context,oe=d.contextType,K=cu,typeof oe=="object"&&oe!==null&&(K=ar(oe)),q=d.getDerivedStateFromProps,(oe=typeof q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==je||le!==K)&&VA(l,w,m,K),wo=!1,le=l.memoizedState,w.state=le,mf(l,m,w,b),hf();var pe=l.memoizedState;T!==je||le!==pe||wo||s!==null&&s.dependencies!==null&&np(s.dependencies)?(typeof q=="function"&&(Ab(l,d,q,m),pe=l.memoizedState),(be=wo||UA(l,d,be,m,le,pe,K)||s!==null&&s.dependencies!==null&&np(s.dependencies))?(oe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,pe,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,pe,K)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=pe),w.props=m,w.state=pe,w.context=K,m=be):(typeof w.componentDidUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),m=!1)}return w=m,_p(s,l),m=(l.flags&128)!==0,w||m?(w=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&m?(l.child=Ql(l,s.child,null,b),l.child=Ql(l,null,d,b)):or(s,l,d,b),l.memoizedState=w.state,s=l.child):s=va(s,l,b),s}function nT(s,l,d,m){return Bl(),l.flags|=256,or(s,l,d,m),l.child}var Ob={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rb(s){return{baseLanes:s,cachePool:HS()}}function kb(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=ci),s}function rT(s,l,d){var m=l.pendingProps,b=!1,w=(l.flags&128)!==0,T;if((T=w)||(T=s!==null&&s.memoizedState===null?!1:(bn.current&2)!==0),T&&(b=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(pt){if(b?So(l):Ao(),(s=Qt)?(s=dC(s,Pi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Ps,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},d=MS(s),d.return=l,l.child=d,sr=l,Qt=null)):s=null,s===null)throw _o(l);return gx(s)?l.lanes=32:l.lanes=536870912,null}var q=m.children;return m=m.fallback,b?(Ao(),b=l.mode,q=jp({mode:"hidden",children:q},b),m=Vl(m,b,d,null),q.return=l,m.return=l,q.sibling=m,l.child=q,m=l.child,m.memoizedState=Rb(d),m.childLanes=kb(s,T,d),l.memoizedState=Ob,bf(null,m)):(So(l),Db(l,q))}var K=s.memoizedState;if(K!==null&&(q=K.dehydrated,q!==null)){if(w)l.flags&256?(So(l),l.flags&=-257,l=Mb(s,l,d)):l.memoizedState!==null?(Ao(),l.child=s.child,l.flags|=128,l=null):(Ao(),q=m.fallback,b=l.mode,m=jp({mode:"visible",children:m.children},b),q=Vl(q,b,d,null),q.flags|=2,m.return=l,q.return=l,m.sibling=q,l.child=m,Ql(l,s.child,null,d),m=l.child,m.memoizedState=Rb(d),m.childLanes=kb(s,T,d),l.memoizedState=Ob,l=bf(null,m));else if(So(l),gx(q)){if(T=q.nextSibling&&q.nextSibling.dataset,T)var oe=T.dgst;T=oe,m=Error(r(419)),m.stack="",m.digest=T,of({value:m,source:null,stack:null}),l=Mb(s,l,d)}else if(Cn||hu(s,l,d,!1),T=(d&s.childLanes)!==0,Cn||T){if(T=Bt,T!==null&&(m=qd(T,d),m!==0&&m!==K.retryLane))throw K.retryLane=m,Ul(s,m),Qr(T,s,m),Pb;px(q)||Ip(),l=Mb(s,l,d)}else px(q)?(l.flags|=192,l.child=s.child,l=null):(s=K.treeContext,Qt=Oi(q.nextSibling),sr=l,pt=!0,xo=null,Pi=!1,s!==null&&qS(l,s),l=Db(l,m.children),l.flags|=4096);return l}return b?(Ao(),q=m.fallback,b=l.mode,K=s.child,oe=K.sibling,m=da(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,oe!==null?q=da(oe,q):(q=Vl(q,b,d,null),q.flags|=2),q.return=l,m.return=l,m.sibling=q,l.child=m,bf(null,m),m=l.child,q=s.child.memoizedState,q===null?q=Rb(d):(b=q.cachePool,b!==null?(K=An._currentValue,b=b.parent!==K?{parent:K,pool:K}:b):b=HS(),q={baseLanes:q.baseLanes|d,cachePool:b}),m.memoizedState=q,m.childLanes=kb(s,T,d),l.memoizedState=Ob,bf(s.child,m)):(So(l),d=s.child,s=d.sibling,d=da(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=d,l.memoizedState=null,d)}function Db(s,l){return l=jp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function jp(s,l){return s=si(22,s,null,l),s.lanes=0,s}function Mb(s,l,d){return Ql(l,s.child,null,d),s=Db(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function iT(s,l,d){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),X0(s.return,l,d)}function zb(s,l,d,m,b,w){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b,treeForkCount:w}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=b,T.treeForkCount=w)}function sT(s,l,d){var m=l.pendingProps,b=m.revealOrder,w=m.tail;m=m.children;var T=bn.current,q=(T&2)!==0;if(q?(T=T&1|2,l.flags|=128):T&=1,ue(bn,T),or(s,l,m,d),m=pt?af:0,!q&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&iT(s,d,l);else if(s.tag===19)iT(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(d=l.child,b=null;d!==null;)s=d.alternate,s!==null&&up(s)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),zb(l,!1,b,d,w,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&up(s)===null){l.child=b;break}s=b.sibling,b.sibling=d,d=b,b=s}zb(l,!0,d,null,w,m);break;case"together":zb(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function va(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Po|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(hu(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,d=da(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=da(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function Lb(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&np(s)))}function g9(s,l,d){switch(l.tag){case 3:Ce(l,l.stateNode.containerInfo),jo(l,An,s.memoizedState.cache),Bl();break;case 27:case 5:J(l);break;case 4:Ce(l,l.stateNode.containerInfo);break;case 10:jo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,cb(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(So(l),l.flags|=128,null):(d&l.child.childLanes)!==0?rT(s,l,d):(So(l),s=va(s,l,d),s!==null?s.sibling:null);So(l);break;case 19:var b=(s.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(hu(s,l,d,!1),m=(d&l.childLanes)!==0),b){if(m)return sT(s,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ue(bn,bn.current),m)break;return null;case 22:return l.lanes=0,XA(s,l,d,l.pendingProps);case 24:jo(l,An,s.memoizedState.cache)}return va(s,l,d)}function aT(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)Cn=!0;else{if(!Lb(s,d)&&(l.flags&128)===0)return Cn=!1,g9(s,l,d);Cn=(s.flags&131072)!==0}else Cn=!1,pt&&(l.flags&1048576)!==0&&LS(l,af,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(s=Gl(l.elementType),l.type=s,typeof s=="function")$0(s)?(m=Yl(s,m),l.tag=1,l=tT(null,l,s,m,d)):(l.tag=0,l=Ib(null,l,s,m,d));else{if(s!=null){var b=s.$$typeof;if(b===P){l.tag=11,l=QA(null,l,s,m,d);break e}else if(b===D){l.tag=14,l=WA(null,l,s,m,d);break e}}throw l=ge(s)||s,Error(r(306,l,""))}}return l;case 0:return Ib(s,l,l.type,l.pendingProps,d);case 1:return m=l.type,b=Yl(m,l.pendingProps),tT(s,l,m,b,d);case 3:e:{if(Ce(l,l.stateNode.containerInfo),s===null)throw Error(r(387));m=l.pendingProps;var w=l.memoizedState;b=w.element,ib(s,l),mf(l,m,null,d);var T=l.memoizedState;if(m=T.cache,jo(l,An,m),m!==w.cache&&J0(l,[An],d,!0),hf(),m=T.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=nT(s,l,m,d);break e}else if(m!==b){b=Ai(Error(r(424)),l),of(b),l=nT(s,l,m,d);break e}else for(s=l.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Qt=Oi(s.firstChild),sr=l,pt=!0,xo=null,Pi=!0,d=XS(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Bl(),m===b){l=va(s,l,d);break e}or(s,l,m,d)}l=l.child}return l;case 26:return _p(s,l),s===null?(d=vC(l.type,null,l.pendingProps,null))?l.memoizedState=d:pt||(d=l.type,s=l.pendingProps,m=Lp(G.current).createElement(d),m[En]=l,m[Gn]=s,lr(m,d,s),Nn(m),l.stateNode=m):l.memoizedState=vC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return J(l),s===null&&pt&&(m=l.stateNode=mC(l.type,l.pendingProps,G.current),sr=l,Pi=!0,b=Qt,Do(l.type)?(vx=b,Qt=Oi(m.firstChild)):Qt=b),or(s,l,l.pendingProps.children,d),_p(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&pt&&((b=m=Qt)&&(m=G9(m,l.type,l.pendingProps,Pi),m!==null?(l.stateNode=m,sr=l,Qt=Oi(m.firstChild),Pi=!1,b=!0):b=!1),b||_o(l)),J(l),b=l.type,w=l.pendingProps,T=s!==null?s.memoizedProps:null,m=w.children,fx(b,w)?m=null:T!==null&&fx(b,T)&&(l.flags|=32),l.memoizedState!==null&&(b=db(s,l,o9,null,null,d),kf._currentValue=b),_p(s,l),or(s,l,m,d),l.child;case 6:return s===null&&pt&&((s=d=Qt)&&(d=K9(d,l.pendingProps,Pi),d!==null?(l.stateNode=d,sr=l,Qt=null,s=!0):s=!1),s||_o(l)),null;case 13:return rT(s,l,d);case 4:return Ce(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=Ql(l,null,m,d):or(s,l,m,d),l.child;case 11:return QA(s,l,l.type,l.pendingProps,d);case 7:return or(s,l,l.pendingProps,d),l.child;case 8:return or(s,l,l.pendingProps.children,d),l.child;case 12:return or(s,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,jo(l,l.type,m.value),or(s,l,m.children,d),l.child;case 9:return b=l.type._context,m=l.pendingProps.children,Fl(l),b=ar(b),m=m(b),l.flags|=1,or(s,l,m,d),l.child;case 14:return WA(s,l,l.type,l.pendingProps,d);case 15:return YA(s,l,l.type,l.pendingProps,d);case 19:return sT(s,l,d);case 31:return p9(s,l,d);case 22:return XA(s,l,d,l.pendingProps);case 24:return Fl(l),m=ar(An),s===null?(b=tb(),b===null&&(b=Bt,w=Z0(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=d),b=w),l.memoizedState={parent:m,cache:b},rb(l),jo(l,An,b)):((s.lanes&d)!==0&&(ib(s,l),mf(l,null,null,d),hf()),b=s.memoizedState,w=l.memoizedState,b.parent!==m?(b={parent:m,cache:m},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),jo(l,An,m)):(m=w.cache,jo(l,An,m),m!==b.cache&&J0(l,[An],d,!0))),or(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ya(s){s.flags|=4}function qb(s,l,d,m,b){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(RT())s.flags|=8192;else throw Kl=ap,nb}else s.flags&=-16777217}function oT(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!jC(l))if(RT())s.flags|=8192;else throw Kl=ap,nb}function wp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ve():536870912,s.lanes|=l,Nu|=l)}function xf(s,l){if(!pt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Wt(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(l)for(var b=s.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=m,s.childLanes=d,l}function v9(s,l,d){var m=l.pendingProps;switch(K0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(l),null;case 1:return Wt(l),null;case 3:return d=l.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),ma(An),ie(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(fu(l)?ya(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,W0())),Wt(l),null;case 26:var b=l.type,w=l.memoizedState;return s===null?(ya(l),w!==null?(Wt(l),oT(l,w)):(Wt(l),qb(l,b,null,m,d))):w?w!==s.memoizedState?(ya(l),Wt(l),oT(l,w)):(Wt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==m&&ya(l),Wt(l),qb(l,b,s,m,d)),null;case 27:if(Q(l),d=G.current,b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ya(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}s=ve.current,fu(l)?US(l):(s=mC(b,m,d),l.stateNode=s,ya(l))}return Wt(l),null;case 5:if(Q(l),b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ya(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}if(w=ve.current,fu(l))US(l);else{var T=Lp(G.current);switch(w){case 1:w=T.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=T.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=T.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?T.createElement(b,{is:m.is}):T.createElement(b)}}w[En]=l,w[Gn]=m;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)w.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=w;e:switch(lr(w,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ya(l)}}return Wt(l),qb(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,d),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==m&&ya(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(s=G.current,fu(l)){if(s=l.stateNode,d=l.memoizedProps,m=null,b=sr,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}s[En]=l,s=!!(s.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||rC(s.nodeValue,d)),s||_o(l,!0)}else s=Lp(s).createTextNode(m),s[En]=l,l.stateNode=s}return Wt(l),null;case 31:if(d=l.memoizedState,s===null||s.memoizedState!==null){if(m=fu(l),d!==null){if(s===null){if(!m)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[En]=l}else Bl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),s=!1}else d=W0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return l.flags&256?(oi(l),l):(oi(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Wt(l),null;case 13:if(m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=fu(l),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[En]=l}else Bl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),b=!1}else b=W0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(oi(l),l):(oi(l),null)}return oi(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,s=s!==null&&s.memoizedState!==null,d&&(m=l.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)),d!==s&&d&&(l.child.flags|=8192),wp(l,l.updateQueue),Wt(l),null);case 4:return ie(),s===null&&ox(l.stateNode.containerInfo),Wt(l),null;case 10:return ma(l.type),Wt(l),null;case 19:if(ne(bn),m=l.memoizedState,m===null)return Wt(l),null;if(b=(l.flags&128)!==0,w=m.rendering,w===null)if(b)xf(m,!1);else{if(un!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=up(s),w!==null){for(l.flags|=128,xf(m,!1),s=w.updateQueue,l.updateQueue=s,wp(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)DS(d,s),d=d.sibling;return ue(bn,bn.current&1|2),pt&&fa(l,m.treeForkCount),l.child}s=s.sibling}m.tail!==null&&Be()>Tp&&(l.flags|=128,b=!0,xf(m,!1),l.lanes=4194304)}else{if(!b)if(s=up(w),s!==null){if(l.flags|=128,b=!0,s=s.updateQueue,l.updateQueue=s,wp(l,s),xf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!pt)return Wt(l),null}else 2*Be()-m.renderingStartTime>Tp&&d!==536870912&&(l.flags|=128,b=!0,xf(m,!1),l.lanes=4194304);m.isBackwards?(w.sibling=l.child,l.child=w):(s=m.last,s!==null?s.sibling=w:l.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Be(),s.sibling=null,d=bn.current,ue(bn,b?d&1|2:d&1),pt&&fa(l,m.treeForkCount),s):(Wt(l),null);case 22:case 23:return oi(l),lb(),m=l.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Wt(l),l.subtreeFlags&6&&(l.flags|=8192)):Wt(l),d=l.updateQueue,d!==null&&wp(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),s!==null&&ne(Hl),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ma(An),Wt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function y9(s,l){switch(K0(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ma(An),ie(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Q(l),null;case 31:if(l.memoizedState!==null){if(oi(l),l.alternate===null)throw Error(r(340));Bl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(oi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Bl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return ne(bn),null;case 4:return ie(),null;case 10:return ma(l.type),null;case 22:case 23:return oi(l),lb(),s!==null&&ne(Hl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ma(An),null;case 25:return null;default:return null}}function lT(s,l){switch(K0(l),l.tag){case 3:ma(An),ie();break;case 26:case 27:case 5:Q(l);break;case 4:ie();break;case 31:l.memoizedState!==null&&oi(l);break;case 13:oi(l);break;case 19:ne(bn);break;case 10:ma(l.type);break;case 22:case 23:oi(l),lb(),s!==null&&ne(Hl);break;case 24:ma(An)}}function _f(s,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&s)===s){m=void 0;var w=d.create,T=d.inst;m=w(),T.destroy=m}d=d.next}while(d!==b)}}catch(q){Pt(l,l.return,q)}}function To(s,l,d){try{var m=l.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&s)===s){var T=m.inst,q=T.destroy;if(q!==void 0){T.destroy=void 0,b=l;var K=d,oe=q;try{oe()}catch(be){Pt(b,K,be)}}}m=m.next}while(m!==w)}}catch(be){Pt(l,l.return,be)}}function cT(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{ZS(l,d)}catch(m){Pt(s,s.return,m)}}}function uT(s,l,d){d.props=Yl(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(m){Pt(s,l,m)}}function jf(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof d=="function"?s.refCleanup=d(m):d.current=m}}catch(b){Pt(s,l,b)}}function Os(s,l){var d=s.ref,m=s.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(b){Pt(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){Pt(s,l,b)}else d.current=null}function dT(s){var l=s.type,d=s.memoizedProps,m=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(b){Pt(s,s.return,b)}}function Ub(s,l,d){try{var m=s.stateNode;U9(m,s.type,d,l),m[Gn]=l}catch(b){Pt(s,s.return,b)}}function fT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Do(s.type)||s.tag===4}function Vb(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||fT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Do(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bb(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Qi));else if(m!==4&&(m===27&&Do(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for(Bb(s,l,d),s=s.sibling;s!==null;)Bb(s,l,d),s=s.sibling}function Ep(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(m!==4&&(m===27&&Do(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Ep(s,l,d),s=s.sibling;s!==null;)Ep(s,l,d),s=s.sibling}function hT(s){var l=s.stateNode,d=s.memoizedProps;try{for(var m=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);lr(l,m,d),l[En]=s,l[Gn]=d}catch(w){Pt(s,s.return,w)}}var ba=!1,Pn=!1,$b=!1,mT=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function b9(s,l){if(s=s.containerInfo,ux=Hp,s=SS(s),M0(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var T=0,q=-1,K=-1,oe=0,be=0,je=s,le=null;t:for(;;){for(var pe;je!==d||b!==0&&je.nodeType!==3||(q=T+b),je!==w||m!==0&&je.nodeType!==3||(K=T+m),je.nodeType===3&&(T+=je.nodeValue.length),(pe=je.firstChild)!==null;)le=je,je=pe;for(;;){if(je===s)break t;if(le===d&&++oe===b&&(q=T),le===w&&++be===m&&(K=T),(pe=je.nextSibling)!==null)break;je=le,le=je.parentNode}je=pe}d=q===-1||K===-1?null:{start:q,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(dx={focusedElem:s,selectionRange:d},Hp=!1,Qn=l;Qn!==null;)if(l=Qn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Qn=s;else for(;Qn!==null;){switch(l=Qn,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)b=s[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,d=l,b=w.memoizedProps,w=w.memoizedState,m=d.stateNode;try{var Oe=Yl(d.type,b);s=m.getSnapshotBeforeUpdate(Oe,w),m.__reactInternalSnapshotBeforeUpdate=s}catch(Fe){Pt(d,d.return,Fe)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)mx(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":mx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Qn=s;break}Qn=l.return}}function pT(s,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:_a(s,d),m&4&&_f(5,d);break;case 1:if(_a(s,d),m&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(T){Pt(d,d.return,T)}else{var b=Yl(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Pt(d,d.return,T)}}m&64&&cT(d),m&512&&jf(d,d.return);break;case 3:if(_a(s,d),m&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{ZS(s,l)}catch(T){Pt(d,d.return,T)}}break;case 27:l===null&&m&4&&hT(d);case 26:case 5:_a(s,d),l===null&&m&4&&dT(d),m&512&&jf(d,d.return);break;case 12:_a(s,d);break;case 31:_a(s,d),m&4&&yT(s,d);break;case 13:_a(s,d),m&4&&bT(s,d),m&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=T9.bind(null,d),Q9(s,d))));break;case 22:if(m=d.memoizedState!==null||ba,!m){l=l!==null&&l.memoizedState!==null||Pn,b=ba;var w=Pn;ba=m,(Pn=l)&&!w?ja(s,d,(d.subtreeFlags&8772)!==0):_a(s,d),ba=b,Pn=w}break;case 30:break;default:_a(s,d)}}function gT(s){var l=s.alternate;l!==null&&(s.alternate=null,gT(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Wc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Jt=null,Fr=!1;function xa(s,l,d){for(d=d.child;d!==null;)vT(s,l,d),d=d.sibling}function vT(s,l,d){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(on,d)}catch{}switch(d.tag){case 26:Pn||Os(d,l),xa(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Pn||Os(d,l);var m=Jt,b=Fr;Do(d.type)&&(Jt=d.stateNode,Fr=!1),xa(s,l,d),If(d.stateNode),Jt=m,Fr=b;break;case 5:Pn||Os(d,l);case 6:if(m=Jt,b=Fr,Jt=null,xa(s,l,d),Jt=m,Fr=b,Jt!==null)if(Fr)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(d.stateNode)}catch(w){Pt(d,l,w)}else try{Jt.removeChild(d.stateNode)}catch(w){Pt(d,l,w)}break;case 18:Jt!==null&&(Fr?(s=Jt,cC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),Ru(s)):cC(Jt,d.stateNode));break;case 4:m=Jt,b=Fr,Jt=d.stateNode.containerInfo,Fr=!0,xa(s,l,d),Jt=m,Fr=b;break;case 0:case 11:case 14:case 15:To(2,d,l),Pn||To(4,d,l),xa(s,l,d);break;case 1:Pn||(Os(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&uT(d,l,m)),xa(s,l,d);break;case 21:xa(s,l,d);break;case 22:Pn=(m=Pn)||d.memoizedState!==null,xa(s,l,d),Pn=m;break;default:xa(s,l,d)}}function yT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ru(s)}catch(d){Pt(l,l.return,d)}}}function bT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ru(s)}catch(d){Pt(l,l.return,d)}}function x9(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new mT),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new mT),l;default:throw Error(r(435,s.tag))}}function Np(s,l){var d=x9(s);l.forEach(function(m){if(!d.has(m)){d.add(m);var b=C9.bind(null,s,m);m.then(b,b)}})}function Hr(s,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m],w=s,T=l,q=T;e:for(;q!==null;){switch(q.tag){case 27:if(Do(q.type)){Jt=q.stateNode,Fr=!1;break e}break;case 5:Jt=q.stateNode,Fr=!1;break e;case 3:case 4:Jt=q.stateNode.containerInfo,Fr=!0;break e}q=q.return}if(Jt===null)throw Error(r(160));vT(w,T,b),Jt=null,Fr=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)xT(l,s),l=l.sibling}var es=null;function xT(s,l){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Hr(l,s),Gr(s),m&4&&(To(3,s,s.return),_f(3,s),To(5,s,s.return));break;case 1:Hr(l,s),Gr(s),m&512&&(Pn||d===null||Os(d,d.return)),m&64&&ba&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var b=es;if(Hr(l,s),Gr(s),m&512&&(Pn||d===null||Os(d,d.return)),m&4){var w=d!==null?d.memoizedState:null;if(m=s.memoizedState,d===null)if(m===null)if(s.stateNode===null){e:{m=s.type,d=s.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[ys]||w[En]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),lr(w,m,d),w[En]=s,Nn(w),m=w;break e;case"link":var T=xC("link","href",b).get(m+(d.href||""));if(T){for(var q=0;q<T.length;q++)if(w=T[q],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(q,1);break t}}w=b.createElement(m),lr(w,m,d),b.head.appendChild(w);break;case"meta":if(T=xC("meta","content",b).get(m+(d.content||""))){for(q=0;q<T.length;q++)if(w=T[q],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(q,1);break t}}w=b.createElement(m),lr(w,m,d),b.head.appendChild(w);break;default:throw Error(r(468,m))}w[En]=s,Nn(w),m=w}s.stateNode=m}else _C(b,s.type,s.stateNode);else s.stateNode=bC(b,m,s.memoizedProps);else w!==m?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,m===null?_C(b,s.type,s.stateNode):bC(b,m,s.memoizedProps)):m===null&&s.stateNode!==null&&Ub(s,s.memoizedProps,d.memoizedProps)}break;case 27:Hr(l,s),Gr(s),m&512&&(Pn||d===null||Os(d,d.return)),d!==null&&m&4&&Ub(s,s.memoizedProps,d.memoizedProps);break;case 5:if(Hr(l,s),Gr(s),m&512&&(Pn||d===null||Os(d,d.return)),s.flags&32){b=s.stateNode;try{$r(b,"")}catch(Oe){Pt(s,s.return,Oe)}}m&4&&s.stateNode!=null&&(b=s.memoizedProps,Ub(s,b,d!==null?d.memoizedProps:b)),m&1024&&($b=!0);break;case 6:if(Hr(l,s),Gr(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,d=s.stateNode;try{d.nodeValue=m}catch(Oe){Pt(s,s.return,Oe)}}break;case 3:if(Vp=null,b=es,es=qp(l.containerInfo),Hr(l,s),es=b,Gr(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Ru(l.containerInfo)}catch(Oe){Pt(s,s.return,Oe)}$b&&($b=!1,_T(s));break;case 4:m=es,es=qp(s.stateNode.containerInfo),Hr(l,s),Gr(s),es=m;break;case 12:Hr(l,s),Gr(s);break;case 31:Hr(l,s),Gr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Np(s,m)));break;case 13:Hr(l,s),Gr(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Ap=Be()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Np(s,m)));break;case 22:b=s.memoizedState!==null;var K=d!==null&&d.memoizedState!==null,oe=ba,be=Pn;if(ba=oe||b,Pn=be||K,Hr(l,s),Pn=be,ba=oe,Gr(s),m&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||K||ba||Pn||Xl(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){K=d=l;try{if(w=K.stateNode,b)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{q=K.stateNode;var je=K.memoizedProps.style,le=je!=null&&je.hasOwnProperty("display")?je.display:null;q.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Oe){Pt(K,K.return,Oe)}}}else if(l.tag===6){if(d===null){K=l;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(Oe){Pt(K,K.return,Oe)}}}else if(l.tag===18){if(d===null){K=l;try{var pe=K.stateNode;b?uC(pe,!0):uC(K.stateNode,!1)}catch(Oe){Pt(K,K.return,Oe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=s.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Np(s,d))));break;case 19:Hr(l,s),Gr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Np(s,m)));break;case 30:break;case 21:break;default:Hr(l,s),Gr(s)}}function Gr(s){var l=s.flags;if(l&2){try{for(var d,m=s.return;m!==null;){if(fT(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,w=Vb(s);Ep(s,w,b);break;case 5:var T=d.stateNode;d.flags&32&&($r(T,""),d.flags&=-33);var q=Vb(s);Ep(s,q,T);break;case 3:case 4:var K=d.stateNode.containerInfo,oe=Vb(s);Bb(s,oe,K);break;default:throw Error(r(161))}}catch(be){Pt(s,s.return,be)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function _T(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;_T(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function _a(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)pT(s,l.alternate,l),l=l.sibling}function Xl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:To(4,l,l.return),Xl(l);break;case 1:Os(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&uT(l,l.return,d),Xl(l);break;case 27:If(l.stateNode);case 26:case 5:Os(l,l.return),Xl(l);break;case 22:l.memoizedState===null&&Xl(l);break;case 30:Xl(l);break;default:Xl(l)}s=s.sibling}}function ja(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,b=s,w=l,T=w.flags;switch(w.tag){case 0:case 11:case 15:ja(b,w,d),_f(4,w);break;case 1:if(ja(b,w,d),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(oe){Pt(m,m.return,oe)}if(m=w,b=m.updateQueue,b!==null){var q=m.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)JS(K[b],q)}catch(oe){Pt(m,m.return,oe)}}d&&T&64&&cT(w),jf(w,w.return);break;case 27:hT(w);case 26:case 5:ja(b,w,d),d&&m===null&&T&4&&dT(w),jf(w,w.return);break;case 12:ja(b,w,d);break;case 31:ja(b,w,d),d&&T&4&&yT(b,w);break;case 13:ja(b,w,d),d&&T&4&&bT(b,w);break;case 22:w.memoizedState===null&&ja(b,w,d),jf(w,w.return);break;case 30:break;default:ja(b,w,d)}l=l.sibling}}function Fb(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&lf(d))}function Hb(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&lf(s))}function ts(s,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)jT(s,l,d,m),l=l.sibling}function jT(s,l,d,m){var b=l.flags;switch(l.tag){case 0:case 11:case 15:ts(s,l,d,m),b&2048&&_f(9,l);break;case 1:ts(s,l,d,m);break;case 3:ts(s,l,d,m),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&lf(s)));break;case 12:if(b&2048){ts(s,l,d,m),s=l.stateNode;try{var w=l.memoizedProps,T=w.id,q=w.onPostCommit;typeof q=="function"&&q(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){Pt(l,l.return,K)}}else ts(s,l,d,m);break;case 31:ts(s,l,d,m);break;case 13:ts(s,l,d,m);break;case 23:break;case 22:w=l.stateNode,T=l.alternate,l.memoizedState!==null?w._visibility&2?ts(s,l,d,m):wf(s,l):w._visibility&2?ts(s,l,d,m):(w._visibility|=2,ju(s,l,d,m,(l.subtreeFlags&10256)!==0||!1)),b&2048&&Fb(T,l);break;case 24:ts(s,l,d,m),b&2048&&Hb(l.alternate,l);break;default:ts(s,l,d,m)}}function ju(s,l,d,m,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,T=l,q=d,K=m,oe=T.flags;switch(T.tag){case 0:case 11:case 15:ju(w,T,q,K,b),_f(8,T);break;case 23:break;case 22:var be=T.stateNode;T.memoizedState!==null?be._visibility&2?ju(w,T,q,K,b):wf(w,T):(be._visibility|=2,ju(w,T,q,K,b)),b&&oe&2048&&Fb(T.alternate,T);break;case 24:ju(w,T,q,K,b),b&&oe&2048&&Hb(T.alternate,T);break;default:ju(w,T,q,K,b)}l=l.sibling}}function wf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,m=l,b=m.flags;switch(m.tag){case 22:wf(d,m),b&2048&&Fb(m.alternate,m);break;case 24:wf(d,m),b&2048&&Hb(m.alternate,m);break;default:wf(d,m)}l=l.sibling}}var Ef=8192;function wu(s,l,d){if(s.subtreeFlags&Ef)for(s=s.child;s!==null;)wT(s,l,d),s=s.sibling}function wT(s,l,d){switch(s.tag){case 26:wu(s,l,d),s.flags&Ef&&s.memoizedState!==null&&aV(d,es,s.memoizedState,s.memoizedProps);break;case 5:wu(s,l,d);break;case 3:case 4:var m=es;es=qp(s.stateNode.containerInfo),wu(s,l,d),es=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=Ef,Ef=16777216,wu(s,l,d),Ef=m):wu(s,l,d));break;default:wu(s,l,d)}}function ET(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Nf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Qn=m,ST(m,s)}ET(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)NT(s),s=s.sibling}function NT(s){switch(s.tag){case 0:case 11:case 15:Nf(s),s.flags&2048&&To(9,s,s.return);break;case 3:Nf(s);break;case 12:Nf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Sp(s)):Nf(s);break;default:Nf(s)}}function Sp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Qn=m,ST(m,s)}ET(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:To(8,l,l.return),Sp(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Sp(l));break;default:Sp(l)}s=s.sibling}}function ST(s,l){for(;Qn!==null;){var d=Qn;switch(d.tag){case 0:case 11:case 15:To(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:lf(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Qn=m;else e:for(d=s;Qn!==null;){m=Qn;var b=m.sibling,w=m.return;if(gT(m),m===d){Qn=null;break e}if(b!==null){b.return=w,Qn=b;break e}Qn=w}}}var _9={getCacheForType:function(s){var l=ar(An),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d},cacheSignal:function(){return ar(An).controller.signal}},j9=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Bt=null,st=null,lt=0,Ct=0,li=null,Co=!1,Eu=!1,Gb=!1,wa=0,un=0,Po=0,Jl=0,Kb=0,ci=0,Nu=0,Sf=null,Kr=null,Qb=!1,Ap=0,AT=0,Tp=1/0,Cp=null,Io=null,Ln=0,Oo=null,Su=null,Ea=0,Wb=0,Yb=null,TT=null,Af=0,Xb=null;function ui(){return(Nt&2)!==0&&lt!==0?lt&-lt:H.T!==null?rx():Pm()}function CT(){if(ci===0)if((lt&536870912)===0||pt){var s=aa;aa<<=1,(aa&3932160)===0&&(aa=262144),ci=s}else ci=536870912;return s=ai.current,s!==null&&(s.flags|=32),ci}function Qr(s,l,d){(s===Bt&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)&&(Au(s,0),Ro(s,lt,ci,!1)),Hn(s,d),((Nt&2)===0||s!==Bt)&&(s===Bt&&((Nt&2)===0&&(Jl|=d),un===4&&Ro(s,lt,ci,!1)),Rs(s))}function PT(s,l,d){if((Nt&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&s.expiredLanes)===0||ti(s,l),b=m?N9(s,l):Zb(s,l,!0),w=m;do{if(b===0){Eu&&!m&&Ro(s,l,0,!1);break}else{if(d=s.current.alternate,w&&!w9(d)){b=Zb(s,l,!1),w=!1;continue}if(b===2){if(w=l,s.errorRecoveryDisabledLanes&w)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var q=s;b=Sf;var K=q.current.memoizedState.isDehydrated;if(K&&(Au(q,T).flags|=256),T=Zb(q,T,!1),T!==2){if(Gb&&!K){q.errorRecoveryDisabledLanes|=w,Jl|=w,b=4;break e}w=Kr,Kr=b,w!==null&&(Kr===null?Kr=w:Kr.push.apply(Kr,w))}b=T}if(w=!1,b!==2)continue}}if(b===1){Au(s,0),Ro(s,l,0,!0);break}e:{switch(m=s,w=b,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Ro(m,l,ci,!Co);break e;case 2:Kr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=Ap+300-Be(),10<b)){if(Ro(m,l,ci,!Co),gr(m,0,!0)!==0)break e;Ea=l,m.timeoutHandle=oC(IT.bind(null,m,d,Kr,Cp,Qb,l,ci,Jl,Nu,Co,w,"Throttled",-0,0),b);break e}IT(m,d,Kr,Cp,Qb,l,ci,Jl,Nu,Co,w,null,-0,0)}}break}while(!0);Rs(s)}function IT(s,l,d,m,b,w,T,q,K,oe,be,je,le,pe){if(s.timeoutHandle=-1,je=l.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},wT(l,w,je);var Oe=(w&62914560)===w?Ap-Be():(w&4194048)===w?AT-Be():0;if(Oe=oV(je,Oe),Oe!==null){Ea=w,s.cancelPendingCommit=Oe(qT.bind(null,s,l,w,d,m,b,T,q,K,be,je,null,le,pe)),Ro(s,w,T,!oe);return}}qT(s,l,w,d,m,b,T,q,K)}function w9(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var b=d[m],w=b.getSnapshot;b=b.value;try{if(!ii(w(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ro(s,l,d,m){l&=~Kb,l&=~Jl,s.suspendedLanes|=l,s.pingedLanes&=~l,m&&(s.warmLanes|=l),m=s.expirationTimes;for(var b=l;0<b;){var w=31-nn(b),T=1<<w;m[w]=-1,b&=~T}d!==0&&_i(s,d,l)}function Pp(){return(Nt&6)===0?(Tf(0),!1):!0}function Jb(){if(st!==null){if(Ct===0)var s=st.return;else s=st,ha=$l=null,mb(s),vu=null,uf=0,s=st;for(;s!==null;)lT(s.alternate,s),s=s.return;st=null}}function Au(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,$9(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),Ea=0,Jb(),Bt=s,st=d=da(s.current,null),lt=l,Ct=0,li=null,Co=!1,Eu=ti(s,l),Gb=!1,Nu=ci=Kb=Jl=Po=un=0,Kr=Sf=null,Qb=!1,(l&8)!==0&&(l|=l&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=l;0<m;){var b=31-nn(m),w=1<<b;l|=s[b],m&=~w}return wa=l,Xm(),d}function OT(s,l){nt=null,H.H=yf,l===gu||l===sp?(l=QS(),Ct=3):l===nb?(l=QS(),Ct=4):Ct=l===Pb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,li=l,st===null&&(un=1,bp(s,Ai(l,s.current)))}function RT(){var s=ai.current;return s===null?!0:(lt&4194048)===lt?Ii===null:(lt&62914560)===lt||(lt&536870912)!==0?s===Ii:!1}function kT(){var s=H.H;return H.H=yf,s===null?yf:s}function DT(){var s=H.A;return H.A=_9,s}function Ip(){un=4,Co||(lt&4194048)!==lt&&ai.current!==null||(Eu=!0),(Po&134217727)===0&&(Jl&134217727)===0||Bt===null||Ro(Bt,lt,ci,!1)}function Zb(s,l,d){var m=Nt;Nt|=2;var b=kT(),w=DT();(Bt!==s||lt!==l)&&(Cp=null,Au(s,l)),l=!1;var T=un;e:do try{if(Ct!==0&&st!==null){var q=st,K=li;switch(Ct){case 8:Jb(),T=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(l=!0);var oe=Ct;if(Ct=0,li=null,Tu(s,q,K,oe),d&&Eu){T=0;break e}break;default:oe=Ct,Ct=0,li=null,Tu(s,q,K,oe)}}E9(),T=un;break}catch(be){OT(s,be)}while(!0);return l&&s.shellSuspendCounter++,ha=$l=null,Nt=m,H.H=b,H.A=w,st===null&&(Bt=null,lt=0,Xm()),T}function E9(){for(;st!==null;)MT(st)}function N9(s,l){var d=Nt;Nt|=2;var m=kT(),b=DT();Bt!==s||lt!==l?(Cp=null,Tp=Be()+500,Au(s,l)):Eu=ti(s,l);e:do try{if(Ct!==0&&st!==null){l=st;var w=li;t:switch(Ct){case 1:Ct=0,li=null,Tu(s,l,w,1);break;case 2:case 9:if(GS(w)){Ct=0,li=null,zT(l);break}l=function(){Ct!==2&&Ct!==9||Bt!==s||(Ct=7),Rs(s)},w.then(l,l);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:GS(w)?(Ct=0,li=null,zT(l)):(Ct=0,li=null,Tu(s,l,w,7));break;case 5:var T=null;switch(st.tag){case 26:T=st.memoizedState;case 5:case 27:var q=st;if(T?jC(T):q.stateNode.complete){Ct=0,li=null;var K=q.sibling;if(K!==null)st=K;else{var oe=q.return;oe!==null?(st=oe,Op(oe)):st=null}break t}}Ct=0,li=null,Tu(s,l,w,5);break;case 6:Ct=0,li=null,Tu(s,l,w,6);break;case 8:Jb(),un=6;break e;default:throw Error(r(462))}}S9();break}catch(be){OT(s,be)}while(!0);return ha=$l=null,H.H=m,H.A=b,Nt=d,st!==null?0:(Bt=null,lt=0,Xm(),un)}function S9(){for(;st!==null&&!ye();)MT(st)}function MT(s){var l=aT(s.alternate,s,wa);s.memoizedProps=s.pendingProps,l===null?Op(s):st=l}function zT(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=eT(d,l,l.pendingProps,l.type,void 0,lt);break;case 11:l=eT(d,l,l.pendingProps,l.type.render,l.ref,lt);break;case 5:mb(l);default:lT(d,l),l=st=DS(l,wa),l=aT(d,l,wa)}s.memoizedProps=s.pendingProps,l===null?Op(s):st=l}function Tu(s,l,d,m){ha=$l=null,mb(l),vu=null,uf=0;var b=l.return;try{if(m9(s,b,l,d,lt)){un=1,bp(s,Ai(d,s.current)),st=null;return}}catch(w){if(b!==null)throw st=b,w;un=1,bp(s,Ai(d,s.current)),st=null;return}l.flags&32768?(pt||m===1?s=!0:Eu||(lt&536870912)!==0?s=!1:(Co=s=!0,(m===2||m===9||m===3||m===6)&&(m=ai.current,m!==null&&m.tag===13&&(m.flags|=16384))),LT(l,s)):Op(l)}function Op(s){var l=s;do{if((l.flags&32768)!==0){LT(l,Co);return}s=l.return;var d=v9(l.alternate,l,wa);if(d!==null){st=d;return}if(l=l.sibling,l!==null){st=l;return}st=l=s}while(l!==null);un===0&&(un=5)}function LT(s,l){do{var d=y9(s.alternate,s);if(d!==null){d.flags&=32767,st=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){st=s;return}st=s=d}while(s!==null);un=6,st=null}function qT(s,l,d,m,b,w,T,q,K){s.cancelPendingCommit=null;do Rp();while(Ln!==0);if((Nt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=V0,Al(s,d,w,T,q,K),s===Bt&&(st=Bt=null,lt=0),Su=l,Oo=s,Ea=d,Wb=w,Yb=b,TT=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,P9(qr,function(){return FT(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=H.T,H.T=null,b=ae.p,ae.p=2,T=Nt,Nt|=4;try{b9(s,l,d)}finally{Nt=T,ae.p=b,H.T=m}}Ln=1,UT(),VT(),BT()}}function UT(){if(Ln===1){Ln=0;var s=Oo,l=Su,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=H.T,H.T=null;var m=ae.p;ae.p=2;var b=Nt;Nt|=4;try{xT(l,s);var w=dx,T=SS(s.containerInfo),q=w.focusedElem,K=w.selectionRange;if(T!==q&&q&&q.ownerDocument&&NS(q.ownerDocument.documentElement,q)){if(K!==null&&M0(q)){var oe=K.start,be=K.end;if(be===void 0&&(be=oe),"selectionStart"in q)q.selectionStart=oe,q.selectionEnd=Math.min(be,q.value.length);else{var je=q.ownerDocument||document,le=je&&je.defaultView||window;if(le.getSelection){var pe=le.getSelection(),Oe=q.textContent.length,Fe=Math.min(K.start,Oe),Lt=K.end===void 0?Fe:Math.min(K.end,Oe);!pe.extend&&Fe>Lt&&(T=Lt,Lt=Fe,Fe=T);var ee=ES(q,Fe),Y=ES(q,Lt);if(ee&&Y&&(pe.rangeCount!==1||pe.anchorNode!==ee.node||pe.anchorOffset!==ee.offset||pe.focusNode!==Y.node||pe.focusOffset!==Y.offset)){var se=je.createRange();se.setStart(ee.node,ee.offset),pe.removeAllRanges(),Fe>Lt?(pe.addRange(se),pe.extend(Y.node,Y.offset)):(se.setEnd(Y.node,Y.offset),pe.addRange(se))}}}}for(je=[],pe=q;pe=pe.parentNode;)pe.nodeType===1&&je.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<je.length;q++){var _e=je[q];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Hp=!!ux,dx=ux=null}finally{Nt=b,ae.p=m,H.T=d}}s.current=l,Ln=2}}function VT(){if(Ln===2){Ln=0;var s=Oo,l=Su,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=H.T,H.T=null;var m=ae.p;ae.p=2;var b=Nt;Nt|=4;try{pT(s,l.alternate,l)}finally{Nt=b,ae.p=m,H.T=d}}Ln=3}}function BT(){if(Ln===4||Ln===3){Ln=0,ke();var s=Oo,l=Su,d=Ea,m=TT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ln=5:(Ln=0,Su=Oo=null,$T(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(Io=null),oa(d),l=l.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(on,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=H.T,b=ae.p,ae.p=2,H.T=null;try{for(var w=s.onRecoverableError,T=0;T<m.length;T++){var q=m[T];w(q.value,{componentStack:q.stack})}}finally{H.T=l,ae.p=b}}(Ea&3)!==0&&Rp(),Rs(s),b=s.pendingLanes,(d&261930)!==0&&(b&42)!==0?s===Xb?Af++:(Af=0,Xb=s):Af=0,Tf(0)}}function $T(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,lf(l)))}function Rp(){return UT(),VT(),BT(),FT()}function FT(){if(Ln!==5)return!1;var s=Oo,l=Wb;Wb=0;var d=oa(Ea),m=H.T,b=ae.p;try{ae.p=32>d?32:d,H.T=null,d=Yb,Yb=null;var w=Oo,T=Ea;if(Ln=0,Su=Oo=null,Ea=0,(Nt&6)!==0)throw Error(r(331));var q=Nt;if(Nt|=4,NT(w.current),jT(w,w.current,T,d),Nt=q,Tf(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(on,w)}catch{}return!0}finally{ae.p=b,H.T=m,$T(s,l)}}function HT(s,l,d){l=Ai(d,l),l=Cb(s.stateNode,l,2),s=No(s,l,2),s!==null&&(Hn(s,2),Rs(s))}function Pt(s,l,d){if(s.tag===3)HT(s,s,d);else for(;l!==null;){if(l.tag===3){HT(l,s,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Io===null||!Io.has(m))){s=Ai(d,s),d=GA(2),m=No(l,d,2),m!==null&&(KA(d,m,l,s),Hn(m,2),Rs(m));break}}l=l.return}}function ex(s,l,d){var m=s.pingCache;if(m===null){m=s.pingCache=new j9;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(d)||(Gb=!0,b.add(d),s=A9.bind(null,s,l,d),l.then(s,s))}function A9(s,l,d){var m=s.pingCache;m!==null&&m.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Bt===s&&(lt&d)===d&&(un===4||un===3&&(lt&62914560)===lt&&300>Be()-Ap?(Nt&2)===0&&Au(s,0):Kb|=d,Nu===lt&&(Nu=0)),Rs(s)}function GT(s,l){l===0&&(l=Ve()),s=Ul(s,l),s!==null&&(Hn(s,l),Rs(s))}function T9(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),GT(s,d)}function C9(s,l){var d=0;switch(s.tag){case 31:case 13:var m=s.stateNode,b=s.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),GT(s,d)}function P9(s,l){return kt(s,l)}var kp=null,Cu=null,tx=!1,Dp=!1,nx=!1,ko=0;function Rs(s){s!==Cu&&s.next===null&&(Cu===null?kp=Cu=s:Cu=Cu.next=s),Dp=!0,tx||(tx=!0,O9())}function Tf(s,l){if(!nx&&Dp){nx=!0;do for(var d=!1,m=kp;m!==null;){if(s!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var T=m.suspendedLanes,q=m.pingedLanes;w=(1<<31-nn(42|s)+1)-1,w&=b&~(T&~q),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,YT(m,w))}else w=lt,w=gr(m,m===Bt?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||ti(m,w)||(d=!0,YT(m,w));m=m.next}while(d);nx=!1}}function I9(){KT()}function KT(){Dp=tx=!1;var s=0;ko!==0&&B9()&&(s=ko);for(var l=Be(),d=null,m=kp;m!==null;){var b=m.next,w=QT(m,l);w===0?(m.next=null,d===null?kp=b:d.next=b,b===null&&(Cu=d)):(d=m,(s!==0||(w&3)!==0)&&(Dp=!0)),m=b}Ln!==0&&Ln!==5||Tf(s),ko!==0&&(ko=0)}function QT(s,l){for(var d=s.suspendedLanes,m=s.pingedLanes,b=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var T=31-nn(w),q=1<<T,K=b[T];K===-1?((q&d)===0||(q&m)!==0)&&(b[T]=te(q,l)):K<=l&&(s.expiredLanes|=q),w&=~q}if(l=Bt,d=lt,d=gr(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,d===0||s===l&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Lr(m),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||ti(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(m!==null&&Lr(m),oa(d)){case 2:case 8:d=zn;break;case 32:d=qr;break;case 268435456:d=Ur;break;default:d=qr}return m=WT.bind(null,s),d=kt(d,m),s.callbackPriority=l,s.callbackNode=d,l}return m!==null&&m!==null&&Lr(m),s.callbackPriority=2,s.callbackNode=null,2}function WT(s,l){if(Ln!==0&&Ln!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Rp()&&s.callbackNode!==d)return null;var m=lt;return m=gr(s,s===Bt?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(PT(s,m,l),QT(s,Be()),s.callbackNode!=null&&s.callbackNode===d?WT.bind(null,s):null)}function YT(s,l){if(Rp())return null;PT(s,l,!0)}function O9(){F9(function(){(Nt&6)!==0?kt(Vt,I9):KT()})}function rx(){if(ko===0){var s=mu;s===0&&(s=bi,bi<<=1,(bi&261888)===0&&(bi=256)),ko=s}return ko}function XT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Zc(""+s)}function JT(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function R9(s,l,d,m,b){if(l==="submit"&&d&&d.stateNode===b){var w=XT((b[Gn]||null).action),T=m.submitter;T&&(l=(l=T[Gn]||null)?XT(l.formAction):T.getAttribute("formAction"),l!==null&&(w=l,T=null));var q=new Ss("action","action",null,m,b);s.push({event:q,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ko!==0){var K=T?JT(b,T):new FormData(b);wb(d,{pending:!0,data:K,method:b.method,action:w},null,K)}}else typeof w=="function"&&(q.preventDefault(),K=T?JT(b,T):new FormData(b),wb(d,{pending:!0,data:K,method:b.method,action:w},w,K))},currentTarget:b}]})}}for(var ix=0;ix<U0.length;ix++){var sx=U0[ix],k9=sx.toLowerCase(),D9=sx[0].toUpperCase()+sx.slice(1);Zi(k9,"on"+D9)}Zi(CS,"onAnimationEnd"),Zi(PS,"onAnimationIteration"),Zi(IS,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(XU,"onTransitionRun"),Zi(JU,"onTransitionStart"),Zi(ZU,"onTransitionCancel"),Zi(OS,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cf));function ZT(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],b=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var T=m.length-1;0<=T;T--){var q=m[T],K=q.instance,oe=q.currentTarget;if(q=q.listener,K!==w&&b.isPropagationStopped())break e;w=q,b.currentTarget=oe;try{w(b)}catch(be){Ym(be)}b.currentTarget=null,w=K}else for(T=0;T<m.length;T++){if(q=m[T],K=q.instance,oe=q.currentTarget,q=q.listener,K!==w&&b.isPropagationStopped())break e;w=q,b.currentTarget=oe;try{w(b)}catch(be){Ym(be)}b.currentTarget=null,w=K}}}}function at(s,l){var d=l[Qc];d===void 0&&(d=l[Qc]=new Set);var m=s+"__bubble";d.has(m)||(eC(l,s,2,!1),d.add(m))}function ax(s,l,d){var m=0;l&&(m|=4),eC(d,s,m,l)}var Mp="_reactListening"+Math.random().toString(36).slice(2);function ox(s){if(!s[Mp]){s[Mp]=!0,Ud.forEach(function(d){d!=="selectionchange"&&(M9.has(d)||ax(d,!1,s),ax(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Mp]||(l[Mp]=!0,ax("selectionchange",!1,l))}}function eC(s,l,d,m){switch(CC(l)){case 2:var b=uV;break;case 8:b=dV;break;default:b=jx}d=b.bind(null,l,d,s),b=void 0,!Ol||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?s.addEventListener(l,d,{capture:!0,passive:b}):s.addEventListener(l,d,!0):b!==void 0?s.addEventListener(l,d,{passive:b}):s.addEventListener(l,d,!1)}function lx(s,l,d,m,b){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var q=m.stateNode.containerInfo;if(q===b)break;if(T===4)for(T=m.return;T!==null;){var K=T.tag;if((K===3||K===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;q!==null;){if(T=bs(q),T===null)return;if(K=T.tag,K===5||K===6||K===26||K===27){m=w=T;continue e}q=q.parentNode}}m=m.return}po(function(){var oe=w,be=wi(d),je=[];e:{var le=RS.get(s);if(le!==void 0){var pe=Ss,Oe=s;switch(s){case"keypress":if(kl(d)===0)break e;case"keydown":case"keyup":pe=Km;break;case"focusin":Oe="focus",pe=Ml;break;case"focusout":Oe="blur",pe=Ml;break;case"beforeblur":case"afterblur":pe=Ml;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=S;break;case CS:case PS:case IS:pe=Um;break;case OS:pe=$;break;case"scroll":case"scrollend":pe=Jd;break;case"wheel":pe=he;break;case"copy":case"cut":case"paste":pe=Vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=ua;break;case"toggle":case"beforetoggle":pe=tt}var Fe=(l&4)!==0,Lt=!Fe&&(s==="scroll"||s==="scrollend"),ee=Fe?le!==null?le+"Capture":null:le;Fe=[];for(var Y=oe,se;Y!==null;){var _e=Y;if(se=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||se===null||ee===null||(_e=Wi(Y,ee),_e!=null&&Fe.push(Pf(Y,_e,se))),Lt)break;Y=Y.return}0<Fe.length&&(le=new pe(le,Oe,null,d,be),je.push({event:le,listeners:Fe}))}}if((l&7)===0){e:{if(le=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",le&&d!==Wd&&(Oe=d.relatedTarget||d.fromElement)&&(bs(Oe)||Oe[vs]))break e;if((pe||le)&&(le=be.window===be?be:(le=be.ownerDocument)?le.defaultView||le.parentWindow:window,pe?(Oe=d.relatedTarget||d.toElement,pe=oe,Oe=Oe?bs(Oe):null,Oe!==null&&(Lt=a(Oe),Fe=Oe.tag,Oe!==Lt||Fe!==5&&Fe!==27&&Fe!==6)&&(Oe=null)):(pe=null,Oe=oe),pe!==Oe)){if(Fe=Zd,_e="onMouseLeave",ee="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Fe=ua,_e="onPointerLeave",ee="onPointerEnter",Y="pointer"),Lt=pe==null?le:ni(pe),se=Oe==null?le:ni(Oe),le=new Fe(_e,Y+"leave",pe,d,be),le.target=Lt,le.relatedTarget=se,_e=null,bs(be)===oe&&(Fe=new Fe(ee,Y+"enter",Oe,d,be),Fe.target=se,Fe.relatedTarget=Lt,_e=Fe),Lt=_e,pe&&Oe)t:{for(Fe=z9,ee=pe,Y=Oe,se=0,_e=ee;_e;_e=Fe(_e))se++;_e=0;for(var qe=Y;qe;qe=Fe(qe))_e++;for(;0<se-_e;)ee=Fe(ee),se--;for(;0<_e-se;)Y=Fe(Y),_e--;for(;se--;){if(ee===Y||Y!==null&&ee===Y.alternate){Fe=ee;break t}ee=Fe(ee),Y=Fe(Y)}Fe=null}else Fe=null;pe!==null&&tC(je,le,pe,Fe,!1),Oe!==null&&Lt!==null&&tC(je,Lt,Oe,Fe,!0)}}e:{if(le=oe?ni(oe):window,pe=le.nodeName&&le.nodeName.toLowerCase(),pe==="select"||pe==="input"&&le.type==="file")var _t=yS;else if(gS(le))if(bS)_t=QU;else{_t=GU;var De=HU}else pe=le.nodeName,!pe||pe.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&Jc(oe.elementType)&&(_t=yS):_t=KU;if(_t&&(_t=_t(s,oe))){vS(je,_t,d,be);break e}De&&De(s,le,oe),s==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&Gd(le,"number",le.value)}switch(De=oe?ni(oe):window,s){case"focusin":(gS(De)||De.contentEditable==="true")&&(au=De,z0=oe,sf=null);break;case"focusout":sf=z0=au=null;break;case"mousedown":L0=!0;break;case"contextmenu":case"mouseup":case"dragend":L0=!1,AS(je,d,be);break;case"selectionchange":if(YU)break;case"keydown":case"keyup":AS(je,d,be)}var rt;if(Et)e:{switch(s){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else su?zl(s,d)&&(ct="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(ct="onCompositionStart");ct&&(Cs&&d.locale!=="ko"&&(su||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&su&&(rt=Xd()):(Ns=be,Yd="value"in Ns?Ns.value:Ns.textContent,su=!0)),De=zp(oe,ct),0<De.length&&(ct=new Ts(ct,s,null,d,be),je.push({event:ct,listeners:De}),rt?ct.data=rt:(rt=iu(d),rt!==null&&(ct.data=rt)))),(rt=Ni?VU(s,d):BU(s,d))&&(ct=zp(oe,"onBeforeInput"),0<ct.length&&(De=new Ts("onBeforeInput","beforeinput",null,d,be),je.push({event:De,listeners:ct}),De.data=rt)),R9(je,s,oe,d,be)}ZT(je,l)})}function Pf(s,l,d){return{instance:s,listener:l,currentTarget:d}}function zp(s,l){for(var d=l+"Capture",m=[];s!==null;){var b=s,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Wi(s,d),b!=null&&m.unshift(Pf(s,b,w)),b=Wi(s,l),b!=null&&m.push(Pf(s,b,w))),s.tag===3)return m;s=s.return}return[]}function z9(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function tC(s,l,d,m,b){for(var w=l._reactName,T=[];d!==null&&d!==m;){var q=d,K=q.alternate,oe=q.stateNode;if(q=q.tag,K!==null&&K===m)break;q!==5&&q!==26&&q!==27||oe===null||(K=oe,b?(oe=Wi(d,w),oe!=null&&T.unshift(Pf(d,oe,K))):b||(oe=Wi(d,w),oe!=null&&T.push(Pf(d,oe,K)))),d=d.return}T.length!==0&&s.push({event:l,listeners:T})}var L9=/\r\n?/g,q9=/\u0000|\uFFFD/g;function nC(s){return(typeof s=="string"?s:""+s).replace(L9,`
`).replace(q9,"")}function rC(s,l){return l=nC(l),nC(s)===l}function zt(s,l,d,m,b,w){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||$r(s,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&$r(s,""+m);break;case"className":ri(s,"class",m);break;case"tabIndex":ri(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(s,d,m);break;case"style":Qd(s,m,w);break;case"data":if(l!=="object"){ri(s,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=Zc(""+m),s.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&zt(s,l,"name",b.name,b,null),zt(s,l,"formEncType",b.formEncType,b,null),zt(s,l,"formMethod",b.formMethod,b,null),zt(s,l,"formTarget",b.formTarget,b,null)):(zt(s,l,"encType",b.encType,b,null),zt(s,l,"method",b.method,b,null),zt(s,l,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=Zc(""+m),s.setAttribute(d,m);break;case"onClick":m!=null&&(s.onclick=Qi);break;case"onScroll":m!=null&&at("scroll",s);break;case"onScrollEnd":m!=null&&at("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}d=Zc(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""+m):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":m===!0?s.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,m):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(d,m):s.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(d):s.setAttribute(d,m);break;case"popover":at("beforetoggle",s),at("toggle",s),Yc(s,"popover",m);break;case"xlinkActuate":Sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Sn(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Sn(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Sn(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Sn(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Yc(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=zm.get(d)||d,Yc(s,d,m))}}function cx(s,l,d,m,b,w){switch(d){case"style":Qd(s,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"children":typeof m=="string"?$r(s,m):(typeof m=="number"||typeof m=="bigint")&&$r(s,""+m);break;case"onScroll":m!=null&&at("scroll",s);break;case"onScrollEnd":m!=null&&at("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vd.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),w=s[Gn]||null,w=w!=null?w[d]:null,typeof w=="function"&&s.removeEventListener(l,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,m,b);break e}d in s?s[d]=m:m===!0?s.setAttribute(d,""):Yc(s,d,m)}}}function lr(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",s),at("load",s);var m=!1,b=!1,w;for(w in d)if(d.hasOwnProperty(w)){var T=d[w];if(T!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,w,T,d,null)}}b&&zt(s,l,"srcSet",d.srcSet,d,null),m&&zt(s,l,"src",d.src,d,null);return;case"input":at("invalid",s);var q=w=T=b=null,K=null,oe=null;for(m in d)if(d.hasOwnProperty(m)){var be=d[m];if(be!=null)switch(m){case"name":b=be;break;case"type":T=be;break;case"checked":K=be;break;case"defaultChecked":oe=be;break;case"value":w=be;break;case"defaultValue":q=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,l));break;default:zt(s,l,m,be,d,null)}}km(s,w,q,K,oe,T,b,!1);return;case"select":at("invalid",s),m=T=w=null;for(b in d)if(d.hasOwnProperty(b)&&(q=d[b],q!=null))switch(b){case"value":w=q;break;case"defaultValue":T=q;break;case"multiple":m=q;default:zt(s,l,b,q,d,null)}l=w,d=T,s.multiple=!!m,l!=null?uo(s,!!m,l,!1):d!=null&&uo(s,!!m,d,!0);return;case"textarea":at("invalid",s),w=b=m=null;for(T in d)if(d.hasOwnProperty(T)&&(q=d[T],q!=null))switch(T){case"value":m=q;break;case"defaultValue":b=q;break;case"children":w=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:zt(s,l,T,q,d,null)}fo(s,m,b,w);return;case"option":for(K in d)d.hasOwnProperty(K)&&(m=d[K],m!=null)&&(K==="selected"?s.selected=m&&typeof m!="function"&&typeof m!="symbol":zt(s,l,K,m,d,null));return;case"dialog":at("beforetoggle",s),at("toggle",s),at("cancel",s),at("close",s);break;case"iframe":case"object":at("load",s);break;case"video":case"audio":for(m=0;m<Cf.length;m++)at(Cf[m],s);break;case"image":at("error",s),at("load",s);break;case"details":at("toggle",s);break;case"embed":case"source":case"link":at("error",s),at("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in d)if(d.hasOwnProperty(oe)&&(m=d[oe],m!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,oe,m,d,null)}return;default:if(Jc(l)){for(be in d)d.hasOwnProperty(be)&&(m=d[be],m!==void 0&&cx(s,l,be,m,d,void 0));return}}for(q in d)d.hasOwnProperty(q)&&(m=d[q],m!=null&&zt(s,l,q,m,d,null))}function U9(s,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,T=null,q=null,K=null,oe=null,be=null;for(pe in d){var je=d[pe];if(d.hasOwnProperty(pe)&&je!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":K=je;default:m.hasOwnProperty(pe)||zt(s,l,pe,null,m,je)}}for(var le in m){var pe=m[le];if(je=d[le],m.hasOwnProperty(le)&&(pe!=null||je!=null))switch(le){case"type":w=pe;break;case"name":b=pe;break;case"checked":oe=pe;break;case"defaultChecked":be=pe;break;case"value":T=pe;break;case"defaultValue":q=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:pe!==je&&zt(s,l,le,pe,m,je)}}Xc(s,T,q,K,oe,be,w,b);return;case"select":pe=T=q=le=null;for(w in d)if(K=d[w],d.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":pe=K;default:m.hasOwnProperty(w)||zt(s,l,w,null,m,K)}for(b in m)if(w=m[b],K=d[b],m.hasOwnProperty(b)&&(w!=null||K!=null))switch(b){case"value":le=w;break;case"defaultValue":q=w;break;case"multiple":T=w;default:w!==K&&zt(s,l,b,w,m,K)}l=q,d=T,m=pe,le!=null?uo(s,!!d,le,!1):!!m!=!!d&&(l!=null?uo(s,!!d,l,!0):uo(s,!!d,d?[]:"",!1));return;case"textarea":pe=le=null;for(q in d)if(b=d[q],d.hasOwnProperty(q)&&b!=null&&!m.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:zt(s,l,q,null,m,b)}for(T in m)if(b=m[T],w=d[T],m.hasOwnProperty(T)&&(b!=null||w!=null))switch(T){case"value":le=b;break;case"defaultValue":pe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==w&&zt(s,l,T,b,m,w)}Dm(s,le,pe);return;case"option":for(var Oe in d)le=d[Oe],d.hasOwnProperty(Oe)&&le!=null&&!m.hasOwnProperty(Oe)&&(Oe==="selected"?s.selected=!1:zt(s,l,Oe,null,m,le));for(K in m)le=m[K],pe=d[K],m.hasOwnProperty(K)&&le!==pe&&(le!=null||pe!=null)&&(K==="selected"?s.selected=le&&typeof le!="function"&&typeof le!="symbol":zt(s,l,K,le,m,pe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in d)le=d[Fe],d.hasOwnProperty(Fe)&&le!=null&&!m.hasOwnProperty(Fe)&&zt(s,l,Fe,null,m,le);for(oe in m)if(le=m[oe],pe=d[oe],m.hasOwnProperty(oe)&&le!==pe&&(le!=null||pe!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:zt(s,l,oe,le,m,pe)}return;default:if(Jc(l)){for(var Lt in d)le=d[Lt],d.hasOwnProperty(Lt)&&le!==void 0&&!m.hasOwnProperty(Lt)&&cx(s,l,Lt,void 0,m,le);for(be in m)le=m[be],pe=d[be],!m.hasOwnProperty(be)||le===pe||le===void 0&&pe===void 0||cx(s,l,be,le,m,pe);return}}for(var ee in d)le=d[ee],d.hasOwnProperty(ee)&&le!=null&&!m.hasOwnProperty(ee)&&zt(s,l,ee,null,m,le);for(je in m)le=m[je],pe=d[je],!m.hasOwnProperty(je)||le===pe||le==null&&pe==null||zt(s,l,je,le,m,pe)}function iC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function V9(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var b=d[m],w=b.transferSize,T=b.initiatorType,q=b.duration;if(w&&q&&iC(T)){for(T=0,q=b.responseEnd,m+=1;m<d.length;m++){var K=d[m],oe=K.startTime;if(oe>q)break;var be=K.transferSize,je=K.initiatorType;be&&iC(je)&&(K=K.responseEnd,T+=be*(K<q?1:(q-oe)/(K-oe)))}if(--m,l+=8*(w+T)/(b.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var ux=null,dx=null;function Lp(s){return s.nodeType===9?s:s.ownerDocument}function sC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aC(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function fx(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var hx=null;function B9(){var s=window.event;return s&&s.type==="popstate"?s===hx?!1:(hx=s,!0):(hx=null,!1)}var oC=typeof setTimeout=="function"?setTimeout:void 0,$9=typeof clearTimeout=="function"?clearTimeout:void 0,lC=typeof Promise=="function"?Promise:void 0,F9=typeof queueMicrotask=="function"?queueMicrotask:typeof lC<"u"?function(s){return lC.resolve(null).then(s).catch(H9)}:oC;function H9(s){setTimeout(function(){throw s})}function Do(s){return s==="head"}function cC(s,l){var d=l,m=0;do{var b=d.nextSibling;if(s.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(m===0){s.removeChild(b),Ru(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")If(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,If(d);for(var w=d.firstChild;w;){var T=w.nextSibling,q=w.nodeName;w[ys]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&w.rel.toLowerCase()==="stylesheet"||d.removeChild(w),w=T}}else d==="body"&&If(s.ownerDocument.body);d=b}while(d);Ru(l)}function uC(s,l){var d=s;s=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=m}while(d)}function mx(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":mx(d),Wc(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function G9(s,l,d,m){for(;s.nodeType===1;){var b=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[ys])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Oi(s.nextSibling),s===null)break}return null}function K9(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Oi(s.nextSibling),s===null))return null;return s}function dC(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Oi(s.nextSibling),s===null))return null;return s}function px(s){return s.data==="$?"||s.data==="$~"}function gx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Q9(s,l){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Oi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var vx=null;function fC(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(l===0)return Oi(s.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}s=s.nextSibling}return null}function hC(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return s;l--}else d!=="/$"&&d!=="/&"||l++}s=s.previousSibling}return null}function mC(s,l,d){switch(l=Lp(d),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function If(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Wc(s)}var Ri=new Map,pC=new Set;function qp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Na=ae.d;ae.d={f:W9,r:Y9,D:X9,C:J9,L:Z9,m:eV,X:nV,S:tV,M:rV};function W9(){var s=Na.f(),l=Pp();return s||l}function Y9(s){var l=ji(s);l!==null&&l.tag===5&&l.type==="form"?OA(l):Na.r(s)}var Pu=typeof document>"u"?null:document;function gC(s,l,d){var m=Pu;if(m&&typeof l=="string"&&l){var b=Br(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),pC.has(b)||(pC.add(b),s={rel:s,crossOrigin:d,href:l},m.querySelector(b)===null&&(l=m.createElement("link"),lr(l,"link",s),Nn(l),m.head.appendChild(l)))}}function X9(s){Na.D(s),gC("dns-prefetch",s,null)}function J9(s,l){Na.C(s,l),gC("preconnect",s,l)}function Z9(s,l,d){Na.L(s,l,d);var m=Pu;if(m&&s&&l){var b='link[rel="preload"][as="'+Br(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Br(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Br(d.imageSizes)+'"]')):b+='[href="'+Br(s)+'"]';var w=b;switch(l){case"style":w=Iu(s);break;case"script":w=Ou(s)}Ri.has(w)||(s=g({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),Ri.set(w,s),m.querySelector(b)!==null||l==="style"&&m.querySelector(Of(w))||l==="script"&&m.querySelector(Rf(w))||(l=m.createElement("link"),lr(l,"link",s),Nn(l),m.head.appendChild(l)))}}function eV(s,l){Na.m(s,l);var d=Pu;if(d&&s){var m=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Br(m)+'"][href="'+Br(s)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ou(s)}if(!Ri.has(w)&&(s=g({rel:"modulepreload",href:s},l),Ri.set(w,s),d.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Rf(w)))return}m=d.createElement("link"),lr(m,"link",s),Nn(m),d.head.appendChild(m)}}}function tV(s,l,d){Na.S(s,l,d);var m=Pu;if(m&&s){var b=xs(m).hoistableStyles,w=Iu(s);l=l||"default";var T=b.get(w);if(!T){var q={loading:0,preload:null};if(T=m.querySelector(Of(w)))q.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},d),(d=Ri.get(w))&&yx(s,d);var K=T=m.createElement("link");Nn(K),lr(K,"link",s),K._p=new Promise(function(oe,be){K.onload=oe,K.onerror=be}),K.addEventListener("load",function(){q.loading|=1}),K.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Up(T,l,m)}T={type:"stylesheet",instance:T,count:1,state:q},b.set(w,T)}}}function nV(s,l){Na.X(s,l);var d=Pu;if(d&&s){var m=xs(d).hoistableScripts,b=Ou(s),w=m.get(b);w||(w=d.querySelector(Rf(b)),w||(s=g({src:s,async:!0},l),(l=Ri.get(b))&&bx(s,l),w=d.createElement("script"),Nn(w),lr(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function rV(s,l){Na.M(s,l);var d=Pu;if(d&&s){var m=xs(d).hoistableScripts,b=Ou(s),w=m.get(b);w||(w=d.querySelector(Rf(b)),w||(s=g({src:s,async:!0,type:"module"},l),(l=Ri.get(b))&&bx(s,l),w=d.createElement("script"),Nn(w),lr(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function vC(s,l,d,m){var b=(b=G.current)?qp(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Iu(d.href),d=xs(b).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Iu(d.href);var w=xs(b).hoistableStyles,T=w.get(s);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,T),(w=b.querySelector(Of(s)))&&!w._p&&(T.instance=w,T.state.loading=5),Ri.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ri.set(s,d),w||iV(b,s,d,T.state))),l&&m===null)throw Error(r(528,""));return T}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ou(d),d=xs(b).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Iu(s){return'href="'+Br(s)+'"'}function Of(s){return'link[rel="stylesheet"]['+s+"]"}function yC(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function iV(s,l,d,m){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=s.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),lr(l,"link",d),Nn(l),s.head.appendChild(l))}function Ou(s){return'[src="'+Br(s)+'"]'}function Rf(s){return"script[async]"+s}function bC(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=s.querySelector('style[data-href~="'+Br(d.href)+'"]');if(m)return l.instance=m,Nn(m),m;var b=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),Nn(m),lr(m,"style",b),Up(m,d.precedence,s),l.instance=m;case"stylesheet":b=Iu(d.href);var w=s.querySelector(Of(b));if(w)return l.state.loading|=4,l.instance=w,Nn(w),w;m=yC(d),(b=Ri.get(b))&&yx(m,b),w=(s.ownerDocument||s).createElement("link"),Nn(w);var T=w;return T._p=new Promise(function(q,K){T.onload=q,T.onerror=K}),lr(w,"link",m),l.state.loading|=4,Up(w,d.precedence,s),l.instance=w;case"script":return w=Ou(d.src),(b=s.querySelector(Rf(w)))?(l.instance=b,Nn(b),b):(m=d,(b=Ri.get(w))&&(m=g({},d),bx(m,b)),s=s.ownerDocument||s,b=s.createElement("script"),Nn(b),lr(b,"link",m),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Up(m,d.precedence,s));return l.instance}function Up(s,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,T=0;T<m.length;T++){var q=m[T];if(q.dataset.precedence===l)w=q;else if(w!==b)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function yx(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function bx(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Vp=null;function xC(s,l,d){if(Vp===null){var m=new Map,b=Vp=new Map;b.set(d,m)}else b=Vp,m=b.get(d),m||(m=new Map,b.set(d,m));if(m.has(s))return m;for(m.set(s,null),d=d.getElementsByTagName(s),b=0;b<d.length;b++){var w=d[b];if(!(w[ys]||w[En]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(l)||"";T=s+T;var q=m.get(T);q?q.push(w):m.set(T,[w])}}return m}function _C(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function sV(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(s=l.disabled,typeof l.precedence=="string"&&s==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function jC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function aV(s,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=Iu(m.href),w=l.querySelector(Of(b));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Bp.bind(s),l.then(s,s)),d.state.loading|=4,d.instance=w,Nn(w);return}w=l.ownerDocument||l,m=yC(m),(b=Ri.get(b))&&yx(m,b),w=w.createElement("link"),Nn(w);var T=w;T._p=new Promise(function(q,K){T.onload=q,T.onerror=K}),lr(w,"link",m),d.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=Bp.bind(s),l.addEventListener("load",d),l.addEventListener("error",d))}}var xx=0;function oV(s,l){return s.stylesheets&&s.count===0&&Fp(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var m=setTimeout(function(){if(s.stylesheets&&Fp(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&xx===0&&(xx=62500*V9());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Fp(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>xx?50:800)+l);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Bp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $p=null;function Fp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$p=new Map,l.forEach(lV,s),$p=null,Bp.call(s))}function lV(s,l){if(!(l.state.loading&4)){var d=$p.get(s);if(d)var m=d.get(null);else{d=new Map,$p.set(s,d);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var T=b[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}b=l.instance,T=b.getAttribute("data-precedence"),w=d.get(T)||m,w===m&&d.set(null,b),d.set(T,b),this.count++,m=Bp.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var kf={$$typeof:C,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function cV(s,l,d,m,b,w,T,q,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.hiddenUpdates=yt(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function wC(s,l,d,m,b,w,T,q,K,oe,be,je){return s=new cV(s,l,d,T,K,oe,be,je,q),l=1,w===!0&&(l|=24),w=si(3,null,null,l),s.current=w,w.stateNode=s,l=Z0(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:m,isDehydrated:d,cache:l},rb(w),s}function EC(s){return s?(s=cu,s):cu}function NC(s,l,d,m,b,w){b=EC(b),m.context===null?m.context=b:m.pendingContext=b,m=Eo(l),m.payload={element:d},w=w===void 0?null:w,w!==null&&(m.callback=w),d=No(s,m,l),d!==null&&(Qr(d,s,l),ff(d,s,l))}function SC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function _x(s,l){SC(s,l),(s=s.alternate)&&SC(s,l)}function AC(s){if(s.tag===13||s.tag===31){var l=Ul(s,67108864);l!==null&&Qr(l,s,67108864),_x(s,67108864)}}function TC(s){if(s.tag===13||s.tag===31){var l=ui();l=Tl(l);var d=Ul(s,l);d!==null&&Qr(d,s,l),_x(s,l)}}var Hp=!0;function uV(s,l,d,m){var b=H.T;H.T=null;var w=ae.p;try{ae.p=2,jx(s,l,d,m)}finally{ae.p=w,H.T=b}}function dV(s,l,d,m){var b=H.T;H.T=null;var w=ae.p;try{ae.p=8,jx(s,l,d,m)}finally{ae.p=w,H.T=b}}function jx(s,l,d,m){if(Hp){var b=wx(m);if(b===null)lx(s,l,m,Gp,d),PC(s,m);else if(hV(b,s,l,d,m))m.stopPropagation();else if(PC(s,m),l&4&&-1<fV.indexOf(s)){for(;b!==null;){var w=ji(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=xi(w.pendingLanes);if(T!==0){var q=w;for(q.pendingLanes|=2,q.entangledLanes|=2;T;){var K=1<<31-nn(T);q.entanglements[1]|=K,T&=~K}Rs(w),(Nt&6)===0&&(Tp=Be()+500,Tf(0))}}break;case 31:case 13:q=Ul(w,2),q!==null&&Qr(q,w,2),Pp(),_x(w,2)}if(w=wx(m),w===null&&lx(s,l,m,Gp,d),w===b)break;b=w}b!==null&&m.stopPropagation()}else lx(s,l,m,null,d)}}function wx(s){return s=wi(s),Ex(s)}var Gp=null;function Ex(s){if(Gp=null,s=bs(s),s!==null){var l=a(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=c(l),s!==null)return s;s=null}else if(d===31){if(s=u(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Gp=s,null}function CC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case Vt:return 2;case zn:return 8;case qr:case oo:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var Nx=!1,Mo=null,zo=null,Lo=null,Df=new Map,Mf=new Map,qo=[],fV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PC(s,l){switch(s){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":Df.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(l.pointerId)}}function zf(s,l,d,m,b,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},l!==null&&(l=ji(l),l!==null&&AC(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function hV(s,l,d,m,b){switch(l){case"focusin":return Mo=zf(Mo,s,l,d,m,b),!0;case"dragenter":return zo=zf(zo,s,l,d,m,b),!0;case"mouseover":return Lo=zf(Lo,s,l,d,m,b),!0;case"pointerover":var w=b.pointerId;return Df.set(w,zf(Df.get(w)||null,s,l,d,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Mf.set(w,zf(Mf.get(w)||null,s,l,d,m,b)),!0}return!1}function IC(s){var l=bs(s.target);if(l!==null){var d=a(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){s.blockedOn=l,Gi(s.priority,function(){TC(d)});return}}else if(l===31){if(l=u(d),l!==null){s.blockedOn=l,Gi(s.priority,function(){TC(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=wx(s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Wd=m,d.target.dispatchEvent(m),Wd=null}else return l=ji(d),l!==null&&AC(l),s.blockedOn=d,!1;l.shift()}return!0}function OC(s,l,d){Kp(s)&&d.delete(l)}function mV(){Nx=!1,Mo!==null&&Kp(Mo)&&(Mo=null),zo!==null&&Kp(zo)&&(zo=null),Lo!==null&&Kp(Lo)&&(Lo=null),Df.forEach(OC),Mf.forEach(OC)}function Qp(s,l){s.blockedOn===l&&(s.blockedOn=null,Nx||(Nx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mV)))}var Wp=null;function RC(s){Wp!==s&&(Wp=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Wp===s&&(Wp=null);for(var l=0;l<s.length;l+=3){var d=s[l],m=s[l+1],b=s[l+2];if(typeof m!="function"){if(Ex(m||d)===null)continue;break}var w=ji(d);w!==null&&(s.splice(l,3),l-=3,wb(w,{pending:!0,data:b,method:d.method,action:m},m,b))}}))}function Ru(s){function l(K){return Qp(K,s)}Mo!==null&&Qp(Mo,s),zo!==null&&Qp(zo,s),Lo!==null&&Qp(Lo,s),Df.forEach(l),Mf.forEach(l);for(var d=0;d<qo.length;d++){var m=qo[d];m.blockedOn===s&&(m.blockedOn=null)}for(;0<qo.length&&(d=qo[0],d.blockedOn===null);)IC(d),d.blockedOn===null&&qo.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var b=d[m],w=d[m+1],T=b[Gn]||null;if(typeof w=="function")T||RC(d);else if(T){var q=null;if(w&&w.hasAttribute("formAction")){if(b=w,T=w[Gn]||null)q=T.formAction;else if(Ex(b)!==null)continue}else q=T.action;typeof q=="function"?d[m+1]=q:(d.splice(m,3),m-=3),RC(d)}}}function kC(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(T){return b=T})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function Sx(s){this._internalRoot=s}Yp.prototype.render=Sx.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=ui();NC(d,m,s,l,null,null)},Yp.prototype.unmount=Sx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;NC(s.current,2,null,s,null,null),Pp(),l[vs]=null}};function Yp(s){this._internalRoot=s}Yp.prototype.unstable_scheduleHydration=function(s){if(s){var l=Pm();s={blockedOn:null,target:s,priority:l};for(var d=0;d<qo.length&&l!==0&&l<qo[d].priority;d++);qo.splice(d,0,s),d===0&&IC(s)}};var DC=e.version;if(DC!=="19.2.4")throw Error(r(527,DC,"19.2.4"));ae.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var pV={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xp.isDisabled&&Xp.supportsFiber)try{on=Xp.inject(pV),At=Xp}catch{}}return qf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var d=!1,m="",b=BA,w=$A,T=FA;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=wC(s,1,!1,null,null,d,m,null,b,w,T,kC),s[vs]=l.current,ox(s),new Sx(l)},qf.hydrateRoot=function(s,l,d){if(!i(s))throw Error(r(299));var m=!1,b="",w=BA,T=$A,q=FA,K=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(q=d.onRecoverableError),d.formState!==void 0&&(K=d.formState)),l=wC(s,1,!0,l,d??null,m,b,K,w,T,q,kC),l.context=EC(null),d=l.current,m=ui(),m=Tl(m),b=Eo(m),b.callback=null,No(d,b,m),d=m,l.current.lanes=d,Hn(l,d),Rs(l),s[vs]=l.current,ox(s),new Yp(l)},qf.version="19.2.4",qf}var HC;function NV(){if(HC)return Cx.exports;HC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cx.exports=EV(),Cx.exports}var SV=NV();const AV=ra(SV);var iM=rM();function bh(){return bh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bh.apply(this,arguments)}var Jo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jo||(Jo={}));const GC="popstate";function TV(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:c,hash:u}=r.location;return L1("",{pathname:a,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gg(i)}return PV(e,n,null,t)}function jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CV(){return Math.random().toString(36).substr(2,8)}function KC(t,e){return{usr:t.state,key:t.key,idx:e}}function L1(t,e,n,r){return n===void 0&&(n=null),bh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xd(e):e,{state:n,key:e&&e.key||r||CV()})}function Gg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function PV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,u=Jo.Pop,f=null,h=p();h==null&&(h=0,c.replaceState(bh({},c.state,{idx:h}),""));function p(){return(c.state||{idx:null}).idx}function g(){u=Jo.Pop;let N=p(),A=N==null?null:N-h;h=N,f&&f({action:u,location:j.location,delta:A})}function y(N,A){u=Jo.Push;let R=L1(j.location,N,A);h=p()+1;let C=KC(R,h),P=j.createHref(R);try{c.pushState(C,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(P)}a&&f&&f({action:u,location:j.location,delta:1})}function x(N,A){u=Jo.Replace;let R=L1(j.location,N,A);h=p();let C=KC(R,h),P=j.createHref(R);c.replaceState(C,"",P),a&&f&&f({action:u,location:j.location,delta:0})}function E(N){let A=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof N=="string"?N:Gg(N);return R=R.replace(/ $/,"%20"),jn(A,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,A)}let j={get action(){return u},get location(){return t(i,c)},listen(N){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(GC,g),f=N,()=>{i.removeEventListener(GC,g),f=null}},createHref(N){return e(i,N)},createURL:E,encodeLocation(N){let A=E(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:x,go(N){return c.go(N)}};return j}var QC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(QC||(QC={}));function IV(t,e,n){return n===void 0&&(n="/"),OV(t,e,n)}function OV(t,e,n,r){let i=typeof e=="string"?xd(e):e,a=_w(i.pathname||"/",n);if(a==null)return null;let c=sM(t);RV(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=HV(a);u=BV(c[f],h)}return u}function sM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,c,u)=>{let f={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(jn(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=tl([r,f.relativePath]),p=n.concat(f);a.children&&a.children.length>0&&(jn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),sM(a.children,e,p,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:UV(h,a.index),routesMeta:p})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,c);else for(let f of aM(a.path))i(a,c,f)}),e}function aM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=aM(r.join("/")),u=[];return u.push(...c.map(f=>f===""?a:[a,f].join("/"))),i&&u.push(...c),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function RV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:VV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kV=/^:[\w-]+$/,DV=3,MV=2,zV=1,LV=10,qV=-2,WC=t=>t==="*";function UV(t,e){let n=t.split("/"),r=n.length;return n.some(WC)&&(r+=qV),e&&(r+=MV),n.filter(i=>!WC(i)).reduce((i,a)=>i+(kV.test(a)?DV:a===""?zV:LV),r)}function VV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function BV(t,e,n){let{routesMeta:r}=t,i={},a="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=$V({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:tl([a,g.pathname]),pathnameBase:YV(tl([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=tl([a,g.pathnameBase]))}return c}function $V(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,p,g)=>{let{paramName:y,isOptional:x}=p;if(y==="*"){let j=u[g]||"";c=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const E=u[g];return x&&!E?h[y]=void 0:h[y]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:c,pattern:t}}function FV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function HV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _w(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const GV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KV=t=>GV.test(t);function QV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xd(t):t,a;if(n)if(KV(n))a=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),xw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?a=YC(n.substring(1),"/"):a=YC(n,e)}else a=e;return{pathname:a,search:XV(r),hash:JV(i)}}function YC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Rx(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jw(t,e){let n=WV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ww(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xd(t):(i=bh({},t),jn(!i.pathname||!i.pathname.includes("?"),Rx("?","pathname","search",i)),jn(!i.pathname||!i.pathname.includes("#"),Rx("#","pathname","hash",i)),jn(!i.search||!i.search.includes("#"),Rx("#","search","hash",i)));let a=t===""||i.pathname==="",c=a?"/":i.pathname,u;if(c==null)u=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?e[g]:"/"}let f=QV(i,u),h=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}const tl=t=>t.join("/").replace(/\/\/+/g,"/"),YV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oM=["post","put","patch","delete"];new Set(oM);const e8=["get",...oM];new Set(e8);function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xh.apply(this,arguments)}const Ew=_.createContext(null),t8=_.createContext(null),yl=_.createContext(null),dy=_.createContext(null),Ya=_.createContext({outlet:null,matches:[],isDataRoute:!1}),lM=_.createContext(null);function n8(t,e){let{relative:n}=e===void 0?{}:e;_d()||jn(!1);let{basename:r,navigator:i}=_.useContext(yl),{hash:a,pathname:c,search:u}=uM(t,{relative:n}),f=c;return r!=="/"&&(f=c==="/"?r:tl([r,c])),i.createHref({pathname:f,search:u,hash:a})}function _d(){return _.useContext(dy)!=null}function ia(){return _d()||jn(!1),_.useContext(dy).location}function cM(t){_.useContext(yl).static||_.useLayoutEffect(t)}function Nr(){let{isDataRoute:t}=_.useContext(Ya);return t?p8():r8()}function r8(){_d()||jn(!1);let t=_.useContext(Ew),{basename:e,future:n,navigator:r}=_.useContext(yl),{matches:i}=_.useContext(Ya),{pathname:a}=ia(),c=JSON.stringify(jw(i,n.v7_relativeSplatPath)),u=_.useRef(!1);return cM(()=>{u.current=!0}),_.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=ww(h,JSON.parse(c),a,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:tl([e,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[e,r,c,a,t])}function fy(){let{matches:t}=_.useContext(Ya),e=t[t.length-1];return e?e.params:{}}function uM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(yl),{matches:i}=_.useContext(Ya),{pathname:a}=ia(),c=JSON.stringify(jw(i,r.v7_relativeSplatPath));return _.useMemo(()=>ww(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function i8(t,e){return s8(t,e)}function s8(t,e,n,r){_d()||jn(!1);let{navigator:i}=_.useContext(yl),{matches:a}=_.useContext(Ya),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let h=ia(),p;if(e){var g;let N=typeof e=="string"?xd(e):e;f==="/"||(g=N.pathname)!=null&&g.startsWith(f)||jn(!1),p=N}else p=h;let y=p.pathname||"/",x=y;if(f!=="/"){let N=f.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=IV(t,{pathname:x}),j=u8(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:tl([f,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:tl([f,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&j?_.createElement(dy.Provider,{value:{location:xh({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Jo.Pop}},j):j}function a8(){let t=m8(),e=ZV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,null)}const o8=_.createElement(a8,null);class l8 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Ya.Provider,{value:this.props.routeContext},_.createElement(lM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c8(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(Ew);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Ya.Provider,{value:e},r)}function u8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);p>=0||jn(!1),c=c.slice(0,Math.min(c.length,p+1))}let f=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:y,errors:x}=n,E=g.route.loader&&y[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||E){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let x,E=!1,j=null,N=null;n&&(x=u&&g.route.id?u[g.route.id]:void 0,j=g.route.errorElement||o8,f&&(h<0&&y===0?(g8("route-fallback"),E=!0,N=null):h===y&&(E=!0,N=g.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),R=()=>{let C;return x?C=j:E?C=N:g.route.Component?C=_.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=p,_.createElement(c8,{match:g,routeContext:{outlet:p,matches:A,isDataRoute:n!=null},children:C})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?_.createElement(l8,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):R()},null)}var dM=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(dM||{}),fM=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(fM||{});function d8(t){let e=_.useContext(Ew);return e||jn(!1),e}function f8(t){let e=_.useContext(t8);return e||jn(!1),e}function h8(t){let e=_.useContext(Ya);return e||jn(!1),e}function hM(t){let e=h8(),n=e.matches[e.matches.length-1];return n.route.id||jn(!1),n.route.id}function m8(){var t;let e=_.useContext(lM),n=f8(),r=hM();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function p8(){let{router:t}=d8(dM.UseNavigateStable),e=hM(fM.UseNavigateStable),n=_.useRef(!1);return cM(()=>{n.current=!0}),_.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xh({fromRouteId:e},a)))},[t,e])}const XC={};function g8(t,e,n){XC[t]||(XC[t]=!0)}function v8(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function JC(t){let{to:e,replace:n,state:r,relative:i}=t;_d()||jn(!1);let{future:a,static:c}=_.useContext(yl),{matches:u}=_.useContext(Ya),{pathname:f}=ia(),h=Nr(),p=ww(e,jw(u,a.v7_relativeSplatPath),f,i==="path"),g=JSON.stringify(p);return _.useEffect(()=>h(JSON.parse(g),{replace:n,state:r,relative:i}),[h,g,i,n,r]),null}function Ht(t){jn(!1)}function y8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Jo.Pop,navigator:a,static:c=!1,future:u}=t;_d()&&jn(!1);let f=e.replace(/^\/*/,"/"),h=_.useMemo(()=>({basename:f,navigator:a,static:c,future:xh({v7_relativeSplatPath:!1},u)}),[f,u,a,c]);typeof r=="string"&&(r=xd(r));let{pathname:p="/",search:g="",hash:y="",state:x=null,key:E="default"}=r,j=_.useMemo(()=>{let N=_w(p,f);return N==null?null:{location:{pathname:N,search:g,hash:y,state:x,key:E},navigationType:i}},[f,p,g,y,x,E,i]);return j==null?null:_.createElement(yl.Provider,{value:h},_.createElement(dy.Provider,{children:n,value:j}))}function b8(t){let{children:e,location:n}=t;return i8(q1(e),n)}new Promise(()=>{});function q1(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let a=[...e,i];if(r.type===_.Fragment){n.push.apply(n,q1(r.props.children,a));return}r.type!==Ht&&jn(!1),!r.props.index||!r.props.children||jn(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=q1(r.props.children,a)),n.push(c)}),n}function U1(){return U1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U1.apply(this,arguments)}function x8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function _8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function j8(t,e){return t.button===0&&(!e||e==="_self")&&!_8(t)}function V1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function w8(t,e){let n=V1(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const E8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],N8="6";try{window.__reactRouterVersion=N8}catch{}const S8="startTransition",ZC=nM[S8];function A8(t){let{basename:e,children:n,future:r,window:i}=t,a=_.useRef();a.current==null&&(a.current=TV({window:i,v5Compat:!0}));let c=a.current,[u,f]=_.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},p=_.useCallback(g=>{h&&ZC?ZC(()=>f(g)):f(g)},[f,h]);return _.useLayoutEffect(()=>c.listen(p),[c,p]),_.useEffect(()=>v8(r),[r]),_.createElement(y8,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const T8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",C8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=_.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:c,state:u,target:f,to:h,preventScrollReset:p,viewTransition:g}=e,y=x8(e,E8),{basename:x}=_.useContext(yl),E,j=!1;if(typeof h=="string"&&C8.test(h)&&(E=h,T8))try{let C=new URL(window.location.href),P=h.startsWith("//")?new URL(C.protocol+h):new URL(h),M=_w(P.pathname,x);P.origin===C.origin&&M!=null?h=M+P.search+P.hash:j=!0}catch{}let N=n8(h,{relative:i}),A=P8(h,{replace:c,state:u,target:f,preventScrollReset:p,relative:i,viewTransition:g});function R(C){r&&r(C),C.defaultPrevented||A(C)}return _.createElement("a",U1({},y,{href:E||N,onClick:j||a?r:R,ref:n,target:f}))});var e2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(e2||(e2={}));var t2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(t2||(t2={}));function P8(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:c,viewTransition:u}=e===void 0?{}:e,f=Nr(),h=ia(),p=uM(t,{relative:c});return _.useCallback(g=>{if(j8(g,n)){g.preventDefault();let y=r!==void 0?r:Gg(h)===Gg(p);f(t,{replace:y,state:i,preventScrollReset:a,relative:c,viewTransition:u})}},[h,f,p,r,i,n,t,a,c,u])}function I8(t){let e=_.useRef(V1(t)),n=_.useRef(!1),r=ia(),i=_.useMemo(()=>w8(r.search,n.current?null:e.current),[r.search]),a=Nr(),c=_.useCallback((u,f)=>{const h=V1(typeof u=="function"?u(i):u);n.current=!0,a("?"+h,f)},[a,i]);return[i,c]}const O8=()=>{};var n2={};const mM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},R8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],c=t[n++],u=t[n++],f=((i&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},pM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],c=i+1<t.length,u=c?t[i+1]:0,f=i+2<t.length,h=f?t[i+2]:0,p=a>>2,g=(a&3)<<4|u>>4;let y=(u&15)<<2|h>>6,x=h&63;f||(x=64,c||(y=64)),r.push(n[p],n[g],n[y],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):R8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||u==null||h==null||g==null)throw new k8;const y=a<<2|u>>4;if(r.push(y),h!==64){const x=u<<4&240|h>>2;if(r.push(x),g!==64){const E=h<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D8=function(t){const e=mM(t);return pM.encodeByteArray(e,!0)},Kg=function(t){return D8(t).replace(/\./g,"")},gM=function(t){try{return pM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function M8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const z8=()=>M8().__FIREBASE_DEFAULTS__,L8=()=>{if(typeof process>"u"||typeof n2>"u")return;const t=n2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},q8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gM(t[1]);return e&&JSON.parse(e)},hy=()=>{try{return O8()||z8()||L8()||q8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vM=t=>hy()?.emulatorHosts?.[t],yM=t=>{const e=vM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bM=()=>hy()?.config,xM=t=>hy()?.[`_${t}`];class U8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function bl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nw(t){return(await fetch(t,{credentials:"include"})).ok}function _M(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Kg(JSON.stringify(n)),Kg(JSON.stringify(c)),""].join(".")}const uh={};function V8(){const t={prod:[],emulator:[]};for(const e of Object.keys(uh))uh[e]?t.emulator.push(e):t.prod.push(e);return t}function B8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let r2=!1;function Sw(t,e){if(typeof window>"u"||typeof document>"u"||!bl(window.location.host)||uh[t]===e||uh[t]||r2)return;uh[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=V8().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function f(y,x){y.setAttribute("width","24"),y.setAttribute("id",x),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{r2=!0,c()},y}function p(y,x){y.setAttribute("id",x),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=B8(r),x=n("text"),E=document.getElementById(x)||document.createElement("span"),j=n("learnmore"),N=document.getElementById(j)||document.createElement("a"),A=n("preprendIcon"),R=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const C=y.element;u(C),p(N,j);const P=h();f(R,A),C.append(R,E,N,P),document.body.appendChild(C)}a?(E.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function F8(){const t=hy()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function K8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q8(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function W8(){return!F8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y8(){try{return typeof indexedDB=="object"}catch{return!1}}function X8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const J8="FirebaseError";class sa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=J8,Object.setPrototypeOf(this,sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wh.prototype.create)}}class Wh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?Z8(a,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new sa(i,u,r)}}function Z8(t,e){return t.replace(eB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const eB=/\{\$([^}]+)}/g;function tB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],c=e[i];if(i2(a)&&i2(c)){if(!bc(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function i2(t){return t!==null&&typeof t=="object"}function Yh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function eh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nB(t,e){const n=new rB(t,e);return n.subscribe.bind(n)}class rB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kx),i.error===void 0&&(i.error=kx),i.complete===void 0&&(i.complete=kx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kx(){}function Ft(t){return t&&t._delegate?t._delegate:t}class ll{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tc="[DEFAULT]";let sB=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oB(e))try{this.getOrInitializeService({instanceIdentifier:tc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tc){return this.instances.has(e)}getOptions(e=tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tc){return this.component?this.component.multipleInstances?e:tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aB(t){return t===tc?void 0:t}function oB(t){return t.instantiationMode==="EAGER"}class lB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const cB={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},uB=ut.INFO,dB={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},fB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=dB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Aw{constructor(e){this.name=e,this._logLevel=uB,this._logHandler=fB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const hB=(t,e)=>e.some(n=>t instanceof n);let s2,a2;function mB(){return s2||(s2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pB(){return a2||(a2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jM=new WeakMap,B1=new WeakMap,wM=new WeakMap,Dx=new WeakMap,Tw=new WeakMap;function gB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(nl(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&jM.set(n,t)}).catch(()=>{}),Tw.set(e,t),e}function vB(t){if(B1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});B1.set(t,e)}let $1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return B1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yB(t){$1=t($1)}function bB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mx(this),e,...n);return wM.set(r,e.sort?e.sort():[e]),nl(r)}:pB().includes(t)?function(...e){return t.apply(Mx(this),e),nl(jM.get(this))}:function(...e){return nl(t.apply(Mx(this),e))}}function xB(t){return typeof t=="function"?bB(t):(t instanceof IDBTransaction&&vB(t),hB(t,mB())?new Proxy(t,$1):t)}function nl(t){if(t instanceof IDBRequest)return gB(t);if(Dx.has(t))return Dx.get(t);const e=xB(t);return e!==t&&(Dx.set(t,e),Tw.set(e,t)),e}const Mx=t=>Tw.get(t);function _B(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(t,e),u=nl(c);return r&&c.addEventListener("upgradeneeded",f=>{r(nl(c.result),f.oldVersion,f.newVersion,nl(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const jB=["get","getKey","getAll","getAllKeys","count"],wB=["put","add","delete","clear"],zx=new Map;function o2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zx.get(e))return zx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=wB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jB.includes(n)))return;const a=async function(c,...u){const f=this.transaction(c,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&f.done]))[0]};return zx.set(e,a),a}yB(t=>({...t,get:(e,n,r)=>o2(e,n)||t.get(e,n,r),has:(e,n)=>!!o2(e,n)||t.has(e,n)}));class EB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NB(t){return t.getComponent()?.type==="VERSION"}const F1="@firebase/app",l2="0.14.7";const La=new Aw("@firebase/app"),SB="@firebase/app-compat",AB="@firebase/analytics-compat",TB="@firebase/analytics",CB="@firebase/app-check-compat",PB="@firebase/app-check",IB="@firebase/auth",OB="@firebase/auth-compat",RB="@firebase/database",kB="@firebase/data-connect",DB="@firebase/database-compat",MB="@firebase/functions",zB="@firebase/functions-compat",LB="@firebase/installations",qB="@firebase/installations-compat",UB="@firebase/messaging",VB="@firebase/messaging-compat",BB="@firebase/performance",$B="@firebase/performance-compat",FB="@firebase/remote-config",HB="@firebase/remote-config-compat",GB="@firebase/storage",KB="@firebase/storage-compat",QB="@firebase/firestore",WB="@firebase/ai",YB="@firebase/firestore-compat",XB="firebase",JB="12.8.0";const H1="[DEFAULT]",ZB={[F1]:"fire-core",[SB]:"fire-core-compat",[TB]:"fire-analytics",[AB]:"fire-analytics-compat",[PB]:"fire-app-check",[CB]:"fire-app-check-compat",[IB]:"fire-auth",[OB]:"fire-auth-compat",[RB]:"fire-rtdb",[kB]:"fire-data-connect",[DB]:"fire-rtdb-compat",[MB]:"fire-fn",[zB]:"fire-fn-compat",[LB]:"fire-iid",[qB]:"fire-iid-compat",[UB]:"fire-fcm",[VB]:"fire-fcm-compat",[BB]:"fire-perf",[$B]:"fire-perf-compat",[FB]:"fire-rc",[HB]:"fire-rc-compat",[GB]:"fire-gcs",[KB]:"fire-gcs-compat",[QB]:"fire-fst",[YB]:"fire-fst-compat",[WB]:"fire-vertex","fire-js":"fire-js",[XB]:"fire-js-all"};const Qg=new Map,e7=new Map,G1=new Map;function c2(t,e){try{t.container.addComponent(e)}catch(n){La.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xc(t){const e=t.name;if(G1.has(e))return La.debug(`There were multiple attempts to register component ${e}.`),!1;G1.set(e,t);for(const n of Qg.values())c2(n,t);for(const n of e7.values())c2(n,t);return!0}function my(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function di(t){return t==null?!1:t.settings!==void 0}const t7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rl=new Wh("app","Firebase",t7);class n7{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rl.create("app-deleted",{appName:this._name})}}const Mc=JB;function EM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:H1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw rl.create("bad-app-name",{appName:String(i)});if(n||(n=bM()),!n)throw rl.create("no-options");const a=Qg.get(i);if(a){if(bc(n,a.options)&&bc(r,a.config))return a;throw rl.create("duplicate-app",{appName:i})}const c=new lB(i);for(const f of G1.values())c.addComponent(f);const u=new n7(n,r,c);return Qg.set(i,u),u}function Cw(t=H1){const e=Qg.get(t);if(!e&&t===H1&&bM())return EM();if(!e)throw rl.create("no-app",{appName:t});return e}function $s(t,e,n){let r=ZB[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),La.warn(c.join(" "));return}xc(new ll(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const r7="firebase-heartbeat-database",i7=1,_h="firebase-heartbeat-store";let Lx=null;function NM(){return Lx||(Lx=_B(r7,i7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_h)}catch(n){console.warn(n)}}}}).catch(t=>{throw rl.create("idb-open",{originalErrorMessage:t.message})})),Lx}async function s7(t){try{const n=(await NM()).transaction(_h),r=await n.objectStore(_h).get(SM(t));return await n.done,r}catch(e){if(e instanceof sa)La.warn(e.message);else{const n=rl.create("idb-get",{originalErrorMessage:e?.message});La.warn(n.message)}}}async function u2(t,e){try{const r=(await NM()).transaction(_h,"readwrite");await r.objectStore(_h).put(e,SM(t)),await r.done}catch(n){if(n instanceof sa)La.warn(n.message);else{const r=rl.create("idb-set",{originalErrorMessage:n?.message});La.warn(r.message)}}}function SM(t){return`${t.name}!${t.options.appId}`}const a7=1024,o7=30;class l7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new u7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=d2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>o7){const i=d7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){La.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=d2(),{heartbeatsToSend:n,unsentEntries:r}=c7(this._heartbeatsCache.heartbeats),i=Kg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return La.warn(e),""}}}function d2(){return new Date().toISOString().substring(0,10)}function c7(t,e=a7){const n=[];let r=t.slice();for(const i of t){const a=n.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),f2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),f2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class u7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y8()?X8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await s7(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return u2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return u2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function f2(t){return Kg(JSON.stringify({version:2,heartbeats:t})).length}function d7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function f7(t){xc(new ll("platform-logger",e=>new EB(e),"PRIVATE")),xc(new ll("heartbeat",e=>new l7(e),"PRIVATE")),$s(F1,l2,t),$s(F1,l2,"esm2020"),$s("fire-js","")}f7("");function AM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h7=AM,TM=new Wh("auth","Firebase",AM());const Wg=new Aw("@firebase/auth");function m7(t,...e){Wg.logLevel<=ut.WARN&&Wg.warn(`Auth (${Mc}): ${t}`,...e)}function Tg(t,...e){Wg.logLevel<=ut.ERROR&&Wg.error(`Auth (${Mc}): ${t}`,...e)}function ds(t,...e){throw Pw(t,...e)}function Fs(t,...e){return Pw(t,...e)}function CM(t,e,n){const r={...h7(),[e]:n};return new Wh("auth","Firebase",r).create(e,{appName:t.name})}function ka(t){return CM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TM.create(t,...e)}function Ge(t,e,...n){if(!t)throw Pw(e,...n)}function Ca(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tg(e),new Error(e)}function qa(t,e){t||Ca(e)}function K1(){return typeof self<"u"&&self.location?.href||""}function p7(){return h2()==="http:"||h2()==="https:"}function h2(){return typeof self<"u"&&self.location?.protocol||null}function g7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p7()||G8()||"connection"in navigator)?navigator.onLine:!0}function v7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Xh{constructor(e,n){this.shortDelay=e,this.longDelay=n,qa(n>e,"Short delay should be less than long delay!"),this.isMobile=$8()||K8()}get(){return g7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Iw(t,e){qa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class PM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const y7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const b7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x7=new Xh(3e4,6e4);function xl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Xa(t,e,n,r,i={}){return IM(t,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Yh({key:t.config.apiKey,...c}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:f,...a};return H8()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&bl(t.emulatorConfig.host)&&(h.credentials="include"),PM.fetch()(await OM(t,t.config.apiHost,n,u),h)})}async function IM(t,e,n){t._canInitEmulator=!1;const r={...y7,...e};try{const i=new j7(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Jp(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jp(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Jp(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Jp(t,"user-disabled",c);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw CM(t,p,h);ds(t,p)}}catch(i){if(i instanceof sa)throw i;ds(t,"network-request-failed",{message:String(i)})}}async function Jh(t,e,n,r,i={}){const a=await Xa(t,e,n,r,i);return"mfaPendingCredential"in a&&ds(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function OM(t,e,n,r){const i=`${e}${n}?${r}`,a=t,c=a.config.emulator?Iw(t.config,i):`${t.config.apiScheme}://${i}`;return b7.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function _7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fs(this.auth,"network-request-failed")),x7.get())})}}function Jp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fs(t,e,r);return i.customData._tokenResponse=n,i}function m2(t){return t!==void 0&&t.enterprise!==void 0}class w7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function E7(t,e){return Xa(t,"GET","/v2/recaptchaConfig",xl(t,e))}async function N7(t,e){return Xa(t,"POST","/v1/accounts:delete",e)}async function Yg(t,e){return Xa(t,"POST","/v1/accounts:lookup",e)}function dh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S7(t,e=!1){const n=Ft(t),r=await n.getIdToken(e),i=Ow(r);Ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:dh(qx(i.auth_time)),issuedAtTime:dh(qx(i.iat)),expirationTime:dh(qx(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function qx(t){return Number(t)*1e3}function Ow(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tg("JWT malformed, contained fewer than 3 sections"),null;try{const i=gM(n);return i?JSON.parse(i):(Tg("Failed to decode base64 JWT payload"),null)}catch(i){return Tg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function p2(t){const e=Ow(t);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sa&&A7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class T7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Q1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dh(this.lastLoginAt),this.creationTime=dh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xg(t){const e=t.auth,n=await t.getIdToken(),r=await nd(t,Yg(e,{idToken:n}));Ge(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?RM(i.providerUserInfo):[],c=P7(t.providerData,a),u=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!c?.length,h=u?f:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Q1(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function C7(t){const e=Ft(t);await Xg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function P7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function I7(t,e){const n=await IM(t,{},async()=>{const r=Yh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,c=await OM(t,i,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:r};return t.emulatorConfig&&bl(t.emulatorConfig.host)&&(f.credentials="include"),PM.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function O7(t,e){return Xa(t,"POST","/v2/accounts:revokeToken",xl(t,e))}class Qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const n=p2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await I7(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,c=new Qu;return r&&(Ge(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Ge(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(Ge(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qu,this.toJSON())}_performRefresh(){return Ca("not implemented")}}function Vo(t,e){Ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class os{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new T7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Q1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await nd(this,this.stsTokenManager.getToken(this.auth,e));return Ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return S7(this,e)}reload(){return C7(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(ka(this.auth));const e=await this.getIdToken();return await nd(this,N7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,c=n.photoURL??void 0,u=n.tenantId??void 0,f=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:x,providerData:E,stsTokenManager:j}=n;Ge(g&&j,e,"internal-error");const N=Qu.fromJSON(this.name,j);Ge(typeof g=="string",e,"internal-error"),Vo(r,e.name),Vo(i,e.name),Ge(typeof y=="boolean",e,"internal-error"),Ge(typeof x=="boolean",e,"internal-error"),Vo(a,e.name),Vo(c,e.name),Vo(u,e.name),Vo(f,e.name),Vo(h,e.name),Vo(p,e.name);const A=new os({uid:g,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:x,photoURL:c,phoneNumber:a,tenantId:u,stsTokenManager:N,createdAt:h,lastLoginAt:p});return E&&Array.isArray(E)&&(A.providerData=E.map(R=>({...R}))),f&&(A._redirectEventId=f),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Qu;i.updateFromServerResponse(n);const a=new os({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xg(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ge(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?RM(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,u=new Qu;u.updateFromIdToken(r);const f=new os({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Q1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,h),f}}const g2=new Map;function Pa(t){qa(t instanceof Function,"Expected a class definition");let e=g2.get(t);return e?(qa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,g2.set(t,e),e)}class kM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kM.type="NONE";const v2=kM;function Cg(t,e,n){return`firebase:${t}:${e}:${n}`}class Wu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Cg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Cg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Yg(this.auth,{idToken:e}).catch(()=>{});return n?os._fromGetAccountInfoResponse(this.auth,n,e):null}return os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wu(Pa(v2),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Pa(v2);const c=Cg(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(c);if(p){let g;if(typeof p=="string"){const y=await Yg(e,{idToken:p}).catch(()=>{});if(!y)break;g=await os._fromGetAccountInfoResponse(e,y,p)}else g=os._fromJSON(e,p);h!==a&&(u=g),a=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Wu(a,e,r):(a=f[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(c)}catch{}})),new Wu(a,e,r))}}function y2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UM(e))return"Blackberry";if(VM(e))return"Webos";if(MM(e))return"Safari";if((e.includes("chrome/")||zM(e))&&!e.includes("edge/"))return"Chrome";if(qM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function DM(t=wr()){return/firefox\//i.test(t)}function MM(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zM(t=wr()){return/crios\//i.test(t)}function LM(t=wr()){return/iemobile/i.test(t)}function qM(t=wr()){return/android/i.test(t)}function UM(t=wr()){return/blackberry/i.test(t)}function VM(t=wr()){return/webos/i.test(t)}function Rw(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function R7(t=wr()){return Rw(t)&&!!window.navigator?.standalone}function k7(){return Q8()&&document.documentMode===10}function BM(t=wr()){return Rw(t)||qM(t)||VM(t)||UM(t)||/windows phone/i.test(t)||LM(t)}function $M(t,e=[]){let n;switch(t){case"Browser":n=y2(wr());break;case"Worker":n=`${y2(wr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mc}/${r}`}class D7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const f=e(a);c(f)}catch(f){u(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function M7(t,e={}){return Xa(t,"GET","/v2/passwordPolicy",xl(t,e))}const z7=6;class L7{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??z7,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class q7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b2(this),this.idTokenSubscription=new b2(this),this.beforeStateQueue=new D7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yg(this,{idToken:e}),r=await os._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(di(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=v7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(ka(this));const n=e?Ft(e):null;return n&&Ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(ka(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(ka(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M7(this),n=new L7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await O7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pa(e)||this._popupRedirectResolver;Ge(n,this,"argument-error"),this.redirectPersistenceManager=await Wu.create(this,[Pa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$M(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&m7(`Error while retrieving App Check token: ${e.error}`),e?.token}}function zc(t){return Ft(t)}class b2{constructor(e){this.auth=e,this.observer=null,this.addObserver=nB(n=>this.observer=n)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let py={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U7(t){py=t}function FM(t){return py.loadJS(t)}function V7(){return py.recaptchaEnterpriseScript}function B7(){return py.gapiScript}function $7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class F7{constructor(){this.enterprise=new H7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class H7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G7="recaptcha-enterprise",HM="NO_RECAPTCHA";class K7{constructor(e){this.type=G7,this.auth=zc(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{E7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new w7(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}}).catch(f=>{u(f)})})}function i(a,c,u){const f=window.grecaptcha;m2(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{c(h)}).catch(()=>{c(HM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new F7().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&m2(window.grecaptcha))i(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=V7();f.length!==0&&(f+=u),FM(f).then(()=>{i(u,a,c)}).catch(h=>{c(h)})}}).catch(u=>{c(u)})})}}async function x2(t,e,n,r=!1,i=!1){const a=new K7(t);let c;if(i)c=HM;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function W1(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await x2(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await x2(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}function Q7(t,e){const n=my(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(bc(a,e??{}))return i;ds(i,"already-initialized")}return n.initialize({options:e})}function W7(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Pa);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Y7(t,e,n){const r=zc(t);Ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=GM(e),{host:c,port:u}=X7(e),f=u===null?"":`:${u}`,h={url:`${a}//${c}${f}/`},p=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ge(bc(h,r.config.emulator)&&bc(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,bl(c)?(Nw(`${a}//${c}${f}`),Sw("Auth",!0)):J7()}function GM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function X7(t){const e=GM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:_2(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:_2(c)}}}function _2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class kw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ca("not implemented")}_getIdTokenResponse(e){return Ca("not implemented")}_linkToIdToken(e,n){return Ca("not implemented")}_getReauthenticationResolver(e){return Ca("not implemented")}}async function Z7(t,e){return Xa(t,"POST","/v1/accounts:signUp",e)}async function e$(t,e){return Jh(t,"POST","/v1/accounts:signInWithPassword",xl(t,e))}async function t$(t,e){return Jh(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}async function n$(t,e){return Jh(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}class jh extends kw{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new jh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W1(e,n,"signInWithPassword",e$);case"emailLink":return t$(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W1(e,r,"signUpPassword",Z7);case"emailLink":return n$(e,{idToken:n,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Yu(t,e){return Jh(t,"POST","/v1/accounts:signInWithIdp",xl(t,e))}const r$="http://localhost";class _c extends kw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _c(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const c=new _c(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Yu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yu(e,n)}buildRequest(){const e={requestUri:r$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yh(n)}return e}}function i$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s$(t){const e=Zf(eh(t)).link,n=e?Zf(eh(e)).deep_link_id:null,r=Zf(eh(t)).deep_link_id;return(r?Zf(eh(r)).link:null)||r||n||e||t}class Dw{constructor(e){const n=Zf(eh(e)),r=n.apiKey??null,i=n.oobCode??null,a=i$(n.mode??null);Ge(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=s$(e);try{return new Dw(n)}catch{return null}}}class jd{constructor(){this.providerId=jd.PROVIDER_ID}static credential(e,n){return jh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Dw.parseLink(n);return Ge(r,"argument-error"),jh._fromEmailAndCode(e,r.code,r.tenantId)}}jd.PROVIDER_ID="password";jd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class KM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Zh extends KM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Go extends Zh{constructor(){super("facebook.com")}static credential(e){return _c._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch{return null}}}Go.FACEBOOK_SIGN_IN_METHOD="facebook.com";Go.PROVIDER_ID="facebook.com";class Ko extends Zh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _c._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ko.credential(n,r)}catch{return null}}}Ko.GOOGLE_SIGN_IN_METHOD="google.com";Ko.PROVIDER_ID="google.com";class Qo extends Zh{constructor(){super("github.com")}static credential(e){return _c._fromParams({providerId:Qo.PROVIDER_ID,signInMethod:Qo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qo.credentialFromTaggedObject(e)}static credentialFromError(e){return Qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qo.credential(e.oauthAccessToken)}catch{return null}}}Qo.GITHUB_SIGN_IN_METHOD="github.com";Qo.PROVIDER_ID="github.com";class Wo extends Zh{constructor(){super("twitter.com")}static credential(e,n){return _c._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wo.credentialFromTaggedObject(e)}static credentialFromError(e){return Wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wo.credential(n,r)}catch{return null}}}Wo.TWITTER_SIGN_IN_METHOD="twitter.com";Wo.PROVIDER_ID="twitter.com";async function a$(t,e){return Jh(t,"POST","/v1/accounts:signUp",xl(t,e))}class jc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await os._fromIdTokenResponse(e,r,i),c=j2(r);return new jc({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=j2(r);return new jc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function j2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Jg extends sa{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jg(e,n,r,i)}}function QM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Jg._fromErrorAndOperation(t,a,e,r):a})}async function o$(t,e,n=!1){const r=await nd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jc._forOperation(t,"link",r)}async function l$(t,e,n=!1){const{auth:r}=t;if(di(r.app))return Promise.reject(ka(r));const i="reauthenticate";try{const a=await nd(t,QM(r,i,e,t),n);Ge(a.idToken,r,"internal-error");const c=Ow(a.idToken);Ge(c,r,"internal-error");const{sub:u}=c;return Ge(t.uid===u,r,"user-mismatch"),jc._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ds(r,"user-mismatch"),a}}async function WM(t,e,n=!1){if(di(t.app))return Promise.reject(ka(t));const r="signIn",i=await QM(t,r,e),a=await jc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function c$(t,e){return WM(zc(t),e)}async function YM(t){const e=zc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function u$(t,e,n){if(di(t.app))return Promise.reject(ka(t));const r=zc(t),c=await W1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a$).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&YM(t),f}),u=await jc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function d$(t,e,n){return di(t.app)?Promise.reject(ka(t)):c$(Ft(t),jd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&YM(t),r})}async function f$(t,e){return Xa(t,"POST","/v1/accounts:update",e)}async function h$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ft(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await nd(r,f$(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:f})=>f==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function m$(t,e,n,r){return Ft(t).onIdTokenChanged(e,n,r)}function p$(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function g$(t,e,n,r){return Ft(t).onAuthStateChanged(e,n,r)}function v$(t){return Ft(t).signOut()}const Zg="__sak";class XM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zg,"1"),this.storage.removeItem(Zg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const y$=1e3,b$=10;class JM extends XM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);k7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,b$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},y$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JM.type="LOCAL";const x$=JM;class ZM extends XM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZM.type="SESSION";const ez=ZM;function _$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class gy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new gy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,c=this.handlersMap[i];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async h=>h(n.origin,a)),f=await _$(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gy.receivers=[];function Mw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class j${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((u,f)=>{const h=Mw("",20);i.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(p),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Hs(){return window}function w$(t){Hs().location.href=t}function tz(){return typeof Hs().WorkerGlobalScope<"u"&&typeof Hs().importScripts=="function"}async function E$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N$(){return navigator?.serviceWorker?.controller||null}function S$(){return tz()?self:null}const nz="firebaseLocalStorageDb",A$=1,ev="firebaseLocalStorage",rz="fbase_key";class em{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vy(t,e){return t.transaction([ev],e?"readwrite":"readonly").objectStore(ev)}function T$(){const t=indexedDB.deleteDatabase(nz);return new em(t).toPromise()}function Y1(){const t=indexedDB.open(nz,A$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ev,{keyPath:rz})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ev)?e(r):(r.close(),await T$(),e(await Y1()))})})}async function w2(t,e,n){const r=vy(t,!0).put({[rz]:e,value:n});return new em(r).toPromise()}async function C$(t,e){const n=vy(t,!1).get(e),r=await new em(n).toPromise();return r===void 0?null:r.value}function E2(t,e){const n=vy(t,!0).delete(e);return new em(n).toPromise()}const P$=800,I$=3;class iz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>I$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gy._getInstance(S$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await E$(),!this.activeServiceWorker)return;this.sender=new j$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y1();return await w2(e,Zg,"1"),await E2(e,Zg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>C$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>E2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=vy(i,!1).getAll();return new em(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iz.type="LOCAL";const O$=iz;new Xh(3e4,6e4);function R$(t,e){return e?Pa(e):(Ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class zw extends kw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function k$(t){return WM(t.auth,new zw(t),t.bypassAuthState)}function D$(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),l$(n,new zw(t),t.bypassAuthState)}async function M$(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),o$(n,new zw(t),t.bypassAuthState)}class sz{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return k$;case"linkViaPopup":case"linkViaRedirect":return M$;case"reauthViaPopup":case"reauthViaRedirect":return D$;default:ds(this.auth,"internal-error")}}resolve(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const z$=new Xh(2e3,1e4);class Hu extends sz{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Hu.currentPopupAction&&Hu.currentPopupAction.cancel(),Hu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){qa(this.filter.length===1,"Popup operations only handle one event");const e=Mw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z$.get())};e()}}Hu.currentPopupAction=null;const L$="pendingRedirect",Pg=new Map;class q$ extends sz{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pg.get(this.auth._key());if(!e){try{const r=await U$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pg.set(this.auth._key(),e)}return this.bypassAuthState||Pg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U$(t,e){const n=$$(e),r=B$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function V$(t,e){Pg.set(t._key(),e)}function B$(t){return Pa(t._redirectPersistence)}function $$(t){return Cg(L$,t.config.apiKey,t.name)}async function F$(t,e,n=!1){if(di(t.app))return Promise.reject(ka(t));const r=zc(t),i=R$(r,e),c=await new q$(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const H$=600*1e3;class G${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!az(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H$&&this.cachedEventUids.clear(),this.cachedEventUids.has(N2(e))}saveEventToCache(e){this.cachedEventUids.add(N2(e)),this.lastProcessedEventTime=Date.now()}}function N2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function az({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function K$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return az(t);default:return!1}}async function Q$(t,e={}){return Xa(t,"GET","/v1/projects",e)}const W$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y$=/^https?/;async function X$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Q$(t);for(const n of e)try{if(J$(n))return}catch{}ds(t,"unauthorized-domain")}function J$(t){const e=K1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!Y$.test(n))return!1;if(W$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Z$=new Xh(3e4,6e4);function S2(){const t=Hs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eF(t){return new Promise((e,n)=>{function r(){S2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S2(),n(Fs(t,"network-request-failed"))},timeout:Z$.get()})}if(Hs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hs().gapi?.load)r();else{const i=$7("iframefcb");return Hs()[i]=()=>{gapi.load?r():n(Fs(t,"network-request-failed"))},FM(`${B7()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Ig=null,e})}let Ig=null;function tF(t){return Ig=Ig||eF(t),Ig}const nF=new Xh(5e3,15e3),rF="__/auth/iframe",iF="emulator/auth/iframe",sF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oF(t){const e=t.config;Ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Iw(e,iF):`https://${t.config.authDomain}/${rF}`,r={apiKey:e.apiKey,appName:t.name,v:Mc},i=aF.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Yh(r).slice(1)}`}async function lF(t){const e=await tF(t),n=Hs().gapi;return Ge(n,t,"internal-error"),e.open({where:document.body,url:oF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sF,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Fs(t,"network-request-failed"),u=Hs().setTimeout(()=>{a(c)},nF.get());function f(){Hs().clearTimeout(u),i(r)}r.ping(f).then(f,()=>{a(c)})}))}const cF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uF=500,dF=600,fF="_blank",hF="http://localhost";class A2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mF(t,e,n,r=uF,i=dF){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f={...cF,width:r.toString(),height:i.toString(),top:a,left:c},h=wr().toLowerCase();n&&(u=zM(h)?fF:n),DM(h)&&(e=e||hF,f.scrollbars="yes");const p=Object.entries(f).reduce((y,[x,E])=>`${y}${x}=${E},`,"");if(R7(h)&&u!=="_self")return pF(e||"",u),new A2(null);const g=window.open(e||"",u,p);Ge(g,t,"popup-blocked");try{g.focus()}catch{}return new A2(g)}function pF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const gF="__/auth/handler",vF="emulator/auth/handler",yF=encodeURIComponent("fac");async function T2(t,e,n,r,i,a){Ge(t.config.authDomain,t,"auth-domain-config-required"),Ge(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mc,eventId:i};if(e instanceof KM){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",tB(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))c[p]=g}if(e instanceof Zh){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await t._getAppCheckToken(),h=f?`#${yF}=${encodeURIComponent(f)}`:"";return`${bF(t)}?${Yh(u).slice(1)}${h}`}function bF({config:t}){return t.emulator?Iw(t,vF):`https://${t.authDomain}/${gF}`}const Ux="webStorageSupport";class xF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ez,this._completeRedirectFn=F$,this._overrideRedirectResult=V$}async _openPopup(e,n,r,i){qa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await T2(e,n,r,K1(),i);return mF(e,a,Mw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await T2(e,n,r,K1(),i);return w$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(qa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lF(e),r=new G$(e);return n.register("authEvent",i=>(Ge(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ux,{type:Ux},i=>{const a=i?.[0]?.[Ux];a!==void 0&&n(!!a),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BM()||MM()||Rw()}}const _F=xF;var C2="@firebase/auth",P2="1.12.0";class jF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EF(t){xc(new ll("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Ge(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$M(t)},h=new q7(r,i,a,f);return W7(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xc(new ll("auth-internal",e=>{const n=zc(e.getProvider("auth").getImmediate());return(r=>new jF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(C2,P2,wF(t)),$s(C2,P2,"esm2020")}const NF=300,SF=xM("authIdTokenMaxAge")||NF;let I2=null;const AF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SF)return;const i=n?.token;I2!==i&&(I2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function TF(t=Cw()){const e=my(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q7(t,{popupRedirectResolver:_F,persistence:[O$,x$,ez]}),r=xM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=AF(a.toString());p$(n,c,()=>c(n.currentUser)),m$(n,u=>c(u))}}const i=vM("auth");return i&&Y7(n,`http://${i}`),n}function CF(){return document.getElementsByTagName("head")?.[0]??document}U7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Fs("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",CF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EF("Browser");var O2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var il,oz;(function(){var t;function e(D,O){function k(){}k.prototype=O.prototype,D.F=O.prototype,D.prototype=new k,D.prototype.constructor=D,D.D=function(U,L,z){for(var V=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)V[ge-2]=arguments[ge];return O.prototype[L].apply(U,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,O,k){k||(k=0);const U=Array(16);if(typeof O=="string")for(var L=0;L<16;++L)U[L]=O.charCodeAt(k++)|O.charCodeAt(k++)<<8|O.charCodeAt(k++)<<16|O.charCodeAt(k++)<<24;else for(L=0;L<16;++L)U[L]=O[k++]|O[k++]<<8|O[k++]<<16|O[k++]<<24;O=D.g[0],k=D.g[1],L=D.g[2];let z=D.g[3],V;V=O+(z^k&(L^z))+U[0]+3614090360&4294967295,O=k+(V<<7&4294967295|V>>>25),V=z+(L^O&(k^L))+U[1]+3905402710&4294967295,z=O+(V<<12&4294967295|V>>>20),V=L+(k^z&(O^k))+U[2]+606105819&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(O^L&(z^O))+U[3]+3250441966&4294967295,k=L+(V<<22&4294967295|V>>>10),V=O+(z^k&(L^z))+U[4]+4118548399&4294967295,O=k+(V<<7&4294967295|V>>>25),V=z+(L^O&(k^L))+U[5]+1200080426&4294967295,z=O+(V<<12&4294967295|V>>>20),V=L+(k^z&(O^k))+U[6]+2821735955&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(O^L&(z^O))+U[7]+4249261313&4294967295,k=L+(V<<22&4294967295|V>>>10),V=O+(z^k&(L^z))+U[8]+1770035416&4294967295,O=k+(V<<7&4294967295|V>>>25),V=z+(L^O&(k^L))+U[9]+2336552879&4294967295,z=O+(V<<12&4294967295|V>>>20),V=L+(k^z&(O^k))+U[10]+4294925233&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(O^L&(z^O))+U[11]+2304563134&4294967295,k=L+(V<<22&4294967295|V>>>10),V=O+(z^k&(L^z))+U[12]+1804603682&4294967295,O=k+(V<<7&4294967295|V>>>25),V=z+(L^O&(k^L))+U[13]+4254626195&4294967295,z=O+(V<<12&4294967295|V>>>20),V=L+(k^z&(O^k))+U[14]+2792965006&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(O^L&(z^O))+U[15]+1236535329&4294967295,k=L+(V<<22&4294967295|V>>>10),V=O+(L^z&(k^L))+U[1]+4129170786&4294967295,O=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(O^k))+U[6]+3225465664&4294967295,z=O+(V<<9&4294967295|V>>>23),V=L+(O^k&(z^O))+U[11]+643717713&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^O&(L^z))+U[0]+3921069994&4294967295,k=L+(V<<20&4294967295|V>>>12),V=O+(L^z&(k^L))+U[5]+3593408605&4294967295,O=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(O^k))+U[10]+38016083&4294967295,z=O+(V<<9&4294967295|V>>>23),V=L+(O^k&(z^O))+U[15]+3634488961&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^O&(L^z))+U[4]+3889429448&4294967295,k=L+(V<<20&4294967295|V>>>12),V=O+(L^z&(k^L))+U[9]+568446438&4294967295,O=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(O^k))+U[14]+3275163606&4294967295,z=O+(V<<9&4294967295|V>>>23),V=L+(O^k&(z^O))+U[3]+4107603335&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^O&(L^z))+U[8]+1163531501&4294967295,k=L+(V<<20&4294967295|V>>>12),V=O+(L^z&(k^L))+U[13]+2850285829&4294967295,O=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(O^k))+U[2]+4243563512&4294967295,z=O+(V<<9&4294967295|V>>>23),V=L+(O^k&(z^O))+U[7]+1735328473&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^O&(L^z))+U[12]+2368359562&4294967295,k=L+(V<<20&4294967295|V>>>12),V=O+(k^L^z)+U[5]+4294588738&4294967295,O=k+(V<<4&4294967295|V>>>28),V=z+(O^k^L)+U[8]+2272392833&4294967295,z=O+(V<<11&4294967295|V>>>21),V=L+(z^O^k)+U[11]+1839030562&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^O)+U[14]+4259657740&4294967295,k=L+(V<<23&4294967295|V>>>9),V=O+(k^L^z)+U[1]+2763975236&4294967295,O=k+(V<<4&4294967295|V>>>28),V=z+(O^k^L)+U[4]+1272893353&4294967295,z=O+(V<<11&4294967295|V>>>21),V=L+(z^O^k)+U[7]+4139469664&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^O)+U[10]+3200236656&4294967295,k=L+(V<<23&4294967295|V>>>9),V=O+(k^L^z)+U[13]+681279174&4294967295,O=k+(V<<4&4294967295|V>>>28),V=z+(O^k^L)+U[0]+3936430074&4294967295,z=O+(V<<11&4294967295|V>>>21),V=L+(z^O^k)+U[3]+3572445317&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^O)+U[6]+76029189&4294967295,k=L+(V<<23&4294967295|V>>>9),V=O+(k^L^z)+U[9]+3654602809&4294967295,O=k+(V<<4&4294967295|V>>>28),V=z+(O^k^L)+U[12]+3873151461&4294967295,z=O+(V<<11&4294967295|V>>>21),V=L+(z^O^k)+U[15]+530742520&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^O)+U[2]+3299628645&4294967295,k=L+(V<<23&4294967295|V>>>9),V=O+(L^(k|~z))+U[0]+4096336452&4294967295,O=k+(V<<6&4294967295|V>>>26),V=z+(k^(O|~L))+U[7]+1126891415&4294967295,z=O+(V<<10&4294967295|V>>>22),V=L+(O^(z|~k))+U[14]+2878612391&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~O))+U[5]+4237533241&4294967295,k=L+(V<<21&4294967295|V>>>11),V=O+(L^(k|~z))+U[12]+1700485571&4294967295,O=k+(V<<6&4294967295|V>>>26),V=z+(k^(O|~L))+U[3]+2399980690&4294967295,z=O+(V<<10&4294967295|V>>>22),V=L+(O^(z|~k))+U[10]+4293915773&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~O))+U[1]+2240044497&4294967295,k=L+(V<<21&4294967295|V>>>11),V=O+(L^(k|~z))+U[8]+1873313359&4294967295,O=k+(V<<6&4294967295|V>>>26),V=z+(k^(O|~L))+U[15]+4264355552&4294967295,z=O+(V<<10&4294967295|V>>>22),V=L+(O^(z|~k))+U[6]+2734768916&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~O))+U[13]+1309151649&4294967295,k=L+(V<<21&4294967295|V>>>11),V=O+(L^(k|~z))+U[4]+4149444226&4294967295,O=k+(V<<6&4294967295|V>>>26),V=z+(k^(O|~L))+U[11]+3174756917&4294967295,z=O+(V<<10&4294967295|V>>>22),V=L+(O^(z|~k))+U[2]+718787259&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~O))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+O&4294967295,D.g[1]=D.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+z&4294967295}r.prototype.v=function(D,O){O===void 0&&(O=D.length);const k=O-this.blockSize,U=this.C;let L=this.h,z=0;for(;z<O;){if(L==0)for(;z<=k;)i(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<O;)if(U[L++]=D.charCodeAt(z++),L==this.blockSize){i(this,U),L=0;break}}else for(;z<O;)if(U[L++]=D[z++],L==this.blockSize){i(this,U),L=0;break}}this.h=L,this.o+=O},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var O=1;O<D.length-8;++O)D[O]=0;O=this.o*8;for(var k=D.length-8;k<D.length;++k)D[k]=O&255,O/=256;for(this.v(D),D=Array(16),O=0,k=0;k<4;++k)for(let U=0;U<32;U+=8)D[O++]=this.g[k]>>>U&255;return D};function a(D,O){var k=u;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=O(D)}function c(D,O){this.h=O;const k=[];let U=!0;for(let L=D.length-1;L>=0;L--){const z=D[L]|0;U&&z==O||(k[L]=z,U=!1)}this.g=k}var u={};function f(D){return-128<=D&&D<128?a(D,function(O){return new c([O|0],O<0?-1:0)}):new c([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return N(h(-D));const O=[];let k=1;for(let U=0;D>=k;U++)O[U]=D/k|0,k*=4294967296;return new c(O,0)}function p(D,O){if(D.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(D.charAt(0)=="-")return N(p(D.substring(1),O));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(O,8));let U=g;for(let z=0;z<D.length;z+=8){var L=Math.min(8,D.length-z);const V=parseInt(D.substring(z,z+L),O);L<8?(L=h(Math.pow(O,L)),U=U.j(L).add(h(V))):(U=U.j(k),U=U.add(h(V)))}return U}var g=f(0),y=f(1),x=f(16777216);t=c.prototype,t.m=function(){if(j(this))return-N(this).m();let D=0,O=1;for(let k=0;k<this.g.length;k++){const U=this.i(k);D+=(U>=0?U:4294967296+U)*O,O*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(j(this))return"-"+N(this).toString(D);const O=h(Math.pow(D,6));var k=this;let U="";for(;;){const L=P(k,O).g;k=A(k,L.j(O));let z=((k.g.length>0?k.g[0]:k.h)>>>0).toString(D);if(k=L,E(k))return z+U;for(;z.length<6;)z="0"+z;U=z+U}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(let O=0;O<D.g.length;O++)if(D.g[O]!=0)return!1;return!0}function j(D){return D.h==-1}t.l=function(D){return D=A(this,D),j(D)?-1:E(D)?0:1};function N(D){const O=D.g.length,k=[];for(let U=0;U<O;U++)k[U]=~D.g[U];return new c(k,~D.h).add(y)}t.abs=function(){return j(this)?N(this):this},t.add=function(D){const O=Math.max(this.g.length,D.g.length),k=[];let U=0;for(let L=0;L<=O;L++){let z=U+(this.i(L)&65535)+(D.i(L)&65535),V=(z>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);U=V>>>16,z&=65535,V&=65535,k[L]=V<<16|z}return new c(k,k[k.length-1]&-2147483648?-1:0)};function A(D,O){return D.add(N(O))}t.j=function(D){if(E(this)||E(D))return g;if(j(this))return j(D)?N(this).j(N(D)):N(N(this).j(D));if(j(D))return N(this.j(N(D)));if(this.l(x)<0&&D.l(x)<0)return h(this.m()*D.m());const O=this.g.length+D.g.length,k=[];for(var U=0;U<2*O;U++)k[U]=0;for(U=0;U<this.g.length;U++)for(let L=0;L<D.g.length;L++){const z=this.i(U)>>>16,V=this.i(U)&65535,ge=D.i(L)>>>16,Z=D.i(L)&65535;k[2*U+2*L]+=V*Z,R(k,2*U+2*L),k[2*U+2*L+1]+=z*Z,R(k,2*U+2*L+1),k[2*U+2*L+1]+=V*ge,R(k,2*U+2*L+1),k[2*U+2*L+2]+=z*ge,R(k,2*U+2*L+2)}for(D=0;D<O;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=O;D<2*O;D++)k[D]=0;return new c(k,0)};function R(D,O){for(;(D[O]&65535)!=D[O];)D[O+1]+=D[O]>>>16,D[O]&=65535,O++}function C(D,O){this.g=D,this.h=O}function P(D,O){if(E(O))throw Error("division by zero");if(E(D))return new C(g,g);if(j(D))return O=P(N(D),O),new C(N(O.g),N(O.h));if(j(O))return O=P(D,N(O)),new C(N(O.g),O.h);if(D.g.length>30){if(j(D)||j(O))throw Error("slowDivide_ only works with positive integers.");for(var k=y,U=O;U.l(D)<=0;)k=M(k),U=M(U);var L=B(k,1),z=B(U,1);for(U=B(U,2),k=B(k,2);!E(U);){var V=z.add(U);V.l(D)<=0&&(L=L.add(k),z=V),U=B(U,1),k=B(k,1)}return O=A(D,L.j(O)),new C(L,O)}for(L=g;D.l(O)>=0;){for(k=Math.max(1,Math.floor(D.m()/O.m())),U=Math.ceil(Math.log(k)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),z=h(k),V=z.j(O);j(V)||V.l(D)>0;)k-=U,z=h(k),V=z.j(O);E(z)&&(z=y),L=L.add(z),D=A(D,V)}return new C(L,D)}t.B=function(D){return P(this,D).h},t.and=function(D){const O=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<O;U++)k[U]=this.i(U)&D.i(U);return new c(k,this.h&D.h)},t.or=function(D){const O=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<O;U++)k[U]=this.i(U)|D.i(U);return new c(k,this.h|D.h)},t.xor=function(D){const O=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<O;U++)k[U]=this.i(U)^D.i(U);return new c(k,this.h^D.h)};function M(D){const O=D.g.length+1,k=[];for(let U=0;U<O;U++)k[U]=D.i(U)<<1|D.i(U-1)>>>31;return new c(k,D.h)}function B(D,O){const k=O>>5;O%=32;const U=D.g.length-k,L=[];for(let z=0;z<U;z++)L[z]=O>0?D.i(z+k)>>>O|D.i(z+k+1)<<32-O:D.i(z+k);return new c(L,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oz=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=p,il=c}).apply(typeof O2<"u"?O2:typeof self<"u"?self:typeof window<"u"?window:{});var Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lz,th,cz,Og,X1,uz,dz,fz;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zp=="object"&&Zp];for(var S=0;S<v.length;++S){var I=v[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(v,S){if(S)e:{var I=r;v=v.split(".");for(var $=0;$<v.length-1;$++){var re=v[$];if(!(re in I))break e;I=I[re]}v=v[v.length-1],$=I[v],S=S($),S!=$&&S!=null&&e(I,v,{configurable:!0,writable:!0,value:S})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(S){var I=[],$;for($ in S)Object.prototype.hasOwnProperty.call(S,$)&&I.push([$,S[$]]);return I}});var a=a||{},c=this||self;function u(v){var S=typeof v;return S=="object"&&v!=null||S=="function"}function f(v,S,I){return v.call.apply(v.bind,arguments)}function h(v,S,I){return h=f,h.apply(null,arguments)}function p(v,S){var I=Array.prototype.slice.call(arguments,1);return function(){var $=I.slice();return $.push.apply($,arguments),v.apply(this,$)}}function g(v,S){function I(){}I.prototype=S.prototype,v.Z=S.prototype,v.prototype=new I,v.prototype.constructor=v,v.Ob=function($,re,he){for(var Se=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Se[tt-2]=arguments[tt];return S.prototype[re].apply($,Se)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function x(v){const S=v.length;if(S>0){const I=Array(S);for(let $=0;$<S;$++)I[$]=v[$];return I}return[]}function E(v,S){for(let $=1;$<arguments.length;$++){const re=arguments[$];var I=typeof re;if(I=I!="object"?I:re?Array.isArray(re)?"array":I:"null",I=="array"||I=="object"&&typeof re.length=="number"){I=v.length||0;const he=re.length||0;v.length=I+he;for(let Se=0;Se<he;Se++)v[I+Se]=re[Se]}else v.push(re)}}class j{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function N(v){c.setTimeout(()=>{throw v},0)}function A(){var v=D;let S=null;return v.g&&(S=v.g,v.g=v.g.next,v.g||(v.h=null),S.next=null),S}class R{constructor(){this.h=this.g=null}add(S,I){const $=C.get();$.set(S,I),this.h?this.h.next=$:this.g=$,this.h=$}}var C=new j(()=>new P,v=>v.reset());class P{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let M,B=!1,D=new R,O=()=>{const v=Promise.resolve(void 0);M=()=>{v.then(k)}};function k(){for(var v;v=A();){try{v.h.call(v.g)}catch(I){N(I)}var S=C;S.j(v),S.h<100&&(S.h++,v.next=S.g,S.g=v)}B=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,S){this.type=v,this.g=this.target=S,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,S=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const I=()=>{};c.addEventListener("test",I,S),c.removeEventListener("test",I,S)}catch{}return v})();function V(v){return/^[\s\xa0]*$/.test(v)}function ge(v,S){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,S)}g(ge,L),ge.prototype.init=function(v,S){const I=this.type=v.type,$=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=S,S=v.relatedTarget,S||(I=="mouseover"?S=v.fromElement:I=="mouseout"&&(S=v.toElement)),this.relatedTarget=S,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),H=0;function ae(v,S,I,$,re){this.listener=v,this.proxy=null,this.src=S,this.type=I,this.capture=!!$,this.ha=re,this.key=++H,this.da=this.fa=!1}function X(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function we(v,S,I){for(const $ in v)S.call(I,v[$],$,v)}function W(v,S){for(const I in v)S.call(void 0,v[I],I,v)}function F(v){const S={};for(const I in v)S[I]=v[I];return S}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(v,S){let I,$;for(let re=1;re<arguments.length;re++){$=arguments[re];for(I in $)v[I]=$[I];for(let he=0;he<ne.length;he++)I=ne[he],Object.prototype.hasOwnProperty.call($,I)&&(v[I]=$[I])}}function ve(v){this.src=v,this.g={},this.h=0}ve.prototype.add=function(v,S,I,$,re){const he=v.toString();v=this.g[he],v||(v=this.g[he]=[],this.h++);const Se=G(v,S,$,re);return Se>-1?(S=v[Se],I||(S.fa=!1)):(S=new ae(S,this.src,he,!!$,re),S.fa=I,v.push(S)),S};function fe(v,S){const I=S.type;if(I in v.g){var $=v.g[I],re=Array.prototype.indexOf.call($,S,void 0),he;(he=re>=0)&&Array.prototype.splice.call($,re,1),he&&(X(S),v.g[I].length==0&&(delete v.g[I],v.h--))}}function G(v,S,I,$){for(let re=0;re<v.length;++re){const he=v[re];if(!he.da&&he.listener==S&&he.capture==!!I&&he.ha==$)return re}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Ce={};function ie(v,S,I,$,re){if(Array.isArray(S)){for(let he=0;he<S.length;he++)ie(v,S[he],I,$,re);return null}return I=pr(I),v&&v[Z]?v.J(S,I,u($)?!!$.capture:!1,re):J(v,S,I,!1,$,re)}function J(v,S,I,$,re,he){if(!S)throw Error("Invalid event type");const Se=u(re)?!!re.capture:!!re;let tt=mt(v);if(tt||(v[ce]=tt=new ve(v)),I=tt.add(S,I,$,Se,he),I.proxy)return I;if($=Q(),I.proxy=$,$.src=v,$.listener=I,v.addEventListener)z||(re=Se),re===void 0&&(re=!1),v.addEventListener(S.toString(),$,re);else if(v.attachEvent)v.attachEvent(ze(S.toString()),$);else if(v.addListener&&v.removeListener)v.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Q(){function v(I){return S.call(v.src,v.listener,I)}const S=ot;return v}function me(v,S,I,$,re){if(Array.isArray(S))for(var he=0;he<S.length;he++)me(v,S[he],I,$,re);else $=u($)?!!$.capture:!!$,I=pr(I),v&&v[Z]?(v=v.i,he=String(S).toString(),he in v.g&&(S=v.g[he],I=G(S,I,$,re),I>-1&&(X(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete v.g[he],v.h--)))):v&&(v=mt(v))&&(S=v.g[S.toString()],v=-1,S&&(v=G(S,I,$,re)),(I=v>-1?S[v]:null)&&Te(I))}function Te(v){if(typeof v!="number"&&v&&!v.da){var S=v.src;if(S&&S[Z])fe(S.i,v);else{var I=v.type,$=v.proxy;S.removeEventListener?S.removeEventListener(I,$,v.capture):S.detachEvent?S.detachEvent(ze(I),$):S.addListener&&S.removeListener&&S.removeListener($),(I=mt(S))?(fe(I,v),I.h==0&&(I.src=null,S[ce]=null)):X(v)}}}function ze(v){return v in Ce?Ce[v]:Ce[v]="on"+v}function ot(v,S){if(v.da)v=!0;else{S=new ge(S,this);const I=v.listener,$=v.ha||v.src;v.fa&&Te(v),v=I.call($,S)}return v}function mt(v){return v=v[ce],v instanceof ve?v:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function pr(v){return typeof v=="function"?v:(v[vt]||(v[vt]=function(S){return v.handleEvent(S)}),v[vt])}function Rt(){U.call(this),this.i=new ve(this),this.M=this,this.G=null}g(Rt,U),Rt.prototype[Z]=!0,Rt.prototype.removeEventListener=function(v,S,I,$){me(this,v,S,I,$)};function kt(v,S){var I,$=v.G;if($)for(I=[];$;$=$.G)I.push($);if(v=v.M,$=S.type||S,typeof S=="string")S=new L(S,v);else if(S instanceof L)S.target=S.target||v;else{var re=S;S=new L($,v),ue(S,re)}re=!0;let he,Se;if(I)for(Se=I.length-1;Se>=0;Se--)he=S.g=I[Se],re=Lr(he,$,!0,S)&&re;if(he=S.g=v,re=Lr(he,$,!0,S)&&re,re=Lr(he,$,!1,S)&&re,I)for(Se=0;Se<I.length;Se++)he=S.g=I[Se],re=Lr(he,$,!1,S)&&re}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var v=this.i;for(const S in v.g){const I=v.g[S];for(let $=0;$<I.length;$++)X(I[$]);delete v.g[S],v.h--}}this.G=null},Rt.prototype.J=function(v,S,I,$){return this.i.add(String(v),S,!1,I,$)},Rt.prototype.K=function(v,S,I,$){return this.i.add(String(v),S,!0,I,$)};function Lr(v,S,I,$){if(S=v.i.g[String(S)],!S)return!0;S=S.concat();let re=!0;for(let he=0;he<S.length;++he){const Se=S[he];if(Se&&!Se.da&&Se.capture==I){const tt=Se.listener,yn=Se.ha||Se.src;Se.fa&&fe(v.i,Se),re=tt.call(yn,$)!==!1&&re}}return re&&!$.defaultPrevented}function ye(v,S){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(v,S||0)}function ke(v){v.g=ye(()=>{v.g=null,v.i&&(v.i=!1,ke(v))},v.l);const S=v.h;v.h=null,v.m.apply(null,S)}class Be extends U{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ke(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(v){U.call(this),this.h=v,this.g={}}g(Qe,U);var Vt=[];function zn(v){we(v.g,function(S,I){this.g.hasOwnProperty(I)&&Te(S)},v),v.g={}}Qe.prototype.N=function(){Qe.Z.N.call(this),zn(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=c.JSON.stringify,oo=c.JSON.parse,Ur=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Hi(){}function Gc(){}var on={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function At(){L.call(this,"d")}g(At,L);function Vr(){L.call(this,"c")}g(Vr,L);var nn={},Sl=null;function lo(){return Sl=Sl||new Rt}nn.Ia="serverreachability";function Kc(v){L.call(this,nn.Ia,v)}g(Kc,L);function bi(v){const S=lo();kt(S,new Kc(S))}nn.STAT_EVENT="statevent";function aa(v,S){L.call(this,nn.STAT_EVENT,v),this.stat=S}g(aa,L);function ln(v){const S=lo();kt(S,new aa(S,v))}nn.Ja="timingevent";function xi(v,S){L.call(this,nn.Ja,v),this.size=S}g(xi,L);function gr(v,S){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},S)}function ti(){this.g=!0}ti.prototype.ua=function(){this.g=!1};function te(v,S,I,$,re,he){v.info(function(){if(v.g)if(he){var Se="",tt=he.split("&");for(let Et=0;Et<tt.length;Et++){var yn=tt[Et].split("=");if(yn.length>1){const Xt=yn[0];yn=yn[1];const Ni=Xt.split("_");Se=Ni.length>=2&&Ni[1]=="type"?Se+(Xt+"="+yn+"&"):Se+(Xt+"=redacted&")}}}else Se=null;else Se=he;return"XMLHTTP REQ ("+$+") [attempt "+re+"]: "+S+`
`+I+`
`+Se})}function Ve(v,S,I,$,re,he,Se){v.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+re+"]: "+S+`
`+I+`
`+he+" "+Se})}function yt(v,S,I,$){v.info(function(){return"XMLHTTP TEXT ("+S+"): "+Al(v,I)+($?" "+$:"")})}function Hn(v,S){v.info(function(){return"TIMEOUT: "+S})}ti.prototype.info=function(){};function Al(v,S){if(!v.g)return S;if(!S)return null;try{const he=JSON.parse(S);if(he){for(v=0;v<he.length;v++)if(Array.isArray(he[v])){var I=he[v];if(!(I.length<2)){var $=I[1];if(Array.isArray($)&&!($.length<1)){var re=$[0];if(re!="noop"&&re!="stop"&&re!="close")for(let Se=1;Se<$.length;Se++)$[Se]=""}}}}return qr(he)}catch{return S}}var _i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ld={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qd;function Tl(){}g(Tl,Hi),Tl.prototype.g=function(){return new XMLHttpRequest},qd=new Tl;function oa(v){return encodeURIComponent(String(v))}function Pm(v){var S=1;v=v.split(":");const I=[];for(;S>0&&v.length;)I.push(v.shift()),S--;return v.length&&I.push(v.join(":")),I}function Gi(v,S,I,$){this.j=v,this.i=S,this.l=I,this.S=$||1,this.V=new Qe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ki}function Ki(){this.i=null,this.g="",this.h=!1}var En={},Gn={};function vs(v,S,I){v.M=1,v.A=Cl(Sn(S)),v.u=I,v.R=!0,Qc(v,null)}function Qc(v,S){v.F=Date.now(),ys(v),v.B=Sn(v.A);var I=v.B,$=v.S;Array.isArray($)||($=[String($)]),Jc(I.i,"t",$),v.C=0,I=v.j.L,v.h=new Ki,v.g=Hm(v.j,I?S:null,!v.u),v.P>0&&(v.O=new Be(h(v.Y,v,v.g),v.P)),S=v.V,I=v.g,$=v.ba;var re="readystatechange";Array.isArray(re)||(re&&(Vt[0]=re.toString()),re=Vt);for(let he=0;he<re.length;he++){const Se=ie(I,re[he],$||S.handleEvent,!1,S.h||S);if(!Se)break;S.g[Se.key]=Se}S=v.J?F(v.J):{},v.u?(v.v||(v.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,S)):(v.v="GET",v.g.ea(v.B,v.v,null,S)),bi(),te(v.i,v.v,v.B,v.l,v.S,v.u)}Gi.prototype.ba=function(v){v=v.target;const S=this.O;S&&Yi(v)==3?S.j():this.Y(v)},Gi.prototype.Y=function(v){try{if(v==this.g)e:{const tt=Yi(this.g),yn=this.g.ya(),Et=this.g.ca();if(!(tt<3)&&(tt!=3||this.g&&(this.h.h||this.g.la()||ir(this.g)))){this.K||tt!=4||yn==7||(yn==8||Et<=0?bi(3):bi(2)),bs(this);var S=this.g.ca();this.X=S;var I=R0(this);if(this.o=S==200,Ve(this.i,this.v,this.B,this.l,this.S,tt,S),this.o){if(this.U&&!this.L){t:{if(this.g){var $,re=this.g;if(($=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V($)){var he=$;break t}}he=null}if(v=he)yt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xs(this,v);else{this.o=!1,this.m=3,ln(12),ni(this),ji(this);break e}}if(this.R){v=!0;let Xt;for(;!this.K&&this.C<I.length;)if(Xt=Om(this,I),Xt==Gn){tt==4&&(this.m=4,ln(14),v=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==En){this.m=4,ln(15),yt(this.i,this.l,I,"[Invalid Chunk]"),v=!1;break}else yt(this.i,this.l,Xt,null),xs(this,Xt);if(Im(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||I.length!=0||this.h.h||(this.m=1,ln(16),v=!1),this.o=this.o&&v,!v)yt(this.i,this.l,I,"[Invalid Chunked Response]"),ni(this),ji(this);else if(I.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),ef(Se),Se.P=!0,ln(11))}}else yt(this.i,this.l,I,null),xs(this,I);tt==4&&ni(this),this.o&&!this.K&&(tt==4?Vm(this.j,this):(this.o=!1,ys(this)))}else ca(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),ni(this),ji(this)}}}catch{}};function R0(v){if(!Im(v))return v.g.la();const S=ir(v.g);if(S==="")return"";let I="";const $=S.length,re=Yi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return ni(v),ji(v),"";v.h.i=new c.TextDecoder}for(let he=0;he<$;he++)v.h.h=!0,I+=v.h.i.decode(S[he],{stream:!(re&&he==$-1)});return S.length=0,v.h.g+=I,v.C=0,v.h.g}function Im(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Om(v,S){var I=v.C,$=S.indexOf(`
`,I);return $==-1?Gn:(I=Number(S.substring(I,$)),isNaN(I)?En:($+=1,$+I>S.length?Gn:(S=S.slice($,$+I),v.C=$+I,S)))}Gi.prototype.cancel=function(){this.K=!0,ni(this)};function ys(v){v.T=Date.now()+v.H,Wc(v,v.H)}function Wc(v,S){if(v.D!=null)throw Error("WatchDog timer not null");v.D=gr(h(v.aa,v),S)}function bs(v){v.D&&(c.clearTimeout(v.D),v.D=null)}Gi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Hn(this.i,this.B),this.M!=2&&(bi(),ln(17)),ni(this),this.m=2,ji(this)):Wc(this,this.T-v)};function ji(v){v.j.I==0||v.K||Vm(v.j,v)}function ni(v){bs(v);var S=v.O;S&&typeof S.dispose=="function"&&S.dispose(),v.O=null,zn(v.V),v.g&&(S=v.g,v.g=null,S.abort(),S.dispose())}function xs(v,S){try{var I=v.j;if(I.I!=0&&(I.g==v||js(I.h,v))){if(!v.L&&js(I.h,v)&&I.I==3){try{var $=I.Ba.g.parse(S)}catch{$=null}if(Array.isArray($)&&$.length==3){var re=$;if(re[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<v.F)ru(I),vo(I);else break e;Ml(I),ln(18)}}else I.xa=re[1],0<I.xa-I.K&&re[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=gr(h(I.Va,I),6e3));_s(I.h)<=1&&I.ta&&(I.ta=void 0)}else Ts(I,11)}else if((v.L||I.g==v)&&ru(I),!V(S))for(re=I.Ba.g.parse(S),S=0;S<re.length;S++){let Et=re[S];const Xt=Et[0];if(!(Xt<=I.K))if(I.K=Xt,Et=Et[1],I.I==2)if(Et[0]=="c"){I.M=Et[1],I.ba=Et[2];const Ni=Et[3];Ni!=null&&(I.ka=Ni,I.j.info("VER="+I.ka));const Cs=Et[4];Cs!=null&&(I.za=Cs,I.j.info("SVER="+I.za));const Xi=Et[5];Xi!=null&&typeof Xi=="number"&&Xi>0&&($=1.5*Xi,I.O=$,I.j.info("backChannelRequestTimeoutMs_="+$)),$=I;const Ji=v.g;if(Ji){const zl=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var he=$.h;he.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Bd(he,he.h),he.h=null))}if($.G){const iu=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&($.wa=iu,Tt($.J,$.G,iu))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-v.F,I.j.info("Handshake RTT: "+I.T+"ms")),$=I;var Se=v;if($.na=Fm($,$.L?$.ba:null,$.W),Se.L){$d($.h,Se);var tt=Se,yn=$.O;yn&&(tt.H=yn),tt.D&&(bs(tt),ys(tt)),$.g=Se}else qm($);I.i.length>0&&As(I)}else Et[0]!="stop"&&Et[0]!="close"||Ts(I,7);else I.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?Ts(I,7):Jd(I):Et[0]!="noop"&&I.l&&I.l.qa(Et),I.A=0)}}bi(4)}catch{}}var Nn=class{constructor(v,S){this.g=v,this.map=S}};function Ud(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function _s(v){return v.h?1:v.g?v.g.size:0}function js(v,S){return v.h?v.h==S:v.g?v.g.has(S):!1}function Bd(v,S){v.g?v.g.add(S):v.h=S}function $d(v,S){v.h&&v.h==S?v.h=null:v.g&&v.g.has(S)&&v.g.delete(S)}Ud.prototype.cancel=function(){if(this.i=Fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Fd(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let S=v.i;for(const I of v.g.values())S=S.concat(I.G);return S}return x(v.i)}var Rm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yc(v,S){if(v){v=v.split("&");for(let I=0;I<v.length;I++){const $=v[I].indexOf("=");let re,he=null;$>=0?(re=v[I].substring(0,$),he=v[I].substring($+1)):re=v[I],S(re,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function ri(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;v instanceof ri?(this.l=v.l,Kn(this,v.j),this.o=v.o,this.g=v.g,co(this,v.u),this.h=v.h,Hd(this,zm(v.i)),this.m=v.m):v&&(S=String(v).match(Rm))?(this.l=!1,Kn(this,S[1]||"",!0),this.o=ws(S[2]||""),this.g=ws(S[3]||"",!0),co(this,S[4]),this.h=ws(S[5]||"",!0),Hd(this,S[6]||"",!0),this.m=ws(S[7]||"")):(this.l=!1,this.i=new fo(null,this.l))}ri.prototype.toString=function(){const v=[];var S=this.j;S&&v.push(Pl(S,Xc,!0),":");var I=this.g;return(I||S=="file")&&(v.push("//"),(S=this.o)&&v.push(Pl(S,Xc,!0),"@"),v.push(oa(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&v.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&v.push("/"),v.push(Pl(I,I.charAt(0)=="/"?Gd:km,!0))),(I=this.i.toString())&&v.push("?",I),(I=this.m)&&v.push("#",Pl(I,Dm)),v.join("")},ri.prototype.resolve=function(v){const S=Sn(this);let I=!!v.j;I?Kn(S,v.j):I=!!v.o,I?S.o=v.o:I=!!v.g,I?S.g=v.g:I=v.u!=null;var $=v.h;if(I)co(S,v.u);else if(I=!!v.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var re=S.h.lastIndexOf("/");re!=-1&&($=S.h.slice(0,re+1)+$)}if(re=$,re==".."||re==".")$="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){$=re.lastIndexOf("/",0)==0,re=re.split("/");const he=[];for(let Se=0;Se<re.length;){const tt=re[Se++];tt=="."?$&&Se==re.length&&he.push(""):tt==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),$&&Se==re.length&&he.push("")):(he.push(tt),$=!0)}$=he.join("/")}else $=re}return I?S.h=$:I=v.i.toString()!=="",I?Hd(S,zm(v.i)):I=!!v.m,I&&(S.m=v.m),S};function Sn(v){return new ri(v)}function Kn(v,S,I){v.j=I?ws(S,!0):S,v.j&&(v.j=v.j.replace(/:$/,""))}function co(v,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);v.u=S}else v.u=null}function Hd(v,S,I){S instanceof fo?(v.i=S,Zc(v.i,v.l)):(I||(S=Pl(S,uo)),v.i=new fo(S,v.l))}function Tt(v,S,I){v.i.set(S,I)}function Cl(v){return Tt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function ws(v,S){return v?S?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Pl(v,S,I){return typeof v=="string"?(v=encodeURI(v).replace(S,Br),I&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Br(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Xc=/[#\/\?@]/g,km=/[#\?:]/g,Gd=/[#\?]/g,uo=/[#\?@]/g,Dm=/#/g;function fo(v,S){this.h=this.g=null,this.i=v||null,this.j=!!S}function $r(v){v.g||(v.g=new Map,v.h=0,v.i&&Yc(v.i,function(S,I){v.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}t=fo.prototype,t.add=function(v,S){$r(this),this.i=null,v=ho(this,v);let I=this.g.get(v);return I||this.g.set(v,I=[]),I.push(S),this.h+=1,this};function Mm(v,S){$r(v),S=ho(v,S),v.g.has(S)&&(v.i=null,v.h-=v.g.get(S).length,v.g.delete(S))}function Kd(v,S){return $r(v),S=ho(v,S),v.g.has(S)}t.forEach=function(v,S){$r(this),this.g.forEach(function(I,$){I.forEach(function(re){v.call(S,re,$,this)},this)},this)};function Qd(v,S){$r(v);let I=[];if(typeof S=="string")Kd(v,S)&&(I=I.concat(v.g.get(ho(v,S))));else for(v=Array.from(v.g.values()),S=0;S<v.length;S++)I=I.concat(v[S]);return I}t.set=function(v,S){return $r(this),this.i=null,v=ho(this,v),Kd(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[S]),this.h+=1,this},t.get=function(v,S){return v?(v=Qd(this,v),v.length>0?String(v[0]):S):S};function Jc(v,S,I){Mm(v,S),I.length>0&&(v.i=null,v.g.set(ho(v,S),x(I)),v.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],S=Array.from(this.g.keys());for(let $=0;$<S.length;$++){var I=S[$];const re=oa(I);I=Qd(this,I);for(let he=0;he<I.length;he++){let Se=re;I[he]!==""&&(Se+="="+oa(I[he])),v.push(Se)}}return this.i=v.join("&")};function zm(v){const S=new fo;return S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),S}function ho(v,S){return S=String(S),v.j&&(S=S.toLowerCase()),S}function Zc(v,S){S&&!v.j&&($r(v),v.i=null,v.g.forEach(function(I,$){const re=$.toLowerCase();$!=re&&(Mm(this,$),Jc(this,re,I))},v)),v.j=S}function Qi(v,S){const I=new ti;if(c.Image){const $=new Image;$.onload=p(wi,I,"TestLoadImage: loaded",!0,S,$),$.onerror=p(wi,I,"TestLoadImage: error",!1,S,$),$.onabort=p(wi,I,"TestLoadImage: abort",!1,S,$),$.ontimeout=p(wi,I,"TestLoadImage: timeout",!1,S,$),c.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=v}else S(!1)}function Wd(v,S){const I=new ti,$=new AbortController,re=setTimeout(()=>{$.abort(),wi(I,"TestPingServer: timeout",!1,S)},1e4);fetch(v,{signal:$.signal}).then(he=>{clearTimeout(re),he.ok?wi(I,"TestPingServer: ok",!0,S):wi(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),wi(I,"TestPingServer: error",!1,S)})}function wi(v,S,I,$,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),$(I)}catch{}}function mo(){this.g=new Ur}function Es(v){this.i=v.Sb||null,this.h=v.ab||!1}g(Es,Hi),Es.prototype.g=function(){return new Il(this.i,this.h)};function Il(v,S){Rt.call(this),this.H=v,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Il,Rt),t=Il.prototype,t.open=function(v,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=S,this.readyState=1,Wi(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(S.body=v),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,po(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eu(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function eu(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var S=v.value?v.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!v.done}))&&(this.response=this.responseText+=S)}v.done?po(this):Wi(this),this.readyState==3&&eu(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,po(this))},t.Na=function(v){this.g&&(this.response=v,po(this))},t.ga=function(){this.g&&po(this)};function po(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Wi(v)}t.setRequestHeader=function(v,S){this.A.append(v,S)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,v.push(I[0]+": "+I[1]),I=S.next();return v.join(`\r
`)};function Wi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ei(v){let S="";return we(v,function(I,$){S+=$,S+=":",S+=I,S+=`\r
`}),S}function Ol(v,S,I){e:{for($ in I){var $=!1;break e}$=!0}$||(I=Ei(I),typeof v=="string"?I!=null&&oa(I):Tt(v,S,I))}function Dt(v){Rt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Dt,Rt);var Ns=/^https?$/i,Yd=["POST","PUT"];t=Dt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,S,I,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);S=S?S.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qd.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(v),!0),this.B=!1}catch(he){Rl(this,he);return}if(v=I||"",I=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var re in $)I.set(re,$[re]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const he of $.keys())I.set(he,$.get(he));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(I.keys()).find(he=>he.toLowerCase()=="content-type"),re=c.FormData&&v instanceof c.FormData,!(Array.prototype.indexOf.call(Yd,S,void 0)>=0)||$||re||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Se]of I)this.g.setRequestHeader(he,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(he){Rl(this,he)}};function Rl(v,S){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=S,v.o=5,Xd(v),la(v)}function Xd(v){v.A||(v.A=!0,kt(v,"complete"),kt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,kt(this,"complete"),kt(this,"abort"),la(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kl(this):this.Xa())},t.Xa=function(){kl(this)};function kl(v){if(v.h&&typeof a<"u"){if(v.v&&Yi(v)==4)setTimeout(v.Ca.bind(v),0);else if(kt(v,"readystatechange"),Yi(v)==4){v.h=!1;try{const he=v.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var $;if($=he===0){let Se=String(v.D).match(Rm)[1]||null;!Se&&c.self&&c.self.location&&(Se=c.self.location.protocol.slice(0,-1)),$=!Ns.test(Se?Se.toLowerCase():"")}I=$}if(I)kt(v,"complete"),kt(v,"success");else{v.o=6;try{var re=Yi(v)>2?v.g.statusText:""}catch{re=""}v.l=re+" ["+v.ca()+"]",Xd(v)}}finally{la(v)}}}}function la(v,S){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const I=v.g;v.g=null,S||kt(v,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yi(v){return v.g?v.g.readyState:0}t.ca=function(){try{return Yi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var S=this.g.responseText;return v&&S.indexOf(v)==0&&(S=S.substring(v.length)),oo(S)}};function ir(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(v){const S={};v=(v.g&&Yi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<v.length;$++){if(V(v[$]))continue;var I=Pm(v[$]);const re=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const he=S[re]||[];S[re]=he,he.push(I)}W(S,function($){return $.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(v,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[v]||S}function go(v){this.za=0,this.i=[],this.j=new ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ss("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ss("baseRetryDelayMs",5e3,v),this.Za=Ss("retryDelaySeedMs",1e4,v),this.Ta=Ss("forwardChannelMaxRetries",2,v),this.va=Ss("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Ud(v&&v.concurrentRequestLimit),this.Ba=new mo,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=go.prototype,t.ka=8,t.I=1,t.connect=function(v,S,I,$){ln(0),this.W=v,this.H=S||{},I&&$!==void 0&&(this.H.OSID=I,this.H.OAID=$),this.F=this.X,this.J=Fm(this,null,this.W),As(this)};function Jd(v){if(tu(v),v.I==3){var S=v.V++,I=Sn(v.J);if(Tt(I,"SID",v.M),Tt(I,"RID",S),Tt(I,"TYPE","terminate"),Dl(v,I),S=new Gi(v,v.j,S),S.M=2,S.A=Cl(Sn(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=S.A,I=!0),I||(S.g=Hm(S.j,null),S.g.ea(S.A)),S.F=Date.now(),ys(S)}$m(v)}function vo(v){v.g&&(ef(v),v.g.cancel(),v.g=null)}function tu(v){vo(v),v.v&&(c.clearTimeout(v.v),v.v=null),ru(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&c.clearTimeout(v.m),v.m=null)}function As(v){if(!Vd(v.h)&&!v.m){v.m=!0;var S=v.Ea;M||O(),B||(M(),B=!0),D.add(S,v),v.D=0}}function nu(v,S){return _s(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=S.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=gr(h(v.Ea,v,S),Bm(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const re=new Gi(this,this.j,v);let he=this.o;if(this.U&&(he?(he=F(he),ue(he,this.U)):he=this.U),this.u!==null||this.R||(re.J=he,he=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var $=this.i[I];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(S+=$,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=Lm(this,re,S),I=Sn(this.J),Tt(I,"RID",v),Tt(I,"CVER",22),this.G&&Tt(I,"X-HTTP-Session-Id",this.G),Dl(this,I),he&&(this.R?S="headers="+oa(Ei(he))+"&"+S:this.u&&Ol(I,this.u,he)),Bd(this.h,re),this.Ra&&Tt(I,"TYPE","init"),this.S?(Tt(I,"$req",S),Tt(I,"SID","null"),re.U=!0,vs(re,I,null)):vs(re,I,S),this.I=2}}else this.I==3&&(v?Zd(this,v):this.i.length==0||Vd(this.h)||Zd(this))};function Zd(v,S){var I;S?I=S.l:I=v.V++;const $=Sn(v.J);Tt($,"SID",v.M),Tt($,"RID",I),Tt($,"AID",v.K),Dl(v,$),v.u&&v.o&&Ol($,v.u,v.o),I=new Gi(v,v.j,I,v.D+1),v.u===null&&(I.J=v.o),S&&(v.i=S.G.concat(v.i)),S=Lm(v,I,1e3),I.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Bd(v.h,I),vs(I,$,S)}function Dl(v,S){v.H&&we(v.H,function(I,$){Tt(S,$,I)}),v.l&&we({},function(I,$){Tt(S,$,I)})}function Lm(v,S,I){I=Math.min(v.i.length,I);const $=v.l?h(v.l.Ka,v.l,v):null;e:{var re=v.i;let tt=-1;for(;;){const yn=["count="+I];tt==-1?I>0?(tt=re[0].g,yn.push("ofs="+tt)):tt=0:yn.push("ofs="+tt);let Et=!0;for(let Xt=0;Xt<I;Xt++){var he=re[Xt].g;const Ni=re[Xt].map;if(he-=tt,he<0)tt=Math.max(0,re[Xt].g-100),Et=!1;else try{he="req"+he+"_"||"";try{var Se=Ni instanceof Map?Ni:Object.entries(Ni);for(const[Cs,Xi]of Se){let Ji=Xi;u(Xi)&&(Ji=qr(Xi)),yn.push(he+Cs+"="+encodeURIComponent(Ji))}}catch(Cs){throw yn.push(he+"type="+encodeURIComponent("_badmap")),Cs}}catch{$&&$(Ni)}}if(Et){Se=yn.join("&");break e}}Se=void 0}return v=v.i.splice(0,I),S.G=v,Se}function qm(v){if(!v.g&&!v.v){v.Y=1;var S=v.Da;M||O(),B||(M(),B=!0),D.add(S,v),v.A=0}}function Ml(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=gr(h(v.Da,v),Bm(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,Um(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=gr(h(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),vo(this),Um(this))};function ef(v){v.B!=null&&(c.clearTimeout(v.B),v.B=null)}function Um(v){v.g=new Gi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var S=Sn(v.na);Tt(S,"RID","rpc"),Tt(S,"SID",v.M),Tt(S,"AID",v.K),Tt(S,"CI",v.F?"0":"1"),!v.F&&v.ia&&Tt(S,"TO",v.ia),Tt(S,"TYPE","xmlhttp"),Dl(v,S),v.u&&v.o&&Ol(S,v.u,v.o),v.O&&(v.g.H=v.O);var I=v.g;v=v.ba,I.M=1,I.A=Cl(Sn(S)),I.u=null,I.R=!0,Qc(I,v)}t.Va=function(){this.C!=null&&(this.C=null,vo(this),Ml(this),ln(19))};function ru(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function Vm(v,S){var I=null;if(v.g==S){ru(v),ef(v),v.g=null;var $=2}else if(js(v.h,S))I=S.G,$d(v.h,S),$=1;else return;if(v.I!=0){if(S.o)if($==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var re=v.D;$=lo(),kt($,new xi($,I)),As(v)}else qm(v);else if(re=S.m,re==3||re==0&&S.X>0||!($==1&&nu(v,S)||$==2&&Ml(v)))switch(I&&I.length>0&&(S=v.h,S.i=S.i.concat(I)),re){case 1:Ts(v,5);break;case 4:Ts(v,10);break;case 3:Ts(v,6);break;default:Ts(v,2)}}}function Bm(v,S){let I=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(I*=2),I*S}function Ts(v,S){if(v.j.info("Error code "+S),S==2){var I=h(v.bb,v),$=v.Ua;const re=!$;$=new ri($||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Kn($,"https"),Cl($),re?Qi($.toString(),I):Wd($.toString(),I)}else ln(2);v.I=0,v.l&&v.l.pa(S),$m(v),tu(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function $m(v){if(v.I=0,v.ja=[],v.l){const S=Fd(v.h);(S.length!=0||v.i.length!=0)&&(E(v.ja,S),E(v.ja,v.i),v.h.i.length=0,x(v.i),v.i.length=0),v.l.oa()}}function Fm(v,S,I){var $=I instanceof ri?Sn(I):new ri(I);if($.g!="")S&&($.g=S+"."+$.g),co($,$.u);else{var re=c.location;$=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;const he=new ri(null);$&&Kn(he,$),S&&(he.g=S),re&&co(he,re),I&&(he.h=I),$=he}return I=v.G,S=v.wa,I&&S&&Tt($,I,S),Tt($,"VER",v.ka),Dl(v,$),$}function Hm(v,S,I){if(S&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=v.Aa&&!v.ma?new Dt(new Es({ab:I})):new Dt(v.ma),S.Fa(v.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gm(){}t=Gm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yo(){}yo.prototype.g=function(v,S){return new Ar(v,S)};function Ar(v,S){Rt.call(this),this.g=new go(S),this.l=v,this.h=S&&S.messageUrlParams||null,v=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(v?v["X-WebChannel-Content-Type"]=S.messageContentType:v={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(v?v["X-WebChannel-Client-Profile"]=S.sa:v={"X-WebChannel-Client-Profile":S.sa}),this.g.U=v,(v=S&&S.Qb)&&!V(v)&&(this.g.u=v),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!V(S)&&(this.g.G=S,v=this.h,v!==null&&S in v&&(v=this.h,S in v&&delete v[S])),this.j=new ua(this)}g(Ar,Rt),Ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){Jd(this.g)},Ar.prototype.o=function(v){var S=this.g;if(typeof v=="string"){var I={};I.__data__=v,v=I}else this.v&&(I={},I.__data__=qr(v),v=I);S.i.push(new Nn(S.Ya++,v)),S.I==3&&As(S)},Ar.prototype.N=function(){this.g.l=null,delete this.j,Jd(this.g),delete this.g,Ar.Z.N.call(this)};function Km(v){At.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var S=v.__sm__;if(S){e:{for(const I in S){v=I;break e}v=void 0}(this.i=v)&&(v=this.i,S=S!==null&&v in S?S[v]:void 0),this.data=S}else this.data=v}g(Km,At);function Qm(){Vr.call(this),this.status=1}g(Qm,Vr);function ua(v){this.g=v}g(ua,Gm),ua.prototype.ra=function(){kt(this.g,"a")},ua.prototype.qa=function(v){kt(this.g,new Km(v))},ua.prototype.pa=function(v){kt(this.g,new Qm)},ua.prototype.oa=function(){kt(this.g,"b")},yo.prototype.createWebChannel=yo.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,fz=function(){return new yo},dz=function(){return lo()},uz=nn,X1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,Og=_i,Ld.COMPLETE="complete",cz=Ld,Gc.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,th=Gc,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,lz=Dt}).apply(typeof Zp<"u"?Zp:typeof self<"u"?self:typeof window<"u"?window:{});let xr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let wd="12.8.0";function PF(t){wd=t}const wc=new Aw("@firebase/firestore");function qu(){return wc.logLevel}function Pe(t,...e){if(wc.logLevel<=ut.DEBUG){const n=e.map(Lw);wc.debug(`Firestore (${wd}): ${t}`,...n)}}function Ua(t,...e){if(wc.logLevel<=ut.ERROR){const n=e.map(Lw);wc.error(`Firestore (${wd}): ${t}`,...n)}}function rd(t,...e){if(wc.logLevel<=ut.WARN){const n=e.map(Lw);wc.warn(`Firestore (${wd}): ${t}`,...n)}}function Lw(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ke(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,hz(t,r,n)}function hz(t,e,n){let r=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ua(r),new Error(r)}function St(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||hz(e,i,r)}function Ze(t,e){return t}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Da{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class mz{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xr.UNAUTHENTICATED)))}shutdown(){}}class OF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class RF{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){St(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Da,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},u=f=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Da)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new mz(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new xr(e)}}class kF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class DF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new kF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class R2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){St(this.o===void 0,3512);const r=a=>{a.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new R2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new R2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function zF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class qw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zF(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function dt(t,e){return t<e?-1:t>e?1:0}function J1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return Vx(i)===Vx(a)?dt(i,a):Vx(i)?1:-1}return dt(t.length,e.length)}const LF=55296,qF=57343;function Vx(t){const e=t.charCodeAt(0);return e>=LF&&e<=qF}function id(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const k2="__name__";class Ls{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ke(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ke(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ls.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Ls.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return dt(e.length,n.length)}static compareSegments(e,n){const r=Ls.isNumericId(e),i=Ls.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ls.extractNumericId(e).compare(Ls.extractNumericId(n)):J1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return il.fromString(e.substring(4,e.length-2))}}class Kt extends Ls{construct(e,n,r){return new Kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Kt(n)}static emptyPath(){return new Kt([])}}const UF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Ls{construct(e,n,r){return new fr(e,n,r)}static isValidIdentifier(e){return UF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k2}static keyField(){return new fr([k2])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ae(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Ae(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ae(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(a(),i++)}if(a(),c)throw new Ae(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(n)}static emptyPath(){return new fr([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Kt.fromString(e))}static fromName(e){return new Ue(Kt.fromString(e).popFirst(5))}static empty(){return new Ue(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Kt(e.slice()))}}function pz(t,e,n){if(!n)throw new Ae(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VF(t,e,n,r){if(e===!0&&r===!0)throw new Ae(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function D2(t){if(!Ue.isDocumentKey(t))throw new Ae(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function M2(t){if(Ue.isDocumentKey(t))throw new Ae(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gz(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ke(12329,{type:typeof t})}function Or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yy(t);throw new Ae(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BF(t,e){if(e<=0)throw new Ae(xe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function kn(t,e){const n={typeString:t};return e&&(n.value=e),n}function tm(t,e){if(!gz(t))throw new Ae(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ae(xe.INVALID_ARGUMENT,n);return!0}const z2=-62135596800,L2=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*L2);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<z2)throw new Ae(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L2}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tm(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:kn("string",Xe._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Xe(0,0))}static max(){return new Ye(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wh=-1;function $F(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new cl(i,Ue.empty(),e)}function FF(t){return new cl(t.readTime,t.key,wh)}class cl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cl(Ye.min(),Ue.empty(),wh)}static max(){return new cl(Ye.max(),Ue.empty(),wh)}}function HF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ue.comparator(t.documentKey,e.documentKey),n!==0?n:dt(t.largestBatchId,e.largestBatchId))}const GF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ed(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==GF)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ee(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ee?n:Ee.resolve(n)}catch(n){return Ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ee.reject(n)}static resolve(e){return new Ee(((n,r)=>{n(e)}))}static reject(e){return new Ee(((n,r)=>{r(e)}))}static waitFor(e){return new Ee(((n,r)=>{let i=0,a=0,c=!1;e.forEach((u=>{++i,u.next((()=>{++a,c&&a===i&&n()}),(f=>r(f)))})),c=!0,a===i&&n()}))}static or(e){let n=Ee.resolve(!1);for(const r of e)n=n.next((i=>i?Ee.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Ee(((r,i)=>{const a=e.length,c=new Array(a);let u=0;for(let f=0;f<a;f++){const h=f;n(e[h]).next((p=>{c[h]=p,++u,u===a&&r(c)}),(p=>i(p)))}}))}static doWhile(e,n){return new Ee(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function QF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nd(t){return t.name==="IndexedDbTransactionError"}class by{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}by.ce=-1;const Uw=-1;function xy(t){return t==null}function tv(t){return t===0&&1/t==-1/0}function WF(t){return typeof t=="number"&&Number.isInteger(t)&&!tv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const vz="";function YF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=q2(e)),e=XF(t.get(n),e);return q2(e)}function XF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case vz:n+="";break;default:n+=a}}return n}function q2(t){return t+vz+""}function U2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _l(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class rn{constructor(e,n){this.comparator=e,this.root=n||dr.EMPTY}insert(e,n){return new rn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eg(this.root,e,this.comparator,!0)}}class eg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??dr.RED,this.left=i??dr.EMPTY,this.right=a??dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new dr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1;dr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new dr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V2(this.data.getIterator())}getIteratorFrom(e){return new V2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class V2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hi{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Un(fr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return id(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class bz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new bz("Invalid base64 string: "+a):a}})(e);return new mr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new mr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const JF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(t){if(St(!!t,39018),typeof t=="string"){let e=0;const n=JF.exec(t);if(St(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(t.seconds),nanos:_n(t.nanos)}}function _n(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dl(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}const xz="server_timestamp",_z="__type__",jz="__previous_value__",wz="__local_write_time__";function Vw(t){return(t?.mapValue?.fields||{})[_z]?.stringValue===xz}function _y(t){const e=t.mapValue.fields[jz];return Vw(e)?_y(e):e}function Eh(t){const e=ul(t.mapValue.fields[wz].timestampValue);return new Xe(e.seconds,e.nanos)}class ZF{constructor(e,n,r,i,a,c,u,f,h,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=g}}const nv="(default)";class Nh{constructor(e,n){this.projectId=e,this.database=n||nv}static empty(){return new Nh("","")}get isDefaultDatabase(){return this.database===nv}isEqual(e){return e instanceof Nh&&e.projectId===this.projectId&&e.database===this.database}}function eH(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ae(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nh(t.options.projectId,e)}const Ez="__type__",tH="__max__",tg={mapValue:{}},Nz="__vector__",rv="value";function fl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vw(t)?4:rH(t)?9007199254740991:nH(t)?10:11:Ke(28295,{value:t})}function Ys(t,e){if(t===e)return!0;const n=fl(t);if(n!==fl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eh(t).isEqual(Eh(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=ul(i.timestampValue),u=ul(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return dl(i.bytesValue).isEqual(dl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return _n(i.geoPointValue.latitude)===_n(a.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return _n(i.integerValue)===_n(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=_n(i.doubleValue),u=_n(a.doubleValue);return c===u?tv(c)===tv(u):isNaN(c)&&isNaN(u)}return!1})(t,e);case 9:return id(t.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},u=a.mapValue.fields||{};if(U2(c)!==U2(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!Ys(c[f],u[f])))return!1;return!0})(t,e);default:return Ke(52216,{left:t})}}function Sh(t,e){return(t.values||[]).find((n=>Ys(n,e)))!==void 0}function sd(t,e){if(t===e)return 0;const n=fl(t),r=fl(e);if(n!==r)return dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(t.booleanValue,e.booleanValue);case 2:return(function(a,c){const u=_n(a.integerValue||a.doubleValue),f=_n(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(t,e);case 3:return B2(t.timestampValue,e.timestampValue);case 4:return B2(Eh(t),Eh(e));case 5:return J1(t.stringValue,e.stringValue);case 6:return(function(a,c){const u=dl(a),f=dl(c);return u.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,c){const u=a.split("/"),f=c.split("/");for(let h=0;h<u.length&&h<f.length;h++){const p=dt(u[h],f[h]);if(p!==0)return p}return dt(u.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,c){const u=dt(_n(a.latitude),_n(c.latitude));return u!==0?u:dt(_n(a.longitude),_n(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return $2(t.arrayValue,e.arrayValue);case 10:return(function(a,c){const u=a.fields||{},f=c.fields||{},h=u[rv]?.arrayValue,p=f[rv]?.arrayValue,g=dt(h?.values?.length||0,p?.values?.length||0);return g!==0?g:$2(h,p)})(t.mapValue,e.mapValue);case 11:return(function(a,c){if(a===tg.mapValue&&c===tg.mapValue)return 0;if(a===tg.mapValue)return 1;if(c===tg.mapValue)return-1;const u=a.fields||{},f=Object.keys(u),h=c.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let g=0;g<f.length&&g<p.length;++g){const y=J1(f[g],p[g]);if(y!==0)return y;const x=sd(u[f[g]],h[p[g]]);if(x!==0)return x}return dt(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Ke(23264,{he:n})}}function B2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dt(t,e);const n=ul(t),r=ul(e),i=dt(n.seconds,r.seconds);return i!==0?i:dt(n.nanos,r.nanos)}function $2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=sd(n[i],r[i]);if(a)return a}return dt(n.length,r.length)}function ad(t){return Z1(t)}function Z1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ul(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ue.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Z1(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Z1(n.fields[c])}`;return i+"}"})(t.mapValue):Ke(61005,{value:t})}function Rg(t){switch(fl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_y(t);return e?16+Rg(e):16;case 5:return 2*t.stringValue.length;case 6:return dl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Rg(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return _l(r.fields,((a,c)=>{i+=a.length+Rg(c)})),i})(t.mapValue);default:throw Ke(13486,{value:t})}}function F2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ej(t){return!!t&&"integerValue"in t}function Bw(t){return!!t&&"arrayValue"in t}function H2(t){return!!t&&"nullValue"in t}function G2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kg(t){return!!t&&"mapValue"in t}function nH(t){return(t?.mapValue?.fields||{})[Ez]?.stringValue===Nz}function fh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _l(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=fh(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fh(t.arrayValue.values[n]);return e}return{...t}}function rH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tH}class Yr{constructor(e){this.value=e}static empty(){return new Yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fh(n)}setAll(e){let n=fr.emptyPath(),r={},i=[];e.forEach(((c,u)=>{if(!n.isImmediateParentOf(u)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=fh(c):i.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());kg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];kg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_l(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Yr(fh(this.value))}}function Sz(t){const e=[];return _l(t.fields,((n,r)=>{const i=new fr([n]);if(kg(r)){const a=Sz(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new hi(e)}class _r{constructor(e,n,r,i,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new _r(e,0,Ye.min(),Ye.min(),Ye.min(),Yr.empty(),0)}static newFoundDocument(e,n,r,i){return new _r(e,1,n,Ye.min(),r,i,0)}static newNoDocument(e,n){return new _r(e,2,n,Ye.min(),Ye.min(),Yr.empty(),0)}static newUnknownDocument(e,n){return new _r(e,3,n,Ye.min(),Ye.min(),Yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iv{constructor(e,n){this.position=e,this.inclusive=n}}function K2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],c=t.position[i];if(a.field.isKeyField()?r=Ue.comparator(Ue.fromName(c.referenceValue),n.key):r=sd(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Q2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ys(t.position[n],e.position[n]))return!1;return!0}class Ah{constructor(e,n="asc"){this.field=e,this.dir=n}}function iH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Az{}class Rn extends Az{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aH(e,n,r):n==="array-contains"?new cH(e,r):n==="in"?new uH(e,r):n==="not-in"?new dH(e,r):n==="array-contains-any"?new fH(e,r):new Rn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oH(e,r):new lH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sd(n,this.value)):n!==null&&fl(this.value)===fl(n)&&this.matchesComparison(sd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends Az{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fs(e,n)}matches(e){return Tz(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tz(t){return t.op==="and"}function Cz(t){return sH(t)&&Tz(t)}function sH(t){for(const e of t.filters)if(e instanceof fs)return!1;return!0}function tj(t){if(t instanceof Rn)return t.field.canonicalString()+t.op.toString()+ad(t.value);if(Cz(t))return t.filters.map((e=>tj(e))).join(",");{const e=t.filters.map((n=>tj(n))).join(",");return`${t.op}(${e})`}}function Pz(t,e){return t instanceof Rn?(function(r,i){return i instanceof Rn&&r.op===i.op&&r.field.isEqual(i.field)&&Ys(r.value,i.value)})(t,e):t instanceof fs?(function(r,i){return i instanceof fs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,u)=>a&&Pz(c,i.filters[u])),!0):!1})(t,e):void Ke(19439)}function Iz(t){return t instanceof Rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${ad(n.value)}`})(t):t instanceof fs?(function(n){return n.op.toString()+" {"+n.getFilters().map(Iz).join(" ,")+"}"})(t):"Filter"}class aH extends Rn{constructor(e,n,r){super(e,n,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const n=Ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class oH extends Rn{constructor(e,n){super(e,"in",n),this.keys=Oz("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lH extends Rn{constructor(e,n){super(e,"not-in",n),this.keys=Oz("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Oz(t,e){return(e.arrayValue?.values||[]).map((n=>Ue.fromName(n.referenceValue)))}class cH extends Rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bw(n)&&Sh(n.arrayValue,this.value)}}class uH extends Rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sh(this.value.arrayValue,n)}}class dH extends Rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sh(this.value.arrayValue,n)}}class fH extends Rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Sh(this.value.arrayValue,r)))}}class hH{constructor(e,n=null,r=[],i=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=u,this.Te=null}}function W2(t,e=null,n=[],r=[],i=null,a=null,c=null){return new hH(t,e,n,r,i,a,c)}function $w(t){const e=Ze(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>tj(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),xy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ad(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ad(r))).join(",")),e.Te=n}return e.Te}function Fw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Pz(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Q2(t.startAt,e.startAt)&&Q2(t.endAt,e.endAt)}function nj(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Sd{constructor(e,n=null,r=[],i=[],a=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function mH(t,e,n,r,i,a,c,u){return new Sd(t,e,n,r,i,a,c,u)}function jy(t){return new Sd(t)}function Y2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pH(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Rz(t){return t.collectionGroup!==null}function hh(t){const e=Ze(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Un(fr.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ah(a,r))})),n.has(fr.keyField().canonicalString())||e.Ie.push(new Ah(fr.keyField(),r))}return e.Ie}function Gs(t){const e=Ze(t);return e.Ee||(e.Ee=gH(e,hh(t))),e.Ee}function gH(t,e){if(t.limitType==="F")return W2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Ah(i.field,a)}));const n=t.endAt?new iv(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new iv(t.startAt.position,t.startAt.inclusive):null;return W2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rj(t,e){const n=t.filters.concat([e]);return new Sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vH(t,e){const n=t.explicitOrderBy.concat([e]);return new Sd(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function sv(t,e,n){return new Sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wy(t,e){return Fw(Gs(t),Gs(e))&&t.limitType===e.limitType}function kz(t){return`${$w(Gs(t))}|lt:${t.limitType}`}function Uu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Iz(i))).join(", ")}]`),xy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>ad(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>ad(i))).join(",")),`Target(${r})`})(Gs(t))}; limitType=${t.limitType})`}function Ey(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ue.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of hh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(c,u,f){const h=K2(c,u,f);return c.inclusive?h<=0:h<0})(r.startAt,hh(r),i)||r.endAt&&!(function(c,u,f){const h=K2(c,u,f);return c.inclusive?h>=0:h>0})(r.endAt,hh(r),i))})(t,e)}function yH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Dz(t){return(e,n)=>{let r=!1;for(const i of hh(t)){const a=bH(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function bH(t,e,n){const r=t.field.isKeyField()?Ue.comparator(e.key,n.key):(function(a,c,u){const f=c.data.field(a),h=u.data.field(a);return f!==null&&h!==null?sd(f,h):Ke(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ke(19790,{direction:t.dir})}}class Lc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return yz(this.inner)}size(){return this.innerSize}}const xH=new rn(Ue.comparator);function Va(){return xH}const Mz=new rn(Ue.comparator);function nh(...t){let e=Mz;for(const n of t)e=e.insert(n.key,n);return e}function zz(t){let e=Mz;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ac(){return mh()}function Lz(){return mh()}function mh(){return new Lc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const _H=new rn(Ue.comparator),jH=new Un(Ue.comparator);function ft(...t){let e=jH;for(const n of t)e=e.add(n);return e}const wH=new Un(dt);function EH(){return wH}function Hw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tv(e)?"-0":e}}function qz(t){return{integerValue:""+t}}function Uz(t,e){return WF(e)?qz(e):Hw(t,e)}class Ny{constructor(){this._=void 0}}function NH(t,e,n){return t instanceof Th?(function(i,a){const c={fields:{[_z]:{stringValue:xz},[wz]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Vw(a)&&(a=_y(a)),a&&(c.fields[jz]=a),{mapValue:c}})(n,e):t instanceof Ch?Bz(t,e):t instanceof Ph?$z(t,e):(function(i,a){const c=Vz(i,a),u=X2(c)+X2(i.Ae);return ej(c)&&ej(i.Ae)?qz(u):Hw(i.serializer,u)})(t,e)}function SH(t,e,n){return t instanceof Ch?Bz(t,e):t instanceof Ph?$z(t,e):n}function Vz(t,e){return t instanceof Ih?(function(r){return ej(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Th extends Ny{}class Ch extends Ny{constructor(e){super(),this.elements=e}}function Bz(t,e){const n=Fz(e);for(const r of t.elements)n.some((i=>Ys(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Ph extends Ny{constructor(e){super(),this.elements=e}}function $z(t,e){let n=Fz(e);for(const r of t.elements)n=n.filter((i=>!Ys(i,r)));return{arrayValue:{values:n}}}class Ih extends Ny{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function X2(t){return _n(t.integerValue||t.doubleValue)}function Fz(t){return Bw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Hz{constructor(e,n){this.field=e,this.transform=n}}function AH(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ch&&i instanceof Ch||r instanceof Ph&&i instanceof Ph?id(r.elements,i.elements,Ys):r instanceof Ih&&i instanceof Ih?Ys(r.Ae,i.Ae):r instanceof Th&&i instanceof Th})(t.transform,e.transform)}class TH{constructor(e,n){this.version=e,this.transformResults=n}}class Rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sy{}function Gz(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ay(t.key,Rr.none()):new nm(t.key,t.data,Rr.none());{const n=t.data,r=Yr.empty();let i=new Un(fr.comparator);for(let a of e.fields)if(!i.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new jl(t.key,r,new hi(i.toArray()),Rr.none())}}function CH(t,e,n){t instanceof nm?(function(i,a,c){const u=i.value.clone(),f=Z2(i.fieldTransforms,a,c.transformResults);u.setAll(f),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(t,e,n):t instanceof jl?(function(i,a,c){if(!Dg(i.precondition,a))return void a.convertToUnknownDocument(c.version);const u=Z2(i.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(Kz(i)),f.setAll(u),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function ph(t,e,n,r){return t instanceof nm?(function(a,c,u,f){if(!Dg(a.precondition,c))return u;const h=a.value.clone(),p=eP(a.fieldTransforms,f,c);return h.setAll(p),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof jl?(function(a,c,u,f){if(!Dg(a.precondition,c))return u;const h=eP(a.fieldTransforms,f,c),p=c.data;return p.setAll(Kz(a)),p.setAll(h),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,c,u){return Dg(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(t,e,n)}function PH(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Vz(r.transform,i||null);a!=null&&(n===null&&(n=Yr.empty()),n.set(r.field,a))}return n||null}function J2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&id(r,i,((a,c)=>AH(a,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nm extends Sy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jl extends Sy{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Kz(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Z2(t,e,n){const r=new Map;St(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],c=a.transform,u=e.data.field(a.field);r.set(a.field,SH(c,u,n[i]))}return r}function eP(t,e,n){const r=new Map;for(const i of t){const a=i.transform,c=n.data.field(i.field);r.set(i.field,NH(a,c,e))}return r}class Ay extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IH extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OH{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&CH(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ph(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ph(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Lz();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(i.key)?null:u;const f=Gz(c,u);f!==null&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(Ye.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ft())}isEqual(e){return this.batchId===e.batchId&&id(this.mutations,e.mutations,((n,r)=>J2(n,r)))&&id(this.baseMutations,e.baseMutations,((n,r)=>J2(n,r)))}}class Gw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){St(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return _H})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Gw(e,n,r,i)}}class RH{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kH{constructor(e,n){this.count=e,this.unchangedNames=n}}var In,bt;function DH(t){switch(t){case xe.OK:return Ke(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return Ke(15467,{code:t})}}function Qz(t){if(t===void 0)return Ua("GRPC error has no .code"),xe.UNKNOWN;switch(t){case In.OK:return xe.OK;case In.CANCELLED:return xe.CANCELLED;case In.UNKNOWN:return xe.UNKNOWN;case In.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case In.INTERNAL:return xe.INTERNAL;case In.UNAVAILABLE:return xe.UNAVAILABLE;case In.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case In.NOT_FOUND:return xe.NOT_FOUND;case In.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case In.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case In.ABORTED:return xe.ABORTED;case In.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case In.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case In.DATA_LOSS:return xe.DATA_LOSS;default:return Ke(39323,{code:t})}}(bt=In||(In={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function MH(){return new TextEncoder}const zH=new il([4294967295,4294967295],0);function tP(t){const e=MH().encode(t),n=new oz;return n.update(e),new Uint8Array(n.digest())}function nP(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new il([n,r],0),new il([i,a],0)]}class Kw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rh(`Invalid padding: ${n}`);if(r<0)throw new rh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=il.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(il.fromNumber(r)));return i.compare(zH)===1&&(i=new il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tP(e),[r,i]=nP(n);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Kw(a,i,n);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const n=tP(e),[r,i]=nP(n);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.be(c)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ty{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ty(Ye.min(),i,new rn(dt),Va(),ft())}}class rm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rm(r,n,ft(),ft(),ft())}}class Mg{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Wz{constructor(e,n){this.targetId=e,this.Ce=n}}class Yz{constructor(e,n,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class rP{constructor(){this.ve=0,this.Fe=iP(),this.Me=mr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),n=ft(),r=ft();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ke(38017,{changeType:a})}})),new rm(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=iP()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class LH{constructor(e){this.Ge=e,this.ze=new Map,this.je=Va(),this.He=ng(),this.Je=ng(),this.Ze=new rn(dt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(nj(a))if(r===0){const c=new Ue(a.path);this.et(n,c,_r.newNoDocument(c,Ye.min()))}else St(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const u=this.ut(e),f=u?this.ct(u,e,c):1;if(f!==0){this.it(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let c,u;try{c=dl(r).toUint8Array()}catch(f){if(f instanceof bz)return rd("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new Kw(c,i,a)}catch(f){return rd(f instanceof rh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,c)=>{const u=this.ot(c);if(u){if(a.current&&nj(u.target)){const f=new Ue(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,_r.newNoDocument(f,e))}a.Be&&(n.set(c,a.ke()),a.Ke())}}));let r=ft();this.Je.forEach(((a,c)=>{let u=!0;c.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new Ty(e,n,this.Ze,this.je,r);return this.je=Va(),this.He=ng(),this.Je=ng(),this.Ze=new rn(dt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new rP,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Un(dt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Un(dt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rP),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ng(){return new rn(Ue.comparator)}function iP(){return new rn(Ue.comparator)}const qH={asc:"ASCENDING",desc:"DESCENDING"},UH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VH={and:"AND",or:"OR"};class BH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ij(t,e){return t.useProto3Json||xy(e)?e:{value:e}}function av(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $H(t,e){return av(t,e.toTimestamp())}function Ks(t){return St(!!t,49232),Ye.fromTimestamp((function(n){const r=ul(n);return new Xe(r.seconds,r.nanos)})(t))}function Qw(t,e){return sj(t,e).canonicalString()}function sj(t,e){const n=(function(i){return new Kt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Jz(t){const e=Kt.fromString(t);return St(r4(e),10190,{key:e.toString()}),e}function aj(t,e){return Qw(t.databaseId,e.path)}function Bx(t,e){const n=Jz(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ue(e4(n))}function Zz(t,e){return Qw(t.databaseId,e)}function FH(t){const e=Jz(t);return e.length===4?Kt.emptyPath():e4(e)}function oj(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function e4(t){return St(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sP(t,e,n){return{name:aj(t,e),fields:n.value.mapValue.fields}}function HH(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ke(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(St(p===void 0||typeof p=="string",58123),mr.fromBase64String(p||"")):(St(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),mr.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(h){const p=h.code===void 0?xe.UNKNOWN:Qz(h.code);return new Ae(p,h.message||"")})(c);n=new Yz(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bx(t,r.document.name),a=Ks(r.document.updateTime),c=r.document.createTime?Ks(r.document.createTime):Ye.min(),u=new Yr({mapValue:{fields:r.document.fields}}),f=_r.newFoundDocument(i,a,c,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Mg(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bx(t,r.document),a=r.readTime?Ks(r.readTime):Ye.min(),c=_r.newNoDocument(i,a),u=r.removedTargetIds||[];n=new Mg([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bx(t,r.document),a=r.removedTargetIds||[];n=new Mg([],a,i,null)}else{if(!("filter"in e))return Ke(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new kH(i,a),u=r.targetId;n=new Wz(u,c)}}return n}function GH(t,e){let n;if(e instanceof nm)n={update:sP(t,e.key,e.value)};else if(e instanceof Ay)n={delete:aj(t,e.key)};else if(e instanceof jl)n={update:sP(t,e.key,e.data),updateMask:tG(e.fieldMask)};else{if(!(e instanceof IH))return Ke(16599,{dt:e.type});n={verify:aj(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const u=c.transform;if(u instanceof Th)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ch)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ph)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ih)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ke(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:$H(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ke(27497)})(t,e.precondition)),n}function KH(t,e){return t&&t.length>0?(St(e!==void 0,14353),t.map((n=>(function(i,a){let c=i.updateTime?Ks(i.updateTime):Ks(a);return c.isEqual(Ye.min())&&(c=Ks(a)),new TH(c,i.transformResults||[])})(n,e)))):[]}function QH(t,e){return{documents:[Zz(t,e.path)]}}function WH(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zz(t,i);const a=(function(h){if(h.length!==0)return n4(fs.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const c=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:Vu(y.field),direction:JH(y.dir)}})(p)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=ij(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:i}}function YH(t){let e=FH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){St(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=(function(g){const y=t4(g);return y instanceof fs&&Cz(y)?y.getFilters():[y]})(n.where));let c=[];n.orderBy&&(c=(function(g){return g.map((y=>(function(E){return new Ah(Bu(E.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(y)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let y;return y=typeof g=="object"?g.value:g,xy(y)?null:y})(n.limit));let f=null;n.startAt&&(f=(function(g){const y=!!g.before,x=g.values||[];return new iv(x,y)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const y=!g.before,x=g.values||[];return new iv(x,y)})(n.endAt)),mH(e,i,c,a,u,"F",f,h)}function XH(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function t4(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bu(n.unaryFilter.field);return Rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bu(n.unaryFilter.field);return Rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bu(n.unaryFilter.field);return Rn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Bu(n.unaryFilter.field);return Rn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Rn.create(Bu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return fs.create(n.compositeFilter.filters.map((r=>t4(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(n.compositeFilter.op))})(t):Ke(30097,{filter:t})}function JH(t){return qH[t]}function ZH(t){return UH[t]}function eG(t){return VH[t]}function Vu(t){return{fieldPath:t.canonicalString()}}function Bu(t){return fr.fromServerFormat(t.fieldPath)}function n4(t){return t instanceof Rn?(function(n){if(n.op==="=="){if(G2(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NAN"}};if(H2(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G2(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NOT_NAN"}};if(H2(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(n.field),op:ZH(n.op),value:n.value}}})(t):t instanceof fs?(function(n){const r=n.getFilters().map((i=>n4(i)));return r.length===1?r[0]:{compositeFilter:{op:eG(n.op),filters:r}}})(t):Ke(54877,{filter:t})}function tG(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function r4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function i4(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class Zo{constructor(e,n,r,i,a=Ye.min(),c=Ye.min(),u=mr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nG{constructor(e){this.yt=e}}function rG(t){const e=YH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sv(e,e.limit,"L"):e}class iG{constructor(){this.Sn=new sG}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ee.resolve()}getCollectionParents(e,n){return Ee.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ee.resolve()}deleteFieldIndex(e,n){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,n){return Ee.resolve()}getDocumentsMatchingTarget(e,n){return Ee.resolve(null)}getIndexType(e,n){return Ee.resolve(0)}getFieldIndexes(e,n){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,n){return Ee.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,n){return Ee.resolve(cl.min())}updateCollectionGroup(e,n,r){return Ee.resolve()}updateIndexEntries(e,n){return Ee.resolve()}}class sG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Un(Kt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(Kt.comparator)).toArray()}}const aP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s4=41943040;class Wr{static withCacheSize(e){return new Wr(e,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Wr.DEFAULT_COLLECTION_PERCENTILE=10,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wr.DEFAULT=new Wr(s4,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wr.DISABLED=new Wr(-1,0,0);class od{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new od(0)}static ar(){return new od(-1)}}const oP="LruGarbageCollector",aG=1048576;function lP([t,e],[n,r]){const i=dt(t,n);return i===0?dt(e,r):i}class oG{constructor(e){this.Pr=e,this.buffer=new Un(lP),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();lP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(oP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nd(n)?Pe(oP,"Ignoring IndexedDB error during garbage collection: ",n):await Ed(n)}await this.Ar(3e5)}))}}class cG{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ee.resolve(by.ce);const r=new oG(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(aP)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aP):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,c,u,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,c=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),qu()<=ut.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${a} targets in `+(f-u)+`ms
	Removed ${g} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function uG(t,e){return new cG(t,e)}class dG{constructor(){this.changes=new Lc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&ph(r.mutation,i,hi.empty(),Xe.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ft()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ft()){const i=ac();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let c=nh();return a.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=ac();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ft())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,u)=>{n.set(c,u)}))}))}computeViews(e,n,r,i){let a=Va();const c=mh(),u=(function(){return mh()})();return n.forEach(((f,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof jl)?a=a.insert(h.key,h):p!==void 0?(c.set(h.key,p.mutation.getFieldMask()),ph(p.mutation,h,p.mutation.getFieldMask(),Xe.now())):c.set(h.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,p)=>c.set(h,p))),n.forEach(((h,p)=>u.set(h,new fG(p,c.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=mh();let i=new rn(((c,u)=>c-u)),a=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const u of c)u.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let p=r.get(f)||hi.empty();p=u.applyToLocalView(h,p),r.set(f,p);const g=(i.get(u.batchId)||ft()).add(f);i=i.insert(u.batchId,g)}))})).next((()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),h=f.key,p=f.value,g=Lz();p.forEach((y=>{if(!a.has(y)){const x=Gz(n.get(y),r.get(y));x!==null&&g.set(y,x),a=a.add(y)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,g))}return Ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return pH(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Rz(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ee.resolve(ac());let u=wh,f=a;return c.next((h=>Ee.forEach(h,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),a.get(p)?Ee.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{f=f.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,ft()))).next((p=>({batchId:u,changes:zz(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ue(n)).next((r=>{let i=nh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let c=nh();return this.indexManager.getCollectionParents(e,a).next((u=>Ee.forEach(u,(f=>{const h=(function(g,y){return new Sd(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,y)=>{c=c.insert(g,y)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((c=>{a.forEach(((f,h)=>{const p=h.getKey();c.get(p)===null&&(c=c.insert(p,_r.newInvalidDocument(p)))}));let u=nh();return c.forEach(((f,h)=>{const p=a.get(f);p!==void 0&&ph(p.mutation,h,hi.empty(),Xe.now()),Ey(n,h)&&(u=u.insert(f,h))})),u}))}}class mG{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ee.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ks(i.createTime)}})(n)),Ee.resolve()}getNamedQuery(e,n){return Ee.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:rG(i.bundledQuery),readTime:Ks(i.readTime)}})(n)),Ee.resolve()}}class pG{constructor(){this.overlays=new rn(Ue.comparator),this.Lr=new Map}getOverlay(e,n){return Ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ac();return Ee.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),Ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Ee.resolve()}getOverlaysForCollection(e,n,r){const i=ac(),a=n.length+1,c=new Ue(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new rn(((h,p)=>h-p));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=ac(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=ac(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,p)=>u.set(h,p))),!(u.size()>=i)););return Ee.resolve(u)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new RH(n,r));let a=this.Lr.get(n);a===void 0&&(a=ft(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class gG{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ee.resolve()}}class Ww{constructor(){this.kr=new Un(Xn.Kr),this.qr=new Un(Xn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Xn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Xn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ue(new Kt([])),r=new Xn(n,e),i=new Xn(n,e+1),a=[];return this.qr.forEachInRange([r,i],(c=>{this.Wr(c),a.push(c.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ue(new Kt([])),r=new Xn(n,e),i=new Xn(n,e+1);let a=ft();return this.qr.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const n=new Xn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ue.comparator(e.key,n.key)||dt(e.Hr,n.Hr)}static Ur(e,n){return dt(e.Hr,n.Hr)||Ue.comparator(e.key,n.key)}}class vG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Un(Xn.Kr)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new OH(a,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Jr=this.Jr.add(new Xn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ee.resolve(c)}lookupMutationBatch(e,n){return Ee.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?Uw:this.Yn-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xn(n,0),i=new Xn(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(c=>{const u=this.Zr(c.Hr);a.push(u)})),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Un(dt);return n.forEach((i=>{const a=new Xn(i,0),c=new Xn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,c],(u=>{r=r.add(u.Hr)}))})),Ee.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Ue.isDocumentKey(a)||(a=a.child(""));const c=new Xn(new Ue(a),0);let u=new Un(dt);return this.Jr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(f.Hr)),!0)}),c),Ee.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){St(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Ee.forEach(n.mutations,(i=>{const a=new Xn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Xn(n,0),i=this.Jr.firstAfterOrEqual(r);return Ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class yG{constructor(e){this.ti=e,this.docs=(function(){return new rn(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,c=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ee.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let r=Va();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():_r.newInvalidDocument(i))})),Ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Va();const c=n.path,u=new Ue(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||HF(FF(p),r)<=0||(i.has(p.key)||Ey(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Ee.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Ke(9500)}ni(e,n){return Ee.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new bG(this)}getSize(e){return Ee.resolve(this.size)}}class bG extends dG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),Ee.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class xG{constructor(e){this.persistence=e,this.ri=new Lc((n=>$w(n)),Fw),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.ii=0,this.si=new Ww,this.targetCount=0,this.oi=od._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Ee.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new od(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ee.resolve()}updateTargetData(e,n){return this.lr(n),Ee.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ri.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ee.waitFor(a).next((()=>i))}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Ee.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Ee.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Ee.resolve(r)}containsKey(e,n){return Ee.resolve(this.si.containsKey(n))}}class a4{constructor(e,n){this._i={},this.overlays={},this.ai=new by(0),this.ui=!1,this.ui=!0,this.ci=new gG,this.referenceDelegate=e(this),this.li=new xG(this),this.indexManager=new iG,this.remoteDocumentCache=(function(i){return new yG(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new nG(n),this.Pi=new mG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new vG(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new _G(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return Ee.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class _G extends KF{constructor(e){super(),this.currentSequenceNumber=e}}class Yw{constructor(e){this.persistence=e,this.Ri=new Ww,this.Ai=null}static Vi(e){return new Yw(e)}get di(){if(this.Ai)return this.Ai;throw Ke(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Ee.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ee.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.di,(r=>{const i=Ue.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,Ye.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ee.or([()=>Ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ov{constructor(e,n){this.persistence=e,this.fi=new Lc((r=>YF(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=uG(this,n)}static Vi(e,n){return new ov(e,n)}Ti(){}Ii(e){return Ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return Ee.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?Ee.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(c=>this.wr(e,c,n).next((u=>{u||(r++,a.removeEntry(c,Ye.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ee.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ee.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ee.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Rg(e.data.value)),n}wr(e,n,r){return Ee.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return Ee.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Xw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ft(),i=ft();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Xw(e,n.fromCache,r,i)}}class jG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wG{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return W8()?8:QF(wr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new jG;return this.ys(e,n,c).next((u=>{if(a.result=u,this.As)return this.ws(e,n,c,u.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(qu()<=ut.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Uu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ee.resolve()):(qu()<=ut.DEBUG&&Pe("QueryEngine","Query:",Uu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(qu()<=ut.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Uu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gs(n))):Ee.resolve())}gs(e,n){if(Y2(n))return Ee.resolve(null);let r=Gs(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=sv(n,null,"F"),r=Gs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=ft(...a);return this.fs.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.bs(n,u);return this.Ss(n,h,c,f.readTime)?this.gs(e,sv(n,null,"F")):this.Ds(e,h,n,f)}))))})))))}ps(e,n,r,i){return Y2(n)||i.isEqual(Ye.min())?Ee.resolve(null):this.fs.getDocuments(e,r).next((a=>{const c=this.bs(n,a);return this.Ss(n,c,r,i)?Ee.resolve(null):(qu()<=ut.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uu(n)),this.Ds(e,c,n,$F(i,wh)).next((u=>u)))}))}bs(e,n){let r=new Un(Dz(e));return n.forEach(((i,a)=>{Ey(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return qu()<=ut.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Uu(n)),this.fs.getDocumentsMatchingQuery(e,n,cl.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((c=>{a=a.insert(c.key,c)})),a)))}}const Jw="LocalStore",EG=3e8;class NG{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new rn(dt),this.Fs=new Lc((a=>$w(a)),Fw),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hG(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function SG(t,e,n,r){return new NG(t,e,n,r)}async function o4(t,e){const n=Ze(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],u=[];let f=ft();for(const h of i){c.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of a){u.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(r,f).next((h=>({Ns:h,removedBatchIds:c,addedBatchIds:u})))}))}))}function AG(t,e){const n=Ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(u,f,h,p){const g=h.batch,y=g.keys();let x=Ee.resolve();return y.forEach((E=>{x=x.next((()=>p.getEntry(f,E))).next((j=>{const N=h.docVersions.get(E);St(N!==null,48541),j.version.compareTo(N)<0&&(g.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))}))})),x.next((()=>u.mutationQueue.removeMutationBatch(f,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let f=ft();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(f=f.add(u.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function l4(t){const e=Ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function TG(t,e){const n=Ze(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const u=[];e.targetChanges.forEach(((p,g)=>{const y=i.get(g);if(!y)return;u.push(n.li.removeMatchingKeys(a,p.removedDocuments,g).next((()=>n.li.addMatchingKeys(a,p.addedDocuments,g))));let x=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(mr.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),i=i.insert(g,x),(function(j,N,A){return j.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=EG?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(y,x,p)&&u.push(n.li.updateTargetData(a,x))}));let f=Va(),h=ft();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))})),u.push(CG(a,c,e.documentUpdates).next((p=>{f=p.Bs,h=p.Ls}))),!r.isEqual(Ye.min())){const p=n.li.getLastRemoteSnapshotVersion(a).next((g=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(p)}return Ee.waitFor(u).next((()=>c.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(n.vs=i,a)))}function CG(t,e,n){let r=ft(),i=ft();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let c=Va();return n.forEach(((u,f)=>{const h=a.get(u);f.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),f.isNoDocument()&&f.version.isEqual(Ye.min())?(e.removeEntry(u,f.readTime),c=c.insert(u,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),c=c.insert(u,f)):Pe(Jw,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",f.version)})),{Bs:c,Ls:i}}))}function PG(t,e){const n=Ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Uw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function IG(t,e){const n=Ze(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,Ee.resolve(i)):n.li.allocateTargetId(r).next((c=>(i=new Zo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function lj(t,e,n){const r=Ze(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Nd(c))throw c;Pe(Jw,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function cP(t,e,n){const r=Ze(t);let i=Ye.min(),a=ft();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,h,p){const g=Ze(f),y=g.Fs.get(p);return y!==void 0?Ee.resolve(g.vs.get(y)):g.li.getTargetData(h,p)})(r,c,Gs(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,u.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:Ye.min(),n?a:ft()))).next((u=>(OG(r,yH(e),u),{documents:u,ks:a})))))}function OG(t,e,n){let r=t.Ms.get(e)||Ye.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}class uP{constructor(){this.activeTargetIds=EH()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RG{constructor(){this.vo=new uP,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new uP,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kG{Mo(e){}shutdown(){}}const dP="ConnectivityMonitor";class fP{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(dP,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(dP,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let rg=null;function cj(){return rg===null?rg=(function(){return 268435456+Math.round(2147483648*Math.random())})():rg++,"0x"+rg.toString(16)}const $x="RestConnection",DG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class MG{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===nv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const c=cj(),u=this.Qo(e,n.toUriEncodedString());Pe($x,`Sending RPC '${e}' ${c}:`,u,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,i,a);const{host:h}=new URL(u),p=bl(h);return this.zo(e,u,f,r,p).then((g=>(Pe($x,`Received RPC '${e}' ${c}: `,g),g)),(g=>{throw rd($x,`RPC '${e}' ${c} failed with error: `,g,"url: ",u,"request:",r),g}))}jo(e,n,r,i,a,c){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=DG[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class zG{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const yr="WebChannelConnection",Uf=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Xu extends MG{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xu.c_){const e=dz();Uf(e,uz.STAT_EVENT,(n=>{n.stat===X1.PROXY?Pe(yr,"STAT_EVENT: detected buffering proxy"):n.stat===X1.NOPROXY&&Pe(yr,"STAT_EVENT: detected no buffering proxy")})),Xu.c_=!0}}zo(e,n,r,i,a){const c=cj();return new Promise(((u,f)=>{const h=new lz;h.setWithCredentials(!0),h.listenOnce(cz.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Og.NO_ERROR:const g=h.getResponseJson();Pe(yr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(g)),u(g);break;case Og.TIMEOUT:Pe(yr,`RPC '${e}' ${c} timed out`),f(new Ae(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Og.HTTP_ERROR:const y=h.getStatus();if(Pe(yr,`RPC '${e}' ${c} failed with status:`,y,"response text:",h.getResponseText()),y>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x?.error;if(E&&E.status&&E.message){const j=(function(A){const R=A.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(R)>=0?R:xe.UNKNOWN})(E.status);f(new Ae(j,E.message))}else f(new Ae(xe.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Ae(xe.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Pe(yr,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);Pe(yr,`RPC '${e}' ${c} sending request:`,i),h.send(n,"POST",p,r,15)}))}T_(e,n,r){const i=cj(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Pe(yr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=c.createWebChannel(h,u);this.I_(p);let g=!1,y=!1;const x=new zG({Ho:E=>{y?Pe(yr,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Pe(yr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Pe(yr,`RPC '${e}' stream ${i} sending:`,E),p.send(E))},Jo:()=>p.close()});return Uf(p,th.EventType.OPEN,(()=>{y||(Pe(yr,`RPC '${e}' stream ${i} transport opened.`),x.i_())})),Uf(p,th.EventType.CLOSE,(()=>{y||(y=!0,Pe(yr,`RPC '${e}' stream ${i} transport closed`),x.o_(),this.E_(p))})),Uf(p,th.EventType.ERROR,(E=>{y||(y=!0,rd(yr,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),x.o_(new Ae(xe.UNAVAILABLE,"The operation could not be completed")))})),Uf(p,th.EventType.MESSAGE,(E=>{if(!y){const j=E.data[0];St(!!j,16349);const N=j,A=N?.error||N[0]?.error;if(A){Pe(yr,`RPC '${e}' stream ${i} received error:`,A);const R=A.status;let C=(function(B){const D=In[B];if(D!==void 0)return Qz(D)})(R),P=A.message;C===void 0&&(C=xe.INTERNAL,P="Unknown error status: "+R+" with message "+A.message),y=!0,x.o_(new Ae(C,P)),p.close()}else Pe(yr,`RPC '${e}' stream ${i} received:`,j),x.__(j)}})),Xu.u_(),setTimeout((()=>{x.s_()}),0),x}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return fz()}}function LG(t){return new Xu(t)}function Fx(){return typeof document<"u"?document:null}function Cy(t){return new BH(t,!0)}Xu.c_=!1;class c4{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const hP="PersistentStream";class u4{constructor(e,n,r,i,a,c,u,f){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new c4(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(Ua(n.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ae(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(hP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Pe(hP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qG extends u4{constructor(e,n,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=HH(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ye.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ye.min():c.readTime?Ks(c.readTime):Ye.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=oj(this.serializer),n.addTarget=(function(a,c){let u;const f=c.target;if(u=nj(f)?{documents:QH(a,f)}:{query:WH(a,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=Xz(a,c.resumeToken);const h=ij(a,c.expectedCount);h!==null&&(u.expectedCount=h)}else if(c.snapshotVersion.compareTo(Ye.min())>0){u.readTime=av(a,c.snapshotVersion.toTimestamp());const h=ij(a,c.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=XH(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=oj(this.serializer),n.removeTarget=e,this.K_(n)}}class UG extends u4{constructor(e,n,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=KH(e.writeResults,e.commitTime),r=Ks(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=oj(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>GH(this.serializer,r)))};this.K_(n)}}class VG{}class BG extends VG{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ae(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Wo(e,sj(n,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(xe.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.jo(e,sj(n,r),i,c,u,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(xe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function $G(t,e,n,r){return new BG(t,e,n,r)}class FG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ua(n),this.aa=!1):Pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ec="RemoteStore";class HG{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{qc(this)&&(Pe(Ec,"Restarting streams for network reachability change."),await(async function(f){const h=Ze(f);h.Ea.add(4),await im(h),h.Va.set("Unknown"),h.Ea.delete(4),await Py(h)})(this))}))})),this.Va=new FG(r,i)}}async function Py(t){if(qc(t))for(const e of t.Ra)await e(!0)}async function im(t){for(const e of t.Ra)await e(!1)}function d4(t,e){const n=Ze(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nE(n)?tE(n):Ad(n).O_()&&eE(n,e))}function Zw(t,e){const n=Ze(t),r=Ad(n);n.Ia.delete(e),r.O_()&&f4(n,e),n.Ia.size===0&&(r.O_()?r.L_():qc(n)&&n.Va.set("Unknown"))}function eE(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ad(t).Z_(e)}function f4(t,e){t.da.$e(e),Ad(t).X_(e)}function tE(t){t.da=new LH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ad(t).start(),t.Va.ua()}function nE(t){return qc(t)&&!Ad(t).x_()&&t.Ia.size>0}function qc(t){return Ze(t).Ea.size===0}function h4(t){t.da=void 0}async function GG(t){t.Va.set("Online")}async function KG(t){t.Ia.forEach(((e,n)=>{eE(t,e)}))}async function QG(t,e){h4(t),nE(t)?(t.Va.ha(e),tE(t)):t.Va.set("Unknown")}async function WG(t,e,n){if(t.Va.set("Online"),e instanceof Yz&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const u of a.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ia.delete(u),i.da.removeTarget(u))})(t,e)}catch(r){Pe(Ec,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lv(t,r)}else if(e instanceof Mg?t.da.Xe(e):e instanceof Wz?t.da.st(e):t.da.tt(e),!n.isEqual(Ye.min()))try{const r=await l4(t.localStore);n.compareTo(r)>=0&&await(function(a,c){const u=a.da.Tt(c);return u.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,h)=>{const p=a.Ia.get(f);if(!p)return;a.Ia.set(f,p.withResumeToken(mr.EMPTY_BYTE_STRING,p.snapshotVersion)),f4(a,f);const g=new Zo(p.target,f,h,p.sequenceNumber);eE(a,g)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){Pe(Ec,"Failed to raise snapshot:",r),await lv(t,r)}}async function lv(t,e,n){if(!Nd(e))throw e;t.Ea.add(1),await im(t),t.Va.set("Offline"),n||(n=()=>l4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Pe(Ec,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Py(t)}))}function m4(t,e){return e().catch((n=>lv(t,n,e)))}async function Iy(t){const e=Ze(t),n=hl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uw;for(;YG(e);)try{const i=await PG(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,XG(e,i)}catch(i){await lv(e,i)}p4(e)&&g4(e)}function YG(t){return qc(t)&&t.Ta.length<10}function XG(t,e){t.Ta.push(e);const n=hl(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function p4(t){return qc(t)&&!hl(t).x_()&&t.Ta.length>0}function g4(t){hl(t).start()}async function JG(t){hl(t).ra()}async function ZG(t){const e=hl(t);for(const n of t.Ta)e.ea(n.mutations)}async function eK(t,e,n){const r=t.Ta.shift(),i=Gw.from(r,e,n);await m4(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Iy(t)}async function tK(t,e){e&&hl(t).Y_&&await(async function(r,i){if((function(c){return DH(c)&&c!==xe.ABORTED})(i.code)){const a=r.Ta.shift();hl(r).B_(),await m4(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Iy(r)}})(t,e),p4(t)&&g4(t)}async function mP(t,e){const n=Ze(t);n.asyncQueue.verifyOperationInProgress(),Pe(Ec,"RemoteStore received new credentials");const r=qc(n);n.Ea.add(3),await im(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Py(n)}async function nK(t,e){const n=Ze(t);e?(n.Ea.delete(2),await Py(n)):e||(n.Ea.add(2),await im(n),n.Va.set("Unknown"))}function Ad(t){return t.ma||(t.ma=(function(n,r,i){const a=Ze(n);return a.sa(),new qG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:GG.bind(null,t),Yo:KG.bind(null,t),t_:QG.bind(null,t),J_:WG.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),nE(t)?tE(t):t.Va.set("Unknown")):(await t.ma.stop(),h4(t))}))),t.ma}function hl(t){return t.fa||(t.fa=(function(n,r,i){const a=Ze(n);return a.sa(),new UG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:JG.bind(null,t),t_:tK.bind(null,t),ta:ZG.bind(null,t),na:eK.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Iy(t)):(await t.fa.stop(),t.Ta.length>0&&(Pe(Ec,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class rE{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const c=Date.now()+r,u=new rE(e,n,c,i,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iE(t,e){if(Ua("AsyncQueue",`${e}: ${t}`),Nd(t))return new Ae(xe.UNAVAILABLE,`${e}: ${t}`);throw t}class Ju{static emptySet(e){return new Ju(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ue.comparator(n.key,r.key):(n,r)=>Ue.comparator(n.key,r.key),this.keyedMap=nh(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ju)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ju;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class pP{constructor(){this.ga=new rn(Ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ke(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ld{constructor(e,n,r,i,a,c,u,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const c=[];return n.forEach((u=>{c.push({type:0,doc:u})})),new ld(e,n,Ju.emptySet(n),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class rK{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class iK{constructor(){this.queries=gP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ze(n),a=i.queries;i.queries=gP(),a.forEach(((c,u)=>{for(const f of u.ba)f.onError(r)}))})(this,new Ae(xe.ABORTED,"Firestore shutting down"))}}function gP(){return new Lc((t=>kz(t)),wy)}async function sE(t,e){const n=Ze(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new rK,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=iE(c,`Initialization of query '${Uu(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&oE(n)}async function aE(t,e){const n=Ze(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const c=a.ba.indexOf(e);c>=0&&(a.ba.splice(c,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sK(t,e){const n=Ze(t);let r=!1;for(const i of e){const a=i.query,c=n.queries.get(a);if(c){for(const u of c.ba)u.Fa(i)&&(r=!0);c.wa=i}}r&&oE(n)}function aK(t,e,n){const r=Ze(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function oE(t){t.Ca.forEach((e=>{e.next()}))}var uj,vP;(vP=uj||(uj={})).Ma="default",vP.Cache="cache";class lE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ld(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uj.Cache}}class v4{constructor(e){this.key=e}}class y4{constructor(e){this.key=e}}class oK{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ft(),this.mutatedKeys=ft(),this.eu=Dz(e),this.tu=new Ju(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new pP,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const y=i.get(p),x=Ey(this.query,g)?g:null,E=!!y&&this.mutatedKeys.has(y.key),j=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let N=!1;y&&x?y.data.isEqual(x.data)?E!==j&&(r.track({type:3,doc:x}),N=!0):this.su(y,x)||(r.track({type:2,doc:x}),N=!0,(f&&this.eu(x,f)>0||h&&this.eu(x,h)<0)&&(u=!0)):!y&&x?(r.track({type:0,doc:x}),N=!0):y&&!x&&(r.track({type:1,doc:y}),N=!0,(f||h)&&(u=!0)),N&&(x?(c=c.add(x),a=j?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Ss:u,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,g)=>(function(x,E){const j=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Vt:N})}};return j(x)-j(E)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],f=this.Ya.size===0&&this.current&&!i?1:0,h=f!==this.Xa;return this.Xa=f,c.length!==0||h?{snapshot:new ld(this.query,e.tu,a,c,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pP,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ft(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new y4(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new v4(r))})),n}cu(e){this.Za=e.ks,this.Ya=ft();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ld.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cE="SyncEngine";class lK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cK{constructor(e){this.key=e,this.hu=!1}}class uK{constructor(e,n,r,i,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Lc((u=>kz(u)),wy),this.Iu=new Map,this.Eu=new Set,this.Ru=new rn(Ue.comparator),this.Au=new Map,this.Vu=new Ww,this.du={},this.mu=new Map,this.fu=od.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dK(t,e,n=!0){const r=E4(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await b4(r,e,n,!0),i}async function fK(t,e){const n=E4(t);await b4(n,e,!0,!1)}async function b4(t,e,n,r){const i=await IG(t.localStore,Gs(e)),a=i.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await hK(t,e,a,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&d4(t.remoteStore,i),u}async function hK(t,e,n,r,i){t.pu=(g,y,x)=>(async function(j,N,A,R){let C=N.view.ru(A);C.Ss&&(C=await cP(j.localStore,N.query,!1).then((({documents:D})=>N.view.ru(D,C))));const P=R&&R.targetChanges.get(N.targetId),M=R&&R.targetMismatches.get(N.targetId)!=null,B=N.view.applyChanges(C,j.isPrimaryClient,P,M);return bP(j,N.targetId,B.au),B.snapshot})(t,g,y,x);const a=await cP(t.localStore,e,!0),c=new oK(e,a.ks),u=c.ru(a.documents),f=rm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=c.applyChanges(u,t.isPrimaryClient,f);bP(t,n,h.au);const p=new lK(e,n,c);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function mK(t,e,n){const r=Ze(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!wy(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lj(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zw(r.remoteStore,i.targetId),dj(r,i.targetId)})).catch(Ed)):(dj(r,i.targetId),await lj(r.localStore,i.targetId,!0))}async function pK(t,e){const n=Ze(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zw(n.remoteStore,r.targetId))}async function gK(t,e,n){const r=wK(t);try{const i=await(function(c,u){const f=Ze(c),h=Xe.now(),p=u.reduce(((x,E)=>x.add(E.key)),ft());let g,y;return f.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let E=Va(),j=ft();return f.xs.getEntries(x,p).next((N=>{E=N,E.forEach(((A,R)=>{R.isValidDocument()||(j=j.add(A))}))})).next((()=>f.localDocuments.getOverlayedDocuments(x,E))).next((N=>{g=N;const A=[];for(const R of u){const C=PH(R,g.get(R.key).overlayedDocument);C!=null&&A.push(new jl(R.key,C,Sz(C.value.mapValue),Rr.exists(!0)))}return f.mutationQueue.addMutationBatch(x,h,A,u)})).next((N=>{y=N;const A=N.applyToLocalDocumentSet(g,j);return f.documentOverlayCache.saveOverlays(x,N.batchId,A)}))})).then((()=>({batchId:y.batchId,changes:zz(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,u,f){let h=c.du[c.currentUser.toKey()];h||(h=new rn(dt)),h=h.insert(u,f),c.du[c.currentUser.toKey()]=h})(r,i.batchId,n),await sm(r,i.changes),await Iy(r.remoteStore)}catch(i){const a=iE(i,"Failed to persist write");n.reject(a)}}async function x4(t,e){const n=Ze(t);try{const r=await TG(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=n.Au.get(a);c&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?St(c.hu,14607):i.removedDocuments.size>0&&(St(c.hu,42227),c.hu=!1))})),await sm(n,r,e)}catch(r){await Ed(r)}}function yP(t,e,n){const r=Ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(c,u){const f=Ze(c);f.onlineState=u;let h=!1;f.queries.forEach(((p,g)=>{for(const y of g.ba)y.va(u)&&(h=!0)})),h&&oE(f)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vK(t,e,n){const r=Ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new rn(Ue.comparator);c=c.insert(a,_r.newNoDocument(a,Ye.min()));const u=ft().add(a),f=new Ty(Ye.min(),new Map,new rn(dt),c,u);await x4(r,f),r.Ru=r.Ru.remove(a),r.Au.delete(e),uE(r)}else await lj(r.localStore,e,!1).then((()=>dj(r,e,n))).catch(Ed)}async function yK(t,e){const n=Ze(t),r=e.batch.batchId;try{const i=await AG(n.localStore,e);j4(n,r,null),_4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sm(n,i)}catch(i){await Ed(i)}}async function bK(t,e,n){const r=Ze(t);try{const i=await(function(c,u){const f=Ze(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return f.mutationQueue.lookupMutationBatch(h,u).next((g=>(St(g!==null,37113),p=g.keys(),f.mutationQueue.removeMutationBatch(h,g)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>f.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);j4(r,e,n),_4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sm(r,i)}catch(i){await Ed(i)}}function _4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function j4(t,e,n){const r=Ze(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function dj(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||w4(t,r)}))}function w4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Zw(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),uE(t))}function bP(t,e,n){for(const r of n)r instanceof v4?(t.Vu.addReference(r.key,e),xK(t,r)):r instanceof y4?(Pe(cE,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||w4(t,r.key)):Ke(19791,{wu:r})}function xK(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Pe(cE,"New document in limbo: "+n),t.Eu.add(r),uE(t))}function uE(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ue(Kt.fromString(e)),r=t.fu.next();t.Au.set(r,new cK(n)),t.Ru=t.Ru.insert(n,r),d4(t.remoteStore,new Zo(Gs(jy(n.path)),r,"TargetPurposeLimboResolution",by.ce))}}async function sm(t,e,n){const r=Ze(t),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,f)=>{c.push(r.pu(f,e,n).then((h=>{if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:n?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Xw.Es(f.targetId,h);a.push(p)}})))})),await Promise.all(c),r.Pu.J_(i),await(async function(f,h){const p=Ze(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Ee.forEach(h,(y=>Ee.forEach(y.Ts,(x=>p.persistence.referenceDelegate.addReference(g,y.targetId,x))).next((()=>Ee.forEach(y.Is,(x=>p.persistence.referenceDelegate.removeReference(g,y.targetId,x)))))))))}catch(g){if(!Nd(g))throw g;Pe(Jw,"Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const x=p.vs.get(y),E=x.snapshotVersion,j=x.withLastLimboFreeSnapshotVersion(E);p.vs=p.vs.insert(y,j)}}})(r.localStore,a))}async function _K(t,e){const n=Ze(t);if(!n.currentUser.isEqual(e)){Pe(cE,"User change. New user:",e.toKey());const r=await o4(n.localStore,e);n.currentUser=e,(function(a,c){a.mu.forEach((u=>{u.forEach((f=>{f.reject(new Ae(xe.CANCELLED,c))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sm(n,r.Ns)}}function jK(t,e){const n=Ze(t),r=n.Au.get(e);if(r&&r.hu)return ft().add(r.key);{let i=ft();const a=n.Iu.get(e);if(!a)return i;for(const c of a){const u=n.Tu.get(c);i=i.unionWith(u.view.nu)}return i}}function E4(t){const e=Ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=x4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vK.bind(null,e),e.Pu.J_=sK.bind(null,e.eventManager),e.Pu.yu=aK.bind(null,e.eventManager),e}function wK(t){const e=Ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bK.bind(null,e),e}class cv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return SG(this.persistence,new wG,e.initialUser,this.serializer)}Cu(e){return new a4(Yw.Vi,this.serializer)}Du(e){return new RG}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cv.provider={build:()=>new cv};class EK extends cv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){St(this.persistence.referenceDelegate instanceof ov,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wr.withCacheSize(this.cacheSizeBytes):Wr.DEFAULT;return new a4((r=>ov.Vi(r,n)),this.serializer)}}class fj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_K.bind(null,this.syncEngine),await nK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iK})()}createDatastore(e){const n=Cy(e.databaseInfo.databaseId),r=LG(e.databaseInfo);return $G(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,c,u){return new HG(r,i,a,c,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>yP(this.syncEngine,n,0)),(function(){return fP.v()?new fP:new kG})())}createSyncEngine(e,n){return(function(i,a,c,u,f,h,p){const g=new uK(i,a,c,u,f,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ze(n);Pe(Ec,"RemoteStore shutting down."),r.Ea.add(5),await im(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fj.provider={build:()=>new fj};class dE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ua("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ml="FirestoreClient";class NK{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=xr.UNAUTHENTICATED,this.clientId=qw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{Pe(ml,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Pe(ml,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=iE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Hx(t,e){t.asyncQueue.verifyOperationInProgress(),Pe(ml,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await o4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function xP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SK(t);Pe(ml,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>mP(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>mP(e.remoteStore,i))),t._onlineComponents=e}async function SK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe(ml,"Using user provided OfflineComponentProvider");try{await Hx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===xe.FAILED_PRECONDITION||i.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;rd("Error using user provided cache. Falling back to memory cache: "+n),await Hx(t,new cv)}}else Pe(ml,"Using default OfflineComponentProvider"),await Hx(t,new EK(void 0));return t._offlineComponents}async function N4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe(ml,"Using user provided OnlineComponentProvider"),await xP(t,t._uninitializedComponentsProvider._online)):(Pe(ml,"Using default OnlineComponentProvider"),await xP(t,new fj))),t._onlineComponents}function AK(t){return N4(t).then((e=>e.syncEngine))}async function uv(t){const e=await N4(t),n=e.eventManager;return n.onListen=dK.bind(null,e.syncEngine),n.onUnlisten=mK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pK.bind(null,e.syncEngine),n}function TK(t,e,n,r){const i=new dE(r),a=new lE(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>sE(await uv(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>aE(await uv(t),a)))}}function CK(t,e,n={}){const r=new Da;return t.asyncQueue.enqueueAndForget((async()=>(function(a,c,u,f,h){const p=new dE({next:y=>{p.Nu(),c.enqueueAndForget((()=>aE(a,g)));const x=y.docs.has(u);!x&&y.fromCache?h.reject(new Ae(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&f&&f.source==="server"?h.reject(new Ae(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new lE(jy(u.path),p,{includeMetadataChanges:!0,Ka:!0});return sE(a,g)})(await uv(t),t.asyncQueue,e,n,r))),r.promise}function PK(t,e,n={}){const r=new Da;return t.asyncQueue.enqueueAndForget((async()=>(function(a,c,u,f,h){const p=new dE({next:y=>{p.Nu(),c.enqueueAndForget((()=>aE(a,g))),y.fromCache&&f.source==="server"?h.reject(new Ae(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new lE(u,p,{includeMetadataChanges:!0,Ka:!0});return sE(a,g)})(await uv(t),t.asyncQueue,e,n,r))),r.promise}function IK(t,e){const n=new Da;return t.asyncQueue.enqueueAndForget((async()=>gK(await AK(t),e,n))),n.promise}function S4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const OK="ComponentProvider",_P=new Map;function RK(t,e,n,r,i){return new ZF(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,S4(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const A4="firestore.googleapis.com",jP=!0;class wP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A4,this.ssl=jP}else this.host=e.host,this.ssl=e.ssl??jP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=s4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aG)throw new Ae(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new IF;switch(r.type){case"firstParty":return new DF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=_P.get(n);r&&(Pe(OK,"Removing Datastore"),_P.delete(n),r.terminate())})(this),Promise.resolve()}}function kK(t,e,n,r={}){t=Or(t,Oy);const i=bl(e),a=t._getSettings(),c={...a,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(Nw(`https://${u}`),Sw("Firestore",!0)),a.host!==A4&&a.host!==u&&rd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:u,ssl:i,emulatorOptions:r};if(!bc(f,c)&&(t._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=xr.MOCK_USER;else{h=_M(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ae(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xr(g)}t._authCredentials=new OF(new mz(h,p))}}class Ja{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ja(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tm(n,pn._jsonSchema))return new pn(e,r||null,new Ue(Kt.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:kn("string",pn._jsonSchemaVersion),referencePath:kn("string")};class sl extends Ja{constructor(e,n,r){super(e,n,jy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ue(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function We(t,e,...n){if(t=Ft(t),pz("collection","path",e),t instanceof Oy){const r=Kt.fromString(e,...n);return M2(r),new sl(t,null,r)}{if(!(t instanceof pn||t instanceof sl))throw new Ae(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return M2(r),new sl(t.firestore,null,r)}}function He(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=qw.newId()),pz("doc","path",e),t instanceof Oy){const r=Kt.fromString(e,...n);return D2(r),new pn(t,null,new Ue(r))}{if(!(t instanceof pn||t instanceof sl))throw new Ae(xe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return D2(r),new pn(t.firestore,t instanceof sl?t.converter:null,new Ue(r))}}const EP="AsyncQueue";class NP{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new c4(this,"async_queue_retry"),this._c=()=>{const r=Fx();r&&Pe(EP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Fx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Nd(e))throw e;Pe(EP,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ua("INTERNAL UNHANDLED ERROR: ",SP(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=rE.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ke(47125,{Pc:SP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function SP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xs extends Oy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new NP,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NP(e),this._firestoreClient=void 0,await e}}}function DK(t,e){const n=typeof t=="object"?t:Cw(),r=typeof t=="string"?t:nv,i=my(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=yM("firestore");a&&kK(i,...a)}return i}function am(t){if(t._terminated)throw new Ae(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MK(t),t._firestoreClient}function MK(t){const e=t._freezeSettings(),n=RK(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new NK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(mr.fromBase64String(e))}catch(n){throw new Ae(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tm(e,zi._jsonSchema))return zi.fromBase64String(e.bytes)}}zi._jsonSchemaVersion="firestore/bytes/1.0",zi._jsonSchema={type:kn("string",zi._jsonSchemaVersion),bytes:kn("string")};class Ry{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class om{constructor(e){this._methodName=e}}class Qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qs._jsonSchemaVersion}}static fromJSON(e){if(tm(e,Qs._jsonSchema))return new Qs(e.latitude,e.longitude)}}Qs._jsonSchemaVersion="firestore/geoPoint/1.0",Qs._jsonSchema={type:kn("string",Qs._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};class ls{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tm(e,ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ls(e.vectorValues);throw new Ae(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ls._jsonSchemaVersion="firestore/vectorValue/1.0",ls._jsonSchema={type:kn("string",ls._jsonSchemaVersion),vectorValues:kn("object")};const zK=/^__.*__$/;class LK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jl(e,this.data,this.fieldMask,n,this.fieldTransforms):new nm(e,this.data,n,this.fieldTransforms)}}class T4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new jl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function C4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{dataSource:t})}}class fE{constructor(e,n,r,i,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new fE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return dv(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(C4(this.dataSource)&&zK.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class qK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cy(e)}createContext(e,n,r,i=!1){return new fE({dataSource:e,methodName:n,targetDoc:r,path:fr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lm(t){const e=t._freezeSettings(),n=Cy(t._databaseId);return new qK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hE(t,e,n,r,i,a={}){const c=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);gE("Data must be an object, but it was:",c,r);const u=O4(r,c);let f,h;if(a.merge)f=new hi(c.fieldMask),h=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const y=Nc(e,g,n);if(!c.contains(y))throw new Ae(xe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);D4(p,y)||p.push(y)}f=new hi(p),h=c.fieldTransforms.filter((g=>f.covers(g.field)))}else f=null,h=c.fieldTransforms;return new LK(new Yr(u),f,h)}class ky extends om{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ky}}class mE extends om{_toFieldTransform(e){return new Hz(e.path,new Th)}isEqual(e){return e instanceof mE}}class pE extends om{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Ih(e.serializer,Uz(e.serializer,this.Vc));return new Hz(e.path,n)}isEqual(e){return e instanceof pE&&this.Vc===e.Vc}}function P4(t,e,n,r){const i=t.createContext(1,e,n);gE("Data must be an object, but it was:",i,r);const a=[],c=Yr.empty();_l(r,((f,h)=>{const p=k4(e,f,n);h=Ft(h);const g=i.childContextForFieldPath(p);if(h instanceof ky)a.push(p);else{const y=cm(h,g);y!=null&&(a.push(p),c.set(p,y))}}));const u=new hi(a);return new T4(c,u,i.fieldTransforms)}function I4(t,e,n,r,i,a){const c=t.createContext(1,e,n),u=[Nc(e,r,n)],f=[i];if(a.length%2!=0)throw new Ae(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)u.push(Nc(e,a[y])),f.push(a[y+1]);const h=[],p=Yr.empty();for(let y=u.length-1;y>=0;--y)if(!D4(h,u[y])){const x=u[y];let E=f[y];E=Ft(E);const j=c.childContextForFieldPath(x);if(E instanceof ky)h.push(x);else{const N=cm(E,j);N!=null&&(h.push(x),p.set(x,N))}}const g=new hi(h);return new T4(p,g,c.fieldTransforms)}function UK(t,e,n,r=!1){return cm(n,t.createContext(r?4:3,e))}function cm(t,e){if(R4(t=Ft(t)))return gE("Unsupported field value:",e,t),O4(t,e);if(t instanceof om)return(function(r,i){if(!C4(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const u of r){let f=cm(u,i.childContextForArray(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Xe.fromDate(r);return{timestampValue:av(i.serializer,a)}}if(r instanceof Xe){const a=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:av(i.serializer,a)}}if(r instanceof Qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:Xz(i.serializer,r._byteString)};if(r instanceof pn){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Qw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ls)return(function(c,u){const f=c instanceof ls?c.toArray():c;return{mapValue:{fields:{[Ez]:{stringValue:Nz},[rv]:{arrayValue:{values:f.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return Hw(u.serializer,p)}))}}}}}})(r,i);if(i4(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${yy(r)}`)})(t,e)}function O4(t,e){const n={};return yz(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(t,((r,i)=>{const a=cm(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function R4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Qs||t instanceof zi||t instanceof pn||t instanceof om||t instanceof ls||i4(t))}function gE(t,e,n){if(!R4(n)||!gz(n)){const r=yy(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Nc(t,e,n){if((e=Ft(e))instanceof Ry)return e._internalPath;if(typeof e=="string")return k4(t,e);throw dv("Field path arguments must be of type string or ",t,!1,void 0,n)}const VK=new RegExp("[~\\*/\\[\\]]");function k4(t,e,n){if(e.search(VK)>=0)throw dv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ry(...e.split("."))._internalPath}catch{throw dv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dv(t,e,n,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new Ae(xe.INVALID_ARGUMENT,u+t+f)}function D4(t,e){return t.some((n=>n.isEqual(e)))}class BK{convertValue(e,n="none"){switch(fl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _l(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[rv].arrayValue?.values?.map((r=>_n(r.doubleValue)));return new ls(n)}convertGeoPoint(e){return new Qs(_n(e.latitude),_n(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_y(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eh(e));default:return null}}convertTimestamp(e){const n=ul(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Kt.fromString(e);St(r4(r),9688,{name:e});const i=new Nh(r.get(1),r.get(3)),a=new Ue(r.popFirst(5));return i.isEqual(n)||Ua(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class vE extends BK{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function en(){return new mE("serverTimestamp")}function M4(t){return new pE("increment",t)}const AP="@firebase/firestore",TP="4.10.0";function CP(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class z4{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $K(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Nc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $K extends z4{data(){return super.data()}}function L4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yE{}class bE extends yE{}function xt(t,e,...n){let r=[];e instanceof yE&&r.push(e),r=r.concat(n),(function(a){const c=a.filter((f=>f instanceof xE)).length,u=a.filter((f=>f instanceof Dy)).length;if(c>1||c>0&&u>0)throw new Ae(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Dy extends bE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dy(e,n,r)}_apply(e){const n=this._parse(e);return q4(e._query,n),new Ja(e.firestore,e.converter,rj(e._query,n))}_parse(e){const n=lm(e.firestore);return(function(a,c,u,f,h,p,g){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ae(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){IP(g,p);const E=[];for(const j of g)E.push(PP(f,a,j));y={arrayValue:{values:E}}}else y=PP(f,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||IP(g,p),y=UK(u,c,g,p==="in"||p==="not-in");return Rn.create(h,p,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function it(t,e,n){const r=e,i=Nc("where",t);return Dy._create(i,r,n)}class xE extends yE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xE(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:fs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let c=i;const u=a.getFlattenedFilters();for(const f of u)q4(c,f),c=rj(c,f)})(e._query,n),new Ja(e.firestore,e.converter,rj(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _E extends bE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _E(e,n)}_apply(e){const n=(function(i,a,c){if(i.startAt!==null)throw new Ae(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ah(a,c)})(e._query,this._field,this._direction);return new Ja(e.firestore,e.converter,vH(e._query,n))}}function Vn(t,e="asc"){const n=e,r=Nc("orderBy",t);return _E._create(r,n)}class jE extends bE{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jE(e,n,r)}_apply(e){return new Ja(e.firestore,e.converter,sv(e._query,this._limit,this._limitType))}}function Js(t){return BF("limit",t),jE._create("limit",t,"F")}function PP(t,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new Ae(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rz(e)&&n.indexOf("/")!==-1)throw new Ae(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Kt.fromString(n));if(!Ue.isDocumentKey(r))throw new Ae(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return F2(t,new Ue(r))}if(n instanceof pn)return F2(t,n._key);throw new Ae(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yy(n)}.`)}function IP(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function q4(t,e){const n=(function(i,a){for(const c of i)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ae(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function wE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ih{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dc extends z4{constructor(e,n,r,i,a,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=dc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}dc._jsonSchemaVersion="firestore/documentSnapshot/1.0",dc._jsonSchema={type:kn("string",dc._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class zg extends dc{data(e={}){return super.data(e)}}class fc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ih(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new zg(this._firestore,this._userDataWriter,r.key,r,new ih(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const f=new zg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ih(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const f=new zg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ih(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:FK(u.type),doc:f,oldIndex:h,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:t})}}fc._jsonSchemaVersion="firestore/querySnapshot/1.0",fc._jsonSchema={type:kn("string",fc._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class HK{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lm(e)}set(e,n,r){this._verifyNotCommitted();const i=Gx(e,this._firestore),a=wE(i.converter,n,r),c=hE(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,Rr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Gx(e,this._firestore);let c;return c=typeof(n=Ft(n))=="string"||n instanceof Ry?I4(this._dataReader,"WriteBatch.update",a._key,n,r,i):P4(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gx(e,this._firestore);return this._mutations=this._mutations.concat(new Ay(n._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gx(t,e){if((t=Ft(t)).firestore!==e)throw new Ae(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Er(t){t=Or(t,pn);const e=Or(t.firestore,Xs),n=am(e);return CK(n,t._key).then((r=>V4(e,t,r)))}function ht(t){t=Or(t,Ja);const e=Or(t.firestore,Xs),n=am(e),r=new vE(e);return L4(t._query),PK(n,t._query).then((i=>new fc(e,r,t,i)))}function My(t,e,n){t=Or(t,pn);const r=Or(t.firestore,Xs),i=wE(t.converter,e,n),a=lm(r);return um(r,[hE(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rr.none())])}function sn(t,e,n,...r){t=Or(t,pn);const i=Or(t.firestore,Xs),a=lm(i);let c;return c=typeof(e=Ft(e))=="string"||e instanceof Ry?I4(a,"updateDoc",t._key,e,n,r):P4(a,"updateDoc",t._key,e),um(i,[c.toMutation(t._key,Rr.exists(!0))])}function Td(t){return um(Or(t.firestore,Xs),[new Ay(t._key,Rr.none())])}function Bi(t,e){const n=Or(t.firestore,Xs),r=He(t),i=wE(t.converter,e),a=lm(t.firestore);return um(n,[hE(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rr.exists(!1))]).then((()=>r))}function U4(t,...e){t=Ft(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||CP(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(CP(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let a,c,u;if(t instanceof pn)c=Or(t.firestore,Xs),u=jy(t._key.path),a={next:h=>{e[r]&&e[r](V4(c,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Or(t,Ja);c=Or(h.firestore,Xs),u=h._query;const p=new vE(c);a={next:g=>{e[r]&&e[r](new fc(c,p,h,g))},error:e[r+1],complete:e[r+2]},L4(t._query)}const f=am(c);return TK(f,u,i,a)}function um(t,e){const n=am(t);return IK(n,e)}function V4(t,e,n){const r=n.docs.get(e._key),i=new vE(t);return new dc(t,i,e._key,r,new ih(n.hasPendingWrites,n.fromCache),e.converter)}function Oh(t){return t=Or(t,Xs),am(t),new HK(t,(e=>um(t,e)))}(function(e,n=!0){PF(Mc),xc(new ll("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Xs(new RF(r.getProvider("auth-internal")),new MF(c,r.getProvider("app-check-internal")),eH(c,i),c);return a={useFetchStreams:n,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),$s(AP,TP,e),$s(AP,TP,"esm2020")})();var GK="firebase",KK="12.8.0";$s(GK,KK,"app");const B4="firebasestorage.googleapis.com",$4="storageBucket",QK=120*1e3,WK=600*1e3;class vn extends sa{constructor(e,n,r=0){super(Kx(e),`Firebase Storage: ${n} (${Kx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gn||(gn={}));function Kx(t){return"storage/"+t}function EE(){const t="An unknown error occurred, please check the error payload for server response.";return new vn(gn.UNKNOWN,t)}function YK(t){return new vn(gn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function XK(t){return new vn(gn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function JK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vn(gn.UNAUTHENTICATED,t)}function ZK(){return new vn(gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function eQ(t){return new vn(gn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function tQ(){return new vn(gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nQ(){return new vn(gn.CANCELED,"User canceled the upload/download.")}function rQ(t){return new vn(gn.INVALID_URL,"Invalid URL '"+t+"'.")}function iQ(t){return new vn(gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function sQ(){return new vn(gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$4+"' property when initializing the app?")}function aQ(){return new vn(gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oQ(){return new vn(gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lQ(t){return new vn(gn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hj(t){return new vn(gn.INVALID_ARGUMENT,t)}function F4(){return new vn(gn.APP_DELETED,"The Firebase app was deleted.")}function cQ(t){return new vn(gn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gh(t,e){return new vn(gn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vf(t){throw new vn(gn.INTERNAL_ERROR,"Internal error: "+t)}class mi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=mi.makeFromUrl(e,n)}catch{return new mi(e,"")}if(r.path==="")return r;throw iQ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function h(P){P.path_=decodeURIComponent(P.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",x=new RegExp(`^https?://${g}/${p}/b/${i}/o${y}`,"i"),E={bucket:1,path:3},j=n===B4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",A=new RegExp(`^https?://${j}/${i}/${N}`,"i"),C=[{regex:u,indices:f,postModify:a},{regex:x,indices:E,postModify:h},{regex:A,indices:{bucket:1,path:2},postModify:h}];for(let P=0;P<C.length;P++){const M=C[P],B=M.regex.exec(e);if(B){const D=B[M.indices.bucket];let O=B[M.indices.path];O||(O=""),r=new mi(D,O),M.postModify(r);break}}if(r==null)throw rQ(e);return r}}class uQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dQ(t,e,n){let r=1,i=null,a=null,c=!1,u=0;function f(){return u===2}let h=!1;function p(...N){h||(h=!0,e.apply(null,N))}function g(N){i=setTimeout(()=>{i=null,t(x,f())},N)}function y(){a&&clearTimeout(a)}function x(N,...A){if(h){y();return}if(N){y(),p.call(null,N,...A);return}if(f()||c){y(),p.call(null,N,...A);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,g(C)}let E=!1;function j(N){E||(E=!0,y(),!h&&(i!==null?(N||(u=2),clearTimeout(i),g(0)):N||(u=1)))}return g(0),a=setTimeout(()=>{c=!0,j(!0)},n),j}function fQ(t){t(!1)}function hQ(t){return t!==void 0}function mQ(t){return typeof t=="object"&&!Array.isArray(t)}function NE(t){return typeof t=="string"||t instanceof String}function OP(t){return SE()&&t instanceof Blob}function SE(){return typeof Blob<"u"}function RP(t,e,n,r){if(r<e)throw hj(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hj(`Invalid value for '${t}'. Expected ${n} or less.`)}function zy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function H4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var hc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hc||(hc={}));function pQ(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}class gQ{constructor(e,n,r,i,a,c,u,f,h,p,g,y=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,j)=>{this.resolve_=E,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ig(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const f=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===hc.NO_ERROR,f=a.getStatus();if(!u||pQ(f,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===hc.ABORT;r(!1,new ig(!1,null,p));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new ig(h,a))})},n=(r,i)=>{const a=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());hQ(f)?a(f):a()}catch(f){c(f)}else if(u!==null){const f=EE();f.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,f)):c(f)}else if(i.canceled){const f=this.appDelete_?F4():nQ();c(f)}else{const f=tQ();c(f)}};this.canceled_?n(!1,new ig(!1,null,!0)):this.backoffId_=dQ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ig{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function vQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function yQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bQ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _Q(t,e,n,r,i,a,c=!0,u=!1){const f=H4(t.urlParams),h=t.url+f,p=Object.assign({},t.headers);return bQ(p,e),vQ(p,n),yQ(p,a),xQ(p,r),new gQ(h,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}function jQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wQ(...t){const e=jQ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(SE())return new Blob(t);throw new vn(gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function EQ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function NQ(t){if(typeof atob>"u")throw lQ("base-64");return atob(t)}const Us={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qx{constructor(e,n){this.data=e,this.contentType=n||null}}function SQ(t,e){switch(t){case Us.RAW:return new Qx(G4(e));case Us.BASE64:case Us.BASE64URL:return new Qx(K4(t,e));case Us.DATA_URL:return new Qx(TQ(e),CQ(e))}throw EE()}function G4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,c=t.charCodeAt(++n);r=65536|(a&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function AQ(t){let e;try{e=decodeURIComponent(t)}catch{throw gh(Us.DATA_URL,"Malformed data URL.")}return G4(e)}function K4(t,e){switch(t){case Us.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw gh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Us.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw gh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=NQ(e)}catch(i){throw i.message.includes("polyfill")?i:gh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Q4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw gh(Us.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=PQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function TQ(t){const e=new Q4(t);return e.base64?K4(Us.BASE64,e.rest):AQ(e.rest)}function CQ(t){return new Q4(t).contentType}function PQ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Yo{constructor(e,n){let r=0,i="";OP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(OP(this.data_)){const r=this.data_,i=EQ(r,e,n);return i===null?null:new Yo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yo(r,!0)}}static getBlob(...e){if(SE()){const n=e.map(r=>r instanceof Yo?r.data_:r);return new Yo(wQ.apply(null,n))}else{const n=e.map(c=>NE(c)?SQ(Us.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[a++]=c[u]}),new Yo(i,!0)}}uploadData(){return this.data_}}function W4(t){let e;try{e=JSON.parse(t)}catch{return null}return mQ(e)?e:null}function IQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function OQ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Y4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function RQ(t,e){return e}class Cr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||RQ}}let sg=null;function kQ(t){return!NE(t)||t.length<2?t:Y4(t)}function X4(){if(sg)return sg;const t=[];t.push(new Cr("bucket")),t.push(new Cr("generation")),t.push(new Cr("metageneration")),t.push(new Cr("name","fullPath",!0));function e(a,c){return kQ(c)}const n=new Cr("name");n.xform=e,t.push(n);function r(a,c){return c!==void 0?Number(c):c}const i=new Cr("size");return i.xform=r,t.push(i),t.push(new Cr("timeCreated")),t.push(new Cr("updated")),t.push(new Cr("md5Hash",null,!0)),t.push(new Cr("cacheControl",null,!0)),t.push(new Cr("contentDisposition",null,!0)),t.push(new Cr("contentEncoding",null,!0)),t.push(new Cr("contentLanguage",null,!0)),t.push(new Cr("contentType",null,!0)),t.push(new Cr("metadata","customMetadata",!0)),sg=t,sg}function DQ(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new mi(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function MQ(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const c=n[a];r[c.local]=c.xform(r,e[c.server])}return DQ(r,t),r}function J4(t,e,n){const r=W4(e);return r===null?null:MQ(t,r,n)}function zQ(t,e,n,r){const i=W4(e);if(i===null||!NE(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(h=>{const p=t.bucket,g=t.fullPath,y="/b/"+c(p)+"/o/"+c(g),x=zy(y,n,r),E=H4({alt:"media",token:h});return x+E})[0]}function LQ(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class AE{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Z4(t){if(!t)throw EE()}function qQ(t,e){function n(r,i){const a=J4(t,i,e);return Z4(a!==null),a}return n}function UQ(t,e){function n(r,i){const a=J4(t,i,e);return Z4(a!==null),zQ(a,i,t.host,t._protocol)}return n}function eL(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ZK():i=JK():n.getStatus()===402?i=XK(t.bucket):n.getStatus()===403?i=eQ(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function tL(t){const e=eL(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=YK(t.path)),a.serverResponse=i.serverResponse,a}return n}function VQ(t,e,n){const r=e.fullServerUrl(),i=zy(r,t.host,t._protocol),a="GET",c=t.maxOperationRetryTime,u=new AE(i,a,UQ(t,n),c);return u.errorHandler=tL(e),u}function BQ(t,e){const n=e.fullServerUrl(),r=zy(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function c(f,h){}const u=new AE(r,i,c,a);return u.successCodes=[200,204],u.errorHandler=tL(e),u}function $Q(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function FQ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=$Q(null,e)),r}function HQ(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let C="";for(let P=0;P<2;P++)C=C+Math.random().toString().slice(2);return C}const f=u();c["Content-Type"]="multipart/related; boundary="+f;const h=FQ(e,r,i),p=LQ(h,n),g="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+f+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+f+"--",x=Yo.getBlob(g,r,y);if(x===null)throw aQ();const E={name:h.fullPath},j=zy(a,t.host,t._protocol),N="POST",A=t.maxUploadRetryTime,R=new AE(j,N,qQ(t,n),A);return R.urlParams=E,R.headers=c,R.body=x.uploadData(),R.errorHandler=eL(e),R}class GQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Vf("cannot .send() more than once");if(bl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class KQ extends GQ{initXhr(){this.xhr_.responseType="text"}}function TE(){return new KQ}class Sc{constructor(e,n){this._service=e,n instanceof mi?this._location=n:this._location=mi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sc(e,n)}get root(){const e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y4(this._location.path)}get storage(){return this._service}get parent(){const e=IQ(this._location.path);if(e===null)return null;const n=new mi(this._location.bucket,e);return new Sc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cQ(e)}}function QQ(t,e,n){t._throwIfRoot("uploadBytes");const r=HQ(t.storage,t._location,X4(),new Yo(e,!0),n);return t.storage.makeRequestWithTokens(r,TE).then(i=>({metadata:i,ref:t}))}function WQ(t){t._throwIfRoot("getDownloadURL");const e=VQ(t.storage,t._location,X4());return t.storage.makeRequestWithTokens(e,TE).then(n=>{if(n===null)throw oQ();return n})}function YQ(t){t._throwIfRoot("deleteObject");const e=BQ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,TE)}function XQ(t,e){const n=OQ(t._location.path,e),r=new mi(t._location.bucket,n);return new Sc(t.storage,r)}function JQ(t){return/^[A-Za-z]+:\/\//.test(t)}function ZQ(t,e){return new Sc(t,e)}function nL(t,e){if(t instanceof CE){const n=t;if(n._bucket==null)throw sQ();const r=new Sc(n,n._bucket);return e!=null?nL(r,e):r}else return e!==void 0?XQ(t,e):t}function eW(t,e){if(e&&JQ(e)){if(t instanceof CE)return ZQ(t,e);throw hj("To use ref(service, url), the first argument must be a Storage instance.")}else return nL(t,e)}function kP(t,e){const n=e?.[$4];return n==null?null:mi.makeFromBucketSpec(n,t)}function tW(t,e,n,r={}){t.host=`${e}:${n}`;const i=bl(e);i&&(Nw(`https://${t.host}/b`),Sw("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:_M(a,t.app.options.projectId))}class CE{constructor(e,n,r,i,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=B4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QK,this._maxUploadRetryTime=WK,this._requests=new Set,i!=null?this._bucket=mi.makeFromBucketSpec(i,this._host):this._bucket=kP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,e):this._bucket=kP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sc(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new uQ(F4());{const c=_Q(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const DP="@firebase/storage",MP="0.14.0";const rL="storage";function nW(t,e,n){return t=Ft(t),QQ(t,e,n)}function rW(t){return t=Ft(t),WQ(t)}function iW(t){return t=Ft(t),YQ(t)}function zP(t,e){return t=Ft(t),eW(t,e)}function sW(t=Cw(),e){t=Ft(t);const r=my(t,rL).getImmediate({identifier:e}),i=yM("storage");return i&&aW(r,...i),r}function aW(t,e,n,r={}){tW(t,e,n,r)}function oW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new CE(n,r,i,e,Mc)}function lW(){xc(new ll(rL,oW,"PUBLIC").setMultipleInstances(!0)),$s(DP,MP,""),$s(DP,MP,"esm2020")}lW();const cW={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},PE=EM(cW),ag=TF(PE),Ne=DK(PE),LP=sW(PE),qP={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},UP=t=>qP[t]||qP.default,iL=_.createContext(null),uW=({children:t})=>{const[e,n]=_.useState(null),[r,i]=_.useState(!0),a=async y=>{try{const x=await Er(He(Ne,"users",y));if(x.exists()){const E=x.data();return{uid:y,email:E.email,displayName:E.displayName,role:E.role,isPremium:E.isPremium||!1,subscriptionEnd:E.subscriptionEnd?.toDate()||null,photoURL:E.photoURL,createdAt:E.createdAt?.toDate()||new Date,lastLogin:E.lastLogin?.toDate()}}return null}catch(x){return console.error("Erreur lors de la rcupration des donnes utilisateur:",x),null}},c=async(y,x)=>{const E=He(Ne,"users",y.uid);(await Er(E)).exists()?await sn(E,{lastLogin:en()}):await My(E,{email:y.email,displayName:y.displayName||x?.displayName||"",role:x?.role||"eleve",isPremium:!1,photoURL:y.photoURL,createdAt:en(),lastLogin:en()})},u=async(y,x)=>{try{const E=await d$(ag,y,x);await c(E.user)}catch(E){throw new Error(UP(E.code))}},f=async y=>{try{if(y.password!==y.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const x=await u$(ag,y.email,y.password);await h$(x.user,{displayName:y.displayName}),await c(x.user,{displayName:y.displayName,role:y.role})}catch(x){throw x.message?x:new Error(UP(x.code))}},h=async()=>{try{await v$(ag),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},p=async y=>{if(!e)throw new Error("Aucun utilisateur connect.");try{const x=He(Ne,"users",e.uid);await sn(x,{...y,updatedAt:en()}),n(E=>E?{...E,...y}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};_.useEffect(()=>{const y=g$(ag,async x=>{if(x){const E=await a(x.uid);n(E)}else n(null);i(!1)});return()=>y()},[]);const g={currentUser:e,loading:r,login:u,register:f,logout:h,updateProfile:p};return o.jsx(iL.Provider,{value:g,children:r?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement..."})]}):t})},Bn=()=>{const t=_.useContext(iL);if(!t)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return t},IE=({children:t,allowedRoles:e,requirePremium:n=!1})=>{const{currentUser:r,loading:i}=Bn();return i?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Vrification des autorisations..."})]}):r?e&&!e.includes(r.role)?o.jsxs("div",{className:"error-container",children:[o.jsx("h2",{children:"Accs non autoris"}),o.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),o.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!r.isPremium?o.jsxs("div",{className:"error-container premium-required",children:[o.jsx("h2",{children:"Contenu Premium"}),o.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),o.jsxs("div",{className:"premium-cta",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",o.jsx("strong",{children:"20 000 FCFA/an"})]}),o.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):o.jsx(o.Fragment,{children:t}):o.jsxs("div",{className:"error-container",children:[o.jsx("h2",{children:"Accs refus"}),o.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),o.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},ns=({children:t})=>o.jsx(IE,{allowedRoles:["admin"],children:t}),dW=({children:t})=>o.jsx(IE,{allowedRoles:["admin","prof"],children:t});const fW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),VP=t=>{const e=hW(t);return e.charAt(0).toUpperCase()+e.slice(1)},sL=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),mW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var pW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gW=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...u},f)=>_.createElement("svg",{ref:f,...pW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:sL("lucide",i),...!a&&!mW(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,p])=>_.createElement(h,p)),...Array.isArray(a)?a:[a]]));const Me=(t,e)=>{const n=_.forwardRef(({className:r,...i},a)=>_.createElement(gW,{ref:a,iconNode:e,className:sL(`lucide-${fW(VP(t))}`,`lucide-${t}`,r),...i}));return n.displayName=VP(t),n};const vW=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Wx=Me("arrow-left",vW);const yW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nc=Me("arrow-right",yW);const bW=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],pl=Me("award",bW);const xW=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],cs=Me("book-open",xW);const _W=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Yx=Me("calendar",_W);const jW=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mc=Me("chart-column",jW);const wW=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fv=Me("chevron-down",wW);const EW=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],mj=Me("chevron-up",EW);const NW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hv=Me("circle-alert",NW);const SW=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fn=Me("circle-check-big",SW);const AW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Lg=Me("circle-question-mark",AW);const TW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pj=Me("circle-x",TW);const CW=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cd=Me("clock",CW);const PW=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],IW=Me("copy",PW);const OW=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],sh=Me("crown",OW);const RW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zu=Me("eye",RW);const kW=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],DW=Me("facebook",kW);const MW=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zW=Me("file-text",MW);const LW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],OE=Me("funnel",LW);const qW=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ud=Me("graduation-cap",qW);const UW=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],VW=Me("grip-vertical",UW);const BW=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],$W=Me("heart",BW);const FW=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],gj=Me("house",FW);const HW=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],GW=Me("instagram",HW);const KW=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],BP=Me("layout-dashboard",KW);const QW=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],WW=Me("linkedin",QW);const YW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vj=Me("lock",YW);const XW=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$P=Me("log-out",XW);const JW=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ZW=Me("mail",JW);const eY=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tY=Me("map-pin",eY);const nY=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],rY=Me("menu",nY);const iY=[["path",{d:"M5 12h14",key:"1ays0h"}]],sY=Me("minus",iY);const aY=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],oY=Me("pen-line",aY);const lY=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],cY=Me("phone",lY);const uY=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],vh=Me("play",uY);const dY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],og=Me("plus",dY);const fY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],hY=Me("refresh-cw",fY);const mY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],pY=Me("rotate-ccw",mY);const gY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vY=Me("save",gY);const yY=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],aL=Me("search",yY);const bY=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xY=Me("settings",bY);const _Y=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],RE=Me("shield",_Y);const jY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pi=Me("star",jY);const wY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xx=Me("target",wY);const EY=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],NY=Me("timer",EY);const SY=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],FP=Me("trash-2",SY);const AY=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],TY=Me("trending-down",AY);const CY=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ah=Me("trending-up",CY);const PY=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],oL=Me("trophy",PY);const IY=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],OY=Me("twitter",IY);const RY=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kY=Me("user-check",RY);const DY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],MY=Me("user-x",DY);const zY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],LY=Me("user",zY);const qY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qg=Me("users",qY);const UY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pc=Me("x",UY);const VY=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],BY=Me("youtube",VY);const $Y=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lL=Me("zap",$Y),FY=()=>{const{currentUser:t,logout:e,loading:n}=Bn(),r=Nr(),i=ia(),[a,c]=_.useState(!1),[u,f]=_.useState(!1),[h,p]=_.useState(!1),g=_.useRef(null),y=[{path:"/",label:"Accueil",icon:o.jsx(gj,{size:18})},{path:"/disciplines",label:"Disciplines",icon:o.jsx(cs,{size:18})},{path:"/quiz",label:"Quiz",icon:o.jsx(ud,{size:18}),requireAuth:!0,requirePremium:!0},{path:t?.role==="eleve"?"/eleve/dashboard":t?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:o.jsx(BP,{size:18}),requireAuth:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:o.jsx(mc,{size:18}),requireAuth:!0,requireRole:["parent"]}];_.useEffect(()=>{const P=M=>{g.current&&!g.current.contains(M.target)&&f(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]),_.useEffect(()=>{c(!1),f(!1)},[i.pathname]),_.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]);const x=async()=>{try{p(!0),await e(),f(!1),r("/")}catch(P){console.error("Erreur lors de la dconnexion:",P)}finally{p(!1)}},E=()=>{c(!a)},j=()=>{f(!u)},N=P=>!(P.requireAuth&&!t||P.requirePremium&&t&&!t.isPremium||P.requireRole&&t&&!P.requireRole.includes(t.role)),A=P=>P==="/"?i.pathname==="/":i.pathname.startsWith(P),R=P=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[P]||P,C=()=>t?t.displayName?t.displayName.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2):t.email[0].toUpperCase():"?";return o.jsxs("header",{className:"header",children:[o.jsxs("div",{className:"header__container",children:[o.jsxs(et,{to:"/",className:"header__logo",children:[o.jsx(ud,{className:"header__logo-icon",size:32}),o.jsxs("div",{className:"header__logo-text",children:[o.jsx("span",{className:"header__logo-name",children:"PedaClic"}),o.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),o.jsx("nav",{className:"header__nav header__nav--desktop",children:o.jsx("ul",{className:"header__nav-list",children:y.map(P=>N(P)&&o.jsx("li",{className:"header__nav-item",children:o.jsxs(et,{to:P.path,className:`header__nav-link ${A(P.path)?"header__nav-link--active":""}`,children:[P.icon,o.jsx("span",{children:P.label}),P.requirePremium&&o.jsx(sh,{size:14,className:"header__premium-badge"})]})},P.path))})}),o.jsxs("div",{className:"header__actions",children:[n?o.jsx("div",{className:"header__loading",children:o.jsx("div",{className:"header__spinner"})}):t?o.jsxs("div",{className:"header__user",ref:g,children:[t.isPremium&&o.jsxs("span",{className:"header__premium-tag",children:[o.jsx(sh,{size:14}),"Premium"]}),o.jsxs("button",{className:"header__user-button",onClick:j,"aria-expanded":u,"aria-haspopup":"true",children:[o.jsx("div",{className:"header__avatar",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):o.jsx("span",{className:"header__avatar-initials",children:C()})}),o.jsx("span",{className:"header__user-name",children:t.displayName||t.email.split("@")[0]}),o.jsx(fv,{size:16,className:`header__chevron ${u?"header__chevron--open":""}`})]}),u&&o.jsxs("div",{className:"header__dropdown",children:[o.jsxs("div",{className:"header__dropdown-header",children:[o.jsx("p",{className:"header__dropdown-email",children:t.email}),o.jsx("span",{className:`header__dropdown-role header__dropdown-role--${t.role}`,children:R(t.role)})]}),o.jsx("div",{className:"header__dropdown-divider"}),o.jsxs("nav",{className:"header__dropdown-nav",children:[o.jsxs(et,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[o.jsx(BP,{size:18}),o.jsx("span",{children:"Tableau de bord"})]}),t.role==="eleve"&&o.jsxs(et,{to:"/eleve/suivi",className:"header__dropdown-link",children:[o.jsx(mc,{size:18}),o.jsx("span",{children:"Mes points  amliorer"})]}),t.role==="parent"&&o.jsxs(et,{to:"/parent/dashboard",className:"header__dropdown-link",children:[o.jsx(mc,{size:18}),o.jsx("span",{children:"Espace Parent"})]}),o.jsxs(et,{to:"/profil",className:"header__dropdown-link",children:[o.jsx(LY,{size:18}),o.jsx("span",{children:"Mon profil"})]}),t.role==="admin"&&o.jsxs(et,{to:"/admin",className:"header__dropdown-link",children:[o.jsx(xY,{size:18}),o.jsx("span",{children:"Administration"})]}),!t.isPremium&&o.jsxs(et,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[o.jsx(sh,{size:18}),o.jsx("span",{children:"Passer Premium"})]})]}),o.jsx("div",{className:"header__dropdown-divider"}),o.jsxs("button",{className:"header__dropdown-logout",onClick:x,disabled:h,children:[o.jsx($P,{size:18}),o.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]}):o.jsxs("div",{className:"header__auth-buttons",children:[o.jsx(et,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),o.jsx(et,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),o.jsx("button",{className:"header__mobile-toggle",onClick:E,"aria-label":a?"Fermer le menu":"Ouvrir le menu","aria-expanded":a,children:a?o.jsx(pc,{size:24}):o.jsx(rY,{size:24})})]})]}),o.jsxs("div",{className:`header__mobile-menu ${a?"header__mobile-menu--open":""}`,children:[o.jsx("div",{className:"header__mobile-overlay",onClick:()=>c(!1)}),o.jsxs("div",{className:"header__mobile-content",children:[o.jsx("nav",{className:"header__mobile-nav",children:o.jsx("ul",{className:"header__mobile-list",children:y.map(P=>N(P)&&o.jsx("li",{className:"header__mobile-item",children:o.jsxs(et,{to:P.path,className:`header__mobile-link ${A(P.path)?"header__mobile-link--active":""}`,children:[P.icon,o.jsx("span",{children:P.label}),P.requirePremium&&o.jsx(sh,{size:14,className:"header__premium-badge"})]})},P.path))})}),!t&&o.jsxs("div",{className:"header__mobile-auth",children:[o.jsx(et,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),o.jsx(et,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),t&&o.jsxs("div",{className:"header__mobile-user",children:[o.jsxs("div",{className:"header__mobile-user-info",children:[o.jsx("div",{className:"header__avatar header__avatar--large",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):o.jsx("span",{className:"header__avatar-initials",children:C()})}),o.jsxs("div",{className:"header__mobile-user-details",children:[o.jsx("p",{className:"header__mobile-user-name",children:t.displayName||t.email.split("@")[0]}),o.jsx("p",{className:"header__mobile-user-email",children:t.email})]})]}),o.jsxs("button",{className:"header__mobile-logout",onClick:x,disabled:h,children:[o.jsx($P,{size:18}),o.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},HY=()=>{const t=new Date().getFullYear(),e=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],n=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],r=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:o.jsx(DW,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:o.jsx(OY,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:o.jsx(GW,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:o.jsx(WW,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:o.jsx(BY,{size:20})}];return o.jsxs("footer",{className:"footer",children:[o.jsx("div",{className:"footer__main",children:o.jsxs("div",{className:"footer__container",children:[o.jsxs("div",{className:"footer__column footer__column--about",children:[o.jsxs(et,{to:"/",className:"footer__logo",children:[o.jsx(ud,{className:"footer__logo-icon",size:36}),o.jsxs("div",{className:"footer__logo-text",children:[o.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),o.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),o.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),o.jsxs("div",{className:"footer__stats",children:[o.jsxs("div",{className:"footer__stat",children:[o.jsx(cs,{size:18}),o.jsx("span",{children:"500+ cours"})]}),o.jsxs("div",{className:"footer__stat",children:[o.jsx(qg,{size:18}),o.jsx("span",{children:"10 000+ lves"})]})]})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),o.jsx("nav",{className:"footer__nav",children:o.jsx("ul",{className:"footer__list",children:e.map((i,a)=>o.jsx("li",{className:"footer__item",children:o.jsx(et,{to:i.path,className:"footer__link",children:i.label})},a))})})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),o.jsx("nav",{className:"footer__nav",children:o.jsx("ul",{className:"footer__list",children:n.map((i,a)=>o.jsx("li",{className:"footer__item",children:o.jsx(et,{to:i.path,className:"footer__link",children:i.label})},a))})})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),o.jsxs("div",{className:"footer__contact",children:[o.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[o.jsx(ZW,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"contact@pedaclic.sn"})]}),o.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[o.jsx(cY,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"+221 77 000 00 00"})]}),o.jsxs("div",{className:"footer__contact-item",children:[o.jsx(tY,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"Dakar, Sngal"})]})]}),o.jsxs("div",{className:"footer__social",children:[o.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),o.jsx("div",{className:"footer__social-links",children:r.map((i,a)=>o.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:i.name,children:i.icon},a))})]})]})]})}),o.jsx("div",{className:"footer__bottom",children:o.jsxs("div",{className:"footer__container footer__bottom-content",children:[o.jsxs("p",{className:"footer__copyright",children:[" ",t," PedaClic. Tous droits rservs."]}),o.jsxs("p",{className:"footer__made-with",children:["Fait avec ",o.jsx($W,{size:14,className:"footer__heart"})," au Sngal "]}),o.jsxs("nav",{className:"footer__legal",children:[o.jsxs(et,{to:"/mentions-legales",className:"footer__legal-link",children:[o.jsx(zW,{size:14})," Mentions lgales"]}),o.jsxs(et,{to:"/confidentialite",className:"footer__legal-link",children:[o.jsx(RE,{size:14})," Confidentialit"]}),o.jsxs(et,{to:"/aide",className:"footer__legal-link",children:[o.jsx(Lg,{size:14})," Aide"]})]})]})})]})},ks=({children:t,hideHeader:e=!1,hideFooter:n=!1,className:r=""})=>o.jsxs("div",{className:"layout",children:[!e&&o.jsx(FY,{}),o.jsx("main",{className:`layout__main ${e?"":"layout__main--with-header"} ${r}`,children:t}),!n&&o.jsx(HY,{})]}),GY=()=>{const{currentUser:t}=Bn();return o.jsxs("div",{className:"home-page",children:[o.jsxs("section",{className:"home-page__hero",children:[o.jsxs("div",{className:"home-page__hero-content",children:[o.jsxs("div",{className:"home-page__hero-badge",children:[o.jsx(pi,{size:14}),o.jsx("span",{children:"Plateforme N1 au Sngal"})]}),o.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",o.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),o.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),o.jsx("div",{className:"home-page__hero-cta",children:t?o.jsxs(et,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",o.jsx(nc,{size:20})]}):o.jsxs(o.Fragment,{children:[o.jsxs(et,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",o.jsx(nc,{size:20})]}),o.jsxs(et,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[o.jsx(vh,{size:18}),"Dcouvrir les cours"]})]})}),o.jsxs("div",{className:"home-page__hero-stats",children:[o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"10 000+"}),o.jsx("span",{children:"lves inscrits"})]}),o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"500+"}),o.jsx("span",{children:"Cours disponibles"})]}),o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"95%"}),o.jsx("span",{children:"Taux de russite"})]})]})]}),o.jsx("div",{className:"home-page__hero-image",children:o.jsxs("div",{className:"home-page__hero-illustration",children:[o.jsx(ud,{size:120}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),o.jsx("section",{className:"home-page__levels",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),o.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),o.jsxs("div",{className:"home-page__levels-grid",children:[o.jsxs(et,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[o.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),o.jsx("h3",{children:"Collge"}),o.jsx("p",{children:"6me  3me"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx(fn,{size:16})," Prparation au BFEM"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," 9 matires disponibles"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," Exercices corrigs"]})]}),o.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",o.jsx(nc,{size:16})]})]}),o.jsxs(et,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[o.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),o.jsx("h3",{children:"Lyce"}),o.jsx("p",{children:"2nde  Terminale"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx(fn,{size:16})," Prparation au BAC"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," 12 matires disponibles"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," Annales d'examens"]})]}),o.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",o.jsx(nc,{size:16})]})]})]})]})}),o.jsx("section",{className:"home-page__features",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),o.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),o.jsxs("div",{className:"home-page__features-grid",children:[o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon",children:o.jsx(cs,{size:28})}),o.jsx("h3",{children:"Cours complets"}),o.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:o.jsx(lL,{size:28})}),o.jsx("h3",{children:"Quiz interactifs"}),o.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:o.jsx(oL,{size:28})}),o.jsx("h3",{children:"Suivi de progression"}),o.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:o.jsx(RE,{size:28})}),o.jsx("h3",{children:"Contenu vrifi"}),o.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:o.jsx(cd,{size:28})}),o.jsx("h3",{children:"Accessible 24/7"}),o.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:o.jsx(pl,{size:28})}),o.jsx("h3",{children:"Certificats"}),o.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),o.jsx("section",{className:"home-page__premium",children:o.jsx("div",{className:"home-page__container",children:o.jsxs("div",{className:"home-page__premium-content",children:[o.jsxs("div",{className:"home-page__premium-text",children:[o.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),o.jsx("h2",{children:"Passez  la vitesse suprieure"}),o.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",o.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),o.jsxs("ul",{className:"home-page__premium-features",children:[o.jsxs("li",{children:[o.jsx(fn,{size:18})," Quiz illimits dans toutes les matires"]}),o.jsxs("li",{children:[o.jsx(fn,{size:18})," Corrections dtailles des exercices"]}),o.jsxs("li",{children:[o.jsx(fn,{size:18})," Annales des examens (BFEM, BAC)"]}),o.jsxs("li",{children:[o.jsx(fn,{size:18})," Support prioritaire"]})]}),o.jsxs(et,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",o.jsx(nc,{size:20})]})]}),o.jsx("div",{className:"home-page__premium-pricing",children:o.jsxs("div",{className:"home-page__pricing-card",children:[o.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),o.jsx("h3",{children:"Abonnement Annuel"}),o.jsxs("div",{className:"home-page__pricing-price",children:[o.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),o.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),o.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),o.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),o.jsx(et,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),o.jsx("section",{className:"home-page__testimonials",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),o.jsxs("div",{className:"home-page__testimonials-grid",children:[o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(pi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Fatou Adara"}),o.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(pi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Moussa Diallo"}),o.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(pi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Aminata Ndiaye"}),o.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),o.jsx("section",{className:"home-page__final-cta",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{children:"Prt  russir ?"}),o.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!t&&o.jsxs(et,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",o.jsx(nc,{size:24})]})]})})]})},KY=()=>{const{login:t}=Bn(),e=Nr(),r=ia().state?.from||"/",[i,a]=_.useState({email:"",password:""}),[c,u]=_.useState(!1),[f,h]=_.useState(""),[p,g]=_.useState(!1),y=j=>{const{name:N,value:A}=j.target;a(R=>({...R,[N]:A})),f&&h("")},x=()=>i.email.trim()?i.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)?!0:(h("Veuillez entrer une adresse email valide."),!1):(h("Veuillez entrer votre mot de passe."),!1):(h("Veuillez entrer votre adresse email."),!1),E=async j=>{if(j.preventDefault(),!!x()){u(!0),h("");try{await t(i.email,i.password),e(r,{replace:!0})}catch(N){N instanceof Error?h(N.message):h("Une erreur est survenue lors de la connexion.")}finally{u(!1)}}};return o.jsx("div",{className:"auth-page",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs(et,{to:"/",className:"auth-logo",children:[o.jsx("div",{className:"auth-logo__icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),o.jsx("span",{children:"PedaClic"})]}),o.jsx("h1",{className:"auth-title",children:"Connexion"}),o.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),f&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4M12 16h.01"})]}),o.jsx("span",{children:f})]}),o.jsxs("form",{onSubmit:E,className:"auth-form",children:[o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:y,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:c})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),o.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),o.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:i.password,onChange:y,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:c}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",children:p?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),o.jsx("div",{className:"auth-forgot",children:o.jsx(et,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),o.jsx("button",{type:"submit",className:"auth-button",disabled:c,children:c?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"ou"})}),o.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",o.jsx(et,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),o.jsxs("div",{className:"auth-welcome",children:[o.jsx("h2",{children:"Bienvenue sur PedaClic !"}),o.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),o.jsxs("ul",{className:"auth-features",children:[o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},QY=()=>{const{register:t}=Bn(),e=Nr(),[n,r]=_.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[i,a]=_.useState(!1),[c,u]=_.useState(""),[f,h]=_.useState(!1),[p,g]=_.useState(!1),[y,x]=_.useState(!1),E=A=>{const{name:R,value:C}=A.target;r(P=>({...P,[R]:C})),c&&u("")},j=()=>n.displayName.trim()?n.displayName.trim().length<2?(u("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(u("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(u("Les mots de passe ne correspondent pas."),!1):y?!0:(u("Veuillez accepter les conditions d'utilisation."),!1):(u("Veuillez entrer un mot de passe."),!1):(u("Veuillez entrer une adresse email valide."),!1):(u("Veuillez entrer votre adresse email."),!1):(u("Veuillez entrer votre nom complet."),!1),N=async A=>{if(A.preventDefault(),!!j()){a(!0),u("");try{await t(n),e("/disciplines",{replace:!0})}catch(R){R instanceof Error?u(R.message):u("Une erreur est survenue lors de l'inscription.")}finally{a(!1)}}};return o.jsx("div",{className:"auth-page",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card auth-card--register",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs(et,{to:"/",className:"auth-logo",children:[o.jsx("div",{className:"auth-logo__icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),o.jsx("span",{children:"PedaClic"})]}),o.jsx("h1",{className:"auth-title",children:"Crer un compte"}),o.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),c&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4M12 16h.01"})]}),o.jsx("span",{children:c})]}),o.jsxs("form",{onSubmit:N,className:"auth-form",children:[o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),o.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:E,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:i})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:E,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:i})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{className:"auth-label",children:"Je suis :"}),o.jsxs("div",{className:"auth-role-selector",children:[o.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),o.jsx("span",{children:"lve"})]})]}),o.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),o.jsx("span",{children:"Professeur"})]})]}),o.jsxs("label",{className:`auth-role-option ${n.role==="parent"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"parent",checked:n.role==="parent",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),o.jsx("span",{children:"Parent d'lve"})]})]})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),o.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),o.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:n.password,onChange:E,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:i}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>h(!f),"aria-label":f?"Masquer":"Afficher",children:f?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),o.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),o.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:E,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:i}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer":"Afficher",children:p?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),o.jsx("div",{className:"auth-checkbox-field",children:o.jsxs("label",{className:"auth-checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:y,onChange:A=>x(A.target.checked),className:"auth-checkbox",disabled:i}),o.jsx("span",{className:"auth-checkbox-custom"}),o.jsxs("span",{children:["J'accepte les"," ",o.jsx(et,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",o.jsx(et,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),o.jsx("button",{type:"submit",className:"auth-button",disabled:i,children:i?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"ou"})}),o.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",o.jsx(et,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),o.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[o.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),o.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),o.jsxs("div",{className:"auth-stats",children:[o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"10 000+"}),o.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"500+"}),o.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"95%"}),o.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),o.jsxs("div",{className:"auth-testimonial",children:[o.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),o.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},cL=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],uL=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],dL=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],fL={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function HP(t){switch(t){case"college":return cL;case"lycee":return uL;case"formation_libre":return dL;default:return[]}}function hL(t){return[...cL,...uL,...dL].find(n=>n.value===t)?.label||t}const GP=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],WY=()=>{const[t,e]=_.useState("college"),[n,r]=_.useState([]),[i,a]=_.useState(!0),c=Nr();_.useEffect(()=>{const h=xt(We(Ne,"disciplines"),Vn("ordre")),p=U4(h,g=>{const y=g.docs.map(x=>({id:x.id,...x.data(),createdAt:x.data().createdAt?.toDate()||new Date,updatedAt:x.data().updatedAt?.toDate()||new Date}));r(y),a(!1)});return()=>p()},[]);const u=n.filter(h=>h.niveau===t),f=GP.find(h=>h.niveau===t);return o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[o.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[o.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),o.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:GP.map(h=>{const p=t===h.niveau;return o.jsxs("button",{onClick:()=>e(h.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${p?h.color:"#e2e8f0"}`,background:p?h.bgLight:"#fff",color:p?h.color:"#718096",fontSize:"1rem",fontWeight:p?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:p?`0 2px 8px ${h.color}20`:"none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:h.icon}),h.label]},h.niveau)})}),i&&o.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!i&&u.length===0&&o.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[o.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),o.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",fL[t]," pour le moment."]})]}),!i&&u.length>0&&o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:u.map(h=>o.jsxs("div",{onClick:()=>c(`/disciplines/${h.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${h.couleur||f.color}`},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[o.jsx("span",{style:{fontSize:"1.8rem"},children:h.icone||""}),o.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:h.nom})]}),h.description&&o.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:h.description.length>100?`${h.description.slice(0,100)}...`:h.description}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:o.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:f.bgLight,color:f.color},children:hL(h.classe)})}),h.coefficient!==void 0&&o.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",h.coefficient]})]},h.id))})]})},Bf="disciplines",KP=t=>{const e=t.data();return{id:t.id,nom:e.nom,niveau:e.niveau,classe:e.classe,ordre:e.ordre,coefficient:e.coefficient,couleur:e.couleur,icone:e.icone,description:e.description,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},wl={async getAll(t){try{const e=[Vn("ordre","asc")];t?.niveau&&e.unshift(it("niveau","==",t.niveau)),t?.classe&&e.unshift(it("classe","==",t.classe));const n=xt(We(Ne,Bf),...e);return(await ht(n)).docs.map(KP)}catch(e){throw console.error("Erreur lors de la rcupration des disciplines:",e),new Error("Impossible de rcuprer les disciplines")}},async getById(t){try{const e=He(Ne,Bf,t),n=await Er(e);return n.exists()?KP(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la discipline:",e),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(t){return this.getAll({niveau:t})},async getByClasse(t){return this.getAll({classe:t})},async create(t){try{return(await Bi(We(Ne,Bf),{...t,createdAt:en(),updatedAt:en()})).id}catch(e){throw console.error("Erreur lors de la cration de la discipline:",e),new Error("Impossible de crer la discipline")}},async update(t,e){try{const n=He(Ne,Bf,t);await sn(n,{...e,updatedAt:en()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(t){try{const e=He(Ne,Bf,t);await Td(e)}catch(e){throw console.error("Erreur lors de la suppression de la discipline:",e),new Error("Impossible de supprimer la discipline")}},async exists(t){return await this.getById(t)!==null},async countByNiveau(t){return(await this.getByNiveau(t)).length}},Zl="ressources",YY="ressources",QP=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,titre:e.titre,type:e.type,contenu:e.contenu,description:e.description,isPremium:e.isPremium||!1,ordre:e.ordre||0,chapitre:e.chapitre,fichierURL:e.fichierURL,dureeEstimee:e.dureeEstimee,tags:e.tags||[],auteurId:e.auteurId,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},XY=t=>{const e=Date.now(),n=t.split(".").pop();return`${t.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${e}.${n}`},Sa={async getAll(t,e){try{const n=[Vn("ordre","asc")];t?.disciplineId&&n.unshift(it("disciplineId","==",t.disciplineId)),t?.chapitreId&&n.unshift(it("chapitre","==",t.chapitreId)),t?.type&&n.unshift(it("type","==",t.type)),t?.isPremium!==void 0&&n.unshift(it("isPremium","==",t.isPremium)),t?.auteurId&&n.unshift(it("auteurId","==",t.auteurId)),e&&n.push(Js(e));const r=xt(We(Ne,Zl),...n);return(await ht(r)).docs.map(QP)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(t){try{const e=He(Ne,Zl,t),n=await Er(e);return n.exists()?QP(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la ressource:",e),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(t){return this.getAll({disciplineId:t})},async getByChapitre(t){return this.getAll({chapitreId:t})},async getByType(t){return this.getAll({type:t})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(t,e){try{return(await Bi(We(Ne,Zl),{...t,auteurId:e,createdAt:en(),updatedAt:en()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(t,e){try{const n=He(Ne,Zl,t);await sn(n,{...e,updatedAt:en()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(t){try{const e=await this.getById(t);e?.fichierURL&&await this.deleteFile(e.fichierURL);const n=He(Ne,Zl,t);await Td(n)}catch(e){throw console.error("Erreur lors de la suppression de la ressource:",e),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Oh(Ne);for(const r of e){r.fichierURL&&await this.deleteFile(r.fichierURL);const i=He(Ne,Zl,r.id);n.delete(i)}await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des ressources:",e),new Error("Impossible de supprimer les ressources")}},async uploadFile(t,e){try{const n=XY(t.name),r=`${YY}/${e}/${n}`,i=zP(LP,r);return await nW(i,t),await rW(i)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(t){try{const e=zP(LP,t);await iW(e)}catch(e){console.warn("Fichier non trouv ou dj supprim:",e)}},async reorder(t,e){try{const n=Oh(Ne);e.forEach((r,i)=>{const a=He(Ne,Zl,r);n.update(a,{ordre:i+1,updatedAt:en()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(t,e){await this.update(t,{isPremium:e})},async countByType(t){return(await this.getByType(t)).length},async getStats(){try{const t=await this.getAll(),e={total:t.length,premium:t.filter(n=>n.isPremium).length,gratuit:t.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return t.forEach(n=>{e.parType[n.type]!==void 0&&e.parType[n.type]++}),e}catch(t){throw console.error("Erreur lors du calcul des statistiques:",t),new Error("Impossible de calculer les statistiques")}}},JY=()=>{const{id:t}=fy(),e=Nr(),[n,r]=_.useState(null),[i,a]=_.useState([]),[c,u]=_.useState([]),[f,h]=_.useState(!0),[p,g]=_.useState(null),[y,x]=_.useState("tous"),[E,j]=_.useState(new Set),N=_.useCallback(async()=>{if(t)try{h(!0),g(null);const k=await wl.getById(t);if(!k){g("Discipline introuvable."),h(!1);return}r(k);const U=await Sa.getAll({disciplineId:t}),L=new Map,z=[];for(const ge of U){const Z=ge.chapitre||ge.chapitreId;Z?(L.has(Z)||L.set(Z,[]),L.get(Z).push(ge)):z.push(ge)}const V=Array.from(L.entries()).map(([ge,Z])=>({chapitreNom:ge,ressources:Z.sort((H,ae)=>H.ordre-ae.ordre)})).sort((ge,Z)=>ge.chapitreNom.localeCompare(Z.chapitreNom,"fr"));a(V),u(z),V.length>0&&j(new Set([V[0].chapitreNom]))}catch(k){console.error("Erreur chargement discipline:",k),g("Impossible de charger les donnes. Ressayez plus tard.")}finally{h(!1)}},[t]);_.useEffect(()=>{N()},[N]);const A=k=>{j(U=>{const L=new Set(U);return L.has(k)?L.delete(k):L.add(k),L})},R=k=>y==="tous"?k:k.filter(U=>U.type===y),C=k=>{switch(k){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},P=k=>{switch(k){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return k}},M=k=>{switch(k){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},B=k=>k==="college"?"Collge":"Lyce";if(f)return o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[o.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),o.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(p||!n)return o.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[o.jsx("span",{style:{fontSize:"3rem"},children:""}),o.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:p||"Discipline introuvable"}),o.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),o.jsx("button",{onClick:()=>e("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const D=[...i.flatMap(k=>k.ressources),...c],O=[...new Set(D.map(k=>k.type))];return o.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[o.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[o.jsx(et,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),o.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),o.jsx(et,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),o.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),o.jsx("span",{style:{color:"#374151"},children:n.nom})]}),o.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&o.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",B(n.niveau),"  ",n.classe]}),o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",D.length," ressource",D.length!==1?"s":""]}),n.coefficient&&o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),O.length>1&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[o.jsxs("button",{onClick:()=>x("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:y==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:y==="tous"?"#2563eb":"#fff",color:y==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",D.length,")"]}),O.map(k=>{const U=D.filter(z=>z.type===k).length,L=y===k;return o.jsxs("button",{onClick:()=>x(k),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:L?`2px solid ${M(k)}`:"1px solid #d1d5db",background:L?M(k):"#fff",color:L?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[C(k)," ",P(k)," (",U,")"]},k)})]}),i.length===0&&c.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[o.jsx("span",{style:{fontSize:"3rem"},children:""}),o.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),o.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[i.map(k=>{const U=R(k.ressources);if(U.length===0&&y!=="tous")return null;const L=E.has(k.chapitreNom),z=y==="tous"?k.ressources:U;return o.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:L?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[o.jsx("button",{onClick:()=>A(k.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:L?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.25rem",transform:L?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:k.chapitreNom}),o.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[k.ressources.length," ressource",k.ressources.length!==1?"s":""]})]})]})}),L&&o.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:z.map(V=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:ge=>ge.currentTarget.style.background="#eef2ff",onMouseLeave:ge=>ge.currentTarget.style.background="#f9fafb",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:C(V.type)}),o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:V.titre}),V.description&&o.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:V.description})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:M(V.type)},children:P(V.type)}),V.isPremium&&o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),V.dureeEstimee&&o.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",V.dureeEstimee," min"]})]})]},V.id))})]},k.chapitreNom)}),R(c).length>0&&o.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:R(c).map(k=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:C(k.type)}),o.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:k.titre})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:M(k.type)},children:P(k.type)}),k.isPremium&&o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},k.id))})]})]}),o.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:o.jsx(et,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},Jx=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],ZY=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],eX=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],tX=()=>{const{currentUser:t}=Bn(),e=ia(),n=Nr(),[r,i]=_.useState("annuel"),[a,c]=_.useState(!1),[u,f]=_.useState(null),[h,p]=_.useState(null);e.state?.from;const g=()=>!t||!t.isPremium?!1:t.subscriptionEnd?(t.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t.subscriptionEnd))>new Date:!0,y=async()=>{if(!t){n("/connexion",{state:{from:"/premium"}});return}if(g()){f("Vous tes dj abonn Premium !");return}try{c(!0),f(null);const j=Jx.find(P=>P.id===r);if(!j)throw new Error("Plan invalide");const N=await Bi(We(Ne,"transactions"),{userId:t.uid,userEmail:t.email,planType:r,montant:j.prix,devise:"XOF",statut:"pending",dateTransaction:en(),createdAt:en()}),A={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${j.nom}`,item_price:j.prix,currency:"XOF",ref_command:N.id,success_url:`${window.location.origin}/premium/success?ref=${N.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${N.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:t.uid,planType:r,transactionId:N.id}),env:"test"},C=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:A.apiKey,API_SECRET:A.apiSecret},body:JSON.stringify({item_name:A.item_name,item_price:A.item_price,currency:A.currency,ref_command:A.ref_command,command_name:`Abonnement Premium ${j.nom} - ${t.email}`,env:A.env,ipn_url:A.ipn_url,success_url:A.success_url,cancel_url:A.cancel_url,custom_field:A.custom_field})})).json();if(C.success===1&&C.redirect_url)window.location.href=C.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const P=new Date,M=new Date(P);r==="mensuel"?M.setMonth(M.getMonth()+1):M.setFullYear(M.getFullYear()+1),await sn(He(Ne,"users",t.uid),{isPremium:!0,subscriptionEnd:M,subscriptionPlan:r,updatedAt:en()}),await sn(He(Ne,"transactions",N.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:M,updatedAt:en()}),n("/premium/success",{state:{plan:j.nom,montant:j.prix,expiration:M.toLocaleDateString("fr-FR")}})}}catch(j){console.error("Erreur paiement:",j),f("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{c(!1)}},x=j=>{p(h===j?null:j)},E=j=>j.toLocaleString("fr-FR")+" FCFA";if(g()){const j=t?.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t?.subscriptionEnd||Date.now());return o.jsx("div",{className:"premium-page",children:o.jsx("div",{className:"container",children:o.jsxs("div",{className:"premium-already",children:[o.jsx("span",{className:"premium-already__icon",children:""}),o.jsx("h1",{children:"Vous tes dj Premium !"}),o.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",o.jsx("strong",{children:j.toLocaleDateString("fr-FR")})]}),o.jsxs("div",{className:"premium-already__actions",children:[o.jsx(et,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),o.jsx(et,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return o.jsxs("div",{className:"premium-page",children:[o.jsx("section",{className:"premium-hero",children:o.jsxs("div",{className:"container",children:[o.jsx("span",{className:"premium-hero__badge",children:" Premium"}),o.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",o.jsx("span",{children:"PedaClic"})]}),o.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),o.jsx("section",{className:"premium-pricing",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),o.jsx("div",{className:"pricing-cards",children:Jx.map(j=>o.jsxs("div",{className:`pricing-card ${r===j.id?"pricing-card--selected":""} ${j.popular?"pricing-card--popular":""}`,onClick:()=>i(j.id),children:[j.popular&&o.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),o.jsxs("div",{className:"pricing-card__header",children:[o.jsx("h3",{className:"pricing-card__name",children:j.nom}),o.jsx("p",{className:"pricing-card__duration",children:j.duree})]}),o.jsxs("div",{className:"pricing-card__price",children:[j.prixOriginal&&o.jsx("span",{className:"pricing-card__original",children:E(j.prixOriginal)}),o.jsx("span",{className:"pricing-card__amount",children:E(j.prix)}),j.id==="mensuel"&&o.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),j.economie&&o.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",j.economie]}),o.jsx("div",{className:"pricing-card__radio",children:o.jsx("span",{className:`radio-dot ${r===j.id?"radio-dot--active":""}`})})]},j.id))}),o.jsxs("div",{className:"pricing-cta",children:[u&&o.jsxs("div",{className:"pricing-error",children:[o.jsx("span",{children:""})," ",u]}),t?o.jsx("button",{className:"btn btn--premium btn--lg",onClick:y,disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):o.jsxs(o.Fragment,{children:["Payer ",E(Jx.find(j=>j.id===r)?.prix||0)]})}):o.jsxs("div",{className:"pricing-login",children:[o.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),o.jsx(et,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),o.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",o.jsx(et,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),o.jsxs("div",{className:"payment-methods",children:[o.jsx("p",{children:"Paiement scuris par"}),o.jsxs("div",{className:"payment-methods__logos",children:[o.jsx("span",{className:"payment-logo",children:" Orange Money"}),o.jsx("span",{className:"payment-logo",children:" Wave"}),o.jsx("span",{className:"payment-logo",children:" Free Money"}),o.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),o.jsx("section",{className:"premium-features",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),o.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),o.jsx("div",{className:"features-grid",children:ZY.map((j,N)=>o.jsxs("div",{className:"feature-card",children:[o.jsx("span",{className:"feature-card__icon",children:j.icone}),o.jsx("h3",{className:"feature-card__title",children:j.titre}),o.jsx("p",{className:"feature-card__description",children:j.description})]},N))})]})}),o.jsx("section",{className:"premium-comparison",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),o.jsxs("div",{className:"comparison-table",children:[o.jsxs("div",{className:"comparison-header",children:[o.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),o.jsx("div",{className:"comparison-free",children:"Gratuit"}),o.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((j,N)=>o.jsxs("div",{className:"comparison-row",children:[o.jsx("div",{className:"comparison-feature",children:j.feature}),o.jsx("div",{className:"comparison-free",children:j.free?o.jsx("span",{className:"check",children:""}):o.jsx("span",{className:"cross",children:""})}),o.jsx("div",{className:"comparison-premium",children:o.jsx("span",{className:"check check--premium",children:""})})]},N))]})]})}),o.jsx("section",{className:"premium-testimonials",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),o.jsxs("div",{className:"testimonials-grid",children:[o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),o.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),o.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),o.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),o.jsx("section",{className:"premium-faq",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Questions frquentes"}),o.jsx("div",{className:"faq-list",children:eX.map((j,N)=>o.jsxs("div",{className:`faq-item ${h===N?"faq-item--open":""}`,children:[o.jsxs("button",{className:"faq-item__question",onClick:()=>x(N),"aria-expanded":h===N,children:[o.jsx("span",{children:j.question}),o.jsx("span",{className:"faq-item__icon",children:h===N?"":"+"})]}),h===N&&o.jsx("div",{className:"faq-item__answer",children:o.jsx("p",{children:j.reponse})})]},N))})]})}),o.jsx("section",{className:"premium-cta-final",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{children:"Prt  russir vos examens ?"}),o.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),o.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},nX=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],rs=({children:t,currentPage:e="dashboard"})=>{const{currentUser:n,logout:r}=Bn(),[i,a]=_.useState(!0),[c,u]=_.useState(!1),f=ia(),h=async()=>{try{u(!0),await r(),window.location.href="/connexion"}catch(x){console.error("Erreur lors de la dconnexion:",x),u(!1)}},p=()=>n?.displayName?n.displayName.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"AD",g=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},y=x=>x.href==="/admin"?f.pathname==="/admin"||f.pathname==="/admin/":f.pathname.startsWith(x.href);return o.jsxs("div",{className:"admin-layout",children:[o.jsxs("aside",{className:`admin-sidebar ${i?"":"admin-sidebar--collapsed"}`,children:[o.jsx("header",{className:"admin-sidebar__header",children:o.jsxs(et,{to:"/",className:"admin-sidebar__logo",children:[o.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),o.jsx("span",{children:"PedaClic"})]})}),o.jsx("nav",{className:"admin-sidebar__nav",children:nX.map((x,E)=>o.jsxs("div",{className:"admin-nav__section",children:[o.jsx("h3",{className:"admin-nav__title",children:x.title}),o.jsx("ul",{className:"admin-nav__list",children:x.items.map(j=>o.jsx("li",{className:"admin-nav__item",children:o.jsxs(et,{to:j.href,className:`admin-nav__link ${y(j)?"admin-nav__link--active":""}`,children:[o.jsx("span",{className:"admin-nav__icon",children:j.icon}),o.jsx("span",{className:"admin-nav__label",children:j.label})]})},j.id))})]},E))}),o.jsx("footer",{className:"admin-sidebar__footer",children:o.jsxs("div",{className:"admin-user",children:[o.jsx("div",{className:"admin-user__avatar",children:p()}),o.jsxs("div",{className:"admin-user__info",children:[o.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),o.jsx("div",{className:"admin-user__role",children:g()})]}),o.jsx("button",{onClick:h,disabled:c,className:"admin-logout-btn",title:"Se dconnecter",children:c?"...":""})]})})]}),o.jsxs("main",{className:"admin-content",children:[o.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>a(!i),"aria-label":"Toggle sidebar",children:""}),t]}),o.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Bo="chapitres",Zx=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,numero:e.numero,titre:e.titre,description:e.description,objectifs:e.objectifs||[],dureeEstimee:e.dureeEstimee,isPremium:e.isPremium||!1,actif:e.actif!==!1,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},$o={async getByDiscipline(t){try{const e=xt(We(Ne,Bo),it("disciplineId","==",t),Vn("numero","asc"));return(await ht(e)).docs.map(Zx)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const t=xt(We(Ne,Bo),Vn("numero","asc"));return(await ht(t)).docs.map(Zx)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getById(t){try{const e=He(Ne,Bo,t),n=await Er(e);return n.exists()?Zx(n):null}catch(e){throw console.error("Erreur lors de la rcupration du chapitre:",e),new Error("Impossible de rcuprer le chapitre")}},async create(t){try{return(await Bi(We(Ne,Bo),{...t,actif:t.actif!==!1,createdAt:en(),updatedAt:en()})).id}catch(e){throw console.error("Erreur lors de la cration du chapitre:",e),new Error("Impossible de crer le chapitre")}},async update(t,e){try{const n=He(Ne,Bo,t);await sn(n,{...e,updatedAt:en()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(t){try{const e=He(Ne,Bo,t);await Td(e)}catch(e){throw console.error("Erreur lors de la suppression du chapitre:",e),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Oh(Ne);e.forEach(r=>{const i=He(Ne,Bo,r.id);n.delete(i)}),await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des chapitres:",e),new Error("Impossible de supprimer les chapitres")}},async reorder(t,e){try{const n=Oh(Ne);e.forEach((r,i)=>{const a=He(Ne,Bo,r);n.update(a,{numero:i+1,updatedAt:en()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(t,e){await this.update(t,{actif:e})},async countByDiscipline(t){return(await this.getByDiscipline(t)).length},async getNextNumero(t){return await this.countByDiscipline(t)+1}},rX=()=>{const{currentUser:t}=Bn(),e=Nr(),[n,r]=_.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[i,a]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{(async()=>{try{a(!0),u(null);const[h,p,g,y,x]=await Promise.all([wl.getAll(),$o.getAll(),Sa.getStats(),ht(We(Ne,"quizzes")),ht(We(Ne,"quizzes_v2"))]);r({totalDisciplines:h.length,totalChapitres:p.length,totalRessources:g.total,ressourcesPremium:g.premium,ressourcesGratuites:g.gratuit,totalQuiz:y.size,totalQuizAvances:x.size,ressourcesParType:g.parType})}catch(h){console.error("Erreur lors du chargement des statistiques:",h),u("Impossible de charger les statistiques")}finally{a(!1)}})()},[]),o.jsxs("div",{className:"admin-dashboard",children:[o.jsx("header",{className:"admin-page-header",children:o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),o.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",t?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),c&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:c})})]}),i?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des statistiques..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/disciplines"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),o.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/chapitres"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),o.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/ressources"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalRessources}),o.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/ressources"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),o.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/quiz"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),o.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/quiz-avance"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),o.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),o.jsxs("section",{className:"content-card",children:[o.jsx("div",{className:"content-card__header",children:o.jsx("h2",{children:"Rpartition des ressources par type"})}),o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"resource-type-grid",children:[o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),o.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),o.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),o.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),o.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),o.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),o.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[o.jsx("div",{className:"content-card__header",children:o.jsx("h2",{children:"Actions rapides"})}),o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"quick-actions-grid",children:[o.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les disciplines"}),o.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),o.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les chapitres"}),o.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),o.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les ressources"}),o.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),o.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les quiz"}),o.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),o.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Quiz avancs"}),o.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),o.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les utilisateurs"}),o.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),o.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},$e={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},e_={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},iX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(e_),[i,a]=_.useState(null),[c,u]=_.useState(!1),[f,h]=_.useState("all");_.useEffect(()=>{const R=xt(We(Ne,"disciplines"),Vn("nom")),C=U4(R,P=>{const M=P.docs.map(B=>({id:B.id,...B.data(),createdAt:B.data().createdAt?.toDate()||new Date,updatedAt:B.data().updatedAt?.toDate()||new Date}));e(M)});return()=>C()},[]);const p=_.useCallback(R=>{const C=HP(R)[0]?.value||"6eme";r(P=>({...P,niveau:R,classe:C,coefficient:R==="formation_libre"?void 0:P.coefficient}))},[]),g=async R=>{if(R.preventDefault(),!!n.nom.trim()){u(!0);try{const C={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:Xe.now()};i?await sn(He(Ne,"disciplines",i),C):await Bi(We(Ne,"disciplines"),{...C,createdAt:Xe.now()}),r(e_),a(null)}catch(C){console.error("Erreur lors de la sauvegarde :",C),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{u(!1)}}},y=R=>{r({nom:R.nom,niveau:R.niveau,classe:R.classe,ordre:R.ordre,coefficient:R.coefficient,couleur:R.couleur||"",icone:R.icone||"",description:R.description||""}),a(R.id)},x=async(R,C)=>{if(window.confirm(`Supprimer la discipline "${C}" ? Cette action est irrversible.`))try{await Td(He(Ne,"disciplines",R))}catch(P){console.error("Erreur lors de la suppression :",P)}},E=()=>{r(e_),a(null)},j=HP(n.niveau),N=f==="all"?t:t.filter(R=>R.niveau===f),A=R=>({...$e.badge,...R==="college"?$e.badgeCollege:{},...R==="lycee"?$e.badgeLycee:{},...R==="formation_libre"?$e.badgeFormationLibre:{}});return o.jsxs("div",{style:$e.container,children:[o.jsx("h2",{style:$e.title,children:" Gestion des Disciplines"}),o.jsxs("form",{style:$e.form,onSubmit:g,children:[o.jsx("h3",{style:$e.formTitle,children:i?" Modifier la discipline":" Ajouter une discipline"}),o.jsxs("div",{style:$e.formGrid,children:[o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:"Nom de la discipline"}),o.jsx("input",{type:"text",style:$e.input,value:n.nom,onChange:R=>r({...n,nom:R.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:"Niveau"}),o.jsxs("select",{style:$e.select,value:n.niveau,onChange:R=>p(R.target.value),children:[o.jsx("option",{value:"college",children:" Collge"}),o.jsx("option",{value:"lycee",children:" Lyce"}),o.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),o.jsx("select",{style:$e.select,value:n.classe,onChange:R=>r({...n,classe:R.target.value}),children:j.map(({value:R,label:C})=>o.jsx("option",{value:R,children:C},R))})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:"Ordre d'affichage"}),o.jsx("input",{type:"number",style:$e.input,value:n.ordre,onChange:R=>r({...n,ordre:Number(R.target.value)}),placeholder:"Ex : 1",min:"0"})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsxs("label",{style:$e.label,children:["Coefficient",n.niveau==="formation_libre"&&o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"number",style:$e.input,value:n.coefficient??"",onChange:R=>r({...n,coefficient:R.target.value?Number(R.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsxs("label",{style:$e.label,children:["Couleur",o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"color",style:{...$e.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:R=>r({...n,couleur:R.target.value})})]})]}),o.jsxs("div",{style:{...$e.fieldGroup,marginBottom:"20px"},children:[o.jsxs("label",{style:$e.label,children:["Description",o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("textarea",{style:$e.textarea,value:n.description,onChange:R=>r({...n,description:R.target.value}),placeholder:"Brve description de la discipline..."})]}),o.jsxs("div",{style:{...$e.fieldGroup,marginBottom:"20px"},children:[o.jsxs("label",{style:$e.label,children:["Icne (emoji)",o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"text",style:{...$e.input,maxWidth:"120px"},value:n.icone,onChange:R=>r({...n,icone:R.target.value}),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("button",{type:"submit",style:$e.btnPrimary,disabled:c,children:c?"Enregistrement...":i?"Mettre  jour":"Ajouter la discipline"}),i&&o.jsx("button",{type:"button",style:$e.btnSecondary,onClick:E,children:"Annuler"})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{style:$e.formTitle,children:[" Disciplines existantes (",N.length,")"]}),o.jsxs("div",{style:$e.tabs,children:[o.jsx("button",{style:{...$e.tab,...f==="all"?$e.tabActive:{}},onClick:()=>h("all"),children:"Toutes"}),o.jsx("button",{style:{...$e.tab,...f==="college"?$e.tabActive:{}},onClick:()=>h("college"),children:" Collge"}),o.jsx("button",{style:{...$e.tab,...f==="lycee"?$e.tabActive:{}},onClick:()=>h("lycee"),children:" Lyce"}),o.jsx("button",{style:{...$e.tab,...f==="formation_libre"?$e.tabActive:{}},onClick:()=>h("formation_libre"),children:" Formation libre"})]}),N.length===0?o.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):N.map(R=>o.jsxs("div",{style:$e.card,children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[R.icone&&o.jsx("span",{style:{fontSize:"1.2rem"},children:R.icone}),o.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:R.nom}),o.jsx("span",{style:A(R.niveau),children:fL[R.niveau]})]}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[R.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",hL(R.classe),R.coefficient!==void 0&&o.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",R.coefficient]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{style:$e.btnEdit,onClick:()=>y(R),children:"Modifier"}),o.jsx("button",{style:$e.btnDanger,onClick:()=>x(R.id,R.nom),children:"Supprimer"})]})]},R.id))]})]})},WP={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},sX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[i,a]=_.useState(""),[c,u]=_.useState(!0),[f,h]=_.useState(!1),[p,g]=_.useState(!1),[y,x]=_.useState(null),[E,j]=_.useState(null),[N,A]=_.useState(null),[R,C]=_.useState(!1),[P,M]=_.useState(!1),[B,D]=_.useState(null),[O,k]=_.useState(null),[U,L]=_.useState({...WP,disciplineId:""}),[z,V]=_.useState({}),[ge,Z]=_.useState(""),H=_.useCallback(async()=>{try{u(!0);const Q=await wl.getAll();e(Q),Q.length>0&&!i&&a(Q[0].id)}catch(Q){console.error("Erreur lors du chargement des disciplines:",Q),j("Impossible de charger les disciplines.")}finally{u(!1)}},[i]),ae=_.useCallback(async()=>{if(!i){r([]);return}try{h(!0);const Q=await $o.getByDiscipline(i);r(Q)}catch(Q){console.error("Erreur lors du chargement des chapitres:",Q),j("Impossible de charger les chapitres.")}finally{h(!1)}},[i]);_.useEffect(()=>{H()},[H]),_.useEffect(()=>{ae()},[ae]);const X=()=>{const Q={};return U.disciplineId||(Q.disciplineId="Veuillez slectionner une discipline"),U.titre.trim()?U.titre.length<3&&(Q.titre="Le titre doit contenir au moins 3 caractres"):Q.titre="Le titre du chapitre est requis",U.numero<1&&(Q.numero="Le numro doit tre suprieur  0"),V(Q),Object.keys(Q).length===0},we=Q=>{a(Q),j(null)},W=async()=>{const Q=await $o.getNextNumero(i);D(null),L({...WP,disciplineId:i,numero:Q}),V({}),Z(""),C(!0)},F=Q=>{D(Q),L({disciplineId:Q.disciplineId,numero:Q.numero,titre:Q.titre,description:Q.description,objectifs:Q.objectifs||[],dureeEstimee:Q.dureeEstimee,isPremium:Q.isPremium,actif:Q.actif}),V({}),Z(""),C(!0)},ne=Q=>{k(Q),M(!0)},ue=()=>{C(!1),M(!1),D(null),k(null),V({}),Z("")},ve=Q=>{const{name:me,value:Te,type:ze}=Q.target,ot=Q.target.checked;L(mt=>({...mt,[me]:ze==="checkbox"?ot:ze==="number"?Number(Te):Te})),z[me]&&V(mt=>({...mt,[me]:void 0}))},fe=()=>{ge.trim()&&(L(Q=>({...Q,objectifs:[...Q.objectifs||[],ge.trim()]})),Z(""))},G=Q=>{L(me=>({...me,objectifs:(me.objectifs||[]).filter((Te,ze)=>ze!==Q)}))},ce=async Q=>{if(Q.preventDefault(),!!X())try{g(!0),j(null),B?(await $o.update(B.id,U),A("Chapitre modifi avec succs !")):(await $o.create(U),A("Chapitre cr avec succs !")),ue(),await ae(),setTimeout(()=>A(null),3e3)}catch(me){console.error("Erreur lors de la sauvegarde:",me),j("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{g(!1)}},Ce=async()=>{if(O)try{x(O.id),await $o.delete(O.id),A("Chapitre supprim avec succs !"),ue(),await ae(),setTimeout(()=>A(null),3e3)}catch(Q){console.error("Erreur lors de la suppression:",Q),j("Erreur lors de la suppression. Veuillez ressayer.")}finally{x(null)}},ie=async Q=>{try{await $o.toggleActive(Q.id,!Q.actif),await ae(),A(Q.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>A(null),2e3)}catch{j("Erreur lors de la mise  jour")}},J=Q=>{const me=t.find(Te=>Te.id===Q);return me?me.nom:"Non trouve"};return o.jsxs("div",{className:"chapitre-manager",children:[o.jsxs("header",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),o.jsx("div",{className:"admin-page-header__actions",children:o.jsxs("button",{onClick:W,className:"btn btn--primary",disabled:!i||c,children:[o.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),E&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:E})}),o.jsx("button",{onClick:()=>j(null),className:"alert__close",children:""})]}),N&&o.jsxs("div",{className:"alert alert--success",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:N})})]}),o.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"discipline-selector",children:[o.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),c?o.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?o.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",o.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):o.jsx("div",{className:"discipline-tabs",children:t.map(Q=>o.jsxs("button",{className:`discipline-tab ${i===Q.id?"discipline-tab--active":""}`,onClick:()=>we(Q.id),style:{"--discipline-color":Q.couleur||"#2563eb"},children:[o.jsx("span",{className:"discipline-tab__icon",children:Q.icone||""}),o.jsx("span",{className:"discipline-tab__name",children:Q.nom}),o.jsx("span",{className:"discipline-tab__class",children:Q.classe})]},Q.id))})]})})}),o.jsxs("div",{className:"admin-table-container",children:[o.jsx("div",{className:"admin-table-header",children:o.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",i&&`- ${J(i)}`,n.length>0&&` (${n.length})`]})}),f?o.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des chapitres..."})]}):i?n.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),o.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),o.jsx("button",{onClick:W,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):o.jsx("div",{className:"chapitres-list",children:n.map(Q=>o.jsxs("div",{className:`chapitre-card ${Q.actif?"":"chapitre-card--inactive"}`,children:[o.jsx("div",{className:"chapitre-card__number",children:Q.numero}),o.jsxs("div",{className:"chapitre-card__content",children:[o.jsxs("h3",{className:"chapitre-card__title",children:[Q.titre,Q.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"}),!Q.actif&&o.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),Q.description&&o.jsx("p",{className:"chapitre-card__description",children:Q.description}),o.jsxs("div",{className:"chapitre-card__meta",children:[Q.dureeEstimee&&o.jsxs("span",{children:[" ",Q.dureeEstimee,"h estime"]}),Q.objectifs&&Q.objectifs.length>0&&o.jsxs("span",{children:[" ",Q.objectifs.length," objectif(s)"]})]})]}),o.jsxs("div",{className:"chapitre-card__actions",children:[o.jsx("button",{onClick:()=>ie(Q),className:`table-action-btn ${Q.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:Q.actif?"Dsactiver":"Activer",children:Q.actif?"":""}),o.jsx("button",{onClick:()=>F(Q),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),o.jsx("button",{onClick:()=>ne(Q),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:y===Q.id,children:y===Q.id?"":""})]})]},Q.id))}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),o.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),R&&o.jsx("div",{className:"modal-overlay",onClick:ue,children:o.jsxs("div",{className:"modal modal--lg",onClick:Q=>Q.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:B?"Modifier le chapitre":"Nouveau chapitre"}),o.jsx("button",{onClick:ue,className:"modal__close",children:""})]}),o.jsxs("form",{onSubmit:ce,children:[o.jsxs("div",{className:"modal__body",children:[!B&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),o.jsxs("select",{name:"disciplineId",className:`form-select ${z.disciplineId?"form-select--error":""}`,value:U.disciplineId,onChange:ve,children:[o.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(Q=>o.jsxs("option",{value:Q.id,children:[Q.icone," ",Q.nom," (",Q.classe,")"]},Q.id))]}),z.disciplineId&&o.jsx("span",{className:"form-error",children:z.disciplineId})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[o.jsx("label",{className:"form-label form-label--required",children:"N"}),o.jsx("input",{type:"number",name:"numero",className:`form-input ${z.numero?"form-input--error":""}`,min:"1",value:U.numero,onChange:ve}),z.numero&&o.jsx("span",{className:"form-error",children:z.numero})]}),o.jsxs("div",{className:"form-group",style:{flex:1},children:[o.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),o.jsx("input",{type:"text",name:"titre",className:`form-input ${z.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:U.titre,onChange:ve}),z.titre&&o.jsx("span",{className:"form-error",children:z.titre})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:U.description||"",onChange:ve})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),o.jsxs("div",{className:"objectifs-input",children:[o.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:ge,onChange:Q=>Z(Q.target.value),onKeyPress:Q=>Q.key==="Enter"&&(Q.preventDefault(),fe())}),o.jsx("button",{type:"button",onClick:fe,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),U.objectifs&&U.objectifs.length>0&&o.jsx("ul",{className:"objectifs-list",children:U.objectifs.map((Q,me)=>o.jsxs("li",{className:"objectif-item",children:[o.jsxs("span",{children:[" ",Q]}),o.jsx("button",{type:"button",onClick:()=>G(me),className:"objectif-remove",children:""})]},me))})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),o.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:U.dureeEstimee||"",onChange:ve})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Options"}),o.jsxs("div",{className:"form-options",children:[o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"isPremium",checked:U.isPremium,onChange:ve}),o.jsx("span",{children:"Contenu Premium "})]}),o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"actif",checked:U.actif!==!1,onChange:ve}),o.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{type:"button",onClick:ue,className:"btn btn--outline",disabled:p,children:"Annuler"}),o.jsx("button",{type:"submit",className:"btn btn--primary",disabled:p,children:p?"Enregistrement...":B?"Mettre  jour":"Crer le chapitre"})]})]})]})}),P&&O&&o.jsx("div",{className:"modal-overlay",onClick:ue,children:o.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),o.jsx("button",{onClick:ue,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[o.jsxs("p",{children:["Supprimer le chapitre ",o.jsxs("strong",{children:[O.numero,". ",O.titre]})," ?"]}),o.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{onClick:ue,className:"btn btn--outline",children:"Annuler"}),o.jsx("button",{onClick:Ce,className:"btn btn--danger",disabled:y!==null,children:y?"Suppression...":"Supprimer"})]})]})}),o.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},lg=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],cg={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},t_=50,YP={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},aX=()=>{const{currentUser:t}=Bn(),[e,n]=_.useState([]),[r,i]=_.useState([]),[a,c]=_.useState([]),[u,f]=_.useState([]),[h,p]=_.useState(""),[g,y]=_.useState(""),[x,E]=_.useState(""),[j,N]=_.useState(""),[A,R]=_.useState(""),[C,P]=_.useState(!0),[M,B]=_.useState(!1),[D,O]=_.useState(!1),[k,U]=_.useState(!1),[L,z]=_.useState(null),[V,ge]=_.useState(!1),[Z,H]=_.useState(0),[ae,X]=_.useState(null),[we,W]=_.useState(null),[F,ne]=_.useState(!1),[ue,ve]=_.useState(!1),[fe,G]=_.useState(!1),[ce,Ce]=_.useState(null),[ie,J]=_.useState(null),[Q,me]=_.useState(null),[Te,ze]=_.useState({...YP,disciplineId:""}),[ot,mt]=_.useState({}),[vt,pr]=_.useState(null),[Rt,kt]=_.useState(null),Lr=_.useRef(null),[ye,ke]=_.useState(""),Be=_.useCallback(async()=>{try{P(!0);const te=await wl.getAll();n(te),te.length>0&&!h&&p(te[0].id)}catch(te){console.error("Erreur lors du chargement des disciplines:",te),X("Impossible de charger les disciplines.")}finally{P(!1)}},[h]),Qe=_.useCallback(async()=>{if(!h){i([]);return}try{B(!0);const te=await $o.getByDiscipline(h);i(te)}catch(te){console.error("Erreur lors du chargement des chapitres:",te)}finally{B(!1)}},[h]),Vt=_.useCallback(async()=>{if(!h){c([]),f([]);return}try{O(!0);const te=await Sa.getByDiscipline(h);c(te),f(te)}catch(te){console.error("Erreur lors du chargement des ressources:",te),X("Impossible de charger les ressources.")}finally{O(!1)}},[h]);_.useEffect(()=>{Be()},[Be]),_.useEffect(()=>{Qe()},[Qe]),_.useEffect(()=>{Vt()},[Vt]),_.useEffect(()=>{let te=[...a];if(g&&(te=te.filter(Ve=>Ve.chapitre===g)),x&&(te=te.filter(Ve=>Ve.type===x)),j==="premium"?te=te.filter(Ve=>Ve.isPremium):j==="free"&&(te=te.filter(Ve=>!Ve.isPremium)),A){const Ve=A.toLowerCase();te=te.filter(yt=>yt.titre.toLowerCase().includes(Ve)||yt.description?.toLowerCase().includes(Ve)||yt.tags?.some(Hn=>Hn.toLowerCase().includes(Ve)))}f(te)},[a,g,x,j,A]);const zn=()=>{const te={};if(Te.disciplineId||(te.disciplineId="Veuillez slectionner une discipline"),Te.titre.trim()?Te.titre.length<3&&(te.titre="Le titre doit contenir au moins 3 caractres"):te.titre="Le titre est requis",Te.type||(te.type="Veuillez slectionner un type de ressource"),vt){const Ve="."+vt.name.split(".").pop()?.toLowerCase(),yt=cg[Te.type];yt.includes(Ve)||(te.fichier=`Extension non autorise. Extensions acceptes : ${yt.join(", ")}`),vt.size/(1024*1024)>t_&&(te.fichier=`Le fichier est trop volumineux (max ${t_} Mo)`)}return mt(te),Object.keys(te).length===0},qr=te=>{p(te),y(""),X(null)},oo=()=>{Ce(null),ze({...YP,disciplineId:h}),mt({}),pr(null),kt(null),ke(""),ne(!0)},Ur=te=>{Ce(te),ze({disciplineId:te.disciplineId,titre:te.titre,type:te.type,description:te.description,contenu:te.contenu,chapitre:te.chapitre||"",ordre:te.ordre,isPremium:te.isPremium,actif:te.actif,tags:te.tags||[],duree:te.duree,urlExterne:te.urlExterne||""}),mt({}),pr(null),kt(te.fichierURL||null),ke(""),ne(!0)},Hi=te=>{me(te),G(!0)},Gc=te=>{J(te),ve(!0)},on=()=>{ne(!1),ve(!1),G(!1),Ce(null),J(null),me(null),mt({}),pr(null),kt(null),ke("")},At=te=>{const{name:Ve,value:yt,type:Hn}=te.target,Al=te.target.checked;ze(_i=>({..._i,[Ve]:Hn==="checkbox"?Al:Hn==="number"?Number(yt):yt})),ot[Ve]&&mt(_i=>({..._i,[Ve]:void 0}))},Vr=te=>{const Ve=te.target.files?.[0];if(Ve)if(pr(Ve),mt(yt=>({...yt,fichier:void 0})),Ve.type.startsWith("image/")||Ve.type.startsWith("video/")){const yt=new FileReader;yt.onloadend=()=>{kt(yt.result)},yt.readAsDataURL(Ve)}else kt(null)},nn=()=>{pr(null),kt(null),Lr.current&&(Lr.current.value="")},Sl=()=>{ye.trim()&&!Te.tags?.includes(ye.trim())&&(ze(te=>({...te,tags:[...te.tags||[],ye.trim()]})),ke(""))},lo=te=>{ze(Ve=>({...Ve,tags:(Ve.tags||[]).filter((yt,Hn)=>Hn!==te)}))},Kc=async te=>{if(te.preventDefault(),!!zn())try{U(!0),X(null);let Ve=ce?.fichierURL,yt=ce?.fichierNom;if(vt){ge(!0);const Al=ce?.id||`temp_${Date.now()}`;Ve=await Sa.uploadFile(vt,Al),yt=vt?.name||"fichier",ge(!1)}const Hn={...Te,fichierURL:Ve,fichierNom:yt};ce?(await Sa.update(ce.id,Hn),W("Ressource modifie avec succs !")):(await Sa.create(Hn,"admin"),W("Ressource cre avec succs !")),on(),await Vt(),setTimeout(()=>W(null),3e3)}catch(Ve){console.error("Erreur lors de la sauvegarde:",Ve),X("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{U(!1),ge(!1),H(0)}},bi=async()=>{if(ie)try{z(ie.id),ie.fichierURL&&await Sa.deleteFile(ie.fichierURL),await Sa.delete(ie.id),W("Ressource supprime avec succs !"),on(),await Vt(),setTimeout(()=>W(null),3e3)}catch(te){console.error("Erreur lors de la suppression:",te),X("Erreur lors de la suppression. Veuillez ressayer.")}finally{z(null)}},aa=async te=>{try{await Sa.togglePremium(te.id,!te.isPremium),await Vt(),W(te.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>W(null),2e3)}catch{X("Erreur lors de la mise  jour")}},ln=te=>{const Ve=e.find(yt=>yt.id===te);return Ve?Ve.nom:"Non trouve"},xi=te=>{const Ve=r.find(yt=>yt.id===te);return Ve?`${Ve.numero}. ${Ve.titre}`:""},gr=te=>lg.find(Ve=>Ve.value===te)||lg[0],ti=te=>te<1024?te+" o":te<1024*1024?(te/1024).toFixed(1)+" Ko":(te/(1024*1024)).toFixed(1)+" Mo";return o.jsxs("div",{className:"resource-manager",children:[o.jsxs("header",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),o.jsx("div",{className:"admin-page-header__actions",children:o.jsxs("button",{onClick:oo,className:"btn btn--primary",disabled:!h||C,children:[o.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),ae&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:ae})}),o.jsx("button",{onClick:()=>X(null),className:"alert__close",children:""})]}),we&&o.jsxs("div",{className:"alert alert--success",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:we})})]}),o.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"discipline-selector",children:[o.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),C?o.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?o.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",o.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):o.jsx("div",{className:"discipline-tabs",children:e.map(te=>o.jsxs("button",{className:`discipline-tab ${h===te.id?"discipline-tab--active":""}`,onClick:()=>qr(te.id),style:{"--discipline-color":te.couleur||"#2563eb"},children:[o.jsx("span",{className:"discipline-tab__icon",children:te.icone||""}),o.jsx("span",{className:"discipline-tab__name",children:te.nom}),o.jsx("span",{className:"discipline-tab__class",children:te.classe})]},te.id))})]})})}),o.jsxs("div",{className:"admin-table-container",children:[o.jsxs("div",{className:"admin-table-header",children:[o.jsxs("h2",{className:"admin-table-title",children:["Ressources ",h&&`- ${ln(h)}`,u.length>0&&` (${u.length})`]}),o.jsxs("div",{className:"admin-table-actions",children:[o.jsxs("div",{className:"search-input",children:[o.jsx("span",{className:"search-input__icon",children:""}),o.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:A,onChange:te=>R(te.target.value)})]}),o.jsxs("select",{className:"form-select form-select--sm",value:g,onChange:te=>y(te.target.value),disabled:M||r.length===0,children:[o.jsx("option",{value:"",children:"Tous les chapitres"}),r.map(te=>o.jsxs("option",{value:te.id,children:[te.numero,". ",te.titre]},te.id))]}),o.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:te=>E(te.target.value),children:[o.jsx("option",{value:"",children:"Tous les types"}),lg.map(te=>o.jsxs("option",{value:te.value,children:[te.icon," ",te.label]},te.value))]}),o.jsxs("select",{className:"form-select form-select--sm",value:j,onChange:te=>N(te.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"premium",children:" Premium"}),o.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),D?o.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des ressources..."})]}):h?u.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),o.jsx("p",{className:"empty-state__message",children:A||x||j||g?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!A&&!x&&!j&&!g&&o.jsx("button",{onClick:oo,className:"btn btn--primary",children:"Crer la premire ressource"})]}):o.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:u.map(te=>{const Ve=gr(te.type);return o.jsxs("div",{className:"resource-item",children:[o.jsx("div",{className:`resource-item__icon resource-item__icon--${te.type}`,style:{backgroundColor:`${Ve.color}15`,color:Ve.color},children:Ve.icon}),o.jsxs("div",{className:"resource-item__content",children:[o.jsxs("div",{className:"resource-item__title",children:[te.titre,te.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"}),!te.actif&&o.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),o.jsxs("div",{className:"resource-item__meta",children:[o.jsx("span",{children:Ve.label}),te.chapitre&&o.jsxs("span",{children:[" ",xi(te.chapitre)]}),te.duree&&o.jsxs("span",{children:[" ",te.duree," min"]}),te.fichierNom&&o.jsxs("span",{children:[" ",te.fichierNom]}),te.tags&&te.tags.length>0&&o.jsxs("span",{children:[" ",te.tags.join(", ")]})]})]}),o.jsxs("div",{className:"resource-item__actions",children:[o.jsx("button",{onClick:()=>aa(te),className:`table-action-btn ${te.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:te.isPremium?"Passer en gratuit":"Passer en Premium",children:te.isPremium?"":""}),(te.fichierURL||te.urlExterne)&&o.jsx("button",{onClick:()=>Hi(te),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),o.jsx("button",{onClick:()=>Ur(te),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),o.jsx("button",{onClick:()=>Gc(te),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:L===te.id,children:L===te.id?"":""})]})]},te.id)})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),o.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),F&&o.jsx("div",{className:"modal-overlay",onClick:on,children:o.jsxs("div",{className:"modal modal--xl",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:ce?"Modifier la ressource":"Nouvelle ressource"}),o.jsx("button",{onClick:on,className:"modal__close",children:""})]}),o.jsxs("form",{onSubmit:Kc,children:[o.jsxs("div",{className:"modal__body",children:[!ce&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),o.jsxs("select",{name:"disciplineId",className:`form-select ${ot.disciplineId?"form-select--error":""}`,value:Te.disciplineId,onChange:At,children:[o.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(te=>o.jsxs("option",{value:te.id,children:[te.icone," ",te.nom," (",te.classe,")"]},te.id))]}),ot.disciplineId&&o.jsx("span",{className:"form-error",children:ot.disciplineId})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",style:{flex:2},children:[o.jsx("label",{className:"form-label form-label--required",children:"Titre"}),o.jsx("input",{type:"text",name:"titre",className:`form-input ${ot.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:Te.titre,onChange:At}),ot.titre&&o.jsx("span",{className:"form-error",children:ot.titre})]}),o.jsxs("div",{className:"form-group",style:{flex:1},children:[o.jsx("label",{className:"form-label form-label--required",children:"Type"}),o.jsx("select",{name:"type",className:`form-select ${ot.type?"form-select--error":""}`,value:Te.type,onChange:At,children:lg.map(te=>o.jsxs("option",{value:te.value,children:[te.icon," ",te.label]},te.value))}),ot.type&&o.jsx("span",{className:"form-error",children:ot.type})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),o.jsxs("select",{name:"chapitreId",className:"form-select",value:Te.chapitre||"",onChange:At,disabled:M,children:[o.jsx("option",{value:"",children:"Aucun chapitre"}),r.map(te=>o.jsxs("option",{value:te.id,children:[te.numero,". ",te.titre]},te.id))]})]}),o.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[o.jsx("label",{className:"form-label",children:"Ordre"}),o.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:Te.ordre,onChange:At})]}),o.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[o.jsx("label",{className:"form-label",children:"Dure (min)"}),o.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:Te.duree||"",onChange:At})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:Te.description||"",onChange:At})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Fichier",o.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",cg[Te.type].join(", ")," - max ",t_," Mo)"]})]}),o.jsxs("div",{className:"file-upload",children:[o.jsx("input",{ref:Lr,type:"file",accept:cg[Te.type].join(","),onChange:Vr,className:"file-upload__input",id:"file-input"}),!vt&&!Rt?o.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[o.jsx("div",{className:"file-upload__icon",children:""}),o.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),o.jsx("p",{className:"file-upload__hint",children:cg[Te.type].join(", ")})]}):o.jsxs("div",{className:"file-upload__preview",children:[vt?.type.startsWith("image/")&&Rt&&o.jsx("img",{src:Rt,alt:"Aperu",className:"file-preview__image"}),vt?.type.startsWith("video/")&&Rt&&o.jsx("video",{src:Rt,controls:!0,className:"file-preview__video"}),!vt?.type.startsWith("image/")&&!vt?.type.startsWith("video/")&&o.jsx("div",{className:"file-preview__document",children:o.jsx("span",{className:"file-preview__icon",children:gr(Te.type).icon})}),o.jsxs("div",{className:"file-preview__info",children:[o.jsx("p",{className:"file-preview__name",children:vt?.name||ce?.fichierNom}),vt&&o.jsx("p",{className:"file-preview__size",children:ti(vt.size)})]}),o.jsx("button",{type:"button",onClick:nn,className:"file-preview__remove",children:""})]})]}),ot.fichier&&o.jsx("span",{className:"form-error",children:ot.fichier}),V&&o.jsxs("div",{className:"upload-progress",children:[o.jsx("div",{className:"upload-progress__bar",style:{width:`${Z}%`}}),o.jsxs("span",{className:"upload-progress__text",children:[Z,"%"]})]})]}),Te.type==="video"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),o.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:Te.urlExterne||"",onChange:At}),o.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),Te.type==="cours"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Contenu du cours"}),o.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:Te.contenu||"",onChange:At}),o.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Tags"}),o.jsxs("div",{className:"tags-input",children:[o.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:ye,onChange:te=>ke(te.target.value),onKeyPress:te=>te.key==="Enter"&&(te.preventDefault(),Sl())}),o.jsx("button",{type:"button",onClick:Sl,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),Te.tags&&Te.tags.length>0&&o.jsx("div",{className:"tags-list",children:Te.tags.map((te,Ve)=>o.jsxs("span",{className:"tag",children:[te,o.jsx("button",{type:"button",onClick:()=>lo(Ve),className:"tag__remove",children:""})]},Ve))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Options"}),o.jsxs("div",{className:"form-options",children:[o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"isPremium",checked:Te.isPremium,onChange:At}),o.jsx("span",{children:"Contenu Premium "})]}),o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"actif",checked:Te.actif!==!1,onChange:At}),o.jsx("span",{children:"Ressource active"})]})]})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{type:"button",onClick:on,className:"btn btn--outline",disabled:k||V,children:"Annuler"}),o.jsx("button",{type:"submit",className:"btn btn--primary",disabled:k||V,children:k||V?V?`Upload ${Z}%...`:"Enregistrement...":ce?"Mettre  jour":"Crer la ressource"})]})]})]})}),fe&&Q&&o.jsx("div",{className:"modal-overlay",onClick:on,children:o.jsxs("div",{className:"modal modal--xl",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsxs("h2",{className:"modal__title",children:[gr(Q.type).icon," ",Q.titre]}),o.jsx("button",{onClick:on,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[Q.type==="video"&&Q.urlExterne?o.jsx("div",{className:"preview-video",children:o.jsx("iframe",{src:Q.urlExterne.replace("watch?v=","embed/"),title:Q.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):Q.fichierURL?o.jsx("div",{className:"preview-file",children:Q.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?o.jsx("img",{src:Q.fichierURL,alt:Q.titre}):Q.fichierURL.match(/\.(mp4|webm)$/i)?o.jsx("video",{src:Q.fichierURL,controls:!0}):Q.fichierURL.match(/\.pdf$/i)?o.jsx("iframe",{src:Q.fichierURL,title:Q.titre}):o.jsxs("div",{className:"preview-download",children:[o.jsx("span",{className:"preview-download__icon",children:gr(Q.type).icon}),o.jsx("p",{children:Q.fichierNom}),o.jsx("a",{href:Q.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):Q.contenu?o.jsx("div",{className:"preview-content",children:o.jsx("p",{children:Q.contenu})}):o.jsx("div",{className:"preview-empty",children:o.jsx("p",{children:"Aucun contenu  prvisualiser"})}),o.jsxs("div",{className:"preview-info",children:[Q.description&&o.jsx("p",{className:"preview-description",children:Q.description}),o.jsxs("div",{className:"preview-meta",children:[o.jsxs("span",{children:["Type : ",gr(Q.type).label]}),Q.duree&&o.jsxs("span",{children:["Dure : ",Q.duree," min"]}),Q.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),ue&&ie&&o.jsx("div",{className:"modal-overlay",onClick:on,children:o.jsxs("div",{className:"modal",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),o.jsx("button",{onClick:on,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[o.jsxs("p",{children:["Supprimer la ressource ",o.jsx("strong",{children:ie.titre})," ?"]}),ie.fichierURL&&o.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{onClick:on,className:"btn btn--outline",children:"Annuler"}),o.jsx("button",{onClick:bi,className:"btn btn--danger",disabled:L!==null,children:L?"Suppression...":"Supprimer"})]})]})}),o.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},mL=We(Ne,"quizzes"),pL=async t=>{try{let e=xt(mL,Vn("titre","asc"));t?.disciplineId;let r=(await ht(e)).docs.map(i=>({id:i.id,...i.data()}));return t?.isPremium,t?.difficulte,r}catch(e){throw console.error("Erreur lors de la rcupration des quiz :",e),e}},oX=async t=>{try{const e=await Er(He(Ne,"quizzes",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Erreur lors de la rcupration du quiz :",e),e}},lX=async t=>{try{return(await Bi(mL,{...t,createdAt:Xe.now(),updatedAt:Xe.now()})).id}catch(e){throw console.error("Erreur lors de la cration du quiz :",e),e}},cX=async(t,e)=>{try{await sn(He(Ne,"quizzes",t),{...e,updatedAt:Xe.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},uX=async t=>{try{await Td(He(Ne,"quizzes",t))}catch(e){throw console.error("Erreur lors de la suppression du quiz :",e),e}},dX=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,XP=()=>({id:dX(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),JP=t=>{const e=t.questions||[],n=e.reduce((i,a)=>i+(a.points||1),0),r={facile:e.filter(i=>i.difficulte==="facile").length,moyen:e.filter(i=>i.difficulte==="moyen").length,difficile:e.filter(i=>i.difficulte==="difficile").length};return{nombreQuestions:e.length,totalPoints:n,parDifficulte:r,duree:t.duree||0}},fX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[i,a]=_.useState(!0),[c,u]=_.useState(null),[f,h]=_.useState(null),[p,g]=_.useState(""),[y,x]=_.useState(""),[E,j]=_.useState(""),[N,A]=_.useState(""),[R,C]=_.useState(!1),[P,M]=_.useState("list"),[B,D]=_.useState(null),[O,k]=_.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[U,L]=_.useState(null),[z,V]=_.useState(!1),[ge,Z]=_.useState(null),[H,ae]=_.useState(null),[X,we]=_.useState({}),[W,F]=_.useState(!1),ne=_.useCallback(async()=>{a(!0),u(null);try{const[ye,ke]=await Promise.all([pL(),wl.getAll()]);e(ye),r(ke.map(Be=>({id:Be.id,nom:Be.nom||Be.name||Be.id})))}catch(ye){u("Erreur lors du chargement des donnes."),console.error(ye)}finally{a(!1)}},[]);_.useEffect(()=>{ne()},[ne]),_.useEffect(()=>{if(f){const ye=setTimeout(()=>h(null),4e3);return()=>clearTimeout(ye)}},[f]);const ue=t.filter(ye=>{if(p){const ke=p.toLowerCase();if(!ye.titre.toLowerCase().includes(ke))return!1}return!(y&&ye.disciplineId!==y||E==="true"&&!ye.isPremium||E==="false"&&ye.isPremium||N&&!ye.questions?.some(Be=>Be.difficulte===N))}),ve=()=>{D(null),k({disciplineId:"",titre:"",questions:[XP()],duree:15,isPremium:!1,noteMinimale:50}),L(null),M("form")},fe=ye=>{D(ye),k({disciplineId:ye.disciplineId,titre:ye.titre,questions:ye.questions||[],duree:ye.duree||15,isPremium:ye.isPremium||!1,noteMinimale:ye.noteMinimale||50}),L(null),M("form")},G=async()=>{if(!O.titre.trim()){u("Le titre du quiz est obligatoire.");return}if(!O.disciplineId){u("Veuillez slectionner une discipline.");return}if(O.questions.length===0){u("Le quiz doit contenir au moins une question.");return}for(let ye=0;ye<O.questions.length;ye++){const ke=O.questions[ye];if(!ke.question.trim()){u(`La question ${ye+1} n'a pas d'nonc.`);return}if(ke.options.filter(Qe=>!Qe.trim()).length>0){u(`La question ${ye+1} a des options vides.`);return}}V(!0),u(null);try{B?(await cX(B.id,O),h("Quiz mis  jour avec succs !")):(await lX(O),h("Quiz cr avec succs !")),await ne(),M("list")}catch(ye){u("Erreur lors de la sauvegarde du quiz."),console.error(ye)}finally{V(!1)}},ce=async ye=>{try{await uX(ye),h("Quiz supprim avec succs."),Z(null),await ne()}catch(ke){u("Erreur lors de la suppression du quiz."),console.error(ke)}},Ce=()=>{const ye=XP();k(ke=>({...ke,questions:[...ke.questions,ye]})),L(ye.id)},ie=ye=>{const ke=O.questions.find(zn=>zn.id===ye);if(!ke)return;const Be={...ke,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${ke.question} (copie)`},Qe=O.questions.findIndex(zn=>zn.id===ye),Vt=[...O.questions];Vt.splice(Qe+1,0,Be),k(zn=>({...zn,questions:Vt})),L(Be.id)},J=ye=>{k(ke=>({...ke,questions:ke.questions.filter(Be=>Be.id!==ye)})),U===ye&&L(null)},Q=(ye,ke,Be)=>{k(Qe=>({...Qe,questions:Qe.questions.map(Vt=>Vt.id===ye?{...Vt,[ke]:Be}:Vt)}))},me=(ye,ke,Be)=>{k(Qe=>({...Qe,questions:Qe.questions.map(Vt=>Vt.id===ye?{...Vt,options:Vt.options.map((zn,qr)=>qr===ke?Be:zn)}:Vt)}))},Te=ye=>{ae(ye),we({}),F(!1),M("preview")},ze=(ye,ke)=>{W||we(Be=>({...Be,[ye]:ke}))},ot=()=>{F(!0)},mt=ye=>n.find(ke=>ke.id===ye)?.nom||ye,vt=({level:ye})=>{const ke={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return o.jsx("span",{className:`quiz-badge ${ke[ye]||"quiz-badge-moyen"}`,children:ye.charAt(0).toUpperCase()+ye.slice(1)})},pr=()=>o.jsxs(o.Fragment,{children:[c&&o.jsxs("div",{className:"admin-message admin-message-error",children:[o.jsx(hv,{size:18}),o.jsx("span",{children:c}),o.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:o.jsx(pc,{size:16})})]}),f&&o.jsxs("div",{className:"admin-message admin-message-success",children:[o.jsx(fn,{size:18}),o.jsx("span",{children:f})]})]}),Rt=()=>o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(cs,{size:24})," Gestion des Quiz"]}),o.jsxs("p",{className:"admin-subtitle",children:[t.length," quiz au total  ",ue.length," affich(s)"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ve,children:[o.jsx(og,{size:18})," Nouveau Quiz"]})]}),o.jsxs("div",{className:"admin-toolbar",children:[o.jsxs("div",{className:"admin-search-wrapper",children:[o.jsx(aL,{size:18,className:"admin-search-icon"}),o.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:p,onChange:ye=>g(ye.target.value)})]}),o.jsxs("button",{className:`admin-btn admin-btn-outline ${R?"active":""}`,onClick:()=>C(!R),children:[o.jsx(OE,{size:16})," Filtres",R?o.jsx(mj,{size:14}):o.jsx(fv,{size:14})]})]}),R&&o.jsxs("div",{className:"admin-filters-panel",children:[o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Discipline"}),o.jsxs("select",{className:"admin-select",value:y,onChange:ye=>x(ye.target.value),children:[o.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(ye=>o.jsx("option",{value:ye.id,children:ye.nom},ye.id))]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Accs"}),o.jsxs("select",{className:"admin-select",value:E,onChange:ye=>j(ye.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"false",children:"Gratuit"}),o.jsx("option",{value:"true",children:"Premium"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Difficult"}),o.jsxs("select",{className:"admin-select",value:N,onChange:ye=>A(ye.target.value),children:[o.jsx("option",{value:"",children:"Toutes"}),o.jsx("option",{value:"facile",children:"Facile"}),o.jsx("option",{value:"moyen",children:"Moyen"}),o.jsx("option",{value:"difficile",children:"Difficile"})]})]}),o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),A(""),g("")},children:"Rinitialiser"})]}),i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des quiz..."})]}):ue.length===0?o.jsxs("div",{className:"admin-empty-state",children:[o.jsx(Lg,{size:48}),o.jsx("h3",{children:"Aucun quiz trouv"}),o.jsx("p",{children:t.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),t.length===0&&o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ve,children:[o.jsx(og,{size:18})," Crer un quiz"]})]}):o.jsx("div",{className:"quiz-grid",children:ue.map(ye=>{const ke=JP(ye);return o.jsxs("div",{className:"quiz-card",children:[o.jsxs("div",{className:"quiz-card-header",children:[o.jsxs("div",{className:"quiz-card-title-row",children:[o.jsx("h3",{className:"quiz-card-title",children:ye.titre}),ye.isPremium&&o.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[o.jsx(pi,{size:12})," Premium"]})]}),o.jsx("span",{className:"quiz-card-discipline",children:mt(ye.disciplineId)})]}),o.jsxs("div",{className:"quiz-card-stats",children:[o.jsxs("div",{className:"quiz-stat",children:[o.jsx(Lg,{size:14}),o.jsxs("span",{children:[ke.nombreQuestions," question(s)"]})]}),o.jsxs("div",{className:"quiz-stat",children:[o.jsx(pl,{size:14}),o.jsxs("span",{children:[ke.totalPoints," pts"]})]}),o.jsxs("div",{className:"quiz-stat",children:[o.jsx(cd,{size:14}),o.jsxs("span",{children:[ke.duree," min"]})]})]}),o.jsxs("div",{className:"quiz-card-difficulty",children:[ke.parDifficulte.facile>0&&o.jsx(vt,{level:"facile"}),ke.parDifficulte.moyen>0&&o.jsx(vt,{level:"moyen"}),ke.parDifficulte.difficile>0&&o.jsx(vt,{level:"difficile"})]}),o.jsxs("div",{className:"quiz-card-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>Te(ye),title:"Prvisualiser",children:[o.jsx(Zu,{size:14})," Aperu"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>fe(ye),title:"Modifier",children:[o.jsx(oY,{size:14})," Modifier"]}),ge===ye.id?o.jsxs("div",{className:"quiz-delete-confirm",children:[o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>ce(ye.id),children:"Confirmer"}),o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>Z(null),children:"Annuler"})]}):o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>Z(ye.id),title:"Supprimer",children:o.jsx(FP,{size:14})})]})]},ye.id)})})]}),kt=()=>o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(cs,{size:24}),B?"Modifier le quiz":"Nouveau quiz"]}),o.jsxs("p",{className:"admin-subtitle",children:[O.questions.length," question(s) ajoute(s)"]})]}),o.jsxs("div",{className:"admin-header-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>M("list"),children:[o.jsx(pc,{size:18})," Annuler"]}),o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:G,disabled:z,children:[o.jsx(vY,{size:18})," ",z?"Enregistrement...":"Enregistrer"]})]})]}),o.jsxs("div",{className:"admin-card quiz-form-section",children:[o.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),o.jsxs("div",{className:"quiz-form-grid",children:[o.jsxs("div",{className:"admin-form-group quiz-form-full",children:[o.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),o.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:O.titre,onChange:ye=>k(ke=>({...ke,titre:ye.target.value}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Discipline *"}),o.jsxs("select",{className:"admin-select",value:O.disciplineId,onChange:ye=>k(ke=>({...ke,disciplineId:ye.target.value})),children:[o.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(ye=>o.jsx("option",{value:ye.id,children:ye.nom},ye.id))]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),o.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:O.duree,onChange:ye=>k(ke=>({...ke,duree:parseInt(ye.target.value)||15}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),o.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:O.noteMinimale,onChange:ye=>k(ke=>({...ke,noteMinimale:parseInt(ye.target.value)||50}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Accs"}),o.jsxs("div",{className:`quiz-toggle ${O.isPremium?"quiz-toggle-active":""}`,onClick:()=>k(ye=>({...ye,isPremium:!ye.isPremium})),children:[o.jsx(pi,{size:16}),o.jsx("span",{children:O.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),o.jsxs("div",{className:"admin-card quiz-form-section",children:[o.jsxs("div",{className:"quiz-questions-header",children:[o.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",O.questions.length,")"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Ce,children:[o.jsx(og,{size:14})," Ajouter une question"]})]}),O.questions.length===0?o.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[o.jsx(Lg,{size:36}),o.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):o.jsx("div",{className:"quiz-questions-list",children:O.questions.map((ye,ke)=>o.jsxs("div",{className:`quiz-question-item ${U===ye.id?"expanded":""}`,children:[o.jsxs("div",{className:"quiz-question-header",onClick:()=>L(U===ye.id?null:ye.id),children:[o.jsxs("div",{className:"quiz-question-header-left",children:[o.jsx(VW,{size:16,className:"quiz-grip-icon"}),o.jsxs("span",{className:"quiz-question-number",children:["Q",ke+1]}),o.jsx("span",{className:"quiz-question-preview",children:ye.question||"Question sans nonc..."})]}),o.jsxs("div",{className:"quiz-question-header-right",children:[o.jsx(vt,{level:ye.difficulte||"moyen"}),o.jsxs("span",{className:"quiz-question-points",children:[ye.points," pt(s)"]}),U===ye.id?o.jsx(mj,{size:16}):o.jsx(fv,{size:16})]})]}),U===ye.id&&o.jsxs("div",{className:"quiz-question-body",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"nonc de la question *"}),o.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:ye.question,onChange:Be=>Q(ye.id,"question",Be.target.value)})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),o.jsx("div",{className:"quiz-options-grid",children:ye.options.map((Be,Qe)=>o.jsxs("div",{className:`quiz-option-item ${ye.reponseCorrecte===Qe?"quiz-option-correct":""}`,children:[o.jsx("button",{type:"button",className:`quiz-option-radio ${ye.reponseCorrecte===Qe?"active":""}`,onClick:()=>Q(ye.id,"reponseCorrecte",Qe),title:ye.reponseCorrecte===Qe?"Bonne rponse":"Marquer comme bonne rponse",children:ye.reponseCorrecte===Qe?o.jsx(fn,{size:16}):o.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+Qe)})}),o.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+Qe)}`,value:Be,onChange:Vt=>me(ye.id,Qe,Vt.target.value)})]},Qe))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),o.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:ye.explication,onChange:Be=>Q(ye.id,"explication",Be.target.value)})]}),o.jsxs("div",{className:"quiz-question-meta",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Difficult"}),o.jsxs("select",{className:"admin-select",value:ye.difficulte,onChange:Be=>Q(ye.id,"difficulte",Be.target.value),children:[o.jsx("option",{value:"facile",children:"Facile"}),o.jsx("option",{value:"moyen",children:"Moyen"}),o.jsx("option",{value:"difficile",children:"Difficile"})]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Points"}),o.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:ye.points,onChange:Be=>Q(ye.id,"points",parseInt(Be.target.value)||1)})]})]}),o.jsxs("div",{className:"quiz-question-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ie(ye.id),children:[o.jsx(IW,{size:14})," Dupliquer"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>J(ye.id),children:[o.jsx(FP,{size:14})," Supprimer"]})]})]})]},ye.id))}),O.questions.length>0&&o.jsx("div",{className:"quiz-add-question-bottom",children:o.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Ce,children:[o.jsx(og,{size:16})," Ajouter une question"]})})]})]}),Lr=()=>{if(!H)return null;const ye=JP(H);let ke=0,Be=0;return W&&H.questions.forEach(Qe=>{Be+=Qe.points||1,X[Qe.id]===Qe.reponseCorrecte&&(ke+=Qe.points||1)}),o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(Zu,{size:24})," Prvisualisation : ",H.titre]}),o.jsxs("p",{className:"admin-subtitle",children:[mt(H.disciplineId),"  ",ye.nombreQuestions," questions  ",ye.duree," min"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{M("list"),ae(null)},children:[o.jsx(pc,{size:18})," Fermer"]})]}),W&&o.jsxs("div",{className:`quiz-preview-score ${ke/Be>=(H.noteMinimale||50)/100?"success":"fail"}`,children:[o.jsx(pl,{size:32}),o.jsxs("div",{children:[o.jsxs("h3",{children:["Score : ",ke,"/",Be," (",Math.round(ke/Be*100),"%)"]}),o.jsxs("p",{children:["Note minimale : ",H.noteMinimale||50,"% "," ",ke/Be>=(H.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),o.jsx("div",{className:"quiz-preview-questions",children:H.questions.map((Qe,Vt)=>{const zn=X[Qe.id],qr=zn===Qe.reponseCorrecte;return o.jsxs("div",{className:"admin-card quiz-preview-question",children:[o.jsxs("div",{className:"quiz-preview-question-header",children:[o.jsxs("span",{className:"quiz-question-number",children:["Q",Vt+1]}),o.jsx(vt,{level:Qe.difficulte||"moyen"}),o.jsxs("span",{className:"quiz-question-points",children:[Qe.points," pt(s)"]})]}),o.jsx("p",{className:"quiz-preview-question-text",children:Qe.question}),o.jsx("div",{className:"quiz-preview-options",children:Qe.options.map((oo,Ur)=>{let Hi="quiz-preview-option";return W?Ur===Qe.reponseCorrecte?Hi+=" correct":Ur===zn&&!qr&&(Hi+=" incorrect"):zn===Ur&&(Hi+=" selected"),o.jsxs("button",{className:Hi,onClick:()=>ze(Qe.id,Ur),disabled:W,children:[o.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+Ur)}),o.jsx("span",{children:oo}),W&&Ur===Qe.reponseCorrecte&&o.jsx(fn,{size:16,className:"quiz-preview-check"})]},Ur)})}),W&&Qe.explication&&o.jsxs("div",{className:"quiz-preview-explication",children:[o.jsx("strong",{children:"Explication :"})," ",Qe.explication]})]},Qe.id)})}),!W&&o.jsx("div",{className:"quiz-preview-submit",children:o.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:ot,disabled:Object.keys(X).length<H.questions.length,children:[o.jsx(fn,{size:18})," Soumettre (",Object.keys(X).length,"/",H.questions.length,")"]})})]})};return o.jsxs("div",{className:"admin-container",children:[pr(),P==="list"&&Rt(),P==="form"&&kt(),P==="preview"&&Lr()]})},gL=We(Ne,"users"),hX=We(Ne,"quizResults"),mX=async t=>{try{let e=xt(gL,Vn("displayName","asc"));t?.role;let r=(await ht(e)).docs.map(i=>({uid:i.id,...i.data()}));return t?.isPremium,t?.isActive,t?.search,r}catch(e){throw console.error("Erreur lors de la rcupration des utilisateurs :",e),e}},pX=async(t,e)=>{try{await sn(He(Ne,"users",t),{role:e,updatedAt:Xe.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},gX=async(t,e)=>{try{const n={isPremium:e,updatedAt:Xe.now()};if(e){const r=new Date;r.setDate(r.getDate()+30),n.subscriptionEnd=Xe.fromDate(r)}else n.subscriptionEnd=null;await sn(He(Ne,"users",t),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},vX=async(t,e)=>{try{await sn(He(Ne,"users",t),{isActive:e,updatedAt:Xe.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},yX=async t=>{try{const e=xt(hX,it("userId","==",t)),r=(await ht(e)).docs.map(f=>({id:f.id,...f.data()})),i=r.length,a=r.filter(f=>f.reussi).length,c=i>0?Math.round(r.reduce((f,h)=>f+h.score,0)/i):0,u=r.length>0?new Date(Math.max(...r.map(f=>{const h=f.datePassage;return h?.toDate?h.toDate().getTime():new Date(h).getTime()}))):null;return{totalQuizPasses:i,scoresMoyens:c,quizReussis:a,dernierQuiz:u}}catch(e){return console.error("Erreur lors du calcul des statistiques :",e),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},bX=async()=>{try{const e=(await ht(gL)).docs.map(n=>n.data());return{total:e.length,admins:e.filter(n=>n.role==="admin").length,profs:e.filter(n=>n.role==="prof").length,eleves:e.filter(n=>n.role==="eleve").length,premium:e.filter(n=>n.isPremium).length,actifs:e.filter(n=>n.isActive!==!1).length}}catch(t){throw console.error("Erreur lors du calcul des stats globales :",t),t}},xX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(null),[i,a]=_.useState(!0),[c,u]=_.useState(null),[f,h]=_.useState(null),[p,g]=_.useState(""),[y,x]=_.useState(""),[E,j]=_.useState(""),[N,A]=_.useState(""),[R,C]=_.useState(!1),[P]=I8();_.useEffect(()=>{P.get("filter")==="premium"&&j("true")},[P]);const[M,B]=_.useState(null),[D,O]=_.useState(null),[k,U]=_.useState(!1),[L,z]=_.useState(null),[V,ge]=_.useState(null),Z=_.useCallback(async()=>{a(!0),u(null);try{const[G,ce]=await Promise.all([mX(),bX()]);e(G),r(ce)}catch(G){u("Erreur lors du chargement des utilisateurs."),console.error(G)}finally{a(!1)}},[]);_.useEffect(()=>{Z()},[Z]),_.useEffect(()=>{if(f){const G=setTimeout(()=>h(null),4e3);return()=>clearTimeout(G)}},[f]);const H=t.filter(G=>{if(p){const ce=p.toLowerCase();if(!G.displayName?.toLowerCase().includes(ce)&&!G.email?.toLowerCase().includes(ce))return!1}return!(y&&G.role!==y||E==="true"&&!G.isPremium||E==="false"&&G.isPremium||N==="true"&&G.isActive===!1||N==="false"&&G.isActive!==!1)}),ae=async G=>{B(G),U(!0);try{const ce=await yX(G.uid);O(ce)}catch(ce){console.error("Erreur lors du chargement des statistiques :",ce),O(null)}finally{U(!1)}},X=async()=>{if(V){z(V.userId);try{switch(V.type){case"role":await pX(V.userId,V.value),h("Rle mis  jour avec succs.");break;case"premium":await gX(V.userId,V.value),h(V.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await vX(V.userId,V.value),h(V.value?"Compte ractiv.":"Compte dsactiv.");break}await Z()}catch(G){u("Erreur lors de l'excution de l'action."),console.error(G)}finally{z(null),ge(null)}}},we=({role:G})=>{const ce={admin:{icon:o.jsx(RE,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:o.jsx(ud,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:o.jsx(cs,{size:12}),className:"user-badge-eleve",label:"lve"}},Ce=ce[G]||ce.eleve;return o.jsxs("span",{className:`user-badge ${Ce.className}`,children:[Ce.icon," ",Ce.label]})},W=G=>G?(G?.toDate?G.toDate():new Date(G)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",F=G=>G?G.charAt(0).toUpperCase():"?",ne=()=>o.jsxs(o.Fragment,{children:[c&&o.jsxs("div",{className:"admin-message admin-message-error",children:[o.jsx(hv,{size:18}),o.jsx("span",{children:c}),o.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:o.jsx(pc,{size:16})})]}),f&&o.jsxs("div",{className:"admin-message admin-message-success",children:[o.jsx(fn,{size:18}),o.jsx("span",{children:f})]})]}),ue=()=>{if(!n)return null;const G=[{label:"Total",value:n.total,icon:o.jsx(qg,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:o.jsx(cs,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:o.jsx(ud,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:o.jsx(pi,{size:20}),color:"stat-gold"}];return o.jsx("div",{className:"user-stats-grid",children:G.map(ce=>o.jsxs("div",{className:`user-stat-card ${ce.color}`,children:[o.jsx("div",{className:"user-stat-icon",children:ce.icon}),o.jsxs("div",{className:"user-stat-info",children:[o.jsx("span",{className:"user-stat-value",children:ce.value}),o.jsx("span",{className:"user-stat-label",children:ce.label})]})]},ce.label))})},ve=()=>V?o.jsx("div",{className:"admin-modal-overlay",onClick:()=>ge(null),children:o.jsxs("div",{className:"admin-modal",onClick:G=>G.stopPropagation(),children:[o.jsxs("div",{className:"admin-modal-header",children:[o.jsx("h3",{children:"Confirmer l'action"}),o.jsx("button",{className:"admin-modal-close",onClick:()=>ge(null),children:o.jsx(pc,{size:20})})]}),o.jsx("div",{className:"admin-modal-body",children:o.jsx("p",{children:V.label})}),o.jsxs("div",{className:"admin-modal-footer",children:[o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>ge(null),children:"Annuler"}),o.jsx("button",{className:"admin-btn admin-btn-primary",onClick:X,disabled:L===V.userId,children:L===V.userId?"En cours...":"Confirmer"})]})]})}):null,fe=()=>M?o.jsx("div",{className:"admin-modal-overlay",onClick:()=>B(null),children:o.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:G=>G.stopPropagation(),children:[o.jsxs("div",{className:"admin-modal-header",children:[o.jsx("h3",{children:"Dtail de l'utilisateur"}),o.jsx("button",{className:"admin-modal-close",onClick:()=>B(null),children:o.jsx(pc,{size:20})})]}),o.jsxs("div",{className:"admin-modal-body",children:[o.jsxs("div",{className:"user-detail-profile",children:[o.jsx("div",{className:"user-detail-avatar",children:F(M.displayName)}),o.jsxs("div",{className:"user-detail-info",children:[o.jsx("h4",{children:M.displayName||"Sans nom"}),o.jsx("p",{children:M.email}),o.jsxs("div",{className:"user-detail-badges",children:[o.jsx(we,{role:M.role}),M.isPremium&&o.jsxs("span",{className:"user-badge user-badge-premium",children:[o.jsx(pi,{size:12})," Premium"]}),o.jsx("span",{className:`user-badge ${M.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:M.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),o.jsxs("div",{className:"user-detail-dates",children:[o.jsxs("div",{children:[o.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),o.jsx("span",{children:W(M.createdAt)})]}),M.isPremium&&M.subscriptionEnd&&o.jsxs("div",{children:[o.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),o.jsx("span",{children:W(M.subscriptionEnd)})]})]}),o.jsxs("div",{className:"user-detail-stats-section",children:[o.jsxs("h4",{children:[o.jsx(mc,{size:18})," Statistiques"]}),k?o.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des statistiques..."})]}):D?o.jsxs("div",{className:"user-detail-stats-grid",children:[o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(cs,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:D.totalQuizPasses}),o.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(ah,{size:20}),o.jsxs("span",{className:"user-detail-stat-value",children:[D.scoresMoyens,"%"]}),o.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(pl,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:D.quizReussis}),o.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(cd,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:D.dernierQuiz?W(D.dernierQuiz):"Aucun"}),o.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):o.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return o.jsxs("div",{className:"admin-container",children:[ne(),ve(),fe(),o.jsxs("div",{className:"user-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(qg,{size:24})," Gestion des Utilisateurs"]}),o.jsxs("p",{className:"admin-subtitle",children:[t.length," utilisateur(s) au total  ",H.length," affich(s)"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Z,children:[o.jsx(hY,{size:16})," Actualiser"]})]}),ue(),o.jsxs("div",{className:"admin-toolbar",children:[o.jsxs("div",{className:"admin-search-wrapper",children:[o.jsx(aL,{size:18,className:"admin-search-icon"}),o.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:p,onChange:G=>g(G.target.value)})]}),o.jsxs("button",{className:`admin-btn admin-btn-outline ${R?"active":""}`,onClick:()=>C(!R),children:[o.jsx(OE,{size:16})," Filtres",R?o.jsx(mj,{size:14}):o.jsx(fv,{size:14})]})]}),R&&o.jsxs("div",{className:"admin-filters-panel",children:[o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Rle"}),o.jsxs("select",{className:"admin-select",value:y,onChange:G=>x(G.target.value),children:[o.jsx("option",{value:"",children:"Tous les rles"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"prof",children:"Professeur"}),o.jsx("option",{value:"eleve",children:"lve"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),o.jsxs("select",{className:"admin-select",value:E,onChange:G=>j(G.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Premium"}),o.jsx("option",{value:"false",children:"Gratuit"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Statut"}),o.jsxs("select",{className:"admin-select",value:N,onChange:G=>A(G.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Actifs"}),o.jsx("option",{value:"false",children:"Dsactivs"})]})]}),o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),A(""),g("")},children:"Rinitialiser"})]}),i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des utilisateurs..."})]}):H.length===0?o.jsxs("div",{className:"admin-empty-state",children:[o.jsx(qg,{size:48}),o.jsx("h3",{children:"Aucun utilisateur trouv"}),o.jsx("p",{children:t.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):o.jsx("div",{className:"user-table-wrapper",children:o.jsxs("table",{className:"user-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Utilisateur"}),o.jsx("th",{children:"Rle"}),o.jsx("th",{children:"Abonnement"}),o.jsx("th",{children:"Statut"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:H.map(G=>o.jsxs("tr",{className:G.isActive===!1?"user-row-inactive":"",children:[o.jsx("td",{children:o.jsxs("div",{className:"user-cell-info",children:[o.jsx("div",{className:"user-avatar-sm",children:F(G.displayName)}),o.jsxs("div",{children:[o.jsx("span",{className:"user-cell-name",children:G.displayName||"Sans nom"}),o.jsx("span",{className:"user-cell-email",children:G.email})]})]})}),o.jsx("td",{children:o.jsxs("select",{className:"admin-select admin-select-sm",value:G.role,onChange:ce=>ge({type:"role",userId:G.uid,value:ce.target.value,label:`Changer le rle de "${G.displayName||G.email}" en "${ce.target.value}" ?`}),children:[o.jsx("option",{value:"eleve",children:"lve"}),o.jsx("option",{value:"prof",children:"Professeur"}),o.jsx("option",{value:"admin",children:"Admin"})]})}),o.jsx("td",{children:o.jsx("button",{className:`user-premium-toggle ${G.isPremium?"active":""}`,onClick:()=>ge({type:"premium",userId:G.uid,value:!G.isPremium,label:G.isPremium?`Dsactiver le statut Premium de "${G.displayName||G.email}" ?`:`Activer le statut Premium de "${G.displayName||G.email}" pour 30 jours ?`}),disabled:L===G.uid,children:G.isPremium?o.jsxs(o.Fragment,{children:[o.jsx(sh,{size:14})," Premium"]}):o.jsxs(o.Fragment,{children:[o.jsx(pi,{size:14})," Gratuit"]})})}),o.jsx("td",{children:o.jsx("button",{className:`user-status-toggle ${G.isActive!==!1?"active":"inactive"}`,onClick:()=>ge({type:"active",userId:G.uid,value:G.isActive===!1,label:G.isActive===!1?`Ractiver le compte de "${G.displayName||G.email}" ?`:`Dsactiver le compte de "${G.displayName||G.email}" ?`}),disabled:L===G.uid,children:G.isActive!==!1?o.jsxs(o.Fragment,{children:[o.jsx(kY,{size:14})," Actif"]}):o.jsxs(o.Fragment,{children:[o.jsx(MY,{size:14})," Dsactiv"]})})}),o.jsx("td",{children:o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ae(G),title:"Voir les statistiques",children:[o.jsx(Zu,{size:14})," Dtail"]})})]},G.uid))})]})})]})]})},_X=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(null),[i,a]=_.useState(!0),[c,u]=_.useState(null),[f,h]=_.useState(""),[p,g]=_.useState(""),[y,x]=_.useState(""),[E,j]=_.useState(!1),N=_.useCallback(async()=>{try{a(!0),u(null);const M=await ht(We(Ne,"users")),B=new Map;M.docs.forEach(ue=>{const ve=ue.data();B.set(ue.id,{name:ve.displayName||"Sans nom",email:ve.email||""})});const D=await ht(We(Ne,"quizzes")),O=new Map;D.docs.forEach(ue=>{const ve=ue.data();O.set(ue.id,{titre:ve.titre||ve.quizTitre||"Quiz sans titre",discipline:ve.disciplineNom||ve.matiereNom||""})});const k=await ht(We(Ne,"quizzes_v2")),U=new Map;k.docs.forEach(ue=>{const ve=ue.data();U.set(ue.id,{titre:ve.titre||"Quiz avanc sans titre",discipline:ve.disciplineNom||""})});const L=[];try{(await ht(xt(We(Ne,"quiz_results"),Vn("datePassage","desc"),Js(200)))).docs.forEach(ve=>{const fe=ve.data(),G=B.get(fe.userId)||{name:"Inconnu",email:""},ce=O.get(fe.quizId)||{titre:fe.quizTitre||"Quiz",discipline:fe.disciplineNom||""},Ce=fe.pourcentage??(fe.totalPoints>0?Math.round(fe.score/fe.totalPoints*100):fe.score>0?Math.round(fe.score/20*100):0);L.push({id:ve.id,quizId:fe.quizId||"",quizTitre:ce.titre,userId:fe.userId||"",userName:G.name,userEmail:G.email,score:fe.score||0,scoreMax:fe.totalPoints||20,pourcentage:Ce,reussi:fe.reussi??Ce>=50,tempsEcoule:fe.tempsEcoule||0,datePassage:fe.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:ce.discipline})})}catch(ue){console.warn("Pas de rsultats v1 ou index manquant:",ue)}const z=[];try{(await ht(xt(We(Ne,"quiz_results_v2"),Vn("datePassage","desc"),Js(200)))).docs.forEach(ve=>{const fe=ve.data(),G=B.get(fe.userId)||{name:"Inconnu",email:""},ce=U.get(fe.quizId)||{titre:fe.quizTitre||"Quiz avanc",discipline:fe.disciplineNom||""},Ce=fe.scoreMax>0?Math.round(fe.score/fe.scoreMax*100):0;z.push({id:ve.id,quizId:fe.quizId||"",quizTitre:ce.titre,userId:fe.userId||"",userName:G.name,userEmail:G.email,score:fe.score||0,scoreMax:fe.scoreMax||0,pourcentage:Ce,reussi:fe.reussi??Ce>=50,tempsEcoule:fe.tempsTotal||fe.tempsEcoule||0,datePassage:fe.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:ce.discipline})})}catch(ue){console.warn("Pas de rsultats v2 ou index manquant:",ue)}const V=[...L,...z].sort((ue,ve)=>ve.datePassage.getTime()-ue.datePassage.getTime());e(V);const ge=new Date,Z=new Date(ge.getFullYear(),ge.getMonth(),ge.getDate()),H=new Date(Z.getTime()-10080*60*1e3),ae=V.length,X=ae>0?Math.round(V.reduce((ue,ve)=>ue+ve.pourcentage,0)/ae):0,we=ae>0?Math.round(V.filter(ue=>ue.reussi).length/ae*100):0,W=ae>0?Math.round(V.reduce((ue,ve)=>ue+ve.tempsEcoule,0)/ae):0,F=V.filter(ue=>ue.datePassage>=Z).length,ne=V.filter(ue=>ue.datePassage>=H).length;r({totalResultats:ae,moyenneGenerale:X,tauxReussite:we,tempsEcouleMoyen:W,resultatsAujourdHui:F,resultats7Jours:ne})}catch(M){console.error("Erreur chargement rsultats:",M),u("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{a(!1)}},[]);_.useEffect(()=>{N()},[N]);const A=t.filter(M=>{if(f&&M.type!==f||p==="true"&&!M.reussi||p==="false"&&M.reussi)return!1;if(y){const B=y.toLowerCase();if(!M.userName.toLowerCase().includes(B)&&!M.userEmail.toLowerCase().includes(B)&&!M.quizTitre.toLowerCase().includes(B)&&!M.disciplineNom.toLowerCase().includes(B))return!1}return!0}),R=M=>{if(M<60)return`${M}s`;const B=Math.floor(M/60),D=M%60;return D>0?`${B}min ${D}s`:`${B}min`},C=M=>M.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=M=>M>=80?"results-score--excellent":M>=60?"results-score--bien":M>=40?"results-score--moyen":"results-score--faible";return o.jsxs("div",{className:"results-admin",children:[o.jsxs("div",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),o.jsx("div",{className:"admin-page-header__actions",children:o.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:N,children:" Actualiser"})})]}),n&&o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalResultats}),o.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsxs("div",{className:"stat-card__value",children:[n.moyenneGenerale,"%"]}),o.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsxs("div",{className:"stat-card__value",children:[n.tauxReussite,"%"]}),o.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.resultatsAujourdHui}),o.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),o.jsxs("div",{className:"admin-toolbar",children:[o.jsxs("div",{className:"admin-search",children:[o.jsx("span",{className:"admin-search-icon",children:""}),o.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:y,onChange:M=>x(M.target.value)})]}),o.jsx("button",{className:`admin-btn admin-btn-ghost ${E?"active":""}`,onClick:()=>j(!E),children:" Filtres"})]}),E&&o.jsxs("div",{className:"admin-filters-panel",children:[o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),o.jsxs("select",{className:"admin-select",value:f,onChange:M=>h(M.target.value),children:[o.jsx("option",{value:"",children:"Tous les types"}),o.jsx("option",{value:"classique",children:"Classique (v1)"}),o.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),o.jsxs("select",{className:"admin-select",value:p,onChange:M=>g(M.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Russis"}),o.jsx("option",{value:"false",children:"chous"})]})]}),o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{h(""),g(""),x("")},children:"Rinitialiser"})]}),i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des rsultats..."})]}):c?o.jsxs("div",{className:"admin-error",children:[o.jsxs("p",{children:[" ",c]}),o.jsx("button",{className:"admin-btn admin-btn-primary",onClick:N,children:"Ressayer"})]}):A.length===0?o.jsxs("div",{className:"admin-empty-state",children:[o.jsx("span",{style:{fontSize:"3rem"},children:""}),o.jsx("h3",{children:"Aucun rsultat trouv"}),o.jsx("p",{children:t.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):o.jsxs("div",{className:"results-table-wrapper",children:[o.jsxs("table",{className:"results-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"lve"}),o.jsx("th",{children:"Quiz"}),o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Score"}),o.jsx("th",{children:"Rsultat"}),o.jsx("th",{children:"Dure"}),o.jsx("th",{children:"Date"})]})}),o.jsx("tbody",{children:A.map(M=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{className:"results-cell-user",children:[o.jsx("span",{className:"results-cell-name",children:M.userName}),o.jsx("span",{className:"results-cell-email",children:M.userEmail})]})}),o.jsx("td",{children:o.jsxs("div",{className:"results-cell-quiz",children:[o.jsx("span",{className:"results-cell-quiz-title",children:M.quizTitre}),M.disciplineNom&&o.jsx("span",{className:"results-cell-discipline",children:M.disciplineNom})]})}),o.jsx("td",{children:o.jsx("span",{className:`results-badge results-badge--${M.type}`,children:M.type==="classique"?" Classique":" Avanc"})}),o.jsxs("td",{children:[o.jsxs("span",{className:`results-score ${P(M.pourcentage)}`,children:[M.pourcentage,"%"]}),o.jsxs("span",{className:"results-score-detail",children:[M.score,"/",M.scoreMax]})]}),o.jsx("td",{children:o.jsx("span",{className:`results-status ${M.reussi?"results-status--success":"results-status--fail"}`,children:M.reussi?" Russi":" chou"})}),o.jsx("td",{className:"results-cell-duration",children:R(M.tempsEcoule)}),o.jsx("td",{className:"results-cell-date",children:C(M.datePassage)})]},`${M.type}-${M.id}`))})]}),o.jsx("div",{className:"results-footer",children:o.jsxs("p",{children:[A.length," rsultat",A.length>1?"s":""," affich",A.length>1?"s":"",A.length!==t.length&&` sur ${t.length} au total`]})})]})]})},ku={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},jX=()=>{const[t,e]=_.useState(ku),[n,r]=_.useState(ku),[i,a]=_.useState(!0),[c,u]=_.useState(!1),[f,h]=_.useState(null),[p,g]=_.useState(null),[y,x]=_.useState(!1),E=_.useCallback(async()=>{try{a(!0),h(null);const C=He(Ne,"settings","platform"),P=await Er(C);if(P.exists()){const M=P.data(),B={...ku,...M};e(B),r(B)}else e(ku),r(ku)}catch(C){console.error("Erreur chargement paramtres:",C),h("Impossible de charger les paramtres.")}finally{a(!1)}},[]);_.useEffect(()=>{E()},[E]),_.useEffect(()=>{if(p){const C=setTimeout(()=>g(null),4e3);return()=>clearTimeout(C)}},[p]),_.useEffect(()=>{const C=JSON.stringify(t)!==JSON.stringify(n);x(C)},[t,n]);const j=(C,P)=>{e(M=>({...M,[C]:P}))},N=async()=>{try{if(u(!0),h(null),t.premiumMensuel<0||t.premiumAnnuel<0){h("Les tarifs ne peuvent pas tre ngatifs.");return}if(t.quizNoteMinimale<0||t.quizNoteMinimale>20){h("La note minimale doit tre entre 0 et 20.");return}const C=He(Ne,"settings","platform");await My(C,{...t,updatedAt:en()}),r(t),x(!1),g("Paramtres sauvegards avec succs !")}catch(C){console.error("Erreur sauvegarde paramtres:",C),h("Impossible de sauvegarder les paramtres.")}finally{u(!1)}},A=()=>{e(n),x(!1)},R=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&e(ku)};return i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des paramtres..."})]}):o.jsxs("div",{className:"settings-admin",children:[o.jsxs("div",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),o.jsxs("div",{className:"admin-page-header__actions",children:[y&&o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:A,children:"Annuler"}),o.jsx("button",{className:"admin-btn admin-btn-primary",onClick:N,disabled:!y||c,children:c?" Sauvegarde...":" Sauvegarder"})]})]}),y&&o.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),f&&o.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",f]}),p&&o.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",p]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"settings-section__header",children:[o.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),o.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),o.jsxs("div",{className:"settings-grid",children:[o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Nom du site"}),o.jsx("input",{type:"text",className:"admin-input",value:t.siteName,onChange:C=>j("siteName",C.target.value)})]}),o.jsxs("div",{className:"settings-field settings-field--full",children:[o.jsx("label",{className:"settings-label",children:"Description"}),o.jsx("input",{type:"text",className:"admin-input",value:t.siteDescription,onChange:C=>j("siteDescription",C.target.value)})]}),o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Email de contact"}),o.jsx("input",{type:"email",className:"admin-input",value:t.contactEmail,onChange:C=>j("contactEmail",C.target.value)})]}),o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Tlphone"}),o.jsx("input",{type:"tel",className:"admin-input",value:t.contactPhone,onChange:C=>j("contactPhone",C.target.value)})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"settings-section__header",children:[o.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),o.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),o.jsxs("div",{className:"settings-grid",children:[o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),o.jsx("input",{type:"number",className:"admin-input",value:t.premiumMensuel,onChange:C=>j("premiumMensuel",parseInt(C.target.value)||0),min:0,step:500}),o.jsxs("span",{className:"settings-hint",children:["Actuellement : ",t.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),o.jsx("input",{type:"number",className:"admin-input",value:t.premiumAnnuel,onChange:C=>j("premiumAnnuel",parseInt(C.target.value)||0),min:0,step:1e3}),o.jsxs("span",{className:"settings-hint",children:["conomie : ",(t.premiumMensuel*12-t.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"settings-section__header",children:[o.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),o.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),o.jsxs("div",{className:"settings-grid",children:[o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),o.jsx("input",{type:"number",className:"admin-input",value:t.quizDureeDefaut,onChange:C=>j("quizDureeDefaut",parseInt(C.target.value)||0),min:1,max:120})]}),o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),o.jsx("input",{type:"number",className:"admin-input",value:t.quizNoteMinimale,onChange:C=>j("quizNoteMinimale",parseInt(C.target.value)||0),min:0,max:20})]}),o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),o.jsx("input",{type:"number",className:"admin-input",value:t.quizTentativesMax,onChange:C=>j("quizTentativesMax",parseInt(C.target.value)||0),min:1,max:10}),o.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"settings-section__header",children:[o.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),o.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),o.jsxs("div",{className:"settings-grid",children:[o.jsxs("div",{className:"settings-field",children:[o.jsx("label",{className:"settings-label",children:"Mode maintenance"}),o.jsxs("div",{className:"settings-toggle-wrapper",children:[o.jsx("button",{className:`settings-toggle ${t.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>j("maintenanceMode",!t.maintenanceMode),children:o.jsx("span",{className:"settings-toggle__knob"})}),o.jsx("span",{className:`settings-toggle-label ${t.maintenanceMode?"settings-toggle-label--active":""}`,children:t.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),o.jsxs("div",{className:"settings-field settings-field--full",children:[o.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),o.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:t.maintenanceMessage,onChange:C=>j("maintenanceMessage",C.target.value),disabled:!t.maintenanceMode})]})]})]}),o.jsxs("div",{className:"settings-actions",children:[o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:R,children:" Rinitialiser aux valeurs par dfaut"}),o.jsx("button",{className:"admin-btn admin-btn-primary",onClick:N,disabled:!y||c,children:c?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},wX=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],EX=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],NX=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Ba=({value:t,onChange:e,placeholder:n="Saisissez votre texte...",minHeight:r=100,maxHeight:i=400,toolbar:a=wX,disabled:c=!1,className:u=""})=>{const f=_.useRef(null),h=_.useRef(!1),[p,g]=_.useState(!1),[y,x]=_.useState(!1);_.useEffect(()=>{f.current&&!h.current&&f.current.innerHTML!==t&&(f.current.innerHTML=t||""),h.current=!1},[t]);const E=_.useCallback(()=>{f.current&&(h.current=!0,e(f.current.innerHTML))},[e]),j=_.useCallback((C,P)=>{f.current?.focus(),document.execCommand(C,!1,P),E()},[E]),N=_.useCallback(()=>{const C=prompt("URL du lien :","https://");C&&j("createLink",C)},[j]),A=_.useCallback(()=>{j("removeFormat"),j("formatBlock","p")},[j]);_.useEffect(()=>{const C=()=>{g(!1),x(!1)};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const R=C=>{switch(C){case"bold":return o.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:P=>{P.preventDefault(),j("bold")},children:o.jsx("strong",{children:"G"})},"bold");case"italic":return o.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:P=>{P.preventDefault(),j("italic")},children:o.jsx("em",{children:"I"})},"italic");case"underline":return o.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:P=>{P.preventDefault(),j("underline")},children:o.jsx("u",{children:"S"})},"underline");case"strikethrough":return o.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:P=>{P.preventDefault(),j("strikeThrough")},children:o.jsx("s",{children:"B"})},"strike");case"heading":return o.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:P=>{P.preventDefault(),j("formatBlock","h3")},children:"H"},"heading");case"color":return o.jsxs("span",{className:"rte-dropdown-wrapper",onClick:P=>P.stopPropagation(),children:[o.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{g(!p),x(!1)},children:o.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),p&&o.jsx("div",{className:"rte-color-picker",children:EX.map(P=>o.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:P,border:P==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:M=>{M.preventDefault(),j("foreColor",P),g(!1)}},P))})]},"color");case"highlight":return o.jsxs("span",{className:"rte-dropdown-wrapper",onClick:P=>P.stopPropagation(),children:[o.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{x(!y),g(!1)},children:o.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),y&&o.jsx("div",{className:"rte-color-picker",children:NX.map(P=>o.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:P==="transparent"?"#fff":P,border:"1px solid #ccc"},onMouseDown:M=>{M.preventDefault(),j("hiliteColor",P),x(!1)},children:P==="transparent"?"":""},P))})]},"highlight");case"alignLeft":return o.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:P=>{P.preventDefault(),j("justifyLeft")},children:""},"alignL");case"alignCenter":return o.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:P=>{P.preventDefault(),j("justifyCenter")},children:""},"alignC");case"alignRight":return o.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:P=>{P.preventDefault(),j("justifyRight")},children:""},"alignR");case"bulletList":return o.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:P=>{P.preventDefault(),j("insertUnorderedList")},children:""},"ul");case"numberedList":return o.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:P=>{P.preventDefault(),j("insertOrderedList")},children:"1"},"ol");case"subscript":return o.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:P=>{P.preventDefault(),j("subscript")},children:["X",o.jsx("sub",{children:""})]},"sub");case"superscript":return o.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:P=>{P.preventDefault(),j("superscript")},children:["X",o.jsx("sup",{children:""})]},"sup");case"link":return o.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:P=>{P.preventDefault(),N()},children:""},"link");case"clean":return o.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:P=>{P.preventDefault(),A()},children:""},"clean");default:return null}};return o.jsxs("div",{className:`rte-container ${c?"rte-disabled":""} ${u}`,children:[!c&&o.jsx("div",{className:"rte-toolbar",children:a.map(C=>R(C))}),o.jsx("div",{ref:f,className:"rte-editor",contentEditable:!c,onInput:E,onBlur:E,"data-placeholder":n,style:{minHeight:`${r}px`,maxHeight:`${i}px`},suppressContentEditableWarning:!0})]})},dd={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},mv={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},pv={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function On(t="id"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function SX(t,e){const n={id:On("q"),type:t,enonce:"",difficulte:"moyen",points:2,ordre:e};switch(t){case"qcm_unique":return{...n,typeData:{options:[{id:On("opt"),texte:"",isCorrect:!0},{id:On("opt"),texte:"",isCorrect:!1},{id:On("opt"),texte:"",isCorrect:!1},{id:On("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:On("opt"),texte:"",isCorrect:!0},{id:On("opt"),texte:"",isCorrect:!0},{id:On("opt"),texte:"",isCorrect:!1},{id:On("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:On("item"),texte:"",ordreCorrect:1},{id:On("item"),texte:"",ordreCorrect:2},{id:On("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:On("pair"),gauche:"",droite:""},{id:On("pair"),gauche:"",droite:""},{id:On("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const dm="quizzes_v2",AX="quiz_results_v2";async function TX(t,e){try{const n=await Bi(We(Ne,dm),{...t,auteurId:e,createdAt:en(),updatedAt:en()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function CX(t,e){try{const n=He(Ne,dm,t);await sn(n,{...e,updatedAt:en()}),console.log(" Quiz avanc mis  jour :",t)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function PX(t){try{await Td(He(Ne,dm,t)),console.log(" Quiz avanc supprim :",t)}catch(e){throw console.error(" Erreur suppression quiz :",e),new Error("Impossible de supprimer le quiz")}}async function vL(t){try{const e=await Er(He(Ne,dm,t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(e){throw console.error(" Erreur rcupration quiz :",e),new Error("Impossible de rcuprer le quiz")}}async function IX(){try{const t=xt(We(Ne,dm),Vn("createdAt","desc"));return(await ht(t)).docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||void 0}})}catch(t){throw console.error(" Erreur rcupration tous les quiz :",t),new Error("Impossible de rcuprer les quiz")}}function OX(t,e){let n=0,r=0;const i=[];for(const a of t.questions){r+=a.points;const c=e.find(g=>g.questionId===a.id);if(!c){i.push({questionId:a.id,type:a.type,pointsObtenus:0,pointsMax:a.points,isCorrect:!1});continue}let u=0,f=!1,h=!1,p=!1;switch(a.type){case"qcm_unique":{const y=a.typeData.options.find(x=>x.isCorrect);y&&c.selectedOptionId===y.id&&(u=a.points,f=!0);break}case"qcm_multiple":{const g=a.typeData,y=g.options.filter(A=>A.isCorrect).map(A=>A.id),x=g.options.filter(A=>!A.isCorrect).map(A=>A.id),E=c.selectedOptionIds||[],j=E.some(A=>x.includes(A)),N=E.filter(A=>y.includes(A)).length;!j&&N===y.length?(u=a.points,f=!0):g.scoringPartiel&&N>0&&!j&&(u=Math.round(a.points*N/y.length*100)/100,h=!0);break}case"drag_drop":{const g=a.typeData,y=c.ordrePropose||[],x=g.items.sort((j,N)=>j.ordreCorrect-N.ordreCorrect).map(j=>j.id);let E=0;for(let j=0;j<x.length;j++)y[j]===x[j]&&E++;E===x.length?(u=a.points,f=!0):E>0&&(u=Math.round(a.points*E/x.length*100)/100,h=!0);break}case"mise_en_relation":{const g=a.typeData,y=c.relationsProposees||{};let x=0;for(const E of g.paires)y[E.id]===E.id&&x++;x===g.paires.length?(u=a.points,f=!0):x>0&&(u=Math.round(a.points*x/g.paires.length*100)/100,h=!0);break}case"essai":{const g=a.typeData,y=c.texteReponse||"";if(g.correctionMode==="mots_cles"&&g.motsCles.length>0){const x=y.toLowerCase().replace(/<[^>]*>/g,"");let E=0,j=0;for(const N of g.motsCles)E+=N.poids,x.includes(N.mot.toLowerCase())&&(j+=N.poids);E>0&&(u=Math.round(a.points*j/E*100)/100,f=j===E,h=j>0&&j<E)}else p=!0;break}}n+=u,i.push({questionId:a.id,type:a.type,pointsObtenus:u,pointsMax:a.points,isCorrect:f,isPartiel:h,correctionManuelleRequise:p})}return{score:n,scoreMax:r,details:i}}async function RX(t,e,n,r){try{const{score:i,scoreMax:a,details:c}=OX(t,n),u=a>0?Math.round(i/a*20*100)/100:0,f=c.some(g=>g.correctionManuelleRequise),h={quizId:t.id,userId:e,reponses:n,score:i,scoreMax:a,note20:u,tempsEcoule:r,datePassage:new Date,reussi:u>=t.noteMinimale,correctionManuelle:f,detailsParQuestion:c},p=await Bi(We(Ne,AX),{...h,datePassage:en()});return console.log(" Rsultat quiz enregistr :",p.id),{id:p.id,...h}}catch(i){throw console.error(" Erreur soumission quiz :",i),new Error("Impossible d'enregistrer le rsultat")}}const kX=({existingQuiz:t,disciplines:e,auteurId:n,onSave:r,onCancel:i})=>{const[a,c]=_.useState(t?.titre||""),[u,f]=_.useState(t?.description||""),[h,p]=_.useState(t?.disciplineId||""),[g,y]=_.useState(t?.duree||30),[x,E]=_.useState(t?.isPremium??!0),[j,N]=_.useState(t?.noteMinimale||10),[A,R]=_.useState(t?.melangerQuestions??!1),[C,P]=_.useState(t?.melangerOptions??!1),[M,B]=_.useState(t?.afficherCorrection??!0),[D,O]=_.useState(t?.tentativesMax||0),[k,U]=_.useState(t?.questions||[]),[L,z]=_.useState(null),[V,ge]=_.useState(!1),[Z,H]=_.useState(null),[ae,X]=_.useState(!1),we=_.useCallback(G=>{const ce=SX(G,k.length+1);U(Ce=>[...Ce,ce]),z(k.length),X(!1)},[k.length]),W=_.useCallback(G=>{confirm("Supprimer cette question ?")&&(U(ce=>ce.filter((ie,J)=>J!==G).map((ie,J)=>({...ie,ordre:J+1}))),z(null))},[]),F=_.useCallback(G=>{U(ce=>{const Ce=ce[G],ie={...JSON.parse(JSON.stringify(Ce)),id:On("q"),ordre:ce.length+1};return[...ce,ie]})},[]),ne=_.useCallback((G,ce)=>{U(Ce=>{const ie=[...Ce],J=ce==="up"?G-1:G+1;return J<0||J>=ie.length?Ce:([ie[G],ie[J]]=[ie[J],ie[G]],ie.map((Q,me)=>({...Q,ordre:me+1})))}),z(ce==="up"?L!==null?L-1:null:L!==null?L+1:null)},[L]),ue=_.useCallback((G,ce)=>{U(Ce=>Ce.map((ie,J)=>J===G?{...ie,...ce}:ie))},[]),ve=async()=>{if(!a.trim()){H("Le titre est obligatoire");return}if(!h){H("Slectionnez une discipline");return}if(k.length===0){H("Ajoutez au moins une question");return}for(let G=0;G<k.length;G++)if(!k[G].enonce.replace(/<[^>]*>/g,"").trim()){H(`La question ${G+1} n'a pas d'nonc`),z(G);return}H(null),ge(!0);try{const G={disciplineId:h,titre:a.trim(),description:u.trim()||void 0,questions:k,duree:g,isPremium:x,noteMinimale:j,melangerQuestions:A,melangerOptions:C,afficherCorrection:M,tentativesMax:D};let ce;t?.id?(await CX(t.id,G),ce=t.id):ce=await TX(G,n),r?.(ce)}catch(G){H(G.message||"Erreur lors de la sauvegarde")}finally{ge(!1)}},fe=k.reduce((G,ce)=>G+ce.points,0);return o.jsxs("div",{className:"quiz-editor",children:[o.jsxs("div",{className:"quiz-editor__header",children:[o.jsx("h2",{children:t?" Modifier le quiz":" Nouveau quiz avanc"}),o.jsxs("div",{className:"quiz-editor__header-actions",children:[o.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",fe," pts"]}),o.jsxs("span",{className:"quiz-editor__count-badge",children:[k.length," question",k.length>1?"s":""]})]})]}),Z&&o.jsxs("div",{className:"quiz-editor__error",children:[" ",Z,o.jsx("button",{onClick:()=>H(null),children:""})]}),o.jsxs("div",{className:"quiz-editor__section",children:[o.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),o.jsxs("div",{className:"quiz-editor__grid",children:[o.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[o.jsx("label",{children:"Titre du quiz *"}),o.jsx("input",{type:"text",value:a,onChange:G=>c(G.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Discipline *"}),o.jsxs("select",{value:h,onChange:G=>p(G.target.value),className:"quiz-editor__select",children:[o.jsx("option",{value:"",children:" Slectionner "}),e.map(G=>o.jsxs("option",{value:G.id,children:[G.nom," (",G.classe,")"]},G.id))]})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Dure (minutes)"}),o.jsx("input",{type:"number",value:g,onChange:G=>y(Number(G.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Note minimale (/20)"}),o.jsx("input",{type:"number",value:j,onChange:G=>N(Number(G.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Tentatives max (0 = illimit)"}),o.jsx("input",{type:"number",value:D,onChange:G=>O(Number(G.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[o.jsx("label",{children:"Description (optionnel)"}),o.jsx(Ba,{value:u,onChange:f,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),o.jsxs("div",{className:"quiz-editor__options-row",children:[o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:x,onChange:G=>E(G.target.checked)}),o.jsx("span",{children:" Premium"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:A,onChange:G=>R(G.target.checked)}),o.jsx("span",{children:" Mlanger les questions"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:C,onChange:G=>P(G.target.checked)}),o.jsx("span",{children:" Mlanger les options QCM"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:M,onChange:G=>B(G.target.checked)}),o.jsx("span",{children:" Afficher la correction"})]})]})]}),o.jsxs("div",{className:"quiz-editor__section",children:[o.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),o.jsx("div",{className:"quiz-editor__questions-list",children:k.map((G,ce)=>o.jsx(DX,{question:G,index:ce,isActive:L===ce,onToggle:()=>z(L===ce?null:ce),onUpdate:Ce=>ue(ce,Ce),onDelete:()=>W(ce),onDuplicate:()=>F(ce),onMoveUp:()=>ne(ce,"up"),onMoveDown:()=>ne(ce,"down"),isFirst:ce===0,isLast:ce===k.length-1},G.id))}),o.jsxs("div",{className:"quiz-editor__add-wrapper",children:[o.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>X(!ae),children:"+ Ajouter une question"}),ae&&o.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(dd).map(G=>o.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>we(G),children:[o.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:pv[G]},children:mv[G]}),o.jsx("span",{children:dd[G]})]},G))})]})]}),o.jsxs("div",{className:"quiz-editor__actions",children:[o.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:i,disabled:V,children:"Annuler"}),o.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:ve,disabled:V||k.length===0,children:V?" Sauvegarde...":t?" Mettre  jour":" Crer le quiz"})]})]})},DX=({question:t,index:e,isActive:n,onToggle:r,onUpdate:i,onDelete:a,onDuplicate:c,onMoveUp:u,onMoveDown:f,isFirst:h,isLast:p})=>{const g=pv[t.type],y=mv[t.type],x=dd[t.type],E=j=>{const N=j.replace(/<[^>]*>/g,"").trim();return N.length>80?N.substring(0,80)+"...":N||"(sans nonc)"};return o.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:g},children:[o.jsxs("div",{className:"question-editor__header",onClick:r,children:[o.jsxs("div",{className:"question-editor__header-left",children:[o.jsx("span",{className:"question-editor__number",children:e+1}),o.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:g},children:[y," ",x]}),!n&&o.jsx("span",{className:"question-editor__preview",children:E(t.enonce)})]}),o.jsxs("div",{className:"question-editor__header-right",children:[o.jsxs("span",{className:"question-editor__points",children:[t.points," pts"]}),o.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&o.jsxs("div",{className:"question-editor__body",children:[o.jsxs("div",{className:"question-editor__toolbar",children:[o.jsx("button",{type:"button",onClick:u,disabled:h,title:"Monter",children:""}),o.jsx("button",{type:"button",onClick:f,disabled:p,title:"Descendre",children:""}),o.jsx("button",{type:"button",onClick:c,title:"Dupliquer",children:""}),o.jsx("button",{type:"button",onClick:a,className:"btn-danger",title:"Supprimer",children:""})]}),o.jsxs("div",{className:"question-editor__field",children:[o.jsx("label",{children:"nonc de la question *"}),o.jsx(Ba,{value:t.enonce,onChange:j=>i({enonce:j}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),o.jsxs("div",{className:"question-editor__params",children:[o.jsxs("div",{className:"question-editor__param",children:[o.jsx("label",{children:"Difficult"}),o.jsxs("select",{value:t.difficulte,onChange:j=>i({difficulte:j.target.value}),children:[o.jsx("option",{value:"facile",children:" Facile"}),o.jsx("option",{value:"moyen",children:" Moyen"}),o.jsx("option",{value:"difficile",children:" Difficile"})]})]}),o.jsxs("div",{className:"question-editor__param",children:[o.jsx("label",{children:"Points"}),o.jsx("input",{type:"number",value:t.points,onChange:j=>i({points:Number(j.target.value)}),min:1,max:20})]})]}),o.jsxs("div",{className:"question-editor__type-specific",children:[t.type==="qcm_unique"&&o.jsx(MX,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="qcm_multiple"&&o.jsx(zX,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="drag_drop"&&o.jsx(LX,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="mise_en_relation"&&o.jsx(qX,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="essai"&&o.jsx(UX,{data:t.typeData,onChange:j=>i({typeData:j})})]}),o.jsxs("div",{className:"question-editor__field",children:[o.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),o.jsx(Ba,{value:t.explication||"",onChange:j=>i({explication:j}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},MX=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.options.map((f,h)=>h===a?{...f,...c}:c.isCorrect===!0?{...f,isCorrect:!1}:f);e({options:u})},r=()=>{t.options.length>=6||e({options:[...t.options,{id:On("opt"),texte:"",isCorrect:!1}]})},i=a=>{t.options.length<=2||e({options:t.options.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),t.options.map((a,c)=>o.jsxs("div",{className:"type-editor__option-row",children:[o.jsx("input",{type:"radio",name:`qcm_unique_${a.id}`,checked:a.isCorrect,onChange:()=>n(c,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ba,{value:a.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),a.isCorrect&&o.jsx("span",{className:"type-editor__correct-badge",children:""}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,title:"Supprimer cette option",children:""})]},a.id)),t.options.length<6&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"})]})},zX=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.options.map((f,h)=>h===a?{...f,...c}:f);e({...t,options:u})},r=()=>{t.options.length>=8||e({...t,options:[...t.options,{id:On("opt"),texte:"",isCorrect:!1}]})},i=a=>{t.options.length<=2||e({...t,options:t.options.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),t.options.map((a,c)=>o.jsxs("div",{className:"type-editor__option-row",children:[o.jsx("input",{type:"checkbox",checked:a.isCorrect,onChange:u=>n(c,{isCorrect:u.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ba,{value:a.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),a.isCorrect&&o.jsx("span",{className:"type-editor__correct-badge",children:""}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,children:""})]},a.id)),t.options.length<8&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"}),o.jsxs("label",{className:"type-editor__sub-option",children:[o.jsx("input",{type:"checkbox",checked:t.scoringPartiel,onChange:a=>e({...t,scoringPartiel:a.target.checked})}),o.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},LX=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.items.map((f,h)=>h===a?{...f,...c}:f);e({...t,items:u})},r=()=>{t.items.length>=10||e({...t,items:[...t.items,{id:On("item"),texte:"",ordreCorrect:t.items.length+1}]})},i=a=>{if(t.items.length<=2)return;const c=t.items.filter((u,f)=>f!==a).map((u,f)=>({...u,ordreCorrect:f+1}));e({...t,items:c})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),o.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),o.jsxs("div",{className:"type-editor__field-inline",children:[o.jsx("label",{children:"Consigne :"}),o.jsx("input",{type:"text",value:t.consigneOrdre,onChange:a=>e({...t,consigneOrdre:a.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),t.items.map((a,c)=>o.jsxs("div",{className:"type-editor__drag-row",children:[o.jsx("span",{className:"type-editor__drag-number",children:c+1}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ba,{value:a.texte,onChange:u=>n(c,{texte:u}),placeholder:`lment ${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.items.length<=2,children:""})]},a.id)),t.items.length<10&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter un lment"})]})},qX=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.paires.map((f,h)=>h===a?{...f,...c}:f);e({paires:u})},r=()=>{t.paires.length>=8||e({paires:[...t.paires,{id:On("pair"),gauche:"",droite:""}]})},i=a=>{t.paires.length<=2||e({paires:t.paires.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),o.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),o.jsxs("div",{className:"type-editor__relation-header",children:[o.jsx("span",{children:"Colonne A (gauche)"}),o.jsx("span",{}),o.jsx("span",{children:"Colonne B (droite)"}),o.jsx("span",{})]}),t.paires.map((a,c)=>o.jsxs("div",{className:"type-editor__relation-row",children:[o.jsx("div",{className:"type-editor__relation-cell",children:o.jsx(Ba,{value:a.gauche,onChange:u=>n(c,{gauche:u}),placeholder:`lment A${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("span",{className:"type-editor__relation-arrow",children:""}),o.jsx("div",{className:"type-editor__relation-cell",children:o.jsx(Ba,{value:a.droite,onChange:u=>n(c,{droite:u}),placeholder:`lment B${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.paires.length<=2,children:""})]},a.id)),t.paires.length<8&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une paire"})]})},UX=({data:t,onChange:e})=>{const n=()=>{e({...t,motsCles:[...t.motsCles,{mot:"",poids:1,obligatoire:!1}]})},r=(a,c)=>{const u=t.motsCles.map((f,h)=>h===a?{...f,...c}:f);e({...t,motsCles:u})},i=a=>{e({...t,motsCles:t.motsCles.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),o.jsxs("div",{className:"type-editor__params-row",children:[o.jsxs("div",{className:"type-editor__param-inline",children:[o.jsx("label",{children:"Mots minimum :"}),o.jsx("input",{type:"number",value:t.nombreMotsMin||"",onChange:a=>e({...t,nombreMotsMin:Number(a.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),o.jsxs("div",{className:"type-editor__param-inline",children:[o.jsx("label",{children:"Mots maximum :"}),o.jsx("input",{type:"number",value:t.nombreMotsMax||"",onChange:a=>e({...t,nombreMotsMax:Number(a.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),o.jsxs("div",{className:"type-editor__field-inline",children:[o.jsx("label",{children:"Mode de correction :"}),o.jsxs("select",{value:t.correctionMode,onChange:a=>e({...t,correctionMode:a.target.value}),children:[o.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),o.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),o.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(t.correctionMode==="mots_cles"||t.correctionMode==="semi_auto")&&o.jsxs("div",{className:"type-editor__keywords",children:[o.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),t.motsCles.map((a,c)=>o.jsxs("div",{className:"type-editor__keyword-row",children:[o.jsx("input",{type:"text",value:a.mot,onChange:u=>r(c,{mot:u.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),o.jsxs("select",{value:a.poids,onChange:u=>r(c,{poids:Number(u.target.value)}),className:"type-editor__keyword-weight",children:[o.jsx("option",{value:1,children:"Poids 1"}),o.jsx("option",{value:2,children:"Poids 2"}),o.jsx("option",{value:3,children:"Poids 3"}),o.jsx("option",{value:4,children:"Poids 4"}),o.jsx("option",{value:5,children:"Poids 5"})]}),o.jsxs("label",{className:"type-editor__keyword-required",children:[o.jsx("input",{type:"checkbox",checked:a.obligatoire,onChange:u=>r(c,{obligatoire:u.target.checked})}),o.jsx("span",{children:"Obligatoire"})]}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),children:""})]},c)),o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),o.jsxs("div",{className:"type-editor__field-block",children:[o.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),o.jsx(Ba,{value:t.reponseModele||"",onChange:a=>e({...t,reponseModele:a}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},ZP=()=>{const{quizId:t}=fy(),e=Nr(),{currentUser:n}=Bn(),[r,i]=_.useState([]),[a,c]=_.useState(void 0),[u,f]=_.useState(!0),[h,p]=_.useState(null);return _.useEffect(()=>{(async()=>{try{f(!0);const y=await wl.getAll();if(i(y.map(x=>({id:x.id,nom:x.nom,classe:x.classe||""}))),t){const x=await vL(t);x?c(x):p("Quiz introuvable")}}catch(y){console.error("Erreur chargement donnes:",y),p(y.message||"Erreur de chargement")}finally{f(!1)}})()},[t]),u?o.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:o.jsx("p",{children:" Chargement..."})}):h?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsxs("p",{style:{color:"#dc2626"},children:[" ",h]}),o.jsx("button",{onClick:()=>e(-1),children:" Retour"})]}):o.jsx(kX,{existingQuiz:a?{...a,id:a.id}:void 0,disciplines:r,auteurId:n?.uid||"",onSave:g=>{alert(" Quiz sauvegard avec succs !"),e("/admin/quiz")},onCancel:()=>e(-1)})},VX=()=>{const t=Nr(),{currentUser:e}=Bn(),[n,r]=_.useState([]),[i,a]=_.useState(!0),[c,u]=_.useState(null),[f,h]=_.useState(null);_.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0),u(null);const j=await IX();r(j)}catch(j){console.error("Erreur chargement quiz:",j),u("Impossible de charger les quiz")}finally{a(!1)}},g=async j=>{try{await PX(j),r(N=>N.filter(A=>A.id!==j)),h(null)}catch(N){console.error("Erreur suppression:",N),alert("Erreur lors de la suppression : "+N.message)}},y=j=>{const N={};return j.questions.forEach(A=>{N[A.type]=(N[A.type]||0)+1}),Object.entries(N).map(([A,R])=>`${R} ${dd[A]||A}`).join(", ")},x=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",E=j=>j.questions.reduce((N,A)=>N+A.points,0);return o.jsxs("div",{style:{padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),o.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),o.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),c&&o.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",c,o.jsx("button",{onClick:p,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),i&&o.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!i&&n.length===0&&!c&&o.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),o.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!i&&n.length>0&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(j=>o.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:j.titre}),j.isPremium&&o.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.questions.length," question",j.questions.length!==1?"s":""]}),o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",E(j)," pts"]}),o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.duree," min"]})]}),o.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",y(j)]}),o.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",x(j.createdAt)]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>t(`/quiz-avance/${j.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),o.jsx("button",{onClick:()=>t(`/admin/quiz/modifier/${j.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),o.jsx("button",{onClick:()=>{const N=`${window.location.origin}/quiz-avance/${j.id}`;navigator.clipboard.writeText(N).then(()=>{alert(` Lien copi !

`+N+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),f===j.id?o.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[o.jsx("button",{onClick:()=>g(j.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),o.jsx("button",{onClick:()=>h(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):o.jsx("button",{onClick:()=>h(j.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},j.id))})]})},BX=({quiz:t,userId:e,onComplete:n,onQuit:r})=>{const i=_.useMemo(()=>{let O=[...t.questions];return t.melangerQuestions&&(O=O.sort(()=>Math.random()-.5)),O},[t]),[a,c]=_.useState(0),[u,f]=_.useState(new Map),[h,p]=_.useState(t.duree*60),[g,y]=_.useState(!1),[x,E]=_.useState(null),[j,N]=_.useState(!1),A=_.useRef(Date.now());_.useEffect(()=>{if(x)return;const O=setInterval(()=>{p(k=>k<=1?(clearInterval(O),B(),0):k-1)},1e3);return()=>clearInterval(O)},[x]);const R=O=>{const k=Math.floor(O/60),U=O%60;return`${k.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`},C=i[a],P=_.useCallback((O,k)=>{f(U=>{const L=new Map(U),z=L.get(O)||{questionId:O,type:C.type};return L.set(O,{...z,...k}),L})},[C]),M=O=>{O>=0&&O<i.length&&c(O)},B=async()=>{N(!1),y(!0);try{const O=Array.from(u.values()),k=Math.round((Date.now()-A.current)/1e3),U=await RX(t,e,O,k);E(U),n?.(U)}catch(O){alert("Erreur lors de la soumission : "+O.message)}finally{y(!1)}},D=u.size;return x?o.jsx("div",{className:"quiz-player quiz-player--results",children:o.jsxs("div",{className:"quiz-results",children:[o.jsxs("div",{className:`quiz-results__header ${x.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[o.jsx("div",{className:"quiz-results__emoji",children:x.reussi?"":""}),o.jsx("h2",{children:x.reussi?"Flicitations !":"Quiz termin"}),o.jsxs("div",{className:"quiz-results__score",children:[o.jsxs("span",{className:"quiz-results__note",children:[x.note20,"/20"]}),o.jsxs("span",{className:"quiz-results__detail",children:[x.score,"/",x.scoreMax," points"]})]}),o.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",R(x.tempsEcoule)]}),x.correctionManuelle&&o.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),t.afficherCorrection&&o.jsxs("div",{className:"quiz-results__details",children:[o.jsx("h3",{children:" Dtail des rponses"}),i.map((O,k)=>{const U=x.detailsParQuestion.find(L=>L.questionId===O.id);return o.jsxs("div",{className:`quiz-results__question ${U?.isCorrect?"quiz-results__question--correct":U?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[o.jsxs("div",{className:"quiz-results__q-header",children:[o.jsxs("span",{children:["Q",k+1," "," ",o.jsxs("span",{style:{color:pv[O.type]},children:[mv[O.type]," ",dd[O.type]]})]}),o.jsxs("span",{className:"quiz-results__q-score",children:[U?.pointsObtenus||0,"/",U?.pointsMax||O.points," pts",U?.isCorrect&&" ",U?.isPartiel&&" ",!U?.isCorrect&&!U?.isPartiel&&" "]})]}),o.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:O.enonce}}),O.explication&&o.jsxs("div",{className:"quiz-results__q-explanation",children:[o.jsx("strong",{children:" Explication :"}),o.jsx("div",{dangerouslySetInnerHTML:{__html:O.explication}})]})]},O.id)})]}),o.jsx("div",{className:"quiz-results__actions",children:o.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:r,children:"Retour au tableau de bord"})})]})}):o.jsxs("div",{className:"quiz-player",children:[o.jsxs("div",{className:"quiz-player__topbar",children:[o.jsxs("div",{className:"quiz-player__info",children:[o.jsx("span",{className:"quiz-player__title",children:t.titre}),o.jsxs("span",{className:"quiz-player__progress",children:["Question ",a+1,"/",i.length]})]}),o.jsxs("div",{className:"quiz-player__topbar-right",children:[o.jsxs("span",{className:`quiz-player__timer ${h<60?"quiz-player__timer--danger":h<300?"quiz-player__timer--warning":""}`,children:[" ",R(h)]}),o.jsxs("span",{className:"quiz-player__answered",children:[D,"/",i.length," rpondue",D>1?"s":""]})]})]}),o.jsx("div",{className:"quiz-player__progress-bar",children:o.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(a+1)/i.length*100}%`}})}),o.jsxs("div",{className:"quiz-player__question-area",children:[o.jsxs("div",{className:"quiz-player__question-meta",children:[o.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:pv[C.type]},children:[mv[C.type]," ",dd[C.type]]}),o.jsxs("span",{className:"quiz-player__points",children:[C.points," point",C.points>1?"s":""]})]}),o.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:C.enonce}}),o.jsxs("div",{className:"quiz-player__answer-area",children:[C.type==="qcm_unique"&&o.jsx($X,{question:C,reponse:u.get(C.id),onUpdate:O=>P(C.id,O),melangerOptions:t.melangerOptions}),C.type==="qcm_multiple"&&o.jsx(FX,{question:C,reponse:u.get(C.id),onUpdate:O=>P(C.id,O),melangerOptions:t.melangerOptions}),C.type==="drag_drop"&&o.jsx(HX,{question:C,reponse:u.get(C.id),onUpdate:O=>P(C.id,O)}),C.type==="mise_en_relation"&&o.jsx(GX,{question:C,reponse:u.get(C.id),onUpdate:O=>P(C.id,O)}),C.type==="essai"&&o.jsx(KX,{question:C,reponse:u.get(C.id),onUpdate:O=>P(C.id,O)})]})]}),o.jsxs("div",{className:"quiz-player__nav",children:[o.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>M(a-1),disabled:a===0,children:" Prcdent"}),o.jsx("div",{className:"quiz-player__pagination",children:i.map((O,k)=>o.jsx("button",{className:`quiz-player__page-dot ${k===a?"quiz-player__page-dot--current":""} ${u.has(O.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>M(k),title:`Question ${k+1}`,children:k+1},O.id))}),a<i.length-1?o.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>M(a+1),children:"Suivant "}):o.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>N(!0),disabled:g,children:g?" Envoi...":" Soumettre le quiz"})]}),j&&o.jsx("div",{className:"quiz-player__modal-overlay",children:o.jsxs("div",{className:"quiz-player__modal",children:[o.jsx("h3",{children:"Soumettre le quiz ?"}),o.jsxs("p",{children:["Vous avez rpondu  ",o.jsx("strong",{children:D})," question",D>1?"s":""," sur"," ",o.jsx("strong",{children:i.length}),"."]}),D<i.length&&o.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",i.length-D," question",i.length-D>1?"s":""," sans rponse !"]}),o.jsxs("div",{className:"quiz-player__modal-actions",children:[o.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>N(!1),children:"Continuer le quiz"}),o.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:B,children:"Confirmer la soumission"})]})]})})]})},$X=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,a=_.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]);return o.jsx("div",{className:"player-qcm",children:a.map(c=>o.jsxs("label",{className:`player-qcm__option ${e?.selectedOptionId===c.id?"player-qcm__option--selected":""}`,children:[o.jsx("input",{type:"radio",name:`q_${t.id}`,checked:e?.selectedOptionId===c.id,onChange:()=>n({selectedOptionId:c.id})}),o.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:c.texte}})]},c.id))})},FX=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,a=_.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]),c=e?.selectedOptionIds||[],u=f=>{const h=c.includes(f)?c.filter(p=>p!==f):[...c,f];n({selectedOptionIds:h})};return o.jsxs("div",{className:"player-qcm",children:[o.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),a.map(f=>o.jsxs("label",{className:`player-qcm__option ${c.includes(f.id)?"player-qcm__option--selected":""}`,children:[o.jsx("input",{type:"checkbox",checked:c.includes(f.id),onChange:()=>u(f.id)}),o.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:f.texte}})]},f.id))]})},HX=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,a]=_.useState(()=>e?.ordrePropose?e.ordrePropose.map(y=>r.items.find(x=>x.id===y)).filter(Boolean):[...r.items].sort(()=>Math.random()-.5)),[c,u]=_.useState(null);_.useEffect(()=>{n({ordrePropose:i.map(y=>y.id)})},[i]);const f=y=>{u(y)},h=(y,x)=>{if(y.preventDefault(),c===null||c===x)return;const E=[...i],[j]=E.splice(c,1);E.splice(x,0,j),a(E),u(x)},p=()=>{u(null)},g=(y,x)=>{const E=x==="up"?y-1:y+1;if(E<0||E>=i.length)return;const j=[...i];[j[y],j[E]]=[j[E],j[y]],a(j)};return o.jsxs("div",{className:"player-dragdrop",children:[o.jsx("p",{className:"player-dragdrop__consigne",children:r.consigneOrdre}),o.jsx("div",{className:"player-dragdrop__list",children:i.map((y,x)=>o.jsxs("div",{className:`player-dragdrop__item ${c===x?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>f(x),onDragOver:E=>h(E,x),onDragEnd:p,children:[o.jsx("span",{className:"player-dragdrop__handle",children:""}),o.jsx("span",{className:"player-dragdrop__number",children:x+1}),o.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:y.texte}}),o.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[o.jsx("button",{type:"button",onClick:()=>g(x,"up"),disabled:x===0,children:""}),o.jsx("button",{type:"button",onClick:()=>g(x,"down"),disabled:x===i.length-1,children:""})]})]},y.id))})]})},GX=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,i=_.useMemo(()=>[...r.paires].sort(()=>Math.random()-.5),[r.paires]),[a,c]=_.useState(e?.relationsProposees||{}),[u,f]=_.useState(null);_.useEffect(()=>{n({relationsProposees:a})},[a]);const h=x=>{f(x)},p=x=>{u&&(c(E=>({...E,[u]:x})),f(null))},g=x=>{c(E=>{const j={...E};return delete j[x],j})},y=new Set(Object.values(a));return o.jsxs("div",{className:"player-relation",children:[o.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),o.jsxs("div",{className:"player-relation__columns",children:[o.jsxs("div",{className:"player-relation__col",children:[o.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),r.paires.map(x=>o.jsxs("div",{className:`player-relation__item player-relation__item--left ${u===x.id?"player-relation__item--selected":""} ${a[x.id]?"player-relation__item--matched":""}`,onClick:()=>{a[x.id]?g(x.id):h(x.id)},children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:x.gauche}}),a[x.id]&&o.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]}),o.jsxs("div",{className:"player-relation__col",children:[o.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),i.map(x=>o.jsxs("div",{className:`player-relation__item player-relation__item--right ${y.has(x.id)?"player-relation__item--matched":""} ${u&&!y.has(x.id)?"player-relation__item--clickable":""}`,onClick:()=>{u&&!y.has(x.id)&&p(x.id)},children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:x.droite}}),y.has(x.id)&&o.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]})]})]})},KX=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,a]=_.useState(e?.texteReponse||""),c=i.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return _.useEffect(()=>{n({texteReponse:i})},[i]),o.jsxs("div",{className:"player-essai",children:[o.jsxs("div",{className:"player-essai__info",children:[r.nombreMotsMin&&o.jsxs("span",{className:c<r.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",r.nombreMotsMin," mots"]}),r.nombreMotsMax&&o.jsxs("span",{className:c>r.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",r.nombreMotsMax," mots"]}),o.jsxs("span",{className:"player-essai__count",children:[c," mot",c>1?"s":""]})]}),o.jsx("textarea",{className:"player-essai__textarea",value:i,onChange:u=>a(u.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},QX=()=>{const{quizId:t}=fy(),e=Nr(),{currentUser:n}=Bn(),[r,i]=_.useState(null),[a,c]=_.useState(!0),[u,f]=_.useState(null);return _.useEffect(()=>{(async()=>{if(!t){f("ID du quiz manquant"),c(!1);return}try{const p=await vL(t);if(!p){f("Quiz introuvable");return}if(p.isPremium&&!n?.isPremium){f("Ce quiz est rserv aux abonns Premium");return}i(p)}catch(p){console.error("Erreur chargement quiz:",p),f(p.message||"Impossible de charger le quiz")}finally{c(!1)}})()},[t,n]),a?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),o.jsx("p",{children:"Chargement du quiz..."})]}):u?o.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:o.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),o.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:u}),u.includes("Premium")&&o.jsx("button",{onClick:()=>e("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),o.jsx("button",{onClick:()=>e(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):r?o.jsx(BX,{quiz:r,userId:n?.uid||"",onComplete:h=>{console.log(" Quiz termin  Note:",h.note20,"/20")},onQuit:()=>e("/dashboard")}):o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx("p",{children:"Quiz introuvable"}),o.jsx("button",{onClick:()=>e(-1),children:" Retour"})]})},yL=We(Ne,"quiz_results"),kE=We(Ne,"progressions"),WX=async t=>{try{const e=await Bi(yL,{...t,datePassage:Xe.now()});return t.reussi&&await tJ(t.userId,t.disciplineId,t.disciplineNom,t.quizId),e.id}catch(e){throw console.error("Erreur lors de la sauvegarde du rsultat :",e),e}},Ly=async(t,e)=>{try{let n=xt(yL,it("userId","==",t),Vn("datePassage","desc"));return e&&(n=xt(n,Js(e))),(await ht(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Erreur rcupration historique :",n),n}},YX=async t=>{try{const e=await Ly(t);if(e.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=e.reduce((p,g)=>p+g.pourcentage,0),r=Math.round(n/e.length),i=Math.max(...e.map(p=>p.pourcentage)),a=e.reduce((p,g)=>p+(g.tempsEcoule||0),0),c=e.filter(p=>p.reussi).length;let u=0,f=0;for(const p of e)p.reussi?(u++,f=Math.max(f,u)):u=0;let h=0;for(const p of e)if(p.reussi)h++;else break;return{totalQuizPasses:e.length,totalQuizReussis:c,moyenneGenerale:r,tempsTotal:a,meilleurScore:i,serieReussites:h,meilleureSerieReussites:Math.max(f,h)}}catch(e){return console.error("Erreur calcul stats :",e),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},XX=async t=>{try{const e=await Ly(t);if(e.length===0)return[];const n={};for(const r of e){const i=r.disciplineId;n[i]||(n[i]=[]),n[i].push(r)}return Object.entries(n).map(([r,i])=>{const a=Math.round(i.reduce((g,y)=>g+y.pourcentage,0)/i.length),c=Math.max(...i.map(g=>g.pourcentage)),u=i[0].pourcentage,f=i.filter(g=>g.reussi).length,h=i.reduce((g,y)=>g+(y.tempsEcoule||0),0);let p="stable";if(i.length>=4){const g=i.slice(0,3),y=i.slice(3,6),x=g.reduce((j,N)=>j+N.pourcentage,0)/g.length,E=y.reduce((j,N)=>j+N.pourcentage,0)/y.length;x-E>5?p="up":E-x>5&&(p="down")}return{disciplineId:r,disciplineNom:i[0].disciplineNom||r,nombreQuiz:i.length,moyenne:a,meilleurScore:c,dernierScore:u,quizReussis:f,tempsTotal:h,tendance:p}})}catch(e){return console.error("Erreur progression par discipline :",e),[]}},JX=async(t,e)=>{try{return(await Ly(t,e||20)).reverse().map(r=>({date:(r.datePassage?.toDate?r.datePassage.toDate():new Date(r.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:r.pourcentage,discipline:r.disciplineNom||r.disciplineId}))}catch(n){return console.error("Erreur donnes temporelles :",n),[]}},ZX=async(t,e,n)=>{const r=`${t}_${e}`,i=He(kE,r),a=await Er(i);if(a.exists())return{...a.data()};const[c,u]=await Promise.all([eI("ressources",e),eI("quizzes",e)]),f={userId:t,disciplineId:e,disciplineNom:n,ressourcesVues:[],quizReussis:[],totalRessources:c,totalQuiz:u,pourcentage:0,dernierAcces:Xe.now(),createdAt:Xe.now(),updatedAt:Xe.now()};return await My(i,f),f},eI=async(t,e)=>{try{const n=xt(We(Ne,t),it("disciplineId","==",e));return(await ht(n)).size}catch{return 0}},eJ=t=>{if(t.totalRessources+t.totalQuiz===0)return 0;const n=t.totalRessources>0?t.ressourcesVues.length/t.totalRessources*40:0,r=t.totalQuiz>0?t.quizReussis.length/t.totalQuiz*60:0;return t.totalRessources===0?Math.min(100,Math.round(t.quizReussis.length/t.totalQuiz*100)):t.totalQuiz===0?Math.min(100,Math.round(t.ressourcesVues.length/t.totalRessources*100)):Math.min(100,Math.round(n+r))},tJ=async(t,e,n,r)=>{try{const i=`${t}_${e}`,a=He(kE,i),c=await ZX(t,e,n);if(c.quizReussis.includes(r))return await sn(a,{dernierAcces:Xe.now()}),c;const u=[...c.quizReussis,r],f={...c,quizReussis:u,dernierAcces:Xe.now(),updatedAt:Xe.now(),pourcentage:0};return f.pourcentage=eJ(f),await My(a,f),f}catch(i){throw console.error("Erreur enregistrement quiz russi :",i),i}},nJ=async t=>{try{const e=xt(kE,it("userId","==",t));return(await ht(e)).docs.map(r=>r.data())}catch(e){return console.error("Erreur rcupration progressions :",e),[]}},rJ=async t=>{try{const e=await nJ(t),n=await bL(t),r=e.reduce((u,f)=>u+f.ressourcesVues.length,0),i=e.reduce((u,f)=>u+f.quizReussis.length,0),a=e.length>0?Math.round(e.reduce((u,f)=>u+f.pourcentage,0)/e.length):0,c=e.filter(u=>u.pourcentage>=100).length;return{totalRessourcesVues:r,totalQuizReussis:i,pourcentageMoyen:a,disciplinesCommencees:e.length,disciplinesCompletees:c,streakActuel:n.streakActuel,meilleurStreak:n.meilleurStreak,parDiscipline:e}}catch(e){return console.error("Erreur progression globale :",e),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},iJ=()=>new Date().toISOString().split("T")[0],sJ=()=>{const t=new Date;return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]},bL=async t=>{try{const e=He(Ne,"users",t),n=await Er(e);if(!n.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const r=n.data();return{streakActuel:r.streakActuel||0,meilleurStreak:r.meilleurStreak||0,dernierJourAcces:r.dernierJourAcces||""}}catch(e){return console.error("Erreur rcupration streak :",e),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},aJ=async t=>{try{const e=He(Ne,"users",t),n=await bL(t),r=iJ();if(n.dernierJourAcces===r)return n;const i=sJ();let a;n.dernierJourAcces===i?a=n.streakActuel+1:a=1;const c=Math.max(n.meilleurStreak,a);return await sn(e,{streakActuel:a,meilleurStreak:c,dernierJourAcces:r}),{streakActuel:a,meilleurStreak:c,dernierJourAcces:r}}catch(e){return console.error("Erreur mise  jour streak :",e),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},oJ=(t,e,n)=>{const r=n?.totalRessourcesVues||0;n?.totalQuizReussis;const i=n?.disciplinesCompletees||0;n?.streakActuel;const a=n?.meilleurStreak||0,c=n?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:r>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:r>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:r>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:r>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:t.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:t.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:t.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:t.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:t.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:t.moyenneGenerale>=80&&t.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:t.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:t.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:i>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:c>=3||e.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:c>=5||e.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:a>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:a>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:a>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:r>=50&&t.totalQuizReussis>=20}]},xL=t=>{if(t<60)return`${t} s`;const e=Math.floor(t/60),n=t%60;return n>0?`${e} min ${n.toString().padStart(2,"0")} s`:`${e} min`},$u=t=>t>=80?"#10b981":t>=60?"#3b82f6":t>=40?"#f59e0b":"#ef4444",_L=t=>t>=80?"Excellent":t>=60?"Bien":t>=40?"Passable":" amliorer",lJ=()=>{const{quizId:t}=fy(),e=Nr(),{currentUser:n}=Bn(),[r,i]=_.useState(null),[a,c]=_.useState(""),[u,f]=_.useState(!0),[h,p]=_.useState(null),[g,y]=_.useState("intro"),[x,E]=_.useState(0),[j,N]=_.useState({}),[A,R]=_.useState(0),[C,P]=_.useState(0),M=_.useRef(null),[B,D]=_.useState(0),[O,k]=_.useState(0),[U,L]=_.useState(0),[z,V]=_.useState(!1),[ge,Z]=_.useState(!1);_.useEffect(()=>{(async()=>{if(!t){p("ID du quiz manquant."),f(!1);return}try{const G=await oX(t);if(!G){p("Quiz introuvable."),f(!1);return}i(G),R(G.duree*60);try{const Ce=(await wl.getAll()).find(ie=>ie.id===G.disciplineId);c(Ce?.nom||G.disciplineId)}catch{c(G.disciplineId)}}catch(G){p("Erreur lors du chargement du quiz."),console.error(G)}finally{f(!1)}})()},[t]),_.useEffect(()=>{if(g==="playing")return M.current=setInterval(()=>{R(fe=>fe<=1?(clearInterval(M.current),we(),0):fe-1),P(fe=>fe+1)},1e3),()=>{M.current&&clearInterval(M.current)}},[g]);const H=()=>{y("playing"),E(0),N({}),P(0),r&&R(r.duree*60)},ae=(fe,G)=>{N(ce=>({...ce,[fe]:G}))},X=fe=>{r&&fe>=0&&fe<r.questions.length&&E(fe)},we=_.useCallback(async()=>{if(!r||!n||g==="review")return;M.current&&clearInterval(M.current);let fe=0,G=0,ce=0;r.questions.forEach(J=>{const Q=J.points||1;G+=Q,j[J.id]===J.reponseCorrecte&&(fe+=Q,ce++)});const Ce=G>0?Math.round(fe/G*100):0,ie=Ce>=(r.noteMinimale||50);D(fe),k(G),L(ce),y("review"),V(!0);try{const J={quizId:r.id,quizTitre:r.titre,disciplineId:r.disciplineId,disciplineNom:a,userId:n.uid,reponses:r.questions.map(Q=>j[Q.id]??-1),tempsEcoule:C,score:fe,totalPoints:G,pourcentage:Ce,reussi:ie,nombreQuestions:r.questions.length,bonnesReponses:ce};await WX(J),Z(!0)}catch(J){console.error("Erreur lors de la sauvegarde :",J)}finally{V(!1)}},[r,n,j,C,a,g]),W=fe=>{const G=Math.floor(fe/60),ce=fe%60;return`${G.toString().padStart(2,"0")}:${ce.toString().padStart(2,"0")}`},F=()=>{if(!r)return"";const fe=r.duree*60,G=A/fe;return G<=.1?"timer-critical":G<=.25?"timer-warning":""},ne=Object.keys(j).length;if(u)return o.jsxs("div",{className:"quiz-player-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement du quiz..."})]});if(h||!r)return o.jsxs("div",{className:"quiz-player-error",children:[o.jsx(hv,{size:48}),o.jsx("h3",{children:h||"Quiz introuvable"}),o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(gj,{size:18})," Retour au tableau de bord"]})]});if(r.isPremium&&!n?.isPremium)return o.jsx("div",{className:"quiz-player-locked",children:o.jsxs("div",{className:"qp-locked-card",children:[o.jsx(vj,{size:48}),o.jsx("h3",{children:"Quiz Premium"}),o.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),o.jsxs("p",{className:"qp-locked-price",children:[" partir de ",o.jsx("strong",{children:"2 000 FCFA/mois"})]}),o.jsxs("div",{className:"qp-locked-actions",children:[o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/premium"),children:[o.jsx(pi,{size:18})," Devenir Premium"]}),o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(Wx,{size:18})," Retour"]})]})]})});if(g==="intro")return o.jsx("div",{className:"quiz-player-intro",children:o.jsxs("div",{className:"qp-intro-card",children:[o.jsxs("div",{className:"qp-intro-header",children:[o.jsxs("button",{className:"qp-back-btn",onClick:()=>e(-1),children:[o.jsx(Wx,{size:20})," Retour"]}),r.isPremium&&o.jsxs("span",{className:"qp-badge qp-badge-premium",children:[o.jsx(pi,{size:12})," Premium"]})]}),o.jsxs("div",{className:"qp-intro-content",children:[o.jsx("h1",{className:"qp-intro-title",children:r.titre}),o.jsx("span",{className:"qp-intro-discipline",children:a}),o.jsxs("div",{className:"qp-intro-stats",children:[o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(cs,{size:20}),o.jsxs("div",{children:[o.jsx("span",{className:"qp-intro-stat-value",children:r.questions.length}),o.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(cd,{size:20}),o.jsxs("div",{children:[o.jsxs("span",{className:"qp-intro-stat-value",children:[r.duree," min"]}),o.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(pl,{size:20}),o.jsxs("div",{children:[o.jsxs("span",{className:"qp-intro-stat-value",children:[r.noteMinimale||50,"%"]}),o.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),o.jsxs("div",{className:"qp-intro-instructions",children:[o.jsx("h3",{children:"Instructions"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),o.jsx("li",{children:"Chaque question a une seule bonne rponse"}),o.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),o.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),o.jsxs("li",{children:["Il faut obtenir au moins ",r.noteMinimale||50,"% pour russir"]})]})]})]}),o.jsxs("button",{className:"qp-btn qp-btn-start",onClick:H,children:[o.jsx(vh,{size:20})," Commencer le quiz"]})]})});if(g==="playing"){const fe=r.questions[x];return o.jsxs("div",{className:"quiz-player-game",children:[o.jsxs("div",{className:"qp-game-header",children:[o.jsxs("div",{className:"qp-game-info",children:[o.jsx("span",{className:"qp-game-title",children:r.titre}),o.jsx("span",{className:"qp-game-discipline",children:a})]}),o.jsxs("div",{className:`qp-timer ${F()}`,children:[o.jsx(NY,{size:18}),o.jsx("span",{children:W(A)})]})]}),o.jsx("div",{className:"qp-progress-bar",children:o.jsx("div",{className:"qp-progress-fill",style:{width:`${(x+1)/r.questions.length*100}%`}})}),o.jsxs("div",{className:"qp-game-content",children:[o.jsxs("div",{className:"qp-question-header",children:[o.jsxs("span",{className:"qp-question-number",children:["Question ",x+1,"/",r.questions.length]}),o.jsxs("span",{className:"qp-question-points",children:[fe.points||1," pt(s)"]})]}),o.jsx("h2",{className:"qp-question-text",children:fe.question}),o.jsx("div",{className:"qp-options-list",children:fe.options.map((G,ce)=>o.jsxs("button",{className:`qp-option ${j[fe.id]===ce?"selected":""}`,onClick:()=>ae(fe.id,ce),children:[o.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+ce)}),o.jsx("span",{className:"qp-option-text",children:G}),j[fe.id]===ce&&o.jsx(fn,{size:18,className:"qp-option-check"})]},ce))})]}),o.jsxs("div",{className:"qp-game-footer",children:[o.jsx("div",{className:"qp-question-indicators",children:r.questions.map((G,ce)=>o.jsx("button",{className:`qp-indicator ${ce===x?"active":""} ${j[G.id]!==void 0?"answered":""}`,onClick:()=>X(ce),children:ce+1},G.id))}),o.jsxs("div",{className:"qp-nav-buttons",children:[o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>X(x-1),disabled:x===0,children:[o.jsx(Wx,{size:16})," Prcdent"]}),x<r.questions.length-1?o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>X(x+1),children:["Suivant ",o.jsx(nc,{size:16})]}):o.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:we,disabled:ne<r.questions.length,children:[o.jsx(fn,{size:16}),"Soumettre (",ne,"/",r.questions.length,")"]})]})]})]})}const ue=O>0?Math.round(B/O*100):0,ve=ue>=(r.noteMinimale||50);return o.jsxs("div",{className:"quiz-player-review",children:[o.jsxs("div",{className:`qp-score-card ${ve?"success":"fail"}`,children:[o.jsx("div",{className:"qp-score-icon",children:ve?o.jsx(pl,{size:48}):o.jsx(hv,{size:48})}),o.jsx("h2",{className:"qp-score-title",children:ve?"Flicitations ! ":"Continuez vos efforts ! "}),o.jsxs("div",{className:"qp-score-circle",style:{borderColor:$u(ue)},children:[o.jsxs("span",{className:"qp-score-value",children:[ue,"%"]}),o.jsx("span",{className:"qp-score-label",children:_L(ue)})]}),o.jsxs("div",{className:"qp-score-details",children:[o.jsxs("div",{className:"qp-score-detail",children:[o.jsxs("span",{children:[U,"/",r.questions.length]}),o.jsx("small",{children:"Bonnes rponses"})]}),o.jsxs("div",{className:"qp-score-detail",children:[o.jsxs("span",{children:[B,"/",O]}),o.jsx("small",{children:"Points"})]}),o.jsxs("div",{className:"qp-score-detail",children:[o.jsx("span",{children:xL(C)}),o.jsx("small",{children:"Temps"})]})]}),z&&o.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),ge&&o.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),o.jsxs("div",{className:"qp-review-actions",children:[o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(gj,{size:18})," Tableau de bord"]}),o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:H,children:[o.jsx(pY,{size:18})," Recommencer"]})]}),o.jsxs("div",{className:"qp-review-questions",children:[o.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),r.questions.map((fe,G)=>{const ce=j[fe.id],Ce=ce===fe.reponseCorrecte;return o.jsxs("div",{className:`qp-review-question ${Ce?"correct":"incorrect"}`,children:[o.jsxs("div",{className:"qp-review-question-header",children:[o.jsxs("span",{className:"qp-review-q-number",children:["Q",G+1]}),Ce?o.jsxs("span",{className:"qp-review-badge correct",children:[o.jsx(fn,{size:14})," Correct"]}):o.jsxs("span",{className:"qp-review-badge incorrect",children:[o.jsx(pj,{size:14})," Incorrect"]}),o.jsxs("span",{className:"qp-review-q-points",children:[Ce?fe.points||1:0,"/",fe.points||1," pt(s)"]})]}),o.jsx("p",{className:"qp-review-q-text",children:fe.question}),o.jsx("div",{className:"qp-review-options",children:fe.options.map((ie,J)=>{let Q="qp-review-option";return J===fe.reponseCorrecte&&(Q+=" correct-answer"),J===ce&&!Ce&&(Q+=" wrong-answer"),o.jsxs("div",{className:Q,children:[o.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+J)}),o.jsx("span",{children:ie}),J===fe.reponseCorrecte&&o.jsx(fn,{size:14,className:"qp-review-check"}),J===ce&&!Ce&&o.jsx(pj,{size:14,className:"qp-review-x"})]},J)})}),fe.explication&&o.jsxs("div",{className:"qp-review-explication",children:[o.jsx("strong",{children:" Explication :"})," ",fe.explication]})]},fe.id)})]})]})};function jL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=jL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=jL(t))&&(r&&(r+=" "),r+=e);return r}var cJ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function DE(t){if(typeof t!="string")return!1;var e=cJ;return e.includes(t)}var uJ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dJ=new Set(uJ);function wL(t){return typeof t!="string"?!1:dJ.has(t)}function EL(t){return typeof t=="string"&&t.startsWith("data-")}function hs(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(wL(n)||EL(n))&&(e[n]=t[n]);return e}function fm(t){if(t==null)return null;if(_.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return hs(e)}return typeof t=="object"&&!Array.isArray(t)?hs(t):null}function kr(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(wL(n)||EL(n)||DE(n))&&(e[n]=t[n]);return e}function fJ(t){return t==null?null:_.isValidElement(t)?kr(t.props):typeof t=="object"&&!Array.isArray(t)?kr(t):null}var hJ=["children","width","height","viewBox","className","style","title","desc"];function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yj.apply(null,arguments)}function mJ(t,e){if(t==null)return{};var n,r,i=pJ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var NL=_.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:c,style:u,title:f,desc:h}=t,p=mJ(t,hJ),g=a||{width:r,height:i,x:0,y:0},y=Ut("recharts-surface",c);return _.createElement("svg",yj({},kr(p),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),_.createElement("title",null,f),_.createElement("desc",null,h),n)}),gJ=["children","className"];function bj(){return bj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bj.apply(null,arguments)}function vJ(t,e){if(t==null)return{};var n,r,i=yJ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qi=_.forwardRef((t,e)=>{var{children:n,className:r}=t,i=vJ(t,gJ),a=Ut("recharts-layer",r);return _.createElement("g",bj({className:a},kr(i),{ref:e}),n)}),bJ=_.createContext(null);function Gt(t){return function(){return t}}const SL=Math.cos,gv=Math.sin,gs=Math.sqrt,vv=Math.PI,qy=2*vv,xj=Math.PI,_j=2*xj,rc=1e-6,xJ=_j-rc;function AL(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function _J(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return AL;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class jJ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?AL:_J(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,c){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+c}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let c=this._x1,u=this._y1,f=r-e,h=i-n,p=c-e,g=u-n,y=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>rc)if(!(Math.abs(g*f-h*p)>rc)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let x=r-c,E=i-u,j=f*f+h*h,N=x*x+E*E,A=Math.sqrt(j),R=Math.sqrt(y),C=a*Math.tan((xj-Math.acos((j+y-N)/(2*A*R)))/2),P=C/R,M=C/A;Math.abs(P-1)>rc&&this._append`L${e+P*p},${n+P*g}`,this._append`A${a},${a},0,0,${+(g*x>p*E)},${this._x1=e+M*f},${this._y1=n+M*h}`}}arc(e,n,r,i,a,c){if(e=+e,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),h=e+u,p=n+f,g=1^c,y=c?i-a:a-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>rc||Math.abs(this._y1-p)>rc)&&this._append`L${h},${p}`,r&&(y<0&&(y=y%_j+_j),y>xJ?this._append`A${r},${r},0,1,${g},${e-u},${n-f}A${r},${r},0,1,${g},${this._x1=h},${this._y1=p}`:y>rc&&this._append`A${r},${r},0,${+(y>=xj)},${g},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ME(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new jJ(e)}function zE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TL(t){this._context=t}TL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Uy(t){return new TL(t)}function CL(t){return t[0]}function PL(t){return t[1]}function IL(t,e){var n=Gt(!0),r=null,i=Uy,a=null,c=ME(u);t=typeof t=="function"?t:t===void 0?CL:Gt(t),e=typeof e=="function"?e:e===void 0?PL:Gt(e);function u(f){var h,p=(f=zE(f)).length,g,y=!1,x;for(r==null&&(a=i(x=c())),h=0;h<=p;++h)!(h<p&&n(g=f[h],h,f))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(g,h,f),+e(g,h,f));if(x)return a=null,x+""||null}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Gt(+f),u):t},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Gt(+f),u):e},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Gt(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(a=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=a=null:a=i(r=f),u):r},u}function ug(t,e,n){var r=null,i=Gt(!0),a=null,c=Uy,u=null,f=ME(h);t=typeof t=="function"?t:t===void 0?CL:Gt(+t),e=typeof e=="function"?e:Gt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?PL:Gt(+n);function h(g){var y,x,E,j=(g=zE(g)).length,N,A=!1,R,C=new Array(j),P=new Array(j);for(a==null&&(u=c(R=f())),y=0;y<=j;++y){if(!(y<j&&i(N=g[y],y,g))===A)if(A=!A)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),E=y-1;E>=x;--E)u.point(C[E],P[E]);u.lineEnd(),u.areaEnd()}A&&(C[y]=+t(N,y,g),P[y]=+e(N,y,g),u.point(r?+r(N,y,g):C[y],n?+n(N,y,g):P[y]))}if(R)return u=null,R+""||null}function p(){return IL().defined(i).curve(c).context(a)}return h.x=function(g){return arguments.length?(t=typeof g=="function"?g:Gt(+g),r=null,h):t},h.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Gt(+g),h):t},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Gt(+g),h):r},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:Gt(+g),n=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Gt(+g),h):e},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Gt(+g),h):n},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(n)},h.lineX1=function(){return p().x(r).y(e)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Gt(!!g),h):i},h.curve=function(g){return arguments.length?(c=g,a!=null&&(u=c(a)),h):c},h.context=function(g){return arguments.length?(g==null?a=u=null:u=c(a=g),h):a},h}class OL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function wJ(t){return new OL(t,!0)}function EJ(t){return new OL(t,!1)}const LE={draw(t,e){const n=gs(e/vv);t.moveTo(n,0),t.arc(0,0,n,0,qy)}},NJ={draw(t,e){const n=gs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},RL=gs(1/3),SJ=RL*2,AJ={draw(t,e){const n=gs(e/SJ),r=n*RL;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},TJ={draw(t,e){const n=gs(e),r=-n/2;t.rect(r,r,n,n)}},CJ=.8908130915292852,kL=gv(vv/10)/gv(7*vv/10),PJ=gv(qy/10)*kL,IJ=-SL(qy/10)*kL,OJ={draw(t,e){const n=gs(e*CJ),r=PJ*n,i=IJ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const c=qy*a/5,u=SL(c),f=gv(c);t.lineTo(f*n,-u*n),t.lineTo(u*r-f*i,f*r+u*i)}t.closePath()}},n_=gs(3),RJ={draw(t,e){const n=-gs(e/(n_*3));t.moveTo(0,n*2),t.lineTo(-n_*n,-n),t.lineTo(n_*n,-n),t.closePath()}},ki=-.5,Di=gs(3)/2,jj=1/gs(12),kJ=(jj/2+1)*3,DJ={draw(t,e){const n=gs(e/kJ),r=n/2,i=n*jj,a=r,c=n*jj+n,u=-a,f=c;t.moveTo(r,i),t.lineTo(a,c),t.lineTo(u,f),t.lineTo(ki*r-Di*i,Di*r+ki*i),t.lineTo(ki*a-Di*c,Di*a+ki*c),t.lineTo(ki*u-Di*f,Di*u+ki*f),t.lineTo(ki*r+Di*i,ki*i-Di*r),t.lineTo(ki*a+Di*c,ki*c-Di*a),t.lineTo(ki*u+Di*f,ki*f-Di*u),t.closePath()}};function MJ(t,e){let n=null,r=ME(i);t=typeof t=="function"?t:Gt(t||LE),e=typeof e=="function"?e:Gt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Gt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Gt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function yv(){}function bv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function DL(t){this._context=t}DL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zJ(t){return new DL(t)}function ML(t){this._context=t}ML.prototype={areaStart:yv,areaEnd:yv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:bv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function LJ(t){return new ML(t)}function zL(t){this._context=t}zL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:bv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qJ(t){return new zL(t)}function LL(t){this._context=t}LL.prototype={areaStart:yv,areaEnd:yv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function UJ(t){return new LL(t)}function tI(t){return t<0?-1:1}function nI(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),c=(n-t._y1)/(i||r<0&&-0),u=(a*i+c*r)/(r+i);return(tI(a)+tI(c))*Math.min(Math.abs(a),Math.abs(c),.5*Math.abs(u))||0}function rI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function r_(t,e,n){var r=t._x0,i=t._y0,a=t._x1,c=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,c-u*n,a,c)}function xv(t){this._context=t}xv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:r_(this,this._t0,rI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,r_(this,rI(this,n=nI(this,t,e)),n);break;default:r_(this,this._t0,n=nI(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function qL(t){this._context=new UL(t)}(qL.prototype=Object.create(xv.prototype)).point=function(t,e){xv.prototype.point.call(this,e,t)};function UL(t){this._context=t}UL.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function VJ(t){return new xv(t)}function BJ(t){return new qL(t)}function VL(t){this._context=t}VL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=iI(t),i=iI(e),a=0,c=1;c<n;++a,++c)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function iI(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),c=new Array(n);for(i[0]=0,a[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,c[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,c[e]-=r*c[e-1];for(i[n-1]=c[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(c[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function $J(t){return new VL(t)}function Vy(t,e){this._context=t,this._t=e}Vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function FJ(t){return new Vy(t,.5)}function HJ(t){return new Vy(t,0)}function GJ(t){return new Vy(t,1)}function Ac(t,e){if((c=t.length)>1)for(var n=1,r,i,a=t[e[0]],c,u=a.length;n<c;++n)for(i=a,a=t[e[n]],r=0;r<u;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function wj(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function KJ(t,e){return t[e]}function QJ(t){const e=[];return e.key=t,e}function WJ(){var t=Gt([]),e=wj,n=Ac,r=KJ;function i(a){var c=Array.from(t.apply(this,arguments),QJ),u,f=c.length,h=-1,p;for(const g of a)for(u=0,++h;u<f;++u)(c[u][h]=[0,+r(g,c[u].key,h,a)]).data=g;for(u=0,p=zE(e(c));u<f;++u)c[p[u]].index=u;return n(c,p),c}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Gt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Gt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?wj:typeof a=="function"?a:Gt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Ac,i):n},i}function YJ(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,c;i<a;++i){for(c=n=0;n<r;++n)c+=t[n][i][1]||0;if(c)for(n=0;n<r;++n)t[n][i][1]/=c}Ac(t,e)}}function XJ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var c=0,u=0;c<i;++c)u+=t[c][n][1]||0;r[n][1]+=r[n][0]=-u/2}Ac(t,e)}}function JJ(t,e){if(!(!((c=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,c;r<a;++r){for(var u=0,f=0,h=0;u<c;++u){for(var p=t[e[u]],g=p[r][1]||0,y=p[r-1][1]||0,x=(g-y)/2,E=0;E<u;++E){var j=t[e[E]],N=j[r][1]||0,A=j[r-1][1]||0;x+=N-A}f+=g,h+=x*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=h/f)}i[r-1][1]+=i[r-1][0]=n,Ac(t,e)}}var i_={},s_={},sI;function ZJ(){return sI||(sI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(s_)),s_}var a_={},aI;function BL(){return aI||(aI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(a_)),a_}var o_={},oI;function qE(){return oI||(oI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(o_)),o_}var l_={},c_={},lI;function eZ(){return lI||(lI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(c_)),c_}var cI;function UE(){return cI||(cI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eZ(),n=qE();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],c=i.length;if(c===0)return a;let u=0,f="",h="",p=!1;for(i.charCodeAt(0)===46&&(a.push(""),u++);u<c;){const g=i[u];h?g==="\\"&&u+1<c?(u++,f+=i[u]):g===h?h="":f+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,a.push(f),f=""):f+=g:g==="["?(p=!0,f&&(a.push(f),f="")):g==="."?f&&(a.push(f),f=""):f+=g,u++}return f&&a.push(f),a}t.toPath=r})(l_)),l_}var uI;function VE(){return uI||(uI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZJ(),n=BL(),r=qE(),i=UE();function a(u,f,h){if(u==null)return h;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?n.isDeepKey(f)?a(u,i.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const p=u[f];return p===void 0?h:p}default:{if(Array.isArray(f))return c(u,f,h);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?h:p}}}function c(u,f,h){if(f.length===0)return h;let p=u;for(let g=0;g<f.length;g++){if(p==null||e.isUnsafeProperty(f[g]))return h;p=p[f[g]]}return p===void 0?h:p}t.get=a})(i_)),i_}var u_,dI;function tZ(){return dI||(dI=1,u_=VE().get),u_}var nZ=tZ();const fd=ra(nZ);var rZ=4;function el(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rZ,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function hn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,c)=>{var u=n[c-1];return typeof u=="string"?i+u+a:u!==void 0?i+el(u)+a:i+a},"")}var Xr=t=>t===0?0:t>0?1:-1,Zs=t=>typeof t=="number"&&t!=+t,Tc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Re=t=>(typeof t=="number"||t instanceof Number)&&!Zs(t),ea=t=>Re(t)||typeof t=="string",iZ=0,Rh=t=>{var e=++iZ;return"".concat(t||"").concat(e)},ms=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Re(e)&&typeof e!="string")return r;var a;if(Tc(e)){if(n==null)return r;var c=e.indexOf("%");a=n*parseFloat(e.slice(0,c))/100}else a=+e;return Zs(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},$L=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function mn(t,e,n){return Re(t)&&Re(e)?el(t+n*(e-t)):e}function FL(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):fd(r,e))===n)}var an=t=>t===null||typeof t>"u",hm=t=>an(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Jr(t){return t!=null}function Uc(){}var sZ=["type","size","sizeType"];function Ej(){return Ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ej.apply(null,arguments)}function fI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(n),!0).forEach(function(r){aZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aZ(t,e,n){return(e=oZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oZ(t){var e=lZ(t,"string");return typeof e=="symbol"?e:e+""}function lZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cZ(t,e){if(t==null)return{};var n,r,i=uZ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var HL={symbolCircle:LE,symbolCross:NJ,symbolDiamond:AJ,symbolSquare:TJ,symbolStar:OJ,symbolTriangle:RJ,symbolWye:DJ},dZ=Math.PI/180,fZ=t=>{var e="symbol".concat(hm(t));return HL[e]||LE},hZ=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*dZ;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},mZ=(t,e)=>{HL["symbol".concat(hm(t))]=e},GL=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=cZ(t,sZ),a=hI(hI({},i),{},{type:e,size:n,sizeType:r}),c="circle";typeof e=="string"&&(c=e);var u=()=>{var y=fZ(c),x=MJ().type(y).size(hZ(n,r,c)),E=x();if(E!==null)return E},{className:f,cx:h,cy:p}=a,g=kr(a);return Re(h)&&Re(p)&&Re(n)?_.createElement("path",Ej({},g,{className:Ut("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};GL.registerSymbol=mZ;var KL=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,BE=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(_.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{DE(i)&&(r[i]=(a=>n[i](n,a)))}),r},pZ=(t,e,n)=>r=>(t(e,n,r),null),$E=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];DE(i)&&typeof a=="function"&&(r||(r={}),r[i]=pZ(a,e,n))}),r};function mI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mI(Object(n),!0).forEach(function(r){vZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vZ(t,e,n){return(e=yZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yZ(t){var e=bZ(t,"string");return typeof e=="symbol"?e:e+""}function bZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mr(t,e){var n=gZ({},t),r=e,i=Object.keys(e),a=i.reduce((c,u)=>(c[u]===void 0&&r[u]!==void 0&&(c[u]=r[u]),c),n);return a}var d_={},f_={},pI;function xZ(){return pI||(pI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const c=n[a],u=r(c,a,n);i.has(u)||i.set(u,c)}return Array.from(i.values())}t.uniqBy=e})(f_)),f_}var h_={},gI;function _Z(){return gI||(gI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(h_)),h_}var m_={},vI;function QL(){return vI||(vI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(m_)),m_}var p_={},g_={},v_={},yI;function jZ(){return yI||(yI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(v_)),v_}var bI;function FE(){return bI||(bI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jZ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(g_)),g_}var y_={},xI;function wZ(){return xI||(xI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(y_)),y_}var _I;function EZ(){return _I||(_I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FE(),n=wZ();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(p_)),p_}var b_={},x_={},jI;function NZ(){return jI||(jI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VE();function n(r){return function(i){return e.get(i,r)}}t.property=n})(x_)),x_}var __={},j_={},w_={},E_={},wI;function WL(){return wI||(wI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(E_)),E_}var N_={},EI;function YL(){return EI||(EI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(N_)),N_}var S_={},NI;function XL(){return NI||(NI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(S_)),S_}var SI;function SZ(){return SI||(SI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WL(),n=YL(),r=XL();function i(p,g,y){return typeof y!="function"?i(p,g,()=>{}):a(p,g,function x(E,j,N,A,R,C){const P=y(E,j,N,A,R,C);return P!==void 0?!!P:a(E,j,x,C)},new Map)}function a(p,g,y,x){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,y,x);case"function":return Object.keys(g).length>0?a(p,{...g},y,x):r.isEqualsSameValueZero(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:r.isEqualsSameValueZero(p,g)}}function c(p,g,y,x){if(g==null)return!0;if(Array.isArray(g))return f(p,g,y,x);if(g instanceof Map)return u(p,g,y,x);if(g instanceof Set)return h(p,g,y,x);const E=Object.keys(g);if(p==null||n.isPrimitive(p))return E.length===0;if(E.length===0)return!0;if(x?.has(g))return x.get(g)===p;x?.set(g,p);try{for(let j=0;j<E.length;j++){const N=E[j];if(!n.isPrimitive(p)&&!(N in p)||g[N]===void 0&&p[N]!==void 0||g[N]===null&&p[N]!==null||!y(p[N],g[N],N,p,g,x))return!1}return!0}finally{x?.delete(g)}}function u(p,g,y,x){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[E,j]of g.entries()){const N=p.get(E);if(y(N,j,E,p,g,x)===!1)return!1}return!0}function f(p,g,y,x){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const E=new Set;for(let j=0;j<g.length;j++){const N=g[j];let A=!1;for(let R=0;R<p.length;R++){if(E.has(R))continue;const C=p[R];let P=!1;if(y(C,N,j,p,g,x)&&(P=!0),P){E.add(R),A=!0;break}}if(!A)return!1}return!0}function h(p,g,y,x){return g.size===0?!0:p instanceof Set?f([...p],[...g],y,x):!1}t.isMatchWith=i,t.isSetMatch=h})(w_)),w_}var AI;function JL(){return AI||(AI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SZ();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(j_)),j_}var A_={},T_={},C_={},TI;function AZ(){return TI||(TI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(C_)),C_}var P_={},CI;function HE(){return CI||(CI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(P_)),P_}var I_={},PI;function ZL(){return PI||(PI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",c="[object Symbol]",u="[object Date]",f="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",y="[object ArrayBuffer]",x="[object Object]",E="[object Error]",j="[object DataView]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",C="[object Uint32Array]",P="[object BigUint64Array]",M="[object Int8Array]",B="[object Int16Array]",D="[object Int32Array]",O="[object BigInt64Array]",k="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=y,t.arrayTag=p,t.bigInt64ArrayTag=O,t.bigUint64ArrayTag=P,t.booleanTag=i,t.dataViewTag=j,t.dateTag=u,t.errorTag=E,t.float32ArrayTag=k,t.float64ArrayTag=U,t.functionTag=g,t.int16ArrayTag=B,t.int32ArrayTag=D,t.int8ArrayTag=M,t.mapTag=f,t.numberTag=r,t.objectTag=x,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=c,t.uint16ArrayTag=R,t.uint32ArrayTag=C,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=A})(I_)),I_}var O_={},II;function TZ(){return II||(II=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(O_)),O_}var OI;function e3(){return OI||(OI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AZ(),n=HE(),r=ZL(),i=YL(),a=TZ();function c(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,y,x=new Map,E=void 0){const j=E?.(p,g,y,x);if(j!==void 0)return j;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const N=new Array(p.length);x.set(p,N);for(let A=0;A<p.length;A++)N[A]=u(p[A],A,y,x,E);return Object.hasOwn(p,"index")&&(N.index=p.index),Object.hasOwn(p,"input")&&(N.input=p.input),N}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const N=new RegExp(p.source,p.flags);return N.lastIndex=p.lastIndex,N}if(p instanceof Map){const N=new Map;x.set(p,N);for(const[A,R]of p)N.set(A,u(R,A,y,x,E));return N}if(p instanceof Set){const N=new Set;x.set(p,N);for(const A of p)N.add(u(A,void 0,y,x,E));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(a.isTypedArray(p)){const N=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,N);for(let A=0;A<p.length;A++)N[A]=u(p[A],A,y,x,E);return N}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const N=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,N),f(N,p,y,x,E),N}if(typeof File<"u"&&p instanceof File){const N=new File([p],p.name,{type:p.type});return x.set(p,N),f(N,p,y,x,E),N}if(typeof Blob<"u"&&p instanceof Blob){const N=new Blob([p],{type:p.type});return x.set(p,N),f(N,p,y,x,E),N}if(p instanceof Error){const N=new p.constructor;return x.set(p,N),N.message=p.message,N.name=p.name,N.stack=p.stack,N.cause=p.cause,f(N,p,y,x,E),N}if(p instanceof Boolean){const N=new Boolean(p.valueOf());return x.set(p,N),f(N,p,y,x,E),N}if(p instanceof Number){const N=new Number(p.valueOf());return x.set(p,N),f(N,p,y,x,E),N}if(p instanceof String){const N=new String(p.valueOf());return x.set(p,N),f(N,p,y,x,E),N}if(typeof p=="object"&&h(p)){const N=Object.create(Object.getPrototypeOf(p));return x.set(p,N),f(N,p,y,x,E),N}return p}function f(p,g,y=p,x,E){const j=[...Object.keys(g),...e.getSymbols(g)];for(let N=0;N<j.length;N++){const A=j[N],R=Object.getOwnPropertyDescriptor(p,A);(R==null||R.writable)&&(p[A]=u(g[A],A,y,x,E))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=c,t.cloneDeepWithImpl=u,t.copyProperties=f})(T_)),T_}var RI;function CZ(){return RI||(RI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e3();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(A_)),A_}var kI;function PZ(){return kI||(kI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JL(),n=CZ();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(__)),__}var R_={},k_={},D_={},DI;function IZ(){return DI||(DI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e3(),n=HE(),r=ZL();function i(a,c){return e.cloneDeepWith(a,(u,f,h,p)=>{const g=c?.(u,f,h,p);if(g!==void 0)return g;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const y={};return p.set(a,y),e.copyProperties(y,a,h,p),y}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const y=new a.constructor(a?.valueOf());return e.copyProperties(y,a),y}case r.argumentsTag:{const y={};return e.copyProperties(y,a),y.length=a.length,y[Symbol.iterator]=a[Symbol.iterator],y}default:return}}})}t.cloneDeepWith=i})(D_)),D_}var MI;function OZ(){return MI||(MI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IZ();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(k_)),k_}var M_={},z_={},zI;function t3(){return zI||(zI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(z_)),z_}var L_={},LI;function RZ(){return LI||(LI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HE();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(L_)),L_}var qI;function kZ(){return qI||(qI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BL(),n=t3(),r=RZ(),i=UE();function a(c,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&e.isDeepKey(u)&&c?.[u]==null?f=i.toPath(u):f=[u],f.length===0)return!1;let h=c;for(let p=0;p<f.length;p++){const g=f[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}t.has=a})(M_)),M_}var UI;function DZ(){return UI||(UI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JL(),n=qE(),r=OZ(),i=VE(),a=kZ();function c(u,f){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(h){const p=i.get(h,u);return p===void 0?a.has(h,u):f===void 0?p===void 0:e.isMatch(p,f)}}t.matchesProperty=c})(R_)),R_}var VI;function MZ(){return VI||(VI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QL(),n=NZ(),r=PZ(),i=DZ();function a(c){if(c==null)return e.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):r.matches(c);case"string":case"symbol":case"number":return n.property(c)}}t.iteratee=a})(b_)),b_}var BI;function zZ(){return BI||(BI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xZ(),n=_Z(),r=QL(),i=EZ(),a=MZ();function c(u,f=r.identity){return i.isArrayLikeObject(u)?e.uniqBy(Array.from(u),n.ary(a.iteratee(f),1)):[]}t.uniqBy=c})(d_)),d_}var q_,$I;function LZ(){return $I||($I=1,q_=zZ().uniqBy),q_}var qZ=LZ();const FI=ra(qZ);function UZ(t,e,n){return e===!0?FI(t,n):typeof e=="function"?FI(t,e):t}var U_={exports:{}},V_={},B_={exports:{}},$_={};var HI;function VZ(){if(HI)return $_;HI=1;var t=bd();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,c=t.useDebugValue;function u(g,y){var x=y(),E=r({inst:{value:x,getSnapshot:y}}),j=E[0].inst,N=E[1];return a(function(){j.value=x,j.getSnapshot=y,f(j)&&N({inst:j})},[g,x,y]),i(function(){return f(j)&&N({inst:j}),g(function(){f(j)&&N({inst:j})})},[g]),c(x),x}function f(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!n(g,x)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return $_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,$_}var GI;function BZ(){return GI||(GI=1,B_.exports=VZ()),B_.exports}var KI;function $Z(){if(KI)return V_;KI=1;var t=bd(),e=BZ();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,c=t.useEffect,u=t.useMemo,f=t.useDebugValue;return V_.useSyncExternalStoreWithSelector=function(h,p,g,y,x){var E=a(null);if(E.current===null){var j={hasValue:!1,value:null};E.current=j}else j=E.current;E=u(function(){function A(B){if(!R){if(R=!0,C=B,B=y(B),x!==void 0&&j.hasValue){var D=j.value;if(x(D,B))return P=D}return P=B}if(D=P,r(C,B))return D;var O=y(B);return x!==void 0&&x(D,O)?(C=B,D):(C=B,P=O)}var R=!1,C,P,M=g===void 0?null:g;return[function(){return A(p())},M===null?void 0:function(){return A(M())}]},[p,g,y,x]);var N=i(h,E[0],E[1]);return c(function(){j.hasValue=!0,j.value=N},[N]),f(N),N},V_}var QI;function FZ(){return QI||(QI=1,U_.exports=$Z()),U_.exports}var HZ=FZ(),GE=_.createContext(null),GZ=t=>t,wn=()=>{var t=_.useContext(GE);return t?t.store.dispatch:GZ},Ug=()=>{},KZ=()=>Ug,QZ=(t,e)=>t===e;function Le(t){var e=_.useContext(GE),n=_.useMemo(()=>e?r=>{if(r!=null)return t(r)}:Ug,[e,t]);return HZ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:KZ,e?e.store.getState:Ug,e?e.store.getState:Ug,n,QZ)}function WZ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function YZ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function XZ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var WI=t=>Array.isArray(t)?t:[t];function JZ(t){const e=Array.isArray(t[0])?t[0]:t;return XZ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ZZ(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var eee=class{constructor(t){this.value=t}deref(){return this.value}},tee=typeof WeakRef<"u"?WeakRef:eee,nee=0,YI=1;function dg(){return{s:nee,v:void 0,o:null,p:null}}function n3(t,e={}){let n=dg();const{resultEqualityCheck:r}=e;let i,a=0;function c(){let u=n;const{length:f}=arguments;for(let g=0,y=f;g<y;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let E=u.o;E===null&&(u.o=E=new WeakMap);const j=E.get(x);j===void 0?(u=dg(),E.set(x,u)):u=j}else{let E=u.p;E===null&&(u.p=E=new Map);const j=E.get(x);j===void 0?(u=dg(),E.set(x,u)):u=j}}const h=u;let p;if(u.s===YI)p=u.v;else if(p=t.apply(null,arguments),a++,r){const g=i?.deref?.()??i;g!=null&&r(g,p)&&(p=g,a!==0&&a--),i=typeof p=="object"&&p!==null||typeof p=="function"?new tee(p):p}return h.s=YI,h.v=p,p}return c.clearCache=()=>{n=dg(),c.resetResultsCount()},c.resultsCount=()=>a,c.resetResultsCount=()=>{a=0},c}function ree(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,c=0,u,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),WZ(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:x=n3,argsMemoizeOptions:E=[]}=p,j=WI(y),N=WI(E),A=JZ(i),R=g(function(){return a++,h.apply(null,arguments)},...j),C=x(function(){c++;const M=ZZ(A,arguments);return u=R.apply(null,M),u},...N);return Object.assign(C,{resultFunc:h,memoizedResultFunc:R,dependencies:A,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var de=ree(n3),iee=Object.assign((t,e=de)=>{YZ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((c,u,f)=>(c[n[f]]=u,c),{}))},{withTypes:()=>iee}),F_={},H_={},G_={},XI;function see(){return XI||(XI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const c=e(r),u=e(i);if(c===u&&c===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?u-c:c-u}return 0};t.compareValues=n})(G_)),G_}var K_={},Q_={},JI;function r3(){return JI||(JI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Q_)),Q_}var ZI;function aee(){return ZI||(ZI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r3(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,c){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||c!=null&&Object.hasOwn(c,a)}t.isKey=i})(K_)),K_}var eO;function oee(){return eO||(eO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=see(),n=aee(),r=UE();function i(a,c,u,f){if(a==null)return[];u=f?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,E)=>{let j=x;for(let N=0;N<E.length&&j!=null;++N)j=j[E[N]];return j},p=(x,E)=>E==null||x==null?E:typeof x=="object"&&"key"in x?Object.hasOwn(E,x.key)?E[x.key]:h(E,x.path):typeof x=="function"?x(E):Array.isArray(x)?h(E,x):typeof E=="object"?E[x]:E,g=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return a.map(x=>({original:x,criteria:g.map(E=>p(E,x))})).slice().sort((x,E)=>{for(let j=0;j<g.length;j++){const N=e.compareValues(x.criteria[j],E.criteria[j],u[j]);if(N!==0)return N}return 0}).map(x=>x.original)}t.orderBy=i})(H_)),H_}var W_={},tO;function lee(){return tO||(tO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),c=(u,f)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&f<a?c(p,f+1):i.push(p)}};return c(n,0),i}t.flatten=e})(W_)),W_}var Y_={},nO;function i3(){return nO||(nO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t3(),n=FE(),r=WL(),i=XL();function a(c,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&e.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.isEqualsSameValueZero(f[u],c):!1}t.isIterateeCall=a})(Y_)),Y_}var rO;function cee(){return rO||(rO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oee(),n=lee(),r=i3();function i(a,...c){const u=c.length;return u>1&&r.isIterateeCall(a,c[0],c[1])?c=[]:u>2&&r.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),e.orderBy(a,n.flatten(c),["asc"])}t.sortBy=i})(F_)),F_}var X_,iO;function uee(){return iO||(iO=1,X_=cee().sortBy),X_}var dee=uee();const By=ra(dee);var s3=t=>t.legend.settings,fee=t=>t.legend.size,hee=t=>t.legend.payload;de([hee,s3],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?By(r,n):r});var fg=1;function mee(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=_.useState({height:0,left:0,top:0,width:0}),r=_.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),c={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(c.height-e.height)>fg||Math.abs(c.left-e.left)>fg||Math.abs(c.top-e.top)>fg||Math.abs(c.width-e.width)>fg)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function cr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var pee=typeof Symbol=="function"&&Symbol.observable||"@@observable",sO=pee,J_=()=>Math.random().toString(36).substring(7).split("").join("."),gee={INIT:`@@redux/INIT${J_()}`,REPLACE:`@@redux/REPLACE${J_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${J_()}`},_v=gee;function KE(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function a3(t,e,n){if(typeof t!="function")throw new Error(cr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(cr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(cr(1));return n(a3)(t,e)}let r=t,i=e,a=new Map,c=a,u=0,f=!1;function h(){c===a&&(c=new Map,a.forEach((N,A)=>{c.set(A,N)}))}function p(){if(f)throw new Error(cr(3));return i}function g(N){if(typeof N!="function")throw new Error(cr(4));if(f)throw new Error(cr(5));let A=!0;h();const R=u++;return c.set(R,N),function(){if(A){if(f)throw new Error(cr(6));A=!1,h(),c.delete(R),a=null}}}function y(N){if(!KE(N))throw new Error(cr(7));if(typeof N.type>"u")throw new Error(cr(8));if(typeof N.type!="string")throw new Error(cr(17));if(f)throw new Error(cr(9));try{f=!0,i=r(i,N)}finally{f=!1}return(a=c).forEach(R=>{R()}),N}function x(N){if(typeof N!="function")throw new Error(cr(10));r=N,y({type:_v.REPLACE})}function E(){const N=g;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(cr(11));function R(){const P=A;P.next&&P.next(p())}return R(),{unsubscribe:N(R)}},[sO](){return this}}}return y({type:_v.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:x,[sO]:E}}function vee(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:_v.INIT})>"u")throw new Error(cr(12));if(typeof n(void 0,{type:_v.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cr(13))})}function o3(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const c=e[a];typeof t[c]=="function"&&(n[c]=t[c])}const r=Object.keys(n);let i;try{vee(n)}catch(a){i=a}return function(c={},u){if(i)throw i;let f=!1;const h={};for(let p=0;p<r.length;p++){const g=r[p],y=n[g],x=c[g],E=y(x,u);if(typeof E>"u")throw u&&u.type,new Error(cr(14));h[g]=E,f=f||E!==x}return f=f||r.length!==Object.keys(c).length,f?h:c}}function jv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function yee(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(cr(15))};const c={getState:i.getState,dispatch:(f,...h)=>a(f,...h)},u=t.map(f=>f(c));return a=jv(...u)(i.dispatch),{...i,dispatch:a}}}function l3(t){return KE(t)&&"type"in t&&typeof t.type=="string"}var c3=Symbol.for("immer-nothing"),aO=Symbol.for("immer-draftable"),Dr=Symbol.for("immer-state");function is(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var gi=Object,hd=gi.getPrototypeOf,wv="constructor",$y="prototype",Nj="configurable",Ev="enumerable",Vg="writable",kh="value",$a=t=>!!t&&!!t[Dr];function ps(t){return t?u3(t)||Hy(t)||!!t[aO]||!!t[wv]?.[aO]||Gy(t)||Ky(t):!1}var bee=gi[$y][wv].toString(),oO=new WeakMap;function u3(t){if(!t||!QE(t))return!1;const e=hd(t);if(e===null||e===gi[$y])return!0;const n=gi.hasOwnProperty.call(e,wv)&&e[wv];if(n===Object)return!0;if(!Fu(n))return!1;let r=oO.get(n);return r===void 0&&(r=Function.toString.call(n),oO.set(n,r)),r===bee}function Fy(t,e,n=!0){mm(t)===0?(n?Reflect.ownKeys(t):gi.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function mm(t){const e=t[Dr];return e?e.type_:Hy(t)?1:Gy(t)?2:Ky(t)?3:0}var lO=(t,e,n=mm(t))=>n===2?t.has(e):gi[$y].hasOwnProperty.call(t,e),Sj=(t,e,n=mm(t))=>n===2?t.get(e):t[e],Nv=(t,e,n,r=mm(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function xee(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Hy=Array.isArray,Gy=t=>t instanceof Map,Ky=t=>t instanceof Set,QE=t=>typeof t=="object",Fu=t=>typeof t=="function",Z_=t=>typeof t=="boolean";function _ee(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Aa=t=>t.copy_||t.base_,WE=t=>t.modified_?t.copy_:t.base_;function Aj(t,e){if(Gy(t))return new Map(t);if(Ky(t))return new Set(t);if(Hy(t))return Array[$y].slice.call(t);const n=u3(t);if(e===!0||e==="class_only"&&!n){const r=gi.getOwnPropertyDescriptors(t);delete r[Dr];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const c=i[a],u=r[c];u[Vg]===!1&&(u[Vg]=!0,u[Nj]=!0),(u.get||u.set)&&(r[c]={[Nj]:!0,[Vg]:!0,[Ev]:u[Ev],[kh]:t[c]})}return gi.create(hd(t),r)}else{const r=hd(t);if(r!==null&&n)return{...t};const i=gi.create(r);return gi.assign(i,t)}}function YE(t,e=!1){return Qy(t)||$a(t)||!ps(t)||(mm(t)>1&&gi.defineProperties(t,{set:hg,add:hg,clear:hg,delete:hg}),gi.freeze(t),e&&Fy(t,(n,r)=>{YE(r,!0)},!1)),t}function jee(){is(2)}var hg={[kh]:jee};function Qy(t){return t===null||!QE(t)?!0:gi.isFrozen(t)}var Sv="MapSet",Tj="Patches",cO="ArrayMethods",d3={};function Cc(t){const e=d3[t];return e||is(0,t),e}var uO=t=>!!d3[t],Dh,f3=()=>Dh,wee=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:uO(Sv)?Cc(Sv):void 0,arrayMethodsPlugin_:uO(cO)?Cc(cO):void 0});function dO(t,e){e&&(t.patchPlugin_=Cc(Tj),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Cj(t){Pj(t),t.drafts_.forEach(Eee),t.drafts_=null}function Pj(t){t===Dh&&(Dh=t.parent_)}var fO=t=>Dh=wee(Dh,t);function Eee(t){const e=t[Dr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hO(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Dr].modified_&&(Cj(e),is(4)),ps(t)&&(t=mO(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Dr].base_,t,e)}else t=mO(e,n);return Nee(e,t,!0),Cj(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==c3?t:void 0}function mO(t,e){if(Qy(e))return e;const n=e[Dr];if(!n)return Av(e,t.handledSet_,t);if(!Wy(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);p3(n,t)}return n.copy_}function Nee(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&YE(e,n)}function h3(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Wy=(t,e)=>t.scope_===e,See=[];function m3(t,e,n,r){const i=Aa(t),a=t.type_;if(r!==void 0&&Sj(i,r,a)===e){Nv(i,r,n,a);return}if(!t.draftLocations_){const u=t.draftLocations_=new Map;Fy(i,(f,h)=>{if($a(h)){const p=u.get(h)||[];p.push(f),u.set(h,p)}})}const c=t.draftLocations_.get(e)??See;for(const u of c)Nv(i,u,n,a)}function Aee(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!Wy(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const c=WE(a);m3(t,a.draft_??a,c,n),p3(a,i)})}function p3(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}h3(t)}}function Tee(t,e,n){const{scope_:r}=t;if($a(n)){const i=n[Dr];Wy(i,r)&&i.callbacks_.push(function(){Bg(t);const c=WE(i);m3(t,n,c,e)})}else ps(n)&&t.callbacks_.push(function(){const a=Aa(t);t.type_===3?a.has(n)&&Av(n,r.handledSet_,r):Sj(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Av(Sj(t.copy_,e,t.type_),r.handledSet_,r)})}function Av(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||$a(t)||e.has(t)||!ps(t)||Qy(t)||(e.add(t),Fy(t,(r,i)=>{if($a(i)){const a=i[Dr];if(Wy(a,n)){const c=WE(a);Nv(t,r,c,t.type_),h3(a)}}else ps(i)&&Av(i,e,n)})),t}function Cee(t,e){const n=Hy(t),r={type_:n?1:0,scope_:e?e.scope_:f3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Tv;n&&(i=[r],a=Mh);const{revoke:c,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=c,[u,r]}var Tv={get(t,e){if(e===Dr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Aa(t);if(!lO(i,e,t.type_))return Pee(t,i,e);const a=i[e];if(t.finalized_||!ps(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&_ee(e))return a;if(a===e1(t.base_,e)){Bg(t);const c=t.type_===1?+e:e,u=Oj(t.scope_,a,t,c);return t.copy_[c]=u}return a},has(t,e){return e in Aa(t)},ownKeys(t){return Reflect.ownKeys(Aa(t))},set(t,e,n){const r=g3(Aa(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=e1(Aa(t),e),a=i?.[Dr];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(xee(n,i)&&(n!==void 0||lO(t.base_,e,t.type_)))return!0;Bg(t),Ij(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Tee(t,e,n)),!0},deleteProperty(t,e){return Bg(t),e1(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Ij(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Aa(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Vg]:!0,[Nj]:t.type_!==1||e!=="length",[Ev]:r[Ev],[kh]:n[e]}},defineProperty(){is(11)},getPrototypeOf(t){return hd(t.base_)},setPrototypeOf(){is(12)}},Mh={};for(let t in Tv){let e=Tv[t];Mh[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Mh.deleteProperty=function(t,e){return Mh.set.call(this,t,e,void 0)};Mh.set=function(t,e,n){return Tv.set.call(this,t[0],e,n,t[0])};function e1(t,e){const n=t[Dr];return(n?Aa(n):t)[e]}function Pee(t,e,n){const r=g3(e,n);return r?kh in r?r[kh]:r.get?.call(t.draft_):void 0}function g3(t,e){if(!(e in t))return;let n=hd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=hd(n)}}function Ij(t){t.modified_||(t.modified_=!0,t.parent_&&Ij(t.parent_))}function Bg(t){t.copy_||(t.assigned_=new Map,t.copy_=Aj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Iee=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Fu(n)&&!Fu(r)){const c=r;r=n;const u=this;return function(h=c,...p){return u.produce(h,g=>r.call(this,g,...p))}}Fu(r)||is(6),i!==void 0&&!Fu(i)&&is(7);let a;if(ps(n)){const c=fO(this),u=Oj(c,n,void 0);let f=!0;try{a=r(u),f=!1}finally{f?Cj(c):Pj(c)}return dO(c,i),hO(a,c)}else if(!n||!QE(n)){if(a=r(n),a===void 0&&(a=n),a===c3&&(a=void 0),this.autoFreeze_&&YE(a,!0),i){const c=[],u=[];Cc(Tj).generateReplacementPatches_(n,a,{patches_:c,inversePatches_:u}),i(c,u)}return a}else is(1,n)},this.produceWithPatches=(n,r)=>{if(Fu(n))return(u,...f)=>this.produceWithPatches(u,h=>n(h,...f));let i,a;return[this.produce(n,r,(u,f)=>{i=u,a=f}),i,a]},Z_(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Z_(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Z_(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ps(e)||is(8),$a(e)&&(e=us(e));const n=fO(this),r=Oj(n,e,void 0);return r[Dr].isManual_=!0,Pj(n),r}finishDraft(e,n){const r=e&&e[Dr];(!r||!r.isManual_)&&is(9);const{scope_:i}=r;return dO(i,n),hO(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Cc(Tj).applyPatches_;return $a(e)?i(e,n):this.produce(e,a=>i(a,n))}};function Oj(t,e,n,r){const[i,a]=Gy(e)?Cc(Sv).proxyMap_(e,n):Ky(e)?Cc(Sv).proxySet_(e,n):Cee(e,n);return(n?.scope_??f3()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?Aee(n,a,r):a.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:h}=f;a.modified_&&h&&h.generatePatches_(a,[],f)}),i}function us(t){return $a(t)||is(10,t),v3(t)}function v3(t){if(!ps(t)||Qy(t))return t;const e=t[Dr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Aj(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Aj(t,!0);return Fy(n,(i,a)=>{Nv(n,i,v3(a))},r),e&&(e.finalized_=!1),n}var Oee=new Iee,y3=Oee.produce;function b3(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var Ree=b3(),kee=b3,Dee=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jv:jv.apply(null,arguments)};function Ui(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(vi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>l3(r)&&r.type===t,n}var x3=class oh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,oh.prototype)}static get[Symbol.species](){return oh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new oh(...e[0].concat(this)):new oh(...e.concat(this))}};function pO(t){return ps(t)?y3(t,()=>{}):t}function mg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Mee(t){return typeof t=="boolean"}var zee=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let c=new x3;return n&&(Mee(n)?c.push(Ree):c.push(kee(n.extraArgument))),c},_3="RTK_autoBatch",Zt=()=>t=>({payload:t,meta:{[_3]:!0}}),gO=t=>e=>{setTimeout(e,t)},j3=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,c=!1;const u=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gO(10):t.type==="callback"?t.queueNotification:gO(t.timeout),h=()=>{c=!1,a&&(a=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const g=()=>i&&p(),y=r.subscribe(g);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[_3],a=!i,a&&(c||(c=!0,f(h))),r.dispatch(p)}finally{i=!0}}})},Lee=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new x3(t);return r&&i.push(j3(typeof r=="object"?r:void 0)),i};function qee(t){const e=zee(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:c=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(KE(n))u=o3(n);else throw new Error(vi(1));let f;typeof r=="function"?f=r(e):f=e();let h=jv;i&&(h=Dee({trace:!1,...typeof i=="object"&&i}));const p=yee(...f),g=Lee(p);let y=typeof c=="function"?c(g):g();const x=h(...y);return a3(u,a,x)}function w3(t){const e={},n=[];let r;const i={addCase(a,c){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(vi(28));if(u in e)throw new Error(vi(29));return e[u]=c,i},addAsyncThunk(a,c){return c.pending&&(e[a.pending.type]=c.pending),c.rejected&&(e[a.rejected.type]=c.rejected),c.fulfilled&&(e[a.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:a.settled,reducer:c.settled}),i},addMatcher(a,c){return n.push({matcher:a,reducer:c}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function Uee(t){return typeof t=="function"}function Vee(t,e){let[n,r,i]=w3(e),a;if(Uee(t))a=()=>pO(t());else{const u=pO(t);a=()=>u}function c(u=a(),f){let h=[n[f.type],...r.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if($a(p)){const x=g(p,f);return x===void 0?p:x}else{if(ps(p))return y3(p,y=>g(y,f));{const y=g(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return c.getInitialState=a,c}var Bee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$ee=(t=21)=>{let e="",n=t;for(;n--;)e+=Bee[Math.random()*64|0];return e},Fee=Symbol.for("rtk-slice-createasyncthunk");function Hee(t,e){return`${t}/${e}`}function Gee({creators:t}={}){const e=t?.asyncThunk?.[Fee];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(vi(11));const c=(typeof r.reducers=="function"?r.reducers(Qee()):r.reducers)||{},u=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(C,P){const M=typeof C=="string"?C:C.type;if(!M)throw new Error(vi(12));if(M in f.sliceCaseReducersByType)throw new Error(vi(13));return f.sliceCaseReducersByType[M]=P,h},addMatcher(C,P){return f.sliceMatchers.push({matcher:C,reducer:P}),h},exposeAction(C,P){return f.actionCreators[C]=P,h},exposeCaseReducer(C,P){return f.sliceCaseReducersByName[C]=P,h}};u.forEach(C=>{const P=c[C],M={reducerName:C,type:Hee(i,C),createNotation:typeof r.reducers=="function"};Yee(P)?Jee(M,P,h,e):Wee(M,P,h)});function p(){const[C={},P=[],M=void 0]=typeof r.extraReducers=="function"?w3(r.extraReducers):[r.extraReducers],B={...C,...f.sliceCaseReducersByType};return Vee(r.initialState,D=>{for(let O in B)D.addCase(O,B[O]);for(let O of f.sliceMatchers)D.addMatcher(O.matcher,O.reducer);for(let O of P)D.addMatcher(O.matcher,O.reducer);M&&D.addDefaultCase(M)})}const g=C=>C,y=new Map,x=new WeakMap;let E;function j(C,P){return E||(E=p()),E(C,P)}function N(){return E||(E=p()),E.getInitialState()}function A(C,P=!1){function M(D){let O=D[C];return typeof O>"u"&&P&&(O=mg(x,M,N)),O}function B(D=g){const O=mg(y,P,()=>new WeakMap);return mg(O,D,()=>{const k={};for(const[U,L]of Object.entries(r.selectors??{}))k[U]=Kee(L,D,()=>mg(x,D,N),P);return k})}return{reducerPath:C,getSelectors:B,get selectors(){return B(M)},selectSlice:M}}const R={name:i,reducer:j,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:N,...A(a),injectInto(C,{reducerPath:P,...M}={}){const B=P??a;return C.inject({reducerPath:B,reducer:j},M),{...R,...A(B,!0)}}};return R}}function Kee(t,e,n,r){function i(a,...c){let u=e(a);return typeof u>"u"&&r&&(u=n()),t(u,...c)}return i.unwrapped=t,i}var ei=Gee();function Qee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Wee({type:t,reducerName:e,createNotation:n},r,i){let a,c;if("reducer"in r){if(n&&!Xee(r))throw new Error(vi(17));a=r.reducer,c=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,c?Ui(t,c):Ui(t))}function Yee(t){return t._reducerDefinitionType==="asyncThunk"}function Xee(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Jee({type:t,reducerName:e},n,r,i){if(!i)throw new Error(vi(18));const{payloadCreator:a,fulfilled:c,pending:u,rejected:f,settled:h,options:p}=n,g=i(t,a,p);r.exposeAction(e,g),c&&r.addCase(g.fulfilled,c),u&&r.addCase(g.pending,u),f&&r.addCase(g.rejected,f),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(e,{fulfilled:c||pg,pending:u||pg,rejected:f||pg,settled:h||pg})}function pg(){}var Zee="task",E3="listener",N3="completed",XE="cancelled",ete=`task-${XE}`,tte=`task-${N3}`,Rj=`${E3}-${XE}`,nte=`${E3}-${N3}`,Yy=class{constructor(t){this.code=t,this.message=`${Zee} ${XE} (reason: ${t})`}name="TaskAbortError";message},JE=(t,e)=>{if(typeof t!="function")throw new TypeError(vi(32))},Cv=()=>{},S3=(t,e=Cv)=>(t.catch(e),t),A3=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),gc=t=>{if(t.aborted)throw new Yy(t.reason)};function T3(t,e){let n=Cv;return new Promise((r,i)=>{const a=()=>i(new Yy(t.reason));if(t.aborted){a();return}n=A3(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Cv})}var rte=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Yy?"cancelled":"rejected",error:n}}finally{e?.()}},Pv=t=>e=>S3(T3(t,e).then(n=>(gc(t),n))),C3=t=>{const e=Pv(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:ed}=Object,vO={},Xy="listenerMiddleware",ite=(t,e)=>{const n=r=>A3(t,()=>r.abort(t.reason));return(r,i)=>{JE(r);const a=new AbortController;n(a);const c=rte(async()=>{gc(t),gc(a.signal);const u=await r({pause:Pv(a.signal),delay:C3(a.signal),signal:a.signal});return gc(a.signal),u},()=>a.abort(tte));return i?.autoJoin&&e.push(c.catch(Cv)),{result:Pv(t)(c),cancel(){a.abort(ete)}}}},ste=(t,e)=>{const n=async(r,i)=>{gc(e);let a=()=>{};const u=[new Promise((f,h)=>{let p=t({predicate:r,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});a=()=>{p(),h()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await T3(e,Promise.race(u));return gc(e),f}finally{a()}};return(r,i)=>S3(n(r,i))},P3=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Ui(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(vi(21));return JE(a),{predicate:i,type:e,effect:a}},I3=ed(t=>{const{type:e,predicate:n,effect:r}=P3(t);return{id:$ee(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(vi(22))}}},{withTypes:()=>I3}),yO=(t,e)=>{const{type:n,effect:r,predicate:i}=P3(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},kj=t=>{t.pending.forEach(e=>{e.abort(Rj)})},ate=(t,e)=>()=>{for(const n of e.keys())kj(n);t.clear()},bO=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},O3=ed(Ui(`${Xy}/add`),{withTypes:()=>O3}),ote=Ui(`${Xy}/removeAll`),R3=ed(Ui(`${Xy}/remove`),{withTypes:()=>R3}),lte=(...t)=>{console.error(`${Xy}/error`,...t)},pm=(t={})=>{const e=new Map,n=new Map,r=x=>{const E=n.get(x)??0;n.set(x,E+1)},i=x=>{const E=n.get(x)??1;E===1?n.delete(x):n.set(x,E-1)},{extra:a,onError:c=lte}=t;JE(c);const u=x=>(x.unsubscribe=()=>e.delete(x.id),e.set(x.id,x),E=>{x.unsubscribe(),E?.cancelActive&&kj(x)}),f=x=>{const E=yO(e,x)??I3(x);return u(E)};ed(f,{withTypes:()=>f});const h=x=>{const E=yO(e,x);return E&&(E.unsubscribe(),x.cancelActive&&kj(E)),!!E};ed(h,{withTypes:()=>h});const p=async(x,E,j,N)=>{const A=new AbortController,R=ste(f,A.signal),C=[];try{x.pending.add(A),r(x),await Promise.resolve(x.effect(E,ed({},j,{getOriginalState:N,condition:(P,M)=>R(P,M).then(Boolean),take:R,delay:C3(A.signal),pause:Pv(A.signal),extra:a,signal:A.signal,fork:ite(A.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{e.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((P,M,B)=>{P!==A&&(P.abort(Rj),B.delete(P))})},cancel:()=>{A.abort(Rj),x.pending.delete(A)},throwIfCancelled:()=>{gc(A.signal)}})))}catch(P){P instanceof Yy||bO(c,P,{raisedBy:"effect"})}finally{await Promise.all(C),A.abort(nte),i(x),x.pending.delete(A)}},g=ate(e,n);return{middleware:x=>E=>j=>{if(!l3(j))return E(j);if(O3.match(j))return f(j.payload);if(ote.match(j)){g();return}if(R3.match(j))return h(j.payload);let N=x.getState();const A=()=>{if(N===vO)throw new Error(vi(23));return N};let R;try{if(R=E(j),e.size>0){const C=x.getState(),P=Array.from(e.values());for(const M of P){let B=!1;try{B=M.predicate(j,C,N)}catch(D){B=!1,bO(c,D,{raisedBy:"predicate"})}B&&p(M,j,x,A)}}}finally{N=vO}return R},startListening:f,stopListening:h,clearListeners:g}};function vi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var cte={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},k3=ei({name:"chartLayout",initialState:cte,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:ute,setLayout:dte,setChartSize:fte,setScale:hte}=k3.actions,mte=k3.reducer;function D3(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function gt(t){return Number.isFinite(t)}function ta(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function xO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xO(Object(n),!0).forEach(function(r){pte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pte(t,e,n){return(e=gte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gte(t){var e=vte(t,"string");return typeof e=="symbol"?e:e+""}function vte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dn(t,e,n){return an(t)||an(e)?n:ea(e)?fd(t,e,n):typeof e=="function"?e(t):n}var yte=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:c,layout:u}=e;if((u==="vertical"||u==="horizontal"&&c==="middle")&&a!=="center"&&Re(t[a]))return Gu(Gu({},t),{},{[a]:t[a]+(r||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&c!=="middle"&&Re(t[c]))return Gu(Gu({},t),{},{[c]:t[c]+(i||0)})}return t},Za=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",M3=(t,e,n,r)=>{if(r)return t.map(u=>u.coordinate);var i,a,c=t.map(u=>(u.coordinate===e&&(i=!0),u.coordinate===n&&(a=!0),u.coordinate));return i||c.push(e),a||c.push(n),c},z3=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:c,realScaleType:u,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:y,axisType:x}=t;if(!c)return null;var E=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/E:0;if(j=x==="angleAxis"&&a&&a.length>=2?Xr(a[0]-a[1])*2*j:j,g||y){var N=(g||y||[]).map((A,R)=>{var C=r?r.indexOf(A):A,P=c.map(C);return gt(P)?{coordinate:P+j,value:A,offset:j,index:R}:null}).filter(Jr);return N}return f&&h?h.map((A,R)=>{var C=c.map(A);return gt(C)?{coordinate:C+j,value:A,index:R,offset:j}:null}).filter(Jr):c.ticks&&p!=null?c.ticks(p).map((A,R)=>{var C=c.map(A);return gt(C)?{coordinate:C+j,value:A,index:R,offset:j}:null}).filter(Jr):c.domain().map((A,R)=>{var C=c.map(A);return gt(C)?{coordinate:C+j,value:r?r[A]:A,index:R,offset:j}:null}).filter(Jr)},bte=(t,e)=>{if(!e||e.length!==2||!Re(e[0])||!Re(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Re(t[0])||t[0]<n)&&(i[0]=n),(!Re(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},xte=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,c=0,u=0;u<n;++u){var f=t[u],h=f?.[i];if(h!=null){var p=h[1],g=h[0],y=Zs(p)?g:p;y>=0?(h[0]=a,a+=y,h[1]=a):(h[0]=c,c+=y,h[1]=c)}}}},_te=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,c=0;c<n;++c){var u=t[c],f=u?.[i];if(f!=null){var h=Zs(f[1])?f[0]:f[1];h>=0?(f[0]=a,a+=h,f[1]=a):(f[0]=0,f[1]=0)}}}},jte={sign:xte,expand:YJ,none:Ac,silhouette:XJ,wiggle:JJ,positive:_te},wte=(t,e,n)=>{var r,i=(r=jte[n])!==null&&r!==void 0?r:Ac,a=WJ().keys(e).value((u,f)=>Number(Dn(u,f,0))).order(wj).offset(i),c=a(t);return c.forEach((u,f)=>{u.forEach((h,p)=>{var g=Dn(t[p],e[f],0);Array.isArray(g)&&g.length===2&&Re(g[0])&&Re(g[1])&&(h[0]=g[0],h[1]=g[1])})}),c};function Ete(t){return t==null?void 0:String(t)}function _O(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:c}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!an(i[e.dataKey])){var u=FL(n,"value",i[e.dataKey]);if(u)return u.coordinate+r/2}return n!=null&&n[a]?n[a].coordinate+r/2:null}var f=Dn(i,an(c)?e.dataKey:c),h=e.scale.map(f);return Re(h)?h:null}var jO=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:c}=t;if(e.type==="category")return n[c]?n[c].coordinate+r:null;var u=Dn(a,e.dataKey,e.scale.domain()[c]);if(an(u))return null;var f=e.scale.map(u);return Re(f)?f-i/2+r:null},Nte=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Ste=t=>{var e=t.flat(2).filter(Re);return[Math.min(...e),Math.max(...e)]},Ate=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Tte=(t,e,n)=>{if(t!=null)return Ate(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:c}=a,u=c.reduce((f,h)=>{var p=D3(h,e,n),g=Ste(p);return!gt(g[0])||!gt(g[1])?f:[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},wO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,md=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=By(e,p=>p.coordinate),a=1/0,c=1,u=i.length;c<u;c++){var f=i[c],h=i[c-1];a=Math.min((f?.coordinate||0)-(h?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function NO(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Gu(Gu({},e),{},{dataKey:n,payload:r,value:i,name:a})}function Jy(t,e){if(t)return String(t);if(typeof e=="string")return e}var Cte=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Pte=(t,e)=>e==="centric"?t.angle:t.radius,eo=t=>t.layout.width,to=t=>t.layout.height,Ite=t=>t.layout.scale,L3=t=>t.layout.margin,Zy=de(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),e0=de(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Ote="data-recharts-item-index",Rte="data-recharts-item-id",gm=60;function SO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SO(Object(n),!0).forEach(function(r){kte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kte(t,e,n){return(e=Dte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dte(t){var e=Mte(t,"string");return typeof e=="symbol"?e:e+""}function Mte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zte=t=>t.brush.height;function Lte(t){var e=e0(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:gm;return n+i}return n},0)}function qte(t){var e=e0(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:gm;return n+i}return n},0)}function Ute(t){var e=Zy(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Vte(t){var e=Zy(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var er=de([eo,to,L3,zte,Lte,qte,Ute,Vte,s3,fee],(t,e,n,r,i,a,c,u,f,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+a},g={top:(n.top||0)+c,bottom:(n.bottom||0)+u},y=gg(gg({},g),p),x=y.bottom;y.bottom+=r,y=yte(y,f,h);var E=t-y.left-y.right,j=e-y.top-y.bottom;return gg(gg({brushBottom:x},y),{},{width:Math.max(E,0),height:Math.max(j,0)})}),Bte=de(er,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),ZE=de(eo,to,(t,e)=>({x:0,y:0,width:t,height:e})),$te=_.createContext(null),Sr=()=>_.useContext($te)!=null,t0=t=>t.brush,n0=de([t0,er,L3],(t,e,n)=>({height:t.height,x:Re(t.x)?t.x:e.left,y:Re(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Re(t.width)?t.width:e.width})),t1={},n1={},r1={},AO;function Fte(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let c,u=null;const f=a!=null&&a.includes("leading"),h=a==null||a.includes("trailing"),p=()=>{u!==null&&(n.apply(c,u),c=void 0,u=null)},g=()=>{h&&p(),j()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},E=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{E(),c=void 0,u=null},N=()=>{p()},A=function(...R){if(i?.aborted)return;c=this,u=R;const C=y==null;x(),f&&C&&p()};return A.schedule=x,A.cancel=j,A.flush=N,i?.addEventListener("abort",j,{once:!0}),A}t.debounce=e})(r1)),r1}var TO;function Hte(){return TO||(TO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fte();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:c=!1,trailing:u=!0,maxWait:f}=a,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let p,g=null;const y=e.debounce(function(...j){p=r.apply(this,j),g=null},i,{edges:h}),x=function(...j){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=r.apply(this,j),g=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,j),p)},E=()=>(y.flush(),p);return x.cancel=y.cancel,x.flush=E,x}t.debounce=n})(n1)),n1}var CO;function Gte(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hte();function n(r,i=0,a={}){const{leading:c=!0,trailing:u=!0}=a;return e.debounce(r,i,{leading:c,maxWait:i,trailing:u})}t.throttle=n})(t1)),t1}var i1,PO;function Kte(){return PO||(PO=1,i1=Gte().throttle),i1}var Qte=Kte();const Wte=ra(Qte);var Iv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(n.replace(/%s/g,()=>i[c++]))}},Vs={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},q3=(t,e,n)=>{var{width:r=Vs.width,height:i=Vs.height,aspect:a,maxHeight:c}=n,u=Tc(r)?t:Number(r),f=Tc(i)?e:Number(i);return a&&a>0&&(u?f=u/a:f&&(u=f*a),c&&f!=null&&f>c&&(f=c)),{calculatedWidth:u,calculatedHeight:f}},Yte={width:0,height:0,overflow:"visible"},Xte={width:0,overflowX:"visible"},Jte={height:0,overflowY:"visible"},Zte={},ene=t=>{var{width:e,height:n}=t,r=Tc(e),i=Tc(n);return r&&i?Yte:r?Xte:i?Jte:Zte};function tne(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=Vs.width,a=Vs.height):i===void 0?i=r&&r>0?void 0:Vs.width:a===void 0&&(a=r&&r>0?void 0:Vs.height),{width:i,height:a}}function Dj(){return Dj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dj.apply(null,arguments)}function IO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IO(Object(n),!0).forEach(function(r){nne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nne(t,e,n){return(e=rne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rne(t){var e=ine(t,"string");return typeof e=="symbol"?e:e+""}function ine(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U3=_.createContext(Vs.initialDimension);function sne(t){return ta(t.width)&&ta(t.height)}function V3(t){var{children:e,width:n,height:r}=t,i=_.useMemo(()=>({width:n,height:r}),[n,r]);return sne(i)?_.createElement(U3.Provider,{value:i},e):null}var eN=()=>_.useContext(U3),ane=_.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=Vs.initialDimension,width:i,height:a,minWidth:c=Vs.minWidth,minHeight:u,maxHeight:f,children:h,debounce:p=Vs.debounce,id:g,className:y,onResize:x,style:E={}}=t,j=_.useRef(null),N=_.useRef();N.current=x,_.useImperativeHandle(e,()=>j.current);var[A,R]=_.useState({containerWidth:r.width,containerHeight:r.height}),C=_.useCallback((O,k)=>{R(U=>{var L=Math.round(O),z=Math.round(k);return U.containerWidth===L&&U.containerHeight===z?U:{containerWidth:L,containerHeight:z}})},[]);_.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Uc;var O=z=>{var V,ge=z[0];if(ge!=null){var{width:Z,height:H}=ge.contentRect;C(Z,H),(V=N.current)===null||V===void 0||V.call(N,Z,H)}};p>0&&(O=Wte(O,p,{trailing:!0,leading:!1}));var k=new ResizeObserver(O),{width:U,height:L}=j.current.getBoundingClientRect();return C(U,L),k.observe(j.current),()=>{k.disconnect()}},[C,p]);var{containerWidth:P,containerHeight:M}=A;Iv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:B,calculatedHeight:D}=q3(P,M,{width:i,height:a,aspect:n,maxHeight:f});return Iv(B!=null&&B>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,D,i,a,c,u,n),_.createElement("div",{id:g?"".concat(g):void 0,className:Ut("recharts-responsive-container",y),style:OO(OO({},E),{},{width:i,height:a,minWidth:c,minHeight:u,maxHeight:f}),ref:j},_.createElement("div",{style:ene({width:i,height:a})},_.createElement(V3,{width:B,height:D},h)))}),RO=_.forwardRef((t,e)=>{var n=eN();if(ta(n.width)&&ta(n.height))return t.children;var{width:r,height:i}=tne({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:c}=q3(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Re(a)&&Re(c)?_.createElement(V3,{width:a,height:c},t.children):_.createElement(ane,Dj({},t,{width:r,height:i,ref:e}))});function tN(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var r0=()=>{var t,e=Sr(),n=Le(Bte),r=Le(n0),i=(t=Le(t0))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},one={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},B3=()=>{var t;return(t=Le(er))!==null&&t!==void 0?t:one},$3=()=>Le(eo),F3=()=>Le(to),Ot=t=>t.layout.layoutType,Vc=()=>Le(Ot),H3=()=>{var t=Vc();if(t==="horizontal"||t==="vertical")return t},G3=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},lne=()=>{var t=Vc();return t!==void 0},vm=t=>{var e=wn(),n=Sr(),{width:r,height:i}=t,a=eN(),c=r,u=i;return a&&(c=a.width>0?a.width:r,u=a.height>0?a.height:i),_.useEffect(()=>{!n&&ta(c)&&ta(u)&&e(fte({width:c,height:u}))},[e,n,c,u]),null},K3=Symbol.for("immer-nothing"),kO=Symbol.for("immer-draftable"),yi=Symbol.for("immer-state");function ss(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var zh=Object.getPrototypeOf;function pd(t){return!!t&&!!t[yi]}function Pc(t){return t?Q3(t)||Array.isArray(t)||!!t[kO]||!!t.constructor?.[kO]||ym(t)||s0(t):!1}var cne=Object.prototype.constructor.toString(),DO=new WeakMap;function Q3(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=DO.get(n);return r===void 0&&(r=Function.toString.call(n),DO.set(n,r)),r===cne}function Ov(t,e,n=!0){i0(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function i0(t){const e=t[yi];return e?e.type_:Array.isArray(t)?1:ym(t)?2:s0(t)?3:0}function Mj(t,e){return i0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function W3(t,e,n){const r=i0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function une(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ym(t){return t instanceof Map}function s0(t){return t instanceof Set}function ic(t){return t.copy_||t.base_}function zj(t,e){if(ym(t))return new Map(t);if(s0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Q3(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[yi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const c=i[a],u=r[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(zh(t),r)}else{const r=zh(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function nN(t,e=!1){return a0(t)||pd(t)||!Pc(t)||(i0(t)>1&&Object.defineProperties(t,{set:vg,add:vg,clear:vg,delete:vg}),Object.freeze(t),e&&Object.values(t).forEach(n=>nN(n,!0))),t}function dne(){ss(2)}var vg={value:dne};function a0(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var fne={};function Ic(t){const e=fne[t];return e||ss(0,t),e}var Lh;function Y3(){return Lh}function hne(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MO(t,e){e&&(Ic("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Lj(t){qj(t),t.drafts_.forEach(mne),t.drafts_=null}function qj(t){t===Lh&&(Lh=t.parent_)}function zO(t){return Lh=hne(Lh,t)}function mne(t){const e=t[yi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function LO(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[yi].modified_&&(Lj(e),ss(4)),Pc(t)&&(t=Rv(e,t),e.parent_||kv(e,t)),e.patches_&&Ic("Patches").generateReplacementPatches_(n[yi].base_,t,e.patches_,e.inversePatches_)):t=Rv(e,n,[]),Lj(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==K3?t:void 0}function Rv(t,e,n){if(a0(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[yi];if(!i)return Ov(e,(a,c)=>qO(t,i,e,a,c,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return kv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let c=a,u=!1;i.type_===3&&(c=new Set(a),a.clear(),u=!0),Ov(c,(f,h)=>qO(t,i,a,f,h,n,u),r),kv(t,a,!1),n&&t.patches_&&Ic("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function qO(t,e,n,r,i,a,c){if(i==null||typeof i!="object"&&!c)return;const u=a0(i);if(!(u&&!c)){if(pd(i)){const f=a&&e&&e.type_!==3&&!Mj(e.assigned_,r)?a.concat(r):void 0,h=Rv(t,i,f);if(W3(n,r,h),pd(h))t.canAutoFreeze_=!1;else return}else c&&n.add(i);if(Pc(i)&&!u){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&u)return;Rv(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ym(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&kv(t,i)}}}function kv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&nN(e,n)}function pne(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Y3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=rN;n&&(i=[r],a=qh);const{revoke:c,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=c,u}var rN={get(t,e){if(e===yi)return t;const n=ic(t);if(!Mj(n,e))return gne(t,n,e);const r=n[e];return t.finalized_||!Pc(r)?r:r===s1(t.base_,e)?(a1(t),t.copy_[e]=Vj(r,t)):r},has(t,e){return e in ic(t)},ownKeys(t){return Reflect.ownKeys(ic(t))},set(t,e,n){const r=X3(ic(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=s1(ic(t),e),a=i?.[yi];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(une(n,i)&&(n!==void 0||Mj(t.base_,e)))return!0;a1(t),Uj(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return s1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,a1(t),Uj(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ic(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ss(11)},getPrototypeOf(t){return zh(t.base_)},setPrototypeOf(){ss(12)}},qh={};Ov(rN,(t,e)=>{qh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});qh.deleteProperty=function(t,e){return qh.set.call(this,t,e,void 0)};qh.set=function(t,e,n){return rN.set.call(this,t[0],e,n,t[0])};function s1(t,e){const n=t[yi];return(n?ic(n):t)[e]}function gne(t,e,n){const r=X3(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function X3(t,e){if(!(e in t))return;let n=zh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=zh(n)}}function Uj(t){t.modified_||(t.modified_=!0,t.parent_&&Uj(t.parent_))}function a1(t){t.copy_||(t.copy_=zj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var vne=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const c=this;return function(f=a,...h){return c.produce(f,p=>n.call(this,p,...h))}}typeof n!="function"&&ss(6),r!==void 0&&typeof r!="function"&&ss(7);let i;if(Pc(e)){const a=zO(this),c=Vj(e,void 0);let u=!0;try{i=n(c),u=!1}finally{u?Lj(a):qj(a)}return MO(a,r),LO(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===K3&&(i=void 0),this.autoFreeze_&&nN(i,!0),r){const a=[],c=[];Ic("Patches").generateReplacementPatches_(e,i,a,c),r(a,c)}return i}else ss(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...u)=>this.produceWithPatches(c,f=>e(f,...u));let r,i;return[this.produce(e,n,(c,u)=>{r=c,i=u}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Pc(t)||ss(8),pd(t)&&(t=yne(t));const e=zO(this),n=Vj(t,void 0);return n[yi].isManual_=!0,qj(e),n}finishDraft(t,e){const n=t&&t[yi];(!n||!n.isManual_)&&ss(9);const{scope_:r}=n;return MO(r,e),LO(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Ic("Patches").applyPatches_;return pd(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Vj(t,e){const n=ym(t)?Ic("MapSet").proxyMap_(t,e):s0(t)?Ic("MapSet").proxySet_(t,e):pne(t,e);return(e?e.scope_:Y3()).drafts_.push(n),n}function yne(t){return pd(t)||ss(10,t),J3(t)}function J3(t){if(!Pc(t)||a0(t))return t;const e=t[yi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=zj(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=zj(t,!0);return Ov(n,(i,a)=>{W3(n,i,J3(a))},r),e&&(e.finalized_=!1),n}var bne=new vne;bne.produce;var xne={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Z3=ei({name:"legend",initialState:xne,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Zt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=us(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Zt()},removeLegendPayload:{reducer(t,e){var n=us(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Zt()}}}),{setLegendSize:zve,setLegendSettings:Lve,addLegendPayload:_ne,replaceLegendPayload:jne,removeLegendPayload:wne}=Z3.actions,Ene=Z3.reducer;function Bj(){return Bj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bj.apply(null,arguments)}function UO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(n),!0).forEach(function(r){Nne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nne(t,e,n){return(e=Sne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sne(t){var e=Ane(t,"string");return typeof e=="symbol"?e:e+""}function Ane(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tne(t){return Array.isArray(t)&&ea(t[0])&&ea(t[1])?t.join(" ~ "):t}var Du={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Cne=t=>{var{separator:e=Du.separator,contentStyle:n,itemStyle:r,labelStyle:i=Du.labelStyle,payload:a,formatter:c,itemSorter:u,wrapperClassName:f,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:y=Du.accessibilityLayer}=t,x=()=>{if(a&&a.length){var M={padding:0,margin:0},B=(u?By(a,u):a).map((D,O)=>{if(D.type==="none")return null;var k=D.formatter||c||Tne,{value:U,name:L}=D,z=U,V=L;if(k){var ge=k(U,L,D,O,a);if(Array.isArray(ge))[z,V]=ge;else if(ge!=null)z=ge;else return null}var Z=$f($f({},Du.itemStyle),{},{color:D.color||Du.itemStyle.color},r);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:Z},ea(V)?_.createElement("span",{className:"recharts-tooltip-item-name"},V):null,ea(V)?_.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,_.createElement("span",{className:"recharts-tooltip-item-value"},z),_.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:M},B)}return null},E=$f($f({},Du.contentStyle),n),j=$f({margin:0},i),N=!an(p),A=N?p:"",R=Ut("recharts-default-tooltip",f),C=Ut("recharts-tooltip-label",h);N&&g&&a!==void 0&&a!==null&&(A=g(p,a));var P=y?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",Bj({className:R,style:E},P),_.createElement("p",{className:C,style:j},_.isValidElement(A)?A:"".concat(A)),x())},Ff="recharts-tooltip-wrapper",Pne={visibility:"hidden"};function Ine(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ut(Ff,{["".concat(Ff,"-right")]:Re(n)&&e&&Re(e.x)&&n>=e.x,["".concat(Ff,"-left")]:Re(n)&&e&&Re(e.x)&&n<e.x,["".concat(Ff,"-bottom")]:Re(r)&&e&&Re(e.y)&&r>=e.y,["".concat(Ff,"-top")]:Re(r)&&e&&Re(e.y)&&r<e.y})}function VO(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:c,tooltipDimension:u,viewBox:f,viewBoxDimension:h}=t;if(a&&Re(a[r]))return a[r];var p=n[r]-u-(i>0?i:0),g=n[r]+i;if(e[r])return c[r]?p:g;var y=f[r];if(y==null)return 0;if(c[r]){var x=p,E=y;return x<E?Math.max(g,y):Math.max(p,y)}if(h==null)return 0;var j=g+u,N=y+h;return j>N?Math.max(p,y):Math.max(g,y)}function One(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Rne(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:c,tooltipBox:u,useTranslate3d:f,viewBox:h}=t,p,g,y;return u.height>0&&u.width>0&&n?(g=VO({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:c,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),y=VO({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:c,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),p=One({translateX:g,translateY:y,useTranslate3d:f})):p=Pne,{cssProperties:p,cssClasses:Ine({translateX:g,translateY:y,coordinate:n})}}function BO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BO(Object(n),!0).forEach(function(r){$j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $j(t,e,n){return(e=kne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kne(t){var e=Dne(t,"string");return typeof e=="symbol"?e:e+""}function Dne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Mne extends _.PureComponent{constructor(){super(...arguments),$j(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$j(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:c,hasPayload:u,isAnimationActive:f,offset:h,position:p,reverseDirection:g,useTranslate3d:y,viewBox:x,wrapperStyle:E,lastBoundingBox:j,innerRef:N,hasPortalFromProps:A}=this.props,R=typeof h=="number"?h:h.x,C=typeof h=="number"?h:h.y,{cssClasses:P,cssProperties:M}=Rne({allowEscapeViewBox:n,coordinate:c,offsetLeft:R,offsetTop:C,position:p,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:x}),B=A?{}:yg(yg({transition:f&&e?"transform ".concat(r,"ms ").concat(i):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=yg(yg({},B),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},E);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:P,style:D,ref:N},a)}}var e6=()=>{var t;return(t=Le(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Fj(){return Fj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fj.apply(null,arguments)}function $O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(n),!0).forEach(function(r){zne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zne(t,e,n){return(e=Lne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lne(t){var e=qne(t,"string");return typeof e=="symbol"?e:e+""}function qne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HO={curveBasisClosed:LJ,curveBasisOpen:qJ,curveBasis:zJ,curveBumpX:wJ,curveBumpY:EJ,curveLinearClosed:UJ,curveLinear:Uy,curveMonotoneX:VJ,curveMonotoneY:BJ,curveNatural:$J,curveStep:FJ,curveStepAfter:GJ,curveStepBefore:HJ},Dv=t=>gt(t.x)&&gt(t.y),GO=t=>t.base!=null&&Dv(t.base)&&Dv(t),Hf=t=>t.x,Gf=t=>t.y,Une=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(hm(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=HO["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return HO[n]||Uy},KO={connectNulls:!1,type:"linear"},Vne=t=>{var{type:e=KO.type,points:n=[],baseLine:r,layout:i,connectNulls:a=KO.connectNulls}=t,c=Une(e,i),u=a?n.filter(Dv):n;if(Array.isArray(r)){var f,h=n.map((E,j)=>FO(FO({},E),{},{base:r[j]}));i==="vertical"?f=ug().y(Gf).x1(Hf).x0(E=>E.base.x):f=ug().x(Hf).y1(Gf).y0(E=>E.base.y);var p=f.defined(GO).curve(c),g=a?h.filter(GO):h;return p(g)}var y;i==="vertical"&&Re(r)?y=ug().y(Gf).x1(Hf).x0(r):Re(r)?y=ug().x(Hf).y1(Gf).y0(r):y=IL().x(Hf).y(Gf);var x=y.defined(Dv).curve(c);return x(u)},t6=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=Vc();if((!n||!n.length)&&!r)return null;var c={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},u=n&&n.length?Vne(c):r;return _.createElement("path",Fj({},hs(t),BE(t),{className:Ut("recharts-curve",e),d:u===null?void 0:u,ref:i}))},Bne=["x","y","top","left","width","height","className"];function Hj(){return Hj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hj.apply(null,arguments)}function QO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QO(Object(n),!0).forEach(function(r){Fne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fne(t,e,n){return(e=Hne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hne(t){var e=Gne(t,"string");return typeof e=="symbol"?e:e+""}function Gne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kne(t,e){if(t==null)return{};var n,r,i=Qne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wne=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),Yne=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:c=0,className:u}=t,f=Kne(t,Bne),h=$ne({x:e,y:n,top:r,left:i,width:a,height:c},f);return!Re(e)||!Re(n)||!Re(a)||!Re(c)||!Re(r)||!Re(i)?null:_.createElement("path",Hj({},kr(h),{className:Ut("recharts-cross",u),d:Wne(e,n,a,c,r,i)}))};function Xne(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function WO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(n),!0).forEach(function(r){Jne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jne(t,e,n){return(e=Zne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zne(t){var e=ere(t,"string");return typeof e=="symbol"?e:e+""}function ere(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tre=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),n6=(t,e,n)=>t.map(r=>"".concat(tre(r)," ").concat(e,"ms ").concat(n)).join(","),nre=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Uh=(t,e)=>Object.keys(e).reduce((n,r)=>YO(YO({},n),{},{[r]:t(r,e[r])}),{});function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(r){rre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rre(t,e,n){return(e=ire(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ire(t){var e=sre(t,"string");return typeof e=="symbol"?e:e+""}function sre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mv=(t,e,n)=>t+(e-t)*n,Gj=t=>{var{from:e,to:n}=t;return e!==n},r6=(t,e,n)=>{var r=Uh((i,a)=>{if(Gj(a)){var[c,u]=t(a.from,a.to,a.velocity);return qn(qn({},a),{},{from:c,velocity:u})}return a},e);return n<1?Uh((i,a)=>Gj(a)&&r[i]!=null?qn(qn({},a),{},{velocity:Mv(a.velocity,r[i].velocity,n),from:Mv(a.from,r[i].from,n)}):a,e):r6(t,r,n-1)};function are(t,e,n,r,i,a){var c,u=r.reduce((y,x)=>qn(qn({},y),{},{[x]:{from:t[x],velocity:0,to:e[x]}}),{}),f=()=>Uh((y,x)=>x.from,u),h=()=>!Object.values(u).filter(Gj).length,p=null,g=y=>{c||(c=y);var x=y-c,E=x/n.dt;u=r6(n,u,E),i(qn(qn(qn({},t),e),f())),c=y,h()||(p=a.setTimeout(g))};return()=>(p=a.setTimeout(g),()=>{var y;(y=p)===null||y===void 0||y()})}function ore(t,e,n,r,i,a,c){var u=null,f=i.reduce((g,y)=>{var x=t[y],E=e[y];return x==null||E==null?g:qn(qn({},g),{},{[y]:[x,E]})},{}),h,p=g=>{h||(h=g);var y=(g-h)/r,x=Uh((j,N)=>Mv(...N,n(y)),f);if(a(qn(qn(qn({},t),e),x)),y<1)u=c.setTimeout(p);else{var E=Uh((j,N)=>Mv(...N,n(1)),f);a(qn(qn(qn({},t),e),E))}};return()=>(u=c.setTimeout(p),()=>{var g;(g=u)===null||g===void 0||g()})}const lre=(t,e,n,r,i,a)=>{var c=nre(t,e);return n==null?()=>(i(qn(qn({},t),e)),()=>{}):n.isStepper===!0?are(t,e,n,c,i,a):ore(t,e,n,r,c,i,a)};var zv=1e-4,i6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],s6=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),JO=(t,e)=>n=>{var r=i6(t,e);return s6(r,n)},cre=(t,e)=>n=>{var r=i6(t,e),i=[...r.map((a,c)=>a*c).slice(1),0];return s6(i,n)},ure=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},dre=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=ure(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},fre=(t,e,n,r)=>{var i=JO(t,n),a=JO(e,r),c=cre(t,n),u=h=>h>1?1:h<0?0:h,f=h=>{for(var p=h>1?1:h,g=p,y=0;y<8;++y){var x=i(g)-p,E=c(g);if(Math.abs(x-p)<zv||E<zv)return a(g);g=u(g-x/E)}return a(g)};return f.isStepper=!1,f},ZO=function(){return fre(...dre(...arguments))},hre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(c,u,f)=>{var h=-(c-u)*n,p=f*r,g=f+(h-p)*i/1e3,y=f*i/1e3+c;return Math.abs(y-u)<zv&&Math.abs(g)<zv?[u,0]:[y,g]};return a.isStepper=!0,a.dt=i,a},mre=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZO(t);case"spring":return hre();default:if(t.split("(")[0]==="cubic-bezier")return ZO(t)}return typeof t=="function"?t:null};function pre(t){var e,n=()=>null,r=!1,i=null,a=c=>{if(!r){if(Array.isArray(c)){if(!c.length)return;var u=c,[f,...h]=u;if(typeof f=="number"){i=t.setTimeout(a.bind(null,h),f);return}a(f),i=t.setTimeout(a.bind(null,h));return}typeof c=="string"&&(e=c,n(e)),typeof c=="object"&&(e=c,n(e)),typeof c=="function"&&c()}};return{stop:()=>{r=!0},start:c=>{r=!1,i&&(i(),i=null),a(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>t}}class gre{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=c=>{c-r>=n?e(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function vre(){return pre(new gre)}var yre=_.createContext(vre);function bre(t,e){var n=_.useContext(yre);return _.useMemo(()=>e??n(t),[t,e,n])}var xre=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),o0={isSsr:xre()},_re={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eR={t:0},o1={t:1};function l0(t){var e=Mr(t,_re),{isActive:n,canBegin:r,duration:i,easing:a,begin:c,onAnimationEnd:u,onAnimationStart:f,children:h}=e,p=n==="auto"?!o0.isSsr:n,g=bre(e.animationId,e.animationManager),[y,x]=_.useState(p?eR:o1),E=_.useRef(null);return _.useEffect(()=>{p||x(o1)},[p]),_.useEffect(()=>{if(!p||!r)return Uc;var j=lre(eR,o1,mre(a),i,x,g.getTimeoutController()),N=()=>{E.current=j()};return g.start([f,c,N,i,u]),()=>{g.stop(),E.current&&E.current(),u()}},[p,r,i,a,c,f,u,g]),h(y.t)}function c0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=_.useRef(Rh(e)),r=_.useRef(t);return r.current!==t&&(n.current=Rh(e),r.current=t),n.current}var jre=["radius"],wre=["radius"],tR,nR,rR,iR,sR,aR,oR,lR,cR,uR;function dR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dR(Object(n),!0).forEach(function(r){Ere(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ere(t,e,n){return(e=Nre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nre(t){var e=Sre(t,"string");return typeof e=="symbol"?e:e+""}function Sre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lv.apply(null,arguments)}function hR(t,e){if(t==null)return{};var n,r,i=Are(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Are(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ds(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var mR=(t,e,n,r,i)=>{var a=el(n),c=el(r),u=Math.min(Math.abs(a)/2,Math.abs(c)/2),f=c>=0?1:-1,h=a>=0?1:-1,p=c>=0&&a>=0||c<0&&a<0?1:0,g;if(u>0&&Array.isArray(i)){for(var y=[0,0,0,0],x=0,E=4;x<E;x++){var j,N=(j=i[x])!==null&&j!==void 0?j:0;y[x]=N>u?u:N}g=hn(tR||(tR=Ds(["M",",",""])),t,e+f*y[0]),y[0]>0&&(g+=hn(nR||(nR=Ds(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,t+h*y[0],e)),g+=hn(rR||(rR=Ds(["L ",",",""])),t+n-h*y[1],e),y[1]>0&&(g+=hn(iR||(iR=Ds(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,t+n,e+f*y[1])),g+=hn(sR||(sR=Ds(["L ",",",""])),t+n,e+r-f*y[2]),y[2]>0&&(g+=hn(aR||(aR=Ds(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,t+n-h*y[2],e+r)),g+=hn(oR||(oR=Ds(["L ",",",""])),t+h*y[3],e+r),y[3]>0&&(g+=hn(lR||(lR=Ds(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,t,e+r-f*y[3])),g+="Z"}else if(u>0&&i===+i&&i>0){var A=Math.min(u,i);g=hn(cR||(cR=Ds(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+f*A,A,A,p,t+h*A,e,t+n-h*A,e,A,A,p,t+n,e+f*A,t+n,e+r-f*A,A,A,p,t+n-h*A,e+r,t+h*A,e+r,A,A,p,t,e+r-f*A)}else g=hn(uR||(uR=Ds(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return g},pR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},a6=t=>{var e=Mr(t,pR),n=_.useRef(null),[r,i]=_.useState(-1);_.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ae=n.current.getTotalLength();ae&&i(ae)}catch{}},[]);var{x:a,y:c,width:u,height:f,radius:h,className:p}=e,{animationEasing:g,animationDuration:y,animationBegin:x,isAnimationActive:E,isUpdateAnimationActive:j}=e,N=_.useRef(u),A=_.useRef(f),R=_.useRef(a),C=_.useRef(c),P=_.useMemo(()=>({x:a,y:c,width:u,height:f,radius:h}),[a,c,u,f,h]),M=c0(P,"rectangle-");if(a!==+a||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var B=Ut("recharts-rectangle",p);if(!j){var D=kr(e),{radius:O}=D,k=hR(D,jre);return _.createElement("path",Lv({},k,{x:el(a),y:el(c),width:el(u),height:el(f),radius:typeof h=="number"?h:void 0,className:B,d:mR(a,c,u,f,h)}))}var U=N.current,L=A.current,z=R.current,V=C.current,ge="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),H=n6(["strokeDasharray"],y,typeof g=="string"?g:pR.animationEasing);return _.createElement(l0,{animationId:M,key:M,canBegin:r>0,duration:y,easing:g,isActive:j,begin:x},ae=>{var X=mn(U,u,ae),we=mn(L,f,ae),W=mn(z,a,ae),F=mn(V,c,ae);n.current&&(N.current=X,A.current=we,R.current=W,C.current=F);var ne;E?ae>0?ne={transition:H,strokeDasharray:Z}:ne={strokeDasharray:ge}:ne={strokeDasharray:Z};var ue=kr(e),{radius:ve}=ue,fe=hR(ue,wre);return _.createElement("path",Lv({},fe,{radius:typeof h=="number"?h:void 0,className:B,d:mR(W,F,X,we,h),ref:n,style:fR(fR({},ne),e.style)}))})};function gR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(n),!0).forEach(function(r){Tre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tre(t,e,n){return(e=Cre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cre(t){var e=Pre(t,"string");return typeof e=="symbol"?e:e+""}function Pre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qv=Math.PI/180,Ire=t=>t*180/Math.PI,hr=(t,e,n,r)=>({x:t+Math.cos(-qv*r)*n,y:e+Math.sin(-qv*r)*n}),Ore=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Rre=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},kre=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,c=Rre({x:n,y:r},{x:i,y:a});if(c<=0)return{radius:c,angle:0};var u=(n-i)/c,f=Math.acos(u);return r>a&&(f=2*Math.PI-f),{radius:c,angle:Ire(f),angleInRadian:f}},Dre=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},Mre=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),c=Math.min(i,a);return t+c*360},zre=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=kre({x:n,y:r},e),{innerRadius:c,outerRadius:u}=e;if(i<c||i>u||i===0)return null;var{startAngle:f,endAngle:h}=Dre(e),p=a,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?vR(vR({},e),{},{radius:i,angle:Mre(p,e)}):null};function o6(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,c=hr(e,n,r,i),u=hr(e,n,r,a);return{points:[c,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var yR,bR,xR,_R,jR,wR,ER;function Kj(){return Kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kj.apply(null,arguments)}function oc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Lre=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},bg=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:c,cornerRadius:u,cornerIsExternal:f}=t,h=u*(c?1:-1)+r,p=Math.asin(u/h)/qv,g=f?i:i+a*p,y=hr(e,n,h,g),x=hr(e,n,r,g),E=f?i-a*p:i,j=hr(e,n,h*Math.cos(p*qv),E);return{center:y,circleTangency:x,lineTangency:j,theta:p}},l6=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:c}=t,u=Lre(a,c),f=a+u,h=hr(e,n,i,a),p=hr(e,n,i,f),g=hn(yR||(yR=oc(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(a>f),p.x,p.y);if(r>0){var y=hr(e,n,r,a),x=hr(e,n,r,f);g+=hn(bR||(bR=oc(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,r,r,+(Math.abs(u)>180),+(a<=f),y.x,y.y)}else g+=hn(xR||(xR=oc(["L ",","," Z"])),e,n);return g},qre=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:h}=t,p=Xr(h-f),{circleTangency:g,lineTangency:y,theta:x}=bg({cx:e,cy:n,radius:i,angle:f,sign:p,cornerRadius:a,cornerIsExternal:u}),{circleTangency:E,lineTangency:j,theta:N}=bg({cx:e,cy:n,radius:i,angle:h,sign:-p,cornerRadius:a,cornerIsExternal:u}),A=u?Math.abs(f-h):Math.abs(f-h)-x-N;if(A<0)return c?hn(_R||(_R=oc(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,a,a,a*2,a,a,-a*2):l6({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:h});var R=hn(jR||(jR=oc(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,a,a,+(p<0),g.x,g.y,i,i,+(A>180),+(p<0),E.x,E.y,a,a,+(p<0),j.x,j.y);if(r>0){var{circleTangency:C,lineTangency:P,theta:M}=bg({cx:e,cy:n,radius:r,angle:f,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:B,lineTangency:D,theta:O}=bg({cx:e,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),k=u?Math.abs(f-h):Math.abs(f-h)-M-O;if(k<0&&a===0)return"".concat(R,"L").concat(e,",").concat(n,"Z");R+=hn(wR||(wR=oc(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,a,a,+(p<0),B.x,B.y,r,r,+(k>180),+(p>0),C.x,C.y,a,a,+(p<0),P.x,P.y)}else R+=hn(ER||(ER=oc(["L",",","Z"])),e,n);return R},Ure={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},c6=t=>{var e=Mr(t,Ure),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p,className:g}=e;if(a<i||h===p)return null;var y=Ut("recharts-sector",g),x=a-i,E=ms(c,x,0,!0),j;return E>0&&Math.abs(h-p)<360?j=qre({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(E,x/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p}):j=l6({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:h,endAngle:p}),_.createElement("path",Kj({},kr(e),{className:y,d:j}))};function Vre(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(KL(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:c,angle:u}=e,f=hr(r,i,a,u),h=hr(r,i,c,u);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return o6(e)}}var l1={},c1={},u1={},NR;function Bre(){return NR||(NR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r3();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(u1)),u1}var SR;function $re(){return SR||(SR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Bre();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(c1)),c1}var AR;function Fre(){return AR||(AR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i3(),n=$re();function r(i,a,c){c&&typeof c!="number"&&e.isIterateeCall(i,a,c)&&(a=c=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),c=c===void 0?i<a?1:-1:n.toFinite(c);const u=Math.max(Math.ceil((a-i)/(c||1)),0),f=new Array(u);for(let h=0;h<u;h++)f[h]=i,i+=c;return f}t.range=r})(l1)),l1}var d1,TR;function Hre(){return TR||(TR=1,d1=Fre().range),d1}var Gre=Hre();const u6=ra(Gre);function al(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kre(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iN(t){let e,n,r;t.length!==2?(e=al,n=(u,f)=>al(t(u),f),r=(u,f)=>t(u)-f):(e=t===al||t===Kre?t:Qre,n=t,r=t);function i(u,f,h=0,p=u.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(u[g],f)<0?h=g+1:p=g}while(h<p)}return h}function a(u,f,h=0,p=u.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(u[g],f)<=0?h=g+1:p=g}while(h<p)}return h}function c(u,f,h=0,p=u.length){const g=i(u,f,h,p-1);return g>h&&r(u[g-1],f)>-r(u[g],f)?g-1:g}return{left:i,center:c,right:a}}function Qre(){return 0}function d6(t){return t===null?NaN:+t}function*Wre(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Yre=iN(al),bm=Yre.right;iN(d6).center;class CR extends Map{constructor(e,n=Zre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(PR(this,e))}has(e){return super.has(PR(this,e))}set(e,n){return super.set(Xre(this,e),n)}delete(e){return super.delete(Jre(this,e))}}function PR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xre({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Jre({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Zre(t){return t!==null&&typeof t=="object"?t.valueOf():t}function eie(t=al){if(t===al)return f6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function f6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const tie=Math.sqrt(50),nie=Math.sqrt(10),rie=Math.sqrt(2);function Uv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),c=a>=tie?10:a>=nie?5:a>=rie?2:1;let u,f,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(t*h),f=Math.round(e*h),u/h<t&&++u,f/h>e&&--f,h=-h):(h=Math.pow(10,i)*c,u=Math.round(t/h),f=Math.round(e/h),u*h<t&&++u,f*h>e&&--f),f<u&&.5<=n&&n<2?Uv(t,e,n*2):[u,f,h]}function Qj(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,c]=r?Uv(e,t,n):Uv(t,e,n);if(!(a>=i))return[];const u=a-i+1,f=new Array(u);if(r)if(c<0)for(let h=0;h<u;++h)f[h]=(a-h)/-c;else for(let h=0;h<u;++h)f[h]=(a-h)*c;else if(c<0)for(let h=0;h<u;++h)f[h]=(i+h)/-c;else for(let h=0;h<u;++h)f[h]=(i+h)*c;return f}function Wj(t,e,n){return e=+e,t=+t,n=+n,Uv(t,e,n)[2]}function Yj(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Wj(e,t,n):Wj(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function IR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function OR(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function h6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?f6:eie(i);r>n;){if(r-n>600){const f=r-n+1,h=e-n+1,p=Math.log(f),g=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*g*(f-g)/f)*(h-f/2<0?-1:1),x=Math.max(n,Math.floor(e-h*g/f+y)),E=Math.min(r,Math.floor(e+(f-h)*g/f+y));h6(t,e,x,E,i)}const a=t[e];let c=n,u=r;for(Kf(t,n,e),i(t[r],a)>0&&Kf(t,n,r);c<u;){for(Kf(t,c,u),++c,--u;i(t[c],a)<0;)++c;for(;i(t[u],a)>0;)--u}i(t[n],a)===0?Kf(t,n,u):(++u,Kf(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function Kf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function iie(t,e,n){if(t=Float64Array.from(Wre(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return OR(t);if(e>=1)return IR(t);var r,i=(r-1)*e,a=Math.floor(i),c=IR(h6(t,a).subarray(0,a+1)),u=OR(t.subarray(a+1));return c+(u-c)*(i-a)}}function sie(t,e,n=d6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),c=+n(t[a],a,t),u=+n(t[a+1],a+1,t);return c+(u-c)*(i-a)}}function aie(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function $i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function no(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Xj=Symbol("implicit");function sN(){var t=new CR,e=[],n=[],r=Xj;function i(a){let c=t.get(a);if(c===void 0){if(r!==Xj)return r;t.set(a,c=e.push(a)-1)}return n[c%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new CR;for(const c of a)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return sN(e,n).unknown(r)},$i.apply(i,arguments),i}function aN(){var t=sN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,c,u=!1,f=0,h=0,p=.5;delete t.unknown;function g(){var y=e().length,x=i<r,E=x?i:r,j=x?r:i;a=(j-E)/Math.max(1,y-f+h*2),u&&(a=Math.floor(a)),E+=(j-E-a*(y-f))*p,c=a*(1-f),u&&(E=Math.round(E),c=Math.round(c));var N=aie(y).map(function(A){return E+a*A});return n(x?N.reverse():N)}return t.domain=function(y){return arguments.length?(e(y),g()):e()},t.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},t.bandwidth=function(){return c},t.step=function(){return a},t.round=function(y){return arguments.length?(u=!!y,g()):u},t.padding=function(y){return arguments.length?(f=Math.min(1,h=+y),g()):f},t.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},t.paddingOuter=function(y){return arguments.length?(h=+y,g()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},t.copy=function(){return aN(e(),[r,i]).round(u).paddingInner(f).paddingOuter(h).align(p)},$i.apply(g(),arguments)}function m6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return m6(e())},t}function oie(){return m6(aN.apply(null,arguments).paddingInner(1))}function oN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function p6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xm(){}var Vh=.7,Vv=1/Vh,td="\\s*([+-]?\\d+)\\s*",Bh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lie=/^#([0-9a-f]{3,8})$/,cie=new RegExp(`^rgb\\(${td},${td},${td}\\)$`),uie=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),die=new RegExp(`^rgba\\(${td},${td},${td},${Bh}\\)$`),fie=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${Bh}\\)$`),hie=new RegExp(`^hsl\\(${Bh},${Ws},${Ws}\\)$`),mie=new RegExp(`^hsla\\(${Bh},${Ws},${Ws},${Bh}\\)$`),RR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oN(xm,$h,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kR,formatHex:kR,formatHex8:pie,formatHsl:gie,formatRgb:DR,toString:DR});function kR(){return this.rgb().formatHex()}function pie(){return this.rgb().formatHex8()}function gie(){return g6(this).formatHsl()}function DR(){return this.rgb().formatRgb()}function $h(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?MR(e):n===3?new Zr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cie.exec(t))?new Zr(e[1],e[2],e[3],1):(e=uie.exec(t))?new Zr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=die.exec(t))?xg(e[1],e[2],e[3],e[4]):(e=fie.exec(t))?xg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hie.exec(t))?qR(e[1],e[2]/100,e[3]/100,1):(e=mie.exec(t))?qR(e[1],e[2]/100,e[3]/100,e[4]):RR.hasOwnProperty(t)?MR(RR[t]):t==="transparent"?new Zr(NaN,NaN,NaN,0):null}function MR(t){return new Zr(t>>16&255,t>>8&255,t&255,1)}function xg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zr(t,e,n,r)}function vie(t){return t instanceof xm||(t=$h(t)),t?(t=t.rgb(),new Zr(t.r,t.g,t.b,t.opacity)):new Zr}function Jj(t,e,n,r){return arguments.length===1?vie(t):new Zr(t,e,n,r??1)}function Zr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}oN(Zr,Jj,p6(xm,{brighter(t){return t=t==null?Vv:Math.pow(Vv,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vh:Math.pow(Vh,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zr(vc(this.r),vc(this.g),vc(this.b),Bv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zR,formatHex:zR,formatHex8:yie,formatRgb:LR,toString:LR}));function zR(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}`}function yie(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}${lc((isNaN(this.opacity)?1:this.opacity)*255)}`}function LR(){const t=Bv(this.opacity);return`${t===1?"rgb(":"rgba("}${vc(this.r)}, ${vc(this.g)}, ${vc(this.b)}${t===1?")":`, ${t})`}`}function Bv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lc(t){return t=vc(t),(t<16?"0":"")+t.toString(16)}function qR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new as(t,e,n,r)}function g6(t){if(t instanceof as)return new as(t.h,t.s,t.l,t.opacity);if(t instanceof xm||(t=$h(t)),!t)return new as;if(t instanceof as)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),c=NaN,u=a-i,f=(a+i)/2;return u?(e===a?c=(n-r)/u+(n<r)*6:n===a?c=(r-e)/u+2:c=(e-n)/u+4,u/=f<.5?a+i:2-a-i,c*=60):u=f>0&&f<1?0:c,new as(c,u,f,t.opacity)}function bie(t,e,n,r){return arguments.length===1?g6(t):new as(t,e,n,r??1)}function as(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}oN(as,bie,p6(xm,{brighter(t){return t=t==null?Vv:Math.pow(Vv,t),new as(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vh:Math.pow(Vh,t),new as(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zr(f1(t>=240?t-240:t+120,i,r),f1(t,i,r),f1(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new as(UR(this.h),_g(this.s),_g(this.l),Bv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Bv(this.opacity);return`${t===1?"hsl(":"hsla("}${UR(this.h)}, ${_g(this.s)*100}%, ${_g(this.l)*100}%${t===1?")":`, ${t})`}`}}));function UR(t){return t=(t||0)%360,t<0?t+360:t}function _g(t){return Math.max(0,Math.min(1,t||0))}function f1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const lN=t=>()=>t;function xie(t,e){return function(n){return t+n*e}}function _ie(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function jie(t){return(t=+t)==1?v6:function(e,n){return n-e?_ie(e,n,t):lN(isNaN(e)?n:e)}}function v6(t,e){var n=e-t;return n?xie(t,n):lN(isNaN(t)?e:t)}const VR=(function t(e){var n=jie(e);function r(i,a){var c=n((i=Jj(i)).r,(a=Jj(a)).r),u=n(i.g,a.g),f=n(i.b,a.b),h=v6(i.opacity,a.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=f(p),i.opacity=h(p),i+""}}return r.gamma=t,r})(1);function wie(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Eie(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Nie(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),c;for(c=0;c<r;++c)i[c]=Cd(t[c],e[c]);for(;c<n;++c)a[c]=e[c];return function(u){for(c=0;c<r;++c)a[c]=i[c](u);return a}}function Sie(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function $v(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Aie(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Cd(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Zj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,h1=new RegExp(Zj.source,"g");function Tie(t){return function(){return t}}function Cie(t){return function(e){return t(e)+""}}function Pie(t,e){var n=Zj.lastIndex=h1.lastIndex=0,r,i,a,c=-1,u=[],f=[];for(t=t+"",e=e+"";(r=Zj.exec(t))&&(i=h1.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),u[c]?u[c]+=a:u[++c]=a),(r=r[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,f.push({i:c,x:$v(r,i)})),n=h1.lastIndex;return n<e.length&&(a=e.slice(n),u[c]?u[c]+=a:u[++c]=a),u.length<2?f[0]?Cie(f[0].x):Tie(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)u[(g=f[p]).i]=g.x(h);return u.join("")})}function Cd(t,e){var n=typeof e,r;return e==null||n==="boolean"?lN(e):(n==="number"?$v:n==="string"?(r=$h(e))?(e=r,VR):Pie:e instanceof $h?VR:e instanceof Date?Sie:Eie(e)?wie:Array.isArray(e)?Nie:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Aie:$v)(t,e)}function cN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Iie(t,e){e===void 0&&(e=t,t=Cd);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(c){var u=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return a[u](c-u)}}function Oie(t){return function(){return t}}function Fv(t){return+t}var BR=[0,1];function Ir(t){return t}function ew(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Oie(isNaN(e)?NaN:.5)}function Rie(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function kie(t,e,n){var r=t[0],i=t[1],a=e[0],c=e[1];return i<r?(r=ew(i,r),a=n(c,a)):(r=ew(r,i),a=n(a,c)),function(u){return a(r(u))}}function Die(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=ew(t[c],t[c+1]),a[c]=n(e[c],e[c+1]);return function(u){var f=bm(t,u,1,r)-1;return a[f](i[f](u))}}function _m(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function u0(){var t=BR,e=BR,n=Cd,r,i,a,c=Ir,u,f,h;function p(){var y=Math.min(t.length,e.length);return c!==Ir&&(c=Rie(t[0],t[y-1])),u=y>2?Die:kie,f=h=null,g}function g(y){return y==null||isNaN(y=+y)?a:(f||(f=u(t.map(r),e,n)))(r(c(y)))}return g.invert=function(y){return c(i((h||(h=u(e,t.map(r),$v)))(y)))},g.domain=function(y){return arguments.length?(t=Array.from(y,Fv),p()):t.slice()},g.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},g.rangeRound=function(y){return e=Array.from(y),n=cN,p()},g.clamp=function(y){return arguments.length?(c=y?!0:Ir,p()):c!==Ir},g.interpolate=function(y){return arguments.length?(n=y,p()):n},g.unknown=function(y){return arguments.length?(a=y,g):a},function(y,x){return r=y,i=x,p()}}function uN(){return u0()(Ir,Ir)}function Mie(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Hv(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function gd(t){return t=Hv(Math.abs(t)),t?t[1]:NaN}function zie(t,e){return function(n,r){for(var i=n.length,a=[],c=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),a.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[c=(c+1)%t.length];return a.reverse().join(e)}}function Lie(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var qie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fh(t){if(!(e=qie.exec(t)))throw new Error("invalid format: "+t);var e;return new dN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fh.prototype=dN.prototype;function dN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}dN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uie(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Gv;function Vie(t,e){var n=Hv(t,e);if(!n)return Gv=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(Gv=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return a===c?r:a>c?r+new Array(a-c+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Hv(t,Math.max(0,e+a-1))[0]}function $R(t,e){var n=Hv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const FR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Mie,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$R(t*100,e),r:$R,s:Vie,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function HR(t){return t}var GR=Array.prototype.map,KR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Bie(t){var e=t.grouping===void 0||t.thousands===void 0?HR:zie(GR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?HR:Lie(GR.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function h(g,y){g=Fh(g);var x=g.fill,E=g.align,j=g.sign,N=g.symbol,A=g.zero,R=g.width,C=g.comma,P=g.precision,M=g.trim,B=g.type;B==="n"?(C=!0,B="g"):FR[B]||(P===void 0&&(P=12),M=!0,B="g"),(A||x==="0"&&E==="=")&&(A=!0,x="0",E="=");var D=(y&&y.prefix!==void 0?y.prefix:"")+(N==="$"?n:N==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():""),O=(N==="$"?r:/[%p]/.test(B)?c:"")+(y&&y.suffix!==void 0?y.suffix:""),k=FR[B],U=/[defgprs%]/.test(B);P=P===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function L(z){var V=D,ge=O,Z,H,ae;if(B==="c")ge=k(z)+ge,z="";else{z=+z;var X=z<0||1/z<0;if(z=isNaN(z)?f:k(Math.abs(z),P),M&&(z=Uie(z)),X&&+z==0&&j!=="+"&&(X=!1),V=(X?j==="("?j:u:j==="-"||j==="("?"":j)+V,ge=(B==="s"&&!isNaN(z)&&Gv!==void 0?KR[8+Gv/3]:"")+ge+(X&&j==="("?")":""),U){for(Z=-1,H=z.length;++Z<H;)if(ae=z.charCodeAt(Z),48>ae||ae>57){ge=(ae===46?i+z.slice(Z+1):z.slice(Z))+ge,z=z.slice(0,Z);break}}}C&&!A&&(z=e(z,1/0));var we=V.length+z.length+ge.length,W=we<R?new Array(R-we+1).join(x):"";switch(C&&A&&(z=e(W+z,W.length?R-ge.length:1/0),W=""),E){case"<":z=V+z+ge+W;break;case"=":z=V+W+z+ge;break;case"^":z=W.slice(0,we=W.length>>1)+V+z+ge+W.slice(we);break;default:z=W+V+z+ge;break}return a(z)}return L.toString=function(){return g+""},L}function p(g,y){var x=Math.max(-8,Math.min(8,Math.floor(gd(y)/3)))*3,E=Math.pow(10,-x),j=h((g=Fh(g),g.type="f",g),{suffix:KR[8+x/3]});return function(N){return j(E*N)}}return{format:h,formatPrefix:p}}var jg,fN,y6;$ie({thousands:",",grouping:[3],currency:["$",""]});function $ie(t){return jg=Bie(t),fN=jg.format,y6=jg.formatPrefix,jg}function Fie(t){return Math.max(0,-gd(Math.abs(t)))}function Hie(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gd(e)/3)))*3-gd(Math.abs(t)))}function Gie(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,gd(e)-gd(t))+1}function b6(t,e,n,r){var i=Yj(t,e,n),a;switch(r=Fh(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Hie(i,c))&&(r.precision=a),y6(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Gie(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Fie(i))&&(r.precision=a-(r.type==="%")*2);break}}return fN(r)}function El(t){var e=t.domain;return t.ticks=function(n){var r=e();return Qj(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return b6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,c=r[i],u=r[a],f,h,p=10;for(u<c&&(h=c,c=u,u=h,h=i,i=a,a=h);p-- >0;){if(h=Wj(c,u,n),h===f)return r[i]=c,r[a]=u,e(r);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;f=h}return t},t}function x6(){var t=uN();return t.copy=function(){return _m(t,x6())},$i.apply(t,arguments),El(t)}function _6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Fv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return _6(t).unknown(e)},t=arguments.length?Array.from(t,Fv):[0,1],El(n)}function j6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],c;return a<i&&(c=n,n=r,r=c,c=i,i=a,a=c),t[n]=e.floor(i),t[r]=e.ceil(a),t}function QR(t){return Math.log(t)}function WR(t){return Math.exp(t)}function Kie(t){return-Math.log(-t)}function Qie(t){return-Math.exp(-t)}function Wie(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Yie(t){return t===10?Wie:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Xie(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function YR(t){return(e,n)=>-t(-e,n)}function hN(t){const e=t(QR,WR),n=e.domain;let r=10,i,a;function c(){return i=Xie(r),a=Yie(r),n()[0]<0?(i=YR(i),a=YR(a),t(Kie,Qie)):t(QR,WR),e}return e.base=function(u){return arguments.length?(r=+u,c()):r},e.domain=function(u){return arguments.length?(n(u),c()):n()},e.ticks=u=>{const f=n();let h=f[0],p=f[f.length-1];const g=p<h;g&&([h,p]=[p,h]);let y=i(h),x=i(p),E,j;const N=u==null?10:+u;let A=[];if(!(r%1)&&x-y<N){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(E=1;E<r;++E)if(j=y<0?E/a(-y):E*a(y),!(j<h)){if(j>p)break;A.push(j)}}else for(;y<=x;++y)for(E=r-1;E>=1;--E)if(j=y>0?E/a(-y):E*a(y),!(j<h)){if(j>p)break;A.push(j)}A.length*2<N&&(A=Qj(h,p,N))}else A=Qj(y,x,Math.min(x-y,N)).map(a);return g?A.reverse():A},e.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Fh(f)).precision==null&&(f.trim=!0),f=fN(f)),u===1/0)return f;const h=Math.max(1,r*u/e.ticks().length);return p=>{let g=p/a(Math.round(i(p)));return g*r<r-.5&&(g*=r),g<=h?f(p):""}},e.nice=()=>n(j6(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),e}function w6(){const t=hN(u0()).domain([1,10]);return t.copy=()=>_m(t,w6()).base(t.base()),$i.apply(t,arguments),t}function XR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function JR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function mN(t){var e=1,n=t(XR(e),JR(e));return n.constant=function(r){return arguments.length?t(XR(e=+r),JR(e)):e},El(n)}function E6(){var t=mN(u0());return t.copy=function(){return _m(t,E6()).constant(t.constant())},$i.apply(t,arguments)}function ZR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Jie(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Zie(t){return t<0?-t*t:t*t}function pN(t){var e=t(Ir,Ir),n=1;function r(){return n===1?t(Ir,Ir):n===.5?t(Jie,Zie):t(ZR(n),ZR(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},El(e)}function gN(){var t=pN(u0());return t.copy=function(){return _m(t,gN()).exponent(t.exponent())},$i.apply(t,arguments),t}function ese(){return gN.apply(null,arguments).exponent(.5)}function ek(t){return Math.sign(t)*t*t}function tse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function N6(){var t=uN(),e=[0,1],n=!1,r;function i(a){var c=tse(t(a));return isNaN(c)?r:n?Math.round(c):c}return i.invert=function(a){return t.invert(ek(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Fv)).map(ek)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return N6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$i.apply(i,arguments),El(i)}function S6(){var t=[],e=[],n=[],r;function i(){var c=0,u=Math.max(1,e.length);for(n=new Array(u-1);++c<u;)n[c-1]=sie(t,c/u);return a}function a(c){return c==null||isNaN(c=+c)?r:e[bm(n,c)]}return a.invertExtent=function(c){var u=e.indexOf(c);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},a.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let u of c)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(al),i()},a.range=function(c){return arguments.length?(e=Array.from(c),i()):e.slice()},a.unknown=function(c){return arguments.length?(r=c,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return S6().domain(t).range(e).unknown(r)},$i.apply(a,arguments)}function A6(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function c(f){return f!=null&&f<=f?i[bm(r,f,0,n)]:a}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return c}return c.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,u()):[t,e]},c.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},c.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},c.unknown=function(f){return arguments.length&&(a=f),c},c.thresholds=function(){return r.slice()},c.copy=function(){return A6().domain([t,e]).range(i).unknown(a)},$i.apply(El(c),arguments)}function T6(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[bm(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var c=e.indexOf(a);return[t[c-1],t[c]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return T6().domain(t).range(e).unknown(n)},$i.apply(i,arguments)}const m1=new Date,p1=new Date;function $n(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const c=i(a),u=i.ceil(a);return a-c<u-a?c:u},i.offset=(a,c)=>(e(a=new Date(+a),c==null?1:Math.floor(c)),a),i.range=(a,c,u)=>{const f=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<c)||!(u>0))return f;let h;do f.push(h=new Date(+a)),e(a,u),t(a);while(h<a&&a<c);return f},i.filter=a=>$n(c=>{if(c>=c)for(;t(c),!a(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;e(c,-1),!a(c););else for(;--u>=0;)for(;e(c,1),!a(c););}),n&&(i.count=(a,c)=>(m1.setTime(+a),p1.setTime(+c),t(m1),t(p1),Math.floor(n(m1,p1))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?c=>r(c)%a===0:c=>i.count(0,c)%a===0):i)),i}const Kv=$n(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Kv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?$n(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Kv);Kv.range;const Ia=1e3,Li=Ia*60,Oa=Li*60,Fa=Oa*24,vN=Fa*7,tk=Fa*30,g1=Fa*365,cc=$n(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ia)},(t,e)=>(e-t)/Ia,t=>t.getUTCSeconds());cc.range;const yN=$n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ia)},(t,e)=>{t.setTime(+t+e*Li)},(t,e)=>(e-t)/Li,t=>t.getMinutes());yN.range;const bN=$n(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Li)},(t,e)=>(e-t)/Li,t=>t.getUTCMinutes());bN.range;const xN=$n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ia-t.getMinutes()*Li)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getHours());xN.range;const _N=$n(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getUTCHours());_N.range;const jm=$n(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Li)/Fa,t=>t.getDate()-1);jm.range;const d0=$n(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>t.getUTCDate()-1);d0.range;const C6=$n(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>Math.floor(t/Fa));C6.range;function Bc(t){return $n(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Li)/vN)}const f0=Bc(0),Qv=Bc(1),nse=Bc(2),rse=Bc(3),vd=Bc(4),ise=Bc(5),sse=Bc(6);f0.range;Qv.range;nse.range;rse.range;vd.range;ise.range;sse.range;function $c(t){return $n(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/vN)}const h0=$c(0),Wv=$c(1),ase=$c(2),ose=$c(3),yd=$c(4),lse=$c(5),cse=$c(6);h0.range;Wv.range;ase.range;ose.range;yd.range;lse.range;cse.range;const jN=$n(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());jN.range;const wN=$n(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());wN.range;const Ha=$n(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ha.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$n(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ha.range;const Ga=$n(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ga.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$n(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ga.range;function P6(t,e,n,r,i,a){const c=[[cc,1,Ia],[cc,5,5*Ia],[cc,15,15*Ia],[cc,30,30*Ia],[a,1,Li],[a,5,5*Li],[a,15,15*Li],[a,30,30*Li],[i,1,Oa],[i,3,3*Oa],[i,6,6*Oa],[i,12,12*Oa],[r,1,Fa],[r,2,2*Fa],[n,1,vN],[e,1,tk],[e,3,3*tk],[t,1,g1]];function u(h,p,g){const y=p<h;y&&([h,p]=[p,h]);const x=g&&typeof g.range=="function"?g:f(h,p,g),E=x?x.range(h,+p+1):[];return y?E.reverse():E}function f(h,p,g){const y=Math.abs(p-h)/g,x=iN(([,,N])=>N).right(c,y);if(x===c.length)return t.every(Yj(h/g1,p/g1,g));if(x===0)return Kv.every(Math.max(Yj(h,p,g),1));const[E,j]=c[y/c[x-1][2]<c[x][2]/y?x-1:x];return E.every(j)}return[u,f]}const[use,dse]=P6(Ga,wN,h0,C6,_N,bN),[fse,hse]=P6(Ha,jN,f0,jm,xN,yN);function v1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function y1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function mse(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,c=t.shortDays,u=t.months,f=t.shortMonths,h=Wf(i),p=Yf(i),g=Wf(a),y=Yf(a),x=Wf(c),E=Yf(c),j=Wf(u),N=Yf(u),A=Wf(f),R=Yf(f),C={a:ae,A:X,b:we,B:W,c:null,d:ok,e:ok,f:zse,g:Kse,G:Wse,H:kse,I:Dse,j:Mse,L:I6,m:Lse,M:qse,p:F,q:ne,Q:uk,s:dk,S:Use,u:Vse,U:Bse,V:$se,w:Fse,W:Hse,x:null,X:null,y:Gse,Y:Qse,Z:Yse,"%":ck},P={a:ue,A:ve,b:fe,B:G,c:null,d:lk,e:lk,f:eae,g:uae,G:fae,H:Xse,I:Jse,j:Zse,L:R6,m:tae,M:nae,p:ce,q:Ce,Q:uk,s:dk,S:rae,u:iae,U:sae,V:aae,w:oae,W:lae,x:null,X:null,y:cae,Y:dae,Z:hae,"%":ck},M={a:U,A:L,b:z,B:V,c:ge,d:sk,e:sk,f:Pse,g:ik,G:rk,H:ak,I:ak,j:Sse,L:Cse,m:Nse,M:Ase,p:k,q:Ese,Q:Ose,s:Rse,S:Tse,u:bse,U:xse,V:_se,w:yse,W:jse,x:Z,X:H,y:ik,Y:rk,Z:wse,"%":Ise};C.x=B(n,C),C.X=B(r,C),C.c=B(e,C),P.x=B(n,P),P.X=B(r,P),P.c=B(e,P);function B(ie,J){return function(Q){var me=[],Te=-1,ze=0,ot=ie.length,mt,vt,pr;for(Q instanceof Date||(Q=new Date(+Q));++Te<ot;)ie.charCodeAt(Te)===37&&(me.push(ie.slice(ze,Te)),(vt=nk[mt=ie.charAt(++Te)])!=null?mt=ie.charAt(++Te):vt=mt==="e"?" ":"0",(pr=J[mt])&&(mt=pr(Q,vt)),me.push(mt),ze=Te+1);return me.push(ie.slice(ze,Te)),me.join("")}}function D(ie,J){return function(Q){var me=Qf(1900,void 0,1),Te=O(me,ie,Q+="",0),ze,ot;if(Te!=Q.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(J&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(ze=y1(Qf(me.y,0,1)),ot=ze.getUTCDay(),ze=ot>4||ot===0?Wv.ceil(ze):Wv(ze),ze=d0.offset(ze,(me.V-1)*7),me.y=ze.getUTCFullYear(),me.m=ze.getUTCMonth(),me.d=ze.getUTCDate()+(me.w+6)%7):(ze=v1(Qf(me.y,0,1)),ot=ze.getDay(),ze=ot>4||ot===0?Qv.ceil(ze):Qv(ze),ze=jm.offset(ze,(me.V-1)*7),me.y=ze.getFullYear(),me.m=ze.getMonth(),me.d=ze.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),ot="Z"in me?y1(Qf(me.y,0,1)).getUTCDay():v1(Qf(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(ot+5)%7:me.w+me.U*7-(ot+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,y1(me)):v1(me)}}function O(ie,J,Q,me){for(var Te=0,ze=J.length,ot=Q.length,mt,vt;Te<ze;){if(me>=ot)return-1;if(mt=J.charCodeAt(Te++),mt===37){if(mt=J.charAt(Te++),vt=M[mt in nk?J.charAt(Te++):mt],!vt||(me=vt(ie,Q,me))<0)return-1}else if(mt!=Q.charCodeAt(me++))return-1}return me}function k(ie,J,Q){var me=h.exec(J.slice(Q));return me?(ie.p=p.get(me[0].toLowerCase()),Q+me[0].length):-1}function U(ie,J,Q){var me=x.exec(J.slice(Q));return me?(ie.w=E.get(me[0].toLowerCase()),Q+me[0].length):-1}function L(ie,J,Q){var me=g.exec(J.slice(Q));return me?(ie.w=y.get(me[0].toLowerCase()),Q+me[0].length):-1}function z(ie,J,Q){var me=A.exec(J.slice(Q));return me?(ie.m=R.get(me[0].toLowerCase()),Q+me[0].length):-1}function V(ie,J,Q){var me=j.exec(J.slice(Q));return me?(ie.m=N.get(me[0].toLowerCase()),Q+me[0].length):-1}function ge(ie,J,Q){return O(ie,e,J,Q)}function Z(ie,J,Q){return O(ie,n,J,Q)}function H(ie,J,Q){return O(ie,r,J,Q)}function ae(ie){return c[ie.getDay()]}function X(ie){return a[ie.getDay()]}function we(ie){return f[ie.getMonth()]}function W(ie){return u[ie.getMonth()]}function F(ie){return i[+(ie.getHours()>=12)]}function ne(ie){return 1+~~(ie.getMonth()/3)}function ue(ie){return c[ie.getUTCDay()]}function ve(ie){return a[ie.getUTCDay()]}function fe(ie){return f[ie.getUTCMonth()]}function G(ie){return u[ie.getUTCMonth()]}function ce(ie){return i[+(ie.getUTCHours()>=12)]}function Ce(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var J=B(ie+="",C);return J.toString=function(){return ie},J},parse:function(ie){var J=D(ie+="",!1);return J.toString=function(){return ie},J},utcFormat:function(ie){var J=B(ie+="",P);return J.toString=function(){return ie},J},utcParse:function(ie){var J=D(ie+="",!0);return J.toString=function(){return ie},J}}}var nk={"-":"",_:" ",0:"0"},tr=/^\s*\d+/,pse=/^%/,gse=/[\\^$*+?|[\]().{}]/g;function wt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function vse(t){return t.replace(gse,"\\$&")}function Wf(t){return new RegExp("^(?:"+t.map(vse).join("|")+")","i")}function Yf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function yse(t,e,n){var r=tr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function bse(t,e,n){var r=tr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xse(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function _se(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function jse(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function rk(t,e,n){var r=tr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ik(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ese(t,e,n){var r=tr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Nse(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function sk(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Sse(t,e,n){var r=tr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ak(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ase(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Tse(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Cse(t,e,n){var r=tr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Pse(t,e,n){var r=tr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ise(t,e,n){var r=pse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ose(t,e,n){var r=tr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Rse(t,e,n){var r=tr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ok(t,e){return wt(t.getDate(),e,2)}function kse(t,e){return wt(t.getHours(),e,2)}function Dse(t,e){return wt(t.getHours()%12||12,e,2)}function Mse(t,e){return wt(1+jm.count(Ha(t),t),e,3)}function I6(t,e){return wt(t.getMilliseconds(),e,3)}function zse(t,e){return I6(t,e)+"000"}function Lse(t,e){return wt(t.getMonth()+1,e,2)}function qse(t,e){return wt(t.getMinutes(),e,2)}function Use(t,e){return wt(t.getSeconds(),e,2)}function Vse(t){var e=t.getDay();return e===0?7:e}function Bse(t,e){return wt(f0.count(Ha(t)-1,t),e,2)}function O6(t){var e=t.getDay();return e>=4||e===0?vd(t):vd.ceil(t)}function $se(t,e){return t=O6(t),wt(vd.count(Ha(t),t)+(Ha(t).getDay()===4),e,2)}function Fse(t){return t.getDay()}function Hse(t,e){return wt(Qv.count(Ha(t)-1,t),e,2)}function Gse(t,e){return wt(t.getFullYear()%100,e,2)}function Kse(t,e){return t=O6(t),wt(t.getFullYear()%100,e,2)}function Qse(t,e){return wt(t.getFullYear()%1e4,e,4)}function Wse(t,e){var n=t.getDay();return t=n>=4||n===0?vd(t):vd.ceil(t),wt(t.getFullYear()%1e4,e,4)}function Yse(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wt(e/60|0,"0",2)+wt(e%60,"0",2)}function lk(t,e){return wt(t.getUTCDate(),e,2)}function Xse(t,e){return wt(t.getUTCHours(),e,2)}function Jse(t,e){return wt(t.getUTCHours()%12||12,e,2)}function Zse(t,e){return wt(1+d0.count(Ga(t),t),e,3)}function R6(t,e){return wt(t.getUTCMilliseconds(),e,3)}function eae(t,e){return R6(t,e)+"000"}function tae(t,e){return wt(t.getUTCMonth()+1,e,2)}function nae(t,e){return wt(t.getUTCMinutes(),e,2)}function rae(t,e){return wt(t.getUTCSeconds(),e,2)}function iae(t){var e=t.getUTCDay();return e===0?7:e}function sae(t,e){return wt(h0.count(Ga(t)-1,t),e,2)}function k6(t){var e=t.getUTCDay();return e>=4||e===0?yd(t):yd.ceil(t)}function aae(t,e){return t=k6(t),wt(yd.count(Ga(t),t)+(Ga(t).getUTCDay()===4),e,2)}function oae(t){return t.getUTCDay()}function lae(t,e){return wt(Wv.count(Ga(t)-1,t),e,2)}function cae(t,e){return wt(t.getUTCFullYear()%100,e,2)}function uae(t,e){return t=k6(t),wt(t.getUTCFullYear()%100,e,2)}function dae(t,e){return wt(t.getUTCFullYear()%1e4,e,4)}function fae(t,e){var n=t.getUTCDay();return t=n>=4||n===0?yd(t):yd.ceil(t),wt(t.getUTCFullYear()%1e4,e,4)}function hae(){return"+0000"}function ck(){return"%"}function uk(t){return+t}function dk(t){return Math.floor(+t/1e3)}var Mu,D6,M6;mae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mae(t){return Mu=mse(t),D6=Mu.format,Mu.parse,M6=Mu.utcFormat,Mu.utcParse,Mu}function pae(t){return new Date(t)}function gae(t){return t instanceof Date?+t:+new Date(+t)}function EN(t,e,n,r,i,a,c,u,f,h){var p=uN(),g=p.invert,y=p.domain,x=h(".%L"),E=h(":%S"),j=h("%I:%M"),N=h("%I %p"),A=h("%a %d"),R=h("%b %d"),C=h("%B"),P=h("%Y");function M(B){return(f(B)<B?x:u(B)<B?E:c(B)<B?j:a(B)<B?N:r(B)<B?i(B)<B?A:R:n(B)<B?C:P)(B)}return p.invert=function(B){return new Date(g(B))},p.domain=function(B){return arguments.length?y(Array.from(B,gae)):y().map(pae)},p.ticks=function(B){var D=y();return t(D[0],D[D.length-1],B??10)},p.tickFormat=function(B,D){return D==null?M:h(D)},p.nice=function(B){var D=y();return(!B||typeof B.range!="function")&&(B=e(D[0],D[D.length-1],B??10)),B?y(j6(D,B)):p},p.copy=function(){return _m(p,EN(t,e,n,r,i,a,c,u,f,h))},p}function vae(){return $i.apply(EN(fse,hse,Ha,jN,f0,jm,xN,yN,cc,D6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yae(){return $i.apply(EN(use,dse,Ga,wN,h0,d0,_N,bN,cc,M6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function m0(){var t=0,e=1,n,r,i,a,c=Ir,u=!1,f;function h(g){return g==null||isNaN(g=+g)?f:c(i===0?.5:(g=(a(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e]=g,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(y){var x,E;return arguments.length?([x,E]=y,c=g(x,E),h):[c(0),c(1)]}}return h.range=p(Cd),h.rangeRound=p(cN),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return a=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),h}}function Nl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function z6(){var t=El(m0()(Ir));return t.copy=function(){return Nl(t,z6())},no.apply(t,arguments)}function L6(){var t=hN(m0()).domain([1,10]);return t.copy=function(){return Nl(t,L6()).base(t.base())},no.apply(t,arguments)}function q6(){var t=mN(m0());return t.copy=function(){return Nl(t,q6()).constant(t.constant())},no.apply(t,arguments)}function NN(){var t=pN(m0());return t.copy=function(){return Nl(t,NN()).exponent(t.exponent())},no.apply(t,arguments)}function bae(){return NN.apply(null,arguments).exponent(.5)}function U6(){var t=[],e=Ir;function n(r){if(r!=null&&!isNaN(r=+r))return e((bm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(al),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>iie(t,a/r))},n.copy=function(){return U6(e).domain(t)},no.apply(n,arguments)}function p0(){var t=0,e=.5,n=1,r=1,i,a,c,u,f,h=Ir,p,g=!1,y;function x(j){return isNaN(j=+j)?y:(j=.5+((j=+p(j))-a)*(r*j<r*a?u:f),h(g?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=p(t=+t),a=p(e=+e),c=p(n=+n),u=i===a?0:.5/(a-i),f=a===c?0:.5/(c-a),r=a<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(g=!!j,x):g},x.interpolator=function(j){return arguments.length?(h=j,x):h};function E(j){return function(N){var A,R,C;return arguments.length?([A,R,C]=N,h=Iie(j,[A,R,C]),x):[h(0),h(.5),h(1)]}}return x.range=E(Cd),x.rangeRound=E(cN),x.unknown=function(j){return arguments.length?(y=j,x):y},function(j){return p=j,i=j(t),a=j(e),c=j(n),u=i===a?0:.5/(a-i),f=a===c?0:.5/(c-a),r=a<i?-1:1,x}}function V6(){var t=El(p0()(Ir));return t.copy=function(){return Nl(t,V6())},no.apply(t,arguments)}function B6(){var t=hN(p0()).domain([.1,1,10]);return t.copy=function(){return Nl(t,B6()).base(t.base())},no.apply(t,arguments)}function $6(){var t=mN(p0());return t.copy=function(){return Nl(t,$6()).constant(t.constant())},no.apply(t,arguments)}function SN(){var t=pN(p0());return t.copy=function(){return Nl(t,SN()).exponent(t.exponent())},no.apply(t,arguments)}function xae(){return SN.apply(null,arguments).exponent(.5)}const lh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:aN,scaleDiverging:V6,scaleDivergingLog:B6,scaleDivergingPow:SN,scaleDivergingSqrt:xae,scaleDivergingSymlog:$6,scaleIdentity:_6,scaleImplicit:Xj,scaleLinear:x6,scaleLog:w6,scaleOrdinal:sN,scalePoint:oie,scalePow:gN,scaleQuantile:S6,scaleQuantize:A6,scaleRadial:N6,scaleSequential:z6,scaleSequentialLog:L6,scaleSequentialPow:NN,scaleSequentialQuantile:U6,scaleSequentialSqrt:bae,scaleSequentialSymlog:q6,scaleSqrt:ese,scaleSymlog:E6,scaleThreshold:T6,scaleTime:vae,scaleUtc:yae,tickFormat:b6},Symbol.toStringTag,{value:"Module"}));var ro=t=>t.chartData,F6=de([ro],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),AN=(t,e,n,r)=>r?F6(t):ro(t),_ae=(t,e,n)=>n?F6(t):ro(t);function Ka(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(gt(e)&&gt(n))return!0}return!1}function fk(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function H6(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(gt(n))i=n;else if(typeof n=="function")return;if(gt(r))a=r;else if(typeof r=="function")return;var c=[i,a];if(Ka(c))return c}}function jae(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ka(r))return fk(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,c,u;if(i==="auto")e!=null&&(c=Math.min(...e));else if(Re(i))c=i;else if(typeof i=="function")try{e!=null&&(c=i(e?.[0]))}catch{}else if(typeof i=="string"&&wO.test(i)){var f=wO.exec(i);if(f==null||f[1]==null||e==null)c=void 0;else{var h=+f[1];c=e[0]-h}}else c=e?.[0];if(a==="auto")e!=null&&(u=Math.max(...e));else if(Re(a))u=a;else if(typeof a=="function")try{e!=null&&(u=a(e?.[1]))}catch{}else if(typeof a=="string"&&EO.test(a)){var p=EO.exec(a);if(p==null||p[1]==null||e==null)u=void 0;else{var g=+p[1];u=e[1]+g}}else u=e?.[1];var y=[c,u];if(Ka(y))return e==null?y:fk(y,e,n)}}}var Pd=1e9,wae={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CN,tn=!0,Vi="[DecimalError] ",yc=Vi+"Invalid argument: ",TN=Vi+"Exponent out of range: ",Id=Math.floor,sc=Math.pow,Eae=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fi,Jn=1e7,Yt=7,G6=9007199254740991,Yv=Id(G6/Yt),Ie={};Ie.absoluteValue=Ie.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ie.comparedTo=Ie.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ie.decimalPlaces=Ie.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Yt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ie.dividedBy=Ie.div=function(t){return Ma(this,new this.constructor(t))};Ie.dividedToIntegerBy=Ie.idiv=function(t){var e=this,n=e.constructor;return $t(Ma(e,new n(t),0,1),n.precision)};Ie.equals=Ie.eq=function(t){return!this.cmp(t)};Ie.exponent=function(){return Mn(this)};Ie.greaterThan=Ie.gt=function(t){return this.cmp(t)>0};Ie.greaterThanOrEqualTo=Ie.gte=function(t){return this.cmp(t)>=0};Ie.isInteger=Ie.isint=function(){return this.e>this.d.length-2};Ie.isNegative=Ie.isneg=function(){return this.s<0};Ie.isPositive=Ie.ispos=function(){return this.s>0};Ie.isZero=function(){return this.s===0};Ie.lessThan=Ie.lt=function(t){return this.cmp(t)<0};Ie.lessThanOrEqualTo=Ie.lte=function(t){return this.cmp(t)<1};Ie.logarithm=Ie.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(fi))throw Error(Vi+"NaN");if(n.s<1)throw Error(Vi+(n.s?"NaN":"-Infinity"));return n.eq(fi)?new r(0):(tn=!1,e=Ma(Hh(n,a),Hh(t,a),a),tn=!0,$t(e,i))};Ie.minus=Ie.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?W6(e,t):K6(e,(t.s=-t.s,t))};Ie.modulo=Ie.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Vi+"NaN");return n.s?(tn=!1,e=Ma(n,t,0,1).times(t),tn=!0,n.minus(e)):$t(new r(n),i)};Ie.naturalExponential=Ie.exp=function(){return Q6(this)};Ie.naturalLogarithm=Ie.ln=function(){return Hh(this)};Ie.negated=Ie.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ie.plus=Ie.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?K6(e,t):W6(e,(t.s=-t.s,t))};Ie.precision=Ie.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yc+t);if(e=Mn(i)+1,r=i.d.length-1,n=r*Yt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ie.squareRoot=Ie.sqrt=function(){var t,e,n,r,i,a,c,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Vi+"NaN")}for(t=Mn(u),tn=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=Bs(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Id((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(i.toString()),n=f.precision,i=c=n+3;;)if(a=r,r=a.plus(Ma(u,a,c+2)).times(.5),Bs(a.d).slice(0,c)===(e=Bs(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),i==c&&e=="4999"){if($t(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if(e!="9999")break;c+=4}return tn=!0,$t(r,n)};Ie.times=Ie.mul=function(t){var e,n,r,i,a,c,u,f,h,p=this,g=p.constructor,y=p.d,x=(t=new g(t)).d;if(!p.s||!t.s)return new g(0);for(t.s*=p.s,n=p.e+t.e,f=y.length,h=x.length,f<h&&(a=y,y=x,x=a,c=f,f=h,h=c),a=[],c=f+h,r=c;r--;)a.push(0);for(r=h;--r>=0;){for(e=0,i=f+r;i>r;)u=a[i]+x[r]*y[i-r-1]+e,a[i--]=u%Jn|0,e=u/Jn|0;a[i]=(a[i]+e)%Jn|0}for(;!a[--c];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,tn?$t(t,g.precision):t};Ie.toDecimalPlaces=Ie.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(na(t,0,Pd),e===void 0?e=r.rounding:na(e,0,8),$t(n,t+Mn(n)+1,e))};Ie.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Oc(r,!0):(na(t,0,Pd),e===void 0?e=i.rounding:na(e,0,8),r=$t(new i(r),t+1,e),n=Oc(r,!0,t+1)),n};Ie.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Oc(i):(na(t,0,Pd),e===void 0?e=a.rounding:na(e,0,8),r=$t(new a(i),t+Mn(i)+1,e),n=Oc(r.abs(),!1,t+Mn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ie.toInteger=Ie.toint=function(){var t=this,e=t.constructor;return $t(new e(t),Mn(t)+1,e.rounding)};Ie.toNumber=function(){return+this};Ie.toPower=Ie.pow=function(t){var e,n,r,i,a,c,u=this,f=u.constructor,h=12,p=+(t=new f(t));if(!t.s)return new f(fi);if(u=new f(u),!u.s){if(t.s<1)throw Error(Vi+"Infinity");return u}if(u.eq(fi))return u;if(r=f.precision,t.eq(fi))return $t(u,r);if(e=t.e,n=t.d.length-1,c=e>=n,a=u.s,c){if((n=p<0?-p:p)<=G6){for(i=new f(fi),e=Math.ceil(r/Yt+4),tn=!1;n%2&&(i=i.times(u),mk(i.d,e)),n=Id(n/2),n!==0;)u=u.times(u),mk(u.d,e);return tn=!0,t.s<0?new f(fi).div(i):$t(i,r)}}else if(a<0)throw Error(Vi+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,tn=!1,i=t.times(Hh(u,r+h)),tn=!0,i=Q6(i),i.s=a,i};Ie.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Mn(i),r=Oc(i,n<=a.toExpNeg||n>=a.toExpPos)):(na(t,1,Pd),e===void 0?e=a.rounding:na(e,0,8),i=$t(new a(i),t,e),n=Mn(i),r=Oc(i,t<=n||n<=a.toExpNeg,t)),r};Ie.toSignificantDigits=Ie.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(na(t,1,Pd),e===void 0?e=r.rounding:na(e,0,8)),$t(new r(n),t,e)};Ie.toString=Ie.valueOf=Ie.val=Ie.toJSON=Ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Mn(t),n=t.constructor;return Oc(t,e<=n.toExpNeg||e>=n.toExpPos)};function K6(t,e){var n,r,i,a,c,u,f,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),tn?$t(e,g):e;if(f=t.d,h=e.d,c=t.e,i=e.e,f=f.slice(),a=c-i,a){for(a<0?(r=f,a=-a,u=h.length):(r=h,i=c,u=f.length),c=Math.ceil(g/Yt),u=c>u?c+1:u+1,a>u&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(u=f.length,a=h.length,u-a<0&&(a=u,r=h,h=f,f=r),n=0;a;)n=(f[--a]=f[a]+h[a]+n)/Jn|0,f[a]%=Jn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return e.d=f,e.e=i,tn?$t(e,g):e}function na(t,e,n){if(t!==~~t||t<e||t>n)throw Error(yc+t)}function Bs(t){var e,n,r,i=t.length-1,a="",c=t[0];if(i>0){for(a+=c,e=1;e<i;e++)r=t[e]+"",n=Yt-r.length,n&&(a+=Fo(n)),a+=r;c=t[e],r=c+"",n=Yt-r.length,n&&(a+=Fo(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return a+c}var Ma=(function(){function t(r,i){var a,c=0,u=r.length;for(r=r.slice();u--;)a=r[u]*i+c,r[u]=a%Jn|0,c=a/Jn|0;return c&&r.unshift(c),r}function e(r,i,a,c){var u,f;if(a!=c)f=a>c?1:-1;else for(u=f=0;u<a;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,a){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*Jn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,c){var u,f,h,p,g,y,x,E,j,N,A,R,C,P,M,B,D,O,k=r.constructor,U=r.s==i.s?1:-1,L=r.d,z=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(Vi+"Division by zero");for(f=r.e-i.e,D=z.length,M=L.length,x=new k(U),E=x.d=[],h=0;z[h]==(L[h]||0);)++h;if(z[h]>(L[h]||0)&&--f,a==null?R=a=k.precision:c?R=a+(Mn(r)-Mn(i))+1:R=a,R<0)return new k(0);if(R=R/Yt+2|0,h=0,D==1)for(p=0,z=z[0],R++;(h<M||p)&&R--;h++)C=p*Jn+(L[h]||0),E[h]=C/z|0,p=C%z|0;else{for(p=Jn/(z[0]+1)|0,p>1&&(z=t(z,p),L=t(L,p),D=z.length,M=L.length),P=D,j=L.slice(0,D),N=j.length;N<D;)j[N++]=0;O=z.slice(),O.unshift(0),B=z[0],z[1]>=Jn/2&&++B;do p=0,u=e(z,j,D,N),u<0?(A=j[0],D!=N&&(A=A*Jn+(j[1]||0)),p=A/B|0,p>1?(p>=Jn&&(p=Jn-1),g=t(z,p),y=g.length,N=j.length,u=e(g,j,y,N),u==1&&(p--,n(g,D<y?O:z,y))):(p==0&&(u=p=1),g=z.slice()),y=g.length,y<N&&g.unshift(0),n(j,g,N),u==-1&&(N=j.length,u=e(z,j,D,N),u<1&&(p++,n(j,D<N?O:z,N))),N=j.length):u===0&&(p++,j=[0]),E[h++]=p,u&&j[0]?j[N++]=L[P]||0:(j=[L[P]],N=1);while((P++<M||j[0]!==void 0)&&R--)}return E[0]||E.shift(),x.e=f,$t(x,c?a+Mn(x)+1:a)}})();function Q6(t,e){var n,r,i,a,c,u,f=0,h=0,p=t.constructor,g=p.precision;if(Mn(t)>16)throw Error(TN+Mn(t));if(!t.s)return new p(fi);for(tn=!1,u=g,c=new p(.03125);t.abs().gte(.1);)t=t.times(c),h+=5;for(r=Math.log(sc(2,h))/Math.LN10*2+5|0,u+=r,n=i=a=new p(fi),p.precision=u;;){if(i=$t(i.times(t),u),n=n.times(++f),c=a.plus(Ma(i,n,u)),Bs(c.d).slice(0,u)===Bs(a.d).slice(0,u)){for(;h--;)a=$t(a.times(a),u);return p.precision=g,e==null?(tn=!0,$t(a,g)):a}a=c}}function Mn(t){for(var e=t.e*Yt,n=t.d[0];n>=10;n/=10)e++;return e}function b1(t,e,n){if(e>t.LN10.sd())throw tn=!0,n&&(t.precision=n),Error(Vi+"LN10 precision limit exceeded");return $t(new t(t.LN10),e)}function Fo(t){for(var e="";t--;)e+="0";return e}function Hh(t,e){var n,r,i,a,c,u,f,h,p,g=1,y=10,x=t,E=x.d,j=x.constructor,N=j.precision;if(x.s<1)throw Error(Vi+(x.s?"NaN":"-Infinity"));if(x.eq(fi))return new j(0);if(e==null?(tn=!1,h=N):h=e,x.eq(10))return e==null&&(tn=!0),b1(j,h);if(h+=y,j.precision=h,n=Bs(E),r=n.charAt(0),a=Mn(x),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Bs(x.d),r=n.charAt(0),g++;a=Mn(x),r>1?(x=new j("0."+n),a++):x=new j(r+"."+n.slice(1))}else return f=b1(j,h+2,N).times(a+""),x=Hh(new j(r+"."+n.slice(1)),h-y).plus(f),j.precision=N,e==null?(tn=!0,$t(x,N)):x;for(u=c=x=Ma(x.minus(fi),x.plus(fi),h),p=$t(x.times(x),h),i=3;;){if(c=$t(c.times(p),h),f=u.plus(Ma(c,new j(i),h)),Bs(f.d).slice(0,h)===Bs(u.d).slice(0,h))return u=u.times(2),a!==0&&(u=u.plus(b1(j,h+2,N).times(a+""))),u=Ma(u,new j(g),h),j.precision=N,e==null?(tn=!0,$t(u,N)):u;u=f,i+=2}}function hk(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Id(n/Yt),t.d=[],r=(n+1)%Yt,n<0&&(r+=Yt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Yt;r<i;)t.d.push(+e.slice(r,r+=Yt));e=e.slice(r),r=Yt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),tn&&(t.e>Yv||t.e<-Yv))throw Error(TN+n)}else t.s=0,t.e=0,t.d=[0];return t}function $t(t,e,n){var r,i,a,c,u,f,h,p,g=t.d;for(c=1,a=g[0];a>=10;a/=10)c++;if(r=e-c,r<0)r+=Yt,i=e,h=g[p=0];else{if(p=Math.ceil((r+1)/Yt),a=g.length,p>=a)return t;for(h=a=g[p],c=1;a>=10;a/=10)c++;r%=Yt,i=r-Yt+c}if(n!==void 0&&(a=sc(10,c-i-1),u=h/a%10|0,f=e<0||g[p+1]!==void 0||h%a,f=n<4?(u||f)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?h/sc(10,c-i):0:g[p-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return f?(a=Mn(t),g.length=1,e=e-a-1,g[0]=sc(10,(Yt-e%Yt)%Yt),t.e=Id(-e/Yt)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=p,a=1,p--):(g.length=p+1,a=sc(10,Yt-r),g[p]=i>0?(h/sc(10,c-i)%sc(10,i)|0)*a:0),f)for(;;)if(p==0){(g[0]+=a)==Jn&&(g[0]=1,++t.e);break}else{if(g[p]+=a,g[p]!=Jn)break;g[p--]=0,a=1}for(r=g.length;g[--r]===0;)g.pop();if(tn&&(t.e>Yv||t.e<-Yv))throw Error(TN+Mn(t));return t}function W6(t,e){var n,r,i,a,c,u,f,h,p,g,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),tn?$t(e,x):e;if(f=t.d,g=e.d,r=e.e,h=t.e,f=f.slice(),c=h-r,c){for(p=c<0,p?(n=f,c=-c,u=g.length):(n=g,r=h,u=f.length),i=Math.max(Math.ceil(x/Yt),u)+2,c>i&&(c=i,n.length=1),n.reverse(),i=c;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(f[i]!=g[i]){p=f[i]<g[i];break}c=0}for(p&&(n=f,f=g,g=n,e.s=-e.s),u=f.length,i=g.length-u;i>0;--i)f[u++]=0;for(i=g.length;i>c;){if(f[--i]<g[i]){for(a=i;a&&f[--a]===0;)f[a]=Jn-1;--f[a],f[i]+=Jn}f[i]-=g[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,tn?$t(e,x):e):new y(0)}function Oc(t,e,n){var r,i=Mn(t),a=Bs(t.d),c=a.length;return e?(n&&(r=n-c)>0?a=a.charAt(0)+"."+a.slice(1)+Fo(r):c>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Fo(-i-1)+a,n&&(r=n-c)>0&&(a+=Fo(r))):i>=c?(a+=Fo(i+1-c),n&&(r=n-i-1)>0&&(a=a+"."+Fo(r))):((r=i+1)<c&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-c)>0&&(i+1===c&&(a+="."),a+=Fo(r))),t.s<0?"-"+a:a}function mk(t,e){if(t.length>e)return t.length=e,!0}function Y6(t){var e,n,r;function i(a){var c=this;if(!(c instanceof i))return new i(a);if(c.constructor=i,a instanceof i){c.s=a.s,c.e=a.e,c.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(yc+a);if(a>0)c.s=1;else if(a<0)a=-a,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(a===~~a&&a<1e7){c.e=0,c.d=[a];return}return hk(c,a.toString())}else if(typeof a!="string")throw Error(yc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),c.s=-1):c.s=1,Eae.test(a))hk(c,a);else throw Error(yc+a)}if(i.prototype=Ie,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Y6,i.config=i.set=Nae,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Nae(t){if(!t||typeof t!="object")throw Error(Vi+"Object expected");var e,n,r,i=["precision",1,Pd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Id(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(yc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(yc+n+": "+r);return this}var CN=Y6(wae);fi=new CN(1);const It=CN;function X6(t){var e;return t===0?e=1:e=Math.floor(new It(t).abs().log(10).toNumber())+1,e}function J6(t,e,n){for(var r=new It(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Z6=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},e5=(t,e,n)=>{if(t.lte(0))return new It(0);var r=X6(t.toNumber()),i=new It(10).pow(r),a=t.div(i),c=r!==1?.05:.1,u=new It(Math.ceil(a.div(c).toNumber())).add(n).mul(c),f=u.mul(i);return e?new It(f.toNumber()):new It(Math.ceil(f.toNumber()))},Sae=(t,e,n)=>{var r=new It(1),i=new It(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new It(10).pow(X6(t)-1),i=new It(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new It(Math.floor(t)))}else t===0?i=new It(Math.floor((e-1)/2)):n||(i=new It(Math.floor(t)));for(var c=Math.floor((e-1)/2),u=[],f=0;f<e;f++)u.push(i.add(new It(f-c).mul(r)).toNumber());return u},t5=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new It(0),tickMin:new It(0),tickMax:new It(0)};var c=e5(new It(n).sub(e).div(r-1),i,a),u;e<=0&&n>=0?u=new It(0):(u=new It(e).add(n).div(2),u=u.sub(new It(u).mod(c)));var f=Math.ceil(u.sub(e).div(c).toNumber()),h=Math.ceil(new It(n).sub(u).div(c).toNumber()),p=f+h+1;return p>r?t5(e,n,r,i,a+1):(p<r&&(h=n>0?h+(r-p):h,f=n>0?f:f+(r-p)),{step:c,tickMin:u.sub(new It(f).mul(c)),tickMax:u.add(new It(h).mul(c))})},Aae=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,f]=Z6([n,r]);if(u===-1/0||f===1/0){var h=f===1/0?[u,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),f];return n>r?h.reverse():h}if(u===f)return Sae(u,i,a);var{step:p,tickMin:g,tickMax:y}=t5(u,f,c,a,0),x=J6(g,y.add(new It(.1).mul(p)),p);return n>r?x.reverse():x},Tae=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=Z6([r,i]);if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var f=Math.max(n,2),h=e5(new It(u).sub(c).div(f-1),a,0),p=[...J6(new It(c),new It(u),h),u];return a===!1&&(p=p.map(g=>Math.round(g))),r>i?p.reverse():p},n5=t=>t.rootProps.maxBarSize,Cae=t=>t.rootProps.barGap,r5=t=>t.rootProps.barCategoryGap,Pae=t=>t.rootProps.barSize,g0=t=>t.rootProps.stackOffset,i5=t=>t.rootProps.reverseStackOrder,PN=t=>t.options.chartName,IN=t=>t.rootProps.syncId,s5=t=>t.rootProps.syncMethod,ON=t=>t.options.eventEmitter,Zn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ec={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Ms={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},v0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function y0(t,e,n){if(n!=="auto")return n;if(t!=null)return Za(t,e)?"category":"number"}function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(r){Iae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Iae(t,e,n){return(e=Oae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oae(t){var e=Rae(t,"string");return typeof e=="symbol"?e:e+""}function Rae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gk={allowDataOverflow:ec.allowDataOverflow,allowDecimals:ec.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ec.angleAxisId,includeHidden:!1,name:void 0,reversed:ec.reversed,scale:ec.scale,tick:ec.tick,tickCount:void 0,ticks:void 0,type:ec.type,unit:void 0},vk={allowDataOverflow:Ms.allowDataOverflow,allowDecimals:Ms.allowDecimals,allowDuplicatedCategory:Ms.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ms.radiusAxisId,includeHidden:Ms.includeHidden,name:void 0,reversed:Ms.reversed,scale:Ms.scale,tick:Ms.tick,tickCount:Ms.tickCount,ticks:void 0,type:Ms.type,unit:void 0},kae=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},RN=de([kae,G3],(t,e)=>{var n;if(t!=null)return t;var r=(n=y0(e,"angleAxis",gk.type))!==null&&n!==void 0?n:"category";return Xv(Xv({},gk),{},{type:r})}),Dae=(t,e)=>t.polarAxis.radiusAxis[e],kN=de([Dae,G3],(t,e)=>{var n;if(t!=null)return t;var r=(n=y0(e,"radiusAxis",vk.type))!==null&&n!==void 0?n:"category";return Xv(Xv({},vk),{},{type:r})}),b0=t=>t.polarOptions,DN=de([eo,to,er],Ore),a5=de([b0,DN],(t,e)=>{if(t!=null)return ms(t.innerRadius,e,0)}),o5=de([b0,DN],(t,e)=>{if(t!=null)return ms(t.outerRadius,e,e*.8)}),Mae=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},l5=de([b0],Mae);de([RN,l5],v0);var c5=de([DN,a5,o5],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});de([kN,c5],v0);var u5=de([Ot,b0,a5,o5,eo,to],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:c,cy:u,startAngle:f,endAngle:h}=e;return{cx:ms(c,i,i/2),cy:ms(u,a,a/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),nr=(t,e)=>e,x0=(t,e,n)=>n;function MN(t){return t?.id}function d5(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,c=new Map;return t.forEach(u=>{var f,h=(f=u.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var p=MN(u);h.forEach((g,y)=>{var x=a==null||i?y:String(Dn(g,a,null)),E=Dn(g,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[p]:E}),c.set(x,j)})}}),Array.from(c.values())}function _0(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var j0=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function w0(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function zae(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var rr=t=>{var e=Ot(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Od=t=>t.tooltip.settings.axisId;function Lae(t){if(t in lh)return lh[t]();var e="scale".concat(hm(t));if(e in lh)return lh[e]()}function yk(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function c(){return a.apply(this,arguments)}return c.toString=function(){return a.toString()},c})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var c=i[0],u=i[1];return c<=u?a>=c&&a<=u:a>=u&&a<=c},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,c)=>{var u=t(a);if(u!=null){if(t.bandwidth&&c!==null&&c!==void 0&&c.position){var f=t.bandwidth();switch(c.position){case"middle":u+=f/2;break;case"end":u+=f;break}}return u}}}}function bk(t,e,n){if(typeof t=="function")return yk(t.copy().domain(e).range(n));if(t!=null){var r=Lae(t);if(r!=null)return r.domain(e).range(n),yk(r)}}var qae=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Ka(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];gt(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(r){Uae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uae(t,e,n){return(e=Vae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vae(t){var e=Bae(t,"string");return typeof e=="symbol"?e:e+""}function Bae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tw=[0,"auto"],Wn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},f5=(t,e)=>t.cartesianAxis.xAxis[e],io=(t,e)=>{var n=f5(t,e);return n??Wn},Yn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:tw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:gm},h5=(t,e)=>t.cartesianAxis.yAxis[e],so=(t,e)=>{var n=h5(t,e);return n??Yn},$ae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},zN=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??$ae},zr=(t,e,n)=>{switch(e){case"xAxis":return io(t,n);case"yAxis":return so(t,n);case"zAxis":return zN(t,n);case"angleAxis":return RN(t,n);case"radiusAxis":return kN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Fae=(t,e,n)=>{switch(e){case"xAxis":return io(t,n);case"yAxis":return so(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},wm=(t,e,n)=>{switch(e){case"xAxis":return io(t,n);case"yAxis":return so(t,n);case"angleAxis":return RN(t,n);case"radiusAxis":return kN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},m5=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function p5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var E0=t=>t.graphicalItems.cartesianItems,Hae=de([nr,x0],p5),g5=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Em=de([E0,zr,Hae],g5,{memoizeOptions:{resultEqualityCheck:w0}}),v5=de([Em],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(_0)),y5=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Gae=de([Em],y5),b5=t=>t.map(e=>e.data).filter(Boolean).flat(1),Kae=de([Em],b5,{memoizeOptions:{resultEqualityCheck:w0}}),x5=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},LN=de([Kae,AN],x5),_5=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Dn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Dn(i,r)}))):t.map(r=>({value:r})),N0=de([LN,zr,Em],_5);function j5(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function $g(t){if(ea(t)||t instanceof Date){var e=Number(t);if(gt(e))return e}}function _k(t){if(Array.isArray(t)){var e=[$g(t[0]),$g(t[1])];return Ka(e)?e:void 0}var n=$g(t);if(n!=null)return[n,n]}function Qa(t){return t.map($g).filter(Jr)}function Qae(t,e,n){return!n||typeof e!="number"||Zs(e)?[]:n.length?Qa(n.flatMap(r=>{var i=Dn(t,r.dataKey),a,c;if(Array.isArray(i)?[a,c]=i:a=c=i,!(!gt(a)||!gt(c)))return[e-a,e+c]})):[]}var Fn=t=>{var e=rr(t),n=Od(t);return wm(t,e,n)},Nm=de([Fn],t=>t?.dataKey),Wae=de([v5,AN,Fn],d5),w5=(t,e,n,r)=>{var i={},a=e.reduce((c,u)=>{if(u.stackId==null)return c;var f=c[u.stackId];return f==null&&(f=[]),f.push(u),c[u.stackId]=f,c},i);return Object.fromEntries(Object.entries(a).map(c=>{var[u,f]=c,h=r?[...f].reverse():f,p=h.map(MN);return[u,{stackedData:wte(t,p,n),graphicalItems:h}]}))},nw=de([Wae,v5,g0,i5],w5),E5=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var c=Tte(t,i,a);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},Yae=de([zr],t=>t.allowDataOverflow),qN=t=>{var e;if(t==null||!("domain"in t))return tw;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Qa(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:tw},N5=de([zr],qN),S5=de([N5,Yae],H6),Xae=de([nw,ro,nr,S5],E5,{memoizeOptions:{resultEqualityCheck:j0}}),UN=t=>t.errorBars,Jae=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>j5(n,r)),Zv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),c=Math.min(...a),u=Math.max(...a);return[c,u]}},A5=(t,e,n,r,i)=>{var a,c;if(n.length>0&&t.forEach(u=>{n.forEach(f=>{var h,p,g=(h=r[f.id])===null||h===void 0?void 0:h.filter(A=>j5(i,A)),y=Dn(u,(p=e.dataKey)!==null&&p!==void 0?p:f.dataKey),x=Qae(u,y,g);if(x.length>=2){var E=Math.min(...x),j=Math.max(...x);(a==null||E<a)&&(a=E),(c==null||j>c)&&(c=j)}var N=_k(y);N!=null&&(a=a==null?N[0]:Math.min(a,N[0]),c=c==null?N[1]:Math.max(c,N[1]))})}),e?.dataKey!=null&&t.forEach(u=>{var f=_k(Dn(u,e.dataKey));f!=null&&(a=a==null?f[0]:Math.min(a,f[0]),c=c==null?f[1]:Math.max(c,f[1]))}),gt(a)&&gt(c))return[a,c]},Zae=de([LN,zr,Gae,UN,nr],A5,{memoizeOptions:{resultEqualityCheck:j0}});function eoe(t){var{value:e}=t;if(ea(e)||e instanceof Date)return e}var toe=(t,e,n)=>{var r=t.map(eoe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&$L(r))?u6(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},T5=t=>t.referenceElements.dots,Rd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),noe=de([T5,nr,x0],Rd),C5=t=>t.referenceElements.areas,roe=de([C5,nr,x0],Rd),P5=t=>t.referenceElements.lines,ioe=de([P5,nr,x0],Rd),I5=(t,e)=>{if(t!=null){var n=Qa(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},soe=de(noe,nr,I5),O5=(t,e)=>{if(t!=null){var n=Qa(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},aoe=de([roe,nr],O5);function ooe(t){var e;if(t.x!=null)return Qa([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Qa(n)}function loe(t){var e;if(t.y!=null)return Qa([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Qa(n)}var R5=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?ooe(r):loe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},coe=de([ioe,nr],R5),uoe=de(soe,coe,aoe,(t,e,n)=>Zv(t,n,e)),k5=(t,e,n,r,i,a,c,u)=>{if(n!=null)return n;var f=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=f?Zv(r,a,i):Zv(a,i);return jae(e,h,t.allowDataOverflow)},doe=de([zr,N5,S5,Xae,Zae,uoe,Ot,nr],k5,{memoizeOptions:{resultEqualityCheck:j0}}),foe=[0,1],D5=(t,e,n,r,i,a,c)=>{if(!((t==null||n==null||n.length===0)&&c===void 0)){var{dataKey:u,type:f}=t,h=Za(e,a);if(h&&u==null){var p;return u6(0,(p=n?.length)!==null&&p!==void 0?p:0)}return f==="category"?toe(r,t,h):i==="expand"?foe:c}},VN=de([zr,Ot,LN,N0,g0,nr,doe],D5);function hoe(t){return t in lh}var M5=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(hm(r));return hoe(a)?a:"point"}}},kd=de([zr,m5,PN],M5);function BN(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?bk(t.scale,n,r):bk(e,n,r)}var z5=(t,e,n)=>{var r=qN(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ka(t))return Aae(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ka(t))return Tae(t,e.tickCount,e.allowDecimals)}},$N=de([VN,wm,kd],z5),L5=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Ka(e)&&Array.isArray(n)&&n.length>0){var i,a,c=e[0],u=(i=n[0])!==null&&i!==void 0?i:0,f=e[1],h=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(c,u),Math.max(f,h)]}return e},moe=de([zr,VN,$N,nr],L5),poe=de(N0,zr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Qa(t.map(g=>g.value))).sort((g,y)=>g-y),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var c=a-i;if(c===0)return 1/0;for(var u=0;u<r.length-1;u++){var f=r[u],h=r[u+1];if(!(f==null||h==null)){var p=h-f;n=Math.min(n,p)}}return n/c}}),q5=de(poe,Ot,r5,er,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!gt(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var c=ms(n,t*a),u=t*a/2;return u-c-(u-c)/a*c}return 0}),goe=(t,e,n)=>{var r=io(t,e);return r==null||typeof r.padding!="string"?0:q5(t,"xAxis",e,n,r.padding)},voe=(t,e,n)=>{var r=so(t,e);return r==null||typeof r.padding!="string"?0:q5(t,"yAxis",e,n,r.padding)},yoe=de(io,goe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),boe=de(so,voe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),xoe=de([er,yoe,n0,t0,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),_oe=de([er,Ot,boe,n0,t0,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:c}=i;return a?[r.height-c.bottom,c.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Sm=(t,e,n,r)=>{var i;switch(e){case"xAxis":return xoe(t,n,r);case"yAxis":return _oe(t,n,r);case"zAxis":return(i=zN(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return l5(t);case"radiusAxis":return c5(t,n);default:return}},U5=de([zr,Sm],v0),joe=de([kd,moe],qae),S0=de([zr,kd,joe,U5],BN);de([Em,UN,nr],Jae);function V5(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var A0=(t,e)=>e,T0=(t,e,n)=>n,woe=de(Zy,A0,T0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(V5)),Eoe=de(e0,A0,T0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(V5)),B5=(t,e)=>({width:t.width,height:e.height}),Noe=(t,e)=>{var n=typeof e.width=="number"?e.width:gm;return{width:n,height:t.height}},$5=de(er,io,B5),Soe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Aoe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Toe=de(to,er,woe,A0,T0,(t,e,n,r,i)=>{var a={},c;return n.forEach(u=>{var f=B5(e,u);c==null&&(c=Soe(e,r,t));var h=r==="top"&&!i||r==="bottom"&&i;a[u.id]=c-Number(h)*f.height,c+=(h?-1:1)*f.height}),a}),Coe=de(eo,er,Eoe,A0,T0,(t,e,n,r,i)=>{var a={},c;return n.forEach(u=>{var f=Noe(e,u);c==null&&(c=Aoe(e,r,t));var h=r==="left"&&!i||r==="right"&&i;a[u.id]=c-Number(h)*f.width,c+=(h?-1:1)*f.width}),a}),Poe=(t,e)=>{var n=io(t,e);if(n!=null)return Toe(t,n.orientation,n.mirror)},Ioe=de([er,io,Poe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Ooe=(t,e)=>{var n=so(t,e);if(n!=null)return Coe(t,n.orientation,n.mirror)},Roe=de([er,so,Ooe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),F5=de(er,so,(t,e)=>{var n=typeof e.width=="number"?e.width:gm;return{width:n,height:t.height}}),jk=(t,e,n)=>{switch(e){case"xAxis":return $5(t,n).width;case"yAxis":return F5(t,n).height;default:return}},H5=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:c}=n,u=Za(t,r),f=e.map(h=>h.value);if(c&&u&&a==="category"&&i&&$L(f))return f}},FN=de([Ot,N0,zr,nr],H5),G5=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,c=Za(t,r);if(c&&(i==="number"||a!=="auto"))return e.map(u=>u.value)}},HN=de([Ot,N0,wm,nr],G5),wk=de([Ot,Fae,kd,S0,FN,HN,Sm,$N,nr],(t,e,n,r,i,a,c,u,f)=>{if(e!=null){var h=Za(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:a,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:n,scale:r}}}),koe=(t,e,n,r,i,a,c,u,f)=>{if(!(e==null||r==null)){var h=Za(t,f),{type:p,ticks:g,tickCount:y}=e,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,E=p==="category"&&r.bandwidth?r.bandwidth()/x:0;E=f==="angleAxis"&&a!=null&&a.length>=2?Xr(a[0]-a[1])*2*E:E;var j=g||i;return j?j.map((N,A)=>{var R=c?c.indexOf(N):N,C=r.map(R);return gt(C)?{index:A,coordinate:C+E,value:N,offset:E}:null}).filter(Jr):h&&u?u.map((N,A)=>{var R=r.map(N);return gt(R)?{coordinate:R+E,value:N,index:A,offset:E}:null}).filter(Jr):r.ticks?r.ticks(y).map((N,A)=>{var R=r.map(N);return gt(R)?{coordinate:R+E,value:N,index:A,offset:E}:null}).filter(Jr):r.domain().map((N,A)=>{var R=r.map(N);return gt(R)?{coordinate:R+E,value:c?c[N]:N,index:A,offset:E}:null}).filter(Jr)}},K5=de([Ot,wm,kd,S0,$N,Sm,FN,HN,nr],koe),Doe=(t,e,n,r,i,a,c)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=Za(t,c),{tickCount:f}=e,h=0;return h=c==="angleAxis"&&r?.length>=2?Xr(r[0]-r[1])*2*h:h,u&&a?a.map((p,g)=>{var y=n.map(p);return gt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(Jr):n.ticks?n.ticks(f).map((p,g)=>{var y=n.map(p);return gt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(Jr):n.domain().map((p,g)=>{var y=n.map(p);return gt(y)?{coordinate:y+h,value:i?i[p]:p,index:g,offset:h}:null}).filter(Jr)}},gl=de([Ot,wm,S0,Sm,FN,HN,nr],Doe),vl=de(zr,S0,(t,e)=>{if(!(t==null||e==null))return Jv(Jv({},t),{},{scale:e})}),Moe=de([zr,kd,VN,U5],BN);de((t,e,n)=>zN(t,n),Moe,(t,e)=>{if(!(t==null||e==null))return Jv(Jv({},t),{},{scale:e})});var zoe=de([Ot,Zy,e0],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Q5=t=>t.options.defaultTooltipEventType,W5=t=>t.options.validateTooltipEventTypes;function Y5(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function GN(t,e){var n=Q5(t),r=W5(t);return Y5(e,n,r)}function Loe(t){return Le(e=>GN(e,t))}var X5=(t,e)=>{var n,r=Number(e);if(!(Zs(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},qoe=t=>t.tooltip.settings,Xo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Uoe={itemInteraction:{click:Xo,hover:Xo},axisInteraction:{click:Xo,hover:Xo},keyboardInteraction:Xo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},J5=ei({name:"tooltip",initialState:Uoe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Zt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=us(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Zt()},removeTooltipEntrySettings:{reducer(t,e){var n=us(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Zt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Voe,replaceTooltipEntrySettings:Boe,removeTooltipEntrySettings:$oe,setTooltipSettingsState:Foe,setActiveMouseOverItemIndex:Z5,mouseLeaveItem:Hoe,mouseLeaveChart:eq,setActiveClickItemIndex:Goe,setMouseOverAxisIndex:tq,setMouseClickAxisIndex:Koe,setSyncInteraction:rw,setKeyboardInteraction:iw}=J5.actions,Qoe=J5.reducer;function Ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(n),!0).forEach(function(r){Woe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Woe(t,e,n){return(e=Yoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yoe(t){var e=Xoe(t,"string");return typeof e=="symbol"?e:e+""}function Xoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Joe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Zoe(t){return t.index!=null}var nq=(t,e,n,r)=>{if(e==null)return Xo;var i=Joe(t,e,n);if(i==null)return Xo;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(Zoe(i)){if(a)return wg(wg({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return wg(wg({},Xo),{},{coordinate:i.coordinate})};function ele(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function tle(t,e){var n=ele(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),c=Math.max(r,i);return n>=a&&n<=c}function nle(t,e,n){if(n==null||e==null)return!0;var r=Dn(t,e);return r==null||!Ka(n)?!0:tle(r,n)}var KN=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!gt(a))return i;var c=0,u=1/0;e.length>0&&(u=e.length-1);var f=Math.max(c,Math.min(a,u)),h=e[f];return h==null||nle(h,n,r)?String(f):null},rq=(t,e,n,r,i,a,c)=>{if(a!=null){var u=c[0],f=u?.getPosition(a);if(f!=null)return f;var h=i?.[Number(a)];if(h)return n==="horizontal"?{x:h.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:h.coordinate}}},iq=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},sq=t=>t.options.tooltipPayloadSearcher,Dd=t=>t.tooltip;function Nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(n),!0).forEach(function(r){rle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rle(t,e,n){return(e=ile(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ile(t){var e=sle(t,"string");return typeof e=="symbol"?e:e+""}function sle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ale(t,e){return t??e}var aq=(t,e,n,r,i,a,c)=>{if(!(e==null||a==null)){var{chartData:u,computedData:f,dataStartIndex:h,dataEndIndex:p}=n,g=[];return t.reduce((y,x)=>{var E,{dataDefinedOnItem:j,settings:N}=x,A=ale(j,u),R=Array.isArray(A)?D3(A,h,p):A,C=(E=N?.dataKey)!==null&&E!==void 0?E:r,P=N?.nameKey,M;if(r&&Array.isArray(R)&&!Array.isArray(R[0])&&c==="axis"?M=FL(R,r,i):M=a(R,e,f,P),Array.isArray(M))M.forEach(D=>{var O=Sk(Sk({},N),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});y.push(NO({tooltipEntrySettings:O,dataKey:D.dataKey,payload:D.payload,value:Dn(D.payload,D.dataKey),name:D.name}))});else{var B;y.push(NO({tooltipEntrySettings:N,dataKey:C,payload:M,value:Dn(M,C),name:(B=Dn(M,P))!==null&&B!==void 0?B:N?.name}))}return y},g)}},QN=de([Fn,m5,PN],M5),ole=de([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),lle=de([rr,Od],p5),Md=de([ole,Fn,lle],g5,{memoizeOptions:{resultEqualityCheck:w0}}),cle=de([Md],t=>t.filter(_0)),ule=de([Md],b5,{memoizeOptions:{resultEqualityCheck:w0}}),zd=de([ule,ro],x5),dle=de([cle,ro,Fn],d5),WN=de([zd,Fn,Md],_5),oq=de([Fn],qN),fle=de([Fn],t=>t.allowDataOverflow),lq=de([oq,fle],H6),hle=de([Md],t=>t.filter(_0)),mle=de([dle,hle,g0,i5],w5),ple=de([mle,ro,rr,lq],E5),gle=de([Md],y5),vle=de([zd,Fn,gle,UN,rr],A5,{memoizeOptions:{resultEqualityCheck:j0}}),yle=de([T5,rr,Od],Rd),ble=de([yle,rr],I5),xle=de([C5,rr,Od],Rd),_le=de([xle,rr],O5),jle=de([P5,rr,Od],Rd),wle=de([jle,rr],R5),Ele=de([ble,wle,_le],Zv),Nle=de([Fn,oq,lq,ple,vle,Ele,Ot,rr],k5),Am=de([Fn,Ot,zd,WN,g0,rr,Nle],D5),Sle=de([Am,Fn,QN],z5),Ale=de([Fn,Am,Sle,rr],L5),cq=t=>{var e=rr(t),n=Od(t),r=!1;return Sm(t,e,n,r)},uq=de([Fn,cq],v0),dq=de([Fn,QN,Ale,uq],BN),Tle=de([Ot,WN,Fn,rr],H5),Cle=de([Ot,WN,Fn,rr],G5),Ple=(t,e,n,r,i,a,c,u)=>{if(e){var{type:f}=e,h=Za(t,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?Xr(i[0]-i[1])*2*g:g,h&&c?c.map((y,x)=>{var E=r.map(y);return gt(E)?{coordinate:E+g,value:y,index:x,offset:g}:null}).filter(Jr):r.domain().map((y,x)=>{var E=r.map(y);return gt(E)?{coordinate:E+g,value:a?a[y]:y,index:x,offset:g}:null}).filter(Jr)}}},ao=de([Ot,Fn,QN,dq,cq,Tle,Cle,rr],Ple),YN=de([Q5,W5,qoe],(t,e,n)=>Y5(n.shared,t,e)),fq=t=>t.tooltip.settings.trigger,XN=t=>t.tooltip.settings.defaultIndex,Tm=de([Dd,YN,fq,XN],nq),Rc=de([Tm,zd,Nm,Am],KN),hq=de([ao,Rc],X5),mq=de([Tm],t=>{if(t)return t.dataKey});de([Tm],t=>{if(t)return t.graphicalItemId});var pq=de([Dd,YN,fq,XN],iq),Ile=de([eo,to,Ot,er,ao,XN,pq],rq),Ole=de([Tm,Ile],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Rle=de([Tm],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),kle=de([pq,Rc,ro,Nm,hq,sq,YN],aq),Dle=de([kle],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function Ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ak(Object(n),!0).forEach(function(r){Mle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mle(t,e,n){return(e=zle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zle(t){var e=Lle(t,"string");return typeof e=="symbol"?e:e+""}function Lle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qle=()=>Le(Fn),Ule=()=>{var t=qle(),e=Le(ao),n=Le(dq);return md(!t||!n?void 0:Tk(Tk({},t),{},{scale:n}),e)};function Ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(n),!0).forEach(function(r){Vle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vle(t,e,n){return(e=Ble(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ble(t){var e=$le(t,"string");return typeof e=="symbol"?e:e+""}function $le(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fle=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Hle=(t,e,n,r)=>{var i=e.find(h=>h&&h.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:c}=r;return zu(zu(zu({},r),hr(r.cx,r.cy,c,a)),{},{angle:a,radius:c})}var u=i.coordinate,{angle:f}=r;return zu(zu(zu({},r),hr(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Gle(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var gq=(t,e,n,r,i)=>{var a,c=(a=e?.length)!==null&&a!==void 0?a:0;if(c<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var f,h,p,g,y,x=u>0?(f=n[u-1])===null||f===void 0?void 0:f.coordinate:(h=n[c-1])===null||h===void 0?void 0:h.coordinate,E=(p=n[u])===null||p===void 0?void 0:p.coordinate,j=u>=c-1?(g=n[0])===null||g===void 0?void 0:g.coordinate:(y=n[u+1])===null||y===void 0?void 0:y.coordinate,N=void 0;if(!(x==null||E==null||j==null))if(Xr(E-x)!==Xr(j-E)){var A=[];if(Xr(j-E)===Xr(i[1]-i[0])){N=j;var R=E+i[1]-i[0];A[0]=Math.min(R,(R+x)/2),A[1]=Math.max(R,(R+x)/2)}else{N=x;var C=j+i[1]-i[0];A[0]=Math.min(E,(C+E)/2),A[1]=Math.max(E,(C+E)/2)}var P=[Math.min(E,(N+E)/2),Math.max(E,(N+E)/2)];if(t>P[0]&&t<=P[1]||t>=A[0]&&t<=A[1]){var M;return(M=n[u])===null||M===void 0?void 0:M.index}}else{var B=Math.min(x,j),D=Math.max(x,j);if(t>(B+E)/2&&t<=(D+E)/2){var O;return(O=n[u])===null||O===void 0?void 0:O.index}}}else if(e)for(var k=0;k<c;k++){var U=e[k];if(U!=null){var L=e[k+1],z=e[k-1];if(k===0&&L!=null&&t<=(U.coordinate+L.coordinate)/2||k===c-1&&z!=null&&t>(U.coordinate+z.coordinate)/2||k>0&&k<c-1&&z!=null&&L!=null&&t>(U.coordinate+z.coordinate)/2&&t<=(U.coordinate+L.coordinate)/2)return U.index}}return-1},Kle=()=>Le(PN),JN=(t,e)=>e,vq=(t,e,n)=>n,ZN=(t,e,n,r)=>r,Qle=de(ao,t=>By(t,e=>e.coordinate)),eS=de([Dd,JN,vq,ZN],nq),tS=de([eS,zd,Nm,Am],KN),Wle=(t,e,n)=>{if(e!=null){var r=Dd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},yq=de([Dd,JN,vq,ZN],iq),ey=de([eo,to,Ot,er,ao,ZN,yq],rq),Yle=de([eS,ey],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),bq=de([ao,tS],X5),Xle=de([yq,tS,ro,Nm,bq,sq,JN],aq),Jle=de([eS,tS],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Zle=(t,e,n,r,i,a,c)=>{if(!(!t||!n||!r||!i)&&Gle(t,c)){var u=Cte(t,e),f=gq(u,a,i,n,r),h=Fle(e,i,f,t);return{activeIndex:String(f),activeCoordinate:h}}},ece=(t,e,n,r,i,a,c)=>{if(!(!t||!r||!i||!a||!n)){var u=zre(t,n);if(u){var f=Pte(u,e),h=gq(f,c,a,r,i),p=Hle(e,a,h,u);return{activeIndex:String(h),activeCoordinate:p}}}},tce=(t,e,n,r,i,a,c,u)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?Zle(t,e,r,i,a,c,u):ece(t,e,n,r,i,a,c)},nce=de(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),rce=de(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Zn)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:zae}});function Pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ik(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pk(Object(n),!0).forEach(function(r){ice(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ice(t,e,n){return(e=sce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sce(t){var e=ace(t,"string");return typeof e=="symbol"?e:e+""}function ace(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oce={},lce={zIndexMap:Object.values(Zn).reduce((t,e)=>Ik(Ik({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),oce)},cce=new Set(Object.values(Zn));function uce(t){return cce.has(t)}var xq=ei({name:"zIndex",initialState:lce,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Zt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!uce(n)&&delete t.zIndexMap[n])},prepare:Zt()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Zt()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Zt()}}}),{registerZIndexPortal:dce,unregisterZIndexPortal:fce,registerZIndexPortalElement:hce,unregisterZIndexPortalElement:mce}=xq.actions,pce=xq.reducer;function Fi(t){var{zIndex:e,children:n}=t,r=lne(),i=r&&e!==void 0&&e!==0,a=Sr(),c=wn();_.useLayoutEffect(()=>i?(c(dce({zIndex:e})),()=>{c(fce({zIndex:e}))}):Uc,[c,e,i]);var u=Le(f=>nce(f,e,a));return i?u?iM.createPortal(n,u):null:n}function sw(){return sw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sw.apply(null,arguments)}function Ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(n),!0).forEach(function(r){gce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gce(t,e,n){return(e=vce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vce(t){var e=yce(t,"string");return typeof e=="symbol"?e:e+""}function yce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bce(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return _.isValidElement(e)?_.cloneElement(e,r):_.createElement(n,r)}function xce(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:c,layout:u,cursor:f,tooltipEventType:h,chartName:p}=t,g=n,y=r,x=i;if(!f||!g||p!=="ScatterChart"&&h!=="axis")return null;var E,j,N;if(p==="ScatterChart")E=g,j=Yne,N=Zn.cursorLine;else if(p==="BarChart")E=Xne(u,g,a,c),j=a6,N=Zn.cursorRectangle;else if(u==="radial"&&KL(g)){var{cx:A,cy:R,radius:C,startAngle:P,endAngle:M}=o6(g);E={cx:A,cy:R,startAngle:P,endAngle:M,innerRadius:C,outerRadius:C},j=c6,N=Zn.cursorLine}else E={points:Vre(u,g,a)},j=t6,N=Zn.cursorLine;var B=typeof f=="object"&&"className"in f?f.className:void 0,D=Eg(Eg(Eg(Eg({stroke:"#ccc",pointerEvents:"none"},a),E),fm(f)),{},{payload:y,payloadIndex:x,className:Ut("recharts-tooltip-cursor",B)});return _.createElement(Fi,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:N},_.createElement(bce,{cursor:f,cursorComp:j,cursorProps:D}))}function _ce(t){var e=Ule(),n=B3(),r=Vc(),i=Kle();return e==null||n==null||r==null||i==null?null:_.createElement(xce,sw({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var _q=_.createContext(null),jce=()=>_.useContext(_q),x1={exports:{}},Rk;function wce(){return Rk||(Rk=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function a(f,h,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,g||f,y),E=n?n+h:h;return f._events[E]?f._events[E].fn?f._events[E]=[f._events[E],x]:f._events[E].push(x):(f._events[E]=x,f._eventsCount++),f}function c(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)e.call(p,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=n?n+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,x=g.length,E=new Array(x);y<x;y++)E[y]=g[y].fn;return E},u.prototype.listenerCount=function(h){var p=n?n+h:h,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,p,g,y,x,E){var j=n?n+h:h;if(!this._events[j])return!1;var N=this._events[j],A=arguments.length,R,C;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),A){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,p),!0;case 3:return N.fn.call(N.context,p,g),!0;case 4:return N.fn.call(N.context,p,g,y),!0;case 5:return N.fn.call(N.context,p,g,y,x),!0;case 6:return N.fn.call(N.context,p,g,y,x,E),!0}for(C=1,R=new Array(A-1);C<A;C++)R[C-1]=arguments[C];N.fn.apply(N.context,R)}else{var P=N.length,M;for(C=0;C<P;C++)switch(N[C].once&&this.removeListener(h,N[C].fn,void 0,!0),A){case 1:N[C].fn.call(N[C].context);break;case 2:N[C].fn.call(N[C].context,p);break;case 3:N[C].fn.call(N[C].context,p,g);break;case 4:N[C].fn.call(N[C].context,p,g,y);break;default:if(!R)for(M=1,R=new Array(A-1);M<A;M++)R[M-1]=arguments[M];N[C].fn.apply(N[C].context,R)}}return!0},u.prototype.on=function(h,p,g){return a(this,h,p,g,!1)},u.prototype.once=function(h,p,g){return a(this,h,p,g,!0)},u.prototype.removeListener=function(h,p,g,y){var x=n?n+h:h;if(!this._events[x])return this;if(!p)return c(this,x),this;var E=this._events[x];if(E.fn)E.fn===p&&(!y||E.once)&&(!g||E.context===g)&&c(this,x);else{for(var j=0,N=[],A=E.length;j<A;j++)(E[j].fn!==p||y&&!E[j].once||g&&E[j].context!==g)&&N.push(E[j]);N.length?this._events[x]=N.length===1?N[0]:N:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&c(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(x1)),x1.exports}var Ece=wce();const Nce=ra(Ece);var Gh=new Nce,aw="recharts.syncEvent.tooltip",kk="recharts.syncEvent.brush",jq=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Zs(n))return t[n]}},Sce={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},wq=ei({name:"options",initialState:Sce,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Ace=wq.reducer,{createEventEmitter:Tce}=wq.actions;function Cce(t){return t.tooltip.syncInteraction}var Pce={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Eq=ei({name:"chartData",initialState:Pce,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:Dk,setDataStartEndIndexes:Ice,setComputedData:qve}=Eq.actions,Oce=Eq.reducer,Rce=["x","y"];function Mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(n),!0).forEach(function(r){kce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kce(t,e,n){return(e=Dce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dce(t){var e=Mce(t,"string");return typeof e=="symbol"?e:e+""}function Mce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zce(t,e){if(t==null)return{};var n,r,i=Lce(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function qce(){var t=Le(IN),e=Le(ON),n=wn(),r=Le(s5),i=Le(ao),a=Vc(),c=r0(),u=Le(f=>f.rootProps.className);_.useEffect(()=>{if(t==null)return Uc;var f=(h,p,g)=>{if(e!==g&&t===h){if(r==="index"){var y;if(c&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var x=p.payload.coordinate,{x:E,y:j}=x,N=zce(x,Rce),{x:A,y:R,width:C,height:P}=p.payload.sourceViewBox,M=Lu(Lu({},N),{},{x:c.x+(C?(E-A)/C:0)*c.width,y:c.y+(P?(j-R)/P:0)*c.height});n(Lu(Lu({},p),{},{payload:Lu(Lu({},p.payload),{},{coordinate:M})}))}else n(p);return}if(i!=null){var B;if(typeof r=="function"){var D={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},O=r(i,D);B=i[O]}else r==="value"&&(B=i.find(H=>String(H.value)===p.payload.label));var{coordinate:k}=p.payload;if(B==null||p.payload.active===!1||k==null||c==null){n(rw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:U,y:L}=k,z=Math.min(U,c.x+c.width),V=Math.min(L,c.y+c.height),ge={x:a==="horizontal"?B.coordinate:z,y:a==="horizontal"?V:B.coordinate},Z=rw({active:p.payload.active,coordinate:ge,dataKey:p.payload.dataKey,index:String(B.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});n(Z)}}};return Gh.on(aw,f),()=>{Gh.off(aw,f)}},[u,n,e,t,r,i,a,c])}function Uce(){var t=Le(IN),e=Le(ON),n=wn();_.useEffect(()=>{if(t==null)return Uc;var r=(i,a,c)=>{e!==c&&t===i&&n(Ice(a))};return Gh.on(kk,r),()=>{Gh.off(kk,r)}},[n,e,t])}function Vce(){var t=wn();_.useEffect(()=>{t(Tce())},[t]),qce(),Uce()}function Bce(t,e,n,r,i,a){var c=Le(x=>Wle(x,t,e)),u=Le(ON),f=Le(IN),h=Le(s5),p=Le(Cce),g=p?.active,y=r0();_.useEffect(()=>{if(!g&&f!=null&&u!=null){var x=rw({active:a,coordinate:n,dataKey:c,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:y,graphicalItemId:void 0});Gh.emit(aw,f,x,u)}},[g,n,c,i,r,u,f,h,a,y])}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){$ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ce(t,e,n){return(e=Fce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fce(t){var e=Hce(t,"string");return typeof e=="symbol"?e:e+""}function Hce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gce(t){return t.dataKey}function Kce(t,e){return _.isValidElement(t)?_.cloneElement(t,e):typeof t=="function"?_.createElement(t,e):_.createElement(Cne,e)}var qk=[],Qce={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Uk(t){var e,n,r=Mr(t,Qce),{active:i,allowEscapeViewBox:a,animationDuration:c,animationEasing:u,content:f,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:y,position:x,reverseDirection:E,useTranslate3d:j,wrapperStyle:N,cursor:A,shared:R,trigger:C,defaultIndex:P,portal:M,axisId:B}=r,D=wn(),O=typeof P=="number"?String(P):P;_.useEffect(()=>{D(Foe({shared:R,trigger:C,axisId:B,active:i,defaultIndex:O}))},[D,R,C,B,i,O]);var k=r0(),U=e6(),L=Loe(R),{activeIndex:z,isActive:V}=(e=Le(ce=>Jle(ce,L,C,O)))!==null&&e!==void 0?e:{},ge=Le(ce=>Xle(ce,L,C,O)),Z=Le(ce=>bq(ce,L,C,O)),H=Le(ce=>Yle(ce,L,C,O)),ae=ge,X=jce(),we=(n=i??V)!==null&&n!==void 0?n:!1,[W,F]=mee([ae,we]),ne=L==="axis"?Z:void 0;Bce(L,C,H,ne,z,we);var ue=M??X;if(ue==null||k==null||L==null)return null;var ve=ae??qk;we||(ve=qk),h&&ve.length&&(ve=UZ(ve.filter(ce=>ce.value!=null&&(ce.hide!==!0||r.includeHidden)),y,Gce));var fe=ve.length>0,G=_.createElement(Mne,{allowEscapeViewBox:a,animationDuration:c,animationEasing:u,isAnimationActive:p,active:we,coordinate:H,hasPayload:fe,offset:g,position:x,reverseDirection:E,useTranslate3d:j,viewBox:k,wrapperStyle:N,lastBoundingBox:W,innerRef:F,hasPortalFromProps:!!M},Kce(f,Lk(Lk({},r),{},{payload:ve,label:ne,active:we,activeIndex:z,coordinate:H,accessibilityLayer:U})));return _.createElement(_.Fragment,null,iM.createPortal(G,ue),we&&_.createElement(_ce,{cursor:A,tooltipEventType:L,coordinate:H,payload:ve,index:z}))}var nS=t=>null;nS.displayName="Cell";function Wce(t,e,n){return(e=Yce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yce(t){var e=Xce(t,"string");return typeof e=="symbol"?e:e+""}function Xce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Jce{constructor(e){Wce(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(n),!0).forEach(function(r){eue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eue(t,e,n){return(e=tue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tue(t){var e=nue(t,"string");return typeof e=="symbol"?e:e+""}function nue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rue={cacheSize:2e3,enableCache:!0},Nq=Zce({},rue),Bk=new Jce(Nq.cacheSize),iue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$k="recharts_measurement_span";function sue(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",c=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(c,"|").concat(u)}var Fk=(t,e)=>{try{var n=document.getElementById($k);n||(n=document.createElement("span"),n.setAttribute("id",$k),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,iue,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},yh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||o0.isSsr)return{width:0,height:0};if(!Nq.enableCache)return Fk(e,n);var r=sue(e,n),i=Bk.get(r);if(i)return i;var a=Fk(e,n);return Bk.set(r,a),a},Sq;function aue(t,e,n){return(e=oue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oue(t){var e=lue(t,"string");return typeof e=="symbol"?e:e+""}function lue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Gk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,due={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},fue=["cm","mm","pt","pc","in","Q","px"];function hue(t){return fue.includes(t)}var Ku="NaN";function mue(t,e){return t*due[e]}class ur{static parse(e){var n,[,r,i]=(n=uue.exec(e))!==null&&n!==void 0?n:[];return r==null?ur.NaN:new ur(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Zs(e)&&(this.unit=""),n!==""&&!cue.test(n)&&(this.num=NaN,this.unit=""),hue(n)&&(this.num=mue(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ur(NaN,""):new ur(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ur(NaN,""):new ur(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ur(NaN,""):new ur(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ur(NaN,""):new ur(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zs(this.num)}}Sq=ur;aue(ur,"NaN",new Sq(NaN,""));function Aq(t){if(t==null||t.includes(Ku))return Ku;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=Hk.exec(e))!==null&&n!==void 0?n:[],c=ur.parse(r??""),u=ur.parse(a??""),f=i==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Ku;e=e.replace(Hk,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,p,g,y]=(h=Gk.exec(e))!==null&&h!==void 0?h:[],x=ur.parse(p??""),E=ur.parse(y??""),j=g==="+"?x.add(E):x.subtract(E);if(j.isNaN())return Ku;e=e.replace(Gk,j.toString())}return e}var Kk=/\(([^()]*)\)/;function pue(t){for(var e=t,n;(n=Kk.exec(e))!=null;){var[,r]=n;e=e.replace(Kk,Aq(r))}return e}function gue(t){var e=t.replace(/\s+/g,"");return e=pue(e),e=Aq(e),e}function vue(t){try{return gue(t)}catch{return Ku}}function _1(t){var e=vue(t.slice(5,-1));return e===Ku?"":e}var yue=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],bue=["dx","dy","angle","className","breakAll"];function ow(){return ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ow.apply(null,arguments)}function Qk(t,e){if(t==null)return{};var n,r,i=xue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Tq=/[ \f\n\r\t\v\u2028\u2029]+/,Cq=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];an(e)||(n?i=e.toString().split(""):i=e.toString().split(Tq));var a=i.map(u=>({word:u,width:yh(u,r).width})),c=n?0:yh("",r).width;return{wordsWithComputedWidth:a,spaceWidth:c}}catch{return null}};function _ue(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Pq=(t,e,n,r)=>t.reduce((i,a)=>{var{word:c,width:u}=a,f=i[i.length-1];if(f&&u!=null&&(e==null||r||f.width+u+n<Number(e)))f.words.push(c),f.width+=u+n;else{var h={words:[c],width:u};i.push(h)}return i},[]),Iq=t=>t.reduce((e,n)=>e.width>n.width?e:n),jue="",Wk=(t,e,n,r,i,a,c,u)=>{var f=t.slice(0,e),h=Cq({breakAll:n,style:r,children:f+jue});if(!h)return[!1,[]];var p=Pq(h.wordsWithComputedWidth,a,c,u),g=p.length>i||Iq(p).width>Number(a);return[g,p]},wue=(t,e,n,r,i)=>{var{maxLines:a,children:c,style:u,breakAll:f}=t,h=Re(a),p=String(c),g=Pq(e,r,n,i);if(!h||i)return g;var y=g.length>a||Iq(g).width>Number(r);if(!y)return g;for(var x=0,E=p.length-1,j=0,N;x<=E&&j<=p.length-1;){var A=Math.floor((x+E)/2),R=A-1,[C,P]=Wk(p,R,f,u,a,r,n,i),[M]=Wk(p,A,f,u,a,r,n,i);if(!C&&!M&&(x=A+1),C&&M&&(E=A-1),!C&&M){N=P;break}j++}return N||g},Yk=t=>{var e=an(t)?[]:t.toString().split(Tq);return[{words:e,width:void 0}]},Eue=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:c}=t;if((e||n)&&!o0.isSsr){var u,f,h=Cq({breakAll:a,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;u=p,f=g}else return Yk(r);return wue({breakAll:a,children:r,maxLines:c,style:i},u,f,e,!!n)}return Yk(r)},Oq="#808080",Nue={angle:0,breakAll:!1,capHeight:"0.71em",fill:Oq,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},rS=_.forwardRef((t,e)=>{var n=Mr(t,Nue),{x:r,y:i,lineHeight:a,capHeight:c,fill:u,scaleToFit:f,textAnchor:h,verticalAnchor:p}=n,g=Qk(n,yue),y=_.useMemo(()=>Eue({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),{dx:x,dy:E,angle:j,className:N,breakAll:A}=g,R=Qk(g,bue);if(!ea(r)||!ea(i)||y.length===0)return null;var C=Number(r)+(Re(x)?x:0),P=Number(i)+(Re(E)?E:0);if(!gt(C)||!gt(P))return null;var M;switch(p){case"start":M=_1("calc(".concat(c,")"));break;case"middle":M=_1("calc(".concat((y.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:M=_1("calc(".concat(y.length-1," * -").concat(a,")"));break}var B=[],D=y[0];if(f&&D!=null){var O=D.width,{width:k}=g;B.push("scale(".concat(Re(k)&&Re(O)?k/O:1,")"))}return j&&B.push("rotate(".concat(j,", ").concat(C,", ").concat(P,")")),B.length&&(R.transform=B.join(" ")),_.createElement("text",ow({},kr(R),{ref:e,x:C,y:P,className:Ut("recharts-text",N),textAnchor:h,fill:u.includes("url")?Oq:u}),y.map((U,L)=>{var z=U.words.join(A?"":" ");return _.createElement("tspan",{x:C,dy:L===0?M:a,key:"".concat(z,"-").concat(L)},z)}))});rS.displayName="Text";function Xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xk(Object(n),!0).forEach(function(r){Sue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sue(t,e,n){return(e=Aue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aue(t){var e=Tue(t,"string");return typeof e=="symbol"?e:e+""}function Tue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cue=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:c,height:u,upperWidth:f,lowerWidth:h}=tN(e),p=a,g=a+(f-h)/2,y=(p+g)/2,x=(f+h)/2,E=p+f/2,j=u>=0?1:-1,N=j*r,A=j>0?"end":"start",R=j>0?"start":"end",C=f>=0?1:-1,P=C*r,M=C>0?"end":"start",B=C>0?"start":"end",D=i;if(n==="top"){var O={x:p+f/2,y:c-N,horizontalAnchor:"middle",verticalAnchor:A};return D&&(O.height=Math.max(c-D.y,0),O.width=f),O}if(n==="bottom"){var k={x:g+h/2,y:c+u+N,horizontalAnchor:"middle",verticalAnchor:R};return D&&(k.height=Math.max(D.y+D.height-(c+u),0),k.width=h),k}if(n==="left"){var U={x:y-P,y:c+u/2,horizontalAnchor:M,verticalAnchor:"middle"};return D&&(U.width=Math.max(U.x-D.x,0),U.height=u),U}if(n==="right"){var L={x:y+x+P,y:c+u/2,horizontalAnchor:B,verticalAnchor:"middle"};return D&&(L.width=Math.max(D.x+D.width-L.x,0),L.height=u),L}var z=D?{width:x,height:u}:{};return n==="insideLeft"?zs({x:y+P,y:c+u/2,horizontalAnchor:B,verticalAnchor:"middle"},z):n==="insideRight"?zs({x:y+x-P,y:c+u/2,horizontalAnchor:M,verticalAnchor:"middle"},z):n==="insideTop"?zs({x:p+f/2,y:c+N,horizontalAnchor:"middle",verticalAnchor:R},z):n==="insideBottom"?zs({x:g+h/2,y:c+u-N,horizontalAnchor:"middle",verticalAnchor:A},z):n==="insideTopLeft"?zs({x:p+P,y:c+N,horizontalAnchor:B,verticalAnchor:R},z):n==="insideTopRight"?zs({x:p+f-P,y:c+N,horizontalAnchor:M,verticalAnchor:R},z):n==="insideBottomLeft"?zs({x:g+P,y:c+u-N,horizontalAnchor:B,verticalAnchor:A},z):n==="insideBottomRight"?zs({x:g+h-P,y:c+u-N,horizontalAnchor:M,verticalAnchor:A},z):n&&typeof n=="object"&&(Re(n.x)||Tc(n.x))&&(Re(n.y)||Tc(n.y))?zs({x:a+ms(n.x,x),y:c+ms(n.y,u),horizontalAnchor:"end",verticalAnchor:"end"},z):zs({x:E,y:c+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},z)},Pue=["labelRef"],Iue=["content"];function Jk(t,e){if(t==null)return{};var n,r,i=Oue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Oue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ch(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zk(Object(n),!0).forEach(function(r){Rue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rue(t,e,n){return(e=kue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kue(t){var e=Due(t,"string");return typeof e=="symbol"?e:e+""}function Due(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ta.apply(null,arguments)}var Rq=_.createContext(null),Mue=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:c,children:u}=t,f=_.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:c}),[e,n,r,i,a,c]);return _.createElement(Rq.Provider,{value:f},u)},kq=()=>{var t=_.useContext(Rq),e=r0();return t||(e?tN(e):void 0)},zue=_.createContext(null),Lue=()=>{var t=_.useContext(zue),e=Le(u5);return t||e},que=t=>{var{value:e,formatter:n}=t,r=an(t.children)?e:t.children;return typeof n=="function"?n(r):r},iS=t=>t!=null&&typeof t=="function",Uue=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Vue=(t,e,n,r,i)=>{var{offset:a,className:c}=t,{cx:u,cy:f,innerRadius:h,outerRadius:p,startAngle:g,endAngle:y,clockWise:x}=i,E=(h+p)/2,j=Uue(g,y),N=j>=0?1:-1,A,R;switch(e){case"insideStart":A=g+N*a,R=x;break;case"insideEnd":A=y-N*a,R=!x;break;case"end":A=y+N*a,R=x;break;default:throw new Error("Unsupported position ".concat(e))}R=j<=0?R:!R;var C=hr(u,f,E,A),P=hr(u,f,E,A+(R?1:-1)*359),M="M".concat(C.x,",").concat(C.y,`
    A`).concat(E,",").concat(E,",0,1,").concat(R?0:1,`,
    `).concat(P.x,",").concat(P.y),B=an(t.id)?Rh("recharts-radial-line-"):t.id;return _.createElement("text",Ta({},r,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",c)}),_.createElement("defs",null,_.createElement("path",{id:B,d:M})),_.createElement("textPath",{xlinkHref:"#".concat(B)},n))},Bue=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:c,startAngle:u,endAngle:f}=t,h=(u+f)/2;if(n==="outside"){var{x:p,y:g}=hr(r,i,c+e,h);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(a+c)/2,{x,y:E}=hr(r,i,y,h);return{x,y:E,textAnchor:"middle",verticalAnchor:"middle"}},Fg=t=>t!=null&&"cx"in t&&Re(t.cx),$ue={angle:0,offset:5,zIndex:Zn.label,position:"middle",textBreakAll:!1};function Fue(t){if(!Fg(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function Ho(t){var e=Mr(t,$ue),{viewBox:n,parentViewBox:r,position:i,value:a,children:c,content:u,className:f="",textBreakAll:h,labelRef:p}=e,g=Lue(),y=kq(),x=i==="center"?y:g??y,E,j,N;n==null?E=x:Fg(n)?E=n:E=tN(n);var A=Fue(E);if(!E||an(a)&&an(c)&&!_.isValidElement(u)&&typeof u!="function")return null;var R=ch(ch({},e),{},{viewBox:E});if(_.isValidElement(u)){var{labelRef:C}=R,P=Jk(R,Pue);return _.cloneElement(u,P)}if(typeof u=="function"){var{content:M}=R,B=Jk(R,Iue);if(j=_.createElement(u,B),_.isValidElement(j))return j}else j=que(e);var D=kr(e);if(Fg(E)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Vue(e,i,j,D,E);N=Bue(E,e.offset,e.position)}else{if(!A)return null;var O=Cue({viewBox:A,position:i,offset:e.offset,parentViewBox:Fg(r)?void 0:r});N=ch(ch({x:O.x,y:O.y,textAnchor:O.horizontalAnchor,verticalAnchor:O.verticalAnchor},O.width!==void 0?{width:O.width}:{}),O.height!==void 0?{height:O.height}:{})}return _.createElement(Fi,{zIndex:e.zIndex},_.createElement(rS,Ta({ref:p,className:Ut("recharts-label",f)},D,N,{textAnchor:_ue(D.textAnchor)?D.textAnchor:N.textAnchor,breakAll:h}),j))}Ho.displayName="Label";var Hue=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?_.createElement(Ho,Ta({key:"label-implicit"},r)):ea(t)?_.createElement(Ho,Ta({key:"label-implicit",value:t},r)):_.isValidElement(t)?t.type===Ho?_.cloneElement(t,ch({key:"label-implicit"},r)):_.createElement(Ho,Ta({key:"label-implicit",content:t},r)):iS(t)?_.createElement(Ho,Ta({key:"label-implicit",content:t},r)):t&&typeof t=="object"?_.createElement(Ho,Ta({},t,{key:"label-implicit"},r)):null};function Gue(t){var{label:e,labelRef:n}=t,r=kq();return Hue(e,r,n)||null}var j1={},w1={},eD;function Kue(){return eD||(eD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(w1)),w1}var E1={},tD;function Que(){return tD||(tD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(E1)),E1}var nD;function Wue(){return nD||(nD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kue(),n=Que(),r=FE();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(j1)),j1}var N1,rD;function Yue(){return rD||(rD=1,N1=Wue().last),N1}var Xue=Yue();const Jue=ra(Xue);var Zue=["valueAccessor"],ede=["dataKey","clockWise","id","textBreakAll","zIndex"];function ty(){return ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ty.apply(null,arguments)}function iD(t,e){if(t==null)return{};var n,r,i=tde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var nde=t=>Array.isArray(t.value)?Jue(t.value):t.value,Dq=_.createContext(void 0),Mq=Dq.Provider,zq=_.createContext(void 0);zq.Provider;function rde(){return _.useContext(Dq)}function ide(){return _.useContext(zq)}function Hg(t){var{valueAccessor:e=nde}=t,n=iD(t,Zue),{dataKey:r,clockWise:i,id:a,textBreakAll:c,zIndex:u}=n,f=iD(n,ede),h=rde(),p=ide(),g=h||p;return!g||!g.length?null:_.createElement(Fi,{zIndex:u??Zn.label},_.createElement(qi,{className:"recharts-label-list"},g.map((y,x)=>{var E,j=an(r)?e(y,x):Dn(y.payload,r),N=an(a)?{}:{id:"".concat(a,"-").concat(x)};return _.createElement(Ho,ty({key:"label-".concat(x)},kr(y),f,N,{fill:(E=n.fill)!==null&&E!==void 0?E:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:c,viewBox:y.viewBox,index:x,zIndex:0}))})))}Hg.displayName="LabelList";function Lq(t){var{label:e}=t;return e?e===!0?_.createElement(Hg,{key:"labelList-implicit"}):_.isValidElement(e)||iS(e)?_.createElement(Hg,{key:"labelList-implicit",content:e}):typeof e=="object"?_.createElement(Hg,ty({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function lw(){return lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lw.apply(null,arguments)}var qq=t=>{var{cx:e,cy:n,r,className:i}=t,a=Ut("recharts-dot",i);return Re(e)&&Re(n)&&Re(r)?_.createElement("circle",lw({},hs(t),BE(t),{className:a,cx:e,cy:n,r})):null},sde={radiusAxis:{},angleAxis:{}},Uq=ei({name:"polarAxis",initialState:sde,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Uve,removeRadiusAxis:Vve,addAngleAxis:Bve,removeAngleAxis:$ve}=Uq.actions,ade=Uq.reducer;function ode(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var S1={exports:{}},qt={};var sD;function lde(){if(sD)return qt;sD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function E(j){if(typeof j=="object"&&j!==null){var N=j.$$typeof;switch(N){case t:switch(j=j.type,j){case n:case i:case r:case f:case h:case y:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case g:case p:return j;case a:return j;default:return N}}case e:return N}}}return qt.ContextConsumer=a,qt.ContextProvider=c,qt.Element=t,qt.ForwardRef=u,qt.Fragment=n,qt.Lazy=g,qt.Memo=p,qt.Portal=e,qt.Profiler=i,qt.StrictMode=r,qt.Suspense=f,qt.SuspenseList=h,qt.isContextConsumer=function(j){return E(j)===a},qt.isContextProvider=function(j){return E(j)===c},qt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},qt.isForwardRef=function(j){return E(j)===u},qt.isFragment=function(j){return E(j)===n},qt.isLazy=function(j){return E(j)===g},qt.isMemo=function(j){return E(j)===p},qt.isPortal=function(j){return E(j)===e},qt.isProfiler=function(j){return E(j)===i},qt.isStrictMode=function(j){return E(j)===r},qt.isSuspense=function(j){return E(j)===f},qt.isSuspenseList=function(j){return E(j)===h},qt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===i||j===r||j===f||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===p||j.$$typeof===c||j.$$typeof===a||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},qt.typeOf=E,qt}var aD;function cde(){return aD||(aD=1,S1.exports=lde()),S1.exports}var ude=cde(),oD=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",lD=null,A1=null,Vq=t=>{if(t===lD&&Array.isArray(A1))return A1;var e=[];return _.Children.forEach(t,n=>{an(n)||(ude.isFragment(n)?e=e.concat(Vq(n.props.children)):e.push(n))}),A1=e,lD=t,e};function dde(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>oD(i)):r=[oD(e)],Vq(t).forEach(i=>{var a=fd(i,"type.displayName")||fd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var Bq=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,T1={},cD;function fde(){return cD||(cD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(T1)),T1}var C1,uD;function hde(){return uD||(uD=1,C1=fde().isPlainObject),C1}var mde=hde();const pde=ra(mde);var dD,fD,hD,mD,pD;function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){gde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gde(t,e,n){return(e=vde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vde(t){var e=yde(t,"string");return typeof e=="symbol"?e:e+""}function yde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ny(){return ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ny.apply(null,arguments)}function Xf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var yD=(t,e,n,r,i)=>{var a=n-r,c;return c=hn(dD||(dD=Xf(["M ",",",""])),t,e),c+=hn(fD||(fD=Xf(["L ",",",""])),t+n,e),c+=hn(hD||(hD=Xf(["L ",",",""])),t+n-a/2,e+i),c+=hn(mD||(mD=Xf(["L ",",",""])),t+n-a/2-r,e+i),c+=hn(pD||(pD=Xf(["L ",","," Z"])),t,e),c},bde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xde=t=>{var e=Mr(t,bde),{x:n,y:r,upperWidth:i,lowerWidth:a,height:c,className:u}=e,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=e,y=_.useRef(null),[x,E]=_.useState(-1),j=_.useRef(i),N=_.useRef(a),A=_.useRef(c),R=_.useRef(n),C=_.useRef(r),P=c0(t,"trapezoid-");if(_.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ge=y.current.getTotalLength();ge&&E(ge)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||c!==+c||i===0&&a===0||c===0)return null;var M=Ut("recharts-trapezoid",u);if(!g)return _.createElement("g",null,_.createElement("path",ny({},kr(e),{className:M,d:yD(n,r,i,a,c)})));var B=j.current,D=N.current,O=A.current,k=R.current,U=C.current,L="0px ".concat(x===-1?1:x,"px"),z="".concat(x,"px 0px"),V=n6(["strokeDasharray"],h,f);return _.createElement(l0,{animationId:P,key:P,canBegin:x>0,duration:h,easing:f,isActive:g,begin:p},ge=>{var Z=mn(B,i,ge),H=mn(D,a,ge),ae=mn(O,c,ge),X=mn(k,n,ge),we=mn(U,r,ge);y.current&&(j.current=Z,N.current=H,A.current=ae,R.current=X,C.current=we);var W=ge>0?{transition:V,strokeDasharray:z}:{strokeDasharray:L};return _.createElement("path",ny({},kr(e),{className:M,d:yD(X,we,Z,H,ae),ref:y,style:vD(vD({},W),e.style)}))})},_de=["option","shapeType","activeClassName"];function jde(t,e){if(t==null)return{};var n,r,i=wde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){Ede(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ede(t,e,n){return(e=Nde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nde(t){var e=Sde(t,"string");return typeof e=="symbol"?e:e+""}function Sde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ade(t,e){return ry(ry({},e),t)}function Tde(t,e){return t==="symbols"}function xD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return _.createElement(a6,n);case"trapezoid":return _.createElement(xde,n);case"sector":return _.createElement(c6,n);case"symbols":if(Tde(e))return _.createElement(GL,n);break;case"curve":return _.createElement(t6,n);default:return null}}function Cde(t){return _.isValidElement(t)?t.props:t}function $q(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=jde(t,_de),a;if(_.isValidElement(e))a=_.cloneElement(e,ry(ry({},i),Cde(e)));else if(typeof e=="function")a=e(i,i.index);else if(pde(e)&&typeof e!="boolean"){var c=Ade(e,i);a=_.createElement(xD,{shapeType:n,elementProps:c})}else{var u=i;a=_.createElement(xD,{shapeType:n,elementProps:u})}return i.isActive?_.createElement(qi,{className:r},a):a}var Fq=(t,e,n)=>{var r=wn();return(i,a)=>c=>{t?.(i,a,c),r(Z5({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Hq=t=>{var e=wn();return(n,r)=>i=>{t?.(n,r,i),e(Hoe())}},Gq=(t,e,n)=>{var r=wn();return(i,a)=>c=>{t?.(i,a,c),r(Goe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function Kq(t){var{tooltipEntrySettings:e}=t,n=wn(),r=Sr(),i=_.useRef(null);return _.useLayoutEffect(()=>{r||(i.current===null?n(Voe(e)):i.current!==e&&n(Boe({prev:i.current,next:e})),i.current=e)},[e,n,r]),_.useLayoutEffect(()=>()=>{i.current&&(n($oe(i.current)),i.current=null)},[n]),null}function Qq(t){var{legendPayload:e}=t,n=wn(),r=Sr(),i=_.useRef(null);return _.useLayoutEffect(()=>{r||(i.current===null?n(_ne(e)):i.current!==e&&n(jne({prev:i.current,next:e})),i.current=e)},[n,r,e]),_.useLayoutEffect(()=>()=>{i.current&&(n(wne(i.current)),i.current=null)},[n]),null}var P1,Pde=()=>{var[t]=_.useState(()=>Rh("uid-"));return t},Ide=(P1=nM.useId)!==null&&P1!==void 0?P1:Pde;function Ode(t,e){var n=Ide();return e||(t?"".concat(t,"-").concat(n):n)}var Rde=_.createContext(void 0),Wq=t=>{var{id:e,type:n,children:r}=t,i=Ode("recharts-".concat(n),e);return _.createElement(Rde.Provider,{value:i},r(i))},kde={cartesianItems:[],polarItems:[]},Yq=ei({name:"graphicalItems",initialState:kde,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Zt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=us(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Zt()},removeCartesianGraphicalItem:{reducer(t,e){var n=us(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Zt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Zt()},removePolarGraphicalItem:{reducer(t,e){var n=us(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Zt()}}}),{addCartesianGraphicalItem:Dde,replaceCartesianGraphicalItem:Mde,removeCartesianGraphicalItem:zde,addPolarGraphicalItem:Fve,removePolarGraphicalItem:Hve}=Yq.actions,Lde=Yq.reducer,qde=t=>{var e=wn(),n=_.useRef(null);return _.useLayoutEffect(()=>{n.current===null?e(Dde(t)):n.current!==t&&e(Mde({prev:n.current,next:t})),n.current=t},[e,t]),_.useLayoutEffect(()=>()=>{n.current&&(e(zde(n.current)),n.current=null)},[e]),null},Xq=_.memo(qde),Ude=["points"];function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_D(Object(n),!0).forEach(function(r){Vde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vde(t,e,n){return(e=Bde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bde(t){var e=$de(t,"string");return typeof e=="symbol"?e:e+""}function $de(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iy(){return iy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iy.apply(null,arguments)}function Fde(t,e){if(t==null)return{};var n,r,i=Hde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Gde(t){var{option:e,dotProps:n,className:r}=t;if(_.isValidElement(e))return _.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Ut(r,typeof e!="boolean"?e.className:""),a=n??{},{points:c}=a,u=Fde(a,Ude);return _.createElement(qq,iy({},u,{className:i}))}function Kde(t,e){return t==null?!1:e?!0:t.length===1}function Qde(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:c,needClip:u,clipPathId:f,zIndex:h=Zn.scatter}=t;if(!Kde(e,n))return null;var p=Bq(n),g=fJ(n),y=e.map((E,j)=>{var N,A,R=I1(I1(I1({r:3},c),g),{},{index:j,cx:(N=E.x)!==null&&N!==void 0?N:void 0,cy:(A=E.y)!==null&&A!==void 0?A:void 0,dataKey:a,value:E.value,payload:E.payload,points:e});return _.createElement(Gde,{key:"dot-".concat(j),option:n,dotProps:R,className:i})}),x={};return u&&f!=null&&(x.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(f,")")),_.createElement(Fi,{zIndex:h},_.createElement(qi,iy({className:r},x),y))}function jD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jD(Object(n),!0).forEach(function(r){Wde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wde(t,e,n){return(e=Yde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yde(t){var e=Xde(t,"string");return typeof e=="symbol"?e:e+""}function Xde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jq=0,Jde={xAxis:{},yAxis:{},zAxis:{}},Zq=ei({name:"cartesianAxis",initialState:Jde,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Zt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Zt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Zt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Zt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Zt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Zt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Zt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Zt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Zt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,c=i.widthHistory||[];if(c.length===3&&c[0]===c[2]&&r===c[1]&&r!==i.width&&Math.abs(r-((a=c[0])!==null&&a!==void 0?a:0))<=1)return;var u=[...c,r].slice(-3);t.yAxis[n]=wD(wD({},i),{},{width:r,widthHistory:u})}}}}),{addXAxis:Zde,replaceXAxis:efe,removeXAxis:tfe,addYAxis:nfe,replaceYAxis:rfe,removeYAxis:ife,addZAxis:Gve,replaceZAxis:Kve,removeZAxis:Qve,updateYAxisWidth:sfe}=Zq.actions,afe=Zq.reducer,ofe=de([er],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),lfe=de([ofe,eo,to],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),sS=()=>Le(lfe),cfe=()=>Le(Dle);function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){ufe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ufe(t,e,n){return(e=dfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dfe(t){var e=ffe(t,"string");return typeof e=="symbol"?e:e+""}function ffe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hfe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:c}=t;if(i===!1||e.x==null||e.y==null)return null;var u={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},f=O1(O1(O1({},u),fm(i)),BE(i)),h;return _.isValidElement(i)?h=_.cloneElement(i,f):typeof i=="function"?h=i(f):h=_.createElement(qq,f),_.createElement(qi,{className:"recharts-active-dot",clipPath:c},h)};function mfe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:c=Zn.activeDot}=t,u=Le(Rc),f=cfe();if(e==null||f==null)return null;var h=e.find(p=>f.includes(p.payload));return an(h)?null:_.createElement(Fi,{zIndex:c},_.createElement(hfe,{point:h,childIndex:Number(u),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var ND=(t,e,n)=>{var r=n??t;if(!an(r))return ms(r,e,0)},pfe=(t,e,n)=>{var r={},i=t.filter(_0),a=t.filter(h=>h.stackId==null),c=i.reduce((h,p)=>{var g=h[p.stackId];return g==null&&(g=[]),g.push(p),h[p.stackId]=g,h},r),u=Object.entries(c).map(h=>{var p,[g,y]=h,x=y.map(j=>j.dataKey),E=ND(e,n,(p=y[0])===null||p===void 0?void 0:p.barSize);return{stackId:g,dataKeys:x,barSize:E}}),f=a.map(h=>{var p=[h.dataKey].filter(y=>y!=null),g=ND(e,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...f]};function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ng(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){gfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gfe(t,e,n){return(e=vfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vfe(t){var e=yfe(t,"string");return typeof e=="symbol"?e:e+""}function yfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bfe(t,e,n,r,i){var a,c=r.length;if(!(c<1)){var u=ms(t,n,0,!0),f,h=[];if(gt((a=r[0])===null||a===void 0?void 0:a.barSize)){var p=!1,g=n/c,y=r.reduce((R,C)=>R+(C.barSize||0),0);y+=(c-1)*u,y>=n&&(y-=(c-1)*u,u=0),y>=n&&g>0&&(p=!0,g*=.9,y=c*g);var x=(n-y)/2>>0,E={offset:x-u,size:0};f=r.reduce((R,C)=>{var P,M={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:E.offset+E.size+u,size:p?g:(P=C.barSize)!==null&&P!==void 0?P:0}},B=[...R,M];return E=M.position,B},h)}else{var j=ms(e,n,0,!0);n-2*j-(c-1)*u<=0&&(u=0);var N=(n-2*j-(c-1)*u)/c;N>1&&(N>>=0);var A=gt(i)?Math.min(N,i):N;f=r.reduce((R,C,P)=>[...R,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:j+(N+u)*P+(N-A)/2,size:A}}],h)}return f}}var xfe=(t,e,n,r,i,a,c)=>{var u=an(c)?e:c,f=bfe(n,r,i!==a?i:a,t,u);return i!==a&&f!=null&&(f=f.map(h=>Ng(Ng({},h),{},{position:Ng(Ng({},h.position),{},{offset:h.position.offset-i/2})}))),f},_fe=(t,e)=>{var n=MN(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(c=>c.key===n)}}}},jfe=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function wfe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&gt(t.zIndex)?t.zIndex:e}var Efe=t=>{var{chartData:e}=t,n=wn(),r=Sr();return _.useEffect(()=>r?()=>{}:(n(Dk(e)),()=>{n(Dk(void 0))}),[e,n,r]),null},AD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},eU=ei({name:"brush",initialState:AD,reducers:{setBrushSettings(t,e){return e.payload==null?AD:e.payload}}}),{setBrushSettings:Wve}=eU.actions,Nfe=eU.reducer;function Sfe(t){return(t%180+180)%180}var Afe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Sfe(i),c=a*Math.PI/180,u=Math.atan(r/n),f=c>u&&c<Math.PI-u?r/Math.sin(c):n/Math.cos(c);return Math.abs(f)},Tfe={dots:[],areas:[],lines:[]},tU=ei({name:"referenceElements",initialState:Tfe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=us(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=us(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=us(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Yve,removeDot:Xve,addArea:Jve,removeArea:Zve,addLine:eye,removeLine:tye}=tU.actions,Cfe=tU.reducer,Pfe=_.createContext(void 0),Ife=t=>{var{children:e}=t,[n]=_.useState("".concat(Rh("recharts"),"-clip")),r=sS();if(r==null)return null;var{x:i,y:a,width:c,height:u}=r;return _.createElement(Pfe.Provider,{value:n},_.createElement("defs",null,_.createElement("clipPath",{id:n},_.createElement("rect",{x:i,y:a,height:u,width:c}))),e)};function nU(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Ofe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Afe(r,n)}function Rfe(t,e,n){var r=n==="width",{x:i,y:a,width:c,height:u}=t;return e===1?{start:r?i:a,end:r?i+c:a+u}:{start:r?i+c:a+u,end:r?i:a}}function Kh(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function kfe(t,e){return nU(t,e+1)}function Dfe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:c,end:u}=e,f=0,h=1,p=c,g=function(){var E=r?.[f];if(E===void 0)return{v:nU(r,h)};var j=f,N,A=()=>(N===void 0&&(N=n(E,j)),N),R=E.coordinate,C=f===0||Kh(t,R,A,p,u);C||(f=0,p=c,h+=1),C&&(p=R+t*(A()/2+i),f+=h)},y;h<=a.length;)if(y=g(),y)return y.v;return[]}function Mfe(t,e,n,r,i){var a=(r||[]).slice(),c=a.length;if(c===0)return[];for(var{start:u,end:f}=e,h=1;h<=c;h++){for(var p=(c-1)%h,g=u,y=!0,x=function(){var P=r[j];if(P==null)return 0;var M=j,B,D=()=>(B===void 0&&(B=n(P,M)),B),O=P.coordinate,k=j===p||Kh(t,O,D,g,f);if(!k)return y=!1,1;k&&(g=O+t*(D()/2+i))},E,j=p;j<c&&(E=x(),!(E!==0&&E===1));j+=h);if(y){for(var N=[],A=p;A<c;A+=h){var R=r[A];R!=null&&N.push(R)}return N}}return[]}function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){zfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zfe(t,e,n){return(e=Lfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lfe(t){var e=qfe(t,"string");return typeof e=="symbol"?e:e+""}function qfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ufe(t,e,n,r,i){for(var a=(r||[]).slice(),c=a.length,{start:u}=e,{end:f}=e,h=function(y){var x=a[y];if(x==null)return 1;var E=x,j,N=()=>(j===void 0&&(j=n(x,y)),j);if(y===c-1){var A=t*(E.coordinate+t*N()/2-f);a[y]=E=br(br({},E),{},{tickCoord:A>0?E.coordinate-A*t:E.coordinate})}else a[y]=E=br(br({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var R=Kh(t,E.tickCoord,N,u,f);R&&(f=E.tickCoord-t*(N()/2+i),a[y]=br(br({},E),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return a}function Vfe(t,e,n,r,i,a){var c=(r||[]).slice(),u=c.length,{start:f,end:h}=e;if(a){var p=r[u-1];if(p!=null){var g=n(p,u-1),y=t*(p.coordinate+t*g/2-h);if(c[u-1]=p=br(br({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate}),p.tickCoord!=null){var x=Kh(t,p.tickCoord,()=>g,f,h);x&&(h=p.tickCoord-t*(g/2+i),c[u-1]=br(br({},p),{},{isShow:!0}))}}}for(var E=a?u-1:u,j=function(R){var C=c[R];if(C==null)return 1;var P=C,M,B=()=>(M===void 0&&(M=n(C,R)),M);if(R===0){var D=t*(P.coordinate-t*B()/2-f);c[R]=P=br(br({},P),{},{tickCoord:D<0?P.coordinate-D*t:P.coordinate})}else c[R]=P=br(br({},P),{},{tickCoord:P.coordinate});if(P.tickCoord!=null){var O=Kh(t,P.tickCoord,B,f,h);O&&(f=P.tickCoord+t*(B()/2+i),c[R]=br(br({},P),{},{isShow:!0}))}},N=0;N<E;N++)j(N);return c}function aS(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:c,orientation:u,interval:f,tickFormatter:h,unit:p,angle:g}=t;if(!i||!i.length||!r)return[];if(Re(f)||o0.isSsr){var y;return(y=kfe(i,Re(f)?f:0))!==null&&y!==void 0?y:[]}var x=[],E=u==="top"||u==="bottom"?"width":"height",j=p&&E==="width"?yh(p,{fontSize:e,letterSpacing:n}):{width:0,height:0},N=(M,B)=>{var D=typeof h=="function"?h(M.value,B):M.value;return E==="width"?Ofe(yh(D,{fontSize:e,letterSpacing:n}),j,g):yh(D,{fontSize:e,letterSpacing:n})[E]},A=i[0],R=i[1],C=i.length>=2&&A!=null&&R!=null?Xr(R.coordinate-A.coordinate):1,P=Rfe(a,C,E);return f==="equidistantPreserveStart"?Dfe(C,P,N,i,c):f==="equidistantPreserveEnd"?Mfe(C,P,N,i,c):(f==="preserveStart"||f==="preserveStartEnd"?x=Vfe(C,P,N,i,c,f==="preserveStartEnd"):x=Ufe(C,P,N,i,c),x.filter(M=>M.isShow))}var Bfe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,c=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+a,h=c+f+u+(n?r:0);return Math.round(h)}return 0},$fe=["axisLine","width","height","className","hide","ticks","axisType"];function Ffe(t,e){if(t==null)return{};var n,r,i=Hfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kc.apply(null,arguments)}function CD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CD(Object(n),!0).forEach(function(r){Gfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gfe(t,e,n){return(e=Kfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kfe(t){var e=Qfe(t,"string");return typeof e=="symbol"?e:e+""}function Qfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var za={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Zn.axis};function Wfe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:c,axisLine:u,otherSvgProps:f}=t;if(!u)return null;var h=dn(dn(dn({},f),hs(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var p=+(a==="top"&&!c||a==="bottom"&&c);h=dn(dn({},h),{},{x1:e,y1:n+p*i,x2:e+r,y2:n+p*i})}else{var g=+(a==="left"&&!c||a==="right"&&c);h=dn(dn({},h),{},{x1:e+g*r,y1:n,x2:e+g*r,y2:n+i})}return _.createElement("line",kc({},h,{className:Ut("recharts-cartesian-axis-line",fd(u,"className"))}))}function Yfe(t,e,n,r,i,a,c,u,f){var h,p,g,y,x,E,j=u?-1:1,N=t.tickSize||c,A=Re(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":h=p=t.coordinate,y=n+ +!u*i,g=y-j*N,E=g-j*f,x=A;break;case"left":g=y=t.coordinate,p=e+ +!u*r,h=p-j*N,x=h-j*f,E=A;break;case"right":g=y=t.coordinate,p=e+ +u*r,h=p+j*N,x=h+j*f,E=A;break;default:h=p=t.coordinate,y=n+ +u*i,g=y+j*N,E=g+j*f,x=A;break}return{line:{x1:h,y1:g,x2:p,y2:y},tick:{x,y:E}}}function Xfe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Jfe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Zfe(t){var{option:e,tickProps:n,value:r}=t,i,a=Ut(n.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(e))i=_.cloneElement(e,dn(dn({},n),{},{className:a}));else if(typeof e=="function")i=e(dn(dn({},n),{},{className:a}));else{var c="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(c=Ut(c,ode(e))),i=_.createElement(rS,kc({},n,{className:c}),r)}return i}var ehe=_.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:c,unit:u,padding:f,tickTextProps:h,orientation:p,mirror:g,x:y,y:x,width:E,height:j,tickSize:N,tickMargin:A,fontSize:R,letterSpacing:C,getTicksConfig:P,events:M,axisType:B}=t,D=aS(dn(dn({},P),{},{ticks:n}),R,C),O=Xfe(p,g),k=Jfe(p,g),U=hs(P),L=fm(r),z={};typeof i=="object"&&(z=i);var V=dn(dn({},U),{},{fill:"none"},z),ge=D.map(ae=>dn({entry:ae},Yfe(ae,y,x,E,j,p,N,g,A))),Z=ge.map(ae=>{var{entry:X,line:we}=ae;return _.createElement(qi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},i&&_.createElement("line",kc({},V,we,{className:Ut("recharts-cartesian-axis-tick-line",fd(i,"className"))})))}),H=ge.map((ae,X)=>{var we,W,{entry:F,tick:ne}=ae,ue=dn(dn(dn(dn({verticalAnchor:k},U),{},{textAnchor:O,stroke:"none",fill:a},ne),{},{index:X,payload:F,visibleTicksCount:D.length,tickFormatter:c,padding:f},h),{},{angle:(we=(W=h?.angle)!==null&&W!==void 0?W:U.angle)!==null&&we!==void 0?we:0}),ve=dn(dn({},ue),L);return _.createElement(qi,kc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(F.value,"-").concat(F.coordinate,"-").concat(F.tickCoord)},$E(M,F,X)),r&&_.createElement(Zfe,{option:r,tickProps:ve,value:"".concat(typeof c=="function"?c(F.value,X):F.value).concat(u||"")}))});return _.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(B,"-ticks")},H.length>0&&_.createElement(Fi,{zIndex:Zn.label},_.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(B,"-tick-labels"),ref:e},H)),Z.length>0&&_.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(B,"-tick-lines")},Z))}),the=_.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:c,ticks:u,axisType:f}=t,h=Ffe(t,$fe),[p,g]=_.useState(""),[y,x]=_.useState(""),E=_.useRef(null);_.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var N;return Bfe({ticks:E.current,label:(N=t.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var j=_.useCallback(N=>{if(N){var A=N.getElementsByClassName("recharts-cartesian-axis-tick-value");E.current=A;var R=A[0];if(R){var C=window.getComputedStyle(R),P=C.fontSize,M=C.letterSpacing;(P!==p||M!==y)&&(g(P),x(M))}}},[p,y]);return c||r!=null&&r<=0||i!=null&&i<=0?null:_.createElement(Fi,{zIndex:t.zIndex},_.createElement(qi,{className:Ut("recharts-cartesian-axis",a)},_.createElement(Wfe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:hs(t)}),_.createElement(ehe,{ref:j,axisType:f,events:h,fontSize:p,getTicksConfig:t,height:t.height,letterSpacing:y,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:u,unit:t.unit,width:t.width,x:t.x,y:t.y}),_.createElement(Mue,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},_.createElement(Gue,{label:t.label,labelRef:t.labelRef}),t.children)))}),oS=_.forwardRef((t,e)=>{var n=Mr(t,za);return _.createElement(the,kc({},n,{ref:e}))});oS.displayName="CartesianAxis";var nhe=["x1","y1","x2","y2","key"],rhe=["offset"],ihe=["xAxisId","yAxisId"],she=["xAxisId","yAxisId"];function PD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PD(Object(n),!0).forEach(function(r){ahe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ahe(t,e,n){return(e=ohe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ohe(t){var e=lhe(t,"string");return typeof e=="symbol"?e:e+""}function lhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(null,arguments)}function sy(t,e){if(t==null)return{};var n,r,i=che(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function che(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uhe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:c,ry:u}=t;return _.createElement("rect",{x:r,y:i,ry:u,width:a,height:c,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function rU(t){var{option:e,lineItemProps:n}=t,r;if(_.isValidElement(e))r=_.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:c,x2:u,y2:f,key:h}=n,p=sy(n,nhe),g=(i=hs(p))!==null&&i!==void 0?i:{},{offset:y}=g,x=sy(g,rhe);r=_.createElement("line",uc({},x,{x1:a,y1:c,x2:u,y2:f,fill:"none",key:h}))}return r}function dhe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:c}=t,u=sy(t,ihe),f=i.map((h,p)=>{var g=jr(jr({},u),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(p),index:p});return _.createElement(rU,{key:"line-".concat(p),option:r,lineItemProps:g})});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function fhe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:c}=t,u=sy(t,she),f=i.map((h,p)=>{var g=jr(jr({},u),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(p),index:p});return _.createElement(rU,{option:r,lineItemProps:g,key:"line-".concat(p)})});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function hhe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:c,horizontalPoints:u,horizontal:f=!0}=t;if(!f||!e||!e.length||u==null)return null;var h=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var x=h[y+1],E=x==null,j=E?i+c-g:x-g;if(j<=0)return null;var N=y%e.length;return _.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:j,width:a,stroke:"none",fill:e[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function mhe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:c,height:u,verticalPoints:f}=t;if(!e||!n||!n.length)return null;var h=f.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var x=h[y+1],E=x==null,j=E?i+c-g:x-g;if(j<=0)return null;var N=y%n.length;return _.createElement("rect",{key:"react-".concat(y),x:g,y:a,width:j,height:u,stroke:"none",fill:n[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var phe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return M3(aS(jr(jr(jr({},za),n),{},{ticks:z3(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},ghe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return M3(aS(jr(jr(jr({},za),n),{},{ticks:z3(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},vhe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Zn.grid};function cw(t){var e=$3(),n=F3(),r=B3(),i=jr(jr({},Mr(t,vhe)),{},{x:Re(t.x)?t.x:r.left,y:Re(t.y)?t.y:r.top,width:Re(t.width)?t.width:r.width,height:Re(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:c,x:u,y:f,width:h,height:p,syncWithTicks:g,horizontalValues:y,verticalValues:x}=i,E=Sr(),j=Le(k=>wk(k,"xAxis",a,E)),N=Le(k=>wk(k,"yAxis",c,E));if(!ta(h)||!ta(p)||!Re(u)||!Re(f))return null;var A=i.verticalCoordinatesGenerator||phe,R=i.horizontalCoordinatesGenerator||ghe,{horizontalPoints:C,verticalPoints:P}=i;if((!C||!C.length)&&typeof R=="function"){var M=y&&y.length,B=R({yAxis:N?jr(jr({},N),{},{ticks:M?y:N.ticks}):void 0,width:e??h,height:n??p,offset:r},M?!0:g);Iv(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(C=B)}if((!P||!P.length)&&typeof A=="function"){var D=x&&x.length,O=A({xAxis:j?jr(jr({},j),{},{ticks:D?x:j.ticks}):void 0,width:e??h,height:n??p,offset:r},D?!0:g);Iv(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(P=O)}return _.createElement(Fi,{zIndex:i.zIndex},_.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(uhe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),_.createElement(hhe,uc({},i,{horizontalPoints:C})),_.createElement(mhe,uc({},i,{verticalPoints:P})),_.createElement(dhe,uc({},i,{offset:r,horizontalPoints:C,xAxis:j,yAxis:N})),_.createElement(fhe,uc({},i,{offset:r,verticalPoints:P,xAxis:j,yAxis:N}))))}cw.displayName="CartesianGrid";var yhe={},iU=ei({name:"errorBars",initialState:yhe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:nye,replaceErrorBar:rye,removeErrorBar:iye}=iU.actions,bhe=iU.reducer,xhe=["children"];function _he(t,e){if(t==null)return{};var n,r,i=jhe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var whe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Ehe=_.createContext(whe);function sU(t){var{children:e}=t,n=_he(t,xhe);return _.createElement(Ehe.Provider,{value:n},e)}function lS(t,e){var n,r,i=Le(h=>io(h,t)),a=Le(h=>so(h,e)),c=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Wn.allowDataOverflow,u=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Yn.allowDataOverflow,f=c||u;return{needClip:f,needClipX:c,needClipY:u}}function aU(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=sS(),{needClipX:a,needClipY:c,needClip:u}=lS(e,n);if(!u||!i)return null;var{x:f,y:h,width:p,height:g}=i;return _.createElement("clipPath",{id:"clipPath-".concat(r)},_.createElement("rect",{x:a?f:f-p/2,y:c?h:h-g/2,width:a?p:p*2,height:c?g:g*2}))}var oU=(t,e,n,r)=>vl(t,"xAxis",e,r),lU=(t,e,n,r)=>gl(t,"xAxis",e,r),cU=(t,e,n,r)=>vl(t,"yAxis",n,r),uU=(t,e,n,r)=>gl(t,"yAxis",n,r),Nhe=de([Ot,oU,cU,lU,uU],(t,e,n,r,i)=>Za(t,"xAxis")?md(e,r,!1):md(n,i,!1)),She=(t,e,n,r,i)=>i;function Ahe(t){return t.type==="line"}var The=de([E0,She],(t,e)=>t.filter(Ahe).find(n=>n.id===e)),Che=de([Ot,oU,cU,lU,uU,The,Nhe,AN],(t,e,n,r,i,a,c,u)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:p}=u;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:g,data:y}=a,x;if(y!=null&&y.length>0?x=y:x=f?.slice(h,p+1),x!=null)return gme({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:x})}});function Phe(t){var e=fm(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,c=Number(i),u=Number(a);return(Number.isNaN(c)||c<0)&&(c=n),(Number.isNaN(u)||u<0)&&(u=r),{r:c,strokeWidth:u}}return{r:n,strokeWidth:r}}var R1={exports:{}},k1={};var ID;function Ihe(){if(ID)return k1;ID=1;var t=bd();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,c=t.useMemo,u=t.useDebugValue;return k1.useSyncExternalStoreWithSelector=function(f,h,p,g,y){var x=i(null);if(x.current===null){var E={hasValue:!1,value:null};x.current=E}else E=x.current;x=c(function(){function N(M){if(!A){if(A=!0,R=M,M=g(M),y!==void 0&&E.hasValue){var B=E.value;if(y(B,M))return C=B}return C=M}if(B=C,n(R,M))return B;var D=g(M);return y!==void 0&&y(B,D)?(R=M,B):(R=M,C=D)}var A=!1,R,C,P=p===void 0?null:p;return[function(){return N(h())},P===null?void 0:function(){return N(P())}]},[h,p,g,y]);var j=r(f,x[0],x[1]);return a(function(){E.hasValue=!0,E.value=j},[j]),u(j),j},k1}var OD;function Ohe(){return OD||(OD=1,R1.exports=Ihe()),R1.exports}Ohe();function Rhe(t){t()}function khe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Rhe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var RD={notify(){},get:()=>[]};function Dhe(t,e){let n,r=RD,i=0,a=!1;function c(j){p();const N=r.subscribe(j);let A=!1;return()=>{A||(A=!0,N(),g())}}function u(){r.notify()}function f(){E.onStateChange&&E.onStateChange()}function h(){return a}function p(){i++,n||(n=t.subscribe(f),r=khe())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=RD)}function y(){a||(a=!0,p())}function x(){a&&(a=!1,g())}const E={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:h,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return E}var Mhe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zhe=Mhe(),Lhe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qhe=Lhe(),Uhe=()=>zhe||qhe?_.useLayoutEffect:_.useEffect,Vhe=Uhe();function kD(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Bhe(t,e){if(kD(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!kD(t[n[i]],e[n[i]]))return!1;return!0}var $he=Symbol.for("react-redux-context"),Fhe=typeof globalThis<"u"?globalThis:{};function Hhe(){if(!_.createContext)return{};const t=Fhe[$he]??=new Map;let e=t.get(_.createContext);return e||(e=_.createContext(null),t.set(_.createContext,e)),e}var Ghe=Hhe();function Khe(t){const{children:e,context:n,serverState:r,store:i}=t,a=_.useMemo(()=>{const f=Dhe(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),c=_.useMemo(()=>i.getState(),[i]);Vhe(()=>{const{subscription:f}=a;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),c!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[a,c]);const u=n||Ghe;return _.createElement(u.Provider,{value:a},e)}var Qhe=Khe,Whe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Yhe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function C0(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Whe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Bhe(t[r],e[r]))return!1}else if(!Yhe(t[r],e[r]))return!1;return!0}var Xhe=["id"],Jhe=["type","layout","connectNulls","needClip","shape"],Zhe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Qh(){return Qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qh.apply(null,arguments)}function DD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DD(Object(n),!0).forEach(function(r){eme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eme(t,e,n){return(e=tme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tme(t){var e=nme(t,"string");return typeof e=="symbol"?e:e+""}function nme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cS(t,e){if(t==null)return{};var n,r,i=rme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ime=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Jy(n,e),payload:t}]},sme=_.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:c,hide:u,unit:f,tooltipType:h,id:p}=t,g={dataDefinedOnItem:n,getPosition:Uc,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:Jy(c,e),hide:u,type:h,color:r,unit:f,graphicalItemId:p}};return _.createElement(Kq,{tooltipEntrySettings:g})}),dU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function ame(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var ome=(t,e,n)=>{var r=n.reduce((x,E)=>x+E);if(!r)return dU(e,t);for(var i=Math.floor(t/r),a=t%r,c=e-t,u=[],f=0,h=0;f<n.length;h+=(p=n[f])!==null&&p!==void 0?p:0,++f){var p,g=n[f];if(g!=null&&h+g>a){u=[...n.slice(0,f),a-h];break}}var y=u.length%2===0?[0,c]:[c];return[...ame(n,i),...u,...y].map(x=>"".concat(x,"px")).join(", ")};function lme(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:c}=r,{id:u}=r,f=cS(r,Xhe),h=hs(f);return _.createElement(Qde,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:h,needClip:c,clipPathId:e})}function cme(t){var{showLabels:e,children:n,points:r}=t,i=_.useMemo(()=>r?.map(a=>{var c,u,f={x:(c=a.x)!==null&&c!==void 0?c:0,y:(u=a.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return qs(qs({},f),{},{value:a.value,payload:a.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[r]);return _.createElement(Mq,{value:e?i:void 0},n)}function MD(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a}=t,{type:c,layout:u,connectNulls:f,needClip:h,shape:p}=a,g=cS(a,Jhe),y=qs(qs({},kr(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):void 0,points:r,type:c,layout:u,connectNulls:f,strokeDasharray:i??a.strokeDasharray});return _.createElement(_.Fragment,null,r?.length>1&&_.createElement($q,Qh({shapeType:"curve",option:p},y,{pathRef:n})),_.createElement(lme,{points:r,clipPathId:e,props:a}))}function ume(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function dme(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:c,strokeDasharray:u,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:y,width:x,height:E,onAnimationEnd:j,onAnimationStart:N}=n,A=i.current,R=c0(c,"recharts-line-"),C=_.useRef(R),[P,M]=_.useState(!1),B=!P,D=_.useCallback(()=>{typeof j=="function"&&j(),M(!1)},[j]),O=_.useCallback(()=>{typeof N=="function"&&N(),M(!0)},[N]),k=ume(r.current),U=_.useRef(0);C.current!==R&&(U.current=a.current,C.current=R);var L=U.current;return _.createElement(cme,{points:c,showLabels:B},n.children,_.createElement(l0,{animationId:R,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:D,onAnimationStart:O,key:R},z=>{var V=mn(L,k+L,z),ge=Math.min(V,k),Z;if(f)if(u){var H="".concat(u).split(/[,\s]+/gim).map(we=>parseFloat(we));Z=ome(ge,k,H)}else Z=dU(k,ge);else Z=u==null?void 0:String(u);if(z>0&&k>0&&(i.current=c,a.current=Math.max(a.current,ge)),A){var ae=A.length/c.length,X=z===1?c:c.map((we,W)=>{var F=Math.floor(W*ae);if(A[F]){var ne=A[F];return qs(qs({},we),{},{x:mn(ne.x,we.x,z),y:mn(ne.y,we.y,z)})}return y?qs(qs({},we),{},{x:mn(x*2,we.x,z),y:mn(E/2,we.y,z)}):qs(qs({},we),{},{x:we.x,y:we.y})});return i.current=X,_.createElement(MD,{props:n,points:X,clipPathId:e,pathRef:r,strokeDasharray:Z})}return _.createElement(MD,{props:n,points:c,clipPathId:e,pathRef:r,strokeDasharray:Z})}),_.createElement(Lq,{label:n.label}))}function fme(t){var{clipPathId:e,props:n}=t,r=_.useRef(null),i=_.useRef(0),a=_.useRef(null);return _.createElement(dme,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var hme=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Dn(t.payload,e)}};class mme extends _.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:a,yAxisId:c,top:u,left:f,width:h,height:p,id:g,needClip:y,zIndex:x}=this.props;if(e)return null;var E=Ut("recharts-line",i),j=g,{r:N,strokeWidth:A}=Phe(n),R=Bq(n),C=N*2+A,P=y?"url(#clipPath-".concat(R?"":"dots-").concat(j,")"):void 0;return _.createElement(Fi,{zIndex:x},_.createElement(qi,{className:E},y&&_.createElement("defs",null,_.createElement(aU,{clipPathId:j,xAxisId:a,yAxisId:c}),!R&&_.createElement("clipPath",{id:"clipPath-dots-".concat(j)},_.createElement("rect",{x:f-C/2,y:u-C/2,width:h+C,height:p+C}))),_.createElement(sU,{xAxisId:a,yAxisId:c,data:r,dataPointFormatter:hme,errorBarOffset:0},_.createElement(fme,{props:this.props,clipPathId:j}))),_.createElement(mfe,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:P}))}}var fU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Zn.line,type:"linear"};function pme(t){var e=Mr(t,fU),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:c,connectNulls:u,dot:f,hide:h,isAnimationActive:p,label:g,legendType:y,xAxisId:x,yAxisId:E,id:j}=e,N=cS(e,Zhe),{needClip:A}=lS(x,E),R=sS(),C=Vc(),P=Sr(),M=Le(U=>Che(U,x,E,P,j));if(C!=="horizontal"&&C!=="vertical"||M==null||R==null)return null;var{height:B,width:D,x:O,y:k}=R;return _.createElement(mme,Qh({},N,{id:j,connectNulls:u,dot:f,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:c,isAnimationActive:p,hide:h,label:g,legendType:y,xAxisId:x,yAxisId:E,points:M,layout:C,height:B,width:D,left:O,top:k,needClip:A}))}function gme(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:c,bandSize:u,displayedData:f}=t;return f.map((h,p)=>{var g=Dn(h,c);if(e==="horizontal"){var y=_O({axis:n,ticks:i,bandSize:u,entry:h,index:p}),x=an(g)?null:r.scale.map(g);return{x:y,y:x??null,value:g,payload:h}}var E=an(g)?null:n.scale.map(g),j=_O({axis:r,ticks:a,bandSize:u,entry:h,index:p});return E==null||j==null?null:{x:E,y:j,value:g,payload:h}}).filter(Boolean)}function vme(t){var e=Mr(t,fU),n=Sr();return _.createElement(Wq,{id:e.id,type:"line"},r=>_.createElement(_.Fragment,null,_.createElement(Qq,{legendPayload:ime(e)}),_.createElement(sme,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),_.createElement(Xq,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),_.createElement(pme,Qh({},e,{id:r}))))}var hU=_.memo(vme,C0);hU.displayName="Line";function Fc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Jq}function Hc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Jq}var yme="Invariant failed";function bme(t,e){throw new Error(yme)}function uw(){return uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uw.apply(null,arguments)}function ay(t){return _.createElement($q,uw({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var xme=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Re(e))return e;var a=Re(r)||an(r);return a?e(r,i):(a||bme(),n)}},_me=(t,e,n)=>n,jme=(t,e)=>e,Cm=de([E0,jme],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),wme=de([Cm],t=>t?.maxBarSize),Eme=(t,e,n,r)=>r,Nme=de([Ot,E0,Fc,Hc,_me],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Sme=(t,e,n)=>{var r=Ot(t),i=Fc(t,e),a=Hc(t,e);if(!(i==null||a==null))return r==="horizontal"?nw(t,"yAxis",a,n):nw(t,"xAxis",i,n)},Ame=(t,e)=>{var n=Ot(t),r=Fc(t,e),i=Hc(t,e);if(!(r==null||i==null))return n==="horizontal"?jk(t,"xAxis",r):jk(t,"yAxis",i)},Tme=de([Nme,Pae,Ame],pfe),Cme=(t,e,n)=>{var r,i,a=Cm(t,e);if(a==null)return 0;var c=Fc(t,e),u=Hc(t,e);if(c==null||u==null)return 0;var f=Ot(t),h=n5(t),{maxBarSize:p}=a,g=an(p)?h:p,y,x;return f==="horizontal"?(y=vl(t,"xAxis",c,n),x=gl(t,"xAxis",c,n)):(y=vl(t,"yAxis",u,n),x=gl(t,"yAxis",u,n)),(r=(i=md(y,x,!0))!==null&&i!==void 0?i:g)!==null&&r!==void 0?r:0},mU=(t,e,n)=>{var r=Ot(t),i=Fc(t,e),a=Hc(t,e);if(!(i==null||a==null)){var c,u;return r==="horizontal"?(c=vl(t,"xAxis",i,n),u=gl(t,"xAxis",i,n)):(c=vl(t,"yAxis",a,n),u=gl(t,"yAxis",a,n)),md(c,u)}},Pme=de([Tme,n5,Cae,r5,Cme,mU,wme],xfe),Ime=(t,e,n)=>{var r=Fc(t,e);if(r!=null)return vl(t,"xAxis",r,n)},Ome=(t,e,n)=>{var r=Hc(t,e);if(r!=null)return vl(t,"yAxis",r,n)},Rme=(t,e,n)=>{var r=Fc(t,e);if(r!=null)return gl(t,"xAxis",r,n)},kme=(t,e,n)=>{var r=Hc(t,e);if(r!=null)return gl(t,"yAxis",r,n)},Dme=de([Pme,Cm],jfe),Mme=de([Sme,Cm],_fe),zme=de([er,ZE,Ime,Ome,Rme,kme,Dme,Ot,_ae,mU,Mme,Cm,Eme],(t,e,n,r,i,a,c,u,f,h,p,g,y)=>{var{chartData:x,dataStartIndex:E,dataEndIndex:j}=f;if(!(g==null||c==null||e==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||a==null||h==null)){var{data:N}=g,A;if(N!=null&&N.length>0?A=N:A=x?.slice(E,j+1),A!=null)return dpe({layout:u,barSettings:g,pos:c,parentViewBox:e,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:p,displayedData:A,offset:t,cells:y,dataStartIndex:E})}}),Lme=["index"];function dw(){return dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dw.apply(null,arguments)}function qme(t,e){if(t==null)return{};var n,r,i=Ume(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ume(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var pU=_.createContext(void 0),Vme=t=>{var e=_.useContext(pU);if(e!=null)return e.stackId;if(t!=null)return Ete(t)},Bme=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),$me=t=>{var e=_.useContext(pU);if(e!=null){var{stackId:n}=e;return"url(#".concat(Bme(n,t),")")}},gU=t=>{var{index:e}=t,n=qme(t,Lme),r=$me(e);return _.createElement(qi,dw({className:"recharts-bar-stack-layer",clipPath:r},n))},Fme=["onMouseEnter","onMouseLeave","onClick"],Hme=["value","background","tooltipPosition"],Gme=["id"],Kme=["onMouseEnter","onClick","onMouseLeave"];function Wa(){return Wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wa.apply(null,arguments)}function zD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zD(Object(n),!0).forEach(function(r){Qme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qme(t,e,n){return(e=Wme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wme(t){var e=Yme(t,"string");return typeof e=="symbol"?e:e+""}function Yme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oy(t,e){if(t==null)return{};var n,r,i=Xme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jme=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Jy(n,e),payload:t}]},Zme=_.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:c,unit:u,tooltipType:f,id:h}=t,p={dataDefinedOnItem:void 0,getPosition:Uc,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Jy(a,e),hide:c,type:f,color:i,unit:u,graphicalItemId:h}};return _.createElement(Kq,{tooltipEntrySettings:p})});function epe(t){var e=Le(Rc),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:c,onMouseLeave:u,onClick:f}=a,h=oy(a,Fme),p=Fq(c,r,a.id),g=Hq(u),y=Gq(f,r,a.id);if(!i||n==null)return null;var x=fm(i);return _.createElement(Fi,{zIndex:wfe(i,Zn.barBackground)},n.map((E,j)=>{var{value:N,background:A,tooltipPosition:R}=E,C=oy(E,Hme);if(!A)return null;var P=p(E,j),M=g(E,j),B=y(E,j),D=Pr(Pr(Pr(Pr(Pr({option:i,isActive:String(j)===e},C),{},{fill:"#eee"},A),x),$E(h,E,j)),{},{onMouseEnter:P,onMouseLeave:M,onClick:B,dataKey:r,index:j,className:"recharts-bar-background-rectangle"});return _.createElement(ay,Wa({key:"background-bar-".concat(j)},D))}))}function tpe(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var c={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Pr(Pr({},c),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:c,fill:a.fill})});return _.createElement(Mq,{value:e?i:void 0},n)}function npe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:c}=t,u=Le(Rc),f=Le(mq),h=n&&String(a)===u&&(f==null||c===f),p=h?n:e;return h?_.createElement(Fi,{zIndex:Zn.activeBar},_.createElement(gU,{index:a},_.createElement(ay,Wa({},r,{name:String(r.name)},i,{isActive:h,option:p,index:a,dataKey:c})))):_.createElement(ay,Wa({},r,{name:String(r.name)},i,{isActive:h,option:p,index:a,dataKey:c}))}function rpe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return _.createElement(ay,Wa({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function ipe(t){var e,{data:n,props:r}=t,i=(e=hs(r))!==null&&e!==void 0?e:{},{id:a}=i,c=oy(i,Gme),{shape:u,dataKey:f,activeBar:h}=r,{onMouseEnter:p,onClick:g,onMouseLeave:y}=r,x=oy(r,Kme),E=Fq(p,f,a),j=Hq(y),N=Gq(g,f,a);return n?_.createElement(_.Fragment,null,n.map((A,R)=>_.createElement(gU,Wa({index:R,key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(R),className:"recharts-bar-rectangle"},$E(x,A,R),{onMouseEnter:E(A,R),onMouseLeave:j(A,R),onClick:N(A,R)}),h?_.createElement(npe,{shape:u,activeBar:h,baseProps:c,entry:A,index:R,dataKey:f}):_.createElement(rpe,{shape:u,baseProps:c,entry:A,index:R,dataKey:f})))):null}function spe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:c,animationDuration:u,animationEasing:f,onAnimationEnd:h,onAnimationStart:p}=e,g=n.current,y=c0(e,"recharts-bar-"),[x,E]=_.useState(!1),j=!x,N=_.useCallback(()=>{typeof h=="function"&&h(),E(!1)},[h]),A=_.useCallback(()=>{typeof p=="function"&&p(),E(!0)},[p]);return _.createElement(tpe,{showLabels:j,rects:r},_.createElement(l0,{animationId:y,begin:c,duration:u,isActive:a,easing:f,onAnimationEnd:N,onAnimationStart:A,key:y},R=>{var C=R===1?r:r?.map((P,M)=>{var B=g&&g[M];if(B)return Pr(Pr({},P),{},{x:mn(B.x,P.x,R),y:mn(B.y,P.y,R),width:mn(B.width,P.width,R),height:mn(B.height,P.height,R)});if(i==="horizontal"){var D=mn(0,P.height,R),O=mn(P.stackedBarStart,P.y,R);return Pr(Pr({},P),{},{y:O,height:D})}var k=mn(0,P.width,R),U=mn(P.stackedBarStart,P.x,R);return Pr(Pr({},P),{},{width:k,x:U})});return R>0&&(n.current=C??null),C==null?null:_.createElement(qi,null,_.createElement(ipe,{props:e,data:C}))}),_.createElement(Lq,{label:e.label}),e.children)}function ape(t){var e=_.useRef(null);return _.createElement(spe,{previousRectanglesRef:e,props:t})}var vU=0,ope=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Dn(t,e)}};class lpe extends _.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:c,needClip:u,background:f,id:h}=this.props;if(e||n==null)return null;var p=Ut("recharts-bar",i),g=h;return _.createElement(qi,{className:p,id:h},u&&_.createElement("defs",null,_.createElement(aU,{clipPathId:g,xAxisId:a,yAxisId:c})),_.createElement(qi,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},_.createElement(epe,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),_.createElement(ape,this.props)))}}var cpe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:vU,xAxisId:0,yAxisId:0,zIndex:Zn.bar};function upe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:c,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p}=t,{needClip:g}=lS(e,n),y=Vc(),x=Sr(),E=dde(t.children,nS),j=Le(R=>zme(R,t.id,x,E));if(y!=="vertical"&&y!=="horizontal")return null;var N,A=j?.[0];return A==null||A.height==null||A.width==null?N=0:N=y==="vertical"?A.height/2:A.width/2,_.createElement(sU,{xAxisId:e,yAxisId:n,data:j,dataPointFormatter:ope,errorBarOffset:N},_.createElement(lpe,Wa({},t,{layout:y,needClip:g,data:j,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:c,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p})))}function dpe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:c,yAxis:u,xAxisTicks:f,yAxisTicks:h,stackedData:p,displayedData:g,offset:y,cells:x,parentViewBox:E,dataStartIndex:j}=t,N=e==="horizontal"?u:c,A=p?N.scale.domain():null,R=Nte({numericAxis:N}),C=N.scale.map(R);return g.map((P,M)=>{var B,D,O,k,U,L;if(p){var z=p[M+j];if(z==null)return null;B=bte(z,A)}else B=Dn(P,n),Array.isArray(B)||(B=[R,B]);var V=xme(r,vU)(B[1],M);if(e==="horizontal"){var ge,Z=u.scale.map(B[0]),H=u.scale.map(B[1]);if(Z==null||H==null)return null;D=jO({axis:c,ticks:f,bandSize:a,offset:i.offset,entry:P,index:M}),O=(ge=H??Z)!==null&&ge!==void 0?ge:void 0,k=i.size;var ae=Z-H;if(U=Zs(ae)?0:ae,L={x:D,y:y.top,width:k,height:y.height},Math.abs(V)>0&&Math.abs(U)<Math.abs(V)){var X=Xr(U||V)*(Math.abs(V)-Math.abs(U));O-=X,U+=X}}else{var we=c.scale.map(B[0]),W=c.scale.map(B[1]);if(we==null||W==null)return null;if(D=we,O=jO({axis:u,ticks:h,bandSize:a,offset:i.offset,entry:P,index:M}),k=W-we,U=i.size,L={x:y.left,y:O,width:y.width,height:U},Math.abs(V)>0&&Math.abs(k)<Math.abs(V)){var F=Xr(k||V)*(Math.abs(V)-Math.abs(k));k+=F}}if(D==null||O==null||k==null||U==null)return null;var ne=Pr(Pr({},P),{},{stackedBarStart:C,x:D,y:O,width:k,height:U,value:p?B:B[1],payload:P,background:L,tooltipPosition:{x:D+k/2,y:O+U/2},parentViewBox:E},x&&x[M]&&x[M].props);return ne}).filter(Boolean)}function fpe(t){var e=Mr(t,cpe),n=Vme(e.stackId),r=Sr();return _.createElement(Wq,{id:e.id,type:"bar"},i=>_.createElement(_.Fragment,null,_.createElement(Qq,{legendPayload:Jme(e)}),_.createElement(Zme,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),_.createElement(Xq,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),_.createElement(Fi,{zIndex:e.zIndex},_.createElement(upe,Wa({},e,{id:i})))))}var yU=_.memo(fpe,C0);yU.displayName="Bar";var hpe=["domain","range"],mpe=["domain","range"];function LD(t,e){if(t==null)return{};var n,r,i=ppe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ppe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function qD(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function bU(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=LD(t,hpe),{domain:a,range:c}=e,u=LD(e,mpe);return!qD(n,a)||!qD(r,c)?!1:C0(i,u)}var gpe=["type"],vpe=["dangerouslySetInnerHTML","ticks","scale"],ype=["id","scale"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(null,arguments)}function UD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UD(Object(n),!0).forEach(function(r){bpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bpe(t,e,n){return(e=xpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xpe(t){var e=_pe(t,"string");return typeof e=="symbol"?e:e+""}function _pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hw(t,e){if(t==null)return{};var n,r,i=jpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wpe(t){var e=wn(),n=_.useRef(null),r=H3(),{type:i}=t,a=hw(t,gpe),c=y0(r,"xAxis",i),u=_.useMemo(()=>{if(c!=null)return VD(VD({},a),{},{type:c})},[a,c]);return _.useLayoutEffect(()=>{u!=null&&(n.current===null?e(Zde(u)):n.current!==u&&e(efe({prev:n.current,next:u})),n.current=u)},[u,e]),_.useLayoutEffect(()=>()=>{n.current&&(e(tfe(n.current)),n.current=null)},[e]),null}var Epe=t=>{var{xAxisId:e,className:n}=t,r=Le(ZE),i=Sr(),a="xAxis",c=Le(A=>K5(A,a,e,i)),u=Le(A=>$5(A,e)),f=Le(A=>Ioe(A,e)),h=Le(A=>f5(A,e));if(u==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:y}=t,x=hw(t,vpe),{id:E,scale:j}=h,N=hw(h,ype);return _.createElement(oS,fw({},x,N,{x:f.x,y:f.y,width:u.width,height:u.height,className:Ut("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:c,axisType:a}))},Npe={allowDataOverflow:Wn.allowDataOverflow,allowDecimals:Wn.allowDecimals,allowDuplicatedCategory:Wn.allowDuplicatedCategory,angle:Wn.angle,axisLine:za.axisLine,height:Wn.height,hide:!1,includeHidden:Wn.includeHidden,interval:Wn.interval,label:!1,minTickGap:Wn.minTickGap,mirror:Wn.mirror,orientation:Wn.orientation,padding:Wn.padding,reversed:Wn.reversed,scale:Wn.scale,tick:Wn.tick,tickCount:Wn.tickCount,tickLine:za.tickLine,tickSize:za.tickSize,type:Wn.type,xAxisId:0},Spe=t=>{var e=Mr(t,Npe);return _.createElement(_.Fragment,null,_.createElement(wpe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),_.createElement(Epe,e))},mw=_.memo(Spe,bU);mw.displayName="XAxis";var Ape=["type"],Tpe=["dangerouslySetInnerHTML","ticks","scale"],Cpe=["id","scale"];function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pw.apply(null,arguments)}function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $D(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){Ppe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ppe(t,e,n){return(e=Ipe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ipe(t){var e=Ope(t,"string");return typeof e=="symbol"?e:e+""}function Ope(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gw(t,e){if(t==null)return{};var n,r,i=Rpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kpe(t){var e=wn(),n=_.useRef(null),r=H3(),{type:i}=t,a=gw(t,Ape),c=y0(r,"yAxis",i),u=_.useMemo(()=>{if(c!=null)return $D($D({},a),{},{type:c})},[c,a]);return _.useLayoutEffect(()=>{u!=null&&(n.current===null?e(nfe(u)):n.current!==u&&e(rfe({prev:n.current,next:u})),n.current=u)},[u,e]),_.useLayoutEffect(()=>()=>{n.current&&(e(ife(n.current)),n.current=null)},[e]),null}function Dpe(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=_.useRef(null),c=_.useRef(null),u=Le(ZE),f=Sr(),h=wn(),p="yAxis",g=Le(B=>F5(B,e)),y=Le(B=>Roe(B,e)),x=Le(B=>K5(B,p,e,f)),E=Le(B=>h5(B,e));if(_.useLayoutEffect(()=>{if(!(r!=="auto"||!g||iS(i)||_.isValidElement(i)||E==null)){var B=a.current;if(B){var D=B.getCalculatedWidth();Math.round(g.width)!==Math.round(D)&&h(sfe({id:e,width:D}))}}},[x,g,h,i,e,r,E]),g==null||y==null||E==null)return null;var{dangerouslySetInnerHTML:j,ticks:N,scale:A}=t,R=gw(t,Tpe),{id:C,scale:P}=E,M=gw(E,Cpe);return _.createElement(oS,pw({},R,M,{ref:a,labelRef:c,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:Ut("recharts-".concat(p," ").concat(p),n),viewBox:u,ticks:x,axisType:p}))}var Mpe={allowDataOverflow:Yn.allowDataOverflow,allowDecimals:Yn.allowDecimals,allowDuplicatedCategory:Yn.allowDuplicatedCategory,angle:Yn.angle,axisLine:za.axisLine,hide:!1,includeHidden:Yn.includeHidden,interval:Yn.interval,label:!1,minTickGap:Yn.minTickGap,mirror:Yn.mirror,orientation:Yn.orientation,padding:Yn.padding,reversed:Yn.reversed,scale:Yn.scale,tick:Yn.tick,tickCount:Yn.tickCount,tickLine:za.tickLine,tickSize:za.tickSize,type:Yn.type,width:Yn.width,yAxisId:0},zpe=t=>{var e=Mr(t,Mpe);return _.createElement(_.Fragment,null,_.createElement(kpe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),_.createElement(Dpe,e))},vw=_.memo(zpe,bU);vw.displayName="YAxis";var Lpe=(t,e)=>e,uS=de([Lpe,Ot,u5,rr,uq,ao,Qle,er],tce),dS=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},xU=Ui("mouseClick"),_U=pm();_U.startListening({actionCreator:xU,effect:(t,e)=>{var n=t.payload,r=uS(e.getState(),dS(n));r?.activeIndex!=null&&e.dispatch(Koe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var yw=Ui("mouseMove"),jU=pm(),Sg=null;jU.startListening({actionCreator:yw,effect:(t,e)=>{var n=t.payload;Sg!==null&&cancelAnimationFrame(Sg);var r=dS(n);Sg=requestAnimationFrame(()=>{var i=e.getState(),a=GN(i,i.tooltip.settings.shared);if(a==="axis"){var c=uS(i,r);c?.activeIndex!=null?e.dispatch(tq({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):e.dispatch(eq())}Sg=null})}});function qpe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var FD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},wU=ei({name:"rootProps",initialState:FD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:FD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Upe=wU.reducer,{updateOptions:Vpe}=wU.actions,Bpe=null,$pe={updatePolarOptions:(t,e)=>e.payload},EU=ei({name:"polarOptions",initialState:Bpe,reducers:$pe}),{updatePolarOptions:sye}=EU.actions,Fpe=EU.reducer,NU=Ui("keyDown"),SU=Ui("focus"),fS=pm();fS.startListening({actionCreator:NU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var c=KN(i,zd(n),Nm(n),Am(n)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var f=ao(n);if(a==="Enter"){var h=ey(n,"axis","hover",String(i.index));e.dispatch(iw({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var p=zoe(n),g=p==="left-to-right"?1:-1,y=a==="ArrowRight"?1:-1,x=u+y*g;if(!(f==null||x>=f.length||x<0)){var E=ey(n,"axis","hover",String(x));e.dispatch(iw({active:!0,activeIndex:x.toString(),activeCoordinate:E}))}}}}}});fS.startListening({actionCreator:SU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",c=ey(n,"axis","hover",String(a));e.dispatch(iw({active:!0,activeIndex:a,activeCoordinate:c}))}}}});var Mi=Ui("externalEvent"),AU=pm(),D1=new Map;AU.startListening({actionCreator:Mi,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=D1.get(i);a!==void 0&&cancelAnimationFrame(a);var c=requestAnimationFrame(()=>{try{var u=e.getState(),f={activeCoordinate:Ole(u),activeDataKey:mq(u),activeIndex:Rc(u),activeLabel:hq(u),activeTooltipIndex:Rc(u),isTooltipActive:Rle(u)};n(f,r)}finally{D1.delete(i)}});D1.set(i,c)}}});var Hpe=de([Dd],t=>t.tooltipItemPayloads),Gpe=de([Hpe,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),TU=Ui("touchMove"),CU=pm();CU.startListening({actionCreator:TU,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=GN(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var c=uS(r,dS({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));c?.activeIndex!=null&&e.dispatch(tq({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(Ote),g=(u=h.getAttribute(Rte))!==null&&u!==void 0?u:void 0,y=Md(r).find(j=>j.id===g);if(p==null||y==null||g==null)return;var{dataKey:x}=y,E=Gpe(r,p,g);e.dispatch(Z5({activeDataKey:x,activeIndex:p,activeCoordinate:E,activeGraphicalItemId:g}))}}}});var Kpe=o3({brush:Nfe,cartesianAxis:afe,chartData:Oce,errorBars:bhe,graphicalItems:Lde,layout:mte,legend:Ene,options:Ace,polarAxis:ade,polarOptions:Fpe,referenceElements:Cfe,rootProps:Upe,tooltip:Qoe,zIndex:pce}),Qpe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return qee({reducer:Kpe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([_U.middleware,jU.middleware,fS.middleware,AU.middleware,CU.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(j3({type:"raf"}))},devTools:{serialize:{replacer:qpe},name:"recharts-".concat(n)}})};function Wpe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Sr(),a=_.useRef(null);if(i)return n;a.current==null&&(a.current=Qpe(e,r));var c=GE;return _.createElement(Qhe,{context:c,store:a.current},n)}function Ype(t){var{layout:e,margin:n}=t,r=wn(),i=Sr();return _.useEffect(()=>{i||(r(dte(e)),r(ute(n)))},[r,i,e,n]),null}var Xpe=_.memo(Ype,C0);function Jpe(t){var e=wn();return _.useEffect(()=>{e(Vpe(t))},[e,t]),null}function HD(t){var{zIndex:e,isPanorama:n}=t,r=_.useRef(null),i=wn();return _.useLayoutEffect(()=>(r.current&&i(hce({zIndex:e,element:r.current,isPanorama:n})),()=>{i(mce({zIndex:e,isPanorama:n}))}),[i,e,n]),_.createElement("g",{tabIndex:-1,ref:r})}function GD(t){var{children:e,isPanorama:n}=t,r=Le(rce);if(!r||r.length===0)return e;var i=r.filter(c=>c<0),a=r.filter(c=>c>0);return _.createElement(_.Fragment,null,i.map(c=>_.createElement(HD,{key:c,zIndex:c,isPanorama:n})),e,a.map(c=>_.createElement(HD,{key:c,zIndex:c,isPanorama:n})))}var Zpe=["children"];function ege(t,e){if(t==null)return{};var n,r,i=tge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ly(){return ly=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ly.apply(null,arguments)}var nge={width:"100%",height:"100%",display:"block"},rge=_.forwardRef((t,e)=>{var n=$3(),r=F3(),i=e6();if(!ta(n)||!ta(r))return null;var{children:a,otherAttributes:c,title:u,desc:f}=t,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),_.createElement(NL,ly({},c,{title:u,desc:f,role:p,tabIndex:h,width:n,height:r,style:nge,ref:e}),a)}),ige=t=>{var{children:e}=t,n=Le(n0);if(!n)return null;var{width:r,height:i,y:a,x:c}=n;return _.createElement(NL,{width:r,height:i,x:c,y:a},e)},KD=_.forwardRef((t,e)=>{var{children:n}=t,r=ege(t,Zpe),i=Sr();return i?_.createElement(ige,null,_.createElement(GD,{isPanorama:!0},n)):_.createElement(rge,ly({ref:e},r),_.createElement(GD,{isPanorama:!1},n))});function sge(){var t=wn(),[e,n]=_.useState(null),r=Le(Ite);return _.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;gt(a)&&a!==r&&t(hte(a))}},[e,t,r]),n}function QD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function age(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(n),!0).forEach(function(r){oge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oge(t,e,n){return(e=lge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lge(t){var e=cge(t,"string");return typeof e=="symbol"?e:e+""}function cge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ol(){return ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ol.apply(null,arguments)}var uge=()=>(Vce(),null);function cy(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var dge=_.forwardRef((t,e)=>{var n,r,i=_.useRef(null),[a,c]=_.useState({containerWidth:cy((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:cy((r=t.style)===null||r===void 0?void 0:r.height)}),u=_.useCallback((h,p)=>{c(g=>{var y=Math.round(h),x=Math.round(p);return g.containerWidth===y&&g.containerHeight===x?g:{containerWidth:y,containerHeight:x}})},[]),f=_.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();u(p,g);var y=E=>{var j=E[0];if(j!=null){var{width:N,height:A}=j.contentRect;u(N,A)}},x=new ResizeObserver(y);x.observe(h),i.current=x}},[e,u]);return _.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),_.createElement(_.Fragment,null,_.createElement(vm,{width:a.containerWidth,height:a.containerHeight}),_.createElement("div",ol({ref:f},t)))}),fge=_.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=_.useState({containerWidth:cy(n),containerHeight:cy(r)}),c=_.useCallback((f,h)=>{a(p=>{var g=Math.round(f),y=Math.round(h);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),u=_.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:h,height:p}=f.getBoundingClientRect();c(h,p)}},[e,c]);return _.createElement(_.Fragment,null,_.createElement(vm,{width:i.containerWidth,height:i.containerHeight}),_.createElement("div",ol({ref:u},t)))}),hge=_.forwardRef((t,e)=>{var{width:n,height:r}=t;return _.createElement(_.Fragment,null,_.createElement(vm,{width:n,height:r}),_.createElement("div",ol({ref:e},t)))}),mge=_.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?_.createElement(fge,ol({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?_.createElement(hge,ol({},t,{width:n,height:r,ref:e})):_.createElement(_.Fragment,null,_.createElement(vm,{width:n,height:r}),_.createElement("div",ol({ref:e},t)))});function pge(t){return t?dge:mge}var gge=_.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:c,onDoubleClick:u,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:y,onTouchEnd:x,onTouchMove:E,onTouchStart:j,style:N,width:A,responsive:R,dispatchTouchEvents:C=!0}=t,P=_.useRef(null),M=wn(),[B,D]=_.useState(null),[O,k]=_.useState(null),U=sge(),L=eN(),z=L?.width>0?L.width:A,V=L?.height>0?L.height:i,ge=_.useCallback(ie=>{U(ie),typeof e=="function"&&e(ie),D(ie),k(ie),ie!=null&&(P.current=ie)},[U,e,D,k]),Z=_.useCallback(ie=>{M(xU(ie)),M(Mi({handler:a,reactEvent:ie}))},[M,a]),H=_.useCallback(ie=>{M(yw(ie)),M(Mi({handler:h,reactEvent:ie}))},[M,h]),ae=_.useCallback(ie=>{M(eq()),M(Mi({handler:p,reactEvent:ie}))},[M,p]),X=_.useCallback(ie=>{M(yw(ie)),M(Mi({handler:g,reactEvent:ie}))},[M,g]),we=_.useCallback(()=>{M(SU())},[M]),W=_.useCallback(ie=>{M(NU(ie.key))},[M]),F=_.useCallback(ie=>{M(Mi({handler:c,reactEvent:ie}))},[M,c]),ne=_.useCallback(ie=>{M(Mi({handler:u,reactEvent:ie}))},[M,u]),ue=_.useCallback(ie=>{M(Mi({handler:f,reactEvent:ie}))},[M,f]),ve=_.useCallback(ie=>{M(Mi({handler:y,reactEvent:ie}))},[M,y]),fe=_.useCallback(ie=>{M(Mi({handler:j,reactEvent:ie}))},[M,j]),G=_.useCallback(ie=>{C&&M(TU(ie)),M(Mi({handler:E,reactEvent:ie}))},[M,C,E]),ce=_.useCallback(ie=>{M(Mi({handler:x,reactEvent:ie}))},[M,x]),Ce=pge(R);return _.createElement(_q.Provider,{value:B},_.createElement(bJ.Provider,{value:O},_.createElement(Ce,{width:z??N?.width,height:V??N?.height,className:Ut("recharts-wrapper",r),style:age({position:"relative",cursor:"default",width:z,height:V},N),onClick:Z,onContextMenu:F,onDoubleClick:ne,onFocus:we,onKeyDown:W,onMouseDown:ue,onMouseEnter:H,onMouseLeave:ae,onMouseMove:X,onMouseUp:ve,onTouchEnd:ce,onTouchMove:G,onTouchStart:fe,ref:ge},_.createElement(uge,null),n)))}),vge=["width","height","responsive","children","className","style","compact","title","desc"];function yge(t,e){if(t==null)return{};var n,r,i=bge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xge=_.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:c,style:u,compact:f,title:h,desc:p}=t,g=yge(t,vge),y=hs(g);return f?_.createElement(_.Fragment,null,_.createElement(vm,{width:n,height:r}),_.createElement(KD,{otherAttributes:y,title:h,desc:p},a)):_.createElement(gge,{className:c,style:u,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},_.createElement(KD,{otherAttributes:y,title:h,desc:p,ref:e},_.createElement(Ife,null,a)))});function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bw.apply(null,arguments)}var _ge={top:5,right:5,bottom:5,left:5},jge={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:_ge,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},PU=_.forwardRef(function(e,n){var r,i=Mr(e.categoricalChartProps,jge),{chartName:a,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:h}=e,p={chartName:a,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(Wpe,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:a},_.createElement(Efe,{chartData:h.data}),_.createElement(Xpe,{layout:i.layout,margin:i.margin}),_.createElement(Jpe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),_.createElement(xge,bw({},i,{ref:n})))}),wge=["axis"],Ege=_.forwardRef((t,e)=>_.createElement(PU,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wge,tooltipPayloadSearcher:jq,categoricalChartProps:t,ref:e})),Nge=["axis","item"],Sge=_.forwardRef((t,e)=>_.createElement(PU,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Nge,tooltipPayloadSearcher:jq,categoricalChartProps:t,ref:e}));const Age=8,Tge=12,Cge=14,Pge=1;function hS(t){return t instanceof Xe?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function WD(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function P0(){const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);return r.setDate(t.getDate()+n),r.setHours(0,0,0,0),r}function Ige(){const t=P0(),e=new Date(t);return e.setDate(t.getDate()+6),e.setHours(23,59,59,999),e}function M1(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function I0(t){try{const e=xt(We(Ne,"quiz_results"),it("userId","==",t),Vn("datePassage","desc"));return(await ht(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Erreur rcupration rsultats lve:",e),[]}}async function Oge(t){try{const e=await I0(t);if(e.length===0)return[];const n=new Map;e.forEach(a=>{const c=a.disciplineId;n.has(c)||n.set(c,[]),n.get(c).push(a)});const r=[];n.forEach((a,c)=>{if(a.length<Pge)return;const u=a.map(N=>N.pourcentage/100*20),f=u.reduce((N,A)=>N+A,0)/u.length;if(f>=Cge)return;let h="stable";if(u.length>=3){const N=u.slice(0,2),A=u.slice(2,4),R=N.reduce((M,B)=>M+B,0)/N.length,C=A.reduce((M,B)=>M+B,0)/A.length,P=R-C;P>1.5?h="hausse":P<-1.5&&(h="baisse")}let p="modere";f<Age?p="critique":f<Tge&&(p="important");const g=u[0],y=Math.max(...u),x=Math.min(...u),E=hS(a[0].datePassage),j=a[0].disciplineNom||"Discipline inconnue";r.push({id:`lacune_${c}`,disciplineId:c,disciplineNom:j,moyenne:Math.round(f*10)/10,nombreQuiz:a.length,tendance:h,niveauUrgence:p,dernierQuizDate:E,scoreDetails:{dernierScore:Math.round(g*10)/10,meilleurScore:Math.round(y*10)/10,pireScore:Math.round(x*10)/10}})});const i={critique:0,important:1,modere:2};return r.sort((a,c)=>{const u=i[a.niveauUrgence]-i[c.niveauUrgence];return u!==0?u:a.moyenne-c.moyenne}),r}catch(e){return console.error("Erreur dtection lacunes:",e),[]}}function Rge(t){const e=[];let n=1;return t.forEach(r=>{const{id:i,disciplineNom:a,niveauUrgence:c,moyenne:u,tendance:f}=r;switch(c){case"critique":e.push({id:`reco_cours_${i}`,lacuneId:i,type:"revoir_cours",titre:` Revoir les cours de ${a}`,description:`Ta moyenne est de ${u}/20 en ${a}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_quiz_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Refaire les quiz de ${a}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":e.push({id:`reco_exercice_${i}`,lacuneId:i,type:"exercice_cible",titre:` Exercices cibls en ${a}`,description:`Avec ${u}/20 de moyenne, concentre-toi sur les exercices pratiques. ${f==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_cours2_${i}`,lacuneId:i,type:"revoir_cours",titre:` Rviser les points cls en ${a}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":e.push({id:`reco_consolider_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Consolider tes acquis en ${a}`,description:`Tu es proche du niveau attendu (${u}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date});break}}),e}async function kge(t){try{const e=await I0(t);if(e.length===0)return{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;e.forEach(j=>{const N=hS(j.datePassage),A=`${N.getFullYear()}-${N.getMonth()}-${N.getDate()}`;n.add(A)});const r=Array.from(n).map(j=>{const[N,A,R]=j.split("-").map(Number);return new Date(N,A,R)}).sort((j,N)=>N.getTime()-j.getTime()),i=r.length,a=r[0];let c=0;const u=new Date;u.setHours(0,0,0,0);const f=r[0];if(M1(f,u)<=1){c=1;for(let j=1;j<r.length&&M1(r[j],r[j-1])===1;j++)c++}let p=0,g=1;for(let j=1;j<r.length;j++)M1(r[j],r[j-1])===1?g++:(p=Math.max(p,g),g=1);p=Math.max(p,g,c);const y=P0(),x=[];for(let j=0;j<7;j++){const N=new Date(y);N.setDate(y.getDate()+j);const A=r.some(R=>WD(R,N));x.push(A)}const E=[];for(let j=0;j<4;j++){const N=new Date(y);N.setDate(y.getDate()-j*7);let A=0;for(let C=0;C<7;C++){const P=new Date(N);P.setDate(N.getDate()+C),r.some(M=>WD(M,P))&&A++}const R=Math.ceil((N.getDate()+new Date(N.getFullYear(),N.getMonth(),1).getDay())/7);E.push({semaine:j===0?"Cette sem.":`Sem. -${j}`,joursActifs:A})}return{userId:t,streakActuel:c,meilleurStreak:p,dernierJourActif:a,totalJoursActifs:i,semaineCourante:x,historiqueHebdo:E.reverse()}}catch(e){return console.error("Erreur calcul streak:",e),{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function Dge(t,e,n){const r=[],i=P0(),a=Ige(),c=e.length>2?5:3;if(r.push({id:`obj_quiz_${t}_${i.getTime()}`,userId:t,titre:`Passer ${c} quiz cette semaine`,description:`Entrane-toi en passant au moins ${c} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:c,progression:0,statut:"en_cours",dateDebut:i,dateFin:a,recompense:' Badge "Travailleur"'}),e.length>0){const f=e[0],h=Math.min(f.moyenne+3,14);r.push({id:`obj_score_${t}_${i.getTime()}`,userId:t,titre:`Atteindre ${Math.round(h)}/20 en ${f.disciplineNom}`,description:`Ta moyenne actuelle est de ${f.moyenne}/20. Vise ${Math.round(h)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(h),progression:Math.round(f.moyenne),statut:"en_cours",disciplineId:f.disciplineId,disciplineNom:f.disciplineNom,dateDebut:i,dateFin:a,recompense:' Badge "En progrs"'})}const u=n.streakActuel>=5?7:n.streakActuel+2;return r.push({id:`obj_streak_${t}_${i.getTime()}`,userId:t,titre:`Maintenir un streak de ${u} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:u,progression:n.streakActuel,statut:n.streakActuel>=u?"atteint":"en_cours",dateDebut:i,dateFin:a,recompense:' Badge "Flamme"'}),r}function Mge(t,e,n,r){let i=0;if(r.length>0){const g=r.reduce((y,x)=>y+x.pourcentage/100*20,0)/r.length;i=Math.min(g/20*100,100)}let a=100;const c=t.filter(g=>g.niveauUrgence==="critique").length,u=t.filter(g=>g.niveauUrgence==="important").length;a-=c*25,a-=u*15,a=Math.max(a,0);const f=Math.min(e.streakActuel/7*100,100);let h=0;n.length>0&&(h=n.filter(y=>y.statut==="atteint").length/n.length*100);const p=i*.4+a*.25+f*.2+h*.15;return Math.round(Math.min(Math.max(p,0),100))}function zge(t,e,n){const r=P0(),i=e.filter(a=>hS(a.datePassage)>=r);return t.map(a=>{const c={...a};switch(a.type){case"quiz_count":c.progression=i.length;break;case"score_min":if(a.disciplineId){const u=i.filter(f=>f.disciplineId===a.disciplineId);if(u.length>0){const f=Math.max(...u.map(h=>h.pourcentage));c.progression=Math.round(f/100*20)}}break;case"streak":c.progression=n.streakActuel;break}return c.progression>=c.cible&&(c.statut="atteint"),c})}async function mS(t){try{const e=await Oge(t),n=Rge(e),r=await kge(t);let i=Dge(t,e,r);const a=await I0(t);i=zge(i,a,r);const c=Mge(e,r,i,a);return{lacunes:e,recommandations:n,streak:r,objectifs:i,scoreGlobal:c}}catch(e){return console.error("Erreur suivi complet:",e),{lacunes:[],recommandations:[],streak:{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function uy(t){switch(t){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function IU(t){switch(t){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function OU(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function Lge(t){return t>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":t>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":t>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":t>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function qge(t){return t.cible===0?0:Math.min(Math.round(t.progression/t.cible*100),100)}const Uge="PEDA",Vge=4,Bge=5,$ge=40,RU=5;function Ra(t){return t instanceof Xe?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function kU(t){const e=new Date,n=e.getDay(),r=n===0?-6:1-n,i=new Date(e);return i.setDate(e.getDate()+r),i.setHours(0,0,0,0),i}function Fge(t){const e=kU(),n=new Date(e);return n.setDate(e.getDate()+6),n.setHours(23,59,59,999),n}function YD(t){const e=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${t.getDate()} ${e[t.getMonth()]}`}function DU(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function Hge(t){try{const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",r="";for(let c=0;c<Vge;c++)n+=e.charAt(Math.floor(Math.random()*e.length)),r+=e.charAt(Math.floor(Math.random()*e.length));const i=`${Uge}-${n}-${r}`,a=He(Ne,"users",t);return await sn(a,{codeParent:i,codeParentGenere:new Date}),i}catch(e){throw console.error("Erreur gnration code invitation:",e),new Error("Impossible de gnrer le code d'invitation")}}async function Gge(t){try{const e=He(Ne,"users",t),n=await Er(e);if(!n.exists())throw new Error("lve introuvable");const r=n.data();return r.codeParent?r.codeParent:await Hge(t)}catch(e){throw console.error("Erreur rcupration code invitation:",e),new Error("Impossible de rcuprer le code d'invitation")}}async function Kge(t,e){try{const n=e.trim().toUpperCase(),r=We(Ne,"users"),i=xt(r,it("codeParent","==",n),it("role","==","eleve"),Js(1)),a=await ht(i);if(a.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const c=a.docs[0],u=c.data(),f=c.id,h=We(Ne,"liens_parent_enfant"),p=xt(h,it("parentId","==",t),it("enfantId","==",f),it("statut","==","actif"),Js(1));if(!(await ht(p)).empty)throw new Error("Cet enfant est dj li  votre compte.");const y={parentId:t,enfantId:f,enfantNom:u.displayName||u.email,enfantEmail:u.email,enfantClasse:u.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await Bi(h,y)).id,...y}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function Qge(t){try{const e=We(Ne,"liens_parent_enfant"),n=xt(e,it("parentId","==",t),it("statut","==","actif"),Vn("dateCreation","desc"));return(await ht(n)).docs.map(i=>({id:i.id,...i.data(),dateCreation:Ra(i.data().dateCreation),dateDerniereConsultation:i.data().dateDerniereConsultation?Ra(i.data().dateDerniereConsultation):void 0}))}catch(e){return console.error("Erreur rcupration enfants lis:",e),[]}}async function Wge(t,e){try{const n=He(Ne,"liens_parent_enfant",t),r=await Er(n);if(!r.exists())throw new Error("Lien introuvable");if(r.data().parentId!==e)throw new Error("Action non autorise");await sn(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function Yge(t,e){try{const n=We(Ne,"liens_parent_enfant"),r=xt(n,it("parentId","==",t),it("enfantId","==",e),it("statut","==","actif"),Js(1)),i=await ht(r);if(i.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const a=He(Ne,"users",e),c=await Er(a);if(!c.exists())throw new Error("Profil de l'enfant introuvable.");const u=c.data(),f=await mS(e),h=await I0(e),p=h.slice(0,RU).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:Ra(E.datePassage)})),g=await Xge(t,e,u.displayName||u.email,f.lacunes,f.streak,f.scoreGlobal,h),y=Jge(e,u.displayName||u.email,f,h),x=i.docs[0];return await sn(He(Ne,"liens_parent_enfant",x.id),{dateDerniereConsultation:new Date}),{enfant:{id:e,nom:u.displayName||u.email,email:u.email,classe:u.classe||void 0,derniereConnexion:u.lastLogin?Ra(u.lastLogin):void 0},scoreGlobal:f.scoreGlobal,streak:{actuel:f.streak.streakActuel,meilleur:f.streak.meilleurStreak,semaineCourante:f.streak.semaineCourante},lacunes:f.lacunes.map(E=>({disciplineNom:E.disciplineNom,moyenne:E.moyenne,niveauUrgence:E.niveauUrgence,tendance:E.tendance})),objectifs:f.objectifs.map(E=>({titre:E.titre,progression:E.progression,cible:E.cible,statut:E.statut})),derniersQuiz:p,resume:y,alertes:g}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function Xge(t,e,n,r,i,a,c){const u=[],f=new Date;if(r.filter(p=>p.niveauUrgence==="critique").forEach(p=>{u.push({id:`alerte_parent_lacune_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${p.disciplineNom}`,message:`${n} a une moyenne de ${p.moyenne}/20 en ${p.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:f})}),i.dernierJourActif){const p=DU(Ra(i.dernierJourActif),f);p>=Bge&&u.push({id:`alerte_parent_inactif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${p} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:f})}else c.length===0&&u.push({id:`alerte_parent_jamais_actif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:f});a<$ge&&c.length>0&&u.push({id:`alerte_parent_score_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${a}/100`,message:`Le score de sant global de ${n} est de ${a}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:f}),r.filter(p=>p.tendance==="hausse").forEach(p=>{u.push({id:`alerte_parent_progression_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${p.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${p.disciplineNom}.`,lue:!1,dateCreation:f})}),i.streakActuel>=5&&u.push({id:`alerte_parent_streak_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${i.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${i.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:f});const h={critique:0,important:1,modere:2,info:3};return u.sort((p,g)=>h[p.niveau]-h[g.niveau]),u}function Jge(t,e,n,r){const i=kU(),a=Fge(),c=new Date(i);c.setDate(c.getDate()-7);const u=new Date(a);u.setDate(u.getDate()-7);const f=r.filter(P=>{const M=Ra(P.datePassage);return M>=i&&M<=a}),h=r.filter(P=>{const M=Ra(P.datePassage);return M>=c&&M<=u}),p=f.slice(0,RU).map(P=>({quizTitre:P.quizTitre||"Quiz",disciplineNom:P.disciplineNom||"Discipline",pourcentage:P.pourcentage,noteSur20:Math.round(P.pourcentage/100*20*10)/10,reussi:P.reussi,datePassage:Ra(P.datePassage)})),g=Zge(f,h),y=new Set;f.forEach(P=>{const M=Ra(P.datePassage);y.add(`${M.getFullYear()}-${M.getMonth()}-${M.getDate()}`)});const x=f.reduce((P,M)=>P+(M.tempsEcoule||5),0);let E=0;if(h.length>0){const P=h.reduce((M,B)=>M+B.pourcentage,0)/h.length;E=Math.round(P)}let j="stable";const N=n.scoreGlobal-E;N>5?j="hausse":N<-5&&(j="baisse");const A=n.lacunes.filter(P=>P.niveauUrgence==="critique"||P.niveauUrgence==="important").map(P=>P.disciplineNom),R=n.objectifs.filter(P=>P.statut==="atteint").length,C=`${YD(i)} - ${YD(a)} ${a.getFullYear()}`;return{enfantId:t,enfantNom:e,semaine:C,dateDebut:i,dateFin:a,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:E,evolutionScore:j,nombreQuizSemaine:f.length,tempsEstimeMinutes:Math.round(x),joursActifsSemaine:y.size,streakActuel:n.streak.streakActuel,derniersQuiz:p,evolutionDisciplines:g,lacunesCritiques:n.lacunes.filter(P=>P.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(P=>P.niveauUrgence==="important").length,disciplinesEnDifficulte:A,objectifsAtteints:R,objectifsTotal:n.objectifs.length}}function Zge(t,e){const n=new Map;t.forEach(a=>{n.has(a.disciplineId)||n.set(a.disciplineId,{scores:[],nom:a.disciplineNom||"Discipline"}),n.get(a.disciplineId).scores.push(a.pourcentage)});const r=new Map;e.forEach(a=>{r.has(a.disciplineId)||r.set(a.disciplineId,[]),r.get(a.disciplineId).push(a.pourcentage)});const i=[];return n.forEach((a,c)=>{const u=a.scores.reduce((E,j)=>E+j,0)/a.scores.length,f=r.get(c)||[],h=f.length>0?f.reduce((E,j)=>E+j,0)/f.length:u,p=Math.round(u/100*20*10)/10,g=Math.round(h/100*20*10)/10,y=Math.round((p-g)*10)/10;let x="stable";y>1?x="hausse":y<-1&&(x="baisse"),i.push({disciplineNom:a.nom,disciplineId:c,moyenneSemainePrecedente:g,moyenneSemaineCourante:p,evolution:x,ecart:y})}),i}function eve(t){return uy(t)}function tve(t){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[t]||"Alerte"}function XD(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function nve(t){return t>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":t>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":t>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":t>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function z1(t){const n=DU(t,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const rve="PROF",ive=4,Ag="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",MU=8,sve=7,ave=16;function Dc(t){return t instanceof Xe?t.toDate():t instanceof Date?t:t?.seconds?new Xe(t.seconds,t.nanoseconds||0).toDate():new Date(t)}function ove(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function zU(){let t=0;const e=10;for(;t<e;){let n="",r="";for(let u=0;u<ive;u++)n+=Ag.charAt(Math.floor(Math.random()*Ag.length)),r+=Ag.charAt(Math.floor(Math.random()*Ag.length));const i=`${rve}-${n}-${r}`,a=xt(We(Ne,"groupes_prof"),it("codeInvitation","==",i),Js(1));if((await ht(a)).empty)return i;t++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function lve(t,e,n){try{const r=await zU(),i={profId:t,profNom:e,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:r,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},a=await Bi(We(Ne,"groupes_prof"),i);return console.log(` Groupe "${n.nom}" cr avec code: ${r}`),{id:a.id,...i}}catch(r){throw console.error(" Erreur cration groupe:",r),new Error("Impossible de crer le groupe. Ressayez.")}}async function LU(t){try{const e=xt(We(Ne,"groupes_prof"),it("profId","==",t),Vn("dateCreation","desc"));return(await ht(e)).docs.map(r=>({id:r.id,...r.data(),dateCreation:Dc(r.data().dateCreation),dateMiseAJour:r.data().dateMiseAJour?Dc(r.data().dateMiseAJour):void 0}))}catch(e){throw console.error(" Erreur rcupration groupes:",e),new Error("Impossible de charger vos groupes.")}}async function cve(t){try{const e=await Er(He(Ne,"groupes_prof",t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,dateCreation:Dc(n.dateCreation),dateMiseAJour:n.dateMiseAJour?Dc(n.dateMiseAJour):void 0}}catch(e){return console.error(" Erreur rcupration groupe:",e),null}}async function qU(t,e){try{const n=He(Ne,"groupes_prof",t);await sn(n,{...e,dateMiseAJour:new Date}),console.log(` Groupe ${t} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function uve(t){try{const e=Oh(Ne),n=xt(We(Ne,"inscriptions_groupe"),it("groupeId","==",t));(await ht(n)).docs.forEach(i=>e.delete(i.ref)),e.delete(He(Ne,"groupes_prof",t)),await e.commit(),console.log(` Groupe ${t} et ses inscriptions supprims`)}catch(e){throw console.error(" Erreur suppression groupe:",e),new Error("Impossible de supprimer le groupe.")}}async function dve(t){await qU(t,{statut:"archive"})}async function fve(t){try{const e=await zU();return await sn(He(Ne,"groupes_prof",t),{codeInvitation:e,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${t}: ${e}`),e}catch(e){throw console.error(" Erreur rgnration code:",e),new Error("Impossible de rgnrer le code.")}}async function hve(t,e,n,r){try{const i=r.trim().toUpperCase(),a=xt(We(Ne,"groupes_prof"),it("codeInvitation","==",i),Js(1)),c=await ht(a);if(c.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=c.docs[0],f=u.data();if(f.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const h=xt(We(Ne,"inscriptions_groupe"),it("groupeId","==",u.id),it("eleveId","==",t),it("statut","==","actif"),Js(1));if(!(await ht(h)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const g={groupeId:u.id,eleveId:t,eleveNom:e,eleveEmail:n,statut:"actif",dateInscription:new Date},y=await Bi(We(Ne,"inscriptions_groupe"),g);return await sn(He(Ne,"groupes_prof",u.id),{nombreInscrits:M4(1),dateMiseAJour:new Date}),console.log(` lve ${e} inscrit au groupe "${f.nom}"`),{id:y.id,...g}}catch(i){throw console.error(" Erreur inscription groupe:",i),i}}async function O0(t,e="actif"){try{const n=xt(We(Ne,"inscriptions_groupe"),it("groupeId","==",t),it("statut","==",e),Vn("dateInscription","asc"));return(await ht(n)).docs.map(i=>({id:i.id,...i.data(),dateInscription:Dc(i.data().dateInscription),dateRetrait:i.data().dateRetrait?Dc(i.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function mve(t){try{const e=xt(We(Ne,"inscriptions_groupe"),it("eleveId","==",t),it("statut","==","actif")),n=await ht(e);if(n.empty)return[];const r=[];for(const i of n.docs){const a=i.data().groupeId,c=await cve(a);c&&c.statut==="actif"&&r.push(c)}return r}catch(e){return console.error(" Erreur rcupration groupes lve:",e),[]}}async function pve(t,e){try{await sn(He(Ne,"inscriptions_groupe",t),{statut:"retire",dateRetrait:new Date}),await sn(He(Ne,"groupes_prof",e),{nombreInscrits:M4(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function pS(t){try{const n=(await O0(t)).map(y=>y.eleveId);if(n.length===0)return{groupeId:t,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const r=[],i=[];for(let y=0;y<n.length;y+=10)i.push(n.slice(y,y+10));for(const y of i){const x=xt(We(Ne,"quiz_results"),it("userId","in",y));(await ht(x)).docs.forEach(j=>r.push({id:j.id,...j.data()}))}const a=new Map;for(const y of r){const x=y.userId;a.has(x)||a.set(x,{total:0,somme:0,reussis:0});const E=a.get(x);E.total++,E.somme+=y.score||0,(y.score||0)>=10&&E.reussis++}let c=0,u=0,f=0,h=0,p=20,g=0;for(const[,y]of a){const x=y.total>0?y.somme/y.total:0;c+=x,u++,g+=y.total,x<MU&&f++,x>h&&(h=x),x<p&&(p=x)}return u===0&&(p=0),{groupeId:t,nombreEleves:n.length,moyenneClasse:u>0?Math.round(c/u*10)/10:0,tauxReussite:g>0?Math.round(Array.from(a.values()).reduce((y,x)=>y+x.reussis,0)/g*100):0,tauxParticipation:Math.round(u/n.length*100),totalQuizPasses:g,elevesEnDifficulte:f,meilleureNote:Math.round(h*10)/10,pireNote:Math.round(p*10)/10,derniereMiseAJour:new Date}}catch(e){throw console.error(" Erreur calcul stats groupe:",e),new Error("Impossible de calculer les statistiques du groupe.")}}async function gve(t){try{const e=await O0(t);if(e.length===0)return[];const n=[];for(const r of e)try{const i=await mS(r.eleveId),a=xt(We(Ne,"quiz_results"),it("userId","==",r.eleveId),Vn("datePassage","desc")),u=(await ht(a)).docs.map(x=>x.data());let f=0,h=0,p;if(u.length>0){const x=u.reduce((E,j)=>E+(j.score||0),0);f=Math.round(x/u.length*10)/10,h=Math.round(u.filter(E=>(E.score||0)>=10).length/u.length*100),p=Dc(u[0].datePassage)}let g="stable";if(u.length>=4){const x=u.slice(0,Math.ceil(u.length/2)),E=u.slice(Math.ceil(u.length/2)),j=x.reduce((A,R)=>A+(R.score||0),0)/x.length,N=E.reduce((A,R)=>A+(R.score||0),0)/E.length;j-N>1?g="hausse":N-j>1&&(g="baisse")}const y=i.lacunes.map(x=>({disciplineNom:x.disciplineNom,chapitre:x.chapitre,moyenne:x.moyenne,niveauUrgence:x.niveauUrgence}));n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:f,totalQuiz:u.length,tauxReussite:h,scoreGlobal:i.scoreGlobal,streak:{actuel:i.streak.streakActuel,meilleur:i.streak.meilleurStreak},lacunes:y,dernierQuiz:p,tendance:g})}catch(i){console.warn(` Suivi incomplet pour lve ${r.eleveNom}:`,i),n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((r,i)=>i.moyenne-r.moyenne),n}catch(e){throw console.error(" Erreur stats lves groupe:",e),new Error("Impossible de charger les statistiques des lves.")}}async function vve(t,e,n){try{const i=(await O0(t)).map(x=>x.eleveId);if(i.length===0)return null;let a=null,c="quiz_results";if(n!=="quizzes_v2"){if(n!=="quizzes"){const x=await Er(He(Ne,"quizzes_v2",e));if(x.exists())a=x.data(),c="quiz_results_v2";else{const E=await Er(He(Ne,"quizzes",e));E.exists()&&(a=E.data(),c="quiz_results")}}}if(!a)return null;const u=[],f=[];for(let x=0;x<i.length;x+=10)f.push(i.slice(x,x+10));for(const x of f){const E=xt(We(Ne,c),it("quizId","==",e),it("userId","in",x));(await ht(E)).docs.forEach(N=>u.push(N.data()))}if(u.length===0)return null;const h=c==="quiz_results_v2",p=u.map(x=>h?x.note20||(x.scoreMax>0?x.score/x.scoreMax*20:0):x.score||0),g=u.map(x=>x.tempsEcoule||0),y=[];if(h&&a.questions)for(let x=0;x<a.questions.length;x++){const E=a.questions[x];let j=0,N=0;for(const C of u){const P=C.detailsParQuestion?.find(M=>M.questionId===E.id);P&&(N++,P.isCorrect||j++)}const A=N>0?Math.round(j/N*100):0,R=E.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${x+1}`;y.push({questionIndex:x,questionTexte:R,tauxEchec:A,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(a.questions)for(let x=0;x<a.questions.length;x++){const E=a.questions[x];let j=0;const N=new Map;for(const C of u){const P=C.reponses?.[x];P!==void 0&&(N.set(P,(N.get(P)||0)+1),P!==E.reponseCorrecte&&j++)}const A=Math.round(j/u.length*100),R=Array.from(N.entries()).filter(([C])=>C!==E.reponseCorrecte).map(([C,P])=>({reponse:E.options?.[C]||`Option ${C+1}`,nombre:P})).sort((C,P)=>P.nombre-C.nombre);y.push({questionIndex:x,questionTexte:E.question,tauxEchec:A,reponseCorrecte:E.options?.[E.reponseCorrecte]||"N/A",reponsesFrequentes:R})}return y.sort((x,E)=>E.tauxEchec-x.tauxEchec),{quizId:e,quizTitre:a.titre||"Quiz sans titre",disciplineNom:a.disciplineNom||a.matiereNom||"",totalPassages:u.length,moyenneScore:Math.round(p.reduce((x,E)=>x+E,0)/p.length*10)/10,tauxReussite:Math.round(p.filter(x=>x>=10).length/p.length*100),tempsEcouleMoyen:Math.round(g.reduce((x,E)=>x+E,0)/g.length),questionsRatees:y}}catch(r){return console.error(" Erreur analyse quiz groupe:",r),null}}async function yve(t){try{const e=[];try{const n=xt(We(Ne,"quizzes"),it("disciplineId","==",t),Vn("createdAt","desc"));(await ht(n)).docs.forEach(i=>{e.push({id:i.id,titre:i.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(n){console.warn(" Recherche quizzes choue (index manquant ?):",n)}try{const n=xt(We(Ne,"quizzes_v2"),it("disciplineId","==",t),Vn("createdAt","desc"));(await ht(n)).docs.forEach(i=>{e.push({id:i.id,titre:i.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(n){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",n)}return console.log(` ${e.length} quiz trouv(s) pour discipline ${t}`),e}catch(e){return console.error(" Erreur rcupration quiz par matire:",e),[]}}function bve(t,e){const n=[],r=new Date;for(const a of t){if(a.totalQuiz>0&&a.moyenne<MU&&n.push({id:`diff-${a.eleveId}`,type:"difficulte",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} a une moyenne de ${a.moyenne}/20. Lacunes : ${a.lacunes.map(c=>c.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:a.moyenne<5?"critique":"important",dateCreation:r}),a.dernierQuiz){const c=ove(a.dernierQuiz,r);c>=sve&&n.push({id:`inact-${a.eleveId}`,type:"inactivite",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} n'a pas fait de quiz depuis ${c} jours.`,niveauUrgence:c>=14?"important":"info",dateCreation:r})}else a.totalQuiz===0&&n.push({id:`inact-${a.eleveId}`,type:"inactivite",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:r});a.tendance==="baisse"&&a.totalQuiz>=4&&n.push({id:`baisse-${a.eleveId}`,type:"baisse",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:r}),a.moyenne>=ave&&a.totalQuiz>=3&&n.push({id:`felicite-${a.eleveId}`,type:"felicitation",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} excelle avec ${a.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:r})}const i={critique:0,important:1,info:2};return n.sort((a,c)=>i[a.niveauUrgence]-i[c.niveauUrgence]),n}function xve(t,e){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],r=t.map(a=>{const c=a.lacunes.map(u=>`${u.disciplineNom} (${u.moyenne}/20)`).join(" | ")||"Aucune";return[`"${a.eleveNom}"`,`"${a.eleveEmail}"`,a.moyenne.toString(),a.totalQuiz.toString(),a.tauxReussite.toString(),a.streak.actuel.toString(),`"${c}"`,a.tendance].join(",")});return"\uFEFF"+[n.join(","),...r].join(`
`)}function _ve(t,e){const n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${e}.csv`,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}const jve=()=>{const{currentUser:t}=Bn(),[e,n]=_.useState([]),[r,i]=_.useState(!1),[a,c]=_.useState(""),[u,f]=_.useState(!0),[h,p]=_.useState(!1),[g,y]=_.useState(null),[x,E]=_.useState(null),j=_.useCallback(async()=>{if(t?.uid)try{f(!0);const A=await mve(t.uid);n(A)}catch(A){console.error("Erreur chargement groupes:",A)}finally{f(!1)}},[t?.uid]);_.useEffect(()=>{j()},[j]);const N=async A=>{if(A.preventDefault(),!(!t?.uid||!a.trim()))try{p(!0),y(null),E(null),await hve(t.uid,t.displayName||t.email||"lve",t.email||"",a),E("Tu as rejoint le groupe avec succs ! "),c(""),i(!1),await j(),setTimeout(()=>E(null),5e3)}catch(R){y(R.message||"Impossible de rejoindre le groupe.")}finally{p(!1)}};return o.jsxs("div",{className:"rejoindre-groupe-section",children:[o.jsxs("div",{className:"rejoindre-groupe-header",children:[o.jsx("h3",{children:" Mes groupes-classes"}),o.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>i(!r),children:r?" Annuler":" Rejoindre un groupe"})]}),g&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",g,o.jsx("button",{onClick:()=>y(null),className:"prof-alert-close",children:""})]}),x&&o.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:x}),r&&o.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[o.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),o.jsxs("form",{onSubmit:N,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:a,onChange:A=>c(A.target.value.toUpperCase()),maxLength:14,disabled:h,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:h||a.length<14,children:h?" Vrification...":" Rejoindre"})]})]}),u?o.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):e.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[o.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),o.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(A=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#1f2937"},children:A.nom}),o.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[A.matiereNom,"  Prof: ",A.profNom]})]}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},A.id))})]})},wve=t=>t>=80?"#10b981":t>=60?"#3b82f6":t>=40?"#f59e0b":t>0?"#ef4444":"#d1d5db",JD=({pourcentage:t,label:e,size:n="md",showPercent:r=!0,color:i,showCheck:a=!0,className:c=""})=>{const[u,f]=_.useState(0);_.useEffect(()=>{const x=setTimeout(()=>{f(Math.min(100,Math.max(0,t)))},100);return()=>clearTimeout(x)},[t]);const p={sm:"4px",md:"8px",lg:"12px"}[n],g=i||wve(t),y=t>=100;return o.jsxs("div",{className:`progress-bar-wrapper ${c}`,children:[(e||r)&&o.jsxs("div",{className:"progress-bar-header",children:[e&&o.jsx("span",{className:"progress-bar-label",children:e}),r&&o.jsxs("span",{className:"progress-bar-percent",style:{color:g},children:[y&&a?" ":"",t,"%"]})]}),o.jsx("div",{className:"progress-bar-track",style:{height:p},children:o.jsx("div",{className:"progress-bar-fill",style:{width:`${u}%`,backgroundColor:g,height:"100%"}})})]})},Eve=()=>{const t=Nr(),{currentUser:e}=Bn(),[n,r]=_.useState(null),[i,a]=_.useState([]),[c,u]=_.useState([]),[f,h]=_.useState([]),[p,g]=_.useState([]),[y,x]=_.useState(null),[E,j]=_.useState([]),[N,A]=_.useState("all"),[R,C]=_.useState(!0),[P,M]=_.useState("overview"),[B,D]=_.useState(null),[O,k]=_.useState(!1),[U,L]=_.useState(!1),z=async()=>{if(e){k(!0);try{const X=await Gge(e.uid);D(X)}catch(X){console.error("Erreur gnration code parent :",X)}finally{k(!1)}}},V=()=>{B&&(navigator.clipboard.writeText(B),L(!0),setTimeout(()=>L(!1),2e3))};if(_.useEffect(()=>{(async()=>{if(e){C(!0);try{await aJ(e.uid);const[we,W,F,ne,ue,ve]=await Promise.all([YX(e.uid),XX(e.uid),JX(e.uid,20),Ly(e.uid,10),pL().catch(()=>[]),rJ(e.uid)]);r(we),a(W),u(F),h(ne),g(ue),x(ve);const fe=oJ(we,W,ve);j(fe)}catch(we){console.error("Erreur chargement dashboard :",we)}finally{C(!1)}}})()},[e]),R)return o.jsxs("div",{className:"sd-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const ge=E.filter(X=>X.obtenu),Z=E.length,H=e?.displayName||e?.email?.split("@")[0]||"lve",ae=N==="all"?E:E.filter(X=>X.categorie===N);return o.jsxs("div",{className:"student-dashboard",children:[o.jsxs("div",{className:"sd-welcome",children:[o.jsxs("div",{className:"sd-welcome-text",children:[o.jsxs("h1",{children:["Bienvenue, ",H," "]}),o.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),o.jsxs("div",{className:"sd-welcome-badges-row",children:[e?.isPremium&&o.jsxs("span",{className:"sd-premium-badge",children:[o.jsx(pi,{size:14})," Premium"]}),y&&y.streakActuel>0&&o.jsxs("span",{className:"sd-streak-badge",children:[" ",y.streakActuel," jour",y.streakActuel>1?"s":""]})]})]}),o.jsxs("div",{className:"sd-stats-grid",children:[o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:o.jsx(cs,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),o.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:o.jsx(Xx,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",style:{color:$u(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),o.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:o.jsx(Zu,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsx("span",{className:"sd-stat-value",children:y?.totalRessourcesVues||0}),o.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:o.jsx(lL,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",children:[y?.streakActuel||0," "]}),o.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:o.jsx(oL,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),o.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:o.jsx(pl,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",children:[y?.disciplinesCompletees||0,"/",y?.disciplinesCommencees||0]}),o.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),o.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[o.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),o.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),B?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:B}),o.jsx("button",{className:"sd-btn",onClick:V,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:U?"#10b981":"#f3f4f6",color:U?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:U?" Copi !":" Copier"})]}):o.jsx("button",{className:"sd-btn sd-btn-primary",onClick:z,disabled:O,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:O?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):o.jsx(o.Fragment,{children:" Gnrer mon code"})})]}),o.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:o.jsx(jve,{})}),o.jsxs("div",{className:"sd-tabs",children:[o.jsxs("button",{className:`sd-tab ${P==="overview"?"active":""}`,onClick:()=>M("overview"),children:[o.jsx(mc,{size:16})," Vue d'ensemble"]}),o.jsxs("button",{className:`sd-tab ${P==="progression"?"active":""}`,onClick:()=>M("progression"),children:[o.jsx(ah,{size:16})," Progression"]}),o.jsxs("button",{className:`sd-tab ${P==="history"?"active":""}`,onClick:()=>M("history"),children:[o.jsx(Yx,{size:16})," Historique"]}),o.jsxs("button",{className:`sd-tab ${P==="badges"?"active":""}`,onClick:()=>M("badges"),children:[o.jsx(pl,{size:16})," Badges (",ge.length,"/",Z,")"]})]}),P==="overview"&&o.jsxs("div",{className:"sd-overview",children:[c.length>1&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(ah,{size:18})," volution de vos scores"]}),o.jsx("div",{className:"sd-chart-container",children:o.jsx(RO,{width:"100%",height:280,children:o.jsxs(Ege,{data:c,children:[o.jsx(cw,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),o.jsx(mw,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),o.jsx(vw,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),o.jsx(Uk,{formatter:X=>[`${X}%`,"Score"],labelFormatter:X=>`Date : ${X}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),o.jsx(hU,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),i.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(mc,{size:18})," Moyennes par discipline"]}),o.jsx("div",{className:"sd-chart-container",children:o.jsx(RO,{width:"100%",height:280,children:o.jsxs(Sge,{data:i,layout:"vertical",children:[o.jsx(cw,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),o.jsx(mw,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),o.jsx(vw,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),o.jsx(Uk,{formatter:X=>[`${X}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),o.jsx(yU,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:i.map((X,we)=>o.jsx(nS,{fill:$u(X.moyenne)},we))})]})})})]}),p.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(vh,{size:18})," Quiz disponibles"]}),o.jsx("div",{className:"sd-quiz-grid",children:p.slice(0,6).map(X=>{const we=X.isPremium&&!e?.isPremium;return o.jsxs("div",{className:`sd-quiz-card ${we?"locked":""}`,onClick:()=>!we&&t(`/quiz/${X.id}`),children:[X.isPremium&&o.jsxs("span",{className:"sd-quiz-badge-premium",children:[we?o.jsx(vj,{size:10}):o.jsx(pi,{size:10})," Premium"]}),o.jsx("h4",{className:"sd-quiz-title",children:X.titre}),o.jsxs("div",{className:"sd-quiz-meta",children:[o.jsxs("span",{children:[o.jsx(cs,{size:12})," ",X.questions.length," questions"]}),o.jsxs("span",{children:[o.jsx(cd,{size:12})," ",X.duree," min"]})]}),!we&&o.jsxs("button",{className:"sd-quiz-play-btn",children:[o.jsx(vh,{size:14})," Commencer"]}),we&&o.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:W=>{W.stopPropagation(),t("/premium")},children:[o.jsx(vj,{size:14})," Dbloquer"]})]},X.id)})})]}),n&&n.totalQuizPasses===0&&(!y||y.totalRessourcesVues===0)&&o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(Xx,{size:48}),o.jsx("h3",{children:"Commencez votre parcours !"}),o.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),p.length>0&&o.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>t(`/quiz/${p[0].id}`),children:[o.jsx(vh,{size:18})," Passer un quiz"]})]})]}),P==="progression"&&o.jsxs("div",{className:"sd-progression",children:[o.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(ah,{size:18})," Avancement global"]}),o.jsx(JD,{pourcentage:y?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),o.jsxs("div",{className:"sd-prog-stats-row",children:[o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsx("span",{className:"sd-prog-stat-number",children:y?.totalRessourcesVues||0}),o.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsx("span",{className:"sd-prog-stat-number",children:y?.totalQuizReussis||0}),o.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsx("span",{className:"sd-prog-stat-number",children:y?.disciplinesCommencees||0}),o.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsxs("span",{className:"sd-prog-stat-number",children:[" ",y?.streakActuel||0]}),o.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",y?.meilleurStreak||0,")"]})]})]})]}),y&&y.parDiscipline.length>0?o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(mc,{size:18})," Par discipline"]}),o.jsx("div",{className:"sd-prog-disciplines",children:y.parDiscipline.map(X=>o.jsxs("div",{className:"sd-prog-disc-card",children:[o.jsxs("div",{className:"sd-prog-disc-header",children:[o.jsx("span",{className:"sd-prog-disc-name",children:X.disciplineNom}),X.pourcentage>=100&&o.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),o.jsx(JD,{pourcentage:X.pourcentage,size:"md",showPercent:!0}),o.jsxs("div",{className:"sd-prog-disc-details",children:[o.jsxs("span",{children:[o.jsx(Zu,{size:12})," ",X.ressourcesVues.length,"/",X.totalRessources," ressources"]}),o.jsxs("span",{children:[o.jsx(fn,{size:12})," ",X.quizReussis.length,"/",X.totalQuiz," quiz russis"]})]})]},X.disciplineId))})]}):o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(Zu,{size:48}),o.jsx("h3",{children:"Aucune progression enregistre"}),o.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),i.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(Xx,{size:18})," Performance quiz par discipline"]}),o.jsx("div",{className:"sd-disc-list",children:i.map(X=>o.jsxs("div",{className:"sd-disc-card",children:[o.jsxs("div",{className:"sd-disc-header",children:[o.jsx("span",{className:"sd-disc-name",children:X.disciplineNom}),o.jsxs("span",{className:"sd-disc-tendance",children:[X.tendance==="up"&&o.jsx(ah,{size:16,className:"tendance-up"}),X.tendance==="down"&&o.jsx(TY,{size:16,className:"tendance-down"}),X.tendance==="stable"&&o.jsx(sY,{size:16,className:"tendance-stable"})]})]}),o.jsxs("div",{className:"sd-disc-stats",children:[o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",style:{color:$u(X.moyenne)},children:[X.moyenne,"%"]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsx("span",{className:"sd-disc-stat-value",children:X.nombreQuiz}),o.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",children:[X.meilleurScore,"%"]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",children:[X.quizReussis,"/",X.nombreQuiz]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),o.jsx("div",{className:"sd-disc-bar",children:o.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${X.moyenne}%`,background:$u(X.moyenne)}})})]},X.disciplineId))})]})]}),P==="history"&&o.jsx("div",{className:"sd-history",children:f.length===0?o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(Yx,{size:48}),o.jsx("h3",{children:"Aucun quiz pass"}),o.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):o.jsx("div",{className:"sd-history-list",children:f.map(X=>{const we=X.datePassage?.toDate?X.datePassage.toDate():new Date(X.datePassage);return o.jsxs("div",{className:`sd-history-item ${X.reussi?"success":"fail"}`,children:[o.jsx("div",{className:`sd-history-icon ${X.reussi?"success":"fail"}`,children:X.reussi?o.jsx(fn,{size:20}):o.jsx(pj,{size:20})}),o.jsxs("div",{className:"sd-history-content",children:[o.jsxs("div",{className:"sd-history-top",children:[o.jsx("span",{className:"sd-history-title",children:X.quizTitre}),o.jsx("span",{className:"sd-history-discipline",children:X.disciplineNom})]}),o.jsxs("div",{className:"sd-history-meta",children:[o.jsxs("span",{children:[o.jsx(Yx,{size:12}),we.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),o.jsxs("span",{children:[o.jsx(cd,{size:12})," ",xL(X.tempsEcoule)]}),o.jsxs("span",{children:[o.jsx(fn,{size:12})," ",X.bonnesReponses,"/",X.nombreQuestions]})]})]}),o.jsxs("div",{className:"sd-history-score",style:{color:$u(X.pourcentage)},children:[o.jsxs("span",{className:"sd-history-score-value",children:[X.pourcentage,"%"]}),o.jsx("span",{className:"sd-history-score-label",children:_L(X.pourcentage)})]})]},X.id)})})}),P==="badges"&&o.jsxs("div",{className:"sd-badges",children:[o.jsxs("div",{className:"sd-badges-summary",children:[o.jsxs("div",{className:"sd-badges-circle",children:[o.jsx("span",{className:"sd-badges-count",children:ge.length}),o.jsxs("span",{className:"sd-badges-total",children:["/ ",Z]})]}),o.jsx("p",{children:"badges obtenus"}),o.jsx("div",{className:"sd-badges-progress",children:o.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${ge.length/Z*100}%`}})})]}),o.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(X=>o.jsx("button",{className:`sd-badge-filter-btn ${N===X.key?"active":""}`,onClick:()=>A(X.key),children:X.label},X.key))}),o.jsx("div",{className:"sd-badges-grid",children:ae.map(X=>o.jsxs("div",{className:`sd-badge-card ${X.obtenu?"obtained":"locked"}`,children:[o.jsx("span",{className:"sd-badge-icon",children:X.icone}),o.jsx("h4",{className:"sd-badge-name",children:X.nom}),o.jsx("p",{className:"sd-badge-description",children:X.description}),o.jsx("span",{className:"sd-badge-condition",children:X.condition}),X.obtenu&&o.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),o.jsx("span",{className:"sd-badge-category",children:X.categorie})]},X.id))}),ae.length===0&&o.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[o.jsx(OE,{size:36}),o.jsx("h3",{children:"Aucun badge dans cette catgorie"}),o.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},Nve=()=>{const{currentUser:t}=Bn(),e=Nr(),[n,r]=_.useState(null),[i,a]=_.useState(!0),[c,u]=_.useState(null),f=["L","M","M","J","V","S","D"],h=_.useCallback(async()=>{if(t?.uid)try{a(!0),u(null);const C=await mS(t.uid);r(C)}catch(C){console.error("Erreur chargement suivi:",C),u("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{a(!1)}},[t?.uid]);_.useEffect(()=>{h()},[h]);const p=(()=>{const C=new Date().getDay();return C===0?6:C-1})();if(i)return o.jsx("div",{className:"suivi-page",children:o.jsx("div",{className:"suivi-container",children:o.jsxs("div",{className:"suivi-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(c)return o.jsx("div",{className:"suivi-page",children:o.jsx("div",{className:"suivi-container",children:o.jsxs("div",{className:"suivi-error",children:[o.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),o.jsx("p",{className:"suivi-error-text",children:c}),o.jsx("button",{className:"suivi-btn-retry",onClick:h,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:g,recommandations:y,streak:x,objectifs:E,scoreGlobal:j}=n,N=2*Math.PI*40,A=N-j/100*N,R=j>=60?"#10b981":j>=30?"#f59e0b":"#ef4444";return o.jsx("div",{className:"suivi-page",children:o.jsxs("div",{className:"suivi-container",children:[o.jsx("div",{className:"suivi-header",children:o.jsxs("div",{className:"suivi-header-content",children:[o.jsxs("div",{children:[o.jsx("h1",{children:" Mes points  amliorer"}),o.jsx("p",{className:"suivi-motivation",children:Lge(j)})]}),o.jsxs("div",{className:"score-global-circle",children:[o.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),o.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:R,strokeDasharray:N,strokeDashoffset:A}),o.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:j})]}),o.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),o.jsxs("div",{className:"streak-card",children:[o.jsxs("div",{className:"streak-header",children:[o.jsx("span",{className:"streak-flamme",children:x.streakActuel>0?"":""}),o.jsxs("div",{children:[o.jsx("div",{className:"streak-nombre",children:x.streakActuel}),o.jsx("div",{className:"streak-label",children:x.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),o.jsx("div",{className:"streak-semaine",children:f.map((C,P)=>o.jsxs("div",{className:"streak-jour",children:[o.jsx("span",{className:"streak-jour-label",children:C}),o.jsx("div",{className:`streak-jour-indicateur ${x.semaineCourante[P]?"actif":"inactif"} ${P===p?"aujourd-hui":""}`,children:x.semaineCourante[P]?"":""})]},P))}),o.jsxs("div",{className:"streak-stats",children:[o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsx("span",{className:"streak-stat-value",children:x.meilleurStreak}),o.jsx("span",{className:"streak-stat-label",children:"record"})]}),o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsx("span",{className:"streak-stat-value",children:x.totalJoursActifs}),o.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),x.dernierJourActif&&o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(x.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),o.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",o.jsx("span",{className:"suivi-section-badge",children:E.length})]}),E.length>0?o.jsx("div",{className:"objectifs-grid",children:E.map(C=>{const P=qge(C);return o.jsxs("div",{className:`objectif-card ${C.statut==="atteint"?"atteint":""}`,children:[o.jsxs("div",{className:"objectif-header",children:[o.jsx("span",{className:"objectif-titre",children:C.titre}),C.recompense&&o.jsx("span",{className:"objectif-recompense",children:C.recompense})]}),o.jsx("p",{className:"objectif-description",children:C.description}),o.jsxs("div",{className:"objectif-progress",children:[o.jsxs("div",{className:"objectif-progress-labels",children:[o.jsxs("span",{className:"objectif-progress-value",children:[C.progression," / ",C.cible]}),o.jsxs("span",{className:"objectif-progress-cible",children:[P,"%"]})]}),o.jsx("div",{className:"objectif-progress-track",children:o.jsx("div",{className:`objectif-progress-fill ${C.statut==="atteint"?"atteint":""}`,style:{width:`${P}%`}})})]}),o.jsx("p",{className:`objectif-statut ${C.statut}`,children:C.statut==="atteint"?" Objectif atteint !":C.statut==="en_cours"?" En cours...":" Non commenc"})]},C.id)})}):o.jsxs("div",{className:"suivi-empty",children:[o.jsx("div",{className:"suivi-empty-icon",children:""}),o.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),o.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),o.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",g.length>0&&o.jsx("span",{className:"suivi-section-badge",children:g.length})]}),g.length>0?o.jsx("div",{className:"lacunes-grid",children:g.map(C=>o.jsxs("div",{className:`lacune-card ${C.niveauUrgence}`,children:[o.jsxs("div",{className:"lacune-card-header",children:[o.jsx("span",{className:"lacune-discipline",children:C.disciplineNom}),o.jsx("span",{className:`lacune-badge ${C.niveauUrgence}`,children:IU(C.niveauUrgence)})]}),o.jsxs("div",{className:"lacune-score-bar",children:[o.jsxs("div",{className:"lacune-score-labels",children:[o.jsxs("span",{className:"lacune-score-value",style:{color:uy(C.niveauUrgence)},children:[C.moyenne,"/20"]}),o.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),o.jsx("div",{className:"lacune-progress-track",children:o.jsx("div",{className:`lacune-progress-fill ${C.niveauUrgence}`,style:{width:`${C.moyenne/20*100}%`}})})]}),o.jsxs("div",{className:"lacune-details",children:[o.jsxs("span",{className:"lacune-detail-tag",children:[OU(C.tendance)," ",C.tendance]}),o.jsxs("span",{className:"lacune-detail-tag",children:[" ",C.nombreQuiz," quiz"]}),o.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",C.scoreDetails.dernierScore,"/20"]})]})]},C.id))}):o.jsxs("div",{className:"suivi-empty",children:[o.jsx("div",{className:"suivi-empty-icon",children:""}),o.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),o.jsx("p",{className:"suivi-empty-text",children:j>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),o.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),y.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",o.jsx("span",{className:"suivi-section-badge",children:y.length})]}),o.jsx("div",{className:"recommandations-list",children:y.map(C=>o.jsxs("div",{className:"recommandation-card",children:[o.jsx("div",{className:"recommandation-priorite",children:C.priorite}),o.jsxs("div",{className:"recommandation-content",children:[o.jsx("p",{className:"recommandation-titre",children:C.titre}),o.jsx("p",{className:"recommandation-description",children:C.description}),o.jsx("span",{className:"recommandation-discipline-tag",children:C.disciplineNom})]})]},C.id))})]}),o.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:o.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),children:" Passer un quiz maintenant"})})]})})},Sve=()=>{const t=new Date,e=t.getFullYear(),r=t.getMonth()>=9?e:e-1,i=[];for(let a=-1;a<=3;a++){const c=r+a;i.push(`${c}-${c+1}`)}return i},ZD=Sve(),Jf=()=>{const t=new Date,e=t.getFullYear(),r=t.getMonth()>=9?e:e-1;return`${r}-${r+1}`},eM=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],Ave=({onSelectGroupe:t})=>{const{currentUser:e}=Bn(),[n,r]=_.useState([]),[i,a]=_.useState(new Map),[c,u]=_.useState([]),[f,h]=_.useState(!0),[p,g]=_.useState(null),[y,x]=_.useState(!1),[E,j]=_.useState(!1),[N,A]=_.useState(null),[R,C]=_.useState(null),[P,M]=_.useState(null),[B,D]=_.useState(!1),[O,k]=_.useState(null),[U,L]=_.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jf()}),[z,V]=_.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jf()}),[ge,Z]=_.useState("actif");_.useEffect(()=>{(async()=>{try{const Q=await wl.getAll();u(Q.map(me=>({id:me.id,nom:me.nom,classe:me.classe||""})))}catch(Q){console.warn(" Impossible de charger les disciplines:",Q)}})()},[]);const H=_.useCallback(async()=>{if(e?.uid)try{h(!0),g(null);const J=await LU(e.uid);r(J);const Q=new Map;for(const me of J)if(me.statut==="actif")try{const Te=await pS(me.id);Q.set(me.id,Te)}catch{console.warn(`Stats indisponibles pour ${me.nom}`)}a(Q)}catch(J){console.error("Erreur chargement groupes:",J),g("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{h(!1)}},[e?.uid]);_.useEffect(()=>{H()},[H]);const ae=(J,Q=!1)=>{const me=c.find(ze=>ze.id===J),Te=me?`${me.nom}${me.classe?` (${me.classe})`:""}`:"";Q?V(ze=>({...ze,matiereId:J,matiereNom:Te})):L(ze=>({...ze,matiereId:J,matiereNom:Te}))},X=async J=>{if(J.preventDefault(),!(!e?.uid||!U.nom.trim()||!U.matiereId))try{j(!0),await lve(e.uid,e.displayName||e.email||"Professeur",U),L({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jf()}),x(!1),k("Groupe cr avec succs !"),setTimeout(()=>k(null),3e3),await H()}catch(Q){g(Q.message||"Erreur lors de la cration du groupe.")}finally{j(!1)}},we=J=>{M(J),V({nom:J.nom,description:J.description||"",matiereId:J.matiereId,matiereNom:J.matiereNom,classeNiveau:J.classeNiveau,anneeScolaire:J.anneeScolaire}),x(!1)},W=()=>{M(null),V({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jf()})},F=async J=>{if(J.preventDefault(),!(!P||!z.nom.trim()||!z.matiereId))try{D(!0),await qU(P.id,{nom:z.nom.trim(),description:z.description?.trim()||"",matiereId:z.matiereId,matiereNom:z.matiereNom,classeNiveau:z.classeNiveau,anneeScolaire:z.anneeScolaire}),M(null),k("Groupe modifi avec succs !"),setTimeout(()=>k(null),3e3),await H()}catch(Q){g(Q.message||"Erreur lors de la modification du groupe.")}finally{D(!1)}},ne=async J=>{try{await navigator.clipboard.writeText(J),A(J),setTimeout(()=>A(null),2e3)}catch{const Q=document.createElement("textarea");Q.value=J,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q),A(J),setTimeout(()=>A(null),2e3)}},ue=async J=>{try{await uve(J),C(null),await H()}catch(Q){g(Q.message)}},ve=async J=>{try{await dve(J),await H()}catch(Q){g(Q.message)}},fe=async J=>{try{await fve(J),await H()}catch(Q){g(Q.message)}},G=(J,Q)=>{L(me=>({...me,[J]:Q}))},ce=(J,Q)=>{V(me=>({...me,[J]:Q}))},Ce=n.filter(J=>ge==="tous"?!0:J.statut===ge),ie=(J,Q,me)=>o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:J,children:"Discipline / Matire *"}),o.jsxs("select",{id:J,value:Q,onChange:Te=>me(Te.target.value),className:"prof-select",required:!0,children:[o.jsx("option",{value:"",children:" Slectionner une discipline "}),c.map(Te=>o.jsxs("option",{value:Te.id,children:[Te.nom,Te.classe?` (${Te.classe})`:""]},Te.id))]}),c.length===0&&o.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return f?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):o.jsxs("div",{className:"groupe-manager",children:[o.jsxs("div",{className:"groupe-manager-header",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),o.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",Jf()]})]}),o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{x(!y),P&&W()},children:y?" Annuler":" Nouveau groupe"})]}),p&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[o.jsx("span",{children:""})," ",p,o.jsx("button",{onClick:()=>g(null),className:"prof-alert-close",children:""})]}),O&&o.jsxs("div",{className:"prof-alert prof-alert-success",children:[o.jsx("span",{children:""})," ",O,o.jsx("button",{onClick:()=>k(null),className:"prof-alert-close",children:""})]}),y&&o.jsxs("div",{className:"groupe-form-container",children:[o.jsx("h3",{children:"Crer un nouveau groupe-classe"}),o.jsxs("form",{onSubmit:X,className:"groupe-form",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),o.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:U.nom,onChange:J=>G("nom",J.target.value),required:!0,className:"prof-input",maxLength:60})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),o.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:U.description||"",onChange:J=>G("description",J.target.value),className:"prof-input",maxLength:120})]}),o.jsxs("div",{className:"prof-form-row",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),o.jsx("select",{id:"groupe-niveau",value:U.classeNiveau,onChange:J=>G("classeNiveau",J.target.value),className:"prof-select",children:eM.map(J=>o.jsx("option",{value:J.value,children:J.label},J.value))})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),o.jsx("select",{id:"groupe-annee",value:U.anneeScolaire,onChange:J=>G("anneeScolaire",J.target.value),className:"prof-select",children:ZD.map(J=>o.jsx("option",{value:J,children:J},J))})]})]}),ie("groupe-discipline",U.matiereId,J=>ae(J,!1)),o.jsx("div",{className:"prof-form-actions",children:o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:E||!U.nom.trim()||!U.matiereId,children:E?" Cration...":" Crer le groupe"})})]})]}),P&&o.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[o.jsxs("h3",{children:[" Modifier le groupe : ",P.nom]}),o.jsxs("form",{onSubmit:F,className:"groupe-form",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),o.jsx("input",{id:"edit-groupe-nom",type:"text",value:z.nom,onChange:J=>ce("nom",J.target.value),required:!0,className:"prof-input",maxLength:60})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),o.jsx("input",{id:"edit-groupe-desc",type:"text",value:z.description||"",onChange:J=>ce("description",J.target.value),className:"prof-input",maxLength:120})]}),o.jsxs("div",{className:"prof-form-row",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),o.jsx("select",{id:"edit-groupe-niveau",value:z.classeNiveau,onChange:J=>ce("classeNiveau",J.target.value),className:"prof-select",children:eM.map(J=>o.jsx("option",{value:J.value,children:J.label},J.value))})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),o.jsx("select",{id:"edit-groupe-annee",value:z.anneeScolaire,onChange:J=>ce("anneeScolaire",J.target.value),className:"prof-select",children:ZD.map(J=>o.jsx("option",{value:J,children:J},J))})]})]}),ie("edit-groupe-discipline",z.matiereId,J=>ae(J,!0)),o.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:B||!z.nom.trim()||!z.matiereId,children:B?" Enregistrement...":" Enregistrer"}),o.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:W,disabled:B,children:" Annuler"})]})]})]}),o.jsxs("div",{className:"groupe-filtres",children:[o.jsxs("button",{className:`prof-filtre-btn ${ge==="actif"?"active":""}`,onClick:()=>Z("actif"),children:["Actifs (",n.filter(J=>J.statut==="actif").length,")"]}),o.jsxs("button",{className:`prof-filtre-btn ${ge==="archive"?"active":""}`,onClick:()=>Z("archive"),children:["Archivs (",n.filter(J=>J.statut==="archive").length,")"]}),o.jsxs("button",{className:`prof-filtre-btn ${ge==="tous"?"active":""}`,onClick:()=>Z("tous"),children:["Tous (",n.length,")"]})]}),Ce.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:ge==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),o.jsx("p",{children:ge==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),ge!=="archive"&&o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>x(!0),children:" Crer mon premier groupe"})]}):o.jsx("div",{className:"groupe-grid",children:Ce.map(J=>{const Q=i.get(J.id),me=P?.id===J.id;return o.jsxs("div",{className:`groupe-card ${J.statut==="archive"?"groupe-card-archive":""} ${me?"groupe-card-editing":""}`,children:[o.jsxs("div",{className:"groupe-card-header",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"groupe-card-titre",children:J.nom}),o.jsx("span",{className:"groupe-card-matiere",children:J.matiereNom})]}),o.jsx("span",{className:`groupe-badge groupe-badge-${J.statut}`,children:J.statut==="actif"?" Actif":" Archiv"})]}),J.description&&o.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:J.description}),o.jsxs("div",{className:"groupe-card-infos",children:[o.jsxs("span",{children:[" ",J.classeNiveau]}),o.jsxs("span",{children:[" ",J.anneeScolaire]}),o.jsxs("span",{children:[" ",J.nombreInscrits," lve",J.nombreInscrits!==1?"s":""]})]}),o.jsxs("div",{className:"groupe-card-code",children:[o.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),o.jsxs("div",{className:"groupe-code-box",children:[o.jsx("code",{className:"groupe-code-value",children:J.codeInvitation}),o.jsx("button",{className:"prof-btn-icon",onClick:Te=>{Te.stopPropagation(),ne(J.codeInvitation)},title:"Copier le code",children:N===J.codeInvitation?"":""}),J.statut==="actif"&&o.jsx("button",{className:"prof-btn-icon",onClick:Te=>{Te.stopPropagation(),fe(J.id)},title:"Rgnrer le code",children:""})]})]}),Q&&Q.nombreEleves>0&&o.jsxs("div",{className:"groupe-card-stats",children:[o.jsxs("div",{className:"groupe-stat-item",children:[o.jsx("span",{className:"groupe-stat-value",children:Q.moyenneClasse}),o.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),o.jsxs("div",{className:"groupe-stat-item",children:[o.jsxs("span",{className:"groupe-stat-value",children:[Q.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),o.jsxs("div",{className:"groupe-stat-item",children:[o.jsx("span",{className:"groupe-stat-value",children:Q.elevesEnDifficulte}),o.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),o.jsxs("div",{className:"groupe-card-actions",children:[J.statut==="actif"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>t(J),children:" Voir dtails"}),o.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>we(J),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>ve(J.id),children:" Archiver"})]}),R===J.id?o.jsxs("div",{className:"groupe-confirm-suppression",children:[o.jsx("span",{children:"Confirmer ?"}),o.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>ue(J.id),children:"Oui, supprimer"}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>C(null),children:"Non"})]}):o.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>C(J.id),children:" Supprimer"})]})]},J.id)})})]})},Tve=({groupe:t,onRetour:e})=>{const[n,r]=_.useState(null),[i,a]=_.useState([]),[c,u]=_.useState([]),[f,h]=_.useState([]),[p,g]=_.useState(null),[y,x]=_.useState(!0),[E,j]=_.useState(null),[N,A]=_.useState("apercu"),[R,C]=_.useState("moyenne_desc"),[P,M]=_.useState(null),[B,D]=_.useState(null),[O,k]=_.useState(!1),[U,L]=_.useState(null),z=_.useCallback(async()=>{try{x(!0),j(null);const[W,F,ne]=await Promise.all([pS(t.id),gve(t.id),yve(t.matiereId)]);r(W),a(F),h(ne);const ue=bve(F,t.nom);u(ue)}catch(W){console.error("Erreur chargement dtail groupe:",W),j("Impossible de charger les donnes du groupe.")}finally{x(!1)}},[t.id,t.matiereId,t.nom]);_.useEffect(()=>{z()},[z]);const V=async W=>{try{k(!0),D(W);const F=await vve(t.id,W);g(F)}catch(F){console.error("Erreur analyse quiz:",F)}finally{k(!1)}},ge=()=>{const W=xve(i,t.nom),F=`PedaClic_${t.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;_ve(W,F)},Z=async W=>{try{L(W);const ne=(await O0(t.id)).find(ue=>ue.eleveId===W);ne&&(await pve(ne.id,t.id),await z())}catch(F){j(F.message)}finally{L(null)}},H=[...i].sort((W,F)=>{switch(R){case"moyenne_desc":return F.moyenne-W.moyenne;case"moyenne_asc":return W.moyenne-F.moyenne;case"nom":return W.eleveNom.localeCompare(F.eleveNom);case"streak":return F.streak.actuel-W.streak.actuel;case"quiz_count":return F.totalQuiz-W.totalQuiz;default:return 0}}),ae=W=>W>=16?"prof-note-excellent":W>=12?"prof-note-bien":W>=10?"prof-note-passable":W>=8?"prof-note-insuffisant":"prof-note-critique",X=W=>{switch(W){case"hausse":return"";case"baisse":return"";default:return""}},we=W=>{switch(W){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return y?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsxs("p",{children:['Chargement des donnes de "',t.nom,'"...']})]}):o.jsxs("div",{className:"groupe-detail",children:[o.jsxs("div",{className:"groupe-detail-header",children:[o.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:e,children:" Retour aux groupes"}),o.jsxs("div",{className:"groupe-detail-titre-section",children:[o.jsx("h2",{className:"groupe-detail-titre",children:t.nom}),o.jsxs("p",{className:"groupe-detail-subtitle",children:[t.matiereNom,"  ",t.classeNiveau,"  ",t.anneeScolaire]})]}),o.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:ge,children:" Export CSV"})]}),E&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",E,o.jsx("button",{onClick:()=>j(null),className:"prof-alert-close",children:""})]}),o.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:i.length},{id:"quiz",label:" Quiz",count:f.length},{id:"alertes",label:" Alertes",count:c.length}].map(W=>o.jsxs("button",{className:`groupe-onglet ${N===W.id?"active":""}`,onClick:()=>A(W.id),children:[W.label,W.count!==null&&W.count>0&&o.jsx("span",{className:"groupe-onglet-badge",children:W.count})]},W.id))}),N==="apercu"&&n&&o.jsxs("div",{className:"groupe-apercu",children:[o.jsxs("div",{className:"groupe-stats-grid",children:[o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:`groupe-stat-card-value ${ae(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),o.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),o.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),o.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),o.jsx("div",{className:"groupe-apercu-notes",children:o.jsxs("div",{className:"groupe-note-range",children:[o.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),o.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),o.jsx("div",{className:"groupe-note-barre",children:o.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),o.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),i.length>=3&&o.jsxs("div",{className:"groupe-apercu-classement",children:[o.jsxs("div",{className:"groupe-classement-section",children:[o.jsx("h4",{children:" Top 3"}),i.slice(0,3).map((W,F)=>o.jsxs("div",{className:"groupe-classement-item",children:[o.jsx("span",{className:"groupe-classement-rang",children:F===0?"":F===1?"":""}),o.jsx("span",{className:"groupe-classement-nom",children:W.eleveNom}),o.jsxs("span",{className:`groupe-classement-note ${ae(W.moyenne)}`,children:[W.moyenne,"/20"]})]},W.eleveId))]}),o.jsxs("div",{className:"groupe-classement-section",children:[o.jsx("h4",{children:"  surveiller"}),i.filter(W=>W.moyenne<8&&W.totalQuiz>0).slice(0,3).map(W=>o.jsxs("div",{className:"groupe-classement-item",children:[o.jsx("span",{className:"groupe-classement-rang",children:""}),o.jsx("span",{className:"groupe-classement-nom",children:W.eleveNom}),o.jsxs("span",{className:`groupe-classement-note ${ae(W.moyenne)}`,children:[W.moyenne,"/20"]})]},W.eleveId)),i.filter(W=>W.moyenne<8&&W.totalQuiz>0).length===0&&o.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),N==="eleves"&&o.jsxs("div",{className:"groupe-eleves",children:[o.jsxs("div",{className:"groupe-eleves-toolbar",children:[o.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),o.jsxs("select",{id:"tri-eleves",value:R,onChange:W=>C(W.target.value),className:"prof-select prof-select-sm",children:[o.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),o.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),o.jsx("option",{value:"nom",children:"Nom (A-Z)"}),o.jsx("option",{value:"streak",children:"Streak ()"}),o.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),o.jsxs("span",{className:"groupe-eleves-count",children:[i.length," lve",i.length!==1?"s":""]})]}),i.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Aucun lve inscrit"}),o.jsxs("p",{children:["Partagez le code ",o.jsx("strong",{children:t.codeInvitation}),"  vos lves."]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"groupe-eleves-table-wrapper",children:o.jsxs("table",{className:"groupe-eleves-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"#"}),o.jsx("th",{children:"lve"}),o.jsx("th",{children:"Moyenne"}),o.jsx("th",{children:"Quiz"}),o.jsx("th",{children:"Russite"}),o.jsx("th",{children:"Streak"}),o.jsx("th",{children:"Tendance"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:H.map((W,F)=>o.jsxs("tr",{className:`${P===W.eleveId?"groupe-eleve-row-active":""}`,children:[o.jsx("td",{className:"groupe-eleve-rang",children:F+1}),o.jsx("td",{className:"groupe-eleve-nom-cell",children:o.jsxs("div",{children:[o.jsx("strong",{children:W.eleveNom}),o.jsx("span",{className:"groupe-eleve-email",children:W.eleveEmail})]})}),o.jsx("td",{children:o.jsxs("span",{className:`groupe-note-badge ${ae(W.moyenne)}`,children:[W.moyenne,"/20"]})}),o.jsx("td",{children:W.totalQuiz}),o.jsxs("td",{children:[W.tauxReussite,"%"]}),o.jsx("td",{children:o.jsxs("span",{className:"groupe-streak",children:[" ",W.streak.actuel,"j"]})}),o.jsxs("td",{children:[X(W.tendance)," ",W.tendance]}),o.jsxs("td",{className:"groupe-eleve-actions",children:[o.jsx("button",{className:"prof-btn-icon",onClick:()=>M(P===W.eleveId?null:W.eleveId),title:"Voir dtails",children:P===W.eleveId?"":""}),o.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>Z(W.eleveId),disabled:U===W.eleveId,title:"Retirer du groupe",children:U===W.eleveId?"":""})]})]},W.eleveId))})]})}),P&&(()=>{const W=i.find(F=>F.eleveId===P);return W?o.jsxs("div",{className:"groupe-eleve-detail",children:[o.jsxs("div",{className:"groupe-eleve-detail-header",children:[o.jsxs("h3",{children:[" Dtail  ",W.eleveNom]}),o.jsx("button",{className:"prof-btn-icon",onClick:()=>M(null),children:""})]}),o.jsxs("div",{className:"groupe-eleve-detail-grid",children:[o.jsxs("div",{className:"groupe-eleve-detail-card",children:[o.jsx("h4",{children:"Score global"}),o.jsx("div",{className:"groupe-eleve-score-circle",children:o.jsxs("span",{className:ae(W.scoreGlobal/5),children:[W.scoreGlobal,"/100"]})})]}),o.jsxs("div",{className:"groupe-eleve-detail-card",children:[o.jsx("h4",{children:" Streak"}),o.jsxs("p",{children:["Actuel : ",o.jsxs("strong",{children:[W.streak.actuel," jour",W.streak.actuel!==1?"s":""]})]}),o.jsxs("p",{children:["Meilleur : ",W.streak.meilleur," jours"]})]}),o.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[o.jsx("h4",{children:" Lacunes dtectes"}),W.lacunes.length===0?o.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):o.jsx("ul",{className:"groupe-lacunes-liste",children:W.lacunes.map((F,ne)=>o.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${F.niveauUrgence}`,children:[o.jsxs("span",{className:"groupe-lacune-nom",children:[F.disciplineNom,F.chapitre&&`  ${F.chapitre}`]}),o.jsxs("span",{className:"groupe-lacune-moyenne",children:[F.moyenne,"/20"]}),o.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${F.niveauUrgence}`,children:F.niveauUrgence})]},ne))})]})]})]}):null})()]})]}),N==="quiz"&&o.jsxs("div",{className:"groupe-quiz",children:[o.jsxs("div",{className:"groupe-quiz-selector",children:[o.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),o.jsxs("select",{id:"select-quiz",value:B||"",onChange:W=>{W.target.value&&V(W.target.value)},className:"prof-select",children:[o.jsx("option",{value:"",children:" Choisir un quiz "}),f.map(W=>o.jsx("option",{value:W.id,children:W.titre},W.id))]})]}),!B&&o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Analyse par quiz"}),o.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),O&&o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Analyse en cours..."})]}),p&&!O&&o.jsxs("div",{className:"groupe-quiz-resultats",children:[o.jsxs("div",{className:"groupe-quiz-stats-header",children:[o.jsx("h3",{children:p.quizTitre}),o.jsxs("div",{className:"groupe-quiz-stats-grid",children:[o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsx("span",{className:"groupe-stat-mini-value",children:p.totalPassages}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:`groupe-stat-mini-value ${ae(p.moyenneScore)}`,children:[p.moyenneScore,"/20"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:"groupe-stat-mini-value",children:[p.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(p.tempsEcouleMoyen/60),"min"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),o.jsxs("div",{className:"groupe-quiz-questions",children:[o.jsx("h4",{children:" Questions les plus rates"}),p.questionsRatees.filter(W=>W.tauxEchec>30).map((W,F)=>o.jsxs("div",{className:"groupe-quiz-question-card",children:[o.jsxs("div",{className:"groupe-quiz-question-header",children:[o.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",W.questionIndex+1]}),o.jsxs("span",{className:"groupe-quiz-question-echec",children:[W.tauxEchec,"% d'chec"]})]}),o.jsx("p",{className:"groupe-quiz-question-texte",children:W.questionTexte}),o.jsx("div",{className:"groupe-quiz-question-reponse",children:o.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",W.reponseCorrecte]})}),W.reponsesFrequentes.length>0&&o.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[o.jsx("span",{children:"Erreurs frquentes :"}),W.reponsesFrequentes.slice(0,2).map((ne,ue)=>o.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",ne.reponse," (",ne.nombre," lve",ne.nombre>1?"s":"",")"]},ue))]})]},F)),p.questionsRatees.filter(W=>W.tauxEchec>30).length===0&&o.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),N==="alertes"&&o.jsx("div",{className:"groupe-alertes",children:c.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Aucune alerte"}),o.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):o.jsx("div",{className:"groupe-alertes-liste",children:c.map(W=>o.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${W.niveauUrgence}`,children:[o.jsxs("div",{className:"groupe-alerte-header",children:[o.jsx("span",{className:"groupe-alerte-emoji",children:we(W.type)}),o.jsx("span",{className:"groupe-alerte-eleve",children:W.eleveNom}),o.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${W.niveauUrgence}`,children:W.niveauUrgence})]}),o.jsx("p",{className:"groupe-alerte-message",children:W.message}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{A("eleves"),M(W.eleveId)},children:" Voir dtail"})]},W.id))})})]})},Cve=()=>{const{currentUser:t}=Bn(),[e,n]=_.useState("overview"),[r,i]=_.useState(null),[a,c]=_.useState(0),[u,f]=_.useState(0),[h,p]=_.useState(0),[g,y]=_.useState(0),[x,E]=_.useState([]),[j,N]=_.useState(!0),A=_.useCallback(async()=>{if(t?.uid)try{N(!0);const M=(await LU(t.uid)).filter(L=>L.statut==="actif");c(M.length);let B=0,D=0,O=0,k=0;const U=[];for(const L of M)try{const z=await pS(L.id);B+=z.nombreEleves,z.nombreEleves>0&&(D+=z.moyenneClasse,O++),k+=z.elevesEnDifficulte,U.push({...L,stats:z})}catch{U.push({...L})}f(B),p(O>0?Math.round(D/O*10)/10:0),y(k),E(U)}catch(P){console.error("Erreur chargement rsum prof:",P)}finally{N(!1)}},[t?.uid]);_.useEffect(()=>{A()},[A]);const R=P=>{i(P),n("detail")},C=()=>{i(null),n("groupes"),A()};return j?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement de votre espace professeur..."})]}):o.jsxs("div",{className:"prof-dashboard",children:[o.jsx("header",{className:"prof-dashboard-header",children:o.jsxs("div",{children:[o.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),o.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",t?.displayName||"Professeur"," "]})]})}),e!=="detail"&&o.jsxs("nav",{className:"prof-nav",children:[o.jsx("button",{className:`prof-nav-btn ${e==="overview"?"active":""}`,onClick:()=>n("overview"),children:" Vue d'ensemble"}),o.jsx("button",{className:`prof-nav-btn ${e==="groupes"?"active":""}`,onClick:()=>n("groupes"),children:" Mes groupes-classes"})]}),e==="overview"&&o.jsxs("div",{className:"prof-overview",children:[o.jsxs("div",{className:"prof-overview-cards",children:[o.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>n("groupes"),children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:"prof-overview-card-value",children:a}),o.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",a!==1?"s":""," actif",a!==1?"s":""]})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:"prof-overview-card-value",children:u}),o.jsxs("span",{className:"prof-overview-card-label",children:["lve",u!==1?"s":""," inscrit",u!==1?"s":""]})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),o.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:`prof-overview-card-value ${g>0?"prof-note-critique":""}`,children:g}),o.jsxs("span",{className:"prof-overview-card-label",children:["lve",g!==1?"s":""," en difficult"]})]})]})]}),x.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),o.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>n("groupes"),children:" Crer un groupe-classe"})]}):o.jsxs("div",{className:"prof-overview-groupes",children:[o.jsx("h2",{children:"Mes groupes"}),o.jsx("div",{className:"prof-overview-groupes-grid",children:x.map(P=>o.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>R(P),children:[o.jsxs("div",{className:"prof-overview-groupe-header",children:[o.jsx("h3",{children:P.nom}),o.jsx("span",{className:"prof-overview-groupe-matiere",children:P.matiereNom})]}),P.stats&&o.jsxs("div",{className:"prof-overview-groupe-stats",children:[o.jsxs("div",{children:[o.jsx("span",{className:"prof-overview-groupe-stat-value",children:P.stats.nombreEleves}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[P.stats.moyenneClasse,"/20"]}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[P.stats.tauxReussite,"%"]}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),o.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},P.id))})]})]}),e==="groupes"&&o.jsx(Ave,{onSelectGroupe:R}),e==="detail"&&r&&o.jsx(Tve,{groupe:r,onRetour:C})]})},Pve=()=>{const{currentUser:t}=Bn(),e=t?.uid||"",n=t?.displayName||"Parent",[r,i]=_.useState([]),[a,c]=_.useState(null),[u,f]=_.useState(null),[h,p]=_.useState(!0),[g,y]=_.useState(!1),[x,E]=_.useState(null),[j,N]=_.useState(!1),[A,R]=_.useState(""),[C,P]=_.useState(!1),[M,B]=_.useState(null),[D,O]=_.useState(null),[k,U]=_.useState("apercu");_.useEffect(()=>{L()},[e]),_.useEffect(()=>{a&&z(a)},[a]);const L=async()=>{try{p(!0),E(null);const Z=await Qge(e);i(Z),Z.length===1&&c(Z[0].enfantId)}catch(Z){E("Erreur lors du chargement des enfants."),console.error(Z)}finally{p(!1)}},z=async Z=>{try{y(!0),E(null);const H=await Yge(e,Z);f(H)}catch(H){E(H.message||"Erreur lors du chargement du suivi."),f(null)}finally{y(!1)}},V=async Z=>{if(Z.preventDefault(),B(null),O(null),!A.trim()){B("Veuillez saisir le code d'invitation.");return}try{P(!0);const H=await Kge(e,A);O(`${H.enfantNom} a t ajout avec succs !`),R(""),N(!1),await L(),c(H.enfantId)}catch(H){B(H.message||"Erreur lors de la liaison.")}finally{P(!1)}},ge=async Z=>{if(window.confirm(`tes-vous sr de vouloir retirer ${Z.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await Wge(Z.id,e),a===Z.enfantId&&(c(null),f(null)),await L()}catch(ae){E(ae.message||"Erreur lors de la suppression.")}};return h?o.jsxs("div",{className:"parent-loading",children:[o.jsx("div",{className:"parent-spinner"}),o.jsx("p",{children:"Chargement de votre espace parent..."})]}):o.jsxs("div",{className:"parent-dashboard",children:[o.jsxs("header",{className:"parent-header",children:[o.jsxs("div",{className:"parent-header-info",children:[o.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),o.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",o.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{N(!j),B(null),O(null)},children:" Ajouter un enfant"})]}),x&&o.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[o.jsxs("span",{children:[" ",x]}),o.jsx("button",{onClick:()=>E(null),children:""})]}),D&&o.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[o.jsxs("span",{children:[" ",D]}),o.jsx("button",{onClick:()=>O(null),children:""})]}),j&&o.jsxs("div",{className:"parent-form-liaison",children:[o.jsx("h3",{children:" Lier un enfant  votre compte"}),o.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),o.jsxs("form",{onSubmit:V,className:"parent-form",children:[o.jsxs("div",{className:"parent-form-group",children:[o.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),o.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:A,onChange:Z=>R(Z.target.value.toUpperCase()),maxLength:14,disabled:C,className:"parent-input"})]}),M&&o.jsxs("p",{className:"parent-form-erreur",children:[" ",M]}),o.jsxs("div",{className:"parent-form-actions",children:[o.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:C,children:C?"Vrification...":" Valider"}),o.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>N(!1),children:"Annuler"})]})]})]}),r.length===0?o.jsxs("div",{className:"parent-empty-state",children:[o.jsx("div",{className:"parent-empty-icon",children:""}),o.jsx("h2",{children:"Aucun enfant li"}),o.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>N(!0),children:" Ajouter mon premier enfant"})]}):o.jsxs("div",{className:"parent-content",children:[o.jsxs("aside",{className:"parent-sidebar",children:[o.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),o.jsx("ul",{className:"parent-enfants-liste",children:r.map(Z=>o.jsxs("li",{className:`parent-enfant-card ${a===Z.enfantId?"parent-enfant-actif":""}`,onClick:()=>c(Z.enfantId),children:[o.jsx("div",{className:"parent-enfant-avatar",children:Z.enfantNom.charAt(0).toUpperCase()}),o.jsxs("div",{className:"parent-enfant-info",children:[o.jsx("span",{className:"parent-enfant-nom",children:Z.enfantNom}),Z.enfantClasse&&o.jsx("span",{className:"parent-enfant-classe",children:Z.enfantClasse})]}),o.jsx("button",{className:"parent-enfant-supprimer",onClick:H=>{H.stopPropagation(),ge(Z)},title:"Retirer cet enfant",children:""})]},Z.id))})]}),o.jsx("main",{className:"parent-main",children:a?g?o.jsxs("div",{className:"parent-loading",children:[o.jsx("div",{className:"parent-spinner"}),o.jsx("p",{children:"Chargement du suivi..."})]}):u?o.jsxs("div",{className:"parent-dashboard-detail",children:[o.jsxs("div",{className:"parent-enfant-header",children:[o.jsxs("div",{className:"parent-enfant-header-info",children:[o.jsx("h2",{children:u.enfant.nom}),u.enfant.classe&&o.jsx("span",{className:"parent-badge",children:u.enfant.classe}),u.enfant.derniereConnexion&&o.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",z1(u.enfant.derniereConnexion)]})]}),o.jsx("p",{className:"parent-message-motivation",children:nve(u.scoreGlobal)})]}),o.jsxs("div",{className:"parent-indicateurs",children:[o.jsxs("div",{className:"parent-card parent-card-score",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Score Global"}),o.jsxs("span",{className:`parent-card-value parent-score-${u.scoreGlobal>=60?"bon":u.scoreGlobal>=40?"moyen":"bas"}`,children:[u.scoreGlobal,"/100"]})]})]}),o.jsxs("div",{className:"parent-card parent-card-streak",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Streak"}),o.jsxs("span",{className:"parent-card-value",children:[u.streak.actuel," jour",u.streak.actuel>1?"s":""]})]})]}),o.jsxs("div",{className:"parent-card parent-card-lacunes",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Lacunes"}),o.jsxs("span",{className:"parent-card-value",children:[u.lacunes.length," matire",u.lacunes.length>1?"s":""]})]})]}),o.jsxs("div",{className:"parent-card parent-card-objectifs",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Objectifs"}),o.jsxs("span",{className:"parent-card-value",children:[u.objectifs.filter(Z=>Z.statut==="atteint").length,"/",u.objectifs.length]})]})]})]}),o.jsxs("div",{className:"parent-section parent-section-semaine",children:[o.jsx("h3",{children:" Activit de la semaine"}),o.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((Z,H)=>o.jsxs("div",{className:`parent-jour ${u.streak.semaineCourante[H]?"parent-jour-actif":"parent-jour-inactif"}`,children:[o.jsx("span",{className:"parent-jour-label",children:Z}),o.jsx("span",{className:"parent-jour-icon",children:u.streak.semaineCourante[H]?"":""})]},Z))})]}),o.jsxs("div",{className:"parent-onglets",children:[o.jsx("button",{className:`parent-onglet ${k==="apercu"?"parent-onglet-actif":""}`,onClick:()=>U("apercu"),children:" Aperu"}),o.jsxs("button",{className:`parent-onglet ${k==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>U("lacunes"),children:[" Lacunes (",u.lacunes.length,")"]}),o.jsxs("button",{className:`parent-onglet ${k==="alertes"?"parent-onglet-actif":""}`,onClick:()=>U("alertes"),children:[" Alertes (",u.alertes.length,")"]}),o.jsx("button",{className:`parent-onglet ${k==="resume"?"parent-onglet-actif":""}`,onClick:()=>U("resume"),children:" Rsum"})]}),o.jsxs("div",{className:"parent-onglet-contenu",children:[k==="apercu"&&o.jsxs("div",{className:"parent-tab-apercu",children:[o.jsxs("div",{className:"parent-section",children:[o.jsx("h3",{children:" Derniers quiz passs"}),u.derniersQuiz.length===0?o.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):o.jsx("div",{className:"parent-quiz-liste",children:u.derniersQuiz.map((Z,H)=>o.jsxs("div",{className:`parent-quiz-item ${Z.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[o.jsxs("div",{className:"parent-quiz-info",children:[o.jsx("span",{className:"parent-quiz-discipline",children:Z.disciplineNom}),o.jsx("span",{className:"parent-quiz-titre",children:Z.quizTitre})]}),o.jsxs("div",{className:"parent-quiz-score",children:[o.jsxs("span",{className:`parent-quiz-note ${Z.reussi?"note-ok":"note-ko"}`,children:[Z.noteSur20,"/20"]}),o.jsx("span",{className:"parent-quiz-statut",children:Z.reussi?" Russi":" chou"})]}),o.jsx("span",{className:"parent-quiz-date",children:z1(Z.datePassage)})]},H))})]}),o.jsxs("div",{className:"parent-section",children:[o.jsx("h3",{children:" Objectifs de la semaine"}),u.objectifs.length===0?o.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):o.jsx("div",{className:"parent-objectifs-liste",children:u.objectifs.map((Z,H)=>o.jsxs("div",{className:"parent-objectif-item",children:[o.jsxs("div",{className:"parent-objectif-header",children:[o.jsx("span",{className:"parent-objectif-titre",children:Z.titre}),o.jsx("span",{className:`parent-objectif-statut parent-statut-${Z.statut}`,children:Z.statut==="atteint"?" Atteint":Z.statut==="en_cours"?" En cours":Z.statut==="echoue"?" chou":" Non commenc"})]}),o.jsx("div",{className:"parent-progress-bar",children:o.jsx("div",{className:`parent-progress-fill parent-progress-${Z.statut}`,style:{width:`${Math.min(Z.progression/Z.cible*100,100)}%`}})}),o.jsxs("span",{className:"parent-objectif-detail",children:[Z.progression,"/",Z.cible]})]},H))})]})]}),k==="lacunes"&&o.jsx("div",{className:"parent-tab-lacunes",children:u.lacunes.length===0?o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):o.jsx("div",{className:"parent-lacunes-liste",children:u.lacunes.map((Z,H)=>o.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:uy(Z.niveauUrgence)},children:[o.jsxs("div",{className:"parent-lacune-header",children:[o.jsx("span",{className:"parent-lacune-discipline",children:Z.disciplineNom}),o.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:uy(Z.niveauUrgence),color:"#fff"},children:IU(Z.niveauUrgence)})]}),o.jsxs("div",{className:"parent-lacune-details",children:[o.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",o.jsxs("strong",{children:[Z.moyenne,"/20"]})]}),o.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",OU(Z.tendance)," ",Z.tendance==="hausse"?"En hausse":Z.tendance==="baisse"?"En baisse":"Stable"]})]}),o.jsx("p",{className:"parent-lacune-conseil",children:Z.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":Z.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},H))})}),k==="alertes"&&o.jsx("div",{className:"parent-tab-alertes",children:u.alertes.length===0?o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):o.jsx("div",{className:"parent-alertes-liste",children:u.alertes.map((Z,H)=>o.jsxs("div",{className:`parent-alerte-item parent-alerte-${Z.niveau}`,children:[o.jsxs("div",{className:"parent-alerte-header",children:[o.jsx("span",{className:"parent-alerte-titre",children:Z.titre}),o.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:eve(Z.niveau),color:"#fff"},children:tve(Z.type)})]}),o.jsx("p",{className:"parent-alerte-message",children:Z.message}),o.jsx("span",{className:"parent-alerte-date",children:z1(Z.dateCreation)})]},H))})}),k==="resume"&&u.resume&&o.jsxs("div",{className:"parent-tab-resume",children:[o.jsxs("div",{className:"parent-resume-header",children:[o.jsxs("h3",{children:[" Rsum : ",u.resume.semaine]}),o.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",u.resume.scoreGlobal,"/100"," ",XD(u.resume.evolutionScore)]})]}),o.jsxs("div",{className:"parent-resume-stats",children:[o.jsxs("div",{className:"parent-resume-stat",children:[o.jsx("span",{className:"parent-resume-stat-value",children:u.resume.nombreQuizSemaine}),o.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.joursActifsSemaine,"/7"]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.tempsEstimeMinutes," min"]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.objectifsAtteints,"/",u.resume.objectifsTotal]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),u.resume.evolutionDisciplines.length>0&&o.jsxs("div",{className:"parent-section",children:[o.jsx("h4",{children:" volution par matire"}),o.jsx("div",{className:"parent-evolution-liste",children:u.resume.evolutionDisciplines.map((Z,H)=>o.jsxs("div",{className:"parent-evolution-item",children:[o.jsx("span",{className:"parent-evolution-discipline",children:Z.disciplineNom}),o.jsxs("div",{className:"parent-evolution-scores",children:[o.jsxs("span",{className:"parent-evolution-prec",children:[Z.moyenneSemainePrecedente,"/20"]}),o.jsx("span",{className:"parent-evolution-fleche",children:XD(Z.evolution)}),o.jsxs("span",{className:"parent-evolution-courante",children:[Z.moyenneSemaineCourante,"/20"]}),o.jsxs("span",{className:`parent-evolution-ecart ${Z.ecart>0?"ecart-positif":Z.ecart<0?"ecart-negatif":""}`,children:["(",Z.ecart>0?"+":"",Z.ecart,")"]})]})]},H))})]}),u.resume.disciplinesEnDifficulte.length>0&&o.jsxs("div",{className:"parent-section parent-section-warning",children:[o.jsx("h4",{children:" Matires ncessitant une attention"}),o.jsx("ul",{className:"parent-disciplines-difficulte",children:u.resume.disciplinesEnDifficulte.map((Z,H)=>o.jsx("li",{children:Z},H))})]})]}),k==="resume"&&!u.resume&&o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):o.jsxs("div",{className:"parent-erreur-dashboard",children:[o.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>a&&z(a),children:" Ressayer"})]}):o.jsx("div",{className:"parent-select-enfant",children:o.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},Ive=()=>o.jsx(uW,{children:o.jsxs(b8,{children:[o.jsx(Ht,{path:"/",element:o.jsx(ks,{children:o.jsx(GY,{})})}),o.jsx(Ht,{path:"/disciplines",element:o.jsx(ks,{children:o.jsx(WY,{})})}),o.jsx(Ht,{path:"/disciplines/:id",element:o.jsx(ks,{children:o.jsx(JY,{})})}),o.jsx(Ht,{path:"/premium",element:o.jsx(ks,{children:o.jsx(tX,{})})}),o.jsx(Ht,{path:"/connexion",element:o.jsx(KY,{})}),o.jsx(Ht,{path:"/inscription",element:o.jsx(QY,{})}),o.jsx(Ht,{path:"/admin",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(rX,{})})})}),o.jsx(Ht,{path:"/admin/disciplines",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(iX,{})})})}),o.jsx(Ht,{path:"/admin/chapitres",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(sX,{})})})}),o.jsx(Ht,{path:"/admin/ressources",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(aX,{})})})}),o.jsx(Ht,{path:"/admin/quiz",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(fX,{})})})}),o.jsx(Ht,{path:"/admin/quiz/nouveau",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(ZP,{})})})}),o.jsx(Ht,{path:"/admin/quiz/modifier/:quizId",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(ZP,{})})})}),o.jsx(Ht,{path:"/admin/quiz-avance",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(VX,{})})})}),o.jsx(Ht,{path:"/admin/utilisateurs",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(xX,{})})})}),o.jsx(Ht,{path:"/admin/resultats",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(_X,{})})})}),o.jsx(Ht,{path:"/admin/settings",element:o.jsx(ns,{children:o.jsx(rs,{children:o.jsx(jX,{})})})}),o.jsx(Ht,{path:"/admin/premium",element:o.jsx(JC,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),o.jsx(Ht,{path:"/quiz/:quizId",element:o.jsx(ks,{children:o.jsx(lJ,{})})}),o.jsx(Ht,{path:"/quiz-avance/:quizId",element:o.jsx(ks,{children:o.jsx(QX,{})})}),o.jsx(Ht,{path:"/eleve/dashboard",element:o.jsx(ks,{children:o.jsx(Eve,{})})}),o.jsx(Ht,{path:"/eleve/suivi",element:o.jsx(ks,{children:o.jsx(Nve,{})})}),o.jsx(Ht,{path:"/prof/dashboard",element:o.jsx(dW,{children:o.jsx(ks,{children:o.jsx(Cve,{})})})}),o.jsx(Ht,{path:"/parent/dashboard",element:o.jsx(IE,{allowedRoles:["parent","admin"],children:o.jsx(ks,{children:o.jsx(Pve,{})})})}),o.jsx(Ht,{path:"*",element:o.jsx(JC,{to:"/",replace:!0})})]})}),UU=document.getElementById("root");if(!UU)throw new Error("L'lment #root n'existe pas");const Ove=AV.createRoot(UU);Ove.render(o.jsx(tM.StrictMode,{children:o.jsx(A8,{children:o.jsx(Ive,{})})}));
//# sourceMappingURL=index-D9vywzV1.js.map
