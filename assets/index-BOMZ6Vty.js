function bV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ra(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cx={exports:{}},Lh={};var LC;function xV(){if(LC)return Lh;LC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:o}}return Lh.Fragment=e,Lh.jsx=n,Lh.jsxs=n,Lh}var qC;function _V(){return qC||(qC=1,Cx.exports=xV()),Cx.exports}var a=_V(),Ix={exports:{}},tt={};var UC;function jV(){if(UC)return tt;UC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,E={};function A(F,re,de){this.props=F,this.context=re,this.refs=E,this.updater=de||N}A.prototype.isReactComponent={},A.prototype.setState=function(F,re){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,re,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function R(){}R.prototype=A.prototype;function T(F,re,de){this.props=F,this.context=re,this.refs=E,this.updater=de||N}var I=T.prototype=new R;I.constructor=T,j(I,A.prototype),I.isPureReactComponent=!0;var M=Array.isArray;function B(){}var D={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function k(F,re,de){var ye=de.ref;return{$$typeof:t,type:F,key:re,ref:ye!==void 0?ye:null,props:de}}function q(F,re){return k(F.type,re,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function z(F){var re={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(de){return re[de]})}var V=/\/+/g;function ve(F,re){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):re.toString(36)}function ee(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(B,B):(F.status="pending",F.then(function(re){F.status==="pending"&&(F.status="fulfilled",F.value=re)},function(re){F.status==="pending"&&(F.status="rejected",F.reason=re)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function H(F,re,de,ye,he){var G=typeof F;(G==="undefined"||G==="boolean")&&(F=null);var ce=!1;if(F===null)ce=!0;else switch(G){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(F.$$typeof){case t:case e:ce=!0;break;case p:return ce=F._init,H(ce(F._payload),re,de,ye,he)}}if(ce)return he=he(F),ce=ye===""?"."+ve(F,0):ye,M(he)?(de="",ce!=null&&(de=ce.replace(V,"$&/")+"/"),H(he,re,de,"",function(Z){return Z})):he!=null&&(L(he)&&(he=q(he,de+(he.key==null||F&&F.key===he.key?"":(""+he.key).replace(V,"$&/")+"/")+ce)),re.push(he)),1;ce=0;var Ie=ye===""?".":ye+":";if(M(F))for(var ae=0;ae<F.length;ae++)ye=F[ae],G=Ie+ve(ye,ae),ce+=H(ye,re,de,G,he);else if(ae=x(F),typeof ae=="function")for(F=ae.call(F),ae=0;!(ye=F.next()).done;)ye=ye.value,G=Ie+ve(ye,ae++),ce+=H(ye,re,de,G,he);else if(G==="object"){if(typeof F.then=="function")return H(ee(F),re,de,ye,he);throw re=String(F),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ce}function se(F,re,de){if(F==null)return F;var ye=[],he=0;return H(F,ye,"","",function(G){return re.call(de,G,he++)}),ye}function X(F){if(F._status===-1){var re=F._result;re=re(),re.then(function(de){(F._status===0||F._status===-1)&&(F._status=1,F._result=de)},function(de){(F._status===0||F._status===-1)&&(F._status=2,F._result=de)}),F._status===-1&&(F._status=0,F._result=re)}if(F._status===1)return F._result.default;throw F._result}var we=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},W={map:se,forEach:function(F,re,de){se(F,function(){re.apply(this,arguments)},de)},count:function(F){var re=0;return se(F,function(){re++}),re},toArray:function(F){return se(F,function(re){return re})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return tt.Activity=g,tt.Children=W,tt.Component=A,tt.Fragment=n,tt.Profiler=i,tt.PureComponent=T,tt.StrictMode=r,tt.Suspense=h,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,tt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},tt.cache=function(F){return function(){return F.apply(null,arguments)}},tt.cacheSignal=function(){return null},tt.cloneElement=function(F,re,de){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ye=j({},F.props),he=F.key;if(re!=null)for(G in re.key!==void 0&&(he=""+re.key),re)!P.call(re,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&re.ref===void 0||(ye[G]=re[G]);var G=arguments.length-2;if(G===1)ye.children=de;else if(1<G){for(var ce=Array(G),Ie=0;Ie<G;Ie++)ce[Ie]=arguments[Ie+2];ye.children=ce}return k(F.type,he,ye)},tt.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},tt.createElement=function(F,re,de){var ye,he={},G=null;if(re!=null)for(ye in re.key!==void 0&&(G=""+re.key),re)P.call(re,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(he[ye]=re[ye]);var ce=arguments.length-2;if(ce===1)he.children=de;else if(1<ce){for(var Ie=Array(ce),ae=0;ae<ce;ae++)Ie[ae]=arguments[ae+2];he.children=Ie}if(F&&F.defaultProps)for(ye in ce=F.defaultProps,ce)he[ye]===void 0&&(he[ye]=ce[ye]);return k(F,G,he)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(F){return{$$typeof:u,render:F}},tt.isValidElement=L,tt.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:X}},tt.memo=function(F,re){return{$$typeof:f,type:F,compare:re===void 0?null:re}},tt.startTransition=function(F){var re=D.T,de={};D.T=de;try{var ye=F(),he=D.S;he!==null&&he(de,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(B,we)}catch(G){we(G)}finally{re!==null&&de.types!==null&&(re.types=de.types),D.T=re}},tt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},tt.use=function(F){return D.H.use(F)},tt.useActionState=function(F,re,de){return D.H.useActionState(F,re,de)},tt.useCallback=function(F,re){return D.H.useCallback(F,re)},tt.useContext=function(F){return D.H.useContext(F)},tt.useDebugValue=function(){},tt.useDeferredValue=function(F,re){return D.H.useDeferredValue(F,re)},tt.useEffect=function(F,re){return D.H.useEffect(F,re)},tt.useEffectEvent=function(F){return D.H.useEffectEvent(F)},tt.useId=function(){return D.H.useId()},tt.useImperativeHandle=function(F,re,de){return D.H.useImperativeHandle(F,re,de)},tt.useInsertionEffect=function(F,re){return D.H.useInsertionEffect(F,re)},tt.useLayoutEffect=function(F,re){return D.H.useLayoutEffect(F,re)},tt.useMemo=function(F,re){return D.H.useMemo(F,re)},tt.useOptimistic=function(F,re){return D.H.useOptimistic(F,re)},tt.useReducer=function(F,re,de){return D.H.useReducer(F,re,de)},tt.useRef=function(F){return D.H.useRef(F)},tt.useState=function(F){return D.H.useState(F)},tt.useSyncExternalStore=function(F,re,de){return D.H.useSyncExternalStore(F,re,de)},tt.useTransition=function(){return D.H.useTransition()},tt.version="19.2.4",tt}var VC;function _d(){return VC||(VC=1,Ix.exports=jV()),Ix.exports}var _=_d();const rM=ra(_),iM=bV({__proto__:null,default:rM},[_]);var Px={exports:{}},qh={},Ox={exports:{}},Rx={};var BC;function wV(){return BC||(BC=1,(function(t){function e(H,se){var X=H.length;H.push(se);e:for(;0<X;){var we=X-1>>>1,W=H[we];if(0<i(W,se))H[we]=se,H[X]=W,X=we;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var se=H[0],X=H.pop();if(X!==se){H[0]=X;e:for(var we=0,W=H.length,F=W>>>1;we<F;){var re=2*(we+1)-1,de=H[re],ye=re+1,he=H[ye];if(0>i(de,X))ye<W&&0>i(he,de)?(H[we]=he,H[ye]=X,we=ye):(H[we]=de,H[re]=X,we=re);else if(ye<W&&0>i(he,X))H[we]=he,H[ye]=X,we=ye;else break e}}return se}function i(H,se){var X=H.sortIndex-se.sortIndex;return X!==0?X:H.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,g=null,y=3,x=!1,N=!1,j=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function I(H){for(var se=n(f);se!==null;){if(se.callback===null)r(f);else if(se.startTime<=H)r(f),se.sortIndex=se.expirationTime,e(h,se);else break;se=n(f)}}function M(H){if(j=!1,I(H),!N)if(n(h)!==null)N=!0,B||(B=!0,z());else{var se=n(f);se!==null&&ee(M,se.startTime-H)}}var B=!1,D=-1,P=5,k=-1;function q(){return E?!0:!(t.unstable_now()-k<P)}function L(){if(E=!1,B){var H=t.unstable_now();k=H;var se=!0;try{e:{N=!1,j&&(j=!1,R(D),D=-1),x=!0;var X=y;try{t:{for(I(H),g=n(h);g!==null&&!(g.expirationTime>H&&q());){var we=g.callback;if(typeof we=="function"){g.callback=null,y=g.priorityLevel;var W=we(g.expirationTime<=H);if(H=t.unstable_now(),typeof W=="function"){g.callback=W,I(H),se=!0;break t}g===n(h)&&r(h),I(H)}else r(h);g=n(h)}if(g!==null)se=!0;else{var F=n(f);F!==null&&ee(M,F.startTime-H),se=!1}}break e}finally{g=null,y=X,x=!1}se=void 0}}finally{se?z():B=!1}}}var z;if(typeof T=="function")z=function(){T(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ve=V.port2;V.port1.onmessage=L,z=function(){ve.postMessage(null)}}else z=function(){A(L,0)};function ee(H,se){D=A(function(){H(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var se=3;break;default:se=y}var X=y;y=se;try{return H()}finally{y=X}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(H,se){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=y;y=H;try{return se()}finally{y=X}},t.unstable_scheduleCallback=function(H,se,X){var we=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?we+X:we):X=we,H){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=X+W,H={id:p++,callback:se,priorityLevel:H,startTime:X,expirationTime:W,sortIndex:-1},X>we?(H.sortIndex=X,e(f,H),n(h)===null&&H===n(f)&&(j?(R(D),D=-1):j=!0,ee(M,X-we))):(H.sortIndex=W,e(h,H),N||x||(N=!0,B||(B=!0,z()))),H},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(H){var se=y;return function(){var X=y;y=se;try{return H.apply(this,arguments)}finally{y=X}}}})(Rx)),Rx}var $C;function NV(){return $C||($C=1,Ox.exports=wV()),Ox.exports}var kx={exports:{}},vr={};var FC;function EV(){if(FC)return vr;FC=1;var t=_d();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:h,containerInfo:f,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vr.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},vr.flushSync=function(h){var f=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=p,r.d.f()}},vr.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},vr.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},vr.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(h,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},vr.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},vr.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},vr.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},vr.requestFormReset=function(h){r.d.r(h)},vr.unstable_batchedUpdates=function(h,f){return h(f)},vr.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},vr.useFormStatus=function(){return c.H.useHostTransitionStatus()},vr.version="19.2.4",vr}var HC;function sM(){if(HC)return kx.exports;HC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),kx.exports=EV(),kx.exports}var GC;function SV(){if(GC)return qh;GC=1;var t=NV(),e=_d(),n=sM();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(r(188))}function f(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(r(188));return l!==s?null:s}for(var d=s,m=l;;){var b=d.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===d)return h(b),s;if(w===m)return h(b),l;w=w.sibling}throw Error(r(188))}if(d.return!==m.return)d=b,m=w;else{for(var C=!1,U=b.child;U;){if(U===d){C=!0,d=b,m=w;break}if(U===m){C=!0,m=b,d=w;break}U=U.sibling}if(!C){for(U=w.child;U;){if(U===d){C=!0,d=w,m=b;break}if(U===m){C=!0,m=w,d=b;break}U=U.sibling}if(!C)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function ve(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case B:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case T:return s.displayName||"Context";case R:return(s._context.displayName||"Context")+".Consumer";case I:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return l=s.displayName||null,l!==null?l:ve(s.type)||"Memo";case P:l=s._payload,s=s._init;try{return ve(s(l))}catch{}}return null}var ee=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},we=[],W=-1;function F(s){return{current:s}}function re(s){0>W||(s.current=we[W],we[W]=null,W--)}function de(s,l){W++,we[W]=s.current,s.current=l}var ye=F(null),he=F(null),G=F(null),ce=F(null);function Ie(s,l){switch(de(G,l),de(he,s),de(ye,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?oC(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=oC(l),s=lC(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(ye),de(ye,s)}function ae(){re(ye),re(he),re(G)}function Z(s){s.memoizedState!==null&&de(ce,s);var l=ye.current,d=lC(l,s.type);l!==d&&(de(he,s),de(ye,d))}function Q(s){he.current===s&&(re(ye),re(he)),ce.current===s&&(re(ce),kh._currentValue=X)}var me,J;function Ae(s){if(me===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);me=l&&l[1]||"",J=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+s+J}var Ke=!1;function Je(s,l){if(!s||Ke)return"";Ke=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(ge){var ue=ge}Reflect.construct(s,[],Ne)}else{try{Ne.call()}catch(ge){ue=ge}s.call(Ne.prototype)}}else{try{throw Error()}catch(ge){ue=ge}(Ne=s())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(ge){if(ge&&ue&&typeof ge.stack=="string")return[ge.stack,ue.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),C=w[0],U=w[1];if(C&&U){var K=C.split(`
`),le=U.split(`
`);for(b=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;b<le.length&&!le[b].includes("DetermineComponentFrameRoot");)b++;if(m===K.length||b===le.length)for(m=K.length-1,b=le.length-1;1<=m&&0<=b&&K[m]!==le[b];)b--;for(;1<=m&&0<=b;m--,b--)if(K[m]!==le[b]){if(m!==1||b!==1)do if(m--,b--,0>b||K[m]!==le[b]){var xe=`
`+K[m].replace(" at new "," at ");return s.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",s.displayName)),xe}while(1<=m&&0<=b);break}}}finally{Ke=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Ae(d):""}function ot(s,l){switch(s.tag){case 26:case 27:case 5:return Ae(s.type);case 16:return Ae("Lazy");case 13:return s.child!==l&&l!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Je(s.type,!1);case 11:return Je(s.type.render,!1);case 1:return Je(s.type,!0);case 31:return Ae("Activity");default:return""}}function on(s){try{var l="",d=null;do l+=ot(s,d),d=s,s=s.return;while(s);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Rt=Object.prototype.hasOwnProperty,kt=t.unstable_scheduleCallback,Lr=t.unstable_cancelCallback,be=t.unstable_shouldYield,De=t.unstable_requestPaint,Be=t.unstable_now,Ye=t.unstable_getCurrentPriorityLevel,Vt=t.unstable_ImmediatePriority,Un=t.unstable_UserBlockingPriority,qr=t.unstable_NormalPriority,oo=t.unstable_LowPriority,Ur=t.unstable_IdlePriority,Hi=t.log,Kc=t.unstable_setDisableYieldValue,ln=null,At=null;function Vr(s){if(typeof Hi=="function"&&Kc(s),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(ln,s)}catch{}}var nn=Math.clz32?Math.clz32:Qc,Sl=Math.log,lo=Math.LN2;function Qc(s){return s>>>=0,s===0?32:31-(Sl(s)/lo|0)|0}var xi=256,aa=262144,cn=4194304;function _i(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function gr(s,l,d){var m=s.pendingLanes;if(m===0)return 0;var b=0,w=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var U=m&134217727;return U!==0?(m=U&~w,m!==0?b=_i(m):(C&=U,C!==0?b=_i(C):d||(d=U&~s,d!==0&&(b=_i(d))))):(U=m&~w,U!==0?b=_i(U):C!==0?b=_i(C):d||(d=m&~s,d!==0&&(b=_i(d)))),b===0?0:l!==0&&l!==b&&(l&w)===0&&(w=b&-b,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:b}function ni(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function ne(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(){var s=cn;return cn<<=1,(cn&62914560)===0&&(cn=4194304),s}function bt(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Gn(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Al(s,l,d,m,b,w){var C=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var U=s.entanglements,K=s.expirationTimes,le=s.hiddenUpdates;for(d=C&~d;0<d;){var xe=31-nn(d),Ne=1<<xe;U[xe]=0,K[xe]=-1;var ue=le[xe];if(ue!==null)for(le[xe]=null,xe=0;xe<ue.length;xe++){var ge=ue[xe];ge!==null&&(ge.lane&=-536870913)}d&=~Ne}m!==0&&ji(s,m,0),w!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=w&~(C&~l))}function ji(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var m=31-nn(l);s.entangledLanes|=l,s.entanglements[m]=s.entanglements[m]|1073741824|d&261930}function qd(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var m=31-nn(d),b=1<<m;b&l|s[m]&l&&(s[m]|=l),d&=~b}}function Ud(s,l){var d=l&-l;return d=(d&42)!==0?1:Tl(d),(d&(s.suspendedLanes|l))!==0?0:d}function Tl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function oa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Pm(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:PC(s.type))}function Gi(s,l){var d=se.p;try{return se.p=s,l()}finally{se.p=d}}var Ki=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Ki,Kn="__reactProps$"+Ki,ys="__reactContainer$"+Ki,Wc="__reactEvents$"+Ki,D0="__reactListeners$"+Ki,Om="__reactHandles$"+Ki,Rm="__reactResources$"+Ki,bs="__reactMarker$"+Ki;function Yc(s){delete s[Sn],delete s[Kn],delete s[Wc],delete s[D0],delete s[Om]}function xs(s){var l=s[Sn];if(l)return l;for(var d=s.parentNode;d;){if(l=d[ys]||d[Sn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=pC(s);s!==null;){if(d=s[Sn])return d;s=pC(s)}return l}s=d,d=s.parentNode}return null}function wi(s){if(s=s[Sn]||s[ys]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function ri(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function _s(s){var l=s[Rm];return l||(l=s[Rm]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function An(s){s[bs]=!0}var Vd=new Set,Bd={};function js(s,l){ws(s,l),ws(s+"Capture",l)}function ws(s,l){for(Bd[s]=l,s=0;s<l.length;s++)Vd.add(l[s])}var $d=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fd={},Hd={};function km(s){return Rt.call(Hd,s)?!0:Rt.call(Fd,s)?!1:$d.test(s)?Hd[s]=!0:(Fd[s]=!0,!1)}function Xc(s,l,d){if(km(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function ii(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function Tn(s,l,d,m){if(m===null)s.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+m)}}function Qn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function co(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Gd(s,l,d){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,w=m.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(C){d=""+C,w.call(this,C)}}),Object.defineProperty(s,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Tt(s){if(!s._valueTracker){var l=co(s)?"checked":"value";s._valueTracker=Gd(s,l,""+s[l])}}function Cl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return s&&(m=co(s)?s.checked?"true":"false":s.value),s=m,s!==d?(l.setValue(s),!0):!1}function Ns(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Il=/[\n"\\]/g;function Br(s){return s.replace(Il,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Jc(s,l,d,m,b,w,C,U){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),l!=null?C==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Qn(l)):s.value!==""+Qn(l)&&(s.value=""+Qn(l)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),l!=null?Kd(s,C,Qn(l)):d!=null?Kd(s,C,Qn(d)):m!=null&&s.removeAttribute("value"),b==null&&w!=null&&(s.defaultChecked=!!w),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.name=""+Qn(U):s.removeAttribute("name")}function Dm(s,l,d,m,b,w,C,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Tt(s);return}d=d!=null?""+Qn(d):"",l=l!=null?""+Qn(l):d,U||l===s.value||(s.value=l),s.defaultValue=l}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=U?s.checked:!!m,s.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),Tt(s)}function Kd(s,l,d){l==="number"&&Ns(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function uo(s,l,d,m){if(s=s.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<s.length;d++)b=l.hasOwnProperty("$"+s[d].value),s[d].selected!==b&&(s[d].selected=b),b&&m&&(s[d].defaultSelected=!0)}else{for(d=""+Qn(d),l=null,b=0;b<s.length;b++){if(s[b].value===d){s[b].selected=!0,m&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function Mm(s,l,d){if(l!=null&&(l=""+Qn(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+Qn(d):""}function ho(s,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(ee(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Qn(l),s.defaultValue=d,m=s.textContent,m===d&&m!==""&&m!==null&&(s.value=m),Tt(s)}function $r(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var zm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qd(s,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":m?s.setProperty(l,d):typeof d!="number"||d===0||zm.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function Wd(s,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var b in l)m=l[b],l.hasOwnProperty(b)&&d[b]!==m&&Qd(s,b,m)}else for(var w in l)l.hasOwnProperty(w)&&Qd(s,w,l[w])}function Zc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eu(s){return fo.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Qi(){}var Yd=null;function Ni(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var mo=null,Es=null;function Pl(s){var l=wi(s);if(l&&(s=l.stateNode)){var d=s[Kn]||null;e:switch(s=l.stateNode,l.type){case"input":if(Jc(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Br(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==s&&m.form===s.form){var b=m[Kn]||null;if(!b)throw Error(r(90));Jc(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===s.form&&Cl(m)}break e;case"textarea":Mm(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&uo(s,!!d.multiple,l,!1)}}}var tu=!1;function po(s,l,d){if(tu)return s(l,d);tu=!0;try{var m=s(l);return m}finally{if(tu=!1,(mo!==null||Es!==null)&&(Pp(),mo&&(l=mo,s=Es,Es=mo=null,Pl(l),s)))for(l=0;l<s.length;l++)Pl(s[l])}}function Wi(s,l){var d=s.stateNode;if(d===null)return null;var m=d[Kn]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=!1;if(Ei)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Ol=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Ol=!1}var Ss=null,Xd=null,Rl=null;function Jd(){if(Rl)return Rl;var s,l=Xd,d=l.length,m,b="value"in Ss?Ss.value:Ss.textContent,w=b.length;for(s=0;s<d&&l[s]===b[s];s++);var C=d-s;for(m=1;m<=C&&l[d-m]===b[w-m];m++);return Rl=b.slice(s,1<m?1-m:void 0)}function kl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function la(){return!0}function Yi(){return!1}function sr(s){function l(d,m,b,w,C){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(d=s[U],this[U]=d?d(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?la:Yi,this.isPropagationStopped=Yi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),l}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},As=sr(ca),go=g({},ca,{view:0,detail:0}),Zd=sr(go),vo,nu,Ts,ru=g({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ts&&(Ts&&s.type==="mousemove"?(vo=s.screenX-Ts.screenX,nu=s.screenY-Ts.screenY):nu=vo=0,Ts=s),vo)},movementY:function(s){return"movementY"in s?s.movementY:nu}}),eh=sr(ru),Dl=g({},ru,{dataTransfer:0}),qm=sr(Dl),Um=g({},go,{relatedTarget:0}),Ml=sr(Um),th=g({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),Vm=sr(th),iu=g({},ca,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bm=sr(iu),$m=g({},ca,{data:0}),Cs=sr($m),Fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Km(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Gm[s])?!!l[s]:!1}function yo(){return Km}var Ar=g({},go,{key:function(s){if(s.key){var l=Fm[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=kl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Hm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(s){return s.type==="keypress"?kl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?kl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Qm=sr(Ar),Wm=g({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=sr(Wm),v=g({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),S=sr(v),O=g({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),$=sr(O),ie=g({},ru,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),pe=sr(ie),Te=g({},ca,{newState:0,oldState:0}),rt=sr(Te),bn=[9,13,27,32],Nt=Ei&&"CompositionEvent"in window,Xt=null;Ei&&"documentMode"in document&&(Xt=document.documentMode);var Si=Ei&&"TextEvent"in window&&!Xt,Is=Ei&&(!Nt||Xt&&8<Xt&&11>=Xt),Xi=" ",Ji=!1;function zl(s,l){switch(s){case"keyup":return bn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function su(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var au=!1;function $9(s,l){switch(s){case"compositionend":return su(l);case"keypress":return l.which!==32?null:(Ji=!0,Xi);case"textInput":return s=l.data,s===Xi&&Ji?null:s;default:return null}}function F9(s,l){if(au)return s==="compositionend"||!Nt&&zl(s,l)?(s=Jd(),Rl=Xd=Ss=null,au=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Is&&l.locale!=="ko"?null:l.data;default:return null}}var H9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!H9[s.type]:l==="textarea"}function bS(s,l,d,m){mo?Es?Es.push(m):Es=[m]:mo=m,l=Lp(l,"onChange"),0<l.length&&(d=new As("onChange","change",null,d,m),s.push({event:d,listeners:l}))}var nh=null,rh=null;function G9(s){tC(s,0)}function Ym(s){var l=ri(s);if(Cl(l))return s}function xS(s,l){if(s==="change")return l}var _S=!1;if(Ei){var M0;if(Ei){var z0="oninput"in document;if(!z0){var jS=document.createElement("div");jS.setAttribute("oninput","return;"),z0=typeof jS.oninput=="function"}M0=z0}else M0=!1;_S=M0&&(!document.documentMode||9<document.documentMode)}function wS(){nh&&(nh.detachEvent("onpropertychange",NS),rh=nh=null)}function NS(s){if(s.propertyName==="value"&&Ym(rh)){var l=[];bS(l,rh,s,Ni(s)),po(G9,l)}}function K9(s,l,d){s==="focusin"?(wS(),nh=l,rh=d,nh.attachEvent("onpropertychange",NS)):s==="focusout"&&wS()}function Q9(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ym(rh)}function W9(s,l){if(s==="click")return Ym(l)}function Y9(s,l){if(s==="input"||s==="change")return Ym(l)}function X9(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var si=typeof Object.is=="function"?Object.is:X9;function ih(s,l){if(si(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!Rt.call(l,b)||!si(s[b],l[b]))return!1}return!0}function ES(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function SS(s,l){var d=ES(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=l&&m>=l)return{node:d,offset:l-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ES(d)}}function AS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?AS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function TS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ns(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=Ns(s.document)}return l}function L0(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var J9=Ei&&"documentMode"in document&&11>=document.documentMode,ou=null,q0=null,sh=null,U0=!1;function CS(s,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;U0||ou==null||ou!==Ns(m)||(m=ou,"selectionStart"in m&&L0(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),sh&&ih(sh,m)||(sh=m,m=Lp(q0,"onSelect"),0<m.length&&(l=new As("onSelect","select",null,l,d),s.push({event:l,listeners:m}),l.target=ou)))}function Ll(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var lu={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionrun:Ll("Transition","TransitionRun"),transitionstart:Ll("Transition","TransitionStart"),transitioncancel:Ll("Transition","TransitionCancel"),transitionend:Ll("Transition","TransitionEnd")},V0={},IS={};Ei&&(IS=document.createElement("div").style,"AnimationEvent"in window||(delete lu.animationend.animation,delete lu.animationiteration.animation,delete lu.animationstart.animation),"TransitionEvent"in window||delete lu.transitionend.transition);function ql(s){if(V0[s])return V0[s];if(!lu[s])return s;var l=lu[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in IS)return V0[s]=l[d];return s}var PS=ql("animationend"),OS=ql("animationiteration"),RS=ql("animationstart"),Z9=ql("transitionrun"),eU=ql("transitionstart"),tU=ql("transitioncancel"),kS=ql("transitionend"),DS=new Map,B0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");B0.push("scrollEnd");function Zi(s,l){DS.set(s,l),js(l,[s])}var Xm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ai=[],cu=0,$0=0;function Jm(){for(var s=cu,l=$0=cu=0;l<s;){var d=Ai[l];Ai[l++]=null;var m=Ai[l];Ai[l++]=null;var b=Ai[l];Ai[l++]=null;var w=Ai[l];if(Ai[l++]=null,m!==null&&b!==null){var C=m.pending;C===null?b.next=b:(b.next=C.next,C.next=b),m.pending=b}w!==0&&MS(d,b,w)}}function Zm(s,l,d,m){Ai[cu++]=s,Ai[cu++]=l,Ai[cu++]=d,Ai[cu++]=m,$0|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function F0(s,l,d,m){return Zm(s,l,d,m),ep(s)}function Ul(s,l){return Zm(s,null,null,l),ep(s)}function MS(s,l,d){s.lanes|=d;var m=s.alternate;m!==null&&(m.lanes|=d);for(var b=!1,w=s.return;w!==null;)w.childLanes|=d,m=w.alternate,m!==null&&(m.childLanes|=d),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(b=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,b&&l!==null&&(b=31-nn(d),s=w.hiddenUpdates,m=s[b],m===null?s[b]=[l]:m.push(l),l.lane=d|536870912),w):null}function ep(s){if(50<Ah)throw Ah=0,Zb=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var uu={};function nU(s,l,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(s,l,d,m){return new nU(s,l,d,m)}function H0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function da(s,l){var d=s.alternate;return d===null?(d=ai(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function zS(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function tp(s,l,d,m,b,w){var C=0;if(m=s,typeof s=="function")H0(s)&&(C=1);else if(typeof s=="string")C=oV(s,d,ye.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=ai(31,d,l,b),s.elementType=k,s.lanes=w,s;case j:return Vl(d.children,b,w,l);case E:C=8,b|=24;break;case A:return s=ai(12,d,l,b|2),s.elementType=A,s.lanes=w,s;case M:return s=ai(13,d,l,b),s.elementType=M,s.lanes=w,s;case B:return s=ai(19,d,l,b),s.elementType=B,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:C=10;break e;case R:C=9;break e;case I:C=11;break e;case D:C=14;break e;case P:C=16,m=null;break e}C=29,d=Error(r(130,s===null?"null":typeof s,"")),m=null}return l=ai(C,d,l,b),l.elementType=s,l.type=m,l.lanes=w,l}function Vl(s,l,d,m){return s=ai(7,s,m,l),s.lanes=d,s}function G0(s,l,d){return s=ai(6,s,null,l),s.lanes=d,s}function LS(s){var l=ai(18,null,null,0);return l.stateNode=s,l}function K0(s,l,d){return l=ai(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var qS=new WeakMap;function Ti(s,l){if(typeof s=="object"&&s!==null){var d=qS.get(s);return d!==void 0?d:(l={value:s,source:l,stack:on(l)},qS.set(s,l),l)}return{value:s,source:l,stack:on(l)}}var du=[],hu=0,np=null,ah=0,Ci=[],Ii=0,bo=null,Ps=1,Os="";function ha(s,l){du[hu++]=ah,du[hu++]=np,np=s,ah=l}function US(s,l,d){Ci[Ii++]=Ps,Ci[Ii++]=Os,Ci[Ii++]=bo,bo=s;var m=Ps;s=Os;var b=32-nn(m)-1;m&=~(1<<b),d+=1;var w=32-nn(l)+b;if(30<w){var C=b-b%5;w=(m&(1<<C)-1).toString(32),m>>=C,b-=C,Ps=1<<32-nn(l)+b|d<<b|m,Os=w+s}else Ps=1<<w|d<<b|m,Os=s}function Q0(s){s.return!==null&&(ha(s,1),US(s,1,0))}function W0(s){for(;s===np;)np=du[--hu],du[hu]=null,ah=du[--hu],du[hu]=null;for(;s===bo;)bo=Ci[--Ii],Ci[Ii]=null,Os=Ci[--Ii],Ci[Ii]=null,Ps=Ci[--Ii],Ci[Ii]=null}function VS(s,l){Ci[Ii++]=Ps,Ci[Ii++]=Os,Ci[Ii++]=bo,Ps=l.id,Os=l.overflow,bo=s}var ar=null,Qt=null,gt=!1,xo=null,Pi=!1,Y0=Error(r(519));function _o(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oh(Ti(l,s)),Y0}function BS(s){var l=s.stateNode,d=s.type,m=s.memoizedProps;switch(l[Sn]=s,l[Kn]=m,d){case"dialog":ut("cancel",l),ut("close",l);break;case"iframe":case"object":case"embed":ut("load",l);break;case"video":case"audio":for(d=0;d<Ch.length;d++)ut(Ch[d],l);break;case"source":ut("error",l);break;case"img":case"image":case"link":ut("error",l),ut("load",l);break;case"details":ut("toggle",l);break;case"input":ut("invalid",l),Dm(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":ut("invalid",l);break;case"textarea":ut("invalid",l),ho(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||sC(l.textContent,d)?(m.popover!=null&&(ut("beforetoggle",l),ut("toggle",l)),m.onScroll!=null&&ut("scroll",l),m.onScrollEnd!=null&&ut("scrollend",l),m.onClick!=null&&(l.onclick=Qi),l=!0):l=!1,l||_o(s,!0)}function $S(s){for(ar=s.return;ar;)switch(ar.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:ar=ar.return}}function fu(s){if(s!==ar)return!1;if(!gt)return $S(s),gt=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||mx(s.type,s.memoizedProps)),d=!d),d&&Qt&&_o(s),$S(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=mC(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=mC(s)}else l===27?(l=Qt,Do(s.type)?(s=bx,bx=null,Qt=s):Qt=l):Qt=ar?Ri(s.stateNode.nextSibling):null;return!0}function Bl(){Qt=ar=null,gt=!1}function X0(){var s=xo;return s!==null&&(Kr===null?Kr=s:Kr.push.apply(Kr,s),xo=null),s}function oh(s){xo===null?xo=[s]:xo.push(s)}var J0=F(null),$l=null,fa=null;function jo(s,l,d){de(J0,l._currentValue),l._currentValue=d}function ma(s){s._currentValue=J0.current,re(J0)}function Z0(s,l,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===d)break;s=s.return}}function eb(s,l,d,m){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var w=b.dependencies;if(w!==null){var C=b.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=b;for(var K=0;K<l.length;K++)if(U.context===l[K]){w.lanes|=d,U=w.alternate,U!==null&&(U.lanes|=d),Z0(w.return,d,s),m||(C=null);break e}w=U.next}}else if(b.tag===18){if(C=b.return,C===null)throw Error(r(341));C.lanes|=d,w=C.alternate,w!==null&&(w.lanes|=d),Z0(C,d,s),C=null}else C=b.child;if(C!==null)C.return=b;else for(C=b;C!==null;){if(C===s){C=null;break}if(b=C.sibling,b!==null){b.return=C.return,C=b;break}C=C.return}b=C}}function mu(s,l,d,m){s=null;for(var b=l,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var C=b.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var U=b.type;si(b.pendingProps.value,C.value)||(s!==null?s.push(U):s=[U])}}else if(b===ce.current){if(C=b.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(kh):s=[kh])}b=b.return}s!==null&&eb(l,s,d,m),l.flags|=262144}function rp(s){for(s=s.firstContext;s!==null;){if(!si(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Fl(s){$l=s,fa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function or(s){return FS($l,s)}function ip(s,l){return $l===null&&Fl(s),FS(s,l)}function FS(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},fa===null){if(s===null)throw Error(r(308));fa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else fa=fa.next=l;return d}var rU=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,m){s.push(m)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},iU=t.unstable_scheduleCallback,sU=t.unstable_NormalPriority,Cn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tb(){return{controller:new rU,data:new Map,refCount:0}}function lh(s){s.refCount--,s.refCount===0&&iU(sU,function(){s.controller.abort()})}var ch=null,nb=0,pu=0,gu=null;function aU(s,l){if(ch===null){var d=ch=[];nb=0,pu=sx(),gu={status:"pending",value:void 0,then:function(m){d.push(m)}}}return nb++,l.then(HS,HS),l}function HS(){if(--nb===0&&ch!==null){gu!==null&&(gu.status="fulfilled");var s=ch;ch=null,pu=0,gu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function oU(s,l){var d=[],m={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return s.then(function(){m.status="fulfilled",m.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(m.status="rejected",m.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),m}var GS=H.S;H.S=function(s,l){CT=Be(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&aU(s,l),GS!==null&&GS(s,l)};var Hl=F(null);function rb(){var s=Hl.current;return s!==null?s:Bt.pooledCache}function sp(s,l){l===null?de(Hl,Hl.current):de(Hl,l.pool)}function KS(){var s=rb();return s===null?null:{parent:Cn._currentValue,pool:s}}var vu=Error(r(460)),ib=Error(r(474)),ap=Error(r(542)),op={then:function(){}};function QS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function WS(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(Qi,Qi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,XS(s),s;default:if(typeof l.status=="string")l.then(Qi,Qi);else{if(s=Bt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(m){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=m}},function(m){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,XS(s),s}throw Kl=l,vu}}function Gl(s){try{var l=s._init;return l(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Kl=d,vu):d}}var Kl=null;function YS(){if(Kl===null)throw Error(r(459));var s=Kl;return Kl=null,s}function XS(s){if(s===vu||s===ap)throw Error(r(483))}var yu=null,uh=0;function lp(s){var l=uh;return uh+=1,yu===null&&(yu=[]),WS(yu,s,l)}function dh(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function cp(s,l){throw l.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function JS(s){function l(te,Y){if(s){var oe=te.deletions;oe===null?(te.deletions=[Y],te.flags|=16):oe.push(Y)}}function d(te,Y){if(!s)return null;for(;Y!==null;)l(te,Y),Y=Y.sibling;return null}function m(te){for(var Y=new Map;te!==null;)te.key!==null?Y.set(te.key,te):Y.set(te.index,te),te=te.sibling;return Y}function b(te,Y){return te=da(te,Y),te.index=0,te.sibling=null,te}function w(te,Y,oe){return te.index=oe,s?(oe=te.alternate,oe!==null?(oe=oe.index,oe<Y?(te.flags|=67108866,Y):oe):(te.flags|=67108866,Y)):(te.flags|=1048576,Y)}function C(te){return s&&te.alternate===null&&(te.flags|=67108866),te}function U(te,Y,oe,je){return Y===null||Y.tag!==6?(Y=G0(oe,te.mode,je),Y.return=te,Y):(Y=b(Y,oe),Y.return=te,Y)}function K(te,Y,oe,je){var qe=oe.type;return qe===j?xe(te,Y,oe.props.children,je,oe.key):Y!==null&&(Y.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Gl(qe)===Y.type)?(Y=b(Y,oe.props),dh(Y,oe),Y.return=te,Y):(Y=tp(oe.type,oe.key,oe.props,null,te.mode,je),dh(Y,oe),Y.return=te,Y)}function le(te,Y,oe,je){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==oe.containerInfo||Y.stateNode.implementation!==oe.implementation?(Y=K0(oe,te.mode,je),Y.return=te,Y):(Y=b(Y,oe.children||[]),Y.return=te,Y)}function xe(te,Y,oe,je,qe){return Y===null||Y.tag!==7?(Y=Vl(oe,te.mode,je,qe),Y.return=te,Y):(Y=b(Y,oe),Y.return=te,Y)}function Ne(te,Y,oe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=G0(""+Y,te.mode,oe),Y.return=te,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return oe=tp(Y.type,Y.key,Y.props,null,te.mode,oe),dh(oe,Y),oe.return=te,oe;case N:return Y=K0(Y,te.mode,oe),Y.return=te,Y;case P:return Y=Gl(Y),Ne(te,Y,oe)}if(ee(Y)||z(Y))return Y=Vl(Y,te.mode,oe,null),Y.return=te,Y;if(typeof Y.then=="function")return Ne(te,lp(Y),oe);if(Y.$$typeof===T)return Ne(te,ip(te,Y),oe);cp(te,Y)}return null}function ue(te,Y,oe,je){var qe=Y!==null?Y.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return qe!==null?null:U(te,Y,""+oe,je);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return oe.key===qe?K(te,Y,oe,je):null;case N:return oe.key===qe?le(te,Y,oe,je):null;case P:return oe=Gl(oe),ue(te,Y,oe,je)}if(ee(oe)||z(oe))return qe!==null?null:xe(te,Y,oe,je,null);if(typeof oe.then=="function")return ue(te,Y,lp(oe),je);if(oe.$$typeof===T)return ue(te,Y,ip(te,oe),je);cp(te,oe)}return null}function ge(te,Y,oe,je,qe){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return te=te.get(oe)||null,U(Y,te,""+je,qe);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case x:return te=te.get(je.key===null?oe:je.key)||null,K(Y,te,je,qe);case N:return te=te.get(je.key===null?oe:je.key)||null,le(Y,te,je,qe);case P:return je=Gl(je),ge(te,Y,oe,je,qe)}if(ee(je)||z(je))return te=te.get(oe)||null,xe(Y,te,je,qe,null);if(typeof je.then=="function")return ge(te,Y,oe,lp(je),qe);if(je.$$typeof===T)return ge(te,Y,oe,ip(Y,je),qe);cp(Y,je)}return null}function Re(te,Y,oe,je){for(var qe=null,_t=null,Me=Y,st=Y=0,ht=null;Me!==null&&st<oe.length;st++){Me.index>st?(ht=Me,Me=null):ht=Me.sibling;var jt=ue(te,Me,oe[st],je);if(jt===null){Me===null&&(Me=ht);break}s&&Me&&jt.alternate===null&&l(te,Me),Y=w(jt,Y,st),_t===null?qe=jt:_t.sibling=jt,_t=jt,Me=ht}if(st===oe.length)return d(te,Me),gt&&ha(te,st),qe;if(Me===null){for(;st<oe.length;st++)Me=Ne(te,oe[st],je),Me!==null&&(Y=w(Me,Y,st),_t===null?qe=Me:_t.sibling=Me,_t=Me);return gt&&ha(te,st),qe}for(Me=m(Me);st<oe.length;st++)ht=ge(Me,te,st,oe[st],je),ht!==null&&(s&&ht.alternate!==null&&Me.delete(ht.key===null?st:ht.key),Y=w(ht,Y,st),_t===null?qe=ht:_t.sibling=ht,_t=ht);return s&&Me.forEach(function(Uo){return l(te,Uo)}),gt&&ha(te,st),qe}function Fe(te,Y,oe,je){if(oe==null)throw Error(r(151));for(var qe=null,_t=null,Me=Y,st=Y=0,ht=null,jt=oe.next();Me!==null&&!jt.done;st++,jt=oe.next()){Me.index>st?(ht=Me,Me=null):ht=Me.sibling;var Uo=ue(te,Me,jt.value,je);if(Uo===null){Me===null&&(Me=ht);break}s&&Me&&Uo.alternate===null&&l(te,Me),Y=w(Uo,Y,st),_t===null?qe=Uo:_t.sibling=Uo,_t=Uo,Me=ht}if(jt.done)return d(te,Me),gt&&ha(te,st),qe;if(Me===null){for(;!jt.done;st++,jt=oe.next())jt=Ne(te,jt.value,je),jt!==null&&(Y=w(jt,Y,st),_t===null?qe=jt:_t.sibling=jt,_t=jt);return gt&&ha(te,st),qe}for(Me=m(Me);!jt.done;st++,jt=oe.next())jt=ge(Me,te,st,jt.value,je),jt!==null&&(s&&jt.alternate!==null&&Me.delete(jt.key===null?st:jt.key),Y=w(jt,Y,st),_t===null?qe=jt:_t.sibling=jt,_t=jt);return s&&Me.forEach(function(yV){return l(te,yV)}),gt&&ha(te,st),qe}function Lt(te,Y,oe,je){if(typeof oe=="object"&&oe!==null&&oe.type===j&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:e:{for(var qe=oe.key;Y!==null;){if(Y.key===qe){if(qe=oe.type,qe===j){if(Y.tag===7){d(te,Y.sibling),je=b(Y,oe.props.children),je.return=te,te=je;break e}}else if(Y.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Gl(qe)===Y.type){d(te,Y.sibling),je=b(Y,oe.props),dh(je,oe),je.return=te,te=je;break e}d(te,Y);break}else l(te,Y);Y=Y.sibling}oe.type===j?(je=Vl(oe.props.children,te.mode,je,oe.key),je.return=te,te=je):(je=tp(oe.type,oe.key,oe.props,null,te.mode,je),dh(je,oe),je.return=te,te=je)}return C(te);case N:e:{for(qe=oe.key;Y!==null;){if(Y.key===qe)if(Y.tag===4&&Y.stateNode.containerInfo===oe.containerInfo&&Y.stateNode.implementation===oe.implementation){d(te,Y.sibling),je=b(Y,oe.children||[]),je.return=te,te=je;break e}else{d(te,Y);break}else l(te,Y);Y=Y.sibling}je=K0(oe,te.mode,je),je.return=te,te=je}return C(te);case P:return oe=Gl(oe),Lt(te,Y,oe,je)}if(ee(oe))return Re(te,Y,oe,je);if(z(oe)){if(qe=z(oe),typeof qe!="function")throw Error(r(150));return oe=qe.call(oe),Fe(te,Y,oe,je)}if(typeof oe.then=="function")return Lt(te,Y,lp(oe),je);if(oe.$$typeof===T)return Lt(te,Y,ip(te,oe),je);cp(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,Y!==null&&Y.tag===6?(d(te,Y.sibling),je=b(Y,oe),je.return=te,te=je):(d(te,Y),je=G0(oe,te.mode,je),je.return=te,te=je),C(te)):d(te,Y)}return function(te,Y,oe,je){try{uh=0;var qe=Lt(te,Y,oe,je);return yu=null,qe}catch(Me){if(Me===vu||Me===ap)throw Me;var _t=ai(29,Me,null,te.mode);return _t.lanes=je,_t.return=te,_t}}}var Ql=JS(!0),ZS=JS(!1),wo=!1;function sb(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ab(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function No(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Eo(s,l,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Et&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,l=ep(s),MS(s,null,d),l}return Zm(s,m,l,d),ep(s)}function hh(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,qd(s,d)}}function ob(s,l){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var C={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?b=w=C:w=w.next=C,d=d.next}while(d!==null);w===null?b=w=l:w=w.next=l}else b=w=l;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var lb=!1;function fh(){if(lb){var s=gu;if(s!==null)throw s}}function mh(s,l,d,m){lb=!1;var b=s.updateQueue;wo=!1;var w=b.firstBaseUpdate,C=b.lastBaseUpdate,U=b.shared.pending;if(U!==null){b.shared.pending=null;var K=U,le=K.next;K.next=null,C===null?w=le:C.next=le,C=K;var xe=s.alternate;xe!==null&&(xe=xe.updateQueue,U=xe.lastBaseUpdate,U!==C&&(U===null?xe.firstBaseUpdate=le:U.next=le,xe.lastBaseUpdate=K))}if(w!==null){var Ne=b.baseState;C=0,xe=le=K=null,U=w;do{var ue=U.lane&-536870913,ge=ue!==U.lane;if(ge?(dt&ue)===ue:(m&ue)===ue){ue!==0&&ue===pu&&(lb=!0),xe!==null&&(xe=xe.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Re=s,Fe=U;ue=l;var Lt=d;switch(Fe.tag){case 1:if(Re=Fe.payload,typeof Re=="function"){Ne=Re.call(Lt,Ne,ue);break e}Ne=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Fe.payload,ue=typeof Re=="function"?Re.call(Lt,Ne,ue):Re,ue==null)break e;Ne=g({},Ne,ue);break e;case 2:wo=!0}}ue=U.callback,ue!==null&&(s.flags|=64,ge&&(s.flags|=8192),ge=b.callbacks,ge===null?b.callbacks=[ue]:ge.push(ue))}else ge={lane:ue,tag:U.tag,payload:U.payload,callback:U.callback,next:null},xe===null?(le=xe=ge,K=Ne):xe=xe.next=ge,C|=ue;if(U=U.next,U===null){if(U=b.shared.pending,U===null)break;ge=U,U=ge.next,ge.next=null,b.lastBaseUpdate=ge,b.shared.pending=null}}while(!0);xe===null&&(K=Ne),b.baseState=K,b.firstBaseUpdate=le,b.lastBaseUpdate=xe,w===null&&(b.shared.lanes=0),Io|=C,s.lanes=C,s.memoizedState=Ne}}function eA(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function tA(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)eA(d[s],l)}var bu=F(null),up=F(0);function nA(s,l){s=wa,de(up,s),de(bu,l),wa=s|l.baseLanes}function cb(){de(up,wa),de(bu,bu.current)}function ub(){wa=up.current,re(bu),re(up)}var oi=F(null),Oi=null;function So(s){var l=s.alternate;de(xn,xn.current&1),de(oi,s),Oi===null&&(l===null||bu.current!==null||l.memoizedState!==null)&&(Oi=s)}function db(s){de(xn,xn.current),de(oi,s),Oi===null&&(Oi=s)}function rA(s){s.tag===22?(de(xn,xn.current),de(oi,s),Oi===null&&(Oi=s)):Ao()}function Ao(){de(xn,xn.current),de(oi,oi.current)}function li(s){re(oi),Oi===s&&(Oi=null),re(xn)}var xn=F(0);function dp(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||vx(d)||yx(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var pa=0,it=null,Mt=null,In=null,hp=!1,xu=!1,Wl=!1,fp=0,ph=0,_u=null,lU=0;function un(){throw Error(r(321))}function hb(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!si(s[d],l[d]))return!1;return!0}function fb(s,l,d,m,b,w){return pa=w,it=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?UA:Tb,Wl=!1,w=d(m,b),Wl=!1,xu&&(w=sA(l,d,m,b)),iA(s),w}function iA(s){H.H=yh;var l=Mt!==null&&Mt.next!==null;if(pa=0,In=Mt=it=null,hp=!1,ph=0,_u=null,l)throw Error(r(300));s===null||Pn||(s=s.dependencies,s!==null&&rp(s)&&(Pn=!0))}function sA(s,l,d,m){it=s;var b=0;do{if(xu&&(_u=null),ph=0,xu=!1,25<=b)throw Error(r(301));if(b+=1,In=Mt=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}H.H=VA,w=l(d,m)}while(xu);return w}function cU(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?gh(l):l,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&(it.flags|=1024),l}function mb(){var s=fp!==0;return fp=0,s}function pb(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function gb(s){if(hp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}hp=!1}pa=0,In=Mt=it=null,xu=!1,ph=fp=0,_u=null}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?it.memoizedState=In=s:In=In.next=s,In}function _n(){if(Mt===null){var s=it.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var l=In===null?it.memoizedState:In.next;if(l!==null)In=l,Mt=s;else{if(s===null)throw it.alternate===null?Error(r(467)):Error(r(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},In===null?it.memoizedState=In=s:In=In.next=s}return In}function mp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gh(s){var l=ph;return ph+=1,_u===null&&(_u=[]),s=WS(_u,s,l),l=it,(In===null?l.memoizedState:In.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?UA:Tb),s}function pp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return gh(s);if(s.$$typeof===T)return or(s)}throw Error(r(438,String(s)))}function vb(s){var l=null,d=it.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=it.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=mp(),it.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),m=0;m<s;m++)d[m]=q;return l.index++,d}function ga(s,l){return typeof l=="function"?l(s):l}function gp(s){var l=_n();return yb(l,Mt,s)}function yb(s,l,d){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var b=s.baseQueue,w=m.pending;if(w!==null){if(b!==null){var C=b.next;b.next=w.next,w.next=C}l.baseQueue=b=w,m.pending=null}if(w=s.baseState,b===null)s.memoizedState=w;else{l=b.next;var U=C=null,K=null,le=l,xe=!1;do{var Ne=le.lane&-536870913;if(Ne!==le.lane?(dt&Ne)===Ne:(pa&Ne)===Ne){var ue=le.revertLane;if(ue===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ne===pu&&(xe=!0);else if((pa&ue)===ue){le=le.next,ue===pu&&(xe=!0);continue}else Ne={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(U=K=Ne,C=w):K=K.next=Ne,it.lanes|=ue,Io|=ue;Ne=le.action,Wl&&d(w,Ne),w=le.hasEagerState?le.eagerState:d(w,Ne)}else ue={lane:Ne,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(U=K=ue,C=w):K=K.next=ue,it.lanes|=Ne,Io|=Ne;le=le.next}while(le!==null&&le!==l);if(K===null?C=w:K.next=U,!si(w,s.memoizedState)&&(Pn=!0,xe&&(d=gu,d!==null)))throw d;s.memoizedState=w,s.baseState=C,s.baseQueue=K,m.lastRenderedState=w}return b===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function bb(s){var l=_n(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var m=d.dispatch,b=d.pending,w=l.memoizedState;if(b!==null){d.pending=null;var C=b=b.next;do w=s(w,C.action),C=C.next;while(C!==b);si(w,l.memoizedState)||(Pn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,m]}function aA(s,l,d){var m=it,b=_n(),w=gt;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=l();var C=!si((Mt||b).memoizedState,d);if(C&&(b.memoizedState=d,Pn=!0),b=b.queue,jb(cA.bind(null,m,b,s),[s]),b.getSnapshot!==l||C||In!==null&&In.memoizedState.tag&1){if(m.flags|=2048,ju(9,{destroy:void 0},lA.bind(null,m,b,d,l),null),Bt===null)throw Error(r(349));w||(pa&127)!==0||oA(m,l,d)}return d}function oA(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=it.updateQueue,l===null?(l=mp(),it.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function lA(s,l,d,m){l.value=d,l.getSnapshot=m,uA(l)&&dA(s)}function cA(s,l,d){return d(function(){uA(l)&&dA(s)})}function uA(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!si(s,d)}catch{return!0}}function dA(s){var l=Ul(s,2);l!==null&&Qr(l,s,2)}function xb(s){var l=Tr();if(typeof s=="function"){var d=s;if(s=d(),Wl){Vr(!0);try{d()}finally{Vr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:s},l}function hA(s,l,d,m){return s.baseState=d,yb(s,Mt,typeof m=="function"?m:ga)}function uU(s,l,d,m,b){if(bp(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};H.T!==null?d(!0):w.isTransition=!1,m(w),d=l.pending,d===null?(w.next=l.pending=w,fA(l,w)):(w.next=d.next,l.pending=d.next=w)}}function fA(s,l){var d=l.action,m=l.payload,b=s.state;if(l.isTransition){var w=H.T,C={};H.T=C;try{var U=d(b,m),K=H.S;K!==null&&K(C,U),mA(s,l,U)}catch(le){_b(s,l,le)}finally{w!==null&&C.types!==null&&(w.types=C.types),H.T=w}}else try{w=d(b,m),mA(s,l,w)}catch(le){_b(s,l,le)}}function mA(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){pA(s,l,m)},function(m){return _b(s,l,m)}):pA(s,l,d)}function pA(s,l,d){l.status="fulfilled",l.value=d,gA(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,fA(s,d)))}function _b(s,l,d){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,gA(l),l=l.next;while(l!==m)}s.action=null}function gA(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function vA(s,l){return l}function yA(s,l){if(gt){var d=Bt.formState;if(d!==null){e:{var m=it;if(gt){if(Qt){t:{for(var b=Qt,w=Pi;b.nodeType!==8;){if(!w){b=null;break t}if(b=Ri(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){Qt=Ri(b.nextSibling),m=b.data==="F!";break e}}_o(m)}m=!1}m&&(l=d[0])}}return d=Tr(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vA,lastRenderedState:l},d.queue=m,d=zA.bind(null,it,m),m.dispatch=d,m=xb(!1),w=Ab.bind(null,it,!1,m.queue),m=Tr(),b={state:l,dispatch:null,action:s,pending:null},m.queue=b,d=uU.bind(null,it,b,w,d),b.dispatch=d,m.memoizedState=s,[l,d,!1]}function bA(s){var l=_n();return xA(l,Mt,s)}function xA(s,l,d){if(l=yb(s,l,vA)[0],s=gp(ga)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=gh(l)}catch(C){throw C===vu?ap:C}else m=l;l=_n();var b=l.queue,w=b.dispatch;return d!==l.memoizedState&&(it.flags|=2048,ju(9,{destroy:void 0},dU.bind(null,b,d),null)),[m,w,s]}function dU(s,l){s.action=l}function _A(s){var l=_n(),d=Mt;if(d!==null)return xA(l,d,s);_n(),l=l.memoizedState,d=_n();var m=d.queue.dispatch;return d.memoizedState=s,[l,m,!1]}function ju(s,l,d,m){return s={tag:s,create:d,deps:m,inst:l,next:null},l=it.updateQueue,l===null&&(l=mp(),it.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,l.lastEffect=s),s}function jA(){return _n().memoizedState}function vp(s,l,d,m){var b=Tr();it.flags|=s,b.memoizedState=ju(1|l,{destroy:void 0},d,m===void 0?null:m)}function yp(s,l,d,m){var b=_n();m=m===void 0?null:m;var w=b.memoizedState.inst;Mt!==null&&m!==null&&hb(m,Mt.memoizedState.deps)?b.memoizedState=ju(l,w,d,m):(it.flags|=s,b.memoizedState=ju(1|l,w,d,m))}function wA(s,l){vp(8390656,8,s,l)}function jb(s,l){yp(2048,8,s,l)}function hU(s){it.flags|=4;var l=it.updateQueue;if(l===null)l=mp(),it.updateQueue=l,l.events=[s];else{var d=l.events;d===null?l.events=[s]:d.push(s)}}function NA(s){var l=_n().memoizedState;return hU({ref:l,nextImpl:s}),function(){if((Et&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function EA(s,l){return yp(4,2,s,l)}function SA(s,l){return yp(4,4,s,l)}function AA(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function TA(s,l,d){d=d!=null?d.concat([s]):null,yp(4,4,AA.bind(null,l,s),d)}function wb(){}function CA(s,l){var d=_n();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&hb(l,m[1])?m[0]:(d.memoizedState=[s,l],s)}function IA(s,l){var d=_n();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&hb(l,m[1]))return m[0];if(m=s(),Wl){Vr(!0);try{s()}finally{Vr(!1)}}return d.memoizedState=[m,l],m}function Nb(s,l,d){return d===void 0||(pa&1073741824)!==0&&(dt&261930)===0?s.memoizedState=l:(s.memoizedState=d,s=PT(),it.lanes|=s,Io|=s,d)}function PA(s,l,d,m){return si(d,l)?d:bu.current!==null?(s=Nb(s,d,m),si(s,l)||(Pn=!0),s):(pa&42)===0||(pa&1073741824)!==0&&(dt&261930)===0?(Pn=!0,s.memoizedState=d):(s=PT(),it.lanes|=s,Io|=s,l)}function OA(s,l,d,m,b){var w=se.p;se.p=w!==0&&8>w?w:8;var C=H.T,U={};H.T=U,Ab(s,!1,l,d);try{var K=b(),le=H.S;if(le!==null&&le(U,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var xe=oU(K,m);vh(s,l,xe,di(s))}else vh(s,l,m,di(s))}catch(Ne){vh(s,l,{then:function(){},status:"rejected",reason:Ne},di())}finally{se.p=w,C!==null&&U.types!==null&&(C.types=U.types),H.T=C}}function fU(){}function Eb(s,l,d,m){if(s.tag!==5)throw Error(r(476));var b=RA(s).queue;OA(s,b,l,X,d===null?fU:function(){return kA(s),d(m)})}function RA(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:X},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function kA(s){var l=RA(s);l.next===null&&(l=s.alternate.memoizedState),vh(s,l.next.queue,{},di())}function Sb(){return or(kh)}function DA(){return _n().memoizedState}function MA(){return _n().memoizedState}function mU(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=di();s=No(d);var m=Eo(l,s,d);m!==null&&(Qr(m,l,d),hh(m,l,d)),l={cache:tb()},s.payload=l;return}l=l.return}}function pU(s,l,d){var m=di();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},bp(s)?LA(l,d):(d=F0(s,l,d,m),d!==null&&(Qr(d,s,m),qA(d,l,m)))}function zA(s,l,d){var m=di();vh(s,l,d,m)}function vh(s,l,d,m){var b={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(bp(s))LA(l,b);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var C=l.lastRenderedState,U=w(C,d);if(b.hasEagerState=!0,b.eagerState=U,si(U,C))return Zm(s,l,b,0),Bt===null&&Jm(),!1}catch{}if(d=F0(s,l,b,m),d!==null)return Qr(d,s,m),qA(d,l,m),!0}return!1}function Ab(s,l,d,m){if(m={lane:2,revertLane:sx(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},bp(s)){if(l)throw Error(r(479))}else l=F0(s,d,m,2),l!==null&&Qr(l,s,2)}function bp(s){var l=s.alternate;return s===it||l!==null&&l===it}function LA(s,l){xu=hp=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function qA(s,l,d){if((d&4194048)!==0){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,qd(s,d)}}var yh={readContext:or,use:pp,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};yh.useEffectEvent=un;var UA={readContext:or,use:pp,useCallback:function(s,l){return Tr().memoizedState=[s,l===void 0?null:l],s},useContext:or,useEffect:wA,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,vp(4194308,4,AA.bind(null,l,s),d)},useLayoutEffect:function(s,l){return vp(4194308,4,s,l)},useInsertionEffect:function(s,l){vp(4,2,s,l)},useMemo:function(s,l){var d=Tr();l=l===void 0?null:l;var m=s();if(Wl){Vr(!0);try{s()}finally{Vr(!1)}}return d.memoizedState=[m,l],m},useReducer:function(s,l,d){var m=Tr();if(d!==void 0){var b=d(l);if(Wl){Vr(!0);try{d(l)}finally{Vr(!1)}}}else b=l;return m.memoizedState=m.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},m.queue=s,s=s.dispatch=pU.bind(null,it,s),[m.memoizedState,s]},useRef:function(s){var l=Tr();return s={current:s},l.memoizedState=s},useState:function(s){s=xb(s);var l=s.queue,d=zA.bind(null,it,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:wb,useDeferredValue:function(s,l){var d=Tr();return Nb(d,s,l)},useTransition:function(){var s=xb(!1);return s=OA.bind(null,it,s.queue,!0,!1),Tr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var m=it,b=Tr();if(gt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Bt===null)throw Error(r(349));(dt&127)!==0||oA(m,l,d)}b.memoizedState=d;var w={value:d,getSnapshot:l};return b.queue=w,wA(cA.bind(null,m,w,s),[s]),m.flags|=2048,ju(9,{destroy:void 0},lA.bind(null,m,w,d,l),null),d},useId:function(){var s=Tr(),l=Bt.identifierPrefix;if(gt){var d=Os,m=Ps;d=(m&~(1<<32-nn(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=fp++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=lU++,l="_"+l+"r_"+d.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Sb,useFormState:yA,useActionState:yA,useOptimistic:function(s){var l=Tr();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Ab.bind(null,it,!0,d),d.dispatch=l,[s,l]},useMemoCache:vb,useCacheRefresh:function(){return Tr().memoizedState=mU.bind(null,it)},useEffectEvent:function(s){var l=Tr(),d={impl:s};return l.memoizedState=d,function(){if((Et&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},Tb={readContext:or,use:pp,useCallback:CA,useContext:or,useEffect:jb,useImperativeHandle:TA,useInsertionEffect:EA,useLayoutEffect:SA,useMemo:IA,useReducer:gp,useRef:jA,useState:function(){return gp(ga)},useDebugValue:wb,useDeferredValue:function(s,l){var d=_n();return PA(d,Mt.memoizedState,s,l)},useTransition:function(){var s=gp(ga)[0],l=_n().memoizedState;return[typeof s=="boolean"?s:gh(s),l]},useSyncExternalStore:aA,useId:DA,useHostTransitionStatus:Sb,useFormState:bA,useActionState:bA,useOptimistic:function(s,l){var d=_n();return hA(d,Mt,s,l)},useMemoCache:vb,useCacheRefresh:MA};Tb.useEffectEvent=NA;var VA={readContext:or,use:pp,useCallback:CA,useContext:or,useEffect:jb,useImperativeHandle:TA,useInsertionEffect:EA,useLayoutEffect:SA,useMemo:IA,useReducer:bb,useRef:jA,useState:function(){return bb(ga)},useDebugValue:wb,useDeferredValue:function(s,l){var d=_n();return Mt===null?Nb(d,s,l):PA(d,Mt.memoizedState,s,l)},useTransition:function(){var s=bb(ga)[0],l=_n().memoizedState;return[typeof s=="boolean"?s:gh(s),l]},useSyncExternalStore:aA,useId:DA,useHostTransitionStatus:Sb,useFormState:_A,useActionState:_A,useOptimistic:function(s,l){var d=_n();return Mt!==null?hA(d,Mt,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:vb,useCacheRefresh:MA};VA.useEffectEvent=NA;function Cb(s,l,d,m){l=s.memoizedState,d=d(m,l),d=d==null?l:g({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Ib={enqueueSetState:function(s,l,d){s=s._reactInternals;var m=di(),b=No(m);b.payload=l,d!=null&&(b.callback=d),l=Eo(s,b,m),l!==null&&(Qr(l,s,m),hh(l,s,m))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var m=di(),b=No(m);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=Eo(s,b,m),l!==null&&(Qr(l,s,m),hh(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=di(),m=No(d);m.tag=2,l!=null&&(m.callback=l),l=Eo(s,m,d),l!==null&&(Qr(l,s,d),hh(l,s,d))}};function BA(s,l,d,m,b,w,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,w,C):l.prototype&&l.prototype.isPureReactComponent?!ih(d,m)||!ih(b,w):!0}function $A(s,l,d,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==s&&Ib.enqueueReplaceState(l,l.state,null)}function Yl(s,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(s=s.defaultProps){d===l&&(d=g({},d));for(var b in s)d[b]===void 0&&(d[b]=s[b])}return d}function FA(s){Xm(s)}function HA(s){console.error(s)}function GA(s){Xm(s)}function xp(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function KA(s,l,d){try{var m=s.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Pb(s,l,d){return d=No(d),d.tag=3,d.payload={element:null},d.callback=function(){xp(s,l)},d}function QA(s){return s=No(s),s.tag=3,s}function WA(s,l,d,m){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;s.payload=function(){return b(w)},s.callback=function(){KA(l,d,m)}}var C=d.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){KA(l,d,m),typeof b!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var U=m.stack;this.componentDidCatch(m.value,{componentStack:U!==null?U:""})})}function gU(s,l,d,m,b){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&mu(l,d,b,!0),d=oi.current,d!==null){switch(d.tag){case 31:case 13:return Oi===null?Op():d.alternate===null&&dn===0&&(dn=3),d.flags&=-257,d.flags|=65536,d.lanes=b,m===op?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),nx(s,m,b)),!1;case 22:return d.flags|=65536,m===op?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),nx(s,m,b)),!1}throw Error(r(435,d.tag))}return nx(s,m,b),Op(),!1}if(gt)return l=oi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,m!==Y0&&(s=Error(r(422),{cause:m}),oh(Ti(s,d)))):(m!==Y0&&(l=Error(r(423),{cause:m}),oh(Ti(l,d))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,m=Ti(m,d),b=Pb(s.stateNode,m,b),ob(s,b),dn!==4&&(dn=2)),!1;var w=Error(r(520),{cause:m});if(w=Ti(w,d),Sh===null?Sh=[w]:Sh.push(w),dn!==4&&(dn=2),l===null)return!0;m=Ti(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=b&-b,d.lanes|=s,s=Pb(d.stateNode,m,s),ob(d,s),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Po===null||!Po.has(w))))return d.flags|=65536,b&=-b,d.lanes|=b,b=QA(b),WA(b,s,d,m),ob(d,b),!1}d=d.return}while(d!==null);return!1}var Ob=Error(r(461)),Pn=!1;function lr(s,l,d,m){l.child=s===null?ZS(l,null,d,m):Ql(l,s.child,d,m)}function YA(s,l,d,m,b){d=d.render;var w=l.ref;if("ref"in m){var C={};for(var U in m)U!=="ref"&&(C[U]=m[U])}else C=m;return Fl(l),m=fb(s,l,d,C,w,b),U=mb(),s!==null&&!Pn?(pb(s,l,b),va(s,l,b)):(gt&&U&&Q0(l),l.flags|=1,lr(s,l,m,b),l.child)}function XA(s,l,d,m,b){if(s===null){var w=d.type;return typeof w=="function"&&!H0(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,JA(s,l,w,m,b)):(s=tp(d.type,null,m,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!Ub(s,b)){var C=w.memoizedProps;if(d=d.compare,d=d!==null?d:ih,d(C,m)&&s.ref===l.ref)return va(s,l,b)}return l.flags|=1,s=da(w,m),s.ref=l.ref,s.return=l,l.child=s}function JA(s,l,d,m,b){if(s!==null){var w=s.memoizedProps;if(ih(w,m)&&s.ref===l.ref)if(Pn=!1,l.pendingProps=m=w,Ub(s,b))(s.flags&131072)!==0&&(Pn=!0);else return l.lanes=s.lanes,va(s,l,b)}return Rb(s,l,d,m,b)}function ZA(s,l,d,m){var b=m.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|d:d,s!==null){for(m=l.child=s.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~w}else m=0,l.child=null;return eT(s,l,w,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&sp(l,w!==null?w.cachePool:null),w!==null?nA(l,w):cb(),rA(l);else return m=l.lanes=536870912,eT(s,l,w!==null?w.baseLanes|d:d,d,m)}else w!==null?(sp(l,w.cachePool),nA(l,w),Ao(),l.memoizedState=null):(s!==null&&sp(l,null),cb(),Ao());return lr(s,l,b,d),l.child}function bh(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function eT(s,l,d,m,b){var w=rb();return w=w===null?null:{parent:Cn._currentValue,pool:w},l.memoizedState={baseLanes:d,cachePool:w},s!==null&&sp(l,null),cb(),rA(l),s!==null&&mu(s,l,m,!0),l.childLanes=b,null}function _p(s,l){return l=wp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function tT(s,l,d){return Ql(l,s.child,null,d),s=_p(l,l.pendingProps),s.flags|=2,li(l),l.memoizedState=null,s}function vU(s,l,d){var m=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(gt){if(m.mode==="hidden")return s=_p(l,m),l.lanes=536870912,bh(null,s);if(db(l),(s=Qt)?(s=fC(s,Pi),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Ps,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},d=LS(s),d.return=l,l.child=d,ar=l,Qt=null)):s=null,s===null)throw _o(l);return l.lanes=536870912,null}return _p(l,m)}var w=s.memoizedState;if(w!==null){var C=w.dehydrated;if(db(l),b)if(l.flags&256)l.flags&=-257,l=tT(s,l,d);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Pn||mu(s,l,d,!1),b=(d&s.childLanes)!==0,Pn||b){if(m=Bt,m!==null&&(C=Ud(m,d),C!==0&&C!==w.retryLane))throw w.retryLane=C,Ul(s,C),Qr(m,s,C),Ob;Op(),l=tT(s,l,d)}else s=w.treeContext,Qt=Ri(C.nextSibling),ar=l,gt=!0,xo=null,Pi=!1,s!==null&&VS(l,s),l=_p(l,m),l.flags|=4096;return l}return s=da(s.child,{mode:m.mode,children:m.children}),s.ref=l.ref,l.child=s,s.return=l,s}function jp(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function Rb(s,l,d,m,b){return Fl(l),d=fb(s,l,d,m,void 0,b),m=mb(),s!==null&&!Pn?(pb(s,l,b),va(s,l,b)):(gt&&m&&Q0(l),l.flags|=1,lr(s,l,d,b),l.child)}function nT(s,l,d,m,b,w){return Fl(l),l.updateQueue=null,d=sA(l,m,d,b),iA(s),m=mb(),s!==null&&!Pn?(pb(s,l,w),va(s,l,w)):(gt&&m&&Q0(l),l.flags|=1,lr(s,l,d,w),l.child)}function rT(s,l,d,m,b){if(Fl(l),l.stateNode===null){var w=uu,C=d.contextType;typeof C=="object"&&C!==null&&(w=or(C)),w=new d(m,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Ib,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=m,w.state=l.memoizedState,w.refs={},sb(l),C=d.contextType,w.context=typeof C=="object"&&C!==null?or(C):uu,w.state=l.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(Cb(l,d,C,m),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&Ib.enqueueReplaceState(w,w.state,null),mh(l,m,w,b),fh(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(s===null){w=l.stateNode;var U=l.memoizedProps,K=Yl(d,U);w.props=K;var le=w.context,xe=d.contextType;C=uu,typeof xe=="object"&&xe!==null&&(C=or(xe));var Ne=d.getDerivedStateFromProps;xe=typeof Ne=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=l.pendingProps!==U,xe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||le!==C)&&$A(l,w,m,C),wo=!1;var ue=l.memoizedState;w.state=ue,mh(l,m,w,b),fh(),le=l.memoizedState,U||ue!==le||wo?(typeof Ne=="function"&&(Cb(l,d,Ne,m),le=l.memoizedState),(K=wo||BA(l,d,K,m,ue,le,C))?(xe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=le),w.props=m,w.state=le,w.context=C,m=K):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{w=l.stateNode,ab(s,l),C=l.memoizedProps,xe=Yl(d,C),w.props=xe,Ne=l.pendingProps,ue=w.context,le=d.contextType,K=uu,typeof le=="object"&&le!==null&&(K=or(le)),U=d.getDerivedStateFromProps,(le=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==Ne||ue!==K)&&$A(l,w,m,K),wo=!1,ue=l.memoizedState,w.state=ue,mh(l,m,w,b),fh();var ge=l.memoizedState;C!==Ne||ue!==ge||wo||s!==null&&s.dependencies!==null&&rp(s.dependencies)?(typeof U=="function"&&(Cb(l,d,U,m),ge=l.memoizedState),(xe=wo||BA(l,d,xe,m,ue,ge,K)||s!==null&&s.dependencies!==null&&rp(s.dependencies))?(le||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,ge,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,ge,K)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ue===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ue===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ge),w.props=m,w.state=ge,w.context=K,m=xe):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ue===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ue===s.memoizedState||(l.flags|=1024),m=!1)}return w=m,jp(s,l),m=(l.flags&128)!==0,w||m?(w=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&m?(l.child=Ql(l,s.child,null,b),l.child=Ql(l,null,d,b)):lr(s,l,d,b),l.memoizedState=w.state,s=l.child):s=va(s,l,b),s}function iT(s,l,d,m){return Bl(),l.flags|=256,lr(s,l,d,m),l.child}var kb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Db(s){return{baseLanes:s,cachePool:KS()}}function Mb(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=ui),s}function sT(s,l,d){var m=l.pendingProps,b=!1,w=(l.flags&128)!==0,C;if((C=w)||(C=s!==null&&s.memoizedState===null?!1:(xn.current&2)!==0),C&&(b=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,s===null){if(gt){if(b?So(l):Ao(),(s=Qt)?(s=fC(s,Pi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Ps,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},d=LS(s),d.return=l,l.child=d,ar=l,Qt=null)):s=null,s===null)throw _o(l);return yx(s)?l.lanes=32:l.lanes=536870912,null}var U=m.children;return m=m.fallback,b?(Ao(),b=l.mode,U=wp({mode:"hidden",children:U},b),m=Vl(m,b,d,null),U.return=l,m.return=l,U.sibling=m,l.child=U,m=l.child,m.memoizedState=Db(d),m.childLanes=Mb(s,C,d),l.memoizedState=kb,bh(null,m)):(So(l),zb(l,U))}var K=s.memoizedState;if(K!==null&&(U=K.dehydrated,U!==null)){if(w)l.flags&256?(So(l),l.flags&=-257,l=Lb(s,l,d)):l.memoizedState!==null?(Ao(),l.child=s.child,l.flags|=128,l=null):(Ao(),U=m.fallback,b=l.mode,m=wp({mode:"visible",children:m.children},b),U=Vl(U,b,d,null),U.flags|=2,m.return=l,U.return=l,m.sibling=U,l.child=m,Ql(l,s.child,null,d),m=l.child,m.memoizedState=Db(d),m.childLanes=Mb(s,C,d),l.memoizedState=kb,l=bh(null,m));else if(So(l),yx(U)){if(C=U.nextSibling&&U.nextSibling.dataset,C)var le=C.dgst;C=le,m=Error(r(419)),m.stack="",m.digest=C,oh({value:m,source:null,stack:null}),l=Lb(s,l,d)}else if(Pn||mu(s,l,d,!1),C=(d&s.childLanes)!==0,Pn||C){if(C=Bt,C!==null&&(m=Ud(C,d),m!==0&&m!==K.retryLane))throw K.retryLane=m,Ul(s,m),Qr(C,s,m),Ob;vx(U)||Op(),l=Lb(s,l,d)}else vx(U)?(l.flags|=192,l.child=s.child,l=null):(s=K.treeContext,Qt=Ri(U.nextSibling),ar=l,gt=!0,xo=null,Pi=!1,s!==null&&VS(l,s),l=zb(l,m.children),l.flags|=4096);return l}return b?(Ao(),U=m.fallback,b=l.mode,K=s.child,le=K.sibling,m=da(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,le!==null?U=da(le,U):(U=Vl(U,b,d,null),U.flags|=2),U.return=l,m.return=l,m.sibling=U,l.child=m,bh(null,m),m=l.child,U=s.child.memoizedState,U===null?U=Db(d):(b=U.cachePool,b!==null?(K=Cn._currentValue,b=b.parent!==K?{parent:K,pool:K}:b):b=KS(),U={baseLanes:U.baseLanes|d,cachePool:b}),m.memoizedState=U,m.childLanes=Mb(s,C,d),l.memoizedState=kb,bh(s.child,m)):(So(l),d=s.child,s=d.sibling,d=da(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,s!==null&&(C=l.deletions,C===null?(l.deletions=[s],l.flags|=16):C.push(s)),l.child=d,l.memoizedState=null,d)}function zb(s,l){return l=wp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function wp(s,l){return s=ai(22,s,null,l),s.lanes=0,s}function Lb(s,l,d){return Ql(l,s.child,null,d),s=zb(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function aT(s,l,d){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),Z0(s.return,l,d)}function qb(s,l,d,m,b,w){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b,treeForkCount:w}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=d,C.tailMode=b,C.treeForkCount=w)}function oT(s,l,d){var m=l.pendingProps,b=m.revealOrder,w=m.tail;m=m.children;var C=xn.current,U=(C&2)!==0;if(U?(C=C&1|2,l.flags|=128):C&=1,de(xn,C),lr(s,l,m,d),m=gt?ah:0,!U&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&aT(s,d,l);else if(s.tag===19)aT(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(d=l.child,b=null;d!==null;)s=d.alternate,s!==null&&dp(s)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),qb(l,!1,b,d,w,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&dp(s)===null){l.child=b;break}s=b.sibling,b.sibling=d,d=b,b=s}qb(l,!0,d,null,w,m);break;case"together":qb(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function va(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Io|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(mu(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,d=da(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=da(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function Ub(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&rp(s)))}function yU(s,l,d){switch(l.tag){case 3:Ie(l,l.stateNode.containerInfo),jo(l,Cn,s.memoizedState.cache),Bl();break;case 27:case 5:Z(l);break;case 4:Ie(l,l.stateNode.containerInfo);break;case 10:jo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,db(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(So(l),l.flags|=128,null):(d&l.child.childLanes)!==0?sT(s,l,d):(So(l),s=va(s,l,d),s!==null?s.sibling:null);So(l);break;case 19:var b=(s.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(mu(s,l,d,!1),m=(d&l.childLanes)!==0),b){if(m)return oT(s,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),de(xn,xn.current),m)break;return null;case 22:return l.lanes=0,ZA(s,l,d,l.pendingProps);case 24:jo(l,Cn,s.memoizedState.cache)}return va(s,l,d)}function lT(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)Pn=!0;else{if(!Ub(s,d)&&(l.flags&128)===0)return Pn=!1,yU(s,l,d);Pn=(s.flags&131072)!==0}else Pn=!1,gt&&(l.flags&1048576)!==0&&US(l,ah,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(s=Gl(l.elementType),l.type=s,typeof s=="function")H0(s)?(m=Yl(s,m),l.tag=1,l=rT(null,l,s,m,d)):(l.tag=0,l=Rb(null,l,s,m,d));else{if(s!=null){var b=s.$$typeof;if(b===I){l.tag=11,l=YA(null,l,s,m,d);break e}else if(b===D){l.tag=14,l=XA(null,l,s,m,d);break e}}throw l=ve(s)||s,Error(r(306,l,""))}}return l;case 0:return Rb(s,l,l.type,l.pendingProps,d);case 1:return m=l.type,b=Yl(m,l.pendingProps),rT(s,l,m,b,d);case 3:e:{if(Ie(l,l.stateNode.containerInfo),s===null)throw Error(r(387));m=l.pendingProps;var w=l.memoizedState;b=w.element,ab(s,l),mh(l,m,null,d);var C=l.memoizedState;if(m=C.cache,jo(l,Cn,m),m!==w.cache&&eb(l,[Cn],d,!0),fh(),m=C.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=iT(s,l,m,d);break e}else if(m!==b){b=Ti(Error(r(424)),l),oh(b),l=iT(s,l,m,d);break e}else for(s=l.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Qt=Ri(s.firstChild),ar=l,gt=!0,xo=null,Pi=!0,d=ZS(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Bl(),m===b){l=va(s,l,d);break e}lr(s,l,m,d)}l=l.child}return l;case 26:return jp(s,l),s===null?(d=bC(l.type,null,l.pendingProps,null))?l.memoizedState=d:gt||(d=l.type,s=l.pendingProps,m=qp(G.current).createElement(d),m[Sn]=l,m[Kn]=s,cr(m,d,s),An(m),l.stateNode=m):l.memoizedState=bC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Z(l),s===null&&gt&&(m=l.stateNode=gC(l.type,l.pendingProps,G.current),ar=l,Pi=!0,b=Qt,Do(l.type)?(bx=b,Qt=Ri(m.firstChild)):Qt=b),lr(s,l,l.pendingProps.children,d),jp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&gt&&((b=m=Qt)&&(m=QU(m,l.type,l.pendingProps,Pi),m!==null?(l.stateNode=m,ar=l,Qt=Ri(m.firstChild),Pi=!1,b=!0):b=!1),b||_o(l)),Z(l),b=l.type,w=l.pendingProps,C=s!==null?s.memoizedProps:null,m=w.children,mx(b,w)?m=null:C!==null&&mx(b,C)&&(l.flags|=32),l.memoizedState!==null&&(b=fb(s,l,cU,null,null,d),kh._currentValue=b),jp(s,l),lr(s,l,m,d),l.child;case 6:return s===null&&gt&&((s=d=Qt)&&(d=WU(d,l.pendingProps,Pi),d!==null?(l.stateNode=d,ar=l,Qt=null,s=!0):s=!1),s||_o(l)),null;case 13:return sT(s,l,d);case 4:return Ie(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=Ql(l,null,m,d):lr(s,l,m,d),l.child;case 11:return YA(s,l,l.type,l.pendingProps,d);case 7:return lr(s,l,l.pendingProps,d),l.child;case 8:return lr(s,l,l.pendingProps.children,d),l.child;case 12:return lr(s,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,jo(l,l.type,m.value),lr(s,l,m.children,d),l.child;case 9:return b=l.type._context,m=l.pendingProps.children,Fl(l),b=or(b),m=m(b),l.flags|=1,lr(s,l,m,d),l.child;case 14:return XA(s,l,l.type,l.pendingProps,d);case 15:return JA(s,l,l.type,l.pendingProps,d);case 19:return oT(s,l,d);case 31:return vU(s,l,d);case 22:return ZA(s,l,d,l.pendingProps);case 24:return Fl(l),m=or(Cn),s===null?(b=rb(),b===null&&(b=Bt,w=tb(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=d),b=w),l.memoizedState={parent:m,cache:b},sb(l),jo(l,Cn,b)):((s.lanes&d)!==0&&(ab(s,l),mh(l,null,null,d),fh()),b=s.memoizedState,w=l.memoizedState,b.parent!==m?(b={parent:m,cache:m},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),jo(l,Cn,m)):(m=w.cache,jo(l,Cn,m),m!==b.cache&&eb(l,[Cn],d,!0))),lr(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ya(s){s.flags|=4}function Vb(s,l,d,m,b){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(DT())s.flags|=8192;else throw Kl=op,ib}else s.flags&=-16777217}function cT(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!NC(l))if(DT())s.flags|=8192;else throw Kl=op,ib}function Np(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ve():536870912,s.lanes|=l,Su|=l)}function xh(s,l){if(!gt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Wt(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(l)for(var b=s.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=m,s.childLanes=d,l}function bU(s,l,d){var m=l.pendingProps;switch(W0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(l),null;case 1:return Wt(l),null;case 3:return d=l.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),ma(Cn),ae(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(fu(l)?ya(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,X0())),Wt(l),null;case 26:var b=l.type,w=l.memoizedState;return s===null?(ya(l),w!==null?(Wt(l),cT(l,w)):(Wt(l),Vb(l,b,null,m,d))):w?w!==s.memoizedState?(ya(l),Wt(l),cT(l,w)):(Wt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==m&&ya(l),Wt(l),Vb(l,b,s,m,d)),null;case 27:if(Q(l),d=G.current,b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ya(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}s=ye.current,fu(l)?BS(l):(s=gC(b,m,d),l.stateNode=s,ya(l))}return Wt(l),null;case 5:if(Q(l),b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ya(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}if(w=ye.current,fu(l))BS(l);else{var C=qp(G.current);switch(w){case 1:w=C.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=C.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=C.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?C.createElement(b,{is:m.is}):C.createElement(b)}}w[Sn]=l,w[Kn]=m;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)w.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=w;e:switch(cr(w,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ya(l)}}return Wt(l),Vb(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,d),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==m&&ya(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(s=G.current,fu(l)){if(s=l.stateNode,d=l.memoizedProps,m=null,b=ar,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}s[Sn]=l,s=!!(s.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||sC(s.nodeValue,d)),s||_o(l,!0)}else s=qp(s).createTextNode(m),s[Sn]=l,l.stateNode=s}return Wt(l),null;case 31:if(d=l.memoizedState,s===null||s.memoizedState!==null){if(m=fu(l),d!==null){if(s===null){if(!m)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Sn]=l}else Bl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),s=!1}else d=X0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return l.flags&256?(li(l),l):(li(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Wt(l),null;case 13:if(m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=fu(l),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Sn]=l}else Bl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),b=!1}else b=X0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(li(l),l):(li(l),null)}return li(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,s=s!==null&&s.memoizedState!==null,d&&(m=l.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)),d!==s&&d&&(l.child.flags|=8192),Np(l,l.updateQueue),Wt(l),null);case 4:return ae(),s===null&&cx(l.stateNode.containerInfo),Wt(l),null;case 10:return ma(l.type),Wt(l),null;case 19:if(re(xn),m=l.memoizedState,m===null)return Wt(l),null;if(b=(l.flags&128)!==0,w=m.rendering,w===null)if(b)xh(m,!1);else{if(dn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=dp(s),w!==null){for(l.flags|=128,xh(m,!1),s=w.updateQueue,l.updateQueue=s,Np(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)zS(d,s),d=d.sibling;return de(xn,xn.current&1|2),gt&&ha(l,m.treeForkCount),l.child}s=s.sibling}m.tail!==null&&Be()>Cp&&(l.flags|=128,b=!0,xh(m,!1),l.lanes=4194304)}else{if(!b)if(s=dp(w),s!==null){if(l.flags|=128,b=!0,s=s.updateQueue,l.updateQueue=s,Np(l,s),xh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!gt)return Wt(l),null}else 2*Be()-m.renderingStartTime>Cp&&d!==536870912&&(l.flags|=128,b=!0,xh(m,!1),l.lanes=4194304);m.isBackwards?(w.sibling=l.child,l.child=w):(s=m.last,s!==null?s.sibling=w:l.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Be(),s.sibling=null,d=xn.current,de(xn,b?d&1|2:d&1),gt&&ha(l,m.treeForkCount),s):(Wt(l),null);case 22:case 23:return li(l),ub(),m=l.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Wt(l),l.subtreeFlags&6&&(l.flags|=8192)):Wt(l),d=l.updateQueue,d!==null&&Np(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),s!==null&&re(Hl),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ma(Cn),Wt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function xU(s,l){switch(W0(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ma(Cn),ae(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Q(l),null;case 31:if(l.memoizedState!==null){if(li(l),l.alternate===null)throw Error(r(340));Bl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(li(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Bl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return re(xn),null;case 4:return ae(),null;case 10:return ma(l.type),null;case 22:case 23:return li(l),ub(),s!==null&&re(Hl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ma(Cn),null;case 25:return null;default:return null}}function uT(s,l){switch(W0(l),l.tag){case 3:ma(Cn),ae();break;case 26:case 27:case 5:Q(l);break;case 4:ae();break;case 31:l.memoizedState!==null&&li(l);break;case 13:li(l);break;case 19:re(xn);break;case 10:ma(l.type);break;case 22:case 23:li(l),ub(),s!==null&&re(Hl);break;case 24:ma(Cn)}}function _h(s,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&s)===s){m=void 0;var w=d.create,C=d.inst;m=w(),C.destroy=m}d=d.next}while(d!==b)}}catch(U){It(l,l.return,U)}}function To(s,l,d){try{var m=l.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&s)===s){var C=m.inst,U=C.destroy;if(U!==void 0){C.destroy=void 0,b=l;var K=d,le=U;try{le()}catch(xe){It(b,K,xe)}}}m=m.next}while(m!==w)}}catch(xe){It(l,l.return,xe)}}function dT(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{tA(l,d)}catch(m){It(s,s.return,m)}}}function hT(s,l,d){d.props=Yl(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(m){It(s,l,m)}}function jh(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof d=="function"?s.refCleanup=d(m):d.current=m}}catch(b){It(s,l,b)}}function Rs(s,l){var d=s.ref,m=s.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(b){It(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){It(s,l,b)}else d.current=null}function fT(s){var l=s.type,d=s.memoizedProps,m=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(b){It(s,s.return,b)}}function Bb(s,l,d){try{var m=s.stateNode;BU(m,s.type,d,l),m[Kn]=l}catch(b){It(s,s.return,b)}}function mT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Do(s.type)||s.tag===4}function $b(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||mT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Do(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fb(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Qi));else if(m!==4&&(m===27&&Do(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for(Fb(s,l,d),s=s.sibling;s!==null;)Fb(s,l,d),s=s.sibling}function Ep(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(m!==4&&(m===27&&Do(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Ep(s,l,d),s=s.sibling;s!==null;)Ep(s,l,d),s=s.sibling}function pT(s){var l=s.stateNode,d=s.memoizedProps;try{for(var m=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);cr(l,m,d),l[Sn]=s,l[Kn]=d}catch(w){It(s,s.return,w)}}var ba=!1,On=!1,Hb=!1,gT=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function _U(s,l){if(s=s.containerInfo,hx=Gp,s=TS(s),L0(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var C=0,U=-1,K=-1,le=0,xe=0,Ne=s,ue=null;t:for(;;){for(var ge;Ne!==d||b!==0&&Ne.nodeType!==3||(U=C+b),Ne!==w||m!==0&&Ne.nodeType!==3||(K=C+m),Ne.nodeType===3&&(C+=Ne.nodeValue.length),(ge=Ne.firstChild)!==null;)ue=Ne,Ne=ge;for(;;){if(Ne===s)break t;if(ue===d&&++le===b&&(U=C),ue===w&&++xe===m&&(K=C),(ge=Ne.nextSibling)!==null)break;Ne=ue,ue=Ne.parentNode}Ne=ge}d=U===-1||K===-1?null:{start:U,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(fx={focusedElem:s,selectionRange:d},Gp=!1,Wn=l;Wn!==null;)if(l=Wn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Wn=s;else for(;Wn!==null;){switch(l=Wn,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)b=s[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,d=l,b=w.memoizedProps,w=w.memoizedState,m=d.stateNode;try{var Re=Yl(d.type,b);s=m.getSnapshotBeforeUpdate(Re,w),m.__reactInternalSnapshotBeforeUpdate=s}catch(Fe){It(d,d.return,Fe)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)gx(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":gx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Wn=s;break}Wn=l.return}}function vT(s,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:_a(s,d),m&4&&_h(5,d);break;case 1:if(_a(s,d),m&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(C){It(d,d.return,C)}else{var b=Yl(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(C){It(d,d.return,C)}}m&64&&dT(d),m&512&&jh(d,d.return);break;case 3:if(_a(s,d),m&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{tA(s,l)}catch(C){It(d,d.return,C)}}break;case 27:l===null&&m&4&&pT(d);case 26:case 5:_a(s,d),l===null&&m&4&&fT(d),m&512&&jh(d,d.return);break;case 12:_a(s,d);break;case 31:_a(s,d),m&4&&xT(s,d);break;case 13:_a(s,d),m&4&&_T(s,d),m&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=IU.bind(null,d),YU(s,d))));break;case 22:if(m=d.memoizedState!==null||ba,!m){l=l!==null&&l.memoizedState!==null||On,b=ba;var w=On;ba=m,(On=l)&&!w?ja(s,d,(d.subtreeFlags&8772)!==0):_a(s,d),ba=b,On=w}break;case 30:break;default:_a(s,d)}}function yT(s){var l=s.alternate;l!==null&&(s.alternate=null,yT(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Yc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Jt=null,Fr=!1;function xa(s,l,d){for(d=d.child;d!==null;)bT(s,l,d),d=d.sibling}function bT(s,l,d){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(ln,d)}catch{}switch(d.tag){case 26:On||Rs(d,l),xa(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:On||Rs(d,l);var m=Jt,b=Fr;Do(d.type)&&(Jt=d.stateNode,Fr=!1),xa(s,l,d),Ph(d.stateNode),Jt=m,Fr=b;break;case 5:On||Rs(d,l);case 6:if(m=Jt,b=Fr,Jt=null,xa(s,l,d),Jt=m,Fr=b,Jt!==null)if(Fr)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(d.stateNode)}catch(w){It(d,l,w)}else try{Jt.removeChild(d.stateNode)}catch(w){It(d,l,w)}break;case 18:Jt!==null&&(Fr?(s=Jt,dC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),ku(s)):dC(Jt,d.stateNode));break;case 4:m=Jt,b=Fr,Jt=d.stateNode.containerInfo,Fr=!0,xa(s,l,d),Jt=m,Fr=b;break;case 0:case 11:case 14:case 15:To(2,d,l),On||To(4,d,l),xa(s,l,d);break;case 1:On||(Rs(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&hT(d,l,m)),xa(s,l,d);break;case 21:xa(s,l,d);break;case 22:On=(m=On)||d.memoizedState!==null,xa(s,l,d),On=m;break;default:xa(s,l,d)}}function xT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ku(s)}catch(d){It(l,l.return,d)}}}function _T(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ku(s)}catch(d){It(l,l.return,d)}}function jU(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new gT),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new gT),l;default:throw Error(r(435,s.tag))}}function Sp(s,l){var d=jU(s);l.forEach(function(m){if(!d.has(m)){d.add(m);var b=PU.bind(null,s,m);m.then(b,b)}})}function Hr(s,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m],w=s,C=l,U=C;e:for(;U!==null;){switch(U.tag){case 27:if(Do(U.type)){Jt=U.stateNode,Fr=!1;break e}break;case 5:Jt=U.stateNode,Fr=!1;break e;case 3:case 4:Jt=U.stateNode.containerInfo,Fr=!0;break e}U=U.return}if(Jt===null)throw Error(r(160));bT(w,C,b),Jt=null,Fr=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)jT(l,s),l=l.sibling}var es=null;function jT(s,l){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Hr(l,s),Gr(s),m&4&&(To(3,s,s.return),_h(3,s),To(5,s,s.return));break;case 1:Hr(l,s),Gr(s),m&512&&(On||d===null||Rs(d,d.return)),m&64&&ba&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var b=es;if(Hr(l,s),Gr(s),m&512&&(On||d===null||Rs(d,d.return)),m&4){var w=d!==null?d.memoizedState:null;if(m=s.memoizedState,d===null)if(m===null)if(s.stateNode===null){e:{m=s.type,d=s.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[bs]||w[Sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),cr(w,m,d),w[Sn]=s,An(w),m=w;break e;case"link":var C=jC("link","href",b).get(m+(d.href||""));if(C){for(var U=0;U<C.length;U++)if(w=C[U],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){C.splice(U,1);break t}}w=b.createElement(m),cr(w,m,d),b.head.appendChild(w);break;case"meta":if(C=jC("meta","content",b).get(m+(d.content||""))){for(U=0;U<C.length;U++)if(w=C[U],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){C.splice(U,1);break t}}w=b.createElement(m),cr(w,m,d),b.head.appendChild(w);break;default:throw Error(r(468,m))}w[Sn]=s,An(w),m=w}s.stateNode=m}else wC(b,s.type,s.stateNode);else s.stateNode=_C(b,m,s.memoizedProps);else w!==m?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,m===null?wC(b,s.type,s.stateNode):_C(b,m,s.memoizedProps)):m===null&&s.stateNode!==null&&Bb(s,s.memoizedProps,d.memoizedProps)}break;case 27:Hr(l,s),Gr(s),m&512&&(On||d===null||Rs(d,d.return)),d!==null&&m&4&&Bb(s,s.memoizedProps,d.memoizedProps);break;case 5:if(Hr(l,s),Gr(s),m&512&&(On||d===null||Rs(d,d.return)),s.flags&32){b=s.stateNode;try{$r(b,"")}catch(Re){It(s,s.return,Re)}}m&4&&s.stateNode!=null&&(b=s.memoizedProps,Bb(s,b,d!==null?d.memoizedProps:b)),m&1024&&(Hb=!0);break;case 6:if(Hr(l,s),Gr(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,d=s.stateNode;try{d.nodeValue=m}catch(Re){It(s,s.return,Re)}}break;case 3:if(Bp=null,b=es,es=Up(l.containerInfo),Hr(l,s),es=b,Gr(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ku(l.containerInfo)}catch(Re){It(s,s.return,Re)}Hb&&(Hb=!1,wT(s));break;case 4:m=es,es=Up(s.stateNode.containerInfo),Hr(l,s),Gr(s),es=m;break;case 12:Hr(l,s),Gr(s);break;case 31:Hr(l,s),Gr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Sp(s,m)));break;case 13:Hr(l,s),Gr(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Tp=Be()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Sp(s,m)));break;case 22:b=s.memoizedState!==null;var K=d!==null&&d.memoizedState!==null,le=ba,xe=On;if(ba=le||b,On=xe||K,Hr(l,s),On=xe,ba=le,Gr(s),m&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||K||ba||On||Xl(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){K=d=l;try{if(w=K.stateNode,b)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{U=K.stateNode;var Ne=K.memoizedProps.style,ue=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;U.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Re){It(K,K.return,Re)}}}else if(l.tag===6){if(d===null){K=l;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(Re){It(K,K.return,Re)}}}else if(l.tag===18){if(d===null){K=l;try{var ge=K.stateNode;b?hC(ge,!0):hC(K.stateNode,!1)}catch(Re){It(K,K.return,Re)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=s.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Sp(s,d))));break;case 19:Hr(l,s),Gr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Sp(s,m)));break;case 30:break;case 21:break;default:Hr(l,s),Gr(s)}}function Gr(s){var l=s.flags;if(l&2){try{for(var d,m=s.return;m!==null;){if(mT(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,w=$b(s);Ep(s,w,b);break;case 5:var C=d.stateNode;d.flags&32&&($r(C,""),d.flags&=-33);var U=$b(s);Ep(s,U,C);break;case 3:case 4:var K=d.stateNode.containerInfo,le=$b(s);Fb(s,le,K);break;default:throw Error(r(161))}}catch(xe){It(s,s.return,xe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function wT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;wT(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function _a(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)vT(s,l.alternate,l),l=l.sibling}function Xl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:To(4,l,l.return),Xl(l);break;case 1:Rs(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&hT(l,l.return,d),Xl(l);break;case 27:Ph(l.stateNode);case 26:case 5:Rs(l,l.return),Xl(l);break;case 22:l.memoizedState===null&&Xl(l);break;case 30:Xl(l);break;default:Xl(l)}s=s.sibling}}function ja(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,b=s,w=l,C=w.flags;switch(w.tag){case 0:case 11:case 15:ja(b,w,d),_h(4,w);break;case 1:if(ja(b,w,d),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(le){It(m,m.return,le)}if(m=w,b=m.updateQueue,b!==null){var U=m.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)eA(K[b],U)}catch(le){It(m,m.return,le)}}d&&C&64&&dT(w),jh(w,w.return);break;case 27:pT(w);case 26:case 5:ja(b,w,d),d&&m===null&&C&4&&fT(w),jh(w,w.return);break;case 12:ja(b,w,d);break;case 31:ja(b,w,d),d&&C&4&&xT(b,w);break;case 13:ja(b,w,d),d&&C&4&&_T(b,w);break;case 22:w.memoizedState===null&&ja(b,w,d),jh(w,w.return);break;case 30:break;default:ja(b,w,d)}l=l.sibling}}function Gb(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&lh(d))}function Kb(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&lh(s))}function ts(s,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)NT(s,l,d,m),l=l.sibling}function NT(s,l,d,m){var b=l.flags;switch(l.tag){case 0:case 11:case 15:ts(s,l,d,m),b&2048&&_h(9,l);break;case 1:ts(s,l,d,m);break;case 3:ts(s,l,d,m),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&lh(s)));break;case 12:if(b&2048){ts(s,l,d,m),s=l.stateNode;try{var w=l.memoizedProps,C=w.id,U=w.onPostCommit;typeof U=="function"&&U(C,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){It(l,l.return,K)}}else ts(s,l,d,m);break;case 31:ts(s,l,d,m);break;case 13:ts(s,l,d,m);break;case 23:break;case 22:w=l.stateNode,C=l.alternate,l.memoizedState!==null?w._visibility&2?ts(s,l,d,m):wh(s,l):w._visibility&2?ts(s,l,d,m):(w._visibility|=2,wu(s,l,d,m,(l.subtreeFlags&10256)!==0||!1)),b&2048&&Gb(C,l);break;case 24:ts(s,l,d,m),b&2048&&Kb(l.alternate,l);break;default:ts(s,l,d,m)}}function wu(s,l,d,m,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,C=l,U=d,K=m,le=C.flags;switch(C.tag){case 0:case 11:case 15:wu(w,C,U,K,b),_h(8,C);break;case 23:break;case 22:var xe=C.stateNode;C.memoizedState!==null?xe._visibility&2?wu(w,C,U,K,b):wh(w,C):(xe._visibility|=2,wu(w,C,U,K,b)),b&&le&2048&&Gb(C.alternate,C);break;case 24:wu(w,C,U,K,b),b&&le&2048&&Kb(C.alternate,C);break;default:wu(w,C,U,K,b)}l=l.sibling}}function wh(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,m=l,b=m.flags;switch(m.tag){case 22:wh(d,m),b&2048&&Gb(m.alternate,m);break;case 24:wh(d,m),b&2048&&Kb(m.alternate,m);break;default:wh(d,m)}l=l.sibling}}var Nh=8192;function Nu(s,l,d){if(s.subtreeFlags&Nh)for(s=s.child;s!==null;)ET(s,l,d),s=s.sibling}function ET(s,l,d){switch(s.tag){case 26:Nu(s,l,d),s.flags&Nh&&s.memoizedState!==null&&lV(d,es,s.memoizedState,s.memoizedProps);break;case 5:Nu(s,l,d);break;case 3:case 4:var m=es;es=Up(s.stateNode.containerInfo),Nu(s,l,d),es=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=Nh,Nh=16777216,Nu(s,l,d),Nh=m):Nu(s,l,d));break;default:Nu(s,l,d)}}function ST(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Eh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Wn=m,TT(m,s)}ST(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)AT(s),s=s.sibling}function AT(s){switch(s.tag){case 0:case 11:case 15:Eh(s),s.flags&2048&&To(9,s,s.return);break;case 3:Eh(s);break;case 12:Eh(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Ap(s)):Eh(s);break;default:Eh(s)}}function Ap(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Wn=m,TT(m,s)}ST(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:To(8,l,l.return),Ap(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Ap(l));break;default:Ap(l)}s=s.sibling}}function TT(s,l){for(;Wn!==null;){var d=Wn;switch(d.tag){case 0:case 11:case 15:To(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:lh(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Wn=m;else e:for(d=s;Wn!==null;){m=Wn;var b=m.sibling,w=m.return;if(yT(m),m===d){Wn=null;break e}if(b!==null){b.return=w,Wn=b;break e}Wn=w}}}var wU={getCacheForType:function(s){var l=or(Cn),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d},cacheSignal:function(){return or(Cn).controller.signal}},NU=typeof WeakMap=="function"?WeakMap:Map,Et=0,Bt=null,ct=null,dt=0,Ct=0,ci=null,Co=!1,Eu=!1,Qb=!1,wa=0,dn=0,Io=0,Jl=0,Wb=0,ui=0,Su=0,Sh=null,Kr=null,Yb=!1,Tp=0,CT=0,Cp=1/0,Ip=null,Po=null,Vn=0,Oo=null,Au=null,Na=0,Xb=0,Jb=null,IT=null,Ah=0,Zb=null;function di(){return(Et&2)!==0&&dt!==0?dt&-dt:H.T!==null?sx():Pm()}function PT(){if(ui===0)if((dt&536870912)===0||gt){var s=aa;aa<<=1,(aa&3932160)===0&&(aa=262144),ui=s}else ui=536870912;return s=oi.current,s!==null&&(s.flags|=32),ui}function Qr(s,l,d){(s===Bt&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)&&(Tu(s,0),Ro(s,dt,ui,!1)),Gn(s,d),((Et&2)===0||s!==Bt)&&(s===Bt&&((Et&2)===0&&(Jl|=d),dn===4&&Ro(s,dt,ui,!1)),ks(s))}function OT(s,l,d){if((Et&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&s.expiredLanes)===0||ni(s,l),b=m?AU(s,l):tx(s,l,!0),w=m;do{if(b===0){Eu&&!m&&Ro(s,l,0,!1);break}else{if(d=s.current.alternate,w&&!EU(d)){b=tx(s,l,!1),w=!1;continue}if(b===2){if(w=l,s.errorRecoveryDisabledLanes&w)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var U=s;b=Sh;var K=U.current.memoizedState.isDehydrated;if(K&&(Tu(U,C).flags|=256),C=tx(U,C,!1),C!==2){if(Qb&&!K){U.errorRecoveryDisabledLanes|=w,Jl|=w,b=4;break e}w=Kr,Kr=b,w!==null&&(Kr===null?Kr=w:Kr.push.apply(Kr,w))}b=C}if(w=!1,b!==2)continue}}if(b===1){Tu(s,0),Ro(s,l,0,!0);break}e:{switch(m=s,w=b,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Ro(m,l,ui,!Co);break e;case 2:Kr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=Tp+300-Be(),10<b)){if(Ro(m,l,ui,!Co),gr(m,0,!0)!==0)break e;Na=l,m.timeoutHandle=cC(RT.bind(null,m,d,Kr,Ip,Yb,l,ui,Jl,Su,Co,w,"Throttled",-0,0),b);break e}RT(m,d,Kr,Ip,Yb,l,ui,Jl,Su,Co,w,null,-0,0)}}break}while(!0);ks(s)}function RT(s,l,d,m,b,w,C,U,K,le,xe,Ne,ue,ge){if(s.timeoutHandle=-1,Ne=l.subtreeFlags,Ne&8192||(Ne&16785408)===16785408){Ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},ET(l,w,Ne);var Re=(w&62914560)===w?Tp-Be():(w&4194048)===w?CT-Be():0;if(Re=cV(Ne,Re),Re!==null){Na=w,s.cancelPendingCommit=Re(VT.bind(null,s,l,w,d,m,b,C,U,K,xe,Ne,null,ue,ge)),Ro(s,w,C,!le);return}}VT(s,l,w,d,m,b,C,U,K)}function EU(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var b=d[m],w=b.getSnapshot;b=b.value;try{if(!si(w(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ro(s,l,d,m){l&=~Wb,l&=~Jl,s.suspendedLanes|=l,s.pingedLanes&=~l,m&&(s.warmLanes|=l),m=s.expirationTimes;for(var b=l;0<b;){var w=31-nn(b),C=1<<w;m[w]=-1,b&=~C}d!==0&&ji(s,d,l)}function Pp(){return(Et&6)===0?(Th(0),!1):!0}function ex(){if(ct!==null){if(Ct===0)var s=ct.return;else s=ct,fa=$l=null,gb(s),yu=null,uh=0,s=ct;for(;s!==null;)uT(s.alternate,s),s=s.return;ct=null}}function Tu(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,HU(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),Na=0,ex(),Bt=s,ct=d=da(s.current,null),dt=l,Ct=0,ci=null,Co=!1,Eu=ni(s,l),Qb=!1,Su=ui=Wb=Jl=Io=dn=0,Kr=Sh=null,Yb=!1,(l&8)!==0&&(l|=l&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=l;0<m;){var b=31-nn(m),w=1<<b;l|=s[b],m&=~w}return wa=l,Jm(),d}function kT(s,l){it=null,H.H=yh,l===vu||l===ap?(l=YS(),Ct=3):l===ib?(l=YS(),Ct=4):Ct=l===Ob?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ci=l,ct===null&&(dn=1,xp(s,Ti(l,s.current)))}function DT(){var s=oi.current;return s===null?!0:(dt&4194048)===dt?Oi===null:(dt&62914560)===dt||(dt&536870912)!==0?s===Oi:!1}function MT(){var s=H.H;return H.H=yh,s===null?yh:s}function zT(){var s=H.A;return H.A=wU,s}function Op(){dn=4,Co||(dt&4194048)!==dt&&oi.current!==null||(Eu=!0),(Io&134217727)===0&&(Jl&134217727)===0||Bt===null||Ro(Bt,dt,ui,!1)}function tx(s,l,d){var m=Et;Et|=2;var b=MT(),w=zT();(Bt!==s||dt!==l)&&(Ip=null,Tu(s,l)),l=!1;var C=dn;e:do try{if(Ct!==0&&ct!==null){var U=ct,K=ci;switch(Ct){case 8:ex(),C=6;break e;case 3:case 2:case 9:case 6:oi.current===null&&(l=!0);var le=Ct;if(Ct=0,ci=null,Cu(s,U,K,le),d&&Eu){C=0;break e}break;default:le=Ct,Ct=0,ci=null,Cu(s,U,K,le)}}SU(),C=dn;break}catch(xe){kT(s,xe)}while(!0);return l&&s.shellSuspendCounter++,fa=$l=null,Et=m,H.H=b,H.A=w,ct===null&&(Bt=null,dt=0,Jm()),C}function SU(){for(;ct!==null;)LT(ct)}function AU(s,l){var d=Et;Et|=2;var m=MT(),b=zT();Bt!==s||dt!==l?(Ip=null,Cp=Be()+500,Tu(s,l)):Eu=ni(s,l);e:do try{if(Ct!==0&&ct!==null){l=ct;var w=ci;t:switch(Ct){case 1:Ct=0,ci=null,Cu(s,l,w,1);break;case 2:case 9:if(QS(w)){Ct=0,ci=null,qT(l);break}l=function(){Ct!==2&&Ct!==9||Bt!==s||(Ct=7),ks(s)},w.then(l,l);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:QS(w)?(Ct=0,ci=null,qT(l)):(Ct=0,ci=null,Cu(s,l,w,7));break;case 5:var C=null;switch(ct.tag){case 26:C=ct.memoizedState;case 5:case 27:var U=ct;if(C?NC(C):U.stateNode.complete){Ct=0,ci=null;var K=U.sibling;if(K!==null)ct=K;else{var le=U.return;le!==null?(ct=le,Rp(le)):ct=null}break t}}Ct=0,ci=null,Cu(s,l,w,5);break;case 6:Ct=0,ci=null,Cu(s,l,w,6);break;case 8:ex(),dn=6;break e;default:throw Error(r(462))}}TU();break}catch(xe){kT(s,xe)}while(!0);return fa=$l=null,H.H=m,H.A=b,Et=d,ct!==null?0:(Bt=null,dt=0,Jm(),dn)}function TU(){for(;ct!==null&&!be();)LT(ct)}function LT(s){var l=lT(s.alternate,s,wa);s.memoizedProps=s.pendingProps,l===null?Rp(s):ct=l}function qT(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=nT(d,l,l.pendingProps,l.type,void 0,dt);break;case 11:l=nT(d,l,l.pendingProps,l.type.render,l.ref,dt);break;case 5:gb(l);default:uT(d,l),l=ct=zS(l,wa),l=lT(d,l,wa)}s.memoizedProps=s.pendingProps,l===null?Rp(s):ct=l}function Cu(s,l,d,m){fa=$l=null,gb(l),yu=null,uh=0;var b=l.return;try{if(gU(s,b,l,d,dt)){dn=1,xp(s,Ti(d,s.current)),ct=null;return}}catch(w){if(b!==null)throw ct=b,w;dn=1,xp(s,Ti(d,s.current)),ct=null;return}l.flags&32768?(gt||m===1?s=!0:Eu||(dt&536870912)!==0?s=!1:(Co=s=!0,(m===2||m===9||m===3||m===6)&&(m=oi.current,m!==null&&m.tag===13&&(m.flags|=16384))),UT(l,s)):Rp(l)}function Rp(s){var l=s;do{if((l.flags&32768)!==0){UT(l,Co);return}s=l.return;var d=bU(l.alternate,l,wa);if(d!==null){ct=d;return}if(l=l.sibling,l!==null){ct=l;return}ct=l=s}while(l!==null);dn===0&&(dn=5)}function UT(s,l){do{var d=xU(s.alternate,s);if(d!==null){d.flags&=32767,ct=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){ct=s;return}ct=s=d}while(s!==null);dn=6,ct=null}function VT(s,l,d,m,b,w,C,U,K){s.cancelPendingCommit=null;do kp();while(Vn!==0);if((Et&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=$0,Al(s,d,w,C,U,K),s===Bt&&(ct=Bt=null,dt=0),Au=l,Oo=s,Na=d,Xb=w,Jb=b,IT=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,OU(qr,function(){return GT(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=H.T,H.T=null,b=se.p,se.p=2,C=Et,Et|=4;try{_U(s,l,d)}finally{Et=C,se.p=b,H.T=m}}Vn=1,BT(),$T(),FT()}}function BT(){if(Vn===1){Vn=0;var s=Oo,l=Au,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=H.T,H.T=null;var m=se.p;se.p=2;var b=Et;Et|=4;try{jT(l,s);var w=fx,C=TS(s.containerInfo),U=w.focusedElem,K=w.selectionRange;if(C!==U&&U&&U.ownerDocument&&AS(U.ownerDocument.documentElement,U)){if(K!==null&&L0(U)){var le=K.start,xe=K.end;if(xe===void 0&&(xe=le),"selectionStart"in U)U.selectionStart=le,U.selectionEnd=Math.min(xe,U.value.length);else{var Ne=U.ownerDocument||document,ue=Ne&&Ne.defaultView||window;if(ue.getSelection){var ge=ue.getSelection(),Re=U.textContent.length,Fe=Math.min(K.start,Re),Lt=K.end===void 0?Fe:Math.min(K.end,Re);!ge.extend&&Fe>Lt&&(C=Lt,Lt=Fe,Fe=C);var te=SS(U,Fe),Y=SS(U,Lt);if(te&&Y&&(ge.rangeCount!==1||ge.anchorNode!==te.node||ge.anchorOffset!==te.offset||ge.focusNode!==Y.node||ge.focusOffset!==Y.offset)){var oe=Ne.createRange();oe.setStart(te.node,te.offset),ge.removeAllRanges(),Fe>Lt?(ge.addRange(oe),ge.extend(Y.node,Y.offset)):(oe.setEnd(Y.node,Y.offset),ge.addRange(oe))}}}}for(Ne=[],ge=U;ge=ge.parentNode;)ge.nodeType===1&&Ne.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ne.length;U++){var je=Ne[U];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}Gp=!!hx,fx=hx=null}finally{Et=b,se.p=m,H.T=d}}s.current=l,Vn=2}}function $T(){if(Vn===2){Vn=0;var s=Oo,l=Au,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=H.T,H.T=null;var m=se.p;se.p=2;var b=Et;Et|=4;try{vT(s,l.alternate,l)}finally{Et=b,se.p=m,H.T=d}}Vn=3}}function FT(){if(Vn===4||Vn===3){Vn=0,De();var s=Oo,l=Au,d=Na,m=IT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Vn=5:(Vn=0,Au=Oo=null,HT(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(Po=null),oa(d),l=l.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(ln,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=H.T,b=se.p,se.p=2,H.T=null;try{for(var w=s.onRecoverableError,C=0;C<m.length;C++){var U=m[C];w(U.value,{componentStack:U.stack})}}finally{H.T=l,se.p=b}}(Na&3)!==0&&kp(),ks(s),b=s.pendingLanes,(d&261930)!==0&&(b&42)!==0?s===Zb?Ah++:(Ah=0,Zb=s):Ah=0,Th(0)}}function HT(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,lh(l)))}function kp(){return BT(),$T(),FT(),GT()}function GT(){if(Vn!==5)return!1;var s=Oo,l=Xb;Xb=0;var d=oa(Na),m=H.T,b=se.p;try{se.p=32>d?32:d,H.T=null,d=Jb,Jb=null;var w=Oo,C=Na;if(Vn=0,Au=Oo=null,Na=0,(Et&6)!==0)throw Error(r(331));var U=Et;if(Et|=4,AT(w.current),NT(w,w.current,C,d),Et=U,Th(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(ln,w)}catch{}return!0}finally{se.p=b,H.T=m,HT(s,l)}}function KT(s,l,d){l=Ti(d,l),l=Pb(s.stateNode,l,2),s=Eo(s,l,2),s!==null&&(Gn(s,2),ks(s))}function It(s,l,d){if(s.tag===3)KT(s,s,d);else for(;l!==null;){if(l.tag===3){KT(l,s,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Po===null||!Po.has(m))){s=Ti(d,s),d=QA(2),m=Eo(l,d,2),m!==null&&(WA(d,m,l,s),Gn(m,2),ks(m));break}}l=l.return}}function nx(s,l,d){var m=s.pingCache;if(m===null){m=s.pingCache=new NU;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(d)||(Qb=!0,b.add(d),s=CU.bind(null,s,l,d),l.then(s,s))}function CU(s,l,d){var m=s.pingCache;m!==null&&m.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Bt===s&&(dt&d)===d&&(dn===4||dn===3&&(dt&62914560)===dt&&300>Be()-Tp?(Et&2)===0&&Tu(s,0):Wb|=d,Su===dt&&(Su=0)),ks(s)}function QT(s,l){l===0&&(l=Ve()),s=Ul(s,l),s!==null&&(Gn(s,l),ks(s))}function IU(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),QT(s,d)}function PU(s,l){var d=0;switch(s.tag){case 31:case 13:var m=s.stateNode,b=s.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),QT(s,d)}function OU(s,l){return kt(s,l)}var Dp=null,Iu=null,rx=!1,Mp=!1,ix=!1,ko=0;function ks(s){s!==Iu&&s.next===null&&(Iu===null?Dp=Iu=s:Iu=Iu.next=s),Mp=!0,rx||(rx=!0,kU())}function Th(s,l){if(!ix&&Mp){ix=!0;do for(var d=!1,m=Dp;m!==null;){if(s!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var C=m.suspendedLanes,U=m.pingedLanes;w=(1<<31-nn(42|s)+1)-1,w&=b&~(C&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,JT(m,w))}else w=dt,w=gr(m,m===Bt?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||ni(m,w)||(d=!0,JT(m,w));m=m.next}while(d);ix=!1}}function RU(){WT()}function WT(){Mp=rx=!1;var s=0;ko!==0&&FU()&&(s=ko);for(var l=Be(),d=null,m=Dp;m!==null;){var b=m.next,w=YT(m,l);w===0?(m.next=null,d===null?Dp=b:d.next=b,b===null&&(Iu=d)):(d=m,(s!==0||(w&3)!==0)&&(Mp=!0)),m=b}Vn!==0&&Vn!==5||Th(s),ko!==0&&(ko=0)}function YT(s,l){for(var d=s.suspendedLanes,m=s.pingedLanes,b=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var C=31-nn(w),U=1<<C,K=b[C];K===-1?((U&d)===0||(U&m)!==0)&&(b[C]=ne(U,l)):K<=l&&(s.expiredLanes|=U),w&=~U}if(l=Bt,d=dt,d=gr(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,d===0||s===l&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Lr(m),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||ni(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(m!==null&&Lr(m),oa(d)){case 2:case 8:d=Un;break;case 32:d=qr;break;case 268435456:d=Ur;break;default:d=qr}return m=XT.bind(null,s),d=kt(d,m),s.callbackPriority=l,s.callbackNode=d,l}return m!==null&&m!==null&&Lr(m),s.callbackPriority=2,s.callbackNode=null,2}function XT(s,l){if(Vn!==0&&Vn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(kp()&&s.callbackNode!==d)return null;var m=dt;return m=gr(s,s===Bt?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(OT(s,m,l),YT(s,Be()),s.callbackNode!=null&&s.callbackNode===d?XT.bind(null,s):null)}function JT(s,l){if(kp())return null;OT(s,l,!0)}function kU(){GU(function(){(Et&6)!==0?kt(Vt,RU):WT()})}function sx(){if(ko===0){var s=pu;s===0&&(s=xi,xi<<=1,(xi&261888)===0&&(xi=256)),ko=s}return ko}function ZT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:eu(""+s)}function eC(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function DU(s,l,d,m,b){if(l==="submit"&&d&&d.stateNode===b){var w=ZT((b[Kn]||null).action),C=m.submitter;C&&(l=(l=C[Kn]||null)?ZT(l.formAction):C.getAttribute("formAction"),l!==null&&(w=l,C=null));var U=new As("action","action",null,m,b);s.push({event:U,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ko!==0){var K=C?eC(b,C):new FormData(b);Eb(d,{pending:!0,data:K,method:b.method,action:w},null,K)}}else typeof w=="function"&&(U.preventDefault(),K=C?eC(b,C):new FormData(b),Eb(d,{pending:!0,data:K,method:b.method,action:w},w,K))},currentTarget:b}]})}}for(var ax=0;ax<B0.length;ax++){var ox=B0[ax],MU=ox.toLowerCase(),zU=ox[0].toUpperCase()+ox.slice(1);Zi(MU,"on"+zU)}Zi(PS,"onAnimationEnd"),Zi(OS,"onAnimationIteration"),Zi(RS,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(Z9,"onTransitionRun"),Zi(eU,"onTransitionStart"),Zi(tU,"onTransitionCancel"),Zi(kS,"onTransitionEnd"),ws("onMouseEnter",["mouseout","mouseover"]),ws("onMouseLeave",["mouseout","mouseover"]),ws("onPointerEnter",["pointerout","pointerover"]),ws("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ch));function tC(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],b=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var C=m.length-1;0<=C;C--){var U=m[C],K=U.instance,le=U.currentTarget;if(U=U.listener,K!==w&&b.isPropagationStopped())break e;w=U,b.currentTarget=le;try{w(b)}catch(xe){Xm(xe)}b.currentTarget=null,w=K}else for(C=0;C<m.length;C++){if(U=m[C],K=U.instance,le=U.currentTarget,U=U.listener,K!==w&&b.isPropagationStopped())break e;w=U,b.currentTarget=le;try{w(b)}catch(xe){Xm(xe)}b.currentTarget=null,w=K}}}}function ut(s,l){var d=l[Wc];d===void 0&&(d=l[Wc]=new Set);var m=s+"__bubble";d.has(m)||(nC(l,s,2,!1),d.add(m))}function lx(s,l,d){var m=0;l&&(m|=4),nC(d,s,m,l)}var zp="_reactListening"+Math.random().toString(36).slice(2);function cx(s){if(!s[zp]){s[zp]=!0,Vd.forEach(function(d){d!=="selectionchange"&&(LU.has(d)||lx(d,!1,s),lx(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[zp]||(l[zp]=!0,lx("selectionchange",!1,l))}}function nC(s,l,d,m){switch(PC(l)){case 2:var b=hV;break;case 8:b=fV;break;default:b=Nx}d=b.bind(null,l,d,s),b=void 0,!Ol||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?s.addEventListener(l,d,{capture:!0,passive:b}):s.addEventListener(l,d,!0):b!==void 0?s.addEventListener(l,d,{passive:b}):s.addEventListener(l,d,!1)}function ux(s,l,d,m,b){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var U=m.stateNode.containerInfo;if(U===b)break;if(C===4)for(C=m.return;C!==null;){var K=C.tag;if((K===3||K===4)&&C.stateNode.containerInfo===b)return;C=C.return}for(;U!==null;){if(C=xs(U),C===null)return;if(K=C.tag,K===5||K===6||K===26||K===27){m=w=C;continue e}U=U.parentNode}}m=m.return}po(function(){var le=w,xe=Ni(d),Ne=[];e:{var ue=DS.get(s);if(ue!==void 0){var ge=As,Re=s;switch(s){case"keypress":if(kl(d)===0)break e;case"keydown":case"keyup":ge=Qm;break;case"focusin":Re="focus",ge=Ml;break;case"focusout":Re="blur",ge=Ml;break;case"beforeblur":case"afterblur":ge=Ml;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=qm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=S;break;case PS:case OS:case RS:ge=Vm;break;case kS:ge=$;break;case"scroll":case"scrollend":ge=Zd;break;case"wheel":ge=pe;break;case"copy":case"cut":case"paste":ge=Bm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=ua;break;case"toggle":case"beforetoggle":ge=rt}var Fe=(l&4)!==0,Lt=!Fe&&(s==="scroll"||s==="scrollend"),te=Fe?ue!==null?ue+"Capture":null:ue;Fe=[];for(var Y=le,oe;Y!==null;){var je=Y;if(oe=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||oe===null||te===null||(je=Wi(Y,te),je!=null&&Fe.push(Ih(Y,je,oe))),Lt)break;Y=Y.return}0<Fe.length&&(ue=new ge(ue,Re,null,d,xe),Ne.push({event:ue,listeners:Fe}))}}if((l&7)===0){e:{if(ue=s==="mouseover"||s==="pointerover",ge=s==="mouseout"||s==="pointerout",ue&&d!==Yd&&(Re=d.relatedTarget||d.fromElement)&&(xs(Re)||Re[ys]))break e;if((ge||ue)&&(ue=xe.window===xe?xe:(ue=xe.ownerDocument)?ue.defaultView||ue.parentWindow:window,ge?(Re=d.relatedTarget||d.toElement,ge=le,Re=Re?xs(Re):null,Re!==null&&(Lt=o(Re),Fe=Re.tag,Re!==Lt||Fe!==5&&Fe!==27&&Fe!==6)&&(Re=null)):(ge=null,Re=le),ge!==Re)){if(Fe=eh,je="onMouseLeave",te="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Fe=ua,je="onPointerLeave",te="onPointerEnter",Y="pointer"),Lt=ge==null?ue:ri(ge),oe=Re==null?ue:ri(Re),ue=new Fe(je,Y+"leave",ge,d,xe),ue.target=Lt,ue.relatedTarget=oe,je=null,xs(xe)===le&&(Fe=new Fe(te,Y+"enter",Re,d,xe),Fe.target=oe,Fe.relatedTarget=Lt,je=Fe),Lt=je,ge&&Re)t:{for(Fe=qU,te=ge,Y=Re,oe=0,je=te;je;je=Fe(je))oe++;je=0;for(var qe=Y;qe;qe=Fe(qe))je++;for(;0<oe-je;)te=Fe(te),oe--;for(;0<je-oe;)Y=Fe(Y),je--;for(;oe--;){if(te===Y||Y!==null&&te===Y.alternate){Fe=te;break t}te=Fe(te),Y=Fe(Y)}Fe=null}else Fe=null;ge!==null&&rC(Ne,ue,ge,Fe,!1),Re!==null&&Lt!==null&&rC(Ne,Lt,Re,Fe,!0)}}e:{if(ue=le?ri(le):window,ge=ue.nodeName&&ue.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ue.type==="file")var _t=xS;else if(yS(ue))if(_S)_t=Y9;else{_t=Q9;var Me=K9}else ge=ue.nodeName,!ge||ge.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?le&&Zc(le.elementType)&&(_t=xS):_t=W9;if(_t&&(_t=_t(s,le))){bS(Ne,_t,d,xe);break e}Me&&Me(s,ue,le),s==="focusout"&&le&&ue.type==="number"&&le.memoizedProps.value!=null&&Kd(ue,"number",ue.value)}switch(Me=le?ri(le):window,s){case"focusin":(yS(Me)||Me.contentEditable==="true")&&(ou=Me,q0=le,sh=null);break;case"focusout":sh=q0=ou=null;break;case"mousedown":U0=!0;break;case"contextmenu":case"mouseup":case"dragend":U0=!1,CS(Ne,d,xe);break;case"selectionchange":if(J9)break;case"keydown":case"keyup":CS(Ne,d,xe)}var st;if(Nt)e:{switch(s){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else au?zl(s,d)&&(ht="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(ht="onCompositionStart");ht&&(Is&&d.locale!=="ko"&&(au||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&au&&(st=Jd()):(Ss=xe,Xd="value"in Ss?Ss.value:Ss.textContent,au=!0)),Me=Lp(le,ht),0<Me.length&&(ht=new Cs(ht,s,null,d,xe),Ne.push({event:ht,listeners:Me}),st?ht.data=st:(st=su(d),st!==null&&(ht.data=st)))),(st=Si?$9(s,d):F9(s,d))&&(ht=Lp(le,"onBeforeInput"),0<ht.length&&(Me=new Cs("onBeforeInput","beforeinput",null,d,xe),Ne.push({event:Me,listeners:ht}),Me.data=st)),DU(Ne,s,le,d,xe)}tC(Ne,l)})}function Ih(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Lp(s,l){for(var d=l+"Capture",m=[];s!==null;){var b=s,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Wi(s,d),b!=null&&m.unshift(Ih(s,b,w)),b=Wi(s,l),b!=null&&m.push(Ih(s,b,w))),s.tag===3)return m;s=s.return}return[]}function qU(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function rC(s,l,d,m,b){for(var w=l._reactName,C=[];d!==null&&d!==m;){var U=d,K=U.alternate,le=U.stateNode;if(U=U.tag,K!==null&&K===m)break;U!==5&&U!==26&&U!==27||le===null||(K=le,b?(le=Wi(d,w),le!=null&&C.unshift(Ih(d,le,K))):b||(le=Wi(d,w),le!=null&&C.push(Ih(d,le,K)))),d=d.return}C.length!==0&&s.push({event:l,listeners:C})}var UU=/\r\n?/g,VU=/\u0000|\uFFFD/g;function iC(s){return(typeof s=="string"?s:""+s).replace(UU,`
`).replace(VU,"")}function sC(s,l){return l=iC(l),iC(s)===l}function zt(s,l,d,m,b,w){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||$r(s,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&$r(s,""+m);break;case"className":ii(s,"class",m);break;case"tabIndex":ii(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(s,d,m);break;case"style":Wd(s,m,w);break;case"data":if(l!=="object"){ii(s,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=eu(""+m),s.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&zt(s,l,"name",b.name,b,null),zt(s,l,"formEncType",b.formEncType,b,null),zt(s,l,"formMethod",b.formMethod,b,null),zt(s,l,"formTarget",b.formTarget,b,null)):(zt(s,l,"encType",b.encType,b,null),zt(s,l,"method",b.method,b,null),zt(s,l,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=eu(""+m),s.setAttribute(d,m);break;case"onClick":m!=null&&(s.onclick=Qi);break;case"onScroll":m!=null&&ut("scroll",s);break;case"onScrollEnd":m!=null&&ut("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}d=eu(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""+m):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":m===!0?s.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,m):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(d,m):s.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(d):s.setAttribute(d,m);break;case"popover":ut("beforetoggle",s),ut("toggle",s),Xc(s,"popover",m);break;case"xlinkActuate":Tn(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Tn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Tn(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Tn(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Tn(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Tn(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Xc(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Lm.get(d)||d,Xc(s,d,m))}}function dx(s,l,d,m,b,w){switch(d){case"style":Wd(s,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"children":typeof m=="string"?$r(s,m):(typeof m=="number"||typeof m=="bigint")&&$r(s,""+m);break;case"onScroll":m!=null&&ut("scroll",s);break;case"onScrollEnd":m!=null&&ut("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bd.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),w=s[Kn]||null,w=w!=null?w[d]:null,typeof w=="function"&&s.removeEventListener(l,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,m,b);break e}d in s?s[d]=m:m===!0?s.setAttribute(d,""):Xc(s,d,m)}}}function cr(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",s),ut("load",s);var m=!1,b=!1,w;for(w in d)if(d.hasOwnProperty(w)){var C=d[w];if(C!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,w,C,d,null)}}b&&zt(s,l,"srcSet",d.srcSet,d,null),m&&zt(s,l,"src",d.src,d,null);return;case"input":ut("invalid",s);var U=w=C=b=null,K=null,le=null;for(m in d)if(d.hasOwnProperty(m)){var xe=d[m];if(xe!=null)switch(m){case"name":b=xe;break;case"type":C=xe;break;case"checked":K=xe;break;case"defaultChecked":le=xe;break;case"value":w=xe;break;case"defaultValue":U=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,l));break;default:zt(s,l,m,xe,d,null)}}Dm(s,w,U,K,le,C,b,!1);return;case"select":ut("invalid",s),m=C=w=null;for(b in d)if(d.hasOwnProperty(b)&&(U=d[b],U!=null))switch(b){case"value":w=U;break;case"defaultValue":C=U;break;case"multiple":m=U;default:zt(s,l,b,U,d,null)}l=w,d=C,s.multiple=!!m,l!=null?uo(s,!!m,l,!1):d!=null&&uo(s,!!m,d,!0);return;case"textarea":ut("invalid",s),w=b=m=null;for(C in d)if(d.hasOwnProperty(C)&&(U=d[C],U!=null))switch(C){case"value":m=U;break;case"defaultValue":b=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:zt(s,l,C,U,d,null)}ho(s,m,b,w);return;case"option":for(K in d)d.hasOwnProperty(K)&&(m=d[K],m!=null)&&(K==="selected"?s.selected=m&&typeof m!="function"&&typeof m!="symbol":zt(s,l,K,m,d,null));return;case"dialog":ut("beforetoggle",s),ut("toggle",s),ut("cancel",s),ut("close",s);break;case"iframe":case"object":ut("load",s);break;case"video":case"audio":for(m=0;m<Ch.length;m++)ut(Ch[m],s);break;case"image":ut("error",s),ut("load",s);break;case"details":ut("toggle",s);break;case"embed":case"source":case"link":ut("error",s),ut("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in d)if(d.hasOwnProperty(le)&&(m=d[le],m!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,le,m,d,null)}return;default:if(Zc(l)){for(xe in d)d.hasOwnProperty(xe)&&(m=d[xe],m!==void 0&&dx(s,l,xe,m,d,void 0));return}}for(U in d)d.hasOwnProperty(U)&&(m=d[U],m!=null&&zt(s,l,U,m,d,null))}function BU(s,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,C=null,U=null,K=null,le=null,xe=null;for(ge in d){var Ne=d[ge];if(d.hasOwnProperty(ge)&&Ne!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":K=Ne;default:m.hasOwnProperty(ge)||zt(s,l,ge,null,m,Ne)}}for(var ue in m){var ge=m[ue];if(Ne=d[ue],m.hasOwnProperty(ue)&&(ge!=null||Ne!=null))switch(ue){case"type":w=ge;break;case"name":b=ge;break;case"checked":le=ge;break;case"defaultChecked":xe=ge;break;case"value":C=ge;break;case"defaultValue":U=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,l));break;default:ge!==Ne&&zt(s,l,ue,ge,m,Ne)}}Jc(s,C,U,K,le,xe,w,b);return;case"select":ge=C=U=ue=null;for(w in d)if(K=d[w],d.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":ge=K;default:m.hasOwnProperty(w)||zt(s,l,w,null,m,K)}for(b in m)if(w=m[b],K=d[b],m.hasOwnProperty(b)&&(w!=null||K!=null))switch(b){case"value":ue=w;break;case"defaultValue":U=w;break;case"multiple":C=w;default:w!==K&&zt(s,l,b,w,m,K)}l=U,d=C,m=ge,ue!=null?uo(s,!!d,ue,!1):!!m!=!!d&&(l!=null?uo(s,!!d,l,!0):uo(s,!!d,d?[]:"",!1));return;case"textarea":ge=ue=null;for(U in d)if(b=d[U],d.hasOwnProperty(U)&&b!=null&&!m.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:zt(s,l,U,null,m,b)}for(C in m)if(b=m[C],w=d[C],m.hasOwnProperty(C)&&(b!=null||w!=null))switch(C){case"value":ue=b;break;case"defaultValue":ge=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==w&&zt(s,l,C,b,m,w)}Mm(s,ue,ge);return;case"option":for(var Re in d)ue=d[Re],d.hasOwnProperty(Re)&&ue!=null&&!m.hasOwnProperty(Re)&&(Re==="selected"?s.selected=!1:zt(s,l,Re,null,m,ue));for(K in m)ue=m[K],ge=d[K],m.hasOwnProperty(K)&&ue!==ge&&(ue!=null||ge!=null)&&(K==="selected"?s.selected=ue&&typeof ue!="function"&&typeof ue!="symbol":zt(s,l,K,ue,m,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in d)ue=d[Fe],d.hasOwnProperty(Fe)&&ue!=null&&!m.hasOwnProperty(Fe)&&zt(s,l,Fe,null,m,ue);for(le in m)if(ue=m[le],ge=d[le],m.hasOwnProperty(le)&&ue!==ge&&(ue!=null||ge!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,l));break;default:zt(s,l,le,ue,m,ge)}return;default:if(Zc(l)){for(var Lt in d)ue=d[Lt],d.hasOwnProperty(Lt)&&ue!==void 0&&!m.hasOwnProperty(Lt)&&dx(s,l,Lt,void 0,m,ue);for(xe in m)ue=m[xe],ge=d[xe],!m.hasOwnProperty(xe)||ue===ge||ue===void 0&&ge===void 0||dx(s,l,xe,ue,m,ge);return}}for(var te in d)ue=d[te],d.hasOwnProperty(te)&&ue!=null&&!m.hasOwnProperty(te)&&zt(s,l,te,null,m,ue);for(Ne in m)ue=m[Ne],ge=d[Ne],!m.hasOwnProperty(Ne)||ue===ge||ue==null&&ge==null||zt(s,l,Ne,ue,m,ge)}function aC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $U(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var b=d[m],w=b.transferSize,C=b.initiatorType,U=b.duration;if(w&&U&&aC(C)){for(C=0,U=b.responseEnd,m+=1;m<d.length;m++){var K=d[m],le=K.startTime;if(le>U)break;var xe=K.transferSize,Ne=K.initiatorType;xe&&aC(Ne)&&(K=K.responseEnd,C+=xe*(K<U?1:(U-le)/(K-le)))}if(--m,l+=8*(w+C)/(b.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var hx=null,fx=null;function qp(s){return s.nodeType===9?s:s.ownerDocument}function oC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lC(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function mx(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var px=null;function FU(){var s=window.event;return s&&s.type==="popstate"?s===px?!1:(px=s,!0):(px=null,!1)}var cC=typeof setTimeout=="function"?setTimeout:void 0,HU=typeof clearTimeout=="function"?clearTimeout:void 0,uC=typeof Promise=="function"?Promise:void 0,GU=typeof queueMicrotask=="function"?queueMicrotask:typeof uC<"u"?function(s){return uC.resolve(null).then(s).catch(KU)}:cC;function KU(s){setTimeout(function(){throw s})}function Do(s){return s==="head"}function dC(s,l){var d=l,m=0;do{var b=d.nextSibling;if(s.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(m===0){s.removeChild(b),ku(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Ph(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,Ph(d);for(var w=d.firstChild;w;){var C=w.nextSibling,U=w.nodeName;w[bs]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||d.removeChild(w),w=C}}else d==="body"&&Ph(s.ownerDocument.body);d=b}while(d);ku(l)}function hC(s,l){var d=s;s=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=m}while(d)}function gx(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":gx(d),Yc(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function QU(s,l,d,m){for(;s.nodeType===1;){var b=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[bs])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Ri(s.nextSibling),s===null)break}return null}function WU(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Ri(s.nextSibling),s===null))return null;return s}function fC(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Ri(s.nextSibling),s===null))return null;return s}function vx(s){return s.data==="$?"||s.data==="$~"}function yx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function YU(s,l){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Ri(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var bx=null;function mC(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(l===0)return Ri(s.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}s=s.nextSibling}return null}function pC(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return s;l--}else d!=="/$"&&d!=="/&"||l++}s=s.previousSibling}return null}function gC(s,l,d){switch(l=qp(d),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Ph(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Yc(s)}var ki=new Map,vC=new Set;function Up(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ea=se.d;se.d={f:XU,r:JU,D:ZU,C:eV,L:tV,m:nV,X:iV,S:rV,M:sV};function XU(){var s=Ea.f(),l=Pp();return s||l}function JU(s){var l=wi(s);l!==null&&l.tag===5&&l.type==="form"?kA(l):Ea.r(s)}var Pu=typeof document>"u"?null:document;function yC(s,l,d){var m=Pu;if(m&&typeof l=="string"&&l){var b=Br(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),vC.has(b)||(vC.add(b),s={rel:s,crossOrigin:d,href:l},m.querySelector(b)===null&&(l=m.createElement("link"),cr(l,"link",s),An(l),m.head.appendChild(l)))}}function ZU(s){Ea.D(s),yC("dns-prefetch",s,null)}function eV(s,l){Ea.C(s,l),yC("preconnect",s,l)}function tV(s,l,d){Ea.L(s,l,d);var m=Pu;if(m&&s&&l){var b='link[rel="preload"][as="'+Br(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Br(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Br(d.imageSizes)+'"]')):b+='[href="'+Br(s)+'"]';var w=b;switch(l){case"style":w=Ou(s);break;case"script":w=Ru(s)}ki.has(w)||(s=g({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),ki.set(w,s),m.querySelector(b)!==null||l==="style"&&m.querySelector(Oh(w))||l==="script"&&m.querySelector(Rh(w))||(l=m.createElement("link"),cr(l,"link",s),An(l),m.head.appendChild(l)))}}function nV(s,l){Ea.m(s,l);var d=Pu;if(d&&s){var m=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Br(m)+'"][href="'+Br(s)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ru(s)}if(!ki.has(w)&&(s=g({rel:"modulepreload",href:s},l),ki.set(w,s),d.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Rh(w)))return}m=d.createElement("link"),cr(m,"link",s),An(m),d.head.appendChild(m)}}}function rV(s,l,d){Ea.S(s,l,d);var m=Pu;if(m&&s){var b=_s(m).hoistableStyles,w=Ou(s);l=l||"default";var C=b.get(w);if(!C){var U={loading:0,preload:null};if(C=m.querySelector(Oh(w)))U.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},d),(d=ki.get(w))&&xx(s,d);var K=C=m.createElement("link");An(K),cr(K,"link",s),K._p=new Promise(function(le,xe){K.onload=le,K.onerror=xe}),K.addEventListener("load",function(){U.loading|=1}),K.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Vp(C,l,m)}C={type:"stylesheet",instance:C,count:1,state:U},b.set(w,C)}}}function iV(s,l){Ea.X(s,l);var d=Pu;if(d&&s){var m=_s(d).hoistableScripts,b=Ru(s),w=m.get(b);w||(w=d.querySelector(Rh(b)),w||(s=g({src:s,async:!0},l),(l=ki.get(b))&&_x(s,l),w=d.createElement("script"),An(w),cr(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function sV(s,l){Ea.M(s,l);var d=Pu;if(d&&s){var m=_s(d).hoistableScripts,b=Ru(s),w=m.get(b);w||(w=d.querySelector(Rh(b)),w||(s=g({src:s,async:!0,type:"module"},l),(l=ki.get(b))&&_x(s,l),w=d.createElement("script"),An(w),cr(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function bC(s,l,d,m){var b=(b=G.current)?Up(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Ou(d.href),d=_s(b).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Ou(d.href);var w=_s(b).hoistableStyles,C=w.get(s);if(C||(b=b.ownerDocument||b,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,C),(w=b.querySelector(Oh(s)))&&!w._p&&(C.instance=w,C.state.loading=5),ki.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ki.set(s,d),w||aV(b,s,d,C.state))),l&&m===null)throw Error(r(528,""));return C}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ru(d),d=_s(b).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ou(s){return'href="'+Br(s)+'"'}function Oh(s){return'link[rel="stylesheet"]['+s+"]"}function xC(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function aV(s,l,d,m){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=s.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),cr(l,"link",d),An(l),s.head.appendChild(l))}function Ru(s){return'[src="'+Br(s)+'"]'}function Rh(s){return"script[async]"+s}function _C(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=s.querySelector('style[data-href~="'+Br(d.href)+'"]');if(m)return l.instance=m,An(m),m;var b=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),An(m),cr(m,"style",b),Vp(m,d.precedence,s),l.instance=m;case"stylesheet":b=Ou(d.href);var w=s.querySelector(Oh(b));if(w)return l.state.loading|=4,l.instance=w,An(w),w;m=xC(d),(b=ki.get(b))&&xx(m,b),w=(s.ownerDocument||s).createElement("link"),An(w);var C=w;return C._p=new Promise(function(U,K){C.onload=U,C.onerror=K}),cr(w,"link",m),l.state.loading|=4,Vp(w,d.precedence,s),l.instance=w;case"script":return w=Ru(d.src),(b=s.querySelector(Rh(w)))?(l.instance=b,An(b),b):(m=d,(b=ki.get(w))&&(m=g({},d),_x(m,b)),s=s.ownerDocument||s,b=s.createElement("script"),An(b),cr(b,"link",m),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Vp(m,d.precedence,s));return l.instance}function Vp(s,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,C=0;C<m.length;C++){var U=m[C];if(U.dataset.precedence===l)w=U;else if(w!==b)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function xx(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function _x(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Bp=null;function jC(s,l,d){if(Bp===null){var m=new Map,b=Bp=new Map;b.set(d,m)}else b=Bp,m=b.get(d),m||(m=new Map,b.set(d,m));if(m.has(s))return m;for(m.set(s,null),d=d.getElementsByTagName(s),b=0;b<d.length;b++){var w=d[b];if(!(w[bs]||w[Sn]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(l)||"";C=s+C;var U=m.get(C);U?U.push(w):m.set(C,[w])}}return m}function wC(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function oV(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(s=l.disabled,typeof l.precedence=="string"&&s==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function NC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function lV(s,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=Ou(m.href),w=l.querySelector(Oh(b));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=$p.bind(s),l.then(s,s)),d.state.loading|=4,d.instance=w,An(w);return}w=l.ownerDocument||l,m=xC(m),(b=ki.get(b))&&xx(m,b),w=w.createElement("link"),An(w);var C=w;C._p=new Promise(function(U,K){C.onload=U,C.onerror=K}),cr(w,"link",m),d.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=$p.bind(s),l.addEventListener("load",d),l.addEventListener("error",d))}}var jx=0;function cV(s,l){return s.stylesheets&&s.count===0&&Hp(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var m=setTimeout(function(){if(s.stylesheets&&Hp(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&jx===0&&(jx=62500*$U());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Hp(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>jx?50:800)+l);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function $p(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Fp=null;function Hp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Fp=new Map,l.forEach(uV,s),Fp=null,$p.call(s))}function uV(s,l){if(!(l.state.loading&4)){var d=Fp.get(s);if(d)var m=d.get(null);else{d=new Map,Fp.set(s,d);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var C=b[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(d.set(C.dataset.precedence,C),m=C)}m&&d.set(null,m)}b=l.instance,C=b.getAttribute("data-precedence"),w=d.get(C)||m,w===m&&d.set(null,b),d.set(C,b),this.count++,m=$p.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var kh={$$typeof:T,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function dV(s,l,d,m,b,w,C,U,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function EC(s,l,d,m,b,w,C,U,K,le,xe,Ne){return s=new dV(s,l,d,C,K,le,xe,Ne,U),l=1,w===!0&&(l|=24),w=ai(3,null,null,l),s.current=w,w.stateNode=s,l=tb(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:m,isDehydrated:d,cache:l},sb(w),s}function SC(s){return s?(s=uu,s):uu}function AC(s,l,d,m,b,w){b=SC(b),m.context===null?m.context=b:m.pendingContext=b,m=No(l),m.payload={element:d},w=w===void 0?null:w,w!==null&&(m.callback=w),d=Eo(s,m,l),d!==null&&(Qr(d,s,l),hh(d,s,l))}function TC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function wx(s,l){TC(s,l),(s=s.alternate)&&TC(s,l)}function CC(s){if(s.tag===13||s.tag===31){var l=Ul(s,67108864);l!==null&&Qr(l,s,67108864),wx(s,67108864)}}function IC(s){if(s.tag===13||s.tag===31){var l=di();l=Tl(l);var d=Ul(s,l);d!==null&&Qr(d,s,l),wx(s,l)}}var Gp=!0;function hV(s,l,d,m){var b=H.T;H.T=null;var w=se.p;try{se.p=2,Nx(s,l,d,m)}finally{se.p=w,H.T=b}}function fV(s,l,d,m){var b=H.T;H.T=null;var w=se.p;try{se.p=8,Nx(s,l,d,m)}finally{se.p=w,H.T=b}}function Nx(s,l,d,m){if(Gp){var b=Ex(m);if(b===null)ux(s,l,m,Kp,d),OC(s,m);else if(pV(b,s,l,d,m))m.stopPropagation();else if(OC(s,m),l&4&&-1<mV.indexOf(s)){for(;b!==null;){var w=wi(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=_i(w.pendingLanes);if(C!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;C;){var K=1<<31-nn(C);U.entanglements[1]|=K,C&=~K}ks(w),(Et&6)===0&&(Cp=Be()+500,Th(0))}}break;case 31:case 13:U=Ul(w,2),U!==null&&Qr(U,w,2),Pp(),wx(w,2)}if(w=Ex(m),w===null&&ux(s,l,m,Kp,d),w===b)break;b=w}b!==null&&m.stopPropagation()}else ux(s,l,m,null,d)}}function Ex(s){return s=Ni(s),Sx(s)}var Kp=null;function Sx(s){if(Kp=null,s=xs(s),s!==null){var l=o(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=c(l),s!==null)return s;s=null}else if(d===31){if(s=u(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Kp=s,null}function PC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case Vt:return 2;case Un:return 8;case qr:case oo:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var Ax=!1,Mo=null,zo=null,Lo=null,Dh=new Map,Mh=new Map,qo=[],mV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OC(s,l){switch(s){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":Dh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(l.pointerId)}}function zh(s,l,d,m,b,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},l!==null&&(l=wi(l),l!==null&&CC(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function pV(s,l,d,m,b){switch(l){case"focusin":return Mo=zh(Mo,s,l,d,m,b),!0;case"dragenter":return zo=zh(zo,s,l,d,m,b),!0;case"mouseover":return Lo=zh(Lo,s,l,d,m,b),!0;case"pointerover":var w=b.pointerId;return Dh.set(w,zh(Dh.get(w)||null,s,l,d,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Mh.set(w,zh(Mh.get(w)||null,s,l,d,m,b)),!0}return!1}function RC(s){var l=xs(s.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){s.blockedOn=l,Gi(s.priority,function(){IC(d)});return}}else if(l===31){if(l=u(d),l!==null){s.blockedOn=l,Gi(s.priority,function(){IC(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Ex(s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Yd=m,d.target.dispatchEvent(m),Yd=null}else return l=wi(d),l!==null&&CC(l),s.blockedOn=d,!1;l.shift()}return!0}function kC(s,l,d){Qp(s)&&d.delete(l)}function gV(){Ax=!1,Mo!==null&&Qp(Mo)&&(Mo=null),zo!==null&&Qp(zo)&&(zo=null),Lo!==null&&Qp(Lo)&&(Lo=null),Dh.forEach(kC),Mh.forEach(kC)}function Wp(s,l){s.blockedOn===l&&(s.blockedOn=null,Ax||(Ax=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gV)))}var Yp=null;function DC(s){Yp!==s&&(Yp=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Yp===s&&(Yp=null);for(var l=0;l<s.length;l+=3){var d=s[l],m=s[l+1],b=s[l+2];if(typeof m!="function"){if(Sx(m||d)===null)continue;break}var w=wi(d);w!==null&&(s.splice(l,3),l-=3,Eb(w,{pending:!0,data:b,method:d.method,action:m},m,b))}}))}function ku(s){function l(K){return Wp(K,s)}Mo!==null&&Wp(Mo,s),zo!==null&&Wp(zo,s),Lo!==null&&Wp(Lo,s),Dh.forEach(l),Mh.forEach(l);for(var d=0;d<qo.length;d++){var m=qo[d];m.blockedOn===s&&(m.blockedOn=null)}for(;0<qo.length&&(d=qo[0],d.blockedOn===null);)RC(d),d.blockedOn===null&&qo.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var b=d[m],w=d[m+1],C=b[Kn]||null;if(typeof w=="function")C||DC(d);else if(C){var U=null;if(w&&w.hasAttribute("formAction")){if(b=w,C=w[Kn]||null)U=C.formAction;else if(Sx(b)!==null)continue}else U=C.action;typeof U=="function"?d[m+1]=U:(d.splice(m,3),m-=3),DC(d)}}}function MC(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(C){return b=C})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function Tx(s){this._internalRoot=s}Xp.prototype.render=Tx.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=di();AC(d,m,s,l,null,null)},Xp.prototype.unmount=Tx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;AC(s.current,2,null,s,null,null),Pp(),l[ys]=null}};function Xp(s){this._internalRoot=s}Xp.prototype.unstable_scheduleHydration=function(s){if(s){var l=Pm();s={blockedOn:null,target:s,priority:l};for(var d=0;d<qo.length&&l!==0&&l<qo[d].priority;d++);qo.splice(d,0,s),d===0&&RC(s)}};var zC=e.version;if(zC!=="19.2.4")throw Error(r(527,zC,"19.2.4"));se.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var vV={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{ln=Jp.inject(vV),At=Jp}catch{}}return qh.createRoot=function(s,l){if(!i(s))throw Error(r(299));var d=!1,m="",b=FA,w=HA,C=GA;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=EC(s,1,!1,null,null,d,m,null,b,w,C,MC),s[ys]=l.current,cx(s),new Tx(l)},qh.hydrateRoot=function(s,l,d){if(!i(s))throw Error(r(299));var m=!1,b="",w=FA,C=HA,U=GA,K=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.formState!==void 0&&(K=d.formState)),l=EC(s,1,!0,l,d??null,m,b,K,w,C,U,MC),l.context=SC(null),d=l.current,m=di(),m=Tl(m),b=No(m),b.callback=null,Eo(d,b,m),d=m,l.current.lanes=d,Gn(l,d),ks(l),s[ys]=l.current,cx(s),new Xp(l)},qh.version="19.2.4",qh}var KC;function AV(){if(KC)return Px.exports;KC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Px.exports=SV(),Px.exports}var TV=AV();const CV=ra(TV);var aM=sM();function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xf.apply(this,arguments)}var Jo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jo||(Jo={}));const QC="popstate";function IV(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:c,hash:u}=r.location;return U1("",{pathname:o,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Qg(i)}return OV(e,n,null,t)}function wn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PV(){return Math.random().toString(36).substr(2,8)}function WC(t,e){return{usr:t.state,key:t.key,idx:e}}function U1(t,e,n,r){return n===void 0&&(n=null),xf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?jd(e):e,{state:n,key:e&&e.key||r||PV()})}function Qg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,u=Jo.Pop,h=null,f=p();f==null&&(f=0,c.replaceState(xf({},c.state,{idx:f}),""));function p(){return(c.state||{idx:null}).idx}function g(){u=Jo.Pop;let E=p(),A=E==null?null:E-f;f=E,h&&h({action:u,location:j.location,delta:A})}function y(E,A){u=Jo.Push;let R=U1(j.location,E,A);f=p()+1;let T=WC(R,f),I=j.createHref(R);try{c.pushState(T,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}o&&h&&h({action:u,location:j.location,delta:1})}function x(E,A){u=Jo.Replace;let R=U1(j.location,E,A);f=p();let T=WC(R,f),I=j.createHref(R);c.replaceState(T,"",I),o&&h&&h({action:u,location:j.location,delta:0})}function N(E){let A=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof E=="string"?E:Qg(E);return R=R.replace(/ $/,"%20"),wn(A,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,A)}let j={get action(){return u},get location(){return t(i,c)},listen(E){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(QC,g),h=E,()=>{i.removeEventListener(QC,g),h=null}},createHref(E){return e(i,E)},createURL:N,encodeLocation(E){let A=N(E);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:x,go(E){return c.go(E)}};return j}var YC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(YC||(YC={}));function RV(t,e,n){return n===void 0&&(n="/"),kV(t,e,n)}function kV(t,e,n,r){let i=typeof e=="string"?jd(e):e,o=ww(i.pathname||"/",n);if(o==null)return null;let c=oM(t);DV(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=KV(o);u=FV(c[h],f)}return u}function oM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,c,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(wn(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=tl([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(wn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),oM(o.children,e,p,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:BV(f,o.index),routesMeta:p})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let h of lM(o.path))i(o,c,h)}),e}function lM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=lM(r.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function DV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$V(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const MV=/^:[\w-]+$/,zV=3,LV=2,qV=1,UV=10,VV=-2,XC=t=>t==="*";function BV(t,e){let n=t.split("/"),r=n.length;return n.some(XC)&&(r+=VV),e&&(r+=LV),n.filter(i=>!XC(i)).reduce((i,o)=>i+(MV.test(o)?zV:o===""?qV:UV),r)}function $V(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function FV(t,e,n){let{routesMeta:r}=t,i={},o="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",g=HV({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),y=h.route;if(!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:tl([o,g.pathname]),pathnameBase:JV(tl([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=tl([o,g.pathnameBase]))}return c}function HV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,p,g)=>{let{paramName:y,isOptional:x}=p;if(y==="*"){let j=u[g]||"";c=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const N=u[g];return x&&!N?f[y]=void 0:f[y]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function GV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function KV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ww(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const QV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WV=t=>QV.test(t);function YV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?jd(t):t,o;if(n)if(WV(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),jw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?o=JC(n.substring(1),"/"):o=JC(n,e)}else o=e;return{pathname:o,search:ZV(r),hash:e8(i)}}function JC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Dx(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nw(t,e){let n=XV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ew(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=jd(t):(i=xf({},t),wn(!i.pathname||!i.pathname.includes("?"),Dx("?","pathname","search",i)),wn(!i.pathname||!i.pathname.includes("#"),Dx("#","pathname","hash",i)),wn(!i.search||!i.search.includes("#"),Dx("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?e[g]:"/"}let h=YV(i,u),f=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const tl=t=>t.join("/").replace(/\/\/+/g,"/"),JV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cM=["post","put","patch","delete"];new Set(cM);const n8=["get",...cM];new Set(n8);function _f(){return _f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_f.apply(this,arguments)}const Sw=_.createContext(null),r8=_.createContext(null),yl=_.createContext(null),fy=_.createContext(null),Ya=_.createContext({outlet:null,matches:[],isDataRoute:!1}),uM=_.createContext(null);function i8(t,e){let{relative:n}=e===void 0?{}:e;wd()||wn(!1);let{basename:r,navigator:i}=_.useContext(yl),{hash:o,pathname:c,search:u}=hM(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:tl([r,c])),i.createHref({pathname:h,search:u,hash:o})}function wd(){return _.useContext(fy)!=null}function ia(){return wd()||wn(!1),_.useContext(fy).location}function dM(t){_.useContext(yl).static||_.useLayoutEffect(t)}function Er(){let{isDataRoute:t}=_.useContext(Ya);return t?v8():s8()}function s8(){wd()||wn(!1);let t=_.useContext(Sw),{basename:e,future:n,navigator:r}=_.useContext(yl),{matches:i}=_.useContext(Ya),{pathname:o}=ia(),c=JSON.stringify(Nw(i,n.v7_relativeSplatPath)),u=_.useRef(!1);return dM(()=>{u.current=!0}),_.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let g=Ew(f,JSON.parse(c),o,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:tl([e,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[e,r,c,o,t])}function my(){let{matches:t}=_.useContext(Ya),e=t[t.length-1];return e?e.params:{}}function hM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(yl),{matches:i}=_.useContext(Ya),{pathname:o}=ia(),c=JSON.stringify(Nw(i,r.v7_relativeSplatPath));return _.useMemo(()=>Ew(t,JSON.parse(c),o,n==="path"),[t,c,o,n])}function a8(t,e){return o8(t,e)}function o8(t,e,n,r){wd()||wn(!1);let{navigator:i}=_.useContext(yl),{matches:o}=_.useContext(Ya),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=ia(),p;if(e){var g;let E=typeof e=="string"?jd(e):e;h==="/"||(g=E.pathname)!=null&&g.startsWith(h)||wn(!1),p=E}else p=f;let y=p.pathname||"/",x=y;if(h!=="/"){let E=h.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=RV(t,{pathname:x}),j=h8(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:tl([h,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:tl([h,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return e&&j?_.createElement(fy.Provider,{value:{location:_f({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Jo.Pop}},j):j}function l8(){let t=g8(),e=t8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,null)}const c8=_.createElement(l8,null);class u8 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Ya.Provider,{value:this.props.routeContext},_.createElement(uM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function d8(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(Sw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Ya.Provider,{value:e},r)}function h8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);p>=0||wn(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:y,errors:x}=n,N=g.route.loader&&y[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||N){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let x,N=!1,j=null,E=null;n&&(x=u&&g.route.id?u[g.route.id]:void 0,j=g.route.errorElement||c8,h&&(f<0&&y===0?(y8("route-fallback"),N=!0,E=null):f===y&&(N=!0,E=g.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),R=()=>{let T;return x?T=j:N?T=E:g.route.Component?T=_.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=p,_.createElement(d8,{match:g,routeContext:{outlet:p,matches:A,isDataRoute:n!=null},children:T})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?_.createElement(u8,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):R()},null)}var fM=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(fM||{}),mM=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(mM||{});function f8(t){let e=_.useContext(Sw);return e||wn(!1),e}function m8(t){let e=_.useContext(r8);return e||wn(!1),e}function p8(t){let e=_.useContext(Ya);return e||wn(!1),e}function pM(t){let e=p8(),n=e.matches[e.matches.length-1];return n.route.id||wn(!1),n.route.id}function g8(){var t;let e=_.useContext(uM),n=m8(),r=pM();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function v8(){let{router:t}=f8(fM.UseNavigateStable),e=pM(mM.UseNavigateStable),n=_.useRef(!1);return dM(()=>{n.current=!0}),_.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,_f({fromRouteId:e},o)))},[t,e])}const ZC={};function y8(t,e,n){ZC[t]||(ZC[t]=!0)}function b8(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function e2(t){let{to:e,replace:n,state:r,relative:i}=t;wd()||wn(!1);let{future:o,static:c}=_.useContext(yl),{matches:u}=_.useContext(Ya),{pathname:h}=ia(),f=Er(),p=Ew(e,Nw(u,o.v7_relativeSplatPath),h,i==="path"),g=JSON.stringify(p);return _.useEffect(()=>f(JSON.parse(g),{replace:n,state:r,relative:i}),[f,g,i,n,r]),null}function $t(t){wn(!1)}function x8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Jo.Pop,navigator:o,static:c=!1,future:u}=t;wd()&&wn(!1);let h=e.replace(/^\/*/,"/"),f=_.useMemo(()=>({basename:h,navigator:o,static:c,future:_f({v7_relativeSplatPath:!1},u)}),[h,u,o,c]);typeof r=="string"&&(r=jd(r));let{pathname:p="/",search:g="",hash:y="",state:x=null,key:N="default"}=r,j=_.useMemo(()=>{let E=ww(p,h);return E==null?null:{location:{pathname:E,search:g,hash:y,state:x,key:N},navigationType:i}},[h,p,g,y,x,N,i]);return j==null?null:_.createElement(yl.Provider,{value:f},_.createElement(fy.Provider,{children:n,value:j}))}function _8(t){let{children:e,location:n}=t;return a8(V1(e),n)}new Promise(()=>{});function V1(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let o=[...e,i];if(r.type===_.Fragment){n.push.apply(n,V1(r.props.children,o));return}r.type!==$t&&wn(!1),!r.props.index||!r.props.children||wn(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=V1(r.props.children,o)),n.push(c)}),n}function B1(){return B1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B1.apply(this,arguments)}function j8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function w8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function N8(t,e){return t.button===0&&(!e||e==="_self")&&!w8(t)}function $1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function E8(t,e){let n=$1(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const S8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],A8="6";try{window.__reactRouterVersion=A8}catch{}const T8="startTransition",t2=iM[T8];function C8(t){let{basename:e,children:n,future:r,window:i}=t,o=_.useRef();o.current==null&&(o.current=IV({window:i,v5Compat:!0}));let c=o.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},p=_.useCallback(g=>{f&&t2?t2(()=>h(g)):h(g)},[h,f]);return _.useLayoutEffect(()=>c.listen(p),[c,p]),_.useEffect(()=>b8(r),[r]),_.createElement(x8,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const I8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=_.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:p,viewTransition:g}=e,y=j8(e,S8),{basename:x}=_.useContext(yl),N,j=!1;if(typeof f=="string"&&P8.test(f)&&(N=f,I8))try{let T=new URL(window.location.href),I=f.startsWith("//")?new URL(T.protocol+f):new URL(f),M=ww(I.pathname,x);I.origin===T.origin&&M!=null?f=M+I.search+I.hash:j=!0}catch{}let E=i8(f,{relative:i}),A=O8(f,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:g});function R(T){r&&r(T),T.defaultPrevented||A(T)}return _.createElement("a",B1({},y,{href:N||E,onClick:j||o?r:R,ref:n,target:h}))});var n2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(n2||(n2={}));var r2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(r2||(r2={}));function O8(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,h=Er(),f=ia(),p=hM(t,{relative:c});return _.useCallback(g=>{if(N8(g,n)){g.preventDefault();let y=r!==void 0?r:Qg(f)===Qg(p);h(t,{replace:y,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[f,h,p,r,i,n,t,o,c,u])}function R8(t){let e=_.useRef($1(t)),n=_.useRef(!1),r=ia(),i=_.useMemo(()=>E8(r.search,n.current?null:e.current),[r.search]),o=Er(),c=_.useCallback((u,h)=>{const f=$1(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,h)},[o,i]);return[i,c]}const k8=()=>{};var i2={};const gM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},D8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],c=t[n++],u=t[n++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},vM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,u=c?t[i+1]:0,h=i+2<t.length,f=h?t[i+2]:0,p=o>>2,g=(o&3)<<4|u>>4;let y=(u&15)<<2|f>>6,x=f&63;h||(x=64,c||(y=64)),r.push(n[p],n[g],n[y],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||g==null)throw new M8;const y=o<<2|u>>4;if(r.push(y),f!==64){const x=u<<4&240|f>>2;if(r.push(x),g!==64){const N=f<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class M8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z8=function(t){const e=gM(t);return vM.encodeByteArray(e,!0)},Wg=function(t){return z8(t).replace(/\./g,"")},yM=function(t){try{return vM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function L8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const q8=()=>L8().__FIREBASE_DEFAULTS__,U8=()=>{if(typeof process>"u"||typeof i2>"u")return;const t=i2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yM(t[1]);return e&&JSON.parse(e)},py=()=>{try{return k8()||q8()||U8()||V8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bM=t=>py()?.emulatorHosts?.[t],xM=t=>{const e=bM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_M=()=>py()?.config,jM=t=>py()?.[`_${t}`];class B8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function bl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Aw(t){return(await fetch(t,{credentials:"include"})).ok}function wM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Wg(JSON.stringify(n)),Wg(JSON.stringify(c)),""].join(".")}const df={};function $8(){const t={prod:[],emulator:[]};for(const e of Object.keys(df))df[e]?t.emulator.push(e):t.prod.push(e);return t}function F8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let s2=!1;function Tw(t,e){if(typeof window>"u"||typeof document>"u"||!bl(window.location.host)||df[t]===e||df[t]||s2)return;df[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",o=$8().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,x){y.setAttribute("width","24"),y.setAttribute("id",x),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{s2=!0,c()},y}function p(y,x){y.setAttribute("id",x),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=F8(r),x=n("text"),N=document.getElementById(x)||document.createElement("span"),j=n("learnmore"),E=document.getElementById(j)||document.createElement("a"),A=n("preprendIcon"),R=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const T=y.element;u(T),p(E,j);const I=f();h(R,A),T.append(R,N,E,I),document.body.appendChild(T)}o?(N.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function G8(){const t=py()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function W8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y8(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function X8(){return!G8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J8(){try{return typeof indexedDB=="object"}catch{return!1}}function Z8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const eB="FirebaseError";class sa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eB,Object.setPrototypeOf(this,sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yf.prototype.create)}}class Yf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?tB(o,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new sa(i,u,r)}}function tB(t,e){return t.replace(nB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nB=/\{\$([^}]+)}/g;function rB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],c=e[i];if(a2(o)&&a2(c)){if(!bc(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function a2(t){return t!==null&&typeof t=="object"}function Xf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ef(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iB(t,e){const n=new sB(t,e);return n.subscribe.bind(n)}class sB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mx),i.error===void 0&&(i.error=Mx),i.complete===void 0&&(i.complete=Mx);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mx(){}function Ht(t){return t&&t._delegate?t._delegate:t}class ll{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tc="[DEFAULT]";let oB=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new B8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cB(e))try{this.getOrInitializeService({instanceIdentifier:tc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tc){return this.instances.has(e)}getOptions(e=tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tc){return this.component?this.component.multipleInstances?e:tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lB(t){return t===tc?void 0:t}function cB(t){return t.instantiationMode==="EAGER"}class uB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const dB={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},hB=ft.INFO,fB={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},mB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=fB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cw{constructor(e){this.name=e,this._logLevel=hB,this._logHandler=mB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const pB=(t,e)=>e.some(n=>t instanceof n);let o2,l2;function gB(){return o2||(o2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vB(){return l2||(l2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NM=new WeakMap,F1=new WeakMap,EM=new WeakMap,zx=new WeakMap,Iw=new WeakMap;function yB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(nl(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&NM.set(n,t)}).catch(()=>{}),Iw.set(e,t),e}function bB(t){if(F1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});F1.set(t,e)}let H1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return F1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xB(t){H1=t(H1)}function _B(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lx(this),e,...n);return EM.set(r,e.sort?e.sort():[e]),nl(r)}:vB().includes(t)?function(...e){return t.apply(Lx(this),e),nl(NM.get(this))}:function(...e){return nl(t.apply(Lx(this),e))}}function jB(t){return typeof t=="function"?_B(t):(t instanceof IDBTransaction&&bB(t),pB(t,gB())?new Proxy(t,H1):t)}function nl(t){if(t instanceof IDBRequest)return yB(t);if(zx.has(t))return zx.get(t);const e=jB(t);return e!==t&&(zx.set(t,e),Iw.set(e,t)),e}const Lx=t=>Iw.get(t);function wB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),u=nl(c);return r&&c.addEventListener("upgradeneeded",h=>{r(nl(c.result),h.oldVersion,h.newVersion,nl(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const NB=["get","getKey","getAll","getAllKeys","count"],EB=["put","add","delete","clear"],qx=new Map;function c2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qx.get(e))return qx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=EB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NB.includes(n)))return;const o=async function(c,...u){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&h.done]))[0]};return qx.set(e,o),o}xB(t=>({...t,get:(e,n,r)=>c2(e,n)||t.get(e,n,r),has:(e,n)=>!!c2(e,n)||t.has(e,n)}));class SB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AB(t){return t.getComponent()?.type==="VERSION"}const G1="@firebase/app",u2="0.14.7";const La=new Cw("@firebase/app"),TB="@firebase/app-compat",CB="@firebase/analytics-compat",IB="@firebase/analytics",PB="@firebase/app-check-compat",OB="@firebase/app-check",RB="@firebase/auth",kB="@firebase/auth-compat",DB="@firebase/database",MB="@firebase/data-connect",zB="@firebase/database-compat",LB="@firebase/functions",qB="@firebase/functions-compat",UB="@firebase/installations",VB="@firebase/installations-compat",BB="@firebase/messaging",$B="@firebase/messaging-compat",FB="@firebase/performance",HB="@firebase/performance-compat",GB="@firebase/remote-config",KB="@firebase/remote-config-compat",QB="@firebase/storage",WB="@firebase/storage-compat",YB="@firebase/firestore",XB="@firebase/ai",JB="@firebase/firestore-compat",ZB="firebase",e7="12.8.0";const K1="[DEFAULT]",t7={[G1]:"fire-core",[TB]:"fire-core-compat",[IB]:"fire-analytics",[CB]:"fire-analytics-compat",[OB]:"fire-app-check",[PB]:"fire-app-check-compat",[RB]:"fire-auth",[kB]:"fire-auth-compat",[DB]:"fire-rtdb",[MB]:"fire-data-connect",[zB]:"fire-rtdb-compat",[LB]:"fire-fn",[qB]:"fire-fn-compat",[UB]:"fire-iid",[VB]:"fire-iid-compat",[BB]:"fire-fcm",[$B]:"fire-fcm-compat",[FB]:"fire-perf",[HB]:"fire-perf-compat",[GB]:"fire-rc",[KB]:"fire-rc-compat",[QB]:"fire-gcs",[WB]:"fire-gcs-compat",[YB]:"fire-fst",[JB]:"fire-fst-compat",[XB]:"fire-vertex","fire-js":"fire-js",[ZB]:"fire-js-all"};const Yg=new Map,n7=new Map,Q1=new Map;function d2(t,e){try{t.container.addComponent(e)}catch(n){La.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xc(t){const e=t.name;if(Q1.has(e))return La.debug(`There were multiple attempts to register component ${e}.`),!1;Q1.set(e,t);for(const n of Yg.values())d2(n,t);for(const n of n7.values())d2(n,t);return!0}function gy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t==null?!1:t.settings!==void 0}const r7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rl=new Yf("app","Firebase",r7);class i7{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rl.create("app-deleted",{appName:this._name})}}const Mc=e7;function SM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:K1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw rl.create("bad-app-name",{appName:String(i)});if(n||(n=_M()),!n)throw rl.create("no-options");const o=Yg.get(i);if(o){if(bc(n,o.options)&&bc(r,o.config))return o;throw rl.create("duplicate-app",{appName:i})}const c=new uB(i);for(const h of Q1.values())c.addComponent(h);const u=new i7(n,r,c);return Yg.set(i,u),u}function Pw(t=K1){const e=Yg.get(t);if(!e&&t===K1&&_M())return SM();if(!e)throw rl.create("no-app",{appName:t});return e}function $s(t,e,n){let r=t7[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),La.warn(c.join(" "));return}xc(new ll(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const s7="firebase-heartbeat-database",a7=1,jf="firebase-heartbeat-store";let Ux=null;function AM(){return Ux||(Ux=wB(s7,a7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jf)}catch(n){console.warn(n)}}}}).catch(t=>{throw rl.create("idb-open",{originalErrorMessage:t.message})})),Ux}async function o7(t){try{const n=(await AM()).transaction(jf),r=await n.objectStore(jf).get(TM(t));return await n.done,r}catch(e){if(e instanceof sa)La.warn(e.message);else{const n=rl.create("idb-get",{originalErrorMessage:e?.message});La.warn(n.message)}}}async function h2(t,e){try{const r=(await AM()).transaction(jf,"readwrite");await r.objectStore(jf).put(e,TM(t)),await r.done}catch(n){if(n instanceof sa)La.warn(n.message);else{const r=rl.create("idb-set",{originalErrorMessage:n?.message});La.warn(r.message)}}}function TM(t){return`${t.name}!${t.options.appId}`}const l7=1024,c7=30;class u7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=f2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>c7){const i=f7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){La.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=f2(),{heartbeatsToSend:n,unsentEntries:r}=d7(this._heartbeatsCache.heartbeats),i=Wg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return La.warn(e),""}}}function f2(){return new Date().toISOString().substring(0,10)}function d7(t,e=l7){const n=[];let r=t.slice();for(const i of t){const o=n.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),m2(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),m2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class h7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J8()?Z8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o7(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function m2(t){return Wg(JSON.stringify({version:2,heartbeats:t})).length}function f7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function m7(t){xc(new ll("platform-logger",e=>new SB(e),"PRIVATE")),xc(new ll("heartbeat",e=>new u7(e),"PRIVATE")),$s(G1,u2,t),$s(G1,u2,"esm2020"),$s("fire-js","")}m7("");function CM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p7=CM,IM=new Yf("auth","Firebase",CM());const Xg=new Cw("@firebase/auth");function g7(t,...e){Xg.logLevel<=ft.WARN&&Xg.warn(`Auth (${Mc}): ${t}`,...e)}function Ig(t,...e){Xg.logLevel<=ft.ERROR&&Xg.error(`Auth (${Mc}): ${t}`,...e)}function hs(t,...e){throw Ow(t,...e)}function Fs(t,...e){return Ow(t,...e)}function PM(t,e,n){const r={...p7(),[e]:n};return new Yf("auth","Firebase",r).create(e,{appName:t.name})}function ka(t){return PM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ow(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IM.create(t,...e)}function Qe(t,e,...n){if(!t)throw Ow(e,...n)}function Ca(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ig(e),new Error(e)}function qa(t,e){t||Ca(e)}function W1(){return typeof self<"u"&&self.location?.href||""}function v7(){return p2()==="http:"||p2()==="https:"}function p2(){return typeof self<"u"&&self.location?.protocol||null}function y7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v7()||Q8()||"connection"in navigator)?navigator.onLine:!0}function b7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Jf{constructor(e,n){this.shortDelay=e,this.longDelay=n,qa(n>e,"Short delay should be less than long delay!"),this.isMobile=H8()||W8()}get(){return y7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rw(t,e){qa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class OM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const x7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j7=new Jf(3e4,6e4);function xl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Xa(t,e,n,r,i={}){return RM(t,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Xf({key:t.config.apiKey,...c}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return K8()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&bl(t.emulatorConfig.host)&&(f.credentials="include"),OM.fetch()(await kM(t,t.config.apiHost,n,u),f)})}async function RM(t,e,n){t._canInitEmulator=!1;const r={...x7,...e};try{const i=new N7(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Zp(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zp(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Zp(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw Zp(t,"user-disabled",c);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw PM(t,p,f);hs(t,p)}}catch(i){if(i instanceof sa)throw i;hs(t,"network-request-failed",{message:String(i)})}}async function Zf(t,e,n,r,i={}){const o=await Xa(t,e,n,r,i);return"mfaPendingCredential"in o&&hs(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kM(t,e,n,r){const i=`${e}${n}?${r}`,o=t,c=o.config.emulator?Rw(t.config,i):`${t.config.apiScheme}://${i}`;return _7.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function w7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fs(this.auth,"network-request-failed")),j7.get())})}}function Zp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fs(t,e,r);return i.customData._tokenResponse=n,i}function g2(t){return t!==void 0&&t.enterprise!==void 0}class E7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return w7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function S7(t,e){return Xa(t,"GET","/v2/recaptchaConfig",xl(t,e))}async function A7(t,e){return Xa(t,"POST","/v1/accounts:delete",e)}async function Jg(t,e){return Xa(t,"POST","/v1/accounts:lookup",e)}function hf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T7(t,e=!1){const n=Ht(t),r=await n.getIdToken(e),i=kw(r);Qe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:hf(Vx(i.auth_time)),issuedAtTime:hf(Vx(i.iat)),expirationTime:hf(Vx(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Vx(t){return Number(t)*1e3}function kw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ig("JWT malformed, contained fewer than 3 sections"),null;try{const i=yM(n);return i?JSON.parse(i):(Ig("Failed to decode base64 JWT payload"),null)}catch(i){return Ig("Caught error parsing JWT payload as JSON",i?.toString()),null}}function v2(t){const e=kw(t);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function id(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sa&&C7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function C7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class I7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Y1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hf(this.lastLoginAt),this.creationTime=hf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zg(t){const e=t.auth,n=await t.getIdToken(),r=await id(t,Jg(e,{idToken:n}));Qe(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?DM(i.providerUserInfo):[],c=O7(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!c?.length,f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Y1(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function P7(t){const e=Ht(t);await Zg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function R7(t,e){const n=await RM(t,{},async()=>{const r=Xf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,c=await kM(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&bl(t.emulatorConfig.host)&&(h.credentials="include"),OM.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k7(t,e){return Xa(t,"POST","/v2/accounts:revokeToken",xl(t,e))}class Yu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const n=v2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await R7(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,c=new Yu;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Qe(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Qe(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yu,this.toJSON())}_performRefresh(){return Ca("not implemented")}}function Vo(t,e){Qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ls{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new I7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Y1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await id(this,this.stsTokenManager.getToken(this.auth,e));return Qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T7(this,e)}reload(){return P7(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(ka(this.auth));const e=await this.getIdToken();return await id(this,A7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:x,providerData:N,stsTokenManager:j}=n;Qe(g&&j,e,"internal-error");const E=Yu.fromJSON(this.name,j);Qe(typeof g=="string",e,"internal-error"),Vo(r,e.name),Vo(i,e.name),Qe(typeof y=="boolean",e,"internal-error"),Qe(typeof x=="boolean",e,"internal-error"),Vo(o,e.name),Vo(c,e.name),Vo(u,e.name),Vo(h,e.name),Vo(f,e.name),Vo(p,e.name);const A=new ls({uid:g,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:x,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:E,createdAt:f,lastLoginAt:p});return N&&Array.isArray(N)&&(A.providerData=N.map(R=>({...R}))),h&&(A._redirectEventId=h),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Yu;i.updateFromServerResponse(n);const o=new ls({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zg(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Qe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?DM(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,u=new Yu;u.updateFromIdToken(r);const h=new ls({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Y1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const y2=new Map;function Ia(t){qa(t instanceof Function,"Expected a class definition");let e=y2.get(t);return e?(qa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,y2.set(t,e),e)}class MM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MM.type="NONE";const b2=MM;function Pg(t,e,n){return`firebase:${t}:${e}:${n}`}class Xu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Pg(this.userKey,i.apiKey,o),this.fullPersistenceKey=Pg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jg(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xu(Ia(b2),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Ia(b2);const c=Pg(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(c);if(p){let g;if(typeof p=="string"){const y=await Jg(e,{idToken:p}).catch(()=>{});if(!y)break;g=await ls._fromGetAccountInfoResponse(e,y,p)}else g=ls._fromJSON(e,p);f!==o&&(u=g),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Xu(o,e,r):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Xu(o,e,r))}}function x2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BM(e))return"Blackberry";if($M(e))return"Webos";if(LM(e))return"Safari";if((e.includes("chrome/")||qM(e))&&!e.includes("edge/"))return"Chrome";if(VM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function zM(t=wr()){return/firefox\//i.test(t)}function LM(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qM(t=wr()){return/crios\//i.test(t)}function UM(t=wr()){return/iemobile/i.test(t)}function VM(t=wr()){return/android/i.test(t)}function BM(t=wr()){return/blackberry/i.test(t)}function $M(t=wr()){return/webos/i.test(t)}function Dw(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D7(t=wr()){return Dw(t)&&!!window.navigator?.standalone}function M7(){return Y8()&&document.documentMode===10}function FM(t=wr()){return Dw(t)||VM(t)||$M(t)||BM(t)||/windows phone/i.test(t)||UM(t)}function HM(t,e=[]){let n;switch(t){case"Browser":n=x2(wr());break;case"Worker":n=`${x2(wr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mc}/${r}`}class z7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function L7(t,e={}){return Xa(t,"GET","/v2/passwordPolicy",xl(t,e))}const q7=6;class U7{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??q7,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class V7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _2(this),this.idTokenSubscription=new _2(this),this.beforeStateQueue=new z7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ia(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jg(this,{idToken:e}),r=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(ka(this));const n=e?Ht(e):null;return n&&Qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(ka(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(ka(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L7(this),n=new U7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await k7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ia(e)||this._popupRedirectResolver;Qe(n,this,"argument-error"),this.redirectPersistenceManager=await Xu.create(this,[Ia(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&g7(`Error while retrieving App Check token: ${e.error}`),e?.token}}function zc(t){return Ht(t)}class _2{constructor(e){this.auth=e,this.observer=null,this.addObserver=iB(n=>this.observer=n)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B7(t){vy=t}function GM(t){return vy.loadJS(t)}function $7(){return vy.recaptchaEnterpriseScript}function F7(){return vy.gapiScript}function H7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class G7{constructor(){this.enterprise=new K7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class K7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Q7="recaptcha-enterprise",KM="NO_RECAPTCHA";class W7{constructor(e){this.type=Q7,this.auth=zc(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{S7(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new E7(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function i(o,c,u){const h=window.grecaptcha;g2(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(KM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G7().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!n&&g2(window.grecaptcha))i(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=$7();h.length!==0&&(h+=u),GM(h).then(()=>{i(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function j2(t,e,n,r=!1,i=!1){const o=new W7(t);let c;if(i)c=KM;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function X1(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await j2(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await j2(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}function Y7(t,e){const n=gy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(bc(o,e??{}))return i;hs(i,"already-initialized")}return n.initialize({options:e})}function X7(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ia);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function J7(t,e,n){const r=zc(t);Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=QM(e),{host:c,port:u}=Z7(e),h=u===null?"":`:${u}`,f={url:`${o}//${c}${h}/`},p=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qe(bc(f,r.config.emulator)&&bc(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,bl(c)?(Aw(`${o}//${c}${h}`),Tw("Auth",!0)):e$()}function QM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z7(t){const e=QM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:w2(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:w2(c)}}}function w2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Mw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ca("not implemented")}_getIdTokenResponse(e){return Ca("not implemented")}_linkToIdToken(e,n){return Ca("not implemented")}_getReauthenticationResolver(e){return Ca("not implemented")}}async function t$(t,e){return Xa(t,"POST","/v1/accounts:signUp",e)}async function n$(t,e){return Zf(t,"POST","/v1/accounts:signInWithPassword",xl(t,e))}async function r$(t,e){return Zf(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}async function i$(t,e){return Zf(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}class wf extends Mw{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new wf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X1(e,n,"signInWithPassword",n$);case"emailLink":return r$(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X1(e,r,"signUpPassword",t$);case"emailLink":return i$(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ju(t,e){return Zf(t,"POST","/v1/accounts:signInWithIdp",xl(t,e))}const s$="http://localhost";class _c extends Mw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _c(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const c=new _c(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Ju(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ju(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ju(e,n)}buildRequest(){const e={requestUri:s$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xf(n)}return e}}function a$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function o$(t){const e=Zh(ef(t)).link,n=e?Zh(ef(e)).deep_link_id:null,r=Zh(ef(t)).deep_link_id;return(r?Zh(ef(r)).link:null)||r||n||e||t}class zw{constructor(e){const n=Zh(ef(e)),r=n.apiKey??null,i=n.oobCode??null,o=a$(n.mode??null);Qe(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=o$(e);try{return new zw(n)}catch{return null}}}class Nd{constructor(){this.providerId=Nd.PROVIDER_ID}static credential(e,n){return wf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zw.parseLink(n);return Qe(r,"argument-error"),wf._fromEmailAndCode(e,r.code,r.tenantId)}}Nd.PROVIDER_ID="password";Nd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class WM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class em extends WM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Go extends em{constructor(){super("facebook.com")}static credential(e){return _c._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch{return null}}}Go.FACEBOOK_SIGN_IN_METHOD="facebook.com";Go.PROVIDER_ID="facebook.com";class Ko extends em{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _c._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ko.credential(n,r)}catch{return null}}}Ko.GOOGLE_SIGN_IN_METHOD="google.com";Ko.PROVIDER_ID="google.com";class Qo extends em{constructor(){super("github.com")}static credential(e){return _c._fromParams({providerId:Qo.PROVIDER_ID,signInMethod:Qo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qo.credentialFromTaggedObject(e)}static credentialFromError(e){return Qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qo.credential(e.oauthAccessToken)}catch{return null}}}Qo.GITHUB_SIGN_IN_METHOD="github.com";Qo.PROVIDER_ID="github.com";class Wo extends em{constructor(){super("twitter.com")}static credential(e,n){return _c._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wo.credentialFromTaggedObject(e)}static credentialFromError(e){return Wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wo.credential(n,r)}catch{return null}}}Wo.TWITTER_SIGN_IN_METHOD="twitter.com";Wo.PROVIDER_ID="twitter.com";async function l$(t,e){return Zf(t,"POST","/v1/accounts:signUp",xl(t,e))}class jc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await ls._fromIdTokenResponse(e,r,i),c=N2(r);return new jc({user:o,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=N2(r);return new jc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function N2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ev extends sa{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ev.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ev(e,n,r,i)}}function YM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ev._fromErrorAndOperation(t,o,e,r):o})}async function c$(t,e,n=!1){const r=await id(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jc._forOperation(t,"link",r)}async function u$(t,e,n=!1){const{auth:r}=t;if(hi(r.app))return Promise.reject(ka(r));const i="reauthenticate";try{const o=await id(t,YM(r,i,e,t),n);Qe(o.idToken,r,"internal-error");const c=kw(o.idToken);Qe(c,r,"internal-error");const{sub:u}=c;return Qe(t.uid===u,r,"user-mismatch"),jc._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&hs(r,"user-mismatch"),o}}async function XM(t,e,n=!1){if(hi(t.app))return Promise.reject(ka(t));const r="signIn",i=await YM(t,r,e),o=await jc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function d$(t,e){return XM(zc(t),e)}async function JM(t){const e=zc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function h$(t,e,n){if(hi(t.app))return Promise.reject(ka(t));const r=zc(t),c=await X1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l$).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&JM(t),h}),u=await jc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function f$(t,e,n){return hi(t.app)?Promise.reject(ka(t)):d$(Ht(t),Nd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JM(t),r})}async function m$(t,e){return Xa(t,"POST","/v1/accounts:update",e)}async function p$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ht(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await id(r,m$(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function g$(t,e,n,r){return Ht(t).onIdTokenChanged(e,n,r)}function v$(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function y$(t,e,n,r){return Ht(t).onAuthStateChanged(e,n,r)}function b$(t){return Ht(t).signOut()}const tv="__sak";class ZM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tv,"1"),this.storage.removeItem(tv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const x$=1e3,_$=10;class ez extends ZM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);M7()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},x$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ez.type="LOCAL";const j$=ez;class tz extends ZM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tz.type="SESSION";const nz=tz;function w$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class yy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new yy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,c=this.handlersMap[i];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async f=>f(n.origin,o)),h=await w$(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yy.receivers=[];function Lw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class N${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const f=Lw("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(y.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Hs(){return window}function E$(t){Hs().location.href=t}function rz(){return typeof Hs().WorkerGlobalScope<"u"&&typeof Hs().importScripts=="function"}async function S$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A$(){return navigator?.serviceWorker?.controller||null}function T$(){return rz()?self:null}const iz="firebaseLocalStorageDb",C$=1,nv="firebaseLocalStorage",sz="fbase_key";class tm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function by(t,e){return t.transaction([nv],e?"readwrite":"readonly").objectStore(nv)}function I$(){const t=indexedDB.deleteDatabase(iz);return new tm(t).toPromise()}function J1(){const t=indexedDB.open(iz,C$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nv,{keyPath:sz})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nv)?e(r):(r.close(),await I$(),e(await J1()))})})}async function E2(t,e,n){const r=by(t,!0).put({[sz]:e,value:n});return new tm(r).toPromise()}async function P$(t,e){const n=by(t,!1).get(e),r=await new tm(n).toPromise();return r===void 0?null:r.value}function S2(t,e){const n=by(t,!0).delete(e);return new tm(n).toPromise()}const O$=800,R$=3;class az{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yy._getInstance(T$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await S$(),!this.activeServiceWorker)return;this.sender=new N$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J1();return await E2(e,tv,"1"),await S2(e,tv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>E2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>P$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=by(i,!1).getAll();return new tm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),O$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}az.type="LOCAL";const k$=az;new Jf(3e4,6e4);function D$(t,e){return e?Ia(e):(Qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class qw extends Mw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ju(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ju(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ju(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M$(t){return XM(t.auth,new qw(t),t.bypassAuthState)}function z$(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),u$(n,new qw(t),t.bypassAuthState)}async function L$(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),c$(n,new qw(t),t.bypassAuthState)}class oz{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M$;case"linkViaPopup":case"linkViaRedirect":return L$;case"reauthViaPopup":case"reauthViaRedirect":return z$;default:hs(this.auth,"internal-error")}}resolve(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const q$=new Jf(2e3,1e4);class Ku extends oz{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ku.currentPopupAction&&Ku.currentPopupAction.cancel(),Ku.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){qa(this.filter.length===1,"Popup operations only handle one event");const e=Lw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ku.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q$.get())};e()}}Ku.currentPopupAction=null;const U$="pendingRedirect",Og=new Map;class V$ extends oz{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Og.get(this.auth._key());if(!e){try{const r=await B$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Og.set(this.auth._key(),e)}return this.bypassAuthState||Og.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B$(t,e){const n=H$(e),r=F$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function $$(t,e){Og.set(t._key(),e)}function F$(t){return Ia(t._redirectPersistence)}function H$(t){return Pg(U$,t.config.apiKey,t.name)}async function G$(t,e,n=!1){if(hi(t.app))return Promise.reject(ka(t));const r=zc(t),i=D$(r,e),c=await new V$(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const K$=600*1e3;class Q${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!lz(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K$&&this.cachedEventUids.clear(),this.cachedEventUids.has(A2(e))}saveEventToCache(e){this.cachedEventUids.add(A2(e)),this.lastProcessedEventTime=Date.now()}}function A2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lz({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function W$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lz(t);default:return!1}}async function Y$(t,e={}){return Xa(t,"GET","/v1/projects",e)}const X$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J$=/^https?/;async function Z$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Y$(t);for(const n of e)try{if(eF(n))return}catch{}hs(t,"unauthorized-domain")}function eF(t){const e=W1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!J$.test(n))return!1;if(X$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const tF=new Jf(3e4,6e4);function T2(){const t=Hs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nF(t){return new Promise((e,n)=>{function r(){T2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T2(),n(Fs(t,"network-request-failed"))},timeout:tF.get()})}if(Hs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hs().gapi?.load)r();else{const i=H7("iframefcb");return Hs()[i]=()=>{gapi.load?r():n(Fs(t,"network-request-failed"))},GM(`${F7()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw Rg=null,e})}let Rg=null;function rF(t){return Rg=Rg||nF(t),Rg}const iF=new Jf(5e3,15e3),sF="__/auth/iframe",aF="emulator/auth/iframe",oF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cF(t){const e=t.config;Qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rw(e,aF):`https://${t.config.authDomain}/${sF}`,r={apiKey:e.apiKey,appName:t.name,v:Mc},i=lF.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Xf(r).slice(1)}`}async function uF(t){const e=await rF(t),n=Hs().gapi;return Qe(n,t,"internal-error"),e.open({where:document.body,url:cF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oF,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Fs(t,"network-request-failed"),u=Hs().setTimeout(()=>{o(c)},iF.get());function h(){Hs().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(c)})}))}const dF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hF=500,fF=600,mF="_blank",pF="http://localhost";class C2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gF(t,e,n,r=hF,i=fF){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...dF,width:r.toString(),height:i.toString(),top:o,left:c},f=wr().toLowerCase();n&&(u=qM(f)?mF:n),zM(f)&&(e=e||pF,h.scrollbars="yes");const p=Object.entries(h).reduce((y,[x,N])=>`${y}${x}=${N},`,"");if(D7(f)&&u!=="_self")return vF(e||"",u),new C2(null);const g=window.open(e||"",u,p);Qe(g,t,"popup-blocked");try{g.focus()}catch{}return new C2(g)}function vF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const yF="__/auth/handler",bF="emulator/auth/handler",xF=encodeURIComponent("fac");async function I2(t,e,n,r,i,o){Qe(t.config.authDomain,t,"auth-domain-config-required"),Qe(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mc,eventId:i};if(e instanceof WM){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",rB(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))c[p]=g}if(e instanceof em){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await t._getAppCheckToken(),f=h?`#${xF}=${encodeURIComponent(h)}`:"";return`${_F(t)}?${Xf(u).slice(1)}${f}`}function _F({config:t}){return t.emulator?Rw(t,bF):`https://${t.authDomain}/${yF}`}const Bx="webStorageSupport";class jF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nz,this._completeRedirectFn=G$,this._overrideRedirectResult=$$}async _openPopup(e,n,r,i){qa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await I2(e,n,r,W1(),i);return gF(e,o,Lw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await I2(e,n,r,W1(),i);return E$(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(qa(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uF(e),r=new Q$(e);return n.register("authEvent",i=>(Qe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bx,{type:Bx},i=>{const o=i?.[0]?.[Bx];o!==void 0&&n(!!o),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FM()||LM()||Dw()}}const wF=jF;var P2="@firebase/auth",O2="1.12.0";class NF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function EF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SF(t){xc(new ll("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HM(t)},f=new V7(r,i,o,h);return X7(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xc(new ll("auth-internal",e=>{const n=zc(e.getProvider("auth").getImmediate());return(r=>new NF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(P2,O2,EF(t)),$s(P2,O2,"esm2020")}const AF=300,TF=jM("authIdTokenMaxAge")||AF;let R2=null;const CF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TF)return;const i=n?.token;R2!==i&&(R2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IF(t=Pw()){const e=gy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Y7(t,{popupRedirectResolver:wF,persistence:[k$,j$,nz]}),r=jM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=CF(o.toString());v$(n,c,()=>c(n.currentUser)),g$(n,u=>c(u))}}const i=bM("auth");return i&&J7(n,`http://${i}`),n}function PF(){return document.getElementsByTagName("head")?.[0]??document}B7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Fs("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",PF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SF("Browser");var k2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var il,cz;(function(){var t;function e(D,P){function k(){}k.prototype=P.prototype,D.F=P.prototype,D.prototype=new k,D.prototype.constructor=D,D.D=function(q,L,z){for(var V=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)V[ve-2]=arguments[ve];return P.prototype[L].apply(q,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,P,k){k||(k=0);const q=Array(16);if(typeof P=="string")for(var L=0;L<16;++L)q[L]=P.charCodeAt(k++)|P.charCodeAt(k++)<<8|P.charCodeAt(k++)<<16|P.charCodeAt(k++)<<24;else for(L=0;L<16;++L)q[L]=P[k++]|P[k++]<<8|P[k++]<<16|P[k++]<<24;P=D.g[0],k=D.g[1],L=D.g[2];let z=D.g[3],V;V=P+(z^k&(L^z))+q[0]+3614090360&4294967295,P=k+(V<<7&4294967295|V>>>25),V=z+(L^P&(k^L))+q[1]+3905402710&4294967295,z=P+(V<<12&4294967295|V>>>20),V=L+(k^z&(P^k))+q[2]+606105819&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(P^L&(z^P))+q[3]+3250441966&4294967295,k=L+(V<<22&4294967295|V>>>10),V=P+(z^k&(L^z))+q[4]+4118548399&4294967295,P=k+(V<<7&4294967295|V>>>25),V=z+(L^P&(k^L))+q[5]+1200080426&4294967295,z=P+(V<<12&4294967295|V>>>20),V=L+(k^z&(P^k))+q[6]+2821735955&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(P^L&(z^P))+q[7]+4249261313&4294967295,k=L+(V<<22&4294967295|V>>>10),V=P+(z^k&(L^z))+q[8]+1770035416&4294967295,P=k+(V<<7&4294967295|V>>>25),V=z+(L^P&(k^L))+q[9]+2336552879&4294967295,z=P+(V<<12&4294967295|V>>>20),V=L+(k^z&(P^k))+q[10]+4294925233&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(P^L&(z^P))+q[11]+2304563134&4294967295,k=L+(V<<22&4294967295|V>>>10),V=P+(z^k&(L^z))+q[12]+1804603682&4294967295,P=k+(V<<7&4294967295|V>>>25),V=z+(L^P&(k^L))+q[13]+4254626195&4294967295,z=P+(V<<12&4294967295|V>>>20),V=L+(k^z&(P^k))+q[14]+2792965006&4294967295,L=z+(V<<17&4294967295|V>>>15),V=k+(P^L&(z^P))+q[15]+1236535329&4294967295,k=L+(V<<22&4294967295|V>>>10),V=P+(L^z&(k^L))+q[1]+4129170786&4294967295,P=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(P^k))+q[6]+3225465664&4294967295,z=P+(V<<9&4294967295|V>>>23),V=L+(P^k&(z^P))+q[11]+643717713&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^P&(L^z))+q[0]+3921069994&4294967295,k=L+(V<<20&4294967295|V>>>12),V=P+(L^z&(k^L))+q[5]+3593408605&4294967295,P=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(P^k))+q[10]+38016083&4294967295,z=P+(V<<9&4294967295|V>>>23),V=L+(P^k&(z^P))+q[15]+3634488961&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^P&(L^z))+q[4]+3889429448&4294967295,k=L+(V<<20&4294967295|V>>>12),V=P+(L^z&(k^L))+q[9]+568446438&4294967295,P=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(P^k))+q[14]+3275163606&4294967295,z=P+(V<<9&4294967295|V>>>23),V=L+(P^k&(z^P))+q[3]+4107603335&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^P&(L^z))+q[8]+1163531501&4294967295,k=L+(V<<20&4294967295|V>>>12),V=P+(L^z&(k^L))+q[13]+2850285829&4294967295,P=k+(V<<5&4294967295|V>>>27),V=z+(k^L&(P^k))+q[2]+4243563512&4294967295,z=P+(V<<9&4294967295|V>>>23),V=L+(P^k&(z^P))+q[7]+1735328473&4294967295,L=z+(V<<14&4294967295|V>>>18),V=k+(z^P&(L^z))+q[12]+2368359562&4294967295,k=L+(V<<20&4294967295|V>>>12),V=P+(k^L^z)+q[5]+4294588738&4294967295,P=k+(V<<4&4294967295|V>>>28),V=z+(P^k^L)+q[8]+2272392833&4294967295,z=P+(V<<11&4294967295|V>>>21),V=L+(z^P^k)+q[11]+1839030562&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^P)+q[14]+4259657740&4294967295,k=L+(V<<23&4294967295|V>>>9),V=P+(k^L^z)+q[1]+2763975236&4294967295,P=k+(V<<4&4294967295|V>>>28),V=z+(P^k^L)+q[4]+1272893353&4294967295,z=P+(V<<11&4294967295|V>>>21),V=L+(z^P^k)+q[7]+4139469664&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^P)+q[10]+3200236656&4294967295,k=L+(V<<23&4294967295|V>>>9),V=P+(k^L^z)+q[13]+681279174&4294967295,P=k+(V<<4&4294967295|V>>>28),V=z+(P^k^L)+q[0]+3936430074&4294967295,z=P+(V<<11&4294967295|V>>>21),V=L+(z^P^k)+q[3]+3572445317&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^P)+q[6]+76029189&4294967295,k=L+(V<<23&4294967295|V>>>9),V=P+(k^L^z)+q[9]+3654602809&4294967295,P=k+(V<<4&4294967295|V>>>28),V=z+(P^k^L)+q[12]+3873151461&4294967295,z=P+(V<<11&4294967295|V>>>21),V=L+(z^P^k)+q[15]+530742520&4294967295,L=z+(V<<16&4294967295|V>>>16),V=k+(L^z^P)+q[2]+3299628645&4294967295,k=L+(V<<23&4294967295|V>>>9),V=P+(L^(k|~z))+q[0]+4096336452&4294967295,P=k+(V<<6&4294967295|V>>>26),V=z+(k^(P|~L))+q[7]+1126891415&4294967295,z=P+(V<<10&4294967295|V>>>22),V=L+(P^(z|~k))+q[14]+2878612391&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~P))+q[5]+4237533241&4294967295,k=L+(V<<21&4294967295|V>>>11),V=P+(L^(k|~z))+q[12]+1700485571&4294967295,P=k+(V<<6&4294967295|V>>>26),V=z+(k^(P|~L))+q[3]+2399980690&4294967295,z=P+(V<<10&4294967295|V>>>22),V=L+(P^(z|~k))+q[10]+4293915773&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~P))+q[1]+2240044497&4294967295,k=L+(V<<21&4294967295|V>>>11),V=P+(L^(k|~z))+q[8]+1873313359&4294967295,P=k+(V<<6&4294967295|V>>>26),V=z+(k^(P|~L))+q[15]+4264355552&4294967295,z=P+(V<<10&4294967295|V>>>22),V=L+(P^(z|~k))+q[6]+2734768916&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~P))+q[13]+1309151649&4294967295,k=L+(V<<21&4294967295|V>>>11),V=P+(L^(k|~z))+q[4]+4149444226&4294967295,P=k+(V<<6&4294967295|V>>>26),V=z+(k^(P|~L))+q[11]+3174756917&4294967295,z=P+(V<<10&4294967295|V>>>22),V=L+(P^(z|~k))+q[2]+718787259&4294967295,L=z+(V<<15&4294967295|V>>>17),V=k+(z^(L|~P))+q[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+z&4294967295}r.prototype.v=function(D,P){P===void 0&&(P=D.length);const k=P-this.blockSize,q=this.C;let L=this.h,z=0;for(;z<P;){if(L==0)for(;z<=k;)i(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<P;)if(q[L++]=D.charCodeAt(z++),L==this.blockSize){i(this,q),L=0;break}}else for(;z<P;)if(q[L++]=D[z++],L==this.blockSize){i(this,q),L=0;break}}this.h=L,this.o+=P},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;P=this.o*8;for(var k=D.length-8;k<D.length;++k)D[k]=P&255,P/=256;for(this.v(D),D=Array(16),P=0,k=0;k<4;++k)for(let q=0;q<32;q+=8)D[P++]=this.g[k]>>>q&255;return D};function o(D,P){var k=u;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=P(D)}function c(D,P){this.h=P;const k=[];let q=!0;for(let L=D.length-1;L>=0;L--){const z=D[L]|0;q&&z==P||(k[L]=z,q=!1)}this.g=k}var u={};function h(D){return-128<=D&&D<128?o(D,function(P){return new c([P|0],P<0?-1:0)}):new c([D|0],D<0?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return E(f(-D));const P=[];let k=1;for(let q=0;D>=k;q++)P[q]=D/k|0,k*=4294967296;return new c(P,0)}function p(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return E(p(D.substring(1),P));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(P,8));let q=g;for(let z=0;z<D.length;z+=8){var L=Math.min(8,D.length-z);const V=parseInt(D.substring(z,z+L),P);L<8?(L=f(Math.pow(P,L)),q=q.j(L).add(f(V))):(q=q.j(k),q=q.add(f(V)))}return q}var g=h(0),y=h(1),x=h(16777216);t=c.prototype,t.m=function(){if(j(this))return-E(this).m();let D=0,P=1;for(let k=0;k<this.g.length;k++){const q=this.i(k);D+=(q>=0?q:4294967296+q)*P,P*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(N(this))return"0";if(j(this))return"-"+E(this).toString(D);const P=f(Math.pow(D,6));var k=this;let q="";for(;;){const L=I(k,P).g;k=A(k,L.j(P));let z=((k.g.length>0?k.g[0]:k.h)>>>0).toString(D);if(k=L,N(k))return z+q;for(;z.length<6;)z="0"+z;q=z+q}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function N(D){if(D.h!=0)return!1;for(let P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function j(D){return D.h==-1}t.l=function(D){return D=A(this,D),j(D)?-1:N(D)?0:1};function E(D){const P=D.g.length,k=[];for(let q=0;q<P;q++)k[q]=~D.g[q];return new c(k,~D.h).add(y)}t.abs=function(){return j(this)?E(this):this},t.add=function(D){const P=Math.max(this.g.length,D.g.length),k=[];let q=0;for(let L=0;L<=P;L++){let z=q+(this.i(L)&65535)+(D.i(L)&65535),V=(z>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);q=V>>>16,z&=65535,V&=65535,k[L]=V<<16|z}return new c(k,k[k.length-1]&-2147483648?-1:0)};function A(D,P){return D.add(E(P))}t.j=function(D){if(N(this)||N(D))return g;if(j(this))return j(D)?E(this).j(E(D)):E(E(this).j(D));if(j(D))return E(this.j(E(D)));if(this.l(x)<0&&D.l(x)<0)return f(this.m()*D.m());const P=this.g.length+D.g.length,k=[];for(var q=0;q<2*P;q++)k[q]=0;for(q=0;q<this.g.length;q++)for(let L=0;L<D.g.length;L++){const z=this.i(q)>>>16,V=this.i(q)&65535,ve=D.i(L)>>>16,ee=D.i(L)&65535;k[2*q+2*L]+=V*ee,R(k,2*q+2*L),k[2*q+2*L+1]+=z*ee,R(k,2*q+2*L+1),k[2*q+2*L+1]+=V*ve,R(k,2*q+2*L+1),k[2*q+2*L+2]+=z*ve,R(k,2*q+2*L+2)}for(D=0;D<P;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=P;D<2*P;D++)k[D]=0;return new c(k,0)};function R(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function T(D,P){this.g=D,this.h=P}function I(D,P){if(N(P))throw Error("division by zero");if(N(D))return new T(g,g);if(j(D))return P=I(E(D),P),new T(E(P.g),E(P.h));if(j(P))return P=I(D,E(P)),new T(E(P.g),P.h);if(D.g.length>30){if(j(D)||j(P))throw Error("slowDivide_ only works with positive integers.");for(var k=y,q=P;q.l(D)<=0;)k=M(k),q=M(q);var L=B(k,1),z=B(q,1);for(q=B(q,2),k=B(k,2);!N(q);){var V=z.add(q);V.l(D)<=0&&(L=L.add(k),z=V),q=B(q,1),k=B(k,1)}return P=A(D,L.j(P)),new T(L,P)}for(L=g;D.l(P)>=0;){for(k=Math.max(1,Math.floor(D.m()/P.m())),q=Math.ceil(Math.log(k)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),z=f(k),V=z.j(P);j(V)||V.l(D)>0;)k-=q,z=f(k),V=z.j(P);N(z)&&(z=y),L=L.add(z),D=A(D,V)}return new T(L,D)}t.B=function(D){return I(this,D).h},t.and=function(D){const P=Math.max(this.g.length,D.g.length),k=[];for(let q=0;q<P;q++)k[q]=this.i(q)&D.i(q);return new c(k,this.h&D.h)},t.or=function(D){const P=Math.max(this.g.length,D.g.length),k=[];for(let q=0;q<P;q++)k[q]=this.i(q)|D.i(q);return new c(k,this.h|D.h)},t.xor=function(D){const P=Math.max(this.g.length,D.g.length),k=[];for(let q=0;q<P;q++)k[q]=this.i(q)^D.i(q);return new c(k,this.h^D.h)};function M(D){const P=D.g.length+1,k=[];for(let q=0;q<P;q++)k[q]=D.i(q)<<1|D.i(q-1)>>>31;return new c(k,D.h)}function B(D,P){const k=P>>5;P%=32;const q=D.g.length-k,L=[];for(let z=0;z<q;z++)L[z]=P>0?D.i(z+k)>>>P|D.i(z+k+1)<<32-P:D.i(z+k);return new c(L,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cz=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=p,il=c}).apply(typeof k2<"u"?k2:typeof self<"u"?self:typeof window<"u"?window:{});var eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uz,tf,dz,kg,Z1,hz,fz,mz;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof eg=="object"&&eg];for(var S=0;S<v.length;++S){var O=v[S];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(v,S){if(S)e:{var O=r;v=v.split(".");for(var $=0;$<v.length-1;$++){var ie=v[$];if(!(ie in O))break e;O=O[ie]}v=v[v.length-1],$=O[v],S=S($),S!=$&&S!=null&&e(O,v,{configurable:!0,writable:!0,value:S})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(S){var O=[],$;for($ in S)Object.prototype.hasOwnProperty.call(S,$)&&O.push([$,S[$]]);return O}});var o=o||{},c=this||self;function u(v){var S=typeof v;return S=="object"&&v!=null||S=="function"}function h(v,S,O){return v.call.apply(v.bind,arguments)}function f(v,S,O){return f=h,f.apply(null,arguments)}function p(v,S){var O=Array.prototype.slice.call(arguments,1);return function(){var $=O.slice();return $.push.apply($,arguments),v.apply(this,$)}}function g(v,S){function O(){}O.prototype=S.prototype,v.Z=S.prototype,v.prototype=new O,v.prototype.constructor=v,v.Ob=function($,ie,pe){for(var Te=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)Te[rt-2]=arguments[rt];return S.prototype[ie].apply($,Te)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function x(v){const S=v.length;if(S>0){const O=Array(S);for(let $=0;$<S;$++)O[$]=v[$];return O}return[]}function N(v,S){for(let $=1;$<arguments.length;$++){const ie=arguments[$];var O=typeof ie;if(O=O!="object"?O:ie?Array.isArray(ie)?"array":O:"null",O=="array"||O=="object"&&typeof ie.length=="number"){O=v.length||0;const pe=ie.length||0;v.length=O+pe;for(let Te=0;Te<pe;Te++)v[O+Te]=ie[Te]}else v.push(ie)}}class j{constructor(S,O){this.i=S,this.j=O,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function E(v){c.setTimeout(()=>{throw v},0)}function A(){var v=D;let S=null;return v.g&&(S=v.g,v.g=v.g.next,v.g||(v.h=null),S.next=null),S}class R{constructor(){this.h=this.g=null}add(S,O){const $=T.get();$.set(S,O),this.h?this.h.next=$:this.g=$,this.h=$}}var T=new j(()=>new I,v=>v.reset());class I{constructor(){this.next=this.g=this.h=null}set(S,O){this.h=S,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let M,B=!1,D=new R,P=()=>{const v=Promise.resolve(void 0);M=()=>{v.then(k)}};function k(){for(var v;v=A();){try{v.h.call(v.g)}catch(O){E(O)}var S=T;S.j(v),S.h<100&&(S.h++,v.next=S.g,S.g=v)}B=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,S){this.type=v,this.g=this.target=S,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,S=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const O=()=>{};c.addEventListener("test",O,S),c.removeEventListener("test",O,S)}catch{}return v})();function V(v){return/^[\s\xa0]*$/.test(v)}function ve(v,S){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,S)}g(ve,L),ve.prototype.init=function(v,S){const O=this.type=v.type,$=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=S,S=v.relatedTarget,S||(O=="mouseover"?S=v.fromElement:O=="mouseout"&&(S=v.toElement)),this.relatedTarget=S,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),H=0;function se(v,S,O,$,ie){this.listener=v,this.proxy=null,this.src=S,this.type=O,this.capture=!!$,this.ha=ie,this.key=++H,this.da=this.fa=!1}function X(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function we(v,S,O){for(const $ in v)S.call(O,v[$],$,v)}function W(v,S){for(const O in v)S.call(void 0,v[O],O,v)}function F(v){const S={};for(const O in v)S[O]=v[O];return S}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(v,S){let O,$;for(let ie=1;ie<arguments.length;ie++){$=arguments[ie];for(O in $)v[O]=$[O];for(let pe=0;pe<re.length;pe++)O=re[pe],Object.prototype.hasOwnProperty.call($,O)&&(v[O]=$[O])}}function ye(v){this.src=v,this.g={},this.h=0}ye.prototype.add=function(v,S,O,$,ie){const pe=v.toString();v=this.g[pe],v||(v=this.g[pe]=[],this.h++);const Te=G(v,S,$,ie);return Te>-1?(S=v[Te],O||(S.fa=!1)):(S=new se(S,this.src,pe,!!$,ie),S.fa=O,v.push(S)),S};function he(v,S){const O=S.type;if(O in v.g){var $=v.g[O],ie=Array.prototype.indexOf.call($,S,void 0),pe;(pe=ie>=0)&&Array.prototype.splice.call($,ie,1),pe&&(X(S),v.g[O].length==0&&(delete v.g[O],v.h--))}}function G(v,S,O,$){for(let ie=0;ie<v.length;++ie){const pe=v[ie];if(!pe.da&&pe.listener==S&&pe.capture==!!O&&pe.ha==$)return ie}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Ie={};function ae(v,S,O,$,ie){if(Array.isArray(S)){for(let pe=0;pe<S.length;pe++)ae(v,S[pe],O,$,ie);return null}return O=on(O),v&&v[ee]?v.J(S,O,u($)?!!$.capture:!1,ie):Z(v,S,O,!1,$,ie)}function Z(v,S,O,$,ie,pe){if(!S)throw Error("Invalid event type");const Te=u(ie)?!!ie.capture:!!ie;let rt=Je(v);if(rt||(v[ce]=rt=new ye(v)),O=rt.add(S,O,$,Te,pe),O.proxy)return O;if($=Q(),O.proxy=$,$.src=v,$.listener=O,v.addEventListener)z||(ie=Te),ie===void 0&&(ie=!1),v.addEventListener(S.toString(),$,ie);else if(v.attachEvent)v.attachEvent(Ae(S.toString()),$);else if(v.addListener&&v.removeListener)v.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Q(){function v(O){return S.call(v.src,v.listener,O)}const S=Ke;return v}function me(v,S,O,$,ie){if(Array.isArray(S))for(var pe=0;pe<S.length;pe++)me(v,S[pe],O,$,ie);else $=u($)?!!$.capture:!!$,O=on(O),v&&v[ee]?(v=v.i,pe=String(S).toString(),pe in v.g&&(S=v.g[pe],O=G(S,O,$,ie),O>-1&&(X(S[O]),Array.prototype.splice.call(S,O,1),S.length==0&&(delete v.g[pe],v.h--)))):v&&(v=Je(v))&&(S=v.g[S.toString()],v=-1,S&&(v=G(S,O,$,ie)),(O=v>-1?S[v]:null)&&J(O))}function J(v){if(typeof v!="number"&&v&&!v.da){var S=v.src;if(S&&S[ee])he(S.i,v);else{var O=v.type,$=v.proxy;S.removeEventListener?S.removeEventListener(O,$,v.capture):S.detachEvent?S.detachEvent(Ae(O),$):S.addListener&&S.removeListener&&S.removeListener($),(O=Je(S))?(he(O,v),O.h==0&&(O.src=null,S[ce]=null)):X(v)}}}function Ae(v){return v in Ie?Ie[v]:Ie[v]="on"+v}function Ke(v,S){if(v.da)v=!0;else{S=new ve(S,this);const O=v.listener,$=v.ha||v.src;v.fa&&J(v),v=O.call($,S)}return v}function Je(v){return v=v[ce],v instanceof ye?v:null}var ot="__closure_events_fn_"+(Math.random()*1e9>>>0);function on(v){return typeof v=="function"?v:(v[ot]||(v[ot]=function(S){return v.handleEvent(S)}),v[ot])}function Rt(){q.call(this),this.i=new ye(this),this.M=this,this.G=null}g(Rt,q),Rt.prototype[ee]=!0,Rt.prototype.removeEventListener=function(v,S,O,$){me(this,v,S,O,$)};function kt(v,S){var O,$=v.G;if($)for(O=[];$;$=$.G)O.push($);if(v=v.M,$=S.type||S,typeof S=="string")S=new L(S,v);else if(S instanceof L)S.target=S.target||v;else{var ie=S;S=new L($,v),de(S,ie)}ie=!0;let pe,Te;if(O)for(Te=O.length-1;Te>=0;Te--)pe=S.g=O[Te],ie=Lr(pe,$,!0,S)&&ie;if(pe=S.g=v,ie=Lr(pe,$,!0,S)&&ie,ie=Lr(pe,$,!1,S)&&ie,O)for(Te=0;Te<O.length;Te++)pe=S.g=O[Te],ie=Lr(pe,$,!1,S)&&ie}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var v=this.i;for(const S in v.g){const O=v.g[S];for(let $=0;$<O.length;$++)X(O[$]);delete v.g[S],v.h--}}this.G=null},Rt.prototype.J=function(v,S,O,$){return this.i.add(String(v),S,!1,O,$)},Rt.prototype.K=function(v,S,O,$){return this.i.add(String(v),S,!0,O,$)};function Lr(v,S,O,$){if(S=v.i.g[String(S)],!S)return!0;S=S.concat();let ie=!0;for(let pe=0;pe<S.length;++pe){const Te=S[pe];if(Te&&!Te.da&&Te.capture==O){const rt=Te.listener,bn=Te.ha||Te.src;Te.fa&&he(v.i,Te),ie=rt.call(bn,$)!==!1&&ie}}return ie&&!$.defaultPrevented}function be(v,S){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=f(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(v,S||0)}function De(v){v.g=be(()=>{v.g=null,v.i&&(v.i=!1,De(v))},v.l);const S=v.h;v.h=null,v.m.apply(null,S)}class Be extends q{constructor(S,O){super(),this.m=S,this.l=O,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:De(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(v){q.call(this),this.h=v,this.g={}}g(Ye,q);var Vt=[];function Un(v){we(v.g,function(S,O){this.g.hasOwnProperty(O)&&J(S)},v),v.g={}}Ye.prototype.N=function(){Ye.Z.N.call(this),Un(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=c.JSON.stringify,oo=c.JSON.parse,Ur=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Hi(){}function Kc(){}var ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function At(){L.call(this,"d")}g(At,L);function Vr(){L.call(this,"c")}g(Vr,L);var nn={},Sl=null;function lo(){return Sl=Sl||new Rt}nn.Ia="serverreachability";function Qc(v){L.call(this,nn.Ia,v)}g(Qc,L);function xi(v){const S=lo();kt(S,new Qc(S))}nn.STAT_EVENT="statevent";function aa(v,S){L.call(this,nn.STAT_EVENT,v),this.stat=S}g(aa,L);function cn(v){const S=lo();kt(S,new aa(S,v))}nn.Ja="timingevent";function _i(v,S){L.call(this,nn.Ja,v),this.size=S}g(_i,L);function gr(v,S){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},S)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function ne(v,S,O,$,ie,pe){v.info(function(){if(v.g)if(pe){var Te="",rt=pe.split("&");for(let Nt=0;Nt<rt.length;Nt++){var bn=rt[Nt].split("=");if(bn.length>1){const Xt=bn[0];bn=bn[1];const Si=Xt.split("_");Te=Si.length>=2&&Si[1]=="type"?Te+(Xt+"="+bn+"&"):Te+(Xt+"=redacted&")}}}else Te=null;else Te=pe;return"XMLHTTP REQ ("+$+") [attempt "+ie+"]: "+S+`
`+O+`
`+Te})}function Ve(v,S,O,$,ie,pe,Te){v.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ie+"]: "+S+`
`+O+`
`+pe+" "+Te})}function bt(v,S,O,$){v.info(function(){return"XMLHTTP TEXT ("+S+"): "+Al(v,O)+($?" "+$:"")})}function Gn(v,S){v.info(function(){return"TIMEOUT: "+S})}ni.prototype.info=function(){};function Al(v,S){if(!v.g)return S;if(!S)return null;try{const pe=JSON.parse(S);if(pe){for(v=0;v<pe.length;v++)if(Array.isArray(pe[v])){var O=pe[v];if(!(O.length<2)){var $=O[1];if(Array.isArray($)&&!($.length<1)){var ie=$[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Te=1;Te<$.length;Te++)$[Te]=""}}}}return qr(pe)}catch{return S}}var ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ud;function Tl(){}g(Tl,Hi),Tl.prototype.g=function(){return new XMLHttpRequest},Ud=new Tl;function oa(v){return encodeURIComponent(String(v))}function Pm(v){var S=1;v=v.split(":");const O=[];for(;S>0&&v.length;)O.push(v.shift()),S--;return v.length&&O.push(v.join(":")),O}function Gi(v,S,O,$){this.j=v,this.i=S,this.l=O,this.S=$||1,this.V=new Ye(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ki}function Ki(){this.i=null,this.g="",this.h=!1}var Sn={},Kn={};function ys(v,S,O){v.M=1,v.A=Cl(Tn(S)),v.u=O,v.R=!0,Wc(v,null)}function Wc(v,S){v.F=Date.now(),bs(v),v.B=Tn(v.A);var O=v.B,$=v.S;Array.isArray($)||($=[String($)]),Zc(O.i,"t",$),v.C=0,O=v.j.L,v.h=new Ki,v.g=Gm(v.j,O?S:null,!v.u),v.P>0&&(v.O=new Be(f(v.Y,v,v.g),v.P)),S=v.V,O=v.g,$=v.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(Vt[0]=ie.toString()),ie=Vt);for(let pe=0;pe<ie.length;pe++){const Te=ae(O,ie[pe],$||S.handleEvent,!1,S.h||S);if(!Te)break;S.g[Te.key]=Te}S=v.J?F(v.J):{},v.u?(v.v||(v.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,S)):(v.v="GET",v.g.ea(v.B,v.v,null,S)),xi(),ne(v.i,v.v,v.B,v.l,v.S,v.u)}Gi.prototype.ba=function(v){v=v.target;const S=this.O;S&&Yi(v)==3?S.j():this.Y(v)},Gi.prototype.Y=function(v){try{if(v==this.g)e:{const rt=Yi(this.g),bn=this.g.ya(),Nt=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||sr(this.g)))){this.K||rt!=4||bn==7||(bn==8||Nt<=0?xi(3):xi(2)),xs(this);var S=this.g.ca();this.X=S;var O=D0(this);if(this.o=S==200,Ve(this.i,this.v,this.B,this.l,this.S,rt,S),this.o){if(this.U&&!this.L){t:{if(this.g){var $,ie=this.g;if(($=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V($)){var pe=$;break t}}pe=null}if(v=pe)bt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_s(this,v);else{this.o=!1,this.m=3,cn(12),ri(this),wi(this);break e}}if(this.R){v=!0;let Xt;for(;!this.K&&this.C<O.length;)if(Xt=Rm(this,O),Xt==Kn){rt==4&&(this.m=4,cn(14),v=!1),bt(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Sn){this.m=4,cn(15),bt(this.i,this.l,O,"[Invalid Chunk]"),v=!1;break}else bt(this.i,this.l,Xt,null),_s(this,Xt);if(Om(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||O.length!=0||this.h.h||(this.m=1,cn(16),v=!1),this.o=this.o&&v,!v)bt(this.i,this.l,O,"[Invalid Chunked Response]"),ri(this),wi(this);else if(O.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),th(Te),Te.P=!0,cn(11))}}else bt(this.i,this.l,O,null),_s(this,O);rt==4&&ri(this),this.o&&!this.K&&(rt==4?Bm(this.j,this):(this.o=!1,bs(this)))}else ca(this.g),S==400&&O.indexOf("Unknown SID")>0?(this.m=3,cn(12)):(this.m=0,cn(13)),ri(this),wi(this)}}}catch{}};function D0(v){if(!Om(v))return v.g.la();const S=sr(v.g);if(S==="")return"";let O="";const $=S.length,ie=Yi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return ri(v),wi(v),"";v.h.i=new c.TextDecoder}for(let pe=0;pe<$;pe++)v.h.h=!0,O+=v.h.i.decode(S[pe],{stream:!(ie&&pe==$-1)});return S.length=0,v.h.g+=O,v.C=0,v.h.g}function Om(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Rm(v,S){var O=v.C,$=S.indexOf(`
`,O);return $==-1?Kn:(O=Number(S.substring(O,$)),isNaN(O)?Sn:($+=1,$+O>S.length?Kn:(S=S.slice($,$+O),v.C=$+O,S)))}Gi.prototype.cancel=function(){this.K=!0,ri(this)};function bs(v){v.T=Date.now()+v.H,Yc(v,v.H)}function Yc(v,S){if(v.D!=null)throw Error("WatchDog timer not null");v.D=gr(f(v.aa,v),S)}function xs(v){v.D&&(c.clearTimeout(v.D),v.D=null)}Gi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Gn(this.i,this.B),this.M!=2&&(xi(),cn(17)),ri(this),this.m=2,wi(this)):Yc(this,this.T-v)};function wi(v){v.j.I==0||v.K||Bm(v.j,v)}function ri(v){xs(v);var S=v.O;S&&typeof S.dispose=="function"&&S.dispose(),v.O=null,Un(v.V),v.g&&(S=v.g,v.g=null,S.abort(),S.dispose())}function _s(v,S){try{var O=v.j;if(O.I!=0&&(O.g==v||ws(O.h,v))){if(!v.L&&ws(O.h,v)&&O.I==3){try{var $=O.Ba.g.parse(S)}catch{$=null}if(Array.isArray($)&&$.length==3){var ie=$;if(ie[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<v.F)iu(O),vo(O);else break e;Ml(O),cn(18)}}else O.xa=ie[1],0<O.xa-O.K&&ie[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=gr(f(O.Va,O),6e3));js(O.h)<=1&&O.ta&&(O.ta=void 0)}else Cs(O,11)}else if((v.L||O.g==v)&&iu(O),!V(S))for(ie=O.Ba.g.parse(S),S=0;S<ie.length;S++){let Nt=ie[S];const Xt=Nt[0];if(!(Xt<=O.K))if(O.K=Xt,Nt=Nt[1],O.I==2)if(Nt[0]=="c"){O.M=Nt[1],O.ba=Nt[2];const Si=Nt[3];Si!=null&&(O.ka=Si,O.j.info("VER="+O.ka));const Is=Nt[4];Is!=null&&(O.za=Is,O.j.info("SVER="+O.za));const Xi=Nt[5];Xi!=null&&typeof Xi=="number"&&Xi>0&&($=1.5*Xi,O.O=$,O.j.info("backChannelRequestTimeoutMs_="+$)),$=O;const Ji=v.g;if(Ji){const zl=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var pe=$.h;pe.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&($d(pe,pe.h),pe.h=null))}if($.G){const su=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&($.wa=su,Tt($.J,$.G,su))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-v.F,O.j.info("Handshake RTT: "+O.T+"ms")),$=O;var Te=v;if($.na=Hm($,$.L?$.ba:null,$.W),Te.L){Fd($.h,Te);var rt=Te,bn=$.O;bn&&(rt.H=bn),rt.D&&(xs(rt),bs(rt)),$.g=Te}else Um($);O.i.length>0&&Ts(O)}else Nt[0]!="stop"&&Nt[0]!="close"||Cs(O,7);else O.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Cs(O,7):Zd(O):Nt[0]!="noop"&&O.l&&O.l.qa(Nt),O.A=0)}}xi(4)}catch{}}var An=class{constructor(v,S){this.g=v,this.map=S}};function Vd(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function js(v){return v.h?1:v.g?v.g.size:0}function ws(v,S){return v.h?v.h==S:v.g?v.g.has(S):!1}function $d(v,S){v.g?v.g.add(S):v.h=S}function Fd(v,S){v.h&&v.h==S?v.h=null:v.g&&v.g.has(S)&&v.g.delete(S)}Vd.prototype.cancel=function(){if(this.i=Hd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Hd(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let S=v.i;for(const O of v.g.values())S=S.concat(O.G);return S}return x(v.i)}var km=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xc(v,S){if(v){v=v.split("&");for(let O=0;O<v.length;O++){const $=v[O].indexOf("=");let ie,pe=null;$>=0?(ie=v[O].substring(0,$),pe=v[O].substring($+1)):ie=v[O],S(ie,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function ii(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;v instanceof ii?(this.l=v.l,Qn(this,v.j),this.o=v.o,this.g=v.g,co(this,v.u),this.h=v.h,Gd(this,Lm(v.i)),this.m=v.m):v&&(S=String(v).match(km))?(this.l=!1,Qn(this,S[1]||"",!0),this.o=Ns(S[2]||""),this.g=Ns(S[3]||"",!0),co(this,S[4]),this.h=Ns(S[5]||"",!0),Gd(this,S[6]||"",!0),this.m=Ns(S[7]||"")):(this.l=!1,this.i=new ho(null,this.l))}ii.prototype.toString=function(){const v=[];var S=this.j;S&&v.push(Il(S,Jc,!0),":");var O=this.g;return(O||S=="file")&&(v.push("//"),(S=this.o)&&v.push(Il(S,Jc,!0),"@"),v.push(oa(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&v.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&v.push("/"),v.push(Il(O,O.charAt(0)=="/"?Kd:Dm,!0))),(O=this.i.toString())&&v.push("?",O),(O=this.m)&&v.push("#",Il(O,Mm)),v.join("")},ii.prototype.resolve=function(v){const S=Tn(this);let O=!!v.j;O?Qn(S,v.j):O=!!v.o,O?S.o=v.o:O=!!v.g,O?S.g=v.g:O=v.u!=null;var $=v.h;if(O)co(S,v.u);else if(O=!!v.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var ie=S.h.lastIndexOf("/");ie!=-1&&($=S.h.slice(0,ie+1)+$)}if(ie=$,ie==".."||ie==".")$="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){$=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const pe=[];for(let Te=0;Te<ie.length;){const rt=ie[Te++];rt=="."?$&&Te==ie.length&&pe.push(""):rt==".."?((pe.length>1||pe.length==1&&pe[0]!="")&&pe.pop(),$&&Te==ie.length&&pe.push("")):(pe.push(rt),$=!0)}$=pe.join("/")}else $=ie}return O?S.h=$:O=v.i.toString()!=="",O?Gd(S,Lm(v.i)):O=!!v.m,O&&(S.m=v.m),S};function Tn(v){return new ii(v)}function Qn(v,S,O){v.j=O?Ns(S,!0):S,v.j&&(v.j=v.j.replace(/:$/,""))}function co(v,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);v.u=S}else v.u=null}function Gd(v,S,O){S instanceof ho?(v.i=S,eu(v.i,v.l)):(O||(S=Il(S,uo)),v.i=new ho(S,v.l))}function Tt(v,S,O){v.i.set(S,O)}function Cl(v){return Tt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Ns(v,S){return v?S?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Il(v,S,O){return typeof v=="string"?(v=encodeURI(v).replace(S,Br),O&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Br(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Jc=/[#\/\?@]/g,Dm=/[#\?:]/g,Kd=/[#\?]/g,uo=/[#\?@]/g,Mm=/#/g;function ho(v,S){this.h=this.g=null,this.i=v||null,this.j=!!S}function $r(v){v.g||(v.g=new Map,v.h=0,v.i&&Xc(v.i,function(S,O){v.add(decodeURIComponent(S.replace(/\+/g," ")),O)}))}t=ho.prototype,t.add=function(v,S){$r(this),this.i=null,v=fo(this,v);let O=this.g.get(v);return O||this.g.set(v,O=[]),O.push(S),this.h+=1,this};function zm(v,S){$r(v),S=fo(v,S),v.g.has(S)&&(v.i=null,v.h-=v.g.get(S).length,v.g.delete(S))}function Qd(v,S){return $r(v),S=fo(v,S),v.g.has(S)}t.forEach=function(v,S){$r(this),this.g.forEach(function(O,$){O.forEach(function(ie){v.call(S,ie,$,this)},this)},this)};function Wd(v,S){$r(v);let O=[];if(typeof S=="string")Qd(v,S)&&(O=O.concat(v.g.get(fo(v,S))));else for(v=Array.from(v.g.values()),S=0;S<v.length;S++)O=O.concat(v[S]);return O}t.set=function(v,S){return $r(this),this.i=null,v=fo(this,v),Qd(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[S]),this.h+=1,this},t.get=function(v,S){return v?(v=Wd(this,v),v.length>0?String(v[0]):S):S};function Zc(v,S,O){zm(v,S),O.length>0&&(v.i=null,v.g.set(fo(v,S),x(O)),v.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],S=Array.from(this.g.keys());for(let $=0;$<S.length;$++){var O=S[$];const ie=oa(O);O=Wd(this,O);for(let pe=0;pe<O.length;pe++){let Te=ie;O[pe]!==""&&(Te+="="+oa(O[pe])),v.push(Te)}}return this.i=v.join("&")};function Lm(v){const S=new ho;return S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),S}function fo(v,S){return S=String(S),v.j&&(S=S.toLowerCase()),S}function eu(v,S){S&&!v.j&&($r(v),v.i=null,v.g.forEach(function(O,$){const ie=$.toLowerCase();$!=ie&&(zm(this,$),Zc(this,ie,O))},v)),v.j=S}function Qi(v,S){const O=new ni;if(c.Image){const $=new Image;$.onload=p(Ni,O,"TestLoadImage: loaded",!0,S,$),$.onerror=p(Ni,O,"TestLoadImage: error",!1,S,$),$.onabort=p(Ni,O,"TestLoadImage: abort",!1,S,$),$.ontimeout=p(Ni,O,"TestLoadImage: timeout",!1,S,$),c.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=v}else S(!1)}function Yd(v,S){const O=new ni,$=new AbortController,ie=setTimeout(()=>{$.abort(),Ni(O,"TestPingServer: timeout",!1,S)},1e4);fetch(v,{signal:$.signal}).then(pe=>{clearTimeout(ie),pe.ok?Ni(O,"TestPingServer: ok",!0,S):Ni(O,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ie),Ni(O,"TestPingServer: error",!1,S)})}function Ni(v,S,O,$,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),$(O)}catch{}}function mo(){this.g=new Ur}function Es(v){this.i=v.Sb||null,this.h=v.ab||!1}g(Es,Hi),Es.prototype.g=function(){return new Pl(this.i,this.h)};function Pl(v,S){Rt.call(this),this.H=v,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Pl,Rt),t=Pl.prototype,t.open=function(v,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=S,this.readyState=1,Wi(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(S.body=v),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,po(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tu(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function tu(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var S=v.value?v.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!v.done}))&&(this.response=this.responseText+=S)}v.done?po(this):Wi(this),this.readyState==3&&tu(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,po(this))},t.Na=function(v){this.g&&(this.response=v,po(this))},t.ga=function(){this.g&&po(this)};function po(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Wi(v)}t.setRequestHeader=function(v,S){this.A.append(v,S)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],S=this.h.entries();for(var O=S.next();!O.done;)O=O.value,v.push(O[0]+": "+O[1]),O=S.next();return v.join(`\r
`)};function Wi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ei(v){let S="";return we(v,function(O,$){S+=$,S+=":",S+=O,S+=`\r
`}),S}function Ol(v,S,O){e:{for($ in O){var $=!1;break e}$=!0}$||(O=Ei(O),typeof v=="string"?O!=null&&oa(O):Tt(v,S,O))}function Dt(v){Rt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Dt,Rt);var Ss=/^https?$/i,Xd=["POST","PUT"];t=Dt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,S,O,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);S=S?S.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ud.g(),this.g.onreadystatechange=y(f(this.Ca,this));try{this.B=!0,this.g.open(S,String(v),!0),this.B=!1}catch(pe){Rl(this,pe);return}if(v=O||"",O=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ie in $)O.set(ie,$[ie]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const pe of $.keys())O.set(pe,$.get(pe));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(O.keys()).find(pe=>pe.toLowerCase()=="content-type"),ie=c.FormData&&v instanceof c.FormData,!(Array.prototype.indexOf.call(Xd,S,void 0)>=0)||$||ie||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,Te]of O)this.g.setRequestHeader(pe,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(pe){Rl(this,pe)}};function Rl(v,S){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=S,v.o=5,Jd(v),la(v)}function Jd(v){v.A||(v.A=!0,kt(v,"complete"),kt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,kt(this,"complete"),kt(this,"abort"),la(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kl(this):this.Xa())},t.Xa=function(){kl(this)};function kl(v){if(v.h&&typeof o<"u"){if(v.v&&Yi(v)==4)setTimeout(v.Ca.bind(v),0);else if(kt(v,"readystatechange"),Yi(v)==4){v.h=!1;try{const pe=v.ca();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var O;if(!(O=S)){var $;if($=pe===0){let Te=String(v.D).match(km)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),$=!Ss.test(Te?Te.toLowerCase():"")}O=$}if(O)kt(v,"complete"),kt(v,"success");else{v.o=6;try{var ie=Yi(v)>2?v.g.statusText:""}catch{ie=""}v.l=ie+" ["+v.ca()+"]",Jd(v)}}finally{la(v)}}}}function la(v,S){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const O=v.g;v.g=null,S||kt(v,"ready");try{O.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yi(v){return v.g?v.g.readyState:0}t.ca=function(){try{return Yi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var S=this.g.responseText;return v&&S.indexOf(v)==0&&(S=S.substring(v.length)),oo(S)}};function sr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(v){const S={};v=(v.g&&Yi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<v.length;$++){if(V(v[$]))continue;var O=Pm(v[$]);const ie=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const pe=S[ie]||[];S[ie]=pe,pe.push(O)}W(S,function($){return $.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(v,S,O){return O&&O.internalChannelParams&&O.internalChannelParams[v]||S}function go(v){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=As("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=As("baseRetryDelayMs",5e3,v),this.Za=As("retryDelaySeedMs",1e4,v),this.Ta=As("forwardChannelMaxRetries",2,v),this.va=As("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Vd(v&&v.concurrentRequestLimit),this.Ba=new mo,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=go.prototype,t.ka=8,t.I=1,t.connect=function(v,S,O,$){cn(0),this.W=v,this.H=S||{},O&&$!==void 0&&(this.H.OSID=O,this.H.OAID=$),this.F=this.X,this.J=Hm(this,null,this.W),Ts(this)};function Zd(v){if(nu(v),v.I==3){var S=v.V++,O=Tn(v.J);if(Tt(O,"SID",v.M),Tt(O,"RID",S),Tt(O,"TYPE","terminate"),Dl(v,O),S=new Gi(v,v.j,S),S.M=2,S.A=Cl(Tn(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!O&&c.Image&&(new Image().src=S.A,O=!0),O||(S.g=Gm(S.j,null),S.g.ea(S.A)),S.F=Date.now(),bs(S)}Fm(v)}function vo(v){v.g&&(th(v),v.g.cancel(),v.g=null)}function nu(v){vo(v),v.v&&(c.clearTimeout(v.v),v.v=null),iu(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&c.clearTimeout(v.m),v.m=null)}function Ts(v){if(!Bd(v.h)&&!v.m){v.m=!0;var S=v.Ea;M||P(),B||(M(),B=!0),D.add(S,v),v.D=0}}function ru(v,S){return js(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=S.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=gr(f(v.Ea,v,S),$m(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ie=new Gi(this,this.j,v);let pe=this.o;if(this.U&&(pe?(pe=F(pe),de(pe,this.U)):pe=this.U),this.u!==null||this.R||(ie.J=pe,pe=null),this.S)e:{for(var S=0,O=0;O<this.i.length;O++){t:{var $=this.i[O];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(S+=$,S>4096){S=O;break e}if(S===4096||O===this.i.length-1){S=O+1;break e}}S=1e3}else S=1e3;S=qm(this,ie,S),O=Tn(this.J),Tt(O,"RID",v),Tt(O,"CVER",22),this.G&&Tt(O,"X-HTTP-Session-Id",this.G),Dl(this,O),pe&&(this.R?S="headers="+oa(Ei(pe))+"&"+S:this.u&&Ol(O,this.u,pe)),$d(this.h,ie),this.Ra&&Tt(O,"TYPE","init"),this.S?(Tt(O,"$req",S),Tt(O,"SID","null"),ie.U=!0,ys(ie,O,null)):ys(ie,O,S),this.I=2}}else this.I==3&&(v?eh(this,v):this.i.length==0||Bd(this.h)||eh(this))};function eh(v,S){var O;S?O=S.l:O=v.V++;const $=Tn(v.J);Tt($,"SID",v.M),Tt($,"RID",O),Tt($,"AID",v.K),Dl(v,$),v.u&&v.o&&Ol($,v.u,v.o),O=new Gi(v,v.j,O,v.D+1),v.u===null&&(O.J=v.o),S&&(v.i=S.G.concat(v.i)),S=qm(v,O,1e3),O.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),$d(v.h,O),ys(O,$,S)}function Dl(v,S){v.H&&we(v.H,function(O,$){Tt(S,$,O)}),v.l&&we({},function(O,$){Tt(S,$,O)})}function qm(v,S,O){O=Math.min(v.i.length,O);const $=v.l?f(v.l.Ka,v.l,v):null;e:{var ie=v.i;let rt=-1;for(;;){const bn=["count="+O];rt==-1?O>0?(rt=ie[0].g,bn.push("ofs="+rt)):rt=0:bn.push("ofs="+rt);let Nt=!0;for(let Xt=0;Xt<O;Xt++){var pe=ie[Xt].g;const Si=ie[Xt].map;if(pe-=rt,pe<0)rt=Math.max(0,ie[Xt].g-100),Nt=!1;else try{pe="req"+pe+"_"||"";try{var Te=Si instanceof Map?Si:Object.entries(Si);for(const[Is,Xi]of Te){let Ji=Xi;u(Xi)&&(Ji=qr(Xi)),bn.push(pe+Is+"="+encodeURIComponent(Ji))}}catch(Is){throw bn.push(pe+"type="+encodeURIComponent("_badmap")),Is}}catch{$&&$(Si)}}if(Nt){Te=bn.join("&");break e}}Te=void 0}return v=v.i.splice(0,O),S.G=v,Te}function Um(v){if(!v.g&&!v.v){v.Y=1;var S=v.Da;M||P(),B||(M(),B=!0),D.add(S,v),v.A=0}}function Ml(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=gr(f(v.Da,v),$m(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,Vm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=gr(f(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,cn(10),vo(this),Vm(this))};function th(v){v.B!=null&&(c.clearTimeout(v.B),v.B=null)}function Vm(v){v.g=new Gi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var S=Tn(v.na);Tt(S,"RID","rpc"),Tt(S,"SID",v.M),Tt(S,"AID",v.K),Tt(S,"CI",v.F?"0":"1"),!v.F&&v.ia&&Tt(S,"TO",v.ia),Tt(S,"TYPE","xmlhttp"),Dl(v,S),v.u&&v.o&&Ol(S,v.u,v.o),v.O&&(v.g.H=v.O);var O=v.g;v=v.ba,O.M=1,O.A=Cl(Tn(S)),O.u=null,O.R=!0,Wc(O,v)}t.Va=function(){this.C!=null&&(this.C=null,vo(this),Ml(this),cn(19))};function iu(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function Bm(v,S){var O=null;if(v.g==S){iu(v),th(v),v.g=null;var $=2}else if(ws(v.h,S))O=S.G,Fd(v.h,S),$=1;else return;if(v.I!=0){if(S.o)if($==1){O=S.u?S.u.length:0,S=Date.now()-S.F;var ie=v.D;$=lo(),kt($,new _i($,O)),Ts(v)}else Um(v);else if(ie=S.m,ie==3||ie==0&&S.X>0||!($==1&&ru(v,S)||$==2&&Ml(v)))switch(O&&O.length>0&&(S=v.h,S.i=S.i.concat(O)),ie){case 1:Cs(v,5);break;case 4:Cs(v,10);break;case 3:Cs(v,6);break;default:Cs(v,2)}}}function $m(v,S){let O=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(O*=2),O*S}function Cs(v,S){if(v.j.info("Error code "+S),S==2){var O=f(v.bb,v),$=v.Ua;const ie=!$;$=new ii($||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qn($,"https"),Cl($),ie?Qi($.toString(),O):Yd($.toString(),O)}else cn(2);v.I=0,v.l&&v.l.pa(S),Fm(v),nu(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function Fm(v){if(v.I=0,v.ja=[],v.l){const S=Hd(v.h);(S.length!=0||v.i.length!=0)&&(N(v.ja,S),N(v.ja,v.i),v.h.i.length=0,x(v.i),v.i.length=0),v.l.oa()}}function Hm(v,S,O){var $=O instanceof ii?Tn(O):new ii(O);if($.g!="")S&&($.g=S+"."+$.g),co($,$.u);else{var ie=c.location;$=ie.protocol,S=S?S+"."+ie.hostname:ie.hostname,ie=+ie.port;const pe=new ii(null);$&&Qn(pe,$),S&&(pe.g=S),ie&&co(pe,ie),O&&(pe.h=O),$=pe}return O=v.G,S=v.wa,O&&S&&Tt($,O,S),Tt($,"VER",v.ka),Dl(v,$),$}function Gm(v,S,O){if(S&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=v.Aa&&!v.ma?new Dt(new Es({ab:O})):new Dt(v.ma),S.Fa(v.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Km(){}t=Km.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yo(){}yo.prototype.g=function(v,S){return new Ar(v,S)};function Ar(v,S){Rt.call(this),this.g=new go(S),this.l=v,this.h=S&&S.messageUrlParams||null,v=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(v?v["X-WebChannel-Content-Type"]=S.messageContentType:v={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(v?v["X-WebChannel-Client-Profile"]=S.sa:v={"X-WebChannel-Client-Profile":S.sa}),this.g.U=v,(v=S&&S.Qb)&&!V(v)&&(this.g.u=v),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!V(S)&&(this.g.G=S,v=this.h,v!==null&&S in v&&(v=this.h,S in v&&delete v[S])),this.j=new ua(this)}g(Ar,Rt),Ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){Zd(this.g)},Ar.prototype.o=function(v){var S=this.g;if(typeof v=="string"){var O={};O.__data__=v,v=O}else this.v&&(O={},O.__data__=qr(v),v=O);S.i.push(new An(S.Ya++,v)),S.I==3&&Ts(S)},Ar.prototype.N=function(){this.g.l=null,delete this.j,Zd(this.g),delete this.g,Ar.Z.N.call(this)};function Qm(v){At.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var S=v.__sm__;if(S){e:{for(const O in S){v=O;break e}v=void 0}(this.i=v)&&(v=this.i,S=S!==null&&v in S?S[v]:void 0),this.data=S}else this.data=v}g(Qm,At);function Wm(){Vr.call(this),this.status=1}g(Wm,Vr);function ua(v){this.g=v}g(ua,Km),ua.prototype.ra=function(){kt(this.g,"a")},ua.prototype.qa=function(v){kt(this.g,new Qm(v))},ua.prototype.pa=function(v){kt(this.g,new Wm)},ua.prototype.oa=function(){kt(this.g,"b")},yo.prototype.createWebChannel=yo.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,mz=function(){return new yo},fz=function(){return lo()},hz=nn,Z1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,kg=ji,qd.COMPLETE="complete",dz=qd,Kc.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,tf=Kc,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,uz=Dt}).apply(typeof eg<"u"?eg:typeof self<"u"?self:typeof window<"u"?window:{});let xr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let Ed="12.8.0";function OF(t){Ed=t}const wc=new Cw("@firebase/firestore");function Vu(){return wc.logLevel}function Pe(t,...e){if(wc.logLevel<=ft.DEBUG){const n=e.map(Uw);wc.debug(`Firestore (${Ed}): ${t}`,...n)}}function Ua(t,...e){if(wc.logLevel<=ft.ERROR){const n=e.map(Uw);wc.error(`Firestore (${Ed}): ${t}`,...n)}}function sd(t,...e){if(wc.logLevel<=ft.WARN){const n=e.map(Uw);wc.warn(`Firestore (${Ed}): ${t}`,...n)}}function Uw(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function We(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pz(t,r,n)}function pz(t,e,n){let r=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ua(r),new Error(r)}function St(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||pz(e,i,r)}function nt(t,e){return t}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Da{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class gz{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xr.UNAUTHENTICATED)))}shutdown(){}}class kF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class DF{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){St(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Da,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Da)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new gz(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new xr(e)}}class MF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class zF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new MF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class D2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){St(this.o===void 0,3512);const r=o=>{o.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new D2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new D2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Vw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=qF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function mt(t,e){return t<e?-1:t>e?1:0}function ej(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return $x(i)===$x(o)?mt(i,o):$x(i)?1:-1}return mt(t.length,e.length)}const UF=55296,VF=57343;function $x(t){const e=t.charCodeAt(0);return e>=UF&&e<=VF}function ad(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const M2="__name__";class Ls{constructor(e,n,r){n===void 0?n=0:n>e.length&&We(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&We(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ls.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Ls.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return mt(e.length,n.length)}static compareSegments(e,n){const r=Ls.isNumericId(e),i=Ls.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ls.extractNumericId(e).compare(Ls.extractNumericId(n)):ej(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return il.fromString(e.substring(4,e.length-2))}}class Kt extends Ls{construct(e,n,r){return new Kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Kt(n)}static emptyPath(){return new Kt([])}}const BF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Ls{construct(e,n,r){return new fr(e,n,r)}static isValidIdentifier(e){return BF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M2}static keyField(){return new fr([M2])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Ce(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Ce(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ce(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(o(),i++)}if(o(),c)throw new Ce(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(n)}static emptyPath(){return new fr([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Kt.fromString(e))}static fromName(e){return new Ue(Kt.fromString(e).popFirst(5))}static empty(){return new Ue(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Kt(e.slice()))}}function vz(t,e,n){if(!n)throw new Ce(_e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $F(t,e,n,r){if(e===!0&&r===!0)throw new Ce(_e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z2(t){if(!Ue.isDocumentKey(t))throw new Ce(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function L2(t){if(Ue.isDocumentKey(t))throw new Ce(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yz(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":We(12329,{type:typeof t})}function Or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xy(t);throw new Ce(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function FF(t,e){if(e<=0)throw new Ce(_e.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Mn(t,e){const n={typeString:t};return e&&(n.value=e),n}function nm(t,e){if(!yz(t))throw new Ce(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Ce(_e.INVALID_ARGUMENT,n);return!0}const q2=-62135596800,U2=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*U2);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q2)throw new Ce(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U2}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nm(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Mn("string",Xe._jsonSchemaVersion),seconds:Mn("number"),nanoseconds:Mn("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new Xe(0,0))}static max(){return new et(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nf=-1;function HF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new cl(i,Ue.empty(),e)}function GF(t){return new cl(t.readTime,t.key,Nf)}class cl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cl(et.min(),Ue.empty(),Nf)}static max(){return new cl(et.max(),Ue.empty(),Nf)}}function KF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ue.comparator(t.documentKey,e.documentKey),n!==0?n:mt(t.largestBatchId,e.largestBatchId))}const QF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Sd(t){if(t.code!==_e.FAILED_PRECONDITION||t.message!==QF)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ee(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ee?n:Ee.resolve(n)}catch(n){return Ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ee.reject(n)}static resolve(e){return new Ee(((n,r)=>{n(e)}))}static reject(e){return new Ee(((n,r)=>{r(e)}))}static waitFor(e){return new Ee(((n,r)=>{let i=0,o=0,c=!1;e.forEach((u=>{++i,u.next((()=>{++o,c&&o===i&&n()}),(h=>r(h)))})),c=!0,o===i&&n()}))}static or(e){let n=Ee.resolve(!1);for(const r of e)n=n.next((i=>i?Ee.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new Ee(((r,i)=>{const o=e.length,c=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((p=>{c[f]=p,++u,u===o&&r(c)}),(p=>i(p)))}}))}static doWhile(e,n){return new Ee(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}function YF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ad(t){return t.name==="IndexedDbTransactionError"}class _y{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_y.ce=-1;const Bw=-1;function jy(t){return t==null}function rv(t){return t===0&&1/t==-1/0}function XF(t){return typeof t=="number"&&Number.isInteger(t)&&!rv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const bz="";function JF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=V2(e)),e=ZF(t.get(n),e);return V2(e)}function ZF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case bz:n+="";break;default:n+=o}}return n}function V2(t){return t+bz+""}function B2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _l(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class rn{constructor(e,n){this.comparator=e,this.root=n||hr.EMPTY}insert(e,n){return new rn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tg(this.root,e,this.comparator,!1)}getReverseIterator(){return new tg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tg(this.root,e,this.comparator,!0)}}class tg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??hr.RED,this.left=i??hr.EMPTY,this.right=o??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new hr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new hr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $2(this.data.getIterator())}getIteratorFrom(e){return new $2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class $2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class mi{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new mi([])}unionWith(e){let n=new $n(fr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ad(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class _z extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _z("Invalid base64 string: "+o):o}})(e);return new pr(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new pr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const eH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(t){if(St(!!t,39018),typeof t=="string"){let e=0;const n=eH.exec(t);if(St(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(t.seconds),nanos:jn(t.nanos)}}function jn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dl(t){return typeof t=="string"?pr.fromBase64String(t):pr.fromUint8Array(t)}const jz="server_timestamp",wz="__type__",Nz="__previous_value__",Ez="__local_write_time__";function $w(t){return(t?.mapValue?.fields||{})[wz]?.stringValue===jz}function wy(t){const e=t.mapValue.fields[Nz];return $w(e)?wy(e):e}function Ef(t){const e=ul(t.mapValue.fields[Ez].timestampValue);return new Xe(e.seconds,e.nanos)}class tH{constructor(e,n,r,i,o,c,u,h,f,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=g}}const iv="(default)";class Sf{constructor(e,n){this.projectId=e,this.database=n||iv}static empty(){return new Sf("","")}get isDefaultDatabase(){return this.database===iv}isEqual(e){return e instanceof Sf&&e.projectId===this.projectId&&e.database===this.database}}function nH(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ce(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sf(t.options.projectId,e)}const Sz="__type__",rH="__max__",ng={mapValue:{}},Az="__vector__",sv="value";function hl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$w(t)?4:sH(t)?9007199254740991:iH(t)?10:11:We(28295,{value:t})}function Ys(t,e){if(t===e)return!0;const n=hl(t);if(n!==hl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ef(t).isEqual(Ef(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=ul(i.timestampValue),u=ul(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return dl(i.bytesValue).isEqual(dl(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return jn(i.geoPointValue.latitude)===jn(o.geoPointValue.latitude)&&jn(i.geoPointValue.longitude)===jn(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return jn(i.integerValue)===jn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=jn(i.doubleValue),u=jn(o.doubleValue);return c===u?rv(c)===rv(u):isNaN(c)&&isNaN(u)}return!1})(t,e);case 9:return ad(t.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:case 11:return(function(i,o){const c=i.mapValue.fields||{},u=o.mapValue.fields||{};if(B2(c)!==B2(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!Ys(c[h],u[h])))return!1;return!0})(t,e);default:return We(52216,{left:t})}}function Af(t,e){return(t.values||[]).find((n=>Ys(n,e)))!==void 0}function od(t,e){if(t===e)return 0;const n=hl(t),r=hl(e);if(n!==r)return mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return mt(t.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=jn(o.integerValue||o.doubleValue),h=jn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(t,e);case 3:return F2(t.timestampValue,e.timestampValue);case 4:return F2(Ef(t),Ef(e));case 5:return ej(t.stringValue,e.stringValue);case 6:return(function(o,c){const u=dl(o),h=dl(c);return u.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=mt(u[f],h[f]);if(p!==0)return p}return mt(u.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=mt(jn(o.latitude),jn(c.latitude));return u!==0?u:mt(jn(o.longitude),jn(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return H2(t.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},h=c.fields||{},f=u[sv]?.arrayValue,p=h[sv]?.arrayValue,g=mt(f?.values?.length||0,p?.values?.length||0);return g!==0?g:H2(f,p)})(t.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ng.mapValue&&c===ng.mapValue)return 0;if(o===ng.mapValue)return 1;if(c===ng.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=c.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let g=0;g<h.length&&g<p.length;++g){const y=ej(h[g],p[g]);if(y!==0)return y;const x=od(u[h[g]],f[p[g]]);if(x!==0)return x}return mt(h.length,p.length)})(t.mapValue,e.mapValue);default:throw We(23264,{he:n})}}function F2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return mt(t,e);const n=ul(t),r=ul(e),i=mt(n.seconds,r.seconds);return i!==0?i:mt(n.nanos,r.nanos)}function H2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=od(n[i],r[i]);if(o)return o}return mt(n.length,r.length)}function ld(t){return tj(t)}function tj(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ul(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ue.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=tj(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${tj(n.fields[c])}`;return i+"}"})(t.mapValue):We(61005,{value:t})}function Dg(t){switch(hl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wy(t);return e?16+Dg(e):16;case 5:return 2*t.stringValue.length;case 6:return dl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Dg(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return _l(r.fields,((o,c)=>{i+=o.length+Dg(c)})),i})(t.mapValue);default:throw We(13486,{value:t})}}function G2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nj(t){return!!t&&"integerValue"in t}function Fw(t){return!!t&&"arrayValue"in t}function K2(t){return!!t&&"nullValue"in t}function Q2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mg(t){return!!t&&"mapValue"in t}function iH(t){return(t?.mapValue?.fields||{})[Sz]?.stringValue===Az}function ff(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _l(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ff(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ff(t.arrayValue.values[n]);return e}return{...t}}function sH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rH}class Yr{constructor(e){this.value=e}static empty(){return new Yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ff(n)}setAll(e){let n=fr.emptyPath(),r={},i=[];e.forEach(((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=ff(c):i.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Mg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_l(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Yr(ff(this.value))}}function Tz(t){const e=[];return _l(t.fields,((n,r)=>{const i=new fr([n]);if(Mg(r)){const o=Tz(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)})),new mi(e)}class _r{constructor(e,n,r,i,o,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new _r(e,0,et.min(),et.min(),et.min(),Yr.empty(),0)}static newFoundDocument(e,n,r,i){return new _r(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new _r(e,2,n,et.min(),et.min(),Yr.empty(),0)}static newUnknownDocument(e,n){return new _r(e,3,n,et.min(),et.min(),Yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class av{constructor(e,n){this.position=e,this.inclusive=n}}function W2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],c=t.position[i];if(o.field.isKeyField()?r=Ue.comparator(Ue.fromName(c.referenceValue),n.key):r=od(c,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Y2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ys(t.position[n],e.position[n]))return!1;return!0}class Tf{constructor(e,n="asc"){this.field=e,this.dir=n}}function aH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Cz{}class Dn extends Cz{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lH(e,n,r):n==="array-contains"?new dH(e,r):n==="in"?new hH(e,r):n==="not-in"?new fH(e,r):n==="array-contains-any"?new mH(e,r):new Dn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cH(e,r):new uH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(od(n,this.value)):n!==null&&hl(this.value)===hl(n)&&this.matchesComparison(od(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends Cz{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fs(e,n)}matches(e){return Iz(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Iz(t){return t.op==="and"}function Pz(t){return oH(t)&&Iz(t)}function oH(t){for(const e of t.filters)if(e instanceof fs)return!1;return!0}function rj(t){if(t instanceof Dn)return t.field.canonicalString()+t.op.toString()+ld(t.value);if(Pz(t))return t.filters.map((e=>rj(e))).join(",");{const e=t.filters.map((n=>rj(n))).join(",");return`${t.op}(${e})`}}function Oz(t,e){return t instanceof Dn?(function(r,i){return i instanceof Dn&&r.op===i.op&&r.field.isEqual(i.field)&&Ys(r.value,i.value)})(t,e):t instanceof fs?(function(r,i){return i instanceof fs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,c,u)=>o&&Oz(c,i.filters[u])),!0):!1})(t,e):void We(19439)}function Rz(t){return t instanceof Dn?(function(n){return`${n.field.canonicalString()} ${n.op} ${ld(n.value)}`})(t):t instanceof fs?(function(n){return n.op.toString()+" {"+n.getFilters().map(Rz).join(" ,")+"}"})(t):"Filter"}class lH extends Dn{constructor(e,n,r){super(e,n,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const n=Ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class cH extends Dn{constructor(e,n){super(e,"in",n),this.keys=kz("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class uH extends Dn{constructor(e,n){super(e,"not-in",n),this.keys=kz("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kz(t,e){return(e.arrayValue?.values||[]).map((n=>Ue.fromName(n.referenceValue)))}class dH extends Dn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fw(n)&&Af(n.arrayValue,this.value)}}class hH extends Dn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Af(this.value.arrayValue,n)}}class fH extends Dn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Af(this.value.arrayValue,n)}}class mH extends Dn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Af(this.value.arrayValue,r)))}}class pH{constructor(e,n=null,r=[],i=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function X2(t,e=null,n=[],r=[],i=null,o=null,c=null){return new pH(t,e,n,r,i,o,c)}function Hw(t){const e=nt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>rj(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),jy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ld(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ld(r))).join(",")),e.Te=n}return e.Te}function Gw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Oz(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y2(t.startAt,e.startAt)&&Y2(t.endAt,e.endAt)}function ij(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Td{constructor(e,n=null,r=[],i=[],o=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gH(t,e,n,r,i,o,c,u){return new Td(t,e,n,r,i,o,c,u)}function Ny(t){return new Td(t)}function J2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vH(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Dz(t){return t.collectionGroup!==null}function mf(t){const e=nt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new $n(fr.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Tf(o,r))})),n.has(fr.keyField().canonicalString())||e.Ie.push(new Tf(fr.keyField(),r))}return e.Ie}function Gs(t){const e=nt(t);return e.Ee||(e.Ee=yH(e,mf(t))),e.Ee}function yH(t,e){if(t.limitType==="F")return X2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Tf(i.field,o)}));const n=t.endAt?new av(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new av(t.startAt.position,t.startAt.inclusive):null;return X2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sj(t,e){const n=t.filters.concat([e]);return new Td(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bH(t,e){const n=t.explicitOrderBy.concat([e]);return new Td(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function ov(t,e,n){return new Td(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ey(t,e){return Gw(Gs(t),Gs(e))&&t.limitType===e.limitType}function Mz(t){return`${Hw(Gs(t))}|lt:${t.limitType}`}function Bu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Rz(i))).join(", ")}]`),jy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>ld(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>ld(i))).join(",")),`Target(${r})`})(Gs(t))}; limitType=${t.limitType})`}function Sy(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of mf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(c,u,h){const f=W2(c,u,h);return c.inclusive?f<=0:f<0})(r.startAt,mf(r),i)||r.endAt&&!(function(c,u,h){const f=W2(c,u,h);return c.inclusive?f>=0:f>0})(r.endAt,mf(r),i))})(t,e)}function xH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zz(t){return(e,n)=>{let r=!1;for(const i of mf(t)){const o=_H(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _H(t,e,n){const r=t.field.isKeyField()?Ue.comparator(e.key,n.key):(function(o,c,u){const h=c.data.field(o),f=u.data.field(o);return h!==null&&f!==null?od(h,f):We(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return We(19790,{direction:t.dir})}}class Lc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return xz(this.inner)}size(){return this.innerSize}}const jH=new rn(Ue.comparator);function Va(){return jH}const Lz=new rn(Ue.comparator);function nf(...t){let e=Lz;for(const n of t)e=e.insert(n.key,n);return e}function qz(t){let e=Lz;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ac(){return pf()}function Uz(){return pf()}function pf(){return new Lc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wH=new rn(Ue.comparator),NH=new $n(Ue.comparator);function pt(...t){let e=NH;for(const n of t)e=e.add(n);return e}const EH=new $n(mt);function SH(){return EH}function Kw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rv(e)?"-0":e}}function Vz(t){return{integerValue:""+t}}function Bz(t,e){return XF(e)?Vz(e):Kw(t,e)}class Ay{constructor(){this._=void 0}}function AH(t,e,n){return t instanceof Cf?(function(i,o){const c={fields:{[wz]:{stringValue:jz},[Ez]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&$w(o)&&(o=wy(o)),o&&(c.fields[Nz]=o),{mapValue:c}})(n,e):t instanceof If?Fz(t,e):t instanceof Pf?Hz(t,e):(function(i,o){const c=$z(i,o),u=Z2(c)+Z2(i.Ae);return nj(c)&&nj(i.Ae)?Vz(u):Kw(i.serializer,u)})(t,e)}function TH(t,e,n){return t instanceof If?Fz(t,e):t instanceof Pf?Hz(t,e):n}function $z(t,e){return t instanceof Of?(function(r){return nj(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Cf extends Ay{}class If extends Ay{constructor(e){super(),this.elements=e}}function Fz(t,e){const n=Gz(e);for(const r of t.elements)n.some((i=>Ys(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Pf extends Ay{constructor(e){super(),this.elements=e}}function Hz(t,e){let n=Gz(e);for(const r of t.elements)n=n.filter((i=>!Ys(i,r)));return{arrayValue:{values:n}}}class Of extends Ay{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Z2(t){return jn(t.integerValue||t.doubleValue)}function Gz(t){return Fw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Kz{constructor(e,n){this.field=e,this.transform=n}}function CH(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof If&&i instanceof If||r instanceof Pf&&i instanceof Pf?ad(r.elements,i.elements,Ys):r instanceof Of&&i instanceof Of?Ys(r.Ae,i.Ae):r instanceof Cf&&i instanceof Cf})(t.transform,e.transform)}class IH{constructor(e,n){this.version=e,this.transformResults=n}}class Rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ty{}function Qz(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cy(t.key,Rr.none()):new rm(t.key,t.data,Rr.none());{const n=t.data,r=Yr.empty();let i=new $n(fr.comparator);for(let o of e.fields)if(!i.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new jl(t.key,r,new mi(i.toArray()),Rr.none())}}function PH(t,e,n){t instanceof rm?(function(i,o,c){const u=i.value.clone(),h=tI(i.fieldTransforms,o,c.transformResults);u.setAll(h),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(t,e,n):t instanceof jl?(function(i,o,c){if(!zg(i.precondition,o))return void o.convertToUnknownDocument(c.version);const u=tI(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(Wz(i)),h.setAll(u),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):(function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function gf(t,e,n,r){return t instanceof rm?(function(o,c,u,h){if(!zg(o.precondition,c))return u;const f=o.value.clone(),p=nI(o.fieldTransforms,h,c);return f.setAll(p),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof jl?(function(o,c,u,h){if(!zg(o.precondition,c))return u;const f=nI(o.fieldTransforms,h,c),p=c.data;return p.setAll(Wz(o)),p.setAll(f),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(o,c,u){return zg(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(t,e,n)}function OH(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=$z(r.transform,i||null);o!=null&&(n===null&&(n=Yr.empty()),n.set(r.field,o))}return n||null}function eI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ad(r,i,((o,c)=>CH(o,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rm extends Ty{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jl extends Ty{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Wz(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function tI(t,e,n){const r=new Map;St(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const o=t[i],c=o.transform,u=e.data.field(o.field);r.set(o.field,TH(c,u,n[i]))}return r}function nI(t,e,n){const r=new Map;for(const i of t){const o=i.transform,c=n.data.field(i.field);r.set(i.field,AH(o,c,e))}return r}class Cy extends Ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RH extends Ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kH{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&PH(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Uz();return this.mutations.forEach((i=>{const o=e.get(i.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=n.has(i.key)?null:u;const h=Qz(c,u);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(et.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),pt())}isEqual(e){return this.batchId===e.batchId&&ad(this.mutations,e.mutations,((n,r)=>eI(n,r)))&&ad(this.baseMutations,e.baseMutations,((n,r)=>eI(n,r)))}}class Qw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){St(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return wH})();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new Qw(e,n,r,i)}}class DH{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class MH{constructor(e,n){this.count=e,this.unchangedNames=n}}var Rn,xt;function zH(t){switch(t){case _e.OK:return We(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return We(15467,{code:t})}}function Yz(t){if(t===void 0)return Ua("GRPC error has no .code"),_e.UNKNOWN;switch(t){case Rn.OK:return _e.OK;case Rn.CANCELLED:return _e.CANCELLED;case Rn.UNKNOWN:return _e.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return _e.INTERNAL;case Rn.UNAVAILABLE:return _e.UNAVAILABLE;case Rn.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Rn.NOT_FOUND:return _e.NOT_FOUND;case Rn.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Rn.ABORTED:return _e.ABORTED;case Rn.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Rn.DATA_LOSS:return _e.DATA_LOSS;default:return We(39323,{code:t})}}(xt=Rn||(Rn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";function LH(){return new TextEncoder}const qH=new il([4294967295,4294967295],0);function rI(t){const e=LH().encode(t),n=new cz;return n.update(e),new Uint8Array(n.digest())}function iI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new il([n,r],0),new il([i,o],0)]}class Ww{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rf(`Invalid padding: ${n}`);if(r<0)throw new rf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=il.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(il.fromNumber(r)));return i.compare(qH)===1&&(i=new il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=rI(e),[r,i]=iI(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Ww(o,i,n);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const n=rI(e),[r,i]=iI(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.be(c)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Iy{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,im.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Iy(et.min(),i,new rn(mt),Va(),pt())}}class im{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new im(r,n,pt(),pt(),pt())}}class Lg{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Xz{constructor(e,n){this.targetId=e,this.Ce=n}}class Jz{constructor(e,n,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sI{constructor(){this.ve=0,this.Fe=aI(),this.Me=pr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),n=pt(),r=pt();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:We(38017,{changeType:o})}})),new im(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=aI()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class UH{constructor(e){this.Ge=e,this.ze=new Map,this.je=Va(),this.He=rg(),this.Je=rg(),this.Ze=new rn(mt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(ij(o))if(r===0){const c=new Ue(o.path);this.et(n,c,_r.newNoDocument(c,et.min()))}else St(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const u=this.ut(e),h=u?this.ct(u,e,c):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let c,u;try{c=dl(r).toUint8Array()}catch(h){if(h instanceof _z)return sd("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Ww(c,i,o)}catch(h){return sd(h instanceof rf?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&ij(u.target)){const h=new Ue(u.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,_r.newNoDocument(h,e))}o.Be&&(n.set(c,o.ke()),o.Ke())}}));let r=pt();this.Je.forEach(((o,c)=>{let u=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const i=new Iy(e,n,this.Ze,this.je,r);return this.je=Va(),this.He=rg(),this.Je=rg(),this.Ze=new rn(mt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new sI,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new $n(mt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new $n(mt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sI),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rg(){return new rn(Ue.comparator)}function aI(){return new rn(Ue.comparator)}const VH={asc:"ASCENDING",desc:"DESCENDING"},BH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$H={and:"AND",or:"OR"};class FH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function aj(t,e){return t.useProto3Json||jy(e)?e:{value:e}}function lv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HH(t,e){return lv(t,e.toTimestamp())}function Ks(t){return St(!!t,49232),et.fromTimestamp((function(n){const r=ul(n);return new Xe(r.seconds,r.nanos)})(t))}function Yw(t,e){return oj(t,e).canonicalString()}function oj(t,e){const n=(function(i){return new Kt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function e4(t){const e=Kt.fromString(t);return St(s4(e),10190,{key:e.toString()}),e}function lj(t,e){return Yw(t.databaseId,e.path)}function Fx(t,e){const n=e4(e);if(n.get(1)!==t.databaseId.projectId)throw new Ce(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ce(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ue(n4(n))}function t4(t,e){return Yw(t.databaseId,e)}function GH(t){const e=e4(t);return e.length===4?Kt.emptyPath():n4(e)}function cj(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function n4(t){return St(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oI(t,e,n){return{name:lj(t,e),fields:n.value.mapValue.fields}}function KH(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:We(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(St(p===void 0||typeof p=="string",58123),pr.fromBase64String(p||"")):(St(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),pr.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const p=f.code===void 0?_e.UNKNOWN:Yz(f.code);return new Ce(p,f.message||"")})(c);n=new Jz(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fx(t,r.document.name),o=Ks(r.document.updateTime),c=r.document.createTime?Ks(r.document.createTime):et.min(),u=new Yr({mapValue:{fields:r.document.fields}}),h=_r.newFoundDocument(i,o,c,u),f=r.targetIds||[],p=r.removedTargetIds||[];n=new Lg(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fx(t,r.document),o=r.readTime?Ks(r.readTime):et.min(),c=_r.newNoDocument(i,o),u=r.removedTargetIds||[];n=new Lg([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fx(t,r.document),o=r.removedTargetIds||[];n=new Lg([],o,i,null)}else{if(!("filter"in e))return We(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new MH(i,o),u=r.targetId;n=new Xz(u,c)}}return n}function QH(t,e){let n;if(e instanceof rm)n={update:oI(t,e.key,e.value)};else if(e instanceof Cy)n={delete:lj(t,e.key)};else if(e instanceof jl)n={update:oI(t,e.key,e.data),updateMask:rG(e.fieldMask)};else{if(!(e instanceof RH))return We(16599,{dt:e.type});n={verify:lj(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const u=c.transform;if(u instanceof Cf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof If)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Pf)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Of)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw We(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:HH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:We(27497)})(t,e.precondition)),n}function WH(t,e){return t&&t.length>0?(St(e!==void 0,14353),t.map((n=>(function(i,o){let c=i.updateTime?Ks(i.updateTime):Ks(o);return c.isEqual(et.min())&&(c=Ks(o)),new IH(c,i.transformResults||[])})(n,e)))):[]}function YH(t,e){return{documents:[t4(t,e.path)]}}function XH(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=t4(t,i);const o=(function(f){if(f.length!==0)return i4(fs.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((p=>(function(y){return{field:$u(y.field),direction:eG(y.dir)}})(p)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=aj(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:i}}function JH(t){let e=GH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){St(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(g){const y=r4(g);return y instanceof fs&&Pz(y)?y.getFilters():[y]})(n.where));let c=[];n.orderBy&&(c=(function(g){return g.map((y=>(function(N){return new Tf(Fu(N.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(y)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let y;return y=typeof g=="object"?g.value:g,jy(y)?null:y})(n.limit));let h=null;n.startAt&&(h=(function(g){const y=!!g.before,x=g.values||[];return new av(x,y)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const y=!g.before,x=g.values||[];return new av(x,y)})(n.endAt)),gH(e,i,c,o,u,"F",h,f)}function ZH(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function r4(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fu(n.unaryFilter.field);return Dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fu(n.unaryFilter.field);return Dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Fu(n.unaryFilter.field);return Dn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Fu(n.unaryFilter.field);return Dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Dn.create(Fu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return fs.create(n.compositeFilter.filters.map((r=>r4(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(n.compositeFilter.op))})(t):We(30097,{filter:t})}function eG(t){return VH[t]}function tG(t){return BH[t]}function nG(t){return $H[t]}function $u(t){return{fieldPath:t.canonicalString()}}function Fu(t){return fr.fromServerFormat(t.fieldPath)}function i4(t){return t instanceof Dn?(function(n){if(n.op==="=="){if(Q2(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NAN"}};if(K2(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Q2(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NOT_NAN"}};if(K2(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$u(n.field),op:tG(n.op),value:n.value}}})(t):t instanceof fs?(function(n){const r=n.getFilters().map((i=>i4(i)));return r.length===1?r[0]:{compositeFilter:{op:nG(n.op),filters:r}}})(t):We(54877,{filter:t})}function rG(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function s4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function a4(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class Zo{constructor(e,n,r,i,o=et.min(),c=et.min(),u=pr.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class iG{constructor(e){this.yt=e}}function sG(t){const e=JH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ov(e,e.limit,"L"):e}class aG{constructor(){this.Sn=new oG}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ee.resolve()}getCollectionParents(e,n){return Ee.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ee.resolve()}deleteFieldIndex(e,n){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,n){return Ee.resolve()}getDocumentsMatchingTarget(e,n){return Ee.resolve(null)}getIndexType(e,n){return Ee.resolve(0)}getFieldIndexes(e,n){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,n){return Ee.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,n){return Ee.resolve(cl.min())}updateCollectionGroup(e,n,r){return Ee.resolve()}updateIndexEntries(e,n){return Ee.resolve()}}class oG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $n(Kt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(Kt.comparator)).toArray()}}const lI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o4=41943040;class Wr{static withCacheSize(e){return new Wr(e,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Wr.DEFAULT_COLLECTION_PERCENTILE=10,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wr.DEFAULT=new Wr(o4,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wr.DISABLED=new Wr(-1,0,0);class cd{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new cd(0)}static ar(){return new cd(-1)}}const cI="LruGarbageCollector",lG=1048576;function uI([t,e],[n,r]){const i=mt(t,n);return i===0?mt(e,r):i}class cG{constructor(e){this.Pr=e,this.buffer=new $n(uI),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();uI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(cI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ad(n)?Pe(cI,"Ignoring IndexedDB error during garbage collection: ",n):await Sd(n)}await this.Ar(3e5)}))}}class dG{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ee.resolve(_y.ce);const r=new cG(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(lI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lI):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,c,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,c=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),Vu()<=ft.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g}))))}}function hG(t,e){return new dG(t,e)}class fG{constructor(){this.changes=new Lc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class pG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&gf(r.mutation,i,mi.empty(),Xe.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,pt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=pt()){const i=ac();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let c=nf();return o.forEach(((u,h)=>{c=c.insert(u,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=ac();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,pt())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((c,u)=>{n.set(c,u)}))}))}computeViews(e,n,r,i){let o=Va();const c=pf(),u=(function(){return pf()})();return n.forEach(((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof jl)?o=o.insert(f.key,f):p!==void 0?(c.set(f.key,p.mutation.getFieldMask()),gf(p.mutation,f,p.mutation.getFieldMask(),Xe.now())):c.set(f.key,mi.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,p)=>c.set(f,p))),n.forEach(((f,p)=>u.set(f,new mG(p,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=pf();let i=new rn(((c,u)=>c-u)),o=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const u of c)u.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let p=r.get(h)||mi.empty();p=u.applyToLocalView(f,p),r.set(h,p);const g=(i.get(u.batchId)||pt()).add(h);i=i.insert(u.batchId,g)}))})).next((()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,g=Uz();p.forEach((y=>{if(!o.has(y)){const x=Qz(n.get(y),r.get(y));x!==null&&g.set(y,x),o=o.add(y)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return vH(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dz(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Ee.resolve(ac());let u=Nf,h=o;return c.next((f=>Ee.forEach(f,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(p)?Ee.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{h=h.insert(p,y)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,pt()))).next((p=>({batchId:u,changes:qz(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ue(n)).next((r=>{let i=nf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let c=nf();return this.indexManager.getCollectionParents(e,o).next((u=>Ee.forEach(u,(h=>{const f=(function(g,y){return new Td(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((p=>{p.forEach(((g,y)=>{c=c.insert(g,y)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((c=>{o.forEach(((h,f)=>{const p=f.getKey();c.get(p)===null&&(c=c.insert(p,_r.newInvalidDocument(p)))}));let u=nf();return c.forEach(((h,f)=>{const p=o.get(h);p!==void 0&&gf(p.mutation,f,mi.empty(),Xe.now()),Sy(n,f)&&(u=u.insert(h,f))})),u}))}}class gG{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ee.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ks(i.createTime)}})(n)),Ee.resolve()}getNamedQuery(e,n){return Ee.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:sG(i.bundledQuery),readTime:Ks(i.readTime)}})(n)),Ee.resolve()}}class vG{constructor(){this.overlays=new rn(Ue.comparator),this.Lr=new Map}getOverlay(e,n){return Ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ac();return Ee.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.bt(e,n,o)})),Ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),Ee.resolve()}getOverlaysForCollection(e,n,r){const i=ac(),o=n.length+1,c=new Ue(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new rn(((f,p)=>f-p));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=o.get(f.largestBatchId);p===null&&(p=ac(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=ac(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=i)););return Ee.resolve(u)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new DH(n,r));let o=this.Lr.get(n);o===void 0&&(o=pt(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}}class yG{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ee.resolve()}}class Xw{constructor(){this.kr=new $n(Jn.Kr),this.qr=new $n(Jn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Jn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Jn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ue(new Kt([])),r=new Jn(n,e),i=new Jn(n,e+1),o=[];return this.qr.forEachInRange([r,i],(c=>{this.Wr(c),o.push(c.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ue(new Kt([])),r=new Jn(n,e),i=new Jn(n,e+1);let o=pt();return this.qr.forEachInRange([r,i],(c=>{o=o.add(c.key)})),o}containsKey(e){const n=new Jn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ue.comparator(e.key,n.key)||mt(e.Hr,n.Hr)}static Ur(e,n){return mt(e.Hr,n.Hr)||Ue.comparator(e.key,n.key)}}class bG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new $n(Jn.Kr)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new kH(o,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Jr=this.Jr.add(new Jn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ee.resolve(c)}lookupMutationBatch(e,n){return Ee.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return Ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?Bw:this.Yn-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jn(n,0),i=new Jn(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],(c=>{const u=this.Zr(c.Hr);o.push(u)})),Ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(mt);return n.forEach((i=>{const o=new Jn(i,0),c=new Jn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,c],(u=>{r=r.add(u.Hr)}))})),Ee.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Ue.isDocumentKey(o)||(o=o.child(""));const c=new Jn(new Ue(o),0);let u=new $n(mt);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Hr)),!0)}),c),Ee.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){St(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Ee.forEach(n.mutations,(i=>{const o=new Jn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Jn(n,0),i=this.Jr.firstAfterOrEqual(r);return Ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class xG{constructor(e){this.ti=e,this.docs=(function(){return new rn(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,c=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ee.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let r=Va();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():_r.newInvalidDocument(i))})),Ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Va();const c=n.path,u=new Ue(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||KF(GF(p),r)<=0||(i.has(p.key)||Sy(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return Ee.resolve(o)}getAllFromCollectionGroup(e,n,r,i){We(9500)}ni(e,n){return Ee.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new _G(this)}getSize(e){return Ee.resolve(this.size)}}class _G extends fG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),Ee.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class jG{constructor(e){this.persistence=e,this.ri=new Lc((n=>Hw(n)),Gw),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ii=0,this.si=new Xw,this.targetCount=0,this.oi=cd._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Ee.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new cd(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ee.resolve()}updateTargetData(e,n){return this.lr(n),Ee.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ri.forEach(((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ri.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ee.waitFor(o).next((()=>i))}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Ee.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Ee.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((c=>{o.push(i.markPotentiallyOrphaned(e,c))})),Ee.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Ee.resolve(r)}containsKey(e,n){return Ee.resolve(this.si.containsKey(n))}}class l4{constructor(e,n){this._i={},this.overlays={},this.ai=new _y(0),this.ui=!1,this.ui=!0,this.ci=new yG,this.referenceDelegate=e(this),this.li=new jG(this),this.indexManager=new aG,this.remoteDocumentCache=(function(i){return new xG(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new iG(n),this.Pi=new gG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new bG(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new wG(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((o=>this.referenceDelegate.Ii(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ei(e,n){return Ee.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class wG extends WF{constructor(e){super(),this.currentSequenceNumber=e}}class Jw{constructor(e){this.persistence=e,this.Ri=new Xw,this.Ai=null}static Vi(e){return new Jw(e)}get di(){if(this.Ai)return this.Ai;throw We(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Ee.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ee.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.di,(r=>{const i=Ue.fromPath(r);return this.mi(e,i).next((o=>{o||n.removeEntry(i,et.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ee.or([()=>Ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class cv{constructor(e,n){this.persistence=e,this.fi=new Lc((r=>JF(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=hG(this,n)}static Vi(e,n){return new cv(e,n)}Ti(){}Ii(e){return Ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return Ee.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((o=>o?Ee.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,(c=>this.wr(e,c,n).next((u=>{u||(r++,o.removeEntry(c,et.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ee.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ee.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ee.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dg(e.data.value)),n}wr(e,n,r){return Ee.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return Ee.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Zw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=pt(),i=pt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Zw(e,n.fromCache,r,i)}}class NG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class EG{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return X8()?8:YF(wr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.gs(e,n).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ps(e,n,i,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new NG;return this.ys(e,n,c).next((u=>{if(o.result=u,this.As)return this.ws(e,n,c,u.size)}))})).next((()=>o.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Vu()<=ft.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Bu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ee.resolve()):(Vu()<=ft.DEBUG&&Pe("QueryEngine","Query:",Bu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Vu()<=ft.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Bu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gs(n))):Ee.resolve())}gs(e,n){if(J2(n))return Ee.resolve(null);let r=Gs(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=ov(n,null,"F"),r=Gs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=pt(...o);return this.fs.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.bs(n,u);return this.Ss(n,f,c,h.readTime)?this.gs(e,ov(n,null,"F")):this.Ds(e,f,n,h)}))))})))))}ps(e,n,r,i){return J2(n)||i.isEqual(et.min())?Ee.resolve(null):this.fs.getDocuments(e,r).next((o=>{const c=this.bs(n,o);return this.Ss(n,c,r,i)?Ee.resolve(null):(Vu()<=ft.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bu(n)),this.Ds(e,c,n,HF(i,Nf)).next((u=>u)))}))}bs(e,n){let r=new $n(zz(e));return n.forEach(((i,o)=>{Sy(e,o)&&(r=r.add(o))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return Vu()<=ft.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Bu(n)),this.fs.getDocumentsMatchingQuery(e,n,cl.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const eN="LocalStore",SG=3e8;class AG{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new rn(mt),this.Fs=new Lc((o=>Hw(o)),Gw),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pG(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function TG(t,e,n,r){return new AG(t,e,n,r)}async function c4(t,e){const n=nt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],u=[];let h=pt();for(const f of i){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next((f=>({Ns:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function CG(t,e){const n=nt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,p){const g=f.batch,y=g.keys();let x=Ee.resolve();return y.forEach((N=>{x=x.next((()=>p.getEntry(h,N))).next((j=>{const E=f.docVersions.get(N);St(E!==null,48541),j.version.compareTo(E)<0&&(g.applyToRemoteDocument(j,f),j.isValidDocument()&&(j.setReadTime(f.commitVersion),p.addEntry(j)))}))})),x.next((()=>u.mutationQueue.removeMutationBatch(h,g)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=pt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function u4(t){const e=nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function IG(t,e){const n=nt(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const u=[];e.targetChanges.forEach(((p,g)=>{const y=i.get(g);if(!y)return;u.push(n.li.removeMatchingKeys(o,p.removedDocuments,g).next((()=>n.li.addMatchingKeys(o,p.addedDocuments,g))));let x=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(pr.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),i=i.insert(g,x),(function(j,E,A){return j.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=SG?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(y,x,p)&&u.push(n.li.updateTargetData(o,x))}));let h=Va(),f=pt();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(PG(o,c,e.documentUpdates).next((p=>{h=p.Bs,f=p.Ls}))),!r.isEqual(et.min())){const p=n.li.getLastRemoteSnapshotVersion(o).next((g=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(p)}return Ee.waitFor(u).next((()=>c.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.vs=i,o)))}function PG(t,e,n){let r=pt(),i=pt();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let c=Va();return n.forEach(((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(et.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Pe(eN,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{Bs:c,Ls:i}}))}function OG(t,e){const n=nt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Bw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function RG(t,e){const n=nt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((o=>o?(i=o,Ee.resolve(i)):n.li.allocateTargetId(r).next((c=>(i=new Zo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function uj(t,e,n){const r=nt(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Ad(c))throw c;Pe(eN,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function dI(t,e,n){const r=nt(t);let i=et.min(),o=pt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,p){const g=nt(h),y=g.Fs.get(p);return y!==void 0?Ee.resolve(g.vs.get(y)):g.li.getTargetData(f,p)})(r,c,Gs(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,u.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:et.min(),n?o:pt()))).next((u=>(kG(r,xH(e),u),{documents:u,ks:o})))))}function kG(t,e,n){let r=t.Ms.get(e)||et.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Ms.set(e,r)}class hI{constructor(){this.activeTargetIds=SH()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DG{constructor(){this.vo=new hI,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new hI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MG{Mo(e){}shutdown(){}}const fI="ConnectivityMonitor";class mI{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(fI,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(fI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ig=null;function dj(){return ig===null?ig=(function(){return 268435456+Math.round(2147483648*Math.random())})():ig++,"0x"+ig.toString(16)}const Hx="RestConnection",zG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class LG{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===iv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const c=dj(),u=this.Qo(e,n.toUriEncodedString());Pe(Hx,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,o);const{host:f}=new URL(u),p=bl(f);return this.zo(e,u,h,r,p).then((g=>(Pe(Hx,`Received RPC '${e}' ${c}: `,g),g)),(g=>{throw sd(Hx,`RPC '${e}' ${c} failed with error: `,g,"url: ",u,"request:",r),g}))}jo(e,n,r,i,o,c){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ed})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}Qo(e,n){const r=zG[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class qG{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const yr="WebChannelConnection",Uh=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Zu extends LG{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Zu.c_){const e=fz();Uh(e,hz.STAT_EVENT,(n=>{n.stat===Z1.PROXY?Pe(yr,"STAT_EVENT: detected buffering proxy"):n.stat===Z1.NOPROXY&&Pe(yr,"STAT_EVENT: detected no buffering proxy")})),Zu.c_=!0}}zo(e,n,r,i,o){const c=dj();return new Promise(((u,h)=>{const f=new uz;f.setWithCredentials(!0),f.listenOnce(dz.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case kg.NO_ERROR:const g=f.getResponseJson();Pe(yr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(g)),u(g);break;case kg.TIMEOUT:Pe(yr,`RPC '${e}' ${c} timed out`),h(new Ce(_e.DEADLINE_EXCEEDED,"Request time out"));break;case kg.HTTP_ERROR:const y=f.getStatus();if(Pe(yr,`RPC '${e}' ${c} failed with status:`,y,"response text:",f.getResponseText()),y>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x?.error;if(N&&N.status&&N.message){const j=(function(A){const R=A.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(R)>=0?R:_e.UNKNOWN})(N.status);h(new Ce(j,N.message))}else h(new Ce(_e.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Ce(_e.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Pe(yr,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);Pe(yr,`RPC '${e}' ${c} sending request:`,i),f.send(n,"POST",p,r,15)}))}T_(e,n,r){const i=dj(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");Pe(yr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=c.createWebChannel(f,u);this.I_(p);let g=!1,y=!1;const x=new qG({Ho:N=>{y?Pe(yr,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(Pe(yr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Pe(yr,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Jo:()=>p.close()});return Uh(p,tf.EventType.OPEN,(()=>{y||(Pe(yr,`RPC '${e}' stream ${i} transport opened.`),x.i_())})),Uh(p,tf.EventType.CLOSE,(()=>{y||(y=!0,Pe(yr,`RPC '${e}' stream ${i} transport closed`),x.o_(),this.E_(p))})),Uh(p,tf.EventType.ERROR,(N=>{y||(y=!0,sd(yr,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),x.o_(new Ce(_e.UNAVAILABLE,"The operation could not be completed")))})),Uh(p,tf.EventType.MESSAGE,(N=>{if(!y){const j=N.data[0];St(!!j,16349);const E=j,A=E?.error||E[0]?.error;if(A){Pe(yr,`RPC '${e}' stream ${i} received error:`,A);const R=A.status;let T=(function(B){const D=Rn[B];if(D!==void 0)return Yz(D)})(R),I=A.message;T===void 0&&(T=_e.INTERNAL,I="Unknown error status: "+R+" with message "+A.message),y=!0,x.o_(new Ce(T,I)),p.close()}else Pe(yr,`RPC '${e}' stream ${i} received:`,j),x.__(j)}})),Zu.u_(),setTimeout((()=>{x.s_()}),0),x}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return mz()}}function UG(t){return new Zu(t)}function Gx(){return typeof document<"u"?document:null}function Py(t){return new FH(t,!0)}Zu.c_=!1;class d4{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const pI="PersistentStream";class h4{constructor(e,n,r,i,o,c,u,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new d4(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(Ua(n.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ce(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(pI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Pe(pI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VG extends h4{constructor(e,n,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=KH(this.serializer,e),r=(function(o){if(!("targetChange"in o))return et.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?et.min():c.readTime?Ks(c.readTime):et.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=cj(this.serializer),n.addTarget=(function(o,c){let u;const h=c.target;if(u=ij(h)?{documents:YH(o,h)}:{query:XH(o,h).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=Zz(o,c.resumeToken);const f=aj(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(et.min())>0){u.readTime=lv(o,c.snapshotVersion.toTimestamp());const f=aj(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=ZH(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=cj(this.serializer),n.removeTarget=e,this.K_(n)}}class BG extends h4{constructor(e,n,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=WH(e.writeResults,e.commitTime),r=Ks(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cj(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>QH(this.serializer,r)))};this.K_(n)}}class $G{}class FG extends $G{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ce(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Wo(e,oj(n,r),i,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ce(_e.UNKNOWN,o.toString())}))}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.jo(e,oj(n,r),i,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(_e.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function HG(t,e,n,r){return new FG(t,e,n,r)}class GG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ua(n),this.aa=!1):Pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Nc="RemoteStore";class KG{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{qc(this)&&(Pe(Nc,"Restarting streams for network reachability change."),await(async function(h){const f=nt(h);f.Ea.add(4),await sm(f),f.Va.set("Unknown"),f.Ea.delete(4),await Oy(f)})(this))}))})),this.Va=new GG(r,i)}}async function Oy(t){if(qc(t))for(const e of t.Ra)await e(!0)}async function sm(t){for(const e of t.Ra)await e(!1)}function f4(t,e){const n=nt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iN(n)?rN(n):Cd(n).O_()&&nN(n,e))}function tN(t,e){const n=nt(t),r=Cd(n);n.Ia.delete(e),r.O_()&&m4(n,e),n.Ia.size===0&&(r.O_()?r.L_():qc(n)&&n.Va.set("Unknown"))}function nN(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cd(t).Z_(e)}function m4(t,e){t.da.$e(e),Cd(t).X_(e)}function rN(t){t.da=new UH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Cd(t).start(),t.Va.ua()}function iN(t){return qc(t)&&!Cd(t).x_()&&t.Ia.size>0}function qc(t){return nt(t).Ea.size===0}function p4(t){t.da=void 0}async function QG(t){t.Va.set("Online")}async function WG(t){t.Ia.forEach(((e,n)=>{nN(t,e)}))}async function YG(t,e){p4(t),iN(t)?(t.Va.ha(e),rN(t)):t.Va.set("Unknown")}async function XG(t,e,n){if(t.Va.set("Online"),e instanceof Jz&&e.state===2&&e.cause)try{await(async function(i,o){const c=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ia.delete(u),i.da.removeTarget(u))})(t,e)}catch(r){Pe(Nc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uv(t,r)}else if(e instanceof Lg?t.da.Xe(e):e instanceof Xz?t.da.st(e):t.da.tt(e),!n.isEqual(et.min()))try{const r=await u4(t.localStore);n.compareTo(r)>=0&&await(function(o,c){const u=o.da.Tt(c);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(h.resumeToken,c))}})),u.targetMismatches.forEach(((h,f)=>{const p=o.Ia.get(h);if(!p)return;o.Ia.set(h,p.withResumeToken(pr.EMPTY_BYTE_STRING,p.snapshotVersion)),m4(o,h);const g=new Zo(p.target,h,f,p.sequenceNumber);nN(o,g)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){Pe(Nc,"Failed to raise snapshot:",r),await uv(t,r)}}async function uv(t,e,n){if(!Ad(e))throw e;t.Ea.add(1),await sm(t),t.Va.set("Offline"),n||(n=()=>u4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Pe(Nc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Oy(t)}))}function g4(t,e){return e().catch((n=>uv(t,n,e)))}async function Ry(t){const e=nt(t),n=fl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bw;for(;JG(e);)try{const i=await OG(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,ZG(e,i)}catch(i){await uv(e,i)}v4(e)&&y4(e)}function JG(t){return qc(t)&&t.Ta.length<10}function ZG(t,e){t.Ta.push(e);const n=fl(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function v4(t){return qc(t)&&!fl(t).x_()&&t.Ta.length>0}function y4(t){fl(t).start()}async function eK(t){fl(t).ra()}async function tK(t){const e=fl(t);for(const n of t.Ta)e.ea(n.mutations)}async function nK(t,e,n){const r=t.Ta.shift(),i=Qw.from(r,e,n);await g4(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Ry(t)}async function rK(t,e){e&&fl(t).Y_&&await(async function(r,i){if((function(c){return zH(c)&&c!==_e.ABORTED})(i.code)){const o=r.Ta.shift();fl(r).B_(),await g4(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Ry(r)}})(t,e),v4(t)&&y4(t)}async function gI(t,e){const n=nt(t);n.asyncQueue.verifyOperationInProgress(),Pe(Nc,"RemoteStore received new credentials");const r=qc(n);n.Ea.add(3),await sm(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Oy(n)}async function iK(t,e){const n=nt(t);e?(n.Ea.delete(2),await Oy(n)):e||(n.Ea.add(2),await sm(n),n.Va.set("Unknown"))}function Cd(t){return t.ma||(t.ma=(function(n,r,i){const o=nt(n);return o.sa(),new VG(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:QG.bind(null,t),Yo:WG.bind(null,t),t_:YG.bind(null,t),J_:XG.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),iN(t)?rN(t):t.Va.set("Unknown")):(await t.ma.stop(),p4(t))}))),t.ma}function fl(t){return t.fa||(t.fa=(function(n,r,i){const o=nt(n);return o.sa(),new BG(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:eK.bind(null,t),t_:rK.bind(null,t),ta:tK.bind(null,t),na:nK.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Ry(t)):(await t.fa.stop(),t.Ta.length>0&&(Pe(Nc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class sN{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const c=Date.now()+r,u=new sN(e,n,c,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aN(t,e){if(Ua("AsyncQueue",`${e}: ${t}`),Ad(t))return new Ce(_e.UNAVAILABLE,`${e}: ${t}`);throw t}class ed{static emptySet(e){return new ed(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ue.comparator(n.key,r.key):(n,r)=>Ue.comparator(n.key,r.key),this.keyedMap=nf(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ed)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ed;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class vI{constructor(){this.ga=new rn(Ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):We(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ud{constructor(e,n,r,i,o,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const c=[];return n.forEach((u=>{c.push({type:0,doc:u})})),new ud(e,n,ed.emptySet(n),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ey(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class sK{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class aK{constructor(){this.queries=yI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=nt(n),o=i.queries;i.queries=yI(),o.forEach(((c,u)=>{for(const h of u.ba)h.onError(r)}))})(this,new Ce(_e.ABORTED,"Firestore shutting down"))}}function yI(){return new Lc((t=>Mz(t)),Ey)}async function oN(t,e){const n=nt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new sK,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=aN(c,`Initialization of query '${Bu(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&cN(n)}async function lN(t,e){const n=nt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const c=o.ba.indexOf(e);c>=0&&(o.ba.splice(c,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oK(t,e){const n=nt(t);let r=!1;for(const i of e){const o=i.query,c=n.queries.get(o);if(c){for(const u of c.ba)u.Fa(i)&&(r=!0);c.wa=i}}r&&cN(n)}function lK(t,e,n){const r=nt(t),i=r.queries.get(e);if(i)for(const o of i.ba)o.onError(n);r.queries.delete(e)}function cN(t){t.Ca.forEach((e=>{e.next()}))}var hj,bI;(bI=hj||(hj={})).Ma="default",bI.Cache="cache";class uN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hj.Cache}}class b4{constructor(e){this.key=e}}class x4{constructor(e){this.key=e}}class cK{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=zz(e),this.tu=new ed(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new vI,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const y=i.get(p),x=Sy(this.query,g)?g:null,N=!!y&&this.mutatedKeys.has(y.key),j=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let E=!1;y&&x?y.data.isEqual(x.data)?N!==j&&(r.track({type:3,doc:x}),E=!0):this.su(y,x)||(r.track({type:2,doc:x}),E=!0,(h&&this.eu(x,h)>0||f&&this.eu(x,f)<0)&&(u=!0)):!y&&x?(r.track({type:0,doc:x}),E=!0):y&&!x&&(r.track({type:1,doc:y}),E=!0,(h||f)&&(u=!0)),E&&(x?(c=c.add(x),o=j?o.add(p):o.delete(p)):(c=c.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Ss:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,g)=>(function(x,N){const j=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Vt:E})}};return j(x)-j(N)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,f=h!==this.Xa;return this.Xa=h,c.length!==0||f?{snapshot:new ud(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vI,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new x4(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new b4(r))})),n}cu(e){this.Za=e.ks,this.Ya=pt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ud.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const dN="SyncEngine";class uK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dK{constructor(e){this.key=e,this.hu=!1}}class hK{constructor(e,n,r,i,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Lc((u=>Mz(u)),Ey),this.Iu=new Map,this.Eu=new Set,this.Ru=new rn(Ue.comparator),this.Au=new Map,this.Vu=new Xw,this.du={},this.mu=new Map,this.fu=cd.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fK(t,e,n=!0){const r=S4(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await _4(r,e,n,!0),i}async function mK(t,e){const n=S4(t);await _4(n,e,!0,!1)}async function _4(t,e,n,r){const i=await RG(t.localStore,Gs(e)),o=i.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await pK(t,e,o,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&f4(t.remoteStore,i),u}async function pK(t,e,n,r,i){t.pu=(g,y,x)=>(async function(j,E,A,R){let T=E.view.ru(A);T.Ss&&(T=await dI(j.localStore,E.query,!1).then((({documents:D})=>E.view.ru(D,T))));const I=R&&R.targetChanges.get(E.targetId),M=R&&R.targetMismatches.get(E.targetId)!=null,B=E.view.applyChanges(T,j.isPrimaryClient,I,M);return _I(j,E.targetId,B.au),B.snapshot})(t,g,y,x);const o=await dI(t.localStore,e,!0),c=new cK(e,o.ks),u=c.ru(o.documents),h=im.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=c.applyChanges(u,t.isPrimaryClient,h);_I(t,n,f.au);const p=new uK(e,n,c);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function gK(t,e,n){const r=nt(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((c=>!Ey(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uj(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tN(r.remoteStore,i.targetId),fj(r,i.targetId)})).catch(Sd)):(fj(r,i.targetId),await uj(r.localStore,i.targetId,!0))}async function vK(t,e){const n=nt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tN(n.remoteStore,r.targetId))}async function yK(t,e,n){const r=EK(t);try{const i=await(function(c,u){const h=nt(c),f=Xe.now(),p=u.reduce(((x,N)=>x.add(N.key)),pt());let g,y;return h.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let N=Va(),j=pt();return h.xs.getEntries(x,p).next((E=>{N=E,N.forEach(((A,R)=>{R.isValidDocument()||(j=j.add(A))}))})).next((()=>h.localDocuments.getOverlayedDocuments(x,N))).next((E=>{g=E;const A=[];for(const R of u){const T=OH(R,g.get(R.key).overlayedDocument);T!=null&&A.push(new jl(R.key,T,Tz(T.value.mapValue),Rr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,A,u)})).next((E=>{y=E;const A=E.applyToLocalDocumentSet(g,j);return h.documentOverlayCache.saveOverlays(x,E.batchId,A)}))})).then((()=>({batchId:y.batchId,changes:qz(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,u,h){let f=c.du[c.currentUser.toKey()];f||(f=new rn(mt)),f=f.insert(u,h),c.du[c.currentUser.toKey()]=f})(r,i.batchId,n),await am(r,i.changes),await Ry(r.remoteStore)}catch(i){const o=aN(i,"Failed to persist write");n.reject(o)}}async function j4(t,e){const n=nt(t);try{const r=await IG(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const c=n.Au.get(o);c&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?St(c.hu,14607):i.removedDocuments.size>0&&(St(c.hu,42227),c.hu=!1))})),await am(n,r,e)}catch(r){await Sd(r)}}function xI(t,e,n){const r=nt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(c,u){const h=nt(c);h.onlineState=u;let f=!1;h.queries.forEach(((p,g)=>{for(const y of g.ba)y.va(u)&&(f=!0)})),f&&cN(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bK(t,e,n){const r=nt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new rn(Ue.comparator);c=c.insert(o,_r.newNoDocument(o,et.min()));const u=pt().add(o),h=new Iy(et.min(),new Map,new rn(mt),c,u);await j4(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),hN(r)}else await uj(r.localStore,e,!1).then((()=>fj(r,e,n))).catch(Sd)}async function xK(t,e){const n=nt(t),r=e.batch.batchId;try{const i=await CG(n.localStore,e);N4(n,r,null),w4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await am(n,i)}catch(i){await Sd(i)}}async function _K(t,e,n){const r=nt(t);try{const i=await(function(c,u){const h=nt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next((g=>(St(g!==null,37113),p=g.keys(),h.mutationQueue.removeMutationBatch(f,g)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);N4(r,e,n),w4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await am(r,i)}catch(i){await Sd(i)}}function w4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function N4(t,e,n){const r=nt(t);let i=r.du[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function fj(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||E4(t,r)}))}function E4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(tN(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),hN(t))}function _I(t,e,n){for(const r of n)r instanceof b4?(t.Vu.addReference(r.key,e),jK(t,r)):r instanceof x4?(Pe(dN,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||E4(t,r.key)):We(19791,{wu:r})}function jK(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Pe(dN,"New document in limbo: "+n),t.Eu.add(r),hN(t))}function hN(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ue(Kt.fromString(e)),r=t.fu.next();t.Au.set(r,new dK(n)),t.Ru=t.Ru.insert(n,r),f4(t.remoteStore,new Zo(Gs(Ny(n.path)),r,"TargetPurposeLimboResolution",_y.ce))}}async function am(t,e,n){const r=nt(t),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{c.push(r.pu(h,e,n).then((f=>{if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:n?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){i.push(f);const p=Zw.Es(h.targetId,f);o.push(p)}})))})),await Promise.all(c),r.Pu.J_(i),await(async function(h,f){const p=nt(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Ee.forEach(f,(y=>Ee.forEach(y.Ts,(x=>p.persistence.referenceDelegate.addReference(g,y.targetId,x))).next((()=>Ee.forEach(y.Is,(x=>p.persistence.referenceDelegate.removeReference(g,y.targetId,x)))))))))}catch(g){if(!Ad(g))throw g;Pe(eN,"Failed to update sequence numbers: "+g)}for(const g of f){const y=g.targetId;if(!g.fromCache){const x=p.vs.get(y),N=x.snapshotVersion,j=x.withLastLimboFreeSnapshotVersion(N);p.vs=p.vs.insert(y,j)}}})(r.localStore,o))}async function wK(t,e){const n=nt(t);if(!n.currentUser.isEqual(e)){Pe(dN,"User change. New user:",e.toKey());const r=await c4(n.localStore,e);n.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new Ce(_e.CANCELLED,c))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await am(n,r.Ns)}}function NK(t,e){const n=nt(t),r=n.Au.get(e);if(r&&r.hu)return pt().add(r.key);{let i=pt();const o=n.Iu.get(e);if(!o)return i;for(const c of o){const u=n.Tu.get(c);i=i.unionWith(u.view.nu)}return i}}function S4(t){const e=nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=j4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bK.bind(null,e),e.Pu.J_=oK.bind(null,e.eventManager),e.Pu.yu=lK.bind(null,e.eventManager),e}function EK(t){const e=nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_K.bind(null,e),e}class dv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Py(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return TG(this.persistence,new EG,e.initialUser,this.serializer)}Cu(e){return new l4(Jw.Vi,this.serializer)}Du(e){return new DG}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dv.provider={build:()=>new dv};class SK extends dv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){St(this.persistence.referenceDelegate instanceof cv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wr.withCacheSize(this.cacheSizeBytes):Wr.DEFAULT;return new l4((r=>cv.Vi(r,n)),this.serializer)}}class mj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wK.bind(null,this.syncEngine),await iK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aK})()}createDatastore(e){const n=Py(e.databaseInfo.databaseId),r=UG(e.databaseInfo);return HG(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,c,u){return new KG(r,i,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>xI(this.syncEngine,n,0)),(function(){return mI.v()?new mI:new MG})())}createSyncEngine(e,n){return(function(i,o,c,u,h,f,p){const g=new hK(i,o,c,u,h,f);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=nt(n);Pe(Nc,"RemoteStore shutting down."),r.Ea.add(5),await sm(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mj.provider={build:()=>new mj};class fN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ua("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ml="FirestoreClient";class AK{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=xr.UNAUTHENTICATED,this.clientId=Vw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{Pe(ml,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Pe(ml,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=aN(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Kx(t,e){t.asyncQueue.verifyOperationInProgress(),Pe(ml,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await c4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function jI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TK(t);Pe(ml,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>gI(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>gI(e.remoteStore,i))),t._onlineComponents=e}async function TK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe(ml,"Using user provided OfflineComponentProvider");try{await Kx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===_e.FAILED_PRECONDITION||i.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;sd("Error using user provided cache. Falling back to memory cache: "+n),await Kx(t,new dv)}}else Pe(ml,"Using default OfflineComponentProvider"),await Kx(t,new SK(void 0));return t._offlineComponents}async function A4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe(ml,"Using user provided OnlineComponentProvider"),await jI(t,t._uninitializedComponentsProvider._online)):(Pe(ml,"Using default OnlineComponentProvider"),await jI(t,new mj))),t._onlineComponents}function CK(t){return A4(t).then((e=>e.syncEngine))}async function hv(t){const e=await A4(t),n=e.eventManager;return n.onListen=fK.bind(null,e.syncEngine),n.onUnlisten=gK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vK.bind(null,e.syncEngine),n}function IK(t,e,n,r){const i=new fN(r),o=new uN(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>oN(await hv(t),o))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>lN(await hv(t),o)))}}function PK(t,e,n={}){const r=new Da;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const p=new fN({next:y=>{p.Nu(),c.enqueueAndForget((()=>lN(o,g)));const x=y.docs.has(u);!x&&y.fromCache?f.reject(new Ce(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&h&&h.source==="server"?f.reject(new Ce(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new uN(Ny(u.path),p,{includeMetadataChanges:!0,Ka:!0});return oN(o,g)})(await hv(t),t.asyncQueue,e,n,r))),r.promise}function OK(t,e,n={}){const r=new Da;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const p=new fN({next:y=>{p.Nu(),c.enqueueAndForget((()=>lN(o,g))),y.fromCache&&h.source==="server"?f.reject(new Ce(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new uN(u,p,{includeMetadataChanges:!0,Ka:!0});return oN(o,g)})(await hv(t),t.asyncQueue,e,n,r))),r.promise}function RK(t,e){const n=new Da;return t.asyncQueue.enqueueAndForget((async()=>yK(await CK(t),e,n))),n.promise}function T4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const kK="ComponentProvider",wI=new Map;function DK(t,e,n,r,i){return new tH(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,T4(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const C4="firestore.googleapis.com",NI=!0;class EI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C4,this.ssl=NI}else this.host=e.host,this.ssl=e.ssl??NI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lG)throw new Ce(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$F("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ce(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ce(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ce(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ky{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new RF;switch(r.type){case"firstParty":return new zF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=wI.get(n);r&&(Pe(kK,"Removing Datastore"),wI.delete(n),r.terminate())})(this),Promise.resolve()}}function MK(t,e,n,r={}){t=Or(t,ky);const i=bl(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(Aw(`https://${u}`),Tw("Firestore",!0)),o.host!==C4&&o.host!==u&&sd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:i,emulatorOptions:r};if(!bc(h,c)&&(t._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=xr.MOCK_USER;else{f=wM(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ce(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xr(g)}t._authCredentials=new kF(new gz(f,p))}}class Ja{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ja(this.firestore,e,this._query)}}class gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nm(n,gn._jsonSchema))return new gn(e,r||null,new Ue(Kt.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:Mn("string",gn._jsonSchemaVersion),referencePath:Mn("string")};class sl extends Ja{constructor(e,n,r){super(e,n,Ny(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Ue(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function Ge(t,e,...n){if(t=Ht(t),vz("collection","path",e),t instanceof ky){const r=Kt.fromString(e,...n);return L2(r),new sl(t,null,r)}{if(!(t instanceof gn||t instanceof sl))throw new Ce(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return L2(r),new sl(t.firestore,null,r)}}function He(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=Vw.newId()),vz("doc","path",e),t instanceof ky){const r=Kt.fromString(e,...n);return z2(r),new gn(t,null,new Ue(r))}{if(!(t instanceof gn||t instanceof sl))throw new Ce(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return z2(r),new gn(t.firestore,t instanceof sl?t.converter:null,new Ue(r))}}const SI="AsyncQueue";class AI{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new d4(this,"async_queue_retry"),this._c=()=>{const r=Gx();r&&Pe(SI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Gx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ad(e))throw e;Pe(SI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ua("INTERNAL UNHANDLED ERROR: ",TI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=sN.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&We(47125,{Pc:TI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function TI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xs extends ky{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new AI,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AI(e),this._firestoreClient=void 0,await e}}}function zK(t,e){const n=typeof t=="object"?t:Pw(),r=typeof t=="string"?t:iv,i=gy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=xM("firestore");o&&MK(i,...o)}return i}function om(t){if(t._terminated)throw new Ce(_e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LK(t),t._firestoreClient}function LK(t){const e=t._freezeSettings(),n=DK(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new AK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}class Li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Li(pr.fromBase64String(e))}catch(n){throw new Ce(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Li(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nm(e,Li._jsonSchema))return Li.fromBase64String(e.bytes)}}Li._jsonSchemaVersion="firestore/bytes/1.0",Li._jsonSchema={type:Mn("string",Li._jsonSchemaVersion),bytes:Mn("string")};class Dy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lm{constructor(e){this._methodName=e}}class Qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qs._jsonSchemaVersion}}static fromJSON(e){if(nm(e,Qs._jsonSchema))return new Qs(e.latitude,e.longitude)}}Qs._jsonSchemaVersion="firestore/geoPoint/1.0",Qs._jsonSchema={type:Mn("string",Qs._jsonSchemaVersion),latitude:Mn("number"),longitude:Mn("number")};class cs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nm(e,cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new cs(e.vectorValues);throw new Ce(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cs._jsonSchemaVersion="firestore/vectorValue/1.0",cs._jsonSchema={type:Mn("string",cs._jsonSchemaVersion),vectorValues:Mn("object")};const qK=/^__.*__$/;class UK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jl(e,this.data,this.fieldMask,n,this.fieldTransforms):new rm(e,this.data,n,this.fieldTransforms)}}class I4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new jl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function P4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{dataSource:t})}}class mN{constructor(e,n,r,i,o,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new mN({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return fv(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(P4(this.dataSource)&&qK.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class VK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Py(e)}createContext(e,n,r,i=!1){return new mN({dataSource:e,methodName:n,targetDoc:r,path:fr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cm(t){const e=t._freezeSettings(),n=Py(t._databaseId);return new VK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pN(t,e,n,r,i,o={}){const c=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);yN("Data must be an object, but it was:",c,r);const u=k4(r,c);let h,f;if(o.merge)h=new mi(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const p=[];for(const g of o.mergeFields){const y=Ec(e,g,n);if(!c.contains(y))throw new Ce(_e.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);z4(p,y)||p.push(y)}h=new mi(p),f=c.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,f=c.fieldTransforms;return new UK(new Yr(u),h,f)}class My extends lm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof My}}class gN extends lm{_toFieldTransform(e){return new Kz(e.path,new Cf)}isEqual(e){return e instanceof gN}}class vN extends lm{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Of(e.serializer,Bz(e.serializer,this.Vc));return new Kz(e.path,n)}isEqual(e){return e instanceof vN&&this.Vc===e.Vc}}function O4(t,e,n,r){const i=t.createContext(1,e,n);yN("Data must be an object, but it was:",i,r);const o=[],c=Yr.empty();_l(r,((h,f)=>{const p=M4(e,h,n);f=Ht(f);const g=i.childContextForFieldPath(p);if(f instanceof My)o.push(p);else{const y=um(f,g);y!=null&&(o.push(p),c.set(p,y))}}));const u=new mi(o);return new I4(c,u,i.fieldTransforms)}function R4(t,e,n,r,i,o){const c=t.createContext(1,e,n),u=[Ec(e,r,n)],h=[i];if(o.length%2!=0)throw new Ce(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)u.push(Ec(e,o[y])),h.push(o[y+1]);const f=[],p=Yr.empty();for(let y=u.length-1;y>=0;--y)if(!z4(f,u[y])){const x=u[y];let N=h[y];N=Ht(N);const j=c.childContextForFieldPath(x);if(N instanceof My)f.push(x);else{const E=um(N,j);E!=null&&(f.push(x),p.set(x,E))}}const g=new mi(f);return new I4(p,g,c.fieldTransforms)}function BK(t,e,n,r=!1){return um(n,t.createContext(r?4:3,e))}function um(t,e){if(D4(t=Ht(t)))return yN("Unsupported field value:",e,t),k4(t,e);if(t instanceof lm)return(function(r,i){if(!P4(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const o=[];let c=0;for(const u of r){let h=um(u,i.childContextForArray(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Bz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Xe.fromDate(r);return{timestampValue:lv(i.serializer,o)}}if(r instanceof Xe){const o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lv(i.serializer,o)}}if(r instanceof Qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Li)return{bytesValue:Zz(i.serializer,r._byteString)};if(r instanceof gn){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cs)return(function(c,u){const h=c instanceof cs?c.toArray():c;return{mapValue:{fields:{[Sz]:{stringValue:Az},[sv]:{arrayValue:{values:h.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return Kw(u.serializer,p)}))}}}}}})(r,i);if(a4(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${xy(r)}`)})(t,e)}function k4(t,e){const n={};return xz(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(t,((r,i)=>{const o=um(i,e.childContextForField(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function D4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Qs||t instanceof Li||t instanceof gn||t instanceof lm||t instanceof cs||a4(t))}function yN(t,e,n){if(!D4(n)||!yz(n)){const r=xy(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Ec(t,e,n){if((e=Ht(e))instanceof Dy)return e._internalPath;if(typeof e=="string")return M4(t,e);throw fv("Field path arguments must be of type string or ",t,!1,void 0,n)}const $K=new RegExp("[~\\*/\\[\\]]");function M4(t,e,n){if(e.search($K)>=0)throw fv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dy(...e.split("."))._internalPath}catch{throw fv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fv(t,e,n,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new Ce(_e.INVALID_ARGUMENT,u+t+h)}function z4(t,e){return t.some((n=>n.isEqual(e)))}class FK{convertValue(e,n="none"){switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _l(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){const n=e.fields?.[sv].arrayValue?.values?.map((r=>jn(r.doubleValue)));return new cs(n)}convertGeoPoint(e){return new Qs(jn(e.latitude),jn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ef(e));default:return null}}convertTimestamp(e){const n=ul(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Kt.fromString(e);St(s4(r),9688,{name:e});const i=new Sf(r.get(1),r.get(3)),o=new Ue(r.popFirst(5));return i.isEqual(n)||Ua(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class bN extends FK{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function en(){return new gN("serverTimestamp")}function L4(t){return new vN("increment",t)}const CI="@firebase/firestore",II="4.10.0";function PI(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class q4{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Ec("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HK extends q4{data(){return super.data()}}function U4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ce(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xN{}class _N extends xN{}function yt(t,e,...n){let r=[];e instanceof xN&&r.push(e),r=r.concat(n),(function(o){const c=o.filter((h=>h instanceof jN)).length,u=o.filter((h=>h instanceof zy)).length;if(c>1||c>0&&u>0)throw new Ce(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class zy extends _N{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zy(e,n,r)}_apply(e){const n=this._parse(e);return V4(e._query,n),new Ja(e.firestore,e.converter,sj(e._query,n))}_parse(e){const n=cm(e.firestore);return(function(o,c,u,h,f,p,g){let y;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ce(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){RI(g,p);const N=[];for(const j of g)N.push(OI(h,o,j));y={arrayValue:{values:N}}}else y=OI(h,o,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||RI(g,p),y=BK(u,c,g,p==="in"||p==="not-in");return Dn.create(f,p,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function at(t,e,n){const r=e,i=Ec("where",t);return zy._create(i,r,n)}class jN extends xN{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jN(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:fs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let c=i;const u=o.getFlattenedFilters();for(const h of u)V4(c,h),c=sj(c,h)})(e._query,n),new Ja(e.firestore,e.converter,sj(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wN extends _N{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wN(e,n)}_apply(e){const n=(function(i,o,c){if(i.startAt!==null)throw new Ce(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ce(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tf(o,c)})(e._query,this._field,this._direction);return new Ja(e.firestore,e.converter,bH(e._query,n))}}function Nn(t,e="asc"){const n=e,r=Ec("orderBy",t);return wN._create(r,n)}class NN extends _N{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new NN(e,n,r)}_apply(e){return new Ja(e.firestore,e.converter,ov(e._query,this._limit,this._limitType))}}function Js(t){return FF("limit",t),NN._create("limit",t,"F")}function OI(t,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Ce(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dz(e)&&n.indexOf("/")!==-1)throw new Ce(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Kt.fromString(n));if(!Ue.isDocumentKey(r))throw new Ce(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return G2(t,new Ue(r))}if(n instanceof gn)return G2(t,n._key);throw new Ce(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xy(n)}.`)}function RI(t,e){if(!Array.isArray(t)||t.length===0)throw new Ce(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V4(t,e){const n=(function(i,o){for(const c of i)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ce(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function EN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class sf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dc extends q4{constructor(e,n,r,i,o,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ec("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=dc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}dc._jsonSchemaVersion="firestore/documentSnapshot/1.0",dc._jsonSchema={type:Mn("string",dc._jsonSchemaVersion),bundleSource:Mn("string","DocumentSnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class qg extends dc{data(e={}){return super.data(e)}}class hc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new sf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new qg(this._firestore,this._userDataWriter,r.key,r,new sf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const h=new qg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new sf(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new qg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new sf(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:GK(u.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:t})}}hc._jsonSchemaVersion="firestore/querySnapshot/1.0",hc._jsonSchema={type:Mn("string",hc._jsonSchemaVersion),bundleSource:Mn("string","QuerySnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class KK{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=cm(e)}set(e,n,r){this._verifyNotCommitted();const i=Qx(e,this._firestore),o=EN(i.converter,n,r),c=pN(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,Rr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Qx(e,this._firestore);let c;return c=typeof(n=Ht(n))=="string"||n instanceof Dy?R4(this._dataReader,"WriteBatch.update",o._key,n,r,i):O4(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(c.toMutation(o._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qx(e,this._firestore);return this._mutations=this._mutations.concat(new Cy(n._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qx(t,e){if((t=Ht(t)).firestore!==e)throw new Ce(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Nr(t){t=Or(t,gn);const e=Or(t.firestore,Xs),n=om(e);return PK(n,t._key).then((r=>$4(e,t,r)))}function lt(t){t=Or(t,Ja);const e=Or(t.firestore,Xs),n=om(e),r=new bN(e);return U4(t._query),OK(n,t._query).then((i=>new hc(e,r,t,i)))}function Ly(t,e,n){t=Or(t,gn);const r=Or(t.firestore,Xs),i=EN(t.converter,e,n),o=cm(r);return dm(r,[pN(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rr.none())])}function sn(t,e,n,...r){t=Or(t,gn);const i=Or(t.firestore,Xs),o=cm(i);let c;return c=typeof(e=Ht(e))=="string"||e instanceof Dy?R4(o,"updateDoc",t._key,e,n,r):O4(o,"updateDoc",t._key,e),dm(i,[c.toMutation(t._key,Rr.exists(!0))])}function Uc(t){return dm(Or(t.firestore,Xs),[new Cy(t._key,Rr.none())])}function ei(t,e){const n=Or(t.firestore,Xs),r=He(t),i=EN(t.converter,e),o=cm(t.firestore);return dm(n,[pN(o,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rr.exists(!1))]).then((()=>r))}function B4(t,...e){t=Ht(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||PI(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(PI(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let o,c,u;if(t instanceof gn)c=Or(t.firestore,Xs),u=Ny(t._key.path),o={next:f=>{e[r]&&e[r]($4(c,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Or(t,Ja);c=Or(f.firestore,Xs),u=f._query;const p=new bN(c);o={next:g=>{e[r]&&e[r](new hc(c,p,f,g))},error:e[r+1],complete:e[r+2]},U4(t._query)}const h=om(c);return IK(h,u,i,o)}function dm(t,e){const n=om(t);return RK(n,e)}function $4(t,e,n){const r=n.docs.get(e._key),i=new bN(t);return new dc(t,i,e._key,r,new sf(n.hasPendingWrites,n.fromCache),e.converter)}function Rf(t){return t=Or(t,Xs),om(t),new KK(t,(e=>dm(t,e)))}(function(e,n=!0){OF(Mc),xc(new ll("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new Xs(new DF(r.getProvider("auth-internal")),new LF(c,r.getProvider("app-check-internal")),nH(c,i),c);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),$s(CI,II,e),$s(CI,II,"esm2020")})();var QK="firebase",WK="12.8.0";$s(QK,WK,"app");const F4="firebasestorage.googleapis.com",H4="storageBucket",YK=120*1e3,XK=600*1e3;class yn extends sa{constructor(e,n,r=0){super(Wx(e),`Firebase Storage: ${n} (${Wx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vn||(vn={}));function Wx(t){return"storage/"+t}function SN(){const t="An unknown error occurred, please check the error payload for server response.";return new yn(vn.UNKNOWN,t)}function JK(t){return new yn(vn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ZK(t){return new yn(vn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eQ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yn(vn.UNAUTHENTICATED,t)}function tQ(){return new yn(vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nQ(t){return new yn(vn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function rQ(){return new yn(vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iQ(){return new yn(vn.CANCELED,"User canceled the upload/download.")}function sQ(t){return new yn(vn.INVALID_URL,"Invalid URL '"+t+"'.")}function aQ(t){return new yn(vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oQ(){return new yn(vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+H4+"' property when initializing the app?")}function lQ(){return new yn(vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cQ(){return new yn(vn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uQ(t){return new yn(vn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pj(t){return new yn(vn.INVALID_ARGUMENT,t)}function G4(){return new yn(vn.APP_DELETED,"The Firebase app was deleted.")}function dQ(t){return new yn(vn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vf(t,e){return new yn(vn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vh(t){throw new yn(vn.INTERNAL_ERROR,"Internal error: "+t)}class pi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=pi.makeFromUrl(e,n)}catch{return new pi(e,"")}if(r.path==="")return r;throw aQ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),h={bucket:1,path:3};function f(I){I.path_=decodeURIComponent(I.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",x=new RegExp(`^https?://${g}/${p}/b/${i}/o${y}`,"i"),N={bucket:1,path:3},j=n===F4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",A=new RegExp(`^https?://${j}/${i}/${E}`,"i"),T=[{regex:u,indices:h,postModify:o},{regex:x,indices:N,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let I=0;I<T.length;I++){const M=T[I],B=M.regex.exec(e);if(B){const D=B[M.indices.bucket];let P=B[M.indices.path];P||(P=""),r=new pi(D,P),M.postModify(r);break}}if(r==null)throw sQ(e);return r}}class hQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function fQ(t,e,n){let r=1,i=null,o=null,c=!1,u=0;function h(){return u===2}let f=!1;function p(...E){f||(f=!0,e.apply(null,E))}function g(E){i=setTimeout(()=>{i=null,t(x,h())},E)}function y(){o&&clearTimeout(o)}function x(E,...A){if(f){y();return}if(E){y(),p.call(null,E,...A);return}if(h()||c){y(),p.call(null,E,...A);return}r<64&&(r*=2);let T;u===1?(u=2,T=0):T=(r+Math.random())*1e3,g(T)}let N=!1;function j(E){N||(N=!0,y(),!f&&(i!==null?(E||(u=2),clearTimeout(i),g(0)):E||(u=1)))}return g(0),o=setTimeout(()=>{c=!0,j(!0)},n),j}function mQ(t){t(!1)}function pQ(t){return t!==void 0}function gQ(t){return typeof t=="object"&&!Array.isArray(t)}function AN(t){return typeof t=="string"||t instanceof String}function kI(t){return TN()&&t instanceof Blob}function TN(){return typeof Blob<"u"}function DI(t,e,n,r){if(r<e)throw pj(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw pj(`Invalid value for '${t}'. Expected ${n} or less.`)}function qy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function K4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var fc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fc||(fc={}));function vQ(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}class yQ{constructor(e,n,r,i,o,c,u,h,f,p,g,y=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,j)=>{this.resolve_=N,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new sg(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===fc.NO_ERROR,h=o.getStatus();if(!u||vQ(h,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===fc.ABORT;r(!1,new sg(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new sg(f,o))})},n=(r,i)=>{const o=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());pQ(h)?o(h):o()}catch(h){c(h)}else if(u!==null){const h=SN();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(i.canceled){const h=this.appDelete_?G4():iQ();c(h)}else{const h=rQ();c(h)}};this.canceled_?n(!1,new sg(!1,null,!0)):this.backoffId_=fQ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function bQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function xQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _Q(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function wQ(t,e,n,r,i,o,c=!0,u=!1){const h=K4(t.urlParams),f=t.url+h,p=Object.assign({},t.headers);return _Q(p,e),bQ(p,n),xQ(p,o),jQ(p,r),new yQ(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}function NQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EQ(...t){const e=NQ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(TN())return new Blob(t);throw new yn(vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SQ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function AQ(t){if(typeof atob>"u")throw uQ("base-64");return atob(t)}const Us={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yx{constructor(e,n){this.data=e,this.contentType=n||null}}function TQ(t,e){switch(t){case Us.RAW:return new Yx(Q4(e));case Us.BASE64:case Us.BASE64URL:return new Yx(W4(t,e));case Us.DATA_URL:return new Yx(IQ(e),PQ(e))}throw SN()}function Q4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=t.charCodeAt(++n);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function CQ(t){let e;try{e=decodeURIComponent(t)}catch{throw vf(Us.DATA_URL,"Malformed data URL.")}return Q4(e)}function W4(t,e){switch(t){case Us.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw vf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Us.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw vf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=AQ(e)}catch(i){throw i.message.includes("polyfill")?i:vf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Y4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vf(Us.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=OQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function IQ(t){const e=new Y4(t);return e.base64?W4(Us.BASE64,e.rest):CQ(e.rest)}function PQ(t){return new Y4(t).contentType}function OQ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Yo{constructor(e,n){let r=0,i="";kI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(kI(this.data_)){const r=this.data_,i=SQ(r,e,n);return i===null?null:new Yo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yo(r,!0)}}static getBlob(...e){if(TN()){const n=e.map(r=>r instanceof Yo?r.data_:r);return new Yo(EQ.apply(null,n))}else{const n=e.map(c=>AN(c)?TQ(Us.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[o++]=c[u]}),new Yo(i,!0)}}uploadData(){return this.data_}}function X4(t){let e;try{e=JSON.parse(t)}catch{return null}return gQ(e)?e:null}function RQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kQ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function J4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function DQ(t,e){return e}class Cr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||DQ}}let ag=null;function MQ(t){return!AN(t)||t.length<2?t:J4(t)}function Z4(){if(ag)return ag;const t=[];t.push(new Cr("bucket")),t.push(new Cr("generation")),t.push(new Cr("metageneration")),t.push(new Cr("name","fullPath",!0));function e(o,c){return MQ(c)}const n=new Cr("name");n.xform=e,t.push(n);function r(o,c){return c!==void 0?Number(c):c}const i=new Cr("size");return i.xform=r,t.push(i),t.push(new Cr("timeCreated")),t.push(new Cr("updated")),t.push(new Cr("md5Hash",null,!0)),t.push(new Cr("cacheControl",null,!0)),t.push(new Cr("contentDisposition",null,!0)),t.push(new Cr("contentEncoding",null,!0)),t.push(new Cr("contentLanguage",null,!0)),t.push(new Cr("contentType",null,!0)),t.push(new Cr("metadata","customMetadata",!0)),ag=t,ag}function zQ(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new pi(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function LQ(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const c=n[o];r[c.local]=c.xform(r,e[c.server])}return zQ(r,t),r}function eL(t,e,n){const r=X4(e);return r===null?null:LQ(t,r,n)}function qQ(t,e,n,r){const i=X4(e);if(i===null||!AN(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,g=t.fullPath,y="/b/"+c(p)+"/o/"+c(g),x=qy(y,n,r),N=K4({alt:"media",token:f});return x+N})[0]}function UQ(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class CN{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function tL(t){if(!t)throw SN()}function VQ(t,e){function n(r,i){const o=eL(t,i,e);return tL(o!==null),o}return n}function BQ(t,e){function n(r,i){const o=eL(t,i,e);return tL(o!==null),qQ(o,i,t.host,t._protocol)}return n}function nL(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=tQ():i=eQ():n.getStatus()===402?i=ZK(t.bucket):n.getStatus()===403?i=nQ(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function rL(t){const e=nL(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=JK(t.path)),o.serverResponse=i.serverResponse,o}return n}function $Q(t,e,n){const r=e.fullServerUrl(),i=qy(r,t.host,t._protocol),o="GET",c=t.maxOperationRetryTime,u=new CN(i,o,BQ(t,n),c);return u.errorHandler=rL(e),u}function FQ(t,e){const n=e.fullServerUrl(),r=qy(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function c(h,f){}const u=new CN(r,i,c,o);return u.successCodes=[200,204],u.errorHandler=rL(e),u}function HQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GQ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=HQ(null,e)),r}function KQ(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let T="";for(let I=0;I<2;I++)T=T+Math.random().toString().slice(2);return T}const h=u();c["Content-Type"]="multipart/related; boundary="+h;const f=GQ(e,r,i),p=UQ(f,n),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,y=`\r
--`+h+"--",x=Yo.getBlob(g,r,y);if(x===null)throw lQ();const N={name:f.fullPath},j=qy(o,t.host,t._protocol),E="POST",A=t.maxUploadRetryTime,R=new CN(j,E,VQ(t,n),A);return R.urlParams=N,R.headers=c,R.body=x.uploadData(),R.errorHandler=nL(e),R}class QQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Vh("cannot .send() more than once");if(bl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class WQ extends QQ{initXhr(){this.xhr_.responseType="text"}}function IN(){return new WQ}class Sc{constructor(e,n){this._service=e,n instanceof pi?this._location=n:this._location=pi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sc(e,n)}get root(){const e=new pi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return J4(this._location.path)}get storage(){return this._service}get parent(){const e=RQ(this._location.path);if(e===null)return null;const n=new pi(this._location.bucket,e);return new Sc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw dQ(e)}}function YQ(t,e,n){t._throwIfRoot("uploadBytes");const r=KQ(t.storage,t._location,Z4(),new Yo(e,!0),n);return t.storage.makeRequestWithTokens(r,IN).then(i=>({metadata:i,ref:t}))}function XQ(t){t._throwIfRoot("getDownloadURL");const e=$Q(t.storage,t._location,Z4());return t.storage.makeRequestWithTokens(e,IN).then(n=>{if(n===null)throw cQ();return n})}function JQ(t){t._throwIfRoot("deleteObject");const e=FQ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,IN)}function ZQ(t,e){const n=kQ(t._location.path,e),r=new pi(t._location.bucket,n);return new Sc(t.storage,r)}function eW(t){return/^[A-Za-z]+:\/\//.test(t)}function tW(t,e){return new Sc(t,e)}function iL(t,e){if(t instanceof PN){const n=t;if(n._bucket==null)throw oQ();const r=new Sc(n,n._bucket);return e!=null?iL(r,e):r}else return e!==void 0?ZQ(t,e):t}function nW(t,e){if(e&&eW(e)){if(t instanceof PN)return tW(t,e);throw pj("To use ref(service, url), the first argument must be a Storage instance.")}else return iL(t,e)}function MI(t,e){const n=e?.[H4];return n==null?null:pi.makeFromBucketSpec(n,t)}function rW(t,e,n,r={}){t.host=`${e}:${n}`;const i=bl(e);i&&(Aw(`https://${t.host}/b`),Tw("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:wM(o,t.app.options.projectId))}class PN{constructor(e,n,r,i,o,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=F4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YK,this._maxUploadRetryTime=XK,this._requests=new Set,i!=null?this._bucket=pi.makeFromBucketSpec(i,this._host):this._bucket=MI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pi.makeFromBucketSpec(this._url,e):this._bucket=MI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new hQ(G4());{const c=wQ(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const zI="@firebase/storage",LI="0.14.0";const sL="storage";function iW(t,e,n){return t=Ht(t),YQ(t,e,n)}function sW(t){return t=Ht(t),XQ(t)}function aW(t){return t=Ht(t),JQ(t)}function qI(t,e){return t=Ht(t),nW(t,e)}function oW(t=Pw(),e){t=Ht(t);const r=gy(t,sL).getImmediate({identifier:e}),i=xM("storage");return i&&lW(r,...i),r}function lW(t,e,n,r={}){rW(t,e,n,r)}function cW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new PN(n,r,i,e,Mc)}function uW(){xc(new ll(sL,cW,"PUBLIC").setMultipleInstances(!0)),$s(zI,LI,""),$s(zI,LI,"esm2020")}uW();const dW={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},ON=SM(dW),og=IF(ON),Se=zK(ON),UI=oW(ON),VI={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},BI=t=>VI[t]||VI.default,aL=_.createContext(null),hW=({children:t})=>{const[e,n]=_.useState(null),[r,i]=_.useState(!0),o=async y=>{try{const x=await Nr(He(Se,"users",y));if(x.exists()){const N=x.data();return{uid:y,email:N.email,displayName:N.displayName,role:N.role,isPremium:N.isPremium||!1,subscriptionEnd:N.subscriptionEnd?.toDate()||null,photoURL:N.photoURL,createdAt:N.createdAt?.toDate()||new Date,lastLogin:N.lastLogin?.toDate()}}return null}catch(x){return console.error("Erreur lors de la rcupration des donnes utilisateur:",x),null}},c=async(y,x)=>{const N=He(Se,"users",y.uid);(await Nr(N)).exists()?await sn(N,{lastLogin:en()}):await Ly(N,{email:y.email,displayName:y.displayName||x?.displayName||"",role:x?.role||"eleve",isPremium:!1,photoURL:y.photoURL,createdAt:en(),lastLogin:en()})},u=async(y,x)=>{try{const N=await f$(og,y,x);await c(N.user)}catch(N){throw new Error(BI(N.code))}},h=async y=>{try{if(y.password!==y.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const x=await h$(og,y.email,y.password);await p$(x.user,{displayName:y.displayName}),await c(x.user,{displayName:y.displayName,role:y.role})}catch(x){throw x.message?x:new Error(BI(x.code))}},f=async()=>{try{await b$(og),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},p=async y=>{if(!e)throw new Error("Aucun utilisateur connect.");try{const x=He(Se,"users",e.uid);await sn(x,{...y,updatedAt:en()}),n(N=>N?{...N,...y}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};_.useEffect(()=>{const y=y$(og,async x=>{if(x){const N=await o(x.uid);n(N)}else n(null);i(!1)});return()=>y()},[]);const g={currentUser:e,loading:r,login:u,register:h,logout:f,updateProfile:p};return a.jsx(aL.Provider,{value:g,children:r?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement..."})]}):t})},qn=()=>{const t=_.useContext(aL);if(!t)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return t},RN=({children:t,allowedRoles:e,requirePremium:n=!1})=>{const{currentUser:r,loading:i}=qn();return i?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Vrification des autorisations..."})]}):r?e&&!e.includes(r.role)?a.jsxs("div",{className:"error-container",children:[a.jsx("h2",{children:"Accs non autoris"}),a.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),a.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!r.isPremium?a.jsxs("div",{className:"error-container premium-required",children:[a.jsx("h2",{children:"Contenu Premium"}),a.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),a.jsxs("div",{className:"premium-cta",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",a.jsx("strong",{children:"20 000 FCFA/an"})]}),a.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):a.jsx(a.Fragment,{children:t}):a.jsxs("div",{className:"error-container",children:[a.jsx("h2",{children:"Accs refus"}),a.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),a.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},ns=({children:t})=>a.jsx(RN,{allowedRoles:["admin"],children:t}),fW=({children:t})=>a.jsx(RN,{allowedRoles:["admin","prof"],children:t});const mW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),$I=t=>{const e=pW(t);return e.charAt(0).toUpperCase()+e.slice(1)},oL=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),gW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var vW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yW=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...vW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:oL("lucide",i),...!o&&!gW(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,p])=>_.createElement(f,p)),...Array.isArray(o)?o:[o]]));const ze=(t,e)=>{const n=_.forwardRef(({className:r,...i},o)=>_.createElement(yW,{ref:o,iconNode:e,className:oL(`lucide-${mW($I(t))}`,`lucide-${t}`,r),...i}));return n.displayName=$I(t),n};const bW=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xx=ze("arrow-left",bW);const xW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nc=ze("arrow-right",xW);const _W=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],pl=ze("award",_W);const jW=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],us=ze("book-open",jW);const wW=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Jx=ze("calendar",wW);const NW=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mc=ze("chart-column",NW);const EW=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mv=ze("chevron-down",EW);const SW=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gj=ze("chevron-up",SW);const AW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pv=ze("circle-alert",AW);const TW=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fn=ze("circle-check-big",TW);const CW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ug=ze("circle-question-mark",CW);const IW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vj=ze("circle-x",IW);const PW=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dd=ze("clock",PW);const OW=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],RW=ze("copy",OW);const kW=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],af=ze("crown",kW);const DW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],td=ze("eye",DW);const MW=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],zW=ze("facebook",MW);const LW=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qW=ze("file-text",LW);const UW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kN=ze("funnel",UW);const VW=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],hd=ze("graduation-cap",VW);const BW=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$W=ze("grip-vertical",BW);const FW=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],HW=ze("heart",FW);const GW=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yj=ze("house",GW);const KW=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],QW=ze("instagram",KW);const WW=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],FI=ze("layout-dashboard",WW);const YW=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],XW=ze("linkedin",YW);const JW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],bj=ze("lock",JW);const ZW=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],HI=ze("log-out",ZW);const eY=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tY=ze("mail",eY);const nY=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rY=ze("map-pin",nY);const iY=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],sY=ze("menu",iY);const aY=[["path",{d:"M5 12h14",key:"1ays0h"}]],oY=ze("minus",aY);const lY=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cY=ze("pen-line",lY);const uY=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],dY=ze("phone",uY);const hY=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],yf=ze("play",hY);const fY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lg=ze("plus",fY);const mY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pY=ze("refresh-cw",mY);const gY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],vY=ze("rotate-ccw",gY);const yY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],bY=ze("save",yY);const xY=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lL=ze("search",xY);const _Y=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jY=ze("settings",_Y);const wY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],DN=ze("shield",wY);const NY=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],EY=ze("sparkles",NY);const SY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],gi=ze("star",SY);const AY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zx=ze("target",AY);const TY=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],CY=ze("timer",TY);const IY=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],GI=ze("trash-2",IY);const PY=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],OY=ze("trending-down",PY);const RY=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],of=ze("trending-up",RY);const kY=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],cL=ze("trophy",kY);const DY=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],MY=ze("twitter",DY);const zY=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],LY=ze("user-check",zY);const qY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],UY=ze("user-x",qY);const VY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],BY=ze("user",VY);const $Y=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vg=ze("users",$Y);const FY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pc=ze("x",FY);const HY=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],GY=ze("youtube",HY);const KY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],uL=ze("zap",KY),QY=()=>{const{currentUser:t,logout:e,loading:n}=qn(),r=Er(),i=ia(),[o,c]=_.useState(!1),[u,h]=_.useState(!1),[f,p]=_.useState(!1),g=_.useRef(null),y=[{path:"/",label:"Accueil",icon:a.jsx(yj,{size:18})},{path:"/disciplines",label:"Disciplines",icon:a.jsx(us,{size:18})},{path:"/quiz",label:"Quiz",icon:a.jsx(hd,{size:18}),requireAuth:!0,requirePremium:!0},{path:t?.role==="eleve"?"/eleve/dashboard":t?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:a.jsx(FI,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:a.jsx(EY,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:a.jsx(mc,{size:18}),requireAuth:!0,requireRole:["parent"]}];_.useEffect(()=>{const I=M=>{g.current&&!g.current.contains(M.target)&&h(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),_.useEffect(()=>{c(!1),h(!1)},[i.pathname]),_.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const x=async()=>{try{p(!0),await e(),h(!1),r("/")}catch(I){console.error("Erreur lors de la dconnexion:",I)}finally{p(!1)}},N=()=>{c(!o)},j=()=>{h(!u)},E=I=>!(I.requireAuth&&!t||I.requirePremium&&t&&!t.isPremium||I.requireRole&&t&&!I.requireRole.includes(t.role)),A=I=>I==="/"?i.pathname==="/":i.pathname.startsWith(I),R=I=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[I]||I,T=()=>t?t.displayName?t.displayName.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2):t.email[0].toUpperCase():"?";return a.jsxs("header",{className:"header",children:[a.jsxs("div",{className:"header__container",children:[a.jsxs(Ze,{to:"/",className:"header__logo",children:[a.jsx(hd,{className:"header__logo-icon",size:32}),a.jsxs("div",{className:"header__logo-text",children:[a.jsx("span",{className:"header__logo-name",children:"PedaClic"}),a.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),a.jsx("nav",{className:"header__nav header__nav--desktop",children:a.jsx("ul",{className:"header__nav-list",children:y.map(I=>E(I)&&a.jsx("li",{className:"header__nav-item",children:a.jsxs(Ze,{to:I.path,className:`header__nav-link ${A(I.path)?"header__nav-link--active":""}`,children:[I.icon,a.jsx("span",{children:I.label}),I.requirePremium&&a.jsx(af,{size:14,className:"header__premium-badge"})]})},I.path))})}),a.jsxs("div",{className:"header__actions",children:[n?a.jsx("div",{className:"header__loading",children:a.jsx("div",{className:"header__spinner"})}):t?a.jsxs("div",{className:"header__user",ref:g,children:[t.isPremium&&a.jsxs("span",{className:"header__premium-tag",children:[a.jsx(af,{size:14}),"Premium"]}),a.jsxs("button",{className:"header__user-button",onClick:j,"aria-expanded":u,"aria-haspopup":"true",children:[a.jsx("div",{className:"header__avatar",children:t.photoURL?a.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):a.jsx("span",{className:"header__avatar-initials",children:T()})}),a.jsx("span",{className:"header__user-name",children:t.displayName||t.email.split("@")[0]}),a.jsx(mv,{size:16,className:`header__chevron ${u?"header__chevron--open":""}`})]}),u&&a.jsxs("div",{className:"header__dropdown",children:[a.jsxs("div",{className:"header__dropdown-header",children:[a.jsx("p",{className:"header__dropdown-email",children:t.email}),a.jsx("span",{className:`header__dropdown-role header__dropdown-role--${t.role}`,children:R(t.role)})]}),a.jsx("div",{className:"header__dropdown-divider"}),a.jsxs("nav",{className:"header__dropdown-nav",children:[a.jsxs(Ze,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[a.jsx(FI,{size:18}),a.jsx("span",{children:"Tableau de bord"})]}),t.role==="eleve"&&a.jsxs(Ze,{to:"/eleve/suivi",className:"header__dropdown-link",children:[a.jsx(mc,{size:18}),a.jsx("span",{children:"Mes points  amliorer"})]}),t.role==="parent"&&a.jsxs(Ze,{to:"/parent/dashboard",className:"header__dropdown-link",children:[a.jsx(mc,{size:18}),a.jsx("span",{children:"Espace Parent"})]}),a.jsxs(Ze,{to:"/profil",className:"header__dropdown-link",children:[a.jsx(BY,{size:18}),a.jsx("span",{children:"Mon profil"})]}),t.role==="admin"&&a.jsxs(Ze,{to:"/admin",className:"header__dropdown-link",children:[a.jsx(jY,{size:18}),a.jsx("span",{children:"Administration"})]}),!t.isPremium&&a.jsxs(Ze,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[a.jsx(af,{size:18}),a.jsx("span",{children:"Passer Premium"})]})]}),a.jsx("div",{className:"header__dropdown-divider"}),a.jsxs("button",{className:"header__dropdown-logout",onClick:x,disabled:f,children:[a.jsx(HI,{size:18}),a.jsx("span",{children:f?"Dconnexion...":"Se dconnecter"})]})]})]}):a.jsxs("div",{className:"header__auth-buttons",children:[a.jsx(Ze,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),a.jsx(Ze,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),a.jsx("button",{className:"header__mobile-toggle",onClick:N,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?a.jsx(pc,{size:24}):a.jsx(sY,{size:24})})]})]}),a.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[a.jsx("div",{className:"header__mobile-overlay",onClick:()=>c(!1)}),a.jsxs("div",{className:"header__mobile-content",children:[a.jsx("nav",{className:"header__mobile-nav",children:a.jsx("ul",{className:"header__mobile-list",children:y.map(I=>E(I)&&a.jsx("li",{className:"header__mobile-item",children:a.jsxs(Ze,{to:I.path,className:`header__mobile-link ${A(I.path)?"header__mobile-link--active":""}`,children:[I.icon,a.jsx("span",{children:I.label}),I.requirePremium&&a.jsx(af,{size:14,className:"header__premium-badge"})]})},I.path))})}),!t&&a.jsxs("div",{className:"header__mobile-auth",children:[a.jsx(Ze,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),a.jsx(Ze,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),t&&a.jsxs("div",{className:"header__mobile-user",children:[a.jsxs("div",{className:"header__mobile-user-info",children:[a.jsx("div",{className:"header__avatar header__avatar--large",children:t.photoURL?a.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):a.jsx("span",{className:"header__avatar-initials",children:T()})}),a.jsxs("div",{className:"header__mobile-user-details",children:[a.jsx("p",{className:"header__mobile-user-name",children:t.displayName||t.email.split("@")[0]}),a.jsx("p",{className:"header__mobile-user-email",children:t.email})]})]}),a.jsxs("button",{className:"header__mobile-logout",onClick:x,disabled:f,children:[a.jsx(HI,{size:18}),a.jsx("span",{children:f?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},WY=()=>{const t=new Date().getFullYear(),e=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],n=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],r=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:a.jsx(zW,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:a.jsx(MY,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:a.jsx(QW,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:a.jsx(XW,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:a.jsx(GY,{size:20})}];return a.jsxs("footer",{className:"footer",children:[a.jsx("div",{className:"footer__main",children:a.jsxs("div",{className:"footer__container",children:[a.jsxs("div",{className:"footer__column footer__column--about",children:[a.jsxs(Ze,{to:"/",className:"footer__logo",children:[a.jsx(hd,{className:"footer__logo-icon",size:36}),a.jsxs("div",{className:"footer__logo-text",children:[a.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),a.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),a.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),a.jsxs("div",{className:"footer__stats",children:[a.jsxs("div",{className:"footer__stat",children:[a.jsx(us,{size:18}),a.jsx("span",{children:"500+ cours"})]}),a.jsxs("div",{className:"footer__stat",children:[a.jsx(Vg,{size:18}),a.jsx("span",{children:"10 000+ lves"})]})]})]}),a.jsxs("div",{className:"footer__column",children:[a.jsxs("h3",{className:"footer__title",children:[a.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),a.jsx("nav",{className:"footer__nav",children:a.jsx("ul",{className:"footer__list",children:e.map((i,o)=>a.jsx("li",{className:"footer__item",children:a.jsx(Ze,{to:i.path,className:"footer__link",children:i.label})},o))})})]}),a.jsxs("div",{className:"footer__column",children:[a.jsxs("h3",{className:"footer__title",children:[a.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),a.jsx("nav",{className:"footer__nav",children:a.jsx("ul",{className:"footer__list",children:n.map((i,o)=>a.jsx("li",{className:"footer__item",children:a.jsx(Ze,{to:i.path,className:"footer__link",children:i.label})},o))})})]}),a.jsxs("div",{className:"footer__column",children:[a.jsxs("h3",{className:"footer__title",children:[a.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),a.jsxs("div",{className:"footer__contact",children:[a.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[a.jsx(tY,{size:16,className:"footer__contact-icon"}),a.jsx("span",{children:"contact@pedaclic.sn"})]}),a.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[a.jsx(dY,{size:16,className:"footer__contact-icon"}),a.jsx("span",{children:"+221 77 000 00 00"})]}),a.jsxs("div",{className:"footer__contact-item",children:[a.jsx(rY,{size:16,className:"footer__contact-icon"}),a.jsx("span",{children:"Dakar, Sngal"})]})]}),a.jsxs("div",{className:"footer__social",children:[a.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),a.jsx("div",{className:"footer__social-links",children:r.map((i,o)=>a.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:i.name,children:i.icon},o))})]})]})]})}),a.jsx("div",{className:"footer__bottom",children:a.jsxs("div",{className:"footer__container footer__bottom-content",children:[a.jsxs("p",{className:"footer__copyright",children:[" ",t," PedaClic. Tous droits rservs."]}),a.jsxs("p",{className:"footer__made-with",children:["Fait avec ",a.jsx(HW,{size:14,className:"footer__heart"})," au Sngal "]}),a.jsxs("nav",{className:"footer__legal",children:[a.jsxs(Ze,{to:"/mentions-legales",className:"footer__legal-link",children:[a.jsx(qW,{size:14})," Mentions lgales"]}),a.jsxs(Ze,{to:"/confidentialite",className:"footer__legal-link",children:[a.jsx(DN,{size:14})," Confidentialit"]}),a.jsxs(Ze,{to:"/aide",className:"footer__legal-link",children:[a.jsx(Ug,{size:14})," Aide"]})]})]})})]})},rs=({children:t,hideHeader:e=!1,hideFooter:n=!1,className:r=""})=>a.jsxs("div",{className:"layout",children:[!e&&a.jsx(QY,{}),a.jsx("main",{className:`layout__main ${e?"":"layout__main--with-header"} ${r}`,children:t}),!n&&a.jsx(WY,{})]}),YY=()=>{const{currentUser:t}=qn();return a.jsxs("div",{className:"home-page",children:[a.jsxs("section",{className:"home-page__hero",children:[a.jsxs("div",{className:"home-page__hero-content",children:[a.jsxs("div",{className:"home-page__hero-badge",children:[a.jsx(gi,{size:14}),a.jsx("span",{children:"Plateforme N1 au Sngal"})]}),a.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",a.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),a.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),a.jsx("div",{className:"home-page__hero-cta",children:t?a.jsxs(Ze,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",a.jsx(nc,{size:20})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Ze,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",a.jsx(nc,{size:20})]}),a.jsxs(Ze,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[a.jsx(yf,{size:18}),"Dcouvrir les cours"]})]})}),a.jsxs("div",{className:"home-page__hero-stats",children:[a.jsxs("div",{className:"home-page__hero-stat",children:[a.jsx("strong",{children:"10 000+"}),a.jsx("span",{children:"lves inscrits"})]}),a.jsxs("div",{className:"home-page__hero-stat",children:[a.jsx("strong",{children:"500+"}),a.jsx("span",{children:"Cours disponibles"})]}),a.jsxs("div",{className:"home-page__hero-stat",children:[a.jsx("strong",{children:"95%"}),a.jsx("span",{children:"Taux de russite"})]})]})]}),a.jsx("div",{className:"home-page__hero-image",children:a.jsxs("div",{className:"home-page__hero-illustration",children:[a.jsx(hd,{size:120}),a.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),a.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),a.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),a.jsx("section",{className:"home-page__levels",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),a.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),a.jsxs("div",{className:"home-page__levels-grid",children:[a.jsxs(Ze,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[a.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),a.jsx("h3",{children:"Collge"}),a.jsx("p",{children:"6me  3me"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx(fn,{size:16})," Prparation au BFEM"]}),a.jsxs("li",{children:[a.jsx(fn,{size:16})," 9 matires disponibles"]}),a.jsxs("li",{children:[a.jsx(fn,{size:16})," Exercices corrigs"]})]}),a.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",a.jsx(nc,{size:16})]})]}),a.jsxs(Ze,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[a.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),a.jsx("h3",{children:"Lyce"}),a.jsx("p",{children:"2nde  Terminale"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx(fn,{size:16})," Prparation au BAC"]}),a.jsxs("li",{children:[a.jsx(fn,{size:16})," 12 matires disponibles"]}),a.jsxs("li",{children:[a.jsx(fn,{size:16})," Annales d'examens"]})]}),a.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",a.jsx(nc,{size:16})]})]})]})]})}),a.jsx("section",{className:"home-page__features",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),a.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),a.jsxs("div",{className:"home-page__features-grid",children:[a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon",children:a.jsx(us,{size:28})}),a.jsx("h3",{children:"Cours complets"}),a.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:a.jsx(uL,{size:28})}),a.jsx("h3",{children:"Quiz interactifs"}),a.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:a.jsx(cL,{size:28})}),a.jsx("h3",{children:"Suivi de progression"}),a.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:a.jsx(DN,{size:28})}),a.jsx("h3",{children:"Contenu vrifi"}),a.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:a.jsx(dd,{size:28})}),a.jsx("h3",{children:"Accessible 24/7"}),a.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:a.jsx(pl,{size:28})}),a.jsx("h3",{children:"Certificats"}),a.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),a.jsx("section",{className:"home-page__premium",children:a.jsx("div",{className:"home-page__container",children:a.jsxs("div",{className:"home-page__premium-content",children:[a.jsxs("div",{className:"home-page__premium-text",children:[a.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),a.jsx("h2",{children:"Passez  la vitesse suprieure"}),a.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",a.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),a.jsxs("ul",{className:"home-page__premium-features",children:[a.jsxs("li",{children:[a.jsx(fn,{size:18})," Quiz illimits dans toutes les matires"]}),a.jsxs("li",{children:[a.jsx(fn,{size:18})," Corrections dtailles des exercices"]}),a.jsxs("li",{children:[a.jsx(fn,{size:18})," Annales des examens (BFEM, BAC)"]}),a.jsxs("li",{children:[a.jsx(fn,{size:18})," Support prioritaire"]})]}),a.jsxs(Ze,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",a.jsx(nc,{size:20})]})]}),a.jsx("div",{className:"home-page__premium-pricing",children:a.jsxs("div",{className:"home-page__pricing-card",children:[a.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),a.jsx("h3",{children:"Abonnement Annuel"}),a.jsxs("div",{className:"home-page__pricing-price",children:[a.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),a.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),a.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),a.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),a.jsx(Ze,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),a.jsx("section",{className:"home-page__testimonials",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),a.jsxs("div",{className:"home-page__testimonials-grid",children:[a.jsxs("div",{className:"home-page__testimonial-card",children:[a.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>a.jsx(gi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),a.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),a.jsxs("div",{className:"home-page__testimonial-author",children:[a.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),a.jsxs("div",{children:[a.jsx("strong",{children:"Fatou Adara"}),a.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),a.jsxs("div",{className:"home-page__testimonial-card",children:[a.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>a.jsx(gi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),a.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),a.jsxs("div",{className:"home-page__testimonial-author",children:[a.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),a.jsxs("div",{children:[a.jsx("strong",{children:"Moussa Diallo"}),a.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),a.jsxs("div",{className:"home-page__testimonial-card",children:[a.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>a.jsx(gi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),a.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),a.jsxs("div",{className:"home-page__testimonial-author",children:[a.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),a.jsxs("div",{children:[a.jsx("strong",{children:"Aminata Ndiaye"}),a.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),a.jsx("section",{className:"home-page__final-cta",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{children:"Prt  russir ?"}),a.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!t&&a.jsxs(Ze,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",a.jsx(nc,{size:24})]})]})})]})},XY=()=>{const{login:t}=qn(),e=Er(),r=ia().state?.from||"/",[i,o]=_.useState({email:"",password:""}),[c,u]=_.useState(!1),[h,f]=_.useState(""),[p,g]=_.useState(!1),y=j=>{const{name:E,value:A}=j.target;o(R=>({...R,[E]:A})),h&&f("")},x=()=>i.email.trim()?i.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)?!0:(f("Veuillez entrer une adresse email valide."),!1):(f("Veuillez entrer votre mot de passe."),!1):(f("Veuillez entrer votre adresse email."),!1),N=async j=>{if(j.preventDefault(),!!x()){u(!0),f("");try{await t(i.email,i.password),e(r,{replace:!0})}catch(E){E instanceof Error?f(E.message):f("Une erreur est survenue lors de la connexion.")}finally{u(!1)}}};return a.jsx("div",{className:"auth-page",children:a.jsxs("div",{className:"auth-container",children:[a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsxs(Ze,{to:"/",className:"auth-logo",children:[a.jsx("div",{className:"auth-logo__icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),a.jsx("span",{children:"PedaClic"})]}),a.jsx("h1",{className:"auth-title",children:"Connexion"}),a.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),h&&a.jsxs("div",{className:"auth-error",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 8v4M12 16h.01"})]}),a.jsx("span",{children:h})]}),a.jsxs("form",{onSubmit:N,className:"auth-form",children:[a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:y,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:c})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),a.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),a.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:i.password,onChange:y,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:c}),a.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",children:p?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),a.jsx("div",{className:"auth-forgot",children:a.jsx(Ze,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),a.jsx("button",{type:"submit",className:"auth-button",disabled:c,children:c?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"ou"})}),a.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",a.jsx(Ze,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),a.jsxs("div",{className:"auth-welcome",children:[a.jsx("h2",{children:"Bienvenue sur PedaClic !"}),a.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),a.jsxs("ul",{className:"auth-features",children:[a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},JY=()=>{const{register:t}=qn(),e=Er(),[n,r]=_.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[i,o]=_.useState(!1),[c,u]=_.useState(""),[h,f]=_.useState(!1),[p,g]=_.useState(!1),[y,x]=_.useState(!1),N=A=>{const{name:R,value:T}=A.target;r(I=>({...I,[R]:T})),c&&u("")},j=()=>n.displayName.trim()?n.displayName.trim().length<2?(u("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(u("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(u("Les mots de passe ne correspondent pas."),!1):y?!0:(u("Veuillez accepter les conditions d'utilisation."),!1):(u("Veuillez entrer un mot de passe."),!1):(u("Veuillez entrer une adresse email valide."),!1):(u("Veuillez entrer votre adresse email."),!1):(u("Veuillez entrer votre nom complet."),!1),E=async A=>{if(A.preventDefault(),!!j()){o(!0),u("");try{await t(n),e("/disciplines",{replace:!0})}catch(R){R instanceof Error?u(R.message):u("Une erreur est survenue lors de l'inscription.")}finally{o(!1)}}};return a.jsx("div",{className:"auth-page",children:a.jsxs("div",{className:"auth-container",children:[a.jsxs("div",{className:"auth-card auth-card--register",children:[a.jsxs("div",{className:"auth-header",children:[a.jsxs(Ze,{to:"/",className:"auth-logo",children:[a.jsx("div",{className:"auth-logo__icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),a.jsx("span",{children:"PedaClic"})]}),a.jsx("h1",{className:"auth-title",children:"Crer un compte"}),a.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),c&&a.jsxs("div",{className:"auth-error",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 8v4M12 16h.01"})]}),a.jsx("span",{children:c})]}),a.jsxs("form",{onSubmit:E,className:"auth-form",children:[a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:N,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:i})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:N,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:i})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{className:"auth-label",children:"Je suis :"}),a.jsxs("div",{className:"auth-role-selector",children:[a.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[a.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:N,className:"auth-role-input",disabled:i}),a.jsxs("div",{className:"auth-role-content",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),a.jsx("span",{children:"lve"})]})]}),a.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[a.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:N,className:"auth-role-input",disabled:i}),a.jsxs("div",{className:"auth-role-content",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),a.jsx("span",{children:"Professeur"})]})]}),a.jsxs("label",{className:`auth-role-option ${n.role==="parent"?"auth-role-option--selected":""}`,children:[a.jsx("input",{type:"radio",name:"role",value:"parent",checked:n.role==="parent",onChange:N,className:"auth-role-input",disabled:i}),a.jsxs("div",{className:"auth-role-content",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),a.jsx("span",{children:"Parent d'lve"})]})]})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),a.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),a.jsx("input",{type:h?"text":"password",id:"password",name:"password",value:n.password,onChange:N,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:i}),a.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>f(!h),"aria-label":h?"Masquer":"Afficher",children:h?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),a.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:N,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:i}),a.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer":"Afficher",children:p?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),a.jsx("div",{className:"auth-checkbox-field",children:a.jsxs("label",{className:"auth-checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:A=>x(A.target.checked),className:"auth-checkbox",disabled:i}),a.jsx("span",{className:"auth-checkbox-custom"}),a.jsxs("span",{children:["J'accepte les"," ",a.jsx(Ze,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",a.jsx(Ze,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),a.jsx("button",{type:"submit",className:"auth-button",disabled:i,children:i?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"ou"})}),a.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",a.jsx(Ze,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),a.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[a.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),a.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),a.jsxs("div",{className:"auth-stats",children:[a.jsxs("div",{className:"auth-stat",children:[a.jsx("span",{className:"auth-stat-number",children:"10 000+"}),a.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),a.jsxs("div",{className:"auth-stat",children:[a.jsx("span",{className:"auth-stat-number",children:"500+"}),a.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),a.jsxs("div",{className:"auth-stat",children:[a.jsx("span",{className:"auth-stat-number",children:"95%"}),a.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),a.jsxs("div",{className:"auth-testimonial",children:[a.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),a.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},dL=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],hL=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],fL=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],mL={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function KI(t){switch(t){case"college":return dL;case"lycee":return hL;case"formation_libre":return fL;default:return[]}}function pL(t){return[...dL,...hL,...fL].find(n=>n.value===t)?.label||t}const QI=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],ZY=()=>{const[t,e]=_.useState("college"),[n,r]=_.useState([]),[i,o]=_.useState(!0),c=Er();_.useEffect(()=>{const f=yt(Ge(Se,"disciplines"),Nn("ordre")),p=B4(f,g=>{const y=g.docs.map(x=>({id:x.id,...x.data(),createdAt:x.data().createdAt?.toDate()||new Date,updatedAt:x.data().updatedAt?.toDate()||new Date}));r(y),o(!1)});return()=>p()},[]);const u=n.filter(f=>f.niveau===t),h=QI.find(f=>f.niveau===t);return a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[a.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[a.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),a.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:QI.map(f=>{const p=t===f.niveau;return a.jsxs("button",{onClick:()=>e(f.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${p?f.color:"#e2e8f0"}`,background:p?f.bgLight:"#fff",color:p?f.color:"#718096",fontSize:"1rem",fontWeight:p?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:p?`0 2px 8px ${f.color}20`:"none"},children:[a.jsx("span",{style:{fontSize:"1.2rem"},children:f.icon}),f.label]},f.niveau)})}),i&&a.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!i&&u.length===0&&a.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[a.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),a.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",mL[t]," pour le moment."]})]}),!i&&u.length>0&&a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:u.map(f=>a.jsxs("div",{onClick:()=>c(`/disciplines/${f.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${f.couleur||h.color}`},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[a.jsx("span",{style:{fontSize:"1.8rem"},children:f.icone||""}),a.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:f.nom})]}),f.description&&a.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:f.description.length>100?`${f.description.slice(0,100)}...`:f.description}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:a.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:h.bgLight,color:h.color},children:pL(f.classe)})}),f.coefficient!==void 0&&a.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",f.coefficient]})]},f.id))})]})},Bh="disciplines",WI=t=>{const e=t.data();return{id:t.id,nom:e.nom,niveau:e.niveau,classe:e.classe,ordre:e.ordre,coefficient:e.coefficient,couleur:e.couleur,icone:e.icone,description:e.description,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},wl={async getAll(t){try{const e=[Nn("ordre","asc")];t?.niveau&&e.unshift(at("niveau","==",t.niveau)),t?.classe&&e.unshift(at("classe","==",t.classe));const n=yt(Ge(Se,Bh),...e);return(await lt(n)).docs.map(WI)}catch(e){throw console.error("Erreur lors de la rcupration des disciplines:",e),new Error("Impossible de rcuprer les disciplines")}},async getById(t){try{const e=He(Se,Bh,t),n=await Nr(e);return n.exists()?WI(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la discipline:",e),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(t){return this.getAll({niveau:t})},async getByClasse(t){return this.getAll({classe:t})},async create(t){try{return(await ei(Ge(Se,Bh),{...t,createdAt:en(),updatedAt:en()})).id}catch(e){throw console.error("Erreur lors de la cration de la discipline:",e),new Error("Impossible de crer la discipline")}},async update(t,e){try{const n=He(Se,Bh,t);await sn(n,{...e,updatedAt:en()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(t){try{const e=He(Se,Bh,t);await Uc(e)}catch(e){throw console.error("Erreur lors de la suppression de la discipline:",e),new Error("Impossible de supprimer la discipline")}},async exists(t){return await this.getById(t)!==null},async countByNiveau(t){return(await this.getByNiveau(t)).length}},Zl="ressources",eX="ressources",YI=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,titre:e.titre,type:e.type,contenu:e.contenu,description:e.description,isPremium:e.isPremium||!1,ordre:e.ordre||0,chapitre:e.chapitre,fichierURL:e.fichierURL,dureeEstimee:e.dureeEstimee,tags:e.tags||[],auteurId:e.auteurId,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},tX=t=>{const e=Date.now(),n=t.split(".").pop();return`${t.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${e}.${n}`},Sa={async getAll(t,e){try{const n=[Nn("ordre","asc")];t?.disciplineId&&n.unshift(at("disciplineId","==",t.disciplineId)),t?.chapitreId&&n.unshift(at("chapitre","==",t.chapitreId)),t?.type&&n.unshift(at("type","==",t.type)),t?.isPremium!==void 0&&n.unshift(at("isPremium","==",t.isPremium)),t?.auteurId&&n.unshift(at("auteurId","==",t.auteurId)),e&&n.push(Js(e));const r=yt(Ge(Se,Zl),...n);return(await lt(r)).docs.map(YI)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(t){try{const e=He(Se,Zl,t),n=await Nr(e);return n.exists()?YI(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la ressource:",e),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(t){return this.getAll({disciplineId:t})},async getByChapitre(t){return this.getAll({chapitreId:t})},async getByType(t){return this.getAll({type:t})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(t,e){try{return(await ei(Ge(Se,Zl),{...t,auteurId:e,createdAt:en(),updatedAt:en()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(t,e){try{const n=He(Se,Zl,t);await sn(n,{...e,updatedAt:en()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(t){try{const e=await this.getById(t);e?.fichierURL&&await this.deleteFile(e.fichierURL);const n=He(Se,Zl,t);await Uc(n)}catch(e){throw console.error("Erreur lors de la suppression de la ressource:",e),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Rf(Se);for(const r of e){r.fichierURL&&await this.deleteFile(r.fichierURL);const i=He(Se,Zl,r.id);n.delete(i)}await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des ressources:",e),new Error("Impossible de supprimer les ressources")}},async uploadFile(t,e){try{const n=tX(t.name),r=`${eX}/${e}/${n}`,i=qI(UI,r);return await iW(i,t),await sW(i)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(t){try{const e=qI(UI,t);await aW(e)}catch(e){console.warn("Fichier non trouv ou dj supprim:",e)}},async reorder(t,e){try{const n=Rf(Se);e.forEach((r,i)=>{const o=He(Se,Zl,r);n.update(o,{ordre:i+1,updatedAt:en()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(t,e){await this.update(t,{isPremium:e})},async countByType(t){return(await this.getByType(t)).length},async getStats(){try{const t=await this.getAll(),e={total:t.length,premium:t.filter(n=>n.isPremium).length,gratuit:t.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return t.forEach(n=>{e.parType[n.type]!==void 0&&e.parType[n.type]++}),e}catch(t){throw console.error("Erreur lors du calcul des statistiques:",t),new Error("Impossible de calculer les statistiques")}}},nX=()=>{const{id:t}=my(),e=Er(),[n,r]=_.useState(null),[i,o]=_.useState([]),[c,u]=_.useState([]),[h,f]=_.useState(!0),[p,g]=_.useState(null),[y,x]=_.useState("tous"),[N,j]=_.useState(new Set),E=_.useCallback(async()=>{if(t)try{f(!0),g(null);const k=await wl.getById(t);if(!k){g("Discipline introuvable."),f(!1);return}r(k);const q=await Sa.getAll({disciplineId:t}),L=new Map,z=[];for(const ve of q){const ee=ve.chapitre||ve.chapitreId;ee?(L.has(ee)||L.set(ee,[]),L.get(ee).push(ve)):z.push(ve)}const V=Array.from(L.entries()).map(([ve,ee])=>({chapitreNom:ve,ressources:ee.sort((H,se)=>H.ordre-se.ordre)})).sort((ve,ee)=>ve.chapitreNom.localeCompare(ee.chapitreNom,"fr"));o(V),u(z),V.length>0&&j(new Set([V[0].chapitreNom]))}catch(k){console.error("Erreur chargement discipline:",k),g("Impossible de charger les donnes. Ressayez plus tard.")}finally{f(!1)}},[t]);_.useEffect(()=>{E()},[E]);const A=k=>{j(q=>{const L=new Set(q);return L.has(k)?L.delete(k):L.add(k),L})},R=k=>y==="tous"?k:k.filter(q=>q.type===y),T=k=>{switch(k){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},I=k=>{switch(k){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return k}},M=k=>{switch(k){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},B=k=>k==="college"?"Collge":"Lyce";if(h)return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[a.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),a.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),a.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(p||!n)return a.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[a.jsx("span",{style:{fontSize:"3rem"},children:""}),a.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:p||"Discipline introuvable"}),a.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),a.jsx("button",{onClick:()=>e("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const D=[...i.flatMap(k=>k.ressources),...c],P=[...new Set(D.map(k=>k.type))];return a.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[a.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[a.jsx(Ze,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),a.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),a.jsx(Ze,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),a.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),a.jsx("span",{style:{color:"#374151"},children:n.nom})]}),a.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&a.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[a.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",B(n.niveau),"  ",n.classe]}),a.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",D.length," ressource",D.length!==1?"s":""]}),n.coefficient&&a.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),P.length>1&&a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[a.jsxs("button",{onClick:()=>x("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:y==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:y==="tous"?"#2563eb":"#fff",color:y==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",D.length,")"]}),P.map(k=>{const q=D.filter(z=>z.type===k).length,L=y===k;return a.jsxs("button",{onClick:()=>x(k),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:L?`2px solid ${M(k)}`:"1px solid #d1d5db",background:L?M(k):"#fff",color:L?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[T(k)," ",I(k)," (",q,")"]},k)})]}),i.length===0&&c.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[a.jsx("span",{style:{fontSize:"3rem"},children:""}),a.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),a.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[i.map(k=>{const q=R(k.ressources);if(q.length===0&&y!=="tous")return null;const L=N.has(k.chapitreNom),z=y==="tous"?k.ressources:q;return a.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:L?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[a.jsx("button",{onClick:()=>A(k.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:L?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.25rem",transform:L?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),a.jsxs("div",{children:[a.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:k.chapitreNom}),a.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[k.ressources.length," ressource",k.ressources.length!==1?"s":""]})]})]})}),L&&a.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:z.map(V=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:ve=>ve.currentTarget.style.background="#eef2ff",onMouseLeave:ve=>ve.currentTarget.style.background="#f9fafb",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[a.jsx("span",{style:{fontSize:"1.2rem"},children:T(V.type)}),a.jsxs("div",{children:[a.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:V.titre}),V.description&&a.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:V.description})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:M(V.type)},children:I(V.type)}),V.isPremium&&a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),V.dureeEstimee&&a.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",V.dureeEstimee," min"]})]})]},V.id))})]},k.chapitreNom)}),R(c).length>0&&a.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[a.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:R(c).map(k=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.2rem"},children:T(k.type)}),a.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:k.titre})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:M(k.type)},children:I(k.type)}),k.isPremium&&a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},k.id))})]})]}),a.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:a.jsx(Ze,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},e_=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],rX=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],iX=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],sX=()=>{const{currentUser:t}=qn(),e=ia(),n=Er(),[r,i]=_.useState("annuel"),[o,c]=_.useState(!1),[u,h]=_.useState(null),[f,p]=_.useState(null);e.state?.from;const g=()=>!t||!t.isPremium?!1:t.subscriptionEnd?(t.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t.subscriptionEnd))>new Date:!0,y=async()=>{if(!t){n("/connexion",{state:{from:"/premium"}});return}if(g()){h("Vous tes dj abonn Premium !");return}try{c(!0),h(null);const j=e_.find(I=>I.id===r);if(!j)throw new Error("Plan invalide");const E=await ei(Ge(Se,"transactions"),{userId:t.uid,userEmail:t.email,planType:r,montant:j.prix,devise:"XOF",statut:"pending",dateTransaction:en(),createdAt:en()}),A={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${j.nom}`,item_price:j.prix,currency:"XOF",ref_command:E.id,success_url:`${window.location.origin}/premium/success?ref=${E.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${E.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:t.uid,planType:r,transactionId:E.id}),env:"test"},T=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:A.apiKey,API_SECRET:A.apiSecret},body:JSON.stringify({item_name:A.item_name,item_price:A.item_price,currency:A.currency,ref_command:A.ref_command,command_name:`Abonnement Premium ${j.nom} - ${t.email}`,env:A.env,ipn_url:A.ipn_url,success_url:A.success_url,cancel_url:A.cancel_url,custom_field:A.custom_field})})).json();if(T.success===1&&T.redirect_url)window.location.href=T.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const I=new Date,M=new Date(I);r==="mensuel"?M.setMonth(M.getMonth()+1):M.setFullYear(M.getFullYear()+1),await sn(He(Se,"users",t.uid),{isPremium:!0,subscriptionEnd:M,subscriptionPlan:r,updatedAt:en()}),await sn(He(Se,"transactions",E.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:M,updatedAt:en()}),n("/premium/success",{state:{plan:j.nom,montant:j.prix,expiration:M.toLocaleDateString("fr-FR")}})}}catch(j){console.error("Erreur paiement:",j),h("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{c(!1)}},x=j=>{p(f===j?null:j)},N=j=>j.toLocaleString("fr-FR")+" FCFA";if(g()){const j=t?.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t?.subscriptionEnd||Date.now());return a.jsx("div",{className:"premium-page",children:a.jsx("div",{className:"container",children:a.jsxs("div",{className:"premium-already",children:[a.jsx("span",{className:"premium-already__icon",children:""}),a.jsx("h1",{children:"Vous tes dj Premium !"}),a.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",a.jsx("strong",{children:j.toLocaleDateString("fr-FR")})]}),a.jsxs("div",{className:"premium-already__actions",children:[a.jsx(Ze,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),a.jsx(Ze,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return a.jsxs("div",{className:"premium-page",children:[a.jsx("section",{className:"premium-hero",children:a.jsxs("div",{className:"container",children:[a.jsx("span",{className:"premium-hero__badge",children:" Premium"}),a.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",a.jsx("span",{children:"PedaClic"})]}),a.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),a.jsx("section",{className:"premium-pricing",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),a.jsx("div",{className:"pricing-cards",children:e_.map(j=>a.jsxs("div",{className:`pricing-card ${r===j.id?"pricing-card--selected":""} ${j.popular?"pricing-card--popular":""}`,onClick:()=>i(j.id),children:[j.popular&&a.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),a.jsxs("div",{className:"pricing-card__header",children:[a.jsx("h3",{className:"pricing-card__name",children:j.nom}),a.jsx("p",{className:"pricing-card__duration",children:j.duree})]}),a.jsxs("div",{className:"pricing-card__price",children:[j.prixOriginal&&a.jsx("span",{className:"pricing-card__original",children:N(j.prixOriginal)}),a.jsx("span",{className:"pricing-card__amount",children:N(j.prix)}),j.id==="mensuel"&&a.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),j.economie&&a.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",j.economie]}),a.jsx("div",{className:"pricing-card__radio",children:a.jsx("span",{className:`radio-dot ${r===j.id?"radio-dot--active":""}`})})]},j.id))}),a.jsxs("div",{className:"pricing-cta",children:[u&&a.jsxs("div",{className:"pricing-error",children:[a.jsx("span",{children:""})," ",u]}),t?a.jsx("button",{className:"btn btn--premium btn--lg",onClick:y,disabled:o,children:o?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):a.jsxs(a.Fragment,{children:["Payer ",N(e_.find(j=>j.id===r)?.prix||0)]})}):a.jsxs("div",{className:"pricing-login",children:[a.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),a.jsx(Ze,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),a.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",a.jsx(Ze,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),a.jsxs("div",{className:"payment-methods",children:[a.jsx("p",{children:"Paiement scuris par"}),a.jsxs("div",{className:"payment-methods__logos",children:[a.jsx("span",{className:"payment-logo",children:" Orange Money"}),a.jsx("span",{className:"payment-logo",children:" Wave"}),a.jsx("span",{className:"payment-logo",children:" Free Money"}),a.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),a.jsx("section",{className:"premium-features",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),a.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),a.jsx("div",{className:"features-grid",children:rX.map((j,E)=>a.jsxs("div",{className:"feature-card",children:[a.jsx("span",{className:"feature-card__icon",children:j.icone}),a.jsx("h3",{className:"feature-card__title",children:j.titre}),a.jsx("p",{className:"feature-card__description",children:j.description})]},E))})]})}),a.jsx("section",{className:"premium-comparison",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),a.jsxs("div",{className:"comparison-table",children:[a.jsxs("div",{className:"comparison-header",children:[a.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),a.jsx("div",{className:"comparison-free",children:"Gratuit"}),a.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((j,E)=>a.jsxs("div",{className:"comparison-row",children:[a.jsx("div",{className:"comparison-feature",children:j.feature}),a.jsx("div",{className:"comparison-free",children:j.free?a.jsx("span",{className:"check",children:""}):a.jsx("span",{className:"cross",children:""})}),a.jsx("div",{className:"comparison-premium",children:a.jsx("span",{className:"check check--premium",children:""})})]},E))]})]})}),a.jsx("section",{className:"premium-testimonials",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),a.jsxs("div",{className:"testimonials-grid",children:[a.jsxs("div",{className:"testimonial-card",children:[a.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),a.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),a.jsxs("div",{className:"testimonial-card__author",children:[a.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),a.jsxs("div",{children:[a.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),a.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),a.jsxs("div",{className:"testimonial-card",children:[a.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),a.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),a.jsxs("div",{className:"testimonial-card__author",children:[a.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),a.jsxs("div",{children:[a.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),a.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),a.jsxs("div",{className:"testimonial-card",children:[a.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),a.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),a.jsxs("div",{className:"testimonial-card__author",children:[a.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),a.jsxs("div",{children:[a.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),a.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),a.jsx("section",{className:"premium-faq",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Questions frquentes"}),a.jsx("div",{className:"faq-list",children:iX.map((j,E)=>a.jsxs("div",{className:`faq-item ${f===E?"faq-item--open":""}`,children:[a.jsxs("button",{className:"faq-item__question",onClick:()=>x(E),"aria-expanded":f===E,children:[a.jsx("span",{children:j.question}),a.jsx("span",{className:"faq-item__icon",children:f===E?"":"+"})]}),f===E&&a.jsx("div",{className:"faq-item__answer",children:a.jsx("p",{children:j.reponse})})]},E))})]})}),a.jsx("section",{className:"premium-cta-final",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Prt  russir vos examens ?"}),a.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),a.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},aX=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],is=({children:t,currentPage:e="dashboard"})=>{const{currentUser:n,logout:r}=qn(),[i,o]=_.useState(!0),[c,u]=_.useState(!1),h=ia(),f=async()=>{try{u(!0),await r(),window.location.href="/connexion"}catch(x){console.error("Erreur lors de la dconnexion:",x),u(!1)}},p=()=>n?.displayName?n.displayName.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"AD",g=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},y=x=>x.href==="/admin"?h.pathname==="/admin"||h.pathname==="/admin/":h.pathname.startsWith(x.href);return a.jsxs("div",{className:"admin-layout",children:[a.jsxs("aside",{className:`admin-sidebar ${i?"":"admin-sidebar--collapsed"}`,children:[a.jsx("header",{className:"admin-sidebar__header",children:a.jsxs(Ze,{to:"/",className:"admin-sidebar__logo",children:[a.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),a.jsx("span",{children:"PedaClic"})]})}),a.jsx("nav",{className:"admin-sidebar__nav",children:aX.map((x,N)=>a.jsxs("div",{className:"admin-nav__section",children:[a.jsx("h3",{className:"admin-nav__title",children:x.title}),a.jsx("ul",{className:"admin-nav__list",children:x.items.map(j=>a.jsx("li",{className:"admin-nav__item",children:a.jsxs(Ze,{to:j.href,className:`admin-nav__link ${y(j)?"admin-nav__link--active":""}`,children:[a.jsx("span",{className:"admin-nav__icon",children:j.icon}),a.jsx("span",{className:"admin-nav__label",children:j.label})]})},j.id))})]},N))}),a.jsx("footer",{className:"admin-sidebar__footer",children:a.jsxs("div",{className:"admin-user",children:[a.jsx("div",{className:"admin-user__avatar",children:p()}),a.jsxs("div",{className:"admin-user__info",children:[a.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),a.jsx("div",{className:"admin-user__role",children:g()})]}),a.jsx("button",{onClick:f,disabled:c,className:"admin-logout-btn",title:"Se dconnecter",children:c?"...":""})]})})]}),a.jsxs("main",{className:"admin-content",children:[a.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!i),"aria-label":"Toggle sidebar",children:""}),t]}),a.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Bo="chapitres",t_=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,numero:e.numero,titre:e.titre,description:e.description,objectifs:e.objectifs||[],dureeEstimee:e.dureeEstimee,isPremium:e.isPremium||!1,actif:e.actif!==!1,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},$o={async getByDiscipline(t){try{const e=yt(Ge(Se,Bo),at("disciplineId","==",t),Nn("numero","asc"));return(await lt(e)).docs.map(t_)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const t=yt(Ge(Se,Bo),Nn("numero","asc"));return(await lt(t)).docs.map(t_)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getById(t){try{const e=He(Se,Bo,t),n=await Nr(e);return n.exists()?t_(n):null}catch(e){throw console.error("Erreur lors de la rcupration du chapitre:",e),new Error("Impossible de rcuprer le chapitre")}},async create(t){try{return(await ei(Ge(Se,Bo),{...t,actif:t.actif!==!1,createdAt:en(),updatedAt:en()})).id}catch(e){throw console.error("Erreur lors de la cration du chapitre:",e),new Error("Impossible de crer le chapitre")}},async update(t,e){try{const n=He(Se,Bo,t);await sn(n,{...e,updatedAt:en()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(t){try{const e=He(Se,Bo,t);await Uc(e)}catch(e){throw console.error("Erreur lors de la suppression du chapitre:",e),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Rf(Se);e.forEach(r=>{const i=He(Se,Bo,r.id);n.delete(i)}),await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des chapitres:",e),new Error("Impossible de supprimer les chapitres")}},async reorder(t,e){try{const n=Rf(Se);e.forEach((r,i)=>{const o=He(Se,Bo,r);n.update(o,{numero:i+1,updatedAt:en()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(t,e){await this.update(t,{actif:e})},async countByDiscipline(t){return(await this.getByDiscipline(t)).length},async getNextNumero(t){return await this.countByDiscipline(t)+1}},oX=()=>{const{currentUser:t}=qn(),e=Er(),[n,r]=_.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[i,o]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{(async()=>{try{o(!0),u(null);const[f,p,g,y,x]=await Promise.all([wl.getAll(),$o.getAll(),Sa.getStats(),lt(Ge(Se,"quizzes")),lt(Ge(Se,"quizzes_v2"))]);r({totalDisciplines:f.length,totalChapitres:p.length,totalRessources:g.total,ressourcesPremium:g.premium,ressourcesGratuites:g.gratuit,totalQuiz:y.size,totalQuizAvances:x.size,ressourcesParType:g.parType})}catch(f){console.error("Erreur lors du chargement des statistiques:",f),u("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),a.jsxs("div",{className:"admin-dashboard",children:[a.jsx("header",{className:"admin-page-header",children:a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),a.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",t?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),c&&a.jsxs("div",{className:"alert alert--error",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:c})})]}),i?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des statistiques..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&e("/admin/disciplines"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),a.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&e("/admin/chapitres"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),a.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&e("/admin/ressources"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.totalRessources}),a.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&e("/admin/ressources"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),a.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&e("/admin/quiz"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),a.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&e("/admin/quiz-avance"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),a.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),a.jsxs("section",{className:"content-card",children:[a.jsx("div",{className:"content-card__header",children:a.jsx("h2",{children:"Rpartition des ressources par type"})}),a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"resource-type-grid",children:[a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),a.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),a.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),a.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),a.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),a.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),a.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[a.jsx("div",{className:"content-card__header",children:a.jsx("h2",{children:"Actions rapides"})}),a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"quick-actions-grid",children:[a.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les disciplines"}),a.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),a.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les chapitres"}),a.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),a.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les ressources"}),a.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),a.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les quiz"}),a.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),a.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Quiz avancs"}),a.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),a.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les utilisateurs"}),a.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),a.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},$e={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},n_={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},lX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(n_),[i,o]=_.useState(null),[c,u]=_.useState(!1),[h,f]=_.useState("all");_.useEffect(()=>{const R=yt(Ge(Se,"disciplines"),Nn("nom")),T=B4(R,I=>{const M=I.docs.map(B=>({id:B.id,...B.data(),createdAt:B.data().createdAt?.toDate()||new Date,updatedAt:B.data().updatedAt?.toDate()||new Date}));e(M)});return()=>T()},[]);const p=_.useCallback(R=>{const T=KI(R)[0]?.value||"6eme";r(I=>({...I,niveau:R,classe:T,coefficient:R==="formation_libre"?void 0:I.coefficient}))},[]),g=async R=>{if(R.preventDefault(),!!n.nom.trim()){u(!0);try{const T={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:Xe.now()};i?await sn(He(Se,"disciplines",i),T):await ei(Ge(Se,"disciplines"),{...T,createdAt:Xe.now()}),r(n_),o(null)}catch(T){console.error("Erreur lors de la sauvegarde :",T),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{u(!1)}}},y=R=>{r({nom:R.nom,niveau:R.niveau,classe:R.classe,ordre:R.ordre,coefficient:R.coefficient,couleur:R.couleur||"",icone:R.icone||"",description:R.description||""}),o(R.id)},x=async(R,T)=>{if(window.confirm(`Supprimer la discipline "${T}" ? Cette action est irrversible.`))try{await Uc(He(Se,"disciplines",R))}catch(I){console.error("Erreur lors de la suppression :",I)}},N=()=>{r(n_),o(null)},j=KI(n.niveau),E=h==="all"?t:t.filter(R=>R.niveau===h),A=R=>({...$e.badge,...R==="college"?$e.badgeCollege:{},...R==="lycee"?$e.badgeLycee:{},...R==="formation_libre"?$e.badgeFormationLibre:{}});return a.jsxs("div",{style:$e.container,children:[a.jsx("h2",{style:$e.title,children:" Gestion des Disciplines"}),a.jsxs("form",{style:$e.form,onSubmit:g,children:[a.jsx("h3",{style:$e.formTitle,children:i?" Modifier la discipline":" Ajouter une discipline"}),a.jsxs("div",{style:$e.formGrid,children:[a.jsxs("div",{style:$e.fieldGroup,children:[a.jsx("label",{style:$e.label,children:"Nom de la discipline"}),a.jsx("input",{type:"text",style:$e.input,value:n.nom,onChange:R=>r({...n,nom:R.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),a.jsxs("div",{style:$e.fieldGroup,children:[a.jsx("label",{style:$e.label,children:"Niveau"}),a.jsxs("select",{style:$e.select,value:n.niveau,onChange:R=>p(R.target.value),children:[a.jsx("option",{value:"college",children:" Collge"}),a.jsx("option",{value:"lycee",children:" Lyce"}),a.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),a.jsxs("div",{style:$e.fieldGroup,children:[a.jsx("label",{style:$e.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),a.jsx("select",{style:$e.select,value:n.classe,onChange:R=>r({...n,classe:R.target.value}),children:j.map(({value:R,label:T})=>a.jsx("option",{value:R,children:T},R))})]}),a.jsxs("div",{style:$e.fieldGroup,children:[a.jsx("label",{style:$e.label,children:"Ordre d'affichage"}),a.jsx("input",{type:"number",style:$e.input,value:n.ordre,onChange:R=>r({...n,ordre:Number(R.target.value)}),placeholder:"Ex : 1",min:"0"})]}),a.jsxs("div",{style:$e.fieldGroup,children:[a.jsxs("label",{style:$e.label,children:["Coefficient",n.niveau==="formation_libre"&&a.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),a.jsx("input",{type:"number",style:$e.input,value:n.coefficient??"",onChange:R=>r({...n,coefficient:R.target.value?Number(R.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),a.jsxs("div",{style:$e.fieldGroup,children:[a.jsxs("label",{style:$e.label,children:["Couleur",a.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),a.jsx("input",{type:"color",style:{...$e.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:R=>r({...n,couleur:R.target.value})})]})]}),a.jsxs("div",{style:{...$e.fieldGroup,marginBottom:"20px"},children:[a.jsxs("label",{style:$e.label,children:["Description",a.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),a.jsx("textarea",{style:$e.textarea,value:n.description,onChange:R=>r({...n,description:R.target.value}),placeholder:"Brve description de la discipline..."})]}),a.jsxs("div",{style:{...$e.fieldGroup,marginBottom:"20px"},children:[a.jsxs("label",{style:$e.label,children:["Icne (emoji)",a.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),a.jsx("input",{type:"text",style:{...$e.input,maxWidth:"120px"},value:n.icone,onChange:R=>r({...n,icone:R.target.value}),placeholder:""})]}),a.jsxs("div",{children:[a.jsx("button",{type:"submit",style:$e.btnPrimary,disabled:c,children:c?"Enregistrement...":i?"Mettre  jour":"Ajouter la discipline"}),i&&a.jsx("button",{type:"button",style:$e.btnSecondary,onClick:N,children:"Annuler"})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{style:$e.formTitle,children:[" Disciplines existantes (",E.length,")"]}),a.jsxs("div",{style:$e.tabs,children:[a.jsx("button",{style:{...$e.tab,...h==="all"?$e.tabActive:{}},onClick:()=>f("all"),children:"Toutes"}),a.jsx("button",{style:{...$e.tab,...h==="college"?$e.tabActive:{}},onClick:()=>f("college"),children:" Collge"}),a.jsx("button",{style:{...$e.tab,...h==="lycee"?$e.tabActive:{}},onClick:()=>f("lycee"),children:" Lyce"}),a.jsx("button",{style:{...$e.tab,...h==="formation_libre"?$e.tabActive:{}},onClick:()=>f("formation_libre"),children:" Formation libre"})]}),E.length===0?a.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):E.map(R=>a.jsxs("div",{style:$e.card,children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[R.icone&&a.jsx("span",{style:{fontSize:"1.2rem"},children:R.icone}),a.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:R.nom}),a.jsx("span",{style:A(R.niveau),children:mL[R.niveau]})]}),a.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[R.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",pL(R.classe),R.coefficient!==void 0&&a.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",R.coefficient]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"4px"},children:[a.jsx("button",{style:$e.btnEdit,onClick:()=>y(R),children:"Modifier"}),a.jsx("button",{style:$e.btnDanger,onClick:()=>x(R.id,R.nom),children:"Supprimer"})]})]},R.id))]})]})},XI={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},cX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[i,o]=_.useState(""),[c,u]=_.useState(!0),[h,f]=_.useState(!1),[p,g]=_.useState(!1),[y,x]=_.useState(null),[N,j]=_.useState(null),[E,A]=_.useState(null),[R,T]=_.useState(!1),[I,M]=_.useState(!1),[B,D]=_.useState(null),[P,k]=_.useState(null),[q,L]=_.useState({...XI,disciplineId:""}),[z,V]=_.useState({}),[ve,ee]=_.useState(""),H=_.useCallback(async()=>{try{u(!0);const Q=await wl.getAll();e(Q),Q.length>0&&!i&&o(Q[0].id)}catch(Q){console.error("Erreur lors du chargement des disciplines:",Q),j("Impossible de charger les disciplines.")}finally{u(!1)}},[i]),se=_.useCallback(async()=>{if(!i){r([]);return}try{f(!0);const Q=await $o.getByDiscipline(i);r(Q)}catch(Q){console.error("Erreur lors du chargement des chapitres:",Q),j("Impossible de charger les chapitres.")}finally{f(!1)}},[i]);_.useEffect(()=>{H()},[H]),_.useEffect(()=>{se()},[se]);const X=()=>{const Q={};return q.disciplineId||(Q.disciplineId="Veuillez slectionner une discipline"),q.titre.trim()?q.titre.length<3&&(Q.titre="Le titre doit contenir au moins 3 caractres"):Q.titre="Le titre du chapitre est requis",q.numero<1&&(Q.numero="Le numro doit tre suprieur  0"),V(Q),Object.keys(Q).length===0},we=Q=>{o(Q),j(null)},W=async()=>{const Q=await $o.getNextNumero(i);D(null),L({...XI,disciplineId:i,numero:Q}),V({}),ee(""),T(!0)},F=Q=>{D(Q),L({disciplineId:Q.disciplineId,numero:Q.numero,titre:Q.titre,description:Q.description,objectifs:Q.objectifs||[],dureeEstimee:Q.dureeEstimee,isPremium:Q.isPremium,actif:Q.actif}),V({}),ee(""),T(!0)},re=Q=>{k(Q),M(!0)},de=()=>{T(!1),M(!1),D(null),k(null),V({}),ee("")},ye=Q=>{const{name:me,value:J,type:Ae}=Q.target,Ke=Q.target.checked;L(Je=>({...Je,[me]:Ae==="checkbox"?Ke:Ae==="number"?Number(J):J})),z[me]&&V(Je=>({...Je,[me]:void 0}))},he=()=>{ve.trim()&&(L(Q=>({...Q,objectifs:[...Q.objectifs||[],ve.trim()]})),ee(""))},G=Q=>{L(me=>({...me,objectifs:(me.objectifs||[]).filter((J,Ae)=>Ae!==Q)}))},ce=async Q=>{if(Q.preventDefault(),!!X())try{g(!0),j(null),B?(await $o.update(B.id,q),A("Chapitre modifi avec succs !")):(await $o.create(q),A("Chapitre cr avec succs !")),de(),await se(),setTimeout(()=>A(null),3e3)}catch(me){console.error("Erreur lors de la sauvegarde:",me),j("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{g(!1)}},Ie=async()=>{if(P)try{x(P.id),await $o.delete(P.id),A("Chapitre supprim avec succs !"),de(),await se(),setTimeout(()=>A(null),3e3)}catch(Q){console.error("Erreur lors de la suppression:",Q),j("Erreur lors de la suppression. Veuillez ressayer.")}finally{x(null)}},ae=async Q=>{try{await $o.toggleActive(Q.id,!Q.actif),await se(),A(Q.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>A(null),2e3)}catch{j("Erreur lors de la mise  jour")}},Z=Q=>{const me=t.find(J=>J.id===Q);return me?me.nom:"Non trouve"};return a.jsxs("div",{className:"chapitre-manager",children:[a.jsxs("header",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),a.jsx("div",{className:"admin-page-header__actions",children:a.jsxs("button",{onClick:W,className:"btn btn--primary",disabled:!i||c,children:[a.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),N&&a.jsxs("div",{className:"alert alert--error",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:N})}),a.jsx("button",{onClick:()=>j(null),className:"alert__close",children:""})]}),E&&a.jsxs("div",{className:"alert alert--success",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:E})})]}),a.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"discipline-selector",children:[a.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),c?a.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?a.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",a.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):a.jsx("div",{className:"discipline-tabs",children:t.map(Q=>a.jsxs("button",{className:`discipline-tab ${i===Q.id?"discipline-tab--active":""}`,onClick:()=>we(Q.id),style:{"--discipline-color":Q.couleur||"#2563eb"},children:[a.jsx("span",{className:"discipline-tab__icon",children:Q.icone||""}),a.jsx("span",{className:"discipline-tab__name",children:Q.nom}),a.jsx("span",{className:"discipline-tab__class",children:Q.classe})]},Q.id))})]})})}),a.jsxs("div",{className:"admin-table-container",children:[a.jsx("div",{className:"admin-table-header",children:a.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",i&&`- ${Z(i)}`,n.length>0&&` (${n.length})`]})}),h?a.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des chapitres..."})]}):i?n.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),a.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),a.jsx("button",{onClick:W,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):a.jsx("div",{className:"chapitres-list",children:n.map(Q=>a.jsxs("div",{className:`chapitre-card ${Q.actif?"":"chapitre-card--inactive"}`,children:[a.jsx("div",{className:"chapitre-card__number",children:Q.numero}),a.jsxs("div",{className:"chapitre-card__content",children:[a.jsxs("h3",{className:"chapitre-card__title",children:[Q.titre,Q.isPremium&&a.jsx("span",{className:"badge badge--premium",children:"Premium"}),!Q.actif&&a.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),Q.description&&a.jsx("p",{className:"chapitre-card__description",children:Q.description}),a.jsxs("div",{className:"chapitre-card__meta",children:[Q.dureeEstimee&&a.jsxs("span",{children:[" ",Q.dureeEstimee,"h estime"]}),Q.objectifs&&Q.objectifs.length>0&&a.jsxs("span",{children:[" ",Q.objectifs.length," objectif(s)"]})]})]}),a.jsxs("div",{className:"chapitre-card__actions",children:[a.jsx("button",{onClick:()=>ae(Q),className:`table-action-btn ${Q.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:Q.actif?"Dsactiver":"Activer",children:Q.actif?"":""}),a.jsx("button",{onClick:()=>F(Q),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),a.jsx("button",{onClick:()=>re(Q),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:y===Q.id,children:y===Q.id?"":""})]})]},Q.id))}):a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),a.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),R&&a.jsx("div",{className:"modal-overlay",onClick:de,children:a.jsxs("div",{className:"modal modal--lg",onClick:Q=>Q.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:B?"Modifier le chapitre":"Nouveau chapitre"}),a.jsx("button",{onClick:de,className:"modal__close",children:""})]}),a.jsxs("form",{onSubmit:ce,children:[a.jsxs("div",{className:"modal__body",children:[!B&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),a.jsxs("select",{name:"disciplineId",className:`form-select ${z.disciplineId?"form-select--error":""}`,value:q.disciplineId,onChange:ye,children:[a.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(Q=>a.jsxs("option",{value:Q.id,children:[Q.icone," ",Q.nom," (",Q.classe,")"]},Q.id))]}),z.disciplineId&&a.jsx("span",{className:"form-error",children:z.disciplineId})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[a.jsx("label",{className:"form-label form-label--required",children:"N"}),a.jsx("input",{type:"number",name:"numero",className:`form-input ${z.numero?"form-input--error":""}`,min:"1",value:q.numero,onChange:ye}),z.numero&&a.jsx("span",{className:"form-error",children:z.numero})]}),a.jsxs("div",{className:"form-group",style:{flex:1},children:[a.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),a.jsx("input",{type:"text",name:"titre",className:`form-input ${z.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:q.titre,onChange:ye}),z.titre&&a.jsx("span",{className:"form-error",children:z.titre})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:q.description||"",onChange:ye})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),a.jsxs("div",{className:"objectifs-input",children:[a.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:ve,onChange:Q=>ee(Q.target.value),onKeyPress:Q=>Q.key==="Enter"&&(Q.preventDefault(),he())}),a.jsx("button",{type:"button",onClick:he,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),q.objectifs&&q.objectifs.length>0&&a.jsx("ul",{className:"objectifs-list",children:q.objectifs.map((Q,me)=>a.jsxs("li",{className:"objectif-item",children:[a.jsxs("span",{children:[" ",Q]}),a.jsx("button",{type:"button",onClick:()=>G(me),className:"objectif-remove",children:""})]},me))})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),a.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:q.dureeEstimee||"",onChange:ye})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Options"}),a.jsxs("div",{className:"form-options",children:[a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"isPremium",checked:q.isPremium,onChange:ye}),a.jsx("span",{children:"Contenu Premium "})]}),a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"actif",checked:q.actif!==!1,onChange:ye}),a.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{type:"button",onClick:de,className:"btn btn--outline",disabled:p,children:"Annuler"}),a.jsx("button",{type:"submit",className:"btn btn--primary",disabled:p,children:p?"Enregistrement...":B?"Mettre  jour":"Crer le chapitre"})]})]})]})}),I&&P&&a.jsx("div",{className:"modal-overlay",onClick:de,children:a.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),a.jsx("button",{onClick:de,className:"modal__close",children:""})]}),a.jsxs("div",{className:"modal__body",children:[a.jsxs("p",{children:["Supprimer le chapitre ",a.jsxs("strong",{children:[P.numero,". ",P.titre]})," ?"]}),a.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{onClick:de,className:"btn btn--outline",children:"Annuler"}),a.jsx("button",{onClick:Ie,className:"btn btn--danger",disabled:y!==null,children:y?"Suppression...":"Supprimer"})]})]})}),a.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},cg=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],ug={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},r_=50,JI={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},uX=()=>{const{currentUser:t}=qn(),[e,n]=_.useState([]),[r,i]=_.useState([]),[o,c]=_.useState([]),[u,h]=_.useState([]),[f,p]=_.useState(""),[g,y]=_.useState(""),[x,N]=_.useState(""),[j,E]=_.useState(""),[A,R]=_.useState(""),[T,I]=_.useState(!0),[M,B]=_.useState(!1),[D,P]=_.useState(!1),[k,q]=_.useState(!1),[L,z]=_.useState(null),[V,ve]=_.useState(!1),[ee,H]=_.useState(0),[se,X]=_.useState(null),[we,W]=_.useState(null),[F,re]=_.useState(!1),[de,ye]=_.useState(!1),[he,G]=_.useState(!1),[ce,Ie]=_.useState(null),[ae,Z]=_.useState(null),[Q,me]=_.useState(null),[J,Ae]=_.useState({...JI,disciplineId:""}),[Ke,Je]=_.useState({}),[ot,on]=_.useState(null),[Rt,kt]=_.useState(null),Lr=_.useRef(null),[be,De]=_.useState(""),Be=_.useCallback(async()=>{try{I(!0);const ne=await wl.getAll();n(ne),ne.length>0&&!f&&p(ne[0].id)}catch(ne){console.error("Erreur lors du chargement des disciplines:",ne),X("Impossible de charger les disciplines.")}finally{I(!1)}},[f]),Ye=_.useCallback(async()=>{if(!f){i([]);return}try{B(!0);const ne=await $o.getByDiscipline(f);i(ne)}catch(ne){console.error("Erreur lors du chargement des chapitres:",ne)}finally{B(!1)}},[f]),Vt=_.useCallback(async()=>{if(!f){c([]),h([]);return}try{P(!0);const ne=await Sa.getByDiscipline(f);c(ne),h(ne)}catch(ne){console.error("Erreur lors du chargement des ressources:",ne),X("Impossible de charger les ressources.")}finally{P(!1)}},[f]);_.useEffect(()=>{Be()},[Be]),_.useEffect(()=>{Ye()},[Ye]),_.useEffect(()=>{Vt()},[Vt]),_.useEffect(()=>{let ne=[...o];if(g&&(ne=ne.filter(Ve=>Ve.chapitre===g)),x&&(ne=ne.filter(Ve=>Ve.type===x)),j==="premium"?ne=ne.filter(Ve=>Ve.isPremium):j==="free"&&(ne=ne.filter(Ve=>!Ve.isPremium)),A){const Ve=A.toLowerCase();ne=ne.filter(bt=>bt.titre.toLowerCase().includes(Ve)||bt.description?.toLowerCase().includes(Ve)||bt.tags?.some(Gn=>Gn.toLowerCase().includes(Ve)))}h(ne)},[o,g,x,j,A]);const Un=()=>{const ne={};if(J.disciplineId||(ne.disciplineId="Veuillez slectionner une discipline"),J.titre.trim()?J.titre.length<3&&(ne.titre="Le titre doit contenir au moins 3 caractres"):ne.titre="Le titre est requis",J.type||(ne.type="Veuillez slectionner un type de ressource"),ot){const Ve="."+ot.name.split(".").pop()?.toLowerCase(),bt=ug[J.type];bt.includes(Ve)||(ne.fichier=`Extension non autorise. Extensions acceptes : ${bt.join(", ")}`),ot.size/(1024*1024)>r_&&(ne.fichier=`Le fichier est trop volumineux (max ${r_} Mo)`)}return Je(ne),Object.keys(ne).length===0},qr=ne=>{p(ne),y(""),X(null)},oo=()=>{Ie(null),Ae({...JI,disciplineId:f}),Je({}),on(null),kt(null),De(""),re(!0)},Ur=ne=>{Ie(ne),Ae({disciplineId:ne.disciplineId,titre:ne.titre,type:ne.type,description:ne.description,contenu:ne.contenu,chapitre:ne.chapitre||"",ordre:ne.ordre,isPremium:ne.isPremium,actif:ne.actif,tags:ne.tags||[],duree:ne.duree,urlExterne:ne.urlExterne||""}),Je({}),on(null),kt(ne.fichierURL||null),De(""),re(!0)},Hi=ne=>{me(ne),G(!0)},Kc=ne=>{Z(ne),ye(!0)},ln=()=>{re(!1),ye(!1),G(!1),Ie(null),Z(null),me(null),Je({}),on(null),kt(null),De("")},At=ne=>{const{name:Ve,value:bt,type:Gn}=ne.target,Al=ne.target.checked;Ae(ji=>({...ji,[Ve]:Gn==="checkbox"?Al:Gn==="number"?Number(bt):bt})),Ke[Ve]&&Je(ji=>({...ji,[Ve]:void 0}))},Vr=ne=>{const Ve=ne.target.files?.[0];if(Ve)if(on(Ve),Je(bt=>({...bt,fichier:void 0})),Ve.type.startsWith("image/")||Ve.type.startsWith("video/")){const bt=new FileReader;bt.onloadend=()=>{kt(bt.result)},bt.readAsDataURL(Ve)}else kt(null)},nn=()=>{on(null),kt(null),Lr.current&&(Lr.current.value="")},Sl=()=>{be.trim()&&!J.tags?.includes(be.trim())&&(Ae(ne=>({...ne,tags:[...ne.tags||[],be.trim()]})),De(""))},lo=ne=>{Ae(Ve=>({...Ve,tags:(Ve.tags||[]).filter((bt,Gn)=>Gn!==ne)}))},Qc=async ne=>{if(ne.preventDefault(),!!Un())try{q(!0),X(null);let Ve=ce?.fichierURL,bt=ce?.fichierNom;if(ot){ve(!0);const Al=ce?.id||`temp_${Date.now()}`;Ve=await Sa.uploadFile(ot,Al),bt=ot?.name||"fichier",ve(!1)}const Gn={...J,fichierURL:Ve,fichierNom:bt};ce?(await Sa.update(ce.id,Gn),W("Ressource modifie avec succs !")):(await Sa.create(Gn,"admin"),W("Ressource cre avec succs !")),ln(),await Vt(),setTimeout(()=>W(null),3e3)}catch(Ve){console.error("Erreur lors de la sauvegarde:",Ve),X("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{q(!1),ve(!1),H(0)}},xi=async()=>{if(ae)try{z(ae.id),ae.fichierURL&&await Sa.deleteFile(ae.fichierURL),await Sa.delete(ae.id),W("Ressource supprime avec succs !"),ln(),await Vt(),setTimeout(()=>W(null),3e3)}catch(ne){console.error("Erreur lors de la suppression:",ne),X("Erreur lors de la suppression. Veuillez ressayer.")}finally{z(null)}},aa=async ne=>{try{await Sa.togglePremium(ne.id,!ne.isPremium),await Vt(),W(ne.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>W(null),2e3)}catch{X("Erreur lors de la mise  jour")}},cn=ne=>{const Ve=e.find(bt=>bt.id===ne);return Ve?Ve.nom:"Non trouve"},_i=ne=>{const Ve=r.find(bt=>bt.id===ne);return Ve?`${Ve.numero}. ${Ve.titre}`:""},gr=ne=>cg.find(Ve=>Ve.value===ne)||cg[0],ni=ne=>ne<1024?ne+" o":ne<1024*1024?(ne/1024).toFixed(1)+" Ko":(ne/(1024*1024)).toFixed(1)+" Mo";return a.jsxs("div",{className:"resource-manager",children:[a.jsxs("header",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),a.jsx("div",{className:"admin-page-header__actions",children:a.jsxs("button",{onClick:oo,className:"btn btn--primary",disabled:!f||T,children:[a.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),se&&a.jsxs("div",{className:"alert alert--error",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:se})}),a.jsx("button",{onClick:()=>X(null),className:"alert__close",children:""})]}),we&&a.jsxs("div",{className:"alert alert--success",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:we})})]}),a.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"discipline-selector",children:[a.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),T?a.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?a.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",a.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):a.jsx("div",{className:"discipline-tabs",children:e.map(ne=>a.jsxs("button",{className:`discipline-tab ${f===ne.id?"discipline-tab--active":""}`,onClick:()=>qr(ne.id),style:{"--discipline-color":ne.couleur||"#2563eb"},children:[a.jsx("span",{className:"discipline-tab__icon",children:ne.icone||""}),a.jsx("span",{className:"discipline-tab__name",children:ne.nom}),a.jsx("span",{className:"discipline-tab__class",children:ne.classe})]},ne.id))})]})})}),a.jsxs("div",{className:"admin-table-container",children:[a.jsxs("div",{className:"admin-table-header",children:[a.jsxs("h2",{className:"admin-table-title",children:["Ressources ",f&&`- ${cn(f)}`,u.length>0&&` (${u.length})`]}),a.jsxs("div",{className:"admin-table-actions",children:[a.jsxs("div",{className:"search-input",children:[a.jsx("span",{className:"search-input__icon",children:""}),a.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:A,onChange:ne=>R(ne.target.value)})]}),a.jsxs("select",{className:"form-select form-select--sm",value:g,onChange:ne=>y(ne.target.value),disabled:M||r.length===0,children:[a.jsx("option",{value:"",children:"Tous les chapitres"}),r.map(ne=>a.jsxs("option",{value:ne.id,children:[ne.numero,". ",ne.titre]},ne.id))]}),a.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:ne=>N(ne.target.value),children:[a.jsx("option",{value:"",children:"Tous les types"}),cg.map(ne=>a.jsxs("option",{value:ne.value,children:[ne.icon," ",ne.label]},ne.value))]}),a.jsxs("select",{className:"form-select form-select--sm",value:j,onChange:ne=>E(ne.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"premium",children:" Premium"}),a.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),D?a.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des ressources..."})]}):f?u.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),a.jsx("p",{className:"empty-state__message",children:A||x||j||g?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!A&&!x&&!j&&!g&&a.jsx("button",{onClick:oo,className:"btn btn--primary",children:"Crer la premire ressource"})]}):a.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:u.map(ne=>{const Ve=gr(ne.type);return a.jsxs("div",{className:"resource-item",children:[a.jsx("div",{className:`resource-item__icon resource-item__icon--${ne.type}`,style:{backgroundColor:`${Ve.color}15`,color:Ve.color},children:Ve.icon}),a.jsxs("div",{className:"resource-item__content",children:[a.jsxs("div",{className:"resource-item__title",children:[ne.titre,ne.isPremium&&a.jsx("span",{className:"badge badge--premium",children:"Premium"}),!ne.actif&&a.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),a.jsxs("div",{className:"resource-item__meta",children:[a.jsx("span",{children:Ve.label}),ne.chapitre&&a.jsxs("span",{children:[" ",_i(ne.chapitre)]}),ne.duree&&a.jsxs("span",{children:[" ",ne.duree," min"]}),ne.fichierNom&&a.jsxs("span",{children:[" ",ne.fichierNom]}),ne.tags&&ne.tags.length>0&&a.jsxs("span",{children:[" ",ne.tags.join(", ")]})]})]}),a.jsxs("div",{className:"resource-item__actions",children:[a.jsx("button",{onClick:()=>aa(ne),className:`table-action-btn ${ne.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:ne.isPremium?"Passer en gratuit":"Passer en Premium",children:ne.isPremium?"":""}),(ne.fichierURL||ne.urlExterne)&&a.jsx("button",{onClick:()=>Hi(ne),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),a.jsx("button",{onClick:()=>Ur(ne),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),a.jsx("button",{onClick:()=>Kc(ne),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:L===ne.id,children:L===ne.id?"":""})]})]},ne.id)})}):a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),a.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),F&&a.jsx("div",{className:"modal-overlay",onClick:ln,children:a.jsxs("div",{className:"modal modal--xl",onClick:ne=>ne.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:ce?"Modifier la ressource":"Nouvelle ressource"}),a.jsx("button",{onClick:ln,className:"modal__close",children:""})]}),a.jsxs("form",{onSubmit:Qc,children:[a.jsxs("div",{className:"modal__body",children:[!ce&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),a.jsxs("select",{name:"disciplineId",className:`form-select ${Ke.disciplineId?"form-select--error":""}`,value:J.disciplineId,onChange:At,children:[a.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(ne=>a.jsxs("option",{value:ne.id,children:[ne.icone," ",ne.nom," (",ne.classe,")"]},ne.id))]}),Ke.disciplineId&&a.jsx("span",{className:"form-error",children:Ke.disciplineId})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",style:{flex:2},children:[a.jsx("label",{className:"form-label form-label--required",children:"Titre"}),a.jsx("input",{type:"text",name:"titre",className:`form-input ${Ke.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:J.titre,onChange:At}),Ke.titre&&a.jsx("span",{className:"form-error",children:Ke.titre})]}),a.jsxs("div",{className:"form-group",style:{flex:1},children:[a.jsx("label",{className:"form-label form-label--required",children:"Type"}),a.jsx("select",{name:"type",className:`form-select ${Ke.type?"form-select--error":""}`,value:J.type,onChange:At,children:cg.map(ne=>a.jsxs("option",{value:ne.value,children:[ne.icon," ",ne.label]},ne.value))}),Ke.type&&a.jsx("span",{className:"form-error",children:Ke.type})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),a.jsxs("select",{name:"chapitreId",className:"form-select",value:J.chapitre||"",onChange:At,disabled:M,children:[a.jsx("option",{value:"",children:"Aucun chapitre"}),r.map(ne=>a.jsxs("option",{value:ne.id,children:[ne.numero,". ",ne.titre]},ne.id))]})]}),a.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[a.jsx("label",{className:"form-label",children:"Ordre"}),a.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:J.ordre,onChange:At})]}),a.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[a.jsx("label",{className:"form-label",children:"Dure (min)"}),a.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:J.duree||"",onChange:At})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:J.description||"",onChange:At})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:["Fichier",a.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",ug[J.type].join(", ")," - max ",r_," Mo)"]})]}),a.jsxs("div",{className:"file-upload",children:[a.jsx("input",{ref:Lr,type:"file",accept:ug[J.type].join(","),onChange:Vr,className:"file-upload__input",id:"file-input"}),!ot&&!Rt?a.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[a.jsx("div",{className:"file-upload__icon",children:""}),a.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),a.jsx("p",{className:"file-upload__hint",children:ug[J.type].join(", ")})]}):a.jsxs("div",{className:"file-upload__preview",children:[ot?.type.startsWith("image/")&&Rt&&a.jsx("img",{src:Rt,alt:"Aperu",className:"file-preview__image"}),ot?.type.startsWith("video/")&&Rt&&a.jsx("video",{src:Rt,controls:!0,className:"file-preview__video"}),!ot?.type.startsWith("image/")&&!ot?.type.startsWith("video/")&&a.jsx("div",{className:"file-preview__document",children:a.jsx("span",{className:"file-preview__icon",children:gr(J.type).icon})}),a.jsxs("div",{className:"file-preview__info",children:[a.jsx("p",{className:"file-preview__name",children:ot?.name||ce?.fichierNom}),ot&&a.jsx("p",{className:"file-preview__size",children:ni(ot.size)})]}),a.jsx("button",{type:"button",onClick:nn,className:"file-preview__remove",children:""})]})]}),Ke.fichier&&a.jsx("span",{className:"form-error",children:Ke.fichier}),V&&a.jsxs("div",{className:"upload-progress",children:[a.jsx("div",{className:"upload-progress__bar",style:{width:`${ee}%`}}),a.jsxs("span",{className:"upload-progress__text",children:[ee,"%"]})]})]}),J.type==="video"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),a.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:J.urlExterne||"",onChange:At}),a.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),J.type==="cours"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Contenu du cours"}),a.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:J.contenu||"",onChange:At}),a.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsxs("div",{className:"tags-input",children:[a.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:be,onChange:ne=>De(ne.target.value),onKeyPress:ne=>ne.key==="Enter"&&(ne.preventDefault(),Sl())}),a.jsx("button",{type:"button",onClick:Sl,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),J.tags&&J.tags.length>0&&a.jsx("div",{className:"tags-list",children:J.tags.map((ne,Ve)=>a.jsxs("span",{className:"tag",children:[ne,a.jsx("button",{type:"button",onClick:()=>lo(Ve),className:"tag__remove",children:""})]},Ve))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Options"}),a.jsxs("div",{className:"form-options",children:[a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"isPremium",checked:J.isPremium,onChange:At}),a.jsx("span",{children:"Contenu Premium "})]}),a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"actif",checked:J.actif!==!1,onChange:At}),a.jsx("span",{children:"Ressource active"})]})]})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{type:"button",onClick:ln,className:"btn btn--outline",disabled:k||V,children:"Annuler"}),a.jsx("button",{type:"submit",className:"btn btn--primary",disabled:k||V,children:k||V?V?`Upload ${ee}%...`:"Enregistrement...":ce?"Mettre  jour":"Crer la ressource"})]})]})]})}),he&&Q&&a.jsx("div",{className:"modal-overlay",onClick:ln,children:a.jsxs("div",{className:"modal modal--xl",onClick:ne=>ne.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsxs("h2",{className:"modal__title",children:[gr(Q.type).icon," ",Q.titre]}),a.jsx("button",{onClick:ln,className:"modal__close",children:""})]}),a.jsxs("div",{className:"modal__body",children:[Q.type==="video"&&Q.urlExterne?a.jsx("div",{className:"preview-video",children:a.jsx("iframe",{src:Q.urlExterne.replace("watch?v=","embed/"),title:Q.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):Q.fichierURL?a.jsx("div",{className:"preview-file",children:Q.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?a.jsx("img",{src:Q.fichierURL,alt:Q.titre}):Q.fichierURL.match(/\.(mp4|webm)$/i)?a.jsx("video",{src:Q.fichierURL,controls:!0}):Q.fichierURL.match(/\.pdf$/i)?a.jsx("iframe",{src:Q.fichierURL,title:Q.titre}):a.jsxs("div",{className:"preview-download",children:[a.jsx("span",{className:"preview-download__icon",children:gr(Q.type).icon}),a.jsx("p",{children:Q.fichierNom}),a.jsx("a",{href:Q.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):Q.contenu?a.jsx("div",{className:"preview-content",children:a.jsx("p",{children:Q.contenu})}):a.jsx("div",{className:"preview-empty",children:a.jsx("p",{children:"Aucun contenu  prvisualiser"})}),a.jsxs("div",{className:"preview-info",children:[Q.description&&a.jsx("p",{className:"preview-description",children:Q.description}),a.jsxs("div",{className:"preview-meta",children:[a.jsxs("span",{children:["Type : ",gr(Q.type).label]}),Q.duree&&a.jsxs("span",{children:["Dure : ",Q.duree," min"]}),Q.isPremium&&a.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),de&&ae&&a.jsx("div",{className:"modal-overlay",onClick:ln,children:a.jsxs("div",{className:"modal",onClick:ne=>ne.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),a.jsx("button",{onClick:ln,className:"modal__close",children:""})]}),a.jsxs("div",{className:"modal__body",children:[a.jsxs("p",{children:["Supprimer la ressource ",a.jsx("strong",{children:ae.titre})," ?"]}),ae.fichierURL&&a.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{onClick:ln,className:"btn btn--outline",children:"Annuler"}),a.jsx("button",{onClick:xi,className:"btn btn--danger",disabled:L!==null,children:L?"Suppression...":"Supprimer"})]})]})}),a.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},gL=Ge(Se,"quizzes"),vL=async t=>{try{let e=yt(gL,Nn("titre","asc"));t?.disciplineId;let r=(await lt(e)).docs.map(i=>({id:i.id,...i.data()}));return t?.isPremium,t?.difficulte,r}catch(e){throw console.error("Erreur lors de la rcupration des quiz :",e),e}},dX=async t=>{try{const e=await Nr(He(Se,"quizzes",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Erreur lors de la rcupration du quiz :",e),e}},hX=async t=>{try{return(await ei(gL,{...t,createdAt:Xe.now(),updatedAt:Xe.now()})).id}catch(e){throw console.error("Erreur lors de la cration du quiz :",e),e}},fX=async(t,e)=>{try{await sn(He(Se,"quizzes",t),{...e,updatedAt:Xe.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},mX=async t=>{try{await Uc(He(Se,"quizzes",t))}catch(e){throw console.error("Erreur lors de la suppression du quiz :",e),e}},pX=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,ZI=()=>({id:pX(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),eP=t=>{const e=t.questions||[],n=e.reduce((i,o)=>i+(o.points||1),0),r={facile:e.filter(i=>i.difficulte==="facile").length,moyen:e.filter(i=>i.difficulte==="moyen").length,difficile:e.filter(i=>i.difficulte==="difficile").length};return{nombreQuestions:e.length,totalPoints:n,parDifficulte:r,duree:t.duree||0}},gX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[i,o]=_.useState(!0),[c,u]=_.useState(null),[h,f]=_.useState(null),[p,g]=_.useState(""),[y,x]=_.useState(""),[N,j]=_.useState(""),[E,A]=_.useState(""),[R,T]=_.useState(!1),[I,M]=_.useState("list"),[B,D]=_.useState(null),[P,k]=_.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[q,L]=_.useState(null),[z,V]=_.useState(!1),[ve,ee]=_.useState(null),[H,se]=_.useState(null),[X,we]=_.useState({}),[W,F]=_.useState(!1),re=_.useCallback(async()=>{o(!0),u(null);try{const[be,De]=await Promise.all([vL(),wl.getAll()]);e(be),r(De.map(Be=>({id:Be.id,nom:Be.nom||Be.name||Be.id})))}catch(be){u("Erreur lors du chargement des donnes."),console.error(be)}finally{o(!1)}},[]);_.useEffect(()=>{re()},[re]),_.useEffect(()=>{if(h){const be=setTimeout(()=>f(null),4e3);return()=>clearTimeout(be)}},[h]);const de=t.filter(be=>{if(p){const De=p.toLowerCase();if(!be.titre.toLowerCase().includes(De))return!1}return!(y&&be.disciplineId!==y||N==="true"&&!be.isPremium||N==="false"&&be.isPremium||E&&!be.questions?.some(Be=>Be.difficulte===E))}),ye=()=>{D(null),k({disciplineId:"",titre:"",questions:[ZI()],duree:15,isPremium:!1,noteMinimale:50}),L(null),M("form")},he=be=>{D(be),k({disciplineId:be.disciplineId,titre:be.titre,questions:be.questions||[],duree:be.duree||15,isPremium:be.isPremium||!1,noteMinimale:be.noteMinimale||50}),L(null),M("form")},G=async()=>{if(!P.titre.trim()){u("Le titre du quiz est obligatoire.");return}if(!P.disciplineId){u("Veuillez slectionner une discipline.");return}if(P.questions.length===0){u("Le quiz doit contenir au moins une question.");return}for(let be=0;be<P.questions.length;be++){const De=P.questions[be];if(!De.question.trim()){u(`La question ${be+1} n'a pas d'nonc.`);return}if(De.options.filter(Ye=>!Ye.trim()).length>0){u(`La question ${be+1} a des options vides.`);return}}V(!0),u(null);try{B?(await fX(B.id,P),f("Quiz mis  jour avec succs !")):(await hX(P),f("Quiz cr avec succs !")),await re(),M("list")}catch(be){u("Erreur lors de la sauvegarde du quiz."),console.error(be)}finally{V(!1)}},ce=async be=>{try{await mX(be),f("Quiz supprim avec succs."),ee(null),await re()}catch(De){u("Erreur lors de la suppression du quiz."),console.error(De)}},Ie=()=>{const be=ZI();k(De=>({...De,questions:[...De.questions,be]})),L(be.id)},ae=be=>{const De=P.questions.find(Un=>Un.id===be);if(!De)return;const Be={...De,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${De.question} (copie)`},Ye=P.questions.findIndex(Un=>Un.id===be),Vt=[...P.questions];Vt.splice(Ye+1,0,Be),k(Un=>({...Un,questions:Vt})),L(Be.id)},Z=be=>{k(De=>({...De,questions:De.questions.filter(Be=>Be.id!==be)})),q===be&&L(null)},Q=(be,De,Be)=>{k(Ye=>({...Ye,questions:Ye.questions.map(Vt=>Vt.id===be?{...Vt,[De]:Be}:Vt)}))},me=(be,De,Be)=>{k(Ye=>({...Ye,questions:Ye.questions.map(Vt=>Vt.id===be?{...Vt,options:Vt.options.map((Un,qr)=>qr===De?Be:Un)}:Vt)}))},J=be=>{se(be),we({}),F(!1),M("preview")},Ae=(be,De)=>{W||we(Be=>({...Be,[be]:De}))},Ke=()=>{F(!0)},Je=be=>n.find(De=>De.id===be)?.nom||be,ot=({level:be})=>{const De={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return a.jsx("span",{className:`quiz-badge ${De[be]||"quiz-badge-moyen"}`,children:be.charAt(0).toUpperCase()+be.slice(1)})},on=()=>a.jsxs(a.Fragment,{children:[c&&a.jsxs("div",{className:"admin-message admin-message-error",children:[a.jsx(pv,{size:18}),a.jsx("span",{children:c}),a.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:a.jsx(pc,{size:16})})]}),h&&a.jsxs("div",{className:"admin-message admin-message-success",children:[a.jsx(fn,{size:18}),a.jsx("span",{children:h})]})]}),Rt=()=>a.jsxs("div",{className:"quiz-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(us,{size:24})," Gestion des Quiz"]}),a.jsxs("p",{className:"admin-subtitle",children:[t.length," quiz au total  ",de.length," affich(s)"]})]}),a.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ye,children:[a.jsx(lg,{size:18})," Nouveau Quiz"]})]}),a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"admin-search-wrapper",children:[a.jsx(lL,{size:18,className:"admin-search-icon"}),a.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:p,onChange:be=>g(be.target.value)})]}),a.jsxs("button",{className:`admin-btn admin-btn-outline ${R?"active":""}`,onClick:()=>T(!R),children:[a.jsx(kN,{size:16})," Filtres",R?a.jsx(gj,{size:14}):a.jsx(mv,{size:14})]})]}),R&&a.jsxs("div",{className:"admin-filters-panel",children:[a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Discipline"}),a.jsxs("select",{className:"admin-select",value:y,onChange:be=>x(be.target.value),children:[a.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(be=>a.jsx("option",{value:be.id,children:be.nom},be.id))]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Accs"}),a.jsxs("select",{className:"admin-select",value:N,onChange:be=>j(be.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"false",children:"Gratuit"}),a.jsx("option",{value:"true",children:"Premium"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Difficult"}),a.jsxs("select",{className:"admin-select",value:E,onChange:be=>A(be.target.value),children:[a.jsx("option",{value:"",children:"Toutes"}),a.jsx("option",{value:"facile",children:"Facile"}),a.jsx("option",{value:"moyen",children:"Moyen"}),a.jsx("option",{value:"difficile",children:"Difficile"})]})]}),a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),A(""),g("")},children:"Rinitialiser"})]}),i?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des quiz..."})]}):de.length===0?a.jsxs("div",{className:"admin-empty-state",children:[a.jsx(Ug,{size:48}),a.jsx("h3",{children:"Aucun quiz trouv"}),a.jsx("p",{children:t.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),t.length===0&&a.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ye,children:[a.jsx(lg,{size:18})," Crer un quiz"]})]}):a.jsx("div",{className:"quiz-grid",children:de.map(be=>{const De=eP(be);return a.jsxs("div",{className:"quiz-card",children:[a.jsxs("div",{className:"quiz-card-header",children:[a.jsxs("div",{className:"quiz-card-title-row",children:[a.jsx("h3",{className:"quiz-card-title",children:be.titre}),be.isPremium&&a.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[a.jsx(gi,{size:12})," Premium"]})]}),a.jsx("span",{className:"quiz-card-discipline",children:Je(be.disciplineId)})]}),a.jsxs("div",{className:"quiz-card-stats",children:[a.jsxs("div",{className:"quiz-stat",children:[a.jsx(Ug,{size:14}),a.jsxs("span",{children:[De.nombreQuestions," question(s)"]})]}),a.jsxs("div",{className:"quiz-stat",children:[a.jsx(pl,{size:14}),a.jsxs("span",{children:[De.totalPoints," pts"]})]}),a.jsxs("div",{className:"quiz-stat",children:[a.jsx(dd,{size:14}),a.jsxs("span",{children:[De.duree," min"]})]})]}),a.jsxs("div",{className:"quiz-card-difficulty",children:[De.parDifficulte.facile>0&&a.jsx(ot,{level:"facile"}),De.parDifficulte.moyen>0&&a.jsx(ot,{level:"moyen"}),De.parDifficulte.difficile>0&&a.jsx(ot,{level:"difficile"})]}),a.jsxs("div",{className:"quiz-card-actions",children:[a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>J(be),title:"Prvisualiser",children:[a.jsx(td,{size:14})," Aperu"]}),a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>he(be),title:"Modifier",children:[a.jsx(cY,{size:14})," Modifier"]}),ve===be.id?a.jsxs("div",{className:"quiz-delete-confirm",children:[a.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>ce(be.id),children:"Confirmer"}),a.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>ee(null),children:"Annuler"})]}):a.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>ee(be.id),title:"Supprimer",children:a.jsx(GI,{size:14})})]})]},be.id)})})]}),kt=()=>a.jsxs("div",{className:"quiz-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(us,{size:24}),B?"Modifier le quiz":"Nouveau quiz"]}),a.jsxs("p",{className:"admin-subtitle",children:[P.questions.length," question(s) ajoute(s)"]})]}),a.jsxs("div",{className:"admin-header-actions",children:[a.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>M("list"),children:[a.jsx(pc,{size:18})," Annuler"]}),a.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:G,disabled:z,children:[a.jsx(bY,{size:18})," ",z?"Enregistrement...":"Enregistrer"]})]})]}),a.jsxs("div",{className:"admin-card quiz-form-section",children:[a.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),a.jsxs("div",{className:"quiz-form-grid",children:[a.jsxs("div",{className:"admin-form-group quiz-form-full",children:[a.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),a.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:P.titre,onChange:be=>k(De=>({...De,titre:be.target.value}))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Discipline *"}),a.jsxs("select",{className:"admin-select",value:P.disciplineId,onChange:be=>k(De=>({...De,disciplineId:be.target.value})),children:[a.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(be=>a.jsx("option",{value:be.id,children:be.nom},be.id))]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),a.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:P.duree,onChange:be=>k(De=>({...De,duree:parseInt(be.target.value)||15}))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),a.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:P.noteMinimale,onChange:be=>k(De=>({...De,noteMinimale:parseInt(be.target.value)||50}))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Accs"}),a.jsxs("div",{className:`quiz-toggle ${P.isPremium?"quiz-toggle-active":""}`,onClick:()=>k(be=>({...be,isPremium:!be.isPremium})),children:[a.jsx(gi,{size:16}),a.jsx("span",{children:P.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),a.jsxs("div",{className:"admin-card quiz-form-section",children:[a.jsxs("div",{className:"quiz-questions-header",children:[a.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",P.questions.length,")"]}),a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Ie,children:[a.jsx(lg,{size:14})," Ajouter une question"]})]}),P.questions.length===0?a.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[a.jsx(Ug,{size:36}),a.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):a.jsx("div",{className:"quiz-questions-list",children:P.questions.map((be,De)=>a.jsxs("div",{className:`quiz-question-item ${q===be.id?"expanded":""}`,children:[a.jsxs("div",{className:"quiz-question-header",onClick:()=>L(q===be.id?null:be.id),children:[a.jsxs("div",{className:"quiz-question-header-left",children:[a.jsx($W,{size:16,className:"quiz-grip-icon"}),a.jsxs("span",{className:"quiz-question-number",children:["Q",De+1]}),a.jsx("span",{className:"quiz-question-preview",children:be.question||"Question sans nonc..."})]}),a.jsxs("div",{className:"quiz-question-header-right",children:[a.jsx(ot,{level:be.difficulte||"moyen"}),a.jsxs("span",{className:"quiz-question-points",children:[be.points," pt(s)"]}),q===be.id?a.jsx(gj,{size:16}):a.jsx(mv,{size:16})]})]}),q===be.id&&a.jsxs("div",{className:"quiz-question-body",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"nonc de la question *"}),a.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:be.question,onChange:Be=>Q(be.id,"question",Be.target.value)})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),a.jsx("div",{className:"quiz-options-grid",children:be.options.map((Be,Ye)=>a.jsxs("div",{className:`quiz-option-item ${be.reponseCorrecte===Ye?"quiz-option-correct":""}`,children:[a.jsx("button",{type:"button",className:`quiz-option-radio ${be.reponseCorrecte===Ye?"active":""}`,onClick:()=>Q(be.id,"reponseCorrecte",Ye),title:be.reponseCorrecte===Ye?"Bonne rponse":"Marquer comme bonne rponse",children:be.reponseCorrecte===Ye?a.jsx(fn,{size:16}):a.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+Ye)})}),a.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+Ye)}`,value:Be,onChange:Vt=>me(be.id,Ye,Vt.target.value)})]},Ye))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),a.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:be.explication,onChange:Be=>Q(be.id,"explication",Be.target.value)})]}),a.jsxs("div",{className:"quiz-question-meta",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Difficult"}),a.jsxs("select",{className:"admin-select",value:be.difficulte,onChange:Be=>Q(be.id,"difficulte",Be.target.value),children:[a.jsx("option",{value:"facile",children:"Facile"}),a.jsx("option",{value:"moyen",children:"Moyen"}),a.jsx("option",{value:"difficile",children:"Difficile"})]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Points"}),a.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:be.points,onChange:Be=>Q(be.id,"points",parseInt(Be.target.value)||1)})]})]}),a.jsxs("div",{className:"quiz-question-actions",children:[a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ae(be.id),children:[a.jsx(RW,{size:14})," Dupliquer"]}),a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>Z(be.id),children:[a.jsx(GI,{size:14})," Supprimer"]})]})]})]},be.id))}),P.questions.length>0&&a.jsx("div",{className:"quiz-add-question-bottom",children:a.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Ie,children:[a.jsx(lg,{size:16})," Ajouter une question"]})})]})]}),Lr=()=>{if(!H)return null;const be=eP(H);let De=0,Be=0;return W&&H.questions.forEach(Ye=>{Be+=Ye.points||1,X[Ye.id]===Ye.reponseCorrecte&&(De+=Ye.points||1)}),a.jsxs("div",{className:"quiz-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(td,{size:24})," Prvisualisation : ",H.titre]}),a.jsxs("p",{className:"admin-subtitle",children:[Je(H.disciplineId),"  ",be.nombreQuestions," questions  ",be.duree," min"]})]}),a.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{M("list"),se(null)},children:[a.jsx(pc,{size:18})," Fermer"]})]}),W&&a.jsxs("div",{className:`quiz-preview-score ${De/Be>=(H.noteMinimale||50)/100?"success":"fail"}`,children:[a.jsx(pl,{size:32}),a.jsxs("div",{children:[a.jsxs("h3",{children:["Score : ",De,"/",Be," (",Math.round(De/Be*100),"%)"]}),a.jsxs("p",{children:["Note minimale : ",H.noteMinimale||50,"% "," ",De/Be>=(H.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),a.jsx("div",{className:"quiz-preview-questions",children:H.questions.map((Ye,Vt)=>{const Un=X[Ye.id],qr=Un===Ye.reponseCorrecte;return a.jsxs("div",{className:"admin-card quiz-preview-question",children:[a.jsxs("div",{className:"quiz-preview-question-header",children:[a.jsxs("span",{className:"quiz-question-number",children:["Q",Vt+1]}),a.jsx(ot,{level:Ye.difficulte||"moyen"}),a.jsxs("span",{className:"quiz-question-points",children:[Ye.points," pt(s)"]})]}),a.jsx("p",{className:"quiz-preview-question-text",children:Ye.question}),a.jsx("div",{className:"quiz-preview-options",children:Ye.options.map((oo,Ur)=>{let Hi="quiz-preview-option";return W?Ur===Ye.reponseCorrecte?Hi+=" correct":Ur===Un&&!qr&&(Hi+=" incorrect"):Un===Ur&&(Hi+=" selected"),a.jsxs("button",{className:Hi,onClick:()=>Ae(Ye.id,Ur),disabled:W,children:[a.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+Ur)}),a.jsx("span",{children:oo}),W&&Ur===Ye.reponseCorrecte&&a.jsx(fn,{size:16,className:"quiz-preview-check"})]},Ur)})}),W&&Ye.explication&&a.jsxs("div",{className:"quiz-preview-explication",children:[a.jsx("strong",{children:"Explication :"})," ",Ye.explication]})]},Ye.id)})}),!W&&a.jsx("div",{className:"quiz-preview-submit",children:a.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:Ke,disabled:Object.keys(X).length<H.questions.length,children:[a.jsx(fn,{size:18})," Soumettre (",Object.keys(X).length,"/",H.questions.length,")"]})})]})};return a.jsxs("div",{className:"admin-container",children:[on(),I==="list"&&Rt(),I==="form"&&kt(),I==="preview"&&Lr()]})},yL=Ge(Se,"users"),vX=Ge(Se,"quizResults"),yX=async t=>{try{let e=yt(yL,Nn("displayName","asc"));t?.role;let r=(await lt(e)).docs.map(i=>({uid:i.id,...i.data()}));return t?.isPremium,t?.isActive,t?.search,r}catch(e){throw console.error("Erreur lors de la rcupration des utilisateurs :",e),e}},bX=async(t,e)=>{try{await sn(He(Se,"users",t),{role:e,updatedAt:Xe.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},xX=async(t,e)=>{try{const n={isPremium:e,updatedAt:Xe.now()};if(e){const r=new Date;r.setDate(r.getDate()+30),n.subscriptionEnd=Xe.fromDate(r)}else n.subscriptionEnd=null;await sn(He(Se,"users",t),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},_X=async(t,e)=>{try{await sn(He(Se,"users",t),{isActive:e,updatedAt:Xe.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},jX=async t=>{try{const e=yt(vX,at("userId","==",t)),r=(await lt(e)).docs.map(h=>({id:h.id,...h.data()})),i=r.length,o=r.filter(h=>h.reussi).length,c=i>0?Math.round(r.reduce((h,f)=>h+f.score,0)/i):0,u=r.length>0?new Date(Math.max(...r.map(h=>{const f=h.datePassage;return f?.toDate?f.toDate().getTime():new Date(f).getTime()}))):null;return{totalQuizPasses:i,scoresMoyens:c,quizReussis:o,dernierQuiz:u}}catch(e){return console.error("Erreur lors du calcul des statistiques :",e),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},wX=async()=>{try{const e=(await lt(yL)).docs.map(n=>n.data());return{total:e.length,admins:e.filter(n=>n.role==="admin").length,profs:e.filter(n=>n.role==="prof").length,eleves:e.filter(n=>n.role==="eleve").length,premium:e.filter(n=>n.isPremium).length,actifs:e.filter(n=>n.isActive!==!1).length}}catch(t){throw console.error("Erreur lors du calcul des stats globales :",t),t}},NX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(null),[i,o]=_.useState(!0),[c,u]=_.useState(null),[h,f]=_.useState(null),[p,g]=_.useState(""),[y,x]=_.useState(""),[N,j]=_.useState(""),[E,A]=_.useState(""),[R,T]=_.useState(!1),[I]=R8();_.useEffect(()=>{I.get("filter")==="premium"&&j("true")},[I]);const[M,B]=_.useState(null),[D,P]=_.useState(null),[k,q]=_.useState(!1),[L,z]=_.useState(null),[V,ve]=_.useState(null),ee=_.useCallback(async()=>{o(!0),u(null);try{const[G,ce]=await Promise.all([yX(),wX()]);e(G),r(ce)}catch(G){u("Erreur lors du chargement des utilisateurs."),console.error(G)}finally{o(!1)}},[]);_.useEffect(()=>{ee()},[ee]),_.useEffect(()=>{if(h){const G=setTimeout(()=>f(null),4e3);return()=>clearTimeout(G)}},[h]);const H=t.filter(G=>{if(p){const ce=p.toLowerCase();if(!G.displayName?.toLowerCase().includes(ce)&&!G.email?.toLowerCase().includes(ce))return!1}return!(y&&G.role!==y||N==="true"&&!G.isPremium||N==="false"&&G.isPremium||E==="true"&&G.isActive===!1||E==="false"&&G.isActive!==!1)}),se=async G=>{B(G),q(!0);try{const ce=await jX(G.uid);P(ce)}catch(ce){console.error("Erreur lors du chargement des statistiques :",ce),P(null)}finally{q(!1)}},X=async()=>{if(V){z(V.userId);try{switch(V.type){case"role":await bX(V.userId,V.value),f("Rle mis  jour avec succs.");break;case"premium":await xX(V.userId,V.value),f(V.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await _X(V.userId,V.value),f(V.value?"Compte ractiv.":"Compte dsactiv.");break}await ee()}catch(G){u("Erreur lors de l'excution de l'action."),console.error(G)}finally{z(null),ve(null)}}},we=({role:G})=>{const ce={admin:{icon:a.jsx(DN,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:a.jsx(hd,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:a.jsx(us,{size:12}),className:"user-badge-eleve",label:"lve"}},Ie=ce[G]||ce.eleve;return a.jsxs("span",{className:`user-badge ${Ie.className}`,children:[Ie.icon," ",Ie.label]})},W=G=>G?(G?.toDate?G.toDate():new Date(G)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",F=G=>G?G.charAt(0).toUpperCase():"?",re=()=>a.jsxs(a.Fragment,{children:[c&&a.jsxs("div",{className:"admin-message admin-message-error",children:[a.jsx(pv,{size:18}),a.jsx("span",{children:c}),a.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:a.jsx(pc,{size:16})})]}),h&&a.jsxs("div",{className:"admin-message admin-message-success",children:[a.jsx(fn,{size:18}),a.jsx("span",{children:h})]})]}),de=()=>{if(!n)return null;const G=[{label:"Total",value:n.total,icon:a.jsx(Vg,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:a.jsx(us,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:a.jsx(hd,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:a.jsx(gi,{size:20}),color:"stat-gold"}];return a.jsx("div",{className:"user-stats-grid",children:G.map(ce=>a.jsxs("div",{className:`user-stat-card ${ce.color}`,children:[a.jsx("div",{className:"user-stat-icon",children:ce.icon}),a.jsxs("div",{className:"user-stat-info",children:[a.jsx("span",{className:"user-stat-value",children:ce.value}),a.jsx("span",{className:"user-stat-label",children:ce.label})]})]},ce.label))})},ye=()=>V?a.jsx("div",{className:"admin-modal-overlay",onClick:()=>ve(null),children:a.jsxs("div",{className:"admin-modal",onClick:G=>G.stopPropagation(),children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h3",{children:"Confirmer l'action"}),a.jsx("button",{className:"admin-modal-close",onClick:()=>ve(null),children:a.jsx(pc,{size:20})})]}),a.jsx("div",{className:"admin-modal-body",children:a.jsx("p",{children:V.label})}),a.jsxs("div",{className:"admin-modal-footer",children:[a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>ve(null),children:"Annuler"}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:X,disabled:L===V.userId,children:L===V.userId?"En cours...":"Confirmer"})]})]})}):null,he=()=>M?a.jsx("div",{className:"admin-modal-overlay",onClick:()=>B(null),children:a.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:G=>G.stopPropagation(),children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h3",{children:"Dtail de l'utilisateur"}),a.jsx("button",{className:"admin-modal-close",onClick:()=>B(null),children:a.jsx(pc,{size:20})})]}),a.jsxs("div",{className:"admin-modal-body",children:[a.jsxs("div",{className:"user-detail-profile",children:[a.jsx("div",{className:"user-detail-avatar",children:F(M.displayName)}),a.jsxs("div",{className:"user-detail-info",children:[a.jsx("h4",{children:M.displayName||"Sans nom"}),a.jsx("p",{children:M.email}),a.jsxs("div",{className:"user-detail-badges",children:[a.jsx(we,{role:M.role}),M.isPremium&&a.jsxs("span",{className:"user-badge user-badge-premium",children:[a.jsx(gi,{size:12})," Premium"]}),a.jsx("span",{className:`user-badge ${M.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:M.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),a.jsxs("div",{className:"user-detail-dates",children:[a.jsxs("div",{children:[a.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),a.jsx("span",{children:W(M.createdAt)})]}),M.isPremium&&M.subscriptionEnd&&a.jsxs("div",{children:[a.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),a.jsx("span",{children:W(M.subscriptionEnd)})]})]}),a.jsxs("div",{className:"user-detail-stats-section",children:[a.jsxs("h4",{children:[a.jsx(mc,{size:18})," Statistiques"]}),k?a.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des statistiques..."})]}):D?a.jsxs("div",{className:"user-detail-stats-grid",children:[a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(us,{size:20}),a.jsx("span",{className:"user-detail-stat-value",children:D.totalQuizPasses}),a.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(of,{size:20}),a.jsxs("span",{className:"user-detail-stat-value",children:[D.scoresMoyens,"%"]}),a.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(pl,{size:20}),a.jsx("span",{className:"user-detail-stat-value",children:D.quizReussis}),a.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(dd,{size:20}),a.jsx("span",{className:"user-detail-stat-value",children:D.dernierQuiz?W(D.dernierQuiz):"Aucun"}),a.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):a.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return a.jsxs("div",{className:"admin-container",children:[re(),ye(),he(),a.jsxs("div",{className:"user-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(Vg,{size:24})," Gestion des Utilisateurs"]}),a.jsxs("p",{className:"admin-subtitle",children:[t.length," utilisateur(s) au total  ",H.length," affich(s)"]})]}),a.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:ee,children:[a.jsx(pY,{size:16})," Actualiser"]})]}),de(),a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"admin-search-wrapper",children:[a.jsx(lL,{size:18,className:"admin-search-icon"}),a.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:p,onChange:G=>g(G.target.value)})]}),a.jsxs("button",{className:`admin-btn admin-btn-outline ${R?"active":""}`,onClick:()=>T(!R),children:[a.jsx(kN,{size:16})," Filtres",R?a.jsx(gj,{size:14}):a.jsx(mv,{size:14})]})]}),R&&a.jsxs("div",{className:"admin-filters-panel",children:[a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Rle"}),a.jsxs("select",{className:"admin-select",value:y,onChange:G=>x(G.target.value),children:[a.jsx("option",{value:"",children:"Tous les rles"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"prof",children:"Professeur"}),a.jsx("option",{value:"eleve",children:"lve"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),a.jsxs("select",{className:"admin-select",value:N,onChange:G=>j(G.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"true",children:"Premium"}),a.jsx("option",{value:"false",children:"Gratuit"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Statut"}),a.jsxs("select",{className:"admin-select",value:E,onChange:G=>A(G.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"true",children:"Actifs"}),a.jsx("option",{value:"false",children:"Dsactivs"})]})]}),a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),A(""),g("")},children:"Rinitialiser"})]}),i?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des utilisateurs..."})]}):H.length===0?a.jsxs("div",{className:"admin-empty-state",children:[a.jsx(Vg,{size:48}),a.jsx("h3",{children:"Aucun utilisateur trouv"}),a.jsx("p",{children:t.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):a.jsx("div",{className:"user-table-wrapper",children:a.jsxs("table",{className:"user-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Utilisateur"}),a.jsx("th",{children:"Rle"}),a.jsx("th",{children:"Abonnement"}),a.jsx("th",{children:"Statut"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:H.map(G=>a.jsxs("tr",{className:G.isActive===!1?"user-row-inactive":"",children:[a.jsx("td",{children:a.jsxs("div",{className:"user-cell-info",children:[a.jsx("div",{className:"user-avatar-sm",children:F(G.displayName)}),a.jsxs("div",{children:[a.jsx("span",{className:"user-cell-name",children:G.displayName||"Sans nom"}),a.jsx("span",{className:"user-cell-email",children:G.email})]})]})}),a.jsx("td",{children:a.jsxs("select",{className:"admin-select admin-select-sm",value:G.role,onChange:ce=>ve({type:"role",userId:G.uid,value:ce.target.value,label:`Changer le rle de "${G.displayName||G.email}" en "${ce.target.value}" ?`}),children:[a.jsx("option",{value:"eleve",children:"lve"}),a.jsx("option",{value:"prof",children:"Professeur"}),a.jsx("option",{value:"admin",children:"Admin"})]})}),a.jsx("td",{children:a.jsx("button",{className:`user-premium-toggle ${G.isPremium?"active":""}`,onClick:()=>ve({type:"premium",userId:G.uid,value:!G.isPremium,label:G.isPremium?`Dsactiver le statut Premium de "${G.displayName||G.email}" ?`:`Activer le statut Premium de "${G.displayName||G.email}" pour 30 jours ?`}),disabled:L===G.uid,children:G.isPremium?a.jsxs(a.Fragment,{children:[a.jsx(af,{size:14})," Premium"]}):a.jsxs(a.Fragment,{children:[a.jsx(gi,{size:14})," Gratuit"]})})}),a.jsx("td",{children:a.jsx("button",{className:`user-status-toggle ${G.isActive!==!1?"active":"inactive"}`,onClick:()=>ve({type:"active",userId:G.uid,value:G.isActive===!1,label:G.isActive===!1?`Ractiver le compte de "${G.displayName||G.email}" ?`:`Dsactiver le compte de "${G.displayName||G.email}" ?`}),disabled:L===G.uid,children:G.isActive!==!1?a.jsxs(a.Fragment,{children:[a.jsx(LY,{size:14})," Actif"]}):a.jsxs(a.Fragment,{children:[a.jsx(UY,{size:14})," Dsactiv"]})})}),a.jsx("td",{children:a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>se(G),title:"Voir les statistiques",children:[a.jsx(td,{size:14})," Dtail"]})})]},G.uid))})]})})]})]})},EX=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(null),[i,o]=_.useState(!0),[c,u]=_.useState(null),[h,f]=_.useState(""),[p,g]=_.useState(""),[y,x]=_.useState(""),[N,j]=_.useState(!1),E=_.useCallback(async()=>{try{o(!0),u(null);const M=await lt(Ge(Se,"users")),B=new Map;M.docs.forEach(de=>{const ye=de.data();B.set(de.id,{name:ye.displayName||"Sans nom",email:ye.email||""})});const D=await lt(Ge(Se,"quizzes")),P=new Map;D.docs.forEach(de=>{const ye=de.data();P.set(de.id,{titre:ye.titre||ye.quizTitre||"Quiz sans titre",discipline:ye.disciplineNom||ye.matiereNom||""})});const k=await lt(Ge(Se,"quizzes_v2")),q=new Map;k.docs.forEach(de=>{const ye=de.data();q.set(de.id,{titre:ye.titre||"Quiz avanc sans titre",discipline:ye.disciplineNom||""})});const L=[];try{(await lt(yt(Ge(Se,"quiz_results"),Nn("datePassage","desc"),Js(200)))).docs.forEach(ye=>{const he=ye.data(),G=B.get(he.userId)||{name:"Inconnu",email:""},ce=P.get(he.quizId)||{titre:he.quizTitre||"Quiz",discipline:he.disciplineNom||""},Ie=he.pourcentage??(he.totalPoints>0?Math.round(he.score/he.totalPoints*100):he.score>0?Math.round(he.score/20*100):0);L.push({id:ye.id,quizId:he.quizId||"",quizTitre:ce.titre,userId:he.userId||"",userName:G.name,userEmail:G.email,score:he.score||0,scoreMax:he.totalPoints||20,pourcentage:Ie,reussi:he.reussi??Ie>=50,tempsEcoule:he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:ce.discipline})})}catch(de){console.warn("Pas de rsultats v1 ou index manquant:",de)}const z=[];try{(await lt(yt(Ge(Se,"quiz_results_v2"),Nn("datePassage","desc"),Js(200)))).docs.forEach(ye=>{const he=ye.data(),G=B.get(he.userId)||{name:"Inconnu",email:""},ce=q.get(he.quizId)||{titre:he.quizTitre||"Quiz avanc",discipline:he.disciplineNom||""},Ie=he.scoreMax>0?Math.round(he.score/he.scoreMax*100):0;z.push({id:ye.id,quizId:he.quizId||"",quizTitre:ce.titre,userId:he.userId||"",userName:G.name,userEmail:G.email,score:he.score||0,scoreMax:he.scoreMax||0,pourcentage:Ie,reussi:he.reussi??Ie>=50,tempsEcoule:he.tempsTotal||he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:ce.discipline})})}catch(de){console.warn("Pas de rsultats v2 ou index manquant:",de)}const V=[...L,...z].sort((de,ye)=>ye.datePassage.getTime()-de.datePassage.getTime());e(V);const ve=new Date,ee=new Date(ve.getFullYear(),ve.getMonth(),ve.getDate()),H=new Date(ee.getTime()-10080*60*1e3),se=V.length,X=se>0?Math.round(V.reduce((de,ye)=>de+ye.pourcentage,0)/se):0,we=se>0?Math.round(V.filter(de=>de.reussi).length/se*100):0,W=se>0?Math.round(V.reduce((de,ye)=>de+ye.tempsEcoule,0)/se):0,F=V.filter(de=>de.datePassage>=ee).length,re=V.filter(de=>de.datePassage>=H).length;r({totalResultats:se,moyenneGenerale:X,tauxReussite:we,tempsEcouleMoyen:W,resultatsAujourdHui:F,resultats7Jours:re})}catch(M){console.error("Erreur chargement rsultats:",M),u("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);_.useEffect(()=>{E()},[E]);const A=t.filter(M=>{if(h&&M.type!==h||p==="true"&&!M.reussi||p==="false"&&M.reussi)return!1;if(y){const B=y.toLowerCase();if(!M.userName.toLowerCase().includes(B)&&!M.userEmail.toLowerCase().includes(B)&&!M.quizTitre.toLowerCase().includes(B)&&!M.disciplineNom.toLowerCase().includes(B))return!1}return!0}),R=M=>{if(M<60)return`${M}s`;const B=Math.floor(M/60),D=M%60;return D>0?`${B}min ${D}s`:`${B}min`},T=M=>M.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=M=>M>=80?"results-score--excellent":M>=60?"results-score--bien":M>=40?"results-score--moyen":"results-score--faible";return a.jsxs("div",{className:"results-admin",children:[a.jsxs("div",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),a.jsx("div",{className:"admin-page-header__actions",children:a.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:E,children:" Actualiser"})})]}),n&&a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.totalResultats}),a.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsxs("div",{className:"stat-card__value",children:[n.moyenneGenerale,"%"]}),a.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsxs("div",{className:"stat-card__value",children:[n.tauxReussite,"%"]}),a.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:n.resultatsAujourdHui}),a.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"admin-search",children:[a.jsx("span",{className:"admin-search-icon",children:""}),a.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:y,onChange:M=>x(M.target.value)})]}),a.jsx("button",{className:`admin-btn admin-btn-ghost ${N?"active":""}`,onClick:()=>j(!N),children:" Filtres"})]}),N&&a.jsxs("div",{className:"admin-filters-panel",children:[a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),a.jsxs("select",{className:"admin-select",value:h,onChange:M=>f(M.target.value),children:[a.jsx("option",{value:"",children:"Tous les types"}),a.jsx("option",{value:"classique",children:"Classique (v1)"}),a.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),a.jsxs("select",{className:"admin-select",value:p,onChange:M=>g(M.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"true",children:"Russis"}),a.jsx("option",{value:"false",children:"chous"})]})]}),a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{f(""),g(""),x("")},children:"Rinitialiser"})]}),i?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des rsultats..."})]}):c?a.jsxs("div",{className:"admin-error",children:[a.jsxs("p",{children:[" ",c]}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:E,children:"Ressayer"})]}):A.length===0?a.jsxs("div",{className:"admin-empty-state",children:[a.jsx("span",{style:{fontSize:"3rem"},children:""}),a.jsx("h3",{children:"Aucun rsultat trouv"}),a.jsx("p",{children:t.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):a.jsxs("div",{className:"results-table-wrapper",children:[a.jsxs("table",{className:"results-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"lve"}),a.jsx("th",{children:"Quiz"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Score"}),a.jsx("th",{children:"Rsultat"}),a.jsx("th",{children:"Dure"}),a.jsx("th",{children:"Date"})]})}),a.jsx("tbody",{children:A.map(M=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"results-cell-user",children:[a.jsx("span",{className:"results-cell-name",children:M.userName}),a.jsx("span",{className:"results-cell-email",children:M.userEmail})]})}),a.jsx("td",{children:a.jsxs("div",{className:"results-cell-quiz",children:[a.jsx("span",{className:"results-cell-quiz-title",children:M.quizTitre}),M.disciplineNom&&a.jsx("span",{className:"results-cell-discipline",children:M.disciplineNom})]})}),a.jsx("td",{children:a.jsx("span",{className:`results-badge results-badge--${M.type}`,children:M.type==="classique"?" Classique":" Avanc"})}),a.jsxs("td",{children:[a.jsxs("span",{className:`results-score ${I(M.pourcentage)}`,children:[M.pourcentage,"%"]}),a.jsxs("span",{className:"results-score-detail",children:[M.score,"/",M.scoreMax]})]}),a.jsx("td",{children:a.jsx("span",{className:`results-status ${M.reussi?"results-status--success":"results-status--fail"}`,children:M.reussi?" Russi":" chou"})}),a.jsx("td",{className:"results-cell-duration",children:R(M.tempsEcoule)}),a.jsx("td",{className:"results-cell-date",children:T(M.datePassage)})]},`${M.type}-${M.id}`))})]}),a.jsx("div",{className:"results-footer",children:a.jsxs("p",{children:[A.length," rsultat",A.length>1?"s":""," affich",A.length>1?"s":"",A.length!==t.length&&` sur ${t.length} au total`]})})]})]})},Du={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},SX=()=>{const[t,e]=_.useState(Du),[n,r]=_.useState(Du),[i,o]=_.useState(!0),[c,u]=_.useState(!1),[h,f]=_.useState(null),[p,g]=_.useState(null),[y,x]=_.useState(!1),N=_.useCallback(async()=>{try{o(!0),f(null);const T=He(Se,"settings","platform"),I=await Nr(T);if(I.exists()){const M=I.data(),B={...Du,...M};e(B),r(B)}else e(Du),r(Du)}catch(T){console.error("Erreur chargement paramtres:",T),f("Impossible de charger les paramtres.")}finally{o(!1)}},[]);_.useEffect(()=>{N()},[N]),_.useEffect(()=>{if(p){const T=setTimeout(()=>g(null),4e3);return()=>clearTimeout(T)}},[p]),_.useEffect(()=>{const T=JSON.stringify(t)!==JSON.stringify(n);x(T)},[t,n]);const j=(T,I)=>{e(M=>({...M,[T]:I}))},E=async()=>{try{if(u(!0),f(null),t.premiumMensuel<0||t.premiumAnnuel<0){f("Les tarifs ne peuvent pas tre ngatifs.");return}if(t.quizNoteMinimale<0||t.quizNoteMinimale>20){f("La note minimale doit tre entre 0 et 20.");return}const T=He(Se,"settings","platform");await Ly(T,{...t,updatedAt:en()}),r(t),x(!1),g("Paramtres sauvegards avec succs !")}catch(T){console.error("Erreur sauvegarde paramtres:",T),f("Impossible de sauvegarder les paramtres.")}finally{u(!1)}},A=()=>{e(n),x(!1)},R=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&e(Du)};return i?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des paramtres..."})]}):a.jsxs("div",{className:"settings-admin",children:[a.jsxs("div",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),a.jsxs("div",{className:"admin-page-header__actions",children:[y&&a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:A,children:"Annuler"}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:E,disabled:!y||c,children:c?" Sauvegarde...":" Sauvegarder"})]})]}),y&&a.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),h&&a.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",h]}),p&&a.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",p]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),a.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Nom du site"}),a.jsx("input",{type:"text",className:"admin-input",value:t.siteName,onChange:T=>j("siteName",T.target.value)})]}),a.jsxs("div",{className:"settings-field settings-field--full",children:[a.jsx("label",{className:"settings-label",children:"Description"}),a.jsx("input",{type:"text",className:"admin-input",value:t.siteDescription,onChange:T=>j("siteDescription",T.target.value)})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Email de contact"}),a.jsx("input",{type:"email",className:"admin-input",value:t.contactEmail,onChange:T=>j("contactEmail",T.target.value)})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Tlphone"}),a.jsx("input",{type:"tel",className:"admin-input",value:t.contactPhone,onChange:T=>j("contactPhone",T.target.value)})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),a.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),a.jsx("input",{type:"number",className:"admin-input",value:t.premiumMensuel,onChange:T=>j("premiumMensuel",parseInt(T.target.value)||0),min:0,step:500}),a.jsxs("span",{className:"settings-hint",children:["Actuellement : ",t.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),a.jsx("input",{type:"number",className:"admin-input",value:t.premiumAnnuel,onChange:T=>j("premiumAnnuel",parseInt(T.target.value)||0),min:0,step:1e3}),a.jsxs("span",{className:"settings-hint",children:["conomie : ",(t.premiumMensuel*12-t.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),a.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),a.jsx("input",{type:"number",className:"admin-input",value:t.quizDureeDefaut,onChange:T=>j("quizDureeDefaut",parseInt(T.target.value)||0),min:1,max:120})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),a.jsx("input",{type:"number",className:"admin-input",value:t.quizNoteMinimale,onChange:T=>j("quizNoteMinimale",parseInt(T.target.value)||0),min:0,max:20})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),a.jsx("input",{type:"number",className:"admin-input",value:t.quizTentativesMax,onChange:T=>j("quizTentativesMax",parseInt(T.target.value)||0),min:1,max:10}),a.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),a.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Mode maintenance"}),a.jsxs("div",{className:"settings-toggle-wrapper",children:[a.jsx("button",{className:`settings-toggle ${t.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>j("maintenanceMode",!t.maintenanceMode),children:a.jsx("span",{className:"settings-toggle__knob"})}),a.jsx("span",{className:`settings-toggle-label ${t.maintenanceMode?"settings-toggle-label--active":""}`,children:t.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),a.jsxs("div",{className:"settings-field settings-field--full",children:[a.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),a.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:t.maintenanceMessage,onChange:T=>j("maintenanceMessage",T.target.value),disabled:!t.maintenanceMode})]})]})]}),a.jsxs("div",{className:"settings-actions",children:[a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:R,children:" Rinitialiser aux valeurs par dfaut"}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:E,disabled:!y||c,children:c?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},AX=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],TX=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],CX=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Ba=({value:t,onChange:e,placeholder:n="Saisissez votre texte...",minHeight:r=100,maxHeight:i=400,toolbar:o=AX,disabled:c=!1,className:u=""})=>{const h=_.useRef(null),f=_.useRef(!1),[p,g]=_.useState(!1),[y,x]=_.useState(!1);_.useEffect(()=>{h.current&&!f.current&&h.current.innerHTML!==t&&(h.current.innerHTML=t||""),f.current=!1},[t]);const N=_.useCallback(()=>{h.current&&(f.current=!0,e(h.current.innerHTML))},[e]),j=_.useCallback((T,I)=>{h.current?.focus(),document.execCommand(T,!1,I),N()},[N]),E=_.useCallback(()=>{const T=prompt("URL du lien :","https://");T&&j("createLink",T)},[j]),A=_.useCallback(()=>{j("removeFormat"),j("formatBlock","p")},[j]);_.useEffect(()=>{const T=()=>{g(!1),x(!1)};return document.addEventListener("click",T),()=>document.removeEventListener("click",T)},[]);const R=T=>{switch(T){case"bold":return a.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:I=>{I.preventDefault(),j("bold")},children:a.jsx("strong",{children:"G"})},"bold");case"italic":return a.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:I=>{I.preventDefault(),j("italic")},children:a.jsx("em",{children:"I"})},"italic");case"underline":return a.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:I=>{I.preventDefault(),j("underline")},children:a.jsx("u",{children:"S"})},"underline");case"strikethrough":return a.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:I=>{I.preventDefault(),j("strikeThrough")},children:a.jsx("s",{children:"B"})},"strike");case"heading":return a.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:I=>{I.preventDefault(),j("formatBlock","h3")},children:"H"},"heading");case"color":return a.jsxs("span",{className:"rte-dropdown-wrapper",onClick:I=>I.stopPropagation(),children:[a.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{g(!p),x(!1)},children:a.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),p&&a.jsx("div",{className:"rte-color-picker",children:TX.map(I=>a.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:I,border:I==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:M=>{M.preventDefault(),j("foreColor",I),g(!1)}},I))})]},"color");case"highlight":return a.jsxs("span",{className:"rte-dropdown-wrapper",onClick:I=>I.stopPropagation(),children:[a.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{x(!y),g(!1)},children:a.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),y&&a.jsx("div",{className:"rte-color-picker",children:CX.map(I=>a.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:I==="transparent"?"#fff":I,border:"1px solid #ccc"},onMouseDown:M=>{M.preventDefault(),j("hiliteColor",I),x(!1)},children:I==="transparent"?"":""},I))})]},"highlight");case"alignLeft":return a.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:I=>{I.preventDefault(),j("justifyLeft")},children:""},"alignL");case"alignCenter":return a.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:I=>{I.preventDefault(),j("justifyCenter")},children:""},"alignC");case"alignRight":return a.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:I=>{I.preventDefault(),j("justifyRight")},children:""},"alignR");case"bulletList":return a.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:I=>{I.preventDefault(),j("insertUnorderedList")},children:""},"ul");case"numberedList":return a.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:I=>{I.preventDefault(),j("insertOrderedList")},children:"1"},"ol");case"subscript":return a.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:I=>{I.preventDefault(),j("subscript")},children:["X",a.jsx("sub",{children:""})]},"sub");case"superscript":return a.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:I=>{I.preventDefault(),j("superscript")},children:["X",a.jsx("sup",{children:""})]},"sup");case"link":return a.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:I=>{I.preventDefault(),E()},children:""},"link");case"clean":return a.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:I=>{I.preventDefault(),A()},children:""},"clean");default:return null}};return a.jsxs("div",{className:`rte-container ${c?"rte-disabled":""} ${u}`,children:[!c&&a.jsx("div",{className:"rte-toolbar",children:o.map(T=>R(T))}),a.jsx("div",{ref:h,className:"rte-editor",contentEditable:!c,onInput:N,onBlur:N,"data-placeholder":n,style:{minHeight:`${r}px`,maxHeight:`${i}px`},suppressContentEditableWarning:!0})]})},fd={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},gv={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},vv={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function kn(t="id"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function IX(t,e){const n={id:kn("q"),type:t,enonce:"",difficulte:"moyen",points:2,ordre:e};switch(t){case"qcm_unique":return{...n,typeData:{options:[{id:kn("opt"),texte:"",isCorrect:!0},{id:kn("opt"),texte:"",isCorrect:!1},{id:kn("opt"),texte:"",isCorrect:!1},{id:kn("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:kn("opt"),texte:"",isCorrect:!0},{id:kn("opt"),texte:"",isCorrect:!0},{id:kn("opt"),texte:"",isCorrect:!1},{id:kn("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:kn("item"),texte:"",ordreCorrect:1},{id:kn("item"),texte:"",ordreCorrect:2},{id:kn("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:kn("pair"),gauche:"",droite:""},{id:kn("pair"),gauche:"",droite:""},{id:kn("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const hm="quizzes_v2",PX="quiz_results_v2";async function OX(t,e){try{const n=await ei(Ge(Se,hm),{...t,auteurId:e,createdAt:en(),updatedAt:en()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function RX(t,e){try{const n=He(Se,hm,t);await sn(n,{...e,updatedAt:en()}),console.log(" Quiz avanc mis  jour :",t)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function kX(t){try{await Uc(He(Se,hm,t)),console.log(" Quiz avanc supprim :",t)}catch(e){throw console.error(" Erreur suppression quiz :",e),new Error("Impossible de supprimer le quiz")}}async function bL(t){try{const e=await Nr(He(Se,hm,t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(e){throw console.error(" Erreur rcupration quiz :",e),new Error("Impossible de rcuprer le quiz")}}async function DX(){try{const t=yt(Ge(Se,hm),Nn("createdAt","desc"));return(await lt(t)).docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||void 0}})}catch(t){throw console.error(" Erreur rcupration tous les quiz :",t),new Error("Impossible de rcuprer les quiz")}}function MX(t,e){let n=0,r=0;const i=[];for(const o of t.questions){r+=o.points;const c=e.find(g=>g.questionId===o.id);if(!c){i.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let u=0,h=!1,f=!1,p=!1;switch(o.type){case"qcm_unique":{const y=o.typeData.options.find(x=>x.isCorrect);y&&c.selectedOptionId===y.id&&(u=o.points,h=!0);break}case"qcm_multiple":{const g=o.typeData,y=g.options.filter(A=>A.isCorrect).map(A=>A.id),x=g.options.filter(A=>!A.isCorrect).map(A=>A.id),N=c.selectedOptionIds||[],j=N.some(A=>x.includes(A)),E=N.filter(A=>y.includes(A)).length;!j&&E===y.length?(u=o.points,h=!0):g.scoringPartiel&&E>0&&!j&&(u=Math.round(o.points*E/y.length*100)/100,f=!0);break}case"drag_drop":{const g=o.typeData,y=c.ordrePropose||[],x=g.items.sort((j,E)=>j.ordreCorrect-E.ordreCorrect).map(j=>j.id);let N=0;for(let j=0;j<x.length;j++)y[j]===x[j]&&N++;N===x.length?(u=o.points,h=!0):N>0&&(u=Math.round(o.points*N/x.length*100)/100,f=!0);break}case"mise_en_relation":{const g=o.typeData,y=c.relationsProposees||{};let x=0;for(const N of g.paires)y[N.id]===N.id&&x++;x===g.paires.length?(u=o.points,h=!0):x>0&&(u=Math.round(o.points*x/g.paires.length*100)/100,f=!0);break}case"essai":{const g=o.typeData,y=c.texteReponse||"";if(g.correctionMode==="mots_cles"&&g.motsCles.length>0){const x=y.toLowerCase().replace(/<[^>]*>/g,"");let N=0,j=0;for(const E of g.motsCles)N+=E.poids,x.includes(E.mot.toLowerCase())&&(j+=E.poids);N>0&&(u=Math.round(o.points*j/N*100)/100,h=j===N,f=j>0&&j<N)}else p=!0;break}}n+=u,i.push({questionId:o.id,type:o.type,pointsObtenus:u,pointsMax:o.points,isCorrect:h,isPartiel:f,correctionManuelleRequise:p})}return{score:n,scoreMax:r,details:i}}async function zX(t,e,n,r){try{const{score:i,scoreMax:o,details:c}=MX(t,n),u=o>0?Math.round(i/o*20*100)/100:0,h=c.some(g=>g.correctionManuelleRequise),f={quizId:t.id,userId:e,reponses:n,score:i,scoreMax:o,note20:u,tempsEcoule:r,datePassage:new Date,reussi:u>=t.noteMinimale,correctionManuelle:h,detailsParQuestion:c},p=await ei(Ge(Se,PX),{...f,datePassage:en()});return console.log(" Rsultat quiz enregistr :",p.id),{id:p.id,...f}}catch(i){throw console.error(" Erreur soumission quiz :",i),new Error("Impossible d'enregistrer le rsultat")}}const LX=({existingQuiz:t,disciplines:e,auteurId:n,onSave:r,onCancel:i})=>{const[o,c]=_.useState(t?.titre||""),[u,h]=_.useState(t?.description||""),[f,p]=_.useState(t?.disciplineId||""),[g,y]=_.useState(t?.duree||30),[x,N]=_.useState(t?.isPremium??!0),[j,E]=_.useState(t?.noteMinimale||10),[A,R]=_.useState(t?.melangerQuestions??!1),[T,I]=_.useState(t?.melangerOptions??!1),[M,B]=_.useState(t?.afficherCorrection??!0),[D,P]=_.useState(t?.tentativesMax||0),[k,q]=_.useState(t?.questions||[]),[L,z]=_.useState(null),[V,ve]=_.useState(!1),[ee,H]=_.useState(null),[se,X]=_.useState(!1),we=_.useCallback(G=>{const ce=IX(G,k.length+1);q(Ie=>[...Ie,ce]),z(k.length),X(!1)},[k.length]),W=_.useCallback(G=>{confirm("Supprimer cette question ?")&&(q(ce=>ce.filter((ae,Z)=>Z!==G).map((ae,Z)=>({...ae,ordre:Z+1}))),z(null))},[]),F=_.useCallback(G=>{q(ce=>{const Ie=ce[G],ae={...JSON.parse(JSON.stringify(Ie)),id:kn("q"),ordre:ce.length+1};return[...ce,ae]})},[]),re=_.useCallback((G,ce)=>{q(Ie=>{const ae=[...Ie],Z=ce==="up"?G-1:G+1;return Z<0||Z>=ae.length?Ie:([ae[G],ae[Z]]=[ae[Z],ae[G]],ae.map((Q,me)=>({...Q,ordre:me+1})))}),z(ce==="up"?L!==null?L-1:null:L!==null?L+1:null)},[L]),de=_.useCallback((G,ce)=>{q(Ie=>Ie.map((ae,Z)=>Z===G?{...ae,...ce}:ae))},[]),ye=async()=>{if(!o.trim()){H("Le titre est obligatoire");return}if(!f){H("Slectionnez une discipline");return}if(k.length===0){H("Ajoutez au moins une question");return}for(let G=0;G<k.length;G++)if(!k[G].enonce.replace(/<[^>]*>/g,"").trim()){H(`La question ${G+1} n'a pas d'nonc`),z(G);return}H(null),ve(!0);try{const G={disciplineId:f,titre:o.trim(),description:u.trim()||void 0,questions:k,duree:g,isPremium:x,noteMinimale:j,melangerQuestions:A,melangerOptions:T,afficherCorrection:M,tentativesMax:D};let ce;t?.id?(await RX(t.id,G),ce=t.id):ce=await OX(G,n),r?.(ce)}catch(G){H(G.message||"Erreur lors de la sauvegarde")}finally{ve(!1)}},he=k.reduce((G,ce)=>G+ce.points,0);return a.jsxs("div",{className:"quiz-editor",children:[a.jsxs("div",{className:"quiz-editor__header",children:[a.jsx("h2",{children:t?" Modifier le quiz":" Nouveau quiz avanc"}),a.jsxs("div",{className:"quiz-editor__header-actions",children:[a.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",he," pts"]}),a.jsxs("span",{className:"quiz-editor__count-badge",children:[k.length," question",k.length>1?"s":""]})]})]}),ee&&a.jsxs("div",{className:"quiz-editor__error",children:[" ",ee,a.jsx("button",{onClick:()=>H(null),children:""})]}),a.jsxs("div",{className:"quiz-editor__section",children:[a.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),a.jsxs("div",{className:"quiz-editor__grid",children:[a.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[a.jsx("label",{children:"Titre du quiz *"}),a.jsx("input",{type:"text",value:o,onChange:G=>c(G.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Discipline *"}),a.jsxs("select",{value:f,onChange:G=>p(G.target.value),className:"quiz-editor__select",children:[a.jsx("option",{value:"",children:" Slectionner "}),e.map(G=>a.jsxs("option",{value:G.id,children:[G.nom," (",G.classe,")"]},G.id))]})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Dure (minutes)"}),a.jsx("input",{type:"number",value:g,onChange:G=>y(Number(G.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Note minimale (/20)"}),a.jsx("input",{type:"number",value:j,onChange:G=>E(Number(G.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Tentatives max (0 = illimit)"}),a.jsx("input",{type:"number",value:D,onChange:G=>P(Number(G.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[a.jsx("label",{children:"Description (optionnel)"}),a.jsx(Ba,{value:u,onChange:h,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),a.jsxs("div",{className:"quiz-editor__options-row",children:[a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:x,onChange:G=>N(G.target.checked)}),a.jsx("span",{children:" Premium"})]}),a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:A,onChange:G=>R(G.target.checked)}),a.jsx("span",{children:" Mlanger les questions"})]}),a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:T,onChange:G=>I(G.target.checked)}),a.jsx("span",{children:" Mlanger les options QCM"})]}),a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:M,onChange:G=>B(G.target.checked)}),a.jsx("span",{children:" Afficher la correction"})]})]})]}),a.jsxs("div",{className:"quiz-editor__section",children:[a.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),a.jsx("div",{className:"quiz-editor__questions-list",children:k.map((G,ce)=>a.jsx(qX,{question:G,index:ce,isActive:L===ce,onToggle:()=>z(L===ce?null:ce),onUpdate:Ie=>de(ce,Ie),onDelete:()=>W(ce),onDuplicate:()=>F(ce),onMoveUp:()=>re(ce,"up"),onMoveDown:()=>re(ce,"down"),isFirst:ce===0,isLast:ce===k.length-1},G.id))}),a.jsxs("div",{className:"quiz-editor__add-wrapper",children:[a.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>X(!se),children:"+ Ajouter une question"}),se&&a.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(fd).map(G=>a.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>we(G),children:[a.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:vv[G]},children:gv[G]}),a.jsx("span",{children:fd[G]})]},G))})]})]}),a.jsxs("div",{className:"quiz-editor__actions",children:[a.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:i,disabled:V,children:"Annuler"}),a.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:ye,disabled:V||k.length===0,children:V?" Sauvegarde...":t?" Mettre  jour":" Crer le quiz"})]})]})},qX=({question:t,index:e,isActive:n,onToggle:r,onUpdate:i,onDelete:o,onDuplicate:c,onMoveUp:u,onMoveDown:h,isFirst:f,isLast:p})=>{const g=vv[t.type],y=gv[t.type],x=fd[t.type],N=j=>{const E=j.replace(/<[^>]*>/g,"").trim();return E.length>80?E.substring(0,80)+"...":E||"(sans nonc)"};return a.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:g},children:[a.jsxs("div",{className:"question-editor__header",onClick:r,children:[a.jsxs("div",{className:"question-editor__header-left",children:[a.jsx("span",{className:"question-editor__number",children:e+1}),a.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:g},children:[y," ",x]}),!n&&a.jsx("span",{className:"question-editor__preview",children:N(t.enonce)})]}),a.jsxs("div",{className:"question-editor__header-right",children:[a.jsxs("span",{className:"question-editor__points",children:[t.points," pts"]}),a.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&a.jsxs("div",{className:"question-editor__body",children:[a.jsxs("div",{className:"question-editor__toolbar",children:[a.jsx("button",{type:"button",onClick:u,disabled:f,title:"Monter",children:""}),a.jsx("button",{type:"button",onClick:h,disabled:p,title:"Descendre",children:""}),a.jsx("button",{type:"button",onClick:c,title:"Dupliquer",children:""}),a.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),a.jsxs("div",{className:"question-editor__field",children:[a.jsx("label",{children:"nonc de la question *"}),a.jsx(Ba,{value:t.enonce,onChange:j=>i({enonce:j}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),a.jsxs("div",{className:"question-editor__params",children:[a.jsxs("div",{className:"question-editor__param",children:[a.jsx("label",{children:"Difficult"}),a.jsxs("select",{value:t.difficulte,onChange:j=>i({difficulte:j.target.value}),children:[a.jsx("option",{value:"facile",children:" Facile"}),a.jsx("option",{value:"moyen",children:" Moyen"}),a.jsx("option",{value:"difficile",children:" Difficile"})]})]}),a.jsxs("div",{className:"question-editor__param",children:[a.jsx("label",{children:"Points"}),a.jsx("input",{type:"number",value:t.points,onChange:j=>i({points:Number(j.target.value)}),min:1,max:20})]})]}),a.jsxs("div",{className:"question-editor__type-specific",children:[t.type==="qcm_unique"&&a.jsx(UX,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="qcm_multiple"&&a.jsx(VX,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="drag_drop"&&a.jsx(BX,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="mise_en_relation"&&a.jsx($X,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="essai"&&a.jsx(FX,{data:t.typeData,onChange:j=>i({typeData:j})})]}),a.jsxs("div",{className:"question-editor__field",children:[a.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),a.jsx(Ba,{value:t.explication||"",onChange:j=>i({explication:j}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},UX=({data:t,onChange:e})=>{const n=(o,c)=>{const u=t.options.map((h,f)=>f===o?{...h,...c}:c.isCorrect===!0?{...h,isCorrect:!1}:h);e({options:u})},r=()=>{t.options.length>=6||e({options:[...t.options,{id:kn("opt"),texte:"",isCorrect:!1}]})},i=o=>{t.options.length<=2||e({options:t.options.filter((c,u)=>u!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),t.options.map((o,c)=>a.jsxs("div",{className:"type-editor__option-row",children:[a.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>n(c,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),a.jsx("div",{className:"type-editor__option-text",children:a.jsx(Ba,{value:o.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&a.jsx("span",{className:"type-editor__correct-badge",children:""}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),t.options.length<6&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"})]})},VX=({data:t,onChange:e})=>{const n=(o,c)=>{const u=t.options.map((h,f)=>f===o?{...h,...c}:h);e({...t,options:u})},r=()=>{t.options.length>=8||e({...t,options:[...t.options,{id:kn("opt"),texte:"",isCorrect:!1}]})},i=o=>{t.options.length<=2||e({...t,options:t.options.filter((c,u)=>u!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),t.options.map((o,c)=>a.jsxs("div",{className:"type-editor__option-row",children:[a.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:u=>n(c,{isCorrect:u.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),a.jsx("div",{className:"type-editor__option-text",children:a.jsx(Ba,{value:o.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&a.jsx("span",{className:"type-editor__correct-badge",children:""}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,children:""})]},o.id)),t.options.length<8&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"}),a.jsxs("label",{className:"type-editor__sub-option",children:[a.jsx("input",{type:"checkbox",checked:t.scoringPartiel,onChange:o=>e({...t,scoringPartiel:o.target.checked})}),a.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},BX=({data:t,onChange:e})=>{const n=(o,c)=>{const u=t.items.map((h,f)=>f===o?{...h,...c}:h);e({...t,items:u})},r=()=>{t.items.length>=10||e({...t,items:[...t.items,{id:kn("item"),texte:"",ordreCorrect:t.items.length+1}]})},i=o=>{if(t.items.length<=2)return;const c=t.items.filter((u,h)=>h!==o).map((u,h)=>({...u,ordreCorrect:h+1}));e({...t,items:c})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),a.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),a.jsxs("div",{className:"type-editor__field-inline",children:[a.jsx("label",{children:"Consigne :"}),a.jsx("input",{type:"text",value:t.consigneOrdre,onChange:o=>e({...t,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),t.items.map((o,c)=>a.jsxs("div",{className:"type-editor__drag-row",children:[a.jsx("span",{className:"type-editor__drag-number",children:c+1}),a.jsx("div",{className:"type-editor__option-text",children:a.jsx(Ba,{value:o.texte,onChange:u=>n(c,{texte:u}),placeholder:`lment ${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.items.length<=2,children:""})]},o.id)),t.items.length<10&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter un lment"})]})},$X=({data:t,onChange:e})=>{const n=(o,c)=>{const u=t.paires.map((h,f)=>f===o?{...h,...c}:h);e({paires:u})},r=()=>{t.paires.length>=8||e({paires:[...t.paires,{id:kn("pair"),gauche:"",droite:""}]})},i=o=>{t.paires.length<=2||e({paires:t.paires.filter((c,u)=>u!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),a.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),a.jsxs("div",{className:"type-editor__relation-header",children:[a.jsx("span",{children:"Colonne A (gauche)"}),a.jsx("span",{}),a.jsx("span",{children:"Colonne B (droite)"}),a.jsx("span",{})]}),t.paires.map((o,c)=>a.jsxs("div",{className:"type-editor__relation-row",children:[a.jsx("div",{className:"type-editor__relation-cell",children:a.jsx(Ba,{value:o.gauche,onChange:u=>n(c,{gauche:u}),placeholder:`lment A${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),a.jsx("span",{className:"type-editor__relation-arrow",children:""}),a.jsx("div",{className:"type-editor__relation-cell",children:a.jsx(Ba,{value:o.droite,onChange:u=>n(c,{droite:u}),placeholder:`lment B${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.paires.length<=2,children:""})]},o.id)),t.paires.length<8&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une paire"})]})},FX=({data:t,onChange:e})=>{const n=()=>{e({...t,motsCles:[...t.motsCles,{mot:"",poids:1,obligatoire:!1}]})},r=(o,c)=>{const u=t.motsCles.map((h,f)=>f===o?{...h,...c}:h);e({...t,motsCles:u})},i=o=>{e({...t,motsCles:t.motsCles.filter((c,u)=>u!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),a.jsxs("div",{className:"type-editor__params-row",children:[a.jsxs("div",{className:"type-editor__param-inline",children:[a.jsx("label",{children:"Mots minimum :"}),a.jsx("input",{type:"number",value:t.nombreMotsMin||"",onChange:o=>e({...t,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),a.jsxs("div",{className:"type-editor__param-inline",children:[a.jsx("label",{children:"Mots maximum :"}),a.jsx("input",{type:"number",value:t.nombreMotsMax||"",onChange:o=>e({...t,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),a.jsxs("div",{className:"type-editor__field-inline",children:[a.jsx("label",{children:"Mode de correction :"}),a.jsxs("select",{value:t.correctionMode,onChange:o=>e({...t,correctionMode:o.target.value}),children:[a.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),a.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),a.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(t.correctionMode==="mots_cles"||t.correctionMode==="semi_auto")&&a.jsxs("div",{className:"type-editor__keywords",children:[a.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),t.motsCles.map((o,c)=>a.jsxs("div",{className:"type-editor__keyword-row",children:[a.jsx("input",{type:"text",value:o.mot,onChange:u=>r(c,{mot:u.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),a.jsxs("select",{value:o.poids,onChange:u=>r(c,{poids:Number(u.target.value)}),className:"type-editor__keyword-weight",children:[a.jsx("option",{value:1,children:"Poids 1"}),a.jsx("option",{value:2,children:"Poids 2"}),a.jsx("option",{value:3,children:"Poids 3"}),a.jsx("option",{value:4,children:"Poids 4"}),a.jsx("option",{value:5,children:"Poids 5"})]}),a.jsxs("label",{className:"type-editor__keyword-required",children:[a.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:u=>r(c,{obligatoire:u.target.checked})}),a.jsx("span",{children:"Obligatoire"})]}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),children:""})]},c)),a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),a.jsxs("div",{className:"type-editor__field-block",children:[a.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),a.jsx(Ba,{value:t.reponseModele||"",onChange:o=>e({...t,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},tP=()=>{const{quizId:t}=my(),e=Er(),{currentUser:n}=qn(),[r,i]=_.useState([]),[o,c]=_.useState(void 0),[u,h]=_.useState(!0),[f,p]=_.useState(null);return _.useEffect(()=>{(async()=>{try{h(!0);const y=await wl.getAll();if(i(y.map(x=>({id:x.id,nom:x.nom,classe:x.classe||""}))),t){const x=await bL(t);x?c(x):p("Quiz introuvable")}}catch(y){console.error("Erreur chargement donnes:",y),p(y.message||"Erreur de chargement")}finally{h(!1)}})()},[t]),u?a.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:a.jsx("p",{children:" Chargement..."})}):f?a.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[a.jsxs("p",{style:{color:"#dc2626"},children:[" ",f]}),a.jsx("button",{onClick:()=>e(-1),children:" Retour"})]}):a.jsx(LX,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:r,auteurId:n?.uid||"",onSave:g=>{alert(" Quiz sauvegard avec succs !"),e("/admin/quiz")},onCancel:()=>e(-1)})},HX=()=>{const t=Er(),{currentUser:e}=qn(),[n,r]=_.useState([]),[i,o]=_.useState(!0),[c,u]=_.useState(null),[h,f]=_.useState(null);_.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0),u(null);const j=await DX();r(j)}catch(j){console.error("Erreur chargement quiz:",j),u("Impossible de charger les quiz")}finally{o(!1)}},g=async j=>{try{await kX(j),r(E=>E.filter(A=>A.id!==j)),f(null)}catch(E){console.error("Erreur suppression:",E),alert("Erreur lors de la suppression : "+E.message)}},y=j=>{const E={};return j.questions.forEach(A=>{E[A.type]=(E[A.type]||0)+1}),Object.entries(E).map(([A,R])=>`${R} ${fd[A]||A}`).join(", ")},x=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",N=j=>j.questions.reduce((E,A)=>E+A.points,0);return a.jsxs("div",{style:{padding:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),a.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),a.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),c&&a.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",c,a.jsx("button",{onClick:p,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),i&&a.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!i&&n.length===0&&!c&&a.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),a.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),a.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),a.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!i&&n.length>0&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(j=>a.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:j.titre}),j.isPremium&&a.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[a.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.questions.length," question",j.questions.length!==1?"s":""]}),a.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N(j)," pts"]}),a.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.duree," min"]})]}),a.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",y(j)]}),a.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",x(j.createdAt)]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>t(`/quiz-avance/${j.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),a.jsx("button",{onClick:()=>t(`/admin/quiz/modifier/${j.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),a.jsx("button",{onClick:()=>{const E=`${window.location.origin}/quiz-avance/${j.id}`;navigator.clipboard.writeText(E).then(()=>{alert(` Lien copi !

`+E+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),h===j.id?a.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[a.jsx("button",{onClick:()=>g(j.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),a.jsx("button",{onClick:()=>f(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):a.jsx("button",{onClick:()=>f(j.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},j.id))})]})},GX=({quiz:t,userId:e,onComplete:n,onQuit:r})=>{const i=_.useMemo(()=>{let P=[...t.questions];return t.melangerQuestions&&(P=P.sort(()=>Math.random()-.5)),P},[t]),[o,c]=_.useState(0),[u,h]=_.useState(new Map),[f,p]=_.useState(t.duree*60),[g,y]=_.useState(!1),[x,N]=_.useState(null),[j,E]=_.useState(!1),A=_.useRef(Date.now());_.useEffect(()=>{if(x)return;const P=setInterval(()=>{p(k=>k<=1?(clearInterval(P),B(),0):k-1)},1e3);return()=>clearInterval(P)},[x]);const R=P=>{const k=Math.floor(P/60),q=P%60;return`${k.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},T=i[o],I=_.useCallback((P,k)=>{h(q=>{const L=new Map(q),z=L.get(P)||{questionId:P,type:T.type};return L.set(P,{...z,...k}),L})},[T]),M=P=>{P>=0&&P<i.length&&c(P)},B=async()=>{E(!1),y(!0);try{const P=Array.from(u.values()),k=Math.round((Date.now()-A.current)/1e3),q=await zX(t,e,P,k);N(q),n?.(q)}catch(P){alert("Erreur lors de la soumission : "+P.message)}finally{y(!1)}},D=u.size;return x?a.jsx("div",{className:"quiz-player quiz-player--results",children:a.jsxs("div",{className:"quiz-results",children:[a.jsxs("div",{className:`quiz-results__header ${x.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[a.jsx("div",{className:"quiz-results__emoji",children:x.reussi?"":""}),a.jsx("h2",{children:x.reussi?"Flicitations !":"Quiz termin"}),a.jsxs("div",{className:"quiz-results__score",children:[a.jsxs("span",{className:"quiz-results__note",children:[x.note20,"/20"]}),a.jsxs("span",{className:"quiz-results__detail",children:[x.score,"/",x.scoreMax," points"]})]}),a.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",R(x.tempsEcoule)]}),x.correctionManuelle&&a.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),t.afficherCorrection&&a.jsxs("div",{className:"quiz-results__details",children:[a.jsx("h3",{children:" Dtail des rponses"}),i.map((P,k)=>{const q=x.detailsParQuestion.find(L=>L.questionId===P.id);return a.jsxs("div",{className:`quiz-results__question ${q?.isCorrect?"quiz-results__question--correct":q?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[a.jsxs("div",{className:"quiz-results__q-header",children:[a.jsxs("span",{children:["Q",k+1," "," ",a.jsxs("span",{style:{color:vv[P.type]},children:[gv[P.type]," ",fd[P.type]]})]}),a.jsxs("span",{className:"quiz-results__q-score",children:[q?.pointsObtenus||0,"/",q?.pointsMax||P.points," pts",q?.isCorrect&&" ",q?.isPartiel&&" ",!q?.isCorrect&&!q?.isPartiel&&" "]})]}),a.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:P.enonce}}),P.explication&&a.jsxs("div",{className:"quiz-results__q-explanation",children:[a.jsx("strong",{children:" Explication :"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:P.explication}})]})]},P.id)})]}),a.jsx("div",{className:"quiz-results__actions",children:a.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:r,children:"Retour au tableau de bord"})})]})}):a.jsxs("div",{className:"quiz-player",children:[a.jsxs("div",{className:"quiz-player__topbar",children:[a.jsxs("div",{className:"quiz-player__info",children:[a.jsx("span",{className:"quiz-player__title",children:t.titre}),a.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",i.length]})]}),a.jsxs("div",{className:"quiz-player__topbar-right",children:[a.jsxs("span",{className:`quiz-player__timer ${f<60?"quiz-player__timer--danger":f<300?"quiz-player__timer--warning":""}`,children:[" ",R(f)]}),a.jsxs("span",{className:"quiz-player__answered",children:[D,"/",i.length," rpondue",D>1?"s":""]})]})]}),a.jsx("div",{className:"quiz-player__progress-bar",children:a.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/i.length*100}%`}})}),a.jsxs("div",{className:"quiz-player__question-area",children:[a.jsxs("div",{className:"quiz-player__question-meta",children:[a.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:vv[T.type]},children:[gv[T.type]," ",fd[T.type]]}),a.jsxs("span",{className:"quiz-player__points",children:[T.points," point",T.points>1?"s":""]})]}),a.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:T.enonce}}),a.jsxs("div",{className:"quiz-player__answer-area",children:[T.type==="qcm_unique"&&a.jsx(KX,{question:T,reponse:u.get(T.id),onUpdate:P=>I(T.id,P),melangerOptions:t.melangerOptions}),T.type==="qcm_multiple"&&a.jsx(QX,{question:T,reponse:u.get(T.id),onUpdate:P=>I(T.id,P),melangerOptions:t.melangerOptions}),T.type==="drag_drop"&&a.jsx(WX,{question:T,reponse:u.get(T.id),onUpdate:P=>I(T.id,P)}),T.type==="mise_en_relation"&&a.jsx(YX,{question:T,reponse:u.get(T.id),onUpdate:P=>I(T.id,P)}),T.type==="essai"&&a.jsx(XX,{question:T,reponse:u.get(T.id),onUpdate:P=>I(T.id,P)})]})]}),a.jsxs("div",{className:"quiz-player__nav",children:[a.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>M(o-1),disabled:o===0,children:" Prcdent"}),a.jsx("div",{className:"quiz-player__pagination",children:i.map((P,k)=>a.jsx("button",{className:`quiz-player__page-dot ${k===o?"quiz-player__page-dot--current":""} ${u.has(P.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>M(k),title:`Question ${k+1}`,children:k+1},P.id))}),o<i.length-1?a.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>M(o+1),children:"Suivant "}):a.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>E(!0),disabled:g,children:g?" Envoi...":" Soumettre le quiz"})]}),j&&a.jsx("div",{className:"quiz-player__modal-overlay",children:a.jsxs("div",{className:"quiz-player__modal",children:[a.jsx("h3",{children:"Soumettre le quiz ?"}),a.jsxs("p",{children:["Vous avez rpondu  ",a.jsx("strong",{children:D})," question",D>1?"s":""," sur"," ",a.jsx("strong",{children:i.length}),"."]}),D<i.length&&a.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",i.length-D," question",i.length-D>1?"s":""," sans rponse !"]}),a.jsxs("div",{className:"quiz-player__modal-actions",children:[a.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>E(!1),children:"Continuer le quiz"}),a.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:B,children:"Confirmer la soumission"})]})]})})]})},KX=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,o=_.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]);return a.jsx("div",{className:"player-qcm",children:o.map(c=>a.jsxs("label",{className:`player-qcm__option ${e?.selectedOptionId===c.id?"player-qcm__option--selected":""}`,children:[a.jsx("input",{type:"radio",name:`q_${t.id}`,checked:e?.selectedOptionId===c.id,onChange:()=>n({selectedOptionId:c.id})}),a.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:c.texte}})]},c.id))})},QX=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,o=_.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]),c=e?.selectedOptionIds||[],u=h=>{const f=c.includes(h)?c.filter(p=>p!==h):[...c,h];n({selectedOptionIds:f})};return a.jsxs("div",{className:"player-qcm",children:[a.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(h=>a.jsxs("label",{className:`player-qcm__option ${c.includes(h.id)?"player-qcm__option--selected":""}`,children:[a.jsx("input",{type:"checkbox",checked:c.includes(h.id),onChange:()=>u(h.id)}),a.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:h.texte}})]},h.id))]})},WX=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,o]=_.useState(()=>e?.ordrePropose?e.ordrePropose.map(y=>r.items.find(x=>x.id===y)).filter(Boolean):[...r.items].sort(()=>Math.random()-.5)),[c,u]=_.useState(null);_.useEffect(()=>{n({ordrePropose:i.map(y=>y.id)})},[i]);const h=y=>{u(y)},f=(y,x)=>{if(y.preventDefault(),c===null||c===x)return;const N=[...i],[j]=N.splice(c,1);N.splice(x,0,j),o(N),u(x)},p=()=>{u(null)},g=(y,x)=>{const N=x==="up"?y-1:y+1;if(N<0||N>=i.length)return;const j=[...i];[j[y],j[N]]=[j[N],j[y]],o(j)};return a.jsxs("div",{className:"player-dragdrop",children:[a.jsx("p",{className:"player-dragdrop__consigne",children:r.consigneOrdre}),a.jsx("div",{className:"player-dragdrop__list",children:i.map((y,x)=>a.jsxs("div",{className:`player-dragdrop__item ${c===x?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>h(x),onDragOver:N=>f(N,x),onDragEnd:p,children:[a.jsx("span",{className:"player-dragdrop__handle",children:""}),a.jsx("span",{className:"player-dragdrop__number",children:x+1}),a.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:y.texte}}),a.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[a.jsx("button",{type:"button",onClick:()=>g(x,"up"),disabled:x===0,children:""}),a.jsx("button",{type:"button",onClick:()=>g(x,"down"),disabled:x===i.length-1,children:""})]})]},y.id))})]})},YX=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,i=_.useMemo(()=>[...r.paires].sort(()=>Math.random()-.5),[r.paires]),[o,c]=_.useState(e?.relationsProposees||{}),[u,h]=_.useState(null);_.useEffect(()=>{n({relationsProposees:o})},[o]);const f=x=>{h(x)},p=x=>{u&&(c(N=>({...N,[u]:x})),h(null))},g=x=>{c(N=>{const j={...N};return delete j[x],j})},y=new Set(Object.values(o));return a.jsxs("div",{className:"player-relation",children:[a.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),a.jsxs("div",{className:"player-relation__columns",children:[a.jsxs("div",{className:"player-relation__col",children:[a.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),r.paires.map(x=>a.jsxs("div",{className:`player-relation__item player-relation__item--left ${u===x.id?"player-relation__item--selected":""} ${o[x.id]?"player-relation__item--matched":""}`,onClick:()=>{o[x.id]?g(x.id):f(x.id)},children:[a.jsx("div",{dangerouslySetInnerHTML:{__html:x.gauche}}),o[x.id]&&a.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]}),a.jsxs("div",{className:"player-relation__col",children:[a.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),i.map(x=>a.jsxs("div",{className:`player-relation__item player-relation__item--right ${y.has(x.id)?"player-relation__item--matched":""} ${u&&!y.has(x.id)?"player-relation__item--clickable":""}`,onClick:()=>{u&&!y.has(x.id)&&p(x.id)},children:[a.jsx("div",{dangerouslySetInnerHTML:{__html:x.droite}}),y.has(x.id)&&a.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]})]})]})},XX=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,o]=_.useState(e?.texteReponse||""),c=i.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return _.useEffect(()=>{n({texteReponse:i})},[i]),a.jsxs("div",{className:"player-essai",children:[a.jsxs("div",{className:"player-essai__info",children:[r.nombreMotsMin&&a.jsxs("span",{className:c<r.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",r.nombreMotsMin," mots"]}),r.nombreMotsMax&&a.jsxs("span",{className:c>r.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",r.nombreMotsMax," mots"]}),a.jsxs("span",{className:"player-essai__count",children:[c," mot",c>1?"s":""]})]}),a.jsx("textarea",{className:"player-essai__textarea",value:i,onChange:u=>o(u.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},JX=()=>{const{quizId:t}=my(),e=Er(),{currentUser:n}=qn(),[r,i]=_.useState(null),[o,c]=_.useState(!0),[u,h]=_.useState(null);return _.useEffect(()=>{(async()=>{if(!t){h("ID du quiz manquant"),c(!1);return}try{const p=await bL(t);if(!p){h("Quiz introuvable");return}if(p.isPremium&&!n?.isPremium){h("Ce quiz est rserv aux abonns Premium");return}i(p)}catch(p){console.error("Erreur chargement quiz:",p),h(p.message||"Impossible de charger le quiz")}finally{c(!1)}})()},[t,n]),o?a.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),a.jsx("p",{children:"Chargement du quiz..."})]}):u?a.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:a.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),a.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:u}),u.includes("Premium")&&a.jsx("button",{onClick:()=>e("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),a.jsx("button",{onClick:()=>e(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):r?a.jsx(GX,{quiz:r,userId:n?.uid||"",onComplete:f=>{console.log(" Quiz termin  Note:",f.note20,"/20")},onQuit:()=>e("/dashboard")}):a.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[a.jsx("p",{children:"Quiz introuvable"}),a.jsx("button",{onClick:()=>e(-1),children:" Retour"})]})},xL=Ge(Se,"quiz_results"),MN=Ge(Se,"progressions"),ZX=async t=>{try{const e=await ei(xL,{...t,datePassage:Xe.now()});return t.reussi&&await sJ(t.userId,t.disciplineId,t.disciplineNom,t.quizId),e.id}catch(e){throw console.error("Erreur lors de la sauvegarde du rsultat :",e),e}},Uy=async(t,e)=>{try{let n=yt(xL,at("userId","==",t),Nn("datePassage","desc"));return e&&(n=yt(n,Js(e))),(await lt(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Erreur rcupration historique :",n),n}},eJ=async t=>{try{const e=await Uy(t);if(e.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=e.reduce((p,g)=>p+g.pourcentage,0),r=Math.round(n/e.length),i=Math.max(...e.map(p=>p.pourcentage)),o=e.reduce((p,g)=>p+(g.tempsEcoule||0),0),c=e.filter(p=>p.reussi).length;let u=0,h=0;for(const p of e)p.reussi?(u++,h=Math.max(h,u)):u=0;let f=0;for(const p of e)if(p.reussi)f++;else break;return{totalQuizPasses:e.length,totalQuizReussis:c,moyenneGenerale:r,tempsTotal:o,meilleurScore:i,serieReussites:f,meilleureSerieReussites:Math.max(h,f)}}catch(e){return console.error("Erreur calcul stats :",e),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},tJ=async t=>{try{const e=await Uy(t);if(e.length===0)return[];const n={};for(const r of e){const i=r.disciplineId;n[i]||(n[i]=[]),n[i].push(r)}return Object.entries(n).map(([r,i])=>{const o=Math.round(i.reduce((g,y)=>g+y.pourcentage,0)/i.length),c=Math.max(...i.map(g=>g.pourcentage)),u=i[0].pourcentage,h=i.filter(g=>g.reussi).length,f=i.reduce((g,y)=>g+(y.tempsEcoule||0),0);let p="stable";if(i.length>=4){const g=i.slice(0,3),y=i.slice(3,6),x=g.reduce((j,E)=>j+E.pourcentage,0)/g.length,N=y.reduce((j,E)=>j+E.pourcentage,0)/y.length;x-N>5?p="up":N-x>5&&(p="down")}return{disciplineId:r,disciplineNom:i[0].disciplineNom||r,nombreQuiz:i.length,moyenne:o,meilleurScore:c,dernierScore:u,quizReussis:h,tempsTotal:f,tendance:p}})}catch(e){return console.error("Erreur progression par discipline :",e),[]}},nJ=async(t,e)=>{try{return(await Uy(t,e||20)).reverse().map(r=>({date:(r.datePassage?.toDate?r.datePassage.toDate():new Date(r.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:r.pourcentage,discipline:r.disciplineNom||r.disciplineId}))}catch(n){return console.error("Erreur donnes temporelles :",n),[]}},rJ=async(t,e,n)=>{const r=`${t}_${e}`,i=He(MN,r),o=await Nr(i);if(o.exists())return{...o.data()};const[c,u]=await Promise.all([nP("ressources",e),nP("quizzes",e)]),h={userId:t,disciplineId:e,disciplineNom:n,ressourcesVues:[],quizReussis:[],totalRessources:c,totalQuiz:u,pourcentage:0,dernierAcces:Xe.now(),createdAt:Xe.now(),updatedAt:Xe.now()};return await Ly(i,h),h},nP=async(t,e)=>{try{const n=yt(Ge(Se,t),at("disciplineId","==",e));return(await lt(n)).size}catch{return 0}},iJ=t=>{if(t.totalRessources+t.totalQuiz===0)return 0;const n=t.totalRessources>0?t.ressourcesVues.length/t.totalRessources*40:0,r=t.totalQuiz>0?t.quizReussis.length/t.totalQuiz*60:0;return t.totalRessources===0?Math.min(100,Math.round(t.quizReussis.length/t.totalQuiz*100)):t.totalQuiz===0?Math.min(100,Math.round(t.ressourcesVues.length/t.totalRessources*100)):Math.min(100,Math.round(n+r))},sJ=async(t,e,n,r)=>{try{const i=`${t}_${e}`,o=He(MN,i),c=await rJ(t,e,n);if(c.quizReussis.includes(r))return await sn(o,{dernierAcces:Xe.now()}),c;const u=[...c.quizReussis,r],h={...c,quizReussis:u,dernierAcces:Xe.now(),updatedAt:Xe.now(),pourcentage:0};return h.pourcentage=iJ(h),await Ly(o,h),h}catch(i){throw console.error("Erreur enregistrement quiz russi :",i),i}},aJ=async t=>{try{const e=yt(MN,at("userId","==",t));return(await lt(e)).docs.map(r=>r.data())}catch(e){return console.error("Erreur rcupration progressions :",e),[]}},oJ=async t=>{try{const e=await aJ(t),n=await _L(t),r=e.reduce((u,h)=>u+h.ressourcesVues.length,0),i=e.reduce((u,h)=>u+h.quizReussis.length,0),o=e.length>0?Math.round(e.reduce((u,h)=>u+h.pourcentage,0)/e.length):0,c=e.filter(u=>u.pourcentage>=100).length;return{totalRessourcesVues:r,totalQuizReussis:i,pourcentageMoyen:o,disciplinesCommencees:e.length,disciplinesCompletees:c,streakActuel:n.streakActuel,meilleurStreak:n.meilleurStreak,parDiscipline:e}}catch(e){return console.error("Erreur progression globale :",e),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},lJ=()=>new Date().toISOString().split("T")[0],cJ=()=>{const t=new Date;return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]},_L=async t=>{try{const e=He(Se,"users",t),n=await Nr(e);if(!n.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const r=n.data();return{streakActuel:r.streakActuel||0,meilleurStreak:r.meilleurStreak||0,dernierJourAcces:r.dernierJourAcces||""}}catch(e){return console.error("Erreur rcupration streak :",e),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},uJ=async t=>{try{const e=He(Se,"users",t),n=await _L(t),r=lJ();if(n.dernierJourAcces===r)return n;const i=cJ();let o;n.dernierJourAcces===i?o=n.streakActuel+1:o=1;const c=Math.max(n.meilleurStreak,o);return await sn(e,{streakActuel:o,meilleurStreak:c,dernierJourAcces:r}),{streakActuel:o,meilleurStreak:c,dernierJourAcces:r}}catch(e){return console.error("Erreur mise  jour streak :",e),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},dJ=(t,e,n)=>{const r=n?.totalRessourcesVues||0;n?.totalQuizReussis;const i=n?.disciplinesCompletees||0;n?.streakActuel;const o=n?.meilleurStreak||0,c=n?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:r>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:r>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:r>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:r>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:t.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:t.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:t.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:t.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:t.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:t.moyenneGenerale>=80&&t.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:t.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:t.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:i>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:c>=3||e.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:c>=5||e.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:r>=50&&t.totalQuizReussis>=20}]},jL=t=>{if(t<60)return`${t} s`;const e=Math.floor(t/60),n=t%60;return n>0?`${e} min ${n.toString().padStart(2,"0")} s`:`${e} min`},Hu=t=>t>=80?"#10b981":t>=60?"#3b82f6":t>=40?"#f59e0b":"#ef4444",wL=t=>t>=80?"Excellent":t>=60?"Bien":t>=40?"Passable":" amliorer",hJ=()=>{const{quizId:t}=my(),e=Er(),{currentUser:n}=qn(),[r,i]=_.useState(null),[o,c]=_.useState(""),[u,h]=_.useState(!0),[f,p]=_.useState(null),[g,y]=_.useState("intro"),[x,N]=_.useState(0),[j,E]=_.useState({}),[A,R]=_.useState(0),[T,I]=_.useState(0),M=_.useRef(null),[B,D]=_.useState(0),[P,k]=_.useState(0),[q,L]=_.useState(0),[z,V]=_.useState(!1),[ve,ee]=_.useState(!1);_.useEffect(()=>{(async()=>{if(!t){p("ID du quiz manquant."),h(!1);return}try{const G=await dX(t);if(!G){p("Quiz introuvable."),h(!1);return}i(G),R(G.duree*60);try{const Ie=(await wl.getAll()).find(ae=>ae.id===G.disciplineId);c(Ie?.nom||G.disciplineId)}catch{c(G.disciplineId)}}catch(G){p("Erreur lors du chargement du quiz."),console.error(G)}finally{h(!1)}})()},[t]),_.useEffect(()=>{if(g==="playing")return M.current=setInterval(()=>{R(he=>he<=1?(clearInterval(M.current),we(),0):he-1),I(he=>he+1)},1e3),()=>{M.current&&clearInterval(M.current)}},[g]);const H=()=>{y("playing"),N(0),E({}),I(0),r&&R(r.duree*60)},se=(he,G)=>{E(ce=>({...ce,[he]:G}))},X=he=>{r&&he>=0&&he<r.questions.length&&N(he)},we=_.useCallback(async()=>{if(!r||!n||g==="review")return;M.current&&clearInterval(M.current);let he=0,G=0,ce=0;r.questions.forEach(Z=>{const Q=Z.points||1;G+=Q,j[Z.id]===Z.reponseCorrecte&&(he+=Q,ce++)});const Ie=G>0?Math.round(he/G*100):0,ae=Ie>=(r.noteMinimale||50);D(he),k(G),L(ce),y("review"),V(!0);try{const Z={quizId:r.id,quizTitre:r.titre,disciplineId:r.disciplineId,disciplineNom:o,userId:n.uid,reponses:r.questions.map(Q=>j[Q.id]??-1),tempsEcoule:T,score:he,totalPoints:G,pourcentage:Ie,reussi:ae,nombreQuestions:r.questions.length,bonnesReponses:ce};await ZX(Z),ee(!0)}catch(Z){console.error("Erreur lors de la sauvegarde :",Z)}finally{V(!1)}},[r,n,j,T,o,g]),W=he=>{const G=Math.floor(he/60),ce=he%60;return`${G.toString().padStart(2,"0")}:${ce.toString().padStart(2,"0")}`},F=()=>{if(!r)return"";const he=r.duree*60,G=A/he;return G<=.1?"timer-critical":G<=.25?"timer-warning":""},re=Object.keys(j).length;if(u)return a.jsxs("div",{className:"quiz-player-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement du quiz..."})]});if(f||!r)return a.jsxs("div",{className:"quiz-player-error",children:[a.jsx(pv,{size:48}),a.jsx("h3",{children:f||"Quiz introuvable"}),a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[a.jsx(yj,{size:18})," Retour au tableau de bord"]})]});if(r.isPremium&&!n?.isPremium)return a.jsx("div",{className:"quiz-player-locked",children:a.jsxs("div",{className:"qp-locked-card",children:[a.jsx(bj,{size:48}),a.jsx("h3",{children:"Quiz Premium"}),a.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),a.jsxs("p",{className:"qp-locked-price",children:[" partir de ",a.jsx("strong",{children:"2 000 FCFA/mois"})]}),a.jsxs("div",{className:"qp-locked-actions",children:[a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/premium"),children:[a.jsx(gi,{size:18})," Devenir Premium"]}),a.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>e("/eleve/dashboard"),children:[a.jsx(Xx,{size:18})," Retour"]})]})]})});if(g==="intro")return a.jsx("div",{className:"quiz-player-intro",children:a.jsxs("div",{className:"qp-intro-card",children:[a.jsxs("div",{className:"qp-intro-header",children:[a.jsxs("button",{className:"qp-back-btn",onClick:()=>e(-1),children:[a.jsx(Xx,{size:20})," Retour"]}),r.isPremium&&a.jsxs("span",{className:"qp-badge qp-badge-premium",children:[a.jsx(gi,{size:12})," Premium"]})]}),a.jsxs("div",{className:"qp-intro-content",children:[a.jsx("h1",{className:"qp-intro-title",children:r.titre}),a.jsx("span",{className:"qp-intro-discipline",children:o}),a.jsxs("div",{className:"qp-intro-stats",children:[a.jsxs("div",{className:"qp-intro-stat",children:[a.jsx(us,{size:20}),a.jsxs("div",{children:[a.jsx("span",{className:"qp-intro-stat-value",children:r.questions.length}),a.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),a.jsxs("div",{className:"qp-intro-stat",children:[a.jsx(dd,{size:20}),a.jsxs("div",{children:[a.jsxs("span",{className:"qp-intro-stat-value",children:[r.duree," min"]}),a.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),a.jsxs("div",{className:"qp-intro-stat",children:[a.jsx(pl,{size:20}),a.jsxs("div",{children:[a.jsxs("span",{className:"qp-intro-stat-value",children:[r.noteMinimale||50,"%"]}),a.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),a.jsxs("div",{className:"qp-intro-instructions",children:[a.jsx("h3",{children:"Instructions"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),a.jsx("li",{children:"Chaque question a une seule bonne rponse"}),a.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),a.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),a.jsxs("li",{children:["Il faut obtenir au moins ",r.noteMinimale||50,"% pour russir"]})]})]})]}),a.jsxs("button",{className:"qp-btn qp-btn-start",onClick:H,children:[a.jsx(yf,{size:20})," Commencer le quiz"]})]})});if(g==="playing"){const he=r.questions[x];return a.jsxs("div",{className:"quiz-player-game",children:[a.jsxs("div",{className:"qp-game-header",children:[a.jsxs("div",{className:"qp-game-info",children:[a.jsx("span",{className:"qp-game-title",children:r.titre}),a.jsx("span",{className:"qp-game-discipline",children:o})]}),a.jsxs("div",{className:`qp-timer ${F()}`,children:[a.jsx(CY,{size:18}),a.jsx("span",{children:W(A)})]})]}),a.jsx("div",{className:"qp-progress-bar",children:a.jsx("div",{className:"qp-progress-fill",style:{width:`${(x+1)/r.questions.length*100}%`}})}),a.jsxs("div",{className:"qp-game-content",children:[a.jsxs("div",{className:"qp-question-header",children:[a.jsxs("span",{className:"qp-question-number",children:["Question ",x+1,"/",r.questions.length]}),a.jsxs("span",{className:"qp-question-points",children:[he.points||1," pt(s)"]})]}),a.jsx("h2",{className:"qp-question-text",children:he.question}),a.jsx("div",{className:"qp-options-list",children:he.options.map((G,ce)=>a.jsxs("button",{className:`qp-option ${j[he.id]===ce?"selected":""}`,onClick:()=>se(he.id,ce),children:[a.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+ce)}),a.jsx("span",{className:"qp-option-text",children:G}),j[he.id]===ce&&a.jsx(fn,{size:18,className:"qp-option-check"})]},ce))})]}),a.jsxs("div",{className:"qp-game-footer",children:[a.jsx("div",{className:"qp-question-indicators",children:r.questions.map((G,ce)=>a.jsx("button",{className:`qp-indicator ${ce===x?"active":""} ${j[G.id]!==void 0?"answered":""}`,onClick:()=>X(ce),children:ce+1},G.id))}),a.jsxs("div",{className:"qp-nav-buttons",children:[a.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>X(x-1),disabled:x===0,children:[a.jsx(Xx,{size:16})," Prcdent"]}),x<r.questions.length-1?a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>X(x+1),children:["Suivant ",a.jsx(nc,{size:16})]}):a.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:we,disabled:re<r.questions.length,children:[a.jsx(fn,{size:16}),"Soumettre (",re,"/",r.questions.length,")"]})]})]})]})}const de=P>0?Math.round(B/P*100):0,ye=de>=(r.noteMinimale||50);return a.jsxs("div",{className:"quiz-player-review",children:[a.jsxs("div",{className:`qp-score-card ${ye?"success":"fail"}`,children:[a.jsx("div",{className:"qp-score-icon",children:ye?a.jsx(pl,{size:48}):a.jsx(pv,{size:48})}),a.jsx("h2",{className:"qp-score-title",children:ye?"Flicitations ! ":"Continuez vos efforts ! "}),a.jsxs("div",{className:"qp-score-circle",style:{borderColor:Hu(de)},children:[a.jsxs("span",{className:"qp-score-value",children:[de,"%"]}),a.jsx("span",{className:"qp-score-label",children:wL(de)})]}),a.jsxs("div",{className:"qp-score-details",children:[a.jsxs("div",{className:"qp-score-detail",children:[a.jsxs("span",{children:[q,"/",r.questions.length]}),a.jsx("small",{children:"Bonnes rponses"})]}),a.jsxs("div",{className:"qp-score-detail",children:[a.jsxs("span",{children:[B,"/",P]}),a.jsx("small",{children:"Points"})]}),a.jsxs("div",{className:"qp-score-detail",children:[a.jsx("span",{children:jL(T)}),a.jsx("small",{children:"Temps"})]})]}),z&&a.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),ve&&a.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),a.jsxs("div",{className:"qp-review-actions",children:[a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[a.jsx(yj,{size:18})," Tableau de bord"]}),a.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:H,children:[a.jsx(vY,{size:18})," Recommencer"]})]}),a.jsxs("div",{className:"qp-review-questions",children:[a.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),r.questions.map((he,G)=>{const ce=j[he.id],Ie=ce===he.reponseCorrecte;return a.jsxs("div",{className:`qp-review-question ${Ie?"correct":"incorrect"}`,children:[a.jsxs("div",{className:"qp-review-question-header",children:[a.jsxs("span",{className:"qp-review-q-number",children:["Q",G+1]}),Ie?a.jsxs("span",{className:"qp-review-badge correct",children:[a.jsx(fn,{size:14})," Correct"]}):a.jsxs("span",{className:"qp-review-badge incorrect",children:[a.jsx(vj,{size:14})," Incorrect"]}),a.jsxs("span",{className:"qp-review-q-points",children:[Ie?he.points||1:0,"/",he.points||1," pt(s)"]})]}),a.jsx("p",{className:"qp-review-q-text",children:he.question}),a.jsx("div",{className:"qp-review-options",children:he.options.map((ae,Z)=>{let Q="qp-review-option";return Z===he.reponseCorrecte&&(Q+=" correct-answer"),Z===ce&&!Ie&&(Q+=" wrong-answer"),a.jsxs("div",{className:Q,children:[a.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+Z)}),a.jsx("span",{children:ae}),Z===he.reponseCorrecte&&a.jsx(fn,{size:14,className:"qp-review-check"}),Z===ce&&!Ie&&a.jsx(vj,{size:14,className:"qp-review-x"})]},Z)})}),he.explication&&a.jsxs("div",{className:"qp-review-explication",children:[a.jsx("strong",{children:" Explication :"})," ",he.explication]})]},he.id)})]})]})};function NL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=NL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=NL(t))&&(r&&(r+=" "),r+=e);return r}var fJ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function zN(t){if(typeof t!="string")return!1;var e=fJ;return e.includes(t)}var mJ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],pJ=new Set(mJ);function EL(t){return typeof t!="string"?!1:pJ.has(t)}function SL(t){return typeof t=="string"&&t.startsWith("data-")}function ms(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(EL(n)||SL(n))&&(e[n]=t[n]);return e}function fm(t){if(t==null)return null;if(_.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return ms(e)}return typeof t=="object"&&!Array.isArray(t)?ms(t):null}function kr(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(EL(n)||SL(n)||zN(n))&&(e[n]=t[n]);return e}function gJ(t){return t==null?null:_.isValidElement(t)?kr(t.props):typeof t=="object"&&!Array.isArray(t)?kr(t):null}var vJ=["children","width","height","viewBox","className","style","title","desc"];function xj(){return xj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xj.apply(null,arguments)}function yJ(t,e){if(t==null)return{};var n,r,i=bJ(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var AL=_.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:c,style:u,title:h,desc:f}=t,p=yJ(t,vJ),g=o||{width:r,height:i,x:0,y:0},y=Ut("recharts-surface",c);return _.createElement("svg",xj({},kr(p),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),_.createElement("title",null,h),_.createElement("desc",null,f),n)}),xJ=["children","className"];function _j(){return _j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_j.apply(null,arguments)}function _J(t,e){if(t==null)return{};var n,r,i=jJ(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ui=_.forwardRef((t,e)=>{var{children:n,className:r}=t,i=_J(t,xJ),o=Ut("recharts-layer",r);return _.createElement("g",_j({className:o},kr(i),{ref:e}),n)}),wJ=_.createContext(null);function Gt(t){return function(){return t}}const TL=Math.cos,yv=Math.sin,vs=Math.sqrt,bv=Math.PI,Vy=2*bv,jj=Math.PI,wj=2*jj,rc=1e-6,NJ=wj-rc;function CL(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function EJ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return CL;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class SJ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?CL:EJ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,c){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+c}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let c=this._x1,u=this._y1,h=r-e,f=i-n,p=c-e,g=u-n,y=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>rc)if(!(Math.abs(g*h-f*p)>rc)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let x=r-c,N=i-u,j=h*h+f*f,E=x*x+N*N,A=Math.sqrt(j),R=Math.sqrt(y),T=o*Math.tan((jj-Math.acos((j+y-E)/(2*A*R)))/2),I=T/R,M=T/A;Math.abs(I-1)>rc&&this._append`L${e+I*p},${n+I*g}`,this._append`A${o},${o},0,0,${+(g*x>p*N)},${this._x1=e+M*h},${this._y1=n+M*f}`}}arc(e,n,r,i,o,c){if(e=+e,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),h=r*Math.sin(i),f=e+u,p=n+h,g=1^c,y=c?i-o:o-i;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>rc||Math.abs(this._y1-p)>rc)&&this._append`L${f},${p}`,r&&(y<0&&(y=y%wj+wj),y>NJ?this._append`A${r},${r},0,1,${g},${e-u},${n-h}A${r},${r},0,1,${g},${this._x1=f},${this._y1=p}`:y>rc&&this._append`A${r},${r},0,${+(y>=jj)},${g},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function LN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new SJ(e)}function qN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function IL(t){this._context=t}IL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function By(t){return new IL(t)}function PL(t){return t[0]}function OL(t){return t[1]}function RL(t,e){var n=Gt(!0),r=null,i=By,o=null,c=LN(u);t=typeof t=="function"?t:t===void 0?PL:Gt(t),e=typeof e=="function"?e:e===void 0?OL:Gt(e);function u(h){var f,p=(h=qN(h)).length,g,y=!1,x;for(r==null&&(o=i(x=c())),f=0;f<=p;++f)!(f<p&&n(g=h[f],f,h))===y&&((y=!y)?o.lineStart():o.lineEnd()),y&&o.point(+t(g,f,h),+e(g,f,h));if(x)return o=null,x+""||null}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Gt(+h),u):t},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Gt(+h),u):e},u.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Gt(!!h),u):n},u.curve=function(h){return arguments.length?(i=h,r!=null&&(o=i(r)),u):i},u.context=function(h){return arguments.length?(h==null?r=o=null:o=i(r=h),u):r},u}function dg(t,e,n){var r=null,i=Gt(!0),o=null,c=By,u=null,h=LN(f);t=typeof t=="function"?t:t===void 0?PL:Gt(+t),e=typeof e=="function"?e:Gt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?OL:Gt(+n);function f(g){var y,x,N,j=(g=qN(g)).length,E,A=!1,R,T=new Array(j),I=new Array(j);for(o==null&&(u=c(R=h())),y=0;y<=j;++y){if(!(y<j&&i(E=g[y],y,g))===A)if(A=!A)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),N=y-1;N>=x;--N)u.point(T[N],I[N]);u.lineEnd(),u.areaEnd()}A&&(T[y]=+t(E,y,g),I[y]=+e(E,y,g),u.point(r?+r(E,y,g):T[y],n?+n(E,y,g):I[y]))}if(R)return u=null,R+""||null}function p(){return RL().defined(i).curve(c).context(o)}return f.x=function(g){return arguments.length?(t=typeof g=="function"?g:Gt(+g),r=null,f):t},f.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Gt(+g),f):t},f.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Gt(+g),f):r},f.y=function(g){return arguments.length?(e=typeof g=="function"?g:Gt(+g),n=null,f):e},f.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Gt(+g),f):e},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Gt(+g),f):n},f.lineX0=f.lineY0=function(){return p().x(t).y(e)},f.lineY1=function(){return p().x(t).y(n)},f.lineX1=function(){return p().x(r).y(e)},f.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Gt(!!g),f):i},f.curve=function(g){return arguments.length?(c=g,o!=null&&(u=c(o)),f):c},f.context=function(g){return arguments.length?(g==null?o=u=null:u=c(o=g),f):o},f}class kL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function AJ(t){return new kL(t,!0)}function TJ(t){return new kL(t,!1)}const UN={draw(t,e){const n=vs(e/bv);t.moveTo(n,0),t.arc(0,0,n,0,Vy)}},CJ={draw(t,e){const n=vs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},DL=vs(1/3),IJ=DL*2,PJ={draw(t,e){const n=vs(e/IJ),r=n*DL;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},OJ={draw(t,e){const n=vs(e),r=-n/2;t.rect(r,r,n,n)}},RJ=.8908130915292852,ML=yv(bv/10)/yv(7*bv/10),kJ=yv(Vy/10)*ML,DJ=-TL(Vy/10)*ML,MJ={draw(t,e){const n=vs(e*RJ),r=kJ*n,i=DJ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const c=Vy*o/5,u=TL(c),h=yv(c);t.lineTo(h*n,-u*n),t.lineTo(u*r-h*i,h*r+u*i)}t.closePath()}},i_=vs(3),zJ={draw(t,e){const n=-vs(e/(i_*3));t.moveTo(0,n*2),t.lineTo(-i_*n,-n),t.lineTo(i_*n,-n),t.closePath()}},Di=-.5,Mi=vs(3)/2,Nj=1/vs(12),LJ=(Nj/2+1)*3,qJ={draw(t,e){const n=vs(e/LJ),r=n/2,i=n*Nj,o=r,c=n*Nj+n,u=-o,h=c;t.moveTo(r,i),t.lineTo(o,c),t.lineTo(u,h),t.lineTo(Di*r-Mi*i,Mi*r+Di*i),t.lineTo(Di*o-Mi*c,Mi*o+Di*c),t.lineTo(Di*u-Mi*h,Mi*u+Di*h),t.lineTo(Di*r+Mi*i,Di*i-Mi*r),t.lineTo(Di*o+Mi*c,Di*c-Mi*o),t.lineTo(Di*u+Mi*h,Di*h-Mi*u),t.closePath()}};function UJ(t,e){let n=null,r=LN(i);t=typeof t=="function"?t:Gt(t||UN),e=typeof e=="function"?e:Gt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Gt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Gt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function xv(){}function _v(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function zL(t){this._context=t}zL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_v(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function VJ(t){return new zL(t)}function LL(t){this._context=t}LL.prototype={areaStart:xv,areaEnd:xv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function BJ(t){return new LL(t)}function qL(t){this._context=t}qL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $J(t){return new qL(t)}function UL(t){this._context=t}UL.prototype={areaStart:xv,areaEnd:xv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function FJ(t){return new UL(t)}function rP(t){return t<0?-1:1}function iP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),c=(n-t._y1)/(i||r<0&&-0),u=(o*i+c*r)/(r+i);return(rP(o)+rP(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(u))||0}function sP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function s_(t,e,n){var r=t._x0,i=t._y0,o=t._x1,c=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,c-u*n,o,c)}function jv(t){this._context=t}jv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s_(this,this._t0,sP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,s_(this,sP(this,n=iP(this,t,e)),n);break;default:s_(this,this._t0,n=iP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function VL(t){this._context=new BL(t)}(VL.prototype=Object.create(jv.prototype)).point=function(t,e){jv.prototype.point.call(this,e,t)};function BL(t){this._context=t}BL.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function HJ(t){return new jv(t)}function GJ(t){return new VL(t)}function $L(t){this._context=t}$L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=aP(t),i=aP(e),o=0,c=1;c<n;++o,++c)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function aP(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),c=new Array(n);for(i[0]=0,o[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,c[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,c[e]-=r*c[e-1];for(i[n-1]=c[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(c[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function KJ(t){return new $L(t)}function $y(t,e){this._context=t,this._t=e}$y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function QJ(t){return new $y(t,.5)}function WJ(t){return new $y(t,0)}function YJ(t){return new $y(t,1)}function Ac(t,e){if((c=t.length)>1)for(var n=1,r,i,o=t[e[0]],c,u=o.length;n<c;++n)for(i=o,o=t[e[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ej(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function XJ(t,e){return t[e]}function JJ(t){const e=[];return e.key=t,e}function ZJ(){var t=Gt([]),e=Ej,n=Ac,r=XJ;function i(o){var c=Array.from(t.apply(this,arguments),JJ),u,h=c.length,f=-1,p;for(const g of o)for(u=0,++f;u<h;++u)(c[u][f]=[0,+r(g,c[u].key,f,o)]).data=g;for(u=0,p=qN(e(c));u<h;++u)c[p[u]].index=u;return n(c,p),c}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Gt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Gt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?Ej:typeof o=="function"?o:Gt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Ac,i):n},i}function eZ(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,c;i<o;++i){for(c=n=0;n<r;++n)c+=t[n][i][1]||0;if(c)for(n=0;n<r;++n)t[n][i][1]/=c}Ac(t,e)}}function tZ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var c=0,u=0;c<i;++c)u+=t[c][n][1]||0;r[n][1]+=r[n][0]=-u/2}Ac(t,e)}}function nZ(t,e){if(!(!((c=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,c;r<o;++r){for(var u=0,h=0,f=0;u<c;++u){for(var p=t[e[u]],g=p[r][1]||0,y=p[r-1][1]||0,x=(g-y)/2,N=0;N<u;++N){var j=t[e[N]],E=j[r][1]||0,A=j[r-1][1]||0;x+=E-A}h+=g,f+=x*g}i[r-1][1]+=i[r-1][0]=n,h&&(n-=f/h)}i[r-1][1]+=i[r-1][0]=n,Ac(t,e)}}var a_={},o_={},oP;function rZ(){return oP||(oP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(o_)),o_}var l_={},lP;function FL(){return lP||(lP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(l_)),l_}var c_={},cP;function VN(){return cP||(cP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(c_)),c_}var u_={},d_={},uP;function iZ(){return uP||(uP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(d_)),d_}var dP;function BN(){return dP||(dP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iZ(),n=VN();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const o=[],c=i.length;if(c===0)return o;let u=0,h="",f="",p=!1;for(i.charCodeAt(0)===46&&(o.push(""),u++);u<c;){const g=i[u];f?g==="\\"&&u+1<c?(u++,h+=i[u]):g===f?f="":h+=g:p?g==='"'||g==="'"?f=g:g==="]"?(p=!1,o.push(h),h=""):h+=g:g==="["?(p=!0,h&&(o.push(h),h="")):g==="."?h&&(o.push(h),h=""):h+=g,u++}return h&&o.push(h),o}t.toPath=r})(u_)),u_}var hP;function $N(){return hP||(hP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rZ(),n=FL(),r=VN(),i=BN();function o(u,h,f){if(u==null)return f;switch(typeof h){case"string":{if(e.isUnsafeProperty(h))return f;const p=u[h];return p===void 0?n.isDeepKey(h)?o(u,i.toPath(h),f):f:p}case"number":case"symbol":{typeof h=="number"&&(h=r.toKey(h));const p=u[h];return p===void 0?f:p}default:{if(Array.isArray(h))return c(u,h,f);if(Object.is(h?.valueOf(),-0)?h="-0":h=String(h),e.isUnsafeProperty(h))return f;const p=u[h];return p===void 0?f:p}}}function c(u,h,f){if(h.length===0)return f;let p=u;for(let g=0;g<h.length;g++){if(p==null||e.isUnsafeProperty(h[g]))return f;p=p[h[g]]}return p===void 0?f:p}t.get=o})(a_)),a_}var h_,fP;function sZ(){return fP||(fP=1,h_=$N().get),h_}var aZ=sZ();const md=ra(aZ);var oZ=4;function el(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oZ,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,o,c)=>{var u=n[c-1];return typeof u=="string"?i+u+o:u!==void 0?i+el(u)+o:i+o},"")}var Xr=t=>t===0?0:t>0?1:-1,Zs=t=>typeof t=="number"&&t!=+t,Tc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,ke=t=>(typeof t=="number"||t instanceof Number)&&!Zs(t),ea=t=>ke(t)||typeof t=="string",lZ=0,kf=t=>{var e=++lZ;return"".concat(t||"").concat(e)},ps=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(e)&&typeof e!="string")return r;var o;if(Tc(e)){if(n==null)return r;var c=e.indexOf("%");o=n*parseFloat(e.slice(0,c))/100}else o=+e;return Zs(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},HL=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function pn(t,e,n){return ke(t)&&ke(e)?el(t+n*(e-t)):e}function GL(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):md(r,e))===n)}var an=t=>t===null||typeof t>"u",mm=t=>an(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Jr(t){return t!=null}function Vc(){}var cZ=["type","size","sizeType"];function Sj(){return Sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sj.apply(null,arguments)}function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){uZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uZ(t,e,n){return(e=dZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dZ(t){var e=hZ(t,"string");return typeof e=="symbol"?e:e+""}function hZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fZ(t,e){if(t==null)return{};var n,r,i=mZ(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KL={symbolCircle:UN,symbolCross:CJ,symbolDiamond:PJ,symbolSquare:OJ,symbolStar:MJ,symbolTriangle:zJ,symbolWye:qJ},pZ=Math.PI/180,gZ=t=>{var e="symbol".concat(mm(t));return KL[e]||UN},vZ=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*pZ;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},yZ=(t,e)=>{KL["symbol".concat(mm(t))]=e},QL=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=fZ(t,cZ),o=pP(pP({},i),{},{type:e,size:n,sizeType:r}),c="circle";typeof e=="string"&&(c=e);var u=()=>{var y=gZ(c),x=UJ().type(y).size(vZ(n,r,c)),N=x();if(N!==null)return N},{className:h,cx:f,cy:p}=o,g=kr(o);return ke(f)&&ke(p)&&ke(n)?_.createElement("path",Sj({},g,{className:Ut("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:u()})):null};QL.registerSymbol=yZ;var WL=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,FN=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(_.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{zN(i)&&(r[i]=(o=>n[i](n,o)))}),r},bZ=(t,e,n)=>r=>(t(e,n,r),null),HN=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];zN(i)&&typeof o=="function"&&(r||(r={}),r[i]=bZ(o,e,n))}),r};function gP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gP(Object(n),!0).forEach(function(r){_Z(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Z(t,e,n){return(e=jZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jZ(t){var e=wZ(t,"string");return typeof e=="symbol"?e:e+""}function wZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mr(t,e){var n=xZ({},t),r=e,i=Object.keys(e),o=i.reduce((c,u)=>(c[u]===void 0&&r[u]!==void 0&&(c[u]=r[u]),c),n);return o}var f_={},m_={},vP;function NZ(){return vP||(vP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const c=n[o],u=r(c,o,n);i.has(u)||i.set(u,c)}return Array.from(i.values())}t.uniqBy=e})(m_)),m_}var p_={},yP;function EZ(){return yP||(yP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(p_)),p_}var g_={},bP;function YL(){return bP||(bP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(g_)),g_}var v_={},y_={},b_={},xP;function SZ(){return xP||(xP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(b_)),b_}var _P;function GN(){return _P||(_P=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SZ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(y_)),y_}var x_={},jP;function AZ(){return jP||(jP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(x_)),x_}var wP;function TZ(){return wP||(wP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GN(),n=AZ();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(v_)),v_}var __={},j_={},NP;function CZ(){return NP||(NP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$N();function n(r){return function(i){return e.get(i,r)}}t.property=n})(j_)),j_}var w_={},N_={},E_={},S_={},EP;function XL(){return EP||(EP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(S_)),S_}var A_={},SP;function JL(){return SP||(SP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(A_)),A_}var T_={},AP;function ZL(){return AP||(AP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(T_)),T_}var TP;function IZ(){return TP||(TP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XL(),n=JL(),r=ZL();function i(p,g,y){return typeof y!="function"?i(p,g,()=>{}):o(p,g,function x(N,j,E,A,R,T){const I=y(N,j,E,A,R,T);return I!==void 0?!!I:o(N,j,x,T)},new Map)}function o(p,g,y,x){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,y,x);case"function":return Object.keys(g).length>0?o(p,{...g},y,x):r.isEqualsSameValueZero(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:r.isEqualsSameValueZero(p,g)}}function c(p,g,y,x){if(g==null)return!0;if(Array.isArray(g))return h(p,g,y,x);if(g instanceof Map)return u(p,g,y,x);if(g instanceof Set)return f(p,g,y,x);const N=Object.keys(g);if(p==null||n.isPrimitive(p))return N.length===0;if(N.length===0)return!0;if(x?.has(g))return x.get(g)===p;x?.set(g,p);try{for(let j=0;j<N.length;j++){const E=N[j];if(!n.isPrimitive(p)&&!(E in p)||g[E]===void 0&&p[E]!==void 0||g[E]===null&&p[E]!==null||!y(p[E],g[E],E,p,g,x))return!1}return!0}finally{x?.delete(g)}}function u(p,g,y,x){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[N,j]of g.entries()){const E=p.get(N);if(y(E,j,N,p,g,x)===!1)return!1}return!0}function h(p,g,y,x){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const N=new Set;for(let j=0;j<g.length;j++){const E=g[j];let A=!1;for(let R=0;R<p.length;R++){if(N.has(R))continue;const T=p[R];let I=!1;if(y(T,E,j,p,g,x)&&(I=!0),I){N.add(R),A=!0;break}}if(!A)return!1}return!0}function f(p,g,y,x){return g.size===0?!0:p instanceof Set?h([...p],[...g],y,x):!1}t.isMatchWith=i,t.isSetMatch=f})(E_)),E_}var CP;function e3(){return CP||(CP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IZ();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(N_)),N_}var C_={},I_={},P_={},IP;function PZ(){return IP||(IP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(P_)),P_}var O_={},PP;function KN(){return PP||(PP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(O_)),O_}var R_={},OP;function t3(){return OP||(OP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",c="[object Symbol]",u="[object Date]",h="[object Map]",f="[object Set]",p="[object Array]",g="[object Function]",y="[object ArrayBuffer]",x="[object Object]",N="[object Error]",j="[object DataView]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",T="[object Uint32Array]",I="[object BigUint64Array]",M="[object Int8Array]",B="[object Int16Array]",D="[object Int32Array]",P="[object BigInt64Array]",k="[object Float32Array]",q="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=y,t.arrayTag=p,t.bigInt64ArrayTag=P,t.bigUint64ArrayTag=I,t.booleanTag=i,t.dataViewTag=j,t.dateTag=u,t.errorTag=N,t.float32ArrayTag=k,t.float64ArrayTag=q,t.functionTag=g,t.int16ArrayTag=B,t.int32ArrayTag=D,t.int8ArrayTag=M,t.mapTag=h,t.numberTag=r,t.objectTag=x,t.regexpTag=e,t.setTag=f,t.stringTag=n,t.symbolTag=c,t.uint16ArrayTag=R,t.uint32ArrayTag=T,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=A})(R_)),R_}var k_={},RP;function OZ(){return RP||(RP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(k_)),k_}var kP;function n3(){return kP||(kP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PZ(),n=KN(),r=t3(),i=JL(),o=OZ();function c(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,y,x=new Map,N=void 0){const j=N?.(p,g,y,x);if(j!==void 0)return j;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const E=new Array(p.length);x.set(p,E);for(let A=0;A<p.length;A++)E[A]=u(p[A],A,y,x,N);return Object.hasOwn(p,"index")&&(E.index=p.index),Object.hasOwn(p,"input")&&(E.input=p.input),E}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const E=new RegExp(p.source,p.flags);return E.lastIndex=p.lastIndex,E}if(p instanceof Map){const E=new Map;x.set(p,E);for(const[A,R]of p)E.set(A,u(R,A,y,x,N));return E}if(p instanceof Set){const E=new Set;x.set(p,E);for(const A of p)E.add(u(A,void 0,y,x,N));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(o.isTypedArray(p)){const E=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,E);for(let A=0;A<p.length;A++)E[A]=u(p[A],A,y,x,N);return E}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const E=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,E),h(E,p,y,x,N),E}if(typeof File<"u"&&p instanceof File){const E=new File([p],p.name,{type:p.type});return x.set(p,E),h(E,p,y,x,N),E}if(typeof Blob<"u"&&p instanceof Blob){const E=new Blob([p],{type:p.type});return x.set(p,E),h(E,p,y,x,N),E}if(p instanceof Error){const E=new p.constructor;return x.set(p,E),E.message=p.message,E.name=p.name,E.stack=p.stack,E.cause=p.cause,h(E,p,y,x,N),E}if(p instanceof Boolean){const E=new Boolean(p.valueOf());return x.set(p,E),h(E,p,y,x,N),E}if(p instanceof Number){const E=new Number(p.valueOf());return x.set(p,E),h(E,p,y,x,N),E}if(p instanceof String){const E=new String(p.valueOf());return x.set(p,E),h(E,p,y,x,N),E}if(typeof p=="object"&&f(p)){const E=Object.create(Object.getPrototypeOf(p));return x.set(p,E),h(E,p,y,x,N),E}return p}function h(p,g,y=p,x,N){const j=[...Object.keys(g),...e.getSymbols(g)];for(let E=0;E<j.length;E++){const A=j[E],R=Object.getOwnPropertyDescriptor(p,A);(R==null||R.writable)&&(p[A]=u(g[A],A,y,x,N))}}function f(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=c,t.cloneDeepWithImpl=u,t.copyProperties=h})(I_)),I_}var DP;function RZ(){return DP||(DP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n3();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(C_)),C_}var MP;function kZ(){return MP||(MP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e3(),n=RZ();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(w_)),w_}var D_={},M_={},z_={},zP;function DZ(){return zP||(zP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n3(),n=KN(),r=t3();function i(o,c){return e.cloneDeepWith(o,(u,h,f,p)=>{const g=c?.(u,h,f,p);if(g!==void 0)return g;if(typeof o=="object"){if(n.getTag(o)===r.objectTag&&typeof o.constructor!="function"){const y={};return p.set(o,y),e.copyProperties(y,o,f,p),y}switch(Object.prototype.toString.call(o)){case r.numberTag:case r.stringTag:case r.booleanTag:{const y=new o.constructor(o?.valueOf());return e.copyProperties(y,o),y}case r.argumentsTag:{const y={};return e.copyProperties(y,o),y.length=o.length,y[Symbol.iterator]=o[Symbol.iterator],y}default:return}}})}t.cloneDeepWith=i})(z_)),z_}var LP;function MZ(){return LP||(LP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DZ();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(M_)),M_}var L_={},q_={},qP;function r3(){return qP||(qP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(q_)),q_}var U_={},UP;function zZ(){return UP||(UP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KN();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(U_)),U_}var VP;function LZ(){return VP||(VP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FL(),n=r3(),r=zZ(),i=BN();function o(c,u){let h;if(Array.isArray(u)?h=u:typeof u=="string"&&e.isDeepKey(u)&&c?.[u]==null?h=i.toPath(u):h=[u],h.length===0)return!1;let f=c;for(let p=0;p<h.length;p++){const g=h[p];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}t.has=o})(L_)),L_}var BP;function qZ(){return BP||(BP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e3(),n=VN(),r=MZ(),i=$N(),o=LZ();function c(u,h){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return h=r.cloneDeep(h),function(f){const p=i.get(f,u);return p===void 0?o.has(f,u):h===void 0?p===void 0:e.isMatch(p,h)}}t.matchesProperty=c})(D_)),D_}var $P;function UZ(){return $P||($P=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YL(),n=CZ(),r=kZ(),i=qZ();function o(c){if(c==null)return e.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):r.matches(c);case"string":case"symbol":case"number":return n.property(c)}}t.iteratee=o})(__)),__}var FP;function VZ(){return FP||(FP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NZ(),n=EZ(),r=YL(),i=TZ(),o=UZ();function c(u,h=r.identity){return i.isArrayLikeObject(u)?e.uniqBy(Array.from(u),n.ary(o.iteratee(h),1)):[]}t.uniqBy=c})(f_)),f_}var V_,HP;function BZ(){return HP||(HP=1,V_=VZ().uniqBy),V_}var $Z=BZ();const GP=ra($Z);function FZ(t,e,n){return e===!0?GP(t,n):typeof e=="function"?GP(t,e):t}var B_={exports:{}},$_={},F_={exports:{}},H_={};var KP;function HZ(){if(KP)return H_;KP=1;var t=_d();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,c=t.useDebugValue;function u(g,y){var x=y(),N=r({inst:{value:x,getSnapshot:y}}),j=N[0].inst,E=N[1];return o(function(){j.value=x,j.getSnapshot=y,h(j)&&E({inst:j})},[g,x,y]),i(function(){return h(j)&&E({inst:j}),g(function(){h(j)&&E({inst:j})})},[g]),c(x),x}function h(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!n(g,x)}catch{return!0}}function f(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return H_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,H_}var QP;function GZ(){return QP||(QP=1,F_.exports=HZ()),F_.exports}var WP;function KZ(){if(WP)return $_;WP=1;var t=_d(),e=GZ();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,c=t.useEffect,u=t.useMemo,h=t.useDebugValue;return $_.useSyncExternalStoreWithSelector=function(f,p,g,y,x){var N=o(null);if(N.current===null){var j={hasValue:!1,value:null};N.current=j}else j=N.current;N=u(function(){function A(B){if(!R){if(R=!0,T=B,B=y(B),x!==void 0&&j.hasValue){var D=j.value;if(x(D,B))return I=D}return I=B}if(D=I,r(T,B))return D;var P=y(B);return x!==void 0&&x(D,P)?(T=B,D):(T=B,I=P)}var R=!1,T,I,M=g===void 0?null:g;return[function(){return A(p())},M===null?void 0:function(){return A(M())}]},[p,g,y,x]);var E=i(f,N[0],N[1]);return c(function(){j.hasValue=!0,j.value=E},[E]),h(E),E},$_}var YP;function QZ(){return YP||(YP=1,B_.exports=KZ()),B_.exports}var WZ=QZ(),QN=_.createContext(null),YZ=t=>t,En=()=>{var t=_.useContext(QN);return t?t.store.dispatch:YZ},Bg=()=>{},XZ=()=>Bg,JZ=(t,e)=>t===e;function Le(t){var e=_.useContext(QN),n=_.useMemo(()=>e?r=>{if(r!=null)return t(r)}:Bg,[e,t]);return WZ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:XZ,e?e.store.getState:Bg,e?e.store.getState:Bg,n,JZ)}function ZZ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function eee(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function tee(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var XP=t=>Array.isArray(t)?t:[t];function nee(t){const e=Array.isArray(t[0])?t[0]:t;return tee(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ree(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var iee=class{constructor(t){this.value=t}deref(){return this.value}},see=typeof WeakRef<"u"?WeakRef:iee,aee=0,JP=1;function hg(){return{s:aee,v:void 0,o:null,p:null}}function i3(t,e={}){let n=hg();const{resultEqualityCheck:r}=e;let i,o=0;function c(){let u=n;const{length:h}=arguments;for(let g=0,y=h;g<y;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let N=u.o;N===null&&(u.o=N=new WeakMap);const j=N.get(x);j===void 0?(u=hg(),N.set(x,u)):u=j}else{let N=u.p;N===null&&(u.p=N=new Map);const j=N.get(x);j===void 0?(u=hg(),N.set(x,u)):u=j}}const f=u;let p;if(u.s===JP)p=u.v;else if(p=t.apply(null,arguments),o++,r){const g=i?.deref?.()??i;g!=null&&r(g,p)&&(p=g,o!==0&&o--),i=typeof p=="object"&&p!==null||typeof p=="function"?new see(p):p}return f.s=JP,f.v=p,p}return c.clearCache=()=>{n=hg(),c.resetResultsCount()},c.resultsCount=()=>o,c.resetResultsCount=()=>{o=0},c}function oee(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,c=0,u,h={},f=i.pop();typeof f=="object"&&(h=f,f=i.pop()),ZZ(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const p={...n,...h},{memoize:g,memoizeOptions:y=[],argsMemoize:x=i3,argsMemoizeOptions:N=[]}=p,j=XP(y),E=XP(N),A=nee(i),R=g(function(){return o++,f.apply(null,arguments)},...j),T=x(function(){c++;const M=ree(A,arguments);return u=R.apply(null,M),u},...E);return Object.assign(T,{resultFunc:f,memoizedResultFunc:R,dependencies:A,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:g,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var fe=oee(i3),lee=Object.assign((t,e=fe)=>{eee(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((c,u,h)=>(c[n[h]]=u,c),{}))},{withTypes:()=>lee}),G_={},K_={},Q_={},ZP;function cee(){return ZP||(ZP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const c=e(r),u=e(i);if(c===u&&c===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?u-c:c-u}return 0};t.compareValues=n})(Q_)),Q_}var W_={},Y_={},eO;function s3(){return eO||(eO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Y_)),Y_}var tO;function uee(){return tO||(tO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=s3(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,c){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||c!=null&&Object.hasOwn(c,o)}t.isKey=i})(W_)),W_}var nO;function dee(){return nO||(nO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cee(),n=uee(),r=BN();function i(o,c,u,h){if(o==null)return[];u=h?void 0:u,Array.isArray(o)||(o=Object.values(o)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const f=(x,N)=>{let j=x;for(let E=0;E<N.length&&j!=null;++E)j=j[N[E]];return j},p=(x,N)=>N==null||x==null?N:typeof x=="object"&&"key"in x?Object.hasOwn(N,x.key)?N[x.key]:f(N,x.path):typeof x=="function"?x(N):Array.isArray(x)?f(N,x):typeof N=="object"?N[x]:N,g=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return o.map(x=>({original:x,criteria:g.map(N=>p(N,x))})).slice().sort((x,N)=>{for(let j=0;j<g.length;j++){const E=e.compareValues(x.criteria[j],N.criteria[j],u[j]);if(E!==0)return E}return 0}).map(x=>x.original)}t.orderBy=i})(K_)),K_}var X_={},rO;function hee(){return rO||(rO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),c=(u,h)=>{for(let f=0;f<u.length;f++){const p=u[f];Array.isArray(p)&&h<o?c(p,h+1):i.push(p)}};return c(n,0),i}t.flatten=e})(X_)),X_}var J_={},iO;function a3(){return iO||(iO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r3(),n=GN(),r=XL(),i=ZL();function o(c,u,h){return r.isObject(h)&&(typeof u=="number"&&n.isArrayLike(h)&&e.isIndex(u)&&u<h.length||typeof u=="string"&&u in h)?i.isEqualsSameValueZero(h[u],c):!1}t.isIterateeCall=o})(J_)),J_}var sO;function fee(){return sO||(sO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dee(),n=hee(),r=a3();function i(o,...c){const u=c.length;return u>1&&r.isIterateeCall(o,c[0],c[1])?c=[]:u>2&&r.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),e.orderBy(o,n.flatten(c),["asc"])}t.sortBy=i})(G_)),G_}var Z_,aO;function mee(){return aO||(aO=1,Z_=fee().sortBy),Z_}var pee=mee();const Fy=ra(pee);var o3=t=>t.legend.settings,gee=t=>t.legend.size,vee=t=>t.legend.payload;fe([vee,o3],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Fy(r,n):r});var fg=1;function yee(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=_.useState({height:0,left:0,top:0,width:0}),r=_.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),c={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(c.height-e.height)>fg||Math.abs(c.left-e.left)>fg||Math.abs(c.top-e.top)>fg||Math.abs(c.width-e.width)>fg)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ur(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var bee=typeof Symbol=="function"&&Symbol.observable||"@@observable",oO=bee,e1=()=>Math.random().toString(36).substring(7).split("").join("."),xee={INIT:`@@redux/INIT${e1()}`,REPLACE:`@@redux/REPLACE${e1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${e1()}`},wv=xee;function WN(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function l3(t,e,n){if(typeof t!="function")throw new Error(ur(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ur(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ur(1));return n(l3)(t,e)}let r=t,i=e,o=new Map,c=o,u=0,h=!1;function f(){c===o&&(c=new Map,o.forEach((E,A)=>{c.set(A,E)}))}function p(){if(h)throw new Error(ur(3));return i}function g(E){if(typeof E!="function")throw new Error(ur(4));if(h)throw new Error(ur(5));let A=!0;f();const R=u++;return c.set(R,E),function(){if(A){if(h)throw new Error(ur(6));A=!1,f(),c.delete(R),o=null}}}function y(E){if(!WN(E))throw new Error(ur(7));if(typeof E.type>"u")throw new Error(ur(8));if(typeof E.type!="string")throw new Error(ur(17));if(h)throw new Error(ur(9));try{h=!0,i=r(i,E)}finally{h=!1}return(o=c).forEach(R=>{R()}),E}function x(E){if(typeof E!="function")throw new Error(ur(10));r=E,y({type:wv.REPLACE})}function N(){const E=g;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(ur(11));function R(){const I=A;I.next&&I.next(p())}return R(),{unsubscribe:E(R)}},[oO](){return this}}}return y({type:wv.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:x,[oO]:N}}function _ee(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:wv.INIT})>"u")throw new Error(ur(12));if(typeof n(void 0,{type:wv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ur(13))})}function c3(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const c=e[o];typeof t[c]=="function"&&(n[c]=t[c])}const r=Object.keys(n);let i;try{_ee(n)}catch(o){i=o}return function(c={},u){if(i)throw i;let h=!1;const f={};for(let p=0;p<r.length;p++){const g=r[p],y=n[g],x=c[g],N=y(x,u);if(typeof N>"u")throw u&&u.type,new Error(ur(14));f[g]=N,h=h||N!==x}return h=h||r.length!==Object.keys(c).length,h?f:c}}function Nv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function jee(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(ur(15))};const c={getState:i.getState,dispatch:(h,...f)=>o(h,...f)},u=t.map(h=>h(c));return o=Nv(...u)(i.dispatch),{...i,dispatch:o}}}function u3(t){return WN(t)&&"type"in t&&typeof t.type=="string"}var d3=Symbol.for("immer-nothing"),lO=Symbol.for("immer-draftable"),Dr=Symbol.for("immer-state");function ss(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var vi=Object,pd=vi.getPrototypeOf,Ev="constructor",Hy="prototype",Aj="configurable",Sv="enumerable",$g="writable",Df="value",$a=t=>!!t&&!!t[Dr];function gs(t){return t?h3(t)||Ky(t)||!!t[lO]||!!t[Ev]?.[lO]||Qy(t)||Wy(t):!1}var wee=vi[Hy][Ev].toString(),cO=new WeakMap;function h3(t){if(!t||!YN(t))return!1;const e=pd(t);if(e===null||e===vi[Hy])return!0;const n=vi.hasOwnProperty.call(e,Ev)&&e[Ev];if(n===Object)return!0;if(!Gu(n))return!1;let r=cO.get(n);return r===void 0&&(r=Function.toString.call(n),cO.set(n,r)),r===wee}function Gy(t,e,n=!0){pm(t)===0?(n?Reflect.ownKeys(t):vi.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function pm(t){const e=t[Dr];return e?e.type_:Ky(t)?1:Qy(t)?2:Wy(t)?3:0}var uO=(t,e,n=pm(t))=>n===2?t.has(e):vi[Hy].hasOwnProperty.call(t,e),Tj=(t,e,n=pm(t))=>n===2?t.get(e):t[e],Av=(t,e,n,r=pm(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Nee(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Ky=Array.isArray,Qy=t=>t instanceof Map,Wy=t=>t instanceof Set,YN=t=>typeof t=="object",Gu=t=>typeof t=="function",t1=t=>typeof t=="boolean";function Eee(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Aa=t=>t.copy_||t.base_,XN=t=>t.modified_?t.copy_:t.base_;function Cj(t,e){if(Qy(t))return new Map(t);if(Wy(t))return new Set(t);if(Ky(t))return Array[Hy].slice.call(t);const n=h3(t);if(e===!0||e==="class_only"&&!n){const r=vi.getOwnPropertyDescriptors(t);delete r[Dr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const c=i[o],u=r[c];u[$g]===!1&&(u[$g]=!0,u[Aj]=!0),(u.get||u.set)&&(r[c]={[Aj]:!0,[$g]:!0,[Sv]:u[Sv],[Df]:t[c]})}return vi.create(pd(t),r)}else{const r=pd(t);if(r!==null&&n)return{...t};const i=vi.create(r);return vi.assign(i,t)}}function JN(t,e=!1){return Yy(t)||$a(t)||!gs(t)||(pm(t)>1&&vi.defineProperties(t,{set:mg,add:mg,clear:mg,delete:mg}),vi.freeze(t),e&&Gy(t,(n,r)=>{JN(r,!0)},!1)),t}function See(){ss(2)}var mg={[Df]:See};function Yy(t){return t===null||!YN(t)?!0:vi.isFrozen(t)}var Tv="MapSet",Ij="Patches",dO="ArrayMethods",f3={};function Cc(t){const e=f3[t];return e||ss(0,t),e}var hO=t=>!!f3[t],Mf,m3=()=>Mf,Aee=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:hO(Tv)?Cc(Tv):void 0,arrayMethodsPlugin_:hO(dO)?Cc(dO):void 0});function fO(t,e){e&&(t.patchPlugin_=Cc(Ij),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Pj(t){Oj(t),t.drafts_.forEach(Tee),t.drafts_=null}function Oj(t){t===Mf&&(Mf=t.parent_)}var mO=t=>Mf=Aee(Mf,t);function Tee(t){const e=t[Dr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function pO(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Dr].modified_&&(Pj(e),ss(4)),gs(t)&&(t=gO(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Dr].base_,t,e)}else t=gO(e,n);return Cee(e,t,!0),Pj(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==d3?t:void 0}function gO(t,e){if(Yy(e))return e;const n=e[Dr];if(!n)return Cv(e,t.handledSet_,t);if(!Xy(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);v3(n,t)}return n.copy_}function Cee(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&JN(e,n)}function p3(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Xy=(t,e)=>t.scope_===e,Iee=[];function g3(t,e,n,r){const i=Aa(t),o=t.type_;if(r!==void 0&&Tj(i,r,o)===e){Av(i,r,n,o);return}if(!t.draftLocations_){const u=t.draftLocations_=new Map;Gy(i,(h,f)=>{if($a(f)){const p=u.get(f)||[];p.push(h),u.set(f,p)}})}const c=t.draftLocations_.get(e)??Iee;for(const u of c)Av(i,u,n,o)}function Pee(t,e,n){t.callbacks_.push(function(i){const o=e;if(!o||!Xy(o,i))return;i.mapSetPlugin_?.fixSetContents(o);const c=XN(o);g3(t,o.draft_??o,c,n),v3(o,i)})}function v3(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}p3(t)}}function Oee(t,e,n){const{scope_:r}=t;if($a(n)){const i=n[Dr];Xy(i,r)&&i.callbacks_.push(function(){Fg(t);const c=XN(i);g3(t,n,c,e)})}else gs(n)&&t.callbacks_.push(function(){const o=Aa(t);t.type_===3?o.has(n)&&Cv(n,r.handledSet_,r):Tj(o,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Cv(Tj(t.copy_,e,t.type_),r.handledSet_,r)})}function Cv(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||$a(t)||e.has(t)||!gs(t)||Yy(t)||(e.add(t),Gy(t,(r,i)=>{if($a(i)){const o=i[Dr];if(Xy(o,n)){const c=XN(o);Av(t,r,c,t.type_),p3(o)}}else gs(i)&&Cv(i,e,n)})),t}function Ree(t,e){const n=Ky(t),r={type_:n?1:0,scope_:e?e.scope_:m3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,o=Iv;n&&(i=[r],o=zf);const{revoke:c,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=c,[u,r]}var Iv={get(t,e){if(e===Dr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Aa(t);if(!uO(i,e,t.type_))return kee(t,i,e);const o=i[e];if(t.finalized_||!gs(o)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&Eee(e))return o;if(o===n1(t.base_,e)){Fg(t);const c=t.type_===1?+e:e,u=kj(t.scope_,o,t,c);return t.copy_[c]=u}return o},has(t,e){return e in Aa(t)},ownKeys(t){return Reflect.ownKeys(Aa(t))},set(t,e,n){const r=y3(Aa(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=n1(Aa(t),e),o=i?.[Dr];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Nee(n,i)&&(n!==void 0||uO(t.base_,e,t.type_)))return!0;Fg(t),Rj(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Oee(t,e,n)),!0},deleteProperty(t,e){return Fg(t),n1(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Rj(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Aa(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[$g]:!0,[Aj]:t.type_!==1||e!=="length",[Sv]:r[Sv],[Df]:n[e]}},defineProperty(){ss(11)},getPrototypeOf(t){return pd(t.base_)},setPrototypeOf(){ss(12)}},zf={};for(let t in Iv){let e=Iv[t];zf[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}zf.deleteProperty=function(t,e){return zf.set.call(this,t,e,void 0)};zf.set=function(t,e,n){return Iv.set.call(this,t[0],e,n,t[0])};function n1(t,e){const n=t[Dr];return(n?Aa(n):t)[e]}function kee(t,e,n){const r=y3(e,n);return r?Df in r?r[Df]:r.get?.call(t.draft_):void 0}function y3(t,e){if(!(e in t))return;let n=pd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=pd(n)}}function Rj(t){t.modified_||(t.modified_=!0,t.parent_&&Rj(t.parent_))}function Fg(t){t.copy_||(t.assigned_=new Map,t.copy_=Cj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Dee=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Gu(n)&&!Gu(r)){const c=r;r=n;const u=this;return function(f=c,...p){return u.produce(f,g=>r.call(this,g,...p))}}Gu(r)||ss(6),i!==void 0&&!Gu(i)&&ss(7);let o;if(gs(n)){const c=mO(this),u=kj(c,n,void 0);let h=!0;try{o=r(u),h=!1}finally{h?Pj(c):Oj(c)}return fO(c,i),pO(o,c)}else if(!n||!YN(n)){if(o=r(n),o===void 0&&(o=n),o===d3&&(o=void 0),this.autoFreeze_&&JN(o,!0),i){const c=[],u=[];Cc(Ij).generateReplacementPatches_(n,o,{patches_:c,inversePatches_:u}),i(c,u)}return o}else ss(1,n)},this.produceWithPatches=(n,r)=>{if(Gu(n))return(u,...h)=>this.produceWithPatches(u,f=>n(f,...h));let i,o;return[this.produce(n,r,(u,h)=>{i=u,o=h}),i,o]},t1(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),t1(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),t1(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){gs(e)||ss(8),$a(e)&&(e=ds(e));const n=mO(this),r=kj(n,e,void 0);return r[Dr].isManual_=!0,Oj(n),r}finishDraft(e,n){const r=e&&e[Dr];(!r||!r.isManual_)&&ss(9);const{scope_:i}=r;return fO(i,n),pO(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(n=n.slice(r+1));const i=Cc(Ij).applyPatches_;return $a(e)?i(e,n):this.produce(e,o=>i(o,n))}};function kj(t,e,n,r){const[i,o]=Qy(e)?Cc(Tv).proxyMap_(e,n):Wy(e)?Cc(Tv).proxySet_(e,n):Ree(e,n);return(n?.scope_??m3()).drafts_.push(i),o.callbacks_=n?.callbacks_??[],o.key_=r,n&&r!==void 0?Pee(n,o,r):o.callbacks_.push(function(h){h.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:f}=h;o.modified_&&f&&f.generatePatches_(o,[],h)}),i}function ds(t){return $a(t)||ss(10,t),b3(t)}function b3(t){if(!gs(t)||Yy(t))return t;const e=t[Dr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Cj(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Cj(t,!0);return Gy(n,(i,o)=>{Av(n,i,b3(o))},r),e&&(e.finalized_=!1),n}var Mee=new Dee,x3=Mee.produce;function _3(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var zee=_3(),Lee=_3,qee=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Nv:Nv.apply(null,arguments)};function Vi(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(yi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>u3(r)&&r.type===t,n}var j3=class lf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,lf.prototype)}static get[Symbol.species](){return lf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new lf(...e[0].concat(this)):new lf(...e.concat(this))}};function vO(t){return gs(t)?x3(t,()=>{}):t}function pg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Uee(t){return typeof t=="boolean"}var Vee=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let c=new j3;return n&&(Uee(n)?c.push(zee):c.push(Lee(n.extraArgument))),c},w3="RTK_autoBatch",Zt=()=>t=>({payload:t,meta:{[w3]:!0}}),yO=t=>e=>{setTimeout(e,t)},N3=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,c=!1;const u=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:yO(10):t.type==="callback"?t.queueNotification:yO(t.timeout),f=()=>{c=!1,o&&(o=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const g=()=>i&&p(),y=r.subscribe(g);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[w3],o=!i,o&&(c||(c=!0,h(f))),r.dispatch(p)}finally{i=!0}}})},Bee=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new j3(t);return r&&i.push(N3(typeof r=="object"?r:void 0)),i};function $ee(t){const e=Vee(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:c=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(WN(n))u=c3(n);else throw new Error(yi(1));let h;typeof r=="function"?h=r(e):h=e();let f=Nv;i&&(f=qee({trace:!1,...typeof i=="object"&&i}));const p=jee(...h),g=Bee(p);let y=typeof c=="function"?c(g):g();const x=f(...y);return l3(u,o,x)}function E3(t){const e={},n=[];let r;const i={addCase(o,c){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(yi(28));if(u in e)throw new Error(yi(29));return e[u]=c,i},addAsyncThunk(o,c){return c.pending&&(e[o.pending.type]=c.pending),c.rejected&&(e[o.rejected.type]=c.rejected),c.fulfilled&&(e[o.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:o.settled,reducer:c.settled}),i},addMatcher(o,c){return n.push({matcher:o,reducer:c}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function Fee(t){return typeof t=="function"}function Hee(t,e){let[n,r,i]=E3(e),o;if(Fee(t))o=()=>vO(t());else{const u=vO(t);o=()=>u}function c(u=o(),h){let f=[n[h.type],...r.filter(({matcher:p})=>p(h)).map(({reducer:p})=>p)];return f.filter(p=>!!p).length===0&&(f=[i]),f.reduce((p,g)=>{if(g)if($a(p)){const x=g(p,h);return x===void 0?p:x}else{if(gs(p))return x3(p,y=>g(y,h));{const y=g(p,h);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return c.getInitialState=o,c}var Gee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Kee=(t=21)=>{let e="",n=t;for(;n--;)e+=Gee[Math.random()*64|0];return e},Qee=Symbol.for("rtk-slice-createasyncthunk");function Wee(t,e){return`${t}/${e}`}function Yee({creators:t}={}){const e=t?.asyncThunk?.[Qee];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(yi(11));const c=(typeof r.reducers=="function"?r.reducers(Jee()):r.reducers)||{},u=Object.keys(c),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,I){const M=typeof T=="string"?T:T.type;if(!M)throw new Error(yi(12));if(M in h.sliceCaseReducersByType)throw new Error(yi(13));return h.sliceCaseReducersByType[M]=I,f},addMatcher(T,I){return h.sliceMatchers.push({matcher:T,reducer:I}),f},exposeAction(T,I){return h.actionCreators[T]=I,f},exposeCaseReducer(T,I){return h.sliceCaseReducersByName[T]=I,f}};u.forEach(T=>{const I=c[T],M={reducerName:T,type:Wee(i,T),createNotation:typeof r.reducers=="function"};ete(I)?nte(M,I,f,e):Zee(M,I,f)});function p(){const[T={},I=[],M=void 0]=typeof r.extraReducers=="function"?E3(r.extraReducers):[r.extraReducers],B={...T,...h.sliceCaseReducersByType};return Hee(r.initialState,D=>{for(let P in B)D.addCase(P,B[P]);for(let P of h.sliceMatchers)D.addMatcher(P.matcher,P.reducer);for(let P of I)D.addMatcher(P.matcher,P.reducer);M&&D.addDefaultCase(M)})}const g=T=>T,y=new Map,x=new WeakMap;let N;function j(T,I){return N||(N=p()),N(T,I)}function E(){return N||(N=p()),N.getInitialState()}function A(T,I=!1){function M(D){let P=D[T];return typeof P>"u"&&I&&(P=pg(x,M,E)),P}function B(D=g){const P=pg(y,I,()=>new WeakMap);return pg(P,D,()=>{const k={};for(const[q,L]of Object.entries(r.selectors??{}))k[q]=Xee(L,D,()=>pg(x,D,E),I);return k})}return{reducerPath:T,getSelectors:B,get selectors(){return B(M)},selectSlice:M}}const R={name:i,reducer:j,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:E,...A(o),injectInto(T,{reducerPath:I,...M}={}){const B=I??o;return T.inject({reducerPath:B,reducer:j},M),{...R,...A(B,!0)}}};return R}}function Xee(t,e,n,r){function i(o,...c){let u=e(o);return typeof u>"u"&&r&&(u=n()),t(u,...c)}return i.unwrapped=t,i}var ti=Yee();function Jee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Zee({type:t,reducerName:e,createNotation:n},r,i){let o,c;if("reducer"in r){if(n&&!tte(r))throw new Error(yi(17));o=r.reducer,c=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,c?Vi(t,c):Vi(t))}function ete(t){return t._reducerDefinitionType==="asyncThunk"}function tte(t){return t._reducerDefinitionType==="reducerWithPrepare"}function nte({type:t,reducerName:e},n,r,i){if(!i)throw new Error(yi(18));const{payloadCreator:o,fulfilled:c,pending:u,rejected:h,settled:f,options:p}=n,g=i(t,o,p);r.exposeAction(e,g),c&&r.addCase(g.fulfilled,c),u&&r.addCase(g.pending,u),h&&r.addCase(g.rejected,h),f&&r.addMatcher(g.settled,f),r.exposeCaseReducer(e,{fulfilled:c||gg,pending:u||gg,rejected:h||gg,settled:f||gg})}function gg(){}var rte="task",S3="listener",A3="completed",ZN="cancelled",ite=`task-${ZN}`,ste=`task-${A3}`,Dj=`${S3}-${ZN}`,ate=`${S3}-${A3}`,Jy=class{constructor(t){this.code=t,this.message=`${rte} ${ZN} (reason: ${t})`}name="TaskAbortError";message},eE=(t,e)=>{if(typeof t!="function")throw new TypeError(yi(32))},Pv=()=>{},T3=(t,e=Pv)=>(t.catch(e),t),C3=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),gc=t=>{if(t.aborted)throw new Jy(t.reason)};function I3(t,e){let n=Pv;return new Promise((r,i)=>{const o=()=>i(new Jy(t.reason));if(t.aborted){o();return}n=C3(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Pv})}var ote=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Jy?"cancelled":"rejected",error:n}}finally{e?.()}},Ov=t=>e=>T3(I3(t,e).then(n=>(gc(t),n))),P3=t=>{const e=Ov(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:nd}=Object,bO={},Zy="listenerMiddleware",lte=(t,e)=>{const n=r=>C3(t,()=>r.abort(t.reason));return(r,i)=>{eE(r);const o=new AbortController;n(o);const c=ote(async()=>{gc(t),gc(o.signal);const u=await r({pause:Ov(o.signal),delay:P3(o.signal),signal:o.signal});return gc(o.signal),u},()=>o.abort(ste));return i?.autoJoin&&e.push(c.catch(Pv)),{result:Ov(t)(c),cancel(){o.abort(ite)}}}},cte=(t,e)=>{const n=async(r,i)=>{gc(e);let o=()=>{};const u=[new Promise((h,f)=>{let p=t({predicate:r,effect:(g,y)=>{y.unsubscribe(),h([g,y.getState(),y.getOriginalState()])}});o=()=>{p(),f()}})];i!=null&&u.push(new Promise(h=>setTimeout(h,i,null)));try{const h=await I3(e,Promise.race(u));return gc(e),h}finally{o()}};return(r,i)=>T3(n(r,i))},O3=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=Vi(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(yi(21));return eE(o),{predicate:i,type:e,effect:o}},R3=nd(t=>{const{type:e,predicate:n,effect:r}=O3(t);return{id:Kee(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(yi(22))}}},{withTypes:()=>R3}),xO=(t,e)=>{const{type:n,effect:r,predicate:i}=O3(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},Mj=t=>{t.pending.forEach(e=>{e.abort(Dj)})},ute=(t,e)=>()=>{for(const n of e.keys())Mj(n);t.clear()},_O=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},k3=nd(Vi(`${Zy}/add`),{withTypes:()=>k3}),dte=Vi(`${Zy}/removeAll`),D3=nd(Vi(`${Zy}/remove`),{withTypes:()=>D3}),hte=(...t)=>{console.error(`${Zy}/error`,...t)},gm=(t={})=>{const e=new Map,n=new Map,r=x=>{const N=n.get(x)??0;n.set(x,N+1)},i=x=>{const N=n.get(x)??1;N===1?n.delete(x):n.set(x,N-1)},{extra:o,onError:c=hte}=t;eE(c);const u=x=>(x.unsubscribe=()=>e.delete(x.id),e.set(x.id,x),N=>{x.unsubscribe(),N?.cancelActive&&Mj(x)}),h=x=>{const N=xO(e,x)??R3(x);return u(N)};nd(h,{withTypes:()=>h});const f=x=>{const N=xO(e,x);return N&&(N.unsubscribe(),x.cancelActive&&Mj(N)),!!N};nd(f,{withTypes:()=>f});const p=async(x,N,j,E)=>{const A=new AbortController,R=cte(h,A.signal),T=[];try{x.pending.add(A),r(x),await Promise.resolve(x.effect(N,nd({},j,{getOriginalState:E,condition:(I,M)=>R(I,M).then(Boolean),take:R,delay:P3(A.signal),pause:Ov(A.signal),extra:o,signal:A.signal,fork:lte(A.signal,T),unsubscribe:x.unsubscribe,subscribe:()=>{e.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((I,M,B)=>{I!==A&&(I.abort(Dj),B.delete(I))})},cancel:()=>{A.abort(Dj),x.pending.delete(A)},throwIfCancelled:()=>{gc(A.signal)}})))}catch(I){I instanceof Jy||_O(c,I,{raisedBy:"effect"})}finally{await Promise.all(T),A.abort(ate),i(x),x.pending.delete(A)}},g=ute(e,n);return{middleware:x=>N=>j=>{if(!u3(j))return N(j);if(k3.match(j))return h(j.payload);if(dte.match(j)){g();return}if(D3.match(j))return f(j.payload);let E=x.getState();const A=()=>{if(E===bO)throw new Error(yi(23));return E};let R;try{if(R=N(j),e.size>0){const T=x.getState(),I=Array.from(e.values());for(const M of I){let B=!1;try{B=M.predicate(j,T,E)}catch(D){B=!1,_O(c,D,{raisedBy:"predicate"})}B&&p(M,j,x,A)}}}finally{E=bO}return R},startListening:h,stopListening:f,clearListeners:g}};function yi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var fte={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},M3=ti({name:"chartLayout",initialState:fte,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:mte,setLayout:pte,setChartSize:gte,setScale:vte}=M3.actions,yte=M3.reducer;function z3(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function vt(t){return Number.isFinite(t)}function ta(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function jO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jO(Object(n),!0).forEach(function(r){bte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bte(t,e,n){return(e=xte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xte(t){var e=_te(t,"string");return typeof e=="symbol"?e:e+""}function _te(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zn(t,e,n){return an(t)||an(e)?n:ea(e)?md(t,e,n):typeof e=="function"?e(t):n}var jte=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:c,layout:u}=e;if((u==="vertical"||u==="horizontal"&&c==="middle")&&o!=="center"&&ke(t[o]))return Qu(Qu({},t),{},{[o]:t[o]+(r||0)});if((u==="horizontal"||u==="vertical"&&o==="center")&&c!=="middle"&&ke(t[c]))return Qu(Qu({},t),{},{[c]:t[c]+(i||0)})}return t},Za=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",L3=(t,e,n,r)=>{if(r)return t.map(u=>u.coordinate);var i,o,c=t.map(u=>(u.coordinate===e&&(i=!0),u.coordinate===n&&(o=!0),u.coordinate));return i||c.push(e),o||c.push(n),c},q3=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:o,scale:c,realScaleType:u,isCategorical:h,categoricalDomain:f,tickCount:p,ticks:g,niceTicks:y,axisType:x}=t;if(!c)return null;var N=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/N:0;if(j=x==="angleAxis"&&o&&o.length>=2?Xr(o[0]-o[1])*2*j:j,g||y){var E=(g||y||[]).map((A,R)=>{var T=r?r.indexOf(A):A,I=c.map(T);return vt(I)?{coordinate:I+j,value:A,offset:j,index:R}:null}).filter(Jr);return E}return h&&f?f.map((A,R)=>{var T=c.map(A);return vt(T)?{coordinate:T+j,value:A,index:R,offset:j}:null}).filter(Jr):c.ticks&&p!=null?c.ticks(p).map((A,R)=>{var T=c.map(A);return vt(T)?{coordinate:T+j,value:A,index:R,offset:j}:null}).filter(Jr):c.domain().map((A,R)=>{var T=c.map(A);return vt(T)?{coordinate:T+j,value:r?r[A]:A,index:R,offset:j}:null}).filter(Jr)},wte=(t,e)=>{if(!e||e.length!==2||!ke(e[0])||!ke(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!ke(t[0])||t[0]<n)&&(i[0]=n),(!ke(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Nte=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,c=0,u=0;u<n;++u){var h=t[u],f=h?.[i];if(f!=null){var p=f[1],g=f[0],y=Zs(p)?g:p;y>=0?(f[0]=o,o+=y,f[1]=o):(f[0]=c,c+=y,f[1]=c)}}}},Ete=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,c=0;c<n;++c){var u=t[c],h=u?.[i];if(h!=null){var f=Zs(h[1])?h[0]:h[1];f>=0?(h[0]=o,o+=f,h[1]=o):(h[0]=0,h[1]=0)}}}},Ste={sign:Nte,expand:eZ,none:Ac,silhouette:tZ,wiggle:nZ,positive:Ete},Ate=(t,e,n)=>{var r,i=(r=Ste[n])!==null&&r!==void 0?r:Ac,o=ZJ().keys(e).value((u,h)=>Number(zn(u,h,0))).order(Ej).offset(i),c=o(t);return c.forEach((u,h)=>{u.forEach((f,p)=>{var g=zn(t[p],e[h],0);Array.isArray(g)&&g.length===2&&ke(g[0])&&ke(g[1])&&(f[0]=g[0],f[1]=g[1])})}),c};function Tte(t){return t==null?void 0:String(t)}function wO(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:o,dataKey:c}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!an(i[e.dataKey])){var u=GL(n,"value",i[e.dataKey]);if(u)return u.coordinate+r/2}return n!=null&&n[o]?n[o].coordinate+r/2:null}var h=zn(i,an(c)?e.dataKey:c),f=e.scale.map(h);return ke(f)?f:null}var NO=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:c}=t;if(e.type==="category")return n[c]?n[c].coordinate+r:null;var u=zn(o,e.dataKey,e.scale.domain()[c]);if(an(u))return null;var h=e.scale.map(u);return ke(h)?h-i/2+r:null},Cte=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Ite=t=>{var e=t.flat(2).filter(ke);return[Math.min(...e),Math.max(...e)]},Pte=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Ote=(t,e,n)=>{if(t!=null)return Pte(Object.keys(t).reduce((r,i)=>{var o=t[i];if(!o)return r;var{stackedData:c}=o,u=c.reduce((h,f)=>{var p=z3(f,e,n),g=Ite(p);return!vt(g[0])||!vt(g[1])?h:[Math.min(h[0],g[0]),Math.max(h[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},EO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gd=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Fy(e,p=>p.coordinate),o=1/0,c=1,u=i.length;c<u;c++){var h=i[c],f=i[c-1];o=Math.min((h?.coordinate||0)-(f?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function AO(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return Qu(Qu({},e),{},{dataKey:n,payload:r,value:i,name:o})}function e0(t,e){if(t)return String(t);if(typeof e=="string")return e}var Rte=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},kte=(t,e)=>e==="centric"?t.angle:t.radius,eo=t=>t.layout.width,to=t=>t.layout.height,Dte=t=>t.layout.scale,U3=t=>t.layout.margin,t0=fe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),n0=fe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Mte="data-recharts-item-index",zte="data-recharts-item-id",vm=60;function TO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TO(Object(n),!0).forEach(function(r){Lte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lte(t,e,n){return(e=qte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qte(t){var e=Ute(t,"string");return typeof e=="symbol"?e:e+""}function Ute(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vte=t=>t.brush.height;function Bte(t){var e=n0(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:vm;return n+i}return n},0)}function $te(t){var e=n0(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:vm;return n+i}return n},0)}function Fte(t){var e=t0(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Hte(t){var e=t0(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var tr=fe([eo,to,U3,Vte,Bte,$te,Fte,Hte,o3,gee],(t,e,n,r,i,o,c,u,h,f)=>{var p={left:(n.left||0)+i,right:(n.right||0)+o},g={top:(n.top||0)+c,bottom:(n.bottom||0)+u},y=vg(vg({},g),p),x=y.bottom;y.bottom+=r,y=jte(y,h,f);var N=t-y.left-y.right,j=e-y.top-y.bottom;return vg(vg({brushBottom:x},y),{},{width:Math.max(N,0),height:Math.max(j,0)})}),Gte=fe(tr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),tE=fe(eo,to,(t,e)=>({x:0,y:0,width:t,height:e})),Kte=_.createContext(null),Sr=()=>_.useContext(Kte)!=null,r0=t=>t.brush,i0=fe([r0,tr,U3],(t,e,n)=>({height:t.height,x:ke(t.x)?t.x:e.left,y:ke(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:ke(t.width)?t.width:e.width})),r1={},i1={},s1={},CO;function Qte(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let c,u=null;const h=o!=null&&o.includes("leading"),f=o==null||o.includes("trailing"),p=()=>{u!==null&&(n.apply(c,u),c=void 0,u=null)},g=()=>{f&&p(),j()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},N=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{N(),c=void 0,u=null},E=()=>{p()},A=function(...R){if(i?.aborted)return;c=this,u=R;const T=y==null;x(),h&&T&&p()};return A.schedule=x,A.cancel=j,A.flush=E,i?.addEventListener("abort",j,{once:!0}),A}t.debounce=e})(s1)),s1}var IO;function Wte(){return IO||(IO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qte();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:c=!1,trailing:u=!0,maxWait:h}=o,f=Array(2);c&&(f[0]="leading"),u&&(f[1]="trailing");let p,g=null;const y=e.debounce(function(...j){p=r.apply(this,j),g=null},i,{edges:f}),x=function(...j){return h!=null&&(g===null&&(g=Date.now()),Date.now()-g>=h)?(p=r.apply(this,j),g=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,j),p)},N=()=>(y.flush(),p);return x.cancel=y.cancel,x.flush=N,x}t.debounce=n})(i1)),i1}var PO;function Yte(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wte();function n(r,i=0,o={}){const{leading:c=!0,trailing:u=!0}=o;return e.debounce(r,i,{leading:c,maxWait:i,trailing:u})}t.throttle=n})(r1)),r1}var a1,OO;function Xte(){return OO||(OO=1,a1=Yte().throttle),a1}var Jte=Xte();const Zte=ra(Jte);var Rv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(n.replace(/%s/g,()=>i[c++]))}},Vs={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},V3=(t,e,n)=>{var{width:r=Vs.width,height:i=Vs.height,aspect:o,maxHeight:c}=n,u=Tc(r)?t:Number(r),h=Tc(i)?e:Number(i);return o&&o>0&&(u?h=u/o:h&&(u=h*o),c&&h!=null&&h>c&&(h=c)),{calculatedWidth:u,calculatedHeight:h}},ene={width:0,height:0,overflow:"visible"},tne={width:0,overflowX:"visible"},nne={height:0,overflowY:"visible"},rne={},ine=t=>{var{width:e,height:n}=t,r=Tc(e),i=Tc(n);return r&&i?ene:r?tne:i?nne:rne};function sne(t){var{width:e,height:n,aspect:r}=t,i=e,o=n;return i===void 0&&o===void 0?(i=Vs.width,o=Vs.height):i===void 0?i=r&&r>0?void 0:Vs.width:o===void 0&&(o=r&&r>0?void 0:Vs.height),{width:i,height:o}}function zj(){return zj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zj.apply(null,arguments)}function RO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RO(Object(n),!0).forEach(function(r){ane(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ane(t,e,n){return(e=one(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function one(t){var e=lne(t,"string");return typeof e=="symbol"?e:e+""}function lne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B3=_.createContext(Vs.initialDimension);function cne(t){return ta(t.width)&&ta(t.height)}function $3(t){var{children:e,width:n,height:r}=t,i=_.useMemo(()=>({width:n,height:r}),[n,r]);return cne(i)?_.createElement(B3.Provider,{value:i},e):null}var nE=()=>_.useContext(B3),une=_.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=Vs.initialDimension,width:i,height:o,minWidth:c=Vs.minWidth,minHeight:u,maxHeight:h,children:f,debounce:p=Vs.debounce,id:g,className:y,onResize:x,style:N={}}=t,j=_.useRef(null),E=_.useRef();E.current=x,_.useImperativeHandle(e,()=>j.current);var[A,R]=_.useState({containerWidth:r.width,containerHeight:r.height}),T=_.useCallback((P,k)=>{R(q=>{var L=Math.round(P),z=Math.round(k);return q.containerWidth===L&&q.containerHeight===z?q:{containerWidth:L,containerHeight:z}})},[]);_.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Vc;var P=z=>{var V,ve=z[0];if(ve!=null){var{width:ee,height:H}=ve.contentRect;T(ee,H),(V=E.current)===null||V===void 0||V.call(E,ee,H)}};p>0&&(P=Zte(P,p,{trailing:!0,leading:!1}));var k=new ResizeObserver(P),{width:q,height:L}=j.current.getBoundingClientRect();return T(q,L),k.observe(j.current),()=>{k.disconnect()}},[T,p]);var{containerWidth:I,containerHeight:M}=A;Rv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:B,calculatedHeight:D}=V3(I,M,{width:i,height:o,aspect:n,maxHeight:h});return Rv(B!=null&&B>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,D,i,o,c,u,n),_.createElement("div",{id:g?"".concat(g):void 0,className:Ut("recharts-responsive-container",y),style:kO(kO({},N),{},{width:i,height:o,minWidth:c,minHeight:u,maxHeight:h}),ref:j},_.createElement("div",{style:ine({width:i,height:o})},_.createElement($3,{width:B,height:D},f)))}),DO=_.forwardRef((t,e)=>{var n=nE();if(ta(n.width)&&ta(n.height))return t.children;var{width:r,height:i}=sne({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:o,calculatedHeight:c}=V3(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return ke(o)&&ke(c)?_.createElement($3,{width:o,height:c},t.children):_.createElement(une,zj({},t,{width:r,height:i,ref:e}))});function rE(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var s0=()=>{var t,e=Sr(),n=Le(Gte),r=Le(i0),i=(t=Le(r0))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},dne={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},F3=()=>{var t;return(t=Le(tr))!==null&&t!==void 0?t:dne},H3=()=>Le(eo),G3=()=>Le(to),Ot=t=>t.layout.layoutType,Bc=()=>Le(Ot),K3=()=>{var t=Bc();if(t==="horizontal"||t==="vertical")return t},Q3=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},hne=()=>{var t=Bc();return t!==void 0},ym=t=>{var e=En(),n=Sr(),{width:r,height:i}=t,o=nE(),c=r,u=i;return o&&(c=o.width>0?o.width:r,u=o.height>0?o.height:i),_.useEffect(()=>{!n&&ta(c)&&ta(u)&&e(gte({width:c,height:u}))},[e,n,c,u]),null},W3=Symbol.for("immer-nothing"),MO=Symbol.for("immer-draftable"),bi=Symbol.for("immer-state");function as(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Lf=Object.getPrototypeOf;function vd(t){return!!t&&!!t[bi]}function Ic(t){return t?Y3(t)||Array.isArray(t)||!!t[MO]||!!t.constructor?.[MO]||bm(t)||o0(t):!1}var fne=Object.prototype.constructor.toString(),zO=new WeakMap;function Y3(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=zO.get(n);return r===void 0&&(r=Function.toString.call(n),zO.set(n,r)),r===fne}function kv(t,e,n=!0){a0(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function a0(t){const e=t[bi];return e?e.type_:Array.isArray(t)?1:bm(t)?2:o0(t)?3:0}function Lj(t,e){return a0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function X3(t,e,n){const r=a0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function mne(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bm(t){return t instanceof Map}function o0(t){return t instanceof Set}function ic(t){return t.copy_||t.base_}function qj(t,e){if(bm(t))return new Map(t);if(o0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Y3(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[bi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const c=i[o],u=r[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(Lf(t),r)}else{const r=Lf(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function iE(t,e=!1){return l0(t)||vd(t)||!Ic(t)||(a0(t)>1&&Object.defineProperties(t,{set:yg,add:yg,clear:yg,delete:yg}),Object.freeze(t),e&&Object.values(t).forEach(n=>iE(n,!0))),t}function pne(){as(2)}var yg={value:pne};function l0(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var gne={};function Pc(t){const e=gne[t];return e||as(0,t),e}var qf;function J3(){return qf}function vne(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LO(t,e){e&&(Pc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Uj(t){Vj(t),t.drafts_.forEach(yne),t.drafts_=null}function Vj(t){t===qf&&(qf=t.parent_)}function qO(t){return qf=vne(qf,t)}function yne(t){const e=t[bi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function UO(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[bi].modified_&&(Uj(e),as(4)),Ic(t)&&(t=Dv(e,t),e.parent_||Mv(e,t)),e.patches_&&Pc("Patches").generateReplacementPatches_(n[bi].base_,t,e.patches_,e.inversePatches_)):t=Dv(e,n,[]),Uj(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==W3?t:void 0}function Dv(t,e,n){if(l0(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[bi];if(!i)return kv(e,(o,c)=>VO(t,i,e,o,c,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Mv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let c=o,u=!1;i.type_===3&&(c=new Set(o),o.clear(),u=!0),kv(c,(h,f)=>VO(t,i,o,h,f,n,u),r),Mv(t,o,!1),n&&t.patches_&&Pc("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function VO(t,e,n,r,i,o,c){if(i==null||typeof i!="object"&&!c)return;const u=l0(i);if(!(u&&!c)){if(vd(i)){const h=o&&e&&e.type_!==3&&!Lj(e.assigned_,r)?o.concat(r):void 0,f=Dv(t,i,h);if(X3(n,r,f),vd(f))t.canAutoFreeze_=!1;else return}else c&&n.add(i);if(Ic(i)&&!u){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&u)return;Dv(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(bm(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Mv(t,i)}}}function Mv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&iE(e,n)}function bne(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:J3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=sE;n&&(i=[r],o=Uf);const{revoke:c,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=c,u}var sE={get(t,e){if(e===bi)return t;const n=ic(t);if(!Lj(n,e))return xne(t,n,e);const r=n[e];return t.finalized_||!Ic(r)?r:r===o1(t.base_,e)?(l1(t),t.copy_[e]=$j(r,t)):r},has(t,e){return e in ic(t)},ownKeys(t){return Reflect.ownKeys(ic(t))},set(t,e,n){const r=Z3(ic(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=o1(ic(t),e),o=i?.[bi];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(mne(n,i)&&(n!==void 0||Lj(t.base_,e)))return!0;l1(t),Bj(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return o1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,l1(t),Bj(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ic(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){as(11)},getPrototypeOf(t){return Lf(t.base_)},setPrototypeOf(){as(12)}},Uf={};kv(sE,(t,e)=>{Uf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Uf.deleteProperty=function(t,e){return Uf.set.call(this,t,e,void 0)};Uf.set=function(t,e,n){return sE.set.call(this,t[0],e,n,t[0])};function o1(t,e){const n=t[bi];return(n?ic(n):t)[e]}function xne(t,e,n){const r=Z3(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function Z3(t,e){if(!(e in t))return;let n=Lf(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Lf(n)}}function Bj(t){t.modified_||(t.modified_=!0,t.parent_&&Bj(t.parent_))}function l1(t){t.copy_||(t.copy_=qj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var _ne=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const c=this;return function(h=o,...f){return c.produce(h,p=>n.call(this,p,...f))}}typeof n!="function"&&as(6),r!==void 0&&typeof r!="function"&&as(7);let i;if(Ic(e)){const o=qO(this),c=$j(e,void 0);let u=!0;try{i=n(c),u=!1}finally{u?Uj(o):Vj(o)}return LO(o,r),UO(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===W3&&(i=void 0),this.autoFreeze_&&iE(i,!0),r){const o=[],c=[];Pc("Patches").generateReplacementPatches_(e,i,o,c),r(o,c)}return i}else as(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...u)=>this.produceWithPatches(c,h=>e(h,...u));let r,i;return[this.produce(e,n,(c,u)=>{r=c,i=u}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ic(t)||as(8),vd(t)&&(t=jne(t));const e=qO(this),n=$j(t,void 0);return n[bi].isManual_=!0,Vj(e),n}finishDraft(t,e){const n=t&&t[bi];(!n||!n.isManual_)&&as(9);const{scope_:r}=n;return LO(r,e),UO(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Pc("Patches").applyPatches_;return vd(t)?r(t,e):this.produce(t,i=>r(i,e))}};function $j(t,e){const n=bm(t)?Pc("MapSet").proxyMap_(t,e):o0(t)?Pc("MapSet").proxySet_(t,e):bne(t,e);return(e?e.scope_:J3()).drafts_.push(n),n}function jne(t){return vd(t)||as(10,t),e5(t)}function e5(t){if(!Ic(t)||l0(t))return t;const e=t[bi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=qj(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=qj(t,!0);return kv(n,(i,o)=>{X3(n,i,e5(o))},r),e&&(e.finalized_=!1),n}var wne=new _ne;wne.produce;var Nne={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},t5=ti({name:"legend",initialState:Nne,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Zt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ds(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Zt()},removeLegendPayload:{reducer(t,e){var n=ds(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Zt()}}}),{setLegendSize:Xve,setLegendSettings:Jve,addLegendPayload:Ene,replaceLegendPayload:Sne,removeLegendPayload:Ane}=t5.actions,Tne=t5.reducer;function Fj(){return Fj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fj.apply(null,arguments)}function BO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BO(Object(n),!0).forEach(function(r){Cne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cne(t,e,n){return(e=Ine(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ine(t){var e=Pne(t,"string");return typeof e=="symbol"?e:e+""}function Pne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function One(t){return Array.isArray(t)&&ea(t[0])&&ea(t[1])?t.join(" ~ "):t}var Mu={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Rne=t=>{var{separator:e=Mu.separator,contentStyle:n,itemStyle:r,labelStyle:i=Mu.labelStyle,payload:o,formatter:c,itemSorter:u,wrapperClassName:h,labelClassName:f,label:p,labelFormatter:g,accessibilityLayer:y=Mu.accessibilityLayer}=t,x=()=>{if(o&&o.length){var M={padding:0,margin:0},B=(u?Fy(o,u):o).map((D,P)=>{if(D.type==="none")return null;var k=D.formatter||c||One,{value:q,name:L}=D,z=q,V=L;if(k){var ve=k(q,L,D,P,o);if(Array.isArray(ve))[z,V]=ve;else if(ve!=null)z=ve;else return null}var ee=$h($h({},Mu.itemStyle),{},{color:D.color||Mu.itemStyle.color},r);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:ee},ea(V)?_.createElement("span",{className:"recharts-tooltip-item-name"},V):null,ea(V)?_.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,_.createElement("span",{className:"recharts-tooltip-item-value"},z),_.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:M},B)}return null},N=$h($h({},Mu.contentStyle),n),j=$h({margin:0},i),E=!an(p),A=E?p:"",R=Ut("recharts-default-tooltip",h),T=Ut("recharts-tooltip-label",f);E&&g&&o!==void 0&&o!==null&&(A=g(p,o));var I=y?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",Fj({className:R,style:N},I),_.createElement("p",{className:T,style:j},_.isValidElement(A)?A:"".concat(A)),x())},Fh="recharts-tooltip-wrapper",kne={visibility:"hidden"};function Dne(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ut(Fh,{["".concat(Fh,"-right")]:ke(n)&&e&&ke(e.x)&&n>=e.x,["".concat(Fh,"-left")]:ke(n)&&e&&ke(e.x)&&n<e.x,["".concat(Fh,"-bottom")]:ke(r)&&e&&ke(e.y)&&r>=e.y,["".concat(Fh,"-top")]:ke(r)&&e&&ke(e.y)&&r<e.y})}function $O(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:o,reverseDirection:c,tooltipDimension:u,viewBox:h,viewBoxDimension:f}=t;if(o&&ke(o[r]))return o[r];var p=n[r]-u-(i>0?i:0),g=n[r]+i;if(e[r])return c[r]?p:g;var y=h[r];if(y==null)return 0;if(c[r]){var x=p,N=y;return x<N?Math.max(g,y):Math.max(p,y)}if(f==null)return 0;var j=g+u,E=y+f;return j>E?Math.max(p,y):Math.max(g,y)}function Mne(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function zne(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:o,reverseDirection:c,tooltipBox:u,useTranslate3d:h,viewBox:f}=t,p,g,y;return u.height>0&&u.width>0&&n?(g=$O({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:o,reverseDirection:c,tooltipDimension:u.width,viewBox:f,viewBoxDimension:f.width}),y=$O({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:o,reverseDirection:c,tooltipDimension:u.height,viewBox:f,viewBoxDimension:f.height}),p=Mne({translateX:g,translateY:y,useTranslate3d:h})):p=kne,{cssProperties:p,cssClasses:Dne({translateX:g,translateY:y,coordinate:n})}}function FO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FO(Object(n),!0).forEach(function(r){Hj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hj(t,e,n){return(e=Lne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lne(t){var e=qne(t,"string");return typeof e=="symbol"?e:e+""}function qne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Une extends _.PureComponent{constructor(){super(...arguments),Hj(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Hj(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:c,hasPayload:u,isAnimationActive:h,offset:f,position:p,reverseDirection:g,useTranslate3d:y,viewBox:x,wrapperStyle:N,lastBoundingBox:j,innerRef:E,hasPortalFromProps:A}=this.props,R=typeof f=="number"?f:f.x,T=typeof f=="number"?f:f.y,{cssClasses:I,cssProperties:M}=zne({allowEscapeViewBox:n,coordinate:c,offsetLeft:R,offsetTop:T,position:p,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:x}),B=A?{}:bg(bg({transition:h&&e?"transform ".concat(r,"ms ").concat(i):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=bg(bg({},B),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},N);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:I,style:D,ref:E},o)}}var n5=()=>{var t;return(t=Le(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Gj(){return Gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gj.apply(null,arguments)}function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){Vne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vne(t,e,n){return(e=Bne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bne(t){var e=$ne(t,"string");return typeof e=="symbol"?e:e+""}function $ne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KO={curveBasisClosed:BJ,curveBasisOpen:$J,curveBasis:VJ,curveBumpX:AJ,curveBumpY:TJ,curveLinearClosed:FJ,curveLinear:By,curveMonotoneX:HJ,curveMonotoneY:GJ,curveNatural:KJ,curveStep:QJ,curveStepAfter:YJ,curveStepBefore:WJ},zv=t=>vt(t.x)&&vt(t.y),QO=t=>t.base!=null&&zv(t.base)&&zv(t),Hh=t=>t.x,Gh=t=>t.y,Fne=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(mm(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=KO["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return KO[n]||By},WO={connectNulls:!1,type:"linear"},Hne=t=>{var{type:e=WO.type,points:n=[],baseLine:r,layout:i,connectNulls:o=WO.connectNulls}=t,c=Fne(e,i),u=o?n.filter(zv):n;if(Array.isArray(r)){var h,f=n.map((N,j)=>GO(GO({},N),{},{base:r[j]}));i==="vertical"?h=dg().y(Gh).x1(Hh).x0(N=>N.base.x):h=dg().x(Hh).y1(Gh).y0(N=>N.base.y);var p=h.defined(QO).curve(c),g=o?f.filter(QO):f;return p(g)}var y;i==="vertical"&&ke(r)?y=dg().y(Gh).x1(Hh).x0(r):ke(r)?y=dg().x(Hh).y1(Gh).y0(r):y=RL().x(Hh).y(Gh);var x=y.defined(zv).curve(c);return x(u)},r5=t=>{var{className:e,points:n,path:r,pathRef:i}=t,o=Bc();if((!n||!n.length)&&!r)return null;var c={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||o,connectNulls:t.connectNulls},u=n&&n.length?Hne(c):r;return _.createElement("path",Gj({},ms(t),FN(t),{className:Ut("recharts-curve",e),d:u===null?void 0:u,ref:i}))},Gne=["x","y","top","left","width","height","className"];function Kj(){return Kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kj.apply(null,arguments)}function YO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YO(Object(n),!0).forEach(function(r){Qne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qne(t,e,n){return(e=Wne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wne(t){var e=Yne(t,"string");return typeof e=="symbol"?e:e+""}function Yne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xne(t,e){if(t==null)return{};var n,r,i=Jne(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zne=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),ere=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:c=0,className:u}=t,h=Xne(t,Gne),f=Kne({x:e,y:n,top:r,left:i,width:o,height:c},h);return!ke(e)||!ke(n)||!ke(o)||!ke(c)||!ke(r)||!ke(i)?null:_.createElement("path",Kj({},kr(f),{className:Ut("recharts-cross",u),d:Zne(e,n,o,c,r,i)}))};function tre(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(r){nre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nre(t,e,n){return(e=rre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rre(t){var e=ire(t,"string");return typeof e=="symbol"?e:e+""}function ire(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sre=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),i5=(t,e,n)=>t.map(r=>"".concat(sre(r)," ").concat(e,"ms ").concat(n)).join(","),are=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Vf=(t,e)=>Object.keys(e).reduce((n,r)=>JO(JO({},n),{},{[r]:t(r,e[r])}),{});function ZO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(n),!0).forEach(function(r){ore(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ore(t,e,n){return(e=lre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lre(t){var e=cre(t,"string");return typeof e=="symbol"?e:e+""}function cre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lv=(t,e,n)=>t+(e-t)*n,Qj=t=>{var{from:e,to:n}=t;return e!==n},s5=(t,e,n)=>{var r=Vf((i,o)=>{if(Qj(o)){var[c,u]=t(o.from,o.to,o.velocity);return Bn(Bn({},o),{},{from:c,velocity:u})}return o},e);return n<1?Vf((i,o)=>Qj(o)&&r[i]!=null?Bn(Bn({},o),{},{velocity:Lv(o.velocity,r[i].velocity,n),from:Lv(o.from,r[i].from,n)}):o,e):s5(t,r,n-1)};function ure(t,e,n,r,i,o){var c,u=r.reduce((y,x)=>Bn(Bn({},y),{},{[x]:{from:t[x],velocity:0,to:e[x]}}),{}),h=()=>Vf((y,x)=>x.from,u),f=()=>!Object.values(u).filter(Qj).length,p=null,g=y=>{c||(c=y);var x=y-c,N=x/n.dt;u=s5(n,u,N),i(Bn(Bn(Bn({},t),e),h())),c=y,f()||(p=o.setTimeout(g))};return()=>(p=o.setTimeout(g),()=>{var y;(y=p)===null||y===void 0||y()})}function dre(t,e,n,r,i,o,c){var u=null,h=i.reduce((g,y)=>{var x=t[y],N=e[y];return x==null||N==null?g:Bn(Bn({},g),{},{[y]:[x,N]})},{}),f,p=g=>{f||(f=g);var y=(g-f)/r,x=Vf((j,E)=>Lv(...E,n(y)),h);if(o(Bn(Bn(Bn({},t),e),x)),y<1)u=c.setTimeout(p);else{var N=Vf((j,E)=>Lv(...E,n(1)),h);o(Bn(Bn(Bn({},t),e),N))}};return()=>(u=c.setTimeout(p),()=>{var g;(g=u)===null||g===void 0||g()})}const hre=(t,e,n,r,i,o)=>{var c=are(t,e);return n==null?()=>(i(Bn(Bn({},t),e)),()=>{}):n.isStepper===!0?ure(t,e,n,c,i,o):dre(t,e,n,r,c,i,o)};var qv=1e-4,a5=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],o5=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),eR=(t,e)=>n=>{var r=a5(t,e);return o5(r,n)},fre=(t,e)=>n=>{var r=a5(t,e),i=[...r.map((o,c)=>o*c).slice(1),0];return o5(i,n)},mre=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(o=>parseFloat(o));return[i[0],i[1],i[2],i[3]]},pre=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=mre(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},gre=(t,e,n,r)=>{var i=eR(t,n),o=eR(e,r),c=fre(t,n),u=f=>f>1?1:f<0?0:f,h=f=>{for(var p=f>1?1:f,g=p,y=0;y<8;++y){var x=i(g)-p,N=c(g);if(Math.abs(x-p)<qv||N<qv)return o(g);g=u(g-x/N)}return o(g)};return h.isStepper=!1,h},tR=function(){return gre(...pre(...arguments))},vre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(c,u,h)=>{var f=-(c-u)*n,p=h*r,g=h+(f-p)*i/1e3,y=h*i/1e3+c;return Math.abs(y-u)<qv&&Math.abs(g)<qv?[u,0]:[y,g]};return o.isStepper=!0,o.dt=i,o},yre=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tR(t);case"spring":return vre();default:if(t.split("(")[0]==="cubic-bezier")return tR(t)}return typeof t=="function"?t:null};function bre(t){var e,n=()=>null,r=!1,i=null,o=c=>{if(!r){if(Array.isArray(c)){if(!c.length)return;var u=c,[h,...f]=u;if(typeof h=="number"){i=t.setTimeout(o.bind(null,f),h);return}o(h),i=t.setTimeout(o.bind(null,f));return}typeof c=="string"&&(e=c,n(e)),typeof c=="object"&&(e=c,n(e)),typeof c=="function"&&c()}};return{stop:()=>{r=!0},start:c=>{r=!1,i&&(i(),i=null),o(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>t}}class xre{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=c=>{c-r>=n?e(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{i!=null&&cancelAnimationFrame(i)}}}function _re(){return bre(new xre)}var jre=_.createContext(_re);function wre(t,e){var n=_.useContext(jre);return _.useMemo(()=>e??n(t),[t,e,n])}var Nre=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),c0={isSsr:Nre()},Ere={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},nR={t:0},c1={t:1};function u0(t){var e=Mr(t,Ere),{isActive:n,canBegin:r,duration:i,easing:o,begin:c,onAnimationEnd:u,onAnimationStart:h,children:f}=e,p=n==="auto"?!c0.isSsr:n,g=wre(e.animationId,e.animationManager),[y,x]=_.useState(p?nR:c1),N=_.useRef(null);return _.useEffect(()=>{p||x(c1)},[p]),_.useEffect(()=>{if(!p||!r)return Vc;var j=hre(nR,c1,yre(o),i,x,g.getTimeoutController()),E=()=>{N.current=j()};return g.start([h,c,E,i,u]),()=>{g.stop(),N.current&&N.current(),u()}},[p,r,i,o,c,h,u,g]),f(y.t)}function d0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=_.useRef(kf(e)),r=_.useRef(t);return r.current!==t&&(n.current=kf(e),r.current=t),n.current}var Sre=["radius"],Are=["radius"],rR,iR,sR,aR,oR,lR,cR,uR,dR,hR;function fR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(n),!0).forEach(function(r){Tre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tre(t,e,n){return(e=Cre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cre(t){var e=Ire(t,"string");return typeof e=="symbol"?e:e+""}function Ire(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uv(){return Uv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uv.apply(null,arguments)}function pR(t,e){if(t==null)return{};var n,r,i=Pre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ds(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var gR=(t,e,n,r,i)=>{var o=el(n),c=el(r),u=Math.min(Math.abs(o)/2,Math.abs(c)/2),h=c>=0?1:-1,f=o>=0?1:-1,p=c>=0&&o>=0||c<0&&o<0?1:0,g;if(u>0&&Array.isArray(i)){for(var y=[0,0,0,0],x=0,N=4;x<N;x++){var j,E=(j=i[x])!==null&&j!==void 0?j:0;y[x]=E>u?u:E}g=mn(rR||(rR=Ds(["M",",",""])),t,e+h*y[0]),y[0]>0&&(g+=mn(iR||(iR=Ds(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,t+f*y[0],e)),g+=mn(sR||(sR=Ds(["L ",",",""])),t+n-f*y[1],e),y[1]>0&&(g+=mn(aR||(aR=Ds(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,t+n,e+h*y[1])),g+=mn(oR||(oR=Ds(["L ",",",""])),t+n,e+r-h*y[2]),y[2]>0&&(g+=mn(lR||(lR=Ds(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,t+n-f*y[2],e+r)),g+=mn(cR||(cR=Ds(["L ",",",""])),t+f*y[3],e+r),y[3]>0&&(g+=mn(uR||(uR=Ds(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,t,e+r-h*y[3])),g+="Z"}else if(u>0&&i===+i&&i>0){var A=Math.min(u,i);g=mn(dR||(dR=Ds(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+h*A,A,A,p,t+f*A,e,t+n-f*A,e,A,A,p,t+n,e+h*A,t+n,e+r-h*A,A,A,p,t+n-f*A,e+r,t+f*A,e+r,A,A,p,t,e+r-h*A)}else g=mn(hR||(hR=Ds(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return g},vR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},l5=t=>{var e=Mr(t,vR),n=_.useRef(null),[r,i]=_.useState(-1);_.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var se=n.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:o,y:c,width:u,height:h,radius:f,className:p}=e,{animationEasing:g,animationDuration:y,animationBegin:x,isAnimationActive:N,isUpdateAnimationActive:j}=e,E=_.useRef(u),A=_.useRef(h),R=_.useRef(o),T=_.useRef(c),I=_.useMemo(()=>({x:o,y:c,width:u,height:h,radius:f}),[o,c,u,h,f]),M=d0(I,"rectangle-");if(o!==+o||c!==+c||u!==+u||h!==+h||u===0||h===0)return null;var B=Ut("recharts-rectangle",p);if(!j){var D=kr(e),{radius:P}=D,k=pR(D,Sre);return _.createElement("path",Uv({},k,{x:el(o),y:el(c),width:el(u),height:el(h),radius:typeof f=="number"?f:void 0,className:B,d:gR(o,c,u,h,f)}))}var q=E.current,L=A.current,z=R.current,V=T.current,ve="0px ".concat(r===-1?1:r,"px"),ee="".concat(r,"px 0px"),H=i5(["strokeDasharray"],y,typeof g=="string"?g:vR.animationEasing);return _.createElement(u0,{animationId:M,key:M,canBegin:r>0,duration:y,easing:g,isActive:j,begin:x},se=>{var X=pn(q,u,se),we=pn(L,h,se),W=pn(z,o,se),F=pn(V,c,se);n.current&&(E.current=X,A.current=we,R.current=W,T.current=F);var re;N?se>0?re={transition:H,strokeDasharray:ee}:re={strokeDasharray:ve}:re={strokeDasharray:ee};var de=kr(e),{radius:ye}=de,he=pR(de,Are);return _.createElement("path",Uv({},he,{radius:typeof f=="number"?f:void 0,className:B,d:gR(W,F,X,we,f),ref:n,style:mR(mR({},re),e.style)}))})};function yR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yR(Object(n),!0).forEach(function(r){Ore(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ore(t,e,n){return(e=Rre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rre(t){var e=kre(t,"string");return typeof e=="symbol"?e:e+""}function kre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vv=Math.PI/180,Dre=t=>t*180/Math.PI,mr=(t,e,n,r)=>({x:t+Math.cos(-Vv*r)*n,y:e+Math.sin(-Vv*r)*n}),Mre=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},zre=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},Lre=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,c=zre({x:n,y:r},{x:i,y:o});if(c<=0)return{radius:c,angle:0};var u=(n-i)/c,h=Math.acos(u);return r>o&&(h=2*Math.PI-h),{radius:c,angle:Dre(h),angleInRadian:h}},qre=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},Ure=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),c=Math.min(i,o);return t+c*360},Vre=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:o}=Lre({x:n,y:r},e),{innerRadius:c,outerRadius:u}=e;if(i<c||i>u||i===0)return null;var{startAngle:h,endAngle:f}=qre(e),p=o,g;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}return g?bR(bR({},e),{},{radius:i,angle:Ure(p,e)}):null};function c5(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,c=mr(e,n,r,i),u=mr(e,n,r,o);return{points:[c,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}var xR,_R,jR,wR,NR,ER,SR;function Wj(){return Wj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wj.apply(null,arguments)}function oc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Bre=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},xg=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:c,cornerRadius:u,cornerIsExternal:h}=t,f=u*(c?1:-1)+r,p=Math.asin(u/f)/Vv,g=h?i:i+o*p,y=mr(e,n,f,g),x=mr(e,n,r,g),N=h?i-o*p:i,j=mr(e,n,f*Math.cos(p*Vv),N);return{center:y,circleTangency:x,lineTangency:j,theta:p}},u5=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:c}=t,u=Bre(o,c),h=o+u,f=mr(e,n,i,o),p=mr(e,n,i,h),g=mn(xR||(xR=oc(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,i,i,+(Math.abs(u)>180),+(o>h),p.x,p.y);if(r>0){var y=mr(e,n,r,o),x=mr(e,n,r,h);g+=mn(_R||(_R=oc(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,r,r,+(Math.abs(u)>180),+(o<=h),y.x,y.y)}else g+=mn(jR||(jR=oc(["L ",","," Z"])),e,n);return g},$re=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:f}=t,p=Xr(f-h),{circleTangency:g,lineTangency:y,theta:x}=xg({cx:e,cy:n,radius:i,angle:h,sign:p,cornerRadius:o,cornerIsExternal:u}),{circleTangency:N,lineTangency:j,theta:E}=xg({cx:e,cy:n,radius:i,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:u}),A=u?Math.abs(h-f):Math.abs(h-f)-x-E;if(A<0)return c?mn(wR||(wR=oc(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,o,o,o*2,o,o,-o*2):u5({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:h,endAngle:f});var R=mn(NR||(NR=oc(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,o,o,+(p<0),g.x,g.y,i,i,+(A>180),+(p<0),N.x,N.y,o,o,+(p<0),j.x,j.y);if(r>0){var{circleTangency:T,lineTangency:I,theta:M}=xg({cx:e,cy:n,radius:r,angle:h,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),{circleTangency:B,lineTangency:D,theta:P}=xg({cx:e,cy:n,radius:r,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),k=u?Math.abs(h-f):Math.abs(h-f)-M-P;if(k<0&&o===0)return"".concat(R,"L").concat(e,",").concat(n,"Z");R+=mn(ER||(ER=oc(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,o,o,+(p<0),B.x,B.y,r,r,+(k>180),+(p>0),T.x,T.y,o,o,+(p<0),I.x,I.y)}else R+=mn(SR||(SR=oc(["L",",","Z"])),e,n);return R},Fre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},d5=t=>{var e=Mr(t,Fre),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:h,startAngle:f,endAngle:p,className:g}=e;if(o<i||f===p)return null;var y=Ut("recharts-sector",g),x=o-i,N=ps(c,x,0,!0),j;return N>0&&Math.abs(f-p)<360?j=$re({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,x/2),forceCornerRadius:u,cornerIsExternal:h,startAngle:f,endAngle:p}):j=u5({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:f,endAngle:p}),_.createElement("path",Wj({},kr(e),{className:y,d:j}))};function Hre(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(WL(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:o,outerRadius:c,angle:u}=e,h=mr(r,i,o,u),f=mr(r,i,c,u);return[{x:h.x,y:h.y},{x:f.x,y:f.y}]}return c5(e)}}var u1={},d1={},h1={},AR;function Gre(){return AR||(AR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=s3();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(h1)),h1}var TR;function Kre(){return TR||(TR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gre();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(d1)),d1}var CR;function Qre(){return CR||(CR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a3(),n=Kre();function r(i,o,c){c&&typeof c!="number"&&e.isIterateeCall(i,o,c)&&(o=c=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),c=c===void 0?i<o?1:-1:n.toFinite(c);const u=Math.max(Math.ceil((o-i)/(c||1)),0),h=new Array(u);for(let f=0;f<u;f++)h[f]=i,i+=c;return h}t.range=r})(u1)),u1}var f1,IR;function Wre(){return IR||(IR=1,f1=Qre().range),f1}var Yre=Wre();const h5=ra(Yre);function al(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Xre(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aE(t){let e,n,r;t.length!==2?(e=al,n=(u,h)=>al(t(u),h),r=(u,h)=>t(u)-h):(e=t===al||t===Xre?t:Jre,n=t,r=t);function i(u,h,f=0,p=u.length){if(f<p){if(e(h,h)!==0)return p;do{const g=f+p>>>1;n(u[g],h)<0?f=g+1:p=g}while(f<p)}return f}function o(u,h,f=0,p=u.length){if(f<p){if(e(h,h)!==0)return p;do{const g=f+p>>>1;n(u[g],h)<=0?f=g+1:p=g}while(f<p)}return f}function c(u,h,f=0,p=u.length){const g=i(u,h,f,p-1);return g>f&&r(u[g-1],h)>-r(u[g],h)?g-1:g}return{left:i,center:c,right:o}}function Jre(){return 0}function f5(t){return t===null?NaN:+t}function*Zre(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const eie=aE(al),xm=eie.right;aE(f5).center;class PR extends Map{constructor(e,n=rie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(OR(this,e))}has(e){return super.has(OR(this,e))}set(e,n){return super.set(tie(this,e),n)}delete(e){return super.delete(nie(this,e))}}function OR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function tie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function nie({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function rie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function iie(t=al){if(t===al)return m5;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function m5(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const sie=Math.sqrt(50),aie=Math.sqrt(10),oie=Math.sqrt(2);function Bv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),c=o>=sie?10:o>=aie?5:o>=oie?2:1;let u,h,f;return i<0?(f=Math.pow(10,-i)/c,u=Math.round(t*f),h=Math.round(e*f),u/f<t&&++u,h/f>e&&--h,f=-f):(f=Math.pow(10,i)*c,u=Math.round(t/f),h=Math.round(e/f),u*f<t&&++u,h*f>e&&--h),h<u&&.5<=n&&n<2?Bv(t,e,n*2):[u,h,f]}function Yj(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,c]=r?Bv(e,t,n):Bv(t,e,n);if(!(o>=i))return[];const u=o-i+1,h=new Array(u);if(r)if(c<0)for(let f=0;f<u;++f)h[f]=(o-f)/-c;else for(let f=0;f<u;++f)h[f]=(o-f)*c;else if(c<0)for(let f=0;f<u;++f)h[f]=(i+f)/-c;else for(let f=0;f<u;++f)h[f]=(i+f)*c;return h}function Xj(t,e,n){return e=+e,t=+t,n=+n,Bv(t,e,n)[2]}function Jj(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Xj(e,t,n):Xj(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function RR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function kR(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function p5(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?m5:iie(i);r>n;){if(r-n>600){const h=r-n+1,f=e-n+1,p=Math.log(h),g=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*g*(h-g)/h)*(f-h/2<0?-1:1),x=Math.max(n,Math.floor(e-f*g/h+y)),N=Math.min(r,Math.floor(e+(h-f)*g/h+y));p5(t,e,x,N,i)}const o=t[e];let c=n,u=r;for(Kh(t,n,e),i(t[r],o)>0&&Kh(t,n,r);c<u;){for(Kh(t,c,u),++c,--u;i(t[c],o)<0;)++c;for(;i(t[u],o)>0;)--u}i(t[n],o)===0?Kh(t,n,u):(++u,Kh(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function Kh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function lie(t,e,n){if(t=Float64Array.from(Zre(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return kR(t);if(e>=1)return RR(t);var r,i=(r-1)*e,o=Math.floor(i),c=RR(p5(t,o).subarray(0,o+1)),u=kR(t.subarray(o+1));return c+(u-c)*(i-o)}}function cie(t,e,n=f5){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),c=+n(t[o],o,t),u=+n(t[o+1],o+1,t);return c+(u-c)*(i-o)}}function uie(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function $i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function no(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Zj=Symbol("implicit");function oE(){var t=new PR,e=[],n=[],r=Zj;function i(o){let c=t.get(o);if(c===void 0){if(r!==Zj)return r;t.set(o,c=e.push(o)-1)}return n[c%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new PR;for(const c of o)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return oE(e,n).unknown(r)},$i.apply(i,arguments),i}function lE(){var t=oE().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,c,u=!1,h=0,f=0,p=.5;delete t.unknown;function g(){var y=e().length,x=i<r,N=x?i:r,j=x?r:i;o=(j-N)/Math.max(1,y-h+f*2),u&&(o=Math.floor(o)),N+=(j-N-o*(y-h))*p,c=o*(1-h),u&&(N=Math.round(N),c=Math.round(c));var E=uie(y).map(function(A){return N+o*A});return n(x?E.reverse():E)}return t.domain=function(y){return arguments.length?(e(y),g()):e()},t.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},t.bandwidth=function(){return c},t.step=function(){return o},t.round=function(y){return arguments.length?(u=!!y,g()):u},t.padding=function(y){return arguments.length?(h=Math.min(1,f=+y),g()):h},t.paddingInner=function(y){return arguments.length?(h=Math.min(1,y),g()):h},t.paddingOuter=function(y){return arguments.length?(f=+y,g()):f},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},t.copy=function(){return lE(e(),[r,i]).round(u).paddingInner(h).paddingOuter(f).align(p)},$i.apply(g(),arguments)}function g5(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return g5(e())},t}function die(){return g5(lE.apply(null,arguments).paddingInner(1))}function cE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function v5(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _m(){}var Bf=.7,$v=1/Bf,rd="\\s*([+-]?\\d+)\\s*",$f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hie=/^#([0-9a-f]{3,8})$/,fie=new RegExp(`^rgb\\(${rd},${rd},${rd}\\)$`),mie=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),pie=new RegExp(`^rgba\\(${rd},${rd},${rd},${$f}\\)$`),gie=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${$f}\\)$`),vie=new RegExp(`^hsl\\(${$f},${Ws},${Ws}\\)$`),yie=new RegExp(`^hsla\\(${$f},${Ws},${Ws},${$f}\\)$`),DR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cE(_m,Ff,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:MR,formatHex:MR,formatHex8:bie,formatHsl:xie,formatRgb:zR,toString:zR});function MR(){return this.rgb().formatHex()}function bie(){return this.rgb().formatHex8()}function xie(){return y5(this).formatHsl()}function zR(){return this.rgb().formatRgb()}function Ff(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?LR(e):n===3?new Zr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_g(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_g(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fie.exec(t))?new Zr(e[1],e[2],e[3],1):(e=mie.exec(t))?new Zr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pie.exec(t))?_g(e[1],e[2],e[3],e[4]):(e=gie.exec(t))?_g(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vie.exec(t))?VR(e[1],e[2]/100,e[3]/100,1):(e=yie.exec(t))?VR(e[1],e[2]/100,e[3]/100,e[4]):DR.hasOwnProperty(t)?LR(DR[t]):t==="transparent"?new Zr(NaN,NaN,NaN,0):null}function LR(t){return new Zr(t>>16&255,t>>8&255,t&255,1)}function _g(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zr(t,e,n,r)}function _ie(t){return t instanceof _m||(t=Ff(t)),t?(t=t.rgb(),new Zr(t.r,t.g,t.b,t.opacity)):new Zr}function ew(t,e,n,r){return arguments.length===1?_ie(t):new Zr(t,e,n,r??1)}function Zr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}cE(Zr,ew,v5(_m,{brighter(t){return t=t==null?$v:Math.pow($v,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bf:Math.pow(Bf,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zr(vc(this.r),vc(this.g),vc(this.b),Fv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qR,formatHex:qR,formatHex8:jie,formatRgb:UR,toString:UR}));function qR(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}`}function jie(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}${lc((isNaN(this.opacity)?1:this.opacity)*255)}`}function UR(){const t=Fv(this.opacity);return`${t===1?"rgb(":"rgba("}${vc(this.r)}, ${vc(this.g)}, ${vc(this.b)}${t===1?")":`, ${t})`}`}function Fv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lc(t){return t=vc(t),(t<16?"0":"")+t.toString(16)}function VR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new os(t,e,n,r)}function y5(t){if(t instanceof os)return new os(t.h,t.s,t.l,t.opacity);if(t instanceof _m||(t=Ff(t)),!t)return new os;if(t instanceof os)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),c=NaN,u=o-i,h=(o+i)/2;return u?(e===o?c=(n-r)/u+(n<r)*6:n===o?c=(r-e)/u+2:c=(e-n)/u+4,u/=h<.5?o+i:2-o-i,c*=60):u=h>0&&h<1?0:c,new os(c,u,h,t.opacity)}function wie(t,e,n,r){return arguments.length===1?y5(t):new os(t,e,n,r??1)}function os(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}cE(os,wie,v5(_m,{brighter(t){return t=t==null?$v:Math.pow($v,t),new os(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bf:Math.pow(Bf,t),new os(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zr(m1(t>=240?t-240:t+120,i,r),m1(t,i,r),m1(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new os(BR(this.h),jg(this.s),jg(this.l),Fv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fv(this.opacity);return`${t===1?"hsl(":"hsla("}${BR(this.h)}, ${jg(this.s)*100}%, ${jg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function BR(t){return t=(t||0)%360,t<0?t+360:t}function jg(t){return Math.max(0,Math.min(1,t||0))}function m1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const uE=t=>()=>t;function Nie(t,e){return function(n){return t+n*e}}function Eie(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Sie(t){return(t=+t)==1?b5:function(e,n){return n-e?Eie(e,n,t):uE(isNaN(e)?n:e)}}function b5(t,e){var n=e-t;return n?Nie(t,n):uE(isNaN(t)?e:t)}const $R=(function t(e){var n=Sie(e);function r(i,o){var c=n((i=ew(i)).r,(o=ew(o)).r),u=n(i.g,o.g),h=n(i.b,o.b),f=b5(i.opacity,o.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=h(p),i.opacity=f(p),i+""}}return r.gamma=t,r})(1);function Aie(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Tie(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Cie(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),c;for(c=0;c<r;++c)i[c]=Id(t[c],e[c]);for(;c<n;++c)o[c]=e[c];return function(u){for(c=0;c<r;++c)o[c]=i[c](u);return o}}function Iie(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Hv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Pie(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Id(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var tw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p1=new RegExp(tw.source,"g");function Oie(t){return function(){return t}}function Rie(t){return function(e){return t(e)+""}}function kie(t,e){var n=tw.lastIndex=p1.lastIndex=0,r,i,o,c=-1,u=[],h=[];for(t=t+"",e=e+"";(r=tw.exec(t))&&(i=p1.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),u[c]?u[c]+=o:u[++c]=o),(r=r[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,h.push({i:c,x:Hv(r,i)})),n=p1.lastIndex;return n<e.length&&(o=e.slice(n),u[c]?u[c]+=o:u[++c]=o),u.length<2?h[0]?Rie(h[0].x):Oie(e):(e=h.length,function(f){for(var p=0,g;p<e;++p)u[(g=h[p]).i]=g.x(f);return u.join("")})}function Id(t,e){var n=typeof e,r;return e==null||n==="boolean"?uE(e):(n==="number"?Hv:n==="string"?(r=Ff(e))?(e=r,$R):kie:e instanceof Ff?$R:e instanceof Date?Iie:Tie(e)?Aie:Array.isArray(e)?Cie:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Pie:Hv)(t,e)}function dE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Die(t,e){e===void 0&&(e=t,t=Id);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(c){var u=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return o[u](c-u)}}function Mie(t){return function(){return t}}function Gv(t){return+t}var FR=[0,1];function Pr(t){return t}function nw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Mie(isNaN(e)?NaN:.5)}function zie(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Lie(t,e,n){var r=t[0],i=t[1],o=e[0],c=e[1];return i<r?(r=nw(i,r),o=n(c,o)):(r=nw(r,i),o=n(o,c)),function(u){return o(r(u))}}function qie(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=nw(t[c],t[c+1]),o[c]=n(e[c],e[c+1]);return function(u){var h=xm(t,u,1,r)-1;return o[h](i[h](u))}}function jm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function h0(){var t=FR,e=FR,n=Id,r,i,o,c=Pr,u,h,f;function p(){var y=Math.min(t.length,e.length);return c!==Pr&&(c=zie(t[0],t[y-1])),u=y>2?qie:Lie,h=f=null,g}function g(y){return y==null||isNaN(y=+y)?o:(h||(h=u(t.map(r),e,n)))(r(c(y)))}return g.invert=function(y){return c(i((f||(f=u(e,t.map(r),Hv)))(y)))},g.domain=function(y){return arguments.length?(t=Array.from(y,Gv),p()):t.slice()},g.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},g.rangeRound=function(y){return e=Array.from(y),n=dE,p()},g.clamp=function(y){return arguments.length?(c=y?!0:Pr,p()):c!==Pr},g.interpolate=function(y){return arguments.length?(n=y,p()):n},g.unknown=function(y){return arguments.length?(o=y,g):o},function(y,x){return r=y,i=x,p()}}function hE(){return h0()(Pr,Pr)}function Uie(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Kv(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function yd(t){return t=Kv(Math.abs(t)),t?t[1]:NaN}function Vie(t,e){return function(n,r){for(var i=n.length,o=[],c=0,u=t[0],h=0;i>0&&u>0&&(h+u+1>r&&(u=Math.max(1,r-h)),o.push(n.substring(i-=u,i+u)),!((h+=u+1)>r));)u=t[c=(c+1)%t.length];return o.reverse().join(e)}}function Bie(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var $ie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hf(t){if(!(e=$ie.exec(t)))throw new Error("invalid format: "+t);var e;return new fE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Hf.prototype=fE.prototype;function fE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fie(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Qv;function Hie(t,e){var n=Kv(t,e);if(!n)return Qv=void 0,t.toPrecision(e);var r=n[0],i=n[1],o=i-(Qv=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return o===c?r:o>c?r+new Array(o-c+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Kv(t,Math.max(0,e+o-1))[0]}function HR(t,e){var n=Kv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const GR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Uie,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>HR(t*100,e),r:HR,s:Hie,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function KR(t){return t}var QR=Array.prototype.map,WR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Gie(t){var e=t.grouping===void 0||t.thousands===void 0?KR:Vie(QR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?KR:Bie(QR.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",h=t.nan===void 0?"NaN":t.nan+"";function f(g,y){g=Hf(g);var x=g.fill,N=g.align,j=g.sign,E=g.symbol,A=g.zero,R=g.width,T=g.comma,I=g.precision,M=g.trim,B=g.type;B==="n"?(T=!0,B="g"):GR[B]||(I===void 0&&(I=12),M=!0,B="g"),(A||x==="0"&&N==="=")&&(A=!0,x="0",N="=");var D=(y&&y.prefix!==void 0?y.prefix:"")+(E==="$"?n:E==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():""),P=(E==="$"?r:/[%p]/.test(B)?c:"")+(y&&y.suffix!==void 0?y.suffix:""),k=GR[B],q=/[defgprs%]/.test(B);I=I===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function L(z){var V=D,ve=P,ee,H,se;if(B==="c")ve=k(z)+ve,z="";else{z=+z;var X=z<0||1/z<0;if(z=isNaN(z)?h:k(Math.abs(z),I),M&&(z=Fie(z)),X&&+z==0&&j!=="+"&&(X=!1),V=(X?j==="("?j:u:j==="-"||j==="("?"":j)+V,ve=(B==="s"&&!isNaN(z)&&Qv!==void 0?WR[8+Qv/3]:"")+ve+(X&&j==="("?")":""),q){for(ee=-1,H=z.length;++ee<H;)if(se=z.charCodeAt(ee),48>se||se>57){ve=(se===46?i+z.slice(ee+1):z.slice(ee))+ve,z=z.slice(0,ee);break}}}T&&!A&&(z=e(z,1/0));var we=V.length+z.length+ve.length,W=we<R?new Array(R-we+1).join(x):"";switch(T&&A&&(z=e(W+z,W.length?R-ve.length:1/0),W=""),N){case"<":z=V+z+ve+W;break;case"=":z=V+W+z+ve;break;case"^":z=W.slice(0,we=W.length>>1)+V+z+ve+W.slice(we);break;default:z=W+V+z+ve;break}return o(z)}return L.toString=function(){return g+""},L}function p(g,y){var x=Math.max(-8,Math.min(8,Math.floor(yd(y)/3)))*3,N=Math.pow(10,-x),j=f((g=Hf(g),g.type="f",g),{suffix:WR[8+x/3]});return function(E){return j(N*E)}}return{format:f,formatPrefix:p}}var wg,mE,x5;Kie({thousands:",",grouping:[3],currency:["$",""]});function Kie(t){return wg=Gie(t),mE=wg.format,x5=wg.formatPrefix,wg}function Qie(t){return Math.max(0,-yd(Math.abs(t)))}function Wie(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yd(e)/3)))*3-yd(Math.abs(t)))}function Yie(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yd(e)-yd(t))+1}function _5(t,e,n,r){var i=Jj(t,e,n),o;switch(r=Hf(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Wie(i,c))&&(r.precision=o),x5(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Yie(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Qie(i))&&(r.precision=o-(r.type==="%")*2);break}}return mE(r)}function Nl(t){var e=t.domain;return t.ticks=function(n){var r=e();return Yj(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return _5(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,c=r[i],u=r[o],h,f,p=10;for(u<c&&(f=c,c=u,u=f,f=i,i=o,o=f);p-- >0;){if(f=Xj(c,u,n),f===h)return r[i]=c,r[o]=u,e(r);if(f>0)c=Math.floor(c/f)*f,u=Math.ceil(u/f)*f;else if(f<0)c=Math.ceil(c*f)/f,u=Math.floor(u*f)/f;else break;h=f}return t},t}function j5(){var t=hE();return t.copy=function(){return jm(t,j5())},$i.apply(t,arguments),Nl(t)}function w5(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Gv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return w5(t).unknown(e)},t=arguments.length?Array.from(t,Gv):[0,1],Nl(n)}function N5(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],c;return o<i&&(c=n,n=r,r=c,c=i,i=o,o=c),t[n]=e.floor(i),t[r]=e.ceil(o),t}function YR(t){return Math.log(t)}function XR(t){return Math.exp(t)}function Xie(t){return-Math.log(-t)}function Jie(t){return-Math.exp(-t)}function Zie(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ese(t){return t===10?Zie:t===Math.E?Math.exp:e=>Math.pow(t,e)}function tse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function JR(t){return(e,n)=>-t(-e,n)}function pE(t){const e=t(YR,XR),n=e.domain;let r=10,i,o;function c(){return i=tse(r),o=ese(r),n()[0]<0?(i=JR(i),o=JR(o),t(Xie,Jie)):t(YR,XR),e}return e.base=function(u){return arguments.length?(r=+u,c()):r},e.domain=function(u){return arguments.length?(n(u),c()):n()},e.ticks=u=>{const h=n();let f=h[0],p=h[h.length-1];const g=p<f;g&&([f,p]=[p,f]);let y=i(f),x=i(p),N,j;const E=u==null?10:+u;let A=[];if(!(r%1)&&x-y<E){if(y=Math.floor(y),x=Math.ceil(x),f>0){for(;y<=x;++y)for(N=1;N<r;++N)if(j=y<0?N/o(-y):N*o(y),!(j<f)){if(j>p)break;A.push(j)}}else for(;y<=x;++y)for(N=r-1;N>=1;--N)if(j=y>0?N/o(-y):N*o(y),!(j<f)){if(j>p)break;A.push(j)}A.length*2<E&&(A=Yj(f,p,E))}else A=Yj(y,x,Math.min(x-y,E)).map(o);return g?A.reverse():A},e.tickFormat=(u,h)=>{if(u==null&&(u=10),h==null&&(h=r===10?"s":","),typeof h!="function"&&(!(r%1)&&(h=Hf(h)).precision==null&&(h.trim=!0),h=mE(h)),u===1/0)return h;const f=Math.max(1,r*u/e.ticks().length);return p=>{let g=p/o(Math.round(i(p)));return g*r<r-.5&&(g*=r),g<=f?h(p):""}},e.nice=()=>n(N5(n(),{floor:u=>o(Math.floor(i(u))),ceil:u=>o(Math.ceil(i(u)))})),e}function E5(){const t=pE(h0()).domain([1,10]);return t.copy=()=>jm(t,E5()).base(t.base()),$i.apply(t,arguments),t}function ZR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ek(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gE(t){var e=1,n=t(ZR(e),ek(e));return n.constant=function(r){return arguments.length?t(ZR(e=+r),ek(e)):e},Nl(n)}function S5(){var t=gE(h0());return t.copy=function(){return jm(t,S5()).constant(t.constant())},$i.apply(t,arguments)}function tk(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function nse(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function rse(t){return t<0?-t*t:t*t}function vE(t){var e=t(Pr,Pr),n=1;function r(){return n===1?t(Pr,Pr):n===.5?t(nse,rse):t(tk(n),tk(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Nl(e)}function yE(){var t=vE(h0());return t.copy=function(){return jm(t,yE()).exponent(t.exponent())},$i.apply(t,arguments),t}function ise(){return yE.apply(null,arguments).exponent(.5)}function nk(t){return Math.sign(t)*t*t}function sse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function A5(){var t=hE(),e=[0,1],n=!1,r;function i(o){var c=sse(t(o));return isNaN(c)?r:n?Math.round(c):c}return i.invert=function(o){return t.invert(nk(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Gv)).map(nk)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return A5(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$i.apply(i,arguments),Nl(i)}function T5(){var t=[],e=[],n=[],r;function i(){var c=0,u=Math.max(1,e.length);for(n=new Array(u-1);++c<u;)n[c-1]=cie(t,c/u);return o}function o(c){return c==null||isNaN(c=+c)?r:e[xm(n,c)]}return o.invertExtent=function(c){var u=e.indexOf(c);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},o.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let u of c)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(al),i()},o.range=function(c){return arguments.length?(e=Array.from(c),i()):e.slice()},o.unknown=function(c){return arguments.length?(r=c,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return T5().domain(t).range(e).unknown(r)},$i.apply(o,arguments)}function C5(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function c(h){return h!=null&&h<=h?i[xm(r,h,0,n)]:o}function u(){var h=-1;for(r=new Array(n);++h<n;)r[h]=((h+1)*e-(h-n)*t)/(n+1);return c}return c.domain=function(h){return arguments.length?([t,e]=h,t=+t,e=+e,u()):[t,e]},c.range=function(h){return arguments.length?(n=(i=Array.from(h)).length-1,u()):i.slice()},c.invertExtent=function(h){var f=i.indexOf(h);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},c.unknown=function(h){return arguments.length&&(o=h),c},c.thresholds=function(){return r.slice()},c.copy=function(){return C5().domain([t,e]).range(i).unknown(o)},$i.apply(Nl(c),arguments)}function I5(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[xm(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var c=e.indexOf(o);return[t[c-1],t[c]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return I5().domain(t).range(e).unknown(n)},$i.apply(i,arguments)}const g1=new Date,v1=new Date;function Fn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const c=i(o),u=i.ceil(o);return o-c<u-o?c:u},i.offset=(o,c)=>(e(o=new Date(+o),c==null?1:Math.floor(c)),o),i.range=(o,c,u)=>{const h=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<c)||!(u>0))return h;let f;do h.push(f=new Date(+o)),e(o,u),t(o);while(f<o&&o<c);return h},i.filter=o=>Fn(c=>{if(c>=c)for(;t(c),!o(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;e(c,-1),!o(c););else for(;--u>=0;)for(;e(c,1),!o(c););}),n&&(i.count=(o,c)=>(g1.setTime(+o),v1.setTime(+c),t(g1),t(v1),Math.floor(n(g1,v1))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?c=>r(c)%o===0:c=>i.count(0,c)%o===0):i)),i}const Wv=Fn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Wv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Fn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Wv);Wv.range;const Pa=1e3,qi=Pa*60,Oa=qi*60,Fa=Oa*24,bE=Fa*7,rk=Fa*30,y1=Fa*365,cc=Fn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Pa)},(t,e)=>(e-t)/Pa,t=>t.getUTCSeconds());cc.range;const xE=Fn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pa)},(t,e)=>{t.setTime(+t+e*qi)},(t,e)=>(e-t)/qi,t=>t.getMinutes());xE.range;const _E=Fn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*qi)},(t,e)=>(e-t)/qi,t=>t.getUTCMinutes());_E.range;const jE=Fn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pa-t.getMinutes()*qi)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getHours());jE.range;const wE=Fn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getUTCHours());wE.range;const wm=Fn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qi)/Fa,t=>t.getDate()-1);wm.range;const f0=Fn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>t.getUTCDate()-1);f0.range;const P5=Fn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>Math.floor(t/Fa));P5.range;function $c(t){return Fn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*qi)/bE)}const m0=$c(0),Yv=$c(1),ase=$c(2),ose=$c(3),bd=$c(4),lse=$c(5),cse=$c(6);m0.range;Yv.range;ase.range;ose.range;bd.range;lse.range;cse.range;function Fc(t){return Fn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/bE)}const p0=Fc(0),Xv=Fc(1),use=Fc(2),dse=Fc(3),xd=Fc(4),hse=Fc(5),fse=Fc(6);p0.range;Xv.range;use.range;dse.range;xd.range;hse.range;fse.range;const NE=Fn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());NE.range;const EE=Fn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());EE.range;const Ha=Fn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ha.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ha.range;const Ga=Fn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ga.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ga.range;function O5(t,e,n,r,i,o){const c=[[cc,1,Pa],[cc,5,5*Pa],[cc,15,15*Pa],[cc,30,30*Pa],[o,1,qi],[o,5,5*qi],[o,15,15*qi],[o,30,30*qi],[i,1,Oa],[i,3,3*Oa],[i,6,6*Oa],[i,12,12*Oa],[r,1,Fa],[r,2,2*Fa],[n,1,bE],[e,1,rk],[e,3,3*rk],[t,1,y1]];function u(f,p,g){const y=p<f;y&&([f,p]=[p,f]);const x=g&&typeof g.range=="function"?g:h(f,p,g),N=x?x.range(f,+p+1):[];return y?N.reverse():N}function h(f,p,g){const y=Math.abs(p-f)/g,x=aE(([,,E])=>E).right(c,y);if(x===c.length)return t.every(Jj(f/y1,p/y1,g));if(x===0)return Wv.every(Math.max(Jj(f,p,g),1));const[N,j]=c[y/c[x-1][2]<c[x][2]/y?x-1:x];return N.every(j)}return[u,h]}const[mse,pse]=O5(Ga,EE,p0,P5,wE,_E),[gse,vse]=O5(Ha,NE,m0,wm,jE,xE);function b1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function x1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function yse(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,c=t.shortDays,u=t.months,h=t.shortMonths,f=Wh(i),p=Yh(i),g=Wh(o),y=Yh(o),x=Wh(c),N=Yh(c),j=Wh(u),E=Yh(u),A=Wh(h),R=Yh(h),T={a:se,A:X,b:we,B:W,c:null,d:ck,e:ck,f:Vse,g:Xse,G:Zse,H:Lse,I:qse,j:Use,L:R5,m:Bse,M:$se,p:F,q:re,Q:hk,s:fk,S:Fse,u:Hse,U:Gse,V:Kse,w:Qse,W:Wse,x:null,X:null,y:Yse,Y:Jse,Z:eae,"%":dk},I={a:de,A:ye,b:he,B:G,c:null,d:uk,e:uk,f:iae,g:mae,G:gae,H:tae,I:nae,j:rae,L:D5,m:sae,M:aae,p:ce,q:Ie,Q:hk,s:fk,S:oae,u:lae,U:cae,V:uae,w:dae,W:hae,x:null,X:null,y:fae,Y:pae,Z:vae,"%":dk},M={a:q,A:L,b:z,B:V,c:ve,d:ok,e:ok,f:kse,g:ak,G:sk,H:lk,I:lk,j:Ise,L:Rse,m:Cse,M:Pse,p:k,q:Tse,Q:Mse,s:zse,S:Ose,u:wse,U:Nse,V:Ese,w:jse,W:Sse,x:ee,X:H,y:ak,Y:sk,Z:Ase,"%":Dse};T.x=B(n,T),T.X=B(r,T),T.c=B(e,T),I.x=B(n,I),I.X=B(r,I),I.c=B(e,I);function B(ae,Z){return function(Q){var me=[],J=-1,Ae=0,Ke=ae.length,Je,ot,on;for(Q instanceof Date||(Q=new Date(+Q));++J<Ke;)ae.charCodeAt(J)===37&&(me.push(ae.slice(Ae,J)),(ot=ik[Je=ae.charAt(++J)])!=null?Je=ae.charAt(++J):ot=Je==="e"?" ":"0",(on=Z[Je])&&(Je=on(Q,ot)),me.push(Je),Ae=J+1);return me.push(ae.slice(Ae,J)),me.join("")}}function D(ae,Z){return function(Q){var me=Qh(1900,void 0,1),J=P(me,ae,Q+="",0),Ae,Ke;if(J!=Q.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Z&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Ae=x1(Qh(me.y,0,1)),Ke=Ae.getUTCDay(),Ae=Ke>4||Ke===0?Xv.ceil(Ae):Xv(Ae),Ae=f0.offset(Ae,(me.V-1)*7),me.y=Ae.getUTCFullYear(),me.m=Ae.getUTCMonth(),me.d=Ae.getUTCDate()+(me.w+6)%7):(Ae=b1(Qh(me.y,0,1)),Ke=Ae.getDay(),Ae=Ke>4||Ke===0?Yv.ceil(Ae):Yv(Ae),Ae=wm.offset(Ae,(me.V-1)*7),me.y=Ae.getFullYear(),me.m=Ae.getMonth(),me.d=Ae.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),Ke="Z"in me?x1(Qh(me.y,0,1)).getUTCDay():b1(Qh(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(Ke+5)%7:me.w+me.U*7-(Ke+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,x1(me)):b1(me)}}function P(ae,Z,Q,me){for(var J=0,Ae=Z.length,Ke=Q.length,Je,ot;J<Ae;){if(me>=Ke)return-1;if(Je=Z.charCodeAt(J++),Je===37){if(Je=Z.charAt(J++),ot=M[Je in ik?Z.charAt(J++):Je],!ot||(me=ot(ae,Q,me))<0)return-1}else if(Je!=Q.charCodeAt(me++))return-1}return me}function k(ae,Z,Q){var me=f.exec(Z.slice(Q));return me?(ae.p=p.get(me[0].toLowerCase()),Q+me[0].length):-1}function q(ae,Z,Q){var me=x.exec(Z.slice(Q));return me?(ae.w=N.get(me[0].toLowerCase()),Q+me[0].length):-1}function L(ae,Z,Q){var me=g.exec(Z.slice(Q));return me?(ae.w=y.get(me[0].toLowerCase()),Q+me[0].length):-1}function z(ae,Z,Q){var me=A.exec(Z.slice(Q));return me?(ae.m=R.get(me[0].toLowerCase()),Q+me[0].length):-1}function V(ae,Z,Q){var me=j.exec(Z.slice(Q));return me?(ae.m=E.get(me[0].toLowerCase()),Q+me[0].length):-1}function ve(ae,Z,Q){return P(ae,e,Z,Q)}function ee(ae,Z,Q){return P(ae,n,Z,Q)}function H(ae,Z,Q){return P(ae,r,Z,Q)}function se(ae){return c[ae.getDay()]}function X(ae){return o[ae.getDay()]}function we(ae){return h[ae.getMonth()]}function W(ae){return u[ae.getMonth()]}function F(ae){return i[+(ae.getHours()>=12)]}function re(ae){return 1+~~(ae.getMonth()/3)}function de(ae){return c[ae.getUTCDay()]}function ye(ae){return o[ae.getUTCDay()]}function he(ae){return h[ae.getUTCMonth()]}function G(ae){return u[ae.getUTCMonth()]}function ce(ae){return i[+(ae.getUTCHours()>=12)]}function Ie(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var Z=B(ae+="",T);return Z.toString=function(){return ae},Z},parse:function(ae){var Z=D(ae+="",!1);return Z.toString=function(){return ae},Z},utcFormat:function(ae){var Z=B(ae+="",I);return Z.toString=function(){return ae},Z},utcParse:function(ae){var Z=D(ae+="",!0);return Z.toString=function(){return ae},Z}}}var ik={"-":"",_:" ",0:"0"},nr=/^\s*\d+/,bse=/^%/,xse=/[\\^$*+?|[\]().{}]/g;function wt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function _se(t){return t.replace(xse,"\\$&")}function Wh(t){return new RegExp("^(?:"+t.map(_se).join("|")+")","i")}function Yh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function jse(t,e,n){var r=nr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function wse(t,e,n){var r=nr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Nse(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ese(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Sse(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sk(t,e,n){var r=nr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ak(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ase(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Tse(t,e,n){var r=nr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Cse(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ok(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ise(t,e,n){var r=nr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function lk(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Pse(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ose(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Rse(t,e,n){var r=nr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function kse(t,e,n){var r=nr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Dse(t,e,n){var r=bse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Mse(t,e,n){var r=nr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function zse(t,e,n){var r=nr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ck(t,e){return wt(t.getDate(),e,2)}function Lse(t,e){return wt(t.getHours(),e,2)}function qse(t,e){return wt(t.getHours()%12||12,e,2)}function Use(t,e){return wt(1+wm.count(Ha(t),t),e,3)}function R5(t,e){return wt(t.getMilliseconds(),e,3)}function Vse(t,e){return R5(t,e)+"000"}function Bse(t,e){return wt(t.getMonth()+1,e,2)}function $se(t,e){return wt(t.getMinutes(),e,2)}function Fse(t,e){return wt(t.getSeconds(),e,2)}function Hse(t){var e=t.getDay();return e===0?7:e}function Gse(t,e){return wt(m0.count(Ha(t)-1,t),e,2)}function k5(t){var e=t.getDay();return e>=4||e===0?bd(t):bd.ceil(t)}function Kse(t,e){return t=k5(t),wt(bd.count(Ha(t),t)+(Ha(t).getDay()===4),e,2)}function Qse(t){return t.getDay()}function Wse(t,e){return wt(Yv.count(Ha(t)-1,t),e,2)}function Yse(t,e){return wt(t.getFullYear()%100,e,2)}function Xse(t,e){return t=k5(t),wt(t.getFullYear()%100,e,2)}function Jse(t,e){return wt(t.getFullYear()%1e4,e,4)}function Zse(t,e){var n=t.getDay();return t=n>=4||n===0?bd(t):bd.ceil(t),wt(t.getFullYear()%1e4,e,4)}function eae(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wt(e/60|0,"0",2)+wt(e%60,"0",2)}function uk(t,e){return wt(t.getUTCDate(),e,2)}function tae(t,e){return wt(t.getUTCHours(),e,2)}function nae(t,e){return wt(t.getUTCHours()%12||12,e,2)}function rae(t,e){return wt(1+f0.count(Ga(t),t),e,3)}function D5(t,e){return wt(t.getUTCMilliseconds(),e,3)}function iae(t,e){return D5(t,e)+"000"}function sae(t,e){return wt(t.getUTCMonth()+1,e,2)}function aae(t,e){return wt(t.getUTCMinutes(),e,2)}function oae(t,e){return wt(t.getUTCSeconds(),e,2)}function lae(t){var e=t.getUTCDay();return e===0?7:e}function cae(t,e){return wt(p0.count(Ga(t)-1,t),e,2)}function M5(t){var e=t.getUTCDay();return e>=4||e===0?xd(t):xd.ceil(t)}function uae(t,e){return t=M5(t),wt(xd.count(Ga(t),t)+(Ga(t).getUTCDay()===4),e,2)}function dae(t){return t.getUTCDay()}function hae(t,e){return wt(Xv.count(Ga(t)-1,t),e,2)}function fae(t,e){return wt(t.getUTCFullYear()%100,e,2)}function mae(t,e){return t=M5(t),wt(t.getUTCFullYear()%100,e,2)}function pae(t,e){return wt(t.getUTCFullYear()%1e4,e,4)}function gae(t,e){var n=t.getUTCDay();return t=n>=4||n===0?xd(t):xd.ceil(t),wt(t.getUTCFullYear()%1e4,e,4)}function vae(){return"+0000"}function dk(){return"%"}function hk(t){return+t}function fk(t){return Math.floor(+t/1e3)}var zu,z5,L5;yae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yae(t){return zu=yse(t),z5=zu.format,zu.parse,L5=zu.utcFormat,zu.utcParse,zu}function bae(t){return new Date(t)}function xae(t){return t instanceof Date?+t:+new Date(+t)}function SE(t,e,n,r,i,o,c,u,h,f){var p=hE(),g=p.invert,y=p.domain,x=f(".%L"),N=f(":%S"),j=f("%I:%M"),E=f("%I %p"),A=f("%a %d"),R=f("%b %d"),T=f("%B"),I=f("%Y");function M(B){return(h(B)<B?x:u(B)<B?N:c(B)<B?j:o(B)<B?E:r(B)<B?i(B)<B?A:R:n(B)<B?T:I)(B)}return p.invert=function(B){return new Date(g(B))},p.domain=function(B){return arguments.length?y(Array.from(B,xae)):y().map(bae)},p.ticks=function(B){var D=y();return t(D[0],D[D.length-1],B??10)},p.tickFormat=function(B,D){return D==null?M:f(D)},p.nice=function(B){var D=y();return(!B||typeof B.range!="function")&&(B=e(D[0],D[D.length-1],B??10)),B?y(N5(D,B)):p},p.copy=function(){return jm(p,SE(t,e,n,r,i,o,c,u,h,f))},p}function _ae(){return $i.apply(SE(gse,vse,Ha,NE,m0,wm,jE,xE,cc,z5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jae(){return $i.apply(SE(mse,pse,Ga,EE,p0,f0,wE,_E,cc,L5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function g0(){var t=0,e=1,n,r,i,o,c=Pr,u=!1,h;function f(g){return g==null||isNaN(g=+g)?h:c(i===0?.5:(g=(o(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([t,e]=g,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(g){return arguments.length?(u=!!g,f):u},f.interpolator=function(g){return arguments.length?(c=g,f):c};function p(g){return function(y){var x,N;return arguments.length?([x,N]=y,c=g(x,N),f):[c(0),c(1)]}}return f.range=p(Id),f.rangeRound=p(dE),f.unknown=function(g){return arguments.length?(h=g,f):h},function(g){return o=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),f}}function El(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function q5(){var t=Nl(g0()(Pr));return t.copy=function(){return El(t,q5())},no.apply(t,arguments)}function U5(){var t=pE(g0()).domain([1,10]);return t.copy=function(){return El(t,U5()).base(t.base())},no.apply(t,arguments)}function V5(){var t=gE(g0());return t.copy=function(){return El(t,V5()).constant(t.constant())},no.apply(t,arguments)}function AE(){var t=vE(g0());return t.copy=function(){return El(t,AE()).exponent(t.exponent())},no.apply(t,arguments)}function wae(){return AE.apply(null,arguments).exponent(.5)}function B5(){var t=[],e=Pr;function n(r){if(r!=null&&!isNaN(r=+r))return e((xm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(al),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>lie(t,o/r))},n.copy=function(){return B5(e).domain(t)},no.apply(n,arguments)}function v0(){var t=0,e=.5,n=1,r=1,i,o,c,u,h,f=Pr,p,g=!1,y;function x(j){return isNaN(j=+j)?y:(j=.5+((j=+p(j))-o)*(r*j<r*o?u:h),f(g?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=p(t=+t),o=p(e=+e),c=p(n=+n),u=i===o?0:.5/(o-i),h=o===c?0:.5/(c-o),r=o<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(g=!!j,x):g},x.interpolator=function(j){return arguments.length?(f=j,x):f};function N(j){return function(E){var A,R,T;return arguments.length?([A,R,T]=E,f=Die(j,[A,R,T]),x):[f(0),f(.5),f(1)]}}return x.range=N(Id),x.rangeRound=N(dE),x.unknown=function(j){return arguments.length?(y=j,x):y},function(j){return p=j,i=j(t),o=j(e),c=j(n),u=i===o?0:.5/(o-i),h=o===c?0:.5/(c-o),r=o<i?-1:1,x}}function $5(){var t=Nl(v0()(Pr));return t.copy=function(){return El(t,$5())},no.apply(t,arguments)}function F5(){var t=pE(v0()).domain([.1,1,10]);return t.copy=function(){return El(t,F5()).base(t.base())},no.apply(t,arguments)}function H5(){var t=gE(v0());return t.copy=function(){return El(t,H5()).constant(t.constant())},no.apply(t,arguments)}function TE(){var t=vE(v0());return t.copy=function(){return El(t,TE()).exponent(t.exponent())},no.apply(t,arguments)}function Nae(){return TE.apply(null,arguments).exponent(.5)}const cf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lE,scaleDiverging:$5,scaleDivergingLog:F5,scaleDivergingPow:TE,scaleDivergingSqrt:Nae,scaleDivergingSymlog:H5,scaleIdentity:w5,scaleImplicit:Zj,scaleLinear:j5,scaleLog:E5,scaleOrdinal:oE,scalePoint:die,scalePow:yE,scaleQuantile:T5,scaleQuantize:C5,scaleRadial:A5,scaleSequential:q5,scaleSequentialLog:U5,scaleSequentialPow:AE,scaleSequentialQuantile:B5,scaleSequentialSqrt:wae,scaleSequentialSymlog:V5,scaleSqrt:ise,scaleSymlog:S5,scaleThreshold:I5,scaleTime:_ae,scaleUtc:jae,tickFormat:_5},Symbol.toStringTag,{value:"Module"}));var ro=t=>t.chartData,G5=fe([ro],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),CE=(t,e,n,r)=>r?G5(t):ro(t),Eae=(t,e,n)=>n?G5(t):ro(t);function Ka(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(vt(e)&&vt(n))return!0}return!1}function mk(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function K5(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(vt(n))i=n;else if(typeof n=="function")return;if(vt(r))o=r;else if(typeof r=="function")return;var c=[i,o];if(Ka(c))return c}}function Sae(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ka(r))return mk(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,c,u;if(i==="auto")e!=null&&(c=Math.min(...e));else if(ke(i))c=i;else if(typeof i=="function")try{e!=null&&(c=i(e?.[0]))}catch{}else if(typeof i=="string"&&EO.test(i)){var h=EO.exec(i);if(h==null||h[1]==null||e==null)c=void 0;else{var f=+h[1];c=e[0]-f}}else c=e?.[0];if(o==="auto")e!=null&&(u=Math.max(...e));else if(ke(o))u=o;else if(typeof o=="function")try{e!=null&&(u=o(e?.[1]))}catch{}else if(typeof o=="string"&&SO.test(o)){var p=SO.exec(o);if(p==null||p[1]==null||e==null)u=void 0;else{var g=+p[1];u=e[1]+g}}else u=e?.[1];var y=[c,u];if(Ka(y))return e==null?y:mk(y,e,n)}}}var Pd=1e9,Aae={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PE,tn=!0,Bi="[DecimalError] ",yc=Bi+"Invalid argument: ",IE=Bi+"Exponent out of range: ",Od=Math.floor,sc=Math.pow,Tae=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fi,Zn=1e7,Yt=7,Q5=9007199254740991,Jv=Od(Q5/Yt),Oe={};Oe.absoluteValue=Oe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Oe.comparedTo=Oe.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Yt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Oe.dividedBy=Oe.div=function(t){return Ma(this,new this.constructor(t))};Oe.dividedToIntegerBy=Oe.idiv=function(t){var e=this,n=e.constructor;return Ft(Ma(e,new n(t),0,1),n.precision)};Oe.equals=Oe.eq=function(t){return!this.cmp(t)};Oe.exponent=function(){return Ln(this)};Oe.greaterThan=Oe.gt=function(t){return this.cmp(t)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(t){return this.cmp(t)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(t){return this.cmp(t)<0};Oe.lessThanOrEqualTo=Oe.lte=function(t){return this.cmp(t)<1};Oe.logarithm=Oe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(fi))throw Error(Bi+"NaN");if(n.s<1)throw Error(Bi+(n.s?"NaN":"-Infinity"));return n.eq(fi)?new r(0):(tn=!1,e=Ma(Gf(n,o),Gf(t,o),o),tn=!0,Ft(e,i))};Oe.minus=Oe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?X5(e,t):W5(e,(t.s=-t.s,t))};Oe.modulo=Oe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Bi+"NaN");return n.s?(tn=!1,e=Ma(n,t,0,1).times(t),tn=!0,n.minus(e)):Ft(new r(n),i)};Oe.naturalExponential=Oe.exp=function(){return Y5(this)};Oe.naturalLogarithm=Oe.ln=function(){return Gf(this)};Oe.negated=Oe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Oe.plus=Oe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?W5(e,t):X5(e,(t.s=-t.s,t))};Oe.precision=Oe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yc+t);if(e=Ln(i)+1,r=i.d.length-1,n=r*Yt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Oe.squareRoot=Oe.sqrt=function(){var t,e,n,r,i,o,c,u=this,h=u.constructor;if(u.s<1){if(!u.s)return new h(0);throw Error(Bi+"NaN")}for(t=Ln(u),tn=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=Bs(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Od((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new h(e)):r=new h(i.toString()),n=h.precision,i=c=n+3;;)if(o=r,r=o.plus(Ma(u,o,c+2)).times(.5),Bs(o.d).slice(0,c)===(e=Bs(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),i==c&&e=="4999"){if(Ft(o,n+1,0),o.times(o).eq(u)){r=o;break}}else if(e!="9999")break;c+=4}return tn=!0,Ft(r,n)};Oe.times=Oe.mul=function(t){var e,n,r,i,o,c,u,h,f,p=this,g=p.constructor,y=p.d,x=(t=new g(t)).d;if(!p.s||!t.s)return new g(0);for(t.s*=p.s,n=p.e+t.e,h=y.length,f=x.length,h<f&&(o=y,y=x,x=o,c=h,h=f,f=c),o=[],c=h+f,r=c;r--;)o.push(0);for(r=f;--r>=0;){for(e=0,i=h+r;i>r;)u=o[i]+x[r]*y[i-r-1]+e,o[i--]=u%Zn|0,e=u/Zn|0;o[i]=(o[i]+e)%Zn|0}for(;!o[--c];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,tn?Ft(t,g.precision):t};Oe.toDecimalPlaces=Oe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(na(t,0,Pd),e===void 0?e=r.rounding:na(e,0,8),Ft(n,t+Ln(n)+1,e))};Oe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Oc(r,!0):(na(t,0,Pd),e===void 0?e=i.rounding:na(e,0,8),r=Ft(new i(r),t+1,e),n=Oc(r,!0,t+1)),n};Oe.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Oc(i):(na(t,0,Pd),e===void 0?e=o.rounding:na(e,0,8),r=Ft(new o(i),t+Ln(i)+1,e),n=Oc(r.abs(),!1,t+Ln(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Oe.toInteger=Oe.toint=function(){var t=this,e=t.constructor;return Ft(new e(t),Ln(t)+1,e.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(t){var e,n,r,i,o,c,u=this,h=u.constructor,f=12,p=+(t=new h(t));if(!t.s)return new h(fi);if(u=new h(u),!u.s){if(t.s<1)throw Error(Bi+"Infinity");return u}if(u.eq(fi))return u;if(r=h.precision,t.eq(fi))return Ft(u,r);if(e=t.e,n=t.d.length-1,c=e>=n,o=u.s,c){if((n=p<0?-p:p)<=Q5){for(i=new h(fi),e=Math.ceil(r/Yt+4),tn=!1;n%2&&(i=i.times(u),gk(i.d,e)),n=Od(n/2),n!==0;)u=u.times(u),gk(u.d,e);return tn=!0,t.s<0?new h(fi).div(i):Ft(i,r)}}else if(o<0)throw Error(Bi+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,tn=!1,i=t.times(Gf(u,r+f)),tn=!0,i=Y5(i),i.s=o,i};Oe.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Ln(i),r=Oc(i,n<=o.toExpNeg||n>=o.toExpPos)):(na(t,1,Pd),e===void 0?e=o.rounding:na(e,0,8),i=Ft(new o(i),t,e),n=Ln(i),r=Oc(i,t<=n||n<=o.toExpNeg,t)),r};Oe.toSignificantDigits=Oe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(na(t,1,Pd),e===void 0?e=r.rounding:na(e,0,8)),Ft(new r(n),t,e)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ln(t),n=t.constructor;return Oc(t,e<=n.toExpNeg||e>=n.toExpPos)};function W5(t,e){var n,r,i,o,c,u,h,f,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),tn?Ft(e,g):e;if(h=t.d,f=e.d,c=t.e,i=e.e,h=h.slice(),o=c-i,o){for(o<0?(r=h,o=-o,u=f.length):(r=f,i=c,u=h.length),c=Math.ceil(g/Yt),u=c>u?c+1:u+1,o>u&&(o=u,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(u=h.length,o=f.length,u-o<0&&(o=u,r=f,f=h,h=r),n=0;o;)n=(h[--o]=h[o]+f[o]+n)/Zn|0,h[o]%=Zn;for(n&&(h.unshift(n),++i),u=h.length;h[--u]==0;)h.pop();return e.d=h,e.e=i,tn?Ft(e,g):e}function na(t,e,n){if(t!==~~t||t<e||t>n)throw Error(yc+t)}function Bs(t){var e,n,r,i=t.length-1,o="",c=t[0];if(i>0){for(o+=c,e=1;e<i;e++)r=t[e]+"",n=Yt-r.length,n&&(o+=Fo(n)),o+=r;c=t[e],r=c+"",n=Yt-r.length,n&&(o+=Fo(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}var Ma=(function(){function t(r,i){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%Zn|0,c=o/Zn|0;return c&&r.unshift(c),r}function e(r,i,o,c){var u,h;if(o!=c)h=o>c?1:-1;else for(u=h=0;u<o;u++)if(r[u]!=i[u]){h=r[u]>i[u]?1:-1;break}return h}function n(r,i,o){for(var c=0;o--;)r[o]-=c,c=r[o]<i[o]?1:0,r[o]=c*Zn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,c){var u,h,f,p,g,y,x,N,j,E,A,R,T,I,M,B,D,P,k=r.constructor,q=r.s==i.s?1:-1,L=r.d,z=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(Bi+"Division by zero");for(h=r.e-i.e,D=z.length,M=L.length,x=new k(q),N=x.d=[],f=0;z[f]==(L[f]||0);)++f;if(z[f]>(L[f]||0)&&--h,o==null?R=o=k.precision:c?R=o+(Ln(r)-Ln(i))+1:R=o,R<0)return new k(0);if(R=R/Yt+2|0,f=0,D==1)for(p=0,z=z[0],R++;(f<M||p)&&R--;f++)T=p*Zn+(L[f]||0),N[f]=T/z|0,p=T%z|0;else{for(p=Zn/(z[0]+1)|0,p>1&&(z=t(z,p),L=t(L,p),D=z.length,M=L.length),I=D,j=L.slice(0,D),E=j.length;E<D;)j[E++]=0;P=z.slice(),P.unshift(0),B=z[0],z[1]>=Zn/2&&++B;do p=0,u=e(z,j,D,E),u<0?(A=j[0],D!=E&&(A=A*Zn+(j[1]||0)),p=A/B|0,p>1?(p>=Zn&&(p=Zn-1),g=t(z,p),y=g.length,E=j.length,u=e(g,j,y,E),u==1&&(p--,n(g,D<y?P:z,y))):(p==0&&(u=p=1),g=z.slice()),y=g.length,y<E&&g.unshift(0),n(j,g,E),u==-1&&(E=j.length,u=e(z,j,D,E),u<1&&(p++,n(j,D<E?P:z,E))),E=j.length):u===0&&(p++,j=[0]),N[f++]=p,u&&j[0]?j[E++]=L[I]||0:(j=[L[I]],E=1);while((I++<M||j[0]!==void 0)&&R--)}return N[0]||N.shift(),x.e=h,Ft(x,c?o+Ln(x)+1:o)}})();function Y5(t,e){var n,r,i,o,c,u,h=0,f=0,p=t.constructor,g=p.precision;if(Ln(t)>16)throw Error(IE+Ln(t));if(!t.s)return new p(fi);for(tn=!1,u=g,c=new p(.03125);t.abs().gte(.1);)t=t.times(c),f+=5;for(r=Math.log(sc(2,f))/Math.LN10*2+5|0,u+=r,n=i=o=new p(fi),p.precision=u;;){if(i=Ft(i.times(t),u),n=n.times(++h),c=o.plus(Ma(i,n,u)),Bs(c.d).slice(0,u)===Bs(o.d).slice(0,u)){for(;f--;)o=Ft(o.times(o),u);return p.precision=g,e==null?(tn=!0,Ft(o,g)):o}o=c}}function Ln(t){for(var e=t.e*Yt,n=t.d[0];n>=10;n/=10)e++;return e}function _1(t,e,n){if(e>t.LN10.sd())throw tn=!0,n&&(t.precision=n),Error(Bi+"LN10 precision limit exceeded");return Ft(new t(t.LN10),e)}function Fo(t){for(var e="";t--;)e+="0";return e}function Gf(t,e){var n,r,i,o,c,u,h,f,p,g=1,y=10,x=t,N=x.d,j=x.constructor,E=j.precision;if(x.s<1)throw Error(Bi+(x.s?"NaN":"-Infinity"));if(x.eq(fi))return new j(0);if(e==null?(tn=!1,f=E):f=e,x.eq(10))return e==null&&(tn=!0),_1(j,f);if(f+=y,j.precision=f,n=Bs(N),r=n.charAt(0),o=Ln(x),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Bs(x.d),r=n.charAt(0),g++;o=Ln(x),r>1?(x=new j("0."+n),o++):x=new j(r+"."+n.slice(1))}else return h=_1(j,f+2,E).times(o+""),x=Gf(new j(r+"."+n.slice(1)),f-y).plus(h),j.precision=E,e==null?(tn=!0,Ft(x,E)):x;for(u=c=x=Ma(x.minus(fi),x.plus(fi),f),p=Ft(x.times(x),f),i=3;;){if(c=Ft(c.times(p),f),h=u.plus(Ma(c,new j(i),f)),Bs(h.d).slice(0,f)===Bs(u.d).slice(0,f))return u=u.times(2),o!==0&&(u=u.plus(_1(j,f+2,E).times(o+""))),u=Ma(u,new j(g),f),j.precision=E,e==null?(tn=!0,Ft(u,E)):u;u=h,i+=2}}function pk(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Od(n/Yt),t.d=[],r=(n+1)%Yt,n<0&&(r+=Yt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Yt;r<i;)t.d.push(+e.slice(r,r+=Yt));e=e.slice(r),r=Yt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),tn&&(t.e>Jv||t.e<-Jv))throw Error(IE+n)}else t.s=0,t.e=0,t.d=[0];return t}function Ft(t,e,n){var r,i,o,c,u,h,f,p,g=t.d;for(c=1,o=g[0];o>=10;o/=10)c++;if(r=e-c,r<0)r+=Yt,i=e,f=g[p=0];else{if(p=Math.ceil((r+1)/Yt),o=g.length,p>=o)return t;for(f=o=g[p],c=1;o>=10;o/=10)c++;r%=Yt,i=r-Yt+c}if(n!==void 0&&(o=sc(10,c-i-1),u=f/o%10|0,h=e<0||g[p+1]!==void 0||f%o,h=n<4?(u||h)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||h||n==6&&(r>0?i>0?f/sc(10,c-i):0:g[p-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return h?(o=Ln(t),g.length=1,e=e-o-1,g[0]=sc(10,(Yt-e%Yt)%Yt),t.e=Od(-e/Yt)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=p,o=1,p--):(g.length=p+1,o=sc(10,Yt-r),g[p]=i>0?(f/sc(10,c-i)%sc(10,i)|0)*o:0),h)for(;;)if(p==0){(g[0]+=o)==Zn&&(g[0]=1,++t.e);break}else{if(g[p]+=o,g[p]!=Zn)break;g[p--]=0,o=1}for(r=g.length;g[--r]===0;)g.pop();if(tn&&(t.e>Jv||t.e<-Jv))throw Error(IE+Ln(t));return t}function X5(t,e){var n,r,i,o,c,u,h,f,p,g,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),tn?Ft(e,x):e;if(h=t.d,g=e.d,r=e.e,f=t.e,h=h.slice(),c=f-r,c){for(p=c<0,p?(n=h,c=-c,u=g.length):(n=g,r=f,u=h.length),i=Math.max(Math.ceil(x/Yt),u)+2,c>i&&(c=i,n.length=1),n.reverse(),i=c;i--;)n.push(0);n.reverse()}else{for(i=h.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(h[i]!=g[i]){p=h[i]<g[i];break}c=0}for(p&&(n=h,h=g,g=n,e.s=-e.s),u=h.length,i=g.length-u;i>0;--i)h[u++]=0;for(i=g.length;i>c;){if(h[--i]<g[i]){for(o=i;o&&h[--o]===0;)h[o]=Zn-1;--h[o],h[i]+=Zn}h[i]-=g[i]}for(;h[--u]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(e.d=h,e.e=r,tn?Ft(e,x):e):new y(0)}function Oc(t,e,n){var r,i=Ln(t),o=Bs(t.d),c=o.length;return e?(n&&(r=n-c)>0?o=o.charAt(0)+"."+o.slice(1)+Fo(r):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Fo(-i-1)+o,n&&(r=n-c)>0&&(o+=Fo(r))):i>=c?(o+=Fo(i+1-c),n&&(r=n-i-1)>0&&(o=o+"."+Fo(r))):((r=i+1)<c&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-c)>0&&(i+1===c&&(o+="."),o+=Fo(r))),t.s<0?"-"+o:o}function gk(t,e){if(t.length>e)return t.length=e,!0}function J5(t){var e,n,r;function i(o){var c=this;if(!(c instanceof i))return new i(o);if(c.constructor=i,o instanceof i){c.s=o.s,c.e=o.e,c.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(yc+o);if(o>0)c.s=1;else if(o<0)o=-o,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(o===~~o&&o<1e7){c.e=0,c.d=[o];return}return pk(c,o.toString())}else if(typeof o!="string")throw Error(yc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),c.s=-1):c.s=1,Tae.test(o))pk(c,o);else throw Error(yc+o)}if(i.prototype=Oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=J5,i.config=i.set=Cae,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Cae(t){if(!t||typeof t!="object")throw Error(Bi+"Object expected");var e,n,r,i=["precision",1,Pd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Od(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(yc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(yc+n+": "+r);return this}var PE=J5(Aae);fi=new PE(1);const Pt=PE;function Z5(t){var e;return t===0?e=1:e=Math.floor(new Pt(t).abs().log(10).toNumber())+1,e}function e6(t,e,n){for(var r=new Pt(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var t6=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},n6=(t,e,n)=>{if(t.lte(0))return new Pt(0);var r=Z5(t.toNumber()),i=new Pt(10).pow(r),o=t.div(i),c=r!==1?.05:.1,u=new Pt(Math.ceil(o.div(c).toNumber())).add(n).mul(c),h=u.mul(i);return e?new Pt(h.toNumber()):new Pt(Math.ceil(h.toNumber()))},Iae=(t,e,n)=>{var r=new Pt(1),i=new Pt(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Pt(10).pow(Z5(t)-1),i=new Pt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Pt(Math.floor(t)))}else t===0?i=new Pt(Math.floor((e-1)/2)):n||(i=new Pt(Math.floor(t)));for(var c=Math.floor((e-1)/2),u=[],h=0;h<e;h++)u.push(i.add(new Pt(h-c).mul(r)).toNumber());return u},r6=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Pt(0),tickMin:new Pt(0),tickMax:new Pt(0)};var c=n6(new Pt(n).sub(e).div(r-1),i,o),u;e<=0&&n>=0?u=new Pt(0):(u=new Pt(e).add(n).div(2),u=u.sub(new Pt(u).mod(c)));var h=Math.ceil(u.sub(e).div(c).toNumber()),f=Math.ceil(new Pt(n).sub(u).div(c).toNumber()),p=h+f+1;return p>r?r6(e,n,r,i,o+1):(p<r&&(f=n>0?f+(r-p):f,h=n>0?h:h+(r-p)),{step:c,tickMin:u.sub(new Pt(h).mul(c)),tickMax:u.add(new Pt(f).mul(c))})},Pae=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,h]=t6([n,r]);if(u===-1/0||h===1/0){var f=h===1/0?[u,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),h];return n>r?f.reverse():f}if(u===h)return Iae(u,i,o);var{step:p,tickMin:g,tickMax:y}=r6(u,h,c,o,0),x=e6(g,y.add(new Pt(.1).mul(p)),p);return n>r?x.reverse():x},Oae=function(e,n){var[r,i]=e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=t6([r,i]);if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var h=Math.max(n,2),f=n6(new Pt(u).sub(c).div(h-1),o,0),p=[...e6(new Pt(c),new Pt(u),f),u];return o===!1&&(p=p.map(g=>Math.round(g))),r>i?p.reverse():p},i6=t=>t.rootProps.maxBarSize,Rae=t=>t.rootProps.barGap,s6=t=>t.rootProps.barCategoryGap,kae=t=>t.rootProps.barSize,y0=t=>t.rootProps.stackOffset,a6=t=>t.rootProps.reverseStackOrder,OE=t=>t.options.chartName,RE=t=>t.rootProps.syncId,o6=t=>t.rootProps.syncMethod,kE=t=>t.options.eventEmitter,er={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ec={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Ms={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},b0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function x0(t,e,n){if(n!=="auto")return n;if(t!=null)return Za(t,e)?"category":"number"}function vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vk(Object(n),!0).forEach(function(r){Dae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dae(t,e,n){return(e=Mae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mae(t){var e=zae(t,"string");return typeof e=="symbol"?e:e+""}function zae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yk={allowDataOverflow:ec.allowDataOverflow,allowDecimals:ec.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ec.angleAxisId,includeHidden:!1,name:void 0,reversed:ec.reversed,scale:ec.scale,tick:ec.tick,tickCount:void 0,ticks:void 0,type:ec.type,unit:void 0},bk={allowDataOverflow:Ms.allowDataOverflow,allowDecimals:Ms.allowDecimals,allowDuplicatedCategory:Ms.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ms.radiusAxisId,includeHidden:Ms.includeHidden,name:void 0,reversed:Ms.reversed,scale:Ms.scale,tick:Ms.tick,tickCount:Ms.tickCount,ticks:void 0,type:Ms.type,unit:void 0},Lae=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},DE=fe([Lae,Q3],(t,e)=>{var n;if(t!=null)return t;var r=(n=x0(e,"angleAxis",yk.type))!==null&&n!==void 0?n:"category";return Zv(Zv({},yk),{},{type:r})}),qae=(t,e)=>t.polarAxis.radiusAxis[e],ME=fe([qae,Q3],(t,e)=>{var n;if(t!=null)return t;var r=(n=x0(e,"radiusAxis",bk.type))!==null&&n!==void 0?n:"category";return Zv(Zv({},bk),{},{type:r})}),_0=t=>t.polarOptions,zE=fe([eo,to,tr],Mre),l6=fe([_0,zE],(t,e)=>{if(t!=null)return ps(t.innerRadius,e,0)}),c6=fe([_0,zE],(t,e)=>{if(t!=null)return ps(t.outerRadius,e,e*.8)}),Uae=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},u6=fe([_0],Uae);fe([DE,u6],b0);var d6=fe([zE,l6,c6],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});fe([ME,d6],b0);var h6=fe([Ot,_0,l6,c6,eo,to],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:c,cy:u,startAngle:h,endAngle:f}=e;return{cx:ps(c,i,i/2),cy:ps(u,o,o/2),innerRadius:n,outerRadius:r,startAngle:h,endAngle:f,clockWise:!1}}}),rr=(t,e)=>e,j0=(t,e,n)=>n;function LE(t){return t?.id}function f6(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,c=new Map;return t.forEach(u=>{var h,f=(h=u.data)!==null&&h!==void 0?h:r;if(!(f==null||f.length===0)){var p=LE(u);f.forEach((g,y)=>{var x=o==null||i?y:String(zn(g,o,null)),N=zn(g,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[p]:N}),c.set(x,j)})}}),Array.from(c.values())}function w0(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var N0=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function E0(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Vae(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var ir=t=>{var e=Ot(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Rd=t=>t.tooltip.settings.axisId;function Bae(t){if(t in cf)return cf[t]();var e="scale".concat(mm(t));if(e in cf)return cf[e]()}function xk(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(o){function c(){return o.apply(this,arguments)}return c.toString=function(){return o.toString()},c})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(o){var c=i[0],u=i[1];return c<=u?o>=c&&o<=u:o>=u&&o<=c},bandwidth:n?()=>n.call(t):void 0,ticks:e?o=>e.call(t,o):void 0,map:(o,c)=>{var u=t(o);if(u!=null){if(t.bandwidth&&c!==null&&c!==void 0&&c.position){var h=t.bandwidth();switch(c.position){case"middle":u+=h/2;break;case"end":u+=h;break}}return u}}}}function _k(t,e,n){if(typeof t=="function")return xk(t.copy().domain(e).range(n));if(t!=null){var r=Bae(t);if(r!=null)return r.domain(e).range(n),xk(r)}}var $ae=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Ka(e)){for(var n,r,i=0;i<e.length;i++){var o=e[i];vt(o)&&((n===void 0||o<n)&&(n=o),(r===void 0||o>r)&&(r=o))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ey(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jk(Object(n),!0).forEach(function(r){Fae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fae(t,e,n){return(e=Hae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hae(t){var e=Gae(t,"string");return typeof e=="symbol"?e:e+""}function Gae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rw=[0,"auto"],Yn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},m6=(t,e)=>t.cartesianAxis.xAxis[e],io=(t,e)=>{var n=m6(t,e);return n??Yn},Xn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:rw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:vm},p6=(t,e)=>t.cartesianAxis.yAxis[e],so=(t,e)=>{var n=p6(t,e);return n??Xn},Kae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qE=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Kae},zr=(t,e,n)=>{switch(e){case"xAxis":return io(t,n);case"yAxis":return so(t,n);case"zAxis":return qE(t,n);case"angleAxis":return DE(t,n);case"radiusAxis":return ME(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Qae=(t,e,n)=>{switch(e){case"xAxis":return io(t,n);case"yAxis":return so(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Nm=(t,e,n)=>{switch(e){case"xAxis":return io(t,n);case"yAxis":return so(t,n);case"angleAxis":return DE(t,n);case"radiusAxis":return ME(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},g6=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function v6(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var S0=t=>t.graphicalItems.cartesianItems,Wae=fe([rr,j0],v6),y6=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Em=fe([S0,zr,Wae],y6,{memoizeOptions:{resultEqualityCheck:E0}}),b6=fe([Em],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(w0)),x6=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Yae=fe([Em],x6),_6=t=>t.map(e=>e.data).filter(Boolean).flat(1),Xae=fe([Em],_6,{memoizeOptions:{resultEqualityCheck:E0}}),j6=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},UE=fe([Xae,CE],j6),w6=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:zn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:zn(i,r)}))):t.map(r=>({value:r})),A0=fe([UE,zr,Em],w6);function N6(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Hg(t){if(ea(t)||t instanceof Date){var e=Number(t);if(vt(e))return e}}function wk(t){if(Array.isArray(t)){var e=[Hg(t[0]),Hg(t[1])];return Ka(e)?e:void 0}var n=Hg(t);if(n!=null)return[n,n]}function Qa(t){return t.map(Hg).filter(Jr)}function Jae(t,e,n){return!n||typeof e!="number"||Zs(e)?[]:n.length?Qa(n.flatMap(r=>{var i=zn(t,r.dataKey),o,c;if(Array.isArray(i)?[o,c]=i:o=c=i,!(!vt(o)||!vt(c)))return[e-o,e+c]})):[]}var Hn=t=>{var e=ir(t),n=Rd(t);return Nm(t,e,n)},Sm=fe([Hn],t=>t?.dataKey),Zae=fe([b6,CE,Hn],f6),E6=(t,e,n,r)=>{var i={},o=e.reduce((c,u)=>{if(u.stackId==null)return c;var h=c[u.stackId];return h==null&&(h=[]),h.push(u),c[u.stackId]=h,c},i);return Object.fromEntries(Object.entries(o).map(c=>{var[u,h]=c,f=r?[...h].reverse():h,p=f.map(LE);return[u,{stackedData:Ate(t,p,n),graphicalItems:f}]}))},iw=fe([Zae,b6,y0,a6],E6),S6=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:o}=e;if(r==null&&n!=="zAxis"){var c=Ote(t,i,o);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},eoe=fe([zr],t=>t.allowDataOverflow),VE=t=>{var e;if(t==null||!("domain"in t))return rw;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Qa(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:rw},A6=fe([zr],VE),T6=fe([A6,eoe],K5),toe=fe([iw,ro,rr,T6],S6,{memoizeOptions:{resultEqualityCheck:N0}}),BE=t=>t.errorBars,noe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>N6(n,r)),ty=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),c=Math.min(...o),u=Math.max(...o);return[c,u]}},C6=(t,e,n,r,i)=>{var o,c;if(n.length>0&&t.forEach(u=>{n.forEach(h=>{var f,p,g=(f=r[h.id])===null||f===void 0?void 0:f.filter(A=>N6(i,A)),y=zn(u,(p=e.dataKey)!==null&&p!==void 0?p:h.dataKey),x=Jae(u,y,g);if(x.length>=2){var N=Math.min(...x),j=Math.max(...x);(o==null||N<o)&&(o=N),(c==null||j>c)&&(c=j)}var E=wk(y);E!=null&&(o=o==null?E[0]:Math.min(o,E[0]),c=c==null?E[1]:Math.max(c,E[1]))})}),e?.dataKey!=null&&t.forEach(u=>{var h=wk(zn(u,e.dataKey));h!=null&&(o=o==null?h[0]:Math.min(o,h[0]),c=c==null?h[1]:Math.max(c,h[1]))}),vt(o)&&vt(c))return[o,c]},roe=fe([UE,zr,Yae,BE,rr],C6,{memoizeOptions:{resultEqualityCheck:N0}});function ioe(t){var{value:e}=t;if(ea(e)||e instanceof Date)return e}var soe=(t,e,n)=>{var r=t.map(ioe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&HL(r))?h5(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},I6=t=>t.referenceElements.dots,kd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),aoe=fe([I6,rr,j0],kd),P6=t=>t.referenceElements.areas,ooe=fe([P6,rr,j0],kd),O6=t=>t.referenceElements.lines,loe=fe([O6,rr,j0],kd),R6=(t,e)=>{if(t!=null){var n=Qa(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},coe=fe(aoe,rr,R6),k6=(t,e)=>{if(t!=null){var n=Qa(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},uoe=fe([ooe,rr],k6);function doe(t){var e;if(t.x!=null)return Qa([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Qa(n)}function hoe(t){var e;if(t.y!=null)return Qa([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Qa(n)}var D6=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?doe(r):hoe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},foe=fe([loe,rr],D6),moe=fe(coe,foe,uoe,(t,e,n)=>ty(t,n,e)),M6=(t,e,n,r,i,o,c,u)=>{if(n!=null)return n;var h=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",f=h?ty(r,o,i):ty(o,i);return Sae(e,f,t.allowDataOverflow)},poe=fe([zr,A6,T6,toe,roe,moe,Ot,rr],M6,{memoizeOptions:{resultEqualityCheck:N0}}),goe=[0,1],z6=(t,e,n,r,i,o,c)=>{if(!((t==null||n==null||n.length===0)&&c===void 0)){var{dataKey:u,type:h}=t,f=Za(e,o);if(f&&u==null){var p;return h5(0,(p=n?.length)!==null&&p!==void 0?p:0)}return h==="category"?soe(r,t,f):i==="expand"?goe:c}},$E=fe([zr,Ot,UE,A0,y0,rr,poe],z6);function voe(t){return t in cf}var L6=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var o="scale".concat(mm(r));return voe(o)?o:"point"}}},Dd=fe([zr,g6,OE],L6);function FE(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?_k(t.scale,n,r):_k(e,n,r)}var q6=(t,e,n)=>{var r=VE(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ka(t))return Pae(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ka(t))return Oae(t,e.tickCount,e.allowDecimals)}},HE=fe([$E,Nm,Dd],q6),U6=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Ka(e)&&Array.isArray(n)&&n.length>0){var i,o,c=e[0],u=(i=n[0])!==null&&i!==void 0?i:0,h=e[1],f=(o=n[n.length-1])!==null&&o!==void 0?o:0;return[Math.min(c,u),Math.max(h,f)]}return e},yoe=fe([zr,$E,HE,rr],U6),boe=fe(A0,zr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Qa(t.map(g=>g.value))).sort((g,y)=>g-y),i=r[0],o=r[r.length-1];if(i==null||o==null)return 1/0;var c=o-i;if(c===0)return 1/0;for(var u=0;u<r.length-1;u++){var h=r[u],f=r[u+1];if(!(h==null||f==null)){var p=f-h;n=Math.min(n,p)}}return n/c}}),V6=fe(boe,Ot,s6,tr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!vt(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var c=ps(n,t*o),u=t*o/2;return u-c-(u-c)/o*c}return 0}),xoe=(t,e,n)=>{var r=io(t,e);return r==null||typeof r.padding!="string"?0:V6(t,"xAxis",e,n,r.padding)},_oe=(t,e,n)=>{var r=so(t,e);return r==null||typeof r.padding!="string"?0:V6(t,"yAxis",e,n,r.padding)},joe=fe(io,xoe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),woe=fe(so,_oe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Noe=fe([tr,joe,i0,r0,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),Eoe=fe([tr,Ot,woe,i0,r0,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:c}=i;return o?[r.height-c.bottom,c.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Am=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Noe(t,n,r);case"yAxis":return Eoe(t,n,r);case"zAxis":return(i=qE(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return u6(t);case"radiusAxis":return d6(t,n);default:return}},B6=fe([zr,Am],b0),Soe=fe([Dd,yoe],$ae),T0=fe([zr,Dd,Soe,B6],FE);fe([Em,BE,rr],noe);function $6(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var C0=(t,e)=>e,I0=(t,e,n)=>n,Aoe=fe(t0,C0,I0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort($6)),Toe=fe(n0,C0,I0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort($6)),F6=(t,e)=>({width:t.width,height:e.height}),Coe=(t,e)=>{var n=typeof e.width=="number"?e.width:vm;return{width:n,height:t.height}},H6=fe(tr,io,F6),Ioe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Poe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Ooe=fe(to,tr,Aoe,C0,I0,(t,e,n,r,i)=>{var o={},c;return n.forEach(u=>{var h=F6(e,u);c==null&&(c=Ioe(e,r,t));var f=r==="top"&&!i||r==="bottom"&&i;o[u.id]=c-Number(f)*h.height,c+=(f?-1:1)*h.height}),o}),Roe=fe(eo,tr,Toe,C0,I0,(t,e,n,r,i)=>{var o={},c;return n.forEach(u=>{var h=Coe(e,u);c==null&&(c=Poe(e,r,t));var f=r==="left"&&!i||r==="right"&&i;o[u.id]=c-Number(f)*h.width,c+=(f?-1:1)*h.width}),o}),koe=(t,e)=>{var n=io(t,e);if(n!=null)return Ooe(t,n.orientation,n.mirror)},Doe=fe([tr,io,koe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Moe=(t,e)=>{var n=so(t,e);if(n!=null)return Roe(t,n.orientation,n.mirror)},zoe=fe([tr,so,Moe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),G6=fe(tr,so,(t,e)=>{var n=typeof e.width=="number"?e.width:vm;return{width:n,height:t.height}}),Nk=(t,e,n)=>{switch(e){case"xAxis":return H6(t,n).width;case"yAxis":return G6(t,n).height;default:return}},K6=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:c}=n,u=Za(t,r),h=e.map(f=>f.value);if(c&&u&&o==="category"&&i&&HL(h))return h}},GE=fe([Ot,A0,zr,rr],K6),Q6=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,c=Za(t,r);if(c&&(i==="number"||o!=="auto"))return e.map(u=>u.value)}},KE=fe([Ot,A0,Nm,rr],Q6),Ek=fe([Ot,Qae,Dd,T0,GE,KE,Am,HE,rr],(t,e,n,r,i,o,c,u,h)=>{if(e!=null){var f=Za(t,h);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:h,categoricalDomain:o,duplicateDomain:i,isCategorical:f,niceTicks:u,range:c,realScaleType:n,scale:r}}}),Loe=(t,e,n,r,i,o,c,u,h)=>{if(!(e==null||r==null)){var f=Za(t,h),{type:p,ticks:g,tickCount:y}=e,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,N=p==="category"&&r.bandwidth?r.bandwidth()/x:0;N=h==="angleAxis"&&o!=null&&o.length>=2?Xr(o[0]-o[1])*2*N:N;var j=g||i;return j?j.map((E,A)=>{var R=c?c.indexOf(E):E,T=r.map(R);return vt(T)?{index:A,coordinate:T+N,value:E,offset:N}:null}).filter(Jr):f&&u?u.map((E,A)=>{var R=r.map(E);return vt(R)?{coordinate:R+N,value:E,index:A,offset:N}:null}).filter(Jr):r.ticks?r.ticks(y).map((E,A)=>{var R=r.map(E);return vt(R)?{coordinate:R+N,value:E,index:A,offset:N}:null}).filter(Jr):r.domain().map((E,A)=>{var R=r.map(E);return vt(R)?{coordinate:R+N,value:c?c[E]:E,index:A,offset:N}:null}).filter(Jr)}},W6=fe([Ot,Nm,Dd,T0,HE,Am,GE,KE,rr],Loe),qoe=(t,e,n,r,i,o,c)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=Za(t,c),{tickCount:h}=e,f=0;return f=c==="angleAxis"&&r?.length>=2?Xr(r[0]-r[1])*2*f:f,u&&o?o.map((p,g)=>{var y=n.map(p);return vt(y)?{coordinate:y+f,value:p,index:g,offset:f}:null}).filter(Jr):n.ticks?n.ticks(h).map((p,g)=>{var y=n.map(p);return vt(y)?{coordinate:y+f,value:p,index:g,offset:f}:null}).filter(Jr):n.domain().map((p,g)=>{var y=n.map(p);return vt(y)?{coordinate:y+f,value:i?i[p]:p,index:g,offset:f}:null}).filter(Jr)}},gl=fe([Ot,Nm,T0,Am,GE,KE,rr],qoe),vl=fe(zr,T0,(t,e)=>{if(!(t==null||e==null))return ey(ey({},t),{},{scale:e})}),Uoe=fe([zr,Dd,$E,B6],FE);fe((t,e,n)=>qE(t,n),Uoe,(t,e)=>{if(!(t==null||e==null))return ey(ey({},t),{},{scale:e})});var Voe=fe([Ot,t0,n0],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Y6=t=>t.options.defaultTooltipEventType,X6=t=>t.options.validateTooltipEventTypes;function J6(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function QE(t,e){var n=Y6(t),r=X6(t);return J6(e,n,r)}function Boe(t){return Le(e=>QE(e,t))}var Z6=(t,e)=>{var n,r=Number(e);if(!(Zs(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},$oe=t=>t.tooltip.settings,Xo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Foe={itemInteraction:{click:Xo,hover:Xo},axisInteraction:{click:Xo,hover:Xo},keyboardInteraction:Xo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},eq=ti({name:"tooltip",initialState:Foe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Zt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ds(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Zt()},removeTooltipEntrySettings:{reducer(t,e){var n=ds(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Zt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Hoe,replaceTooltipEntrySettings:Goe,removeTooltipEntrySettings:Koe,setTooltipSettingsState:Qoe,setActiveMouseOverItemIndex:tq,mouseLeaveItem:Woe,mouseLeaveChart:nq,setActiveClickItemIndex:Yoe,setMouseOverAxisIndex:rq,setMouseClickAxisIndex:Xoe,setSyncInteraction:sw,setKeyboardInteraction:aw}=eq.actions,Joe=eq.reducer;function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ng(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){Zoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zoe(t,e,n){return(e=ele(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ele(t){var e=tle(t,"string");return typeof e=="symbol"?e:e+""}function tle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nle(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function rle(t){return t.index!=null}var iq=(t,e,n,r)=>{if(e==null)return Xo;var i=nle(t,e,n);if(i==null)return Xo;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(rle(i)){if(o)return Ng(Ng({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Ng(Ng({},Xo),{},{coordinate:i.coordinate})};function ile(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function sle(t,e){var n=ile(t),r=e[0],i=e[1];if(n===void 0)return!1;var o=Math.min(r,i),c=Math.max(r,i);return n>=o&&n<=c}function ale(t,e,n){if(n==null||e==null)return!0;var r=zn(t,e);return r==null||!Ka(n)?!0:sle(r,n)}var WE=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var o=Number(i);if(!vt(o))return i;var c=0,u=1/0;e.length>0&&(u=e.length-1);var h=Math.max(c,Math.min(o,u)),f=e[h];return f==null||ale(f,n,r)?String(h):null},sq=(t,e,n,r,i,o,c)=>{if(o!=null){var u=c[0],h=u?.getPosition(o);if(h!=null)return h;var f=i?.[Number(o)];if(f)return n==="horizontal"?{x:f.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:f.coordinate}}},aq=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var o=t.tooltipItemPayloads[0];return o!=null?[o]:[]}return t.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},oq=t=>t.options.tooltipPayloadSearcher,Md=t=>t.tooltip;function Ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ak(Object(n),!0).forEach(function(r){ole(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ole(t,e,n){return(e=lle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lle(t){var e=cle(t,"string");return typeof e=="symbol"?e:e+""}function cle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ule(t,e){return t??e}var lq=(t,e,n,r,i,o,c)=>{if(!(e==null||o==null)){var{chartData:u,computedData:h,dataStartIndex:f,dataEndIndex:p}=n,g=[];return t.reduce((y,x)=>{var N,{dataDefinedOnItem:j,settings:E}=x,A=ule(j,u),R=Array.isArray(A)?z3(A,f,p):A,T=(N=E?.dataKey)!==null&&N!==void 0?N:r,I=E?.nameKey,M;if(r&&Array.isArray(R)&&!Array.isArray(R[0])&&c==="axis"?M=GL(R,r,i):M=o(R,e,h,I),Array.isArray(M))M.forEach(D=>{var P=Tk(Tk({},E),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});y.push(AO({tooltipEntrySettings:P,dataKey:D.dataKey,payload:D.payload,value:zn(D.payload,D.dataKey),name:D.name}))});else{var B;y.push(AO({tooltipEntrySettings:E,dataKey:T,payload:M,value:zn(M,T),name:(B=zn(M,I))!==null&&B!==void 0?B:E?.name}))}return y},g)}},YE=fe([Hn,g6,OE],L6),dle=fe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),hle=fe([ir,Rd],v6),zd=fe([dle,Hn,hle],y6,{memoizeOptions:{resultEqualityCheck:E0}}),fle=fe([zd],t=>t.filter(w0)),mle=fe([zd],_6,{memoizeOptions:{resultEqualityCheck:E0}}),Ld=fe([mle,ro],j6),ple=fe([fle,ro,Hn],f6),XE=fe([Ld,Hn,zd],w6),cq=fe([Hn],VE),gle=fe([Hn],t=>t.allowDataOverflow),uq=fe([cq,gle],K5),vle=fe([zd],t=>t.filter(w0)),yle=fe([ple,vle,y0,a6],E6),ble=fe([yle,ro,ir,uq],S6),xle=fe([zd],x6),_le=fe([Ld,Hn,xle,BE,ir],C6,{memoizeOptions:{resultEqualityCheck:N0}}),jle=fe([I6,ir,Rd],kd),wle=fe([jle,ir],R6),Nle=fe([P6,ir,Rd],kd),Ele=fe([Nle,ir],k6),Sle=fe([O6,ir,Rd],kd),Ale=fe([Sle,ir],D6),Tle=fe([wle,Ale,Ele],ty),Cle=fe([Hn,cq,uq,ble,_le,Tle,Ot,ir],M6),Tm=fe([Hn,Ot,Ld,XE,y0,ir,Cle],z6),Ile=fe([Tm,Hn,YE],q6),Ple=fe([Hn,Tm,Ile,ir],U6),dq=t=>{var e=ir(t),n=Rd(t),r=!1;return Am(t,e,n,r)},hq=fe([Hn,dq],b0),fq=fe([Hn,YE,Ple,hq],FE),Ole=fe([Ot,XE,Hn,ir],K6),Rle=fe([Ot,XE,Hn,ir],Q6),kle=(t,e,n,r,i,o,c,u)=>{if(e){var{type:h}=e,f=Za(t,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=h==="category"&&r.bandwidth?r.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?Xr(i[0]-i[1])*2*g:g,f&&c?c.map((y,x)=>{var N=r.map(y);return vt(N)?{coordinate:N+g,value:y,index:x,offset:g}:null}).filter(Jr):r.domain().map((y,x)=>{var N=r.map(y);return vt(N)?{coordinate:N+g,value:o?o[y]:y,index:x,offset:g}:null}).filter(Jr)}}},ao=fe([Ot,Hn,YE,fq,dq,Ole,Rle,ir],kle),JE=fe([Y6,X6,$oe],(t,e,n)=>J6(n.shared,t,e)),mq=t=>t.tooltip.settings.trigger,ZE=t=>t.tooltip.settings.defaultIndex,Cm=fe([Md,JE,mq,ZE],iq),Rc=fe([Cm,Ld,Sm,Tm],WE),pq=fe([ao,Rc],Z6),gq=fe([Cm],t=>{if(t)return t.dataKey});fe([Cm],t=>{if(t)return t.graphicalItemId});var vq=fe([Md,JE,mq,ZE],aq),Dle=fe([eo,to,Ot,tr,ao,ZE,vq],sq),Mle=fe([Cm,Dle],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),zle=fe([Cm],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),Lle=fe([vq,Rc,ro,Sm,pq,oq,JE],lq),qle=fe([Lle],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function Ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ik(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(n),!0).forEach(function(r){Ule(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ule(t,e,n){return(e=Vle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vle(t){var e=Ble(t,"string");return typeof e=="symbol"?e:e+""}function Ble(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $le=()=>Le(Hn),Fle=()=>{var t=$le(),e=Le(ao),n=Le(fq);return gd(!t||!n?void 0:Ik(Ik({},t),{},{scale:n}),e)};function Pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pk(Object(n),!0).forEach(function(r){Hle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hle(t,e,n){return(e=Gle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gle(t){var e=Kle(t,"string");return typeof e=="symbol"?e:e+""}function Kle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qle=(t,e,n,r)=>{var i=e.find(o=>o&&o.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Wle=(t,e,n,r)=>{var i=e.find(f=>f&&f.index===n);if(i){if(t==="centric"){var o=i.coordinate,{radius:c}=r;return Lu(Lu(Lu({},r),mr(r.cx,r.cy,c,o)),{},{angle:o,radius:c})}var u=i.coordinate,{angle:h}=r;return Lu(Lu(Lu({},r),mr(r.cx,r.cy,u,h)),{},{angle:h,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Yle(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var yq=(t,e,n,r,i)=>{var o,c=(o=e?.length)!==null&&o!==void 0?o:0;if(c<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var h,f,p,g,y,x=u>0?(h=n[u-1])===null||h===void 0?void 0:h.coordinate:(f=n[c-1])===null||f===void 0?void 0:f.coordinate,N=(p=n[u])===null||p===void 0?void 0:p.coordinate,j=u>=c-1?(g=n[0])===null||g===void 0?void 0:g.coordinate:(y=n[u+1])===null||y===void 0?void 0:y.coordinate,E=void 0;if(!(x==null||N==null||j==null))if(Xr(N-x)!==Xr(j-N)){var A=[];if(Xr(j-N)===Xr(i[1]-i[0])){E=j;var R=N+i[1]-i[0];A[0]=Math.min(R,(R+x)/2),A[1]=Math.max(R,(R+x)/2)}else{E=x;var T=j+i[1]-i[0];A[0]=Math.min(N,(T+N)/2),A[1]=Math.max(N,(T+N)/2)}var I=[Math.min(N,(E+N)/2),Math.max(N,(E+N)/2)];if(t>I[0]&&t<=I[1]||t>=A[0]&&t<=A[1]){var M;return(M=n[u])===null||M===void 0?void 0:M.index}}else{var B=Math.min(x,j),D=Math.max(x,j);if(t>(B+N)/2&&t<=(D+N)/2){var P;return(P=n[u])===null||P===void 0?void 0:P.index}}}else if(e)for(var k=0;k<c;k++){var q=e[k];if(q!=null){var L=e[k+1],z=e[k-1];if(k===0&&L!=null&&t<=(q.coordinate+L.coordinate)/2||k===c-1&&z!=null&&t>(q.coordinate+z.coordinate)/2||k>0&&k<c-1&&z!=null&&L!=null&&t>(q.coordinate+z.coordinate)/2&&t<=(q.coordinate+L.coordinate)/2)return q.index}}return-1},Xle=()=>Le(OE),eS=(t,e)=>e,bq=(t,e,n)=>n,tS=(t,e,n,r)=>r,Jle=fe(ao,t=>Fy(t,e=>e.coordinate)),nS=fe([Md,eS,bq,tS],iq),rS=fe([nS,Ld,Sm,Tm],WE),Zle=(t,e,n)=>{if(e!=null){var r=Md(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},xq=fe([Md,eS,bq,tS],aq),ny=fe([eo,to,Ot,tr,ao,tS,xq],sq),ece=fe([nS,ny],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),_q=fe([ao,rS],Z6),tce=fe([xq,rS,ro,Sm,_q,oq,eS],lq),nce=fe([nS,rS],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),rce=(t,e,n,r,i,o,c)=>{if(!(!t||!n||!r||!i)&&Yle(t,c)){var u=Rte(t,e),h=yq(u,o,i,n,r),f=Qle(e,i,h,t);return{activeIndex:String(h),activeCoordinate:f}}},ice=(t,e,n,r,i,o,c)=>{if(!(!t||!r||!i||!o||!n)){var u=Vre(t,n);if(u){var h=kte(u,e),f=yq(h,c,o,r,i),p=Wle(e,o,f,u);return{activeIndex:String(f),activeCoordinate:p}}}},sce=(t,e,n,r,i,o,c,u)=>{if(!(!t||!e||!r||!i||!o))return e==="horizontal"||e==="vertical"?rce(t,e,r,i,o,c,u):ice(t,e,n,r,i,o,c)},ace=fe(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),oce=fe(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(er)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Vae}});function Ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(n),!0).forEach(function(r){lce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lce(t,e,n){return(e=cce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cce(t){var e=uce(t,"string");return typeof e=="symbol"?e:e+""}function uce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dce={},hce={zIndexMap:Object.values(er).reduce((t,e)=>Rk(Rk({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),dce)},fce=new Set(Object.values(er));function mce(t){return fce.has(t)}var jq=ti({name:"zIndex",initialState:hce,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Zt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!mce(n)&&delete t.zIndexMap[n])},prepare:Zt()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Zt()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Zt()}}}),{registerZIndexPortal:pce,unregisterZIndexPortal:gce,registerZIndexPortalElement:vce,unregisterZIndexPortalElement:yce}=jq.actions,bce=jq.reducer;function Fi(t){var{zIndex:e,children:n}=t,r=hne(),i=r&&e!==void 0&&e!==0,o=Sr(),c=En();_.useLayoutEffect(()=>i?(c(pce({zIndex:e})),()=>{c(gce({zIndex:e}))}):Vc,[c,e,i]);var u=Le(h=>ace(h,e,o));return i?u?aM.createPortal(n,u):null:n}function ow(){return ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ow.apply(null,arguments)}function kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(n),!0).forEach(function(r){xce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xce(t,e,n){return(e=_ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ce(t){var e=jce(t,"string");return typeof e=="symbol"?e:e+""}function jce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wce(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return _.isValidElement(e)?_.cloneElement(e,r):_.createElement(n,r)}function Nce(t){var e,{coordinate:n,payload:r,index:i,offset:o,tooltipAxisBandSize:c,layout:u,cursor:h,tooltipEventType:f,chartName:p}=t,g=n,y=r,x=i;if(!h||!g||p!=="ScatterChart"&&f!=="axis")return null;var N,j,E;if(p==="ScatterChart")N=g,j=ere,E=er.cursorLine;else if(p==="BarChart")N=tre(u,g,o,c),j=l5,E=er.cursorRectangle;else if(u==="radial"&&WL(g)){var{cx:A,cy:R,radius:T,startAngle:I,endAngle:M}=c5(g);N={cx:A,cy:R,startAngle:I,endAngle:M,innerRadius:T,outerRadius:T},j=d5,E=er.cursorLine}else N={points:Hre(u,g,o)},j=r5,E=er.cursorLine;var B=typeof h=="object"&&"className"in h?h.className:void 0,D=Eg(Eg(Eg(Eg({stroke:"#ccc",pointerEvents:"none"},o),N),fm(h)),{},{payload:y,payloadIndex:x,className:Ut("recharts-tooltip-cursor",B)});return _.createElement(Fi,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:E},_.createElement(wce,{cursor:h,cursorComp:j,cursorProps:D}))}function Ece(t){var e=Fle(),n=F3(),r=Bc(),i=Xle();return e==null||n==null||r==null||i==null?null:_.createElement(Nce,ow({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var wq=_.createContext(null),Sce=()=>_.useContext(wq),j1={exports:{}},Dk;function Ace(){return Dk||(Dk=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(h,f,p){this.fn=h,this.context=f,this.once=p||!1}function o(h,f,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,g||h,y),N=n?n+f:f;return h._events[N]?h._events[N].fn?h._events[N]=[h._events[N],x]:h._events[N].push(x):(h._events[N]=x,h._eventsCount++),h}function c(h,f){--h._eventsCount===0?h._events=new r:delete h._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],p,g;if(this._eventsCount===0)return f;for(g in p=this._events)e.call(p,g)&&f.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},u.prototype.listeners=function(f){var p=n?n+f:f,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,x=g.length,N=new Array(x);y<x;y++)N[y]=g[y].fn;return N},u.prototype.listenerCount=function(f){var p=n?n+f:f,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(f,p,g,y,x,N){var j=n?n+f:f;if(!this._events[j])return!1;var E=this._events[j],A=arguments.length,R,T;if(E.fn){switch(E.once&&this.removeListener(f,E.fn,void 0,!0),A){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,g),!0;case 4:return E.fn.call(E.context,p,g,y),!0;case 5:return E.fn.call(E.context,p,g,y,x),!0;case 6:return E.fn.call(E.context,p,g,y,x,N),!0}for(T=1,R=new Array(A-1);T<A;T++)R[T-1]=arguments[T];E.fn.apply(E.context,R)}else{var I=E.length,M;for(T=0;T<I;T++)switch(E[T].once&&this.removeListener(f,E[T].fn,void 0,!0),A){case 1:E[T].fn.call(E[T].context);break;case 2:E[T].fn.call(E[T].context,p);break;case 3:E[T].fn.call(E[T].context,p,g);break;case 4:E[T].fn.call(E[T].context,p,g,y);break;default:if(!R)for(M=1,R=new Array(A-1);M<A;M++)R[M-1]=arguments[M];E[T].fn.apply(E[T].context,R)}}return!0},u.prototype.on=function(f,p,g){return o(this,f,p,g,!1)},u.prototype.once=function(f,p,g){return o(this,f,p,g,!0)},u.prototype.removeListener=function(f,p,g,y){var x=n?n+f:f;if(!this._events[x])return this;if(!p)return c(this,x),this;var N=this._events[x];if(N.fn)N.fn===p&&(!y||N.once)&&(!g||N.context===g)&&c(this,x);else{for(var j=0,E=[],A=N.length;j<A;j++)(N[j].fn!==p||y&&!N[j].once||g&&N[j].context!==g)&&E.push(N[j]);E.length?this._events[x]=E.length===1?E[0]:E:c(this,x)}return this},u.prototype.removeAllListeners=function(f){var p;return f?(p=n?n+f:f,this._events[p]&&c(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(j1)),j1.exports}var Tce=Ace();const Cce=ra(Tce);var Kf=new Cce,lw="recharts.syncEvent.tooltip",Mk="recharts.syncEvent.brush",Nq=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Zs(n))return t[n]}},Ice={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},Eq=ti({name:"options",initialState:Ice,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Pce=Eq.reducer,{createEventEmitter:Oce}=Eq.actions;function Rce(t){return t.tooltip.syncInteraction}var kce={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Sq=ti({name:"chartData",initialState:kce,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:zk,setDataStartEndIndexes:Dce,setComputedData:Zve}=Sq.actions,Mce=Sq.reducer,zce=["x","y"];function Lk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lk(Object(n),!0).forEach(function(r){Lce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lce(t,e,n){return(e=qce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qce(t){var e=Uce(t,"string");return typeof e=="symbol"?e:e+""}function Uce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vce(t,e){if(t==null)return{};var n,r,i=Bce(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $ce(){var t=Le(RE),e=Le(kE),n=En(),r=Le(o6),i=Le(ao),o=Bc(),c=s0(),u=Le(h=>h.rootProps.className);_.useEffect(()=>{if(t==null)return Vc;var h=(f,p,g)=>{if(e!==g&&t===f){if(r==="index"){var y;if(c&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var x=p.payload.coordinate,{x:N,y:j}=x,E=Vce(x,zce),{x:A,y:R,width:T,height:I}=p.payload.sourceViewBox,M=qu(qu({},E),{},{x:c.x+(T?(N-A)/T:0)*c.width,y:c.y+(I?(j-R)/I:0)*c.height});n(qu(qu({},p),{},{payload:qu(qu({},p.payload),{},{coordinate:M})}))}else n(p);return}if(i!=null){var B;if(typeof r=="function"){var D={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},P=r(i,D);B=i[P]}else r==="value"&&(B=i.find(H=>String(H.value)===p.payload.label));var{coordinate:k}=p.payload;if(B==null||p.payload.active===!1||k==null||c==null){n(sw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:q,y:L}=k,z=Math.min(q,c.x+c.width),V=Math.min(L,c.y+c.height),ve={x:o==="horizontal"?B.coordinate:z,y:o==="horizontal"?V:B.coordinate},ee=sw({active:p.payload.active,coordinate:ve,dataKey:p.payload.dataKey,index:String(B.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});n(ee)}}};return Kf.on(lw,h),()=>{Kf.off(lw,h)}},[u,n,e,t,r,i,o,c])}function Fce(){var t=Le(RE),e=Le(kE),n=En();_.useEffect(()=>{if(t==null)return Vc;var r=(i,o,c)=>{e!==c&&t===i&&n(Dce(o))};return Kf.on(Mk,r),()=>{Kf.off(Mk,r)}},[n,e,t])}function Hce(){var t=En();_.useEffect(()=>{t(Oce())},[t]),$ce(),Fce()}function Gce(t,e,n,r,i,o){var c=Le(x=>Zle(x,t,e)),u=Le(kE),h=Le(RE),f=Le(o6),p=Le(Rce),g=p?.active,y=s0();_.useEffect(()=>{if(!g&&h!=null&&u!=null){var x=sw({active:o,coordinate:n,dataKey:c,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:y,graphicalItemId:void 0});Kf.emit(lw,h,x,u)}},[g,n,c,i,r,u,h,f,o,y])}function qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(n),!0).forEach(function(r){Kce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kce(t,e,n){return(e=Qce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qce(t){var e=Wce(t,"string");return typeof e=="symbol"?e:e+""}function Wce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yce(t){return t.dataKey}function Xce(t,e){return _.isValidElement(t)?_.cloneElement(t,e):typeof t=="function"?_.createElement(t,e):_.createElement(Rne,e)}var Vk=[],Jce={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Bk(t){var e,n,r=Mr(t,Jce),{active:i,allowEscapeViewBox:o,animationDuration:c,animationEasing:u,content:h,filterNull:f,isAnimationActive:p,offset:g,payloadUniqBy:y,position:x,reverseDirection:N,useTranslate3d:j,wrapperStyle:E,cursor:A,shared:R,trigger:T,defaultIndex:I,portal:M,axisId:B}=r,D=En(),P=typeof I=="number"?String(I):I;_.useEffect(()=>{D(Qoe({shared:R,trigger:T,axisId:B,active:i,defaultIndex:P}))},[D,R,T,B,i,P]);var k=s0(),q=n5(),L=Boe(R),{activeIndex:z,isActive:V}=(e=Le(ce=>nce(ce,L,T,P)))!==null&&e!==void 0?e:{},ve=Le(ce=>tce(ce,L,T,P)),ee=Le(ce=>_q(ce,L,T,P)),H=Le(ce=>ece(ce,L,T,P)),se=ve,X=Sce(),we=(n=i??V)!==null&&n!==void 0?n:!1,[W,F]=yee([se,we]),re=L==="axis"?ee:void 0;Gce(L,T,H,re,z,we);var de=M??X;if(de==null||k==null||L==null)return null;var ye=se??Vk;we||(ye=Vk),f&&ye.length&&(ye=FZ(ye.filter(ce=>ce.value!=null&&(ce.hide!==!0||r.includeHidden)),y,Yce));var he=ye.length>0,G=_.createElement(Une,{allowEscapeViewBox:o,animationDuration:c,animationEasing:u,isAnimationActive:p,active:we,coordinate:H,hasPayload:he,offset:g,position:x,reverseDirection:N,useTranslate3d:j,viewBox:k,wrapperStyle:E,lastBoundingBox:W,innerRef:F,hasPortalFromProps:!!M},Xce(h,Uk(Uk({},r),{},{payload:ye,label:re,active:we,activeIndex:z,coordinate:H,accessibilityLayer:q})));return _.createElement(_.Fragment,null,aM.createPortal(G,de),we&&_.createElement(Ece,{cursor:A,tooltipEventType:L,coordinate:H,payload:ye,index:z}))}var iS=t=>null;iS.displayName="Cell";function Zce(t,e,n){return(e=eue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eue(t){var e=tue(t,"string");return typeof e=="symbol"?e:e+""}function tue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class nue{constructor(e){Zce(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function $k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(n),!0).forEach(function(r){iue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iue(t,e,n){return(e=sue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sue(t){var e=aue(t,"string");return typeof e=="symbol"?e:e+""}function aue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oue={cacheSize:2e3,enableCache:!0},Aq=rue({},oue),Fk=new nue(Aq.cacheSize),lue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Hk="recharts_measurement_span";function cue(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",c=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(c,"|").concat(u)}var Gk=(t,e)=>{try{var n=document.getElementById(Hk);n||(n=document.createElement("span"),n.setAttribute("id",Hk),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,lue,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},bf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||c0.isSsr)return{width:0,height:0};if(!Aq.enableCache)return Gk(e,n);var r=cue(e,n),i=Fk.get(r);if(i)return i;var o=Gk(e,n);return Fk.set(r,o),o},Tq;function uue(t,e,n){return(e=due(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function due(t){var e=hue(t,"string");return typeof e=="symbol"?e:e+""}function hue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pue={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gue=["cm","mm","pt","pc","in","Q","px"];function vue(t){return gue.includes(t)}var Wu="NaN";function yue(t,e){return t*pue[e]}class dr{static parse(e){var n,[,r,i]=(n=mue.exec(e))!==null&&n!==void 0?n:[];return r==null?dr.NaN:new dr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Zs(e)&&(this.unit=""),n!==""&&!fue.test(n)&&(this.num=NaN,this.unit=""),vue(n)&&(this.num=yue(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new dr(NaN,""):new dr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new dr(NaN,""):new dr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new dr(NaN,""):new dr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new dr(NaN,""):new dr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zs(this.num)}}Tq=dr;uue(dr,"NaN",new Tq(NaN,""));function Cq(t){if(t==null||t.includes(Wu))return Wu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=Kk.exec(e))!==null&&n!==void 0?n:[],c=dr.parse(r??""),u=dr.parse(o??""),h=i==="*"?c.multiply(u):c.divide(u);if(h.isNaN())return Wu;e=e.replace(Kk,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,p,g,y]=(f=Qk.exec(e))!==null&&f!==void 0?f:[],x=dr.parse(p??""),N=dr.parse(y??""),j=g==="+"?x.add(N):x.subtract(N);if(j.isNaN())return Wu;e=e.replace(Qk,j.toString())}return e}var Wk=/\(([^()]*)\)/;function bue(t){for(var e=t,n;(n=Wk.exec(e))!=null;){var[,r]=n;e=e.replace(Wk,Cq(r))}return e}function xue(t){var e=t.replace(/\s+/g,"");return e=bue(e),e=Cq(e),e}function _ue(t){try{return xue(t)}catch{return Wu}}function w1(t){var e=_ue(t.slice(5,-1));return e===Wu?"":e}var jue=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],wue=["dx","dy","angle","className","breakAll"];function cw(){return cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cw.apply(null,arguments)}function Yk(t,e){if(t==null)return{};var n,r,i=Nue(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Iq=/[ \f\n\r\t\v\u2028\u2029]+/,Pq=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];an(e)||(n?i=e.toString().split(""):i=e.toString().split(Iq));var o=i.map(u=>({word:u,width:bf(u,r).width})),c=n?0:bf("",r).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}};function Eue(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Oq=(t,e,n,r)=>t.reduce((i,o)=>{var{word:c,width:u}=o,h=i[i.length-1];if(h&&u!=null&&(e==null||r||h.width+u+n<Number(e)))h.words.push(c),h.width+=u+n;else{var f={words:[c],width:u};i.push(f)}return i},[]),Rq=t=>t.reduce((e,n)=>e.width>n.width?e:n),Sue="",Xk=(t,e,n,r,i,o,c,u)=>{var h=t.slice(0,e),f=Pq({breakAll:n,style:r,children:h+Sue});if(!f)return[!1,[]];var p=Oq(f.wordsWithComputedWidth,o,c,u),g=p.length>i||Rq(p).width>Number(o);return[g,p]},Aue=(t,e,n,r,i)=>{var{maxLines:o,children:c,style:u,breakAll:h}=t,f=ke(o),p=String(c),g=Oq(e,r,n,i);if(!f||i)return g;var y=g.length>o||Rq(g).width>Number(r);if(!y)return g;for(var x=0,N=p.length-1,j=0,E;x<=N&&j<=p.length-1;){var A=Math.floor((x+N)/2),R=A-1,[T,I]=Xk(p,R,h,u,o,r,n,i),[M]=Xk(p,A,h,u,o,r,n,i);if(!T&&!M&&(x=A+1),T&&M&&(N=A-1),!T&&M){E=I;break}j++}return E||g},Jk=t=>{var e=an(t)?[]:t.toString().split(Iq);return[{words:e,width:void 0}]},Tue=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:c}=t;if((e||n)&&!c0.isSsr){var u,h,f=Pq({breakAll:o,children:r,style:i});if(f){var{wordsWithComputedWidth:p,spaceWidth:g}=f;u=p,h=g}else return Jk(r);return Aue({breakAll:o,children:r,maxLines:c,style:i},u,h,e,!!n)}return Jk(r)},kq="#808080",Cue={angle:0,breakAll:!1,capHeight:"0.71em",fill:kq,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},sS=_.forwardRef((t,e)=>{var n=Mr(t,Cue),{x:r,y:i,lineHeight:o,capHeight:c,fill:u,scaleToFit:h,textAnchor:f,verticalAnchor:p}=n,g=Yk(n,jue),y=_.useMemo(()=>Tue({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:h,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,h,g.style,g.width]),{dx:x,dy:N,angle:j,className:E,breakAll:A}=g,R=Yk(g,wue);if(!ea(r)||!ea(i)||y.length===0)return null;var T=Number(r)+(ke(x)?x:0),I=Number(i)+(ke(N)?N:0);if(!vt(T)||!vt(I))return null;var M;switch(p){case"start":M=w1("calc(".concat(c,")"));break;case"middle":M=w1("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:M=w1("calc(".concat(y.length-1," * -").concat(o,")"));break}var B=[],D=y[0];if(h&&D!=null){var P=D.width,{width:k}=g;B.push("scale(".concat(ke(k)&&ke(P)?k/P:1,")"))}return j&&B.push("rotate(".concat(j,", ").concat(T,", ").concat(I,")")),B.length&&(R.transform=B.join(" ")),_.createElement("text",cw({},kr(R),{ref:e,x:T,y:I,className:Ut("recharts-text",E),textAnchor:f,fill:u.includes("url")?kq:u}),y.map((q,L)=>{var z=q.words.join(A?"":" ");return _.createElement("tspan",{x:T,dy:L===0?M:o,key:"".concat(z,"-").concat(L)},z)}))});sS.displayName="Text";function Zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zk(Object(n),!0).forEach(function(r){Iue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Iue(t,e,n){return(e=Pue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pue(t){var e=Oue(t,"string");return typeof e=="symbol"?e:e+""}function Oue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rue=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:o,y:c,height:u,upperWidth:h,lowerWidth:f}=rE(e),p=o,g=o+(h-f)/2,y=(p+g)/2,x=(h+f)/2,N=p+h/2,j=u>=0?1:-1,E=j*r,A=j>0?"end":"start",R=j>0?"start":"end",T=h>=0?1:-1,I=T*r,M=T>0?"end":"start",B=T>0?"start":"end",D=i;if(n==="top"){var P={x:p+h/2,y:c-E,horizontalAnchor:"middle",verticalAnchor:A};return D&&(P.height=Math.max(c-D.y,0),P.width=h),P}if(n==="bottom"){var k={x:g+f/2,y:c+u+E,horizontalAnchor:"middle",verticalAnchor:R};return D&&(k.height=Math.max(D.y+D.height-(c+u),0),k.width=f),k}if(n==="left"){var q={x:y-I,y:c+u/2,horizontalAnchor:M,verticalAnchor:"middle"};return D&&(q.width=Math.max(q.x-D.x,0),q.height=u),q}if(n==="right"){var L={x:y+x+I,y:c+u/2,horizontalAnchor:B,verticalAnchor:"middle"};return D&&(L.width=Math.max(D.x+D.width-L.x,0),L.height=u),L}var z=D?{width:x,height:u}:{};return n==="insideLeft"?zs({x:y+I,y:c+u/2,horizontalAnchor:B,verticalAnchor:"middle"},z):n==="insideRight"?zs({x:y+x-I,y:c+u/2,horizontalAnchor:M,verticalAnchor:"middle"},z):n==="insideTop"?zs({x:p+h/2,y:c+E,horizontalAnchor:"middle",verticalAnchor:R},z):n==="insideBottom"?zs({x:g+f/2,y:c+u-E,horizontalAnchor:"middle",verticalAnchor:A},z):n==="insideTopLeft"?zs({x:p+I,y:c+E,horizontalAnchor:B,verticalAnchor:R},z):n==="insideTopRight"?zs({x:p+h-I,y:c+E,horizontalAnchor:M,verticalAnchor:R},z):n==="insideBottomLeft"?zs({x:g+I,y:c+u-E,horizontalAnchor:B,verticalAnchor:A},z):n==="insideBottomRight"?zs({x:g+f-I,y:c+u-E,horizontalAnchor:M,verticalAnchor:A},z):n&&typeof n=="object"&&(ke(n.x)||Tc(n.x))&&(ke(n.y)||Tc(n.y))?zs({x:o+ps(n.x,x),y:c+ps(n.y,u),horizontalAnchor:"end",verticalAnchor:"end"},z):zs({x:N,y:c+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},z)},kue=["labelRef"],Due=["content"];function eD(t,e){if(t==null)return{};var n,r,i=Mue(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Mue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function tD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tD(Object(n),!0).forEach(function(r){zue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zue(t,e,n){return(e=Lue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lue(t){var e=que(t,"string");return typeof e=="symbol"?e:e+""}function que(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ta.apply(null,arguments)}var Dq=_.createContext(null),Uue=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:o,height:c,children:u}=t,h=_.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:o,height:c}),[e,n,r,i,o,c]);return _.createElement(Dq.Provider,{value:h},u)},Mq=()=>{var t=_.useContext(Dq),e=s0();return t||(e?rE(e):void 0)},Vue=_.createContext(null),Bue=()=>{var t=_.useContext(Vue),e=Le(h6);return t||e},$ue=t=>{var{value:e,formatter:n}=t,r=an(t.children)?e:t.children;return typeof n=="function"?n(r):r},aS=t=>t!=null&&typeof t=="function",Fue=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Hue=(t,e,n,r,i)=>{var{offset:o,className:c}=t,{cx:u,cy:h,innerRadius:f,outerRadius:p,startAngle:g,endAngle:y,clockWise:x}=i,N=(f+p)/2,j=Fue(g,y),E=j>=0?1:-1,A,R;switch(e){case"insideStart":A=g+E*o,R=x;break;case"insideEnd":A=y-E*o,R=!x;break;case"end":A=y+E*o,R=x;break;default:throw new Error("Unsupported position ".concat(e))}R=j<=0?R:!R;var T=mr(u,h,N,A),I=mr(u,h,N,A+(R?1:-1)*359),M="M".concat(T.x,",").concat(T.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(R?0:1,`,
    `).concat(I.x,",").concat(I.y),B=an(t.id)?kf("recharts-radial-line-"):t.id;return _.createElement("text",Ta({},r,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",c)}),_.createElement("defs",null,_.createElement("path",{id:B,d:M})),_.createElement("textPath",{xlinkHref:"#".concat(B)},n))},Gue=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:c,startAngle:u,endAngle:h}=t,f=(u+h)/2;if(n==="outside"){var{x:p,y:g}=mr(r,i,c+e,f);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(o+c)/2,{x,y:N}=mr(r,i,y,f);return{x,y:N,textAnchor:"middle",verticalAnchor:"middle"}},Gg=t=>t!=null&&"cx"in t&&ke(t.cx),Kue={angle:0,offset:5,zIndex:er.label,position:"middle",textBreakAll:!1};function Que(t){if(!Gg(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function Ho(t){var e=Mr(t,Kue),{viewBox:n,parentViewBox:r,position:i,value:o,children:c,content:u,className:h="",textBreakAll:f,labelRef:p}=e,g=Bue(),y=Mq(),x=i==="center"?y:g??y,N,j,E;n==null?N=x:Gg(n)?N=n:N=rE(n);var A=Que(N);if(!N||an(o)&&an(c)&&!_.isValidElement(u)&&typeof u!="function")return null;var R=uf(uf({},e),{},{viewBox:N});if(_.isValidElement(u)){var{labelRef:T}=R,I=eD(R,kue);return _.cloneElement(u,I)}if(typeof u=="function"){var{content:M}=R,B=eD(R,Due);if(j=_.createElement(u,B),_.isValidElement(j))return j}else j=$ue(e);var D=kr(e);if(Gg(N)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Hue(e,i,j,D,N);E=Gue(N,e.offset,e.position)}else{if(!A)return null;var P=Rue({viewBox:A,position:i,offset:e.offset,parentViewBox:Gg(r)?void 0:r});E=uf(uf({x:P.x,y:P.y,textAnchor:P.horizontalAnchor,verticalAnchor:P.verticalAnchor},P.width!==void 0?{width:P.width}:{}),P.height!==void 0?{height:P.height}:{})}return _.createElement(Fi,{zIndex:e.zIndex},_.createElement(sS,Ta({ref:p,className:Ut("recharts-label",h)},D,E,{textAnchor:Eue(D.textAnchor)?D.textAnchor:E.textAnchor,breakAll:f}),j))}Ho.displayName="Label";var Wue=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?_.createElement(Ho,Ta({key:"label-implicit"},r)):ea(t)?_.createElement(Ho,Ta({key:"label-implicit",value:t},r)):_.isValidElement(t)?t.type===Ho?_.cloneElement(t,uf({key:"label-implicit"},r)):_.createElement(Ho,Ta({key:"label-implicit",content:t},r)):aS(t)?_.createElement(Ho,Ta({key:"label-implicit",content:t},r)):t&&typeof t=="object"?_.createElement(Ho,Ta({},t,{key:"label-implicit"},r)):null};function Yue(t){var{label:e,labelRef:n}=t,r=Mq();return Wue(e,r,n)||null}var N1={},E1={},nD;function Xue(){return nD||(nD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(E1)),E1}var S1={},rD;function Jue(){return rD||(rD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(S1)),S1}var iD;function Zue(){return iD||(iD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xue(),n=Jue(),r=GN();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(N1)),N1}var A1,sD;function ede(){return sD||(sD=1,A1=Zue().last),A1}var tde=ede();const nde=ra(tde);var rde=["valueAccessor"],ide=["dataKey","clockWise","id","textBreakAll","zIndex"];function ry(){return ry=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ry.apply(null,arguments)}function aD(t,e){if(t==null)return{};var n,r,i=sde(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ade=t=>Array.isArray(t.value)?nde(t.value):t.value,zq=_.createContext(void 0),Lq=zq.Provider,qq=_.createContext(void 0);qq.Provider;function ode(){return _.useContext(zq)}function lde(){return _.useContext(qq)}function Kg(t){var{valueAccessor:e=ade}=t,n=aD(t,rde),{dataKey:r,clockWise:i,id:o,textBreakAll:c,zIndex:u}=n,h=aD(n,ide),f=ode(),p=lde(),g=f||p;return!g||!g.length?null:_.createElement(Fi,{zIndex:u??er.label},_.createElement(Ui,{className:"recharts-label-list"},g.map((y,x)=>{var N,j=an(r)?e(y,x):zn(y.payload,r),E=an(o)?{}:{id:"".concat(o,"-").concat(x)};return _.createElement(Ho,ry({key:"label-".concat(x)},kr(y),h,E,{fill:(N=n.fill)!==null&&N!==void 0?N:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:c,viewBox:y.viewBox,index:x,zIndex:0}))})))}Kg.displayName="LabelList";function Uq(t){var{label:e}=t;return e?e===!0?_.createElement(Kg,{key:"labelList-implicit"}):_.isValidElement(e)||aS(e)?_.createElement(Kg,{key:"labelList-implicit",content:e}):typeof e=="object"?_.createElement(Kg,ry({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function uw(){return uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uw.apply(null,arguments)}var Vq=t=>{var{cx:e,cy:n,r,className:i}=t,o=Ut("recharts-dot",i);return ke(e)&&ke(n)&&ke(r)?_.createElement("circle",uw({},ms(t),FN(t),{className:o,cx:e,cy:n,r})):null},cde={radiusAxis:{},angleAxis:{}},Bq=ti({name:"polarAxis",initialState:cde,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:eye,removeRadiusAxis:tye,addAngleAxis:nye,removeAngleAxis:rye}=Bq.actions,ude=Bq.reducer;function dde(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var T1={exports:{}},qt={};var oD;function hde(){if(oD)return qt;oD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function N(j){if(typeof j=="object"&&j!==null){var E=j.$$typeof;switch(E){case t:switch(j=j.type,j){case n:case i:case r:case h:case f:case y:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case g:case p:return j;case o:return j;default:return E}}case e:return E}}}return qt.ContextConsumer=o,qt.ContextProvider=c,qt.Element=t,qt.ForwardRef=u,qt.Fragment=n,qt.Lazy=g,qt.Memo=p,qt.Portal=e,qt.Profiler=i,qt.StrictMode=r,qt.Suspense=h,qt.SuspenseList=f,qt.isContextConsumer=function(j){return N(j)===o},qt.isContextProvider=function(j){return N(j)===c},qt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},qt.isForwardRef=function(j){return N(j)===u},qt.isFragment=function(j){return N(j)===n},qt.isLazy=function(j){return N(j)===g},qt.isMemo=function(j){return N(j)===p},qt.isPortal=function(j){return N(j)===e},qt.isProfiler=function(j){return N(j)===i},qt.isStrictMode=function(j){return N(j)===r},qt.isSuspense=function(j){return N(j)===h},qt.isSuspenseList=function(j){return N(j)===f},qt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===i||j===r||j===h||j===f||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===p||j.$$typeof===c||j.$$typeof===o||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},qt.typeOf=N,qt}var lD;function fde(){return lD||(lD=1,T1.exports=hde()),T1.exports}var mde=fde(),cD=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",uD=null,C1=null,$q=t=>{if(t===uD&&Array.isArray(C1))return C1;var e=[];return _.Children.forEach(t,n=>{an(n)||(mde.isFragment(n)?e=e.concat($q(n.props.children)):e.push(n))}),C1=e,uD=t,e};function pde(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>cD(i)):r=[cD(e)],$q(t).forEach(i=>{var o=md(i,"type.displayName")||md(i,"type.name");o&&r.indexOf(o)!==-1&&n.push(i)}),n}var Fq=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,I1={},dD;function gde(){return dD||(dD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(I1)),I1}var P1,hD;function vde(){return hD||(hD=1,P1=gde().isPlainObject),P1}var yde=vde();const bde=ra(yde);var fD,mD,pD,gD,vD;function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){xde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xde(t,e,n){return(e=_de(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _de(t){var e=jde(t,"string");return typeof e=="symbol"?e:e+""}function jde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iy(){return iy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iy.apply(null,arguments)}function Xh(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var xD=(t,e,n,r,i)=>{var o=n-r,c;return c=mn(fD||(fD=Xh(["M ",",",""])),t,e),c+=mn(mD||(mD=Xh(["L ",",",""])),t+n,e),c+=mn(pD||(pD=Xh(["L ",",",""])),t+n-o/2,e+i),c+=mn(gD||(gD=Xh(["L ",",",""])),t+n-o/2-r,e+i),c+=mn(vD||(vD=Xh(["L ",","," Z"])),t,e),c},wde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nde=t=>{var e=Mr(t,wde),{x:n,y:r,upperWidth:i,lowerWidth:o,height:c,className:u}=e,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:g}=e,y=_.useRef(null),[x,N]=_.useState(-1),j=_.useRef(i),E=_.useRef(o),A=_.useRef(c),R=_.useRef(n),T=_.useRef(r),I=d0(t,"trapezoid-");if(_.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ve=y.current.getTotalLength();ve&&N(ve)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||c!==+c||i===0&&o===0||c===0)return null;var M=Ut("recharts-trapezoid",u);if(!g)return _.createElement("g",null,_.createElement("path",iy({},kr(e),{className:M,d:xD(n,r,i,o,c)})));var B=j.current,D=E.current,P=A.current,k=R.current,q=T.current,L="0px ".concat(x===-1?1:x,"px"),z="".concat(x,"px 0px"),V=i5(["strokeDasharray"],f,h);return _.createElement(u0,{animationId:I,key:I,canBegin:x>0,duration:f,easing:h,isActive:g,begin:p},ve=>{var ee=pn(B,i,ve),H=pn(D,o,ve),se=pn(P,c,ve),X=pn(k,n,ve),we=pn(q,r,ve);y.current&&(j.current=ee,E.current=H,A.current=se,R.current=X,T.current=we);var W=ve>0?{transition:V,strokeDasharray:z}:{strokeDasharray:L};return _.createElement("path",iy({},kr(e),{className:M,d:xD(X,we,ee,H,se),ref:y,style:bD(bD({},W),e.style)}))})},Ede=["option","shapeType","activeClassName"];function Sde(t,e){if(t==null)return{};var n,r,i=Ade(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ade(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_D(Object(n),!0).forEach(function(r){Tde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tde(t,e,n){return(e=Cde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cde(t){var e=Ide(t,"string");return typeof e=="symbol"?e:e+""}function Ide(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pde(t,e){return sy(sy({},e),t)}function Ode(t,e){return t==="symbols"}function jD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return _.createElement(l5,n);case"trapezoid":return _.createElement(Nde,n);case"sector":return _.createElement(d5,n);case"symbols":if(Ode(e))return _.createElement(QL,n);break;case"curve":return _.createElement(r5,n);default:return null}}function Rde(t){return _.isValidElement(t)?t.props:t}function Hq(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Sde(t,Ede),o;if(_.isValidElement(e))o=_.cloneElement(e,sy(sy({},i),Rde(e)));else if(typeof e=="function")o=e(i,i.index);else if(bde(e)&&typeof e!="boolean"){var c=Pde(e,i);o=_.createElement(jD,{shapeType:n,elementProps:c})}else{var u=i;o=_.createElement(jD,{shapeType:n,elementProps:u})}return i.isActive?_.createElement(Ui,{className:r},o):o}var Gq=(t,e,n)=>{var r=En();return(i,o)=>c=>{t?.(i,o,c),r(tq({activeIndex:String(o),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Kq=t=>{var e=En();return(n,r)=>i=>{t?.(n,r,i),e(Woe())}},Qq=(t,e,n)=>{var r=En();return(i,o)=>c=>{t?.(i,o,c),r(Yoe({activeIndex:String(o),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function Wq(t){var{tooltipEntrySettings:e}=t,n=En(),r=Sr(),i=_.useRef(null);return _.useLayoutEffect(()=>{r||(i.current===null?n(Hoe(e)):i.current!==e&&n(Goe({prev:i.current,next:e})),i.current=e)},[e,n,r]),_.useLayoutEffect(()=>()=>{i.current&&(n(Koe(i.current)),i.current=null)},[n]),null}function Yq(t){var{legendPayload:e}=t,n=En(),r=Sr(),i=_.useRef(null);return _.useLayoutEffect(()=>{r||(i.current===null?n(Ene(e)):i.current!==e&&n(Sne({prev:i.current,next:e})),i.current=e)},[n,r,e]),_.useLayoutEffect(()=>()=>{i.current&&(n(Ane(i.current)),i.current=null)},[n]),null}var O1,kde=()=>{var[t]=_.useState(()=>kf("uid-"));return t},Dde=(O1=iM.useId)!==null&&O1!==void 0?O1:kde;function Mde(t,e){var n=Dde();return e||(t?"".concat(t,"-").concat(n):n)}var zde=_.createContext(void 0),Xq=t=>{var{id:e,type:n,children:r}=t,i=Mde("recharts-".concat(n),e);return _.createElement(zde.Provider,{value:i},r(i))},Lde={cartesianItems:[],polarItems:[]},Jq=ti({name:"graphicalItems",initialState:Lde,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Zt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ds(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Zt()},removeCartesianGraphicalItem:{reducer(t,e){var n=ds(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Zt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Zt()},removePolarGraphicalItem:{reducer(t,e){var n=ds(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Zt()}}}),{addCartesianGraphicalItem:qde,replaceCartesianGraphicalItem:Ude,removeCartesianGraphicalItem:Vde,addPolarGraphicalItem:iye,removePolarGraphicalItem:sye}=Jq.actions,Bde=Jq.reducer,$de=t=>{var e=En(),n=_.useRef(null);return _.useLayoutEffect(()=>{n.current===null?e(qde(t)):n.current!==t&&e(Ude({prev:n.current,next:t})),n.current=t},[e,t]),_.useLayoutEffect(()=>()=>{n.current&&(e(Vde(n.current)),n.current=null)},[e]),null},Zq=_.memo($de),Fde=["points"];function wD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(n),!0).forEach(function(r){Hde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hde(t,e,n){return(e=Gde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gde(t){var e=Kde(t,"string");return typeof e=="symbol"?e:e+""}function Kde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ay(){return ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ay.apply(null,arguments)}function Qde(t,e){if(t==null)return{};var n,r,i=Wde(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Yde(t){var{option:e,dotProps:n,className:r}=t;if(_.isValidElement(e))return _.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Ut(r,typeof e!="boolean"?e.className:""),o=n??{},{points:c}=o,u=Qde(o,Fde);return _.createElement(Vq,ay({},u,{className:i}))}function Xde(t,e){return t==null?!1:e?!0:t.length===1}function Jde(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:o,baseProps:c,needClip:u,clipPathId:h,zIndex:f=er.scatter}=t;if(!Xde(e,n))return null;var p=Fq(n),g=gJ(n),y=e.map((N,j)=>{var E,A,R=R1(R1(R1({r:3},c),g),{},{index:j,cx:(E=N.x)!==null&&E!==void 0?E:void 0,cy:(A=N.y)!==null&&A!==void 0?A:void 0,dataKey:o,value:N.value,payload:N.payload,points:e});return _.createElement(Yde,{key:"dot-".concat(j),option:n,dotProps:R,className:i})}),x={};return u&&h!=null&&(x.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(h,")")),_.createElement(Fi,{zIndex:f},_.createElement(Ui,ay({className:r},x),y))}function ND(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ED(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(n),!0).forEach(function(r){Zde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ND(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zde(t,e,n){return(e=ehe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ehe(t){var e=the(t,"string");return typeof e=="symbol"?e:e+""}function the(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e9=0,nhe={xAxis:{},yAxis:{},zAxis:{}},t9=ti({name:"cartesianAxis",initialState:nhe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Zt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Zt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Zt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Zt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Zt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Zt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Zt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Zt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Zt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var o,c=i.widthHistory||[];if(c.length===3&&c[0]===c[2]&&r===c[1]&&r!==i.width&&Math.abs(r-((o=c[0])!==null&&o!==void 0?o:0))<=1)return;var u=[...c,r].slice(-3);t.yAxis[n]=ED(ED({},i),{},{width:r,widthHistory:u})}}}}),{addXAxis:rhe,replaceXAxis:ihe,removeXAxis:she,addYAxis:ahe,replaceYAxis:ohe,removeYAxis:lhe,addZAxis:aye,replaceZAxis:oye,removeZAxis:lye,updateYAxisWidth:che}=t9.actions,uhe=t9.reducer,dhe=fe([tr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),hhe=fe([dhe,eo,to],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),oS=()=>Le(hhe),fhe=()=>Le(qle);function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){mhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mhe(t,e,n){return(e=phe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function phe(t){var e=ghe(t,"string");return typeof e=="symbol"?e:e+""}function ghe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vhe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:o,clipPath:c}=t;if(i===!1||e.x==null||e.y==null)return null;var u={index:n,dataKey:o,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},h=k1(k1(k1({},u),fm(i)),FN(i)),f;return _.isValidElement(i)?f=_.cloneElement(i,h):typeof i=="function"?f=i(h):f=_.createElement(Vq,h),_.createElement(Ui,{className:"recharts-active-dot",clipPath:c},f)};function yhe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:o,zIndex:c=er.activeDot}=t,u=Le(Rc),h=fhe();if(e==null||h==null)return null;var f=e.find(p=>h.includes(p.payload));return an(f)?null:_.createElement(Fi,{zIndex:c},_.createElement(vhe,{point:f,childIndex:Number(u),mainColor:n,dataKey:i,activeDot:r,clipPath:o}))}var AD=(t,e,n)=>{var r=n??t;if(!an(r))return ps(r,e,0)},bhe=(t,e,n)=>{var r={},i=t.filter(w0),o=t.filter(f=>f.stackId==null),c=i.reduce((f,p)=>{var g=f[p.stackId];return g==null&&(g=[]),g.push(p),f[p.stackId]=g,f},r),u=Object.entries(c).map(f=>{var p,[g,y]=f,x=y.map(j=>j.dataKey),N=AD(e,n,(p=y[0])===null||p===void 0?void 0:p.barSize);return{stackId:g,dataKeys:x,barSize:N}}),h=o.map(f=>{var p=[f.dataKey].filter(y=>y!=null),g=AD(e,n,f.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...h]};function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){xhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xhe(t,e,n){return(e=_he(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _he(t){var e=jhe(t,"string");return typeof e=="symbol"?e:e+""}function jhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function whe(t,e,n,r,i){var o,c=r.length;if(!(c<1)){var u=ps(t,n,0,!0),h,f=[];if(vt((o=r[0])===null||o===void 0?void 0:o.barSize)){var p=!1,g=n/c,y=r.reduce((R,T)=>R+(T.barSize||0),0);y+=(c-1)*u,y>=n&&(y-=(c-1)*u,u=0),y>=n&&g>0&&(p=!0,g*=.9,y=c*g);var x=(n-y)/2>>0,N={offset:x-u,size:0};h=r.reduce((R,T)=>{var I,M={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:N.offset+N.size+u,size:p?g:(I=T.barSize)!==null&&I!==void 0?I:0}},B=[...R,M];return N=M.position,B},f)}else{var j=ps(e,n,0,!0);n-2*j-(c-1)*u<=0&&(u=0);var E=(n-2*j-(c-1)*u)/c;E>1&&(E>>=0);var A=vt(i)?Math.min(E,i):E;h=r.reduce((R,T,I)=>[...R,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:j+(E+u)*I+(E-A)/2,size:A}}],f)}return h}}var Nhe=(t,e,n,r,i,o,c)=>{var u=an(c)?e:c,h=whe(n,r,i!==o?i:o,t,u);return i!==o&&h!=null&&(h=h.map(f=>Sg(Sg({},f),{},{position:Sg(Sg({},f.position),{},{offset:f.position.offset-i/2})}))),h},Ehe=(t,e)=>{var n=LE(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(c=>c.key===n)}}}},She=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function Ahe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&vt(t.zIndex)?t.zIndex:e}var The=t=>{var{chartData:e}=t,n=En(),r=Sr();return _.useEffect(()=>r?()=>{}:(n(zk(e)),()=>{n(zk(void 0))}),[e,n,r]),null},CD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},n9=ti({name:"brush",initialState:CD,reducers:{setBrushSettings(t,e){return e.payload==null?CD:e.payload}}}),{setBrushSettings:cye}=n9.actions,Che=n9.reducer;function Ihe(t){return(t%180+180)%180}var Phe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Ihe(i),c=o*Math.PI/180,u=Math.atan(r/n),h=c>u&&c<Math.PI-u?r/Math.sin(c):n/Math.cos(c);return Math.abs(h)},Ohe={dots:[],areas:[],lines:[]},r9=ti({name:"referenceElements",initialState:Ohe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ds(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ds(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ds(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:uye,removeDot:dye,addArea:hye,removeArea:fye,addLine:mye,removeLine:pye}=r9.actions,Rhe=r9.reducer,khe=_.createContext(void 0),Dhe=t=>{var{children:e}=t,[n]=_.useState("".concat(kf("recharts"),"-clip")),r=oS();if(r==null)return null;var{x:i,y:o,width:c,height:u}=r;return _.createElement(khe.Provider,{value:n},_.createElement("defs",null,_.createElement("clipPath",{id:n},_.createElement("rect",{x:i,y:o,height:u,width:c}))),e)};function i9(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Mhe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Phe(r,n)}function zhe(t,e,n){var r=n==="width",{x:i,y:o,width:c,height:u}=t;return e===1?{start:r?i:o,end:r?i+c:o+u}:{start:r?i+c:o+u,end:r?i:o}}function Qf(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Lhe(t,e){return i9(t,e+1)}function qhe(t,e,n,r,i){for(var o=(r||[]).slice(),{start:c,end:u}=e,h=0,f=1,p=c,g=function(){var N=r?.[h];if(N===void 0)return{v:i9(r,f)};var j=h,E,A=()=>(E===void 0&&(E=n(N,j)),E),R=N.coordinate,T=h===0||Qf(t,R,A,p,u);T||(h=0,p=c,f+=1),T&&(p=R+t*(A()/2+i),h+=f)},y;f<=o.length;)if(y=g(),y)return y.v;return[]}function Uhe(t,e,n,r,i){var o=(r||[]).slice(),c=o.length;if(c===0)return[];for(var{start:u,end:h}=e,f=1;f<=c;f++){for(var p=(c-1)%f,g=u,y=!0,x=function(){var I=r[j];if(I==null)return 0;var M=j,B,D=()=>(B===void 0&&(B=n(I,M)),B),P=I.coordinate,k=j===p||Qf(t,P,D,g,h);if(!k)return y=!1,1;k&&(g=P+t*(D()/2+i))},N,j=p;j<c&&(N=x(),!(N!==0&&N===1));j+=f);if(y){for(var E=[],A=p;A<c;A+=f){var R=r[A];R!=null&&E.push(R)}return E}}return[]}function ID(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ID(Object(n),!0).forEach(function(r){Vhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vhe(t,e,n){return(e=Bhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bhe(t){var e=$he(t,"string");return typeof e=="symbol"?e:e+""}function $he(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fhe(t,e,n,r,i){for(var o=(r||[]).slice(),c=o.length,{start:u}=e,{end:h}=e,f=function(y){var x=o[y];if(x==null)return 1;var N=x,j,E=()=>(j===void 0&&(j=n(x,y)),j);if(y===c-1){var A=t*(N.coordinate+t*E()/2-h);o[y]=N=br(br({},N),{},{tickCoord:A>0?N.coordinate-A*t:N.coordinate})}else o[y]=N=br(br({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var R=Qf(t,N.tickCoord,E,u,h);R&&(h=N.tickCoord-t*(E()/2+i),o[y]=br(br({},N),{},{isShow:!0}))}},p=c-1;p>=0;p--)f(p);return o}function Hhe(t,e,n,r,i,o){var c=(r||[]).slice(),u=c.length,{start:h,end:f}=e;if(o){var p=r[u-1];if(p!=null){var g=n(p,u-1),y=t*(p.coordinate+t*g/2-f);if(c[u-1]=p=br(br({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate}),p.tickCoord!=null){var x=Qf(t,p.tickCoord,()=>g,h,f);x&&(f=p.tickCoord-t*(g/2+i),c[u-1]=br(br({},p),{},{isShow:!0}))}}}for(var N=o?u-1:u,j=function(R){var T=c[R];if(T==null)return 1;var I=T,M,B=()=>(M===void 0&&(M=n(T,R)),M);if(R===0){var D=t*(I.coordinate-t*B()/2-h);c[R]=I=br(br({},I),{},{tickCoord:D<0?I.coordinate-D*t:I.coordinate})}else c[R]=I=br(br({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var P=Qf(t,I.tickCoord,B,h,f);P&&(h=I.tickCoord+t*(B()/2+i),c[R]=br(br({},I),{},{isShow:!0}))}},E=0;E<N;E++)j(E);return c}function lS(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:c,orientation:u,interval:h,tickFormatter:f,unit:p,angle:g}=t;if(!i||!i.length||!r)return[];if(ke(h)||c0.isSsr){var y;return(y=Lhe(i,ke(h)?h:0))!==null&&y!==void 0?y:[]}var x=[],N=u==="top"||u==="bottom"?"width":"height",j=p&&N==="width"?bf(p,{fontSize:e,letterSpacing:n}):{width:0,height:0},E=(M,B)=>{var D=typeof f=="function"?f(M.value,B):M.value;return N==="width"?Mhe(bf(D,{fontSize:e,letterSpacing:n}),j,g):bf(D,{fontSize:e,letterSpacing:n})[N]},A=i[0],R=i[1],T=i.length>=2&&A!=null&&R!=null?Xr(R.coordinate-A.coordinate):1,I=zhe(o,T,N);return h==="equidistantPreserveStart"?qhe(T,I,E,i,c):h==="equidistantPreserveEnd"?Uhe(T,I,E,i,c):(h==="preserveStart"||h==="preserveStartEnd"?x=Hhe(T,I,E,i,c,h==="preserveStartEnd"):x=Fhe(T,I,E,i,c),x.filter(M=>M.isShow))}var Ghe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,c=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var u=n?n.getBoundingClientRect().width:0,h=i+o,f=c+h+u+(n?r:0);return Math.round(f)}return 0},Khe=["axisLine","width","height","className","hide","ticks","axisType"];function Qhe(t,e){if(t==null)return{};var n,r,i=Whe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Whe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kc.apply(null,arguments)}function PD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PD(Object(n),!0).forEach(function(r){Yhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yhe(t,e,n){return(e=Xhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xhe(t){var e=Jhe(t,"string");return typeof e=="symbol"?e:e+""}function Jhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var za={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:er.axis};function Zhe(t){var{x:e,y:n,width:r,height:i,orientation:o,mirror:c,axisLine:u,otherSvgProps:h}=t;if(!u)return null;var f=hn(hn(hn({},h),ms(u)),{},{fill:"none"});if(o==="top"||o==="bottom"){var p=+(o==="top"&&!c||o==="bottom"&&c);f=hn(hn({},f),{},{x1:e,y1:n+p*i,x2:e+r,y2:n+p*i})}else{var g=+(o==="left"&&!c||o==="right"&&c);f=hn(hn({},f),{},{x1:e+g*r,y1:n,x2:e+g*r,y2:n+i})}return _.createElement("line",kc({},f,{className:Ut("recharts-cartesian-axis-line",md(u,"className"))}))}function efe(t,e,n,r,i,o,c,u,h){var f,p,g,y,x,N,j=u?-1:1,E=t.tickSize||c,A=ke(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":f=p=t.coordinate,y=n+ +!u*i,g=y-j*E,N=g-j*h,x=A;break;case"left":g=y=t.coordinate,p=e+ +!u*r,f=p-j*E,x=f-j*h,N=A;break;case"right":g=y=t.coordinate,p=e+ +u*r,f=p+j*E,x=f+j*h,N=A;break;default:f=p=t.coordinate,y=n+ +u*i,g=y+j*E,N=g+j*h,x=A;break}return{line:{x1:f,y1:g,x2:p,y2:y},tick:{x,y:N}}}function tfe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function nfe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function rfe(t){var{option:e,tickProps:n,value:r}=t,i,o=Ut(n.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(e))i=_.cloneElement(e,hn(hn({},n),{},{className:o}));else if(typeof e=="function")i=e(hn(hn({},n),{},{className:o}));else{var c="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(c=Ut(c,dde(e))),i=_.createElement(sS,kc({},n,{className:c}),r)}return i}var ife=_.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:o,tickFormatter:c,unit:u,padding:h,tickTextProps:f,orientation:p,mirror:g,x:y,y:x,width:N,height:j,tickSize:E,tickMargin:A,fontSize:R,letterSpacing:T,getTicksConfig:I,events:M,axisType:B}=t,D=lS(hn(hn({},I),{},{ticks:n}),R,T),P=tfe(p,g),k=nfe(p,g),q=ms(I),L=fm(r),z={};typeof i=="object"&&(z=i);var V=hn(hn({},q),{},{fill:"none"},z),ve=D.map(se=>hn({entry:se},efe(se,y,x,N,j,p,E,g,A))),ee=ve.map(se=>{var{entry:X,line:we}=se;return _.createElement(Ui,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},i&&_.createElement("line",kc({},V,we,{className:Ut("recharts-cartesian-axis-tick-line",md(i,"className"))})))}),H=ve.map((se,X)=>{var we,W,{entry:F,tick:re}=se,de=hn(hn(hn(hn({verticalAnchor:k},q),{},{textAnchor:P,stroke:"none",fill:o},re),{},{index:X,payload:F,visibleTicksCount:D.length,tickFormatter:c,padding:h},f),{},{angle:(we=(W=f?.angle)!==null&&W!==void 0?W:q.angle)!==null&&we!==void 0?we:0}),ye=hn(hn({},de),L);return _.createElement(Ui,kc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(F.value,"-").concat(F.coordinate,"-").concat(F.tickCoord)},HN(M,F,X)),r&&_.createElement(rfe,{option:r,tickProps:ye,value:"".concat(typeof c=="function"?c(F.value,X):F.value).concat(u||"")}))});return _.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(B,"-ticks")},H.length>0&&_.createElement(Fi,{zIndex:er.label},_.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(B,"-tick-labels"),ref:e},H)),ee.length>0&&_.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(B,"-tick-lines")},ee))}),sfe=_.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:o,hide:c,ticks:u,axisType:h}=t,f=Qhe(t,Khe),[p,g]=_.useState(""),[y,x]=_.useState(""),N=_.useRef(null);_.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var E;return Ghe({ticks:N.current,label:(E=t.labelRef)===null||E===void 0?void 0:E.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var j=_.useCallback(E=>{if(E){var A=E.getElementsByClassName("recharts-cartesian-axis-tick-value");N.current=A;var R=A[0];if(R){var T=window.getComputedStyle(R),I=T.fontSize,M=T.letterSpacing;(I!==p||M!==y)&&(g(I),x(M))}}},[p,y]);return c||r!=null&&r<=0||i!=null&&i<=0?null:_.createElement(Fi,{zIndex:t.zIndex},_.createElement(Ui,{className:Ut("recharts-cartesian-axis",o)},_.createElement(Zhe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:ms(t)}),_.createElement(ife,{ref:j,axisType:h,events:f,fontSize:p,getTicksConfig:t,height:t.height,letterSpacing:y,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:u,unit:t.unit,width:t.width,x:t.x,y:t.y}),_.createElement(Uue,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},_.createElement(Yue,{label:t.label,labelRef:t.labelRef}),t.children)))}),cS=_.forwardRef((t,e)=>{var n=Mr(t,za);return _.createElement(sfe,kc({},n,{ref:e}))});cS.displayName="CartesianAxis";var afe=["x1","y1","x2","y2","key"],ofe=["offset"],lfe=["xAxisId","yAxisId"],cfe=["xAxisId","yAxisId"];function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){ufe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ufe(t,e,n){return(e=dfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dfe(t){var e=hfe(t,"string");return typeof e=="symbol"?e:e+""}function hfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(null,arguments)}function oy(t,e){if(t==null)return{};var n,r,i=ffe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ffe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var mfe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:c,ry:u}=t;return _.createElement("rect",{x:r,y:i,ry:u,width:o,height:c,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function s9(t){var{option:e,lineItemProps:n}=t,r;if(_.isValidElement(e))r=_.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:o,y1:c,x2:u,y2:h,key:f}=n,p=oy(n,afe),g=(i=ms(p))!==null&&i!==void 0?i:{},{offset:y}=g,x=oy(g,ofe);r=_.createElement("line",uc({},x,{x1:o,y1:c,x2:u,y2:h,fill:"none",key:f}))}return r}function pfe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:c}=t,u=oy(t,lfe),h=i.map((f,p)=>{var g=jr(jr({},u),{},{x1:e,y1:f,x2:e+n,y2:f,key:"line-".concat(p),index:p});return _.createElement(s9,{key:"line-".concat(p),option:r,lineItemProps:g})});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function gfe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:c}=t,u=oy(t,cfe),h=i.map((f,p)=>{var g=jr(jr({},u),{},{x1:f,y1:e,x2:f,y2:e+n,key:"line-".concat(p),index:p});return _.createElement(s9,{option:r,lineItemProps:g,key:"line-".concat(p)})});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function vfe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:o,height:c,horizontalPoints:u,horizontal:h=!0}=t;if(!h||!e||!e.length||u==null)return null;var f=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==f[0]&&f.unshift(0);var p=f.map((g,y)=>{var x=f[y+1],N=x==null,j=N?i+c-g:x-g;if(j<=0)return null;var E=y%e.length;return _.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:j,width:o,stroke:"none",fill:e[E],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function yfe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:c,height:u,verticalPoints:h}=t;if(!e||!n||!n.length)return null;var f=h.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==f[0]&&f.unshift(0);var p=f.map((g,y)=>{var x=f[y+1],N=x==null,j=N?i+c-g:x-g;if(j<=0)return null;var E=y%n.length;return _.createElement("rect",{key:"react-".concat(y),x:g,y:o,width:j,height:u,stroke:"none",fill:n[E],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var bfe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:o}=t;return L3(lS(jr(jr(jr({},za),n),{},{ticks:q3(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,e)},xfe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:o}=t;return L3(lS(jr(jr(jr({},za),n),{},{ticks:q3(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,e)},_fe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:er.grid};function dw(t){var e=H3(),n=G3(),r=F3(),i=jr(jr({},Mr(t,_fe)),{},{x:ke(t.x)?t.x:r.left,y:ke(t.y)?t.y:r.top,width:ke(t.width)?t.width:r.width,height:ke(t.height)?t.height:r.height}),{xAxisId:o,yAxisId:c,x:u,y:h,width:f,height:p,syncWithTicks:g,horizontalValues:y,verticalValues:x}=i,N=Sr(),j=Le(k=>Ek(k,"xAxis",o,N)),E=Le(k=>Ek(k,"yAxis",c,N));if(!ta(f)||!ta(p)||!ke(u)||!ke(h))return null;var A=i.verticalCoordinatesGenerator||bfe,R=i.horizontalCoordinatesGenerator||xfe,{horizontalPoints:T,verticalPoints:I}=i;if((!T||!T.length)&&typeof R=="function"){var M=y&&y.length,B=R({yAxis:E?jr(jr({},E),{},{ticks:M?y:E.ticks}):void 0,width:e??f,height:n??p,offset:r},M?!0:g);Rv(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(T=B)}if((!I||!I.length)&&typeof A=="function"){var D=x&&x.length,P=A({xAxis:j?jr(jr({},j),{},{ticks:D?x:j.ticks}):void 0,width:e??f,height:n??p,offset:r},D?!0:g);Rv(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(I=P)}return _.createElement(Fi,{zIndex:i.zIndex},_.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(mfe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),_.createElement(vfe,uc({},i,{horizontalPoints:T})),_.createElement(yfe,uc({},i,{verticalPoints:I})),_.createElement(pfe,uc({},i,{offset:r,horizontalPoints:T,xAxis:j,yAxis:E})),_.createElement(gfe,uc({},i,{offset:r,verticalPoints:I,xAxis:j,yAxis:E}))))}dw.displayName="CartesianGrid";var jfe={},a9=ti({name:"errorBars",initialState:jfe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:gye,replaceErrorBar:vye,removeErrorBar:yye}=a9.actions,wfe=a9.reducer,Nfe=["children"];function Efe(t,e){if(t==null)return{};var n,r,i=Sfe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Sfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Afe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Tfe=_.createContext(Afe);function o9(t){var{children:e}=t,n=Efe(t,Nfe);return _.createElement(Tfe.Provider,{value:n},e)}function uS(t,e){var n,r,i=Le(f=>io(f,t)),o=Le(f=>so(f,e)),c=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Yn.allowDataOverflow,u=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:Xn.allowDataOverflow,h=c||u;return{needClip:h,needClipX:c,needClipY:u}}function l9(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=oS(),{needClipX:o,needClipY:c,needClip:u}=uS(e,n);if(!u||!i)return null;var{x:h,y:f,width:p,height:g}=i;return _.createElement("clipPath",{id:"clipPath-".concat(r)},_.createElement("rect",{x:o?h:h-p/2,y:c?f:f-g/2,width:o?p:p*2,height:c?g:g*2}))}var c9=(t,e,n,r)=>vl(t,"xAxis",e,r),u9=(t,e,n,r)=>gl(t,"xAxis",e,r),d9=(t,e,n,r)=>vl(t,"yAxis",n,r),h9=(t,e,n,r)=>gl(t,"yAxis",n,r),Cfe=fe([Ot,c9,d9,u9,h9],(t,e,n,r,i)=>Za(t,"xAxis")?gd(e,r,!1):gd(n,i,!1)),Ife=(t,e,n,r,i)=>i;function Pfe(t){return t.type==="line"}var Ofe=fe([S0,Ife],(t,e)=>t.filter(Pfe).find(n=>n.id===e)),Rfe=fe([Ot,c9,d9,u9,h9,Ofe,Cfe,CE],(t,e,n,r,i,o,c,u)=>{var{chartData:h,dataStartIndex:f,dataEndIndex:p}=u;if(!(o==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:g,data:y}=o,x;if(y!=null&&y.length>0?x=y:x=h?.slice(f,p+1),x!=null)return xme({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:x})}});function kfe(t){var e=fm(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:o}=e,c=Number(i),u=Number(o);return(Number.isNaN(c)||c<0)&&(c=n),(Number.isNaN(u)||u<0)&&(u=r),{r:c,strokeWidth:u}}return{r:n,strokeWidth:r}}var D1={exports:{}},M1={};var RD;function Dfe(){if(RD)return M1;RD=1;var t=_d();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return M1.useSyncExternalStoreWithSelector=function(h,f,p,g,y){var x=i(null);if(x.current===null){var N={hasValue:!1,value:null};x.current=N}else N=x.current;x=c(function(){function E(M){if(!A){if(A=!0,R=M,M=g(M),y!==void 0&&N.hasValue){var B=N.value;if(y(B,M))return T=B}return T=M}if(B=T,n(R,M))return B;var D=g(M);return y!==void 0&&y(B,D)?(R=M,B):(R=M,T=D)}var A=!1,R,T,I=p===void 0?null:p;return[function(){return E(f())},I===null?void 0:function(){return E(I())}]},[f,p,g,y]);var j=r(h,x[0],x[1]);return o(function(){N.hasValue=!0,N.value=j},[j]),u(j),j},M1}var kD;function Mfe(){return kD||(kD=1,D1.exports=Dfe()),D1.exports}Mfe();function zfe(t){t()}function Lfe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){zfe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var DD={notify(){},get:()=>[]};function qfe(t,e){let n,r=DD,i=0,o=!1;function c(j){p();const E=r.subscribe(j);let A=!1;return()=>{A||(A=!0,E(),g())}}function u(){r.notify()}function h(){N.onStateChange&&N.onStateChange()}function f(){return o}function p(){i++,n||(n=t.subscribe(h),r=Lfe())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=DD)}function y(){o||(o=!0,p())}function x(){o&&(o=!1,g())}const N={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:f,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return N}var Ufe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vfe=Ufe(),Bfe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$fe=Bfe(),Ffe=()=>Vfe||$fe?_.useLayoutEffect:_.useEffect,Hfe=Ffe();function MD(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Gfe(t,e){if(MD(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!MD(t[n[i]],e[n[i]]))return!1;return!0}var Kfe=Symbol.for("react-redux-context"),Qfe=typeof globalThis<"u"?globalThis:{};function Wfe(){if(!_.createContext)return{};const t=Qfe[Kfe]??=new Map;let e=t.get(_.createContext);return e||(e=_.createContext(null),t.set(_.createContext,e)),e}var Yfe=Wfe();function Xfe(t){const{children:e,context:n,serverState:r,store:i}=t,o=_.useMemo(()=>{const h=qfe(i);return{store:i,subscription:h,getServerState:r?()=>r:void 0}},[i,r]),c=_.useMemo(()=>i.getState(),[i]);Hfe(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,c]);const u=n||Yfe;return _.createElement(u.Provider,{value:o},e)}var Jfe=Xfe,Zfe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function eme(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function P0(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Zfe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Gfe(t[r],e[r]))return!1}else if(!eme(t[r],e[r]))return!1;return!0}var tme=["id"],nme=["type","layout","connectNulls","needClip","shape"],rme=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wf.apply(null,arguments)}function zD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zD(Object(n),!0).forEach(function(r){ime(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ime(t,e,n){return(e=sme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sme(t){var e=ame(t,"string");return typeof e=="symbol"?e:e+""}function ame(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dS(t,e){if(t==null)return{};var n,r,i=ome(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ome(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lme=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:e0(n,e),payload:t}]},cme=_.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:o,name:c,hide:u,unit:h,tooltipType:f,id:p}=t,g={dataDefinedOnItem:n,getPosition:Vc,settings:{stroke:r,strokeWidth:i,fill:o,dataKey:e,nameKey:void 0,name:e0(c,e),hide:u,type:f,color:r,unit:h,graphicalItemId:p}};return _.createElement(Wq,{tooltipEntrySettings:g})}),f9=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function ume(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var dme=(t,e,n)=>{var r=n.reduce((x,N)=>x+N);if(!r)return f9(e,t);for(var i=Math.floor(t/r),o=t%r,c=e-t,u=[],h=0,f=0;h<n.length;f+=(p=n[h])!==null&&p!==void 0?p:0,++h){var p,g=n[h];if(g!=null&&f+g>o){u=[...n.slice(0,h),o-f];break}}var y=u.length%2===0?[0,c]:[c];return[...ume(n,i),...u,...y].map(x=>"".concat(x,"px")).join(", ")};function hme(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:o,needClip:c}=r,{id:u}=r,h=dS(r,tme),f=ms(h);return _.createElement(Jde,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:f,needClip:c,clipPathId:e})}function fme(t){var{showLabels:e,children:n,points:r}=t,i=_.useMemo(()=>r?.map(o=>{var c,u,h={x:(c=o.x)!==null&&c!==void 0?c:0,y:(u=o.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return qs(qs({},h),{},{value:o.value,payload:o.payload,viewBox:h,parentViewBox:void 0,fill:void 0})}),[r]);return _.createElement(Lq,{value:e?i:void 0},n)}function LD(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:o}=t,{type:c,layout:u,connectNulls:h,needClip:f,shape:p}=o,g=dS(o,nme),y=qs(qs({},kr(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:f?"url(#clipPath-".concat(e,")"):void 0,points:r,type:c,layout:u,connectNulls:h,strokeDasharray:i??o.strokeDasharray});return _.createElement(_.Fragment,null,r?.length>1&&_.createElement(Hq,Wf({shapeType:"curve",option:p},y,{pathRef:n})),_.createElement(hme,{points:r,clipPathId:e,props:o}))}function mme(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function pme(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:o}=t,{points:c,strokeDasharray:u,isAnimationActive:h,animationBegin:f,animationDuration:p,animationEasing:g,animateNewValues:y,width:x,height:N,onAnimationEnd:j,onAnimationStart:E}=n,A=i.current,R=d0(c,"recharts-line-"),T=_.useRef(R),[I,M]=_.useState(!1),B=!I,D=_.useCallback(()=>{typeof j=="function"&&j(),M(!1)},[j]),P=_.useCallback(()=>{typeof E=="function"&&E(),M(!0)},[E]),k=mme(r.current),q=_.useRef(0);T.current!==R&&(q.current=o.current,T.current=R);var L=q.current;return _.createElement(fme,{points:c,showLabels:B},n.children,_.createElement(u0,{animationId:R,begin:f,duration:p,isActive:h,easing:g,onAnimationEnd:D,onAnimationStart:P,key:R},z=>{var V=pn(L,k+L,z),ve=Math.min(V,k),ee;if(h)if(u){var H="".concat(u).split(/[,\s]+/gim).map(we=>parseFloat(we));ee=dme(ve,k,H)}else ee=f9(k,ve);else ee=u==null?void 0:String(u);if(z>0&&k>0&&(i.current=c,o.current=Math.max(o.current,ve)),A){var se=A.length/c.length,X=z===1?c:c.map((we,W)=>{var F=Math.floor(W*se);if(A[F]){var re=A[F];return qs(qs({},we),{},{x:pn(re.x,we.x,z),y:pn(re.y,we.y,z)})}return y?qs(qs({},we),{},{x:pn(x*2,we.x,z),y:pn(N/2,we.y,z)}):qs(qs({},we),{},{x:we.x,y:we.y})});return i.current=X,_.createElement(LD,{props:n,points:X,clipPathId:e,pathRef:r,strokeDasharray:ee})}return _.createElement(LD,{props:n,points:c,clipPathId:e,pathRef:r,strokeDasharray:ee})}),_.createElement(Uq,{label:n.label}))}function gme(t){var{clipPathId:e,props:n}=t,r=_.useRef(null),i=_.useRef(0),o=_.useRef(null);return _.createElement(pme,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:o})}var vme=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:zn(t.payload,e)}};class yme extends _.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:o,yAxisId:c,top:u,left:h,width:f,height:p,id:g,needClip:y,zIndex:x}=this.props;if(e)return null;var N=Ut("recharts-line",i),j=g,{r:E,strokeWidth:A}=kfe(n),R=Fq(n),T=E*2+A,I=y?"url(#clipPath-".concat(R?"":"dots-").concat(j,")"):void 0;return _.createElement(Fi,{zIndex:x},_.createElement(Ui,{className:N},y&&_.createElement("defs",null,_.createElement(l9,{clipPathId:j,xAxisId:o,yAxisId:c}),!R&&_.createElement("clipPath",{id:"clipPath-dots-".concat(j)},_.createElement("rect",{x:h-T/2,y:u-T/2,width:f+T,height:p+T}))),_.createElement(o9,{xAxisId:o,yAxisId:c,data:r,dataPointFormatter:vme,errorBarOffset:0},_.createElement(gme,{props:this.props,clipPathId:j}))),_.createElement(yhe,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:I}))}}var m9={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:er.line,type:"linear"};function bme(t){var e=Mr(t,m9),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:c,connectNulls:u,dot:h,hide:f,isAnimationActive:p,label:g,legendType:y,xAxisId:x,yAxisId:N,id:j}=e,E=dS(e,rme),{needClip:A}=uS(x,N),R=oS(),T=Bc(),I=Sr(),M=Le(q=>Rfe(q,x,N,I,j));if(T!=="horizontal"&&T!=="vertical"||M==null||R==null)return null;var{height:B,width:D,x:P,y:k}=R;return _.createElement(yme,Wf({},E,{id:j,connectNulls:u,dot:h,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:c,isAnimationActive:p,hide:f,label:g,legendType:y,xAxisId:x,yAxisId:N,points:M,layout:T,height:B,width:D,left:P,top:k,needClip:A}))}function xme(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,dataKey:c,bandSize:u,displayedData:h}=t;return h.map((f,p)=>{var g=zn(f,c);if(e==="horizontal"){var y=wO({axis:n,ticks:i,bandSize:u,entry:f,index:p}),x=an(g)?null:r.scale.map(g);return{x:y,y:x??null,value:g,payload:f}}var N=an(g)?null:n.scale.map(g),j=wO({axis:r,ticks:o,bandSize:u,entry:f,index:p});return N==null||j==null?null:{x:N,y:j,value:g,payload:f}}).filter(Boolean)}function _me(t){var e=Mr(t,m9),n=Sr();return _.createElement(Xq,{id:e.id,type:"line"},r=>_.createElement(_.Fragment,null,_.createElement(Yq,{legendPayload:lme(e)}),_.createElement(cme,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),_.createElement(Zq,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),_.createElement(bme,Wf({},e,{id:r}))))}var p9=_.memo(_me,P0);p9.displayName="Line";function Hc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:e9}function Gc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:e9}var jme="Invariant failed";function wme(t,e){throw new Error(jme)}function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hw.apply(null,arguments)}function ly(t){return _.createElement(Hq,hw({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Nme=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(ke(e))return e;var o=ke(r)||an(r);return o?e(r,i):(o||wme(),n)}},Eme=(t,e,n)=>n,Sme=(t,e)=>e,Im=fe([S0,Sme],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Ame=fe([Im],t=>t?.maxBarSize),Tme=(t,e,n,r)=>r,Cme=fe([Ot,S0,Hc,Gc,Eme],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),Ime=(t,e,n)=>{var r=Ot(t),i=Hc(t,e),o=Gc(t,e);if(!(i==null||o==null))return r==="horizontal"?iw(t,"yAxis",o,n):iw(t,"xAxis",i,n)},Pme=(t,e)=>{var n=Ot(t),r=Hc(t,e),i=Gc(t,e);if(!(r==null||i==null))return n==="horizontal"?Nk(t,"xAxis",r):Nk(t,"yAxis",i)},Ome=fe([Cme,kae,Pme],bhe),Rme=(t,e,n)=>{var r,i,o=Im(t,e);if(o==null)return 0;var c=Hc(t,e),u=Gc(t,e);if(c==null||u==null)return 0;var h=Ot(t),f=i6(t),{maxBarSize:p}=o,g=an(p)?f:p,y,x;return h==="horizontal"?(y=vl(t,"xAxis",c,n),x=gl(t,"xAxis",c,n)):(y=vl(t,"yAxis",u,n),x=gl(t,"yAxis",u,n)),(r=(i=gd(y,x,!0))!==null&&i!==void 0?i:g)!==null&&r!==void 0?r:0},g9=(t,e,n)=>{var r=Ot(t),i=Hc(t,e),o=Gc(t,e);if(!(i==null||o==null)){var c,u;return r==="horizontal"?(c=vl(t,"xAxis",i,n),u=gl(t,"xAxis",i,n)):(c=vl(t,"yAxis",o,n),u=gl(t,"yAxis",o,n)),gd(c,u)}},kme=fe([Ome,i6,Rae,s6,Rme,g9,Ame],Nhe),Dme=(t,e,n)=>{var r=Hc(t,e);if(r!=null)return vl(t,"xAxis",r,n)},Mme=(t,e,n)=>{var r=Gc(t,e);if(r!=null)return vl(t,"yAxis",r,n)},zme=(t,e,n)=>{var r=Hc(t,e);if(r!=null)return gl(t,"xAxis",r,n)},Lme=(t,e,n)=>{var r=Gc(t,e);if(r!=null)return gl(t,"yAxis",r,n)},qme=fe([kme,Im],She),Ume=fe([Ime,Im],Ehe),Vme=fe([tr,tE,Dme,Mme,zme,Lme,qme,Ot,Eae,g9,Ume,Im,Tme],(t,e,n,r,i,o,c,u,h,f,p,g,y)=>{var{chartData:x,dataStartIndex:N,dataEndIndex:j}=h;if(!(g==null||c==null||e==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||o==null||f==null)){var{data:E}=g,A;if(E!=null&&E.length>0?A=E:A=x?.slice(N,j+1),A!=null)return ppe({layout:u,barSettings:g,pos:c,parentViewBox:e,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:p,displayedData:A,offset:t,cells:y,dataStartIndex:N})}}),Bme=["index"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(null,arguments)}function $me(t,e){if(t==null)return{};var n,r,i=Fme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var v9=_.createContext(void 0),Hme=t=>{var e=_.useContext(v9);if(e!=null)return e.stackId;if(t!=null)return Tte(t)},Gme=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Kme=t=>{var e=_.useContext(v9);if(e!=null){var{stackId:n}=e;return"url(#".concat(Gme(n,t),")")}},y9=t=>{var{index:e}=t,n=$me(t,Bme),r=Kme(e);return _.createElement(Ui,fw({className:"recharts-bar-stack-layer",clipPath:r},n))},Qme=["onMouseEnter","onMouseLeave","onClick"],Wme=["value","background","tooltipPosition"],Yme=["id"],Xme=["onMouseEnter","onClick","onMouseLeave"];function Wa(){return Wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wa.apply(null,arguments)}function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(n),!0).forEach(function(r){Jme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jme(t,e,n){return(e=Zme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zme(t){var e=epe(t,"string");return typeof e=="symbol"?e:e+""}function epe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cy(t,e){if(t==null)return{};var n,r,i=tpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var npe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:e0(n,e),payload:t}]},rpe=_.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:c,unit:u,tooltipType:h,id:f}=t,p={dataDefinedOnItem:void 0,getPosition:Vc,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:e0(o,e),hide:c,type:h,color:i,unit:u,graphicalItemId:f}};return _.createElement(Wq,{tooltipEntrySettings:p})});function ipe(t){var e=Le(Rc),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:c,onMouseLeave:u,onClick:h}=o,f=cy(o,Qme),p=Gq(c,r,o.id),g=Kq(u),y=Qq(h,r,o.id);if(!i||n==null)return null;var x=fm(i);return _.createElement(Fi,{zIndex:Ahe(i,er.barBackground)},n.map((N,j)=>{var{value:E,background:A,tooltipPosition:R}=N,T=cy(N,Wme);if(!A)return null;var I=p(N,j),M=g(N,j),B=y(N,j),D=Ir(Ir(Ir(Ir(Ir({option:i,isActive:String(j)===e},T),{},{fill:"#eee"},A),x),HN(f,N,j)),{},{onMouseEnter:I,onMouseLeave:M,onClick:B,dataKey:r,index:j,className:"recharts-bar-background-rectangle"});return _.createElement(ly,Wa({key:"background-bar-".concat(j)},D))}))}function spe(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(o=>{var c={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Ir(Ir({},c),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:c,fill:o.fill})});return _.createElement(Lq,{value:e?i:void 0},n)}function ape(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:c}=t,u=Le(Rc),h=Le(gq),f=n&&String(o)===u&&(h==null||c===h),p=f?n:e;return f?_.createElement(Fi,{zIndex:er.activeBar},_.createElement(y9,{index:o},_.createElement(ly,Wa({},r,{name:String(r.name)},i,{isActive:f,option:p,index:o,dataKey:c})))):_.createElement(ly,Wa({},r,{name:String(r.name)},i,{isActive:f,option:p,index:o,dataKey:c}))}function ope(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return _.createElement(ly,Wa({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:o}))}function lpe(t){var e,{data:n,props:r}=t,i=(e=ms(r))!==null&&e!==void 0?e:{},{id:o}=i,c=cy(i,Yme),{shape:u,dataKey:h,activeBar:f}=r,{onMouseEnter:p,onClick:g,onMouseLeave:y}=r,x=cy(r,Xme),N=Gq(p,h,o),j=Kq(y),E=Qq(g,h,o);return n?_.createElement(_.Fragment,null,n.map((A,R)=>_.createElement(y9,Wa({index:R,key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(R),className:"recharts-bar-rectangle"},HN(x,A,R),{onMouseEnter:N(A,R),onMouseLeave:j(A,R),onClick:E(A,R)}),f?_.createElement(ape,{shape:u,activeBar:f,baseProps:c,entry:A,index:R,dataKey:h}):_.createElement(ope,{shape:u,baseProps:c,entry:A,index:R,dataKey:h})))):null}function cpe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:c,animationDuration:u,animationEasing:h,onAnimationEnd:f,onAnimationStart:p}=e,g=n.current,y=d0(e,"recharts-bar-"),[x,N]=_.useState(!1),j=!x,E=_.useCallback(()=>{typeof f=="function"&&f(),N(!1)},[f]),A=_.useCallback(()=>{typeof p=="function"&&p(),N(!0)},[p]);return _.createElement(spe,{showLabels:j,rects:r},_.createElement(u0,{animationId:y,begin:c,duration:u,isActive:o,easing:h,onAnimationEnd:E,onAnimationStart:A,key:y},R=>{var T=R===1?r:r?.map((I,M)=>{var B=g&&g[M];if(B)return Ir(Ir({},I),{},{x:pn(B.x,I.x,R),y:pn(B.y,I.y,R),width:pn(B.width,I.width,R),height:pn(B.height,I.height,R)});if(i==="horizontal"){var D=pn(0,I.height,R),P=pn(I.stackedBarStart,I.y,R);return Ir(Ir({},I),{},{y:P,height:D})}var k=pn(0,I.width,R),q=pn(I.stackedBarStart,I.x,R);return Ir(Ir({},I),{},{width:k,x:q})});return R>0&&(n.current=T??null),T==null?null:_.createElement(Ui,null,_.createElement(lpe,{props:e,data:T}))}),_.createElement(Uq,{label:e.label}),e.children)}function upe(t){var e=_.useRef(null);return _.createElement(cpe,{previousRectanglesRef:e,props:t})}var b9=0,dpe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:zn(t,e)}};class hpe extends _.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:c,needClip:u,background:h,id:f}=this.props;if(e||n==null)return null;var p=Ut("recharts-bar",i),g=f;return _.createElement(Ui,{className:p,id:f},u&&_.createElement("defs",null,_.createElement(l9,{clipPathId:g,xAxisId:o,yAxisId:c})),_.createElement(Ui,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},_.createElement(ipe,{data:n,dataKey:r,background:h,allOtherBarProps:this.props}),_.createElement(upe,this.props)))}}var fpe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:b9,xAxisId:0,yAxisId:0,zIndex:er.bar};function mpe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:c,animationBegin:u,animationDuration:h,animationEasing:f,isAnimationActive:p}=t,{needClip:g}=uS(e,n),y=Bc(),x=Sr(),N=pde(t.children,iS),j=Le(R=>Vme(R,t.id,x,N));if(y!=="vertical"&&y!=="horizontal")return null;var E,A=j?.[0];return A==null||A.height==null||A.width==null?E=0:E=y==="vertical"?A.height/2:A.width/2,_.createElement(o9,{xAxisId:e,yAxisId:n,data:j,dataPointFormatter:dpe,errorBarOffset:E},_.createElement(hpe,Wa({},t,{layout:y,needClip:g,data:j,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:c,animationBegin:u,animationDuration:h,animationEasing:f,isAnimationActive:p})))}function ppe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:c,yAxis:u,xAxisTicks:h,yAxisTicks:f,stackedData:p,displayedData:g,offset:y,cells:x,parentViewBox:N,dataStartIndex:j}=t,E=e==="horizontal"?u:c,A=p?E.scale.domain():null,R=Cte({numericAxis:E}),T=E.scale.map(R);return g.map((I,M)=>{var B,D,P,k,q,L;if(p){var z=p[M+j];if(z==null)return null;B=wte(z,A)}else B=zn(I,n),Array.isArray(B)||(B=[R,B]);var V=Nme(r,b9)(B[1],M);if(e==="horizontal"){var ve,ee=u.scale.map(B[0]),H=u.scale.map(B[1]);if(ee==null||H==null)return null;D=NO({axis:c,ticks:h,bandSize:o,offset:i.offset,entry:I,index:M}),P=(ve=H??ee)!==null&&ve!==void 0?ve:void 0,k=i.size;var se=ee-H;if(q=Zs(se)?0:se,L={x:D,y:y.top,width:k,height:y.height},Math.abs(V)>0&&Math.abs(q)<Math.abs(V)){var X=Xr(q||V)*(Math.abs(V)-Math.abs(q));P-=X,q+=X}}else{var we=c.scale.map(B[0]),W=c.scale.map(B[1]);if(we==null||W==null)return null;if(D=we,P=NO({axis:u,ticks:f,bandSize:o,offset:i.offset,entry:I,index:M}),k=W-we,q=i.size,L={x:y.left,y:P,width:y.width,height:q},Math.abs(V)>0&&Math.abs(k)<Math.abs(V)){var F=Xr(k||V)*(Math.abs(V)-Math.abs(k));k+=F}}if(D==null||P==null||k==null||q==null)return null;var re=Ir(Ir({},I),{},{stackedBarStart:T,x:D,y:P,width:k,height:q,value:p?B:B[1],payload:I,background:L,tooltipPosition:{x:D+k/2,y:P+q/2},parentViewBox:N},x&&x[M]&&x[M].props);return re}).filter(Boolean)}function gpe(t){var e=Mr(t,fpe),n=Hme(e.stackId),r=Sr();return _.createElement(Xq,{id:e.id,type:"bar"},i=>_.createElement(_.Fragment,null,_.createElement(Yq,{legendPayload:npe(e)}),_.createElement(rpe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),_.createElement(Zq,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),_.createElement(Fi,{zIndex:e.zIndex},_.createElement(mpe,Wa({},e,{id:i})))))}var x9=_.memo(gpe,P0);x9.displayName="Bar";var vpe=["domain","range"],ype=["domain","range"];function UD(t,e){if(t==null)return{};var n,r,i=bpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function VD(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function _9(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=UD(t,vpe),{domain:o,range:c}=e,u=UD(e,ype);return!VD(n,o)||!VD(r,c)?!1:P0(i,u)}var xpe=["type"],_pe=["dangerouslySetInnerHTML","ticks","scale"],jpe=["id","scale"];function mw(){return mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mw.apply(null,arguments)}function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $D(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){wpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wpe(t,e,n){return(e=Npe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Npe(t){var e=Epe(t,"string");return typeof e=="symbol"?e:e+""}function Epe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pw(t,e){if(t==null)return{};var n,r,i=Spe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Spe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ape(t){var e=En(),n=_.useRef(null),r=K3(),{type:i}=t,o=pw(t,xpe),c=x0(r,"xAxis",i),u=_.useMemo(()=>{if(c!=null)return $D($D({},o),{},{type:c})},[o,c]);return _.useLayoutEffect(()=>{u!=null&&(n.current===null?e(rhe(u)):n.current!==u&&e(ihe({prev:n.current,next:u})),n.current=u)},[u,e]),_.useLayoutEffect(()=>()=>{n.current&&(e(she(n.current)),n.current=null)},[e]),null}var Tpe=t=>{var{xAxisId:e,className:n}=t,r=Le(tE),i=Sr(),o="xAxis",c=Le(A=>W6(A,o,e,i)),u=Le(A=>H6(A,e)),h=Le(A=>Doe(A,e)),f=Le(A=>m6(A,e));if(u==null||h==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:y}=t,x=pw(t,_pe),{id:N,scale:j}=f,E=pw(f,jpe);return _.createElement(cS,mw({},x,E,{x:h.x,y:h.y,width:u.width,height:u.height,className:Ut("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:c,axisType:o}))},Cpe={allowDataOverflow:Yn.allowDataOverflow,allowDecimals:Yn.allowDecimals,allowDuplicatedCategory:Yn.allowDuplicatedCategory,angle:Yn.angle,axisLine:za.axisLine,height:Yn.height,hide:!1,includeHidden:Yn.includeHidden,interval:Yn.interval,label:!1,minTickGap:Yn.minTickGap,mirror:Yn.mirror,orientation:Yn.orientation,padding:Yn.padding,reversed:Yn.reversed,scale:Yn.scale,tick:Yn.tick,tickCount:Yn.tickCount,tickLine:za.tickLine,tickSize:za.tickSize,type:Yn.type,xAxisId:0},Ipe=t=>{var e=Mr(t,Cpe);return _.createElement(_.Fragment,null,_.createElement(Ape,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),_.createElement(Tpe,e))},gw=_.memo(Ipe,_9);gw.displayName="XAxis";var Ppe=["type"],Ope=["dangerouslySetInnerHTML","ticks","scale"],Rpe=["id","scale"];function vw(){return vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vw.apply(null,arguments)}function FD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FD(Object(n),!0).forEach(function(r){kpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kpe(t,e,n){return(e=Dpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dpe(t){var e=Mpe(t,"string");return typeof e=="symbol"?e:e+""}function Mpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yw(t,e){if(t==null)return{};var n,r,i=zpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Lpe(t){var e=En(),n=_.useRef(null),r=K3(),{type:i}=t,o=yw(t,Ppe),c=x0(r,"yAxis",i),u=_.useMemo(()=>{if(c!=null)return HD(HD({},o),{},{type:c})},[c,o]);return _.useLayoutEffect(()=>{u!=null&&(n.current===null?e(ahe(u)):n.current!==u&&e(ohe({prev:n.current,next:u})),n.current=u)},[u,e]),_.useLayoutEffect(()=>()=>{n.current&&(e(lhe(n.current)),n.current=null)},[e]),null}function qpe(t){var{yAxisId:e,className:n,width:r,label:i}=t,o=_.useRef(null),c=_.useRef(null),u=Le(tE),h=Sr(),f=En(),p="yAxis",g=Le(B=>G6(B,e)),y=Le(B=>zoe(B,e)),x=Le(B=>W6(B,p,e,h)),N=Le(B=>p6(B,e));if(_.useLayoutEffect(()=>{if(!(r!=="auto"||!g||aS(i)||_.isValidElement(i)||N==null)){var B=o.current;if(B){var D=B.getCalculatedWidth();Math.round(g.width)!==Math.round(D)&&f(che({id:e,width:D}))}}},[x,g,f,i,e,r,N]),g==null||y==null||N==null)return null;var{dangerouslySetInnerHTML:j,ticks:E,scale:A}=t,R=yw(t,Ope),{id:T,scale:I}=N,M=yw(N,Rpe);return _.createElement(cS,vw({},R,M,{ref:o,labelRef:c,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:Ut("recharts-".concat(p," ").concat(p),n),viewBox:u,ticks:x,axisType:p}))}var Upe={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:Xn.allowDecimals,allowDuplicatedCategory:Xn.allowDuplicatedCategory,angle:Xn.angle,axisLine:za.axisLine,hide:!1,includeHidden:Xn.includeHidden,interval:Xn.interval,label:!1,minTickGap:Xn.minTickGap,mirror:Xn.mirror,orientation:Xn.orientation,padding:Xn.padding,reversed:Xn.reversed,scale:Xn.scale,tick:Xn.tick,tickCount:Xn.tickCount,tickLine:za.tickLine,tickSize:za.tickSize,type:Xn.type,width:Xn.width,yAxisId:0},Vpe=t=>{var e=Mr(t,Upe);return _.createElement(_.Fragment,null,_.createElement(Lpe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),_.createElement(qpe,e))},bw=_.memo(Vpe,_9);bw.displayName="YAxis";var Bpe=(t,e)=>e,hS=fe([Bpe,Ot,h6,ir,hq,ao,Jle,tr],sce),fS=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},j9=Vi("mouseClick"),w9=gm();w9.startListening({actionCreator:j9,effect:(t,e)=>{var n=t.payload,r=hS(e.getState(),fS(n));r?.activeIndex!=null&&e.dispatch(Xoe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var xw=Vi("mouseMove"),N9=gm(),Ag=null;N9.startListening({actionCreator:xw,effect:(t,e)=>{var n=t.payload;Ag!==null&&cancelAnimationFrame(Ag);var r=fS(n);Ag=requestAnimationFrame(()=>{var i=e.getState(),o=QE(i,i.tooltip.settings.shared);if(o==="axis"){var c=hS(i,r);c?.activeIndex!=null?e.dispatch(rq({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):e.dispatch(nq())}Ag=null})}});function $pe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var GD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},E9=ti({name:"rootProps",initialState:GD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:GD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Fpe=E9.reducer,{updateOptions:Hpe}=E9.actions,Gpe=null,Kpe={updatePolarOptions:(t,e)=>e.payload},S9=ti({name:"polarOptions",initialState:Gpe,reducers:Kpe}),{updatePolarOptions:bye}=S9.actions,Qpe=S9.reducer,A9=Vi("keyDown"),T9=Vi("focus"),mS=gm();mS.startListening({actionCreator:A9,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var c=WE(i,Ld(n),Sm(n),Tm(n)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var h=ao(n);if(o==="Enter"){var f=ny(n,"axis","hover",String(i.index));e.dispatch(aw({active:!i.active,activeIndex:i.index,activeCoordinate:f}));return}var p=Voe(n),g=p==="left-to-right"?1:-1,y=o==="ArrowRight"?1:-1,x=u+y*g;if(!(h==null||x>=h.length||x<0)){var N=ny(n,"axis","hover",String(x));e.dispatch(aw({active:!0,activeIndex:x.toString(),activeCoordinate:N}))}}}}}});mS.startListening({actionCreator:T9,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",c=ny(n,"axis","hover",String(o));e.dispatch(aw({active:!0,activeIndex:o,activeCoordinate:c}))}}}});var zi=Vi("externalEvent"),C9=gm(),z1=new Map;C9.startListening({actionCreator:zi,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,o=z1.get(i);o!==void 0&&cancelAnimationFrame(o);var c=requestAnimationFrame(()=>{try{var u=e.getState(),h={activeCoordinate:Mle(u),activeDataKey:gq(u),activeIndex:Rc(u),activeLabel:pq(u),activeTooltipIndex:Rc(u),isTooltipActive:zle(u)};n(h,r)}finally{z1.delete(i)}});z1.set(i,c)}}});var Wpe=fe([Md],t=>t.tooltipItemPayloads),Ype=fe([Wpe,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(o=>o.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),I9=Vi("touchMove"),P9=gm();P9.startListening({actionCreator:I9,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=QE(r,r.tooltip.settings.shared);if(i==="axis"){var o=n.touches[0];if(o==null)return;var c=hS(r,fS({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));c?.activeIndex!=null&&e.dispatch(rq({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,h=n.touches[0];if(document.elementFromPoint==null||h==null)return;var f=document.elementFromPoint(h.clientX,h.clientY);if(!f||!f.getAttribute)return;var p=f.getAttribute(Mte),g=(u=f.getAttribute(zte))!==null&&u!==void 0?u:void 0,y=zd(r).find(j=>j.id===g);if(p==null||y==null||g==null)return;var{dataKey:x}=y,N=Ype(r,p,g);e.dispatch(tq({activeDataKey:x,activeIndex:p,activeCoordinate:N,activeGraphicalItemId:g}))}}}});var Xpe=c3({brush:Che,cartesianAxis:uhe,chartData:Mce,errorBars:wfe,graphicalItems:Bde,layout:yte,legend:Tne,options:Pce,polarAxis:ude,polarOptions:Qpe,referenceElements:Rhe,rootProps:Fpe,tooltip:Joe,zIndex:bce}),Jpe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return $ee({reducer:Xpe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([w9.middleware,N9.middleware,mS.middleware,C9.middleware,P9.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(N3({type:"raf"}))},devTools:{serialize:{replacer:$pe},name:"recharts-".concat(n)}})};function Zpe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Sr(),o=_.useRef(null);if(i)return n;o.current==null&&(o.current=Jpe(e,r));var c=QN;return _.createElement(Jfe,{context:c,store:o.current},n)}function ege(t){var{layout:e,margin:n}=t,r=En(),i=Sr();return _.useEffect(()=>{i||(r(pte(e)),r(mte(n)))},[r,i,e,n]),null}var tge=_.memo(ege,P0);function nge(t){var e=En();return _.useEffect(()=>{e(Hpe(t))},[e,t]),null}function KD(t){var{zIndex:e,isPanorama:n}=t,r=_.useRef(null),i=En();return _.useLayoutEffect(()=>(r.current&&i(vce({zIndex:e,element:r.current,isPanorama:n})),()=>{i(yce({zIndex:e,isPanorama:n}))}),[i,e,n]),_.createElement("g",{tabIndex:-1,ref:r})}function QD(t){var{children:e,isPanorama:n}=t,r=Le(oce);if(!r||r.length===0)return e;var i=r.filter(c=>c<0),o=r.filter(c=>c>0);return _.createElement(_.Fragment,null,i.map(c=>_.createElement(KD,{key:c,zIndex:c,isPanorama:n})),e,o.map(c=>_.createElement(KD,{key:c,zIndex:c,isPanorama:n})))}var rge=["children"];function ige(t,e){if(t==null)return{};var n,r,i=sge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uy.apply(null,arguments)}var age={width:"100%",height:"100%",display:"block"},oge=_.forwardRef((t,e)=>{var n=H3(),r=G3(),i=n5();if(!ta(n)||!ta(r))return null;var{children:o,otherAttributes:c,title:u,desc:h}=t,f,p;return c!=null&&(typeof c.tabIndex=="number"?f=c.tabIndex:f=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),_.createElement(AL,uy({},c,{title:u,desc:h,role:p,tabIndex:f,width:n,height:r,style:age,ref:e}),o)}),lge=t=>{var{children:e}=t,n=Le(i0);if(!n)return null;var{width:r,height:i,y:o,x:c}=n;return _.createElement(AL,{width:r,height:i,x:c,y:o},e)},WD=_.forwardRef((t,e)=>{var{children:n}=t,r=ige(t,rge),i=Sr();return i?_.createElement(lge,null,_.createElement(QD,{isPanorama:!0},n)):_.createElement(oge,uy({ref:e},r),_.createElement(QD,{isPanorama:!1},n))});function cge(){var t=En(),[e,n]=_.useState(null),r=Le(Dte);return _.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;vt(o)&&o!==r&&t(vte(o))}},[e,t,r]),n}function YD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(n),!0).forEach(function(r){dge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dge(t,e,n){return(e=hge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hge(t){var e=fge(t,"string");return typeof e=="symbol"?e:e+""}function fge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ol(){return ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ol.apply(null,arguments)}var mge=()=>(Hce(),null);function dy(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var pge=_.forwardRef((t,e)=>{var n,r,i=_.useRef(null),[o,c]=_.useState({containerWidth:dy((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:dy((r=t.style)===null||r===void 0?void 0:r.height)}),u=_.useCallback((f,p)=>{c(g=>{var y=Math.round(f),x=Math.round(p);return g.containerWidth===y&&g.containerHeight===x?g:{containerWidth:y,containerHeight:x}})},[]),h=_.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=f.getBoundingClientRect();u(p,g);var y=N=>{var j=N[0];if(j!=null){var{width:E,height:A}=j.contentRect;u(E,A)}},x=new ResizeObserver(y);x.observe(f),i.current=x}},[e,u]);return _.useEffect(()=>()=>{var f=i.current;f?.disconnect()},[u]),_.createElement(_.Fragment,null,_.createElement(ym,{width:o.containerWidth,height:o.containerHeight}),_.createElement("div",ol({ref:h},t)))}),gge=_.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,o]=_.useState({containerWidth:dy(n),containerHeight:dy(r)}),c=_.useCallback((h,f)=>{o(p=>{var g=Math.round(h),y=Math.round(f);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),u=_.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null){var{width:f,height:p}=h.getBoundingClientRect();c(f,p)}},[e,c]);return _.createElement(_.Fragment,null,_.createElement(ym,{width:i.containerWidth,height:i.containerHeight}),_.createElement("div",ol({ref:u},t)))}),vge=_.forwardRef((t,e)=>{var{width:n,height:r}=t;return _.createElement(_.Fragment,null,_.createElement(ym,{width:n,height:r}),_.createElement("div",ol({ref:e},t)))}),yge=_.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?_.createElement(gge,ol({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?_.createElement(vge,ol({},t,{width:n,height:r,ref:e})):_.createElement(_.Fragment,null,_.createElement(ym,{width:n,height:r}),_.createElement("div",ol({ref:e},t)))});function bge(t){return t?pge:yge}var xge=_.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:c,onDoubleClick:u,onMouseDown:h,onMouseEnter:f,onMouseLeave:p,onMouseMove:g,onMouseUp:y,onTouchEnd:x,onTouchMove:N,onTouchStart:j,style:E,width:A,responsive:R,dispatchTouchEvents:T=!0}=t,I=_.useRef(null),M=En(),[B,D]=_.useState(null),[P,k]=_.useState(null),q=cge(),L=nE(),z=L?.width>0?L.width:A,V=L?.height>0?L.height:i,ve=_.useCallback(ae=>{q(ae),typeof e=="function"&&e(ae),D(ae),k(ae),ae!=null&&(I.current=ae)},[q,e,D,k]),ee=_.useCallback(ae=>{M(j9(ae)),M(zi({handler:o,reactEvent:ae}))},[M,o]),H=_.useCallback(ae=>{M(xw(ae)),M(zi({handler:f,reactEvent:ae}))},[M,f]),se=_.useCallback(ae=>{M(nq()),M(zi({handler:p,reactEvent:ae}))},[M,p]),X=_.useCallback(ae=>{M(xw(ae)),M(zi({handler:g,reactEvent:ae}))},[M,g]),we=_.useCallback(()=>{M(T9())},[M]),W=_.useCallback(ae=>{M(A9(ae.key))},[M]),F=_.useCallback(ae=>{M(zi({handler:c,reactEvent:ae}))},[M,c]),re=_.useCallback(ae=>{M(zi({handler:u,reactEvent:ae}))},[M,u]),de=_.useCallback(ae=>{M(zi({handler:h,reactEvent:ae}))},[M,h]),ye=_.useCallback(ae=>{M(zi({handler:y,reactEvent:ae}))},[M,y]),he=_.useCallback(ae=>{M(zi({handler:j,reactEvent:ae}))},[M,j]),G=_.useCallback(ae=>{T&&M(I9(ae)),M(zi({handler:N,reactEvent:ae}))},[M,T,N]),ce=_.useCallback(ae=>{M(zi({handler:x,reactEvent:ae}))},[M,x]),Ie=bge(R);return _.createElement(wq.Provider,{value:B},_.createElement(wJ.Provider,{value:P},_.createElement(Ie,{width:z??E?.width,height:V??E?.height,className:Ut("recharts-wrapper",r),style:uge({position:"relative",cursor:"default",width:z,height:V},E),onClick:ee,onContextMenu:F,onDoubleClick:re,onFocus:we,onKeyDown:W,onMouseDown:de,onMouseEnter:H,onMouseLeave:se,onMouseMove:X,onMouseUp:ye,onTouchEnd:ce,onTouchMove:G,onTouchStart:he,ref:ve},_.createElement(mge,null),n)))}),_ge=["width","height","responsive","children","className","style","compact","title","desc"];function jge(t,e){if(t==null)return{};var n,r,i=wge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nge=_.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:o,className:c,style:u,compact:h,title:f,desc:p}=t,g=jge(t,_ge),y=ms(g);return h?_.createElement(_.Fragment,null,_.createElement(ym,{width:n,height:r}),_.createElement(WD,{otherAttributes:y,title:f,desc:p},o)):_.createElement(xge,{className:c,style:u,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},_.createElement(WD,{otherAttributes:y,title:f,desc:p,ref:e},_.createElement(Dhe,null,o)))});function _w(){return _w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_w.apply(null,arguments)}var Ege={top:5,right:5,bottom:5,left:5},Sge={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Ege,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},O9=_.forwardRef(function(e,n){var r,i=Mr(e.categoricalChartProps,Sge),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:f}=e,p={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return _.createElement(Zpe,{preloadedState:{options:p},reduxStoreName:(r=f.id)!==null&&r!==void 0?r:o},_.createElement(The,{chartData:f.data}),_.createElement(tge,{layout:i.layout,margin:i.margin}),_.createElement(nge,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),_.createElement(Nge,_w({},i,{ref:n})))}),Age=["axis"],Tge=_.forwardRef((t,e)=>_.createElement(O9,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Age,tooltipPayloadSearcher:Nq,categoricalChartProps:t,ref:e})),Cge=["axis","item"],Ige=_.forwardRef((t,e)=>_.createElement(O9,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Cge,tooltipPayloadSearcher:Nq,categoricalChartProps:t,ref:e}));const Pge=8,Oge=12,Rge=14,kge=1;function pS(t){return t instanceof Xe?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function XD(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function O0(){const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);return r.setDate(t.getDate()+n),r.setHours(0,0,0,0),r}function Dge(){const t=O0(),e=new Date(t);return e.setDate(t.getDate()+6),e.setHours(23,59,59,999),e}function L1(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function R0(t){try{const e=yt(Ge(Se,"quiz_results"),at("userId","==",t),Nn("datePassage","desc"));return(await lt(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Erreur rcupration rsultats lve:",e),[]}}async function Mge(t){try{const e=await R0(t);if(e.length===0)return[];const n=new Map;e.forEach(o=>{const c=o.disciplineId;n.has(c)||n.set(c,[]),n.get(c).push(o)});const r=[];n.forEach((o,c)=>{if(o.length<kge)return;const u=o.map(E=>E.pourcentage/100*20),h=u.reduce((E,A)=>E+A,0)/u.length;if(h>=Rge)return;let f="stable";if(u.length>=3){const E=u.slice(0,2),A=u.slice(2,4),R=E.reduce((M,B)=>M+B,0)/E.length,T=A.reduce((M,B)=>M+B,0)/A.length,I=R-T;I>1.5?f="hausse":I<-1.5&&(f="baisse")}let p="modere";h<Pge?p="critique":h<Oge&&(p="important");const g=u[0],y=Math.max(...u),x=Math.min(...u),N=pS(o[0].datePassage),j=o[0].disciplineNom||"Discipline inconnue";r.push({id:`lacune_${c}`,disciplineId:c,disciplineNom:j,moyenne:Math.round(h*10)/10,nombreQuiz:o.length,tendance:f,niveauUrgence:p,dernierQuizDate:N,scoreDetails:{dernierScore:Math.round(g*10)/10,meilleurScore:Math.round(y*10)/10,pireScore:Math.round(x*10)/10}})});const i={critique:0,important:1,modere:2};return r.sort((o,c)=>{const u=i[o.niveauUrgence]-i[c.niveauUrgence];return u!==0?u:o.moyenne-c.moyenne}),r}catch(e){return console.error("Erreur dtection lacunes:",e),[]}}function zge(t){const e=[];let n=1;return t.forEach(r=>{const{id:i,disciplineNom:o,niveauUrgence:c,moyenne:u,tendance:h}=r;switch(c){case"critique":e.push({id:`reco_cours_${i}`,lacuneId:i,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${u}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_quiz_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":e.push({id:`reco_exercice_${i}`,lacuneId:i,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${u}/20 de moyenne, concentre-toi sur les exercices pratiques. ${h==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_cours2_${i}`,lacuneId:i,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":e.push({id:`reco_consolider_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${u}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break}}),e}async function Lge(t){try{const e=await R0(t);if(e.length===0)return{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;e.forEach(j=>{const E=pS(j.datePassage),A=`${E.getFullYear()}-${E.getMonth()}-${E.getDate()}`;n.add(A)});const r=Array.from(n).map(j=>{const[E,A,R]=j.split("-").map(Number);return new Date(E,A,R)}).sort((j,E)=>E.getTime()-j.getTime()),i=r.length,o=r[0];let c=0;const u=new Date;u.setHours(0,0,0,0);const h=r[0];if(L1(h,u)<=1){c=1;for(let j=1;j<r.length&&L1(r[j],r[j-1])===1;j++)c++}let p=0,g=1;for(let j=1;j<r.length;j++)L1(r[j],r[j-1])===1?g++:(p=Math.max(p,g),g=1);p=Math.max(p,g,c);const y=O0(),x=[];for(let j=0;j<7;j++){const E=new Date(y);E.setDate(y.getDate()+j);const A=r.some(R=>XD(R,E));x.push(A)}const N=[];for(let j=0;j<4;j++){const E=new Date(y);E.setDate(y.getDate()-j*7);let A=0;for(let T=0;T<7;T++){const I=new Date(E);I.setDate(E.getDate()+T),r.some(M=>XD(M,I))&&A++}const R=Math.ceil((E.getDate()+new Date(E.getFullYear(),E.getMonth(),1).getDay())/7);N.push({semaine:j===0?"Cette sem.":`Sem. -${j}`,joursActifs:A})}return{userId:t,streakActuel:c,meilleurStreak:p,dernierJourActif:o,totalJoursActifs:i,semaineCourante:x,historiqueHebdo:N.reverse()}}catch(e){return console.error("Erreur calcul streak:",e),{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function qge(t,e,n){const r=[],i=O0(),o=Dge(),c=e.length>2?5:3;if(r.push({id:`obj_quiz_${t}_${i.getTime()}`,userId:t,titre:`Passer ${c} quiz cette semaine`,description:`Entrane-toi en passant au moins ${c} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:c,progression:0,statut:"en_cours",dateDebut:i,dateFin:o,recompense:' Badge "Travailleur"'}),e.length>0){const h=e[0],f=Math.min(h.moyenne+3,14);r.push({id:`obj_score_${t}_${i.getTime()}`,userId:t,titre:`Atteindre ${Math.round(f)}/20 en ${h.disciplineNom}`,description:`Ta moyenne actuelle est de ${h.moyenne}/20. Vise ${Math.round(f)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(f),progression:Math.round(h.moyenne),statut:"en_cours",disciplineId:h.disciplineId,disciplineNom:h.disciplineNom,dateDebut:i,dateFin:o,recompense:' Badge "En progrs"'})}const u=n.streakActuel>=5?7:n.streakActuel+2;return r.push({id:`obj_streak_${t}_${i.getTime()}`,userId:t,titre:`Maintenir un streak de ${u} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:u,progression:n.streakActuel,statut:n.streakActuel>=u?"atteint":"en_cours",dateDebut:i,dateFin:o,recompense:' Badge "Flamme"'}),r}function Uge(t,e,n,r){let i=0;if(r.length>0){const g=r.reduce((y,x)=>y+x.pourcentage/100*20,0)/r.length;i=Math.min(g/20*100,100)}let o=100;const c=t.filter(g=>g.niveauUrgence==="critique").length,u=t.filter(g=>g.niveauUrgence==="important").length;o-=c*25,o-=u*15,o=Math.max(o,0);const h=Math.min(e.streakActuel/7*100,100);let f=0;n.length>0&&(f=n.filter(y=>y.statut==="atteint").length/n.length*100);const p=i*.4+o*.25+h*.2+f*.15;return Math.round(Math.min(Math.max(p,0),100))}function Vge(t,e,n){const r=O0(),i=e.filter(o=>pS(o.datePassage)>=r);return t.map(o=>{const c={...o};switch(o.type){case"quiz_count":c.progression=i.length;break;case"score_min":if(o.disciplineId){const u=i.filter(h=>h.disciplineId===o.disciplineId);if(u.length>0){const h=Math.max(...u.map(f=>f.pourcentage));c.progression=Math.round(h/100*20)}}break;case"streak":c.progression=n.streakActuel;break}return c.progression>=c.cible&&(c.statut="atteint"),c})}async function gS(t){try{const e=await Mge(t),n=zge(e),r=await Lge(t);let i=qge(t,e,r);const o=await R0(t);i=Vge(i,o,r);const c=Uge(e,r,i,o);return{lacunes:e,recommandations:n,streak:r,objectifs:i,scoreGlobal:c}}catch(e){return console.error("Erreur suivi complet:",e),{lacunes:[],recommandations:[],streak:{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function hy(t){switch(t){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function R9(t){switch(t){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function k9(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function Bge(t){return t>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":t>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":t>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":t>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function $ge(t){return t.cible===0?0:Math.min(Math.round(t.progression/t.cible*100),100)}const Fge="PEDA",Hge=4,Gge=5,Kge=40,D9=5;function Ra(t){return t instanceof Xe?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function M9(t){const e=new Date,n=e.getDay(),r=n===0?-6:1-n,i=new Date(e);return i.setDate(e.getDate()+r),i.setHours(0,0,0,0),i}function Qge(t){const e=M9(),n=new Date(e);return n.setDate(e.getDate()+6),n.setHours(23,59,59,999),n}function JD(t){const e=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${t.getDate()} ${e[t.getMonth()]}`}function z9(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function Wge(t){try{const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",r="";for(let c=0;c<Hge;c++)n+=e.charAt(Math.floor(Math.random()*e.length)),r+=e.charAt(Math.floor(Math.random()*e.length));const i=`${Fge}-${n}-${r}`,o=He(Se,"users",t);return await sn(o,{codeParent:i,codeParentGenere:new Date}),i}catch(e){throw console.error("Erreur gnration code invitation:",e),new Error("Impossible de gnrer le code d'invitation")}}async function Yge(t){try{const e=He(Se,"users",t),n=await Nr(e);if(!n.exists())throw new Error("lve introuvable");const r=n.data();return r.codeParent?r.codeParent:await Wge(t)}catch(e){throw console.error("Erreur rcupration code invitation:",e),new Error("Impossible de rcuprer le code d'invitation")}}async function Xge(t,e){try{const n=e.trim().toUpperCase(),r=Ge(Se,"users"),i=yt(r,at("codeParent","==",n),at("role","==","eleve"),Js(1)),o=await lt(i);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const c=o.docs[0],u=c.data(),h=c.id,f=Ge(Se,"liens_parent_enfant"),p=yt(f,at("parentId","==",t),at("enfantId","==",h),at("statut","==","actif"),Js(1));if(!(await lt(p)).empty)throw new Error("Cet enfant est dj li  votre compte.");const y={parentId:t,enfantId:h,enfantNom:u.displayName||u.email,enfantEmail:u.email,enfantClasse:u.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await ei(f,y)).id,...y}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function Jge(t){try{const e=Ge(Se,"liens_parent_enfant"),n=yt(e,at("parentId","==",t),at("statut","==","actif"),Nn("dateCreation","desc"));return(await lt(n)).docs.map(i=>({id:i.id,...i.data(),dateCreation:Ra(i.data().dateCreation),dateDerniereConsultation:i.data().dateDerniereConsultation?Ra(i.data().dateDerniereConsultation):void 0}))}catch(e){return console.error("Erreur rcupration enfants lis:",e),[]}}async function Zge(t,e){try{const n=He(Se,"liens_parent_enfant",t),r=await Nr(n);if(!r.exists())throw new Error("Lien introuvable");if(r.data().parentId!==e)throw new Error("Action non autorise");await sn(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function eve(t,e){try{const n=Ge(Se,"liens_parent_enfant"),r=yt(n,at("parentId","==",t),at("enfantId","==",e),at("statut","==","actif"),Js(1)),i=await lt(r);if(i.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=He(Se,"users",e),c=await Nr(o);if(!c.exists())throw new Error("Profil de l'enfant introuvable.");const u=c.data(),h=await gS(e),f=await R0(e),p=f.slice(0,D9).map(N=>({quizTitre:N.quizTitre||"Quiz",disciplineNom:N.disciplineNom||"Discipline",pourcentage:N.pourcentage,noteSur20:Math.round(N.pourcentage/100*20*10)/10,reussi:N.reussi,datePassage:Ra(N.datePassage)})),g=await tve(t,e,u.displayName||u.email,h.lacunes,h.streak,h.scoreGlobal,f),y=nve(e,u.displayName||u.email,h,f),x=i.docs[0];return await sn(He(Se,"liens_parent_enfant",x.id),{dateDerniereConsultation:new Date}),{enfant:{id:e,nom:u.displayName||u.email,email:u.email,classe:u.classe||void 0,derniereConnexion:u.lastLogin?Ra(u.lastLogin):void 0},scoreGlobal:h.scoreGlobal,streak:{actuel:h.streak.streakActuel,meilleur:h.streak.meilleurStreak,semaineCourante:h.streak.semaineCourante},lacunes:h.lacunes.map(N=>({disciplineNom:N.disciplineNom,moyenne:N.moyenne,niveauUrgence:N.niveauUrgence,tendance:N.tendance})),objectifs:h.objectifs.map(N=>({titre:N.titre,progression:N.progression,cible:N.cible,statut:N.statut})),derniersQuiz:p,resume:y,alertes:g}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function tve(t,e,n,r,i,o,c){const u=[],h=new Date;if(r.filter(p=>p.niveauUrgence==="critique").forEach(p=>{u.push({id:`alerte_parent_lacune_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${p.disciplineNom}`,message:`${n} a une moyenne de ${p.moyenne}/20 en ${p.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:h})}),i.dernierJourActif){const p=z9(Ra(i.dernierJourActif),h);p>=Gge&&u.push({id:`alerte_parent_inactif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${p} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:h})}else c.length===0&&u.push({id:`alerte_parent_jamais_actif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:h});o<Kge&&c.length>0&&u.push({id:`alerte_parent_score_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${n} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:h}),r.filter(p=>p.tendance==="hausse").forEach(p=>{u.push({id:`alerte_parent_progression_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${p.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${p.disciplineNom}.`,lue:!1,dateCreation:h})}),i.streakActuel>=5&&u.push({id:`alerte_parent_streak_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${i.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${i.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:h});const f={critique:0,important:1,modere:2,info:3};return u.sort((p,g)=>f[p.niveau]-f[g.niveau]),u}function nve(t,e,n,r){const i=M9(),o=Qge(),c=new Date(i);c.setDate(c.getDate()-7);const u=new Date(o);u.setDate(u.getDate()-7);const h=r.filter(I=>{const M=Ra(I.datePassage);return M>=i&&M<=o}),f=r.filter(I=>{const M=Ra(I.datePassage);return M>=c&&M<=u}),p=h.slice(0,D9).map(I=>({quizTitre:I.quizTitre||"Quiz",disciplineNom:I.disciplineNom||"Discipline",pourcentage:I.pourcentage,noteSur20:Math.round(I.pourcentage/100*20*10)/10,reussi:I.reussi,datePassage:Ra(I.datePassage)})),g=rve(h,f),y=new Set;h.forEach(I=>{const M=Ra(I.datePassage);y.add(`${M.getFullYear()}-${M.getMonth()}-${M.getDate()}`)});const x=h.reduce((I,M)=>I+(M.tempsEcoule||5),0);let N=0;if(f.length>0){const I=f.reduce((M,B)=>M+B.pourcentage,0)/f.length;N=Math.round(I)}let j="stable";const E=n.scoreGlobal-N;E>5?j="hausse":E<-5&&(j="baisse");const A=n.lacunes.filter(I=>I.niveauUrgence==="critique"||I.niveauUrgence==="important").map(I=>I.disciplineNom),R=n.objectifs.filter(I=>I.statut==="atteint").length,T=`${JD(i)} - ${JD(o)} ${o.getFullYear()}`;return{enfantId:t,enfantNom:e,semaine:T,dateDebut:i,dateFin:o,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:N,evolutionScore:j,nombreQuizSemaine:h.length,tempsEstimeMinutes:Math.round(x),joursActifsSemaine:y.size,streakActuel:n.streak.streakActuel,derniersQuiz:p,evolutionDisciplines:g,lacunesCritiques:n.lacunes.filter(I=>I.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(I=>I.niveauUrgence==="important").length,disciplinesEnDifficulte:A,objectifsAtteints:R,objectifsTotal:n.objectifs.length}}function rve(t,e){const n=new Map;t.forEach(o=>{n.has(o.disciplineId)||n.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),n.get(o.disciplineId).scores.push(o.pourcentage)});const r=new Map;e.forEach(o=>{r.has(o.disciplineId)||r.set(o.disciplineId,[]),r.get(o.disciplineId).push(o.pourcentage)});const i=[];return n.forEach((o,c)=>{const u=o.scores.reduce((N,j)=>N+j,0)/o.scores.length,h=r.get(c)||[],f=h.length>0?h.reduce((N,j)=>N+j,0)/h.length:u,p=Math.round(u/100*20*10)/10,g=Math.round(f/100*20*10)/10,y=Math.round((p-g)*10)/10;let x="stable";y>1?x="hausse":y<-1&&(x="baisse"),i.push({disciplineNom:o.nom,disciplineId:c,moyenneSemainePrecedente:g,moyenneSemaineCourante:p,evolution:x,ecart:y})}),i}function ive(t){return hy(t)}function sve(t){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[t]||"Alerte"}function ZD(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function ave(t){return t>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":t>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":t>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":t>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function q1(t){const n=z9(t,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const ove="PROF",lve=4,Tg="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",L9=8,cve=7,uve=16;function Dc(t){return t instanceof Xe?t.toDate():t instanceof Date?t:t?.seconds?new Xe(t.seconds,t.nanoseconds||0).toDate():new Date(t)}function dve(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function q9(){let t=0;const e=10;for(;t<e;){let n="",r="";for(let u=0;u<lve;u++)n+=Tg.charAt(Math.floor(Math.random()*Tg.length)),r+=Tg.charAt(Math.floor(Math.random()*Tg.length));const i=`${ove}-${n}-${r}`,o=yt(Ge(Se,"groupes_prof"),at("codeInvitation","==",i),Js(1));if((await lt(o)).empty)return i;t++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function hve(t,e,n){try{const r=await q9(),i={profId:t,profNom:e,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:r,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await ei(Ge(Se,"groupes_prof"),i);return console.log(` Groupe "${n.nom}" cr avec code: ${r}`),{id:o.id,...i}}catch(r){throw console.error(" Erreur cration groupe:",r),new Error("Impossible de crer le groupe. Ressayez.")}}async function U9(t){try{const e=yt(Ge(Se,"groupes_prof"),at("profId","==",t),Nn("dateCreation","desc"));return(await lt(e)).docs.map(r=>({id:r.id,...r.data(),dateCreation:Dc(r.data().dateCreation),dateMiseAJour:r.data().dateMiseAJour?Dc(r.data().dateMiseAJour):void 0}))}catch(e){throw console.error(" Erreur rcupration groupes:",e),new Error("Impossible de charger vos groupes.")}}async function fve(t){try{const e=await Nr(He(Se,"groupes_prof",t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,dateCreation:Dc(n.dateCreation),dateMiseAJour:n.dateMiseAJour?Dc(n.dateMiseAJour):void 0}}catch(e){return console.error(" Erreur rcupration groupe:",e),null}}async function V9(t,e){try{const n=He(Se,"groupes_prof",t);await sn(n,{...e,dateMiseAJour:new Date}),console.log(` Groupe ${t} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function mve(t){try{const e=Rf(Se),n=yt(Ge(Se,"inscriptions_groupe"),at("groupeId","==",t));(await lt(n)).docs.forEach(i=>e.delete(i.ref)),e.delete(He(Se,"groupes_prof",t)),await e.commit(),console.log(` Groupe ${t} et ses inscriptions supprims`)}catch(e){throw console.error(" Erreur suppression groupe:",e),new Error("Impossible de supprimer le groupe.")}}async function pve(t){await V9(t,{statut:"archive"})}async function gve(t){try{const e=await q9();return await sn(He(Se,"groupes_prof",t),{codeInvitation:e,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${t}: ${e}`),e}catch(e){throw console.error(" Erreur rgnration code:",e),new Error("Impossible de rgnrer le code.")}}async function vve(t,e,n,r){try{const i=r.trim().toUpperCase(),o=yt(Ge(Se,"groupes_prof"),at("codeInvitation","==",i),Js(1)),c=await lt(o);if(c.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=c.docs[0],h=u.data();if(h.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const f=yt(Ge(Se,"inscriptions_groupe"),at("groupeId","==",u.id),at("eleveId","==",t),at("statut","==","actif"),Js(1));if(!(await lt(f)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const g={groupeId:u.id,eleveId:t,eleveNom:e,eleveEmail:n,statut:"actif",dateInscription:new Date},y=await ei(Ge(Se,"inscriptions_groupe"),g);return await sn(He(Se,"groupes_prof",u.id),{nombreInscrits:L4(1),dateMiseAJour:new Date}),console.log(` lve ${e} inscrit au groupe "${h.nom}"`),{id:y.id,...g}}catch(i){throw console.error(" Erreur inscription groupe:",i),i}}async function k0(t,e="actif"){try{const n=yt(Ge(Se,"inscriptions_groupe"),at("groupeId","==",t),at("statut","==",e),Nn("dateInscription","asc"));return(await lt(n)).docs.map(i=>({id:i.id,...i.data(),dateInscription:Dc(i.data().dateInscription),dateRetrait:i.data().dateRetrait?Dc(i.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function yve(t){try{const e=yt(Ge(Se,"inscriptions_groupe"),at("eleveId","==",t),at("statut","==","actif")),n=await lt(e);if(n.empty)return[];const r=[];for(const i of n.docs){const o=i.data().groupeId,c=await fve(o);c&&c.statut==="actif"&&r.push(c)}return r}catch(e){return console.error(" Erreur rcupration groupes lve:",e),[]}}async function bve(t,e){try{await sn(He(Se,"inscriptions_groupe",t),{statut:"retire",dateRetrait:new Date}),await sn(He(Se,"groupes_prof",e),{nombreInscrits:L4(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function vS(t){try{const n=(await k0(t)).map(y=>y.eleveId);if(n.length===0)return{groupeId:t,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const r=[],i=[];for(let y=0;y<n.length;y+=10)i.push(n.slice(y,y+10));for(const y of i){const x=yt(Ge(Se,"quiz_results"),at("userId","in",y));(await lt(x)).docs.forEach(j=>r.push({id:j.id,...j.data()}))}const o=new Map;for(const y of r){const x=y.userId;o.has(x)||o.set(x,{total:0,somme:0,reussis:0});const N=o.get(x);N.total++,N.somme+=y.score||0,(y.score||0)>=10&&N.reussis++}let c=0,u=0,h=0,f=0,p=20,g=0;for(const[,y]of o){const x=y.total>0?y.somme/y.total:0;c+=x,u++,g+=y.total,x<L9&&h++,x>f&&(f=x),x<p&&(p=x)}return u===0&&(p=0),{groupeId:t,nombreEleves:n.length,moyenneClasse:u>0?Math.round(c/u*10)/10:0,tauxReussite:g>0?Math.round(Array.from(o.values()).reduce((y,x)=>y+x.reussis,0)/g*100):0,tauxParticipation:Math.round(u/n.length*100),totalQuizPasses:g,elevesEnDifficulte:h,meilleureNote:Math.round(f*10)/10,pireNote:Math.round(p*10)/10,derniereMiseAJour:new Date}}catch(e){throw console.error(" Erreur calcul stats groupe:",e),new Error("Impossible de calculer les statistiques du groupe.")}}async function xve(t){try{const e=await k0(t);if(e.length===0)return[];const n=[];for(const r of e)try{const i=await gS(r.eleveId),o=yt(Ge(Se,"quiz_results"),at("userId","==",r.eleveId),Nn("datePassage","desc")),u=(await lt(o)).docs.map(x=>x.data());let h=0,f=0,p;if(u.length>0){const x=u.reduce((N,j)=>N+(j.score||0),0);h=Math.round(x/u.length*10)/10,f=Math.round(u.filter(N=>(N.score||0)>=10).length/u.length*100),p=Dc(u[0].datePassage)}let g="stable";if(u.length>=4){const x=u.slice(0,Math.ceil(u.length/2)),N=u.slice(Math.ceil(u.length/2)),j=x.reduce((A,R)=>A+(R.score||0),0)/x.length,E=N.reduce((A,R)=>A+(R.score||0),0)/N.length;j-E>1?g="hausse":E-j>1&&(g="baisse")}const y=i.lacunes.map(x=>({disciplineNom:x.disciplineNom,chapitre:x.chapitre,moyenne:x.moyenne,niveauUrgence:x.niveauUrgence}));n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:h,totalQuiz:u.length,tauxReussite:f,scoreGlobal:i.scoreGlobal,streak:{actuel:i.streak.streakActuel,meilleur:i.streak.meilleurStreak},lacunes:y,dernierQuiz:p,tendance:g})}catch(i){console.warn(` Suivi incomplet pour lve ${r.eleveNom}:`,i),n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((r,i)=>i.moyenne-r.moyenne),n}catch(e){throw console.error(" Erreur stats lves groupe:",e),new Error("Impossible de charger les statistiques des lves.")}}async function _ve(t,e,n){try{const i=(await k0(t)).map(x=>x.eleveId);if(i.length===0)return null;let o=null,c="quiz_results";if(n!=="quizzes_v2"){if(n!=="quizzes"){const x=await Nr(He(Se,"quizzes_v2",e));if(x.exists())o=x.data(),c="quiz_results_v2";else{const N=await Nr(He(Se,"quizzes",e));N.exists()&&(o=N.data(),c="quiz_results")}}}if(!o)return null;const u=[],h=[];for(let x=0;x<i.length;x+=10)h.push(i.slice(x,x+10));for(const x of h){const N=yt(Ge(Se,c),at("quizId","==",e),at("userId","in",x));(await lt(N)).docs.forEach(E=>u.push(E.data()))}if(u.length===0)return null;const f=c==="quiz_results_v2",p=u.map(x=>f?x.note20||(x.scoreMax>0?x.score/x.scoreMax*20:0):x.score||0),g=u.map(x=>x.tempsEcoule||0),y=[];if(f&&o.questions)for(let x=0;x<o.questions.length;x++){const N=o.questions[x];let j=0,E=0;for(const T of u){const I=T.detailsParQuestion?.find(M=>M.questionId===N.id);I&&(E++,I.isCorrect||j++)}const A=E>0?Math.round(j/E*100):0,R=N.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${x+1}`;y.push({questionIndex:x,questionTexte:R,tauxEchec:A,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let x=0;x<o.questions.length;x++){const N=o.questions[x];let j=0;const E=new Map;for(const T of u){const I=T.reponses?.[x];I!==void 0&&(E.set(I,(E.get(I)||0)+1),I!==N.reponseCorrecte&&j++)}const A=Math.round(j/u.length*100),R=Array.from(E.entries()).filter(([T])=>T!==N.reponseCorrecte).map(([T,I])=>({reponse:N.options?.[T]||`Option ${T+1}`,nombre:I})).sort((T,I)=>I.nombre-T.nombre);y.push({questionIndex:x,questionTexte:N.question,tauxEchec:A,reponseCorrecte:N.options?.[N.reponseCorrecte]||"N/A",reponsesFrequentes:R})}return y.sort((x,N)=>N.tauxEchec-x.tauxEchec),{quizId:e,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:u.length,moyenneScore:Math.round(p.reduce((x,N)=>x+N,0)/p.length*10)/10,tauxReussite:Math.round(p.filter(x=>x>=10).length/p.length*100),tempsEcouleMoyen:Math.round(g.reduce((x,N)=>x+N,0)/g.length),questionsRatees:y}}catch(r){return console.error(" Erreur analyse quiz groupe:",r),null}}async function jve(t){try{const e=[];try{const n=yt(Ge(Se,"quizzes"),at("disciplineId","==",t),Nn("createdAt","desc"));(await lt(n)).docs.forEach(i=>{e.push({id:i.id,titre:i.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(n){console.warn(" Recherche quizzes choue (index manquant ?):",n)}try{const n=yt(Ge(Se,"quizzes_v2"),at("disciplineId","==",t),Nn("createdAt","desc"));(await lt(n)).docs.forEach(i=>{e.push({id:i.id,titre:i.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(n){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",n)}return console.log(` ${e.length} quiz trouv(s) pour discipline ${t}`),e}catch(e){return console.error(" Erreur rcupration quiz par matire:",e),[]}}function wve(t,e){const n=[],r=new Date;for(const o of t){if(o.totalQuiz>0&&o.moyenne<L9&&n.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:e,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(c=>c.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:r}),o.dernierQuiz){const c=dve(o.dernierQuiz,r);c>=cve&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:e,message:`${o.eleveNom} n'a pas fait de quiz depuis ${c} jours.`,niveauUrgence:c>=14?"important":"info",dateCreation:r})}else o.totalQuiz===0&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:e,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:r});o.tendance==="baisse"&&o.totalQuiz>=4&&n.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:e,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:r}),o.moyenne>=uve&&o.totalQuiz>=3&&n.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:e,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:r})}const i={critique:0,important:1,info:2};return n.sort((o,c)=>i[o.niveauUrgence]-i[c.niveauUrgence]),n}function Nve(t,e){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],r=t.map(o=>{const c=o.lacunes.map(u=>`${u.disciplineNom} (${u.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${c}"`,o.tendance].join(",")});return"\uFEFF"+[n.join(","),...r].join(`
`)}function Eve(t,e){const n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${e}.csv`,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}const Sve=()=>{const{currentUser:t}=qn(),[e,n]=_.useState([]),[r,i]=_.useState(!1),[o,c]=_.useState(""),[u,h]=_.useState(!0),[f,p]=_.useState(!1),[g,y]=_.useState(null),[x,N]=_.useState(null),j=_.useCallback(async()=>{if(t?.uid)try{h(!0);const A=await yve(t.uid);n(A)}catch(A){console.error("Erreur chargement groupes:",A)}finally{h(!1)}},[t?.uid]);_.useEffect(()=>{j()},[j]);const E=async A=>{if(A.preventDefault(),!(!t?.uid||!o.trim()))try{p(!0),y(null),N(null),await vve(t.uid,t.displayName||t.email||"lve",t.email||"",o),N("Tu as rejoint le groupe avec succs ! "),c(""),i(!1),await j(),setTimeout(()=>N(null),5e3)}catch(R){y(R.message||"Impossible de rejoindre le groupe.")}finally{p(!1)}};return a.jsxs("div",{className:"rejoindre-groupe-section",children:[a.jsxs("div",{className:"rejoindre-groupe-header",children:[a.jsx("h3",{children:" Mes groupes-classes"}),a.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>i(!r),children:r?" Annuler":" Rejoindre un groupe"})]}),g&&a.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",g,a.jsx("button",{onClick:()=>y(null),className:"prof-alert-close",children:""})]}),x&&a.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:x}),r&&a.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[a.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),a.jsxs("form",{onSubmit:E,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:A=>c(A.target.value.toUpperCase()),maxLength:14,disabled:f,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),a.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:f||o.length<14,children:f?" Vrification...":" Rejoindre"})]})]}),u?a.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):e.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[a.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),a.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(A=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{children:[a.jsx("strong",{style:{color:"#1f2937"},children:A.nom}),a.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[A.matiereNom,"  Prof: ",A.profNom]})]}),a.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},A.id))})]})},Ave=t=>t>=80?"#10b981":t>=60?"#3b82f6":t>=40?"#f59e0b":t>0?"#ef4444":"#d1d5db",eM=({pourcentage:t,label:e,size:n="md",showPercent:r=!0,color:i,showCheck:o=!0,className:c=""})=>{const[u,h]=_.useState(0);_.useEffect(()=>{const x=setTimeout(()=>{h(Math.min(100,Math.max(0,t)))},100);return()=>clearTimeout(x)},[t]);const p={sm:"4px",md:"8px",lg:"12px"}[n],g=i||Ave(t),y=t>=100;return a.jsxs("div",{className:`progress-bar-wrapper ${c}`,children:[(e||r)&&a.jsxs("div",{className:"progress-bar-header",children:[e&&a.jsx("span",{className:"progress-bar-label",children:e}),r&&a.jsxs("span",{className:"progress-bar-percent",style:{color:g},children:[y&&o?" ":"",t,"%"]})]}),a.jsx("div",{className:"progress-bar-track",style:{height:p},children:a.jsx("div",{className:"progress-bar-fill",style:{width:`${u}%`,backgroundColor:g,height:"100%"}})})]})},Tve=()=>{const t=Er(),{currentUser:e}=qn(),[n,r]=_.useState(null),[i,o]=_.useState([]),[c,u]=_.useState([]),[h,f]=_.useState([]),[p,g]=_.useState([]),[y,x]=_.useState(null),[N,j]=_.useState([]),[E,A]=_.useState("all"),[R,T]=_.useState(!0),[I,M]=_.useState("overview"),[B,D]=_.useState(null),[P,k]=_.useState(!1),[q,L]=_.useState(!1),z=async()=>{if(e){k(!0);try{const X=await Yge(e.uid);D(X)}catch(X){console.error("Erreur gnration code parent :",X)}finally{k(!1)}}},V=()=>{B&&(navigator.clipboard.writeText(B),L(!0),setTimeout(()=>L(!1),2e3))};if(_.useEffect(()=>{(async()=>{if(e){T(!0);try{await uJ(e.uid);const[we,W,F,re,de,ye]=await Promise.all([eJ(e.uid),tJ(e.uid),nJ(e.uid,20),Uy(e.uid,10),vL().catch(()=>[]),oJ(e.uid)]);r(we),o(W),u(F),f(re),g(de),x(ye);const he=dJ(we,W,ye);j(he)}catch(we){console.error("Erreur chargement dashboard :",we)}finally{T(!1)}}})()},[e]),R)return a.jsxs("div",{className:"sd-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const ve=N.filter(X=>X.obtenu),ee=N.length,H=e?.displayName||e?.email?.split("@")[0]||"lve",se=E==="all"?N:N.filter(X=>X.categorie===E);return a.jsxs("div",{className:"student-dashboard",children:[a.jsxs("div",{className:"sd-welcome",children:[a.jsxs("div",{className:"sd-welcome-text",children:[a.jsxs("h1",{children:["Bienvenue, ",H," "]}),a.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),a.jsxs("div",{className:"sd-welcome-badges-row",children:[e?.isPremium&&a.jsxs("span",{className:"sd-premium-badge",children:[a.jsx(gi,{size:14})," Premium"]}),y&&y.streakActuel>0&&a.jsxs("span",{className:"sd-streak-badge",children:[" ",y.streakActuel," jour",y.streakActuel>1?"s":""]})]})]}),a.jsxs("div",{className:"sd-stats-grid",children:[a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:a.jsx(us,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),a.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:a.jsx(Zx,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",style:{color:Hu(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),a.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:a.jsx(td,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsx("span",{className:"sd-stat-value",children:y?.totalRessourcesVues||0}),a.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:a.jsx(uL,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",children:[y?.streakActuel||0," "]}),a.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:a.jsx(cL,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),a.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:a.jsx(pl,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",children:[y?.disciplinesCompletees||0,"/",y?.disciplinesCommencees||0]}),a.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),a.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[a.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),a.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),B?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:B}),a.jsx("button",{className:"sd-btn",onClick:V,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:q?"#10b981":"#f3f4f6",color:q?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:q?" Copi !":" Copier"})]}):a.jsx("button",{className:"sd-btn sd-btn-primary",onClick:z,disabled:P,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:P?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):a.jsx(a.Fragment,{children:" Gnrer mon code"})})]}),a.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:a.jsx(Sve,{})}),a.jsxs("div",{className:"sd-tabs",children:[a.jsxs("button",{className:`sd-tab ${I==="overview"?"active":""}`,onClick:()=>M("overview"),children:[a.jsx(mc,{size:16})," Vue d'ensemble"]}),a.jsxs("button",{className:`sd-tab ${I==="progression"?"active":""}`,onClick:()=>M("progression"),children:[a.jsx(of,{size:16})," Progression"]}),a.jsxs("button",{className:`sd-tab ${I==="history"?"active":""}`,onClick:()=>M("history"),children:[a.jsx(Jx,{size:16})," Historique"]}),a.jsxs("button",{className:`sd-tab ${I==="badges"?"active":""}`,onClick:()=>M("badges"),children:[a.jsx(pl,{size:16})," Badges (",ve.length,"/",ee,")"]})]}),I==="overview"&&a.jsxs("div",{className:"sd-overview",children:[c.length>1&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(of,{size:18})," volution de vos scores"]}),a.jsx("div",{className:"sd-chart-container",children:a.jsx(DO,{width:"100%",height:280,children:a.jsxs(Tge,{data:c,children:[a.jsx(dw,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(gw,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),a.jsx(bw,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),a.jsx(Bk,{formatter:X=>[`${X}%`,"Score"],labelFormatter:X=>`Date : ${X}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),a.jsx(p9,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),i.length>0&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(mc,{size:18})," Moyennes par discipline"]}),a.jsx("div",{className:"sd-chart-container",children:a.jsx(DO,{width:"100%",height:280,children:a.jsxs(Ige,{data:i,layout:"vertical",children:[a.jsx(dw,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),a.jsx(gw,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),a.jsx(bw,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),a.jsx(Bk,{formatter:X=>[`${X}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),a.jsx(x9,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:i.map((X,we)=>a.jsx(iS,{fill:Hu(X.moyenne)},we))})]})})})]}),p.length>0&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(yf,{size:18})," Quiz disponibles"]}),a.jsx("div",{className:"sd-quiz-grid",children:p.slice(0,6).map(X=>{const we=X.isPremium&&!e?.isPremium;return a.jsxs("div",{className:`sd-quiz-card ${we?"locked":""}`,onClick:()=>!we&&t(`/quiz/${X.id}`),children:[X.isPremium&&a.jsxs("span",{className:"sd-quiz-badge-premium",children:[we?a.jsx(bj,{size:10}):a.jsx(gi,{size:10})," Premium"]}),a.jsx("h4",{className:"sd-quiz-title",children:X.titre}),a.jsxs("div",{className:"sd-quiz-meta",children:[a.jsxs("span",{children:[a.jsx(us,{size:12})," ",X.questions.length," questions"]}),a.jsxs("span",{children:[a.jsx(dd,{size:12})," ",X.duree," min"]})]}),!we&&a.jsxs("button",{className:"sd-quiz-play-btn",children:[a.jsx(yf,{size:14})," Commencer"]}),we&&a.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:W=>{W.stopPropagation(),t("/premium")},children:[a.jsx(bj,{size:14})," Dbloquer"]})]},X.id)})})]}),n&&n.totalQuizPasses===0&&(!y||y.totalRessourcesVues===0)&&a.jsxs("div",{className:"sd-empty-state",children:[a.jsx(Zx,{size:48}),a.jsx("h3",{children:"Commencez votre parcours !"}),a.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),p.length>0&&a.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>t(`/quiz/${p[0].id}`),children:[a.jsx(yf,{size:18})," Passer un quiz"]})]})]}),I==="progression"&&a.jsxs("div",{className:"sd-progression",children:[a.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(of,{size:18})," Avancement global"]}),a.jsx(eM,{pourcentage:y?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),a.jsxs("div",{className:"sd-prog-stats-row",children:[a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsx("span",{className:"sd-prog-stat-number",children:y?.totalRessourcesVues||0}),a.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsx("span",{className:"sd-prog-stat-number",children:y?.totalQuizReussis||0}),a.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsx("span",{className:"sd-prog-stat-number",children:y?.disciplinesCommencees||0}),a.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsxs("span",{className:"sd-prog-stat-number",children:[" ",y?.streakActuel||0]}),a.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",y?.meilleurStreak||0,")"]})]})]})]}),y&&y.parDiscipline.length>0?a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(mc,{size:18})," Par discipline"]}),a.jsx("div",{className:"sd-prog-disciplines",children:y.parDiscipline.map(X=>a.jsxs("div",{className:"sd-prog-disc-card",children:[a.jsxs("div",{className:"sd-prog-disc-header",children:[a.jsx("span",{className:"sd-prog-disc-name",children:X.disciplineNom}),X.pourcentage>=100&&a.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),a.jsx(eM,{pourcentage:X.pourcentage,size:"md",showPercent:!0}),a.jsxs("div",{className:"sd-prog-disc-details",children:[a.jsxs("span",{children:[a.jsx(td,{size:12})," ",X.ressourcesVues.length,"/",X.totalRessources," ressources"]}),a.jsxs("span",{children:[a.jsx(fn,{size:12})," ",X.quizReussis.length,"/",X.totalQuiz," quiz russis"]})]})]},X.disciplineId))})]}):a.jsxs("div",{className:"sd-empty-state",children:[a.jsx(td,{size:48}),a.jsx("h3",{children:"Aucune progression enregistre"}),a.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),i.length>0&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(Zx,{size:18})," Performance quiz par discipline"]}),a.jsx("div",{className:"sd-disc-list",children:i.map(X=>a.jsxs("div",{className:"sd-disc-card",children:[a.jsxs("div",{className:"sd-disc-header",children:[a.jsx("span",{className:"sd-disc-name",children:X.disciplineNom}),a.jsxs("span",{className:"sd-disc-tendance",children:[X.tendance==="up"&&a.jsx(of,{size:16,className:"tendance-up"}),X.tendance==="down"&&a.jsx(OY,{size:16,className:"tendance-down"}),X.tendance==="stable"&&a.jsx(oY,{size:16,className:"tendance-stable"})]})]}),a.jsxs("div",{className:"sd-disc-stats",children:[a.jsxs("div",{className:"sd-disc-stat",children:[a.jsxs("span",{className:"sd-disc-stat-value",style:{color:Hu(X.moyenne)},children:[X.moyenne,"%"]}),a.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),a.jsxs("div",{className:"sd-disc-stat",children:[a.jsx("span",{className:"sd-disc-stat-value",children:X.nombreQuiz}),a.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),a.jsxs("div",{className:"sd-disc-stat",children:[a.jsxs("span",{className:"sd-disc-stat-value",children:[X.meilleurScore,"%"]}),a.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),a.jsxs("div",{className:"sd-disc-stat",children:[a.jsxs("span",{className:"sd-disc-stat-value",children:[X.quizReussis,"/",X.nombreQuiz]}),a.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),a.jsx("div",{className:"sd-disc-bar",children:a.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${X.moyenne}%`,background:Hu(X.moyenne)}})})]},X.disciplineId))})]})]}),I==="history"&&a.jsx("div",{className:"sd-history",children:h.length===0?a.jsxs("div",{className:"sd-empty-state",children:[a.jsx(Jx,{size:48}),a.jsx("h3",{children:"Aucun quiz pass"}),a.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):a.jsx("div",{className:"sd-history-list",children:h.map(X=>{const we=X.datePassage?.toDate?X.datePassage.toDate():new Date(X.datePassage);return a.jsxs("div",{className:`sd-history-item ${X.reussi?"success":"fail"}`,children:[a.jsx("div",{className:`sd-history-icon ${X.reussi?"success":"fail"}`,children:X.reussi?a.jsx(fn,{size:20}):a.jsx(vj,{size:20})}),a.jsxs("div",{className:"sd-history-content",children:[a.jsxs("div",{className:"sd-history-top",children:[a.jsx("span",{className:"sd-history-title",children:X.quizTitre}),a.jsx("span",{className:"sd-history-discipline",children:X.disciplineNom})]}),a.jsxs("div",{className:"sd-history-meta",children:[a.jsxs("span",{children:[a.jsx(Jx,{size:12}),we.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),a.jsxs("span",{children:[a.jsx(dd,{size:12})," ",jL(X.tempsEcoule)]}),a.jsxs("span",{children:[a.jsx(fn,{size:12})," ",X.bonnesReponses,"/",X.nombreQuestions]})]})]}),a.jsxs("div",{className:"sd-history-score",style:{color:Hu(X.pourcentage)},children:[a.jsxs("span",{className:"sd-history-score-value",children:[X.pourcentage,"%"]}),a.jsx("span",{className:"sd-history-score-label",children:wL(X.pourcentage)})]})]},X.id)})})}),I==="badges"&&a.jsxs("div",{className:"sd-badges",children:[a.jsxs("div",{className:"sd-badges-summary",children:[a.jsxs("div",{className:"sd-badges-circle",children:[a.jsx("span",{className:"sd-badges-count",children:ve.length}),a.jsxs("span",{className:"sd-badges-total",children:["/ ",ee]})]}),a.jsx("p",{children:"badges obtenus"}),a.jsx("div",{className:"sd-badges-progress",children:a.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${ve.length/ee*100}%`}})})]}),a.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(X=>a.jsx("button",{className:`sd-badge-filter-btn ${E===X.key?"active":""}`,onClick:()=>A(X.key),children:X.label},X.key))}),a.jsx("div",{className:"sd-badges-grid",children:se.map(X=>a.jsxs("div",{className:`sd-badge-card ${X.obtenu?"obtained":"locked"}`,children:[a.jsx("span",{className:"sd-badge-icon",children:X.icone}),a.jsx("h4",{className:"sd-badge-name",children:X.nom}),a.jsx("p",{className:"sd-badge-description",children:X.description}),a.jsx("span",{className:"sd-badge-condition",children:X.condition}),X.obtenu&&a.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),a.jsx("span",{className:"sd-badge-category",children:X.categorie})]},X.id))}),se.length===0&&a.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[a.jsx(kN,{size:36}),a.jsx("h3",{children:"Aucun badge dans cette catgorie"}),a.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},Cve=()=>{const{currentUser:t}=qn(),e=Er(),[n,r]=_.useState(null),[i,o]=_.useState(!0),[c,u]=_.useState(null),h=["L","M","M","J","V","S","D"],f=_.useCallback(async()=>{if(t?.uid)try{o(!0),u(null);const T=await gS(t.uid);r(T)}catch(T){console.error("Erreur chargement suivi:",T),u("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[t?.uid]);_.useEffect(()=>{f()},[f]);const p=(()=>{const T=new Date().getDay();return T===0?6:T-1})();if(i)return a.jsx("div",{className:"suivi-page",children:a.jsx("div",{className:"suivi-container",children:a.jsxs("div",{className:"suivi-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(c)return a.jsx("div",{className:"suivi-page",children:a.jsx("div",{className:"suivi-container",children:a.jsxs("div",{className:"suivi-error",children:[a.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),a.jsx("p",{className:"suivi-error-text",children:c}),a.jsx("button",{className:"suivi-btn-retry",onClick:f,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:g,recommandations:y,streak:x,objectifs:N,scoreGlobal:j}=n,E=2*Math.PI*40,A=E-j/100*E,R=j>=60?"#10b981":j>=30?"#f59e0b":"#ef4444";return a.jsx("div",{className:"suivi-page",children:a.jsxs("div",{className:"suivi-container",children:[a.jsx("div",{className:"suivi-header",children:a.jsxs("div",{className:"suivi-header-content",children:[a.jsxs("div",{children:[a.jsx("h1",{children:" Mes points  amliorer"}),a.jsx("p",{className:"suivi-motivation",children:Bge(j)})]}),a.jsxs("div",{className:"score-global-circle",children:[a.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),a.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:R,strokeDasharray:E,strokeDashoffset:A}),a.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:j})]}),a.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),a.jsxs("div",{className:"streak-card",children:[a.jsxs("div",{className:"streak-header",children:[a.jsx("span",{className:"streak-flamme",children:x.streakActuel>0?"":""}),a.jsxs("div",{children:[a.jsx("div",{className:"streak-nombre",children:x.streakActuel}),a.jsx("div",{className:"streak-label",children:x.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),a.jsx("div",{className:"streak-semaine",children:h.map((T,I)=>a.jsxs("div",{className:"streak-jour",children:[a.jsx("span",{className:"streak-jour-label",children:T}),a.jsx("div",{className:`streak-jour-indicateur ${x.semaineCourante[I]?"actif":"inactif"} ${I===p?"aujourd-hui":""}`,children:x.semaineCourante[I]?"":""})]},I))}),a.jsxs("div",{className:"streak-stats",children:[a.jsxs("div",{className:"streak-stat",children:[a.jsx("span",{className:"streak-stat-icon",children:""}),a.jsx("span",{className:"streak-stat-value",children:x.meilleurStreak}),a.jsx("span",{className:"streak-stat-label",children:"record"})]}),a.jsxs("div",{className:"streak-stat",children:[a.jsx("span",{className:"streak-stat-icon",children:""}),a.jsx("span",{className:"streak-stat-value",children:x.totalJoursActifs}),a.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),x.dernierJourActif&&a.jsxs("div",{className:"streak-stat",children:[a.jsx("span",{className:"streak-stat-icon",children:""}),a.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(x.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),a.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",a.jsx("span",{className:"suivi-section-badge",children:N.length})]}),N.length>0?a.jsx("div",{className:"objectifs-grid",children:N.map(T=>{const I=$ge(T);return a.jsxs("div",{className:`objectif-card ${T.statut==="atteint"?"atteint":""}`,children:[a.jsxs("div",{className:"objectif-header",children:[a.jsx("span",{className:"objectif-titre",children:T.titre}),T.recompense&&a.jsx("span",{className:"objectif-recompense",children:T.recompense})]}),a.jsx("p",{className:"objectif-description",children:T.description}),a.jsxs("div",{className:"objectif-progress",children:[a.jsxs("div",{className:"objectif-progress-labels",children:[a.jsxs("span",{className:"objectif-progress-value",children:[T.progression," / ",T.cible]}),a.jsxs("span",{className:"objectif-progress-cible",children:[I,"%"]})]}),a.jsx("div",{className:"objectif-progress-track",children:a.jsx("div",{className:`objectif-progress-fill ${T.statut==="atteint"?"atteint":""}`,style:{width:`${I}%`}})})]}),a.jsx("p",{className:`objectif-statut ${T.statut}`,children:T.statut==="atteint"?" Objectif atteint !":T.statut==="en_cours"?" En cours...":" Non commenc"})]},T.id)})}):a.jsxs("div",{className:"suivi-empty",children:[a.jsx("div",{className:"suivi-empty-icon",children:""}),a.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),a.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),a.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",g.length>0&&a.jsx("span",{className:"suivi-section-badge",children:g.length})]}),g.length>0?a.jsx("div",{className:"lacunes-grid",children:g.map(T=>a.jsxs("div",{className:`lacune-card ${T.niveauUrgence}`,children:[a.jsxs("div",{className:"lacune-card-header",children:[a.jsx("span",{className:"lacune-discipline",children:T.disciplineNom}),a.jsx("span",{className:`lacune-badge ${T.niveauUrgence}`,children:R9(T.niveauUrgence)})]}),a.jsxs("div",{className:"lacune-score-bar",children:[a.jsxs("div",{className:"lacune-score-labels",children:[a.jsxs("span",{className:"lacune-score-value",style:{color:hy(T.niveauUrgence)},children:[T.moyenne,"/20"]}),a.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),a.jsx("div",{className:"lacune-progress-track",children:a.jsx("div",{className:`lacune-progress-fill ${T.niveauUrgence}`,style:{width:`${T.moyenne/20*100}%`}})})]}),a.jsxs("div",{className:"lacune-details",children:[a.jsxs("span",{className:"lacune-detail-tag",children:[k9(T.tendance)," ",T.tendance]}),a.jsxs("span",{className:"lacune-detail-tag",children:[" ",T.nombreQuiz," quiz"]}),a.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",T.scoreDetails.dernierScore,"/20"]})]})]},T.id))}):a.jsxs("div",{className:"suivi-empty",children:[a.jsx("div",{className:"suivi-empty-icon",children:""}),a.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),a.jsx("p",{className:"suivi-empty-text",children:j>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),a.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),y.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",a.jsx("span",{className:"suivi-section-badge",children:y.length})]}),a.jsx("div",{className:"recommandations-list",children:y.map(T=>a.jsxs("div",{className:"recommandation-card",children:[a.jsx("div",{className:"recommandation-priorite",children:T.priorite}),a.jsxs("div",{className:"recommandation-content",children:[a.jsx("p",{className:"recommandation-titre",children:T.titre}),a.jsx("p",{className:"recommandation-description",children:T.description}),a.jsx("span",{className:"recommandation-discipline-tag",children:T.disciplineNom})]})]},T.id))})]}),a.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:a.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),children:" Passer un quiz maintenant"})})]})})},Ive=()=>{const t=new Date,e=t.getFullYear(),r=t.getMonth()>=9?e:e-1,i=[];for(let o=-1;o<=3;o++){const c=r+o;i.push(`${c}-${c+1}`)}return i},tM=Ive(),Jh=()=>{const t=new Date,e=t.getFullYear(),r=t.getMonth()>=9?e:e-1;return`${r}-${r+1}`},nM=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],Pve=({onSelectGroupe:t})=>{const{currentUser:e}=qn(),[n,r]=_.useState([]),[i,o]=_.useState(new Map),[c,u]=_.useState([]),[h,f]=_.useState(!0),[p,g]=_.useState(null),[y,x]=_.useState(!1),[N,j]=_.useState(!1),[E,A]=_.useState(null),[R,T]=_.useState(null),[I,M]=_.useState(null),[B,D]=_.useState(!1),[P,k]=_.useState(null),[q,L]=_.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jh()}),[z,V]=_.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jh()}),[ve,ee]=_.useState("actif");_.useEffect(()=>{(async()=>{try{const Q=await wl.getAll();u(Q.map(me=>({id:me.id,nom:me.nom,classe:me.classe||""})))}catch(Q){console.warn(" Impossible de charger les disciplines:",Q)}})()},[]);const H=_.useCallback(async()=>{if(e?.uid)try{f(!0),g(null);const Z=await U9(e.uid);r(Z);const Q=new Map;for(const me of Z)if(me.statut==="actif")try{const J=await vS(me.id);Q.set(me.id,J)}catch{console.warn(`Stats indisponibles pour ${me.nom}`)}o(Q)}catch(Z){console.error("Erreur chargement groupes:",Z),g("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{f(!1)}},[e?.uid]);_.useEffect(()=>{H()},[H]);const se=(Z,Q=!1)=>{const me=c.find(Ae=>Ae.id===Z),J=me?`${me.nom}${me.classe?` (${me.classe})`:""}`:"";Q?V(Ae=>({...Ae,matiereId:Z,matiereNom:J})):L(Ae=>({...Ae,matiereId:Z,matiereNom:J}))},X=async Z=>{if(Z.preventDefault(),!(!e?.uid||!q.nom.trim()||!q.matiereId))try{j(!0),await hve(e.uid,e.displayName||e.email||"Professeur",q),L({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jh()}),x(!1),k("Groupe cr avec succs !"),setTimeout(()=>k(null),3e3),await H()}catch(Q){g(Q.message||"Erreur lors de la cration du groupe.")}finally{j(!1)}},we=Z=>{M(Z),V({nom:Z.nom,description:Z.description||"",matiereId:Z.matiereId,matiereNom:Z.matiereNom,classeNiveau:Z.classeNiveau,anneeScolaire:Z.anneeScolaire}),x(!1)},W=()=>{M(null),V({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Jh()})},F=async Z=>{if(Z.preventDefault(),!(!I||!z.nom.trim()||!z.matiereId))try{D(!0),await V9(I.id,{nom:z.nom.trim(),description:z.description?.trim()||"",matiereId:z.matiereId,matiereNom:z.matiereNom,classeNiveau:z.classeNiveau,anneeScolaire:z.anneeScolaire}),M(null),k("Groupe modifi avec succs !"),setTimeout(()=>k(null),3e3),await H()}catch(Q){g(Q.message||"Erreur lors de la modification du groupe.")}finally{D(!1)}},re=async Z=>{try{await navigator.clipboard.writeText(Z),A(Z),setTimeout(()=>A(null),2e3)}catch{const Q=document.createElement("textarea");Q.value=Z,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q),A(Z),setTimeout(()=>A(null),2e3)}},de=async Z=>{try{await mve(Z),T(null),await H()}catch(Q){g(Q.message)}},ye=async Z=>{try{await pve(Z),await H()}catch(Q){g(Q.message)}},he=async Z=>{try{await gve(Z),await H()}catch(Q){g(Q.message)}},G=(Z,Q)=>{L(me=>({...me,[Z]:Q}))},ce=(Z,Q)=>{V(me=>({...me,[Z]:Q}))},Ie=n.filter(Z=>ve==="tous"?!0:Z.statut===ve),ae=(Z,Q,me)=>a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:Z,children:"Discipline / Matire *"}),a.jsxs("select",{id:Z,value:Q,onChange:J=>me(J.target.value),className:"prof-select",required:!0,children:[a.jsx("option",{value:"",children:" Slectionner une discipline "}),c.map(J=>a.jsxs("option",{value:J.id,children:[J.nom,J.classe?` (${J.classe})`:""]},J.id))]}),c.length===0&&a.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return h?a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):a.jsxs("div",{className:"groupe-manager",children:[a.jsxs("div",{className:"groupe-manager-header",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),a.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",Jh()]})]}),a.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{x(!y),I&&W()},children:y?" Annuler":" Nouveau groupe"})]}),p&&a.jsxs("div",{className:"prof-alert prof-alert-error",children:[a.jsx("span",{children:""})," ",p,a.jsx("button",{onClick:()=>g(null),className:"prof-alert-close",children:""})]}),P&&a.jsxs("div",{className:"prof-alert prof-alert-success",children:[a.jsx("span",{children:""})," ",P,a.jsx("button",{onClick:()=>k(null),className:"prof-alert-close",children:""})]}),y&&a.jsxs("div",{className:"groupe-form-container",children:[a.jsx("h3",{children:"Crer un nouveau groupe-classe"}),a.jsxs("form",{onSubmit:X,className:"groupe-form",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),a.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:q.nom,onChange:Z=>G("nom",Z.target.value),required:!0,className:"prof-input",maxLength:60})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),a.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:q.description||"",onChange:Z=>G("description",Z.target.value),className:"prof-input",maxLength:120})]}),a.jsxs("div",{className:"prof-form-row",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),a.jsx("select",{id:"groupe-niveau",value:q.classeNiveau,onChange:Z=>G("classeNiveau",Z.target.value),className:"prof-select",children:nM.map(Z=>a.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),a.jsx("select",{id:"groupe-annee",value:q.anneeScolaire,onChange:Z=>G("anneeScolaire",Z.target.value),className:"prof-select",children:tM.map(Z=>a.jsx("option",{value:Z,children:Z},Z))})]})]}),ae("groupe-discipline",q.matiereId,Z=>se(Z,!1)),a.jsx("div",{className:"prof-form-actions",children:a.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:N||!q.nom.trim()||!q.matiereId,children:N?" Cration...":" Crer le groupe"})})]})]}),I&&a.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[a.jsxs("h3",{children:[" Modifier le groupe : ",I.nom]}),a.jsxs("form",{onSubmit:F,className:"groupe-form",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),a.jsx("input",{id:"edit-groupe-nom",type:"text",value:z.nom,onChange:Z=>ce("nom",Z.target.value),required:!0,className:"prof-input",maxLength:60})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),a.jsx("input",{id:"edit-groupe-desc",type:"text",value:z.description||"",onChange:Z=>ce("description",Z.target.value),className:"prof-input",maxLength:120})]}),a.jsxs("div",{className:"prof-form-row",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),a.jsx("select",{id:"edit-groupe-niveau",value:z.classeNiveau,onChange:Z=>ce("classeNiveau",Z.target.value),className:"prof-select",children:nM.map(Z=>a.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),a.jsx("select",{id:"edit-groupe-annee",value:z.anneeScolaire,onChange:Z=>ce("anneeScolaire",Z.target.value),className:"prof-select",children:tM.map(Z=>a.jsx("option",{value:Z,children:Z},Z))})]})]}),ae("edit-groupe-discipline",z.matiereId,Z=>se(Z,!0)),a.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[a.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:B||!z.nom.trim()||!z.matiereId,children:B?" Enregistrement...":" Enregistrer"}),a.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:W,disabled:B,children:" Annuler"})]})]})]}),a.jsxs("div",{className:"groupe-filtres",children:[a.jsxs("button",{className:`prof-filtre-btn ${ve==="actif"?"active":""}`,onClick:()=>ee("actif"),children:["Actifs (",n.filter(Z=>Z.statut==="actif").length,")"]}),a.jsxs("button",{className:`prof-filtre-btn ${ve==="archive"?"active":""}`,onClick:()=>ee("archive"),children:["Archivs (",n.filter(Z=>Z.statut==="archive").length,")"]}),a.jsxs("button",{className:`prof-filtre-btn ${ve==="tous"?"active":""}`,onClick:()=>ee("tous"),children:["Tous (",n.length,")"]})]}),Ie.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:ve==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),a.jsx("p",{children:ve==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),ve!=="archive"&&a.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>x(!0),children:" Crer mon premier groupe"})]}):a.jsx("div",{className:"groupe-grid",children:Ie.map(Z=>{const Q=i.get(Z.id),me=I?.id===Z.id;return a.jsxs("div",{className:`groupe-card ${Z.statut==="archive"?"groupe-card-archive":""} ${me?"groupe-card-editing":""}`,children:[a.jsxs("div",{className:"groupe-card-header",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"groupe-card-titre",children:Z.nom}),a.jsx("span",{className:"groupe-card-matiere",children:Z.matiereNom})]}),a.jsx("span",{className:`groupe-badge groupe-badge-${Z.statut}`,children:Z.statut==="actif"?" Actif":" Archiv"})]}),Z.description&&a.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:Z.description}),a.jsxs("div",{className:"groupe-card-infos",children:[a.jsxs("span",{children:[" ",Z.classeNiveau]}),a.jsxs("span",{children:[" ",Z.anneeScolaire]}),a.jsxs("span",{children:[" ",Z.nombreInscrits," lve",Z.nombreInscrits!==1?"s":""]})]}),a.jsxs("div",{className:"groupe-card-code",children:[a.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),a.jsxs("div",{className:"groupe-code-box",children:[a.jsx("code",{className:"groupe-code-value",children:Z.codeInvitation}),a.jsx("button",{className:"prof-btn-icon",onClick:J=>{J.stopPropagation(),re(Z.codeInvitation)},title:"Copier le code",children:E===Z.codeInvitation?"":""}),Z.statut==="actif"&&a.jsx("button",{className:"prof-btn-icon",onClick:J=>{J.stopPropagation(),he(Z.id)},title:"Rgnrer le code",children:""})]})]}),Q&&Q.nombreEleves>0&&a.jsxs("div",{className:"groupe-card-stats",children:[a.jsxs("div",{className:"groupe-stat-item",children:[a.jsx("span",{className:"groupe-stat-value",children:Q.moyenneClasse}),a.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),a.jsxs("div",{className:"groupe-stat-item",children:[a.jsxs("span",{className:"groupe-stat-value",children:[Q.tauxReussite,"%"]}),a.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),a.jsxs("div",{className:"groupe-stat-item",children:[a.jsx("span",{className:"groupe-stat-value",children:Q.elevesEnDifficulte}),a.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),a.jsxs("div",{className:"groupe-card-actions",children:[Z.statut==="actif"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>t(Z),children:" Voir dtails"}),a.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>we(Z),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),a.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>ye(Z.id),children:" Archiver"})]}),R===Z.id?a.jsxs("div",{className:"groupe-confirm-suppression",children:[a.jsx("span",{children:"Confirmer ?"}),a.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>de(Z.id),children:"Oui, supprimer"}),a.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>T(null),children:"Non"})]}):a.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>T(Z.id),children:" Supprimer"})]})]},Z.id)})})]})},Ove=({groupe:t,onRetour:e})=>{const[n,r]=_.useState(null),[i,o]=_.useState([]),[c,u]=_.useState([]),[h,f]=_.useState([]),[p,g]=_.useState(null),[y,x]=_.useState(!0),[N,j]=_.useState(null),[E,A]=_.useState("apercu"),[R,T]=_.useState("moyenne_desc"),[I,M]=_.useState(null),[B,D]=_.useState(null),[P,k]=_.useState(!1),[q,L]=_.useState(null),z=_.useCallback(async()=>{try{x(!0),j(null);const[W,F,re]=await Promise.all([vS(t.id),xve(t.id),jve(t.matiereId)]);r(W),o(F),f(re);const de=wve(F,t.nom);u(de)}catch(W){console.error("Erreur chargement dtail groupe:",W),j("Impossible de charger les donnes du groupe.")}finally{x(!1)}},[t.id,t.matiereId,t.nom]);_.useEffect(()=>{z()},[z]);const V=async W=>{try{k(!0),D(W);const F=await _ve(t.id,W);g(F)}catch(F){console.error("Erreur analyse quiz:",F)}finally{k(!1)}},ve=()=>{const W=Nve(i,t.nom),F=`PedaClic_${t.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;Eve(W,F)},ee=async W=>{try{L(W);const re=(await k0(t.id)).find(de=>de.eleveId===W);re&&(await bve(re.id,t.id),await z())}catch(F){j(F.message)}finally{L(null)}},H=[...i].sort((W,F)=>{switch(R){case"moyenne_desc":return F.moyenne-W.moyenne;case"moyenne_asc":return W.moyenne-F.moyenne;case"nom":return W.eleveNom.localeCompare(F.eleveNom);case"streak":return F.streak.actuel-W.streak.actuel;case"quiz_count":return F.totalQuiz-W.totalQuiz;default:return 0}}),se=W=>W>=16?"prof-note-excellent":W>=12?"prof-note-bien":W>=10?"prof-note-passable":W>=8?"prof-note-insuffisant":"prof-note-critique",X=W=>{switch(W){case"hausse":return"";case"baisse":return"";default:return""}},we=W=>{switch(W){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return y?a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsxs("p",{children:['Chargement des donnes de "',t.nom,'"...']})]}):a.jsxs("div",{className:"groupe-detail",children:[a.jsxs("div",{className:"groupe-detail-header",children:[a.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:e,children:" Retour aux groupes"}),a.jsxs("div",{className:"groupe-detail-titre-section",children:[a.jsx("h2",{className:"groupe-detail-titre",children:t.nom}),a.jsxs("p",{className:"groupe-detail-subtitle",children:[t.matiereNom,"  ",t.classeNiveau,"  ",t.anneeScolaire]})]}),a.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:ve,children:" Export CSV"})]}),N&&a.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",N,a.jsx("button",{onClick:()=>j(null),className:"prof-alert-close",children:""})]}),a.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:i.length},{id:"quiz",label:" Quiz",count:h.length},{id:"alertes",label:" Alertes",count:c.length}].map(W=>a.jsxs("button",{className:`groupe-onglet ${E===W.id?"active":""}`,onClick:()=>A(W.id),children:[W.label,W.count!==null&&W.count>0&&a.jsx("span",{className:"groupe-onglet-badge",children:W.count})]},W.id))}),E==="apercu"&&n&&a.jsxs("div",{className:"groupe-apercu",children:[a.jsxs("div",{className:"groupe-stats-grid",children:[a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsxs("span",{className:`groupe-stat-card-value ${se(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),a.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),a.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),a.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),a.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),a.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),a.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),a.jsx("div",{className:"groupe-apercu-notes",children:a.jsxs("div",{className:"groupe-note-range",children:[a.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),a.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),a.jsx("div",{className:"groupe-note-barre",children:a.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),a.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),i.length>=3&&a.jsxs("div",{className:"groupe-apercu-classement",children:[a.jsxs("div",{className:"groupe-classement-section",children:[a.jsx("h4",{children:" Top 3"}),i.slice(0,3).map((W,F)=>a.jsxs("div",{className:"groupe-classement-item",children:[a.jsx("span",{className:"groupe-classement-rang",children:F===0?"":F===1?"":""}),a.jsx("span",{className:"groupe-classement-nom",children:W.eleveNom}),a.jsxs("span",{className:`groupe-classement-note ${se(W.moyenne)}`,children:[W.moyenne,"/20"]})]},W.eleveId))]}),a.jsxs("div",{className:"groupe-classement-section",children:[a.jsx("h4",{children:"  surveiller"}),i.filter(W=>W.moyenne<8&&W.totalQuiz>0).slice(0,3).map(W=>a.jsxs("div",{className:"groupe-classement-item",children:[a.jsx("span",{className:"groupe-classement-rang",children:""}),a.jsx("span",{className:"groupe-classement-nom",children:W.eleveNom}),a.jsxs("span",{className:`groupe-classement-note ${se(W.moyenne)}`,children:[W.moyenne,"/20"]})]},W.eleveId)),i.filter(W=>W.moyenne<8&&W.totalQuiz>0).length===0&&a.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),E==="eleves"&&a.jsxs("div",{className:"groupe-eleves",children:[a.jsxs("div",{className:"groupe-eleves-toolbar",children:[a.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),a.jsxs("select",{id:"tri-eleves",value:R,onChange:W=>T(W.target.value),className:"prof-select prof-select-sm",children:[a.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),a.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),a.jsx("option",{value:"nom",children:"Nom (A-Z)"}),a.jsx("option",{value:"streak",children:"Streak ()"}),a.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),a.jsxs("span",{className:"groupe-eleves-count",children:[i.length," lve",i.length!==1?"s":""]})]}),i.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Aucun lve inscrit"}),a.jsxs("p",{children:["Partagez le code ",a.jsx("strong",{children:t.codeInvitation}),"  vos lves."]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"groupe-eleves-table-wrapper",children:a.jsxs("table",{className:"groupe-eleves-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"lve"}),a.jsx("th",{children:"Moyenne"}),a.jsx("th",{children:"Quiz"}),a.jsx("th",{children:"Russite"}),a.jsx("th",{children:"Streak"}),a.jsx("th",{children:"Tendance"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:H.map((W,F)=>a.jsxs("tr",{className:`${I===W.eleveId?"groupe-eleve-row-active":""}`,children:[a.jsx("td",{className:"groupe-eleve-rang",children:F+1}),a.jsx("td",{className:"groupe-eleve-nom-cell",children:a.jsxs("div",{children:[a.jsx("strong",{children:W.eleveNom}),a.jsx("span",{className:"groupe-eleve-email",children:W.eleveEmail})]})}),a.jsx("td",{children:a.jsxs("span",{className:`groupe-note-badge ${se(W.moyenne)}`,children:[W.moyenne,"/20"]})}),a.jsx("td",{children:W.totalQuiz}),a.jsxs("td",{children:[W.tauxReussite,"%"]}),a.jsx("td",{children:a.jsxs("span",{className:"groupe-streak",children:[" ",W.streak.actuel,"j"]})}),a.jsxs("td",{children:[X(W.tendance)," ",W.tendance]}),a.jsxs("td",{className:"groupe-eleve-actions",children:[a.jsx("button",{className:"prof-btn-icon",onClick:()=>M(I===W.eleveId?null:W.eleveId),title:"Voir dtails",children:I===W.eleveId?"":""}),a.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>ee(W.eleveId),disabled:q===W.eleveId,title:"Retirer du groupe",children:q===W.eleveId?"":""})]})]},W.eleveId))})]})}),I&&(()=>{const W=i.find(F=>F.eleveId===I);return W?a.jsxs("div",{className:"groupe-eleve-detail",children:[a.jsxs("div",{className:"groupe-eleve-detail-header",children:[a.jsxs("h3",{children:[" Dtail  ",W.eleveNom]}),a.jsx("button",{className:"prof-btn-icon",onClick:()=>M(null),children:""})]}),a.jsxs("div",{className:"groupe-eleve-detail-grid",children:[a.jsxs("div",{className:"groupe-eleve-detail-card",children:[a.jsx("h4",{children:"Score global"}),a.jsx("div",{className:"groupe-eleve-score-circle",children:a.jsxs("span",{className:se(W.scoreGlobal/5),children:[W.scoreGlobal,"/100"]})})]}),a.jsxs("div",{className:"groupe-eleve-detail-card",children:[a.jsx("h4",{children:" Streak"}),a.jsxs("p",{children:["Actuel : ",a.jsxs("strong",{children:[W.streak.actuel," jour",W.streak.actuel!==1?"s":""]})]}),a.jsxs("p",{children:["Meilleur : ",W.streak.meilleur," jours"]})]}),a.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[a.jsx("h4",{children:" Lacunes dtectes"}),W.lacunes.length===0?a.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):a.jsx("ul",{className:"groupe-lacunes-liste",children:W.lacunes.map((F,re)=>a.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${F.niveauUrgence}`,children:[a.jsxs("span",{className:"groupe-lacune-nom",children:[F.disciplineNom,F.chapitre&&`  ${F.chapitre}`]}),a.jsxs("span",{className:"groupe-lacune-moyenne",children:[F.moyenne,"/20"]}),a.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${F.niveauUrgence}`,children:F.niveauUrgence})]},re))})]})]})]}):null})()]})]}),E==="quiz"&&a.jsxs("div",{className:"groupe-quiz",children:[a.jsxs("div",{className:"groupe-quiz-selector",children:[a.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),a.jsxs("select",{id:"select-quiz",value:B||"",onChange:W=>{W.target.value&&V(W.target.value)},className:"prof-select",children:[a.jsx("option",{value:"",children:" Choisir un quiz "}),h.map(W=>a.jsx("option",{value:W.id,children:W.titre},W.id))]})]}),!B&&a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Analyse par quiz"}),a.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),P&&a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Analyse en cours..."})]}),p&&!P&&a.jsxs("div",{className:"groupe-quiz-resultats",children:[a.jsxs("div",{className:"groupe-quiz-stats-header",children:[a.jsx("h3",{children:p.quizTitre}),a.jsxs("div",{className:"groupe-quiz-stats-grid",children:[a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsx("span",{className:"groupe-stat-mini-value",children:p.totalPassages}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsxs("span",{className:`groupe-stat-mini-value ${se(p.moyenneScore)}`,children:[p.moyenneScore,"/20"]}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsxs("span",{className:"groupe-stat-mini-value",children:[p.tauxReussite,"%"]}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(p.tempsEcouleMoyen/60),"min"]}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),a.jsxs("div",{className:"groupe-quiz-questions",children:[a.jsx("h4",{children:" Questions les plus rates"}),p.questionsRatees.filter(W=>W.tauxEchec>30).map((W,F)=>a.jsxs("div",{className:"groupe-quiz-question-card",children:[a.jsxs("div",{className:"groupe-quiz-question-header",children:[a.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",W.questionIndex+1]}),a.jsxs("span",{className:"groupe-quiz-question-echec",children:[W.tauxEchec,"% d'chec"]})]}),a.jsx("p",{className:"groupe-quiz-question-texte",children:W.questionTexte}),a.jsx("div",{className:"groupe-quiz-question-reponse",children:a.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",W.reponseCorrecte]})}),W.reponsesFrequentes.length>0&&a.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[a.jsx("span",{children:"Erreurs frquentes :"}),W.reponsesFrequentes.slice(0,2).map((re,de)=>a.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",re.reponse," (",re.nombre," lve",re.nombre>1?"s":"",")"]},de))]})]},F)),p.questionsRatees.filter(W=>W.tauxEchec>30).length===0&&a.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),E==="alertes"&&a.jsx("div",{className:"groupe-alertes",children:c.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Aucune alerte"}),a.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):a.jsx("div",{className:"groupe-alertes-liste",children:c.map(W=>a.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${W.niveauUrgence}`,children:[a.jsxs("div",{className:"groupe-alerte-header",children:[a.jsx("span",{className:"groupe-alerte-emoji",children:we(W.type)}),a.jsx("span",{className:"groupe-alerte-eleve",children:W.eleveNom}),a.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${W.niveauUrgence}`,children:W.niveauUrgence})]}),a.jsx("p",{className:"groupe-alerte-message",children:W.message}),a.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{A("eleves"),M(W.eleveId)},children:" Voir dtail"})]},W.id))})})]})},Rve=()=>{const{currentUser:t}=qn(),[e,n]=_.useState("overview"),[r,i]=_.useState(null),[o,c]=_.useState(0),[u,h]=_.useState(0),[f,p]=_.useState(0),[g,y]=_.useState(0),[x,N]=_.useState([]),[j,E]=_.useState(!0),A=_.useCallback(async()=>{if(t?.uid)try{E(!0);const M=(await U9(t.uid)).filter(L=>L.statut==="actif");c(M.length);let B=0,D=0,P=0,k=0;const q=[];for(const L of M)try{const z=await vS(L.id);B+=z.nombreEleves,z.nombreEleves>0&&(D+=z.moyenneClasse,P++),k+=z.elevesEnDifficulte,q.push({...L,stats:z})}catch{q.push({...L})}h(B),p(P>0?Math.round(D/P*10)/10:0),y(k),N(q)}catch(I){console.error("Erreur chargement rsum prof:",I)}finally{E(!1)}},[t?.uid]);_.useEffect(()=>{A()},[A]);const R=I=>{i(I),n("detail")},T=()=>{i(null),n("groupes"),A()};return j?a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement de votre espace professeur..."})]}):a.jsxs("div",{className:"prof-dashboard",children:[a.jsx("header",{className:"prof-dashboard-header",children:a.jsxs("div",{children:[a.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),a.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",t?.displayName||"Professeur"," "]})]})}),e!=="detail"&&a.jsxs("nav",{className:"prof-nav",children:[a.jsx("button",{className:`prof-nav-btn ${e==="overview"?"active":""}`,onClick:()=>n("overview"),children:" Vue d'ensemble"}),a.jsx("button",{className:`prof-nav-btn ${e==="groupes"?"active":""}`,onClick:()=>n("groupes"),children:" Mes groupes-classes"})]}),e==="overview"&&a.jsxs("div",{className:"prof-overview",children:[a.jsxs("div",{className:"prof-overview-cards",children:[a.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>n("groupes"),children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsx("span",{className:"prof-overview-card-value",children:o}),a.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",o!==1?"s":""," actif",o!==1?"s":""]})]})]}),a.jsxs("div",{className:"prof-overview-card",children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsx("span",{className:"prof-overview-card-value",children:u}),a.jsxs("span",{className:"prof-overview-card-label",children:["lve",u!==1?"s":""," inscrit",u!==1?"s":""]})]})]}),a.jsxs("div",{className:"prof-overview-card",children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsxs("span",{className:"prof-overview-card-value",children:[f,"/20"]}),a.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),a.jsxs("div",{className:"prof-overview-card",children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsx("span",{className:`prof-overview-card-value ${g>0?"prof-note-critique":""}`,children:g}),a.jsxs("span",{className:"prof-overview-card-label",children:["lve",g!==1?"s":""," en difficult"]})]})]})]}),x.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),a.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),a.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>n("groupes"),children:" Crer un groupe-classe"})]}):a.jsxs("div",{className:"prof-overview-groupes",children:[a.jsx("h2",{children:"Mes groupes"}),a.jsx("div",{className:"prof-overview-groupes-grid",children:x.map(I=>a.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>R(I),children:[a.jsxs("div",{className:"prof-overview-groupe-header",children:[a.jsx("h3",{children:I.nom}),a.jsx("span",{className:"prof-overview-groupe-matiere",children:I.matiereNom})]}),I.stats&&a.jsxs("div",{className:"prof-overview-groupe-stats",children:[a.jsxs("div",{children:[a.jsx("span",{className:"prof-overview-groupe-stat-value",children:I.stats.nombreEleves}),a.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),a.jsxs("div",{children:[a.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[I.stats.moyenneClasse,"/20"]}),a.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),a.jsxs("div",{children:[a.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[I.stats.tauxReussite,"%"]}),a.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),a.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},I.id))})]})]}),e==="groupes"&&a.jsx(Pve,{onSelectGroupe:R}),e==="detail"&&r&&a.jsx(Ove,{groupe:r,onRetour:T})]})},kve=()=>{const{currentUser:t}=qn(),e=t?.uid||"",n=t?.displayName||"Parent",[r,i]=_.useState([]),[o,c]=_.useState(null),[u,h]=_.useState(null),[f,p]=_.useState(!0),[g,y]=_.useState(!1),[x,N]=_.useState(null),[j,E]=_.useState(!1),[A,R]=_.useState(""),[T,I]=_.useState(!1),[M,B]=_.useState(null),[D,P]=_.useState(null),[k,q]=_.useState("apercu");_.useEffect(()=>{L()},[e]),_.useEffect(()=>{o&&z(o)},[o]);const L=async()=>{try{p(!0),N(null);const ee=await Jge(e);i(ee),ee.length===1&&c(ee[0].enfantId)}catch(ee){N("Erreur lors du chargement des enfants."),console.error(ee)}finally{p(!1)}},z=async ee=>{try{y(!0),N(null);const H=await eve(e,ee);h(H)}catch(H){N(H.message||"Erreur lors du chargement du suivi."),h(null)}finally{y(!1)}},V=async ee=>{if(ee.preventDefault(),B(null),P(null),!A.trim()){B("Veuillez saisir le code d'invitation.");return}try{I(!0);const H=await Xge(e,A);P(`${H.enfantNom} a t ajout avec succs !`),R(""),E(!1),await L(),c(H.enfantId)}catch(H){B(H.message||"Erreur lors de la liaison.")}finally{I(!1)}},ve=async ee=>{if(window.confirm(`tes-vous sr de vouloir retirer ${ee.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await Zge(ee.id,e),o===ee.enfantId&&(c(null),h(null)),await L()}catch(se){N(se.message||"Erreur lors de la suppression.")}};return f?a.jsxs("div",{className:"parent-loading",children:[a.jsx("div",{className:"parent-spinner"}),a.jsx("p",{children:"Chargement de votre espace parent..."})]}):a.jsxs("div",{className:"parent-dashboard",children:[a.jsxs("header",{className:"parent-header",children:[a.jsxs("div",{className:"parent-header-info",children:[a.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),a.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",a.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),a.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{E(!j),B(null),P(null)},children:" Ajouter un enfant"})]}),x&&a.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[a.jsxs("span",{children:[" ",x]}),a.jsx("button",{onClick:()=>N(null),children:""})]}),D&&a.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[a.jsxs("span",{children:[" ",D]}),a.jsx("button",{onClick:()=>P(null),children:""})]}),j&&a.jsxs("div",{className:"parent-form-liaison",children:[a.jsx("h3",{children:" Lier un enfant  votre compte"}),a.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),a.jsxs("form",{onSubmit:V,className:"parent-form",children:[a.jsxs("div",{className:"parent-form-group",children:[a.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),a.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:A,onChange:ee=>R(ee.target.value.toUpperCase()),maxLength:14,disabled:T,className:"parent-input"})]}),M&&a.jsxs("p",{className:"parent-form-erreur",children:[" ",M]}),a.jsxs("div",{className:"parent-form-actions",children:[a.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:T,children:T?"Vrification...":" Valider"}),a.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>E(!1),children:"Annuler"})]})]})]}),r.length===0?a.jsxs("div",{className:"parent-empty-state",children:[a.jsx("div",{className:"parent-empty-icon",children:""}),a.jsx("h2",{children:"Aucun enfant li"}),a.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),a.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>E(!0),children:" Ajouter mon premier enfant"})]}):a.jsxs("div",{className:"parent-content",children:[a.jsxs("aside",{className:"parent-sidebar",children:[a.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),a.jsx("ul",{className:"parent-enfants-liste",children:r.map(ee=>a.jsxs("li",{className:`parent-enfant-card ${o===ee.enfantId?"parent-enfant-actif":""}`,onClick:()=>c(ee.enfantId),children:[a.jsx("div",{className:"parent-enfant-avatar",children:ee.enfantNom.charAt(0).toUpperCase()}),a.jsxs("div",{className:"parent-enfant-info",children:[a.jsx("span",{className:"parent-enfant-nom",children:ee.enfantNom}),ee.enfantClasse&&a.jsx("span",{className:"parent-enfant-classe",children:ee.enfantClasse})]}),a.jsx("button",{className:"parent-enfant-supprimer",onClick:H=>{H.stopPropagation(),ve(ee)},title:"Retirer cet enfant",children:""})]},ee.id))})]}),a.jsx("main",{className:"parent-main",children:o?g?a.jsxs("div",{className:"parent-loading",children:[a.jsx("div",{className:"parent-spinner"}),a.jsx("p",{children:"Chargement du suivi..."})]}):u?a.jsxs("div",{className:"parent-dashboard-detail",children:[a.jsxs("div",{className:"parent-enfant-header",children:[a.jsxs("div",{className:"parent-enfant-header-info",children:[a.jsx("h2",{children:u.enfant.nom}),u.enfant.classe&&a.jsx("span",{className:"parent-badge",children:u.enfant.classe}),u.enfant.derniereConnexion&&a.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",q1(u.enfant.derniereConnexion)]})]}),a.jsx("p",{className:"parent-message-motivation",children:ave(u.scoreGlobal)})]}),a.jsxs("div",{className:"parent-indicateurs",children:[a.jsxs("div",{className:"parent-card parent-card-score",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Score Global"}),a.jsxs("span",{className:`parent-card-value parent-score-${u.scoreGlobal>=60?"bon":u.scoreGlobal>=40?"moyen":"bas"}`,children:[u.scoreGlobal,"/100"]})]})]}),a.jsxs("div",{className:"parent-card parent-card-streak",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Streak"}),a.jsxs("span",{className:"parent-card-value",children:[u.streak.actuel," jour",u.streak.actuel>1?"s":""]})]})]}),a.jsxs("div",{className:"parent-card parent-card-lacunes",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Lacunes"}),a.jsxs("span",{className:"parent-card-value",children:[u.lacunes.length," matire",u.lacunes.length>1?"s":""]})]})]}),a.jsxs("div",{className:"parent-card parent-card-objectifs",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Objectifs"}),a.jsxs("span",{className:"parent-card-value",children:[u.objectifs.filter(ee=>ee.statut==="atteint").length,"/",u.objectifs.length]})]})]})]}),a.jsxs("div",{className:"parent-section parent-section-semaine",children:[a.jsx("h3",{children:" Activit de la semaine"}),a.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((ee,H)=>a.jsxs("div",{className:`parent-jour ${u.streak.semaineCourante[H]?"parent-jour-actif":"parent-jour-inactif"}`,children:[a.jsx("span",{className:"parent-jour-label",children:ee}),a.jsx("span",{className:"parent-jour-icon",children:u.streak.semaineCourante[H]?"":""})]},ee))})]}),a.jsxs("div",{className:"parent-onglets",children:[a.jsx("button",{className:`parent-onglet ${k==="apercu"?"parent-onglet-actif":""}`,onClick:()=>q("apercu"),children:" Aperu"}),a.jsxs("button",{className:`parent-onglet ${k==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>q("lacunes"),children:[" Lacunes (",u.lacunes.length,")"]}),a.jsxs("button",{className:`parent-onglet ${k==="alertes"?"parent-onglet-actif":""}`,onClick:()=>q("alertes"),children:[" Alertes (",u.alertes.length,")"]}),a.jsx("button",{className:`parent-onglet ${k==="resume"?"parent-onglet-actif":""}`,onClick:()=>q("resume"),children:" Rsum"})]}),a.jsxs("div",{className:"parent-onglet-contenu",children:[k==="apercu"&&a.jsxs("div",{className:"parent-tab-apercu",children:[a.jsxs("div",{className:"parent-section",children:[a.jsx("h3",{children:" Derniers quiz passs"}),u.derniersQuiz.length===0?a.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):a.jsx("div",{className:"parent-quiz-liste",children:u.derniersQuiz.map((ee,H)=>a.jsxs("div",{className:`parent-quiz-item ${ee.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[a.jsxs("div",{className:"parent-quiz-info",children:[a.jsx("span",{className:"parent-quiz-discipline",children:ee.disciplineNom}),a.jsx("span",{className:"parent-quiz-titre",children:ee.quizTitre})]}),a.jsxs("div",{className:"parent-quiz-score",children:[a.jsxs("span",{className:`parent-quiz-note ${ee.reussi?"note-ok":"note-ko"}`,children:[ee.noteSur20,"/20"]}),a.jsx("span",{className:"parent-quiz-statut",children:ee.reussi?" Russi":" chou"})]}),a.jsx("span",{className:"parent-quiz-date",children:q1(ee.datePassage)})]},H))})]}),a.jsxs("div",{className:"parent-section",children:[a.jsx("h3",{children:" Objectifs de la semaine"}),u.objectifs.length===0?a.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):a.jsx("div",{className:"parent-objectifs-liste",children:u.objectifs.map((ee,H)=>a.jsxs("div",{className:"parent-objectif-item",children:[a.jsxs("div",{className:"parent-objectif-header",children:[a.jsx("span",{className:"parent-objectif-titre",children:ee.titre}),a.jsx("span",{className:`parent-objectif-statut parent-statut-${ee.statut}`,children:ee.statut==="atteint"?" Atteint":ee.statut==="en_cours"?" En cours":ee.statut==="echoue"?" chou":" Non commenc"})]}),a.jsx("div",{className:"parent-progress-bar",children:a.jsx("div",{className:`parent-progress-fill parent-progress-${ee.statut}`,style:{width:`${Math.min(ee.progression/ee.cible*100,100)}%`}})}),a.jsxs("span",{className:"parent-objectif-detail",children:[ee.progression,"/",ee.cible]})]},H))})]})]}),k==="lacunes"&&a.jsx("div",{className:"parent-tab-lacunes",children:u.lacunes.length===0?a.jsxs("div",{className:"parent-vide-section",children:[a.jsx("span",{className:"parent-vide-icon",children:""}),a.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):a.jsx("div",{className:"parent-lacunes-liste",children:u.lacunes.map((ee,H)=>a.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:hy(ee.niveauUrgence)},children:[a.jsxs("div",{className:"parent-lacune-header",children:[a.jsx("span",{className:"parent-lacune-discipline",children:ee.disciplineNom}),a.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:hy(ee.niveauUrgence),color:"#fff"},children:R9(ee.niveauUrgence)})]}),a.jsxs("div",{className:"parent-lacune-details",children:[a.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",a.jsxs("strong",{children:[ee.moyenne,"/20"]})]}),a.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",k9(ee.tendance)," ",ee.tendance==="hausse"?"En hausse":ee.tendance==="baisse"?"En baisse":"Stable"]})]}),a.jsx("p",{className:"parent-lacune-conseil",children:ee.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":ee.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},H))})}),k==="alertes"&&a.jsx("div",{className:"parent-tab-alertes",children:u.alertes.length===0?a.jsxs("div",{className:"parent-vide-section",children:[a.jsx("span",{className:"parent-vide-icon",children:""}),a.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):a.jsx("div",{className:"parent-alertes-liste",children:u.alertes.map((ee,H)=>a.jsxs("div",{className:`parent-alerte-item parent-alerte-${ee.niveau}`,children:[a.jsxs("div",{className:"parent-alerte-header",children:[a.jsx("span",{className:"parent-alerte-titre",children:ee.titre}),a.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:ive(ee.niveau),color:"#fff"},children:sve(ee.type)})]}),a.jsx("p",{className:"parent-alerte-message",children:ee.message}),a.jsx("span",{className:"parent-alerte-date",children:q1(ee.dateCreation)})]},H))})}),k==="resume"&&u.resume&&a.jsxs("div",{className:"parent-tab-resume",children:[a.jsxs("div",{className:"parent-resume-header",children:[a.jsxs("h3",{children:[" Rsum : ",u.resume.semaine]}),a.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",u.resume.scoreGlobal,"/100"," ",ZD(u.resume.evolutionScore)]})]}),a.jsxs("div",{className:"parent-resume-stats",children:[a.jsxs("div",{className:"parent-resume-stat",children:[a.jsx("span",{className:"parent-resume-stat-value",children:u.resume.nombreQuizSemaine}),a.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),a.jsxs("div",{className:"parent-resume-stat",children:[a.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.joursActifsSemaine,"/7"]}),a.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),a.jsxs("div",{className:"parent-resume-stat",children:[a.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.tempsEstimeMinutes," min"]}),a.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),a.jsxs("div",{className:"parent-resume-stat",children:[a.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.objectifsAtteints,"/",u.resume.objectifsTotal]}),a.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),u.resume.evolutionDisciplines.length>0&&a.jsxs("div",{className:"parent-section",children:[a.jsx("h4",{children:" volution par matire"}),a.jsx("div",{className:"parent-evolution-liste",children:u.resume.evolutionDisciplines.map((ee,H)=>a.jsxs("div",{className:"parent-evolution-item",children:[a.jsx("span",{className:"parent-evolution-discipline",children:ee.disciplineNom}),a.jsxs("div",{className:"parent-evolution-scores",children:[a.jsxs("span",{className:"parent-evolution-prec",children:[ee.moyenneSemainePrecedente,"/20"]}),a.jsx("span",{className:"parent-evolution-fleche",children:ZD(ee.evolution)}),a.jsxs("span",{className:"parent-evolution-courante",children:[ee.moyenneSemaineCourante,"/20"]}),a.jsxs("span",{className:`parent-evolution-ecart ${ee.ecart>0?"ecart-positif":ee.ecart<0?"ecart-negatif":""}`,children:["(",ee.ecart>0?"+":"",ee.ecart,")"]})]})]},H))})]}),u.resume.disciplinesEnDifficulte.length>0&&a.jsxs("div",{className:"parent-section parent-section-warning",children:[a.jsx("h4",{children:" Matires ncessitant une attention"}),a.jsx("ul",{className:"parent-disciplines-difficulte",children:u.resume.disciplinesEnDifficulte.map((ee,H)=>a.jsx("li",{children:ee},H))})]})]}),k==="resume"&&!u.resume&&a.jsxs("div",{className:"parent-vide-section",children:[a.jsx("span",{className:"parent-vide-icon",children:""}),a.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):a.jsxs("div",{className:"parent-erreur-dashboard",children:[a.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),a.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&z(o),children:" Ressayer"})]}):a.jsx("div",{className:"parent-select-enfant",children:a.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},Dve="https://api.pedaclic.sn",Uu={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},Mve={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},Cg={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function zve(t){try{const e=await fetch(`${Dve}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const r=await e.json().catch(()=>({}));throw new Error(r.error||`Erreur serveur (${e.status})`)}const n=await e.json();if(!n.success)throw new Error(n.error||"La gnration a chou.");return n}catch(e){throw console.error("[aiGeneratorService] Erreur gnration:",e),e instanceof TypeError&&e.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):e}}async function Lve(t,e,n,r){try{const i=await ei(Ge(Se,"generated_content"),{userId:t,type:e.type,discipline:e.discipline,disciplineId:r,classe:e.classe,chapitre:e.chapitre,content:n,options:e.options||null,createdAt:Xe.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",i.id),i.id}catch(i){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",i),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function qve(t,e,n,r){try{const i=n.map((u,h)=>({id:`q_${Date.now()}_${h}`,question:u.question,options:u.options,reponseCorrecte:u.reponseCorrecte,explication:u.explication||"",difficulte:u.difficulte||"moyen",points:u.points||2})),o={disciplineId:r,titre:`Quiz IA  ${e.chapitre}`,description:`Quiz auto-gnr pour ${e.discipline} (${e.classe})  Chapitre : ${e.chapitre}`,questions:i,duree:15,isPremium:!0,noteMinimale:10,auteurId:t,source:"ia_generator",createdAt:Xe.now()},c=await ei(Ge(Se,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",c.id),c.id}catch(i){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",i),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function Uve(t,e=20){try{const n=yt(Ge(Se,"generated_content"),at("userId","==",t),Nn("createdAt","desc")),r=await lt(n),i=[];return r.forEach(o=>{i.length<e&&i.push({id:o.id,...o.data()})}),i}catch(n){throw console.error("[aiGeneratorService] Erreur chargement historique:",n),new Error("Erreur lors du chargement de l'historique.")}}async function Vve(t){try{await Uc(He(Se,"generated_content",t)),console.log("[aiGeneratorService] Contenu supprim:",t)}catch(e){throw console.error("[aiGeneratorService] Erreur suppression:",e),new Error("Erreur lors de la suppression du contenu.")}}const Bve=["6me","5me","4me","3me","2nde","1re","Terminale"],$ve=[30,45,60,90,120],Fve=()=>{const{currentUser:t}=qn(),[e,n]=_.useState(1),[r,i]=_.useState([]),[o,c]=_.useState(null),[u,h]=_.useState(""),[f,p]=_.useState(""),[g,y]=_.useState(""),[x,N]=_.useState(null),[j,E]=_.useState({}),[A,R]=_.useState(!1),[T,I]=_.useState(null),[M,B]=_.useState(null),[D,P]=_.useState(!1),[k,q]=_.useState(!1),[L,z]=_.useState(null),[V,ve]=_.useState(!1),[ee,H]=_.useState([]),[se,X]=_.useState(!1),[we,W]=_.useState(!0),F=_.useMemo(()=>{const J=new Map;return r.forEach(Ae=>{J.has(Ae.nom)||J.set(Ae.nom,Ae)}),Array.from(J.values())},[r]);_.useEffect(()=>{(async()=>{try{W(!0);const Ae=yt(Ge(Se,"disciplines"),Nn("nom")),Ke=await lt(Ae),Je=[];Ke.forEach(ot=>{const on=ot.data();on.nom&&on.nom.trim()&&Je.push({id:ot.id,nom:on.nom||"",classe:on.classe||"",niveau:on.niveau||""})}),i(Je)}catch(Ae){console.error("[AIGenerator] Erreur chargement disciplines:",Ae),B("Impossible de charger les disciplines.")}finally{W(!1)}})()},[]);const re=J=>{c(J),B(null)},de=()=>{const J=[];if(o||J.push("discipline"),u||J.push("classe"),(!f||f<1)&&J.push("dure de la leon"),J.length>0){B(`Champs requis manquants : ${J.join(", ")}`);return}n(2),B(null)},ye=()=>{if(!g.trim()){B("Veuillez saisir le titre du chapitre.");return}n(3),B(null)},he=J=>{N(J),n(4),B(null)},G=()=>{e>1&&(n(J=>J-1),B(null),e===5&&(I(null),q(!1),z(null)))},ce=()=>{n(1),c(null),h(""),p(""),y(""),N(null),E({}),I(null),B(null),q(!1),z(null)},Ie=async()=>{if(!o||!x||!g.trim()||!u){B("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}R(!0),B(null);try{const J={...j,duree:typeof f=="number"?f:void 0},Ae={type:x,discipline:o.nom,classe:u,chapitre:g.trim(),options:Object.keys(J).length>0?J:void 0},Ke=await zve(Ae);I(Ke),n(5)}catch(J){const Ae=J instanceof Error?J.message:"Erreur inconnue";B(Ae)}finally{R(!1)}},ae=async()=>{if(!(!t||!T||!o||!x)){P(!0),B(null);try{let J;const Ke=r.find(ot=>ot.nom===o.nom&&ot.classe===u)?.id||o.id,Je={type:x,discipline:o.nom,classe:u,chapitre:g.trim(),options:{...j,duree:typeof f=="number"?f:void 0}};T.type==="quiz"&&T.data.questions?J=await qve(t.uid,Je,T.data.questions,Ke):J=await Lve(t.uid,Je,T.data.content||"",Ke),z(J),q(!0)}catch(J){const Ae=J instanceof Error?J.message:"Erreur de sauvegarde";B(Ae)}finally{P(!1)}}},Z=async()=>{if(t){X(!0);try{const J=await Uve(t.uid);H(J),ve(!0)}catch(J){console.error("[AIGenerator] Erreur historique:",J)}finally{X(!1)}}},Q=async J=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await Vve(J),H(Ae=>Ae.filter(Ke=>Ke.id!==J))}catch(Ae){console.error("[AIGenerator] Erreur suppression:",Ae)}},me=_.useCallback(J=>{if(!J)return"";let Ae=J.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return Ae=Ae.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,Ke=>"<ul>"+Ke.replace(/<br \/>/g,"")+"</ul>"),`<p>${Ae}</p>`},[]);return t?t.isPremium?a.jsxs("div",{className:"ai-generator",children:[a.jsxs("div",{className:"ai-generator__header",children:[a.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),a.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),a.jsxs("div",{className:"ai-generator__header-actions",children:[a.jsx("button",{className:"btn btn--outline btn--sm",onClick:Z,disabled:se,children:se?" Chargement...":" Historique"}),e>1&&a.jsx("button",{className:"btn btn--outline btn--sm",onClick:ce,children:" Recommencer"})]})]}),a.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(J=>a.jsxs("div",{className:`ai-generator__step-indicator ${J===e?"ai-generator__step-indicator--active":""} ${J<e?"ai-generator__step-indicator--done":""}`,children:[a.jsx("span",{className:"ai-generator__step-number",children:J<e?"":J}),a.jsxs("span",{className:"ai-generator__step-label",children:[J===1&&"Paramtres",J===2&&"Chapitre",J===3&&"Type",J===4&&"Options",J===5&&"Rsultat"]})]},J))}),M&&a.jsxs("div",{className:"ai-generator__error",children:[a.jsx("span",{className:"ai-generator__error-icon",children:""}),M,a.jsx("button",{className:"ai-generator__error-close",onClick:()=>B(null),children:""})]}),a.jsxs("div",{className:"ai-generator__content",children:[e===1&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsxs("label",{className:"ai-generator__label",children:["Discipline ",a.jsx("span",{className:"ai-generator__required",children:"*"})]}),we?a.jsxs("div",{className:"ai-generator__loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des disciplines..."})]}):F.length===0?a.jsx("div",{className:"ai-generator__empty",children:a.jsx("p",{children:"Aucune discipline disponible."})}):a.jsx("div",{className:"ai-generator__discipline-grid",children:F.map(J=>a.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===J.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>re(J),children:a.jsx("span",{className:"ai-generator__discipline-name",children:J.nom})},J.id))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsxs("label",{className:"ai-generator__label",children:["Classe ",a.jsx("span",{className:"ai-generator__required",children:"*"})]}),a.jsx("div",{className:"ai-generator__classe-grid",children:Bve.map(J=>a.jsx("button",{className:`ai-generator__classe-btn ${u===J?"ai-generator__classe-btn--selected":""}`,onClick:()=>{h(J),B(null)},children:J},J))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",a.jsx("span",{className:"ai-generator__required",children:"*"})]}),a.jsxs("div",{className:"ai-generator__duree-group",children:[a.jsx("div",{className:"ai-generator__duree-presets",children:$ve.map(J=>a.jsxs("button",{className:`ai-generator__duree-btn ${f===J?"ai-generator__duree-btn--selected":""}`,onClick:()=>{p(J),B(null)},children:[J," min"]},J))}),a.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:f,onChange:J=>{const Ae=parseInt(J.target.value);p(isNaN(Ae)?"":Ae),B(null)},placeholder:"Autre dure..."})]})]}),a.jsxs("div",{className:"ai-generator__nav",children:[a.jsx("div",{})," ",a.jsx("button",{className:"btn btn--primary",onClick:de,disabled:!o||!u||!f,children:"Continuer "})]})]}),e===2&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),a.jsxs("div",{className:"ai-generator__recap",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:u}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[f," minutes"]})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),a.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:g,onChange:J=>y(J.target.value),onKeyDown:J=>J.key==="Enter"&&ye(),autoFocus:!0})]}),a.jsxs("div",{className:"ai-generator__nav",children:[a.jsx("button",{className:"btn btn--outline",onClick:G,children:" Retour"}),a.jsx("button",{className:"btn btn--primary",onClick:ye,disabled:!g.trim(),children:"Continuer "})]})]}),e===3&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),a.jsxs("div",{className:"ai-generator__recap",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:u}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[f," minutes"]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),a.jsx("span",{className:"ai-generator__recap-value",children:g})]}),a.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(Uu).map(J=>a.jsxs("button",{className:"ai-generator__type-card",onClick:()=>he(J),children:[a.jsx("span",{className:"ai-generator__type-icon",children:Cg[J]}),a.jsx("span",{className:"ai-generator__type-name",children:Uu[J]}),a.jsx("span",{className:"ai-generator__type-desc",children:Mve[J]})]},J))}),a.jsx("div",{className:"ai-generator__nav",children:a.jsx("button",{className:"btn btn--outline",onClick:G,children:" Retour"})})]}),e===4&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),a.jsxs("div",{className:"ai-generator__recap",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:u}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[f," minutes"]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),a.jsx("span",{className:"ai-generator__recap-value",children:g}),a.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Cg[x]," ",x&&Uu[x]]})]}),a.jsxs("div",{className:"ai-generator__options",children:[a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),a.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(J=>a.jsxs("label",{className:"ai-generator__radio",children:[a.jsx("input",{type:"radio",name:"difficulte",value:J,checked:j.difficulte===J,onChange:()=>E(Ae=>({...Ae,difficulte:J}))}),a.jsxs("span",{className:"ai-generator__radio-label",children:[J==="facile"&&" Facile",J==="moyen"&&" Moyen",J==="difficile"&&" Difficile"]})]},J))})]}),x==="sujet_examen"&&a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),a.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(J=>a.jsxs("label",{className:"ai-generator__radio",children:[a.jsx("input",{type:"radio",name:"typeExamen",value:J,checked:j.typeExamen===J,onChange:()=>E(Ae=>({...Ae,typeExamen:J}))}),a.jsx("span",{className:"ai-generator__radio-label",children:J})]},J))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),a.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:j.objectifs||"",onChange:J=>E(Ae=>({...Ae,objectifs:J.target.value||void 0}))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),a.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:j.consignesSpeciales||"",onChange:J=>E(Ae=>({...Ae,consignesSpeciales:J.target.value||void 0}))})]})]}),a.jsxs("div",{className:"ai-generator__nav",children:[a.jsx("button",{className:"btn btn--outline",onClick:G,children:" Retour"}),a.jsx("button",{className:"btn btn--primary btn--lg",onClick:Ie,disabled:A,children:A?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),A&&a.jsxs("div",{className:"ai-generator__generating",children:[a.jsxs("div",{className:"ai-generator__generating-animation",children:[a.jsx("span",{children:""}),a.jsx("span",{children:""}),a.jsx("span",{children:""})]}),a.jsxs("p",{children:["L'IA rdige votre"," ",x&&Uu[x].toLowerCase(),"..."]}),a.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),e===5&&T&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),a.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Cg[x]," ",x&&Uu[x]]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:u}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[f," minutes"]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),a.jsx("span",{className:"ai-generator__recap-value",children:g})]}),a.jsxs("div",{className:"ai-generator__preview",children:[a.jsxs("div",{className:"ai-generator__preview-header",children:[a.jsx("h3",{children:"Prvisualisation"}),a.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const J=T.type==="quiz"?JSON.stringify(T.data.questions,null,2):T.data.content||"";navigator.clipboard.writeText(J),alert("Contenu copi dans le presse-papier !")},children:" Copier"})]}),a.jsx("div",{className:"ai-generator__preview-body",children:T.type==="quiz"&&T.data.questions?a.jsxs("div",{className:"ai-generator__quiz-preview",children:[a.jsxs("p",{className:"ai-generator__quiz-count",children:[T.data.questions.length," questions gnres"]}),T.data.questions.map((J,Ae)=>a.jsxs("div",{className:"ai-generator__quiz-item",children:[a.jsxs("div",{className:"ai-generator__quiz-question",children:[a.jsxs("strong",{children:["Q",Ae+1,"."]})," ",J.question,a.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${J.difficulte}`,children:J.difficulte})]}),a.jsx("div",{className:"ai-generator__quiz-options",children:J.options.map((Ke,Je)=>a.jsxs("div",{className:`ai-generator__quiz-option ${Je===J.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[a.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+Je)}),Ke,Je===J.reponseCorrecte&&" "]},Je))}),J.explication&&a.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",J.explication]})]},Ae))]}):a.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:me(T.data.content||"")}})})]}),a.jsxs("div",{className:"ai-generator__actions",children:[k?a.jsxs("div",{className:"ai-generator__save-success",children:[a.jsx("span",{children:" Sauvegard avec succs !"}),T.type==="quiz"&&L&&a.jsx(Ze,{to:`/quiz/${L}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):a.jsx("button",{className:"btn btn--primary btn--lg",onClick:ae,disabled:D,children:D?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):a.jsx(a.Fragment,{children:" Sauvegarder dans PedaClic"})}),a.jsx("button",{className:"btn btn--outline",onClick:ce,children:" Nouvelle gnration"})]})]})]}),V&&a.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>ve(!1),children:a.jsxs("div",{className:"ai-generator__modal",onClick:J=>J.stopPropagation(),children:[a.jsxs("div",{className:"ai-generator__modal-header",children:[a.jsx("h2",{children:" Historique des gnrations"}),a.jsx("button",{className:"ai-generator__modal-close",onClick:()=>ve(!1),children:""})]}),a.jsx("div",{className:"ai-generator__modal-body",children:ee.length===0?a.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):a.jsx("div",{className:"ai-generator__history-list",children:ee.map(J=>a.jsxs("div",{className:"ai-generator__history-item",children:[a.jsxs("div",{className:"ai-generator__history-info",children:[a.jsxs("span",{className:"ai-generator__history-type",children:[Cg[J.type]," ",Uu[J.type]]}),a.jsxs("span",{className:"ai-generator__history-details",children:[J.discipline," (",J.classe,")  ",J.chapitre]}),a.jsx("span",{className:"ai-generator__history-date",children:J.createdAt?.toDate?J.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),a.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>J.id&&Q(J.id),title:"Supprimer",children:""})]},J.id))})})]})})]}):a.jsx("div",{className:"ai-generator",children:a.jsxs("div",{className:"ai-generator__gate",children:[a.jsx("div",{className:"ai-generator__gate-icon",children:""}),a.jsx("h2",{children:"Fonctionnalit Premium"}),a.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),a.jsxs("div",{className:"ai-generator__gate-price",children:[a.jsx("span",{className:"price",children:"2 000 FCFA"}),a.jsx("span",{className:"period",children:"/mois"})]}),a.jsx(Ze,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):a.jsx("div",{className:"ai-generator",children:a.jsxs("div",{className:"ai-generator__gate",children:[a.jsx("div",{className:"ai-generator__gate-icon",children:""}),a.jsx("h2",{children:"Connexion requise"}),a.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),a.jsx(Ze,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},Hve=()=>a.jsx(hW,{children:a.jsxs(_8,{children:[a.jsx($t,{path:"/",element:a.jsx(rs,{children:a.jsx(YY,{})})}),a.jsx($t,{path:"/disciplines",element:a.jsx(rs,{children:a.jsx(ZY,{})})}),a.jsx($t,{path:"/disciplines/:id",element:a.jsx(rs,{children:a.jsx(nX,{})})}),a.jsx($t,{path:"/premium",element:a.jsx(rs,{children:a.jsx(sX,{})})}),a.jsx($t,{path:"/connexion",element:a.jsx(XY,{})}),a.jsx($t,{path:"/inscription",element:a.jsx(JY,{})}),a.jsx($t,{path:"/admin",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(oX,{})})})}),a.jsx($t,{path:"/admin/disciplines",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(lX,{})})})}),a.jsx($t,{path:"/admin/chapitres",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(cX,{})})})}),a.jsx($t,{path:"/admin/ressources",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(uX,{})})})}),a.jsx($t,{path:"/admin/quiz",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(gX,{})})})}),a.jsx($t,{path:"/admin/quiz/nouveau",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(tP,{})})})}),a.jsx($t,{path:"/admin/quiz/modifier/:quizId",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(tP,{})})})}),a.jsx($t,{path:"/admin/quiz-avance",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(HX,{})})})}),a.jsx($t,{path:"/admin/utilisateurs",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(NX,{})})})}),a.jsx($t,{path:"/admin/resultats",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(EX,{})})})}),a.jsx($t,{path:"/admin/settings",element:a.jsx(ns,{children:a.jsx(is,{children:a.jsx(SX,{})})})}),a.jsx($t,{path:"/admin/premium",element:a.jsx(e2,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),a.jsx($t,{path:"/quiz/:quizId",element:a.jsx(rs,{children:a.jsx(hJ,{})})}),a.jsx($t,{path:"/quiz-avance/:quizId",element:a.jsx(rs,{children:a.jsx(JX,{})})}),a.jsx($t,{path:"/eleve/dashboard",element:a.jsx(rs,{children:a.jsx(Tve,{})})}),a.jsx($t,{path:"/eleve/suivi",element:a.jsx(rs,{children:a.jsx(Cve,{})})}),a.jsx($t,{path:"/prof/dashboard",element:a.jsx(fW,{children:a.jsx(rs,{children:a.jsx(Rve,{})})})}),a.jsx($t,{path:"/parent/dashboard",element:a.jsx(RN,{allowedRoles:["parent","admin"],children:a.jsx(rs,{children:a.jsx(kve,{})})})}),a.jsx($t,{path:"/generateur",element:a.jsx(rs,{children:a.jsx(Fve,{})})}),a.jsx($t,{path:"*",element:a.jsx(e2,{to:"/",replace:!0})})]})}),B9=document.getElementById("root");if(!B9)throw new Error("L'lment #root n'existe pas");const Gve=CV.createRoot(B9);Gve.render(a.jsx(rM.StrictMode,{children:a.jsx(C8,{children:a.jsx(Hve,{})})}));
//# sourceMappingURL=index-BOMZ6Vty.js.map
