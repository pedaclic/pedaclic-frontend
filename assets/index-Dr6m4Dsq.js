import{a as Xf,b as bT,g as Fa,r as b,u as Ht,c as Wf,L as Re,d as Ds,e as vA,f as gA,R as jT,h as NT,i as We,N as U1,j as _T,B as ST}from"./vendor-react-BMsfgiGx.js";import{i as wT,g as CT,a as AT,p as ET,b as zT,c as OT,o as DT,d as be,u as et,s as ft,e as MT,f as kT,h as PT,j as TT,k as Gt,l as Zf,q as Le,m as nt,n as _e,r as xA,t as Ln,v as nr,w as Ae,x as Te,y as Nc,z as Br,A as vc,B as gs,C as Ma,D as ta,T as Fe,E as Jf,F as qT,G as RT,H as yA}from"./vendor-firebase-KFllCMr7.js";import{H as nx,B as jn,G as Il,L as F1,S as LT,C as xs,a as uc,b as Kd,U as IT,c as $T,d as G1,X as Oi,M as BT,e as Bd,f as UT,P as FT,g as GT,h as HT,F as QT,i as cy,j as Ud,k as VT,T as YT,I as KT,l as XT,Y as WT,m as Zr,A as cs,n as gc,o as Dt,Z as bA,p as jA,q as $l,r as qi,s as Xd,t as dc,u as NA,v as uy,w as ax,E as ql,x as ZT,y as H1,z as JT,D as eq,J as tq,R as rq,K as nq,N as aq,O as fc,Q as ix,V as uv,W as iq,_ as sq,$ as sx,a0 as dv,a1 as fv,a2 as lq,a3 as oq,a4 as cq,a5 as uq,a6 as dq,a7 as fq}from"./vendor-icons-hkj4svf_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();var mv={exports:{}},Xo={};var Q1;function mq(){if(Q1)return Xo;Q1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:u,ref:l!==void 0?l:null,props:o}}return Xo.Fragment=t,Xo.jsx=r,Xo.jsxs=r,Xo}var V1;function pq(){return V1||(V1=1,mv.exports=mq()),mv.exports}var n=pq(),pv={exports:{}},Wo={},hv={exports:{}},vv={};var Y1;function hq(){return Y1||(Y1=1,(function(e){function t(R,J){var H=R.length;R.push(J);e:for(;0<H;){var ve=H-1>>>1,U=R[ve];if(0<l(U,J))R[ve]=J,R[H]=U,H=ve;else break e}}function r(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var J=R[0],H=R.pop();if(H!==J){R[0]=H;e:for(var ve=0,U=R.length,ge=U>>>1;ve<ge;){var re=2*(ve+1)-1,me=R[re],xe=re+1,he=R[xe];if(0>l(me,H))xe<U&&0>l(he,me)?(R[ve]=he,R[xe]=H,ve=xe):(R[ve]=me,R[re]=H,ve=re);else if(xe<U&&0>l(he,H))R[ve]=he,R[xe]=H,ve=xe;else break e}}return J}function l(R,J){var H=R.sortIndex-J.sortIndex;return H!==0?H:R.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],p=[],h=1,v=null,y=3,x=!1,_=!1,N=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function E(R){for(var J=r(p);J!==null;){if(J.callback===null)a(p);else if(J.startTime<=R)a(p),J.sortIndex=J.expirationTime,t(m,J);else break;J=r(p)}}function O(R){if(N=!1,E(R),!_)if(r(m)!==null)_=!0,M||(M=!0,B());else{var J=r(p);J!==null&&T(O,J.startTime-R)}}var M=!1,P=-1,q=5,L=-1;function Y(){return S?!0:!(e.unstable_now()-L<q)}function W(){if(S=!1,M){var R=e.unstable_now();L=R;var J=!0;try{e:{_=!1,N&&(N=!1,z(P),P=-1),x=!0;var H=y;try{t:{for(E(R),v=r(m);v!==null&&!(v.expirationTime>R&&Y());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,y=v.priorityLevel;var U=ve(v.expirationTime<=R);if(R=e.unstable_now(),typeof U=="function"){v.callback=U,E(R),J=!0;break t}v===r(m)&&a(m),E(R)}else a(m);v=r(m)}if(v!==null)J=!0;else{var ge=r(p);ge!==null&&T(O,ge.startTime-R),J=!1}}break e}finally{v=null,y=H,x=!1}J=void 0}}finally{J?B():M=!1}}}var B;if(typeof w=="function")B=function(){w(W)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,k=Q.port2;Q.port1.onmessage=W,B=function(){k.postMessage(null)}}else B=function(){C(W,0)};function T(R,J){P=C(function(){R(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var H=y;y=J;try{return R()}finally{y=H}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,J){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=y;y=R;try{return J()}finally{y=H}},e.unstable_scheduleCallback=function(R,J,H){var ve=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ve+H:ve):H=ve,R){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=H+U,R={id:h++,callback:J,priorityLevel:R,startTime:H,expirationTime:U,sortIndex:-1},H>ve?(R.sortIndex=H,t(p,R),r(m)===null&&R===r(p)&&(N?(z(P),P=-1):N=!0,T(O,H-ve))):(R.sortIndex=U,t(m,R),_||x||(_=!0,M||(M=!0,B()))),R},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(R){var J=y;return function(){var H=y;y=J;try{return R.apply(this,arguments)}finally{y=H}}}})(vv)),vv}var K1;function vq(){return K1||(K1=1,hv.exports=hq()),hv.exports}var X1;function gq(){if(X1)return Wo;X1=1;var e=vq(),t=Xf(),r=bT();function a(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(a(188))}function p(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(a(188));return s!==i?null:i}for(var c=i,f=s;;){var g=c.return;if(g===null)break;var j=g.alternate;if(j===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===j.child){for(j=g.child;j;){if(j===c)return m(g),i;if(j===f)return m(g),s;j=j.sibling}throw Error(a(188))}if(c.return!==f.return)c=g,f=j;else{for(var A=!1,D=g.child;D;){if(D===c){A=!0,c=g,f=j;break}if(D===f){A=!0,f=g,c=j;break}D=D.sibling}if(!A){for(D=j.child;D;){if(D===c){A=!0,c=j,f=g;break}if(D===f){A=!0,f=j,c=g;break}D=D.sibling}if(!A)throw Error(a(189))}}if(c.alternate!==f)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?i:s}function h(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=h(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Symbol.for("react.client.reference");function k(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case M:return"SuspenseList";case L:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case w:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case E:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return s=i.displayName||null,s!==null?s:k(i.type)||"Memo";case q:s=i._payload,i=i._init;try{return k(i(s))}catch{}}return null}var T=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},ve=[],U=-1;function ge(i){return{current:i}}function re(i){0>U||(i.current=ve[U],ve[U]=null,U--)}function me(i,s){U++,ve[U]=i.current,i.current=s}var xe=ge(null),he=ge(null),F=ge(null),de=ge(null);function Ee(i,s){switch(me(F,s),me(he,i),me(xe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?d1(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=d1(s),i=f1(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(xe),me(xe,i)}function ie(){re(xe),re(he),re(F)}function K(i){i.memoizedState!==null&&me(de,i);var s=xe.current,c=f1(s,i.type);s!==c&&(me(he,i),me(xe,c))}function $(i){he.current===i&&(re(xe),re(he)),de.current===i&&(re(de),Qo._currentValue=H)}var se,V;function ye(i){if(se===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);se=s&&s[1]||"",V=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+se+i+V}var qe=!1;function Ie(i,s){if(!i||qe)return"";qe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var ne=le}Reflect.construct(i,[],pe)}else{try{pe.call()}catch(le){ne=le}i.call(pe.prototype)}}else{try{throw Error()}catch(le){ne=le}(pe=i())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=f.DetermineComponentFrameRoot(),A=j[0],D=j[1];if(A&&D){var I=A.split(`
`),te=D.split(`
`);for(g=f=0;f<I.length&&!I[f].includes("DetermineComponentFrameRoot");)f++;for(;g<te.length&&!te[g].includes("DetermineComponentFrameRoot");)g++;if(f===I.length||g===te.length)for(f=I.length-1,g=te.length-1;1<=f&&0<=g&&I[f]!==te[g];)g--;for(;1<=f&&0<=g;f--,g--)if(I[f]!==te[g]){if(f!==1||g!==1)do if(f--,g--,0>g||I[f]!==te[g]){var ue=`
`+I[f].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),ue}while(1<=f&&0<=g);break}}}finally{qe=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ye(c):""}function Qe(i,s){switch(i.tag){case 26:case 27:case 5:return ye(i.type);case 16:return ye("Lazy");case 13:return i.child!==s&&s!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Ie(i.type,!1);case 11:return Ie(i.type.render,!1);case 1:return Ie(i.type,!0);case 31:return ye("Activity");default:return""}}function Qt(i){try{var s="",c=null;do s+=Qe(i,c),c=i,i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var An=Object.prototype.hasOwnProperty,rn=e.unstable_scheduleCallback,sa=e.unstable_cancelCallback,ce=e.unstable_shouldYield,Ce=e.unstable_requestPaint,ke=e.unstable_now,$e=e.unstable_getCurrentPriorityLevel,Nt=e.unstable_ImmediatePriority,gr=e.unstable_UserBlockingPriority,Bn=e.unstable_NormalPriority,Ls=e.unstable_LowPriority,nn=e.unstable_IdlePriority,Ja=e.log,Xm=e.unstable_setDisableYieldValue,xr=null,xt=null;function Un(i){if(typeof Ja=="function"&&Xm(i),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(xr,i)}catch{}}var _r=Math.clz32?Math.clz32:Zm,au=Math.log,Wm=Math.LN2;function Zm(i){return i>>>=0,i===0?32:31-(au(i)/Wm|0)|0}var Is=256,$s=262144,Bs=4194304;function la(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Fn(i,s,c){var f=i.pendingLanes;if(f===0)return 0;var g=0,j=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var D=f&134217727;return D!==0?(f=D&~j,f!==0?g=la(f):(A&=D,A!==0?g=la(A):c||(c=D&~i,c!==0&&(g=la(c))))):(D=f&~j,D!==0?g=la(D):A!==0?g=la(A):c||(c=f&~i,c!==0&&(g=la(c)))),g===0?0:s!==0&&s!==g&&(s&j)===0&&(j=g&-g,c=s&-s,j>=c||j===32&&(c&4194048)!==0)?s:g}function Ui(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Z(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var i=Bs;return Bs<<=1,(Bs&62914560)===0&&(Bs=4194304),i}function pt(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function yr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function io(i,s,c,f,g,j){var A=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var D=i.entanglements,I=i.expirationTimes,te=i.hiddenUpdates;for(c=A&~c;0<c;){var ue=31-_r(c),pe=1<<ue;D[ue]=0,I[ue]=-1;var ne=te[ue];if(ne!==null)for(te[ue]=null,ue=0;ue<ne.length;ue++){var le=ne[ue];le!==null&&(le.lane&=-536870913)}c&=~pe}f!==0&&Fi(i,f,0),j!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=j&~(A&~s))}function Fi(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var f=31-_r(s);i.entangledLanes|=s,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function Yb(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var f=31-_r(c),g=1<<f;g&s|i[f]&s&&(i[f]|=s),c&=~g}}function Kb(i,s){var c=s&-s;return c=(c&42)!==0?1:Jm(c),(c&(i.suspendedLanes|s))!==0?0:c}function Jm(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ep(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Xb(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:T1(i.type))}function Wb(i,s){var c=J.p;try{return J.p=i,s()}finally{J.p=c}}var ei=Math.random().toString(36).slice(2),or="__reactFiber$"+ei,Dr="__reactProps$"+ei,Us="__reactContainer$"+ei,tp="__reactEvents$"+ei,ck="__reactListeners$"+ei,uk="__reactHandles$"+ei,Zb="__reactResources$"+ei,so="__reactMarker$"+ei;function rp(i){delete i[or],delete i[Dr],delete i[tp],delete i[ck],delete i[uk]}function Fs(i){var s=i[or];if(s)return s;for(var c=i.parentNode;c;){if(s=c[Us]||c[or]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=y1(i);i!==null;){if(c=i[or])return c;i=y1(i)}return s}i=c,c=i.parentNode}return null}function Gs(i){if(i=i[or]||i[Us]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function lo(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(a(33))}function Hs(i){var s=i[Zb];return s||(s=i[Zb]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Wt(i){i[so]=!0}var Jb=new Set,e0={};function Gi(i,s){Qs(i,s),Qs(i+"Capture",s)}function Qs(i,s){for(e0[i]=s,i=0;i<s.length;i++)Jb.add(s[i])}var dk=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),t0={},r0={};function fk(i){return An.call(r0,i)?!0:An.call(t0,i)?!1:dk.test(i)?r0[i]=!0:(t0[i]=!0,!1)}function iu(i,s,c){if(fk(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function su(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function oa(i,s,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+f)}}function an(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function n0(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mk(i,s,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,j=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){c=""+A,j.call(this,A)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function np(i){if(!i._valueTracker){var s=n0(i)?"checked":"value";i._valueTracker=mk(i,s,""+i[s])}}function a0(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return i&&(f=n0(i)?i.checked?"true":"false":i.value),i=f,i!==c?(s.setValue(i),!0):!1}function lu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var pk=/[\n"\\]/g;function sn(i){return i.replace(pk,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ap(i,s,c,f,g,j,A,D){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+an(s)):i.value!==""+an(s)&&(i.value=""+an(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?ip(i,A,an(s)):c!=null?ip(i,A,an(c)):f!=null&&i.removeAttribute("value"),g==null&&j!=null&&(i.defaultChecked=!!j),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+an(D):i.removeAttribute("name")}function i0(i,s,c,f,g,j,A,D){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(i.type=j),s!=null||c!=null){if(!(j!=="submit"&&j!=="reset"||s!=null)){np(i);return}c=c!=null?""+an(c):"",s=s!=null?""+an(s):c,D||s===i.value||(i.value=s),i.defaultValue=s}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=D?i.checked:!!f,i.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),np(i)}function ip(i,s,c){s==="number"&&lu(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Vs(i,s,c,f){if(i=i.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=s.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+an(c),s=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function s0(i,s,c){if(s!=null&&(s=""+an(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+an(c):""}function l0(i,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(a(92));if(T(f)){if(1<f.length)throw Error(a(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=an(s),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),np(i)}function Ys(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var hk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function o0(i,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":f?i.setProperty(s,c):typeof c!="number"||c===0||hk.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function c0(i,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in s)f=s[g],s.hasOwnProperty(g)&&c[g]!==f&&o0(i,g,f)}else for(var j in s)s.hasOwnProperty(j)&&o0(i,j,s[j])}function sp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gk=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ou(i){return gk.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ca(){}var lp=null;function op(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ks=null,Xs=null;function u0(i){var s=Gs(i);if(s&&(i=s.stateNode)){var c=i[Dr]||null;e:switch(i=s.stateNode,s.type){case"input":if(ap(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+sn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==i&&f.form===i.form){var g=f[Dr]||null;if(!g)throw Error(a(90));ap(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===i.form&&a0(f)}break e;case"textarea":s0(i,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Vs(i,!!c.multiple,s,!1)}}}var cp=!1;function d0(i,s,c){if(cp)return i(s,c);cp=!0;try{var f=i(s);return f}finally{if(cp=!1,(Ks!==null||Xs!==null)&&(Ku(),Ks&&(s=Ks,i=Xs,Xs=Ks=null,u0(s),i)))for(s=0;s<i.length;s++)u0(i[s])}}function oo(i,s){var c=i.stateNode;if(c===null)return null;var f=c[Dr]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),up=!1;if(ua)try{var co={};Object.defineProperty(co,"passive",{get:function(){up=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{up=!1}var ti=null,dp=null,cu=null;function f0(){if(cu)return cu;var i,s=dp,c=s.length,f,g="value"in ti?ti.value:ti.textContent,j=g.length;for(i=0;i<c&&s[i]===g[i];i++);var A=c-i;for(f=1;f<=A&&s[c-f]===g[j-f];f++);return cu=g.slice(i,1<f?1-f:void 0)}function uu(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function du(){return!0}function m0(){return!1}function Mr(i){function s(c,f,g,j,A){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=j,this.target=A,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(j):j[D]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?du:m0,this.isPropagationStopped=m0,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),s}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=Mr(Hi),uo=v({},Hi,{view:0,detail:0}),xk=Mr(uo),fp,mp,fo,mu=v({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hp,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==fo&&(fo&&i.type==="mousemove"?(fp=i.screenX-fo.screenX,mp=i.screenY-fo.screenY):mp=fp=0,fo=i),fp)},movementY:function(i){return"movementY"in i?i.movementY:mp}}),p0=Mr(mu),yk=v({},mu,{dataTransfer:0}),bk=Mr(yk),jk=v({},uo,{relatedTarget:0}),pp=Mr(jk),Nk=v({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),_k=Mr(Nk),Sk=v({},Hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),wk=Mr(Sk),Ck=v({},Hi,{data:0}),h0=Mr(Ck),Ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ok(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=zk[i])?!!s[i]:!1}function hp(){return Ok}var Dk=v({},uo,{key:function(i){if(i.key){var s=Ak[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=uu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ek[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hp,charCode:function(i){return i.type==="keypress"?uu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?uu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Mk=Mr(Dk),kk=v({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v0=Mr(kk),Pk=v({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hp}),Tk=Mr(Pk),qk=v({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rk=Mr(qk),Lk=v({},mu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ik=Mr(Lk),$k=v({},Hi,{newState:0,oldState:0}),Bk=Mr($k),Uk=[9,13,27,32],vp=ua&&"CompositionEvent"in window,mo=null;ua&&"documentMode"in document&&(mo=document.documentMode);var Fk=ua&&"TextEvent"in window&&!mo,g0=ua&&(!vp||mo&&8<mo&&11>=mo),x0=" ",y0=!1;function b0(i,s){switch(i){case"keyup":return Uk.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ws=!1;function Gk(i,s){switch(i){case"compositionend":return j0(s);case"keypress":return s.which!==32?null:(y0=!0,x0);case"textInput":return i=s.data,i===x0&&y0?null:i;default:return null}}function Hk(i,s){if(Ws)return i==="compositionend"||!vp&&b0(i,s)?(i=f0(),cu=dp=ti=null,Ws=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return g0&&s.locale!=="ko"?null:s.data;default:return null}}var Qk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Qk[i.type]:s==="textarea"}function _0(i,s,c,f){Ks?Xs?Xs.push(f):Xs=[f]:Ks=f,s=rd(s,"onChange"),0<s.length&&(c=new fu("onChange","change",null,c,f),i.push({event:c,listeners:s}))}var po=null,ho=null;function Vk(i){i1(i,0)}function pu(i){var s=lo(i);if(a0(s))return i}function S0(i,s){if(i==="change")return s}var w0=!1;if(ua){var gp;if(ua){var xp="oninput"in document;if(!xp){var C0=document.createElement("div");C0.setAttribute("oninput","return;"),xp=typeof C0.oninput=="function"}gp=xp}else gp=!1;w0=gp&&(!document.documentMode||9<document.documentMode)}function A0(){po&&(po.detachEvent("onpropertychange",E0),ho=po=null)}function E0(i){if(i.propertyName==="value"&&pu(ho)){var s=[];_0(s,ho,i,op(i)),d0(Vk,s)}}function Yk(i,s,c){i==="focusin"?(A0(),po=s,ho=c,po.attachEvent("onpropertychange",E0)):i==="focusout"&&A0()}function Kk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pu(ho)}function Xk(i,s){if(i==="click")return pu(s)}function Wk(i,s){if(i==="input"||i==="change")return pu(s)}function Zk(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Gr=typeof Object.is=="function"?Object.is:Zk;function vo(i,s){if(Gr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!An.call(s,g)||!Gr(i[g],s[g]))return!1}return!0}function z0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function O0(i,s){var c=z0(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=s&&f>=s)return{node:c,offset:s-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=z0(c)}}function D0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?D0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function M0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=lu(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=lu(i.document)}return s}function yp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var Jk=ua&&"documentMode"in document&&11>=document.documentMode,Zs=null,bp=null,go=null,jp=!1;function k0(i,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;jp||Zs==null||Zs!==lu(f)||(f=Zs,"selectionStart"in f&&yp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),go&&vo(go,f)||(go=f,f=rd(bp,"onSelect"),0<f.length&&(s=new fu("onSelect","select",null,s,c),i.push({event:s,listeners:f}),s.target=Zs)))}function Qi(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var Js={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},Np={},P0={};ua&&(P0=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Vi(i){if(Np[i])return Np[i];if(!Js[i])return i;var s=Js[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in P0)return Np[i]=s[c];return i}var T0=Vi("animationend"),q0=Vi("animationiteration"),R0=Vi("animationstart"),eP=Vi("transitionrun"),tP=Vi("transitionstart"),rP=Vi("transitioncancel"),L0=Vi("transitionend"),I0=new Map,_p="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_p.push("scrollEnd");function En(i,s){I0.set(i,s),Gi(s,[i])}var hu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ln=[],el=0,Sp=0;function vu(){for(var i=el,s=Sp=el=0;s<i;){var c=ln[s];ln[s++]=null;var f=ln[s];ln[s++]=null;var g=ln[s];ln[s++]=null;var j=ln[s];if(ln[s++]=null,f!==null&&g!==null){var A=f.pending;A===null?g.next=g:(g.next=A.next,A.next=g),f.pending=g}j!==0&&$0(c,g,j)}}function gu(i,s,c,f){ln[el++]=i,ln[el++]=s,ln[el++]=c,ln[el++]=f,Sp|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function wp(i,s,c,f){return gu(i,s,c,f),xu(i)}function Yi(i,s){return gu(i,null,null,s),xu(i)}function $0(i,s,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var g=!1,j=i.return;j!==null;)j.childLanes|=c,f=j.alternate,f!==null&&(f.childLanes|=c),j.tag===22&&(i=j.stateNode,i===null||i._visibility&1||(g=!0)),i=j,j=j.return;return i.tag===3?(j=i.stateNode,g&&s!==null&&(g=31-_r(c),i=j.hiddenUpdates,f=i[g],f===null?i[g]=[s]:f.push(s),s.lane=c|536870912),j):null}function xu(i){if(50<Io)throw Io=0,Ph=null,Error(a(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var tl={};function nP(i,s,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(i,s,c,f){return new nP(i,s,c,f)}function Cp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function da(i,s){var c=i.alternate;return c===null?(c=Hr(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function B0(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function yu(i,s,c,f,g,j){var A=0;if(f=i,typeof i=="function")Cp(i)&&(A=1);else if(typeof i=="string")A=oT(i,c,xe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case L:return i=Hr(31,c,s,g),i.elementType=L,i.lanes=j,i;case N:return Ki(c.children,g,j,s);case S:A=8,g|=24;break;case C:return i=Hr(12,c,s,g|2),i.elementType=C,i.lanes=j,i;case O:return i=Hr(13,c,s,g),i.elementType=O,i.lanes=j,i;case M:return i=Hr(19,c,s,g),i.elementType=M,i.lanes=j,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:A=10;break e;case z:A=9;break e;case E:A=11;break e;case P:A=14;break e;case q:A=16,f=null;break e}A=29,c=Error(a(130,i===null?"null":typeof i,"")),f=null}return s=Hr(A,c,s,g),s.elementType=i,s.type=f,s.lanes=j,s}function Ki(i,s,c,f){return i=Hr(7,i,f,s),i.lanes=c,i}function Ap(i,s,c){return i=Hr(6,i,null,s),i.lanes=c,i}function U0(i){var s=Hr(18,null,null,0);return s.stateNode=i,s}function Ep(i,s,c){return s=Hr(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var F0=new WeakMap;function on(i,s){if(typeof i=="object"&&i!==null){var c=F0.get(i);return c!==void 0?c:(s={value:i,source:s,stack:Qt(s)},F0.set(i,s),s)}return{value:i,source:s,stack:Qt(s)}}var rl=[],nl=0,bu=null,xo=0,cn=[],un=0,ri=null,Gn=1,Hn="";function fa(i,s){rl[nl++]=xo,rl[nl++]=bu,bu=i,xo=s}function G0(i,s,c){cn[un++]=Gn,cn[un++]=Hn,cn[un++]=ri,ri=i;var f=Gn;i=Hn;var g=32-_r(f)-1;f&=~(1<<g),c+=1;var j=32-_r(s)+g;if(30<j){var A=g-g%5;j=(f&(1<<A)-1).toString(32),f>>=A,g-=A,Gn=1<<32-_r(s)+g|c<<g|f,Hn=j+i}else Gn=1<<j|c<<g|f,Hn=i}function zp(i){i.return!==null&&(fa(i,1),G0(i,1,0))}function Op(i){for(;i===bu;)bu=rl[--nl],rl[nl]=null,xo=rl[--nl],rl[nl]=null;for(;i===ri;)ri=cn[--un],cn[un]=null,Hn=cn[--un],cn[un]=null,Gn=cn[--un],cn[un]=null}function H0(i,s){cn[un++]=Gn,cn[un++]=Hn,cn[un++]=ri,Gn=s.id,Hn=s.overflow,ri=i}var cr=null,yt=null,Ke=!1,ni=null,dn=!1,Dp=Error(a(519));function ai(i){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo(on(s,i)),Dp}function Q0(i){var s=i.stateNode,c=i.type,f=i.memoizedProps;switch(s[or]=i,s[Dr]=f,c){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(c=0;c<Bo.length;c++)He(Bo[c],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),i0(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),l0(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||c1(s.textContent,c)?(f.popover!=null&&(He("beforetoggle",s),He("toggle",s)),f.onScroll!=null&&He("scroll",s),f.onScrollEnd!=null&&He("scrollend",s),f.onClick!=null&&(s.onclick=ca),s=!0):s=!1,s||ai(i,!0)}function V0(i){for(cr=i.return;cr;)switch(cr.tag){case 5:case 31:case 13:dn=!1;return;case 27:case 3:dn=!0;return;default:cr=cr.return}}function al(i){if(i!==cr)return!1;if(!Ke)return V0(i),Ke=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Kh(i.type,i.memoizedProps)),c=!c),c&&yt&&ai(i),V0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));yt=x1(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));yt=x1(i)}else s===27?(s=yt,xi(i.type)?(i=ev,ev=null,yt=i):yt=s):yt=cr?mn(i.stateNode.nextSibling):null;return!0}function Xi(){yt=cr=null,Ke=!1}function Mp(){var i=ni;return i!==null&&(qr===null?qr=i:qr.push.apply(qr,i),ni=null),i}function yo(i){ni===null?ni=[i]:ni.push(i)}var kp=ge(null),Wi=null,ma=null;function ii(i,s,c){me(kp,s._currentValue),s._currentValue=c}function pa(i){i._currentValue=kp.current,re(kp)}function Pp(i,s,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===c)break;i=i.return}}function Tp(i,s,c,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var j=g.dependencies;if(j!==null){var A=g.child;j=j.firstContext;e:for(;j!==null;){var D=j;j=g;for(var I=0;I<s.length;I++)if(D.context===s[I]){j.lanes|=c,D=j.alternate,D!==null&&(D.lanes|=c),Pp(j.return,c,i),f||(A=null);break e}j=D.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(a(341));A.lanes|=c,j=A.alternate,j!==null&&(j.lanes|=c),Pp(A,c,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function il(i,s,c,f){i=null;for(var g=s,j=!1;g!==null;){if(!j){if((g.flags&524288)!==0)j=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(a(387));if(A=A.memoizedProps,A!==null){var D=g.type;Gr(g.pendingProps.value,A.value)||(i!==null?i.push(D):i=[D])}}else if(g===de.current){if(A=g.alternate,A===null)throw Error(a(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Qo):i=[Qo])}g=g.return}i!==null&&Tp(s,i,c,f),s.flags|=262144}function ju(i){for(i=i.firstContext;i!==null;){if(!Gr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Zi(i){Wi=i,ma=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ur(i){return Y0(Wi,i)}function Nu(i,s){return Wi===null&&Zi(i),Y0(i,s)}function Y0(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ma===null){if(i===null)throw Error(a(308));ma=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ma=ma.next=s;return c}var aP=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},iP=e.unstable_scheduleCallback,sP=e.unstable_NormalPriority,Rt={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qp(){return{controller:new aP,data:new Map,refCount:0}}function bo(i){i.refCount--,i.refCount===0&&iP(sP,function(){i.controller.abort()})}var jo=null,Rp=0,sl=0,ll=null;function lP(i,s){if(jo===null){var c=jo=[];Rp=0,sl=$h(),ll={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Rp++,s.then(K0,K0),s}function K0(){if(--Rp===0&&jo!==null){ll!==null&&(ll.status="fulfilled");var i=jo;jo=null,sl=0,ll=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function oP(i,s){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){f.status="fulfilled",f.value=s;for(var g=0;g<c.length;g++)(0,c[g])(s)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var X0=R.S;R.S=function(i,s){kN=ke(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&lP(i,s),X0!==null&&X0(i,s)};var Ji=ge(null);function Lp(){var i=Ji.current;return i!==null?i:ht.pooledCache}function _u(i,s){s===null?me(Ji,Ji.current):me(Ji,s.pool)}function W0(){var i=Lp();return i===null?null:{parent:Rt._currentValue,pool:i}}var ol=Error(a(460)),Ip=Error(a(474)),Su=Error(a(542)),wu={then:function(){}};function Z0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function J0(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(ca,ca),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,tj(i),i;default:if(typeof s.status=="string")s.then(ca,ca);else{if(i=ht,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=s,i.status="pending",i.then(function(f){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=f}},function(f){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,tj(i),i}throw ts=s,ol}}function es(i){try{var s=i._init;return s(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ts=c,ol):c}}var ts=null;function ej(){if(ts===null)throw Error(a(459));var i=ts;return ts=null,i}function tj(i){if(i===ol||i===Su)throw Error(a(483))}var cl=null,No=0;function Cu(i){var s=No;return No+=1,cl===null&&(cl=[]),J0(cl,i,s)}function _o(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Au(i,s){throw s.$$typeof===y?Error(a(525)):(i=Object.prototype.toString.call(s),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function rj(i){function s(X,G){if(i){var ee=X.deletions;ee===null?(X.deletions=[G],X.flags|=16):ee.push(G)}}function c(X,G){if(!i)return null;for(;G!==null;)s(X,G),G=G.sibling;return null}function f(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function g(X,G){return X=da(X,G),X.index=0,X.sibling=null,X}function j(X,G,ee){return X.index=ee,i?(ee=X.alternate,ee!==null?(ee=ee.index,ee<G?(X.flags|=67108866,G):ee):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function A(X){return i&&X.alternate===null&&(X.flags|=67108866),X}function D(X,G,ee,fe){return G===null||G.tag!==6?(G=Ap(ee,X.mode,fe),G.return=X,G):(G=g(G,ee),G.return=X,G)}function I(X,G,ee,fe){var Oe=ee.type;return Oe===N?ue(X,G,ee.props.children,fe,ee.key):G!==null&&(G.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===q&&es(Oe)===G.type)?(G=g(G,ee.props),_o(G,ee),G.return=X,G):(G=yu(ee.type,ee.key,ee.props,null,X.mode,fe),_o(G,ee),G.return=X,G)}function te(X,G,ee,fe){return G===null||G.tag!==4||G.stateNode.containerInfo!==ee.containerInfo||G.stateNode.implementation!==ee.implementation?(G=Ep(ee,X.mode,fe),G.return=X,G):(G=g(G,ee.children||[]),G.return=X,G)}function ue(X,G,ee,fe,Oe){return G===null||G.tag!==7?(G=Ki(ee,X.mode,fe,Oe),G.return=X,G):(G=g(G,ee),G.return=X,G)}function pe(X,G,ee){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ap(""+G,X.mode,ee),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return ee=yu(G.type,G.key,G.props,null,X.mode,ee),_o(ee,G),ee.return=X,ee;case _:return G=Ep(G,X.mode,ee),G.return=X,G;case q:return G=es(G),pe(X,G,ee)}if(T(G)||B(G))return G=Ki(G,X.mode,ee,null),G.return=X,G;if(typeof G.then=="function")return pe(X,Cu(G),ee);if(G.$$typeof===w)return pe(X,Nu(X,G),ee);Au(X,G)}return null}function ne(X,G,ee,fe){var Oe=G!==null?G.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Oe!==null?null:D(X,G,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:return ee.key===Oe?I(X,G,ee,fe):null;case _:return ee.key===Oe?te(X,G,ee,fe):null;case q:return ee=es(ee),ne(X,G,ee,fe)}if(T(ee)||B(ee))return Oe!==null?null:ue(X,G,ee,fe,null);if(typeof ee.then=="function")return ne(X,G,Cu(ee),fe);if(ee.$$typeof===w)return ne(X,G,Nu(X,ee),fe);Au(X,ee)}return null}function le(X,G,ee,fe,Oe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return X=X.get(ee)||null,D(G,X,""+fe,Oe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case x:return X=X.get(fe.key===null?ee:fe.key)||null,I(G,X,fe,Oe);case _:return X=X.get(fe.key===null?ee:fe.key)||null,te(G,X,fe,Oe);case q:return fe=es(fe),le(X,G,ee,fe,Oe)}if(T(fe)||B(fe))return X=X.get(ee)||null,ue(G,X,fe,Oe,null);if(typeof fe.then=="function")return le(X,G,ee,Cu(fe),Oe);if(fe.$$typeof===w)return le(X,G,ee,Nu(G,fe),Oe);Au(G,fe)}return null}function Ne(X,G,ee,fe){for(var Oe=null,Ze=null,we=G,Ue=G=0,Ye=null;we!==null&&Ue<ee.length;Ue++){we.index>Ue?(Ye=we,we=null):Ye=we.sibling;var Je=ne(X,we,ee[Ue],fe);if(Je===null){we===null&&(we=Ye);break}i&&we&&Je.alternate===null&&s(X,we),G=j(Je,G,Ue),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je,we=Ye}if(Ue===ee.length)return c(X,we),Ke&&fa(X,Ue),Oe;if(we===null){for(;Ue<ee.length;Ue++)we=pe(X,ee[Ue],fe),we!==null&&(G=j(we,G,Ue),Ze===null?Oe=we:Ze.sibling=we,Ze=we);return Ke&&fa(X,Ue),Oe}for(we=f(we);Ue<ee.length;Ue++)Ye=le(we,X,Ue,ee[Ue],fe),Ye!==null&&(i&&Ye.alternate!==null&&we.delete(Ye.key===null?Ue:Ye.key),G=j(Ye,G,Ue),Ze===null?Oe=Ye:Ze.sibling=Ye,Ze=Ye);return i&&we.forEach(function(_i){return s(X,_i)}),Ke&&fa(X,Ue),Oe}function Pe(X,G,ee,fe){if(ee==null)throw Error(a(151));for(var Oe=null,Ze=null,we=G,Ue=G=0,Ye=null,Je=ee.next();we!==null&&!Je.done;Ue++,Je=ee.next()){we.index>Ue?(Ye=we,we=null):Ye=we.sibling;var _i=ne(X,we,Je.value,fe);if(_i===null){we===null&&(we=Ye);break}i&&we&&_i.alternate===null&&s(X,we),G=j(_i,G,Ue),Ze===null?Oe=_i:Ze.sibling=_i,Ze=_i,we=Ye}if(Je.done)return c(X,we),Ke&&fa(X,Ue),Oe;if(we===null){for(;!Je.done;Ue++,Je=ee.next())Je=pe(X,Je.value,fe),Je!==null&&(G=j(Je,G,Ue),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je);return Ke&&fa(X,Ue),Oe}for(we=f(we);!Je.done;Ue++,Je=ee.next())Je=le(we,X,Ue,Je.value,fe),Je!==null&&(i&&Je.alternate!==null&&we.delete(Je.key===null?Ue:Je.key),G=j(Je,G,Ue),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je);return i&&we.forEach(function(yT){return s(X,yT)}),Ke&&fa(X,Ue),Oe}function ut(X,G,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===N&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:e:{for(var Oe=ee.key;G!==null;){if(G.key===Oe){if(Oe=ee.type,Oe===N){if(G.tag===7){c(X,G.sibling),fe=g(G,ee.props.children),fe.return=X,X=fe;break e}}else if(G.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===q&&es(Oe)===G.type){c(X,G.sibling),fe=g(G,ee.props),_o(fe,ee),fe.return=X,X=fe;break e}c(X,G);break}else s(X,G);G=G.sibling}ee.type===N?(fe=Ki(ee.props.children,X.mode,fe,ee.key),fe.return=X,X=fe):(fe=yu(ee.type,ee.key,ee.props,null,X.mode,fe),_o(fe,ee),fe.return=X,X=fe)}return A(X);case _:e:{for(Oe=ee.key;G!==null;){if(G.key===Oe)if(G.tag===4&&G.stateNode.containerInfo===ee.containerInfo&&G.stateNode.implementation===ee.implementation){c(X,G.sibling),fe=g(G,ee.children||[]),fe.return=X,X=fe;break e}else{c(X,G);break}else s(X,G);G=G.sibling}fe=Ep(ee,X.mode,fe),fe.return=X,X=fe}return A(X);case q:return ee=es(ee),ut(X,G,ee,fe)}if(T(ee))return Ne(X,G,ee,fe);if(B(ee)){if(Oe=B(ee),typeof Oe!="function")throw Error(a(150));return ee=Oe.call(ee),Pe(X,G,ee,fe)}if(typeof ee.then=="function")return ut(X,G,Cu(ee),fe);if(ee.$$typeof===w)return ut(X,G,Nu(X,ee),fe);Au(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,G!==null&&G.tag===6?(c(X,G.sibling),fe=g(G,ee),fe.return=X,X=fe):(c(X,G),fe=Ap(ee,X.mode,fe),fe.return=X,X=fe),A(X)):c(X,G)}return function(X,G,ee,fe){try{No=0;var Oe=ut(X,G,ee,fe);return cl=null,Oe}catch(we){if(we===ol||we===Su)throw we;var Ze=Hr(29,we,null,X.mode);return Ze.lanes=fe,Ze.return=X,Ze}}}var rs=rj(!0),nj=rj(!1),si=!1;function $p(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bp(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function li(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function oi(i,s,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(rt&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,s=xu(i),$0(i,null,c),s}return gu(i,f,s,c),xu(i)}function So(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,Yb(i,c)}}function Up(i,s){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,j=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};j===null?g=j=A:j=j.next=A,c=c.next}while(c!==null);j===null?g=j=s:j=j.next=s}else g=j=s;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:j,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var Fp=!1;function wo(){if(Fp){var i=ll;if(i!==null)throw i}}function Co(i,s,c,f){Fp=!1;var g=i.updateQueue;si=!1;var j=g.firstBaseUpdate,A=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var I=D,te=I.next;I.next=null,A===null?j=te:A.next=te,A=I;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,D=ue.lastBaseUpdate,D!==A&&(D===null?ue.firstBaseUpdate=te:D.next=te,ue.lastBaseUpdate=I))}if(j!==null){var pe=g.baseState;A=0,ue=te=I=null,D=j;do{var ne=D.lane&-536870913,le=ne!==D.lane;if(le?(Ve&ne)===ne:(f&ne)===ne){ne!==0&&ne===sl&&(Fp=!0),ue!==null&&(ue=ue.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ne=i,Pe=D;ne=s;var ut=c;switch(Pe.tag){case 1:if(Ne=Pe.payload,typeof Ne=="function"){pe=Ne.call(ut,pe,ne);break e}pe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Pe.payload,ne=typeof Ne=="function"?Ne.call(ut,pe,ne):Ne,ne==null)break e;pe=v({},pe,ne);break e;case 2:si=!0}}ne=D.callback,ne!==null&&(i.flags|=64,le&&(i.flags|=8192),le=g.callbacks,le===null?g.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ue===null?(te=ue=le,I=pe):ue=ue.next=le,A|=ne;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;le=D,D=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);ue===null&&(I=pe),g.baseState=I,g.firstBaseUpdate=te,g.lastBaseUpdate=ue,j===null&&(g.shared.lanes=0),mi|=A,i.lanes=A,i.memoizedState=pe}}function aj(i,s){if(typeof i!="function")throw Error(a(191,i));i.call(s)}function ij(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)aj(c[i],s)}var ul=ge(null),Eu=ge(0);function sj(i,s){i=_a,me(Eu,i),me(ul,s),_a=i|s.baseLanes}function Gp(){me(Eu,_a),me(ul,ul.current)}function Hp(){_a=Eu.current,re(ul),re(Eu)}var Qr=ge(null),fn=null;function ci(i){var s=i.alternate;me(Pt,Pt.current&1),me(Qr,i),fn===null&&(s===null||ul.current!==null||s.memoizedState!==null)&&(fn=i)}function Qp(i){me(Pt,Pt.current),me(Qr,i),fn===null&&(fn=i)}function lj(i){i.tag===22?(me(Pt,Pt.current),me(Qr,i),fn===null&&(fn=i)):ui()}function ui(){me(Pt,Pt.current),me(Qr,Qr.current)}function Vr(i){re(Qr),fn===i&&(fn=null),re(Pt)}var Pt=ge(0);function zu(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Zh(c)||Jh(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ha=0,Be=null,ot=null,Lt=null,Ou=!1,dl=!1,ns=!1,Du=0,Ao=0,fl=null,cP=0;function Et(){throw Error(a(321))}function Vp(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!Gr(i[c],s[c]))return!1;return!0}function Yp(i,s,c,f,g,j){return ha=j,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,R.H=i===null||i.memoizedState===null?Gj:ch,ns=!1,j=c(f,g),ns=!1,dl&&(j=cj(s,c,f,g)),oj(i),j}function oj(i){R.H=Oo;var s=ot!==null&&ot.next!==null;if(ha=0,Lt=ot=Be=null,Ou=!1,Ao=0,fl=null,s)throw Error(a(300));i===null||It||(i=i.dependencies,i!==null&&ju(i)&&(It=!0))}function cj(i,s,c,f){Be=i;var g=0;do{if(dl&&(fl=null),Ao=0,dl=!1,25<=g)throw Error(a(301));if(g+=1,Lt=ot=null,i.updateQueue!=null){var j=i.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}R.H=Hj,j=s(c,f)}while(dl);return j}function uP(){var i=R.H,s=i.useState()[0];return s=typeof s.then=="function"?Eo(s):s,i=i.useState()[0],(ot!==null?ot.memoizedState:null)!==i&&(Be.flags|=1024),s}function Kp(){var i=Du!==0;return Du=0,i}function Xp(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function Wp(i){if(Ou){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ou=!1}ha=0,Lt=ot=Be=null,dl=!1,Ao=Du=0,fl=null}function Sr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Be.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function Tt(){if(ot===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=ot.next;var s=Lt===null?Be.memoizedState:Lt.next;if(s!==null)Lt=s,ot=i;else{if(i===null)throw Be.alternate===null?Error(a(467)):Error(a(310));ot=i,i={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Lt===null?Be.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function Mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(i){var s=Ao;return Ao+=1,fl===null&&(fl=[]),i=J0(fl,i,s),s=Be,(Lt===null?s.memoizedState:Lt.next)===null&&(s=s.alternate,R.H=s===null||s.memoizedState===null?Gj:ch),i}function ku(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Eo(i);if(i.$$typeof===w)return ur(i)}throw Error(a(438,String(i)))}function Zp(i){var s=null,c=Be.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=Be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Mu(),Be.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),f=0;f<i;f++)c[f]=Y;return s.index++,c}function va(i,s){return typeof s=="function"?s(i):s}function Pu(i){var s=Tt();return Jp(s,ot,i)}function Jp(i,s,c){var f=i.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=c;var g=i.baseQueue,j=f.pending;if(j!==null){if(g!==null){var A=g.next;g.next=j.next,j.next=A}s.baseQueue=g=j,f.pending=null}if(j=i.baseState,g===null)i.memoizedState=j;else{s=g.next;var D=A=null,I=null,te=s,ue=!1;do{var pe=te.lane&-536870913;if(pe!==te.lane?(Ve&pe)===pe:(ha&pe)===pe){var ne=te.revertLane;if(ne===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),pe===sl&&(ue=!0);else if((ha&ne)===ne){te=te.next,ne===sl&&(ue=!0);continue}else pe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},I===null?(D=I=pe,A=j):I=I.next=pe,Be.lanes|=ne,mi|=ne;pe=te.action,ns&&c(j,pe),j=te.hasEagerState?te.eagerState:c(j,pe)}else ne={lane:pe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},I===null?(D=I=ne,A=j):I=I.next=ne,Be.lanes|=pe,mi|=pe;te=te.next}while(te!==null&&te!==s);if(I===null?A=j:I.next=D,!Gr(j,i.memoizedState)&&(It=!0,ue&&(c=ll,c!==null)))throw c;i.memoizedState=j,i.baseState=A,i.baseQueue=I,f.lastRenderedState=j}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function eh(i){var s=Tt(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,j=s.memoizedState;if(g!==null){c.pending=null;var A=g=g.next;do j=i(j,A.action),A=A.next;while(A!==g);Gr(j,s.memoizedState)||(It=!0),s.memoizedState=j,s.baseQueue===null&&(s.baseState=j),c.lastRenderedState=j}return[j,f]}function uj(i,s,c){var f=Be,g=Tt(),j=Ke;if(j){if(c===void 0)throw Error(a(407));c=c()}else c=s();var A=!Gr((ot||g).memoizedState,c);if(A&&(g.memoizedState=c,It=!0),g=g.queue,nh(mj.bind(null,f,g,i),[i]),g.getSnapshot!==s||A||Lt!==null&&Lt.memoizedState.tag&1){if(f.flags|=2048,ml(9,{destroy:void 0},fj.bind(null,f,g,c,s),null),ht===null)throw Error(a(349));j||(ha&127)!==0||dj(f,s,c)}return c}function dj(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Be.updateQueue,s===null?(s=Mu(),Be.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function fj(i,s,c,f){s.value=c,s.getSnapshot=f,pj(s)&&hj(i)}function mj(i,s,c){return c(function(){pj(s)&&hj(i)})}function pj(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!Gr(i,c)}catch{return!0}}function hj(i){var s=Yi(i,2);s!==null&&Rr(s,i,2)}function th(i){var s=Sr();if(typeof i=="function"){var c=i;if(i=c(),ns){Un(!0);try{c()}finally{Un(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:i},s}function vj(i,s,c,f){return i.baseState=c,Jp(i,ot,typeof f=="function"?f:va)}function dP(i,s,c,f,g){if(Ru(i))throw Error(a(485));if(i=s.action,i!==null){var j={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){j.listeners.push(A)}};R.T!==null?c(!0):j.isTransition=!1,f(j),c=s.pending,c===null?(j.next=s.pending=j,gj(s,j)):(j.next=c.next,s.pending=c.next=j)}}function gj(i,s){var c=s.action,f=s.payload,g=i.state;if(s.isTransition){var j=R.T,A={};R.T=A;try{var D=c(g,f),I=R.S;I!==null&&I(A,D),xj(i,s,D)}catch(te){rh(i,s,te)}finally{j!==null&&A.types!==null&&(j.types=A.types),R.T=j}}else try{j=c(g,f),xj(i,s,j)}catch(te){rh(i,s,te)}}function xj(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){yj(i,s,f)},function(f){return rh(i,s,f)}):yj(i,s,c)}function yj(i,s,c){s.status="fulfilled",s.value=c,bj(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,gj(i,c)))}function rh(i,s,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,bj(s),s=s.next;while(s!==f)}i.action=null}function bj(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function jj(i,s){return s}function Nj(i,s){if(Ke){var c=ht.formState;if(c!==null){e:{var f=Be;if(Ke){if(yt){t:{for(var g=yt,j=dn;g.nodeType!==8;){if(!j){g=null;break t}if(g=mn(g.nextSibling),g===null){g=null;break t}}j=g.data,g=j==="F!"||j==="F"?g:null}if(g){yt=mn(g.nextSibling),f=g.data==="F!";break e}}ai(f)}f=!1}f&&(s=c[0])}}return c=Sr(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jj,lastRenderedState:s},c.queue=f,c=Bj.bind(null,Be,f),f.dispatch=c,f=th(!1),j=oh.bind(null,Be,!1,f.queue),f=Sr(),g={state:s,dispatch:null,action:i,pending:null},f.queue=g,c=dP.bind(null,Be,g,j,c),g.dispatch=c,f.memoizedState=i,[s,c,!1]}function _j(i){var s=Tt();return Sj(s,ot,i)}function Sj(i,s,c){if(s=Jp(i,s,jj)[0],i=Pu(va)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Eo(s)}catch(A){throw A===ol?Su:A}else f=s;s=Tt();var g=s.queue,j=g.dispatch;return c!==s.memoizedState&&(Be.flags|=2048,ml(9,{destroy:void 0},fP.bind(null,g,c),null)),[f,j,i]}function fP(i,s){i.action=s}function wj(i){var s=Tt(),c=ot;if(c!==null)return Sj(s,c,i);Tt(),s=s.memoizedState,c=Tt();var f=c.queue.dispatch;return c.memoizedState=i,[s,f,!1]}function ml(i,s,c,f){return i={tag:i,create:c,deps:f,inst:s,next:null},s=Be.updateQueue,s===null&&(s=Mu(),Be.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,s.lastEffect=i),i}function Cj(){return Tt().memoizedState}function Tu(i,s,c,f){var g=Sr();Be.flags|=i,g.memoizedState=ml(1|s,{destroy:void 0},c,f===void 0?null:f)}function qu(i,s,c,f){var g=Tt();f=f===void 0?null:f;var j=g.memoizedState.inst;ot!==null&&f!==null&&Vp(f,ot.memoizedState.deps)?g.memoizedState=ml(s,j,c,f):(Be.flags|=i,g.memoizedState=ml(1|s,j,c,f))}function Aj(i,s){Tu(8390656,8,i,s)}function nh(i,s){qu(2048,8,i,s)}function mP(i){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=Mu(),Be.updateQueue=s,s.events=[i];else{var c=s.events;c===null?s.events=[i]:c.push(i)}}function Ej(i){var s=Tt().memoizedState;return mP({ref:s,nextImpl:i}),function(){if((rt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function zj(i,s){return qu(4,2,i,s)}function Oj(i,s){return qu(4,4,i,s)}function Dj(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Mj(i,s,c){c=c!=null?c.concat([i]):null,qu(4,4,Dj.bind(null,s,i),c)}function ah(){}function kj(i,s){var c=Tt();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&Vp(s,f[1])?f[0]:(c.memoizedState=[i,s],i)}function Pj(i,s){var c=Tt();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&Vp(s,f[1]))return f[0];if(f=i(),ns){Un(!0);try{i()}finally{Un(!1)}}return c.memoizedState=[f,s],f}function ih(i,s,c){return c===void 0||(ha&1073741824)!==0&&(Ve&261930)===0?i.memoizedState=s:(i.memoizedState=c,i=TN(),Be.lanes|=i,mi|=i,c)}function Tj(i,s,c,f){return Gr(c,s)?c:ul.current!==null?(i=ih(i,c,f),Gr(i,s)||(It=!0),i):(ha&42)===0||(ha&1073741824)!==0&&(Ve&261930)===0?(It=!0,i.memoizedState=c):(i=TN(),Be.lanes|=i,mi|=i,s)}function qj(i,s,c,f,g){var j=J.p;J.p=j!==0&&8>j?j:8;var A=R.T,D={};R.T=D,oh(i,!1,s,c);try{var I=g(),te=R.S;if(te!==null&&te(D,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ue=oP(I,f);zo(i,s,ue,Xr(i))}else zo(i,s,f,Xr(i))}catch(pe){zo(i,s,{then:function(){},status:"rejected",reason:pe},Xr())}finally{J.p=j,A!==null&&D.types!==null&&(A.types=D.types),R.T=A}}function pP(){}function sh(i,s,c,f){if(i.tag!==5)throw Error(a(476));var g=Rj(i).queue;qj(i,g,s,H,c===null?pP:function(){return Lj(i),c(f)})}function Rj(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:H},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Lj(i){var s=Rj(i);s.next===null&&(s=i.alternate.memoizedState),zo(i,s.next.queue,{},Xr())}function lh(){return ur(Qo)}function Ij(){return Tt().memoizedState}function $j(){return Tt().memoizedState}function hP(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=Xr();i=li(c);var f=oi(s,i,c);f!==null&&(Rr(f,s,c),So(f,s,c)),s={cache:qp()},i.payload=s;return}s=s.return}}function vP(i,s,c){var f=Xr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ru(i)?Uj(s,c):(c=wp(i,s,c,f),c!==null&&(Rr(c,i,f),Fj(c,s,f)))}function Bj(i,s,c){var f=Xr();zo(i,s,c,f)}function zo(i,s,c,f){var g={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ru(i))Uj(s,g);else{var j=i.alternate;if(i.lanes===0&&(j===null||j.lanes===0)&&(j=s.lastRenderedReducer,j!==null))try{var A=s.lastRenderedState,D=j(A,c);if(g.hasEagerState=!0,g.eagerState=D,Gr(D,A))return gu(i,s,g,0),ht===null&&vu(),!1}catch{}if(c=wp(i,s,g,f),c!==null)return Rr(c,i,f),Fj(c,s,f),!0}return!1}function oh(i,s,c,f){if(f={lane:2,revertLane:$h(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ru(i)){if(s)throw Error(a(479))}else s=wp(i,c,f,2),s!==null&&Rr(s,i,2)}function Ru(i){var s=i.alternate;return i===Be||s!==null&&s===Be}function Uj(i,s){dl=Ou=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function Fj(i,s,c){if((c&4194048)!==0){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,Yb(i,c)}}var Oo={readContext:ur,use:ku,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Oo.useEffectEvent=Et;var Gj={readContext:ur,use:ku,useCallback:function(i,s){return Sr().memoizedState=[i,s===void 0?null:s],i},useContext:ur,useEffect:Aj,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,Tu(4194308,4,Dj.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Tu(4194308,4,i,s)},useInsertionEffect:function(i,s){Tu(4,2,i,s)},useMemo:function(i,s){var c=Sr();s=s===void 0?null:s;var f=i();if(ns){Un(!0);try{i()}finally{Un(!1)}}return c.memoizedState=[f,s],f},useReducer:function(i,s,c){var f=Sr();if(c!==void 0){var g=c(s);if(ns){Un(!0);try{c(s)}finally{Un(!1)}}}else g=s;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=vP.bind(null,Be,i),[f.memoizedState,i]},useRef:function(i){var s=Sr();return i={current:i},s.memoizedState=i},useState:function(i){i=th(i);var s=i.queue,c=Bj.bind(null,Be,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:ah,useDeferredValue:function(i,s){var c=Sr();return ih(c,i,s)},useTransition:function(){var i=th(!1);return i=qj.bind(null,Be,i.queue,!0,!1),Sr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var f=Be,g=Sr();if(Ke){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),ht===null)throw Error(a(349));(Ve&127)!==0||dj(f,s,c)}g.memoizedState=c;var j={value:c,getSnapshot:s};return g.queue=j,Aj(mj.bind(null,f,j,i),[i]),f.flags|=2048,ml(9,{destroy:void 0},fj.bind(null,f,j,c,s),null),c},useId:function(){var i=Sr(),s=ht.identifierPrefix;if(Ke){var c=Hn,f=Gn;c=(f&~(1<<32-_r(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Du++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=cP++,s="_"+s+"r_"+c.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:lh,useFormState:Nj,useActionState:Nj,useOptimistic:function(i){var s=Sr();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=oh.bind(null,Be,!0,c),c.dispatch=s,[i,s]},useMemoCache:Zp,useCacheRefresh:function(){return Sr().memoizedState=hP.bind(null,Be)},useEffectEvent:function(i){var s=Sr(),c={impl:i};return s.memoizedState=c,function(){if((rt&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},ch={readContext:ur,use:ku,useCallback:kj,useContext:ur,useEffect:nh,useImperativeHandle:Mj,useInsertionEffect:zj,useLayoutEffect:Oj,useMemo:Pj,useReducer:Pu,useRef:Cj,useState:function(){return Pu(va)},useDebugValue:ah,useDeferredValue:function(i,s){var c=Tt();return Tj(c,ot.memoizedState,i,s)},useTransition:function(){var i=Pu(va)[0],s=Tt().memoizedState;return[typeof i=="boolean"?i:Eo(i),s]},useSyncExternalStore:uj,useId:Ij,useHostTransitionStatus:lh,useFormState:_j,useActionState:_j,useOptimistic:function(i,s){var c=Tt();return vj(c,ot,i,s)},useMemoCache:Zp,useCacheRefresh:$j};ch.useEffectEvent=Ej;var Hj={readContext:ur,use:ku,useCallback:kj,useContext:ur,useEffect:nh,useImperativeHandle:Mj,useInsertionEffect:zj,useLayoutEffect:Oj,useMemo:Pj,useReducer:eh,useRef:Cj,useState:function(){return eh(va)},useDebugValue:ah,useDeferredValue:function(i,s){var c=Tt();return ot===null?ih(c,i,s):Tj(c,ot.memoizedState,i,s)},useTransition:function(){var i=eh(va)[0],s=Tt().memoizedState;return[typeof i=="boolean"?i:Eo(i),s]},useSyncExternalStore:uj,useId:Ij,useHostTransitionStatus:lh,useFormState:wj,useActionState:wj,useOptimistic:function(i,s){var c=Tt();return ot!==null?vj(c,ot,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Zp,useCacheRefresh:$j};Hj.useEffectEvent=Ej;function uh(i,s,c,f){s=i.memoizedState,c=c(f,s),c=c==null?s:v({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var dh={enqueueSetState:function(i,s,c){i=i._reactInternals;var f=Xr(),g=li(f);g.payload=s,c!=null&&(g.callback=c),s=oi(i,g,f),s!==null&&(Rr(s,i,f),So(s,i,f))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var f=Xr(),g=li(f);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=oi(i,g,f),s!==null&&(Rr(s,i,f),So(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=Xr(),f=li(c);f.tag=2,s!=null&&(f.callback=s),s=oi(i,f,c),s!==null&&(Rr(s,i,c),So(s,i,c))}};function Qj(i,s,c,f,g,j,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,j,A):s.prototype&&s.prototype.isPureReactComponent?!vo(c,f)||!vo(g,j):!0}function Vj(i,s,c,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==i&&dh.enqueueReplaceState(s,s.state,null)}function as(i,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(i=i.defaultProps){c===s&&(c=v({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Yj(i){hu(i)}function Kj(i){console.error(i)}function Xj(i){hu(i)}function Lu(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function Wj(i,s,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function fh(i,s,c){return c=li(c),c.tag=3,c.payload={element:null},c.callback=function(){Lu(i,s)},c}function Zj(i){return i=li(i),i.tag=3,i}function Jj(i,s,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var j=f.value;i.payload=function(){return g(j)},i.callback=function(){Wj(s,c,f)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Wj(s,c,f),typeof g!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function gP(i,s,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&il(s,c,g,!0),c=Qr.current,c!==null){switch(c.tag){case 31:case 13:return fn===null?Xu():c.alternate===null&&zt===0&&(zt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===wu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),Rh(i,f,g)),!1;case 22:return c.flags|=65536,f===wu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),Rh(i,f,g)),!1}throw Error(a(435,c.tag))}return Rh(i,f,g),Xu(),!1}if(Ke)return s=Qr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,f!==Dp&&(i=Error(a(422),{cause:f}),yo(on(i,c)))):(f!==Dp&&(s=Error(a(423),{cause:f}),yo(on(s,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=on(f,c),g=fh(i.stateNode,f,g),Up(i,g),zt!==4&&(zt=2)),!1;var j=Error(a(520),{cause:f});if(j=on(j,c),Lo===null?Lo=[j]:Lo.push(j),zt!==4&&(zt=2),s===null)return!0;f=on(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=fh(c.stateNode,f,i),Up(c,i),!1;case 1:if(s=c.type,j=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(pi===null||!pi.has(j))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Zj(g),Jj(g,i,c,f),Up(c,g),!1}c=c.return}while(c!==null);return!1}var mh=Error(a(461)),It=!1;function dr(i,s,c,f){s.child=i===null?nj(s,null,c,f):rs(s,i.child,c,f)}function eN(i,s,c,f,g){c=c.render;var j=s.ref;if("ref"in f){var A={};for(var D in f)D!=="ref"&&(A[D]=f[D])}else A=f;return Zi(s),f=Yp(i,s,c,A,j,g),D=Kp(),i!==null&&!It?(Xp(i,s,g),ga(i,s,g)):(Ke&&D&&zp(s),s.flags|=1,dr(i,s,f,g),s.child)}function tN(i,s,c,f,g){if(i===null){var j=c.type;return typeof j=="function"&&!Cp(j)&&j.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=j,rN(i,s,j,f,g)):(i=yu(c.type,null,f,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(j=i.child,!jh(i,g)){var A=j.memoizedProps;if(c=c.compare,c=c!==null?c:vo,c(A,f)&&i.ref===s.ref)return ga(i,s,g)}return s.flags|=1,i=da(j,f),i.ref=s.ref,i.return=s,s.child=i}function rN(i,s,c,f,g){if(i!==null){var j=i.memoizedProps;if(vo(j,f)&&i.ref===s.ref)if(It=!1,s.pendingProps=f=j,jh(i,g))(i.flags&131072)!==0&&(It=!0);else return s.lanes=i.lanes,ga(i,s,g)}return ph(i,s,c,f,g)}function nN(i,s,c,f){var g=f.children,j=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(j=j!==null?j.baseLanes|c:c,i!==null){for(f=s.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~j}else f=0,s.child=null;return aN(i,s,j,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&_u(s,j!==null?j.cachePool:null),j!==null?sj(s,j):Gp(),lj(s);else return f=s.lanes=536870912,aN(i,s,j!==null?j.baseLanes|c:c,c,f)}else j!==null?(_u(s,j.cachePool),sj(s,j),ui(),s.memoizedState=null):(i!==null&&_u(s,null),Gp(),ui());return dr(i,s,g,c),s.child}function Do(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function aN(i,s,c,f,g){var j=Lp();return j=j===null?null:{parent:Rt._currentValue,pool:j},s.memoizedState={baseLanes:c,cachePool:j},i!==null&&_u(s,null),Gp(),lj(s),i!==null&&il(i,s,f,!0),s.childLanes=g,null}function Iu(i,s){return s=Bu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function iN(i,s,c){return rs(s,i.child,null,c),i=Iu(s,s.pendingProps),i.flags|=2,Vr(s),s.memoizedState=null,i}function xP(i,s,c){var f=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ke){if(f.mode==="hidden")return i=Iu(s,f),s.lanes=536870912,Do(null,i);if(Qp(s),(i=yt)?(i=g1(i,dn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ri!==null?{id:Gn,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},c=U0(i),c.return=s,s.child=c,cr=s,yt=null)):i=null,i===null)throw ai(s);return s.lanes=536870912,null}return Iu(s,f)}var j=i.memoizedState;if(j!==null){var A=j.dehydrated;if(Qp(s),g)if(s.flags&256)s.flags&=-257,s=iN(i,s,c);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(a(558));else if(It||il(i,s,c,!1),g=(c&i.childLanes)!==0,It||g){if(f=ht,f!==null&&(A=Kb(f,c),A!==0&&A!==j.retryLane))throw j.retryLane=A,Yi(i,A),Rr(f,i,A),mh;Xu(),s=iN(i,s,c)}else i=j.treeContext,yt=mn(A.nextSibling),cr=s,Ke=!0,ni=null,dn=!1,i!==null&&H0(s,i),s=Iu(s,f),s.flags|=4096;return s}return i=da(i.child,{mode:f.mode,children:f.children}),i.ref=s.ref,s.child=i,i.return=s,i}function $u(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function ph(i,s,c,f,g){return Zi(s),c=Yp(i,s,c,f,void 0,g),f=Kp(),i!==null&&!It?(Xp(i,s,g),ga(i,s,g)):(Ke&&f&&zp(s),s.flags|=1,dr(i,s,c,g),s.child)}function sN(i,s,c,f,g,j){return Zi(s),s.updateQueue=null,c=cj(s,f,c,g),oj(i),f=Kp(),i!==null&&!It?(Xp(i,s,j),ga(i,s,j)):(Ke&&f&&zp(s),s.flags|=1,dr(i,s,c,j),s.child)}function lN(i,s,c,f,g){if(Zi(s),s.stateNode===null){var j=tl,A=c.contextType;typeof A=="object"&&A!==null&&(j=ur(A)),j=new c(f,j),s.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=dh,s.stateNode=j,j._reactInternals=s,j=s.stateNode,j.props=f,j.state=s.memoizedState,j.refs={},$p(s),A=c.contextType,j.context=typeof A=="object"&&A!==null?ur(A):tl,j.state=s.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(uh(s,c,A,f),j.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(A=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),A!==j.state&&dh.enqueueReplaceState(j,j.state,null),Co(s,f,j,g),wo(),j.state=s.memoizedState),typeof j.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(i===null){j=s.stateNode;var D=s.memoizedProps,I=as(c,D);j.props=I;var te=j.context,ue=c.contextType;A=tl,typeof ue=="object"&&ue!==null&&(A=ur(ue));var pe=c.getDerivedStateFromProps;ue=typeof pe=="function"||typeof j.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,ue||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(D||te!==A)&&Vj(s,j,f,A),si=!1;var ne=s.memoizedState;j.state=ne,Co(s,f,j,g),wo(),te=s.memoizedState,D||ne!==te||si?(typeof pe=="function"&&(uh(s,c,pe,f),te=s.memoizedState),(I=si||Qj(s,c,I,f,ne,te,A))?(ue||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(s.flags|=4194308)):(typeof j.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=te),j.props=f,j.state=te,j.context=A,f=I):(typeof j.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{j=s.stateNode,Bp(i,s),A=s.memoizedProps,ue=as(c,A),j.props=ue,pe=s.pendingProps,ne=j.context,te=c.contextType,I=tl,typeof te=="object"&&te!==null&&(I=ur(te)),D=c.getDerivedStateFromProps,(te=typeof D=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(A!==pe||ne!==I)&&Vj(s,j,f,I),si=!1,ne=s.memoizedState,j.state=ne,Co(s,f,j,g),wo();var le=s.memoizedState;A!==pe||ne!==le||si||i!==null&&i.dependencies!==null&&ju(i.dependencies)?(typeof D=="function"&&(uh(s,c,D,f),le=s.memoizedState),(ue=si||Qj(s,c,ue,f,ne,le,I)||i!==null&&i.dependencies!==null&&ju(i.dependencies))?(te||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(f,le,I),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(f,le,I)),typeof j.componentDidUpdate=="function"&&(s.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof j.componentDidUpdate!="function"||A===i.memoizedProps&&ne===i.memoizedState||(s.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ne===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=le),j.props=f,j.state=le,j.context=I,f=ue):(typeof j.componentDidUpdate!="function"||A===i.memoizedProps&&ne===i.memoizedState||(s.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ne===i.memoizedState||(s.flags|=1024),f=!1)}return j=f,$u(i,s),f=(s.flags&128)!==0,j||f?(j=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:j.render(),s.flags|=1,i!==null&&f?(s.child=rs(s,i.child,null,g),s.child=rs(s,null,c,g)):dr(i,s,c,g),s.memoizedState=j.state,i=s.child):i=ga(i,s,g),i}function oN(i,s,c,f){return Xi(),s.flags|=256,dr(i,s,c,f),s.child}var hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vh(i){return{baseLanes:i,cachePool:W0()}}function gh(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=Kr),i}function cN(i,s,c){var f=s.pendingProps,g=!1,j=(s.flags&128)!==0,A;if((A=j)||(A=i!==null&&i.memoizedState===null?!1:(Pt.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ke){if(g?ci(s):ui(),(i=yt)?(i=g1(i,dn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ri!==null?{id:Gn,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},c=U0(i),c.return=s,s.child=c,cr=s,yt=null)):i=null,i===null)throw ai(s);return Jh(i)?s.lanes=32:s.lanes=536870912,null}var D=f.children;return f=f.fallback,g?(ui(),g=s.mode,D=Bu({mode:"hidden",children:D},g),f=Ki(f,g,c,null),D.return=s,f.return=s,D.sibling=f,s.child=D,f=s.child,f.memoizedState=vh(c),f.childLanes=gh(i,A,c),s.memoizedState=hh,Do(null,f)):(ci(s),xh(s,D))}var I=i.memoizedState;if(I!==null&&(D=I.dehydrated,D!==null)){if(j)s.flags&256?(ci(s),s.flags&=-257,s=yh(i,s,c)):s.memoizedState!==null?(ui(),s.child=i.child,s.flags|=128,s=null):(ui(),D=f.fallback,g=s.mode,f=Bu({mode:"visible",children:f.children},g),D=Ki(D,g,c,null),D.flags|=2,f.return=s,D.return=s,f.sibling=D,s.child=f,rs(s,i.child,null,c),f=s.child,f.memoizedState=vh(c),f.childLanes=gh(i,A,c),s.memoizedState=hh,s=Do(null,f));else if(ci(s),Jh(D)){if(A=D.nextSibling&&D.nextSibling.dataset,A)var te=A.dgst;A=te,f=Error(a(419)),f.stack="",f.digest=A,yo({value:f,source:null,stack:null}),s=yh(i,s,c)}else if(It||il(i,s,c,!1),A=(c&i.childLanes)!==0,It||A){if(A=ht,A!==null&&(f=Kb(A,c),f!==0&&f!==I.retryLane))throw I.retryLane=f,Yi(i,f),Rr(A,i,f),mh;Zh(D)||Xu(),s=yh(i,s,c)}else Zh(D)?(s.flags|=192,s.child=i.child,s=null):(i=I.treeContext,yt=mn(D.nextSibling),cr=s,Ke=!0,ni=null,dn=!1,i!==null&&H0(s,i),s=xh(s,f.children),s.flags|=4096);return s}return g?(ui(),D=f.fallback,g=s.mode,I=i.child,te=I.sibling,f=da(I,{mode:"hidden",children:f.children}),f.subtreeFlags=I.subtreeFlags&65011712,te!==null?D=da(te,D):(D=Ki(D,g,c,null),D.flags|=2),D.return=s,f.return=s,f.sibling=D,s.child=f,Do(null,f),f=s.child,D=i.child.memoizedState,D===null?D=vh(c):(g=D.cachePool,g!==null?(I=Rt._currentValue,g=g.parent!==I?{parent:I,pool:I}:g):g=W0(),D={baseLanes:D.baseLanes|c,cachePool:g}),f.memoizedState=D,f.childLanes=gh(i,A,c),s.memoizedState=hh,Do(i.child,f)):(ci(s),c=i.child,i=c.sibling,c=da(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=c,s.memoizedState=null,c)}function xh(i,s){return s=Bu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Bu(i,s){return i=Hr(22,i,null,s),i.lanes=0,i}function yh(i,s,c){return rs(s,i.child,null,c),i=xh(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function uN(i,s,c){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),Pp(i.return,s,c)}function bh(i,s,c,f,g,j){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g,treeForkCount:j}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=f,A.tail=c,A.tailMode=g,A.treeForkCount=j)}function dN(i,s,c){var f=s.pendingProps,g=f.revealOrder,j=f.tail;f=f.children;var A=Pt.current,D=(A&2)!==0;if(D?(A=A&1|2,s.flags|=128):A&=1,me(Pt,A),dr(i,s,f,c),f=Ke?xo:0,!D&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&uN(i,c,s);else if(i.tag===19)uN(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=s.child,g=null;c!==null;)i=c.alternate,i!==null&&zu(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),bh(s,!1,g,c,j,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&zu(i)===null){s.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}bh(s,!0,c,null,j,f);break;case"together":bh(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function ga(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),mi|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(il(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(a(153));if(s.child!==null){for(i=s.child,c=da(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=da(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function jh(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&ju(i)))}function yP(i,s,c){switch(s.tag){case 3:Ee(s,s.stateNode.containerInfo),ii(s,Rt,i.memoizedState.cache),Xi();break;case 27:case 5:K(s);break;case 4:Ee(s,s.stateNode.containerInfo);break;case 10:ii(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Qp(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(ci(s),s.flags|=128,null):(c&s.child.childLanes)!==0?cN(i,s,c):(ci(s),i=ga(i,s,c),i!==null?i.sibling:null);ci(s);break;case 19:var g=(i.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(il(i,s,c,!1),f=(c&s.childLanes)!==0),g){if(f)return dN(i,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),me(Pt,Pt.current),f)break;return null;case 22:return s.lanes=0,nN(i,s,c,s.pendingProps);case 24:ii(s,Rt,i.memoizedState.cache)}return ga(i,s,c)}function fN(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)It=!0;else{if(!jh(i,c)&&(s.flags&128)===0)return It=!1,yP(i,s,c);It=(i.flags&131072)!==0}else It=!1,Ke&&(s.flags&1048576)!==0&&G0(s,xo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(i=es(s.elementType),s.type=i,typeof i=="function")Cp(i)?(f=as(i,f),s.tag=1,s=lN(null,s,i,f,c)):(s.tag=0,s=ph(null,s,i,f,c));else{if(i!=null){var g=i.$$typeof;if(g===E){s.tag=11,s=eN(null,s,i,f,c);break e}else if(g===P){s.tag=14,s=tN(null,s,i,f,c);break e}}throw s=k(i)||i,Error(a(306,s,""))}}return s;case 0:return ph(i,s,s.type,s.pendingProps,c);case 1:return f=s.type,g=as(f,s.pendingProps),lN(i,s,f,g,c);case 3:e:{if(Ee(s,s.stateNode.containerInfo),i===null)throw Error(a(387));f=s.pendingProps;var j=s.memoizedState;g=j.element,Bp(i,s),Co(s,f,null,c);var A=s.memoizedState;if(f=A.cache,ii(s,Rt,f),f!==j.cache&&Tp(s,[Rt],c,!0),wo(),f=A.element,j.isDehydrated)if(j={element:f,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=j,s.memoizedState=j,s.flags&256){s=oN(i,s,f,c);break e}else if(f!==g){g=on(Error(a(424)),s),yo(g),s=oN(i,s,f,c);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,yt=mn(i.firstChild),cr=s,Ke=!0,ni=null,dn=!0,c=nj(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Xi(),f===g){s=ga(i,s,c);break e}dr(i,s,f,c)}s=s.child}return s;case 26:return $u(i,s),i===null?(c=_1(s.type,null,s.pendingProps,null))?s.memoizedState=c:Ke||(c=s.type,i=s.pendingProps,f=nd(F.current).createElement(c),f[or]=s,f[Dr]=i,fr(f,c,i),Wt(f),s.stateNode=f):s.memoizedState=_1(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return K(s),i===null&&Ke&&(f=s.stateNode=b1(s.type,s.pendingProps,F.current),cr=s,dn=!0,g=yt,xi(s.type)?(ev=g,yt=mn(f.firstChild)):yt=g),dr(i,s,s.pendingProps.children,c),$u(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ke&&((g=f=yt)&&(f=KP(f,s.type,s.pendingProps,dn),f!==null?(s.stateNode=f,cr=s,yt=mn(f.firstChild),dn=!1,g=!0):g=!1),g||ai(s)),K(s),g=s.type,j=s.pendingProps,A=i!==null?i.memoizedProps:null,f=j.children,Kh(g,j)?f=null:A!==null&&Kh(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=Yp(i,s,uP,null,null,c),Qo._currentValue=g),$u(i,s),dr(i,s,f,c),s.child;case 6:return i===null&&Ke&&((i=c=yt)&&(c=XP(c,s.pendingProps,dn),c!==null?(s.stateNode=c,cr=s,yt=null,i=!0):i=!1),i||ai(s)),null;case 13:return cN(i,s,c);case 4:return Ee(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=rs(s,null,f,c):dr(i,s,f,c),s.child;case 11:return eN(i,s,s.type,s.pendingProps,c);case 7:return dr(i,s,s.pendingProps,c),s.child;case 8:return dr(i,s,s.pendingProps.children,c),s.child;case 12:return dr(i,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,ii(s,s.type,f.value),dr(i,s,f.children,c),s.child;case 9:return g=s.type._context,f=s.pendingProps.children,Zi(s),g=ur(g),f=f(g),s.flags|=1,dr(i,s,f,c),s.child;case 14:return tN(i,s,s.type,s.pendingProps,c);case 15:return rN(i,s,s.type,s.pendingProps,c);case 19:return dN(i,s,c);case 31:return xP(i,s,c);case 22:return nN(i,s,c,s.pendingProps);case 24:return Zi(s),f=ur(Rt),i===null?(g=Lp(),g===null&&(g=ht,j=qp(),g.pooledCache=j,j.refCount++,j!==null&&(g.pooledCacheLanes|=c),g=j),s.memoizedState={parent:f,cache:g},$p(s),ii(s,Rt,g)):((i.lanes&c)!==0&&(Bp(i,s),Co(s,null,null,c),wo()),g=i.memoizedState,j=s.memoizedState,g.parent!==f?(g={parent:f,cache:f},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ii(s,Rt,f)):(f=j.cache,ii(s,Rt,f),f!==g.cache&&Tp(s,[Rt],c,!0))),dr(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function xa(i){i.flags|=4}function Nh(i,s,c,f,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(IN())i.flags|=8192;else throw ts=wu,Ip}else i.flags&=-16777217}function mN(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!E1(s))if(IN())i.flags|=8192;else throw ts=wu,Ip}function Uu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?De():536870912,i.lanes|=s,gl|=s)}function Mo(i,s){if(!Ke)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function bt(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(s)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,s}function bP(i,s,c){var f=s.pendingProps;switch(Op(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return bt(s),null;case 3:return c=s.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),pa(Rt),ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(al(s)?xa(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mp())),bt(s),null;case 26:var g=s.type,j=s.memoizedState;return i===null?(xa(s),j!==null?(bt(s),mN(s,j)):(bt(s),Nh(s,g,null,f,c))):j?j!==i.memoizedState?(xa(s),bt(s),mN(s,j)):(bt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==f&&xa(s),bt(s),Nh(s,g,i,f,c)),null;case 27:if($(s),c=F.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return bt(s),null}i=xe.current,al(s)?Q0(s):(i=b1(g,f,c),s.stateNode=i,xa(s))}return bt(s),null;case 5:if($(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return bt(s),null}if(j=xe.current,al(s))Q0(s);else{var A=nd(F.current);switch(j){case 1:j=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:j=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":j=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":j=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":j=A.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof f.is=="string"?A.createElement("select",{is:f.is}):A.createElement("select"),f.multiple?j.multiple=!0:f.size&&(j.size=f.size);break;default:j=typeof f.is=="string"?A.createElement(g,{is:f.is}):A.createElement(g)}}j[or]=s,j[Dr]=f;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)j.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=j;e:switch(fr(j,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&xa(s)}}return bt(s),Nh(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,c),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(a(166));if(i=F.current,al(s)){if(i=s.stateNode,c=s.memoizedProps,f=null,g=cr,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[or]=s,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||c1(i.nodeValue,c)),i||ai(s,!0)}else i=nd(i).createTextNode(f),i[or]=s,s.stateNode=i}return bt(s),null;case 31:if(c=s.memoizedState,i===null||i.memoizedState!==null){if(f=al(s),c!==null){if(i===null){if(!f)throw Error(a(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[or]=s}else Xi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),i=!1}else c=Mp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return s.flags&256?(Vr(s),s):(Vr(s),null);if((s.flags&128)!==0)throw Error(a(558))}return bt(s),null;case 13:if(f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=al(s),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(a(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[or]=s}else Xi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),g=!1}else g=Mp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Vr(s),s):(Vr(s),null)}return Vr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=s.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),j=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),j!==g&&(f.flags|=2048)),c!==i&&c&&(s.child.flags|=8192),Uu(s,s.updateQueue),bt(s),null);case 4:return ie(),i===null&&Gh(s.stateNode.containerInfo),bt(s),null;case 10:return pa(s.type),bt(s),null;case 19:if(re(Pt),f=s.memoizedState,f===null)return bt(s),null;if(g=(s.flags&128)!==0,j=f.rendering,j===null)if(g)Mo(f,!1);else{if(zt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(j=zu(i),j!==null){for(s.flags|=128,Mo(f,!1),i=j.updateQueue,s.updateQueue=i,Uu(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)B0(c,i),c=c.sibling;return me(Pt,Pt.current&1|2),Ke&&fa(s,f.treeForkCount),s.child}i=i.sibling}f.tail!==null&&ke()>Vu&&(s.flags|=128,g=!0,Mo(f,!1),s.lanes=4194304)}else{if(!g)if(i=zu(j),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Uu(s,i),Mo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!j.alternate&&!Ke)return bt(s),null}else 2*ke()-f.renderingStartTime>Vu&&c!==536870912&&(s.flags|=128,g=!0,Mo(f,!1),s.lanes=4194304);f.isBackwards?(j.sibling=s.child,s.child=j):(i=f.last,i!==null?i.sibling=j:s.child=j,f.last=j)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=ke(),i.sibling=null,c=Pt.current,me(Pt,g?c&1|2:c&1),Ke&&fa(s,f.treeForkCount),i):(bt(s),null);case 22:case 23:return Vr(s),Hp(),f=s.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),c=s.updateQueue,c!==null&&Uu(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),i!==null&&re(Ji),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),pa(Rt),bt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function jP(i,s){switch(Op(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return pa(Rt),ie(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return $(s),null;case 31:if(s.memoizedState!==null){if(Vr(s),s.alternate===null)throw Error(a(340));Xi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Vr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Xi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return re(Pt),null;case 4:return ie(),null;case 10:return pa(s.type),null;case 22:case 23:return Vr(s),Hp(),i!==null&&re(Ji),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return pa(Rt),null;case 25:return null;default:return null}}function pN(i,s){switch(Op(s),s.tag){case 3:pa(Rt),ie();break;case 26:case 27:case 5:$(s);break;case 4:ie();break;case 31:s.memoizedState!==null&&Vr(s);break;case 13:Vr(s);break;case 19:re(Pt);break;case 10:pa(s.type);break;case 22:case 23:Vr(s),Hp(),i!==null&&re(Ji);break;case 24:pa(Rt)}}function ko(i,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){f=void 0;var j=c.create,A=c.inst;f=j(),A.destroy=f}c=c.next}while(c!==g)}}catch(D){it(s,s.return,D)}}function di(i,s,c){try{var f=s.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var j=g.next;f=j;do{if((f.tag&i)===i){var A=f.inst,D=A.destroy;if(D!==void 0){A.destroy=void 0,g=s;var I=c,te=D;try{te()}catch(ue){it(g,I,ue)}}}f=f.next}while(f!==j)}}catch(ue){it(s,s.return,ue)}}function hN(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{ij(s,c)}catch(f){it(i,i.return,f)}}}function vN(i,s,c){c.props=as(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){it(i,s,f)}}function Po(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(g){it(i,s,g)}}function Qn(i,s){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){it(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){it(i,s,g)}else c.current=null}function gN(i){var s=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){it(i,i.return,g)}}function _h(i,s,c){try{var f=i.stateNode;FP(f,i.type,c,s),f[Dr]=s}catch(g){it(i,i.return,g)}}function xN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&xi(i.type)||i.tag===4}function Sh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||xN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&xi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function wh(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=ca));else if(f!==4&&(f===27&&xi(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for(wh(i,s,c),i=i.sibling;i!==null;)wh(i,s,c),i=i.sibling}function Fu(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(f!==4&&(f===27&&xi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Fu(i,s,c),i=i.sibling;i!==null;)Fu(i,s,c),i=i.sibling}function yN(i){var s=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);fr(s,f,c),s[or]=i,s[Dr]=c}catch(j){it(i,i.return,j)}}var ya=!1,$t=!1,Ch=!1,bN=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function NP(i,s){if(i=i.containerInfo,Vh=ud,i=M0(i),yp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,j=f.focusNode;f=f.focusOffset;try{c.nodeType,j.nodeType}catch{c=null;break e}var A=0,D=-1,I=-1,te=0,ue=0,pe=i,ne=null;t:for(;;){for(var le;pe!==c||g!==0&&pe.nodeType!==3||(D=A+g),pe!==j||f!==0&&pe.nodeType!==3||(I=A+f),pe.nodeType===3&&(A+=pe.nodeValue.length),(le=pe.firstChild)!==null;)ne=pe,pe=le;for(;;){if(pe===i)break t;if(ne===c&&++te===g&&(D=A),ne===j&&++ue===f&&(I=A),(le=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=le}c=D===-1||I===-1?null:{start:D,end:I}}else c=null}c=c||{start:0,end:0}}else c=null;for(Yh={focusedElem:i,selectionRange:c},ud=!1,Zt=s;Zt!==null;)if(s=Zt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Zt=i;else for(;Zt!==null;){switch(s=Zt,j=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&j!==null){i=void 0,c=s,g=j.memoizedProps,j=j.memoizedState,f=c.stateNode;try{var Ne=as(c.type,g);i=f.getSnapshotBeforeUpdate(Ne,j),f.__reactInternalSnapshotBeforeUpdate=i}catch(Pe){it(c,c.return,Pe)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)Wh(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Wh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=s.sibling,i!==null){i.return=s.return,Zt=i;break}Zt=s.return}}function jN(i,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ja(i,c),f&4&&ko(5,c);break;case 1:if(ja(i,c),f&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(A){it(c,c.return,A)}else{var g=as(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){it(c,c.return,A)}}f&64&&hN(c),f&512&&Po(c,c.return);break;case 3:if(ja(i,c),f&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{ij(i,s)}catch(A){it(c,c.return,A)}}break;case 27:s===null&&f&4&&yN(c);case 26:case 5:ja(i,c),s===null&&f&4&&gN(c),f&512&&Po(c,c.return);break;case 12:ja(i,c);break;case 31:ja(i,c),f&4&&SN(i,c);break;case 13:ja(i,c),f&4&&wN(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=DP.bind(null,c),WP(i,c))));break;case 22:if(f=c.memoizedState!==null||ya,!f){s=s!==null&&s.memoizedState!==null||$t,g=ya;var j=$t;ya=f,($t=s)&&!j?Na(i,c,(c.subtreeFlags&8772)!==0):ja(i,c),ya=g,$t=j}break;case 30:break;default:ja(i,c)}}function NN(i){var s=i.alternate;s!==null&&(i.alternate=null,NN(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&rp(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _t=null,kr=!1;function ba(i,s,c){for(c=c.child;c!==null;)_N(i,s,c),c=c.sibling}function _N(i,s,c){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(xr,c)}catch{}switch(c.tag){case 26:$t||Qn(c,s),ba(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:$t||Qn(c,s);var f=_t,g=kr;xi(c.type)&&(_t=c.stateNode,kr=!1),ba(i,s,c),Fo(c.stateNode),_t=f,kr=g;break;case 5:$t||Qn(c,s);case 6:if(f=_t,g=kr,_t=null,ba(i,s,c),_t=f,kr=g,_t!==null)if(kr)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(j){it(c,s,j)}else try{_t.removeChild(c.stateNode)}catch(j){it(c,s,j)}break;case 18:_t!==null&&(kr?(i=_t,h1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),wl(i)):h1(_t,c.stateNode));break;case 4:f=_t,g=kr,_t=c.stateNode.containerInfo,kr=!0,ba(i,s,c),_t=f,kr=g;break;case 0:case 11:case 14:case 15:di(2,c,s),$t||di(4,c,s),ba(i,s,c);break;case 1:$t||(Qn(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&vN(c,s,f)),ba(i,s,c);break;case 21:ba(i,s,c);break;case 22:$t=(f=$t)||c.memoizedState!==null,ba(i,s,c),$t=f;break;default:ba(i,s,c)}}function SN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{wl(i)}catch(c){it(s,s.return,c)}}}function wN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wl(i)}catch(c){it(s,s.return,c)}}function _P(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new bN),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new bN),s;default:throw Error(a(435,i.tag))}}function Gu(i,s){var c=_P(i);s.forEach(function(f){if(!c.has(f)){c.add(f);var g=MP.bind(null,i,f);f.then(g,g)}})}function Pr(i,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],j=i,A=s,D=A;e:for(;D!==null;){switch(D.tag){case 27:if(xi(D.type)){_t=D.stateNode,kr=!1;break e}break;case 5:_t=D.stateNode,kr=!1;break e;case 3:case 4:_t=D.stateNode.containerInfo,kr=!0;break e}D=D.return}if(_t===null)throw Error(a(160));_N(j,A,g),_t=null,kr=!1,j=g.alternate,j!==null&&(j.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)CN(s,i),s=s.sibling}var zn=null;function CN(i,s){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Pr(s,i),Tr(i),f&4&&(di(3,i,i.return),ko(3,i),di(5,i,i.return));break;case 1:Pr(s,i),Tr(i),f&512&&($t||c===null||Qn(c,c.return)),f&64&&ya&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=zn;if(Pr(s,i),Tr(i),f&512&&($t||c===null||Qn(c,c.return)),f&4){var j=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":j=g.getElementsByTagName("title")[0],(!j||j[so]||j[or]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=g.createElement(f),g.head.insertBefore(j,g.querySelector("head > title"))),fr(j,f,c),j[or]=i,Wt(j),f=j;break e;case"link":var A=C1("link","href",g).get(f+(c.href||""));if(A){for(var D=0;D<A.length;D++)if(j=A[D],j.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&j.getAttribute("rel")===(c.rel==null?null:c.rel)&&j.getAttribute("title")===(c.title==null?null:c.title)&&j.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(D,1);break t}}j=g.createElement(f),fr(j,f,c),g.head.appendChild(j);break;case"meta":if(A=C1("meta","content",g).get(f+(c.content||""))){for(D=0;D<A.length;D++)if(j=A[D],j.getAttribute("content")===(c.content==null?null:""+c.content)&&j.getAttribute("name")===(c.name==null?null:c.name)&&j.getAttribute("property")===(c.property==null?null:c.property)&&j.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&j.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(D,1);break t}}j=g.createElement(f),fr(j,f,c),g.head.appendChild(j);break;default:throw Error(a(468,f))}j[or]=i,Wt(j),f=j}i.stateNode=f}else A1(g,i.type,i.stateNode);else i.stateNode=w1(g,f,i.memoizedProps);else j!==f?(j===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):j.count--,f===null?A1(g,i.type,i.stateNode):w1(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&_h(i,i.memoizedProps,c.memoizedProps)}break;case 27:Pr(s,i),Tr(i),f&512&&($t||c===null||Qn(c,c.return)),c!==null&&f&4&&_h(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Pr(s,i),Tr(i),f&512&&($t||c===null||Qn(c,c.return)),i.flags&32){g=i.stateNode;try{Ys(g,"")}catch(Ne){it(i,i.return,Ne)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,_h(i,g,c!==null?c.memoizedProps:g)),f&1024&&(Ch=!0);break;case 6:if(Pr(s,i),Tr(i),f&4){if(i.stateNode===null)throw Error(a(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Ne){it(i,i.return,Ne)}}break;case 3:if(sd=null,g=zn,zn=ad(s.containerInfo),Pr(s,i),zn=g,Tr(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{wl(s.containerInfo)}catch(Ne){it(i,i.return,Ne)}Ch&&(Ch=!1,AN(i));break;case 4:f=zn,zn=ad(i.stateNode.containerInfo),Pr(s,i),Tr(i),zn=f;break;case 12:Pr(s,i),Tr(i);break;case 31:Pr(s,i),Tr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Gu(i,f)));break;case 13:Pr(s,i),Tr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Qu=ke()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Gu(i,f)));break;case 22:g=i.memoizedState!==null;var I=c!==null&&c.memoizedState!==null,te=ya,ue=$t;if(ya=te||g,$t=ue||I,Pr(s,i),$t=ue,ya=te,Tr(i),f&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(c===null||I||ya||$t||is(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){I=c=s;try{if(j=I.stateNode,g)A=j.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{D=I.stateNode;var pe=I.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ne){it(I,I.return,Ne)}}}else if(s.tag===6){if(c===null){I=s;try{I.stateNode.nodeValue=g?"":I.memoizedProps}catch(Ne){it(I,I.return,Ne)}}}else if(s.tag===18){if(c===null){I=s;try{var le=I.stateNode;g?v1(le,!0):v1(I.stateNode,!1)}catch(Ne){it(I,I.return,Ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Gu(i,c))));break;case 19:Pr(s,i),Tr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Gu(i,f)));break;case 30:break;case 21:break;default:Pr(s,i),Tr(i)}}function Tr(i){var s=i.flags;if(s&2){try{for(var c,f=i.return;f!==null;){if(xN(f)){c=f;break}f=f.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var g=c.stateNode,j=Sh(i);Fu(i,j,g);break;case 5:var A=c.stateNode;c.flags&32&&(Ys(A,""),c.flags&=-33);var D=Sh(i);Fu(i,D,A);break;case 3:case 4:var I=c.stateNode.containerInfo,te=Sh(i);wh(i,te,I);break;default:throw Error(a(161))}}catch(ue){it(i,i.return,ue)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function AN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;AN(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ja(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)jN(i,s.alternate,s),s=s.sibling}function is(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:di(4,s,s.return),is(s);break;case 1:Qn(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&vN(s,s.return,c),is(s);break;case 27:Fo(s.stateNode);case 26:case 5:Qn(s,s.return),is(s);break;case 22:s.memoizedState===null&&is(s);break;case 30:is(s);break;default:is(s)}i=i.sibling}}function Na(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,g=i,j=s,A=j.flags;switch(j.tag){case 0:case 11:case 15:Na(g,j,c),ko(4,j);break;case 1:if(Na(g,j,c),f=j,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(te){it(f,f.return,te)}if(f=j,g=f.updateQueue,g!==null){var D=f.stateNode;try{var I=g.shared.hiddenCallbacks;if(I!==null)for(g.shared.hiddenCallbacks=null,g=0;g<I.length;g++)aj(I[g],D)}catch(te){it(f,f.return,te)}}c&&A&64&&hN(j),Po(j,j.return);break;case 27:yN(j);case 26:case 5:Na(g,j,c),c&&f===null&&A&4&&gN(j),Po(j,j.return);break;case 12:Na(g,j,c);break;case 31:Na(g,j,c),c&&A&4&&SN(g,j);break;case 13:Na(g,j,c),c&&A&4&&wN(g,j);break;case 22:j.memoizedState===null&&Na(g,j,c),Po(j,j.return);break;case 30:break;default:Na(g,j,c)}s=s.sibling}}function Ah(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&bo(c))}function Eh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&bo(i))}function On(i,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)EN(i,s,c,f),s=s.sibling}function EN(i,s,c,f){var g=s.flags;switch(s.tag){case 0:case 11:case 15:On(i,s,c,f),g&2048&&ko(9,s);break;case 1:On(i,s,c,f);break;case 3:On(i,s,c,f),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&bo(i)));break;case 12:if(g&2048){On(i,s,c,f),i=s.stateNode;try{var j=s.memoizedProps,A=j.id,D=j.onPostCommit;typeof D=="function"&&D(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(I){it(s,s.return,I)}}else On(i,s,c,f);break;case 31:On(i,s,c,f);break;case 13:On(i,s,c,f);break;case 23:break;case 22:j=s.stateNode,A=s.alternate,s.memoizedState!==null?j._visibility&2?On(i,s,c,f):To(i,s):j._visibility&2?On(i,s,c,f):(j._visibility|=2,pl(i,s,c,f,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Ah(A,s);break;case 24:On(i,s,c,f),g&2048&&Eh(s.alternate,s);break;default:On(i,s,c,f)}}function pl(i,s,c,f,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var j=i,A=s,D=c,I=f,te=A.flags;switch(A.tag){case 0:case 11:case 15:pl(j,A,D,I,g),ko(8,A);break;case 23:break;case 22:var ue=A.stateNode;A.memoizedState!==null?ue._visibility&2?pl(j,A,D,I,g):To(j,A):(ue._visibility|=2,pl(j,A,D,I,g)),g&&te&2048&&Ah(A.alternate,A);break;case 24:pl(j,A,D,I,g),g&&te&2048&&Eh(A.alternate,A);break;default:pl(j,A,D,I,g)}s=s.sibling}}function To(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,f=s,g=f.flags;switch(f.tag){case 22:To(c,f),g&2048&&Ah(f.alternate,f);break;case 24:To(c,f),g&2048&&Eh(f.alternate,f);break;default:To(c,f)}s=s.sibling}}var qo=8192;function hl(i,s,c){if(i.subtreeFlags&qo)for(i=i.child;i!==null;)zN(i,s,c),i=i.sibling}function zN(i,s,c){switch(i.tag){case 26:hl(i,s,c),i.flags&qo&&i.memoizedState!==null&&cT(c,zn,i.memoizedState,i.memoizedProps);break;case 5:hl(i,s,c);break;case 3:case 4:var f=zn;zn=ad(i.stateNode.containerInfo),hl(i,s,c),zn=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=qo,qo=16777216,hl(i,s,c),qo=f):hl(i,s,c));break;default:hl(i,s,c)}}function ON(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ro(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,MN(f,i)}ON(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)DN(i),i=i.sibling}function DN(i){switch(i.tag){case 0:case 11:case 15:Ro(i),i.flags&2048&&di(9,i,i.return);break;case 3:Ro(i);break;case 12:Ro(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Hu(i)):Ro(i);break;default:Ro(i)}}function Hu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,MN(f,i)}ON(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:di(8,s,s.return),Hu(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Hu(s));break;default:Hu(s)}i=i.sibling}}function MN(i,s){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:di(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:bo(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Zt=f;else e:for(c=i;Zt!==null;){f=Zt;var g=f.sibling,j=f.return;if(NN(f),f===c){Zt=null;break e}if(g!==null){g.return=j,Zt=g;break e}Zt=j}}}var SP={getCacheForType:function(i){var s=ur(Rt),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c},cacheSignal:function(){return ur(Rt).controller.signal}},wP=typeof WeakMap=="function"?WeakMap:Map,rt=0,ht=null,Ge=null,Ve=0,at=0,Yr=null,fi=!1,vl=!1,zh=!1,_a=0,zt=0,mi=0,ss=0,Oh=0,Kr=0,gl=0,Lo=null,qr=null,Dh=!1,Qu=0,kN=0,Vu=1/0,Yu=null,pi=null,Vt=0,hi=null,xl=null,Sa=0,Mh=0,kh=null,PN=null,Io=0,Ph=null;function Xr(){return(rt&2)!==0&&Ve!==0?Ve&-Ve:R.T!==null?$h():Xb()}function TN(){if(Kr===0)if((Ve&536870912)===0||Ke){var i=$s;$s<<=1,($s&3932160)===0&&($s=262144),Kr=i}else Kr=536870912;return i=Qr.current,i!==null&&(i.flags|=32),Kr}function Rr(i,s,c){(i===ht&&(at===2||at===9)||i.cancelPendingCommit!==null)&&(yl(i,0),vi(i,Ve,Kr,!1)),yr(i,c),((rt&2)===0||i!==ht)&&(i===ht&&((rt&2)===0&&(ss|=c),zt===4&&vi(i,Ve,Kr,!1)),Vn(i))}function qN(i,s,c){if((rt&6)!==0)throw Error(a(327));var f=!c&&(s&127)===0&&(s&i.expiredLanes)===0||Ui(i,s),g=f?EP(i,s):qh(i,s,!0),j=f;do{if(g===0){vl&&!f&&vi(i,s,0,!1);break}else{if(c=i.current.alternate,j&&!CP(c)){g=qh(i,s,!1),j=!1;continue}if(g===2){if(j=s,i.errorRecoveryDisabledLanes&j)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var D=i;g=Lo;var I=D.current.memoizedState.isDehydrated;if(I&&(yl(D,A).flags|=256),A=qh(D,A,!1),A!==2){if(zh&&!I){D.errorRecoveryDisabledLanes|=j,ss|=j,g=4;break e}j=qr,qr=g,j!==null&&(qr===null?qr=j:qr.push.apply(qr,j))}g=A}if(j=!1,g!==2)continue}}if(g===1){yl(i,0),vi(i,s,0,!0);break}e:{switch(f=i,j=g,j){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:vi(f,s,Kr,!fi);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(g=Qu+300-ke(),10<g)){if(vi(f,s,Kr,!fi),Fn(f,0,!0)!==0)break e;Sa=s,f.timeoutHandle=m1(RN.bind(null,f,c,qr,Yu,Dh,s,Kr,ss,gl,fi,j,"Throttled",-0,0),g);break e}RN(f,c,qr,Yu,Dh,s,Kr,ss,gl,fi,j,null,-0,0)}}break}while(!0);Vn(i)}function RN(i,s,c,f,g,j,A,D,I,te,ue,pe,ne,le){if(i.timeoutHandle=-1,pe=s.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},zN(s,j,pe);var Ne=(j&62914560)===j?Qu-ke():(j&4194048)===j?kN-ke():0;if(Ne=uT(pe,Ne),Ne!==null){Sa=j,i.cancelPendingCommit=Ne(HN.bind(null,i,s,j,c,f,g,A,D,I,ue,pe,null,ne,le)),vi(i,j,A,!te);return}}HN(i,s,j,c,f,g,A,D,I)}function CP(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],j=g.getSnapshot;g=g.value;try{if(!Gr(j(),g))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function vi(i,s,c,f){s&=~Oh,s&=~ss,i.suspendedLanes|=s,i.pingedLanes&=~s,f&&(i.warmLanes|=s),f=i.expirationTimes;for(var g=s;0<g;){var j=31-_r(g),A=1<<j;f[j]=-1,g&=~A}c!==0&&Fi(i,c,s)}function Ku(){return(rt&6)===0?($o(0),!1):!0}function Th(){if(Ge!==null){if(at===0)var i=Ge.return;else i=Ge,ma=Wi=null,Wp(i),cl=null,No=0,i=Ge;for(;i!==null;)pN(i.alternate,i),i=i.return;Ge=null}}function yl(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,QP(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Sa=0,Th(),ht=i,Ge=c=da(i.current,null),Ve=s,at=0,Yr=null,fi=!1,vl=Ui(i,s),zh=!1,gl=Kr=Oh=ss=mi=zt=0,qr=Lo=null,Dh=!1,(s&8)!==0&&(s|=s&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=s;0<f;){var g=31-_r(f),j=1<<g;s|=i[g],f&=~j}return _a=s,vu(),c}function LN(i,s){Be=null,R.H=Oo,s===ol||s===Su?(s=ej(),at=3):s===Ip?(s=ej(),at=4):at=s===mh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yr=s,Ge===null&&(zt=1,Lu(i,on(s,i.current)))}function IN(){var i=Qr.current;return i===null?!0:(Ve&4194048)===Ve?fn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?i===fn:!1}function $N(){var i=R.H;return R.H=Oo,i===null?Oo:i}function BN(){var i=R.A;return R.A=SP,i}function Xu(){zt=4,fi||(Ve&4194048)!==Ve&&Qr.current!==null||(vl=!0),(mi&134217727)===0&&(ss&134217727)===0||ht===null||vi(ht,Ve,Kr,!1)}function qh(i,s,c){var f=rt;rt|=2;var g=$N(),j=BN();(ht!==i||Ve!==s)&&(Yu=null,yl(i,s)),s=!1;var A=zt;e:do try{if(at!==0&&Ge!==null){var D=Ge,I=Yr;switch(at){case 8:Th(),A=6;break e;case 3:case 2:case 9:case 6:Qr.current===null&&(s=!0);var te=at;if(at=0,Yr=null,bl(i,D,I,te),c&&vl){A=0;break e}break;default:te=at,at=0,Yr=null,bl(i,D,I,te)}}AP(),A=zt;break}catch(ue){LN(i,ue)}while(!0);return s&&i.shellSuspendCounter++,ma=Wi=null,rt=f,R.H=g,R.A=j,Ge===null&&(ht=null,Ve=0,vu()),A}function AP(){for(;Ge!==null;)UN(Ge)}function EP(i,s){var c=rt;rt|=2;var f=$N(),g=BN();ht!==i||Ve!==s?(Yu=null,Vu=ke()+500,yl(i,s)):vl=Ui(i,s);e:do try{if(at!==0&&Ge!==null){s=Ge;var j=Yr;t:switch(at){case 1:at=0,Yr=null,bl(i,s,j,1);break;case 2:case 9:if(Z0(j)){at=0,Yr=null,FN(s);break}s=function(){at!==2&&at!==9||ht!==i||(at=7),Vn(i)},j.then(s,s);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Z0(j)?(at=0,Yr=null,FN(s)):(at=0,Yr=null,bl(i,s,j,7));break;case 5:var A=null;switch(Ge.tag){case 26:A=Ge.memoizedState;case 5:case 27:var D=Ge;if(A?E1(A):D.stateNode.complete){at=0,Yr=null;var I=D.sibling;if(I!==null)Ge=I;else{var te=D.return;te!==null?(Ge=te,Wu(te)):Ge=null}break t}}at=0,Yr=null,bl(i,s,j,5);break;case 6:at=0,Yr=null,bl(i,s,j,6);break;case 8:Th(),zt=6;break e;default:throw Error(a(462))}}zP();break}catch(ue){LN(i,ue)}while(!0);return ma=Wi=null,R.H=f,R.A=g,rt=c,Ge!==null?0:(ht=null,Ve=0,vu(),zt)}function zP(){for(;Ge!==null&&!ce();)UN(Ge)}function UN(i){var s=fN(i.alternate,i,_a);i.memoizedProps=i.pendingProps,s===null?Wu(i):Ge=s}function FN(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=sN(c,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=sN(c,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:Wp(s);default:pN(c,s),s=Ge=B0(s,_a),s=fN(c,s,_a)}i.memoizedProps=i.pendingProps,s===null?Wu(i):Ge=s}function bl(i,s,c,f){ma=Wi=null,Wp(s),cl=null,No=0;var g=s.return;try{if(gP(i,g,s,c,Ve)){zt=1,Lu(i,on(c,i.current)),Ge=null;return}}catch(j){if(g!==null)throw Ge=g,j;zt=1,Lu(i,on(c,i.current)),Ge=null;return}s.flags&32768?(Ke||f===1?i=!0:vl||(Ve&536870912)!==0?i=!1:(fi=i=!0,(f===2||f===9||f===3||f===6)&&(f=Qr.current,f!==null&&f.tag===13&&(f.flags|=16384))),GN(s,i)):Wu(s)}function Wu(i){var s=i;do{if((s.flags&32768)!==0){GN(s,fi);return}i=s.return;var c=bP(s.alternate,s,_a);if(c!==null){Ge=c;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=i}while(s!==null);zt===0&&(zt=5)}function GN(i,s){do{var c=jP(i.alternate,i);if(c!==null){c.flags&=32767,Ge=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){Ge=i;return}Ge=i=c}while(i!==null);zt=6,Ge=null}function HN(i,s,c,f,g,j,A,D,I){i.cancelPendingCommit=null;do Zu();while(Vt!==0);if((rt&6)!==0)throw Error(a(327));if(s!==null){if(s===i.current)throw Error(a(177));if(j=s.lanes|s.childLanes,j|=Sp,io(i,c,j,A,D,I),i===ht&&(Ge=ht=null,Ve=0),xl=s,hi=i,Sa=c,Mh=j,kh=g,PN=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,kP(Bn,function(){return XN(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,g=J.p,J.p=2,A=rt,rt|=4;try{NP(i,s,c)}finally{rt=A,J.p=g,R.T=f}}Vt=1,QN(),VN(),YN()}}function QN(){if(Vt===1){Vt=0;var i=hi,s=xl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=R.T,R.T=null;var f=J.p;J.p=2;var g=rt;rt|=4;try{CN(s,i);var j=Yh,A=M0(i.containerInfo),D=j.focusedElem,I=j.selectionRange;if(A!==D&&D&&D.ownerDocument&&D0(D.ownerDocument.documentElement,D)){if(I!==null&&yp(D)){var te=I.start,ue=I.end;if(ue===void 0&&(ue=te),"selectionStart"in D)D.selectionStart=te,D.selectionEnd=Math.min(ue,D.value.length);else{var pe=D.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),Ne=D.textContent.length,Pe=Math.min(I.start,Ne),ut=I.end===void 0?Pe:Math.min(I.end,Ne);!le.extend&&Pe>ut&&(A=ut,ut=Pe,Pe=A);var X=O0(D,Pe),G=O0(D,ut);if(X&&G&&(le.rangeCount!==1||le.anchorNode!==X.node||le.anchorOffset!==X.offset||le.focusNode!==G.node||le.focusOffset!==G.offset)){var ee=pe.createRange();ee.setStart(X.node,X.offset),le.removeAllRanges(),Pe>ut?(le.addRange(ee),le.extend(G.node,G.offset)):(ee.setEnd(G.node,G.offset),le.addRange(ee))}}}}for(pe=[],le=D;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<pe.length;D++){var fe=pe[D];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}ud=!!Vh,Yh=Vh=null}finally{rt=g,J.p=f,R.T=c}}i.current=s,Vt=2}}function VN(){if(Vt===2){Vt=0;var i=hi,s=xl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=R.T,R.T=null;var f=J.p;J.p=2;var g=rt;rt|=4;try{jN(i,s.alternate,s)}finally{rt=g,J.p=f,R.T=c}}Vt=3}}function YN(){if(Vt===4||Vt===3){Vt=0,Ce();var i=hi,s=xl,c=Sa,f=PN;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Vt=5:(Vt=0,xl=hi=null,KN(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(pi=null),ep(c),s=s.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(xr,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=R.T,g=J.p,J.p=2,R.T=null;try{for(var j=i.onRecoverableError,A=0;A<f.length;A++){var D=f[A];j(D.value,{componentStack:D.stack})}}finally{R.T=s,J.p=g}}(Sa&3)!==0&&Zu(),Vn(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===Ph?Io++:(Io=0,Ph=i):Io=0,$o(0)}}function KN(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,bo(s)))}function Zu(){return QN(),VN(),YN(),XN()}function XN(){if(Vt!==5)return!1;var i=hi,s=Mh;Mh=0;var c=ep(Sa),f=R.T,g=J.p;try{J.p=32>c?32:c,R.T=null,c=kh,kh=null;var j=hi,A=Sa;if(Vt=0,xl=hi=null,Sa=0,(rt&6)!==0)throw Error(a(331));var D=rt;if(rt|=4,DN(j.current),EN(j,j.current,A,c),rt=D,$o(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(xr,j)}catch{}return!0}finally{J.p=g,R.T=f,KN(i,s)}}function WN(i,s,c){s=on(c,s),s=fh(i.stateNode,s,2),i=oi(i,s,2),i!==null&&(yr(i,2),Vn(i))}function it(i,s,c){if(i.tag===3)WN(i,i,c);else for(;s!==null;){if(s.tag===3){WN(s,i,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(pi===null||!pi.has(f))){i=on(c,i),c=Zj(2),f=oi(s,c,2),f!==null&&(Jj(c,f,s,i),yr(f,2),Vn(f));break}}s=s.return}}function Rh(i,s,c){var f=i.pingCache;if(f===null){f=i.pingCache=new wP;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(c)||(zh=!0,g.add(c),i=OP.bind(null,i,s,c),s.then(i,i))}function OP(i,s,c){var f=i.pingCache;f!==null&&f.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,ht===i&&(Ve&c)===c&&(zt===4||zt===3&&(Ve&62914560)===Ve&&300>ke()-Qu?(rt&2)===0&&yl(i,0):Oh|=c,gl===Ve&&(gl=0)),Vn(i)}function ZN(i,s){s===0&&(s=De()),i=Yi(i,s),i!==null&&(yr(i,s),Vn(i))}function DP(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),ZN(i,c)}function MP(i,s){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(s),ZN(i,c)}function kP(i,s){return rn(i,s)}var Ju=null,jl=null,Lh=!1,ed=!1,Ih=!1,gi=0;function Vn(i){i!==jl&&i.next===null&&(jl===null?Ju=jl=i:jl=jl.next=i),ed=!0,Lh||(Lh=!0,TP())}function $o(i,s){if(!Ih&&ed){Ih=!0;do for(var c=!1,f=Ju;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var j=0;else{var A=f.suspendedLanes,D=f.pingedLanes;j=(1<<31-_r(42|i)+1)-1,j&=g&~(A&~D),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(c=!0,r1(f,j))}else j=Ve,j=Fn(f,f===ht?j:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(j&3)===0||Ui(f,j)||(c=!0,r1(f,j));f=f.next}while(c);Ih=!1}}function PP(){JN()}function JN(){ed=Lh=!1;var i=0;gi!==0&&HP()&&(i=gi);for(var s=ke(),c=null,f=Ju;f!==null;){var g=f.next,j=e1(f,s);j===0?(f.next=null,c===null?Ju=g:c.next=g,g===null&&(jl=c)):(c=f,(i!==0||(j&3)!==0)&&(ed=!0)),f=g}Vt!==0&&Vt!==5||$o(i),gi!==0&&(gi=0)}function e1(i,s){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,j=i.pendingLanes&-62914561;0<j;){var A=31-_r(j),D=1<<A,I=g[A];I===-1?((D&c)===0||(D&f)!==0)&&(g[A]=Z(D,s)):I<=s&&(i.expiredLanes|=D),j&=~D}if(s=ht,c=Ve,c=Fn(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===s&&(at===2||at===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&sa(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ui(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(f!==null&&sa(f),ep(c)){case 2:case 8:c=gr;break;case 32:c=Bn;break;case 268435456:c=nn;break;default:c=Bn}return f=t1.bind(null,i),c=rn(c,f),i.callbackPriority=s,i.callbackNode=c,s}return f!==null&&f!==null&&sa(f),i.callbackPriority=2,i.callbackNode=null,2}function t1(i,s){if(Vt!==0&&Vt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Zu()&&i.callbackNode!==c)return null;var f=Ve;return f=Fn(i,i===ht?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(qN(i,f,s),e1(i,ke()),i.callbackNode!=null&&i.callbackNode===c?t1.bind(null,i):null)}function r1(i,s){if(Zu())return null;qN(i,s,!0)}function TP(){VP(function(){(rt&6)!==0?rn(Nt,PP):JN()})}function $h(){if(gi===0){var i=sl;i===0&&(i=Is,Is<<=1,(Is&261888)===0&&(Is=256)),gi=i}return gi}function n1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ou(""+i)}function a1(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function qP(i,s,c,f,g){if(s==="submit"&&c&&c.stateNode===g){var j=n1((g[Dr]||null).action),A=f.submitter;A&&(s=(s=A[Dr]||null)?n1(s.formAction):A.getAttribute("formAction"),s!==null&&(j=s,A=null));var D=new fu("action","action",null,f,g);i.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(gi!==0){var I=A?a1(g,A):new FormData(g);sh(c,{pending:!0,data:I,method:g.method,action:j},null,I)}}else typeof j=="function"&&(D.preventDefault(),I=A?a1(g,A):new FormData(g),sh(c,{pending:!0,data:I,method:g.method,action:j},j,I))},currentTarget:g}]})}}for(var Bh=0;Bh<_p.length;Bh++){var Uh=_p[Bh],RP=Uh.toLowerCase(),LP=Uh[0].toUpperCase()+Uh.slice(1);En(RP,"on"+LP)}En(T0,"onAnimationEnd"),En(q0,"onAnimationIteration"),En(R0,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(eP,"onTransitionRun"),En(tP,"onTransitionStart"),En(rP,"onTransitionCancel"),En(L0,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function i1(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var j=void 0;if(s)for(var A=f.length-1;0<=A;A--){var D=f[A],I=D.instance,te=D.currentTarget;if(D=D.listener,I!==j&&g.isPropagationStopped())break e;j=D,g.currentTarget=te;try{j(g)}catch(ue){hu(ue)}g.currentTarget=null,j=I}else for(A=0;A<f.length;A++){if(D=f[A],I=D.instance,te=D.currentTarget,D=D.listener,I!==j&&g.isPropagationStopped())break e;j=D,g.currentTarget=te;try{j(g)}catch(ue){hu(ue)}g.currentTarget=null,j=I}}}}function He(i,s){var c=s[tp];c===void 0&&(c=s[tp]=new Set);var f=i+"__bubble";c.has(f)||(s1(s,i,2,!1),c.add(f))}function Fh(i,s,c){var f=0;s&&(f|=4),s1(c,i,f,s)}var td="_reactListening"+Math.random().toString(36).slice(2);function Gh(i){if(!i[td]){i[td]=!0,Jb.forEach(function(c){c!=="selectionchange"&&(IP.has(c)||Fh(c,!1,i),Fh(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[td]||(s[td]=!0,Fh("selectionchange",!1,s))}}function s1(i,s,c,f){switch(T1(s)){case 2:var g=mT;break;case 8:g=pT;break;default:g=iv}c=g.bind(null,s,c,i),g=void 0,!up||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(s,c,{capture:!0,passive:g}):i.addEventListener(s,c,!0):g!==void 0?i.addEventListener(s,c,{passive:g}):i.addEventListener(s,c,!1)}function Hh(i,s,c,f,g){var j=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var D=f.stateNode.containerInfo;if(D===g)break;if(A===4)for(A=f.return;A!==null;){var I=A.tag;if((I===3||I===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;D!==null;){if(A=Fs(D),A===null)return;if(I=A.tag,I===5||I===6||I===26||I===27){f=j=A;continue e}D=D.parentNode}}f=f.return}d0(function(){var te=j,ue=op(c),pe=[];e:{var ne=I0.get(i);if(ne!==void 0){var le=fu,Ne=i;switch(i){case"keypress":if(uu(c)===0)break e;case"keydown":case"keyup":le=Mk;break;case"focusin":Ne="focus",le=pp;break;case"focusout":Ne="blur",le=pp;break;case"beforeblur":case"afterblur":le=pp;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=bk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Tk;break;case T0:case q0:case R0:le=_k;break;case L0:le=Rk;break;case"scroll":case"scrollend":le=xk;break;case"wheel":le=Ik;break;case"copy":case"cut":case"paste":le=wk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=v0;break;case"toggle":case"beforetoggle":le=Bk}var Pe=(s&4)!==0,ut=!Pe&&(i==="scroll"||i==="scrollend"),X=Pe?ne!==null?ne+"Capture":null:ne;Pe=[];for(var G=te,ee;G!==null;){var fe=G;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||X===null||(fe=oo(G,X),fe!=null&&Pe.push(Uo(G,fe,ee))),ut)break;G=G.return}0<Pe.length&&(ne=new le(ne,Ne,null,c,ue),pe.push({event:ne,listeners:Pe}))}}if((s&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",ne&&c!==lp&&(Ne=c.relatedTarget||c.fromElement)&&(Fs(Ne)||Ne[Us]))break e;if((le||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(Ne=c.relatedTarget||c.toElement,le=te,Ne=Ne?Fs(Ne):null,Ne!==null&&(ut=o(Ne),Pe=Ne.tag,Ne!==ut||Pe!==5&&Pe!==27&&Pe!==6)&&(Ne=null)):(le=null,Ne=te),le!==Ne)){if(Pe=p0,fe="onMouseLeave",X="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=v0,fe="onPointerLeave",X="onPointerEnter",G="pointer"),ut=le==null?ne:lo(le),ee=Ne==null?ne:lo(Ne),ne=new Pe(fe,G+"leave",le,c,ue),ne.target=ut,ne.relatedTarget=ee,fe=null,Fs(ue)===te&&(Pe=new Pe(X,G+"enter",Ne,c,ue),Pe.target=ee,Pe.relatedTarget=ut,fe=Pe),ut=fe,le&&Ne)t:{for(Pe=$P,X=le,G=Ne,ee=0,fe=X;fe;fe=Pe(fe))ee++;fe=0;for(var Oe=G;Oe;Oe=Pe(Oe))fe++;for(;0<ee-fe;)X=Pe(X),ee--;for(;0<fe-ee;)G=Pe(G),fe--;for(;ee--;){if(X===G||G!==null&&X===G.alternate){Pe=X;break t}X=Pe(X),G=Pe(G)}Pe=null}else Pe=null;le!==null&&l1(pe,ne,le,Pe,!1),Ne!==null&&ut!==null&&l1(pe,ut,Ne,Pe,!0)}}e:{if(ne=te?lo(te):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var Ze=S0;else if(N0(ne))if(w0)Ze=Wk;else{Ze=Kk;var we=Yk}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&sp(te.elementType)&&(Ze=S0):Ze=Xk;if(Ze&&(Ze=Ze(i,te))){_0(pe,Ze,c,ue);break e}we&&we(i,ne,te),i==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&ip(ne,"number",ne.value)}switch(we=te?lo(te):window,i){case"focusin":(N0(we)||we.contentEditable==="true")&&(Zs=we,bp=te,go=null);break;case"focusout":go=bp=Zs=null;break;case"mousedown":jp=!0;break;case"contextmenu":case"mouseup":case"dragend":jp=!1,k0(pe,c,ue);break;case"selectionchange":if(Jk)break;case"keydown":case"keyup":k0(pe,c,ue)}var Ue;if(vp)e:{switch(i){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ws?b0(i,c)&&(Ye="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ye="onCompositionStart");Ye&&(g0&&c.locale!=="ko"&&(Ws||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ws&&(Ue=f0()):(ti=ue,dp="value"in ti?ti.value:ti.textContent,Ws=!0)),we=rd(te,Ye),0<we.length&&(Ye=new h0(Ye,i,null,c,ue),pe.push({event:Ye,listeners:we}),Ue?Ye.data=Ue:(Ue=j0(c),Ue!==null&&(Ye.data=Ue)))),(Ue=Fk?Gk(i,c):Hk(i,c))&&(Ye=rd(te,"onBeforeInput"),0<Ye.length&&(we=new h0("onBeforeInput","beforeinput",null,c,ue),pe.push({event:we,listeners:Ye}),we.data=Ue)),qP(pe,i,te,c,ue)}i1(pe,s)})}function Uo(i,s,c){return{instance:i,listener:s,currentTarget:c}}function rd(i,s){for(var c=s+"Capture",f=[];i!==null;){var g=i,j=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||j===null||(g=oo(i,c),g!=null&&f.unshift(Uo(i,g,j)),g=oo(i,s),g!=null&&f.push(Uo(i,g,j))),i.tag===3)return f;i=i.return}return[]}function $P(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function l1(i,s,c,f,g){for(var j=s._reactName,A=[];c!==null&&c!==f;){var D=c,I=D.alternate,te=D.stateNode;if(D=D.tag,I!==null&&I===f)break;D!==5&&D!==26&&D!==27||te===null||(I=te,g?(te=oo(c,j),te!=null&&A.unshift(Uo(c,te,I))):g||(te=oo(c,j),te!=null&&A.push(Uo(c,te,I)))),c=c.return}A.length!==0&&i.push({event:s,listeners:A})}var BP=/\r\n?/g,UP=/\u0000|\uFFFD/g;function o1(i){return(typeof i=="string"?i:""+i).replace(BP,`
`).replace(UP,"")}function c1(i,s){return s=o1(s),o1(i)===s}function ct(i,s,c,f,g,j){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Ys(i,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Ys(i,""+f);break;case"className":su(i,"class",f);break;case"tabIndex":su(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":su(i,c,f);break;case"style":c0(i,f,j);break;case"data":if(s!=="object"){su(i,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=ou(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(c==="formAction"?(s!=="input"&&ct(i,s,"name",g.name,g,null),ct(i,s,"formEncType",g.formEncType,g,null),ct(i,s,"formMethod",g.formMethod,g,null),ct(i,s,"formTarget",g.formTarget,g,null)):(ct(i,s,"encType",g.encType,g,null),ct(i,s,"method",g.method,g,null),ct(i,s,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=ou(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=ca);break;case"onScroll":f!=null&&He("scroll",i);break;case"onScrollEnd":f!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=ou(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":He("beforetoggle",i),He("toggle",i),iu(i,"popover",f);break;case"xlinkActuate":oa(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":oa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":oa(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":oa(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":oa(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":oa(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":oa(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":oa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":oa(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":iu(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=vk.get(c)||c,iu(i,c,f))}}function Qh(i,s,c,f,g,j){switch(c){case"style":c0(i,f,j);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Ys(i,f):(typeof f=="number"||typeof f=="bigint")&&Ys(i,""+f);break;case"onScroll":f!=null&&He("scroll",i);break;case"onScrollEnd":f!=null&&He("scrollend",i);break;case"onClick":f!=null&&(i.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!e0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),s=c.slice(2,g?c.length-7:void 0),j=i[Dr]||null,j=j!=null?j[c]:null,typeof j=="function"&&i.removeEventListener(s,j,g),typeof f=="function")){typeof j!="function"&&j!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,f,g);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):iu(i,c,f)}}}function fr(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var f=!1,g=!1,j;for(j in c)if(c.hasOwnProperty(j)){var A=c[j];if(A!=null)switch(j){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ct(i,s,j,A,c,null)}}g&&ct(i,s,"srcSet",c.srcSet,c,null),f&&ct(i,s,"src",c.src,c,null);return;case"input":He("invalid",i);var D=j=A=g=null,I=null,te=null;for(f in c)if(c.hasOwnProperty(f)){var ue=c[f];if(ue!=null)switch(f){case"name":g=ue;break;case"type":A=ue;break;case"checked":I=ue;break;case"defaultChecked":te=ue;break;case"value":j=ue;break;case"defaultValue":D=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,s));break;default:ct(i,s,f,ue,c,null)}}i0(i,j,D,I,te,A,g,!1);return;case"select":He("invalid",i),f=A=j=null;for(g in c)if(c.hasOwnProperty(g)&&(D=c[g],D!=null))switch(g){case"value":j=D;break;case"defaultValue":A=D;break;case"multiple":f=D;default:ct(i,s,g,D,c,null)}s=j,c=A,i.multiple=!!f,s!=null?Vs(i,!!f,s,!1):c!=null&&Vs(i,!!f,c,!0);return;case"textarea":He("invalid",i),j=g=f=null;for(A in c)if(c.hasOwnProperty(A)&&(D=c[A],D!=null))switch(A){case"value":f=D;break;case"defaultValue":g=D;break;case"children":j=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(a(91));break;default:ct(i,s,A,D,c,null)}l0(i,f,g,j);return;case"option":for(I in c)c.hasOwnProperty(I)&&(f=c[I],f!=null)&&(I==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":ct(i,s,I,f,c,null));return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(f=0;f<Bo.length;f++)He(Bo[f],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(f=c[te],f!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ct(i,s,te,f,c,null)}return;default:if(sp(s)){for(ue in c)c.hasOwnProperty(ue)&&(f=c[ue],f!==void 0&&Qh(i,s,ue,f,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(f=c[D],f!=null&&ct(i,s,D,f,c,null))}function FP(i,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,j=null,A=null,D=null,I=null,te=null,ue=null;for(le in c){var pe=c[le];if(c.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":I=pe;default:f.hasOwnProperty(le)||ct(i,s,le,null,f,pe)}}for(var ne in f){var le=f[ne];if(pe=c[ne],f.hasOwnProperty(ne)&&(le!=null||pe!=null))switch(ne){case"type":j=le;break;case"name":g=le;break;case"checked":te=le;break;case"defaultChecked":ue=le;break;case"value":A=le;break;case"defaultValue":D=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,s));break;default:le!==pe&&ct(i,s,ne,le,f,pe)}}ap(i,A,D,I,te,ue,j,g);return;case"select":le=A=D=ne=null;for(j in c)if(I=c[j],c.hasOwnProperty(j)&&I!=null)switch(j){case"value":break;case"multiple":le=I;default:f.hasOwnProperty(j)||ct(i,s,j,null,f,I)}for(g in f)if(j=f[g],I=c[g],f.hasOwnProperty(g)&&(j!=null||I!=null))switch(g){case"value":ne=j;break;case"defaultValue":D=j;break;case"multiple":A=j;default:j!==I&&ct(i,s,g,j,f,I)}s=D,c=A,f=le,ne!=null?Vs(i,!!c,ne,!1):!!f!=!!c&&(s!=null?Vs(i,!!c,s,!0):Vs(i,!!c,c?[]:"",!1));return;case"textarea":le=ne=null;for(D in c)if(g=c[D],c.hasOwnProperty(D)&&g!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:ct(i,s,D,null,f,g)}for(A in f)if(g=f[A],j=c[A],f.hasOwnProperty(A)&&(g!=null||j!=null))switch(A){case"value":ne=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==j&&ct(i,s,A,g,f,j)}s0(i,ne,le);return;case"option":for(var Ne in c)ne=c[Ne],c.hasOwnProperty(Ne)&&ne!=null&&!f.hasOwnProperty(Ne)&&(Ne==="selected"?i.selected=!1:ct(i,s,Ne,null,f,ne));for(I in f)ne=f[I],le=c[I],f.hasOwnProperty(I)&&ne!==le&&(ne!=null||le!=null)&&(I==="selected"?i.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":ct(i,s,I,ne,f,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in c)ne=c[Pe],c.hasOwnProperty(Pe)&&ne!=null&&!f.hasOwnProperty(Pe)&&ct(i,s,Pe,null,f,ne);for(te in f)if(ne=f[te],le=c[te],f.hasOwnProperty(te)&&ne!==le&&(ne!=null||le!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,s));break;default:ct(i,s,te,ne,f,le)}return;default:if(sp(s)){for(var ut in c)ne=c[ut],c.hasOwnProperty(ut)&&ne!==void 0&&!f.hasOwnProperty(ut)&&Qh(i,s,ut,void 0,f,ne);for(ue in f)ne=f[ue],le=c[ue],!f.hasOwnProperty(ue)||ne===le||ne===void 0&&le===void 0||Qh(i,s,ue,ne,f,le);return}}for(var X in c)ne=c[X],c.hasOwnProperty(X)&&ne!=null&&!f.hasOwnProperty(X)&&ct(i,s,X,null,f,ne);for(pe in f)ne=f[pe],le=c[pe],!f.hasOwnProperty(pe)||ne===le||ne==null&&le==null||ct(i,s,pe,ne,f,le)}function u1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GP(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var g=c[f],j=g.transferSize,A=g.initiatorType,D=g.duration;if(j&&D&&u1(A)){for(A=0,D=g.responseEnd,f+=1;f<c.length;f++){var I=c[f],te=I.startTime;if(te>D)break;var ue=I.transferSize,pe=I.initiatorType;ue&&u1(pe)&&(I=I.responseEnd,A+=ue*(I<D?1:(D-te)/(I-te)))}if(--f,s+=8*(j+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Vh=null,Yh=null;function nd(i){return i.nodeType===9?i:i.ownerDocument}function d1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f1(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Kh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xh=null;function HP(){var i=window.event;return i&&i.type==="popstate"?i===Xh?!1:(Xh=i,!0):(Xh=null,!1)}var m1=typeof setTimeout=="function"?setTimeout:void 0,QP=typeof clearTimeout=="function"?clearTimeout:void 0,p1=typeof Promise=="function"?Promise:void 0,VP=typeof queueMicrotask=="function"?queueMicrotask:typeof p1<"u"?function(i){return p1.resolve(null).then(i).catch(YP)}:m1;function YP(i){setTimeout(function(){throw i})}function xi(i){return i==="head"}function h1(i,s){var c=s,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(g),wl(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Fo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Fo(c);for(var j=c.firstChild;j;){var A=j.nextSibling,D=j.nodeName;j[so]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&j.rel.toLowerCase()==="stylesheet"||c.removeChild(j),j=A}}else c==="body"&&Fo(i.ownerDocument.body);c=g}while(c);wl(s)}function v1(i,s){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function Wh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Wh(c),rp(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function KP(i,s,c,f){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[so])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(j=i.getAttribute("rel"),j==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(j!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(j=i.getAttribute("src"),(j!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&j&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var j=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===j)return i}else return i;if(i=mn(i.nextSibling),i===null)break}return null}function XP(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=mn(i.nextSibling),i===null))return null;return i}function g1(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=mn(i.nextSibling),i===null))return null;return i}function Zh(i){return i.data==="$?"||i.data==="$~"}function Jh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function WP(i,s){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function mn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var ev=null;function x1(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(s===0)return mn(i.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}i=i.nextSibling}return null}function y1(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return i;s--}else c!=="/$"&&c!=="/&"||s++}i=i.previousSibling}return null}function b1(i,s,c){switch(s=nd(c),i){case"html":if(i=s.documentElement,!i)throw Error(a(452));return i;case"head":if(i=s.head,!i)throw Error(a(453));return i;case"body":if(i=s.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function Fo(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);rp(i)}var pn=new Map,j1=new Set;function ad(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wa=J.d;J.d={f:ZP,r:JP,D:eT,C:tT,L:rT,m:nT,X:iT,S:aT,M:sT};function ZP(){var i=wa.f(),s=Ku();return i||s}function JP(i){var s=Gs(i);s!==null&&s.tag===5&&s.type==="form"?Lj(s):wa.r(i)}var Nl=typeof document>"u"?null:document;function N1(i,s,c){var f=Nl;if(f&&typeof s=="string"&&s){var g=sn(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),j1.has(g)||(j1.add(g),i={rel:i,crossOrigin:c,href:s},f.querySelector(g)===null&&(s=f.createElement("link"),fr(s,"link",i),Wt(s),f.head.appendChild(s)))}}function eT(i){wa.D(i),N1("dns-prefetch",i,null)}function tT(i,s){wa.C(i,s),N1("preconnect",i,s)}function rT(i,s,c){wa.L(i,s,c);var f=Nl;if(f&&i&&s){var g='link[rel="preload"][as="'+sn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+sn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+sn(c.imageSizes)+'"]')):g+='[href="'+sn(i)+'"]';var j=g;switch(s){case"style":j=_l(i);break;case"script":j=Sl(i)}pn.has(j)||(i=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),pn.set(j,i),f.querySelector(g)!==null||s==="style"&&f.querySelector(Go(j))||s==="script"&&f.querySelector(Ho(j))||(s=f.createElement("link"),fr(s,"link",i),Wt(s),f.head.appendChild(s)))}}function nT(i,s){wa.m(i,s);var c=Nl;if(c&&i){var f=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+sn(f)+'"][href="'+sn(i)+'"]',j=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=Sl(i)}if(!pn.has(j)&&(i=v({rel:"modulepreload",href:i},s),pn.set(j,i),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Ho(j)))return}f=c.createElement("link"),fr(f,"link",i),Wt(f),c.head.appendChild(f)}}}function aT(i,s,c){wa.S(i,s,c);var f=Nl;if(f&&i){var g=Hs(f).hoistableStyles,j=_l(i);s=s||"default";var A=g.get(j);if(!A){var D={loading:0,preload:null};if(A=f.querySelector(Go(j)))D.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},c),(c=pn.get(j))&&tv(i,c);var I=A=f.createElement("link");Wt(I),fr(I,"link",i),I._p=new Promise(function(te,ue){I.onload=te,I.onerror=ue}),I.addEventListener("load",function(){D.loading|=1}),I.addEventListener("error",function(){D.loading|=2}),D.loading|=4,id(A,s,f)}A={type:"stylesheet",instance:A,count:1,state:D},g.set(j,A)}}}function iT(i,s){wa.X(i,s);var c=Nl;if(c&&i){var f=Hs(c).hoistableScripts,g=Sl(i),j=f.get(g);j||(j=c.querySelector(Ho(g)),j||(i=v({src:i,async:!0},s),(s=pn.get(g))&&rv(i,s),j=c.createElement("script"),Wt(j),fr(j,"link",i),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},f.set(g,j))}}function sT(i,s){wa.M(i,s);var c=Nl;if(c&&i){var f=Hs(c).hoistableScripts,g=Sl(i),j=f.get(g);j||(j=c.querySelector(Ho(g)),j||(i=v({src:i,async:!0,type:"module"},s),(s=pn.get(g))&&rv(i,s),j=c.createElement("script"),Wt(j),fr(j,"link",i),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},f.set(g,j))}}function _1(i,s,c,f){var g=(g=F.current)?ad(g):null;if(!g)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=_l(c.href),c=Hs(g).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=_l(c.href);var j=Hs(g).hoistableStyles,A=j.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(i,A),(j=g.querySelector(Go(i)))&&!j._p&&(A.instance=j,A.state.loading=5),pn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},pn.set(i,c),j||lT(g,i,c,A.state))),s&&f===null)throw Error(a(528,""));return A}if(s&&f!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sl(c),c=Hs(g).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function _l(i){return'href="'+sn(i)+'"'}function Go(i){return'link[rel="stylesheet"]['+i+"]"}function S1(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function lT(i,s,c,f){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=i.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),fr(s,"link",c),Wt(s),i.head.appendChild(s))}function Sl(i){return'[src="'+sn(i)+'"]'}function Ho(i){return"script[async]"+i}function w1(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=i.querySelector('style[data-href~="'+sn(c.href)+'"]');if(f)return s.instance=f,Wt(f),f;var g=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Wt(f),fr(f,"style",g),id(f,c.precedence,i),s.instance=f;case"stylesheet":g=_l(c.href);var j=i.querySelector(Go(g));if(j)return s.state.loading|=4,s.instance=j,Wt(j),j;f=S1(c),(g=pn.get(g))&&tv(f,g),j=(i.ownerDocument||i).createElement("link"),Wt(j);var A=j;return A._p=new Promise(function(D,I){A.onload=D,A.onerror=I}),fr(j,"link",f),s.state.loading|=4,id(j,c.precedence,i),s.instance=j;case"script":return j=Sl(c.src),(g=i.querySelector(Ho(j)))?(s.instance=g,Wt(g),g):(f=c,(g=pn.get(j))&&(f=v({},c),rv(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),Wt(g),fr(g,"link",f),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,id(f,c.precedence,i));return s.instance}function id(i,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,j=g,A=0;A<f.length;A++){var D=f[A];if(D.dataset.precedence===s)j=D;else if(j!==g)break}j?j.parentNode.insertBefore(i,j.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function tv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function rv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var sd=null;function C1(i,s,c){if(sd===null){var f=new Map,g=sd=new Map;g.set(c,f)}else g=sd,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var j=c[g];if(!(j[so]||j[or]||i==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var A=j.getAttribute(s)||"";A=i+A;var D=f.get(A);D?D.push(j):f.set(A,[j])}}return f}function A1(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function oT(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function E1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function cT(i,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=_l(f.href),j=s.querySelector(Go(g));if(j){s=j._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=ld.bind(i),s.then(i,i)),c.state.loading|=4,c.instance=j,Wt(j);return}j=s.ownerDocument||s,f=S1(f),(g=pn.get(g))&&tv(f,g),j=j.createElement("link"),Wt(j);var A=j;A._p=new Promise(function(D,I){A.onload=D,A.onerror=I}),fr(j,"link",f),c.instance=j}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=ld.bind(i),s.addEventListener("load",c),s.addEventListener("error",c))}}var nv=0;function uT(i,s){return i.stylesheets&&i.count===0&&cd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&cd(i,i.stylesheets),i.unsuspend){var j=i.unsuspend;i.unsuspend=null,j()}},6e4+s);0<i.imgBytes&&nv===0&&(nv=62500*GP());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&cd(i,i.stylesheets),i.unsuspend)){var j=i.unsuspend;i.unsuspend=null,j()}},(i.imgBytes>nv?50:800)+s);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function ld(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var od=null;function cd(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,od=new Map,s.forEach(dT,i),od=null,ld.call(i))}function dT(i,s){if(!(s.state.loading&4)){var c=od.get(i);if(c)var f=c.get(null);else{c=new Map,od.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<g.length;j++){var A=g[j];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),f=A)}f&&c.set(null,f)}g=s.instance,A=g.getAttribute("data-precedence"),j=c.get(A)||f,j===f&&c.set(null,g),c.set(A,g),this.count++,f=ld.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),j?j.parentNode.insertBefore(g,j.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var Qo={$$typeof:w,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function fT(i,s,c,f,g,j,A,D,I){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.hiddenUpdates=pt(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=j,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function z1(i,s,c,f,g,j,A,D,I,te,ue,pe){return i=new fT(i,s,c,A,I,te,ue,pe,D),s=1,j===!0&&(s|=24),j=Hr(3,null,null,s),i.current=j,j.stateNode=i,s=qp(),s.refCount++,i.pooledCache=s,s.refCount++,j.memoizedState={element:f,isDehydrated:c,cache:s},$p(j),i}function O1(i){return i?(i=tl,i):tl}function D1(i,s,c,f,g,j){g=O1(g),f.context===null?f.context=g:f.pendingContext=g,f=li(s),f.payload={element:c},j=j===void 0?null:j,j!==null&&(f.callback=j),c=oi(i,f,s),c!==null&&(Rr(c,i,s),So(c,i,s))}function M1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function av(i,s){M1(i,s),(i=i.alternate)&&M1(i,s)}function k1(i){if(i.tag===13||i.tag===31){var s=Yi(i,67108864);s!==null&&Rr(s,i,67108864),av(i,67108864)}}function P1(i){if(i.tag===13||i.tag===31){var s=Xr();s=Jm(s);var c=Yi(i,s);c!==null&&Rr(c,i,s),av(i,s)}}var ud=!0;function mT(i,s,c,f){var g=R.T;R.T=null;var j=J.p;try{J.p=2,iv(i,s,c,f)}finally{J.p=j,R.T=g}}function pT(i,s,c,f){var g=R.T;R.T=null;var j=J.p;try{J.p=8,iv(i,s,c,f)}finally{J.p=j,R.T=g}}function iv(i,s,c,f){if(ud){var g=sv(f);if(g===null)Hh(i,s,f,dd,c),q1(i,f);else if(vT(g,i,s,c,f))f.stopPropagation();else if(q1(i,f),s&4&&-1<hT.indexOf(i)){for(;g!==null;){var j=Gs(g);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var A=la(j.pendingLanes);if(A!==0){var D=j;for(D.pendingLanes|=2,D.entangledLanes|=2;A;){var I=1<<31-_r(A);D.entanglements[1]|=I,A&=~I}Vn(j),(rt&6)===0&&(Vu=ke()+500,$o(0))}}break;case 31:case 13:D=Yi(j,2),D!==null&&Rr(D,j,2),Ku(),av(j,2)}if(j=sv(f),j===null&&Hh(i,s,f,dd,c),j===g)break;g=j}g!==null&&f.stopPropagation()}else Hh(i,s,f,null,c)}}function sv(i){return i=op(i),lv(i)}var dd=null;function lv(i){if(dd=null,i=Fs(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=u(s),i!==null)return i;i=null}else if(c===31){if(i=d(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return dd=i,null}function T1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case Nt:return 2;case gr:return 8;case Bn:case Ls:return 32;case nn:return 268435456;default:return 32}default:return 32}}var ov=!1,yi=null,bi=null,ji=null,Vo=new Map,Yo=new Map,Ni=[],hT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q1(i,s){switch(i){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Vo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(s.pointerId)}}function Ko(i,s,c,f,g,j){return i===null||i.nativeEvent!==j?(i={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:j,targetContainers:[g]},s!==null&&(s=Gs(s),s!==null&&k1(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function vT(i,s,c,f,g){switch(s){case"focusin":return yi=Ko(yi,i,s,c,f,g),!0;case"dragenter":return bi=Ko(bi,i,s,c,f,g),!0;case"mouseover":return ji=Ko(ji,i,s,c,f,g),!0;case"pointerover":var j=g.pointerId;return Vo.set(j,Ko(Vo.get(j)||null,i,s,c,f,g)),!0;case"gotpointercapture":return j=g.pointerId,Yo.set(j,Ko(Yo.get(j)||null,i,s,c,f,g)),!0}return!1}function R1(i){var s=Fs(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){i.blockedOn=s,Wb(i.priority,function(){P1(c)});return}}else if(s===31){if(s=d(c),s!==null){i.blockedOn=s,Wb(i.priority,function(){P1(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function fd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=sv(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);lp=f,c.target.dispatchEvent(f),lp=null}else return s=Gs(c),s!==null&&k1(s),i.blockedOn=c,!1;s.shift()}return!0}function L1(i,s,c){fd(i)&&c.delete(s)}function gT(){ov=!1,yi!==null&&fd(yi)&&(yi=null),bi!==null&&fd(bi)&&(bi=null),ji!==null&&fd(ji)&&(ji=null),Vo.forEach(L1),Yo.forEach(L1)}function md(i,s){i.blockedOn===s&&(i.blockedOn=null,ov||(ov=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gT)))}var pd=null;function I1(i){pd!==i&&(pd=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){pd===i&&(pd=null);for(var s=0;s<i.length;s+=3){var c=i[s],f=i[s+1],g=i[s+2];if(typeof f!="function"){if(lv(f||c)===null)continue;break}var j=Gs(c);j!==null&&(i.splice(s,3),s-=3,sh(j,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function wl(i){function s(I){return md(I,i)}yi!==null&&md(yi,i),bi!==null&&md(bi,i),ji!==null&&md(ji,i),Vo.forEach(s),Yo.forEach(s);for(var c=0;c<Ni.length;c++){var f=Ni[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Ni.length&&(c=Ni[0],c.blockedOn===null);)R1(c),c.blockedOn===null&&Ni.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],j=c[f+1],A=g[Dr]||null;if(typeof j=="function")A||I1(c);else if(A){var D=null;if(j&&j.hasAttribute("formAction")){if(g=j,A=j[Dr]||null)D=A.formAction;else if(lv(g)!==null)continue}else D=A.action;typeof D=="function"?c[f+1]=D:(c.splice(f,3),f-=3),I1(c)}}}function $1(){function i(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function cv(i){this._internalRoot=i}hd.prototype.render=cv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,f=Xr();D1(c,f,i,s,null,null)},hd.prototype.unmount=cv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;D1(i.current,2,null,i,null,null),Ku(),s[Us]=null}};function hd(i){this._internalRoot=i}hd.prototype.unstable_scheduleHydration=function(i){if(i){var s=Xb();i={blockedOn:null,target:i,priority:s};for(var c=0;c<Ni.length&&s!==0&&s<Ni[c].priority;c++);Ni.splice(c,0,i),c===0&&R1(i)}};var B1=t.version;if(B1!=="19.2.4")throw Error(a(527,B1,"19.2.4"));J.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=p(s),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var xT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{xr=vd.inject(xT),xt=vd}catch{}}return Wo.createRoot=function(i,s){if(!l(i))throw Error(a(299));var c=!1,f="",g=Yj,j=Kj,A=Xj;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(j=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=z1(i,1,!1,null,null,c,f,null,g,j,A,$1),i[Us]=s.current,Gh(i),new cv(s)},Wo.hydrateRoot=function(i,s,c){if(!l(i))throw Error(a(299));var f=!1,g="",j=Yj,A=Kj,D=Xj,I=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(j=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(I=c.formState)),s=z1(i,1,!0,s,c??null,f,g,I,j,A,D,$1),s.context=O1(null),c=s.current,f=Xr(),f=Jm(f),g=li(f),g.callback=null,oi(c,g,f),c=f,s.current.lanes=c,yr(s,c),Vn(s),i[Us]=s.current,Gh(i),new hd(s)},Wo.version="19.2.4",Wo}var W1;function xq(){if(W1)return pv.exports;W1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pv.exports=gq(),pv.exports}var yq=xq();const bq=Fa(yq),jq={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},dy=wT(jq),gd=CT(dy),oe=AT(dy,{localCache:ET({tabManager:OT()})}),Ur=zT(dy),Z1={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},J1=e=>Z1[e]||Z1.default,_A=b.createContext(null),Nq=({children:e})=>{const[t,r]=b.useState(null),[a,l]=b.useState(!0),o=async y=>{try{const x=await Gt(be(oe,"users",y));if(x.exists()){const _=x.data();return{uid:y,email:_.email,displayName:_.displayName,role:_.role,isPremium:_.isPremium||!1,subscriptionEnd:_.subscriptionEnd?.toDate()||null,photoURL:_.photoURL,createdAt:_.createdAt?.toDate()||new Date,lastLogin:_.lastLogin?.toDate()}}return null}catch(x){return console.error("Erreur lors de la rcupration des donnes utilisateur:",x),null}},u=async(y,x)=>{const _=be(oe,"users",y.uid);(await Gt(_)).exists()?await et(_,{lastLogin:ft()}):await Zf(_,{email:y.email,displayName:y.displayName||x?.displayName||"",role:x?.role||"eleve",isPremium:!1,photoURL:y.photoURL,createdAt:ft(),lastLogin:ft()})},d=async(y,x)=>{try{const _=await TT(gd,y,x);await u(_.user)}catch(_){throw new Error(J1(_.code))}},m=async y=>{try{if(y.password!==y.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const x=await kT(gd,y.email,y.password);await PT(x.user,{displayName:y.displayName}),await u(x.user,{displayName:y.displayName,role:y.role})}catch(x){throw x.message?x:new Error(J1(x.code))}},p=async()=>{try{await MT(gd),r(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},h=async y=>{if(!t)throw new Error("Aucun utilisateur connect.");try{const x=be(oe,"users",t.uid);await et(x,{...y,updatedAt:ft()}),r(_=>_?{..._,...y}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};b.useEffect(()=>{const y=DT(gd,async x=>{if(x){const _=await o(x.uid);r(_)}else r(null);l(!1)});return()=>y()},[]);const v={currentUser:t,loading:a,login:d,register:m,logout:p,updateProfile:h};return n.jsx(_A.Provider,{value:v,children:a?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement..."})]}):e})},Ct=()=>{const e=b.useContext(_A);if(!e)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return e},Wd=({children:e,allowedRoles:t,requirePremium:r=!1})=>{const{currentUser:a,loading:l}=Ct();return l?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Vrification des autorisations..."})]}):a?t&&!t.includes(a.role)?n.jsxs("div",{className:"error-container",children:[n.jsx("h2",{children:"Accs non autoris"}),n.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),n.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):r&&!a.isPremium?n.jsxs("div",{className:"error-container premium-required",children:[n.jsx("h2",{children:"Contenu Premium"}),n.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),n.jsxs("div",{className:"premium-cta",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",n.jsx("strong",{children:"20 000 FCFA/an"})]}),n.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):n.jsx(n.Fragment,{children:e}):n.jsxs("div",{className:"error-container",children:[n.jsx("h2",{children:"Accs refus"}),n.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),n.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},hn=({children:e})=>n.jsx(Wd,{allowedRoles:["admin"],children:e}),Zo=({children:e})=>n.jsx(Wd,{allowedRoles:["admin","prof"],children:e}),_q=()=>{const{currentUser:e,logout:t,loading:r}=Ct(),a=Ht(),l=Wf(),[o,u]=b.useState(!1),[d,m]=b.useState(!1),[p,h]=b.useState(!1),v=b.useRef(null),y=[{path:"/",label:"Accueil",icon:n.jsx(nx,{size:18})},{path:"/disciplines",label:"Disciplines",icon:n.jsx(jn,{size:18})},{path:"/ebooks",label:"Bibliothque",icon:n.jsx(jn,{size:18})},{path:"/quiz",label:"Quiz",icon:n.jsx(Il,{size:18}),requireAuth:!0,requirePremium:!0},{path:e?.role==="eleve"?"/eleve/dashboard":e?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:n.jsx(F1,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:n.jsx(LT,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:n.jsx(xs,{size:18}),requireAuth:!0,requireRole:["parent"]}];b.useEffect(()=>{const E=O=>{v.current&&!v.current.contains(O.target)&&m(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),b.useEffect(()=>{u(!1),m(!1)},[l.pathname]),b.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const x=async()=>{try{h(!0),await t(),m(!1),a("/")}catch(E){console.error("Erreur lors de la dconnexion:",E)}finally{h(!1)}},_=()=>{u(!o)},N=()=>{m(!d)},S=E=>!(E.requireAuth&&!e||E.requirePremium&&e&&!e.isPremium||E.requireRole&&e&&!E.requireRole.includes(e.role)),C=E=>E==="/"?l.pathname==="/":l.pathname.startsWith(E),z=E=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[E]||E,w=()=>e?e.displayName?e.displayName.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase():"?";return n.jsxs("header",{className:"header",children:[n.jsxs("div",{className:"header__container",children:[n.jsxs(Re,{to:"/",className:"header__logo",children:[n.jsx(Il,{className:"header__logo-icon",size:32}),n.jsxs("div",{className:"header__logo-text",children:[n.jsx("span",{className:"header__logo-name",children:"PedaClic"}),n.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),n.jsx("nav",{className:"header__nav header__nav--desktop",children:n.jsx("ul",{className:"header__nav-list",children:y.map(E=>S(E)&&n.jsx("li",{className:"header__nav-item",children:n.jsxs(Re,{to:E.path,className:`header__nav-link ${C(E.path)?"header__nav-link--active":""}`,children:[E.icon,n.jsx("span",{children:E.label}),E.requirePremium&&n.jsx(uc,{size:14,className:"header__premium-badge"})]})},E.path))})}),n.jsxs("div",{className:"header__actions",children:[r?n.jsx("div",{className:"header__loading",children:n.jsx("div",{className:"header__spinner"})}):e?n.jsxs("div",{className:"header__user",ref:v,children:[e.isPremium&&n.jsxs("span",{className:"header__premium-tag",children:[n.jsx(uc,{size:14}),"Premium"]}),n.jsxs("button",{className:"header__user-button",onClick:N,"aria-expanded":d,"aria-haspopup":"true",children:[n.jsx("div",{className:"header__avatar",children:e.photoURL?n.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):n.jsx("span",{className:"header__avatar-initials",children:w()})}),n.jsx("span",{className:"header__user-name",children:e.displayName||e.email.split("@")[0]}),n.jsx(Kd,{size:16,className:`header__chevron ${d?"header__chevron--open":""}`})]}),d&&n.jsxs("div",{className:"header__dropdown",children:[n.jsxs("div",{className:"header__dropdown-header",children:[n.jsx("p",{className:"header__dropdown-email",children:e.email}),n.jsx("span",{className:`header__dropdown-role header__dropdown-role--${e.role}`,children:z(e.role)})]}),n.jsx("div",{className:"header__dropdown-divider"}),n.jsxs("nav",{className:"header__dropdown-nav",children:[n.jsxs(Re,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[n.jsx(F1,{size:18}),n.jsx("span",{children:"Tableau de bord"})]}),e.role==="eleve"&&n.jsxs(Re,{to:"/eleve/suivi",className:"header__dropdown-link",children:[n.jsx(xs,{size:18}),n.jsx("span",{children:"Mes points  amliorer"})]}),e.role==="parent"&&n.jsxs(Re,{to:"/parent/dashboard",className:"header__dropdown-link",children:[n.jsx(xs,{size:18}),n.jsx("span",{children:"Espace Parent"})]}),n.jsxs(Re,{to:"/profil",className:"header__dropdown-link",children:[n.jsx(IT,{size:18}),n.jsx("span",{children:"Mon profil"})]}),e.role==="admin"&&n.jsxs(Re,{to:"/admin",className:"header__dropdown-link",children:[n.jsx($T,{size:18}),n.jsx("span",{children:"Administration"})]}),!e.isPremium&&n.jsxs(Re,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[n.jsx(uc,{size:18}),n.jsx("span",{children:"Passer Premium"})]})]}),n.jsx("div",{className:"header__dropdown-divider"}),n.jsxs("button",{className:"header__dropdown-logout",onClick:x,disabled:p,children:[n.jsx(G1,{size:18}),n.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]}):n.jsxs("div",{className:"header__auth-buttons",children:[n.jsx(Re,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),n.jsx(Re,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),n.jsx("button",{className:"header__mobile-toggle",onClick:_,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?n.jsx(Oi,{size:24}):n.jsx(BT,{size:24})})]})]}),n.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[n.jsx("div",{className:"header__mobile-overlay",onClick:()=>u(!1)}),n.jsxs("div",{className:"header__mobile-content",children:[n.jsx("nav",{className:"header__mobile-nav",children:n.jsx("ul",{className:"header__mobile-list",children:y.map(E=>S(E)&&n.jsx("li",{className:"header__mobile-item",children:n.jsxs(Re,{to:E.path,className:`header__mobile-link ${C(E.path)?"header__mobile-link--active":""}`,children:[E.icon,n.jsx("span",{children:E.label}),E.requirePremium&&n.jsx(uc,{size:14,className:"header__premium-badge"})]})},E.path))})}),!e&&n.jsxs("div",{className:"header__mobile-auth",children:[n.jsx(Re,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),n.jsx(Re,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),e&&n.jsxs("div",{className:"header__mobile-user",children:[n.jsxs("div",{className:"header__mobile-user-info",children:[n.jsx("div",{className:"header__avatar header__avatar--large",children:e.photoURL?n.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):n.jsx("span",{className:"header__avatar-initials",children:w()})}),n.jsxs("div",{className:"header__mobile-user-details",children:[n.jsx("p",{className:"header__mobile-user-name",children:e.displayName||e.email.split("@")[0]}),n.jsx("p",{className:"header__mobile-user-email",children:e.email})]})]}),n.jsxs("button",{className:"header__mobile-logout",onClick:x,disabled:p,children:[n.jsx(G1,{size:18}),n.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},Sq=()=>{const e=new Date().getFullYear(),t=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],r=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],a=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:n.jsx(VT,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:n.jsx(YT,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:n.jsx(KT,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:n.jsx(XT,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:n.jsx(WT,{size:20})}];return n.jsxs("footer",{className:"footer",children:[n.jsx("div",{className:"footer__main",children:n.jsxs("div",{className:"footer__container",children:[n.jsxs("div",{className:"footer__column footer__column--about",children:[n.jsxs(Re,{to:"/",className:"footer__logo",children:[n.jsx(Il,{className:"footer__logo-icon",size:36}),n.jsxs("div",{className:"footer__logo-text",children:[n.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),n.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),n.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),n.jsxs("div",{className:"footer__stats",children:[n.jsxs("div",{className:"footer__stat",children:[n.jsx(jn,{size:18}),n.jsx("span",{children:"500+ cours"})]}),n.jsxs("div",{className:"footer__stat",children:[n.jsx(Bd,{size:18}),n.jsx("span",{children:"10 000+ lves"})]})]})]}),n.jsxs("div",{className:"footer__column",children:[n.jsxs("h3",{className:"footer__title",children:[n.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),n.jsx("nav",{className:"footer__nav",children:n.jsx("ul",{className:"footer__list",children:t.map((l,o)=>n.jsx("li",{className:"footer__item",children:n.jsx(Re,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),n.jsxs("div",{className:"footer__column",children:[n.jsxs("h3",{className:"footer__title",children:[n.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),n.jsx("nav",{className:"footer__nav",children:n.jsx("ul",{className:"footer__list",children:r.map((l,o)=>n.jsx("li",{className:"footer__item",children:n.jsx(Re,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),n.jsxs("div",{className:"footer__column",children:[n.jsxs("h3",{className:"footer__title",children:[n.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),n.jsxs("div",{className:"footer__contact",children:[n.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[n.jsx(UT,{size:16,className:"footer__contact-icon"}),n.jsx("span",{children:"contact@pedaclic.sn"})]}),n.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[n.jsx(FT,{size:16,className:"footer__contact-icon"}),n.jsx("span",{children:"+221 77 000 00 00"})]}),n.jsxs("div",{className:"footer__contact-item",children:[n.jsx(GT,{size:16,className:"footer__contact-icon"}),n.jsx("span",{children:"Dakar, Sngal"})]})]}),n.jsxs("div",{className:"footer__social",children:[n.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),n.jsx("div",{className:"footer__social-links",children:a.map((l,o)=>n.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:l.name,children:l.icon},o))})]})]})]})}),n.jsx("div",{className:"footer__bottom",children:n.jsxs("div",{className:"footer__container footer__bottom-content",children:[n.jsxs("p",{className:"footer__copyright",children:[" ",e," PedaClic. Tous droits rservs."]}),n.jsxs("p",{className:"footer__made-with",children:["Fait avec ",n.jsx(HT,{size:14,className:"footer__heart"})," au Sngal "]}),n.jsxs("nav",{className:"footer__legal",children:[n.jsxs(Re,{to:"/mentions-legales",className:"footer__legal-link",children:[n.jsx(QT,{size:14})," Mentions lgales"]}),n.jsxs(Re,{to:"/confidentialite",className:"footer__legal-link",children:[n.jsx(cy,{size:14})," Confidentialit"]}),n.jsxs(Re,{to:"/aide",className:"footer__legal-link",children:[n.jsx(Ud,{size:14})," Aide"]})]})]})})]})},mr=({children:e,hideHeader:t=!1,hideFooter:r=!1,className:a=""})=>n.jsxs("div",{className:"layout",children:[!t&&n.jsx(_q,{}),n.jsx("main",{className:`layout__main ${t?"":"layout__main--with-header"} ${a}`,children:e}),!r&&n.jsx(Sq,{})]}),wq=()=>{const{currentUser:e}=Ct();return n.jsxs("div",{className:"home-page",children:[n.jsxs("section",{className:"home-page__hero",children:[n.jsxs("div",{className:"home-page__hero-content",children:[n.jsxs("div",{className:"home-page__hero-badge",children:[n.jsx(Zr,{size:14}),n.jsx("span",{children:"Plateforme N1 au Sngal"})]}),n.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",n.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),n.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),n.jsx("div",{className:"home-page__hero-cta",children:e?n.jsxs(Re,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",n.jsx(cs,{size:20})]}):n.jsxs(n.Fragment,{children:[n.jsxs(Re,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",n.jsx(cs,{size:20})]}),n.jsxs(Re,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[n.jsx(gc,{size:18}),"Dcouvrir les cours"]})]})}),n.jsxs("div",{className:"home-page__hero-stats",children:[n.jsxs("div",{className:"home-page__hero-stat",children:[n.jsx("strong",{children:"10 000+"}),n.jsx("span",{children:"lves inscrits"})]}),n.jsxs("div",{className:"home-page__hero-stat",children:[n.jsx("strong",{children:"500+"}),n.jsx("span",{children:"Cours disponibles"})]}),n.jsxs("div",{className:"home-page__hero-stat",children:[n.jsx("strong",{children:"95%"}),n.jsx("span",{children:"Taux de russite"})]})]})]}),n.jsx("div",{className:"home-page__hero-image",children:n.jsxs("div",{className:"home-page__hero-illustration",children:[n.jsx(Il,{size:120}),n.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),n.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),n.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),n.jsx("section",{className:"home-page__levels",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),n.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),n.jsxs("div",{className:"home-page__levels-grid",children:[n.jsxs(Re,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[n.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),n.jsx("h3",{children:"Collge"}),n.jsx("p",{children:"6me  3me"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Prparation au BFEM"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," 9 matires disponibles"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Exercices corrigs"]})]}),n.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",n.jsx(cs,{size:16})]})]}),n.jsxs(Re,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[n.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),n.jsx("h3",{children:"Lyce"}),n.jsx("p",{children:"2nde  Terminale"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Prparation au BAC"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," 12 matires disponibles"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Annales d'examens"]})]}),n.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",n.jsx(cs,{size:16})]})]})]})]})}),n.jsx("section",{className:"home-page__features",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),n.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),n.jsxs("div",{className:"home-page__features-grid",children:[n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon",children:n.jsx(jn,{size:28})}),n.jsx("h3",{children:"Cours complets"}),n.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:n.jsx(bA,{size:28})}),n.jsx("h3",{children:"Quiz interactifs"}),n.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:n.jsx(jA,{size:28})}),n.jsx("h3",{children:"Suivi de progression"}),n.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:n.jsx(cy,{size:28})}),n.jsx("h3",{children:"Contenu vrifi"}),n.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:n.jsx($l,{size:28})}),n.jsx("h3",{children:"Accessible 24/7"}),n.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:n.jsx(qi,{size:28})}),n.jsx("h3",{children:"Certificats"}),n.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),n.jsx("section",{className:"home-page__premium",children:n.jsx("div",{className:"home-page__container",children:n.jsxs("div",{className:"home-page__premium-content",children:[n.jsxs("div",{className:"home-page__premium-text",children:[n.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),n.jsx("h2",{children:"Passez  la vitesse suprieure"}),n.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",n.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),n.jsxs("ul",{className:"home-page__premium-features",children:[n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Quiz illimits dans toutes les matires"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Corrections dtailles des exercices"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Annales des examens (BFEM, BAC)"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Support prioritaire"]})]}),n.jsxs(Re,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",n.jsx(cs,{size:20})]})]}),n.jsx("div",{className:"home-page__premium-pricing",children:n.jsxs("div",{className:"home-page__pricing-card",children:[n.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),n.jsx("h3",{children:"Abonnement Annuel"}),n.jsxs("div",{className:"home-page__pricing-price",children:[n.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),n.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),n.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),n.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),n.jsx(Re,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),n.jsx("section",{className:"home-page__testimonials",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),n.jsxs("div",{className:"home-page__testimonials-grid",children:[n.jsxs("div",{className:"home-page__testimonial-card",children:[n.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>n.jsx(Zr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),n.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),n.jsxs("div",{className:"home-page__testimonial-author",children:[n.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),n.jsxs("div",{children:[n.jsx("strong",{children:"Fatou Adara"}),n.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),n.jsxs("div",{className:"home-page__testimonial-card",children:[n.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>n.jsx(Zr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),n.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),n.jsxs("div",{className:"home-page__testimonial-author",children:[n.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),n.jsxs("div",{children:[n.jsx("strong",{children:"Moussa Diallo"}),n.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),n.jsxs("div",{className:"home-page__testimonial-card",children:[n.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>n.jsx(Zr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),n.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),n.jsxs("div",{className:"home-page__testimonial-author",children:[n.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),n.jsxs("div",{children:[n.jsx("strong",{children:"Aminata Ndiaye"}),n.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),n.jsx("section",{className:"home-page__final-cta",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{children:"Prt  russir ?"}),n.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!e&&n.jsxs(Re,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",n.jsx(cs,{size:24})]})]})})]})},Cq=()=>{const{login:e}=Ct(),t=Ht(),a=Wf().state?.from||"/",[l,o]=b.useState({email:"",password:""}),[u,d]=b.useState(!1),[m,p]=b.useState(""),[h,v]=b.useState(!1),y=N=>{const{name:S,value:C}=N.target;o(z=>({...z,[S]:C})),m&&p("")},x=()=>l.email.trim()?l.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)?!0:(p("Veuillez entrer une adresse email valide."),!1):(p("Veuillez entrer votre mot de passe."),!1):(p("Veuillez entrer votre adresse email."),!1),_=async N=>{if(N.preventDefault(),!!x()){d(!0),p("");try{await e(l.email,l.password),t(a,{replace:!0})}catch(S){S instanceof Error?p(S.message):p("Une erreur est survenue lors de la connexion.")}finally{d(!1)}}};return n.jsx("div",{className:"auth-page",children:n.jsxs("div",{className:"auth-container",children:[n.jsxs("div",{className:"auth-card",children:[n.jsxs("div",{className:"auth-header",children:[n.jsxs(Re,{to:"/",className:"auth-logo",children:[n.jsx("div",{className:"auth-logo__icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),n.jsx("span",{children:"PedaClic"})]}),n.jsx("h1",{className:"auth-title",children:"Connexion"}),n.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),m&&n.jsxs("div",{className:"auth-error",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 8v4M12 16h.01"})]}),n.jsx("span",{children:m})]}),n.jsxs("form",{onSubmit:_,className:"auth-form",children:[n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),n.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:y,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:u})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[n.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),n.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),n.jsx("input",{type:h?"text":"password",id:"password",name:"password",value:l.password,onChange:y,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:u}),n.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!h),"aria-label":h?"Masquer le mot de passe":"Afficher le mot de passe",children:h?n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),n.jsx("div",{className:"auth-forgot",children:n.jsx(Re,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),n.jsx("button",{type:"submit",className:"auth-button",disabled:u,children:u?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),n.jsx("div",{className:"auth-divider",children:n.jsx("span",{children:"ou"})}),n.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",n.jsx(Re,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),n.jsxs("div",{className:"auth-welcome",children:[n.jsx("h2",{children:"Bienvenue sur PedaClic !"}),n.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),n.jsxs("ul",{className:"auth-features",children:[n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},Aq=()=>{const{register:e}=Ct(),t=Ht(),[r,a]=b.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[l,o]=b.useState(!1),[u,d]=b.useState(""),[m,p]=b.useState(!1),[h,v]=b.useState(!1),[y,x]=b.useState(!1),_=C=>{const{name:z,value:w}=C.target;a(E=>({...E,[z]:w})),u&&d("")},N=()=>r.displayName.trim()?r.displayName.trim().length<2?(d("Le nom doit contenir au moins 2 caractres."),!1):r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?r.password?r.password.length<6?(d("Le mot de passe doit contenir au moins 6 caractres."),!1):r.password!==r.confirmPassword?(d("Les mots de passe ne correspondent pas."),!1):y?!0:(d("Veuillez accepter les conditions d'utilisation."),!1):(d("Veuillez entrer un mot de passe."),!1):(d("Veuillez entrer une adresse email valide."),!1):(d("Veuillez entrer votre adresse email."),!1):(d("Veuillez entrer votre nom complet."),!1),S=async C=>{if(C.preventDefault(),!!N()){o(!0),d("");try{await e(r),t("/disciplines",{replace:!0})}catch(z){z instanceof Error?d(z.message):d("Une erreur est survenue lors de l'inscription.")}finally{o(!1)}}};return n.jsx("div",{className:"auth-page",children:n.jsxs("div",{className:"auth-container",children:[n.jsxs("div",{className:"auth-card auth-card--register",children:[n.jsxs("div",{className:"auth-header",children:[n.jsxs(Re,{to:"/",className:"auth-logo",children:[n.jsx("div",{className:"auth-logo__icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),n.jsx("span",{children:"PedaClic"})]}),n.jsx("h1",{className:"auth-title",children:"Crer un compte"}),n.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),u&&n.jsxs("div",{className:"auth-error",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 8v4M12 16h.01"})]}),n.jsx("span",{children:u})]}),n.jsxs("form",{onSubmit:S,className:"auth-form",children:[n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),n.jsx("input",{type:"text",id:"displayName",name:"displayName",value:r.displayName,onChange:_,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:l})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),n.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:_,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:l})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{className:"auth-label",children:"Je suis :"}),n.jsxs("div",{className:"auth-role-selector",children:[n.jsxs("label",{className:`auth-role-option ${r.role==="eleve"?"auth-role-option--selected":""}`,children:[n.jsx("input",{type:"radio",name:"role",value:"eleve",checked:r.role==="eleve",onChange:_,className:"auth-role-input",disabled:l}),n.jsxs("div",{className:"auth-role-content",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),n.jsx("span",{children:"lve"})]})]}),n.jsxs("label",{className:`auth-role-option ${r.role==="prof"?"auth-role-option--selected":""}`,children:[n.jsx("input",{type:"radio",name:"role",value:"prof",checked:r.role==="prof",onChange:_,className:"auth-role-input",disabled:l}),n.jsxs("div",{className:"auth-role-content",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),n.jsx("span",{children:"Professeur"})]})]}),n.jsxs("label",{className:`auth-role-option ${r.role==="parent"?"auth-role-option--selected":""}`,children:[n.jsx("input",{type:"radio",name:"role",value:"parent",checked:r.role==="parent",onChange:_,className:"auth-role-input",disabled:l}),n.jsxs("div",{className:"auth-role-content",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),n.jsx("span",{children:"Parent d'lve"})]})]})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[n.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),n.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),n.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:r.password,onChange:_,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:l}),n.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>p(!m),"aria-label":m?"Masquer":"Afficher",children:m?n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),n.jsx("input",{type:h?"text":"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:_,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:l}),n.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!h),"aria-label":h?"Masquer":"Afficher",children:h?n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),n.jsx("div",{className:"auth-checkbox-field",children:n.jsxs("label",{className:"auth-checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:y,onChange:C=>x(C.target.checked),className:"auth-checkbox",disabled:l}),n.jsx("span",{className:"auth-checkbox-custom"}),n.jsxs("span",{children:["J'accepte les"," ",n.jsx(Re,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",n.jsx(Re,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),n.jsx("button",{type:"submit",className:"auth-button",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),n.jsx("div",{className:"auth-divider",children:n.jsx("span",{children:"ou"})}),n.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",n.jsx(Re,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),n.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[n.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),n.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),n.jsxs("div",{className:"auth-stats",children:[n.jsxs("div",{className:"auth-stat",children:[n.jsx("span",{className:"auth-stat-number",children:"10 000+"}),n.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),n.jsxs("div",{className:"auth-stat",children:[n.jsx("span",{className:"auth-stat-number",children:"500+"}),n.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),n.jsxs("div",{className:"auth-stat",children:[n.jsx("span",{className:"auth-stat-number",children:"95%"}),n.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),n.jsxs("div",{className:"auth-testimonial",children:[n.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),n.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},SA=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],wA=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],CA=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],AA={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function e_(e){switch(e){case"college":return SA;case"lycee":return wA;case"formation_libre":return CA;default:return[]}}function EA(e){return[...SA,...wA,...CA].find(r=>r.value===e)?.label||e}const t_=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],Eq=()=>{const[e,t]=b.useState("college"),[r,a]=b.useState([]),[l,o]=b.useState(!0),u=Ht();b.useEffect(()=>{const p=Le(_e(oe,"disciplines"),nt("ordre")),h=xA(p,v=>{const y=v.docs.map(x=>({id:x.id,...x.data(),createdAt:x.data().createdAt?.toDate()||new Date,updatedAt:x.data().updatedAt?.toDate()||new Date}));a(y),o(!1)});return()=>h()},[]);const d=r.filter(p=>p.niveau===e),m=t_.find(p=>p.niveau===e);return n.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[n.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[n.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),n.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),n.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:t_.map(p=>{const h=e===p.niveau;return n.jsxs("button",{onClick:()=>t(p.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${h?p.color:"#e2e8f0"}`,background:h?p.bgLight:"#fff",color:h?p.color:"#718096",fontSize:"1rem",fontWeight:h?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:h?`0 2px 8px ${p.color}20`:"none"},children:[n.jsx("span",{style:{fontSize:"1.2rem"},children:p.icon}),p.label]},p.niveau)})}),l&&n.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!l&&d.length===0&&n.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[n.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",AA[e]," pour le moment."]})]}),!l&&d.length>0&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:d.map(p=>n.jsxs("div",{onClick:()=>u(`/disciplines/${p.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${p.couleur||m.color}`},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[n.jsx("span",{style:{fontSize:"1.8rem"},children:p.icone||""}),n.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:p.nom})]}),p.description&&n.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:p.description.length>100?`${p.description.slice(0,100)}...`:p.description}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:n.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:m.bgLight,color:m.color},children:EA(p.classe)})}),p.coefficient!==void 0&&n.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",p.coefficient]})]},p.id))})]})},Jo="disciplines",r_=e=>{const t=e.data();return{id:e.id,nom:t.nom,niveau:t.niveau,classe:t.classe,ordre:t.ordre,coefficient:t.coefficient,couleur:t.couleur,icone:t.icone,description:t.description,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Ii={async getAll(e){try{const t=[nt("ordre","asc")];e?.niveau&&t.unshift(Ae("niveau","==",e.niveau)),e?.classe&&t.unshift(Ae("classe","==",e.classe));const r=Le(_e(oe,Jo),...t);return(await Te(r)).docs.map(r_)}catch(t){throw console.error("Erreur lors de la rcupration des disciplines:",t),new Error("Impossible de rcuprer les disciplines")}},async getById(e){try{const t=be(oe,Jo,e),r=await Gt(t);return r.exists()?r_(r):null}catch(t){throw console.error("Erreur lors de la rcupration de la discipline:",t),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(e){return this.getAll({niveau:e})},async getByClasse(e){return this.getAll({classe:e})},async create(e){try{return(await nr(_e(oe,Jo),{...e,createdAt:ft(),updatedAt:ft()})).id}catch(t){throw console.error("Erreur lors de la cration de la discipline:",t),new Error("Impossible de crer la discipline")}},async update(e,t){try{const r=be(oe,Jo,e);await et(r,{...t,updatedAt:ft()})}catch(r){throw console.error("Erreur lors de la mise  jour de la discipline:",r),new Error("Impossible de mettre  jour la discipline")}},async delete(e){try{const t=be(oe,Jo,e);await Ln(t)}catch(t){throw console.error("Erreur lors de la suppression de la discipline:",t),new Error("Impossible de supprimer la discipline")}},async exists(e){return await this.getById(e)!==null},async countByNiveau(e){return(await this.getByNiveau(e)).length}},ls="ressources",zq="ressources",n_=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,titre:t.titre,type:t.type,contenu:t.contenu,description:t.description,isPremium:t.isPremium||!1,ordre:t.ordre||0,chapitre:t.chapitre,fichierURL:t.fichierURL,dureeEstimee:t.dureeEstimee,tags:t.tags||[],auteurId:t.auteurId,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Oq=e=>{const t=Date.now(),r=e.split(".").pop();return`${e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${t}.${r}`},Ca={async getAll(e,t){try{const r=[nt("ordre","asc")];e?.disciplineId&&r.unshift(Ae("disciplineId","==",e.disciplineId)),e?.chapitreId&&r.unshift(Ae("chapitre","==",e.chapitreId)),e?.type&&r.unshift(Ae("type","==",e.type)),e?.isPremium!==void 0&&r.unshift(Ae("isPremium","==",e.isPremium)),e?.auteurId&&r.unshift(Ae("auteurId","==",e.auteurId)),t&&r.push(ta(t));const a=Le(_e(oe,ls),...r);return(await Te(a)).docs.map(n_)}catch(r){throw console.error("Erreur lors de la rcupration des ressources:",r),new Error("Impossible de rcuprer les ressources")}},async getById(e){try{const t=be(oe,ls,e),r=await Gt(t);return r.exists()?n_(r):null}catch(t){throw console.error("Erreur lors de la rcupration de la ressource:",t),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(e){return this.getAll({disciplineId:e})},async getByChapitre(e){return this.getAll({chapitreId:e})},async getByType(e){return this.getAll({type:e})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(e,t){try{return(await nr(_e(oe,ls),{...e,auteurId:t,createdAt:ft(),updatedAt:ft()})).id}catch(r){throw console.error("Erreur lors de la cration de la ressource:",r),new Error("Impossible de crer la ressource")}},async update(e,t){try{const r=be(oe,ls,e);await et(r,{...t,updatedAt:ft()})}catch(r){throw console.error("Erreur lors de la mise  jour de la ressource:",r),new Error("Impossible de mettre  jour la ressource")}},async delete(e){try{const t=await this.getById(e);t?.fichierURL&&await this.deleteFile(t.fichierURL);const r=be(oe,ls,e);await Ln(r)}catch(t){throw console.error("Erreur lors de la suppression de la ressource:",t),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),r=Nc(oe);for(const a of t){a.fichierURL&&await this.deleteFile(a.fichierURL);const l=be(oe,ls,a.id);r.delete(l)}await r.commit()}catch(t){throw console.error("Erreur lors de la suppression des ressources:",t),new Error("Impossible de supprimer les ressources")}},async uploadFile(e,t){try{const r=Oq(e.name),a=`${zq}/${t}/${r}`,l=Br(Ur,a);return await gs(l,e),await Ma(l)}catch(r){throw console.error("Erreur lors de l'upload du fichier:",r),new Error("Impossible d'uploader le fichier")}},async deleteFile(e){try{const t=Br(Ur,e);await vc(t)}catch(t){console.warn("Fichier non trouv ou dj supprim:",t)}},async reorder(e,t){try{const r=Nc(oe);t.forEach((a,l)=>{const o=be(oe,ls,a);r.update(o,{ordre:l+1,updatedAt:ft()})}),await r.commit()}catch(r){throw console.error("Erreur lors de la rorganisation des ressources:",r),new Error("Impossible de rorganiser les ressources")}},async togglePremium(e,t){await this.update(e,{isPremium:t})},async countByType(e){return(await this.getByType(e)).length},async getStats(){try{const e=await this.getAll(),t={total:e.length,premium:e.filter(r=>r.isPremium).length,gratuit:e.filter(r=>!r.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return e.forEach(r=>{t.parType[r.type]!==void 0&&t.parType[r.type]++}),t}catch(e){throw console.error("Erreur lors du calcul des statistiques:",e),new Error("Impossible de calculer les statistiques")}}},Dq=()=>{const{id:e}=Ds(),t=Ht(),[r,a]=b.useState(null),[l,o]=b.useState([]),[u,d]=b.useState([]),[m,p]=b.useState(!0),[h,v]=b.useState(null),[y,x]=b.useState("tous"),[_,N]=b.useState(new Set),S=b.useCallback(async()=>{if(e)try{p(!0),v(null);const L=await Ii.getById(e);if(!L){v("Discipline introuvable."),p(!1);return}a(L);const Y=await Ca.getAll({disciplineId:e}),W=new Map,B=[];for(const k of Y){const T=k.chapitre||k.chapitreId;T?(W.has(T)||W.set(T,[]),W.get(T).push(k)):B.push(k)}const Q=Array.from(W.entries()).map(([k,T])=>({chapitreNom:k,ressources:T.sort((R,J)=>R.ordre-J.ordre)})).sort((k,T)=>k.chapitreNom.localeCompare(T.chapitreNom,"fr"));o(Q),d(B),Q.length>0&&N(new Set([Q[0].chapitreNom]))}catch(L){console.error("Erreur chargement discipline:",L),v("Impossible de charger les donnes. Ressayez plus tard.")}finally{p(!1)}},[e]);b.useEffect(()=>{S()},[S]);const C=L=>{N(Y=>{const W=new Set(Y);return W.has(L)?W.delete(L):W.add(L),W})},z=L=>y==="tous"?L:L.filter(Y=>Y.type===y),w=L=>{switch(L){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},E=L=>{switch(L){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return L}},O=L=>{switch(L){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},M=L=>L==="college"?"Collge":"Lyce";if(m)return n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),n.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(h||!r)return n.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[n.jsx("span",{style:{fontSize:"3rem"},children:""}),n.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:h||"Discipline introuvable"}),n.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),n.jsx("button",{onClick:()=>t("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const P=[...l.flatMap(L=>L.ressources),...u],q=[...new Set(P.map(L=>L.type))];return n.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[n.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[n.jsx(Re,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),n.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),n.jsx(Re,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),n.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),n.jsx("span",{style:{color:"#374151"},children:r.nom})]}),n.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[n.jsx("span",{style:{fontSize:"2.5rem"},children:r.icone||""}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:r.nom}),r.description&&n.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:r.description})]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[n.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",M(r.niveau),"  ",r.classe]}),n.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",P.length," ressource",P.length!==1?"s":""]}),r.coefficient&&n.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",r.coefficient]})]})]}),q.length>1&&n.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[n.jsxs("button",{onClick:()=>x("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:y==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:y==="tous"?"#2563eb":"#fff",color:y==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",P.length,")"]}),q.map(L=>{const Y=P.filter(B=>B.type===L).length,W=y===L;return n.jsxs("button",{onClick:()=>x(L),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:W?`2px solid ${O(L)}`:"1px solid #d1d5db",background:W?O(L):"#fff",color:W?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[w(L)," ",E(L)," (",Y,")"]},L)})]}),l.length===0&&u.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[n.jsx("span",{style:{fontSize:"3rem"},children:""}),n.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),n.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.map(L=>{const Y=z(L.ressources);if(Y.length===0&&y!=="tous")return null;const W=_.has(L.chapitreNom),B=y==="tous"?L.ressources:Y;return n.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:W?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[n.jsx("button",{onClick:()=>C(L.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:W?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("span",{style:{fontSize:"1.25rem",transform:W?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:L.chapitreNom}),n.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[L.ressources.length," ressource",L.ressources.length!==1?"s":""]})]})]})}),W&&n.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:B.map(Q=>n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:k=>k.currentTarget.style.background="#eef2ff",onMouseLeave:k=>k.currentTarget.style.background="#f9fafb",children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[n.jsx("span",{style:{fontSize:"1.2rem"},children:w(Q.type)}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:Q.titre}),Q.description&&n.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:Q.description})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(Q.type)},children:E(Q.type)}),Q.isPremium&&n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),Q.dureeEstimee&&n.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",Q.dureeEstimee," min"]})]})]},Q.id))})]},L.chapitreNom)}),z(u).length>0&&n.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:z(u).map(L=>n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("span",{style:{fontSize:"1.2rem"},children:w(L.type)}),n.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:L.titre})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(L.type)},children:E(L.type)}),L.isPremium&&n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},L.id))})]})]}),n.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:n.jsx(Re,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},gv=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],Mq=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],kq=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],Pq=()=>{const{currentUser:e}=Ct(),t=Wf(),r=Ht(),[a,l]=b.useState("annuel"),[o,u]=b.useState(!1),[d,m]=b.useState(null),[p,h]=b.useState(null);t.state?.from;const v=()=>!e||!e.isPremium?!1:e.subscriptionEnd?(e.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e.subscriptionEnd))>new Date:!0,y=async()=>{if(!e){r("/connexion",{state:{from:"/premium"}});return}if(v()){m("Vous tes dj abonn Premium !");return}try{u(!0),m(null);const N=gv.find(E=>E.id===a);if(!N)throw new Error("Plan invalide");const S=await nr(_e(oe,"transactions"),{userId:e.uid,userEmail:e.email,planType:a,montant:N.prix,devise:"XOF",statut:"pending",dateTransaction:ft(),createdAt:ft()}),C={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${N.nom}`,item_price:N.prix,currency:"XOF",ref_command:S.id,success_url:`${window.location.origin}/premium/success?ref=${S.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${S.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:e.uid,planType:a,transactionId:S.id}),env:"test"},w=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:C.apiKey,API_SECRET:C.apiSecret},body:JSON.stringify({item_name:C.item_name,item_price:C.item_price,currency:C.currency,ref_command:C.ref_command,command_name:`Abonnement Premium ${N.nom} - ${e.email}`,env:C.env,ipn_url:C.ipn_url,success_url:C.success_url,cancel_url:C.cancel_url,custom_field:C.custom_field})})).json();if(w.success===1&&w.redirect_url)window.location.href=w.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const E=new Date,O=new Date(E);a==="mensuel"?O.setMonth(O.getMonth()+1):O.setFullYear(O.getFullYear()+1),await et(be(oe,"users",e.uid),{isPremium:!0,subscriptionEnd:O,subscriptionPlan:a,updatedAt:ft()}),await et(be(oe,"transactions",S.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:O,updatedAt:ft()}),r("/premium/success",{state:{plan:N.nom,montant:N.prix,expiration:O.toLocaleDateString("fr-FR")}})}}catch(N){console.error("Erreur paiement:",N),m("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{u(!1)}},x=N=>{h(p===N?null:N)},_=N=>N.toLocaleString("fr-FR")+" FCFA";if(v()){const N=e?.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e?.subscriptionEnd||Date.now());return n.jsx("div",{className:"premium-page",children:n.jsx("div",{className:"container",children:n.jsxs("div",{className:"premium-already",children:[n.jsx("span",{className:"premium-already__icon",children:""}),n.jsx("h1",{children:"Vous tes dj Premium !"}),n.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",n.jsx("strong",{children:N.toLocaleDateString("fr-FR")})]}),n.jsxs("div",{className:"premium-already__actions",children:[n.jsx(Re,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),n.jsx(Re,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return n.jsxs("div",{className:"premium-page",children:[n.jsx("section",{className:"premium-hero",children:n.jsxs("div",{className:"container",children:[n.jsx("span",{className:"premium-hero__badge",children:" Premium"}),n.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",n.jsx("span",{children:"PedaClic"})]}),n.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),n.jsx("section",{className:"premium-pricing",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),n.jsx("div",{className:"pricing-cards",children:gv.map(N=>n.jsxs("div",{className:`pricing-card ${a===N.id?"pricing-card--selected":""} ${N.popular?"pricing-card--popular":""}`,onClick:()=>l(N.id),children:[N.popular&&n.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),n.jsxs("div",{className:"pricing-card__header",children:[n.jsx("h3",{className:"pricing-card__name",children:N.nom}),n.jsx("p",{className:"pricing-card__duration",children:N.duree})]}),n.jsxs("div",{className:"pricing-card__price",children:[N.prixOriginal&&n.jsx("span",{className:"pricing-card__original",children:_(N.prixOriginal)}),n.jsx("span",{className:"pricing-card__amount",children:_(N.prix)}),N.id==="mensuel"&&n.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),N.economie&&n.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",N.economie]}),n.jsx("div",{className:"pricing-card__radio",children:n.jsx("span",{className:`radio-dot ${a===N.id?"radio-dot--active":""}`})})]},N.id))}),n.jsxs("div",{className:"pricing-cta",children:[d&&n.jsxs("div",{className:"pricing-error",children:[n.jsx("span",{children:""})," ",d]}),e?n.jsx("button",{className:"btn btn--premium btn--lg",onClick:y,disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):n.jsxs(n.Fragment,{children:["Payer ",_(gv.find(N=>N.id===a)?.prix||0)]})}):n.jsxs("div",{className:"pricing-login",children:[n.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),n.jsx(Re,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),n.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",n.jsx(Re,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),n.jsxs("div",{className:"payment-methods",children:[n.jsx("p",{children:"Paiement scuris par"}),n.jsxs("div",{className:"payment-methods__logos",children:[n.jsx("span",{className:"payment-logo",children:" Orange Money"}),n.jsx("span",{className:"payment-logo",children:" Wave"}),n.jsx("span",{className:"payment-logo",children:" Free Money"}),n.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),n.jsx("section",{className:"premium-features",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),n.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),n.jsx("div",{className:"features-grid",children:Mq.map((N,S)=>n.jsxs("div",{className:"feature-card",children:[n.jsx("span",{className:"feature-card__icon",children:N.icone}),n.jsx("h3",{className:"feature-card__title",children:N.titre}),n.jsx("p",{className:"feature-card__description",children:N.description})]},S))})]})}),n.jsx("section",{className:"premium-comparison",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),n.jsxs("div",{className:"comparison-table",children:[n.jsxs("div",{className:"comparison-header",children:[n.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),n.jsx("div",{className:"comparison-free",children:"Gratuit"}),n.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((N,S)=>n.jsxs("div",{className:"comparison-row",children:[n.jsx("div",{className:"comparison-feature",children:N.feature}),n.jsx("div",{className:"comparison-free",children:N.free?n.jsx("span",{className:"check",children:""}):n.jsx("span",{className:"cross",children:""})}),n.jsx("div",{className:"comparison-premium",children:n.jsx("span",{className:"check check--premium",children:""})})]},S))]})]})}),n.jsx("section",{className:"premium-testimonials",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),n.jsxs("div",{className:"testimonials-grid",children:[n.jsxs("div",{className:"testimonial-card",children:[n.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),n.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),n.jsxs("div",{className:"testimonial-card__author",children:[n.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),n.jsxs("div",{children:[n.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),n.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),n.jsxs("div",{className:"testimonial-card",children:[n.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),n.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),n.jsxs("div",{className:"testimonial-card__author",children:[n.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),n.jsxs("div",{children:[n.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),n.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),n.jsxs("div",{className:"testimonial-card",children:[n.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),n.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),n.jsxs("div",{className:"testimonial-card__author",children:[n.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),n.jsxs("div",{children:[n.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),n.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),n.jsx("section",{className:"premium-faq",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Questions frquentes"}),n.jsx("div",{className:"faq-list",children:kq.map((N,S)=>n.jsxs("div",{className:`faq-item ${p===S?"faq-item--open":""}`,children:[n.jsxs("button",{className:"faq-item__question",onClick:()=>x(S),"aria-expanded":p===S,children:[n.jsx("span",{children:N.question}),n.jsx("span",{className:"faq-item__icon",children:p===S?"":"+"})]}),p===S&&n.jsx("div",{className:"faq-item__answer",children:n.jsx("p",{children:N.reponse})})]},S))})]})}),n.jsx("section",{className:"premium-cta-final",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{children:"Prt  russir vos examens ?"}),n.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),n.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},Tq=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"},{id:"ebooks",label:"Bibliothque Ebooks",icon:"",href:"/admin/ebooks"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],vn=({children:e,currentPage:t="dashboard"})=>{const{currentUser:r,logout:a}=Ct(),[l,o]=b.useState(!0),[u,d]=b.useState(!1),m=Wf(),p=async()=>{try{d(!0),await a(),window.location.href="/connexion"}catch(x){console.error("Erreur lors de la dconnexion:",x),d(!1)}},h=()=>r?.displayName?r.displayName.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"AD",v=()=>{switch(r?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},y=x=>x.href==="/admin"?m.pathname==="/admin"||m.pathname==="/admin/":m.pathname.startsWith(x.href);return n.jsxs("div",{className:"admin-layout",children:[n.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[n.jsx("header",{className:"admin-sidebar__header",children:n.jsxs(Re,{to:"/",className:"admin-sidebar__logo",children:[n.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),n.jsx("span",{children:"PedaClic"})]})}),n.jsx("nav",{className:"admin-sidebar__nav",children:Tq.map((x,_)=>n.jsxs("div",{className:"admin-nav__section",children:[n.jsx("h3",{className:"admin-nav__title",children:x.title}),n.jsx("ul",{className:"admin-nav__list",children:x.items.map(N=>n.jsx("li",{className:"admin-nav__item",children:n.jsxs(Re,{to:N.href,className:`admin-nav__link ${y(N)?"admin-nav__link--active":""}`,children:[n.jsx("span",{className:"admin-nav__icon",children:N.icon}),n.jsx("span",{className:"admin-nav__label",children:N.label})]})},N.id))})]},_))}),n.jsx("footer",{className:"admin-sidebar__footer",children:n.jsxs("div",{className:"admin-user",children:[n.jsx("div",{className:"admin-user__avatar",children:h()}),n.jsxs("div",{className:"admin-user__info",children:[n.jsx("div",{className:"admin-user__name",children:r?.displayName||"Administrateur"}),n.jsx("div",{className:"admin-user__role",children:v()})]}),n.jsx("button",{onClick:p,disabled:u,className:"admin-logout-btn",title:"Se dconnecter",children:u?"...":""})]})})]}),n.jsxs("main",{className:"admin-content",children:[n.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!l),"aria-label":"Toggle sidebar",children:""}),e]}),n.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Si="chapitres",xv=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,numero:t.numero,titre:t.titre,description:t.description,objectifs:t.objectifs||[],dureeEstimee:t.dureeEstimee,isPremium:t.isPremium||!1,actif:t.actif!==!1,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},wi={async getByDiscipline(e){try{const t=Le(_e(oe,Si),Ae("disciplineId","==",e),nt("numero","asc"));return(await Te(t)).docs.map(xv)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const e=Le(_e(oe,Si),nt("numero","asc"));return(await Te(e)).docs.map(xv)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getById(e){try{const t=be(oe,Si,e),r=await Gt(t);return r.exists()?xv(r):null}catch(t){throw console.error("Erreur lors de la rcupration du chapitre:",t),new Error("Impossible de rcuprer le chapitre")}},async create(e){try{return(await nr(_e(oe,Si),{...e,actif:e.actif!==!1,createdAt:ft(),updatedAt:ft()})).id}catch(t){throw console.error("Erreur lors de la cration du chapitre:",t),new Error("Impossible de crer le chapitre")}},async update(e,t){try{const r=be(oe,Si,e);await et(r,{...t,updatedAt:ft()})}catch(r){throw console.error("Erreur lors de la mise  jour du chapitre:",r),new Error("Impossible de mettre  jour le chapitre")}},async delete(e){try{const t=be(oe,Si,e);await Ln(t)}catch(t){throw console.error("Erreur lors de la suppression du chapitre:",t),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),r=Nc(oe);t.forEach(a=>{const l=be(oe,Si,a.id);r.delete(l)}),await r.commit()}catch(t){throw console.error("Erreur lors de la suppression des chapitres:",t),new Error("Impossible de supprimer les chapitres")}},async reorder(e,t){try{const r=Nc(oe);t.forEach((a,l)=>{const o=be(oe,Si,a);r.update(o,{numero:l+1,updatedAt:ft()})}),await r.commit()}catch(r){throw console.error("Erreur lors de la rorganisation des chapitres:",r),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(e,t){await this.update(e,{actif:t})},async countByDiscipline(e){return(await this.getByDiscipline(e)).length},async getNextNumero(e){return await this.countByDiscipline(e)+1}},qq=()=>{const{currentUser:e}=Ct(),t=Ht(),[r,a]=b.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[l,o]=b.useState(!0),[u,d]=b.useState(null);return b.useEffect(()=>{(async()=>{try{o(!0),d(null);const[p,h,v,y,x]=await Promise.all([Ii.getAll(),wi.getAll(),Ca.getStats(),Te(_e(oe,"quizzes")),Te(_e(oe,"quizzes_v2"))]);a({totalDisciplines:p.length,totalChapitres:h.length,totalRessources:v.total,ressourcesPremium:v.premium,ressourcesGratuites:v.gratuit,totalQuiz:y.size,totalQuizAvances:x.size,ressourcesParType:v.parType})}catch(p){console.error("Erreur lors du chargement des statistiques:",p),d("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),n.jsxs("div",{className:"admin-dashboard",children:[n.jsx("header",{className:"admin-page-header",children:n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),n.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",e?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&n.jsxs("div",{className:"alert alert--error",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:u})})]}),l?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des statistiques..."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/disciplines"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalDisciplines}),n.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/chapitres"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalChapitres}),n.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalRessources}),n.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.ressourcesPremium}),n.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalQuiz}),n.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz-avance"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalQuizAvances}),n.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),n.jsxs("section",{className:"content-card",children:[n.jsx("div",{className:"content-card__header",children:n.jsx("h2",{children:"Rpartition des ressources par type"})}),n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"resource-type-grid",children:[n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.cours}),n.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.exercice}),n.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.video}),n.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.document}),n.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.totalQuiz+r.totalQuizAvances}),n.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),n.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[n.jsx("div",{className:"content-card__header",children:n.jsx("h2",{children:"Actions rapides"})}),n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"quick-actions-grid",children:[n.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les disciplines"}),n.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),n.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les chapitres"}),n.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),n.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les ressources"}),n.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),n.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les quiz"}),n.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),n.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Quiz avancs"}),n.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),n.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les utilisateurs"}),n.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),n.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},Me={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},yv={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},Rq=()=>{const[e,t]=b.useState([]),[r,a]=b.useState(yv),[l,o]=b.useState(null),[u,d]=b.useState(!1),[m,p]=b.useState("all");b.useEffect(()=>{const z=Le(_e(oe,"disciplines"),nt("nom")),w=xA(z,E=>{const O=E.docs.map(M=>({id:M.id,...M.data(),createdAt:M.data().createdAt?.toDate()||new Date,updatedAt:M.data().updatedAt?.toDate()||new Date}));t(O)});return()=>w()},[]);const h=b.useCallback(z=>{const w=e_(z)[0]?.value||"6eme";a(E=>({...E,niveau:z,classe:w,coefficient:z==="formation_libre"?void 0:E.coefficient}))},[]),v=async z=>{if(z.preventDefault(),!!r.nom.trim()){d(!0);try{const w={nom:r.nom.trim(),niveau:r.niveau,classe:r.classe,ordre:r.ordre,...r.coefficient!==void 0&&{coefficient:r.coefficient},couleur:r.couleur||"",icone:r.icone||"",description:r.description||"",updatedAt:Fe.now()};l?await et(be(oe,"disciplines",l),w):await nr(_e(oe,"disciplines"),{...w,createdAt:Fe.now()}),a(yv),o(null)}catch(w){console.error("Erreur lors de la sauvegarde :",w),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{d(!1)}}},y=z=>{a({nom:z.nom,niveau:z.niveau,classe:z.classe,ordre:z.ordre,coefficient:z.coefficient,couleur:z.couleur||"",icone:z.icone||"",description:z.description||""}),o(z.id)},x=async(z,w)=>{if(window.confirm(`Supprimer la discipline "${w}" ? Cette action est irrversible.`))try{await Ln(be(oe,"disciplines",z))}catch(E){console.error("Erreur lors de la suppression :",E)}},_=()=>{a(yv),o(null)},N=e_(r.niveau),S=m==="all"?e:e.filter(z=>z.niveau===m),C=z=>({...Me.badge,...z==="college"?Me.badgeCollege:{},...z==="lycee"?Me.badgeLycee:{},...z==="formation_libre"?Me.badgeFormationLibre:{}});return n.jsxs("div",{style:Me.container,children:[n.jsx("h2",{style:Me.title,children:" Gestion des Disciplines"}),n.jsxs("form",{style:Me.form,onSubmit:v,children:[n.jsx("h3",{style:Me.formTitle,children:l?" Modifier la discipline":" Ajouter une discipline"}),n.jsxs("div",{style:Me.formGrid,children:[n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:"Nom de la discipline"}),n.jsx("input",{type:"text",style:Me.input,value:r.nom,onChange:z=>a({...r,nom:z.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:"Niveau"}),n.jsxs("select",{style:Me.select,value:r.niveau,onChange:z=>h(z.target.value),children:[n.jsx("option",{value:"college",children:" Collge"}),n.jsx("option",{value:"lycee",children:" Lyce"}),n.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:r.niveau==="formation_libre"?"Niveau de formation":"Classe"}),n.jsx("select",{style:Me.select,value:r.classe,onChange:z=>a({...r,classe:z.target.value}),children:N.map(({value:z,label:w})=>n.jsx("option",{value:z,children:w},z))})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:"Ordre d'affichage"}),n.jsx("input",{type:"number",style:Me.input,value:r.ordre,onChange:z=>a({...r,ordre:Number(z.target.value)}),placeholder:"Ex : 1",min:"0"})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsxs("label",{style:Me.label,children:["Coefficient",r.niveau==="formation_libre"&&n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("input",{type:"number",style:Me.input,value:r.coefficient??"",onChange:z=>a({...r,coefficient:z.target.value?Number(z.target.value):void 0}),placeholder:r.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:r.niveau!=="formation_libre"})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsxs("label",{style:Me.label,children:["Couleur",n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("input",{type:"color",style:{...Me.input,maxWidth:"80px",padding:"4px",height:"40px"},value:r.couleur||"#3182ce",onChange:z=>a({...r,couleur:z.target.value})})]})]}),n.jsxs("div",{style:{...Me.fieldGroup,marginBottom:"20px"},children:[n.jsxs("label",{style:Me.label,children:["Description",n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("textarea",{style:Me.textarea,value:r.description,onChange:z=>a({...r,description:z.target.value}),placeholder:"Brve description de la discipline..."})]}),n.jsxs("div",{style:{...Me.fieldGroup,marginBottom:"20px"},children:[n.jsxs("label",{style:Me.label,children:["Icne (emoji)",n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("input",{type:"text",style:{...Me.input,maxWidth:"120px"},value:r.icone,onChange:z=>a({...r,icone:z.target.value}),placeholder:""})]}),n.jsxs("div",{children:[n.jsx("button",{type:"submit",style:Me.btnPrimary,disabled:u,children:u?"Enregistrement...":l?"Mettre  jour":"Ajouter la discipline"}),l&&n.jsx("button",{type:"button",style:Me.btnSecondary,onClick:_,children:"Annuler"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{style:Me.formTitle,children:[" Disciplines existantes (",S.length,")"]}),n.jsxs("div",{style:Me.tabs,children:[n.jsx("button",{style:{...Me.tab,...m==="all"?Me.tabActive:{}},onClick:()=>p("all"),children:"Toutes"}),n.jsx("button",{style:{...Me.tab,...m==="college"?Me.tabActive:{}},onClick:()=>p("college"),children:" Collge"}),n.jsx("button",{style:{...Me.tab,...m==="lycee"?Me.tabActive:{}},onClick:()=>p("lycee"),children:" Lyce"}),n.jsx("button",{style:{...Me.tab,...m==="formation_libre"?Me.tabActive:{}},onClick:()=>p("formation_libre"),children:" Formation libre"})]}),S.length===0?n.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):S.map(z=>n.jsxs("div",{style:Me.card,children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[z.icone&&n.jsx("span",{style:{fontSize:"1.2rem"},children:z.icone}),n.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:z.nom}),n.jsx("span",{style:C(z.niveau),children:AA[z.niveau]})]}),n.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[z.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",EA(z.classe),z.coefficient!==void 0&&n.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",z.coefficient]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"4px"},children:[n.jsx("button",{style:Me.btnEdit,onClick:()=>y(z),children:"Modifier"}),n.jsx("button",{style:Me.btnDanger,onClick:()=>x(z.id,z.nom),children:"Supprimer"})]})]},z.id))]})]})},a_={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},Lq=()=>{const[e,t]=b.useState([]),[r,a]=b.useState([]),[l,o]=b.useState(""),[u,d]=b.useState(!0),[m,p]=b.useState(!1),[h,v]=b.useState(!1),[y,x]=b.useState(null),[_,N]=b.useState(null),[S,C]=b.useState(null),[z,w]=b.useState(!1),[E,O]=b.useState(!1),[M,P]=b.useState(null),[q,L]=b.useState(null),[Y,W]=b.useState({...a_,disciplineId:""}),[B,Q]=b.useState({}),[k,T]=b.useState(""),R=b.useCallback(async()=>{try{d(!0);const $=await Ii.getAll();t($),$.length>0&&!l&&o($[0].id)}catch($){console.error("Erreur lors du chargement des disciplines:",$),N("Impossible de charger les disciplines.")}finally{d(!1)}},[l]),J=b.useCallback(async()=>{if(!l){a([]);return}try{p(!0);const $=await wi.getByDiscipline(l);a($)}catch($){console.error("Erreur lors du chargement des chapitres:",$),N("Impossible de charger les chapitres.")}finally{p(!1)}},[l]);b.useEffect(()=>{R()},[R]),b.useEffect(()=>{J()},[J]);const H=()=>{const $={};return Y.disciplineId||($.disciplineId="Veuillez slectionner une discipline"),Y.titre.trim()?Y.titre.length<3&&($.titre="Le titre doit contenir au moins 3 caractres"):$.titre="Le titre du chapitre est requis",Y.numero<1&&($.numero="Le numro doit tre suprieur  0"),Q($),Object.keys($).length===0},ve=$=>{o($),N(null)},U=async()=>{const $=await wi.getNextNumero(l);P(null),W({...a_,disciplineId:l,numero:$}),Q({}),T(""),w(!0)},ge=$=>{P($),W({disciplineId:$.disciplineId,numero:$.numero,titre:$.titre,description:$.description,objectifs:$.objectifs||[],dureeEstimee:$.dureeEstimee,isPremium:$.isPremium,actif:$.actif}),Q({}),T(""),w(!0)},re=$=>{L($),O(!0)},me=()=>{w(!1),O(!1),P(null),L(null),Q({}),T("")},xe=$=>{const{name:se,value:V,type:ye}=$.target,qe=$.target.checked;W(Ie=>({...Ie,[se]:ye==="checkbox"?qe:ye==="number"?Number(V):V})),B[se]&&Q(Ie=>({...Ie,[se]:void 0}))},he=()=>{k.trim()&&(W($=>({...$,objectifs:[...$.objectifs||[],k.trim()]})),T(""))},F=$=>{W(se=>({...se,objectifs:(se.objectifs||[]).filter((V,ye)=>ye!==$)}))},de=async $=>{if($.preventDefault(),!!H())try{v(!0),N(null),M?(await wi.update(M.id,Y),C("Chapitre modifi avec succs !")):(await wi.create(Y),C("Chapitre cr avec succs !")),me(),await J(),setTimeout(()=>C(null),3e3)}catch(se){console.error("Erreur lors de la sauvegarde:",se),N("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{v(!1)}},Ee=async()=>{if(q)try{x(q.id),await wi.delete(q.id),C("Chapitre supprim avec succs !"),me(),await J(),setTimeout(()=>C(null),3e3)}catch($){console.error("Erreur lors de la suppression:",$),N("Erreur lors de la suppression. Veuillez ressayer.")}finally{x(null)}},ie=async $=>{try{await wi.toggleActive($.id,!$.actif),await J(),C($.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>C(null),2e3)}catch{N("Erreur lors de la mise  jour")}},K=$=>{const se=e.find(V=>V.id===$);return se?se.nom:"Non trouve"};return n.jsxs("div",{className:"chapitre-manager",children:[n.jsxs("header",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),n.jsx("div",{className:"admin-page-header__actions",children:n.jsxs("button",{onClick:U,className:"btn btn--primary",disabled:!l||u,children:[n.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),_&&n.jsxs("div",{className:"alert alert--error",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:_})}),n.jsx("button",{onClick:()=>N(null),className:"alert__close",children:""})]}),S&&n.jsxs("div",{className:"alert alert--success",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:S})})]}),n.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"discipline-selector",children:[n.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),u?n.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?n.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",n.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):n.jsx("div",{className:"discipline-tabs",children:e.map($=>n.jsxs("button",{className:`discipline-tab ${l===$.id?"discipline-tab--active":""}`,onClick:()=>ve($.id),style:{"--discipline-color":$.couleur||"#2563eb"},children:[n.jsx("span",{className:"discipline-tab__icon",children:$.icone||""}),n.jsx("span",{className:"discipline-tab__name",children:$.nom}),n.jsx("span",{className:"discipline-tab__class",children:$.classe})]},$.id))})]})})}),n.jsxs("div",{className:"admin-table-container",children:[n.jsx("div",{className:"admin-table-header",children:n.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${K(l)}`,r.length>0&&` (${r.length})`]})}),m?n.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des chapitres..."})]}):l?r.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),n.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),n.jsx("button",{onClick:U,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):n.jsx("div",{className:"chapitres-list",children:r.map($=>n.jsxs("div",{className:`chapitre-card ${$.actif?"":"chapitre-card--inactive"}`,children:[n.jsx("div",{className:"chapitre-card__number",children:$.numero}),n.jsxs("div",{className:"chapitre-card__content",children:[n.jsxs("h3",{className:"chapitre-card__title",children:[$.titre,$.isPremium&&n.jsx("span",{className:"badge badge--premium",children:"Premium"}),!$.actif&&n.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),$.description&&n.jsx("p",{className:"chapitre-card__description",children:$.description}),n.jsxs("div",{className:"chapitre-card__meta",children:[$.dureeEstimee&&n.jsxs("span",{children:[" ",$.dureeEstimee,"h estime"]}),$.objectifs&&$.objectifs.length>0&&n.jsxs("span",{children:[" ",$.objectifs.length," objectif(s)"]})]})]}),n.jsxs("div",{className:"chapitre-card__actions",children:[n.jsx("button",{onClick:()=>ie($),className:`table-action-btn ${$.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:$.actif?"Dsactiver":"Activer",children:$.actif?"":""}),n.jsx("button",{onClick:()=>ge($),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),n.jsx("button",{onClick:()=>re($),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:y===$.id,children:y===$.id?"":""})]})]},$.id))}):n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),n.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),z&&n.jsx("div",{className:"modal-overlay",onClick:me,children:n.jsxs("div",{className:"modal modal--lg",onClick:$=>$.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:M?"Modifier le chapitre":"Nouveau chapitre"}),n.jsx("button",{onClick:me,className:"modal__close",children:""})]}),n.jsxs("form",{onSubmit:de,children:[n.jsxs("div",{className:"modal__body",children:[!M&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),n.jsxs("select",{name:"disciplineId",className:`form-select ${B.disciplineId?"form-select--error":""}`,value:Y.disciplineId,onChange:xe,children:[n.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map($=>n.jsxs("option",{value:$.id,children:[$.icone," ",$.nom," (",$.classe,")"]},$.id))]}),B.disciplineId&&n.jsx("span",{className:"form-error",children:B.disciplineId})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[n.jsx("label",{className:"form-label form-label--required",children:"N"}),n.jsx("input",{type:"number",name:"numero",className:`form-input ${B.numero?"form-input--error":""}`,min:"1",value:Y.numero,onChange:xe}),B.numero&&n.jsx("span",{className:"form-error",children:B.numero})]}),n.jsxs("div",{className:"form-group",style:{flex:1},children:[n.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),n.jsx("input",{type:"text",name:"titre",className:`form-input ${B.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:Y.titre,onChange:xe}),B.titre&&n.jsx("span",{className:"form-error",children:B.titre})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:Y.description||"",onChange:xe})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),n.jsxs("div",{className:"objectifs-input",children:[n.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:k,onChange:$=>T($.target.value),onKeyPress:$=>$.key==="Enter"&&($.preventDefault(),he())}),n.jsx("button",{type:"button",onClick:he,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),Y.objectifs&&Y.objectifs.length>0&&n.jsx("ul",{className:"objectifs-list",children:Y.objectifs.map(($,se)=>n.jsxs("li",{className:"objectif-item",children:[n.jsxs("span",{children:[" ",$]}),n.jsx("button",{type:"button",onClick:()=>F(se),className:"objectif-remove",children:""})]},se))})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),n.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:Y.dureeEstimee||"",onChange:xe})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Options"}),n.jsxs("div",{className:"form-options",children:[n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"isPremium",checked:Y.isPremium,onChange:xe}),n.jsx("span",{children:"Contenu Premium "})]}),n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"actif",checked:Y.actif!==!1,onChange:xe}),n.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{type:"button",onClick:me,className:"btn btn--outline",disabled:h,children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn btn--primary",disabled:h,children:h?"Enregistrement...":M?"Mettre  jour":"Crer le chapitre"})]})]})]})}),E&&q&&n.jsx("div",{className:"modal-overlay",onClick:me,children:n.jsxs("div",{className:"modal",onClick:$=>$.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),n.jsx("button",{onClick:me,className:"modal__close",children:""})]}),n.jsxs("div",{className:"modal__body",children:[n.jsxs("p",{children:["Supprimer le chapitre ",n.jsxs("strong",{children:[q.numero,". ",q.titre]})," ?"]}),n.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{onClick:me,className:"btn btn--outline",children:"Annuler"}),n.jsx("button",{onClick:Ee,className:"btn btn--danger",disabled:y!==null,children:y?"Suppression...":"Supprimer"})]})]})}),n.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},xd=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],yd={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},bv=50,i_={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},Iq=()=>{const{currentUser:e}=Ct(),[t,r]=b.useState([]),[a,l]=b.useState([]),[o,u]=b.useState([]),[d,m]=b.useState([]),[p,h]=b.useState(""),[v,y]=b.useState(""),[x,_]=b.useState(""),[N,S]=b.useState(""),[C,z]=b.useState(""),[w,E]=b.useState(!0),[O,M]=b.useState(!1),[P,q]=b.useState(!1),[L,Y]=b.useState(!1),[W,B]=b.useState(null),[Q,k]=b.useState(!1),[T,R]=b.useState(0),[J,H]=b.useState(null),[ve,U]=b.useState(null),[ge,re]=b.useState(!1),[me,xe]=b.useState(!1),[he,F]=b.useState(!1),[de,Ee]=b.useState(null),[ie,K]=b.useState(null),[$,se]=b.useState(null),[V,ye]=b.useState({...i_,disciplineId:""}),[qe,Ie]=b.useState({}),[Qe,Qt]=b.useState(null),[An,rn]=b.useState(null),sa=b.useRef(null),[ce,Ce]=b.useState(""),ke=b.useCallback(async()=>{try{E(!0);const Z=await Ii.getAll();r(Z),Z.length>0&&!p&&h(Z[0].id)}catch(Z){console.error("Erreur lors du chargement des disciplines:",Z),H("Impossible de charger les disciplines.")}finally{E(!1)}},[p]),$e=b.useCallback(async()=>{if(!p){l([]);return}try{M(!0);const Z=await wi.getByDiscipline(p);l(Z)}catch(Z){console.error("Erreur lors du chargement des chapitres:",Z)}finally{M(!1)}},[p]),Nt=b.useCallback(async()=>{if(!p){u([]),m([]);return}try{q(!0);const Z=await Ca.getByDiscipline(p);u(Z),m(Z)}catch(Z){console.error("Erreur lors du chargement des ressources:",Z),H("Impossible de charger les ressources.")}finally{q(!1)}},[p]);b.useEffect(()=>{ke()},[ke]),b.useEffect(()=>{$e()},[$e]),b.useEffect(()=>{Nt()},[Nt]),b.useEffect(()=>{let Z=[...o];if(v&&(Z=Z.filter(De=>De.chapitre===v)),x&&(Z=Z.filter(De=>De.type===x)),N==="premium"?Z=Z.filter(De=>De.isPremium):N==="free"&&(Z=Z.filter(De=>!De.isPremium)),C){const De=C.toLowerCase();Z=Z.filter(pt=>pt.titre.toLowerCase().includes(De)||pt.description?.toLowerCase().includes(De)||pt.tags?.some(yr=>yr.toLowerCase().includes(De)))}m(Z)},[o,v,x,N,C]);const gr=()=>{const Z={};if(V.disciplineId||(Z.disciplineId="Veuillez slectionner une discipline"),V.titre.trim()?V.titre.length<3&&(Z.titre="Le titre doit contenir au moins 3 caractres"):Z.titre="Le titre est requis",V.type||(Z.type="Veuillez slectionner un type de ressource"),Qe){const De="."+Qe.name.split(".").pop()?.toLowerCase(),pt=yd[V.type];pt.includes(De)||(Z.fichier=`Extension non autorise. Extensions acceptes : ${pt.join(", ")}`),Qe.size/(1024*1024)>bv&&(Z.fichier=`Le fichier est trop volumineux (max ${bv} Mo)`)}return Ie(Z),Object.keys(Z).length===0},Bn=Z=>{h(Z),y(""),H(null)},Ls=()=>{Ee(null),ye({...i_,disciplineId:p}),Ie({}),Qt(null),rn(null),Ce(""),re(!0)},nn=Z=>{Ee(Z),ye({disciplineId:Z.disciplineId,titre:Z.titre,type:Z.type,description:Z.description,contenu:Z.contenu,chapitre:Z.chapitre||"",ordre:Z.ordre,isPremium:Z.isPremium,actif:Z.actif,tags:Z.tags||[],duree:Z.duree,urlExterne:Z.urlExterne||""}),Ie({}),Qt(null),rn(Z.fichierURL||null),Ce(""),re(!0)},Ja=Z=>{se(Z),F(!0)},Xm=Z=>{K(Z),xe(!0)},xr=()=>{re(!1),xe(!1),F(!1),Ee(null),K(null),se(null),Ie({}),Qt(null),rn(null),Ce("")},xt=Z=>{const{name:De,value:pt,type:yr}=Z.target,io=Z.target.checked;ye(Fi=>({...Fi,[De]:yr==="checkbox"?io:yr==="number"?Number(pt):pt})),qe[De]&&Ie(Fi=>({...Fi,[De]:void 0}))},Un=Z=>{const De=Z.target.files?.[0];if(De)if(Qt(De),Ie(pt=>({...pt,fichier:void 0})),De.type.startsWith("image/")||De.type.startsWith("video/")){const pt=new FileReader;pt.onloadend=()=>{rn(pt.result)},pt.readAsDataURL(De)}else rn(null)},_r=()=>{Qt(null),rn(null),sa.current&&(sa.current.value="")},au=()=>{ce.trim()&&!V.tags?.includes(ce.trim())&&(ye(Z=>({...Z,tags:[...Z.tags||[],ce.trim()]})),Ce(""))},Wm=Z=>{ye(De=>({...De,tags:(De.tags||[]).filter((pt,yr)=>yr!==Z)}))},Zm=async Z=>{if(Z.preventDefault(),!!gr())try{Y(!0),H(null);let De=de?.fichierURL,pt=de?.fichierNom;if(Qe){k(!0);const io=de?.id||`temp_${Date.now()}`;De=await Ca.uploadFile(Qe,io),pt=Qe?.name||"fichier",k(!1)}const yr={...V,fichierURL:De,fichierNom:pt};de?(await Ca.update(de.id,yr),U("Ressource modifie avec succs !")):(await Ca.create(yr,"admin"),U("Ressource cre avec succs !")),xr(),await Nt(),setTimeout(()=>U(null),3e3)}catch(De){console.error("Erreur lors de la sauvegarde:",De),H("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{Y(!1),k(!1),R(0)}},Is=async()=>{if(ie)try{B(ie.id),ie.fichierURL&&await Ca.deleteFile(ie.fichierURL),await Ca.delete(ie.id),U("Ressource supprime avec succs !"),xr(),await Nt(),setTimeout(()=>U(null),3e3)}catch(Z){console.error("Erreur lors de la suppression:",Z),H("Erreur lors de la suppression. Veuillez ressayer.")}finally{B(null)}},$s=async Z=>{try{await Ca.togglePremium(Z.id,!Z.isPremium),await Nt(),U(Z.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>U(null),2e3)}catch{H("Erreur lors de la mise  jour")}},Bs=Z=>{const De=t.find(pt=>pt.id===Z);return De?De.nom:"Non trouve"},la=Z=>{const De=a.find(pt=>pt.id===Z);return De?`${De.numero}. ${De.titre}`:""},Fn=Z=>xd.find(De=>De.value===Z)||xd[0],Ui=Z=>Z<1024?Z+" o":Z<1024*1024?(Z/1024).toFixed(1)+" Ko":(Z/(1024*1024)).toFixed(1)+" Mo";return n.jsxs("div",{className:"resource-manager",children:[n.jsxs("header",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),n.jsx("div",{className:"admin-page-header__actions",children:n.jsxs("button",{onClick:Ls,className:"btn btn--primary",disabled:!p||w,children:[n.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),J&&n.jsxs("div",{className:"alert alert--error",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:J})}),n.jsx("button",{onClick:()=>H(null),className:"alert__close",children:""})]}),ve&&n.jsxs("div",{className:"alert alert--success",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:ve})})]}),n.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"discipline-selector",children:[n.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),w?n.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?n.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",n.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):n.jsx("div",{className:"discipline-tabs",children:t.map(Z=>n.jsxs("button",{className:`discipline-tab ${p===Z.id?"discipline-tab--active":""}`,onClick:()=>Bn(Z.id),style:{"--discipline-color":Z.couleur||"#2563eb"},children:[n.jsx("span",{className:"discipline-tab__icon",children:Z.icone||""}),n.jsx("span",{className:"discipline-tab__name",children:Z.nom}),n.jsx("span",{className:"discipline-tab__class",children:Z.classe})]},Z.id))})]})})}),n.jsxs("div",{className:"admin-table-container",children:[n.jsxs("div",{className:"admin-table-header",children:[n.jsxs("h2",{className:"admin-table-title",children:["Ressources ",p&&`- ${Bs(p)}`,d.length>0&&` (${d.length})`]}),n.jsxs("div",{className:"admin-table-actions",children:[n.jsxs("div",{className:"search-input",children:[n.jsx("span",{className:"search-input__icon",children:""}),n.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:C,onChange:Z=>z(Z.target.value)})]}),n.jsxs("select",{className:"form-select form-select--sm",value:v,onChange:Z=>y(Z.target.value),disabled:O||a.length===0,children:[n.jsx("option",{value:"",children:"Tous les chapitres"}),a.map(Z=>n.jsxs("option",{value:Z.id,children:[Z.numero,". ",Z.titre]},Z.id))]}),n.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:Z=>_(Z.target.value),children:[n.jsx("option",{value:"",children:"Tous les types"}),xd.map(Z=>n.jsxs("option",{value:Z.value,children:[Z.icon," ",Z.label]},Z.value))]}),n.jsxs("select",{className:"form-select form-select--sm",value:N,onChange:Z=>S(Z.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"premium",children:" Premium"}),n.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),P?n.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des ressources..."})]}):p?d.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),n.jsx("p",{className:"empty-state__message",children:C||x||N||v?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!C&&!x&&!N&&!v&&n.jsx("button",{onClick:Ls,className:"btn btn--primary",children:"Crer la premire ressource"})]}):n.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:d.map(Z=>{const De=Fn(Z.type);return n.jsxs("div",{className:"resource-item",children:[n.jsx("div",{className:`resource-item__icon resource-item__icon--${Z.type}`,style:{backgroundColor:`${De.color}15`,color:De.color},children:De.icon}),n.jsxs("div",{className:"resource-item__content",children:[n.jsxs("div",{className:"resource-item__title",children:[Z.titre,Z.isPremium&&n.jsx("span",{className:"badge badge--premium",children:"Premium"}),!Z.actif&&n.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),n.jsxs("div",{className:"resource-item__meta",children:[n.jsx("span",{children:De.label}),Z.chapitre&&n.jsxs("span",{children:[" ",la(Z.chapitre)]}),Z.duree&&n.jsxs("span",{children:[" ",Z.duree," min"]}),Z.fichierNom&&n.jsxs("span",{children:[" ",Z.fichierNom]}),Z.tags&&Z.tags.length>0&&n.jsxs("span",{children:[" ",Z.tags.join(", ")]})]})]}),n.jsxs("div",{className:"resource-item__actions",children:[n.jsx("button",{onClick:()=>$s(Z),className:`table-action-btn ${Z.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:Z.isPremium?"Passer en gratuit":"Passer en Premium",children:Z.isPremium?"":""}),(Z.fichierURL||Z.urlExterne)&&n.jsx("button",{onClick:()=>Ja(Z),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),n.jsx("button",{onClick:()=>nn(Z),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),n.jsx("button",{onClick:()=>Xm(Z),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:W===Z.id,children:W===Z.id?"":""})]})]},Z.id)})}):n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),n.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),ge&&n.jsx("div",{className:"modal-overlay",onClick:xr,children:n.jsxs("div",{className:"modal modal--xl",onClick:Z=>Z.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:de?"Modifier la ressource":"Nouvelle ressource"}),n.jsx("button",{onClick:xr,className:"modal__close",children:""})]}),n.jsxs("form",{onSubmit:Zm,children:[n.jsxs("div",{className:"modal__body",children:[!de&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),n.jsxs("select",{name:"disciplineId",className:`form-select ${qe.disciplineId?"form-select--error":""}`,value:V.disciplineId,onChange:xt,children:[n.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(Z=>n.jsxs("option",{value:Z.id,children:[Z.icone," ",Z.nom," (",Z.classe,")"]},Z.id))]}),qe.disciplineId&&n.jsx("span",{className:"form-error",children:qe.disciplineId})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",style:{flex:2},children:[n.jsx("label",{className:"form-label form-label--required",children:"Titre"}),n.jsx("input",{type:"text",name:"titre",className:`form-input ${qe.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:V.titre,onChange:xt}),qe.titre&&n.jsx("span",{className:"form-error",children:qe.titre})]}),n.jsxs("div",{className:"form-group",style:{flex:1},children:[n.jsx("label",{className:"form-label form-label--required",children:"Type"}),n.jsx("select",{name:"type",className:`form-select ${qe.type?"form-select--error":""}`,value:V.type,onChange:xt,children:xd.map(Z=>n.jsxs("option",{value:Z.value,children:[Z.icon," ",Z.label]},Z.value))}),qe.type&&n.jsx("span",{className:"form-error",children:qe.type})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),n.jsxs("select",{name:"chapitreId",className:"form-select",value:V.chapitre||"",onChange:xt,disabled:O,children:[n.jsx("option",{value:"",children:"Aucun chapitre"}),a.map(Z=>n.jsxs("option",{value:Z.id,children:[Z.numero,". ",Z.titre]},Z.id))]})]}),n.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[n.jsx("label",{className:"form-label",children:"Ordre"}),n.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:V.ordre,onChange:xt})]}),n.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[n.jsx("label",{className:"form-label",children:"Dure (min)"}),n.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:V.duree||"",onChange:xt})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:V.description||"",onChange:xt})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Fichier",n.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",yd[V.type].join(", ")," - max ",bv," Mo)"]})]}),n.jsxs("div",{className:"file-upload",children:[n.jsx("input",{ref:sa,type:"file",accept:yd[V.type].join(","),onChange:Un,className:"file-upload__input",id:"file-input"}),!Qe&&!An?n.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[n.jsx("div",{className:"file-upload__icon",children:""}),n.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),n.jsx("p",{className:"file-upload__hint",children:yd[V.type].join(", ")})]}):n.jsxs("div",{className:"file-upload__preview",children:[Qe?.type.startsWith("image/")&&An&&n.jsx("img",{src:An,alt:"Aperu",className:"file-preview__image"}),Qe?.type.startsWith("video/")&&An&&n.jsx("video",{src:An,controls:!0,className:"file-preview__video"}),!Qe?.type.startsWith("image/")&&!Qe?.type.startsWith("video/")&&n.jsx("div",{className:"file-preview__document",children:n.jsx("span",{className:"file-preview__icon",children:Fn(V.type).icon})}),n.jsxs("div",{className:"file-preview__info",children:[n.jsx("p",{className:"file-preview__name",children:Qe?.name||de?.fichierNom}),Qe&&n.jsx("p",{className:"file-preview__size",children:Ui(Qe.size)})]}),n.jsx("button",{type:"button",onClick:_r,className:"file-preview__remove",children:""})]})]}),qe.fichier&&n.jsx("span",{className:"form-error",children:qe.fichier}),Q&&n.jsxs("div",{className:"upload-progress",children:[n.jsx("div",{className:"upload-progress__bar",style:{width:`${T}%`}}),n.jsxs("span",{className:"upload-progress__text",children:[T,"%"]})]})]}),V.type==="video"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),n.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:V.urlExterne||"",onChange:xt}),n.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),V.type==="cours"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Contenu du cours"}),n.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:V.contenu||"",onChange:xt}),n.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Tags"}),n.jsxs("div",{className:"tags-input",children:[n.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:ce,onChange:Z=>Ce(Z.target.value),onKeyPress:Z=>Z.key==="Enter"&&(Z.preventDefault(),au())}),n.jsx("button",{type:"button",onClick:au,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),V.tags&&V.tags.length>0&&n.jsx("div",{className:"tags-list",children:V.tags.map((Z,De)=>n.jsxs("span",{className:"tag",children:[Z,n.jsx("button",{type:"button",onClick:()=>Wm(De),className:"tag__remove",children:""})]},De))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Options"}),n.jsxs("div",{className:"form-options",children:[n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"isPremium",checked:V.isPremium,onChange:xt}),n.jsx("span",{children:"Contenu Premium "})]}),n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"actif",checked:V.actif!==!1,onChange:xt}),n.jsx("span",{children:"Ressource active"})]})]})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{type:"button",onClick:xr,className:"btn btn--outline",disabled:L||Q,children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn btn--primary",disabled:L||Q,children:L||Q?Q?`Upload ${T}%...`:"Enregistrement...":de?"Mettre  jour":"Crer la ressource"})]})]})]})}),he&&$&&n.jsx("div",{className:"modal-overlay",onClick:xr,children:n.jsxs("div",{className:"modal modal--xl",onClick:Z=>Z.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsxs("h2",{className:"modal__title",children:[Fn($.type).icon," ",$.titre]}),n.jsx("button",{onClick:xr,className:"modal__close",children:""})]}),n.jsxs("div",{className:"modal__body",children:[$.type==="video"&&$.urlExterne?n.jsx("div",{className:"preview-video",children:n.jsx("iframe",{src:$.urlExterne.replace("watch?v=","embed/"),title:$.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):$.fichierURL?n.jsx("div",{className:"preview-file",children:$.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?n.jsx("img",{src:$.fichierURL,alt:$.titre}):$.fichierURL.match(/\.(mp4|webm)$/i)?n.jsx("video",{src:$.fichierURL,controls:!0}):$.fichierURL.match(/\.pdf$/i)?n.jsx("iframe",{src:$.fichierURL,title:$.titre}):n.jsxs("div",{className:"preview-download",children:[n.jsx("span",{className:"preview-download__icon",children:Fn($.type).icon}),n.jsx("p",{children:$.fichierNom}),n.jsx("a",{href:$.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):$.contenu?n.jsx("div",{className:"preview-content",children:n.jsx("p",{children:$.contenu})}):n.jsx("div",{className:"preview-empty",children:n.jsx("p",{children:"Aucun contenu  prvisualiser"})}),n.jsxs("div",{className:"preview-info",children:[$.description&&n.jsx("p",{className:"preview-description",children:$.description}),n.jsxs("div",{className:"preview-meta",children:[n.jsxs("span",{children:["Type : ",Fn($.type).label]}),$.duree&&n.jsxs("span",{children:["Dure : ",$.duree," min"]}),$.isPremium&&n.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),me&&ie&&n.jsx("div",{className:"modal-overlay",onClick:xr,children:n.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),n.jsx("button",{onClick:xr,className:"modal__close",children:""})]}),n.jsxs("div",{className:"modal__body",children:[n.jsxs("p",{children:["Supprimer la ressource ",n.jsx("strong",{children:ie.titre})," ?"]}),ie.fichierURL&&n.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{onClick:xr,className:"btn btn--outline",children:"Annuler"}),n.jsx("button",{onClick:Is,className:"btn btn--danger",disabled:W!==null,children:W?"Suppression...":"Supprimer"})]})]})}),n.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},zA=_e(oe,"quizzes"),OA=async e=>{try{let t=Le(zA,nt("titre","asc"));e?.disciplineId;let a=(await Te(t)).docs.map(l=>({id:l.id,...l.data()}));return e?.isPremium,e?.difficulte,a}catch(t){throw console.error("Erreur lors de la rcupration des quiz :",t),t}},$q=async e=>{try{const t=await Gt(be(oe,"quizzes",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){throw console.error("Erreur lors de la rcupration du quiz :",t),t}},Bq=async e=>{try{return(await nr(zA,{...e,createdAt:Fe.now(),updatedAt:Fe.now()})).id}catch(t){throw console.error("Erreur lors de la cration du quiz :",t),t}},Uq=async(e,t)=>{try{await et(be(oe,"quizzes",e),{...t,updatedAt:Fe.now()})}catch(r){throw console.error("Erreur lors de la mise  jour du quiz :",r),r}},Fq=async e=>{try{await Ln(be(oe,"quizzes",e))}catch(t){throw console.error("Erreur lors de la suppression du quiz :",t),t}},Gq=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,s_=()=>({id:Gq(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),l_=e=>{const t=e.questions||[],r=t.reduce((l,o)=>l+(o.points||1),0),a={facile:t.filter(l=>l.difficulte==="facile").length,moyen:t.filter(l=>l.difficulte==="moyen").length,difficile:t.filter(l=>l.difficulte==="difficile").length};return{nombreQuestions:t.length,totalPoints:r,parDifficulte:a,duree:e.duree||0}},Hq=()=>{const[e,t]=b.useState([]),[r,a]=b.useState([]),[l,o]=b.useState(!0),[u,d]=b.useState(null),[m,p]=b.useState(null),[h,v]=b.useState(""),[y,x]=b.useState(""),[_,N]=b.useState(""),[S,C]=b.useState(""),[z,w]=b.useState(!1),[E,O]=b.useState("list"),[M,P]=b.useState(null),[q,L]=b.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[Y,W]=b.useState(null),[B,Q]=b.useState(!1),[k,T]=b.useState(null),[R,J]=b.useState(null),[H,ve]=b.useState({}),[U,ge]=b.useState(!1),re=b.useCallback(async()=>{o(!0),d(null);try{const[ce,Ce]=await Promise.all([OA(),Ii.getAll()]);t(ce),a(Ce.map(ke=>({id:ke.id,nom:ke.nom||ke.name||ke.id})))}catch(ce){d("Erreur lors du chargement des donnes."),console.error(ce)}finally{o(!1)}},[]);b.useEffect(()=>{re()},[re]),b.useEffect(()=>{if(m){const ce=setTimeout(()=>p(null),4e3);return()=>clearTimeout(ce)}},[m]);const me=e.filter(ce=>{if(h){const Ce=h.toLowerCase();if(!ce.titre.toLowerCase().includes(Ce))return!1}return!(y&&ce.disciplineId!==y||_==="true"&&!ce.isPremium||_==="false"&&ce.isPremium||S&&!ce.questions?.some(ke=>ke.difficulte===S))}),xe=()=>{P(null),L({disciplineId:"",titre:"",questions:[s_()],duree:15,isPremium:!1,noteMinimale:50}),W(null),O("form")},he=ce=>{P(ce),L({disciplineId:ce.disciplineId,titre:ce.titre,questions:ce.questions||[],duree:ce.duree||15,isPremium:ce.isPremium||!1,noteMinimale:ce.noteMinimale||50}),W(null),O("form")},F=async()=>{if(!q.titre.trim()){d("Le titre du quiz est obligatoire.");return}if(!q.disciplineId){d("Veuillez slectionner une discipline.");return}if(q.questions.length===0){d("Le quiz doit contenir au moins une question.");return}for(let ce=0;ce<q.questions.length;ce++){const Ce=q.questions[ce];if(!Ce.question.trim()){d(`La question ${ce+1} n'a pas d'nonc.`);return}if(Ce.options.filter($e=>!$e.trim()).length>0){d(`La question ${ce+1} a des options vides.`);return}}Q(!0),d(null);try{M?(await Uq(M.id,q),p("Quiz mis  jour avec succs !")):(await Bq(q),p("Quiz cr avec succs !")),await re(),O("list")}catch(ce){d("Erreur lors de la sauvegarde du quiz."),console.error(ce)}finally{Q(!1)}},de=async ce=>{try{await Fq(ce),p("Quiz supprim avec succs."),T(null),await re()}catch(Ce){d("Erreur lors de la suppression du quiz."),console.error(Ce)}},Ee=()=>{const ce=s_();L(Ce=>({...Ce,questions:[...Ce.questions,ce]})),W(ce.id)},ie=ce=>{const Ce=q.questions.find(gr=>gr.id===ce);if(!Ce)return;const ke={...Ce,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${Ce.question} (copie)`},$e=q.questions.findIndex(gr=>gr.id===ce),Nt=[...q.questions];Nt.splice($e+1,0,ke),L(gr=>({...gr,questions:Nt})),W(ke.id)},K=ce=>{L(Ce=>({...Ce,questions:Ce.questions.filter(ke=>ke.id!==ce)})),Y===ce&&W(null)},$=(ce,Ce,ke)=>{L($e=>({...$e,questions:$e.questions.map(Nt=>Nt.id===ce?{...Nt,[Ce]:ke}:Nt)}))},se=(ce,Ce,ke)=>{L($e=>({...$e,questions:$e.questions.map(Nt=>Nt.id===ce?{...Nt,options:Nt.options.map((gr,Bn)=>Bn===Ce?ke:gr)}:Nt)}))},V=ce=>{J(ce),ve({}),ge(!1),O("preview")},ye=(ce,Ce)=>{U||ve(ke=>({...ke,[ce]:Ce}))},qe=()=>{ge(!0)},Ie=ce=>r.find(Ce=>Ce.id===ce)?.nom||ce,Qe=({level:ce})=>{const Ce={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return n.jsx("span",{className:`quiz-badge ${Ce[ce]||"quiz-badge-moyen"}`,children:ce.charAt(0).toUpperCase()+ce.slice(1)})},Qt=()=>n.jsxs(n.Fragment,{children:[u&&n.jsxs("div",{className:"admin-message admin-message-error",children:[n.jsx(Xd,{size:18}),n.jsx("span",{children:u}),n.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:n.jsx(Oi,{size:16})})]}),m&&n.jsxs("div",{className:"admin-message admin-message-success",children:[n.jsx(Dt,{size:18}),n.jsx("span",{children:m})]})]}),An=()=>n.jsxs("div",{className:"quiz-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx(jn,{size:24})," Gestion des Quiz"]}),n.jsxs("p",{className:"admin-subtitle",children:[e.length," quiz au total  ",me.length," affich(s)"]})]}),n.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:xe,children:[n.jsx(dc,{size:18})," Nouveau Quiz"]})]}),n.jsxs("div",{className:"admin-toolbar",children:[n.jsxs("div",{className:"admin-search-wrapper",children:[n.jsx(NA,{size:18,className:"admin-search-icon"}),n.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:h,onChange:ce=>v(ce.target.value)})]}),n.jsxs("button",{className:`admin-btn admin-btn-outline ${z?"active":""}`,onClick:()=>w(!z),children:[n.jsx(uy,{size:16})," Filtres",z?n.jsx(ax,{size:14}):n.jsx(Kd,{size:14})]})]}),z&&n.jsxs("div",{className:"admin-filters-panel",children:[n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Discipline"}),n.jsxs("select",{className:"admin-select",value:y,onChange:ce=>x(ce.target.value),children:[n.jsx("option",{value:"",children:"Toutes les disciplines"}),r.map(ce=>n.jsx("option",{value:ce.id,children:ce.nom},ce.id))]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Accs"}),n.jsxs("select",{className:"admin-select",value:_,onChange:ce=>N(ce.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"false",children:"Gratuit"}),n.jsx("option",{value:"true",children:"Premium"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Difficult"}),n.jsxs("select",{className:"admin-select",value:S,onChange:ce=>C(ce.target.value),children:[n.jsx("option",{value:"",children:"Toutes"}),n.jsx("option",{value:"facile",children:"Facile"}),n.jsx("option",{value:"moyen",children:"Moyen"}),n.jsx("option",{value:"difficile",children:"Difficile"})]})]}),n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),N(""),C(""),v("")},children:"Rinitialiser"})]}),l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des quiz..."})]}):me.length===0?n.jsxs("div",{className:"admin-empty-state",children:[n.jsx(Ud,{size:48}),n.jsx("h3",{children:"Aucun quiz trouv"}),n.jsx("p",{children:e.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),e.length===0&&n.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:xe,children:[n.jsx(dc,{size:18})," Crer un quiz"]})]}):n.jsx("div",{className:"quiz-grid",children:me.map(ce=>{const Ce=l_(ce);return n.jsxs("div",{className:"quiz-card",children:[n.jsxs("div",{className:"quiz-card-header",children:[n.jsxs("div",{className:"quiz-card-title-row",children:[n.jsx("h3",{className:"quiz-card-title",children:ce.titre}),ce.isPremium&&n.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[n.jsx(Zr,{size:12})," Premium"]})]}),n.jsx("span",{className:"quiz-card-discipline",children:Ie(ce.disciplineId)})]}),n.jsxs("div",{className:"quiz-card-stats",children:[n.jsxs("div",{className:"quiz-stat",children:[n.jsx(Ud,{size:14}),n.jsxs("span",{children:[Ce.nombreQuestions," question(s)"]})]}),n.jsxs("div",{className:"quiz-stat",children:[n.jsx(qi,{size:14}),n.jsxs("span",{children:[Ce.totalPoints," pts"]})]}),n.jsxs("div",{className:"quiz-stat",children:[n.jsx($l,{size:14}),n.jsxs("span",{children:[Ce.duree," min"]})]})]}),n.jsxs("div",{className:"quiz-card-difficulty",children:[Ce.parDifficulte.facile>0&&n.jsx(Qe,{level:"facile"}),Ce.parDifficulte.moyen>0&&n.jsx(Qe,{level:"moyen"}),Ce.parDifficulte.difficile>0&&n.jsx(Qe,{level:"difficile"})]}),n.jsxs("div",{className:"quiz-card-actions",children:[n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>V(ce),title:"Prvisualiser",children:[n.jsx(ql,{size:14})," Aperu"]}),n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>he(ce),title:"Modifier",children:[n.jsx(ZT,{size:14})," Modifier"]}),k===ce.id?n.jsxs("div",{className:"quiz-delete-confirm",children:[n.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>de(ce.id),children:"Confirmer"}),n.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>T(null),children:"Annuler"})]}):n.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>T(ce.id),title:"Supprimer",children:n.jsx(H1,{size:14})})]})]},ce.id)})})]}),rn=()=>n.jsxs("div",{className:"quiz-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx(jn,{size:24}),M?"Modifier le quiz":"Nouveau quiz"]}),n.jsxs("p",{className:"admin-subtitle",children:[q.questions.length," question(s) ajoute(s)"]})]}),n.jsxs("div",{className:"admin-header-actions",children:[n.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>O("list"),children:[n.jsx(Oi,{size:18})," Annuler"]}),n.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:F,disabled:B,children:[n.jsx(JT,{size:18})," ",B?"Enregistrement...":"Enregistrer"]})]})]}),n.jsxs("div",{className:"admin-card quiz-form-section",children:[n.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),n.jsxs("div",{className:"quiz-form-grid",children:[n.jsxs("div",{className:"admin-form-group quiz-form-full",children:[n.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),n.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:q.titre,onChange:ce=>L(Ce=>({...Ce,titre:ce.target.value}))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Discipline *"}),n.jsxs("select",{className:"admin-select",value:q.disciplineId,onChange:ce=>L(Ce=>({...Ce,disciplineId:ce.target.value})),children:[n.jsx("option",{value:"",children:"-- Slectionner --"}),r.map(ce=>n.jsx("option",{value:ce.id,children:ce.nom},ce.id))]})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),n.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:q.duree,onChange:ce=>L(Ce=>({...Ce,duree:parseInt(ce.target.value)||15}))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),n.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:q.noteMinimale,onChange:ce=>L(Ce=>({...Ce,noteMinimale:parseInt(ce.target.value)||50}))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Accs"}),n.jsxs("div",{className:`quiz-toggle ${q.isPremium?"quiz-toggle-active":""}`,onClick:()=>L(ce=>({...ce,isPremium:!ce.isPremium})),children:[n.jsx(Zr,{size:16}),n.jsx("span",{children:q.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),n.jsxs("div",{className:"admin-card quiz-form-section",children:[n.jsxs("div",{className:"quiz-questions-header",children:[n.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",q.questions.length,")"]}),n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Ee,children:[n.jsx(dc,{size:14})," Ajouter une question"]})]}),q.questions.length===0?n.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[n.jsx(Ud,{size:36}),n.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):n.jsx("div",{className:"quiz-questions-list",children:q.questions.map((ce,Ce)=>n.jsxs("div",{className:`quiz-question-item ${Y===ce.id?"expanded":""}`,children:[n.jsxs("div",{className:"quiz-question-header",onClick:()=>W(Y===ce.id?null:ce.id),children:[n.jsxs("div",{className:"quiz-question-header-left",children:[n.jsx(eq,{size:16,className:"quiz-grip-icon"}),n.jsxs("span",{className:"quiz-question-number",children:["Q",Ce+1]}),n.jsx("span",{className:"quiz-question-preview",children:ce.question||"Question sans nonc..."})]}),n.jsxs("div",{className:"quiz-question-header-right",children:[n.jsx(Qe,{level:ce.difficulte||"moyen"}),n.jsxs("span",{className:"quiz-question-points",children:[ce.points," pt(s)"]}),Y===ce.id?n.jsx(ax,{size:16}):n.jsx(Kd,{size:16})]})]}),Y===ce.id&&n.jsxs("div",{className:"quiz-question-body",children:[n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"nonc de la question *"}),n.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:ce.question,onChange:ke=>$(ce.id,"question",ke.target.value)})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),n.jsx("div",{className:"quiz-options-grid",children:ce.options.map((ke,$e)=>n.jsxs("div",{className:`quiz-option-item ${ce.reponseCorrecte===$e?"quiz-option-correct":""}`,children:[n.jsx("button",{type:"button",className:`quiz-option-radio ${ce.reponseCorrecte===$e?"active":""}`,onClick:()=>$(ce.id,"reponseCorrecte",$e),title:ce.reponseCorrecte===$e?"Bonne rponse":"Marquer comme bonne rponse",children:ce.reponseCorrecte===$e?n.jsx(Dt,{size:16}):n.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+$e)})}),n.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+$e)}`,value:ke,onChange:Nt=>se(ce.id,$e,Nt.target.value)})]},$e))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),n.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:ce.explication,onChange:ke=>$(ce.id,"explication",ke.target.value)})]}),n.jsxs("div",{className:"quiz-question-meta",children:[n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Difficult"}),n.jsxs("select",{className:"admin-select",value:ce.difficulte,onChange:ke=>$(ce.id,"difficulte",ke.target.value),children:[n.jsx("option",{value:"facile",children:"Facile"}),n.jsx("option",{value:"moyen",children:"Moyen"}),n.jsx("option",{value:"difficile",children:"Difficile"})]})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Points"}),n.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:ce.points,onChange:ke=>$(ce.id,"points",parseInt(ke.target.value)||1)})]})]}),n.jsxs("div",{className:"quiz-question-actions",children:[n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ie(ce.id),children:[n.jsx(tq,{size:14})," Dupliquer"]}),n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>K(ce.id),children:[n.jsx(H1,{size:14})," Supprimer"]})]})]})]},ce.id))}),q.questions.length>0&&n.jsx("div",{className:"quiz-add-question-bottom",children:n.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Ee,children:[n.jsx(dc,{size:16})," Ajouter une question"]})})]})]}),sa=()=>{if(!R)return null;const ce=l_(R);let Ce=0,ke=0;return U&&R.questions.forEach($e=>{ke+=$e.points||1,H[$e.id]===$e.reponseCorrecte&&(Ce+=$e.points||1)}),n.jsxs("div",{className:"quiz-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx(ql,{size:24})," Prvisualisation : ",R.titre]}),n.jsxs("p",{className:"admin-subtitle",children:[Ie(R.disciplineId),"  ",ce.nombreQuestions," questions  ",ce.duree," min"]})]}),n.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{O("list"),J(null)},children:[n.jsx(Oi,{size:18})," Fermer"]})]}),U&&n.jsxs("div",{className:`quiz-preview-score ${Ce/ke>=(R.noteMinimale||50)/100?"success":"fail"}`,children:[n.jsx(qi,{size:32}),n.jsxs("div",{children:[n.jsxs("h3",{children:["Score : ",Ce,"/",ke," (",Math.round(Ce/ke*100),"%)"]}),n.jsxs("p",{children:["Note minimale : ",R.noteMinimale||50,"% "," ",Ce/ke>=(R.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),n.jsx("div",{className:"quiz-preview-questions",children:R.questions.map(($e,Nt)=>{const gr=H[$e.id],Bn=gr===$e.reponseCorrecte;return n.jsxs("div",{className:"admin-card quiz-preview-question",children:[n.jsxs("div",{className:"quiz-preview-question-header",children:[n.jsxs("span",{className:"quiz-question-number",children:["Q",Nt+1]}),n.jsx(Qe,{level:$e.difficulte||"moyen"}),n.jsxs("span",{className:"quiz-question-points",children:[$e.points," pt(s)"]})]}),n.jsx("p",{className:"quiz-preview-question-text",children:$e.question}),n.jsx("div",{className:"quiz-preview-options",children:$e.options.map((Ls,nn)=>{let Ja="quiz-preview-option";return U?nn===$e.reponseCorrecte?Ja+=" correct":nn===gr&&!Bn&&(Ja+=" incorrect"):gr===nn&&(Ja+=" selected"),n.jsxs("button",{className:Ja,onClick:()=>ye($e.id,nn),disabled:U,children:[n.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+nn)}),n.jsx("span",{children:Ls}),U&&nn===$e.reponseCorrecte&&n.jsx(Dt,{size:16,className:"quiz-preview-check"})]},nn)})}),U&&$e.explication&&n.jsxs("div",{className:"quiz-preview-explication",children:[n.jsx("strong",{children:"Explication :"})," ",$e.explication]})]},$e.id)})}),!U&&n.jsx("div",{className:"quiz-preview-submit",children:n.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:qe,disabled:Object.keys(H).length<R.questions.length,children:[n.jsx(Dt,{size:18})," Soumettre (",Object.keys(H).length,"/",R.questions.length,")"]})})]})};return n.jsxs("div",{className:"admin-container",children:[Qt(),E==="list"&&An(),E==="form"&&rn(),E==="preview"&&sa()]})},DA=_e(oe,"users"),Qq=_e(oe,"quizResults"),Vq=async e=>{try{let t=Le(DA,nt("displayName","asc"));e?.role;let a=(await Te(t)).docs.map(l=>({uid:l.id,...l.data()}));return e?.isPremium,e?.isActive,e?.search,a}catch(t){throw console.error("Erreur lors de la rcupration des utilisateurs :",t),t}},Yq=async(e,t)=>{try{await et(be(oe,"users",e),{role:t,updatedAt:Fe.now()})}catch(r){throw console.error("Erreur lors de la mise  jour du rle :",r),r}},Kq=async(e,t)=>{try{const r={isPremium:t,updatedAt:Fe.now()};if(t){const a=new Date;a.setDate(a.getDate()+30),r.subscriptionEnd=Fe.fromDate(a)}else r.subscriptionEnd=null;await et(be(oe,"users",e),r)}catch(r){throw console.error("Erreur lors de la mise  jour du statut Premium :",r),r}},Xq=async(e,t)=>{try{await et(be(oe,"users",e),{isActive:t,updatedAt:Fe.now()})}catch(r){throw console.error("Erreur lors du changement de statut du compte :",r),r}},Wq=async e=>{try{const t=Le(Qq,Ae("userId","==",e)),a=(await Te(t)).docs.map(m=>({id:m.id,...m.data()})),l=a.length,o=a.filter(m=>m.reussi).length,u=l>0?Math.round(a.reduce((m,p)=>m+p.score,0)/l):0,d=a.length>0?new Date(Math.max(...a.map(m=>{const p=m.datePassage;return p?.toDate?p.toDate().getTime():new Date(p).getTime()}))):null;return{totalQuizPasses:l,scoresMoyens:u,quizReussis:o,dernierQuiz:d}}catch(t){return console.error("Erreur lors du calcul des statistiques :",t),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},Zq=async()=>{try{const t=(await Te(DA)).docs.map(r=>r.data());return{total:t.length,admins:t.filter(r=>r.role==="admin").length,profs:t.filter(r=>r.role==="prof").length,eleves:t.filter(r=>r.role==="eleve").length,premium:t.filter(r=>r.isPremium).length,actifs:t.filter(r=>r.isActive!==!1).length}}catch(e){throw console.error("Erreur lors du calcul des stats globales :",e),e}},Jq=()=>{const[e,t]=b.useState([]),[r,a]=b.useState(null),[l,o]=b.useState(!0),[u,d]=b.useState(null),[m,p]=b.useState(null),[h,v]=b.useState(""),[y,x]=b.useState(""),[_,N]=b.useState(""),[S,C]=b.useState(""),[z,w]=b.useState(!1),[E]=vA();b.useEffect(()=>{E.get("filter")==="premium"&&N("true")},[E]);const[O,M]=b.useState(null),[P,q]=b.useState(null),[L,Y]=b.useState(!1),[W,B]=b.useState(null),[Q,k]=b.useState(null),T=b.useCallback(async()=>{o(!0),d(null);try{const[F,de]=await Promise.all([Vq(),Zq()]);t(F),a(de)}catch(F){d("Erreur lors du chargement des utilisateurs."),console.error(F)}finally{o(!1)}},[]);b.useEffect(()=>{T()},[T]),b.useEffect(()=>{if(m){const F=setTimeout(()=>p(null),4e3);return()=>clearTimeout(F)}},[m]);const R=e.filter(F=>{if(h){const de=h.toLowerCase();if(!F.displayName?.toLowerCase().includes(de)&&!F.email?.toLowerCase().includes(de))return!1}return!(y&&F.role!==y||_==="true"&&!F.isPremium||_==="false"&&F.isPremium||S==="true"&&F.isActive===!1||S==="false"&&F.isActive!==!1)}),J=async F=>{M(F),Y(!0);try{const de=await Wq(F.uid);q(de)}catch(de){console.error("Erreur lors du chargement des statistiques :",de),q(null)}finally{Y(!1)}},H=async()=>{if(Q){B(Q.userId);try{switch(Q.type){case"role":await Yq(Q.userId,Q.value),p("Rle mis  jour avec succs.");break;case"premium":await Kq(Q.userId,Q.value),p(Q.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await Xq(Q.userId,Q.value),p(Q.value?"Compte ractiv.":"Compte dsactiv.");break}await T()}catch(F){d("Erreur lors de l'excution de l'action."),console.error(F)}finally{B(null),k(null)}}},ve=({role:F})=>{const de={admin:{icon:n.jsx(cy,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:n.jsx(Il,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:n.jsx(jn,{size:12}),className:"user-badge-eleve",label:"lve"}},Ee=de[F]||de.eleve;return n.jsxs("span",{className:`user-badge ${Ee.className}`,children:[Ee.icon," ",Ee.label]})},U=F=>F?(F?.toDate?F.toDate():new Date(F)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",ge=F=>F?F.charAt(0).toUpperCase():"?",re=()=>n.jsxs(n.Fragment,{children:[u&&n.jsxs("div",{className:"admin-message admin-message-error",children:[n.jsx(Xd,{size:18}),n.jsx("span",{children:u}),n.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:n.jsx(Oi,{size:16})})]}),m&&n.jsxs("div",{className:"admin-message admin-message-success",children:[n.jsx(Dt,{size:18}),n.jsx("span",{children:m})]})]}),me=()=>{if(!r)return null;const F=[{label:"Total",value:r.total,icon:n.jsx(Bd,{size:20}),color:"stat-blue"},{label:"lves",value:r.eleves,icon:n.jsx(jn,{size:20}),color:"stat-green"},{label:"Professeurs",value:r.profs,icon:n.jsx(Il,{size:20}),color:"stat-purple"},{label:"Premium",value:r.premium,icon:n.jsx(Zr,{size:20}),color:"stat-gold"}];return n.jsx("div",{className:"user-stats-grid",children:F.map(de=>n.jsxs("div",{className:`user-stat-card ${de.color}`,children:[n.jsx("div",{className:"user-stat-icon",children:de.icon}),n.jsxs("div",{className:"user-stat-info",children:[n.jsx("span",{className:"user-stat-value",children:de.value}),n.jsx("span",{className:"user-stat-label",children:de.label})]})]},de.label))})},xe=()=>Q?n.jsx("div",{className:"admin-modal-overlay",onClick:()=>k(null),children:n.jsxs("div",{className:"admin-modal",onClick:F=>F.stopPropagation(),children:[n.jsxs("div",{className:"admin-modal-header",children:[n.jsx("h3",{children:"Confirmer l'action"}),n.jsx("button",{className:"admin-modal-close",onClick:()=>k(null),children:n.jsx(Oi,{size:20})})]}),n.jsx("div",{className:"admin-modal-body",children:n.jsx("p",{children:Q.label})}),n.jsxs("div",{className:"admin-modal-footer",children:[n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>k(null),children:"Annuler"}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:H,disabled:W===Q.userId,children:W===Q.userId?"En cours...":"Confirmer"})]})]})}):null,he=()=>O?n.jsx("div",{className:"admin-modal-overlay",onClick:()=>M(null),children:n.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:F=>F.stopPropagation(),children:[n.jsxs("div",{className:"admin-modal-header",children:[n.jsx("h3",{children:"Dtail de l'utilisateur"}),n.jsx("button",{className:"admin-modal-close",onClick:()=>M(null),children:n.jsx(Oi,{size:20})})]}),n.jsxs("div",{className:"admin-modal-body",children:[n.jsxs("div",{className:"user-detail-profile",children:[n.jsx("div",{className:"user-detail-avatar",children:ge(O.displayName)}),n.jsxs("div",{className:"user-detail-info",children:[n.jsx("h4",{children:O.displayName||"Sans nom"}),n.jsx("p",{children:O.email}),n.jsxs("div",{className:"user-detail-badges",children:[n.jsx(ve,{role:O.role}),O.isPremium&&n.jsxs("span",{className:"user-badge user-badge-premium",children:[n.jsx(Zr,{size:12})," Premium"]}),n.jsx("span",{className:`user-badge ${O.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:O.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),n.jsxs("div",{className:"user-detail-dates",children:[n.jsxs("div",{children:[n.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),n.jsx("span",{children:U(O.createdAt)})]}),O.isPremium&&O.subscriptionEnd&&n.jsxs("div",{children:[n.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),n.jsx("span",{children:U(O.subscriptionEnd)})]})]}),n.jsxs("div",{className:"user-detail-stats-section",children:[n.jsxs("h4",{children:[n.jsx(xs,{size:18})," Statistiques"]}),L?n.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des statistiques..."})]}):P?n.jsxs("div",{className:"user-detail-stats-grid",children:[n.jsxs("div",{className:"user-detail-stat",children:[n.jsx(jn,{size:20}),n.jsx("span",{className:"user-detail-stat-value",children:P.totalQuizPasses}),n.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),n.jsxs("div",{className:"user-detail-stat",children:[n.jsx(fc,{size:20}),n.jsxs("span",{className:"user-detail-stat-value",children:[P.scoresMoyens,"%"]}),n.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),n.jsxs("div",{className:"user-detail-stat",children:[n.jsx(qi,{size:20}),n.jsx("span",{className:"user-detail-stat-value",children:P.quizReussis}),n.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),n.jsxs("div",{className:"user-detail-stat",children:[n.jsx($l,{size:20}),n.jsx("span",{className:"user-detail-stat-value",children:P.dernierQuiz?U(P.dernierQuiz):"Aucun"}),n.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):n.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return n.jsxs("div",{className:"admin-container",children:[re(),xe(),he(),n.jsxs("div",{className:"user-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx(Bd,{size:24})," Gestion des Utilisateurs"]}),n.jsxs("p",{className:"admin-subtitle",children:[e.length," utilisateur(s) au total  ",R.length," affich(s)"]})]}),n.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:T,children:[n.jsx(rq,{size:16})," Actualiser"]})]}),me(),n.jsxs("div",{className:"admin-toolbar",children:[n.jsxs("div",{className:"admin-search-wrapper",children:[n.jsx(NA,{size:18,className:"admin-search-icon"}),n.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:h,onChange:F=>v(F.target.value)})]}),n.jsxs("button",{className:`admin-btn admin-btn-outline ${z?"active":""}`,onClick:()=>w(!z),children:[n.jsx(uy,{size:16})," Filtres",z?n.jsx(ax,{size:14}):n.jsx(Kd,{size:14})]})]}),z&&n.jsxs("div",{className:"admin-filters-panel",children:[n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Rle"}),n.jsxs("select",{className:"admin-select",value:y,onChange:F=>x(F.target.value),children:[n.jsx("option",{value:"",children:"Tous les rles"}),n.jsx("option",{value:"admin",children:"Admin"}),n.jsx("option",{value:"prof",children:"Professeur"}),n.jsx("option",{value:"eleve",children:"lve"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),n.jsxs("select",{className:"admin-select",value:_,onChange:F=>N(F.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"true",children:"Premium"}),n.jsx("option",{value:"false",children:"Gratuit"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Statut"}),n.jsxs("select",{className:"admin-select",value:S,onChange:F=>C(F.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"true",children:"Actifs"}),n.jsx("option",{value:"false",children:"Dsactivs"})]})]}),n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),N(""),C(""),v("")},children:"Rinitialiser"})]}),l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des utilisateurs..."})]}):R.length===0?n.jsxs("div",{className:"admin-empty-state",children:[n.jsx(Bd,{size:48}),n.jsx("h3",{children:"Aucun utilisateur trouv"}),n.jsx("p",{children:e.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):n.jsx("div",{className:"user-table-wrapper",children:n.jsxs("table",{className:"user-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Utilisateur"}),n.jsx("th",{children:"Rle"}),n.jsx("th",{children:"Abonnement"}),n.jsx("th",{children:"Statut"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:R.map(F=>n.jsxs("tr",{className:F.isActive===!1?"user-row-inactive":"",children:[n.jsx("td",{children:n.jsxs("div",{className:"user-cell-info",children:[n.jsx("div",{className:"user-avatar-sm",children:ge(F.displayName)}),n.jsxs("div",{children:[n.jsx("span",{className:"user-cell-name",children:F.displayName||"Sans nom"}),n.jsx("span",{className:"user-cell-email",children:F.email})]})]})}),n.jsx("td",{children:n.jsxs("select",{className:"admin-select admin-select-sm",value:F.role,onChange:de=>k({type:"role",userId:F.uid,value:de.target.value,label:`Changer le rle de "${F.displayName||F.email}" en "${de.target.value}" ?`}),children:[n.jsx("option",{value:"eleve",children:"lve"}),n.jsx("option",{value:"prof",children:"Professeur"}),n.jsx("option",{value:"admin",children:"Admin"})]})}),n.jsx("td",{children:n.jsx("button",{className:`user-premium-toggle ${F.isPremium?"active":""}`,onClick:()=>k({type:"premium",userId:F.uid,value:!F.isPremium,label:F.isPremium?`Dsactiver le statut Premium de "${F.displayName||F.email}" ?`:`Activer le statut Premium de "${F.displayName||F.email}" pour 30 jours ?`}),disabled:W===F.uid,children:F.isPremium?n.jsxs(n.Fragment,{children:[n.jsx(uc,{size:14})," Premium"]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{size:14})," Gratuit"]})})}),n.jsx("td",{children:n.jsx("button",{className:`user-status-toggle ${F.isActive!==!1?"active":"inactive"}`,onClick:()=>k({type:"active",userId:F.uid,value:F.isActive===!1,label:F.isActive===!1?`Ractiver le compte de "${F.displayName||F.email}" ?`:`Dsactiver le compte de "${F.displayName||F.email}" ?`}),disabled:W===F.uid,children:F.isActive!==!1?n.jsxs(n.Fragment,{children:[n.jsx(nq,{size:14})," Actif"]}):n.jsxs(n.Fragment,{children:[n.jsx(aq,{size:14})," Dsactiv"]})})}),n.jsx("td",{children:n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>J(F),title:"Voir les statistiques",children:[n.jsx(ql,{size:14})," Dtail"]})})]},F.uid))})]})})]})]})},eR=()=>{const[e,t]=b.useState([]),[r,a]=b.useState(null),[l,o]=b.useState(!0),[u,d]=b.useState(null),[m,p]=b.useState(""),[h,v]=b.useState(""),[y,x]=b.useState(""),[_,N]=b.useState(!1),S=b.useCallback(async()=>{try{o(!0),d(null);const O=await Te(_e(oe,"users")),M=new Map;O.docs.forEach(me=>{const xe=me.data();M.set(me.id,{name:xe.displayName||"Sans nom",email:xe.email||""})});const P=await Te(_e(oe,"quizzes")),q=new Map;P.docs.forEach(me=>{const xe=me.data();q.set(me.id,{titre:xe.titre||xe.quizTitre||"Quiz sans titre",discipline:xe.disciplineNom||xe.matiereNom||""})});const L=await Te(_e(oe,"quizzes_v2")),Y=new Map;L.docs.forEach(me=>{const xe=me.data();Y.set(me.id,{titre:xe.titre||"Quiz avanc sans titre",discipline:xe.disciplineNom||""})});const W=[];try{(await Te(Le(_e(oe,"quiz_results"),nt("datePassage","desc"),ta(200)))).docs.forEach(xe=>{const he=xe.data(),F=M.get(he.userId)||{name:"Inconnu",email:""},de=q.get(he.quizId)||{titre:he.quizTitre||"Quiz",discipline:he.disciplineNom||""},Ee=he.pourcentage??(he.totalPoints>0?Math.round(he.score/he.totalPoints*100):he.score>0?Math.round(he.score/20*100):0);W.push({id:xe.id,quizId:he.quizId||"",quizTitre:de.titre,userId:he.userId||"",userName:F.name,userEmail:F.email,score:he.score||0,scoreMax:he.totalPoints||20,pourcentage:Ee,reussi:he.reussi??Ee>=50,tempsEcoule:he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:de.discipline})})}catch(me){console.warn("Pas de rsultats v1 ou index manquant:",me)}const B=[];try{(await Te(Le(_e(oe,"quiz_results_v2"),nt("datePassage","desc"),ta(200)))).docs.forEach(xe=>{const he=xe.data(),F=M.get(he.userId)||{name:"Inconnu",email:""},de=Y.get(he.quizId)||{titre:he.quizTitre||"Quiz avanc",discipline:he.disciplineNom||""},Ee=he.scoreMax>0?Math.round(he.score/he.scoreMax*100):0;B.push({id:xe.id,quizId:he.quizId||"",quizTitre:de.titre,userId:he.userId||"",userName:F.name,userEmail:F.email,score:he.score||0,scoreMax:he.scoreMax||0,pourcentage:Ee,reussi:he.reussi??Ee>=50,tempsEcoule:he.tempsTotal||he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:de.discipline})})}catch(me){console.warn("Pas de rsultats v2 ou index manquant:",me)}const Q=[...W,...B].sort((me,xe)=>xe.datePassage.getTime()-me.datePassage.getTime());t(Q);const k=new Date,T=new Date(k.getFullYear(),k.getMonth(),k.getDate()),R=new Date(T.getTime()-10080*60*1e3),J=Q.length,H=J>0?Math.round(Q.reduce((me,xe)=>me+xe.pourcentage,0)/J):0,ve=J>0?Math.round(Q.filter(me=>me.reussi).length/J*100):0,U=J>0?Math.round(Q.reduce((me,xe)=>me+xe.tempsEcoule,0)/J):0,ge=Q.filter(me=>me.datePassage>=T).length,re=Q.filter(me=>me.datePassage>=R).length;a({totalResultats:J,moyenneGenerale:H,tauxReussite:ve,tempsEcouleMoyen:U,resultatsAujourdHui:ge,resultats7Jours:re})}catch(O){console.error("Erreur chargement rsultats:",O),d("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);b.useEffect(()=>{S()},[S]);const C=e.filter(O=>{if(m&&O.type!==m||h==="true"&&!O.reussi||h==="false"&&O.reussi)return!1;if(y){const M=y.toLowerCase();if(!O.userName.toLowerCase().includes(M)&&!O.userEmail.toLowerCase().includes(M)&&!O.quizTitre.toLowerCase().includes(M)&&!O.disciplineNom.toLowerCase().includes(M))return!1}return!0}),z=O=>{if(O<60)return`${O}s`;const M=Math.floor(O/60),P=O%60;return P>0?`${M}min ${P}s`:`${M}min`},w=O=>O.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=O=>O>=80?"results-score--excellent":O>=60?"results-score--bien":O>=40?"results-score--moyen":"results-score--faible";return n.jsxs("div",{className:"results-admin",children:[n.jsxs("div",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),n.jsx("div",{className:"admin-page-header__actions",children:n.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:S,children:" Actualiser"})})]}),r&&n.jsxs("div",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalResultats}),n.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsxs("div",{className:"stat-card__value",children:[r.moyenneGenerale,"%"]}),n.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsxs("div",{className:"stat-card__value",children:[r.tauxReussite,"%"]}),n.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.resultatsAujourdHui}),n.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),n.jsxs("div",{className:"admin-toolbar",children:[n.jsxs("div",{className:"admin-search",children:[n.jsx("span",{className:"admin-search-icon",children:""}),n.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:y,onChange:O=>x(O.target.value)})]}),n.jsx("button",{className:`admin-btn admin-btn-ghost ${_?"active":""}`,onClick:()=>N(!_),children:" Filtres"})]}),_&&n.jsxs("div",{className:"admin-filters-panel",children:[n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),n.jsxs("select",{className:"admin-select",value:m,onChange:O=>p(O.target.value),children:[n.jsx("option",{value:"",children:"Tous les types"}),n.jsx("option",{value:"classique",children:"Classique (v1)"}),n.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),n.jsxs("select",{className:"admin-select",value:h,onChange:O=>v(O.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"true",children:"Russis"}),n.jsx("option",{value:"false",children:"chous"})]})]}),n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{p(""),v(""),x("")},children:"Rinitialiser"})]}),l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des rsultats..."})]}):u?n.jsxs("div",{className:"admin-error",children:[n.jsxs("p",{children:[" ",u]}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,children:"Ressayer"})]}):C.length===0?n.jsxs("div",{className:"admin-empty-state",children:[n.jsx("span",{style:{fontSize:"3rem"},children:""}),n.jsx("h3",{children:"Aucun rsultat trouv"}),n.jsx("p",{children:e.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):n.jsxs("div",{className:"results-table-wrapper",children:[n.jsxs("table",{className:"results-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"lve"}),n.jsx("th",{children:"Quiz"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Score"}),n.jsx("th",{children:"Rsultat"}),n.jsx("th",{children:"Dure"}),n.jsx("th",{children:"Date"})]})}),n.jsx("tbody",{children:C.map(O=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"results-cell-user",children:[n.jsx("span",{className:"results-cell-name",children:O.userName}),n.jsx("span",{className:"results-cell-email",children:O.userEmail})]})}),n.jsx("td",{children:n.jsxs("div",{className:"results-cell-quiz",children:[n.jsx("span",{className:"results-cell-quiz-title",children:O.quizTitre}),O.disciplineNom&&n.jsx("span",{className:"results-cell-discipline",children:O.disciplineNom})]})}),n.jsx("td",{children:n.jsx("span",{className:`results-badge results-badge--${O.type}`,children:O.type==="classique"?" Classique":" Avanc"})}),n.jsxs("td",{children:[n.jsxs("span",{className:`results-score ${E(O.pourcentage)}`,children:[O.pourcentage,"%"]}),n.jsxs("span",{className:"results-score-detail",children:[O.score,"/",O.scoreMax]})]}),n.jsx("td",{children:n.jsx("span",{className:`results-status ${O.reussi?"results-status--success":"results-status--fail"}`,children:O.reussi?" Russi":" chou"})}),n.jsx("td",{className:"results-cell-duration",children:z(O.tempsEcoule)}),n.jsx("td",{className:"results-cell-date",children:w(O.datePassage)})]},`${O.type}-${O.id}`))})]}),n.jsx("div",{className:"results-footer",children:n.jsxs("p",{children:[C.length," rsultat",C.length>1?"s":""," affich",C.length>1?"s":"",C.length!==e.length&&` sur ${e.length} au total`]})})]})]})},Cl={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},tR=()=>{const[e,t]=b.useState(Cl),[r,a]=b.useState(Cl),[l,o]=b.useState(!0),[u,d]=b.useState(!1),[m,p]=b.useState(null),[h,v]=b.useState(null),[y,x]=b.useState(!1),_=b.useCallback(async()=>{try{o(!0),p(null);const w=be(oe,"settings","platform"),E=await Gt(w);if(E.exists()){const O=E.data(),M={...Cl,...O};t(M),a(M)}else t(Cl),a(Cl)}catch(w){console.error("Erreur chargement paramtres:",w),p("Impossible de charger les paramtres.")}finally{o(!1)}},[]);b.useEffect(()=>{_()},[_]),b.useEffect(()=>{if(h){const w=setTimeout(()=>v(null),4e3);return()=>clearTimeout(w)}},[h]),b.useEffect(()=>{const w=JSON.stringify(e)!==JSON.stringify(r);x(w)},[e,r]);const N=(w,E)=>{t(O=>({...O,[w]:E}))},S=async()=>{try{if(d(!0),p(null),e.premiumMensuel<0||e.premiumAnnuel<0){p("Les tarifs ne peuvent pas tre ngatifs.");return}if(e.quizNoteMinimale<0||e.quizNoteMinimale>20){p("La note minimale doit tre entre 0 et 20.");return}const w=be(oe,"settings","platform");await Zf(w,{...e,updatedAt:ft()}),a(e),x(!1),v("Paramtres sauvegards avec succs !")}catch(w){console.error("Erreur sauvegarde paramtres:",w),p("Impossible de sauvegarder les paramtres.")}finally{d(!1)}},C=()=>{t(r),x(!1)},z=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&t(Cl)};return l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des paramtres..."})]}):n.jsxs("div",{className:"settings-admin",children:[n.jsxs("div",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),n.jsxs("div",{className:"admin-page-header__actions",children:[y&&n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:C,children:"Annuler"}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!y||u,children:u?" Sauvegarde...":" Sauvegarder"})]})]}),y&&n.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),m&&n.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",m]}),h&&n.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",h]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),n.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Nom du site"}),n.jsx("input",{type:"text",className:"admin-input",value:e.siteName,onChange:w=>N("siteName",w.target.value)})]}),n.jsxs("div",{className:"settings-field settings-field--full",children:[n.jsx("label",{className:"settings-label",children:"Description"}),n.jsx("input",{type:"text",className:"admin-input",value:e.siteDescription,onChange:w=>N("siteDescription",w.target.value)})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Email de contact"}),n.jsx("input",{type:"email",className:"admin-input",value:e.contactEmail,onChange:w=>N("contactEmail",w.target.value)})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Tlphone"}),n.jsx("input",{type:"tel",className:"admin-input",value:e.contactPhone,onChange:w=>N("contactPhone",w.target.value)})]})]})]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),n.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.premiumMensuel,onChange:w=>N("premiumMensuel",parseInt(w.target.value)||0),min:0,step:500}),n.jsxs("span",{className:"settings-hint",children:["Actuellement : ",e.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.premiumAnnuel,onChange:w=>N("premiumAnnuel",parseInt(w.target.value)||0),min:0,step:1e3}),n.jsxs("span",{className:"settings-hint",children:["conomie : ",(e.premiumMensuel*12-e.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),n.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.quizDureeDefaut,onChange:w=>N("quizDureeDefaut",parseInt(w.target.value)||0),min:1,max:120})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.quizNoteMinimale,onChange:w=>N("quizNoteMinimale",parseInt(w.target.value)||0),min:0,max:20})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),n.jsx("input",{type:"number",className:"admin-input",value:e.quizTentativesMax,onChange:w=>N("quizTentativesMax",parseInt(w.target.value)||0),min:1,max:10}),n.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),n.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Mode maintenance"}),n.jsxs("div",{className:"settings-toggle-wrapper",children:[n.jsx("button",{className:`settings-toggle ${e.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>N("maintenanceMode",!e.maintenanceMode),children:n.jsx("span",{className:"settings-toggle__knob"})}),n.jsx("span",{className:`settings-toggle-label ${e.maintenanceMode?"settings-toggle-label--active":""}`,children:e.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),n.jsxs("div",{className:"settings-field settings-field--full",children:[n.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),n.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:e.maintenanceMessage,onChange:w=>N("maintenanceMessage",w.target.value),disabled:!e.maintenanceMode})]})]})]}),n.jsxs("div",{className:"settings-actions",children:[n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:z,children:" Rinitialiser aux valeurs par dfaut"}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!y||u,children:u?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},rR=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],nR=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],aR=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Ta=({value:e,onChange:t,placeholder:r="Saisissez votre texte...",minHeight:a=100,maxHeight:l=400,toolbar:o=rR,disabled:u=!1,className:d=""})=>{const m=b.useRef(null),p=b.useRef(!1),[h,v]=b.useState(!1),[y,x]=b.useState(!1);b.useEffect(()=>{m.current&&!p.current&&m.current.innerHTML!==e&&(m.current.innerHTML=e||""),p.current=!1},[e]);const _=b.useCallback(()=>{m.current&&(p.current=!0,t(m.current.innerHTML))},[t]),N=b.useCallback((w,E)=>{m.current?.focus(),document.execCommand(w,!1,E),_()},[_]),S=b.useCallback(()=>{const w=prompt("URL du lien :","https://");w&&N("createLink",w)},[N]),C=b.useCallback(()=>{N("removeFormat"),N("formatBlock","p")},[N]);b.useEffect(()=>{const w=()=>{v(!1),x(!1)};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[]);const z=w=>{switch(w){case"bold":return n.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:E=>{E.preventDefault(),N("bold")},children:n.jsx("strong",{children:"G"})},"bold");case"italic":return n.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:E=>{E.preventDefault(),N("italic")},children:n.jsx("em",{children:"I"})},"italic");case"underline":return n.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:E=>{E.preventDefault(),N("underline")},children:n.jsx("u",{children:"S"})},"underline");case"strikethrough":return n.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:E=>{E.preventDefault(),N("strikeThrough")},children:n.jsx("s",{children:"B"})},"strike");case"heading":return n.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:E=>{E.preventDefault(),N("formatBlock","h3")},children:"H"},"heading");case"color":return n.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{v(!h),x(!1)},children:n.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),h&&n.jsx("div",{className:"rte-color-picker",children:nR.map(E=>n.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E,border:E==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:O=>{O.preventDefault(),N("foreColor",E),v(!1)}},E))})]},"color");case"highlight":return n.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{x(!y),v(!1)},children:n.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),y&&n.jsx("div",{className:"rte-color-picker",children:aR.map(E=>n.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E==="transparent"?"#fff":E,border:"1px solid #ccc"},onMouseDown:O=>{O.preventDefault(),N("hiliteColor",E),x(!1)},children:E==="transparent"?"":""},E))})]},"highlight");case"alignLeft":return n.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:E=>{E.preventDefault(),N("justifyLeft")},children:""},"alignL");case"alignCenter":return n.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:E=>{E.preventDefault(),N("justifyCenter")},children:""},"alignC");case"alignRight":return n.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:E=>{E.preventDefault(),N("justifyRight")},children:""},"alignR");case"bulletList":return n.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:E=>{E.preventDefault(),N("insertUnorderedList")},children:""},"ul");case"numberedList":return n.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:E=>{E.preventDefault(),N("insertOrderedList")},children:"1"},"ol");case"subscript":return n.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:E=>{E.preventDefault(),N("subscript")},children:["X",n.jsx("sub",{children:""})]},"sub");case"superscript":return n.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:E=>{E.preventDefault(),N("superscript")},children:["X",n.jsx("sup",{children:""})]},"sup");case"link":return n.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:E=>{E.preventDefault(),S()},children:""},"link");case"clean":return n.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:E=>{E.preventDefault(),C()},children:""},"clean");default:return null}};return n.jsxs("div",{className:`rte-container ${u?"rte-disabled":""} ${d}`,children:[!u&&n.jsx("div",{className:"rte-toolbar",children:o.map(w=>z(w))}),n.jsx("div",{ref:m,className:"rte-editor",contentEditable:!u,onInput:_,onBlur:_,"data-placeholder":r,style:{minHeight:`${a}px`,maxHeight:`${l}px`},suppressContentEditableWarning:!0})]})},Bl={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},Zd={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},Jd={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Bt(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function iR(e,t){const r={id:Bt("q"),type:e,enonce:"",difficulte:"moyen",points:2,ordre:t};switch(e){case"qcm_unique":return{...r,typeData:{options:[{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...r,typeData:{options:[{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...r,typeData:{items:[{id:Bt("item"),texte:"",ordreCorrect:1},{id:Bt("item"),texte:"",ordreCorrect:2},{id:Bt("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...r,typeData:{paires:[{id:Bt("pair"),gauche:"",droite:""},{id:Bt("pair"),gauche:"",droite:""},{id:Bt("pair"),gauche:"",droite:""}]}};case"essai":return{...r,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const Ic="quizzes_v2",sR="quiz_results_v2";async function lR(e,t){try{const r=await nr(_e(oe,Ic),{...e,auteurId:t,createdAt:ft(),updatedAt:ft()});return console.log(" Quiz avanc cr :",r.id),r.id}catch(r){throw console.error(" Erreur cration quiz avanc :",r),new Error("Impossible de crer le quiz")}}async function oR(e,t){try{const r=be(oe,Ic,e);await et(r,{...t,updatedAt:ft()}),console.log(" Quiz avanc mis  jour :",e)}catch(r){throw console.error(" Erreur mise  jour quiz :",r),new Error("Impossible de mettre  jour le quiz")}}async function cR(e){try{await Ln(be(oe,Ic,e)),console.log(" Quiz avanc supprim :",e)}catch(t){throw console.error(" Erreur suppression quiz :",t),new Error("Impossible de supprimer le quiz")}}async function MA(e){try{const t=await Gt(be(oe,Ic,e));if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||void 0}}catch(t){throw console.error(" Erreur rcupration quiz :",t),new Error("Impossible de rcuprer le quiz")}}async function uR(){try{const e=Le(_e(oe,Ic),nt("createdAt","desc"));return(await Te(e)).docs.map(r=>{const a=r.data();return{id:r.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||void 0}})}catch(e){throw console.error(" Erreur rcupration tous les quiz :",e),new Error("Impossible de rcuprer les quiz")}}function dR(e,t){let r=0,a=0;const l=[];for(const o of e.questions){a+=o.points;const u=t.find(v=>v.questionId===o.id);if(!u){l.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let d=0,m=!1,p=!1,h=!1;switch(o.type){case"qcm_unique":{const y=o.typeData.options.find(x=>x.isCorrect);y&&u.selectedOptionId===y.id&&(d=o.points,m=!0);break}case"qcm_multiple":{const v=o.typeData,y=v.options.filter(C=>C.isCorrect).map(C=>C.id),x=v.options.filter(C=>!C.isCorrect).map(C=>C.id),_=u.selectedOptionIds||[],N=_.some(C=>x.includes(C)),S=_.filter(C=>y.includes(C)).length;!N&&S===y.length?(d=o.points,m=!0):v.scoringPartiel&&S>0&&!N&&(d=Math.round(o.points*S/y.length*100)/100,p=!0);break}case"drag_drop":{const v=o.typeData,y=u.ordrePropose||[],x=v.items.sort((N,S)=>N.ordreCorrect-S.ordreCorrect).map(N=>N.id);let _=0;for(let N=0;N<x.length;N++)y[N]===x[N]&&_++;_===x.length?(d=o.points,m=!0):_>0&&(d=Math.round(o.points*_/x.length*100)/100,p=!0);break}case"mise_en_relation":{const v=o.typeData,y=u.relationsProposees||{};let x=0;for(const _ of v.paires)y[_.id]===_.id&&x++;x===v.paires.length?(d=o.points,m=!0):x>0&&(d=Math.round(o.points*x/v.paires.length*100)/100,p=!0);break}case"essai":{const v=o.typeData,y=u.texteReponse||"";if(v.correctionMode==="mots_cles"&&v.motsCles.length>0){const x=y.toLowerCase().replace(/<[^>]*>/g,"");let _=0,N=0;for(const S of v.motsCles)_+=S.poids,x.includes(S.mot.toLowerCase())&&(N+=S.poids);_>0&&(d=Math.round(o.points*N/_*100)/100,m=N===_,p=N>0&&N<_)}else h=!0;break}}r+=d,l.push({questionId:o.id,type:o.type,pointsObtenus:d,pointsMax:o.points,isCorrect:m,isPartiel:p,correctionManuelleRequise:h})}return{score:r,scoreMax:a,details:l}}async function fR(e,t,r,a){try{const{score:l,scoreMax:o,details:u}=dR(e,r),d=o>0?Math.round(l/o*20*100)/100:0,m=u.some(v=>v.correctionManuelleRequise),p={quizId:e.id,userId:t,reponses:r,score:l,scoreMax:o,note20:d,tempsEcoule:a,datePassage:new Date,reussi:d>=e.noteMinimale,correctionManuelle:m,detailsParQuestion:u},h=await nr(_e(oe,sR),{...p,datePassage:ft()});return console.log(" Rsultat quiz enregistr :",h.id),{id:h.id,...p}}catch(l){throw console.error(" Erreur soumission quiz :",l),new Error("Impossible d'enregistrer le rsultat")}}const mR=({existingQuiz:e,disciplines:t,auteurId:r,onSave:a,onCancel:l})=>{const[o,u]=b.useState(e?.titre||""),[d,m]=b.useState(e?.description||""),[p,h]=b.useState(e?.disciplineId||""),[v,y]=b.useState(e?.duree||30),[x,_]=b.useState(e?.isPremium??!0),[N,S]=b.useState(e?.noteMinimale||10),[C,z]=b.useState(e?.melangerQuestions??!1),[w,E]=b.useState(e?.melangerOptions??!1),[O,M]=b.useState(e?.afficherCorrection??!0),[P,q]=b.useState(e?.tentativesMax||0),[L,Y]=b.useState(e?.questions||[]),[W,B]=b.useState(null),[Q,k]=b.useState(!1),[T,R]=b.useState(null),[J,H]=b.useState(!1),ve=b.useCallback(F=>{const de=iR(F,L.length+1);Y(Ee=>[...Ee,de]),B(L.length),H(!1)},[L.length]),U=b.useCallback(F=>{confirm("Supprimer cette question ?")&&(Y(de=>de.filter((ie,K)=>K!==F).map((ie,K)=>({...ie,ordre:K+1}))),B(null))},[]),ge=b.useCallback(F=>{Y(de=>{const Ee=de[F],ie={...JSON.parse(JSON.stringify(Ee)),id:Bt("q"),ordre:de.length+1};return[...de,ie]})},[]),re=b.useCallback((F,de)=>{Y(Ee=>{const ie=[...Ee],K=de==="up"?F-1:F+1;return K<0||K>=ie.length?Ee:([ie[F],ie[K]]=[ie[K],ie[F]],ie.map(($,se)=>({...$,ordre:se+1})))}),B(de==="up"?W!==null?W-1:null:W!==null?W+1:null)},[W]),me=b.useCallback((F,de)=>{Y(Ee=>Ee.map((ie,K)=>K===F?{...ie,...de}:ie))},[]),xe=async()=>{if(!o.trim()){R("Le titre est obligatoire");return}if(!p){R("Slectionnez une discipline");return}if(L.length===0){R("Ajoutez au moins une question");return}for(let F=0;F<L.length;F++)if(!L[F].enonce.replace(/<[^>]*>/g,"").trim()){R(`La question ${F+1} n'a pas d'nonc`),B(F);return}R(null),k(!0);try{const F={disciplineId:p,titre:o.trim(),description:d.trim()||void 0,questions:L,duree:v,isPremium:x,noteMinimale:N,melangerQuestions:C,melangerOptions:w,afficherCorrection:O,tentativesMax:P};let de;e?.id?(await oR(e.id,F),de=e.id):de=await lR(F,r),a?.(de)}catch(F){R(F.message||"Erreur lors de la sauvegarde")}finally{k(!1)}},he=L.reduce((F,de)=>F+de.points,0);return n.jsxs("div",{className:"quiz-editor",children:[n.jsxs("div",{className:"quiz-editor__header",children:[n.jsx("h2",{children:e?" Modifier le quiz":" Nouveau quiz avanc"}),n.jsxs("div",{className:"quiz-editor__header-actions",children:[n.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",he," pts"]}),n.jsxs("span",{className:"quiz-editor__count-badge",children:[L.length," question",L.length>1?"s":""]})]})]}),T&&n.jsxs("div",{className:"quiz-editor__error",children:[" ",T,n.jsx("button",{onClick:()=>R(null),children:""})]}),n.jsxs("div",{className:"quiz-editor__section",children:[n.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),n.jsxs("div",{className:"quiz-editor__grid",children:[n.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[n.jsx("label",{children:"Titre du quiz *"}),n.jsx("input",{type:"text",value:o,onChange:F=>u(F.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Discipline *"}),n.jsxs("select",{value:p,onChange:F=>h(F.target.value),className:"quiz-editor__select",children:[n.jsx("option",{value:"",children:" Slectionner "}),t.map(F=>n.jsxs("option",{value:F.id,children:[F.nom," (",F.classe,")"]},F.id))]})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Dure (minutes)"}),n.jsx("input",{type:"number",value:v,onChange:F=>y(Number(F.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Note minimale (/20)"}),n.jsx("input",{type:"number",value:N,onChange:F=>S(Number(F.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Tentatives max (0 = illimit)"}),n.jsx("input",{type:"number",value:P,onChange:F=>q(Number(F.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[n.jsx("label",{children:"Description (optionnel)"}),n.jsx(Ta,{value:d,onChange:m,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),n.jsxs("div",{className:"quiz-editor__options-row",children:[n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:F=>_(F.target.checked)}),n.jsx("span",{children:" Premium"})]}),n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:C,onChange:F=>z(F.target.checked)}),n.jsx("span",{children:" Mlanger les questions"})]}),n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:w,onChange:F=>E(F.target.checked)}),n.jsx("span",{children:" Mlanger les options QCM"})]}),n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:O,onChange:F=>M(F.target.checked)}),n.jsx("span",{children:" Afficher la correction"})]})]})]}),n.jsxs("div",{className:"quiz-editor__section",children:[n.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),n.jsx("div",{className:"quiz-editor__questions-list",children:L.map((F,de)=>n.jsx(pR,{question:F,index:de,isActive:W===de,onToggle:()=>B(W===de?null:de),onUpdate:Ee=>me(de,Ee),onDelete:()=>U(de),onDuplicate:()=>ge(de),onMoveUp:()=>re(de,"up"),onMoveDown:()=>re(de,"down"),isFirst:de===0,isLast:de===L.length-1},F.id))}),n.jsxs("div",{className:"quiz-editor__add-wrapper",children:[n.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>H(!J),children:"+ Ajouter une question"}),J&&n.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(Bl).map(F=>n.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>ve(F),children:[n.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:Jd[F]},children:Zd[F]}),n.jsx("span",{children:Bl[F]})]},F))})]})]}),n.jsxs("div",{className:"quiz-editor__actions",children:[n.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:l,disabled:Q,children:"Annuler"}),n.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:xe,disabled:Q||L.length===0,children:Q?" Sauvegarde...":e?" Mettre  jour":" Crer le quiz"})]})]})},pR=({question:e,index:t,isActive:r,onToggle:a,onUpdate:l,onDelete:o,onDuplicate:u,onMoveUp:d,onMoveDown:m,isFirst:p,isLast:h})=>{const v=Jd[e.type],y=Zd[e.type],x=Bl[e.type],_=N=>{const S=N.replace(/<[^>]*>/g,"").trim();return S.length>80?S.substring(0,80)+"...":S||"(sans nonc)"};return n.jsxs("div",{className:`question-editor ${r?"question-editor--active":""}`,style:{borderLeftColor:v},children:[n.jsxs("div",{className:"question-editor__header",onClick:a,children:[n.jsxs("div",{className:"question-editor__header-left",children:[n.jsx("span",{className:"question-editor__number",children:t+1}),n.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:v},children:[y," ",x]}),!r&&n.jsx("span",{className:"question-editor__preview",children:_(e.enonce)})]}),n.jsxs("div",{className:"question-editor__header-right",children:[n.jsxs("span",{className:"question-editor__points",children:[e.points," pts"]}),n.jsx("span",{className:"question-editor__toggle",children:r?"":""})]})]}),r&&n.jsxs("div",{className:"question-editor__body",children:[n.jsxs("div",{className:"question-editor__toolbar",children:[n.jsx("button",{type:"button",onClick:d,disabled:p,title:"Monter",children:""}),n.jsx("button",{type:"button",onClick:m,disabled:h,title:"Descendre",children:""}),n.jsx("button",{type:"button",onClick:u,title:"Dupliquer",children:""}),n.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),n.jsxs("div",{className:"question-editor__field",children:[n.jsx("label",{children:"nonc de la question *"}),n.jsx(Ta,{value:e.enonce,onChange:N=>l({enonce:N}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),n.jsxs("div",{className:"question-editor__params",children:[n.jsxs("div",{className:"question-editor__param",children:[n.jsx("label",{children:"Difficult"}),n.jsxs("select",{value:e.difficulte,onChange:N=>l({difficulte:N.target.value}),children:[n.jsx("option",{value:"facile",children:" Facile"}),n.jsx("option",{value:"moyen",children:" Moyen"}),n.jsx("option",{value:"difficile",children:" Difficile"})]})]}),n.jsxs("div",{className:"question-editor__param",children:[n.jsx("label",{children:"Points"}),n.jsx("input",{type:"number",value:e.points,onChange:N=>l({points:Number(N.target.value)}),min:1,max:20})]})]}),n.jsxs("div",{className:"question-editor__type-specific",children:[e.type==="qcm_unique"&&n.jsx(hR,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="qcm_multiple"&&n.jsx(vR,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="drag_drop"&&n.jsx(gR,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="mise_en_relation"&&n.jsx(xR,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="essai"&&n.jsx(yR,{data:e.typeData,onChange:N=>l({typeData:N})})]}),n.jsxs("div",{className:"question-editor__field",children:[n.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),n.jsx(Ta,{value:e.explication||"",onChange:N=>l({explication:N}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},hR=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:u.isCorrect===!0?{...m,isCorrect:!1}:m);t({options:d})},a=()=>{e.options.length>=6||t({options:[...e.options,{id:Bt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({options:e.options.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),e.options.map((o,u)=>n.jsxs("div",{className:"type-editor__option-row",children:[n.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>r(u,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),n.jsx("div",{className:"type-editor__option-text",children:n.jsx(Ta,{value:o.texte,onChange:d=>r(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&n.jsx("span",{className:"type-editor__correct-badge",children:""}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),e.options.length<6&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"})]})},vR=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:m);t({...e,options:d})},a=()=>{e.options.length>=8||t({...e,options:[...e.options,{id:Bt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({...e,options:e.options.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),e.options.map((o,u)=>n.jsxs("div",{className:"type-editor__option-row",children:[n.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:d=>r(u,{isCorrect:d.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),n.jsx("div",{className:"type-editor__option-text",children:n.jsx(Ta,{value:o.texte,onChange:d=>r(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&n.jsx("span",{className:"type-editor__correct-badge",children:""}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,children:""})]},o.id)),e.options.length<8&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"}),n.jsxs("label",{className:"type-editor__sub-option",children:[n.jsx("input",{type:"checkbox",checked:e.scoringPartiel,onChange:o=>t({...e,scoringPartiel:o.target.checked})}),n.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},gR=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.items.map((m,p)=>p===o?{...m,...u}:m);t({...e,items:d})},a=()=>{e.items.length>=10||t({...e,items:[...e.items,{id:Bt("item"),texte:"",ordreCorrect:e.items.length+1}]})},l=o=>{if(e.items.length<=2)return;const u=e.items.filter((d,m)=>m!==o).map((d,m)=>({...d,ordreCorrect:m+1}));t({...e,items:u})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),n.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),n.jsxs("div",{className:"type-editor__field-inline",children:[n.jsx("label",{children:"Consigne :"}),n.jsx("input",{type:"text",value:e.consigneOrdre,onChange:o=>t({...e,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),e.items.map((o,u)=>n.jsxs("div",{className:"type-editor__drag-row",children:[n.jsx("span",{className:"type-editor__drag-number",children:u+1}),n.jsx("div",{className:"type-editor__option-text",children:n.jsx(Ta,{value:o.texte,onChange:d=>r(u,{texte:d}),placeholder:`lment ${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.items.length<=2,children:""})]},o.id)),e.items.length<10&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter un lment"})]})},xR=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.paires.map((m,p)=>p===o?{...m,...u}:m);t({paires:d})},a=()=>{e.paires.length>=8||t({paires:[...e.paires,{id:Bt("pair"),gauche:"",droite:""}]})},l=o=>{e.paires.length<=2||t({paires:e.paires.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),n.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),n.jsxs("div",{className:"type-editor__relation-header",children:[n.jsx("span",{children:"Colonne A (gauche)"}),n.jsx("span",{}),n.jsx("span",{children:"Colonne B (droite)"}),n.jsx("span",{})]}),e.paires.map((o,u)=>n.jsxs("div",{className:"type-editor__relation-row",children:[n.jsx("div",{className:"type-editor__relation-cell",children:n.jsx(Ta,{value:o.gauche,onChange:d=>r(u,{gauche:d}),placeholder:`lment A${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),n.jsx("span",{className:"type-editor__relation-arrow",children:""}),n.jsx("div",{className:"type-editor__relation-cell",children:n.jsx(Ta,{value:o.droite,onChange:d=>r(u,{droite:d}),placeholder:`lment B${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.paires.length<=2,children:""})]},o.id)),e.paires.length<8&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une paire"})]})},yR=({data:e,onChange:t})=>{const r=()=>{t({...e,motsCles:[...e.motsCles,{mot:"",poids:1,obligatoire:!1}]})},a=(o,u)=>{const d=e.motsCles.map((m,p)=>p===o?{...m,...u}:m);t({...e,motsCles:d})},l=o=>{t({...e,motsCles:e.motsCles.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),n.jsxs("div",{className:"type-editor__params-row",children:[n.jsxs("div",{className:"type-editor__param-inline",children:[n.jsx("label",{children:"Mots minimum :"}),n.jsx("input",{type:"number",value:e.nombreMotsMin||"",onChange:o=>t({...e,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),n.jsxs("div",{className:"type-editor__param-inline",children:[n.jsx("label",{children:"Mots maximum :"}),n.jsx("input",{type:"number",value:e.nombreMotsMax||"",onChange:o=>t({...e,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),n.jsxs("div",{className:"type-editor__field-inline",children:[n.jsx("label",{children:"Mode de correction :"}),n.jsxs("select",{value:e.correctionMode,onChange:o=>t({...e,correctionMode:o.target.value}),children:[n.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),n.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),n.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(e.correctionMode==="mots_cles"||e.correctionMode==="semi_auto")&&n.jsxs("div",{className:"type-editor__keywords",children:[n.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),e.motsCles.map((o,u)=>n.jsxs("div",{className:"type-editor__keyword-row",children:[n.jsx("input",{type:"text",value:o.mot,onChange:d=>a(u,{mot:d.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),n.jsxs("select",{value:o.poids,onChange:d=>a(u,{poids:Number(d.target.value)}),className:"type-editor__keyword-weight",children:[n.jsx("option",{value:1,children:"Poids 1"}),n.jsx("option",{value:2,children:"Poids 2"}),n.jsx("option",{value:3,children:"Poids 3"}),n.jsx("option",{value:4,children:"Poids 4"}),n.jsx("option",{value:5,children:"Poids 5"})]}),n.jsxs("label",{className:"type-editor__keyword-required",children:[n.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:d=>a(u,{obligatoire:d.target.checked})}),n.jsx("span",{children:"Obligatoire"})]}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),children:""})]},u)),n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter un mot-cl"})]}),n.jsxs("div",{className:"type-editor__field-block",children:[n.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),n.jsx(Ta,{value:e.reponseModele||"",onChange:o=>t({...e,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},o_=()=>{const{quizId:e}=Ds(),t=Ht(),{currentUser:r}=Ct(),[a,l]=b.useState([]),[o,u]=b.useState(void 0),[d,m]=b.useState(!0),[p,h]=b.useState(null);return b.useEffect(()=>{(async()=>{try{m(!0);const y=await Ii.getAll();if(l(y.map(x=>({id:x.id,nom:x.nom,classe:x.classe||""}))),e){const x=await MA(e);x?u(x):h("Quiz introuvable")}}catch(y){console.error("Erreur chargement donnes:",y),h(y.message||"Erreur de chargement")}finally{m(!1)}})()},[e]),d?n.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:n.jsx("p",{children:" Chargement..."})}):p?n.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[n.jsxs("p",{style:{color:"#dc2626"},children:[" ",p]}),n.jsx("button",{onClick:()=>t(-1),children:" Retour"})]}):n.jsx(mR,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:a,auteurId:r?.uid||"",onSave:v=>{alert(" Quiz sauvegard avec succs !"),t("/admin/quiz")},onCancel:()=>t(-1)})},bR=()=>{const e=Ht(),{currentUser:t}=Ct(),[r,a]=b.useState([]),[l,o]=b.useState(!0),[u,d]=b.useState(null),[m,p]=b.useState(null);b.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d(null);const N=await uR();a(N)}catch(N){console.error("Erreur chargement quiz:",N),d("Impossible de charger les quiz")}finally{o(!1)}},v=async N=>{try{await cR(N),a(S=>S.filter(C=>C.id!==N)),p(null)}catch(S){console.error("Erreur suppression:",S),alert("Erreur lors de la suppression : "+S.message)}},y=N=>{const S={};return N.questions.forEach(C=>{S[C.type]=(S[C.type]||0)+1}),Object.entries(S).map(([C,z])=>`${z} ${Bl[C]||C}`).join(", ")},x=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",_=N=>N.questions.reduce((S,C)=>S+C.points,0);return n.jsxs("div",{style:{padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),n.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[r.length," quiz cr",r.length!==1?"s":""]})]}),n.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),u&&n.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",u,n.jsx("button",{onClick:h,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),l&&n.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!l&&r.length===0&&!u&&n.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),n.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),n.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),n.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!l&&r.length>0&&n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.map(N=>n.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[n.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[n.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:N.titre}),N.isPremium&&n.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[n.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N.questions.length," question",N.questions.length!==1?"s":""]}),n.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",_(N)," pts"]}),n.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N.duree," min"]})]}),n.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",y(N)]}),n.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",x(N.createdAt)]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[n.jsx("button",{onClick:()=>e(`/quiz-avance/${N.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),n.jsx("button",{onClick:()=>e(`/admin/quiz/modifier/${N.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),n.jsx("button",{onClick:()=>{const S=`${window.location.origin}/quiz-avance/${N.id}`;navigator.clipboard.writeText(S).then(()=>{alert(` Lien copi !

`+S+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),m===N.id?n.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[n.jsx("button",{onClick:()=>v(N.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),n.jsx("button",{onClick:()=>p(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):n.jsx("button",{onClick:()=>p(N.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},N.id))})]})},jR=({quiz:e,userId:t,onComplete:r,onQuit:a})=>{const l=b.useMemo(()=>{let q=[...e.questions];return e.melangerQuestions&&(q=q.sort(()=>Math.random()-.5)),q},[e]),[o,u]=b.useState(0),[d,m]=b.useState(new Map),[p,h]=b.useState(e.duree*60),[v,y]=b.useState(!1),[x,_]=b.useState(null),[N,S]=b.useState(!1),C=b.useRef(Date.now());b.useEffect(()=>{if(x)return;const q=setInterval(()=>{h(L=>L<=1?(clearInterval(q),M(),0):L-1)},1e3);return()=>clearInterval(q)},[x]);const z=q=>{const L=Math.floor(q/60),Y=q%60;return`${L.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}`},w=l[o],E=b.useCallback((q,L)=>{m(Y=>{const W=new Map(Y),B=W.get(q)||{questionId:q,type:w.type};return W.set(q,{...B,...L}),W})},[w]),O=q=>{q>=0&&q<l.length&&u(q)},M=async()=>{S(!1),y(!0);try{const q=Array.from(d.values()),L=Math.round((Date.now()-C.current)/1e3),Y=await fR(e,t,q,L);_(Y),r?.(Y)}catch(q){alert("Erreur lors de la soumission : "+q.message)}finally{y(!1)}},P=d.size;return x?n.jsx("div",{className:"quiz-player quiz-player--results",children:n.jsxs("div",{className:"quiz-results",children:[n.jsxs("div",{className:`quiz-results__header ${x.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[n.jsx("div",{className:"quiz-results__emoji",children:x.reussi?"":""}),n.jsx("h2",{children:x.reussi?"Flicitations !":"Quiz termin"}),n.jsxs("div",{className:"quiz-results__score",children:[n.jsxs("span",{className:"quiz-results__note",children:[x.note20,"/20"]}),n.jsxs("span",{className:"quiz-results__detail",children:[x.score,"/",x.scoreMax," points"]})]}),n.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",z(x.tempsEcoule)]}),x.correctionManuelle&&n.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),e.afficherCorrection&&n.jsxs("div",{className:"quiz-results__details",children:[n.jsx("h3",{children:" Dtail des rponses"}),l.map((q,L)=>{const Y=x.detailsParQuestion.find(W=>W.questionId===q.id);return n.jsxs("div",{className:`quiz-results__question ${Y?.isCorrect?"quiz-results__question--correct":Y?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[n.jsxs("div",{className:"quiz-results__q-header",children:[n.jsxs("span",{children:["Q",L+1," "," ",n.jsxs("span",{style:{color:Jd[q.type]},children:[Zd[q.type]," ",Bl[q.type]]})]}),n.jsxs("span",{className:"quiz-results__q-score",children:[Y?.pointsObtenus||0,"/",Y?.pointsMax||q.points," pts",Y?.isCorrect&&" ",Y?.isPartiel&&" ",!Y?.isCorrect&&!Y?.isPartiel&&" "]})]}),n.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:q.enonce}}),q.explication&&n.jsxs("div",{className:"quiz-results__q-explanation",children:[n.jsx("strong",{children:" Explication :"}),n.jsx("div",{dangerouslySetInnerHTML:{__html:q.explication}})]})]},q.id)})]}),n.jsx("div",{className:"quiz-results__actions",children:n.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:a,children:"Retour au tableau de bord"})})]})}):n.jsxs("div",{className:"quiz-player",children:[n.jsxs("div",{className:"quiz-player__topbar",children:[n.jsxs("div",{className:"quiz-player__info",children:[n.jsx("span",{className:"quiz-player__title",children:e.titre}),n.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",l.length]})]}),n.jsxs("div",{className:"quiz-player__topbar-right",children:[n.jsxs("span",{className:`quiz-player__timer ${p<60?"quiz-player__timer--danger":p<300?"quiz-player__timer--warning":""}`,children:[" ",z(p)]}),n.jsxs("span",{className:"quiz-player__answered",children:[P,"/",l.length," rpondue",P>1?"s":""]})]})]}),n.jsx("div",{className:"quiz-player__progress-bar",children:n.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/l.length*100}%`}})}),n.jsxs("div",{className:"quiz-player__question-area",children:[n.jsxs("div",{className:"quiz-player__question-meta",children:[n.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:Jd[w.type]},children:[Zd[w.type]," ",Bl[w.type]]}),n.jsxs("span",{className:"quiz-player__points",children:[w.points," point",w.points>1?"s":""]})]}),n.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:w.enonce}}),n.jsxs("div",{className:"quiz-player__answer-area",children:[w.type==="qcm_unique"&&n.jsx(NR,{question:w,reponse:d.get(w.id),onUpdate:q=>E(w.id,q),melangerOptions:e.melangerOptions}),w.type==="qcm_multiple"&&n.jsx(_R,{question:w,reponse:d.get(w.id),onUpdate:q=>E(w.id,q),melangerOptions:e.melangerOptions}),w.type==="drag_drop"&&n.jsx(SR,{question:w,reponse:d.get(w.id),onUpdate:q=>E(w.id,q)}),w.type==="mise_en_relation"&&n.jsx(wR,{question:w,reponse:d.get(w.id),onUpdate:q=>E(w.id,q)}),w.type==="essai"&&n.jsx(CR,{question:w,reponse:d.get(w.id),onUpdate:q=>E(w.id,q)})]})]}),n.jsxs("div",{className:"quiz-player__nav",children:[n.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>O(o-1),disabled:o===0,children:" Prcdent"}),n.jsx("div",{className:"quiz-player__pagination",children:l.map((q,L)=>n.jsx("button",{className:`quiz-player__page-dot ${L===o?"quiz-player__page-dot--current":""} ${d.has(q.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>O(L),title:`Question ${L+1}`,children:L+1},q.id))}),o<l.length-1?n.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>O(o+1),children:"Suivant "}):n.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>S(!0),disabled:v,children:v?" Envoi...":" Soumettre le quiz"})]}),N&&n.jsx("div",{className:"quiz-player__modal-overlay",children:n.jsxs("div",{className:"quiz-player__modal",children:[n.jsx("h3",{children:"Soumettre le quiz ?"}),n.jsxs("p",{children:["Vous avez rpondu  ",n.jsx("strong",{children:P})," question",P>1?"s":""," sur"," ",n.jsx("strong",{children:l.length}),"."]}),P<l.length&&n.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",l.length-P," question",l.length-P>1?"s":""," sans rponse !"]}),n.jsxs("div",{className:"quiz-player__modal-actions",children:[n.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>S(!1),children:"Continuer le quiz"}),n.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:M,children:"Confirmer la soumission"})]})]})})]})},NR=({question:e,reponse:t,onUpdate:r,melangerOptions:a})=>{const l=e.typeData,o=b.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]);return n.jsx("div",{className:"player-qcm",children:o.map(u=>n.jsxs("label",{className:`player-qcm__option ${t?.selectedOptionId===u.id?"player-qcm__option--selected":""}`,children:[n.jsx("input",{type:"radio",name:`q_${e.id}`,checked:t?.selectedOptionId===u.id,onChange:()=>r({selectedOptionId:u.id})}),n.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:u.texte}})]},u.id))})},_R=({question:e,reponse:t,onUpdate:r,melangerOptions:a})=>{const l=e.typeData,o=b.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]),u=t?.selectedOptionIds||[],d=m=>{const p=u.includes(m)?u.filter(h=>h!==m):[...u,m];r({selectedOptionIds:p})};return n.jsxs("div",{className:"player-qcm",children:[n.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(m=>n.jsxs("label",{className:`player-qcm__option ${u.includes(m.id)?"player-qcm__option--selected":""}`,children:[n.jsx("input",{type:"checkbox",checked:u.includes(m.id),onChange:()=>d(m.id)}),n.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:m.texte}})]},m.id))]})},SR=({question:e,reponse:t,onUpdate:r})=>{const a=e.typeData,[l,o]=b.useState(()=>t?.ordrePropose?t.ordrePropose.map(y=>a.items.find(x=>x.id===y)).filter(Boolean):[...a.items].sort(()=>Math.random()-.5)),[u,d]=b.useState(null);b.useEffect(()=>{r({ordrePropose:l.map(y=>y.id)})},[l]);const m=y=>{d(y)},p=(y,x)=>{if(y.preventDefault(),u===null||u===x)return;const _=[...l],[N]=_.splice(u,1);_.splice(x,0,N),o(_),d(x)},h=()=>{d(null)},v=(y,x)=>{const _=x==="up"?y-1:y+1;if(_<0||_>=l.length)return;const N=[...l];[N[y],N[_]]=[N[_],N[y]],o(N)};return n.jsxs("div",{className:"player-dragdrop",children:[n.jsx("p",{className:"player-dragdrop__consigne",children:a.consigneOrdre}),n.jsx("div",{className:"player-dragdrop__list",children:l.map((y,x)=>n.jsxs("div",{className:`player-dragdrop__item ${u===x?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>m(x),onDragOver:_=>p(_,x),onDragEnd:h,children:[n.jsx("span",{className:"player-dragdrop__handle",children:""}),n.jsx("span",{className:"player-dragdrop__number",children:x+1}),n.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:y.texte}}),n.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[n.jsx("button",{type:"button",onClick:()=>v(x,"up"),disabled:x===0,children:""}),n.jsx("button",{type:"button",onClick:()=>v(x,"down"),disabled:x===l.length-1,children:""})]})]},y.id))})]})},wR=({question:e,reponse:t,onUpdate:r})=>{const a=e.typeData,l=b.useMemo(()=>[...a.paires].sort(()=>Math.random()-.5),[a.paires]),[o,u]=b.useState(t?.relationsProposees||{}),[d,m]=b.useState(null);b.useEffect(()=>{r({relationsProposees:o})},[o]);const p=x=>{m(x)},h=x=>{d&&(u(_=>({..._,[d]:x})),m(null))},v=x=>{u(_=>{const N={..._};return delete N[x],N})},y=new Set(Object.values(o));return n.jsxs("div",{className:"player-relation",children:[n.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),n.jsxs("div",{className:"player-relation__columns",children:[n.jsxs("div",{className:"player-relation__col",children:[n.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),a.paires.map(x=>n.jsxs("div",{className:`player-relation__item player-relation__item--left ${d===x.id?"player-relation__item--selected":""} ${o[x.id]?"player-relation__item--matched":""}`,onClick:()=>{o[x.id]?v(x.id):p(x.id)},children:[n.jsx("div",{dangerouslySetInnerHTML:{__html:x.gauche}}),o[x.id]&&n.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]}),n.jsxs("div",{className:"player-relation__col",children:[n.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),l.map(x=>n.jsxs("div",{className:`player-relation__item player-relation__item--right ${y.has(x.id)?"player-relation__item--matched":""} ${d&&!y.has(x.id)?"player-relation__item--clickable":""}`,onClick:()=>{d&&!y.has(x.id)&&h(x.id)},children:[n.jsx("div",{dangerouslySetInnerHTML:{__html:x.droite}}),y.has(x.id)&&n.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]})]})]})},CR=({question:e,reponse:t,onUpdate:r})=>{const a=e.typeData,[l,o]=b.useState(t?.texteReponse||""),u=l.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return b.useEffect(()=>{r({texteReponse:l})},[l]),n.jsxs("div",{className:"player-essai",children:[n.jsxs("div",{className:"player-essai__info",children:[a.nombreMotsMin&&n.jsxs("span",{className:u<a.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",a.nombreMotsMin," mots"]}),a.nombreMotsMax&&n.jsxs("span",{className:u>a.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",a.nombreMotsMax," mots"]}),n.jsxs("span",{className:"player-essai__count",children:[u," mot",u>1?"s":""]})]}),n.jsx("textarea",{className:"player-essai__textarea",value:l,onChange:d=>o(d.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},AR=()=>{const{quizId:e}=Ds(),t=Ht(),{currentUser:r}=Ct(),[a,l]=b.useState(null),[o,u]=b.useState(!0),[d,m]=b.useState(null);return b.useEffect(()=>{(async()=>{if(!e){m("ID du quiz manquant"),u(!1);return}try{const h=await MA(e);if(!h){m("Quiz introuvable");return}if(h.isPremium&&!r?.isPremium){m("Ce quiz est rserv aux abonns Premium");return}l(h)}catch(h){console.error("Erreur chargement quiz:",h),m(h.message||"Impossible de charger le quiz")}finally{u(!1)}})()},[e,r]),o?n.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),n.jsx("p",{children:"Chargement du quiz..."})]}):d?n.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:n.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),n.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:d}),d.includes("Premium")&&n.jsx("button",{onClick:()=>t("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),n.jsx("button",{onClick:()=>t(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):a?n.jsx(jR,{quiz:a,userId:r?.uid||"",onComplete:p=>{console.log(" Quiz termin  Note:",p.note20,"/20")},onQuit:()=>t("/dashboard")}):n.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[n.jsx("p",{children:"Quiz introuvable"}),n.jsx("button",{onClick:()=>t(-1),children:" Retour"})]})},kA=_e(oe,"quiz_results"),fy=_e(oe,"progressions"),ER=async e=>{try{const t=await nr(kA,{...e,datePassage:Fe.now()});return e.reussi&&await PR(e.userId,e.disciplineId,e.disciplineNom,e.quizId),t.id}catch(t){throw console.error("Erreur lors de la sauvegarde du rsultat :",t),t}},em=async(e,t)=>{try{let r=Le(kA,Ae("userId","==",e),nt("datePassage","desc"));return t&&(r=Le(r,ta(t))),(await Te(r)).docs.map(l=>({id:l.id,...l.data()}))}catch(r){throw console.error("Erreur rcupration historique :",r),r}},zR=async e=>{try{const t=await em(e);if(t.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const r=t.reduce((h,v)=>h+v.pourcentage,0),a=Math.round(r/t.length),l=Math.max(...t.map(h=>h.pourcentage)),o=t.reduce((h,v)=>h+(v.tempsEcoule||0),0),u=t.filter(h=>h.reussi).length;let d=0,m=0;for(const h of t)h.reussi?(d++,m=Math.max(m,d)):d=0;let p=0;for(const h of t)if(h.reussi)p++;else break;return{totalQuizPasses:t.length,totalQuizReussis:u,moyenneGenerale:a,tempsTotal:o,meilleurScore:l,serieReussites:p,meilleureSerieReussites:Math.max(m,p)}}catch(t){return console.error("Erreur calcul stats :",t),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},OR=async e=>{try{const t=await em(e);if(t.length===0)return[];const r={};for(const a of t){const l=a.disciplineId;r[l]||(r[l]=[]),r[l].push(a)}return Object.entries(r).map(([a,l])=>{const o=Math.round(l.reduce((v,y)=>v+y.pourcentage,0)/l.length),u=Math.max(...l.map(v=>v.pourcentage)),d=l[0].pourcentage,m=l.filter(v=>v.reussi).length,p=l.reduce((v,y)=>v+(y.tempsEcoule||0),0);let h="stable";if(l.length>=4){const v=l.slice(0,3),y=l.slice(3,6),x=v.reduce((N,S)=>N+S.pourcentage,0)/v.length,_=y.reduce((N,S)=>N+S.pourcentage,0)/y.length;x-_>5?h="up":_-x>5&&(h="down")}return{disciplineId:a,disciplineNom:l[0].disciplineNom||a,nombreQuiz:l.length,moyenne:o,meilleurScore:u,dernierScore:d,quizReussis:m,tempsTotal:p,tendance:h}})}catch(t){return console.error("Erreur progression par discipline :",t),[]}},DR=async(e,t)=>{try{return(await em(e,t||20)).reverse().map(a=>({date:(a.datePassage?.toDate?a.datePassage.toDate():new Date(a.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:a.pourcentage,discipline:a.disciplineNom||a.disciplineId}))}catch(r){return console.error("Erreur donnes temporelles :",r),[]}},MR=async(e,t,r)=>{const a=`${e}_${t}`,l=be(fy,a),o=await Gt(l);if(o.exists())return{...o.data()};const[u,d]=await Promise.all([c_("ressources",t),c_("quizzes",t)]),m={userId:e,disciplineId:t,disciplineNom:r,ressourcesVues:[],quizReussis:[],totalRessources:u,totalQuiz:d,pourcentage:0,dernierAcces:Fe.now(),createdAt:Fe.now(),updatedAt:Fe.now()};return await Zf(l,m),m},c_=async(e,t)=>{try{const r=Le(_e(oe,e),Ae("disciplineId","==",t));return(await Te(r)).size}catch{return 0}},kR=e=>{if(e.totalRessources+e.totalQuiz===0)return 0;const r=e.totalRessources>0?e.ressourcesVues.length/e.totalRessources*40:0,a=e.totalQuiz>0?e.quizReussis.length/e.totalQuiz*60:0;return e.totalRessources===0?Math.min(100,Math.round(e.quizReussis.length/e.totalQuiz*100)):e.totalQuiz===0?Math.min(100,Math.round(e.ressourcesVues.length/e.totalRessources*100)):Math.min(100,Math.round(r+a))},PR=async(e,t,r,a)=>{try{const l=`${e}_${t}`,o=be(fy,l),u=await MR(e,t,r);if(u.quizReussis.includes(a))return await et(o,{dernierAcces:Fe.now()}),u;const d=[...u.quizReussis,a],m={...u,quizReussis:d,dernierAcces:Fe.now(),updatedAt:Fe.now(),pourcentage:0};return m.pourcentage=kR(m),await Zf(o,m),m}catch(l){throw console.error("Erreur enregistrement quiz russi :",l),l}},TR=async e=>{try{const t=Le(fy,Ae("userId","==",e));return(await Te(t)).docs.map(a=>a.data())}catch(t){return console.error("Erreur rcupration progressions :",t),[]}},qR=async e=>{try{const t=await TR(e),r=await PA(e),a=t.reduce((d,m)=>d+m.ressourcesVues.length,0),l=t.reduce((d,m)=>d+m.quizReussis.length,0),o=t.length>0?Math.round(t.reduce((d,m)=>d+m.pourcentage,0)/t.length):0,u=t.filter(d=>d.pourcentage>=100).length;return{totalRessourcesVues:a,totalQuizReussis:l,pourcentageMoyen:o,disciplinesCommencees:t.length,disciplinesCompletees:u,streakActuel:r.streakActuel,meilleurStreak:r.meilleurStreak,parDiscipline:t}}catch(t){return console.error("Erreur progression globale :",t),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},RR=()=>new Date().toISOString().split("T")[0],LR=()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]},PA=async e=>{try{const t=be(oe,"users",e),r=await Gt(t);if(!r.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const a=r.data();return{streakActuel:a.streakActuel||0,meilleurStreak:a.meilleurStreak||0,dernierJourAcces:a.dernierJourAcces||""}}catch(t){return console.error("Erreur rcupration streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},IR=async e=>{try{const t=be(oe,"users",e),r=await PA(e),a=RR();if(r.dernierJourAcces===a)return r;const l=LR();let o;r.dernierJourAcces===l?o=r.streakActuel+1:o=1;const u=Math.max(r.meilleurStreak,o);return await et(t,{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}),{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}}catch(t){return console.error("Erreur mise  jour streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},$R=(e,t,r)=>{const a=r?.totalRessourcesVues||0;r?.totalQuizReussis;const l=r?.disciplinesCompletees||0;r?.streakActuel;const o=r?.meilleurStreak||0,u=r?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:a>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:a>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:a>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:a>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:e.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:e.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:e.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:e.moyenneGenerale>=80&&e.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:l>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:u>=3||t.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:u>=5||t.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:a>=50&&e.totalQuizReussis>=20}]},TA=e=>{if(e<60)return`${e} s`;const t=Math.floor(e/60),r=e%60;return r>0?`${t} min ${r.toString().padStart(2,"0")} s`:`${t} min`},Ml=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":"#ef4444",qA=e=>e>=80?"Excellent":e>=60?"Bien":e>=40?"Passable":" amliorer",BR=()=>{const{quizId:e}=Ds(),t=Ht(),{currentUser:r}=Ct(),[a,l]=b.useState(null),[o,u]=b.useState(""),[d,m]=b.useState(!0),[p,h]=b.useState(null),[v,y]=b.useState("intro"),[x,_]=b.useState(0),[N,S]=b.useState({}),[C,z]=b.useState(0),[w,E]=b.useState(0),O=b.useRef(null),[M,P]=b.useState(0),[q,L]=b.useState(0),[Y,W]=b.useState(0),[B,Q]=b.useState(!1),[k,T]=b.useState(!1);b.useEffect(()=>{(async()=>{if(!e){h("ID du quiz manquant."),m(!1);return}try{const F=await $q(e);if(!F){h("Quiz introuvable."),m(!1);return}l(F),z(F.duree*60);try{const Ee=(await Ii.getAll()).find(ie=>ie.id===F.disciplineId);u(Ee?.nom||F.disciplineId)}catch{u(F.disciplineId)}}catch(F){h("Erreur lors du chargement du quiz."),console.error(F)}finally{m(!1)}})()},[e]),b.useEffect(()=>{if(v==="playing")return O.current=setInterval(()=>{z(he=>he<=1?(clearInterval(O.current),ve(),0):he-1),E(he=>he+1)},1e3),()=>{O.current&&clearInterval(O.current)}},[v]);const R=()=>{y("playing"),_(0),S({}),E(0),a&&z(a.duree*60)},J=(he,F)=>{S(de=>({...de,[he]:F}))},H=he=>{a&&he>=0&&he<a.questions.length&&_(he)},ve=b.useCallback(async()=>{if(!a||!r||v==="review")return;O.current&&clearInterval(O.current);let he=0,F=0,de=0;a.questions.forEach(K=>{const $=K.points||1;F+=$,N[K.id]===K.reponseCorrecte&&(he+=$,de++)});const Ee=F>0?Math.round(he/F*100):0,ie=Ee>=(a.noteMinimale||50);P(he),L(F),W(de),y("review"),Q(!0);try{const K={quizId:a.id,quizTitre:a.titre,disciplineId:a.disciplineId,disciplineNom:o,userId:r.uid,reponses:a.questions.map($=>N[$.id]??-1),tempsEcoule:w,score:he,totalPoints:F,pourcentage:Ee,reussi:ie,nombreQuestions:a.questions.length,bonnesReponses:de};await ER(K),T(!0)}catch(K){console.error("Erreur lors de la sauvegarde :",K)}finally{Q(!1)}},[a,r,N,w,o,v]),U=he=>{const F=Math.floor(he/60),de=he%60;return`${F.toString().padStart(2,"0")}:${de.toString().padStart(2,"0")}`},ge=()=>{if(!a)return"";const he=a.duree*60,F=C/he;return F<=.1?"timer-critical":F<=.25?"timer-warning":""},re=Object.keys(N).length;if(d)return n.jsxs("div",{className:"quiz-player-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement du quiz..."})]});if(p||!a)return n.jsxs("div",{className:"quiz-player-error",children:[n.jsx(Xd,{size:48}),n.jsx("h3",{children:p||"Quiz introuvable"}),n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[n.jsx(nx,{size:18})," Retour au tableau de bord"]})]});if(a.isPremium&&!r?.isPremium)return n.jsx("div",{className:"quiz-player-locked",children:n.jsxs("div",{className:"qp-locked-card",children:[n.jsx(ix,{size:48}),n.jsx("h3",{children:"Quiz Premium"}),n.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),n.jsxs("p",{className:"qp-locked-price",children:[" partir de ",n.jsx("strong",{children:"2 000 FCFA/mois"})]}),n.jsxs("div",{className:"qp-locked-actions",children:[n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/premium"),children:[n.jsx(Zr,{size:18})," Devenir Premium"]}),n.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>t("/eleve/dashboard"),children:[n.jsx(uv,{size:18})," Retour"]})]})]})});if(v==="intro")return n.jsx("div",{className:"quiz-player-intro",children:n.jsxs("div",{className:"qp-intro-card",children:[n.jsxs("div",{className:"qp-intro-header",children:[n.jsxs("button",{className:"qp-back-btn",onClick:()=>t(-1),children:[n.jsx(uv,{size:20})," Retour"]}),a.isPremium&&n.jsxs("span",{className:"qp-badge qp-badge-premium",children:[n.jsx(Zr,{size:12})," Premium"]})]}),n.jsxs("div",{className:"qp-intro-content",children:[n.jsx("h1",{className:"qp-intro-title",children:a.titre}),n.jsx("span",{className:"qp-intro-discipline",children:o}),n.jsxs("div",{className:"qp-intro-stats",children:[n.jsxs("div",{className:"qp-intro-stat",children:[n.jsx(jn,{size:20}),n.jsxs("div",{children:[n.jsx("span",{className:"qp-intro-stat-value",children:a.questions.length}),n.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),n.jsxs("div",{className:"qp-intro-stat",children:[n.jsx($l,{size:20}),n.jsxs("div",{children:[n.jsxs("span",{className:"qp-intro-stat-value",children:[a.duree," min"]}),n.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),n.jsxs("div",{className:"qp-intro-stat",children:[n.jsx(qi,{size:20}),n.jsxs("div",{children:[n.jsxs("span",{className:"qp-intro-stat-value",children:[a.noteMinimale||50,"%"]}),n.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),n.jsxs("div",{className:"qp-intro-instructions",children:[n.jsx("h3",{children:"Instructions"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),n.jsx("li",{children:"Chaque question a une seule bonne rponse"}),n.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),n.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),n.jsxs("li",{children:["Il faut obtenir au moins ",a.noteMinimale||50,"% pour russir"]})]})]})]}),n.jsxs("button",{className:"qp-btn qp-btn-start",onClick:R,children:[n.jsx(gc,{size:20})," Commencer le quiz"]})]})});if(v==="playing"){const he=a.questions[x];return n.jsxs("div",{className:"quiz-player-game",children:[n.jsxs("div",{className:"qp-game-header",children:[n.jsxs("div",{className:"qp-game-info",children:[n.jsx("span",{className:"qp-game-title",children:a.titre}),n.jsx("span",{className:"qp-game-discipline",children:o})]}),n.jsxs("div",{className:`qp-timer ${ge()}`,children:[n.jsx(iq,{size:18}),n.jsx("span",{children:U(C)})]})]}),n.jsx("div",{className:"qp-progress-bar",children:n.jsx("div",{className:"qp-progress-fill",style:{width:`${(x+1)/a.questions.length*100}%`}})}),n.jsxs("div",{className:"qp-game-content",children:[n.jsxs("div",{className:"qp-question-header",children:[n.jsxs("span",{className:"qp-question-number",children:["Question ",x+1,"/",a.questions.length]}),n.jsxs("span",{className:"qp-question-points",children:[he.points||1," pt(s)"]})]}),n.jsx("h2",{className:"qp-question-text",children:he.question}),n.jsx("div",{className:"qp-options-list",children:he.options.map((F,de)=>n.jsxs("button",{className:`qp-option ${N[he.id]===de?"selected":""}`,onClick:()=>J(he.id,de),children:[n.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+de)}),n.jsx("span",{className:"qp-option-text",children:F}),N[he.id]===de&&n.jsx(Dt,{size:18,className:"qp-option-check"})]},de))})]}),n.jsxs("div",{className:"qp-game-footer",children:[n.jsx("div",{className:"qp-question-indicators",children:a.questions.map((F,de)=>n.jsx("button",{className:`qp-indicator ${de===x?"active":""} ${N[F.id]!==void 0?"answered":""}`,onClick:()=>H(de),children:de+1},F.id))}),n.jsxs("div",{className:"qp-nav-buttons",children:[n.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>H(x-1),disabled:x===0,children:[n.jsx(uv,{size:16})," Prcdent"]}),x<a.questions.length-1?n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>H(x+1),children:["Suivant ",n.jsx(cs,{size:16})]}):n.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:ve,disabled:re<a.questions.length,children:[n.jsx(Dt,{size:16}),"Soumettre (",re,"/",a.questions.length,")"]})]})]})]})}const me=q>0?Math.round(M/q*100):0,xe=me>=(a.noteMinimale||50);return n.jsxs("div",{className:"quiz-player-review",children:[n.jsxs("div",{className:`qp-score-card ${xe?"success":"fail"}`,children:[n.jsx("div",{className:"qp-score-icon",children:xe?n.jsx(qi,{size:48}):n.jsx(Xd,{size:48})}),n.jsx("h2",{className:"qp-score-title",children:xe?"Flicitations ! ":"Continuez vos efforts ! "}),n.jsxs("div",{className:"qp-score-circle",style:{borderColor:Ml(me)},children:[n.jsxs("span",{className:"qp-score-value",children:[me,"%"]}),n.jsx("span",{className:"qp-score-label",children:qA(me)})]}),n.jsxs("div",{className:"qp-score-details",children:[n.jsxs("div",{className:"qp-score-detail",children:[n.jsxs("span",{children:[Y,"/",a.questions.length]}),n.jsx("small",{children:"Bonnes rponses"})]}),n.jsxs("div",{className:"qp-score-detail",children:[n.jsxs("span",{children:[M,"/",q]}),n.jsx("small",{children:"Points"})]}),n.jsxs("div",{className:"qp-score-detail",children:[n.jsx("span",{children:TA(w)}),n.jsx("small",{children:"Temps"})]})]}),B&&n.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),k&&n.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),n.jsxs("div",{className:"qp-review-actions",children:[n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[n.jsx(nx,{size:18})," Tableau de bord"]}),n.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:R,children:[n.jsx(sq,{size:18})," Recommencer"]})]}),n.jsxs("div",{className:"qp-review-questions",children:[n.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),a.questions.map((he,F)=>{const de=N[he.id],Ee=de===he.reponseCorrecte;return n.jsxs("div",{className:`qp-review-question ${Ee?"correct":"incorrect"}`,children:[n.jsxs("div",{className:"qp-review-question-header",children:[n.jsxs("span",{className:"qp-review-q-number",children:["Q",F+1]}),Ee?n.jsxs("span",{className:"qp-review-badge correct",children:[n.jsx(Dt,{size:14})," Correct"]}):n.jsxs("span",{className:"qp-review-badge incorrect",children:[n.jsx(sx,{size:14})," Incorrect"]}),n.jsxs("span",{className:"qp-review-q-points",children:[Ee?he.points||1:0,"/",he.points||1," pt(s)"]})]}),n.jsx("p",{className:"qp-review-q-text",children:he.question}),n.jsx("div",{className:"qp-review-options",children:he.options.map((ie,K)=>{let $="qp-review-option";return K===he.reponseCorrecte&&($+=" correct-answer"),K===de&&!Ee&&($+=" wrong-answer"),n.jsxs("div",{className:$,children:[n.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+K)}),n.jsx("span",{children:ie}),K===he.reponseCorrecte&&n.jsx(Dt,{size:14,className:"qp-review-check"}),K===de&&!Ee&&n.jsx(sx,{size:14,className:"qp-review-x"})]},K)})}),he.explication&&n.jsxs("div",{className:"qp-review-explication",children:[n.jsx("strong",{children:" Explication :"})," ",he.explication]})]},he.id)})]})]})};function RA(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=RA(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function mt(){for(var e,t,r=0,a="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=RA(e))&&(a&&(a+=" "),a+=t);return a}var UR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function my(e){if(typeof e!="string")return!1;var t=UR;return t.includes(e)}var FR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],GR=new Set(FR);function LA(e){return typeof e!="string"?!1:GR.has(e)}function IA(e){return typeof e=="string"&&e.startsWith("data-")}function Tn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(LA(r)||IA(r))&&(t[r]=e[r]);return t}function $c(e){if(e==null)return null;if(b.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Tn(t)}return typeof e=="object"&&!Array.isArray(e)?Tn(e):null}function Ar(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(LA(r)||IA(r)||my(r))&&(t[r]=e[r]);return t}function HR(e){return e==null?null:b.isValidElement(e)?Ar(e.props):typeof e=="object"&&!Array.isArray(e)?Ar(e):null}var QR=["children","width","height","viewBox","className","style","title","desc"];function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lx.apply(null,arguments)}function VR(e,t){if(e==null)return{};var r,a,l=YR(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function YR(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var $A=b.forwardRef((e,t)=>{var{children:r,width:a,height:l,viewBox:o,className:u,style:d,title:m,desc:p}=e,h=VR(e,QR),v=o||{width:a,height:l,x:0,y:0},y=mt("recharts-surface",u);return b.createElement("svg",lx({},Ar(h),{className:y,width:a,height:l,style:d,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),b.createElement("title",null,m),b.createElement("desc",null,p),r)}),KR=["children","className"];function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ox.apply(null,arguments)}function XR(e,t){if(e==null)return{};var r,a,l=WR(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function WR(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Nn=b.forwardRef((e,t)=>{var{children:r,className:a}=e,l=XR(e,KR),o=mt("recharts-layer",a);return b.createElement("g",ox({className:o},Ar(l),{ref:t}),r)}),ZR=b.createContext(null);function gt(e){return function(){return e}}const BA=Math.cos,ef=Math.sin,In=Math.sqrt,tf=Math.PI,tm=2*tf,cx=Math.PI,ux=2*cx,us=1e-6,JR=ux-us;function UA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function e3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UA;const r=10**t;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*r)/r+a[l]}}class t3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UA:e3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,l){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,r,a,l,o,u){this._append`C${+t},${+r},${+a},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(t,r,a,l,o){if(t=+t,r=+r,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,d=this._y1,m=a-t,p=l-r,h=u-t,v=d-r,y=h*h+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>us)if(!(Math.abs(v*m-p*h)>us)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let x=a-u,_=l-d,N=m*m+p*p,S=x*x+_*_,C=Math.sqrt(N),z=Math.sqrt(y),w=o*Math.tan((cx-Math.acos((N+y-S)/(2*C*z)))/2),E=w/z,O=w/C;Math.abs(E-1)>us&&this._append`L${t+E*h},${r+E*v}`,this._append`A${o},${o},0,0,${+(v*x>h*_)},${this._x1=t+O*m},${this._y1=r+O*p}`}}arc(t,r,a,l,o,u){if(t=+t,r=+r,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(l),m=a*Math.sin(l),p=t+d,h=r+m,v=1^u,y=u?l-o:o-l;this._x1===null?this._append`M${p},${h}`:(Math.abs(this._x1-p)>us||Math.abs(this._y1-h)>us)&&this._append`L${p},${h}`,a&&(y<0&&(y=y%ux+ux),y>JR?this._append`A${a},${a},0,1,${v},${t-d},${r-m}A${a},${a},0,1,${v},${this._x1=p},${this._y1=h}`:y>us&&this._append`A${a},${a},0,${+(y>=cx)},${v},${this._x1=t+a*Math.cos(o)},${this._y1=r+a*Math.sin(o)}`)}rect(t,r,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function py(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new t3(t)}function hy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FA(e){this._context=e}FA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rm(e){return new FA(e)}function GA(e){return e[0]}function HA(e){return e[1]}function QA(e,t){var r=gt(!0),a=null,l=rm,o=null,u=py(d);e=typeof e=="function"?e:e===void 0?GA:gt(e),t=typeof t=="function"?t:t===void 0?HA:gt(t);function d(m){var p,h=(m=hy(m)).length,v,y=!1,x;for(a==null&&(o=l(x=u())),p=0;p<=h;++p)!(p<h&&r(v=m[p],p,m))===y&&((y=!y)?o.lineStart():o.lineEnd()),y&&o.point(+e(v,p,m),+t(v,p,m));if(x)return o=null,x+""||null}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:gt(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:gt(+m),d):t},d.defined=function(m){return arguments.length?(r=typeof m=="function"?m:gt(!!m),d):r},d.curve=function(m){return arguments.length?(l=m,a!=null&&(o=l(a)),d):l},d.context=function(m){return arguments.length?(m==null?a=o=null:o=l(a=m),d):a},d}function bd(e,t,r){var a=null,l=gt(!0),o=null,u=rm,d=null,m=py(p);e=typeof e=="function"?e:e===void 0?GA:gt(+e),t=typeof t=="function"?t:gt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?HA:gt(+r);function p(v){var y,x,_,N=(v=hy(v)).length,S,C=!1,z,w=new Array(N),E=new Array(N);for(o==null&&(d=u(z=m())),y=0;y<=N;++y){if(!(y<N&&l(S=v[y],y,v))===C)if(C=!C)x=y,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),_=y-1;_>=x;--_)d.point(w[_],E[_]);d.lineEnd(),d.areaEnd()}C&&(w[y]=+e(S,y,v),E[y]=+t(S,y,v),d.point(a?+a(S,y,v):w[y],r?+r(S,y,v):E[y]))}if(z)return d=null,z+""||null}function h(){return QA().defined(l).curve(u).context(o)}return p.x=function(v){return arguments.length?(e=typeof v=="function"?v:gt(+v),a=null,p):e},p.x0=function(v){return arguments.length?(e=typeof v=="function"?v:gt(+v),p):e},p.x1=function(v){return arguments.length?(a=v==null?null:typeof v=="function"?v:gt(+v),p):a},p.y=function(v){return arguments.length?(t=typeof v=="function"?v:gt(+v),r=null,p):t},p.y0=function(v){return arguments.length?(t=typeof v=="function"?v:gt(+v),p):t},p.y1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:gt(+v),p):r},p.lineX0=p.lineY0=function(){return h().x(e).y(t)},p.lineY1=function(){return h().x(e).y(r)},p.lineX1=function(){return h().x(a).y(t)},p.defined=function(v){return arguments.length?(l=typeof v=="function"?v:gt(!!v),p):l},p.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),p):u},p.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),p):o},p}class VA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function r3(e){return new VA(e,!0)}function n3(e){return new VA(e,!1)}const vy={draw(e,t){const r=In(t/tf);e.moveTo(r,0),e.arc(0,0,r,0,tm)}},a3={draw(e,t){const r=In(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},YA=In(1/3),i3=YA*2,s3={draw(e,t){const r=In(t/i3),a=r*YA;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},l3={draw(e,t){const r=In(t),a=-r/2;e.rect(a,a,r,r)}},o3=.8908130915292852,KA=ef(tf/10)/ef(7*tf/10),c3=ef(tm/10)*KA,u3=-BA(tm/10)*KA,d3={draw(e,t){const r=In(t*o3),a=c3*r,l=u3*r;e.moveTo(0,-r),e.lineTo(a,l);for(let o=1;o<5;++o){const u=tm*o/5,d=BA(u),m=ef(u);e.lineTo(m*r,-d*r),e.lineTo(d*a-m*l,m*a+d*l)}e.closePath()}},jv=In(3),f3={draw(e,t){const r=-In(t/(jv*3));e.moveTo(0,r*2),e.lineTo(-jv*r,-r),e.lineTo(jv*r,-r),e.closePath()}},gn=-.5,xn=In(3)/2,dx=1/In(12),m3=(dx/2+1)*3,p3={draw(e,t){const r=In(t/m3),a=r/2,l=r*dx,o=a,u=r*dx+r,d=-o,m=u;e.moveTo(a,l),e.lineTo(o,u),e.lineTo(d,m),e.lineTo(gn*a-xn*l,xn*a+gn*l),e.lineTo(gn*o-xn*u,xn*o+gn*u),e.lineTo(gn*d-xn*m,xn*d+gn*m),e.lineTo(gn*a+xn*l,gn*l-xn*a),e.lineTo(gn*o+xn*u,gn*u-xn*o),e.lineTo(gn*d+xn*m,gn*m-xn*d),e.closePath()}};function h3(e,t){let r=null,a=py(l);e=typeof e=="function"?e:gt(e||vy),t=typeof t=="function"?t:gt(t===void 0?64:+t);function l(){let o;if(r||(r=o=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:gt(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),l):t},l.context=function(o){return arguments.length?(r=o??null,l):r},l}function rf(){}function nf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function XA(e){this._context=e}XA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v3(e){return new XA(e)}function WA(e){this._context=e}WA.prototype={areaStart:rf,areaEnd:rf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g3(e){return new WA(e)}function ZA(e){this._context=e}ZA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:nf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function x3(e){return new ZA(e)}function JA(e){this._context=e}JA.prototype={areaStart:rf,areaEnd:rf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function y3(e){return new JA(e)}function u_(e){return e<0?-1:1}function d_(e,t,r){var a=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),u=(r-e._y1)/(l||a<0&&-0),d=(o*l+u*a)/(a+l);return(u_(o)+u_(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(d))||0}function f_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Nv(e,t,r){var a=e._x0,l=e._y0,o=e._x1,u=e._y1,d=(o-a)/3;e._context.bezierCurveTo(a+d,l+d*t,o-d,u-d*r,o,u)}function af(e){this._context=e}af.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nv(this,this._t0,f_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Nv(this,f_(this,r=d_(this,e,t)),r);break;default:Nv(this,this._t0,r=d_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function eE(e){this._context=new tE(e)}(eE.prototype=Object.create(af.prototype)).point=function(e,t){af.prototype.point.call(this,t,e)};function tE(e){this._context=e}tE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,l,o){this._context.bezierCurveTo(t,e,a,r,o,l)}};function b3(e){return new af(e)}function j3(e){return new eE(e)}function rE(e){this._context=e}rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=m_(e),l=m_(t),o=0,u=1;u<r;++o,++u)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[u],t[u]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function m_(e){var t,r=e.length-1,a,l=new Array(r),o=new Array(r),u=new Array(r);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],t=1;t<r-1;++t)l[t]=1,o[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[r-1]=2,o[r-1]=7,u[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=l[t]/o[t-1],o[t]-=a,u[t]-=a*u[t-1];for(l[r-1]=u[r-1]/o[r-1],t=r-2;t>=0;--t)l[t]=(u[t]-l[t+1])/o[t];for(o[r-1]=(e[r]+l[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function N3(e){return new rE(e)}function nm(e,t){this._context=e,this._t=t}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function _3(e){return new nm(e,.5)}function S3(e){return new nm(e,0)}function w3(e){return new nm(e,1)}function Ns(e,t){if((u=e.length)>1)for(var r=1,a,l,o=e[t[0]],u,d=o.length;r<u;++r)for(l=o,o=e[t[r]],a=0;a<d;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function fx(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function C3(e,t){return e[t]}function A3(e){const t=[];return t.key=e,t}function E3(){var e=gt([]),t=fx,r=Ns,a=C3;function l(o){var u=Array.from(e.apply(this,arguments),A3),d,m=u.length,p=-1,h;for(const v of o)for(d=0,++p;d<m;++d)(u[d][p]=[0,+a(v,u[d].key,p,o)]).data=v;for(d=0,h=hy(t(u));d<m;++d)u[h[d]].index=d;return r(u,h),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:gt(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:gt(+o),l):a},l.order=function(o){return arguments.length?(t=o==null?fx:typeof o=="function"?o:gt(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(r=o??Ns,l):r},l}function z3(e,t){if((a=e.length)>0){for(var r,a,l=0,o=e[0].length,u;l<o;++l){for(u=r=0;r<a;++r)u+=e[r][l][1]||0;if(u)for(r=0;r<a;++r)e[r][l][1]/=u}Ns(e,t)}}function O3(e,t){if((l=e.length)>0){for(var r=0,a=e[t[0]],l,o=a.length;r<o;++r){for(var u=0,d=0;u<l;++u)d+=e[u][r][1]||0;a[r][1]+=a[r][0]=-d/2}Ns(e,t)}}function D3(e,t){if(!(!((u=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var r=0,a=1,l,o,u;a<o;++a){for(var d=0,m=0,p=0;d<u;++d){for(var h=e[t[d]],v=h[a][1]||0,y=h[a-1][1]||0,x=(v-y)/2,_=0;_<d;++_){var N=e[t[_]],S=N[a][1]||0,C=N[a-1][1]||0;x+=S-C}m+=v,p+=x*v}l[a-1][1]+=l[a-1][0]=r,m&&(r-=p/m)}l[a-1][1]+=l[a-1][0]=r,Ns(e,t)}}var _v={},Sv={},p_;function M3(){return p_||(p_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Sv)),Sv}var wv={},h_;function nE(){return h_||(h_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(wv)),wv}var Cv={},v_;function gy(){return v_||(v_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Cv)),Cv}var Av={},Ev={},g_;function k3(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const a=String(r);return a==="0"&&Object.is(Number(r),-0)?"-0":a}e.toString=t})(Ev)),Ev}var x_;function xy(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k3(),r=gy();function a(l){if(Array.isArray(l))return l.map(r.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],u=l.length;if(u===0)return o;let d=0,m="",p="",h=!1;for(l.charCodeAt(0)===46&&(o.push(""),d++);d<u;){const v=l[d];p?v==="\\"&&d+1<u?(d++,m+=l[d]):v===p?p="":m+=v:h?v==='"'||v==="'"?p=v:v==="]"?(h=!1,o.push(m),m=""):m+=v:v==="["?(h=!0,m&&(o.push(m),m="")):v==="."?m&&(o.push(m),m=""):m+=v,d++}return m&&o.push(m),o}e.toPath=a})(Av)),Av}var y_;function yy(){return y_||(y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M3(),r=nE(),a=gy(),l=xy();function o(d,m,p){if(d==null)return p;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?r.isDeepKey(m)?o(d,l.toPath(m),p):p:h}case"number":case"symbol":{typeof m=="number"&&(m=a.toKey(m));const h=d[m];return h===void 0?p:h}default:{if(Array.isArray(m))return u(d,m,p);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?p:h}}}function u(d,m,p){if(m.length===0)return p;let h=d;for(let v=0;v<m.length;v++){if(h==null||t.isUnsafeProperty(m[v]))return p;h=h[m[v]]}return h===void 0?p:h}e.get=o})(_v)),_v}var zv,b_;function P3(){return b_||(b_=1,zv=yy().get),zv}var T3=P3();const Ul=Fa(T3);var q3=4;function zi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q3,r=10**t,a=Math.round(e*r)/r;return Object.is(a,-0)?0:a}function Mt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return e.reduce((l,o,u)=>{var d=r[u-1];return typeof d=="string"?l+d+o:d!==void 0?l+zi(d)+o:l+o},"")}var Lr=e=>e===0?0:e>0?1:-1,ra=e=>typeof e=="number"&&e!=+e,_s=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Se=e=>(typeof e=="number"||e instanceof Number)&&!ra(e),na=e=>Se(e)||typeof e=="string",R3=0,_c=e=>{var t=++R3;return"".concat(e||"").concat(t)},qn=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Se(t)&&typeof t!="string")return a;var o;if(_s(t)){if(r==null)return a;var u=t.indexOf("%");o=r*parseFloat(t.slice(0,u))/100}else o=+t;return ra(o)&&(o=a),l&&r!=null&&o>r&&(o=r),o},aE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[String(e[a])])r[String(e[a])]=!0;else return!0;return!1};function kt(e,t,r){return Se(e)&&Se(t)?zi(e+r*(t-e)):t}function iE(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Ul(a,t))===r)}var At=e=>e===null||typeof e>"u",Bc=e=>At(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Ir(e){return e!=null}function Ms(){}var L3=["type","size","sizeType"];function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mx.apply(null,arguments)}function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function N_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(r),!0).forEach(function(a){I3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j_(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function I3(e,t,r){return(t=$3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $3(e){var t=B3(e,"string");return typeof t=="symbol"?t:t+""}function B3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U3(e,t){if(e==null)return{};var r,a,l=F3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function F3(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var sE={symbolCircle:vy,symbolCross:a3,symbolDiamond:s3,symbolSquare:l3,symbolStar:d3,symbolTriangle:f3,symbolWye:p3},G3=Math.PI/180,H3=e=>{var t="symbol".concat(Bc(e));return sE[t]||vy},Q3=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*G3;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},V3=(e,t)=>{sE["symbol".concat(Bc(e))]=t},lE=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,l=U3(e,L3),o=N_(N_({},l),{},{type:t,size:r,sizeType:a}),u="circle";typeof t=="string"&&(u=t);var d=()=>{var y=H3(u),x=h3().type(y).size(Q3(r,a,u)),_=x();if(_!==null)return _},{className:m,cx:p,cy:h}=o,v=Ar(o);return Se(p)&&Se(h)&&Se(r)?b.createElement("path",mx({},v,{className:mt("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};lE.registerSymbol=V3;var oE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,by=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(l=>{my(l)&&(a[l]=(o=>r[l](r,o)))}),a},Y3=(e,t,r)=>a=>(e(t,r,a),null),jy=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];my(l)&&typeof o=="function"&&(a||(a={}),a[l]=Y3(o,t,r))}),a};function __(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function K3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?__(Object(r),!0).forEach(function(a){X3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function X3(e,t,r){return(t=W3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W3(e){var t=Z3(e,"string");return typeof t=="symbol"?t:t+""}function Z3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zr(e,t){var r=K3({},e),a=t,l=Object.keys(t),o=l.reduce((u,d)=>(u[d]===void 0&&a[d]!==void 0&&(u[d]=a[d]),u),r);return o}var Ov={},Dv={},S_;function J3(){return S_||(S_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const l=new Map;for(let o=0;o<r.length;o++){const u=r[o],d=a(u,o,r);l.has(d)||l.set(d,u)}return Array.from(l.values())}e.uniqBy=t})(Dv)),Dv}var Mv={},w_;function e5(){return w_||(w_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return function(...l){return r.apply(this,l.slice(0,a))}}e.ary=t})(Mv)),Mv}var kv={},C_;function cE(){return C_||(C_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(kv)),kv}var Pv={},Tv={},qv={},A_;function t5(){return A_||(A_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(qv)),qv}var E_;function Ny(){return E_||(E_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t5();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r})(Tv)),Tv}var Rv={},z_;function r5(){return z_||(z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Rv)),Rv}var O_;function n5(){return O_||(O_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ny(),r=r5();function a(l){return r.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=a})(Pv)),Pv}var Lv={},Iv={},D_;function a5(){return D_||(D_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yy();function r(a){return function(l){return t.get(l,a)}}e.property=r})(Iv)),Iv}var $v={},Bv={},Uv={},Fv={},M_;function uE(){return M_||(M_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Fv)),Fv}var Gv={},k_;function dE(){return k_||(k_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Gv)),Gv}var Hv={},P_;function fE(){return P_||(P_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(Hv)),Hv}var T_;function i5(){return T_||(T_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uE(),r=dE(),a=fE();function l(h,v,y){return typeof y!="function"?l(h,v,()=>{}):o(h,v,function x(_,N,S,C,z,w){const E=y(_,N,S,C,z,w);return E!==void 0?!!E:o(_,N,x,w)},new Map)}function o(h,v,y,x){if(v===h)return!0;switch(typeof v){case"object":return u(h,v,y,x);case"function":return Object.keys(v).length>0?o(h,{...v},y,x):a.isEqualsSameValueZero(h,v);default:return t.isObject(h)?typeof v=="string"?v==="":!0:a.isEqualsSameValueZero(h,v)}}function u(h,v,y,x){if(v==null)return!0;if(Array.isArray(v))return m(h,v,y,x);if(v instanceof Map)return d(h,v,y,x);if(v instanceof Set)return p(h,v,y,x);const _=Object.keys(v);if(h==null||r.isPrimitive(h))return _.length===0;if(_.length===0)return!0;if(x?.has(v))return x.get(v)===h;x?.set(v,h);try{for(let N=0;N<_.length;N++){const S=_[N];if(!r.isPrimitive(h)&&!(S in h)||v[S]===void 0&&h[S]!==void 0||v[S]===null&&h[S]!==null||!y(h[S],v[S],S,h,v,x))return!1}return!0}finally{x?.delete(v)}}function d(h,v,y,x){if(v.size===0)return!0;if(!(h instanceof Map))return!1;for(const[_,N]of v.entries()){const S=h.get(_);if(y(S,N,_,h,v,x)===!1)return!1}return!0}function m(h,v,y,x){if(v.length===0)return!0;if(!Array.isArray(h))return!1;const _=new Set;for(let N=0;N<v.length;N++){const S=v[N];let C=!1;for(let z=0;z<h.length;z++){if(_.has(z))continue;const w=h[z];let E=!1;if(y(w,S,N,h,v,x)&&(E=!0),E){_.add(z),C=!0;break}}if(!C)return!1}return!0}function p(h,v,y,x){return v.size===0?!0:h instanceof Set?m([...h],[...v],y,x):!1}e.isMatchWith=l,e.isSetMatch=p})(Uv)),Uv}var q_;function mE(){return q_||(q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i5();function r(a,l){return t.isMatchWith(a,l,()=>{})}e.isMatch=r})(Bv)),Bv}var Qv={},Vv={},Yv={},R_;function s5(){return R_||(R_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t})(Yv)),Yv}var Kv={},L_;function _y(){return L_||(L_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Kv)),Kv}var Xv={},I_;function pE(){return I_||(I_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",d="[object Date]",m="[object Map]",p="[object Set]",h="[object Array]",v="[object Function]",y="[object ArrayBuffer]",x="[object Object]",_="[object Error]",N="[object DataView]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",z="[object Uint16Array]",w="[object Uint32Array]",E="[object BigUint64Array]",O="[object Int8Array]",M="[object Int16Array]",P="[object Int32Array]",q="[object BigInt64Array]",L="[object Float32Array]",Y="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=y,e.arrayTag=h,e.bigInt64ArrayTag=q,e.bigUint64ArrayTag=E,e.booleanTag=l,e.dataViewTag=N,e.dateTag=d,e.errorTag=_,e.float32ArrayTag=L,e.float64ArrayTag=Y,e.functionTag=v,e.int16ArrayTag=M,e.int32ArrayTag=P,e.int8ArrayTag=O,e.mapTag=m,e.numberTag=a,e.objectTag=x,e.regexpTag=t,e.setTag=p,e.stringTag=r,e.symbolTag=u,e.uint16ArrayTag=z,e.uint32ArrayTag=w,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=C})(Xv)),Xv}var Wv={},$_;function l5(){return $_||($_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Wv)),Wv}var B_;function hE(){return B_||(B_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s5(),r=_y(),a=pE(),l=dE(),o=l5();function u(h,v){return d(h,void 0,h,new Map,v)}function d(h,v,y,x=new Map,_=void 0){const N=_?.(h,v,y,x);if(N!==void 0)return N;if(l.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const S=new Array(h.length);x.set(h,S);for(let C=0;C<h.length;C++)S[C]=d(h[C],C,y,x,_);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;x.set(h,S);for(const[C,z]of h)S.set(C,d(z,C,y,x,_));return S}if(h instanceof Set){const S=new Set;x.set(h,S);for(const C of h)S.add(d(C,void 0,y,x,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,S);for(let C=0;C<h.length;C++)S[C]=d(h[C],C,y,x,_);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,S),m(S,h,y,x,_),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return x.set(h,S),m(S,h,y,x,_),S}if(typeof Blob<"u"&&h instanceof Blob){const S=new Blob([h],{type:h.type});return x.set(h,S),m(S,h,y,x,_),S}if(h instanceof Error){const S=new h.constructor;return x.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,m(S,h,y,x,_),S}if(h instanceof Boolean){const S=new Boolean(h.valueOf());return x.set(h,S),m(S,h,y,x,_),S}if(h instanceof Number){const S=new Number(h.valueOf());return x.set(h,S),m(S,h,y,x,_),S}if(h instanceof String){const S=new String(h.valueOf());return x.set(h,S),m(S,h,y,x,_),S}if(typeof h=="object"&&p(h)){const S=Object.create(Object.getPrototypeOf(h));return x.set(h,S),m(S,h,y,x,_),S}return h}function m(h,v,y=h,x,_){const N=[...Object.keys(v),...t.getSymbols(v)];for(let S=0;S<N.length;S++){const C=N[S],z=Object.getOwnPropertyDescriptor(h,C);(z==null||z.writable)&&(h[C]=d(v[C],C,y,x,_))}}function p(h){switch(r.getTag(h)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=m})(Vv)),Vv}var U_;function o5(){return U_||(U_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hE();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r})(Qv)),Qv}var F_;function c5(){return F_||(F_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mE(),r=o5();function a(l){return l=r.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=a})($v)),$v}var Zv={},Jv={},eg={},G_;function u5(){return G_||(G_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hE(),r=_y(),a=pE();function l(o,u){return t.cloneDeepWith(o,(d,m,p,h)=>{const v=u?.(d,m,p,h);if(v!==void 0)return v;if(typeof o=="object"){if(r.getTag(o)===a.objectTag&&typeof o.constructor!="function"){const y={};return h.set(o,y),t.copyProperties(y,o,p,h),y}switch(Object.prototype.toString.call(o)){case a.numberTag:case a.stringTag:case a.booleanTag:{const y=new o.constructor(o?.valueOf());return t.copyProperties(y,o),y}case a.argumentsTag:{const y={};return t.copyProperties(y,o),y.length=o.length,y[Symbol.iterator]=o[Symbol.iterator],y}default:return}}})}e.cloneDeepWith=l})(eg)),eg}var H_;function d5(){return H_||(H_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u5();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r})(Jv)),Jv}var tg={},rg={},Q_;function vE(){return Q_||(Q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r})(rg)),rg}var ng={},V_;function f5(){return V_||(V_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_y();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r})(ng)),ng}var Y_;function m5(){return Y_||(Y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nE(),r=vE(),a=f5(),l=xy();function o(u,d){let m;if(Array.isArray(d)?m=d:typeof d=="string"&&t.isDeepKey(d)&&u?.[d]==null?m=l.toPath(d):m=[d],m.length===0)return!1;let p=u;for(let h=0;h<m.length;h++){const v=m[h];if((p==null||!Object.hasOwn(p,v))&&!((Array.isArray(p)||a.isArguments(p))&&r.isIndex(v)&&v<p.length))return!1;p=p[v]}return!0}e.has=o})(tg)),tg}var K_;function p5(){return K_||(K_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mE(),r=gy(),a=d5(),l=yy(),o=m5();function u(d,m){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return m=a.cloneDeep(m),function(p){const h=l.get(p,d);return h===void 0?o.has(p,d):m===void 0?h===void 0:t.isMatch(h,m)}}e.matchesProperty=u})(Zv)),Zv}var X_;function h5(){return X_||(X_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cE(),r=a5(),a=c5(),l=p5();function o(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):a.matches(u);case"string":case"symbol":case"number":return r.property(u)}}e.iteratee=o})(Lv)),Lv}var W_;function v5(){return W_||(W_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J3(),r=e5(),a=cE(),l=n5(),o=h5();function u(d,m=a.identity){return l.isArrayLikeObject(d)?t.uniqBy(Array.from(d),r.ary(o.iteratee(m),1)):[]}e.uniqBy=u})(Ov)),Ov}var ag,Z_;function g5(){return Z_||(Z_=1,ag=v5().uniqBy),ag}var x5=g5();const J_=Fa(x5);function y5(e,t,r){return t===!0?J_(e,r):typeof t=="function"?J_(e,t):e}var ig={exports:{}},sg={},lg={exports:{}},og={};var eS;function b5(){if(eS)return og;eS=1;var e=Xf();function t(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function d(v,y){var x=y(),_=a({inst:{value:x,getSnapshot:y}}),N=_[0].inst,S=_[1];return o(function(){N.value=x,N.getSnapshot=y,m(N)&&S({inst:N})},[v,x,y]),l(function(){return m(N)&&S({inst:N}),v(function(){m(N)&&S({inst:N})})},[v]),u(x),x}function m(v){var y=v.getSnapshot;v=v.value;try{var x=y();return!r(v,x)}catch{return!0}}function p(v,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return og.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,og}var tS;function j5(){return tS||(tS=1,lg.exports=b5()),lg.exports}var rS;function N5(){if(rS)return sg;rS=1;var e=Xf(),t=j5();function r(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var a=typeof Object.is=="function"?Object.is:r,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,d=e.useMemo,m=e.useDebugValue;return sg.useSyncExternalStoreWithSelector=function(p,h,v,y,x){var _=o(null);if(_.current===null){var N={hasValue:!1,value:null};_.current=N}else N=_.current;_=d(function(){function C(M){if(!z){if(z=!0,w=M,M=y(M),x!==void 0&&N.hasValue){var P=N.value;if(x(P,M))return E=P}return E=M}if(P=E,a(w,M))return P;var q=y(M);return x!==void 0&&x(P,q)?(w=M,P):(w=M,E=q)}var z=!1,w,E,O=v===void 0?null:v;return[function(){return C(h())},O===null?void 0:function(){return C(O())}]},[h,v,y,x]);var S=l(p,_[0],_[1]);return u(function(){N.hasValue=!0,N.value=S},[S]),m(S),S},sg}var nS;function _5(){return nS||(nS=1,ig.exports=N5()),ig.exports}var S5=_5(),Sy=b.createContext(null),w5=e=>e,qt=()=>{var e=b.useContext(Sy);return e?e.store.dispatch:w5},Fd=()=>{},C5=()=>Fd,A5=(e,t)=>e===t;function ze(e){var t=b.useContext(Sy),r=b.useMemo(()=>t?a=>{if(a!=null)return e(a)}:Fd,[t,e]);return S5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:C5,t?t.store.getState:Fd,t?t.store.getState:Fd,r,A5)}function E5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function z5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function O5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var aS=e=>Array.isArray(e)?e:[e];function D5(e){const t=Array.isArray(e[0])?e[0]:e;return O5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function M5(e,t){const r=[],{length:a}=e;for(let l=0;l<a;l++)r.push(e[l].apply(null,t));return r}var k5=class{constructor(e){this.value=e}deref(){return this.value}},P5=typeof WeakRef<"u"?WeakRef:k5,T5=0,iS=1;function jd(){return{s:T5,v:void 0,o:null,p:null}}function gE(e,t={}){let r=jd();const{resultEqualityCheck:a}=t;let l,o=0;function u(){let d=r;const{length:m}=arguments;for(let v=0,y=m;v<y;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let _=d.o;_===null&&(d.o=_=new WeakMap);const N=_.get(x);N===void 0?(d=jd(),_.set(x,d)):d=N}else{let _=d.p;_===null&&(d.p=_=new Map);const N=_.get(x);N===void 0?(d=jd(),_.set(x,d)):d=N}}const p=d;let h;if(d.s===iS)h=d.v;else if(h=e.apply(null,arguments),o++,a){const v=l?.deref?.()??l;v!=null&&a(v,h)&&(h=v,o!==0&&o--),l=typeof h=="object"&&h!==null||typeof h=="function"?new P5(h):h}return p.s=iS,p.v=h,h}return u.clearCache=()=>{r=jd(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function q5(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let o=0,u=0,d,m={},p=l.pop();typeof p=="object"&&(m=p,p=l.pop()),E5(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const h={...r,...m},{memoize:v,memoizeOptions:y=[],argsMemoize:x=gE,argsMemoizeOptions:_=[]}=h,N=aS(y),S=aS(_),C=D5(l),z=v(function(){return o++,p.apply(null,arguments)},...N),w=x(function(){u++;const O=M5(C,arguments);return d=z.apply(null,O),d},...S);return Object.assign(w,{resultFunc:p,memoizedResultFunc:z,dependencies:C,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:x})};return Object.assign(a,{withTypes:()=>a}),a}var ae=q5(gE),R5=Object.assign((e,t=ae)=>{z5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(o=>e[o]);return t(a,(...o)=>o.reduce((u,d,m)=>(u[r[m]]=d,u),{}))},{withTypes:()=>R5}),cg={},ug={},dg={},sS;function L5(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,l,o)=>{if(a!==l){const u=t(a),d=t(l);if(u===d&&u===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?d-u:u-d}return 0};e.compareValues=r})(dg)),dg}var fg={},mg={},lS;function xE(){return lS||(lS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(mg)),mg}var oS;function I5(){return oS||(oS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!r.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})(fg)),fg}var cS;function $5(){return cS||(cS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5(),r=I5(),a=xy();function l(o,u,d,m){if(o==null)return[];d=m?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(x=>String(x));const p=(x,_)=>{let N=x;for(let S=0;S<_.length&&N!=null;++S)N=N[_[S]];return N},h=(x,_)=>_==null||x==null?_:typeof x=="object"&&"key"in x?Object.hasOwn(_,x.key)?_[x.key]:p(_,x.path):typeof x=="function"?x(_):Array.isArray(x)?p(_,x):typeof _=="object"?_[x]:_,v=u.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:a.toPath(x)}));return o.map(x=>({original:x,criteria:v.map(_=>h(_,x))})).slice().sort((x,_)=>{for(let N=0;N<v.length;N++){const S=t.compareValues(x.criteria[N],_.criteria[N],d[N]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=l})(ug)),ug}var pg={},uS;function B5(){return uS||(uS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const l=[],o=Math.floor(a),u=(d,m)=>{for(let p=0;p<d.length;p++){const h=d[p];Array.isArray(h)&&m<o?u(h,m+1):l.push(h)}};return u(r,0),l}e.flatten=t})(pg)),pg}var hg={},dS;function yE(){return dS||(dS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vE(),r=Ny(),a=uE(),l=fE();function o(u,d,m){return a.isObject(m)&&(typeof d=="number"&&r.isArrayLike(m)&&t.isIndex(d)&&d<m.length||typeof d=="string"&&d in m)?l.isEqualsSameValueZero(m[d],u):!1}e.isIterateeCall=o})(hg)),hg}var fS;function U5(){return fS||(fS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$5(),r=B5(),a=yE();function l(o,...u){const d=u.length;return d>1&&a.isIterateeCall(o,u[0],u[1])?u=[]:d>2&&a.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(o,r.flatten(u),["asc"])}e.sortBy=l})(cg)),cg}var vg,mS;function F5(){return mS||(mS=1,vg=U5().sortBy),vg}var G5=F5();const am=Fa(G5);var bE=e=>e.legend.settings,H5=e=>e.legend.size,Q5=e=>e.legend.payload;ae([Q5,bE],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?am(a,r):a});var Nd=1;function V5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=b.useState({height:0,left:0,top:0,width:0}),a=b.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-t.height)>Nd||Math.abs(u.left-t.left)>Nd||Math.abs(u.top-t.top)>Nd||Math.abs(u.width-t.width)>Nd)&&r({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function pr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Y5=typeof Symbol=="function"&&Symbol.observable||"@@observable",pS=Y5,gg=()=>Math.random().toString(36).substring(7).split("").join("."),K5={INIT:`@@redux/INIT${gg()}`,REPLACE:`@@redux/REPLACE${gg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gg()}`},sf=K5;function wy(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jE(e,t,r){if(typeof e!="function")throw new Error(pr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(pr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(pr(1));return r(jE)(e,t)}let a=e,l=t,o=new Map,u=o,d=0,m=!1;function p(){u===o&&(u=new Map,o.forEach((S,C)=>{u.set(C,S)}))}function h(){if(m)throw new Error(pr(3));return l}function v(S){if(typeof S!="function")throw new Error(pr(4));if(m)throw new Error(pr(5));let C=!0;p();const z=d++;return u.set(z,S),function(){if(C){if(m)throw new Error(pr(6));C=!1,p(),u.delete(z),o=null}}}function y(S){if(!wy(S))throw new Error(pr(7));if(typeof S.type>"u")throw new Error(pr(8));if(typeof S.type!="string")throw new Error(pr(17));if(m)throw new Error(pr(9));try{m=!0,l=a(l,S)}finally{m=!1}return(o=u).forEach(z=>{z()}),S}function x(S){if(typeof S!="function")throw new Error(pr(10));a=S,y({type:sf.REPLACE})}function _(){const S=v;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(pr(11));function z(){const E=C;E.next&&E.next(h())}return z(),{unsubscribe:S(z)}},[pS](){return this}}}return y({type:sf.INIT}),{dispatch:y,subscribe:v,getState:h,replaceReducer:x,[pS]:_}}function X5(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:sf.INIT})>"u")throw new Error(pr(12));if(typeof r(void 0,{type:sf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pr(13))})}function NE(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(r[u]=e[u])}const a=Object.keys(r);let l;try{X5(r)}catch(o){l=o}return function(u={},d){if(l)throw l;let m=!1;const p={};for(let h=0;h<a.length;h++){const v=a[h],y=r[v],x=u[v],_=y(x,d);if(typeof _>"u")throw d&&d.type,new Error(pr(14));p[v]=_,m=m||_!==x}return m=m||a.length!==Object.keys(u).length,m?p:u}}function lf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function W5(...e){return t=>(r,a)=>{const l=t(r,a);let o=()=>{throw new Error(pr(15))};const u={getState:l.getState,dispatch:(m,...p)=>o(m,...p)},d=e.map(m=>m(u));return o=lf(...d)(l.dispatch),{...l,dispatch:o}}}function _E(e){return wy(e)&&"type"in e&&typeof e.type=="string"}var SE=Symbol.for("immer-nothing"),hS=Symbol.for("immer-draftable"),Er=Symbol.for("immer-state");function Dn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Jr=Object,Fl=Jr.getPrototypeOf,of="constructor",im="prototype",px="configurable",cf="enumerable",Gd="writable",Sc="value",qa=e=>!!e&&!!e[Er];function Rn(e){return e?wE(e)||lm(e)||!!e[hS]||!!e[of]?.[hS]||om(e)||cm(e):!1}var Z5=Jr[im][of].toString(),vS=new WeakMap;function wE(e){if(!e||!Cy(e))return!1;const t=Fl(e);if(t===null||t===Jr[im])return!0;const r=Jr.hasOwnProperty.call(t,of)&&t[of];if(r===Object)return!0;if(!kl(r))return!1;let a=vS.get(r);return a===void 0&&(a=Function.toString.call(r),vS.set(r,a)),a===Z5}function sm(e,t,r=!0){Uc(e)===0?(r?Reflect.ownKeys(e):Jr.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function Uc(e){const t=e[Er];return t?t.type_:lm(e)?1:om(e)?2:cm(e)?3:0}var gS=(e,t,r=Uc(e))=>r===2?e.has(t):Jr[im].hasOwnProperty.call(e,t),hx=(e,t,r=Uc(e))=>r===2?e.get(t):e[t],uf=(e,t,r,a=Uc(e))=>{a===2?e.set(t,r):a===3?e.add(r):e[t]=r};function J5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var lm=Array.isArray,om=e=>e instanceof Map,cm=e=>e instanceof Set,Cy=e=>typeof e=="object",kl=e=>typeof e=="function",xg=e=>typeof e=="boolean";function e4(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Aa=e=>e.copy_||e.base_,Ay=e=>e.modified_?e.copy_:e.base_;function vx(e,t){if(om(e))return new Map(e);if(cm(e))return new Set(e);if(lm(e))return Array[im].slice.call(e);const r=wE(e);if(t===!0||t==="class_only"&&!r){const a=Jr.getOwnPropertyDescriptors(e);delete a[Er];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d[Gd]===!1&&(d[Gd]=!0,d[px]=!0),(d.get||d.set)&&(a[u]={[px]:!0,[Gd]:!0,[cf]:d[cf],[Sc]:e[u]})}return Jr.create(Fl(e),a)}else{const a=Fl(e);if(a!==null&&r)return{...e};const l=Jr.create(a);return Jr.assign(l,e)}}function Ey(e,t=!1){return um(e)||qa(e)||!Rn(e)||(Uc(e)>1&&Jr.defineProperties(e,{set:_d,add:_d,clear:_d,delete:_d}),Jr.freeze(e),t&&sm(e,(r,a)=>{Ey(a,!0)},!1)),e}function t4(){Dn(2)}var _d={[Sc]:t4};function um(e){return e===null||!Cy(e)?!0:Jr.isFrozen(e)}var df="MapSet",gx="Patches",xS="ArrayMethods",CE={};function Ss(e){const t=CE[e];return t||Dn(0,e),t}var yS=e=>!!CE[e],wc,AE=()=>wc,r4=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:yS(df)?Ss(df):void 0,arrayMethodsPlugin_:yS(xS)?Ss(xS):void 0});function bS(e,t){t&&(e.patchPlugin_=Ss(gx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function xx(e){yx(e),e.drafts_.forEach(n4),e.drafts_=null}function yx(e){e===wc&&(wc=e.parent_)}var jS=e=>wc=r4(wc,e);function n4(e){const t=e[Er];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function NS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Er].modified_&&(xx(t),Dn(4)),Rn(e)&&(e=_S(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(r[Er].base_,e,t)}else e=_S(t,r);return a4(t,e,!0),xx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SE?e:void 0}function _S(e,t){if(um(t))return t;const r=t[Er];if(!r)return ff(t,e.handledSet_,e);if(!dm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:a}=r;if(a)for(;a.length>0;)a.pop()(e);OE(r,e)}return r.copy_}function a4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ey(t,r)}function EE(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var dm=(e,t)=>e.scope_===t,i4=[];function zE(e,t,r,a){const l=Aa(e),o=e.type_;if(a!==void 0&&hx(l,a,o)===t){uf(l,a,r,o);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;sm(l,(m,p)=>{if(qa(p)){const h=d.get(p)||[];h.push(m),d.set(p,h)}})}const u=e.draftLocations_.get(t)??i4;for(const d of u)uf(l,d,r,o)}function s4(e,t,r){e.callbacks_.push(function(l){const o=t;if(!o||!dm(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=Ay(o);zE(e,o.draft_??o,u,r),OE(o,l)})}function OE(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}EE(e)}}function l4(e,t,r){const{scope_:a}=e;if(qa(r)){const l=r[Er];dm(l,a)&&l.callbacks_.push(function(){Hd(e);const u=Ay(l);zE(e,r,u,t)})}else Rn(r)&&e.callbacks_.push(function(){const o=Aa(e);e.type_===3?o.has(r)&&ff(r,a.handledSet_,a):hx(o,t,e.type_)===r&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&ff(hx(e.copy_,t,e.type_),a.handledSet_,a)})}function ff(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||qa(e)||t.has(e)||!Rn(e)||um(e)||(t.add(e),sm(e,(a,l)=>{if(qa(l)){const o=l[Er];if(dm(o,r)){const u=Ay(o);uf(e,a,u,e.type_),EE(o)}}else Rn(l)&&ff(l,t,r)})),e}function o4(e,t){const r=lm(e),a={type_:r?1:0,scope_:t?t.scope_:AE(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=mf;r&&(l=[a],o=Cc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,[d,a]}var mf={get(e,t){if(t===Er)return e;let r=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const l=Aa(e);if(!gS(l,t,e.type_))return c4(e,l,t);const o=l[t];if(e.finalized_||!Rn(o)||a&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&e4(t))return o;if(o===yg(e.base_,t)){Hd(e);const u=e.type_===1?+t:t,d=jx(e.scope_,o,e,u);return e.copy_[u]=d}return o},has(e,t){return t in Aa(e)},ownKeys(e){return Reflect.ownKeys(Aa(e))},set(e,t,r){const a=DE(Aa(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const l=yg(Aa(e),t),o=l?.[Er];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(J5(r,l)&&(r!==void 0||gS(e.base_,t,e.type_)))return!0;Hd(e),bx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),l4(e,t,r)),!0},deleteProperty(e,t){return Hd(e),yg(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),bx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Aa(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{[Gd]:!0,[px]:e.type_!==1||t!=="length",[cf]:a[cf],[Sc]:r[t]}},defineProperty(){Dn(11)},getPrototypeOf(e){return Fl(e.base_)},setPrototypeOf(){Dn(12)}},Cc={};for(let e in mf){let t=mf[e];Cc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Cc.deleteProperty=function(e,t){return Cc.set.call(this,e,t,void 0)};Cc.set=function(e,t,r){return mf.set.call(this,e[0],t,r,e[0])};function yg(e,t){const r=e[Er];return(r?Aa(r):e)[t]}function c4(e,t,r){const a=DE(t,r);return a?Sc in a?a[Sc]:a.get?.call(e.draft_):void 0}function DE(e,t){if(!(t in e))return;let r=Fl(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Fl(r)}}function bx(e){e.modified_||(e.modified_=!0,e.parent_&&bx(e.parent_))}function Hd(e){e.copy_||(e.assigned_=new Map,e.copy_=vx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var u4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,a,l)=>{if(kl(r)&&!kl(a)){const u=a;a=r;const d=this;return function(p=u,...h){return d.produce(p,v=>a.call(this,v,...h))}}kl(a)||Dn(6),l!==void 0&&!kl(l)&&Dn(7);let o;if(Rn(r)){const u=jS(this),d=jx(u,r,void 0);let m=!0;try{o=a(d),m=!1}finally{m?xx(u):yx(u)}return bS(u,l),NS(o,u)}else if(!r||!Cy(r)){if(o=a(r),o===void 0&&(o=r),o===SE&&(o=void 0),this.autoFreeze_&&Ey(o,!0),l){const u=[],d=[];Ss(gx).generateReplacementPatches_(r,o,{patches_:u,inversePatches_:d}),l(u,d)}return o}else Dn(1,r)},this.produceWithPatches=(r,a)=>{if(kl(r))return(d,...m)=>this.produceWithPatches(d,p=>r(p,...m));let l,o;return[this.produce(r,a,(d,m)=>{l=d,o=m}),l,o]},xg(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),xg(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),xg(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Rn(t)||Dn(8),qa(t)&&(t=Pn(t));const r=jS(this),a=jx(r,t,void 0);return a[Er].isManual_=!0,yx(r),a}finishDraft(t,r){const a=t&&t[Er];(!a||!a.isManual_)&&Dn(9);const{scope_:l}=a;return bS(l,r),NS(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let a;for(a=r.length-1;a>=0;a--){const o=r[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(r=r.slice(a+1));const l=Ss(gx).applyPatches_;return qa(t)?l(t,r):this.produce(t,o=>l(o,r))}};function jx(e,t,r,a){const[l,o]=om(t)?Ss(df).proxyMap_(t,r):cm(t)?Ss(df).proxySet_(t,r):o4(t,r);return(r?.scope_??AE()).drafts_.push(l),o.callbacks_=r?.callbacks_??[],o.key_=a,r&&a!==void 0?s4(r,o,a):o.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:p}=m;o.modified_&&p&&p.generatePatches_(o,[],m)}),l}function Pn(e){return qa(e)||Dn(10,e),ME(e)}function ME(e){if(!Rn(e)||um(e))return e;const t=e[Er];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=vx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=vx(e,!0);return sm(r,(l,o)=>{uf(r,l,ME(o))},a),t&&(t.finalized_=!1),r}var d4=new u4,kE=d4.produce;function PE(e){return({dispatch:r,getState:a})=>l=>o=>typeof o=="function"?o(r,a,e):l(o)}var f4=PE(),m4=PE,p4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lf:lf.apply(null,arguments)};function _n(e,t){function r(...a){if(t){let l=t(...a);if(!l)throw new Error(en(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>_E(a)&&a.type===e,r}var TE=class mc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,mc.prototype)}static get[Symbol.species](){return mc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new mc(...t[0].concat(this)):new mc(...t.concat(this))}};function SS(e){return Rn(e)?kE(e,()=>{}):e}function Sd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function h4(e){return typeof e=="boolean"}var v4=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let u=new TE;return r&&(h4(r)?u.push(f4):u.push(m4(r.extraArgument))),u},qE="RTK_autoBatch",St=()=>e=>({payload:e,meta:{[qE]:!0}}),wS=e=>t=>{setTimeout(t,e)},RE=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let l=!0,o=!1,u=!1;const d=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:wS(10):e.type==="callback"?e.queueNotification:wS(e.timeout),p=()=>{u=!1,o&&(o=!1,d.forEach(h=>h()))};return Object.assign({},a,{subscribe(h){const v=()=>l&&h(),y=a.subscribe(v);return d.add(h),()=>{y(),d.delete(h)}},dispatch(h){try{return l=!h?.meta?.[qE],o=!l,o&&(u||(u=!0,m(p))),a.dispatch(h)}finally{l=!0}}})},g4=e=>function(r){const{autoBatch:a=!0}=r??{};let l=new TE(e);return a&&l.push(RE(typeof a=="object"?a:void 0)),l};function x4(e){const t=v4(),{reducer:r=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(wy(r))d=NE(r);else throw new Error(en(1));let m;typeof a=="function"?m=a(t):m=t();let p=lf;l&&(p=p4({trace:!1,...typeof l=="object"&&l}));const h=W5(...m),v=g4(h);let y=typeof u=="function"?u(v):v();const x=p(...y);return jE(d,o,x)}function LE(e){const t={},r=[];let a;const l={addCase(o,u){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(en(28));if(d in t)throw new Error(en(29));return t[d]=u,l},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return r.push({matcher:o,reducer:u}),l},addDefaultCase(o){return a=o,l}};return e(l),[t,r,a]}function y4(e){return typeof e=="function"}function b4(e,t){let[r,a,l]=LE(t),o;if(y4(e))o=()=>SS(e());else{const d=SS(e);o=()=>d}function u(d=o(),m){let p=[r[m.type],...a.filter(({matcher:h})=>h(m)).map(({reducer:h})=>h)];return p.filter(h=>!!h).length===0&&(p=[l]),p.reduce((h,v)=>{if(v)if(qa(h)){const x=v(h,m);return x===void 0?h:x}else{if(Rn(h))return kE(h,y=>v(y,m));{const y=v(h,m);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},d)}return u.getInitialState=o,u}var j4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",N4=(e=21)=>{let t="",r=e;for(;r--;)t+=j4[Math.random()*64|0];return t},_4=Symbol.for("rtk-slice-createasyncthunk");function S4(e,t){return`${e}/${t}`}function w4({creators:e}={}){const t=e?.asyncThunk?.[_4];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(en(11));const u=(typeof a.reducers=="function"?a.reducers(A4()):a.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(w,E){const O=typeof w=="string"?w:w.type;if(!O)throw new Error(en(12));if(O in m.sliceCaseReducersByType)throw new Error(en(13));return m.sliceCaseReducersByType[O]=E,p},addMatcher(w,E){return m.sliceMatchers.push({matcher:w,reducer:E}),p},exposeAction(w,E){return m.actionCreators[w]=E,p},exposeCaseReducer(w,E){return m.sliceCaseReducersByName[w]=E,p}};d.forEach(w=>{const E=u[w],O={reducerName:w,type:S4(l,w),createNotation:typeof a.reducers=="function"};z4(E)?D4(O,E,p,t):E4(O,E,p)});function h(){const[w={},E=[],O=void 0]=typeof a.extraReducers=="function"?LE(a.extraReducers):[a.extraReducers],M={...w,...m.sliceCaseReducersByType};return b4(a.initialState,P=>{for(let q in M)P.addCase(q,M[q]);for(let q of m.sliceMatchers)P.addMatcher(q.matcher,q.reducer);for(let q of E)P.addMatcher(q.matcher,q.reducer);O&&P.addDefaultCase(O)})}const v=w=>w,y=new Map,x=new WeakMap;let _;function N(w,E){return _||(_=h()),_(w,E)}function S(){return _||(_=h()),_.getInitialState()}function C(w,E=!1){function O(P){let q=P[w];return typeof q>"u"&&E&&(q=Sd(x,O,S)),q}function M(P=v){const q=Sd(y,E,()=>new WeakMap);return Sd(q,P,()=>{const L={};for(const[Y,W]of Object.entries(a.selectors??{}))L[Y]=C4(W,P,()=>Sd(x,P,S),E);return L})}return{reducerPath:w,getSelectors:M,get selectors(){return M(O)},selectSlice:O}}const z={name:l,reducer:N,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...C(o),injectInto(w,{reducerPath:E,...O}={}){const M=E??o;return w.inject({reducerPath:M,reducer:N},O),{...z,...C(M,!0)}}};return z}}function C4(e,t,r,a){function l(o,...u){let d=t(o);return typeof d>"u"&&a&&(d=r()),e(d,...u)}return l.unwrapped=e,l}var Fr=w4();function A4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function E4({type:e,reducerName:t,createNotation:r},a,l){let o,u;if("reducer"in a){if(r&&!O4(a))throw new Error(en(17));o=a.reducer,u=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?_n(e,u):_n(e))}function z4(e){return e._reducerDefinitionType==="asyncThunk"}function O4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function D4({type:e,reducerName:t},r,a,l){if(!l)throw new Error(en(18));const{payloadCreator:o,fulfilled:u,pending:d,rejected:m,settled:p,options:h}=r,v=l(e,o,h);a.exposeAction(t,v),u&&a.addCase(v.fulfilled,u),d&&a.addCase(v.pending,d),m&&a.addCase(v.rejected,m),p&&a.addMatcher(v.settled,p),a.exposeCaseReducer(t,{fulfilled:u||wd,pending:d||wd,rejected:m||wd,settled:p||wd})}function wd(){}var M4="task",IE="listener",$E="completed",zy="cancelled",k4=`task-${zy}`,P4=`task-${$E}`,Nx=`${IE}-${zy}`,T4=`${IE}-${$E}`,fm=class{constructor(e){this.code=e,this.message=`${M4} ${zy} (reason: ${e})`}name="TaskAbortError";message},Oy=(e,t)=>{if(typeof e!="function")throw new TypeError(en(32))},pf=()=>{},BE=(e,t=pf)=>(e.catch(t),e),UE=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ys=e=>{if(e.aborted)throw new fm(e.reason)};function FE(e,t){let r=pf;return new Promise((a,l)=>{const o=()=>l(new fm(e.reason));if(e.aborted){o();return}r=UE(e,o),t.finally(()=>r()).then(a,l)}).finally(()=>{r=pf})}var q4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof fm?"cancelled":"rejected",error:r}}finally{t?.()}},hf=e=>t=>BE(FE(e,t).then(r=>(ys(e),r))),GE=e=>{const t=hf(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:Rl}=Object,CS={},mm="listenerMiddleware",R4=(e,t)=>{const r=a=>UE(e,()=>a.abort(e.reason));return(a,l)=>{Oy(a);const o=new AbortController;r(o);const u=q4(async()=>{ys(e),ys(o.signal);const d=await a({pause:hf(o.signal),delay:GE(o.signal),signal:o.signal});return ys(o.signal),d},()=>o.abort(P4));return l?.autoJoin&&t.push(u.catch(pf)),{result:hf(e)(u),cancel(){o.abort(k4)}}}},L4=(e,t)=>{const r=async(a,l)=>{ys(t);let o=()=>{};const d=[new Promise((m,p)=>{let h=e({predicate:a,effect:(v,y)=>{y.unsubscribe(),m([v,y.getState(),y.getOriginalState()])}});o=()=>{h(),p()}})];l!=null&&d.push(new Promise(m=>setTimeout(m,l,null)));try{const m=await FE(t,Promise.race(d));return ys(t),m}finally{o()}};return(a,l)=>BE(r(a,l))},HE=e=>{let{type:t,actionCreator:r,matcher:a,predicate:l,effect:o}=e;if(t)l=_n(t).match;else if(r)t=r.type,l=r.match;else if(a)l=a;else if(!l)throw new Error(en(21));return Oy(o),{predicate:l,type:t,effect:o}},QE=Rl(e=>{const{type:t,predicate:r,effect:a}=HE(e);return{id:N4(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(en(22))}}},{withTypes:()=>QE}),AS=(e,t)=>{const{type:r,effect:a,predicate:l}=HE(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===l)&&o.effect===a)},_x=e=>{e.pending.forEach(t=>{t.abort(Nx)})},I4=(e,t)=>()=>{for(const r of t.keys())_x(r);e.clear()},ES=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},VE=Rl(_n(`${mm}/add`),{withTypes:()=>VE}),$4=_n(`${mm}/removeAll`),YE=Rl(_n(`${mm}/remove`),{withTypes:()=>YE}),B4=(...e)=>{console.error(`${mm}/error`,...e)},Fc=(e={})=>{const t=new Map,r=new Map,a=x=>{const _=r.get(x)??0;r.set(x,_+1)},l=x=>{const _=r.get(x)??1;_===1?r.delete(x):r.set(x,_-1)},{extra:o,onError:u=B4}=e;Oy(u);const d=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),_=>{x.unsubscribe(),_?.cancelActive&&_x(x)}),m=x=>{const _=AS(t,x)??QE(x);return d(_)};Rl(m,{withTypes:()=>m});const p=x=>{const _=AS(t,x);return _&&(_.unsubscribe(),x.cancelActive&&_x(_)),!!_};Rl(p,{withTypes:()=>p});const h=async(x,_,N,S)=>{const C=new AbortController,z=L4(m,C.signal),w=[];try{x.pending.add(C),a(x),await Promise.resolve(x.effect(_,Rl({},N,{getOriginalState:S,condition:(E,O)=>z(E,O).then(Boolean),take:z,delay:GE(C.signal),pause:hf(C.signal),extra:o,signal:C.signal,fork:R4(C.signal,w),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((E,O,M)=>{E!==C&&(E.abort(Nx),M.delete(E))})},cancel:()=>{C.abort(Nx),x.pending.delete(C)},throwIfCancelled:()=>{ys(C.signal)}})))}catch(E){E instanceof fm||ES(u,E,{raisedBy:"effect"})}finally{await Promise.all(w),C.abort(T4),l(x),x.pending.delete(C)}},v=I4(t,r);return{middleware:x=>_=>N=>{if(!_E(N))return _(N);if(VE.match(N))return m(N.payload);if($4.match(N)){v();return}if(YE.match(N))return p(N.payload);let S=x.getState();const C=()=>{if(S===CS)throw new Error(en(23));return S};let z;try{if(z=_(N),t.size>0){const w=x.getState(),E=Array.from(t.values());for(const O of E){let M=!1;try{M=O.predicate(N,w,S)}catch(P){M=!1,ES(u,P,{raisedBy:"predicate"})}M&&h(O,N,x,C)}}}finally{S=CS}return z},startListening:m,stopListening:p,clearListeners:v}};function en(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var U4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},KE=Fr({name:"chartLayout",initialState:U4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,a,l,o;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:F4,setLayout:G4,setChartSize:H4,setScale:Q4}=KE.actions,V4=KE.reducer;function XE(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Xe(e){return Number.isFinite(e)}function aa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function zS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zS(Object(r),!0).forEach(function(a){Y4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Y4(e,t,r){return(t=K4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K4(e){var t=X4(e,"string");return typeof t=="symbol"?t:t+""}function X4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ut(e,t,r){return At(e)||At(t)?r:na(t)?Ul(e,t,r):typeof t=="function"?t(e):r}var W4=(e,t,r)=>{if(t&&r){var{width:a,height:l}=r,{align:o,verticalAlign:u,layout:d}=t;if((d==="vertical"||d==="horizontal"&&u==="middle")&&o!=="center"&&Se(e[o]))return Pl(Pl({},e),{},{[o]:e[o]+(a||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&u!=="middle"&&Se(e[u]))return Pl(Pl({},e),{},{[u]:e[u]+(l||0)})}return e},Ga=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",WE=(e,t,r,a)=>{if(a)return e.map(d=>d.coordinate);var l,o,u=e.map(d=>(d.coordinate===t&&(l=!0),d.coordinate===r&&(o=!0),d.coordinate));return l||u.push(t),o||u.push(r),u},ZE=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:l,range:o,scale:u,realScaleType:d,isCategorical:m,categoricalDomain:p,tickCount:h,ticks:v,niceTicks:y,axisType:x}=e;if(!u)return null;var _=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,N=l==="category"&&u.bandwidth?u.bandwidth()/_:0;if(N=x==="angleAxis"&&o&&o.length>=2?Lr(o[0]-o[1])*2*N:N,v||y){var S=(v||y||[]).map((C,z)=>{var w=a?a.indexOf(C):C,E=u.map(w);return Xe(E)?{coordinate:E+N,value:C,offset:N,index:z}:null}).filter(Ir);return S}return m&&p?p.map((C,z)=>{var w=u.map(C);return Xe(w)?{coordinate:w+N,value:C,index:z,offset:N}:null}).filter(Ir):u.ticks&&h!=null?u.ticks(h).map((C,z)=>{var w=u.map(C);return Xe(w)?{coordinate:w+N,value:C,index:z,offset:N}:null}).filter(Ir):u.domain().map((C,z)=>{var w=u.map(C);return Xe(w)?{coordinate:w+N,value:a?a[C]:C,index:z,offset:N}:null}).filter(Ir)},Z4=(e,t)=>{if(!t||t.length!==2||!Se(t[0])||!Se(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!Se(e[0])||e[0]<r)&&(l[0]=r),(!Se(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<r&&(l[1]=r),l},J4=e=>{var t,r=e.length;if(!(r<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0,d=0;d<r;++d){var m=e[d],p=m?.[l];if(p!=null){var h=p[1],v=p[0],y=ra(h)?v:h;y>=0?(p[0]=o,o+=y,p[1]=o):(p[0]=u,u+=y,p[1]=u)}}}},e6=e=>{var t,r=e.length;if(!(r<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0;u<r;++u){var d=e[u],m=d?.[l];if(m!=null){var p=ra(m[1])?m[0]:m[1];p>=0?(m[0]=o,o+=p,m[1]=o):(m[0]=0,m[1]=0)}}}},t6={sign:J4,expand:z3,none:Ns,silhouette:O3,wiggle:D3,positive:e6},r6=(e,t,r)=>{var a,l=(a=t6[r])!==null&&a!==void 0?a:Ns,o=E3().keys(t).value((d,m)=>Number(Ut(d,m,0))).order(fx).offset(l),u=o(e);return u.forEach((d,m)=>{d.forEach((p,h)=>{var v=Ut(e[h],t[m],0);Array.isArray(v)&&v.length===2&&Se(v[0])&&Se(v[1])&&(p[0]=v[0],p[1]=v[1])})}),u};function n6(e){return e==null?void 0:String(e)}function OS(e){var{axis:t,ticks:r,bandSize:a,entry:l,index:o,dataKey:u}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!At(l[t.dataKey])){var d=iE(r,"value",l[t.dataKey]);if(d)return d.coordinate+a/2}return r!=null&&r[o]?r[o].coordinate+a/2:null}var m=Ut(l,At(u)?t.dataKey:u),p=t.scale.map(m);return Se(p)?p:null}var DS=e=>{var{axis:t,ticks:r,offset:a,bandSize:l,entry:o,index:u}=e;if(t.type==="category")return r[u]?r[u].coordinate+a:null;var d=Ut(o,t.dataKey,t.scale.domain()[u]);if(At(d))return null;var m=t.scale.map(d);return Se(m)?m-l/2+a:null},a6=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return a<=0&&l>=0?0:l<0?l:a}return r[0]},i6=e=>{var t=e.flat(2).filter(Se);return[Math.min(...t),Math.max(...t)]},s6=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],l6=(e,t,r)=>{if(e!=null)return s6(Object.keys(e).reduce((a,l)=>{var o=e[l];if(!o)return a;var{stackedData:u}=o,d=u.reduce((m,p)=>{var h=XE(p,t,r),v=i6(h);return!Xe(v[0])||!Xe(v[1])?m:[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]))},MS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var l=am(t,h=>h.coordinate),o=1/0,u=1,d=l.length;u<d;u++){var m=l[u],p=l[u-1];o=Math.min((m?.coordinate||0)-(p?.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function PS(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:l,name:o}=e;return Pl(Pl({},t),{},{dataKey:r,payload:a,value:l,name:o})}function pm(e,t){if(e)return String(e);if(typeof t=="string")return t}var o6=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},c6=(e,t)=>t==="centric"?e.angle:e.radius,Ha=e=>e.layout.width,Qa=e=>e.layout.height,u6=e=>e.layout.scale,JE=e=>e.layout.margin,hm=ae(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),vm=ae(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),d6="data-recharts-item-index",f6="data-recharts-item-id",Gc=60;function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(a){m6(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function m6(e,t,r){return(t=p6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p6(e){var t=h6(e,"string");return typeof t=="symbol"?t:t+""}function h6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v6=e=>e.brush.height;function g6(e){var t=vm(e);return t.reduce((r,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Gc;return r+l}return r},0)}function x6(e){var t=vm(e);return t.reduce((r,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Gc;return r+l}return r},0)}function y6(e){var t=hm(e);return t.reduce((r,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?r+a.height:r,0)}function b6(e){var t=hm(e);return t.reduce((r,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?r+a.height:r,0)}var ar=ae([Ha,Qa,JE,v6,g6,x6,y6,b6,bE,H5],(e,t,r,a,l,o,u,d,m,p)=>{var h={left:(r.left||0)+l,right:(r.right||0)+o},v={top:(r.top||0)+u,bottom:(r.bottom||0)+d},y=Cd(Cd({},v),h),x=y.bottom;y.bottom+=a,y=W4(y,m,p);var _=e-y.left-y.right,N=t-y.top-y.bottom;return Cd(Cd({brushBottom:x},y),{},{width:Math.max(_,0),height:Math.max(N,0)})}),j6=ae(ar,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Dy=ae(Ha,Qa,(e,t)=>({x:0,y:0,width:e,height:t})),N6=b.createContext(null),Nr=()=>b.useContext(N6)!=null,gm=e=>e.brush,xm=ae([gm,ar,JE],(e,t,r)=>({height:e.height,x:Se(e.x)?e.x:t.left,y:Se(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Se(e.width)?e.width:t.width})),bg={},jg={},Ng={},qS;function _6(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:l,edges:o}={}){let u,d=null;const m=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),h=()=>{d!==null&&(r.apply(u,d),u=void 0,d=null)},v=()=>{p&&h(),N()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,v()},a)},_=()=>{y!==null&&(clearTimeout(y),y=null)},N=()=>{_(),u=void 0,d=null},S=()=>{h()},C=function(...z){if(l?.aborted)return;u=this,d=z;const w=y==null;x(),m&&w&&h()};return C.schedule=x,C.cancel=N,C.flush=S,l?.addEventListener("abort",N,{once:!0}),C}e.debounce=t})(Ng)),Ng}var RS;function S6(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_6();function r(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:d=!0,maxWait:m}=o,p=Array(2);u&&(p[0]="leading"),d&&(p[1]="trailing");let h,v=null;const y=t.debounce(function(...N){h=a.apply(this,N),v=null},l,{edges:p}),x=function(...N){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(h=a.apply(this,N),v=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,N),h)},_=()=>(y.flush(),h);return x.cancel=y.cancel,x.flush=_,x}e.debounce=r})(jg)),jg}var LS;function w6(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S6();function r(a,l=0,o={}){const{leading:u=!0,trailing:d=!0}=o;return t.debounce(a,l,{leading:u,maxWait:l,trailing:d})}e.throttle=r})(bg)),bg}var _g,IS;function C6(){return IS||(IS=1,_g=w6().throttle),_g}var A6=C6();const E6=Fa(A6);var vf=function(t,r){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(r.replace(/%s/g,()=>l[u++]))}},Zn={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},ez=(e,t,r)=>{var{width:a=Zn.width,height:l=Zn.height,aspect:o,maxHeight:u}=r,d=_s(a)?e:Number(a),m=_s(l)?t:Number(l);return o&&o>0&&(d?m=d/o:m&&(d=m*o),u&&m!=null&&m>u&&(m=u)),{calculatedWidth:d,calculatedHeight:m}},z6={width:0,height:0,overflow:"visible"},O6={width:0,overflowX:"visible"},D6={height:0,overflowY:"visible"},M6={},k6=e=>{var{width:t,height:r}=e,a=_s(t),l=_s(r);return a&&l?z6:a?O6:l?D6:M6};function P6(e){var{width:t,height:r,aspect:a}=e,l=t,o=r;return l===void 0&&o===void 0?(l=Zn.width,o=Zn.height):l===void 0?l=a&&a>0?void 0:Zn.width:o===void 0&&(o=a&&a>0?void 0:Zn.height),{width:l,height:o}}function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sx.apply(null,arguments)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function BS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(a){T6(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function T6(e,t,r){return(t=q6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q6(e){var t=R6(e,"string");return typeof t=="symbol"?t:t+""}function R6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tz=b.createContext(Zn.initialDimension);function L6(e){return aa(e.width)&&aa(e.height)}function rz(e){var{children:t,width:r,height:a}=e,l=b.useMemo(()=>({width:r,height:a}),[r,a]);return L6(l)?b.createElement(tz.Provider,{value:l},t):null}var My=()=>b.useContext(tz),I6=b.forwardRef((e,t)=>{var{aspect:r,initialDimension:a=Zn.initialDimension,width:l,height:o,minWidth:u=Zn.minWidth,minHeight:d,maxHeight:m,children:p,debounce:h=Zn.debounce,id:v,className:y,onResize:x,style:_={}}=e,N=b.useRef(null),S=b.useRef();S.current=x,b.useImperativeHandle(t,()=>N.current);var[C,z]=b.useState({containerWidth:a.width,containerHeight:a.height}),w=b.useCallback((q,L)=>{z(Y=>{var W=Math.round(q),B=Math.round(L);return Y.containerWidth===W&&Y.containerHeight===B?Y:{containerWidth:W,containerHeight:B}})},[]);b.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Ms;var q=B=>{var Q,k=B[0];if(k!=null){var{width:T,height:R}=k.contentRect;w(T,R),(Q=S.current)===null||Q===void 0||Q.call(S,T,R)}};h>0&&(q=E6(q,h,{trailing:!0,leading:!1}));var L=new ResizeObserver(q),{width:Y,height:W}=N.current.getBoundingClientRect();return w(Y,W),L.observe(N.current),()=>{L.disconnect()}},[w,h]);var{containerWidth:E,containerHeight:O}=C;vf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:P}=ez(E,O,{width:l,height:o,aspect:r,maxHeight:m});return vf(M!=null&&M>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,P,l,o,u,d,r),b.createElement("div",{id:v?"".concat(v):void 0,className:mt("recharts-responsive-container",y),style:BS(BS({},_),{},{width:l,height:o,minWidth:u,minHeight:d,maxHeight:m}),ref:N},b.createElement("div",{style:k6({width:l,height:o})},b.createElement(rz,{width:M,height:P},p)))}),US=b.forwardRef((e,t)=>{var r=My();if(aa(r.width)&&aa(r.height))return e.children;var{width:a,height:l}=P6({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=ez(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Se(o)&&Se(u)?b.createElement(rz,{width:o,height:u},e.children):b.createElement(I6,Sx({},e,{width:a,height:l,ref:t}))});function ky(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var ym=()=>{var e,t=Nr(),r=ze(j6),a=ze(xm),l=(e=ze(gm))===null||e===void 0?void 0:e.padding;return!t||!a||!l?r:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},$6={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},nz=()=>{var e;return(e=ze(ar))!==null&&e!==void 0?e:$6},az=()=>ze(Ha),iz=()=>ze(Qa),lt=e=>e.layout.layoutType,ks=()=>ze(lt),sz=()=>{var e=ks();if(e==="horizontal"||e==="vertical")return e},lz=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},B6=()=>{var e=ks();return e!==void 0},Hc=e=>{var t=qt(),r=Nr(),{width:a,height:l}=e,o=My(),u=a,d=l;return o&&(u=o.width>0?o.width:a,d=o.height>0?o.height:l),b.useEffect(()=>{!r&&aa(u)&&aa(d)&&t(H4({width:u,height:d}))},[t,r,u,d]),null},oz=Symbol.for("immer-nothing"),FS=Symbol.for("immer-draftable"),tn=Symbol.for("immer-state");function Mn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ac=Object.getPrototypeOf;function Hl(e){return!!e&&!!e[tn]}function ws(e){return e?cz(e)||Array.isArray(e)||!!e[FS]||!!e.constructor?.[FS]||Qc(e)||jm(e):!1}var U6=Object.prototype.constructor.toString(),GS=new WeakMap;function cz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let a=GS.get(r);return a===void 0&&(a=Function.toString.call(r),GS.set(r,a)),a===U6}function gf(e,t,r=!0){bm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function bm(e){const t=e[tn];return t?t.type_:Array.isArray(e)?1:Qc(e)?2:jm(e)?3:0}function wx(e,t){return bm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uz(e,t,r){const a=bm(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function F6(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Qc(e){return e instanceof Map}function jm(e){return e instanceof Set}function ds(e){return e.copy_||e.base_}function Cx(e,t){if(Qc(e))return new Map(e);if(jm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cz(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[tn];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(a[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(Ac(e),a)}else{const a=Ac(e);if(a!==null&&r)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function Py(e,t=!1){return Nm(e)||Hl(e)||!ws(e)||(bm(e)>1&&Object.defineProperties(e,{set:Ad,add:Ad,clear:Ad,delete:Ad}),Object.freeze(e),t&&Object.values(e).forEach(r=>Py(r,!0))),e}function G6(){Mn(2)}var Ad={value:G6};function Nm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var H6={};function Cs(e){const t=H6[e];return t||Mn(0,e),t}var Ec;function dz(){return Ec}function Q6(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function HS(e,t){t&&(Cs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ax(e){Ex(e),e.drafts_.forEach(V6),e.drafts_=null}function Ex(e){e===Ec&&(Ec=e.parent_)}function QS(e){return Ec=Q6(Ec,e)}function V6(e){const t=e[tn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function VS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[tn].modified_&&(Ax(t),Mn(4)),ws(e)&&(e=xf(t,e),t.parent_||yf(t,e)),t.patches_&&Cs("Patches").generateReplacementPatches_(r[tn].base_,e,t.patches_,t.inversePatches_)):e=xf(t,r,[]),Ax(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==oz?e:void 0}function xf(e,t,r){if(Nm(t))return t;const a=e.immer_.shouldUseStrictIteration(),l=t[tn];if(!l)return gf(t,(o,u)=>YS(e,l,t,o,u,r),a),t;if(l.scope_!==e)return t;if(!l.modified_)return yf(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,d=!1;l.type_===3&&(u=new Set(o),o.clear(),d=!0),gf(u,(m,p)=>YS(e,l,o,m,p,r,d),a),yf(e,o,!1),r&&e.patches_&&Cs("Patches").generatePatches_(l,r,e.patches_,e.inversePatches_)}return l.copy_}function YS(e,t,r,a,l,o,u){if(l==null||typeof l!="object"&&!u)return;const d=Nm(l);if(!(d&&!u)){if(Hl(l)){const m=o&&t&&t.type_!==3&&!wx(t.assigned_,a)?o.concat(a):void 0,p=xf(e,l,m);if(uz(r,a,p),Hl(p))e.canAutoFreeze_=!1;else return}else u&&r.add(l);if(ws(l)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===l&&d)return;xf(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(Qc(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&yf(e,l)}}}function yf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Py(t,r)}function Y6(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:dz(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=Ty;r&&(l=[a],o=zc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,d}var Ty={get(e,t){if(t===tn)return e;const r=ds(e);if(!wx(r,t))return K6(e,r,t);const a=r[t];return e.finalized_||!ws(a)?a:a===Sg(e.base_,t)?(wg(e),e.copy_[t]=Ox(a,e)):a},has(e,t){return t in ds(e)},ownKeys(e){return Reflect.ownKeys(ds(e))},set(e,t,r){const a=fz(ds(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const l=Sg(ds(e),t),o=l?.[tn];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(F6(r,l)&&(r!==void 0||wx(e.base_,t)))return!0;wg(e),zx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Sg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,wg(e),zx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ds(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Mn(11)},getPrototypeOf(e){return Ac(e.base_)},setPrototypeOf(){Mn(12)}},zc={};gf(Ty,(e,t)=>{zc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zc.deleteProperty=function(e,t){return zc.set.call(this,e,t,void 0)};zc.set=function(e,t,r){return Ty.set.call(this,e[0],t,r,e[0])};function Sg(e,t){const r=e[tn];return(r?ds(r):e)[t]}function K6(e,t,r){const a=fz(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function fz(e,t){if(!(t in e))return;let r=Ac(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Ac(r)}}function zx(e){e.modified_||(e.modified_=!0,e.parent_&&zx(e.parent_))}function wg(e){e.copy_||(e.copy_=Cx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var X6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const u=this;return function(m=o,...p){return u.produce(m,h=>r.call(this,h,...p))}}typeof r!="function"&&Mn(6),a!==void 0&&typeof a!="function"&&Mn(7);let l;if(ws(t)){const o=QS(this),u=Ox(t,void 0);let d=!0;try{l=r(u),d=!1}finally{d?Ax(o):Ex(o)}return HS(o,a),VS(l,o)}else if(!t||typeof t!="object"){if(l=r(t),l===void 0&&(l=t),l===oz&&(l=void 0),this.autoFreeze_&&Py(l,!0),a){const o=[],u=[];Cs("Patches").generateReplacementPatches_(t,l,o,u),a(o,u)}return l}else Mn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...d)=>this.produceWithPatches(u,m=>t(m,...d));let a,l;return[this.produce(t,r,(u,d)=>{a=u,l=d}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ws(e)||Mn(8),Hl(e)&&(e=W6(e));const t=QS(this),r=Ox(e,void 0);return r[tn].isManual_=!0,Ex(t),r}finishDraft(e,t){const r=e&&e[tn];(!r||!r.isManual_)&&Mn(9);const{scope_:a}=r;return HS(a,t),VS(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const l=t[r];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}r>-1&&(t=t.slice(r+1));const a=Cs("Patches").applyPatches_;return Hl(e)?a(e,t):this.produce(e,l=>a(l,t))}};function Ox(e,t){const r=Qc(e)?Cs("MapSet").proxyMap_(e,t):jm(e)?Cs("MapSet").proxySet_(e,t):Y6(e,t);return(t?t.scope_:dz()).drafts_.push(r),r}function W6(e){return Hl(e)||Mn(10,e),mz(e)}function mz(e){if(!ws(e)||Nm(e))return e;const t=e[tn];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Cx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=Cx(e,!0);return gf(r,(l,o)=>{uz(r,l,mz(o))},a),t&&(t.finalized_=!1),r}var Z6=new X6;Z6.produce;var J6={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},pz=Fr({name:"legend",initialState:J6,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:St()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:a}=t.payload,l=Pn(e).payload.indexOf(r);l>-1&&(e.payload[l]=a)},prepare:St()},removeLegendPayload:{reducer(e,t){var r=Pn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:St()}}}),{setLegendSize:UW,setLegendSettings:FW,addLegendPayload:eL,replaceLegendPayload:tL,removeLegendPayload:rL}=pz.actions,nL=pz.reducer;function Dx(){return Dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Dx.apply(null,arguments)}function KS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KS(Object(r),!0).forEach(function(a){aL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function aL(e,t,r){return(t=iL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iL(e){var t=sL(e,"string");return typeof t=="symbol"?t:t+""}function sL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lL(e){return Array.isArray(e)&&na(e[0])&&na(e[1])?e.join(" ~ "):e}var Al={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},oL=e=>{var{separator:t=Al.separator,contentStyle:r,itemStyle:a,labelStyle:l=Al.labelStyle,payload:o,formatter:u,itemSorter:d,wrapperClassName:m,labelClassName:p,label:h,labelFormatter:v,accessibilityLayer:y=Al.accessibilityLayer}=e,x=()=>{if(o&&o.length){var O={padding:0,margin:0},M=(d?am(o,d):o).map((P,q)=>{if(P.type==="none")return null;var L=P.formatter||u||lL,{value:Y,name:W}=P,B=Y,Q=W;if(L){var k=L(Y,W,P,q,o);if(Array.isArray(k))[B,Q]=k;else if(k!=null)B=k;else return null}var T=ec(ec({},Al.itemStyle),{},{color:P.color||Al.itemStyle.color},a);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:T},na(Q)?b.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,na(Q)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},B),b.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:O},M)}return null},_=ec(ec({},Al.contentStyle),r),N=ec({margin:0},l),S=!At(h),C=S?h:"",z=mt("recharts-default-tooltip",m),w=mt("recharts-tooltip-label",p);S&&v&&o!==void 0&&o!==null&&(C=v(h,o));var E=y?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",Dx({className:z,style:_},E),b.createElement("p",{className:w,style:N},b.isValidElement(C)?C:"".concat(C)),x())},tc="recharts-tooltip-wrapper",cL={visibility:"hidden"};function uL(e){var{coordinate:t,translateX:r,translateY:a}=e;return mt(tc,{["".concat(tc,"-right")]:Se(r)&&t&&Se(t.x)&&r>=t.x,["".concat(tc,"-left")]:Se(r)&&t&&Se(t.x)&&r<t.x,["".concat(tc,"-bottom")]:Se(a)&&t&&Se(t.y)&&a>=t.y,["".concat(tc,"-top")]:Se(a)&&t&&Se(t.y)&&a<t.y})}function XS(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offset:l,position:o,reverseDirection:u,tooltipDimension:d,viewBox:m,viewBoxDimension:p}=e;if(o&&Se(o[a]))return o[a];var h=r[a]-d-(l>0?l:0),v=r[a]+l;if(t[a])return u[a]?h:v;var y=m[a];if(y==null)return 0;if(u[a]){var x=h,_=y;return x<_?Math.max(v,y):Math.max(h,y)}if(p==null)return 0;var N=v+d,S=y+p;return N>S?Math.max(h,y):Math.max(v,y)}function dL(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function fL(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:a,offsetLeft:l,position:o,reverseDirection:u,tooltipBox:d,useTranslate3d:m,viewBox:p}=e,h,v,y;return d.height>0&&d.width>0&&r?(v=XS({allowEscapeViewBox:t,coordinate:r,key:"x",offset:l,position:o,reverseDirection:u,tooltipDimension:d.width,viewBox:p,viewBoxDimension:p.width}),y=XS({allowEscapeViewBox:t,coordinate:r,key:"y",offset:a,position:o,reverseDirection:u,tooltipDimension:d.height,viewBox:p,viewBoxDimension:p.height}),h=dL({translateX:v,translateY:y,useTranslate3d:m})):h=cL,{cssProperties:h,cssClasses:uL({translateX:v,translateY:y,coordinate:r})}}function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ed(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(r),!0).forEach(function(a){Mx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Mx(e,t,r){return(t=mL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mL(e){var t=pL(e,"string");return typeof t=="symbol"?t:t+""}function pL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class hL extends b.PureComponent{constructor(){super(...arguments),Mx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Mx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:l,children:o,coordinate:u,hasPayload:d,isAnimationActive:m,offset:p,position:h,reverseDirection:v,useTranslate3d:y,viewBox:x,wrapperStyle:_,lastBoundingBox:N,innerRef:S,hasPortalFromProps:C}=this.props,z=typeof p=="number"?p:p.x,w=typeof p=="number"?p:p.y,{cssClasses:E,cssProperties:O}=fL({allowEscapeViewBox:r,coordinate:u,offsetLeft:z,offsetTop:w,position:h,reverseDirection:v,tooltipBox:{height:N.height,width:N.width},useTranslate3d:y,viewBox:x}),M=C?{}:Ed(Ed({transition:m&&t?"transform ".concat(a,"ms ").concat(l):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),P=Ed(Ed({},M),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},_);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:P,ref:S},o)}}var hz=()=>{var e;return(e=ze(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kx.apply(null,arguments)}function ZS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function JS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(r),!0).forEach(function(a){vL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vL(e,t,r){return(t=gL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gL(e){var t=xL(e,"string");return typeof t=="symbol"?t:t+""}function xL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ew={curveBasisClosed:g3,curveBasisOpen:x3,curveBasis:v3,curveBumpX:r3,curveBumpY:n3,curveLinearClosed:y3,curveLinear:rm,curveMonotoneX:b3,curveMonotoneY:j3,curveNatural:N3,curveStep:_3,curveStepAfter:w3,curveStepBefore:S3},bf=e=>Xe(e.x)&&Xe(e.y),tw=e=>e.base!=null&&bf(e.base)&&bf(e),rc=e=>e.x,nc=e=>e.y,yL=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Bc(e));if((r==="curveMonotone"||r==="curveBump")&&t){var a=ew["".concat(r).concat(t==="vertical"?"Y":"X")];if(a)return a}return ew[r]||rm},rw={connectNulls:!1,type:"linear"},bL=e=>{var{type:t=rw.type,points:r=[],baseLine:a,layout:l,connectNulls:o=rw.connectNulls}=e,u=yL(t,l),d=o?r.filter(bf):r;if(Array.isArray(a)){var m,p=r.map((_,N)=>JS(JS({},_),{},{base:a[N]}));l==="vertical"?m=bd().y(nc).x1(rc).x0(_=>_.base.x):m=bd().x(rc).y1(nc).y0(_=>_.base.y);var h=m.defined(tw).curve(u),v=o?p.filter(tw):p;return h(v)}var y;l==="vertical"&&Se(a)?y=bd().y(nc).x1(rc).x0(a):Se(a)?y=bd().x(rc).y1(nc).y0(a):y=QA().x(rc).y(nc);var x=y.defined(bf).curve(u);return x(d)},vz=e=>{var{className:t,points:r,path:a,pathRef:l}=e,o=ks();if((!r||!r.length)&&!a)return null;var u={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},d=r&&r.length?bL(u):a;return b.createElement("path",kx({},Tn(e),by(e),{className:mt("recharts-curve",t),d:d===null?void 0:d,ref:l}))},jL=["x","y","top","left","width","height","className"];function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Px.apply(null,arguments)}function nw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function NL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(r),!0).forEach(function(a){_L(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _L(e,t,r){return(t=SL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SL(e){var t=wL(e,"string");return typeof t=="symbol"?t:t+""}function wL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CL(e,t){if(e==null)return{};var r,a,l=AL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function AL(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var EL=(e,t,r,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(r),zL=e=>{var{x:t=0,y:r=0,top:a=0,left:l=0,width:o=0,height:u=0,className:d}=e,m=CL(e,jL),p=NL({x:t,y:r,top:a,left:l,width:o,height:u},m);return!Se(t)||!Se(r)||!Se(o)||!Se(u)||!Se(a)||!Se(l)?null:b.createElement("path",Px({},Ar(p),{className:mt("recharts-cross",d),d:EL(t,r,o,u,a,l)}))};function OL(e,t,r,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-l,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(r),!0).forEach(function(a){DL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function DL(e,t,r){return(t=ML(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ML(e){var t=kL(e,"string");return typeof t=="symbol"?t:t+""}function kL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PL=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gz=(e,t,r)=>e.map(a=>"".concat(PL(a)," ").concat(t,"ms ").concat(r)).join(","),TL=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(l=>a.includes(l))),Oc=(e,t)=>Object.keys(t).reduce((r,a)=>iw(iw({},r),{},{[a]:e(a,t[a])}),{});function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(a){qL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qL(e,t,r){return(t=RL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RL(e){var t=LL(e,"string");return typeof t=="symbol"?t:t+""}function LL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jf=(e,t,r)=>e+(t-e)*r,Tx=e=>{var{from:t,to:r}=e;return t!==r},xz=(e,t,r)=>{var a=Oc((l,o)=>{if(Tx(o)){var[u,d]=e(o.from,o.to,o.velocity);return Yt(Yt({},o),{},{from:u,velocity:d})}return o},t);return r<1?Oc((l,o)=>Tx(o)&&a[l]!=null?Yt(Yt({},o),{},{velocity:jf(o.velocity,a[l].velocity,r),from:jf(o.from,a[l].from,r)}):o,t):xz(e,a,r-1)};function IL(e,t,r,a,l,o){var u,d=a.reduce((y,x)=>Yt(Yt({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>Oc((y,x)=>x.from,d),p=()=>!Object.values(d).filter(Tx).length,h=null,v=y=>{u||(u=y);var x=y-u,_=x/r.dt;d=xz(r,d,_),l(Yt(Yt(Yt({},e),t),m())),u=y,p()||(h=o.setTimeout(v))};return()=>(h=o.setTimeout(v),()=>{var y;(y=h)===null||y===void 0||y()})}function $L(e,t,r,a,l,o,u){var d=null,m=l.reduce((v,y)=>{var x=e[y],_=t[y];return x==null||_==null?v:Yt(Yt({},v),{},{[y]:[x,_]})},{}),p,h=v=>{p||(p=v);var y=(v-p)/a,x=Oc((N,S)=>jf(...S,r(y)),m);if(o(Yt(Yt(Yt({},e),t),x)),y<1)d=u.setTimeout(h);else{var _=Oc((N,S)=>jf(...S,r(1)),m);o(Yt(Yt(Yt({},e),t),_))}};return()=>(d=u.setTimeout(h),()=>{var v;(v=d)===null||v===void 0||v()})}const BL=(e,t,r,a,l,o)=>{var u=TL(e,t);return r==null?()=>(l(Yt(Yt({},e),t)),()=>{}):r.isStepper===!0?IL(e,t,r,u,l,o):$L(e,t,r,a,u,l,o)};var Nf=1e-4,yz=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bz=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),lw=(e,t)=>r=>{var a=yz(e,t);return bz(a,r)},UL=(e,t)=>r=>{var a=yz(e,t),l=[...a.map((o,u)=>o*u).slice(1),0];return bz(l,r)},FL=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var a=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var l=a.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},GL=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=FL(r[0]);if(l)return l}}return r.length===4?r:[0,0,1,1]},HL=(e,t,r,a)=>{var l=lw(e,r),o=lw(t,a),u=UL(e,r),d=p=>p>1?1:p<0?0:p,m=p=>{for(var h=p>1?1:p,v=h,y=0;y<8;++y){var x=l(v)-h,_=u(v);if(Math.abs(x-h)<Nf||_<Nf)return o(v);v=d(v-x/_)}return o(v)};return m.isStepper=!1,m},ow=function(){return HL(...GL(...arguments))},QL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:l=17}=t,o=(u,d,m)=>{var p=-(u-d)*r,h=m*a,v=m+(p-h)*l/1e3,y=m*l/1e3+u;return Math.abs(y-d)<Nf&&Math.abs(v)<Nf?[d,0]:[y,v]};return o.isStepper=!0,o.dt=l,o},VL=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ow(e);case"spring":return QL();default:if(e.split("(")[0]==="cubic-bezier")return ow(e)}return typeof e=="function"?e:null};function YL(e){var t,r=()=>null,a=!1,l=null,o=u=>{if(!a){if(Array.isArray(u)){if(!u.length)return;var d=u,[m,...p]=d;if(typeof m=="number"){l=e.setTimeout(o.bind(null,p),m);return}o(m),l=e.setTimeout(o.bind(null,p));return}typeof u=="string"&&(t=u,r(t)),typeof u=="object"&&(t=u,r(t)),typeof u=="function"&&u()}};return{stop:()=>{a=!0},start:u=>{a=!1,l&&(l(),l=null),o(u)},subscribe:u=>(r=u,()=>{r=()=>null}),getTimeoutController:()=>e}}class KL{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=u=>{u-a>=r?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function XL(){return YL(new KL)}var WL=b.createContext(XL);function ZL(e,t){var r=b.useContext(WL);return b.useMemo(()=>t??r(e),[e,t,r])}var JL=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_m={isSsr:JL()},eI={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},cw={t:0},Cg={t:1};function Sm(e){var t=zr(e,eI),{isActive:r,canBegin:a,duration:l,easing:o,begin:u,onAnimationEnd:d,onAnimationStart:m,children:p}=t,h=r==="auto"?!_m.isSsr:r,v=ZL(t.animationId,t.animationManager),[y,x]=b.useState(h?cw:Cg),_=b.useRef(null);return b.useEffect(()=>{h||x(Cg)},[h]),b.useEffect(()=>{if(!h||!a)return Ms;var N=BL(cw,Cg,VL(o),l,x,v.getTimeoutController()),S=()=>{_.current=N()};return v.start([m,u,S,l,d]),()=>{v.stop(),_.current&&_.current(),d()}},[h,a,l,o,u,m,d,v]),p(y.t)}function wm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(_c(t)),a=b.useRef(e);return a.current!==e&&(r.current=_c(t),a.current=e),r.current}var tI=["radius"],rI=["radius"],uw,dw,fw,mw,pw,hw,vw,gw,xw,yw;function bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function jw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(r),!0).forEach(function(a){nI(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nI(e,t,r){return(t=aI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aI(e){var t=iI(e,"string");return typeof t=="symbol"?t:t+""}function iI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_f.apply(null,arguments)}function Nw(e,t){if(e==null)return{};var r,a,l=sI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function sI(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Yn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _w=(e,t,r,a,l)=>{var o=zi(r),u=zi(a),d=Math.min(Math.abs(o)/2,Math.abs(u)/2),m=u>=0?1:-1,p=o>=0?1:-1,h=u>=0&&o>=0||u<0&&o<0?1:0,v;if(d>0&&Array.isArray(l)){for(var y=[0,0,0,0],x=0,_=4;x<_;x++){var N,S=(N=l[x])!==null&&N!==void 0?N:0;y[x]=S>d?d:S}v=Mt(uw||(uw=Yn(["M",",",""])),e,t+m*y[0]),y[0]>0&&(v+=Mt(dw||(dw=Yn(["A ",",",",0,0,",",",",",""])),y[0],y[0],h,e+p*y[0],t)),v+=Mt(fw||(fw=Yn(["L ",",",""])),e+r-p*y[1],t),y[1]>0&&(v+=Mt(mw||(mw=Yn(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],h,e+r,t+m*y[1])),v+=Mt(pw||(pw=Yn(["L ",",",""])),e+r,t+a-m*y[2]),y[2]>0&&(v+=Mt(hw||(hw=Yn(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],h,e+r-p*y[2],t+a)),v+=Mt(vw||(vw=Yn(["L ",",",""])),e+p*y[3],t+a),y[3]>0&&(v+=Mt(gw||(gw=Yn(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],h,e,t+a-m*y[3])),v+="Z"}else if(d>0&&l===+l&&l>0){var C=Math.min(d,l);v=Mt(xw||(xw=Yn(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*C,C,C,h,e+p*C,t,e+r-p*C,t,C,C,h,e+r,t+m*C,e+r,t+a-m*C,C,C,h,e+r-p*C,t+a,e+p*C,t+a,C,C,h,e,t+a-m*C)}else v=Mt(yw||(yw=Yn(["M ",","," h "," v "," h "," Z"])),e,t,r,a,-r);return v},Sw={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jz=e=>{var t=zr(e,Sw),r=b.useRef(null),[a,l]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var J=r.current.getTotalLength();J&&l(J)}catch{}},[]);var{x:o,y:u,width:d,height:m,radius:p,className:h}=t,{animationEasing:v,animationDuration:y,animationBegin:x,isAnimationActive:_,isUpdateAnimationActive:N}=t,S=b.useRef(d),C=b.useRef(m),z=b.useRef(o),w=b.useRef(u),E=b.useMemo(()=>({x:o,y:u,width:d,height:m,radius:p}),[o,u,d,m,p]),O=wm(E,"rectangle-");if(o!==+o||u!==+u||d!==+d||m!==+m||d===0||m===0)return null;var M=mt("recharts-rectangle",h);if(!N){var P=Ar(t),{radius:q}=P,L=Nw(P,tI);return b.createElement("path",_f({},L,{x:zi(o),y:zi(u),width:zi(d),height:zi(m),radius:typeof p=="number"?p:void 0,className:M,d:_w(o,u,d,m,p)}))}var Y=S.current,W=C.current,B=z.current,Q=w.current,k="0px ".concat(a===-1?1:a,"px"),T="".concat(a,"px 0px"),R=gz(["strokeDasharray"],y,typeof v=="string"?v:Sw.animationEasing);return b.createElement(Sm,{animationId:O,key:O,canBegin:a>0,duration:y,easing:v,isActive:N,begin:x},J=>{var H=kt(Y,d,J),ve=kt(W,m,J),U=kt(B,o,J),ge=kt(Q,u,J);r.current&&(S.current=H,C.current=ve,z.current=U,w.current=ge);var re;_?J>0?re={transition:R,strokeDasharray:T}:re={strokeDasharray:k}:re={strokeDasharray:T};var me=Ar(t),{radius:xe}=me,he=Nw(me,rI);return b.createElement("path",_f({},he,{radius:typeof p=="number"?p:void 0,className:M,d:_w(U,ge,H,ve,p),ref:r,style:jw(jw({},re),t.style)}))})};function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Cw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(a){lI(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lI(e,t,r){return(t=oI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oI(e){var t=cI(e,"string");return typeof t=="symbol"?t:t+""}function cI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sf=Math.PI/180,uI=e=>e*180/Math.PI,vr=(e,t,r,a)=>({x:e+Math.cos(-Sf*a)*r,y:t+Math.sin(-Sf*a)*r}),dI=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},fI=(e,t)=>{var{x:r,y:a}=e,{x:l,y:o}=t;return Math.sqrt((r-l)**2+(a-o)**2)},mI=(e,t)=>{var{x:r,y:a}=e,{cx:l,cy:o}=t,u=fI({x:r,y:a},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var d=(r-l)/u,m=Math.acos(d);return a>o&&(m=2*Math.PI-m),{radius:u,angle:uI(m),angleInRadian:m}},pI=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),l=Math.floor(r/360),o=Math.min(a,l);return{startAngle:t-o*360,endAngle:r-o*360}},hI=(e,t)=>{var{startAngle:r,endAngle:a}=t,l=Math.floor(r/360),o=Math.floor(a/360),u=Math.min(l,o);return e+u*360},vI=(e,t)=>{var{chartX:r,chartY:a}=e,{radius:l,angle:o}=mI({x:r,y:a},t),{innerRadius:u,outerRadius:d}=t;if(l<u||l>d||l===0)return null;var{startAngle:m,endAngle:p}=pI(t),h=o,v;if(m<=p){for(;h>p;)h-=360;for(;h<m;)h+=360;v=h>=m&&h<=p}else{for(;h>m;)h-=360;for(;h<p;)h+=360;v=h>=p&&h<=m}return v?Cw(Cw({},t),{},{radius:l,angle:hI(h,t)}):null};function Nz(e){var{cx:t,cy:r,radius:a,startAngle:l,endAngle:o}=e,u=vr(t,r,a,l),d=vr(t,r,a,o);return{points:[u,d],cx:t,cy:r,radius:a,startAngle:l,endAngle:o}}var Aw,Ew,zw,Ow,Dw,Mw,kw;function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qx.apply(null,arguments)}function ms(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gI=(e,t)=>{var r=Lr(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},zd=e=>{var{cx:t,cy:r,radius:a,angle:l,sign:o,isExternal:u,cornerRadius:d,cornerIsExternal:m}=e,p=d*(u?1:-1)+a,h=Math.asin(d/p)/Sf,v=m?l:l+o*h,y=vr(t,r,p,v),x=vr(t,r,a,v),_=m?l-o*h:l,N=vr(t,r,p*Math.cos(h*Sf),_);return{center:y,circleTangency:x,lineTangency:N,theta:h}},_z=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:l,startAngle:o,endAngle:u}=e,d=gI(o,u),m=o+d,p=vr(t,r,l,o),h=vr(t,r,l,m),v=Mt(Aw||(Aw=ms(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,l,l,+(Math.abs(d)>180),+(o>m),h.x,h.y);if(a>0){var y=vr(t,r,a,o),x=vr(t,r,a,m);v+=Mt(Ew||(Ew=ms(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,a,a,+(Math.abs(d)>180),+(o<=m),y.x,y.y)}else v+=Mt(zw||(zw=ms(["L ",","," Z"])),t,r);return v},xI=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:p}=e,h=Lr(p-m),{circleTangency:v,lineTangency:y,theta:x}=zd({cx:t,cy:r,radius:l,angle:m,sign:h,cornerRadius:o,cornerIsExternal:d}),{circleTangency:_,lineTangency:N,theta:S}=zd({cx:t,cy:r,radius:l,angle:p,sign:-h,cornerRadius:o,cornerIsExternal:d}),C=d?Math.abs(m-p):Math.abs(m-p)-x-S;if(C<0)return u?Mt(Ow||(Ow=ms(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,o,o,o*2,o,o,-o*2):_z({cx:t,cy:r,innerRadius:a,outerRadius:l,startAngle:m,endAngle:p});var z=Mt(Dw||(Dw=ms(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,o,o,+(h<0),v.x,v.y,l,l,+(C>180),+(h<0),_.x,_.y,o,o,+(h<0),N.x,N.y);if(a>0){var{circleTangency:w,lineTangency:E,theta:O}=zd({cx:t,cy:r,radius:a,angle:m,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:M,lineTangency:P,theta:q}=zd({cx:t,cy:r,radius:a,angle:p,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),L=d?Math.abs(m-p):Math.abs(m-p)-O-q;if(L<0&&o===0)return"".concat(z,"L").concat(t,",").concat(r,"Z");z+=Mt(Mw||(Mw=ms(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),P.x,P.y,o,o,+(h<0),M.x,M.y,a,a,+(L>180),+(h>0),w.x,w.y,o,o,+(h<0),E.x,E.y)}else z+=Mt(kw||(kw=ms(["L",",","Z"])),t,r);return z},yI={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sz=e=>{var t=zr(e,yI),{cx:r,cy:a,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h,className:v}=t;if(o<l||p===h)return null;var y=mt("recharts-sector",v),x=o-l,_=qn(u,x,0,!0),N;return _>0&&Math.abs(p-h)<360?N=xI({cx:r,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(_,x/2),forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h}):N=_z({cx:r,cy:a,innerRadius:l,outerRadius:o,startAngle:p,endAngle:h}),b.createElement("path",qx({},Ar(t),{className:y,d:N}))};function bI(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(oE(t)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:u,angle:d}=t,m=vr(a,l,o,d),p=vr(a,l,u,d);return[{x:m.x,y:m.y},{x:p.x,y:p.y}]}return Nz(t)}}var Ag={},Eg={},zg={},Pw;function jI(){return Pw||(Pw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xE();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r})(zg)),zg}var Tw;function NI(){return Tw||(Tw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jI();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r})(Eg)),Eg}var qw;function _I(){return qw||(qw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yE(),r=NI();function a(l,o,u){u&&typeof u!="number"&&t.isIterateeCall(l,o,u)&&(o=u=void 0),l=r.toFinite(l),o===void 0?(o=l,l=0):o=r.toFinite(o),u=u===void 0?l<o?1:-1:r.toFinite(u);const d=Math.max(Math.ceil((o-l)/(u||1)),0),m=new Array(d);for(let p=0;p<d;p++)m[p]=l,l+=u;return m}e.range=a})(Ag)),Ag}var Og,Rw;function SI(){return Rw||(Rw=1,Og=_I().range),Og}var wI=SI();const wz=Fa(wI);function Di(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function CI(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qy(e){let t,r,a;e.length!==2?(t=Di,r=(d,m)=>Di(e(d),m),a=(d,m)=>e(d)-m):(t=e===Di||e===CI?e:AI,r=e,a=e);function l(d,m,p=0,h=d.length){if(p<h){if(t(m,m)!==0)return h;do{const v=p+h>>>1;r(d[v],m)<0?p=v+1:h=v}while(p<h)}return p}function o(d,m,p=0,h=d.length){if(p<h){if(t(m,m)!==0)return h;do{const v=p+h>>>1;r(d[v],m)<=0?p=v+1:h=v}while(p<h)}return p}function u(d,m,p=0,h=d.length){const v=l(d,m,p,h-1);return v>p&&a(d[v-1],m)>-a(d[v],m)?v-1:v}return{left:l,center:u,right:o}}function AI(){return 0}function Cz(e){return e===null?NaN:+e}function*EI(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const zI=qy(Di),Vc=zI.right;qy(Cz).center;class Lw extends Map{constructor(t,r=MI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,l]of t)this.set(a,l)}get(t){return super.get(Iw(this,t))}has(t){return super.has(Iw(this,t))}set(t,r){return super.set(OI(this,t),r)}delete(t){return super.delete(DI(this,t))}}function Iw({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function OI({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function DI({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function MI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kI(e=Di){if(e===Di)return Az;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function Az(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const PI=Math.sqrt(50),TI=Math.sqrt(10),qI=Math.sqrt(2);function wf(e,t,r){const a=(t-e)/Math.max(0,r),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),u=o>=PI?10:o>=TI?5:o>=qI?2:1;let d,m,p;return l<0?(p=Math.pow(10,-l)/u,d=Math.round(e*p),m=Math.round(t*p),d/p<e&&++d,m/p>t&&--m,p=-p):(p=Math.pow(10,l)*u,d=Math.round(e/p),m=Math.round(t/p),d*p<e&&++d,m*p>t&&--m),m<d&&.5<=r&&r<2?wf(e,t,r*2):[d,m,p]}function Rx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[l,o,u]=a?wf(t,e,r):wf(e,t,r);if(!(o>=l))return[];const d=o-l+1,m=new Array(d);if(a)if(u<0)for(let p=0;p<d;++p)m[p]=(o-p)/-u;else for(let p=0;p<d;++p)m[p]=(o-p)*u;else if(u<0)for(let p=0;p<d;++p)m[p]=(l+p)/-u;else for(let p=0;p<d;++p)m[p]=(l+p)*u;return m}function Lx(e,t,r){return t=+t,e=+e,r=+r,wf(e,t,r)[2]}function Ix(e,t,r){t=+t,e=+e,r=+r;const a=t<e,l=a?Lx(t,e,r):Lx(e,t,r);return(a?-1:1)*(l<0?1/-l:l)}function $w(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function Bw(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function Ez(e,t,r=0,a=1/0,l){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(l=l===void 0?Az:kI(l);a>r;){if(a-r>600){const m=a-r+1,p=t-r+1,h=Math.log(m),v=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*v*(m-v)/m)*(p-m/2<0?-1:1),x=Math.max(r,Math.floor(t-p*v/m+y)),_=Math.min(a,Math.floor(t+(m-p)*v/m+y));Ez(e,t,x,_,l)}const o=e[t];let u=r,d=a;for(ac(e,r,t),l(e[a],o)>0&&ac(e,r,a);u<d;){for(ac(e,u,d),++u,--d;l(e[u],o)<0;)++u;for(;l(e[d],o)>0;)--d}l(e[r],o)===0?ac(e,r,d):(++d,ac(e,d,a)),d<=t&&(r=d+1),t<=d&&(a=d-1)}return e}function ac(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function RI(e,t,r){if(e=Float64Array.from(EI(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return Bw(e);if(t>=1)return $w(e);var a,l=(a-1)*t,o=Math.floor(l),u=$w(Ez(e,o).subarray(0,o+1)),d=Bw(e.subarray(o+1));return u+(d-u)*(l-o)}}function LI(e,t,r=Cz){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,l=(a-1)*t,o=Math.floor(l),u=+r(e[o],o,e),d=+r(e[o+1],o+1,e);return u+(d-u)*(l-o)}}function II(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(l);++a<l;)o[a]=e+a*r;return o}function wn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Va(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $x=Symbol("implicit");function Ry(){var e=new Lw,t=[],r=[],a=$x;function l(o){let u=e.get(o);if(u===void 0){if(a!==$x)return a;e.set(o,u=t.push(o)-1)}return r[u%r.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Lw;for(const u of o)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(o){return arguments.length?(r=Array.from(o),l):r.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return Ry(t,r).unknown(a)},wn.apply(l,arguments),l}function Ly(){var e=Ry().unknown(void 0),t=e.domain,r=e.range,a=0,l=1,o,u,d=!1,m=0,p=0,h=.5;delete e.unknown;function v(){var y=t().length,x=l<a,_=x?l:a,N=x?a:l;o=(N-_)/Math.max(1,y-m+p*2),d&&(o=Math.floor(o)),_+=(N-_-o*(y-m))*h,u=o*(1-m),d&&(_=Math.round(_),u=Math.round(u));var S=II(y).map(function(C){return _+o*C});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),v()):t()},e.range=function(y){return arguments.length?([a,l]=y,a=+a,l=+l,v()):[a,l]},e.rangeRound=function(y){return[a,l]=y,a=+a,l=+l,d=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(y){return arguments.length?(d=!!y,v()):d},e.padding=function(y){return arguments.length?(m=Math.min(1,p=+y),v()):m},e.paddingInner=function(y){return arguments.length?(m=Math.min(1,y),v()):m},e.paddingOuter=function(y){return arguments.length?(p=+y,v()):p},e.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),v()):h},e.copy=function(){return Ly(t(),[a,l]).round(d).paddingInner(m).paddingOuter(p).align(h)},wn.apply(v(),arguments)}function zz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zz(t())},e}function $I(){return zz(Ly.apply(null,arguments).paddingInner(1))}function Iy(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Oz(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Yc(){}var Dc=.7,Cf=1/Dc,Ll="\\s*([+-]?\\d+)\\s*",Mc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BI=/^#([0-9a-f]{3,8})$/,UI=new RegExp(`^rgb\\(${Ll},${Ll},${Ll}\\)$`),FI=new RegExp(`^rgb\\(${ea},${ea},${ea}\\)$`),GI=new RegExp(`^rgba\\(${Ll},${Ll},${Ll},${Mc}\\)$`),HI=new RegExp(`^rgba\\(${ea},${ea},${ea},${Mc}\\)$`),QI=new RegExp(`^hsl\\(${Mc},${ea},${ea}\\)$`),VI=new RegExp(`^hsla\\(${Mc},${ea},${ea},${Mc}\\)$`),Uw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Iy(Yc,kc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fw,formatHex:Fw,formatHex8:YI,formatHsl:KI,formatRgb:Gw,toString:Gw});function Fw(){return this.rgb().formatHex()}function YI(){return this.rgb().formatHex8()}function KI(){return Dz(this).formatHsl()}function Gw(){return this.rgb().formatRgb()}function kc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=BI.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Hw(t):r===3?new $r(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Od(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Od(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=UI.exec(e))?new $r(t[1],t[2],t[3],1):(t=FI.exec(e))?new $r(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=GI.exec(e))?Od(t[1],t[2],t[3],t[4]):(t=HI.exec(e))?Od(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=QI.exec(e))?Yw(t[1],t[2]/100,t[3]/100,1):(t=VI.exec(e))?Yw(t[1],t[2]/100,t[3]/100,t[4]):Uw.hasOwnProperty(e)?Hw(Uw[e]):e==="transparent"?new $r(NaN,NaN,NaN,0):null}function Hw(e){return new $r(e>>16&255,e>>8&255,e&255,1)}function Od(e,t,r,a){return a<=0&&(e=t=r=NaN),new $r(e,t,r,a)}function XI(e){return e instanceof Yc||(e=kc(e)),e?(e=e.rgb(),new $r(e.r,e.g,e.b,e.opacity)):new $r}function Bx(e,t,r,a){return arguments.length===1?XI(e):new $r(e,t,r,a??1)}function $r(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}Iy($r,Bx,Oz(Yc,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $r(bs(this.r),bs(this.g),bs(this.b),Af(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qw,formatHex:Qw,formatHex8:WI,formatRgb:Vw,toString:Vw}));function Qw(){return`#${ps(this.r)}${ps(this.g)}${ps(this.b)}`}function WI(){return`#${ps(this.r)}${ps(this.g)}${ps(this.b)}${ps((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vw(){const e=Af(this.opacity);return`${e===1?"rgb(":"rgba("}${bs(this.r)}, ${bs(this.g)}, ${bs(this.b)}${e===1?")":`, ${e})`}`}function Af(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ps(e){return e=bs(e),(e<16?"0":"")+e.toString(16)}function Yw(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new kn(e,t,r,a)}function Dz(e){if(e instanceof kn)return new kn(e.h,e.s,e.l,e.opacity);if(e instanceof Yc||(e=kc(e)),!e)return new kn;if(e instanceof kn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,l=Math.min(t,r,a),o=Math.max(t,r,a),u=NaN,d=o-l,m=(o+l)/2;return d?(t===o?u=(r-a)/d+(r<a)*6:r===o?u=(a-t)/d+2:u=(t-r)/d+4,d/=m<.5?o+l:2-o-l,u*=60):d=m>0&&m<1?0:u,new kn(u,d,m,e.opacity)}function ZI(e,t,r,a){return arguments.length===1?Dz(e):new kn(e,t,r,a??1)}function kn(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}Iy(kn,ZI,Oz(Yc,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new kn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new kn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,l=2*r-a;return new $r(Dg(e>=240?e-240:e+120,l,a),Dg(e,l,a),Dg(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new kn(Kw(this.h),Dd(this.s),Dd(this.l),Af(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Af(this.opacity);return`${e===1?"hsl(":"hsla("}${Kw(this.h)}, ${Dd(this.s)*100}%, ${Dd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kw(e){return e=(e||0)%360,e<0?e+360:e}function Dd(e){return Math.max(0,Math.min(1,e||0))}function Dg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const $y=e=>()=>e;function JI(e,t){return function(r){return e+r*t}}function e8(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function t8(e){return(e=+e)==1?Mz:function(t,r){return r-t?e8(t,r,e):$y(isNaN(t)?r:t)}}function Mz(e,t){var r=t-e;return r?JI(e,r):$y(isNaN(e)?t:e)}const Xw=(function e(t){var r=t8(t);function a(l,o){var u=r((l=Bx(l)).r,(o=Bx(o)).r),d=r(l.g,o.g),m=r(l.b,o.b),p=Mz(l.opacity,o.opacity);return function(h){return l.r=u(h),l.g=d(h),l.b=m(h),l.opacity=p(h),l+""}}return a.gamma=e,a})(1);function r8(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),l;return function(o){for(l=0;l<r;++l)a[l]=e[l]*(1-o)+t[l]*o;return a}}function n8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function a8(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,l=new Array(a),o=new Array(r),u;for(u=0;u<a;++u)l[u]=Kl(e[u],t[u]);for(;u<r;++u)o[u]=t[u];return function(d){for(u=0;u<a;++u)o[u]=l[u](d);return o}}function i8(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Ef(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function s8(e,t){var r={},a={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=Kl(e[l],t[l]):a[l]=t[l];return function(o){for(l in r)a[l]=r[l](o);return a}}var Ux=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mg=new RegExp(Ux.source,"g");function l8(e){return function(){return e}}function o8(e){return function(t){return e(t)+""}}function c8(e,t){var r=Ux.lastIndex=Mg.lastIndex=0,a,l,o,u=-1,d=[],m=[];for(e=e+"",t=t+"";(a=Ux.exec(e))&&(l=Mg.exec(t));)(o=l.index)>r&&(o=t.slice(r,o),d[u]?d[u]+=o:d[++u]=o),(a=a[0])===(l=l[0])?d[u]?d[u]+=l:d[++u]=l:(d[++u]=null,m.push({i:u,x:Ef(a,l)})),r=Mg.lastIndex;return r<t.length&&(o=t.slice(r),d[u]?d[u]+=o:d[++u]=o),d.length<2?m[0]?o8(m[0].x):l8(t):(t=m.length,function(p){for(var h=0,v;h<t;++h)d[(v=m[h]).i]=v.x(p);return d.join("")})}function Kl(e,t){var r=typeof t,a;return t==null||r==="boolean"?$y(t):(r==="number"?Ef:r==="string"?(a=kc(t))?(t=a,Xw):c8:t instanceof kc?Xw:t instanceof Date?i8:n8(t)?r8:Array.isArray(t)?a8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?s8:Ef)(e,t)}function By(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function u8(e,t){t===void 0&&(t=e,e=Kl);for(var r=0,a=t.length-1,l=t[0],o=new Array(a<0?0:a);r<a;)o[r]=e(l,l=t[++r]);return function(u){var d=Math.max(0,Math.min(a-1,Math.floor(u*=a)));return o[d](u-d)}}function d8(e){return function(){return e}}function zf(e){return+e}var Ww=[0,1];function Cr(e){return e}function Fx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:d8(isNaN(t)?NaN:.5)}function f8(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function m8(e,t,r){var a=e[0],l=e[1],o=t[0],u=t[1];return l<a?(a=Fx(l,a),o=r(u,o)):(a=Fx(a,l),o=r(o,u)),function(d){return o(a(d))}}function p8(e,t,r){var a=Math.min(e.length,t.length)-1,l=new Array(a),o=new Array(a),u=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<a;)l[u]=Fx(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(d){var m=Vc(e,d,1,a)-1;return o[m](l[m](d))}}function Kc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Cm(){var e=Ww,t=Ww,r=Kl,a,l,o,u=Cr,d,m,p;function h(){var y=Math.min(e.length,t.length);return u!==Cr&&(u=f8(e[0],e[y-1])),d=y>2?p8:m8,m=p=null,v}function v(y){return y==null||isNaN(y=+y)?o:(m||(m=d(e.map(a),t,r)))(a(u(y)))}return v.invert=function(y){return u(l((p||(p=d(t,e.map(a),Ef)))(y)))},v.domain=function(y){return arguments.length?(e=Array.from(y,zf),h()):e.slice()},v.range=function(y){return arguments.length?(t=Array.from(y),h()):t.slice()},v.rangeRound=function(y){return t=Array.from(y),r=By,h()},v.clamp=function(y){return arguments.length?(u=y?!0:Cr,h()):u!==Cr},v.interpolate=function(y){return arguments.length?(r=y,h()):r},v.unknown=function(y){return arguments.length?(o=y,v):o},function(y,x){return a=y,l=x,h()}}function Uy(){return Cm()(Cr,Cr)}function h8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Of(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Ql(e){return e=Of(Math.abs(e)),e?e[1]:NaN}function v8(e,t){return function(r,a){for(var l=r.length,o=[],u=0,d=e[0],m=0;l>0&&d>0&&(m+d+1>a&&(d=Math.max(1,a-m)),o.push(r.substring(l-=d,l+d)),!((m+=d+1)>a));)d=e[u=(u+1)%e.length];return o.reverse().join(t)}}function g8(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var x8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pc(e){if(!(t=x8.exec(e)))throw new Error("invalid format: "+e);var t;return new Fy({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Pc.prototype=Fy.prototype;function Fy(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Fy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y8(e){e:for(var t=e.length,r=1,a=-1,l;r<t;++r)switch(e[r]){case".":a=l=r;break;case"0":a===0&&(a=r),l=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var Df;function b8(e,t){var r=Of(e,t);if(!r)return Df=void 0,e.toPrecision(t);var a=r[0],l=r[1],o=l-(Df=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+Of(e,Math.max(0,t+o-1))[0]}function Zw(e,t){var r=Of(e,t);if(!r)return e+"";var a=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const Jw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:h8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Zw(e*100,t),r:Zw,s:b8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function eC(e){return e}var tC=Array.prototype.map,rC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function j8(e){var t=e.grouping===void 0||e.thousands===void 0?eC:v8(tC.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?eC:g8(tC.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function p(v,y){v=Pc(v);var x=v.fill,_=v.align,N=v.sign,S=v.symbol,C=v.zero,z=v.width,w=v.comma,E=v.precision,O=v.trim,M=v.type;M==="n"?(w=!0,M="g"):Jw[M]||(E===void 0&&(E=12),O=!0,M="g"),(C||x==="0"&&_==="=")&&(C=!0,x="0",_="=");var P=(y&&y.prefix!==void 0?y.prefix:"")+(S==="$"?r:S==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():""),q=(S==="$"?a:/[%p]/.test(M)?u:"")+(y&&y.suffix!==void 0?y.suffix:""),L=Jw[M],Y=/[defgprs%]/.test(M);E=E===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function W(B){var Q=P,k=q,T,R,J;if(M==="c")k=L(B)+k,B="";else{B=+B;var H=B<0||1/B<0;if(B=isNaN(B)?m:L(Math.abs(B),E),O&&(B=y8(B)),H&&+B==0&&N!=="+"&&(H=!1),Q=(H?N==="("?N:d:N==="-"||N==="("?"":N)+Q,k=(M==="s"&&!isNaN(B)&&Df!==void 0?rC[8+Df/3]:"")+k+(H&&N==="("?")":""),Y){for(T=-1,R=B.length;++T<R;)if(J=B.charCodeAt(T),48>J||J>57){k=(J===46?l+B.slice(T+1):B.slice(T))+k,B=B.slice(0,T);break}}}w&&!C&&(B=t(B,1/0));var ve=Q.length+B.length+k.length,U=ve<z?new Array(z-ve+1).join(x):"";switch(w&&C&&(B=t(U+B,U.length?z-k.length:1/0),U=""),_){case"<":B=Q+B+k+U;break;case"=":B=Q+U+B+k;break;case"^":B=U.slice(0,ve=U.length>>1)+Q+B+k+U.slice(ve);break;default:B=U+Q+B+k;break}return o(B)}return W.toString=function(){return v+""},W}function h(v,y){var x=Math.max(-8,Math.min(8,Math.floor(Ql(y)/3)))*3,_=Math.pow(10,-x),N=p((v=Pc(v),v.type="f",v),{suffix:rC[8+x/3]});return function(S){return N(_*S)}}return{format:p,formatPrefix:h}}var Md,Gy,kz;N8({thousands:",",grouping:[3],currency:["$",""]});function N8(e){return Md=j8(e),Gy=Md.format,kz=Md.formatPrefix,Md}function _8(e){return Math.max(0,-Ql(Math.abs(e)))}function S8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ql(t)/3)))*3-Ql(Math.abs(e)))}function w8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ql(t)-Ql(e))+1}function Pz(e,t,r,a){var l=Ix(e,t,r),o;switch(a=Pc(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=S8(l,u))&&(a.precision=o),kz(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=w8(l,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=_8(l))&&(a.precision=o-(a.type==="%")*2);break}}return Gy(a)}function $i(e){var t=e.domain;return e.ticks=function(r){var a=t();return Rx(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var l=t();return Pz(l[0],l[l.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),l=0,o=a.length-1,u=a[l],d=a[o],m,p,h=10;for(d<u&&(p=u,u=d,d=p,p=l,l=o,o=p);h-- >0;){if(p=Lx(u,d,r),p===m)return a[l]=u,a[o]=d,t(a);if(p>0)u=Math.floor(u/p)*p,d=Math.ceil(d/p)*p;else if(p<0)u=Math.ceil(u*p)/p,d=Math.floor(d*p)/p;else break;m=p}return e},e}function Tz(){var e=Uy();return e.copy=function(){return Kc(e,Tz())},wn.apply(e,arguments),$i(e)}function qz(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,zf),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return qz(e).unknown(t)},e=arguments.length?Array.from(e,zf):[0,1],$i(r)}function Rz(e,t){e=e.slice();var r=0,a=e.length-1,l=e[r],o=e[a],u;return o<l&&(u=r,r=a,a=u,u=l,l=o,o=u),e[r]=t.floor(l),e[a]=t.ceil(o),e}function nC(e){return Math.log(e)}function aC(e){return Math.exp(e)}function C8(e){return-Math.log(-e)}function A8(e){return-Math.exp(-e)}function E8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function z8(e){return e===10?E8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function O8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iC(e){return(t,r)=>-e(-t,r)}function Hy(e){const t=e(nC,aC),r=t.domain;let a=10,l,o;function u(){return l=O8(a),o=z8(a),r()[0]<0?(l=iC(l),o=iC(o),e(C8,A8)):e(nC,aC),t}return t.base=function(d){return arguments.length?(a=+d,u()):a},t.domain=function(d){return arguments.length?(r(d),u()):r()},t.ticks=d=>{const m=r();let p=m[0],h=m[m.length-1];const v=h<p;v&&([p,h]=[h,p]);let y=l(p),x=l(h),_,N;const S=d==null?10:+d;let C=[];if(!(a%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),p>0){for(;y<=x;++y)for(_=1;_<a;++_)if(N=y<0?_/o(-y):_*o(y),!(N<p)){if(N>h)break;C.push(N)}}else for(;y<=x;++y)for(_=a-1;_>=1;--_)if(N=y>0?_/o(-y):_*o(y),!(N<p)){if(N>h)break;C.push(N)}C.length*2<S&&(C=Rx(p,h,S))}else C=Rx(y,x,Math.min(x-y,S)).map(o);return v?C.reverse():C},t.tickFormat=(d,m)=>{if(d==null&&(d=10),m==null&&(m=a===10?"s":","),typeof m!="function"&&(!(a%1)&&(m=Pc(m)).precision==null&&(m.trim=!0),m=Gy(m)),d===1/0)return m;const p=Math.max(1,a*d/t.ticks().length);return h=>{let v=h/o(Math.round(l(h)));return v*a<a-.5&&(v*=a),v<=p?m(h):""}},t.nice=()=>r(Rz(r(),{floor:d=>o(Math.floor(l(d))),ceil:d=>o(Math.ceil(l(d)))})),t}function Lz(){const e=Hy(Cm()).domain([1,10]);return e.copy=()=>Kc(e,Lz()).base(e.base()),wn.apply(e,arguments),e}function sC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Qy(e){var t=1,r=e(sC(t),lC(t));return r.constant=function(a){return arguments.length?e(sC(t=+a),lC(t)):t},$i(r)}function Iz(){var e=Qy(Cm());return e.copy=function(){return Kc(e,Iz()).constant(e.constant())},wn.apply(e,arguments)}function oC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function D8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function M8(e){return e<0?-e*e:e*e}function Vy(e){var t=e(Cr,Cr),r=1;function a(){return r===1?e(Cr,Cr):r===.5?e(D8,M8):e(oC(r),oC(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,a()):r},$i(t)}function Yy(){var e=Vy(Cm());return e.copy=function(){return Kc(e,Yy()).exponent(e.exponent())},wn.apply(e,arguments),e}function k8(){return Yy.apply(null,arguments).exponent(.5)}function cC(e){return Math.sign(e)*e*e}function P8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function $z(){var e=Uy(),t=[0,1],r=!1,a;function l(o){var u=P8(e(o));return isNaN(u)?a:r?Math.round(u):u}return l.invert=function(o){return e.invert(cC(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,zf)).map(cC)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(r=!!o,l):r},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return $z(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},wn.apply(l,arguments),$i(l)}function Bz(){var e=[],t=[],r=[],a;function l(){var u=0,d=Math.max(1,t.length);for(r=new Array(d-1);++u<d;)r[u-1]=LI(e,u/d);return o}function o(u){return u==null||isNaN(u=+u)?a:t[Vc(r,u)]}return o.invertExtent=function(u){var d=t.indexOf(u);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Di),l()},o.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},o.unknown=function(u){return arguments.length?(a=u,o):a},o.quantiles=function(){return r.slice()},o.copy=function(){return Bz().domain(e).range(t).unknown(a)},wn.apply(o,arguments)}function Uz(){var e=0,t=1,r=1,a=[.5],l=[0,1],o;function u(m){return m!=null&&m<=m?l[Vc(a,m,0,r)]:o}function d(){var m=-1;for(a=new Array(r);++m<r;)a[m]=((m+1)*t-(m-r)*e)/(r+1);return u}return u.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,d()):[e,t]},u.range=function(m){return arguments.length?(r=(l=Array.from(m)).length-1,d()):l.slice()},u.invertExtent=function(m){var p=l.indexOf(m);return p<0?[NaN,NaN]:p<1?[e,a[0]]:p>=r?[a[r-1],t]:[a[p-1],a[p]]},u.unknown=function(m){return arguments.length&&(o=m),u},u.thresholds=function(){return a.slice()},u.copy=function(){return Uz().domain([e,t]).range(l).unknown(o)},wn.apply($i(u),arguments)}function Fz(){var e=[.5],t=[0,1],r,a=1;function l(o){return o!=null&&o<=o?t[Vc(e,o,0,a)]:r}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var u=t.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(r=o,l):r},l.copy=function(){return Fz().domain(e).range(t).unknown(r)},wn.apply(l,arguments)}const kg=new Date,Pg=new Date;function Kt(e,t,r,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const u=l(o),d=l.ceil(o);return o-u<d-o?u:d},l.offset=(o,u)=>(t(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,d)=>{const m=[];if(o=l.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return m;let p;do m.push(p=new Date(+o)),t(o,d),e(o);while(p<o&&o<u);return m},l.filter=o=>Kt(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;t(u,-1),!o(u););else for(;--d>=0;)for(;t(u,1),!o(u););}),r&&(l.count=(o,u)=>(kg.setTime(+o),Pg.setTime(+u),e(kg),e(Pg),Math.floor(r(kg,Pg))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?u=>a(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const Mf=Kt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Mf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Kt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Mf);Mf.range;const za=1e3,bn=za*60,Oa=bn*60,Ra=Oa*24,Ky=Ra*7,uC=Ra*30,Tg=Ra*365,hs=Kt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getUTCSeconds());hs.range;const Xy=Kt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*za)},(e,t)=>{e.setTime(+e+t*bn)},(e,t)=>(t-e)/bn,e=>e.getMinutes());Xy.range;const Wy=Kt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*bn)},(e,t)=>(t-e)/bn,e=>e.getUTCMinutes());Wy.range;const Zy=Kt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*za-e.getMinutes()*bn)},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getHours());Zy.range;const Jy=Kt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getUTCHours());Jy.range;const Xc=Kt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bn)/Ra,e=>e.getDate()-1);Xc.range;const Am=Kt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ra,e=>e.getUTCDate()-1);Am.range;const Gz=Kt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ra,e=>Math.floor(e/Ra));Gz.range;function Ps(e){return Kt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*bn)/Ky)}const Em=Ps(0),kf=Ps(1),T8=Ps(2),q8=Ps(3),Vl=Ps(4),R8=Ps(5),L8=Ps(6);Em.range;kf.range;T8.range;q8.range;Vl.range;R8.range;L8.range;function Ts(e){return Kt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ky)}const zm=Ts(0),Pf=Ts(1),I8=Ts(2),$8=Ts(3),Yl=Ts(4),B8=Ts(5),U8=Ts(6);zm.range;Pf.range;I8.range;$8.range;Yl.range;B8.range;U8.range;const eb=Kt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());eb.range;const tb=Kt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());tb.range;const La=Kt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());La.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});La.range;const Ia=Kt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ia.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ia.range;function Hz(e,t,r,a,l,o){const u=[[hs,1,za],[hs,5,5*za],[hs,15,15*za],[hs,30,30*za],[o,1,bn],[o,5,5*bn],[o,15,15*bn],[o,30,30*bn],[l,1,Oa],[l,3,3*Oa],[l,6,6*Oa],[l,12,12*Oa],[a,1,Ra],[a,2,2*Ra],[r,1,Ky],[t,1,uC],[t,3,3*uC],[e,1,Tg]];function d(p,h,v){const y=h<p;y&&([p,h]=[h,p]);const x=v&&typeof v.range=="function"?v:m(p,h,v),_=x?x.range(p,+h+1):[];return y?_.reverse():_}function m(p,h,v){const y=Math.abs(h-p)/v,x=qy(([,,S])=>S).right(u,y);if(x===u.length)return e.every(Ix(p/Tg,h/Tg,v));if(x===0)return Mf.every(Math.max(Ix(p,h,v),1));const[_,N]=u[y/u[x-1][2]<u[x][2]/y?x-1:x];return _.every(N)}return[d,m]}const[F8,G8]=Hz(Ia,tb,zm,Gz,Jy,Wy),[H8,Q8]=Hz(La,eb,Em,Xc,Zy,Xy);function qg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Rg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ic(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function V8(e){var t=e.dateTime,r=e.date,a=e.time,l=e.periods,o=e.days,u=e.shortDays,d=e.months,m=e.shortMonths,p=sc(l),h=lc(l),v=sc(o),y=lc(o),x=sc(u),_=lc(u),N=sc(d),S=lc(d),C=sc(m),z=lc(m),w={a:J,A:H,b:ve,B:U,c:null,d:vC,e:vC,f:v$,g:C$,G:E$,H:m$,I:p$,j:h$,L:Qz,m:g$,M:x$,p:ge,q:re,Q:yC,s:bC,S:y$,u:b$,U:j$,V:N$,w:_$,W:S$,x:null,X:null,y:w$,Y:A$,Z:z$,"%":xC},E={a:me,A:xe,b:he,B:F,c:null,d:gC,e:gC,f:k$,g:F$,G:H$,H:O$,I:D$,j:M$,L:Yz,m:P$,M:T$,p:de,q:Ee,Q:yC,s:bC,S:q$,u:R$,U:L$,V:I$,w:$$,W:B$,x:null,X:null,y:U$,Y:G$,Z:Q$,"%":xC},O={a:Y,A:W,b:B,B:Q,c:k,d:pC,e:pC,f:c$,g:mC,G:fC,H:hC,I:hC,j:i$,L:o$,m:a$,M:s$,p:L,q:n$,Q:d$,s:f$,S:l$,u:Z8,U:J8,V:e$,w:W8,W:t$,x:T,X:R,y:mC,Y:fC,Z:r$,"%":u$};w.x=M(r,w),w.X=M(a,w),w.c=M(t,w),E.x=M(r,E),E.X=M(a,E),E.c=M(t,E);function M(ie,K){return function($){var se=[],V=-1,ye=0,qe=ie.length,Ie,Qe,Qt;for($ instanceof Date||($=new Date(+$));++V<qe;)ie.charCodeAt(V)===37&&(se.push(ie.slice(ye,V)),(Qe=dC[Ie=ie.charAt(++V)])!=null?Ie=ie.charAt(++V):Qe=Ie==="e"?" ":"0",(Qt=K[Ie])&&(Ie=Qt($,Qe)),se.push(Ie),ye=V+1);return se.push(ie.slice(ye,V)),se.join("")}}function P(ie,K){return function($){var se=ic(1900,void 0,1),V=q(se,ie,$+="",0),ye,qe;if(V!=$.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(K&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(ye=Rg(ic(se.y,0,1)),qe=ye.getUTCDay(),ye=qe>4||qe===0?Pf.ceil(ye):Pf(ye),ye=Am.offset(ye,(se.V-1)*7),se.y=ye.getUTCFullYear(),se.m=ye.getUTCMonth(),se.d=ye.getUTCDate()+(se.w+6)%7):(ye=qg(ic(se.y,0,1)),qe=ye.getDay(),ye=qe>4||qe===0?kf.ceil(ye):kf(ye),ye=Xc.offset(ye,(se.V-1)*7),se.y=ye.getFullYear(),se.m=ye.getMonth(),se.d=ye.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),qe="Z"in se?Rg(ic(se.y,0,1)).getUTCDay():qg(ic(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(qe+5)%7:se.w+se.U*7-(qe+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,Rg(se)):qg(se)}}function q(ie,K,$,se){for(var V=0,ye=K.length,qe=$.length,Ie,Qe;V<ye;){if(se>=qe)return-1;if(Ie=K.charCodeAt(V++),Ie===37){if(Ie=K.charAt(V++),Qe=O[Ie in dC?K.charAt(V++):Ie],!Qe||(se=Qe(ie,$,se))<0)return-1}else if(Ie!=$.charCodeAt(se++))return-1}return se}function L(ie,K,$){var se=p.exec(K.slice($));return se?(ie.p=h.get(se[0].toLowerCase()),$+se[0].length):-1}function Y(ie,K,$){var se=x.exec(K.slice($));return se?(ie.w=_.get(se[0].toLowerCase()),$+se[0].length):-1}function W(ie,K,$){var se=v.exec(K.slice($));return se?(ie.w=y.get(se[0].toLowerCase()),$+se[0].length):-1}function B(ie,K,$){var se=C.exec(K.slice($));return se?(ie.m=z.get(se[0].toLowerCase()),$+se[0].length):-1}function Q(ie,K,$){var se=N.exec(K.slice($));return se?(ie.m=S.get(se[0].toLowerCase()),$+se[0].length):-1}function k(ie,K,$){return q(ie,t,K,$)}function T(ie,K,$){return q(ie,r,K,$)}function R(ie,K,$){return q(ie,a,K,$)}function J(ie){return u[ie.getDay()]}function H(ie){return o[ie.getDay()]}function ve(ie){return m[ie.getMonth()]}function U(ie){return d[ie.getMonth()]}function ge(ie){return l[+(ie.getHours()>=12)]}function re(ie){return 1+~~(ie.getMonth()/3)}function me(ie){return u[ie.getUTCDay()]}function xe(ie){return o[ie.getUTCDay()]}function he(ie){return m[ie.getUTCMonth()]}function F(ie){return d[ie.getUTCMonth()]}function de(ie){return l[+(ie.getUTCHours()>=12)]}function Ee(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var K=M(ie+="",w);return K.toString=function(){return ie},K},parse:function(ie){var K=P(ie+="",!1);return K.toString=function(){return ie},K},utcFormat:function(ie){var K=M(ie+="",E);return K.toString=function(){return ie},K},utcParse:function(ie){var K=P(ie+="",!0);return K.toString=function(){return ie},K}}}var dC={"-":"",_:" ",0:"0"},ir=/^\s*\d+/,Y8=/^%/,K8=/[\\^$*+?|[\]().{}]/g;function tt(e,t,r){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<r?new Array(r-o+1).join(t)+l:l)}function X8(e){return e.replace(K8,"\\$&")}function sc(e){return new RegExp("^(?:"+e.map(X8).join("|")+")","i")}function lc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function W8(e,t,r){var a=ir.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function Z8(e,t,r){var a=ir.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function J8(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function e$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function t$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function fC(e,t,r){var a=ir.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function mC(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function r$(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function n$(e,t,r){var a=ir.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function a$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function pC(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function i$(e,t,r){var a=ir.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function hC(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function s$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function l$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function o$(e,t,r){var a=ir.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function c$(e,t,r){var a=ir.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function u$(e,t,r){var a=Y8.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function d$(e,t,r){var a=ir.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function f$(e,t,r){var a=ir.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function vC(e,t){return tt(e.getDate(),t,2)}function m$(e,t){return tt(e.getHours(),t,2)}function p$(e,t){return tt(e.getHours()%12||12,t,2)}function h$(e,t){return tt(1+Xc.count(La(e),e),t,3)}function Qz(e,t){return tt(e.getMilliseconds(),t,3)}function v$(e,t){return Qz(e,t)+"000"}function g$(e,t){return tt(e.getMonth()+1,t,2)}function x$(e,t){return tt(e.getMinutes(),t,2)}function y$(e,t){return tt(e.getSeconds(),t,2)}function b$(e){var t=e.getDay();return t===0?7:t}function j$(e,t){return tt(Em.count(La(e)-1,e),t,2)}function Vz(e){var t=e.getDay();return t>=4||t===0?Vl(e):Vl.ceil(e)}function N$(e,t){return e=Vz(e),tt(Vl.count(La(e),e)+(La(e).getDay()===4),t,2)}function _$(e){return e.getDay()}function S$(e,t){return tt(kf.count(La(e)-1,e),t,2)}function w$(e,t){return tt(e.getFullYear()%100,t,2)}function C$(e,t){return e=Vz(e),tt(e.getFullYear()%100,t,2)}function A$(e,t){return tt(e.getFullYear()%1e4,t,4)}function E$(e,t){var r=e.getDay();return e=r>=4||r===0?Vl(e):Vl.ceil(e),tt(e.getFullYear()%1e4,t,4)}function z$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tt(t/60|0,"0",2)+tt(t%60,"0",2)}function gC(e,t){return tt(e.getUTCDate(),t,2)}function O$(e,t){return tt(e.getUTCHours(),t,2)}function D$(e,t){return tt(e.getUTCHours()%12||12,t,2)}function M$(e,t){return tt(1+Am.count(Ia(e),e),t,3)}function Yz(e,t){return tt(e.getUTCMilliseconds(),t,3)}function k$(e,t){return Yz(e,t)+"000"}function P$(e,t){return tt(e.getUTCMonth()+1,t,2)}function T$(e,t){return tt(e.getUTCMinutes(),t,2)}function q$(e,t){return tt(e.getUTCSeconds(),t,2)}function R$(e){var t=e.getUTCDay();return t===0?7:t}function L$(e,t){return tt(zm.count(Ia(e)-1,e),t,2)}function Kz(e){var t=e.getUTCDay();return t>=4||t===0?Yl(e):Yl.ceil(e)}function I$(e,t){return e=Kz(e),tt(Yl.count(Ia(e),e)+(Ia(e).getUTCDay()===4),t,2)}function $$(e){return e.getUTCDay()}function B$(e,t){return tt(Pf.count(Ia(e)-1,e),t,2)}function U$(e,t){return tt(e.getUTCFullYear()%100,t,2)}function F$(e,t){return e=Kz(e),tt(e.getUTCFullYear()%100,t,2)}function G$(e,t){return tt(e.getUTCFullYear()%1e4,t,4)}function H$(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Yl(e):Yl.ceil(e),tt(e.getUTCFullYear()%1e4,t,4)}function Q$(){return"+0000"}function xC(){return"%"}function yC(e){return+e}function bC(e){return Math.floor(+e/1e3)}var El,Xz,Wz;V$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function V$(e){return El=V8(e),Xz=El.format,El.parse,Wz=El.utcFormat,El.utcParse,El}function Y$(e){return new Date(e)}function K$(e){return e instanceof Date?+e:+new Date(+e)}function rb(e,t,r,a,l,o,u,d,m,p){var h=Uy(),v=h.invert,y=h.domain,x=p(".%L"),_=p(":%S"),N=p("%I:%M"),S=p("%I %p"),C=p("%a %d"),z=p("%b %d"),w=p("%B"),E=p("%Y");function O(M){return(m(M)<M?x:d(M)<M?_:u(M)<M?N:o(M)<M?S:a(M)<M?l(M)<M?C:z:r(M)<M?w:E)(M)}return h.invert=function(M){return new Date(v(M))},h.domain=function(M){return arguments.length?y(Array.from(M,K$)):y().map(Y$)},h.ticks=function(M){var P=y();return e(P[0],P[P.length-1],M??10)},h.tickFormat=function(M,P){return P==null?O:p(P)},h.nice=function(M){var P=y();return(!M||typeof M.range!="function")&&(M=t(P[0],P[P.length-1],M??10)),M?y(Rz(P,M)):h},h.copy=function(){return Kc(h,rb(e,t,r,a,l,o,u,d,m,p))},h}function X$(){return wn.apply(rb(H8,Q8,La,eb,Em,Xc,Zy,Xy,hs,Xz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function W$(){return wn.apply(rb(F8,G8,Ia,tb,zm,Am,Jy,Wy,hs,Wz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Om(){var e=0,t=1,r,a,l,o,u=Cr,d=!1,m;function p(v){return v==null||isNaN(v=+v)?m:u(l===0?.5:(v=(o(v)-r)*l,d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t]=v,r=o(e=+e),a=o(t=+t),l=r===a?0:1/(a-r),p):[e,t]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function h(v){return function(y){var x,_;return arguments.length?([x,_]=y,u=v(x,_),p):[u(0),u(1)]}}return p.range=h(Kl),p.rangeRound=h(By),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return o=v,r=v(e),a=v(t),l=r===a?0:1/(a-r),p}}function Bi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Zz(){var e=$i(Om()(Cr));return e.copy=function(){return Bi(e,Zz())},Va.apply(e,arguments)}function Jz(){var e=Hy(Om()).domain([1,10]);return e.copy=function(){return Bi(e,Jz()).base(e.base())},Va.apply(e,arguments)}function eO(){var e=Qy(Om());return e.copy=function(){return Bi(e,eO()).constant(e.constant())},Va.apply(e,arguments)}function nb(){var e=Vy(Om());return e.copy=function(){return Bi(e,nb()).exponent(e.exponent())},Va.apply(e,arguments)}function Z$(){return nb.apply(null,arguments).exponent(.5)}function tO(){var e=[],t=Cr;function r(a){if(a!=null&&!isNaN(a=+a))return t((Vc(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Di),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,l)=>t(l/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(l,o)=>RI(e,o/a))},r.copy=function(){return tO(t).domain(e)},Va.apply(r,arguments)}function Dm(){var e=0,t=.5,r=1,a=1,l,o,u,d,m,p=Cr,h,v=!1,y;function x(N){return isNaN(N=+N)?y:(N=.5+((N=+h(N))-o)*(a*N<a*o?d:m),p(v?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,r]=N,l=h(e=+e),o=h(t=+t),u=h(r=+r),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,x):[e,t,r]},x.clamp=function(N){return arguments.length?(v=!!N,x):v},x.interpolator=function(N){return arguments.length?(p=N,x):p};function _(N){return function(S){var C,z,w;return arguments.length?([C,z,w]=S,p=u8(N,[C,z,w]),x):[p(0),p(.5),p(1)]}}return x.range=_(Kl),x.rangeRound=_(By),x.unknown=function(N){return arguments.length?(y=N,x):y},function(N){return h=N,l=N(e),o=N(t),u=N(r),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,x}}function rO(){var e=$i(Dm()(Cr));return e.copy=function(){return Bi(e,rO())},Va.apply(e,arguments)}function nO(){var e=Hy(Dm()).domain([.1,1,10]);return e.copy=function(){return Bi(e,nO()).base(e.base())},Va.apply(e,arguments)}function aO(){var e=Qy(Dm());return e.copy=function(){return Bi(e,aO()).constant(e.constant())},Va.apply(e,arguments)}function ab(){var e=Vy(Dm());return e.copy=function(){return Bi(e,ab()).exponent(e.exponent())},Va.apply(e,arguments)}function J$(){return ab.apply(null,arguments).exponent(.5)}const pc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ly,scaleDiverging:rO,scaleDivergingLog:nO,scaleDivergingPow:ab,scaleDivergingSqrt:J$,scaleDivergingSymlog:aO,scaleIdentity:qz,scaleImplicit:$x,scaleLinear:Tz,scaleLog:Lz,scaleOrdinal:Ry,scalePoint:$I,scalePow:Yy,scaleQuantile:Bz,scaleQuantize:Uz,scaleRadial:$z,scaleSequential:Zz,scaleSequentialLog:Jz,scaleSequentialPow:nb,scaleSequentialQuantile:tO,scaleSequentialSqrt:Z$,scaleSequentialSymlog:eO,scaleSqrt:k8,scaleSymlog:Iz,scaleThreshold:Fz,scaleTime:X$,scaleUtc:W$,tickFormat:Pz},Symbol.toStringTag,{value:"Module"}));var Ya=e=>e.chartData,iO=ae([Ya],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),ib=(e,t,r,a)=>a?iO(e):Ya(e),eB=(e,t,r)=>r?iO(e):Ya(e);function $a(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Xe(t)&&Xe(r))return!0}return!1}function jC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function sO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,l,o;if(Xe(r))l=r;else if(typeof r=="function")return;if(Xe(a))o=a;else if(typeof a=="function")return;var u=[l,o];if($a(u))return u}}function tB(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if($a(a))return jC(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,d;if(l==="auto")t!=null&&(u=Math.min(...t));else if(Se(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&MS.test(l)){var m=MS.exec(l);if(m==null||m[1]==null||t==null)u=void 0;else{var p=+m[1];u=t[0]-p}}else u=t?.[0];if(o==="auto")t!=null&&(d=Math.max(...t));else if(Se(o))d=o;else if(typeof o=="function")try{t!=null&&(d=o(t?.[1]))}catch{}else if(typeof o=="string"&&kS.test(o)){var h=kS.exec(o);if(h==null||h[1]==null||t==null)d=void 0;else{var v=+h[1];d=t[1]+v}}else d=t?.[1];var y=[u,d];if($a(y))return t==null?y:jC(y,t,r)}}}var Xl=1e9,rB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lb,wt=!0,Sn="[DecimalError] ",js=Sn+"Invalid argument: ",sb=Sn+"Exponent out of range: ",Wl=Math.floor,fs=Math.pow,nB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wr,tr=1e7,jt=7,lO=9007199254740991,Tf=Wl(lO/jt),je={};je.absoluteValue=je.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};je.comparedTo=je.cmp=function(e){var t,r,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,t=0,r=a<l?a:l;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};je.decimalPlaces=je.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*jt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};je.dividedBy=je.div=function(e){return ka(this,new this.constructor(e))};je.dividedToIntegerBy=je.idiv=function(e){var t=this,r=t.constructor;return vt(ka(t,new r(e),0,1),r.precision)};je.equals=je.eq=function(e){return!this.cmp(e)};je.exponent=function(){return Ft(this)};je.greaterThan=je.gt=function(e){return this.cmp(e)>0};je.greaterThanOrEqualTo=je.gte=function(e){return this.cmp(e)>=0};je.isInteger=je.isint=function(){return this.e>this.d.length-2};je.isNegative=je.isneg=function(){return this.s<0};je.isPositive=je.ispos=function(){return this.s>0};je.isZero=function(){return this.s===0};je.lessThan=je.lt=function(e){return this.cmp(e)<0};je.lessThanOrEqualTo=je.lte=function(e){return this.cmp(e)<1};je.logarithm=je.log=function(e){var t,r=this,a=r.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Wr))throw Error(Sn+"NaN");if(r.s<1)throw Error(Sn+(r.s?"NaN":"-Infinity"));return r.eq(Wr)?new a(0):(wt=!1,t=ka(Tc(r,o),Tc(e,o),o),wt=!0,vt(t,l))};je.minus=je.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uO(t,e):oO(t,(e.s=-e.s,e))};je.modulo=je.mod=function(e){var t,r=this,a=r.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(Sn+"NaN");return r.s?(wt=!1,t=ka(r,e,0,1).times(e),wt=!0,r.minus(t)):vt(new a(r),l)};je.naturalExponential=je.exp=function(){return cO(this)};je.naturalLogarithm=je.ln=function(){return Tc(this)};je.negated=je.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};je.plus=je.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oO(t,e):uO(t,(e.s=-e.s,e))};je.precision=je.sd=function(e){var t,r,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(js+e);if(t=Ft(l)+1,a=l.d.length-1,r=a*jt+1,a=l.d[a],a){for(;a%10==0;a/=10)r--;for(a=l.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};je.squareRoot=je.sqrt=function(){var e,t,r,a,l,o,u,d=this,m=d.constructor;if(d.s<1){if(!d.s)return new m(0);throw Error(Sn+"NaN")}for(e=Ft(d),wt=!1,l=Math.sqrt(+d),l==0||l==1/0?(t=Jn(d.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=Wl((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new m(t)):a=new m(l.toString()),r=m.precision,l=u=r+3;;)if(o=a,a=o.plus(ka(d,o,u+2)).times(.5),Jn(o.d).slice(0,u)===(t=Jn(a.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(vt(o,r+1,0),o.times(o).eq(d)){a=o;break}}else if(t!="9999")break;u+=4}return wt=!0,vt(a,r)};je.times=je.mul=function(e){var t,r,a,l,o,u,d,m,p,h=this,v=h.constructor,y=h.d,x=(e=new v(e)).d;if(!h.s||!e.s)return new v(0);for(e.s*=h.s,r=h.e+e.e,m=y.length,p=x.length,m<p&&(o=y,y=x,x=o,u=m,m=p,p=u),o=[],u=m+p,a=u;a--;)o.push(0);for(a=p;--a>=0;){for(t=0,l=m+a;l>a;)d=o[l]+x[a]*y[l-a-1]+t,o[l--]=d%tr|0,t=d/tr|0;o[l]=(o[l]+t)%tr|0}for(;!o[--u];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,wt?vt(e,v.precision):e};je.toDecimalPlaces=je.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(ia(e,0,Xl),t===void 0?t=a.rounding:ia(t,0,8),vt(r,e+Ft(r)+1,t))};je.toExponential=function(e,t){var r,a=this,l=a.constructor;return e===void 0?r=As(a,!0):(ia(e,0,Xl),t===void 0?t=l.rounding:ia(t,0,8),a=vt(new l(a),e+1,t),r=As(a,!0,e+1)),r};je.toFixed=function(e,t){var r,a,l=this,o=l.constructor;return e===void 0?As(l):(ia(e,0,Xl),t===void 0?t=o.rounding:ia(t,0,8),a=vt(new o(l),e+Ft(l)+1,t),r=As(a.abs(),!1,e+Ft(a)+1),l.isneg()&&!l.isZero()?"-"+r:r)};je.toInteger=je.toint=function(){var e=this,t=e.constructor;return vt(new t(e),Ft(e)+1,t.rounding)};je.toNumber=function(){return+this};je.toPower=je.pow=function(e){var t,r,a,l,o,u,d=this,m=d.constructor,p=12,h=+(e=new m(e));if(!e.s)return new m(Wr);if(d=new m(d),!d.s){if(e.s<1)throw Error(Sn+"Infinity");return d}if(d.eq(Wr))return d;if(a=m.precision,e.eq(Wr))return vt(d,a);if(t=e.e,r=e.d.length-1,u=t>=r,o=d.s,u){if((r=h<0?-h:h)<=lO){for(l=new m(Wr),t=Math.ceil(a/jt+4),wt=!1;r%2&&(l=l.times(d),_C(l.d,t)),r=Wl(r/2),r!==0;)d=d.times(d),_C(d.d,t);return wt=!0,e.s<0?new m(Wr).div(l):vt(l,a)}}else if(o<0)throw Error(Sn+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,wt=!1,l=e.times(Tc(d,a+p)),wt=!0,l=cO(l),l.s=o,l};je.toPrecision=function(e,t){var r,a,l=this,o=l.constructor;return e===void 0?(r=Ft(l),a=As(l,r<=o.toExpNeg||r>=o.toExpPos)):(ia(e,1,Xl),t===void 0?t=o.rounding:ia(t,0,8),l=vt(new o(l),e,t),r=Ft(l),a=As(l,e<=r||r<=o.toExpNeg,e)),a};je.toSignificantDigits=je.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(ia(e,1,Xl),t===void 0?t=a.rounding:ia(t,0,8)),vt(new a(r),e,t)};je.toString=je.valueOf=je.val=je.toJSON=je[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ft(e),r=e.constructor;return As(e,t<=r.toExpNeg||t>=r.toExpPos)};function oO(e,t){var r,a,l,o,u,d,m,p,h=e.constructor,v=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),wt?vt(t,v):t;if(m=e.d,p=t.d,u=e.e,l=t.e,m=m.slice(),o=u-l,o){for(o<0?(a=m,o=-o,d=p.length):(a=p,l=u,d=m.length),u=Math.ceil(v/jt),d=u>d?u+1:d+1,o>d&&(o=d,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(d=m.length,o=p.length,d-o<0&&(o=d,a=p,p=m,m=a),r=0;o;)r=(m[--o]=m[o]+p[o]+r)/tr|0,m[o]%=tr;for(r&&(m.unshift(r),++l),d=m.length;m[--d]==0;)m.pop();return t.d=m,t.e=l,wt?vt(t,v):t}function ia(e,t,r){if(e!==~~e||e<t||e>r)throw Error(js+e)}function Jn(e){var t,r,a,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,t=1;t<l;t++)a=e[t]+"",r=jt-a.length,r&&(o+=Ci(r)),o+=a;u=e[t],a=u+"",r=jt-a.length,r&&(o+=Ci(r))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var ka=(function(){function e(a,l){var o,u=0,d=a.length;for(a=a.slice();d--;)o=a[d]*l+u,a[d]=o%tr|0,u=o/tr|0;return u&&a.unshift(u),a}function t(a,l,o,u){var d,m;if(o!=u)m=o>u?1:-1;else for(d=m=0;d<o;d++)if(a[d]!=l[d]){m=a[d]>l[d]?1:-1;break}return m}function r(a,l,o){for(var u=0;o--;)a[o]-=u,u=a[o]<l[o]?1:0,a[o]=u*tr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,u){var d,m,p,h,v,y,x,_,N,S,C,z,w,E,O,M,P,q,L=a.constructor,Y=a.s==l.s?1:-1,W=a.d,B=l.d;if(!a.s)return new L(a);if(!l.s)throw Error(Sn+"Division by zero");for(m=a.e-l.e,P=B.length,O=W.length,x=new L(Y),_=x.d=[],p=0;B[p]==(W[p]||0);)++p;if(B[p]>(W[p]||0)&&--m,o==null?z=o=L.precision:u?z=o+(Ft(a)-Ft(l))+1:z=o,z<0)return new L(0);if(z=z/jt+2|0,p=0,P==1)for(h=0,B=B[0],z++;(p<O||h)&&z--;p++)w=h*tr+(W[p]||0),_[p]=w/B|0,h=w%B|0;else{for(h=tr/(B[0]+1)|0,h>1&&(B=e(B,h),W=e(W,h),P=B.length,O=W.length),E=P,N=W.slice(0,P),S=N.length;S<P;)N[S++]=0;q=B.slice(),q.unshift(0),M=B[0],B[1]>=tr/2&&++M;do h=0,d=t(B,N,P,S),d<0?(C=N[0],P!=S&&(C=C*tr+(N[1]||0)),h=C/M|0,h>1?(h>=tr&&(h=tr-1),v=e(B,h),y=v.length,S=N.length,d=t(v,N,y,S),d==1&&(h--,r(v,P<y?q:B,y))):(h==0&&(d=h=1),v=B.slice()),y=v.length,y<S&&v.unshift(0),r(N,v,S),d==-1&&(S=N.length,d=t(B,N,P,S),d<1&&(h++,r(N,P<S?q:B,S))),S=N.length):d===0&&(h++,N=[0]),_[p++]=h,d&&N[0]?N[S++]=W[E]||0:(N=[W[E]],S=1);while((E++<O||N[0]!==void 0)&&z--)}return _[0]||_.shift(),x.e=m,vt(x,u?o+Ft(x)+1:o)}})();function cO(e,t){var r,a,l,o,u,d,m=0,p=0,h=e.constructor,v=h.precision;if(Ft(e)>16)throw Error(sb+Ft(e));if(!e.s)return new h(Wr);for(wt=!1,d=v,u=new h(.03125);e.abs().gte(.1);)e=e.times(u),p+=5;for(a=Math.log(fs(2,p))/Math.LN10*2+5|0,d+=a,r=l=o=new h(Wr),h.precision=d;;){if(l=vt(l.times(e),d),r=r.times(++m),u=o.plus(ka(l,r,d)),Jn(u.d).slice(0,d)===Jn(o.d).slice(0,d)){for(;p--;)o=vt(o.times(o),d);return h.precision=v,t==null?(wt=!0,vt(o,v)):o}o=u}}function Ft(e){for(var t=e.e*jt,r=e.d[0];r>=10;r/=10)t++;return t}function Lg(e,t,r){if(t>e.LN10.sd())throw wt=!0,r&&(e.precision=r),Error(Sn+"LN10 precision limit exceeded");return vt(new e(e.LN10),t)}function Ci(e){for(var t="";e--;)t+="0";return t}function Tc(e,t){var r,a,l,o,u,d,m,p,h,v=1,y=10,x=e,_=x.d,N=x.constructor,S=N.precision;if(x.s<1)throw Error(Sn+(x.s?"NaN":"-Infinity"));if(x.eq(Wr))return new N(0);if(t==null?(wt=!1,p=S):p=t,x.eq(10))return t==null&&(wt=!0),Lg(N,p);if(p+=y,N.precision=p,r=Jn(_),a=r.charAt(0),o=Ft(x),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)x=x.times(e),r=Jn(x.d),a=r.charAt(0),v++;o=Ft(x),a>1?(x=new N("0."+r),o++):x=new N(a+"."+r.slice(1))}else return m=Lg(N,p+2,S).times(o+""),x=Tc(new N(a+"."+r.slice(1)),p-y).plus(m),N.precision=S,t==null?(wt=!0,vt(x,S)):x;for(d=u=x=ka(x.minus(Wr),x.plus(Wr),p),h=vt(x.times(x),p),l=3;;){if(u=vt(u.times(h),p),m=d.plus(ka(u,new N(l),p)),Jn(m.d).slice(0,p)===Jn(d.d).slice(0,p))return d=d.times(2),o!==0&&(d=d.plus(Lg(N,p+2,S).times(o+""))),d=ka(d,new N(v),p),N.precision=S,t==null?(wt=!0,vt(d,S)):d;d=m,l+=2}}function NC(e,t){var r,a,l;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(a,l),t){if(l-=a,r=r-a-1,e.e=Wl(r/jt),e.d=[],a=(r+1)%jt,r<0&&(a+=jt),a<l){for(a&&e.d.push(+t.slice(0,a)),l-=jt;a<l;)e.d.push(+t.slice(a,a+=jt));t=t.slice(a),a=jt-t.length}else a-=l;for(;a--;)t+="0";if(e.d.push(+t),wt&&(e.e>Tf||e.e<-Tf))throw Error(sb+r)}else e.s=0,e.e=0,e.d=[0];return e}function vt(e,t,r){var a,l,o,u,d,m,p,h,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(a=t-u,a<0)a+=jt,l=t,p=v[h=0];else{if(h=Math.ceil((a+1)/jt),o=v.length,h>=o)return e;for(p=o=v[h],u=1;o>=10;o/=10)u++;a%=jt,l=a-jt+u}if(r!==void 0&&(o=fs(10,u-l-1),d=p/o%10|0,m=t<0||v[h+1]!==void 0||p%o,m=r<4?(d||m)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||m||r==6&&(a>0?l>0?p/fs(10,u-l):0:v[h-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return m?(o=Ft(e),v.length=1,t=t-o-1,v[0]=fs(10,(jt-t%jt)%jt),e.e=Wl(-t/jt)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(a==0?(v.length=h,o=1,h--):(v.length=h+1,o=fs(10,jt-a),v[h]=l>0?(p/fs(10,u-l)%fs(10,l)|0)*o:0),m)for(;;)if(h==0){(v[0]+=o)==tr&&(v[0]=1,++e.e);break}else{if(v[h]+=o,v[h]!=tr)break;v[h--]=0,o=1}for(a=v.length;v[--a]===0;)v.pop();if(wt&&(e.e>Tf||e.e<-Tf))throw Error(sb+Ft(e));return e}function uO(e,t){var r,a,l,o,u,d,m,p,h,v,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),wt?vt(t,x):t;if(m=e.d,v=t.d,a=t.e,p=e.e,m=m.slice(),u=p-a,u){for(h=u<0,h?(r=m,u=-u,d=v.length):(r=v,a=p,d=m.length),l=Math.max(Math.ceil(x/jt),d)+2,u>l&&(u=l,r.length=1),r.reverse(),l=u;l--;)r.push(0);r.reverse()}else{for(l=m.length,d=v.length,h=l<d,h&&(d=l),l=0;l<d;l++)if(m[l]!=v[l]){h=m[l]<v[l];break}u=0}for(h&&(r=m,m=v,v=r,t.s=-t.s),d=m.length,l=v.length-d;l>0;--l)m[d++]=0;for(l=v.length;l>u;){if(m[--l]<v[l]){for(o=l;o&&m[--o]===0;)m[o]=tr-1;--m[o],m[l]+=tr}m[l]-=v[l]}for(;m[--d]===0;)m.pop();for(;m[0]===0;m.shift())--a;return m[0]?(t.d=m,t.e=a,wt?vt(t,x):t):new y(0)}function As(e,t,r){var a,l=Ft(e),o=Jn(e.d),u=o.length;return t?(r&&(a=r-u)>0?o=o.charAt(0)+"."+o.slice(1)+Ci(a):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+Ci(-l-1)+o,r&&(a=r-u)>0&&(o+=Ci(a))):l>=u?(o+=Ci(l+1-u),r&&(a=r-l-1)>0&&(o=o+"."+Ci(a))):((a=l+1)<u&&(o=o.slice(0,a)+"."+o.slice(a)),r&&(a=r-u)>0&&(l+1===u&&(o+="."),o+=Ci(a))),e.s<0?"-"+o:o}function _C(e,t){if(e.length>t)return e.length=t,!0}function dO(e){var t,r,a;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(js+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return NC(u,o.toString())}else if(typeof o!="string")throw Error(js+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,nB.test(o))NC(u,o);else throw Error(js+o)}if(l.prototype=je,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=dO,l.config=l.set=aB,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return l.config(e),l}function aB(e){if(!e||typeof e!="object")throw Error(Sn+"Object expected");var t,r,a,l=["precision",1,Xl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((a=e[r=l[t]])!==void 0)if(Wl(a)===a&&a>=l[t+1]&&a<=l[t+2])this[r]=a;else throw Error(js+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(js+r+": "+a);return this}var lb=dO(rB);Wr=new lb(1);const st=lb;function fO(e){var t;return e===0?t=1:t=Math.floor(new st(e).abs().log(10).toNumber())+1,t}function mO(e,t,r){for(var a=new st(e),l=0,o=[];a.lt(t)&&l<1e5;)o.push(a.toNumber()),a=a.add(r),l++;return o}var pO=e=>{var[t,r]=e,[a,l]=[t,r];return t>r&&([a,l]=[r,t]),[a,l]},hO=(e,t,r)=>{if(e.lte(0))return new st(0);var a=fO(e.toNumber()),l=new st(10).pow(a),o=e.div(l),u=a!==1?.05:.1,d=new st(Math.ceil(o.div(u).toNumber())).add(r).mul(u),m=d.mul(l);return t?new st(m.toNumber()):new st(Math.ceil(m.toNumber()))},iB=(e,t,r)=>{var a=new st(1),l=new st(e);if(!l.isint()&&r){var o=Math.abs(e);o<1?(a=new st(10).pow(fO(e)-1),l=new st(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new st(Math.floor(e)))}else e===0?l=new st(Math.floor((t-1)/2)):r||(l=new st(Math.floor(e)));for(var u=Math.floor((t-1)/2),d=[],m=0;m<t;m++)d.push(l.add(new st(m-u).mul(a)).toNumber());return d},vO=function(t,r,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new st(0),tickMin:new st(0),tickMax:new st(0)};var u=hO(new st(r).sub(t).div(a-1),l,o),d;t<=0&&r>=0?d=new st(0):(d=new st(t).add(r).div(2),d=d.sub(new st(d).mod(u)));var m=Math.ceil(d.sub(t).div(u).toNumber()),p=Math.ceil(new st(r).sub(d).div(u).toNumber()),h=m+p+1;return h>a?vO(t,r,a,l,o+1):(h<a&&(p=r>0?p+(a-h):p,m=r>0?m:m+(a-h)),{step:u,tickMin:d.sub(new st(m).mul(u)),tickMax:d.add(new st(p).mul(u))})},sB=function(t){var[r,a]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[d,m]=pO([r,a]);if(d===-1/0||m===1/0){var p=m===1/0?[d,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),m];return r>a?p.reverse():p}if(d===m)return iB(d,l,o);var{step:h,tickMin:v,tickMax:y}=vO(d,m,u,o,0),x=mO(v,y.add(new st(.1).mul(h)),h);return r>a?x.reverse():x},lB=function(t,r){var[a,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=pO([a,l]);if(u===-1/0||d===1/0)return[a,l];if(u===d)return[u];var m=Math.max(r,2),p=hO(new st(d).sub(u).div(m-1),o,0),h=[...mO(new st(u),new st(d),p),d];return o===!1&&(h=h.map(v=>Math.round(v))),a>l?h.reverse():h},gO=e=>e.rootProps.maxBarSize,oB=e=>e.rootProps.barGap,xO=e=>e.rootProps.barCategoryGap,cB=e=>e.rootProps.barSize,Mm=e=>e.rootProps.stackOffset,yO=e=>e.rootProps.reverseStackOrder,ob=e=>e.options.chartName,cb=e=>e.rootProps.syncId,bO=e=>e.rootProps.syncMethod,ub=e=>e.options.eventEmitter,rr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},os={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Kn={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},km=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Pm(e,t,r){if(r!=="auto")return r;if(e!=null)return Ga(e,t)?"category":"number"}function SC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(r),!0).forEach(function(a){uB(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uB(e,t,r){return(t=dB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dB(e){var t=fB(e,"string");return typeof t=="symbol"?t:t+""}function fB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wC={allowDataOverflow:os.allowDataOverflow,allowDecimals:os.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:os.angleAxisId,includeHidden:!1,name:void 0,reversed:os.reversed,scale:os.scale,tick:os.tick,tickCount:void 0,ticks:void 0,type:os.type,unit:void 0},CC={allowDataOverflow:Kn.allowDataOverflow,allowDecimals:Kn.allowDecimals,allowDuplicatedCategory:Kn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Kn.radiusAxisId,includeHidden:Kn.includeHidden,name:void 0,reversed:Kn.reversed,scale:Kn.scale,tick:Kn.tick,tickCount:Kn.tickCount,ticks:void 0,type:Kn.type,unit:void 0},mB=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},db=ae([mB,lz],(e,t)=>{var r;if(e!=null)return e;var a=(r=Pm(t,"angleAxis",wC.type))!==null&&r!==void 0?r:"category";return qf(qf({},wC),{},{type:a})}),pB=(e,t)=>e.polarAxis.radiusAxis[t],fb=ae([pB,lz],(e,t)=>{var r;if(e!=null)return e;var a=(r=Pm(t,"radiusAxis",CC.type))!==null&&r!==void 0?r:"category";return qf(qf({},CC),{},{type:a})}),Tm=e=>e.polarOptions,mb=ae([Ha,Qa,ar],dI),jO=ae([Tm,mb],(e,t)=>{if(e!=null)return qn(e.innerRadius,t,0)}),NO=ae([Tm,mb],(e,t)=>{if(e!=null)return qn(e.outerRadius,t,t*.8)}),hB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_O=ae([Tm],hB);ae([db,_O],km);var SO=ae([mb,jO,NO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ae([fb,SO],km);var wO=ae([lt,Tm,jO,NO,Ha,Qa],(e,t,r,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:u,cy:d,startAngle:m,endAngle:p}=t;return{cx:qn(u,l,l/2),cy:qn(d,o,o/2),innerRadius:r,outerRadius:a,startAngle:m,endAngle:p,clockWise:!1}}}),sr=(e,t)=>t,qm=(e,t,r)=>r;function pb(e){return e?.id}function CO(e,t,r){var{chartData:a=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=r,u=new Map;return e.forEach(d=>{var m,p=(m=d.data)!==null&&m!==void 0?m:a;if(!(p==null||p.length===0)){var h=pb(d);p.forEach((v,y)=>{var x=o==null||l?y:String(Ut(v,o,null)),_=Ut(v,d.dataKey,0),N;u.has(x)?N=u.get(x):N={},Object.assign(N,{[h]:_}),u.set(x,N)})}}),Array.from(u.values())}function Rm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Lm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Im(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function vB(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var lr=e=>{var t=lt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Zl=e=>e.tooltip.settings.axisId;function gB(e){if(e in pc)return pc[e]();var t="scale".concat(Bc(e));if(t in pc)return pc[t]()}function AC(e){var t=e.ticks,r=e.bandwidth,a=e.range(),l=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(o){function u(){return o.apply(this,arguments)}return u.toString=function(){return o.toString()},u})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var u=l[0],d=l[1];return u<=d?o>=u&&o<=d:o>=d&&o<=u},bandwidth:r?()=>r.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,u)=>{var d=e(o);if(d!=null){if(e.bandwidth&&u!==null&&u!==void 0&&u.position){var m=e.bandwidth();switch(u.position){case"middle":d+=m/2;break;case"end":d+=m;break}}return d}}}}function EC(e,t,r){if(typeof e=="function")return AC(e.copy().domain(t).range(r));if(e!=null){var a=gB(e);if(a!=null)return a.domain(t).range(r),AC(a)}}var xB=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!$a(t)){for(var r,a,l=0;l<t.length;l++){var o=t[l];Xe(o)&&((r===void 0||o<r)&&(r=o),(a===void 0||o>a)&&(a=o))}return r!==void 0&&a!==void 0?[r,a]:void 0}return t}default:return t}};function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Rf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(r),!0).forEach(function(a){yB(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yB(e,t,r){return(t=bB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bB(e){var t=jB(e,"string");return typeof t=="symbol"?t:t+""}function jB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gx=[0,"auto"],Jt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},AO=(e,t)=>e.cartesianAxis.xAxis[t],Ka=(e,t)=>{var r=AO(e,t);return r??Jt},er={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Gx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gc},EO=(e,t)=>e.cartesianAxis.yAxis[t],Xa=(e,t)=>{var r=EO(e,t);return r??er},NB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},hb=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??NB},Or=(e,t,r)=>{switch(t){case"xAxis":return Ka(e,r);case"yAxis":return Xa(e,r);case"zAxis":return hb(e,r);case"angleAxis":return db(e,r);case"radiusAxis":return fb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_B=(e,t,r)=>{switch(t){case"xAxis":return Ka(e,r);case"yAxis":return Xa(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Wc=(e,t,r)=>{switch(t){case"xAxis":return Ka(e,r);case"yAxis":return Xa(e,r);case"angleAxis":return db(e,r);case"radiusAxis":return fb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},zO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function OO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var $m=e=>e.graphicalItems.cartesianItems,SB=ae([sr,qm],OO),DO=(e,t,r)=>e.filter(r).filter(a=>t?.includeHidden===!0?!0:!a.hide),Zc=ae([$m,Or,SB],DO,{memoizeOptions:{resultEqualityCheck:Im}}),MO=ae([Zc],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Rm)),kO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),wB=ae([Zc],kO),PO=e=>e.map(t=>t.data).filter(Boolean).flat(1),CB=ae([Zc],PO,{memoizeOptions:{resultEqualityCheck:Im}}),TO=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:l}=t;return e.length>0?e:r.slice(a,l+1)},vb=ae([CB,ib],TO),qO=(e,t,r)=>t?.dataKey!=null?e.map(a=>({value:Ut(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:Ut(l,a)}))):e.map(a=>({value:a})),Bm=ae([vb,Or,Zc],qO);function RO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Qd(e){if(na(e)||e instanceof Date){var t=Number(e);if(Xe(t))return t}}function OC(e){if(Array.isArray(e)){var t=[Qd(e[0]),Qd(e[1])];return $a(t)?t:void 0}var r=Qd(e);if(r!=null)return[r,r]}function Ba(e){return e.map(Qd).filter(Ir)}function AB(e,t,r){return!r||typeof t!="number"||ra(t)?[]:r.length?Ba(r.flatMap(a=>{var l=Ut(e,a.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!Xe(o)||!Xe(u)))return[t-o,t+u]})):[]}var Xt=e=>{var t=lr(e),r=Zl(e);return Wc(e,t,r)},Jc=ae([Xt],e=>e?.dataKey),EB=ae([MO,ib,Xt],CO),LO=(e,t,r,a)=>{var l={},o=t.reduce((u,d)=>{if(d.stackId==null)return u;var m=u[d.stackId];return m==null&&(m=[]),m.push(d),u[d.stackId]=m,u},l);return Object.fromEntries(Object.entries(o).map(u=>{var[d,m]=u,p=a?[...m].reverse():m,h=p.map(pb);return[d,{stackedData:r6(e,h,r),graphicalItems:p}]}))},Hx=ae([EB,MO,Mm,yO],LO),IO=(e,t,r,a)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(a==null&&r!=="zAxis"){var u=l6(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},zB=ae([Or],e=>e.allowDataOverflow),gb=e=>{var t;if(e==null||!("domain"in e))return Gx;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Ba(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Gx},$O=ae([Or],gb),BO=ae([$O,zB],sO),OB=ae([Hx,Ya,sr,BO],IO,{memoizeOptions:{resultEqualityCheck:Lm}}),xb=e=>e.errorBars,DB=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>RO(r,a)),Lf=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var l=r.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),d=Math.max(...o);return[u,d]}},UO=(e,t,r,a,l)=>{var o,u;if(r.length>0&&e.forEach(d=>{r.forEach(m=>{var p,h,v=(p=a[m.id])===null||p===void 0?void 0:p.filter(C=>RO(l,C)),y=Ut(d,(h=t.dataKey)!==null&&h!==void 0?h:m.dataKey),x=AB(d,y,v);if(x.length>=2){var _=Math.min(...x),N=Math.max(...x);(o==null||_<o)&&(o=_),(u==null||N>u)&&(u=N)}var S=OC(y);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),u=u==null?S[1]:Math.max(u,S[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var m=OC(Ut(d,t.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),u=u==null?m[1]:Math.max(u,m[1]))}),Xe(o)&&Xe(u))return[o,u]},MB=ae([vb,Or,wB,xb,sr],UO,{memoizeOptions:{resultEqualityCheck:Lm}});function kB(e){var{value:t}=e;if(na(t)||t instanceof Date)return t}var PB=(e,t,r)=>{var a=e.map(kB).filter(l=>l!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&aE(a))?wz(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},FO=e=>e.referenceElements.dots,Jl=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),TB=ae([FO,sr,qm],Jl),GO=e=>e.referenceElements.areas,qB=ae([GO,sr,qm],Jl),HO=e=>e.referenceElements.lines,RB=ae([HO,sr,qm],Jl),QO=(e,t)=>{if(e!=null){var r=Ba(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},LB=ae(TB,sr,QO),VO=(e,t)=>{if(e!=null){var r=Ba(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},IB=ae([qB,sr],VO);function $B(e){var t;if(e.x!=null)return Ba([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return r==null||r.length===0?[]:Ba(r)}function BB(e){var t;if(e.y!=null)return Ba([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return r==null||r.length===0?[]:Ba(r)}var YO=(e,t)=>{if(e!=null){var r=e.flatMap(a=>t==="xAxis"?$B(a):BB(a));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},UB=ae([RB,sr],YO),FB=ae(LB,UB,IB,(e,t,r)=>Lf(e,r,t)),KO=(e,t,r,a,l,o,u,d)=>{if(r!=null)return r;var m=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",p=m?Lf(a,o,l):Lf(o,l);return tB(t,p,e.allowDataOverflow)},GB=ae([Or,$O,BO,OB,MB,FB,lt,sr],KO,{memoizeOptions:{resultEqualityCheck:Lm}}),HB=[0,1],XO=(e,t,r,a,l,o,u)=>{if(!((e==null||r==null||r.length===0)&&u===void 0)){var{dataKey:d,type:m}=e,p=Ga(t,o);if(p&&d==null){var h;return wz(0,(h=r?.length)!==null&&h!==void 0?h:0)}return m==="category"?PB(a,e,p):l==="expand"?HB:u}},yb=ae([Or,lt,vb,Bm,Mm,sr,GB],XO);function QB(e){return e in pc}var WO=(e,t,r)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(Bc(a));return QB(o)?o:"point"}}},eo=ae([Or,zO,ob],WO);function bb(e,t,r,a){if(!(r==null||a==null))return typeof e.scale=="function"?EC(e.scale,r,a):EC(t,r,a)}var ZO=(e,t,r)=>{var a=gb(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&$a(e))return sB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&$a(e))return lB(e,t.tickCount,t.allowDecimals)}},jb=ae([yb,Wc,eo],ZO),JO=(e,t,r,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&$a(t)&&Array.isArray(r)&&r.length>0){var l,o,u=t[0],d=(l=r[0])!==null&&l!==void 0?l:0,m=t[1],p=(o=r[r.length-1])!==null&&o!==void 0?o:0;return[Math.min(u,d),Math.max(m,p)]}return t},VB=ae([Or,yb,jb,sr],JO),YB=ae(Bm,Or,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Ba(e.map(v=>v.value))).sort((v,y)=>v-y),l=a[0],o=a[a.length-1];if(l==null||o==null)return 1/0;var u=o-l;if(u===0)return 1/0;for(var d=0;d<a.length-1;d++){var m=a[d],p=a[d+1];if(!(m==null||p==null)){var h=p-m;r=Math.min(r,h)}}return r/u}}),eD=ae(YB,lt,xO,ar,(e,t,r,a,l)=>l,(e,t,r,a,l)=>{if(!Xe(e))return 0;var o=t==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=qn(r,e*o),d=e*o/2;return d-u-(d-u)/o*u}return 0}),KB=(e,t,r)=>{var a=Ka(e,t);return a==null||typeof a.padding!="string"?0:eD(e,"xAxis",t,r,a.padding)},XB=(e,t,r)=>{var a=Xa(e,t);return a==null||typeof a.padding!="string"?0:eD(e,"yAxis",t,r,a.padding)},WB=ae(Ka,KB,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((r=l.left)!==null&&r!==void 0?r:0)+t,right:((a=l.right)!==null&&a!==void 0?a:0)+t}}),ZB=ae(Xa,XB,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((r=l.top)!==null&&r!==void 0?r:0)+t,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+t}}),JB=ae([ar,WB,xm,gm,(e,t,r)=>r],(e,t,r,a,l)=>{var{padding:o}=a;return l?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),e7=ae([ar,lt,ZB,xm,gm,(e,t,r)=>r],(e,t,r,a,l,o)=>{var{padding:u}=l;return o?[a.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),eu=(e,t,r,a)=>{var l;switch(t){case"xAxis":return JB(e,r,a);case"yAxis":return e7(e,r,a);case"zAxis":return(l=hb(e,r))===null||l===void 0?void 0:l.range;case"angleAxis":return _O(e);case"radiusAxis":return SO(e,r);default:return}},tD=ae([Or,eu],km),t7=ae([eo,VB],xB),Um=ae([Or,eo,t7,tD],bb);ae([Zc,xb,sr],DB);function rD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Fm=(e,t)=>t,Gm=(e,t,r)=>r,r7=ae(hm,Fm,Gm,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(rD)),n7=ae(vm,Fm,Gm,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(rD)),nD=(e,t)=>({width:e.width,height:t.height}),a7=(e,t)=>{var r=typeof t.width=="number"?t.width:Gc;return{width:r,height:e.height}},aD=ae(ar,Ka,nD),i7=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},s7=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},l7=ae(Qa,ar,r7,Fm,Gm,(e,t,r,a,l)=>{var o={},u;return r.forEach(d=>{var m=nD(t,d);u==null&&(u=i7(t,a,e));var p=a==="top"&&!l||a==="bottom"&&l;o[d.id]=u-Number(p)*m.height,u+=(p?-1:1)*m.height}),o}),o7=ae(Ha,ar,n7,Fm,Gm,(e,t,r,a,l)=>{var o={},u;return r.forEach(d=>{var m=a7(t,d);u==null&&(u=s7(t,a,e));var p=a==="left"&&!l||a==="right"&&l;o[d.id]=u-Number(p)*m.width,u+=(p?-1:1)*m.width}),o}),c7=(e,t)=>{var r=Ka(e,t);if(r!=null)return l7(e,r.orientation,r.mirror)},u7=ae([ar,Ka,c7,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var l=r?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),d7=(e,t)=>{var r=Xa(e,t);if(r!=null)return o7(e,r.orientation,r.mirror)},f7=ae([ar,Xa,d7,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var l=r?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),iD=ae(ar,Xa,(e,t)=>{var r=typeof t.width=="number"?t.width:Gc;return{width:r,height:e.height}}),DC=(e,t,r)=>{switch(t){case"xAxis":return aD(e,r).width;case"yAxis":return iD(e,r).height;default:return}},sD=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=r,d=Ga(e,a),m=t.map(p=>p.value);if(u&&d&&o==="category"&&l&&aE(m))return m}},Nb=ae([lt,Bm,Or,sr],sD),lD=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:l,scale:o}=r,u=Ga(e,a);if(u&&(l==="number"||o!=="auto"))return t.map(d=>d.value)}},_b=ae([lt,Bm,Wc,sr],lD),MC=ae([lt,_B,eo,Um,Nb,_b,eu,jb,sr],(e,t,r,a,l,o,u,d,m)=>{if(t!=null){var p=Ga(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:o,duplicateDomain:l,isCategorical:p,niceTicks:d,range:u,realScaleType:r,scale:a}}}),m7=(e,t,r,a,l,o,u,d,m)=>{if(!(t==null||a==null)){var p=Ga(e,m),{type:h,ticks:v,tickCount:y}=t,x=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,_=h==="category"&&a.bandwidth?a.bandwidth()/x:0;_=m==="angleAxis"&&o!=null&&o.length>=2?Lr(o[0]-o[1])*2*_:_;var N=v||l;return N?N.map((S,C)=>{var z=u?u.indexOf(S):S,w=a.map(z);return Xe(w)?{index:C,coordinate:w+_,value:S,offset:_}:null}).filter(Ir):p&&d?d.map((S,C)=>{var z=a.map(S);return Xe(z)?{coordinate:z+_,value:S,index:C,offset:_}:null}).filter(Ir):a.ticks?a.ticks(y).map((S,C)=>{var z=a.map(S);return Xe(z)?{coordinate:z+_,value:S,index:C,offset:_}:null}).filter(Ir):a.domain().map((S,C)=>{var z=a.map(S);return Xe(z)?{coordinate:z+_,value:u?u[S]:S,index:C,offset:_}:null}).filter(Ir)}},oD=ae([lt,Wc,eo,Um,jb,eu,Nb,_b,sr],m7),p7=(e,t,r,a,l,o,u)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var d=Ga(e,u),{tickCount:m}=t,p=0;return p=u==="angleAxis"&&a?.length>=2?Lr(a[0]-a[1])*2*p:p,d&&o?o.map((h,v)=>{var y=r.map(h);return Xe(y)?{coordinate:y+p,value:h,index:v,offset:p}:null}).filter(Ir):r.ticks?r.ticks(m).map((h,v)=>{var y=r.map(h);return Xe(y)?{coordinate:y+p,value:h,index:v,offset:p}:null}).filter(Ir):r.domain().map((h,v)=>{var y=r.map(h);return Xe(y)?{coordinate:y+p,value:l?l[h]:h,index:v,offset:p}:null}).filter(Ir)}},Ri=ae([lt,Wc,Um,eu,Nb,_b,sr],p7),Li=ae(Or,Um,(e,t)=>{if(!(e==null||t==null))return Rf(Rf({},e),{},{scale:t})}),h7=ae([Or,eo,yb,tD],bb);ae((e,t,r)=>hb(e,r),h7,(e,t)=>{if(!(e==null||t==null))return Rf(Rf({},e),{},{scale:t})});var v7=ae([lt,hm,vm],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),cD=e=>e.options.defaultTooltipEventType,uD=e=>e.options.validateTooltipEventTypes;function dD(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function Sb(e,t){var r=cD(e),a=uD(e);return dD(t,r,a)}function g7(e){return ze(t=>Sb(t,e))}var fD=(e,t)=>{var r,a=Number(t);if(!(ra(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},x7=e=>e.tooltip.settings,Ei={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},y7={itemInteraction:{click:Ei,hover:Ei},axisInteraction:{click:Ei,hover:Ei},keyboardInteraction:Ei,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},mD=Fr({name:"tooltip",initialState:y7,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:St()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:a}=t.payload,l=Pn(e).tooltipItemPayloads.indexOf(r);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:St()},removeTooltipEntrySettings:{reducer(e,t){var r=Pn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:St()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:b7,replaceTooltipEntrySettings:j7,removeTooltipEntrySettings:N7,setTooltipSettingsState:_7,setActiveMouseOverItemIndex:pD,mouseLeaveItem:S7,mouseLeaveChart:hD,setActiveClickItemIndex:w7,setMouseOverAxisIndex:vD,setMouseClickAxisIndex:C7,setSyncInteraction:Qx,setKeyboardInteraction:Vx}=mD.actions,A7=mD.reducer;function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function kd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(a){E7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function E7(e,t,r){return(t=z7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z7(e){var t=O7(e,"string");return typeof t=="symbol"?t:t+""}function O7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D7(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function M7(e){return e.index!=null}var gD=(e,t,r,a)=>{if(t==null)return Ei;var l=D7(e,t,r);if(l==null)return Ei;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(M7(l)){if(o)return kd(kd({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return kd(kd({},Ei),{},{coordinate:l.coordinate})};function k7(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function P7(e,t){var r=k7(e),a=t[0],l=t[1];if(r===void 0)return!1;var o=Math.min(a,l),u=Math.max(a,l);return r>=o&&r<=u}function T7(e,t,r){if(r==null||t==null)return!0;var a=Ut(e,t);return a==null||!$a(r)?!0:P7(a,r)}var wb=(e,t,r,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!Xe(o))return l;var u=0,d=1/0;t.length>0&&(d=t.length-1);var m=Math.max(u,Math.min(o,d)),p=t[m];return p==null||T7(p,r,a)?String(m):null},xD=(e,t,r,a,l,o,u)=>{if(o!=null){var d=u[0],m=d?.getPosition(o);if(m!=null)return m;var p=l?.[Number(o)];if(p)return r==="horizontal"?{x:p.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:p.coordinate}}},yD=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(r==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(u=>{var d;return((d=u.settings)===null||d===void 0?void 0:d.graphicalItemId)===l})},bD=e=>e.options.tooltipPayloadSearcher,to=e=>e.tooltip;function PC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function TC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(r),!0).forEach(function(a){q7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function q7(e,t,r){return(t=R7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7(e){var t=L7(e,"string");return typeof t=="symbol"?t:t+""}function L7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I7(e,t){return e??t}var jD=(e,t,r,a,l,o,u)=>{if(!(t==null||o==null)){var{chartData:d,computedData:m,dataStartIndex:p,dataEndIndex:h}=r,v=[];return e.reduce((y,x)=>{var _,{dataDefinedOnItem:N,settings:S}=x,C=I7(N,d),z=Array.isArray(C)?XE(C,p,h):C,w=(_=S?.dataKey)!==null&&_!==void 0?_:a,E=S?.nameKey,O;if(a&&Array.isArray(z)&&!Array.isArray(z[0])&&u==="axis"?O=iE(z,a,l):O=o(z,t,m,E),Array.isArray(O))O.forEach(P=>{var q=TC(TC({},S),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});y.push(PS({tooltipEntrySettings:q,dataKey:P.dataKey,payload:P.payload,value:Ut(P.payload,P.dataKey),name:P.name}))});else{var M;y.push(PS({tooltipEntrySettings:S,dataKey:w,payload:O,value:Ut(O,w),name:(M=Ut(O,E))!==null&&M!==void 0?M:S?.name}))}return y},v)}},Cb=ae([Xt,zO,ob],WO),$7=ae([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),B7=ae([lr,Zl],OO),ro=ae([$7,Xt,B7],DO,{memoizeOptions:{resultEqualityCheck:Im}}),U7=ae([ro],e=>e.filter(Rm)),F7=ae([ro],PO,{memoizeOptions:{resultEqualityCheck:Im}}),no=ae([F7,Ya],TO),G7=ae([U7,Ya,Xt],CO),Ab=ae([no,Xt,ro],qO),ND=ae([Xt],gb),H7=ae([Xt],e=>e.allowDataOverflow),_D=ae([ND,H7],sO),Q7=ae([ro],e=>e.filter(Rm)),V7=ae([G7,Q7,Mm,yO],LO),Y7=ae([V7,Ya,lr,_D],IO),K7=ae([ro],kO),X7=ae([no,Xt,K7,xb,lr],UO,{memoizeOptions:{resultEqualityCheck:Lm}}),W7=ae([FO,lr,Zl],Jl),Z7=ae([W7,lr],QO),J7=ae([GO,lr,Zl],Jl),e9=ae([J7,lr],VO),t9=ae([HO,lr,Zl],Jl),r9=ae([t9,lr],YO),n9=ae([Z7,r9,e9],Lf),a9=ae([Xt,ND,_D,Y7,X7,n9,lt,lr],KO),tu=ae([Xt,lt,no,Ab,Mm,lr,a9],XO),i9=ae([tu,Xt,Cb],ZO),s9=ae([Xt,tu,i9,lr],JO),SD=e=>{var t=lr(e),r=Zl(e),a=!1;return eu(e,t,r,a)},wD=ae([Xt,SD],km),CD=ae([Xt,Cb,s9,wD],bb),l9=ae([lt,Ab,Xt,lr],sD),o9=ae([lt,Ab,Xt,lr],lD),c9=(e,t,r,a,l,o,u,d)=>{if(t){var{type:m}=t,p=Ga(e,d);if(a){var h=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,v=m==="category"&&a.bandwidth?a.bandwidth()/h:0;return v=d==="angleAxis"&&l!=null&&l?.length>=2?Lr(l[0]-l[1])*2*v:v,p&&u?u.map((y,x)=>{var _=a.map(y);return Xe(_)?{coordinate:_+v,value:y,index:x,offset:v}:null}).filter(Ir):a.domain().map((y,x)=>{var _=a.map(y);return Xe(_)?{coordinate:_+v,value:o?o[y]:y,index:x,offset:v}:null}).filter(Ir)}}},Wa=ae([lt,Xt,Cb,CD,SD,l9,o9,lr],c9),Eb=ae([cD,uD,x7],(e,t,r)=>dD(r.shared,e,t)),AD=e=>e.tooltip.settings.trigger,zb=e=>e.tooltip.settings.defaultIndex,ru=ae([to,Eb,AD,zb],gD),Es=ae([ru,no,Jc,tu],wb),ED=ae([Wa,Es],fD),zD=ae([ru],e=>{if(e)return e.dataKey});ae([ru],e=>{if(e)return e.graphicalItemId});var OD=ae([to,Eb,AD,zb],yD),u9=ae([Ha,Qa,lt,ar,Wa,zb,OD],xD),d9=ae([ru,u9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),f9=ae([ru],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),m9=ae([OD,Es,Ya,Jc,ED,bD,Eb],jD),p9=ae([m9],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function RC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(a){h9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function h9(e,t,r){return(t=v9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v9(e){var t=g9(e,"string");return typeof t=="symbol"?t:t+""}function g9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x9=()=>ze(Xt),y9=()=>{var e=x9(),t=ze(Wa),r=ze(CD);return Gl(!e||!r?void 0:RC(RC({},e),{},{scale:r}),t)};function LC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(r),!0).forEach(function(a){b9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function b9(e,t,r){return(t=j9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j9(e){var t=N9(e,"string");return typeof t=="symbol"?t:t+""}function N9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _9=(e,t,r,a)=>{var l=t.find(o=>o&&o.index===r);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},S9=(e,t,r,a)=>{var l=t.find(p=>p&&p.index===r);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=a;return zl(zl(zl({},a),vr(a.cx,a.cy,u,o)),{},{angle:o,radius:u})}var d=l.coordinate,{angle:m}=a;return zl(zl(zl({},a),vr(a.cx,a.cy,d,m)),{},{angle:m,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function w9(e,t){var{chartX:r,chartY:a}=e;return r>=t.left&&r<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var DD=(e,t,r,a,l)=>{var o,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var d=0;d<u;d++){var m,p,h,v,y,x=d>0?(m=r[d-1])===null||m===void 0?void 0:m.coordinate:(p=r[u-1])===null||p===void 0?void 0:p.coordinate,_=(h=r[d])===null||h===void 0?void 0:h.coordinate,N=d>=u-1?(v=r[0])===null||v===void 0?void 0:v.coordinate:(y=r[d+1])===null||y===void 0?void 0:y.coordinate,S=void 0;if(!(x==null||_==null||N==null))if(Lr(_-x)!==Lr(N-_)){var C=[];if(Lr(N-_)===Lr(l[1]-l[0])){S=N;var z=_+l[1]-l[0];C[0]=Math.min(z,(z+x)/2),C[1]=Math.max(z,(z+x)/2)}else{S=x;var w=N+l[1]-l[0];C[0]=Math.min(_,(w+_)/2),C[1]=Math.max(_,(w+_)/2)}var E=[Math.min(_,(S+_)/2),Math.max(_,(S+_)/2)];if(e>E[0]&&e<=E[1]||e>=C[0]&&e<=C[1]){var O;return(O=r[d])===null||O===void 0?void 0:O.index}}else{var M=Math.min(x,N),P=Math.max(x,N);if(e>(M+_)/2&&e<=(P+_)/2){var q;return(q=r[d])===null||q===void 0?void 0:q.index}}}else if(t)for(var L=0;L<u;L++){var Y=t[L];if(Y!=null){var W=t[L+1],B=t[L-1];if(L===0&&W!=null&&e<=(Y.coordinate+W.coordinate)/2||L===u-1&&B!=null&&e>(Y.coordinate+B.coordinate)/2||L>0&&L<u-1&&B!=null&&W!=null&&e>(Y.coordinate+B.coordinate)/2&&e<=(Y.coordinate+W.coordinate)/2)return Y.index}}return-1},C9=()=>ze(ob),Ob=(e,t)=>t,MD=(e,t,r)=>r,Db=(e,t,r,a)=>a,A9=ae(Wa,e=>am(e,t=>t.coordinate)),Mb=ae([to,Ob,MD,Db],gD),kb=ae([Mb,no,Jc,tu],wb),E9=(e,t,r)=>{if(t!=null){var a=to(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},kD=ae([to,Ob,MD,Db],yD),If=ae([Ha,Qa,lt,ar,Wa,Db,kD],xD),z9=ae([Mb,If],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),PD=ae([Wa,kb],fD),O9=ae([kD,kb,Ya,Jc,PD,bD,Ob],jD),D9=ae([Mb,kb],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),M9=(e,t,r,a,l,o,u)=>{if(!(!e||!r||!a||!l)&&w9(e,u)){var d=o6(e,t),m=DD(d,o,l,r,a),p=_9(t,l,m,e);return{activeIndex:String(m),activeCoordinate:p}}},k9=(e,t,r,a,l,o,u)=>{if(!(!e||!a||!l||!o||!r)){var d=vI(e,r);if(d){var m=c6(d,t),p=DD(m,u,o,a,l),h=S9(t,o,p,d);return{activeIndex:String(p),activeCoordinate:h}}}},P9=(e,t,r,a,l,o,u,d)=>{if(!(!e||!t||!a||!l||!o))return t==="horizontal"||t==="vertical"?M9(e,t,a,l,o,u,d):k9(e,t,r,a,l,o,u)},T9=ae(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var a=e[t];if(a!=null)return r?a.panoramaElement:a.element}}),q9=ae(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(rr)),r=Array.from(new Set(t));return r.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:vB}});function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function $C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(a){R9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function R9(e,t,r){return(t=L9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L9(e){var t=I9(e,"string");return typeof t=="symbol"?t:t+""}function I9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $9={},B9={zIndexMap:Object.values(rr).reduce((e,t)=>$C($C({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),$9)},U9=new Set(Object.values(rr));function F9(e){return U9.has(e)}var TD=Fr({name:"zIndex",initialState:B9,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:St()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!F9(r)&&delete e.zIndexMap[r])},prepare:St()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:a,isPanorama:l}=t.payload;e.zIndexMap[r]?l?e.zIndexMap[r].panoramaElement=a:e.zIndexMap[r].element=a:e.zIndexMap[r]={consumers:0,element:l?void 0:a,panoramaElement:l?a:void 0}},prepare:St()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:St()}}}),{registerZIndexPortal:G9,unregisterZIndexPortal:H9,registerZIndexPortalElement:Q9,unregisterZIndexPortalElement:V9}=TD.actions,Y9=TD.reducer;function Cn(e){var{zIndex:t,children:r}=e,a=B6(),l=a&&t!==void 0&&t!==0,o=Nr(),u=qt();b.useLayoutEffect(()=>l?(u(G9({zIndex:t})),()=>{u(H9({zIndex:t}))}):Ms,[u,t,l]);var d=ze(m=>T9(m,t,o));return l?d?gA.createPortal(r,d):null:r}function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yx.apply(null,arguments)}function BC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Pd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(r),!0).forEach(function(a){K9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function K9(e,t,r){return(t=X9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X9(e){var t=W9(e,"string");return typeof t=="symbol"?t:t+""}function W9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z9(e){var{cursor:t,cursorComp:r,cursorProps:a}=e;return b.isValidElement(t)?b.cloneElement(t,a):b.createElement(r,a)}function J9(e){var t,{coordinate:r,payload:a,index:l,offset:o,tooltipAxisBandSize:u,layout:d,cursor:m,tooltipEventType:p,chartName:h}=e,v=r,y=a,x=l;if(!m||!v||h!=="ScatterChart"&&p!=="axis")return null;var _,N,S;if(h==="ScatterChart")_=v,N=zL,S=rr.cursorLine;else if(h==="BarChart")_=OL(d,v,o,u),N=jz,S=rr.cursorRectangle;else if(d==="radial"&&oE(v)){var{cx:C,cy:z,radius:w,startAngle:E,endAngle:O}=Nz(v);_={cx:C,cy:z,startAngle:E,endAngle:O,innerRadius:w,outerRadius:w},N=Sz,S=rr.cursorLine}else _={points:bI(d,v,o)},N=vz,S=rr.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,P=Pd(Pd(Pd(Pd({stroke:"#ccc",pointerEvents:"none"},o),_),$c(m)),{},{payload:y,payloadIndex:x,className:mt("recharts-tooltip-cursor",M)});return b.createElement(Cn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},b.createElement(Z9,{cursor:m,cursorComp:N,cursorProps:P}))}function eU(e){var t=y9(),r=nz(),a=ks(),l=C9();return t==null||r==null||a==null||l==null?null:b.createElement(J9,Yx({},e,{offset:r,layout:a,tooltipAxisBandSize:t,chartName:l}))}var qD=b.createContext(null),tU=()=>b.useContext(qD),Ig={exports:{}},UC;function rU(){return UC||(UC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function l(m,p,h){this.fn=m,this.context=p,this.once=h||!1}function o(m,p,h,v,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new l(h,v||m,y),_=r?r+p:p;return m._events[_]?m._events[_].fn?m._events[_]=[m._events[_],x]:m._events[_].push(x):(m._events[_]=x,m._eventsCount++),m}function u(m,p){--m._eventsCount===0?m._events=new a:delete m._events[p]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],h,v;if(this._eventsCount===0)return p;for(v in h=this._events)t.call(h,v)&&p.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},d.prototype.listeners=function(p){var h=r?r+p:p,v=this._events[h];if(!v)return[];if(v.fn)return[v.fn];for(var y=0,x=v.length,_=new Array(x);y<x;y++)_[y]=v[y].fn;return _},d.prototype.listenerCount=function(p){var h=r?r+p:p,v=this._events[h];return v?v.fn?1:v.length:0},d.prototype.emit=function(p,h,v,y,x,_){var N=r?r+p:p;if(!this._events[N])return!1;var S=this._events[N],C=arguments.length,z,w;if(S.fn){switch(S.once&&this.removeListener(p,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,v),!0;case 4:return S.fn.call(S.context,h,v,y),!0;case 5:return S.fn.call(S.context,h,v,y,x),!0;case 6:return S.fn.call(S.context,h,v,y,x,_),!0}for(w=1,z=new Array(C-1);w<C;w++)z[w-1]=arguments[w];S.fn.apply(S.context,z)}else{var E=S.length,O;for(w=0;w<E;w++)switch(S[w].once&&this.removeListener(p,S[w].fn,void 0,!0),C){case 1:S[w].fn.call(S[w].context);break;case 2:S[w].fn.call(S[w].context,h);break;case 3:S[w].fn.call(S[w].context,h,v);break;case 4:S[w].fn.call(S[w].context,h,v,y);break;default:if(!z)for(O=1,z=new Array(C-1);O<C;O++)z[O-1]=arguments[O];S[w].fn.apply(S[w].context,z)}}return!0},d.prototype.on=function(p,h,v){return o(this,p,h,v,!1)},d.prototype.once=function(p,h,v){return o(this,p,h,v,!0)},d.prototype.removeListener=function(p,h,v,y){var x=r?r+p:p;if(!this._events[x])return this;if(!h)return u(this,x),this;var _=this._events[x];if(_.fn)_.fn===h&&(!y||_.once)&&(!v||_.context===v)&&u(this,x);else{for(var N=0,S=[],C=_.length;N<C;N++)(_[N].fn!==h||y&&!_[N].once||v&&_[N].context!==v)&&S.push(_[N]);S.length?this._events[x]=S.length===1?S[0]:S:u(this,x)}return this},d.prototype.removeAllListeners=function(p){var h;return p?(h=r?r+p:p,this._events[h]&&u(this,h)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d})(Ig)),Ig.exports}var nU=rU();const aU=Fa(nU);var qc=new aU,Kx="recharts.syncEvent.tooltip",FC="recharts.syncEvent.brush",RD=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!ra(r))return e[r]}},iU={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},LD=Fr({name:"options",initialState:iU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),sU=LD.reducer,{createEventEmitter:lU}=LD.actions;function oU(e){return e.tooltip.syncInteraction}var cU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ID=Fr({name:"chartData",initialState:cU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:GC,setDataStartEndIndexes:uU,setComputedData:GW}=ID.actions,dU=ID.reducer,fU=["x","y"];function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(a){mU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mU(e,t,r){return(t=pU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pU(e){var t=hU(e,"string");return typeof t=="symbol"?t:t+""}function hU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vU(e,t){if(e==null)return{};var r,a,l=gU(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function gU(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function xU(){var e=ze(cb),t=ze(ub),r=qt(),a=ze(bO),l=ze(Wa),o=ks(),u=ym(),d=ze(m=>m.rootProps.className);b.useEffect(()=>{if(e==null)return Ms;var m=(p,h,v)=>{if(t!==v&&e===p){if(a==="index"){var y;if(u&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate&&h.payload.sourceViewBox){var x=h.payload.coordinate,{x:_,y:N}=x,S=vU(x,fU),{x:C,y:z,width:w,height:E}=h.payload.sourceViewBox,O=Ol(Ol({},S),{},{x:u.x+(w?(_-C)/w:0)*u.width,y:u.y+(E?(N-z)/E:0)*u.height});r(Ol(Ol({},h),{},{payload:Ol(Ol({},h.payload),{},{coordinate:O})}))}else r(h);return}if(l!=null){var M;if(typeof a=="function"){var P={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},q=a(l,P);M=l[q]}else a==="value"&&(M=l.find(R=>String(R.value)===h.payload.label));var{coordinate:L}=h.payload;if(M==null||h.payload.active===!1||L==null||u==null){r(Qx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Y,y:W}=L,B=Math.min(Y,u.x+u.width),Q=Math.min(W,u.y+u.height),k={x:o==="horizontal"?M.coordinate:B,y:o==="horizontal"?Q:M.coordinate},T=Qx({active:h.payload.active,coordinate:k,dataKey:h.payload.dataKey,index:String(M.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});r(T)}}};return qc.on(Kx,m),()=>{qc.off(Kx,m)}},[d,r,t,e,a,l,o,u])}function yU(){var e=ze(cb),t=ze(ub),r=qt();b.useEffect(()=>{if(e==null)return Ms;var a=(l,o,u)=>{t!==u&&e===l&&r(uU(o))};return qc.on(FC,a),()=>{qc.off(FC,a)}},[r,t,e])}function bU(){var e=qt();b.useEffect(()=>{e(lU())},[e]),xU(),yU()}function jU(e,t,r,a,l,o){var u=ze(x=>E9(x,e,t)),d=ze(ub),m=ze(cb),p=ze(bO),h=ze(oU),v=h?.active,y=ym();b.useEffect(()=>{if(!v&&m!=null&&d!=null){var x=Qx({active:o,coordinate:r,dataKey:u,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:y,graphicalItemId:void 0});qc.emit(Kx,m,x,d)}},[v,r,u,l,a,d,m,p,o,y])}function QC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function VC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(r),!0).forEach(function(a){NU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function NU(e,t,r){return(t=_U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _U(e){var t=SU(e,"string");return typeof t=="symbol"?t:t+""}function SU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wU(e){return e.dataKey}function CU(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(oL,t)}var YC=[],AU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function KC(e){var t,r,a=zr(e,AU),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:m,filterNull:p,isAnimationActive:h,offset:v,payloadUniqBy:y,position:x,reverseDirection:_,useTranslate3d:N,wrapperStyle:S,cursor:C,shared:z,trigger:w,defaultIndex:E,portal:O,axisId:M}=a,P=qt(),q=typeof E=="number"?String(E):E;b.useEffect(()=>{P(_7({shared:z,trigger:w,axisId:M,active:l,defaultIndex:q}))},[P,z,w,M,l,q]);var L=ym(),Y=hz(),W=g7(z),{activeIndex:B,isActive:Q}=(t=ze(de=>D9(de,W,w,q)))!==null&&t!==void 0?t:{},k=ze(de=>O9(de,W,w,q)),T=ze(de=>PD(de,W,w,q)),R=ze(de=>z9(de,W,w,q)),J=k,H=tU(),ve=(r=l??Q)!==null&&r!==void 0?r:!1,[U,ge]=V5([J,ve]),re=W==="axis"?T:void 0;jU(W,w,R,re,B,ve);var me=O??H;if(me==null||L==null||W==null)return null;var xe=J??YC;ve||(xe=YC),p&&xe.length&&(xe=y5(xe.filter(de=>de.value!=null&&(de.hide!==!0||a.includeHidden)),y,wU));var he=xe.length>0,F=b.createElement(hL,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:h,active:ve,coordinate:R,hasPayload:he,offset:v,position:x,reverseDirection:_,useTranslate3d:N,viewBox:L,wrapperStyle:S,lastBoundingBox:U,innerRef:ge,hasPortalFromProps:!!O},CU(m,VC(VC({},a),{},{payload:xe,label:re,active:ve,activeIndex:B,coordinate:R,accessibilityLayer:Y})));return b.createElement(b.Fragment,null,gA.createPortal(F,me),ve&&b.createElement(eU,{cursor:C,tooltipEventType:W,coordinate:R,payload:xe,index:B}))}var Pb=e=>null;Pb.displayName="Cell";function EU(e,t,r){return(t=zU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class DU{constructor(t){EU(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function MU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(r),!0).forEach(function(a){kU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kU(e,t,r){return(t=PU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PU(e){var t=TU(e,"string");return typeof t=="symbol"?t:t+""}function TU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qU={cacheSize:2e3,enableCache:!0},$D=MU({},qU),WC=new DU($D.cacheSize),RU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZC="recharts_measurement_span";function LU(e,t){var r=t.fontSize||"",a=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",u=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(d)}var JC=(e,t)=>{try{var r=document.getElementById(ZC);r||(r=document.createElement("span"),r.setAttribute("id",ZC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,RU,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},xc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_m.isSsr)return{width:0,height:0};if(!$D.enableCache)return JC(t,r);var a=LU(t,r),l=WC.get(a);if(l)return l;var o=JC(t,r);return WC.set(a,o),o},BD;function IU(e,t,r){return(t=$U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $U(e){var t=BU(e,"string");return typeof t=="symbol"?t:t+""}function BU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,FU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,GU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HU=["cm","mm","pt","pc","in","Q","px"];function QU(e){return HU.includes(e)}var Tl="NaN";function VU(e,t){return e*GU[t]}class hr{static parse(t){var r,[,a,l]=(r=FU.exec(t))!==null&&r!==void 0?r:[];return a==null?hr.NaN:new hr(parseFloat(a),l??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ra(t)&&(this.unit=""),r!==""&&!UU.test(r)&&(this.num=NaN,this.unit=""),QU(r)&&(this.num=VU(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ra(this.num)}}BD=hr;IU(hr,"NaN",new BD(NaN,""));function UD(e){if(e==null||e.includes(Tl))return Tl;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,l,o]=(r=e2.exec(t))!==null&&r!==void 0?r:[],u=hr.parse(a??""),d=hr.parse(o??""),m=l==="*"?u.multiply(d):u.divide(d);if(m.isNaN())return Tl;t=t.replace(e2,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,h,v,y]=(p=t2.exec(t))!==null&&p!==void 0?p:[],x=hr.parse(h??""),_=hr.parse(y??""),N=v==="+"?x.add(_):x.subtract(_);if(N.isNaN())return Tl;t=t.replace(t2,N.toString())}return t}var r2=/\(([^()]*)\)/;function YU(e){for(var t=e,r;(r=r2.exec(t))!=null;){var[,a]=r;t=t.replace(r2,UD(a))}return t}function KU(e){var t=e.replace(/\s+/g,"");return t=YU(t),t=UD(t),t}function XU(e){try{return KU(e)}catch{return Tl}}function $g(e){var t=XU(e.slice(5,-1));return t===Tl?"":t}var WU=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],ZU=["dx","dy","angle","className","breakAll"];function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xx.apply(null,arguments)}function n2(e,t){if(e==null)return{};var r,a,l=JU(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function JU(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var FD=/[ \f\n\r\t\v\u2028\u2029]+/,GD=e=>{var{children:t,breakAll:r,style:a}=e;try{var l=[];At(t)||(r?l=t.toString().split(""):l=t.toString().split(FD));var o=l.map(d=>({word:d,width:xc(d,a).width})),u=r?0:xc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function eF(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var HD=(e,t,r,a)=>e.reduce((l,o)=>{var{word:u,width:d}=o,m=l[l.length-1];if(m&&d!=null&&(t==null||a||m.width+d+r<Number(t)))m.words.push(u),m.width+=d+r;else{var p={words:[u],width:d};l.push(p)}return l},[]),QD=e=>e.reduce((t,r)=>t.width>r.width?t:r),tF="",a2=(e,t,r,a,l,o,u,d)=>{var m=e.slice(0,t),p=GD({breakAll:r,style:a,children:m+tF});if(!p)return[!1,[]];var h=HD(p.wordsWithComputedWidth,o,u,d),v=h.length>l||QD(h).width>Number(o);return[v,h]},rF=(e,t,r,a,l)=>{var{maxLines:o,children:u,style:d,breakAll:m}=e,p=Se(o),h=String(u),v=HD(t,a,r,l);if(!p||l)return v;var y=v.length>o||QD(v).width>Number(a);if(!y)return v;for(var x=0,_=h.length-1,N=0,S;x<=_&&N<=h.length-1;){var C=Math.floor((x+_)/2),z=C-1,[w,E]=a2(h,z,m,d,o,a,r,l),[O]=a2(h,C,m,d,o,a,r,l);if(!w&&!O&&(x=C+1),w&&O&&(_=C-1),!w&&O){S=E;break}N++}return S||v},i2=e=>{var t=At(e)?[]:e.toString().split(FD);return[{words:t,width:void 0}]},nF=e=>{var{width:t,scaleToFit:r,children:a,style:l,breakAll:o,maxLines:u}=e;if((t||r)&&!_m.isSsr){var d,m,p=GD({breakAll:o,children:a,style:l});if(p){var{wordsWithComputedWidth:h,spaceWidth:v}=p;d=h,m=v}else return i2(a);return rF({breakAll:o,children:a,maxLines:u,style:l},d,m,t,!!r)}return i2(a)},VD="#808080",aF={angle:0,breakAll:!1,capHeight:"0.71em",fill:VD,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Tb=b.forwardRef((e,t)=>{var r=zr(e,aF),{x:a,y:l,lineHeight:o,capHeight:u,fill:d,scaleToFit:m,textAnchor:p,verticalAnchor:h}=r,v=n2(r,WU),y=b.useMemo(()=>nF({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:x,dy:_,angle:N,className:S,breakAll:C}=v,z=n2(v,ZU);if(!na(a)||!na(l)||y.length===0)return null;var w=Number(a)+(Se(x)?x:0),E=Number(l)+(Se(_)?_:0);if(!Xe(w)||!Xe(E))return null;var O;switch(h){case"start":O=$g("calc(".concat(u,")"));break;case"middle":O=$g("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:O=$g("calc(".concat(y.length-1," * -").concat(o,")"));break}var M=[],P=y[0];if(m&&P!=null){var q=P.width,{width:L}=v;M.push("scale(".concat(Se(L)&&Se(q)?L/q:1,")"))}return N&&M.push("rotate(".concat(N,", ").concat(w,", ").concat(E,")")),M.length&&(z.transform=M.join(" ")),b.createElement("text",Xx({},Ar(z),{ref:t,x:w,y:E,className:mt("recharts-text",S),textAnchor:p,fill:d.includes("url")?VD:d}),y.map((Y,W)=>{var B=Y.words.join(C?"":" ");return b.createElement("tspan",{x:w,dy:W===0?O:o,key:"".concat(B,"-").concat(W)},B)}))});Tb.displayName="Text";function s2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s2(Object(r),!0).forEach(function(a){iF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iF(e,t,r){return(t=sF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sF(e){var t=lF(e,"string");return typeof t=="symbol"?t:t+""}function lF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oF=e=>{var{viewBox:t,position:r,offset:a=0,parentViewBox:l}=e,{x:o,y:u,height:d,upperWidth:m,lowerWidth:p}=ky(t),h=o,v=o+(m-p)/2,y=(h+v)/2,x=(m+p)/2,_=h+m/2,N=d>=0?1:-1,S=N*a,C=N>0?"end":"start",z=N>0?"start":"end",w=m>=0?1:-1,E=w*a,O=w>0?"end":"start",M=w>0?"start":"end",P=l;if(r==="top"){var q={x:h+m/2,y:u-S,horizontalAnchor:"middle",verticalAnchor:C};return P&&(q.height=Math.max(u-P.y,0),q.width=m),q}if(r==="bottom"){var L={x:v+p/2,y:u+d+S,horizontalAnchor:"middle",verticalAnchor:z};return P&&(L.height=Math.max(P.y+P.height-(u+d),0),L.width=p),L}if(r==="left"){var Y={x:y-E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"};return P&&(Y.width=Math.max(Y.x-P.x,0),Y.height=d),Y}if(r==="right"){var W={x:y+x+E,y:u+d/2,horizontalAnchor:M,verticalAnchor:"middle"};return P&&(W.width=Math.max(P.x+P.width-W.x,0),W.height=d),W}var B=P?{width:x,height:d}:{};return r==="insideLeft"?Xn({x:y+E,y:u+d/2,horizontalAnchor:M,verticalAnchor:"middle"},B):r==="insideRight"?Xn({x:y+x-E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"},B):r==="insideTop"?Xn({x:h+m/2,y:u+S,horizontalAnchor:"middle",verticalAnchor:z},B):r==="insideBottom"?Xn({x:v+p/2,y:u+d-S,horizontalAnchor:"middle",verticalAnchor:C},B):r==="insideTopLeft"?Xn({x:h+E,y:u+S,horizontalAnchor:M,verticalAnchor:z},B):r==="insideTopRight"?Xn({x:h+m-E,y:u+S,horizontalAnchor:O,verticalAnchor:z},B):r==="insideBottomLeft"?Xn({x:v+E,y:u+d-S,horizontalAnchor:M,verticalAnchor:C},B):r==="insideBottomRight"?Xn({x:v+p-E,y:u+d-S,horizontalAnchor:O,verticalAnchor:C},B):r&&typeof r=="object"&&(Se(r.x)||_s(r.x))&&(Se(r.y)||_s(r.y))?Xn({x:o+qn(r.x,x),y:u+qn(r.y,d),horizontalAnchor:"end",verticalAnchor:"end"},B):Xn({x:_,y:u+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},B)},cF=["labelRef"],uF=["content"];function l2(e,t){if(e==null)return{};var r,a,l=dF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function dF(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function hc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(a){fF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fF(e,t,r){return(t=mF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mF(e){var t=pF(e,"string");return typeof t=="symbol"?t:t+""}function pF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ea.apply(null,arguments)}var YD=b.createContext(null),hF=e=>{var{x:t,y:r,upperWidth:a,lowerWidth:l,width:o,height:u,children:d}=e,m=b.useMemo(()=>({x:t,y:r,upperWidth:a,lowerWidth:l,width:o,height:u}),[t,r,a,l,o,u]);return b.createElement(YD.Provider,{value:m},d)},KD=()=>{var e=b.useContext(YD),t=ym();return e||(t?ky(t):void 0)},vF=b.createContext(null),gF=()=>{var e=b.useContext(vF),t=ze(wO);return e||t},xF=e=>{var{value:t,formatter:r}=e,a=At(e.children)?t:e.children;return typeof r=="function"?r(a):a},qb=e=>e!=null&&typeof e=="function",yF=(e,t)=>{var r=Lr(t-e),a=Math.min(Math.abs(t-e),360);return r*a},bF=(e,t,r,a,l)=>{var{offset:o,className:u}=e,{cx:d,cy:m,innerRadius:p,outerRadius:h,startAngle:v,endAngle:y,clockWise:x}=l,_=(p+h)/2,N=yF(v,y),S=N>=0?1:-1,C,z;switch(t){case"insideStart":C=v+S*o,z=x;break;case"insideEnd":C=y-S*o,z=!x;break;case"end":C=y+S*o,z=x;break;default:throw new Error("Unsupported position ".concat(t))}z=N<=0?z:!z;var w=vr(d,m,_,C),E=vr(d,m,_,C+(z?1:-1)*359),O="M".concat(w.x,",").concat(w.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(z?0:1,`,
    `).concat(E.x,",").concat(E.y),M=At(e.id)?_c("recharts-radial-line-"):e.id;return b.createElement("text",Ea({},a,{dominantBaseline:"central",className:mt("recharts-radial-bar-label",u)}),b.createElement("defs",null,b.createElement("path",{id:M,d:O})),b.createElement("textPath",{xlinkHref:"#".concat(M)},r))},jF=(e,t,r)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:u,startAngle:d,endAngle:m}=e,p=(d+m)/2;if(r==="outside"){var{x:h,y:v}=vr(a,l,u+t,p);return{x:h,y:v,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(o+u)/2,{x,y:_}=vr(a,l,y,p);return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Vd=e=>e!=null&&"cx"in e&&Se(e.cx),NF={angle:0,offset:5,zIndex:rr.label,position:"middle",textBreakAll:!1};function _F(e){if(!Vd(e))return e;var{cx:t,cy:r,outerRadius:a}=e,l=a*2;return{x:t-a,y:r-a,width:l,upperWidth:l,lowerWidth:l,height:l}}function Ai(e){var t=zr(e,NF),{viewBox:r,parentViewBox:a,position:l,value:o,children:u,content:d,className:m="",textBreakAll:p,labelRef:h}=t,v=gF(),y=KD(),x=l==="center"?y:v??y,_,N,S;r==null?_=x:Vd(r)?_=r:_=ky(r);var C=_F(_);if(!_||At(o)&&At(u)&&!b.isValidElement(d)&&typeof d!="function")return null;var z=hc(hc({},t),{},{viewBox:_});if(b.isValidElement(d)){var{labelRef:w}=z,E=l2(z,cF);return b.cloneElement(d,E)}if(typeof d=="function"){var{content:O}=z,M=l2(z,uF);if(N=b.createElement(d,M),b.isValidElement(N))return N}else N=xF(t);var P=Ar(t);if(Vd(_)){if(l==="insideStart"||l==="insideEnd"||l==="end")return bF(t,l,N,P,_);S=jF(_,t.offset,t.position)}else{if(!C)return null;var q=oF({viewBox:C,position:l,offset:t.offset,parentViewBox:Vd(a)?void 0:a});S=hc(hc({x:q.x,y:q.y,textAnchor:q.horizontalAnchor,verticalAnchor:q.verticalAnchor},q.width!==void 0?{width:q.width}:{}),q.height!==void 0?{height:q.height}:{})}return b.createElement(Cn,{zIndex:t.zIndex},b.createElement(Tb,Ea({ref:h,className:mt("recharts-label",m)},P,S,{textAnchor:eF(P.textAnchor)?P.textAnchor:S.textAnchor,breakAll:p}),N))}Ai.displayName="Label";var SF=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?b.createElement(Ai,Ea({key:"label-implicit"},a)):na(e)?b.createElement(Ai,Ea({key:"label-implicit",value:e},a)):b.isValidElement(e)?e.type===Ai?b.cloneElement(e,hc({key:"label-implicit"},a)):b.createElement(Ai,Ea({key:"label-implicit",content:e},a)):qb(e)?b.createElement(Ai,Ea({key:"label-implicit",content:e},a)):e&&typeof e=="object"?b.createElement(Ai,Ea({},e,{key:"label-implicit"},a)):null};function wF(e){var{label:t,labelRef:r}=e,a=KD();return SF(t,a,r)||null}var Bg={},Ug={},c2;function CF(){return c2||(c2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Ug)),Ug}var Fg={},u2;function AF(){return u2||(u2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Fg)),Fg}var d2;function EF(){return d2||(d2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CF(),r=AF(),a=Ny();function l(o){if(a.isArrayLike(o))return t.last(r.toArray(o))}e.last=l})(Bg)),Bg}var Gg,f2;function zF(){return f2||(f2=1,Gg=EF().last),Gg}var OF=zF();const DF=Fa(OF);var MF=["valueAccessor"],kF=["dataKey","clockWise","id","textBreakAll","zIndex"];function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$f.apply(null,arguments)}function m2(e,t){if(e==null)return{};var r,a,l=PF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function PF(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var TF=e=>Array.isArray(e.value)?DF(e.value):e.value,XD=b.createContext(void 0),WD=XD.Provider,ZD=b.createContext(void 0);ZD.Provider;function qF(){return b.useContext(XD)}function RF(){return b.useContext(ZD)}function Yd(e){var{valueAccessor:t=TF}=e,r=m2(e,MF),{dataKey:a,clockWise:l,id:o,textBreakAll:u,zIndex:d}=r,m=m2(r,kF),p=qF(),h=RF(),v=p||h;return!v||!v.length?null:b.createElement(Cn,{zIndex:d??rr.label},b.createElement(Nn,{className:"recharts-label-list"},v.map((y,x)=>{var _,N=At(a)?t(y,x):Ut(y.payload,a),S=At(o)?{}:{id:"".concat(o,"-").concat(x)};return b.createElement(Ai,$f({key:"label-".concat(x)},Ar(y),m,S,{fill:(_=r.fill)!==null&&_!==void 0?_:y.fill,parentViewBox:y.parentViewBox,value:N,textBreakAll:u,viewBox:y.viewBox,index:x,zIndex:0}))})))}Yd.displayName="LabelList";function JD(e){var{label:t}=e;return t?t===!0?b.createElement(Yd,{key:"labelList-implicit"}):b.isValidElement(t)||qb(t)?b.createElement(Yd,{key:"labelList-implicit",content:t}):typeof t=="object"?b.createElement(Yd,$f({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Wx.apply(null,arguments)}var eM=e=>{var{cx:t,cy:r,r:a,className:l}=e,o=mt("recharts-dot",l);return Se(t)&&Se(r)&&Se(a)?b.createElement("circle",Wx({},Tn(e),by(e),{className:o,cx:t,cy:r,r:a})):null},LF={radiusAxis:{},angleAxis:{}},tM=Fr({name:"polarAxis",initialState:LF,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:HW,removeRadiusAxis:QW,addAngleAxis:VW,removeAngleAxis:YW}=tM.actions,IF=tM.reducer;function $F(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Hg={exports:{}},dt={};var p2;function BF(){if(p2)return dt;p2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function _(N){if(typeof N=="object"&&N!==null){var S=N.$$typeof;switch(S){case e:switch(N=N.type,N){case r:case l:case a:case m:case p:case y:return N;default:switch(N=N&&N.$$typeof,N){case u:case d:case v:case h:return N;case o:return N;default:return S}}case t:return S}}}return dt.ContextConsumer=o,dt.ContextProvider=u,dt.Element=e,dt.ForwardRef=d,dt.Fragment=r,dt.Lazy=v,dt.Memo=h,dt.Portal=t,dt.Profiler=l,dt.StrictMode=a,dt.Suspense=m,dt.SuspenseList=p,dt.isContextConsumer=function(N){return _(N)===o},dt.isContextProvider=function(N){return _(N)===u},dt.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},dt.isForwardRef=function(N){return _(N)===d},dt.isFragment=function(N){return _(N)===r},dt.isLazy=function(N){return _(N)===v},dt.isMemo=function(N){return _(N)===h},dt.isPortal=function(N){return _(N)===t},dt.isProfiler=function(N){return _(N)===l},dt.isStrictMode=function(N){return _(N)===a},dt.isSuspense=function(N){return _(N)===m},dt.isSuspenseList=function(N){return _(N)===p},dt.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===l||N===a||N===m||N===p||typeof N=="object"&&N!==null&&(N.$$typeof===v||N.$$typeof===h||N.$$typeof===u||N.$$typeof===o||N.$$typeof===d||N.$$typeof===x||N.getModuleId!==void 0)},dt.typeOf=_,dt}var h2;function UF(){return h2||(h2=1,Hg.exports=BF()),Hg.exports}var FF=UF(),v2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",g2=null,Qg=null,rM=e=>{if(e===g2&&Array.isArray(Qg))return Qg;var t=[];return b.Children.forEach(e,r=>{At(r)||(FF.isFragment(r)?t=t.concat(rM(r.props.children)):t.push(r))}),Qg=t,g2=e,t};function GF(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(l=>v2(l)):a=[v2(t)],rM(e).forEach(l=>{var o=Ul(l,"type.displayName")||Ul(l,"type.name");o&&a.indexOf(o)!==-1&&r.push(l)}),r}var nM=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Vg={},x2;function HF(){return x2||(x2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${l}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t})(Vg)),Vg}var Yg,y2;function QF(){return y2||(y2=1,Yg=HF().isPlainObject),Yg}var VF=QF();const YF=Fa(VF);var b2,j2,N2,_2,S2;function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(a){KF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KF(e,t,r){return(t=XF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XF(e){var t=WF(e,"string");return typeof t=="symbol"?t:t+""}function WF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bf(){return Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bf.apply(null,arguments)}function oc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A2=(e,t,r,a,l)=>{var o=r-a,u;return u=Mt(b2||(b2=oc(["M ",",",""])),e,t),u+=Mt(j2||(j2=oc(["L ",",",""])),e+r,t),u+=Mt(N2||(N2=oc(["L ",",",""])),e+r-o/2,t+l),u+=Mt(_2||(_2=oc(["L ",",",""])),e+r-o/2-a,t+l),u+=Mt(S2||(S2=oc(["L ",","," Z"])),e,t),u},ZF={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JF=e=>{var t=zr(e,ZF),{x:r,y:a,upperWidth:l,lowerWidth:o,height:u,className:d}=t,{animationEasing:m,animationDuration:p,animationBegin:h,isUpdateAnimationActive:v}=t,y=b.useRef(null),[x,_]=b.useState(-1),N=b.useRef(l),S=b.useRef(o),C=b.useRef(u),z=b.useRef(r),w=b.useRef(a),E=wm(e,"trapezoid-");if(b.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var k=y.current.getTotalLength();k&&_(k)}catch{}},[]),r!==+r||a!==+a||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var O=mt("recharts-trapezoid",d);if(!v)return b.createElement("g",null,b.createElement("path",Bf({},Ar(t),{className:O,d:A2(r,a,l,o,u)})));var M=N.current,P=S.current,q=C.current,L=z.current,Y=w.current,W="0px ".concat(x===-1?1:x,"px"),B="".concat(x,"px 0px"),Q=gz(["strokeDasharray"],p,m);return b.createElement(Sm,{animationId:E,key:E,canBegin:x>0,duration:p,easing:m,isActive:v,begin:h},k=>{var T=kt(M,l,k),R=kt(P,o,k),J=kt(q,u,k),H=kt(L,r,k),ve=kt(Y,a,k);y.current&&(N.current=T,S.current=R,C.current=J,z.current=H,w.current=ve);var U=k>0?{transition:Q,strokeDasharray:B}:{strokeDasharray:W};return b.createElement("path",Bf({},Ar(t),{className:O,d:A2(H,ve,T,R,J),ref:y,style:C2(C2({},U),t.style)}))})},eG=["option","shapeType","activeClassName"];function tG(e,t){if(e==null)return{};var r,a,l=rG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function rG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function E2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Uf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E2(Object(r),!0).forEach(function(a){nG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nG(e,t,r){return(t=aG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aG(e){var t=iG(e,"string");return typeof t=="symbol"?t:t+""}function iG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sG(e,t){return Uf(Uf({},t),e)}function lG(e,t){return e==="symbols"}function z2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return b.createElement(jz,r);case"trapezoid":return b.createElement(JF,r);case"sector":return b.createElement(Sz,r);case"symbols":if(lG(t))return b.createElement(lE,r);break;case"curve":return b.createElement(vz,r);default:return null}}function oG(e){return b.isValidElement(e)?e.props:e}function aM(e){var{option:t,shapeType:r,activeClassName:a="recharts-active-shape"}=e,l=tG(e,eG),o;if(b.isValidElement(t))o=b.cloneElement(t,Uf(Uf({},l),oG(t)));else if(typeof t=="function")o=t(l,l.index);else if(YF(t)&&typeof t!="boolean"){var u=sG(t,l);o=b.createElement(z2,{shapeType:r,elementProps:u})}else{var d=l;o=b.createElement(z2,{shapeType:r,elementProps:d})}return l.isActive?b.createElement(Nn,{className:a},o):o}var iM=(e,t,r)=>{var a=qt();return(l,o)=>u=>{e?.(l,o,u),a(pD({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}},sM=e=>{var t=qt();return(r,a)=>l=>{e?.(r,a,l),t(S7())}},lM=(e,t,r)=>{var a=qt();return(l,o)=>u=>{e?.(l,o,u),a(w7({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}};function oM(e){var{tooltipEntrySettings:t}=e,r=qt(),a=Nr(),l=b.useRef(null);return b.useLayoutEffect(()=>{a||(l.current===null?r(b7(t)):l.current!==t&&r(j7({prev:l.current,next:t})),l.current=t)},[t,r,a]),b.useLayoutEffect(()=>()=>{l.current&&(r(N7(l.current)),l.current=null)},[r]),null}function cM(e){var{legendPayload:t}=e,r=qt(),a=Nr(),l=b.useRef(null);return b.useLayoutEffect(()=>{a||(l.current===null?r(eL(t)):l.current!==t&&r(tL({prev:l.current,next:t})),l.current=t)},[r,a,t]),b.useLayoutEffect(()=>()=>{l.current&&(r(rL(l.current)),l.current=null)},[r]),null}var Kg,cG=()=>{var[e]=b.useState(()=>_c("uid-"));return e},uG=(Kg=jT.useId)!==null&&Kg!==void 0?Kg:cG;function dG(e,t){var r=uG();return t||(e?"".concat(e,"-").concat(r):r)}var fG=b.createContext(void 0),uM=e=>{var{id:t,type:r,children:a}=e,l=dG("recharts-".concat(r),t);return b.createElement(fG.Provider,{value:l},a(l))},mG={cartesianItems:[],polarItems:[]},dM=Fr({name:"graphicalItems",initialState:mG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:St()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:a}=t.payload,l=Pn(e).cartesianItems.indexOf(r);l>-1&&(e.cartesianItems[l]=a)},prepare:St()},removeCartesianGraphicalItem:{reducer(e,t){var r=Pn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:St()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:St()},removePolarGraphicalItem:{reducer(e,t){var r=Pn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:St()}}}),{addCartesianGraphicalItem:pG,replaceCartesianGraphicalItem:hG,removeCartesianGraphicalItem:vG,addPolarGraphicalItem:KW,removePolarGraphicalItem:XW}=dM.actions,gG=dM.reducer,xG=e=>{var t=qt(),r=b.useRef(null);return b.useLayoutEffect(()=>{r.current===null?t(pG(e)):r.current!==e&&t(hG({prev:r.current,next:e})),r.current=e},[t,e]),b.useLayoutEffect(()=>()=>{r.current&&(t(vG(r.current)),r.current=null)},[t]),null},fM=b.memo(xG),yG=["points"];function O2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Xg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(r),!0).forEach(function(a){bG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bG(e,t,r){return(t=jG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=NG(e,"string");return typeof t=="symbol"?t:t+""}function NG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ff.apply(null,arguments)}function _G(e,t){if(e==null)return{};var r,a,l=SG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function SG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function wG(e){var{option:t,dotProps:r,className:a}=e;if(b.isValidElement(t))return b.cloneElement(t,r);if(typeof t=="function")return t(r);var l=mt(a,typeof t!="boolean"?t.className:""),o=r??{},{points:u}=o,d=_G(o,yG);return b.createElement(eM,Ff({},d,{className:l}))}function CG(e,t){return e==null?!1:t?!0:e.length===1}function AG(e){var{points:t,dot:r,className:a,dotClassName:l,dataKey:o,baseProps:u,needClip:d,clipPathId:m,zIndex:p=rr.scatter}=e;if(!CG(t,r))return null;var h=nM(r),v=HR(r),y=t.map((_,N)=>{var S,C,z=Xg(Xg(Xg({r:3},u),v),{},{index:N,cx:(S=_.x)!==null&&S!==void 0?S:void 0,cy:(C=_.y)!==null&&C!==void 0?C:void 0,dataKey:o,value:_.value,payload:_.payload,points:t});return b.createElement(wG,{key:"dot-".concat(N),option:r,dotProps:z,className:l})}),x={};return d&&m!=null&&(x.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(m,")")),b.createElement(Cn,{zIndex:p},b.createElement(Nn,Ff({className:a},x),y))}function D2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function M2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(r),!0).forEach(function(a){EG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function EG(e,t,r){return(t=zG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zG(e){var t=OG(e,"string");return typeof t=="symbol"?t:t+""}function OG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mM=0,DG={xAxis:{},yAxis:{},zAxis:{}},pM=Fr({name:"cartesianAxis",initialState:DG,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:St()},replaceXAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.xAxis[r.id],e.xAxis[a.id]=a)},prepare:St()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:St()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:St()},replaceYAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.yAxis[r.id],e.yAxis[a.id]=a)},prepare:St()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:St()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:St()},replaceZAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.zAxis[r.id],e.zAxis[a.id]=a)},prepare:St()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:St()},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload,l=e.yAxis[r];if(l){var o,u=l.widthHistory||[];if(u.length===3&&u[0]===u[2]&&a===u[1]&&a!==l.width&&Math.abs(a-((o=u[0])!==null&&o!==void 0?o:0))<=1)return;var d=[...u,a].slice(-3);e.yAxis[r]=M2(M2({},l),{},{width:a,widthHistory:d})}}}}),{addXAxis:MG,replaceXAxis:kG,removeXAxis:PG,addYAxis:TG,replaceYAxis:qG,removeYAxis:RG,addZAxis:WW,replaceZAxis:ZW,removeZAxis:JW,updateYAxisWidth:LG}=pM.actions,IG=pM.reducer,$G=ae([ar],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),BG=ae([$G,Ha,Qa],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Rb=()=>ze(BG),UG=()=>ze(p9);function k2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Wg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k2(Object(r),!0).forEach(function(a){FG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function FG(e,t,r){return(t=GG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QG=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||t.x==null||t.y==null)return null;var d={index:r,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=Wg(Wg(Wg({},d),$c(l)),by(l)),p;return b.isValidElement(l)?p=b.cloneElement(l,m):typeof l=="function"?p=l(m):p=b.createElement(eM,m),b.createElement(Nn,{className:"recharts-active-dot",clipPath:u},p)};function VG(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:l,clipPath:o,zIndex:u=rr.activeDot}=e,d=ze(Es),m=UG();if(t==null||m==null)return null;var p=t.find(h=>m.includes(h.payload));return At(p)?null:b.createElement(Cn,{zIndex:u},b.createElement(QG,{point:p,childIndex:Number(d),mainColor:r,dataKey:l,activeDot:a,clipPath:o}))}var P2=(e,t,r)=>{var a=r??e;if(!At(a))return qn(a,t,0)},YG=(e,t,r)=>{var a={},l=e.filter(Rm),o=e.filter(p=>p.stackId==null),u=l.reduce((p,h)=>{var v=p[h.stackId];return v==null&&(v=[]),v.push(h),p[h.stackId]=v,p},a),d=Object.entries(u).map(p=>{var h,[v,y]=p,x=y.map(N=>N.dataKey),_=P2(t,r,(h=y[0])===null||h===void 0?void 0:h.barSize);return{stackId:v,dataKeys:x,barSize:_}}),m=o.map(p=>{var h=[p.dataKey].filter(y=>y!=null),v=P2(t,r,p.barSize);return{stackId:void 0,dataKeys:h,barSize:v}});return[...d,...m]};function T2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T2(Object(r),!0).forEach(function(a){KG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KG(e,t,r){return(t=XG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XG(e){var t=WG(e,"string");return typeof t=="symbol"?t:t+""}function WG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZG(e,t,r,a,l){var o,u=a.length;if(!(u<1)){var d=qn(e,r,0,!0),m,p=[];if(Xe((o=a[0])===null||o===void 0?void 0:o.barSize)){var h=!1,v=r/u,y=a.reduce((z,w)=>z+(w.barSize||0),0);y+=(u-1)*d,y>=r&&(y-=(u-1)*d,d=0),y>=r&&v>0&&(h=!0,v*=.9,y=u*v);var x=(r-y)/2>>0,_={offset:x-d,size:0};m=a.reduce((z,w)=>{var E,O={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:_.offset+_.size+d,size:h?v:(E=w.barSize)!==null&&E!==void 0?E:0}},M=[...z,O];return _=O.position,M},p)}else{var N=qn(t,r,0,!0);r-2*N-(u-1)*d<=0&&(d=0);var S=(r-2*N-(u-1)*d)/u;S>1&&(S>>=0);var C=Xe(l)?Math.min(S,l):S;m=a.reduce((z,w,E)=>[...z,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:N+(S+d)*E+(S-C)/2,size:C}}],p)}return m}}var JG=(e,t,r,a,l,o,u)=>{var d=At(u)?t:u,m=ZG(r,a,l!==o?l:o,e,d);return l!==o&&m!=null&&(m=m.map(p=>Td(Td({},p),{},{position:Td(Td({},p.position),{},{offset:p.position.offset-l/2})}))),m},eH=(e,t)=>{var r=pb(t);if(!(!e||r==null||t==null)){var{stackId:a}=t;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(u=>u.key===r)}}}},tH=(e,t)=>{if(!(e==null||t==null)){var r=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function rH(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Xe(e.zIndex)?e.zIndex:t}var nH=e=>{var{chartData:t}=e,r=qt(),a=Nr();return b.useEffect(()=>a?()=>{}:(r(GC(t)),()=>{r(GC(void 0))}),[t,r,a]),null},q2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},hM=Fr({name:"brush",initialState:q2,reducers:{setBrushSettings(e,t){return t.payload==null?q2:t.payload}}}),{setBrushSettings:eZ}=hM.actions,aH=hM.reducer;function iH(e){return(e%180+180)%180}var sH=function(t){var{width:r,height:a}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=iH(l),u=o*Math.PI/180,d=Math.atan(a/r),m=u>d&&u<Math.PI-d?a/Math.sin(u):r/Math.cos(u);return Math.abs(m)},lH={dots:[],areas:[],lines:[]},vM=Fr({name:"referenceElements",initialState:lH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Pn(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Pn(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Pn(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:tZ,removeDot:rZ,addArea:nZ,removeArea:aZ,addLine:iZ,removeLine:sZ}=vM.actions,oH=vM.reducer,cH=b.createContext(void 0),uH=e=>{var{children:t}=e,[r]=b.useState("".concat(_c("recharts"),"-clip")),a=Rb();if(a==null)return null;var{x:l,y:o,width:u,height:d}=a;return b.createElement(cH.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:l,y:o,height:d,width:u}))),t)};function gM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],a=0;a<e.length;a+=t){var l=e[a];l!==void 0&&r.push(l)}return r}function dH(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return sH(a,r)}function fH(e,t,r){var a=r==="width",{x:l,y:o,width:u,height:d}=e;return t===1?{start:a?l:o,end:a?l+u:o+d}:{start:a?l+u:o+d,end:a?l:o}}function Rc(e,t,r,a,l){if(e*t<e*a||e*t>e*l)return!1;var o=r();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-l)<=0}function mH(e,t){return gM(e,t+1)}function pH(e,t,r,a,l){for(var o=(a||[]).slice(),{start:u,end:d}=t,m=0,p=1,h=u,v=function(){var _=a?.[m];if(_===void 0)return{v:gM(a,p)};var N=m,S,C=()=>(S===void 0&&(S=r(_,N)),S),z=_.coordinate,w=m===0||Rc(e,z,C,h,d);w||(m=0,h=u,p+=1),w&&(h=z+e*(C()/2+l),m+=p)},y;p<=o.length;)if(y=v(),y)return y.v;return[]}function hH(e,t,r,a,l){var o=(a||[]).slice(),u=o.length;if(u===0)return[];for(var{start:d,end:m}=t,p=1;p<=u;p++){for(var h=(u-1)%p,v=d,y=!0,x=function(){var E=a[N];if(E==null)return 0;var O=N,M,P=()=>(M===void 0&&(M=r(E,O)),M),q=E.coordinate,L=N===h||Rc(e,q,P,v,m);if(!L)return y=!1,1;L&&(v=q+e*(P()/2+l))},_,N=h;N<u&&(_=x(),!(_!==0&&_===1));N+=p);if(y){for(var S=[],C=h;C<u;C+=p){var z=a[C];z!=null&&S.push(z)}return S}}return[]}function R2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R2(Object(r),!0).forEach(function(a){vH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vH(e,t,r){return(t=gH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gH(e){var t=xH(e,"string");return typeof t=="symbol"?t:t+""}function xH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yH(e,t,r,a,l){for(var o=(a||[]).slice(),u=o.length,{start:d}=t,{end:m}=t,p=function(y){var x=o[y];if(x==null)return 1;var _=x,N,S=()=>(N===void 0&&(N=r(x,y)),N);if(y===u-1){var C=e*(_.coordinate+e*S()/2-m);o[y]=_=br(br({},_),{},{tickCoord:C>0?_.coordinate-C*e:_.coordinate})}else o[y]=_=br(br({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var z=Rc(e,_.tickCoord,S,d,m);z&&(m=_.tickCoord-e*(S()/2+l),o[y]=br(br({},_),{},{isShow:!0}))}},h=u-1;h>=0;h--)p(h);return o}function bH(e,t,r,a,l,o){var u=(a||[]).slice(),d=u.length,{start:m,end:p}=t;if(o){var h=a[d-1];if(h!=null){var v=r(h,d-1),y=e*(h.coordinate+e*v/2-p);if(u[d-1]=h=br(br({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate}),h.tickCoord!=null){var x=Rc(e,h.tickCoord,()=>v,m,p);x&&(p=h.tickCoord-e*(v/2+l),u[d-1]=br(br({},h),{},{isShow:!0}))}}}for(var _=o?d-1:d,N=function(z){var w=u[z];if(w==null)return 1;var E=w,O,M=()=>(O===void 0&&(O=r(w,z)),O);if(z===0){var P=e*(E.coordinate-e*M()/2-m);u[z]=E=br(br({},E),{},{tickCoord:P<0?E.coordinate-P*e:E.coordinate})}else u[z]=E=br(br({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var q=Rc(e,E.tickCoord,M,m,p);q&&(m=E.tickCoord+e*(M()/2+l),u[z]=br(br({},E),{},{isShow:!0}))}},S=0;S<_;S++)N(S);return u}function Lb(e,t,r){var{tick:a,ticks:l,viewBox:o,minTickGap:u,orientation:d,interval:m,tickFormatter:p,unit:h,angle:v}=e;if(!l||!l.length||!a)return[];if(Se(m)||_m.isSsr){var y;return(y=mH(l,Se(m)?m:0))!==null&&y!==void 0?y:[]}var x=[],_=d==="top"||d==="bottom"?"width":"height",N=h&&_==="width"?xc(h,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(O,M)=>{var P=typeof p=="function"?p(O.value,M):O.value;return _==="width"?dH(xc(P,{fontSize:t,letterSpacing:r}),N,v):xc(P,{fontSize:t,letterSpacing:r})[_]},C=l[0],z=l[1],w=l.length>=2&&C!=null&&z!=null?Lr(z.coordinate-C.coordinate):1,E=fH(o,w,_);return m==="equidistantPreserveStart"?pH(w,E,S,l,u):m==="equidistantPreserveEnd"?hH(w,E,S,l,u):(m==="preserveStart"||m==="preserveStartEnd"?x=bH(w,E,S,l,u,m==="preserveStartEnd"):x=yH(w,E,S,l,u),x.filter(O=>O.isShow))}var jH=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(t){Array.from(t).forEach(h=>{if(h){var v=h.getBoundingClientRect();v.width>u&&(u=v.width)}});var d=r?r.getBoundingClientRect().width:0,m=l+o,p=u+m+d+(r?a:0);return Math.round(p)}return 0},NH=["axisLine","width","height","className","hide","ticks","axisType"];function _H(e,t){if(e==null)return{};var r,a,l=SH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function SH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zs.apply(null,arguments)}function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(a){wH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wH(e,t,r){return(t=CH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=AH(e,"string");return typeof t=="symbol"?t:t+""}function AH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pa={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:rr.axis};function EH(e){var{x:t,y:r,width:a,height:l,orientation:o,mirror:u,axisLine:d,otherSvgProps:m}=e;if(!d)return null;var p=Ot(Ot(Ot({},m),Tn(d)),{},{fill:"none"});if(o==="top"||o==="bottom"){var h=+(o==="top"&&!u||o==="bottom"&&u);p=Ot(Ot({},p),{},{x1:t,y1:r+h*l,x2:t+a,y2:r+h*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);p=Ot(Ot({},p),{},{x1:t+v*a,y1:r,x2:t+v*a,y2:r+l})}return b.createElement("line",zs({},p,{className:mt("recharts-cartesian-axis-line",Ul(d,"className"))}))}function zH(e,t,r,a,l,o,u,d,m){var p,h,v,y,x,_,N=d?-1:1,S=e.tickSize||u,C=Se(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":p=h=e.coordinate,y=r+ +!d*l,v=y-N*S,_=v-N*m,x=C;break;case"left":v=y=e.coordinate,h=t+ +!d*a,p=h-N*S,x=p-N*m,_=C;break;case"right":v=y=e.coordinate,h=t+ +d*a,p=h+N*S,x=p+N*m,_=C;break;default:p=h=e.coordinate,y=r+ +d*l,v=y+N*S,_=v+N*m,x=C;break}return{line:{x1:p,y1:v,x2:h,y2:y},tick:{x,y:_}}}function OH(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function DH(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function MH(e){var{option:t,tickProps:r,value:a}=e,l,o=mt(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))l=b.cloneElement(t,Ot(Ot({},r),{},{className:o}));else if(typeof t=="function")l=t(Ot(Ot({},r),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=mt(u,$F(t))),l=b.createElement(Tb,zs({},r,{className:u}),a)}return l}var kH=b.forwardRef((e,t)=>{var{ticks:r=[],tick:a,tickLine:l,stroke:o,tickFormatter:u,unit:d,padding:m,tickTextProps:p,orientation:h,mirror:v,x:y,y:x,width:_,height:N,tickSize:S,tickMargin:C,fontSize:z,letterSpacing:w,getTicksConfig:E,events:O,axisType:M}=e,P=Lb(Ot(Ot({},E),{},{ticks:r}),z,w),q=OH(h,v),L=DH(h,v),Y=Tn(E),W=$c(a),B={};typeof l=="object"&&(B=l);var Q=Ot(Ot({},Y),{},{fill:"none"},B),k=P.map(J=>Ot({entry:J},zH(J,y,x,_,N,h,S,v,C))),T=k.map(J=>{var{entry:H,line:ve}=J;return b.createElement(Nn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},l&&b.createElement("line",zs({},Q,ve,{className:mt("recharts-cartesian-axis-tick-line",Ul(l,"className"))})))}),R=k.map((J,H)=>{var ve,U,{entry:ge,tick:re}=J,me=Ot(Ot(Ot(Ot({verticalAnchor:L},Y),{},{textAnchor:q,stroke:"none",fill:o},re),{},{index:H,payload:ge,visibleTicksCount:P.length,tickFormatter:u,padding:m},p),{},{angle:(ve=(U=p?.angle)!==null&&U!==void 0?U:Y.angle)!==null&&ve!==void 0?ve:0}),xe=Ot(Ot({},me),W);return b.createElement(Nn,zs({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},jy(O,ge,H)),a&&b.createElement(MH,{option:a,tickProps:xe,value:"".concat(typeof u=="function"?u(ge.value,H):ge.value).concat(d||"")}))});return b.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},R.length>0&&b.createElement(Cn,{zIndex:rr.label},b.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},R)),T.length>0&&b.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},T))}),PH=b.forwardRef((e,t)=>{var{axisLine:r,width:a,height:l,className:o,hide:u,ticks:d,axisType:m}=e,p=_H(e,NH),[h,v]=b.useState(""),[y,x]=b.useState(""),_=b.useRef(null);b.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return jH({ticks:_.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=b.useCallback(S=>{if(S){var C=S.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=C;var z=C[0];if(z){var w=window.getComputedStyle(z),E=w.fontSize,O=w.letterSpacing;(E!==h||O!==y)&&(v(E),x(O))}}},[h,y]);return u||a!=null&&a<=0||l!=null&&l<=0?null:b.createElement(Cn,{zIndex:e.zIndex},b.createElement(Nn,{className:mt("recharts-cartesian-axis",o)},b.createElement(EH,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Tn(e)}),b.createElement(kH,{ref:N,axisType:m,events:p,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),b.createElement(hF,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},b.createElement(wF,{label:e.label,labelRef:e.labelRef}),e.children)))}),Ib=b.forwardRef((e,t)=>{var r=zr(e,Pa);return b.createElement(PH,zs({},r,{ref:t}))});Ib.displayName="CartesianAxis";var TH=["x1","y1","x2","y2","key"],qH=["offset"],RH=["xAxisId","yAxisId"],LH=["xAxisId","yAxisId"];function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(a){IH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function IH(e,t,r){return(t=$H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $H(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vs(){return vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vs.apply(null,arguments)}function Gf(e,t){if(e==null)return{};var r,a,l=UH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function UH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var FH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:l,width:o,height:u,ry:d}=e;return b.createElement("rect",{x:a,y:l,ry:d,width:o,height:u,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function xM(e){var{option:t,lineItemProps:r}=e,a;if(b.isValidElement(t))a=b.cloneElement(t,r);else if(typeof t=="function")a=t(r);else{var l,{x1:o,y1:u,x2:d,y2:m,key:p}=r,h=Gf(r,TH),v=(l=Tn(h))!==null&&l!==void 0?l:{},{offset:y}=v,x=Gf(v,qH);a=b.createElement("line",vs({},x,{x1:o,y1:u,x2:d,y2:m,fill:"none",key:p}))}return a}function GH(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=Gf(e,RH),m=l.map((p,h)=>{var v=jr(jr({},d),{},{x1:t,y1:p,x2:t+r,y2:p,key:"line-".concat(h),index:h});return b.createElement(xM,{key:"line-".concat(h),option:a,lineItemProps:v})});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function HH(e){var{y:t,height:r,vertical:a=!0,verticalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=Gf(e,LH),m=l.map((p,h)=>{var v=jr(jr({},d),{},{x1:p,y1:t,x2:p,y2:t+r,key:"line-".concat(h),index:h});return b.createElement(xM,{option:a,lineItemProps:v,key:"line-".concat(h)})});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function QH(e){var{horizontalFill:t,fillOpacity:r,x:a,y:l,width:o,height:u,horizontalPoints:d,horizontal:m=!0}=e;if(!m||!t||!t.length||d==null)return null;var p=d.map(v=>Math.round(v+l-l)).sort((v,y)=>v-y);l!==p[0]&&p.unshift(0);var h=p.map((v,y)=>{var x=p[y+1],_=x==null,N=_?l+u-v:x-v;if(N<=0)return null;var S=y%t.length;return b.createElement("rect",{key:"react-".concat(y),y:v,x:a,height:N,width:o,stroke:"none",fill:t[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function VH(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:l,y:o,width:u,height:d,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var p=m.map(v=>Math.round(v+l-l)).sort((v,y)=>v-y);l!==p[0]&&p.unshift(0);var h=p.map((v,y)=>{var x=p[y+1],_=x==null,N=_?l+u-v:x-v;if(N<=0)return null;var S=y%r.length;return b.createElement("rect",{key:"react-".concat(y),x:v,y:o,width:N,height:d,stroke:"none",fill:r[S],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var YH=(e,t)=>{var{xAxis:r,width:a,height:l,offset:o}=e;return WE(Lb(jr(jr(jr({},Pa),r),{},{ticks:ZE(r),viewBox:{x:0,y:0,width:a,height:l}})),o.left,o.left+o.width,t)},KH=(e,t)=>{var{yAxis:r,width:a,height:l,offset:o}=e;return WE(Lb(jr(jr(jr({},Pa),r),{},{ticks:ZE(r),viewBox:{x:0,y:0,width:a,height:l}})),o.top,o.top+o.height,t)},XH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:rr.grid};function Zx(e){var t=az(),r=iz(),a=nz(),l=jr(jr({},zr(e,XH)),{},{x:Se(e.x)?e.x:a.left,y:Se(e.y)?e.y:a.top,width:Se(e.width)?e.width:a.width,height:Se(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:u,x:d,y:m,width:p,height:h,syncWithTicks:v,horizontalValues:y,verticalValues:x}=l,_=Nr(),N=ze(L=>MC(L,"xAxis",o,_)),S=ze(L=>MC(L,"yAxis",u,_));if(!aa(p)||!aa(h)||!Se(d)||!Se(m))return null;var C=l.verticalCoordinatesGenerator||YH,z=l.horizontalCoordinatesGenerator||KH,{horizontalPoints:w,verticalPoints:E}=l;if((!w||!w.length)&&typeof z=="function"){var O=y&&y.length,M=z({yAxis:S?jr(jr({},S),{},{ticks:O?y:S.ticks}):void 0,width:t??p,height:r??h,offset:a},O?!0:v);vf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(w=M)}if((!E||!E.length)&&typeof C=="function"){var P=x&&x.length,q=C({xAxis:N?jr(jr({},N),{},{ticks:P?x:N.ticks}):void 0,width:t??p,height:r??h,offset:a},P?!0:v);vf(Array.isArray(q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof q,"]")),Array.isArray(q)&&(E=q)}return b.createElement(Cn,{zIndex:l.zIndex},b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(FH,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),b.createElement(QH,vs({},l,{horizontalPoints:w})),b.createElement(VH,vs({},l,{verticalPoints:E})),b.createElement(GH,vs({},l,{offset:a,horizontalPoints:w,xAxis:N,yAxis:S})),b.createElement(HH,vs({},l,{offset:a,verticalPoints:E,xAxis:N,yAxis:S}))))}Zx.displayName="CartesianGrid";var WH={},yM=Fr({name:"errorBars",initialState:WH,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:a,next:l}=t.payload;e[r]&&(e[r]=e[r].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:lZ,replaceErrorBar:oZ,removeErrorBar:cZ}=yM.actions,ZH=yM.reducer,JH=["children"];function eQ(e,t){if(e==null)return{};var r,a,l=tQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function tQ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var rQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},nQ=b.createContext(rQ);function bM(e){var{children:t}=e,r=eQ(e,JH);return b.createElement(nQ.Provider,{value:r},t)}function $b(e,t){var r,a,l=ze(p=>Ka(p,e)),o=ze(p=>Xa(p,t)),u=(r=l?.allowDataOverflow)!==null&&r!==void 0?r:Jt.allowDataOverflow,d=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:er.allowDataOverflow,m=u||d;return{needClip:m,needClipX:u,needClipY:d}}function jM(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,l=Rb(),{needClipX:o,needClipY:u,needClip:d}=$b(t,r);if(!d||!l)return null;var{x:m,y:p,width:h,height:v}=l;return b.createElement("clipPath",{id:"clipPath-".concat(a)},b.createElement("rect",{x:o?m:m-h/2,y:u?p:p-v/2,width:o?h:h*2,height:u?v:v*2}))}var NM=(e,t,r,a)=>Li(e,"xAxis",t,a),_M=(e,t,r,a)=>Ri(e,"xAxis",t,a),SM=(e,t,r,a)=>Li(e,"yAxis",r,a),wM=(e,t,r,a)=>Ri(e,"yAxis",r,a),aQ=ae([lt,NM,SM,_M,wM],(e,t,r,a,l)=>Ga(e,"xAxis")?Gl(t,a,!1):Gl(r,l,!1)),iQ=(e,t,r,a,l)=>l;function sQ(e){return e.type==="line"}var lQ=ae([$m,iQ],(e,t)=>e.filter(sQ).find(r=>r.id===t)),oQ=ae([lt,NM,SM,_M,wM,lQ,aQ,ib],(e,t,r,a,l,o,u,d)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:h}=d;if(!(o==null||t==null||r==null||a==null||l==null||a.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:y}=o,x;if(y!=null&&y.length>0?x=y:x=m?.slice(p,h+1),x!=null)return KQ({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:x})}});function cQ(e){var t=$c(e),r=3,a=2;if(t!=null){var{r:l,strokeWidth:o}=t,u=Number(l),d=Number(o);return(Number.isNaN(u)||u<0)&&(u=r),(Number.isNaN(d)||d<0)&&(d=a),{r:u,strokeWidth:d}}return{r,strokeWidth:a}}var Zg={exports:{}},Jg={};var $2;function uQ(){if($2)return Jg;$2=1;var e=Xf();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Jg.useSyncExternalStoreWithSelector=function(m,p,h,v,y){var x=l(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=u(function(){function S(O){if(!C){if(C=!0,z=O,O=v(O),y!==void 0&&_.hasValue){var M=_.value;if(y(M,O))return w=M}return w=O}if(M=w,r(z,O))return M;var P=v(O);return y!==void 0&&y(M,P)?(z=O,M):(z=O,w=P)}var C=!1,z,w,E=h===void 0?null:h;return[function(){return S(p())},E===null?void 0:function(){return S(E())}]},[p,h,v,y]);var N=a(m,x[0],x[1]);return o(function(){_.hasValue=!0,_.value=N},[N]),d(N),N},Jg}var B2;function dQ(){return B2||(B2=1,Zg.exports=uQ()),Zg.exports}dQ();function fQ(e){e()}function mQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){fQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const l=t={callback:r,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var U2={notify(){},get:()=>[]};function pQ(e,t){let r,a=U2,l=0,o=!1;function u(N){h();const S=a.subscribe(N);let C=!1;return()=>{C||(C=!0,S(),v())}}function d(){a.notify()}function m(){_.onStateChange&&_.onStateChange()}function p(){return o}function h(){l++,r||(r=e.subscribe(m),a=mQ())}function v(){l--,r&&l===0&&(r(),r=void 0,a.clear(),a=U2)}function y(){o||(o=!0,h())}function x(){o&&(o=!1,v())}const _={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:p,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>a};return _}var hQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vQ=hQ(),gQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xQ=gQ(),yQ=()=>vQ||xQ?b.useLayoutEffect:b.useEffect,bQ=yQ();function F2(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function jQ(e,t){if(F2(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!F2(e[r[l]],t[r[l]]))return!1;return!0}var NQ=Symbol.for("react-redux-context"),_Q=typeof globalThis<"u"?globalThis:{};function SQ(){if(!b.createContext)return{};const e=_Q[NQ]??=new Map;let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var wQ=SQ();function CQ(e){const{children:t,context:r,serverState:a,store:l}=e,o=b.useMemo(()=>{const m=pQ(l);return{store:l,subscription:m,getServerState:a?()=>a:void 0}},[l,a]),u=b.useMemo(()=>l.getState(),[l]);bQ(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==l.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,u]);const d=r||wQ;return b.createElement(d.Provider,{value:o},t)}var AQ=CQ,EQ=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function zQ(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Hm(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of r)if(EQ.has(a)){if(e[a]==null&&t[a]==null)continue;if(!jQ(e[a],t[a]))return!1}else if(!zQ(e[a],t[a]))return!1;return!0}var OQ=["id"],DQ=["type","layout","connectNulls","needClip","shape"],MQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lc.apply(null,arguments)}function G2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(r),!0).forEach(function(a){kQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kQ(e,t,r){return(t=PQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PQ(e){var t=TQ(e,"string");return typeof t=="symbol"?t:t+""}function TQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bb(e,t){if(e==null)return{};var r,a,l=qQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function qQ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var RQ=e=>{var{dataKey:t,name:r,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:pm(r,t),payload:e}]},LQ=b.memo(e=>{var{dataKey:t,data:r,stroke:a,strokeWidth:l,fill:o,name:u,hide:d,unit:m,tooltipType:p,id:h}=e,v={dataDefinedOnItem:r,getPosition:Ms,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:pm(u,t),hide:d,type:p,color:a,unit:m,graphicalItemId:h}};return b.createElement(oM,{tooltipEntrySettings:v})}),CM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function IQ(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],l=0;l<t;++l)a=[...a,...r];return a}var $Q=(e,t,r)=>{var a=r.reduce((x,_)=>x+_);if(!a)return CM(t,e);for(var l=Math.floor(e/a),o=e%a,u=t-e,d=[],m=0,p=0;m<r.length;p+=(h=r[m])!==null&&h!==void 0?h:0,++m){var h,v=r[m];if(v!=null&&p+v>o){d=[...r.slice(0,m),o-p];break}}var y=d.length%2===0?[0,u]:[u];return[...IQ(r,l),...d,...y].map(x=>"".concat(x,"px")).join(", ")};function BQ(e){var{clipPathId:t,points:r,props:a}=e,{dot:l,dataKey:o,needClip:u}=a,{id:d}=a,m=Bb(a,OQ),p=Tn(m);return b.createElement(AG,{points:r,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:p,needClip:u,clipPathId:t})}function UQ(e){var{showLabels:t,children:r,points:a}=e,l=b.useMemo(()=>a?.map(o=>{var u,d,m={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Wn(Wn({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return b.createElement(WD,{value:t?l:void 0},r)}function H2(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:l,props:o}=e,{type:u,layout:d,connectNulls:m,needClip:p,shape:h}=o,v=Bb(o,DQ),y=Wn(Wn({},Ar(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(t,")"):void 0,points:a,type:u,layout:d,connectNulls:m,strokeDasharray:l??o.strokeDasharray});return b.createElement(b.Fragment,null,a?.length>1&&b.createElement(aM,Lc({shapeType:"curve",option:h},y,{pathRef:r})),b.createElement(BQ,{points:a,clipPathId:t,props:o}))}function FQ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function GQ(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:d,isAnimationActive:m,animationBegin:p,animationDuration:h,animationEasing:v,animateNewValues:y,width:x,height:_,onAnimationEnd:N,onAnimationStart:S}=r,C=l.current,z=wm(u,"recharts-line-"),w=b.useRef(z),[E,O]=b.useState(!1),M=!E,P=b.useCallback(()=>{typeof N=="function"&&N(),O(!1)},[N]),q=b.useCallback(()=>{typeof S=="function"&&S(),O(!0)},[S]),L=FQ(a.current),Y=b.useRef(0);w.current!==z&&(Y.current=o.current,w.current=z);var W=Y.current;return b.createElement(UQ,{points:u,showLabels:M},r.children,b.createElement(Sm,{animationId:z,begin:p,duration:h,isActive:m,easing:v,onAnimationEnd:P,onAnimationStart:q,key:z},B=>{var Q=kt(W,L+W,B),k=Math.min(Q,L),T;if(m)if(d){var R="".concat(d).split(/[,\s]+/gim).map(ve=>parseFloat(ve));T=$Q(k,L,R)}else T=CM(L,k);else T=d==null?void 0:String(d);if(B>0&&L>0&&(l.current=u,o.current=Math.max(o.current,k)),C){var J=C.length/u.length,H=B===1?u:u.map((ve,U)=>{var ge=Math.floor(U*J);if(C[ge]){var re=C[ge];return Wn(Wn({},ve),{},{x:kt(re.x,ve.x,B),y:kt(re.y,ve.y,B)})}return y?Wn(Wn({},ve),{},{x:kt(x*2,ve.x,B),y:kt(_/2,ve.y,B)}):Wn(Wn({},ve),{},{x:ve.x,y:ve.y})});return l.current=H,b.createElement(H2,{props:r,points:H,clipPathId:t,pathRef:a,strokeDasharray:T})}return b.createElement(H2,{props:r,points:u,clipPathId:t,pathRef:a,strokeDasharray:T})}),b.createElement(JD,{label:r.label}))}function HQ(e){var{clipPathId:t,props:r}=e,a=b.useRef(null),l=b.useRef(0),o=b.useRef(null);return b.createElement(GQ,{props:r,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var QQ=(e,t)=>{var r,a;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Ut(e.payload,t)}};class VQ extends b.Component{render(){var{hide:t,dot:r,points:a,className:l,xAxisId:o,yAxisId:u,top:d,left:m,width:p,height:h,id:v,needClip:y,zIndex:x}=this.props;if(t)return null;var _=mt("recharts-line",l),N=v,{r:S,strokeWidth:C}=cQ(r),z=nM(r),w=S*2+C,E=y?"url(#clipPath-".concat(z?"":"dots-").concat(N,")"):void 0;return b.createElement(Cn,{zIndex:x},b.createElement(Nn,{className:_},y&&b.createElement("defs",null,b.createElement(jM,{clipPathId:N,xAxisId:o,yAxisId:u}),!z&&b.createElement("clipPath",{id:"clipPath-dots-".concat(N)},b.createElement("rect",{x:m-w/2,y:d-w/2,width:p+w,height:h+w}))),b.createElement(bM,{xAxisId:o,yAxisId:u,data:a,dataPointFormatter:QQ,errorBarOffset:0},b.createElement(HQ,{props:this.props,clipPathId:N}))),b.createElement(VG,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:E}))}}var AM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:rr.line,type:"linear"};function YQ(e){var t=zr(e,AM),{activeDot:r,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:m,hide:p,isAnimationActive:h,label:v,legendType:y,xAxisId:x,yAxisId:_,id:N}=t,S=Bb(t,MQ),{needClip:C}=$b(x,_),z=Rb(),w=ks(),E=Nr(),O=ze(Y=>oQ(Y,x,_,E,N));if(w!=="horizontal"&&w!=="vertical"||O==null||z==null)return null;var{height:M,width:P,x:q,y:L}=z;return b.createElement(VQ,Lc({},S,{id:N,connectNulls:d,dot:m,activeDot:r,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:h,hide:p,label:v,legendType:y,xAxisId:x,yAxisId:_,points:O,layout:w,height:M,width:P,left:q,top:L,needClip:C}))}function KQ(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:d,displayedData:m}=e;return m.map((p,h)=>{var v=Ut(p,u);if(t==="horizontal"){var y=OS({axis:r,ticks:l,bandSize:d,entry:p,index:h}),x=At(v)?null:a.scale.map(v);return{x:y,y:x??null,value:v,payload:p}}var _=At(v)?null:r.scale.map(v),N=OS({axis:a,ticks:o,bandSize:d,entry:p,index:h});return _==null||N==null?null:{x:_,y:N,value:v,payload:p}}).filter(Boolean)}function XQ(e){var t=zr(e,AM),r=Nr();return b.createElement(uM,{id:t.id,type:"line"},a=>b.createElement(b.Fragment,null,b.createElement(cM,{legendPayload:RQ(t)}),b.createElement(LQ,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),b.createElement(fM,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),b.createElement(YQ,Lc({},t,{id:a}))))}var EM=b.memo(XQ,Hm);EM.displayName="Line";function qs(e,t){var r,a;return(r=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&r!==void 0?r:mM}function Rs(e,t){var r,a;return(r=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&r!==void 0?r:mM}var WQ="Invariant failed";function ZQ(e,t){throw new Error(WQ)}function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jx.apply(null,arguments)}function Hf(e){return b.createElement(aM,Jx({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var JQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(Se(t))return t;var o=Se(a)||At(a);return o?t(a,l):(o||ZQ(),r)}},eV=(e,t,r)=>r,tV=(e,t)=>t,nu=ae([$m,tV],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),rV=ae([nu],e=>e?.maxBarSize),nV=(e,t,r,a)=>a,aV=ae([lt,$m,qs,Rs,eV],(e,t,r,a,l)=>t.filter(o=>e==="horizontal"?o.xAxisId===r:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),iV=(e,t,r)=>{var a=lt(e),l=qs(e,t),o=Rs(e,t);if(!(l==null||o==null))return a==="horizontal"?Hx(e,"yAxis",o,r):Hx(e,"xAxis",l,r)},sV=(e,t)=>{var r=lt(e),a=qs(e,t),l=Rs(e,t);if(!(a==null||l==null))return r==="horizontal"?DC(e,"xAxis",a):DC(e,"yAxis",l)},lV=ae([aV,cB,sV],YG),oV=(e,t,r)=>{var a,l,o=nu(e,t);if(o==null)return 0;var u=qs(e,t),d=Rs(e,t);if(u==null||d==null)return 0;var m=lt(e),p=gO(e),{maxBarSize:h}=o,v=At(h)?p:h,y,x;return m==="horizontal"?(y=Li(e,"xAxis",u,r),x=Ri(e,"xAxis",u,r)):(y=Li(e,"yAxis",d,r),x=Ri(e,"yAxis",d,r)),(a=(l=Gl(y,x,!0))!==null&&l!==void 0?l:v)!==null&&a!==void 0?a:0},zM=(e,t,r)=>{var a=lt(e),l=qs(e,t),o=Rs(e,t);if(!(l==null||o==null)){var u,d;return a==="horizontal"?(u=Li(e,"xAxis",l,r),d=Ri(e,"xAxis",l,r)):(u=Li(e,"yAxis",o,r),d=Ri(e,"yAxis",o,r)),Gl(u,d)}},cV=ae([lV,gO,oB,xO,oV,zM,rV],JG),uV=(e,t,r)=>{var a=qs(e,t);if(a!=null)return Li(e,"xAxis",a,r)},dV=(e,t,r)=>{var a=Rs(e,t);if(a!=null)return Li(e,"yAxis",a,r)},fV=(e,t,r)=>{var a=qs(e,t);if(a!=null)return Ri(e,"xAxis",a,r)},mV=(e,t,r)=>{var a=Rs(e,t);if(a!=null)return Ri(e,"yAxis",a,r)},pV=ae([cV,nu],tH),hV=ae([iV,nu],eH),vV=ae([ar,Dy,uV,dV,fV,mV,pV,lt,eB,zM,hV,nu,nV],(e,t,r,a,l,o,u,d,m,p,h,v,y)=>{var{chartData:x,dataStartIndex:_,dataEndIndex:N}=m;if(!(v==null||u==null||t==null||d!=="horizontal"&&d!=="vertical"||r==null||a==null||l==null||o==null||p==null)){var{data:S}=v,C;if(S!=null&&S.length>0?C=S:C=x?.slice(_,N+1),C!=null)return GV({layout:d,barSettings:v,pos:u,parentViewBox:t,bandSize:p,xAxis:r,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:h,displayedData:C,offset:e,cells:y,dataStartIndex:_})}}),gV=["index"];function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ey.apply(null,arguments)}function xV(e,t){if(e==null)return{};var r,a,l=yV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function yV(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var OM=b.createContext(void 0),bV=e=>{var t=b.useContext(OM);if(t!=null)return t.stackId;if(e!=null)return n6(e)},jV=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),NV=e=>{var t=b.useContext(OM);if(t!=null){var{stackId:r}=t;return"url(#".concat(jV(r,e),")")}},DM=e=>{var{index:t}=e,r=xV(e,gV),a=NV(t);return b.createElement(Nn,ey({className:"recharts-bar-stack-layer",clipPath:a},r))},_V=["onMouseEnter","onMouseLeave","onClick"],SV=["value","background","tooltipPosition"],wV=["id"],CV=["onMouseEnter","onClick","onMouseLeave"];function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ua.apply(null,arguments)}function Q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(r),!0).forEach(function(a){AV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AV(e,t,r){return(t=EV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=zV(e,"string");return typeof t=="symbol"?t:t+""}function zV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qf(e,t){if(e==null)return{};var r,a,l=OV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function OV(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var DV=e=>{var{dataKey:t,name:r,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:pm(r,t),payload:e}]},MV=b.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:a,fill:l,name:o,hide:u,unit:d,tooltipType:m,id:p}=e,h={dataDefinedOnItem:void 0,getPosition:Ms,settings:{stroke:r,strokeWidth:a,fill:l,dataKey:t,nameKey:void 0,name:pm(o,t),hide:u,type:m,color:l,unit:d,graphicalItemId:p}};return b.createElement(oM,{tooltipEntrySettings:h})});function kV(e){var t=ze(Es),{data:r,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:d,onClick:m}=o,p=Qf(o,_V),h=iM(u,a,o.id),v=sM(d),y=lM(m,a,o.id);if(!l||r==null)return null;var x=$c(l);return b.createElement(Cn,{zIndex:rH(l,rr.barBackground)},r.map((_,N)=>{var{value:S,background:C,tooltipPosition:z}=_,w=Qf(_,SV);if(!C)return null;var E=h(_,N),O=v(_,N),M=y(_,N),P=wr(wr(wr(wr(wr({option:l,isActive:String(N)===t},w),{},{fill:"#eee"},C),x),jy(p,_,N)),{},{onMouseEnter:E,onMouseLeave:O,onClick:M,dataKey:a,index:N,className:"recharts-bar-background-rectangle"});return b.createElement(Hf,Ua({key:"background-bar-".concat(N)},P))}))}function PV(e){var{showLabels:t,children:r,rects:a}=e,l=a?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return wr(wr({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return b.createElement(WD,{value:t?l:void 0},r)}function TV(e){var{shape:t,activeBar:r,baseProps:a,entry:l,index:o,dataKey:u}=e,d=ze(Es),m=ze(zD),p=r&&String(o)===d&&(m==null||u===m),h=p?r:t;return p?b.createElement(Cn,{zIndex:rr.activeBar},b.createElement(DM,{index:o},b.createElement(Hf,Ua({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u})))):b.createElement(Hf,Ua({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u}))}function qV(e){var{shape:t,baseProps:r,entry:a,index:l,dataKey:o}=e;return b.createElement(Hf,Ua({},r,{name:String(r.name)},a,{isActive:!1,option:t,index:l,dataKey:o}))}function RV(e){var t,{data:r,props:a}=e,l=(t=Tn(a))!==null&&t!==void 0?t:{},{id:o}=l,u=Qf(l,wV),{shape:d,dataKey:m,activeBar:p}=a,{onMouseEnter:h,onClick:v,onMouseLeave:y}=a,x=Qf(a,CV),_=iM(h,m,o),N=sM(y),S=lM(v,m,o);return r?b.createElement(b.Fragment,null,r.map((C,z)=>b.createElement(DM,Ua({index:z,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(z),className:"recharts-bar-rectangle"},jy(x,C,z),{onMouseEnter:_(C,z),onMouseLeave:N(C,z),onClick:S(C,z)}),p?b.createElement(TV,{shape:d,activeBar:p,baseProps:u,entry:C,index:z,dataKey:m}):b.createElement(qV,{shape:d,baseProps:u,entry:C,index:z,dataKey:m})))):null}function LV(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:u,animationDuration:d,animationEasing:m,onAnimationEnd:p,onAnimationStart:h}=t,v=r.current,y=wm(t,"recharts-bar-"),[x,_]=b.useState(!1),N=!x,S=b.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),C=b.useCallback(()=>{typeof h=="function"&&h(),_(!0)},[h]);return b.createElement(PV,{showLabels:N,rects:a},b.createElement(Sm,{animationId:y,begin:u,duration:d,isActive:o,easing:m,onAnimationEnd:S,onAnimationStart:C,key:y},z=>{var w=z===1?a:a?.map((E,O)=>{var M=v&&v[O];if(M)return wr(wr({},E),{},{x:kt(M.x,E.x,z),y:kt(M.y,E.y,z),width:kt(M.width,E.width,z),height:kt(M.height,E.height,z)});if(l==="horizontal"){var P=kt(0,E.height,z),q=kt(E.stackedBarStart,E.y,z);return wr(wr({},E),{},{y:q,height:P})}var L=kt(0,E.width,z),Y=kt(E.stackedBarStart,E.x,z);return wr(wr({},E),{},{width:L,x:Y})});return z>0&&(r.current=w??null),w==null?null:b.createElement(Nn,null,b.createElement(RV,{props:t,data:w}))}),b.createElement(JD,{label:t.label}),t.children)}function IV(e){var t=b.useRef(null);return b.createElement(LV,{previousRectanglesRef:t,props:e})}var MM=0,$V=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ut(e,t)}};class BV extends b.PureComponent{render(){var{hide:t,data:r,dataKey:a,className:l,xAxisId:o,yAxisId:u,needClip:d,background:m,id:p}=this.props;if(t||r==null)return null;var h=mt("recharts-bar",l),v=p;return b.createElement(Nn,{className:h,id:p},d&&b.createElement("defs",null,b.createElement(jM,{clipPathId:v,xAxisId:o,yAxisId:u})),b.createElement(Nn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(v,")"):void 0},b.createElement(kV,{data:r,dataKey:a,background:m,allOtherBarProps:this.props}),b.createElement(IV,this.props)))}}var UV={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:MM,xAxisId:0,yAxisId:0,zIndex:rr.bar};function FV(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h}=e,{needClip:v}=$b(t,r),y=ks(),x=Nr(),_=GF(e.children,Pb),N=ze(z=>vV(z,e.id,x,_));if(y!=="vertical"&&y!=="horizontal")return null;var S,C=N?.[0];return C==null||C.height==null||C.width==null?S=0:S=y==="vertical"?C.height/2:C.width/2,b.createElement(bM,{xAxisId:t,yAxisId:r,data:N,dataPointFormatter:$V,errorBarOffset:S},b.createElement(BV,Ua({},e,{layout:y,needClip:v,data:N,xAxisId:t,yAxisId:r,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h})))}function GV(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:l,bandSize:o,xAxis:u,yAxis:d,xAxisTicks:m,yAxisTicks:p,stackedData:h,displayedData:v,offset:y,cells:x,parentViewBox:_,dataStartIndex:N}=e,S=t==="horizontal"?d:u,C=h?S.scale.domain():null,z=a6({numericAxis:S}),w=S.scale.map(z);return v.map((E,O)=>{var M,P,q,L,Y,W;if(h){var B=h[O+N];if(B==null)return null;M=Z4(B,C)}else M=Ut(E,r),Array.isArray(M)||(M=[z,M]);var Q=JQ(a,MM)(M[1],O);if(t==="horizontal"){var k,T=d.scale.map(M[0]),R=d.scale.map(M[1]);if(T==null||R==null)return null;P=DS({axis:u,ticks:m,bandSize:o,offset:l.offset,entry:E,index:O}),q=(k=R??T)!==null&&k!==void 0?k:void 0,L=l.size;var J=T-R;if(Y=ra(J)?0:J,W={x:P,y:y.top,width:L,height:y.height},Math.abs(Q)>0&&Math.abs(Y)<Math.abs(Q)){var H=Lr(Y||Q)*(Math.abs(Q)-Math.abs(Y));q-=H,Y+=H}}else{var ve=u.scale.map(M[0]),U=u.scale.map(M[1]);if(ve==null||U==null)return null;if(P=ve,q=DS({axis:d,ticks:p,bandSize:o,offset:l.offset,entry:E,index:O}),L=U-ve,Y=l.size,W={x:y.left,y:q,width:y.width,height:Y},Math.abs(Q)>0&&Math.abs(L)<Math.abs(Q)){var ge=Lr(L||Q)*(Math.abs(Q)-Math.abs(L));L+=ge}}if(P==null||q==null||L==null||Y==null)return null;var re=wr(wr({},E),{},{stackedBarStart:w,x:P,y:q,width:L,height:Y,value:h?M:M[1],payload:E,background:W,tooltipPosition:{x:P+L/2,y:q+Y/2},parentViewBox:_},x&&x[O]&&x[O].props);return re}).filter(Boolean)}function HV(e){var t=zr(e,UV),r=bV(t.stackId),a=Nr();return b.createElement(uM,{id:t.id,type:"bar"},l=>b.createElement(b.Fragment,null,b.createElement(cM,{legendPayload:DV(t)}),b.createElement(MV,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),b.createElement(fM,{type:"bar",id:l,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),b.createElement(Cn,{zIndex:t.zIndex},b.createElement(FV,Ua({},t,{id:l})))))}var kM=b.memo(HV,Hm);kM.displayName="Bar";var QV=["domain","range"],VV=["domain","range"];function V2(e,t){if(e==null)return{};var r,a,l=YV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function YV(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Y2(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function PM(e,t){if(e===t)return!0;var{domain:r,range:a}=e,l=V2(e,QV),{domain:o,range:u}=t,d=V2(t,VV);return!Y2(r,o)||!Y2(a,u)?!1:Hm(l,d)}var KV=["type"],XV=["dangerouslySetInnerHTML","ticks","scale"],WV=["id","scale"];function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ty.apply(null,arguments)}function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function X2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(a){ZV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ZV(e,t,r){return(t=JV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JV(e){var t=eY(e,"string");return typeof t=="symbol"?t:t+""}function eY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ry(e,t){if(e==null)return{};var r,a,l=tY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function tY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function rY(e){var t=qt(),r=b.useRef(null),a=sz(),{type:l}=e,o=ry(e,KV),u=Pm(a,"xAxis",l),d=b.useMemo(()=>{if(u!=null)return X2(X2({},o),{},{type:u})},[o,u]);return b.useLayoutEffect(()=>{d!=null&&(r.current===null?t(MG(d)):r.current!==d&&t(kG({prev:r.current,next:d})),r.current=d)},[d,t]),b.useLayoutEffect(()=>()=>{r.current&&(t(PG(r.current)),r.current=null)},[t]),null}var nY=e=>{var{xAxisId:t,className:r}=e,a=ze(Dy),l=Nr(),o="xAxis",u=ze(C=>oD(C,o,t,l)),d=ze(C=>aD(C,t)),m=ze(C=>u7(C,t)),p=ze(C=>AO(C,t));if(d==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:h,ticks:v,scale:y}=e,x=ry(e,XV),{id:_,scale:N}=p,S=ry(p,WV);return b.createElement(Ib,ty({},x,S,{x:m.x,y:m.y,width:d.width,height:d.height,className:mt("recharts-".concat(o," ").concat(o),r),viewBox:a,ticks:u,axisType:o}))},aY={allowDataOverflow:Jt.allowDataOverflow,allowDecimals:Jt.allowDecimals,allowDuplicatedCategory:Jt.allowDuplicatedCategory,angle:Jt.angle,axisLine:Pa.axisLine,height:Jt.height,hide:!1,includeHidden:Jt.includeHidden,interval:Jt.interval,label:!1,minTickGap:Jt.minTickGap,mirror:Jt.mirror,orientation:Jt.orientation,padding:Jt.padding,reversed:Jt.reversed,scale:Jt.scale,tick:Jt.tick,tickCount:Jt.tickCount,tickLine:Pa.tickLine,tickSize:Pa.tickSize,type:Jt.type,xAxisId:0},iY=e=>{var t=zr(e,aY);return b.createElement(b.Fragment,null,b.createElement(rY,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),b.createElement(nY,t))},ny=b.memo(iY,PM);ny.displayName="XAxis";var sY=["type"],lY=["dangerouslySetInnerHTML","ticks","scale"],oY=["id","scale"];function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ay.apply(null,arguments)}function W2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Z2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(r),!0).forEach(function(a){cY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cY(e,t,r){return(t=uY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=dY(e,"string");return typeof t=="symbol"?t:t+""}function dY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iy(e,t){if(e==null)return{};var r,a,l=fY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function fY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function mY(e){var t=qt(),r=b.useRef(null),a=sz(),{type:l}=e,o=iy(e,sY),u=Pm(a,"yAxis",l),d=b.useMemo(()=>{if(u!=null)return Z2(Z2({},o),{},{type:u})},[u,o]);return b.useLayoutEffect(()=>{d!=null&&(r.current===null?t(TG(d)):r.current!==d&&t(qG({prev:r.current,next:d})),r.current=d)},[d,t]),b.useLayoutEffect(()=>()=>{r.current&&(t(RG(r.current)),r.current=null)},[t]),null}function pY(e){var{yAxisId:t,className:r,width:a,label:l}=e,o=b.useRef(null),u=b.useRef(null),d=ze(Dy),m=Nr(),p=qt(),h="yAxis",v=ze(M=>iD(M,t)),y=ze(M=>f7(M,t)),x=ze(M=>oD(M,h,t,m)),_=ze(M=>EO(M,t));if(b.useLayoutEffect(()=>{if(!(a!=="auto"||!v||qb(l)||b.isValidElement(l)||_==null)){var M=o.current;if(M){var P=M.getCalculatedWidth();Math.round(v.width)!==Math.round(P)&&p(LG({id:t,width:P}))}}},[x,v,p,l,t,a,_]),v==null||y==null||_==null)return null;var{dangerouslySetInnerHTML:N,ticks:S,scale:C}=e,z=iy(e,lY),{id:w,scale:E}=_,O=iy(_,oY);return b.createElement(Ib,ay({},z,O,{ref:o,labelRef:u,x:y.x,y:y.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:v.width,height:v.height,className:mt("recharts-".concat(h," ").concat(h),r),viewBox:d,ticks:x,axisType:h}))}var hY={allowDataOverflow:er.allowDataOverflow,allowDecimals:er.allowDecimals,allowDuplicatedCategory:er.allowDuplicatedCategory,angle:er.angle,axisLine:Pa.axisLine,hide:!1,includeHidden:er.includeHidden,interval:er.interval,label:!1,minTickGap:er.minTickGap,mirror:er.mirror,orientation:er.orientation,padding:er.padding,reversed:er.reversed,scale:er.scale,tick:er.tick,tickCount:er.tickCount,tickLine:Pa.tickLine,tickSize:Pa.tickSize,type:er.type,width:er.width,yAxisId:0},vY=e=>{var t=zr(e,hY);return b.createElement(b.Fragment,null,b.createElement(mY,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),b.createElement(pY,t))},sy=b.memo(vY,PM);sy.displayName="YAxis";var gY=(e,t)=>t,Ub=ae([gY,lt,wO,lr,wD,Wa,A9,ar],P9),Fb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},TM=_n("mouseClick"),qM=Fc();qM.startListening({actionCreator:TM,effect:(e,t)=>{var r=e.payload,a=Ub(t.getState(),Fb(r));a?.activeIndex!=null&&t.dispatch(C7({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var ly=_n("mouseMove"),RM=Fc(),qd=null;RM.startListening({actionCreator:ly,effect:(e,t)=>{var r=e.payload;qd!==null&&cancelAnimationFrame(qd);var a=Fb(r);qd=requestAnimationFrame(()=>{var l=t.getState(),o=Sb(l,l.tooltip.settings.shared);if(o==="axis"){var u=Ub(l,a);u?.activeIndex!=null?t.dispatch(vD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(hD())}qd=null})}});function xY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var J2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},LM=Fr({name:"rootProps",initialState:J2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:J2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),yY=LM.reducer,{updateOptions:bY}=LM.actions,jY=null,NY={updatePolarOptions:(e,t)=>t.payload},IM=Fr({name:"polarOptions",initialState:jY,reducers:NY}),{updatePolarOptions:uZ}=IM.actions,_Y=IM.reducer,$M=_n("keyDown"),BM=_n("focus"),Gb=Fc();Gb.startListening({actionCreator:$M,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=r.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=wb(l,no(r),Jc(r),tu(r)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var m=Wa(r);if(o==="Enter"){var p=If(r,"axis","hover",String(l.index));t.dispatch(Vx({active:!l.active,activeIndex:l.index,activeCoordinate:p}));return}var h=v7(r),v=h==="left-to-right"?1:-1,y=o==="ArrowRight"?1:-1,x=d+y*v;if(!(m==null||x>=m.length||x<0)){var _=If(r,"axis","hover",String(x));t.dispatch(Vx({active:!0,activeIndex:x.toString(),activeCoordinate:_}))}}}}}});Gb.startListening({actionCreator:BM,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=r.tooltip;if(!l.active&&l.index==null){var o="0",u=If(r,"axis","hover",String(o));t.dispatch(Vx({active:!0,activeIndex:o,activeCoordinate:u}))}}}});var yn=_n("externalEvent"),UM=Fc(),ex=new Map;UM.startListening({actionCreator:yn,effect:(e,t)=>{var{handler:r,reactEvent:a}=e.payload;if(r!=null){a.persist();var l=a.type,o=ex.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var d=t.getState(),m={activeCoordinate:d9(d),activeDataKey:zD(d),activeIndex:Es(d),activeLabel:ED(d),activeTooltipIndex:Es(d),isTooltipActive:f9(d)};r(m,a)}finally{ex.delete(l)}});ex.set(l,u)}}});var SY=ae([to],e=>e.tooltipItemPayloads),wY=ae([SY,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var a=e.find(o=>o.settings.graphicalItemId===r);if(a!=null){var{getPosition:l}=a;if(l!=null)return l(t)}}}),FM=_n("touchMove"),GM=Fc();GM.startListening({actionCreator:FM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var a=t.getState(),l=Sb(a,a.tooltip.settings.shared);if(l==="axis"){var o=r.touches[0];if(o==null)return;var u=Ub(a,Fb({clientX:o.clientX,clientY:o.clientY,currentTarget:r.currentTarget}));u?.activeIndex!=null&&t.dispatch(vD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(l==="item"){var d,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var p=document.elementFromPoint(m.clientX,m.clientY);if(!p||!p.getAttribute)return;var h=p.getAttribute(d6),v=(d=p.getAttribute(f6))!==null&&d!==void 0?d:void 0,y=ro(a).find(N=>N.id===v);if(h==null||y==null||v==null)return;var{dataKey:x}=y,_=wY(a,h,v);t.dispatch(pD({activeDataKey:x,activeIndex:h,activeCoordinate:_,activeGraphicalItemId:v}))}}}});var CY=NE({brush:aH,cartesianAxis:IG,chartData:dU,errorBars:ZH,graphicalItems:gG,layout:V4,legend:nL,options:sU,polarAxis:IF,polarOptions:_Y,referenceElements:oH,rootProps:yY,tooltip:A7,zIndex:Y9}),AY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return x4({reducer:CY,preloadedState:t,middleware:a=>{var l;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([qM.middleware,RM.middleware,Gb.middleware,UM.middleware,GM.middleware])},enhancers:a=>{var l=a;return typeof a=="function"&&(l=a()),l.concat(RE({type:"raf"}))},devTools:{serialize:{replacer:xY},name:"recharts-".concat(r)}})};function EY(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,l=Nr(),o=b.useRef(null);if(l)return r;o.current==null&&(o.current=AY(t,a));var u=Sy;return b.createElement(AQ,{context:u,store:o.current},r)}function zY(e){var{layout:t,margin:r}=e,a=qt(),l=Nr();return b.useEffect(()=>{l||(a(G4(t)),a(F4(r)))},[a,l,t,r]),null}var OY=b.memo(zY,Hm);function DY(e){var t=qt();return b.useEffect(()=>{t(bY(e))},[t,e]),null}function eA(e){var{zIndex:t,isPanorama:r}=e,a=b.useRef(null),l=qt();return b.useLayoutEffect(()=>(a.current&&l(Q9({zIndex:t,element:a.current,isPanorama:r})),()=>{l(V9({zIndex:t,isPanorama:r}))}),[l,t,r]),b.createElement("g",{tabIndex:-1,ref:a})}function tA(e){var{children:t,isPanorama:r}=e,a=ze(q9);if(!a||a.length===0)return t;var l=a.filter(u=>u<0),o=a.filter(u=>u>0);return b.createElement(b.Fragment,null,l.map(u=>b.createElement(eA,{key:u,zIndex:u,isPanorama:r})),t,o.map(u=>b.createElement(eA,{key:u,zIndex:u,isPanorama:r})))}var MY=["children"];function kY(e,t){if(e==null)return{};var r,a,l=PY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function PY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Vf(){return Vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vf.apply(null,arguments)}var TY={width:"100%",height:"100%",display:"block"},qY=b.forwardRef((e,t)=>{var r=az(),a=iz(),l=hz();if(!aa(r)||!aa(a))return null;var{children:o,otherAttributes:u,title:d,desc:m}=e,p,h;return u!=null&&(typeof u.tabIndex=="number"?p=u.tabIndex:p=l?0:void 0,typeof u.role=="string"?h=u.role:h=l?"application":void 0),b.createElement($A,Vf({},u,{title:d,desc:m,role:h,tabIndex:p,width:r,height:a,style:TY,ref:t}),o)}),RY=e=>{var{children:t}=e,r=ze(xm);if(!r)return null;var{width:a,height:l,y:o,x:u}=r;return b.createElement($A,{width:a,height:l,x:u,y:o},t)},rA=b.forwardRef((e,t)=>{var{children:r}=e,a=kY(e,MY),l=Nr();return l?b.createElement(RY,null,b.createElement(tA,{isPanorama:!0},r)):b.createElement(qY,Vf({ref:t},a),b.createElement(tA,{isPanorama:!1},r))});function LY(){var e=qt(),[t,r]=b.useState(null),a=ze(u6);return b.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;Xe(o)&&o!==a&&e(Q4(o))}},[t,e,a]),r}function nA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function IY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nA(Object(r),!0).forEach(function(a){$Y(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $Y(e,t,r){return(t=BY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=UY(e,"string");return typeof t=="symbol"?t:t+""}function UY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mi.apply(null,arguments)}var FY=()=>(bU(),null);function Yf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var GY=b.forwardRef((e,t)=>{var r,a,l=b.useRef(null),[o,u]=b.useState({containerWidth:Yf((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Yf((a=e.style)===null||a===void 0?void 0:a.height)}),d=b.useCallback((p,h)=>{u(v=>{var y=Math.round(p),x=Math.round(h);return v.containerWidth===y&&v.containerHeight===x?v:{containerWidth:y,containerHeight:x}})},[]),m=b.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null&&typeof ResizeObserver<"u"){var{width:h,height:v}=p.getBoundingClientRect();d(h,v);var y=_=>{var N=_[0];if(N!=null){var{width:S,height:C}=N.contentRect;d(S,C)}},x=new ResizeObserver(y);x.observe(p),l.current=x}},[t,d]);return b.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[d]),b.createElement(b.Fragment,null,b.createElement(Hc,{width:o.containerWidth,height:o.containerHeight}),b.createElement("div",Mi({ref:m},e)))}),HY=b.forwardRef((e,t)=>{var{width:r,height:a}=e,[l,o]=b.useState({containerWidth:Yf(r),containerHeight:Yf(a)}),u=b.useCallback((m,p)=>{o(h=>{var v=Math.round(m),y=Math.round(p);return h.containerWidth===v&&h.containerHeight===y?h:{containerWidth:v,containerHeight:y}})},[]),d=b.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:p,height:h}=m.getBoundingClientRect();u(p,h)}},[t,u]);return b.createElement(b.Fragment,null,b.createElement(Hc,{width:l.containerWidth,height:l.containerHeight}),b.createElement("div",Mi({ref:d},e)))}),QY=b.forwardRef((e,t)=>{var{width:r,height:a}=e;return b.createElement(b.Fragment,null,b.createElement(Hc,{width:r,height:a}),b.createElement("div",Mi({ref:t},e)))}),VY=b.forwardRef((e,t)=>{var{width:r,height:a}=e;return typeof r=="string"||typeof a=="string"?b.createElement(HY,Mi({},e,{ref:t})):typeof r=="number"&&typeof a=="number"?b.createElement(QY,Mi({},e,{width:r,height:a,ref:t})):b.createElement(b.Fragment,null,b.createElement(Hc,{width:r,height:a}),b.createElement("div",Mi({ref:t},e)))});function YY(e){return e?GY:VY}var KY=b.forwardRef((e,t)=>{var{children:r,className:a,height:l,onClick:o,onContextMenu:u,onDoubleClick:d,onMouseDown:m,onMouseEnter:p,onMouseLeave:h,onMouseMove:v,onMouseUp:y,onTouchEnd:x,onTouchMove:_,onTouchStart:N,style:S,width:C,responsive:z,dispatchTouchEvents:w=!0}=e,E=b.useRef(null),O=qt(),[M,P]=b.useState(null),[q,L]=b.useState(null),Y=LY(),W=My(),B=W?.width>0?W.width:C,Q=W?.height>0?W.height:l,k=b.useCallback(ie=>{Y(ie),typeof t=="function"&&t(ie),P(ie),L(ie),ie!=null&&(E.current=ie)},[Y,t,P,L]),T=b.useCallback(ie=>{O(TM(ie)),O(yn({handler:o,reactEvent:ie}))},[O,o]),R=b.useCallback(ie=>{O(ly(ie)),O(yn({handler:p,reactEvent:ie}))},[O,p]),J=b.useCallback(ie=>{O(hD()),O(yn({handler:h,reactEvent:ie}))},[O,h]),H=b.useCallback(ie=>{O(ly(ie)),O(yn({handler:v,reactEvent:ie}))},[O,v]),ve=b.useCallback(()=>{O(BM())},[O]),U=b.useCallback(ie=>{O($M(ie.key))},[O]),ge=b.useCallback(ie=>{O(yn({handler:u,reactEvent:ie}))},[O,u]),re=b.useCallback(ie=>{O(yn({handler:d,reactEvent:ie}))},[O,d]),me=b.useCallback(ie=>{O(yn({handler:m,reactEvent:ie}))},[O,m]),xe=b.useCallback(ie=>{O(yn({handler:y,reactEvent:ie}))},[O,y]),he=b.useCallback(ie=>{O(yn({handler:N,reactEvent:ie}))},[O,N]),F=b.useCallback(ie=>{w&&O(FM(ie)),O(yn({handler:_,reactEvent:ie}))},[O,w,_]),de=b.useCallback(ie=>{O(yn({handler:x,reactEvent:ie}))},[O,x]),Ee=YY(z);return b.createElement(qD.Provider,{value:M},b.createElement(ZR.Provider,{value:q},b.createElement(Ee,{width:B??S?.width,height:Q??S?.height,className:mt("recharts-wrapper",a),style:IY({position:"relative",cursor:"default",width:B,height:Q},S),onClick:T,onContextMenu:ge,onDoubleClick:re,onFocus:ve,onKeyDown:U,onMouseDown:me,onMouseEnter:R,onMouseLeave:J,onMouseMove:H,onMouseUp:xe,onTouchEnd:de,onTouchMove:F,onTouchStart:he,ref:k},b.createElement(FY,null),r)))}),XY=["width","height","responsive","children","className","style","compact","title","desc"];function WY(e,t){if(e==null)return{};var r,a,l=ZY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function ZY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var JY=b.forwardRef((e,t)=>{var{width:r,height:a,responsive:l,children:o,className:u,style:d,compact:m,title:p,desc:h}=e,v=WY(e,XY),y=Tn(v);return m?b.createElement(b.Fragment,null,b.createElement(Hc,{width:r,height:a}),b.createElement(rA,{otherAttributes:y,title:p,desc:h},o)):b.createElement(KY,{className:u,style:d,width:r,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(rA,{otherAttributes:y,title:p,desc:h,ref:t},b.createElement(uH,null,o)))});function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},oy.apply(null,arguments)}var eK={top:5,right:5,bottom:5,left:5},tK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:eK,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},HM=b.forwardRef(function(t,r){var a,l=zr(t.categoricalChartProps,tK),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,categoricalChartProps:p}=t,h={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return b.createElement(EY,{preloadedState:{options:h},reduxStoreName:(a=p.id)!==null&&a!==void 0?a:o},b.createElement(nH,{chartData:p.data}),b.createElement(OY,{layout:l.layout,margin:l.margin}),b.createElement(DY,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),b.createElement(JY,oy({},l,{ref:r})))}),rK=["axis"],nK=b.forwardRef((e,t)=>b.createElement(HM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:rK,tooltipPayloadSearcher:RD,categoricalChartProps:e,ref:t})),aK=["axis","item"],iK=b.forwardRef((e,t)=>b.createElement(HM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aK,tooltipPayloadSearcher:RD,categoricalChartProps:e,ref:t}));const sK=8,lK=12,oK=14,cK=1;function Hb(e){return e instanceof Fe?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function aA(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function Qm(){const e=new Date,t=e.getDay(),r=t===0?-6:1-t,a=new Date(e);return a.setDate(e.getDate()+r),a.setHours(0,0,0,0),a}function uK(){const e=Qm(),t=new Date(e);return t.setDate(e.getDate()+6),t.setHours(23,59,59,999),t}function tx(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function Vm(e){try{const t=Le(_e(oe,"quiz_results"),Ae("userId","==",e),nt("datePassage","desc"));return(await Te(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){return console.error("Erreur rcupration rsultats lve:",t),[]}}async function dK(e){try{const t=await Vm(e);if(t.length===0)return[];const r=new Map;t.forEach(o=>{const u=o.disciplineId;r.has(u)||r.set(u,[]),r.get(u).push(o)});const a=[];r.forEach((o,u)=>{if(o.length<cK)return;const d=o.map(S=>S.pourcentage/100*20),m=d.reduce((S,C)=>S+C,0)/d.length;if(m>=oK)return;let p="stable";if(d.length>=3){const S=d.slice(0,2),C=d.slice(2,4),z=S.reduce((O,M)=>O+M,0)/S.length,w=C.reduce((O,M)=>O+M,0)/C.length,E=z-w;E>1.5?p="hausse":E<-1.5&&(p="baisse")}let h="modere";m<sK?h="critique":m<lK&&(h="important");const v=d[0],y=Math.max(...d),x=Math.min(...d),_=Hb(o[0].datePassage),N=o[0].disciplineNom||"Discipline inconnue";a.push({id:`lacune_${u}`,disciplineId:u,disciplineNom:N,moyenne:Math.round(m*10)/10,nombreQuiz:o.length,tendance:p,niveauUrgence:h,dernierQuizDate:_,scoreDetails:{dernierScore:Math.round(v*10)/10,meilleurScore:Math.round(y*10)/10,pireScore:Math.round(x*10)/10}})});const l={critique:0,important:1,modere:2};return a.sort((o,u)=>{const d=l[o.niveauUrgence]-l[u.niveauUrgence];return d!==0?d:o.moyenne-u.moyenne}),a}catch(t){return console.error("Erreur dtection lacunes:",t),[]}}function fK(e){const t=[];let r=1;return e.forEach(a=>{const{id:l,disciplineNom:o,niveauUrgence:u,moyenne:d,tendance:m}=a;switch(u){case"critique":t.push({id:`reco_cours_${l}`,lacuneId:l,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${d}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date}),t.push({id:`reco_quiz_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break;case"important":t.push({id:`reco_exercice_${l}`,lacuneId:l,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${d}/20 de moyenne, concentre-toi sur les exercices pratiques. ${m==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date}),t.push({id:`reco_cours2_${l}`,lacuneId:l,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break;case"modere":t.push({id:`reco_consolider_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${d}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break}}),t}async function mK(e){try{const t=await Vm(e);if(t.length===0)return{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const r=new Set;t.forEach(N=>{const S=Hb(N.datePassage),C=`${S.getFullYear()}-${S.getMonth()}-${S.getDate()}`;r.add(C)});const a=Array.from(r).map(N=>{const[S,C,z]=N.split("-").map(Number);return new Date(S,C,z)}).sort((N,S)=>S.getTime()-N.getTime()),l=a.length,o=a[0];let u=0;const d=new Date;d.setHours(0,0,0,0);const m=a[0];if(tx(m,d)<=1){u=1;for(let N=1;N<a.length&&tx(a[N],a[N-1])===1;N++)u++}let h=0,v=1;for(let N=1;N<a.length;N++)tx(a[N],a[N-1])===1?v++:(h=Math.max(h,v),v=1);h=Math.max(h,v,u);const y=Qm(),x=[];for(let N=0;N<7;N++){const S=new Date(y);S.setDate(y.getDate()+N);const C=a.some(z=>aA(z,S));x.push(C)}const _=[];for(let N=0;N<4;N++){const S=new Date(y);S.setDate(y.getDate()-N*7);let C=0;for(let w=0;w<7;w++){const E=new Date(S);E.setDate(S.getDate()+w),a.some(O=>aA(O,E))&&C++}const z=Math.ceil((S.getDate()+new Date(S.getFullYear(),S.getMonth(),1).getDay())/7);_.push({semaine:N===0?"Cette sem.":`Sem. -${N}`,joursActifs:C})}return{userId:e,streakActuel:u,meilleurStreak:h,dernierJourActif:o,totalJoursActifs:l,semaineCourante:x,historiqueHebdo:_.reverse()}}catch(t){return console.error("Erreur calcul streak:",t),{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function pK(e,t,r){const a=[],l=Qm(),o=uK(),u=t.length>2?5:3;if(a.push({id:`obj_quiz_${e}_${l.getTime()}`,userId:e,titre:`Passer ${u} quiz cette semaine`,description:`Entrane-toi en passant au moins ${u} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:u,progression:0,statut:"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Travailleur"'}),t.length>0){const m=t[0],p=Math.min(m.moyenne+3,14);a.push({id:`obj_score_${e}_${l.getTime()}`,userId:e,titre:`Atteindre ${Math.round(p)}/20 en ${m.disciplineNom}`,description:`Ta moyenne actuelle est de ${m.moyenne}/20. Vise ${Math.round(p)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(p),progression:Math.round(m.moyenne),statut:"en_cours",disciplineId:m.disciplineId,disciplineNom:m.disciplineNom,dateDebut:l,dateFin:o,recompense:' Badge "En progrs"'})}const d=r.streakActuel>=5?7:r.streakActuel+2;return a.push({id:`obj_streak_${e}_${l.getTime()}`,userId:e,titre:`Maintenir un streak de ${d} jours`,description:`Tu es actuellement  ${r.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:d,progression:r.streakActuel,statut:r.streakActuel>=d?"atteint":"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Flamme"'}),a}function hK(e,t,r,a){let l=0;if(a.length>0){const v=a.reduce((y,x)=>y+x.pourcentage/100*20,0)/a.length;l=Math.min(v/20*100,100)}let o=100;const u=e.filter(v=>v.niveauUrgence==="critique").length,d=e.filter(v=>v.niveauUrgence==="important").length;o-=u*25,o-=d*15,o=Math.max(o,0);const m=Math.min(t.streakActuel/7*100,100);let p=0;r.length>0&&(p=r.filter(y=>y.statut==="atteint").length/r.length*100);const h=l*.4+o*.25+m*.2+p*.15;return Math.round(Math.min(Math.max(h,0),100))}function vK(e,t,r){const a=Qm(),l=t.filter(o=>Hb(o.datePassage)>=a);return e.map(o=>{const u={...o};switch(o.type){case"quiz_count":u.progression=l.length;break;case"score_min":if(o.disciplineId){const d=l.filter(m=>m.disciplineId===o.disciplineId);if(d.length>0){const m=Math.max(...d.map(p=>p.pourcentage));u.progression=Math.round(m/100*20)}}break;case"streak":u.progression=r.streakActuel;break}return u.progression>=u.cible&&(u.statut="atteint"),u})}async function Qb(e){try{const t=await dK(e),r=fK(t),a=await mK(e);let l=pK(e,t,a);const o=await Vm(e);l=vK(l,o,a);const u=hK(t,a,l,o);return{lacunes:t,recommandations:r,streak:a,objectifs:l,scoreGlobal:u}}catch(t){return console.error("Erreur suivi complet:",t),{lacunes:[],recommandations:[],streak:{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function Kf(e){switch(e){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function QM(e){switch(e){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function VM(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function gK(e){return e>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":e>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":e>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":e>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function xK(e){return e.cible===0?0:Math.min(Math.round(e.progression/e.cible*100),100)}const yK="PEDA",bK=4,jK=5,NK=40,YM=5;function Da(e){return e instanceof Fe?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function KM(e){const t=new Date,r=t.getDay(),a=r===0?-6:1-r,l=new Date(t);return l.setDate(t.getDate()+a),l.setHours(0,0,0,0),l}function _K(e){const t=KM(),r=new Date(t);return r.setDate(t.getDate()+6),r.setHours(23,59,59,999),r}function iA(e){const t=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${e.getDate()} ${t[e.getMonth()]}`}function XM(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function SK(e){try{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let r="",a="";for(let u=0;u<bK;u++)r+=t.charAt(Math.floor(Math.random()*t.length)),a+=t.charAt(Math.floor(Math.random()*t.length));const l=`${yK}-${r}-${a}`,o=be(oe,"users",e);return await et(o,{codeParent:l,codeParentGenere:new Date}),l}catch(t){throw console.error("Erreur gnration code invitation:",t),new Error("Impossible de gnrer le code d'invitation")}}async function wK(e){try{const t=be(oe,"users",e),r=await Gt(t);if(!r.exists())throw new Error("lve introuvable");const a=r.data();return a.codeParent?a.codeParent:await SK(e)}catch(t){throw console.error("Erreur rcupration code invitation:",t),new Error("Impossible de rcuprer le code d'invitation")}}async function CK(e,t){try{const r=t.trim().toUpperCase(),a=_e(oe,"users"),l=Le(a,Ae("codeParent","==",r),Ae("role","==","eleve"),ta(1)),o=await Te(l);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=o.docs[0],d=u.data(),m=u.id,p=_e(oe,"liens_parent_enfant"),h=Le(p,Ae("parentId","==",e),Ae("enfantId","==",m),Ae("statut","==","actif"),ta(1));if(!(await Te(h)).empty)throw new Error("Cet enfant est dj li  votre compte.");const y={parentId:e,enfantId:m,enfantNom:d.displayName||d.email,enfantEmail:d.email,enfantClasse:d.classe||void 0,codeInvitation:r,statut:"actif",dateCreation:new Date};return{id:(await nr(p,y)).id,...y}}catch(r){throw console.error("Erreur liaison parent-enfant:",r),r}}async function AK(e){try{const t=_e(oe,"liens_parent_enfant"),r=Le(t,Ae("parentId","==",e),Ae("statut","==","actif"),nt("dateCreation","desc"));return(await Te(r)).docs.map(l=>({id:l.id,...l.data(),dateCreation:Da(l.data().dateCreation),dateDerniereConsultation:l.data().dateDerniereConsultation?Da(l.data().dateDerniereConsultation):void 0}))}catch(t){return console.error("Erreur rcupration enfants lis:",t),[]}}async function EK(e,t){try{const r=be(oe,"liens_parent_enfant",e),a=await Gt(r);if(!a.exists())throw new Error("Lien introuvable");if(a.data().parentId!==t)throw new Error("Action non autorise");await et(r,{statut:"revoque",dateRevocation:new Date})}catch(r){throw console.error("Erreur rvocation lien:",r),r}}async function zK(e,t){try{const r=_e(oe,"liens_parent_enfant"),a=Le(r,Ae("parentId","==",e),Ae("enfantId","==",t),Ae("statut","==","actif"),ta(1)),l=await Te(a);if(l.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=be(oe,"users",t),u=await Gt(o);if(!u.exists())throw new Error("Profil de l'enfant introuvable.");const d=u.data(),m=await Qb(t),p=await Vm(t),h=p.slice(0,YM).map(_=>({quizTitre:_.quizTitre||"Quiz",disciplineNom:_.disciplineNom||"Discipline",pourcentage:_.pourcentage,noteSur20:Math.round(_.pourcentage/100*20*10)/10,reussi:_.reussi,datePassage:Da(_.datePassage)})),v=await OK(e,t,d.displayName||d.email,m.lacunes,m.streak,m.scoreGlobal,p),y=DK(t,d.displayName||d.email,m,p),x=l.docs[0];return await et(be(oe,"liens_parent_enfant",x.id),{dateDerniereConsultation:new Date}),{enfant:{id:t,nom:d.displayName||d.email,email:d.email,classe:d.classe||void 0,derniereConnexion:d.lastLogin?Da(d.lastLogin):void 0},scoreGlobal:m.scoreGlobal,streak:{actuel:m.streak.streakActuel,meilleur:m.streak.meilleurStreak,semaineCourante:m.streak.semaineCourante},lacunes:m.lacunes.map(_=>({disciplineNom:_.disciplineNom,moyenne:_.moyenne,niveauUrgence:_.niveauUrgence,tendance:_.tendance})),objectifs:m.objectifs.map(_=>({titre:_.titre,progression:_.progression,cible:_.cible,statut:_.statut})),derniersQuiz:h,resume:y,alertes:v}}catch(r){throw console.error("Erreur dashboard parent:",r),r}}async function OK(e,t,r,a,l,o,u){const d=[],m=new Date;if(a.filter(h=>h.niveauUrgence==="critique").forEach(h=>{d.push({id:`alerte_parent_lacune_${h.id}`,parentId:e,enfantId:t,enfantNom:r,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${h.disciplineNom}`,message:`${r} a une moyenne de ${h.moyenne}/20 en ${h.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:m})}),l.dernierJourActif){const h=XM(Da(l.dernierJourActif),m);h>=jK&&d.push({id:`alerte_parent_inactif_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"inactivite",niveau:"important",titre:` ${r} est inactif`,message:`${r} n'a pas utilis PedaClic depuis ${h} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:m})}else u.length===0&&d.push({id:`alerte_parent_jamais_actif_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"inactivite",niveau:"modere",titre:` ${r} n'a pas encore commenc`,message:`${r} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:m});o<NK&&u.length>0&&d.push({id:`alerte_parent_score_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${r} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:m}),a.filter(h=>h.tendance==="hausse").forEach(h=>{d.push({id:`alerte_parent_progression_${h.id}`,parentId:e,enfantId:t,enfantNom:r,type:"progression",niveau:"info",titre:` Progression en ${h.disciplineNom}`,message:`Bonne nouvelle ! ${r} montre une tendance  la hausse en ${h.disciplineNom}.`,lue:!1,dateCreation:m})}),l.streakActuel>=5&&d.push({id:`alerte_parent_streak_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"objectif_atteint",niveau:"info",titre:` Streak de ${l.streakActuel} jours !`,message:`Flicitations ! ${r} maintient un streak de ${l.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:m});const p={critique:0,important:1,modere:2,info:3};return d.sort((h,v)=>p[h.niveau]-p[v.niveau]),d}function DK(e,t,r,a){const l=KM(),o=_K(),u=new Date(l);u.setDate(u.getDate()-7);const d=new Date(o);d.setDate(d.getDate()-7);const m=a.filter(E=>{const O=Da(E.datePassage);return O>=l&&O<=o}),p=a.filter(E=>{const O=Da(E.datePassage);return O>=u&&O<=d}),h=m.slice(0,YM).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:Da(E.datePassage)})),v=MK(m,p),y=new Set;m.forEach(E=>{const O=Da(E.datePassage);y.add(`${O.getFullYear()}-${O.getMonth()}-${O.getDate()}`)});const x=m.reduce((E,O)=>E+(O.tempsEcoule||5),0);let _=0;if(p.length>0){const E=p.reduce((O,M)=>O+M.pourcentage,0)/p.length;_=Math.round(E)}let N="stable";const S=r.scoreGlobal-_;S>5?N="hausse":S<-5&&(N="baisse");const C=r.lacunes.filter(E=>E.niveauUrgence==="critique"||E.niveauUrgence==="important").map(E=>E.disciplineNom),z=r.objectifs.filter(E=>E.statut==="atteint").length,w=`${iA(l)} - ${iA(o)} ${o.getFullYear()}`;return{enfantId:e,enfantNom:t,semaine:w,dateDebut:l,dateFin:o,scoreGlobal:r.scoreGlobal,scoreGlobalPrecedent:_,evolutionScore:N,nombreQuizSemaine:m.length,tempsEstimeMinutes:Math.round(x),joursActifsSemaine:y.size,streakActuel:r.streak.streakActuel,derniersQuiz:h,evolutionDisciplines:v,lacunesCritiques:r.lacunes.filter(E=>E.niveauUrgence==="critique").length,lacunesImportantes:r.lacunes.filter(E=>E.niveauUrgence==="important").length,disciplinesEnDifficulte:C,objectifsAtteints:z,objectifsTotal:r.objectifs.length}}function MK(e,t){const r=new Map;e.forEach(o=>{r.has(o.disciplineId)||r.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),r.get(o.disciplineId).scores.push(o.pourcentage)});const a=new Map;t.forEach(o=>{a.has(o.disciplineId)||a.set(o.disciplineId,[]),a.get(o.disciplineId).push(o.pourcentage)});const l=[];return r.forEach((o,u)=>{const d=o.scores.reduce((_,N)=>_+N,0)/o.scores.length,m=a.get(u)||[],p=m.length>0?m.reduce((_,N)=>_+N,0)/m.length:d,h=Math.round(d/100*20*10)/10,v=Math.round(p/100*20*10)/10,y=Math.round((h-v)*10)/10;let x="stable";y>1?x="hausse":y<-1&&(x="baisse"),l.push({disciplineNom:o.nom,disciplineId:u,moyenneSemainePrecedente:v,moyenneSemaineCourante:h,evolution:x,ecart:y})}),l}function kK(e){return Kf(e)}function PK(e){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[e]||"Alerte"}function sA(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function TK(e){return e>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":e>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":e>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":e>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function rx(e){const r=XM(e,new Date);return r===0?"Aujourd'hui":r===1?"Hier":r<7?`Il y a ${r} jours`:r<30?`Il y a ${Math.floor(r/7)} semaine(s)`:`Il y a ${Math.floor(r/30)} mois`}const qK="PROF",RK=4,Rd="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",WM=8,LK=7,IK=16;function Os(e){return e instanceof Fe?e.toDate():e instanceof Date?e:e?.seconds?new Fe(e.seconds,e.nanoseconds||0).toDate():new Date(e)}function $K(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function ZM(){let e=0;const t=10;for(;e<t;){let r="",a="";for(let d=0;d<RK;d++)r+=Rd.charAt(Math.floor(Math.random()*Rd.length)),a+=Rd.charAt(Math.floor(Math.random()*Rd.length));const l=`${qK}-${r}-${a}`,o=Le(_e(oe,"groupes_prof"),Ae("codeInvitation","==",l),ta(1));if((await Te(o)).empty)return l;e++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function BK(e,t,r){try{const a=await ZM(),l={profId:e,profNom:t,nom:r.nom.trim(),description:r.description?.trim()||"",matiereId:r.matiereId,matiereNom:r.matiereNom,classeNiveau:r.classeNiveau,codeInvitation:a,nombreInscrits:0,statut:"actif",anneeScolaire:r.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await nr(_e(oe,"groupes_prof"),l);return console.log(` Groupe "${r.nom}" cr avec code: ${a}`),{id:o.id,...l}}catch(a){throw console.error(" Erreur cration groupe:",a),new Error("Impossible de crer le groupe. Ressayez.")}}async function JM(e){try{const t=Le(_e(oe,"groupes_prof"),Ae("profId","==",e),nt("dateCreation","desc"));return(await Te(t)).docs.map(a=>({id:a.id,...a.data(),dateCreation:Os(a.data().dateCreation),dateMiseAJour:a.data().dateMiseAJour?Os(a.data().dateMiseAJour):void 0}))}catch(t){throw console.error(" Erreur rcupration groupes:",t),new Error("Impossible de charger vos groupes.")}}async function UK(e){try{const t=await Gt(be(oe,"groupes_prof",e));if(!t.exists())return null;const r=t.data();return{id:t.id,...r,dateCreation:Os(r.dateCreation),dateMiseAJour:r.dateMiseAJour?Os(r.dateMiseAJour):void 0}}catch(t){return console.error(" Erreur rcupration groupe:",t),null}}async function ek(e,t){try{const r=be(oe,"groupes_prof",e);await et(r,{...t,dateMiseAJour:new Date}),console.log(` Groupe ${e} mis  jour`)}catch(r){throw console.error(" Erreur modification groupe:",r),new Error("Impossible de modifier le groupe.")}}async function FK(e){try{const t=Nc(oe),r=Le(_e(oe,"inscriptions_groupe"),Ae("groupeId","==",e));(await Te(r)).docs.forEach(l=>t.delete(l.ref)),t.delete(be(oe,"groupes_prof",e)),await t.commit(),console.log(` Groupe ${e} et ses inscriptions supprims`)}catch(t){throw console.error(" Erreur suppression groupe:",t),new Error("Impossible de supprimer le groupe.")}}async function GK(e){await ek(e,{statut:"archive"})}async function HK(e){try{const t=await ZM();return await et(be(oe,"groupes_prof",e),{codeInvitation:t,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${e}: ${t}`),t}catch(t){throw console.error(" Erreur rgnration code:",t),new Error("Impossible de rgnrer le code.")}}async function QK(e,t,r,a){try{const l=a.trim().toUpperCase(),o=Le(_e(oe,"groupes_prof"),Ae("codeInvitation","==",l),ta(1)),u=await Te(o);if(u.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const d=u.docs[0],m=d.data();if(m.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const p=Le(_e(oe,"inscriptions_groupe"),Ae("groupeId","==",d.id),Ae("eleveId","==",e),Ae("statut","==","actif"),ta(1));if(!(await Te(p)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const v={groupeId:d.id,eleveId:e,eleveNom:t,eleveEmail:r,statut:"actif",dateInscription:new Date},y=await nr(_e(oe,"inscriptions_groupe"),v);return await et(be(oe,"groupes_prof",d.id),{nombreInscrits:Jf(1),dateMiseAJour:new Date}),console.log(` lve ${t} inscrit au groupe "${m.nom}"`),{id:y.id,...v}}catch(l){throw console.error(" Erreur inscription groupe:",l),l}}async function Ym(e,t="actif"){try{const r=Le(_e(oe,"inscriptions_groupe"),Ae("groupeId","==",e),Ae("statut","==",t),nt("dateInscription","asc"));return(await Te(r)).docs.map(l=>({id:l.id,...l.data(),dateInscription:Os(l.data().dateInscription),dateRetrait:l.data().dateRetrait?Os(l.data().dateRetrait):void 0}))}catch(r){throw console.error(" Erreur rcupration lves groupe:",r),new Error("Impossible de charger les lves du groupe.")}}async function VK(e){try{const t=Le(_e(oe,"inscriptions_groupe"),Ae("eleveId","==",e),Ae("statut","==","actif")),r=await Te(t);if(r.empty)return[];const a=[];for(const l of r.docs){const o=l.data().groupeId,u=await UK(o);u&&u.statut==="actif"&&a.push(u)}return a}catch(t){return console.error(" Erreur rcupration groupes lve:",t),[]}}async function YK(e,t){try{await et(be(oe,"inscriptions_groupe",e),{statut:"retire",dateRetrait:new Date}),await et(be(oe,"groupes_prof",t),{nombreInscrits:Jf(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(r){throw console.error(" Erreur retrait lve:",r),new Error("Impossible de retirer l'lve du groupe.")}}async function Vb(e){try{const r=(await Ym(e)).map(y=>y.eleveId);if(r.length===0)return{groupeId:e,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const a=[],l=[];for(let y=0;y<r.length;y+=10)l.push(r.slice(y,y+10));for(const y of l){const x=Le(_e(oe,"quiz_results"),Ae("userId","in",y));(await Te(x)).docs.forEach(N=>a.push({id:N.id,...N.data()}))}const o=new Map;for(const y of a){const x=y.userId;o.has(x)||o.set(x,{total:0,somme:0,reussis:0});const _=o.get(x);_.total++,_.somme+=y.score||0,(y.score||0)>=10&&_.reussis++}let u=0,d=0,m=0,p=0,h=20,v=0;for(const[,y]of o){const x=y.total>0?y.somme/y.total:0;u+=x,d++,v+=y.total,x<WM&&m++,x>p&&(p=x),x<h&&(h=x)}return d===0&&(h=0),{groupeId:e,nombreEleves:r.length,moyenneClasse:d>0?Math.round(u/d*10)/10:0,tauxReussite:v>0?Math.round(Array.from(o.values()).reduce((y,x)=>y+x.reussis,0)/v*100):0,tauxParticipation:Math.round(d/r.length*100),totalQuizPasses:v,elevesEnDifficulte:m,meilleureNote:Math.round(p*10)/10,pireNote:Math.round(h*10)/10,derniereMiseAJour:new Date}}catch(t){throw console.error(" Erreur calcul stats groupe:",t),new Error("Impossible de calculer les statistiques du groupe.")}}async function KK(e){try{const t=await Ym(e);if(t.length===0)return[];const r=[];for(const a of t)try{const l=await Qb(a.eleveId),o=Le(_e(oe,"quiz_results"),Ae("userId","==",a.eleveId),nt("datePassage","desc")),d=(await Te(o)).docs.map(x=>x.data());let m=0,p=0,h;if(d.length>0){const x=d.reduce((_,N)=>_+(N.score||0),0);m=Math.round(x/d.length*10)/10,p=Math.round(d.filter(_=>(_.score||0)>=10).length/d.length*100),h=Os(d[0].datePassage)}let v="stable";if(d.length>=4){const x=d.slice(0,Math.ceil(d.length/2)),_=d.slice(Math.ceil(d.length/2)),N=x.reduce((C,z)=>C+(z.score||0),0)/x.length,S=_.reduce((C,z)=>C+(z.score||0),0)/_.length;N-S>1?v="hausse":S-N>1&&(v="baisse")}const y=l.lacunes.map(x=>({disciplineNom:x.disciplineNom,chapitre:x.chapitre,moyenne:x.moyenne,niveauUrgence:x.niveauUrgence}));r.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:m,totalQuiz:d.length,tauxReussite:p,scoreGlobal:l.scoreGlobal,streak:{actuel:l.streak.streakActuel,meilleur:l.streak.meilleurStreak},lacunes:y,dernierQuiz:h,tendance:v})}catch(l){console.warn(` Suivi incomplet pour lve ${a.eleveNom}:`,l),r.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return r.sort((a,l)=>l.moyenne-a.moyenne),r}catch(t){throw console.error(" Erreur stats lves groupe:",t),new Error("Impossible de charger les statistiques des lves.")}}async function XK(e,t,r){try{const l=(await Ym(e)).map(x=>x.eleveId);if(l.length===0)return null;let o=null,u="quiz_results";if(r!=="quizzes_v2"){if(r!=="quizzes"){const x=await Gt(be(oe,"quizzes_v2",t));if(x.exists())o=x.data(),u="quiz_results_v2";else{const _=await Gt(be(oe,"quizzes",t));_.exists()&&(o=_.data(),u="quiz_results")}}}if(!o)return null;const d=[],m=[];for(let x=0;x<l.length;x+=10)m.push(l.slice(x,x+10));for(const x of m){const _=Le(_e(oe,u),Ae("quizId","==",t),Ae("userId","in",x));(await Te(_)).docs.forEach(S=>d.push(S.data()))}if(d.length===0)return null;const p=u==="quiz_results_v2",h=d.map(x=>p?x.note20||(x.scoreMax>0?x.score/x.scoreMax*20:0):x.score||0),v=d.map(x=>x.tempsEcoule||0),y=[];if(p&&o.questions)for(let x=0;x<o.questions.length;x++){const _=o.questions[x];let N=0,S=0;for(const w of d){const E=w.detailsParQuestion?.find(O=>O.questionId===_.id);E&&(S++,E.isCorrect||N++)}const C=S>0?Math.round(N/S*100):0,z=_.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${x+1}`;y.push({questionIndex:x,questionTexte:z,tauxEchec:C,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let x=0;x<o.questions.length;x++){const _=o.questions[x];let N=0;const S=new Map;for(const w of d){const E=w.reponses?.[x];E!==void 0&&(S.set(E,(S.get(E)||0)+1),E!==_.reponseCorrecte&&N++)}const C=Math.round(N/d.length*100),z=Array.from(S.entries()).filter(([w])=>w!==_.reponseCorrecte).map(([w,E])=>({reponse:_.options?.[w]||`Option ${w+1}`,nombre:E})).sort((w,E)=>E.nombre-w.nombre);y.push({questionIndex:x,questionTexte:_.question,tauxEchec:C,reponseCorrecte:_.options?.[_.reponseCorrecte]||"N/A",reponsesFrequentes:z})}return y.sort((x,_)=>_.tauxEchec-x.tauxEchec),{quizId:t,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:d.length,moyenneScore:Math.round(h.reduce((x,_)=>x+_,0)/h.length*10)/10,tauxReussite:Math.round(h.filter(x=>x>=10).length/h.length*100),tempsEcouleMoyen:Math.round(v.reduce((x,_)=>x+_,0)/v.length),questionsRatees:y}}catch(a){return console.error(" Erreur analyse quiz groupe:",a),null}}async function WK(e){try{const t=[];try{const r=Le(_e(oe,"quizzes"),Ae("disciplineId","==",e),nt("createdAt","desc"));(await Te(r)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(r){console.warn(" Recherche quizzes choue (index manquant ?):",r)}try{const r=Le(_e(oe,"quizzes_v2"),Ae("disciplineId","==",e),nt("createdAt","desc"));(await Te(r)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(r){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",r)}return console.log(` ${t.length} quiz trouv(s) pour discipline ${e}`),t}catch(t){return console.error(" Erreur rcupration quiz par matire:",t),[]}}function ZK(e,t){const r=[],a=new Date;for(const o of e){if(o.totalQuiz>0&&o.moyenne<WM&&r.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(u=>u.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:a}),o.dernierQuiz){const u=$K(o.dernierQuiz,a);u>=LK&&r.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a pas fait de quiz depuis ${u} jours.`,niveauUrgence:u>=14?"important":"info",dateCreation:a})}else o.totalQuiz===0&&r.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:a});o.tendance==="baisse"&&o.totalQuiz>=4&&r.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:a}),o.moyenne>=IK&&o.totalQuiz>=3&&r.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:a})}const l={critique:0,important:1,info:2};return r.sort((o,u)=>l[o.niveauUrgence]-l[u.niveauUrgence]),r}function JK(e,t){const r=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],a=e.map(o=>{const u=o.lacunes.map(d=>`${d.disciplineNom} (${d.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${u}"`,o.tendance].join(",")});return"\uFEFF"+[r.join(","),...a].join(`
`)}function eX(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),l=document.createElement("a");l.href=a,l.download=`${t}.csv`,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}const tX=()=>{const{currentUser:e}=Ct(),[t,r]=b.useState([]),[a,l]=b.useState(!1),[o,u]=b.useState(""),[d,m]=b.useState(!0),[p,h]=b.useState(!1),[v,y]=b.useState(null),[x,_]=b.useState(null),N=b.useCallback(async()=>{if(e?.uid)try{m(!0);const C=await VK(e.uid);r(C)}catch(C){console.error("Erreur chargement groupes:",C)}finally{m(!1)}},[e?.uid]);b.useEffect(()=>{N()},[N]);const S=async C=>{if(C.preventDefault(),!(!e?.uid||!o.trim()))try{h(!0),y(null),_(null),await QK(e.uid,e.displayName||e.email||"lve",e.email||"",o),_("Tu as rejoint le groupe avec succs ! "),u(""),l(!1),await N(),setTimeout(()=>_(null),5e3)}catch(z){y(z.message||"Impossible de rejoindre le groupe.")}finally{h(!1)}};return n.jsxs("div",{className:"rejoindre-groupe-section",children:[n.jsxs("div",{className:"rejoindre-groupe-header",children:[n.jsx("h3",{children:" Mes groupes-classes"}),n.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>l(!a),children:a?" Annuler":" Rejoindre un groupe"})]}),v&&n.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",v,n.jsx("button",{onClick:()=>y(null),className:"prof-alert-close",children:""})]}),x&&n.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:x}),a&&n.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[n.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),n.jsxs("form",{onSubmit:S,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:C=>u(C.target.value.toUpperCase()),maxLength:14,disabled:p,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),n.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:p||o.length<14,children:p?" Vrification...":" Rejoindre"})]})]}),d?n.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):t.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[n.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),n.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map(C=>n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#1f2937"},children:C.nom}),n.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[C.matiereNom,"  Prof: ",C.profNom]})]}),n.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},C.id))})]})},rX=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":e>0?"#ef4444":"#d1d5db",lA=({pourcentage:e,label:t,size:r="md",showPercent:a=!0,color:l,showCheck:o=!0,className:u=""})=>{const[d,m]=b.useState(0);b.useEffect(()=>{const x=setTimeout(()=>{m(Math.min(100,Math.max(0,e)))},100);return()=>clearTimeout(x)},[e]);const h={sm:"4px",md:"8px",lg:"12px"}[r],v=l||rX(e),y=e>=100;return n.jsxs("div",{className:`progress-bar-wrapper ${u}`,children:[(t||a)&&n.jsxs("div",{className:"progress-bar-header",children:[t&&n.jsx("span",{className:"progress-bar-label",children:t}),a&&n.jsxs("span",{className:"progress-bar-percent",style:{color:v},children:[y&&o?" ":"",e,"%"]})]}),n.jsx("div",{className:"progress-bar-track",style:{height:h},children:n.jsx("div",{className:"progress-bar-fill",style:{width:`${d}%`,backgroundColor:v,height:"100%"}})})]})},nX=()=>{const e=Ht(),{currentUser:t}=Ct(),[r,a]=b.useState(null),[l,o]=b.useState([]),[u,d]=b.useState([]),[m,p]=b.useState([]),[h,v]=b.useState([]),[y,x]=b.useState(null),[_,N]=b.useState([]),[S,C]=b.useState("all"),[z,w]=b.useState(!0),[E,O]=b.useState("overview"),[M,P]=b.useState(null),[q,L]=b.useState(!1),[Y,W]=b.useState(!1),B=async()=>{if(t){L(!0);try{const H=await wK(t.uid);P(H)}catch(H){console.error("Erreur gnration code parent :",H)}finally{L(!1)}}},Q=()=>{M&&(navigator.clipboard.writeText(M),W(!0),setTimeout(()=>W(!1),2e3))};if(b.useEffect(()=>{(async()=>{if(t){w(!0);try{await IR(t.uid);const[ve,U,ge,re,me,xe]=await Promise.all([zR(t.uid),OR(t.uid),DR(t.uid,20),em(t.uid,10),OA().catch(()=>[]),qR(t.uid)]);a(ve),o(U),d(ge),p(re),v(me),x(xe);const he=$R(ve,U,xe);N(he)}catch(ve){console.error("Erreur chargement dashboard :",ve)}finally{w(!1)}}})()},[t]),z)return n.jsxs("div",{className:"sd-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const k=_.filter(H=>H.obtenu),T=_.length,R=t?.displayName||t?.email?.split("@")[0]||"lve",J=S==="all"?_:_.filter(H=>H.categorie===S);return n.jsxs("div",{className:"student-dashboard",children:[n.jsxs("div",{className:"sd-welcome",children:[n.jsxs("div",{className:"sd-welcome-text",children:[n.jsxs("h1",{children:["Bienvenue, ",R," "]}),n.jsx("p",{children:r&&r.totalQuizPasses>0?`Vous avez pass ${r.totalQuizPasses} quiz avec une moyenne de ${r.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),n.jsxs("div",{className:"sd-welcome-badges-row",children:[t?.isPremium&&n.jsxs("span",{className:"sd-premium-badge",children:[n.jsx(Zr,{size:14})," Premium"]}),y&&y.streakActuel>0&&n.jsxs("span",{className:"sd-streak-badge",children:[" ",y.streakActuel," jour",y.streakActuel>1?"s":""]})]})]}),n.jsxs("div",{className:"sd-stats-grid",children:[n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:n.jsx(jn,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsx("span",{className:"sd-stat-value",children:r?.totalQuizPasses||0}),n.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:n.jsx(dv,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",style:{color:Ml(r?.moyenneGenerale||0)},children:[r?.moyenneGenerale||0,"%"]}),n.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:n.jsx(ql,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsx("span",{className:"sd-stat-value",children:y?.totalRessourcesVues||0}),n.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:n.jsx(bA,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",children:[y?.streakActuel||0," "]}),n.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:n.jsx(jA,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",children:[r?.meilleurScore||0,"%"]}),n.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:n.jsx(qi,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",children:[y?.disciplinesCompletees||0,"/",y?.disciplinesCommencees||0]}),n.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),n.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[n.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),n.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),M?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[n.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:M}),n.jsx("button",{className:"sd-btn",onClick:Q,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:Y?"#10b981":"#f3f4f6",color:Y?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:Y?" Copi !":" Copier"})]}):n.jsx("button",{className:"sd-btn sd-btn-primary",onClick:B,disabled:q,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:q?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):n.jsx(n.Fragment,{children:" Gnrer mon code"})})]}),n.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:n.jsx(tX,{})}),n.jsxs("div",{className:"sd-tabs",children:[n.jsxs("button",{className:`sd-tab ${E==="overview"?"active":""}`,onClick:()=>O("overview"),children:[n.jsx(xs,{size:16})," Vue d'ensemble"]}),n.jsxs("button",{className:`sd-tab ${E==="progression"?"active":""}`,onClick:()=>O("progression"),children:[n.jsx(fc,{size:16})," Progression"]}),n.jsxs("button",{className:`sd-tab ${E==="history"?"active":""}`,onClick:()=>O("history"),children:[n.jsx(fv,{size:16})," Historique"]}),n.jsxs("button",{className:`sd-tab ${E==="badges"?"active":""}`,onClick:()=>O("badges"),children:[n.jsx(qi,{size:16})," Badges (",k.length,"/",T,")"]})]}),E==="overview"&&n.jsxs("div",{className:"sd-overview",children:[u.length>1&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(fc,{size:18})," volution de vos scores"]}),n.jsx("div",{className:"sd-chart-container",children:n.jsx(US,{width:"100%",height:280,children:n.jsxs(nK,{data:u,children:[n.jsx(Zx,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(ny,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),n.jsx(sy,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),n.jsx(KC,{formatter:H=>[`${H}%`,"Score"],labelFormatter:H=>`Date : ${H}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),n.jsx(EM,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),l.length>0&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(xs,{size:18})," Moyennes par discipline"]}),n.jsx("div",{className:"sd-chart-container",children:n.jsx(US,{width:"100%",height:280,children:n.jsxs(iK,{data:l,layout:"vertical",children:[n.jsx(Zx,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),n.jsx(ny,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),n.jsx(sy,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),n.jsx(KC,{formatter:H=>[`${H}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),n.jsx(kM,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:l.map((H,ve)=>n.jsx(Pb,{fill:Ml(H.moyenne)},ve))})]})})})]}),h.length>0&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(gc,{size:18})," Quiz disponibles"]}),n.jsx("div",{className:"sd-quiz-grid",children:h.slice(0,6).map(H=>{const ve=H.isPremium&&!t?.isPremium;return n.jsxs("div",{className:`sd-quiz-card ${ve?"locked":""}`,onClick:()=>!ve&&e(`/quiz/${H.id}`),children:[H.isPremium&&n.jsxs("span",{className:"sd-quiz-badge-premium",children:[ve?n.jsx(ix,{size:10}):n.jsx(Zr,{size:10})," Premium"]}),n.jsx("h4",{className:"sd-quiz-title",children:H.titre}),n.jsxs("div",{className:"sd-quiz-meta",children:[n.jsxs("span",{children:[n.jsx(jn,{size:12})," ",H.questions.length," questions"]}),n.jsxs("span",{children:[n.jsx($l,{size:12})," ",H.duree," min"]})]}),!ve&&n.jsxs("button",{className:"sd-quiz-play-btn",children:[n.jsx(gc,{size:14})," Commencer"]}),ve&&n.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:U=>{U.stopPropagation(),e("/premium")},children:[n.jsx(ix,{size:14})," Dbloquer"]})]},H.id)})})]}),r&&r.totalQuizPasses===0&&(!y||y.totalRessourcesVues===0)&&n.jsxs("div",{className:"sd-empty-state",children:[n.jsx(dv,{size:48}),n.jsx("h3",{children:"Commencez votre parcours !"}),n.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),h.length>0&&n.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e(`/quiz/${h[0].id}`),children:[n.jsx(gc,{size:18})," Passer un quiz"]})]})]}),E==="progression"&&n.jsxs("div",{className:"sd-progression",children:[n.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(fc,{size:18})," Avancement global"]}),n.jsx(lA,{pourcentage:y?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),n.jsxs("div",{className:"sd-prog-stats-row",children:[n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsx("span",{className:"sd-prog-stat-number",children:y?.totalRessourcesVues||0}),n.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsx("span",{className:"sd-prog-stat-number",children:y?.totalQuizReussis||0}),n.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsx("span",{className:"sd-prog-stat-number",children:y?.disciplinesCommencees||0}),n.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsxs("span",{className:"sd-prog-stat-number",children:[" ",y?.streakActuel||0]}),n.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",y?.meilleurStreak||0,")"]})]})]})]}),y&&y.parDiscipline.length>0?n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(xs,{size:18})," Par discipline"]}),n.jsx("div",{className:"sd-prog-disciplines",children:y.parDiscipline.map(H=>n.jsxs("div",{className:"sd-prog-disc-card",children:[n.jsxs("div",{className:"sd-prog-disc-header",children:[n.jsx("span",{className:"sd-prog-disc-name",children:H.disciplineNom}),H.pourcentage>=100&&n.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),n.jsx(lA,{pourcentage:H.pourcentage,size:"md",showPercent:!0}),n.jsxs("div",{className:"sd-prog-disc-details",children:[n.jsxs("span",{children:[n.jsx(ql,{size:12})," ",H.ressourcesVues.length,"/",H.totalRessources," ressources"]}),n.jsxs("span",{children:[n.jsx(Dt,{size:12})," ",H.quizReussis.length,"/",H.totalQuiz," quiz russis"]})]})]},H.disciplineId))})]}):n.jsxs("div",{className:"sd-empty-state",children:[n.jsx(ql,{size:48}),n.jsx("h3",{children:"Aucune progression enregistre"}),n.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),l.length>0&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(dv,{size:18})," Performance quiz par discipline"]}),n.jsx("div",{className:"sd-disc-list",children:l.map(H=>n.jsxs("div",{className:"sd-disc-card",children:[n.jsxs("div",{className:"sd-disc-header",children:[n.jsx("span",{className:"sd-disc-name",children:H.disciplineNom}),n.jsxs("span",{className:"sd-disc-tendance",children:[H.tendance==="up"&&n.jsx(fc,{size:16,className:"tendance-up"}),H.tendance==="down"&&n.jsx(lq,{size:16,className:"tendance-down"}),H.tendance==="stable"&&n.jsx(oq,{size:16,className:"tendance-stable"})]})]}),n.jsxs("div",{className:"sd-disc-stats",children:[n.jsxs("div",{className:"sd-disc-stat",children:[n.jsxs("span",{className:"sd-disc-stat-value",style:{color:Ml(H.moyenne)},children:[H.moyenne,"%"]}),n.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),n.jsxs("div",{className:"sd-disc-stat",children:[n.jsx("span",{className:"sd-disc-stat-value",children:H.nombreQuiz}),n.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),n.jsxs("div",{className:"sd-disc-stat",children:[n.jsxs("span",{className:"sd-disc-stat-value",children:[H.meilleurScore,"%"]}),n.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),n.jsxs("div",{className:"sd-disc-stat",children:[n.jsxs("span",{className:"sd-disc-stat-value",children:[H.quizReussis,"/",H.nombreQuiz]}),n.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),n.jsx("div",{className:"sd-disc-bar",children:n.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${H.moyenne}%`,background:Ml(H.moyenne)}})})]},H.disciplineId))})]})]}),E==="history"&&n.jsx("div",{className:"sd-history",children:m.length===0?n.jsxs("div",{className:"sd-empty-state",children:[n.jsx(fv,{size:48}),n.jsx("h3",{children:"Aucun quiz pass"}),n.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):n.jsx("div",{className:"sd-history-list",children:m.map(H=>{const ve=H.datePassage?.toDate?H.datePassage.toDate():new Date(H.datePassage);return n.jsxs("div",{className:`sd-history-item ${H.reussi?"success":"fail"}`,children:[n.jsx("div",{className:`sd-history-icon ${H.reussi?"success":"fail"}`,children:H.reussi?n.jsx(Dt,{size:20}):n.jsx(sx,{size:20})}),n.jsxs("div",{className:"sd-history-content",children:[n.jsxs("div",{className:"sd-history-top",children:[n.jsx("span",{className:"sd-history-title",children:H.quizTitre}),n.jsx("span",{className:"sd-history-discipline",children:H.disciplineNom})]}),n.jsxs("div",{className:"sd-history-meta",children:[n.jsxs("span",{children:[n.jsx(fv,{size:12}),ve.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),n.jsxs("span",{children:[n.jsx($l,{size:12})," ",TA(H.tempsEcoule)]}),n.jsxs("span",{children:[n.jsx(Dt,{size:12})," ",H.bonnesReponses,"/",H.nombreQuestions]})]})]}),n.jsxs("div",{className:"sd-history-score",style:{color:Ml(H.pourcentage)},children:[n.jsxs("span",{className:"sd-history-score-value",children:[H.pourcentage,"%"]}),n.jsx("span",{className:"sd-history-score-label",children:qA(H.pourcentage)})]})]},H.id)})})}),E==="badges"&&n.jsxs("div",{className:"sd-badges",children:[n.jsxs("div",{className:"sd-badges-summary",children:[n.jsxs("div",{className:"sd-badges-circle",children:[n.jsx("span",{className:"sd-badges-count",children:k.length}),n.jsxs("span",{className:"sd-badges-total",children:["/ ",T]})]}),n.jsx("p",{children:"badges obtenus"}),n.jsx("div",{className:"sd-badges-progress",children:n.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${k.length/T*100}%`}})})]}),n.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(H=>n.jsx("button",{className:`sd-badge-filter-btn ${S===H.key?"active":""}`,onClick:()=>C(H.key),children:H.label},H.key))}),n.jsx("div",{className:"sd-badges-grid",children:J.map(H=>n.jsxs("div",{className:`sd-badge-card ${H.obtenu?"obtained":"locked"}`,children:[n.jsx("span",{className:"sd-badge-icon",children:H.icone}),n.jsx("h4",{className:"sd-badge-name",children:H.nom}),n.jsx("p",{className:"sd-badge-description",children:H.description}),n.jsx("span",{className:"sd-badge-condition",children:H.condition}),H.obtenu&&n.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),n.jsx("span",{className:"sd-badge-category",children:H.categorie})]},H.id))}),J.length===0&&n.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[n.jsx(uy,{size:36}),n.jsx("h3",{children:"Aucun badge dans cette catgorie"}),n.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},aX=()=>{const{currentUser:e}=Ct(),t=Ht(),[r,a]=b.useState(null),[l,o]=b.useState(!0),[u,d]=b.useState(null),m=["L","M","M","J","V","S","D"],p=b.useCallback(async()=>{if(e?.uid)try{o(!0),d(null);const w=await Qb(e.uid);a(w)}catch(w){console.error("Erreur chargement suivi:",w),d("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[e?.uid]);b.useEffect(()=>{p()},[p]);const h=(()=>{const w=new Date().getDay();return w===0?6:w-1})();if(l)return n.jsx("div",{className:"suivi-page",children:n.jsx("div",{className:"suivi-container",children:n.jsxs("div",{className:"suivi-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(u)return n.jsx("div",{className:"suivi-page",children:n.jsx("div",{className:"suivi-container",children:n.jsxs("div",{className:"suivi-error",children:[n.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),n.jsx("p",{className:"suivi-error-text",children:u}),n.jsx("button",{className:"suivi-btn-retry",onClick:p,children:" Ressayer"})]})})});if(!r)return null;const{lacunes:v,recommandations:y,streak:x,objectifs:_,scoreGlobal:N}=r,S=2*Math.PI*40,C=S-N/100*S,z=N>=60?"#10b981":N>=30?"#f59e0b":"#ef4444";return n.jsx("div",{className:"suivi-page",children:n.jsxs("div",{className:"suivi-container",children:[n.jsx("div",{className:"suivi-header",children:n.jsxs("div",{className:"suivi-header-content",children:[n.jsxs("div",{children:[n.jsx("h1",{children:" Mes points  amliorer"}),n.jsx("p",{className:"suivi-motivation",children:gK(N)})]}),n.jsxs("div",{className:"score-global-circle",children:[n.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[n.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),n.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:z,strokeDasharray:S,strokeDashoffset:C}),n.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:N})]}),n.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),n.jsxs("div",{className:"streak-card",children:[n.jsxs("div",{className:"streak-header",children:[n.jsx("span",{className:"streak-flamme",children:x.streakActuel>0?"":""}),n.jsxs("div",{children:[n.jsx("div",{className:"streak-nombre",children:x.streakActuel}),n.jsx("div",{className:"streak-label",children:x.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),n.jsx("div",{className:"streak-semaine",children:m.map((w,E)=>n.jsxs("div",{className:"streak-jour",children:[n.jsx("span",{className:"streak-jour-label",children:w}),n.jsx("div",{className:`streak-jour-indicateur ${x.semaineCourante[E]?"actif":"inactif"} ${E===h?"aujourd-hui":""}`,children:x.semaineCourante[E]?"":""})]},E))}),n.jsxs("div",{className:"streak-stats",children:[n.jsxs("div",{className:"streak-stat",children:[n.jsx("span",{className:"streak-stat-icon",children:""}),n.jsx("span",{className:"streak-stat-value",children:x.meilleurStreak}),n.jsx("span",{className:"streak-stat-label",children:"record"})]}),n.jsxs("div",{className:"streak-stat",children:[n.jsx("span",{className:"streak-stat-icon",children:""}),n.jsx("span",{className:"streak-stat-value",children:x.totalJoursActifs}),n.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),x.dernierJourActif&&n.jsxs("div",{className:"streak-stat",children:[n.jsx("span",{className:"streak-stat-icon",children:""}),n.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(x.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),n.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",n.jsx("span",{className:"suivi-section-badge",children:_.length})]}),_.length>0?n.jsx("div",{className:"objectifs-grid",children:_.map(w=>{const E=xK(w);return n.jsxs("div",{className:`objectif-card ${w.statut==="atteint"?"atteint":""}`,children:[n.jsxs("div",{className:"objectif-header",children:[n.jsx("span",{className:"objectif-titre",children:w.titre}),w.recompense&&n.jsx("span",{className:"objectif-recompense",children:w.recompense})]}),n.jsx("p",{className:"objectif-description",children:w.description}),n.jsxs("div",{className:"objectif-progress",children:[n.jsxs("div",{className:"objectif-progress-labels",children:[n.jsxs("span",{className:"objectif-progress-value",children:[w.progression," / ",w.cible]}),n.jsxs("span",{className:"objectif-progress-cible",children:[E,"%"]})]}),n.jsx("div",{className:"objectif-progress-track",children:n.jsx("div",{className:`objectif-progress-fill ${w.statut==="atteint"?"atteint":""}`,style:{width:`${E}%`}})})]}),n.jsx("p",{className:`objectif-statut ${w.statut}`,children:w.statut==="atteint"?" Objectif atteint !":w.statut==="en_cours"?" En cours...":" Non commenc"})]},w.id)})}):n.jsxs("div",{className:"suivi-empty",children:[n.jsx("div",{className:"suivi-empty-icon",children:""}),n.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),n.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),n.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",v.length>0&&n.jsx("span",{className:"suivi-section-badge",children:v.length})]}),v.length>0?n.jsx("div",{className:"lacunes-grid",children:v.map(w=>n.jsxs("div",{className:`lacune-card ${w.niveauUrgence}`,children:[n.jsxs("div",{className:"lacune-card-header",children:[n.jsx("span",{className:"lacune-discipline",children:w.disciplineNom}),n.jsx("span",{className:`lacune-badge ${w.niveauUrgence}`,children:QM(w.niveauUrgence)})]}),n.jsxs("div",{className:"lacune-score-bar",children:[n.jsxs("div",{className:"lacune-score-labels",children:[n.jsxs("span",{className:"lacune-score-value",style:{color:Kf(w.niveauUrgence)},children:[w.moyenne,"/20"]}),n.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),n.jsx("div",{className:"lacune-progress-track",children:n.jsx("div",{className:`lacune-progress-fill ${w.niveauUrgence}`,style:{width:`${w.moyenne/20*100}%`}})})]}),n.jsxs("div",{className:"lacune-details",children:[n.jsxs("span",{className:"lacune-detail-tag",children:[VM(w.tendance)," ",w.tendance]}),n.jsxs("span",{className:"lacune-detail-tag",children:[" ",w.nombreQuiz," quiz"]}),n.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",w.scoreDetails.dernierScore,"/20"]})]})]},w.id))}):n.jsxs("div",{className:"suivi-empty",children:[n.jsx("div",{className:"suivi-empty-icon",children:""}),n.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),n.jsx("p",{className:"suivi-empty-text",children:N>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),n.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),y.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",n.jsx("span",{className:"suivi-section-badge",children:y.length})]}),n.jsx("div",{className:"recommandations-list",children:y.map(w=>n.jsxs("div",{className:"recommandation-card",children:[n.jsx("div",{className:"recommandation-priorite",children:w.priorite}),n.jsxs("div",{className:"recommandation-content",children:[n.jsx("p",{className:"recommandation-titre",children:w.titre}),n.jsx("p",{className:"recommandation-description",children:w.description}),n.jsx("span",{className:"recommandation-discipline-tag",children:w.disciplineNom})]})]},w.id))})]}),n.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:n.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),children:" Passer un quiz maintenant"})})]})})},iX=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1,l=[];for(let o=-1;o<=3;o++){const u=a+o;l.push(`${u}-${u+1}`)}return l},oA=iX(),cc=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1;return`${a}-${a+1}`},cA=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],sX=({onSelectGroupe:e})=>{const{currentUser:t}=Ct(),[r,a]=b.useState([]),[l,o]=b.useState(new Map),[u,d]=b.useState([]),[m,p]=b.useState(!0),[h,v]=b.useState(null),[y,x]=b.useState(!1),[_,N]=b.useState(!1),[S,C]=b.useState(null),[z,w]=b.useState(null),[E,O]=b.useState(null),[M,P]=b.useState(!1),[q,L]=b.useState(null),[Y,W]=b.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()}),[B,Q]=b.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()}),[k,T]=b.useState("actif");b.useEffect(()=>{(async()=>{try{const $=await Ii.getAll();d($.map(se=>({id:se.id,nom:se.nom,classe:se.classe||""})))}catch($){console.warn(" Impossible de charger les disciplines:",$)}})()},[]);const R=b.useCallback(async()=>{if(t?.uid)try{p(!0),v(null);const K=await JM(t.uid);a(K);const $=new Map;for(const se of K)if(se.statut==="actif")try{const V=await Vb(se.id);$.set(se.id,V)}catch{console.warn(`Stats indisponibles pour ${se.nom}`)}o($)}catch(K){console.error("Erreur chargement groupes:",K),v("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{p(!1)}},[t?.uid]);b.useEffect(()=>{R()},[R]);const J=(K,$=!1)=>{const se=u.find(ye=>ye.id===K),V=se?`${se.nom}${se.classe?` (${se.classe})`:""}`:"";$?Q(ye=>({...ye,matiereId:K,matiereNom:V})):W(ye=>({...ye,matiereId:K,matiereNom:V}))},H=async K=>{if(K.preventDefault(),!(!t?.uid||!Y.nom.trim()||!Y.matiereId))try{N(!0),await BK(t.uid,t.displayName||t.email||"Professeur",Y),W({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()}),x(!1),L("Groupe cr avec succs !"),setTimeout(()=>L(null),3e3),await R()}catch($){v($.message||"Erreur lors de la cration du groupe.")}finally{N(!1)}},ve=K=>{O(K),Q({nom:K.nom,description:K.description||"",matiereId:K.matiereId,matiereNom:K.matiereNom,classeNiveau:K.classeNiveau,anneeScolaire:K.anneeScolaire}),x(!1)},U=()=>{O(null),Q({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()})},ge=async K=>{if(K.preventDefault(),!(!E||!B.nom.trim()||!B.matiereId))try{P(!0),await ek(E.id,{nom:B.nom.trim(),description:B.description?.trim()||"",matiereId:B.matiereId,matiereNom:B.matiereNom,classeNiveau:B.classeNiveau,anneeScolaire:B.anneeScolaire}),O(null),L("Groupe modifi avec succs !"),setTimeout(()=>L(null),3e3),await R()}catch($){v($.message||"Erreur lors de la modification du groupe.")}finally{P(!1)}},re=async K=>{try{await navigator.clipboard.writeText(K),C(K),setTimeout(()=>C(null),2e3)}catch{const $=document.createElement("textarea");$.value=K,document.body.appendChild($),$.select(),document.execCommand("copy"),document.body.removeChild($),C(K),setTimeout(()=>C(null),2e3)}},me=async K=>{try{await FK(K),w(null),await R()}catch($){v($.message)}},xe=async K=>{try{await GK(K),await R()}catch($){v($.message)}},he=async K=>{try{await HK(K),await R()}catch($){v($.message)}},F=(K,$)=>{W(se=>({...se,[K]:$}))},de=(K,$)=>{Q(se=>({...se,[K]:$}))},Ee=r.filter(K=>k==="tous"?!0:K.statut===k),ie=(K,$,se)=>n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:K,children:"Discipline / Matire *"}),n.jsxs("select",{id:K,value:$,onChange:V=>se(V.target.value),className:"prof-select",required:!0,children:[n.jsx("option",{value:"",children:" Slectionner une discipline "}),u.map(V=>n.jsxs("option",{value:V.id,children:[V.nom,V.classe?` (${V.classe})`:""]},V.id))]}),u.length===0&&n.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return m?n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):n.jsxs("div",{className:"groupe-manager",children:[n.jsxs("div",{className:"groupe-manager-header",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),n.jsxs("p",{className:"groupe-manager-subtitle",children:[r.length," groupe",r.length!==1?"s":"","  Anne ",cc()]})]}),n.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{x(!y),E&&U()},children:y?" Annuler":" Nouveau groupe"})]}),h&&n.jsxs("div",{className:"prof-alert prof-alert-error",children:[n.jsx("span",{children:""})," ",h,n.jsx("button",{onClick:()=>v(null),className:"prof-alert-close",children:""})]}),q&&n.jsxs("div",{className:"prof-alert prof-alert-success",children:[n.jsx("span",{children:""})," ",q,n.jsx("button",{onClick:()=>L(null),className:"prof-alert-close",children:""})]}),y&&n.jsxs("div",{className:"groupe-form-container",children:[n.jsx("h3",{children:"Crer un nouveau groupe-classe"}),n.jsxs("form",{onSubmit:H,className:"groupe-form",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),n.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:Y.nom,onChange:K=>F("nom",K.target.value),required:!0,className:"prof-input",maxLength:60})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),n.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:Y.description||"",onChange:K=>F("description",K.target.value),className:"prof-input",maxLength:120})]}),n.jsxs("div",{className:"prof-form-row",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),n.jsx("select",{id:"groupe-niveau",value:Y.classeNiveau,onChange:K=>F("classeNiveau",K.target.value),className:"prof-select",children:cA.map(K=>n.jsx("option",{value:K.value,children:K.label},K.value))})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),n.jsx("select",{id:"groupe-annee",value:Y.anneeScolaire,onChange:K=>F("anneeScolaire",K.target.value),className:"prof-select",children:oA.map(K=>n.jsx("option",{value:K,children:K},K))})]})]}),ie("groupe-discipline",Y.matiereId,K=>J(K,!1)),n.jsx("div",{className:"prof-form-actions",children:n.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:_||!Y.nom.trim()||!Y.matiereId,children:_?" Cration...":" Crer le groupe"})})]})]}),E&&n.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[n.jsxs("h3",{children:[" Modifier le groupe : ",E.nom]}),n.jsxs("form",{onSubmit:ge,className:"groupe-form",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),n.jsx("input",{id:"edit-groupe-nom",type:"text",value:B.nom,onChange:K=>de("nom",K.target.value),required:!0,className:"prof-input",maxLength:60})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),n.jsx("input",{id:"edit-groupe-desc",type:"text",value:B.description||"",onChange:K=>de("description",K.target.value),className:"prof-input",maxLength:120})]}),n.jsxs("div",{className:"prof-form-row",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),n.jsx("select",{id:"edit-groupe-niveau",value:B.classeNiveau,onChange:K=>de("classeNiveau",K.target.value),className:"prof-select",children:cA.map(K=>n.jsx("option",{value:K.value,children:K.label},K.value))})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),n.jsx("select",{id:"edit-groupe-annee",value:B.anneeScolaire,onChange:K=>de("anneeScolaire",K.target.value),className:"prof-select",children:oA.map(K=>n.jsx("option",{value:K,children:K},K))})]})]}),ie("edit-groupe-discipline",B.matiereId,K=>J(K,!0)),n.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[n.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:M||!B.nom.trim()||!B.matiereId,children:M?" Enregistrement...":" Enregistrer"}),n.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:U,disabled:M,children:" Annuler"})]})]})]}),n.jsxs("div",{className:"groupe-filtres",children:[n.jsxs("button",{className:`prof-filtre-btn ${k==="actif"?"active":""}`,onClick:()=>T("actif"),children:["Actifs (",r.filter(K=>K.statut==="actif").length,")"]}),n.jsxs("button",{className:`prof-filtre-btn ${k==="archive"?"active":""}`,onClick:()=>T("archive"),children:["Archivs (",r.filter(K=>K.statut==="archive").length,")"]}),n.jsxs("button",{className:`prof-filtre-btn ${k==="tous"?"active":""}`,onClick:()=>T("tous"),children:["Tous (",r.length,")"]})]}),Ee.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:k==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),n.jsx("p",{children:k==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),k!=="archive"&&n.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>x(!0),children:" Crer mon premier groupe"})]}):n.jsx("div",{className:"groupe-grid",children:Ee.map(K=>{const $=l.get(K.id),se=E?.id===K.id;return n.jsxs("div",{className:`groupe-card ${K.statut==="archive"?"groupe-card-archive":""} ${se?"groupe-card-editing":""}`,children:[n.jsxs("div",{className:"groupe-card-header",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"groupe-card-titre",children:K.nom}),n.jsx("span",{className:"groupe-card-matiere",children:K.matiereNom})]}),n.jsx("span",{className:`groupe-badge groupe-badge-${K.statut}`,children:K.statut==="actif"?" Actif":" Archiv"})]}),K.description&&n.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:K.description}),n.jsxs("div",{className:"groupe-card-infos",children:[n.jsxs("span",{children:[" ",K.classeNiveau]}),n.jsxs("span",{children:[" ",K.anneeScolaire]}),n.jsxs("span",{children:[" ",K.nombreInscrits," lve",K.nombreInscrits!==1?"s":""]})]}),n.jsxs("div",{className:"groupe-card-code",children:[n.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),n.jsxs("div",{className:"groupe-code-box",children:[n.jsx("code",{className:"groupe-code-value",children:K.codeInvitation}),n.jsx("button",{className:"prof-btn-icon",onClick:V=>{V.stopPropagation(),re(K.codeInvitation)},title:"Copier le code",children:S===K.codeInvitation?"":""}),K.statut==="actif"&&n.jsx("button",{className:"prof-btn-icon",onClick:V=>{V.stopPropagation(),he(K.id)},title:"Rgnrer le code",children:""})]})]}),$&&$.nombreEleves>0&&n.jsxs("div",{className:"groupe-card-stats",children:[n.jsxs("div",{className:"groupe-stat-item",children:[n.jsx("span",{className:"groupe-stat-value",children:$.moyenneClasse}),n.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),n.jsxs("div",{className:"groupe-stat-item",children:[n.jsxs("span",{className:"groupe-stat-value",children:[$.tauxReussite,"%"]}),n.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),n.jsxs("div",{className:"groupe-stat-item",children:[n.jsx("span",{className:"groupe-stat-value",children:$.elevesEnDifficulte}),n.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),n.jsxs("div",{className:"groupe-card-actions",children:[K.statut==="actif"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>e(K),children:" Voir dtails"}),n.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>ve(K),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),n.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>xe(K.id),children:" Archiver"})]}),z===K.id?n.jsxs("div",{className:"groupe-confirm-suppression",children:[n.jsx("span",{children:"Confirmer ?"}),n.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>me(K.id),children:"Oui, supprimer"}),n.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>w(null),children:"Non"})]}):n.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>w(K.id),children:" Supprimer"})]})]},K.id)})})]})},lX=({groupe:e,onRetour:t})=>{const[r,a]=b.useState(null),[l,o]=b.useState([]),[u,d]=b.useState([]),[m,p]=b.useState([]),[h,v]=b.useState(null),[y,x]=b.useState(!0),[_,N]=b.useState(null),[S,C]=b.useState("apercu"),[z,w]=b.useState("moyenne_desc"),[E,O]=b.useState(null),[M,P]=b.useState(null),[q,L]=b.useState(!1),[Y,W]=b.useState(null),B=b.useCallback(async()=>{try{x(!0),N(null);const[U,ge,re]=await Promise.all([Vb(e.id),KK(e.id),WK(e.matiereId)]);a(U),o(ge),p(re);const me=ZK(ge,e.nom);d(me)}catch(U){console.error("Erreur chargement dtail groupe:",U),N("Impossible de charger les donnes du groupe.")}finally{x(!1)}},[e.id,e.matiereId,e.nom]);b.useEffect(()=>{B()},[B]);const Q=async U=>{try{L(!0),P(U);const ge=await XK(e.id,U);v(ge)}catch(ge){console.error("Erreur analyse quiz:",ge)}finally{L(!1)}},k=()=>{const U=JK(l,e.nom),ge=`PedaClic_${e.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;eX(U,ge)},T=async U=>{try{W(U);const re=(await Ym(e.id)).find(me=>me.eleveId===U);re&&(await YK(re.id,e.id),await B())}catch(ge){N(ge.message)}finally{W(null)}},R=[...l].sort((U,ge)=>{switch(z){case"moyenne_desc":return ge.moyenne-U.moyenne;case"moyenne_asc":return U.moyenne-ge.moyenne;case"nom":return U.eleveNom.localeCompare(ge.eleveNom);case"streak":return ge.streak.actuel-U.streak.actuel;case"quiz_count":return ge.totalQuiz-U.totalQuiz;default:return 0}}),J=U=>U>=16?"prof-note-excellent":U>=12?"prof-note-bien":U>=10?"prof-note-passable":U>=8?"prof-note-insuffisant":"prof-note-critique",H=U=>{switch(U){case"hausse":return"";case"baisse":return"";default:return""}},ve=U=>{switch(U){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return y?n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsxs("p",{children:['Chargement des donnes de "',e.nom,'"...']})]}):n.jsxs("div",{className:"groupe-detail",children:[n.jsxs("div",{className:"groupe-detail-header",children:[n.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:t,children:" Retour aux groupes"}),n.jsxs("div",{className:"groupe-detail-titre-section",children:[n.jsx("h2",{className:"groupe-detail-titre",children:e.nom}),n.jsxs("p",{className:"groupe-detail-subtitle",children:[e.matiereNom,"  ",e.classeNiveau,"  ",e.anneeScolaire]})]}),n.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:k,children:" Export CSV"})]}),_&&n.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",_,n.jsx("button",{onClick:()=>N(null),className:"prof-alert-close",children:""})]}),n.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:l.length},{id:"quiz",label:" Quiz",count:m.length},{id:"alertes",label:" Alertes",count:u.length}].map(U=>n.jsxs("button",{className:`groupe-onglet ${S===U.id?"active":""}`,onClick:()=>C(U.id),children:[U.label,U.count!==null&&U.count>0&&n.jsx("span",{className:"groupe-onglet-badge",children:U.count})]},U.id))}),S==="apercu"&&r&&n.jsxs("div",{className:"groupe-apercu",children:[n.jsxs("div",{className:"groupe-stats-grid",children:[n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsxs("span",{className:`groupe-stat-card-value ${J(r.moyenneClasse)}`,children:[r.moyenneClasse,"/20"]}),n.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsxs("span",{className:"groupe-stat-card-value",children:[r.tauxReussite,"%"]}),n.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsx("span",{className:"groupe-stat-card-value",children:r.nombreEleves}),n.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsx("span",{className:"groupe-stat-card-value",children:r.totalQuizPasses}),n.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsxs("span",{className:"groupe-stat-card-value",children:[r.tauxParticipation,"%"]}),n.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsx("span",{className:`groupe-stat-card-value ${r.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:r.elevesEnDifficulte}),n.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),n.jsx("div",{className:"groupe-apercu-notes",children:n.jsxs("div",{className:"groupe-note-range",children:[n.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),n.jsxs("span",{className:"prof-note-critique",children:[r.pireNote,"/20"]}),n.jsx("div",{className:"groupe-note-barre",children:n.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${r.pireNote/20*100}%`,width:`${(r.meilleureNote-r.pireNote)/20*100}%`}})}),n.jsxs("span",{className:"prof-note-excellent",children:[r.meilleureNote,"/20"]})]})}),l.length>=3&&n.jsxs("div",{className:"groupe-apercu-classement",children:[n.jsxs("div",{className:"groupe-classement-section",children:[n.jsx("h4",{children:" Top 3"}),l.slice(0,3).map((U,ge)=>n.jsxs("div",{className:"groupe-classement-item",children:[n.jsx("span",{className:"groupe-classement-rang",children:ge===0?"":ge===1?"":""}),n.jsx("span",{className:"groupe-classement-nom",children:U.eleveNom}),n.jsxs("span",{className:`groupe-classement-note ${J(U.moyenne)}`,children:[U.moyenne,"/20"]})]},U.eleveId))]}),n.jsxs("div",{className:"groupe-classement-section",children:[n.jsx("h4",{children:"  surveiller"}),l.filter(U=>U.moyenne<8&&U.totalQuiz>0).slice(0,3).map(U=>n.jsxs("div",{className:"groupe-classement-item",children:[n.jsx("span",{className:"groupe-classement-rang",children:""}),n.jsx("span",{className:"groupe-classement-nom",children:U.eleveNom}),n.jsxs("span",{className:`groupe-classement-note ${J(U.moyenne)}`,children:[U.moyenne,"/20"]})]},U.eleveId)),l.filter(U=>U.moyenne<8&&U.totalQuiz>0).length===0&&n.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),S==="eleves"&&n.jsxs("div",{className:"groupe-eleves",children:[n.jsxs("div",{className:"groupe-eleves-toolbar",children:[n.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),n.jsxs("select",{id:"tri-eleves",value:z,onChange:U=>w(U.target.value),className:"prof-select prof-select-sm",children:[n.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),n.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),n.jsx("option",{value:"nom",children:"Nom (A-Z)"}),n.jsx("option",{value:"streak",children:"Streak ()"}),n.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),n.jsxs("span",{className:"groupe-eleves-count",children:[l.length," lve",l.length!==1?"s":""]})]}),l.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Aucun lve inscrit"}),n.jsxs("p",{children:["Partagez le code ",n.jsx("strong",{children:e.codeInvitation}),"  vos lves."]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"groupe-eleves-table-wrapper",children:n.jsxs("table",{className:"groupe-eleves-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"lve"}),n.jsx("th",{children:"Moyenne"}),n.jsx("th",{children:"Quiz"}),n.jsx("th",{children:"Russite"}),n.jsx("th",{children:"Streak"}),n.jsx("th",{children:"Tendance"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:R.map((U,ge)=>n.jsxs("tr",{className:`${E===U.eleveId?"groupe-eleve-row-active":""}`,children:[n.jsx("td",{className:"groupe-eleve-rang",children:ge+1}),n.jsx("td",{className:"groupe-eleve-nom-cell",children:n.jsxs("div",{children:[n.jsx("strong",{children:U.eleveNom}),n.jsx("span",{className:"groupe-eleve-email",children:U.eleveEmail})]})}),n.jsx("td",{children:n.jsxs("span",{className:`groupe-note-badge ${J(U.moyenne)}`,children:[U.moyenne,"/20"]})}),n.jsx("td",{children:U.totalQuiz}),n.jsxs("td",{children:[U.tauxReussite,"%"]}),n.jsx("td",{children:n.jsxs("span",{className:"groupe-streak",children:[" ",U.streak.actuel,"j"]})}),n.jsxs("td",{children:[H(U.tendance)," ",U.tendance]}),n.jsxs("td",{className:"groupe-eleve-actions",children:[n.jsx("button",{className:"prof-btn-icon",onClick:()=>O(E===U.eleveId?null:U.eleveId),title:"Voir dtails",children:E===U.eleveId?"":""}),n.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>T(U.eleveId),disabled:Y===U.eleveId,title:"Retirer du groupe",children:Y===U.eleveId?"":""})]})]},U.eleveId))})]})}),E&&(()=>{const U=l.find(ge=>ge.eleveId===E);return U?n.jsxs("div",{className:"groupe-eleve-detail",children:[n.jsxs("div",{className:"groupe-eleve-detail-header",children:[n.jsxs("h3",{children:[" Dtail  ",U.eleveNom]}),n.jsx("button",{className:"prof-btn-icon",onClick:()=>O(null),children:""})]}),n.jsxs("div",{className:"groupe-eleve-detail-grid",children:[n.jsxs("div",{className:"groupe-eleve-detail-card",children:[n.jsx("h4",{children:"Score global"}),n.jsx("div",{className:"groupe-eleve-score-circle",children:n.jsxs("span",{className:J(U.scoreGlobal/5),children:[U.scoreGlobal,"/100"]})})]}),n.jsxs("div",{className:"groupe-eleve-detail-card",children:[n.jsx("h4",{children:" Streak"}),n.jsxs("p",{children:["Actuel : ",n.jsxs("strong",{children:[U.streak.actuel," jour",U.streak.actuel!==1?"s":""]})]}),n.jsxs("p",{children:["Meilleur : ",U.streak.meilleur," jours"]})]}),n.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[n.jsx("h4",{children:" Lacunes dtectes"}),U.lacunes.length===0?n.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):n.jsx("ul",{className:"groupe-lacunes-liste",children:U.lacunes.map((ge,re)=>n.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${ge.niveauUrgence}`,children:[n.jsxs("span",{className:"groupe-lacune-nom",children:[ge.disciplineNom,ge.chapitre&&`  ${ge.chapitre}`]}),n.jsxs("span",{className:"groupe-lacune-moyenne",children:[ge.moyenne,"/20"]}),n.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${ge.niveauUrgence}`,children:ge.niveauUrgence})]},re))})]})]})]}):null})()]})]}),S==="quiz"&&n.jsxs("div",{className:"groupe-quiz",children:[n.jsxs("div",{className:"groupe-quiz-selector",children:[n.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),n.jsxs("select",{id:"select-quiz",value:M||"",onChange:U=>{U.target.value&&Q(U.target.value)},className:"prof-select",children:[n.jsx("option",{value:"",children:" Choisir un quiz "}),m.map(U=>n.jsx("option",{value:U.id,children:U.titre},U.id))]})]}),!M&&n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Analyse par quiz"}),n.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),q&&n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Analyse en cours..."})]}),h&&!q&&n.jsxs("div",{className:"groupe-quiz-resultats",children:[n.jsxs("div",{className:"groupe-quiz-stats-header",children:[n.jsx("h3",{children:h.quizTitre}),n.jsxs("div",{className:"groupe-quiz-stats-grid",children:[n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsx("span",{className:"groupe-stat-mini-value",children:h.totalPassages}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsxs("span",{className:`groupe-stat-mini-value ${J(h.moyenneScore)}`,children:[h.moyenneScore,"/20"]}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsxs("span",{className:"groupe-stat-mini-value",children:[h.tauxReussite,"%"]}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(h.tempsEcouleMoyen/60),"min"]}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),n.jsxs("div",{className:"groupe-quiz-questions",children:[n.jsx("h4",{children:" Questions les plus rates"}),h.questionsRatees.filter(U=>U.tauxEchec>30).map((U,ge)=>n.jsxs("div",{className:"groupe-quiz-question-card",children:[n.jsxs("div",{className:"groupe-quiz-question-header",children:[n.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",U.questionIndex+1]}),n.jsxs("span",{className:"groupe-quiz-question-echec",children:[U.tauxEchec,"% d'chec"]})]}),n.jsx("p",{className:"groupe-quiz-question-texte",children:U.questionTexte}),n.jsx("div",{className:"groupe-quiz-question-reponse",children:n.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",U.reponseCorrecte]})}),U.reponsesFrequentes.length>0&&n.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[n.jsx("span",{children:"Erreurs frquentes :"}),U.reponsesFrequentes.slice(0,2).map((re,me)=>n.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",re.reponse," (",re.nombre," lve",re.nombre>1?"s":"",")"]},me))]})]},ge)),h.questionsRatees.filter(U=>U.tauxEchec>30).length===0&&n.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),S==="alertes"&&n.jsx("div",{className:"groupe-alertes",children:u.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Aucune alerte"}),n.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):n.jsx("div",{className:"groupe-alertes-liste",children:u.map(U=>n.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${U.niveauUrgence}`,children:[n.jsxs("div",{className:"groupe-alerte-header",children:[n.jsx("span",{className:"groupe-alerte-emoji",children:ve(U.type)}),n.jsx("span",{className:"groupe-alerte-eleve",children:U.eleveNom}),n.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${U.niveauUrgence}`,children:U.niveauUrgence})]}),n.jsx("p",{className:"groupe-alerte-message",children:U.message}),n.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{C("eleves"),O(U.eleveId)},children:" Voir dtail"})]},U.id))})})]})},oX=()=>{const{currentUser:e}=Ct(),[t,r]=b.useState("overview"),[a,l]=b.useState(null),[o,u]=b.useState(0),[d,m]=b.useState(0),[p,h]=b.useState(0),[v,y]=b.useState(0),[x,_]=b.useState([]),[N,S]=b.useState(!0),C=b.useCallback(async()=>{if(e?.uid)try{S(!0);const O=(await JM(e.uid)).filter(W=>W.statut==="actif");u(O.length);let M=0,P=0,q=0,L=0;const Y=[];for(const W of O)try{const B=await Vb(W.id);M+=B.nombreEleves,B.nombreEleves>0&&(P+=B.moyenneClasse,q++),L+=B.elevesEnDifficulte,Y.push({...W,stats:B})}catch{Y.push({...W})}m(M),h(q>0?Math.round(P/q*10)/10:0),y(L),_(Y)}catch(E){console.error("Erreur chargement rsum prof:",E)}finally{S(!1)}},[e?.uid]);b.useEffect(()=>{C()},[C]);const z=E=>{l(E),r("detail")},w=()=>{l(null),r("groupes"),C()};return N?n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement de votre espace professeur..."})]}):n.jsxs("div",{className:"prof-dashboard",children:[n.jsx("header",{className:"prof-dashboard-header",children:n.jsxs("div",{children:[n.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),n.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",e?.displayName||"Professeur"," "]})]})}),t!=="detail"&&n.jsxs("nav",{className:"prof-nav",children:[n.jsx("button",{className:`prof-nav-btn ${t==="overview"?"active":""}`,onClick:()=>r("overview"),children:" Vue d'ensemble"}),n.jsx("button",{className:`prof-nav-btn ${t==="groupes"?"active":""}`,onClick:()=>r("groupes"),children:" Mes groupes-classes"})]}),t==="overview"&&n.jsxs("div",{className:"prof-overview",children:[n.jsxs("div",{className:"prof-overview-cards",children:[n.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>r("groupes"),children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsx("span",{className:"prof-overview-card-value",children:o}),n.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",o!==1?"s":""," actif",o!==1?"s":""]})]})]}),n.jsxs("div",{className:"prof-overview-card",children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsx("span",{className:"prof-overview-card-value",children:d}),n.jsxs("span",{className:"prof-overview-card-label",children:["lve",d!==1?"s":""," inscrit",d!==1?"s":""]})]})]}),n.jsxs("div",{className:"prof-overview-card",children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsxs("span",{className:"prof-overview-card-value",children:[p,"/20"]}),n.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),n.jsxs("div",{className:"prof-overview-card",children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsx("span",{className:`prof-overview-card-value ${v>0?"prof-note-critique":""}`,children:v}),n.jsxs("span",{className:"prof-overview-card-label",children:["lve",v!==1?"s":""," en difficult"]})]})]})]}),x.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),n.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),n.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>r("groupes"),children:" Crer un groupe-classe"})]}):n.jsxs("div",{className:"prof-overview-groupes",children:[n.jsx("h2",{children:"Mes groupes"}),n.jsx("div",{className:"prof-overview-groupes-grid",children:x.map(E=>n.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>z(E),children:[n.jsxs("div",{className:"prof-overview-groupe-header",children:[n.jsx("h3",{children:E.nom}),n.jsx("span",{className:"prof-overview-groupe-matiere",children:E.matiereNom})]}),E.stats&&n.jsxs("div",{className:"prof-overview-groupe-stats",children:[n.jsxs("div",{children:[n.jsx("span",{className:"prof-overview-groupe-stat-value",children:E.stats.nombreEleves}),n.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[E.stats.moyenneClasse,"/20"]}),n.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[E.stats.tauxReussite,"%"]}),n.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),n.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},E.id))})]})]}),t==="groupes"&&n.jsx(sX,{onSelectGroupe:z}),t==="detail"&&a&&n.jsx(lX,{groupe:a,onRetour:w})]})},ao="cahiers_textes",$n="entrees_cahier",cX="groupes_prof",uX="ebooks";async function dX(e,t){const r=[Ae("profId","==",e),nt("updatedAt","desc")];t&&r.splice(1,0,Ae("anneeScolaire","==",t));const a=Le(_e(oe,ao),...r);return(await Te(a)).docs.map(o=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...o.data(),id:o.id}))}async function tk(e){const t=await Gt(be(oe,ao,e));return t.exists()?{groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...t.data(),id:t.id}:null}const fX=e=>NX(e);async function mX(e){const t=await Gt(be(oe,$n,e));return t.exists()?{id:t.id,...t.data()}:null}async function pX(e,t,r,a){const l=`${Date.now()}_${r.name}`,o=`cahiers/${e}/${t}/${l}`,u=Br(Ur,o),d=yA(u,r);return new Promise((m,p)=>{d.on("state_changed",h=>{},p,async()=>{const h=await Ma(d.snapshot.ref);m({id:l,nom:r.name,url:h,type:r.type,taille:r.size,mimeType:r.type,uploadedAt:new Date().toISOString()})})})}async function uA(e,t,r){await et(be(oe,$n,e),{piecesJointes:qT(...r),updatedAt:Fe.now()})}async function hX(e,t,r){const a=t.find(l=>l.url===r);try{a?.id&&await vc(Br(Ur,`cahiers/${a.id}`))}catch{}a&&await et(be(oe,$n,e),{piecesJointes:RT(a),updatedAt:Fe.now()})}async function vX(e,t){const r=Fe.now(),a=t.titre?.trim()||`${t.matiere} ${t.classe} ${t.anneeScolaire}`;return(await nr(_e(oe,ao),{profId:e,titre:a,matiere:t.matiere,classe:t.classe,anneeScolaire:t.anneeScolaire,description:t.description||"",couleur:t.couleur,nombreSeancesPrevu:t.nombreSeancesPrevu,nombreSeancesRealise:0,isArchived:!1,groupeIds:t.groupeIds??[],groupeNoms:t.groupeNoms??[],isPartage:t.isPartage??!1,createdAt:r,updatedAt:r})).id}async function gX(e,t){const r={...t};if("matiere"in t&&"classe"in t&&!("id"in t)){const a=t;a.titre?.trim()||(r.titre=`${a.matiere} ${a.classe} ${a.anneeScolaire}`)}await et(be(oe,ao,e),{...r,updatedAt:Fe.now()})}async function xX(e){await Ln(be(oe,ao,e))}async function yX(e){const t=await Gt(be(oe,ao,e));if(!t.exists())return null;const r=t.data();return r.isPartage?{id:t.id,...r}:null}async function bX(e){const t=Le(_e(oe,cX),Ae("profId","==",e),nt("nom","asc"));return(await Te(t)).docs.map(a=>({id:a.id,...a.data()}))}async function jX(){return(await Te(_e(oe,uX))).docs.map(t=>({id:t.id,...t.data()}))}async function NX(e){const t=Le(_e(oe,$n),Ae("cahierId","==",e),nt("ordre","asc"));return(await Te(t)).docs.map(a=>({id:a.id,...a.data()}))}const _X=async(e,t,r)=>{const a=Fe.fromDate(new Date(t,r,1)),l=Fe.fromDate(new Date(t,r+1,0,23,59,59)),o=Le(_e(oe,$n),Ae("cahierId","==",e),Ae("date",">=",a),Ae("date","<=",l),nt("date","asc"));return(await Te(o)).docs.map(d=>({id:d.id,...d.data()}))},SX=async(e,t)=>{const r=[Ae("profId","==",e),Ae("isMarqueEvaluation","==",!0),nt("date","desc")];t&&r.unshift(Ae("cahierId","==",t));const a=Le(_e(oe,$n),...r);return(await Te(a)).docs.map(o=>({id:o.id,...o.data()}))},wX=async e=>{const r=(await Te(Le(_e(oe,$n),Ae("cahierId","==",e)))).docs.map(u=>u.data()),a=r.length,l={realise:0,planifie:0,annule:0,reporte:0},o={};for(const u of r){const d=u.statut;d in l&&l[d]++,u.typeContenu&&(o[u.typeContenu]=(o[u.typeContenu]??0)+1)}return{total:a,...l,parType:o,tauxRealisation:a>0?Math.round(l.realise/a*100):0}};async function CX(e){const t=Le(_e(oe,$n),Ae("cahierId","==",e),Ae("statut","==","realise"),nt("date","desc"));return(await Te(t)).docs.map(a=>({id:a.id,...a.data()}))}async function AX(e,t,r){const a=Fe.now();let l;if(typeof e=="string"){const u=r;l={cahierId:e,profId:t,date:Fe.fromDate(new Date(u.date)),heureDebut:u.heureDebut||"",heureFin:u.heureFin||"",chapitre:u.chapitre,typeContenu:u.typeContenu,contenu:u.contenu,objectifs:u.objectifs||"",competences:u.competences||[],statut:u.statut,motifAnnulation:u.motifAnnulation||"",dateReport:u.dateReport?Fe.fromDate(new Date(u.dateReport)):null,notesPrivees:u.notesPrivees||"",isMarqueEvaluation:u.isMarqueEvaluation,typeEvaluation:u.typeEvaluation||null,dateEvaluationPrevue:u.dateEvaluationPrevue?Fe.fromDate(new Date(u.dateEvaluationPrevue)):null,statutEvaluation:u.statutEvaluation,ordre:Date.now(),piecesJointes:[],liens:[],ebooksLies:[]}}else l={liens:[],ebooksLies:[],piecesJointes:[],...e};return(await nr(_e(oe,$n),{...l,createdAt:a,updatedAt:a})).id}async function yc(e,t,r){let a;if(typeof t=="string"&&r){const l=r;a={date:Fe.fromDate(new Date(l.date)),heureDebut:l.heureDebut||"",heureFin:l.heureFin||"",chapitre:l.chapitre,typeContenu:l.typeContenu,contenu:l.contenu,objectifs:l.objectifs||"",competences:l.competences||[],statut:l.statut,motifAnnulation:l.motifAnnulation||"",dateReport:l.dateReport?Fe.fromDate(new Date(l.dateReport)):null,notesPrivees:l.notesPrivees||"",isMarqueEvaluation:l.isMarqueEvaluation,typeEvaluation:l.typeEvaluation||null,dateEvaluationPrevue:l.dateEvaluationPrevue?Fe.fromDate(new Date(l.dateEvaluationPrevue)):null,statutEvaluation:l.statutEvaluation}}else a={...t};await et(be(oe,$n,e),{...a,updatedAt:Fe.now()})}async function EX(e){await Ln(be(oe,$n,e))}const zX=["6me","5me","4me","3me","2nde","1re","Terminale"],OX=["Mathmatiques","Franais","Physique-Chimie","SVT","Histoire-Gographie","Anglais","Philosophie","conomie","Comptabilit","Arabe","Espagnol","Informatique","ducation civique","Littrature","Arts plastiques","EPS"],dA=["2023-2024","2024-2025","2025-2026","2026-2027"],DX=["#2563eb","#7c3aed","#059669","#d97706","#dc2626","#0891b2","#db2777","#65a30d"],ki={cours:{label:"Cours",emoji:"",color:"#3b82f6"},exercices:{label:"Exercices",emoji:"",color:"#8b5cf6"},correction:{label:"Correction",emoji:"",color:"#10b981"},devoir_surveille:{label:"Devoir surveill",emoji:"",color:"#f59e0b"},devoir_maison:{label:"Devoir  la maison",emoji:"",color:"#6366f1"},travaux_pratiques:{label:"Travaux pratiques",emoji:"",color:"#14b8a6"},evaluation:{label:"valuation",emoji:"",color:"#ef4444"},revision:{label:"Rvision",emoji:"",color:"#f97316"}},bc={realise:{label:"Ralis",color:"#059669",bg:"#d1fae5"},planifie:{label:"Planifi",color:"#d97706",bg:"#fef3c7"},annule:{label:"Annul",color:"#dc2626",bg:"#fee2e2"},reporte:{label:"Report",color:"#2563eb",bg:"#dbeafe"}},rk={interro:"Interrogation",ds:"Devoir Surveill",examen:"Examen",oral:"Oral",autre:"Autre"},nk={devoir:{label:"Devoir  corriger",emoji:""},evaluation:{label:"valuation  prparer",emoji:""},notes:{label:"Notes  saisir",emoji:""},cours:{label:"Cours  prparer",emoji:""},personnalise:{label:"Rappel personnalis",emoji:""}},MX=["Communiquer  l'crit","Communiquer  l'oral","Raisonner et rsoudre des problmes","Chercher et s'informer","Modliser","Reprsenter","Calculer et algorithmiser","Analyser et interprter","Exprimenter et observer","Cooprer et mutualiser"],fA=()=>({classe:"3me",matiere:"Mathmatiques",anneeScolaire:"2025-2026",titre:"",description:"",couleur:"#2563eb",nombreSeancesPrevu:30,groupeIds:[],groupeNoms:[],isPartage:!1}),kX=()=>{const{currentUser:e}=Ct(),t=Ht(),[r]=vA(),[a,l]=b.useState([]),[o,u]=b.useState(!0),[d,m]=b.useState("2025-2026"),[p,h]=b.useState(!1),[v,y]=b.useState(null),[x,_]=b.useState(fA()),[N,S]=b.useState(!1),[C,z]=b.useState(""),[w,E]=b.useState([]),[O,M]=b.useState([]);if(!e?.isPremium)return n.jsx("div",{className:"cahier-textes-page",children:n.jsxs("div",{className:"premium-gate",children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),n.jsx("h2",{children:"Cahier de Textes Numrique"}),n.jsxs("p",{children:["Cette fonctionnalit est rserve aux enseignants Premium.",n.jsx("br",{}),"Passez au Premium pour organiser, planifier et suivre votre enseignement."]}),n.jsx("button",{className:"btn-primary",onClick:()=>t("/premium"),children:" Passer au Premium  2 000 FCFA/mois"})]})});const P=async()=>{if(e?.uid){u(!0);try{const k=await dX(e.uid,d||void 0);l(k)}catch(k){console.error("Erreur chargement cahiers:",k)}finally{u(!1)}}};b.useEffect(()=>{P()},[e?.uid,d]),b.useEffect(()=>{if(!e?.uid)return;bX(e.uid).then(E).catch(J=>console.error("Erreur chargement groupes:",J));const k=r.get("groupeId"),T=r.get("groupeNom"),R=r.get("classe");k&&T&&(M([k]),_(J=>({...J,classe:R||J.classe,groupeIds:[k],groupeNoms:[T]})),y(null),z(""),h(!0))},[e?.uid]);const q=()=>{y(null),_(fA()),M([]),z(""),h(!0)},L=(k,T)=>{T.stopPropagation(),y(k),M(k.groupeIds??[]),_({classe:k.classe,matiere:k.matiere,anneeScolaire:k.anneeScolaire,titre:k.titre,description:k.description||"",couleur:k.couleur,nombreSeancesPrevu:k.nombreSeancesPrevu,groupeIds:k.groupeIds??[],groupeNoms:k.groupeNoms??[],isPartage:k.isPartage??!1}),z(""),h(!0)},Y=k=>{M(T=>{const R=T.includes(k)?T.filter(H=>H!==k):[...T,k],J=R.map(H=>w.find(ve=>ve.id===H)?.nom??"").filter(Boolean);return _(H=>({...H,groupeIds:R,groupeNoms:J})),R})},W=async k=>{if(k.preventDefault(),!!e?.uid){S(!0),z("");try{v?await gX(v.id,x):await vX(e.uid,x),h(!1),await P()}catch(T){const R=T instanceof Error?T.message:String(T);z("Erreur : "+R)}finally{S(!1)}}},B=async(k,T)=>{if(T.stopPropagation(),!!confirm(`Supprimer le cahier "${k.titre}" et toutes ses entres ?`))try{await xX(k.id),l(R=>R.filter(J=>J.id!==k.id))}catch{alert("Erreur lors de la suppression.")}},Q=k=>k.nombreSeancesPrevu>0?Math.min(100,Math.round(k.nombreSeancesRealise/k.nombreSeancesPrevu*100)):0;return n.jsxs("div",{className:"cahier-textes-page",children:[n.jsxs("div",{className:"cahier-page-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"cahier-page-title",children:" Cahier de Textes"}),n.jsx("p",{className:"cahier-page-subtitle",children:"Organisez et planifiez votre enseignement"})]}),n.jsx("button",{className:"btn-primary",onClick:q,children:"+ Nouveau cahier"})]}),n.jsxs("div",{className:"cahier-filtres",children:[n.jsx("label",{style:{fontSize:"0.85rem",color:"#6b7280",fontWeight:600},children:"Anne scolaire :"}),n.jsxs("select",{className:"filtre-select",value:d,onChange:k=>m(k.target.value),children:[n.jsx("option",{value:"",children:"Toutes les annes"}),dA.map(k=>n.jsx("option",{value:k,children:k},k))]})]}),o?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):a.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{style:{fontSize:"3rem",opacity:.3,marginBottom:"0.75rem"},children:""}),n.jsxs("h3",{children:["Aucun cahier pour ",d||"cette priode"]}),n.jsx("p",{children:"Crez votre premier cahier de textes pour commencer  planifier votre enseignement."}),n.jsx("button",{className:"btn-primary",onClick:q,style:{marginTop:"1rem"},children:"+ Crer mon premier cahier"})]}):n.jsx("div",{className:"cahiers-grid",children:a.map(k=>{const T=Q(k);return n.jsxs("div",{className:"cahier-card",onClick:()=>t(`/prof/cahiers/${k.id}`),children:[n.jsx("div",{style:{height:4,background:k.couleur,borderRadius:"12px 12px 0 0"}}),n.jsx("div",{className:"cahier-card-header",children:n.jsxs("div",{style:{flex:1},children:[n.jsx("h3",{className:"cahier-card-titre",children:k.titre}),n.jsxs("div",{className:"cahier-card-meta",children:[n.jsx("span",{className:"badge-classe",children:k.classe}),n.jsx("span",{className:"badge-matiere",children:k.matiere}),n.jsx("span",{className:"badge-annee",children:k.anneeScolaire})]}),(k.groupeIds?.length??0)>0&&n.jsxs("span",{className:`badge-partage ${k.isPartage?"actif":""}`,style:{marginTop:6,display:"inline-flex"},children:[k.isPartage?" Partag avec":" Li "," ",k.groupeIds.length," groupe",k.groupeIds.length>1?"s":""]})]})}),n.jsxs("div",{className:"cahier-card-body",children:[k.description&&n.jsxs("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 0.75rem",lineHeight:1.5},children:[k.description.substring(0,80),k.description.length>80?"...":""]}),n.jsxs("div",{className:"progression-bar-wrap",children:[n.jsxs("div",{className:"progression-label",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{style:{fontWeight:700,color:k.couleur},children:[T,"%"]})]}),n.jsx("div",{className:"progression-bar-bg",children:n.jsx("div",{className:"progression-bar-fill",style:{width:`${T}%`,background:k.couleur}})}),n.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:"0.3rem"},children:[k.nombreSeancesRealise," / ",k.nombreSeancesPrevu," sances ralises"]})]})]}),n.jsxs("div",{className:"cahier-card-footer",children:[n.jsxs("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["Mis  jour le ",k.updatedAt?.toDate().toLocaleDateString("fr-FR")||""]}),n.jsxs("div",{className:"cahier-actions",children:[n.jsx("button",{className:"btn-icon",onClick:R=>L(k,R),title:"Modifier",children:""}),n.jsx("button",{className:"btn-icon",onClick:R=>B(k,R),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]})]},k.id)})}),p&&n.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:n.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[n.jsxs("h2",{className:"modal-title",children:[" ",v?"Modifier le cahier":"Nouveau cahier de textes"]}),n.jsxs("form",{onSubmit:W,children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Classe *"}),n.jsx("select",{className:"form-select",value:x.classe,onChange:k=>_(T=>({...T,classe:k.target.value})),required:!0,children:zX.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Matire *"}),n.jsx("select",{className:"form-select",value:x.matiere,onChange:k=>_(T=>({...T,matiere:k.target.value})),required:!0,children:OX.map(k=>n.jsx("option",{value:k,children:k},k))})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Anne scolaire *"}),n.jsx("select",{className:"form-select",value:x.anneeScolaire,onChange:k=>_(T=>({...T,anneeScolaire:k.target.value})),children:dA.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Titre personnalis"}),n.jsx("input",{className:"form-input",placeholder:`Ex: Maths 3me A - ${x.anneeScolaire}`,value:x.titre,onChange:k=>_(T=>({...T,titre:k.target.value}))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Nombre de sances prvues"}),n.jsx("input",{type:"number",className:"form-input",min:"1",max:"200",value:x.nombreSeancesPrevu,onChange:k=>_(T=>({...T,nombreSeancesPrevu:Number(k.target.value)}))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description / Objectifs (optionnel)"}),n.jsx("textarea",{className:"form-textarea",placeholder:"Objectifs gnraux, groupe classe, notes...",value:x.description,onChange:k=>_(T=>({...T,description:k.target.value})),rows:2})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Couleur du cahier"}),n.jsx("div",{className:"couleur-picker",children:DX.map(k=>n.jsx("div",{className:`couleur-option ${x.couleur===k?"selected":""}`,style:{background:k},onClick:()=>_(T=>({...T,couleur:k})),title:k},k))})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Groupes classes lis"," ",n.jsx("span",{style:{fontWeight:400,color:"#9ca3af"},children:"(optionnel)"})]}),w.length===0?n.jsxs("p",{style:{fontSize:"0.82rem",color:"#9ca3af",margin:0},children:["Aucun groupe cr."," ",n.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:0,fontSize:"0.82rem"},onClick:()=>t("/prof/groupes"),children:"Crer un groupe "})]}):n.jsx("div",{className:"groupe-selector",children:w.map(k=>{const T=O.includes(k.id);return n.jsxs("div",{className:`groupe-option ${T?"selected":""}`,onClick:()=>Y(k.id),children:[n.jsx("input",{type:"checkbox",checked:T,readOnly:!0,tabIndex:-1}),n.jsxs("span",{children:[n.jsx("strong",{children:k.nom}),"  ",k.classe," (",k.anneeScolaire,")"]})]},k.id)})}),O.length>0&&n.jsx("div",{className:"groupes-tags",children:O.map(k=>{const T=w.find(R=>R.id===k);return T?n.jsxs("span",{className:"groupe-tag",children:[T.nom,n.jsx("button",{type:"button",onClick:()=>Y(k),"aria-label":`Retirer ${T.nom}`,children:""})]},k):null})}),O.length>0&&n.jsxs("label",{className:"toggle-partage",style:{marginTop:10},children:[n.jsx("input",{type:"checkbox",checked:x.isPartage??!1,onChange:k=>_(T=>({...T,isPartage:k.target.checked}))}),n.jsx("span",{children:" Rendre visible aux lves des groupes lis"})]})]}),C&&n.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem",marginBottom:"0.75rem",background:"#fee2e2",padding:"0.5rem 0.75rem",borderRadius:8},children:C}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>h(!1),children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:N,children:N?"Enregistrement...":v?"Mettre  jour":"Crer le cahier"})]})]})]})})]})},PX=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],TX=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],qX=(e,t,r)=>{const a=new Date(e,t,1),l=new Date(e,t+1,0);let o=a.getDay()-1;o<0&&(o=6);const u=new Date,d=[];for(let p=o-1;p>=0;p--){const h=new Date(e,t,-p);d.push({date:h,isCurrentMonth:!1,isToday:!1,entrees:[]})}for(let p=1;p<=l.getDate();p++){const h=new Date(e,t,p),v=h.toDateString()===u.toDateString(),y=r.filter(x=>{const _=x.date.toDate();return _.getFullYear()===e&&_.getMonth()===t&&_.getDate()===p});d.push({date:h,isCurrentMonth:!0,isToday:v,entrees:y})}let m=1;for(;d.length<42;){const p=new Date(e,t+1,m++);d.push({date:p,isCurrentMonth:!1,isToday:!1,entrees:[]})}return d},RX=({cahierId:e})=>{const t=Ht(),r=new Date,[a,l]=b.useState(r.getFullYear()),[o,u]=b.useState(r.getMonth()),[d,m]=b.useState([]),[p,h]=b.useState(!1),[v,y]=b.useState(null),[x,_]=b.useState({x:0,y:0});b.useEffect(()=>{(async()=>{h(!0);try{const E=await _X(e,a,o);m(E)}catch(E){console.error("Erreur chargement entres calendrier:",E)}finally{h(!1)}})()},[e,a,o]);const N=qX(a,o,d),S=()=>{o===0?(l(w=>w-1),u(11)):u(w=>w-1)},C=()=>{o===11?(l(w=>w+1),u(0)):u(w=>w+1)},z=(w,E)=>{if(!w.isCurrentMonth||w.entrees.length===0)return;const O=E.target.getBoundingClientRect();_({x:O.left,y:O.bottom+window.scrollY+8}),y(w)};return n.jsxs("div",{className:"cahier-calendar",onClick:()=>y(null),children:[n.jsxs("div",{className:"calendar-nav",children:[n.jsx("button",{className:"calendar-nav-btn",onClick:S,"aria-label":"Mois prcdent",children:""}),n.jsxs("span",{className:"calendar-nav-title",children:[TX[o]," ",a,p&&" ..."]}),n.jsx("button",{className:"calendar-nav-btn",onClick:C,"aria-label":"Mois suivant",children:""})]}),n.jsx("div",{className:"calendar-weekdays",children:PX.map(w=>n.jsx("div",{className:"calendar-weekday",children:w},w))}),n.jsx("div",{className:"calendar-grid",onClick:w=>w.stopPropagation(),children:N.map((w,E)=>n.jsxs("div",{className:`calendar-day ${w.isCurrentMonth?"":"other-month"} ${w.isToday?"today":""} ${v?.date.toDateString()===w.date.toDateString()?"selected":""}`,onClick:O=>z(w,O),children:[n.jsx("div",{className:"calendar-day-num",children:w.date.getDate()}),n.jsxs("div",{className:"calendar-day-events",children:[w.entrees.slice(0,3).map(O=>{const M=ki[O.typeContenu];return n.jsxs("div",{className:"calendar-event-dot",style:{background:M.color},title:O.chapitre,children:[M.emoji," ",O.chapitre.substring(0,12)]},O.id)}),w.entrees.length>3&&n.jsxs("div",{className:"calendar-more",children:["+",w.entrees.length-3]})]})]},E))}),n.jsx("div",{className:"calendar-legend",children:Object.entries(ki).slice(0,5).map(([w,E])=>n.jsxs("div",{className:"legend-item",children:[n.jsx("div",{className:"legend-dot",style:{background:E.color}}),E.label]},w))}),v&&v.entrees.length>0&&n.jsxs("div",{className:"calendar-day-popup",style:{top:x.y,left:Math.min(x.x,window.innerWidth-300)},onClick:w=>w.stopPropagation(),children:[n.jsxs("div",{className:"calendar-day-popup-title",children:[" ",v.date.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})]}),v.entrees.map(w=>{const E=ki[w.typeContenu];return n.jsxs("div",{className:"calendar-popup-entree",onClick:()=>t(`/prof/cahiers/${e}/modifier/${w.id}`),children:[n.jsx("span",{className:"calendar-popup-entree-type",children:E.emoji}),n.jsxs("div",{className:"calendar-popup-entree-info",children:[n.jsx("div",{className:"calendar-popup-entree-chapitre",children:w.chapitre}),w.heureDebut&&n.jsxs("div",{className:"calendar-popup-entree-heure",children:[w.heureDebut,w.heureFin?`  ${w.heureFin}`:""]})]})]},w.id)})]})]})},Km="rappels_prof",LX=async(e,t)=>(await nr(_e(oe,Km),{profId:e,titre:t.titre,description:t.description||"",typeRappel:t.typeRappel,dateRappel:Fe.fromDate(new Date(t.dateRappel)),recurrence:t.recurrence,priorite:t.priorite,cahierId:t.cahierId||null,isLu:!1,isDone:!1,createdAt:Fe.now()})).id,IX=async e=>{const t=Le(_e(oe,Km),Ae("profId","==",e),Ae("isDone","==",!1),nt("dateRappel","asc"));return(await Te(t)).docs.map(a=>({id:a.id,...a.data()}))},$X=async(e,t)=>{await et(be(oe,Km,e),{isDone:t,isLu:t})},BX=async e=>{await Ln(be(oe,Km,e))},mA=()=>({titre:"",description:"",typeRappel:"personnalise",dateRappel:new Date(Date.now()+36e5).toISOString().slice(0,16),recurrence:"unique",priorite:"normale"}),Ld=({profId:e,cahierId:t})=>{const[r,a]=b.useState([]),[l,o]=b.useState(!0),[u,d]=b.useState(!1),[m,p]=b.useState(mA()),[h,v]=b.useState(!1),y=async()=>{try{o(!0);const w=await IX(e);a(w)}catch(w){console.error("Erreur rappels:",w)}finally{o(!1)}};b.useEffect(()=>{y()},[e]);const x=async w=>{if(w.preventDefault(),!!m.titre.trim()){v(!0);try{await LX(e,{...m,cahierId:t}),d(!1),p(mA()),await y()}catch(E){console.error("Erreur cration rappel:",E)}finally{v(!1)}}},_=async w=>{await $X(w,!0),a(E=>E.filter(O=>O.id!==w))},N=async w=>{confirm("Supprimer ce rappel ?")&&(await BX(w),a(E=>E.filter(O=>O.id!==w)))},S=new Date,C=r.filter(w=>w.dateRappel.toDate()<=S),z=r.filter(w=>w.dateRappel.toDate()>S);return n.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"1.1rem"},children:""}),n.jsx("span",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937"},children:"Rappels"}),C.length>0&&n.jsx("span",{style:{background:"#dc2626",color:"white",borderRadius:20,padding:"1px 7px",fontSize:"0.7rem",fontWeight:700},children:C.length})]}),n.jsx("button",{className:"btn-primary",style:{padding:"0.35rem 0.75rem",fontSize:"0.8rem"},onClick:()=>d(w=>!w),children:"+ Ajouter"})]}),u&&n.jsxs("form",{onSubmit:x,style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",background:"#f9fafb"},children:[n.jsx("div",{className:"form-group",children:n.jsx("input",{className:"form-input",placeholder:"Titre du rappel *",value:m.titre,onChange:w=>p(E=>({...E,titre:w.target.value})),required:!0})}),n.jsx("div",{className:"form-group",children:n.jsx("select",{className:"form-select",value:m.typeRappel,onChange:w=>p(E=>({...E,typeRappel:w.target.value})),children:Object.entries(nk).map(([w,E])=>n.jsxs("option",{value:w,children:[E.emoji," ",E.label]},w))})}),n.jsx("div",{className:"form-group",children:n.jsx("input",{type:"datetime-local",className:"form-input",value:m.dateRappel,onChange:w=>p(E=>({...E,dateRappel:w.target.value})),required:!0})}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsxs("select",{className:"form-select",value:m.priorite,onChange:w=>p(E=>({...E,priorite:w.target.value})),children:[n.jsx("option",{value:"normale",children:"Normale"}),n.jsx("option",{value:"urgente",children:" Urgente"})]}),n.jsxs("select",{className:"form-select",value:m.recurrence,onChange:w=>p(E=>({...E,recurrence:w.target.value})),children:[n.jsx("option",{value:"unique",children:"Une fois"}),n.jsx("option",{value:"hebdomadaire",children:"Hebdo"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[n.jsx("button",{type:"submit",className:"btn-primary",disabled:h,style:{flex:1},children:h?"...":"Enregistrer"}),n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Annuler"})]})]}),n.jsx("div",{style:{padding:"0.75rem 1.25rem"},children:l?n.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:"Chargement..."}):r.length===0?n.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:[n.jsx("div",{children:""}),n.jsx("div",{children:"Aucun rappel actif"})]}):n.jsxs(n.Fragment,{children:[C.length>0&&n.jsxs("div",{style:{marginBottom:"0.75rem"},children:[n.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#dc2626",textTransform:"uppercase",marginBottom:"0.4rem"},children:" En retard"}),C.map(w=>n.jsx(pA,{rappel:w,onDone:_,onDelete:N},w.id))]}),z.length>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#6b7280",textTransform:"uppercase",marginBottom:"0.4rem"},children:" venir"}),z.slice(0,5).map(w=>n.jsx(pA,{rappel:w,onDone:_,onDelete:N},w.id))]})]})})]})},pA=({rappel:e,onDone:t,onDelete:r})=>{const a=nk[e.typeRappel],l=e.dateRappel.toDate(),o=e.priorite==="urgente",u=l<=new Date;return n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.5rem 0",borderBottom:"1px solid #f9fafb"},children:[n.jsx("button",{onClick:()=>t(e.id),style:{width:20,height:20,border:`2px solid ${o?"#dc2626":"#d1d5db"}`,borderRadius:4,background:"white",cursor:"pointer",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",marginTop:2},title:"Marquer termin"}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{fontSize:"0.82rem",fontWeight:600,color:u?"#dc2626":"#1f2937",display:"flex",alignItems:"center",gap:"0.3rem"},children:[a.emoji," ",e.titre,o&&n.jsx("span",{style:{fontSize:"0.65rem",color:"#dc2626"},children:""})]}),n.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:2},children:[l.toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),"  ",l.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),n.jsx("button",{onClick:()=>r(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"0.9rem",flexShrink:0},title:"Supprimer",children:""})]})},UX=({profId:e,cahierId:t})=>{const r=Ht(),[a,l]=b.useState([]),[o,u]=b.useState(!0),[d,m]=b.useState("tous");b.useEffect(()=>{(async()=>{u(!0);try{const x=await SX(e,t);l(x)}catch(x){console.error("Erreur signets:",x)}finally{u(!1)}})()},[e,t]);const p=async(y,x)=>{try{await yc(y.id,{statutEvaluation:x}),l(_=>_.map(N=>N.id===y.id?{...N,statutEvaluation:x}:N))}catch(_){console.error("Erreur mise  jour statut:",_)}},h=d==="tous"?a:a.filter(y=>y.statutEvaluation===d),v=[{value:"tous",label:"Tous",color:"#6b7280"},{value:"a_evaluer",label:" valuer",color:"#d97706"},{value:"evaluation_creee",label:"Cre",color:"#2563eb"},{value:"evaluation_terminee",label:"Termine",color:"#059669"}];return n.jsxs("div",{children:[n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:n.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:700,color:"#1f2937",margin:0},children:[" Signets d'valuation (",a.length,")"]})}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:v.map(y=>n.jsx("button",{onClick:()=>m(y.value),style:{padding:"0.3rem 0.85rem",borderRadius:20,border:`1.5px solid ${d===y.value?y.color:"#e5e7eb"}`,background:d===y.value?y.color:"white",color:d===y.value?"white":"#4b5563",fontSize:"0.8rem",fontWeight:600,cursor:"pointer",transition:"all 0.15s"},children:y.label},y.value))}),o?n.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Chargement..."}):h.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"#9ca3af"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),n.jsx("div",{style:{fontWeight:600,color:"#6b7280",marginBottom:"0.25rem"},children:"Aucun signet trouv"}),n.jsx("div",{style:{fontSize:"0.85rem"},children:"Marquez des entres pour valuation depuis l'diteur de sance."})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:h.map(y=>{const x=ki[y.typeContenu];return bc[y.statut],n.jsxs("div",{style:{background:"white",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:"1rem",borderLeft:"4px solid #f59e0b"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.5rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,color:"#1f2937"},children:y.chapitre}),n.jsx("div",{style:{fontSize:"0.78rem",color:"#9ca3af",marginTop:"0.15rem"},children:y.date.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsx("button",{onClick:()=>r(`/prof/cahiers/${t}/modifier/${y.id}`),style:{background:"none",border:"none",cursor:"pointer",color:"#2563eb",fontSize:"0.8rem",fontWeight:600,whiteSpace:"nowrap"},children:" Modifier"})]}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[n.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:x.color+"22",color:x.color},children:[x.emoji," ",x.label]}),y.typeEvaluation&&n.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:"#fef3c7",color:"#92400e"},children:[" ",rk[y.typeEvaluation]]}),y.dateEvaluationPrevue&&n.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",background:"#f3f4f6",color:"#4b5563"},children:[" ",y.dateEvaluationPrevue.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),n.jsx("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:["a_evaluer","evaluation_creee","evaluation_terminee"].map(_=>{const N=y.statutEvaluation===_,S={a_evaluer:" valuer",evaluation_creee:"Cre",evaluation_terminee:" Termine"},C={a_evaluer:"#d97706",evaluation_creee:"#2563eb",evaluation_terminee:"#059669"};return n.jsx("button",{onClick:()=>p(y,_),style:{padding:"0.25rem 0.7rem",borderRadius:20,border:`1.5px solid ${N?C[_]:"#e5e7eb"}`,background:N?C[_]:"white",color:N?"white":"#6b7280",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:S[_]},_)})})]},y.id)})})]})},FX=({cahier:e})=>{const[t,r]=b.useState(null),[a,l]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const d=await wX(e.id);r(d)}catch{}finally{l(!1)}})()},[e.id]);const o=e.nombreSeancesPrevu>0?Math.min(100,Math.round(e.nombreSeancesRealise/e.nombreSeancesPrevu*100)):0;return a?n.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#9ca3af",fontSize:"0.85rem"},children:"Chargement des stats..."}):t?n.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"1.25rem"},children:[n.jsx("div",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Statistiques du cahier"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[n.jsx(Id,{value:t.total,label:"Sances total",color:"#2563eb",bg:"#dbeafe"}),n.jsx(Id,{value:t.realise,label:"Ralises",color:"#059669",bg:"#d1fae5"}),n.jsx(Id,{value:t.planifie,label:"Planifies",color:"#d97706",bg:"#fef3c7"}),n.jsx(Id,{value:`${t.tauxRealisation}%`,label:"Taux de ralisation",color:"#7c3aed",bg:"#ede9fe"})]}),n.jsxs("div",{style:{marginBottom:"1.25rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.4rem"},children:[n.jsx("span",{children:"Progression du programme"}),n.jsxs("span",{style:{fontWeight:700,color:e.couleur},children:[o,"%"]})]}),n.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:10,overflow:"hidden"},children:n.jsx("div",{style:{height:"100%",width:`${o}%`,background:e.couleur,borderRadius:10,transition:"width 0.5s ease"}})}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.3rem"},children:[e.nombreSeancesRealise," / ",e.nombreSeancesPrevu," sances prvues"]})]}),Object.keys(t.parType).length>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.78rem",fontWeight:700,color:"#9ca3af",textTransform:"uppercase",marginBottom:"0.6rem"},children:"Rpartition par type"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:Object.entries(t.parType).sort((u,d)=>d[1]-u[1]).map(([u,d])=>{const m=ki[u];if(!m)return null;const p=t.total>0?Math.round(d/t.total*100):0;return n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"#4b5563",marginBottom:"0.2rem"},children:[n.jsxs("span",{children:[m.emoji," ",m.label]}),n.jsxs("span",{style:{fontWeight:600},children:[d," (",p,"%)"]})]}),n.jsx("div",{style:{height:4,background:"#f3f4f6",borderRadius:10,overflow:"hidden"},children:n.jsx("div",{style:{height:"100%",width:`${p}%`,background:m.color,borderRadius:10}})})]},u)})})]})]}):null},Id=({value:e,label:t,color:r,bg:a})=>n.jsxs("div",{style:{background:a,borderRadius:10,padding:"0.75rem",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:r},children:e}),n.jsx("div",{style:{fontSize:"0.72rem",color:"#6b7280",marginTop:"0.15rem"},children:t})]}),GX=()=>{const{cahierId:e}=Ds(),{currentUser:t}=Ct(),r=Ht(),[a,l]=b.useState(null),[o,u]=b.useState([]),[d,m]=b.useState(!1),[p,h]=b.useState(!0),[v,y]=b.useState(!0),[x,_]=b.useState("liste"),[N,S]=b.useState("tous"),[C,z]=b.useState("tous");b.useEffect(()=>{if(!e)return;(async()=>{h(!0);try{const q=await tk(e);if(!q){r("/prof/cahiers");return}l(q)}finally{h(!1)}})()},[e]);const w=b.useCallback(async()=>{if(e){y(!0);try{const P=await fX(e);u(P),m(!1)}finally{y(!1)}}},[e]);b.useEffect(()=>{w()},[e]);const E=async P=>{if(confirm(`Supprimer la sance "${P.chapitre}" ?`))try{await EX(P.id),u(q=>q.filter(L=>L.id!==P.id))}catch{alert("Erreur lors de la suppression.")}},O=async(P,q)=>{try{await yc(P.id,{statut:q}),u(L=>L.map(Y=>Y.id===P.id?{...Y,statut:q}:Y))}catch{alert("Erreur mise  jour statut.")}},M=o.filter(P=>{const q=N==="tous"||P.statut===N,L=C==="tous"||P.typeContenu===C;return q&&L});return p?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):a?n.jsxs("div",{className:"cahier-detail-page",children:[n.jsxs("div",{className:"cahier-detail-header",children:[n.jsx("button",{onClick:()=>r("/prof/cahiers"),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem",padding:"0 0.5rem"},title:"Retour",children:""}),n.jsx("div",{style:{width:6,minHeight:60,borderRadius:4,background:a.couleur,alignSelf:"stretch"}}),n.jsxs("div",{className:"cahier-detail-info",children:[n.jsx("h1",{className:"cahier-detail-titre",children:a.titre}),n.jsxs("div",{className:"cahier-detail-badges",children:[n.jsx("span",{className:"badge-classe",children:a.classe}),n.jsx("span",{className:"badge-matiere",children:a.matiere}),n.jsx("span",{className:"badge-annee",children:a.anneeScolaire})]}),a.description&&n.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",margin:0},children:a.description})]}),n.jsx("div",{className:"cahier-detail-actions",children:n.jsx("button",{className:"btn-primary",onClick:()=>r(`/prof/cahiers/${e}/nouvelle`),children:"+ Nouvelle sance"})})]}),n.jsx("div",{className:"view-tabs",children:[{id:"liste",label:" Liste"},{id:"calendrier",label:" Calendrier"},{id:"signets",label:" Signets"},{id:"stats",label:" Statistiques"}].map(P=>n.jsx("button",{className:`view-tab ${x===P.id?"active":""}`,onClick:()=>_(P.id),children:P.label},P.id))}),x==="calendrier"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsx("div",{children:n.jsx(RX,{cahierId:a.id})}),n.jsx("div",{children:n.jsx(Ld,{profId:t.uid,cahierId:a.id})})]}),x==="signets"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsx(UX,{profId:t.uid,cahierId:a.id}),n.jsx(Ld,{profId:t.uid,cahierId:a.id})]}),x==="stats"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsx(FX,{cahier:a}),n.jsx(Ld,{profId:t.uid,cahierId:a.id})]}),x==="liste"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[["tous","realise","planifie","annule","reporte"].map(P=>{const q=P==="tous"?null:bc[P];return n.jsx("button",{onClick:()=>S(P),style:{padding:"0.3rem 0.75rem",borderRadius:20,border:`1.5px solid ${N===P?q?.color||"#2563eb":"#e5e7eb"}`,background:N===P?q?.bg||"#dbeafe":"white",color:N===P?q?.color||"#2563eb":"#4b5563",fontSize:"0.78rem",fontWeight:600,cursor:"pointer"},children:P==="tous"?"Tous":q?.label},P)}),n.jsxs("select",{className:"filtre-select",value:C,onChange:P=>z(P.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[n.jsx("option",{value:"tous",children:"Tous types"}),Object.entries(ki).map(([P,q])=>n.jsxs("option",{value:P,children:[q.emoji," ",q.label]},P))]})]}),v&&M.length===0?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):M.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{style:{fontSize:"2.5rem",opacity:.3,marginBottom:"0.5rem"},children:""}),n.jsxs("h3",{children:["Aucune sance",N!=="tous"||C!=="tous"?" (avec ce filtre)":""]}),n.jsx("button",{className:"btn-primary",onClick:()=>r(`/prof/cahiers/${e}/nouvelle`),style:{marginTop:"1rem"},children:"+ Ajouter la premire sance"})]}):n.jsxs("div",{className:"entrees-list",children:[M.map(P=>{const q=ki[P.typeContenu],L=bc[P.statut],Y=P.date.toDate();return n.jsxs("div",{className:"entree-card",style:{borderLeftColor:q.color},children:[n.jsxs("div",{className:"entree-card-top",children:[n.jsxs("div",{className:"entree-card-gauche",children:[n.jsxs("div",{className:"entree-date",children:[" ",Y.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),P.heureDebut&&n.jsxs("span",{style:{marginLeft:"0.5rem"},children:[" ",P.heureDebut,P.heureFin?`  ${P.heureFin}`:""]})]}),n.jsx("h3",{className:"entree-chapitre",children:P.chapitre}),n.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[n.jsxs("span",{className:"entree-type-badge",style:{background:q.color},children:[q.emoji," ",q.label]}),n.jsx("span",{className:"entree-statut-badge",style:{background:L.bg,color:L.color},children:L.label}),P.isMarqueEvaluation&&n.jsx("span",{className:"signet-badge",children:" valuation"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.25rem",flexShrink:0},children:[n.jsx("button",{className:"btn-icon",onClick:()=>r(`/prof/cahiers/${e}/modifier/${P.id}`),title:"Modifier",children:""}),n.jsx("button",{className:"btn-icon",onClick:()=>E(P),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]}),P.contenu&&n.jsx("div",{className:"entree-contenu-preview",dangerouslySetInnerHTML:{__html:P.contenu}}),P.objectifs&&n.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem",fontStyle:"italic"},children:[" ",P.objectifs]}),P.piecesJointes&&P.piecesJointes.length>0&&n.jsxs("div",{style:{fontSize:"0.78rem",color:"#2563eb",marginTop:"0.4rem"},children:[" ",P.piecesJointes.length," pice(s) jointe(s)"]}),n.jsx("div",{className:"entree-card-footer",children:n.jsx("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap"},children:["realise","planifie","annule"].map(W=>{const B=bc[W],Q=P.statut===W;return n.jsx("button",{onClick:()=>O(P,W),style:{padding:"0.2rem 0.6rem",borderRadius:20,border:`1.5px solid ${Q?B.color:"#e5e7eb"}`,background:Q?B.bg:"white",color:Q?B.color:"#9ca3af",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:B.label},W)})})})]},P.id)}),d&&n.jsx("div",{style:{textAlign:"center",padding:"1rem"},children:n.jsx("button",{className:"btn-secondary",onClick:()=>w(),disabled:v,children:v?"Chargement...":"Charger plus de sances"})})]})]}),n.jsx("div",{children:n.jsx(Ld,{profId:t.uid,cahierId:a.id})})]})]}):null};function HX(e){return{video:"",article:"",exercice:"",autre:""}[e]??""}function QX(e){const t=/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]{11})/,r=e.match(t);return r?r[1]:null}const VX=({onAjouter:e,onAnnuler:t})=>{const[r,a]=b.useState(""),[l,o]=b.useState(""),[u,d]=b.useState("article"),[m,p]=b.useState(""),[h,v]=b.useState("");function y(_){o(_),(_.includes("youtube.com")||_.includes("youtu.be"))&&d("video")}function x(){if(!r.trim()){v("Le titre est requis.");return}if(!l.trim()||!l.startsWith("http://")&&!l.startsWith("https://")){v("Entrez une URL valide commenant par https://");return}const _={id:String(Date.now()),titre:r.trim(),url:l.trim(),type:u,description:m.trim()||void 0};e(_)}return n.jsxs("div",{className:"lien-form",children:[n.jsx("input",{type:"text",placeholder:"Titre du lien *",value:r,onChange:_=>a(_.target.value),"aria-label":"Titre du lien"}),n.jsx("input",{type:"url",placeholder:"https://... *",value:l,onChange:_=>y(_.target.value),"aria-label":"URL du lien"}),n.jsxs("select",{value:u,onChange:_=>d(_.target.value),"aria-label":"Type de lien",children:[n.jsx("option",{value:"article",children:" Article"}),n.jsx("option",{value:"video",children:" Vido"}),n.jsx("option",{value:"exercice",children:" Exercice"}),n.jsx("option",{value:"autre",children:" Autre"})]}),n.jsx("textarea",{placeholder:"Description (optionnelle)",value:m,onChange:_=>p(_.target.value),rows:2,"aria-label":"Description du lien"}),h&&n.jsx("p",{style:{color:"#dc2626",fontSize:"0.8rem",margin:0},children:h}),n.jsxs("div",{className:"lien-form-actions",children:[n.jsx("button",{className:"btn-secondary",onClick:t,type:"button",children:"Annuler"}),n.jsx("button",{className:"btn-pedaclic",onClick:x,type:"button",children:" Ajouter"})]})]})},YX=({videoId:e})=>n.jsx("div",{className:"youtube-embed",children:n.jsx("iframe",{src:`https://www.youtube.com/embed/${e}`,title:"Vido YouTube",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}),ak=({liens:e,onChange:t,readonly:r=!1})=>{const[a,l]=b.useState(!1);function o(d){t([...e,d]),l(!1)}function u(d){t(e.filter(m=>m.id!==d))}return n.jsxs("section",{className:"liens-section","aria-label":"Liens externes",children:[n.jsx("h4",{children:" Liens et ressources"}),e.length>0&&n.jsx("div",{className:"liens-liste",children:e.map(d=>{const m=QX(d.url);return n.jsxs("div",{className:"lien-card",children:[n.jsx("span",{className:"lien-icone","aria-hidden":"true",children:HX(d.type)}),n.jsxs("div",{className:"lien-infos",children:[n.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"lien-titre",title:d.url,children:d.titre}),d.description&&n.jsx("p",{className:"lien-description",children:d.description}),m&&n.jsx(YX,{videoId:m})]}),!r&&n.jsx("button",{className:"lien-suppr",onClick:()=>u(d.id),title:"Supprimer ce lien",type:"button","aria-label":`Supprimer le lien ${d.titre}`,children:""})]},d.id)})}),e.length===0&&!r&&n.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun lien ajout. Ajoutez des ressources pour enrichir cette sance."}),!r&&n.jsx(n.Fragment,{children:a?n.jsx(VX,{onAjouter:o,onAnnuler:()=>l(!1)}):n.jsx("button",{className:"btn-secondary",onClick:()=>l(!0),type:"button",children:" Ajouter un lien"})})]})},KX=({selectedIds:e,onSelect:t,onFermer:r})=>{const[a,l]=b.useState(""),[o,u]=b.useState([]),[d,m]=b.useState(!0),[p,h]=b.useState("");b.useEffect(()=>{async function x(){try{const _=await jX();u(_)}catch{h("Impossible de charger la bibliothque.")}finally{m(!1)}}x()},[]);const v=b.useMemo(()=>{const x=a.toLowerCase().trim();return x?o.filter(_=>_.titre.toLowerCase().includes(x)||_.auteur.toLowerCase().includes(x)||_.categorie.toLowerCase().includes(x)):o},[o,a]);function y(x){x.target===x.currentTarget&&r()}return n.jsx("div",{className:"ebook-selector-overlay",onClick:y,role:"dialog","aria-modal":"true","aria-label":"Slectionner un ebook",children:n.jsxs("div",{className:"ebook-selector-panel",children:[n.jsxs("div",{className:"ebook-selector-header",children:[n.jsx("h3",{children:" Bibliothque PedaClic"}),n.jsx("button",{onClick:r,"aria-label":"Fermer",style:{background:"none",border:"none",fontSize:"1.3rem",cursor:"pointer",color:"#6b7280"},type:"button",children:""})]}),n.jsx("div",{className:"ebook-search",children:n.jsx("input",{type:"search",placeholder:" Rechercher par titre, auteur ou catgorie...",value:a,onChange:x=>l(x.target.value),autoFocus:!0,"aria-label":"Recherche ebook"})}),n.jsxs("div",{className:"ebook-liste",children:[d&&n.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:" Chargement de la bibliothque"}),p&&n.jsx("p",{style:{color:"#dc2626",textAlign:"center"},children:p}),!d&&!p&&v.length===0&&n.jsx("p",{style:{color:"#9ca3af",textAlign:"center"},children:"Aucun ebook ne correspond  votre recherche."}),!d&&v.map(x=>{const _=e.includes(x.id);return n.jsxs("button",{type:"button",className:`ebook-item ${_?"selected":""}`,onClick:()=>!_&&t(x),disabled:_,"aria-pressed":_,"aria-label":`${_?"Dj li : ":""}${x.titre}`,children:[x.couvertureUrl?n.jsx("img",{src:x.couvertureUrl,alt:`Couverture de ${x.titre}`,loading:"lazy"}):n.jsx("div",{style:{width:36,height:48,background:"#e5e7eb",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",flexShrink:0},"aria-hidden":"true",children:""}),n.jsxs("div",{className:"ebook-item-info",children:[n.jsx("div",{className:"ebook-item-titre",children:x.titre}),n.jsxs("div",{className:"ebook-item-meta",children:[x.auteur,"  ",x.categorie]}),_&&n.jsx("div",{style:{fontSize:"0.75rem",color:"#2563eb",marginTop:2},children:" Dj li  cette sance"})]})]},x.id)})]})]})})},ik=({ebooksLies:e,onChange:t,readonly:r=!1})=>{const[a,l]=b.useState(!1),o=e.map(m=>m.ebookId);function u(m){const p={ebookId:m.id,titre:m.titre,categorie:m.categorie,auteur:m.auteur};t([...e,p]),l(!1)}function d(m){t(e.filter(p=>p.ebookId!==m))}return n.jsxs("section",{"aria-label":"Ebooks lis  la sance",style:{marginTop:16},children:[n.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 8px"},children:" Ebooks de la bibliothque"}),e.length>0&&n.jsx("div",{className:"ebooks-lies",children:e.map(m=>n.jsxs("span",{className:"ebook-chip",children:[n.jsxs("a",{href:`/bibliotheque/${m.ebookId}`,className:"ebook-chip",style:{textDecoration:"none"},title:`Lire : ${m.titre}`,children:[" ",m.titre]}),!r&&n.jsx("button",{onClick:()=>d(m.ebookId),title:`Retirer ${m.titre}`,type:"button","aria-label":`Retirer l'ebook ${m.titre}`,children:""})]},m.ebookId))}),e.length===0&&!r&&n.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 8px"},children:"Aucun ebook li. Associez un ebook de la bibliothque  cette sance."}),!r&&n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(!0),style:{marginTop:8},children:" Choisir dans la bibliothque"}),a&&n.jsx(KX,{selectedIds:o,onSelect:u,onFermer:()=>l(!1)})]})},XX=()=>({date:new Date().toISOString().slice(0,10),heureDebut:"",heureFin:"",chapitre:"",typeContenu:"cours",contenu:"",objectifs:"",competences:[],statut:"realise",motifAnnulation:"",dateReport:"",notesPrivees:"",isMarqueEvaluation:!1,typeEvaluation:"",dateEvaluationPrevue:"",statutEvaluation:"a_evaluer"}),WX=({value:e,onChange:t,placeholder:r})=>{const a=b.useRef(null);b.useEffect(()=>{a.current&&a.current.innerHTML!==e&&(a.current.innerHTML=e)},[]);const l=(d,m)=>{document.execCommand(d,!1,m),a.current?.focus(),o()},o=()=>{a.current&&t(a.current.innerHTML)},u=d=>{try{return document.queryCommandState(d)}catch{return!1}};return n.jsxs("div",{children:[n.jsxs("div",{className:"rich-editor-toolbar",children:[[{cmd:"bold",label:"G",title:"Gras"},{cmd:"italic",label:"I",title:"Italique"},{cmd:"underline",label:"S",title:"Soulign"}].map(({cmd:d,label:m,title:p})=>n.jsx("button",{type:"button",className:`toolbar-btn ${u(d)?"active":""}`,onMouseDown:h=>{h.preventDefault(),l(d)},title:p,children:m},d)),n.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertUnorderedList")},title:"Liste  puces",children:""}),n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertOrderedList")},title:"Liste numrote",children:"1."}),n.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),["h2","h3","p"].map(d=>n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:m=>{m.preventDefault(),l("formatBlock",d)},title:d==="p"?"Paragraphe":d.toUpperCase(),children:d==="p"?"":d.toUpperCase()},d)),n.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("removeFormat")},title:"Effacer",children:""})]}),n.jsx("div",{ref:a,className:"rich-editor-area",contentEditable:!0,suppressContentEditableWarning:!0,onInput:o,"data-placeholder":r||"Dcrivez le contenu de la sance...",style:{position:"relative"}})]})},hA=()=>{const{cahierId:e,entreeId:t}=Ds(),{currentUser:r}=Ct(),a=Ht(),[l,o]=b.useState(null),[u,d]=b.useState(null),[m,p]=b.useState(XX()),[h,v]=b.useState([]),[y,x]=b.useState(!0),[_,N]=b.useState(!1),[S,C]=b.useState(!1),[z,w]=b.useState(""),[E,O]=b.useState([]),[M,P]=b.useState([]),q=!!t;b.useEffect(()=>{if(!e)return;(async()=>{x(!0);try{const k=await tk(e);if(!k){a("/prof/cahiers");return}if(o(k),q&&t){const T=await mX(t);T&&(d(T),v(T.piecesJointes||[]),O(T.liens??[]),P(T.ebooksLies??[]),p({date:T.date.toDate().toISOString().slice(0,10),heureDebut:T.heureDebut||"",heureFin:T.heureFin||"",chapitre:T.chapitre,typeContenu:T.typeContenu,contenu:T.contenu,objectifs:T.objectifs||"",competences:T.competences||[],statut:T.statut,motifAnnulation:T.motifAnnulation||"",dateReport:T.dateReport?T.dateReport.toDate().toISOString().slice(0,10):"",notesPrivees:T.notesPrivees||"",isMarqueEvaluation:T.isMarqueEvaluation,typeEvaluation:T.typeEvaluation||"",dateEvaluationPrevue:T.dateEvaluationPrevue?T.dateEvaluationPrevue.toDate().toISOString().slice(0,10):"",statutEvaluation:T.statutEvaluation||"a_evaluer"}))}}finally{x(!1)}})()},[e,t]);const L=Q=>{p(k=>({...k,competences:k.competences.includes(Q)?k.competences.filter(T=>T!==Q):[...k.competences,Q]}))},Y=async Q=>{if(!Q.target.files?.length||!r?.uid||!e)return;const k=Q.target.files[0];if(k.size>10*1024*1024){alert("Fichier trop volumineux (max 10 Mo)");return}C(!0);try{const T=await pX(r.uid,e,k),R=[...h,T];v(R),q&&t&&u&&await uA(t,h,[T])}catch{alert("Erreur upload fichier.")}finally{C(!1),Q.target.value=""}},W=async Q=>{if(!t){v(k=>k.filter(T=>T.url!==Q));return}try{await hX(t,h,Q),v(k=>k.filter(T=>T.url!==Q))}catch{alert("Erreur suppression fichier.")}},B=async Q=>{if(Q.preventDefault(),!m.chapitre.trim()){w("Le chapitre est obligatoire.");return}if(!m.date){w("La date est obligatoire.");return}if(!(!r?.uid||!e)){N(!0),w("");try{if(q&&t)await yc(t,e,m),await yc(t,{liens:E,ebooksLies:M});else{const k=await AX(e,r.uid,m);h.length>0&&await uA(k,[],h),(E.length>0||M.length>0)&&await yc(k,{liens:E,ebooksLies:M})}a(`/prof/cahiers/${e}`)}catch(k){const T=k instanceof Error?k.message:String(k);w("Erreur : "+T)}finally{N(!1)}}};return y?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):l?n.jsxs("div",{className:"entree-editor-page",children:[n.jsxs("div",{className:"editor-header",children:[n.jsx("button",{onClick:()=>a(`/prof/cahiers/${e}`),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem"},children:""}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"1.4rem",fontWeight:700,color:"#1f2937",margin:"0 0 0.2rem"},children:q?" Modifier la sance":" Nouvelle sance"}),n.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[l.titre,"  ",l.classe,"  ",l.matiere]})]})]}),n.jsxs("form",{onSubmit:B,children:[n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Informations de la sance"}),n.jsxs("div",{className:"form-row",style:{gridTemplateColumns:"1.5fr 1fr 1fr"},children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date *"}),n.jsx("input",{type:"date",className:"form-input",value:m.date,onChange:Q=>p(k=>({...k,date:Q.target.value})),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Heure dbut"}),n.jsx("input",{type:"time",className:"form-input",value:m.heureDebut,onChange:Q=>p(k=>({...k,heureDebut:Q.target.value}))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Heure fin"}),n.jsx("input",{type:"time",className:"form-input",value:m.heureFin,onChange:Q=>p(k=>({...k,heureFin:Q.target.value}))})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Chapitre / Titre de la sance *"}),n.jsx("input",{className:"form-input",placeholder:"Ex: Chapitre 3  Les fonctions affines",value:m.chapitre,onChange:Q=>p(k=>({...k,chapitre:Q.target.value})),required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Type de sance"}),n.jsx("select",{className:"form-select",value:m.typeContenu,onChange:Q=>p(k=>({...k,typeContenu:Q.target.value})),children:Object.entries(ki).map(([Q,k])=>n.jsxs("option",{value:Q,children:[k.emoji," ",k.label]},Q))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Statut"}),n.jsx("select",{className:"form-select",value:m.statut,onChange:Q=>p(k=>({...k,statut:Q.target.value})),children:Object.entries(bc).map(([Q,k])=>n.jsx("option",{value:Q,children:k.label},Q))})]})]}),m.statut==="annule"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Motif d'annulation"}),n.jsx("input",{className:"form-input",placeholder:"Ex: Grve enseignants, sortie scolaire...",value:m.motifAnnulation,onChange:Q=>p(k=>({...k,motifAnnulation:Q.target.value}))})]}),m.statut==="reporte"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Nouvelle date (report)"}),n.jsx("input",{type:"date",className:"form-input",value:m.dateReport,onChange:Q=>p(k=>({...k,dateReport:Q.target.value}))})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Contenu de la sance"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Contenu (mise en forme riche)"}),n.jsx(WX,{value:m.contenu,onChange:Q=>p(k=>({...k,contenu:Q})),placeholder:"Dcrivez le contenu enseign, les exemples traits, les formules vues..."})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),n.jsx("textarea",{className:"form-textarea",placeholder:"Ex: L'lve sera capable de rsoudre une quation du second degr...",value:m.objectifs,onChange:Q=>p(k=>({...k,objectifs:Q.target.value})),rows:2})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Comptences vises"}),n.jsx("div",{className:"competences-container",children:MX.map(Q=>n.jsx("button",{type:"button",className:`competence-tag ${m.competences.includes(Q)?"selected":""}`,onClick:()=>L(Q),children:Q},Q))})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Signet d'valuation"}),n.jsxs("div",{className:"signet-section",children:[n.jsxs("div",{className:"signet-toggle",onClick:()=>p(Q=>({...Q,isMarqueEvaluation:!Q.isMarqueEvaluation})),children:[n.jsx("div",{className:`toggle-switch ${m.isMarqueEvaluation?"on":""}`}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1f2937"},children:"Marquer pour valuation"}),n.jsx("div",{style:{fontSize:"0.78rem",color:"#6b7280"},children:"Ce contenu sera valu ultrieurement"})]})]}),m.isMarqueEvaluation&&n.jsx("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Type d'valuation"}),n.jsxs("select",{className:"form-select",value:m.typeEvaluation,onChange:Q=>p(k=>({...k,typeEvaluation:Q.target.value})),children:[n.jsx("option",{value:"",children:"Choisir..."}),Object.entries(rk).map(([Q,k])=>n.jsx("option",{value:Q,children:k},Q))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date prvue d'valuation"}),n.jsx("input",{type:"date",className:"form-input",value:m.dateEvaluationPrevue,onChange:Q=>p(k=>({...k,dateEvaluationPrevue:Q.target.value}))})]})]})})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Pices jointes"}),h.length>0&&n.jsx("div",{className:"pieces-jointes-list",children:h.map(Q=>n.jsxs("div",{className:"piece-jointe-item",children:[n.jsx("span",{children:""}),n.jsx("a",{href:Q.url,target:"_blank",rel:"noopener noreferrer",children:Q.nom}),n.jsxs("span",{style:{color:"#9ca3af",fontSize:"0.75rem"},children:["(",Math.round((Q.taille??0)/1024)," Ko)"]}),n.jsx("button",{type:"button",onClick:()=>W(Q.url),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",marginLeft:"auto"},children:""})]},Q.url))}),n.jsxs("label",{className:"upload-zone",children:[S?"Envoi en cours...":" Cliquer pour ajouter un fichier (PDF, image  max 10 Mo)",n.jsx("input",{type:"file",style:{display:"none"},accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.ppt,.pptx",onChange:Y,disabled:S})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Ressources enrichies"}),n.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 4px"},children:"Ajoutez des liens ou des ebooks pour enrichir cette sance."}),n.jsx(ak,{liens:E,onChange:O}),n.jsx(ik,{ebooksLies:M,onChange:P})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Notes prives"}),n.jsx("textarea",{className:"form-textarea",placeholder:"Notes personnelles (non visibles par l'administration)...",value:m.notesPrivees,onChange:Q=>p(k=>({...k,notesPrivees:Q.target.value})),rows:3}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Ces notes sont uniquement visibles par vous."})]}),z&&n.jsx("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.85rem"},children:z}),n.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingBottom:"2rem"},children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(`/prof/cahiers/${e}`),children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:_,style:{minWidth:160},children:_?"Enregistrement...":q?" Mettre  jour":" Enregistrer la sance"})]})]})]}):null},ZX=50*1024*1024,JX="image/jpeg,image/png,image/gif,image/webp,audio/mpeg,audio/wav,audio/ogg,video/mp4";function eW(e){return e.startsWith("image/")?"image":e.startsWith("audio/")?"audio":e.startsWith("video/")?"video":"autre"}function sk(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/1024/1024).toFixed(1)} Mo`}const tW=({src:e,alt:t,onFermer:r})=>n.jsx("div",{className:"image-fullscreen-overlay",onClick:r,role:"dialog","aria-modal":"true","aria-label":"Image en plein cran",children:n.jsx("img",{src:e,alt:t})}),rW=({pj:e,onSupprimer:t,readonly:r=!1})=>{const[a,l]=b.useState(!1);return n.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",marginBottom:10,background:"#fff"},children:[e.type==="image"&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:e.url,alt:e.nom,className:"media-image",onClick:()=>l(!0),style:{maxWidth:"100%",display:"block"},loading:"lazy"}),a&&n.jsx(tW,{src:e.url,alt:e.nom,onFermer:()=>l(!1)})]}),e.type==="audio"&&n.jsx("div",{className:"media-player",children:n.jsxs("audio",{controls:!0,preload:"metadata",children:[n.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture audio."]})}),e.type==="video"&&n.jsx("div",{className:"media-player",children:n.jsxs("video",{controls:!0,preload:"none",playsInline:!0,children:[n.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture vido."]})}),(e.type==="pdf"||e.type==="autre")&&n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",textDecoration:"none",color:"#2563eb"},children:[" ",e.nom]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 12px",background:"#f9fafb",borderTop:"1px solid #f3f4f6"},children:[n.jsxs("span",{style:{fontSize:"0.78rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.nom,e.taille&&`  ${sk(e.taille)}`]}),!r&&t&&n.jsx("button",{type:"button",onClick:()=>t(e.id),title:"Supprimer ce fichier",style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"1rem",padding:"0 4px"},"aria-label":`Supprimer ${e.nom}`,children:""})]})]})},nW=({piecesJointes:e,entreeId:t,profId:r,onChange:a,readonly:l=!1})=>{const o=b.useRef(null),[u,d]=b.useState(null),[m,p]=b.useState("");async function h(y){const x=y.target.files?.[0];if(!x)return;if(x.size>ZX){p(`Fichier trop volumineux (max 50 Mo). Ce fichier fait ${sk(x.size)}.`);return}p("");const _=`${Date.now()}_${x.name}`,N=`cahiers/${r}/${t}/${_}`,S=Br(Ur,N),C=yA(S,x);C.on("state_changed",z=>{const w=Math.round(z.bytesTransferred/z.totalBytes*100);d(w)},z=>{p(`Erreur d'envoi : ${z.message}`),d(null)},async()=>{const z=await Ma(C.snapshot.ref),w=eW(x.type),E={id:String(Date.now()),nom:x.name,url:z,type:w,taille:x.size,mimeType:x.type};a([...e,E]),d(null),o.current&&(o.current.value="")})}function v(y){a(e.filter(x=>x.id!==y))}return n.jsxs("section",{"aria-label":"Fichiers mdias",style:{marginTop:20},children:[n.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 12px"},children:" Fichiers mdias"}),e.map(y=>n.jsx(rW,{pj:y,onSupprimer:v,readonly:l},y.id)),e.length===0&&!l&&n.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun fichier ajout. Formats accepts : images, audio, vido (max 50 Mo)."}),!l&&n.jsxs(n.Fragment,{children:[u!==null&&n.jsxs("div",{style:{marginBottom:12},children:[n.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:9999,overflow:"hidden"},children:n.jsx("div",{style:{height:"100%",width:`${u}%`,background:"#2563eb",transition:"width 0.3s ease"},role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100})}),n.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:"4px 0 0"},children:["Envoi en cours ",u,"%"]})]}),m&&n.jsxs("p",{style:{fontSize:"0.8rem",color:"#dc2626",margin:"0 0 8px"},children:[" ",m]}),n.jsx("input",{ref:o,type:"file",accept:JX,onChange:h,style:{display:"none"},"aria-label":"Choisir un fichier mdia"}),n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o.current?.click(),disabled:u!==null,children:" Ajouter un fichier (image / audio / vido)"}),n.jsx("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:6},children:"Max 50 Mo  JPG, PNG, GIF, WebP, MP3, WAV, OGG, MP4"})]})]})};function aW(e){return e.toDate().toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}const iW=()=>{const{cahierId:e}=Ds(),t=Ht(),[r,a]=b.useState(null),[l,o]=b.useState([]),[u,d]=b.useState(!0),[m,p]=b.useState(""),[h,v]=b.useState(null);b.useEffect(()=>{async function x(){if(e){d(!0);try{const _=await yX(e);if(!_){p("Ce cahier n'est pas accessible ou n'existe pas.");return}a(_);const N=await CX(e);o(N)}catch{p("Une erreur est survenue lors du chargement.")}finally{d(!1)}}}x()},[e]);function y(x){v(_=>_===x?null:x)}return u?n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"2rem"},children:""}),n.jsx("p",{children:"Chargement du cahier de textes"})]}):m||!r?n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"2.5rem"},children:""}),n.jsx("p",{style:{color:"#dc2626",fontWeight:600},children:m||"Accs non autoris"}),n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>t(-1),style:{marginTop:12},children:" Retour"})]}):n.jsxs("main",{style:{maxWidth:760,margin:"0 auto",padding:"20px 16px"},children:[n.jsxs("header",{className:"eleve-cahier-header",children:[n.jsx("button",{type:"button",onClick:()=>t(-1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff",cursor:"pointer",borderRadius:8,padding:"4px 10px",fontSize:"0.85rem",marginBottom:10,display:"inline-flex",alignItems:"center",gap:4},children:" Retour"}),n.jsx("h1",{children:r.titre}),n.jsxs("p",{children:[r.matiere,"  ",r.classe,"  ",r.anneeScolaire]}),n.jsx("span",{className:"badge-lecture-seule",children:" Lecture seule  Sances ralises"})]}),r.description&&n.jsx("div",{style:{background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:10,padding:14,marginBottom:20,fontSize:"0.9rem",color:"#0c4a6e"},children:r.description}),n.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:16},children:l.length===0?"Aucune sance ralise pour l'instant.":`${l.length} sance${l.length>1?"s":""} ralise${l.length>1?"s":""}`}),l.length===0&&n.jsxs("div",{className:"eleve-vide",children:[n.jsx("span",{className:"emoji",children:""}),n.jsx("p",{children:"Votre professeur n'a pas encore enregistr de sance ralise."}),n.jsx("p",{style:{fontSize:"0.8rem"},children:"Revenez plus tard !"})]}),l.map(x=>{const _=h===x.id,N=(x.piecesJointes?.length??0)>0,S=(x.liens?.length??0)>0,C=(x.ebooksLies?.length??0)>0;return n.jsxs("article",{className:"seance-card-eleve",children:[n.jsxs("button",{type:"button",onClick:()=>y(x.id),style:{width:"100%",background:"none",border:"none",cursor:"pointer",textAlign:"left",padding:0},"aria-expanded":_,"aria-controls":`seance-corps-${x.id}`,children:[n.jsxs("div",{className:"seance-card-eleve-date",children:[" ",aW(x.date),x.heureDebut?`  ${x.heureDebut}${x.heureFin?`  ${x.heureFin}`:""}`:""]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{margin:0},children:x.chapitre}),n.jsx("span",{style:{fontSize:"1.1rem",transition:"transform 0.2s",transform:_?"rotate(180deg)":"rotate(0)",display:"inline-block"},"aria-hidden":"true",children:""})]}),n.jsxs("div",{style:{display:"flex",gap:6,marginTop:6,flexWrap:"wrap"},children:[S&&n.jsx("span",{style:{fontSize:"0.72rem",background:"#eff6ff",color:"#2563eb",padding:"2px 8px",borderRadius:9999},children:" Ressources"}),C&&n.jsx("span",{style:{fontSize:"0.72rem",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:9999},children:" Ebooks"}),N&&n.jsx("span",{style:{fontSize:"0.72rem",background:"#f0fdf4",color:"#16a34a",padding:"2px 8px",borderRadius:9999},children:" Mdias"})]})]}),_&&n.jsxs("div",{id:`seance-corps-${x.id}`,style:{marginTop:14,borderTop:"1px solid #f3f4f6",paddingTop:14},children:[x.objectifs&&n.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8,padding:10,fontSize:"0.875rem",color:"#166534",marginBottom:12},children:[n.jsx("strong",{children:" Objectifs :"})," ",x.objectifs]}),n.jsx("div",{className:"seance-card-eleve-contenu",children:x.contenu}),S&&n.jsx(ak,{liens:x.liens??[],onChange:()=>{},readonly:!0}),C&&n.jsx(ik,{ebooksLies:x.ebooksLies??[],onChange:()=>{},readonly:!0}),N&&n.jsx(nW,{piecesJointes:x.piecesJointes??[],entreeId:x.id,profId:"",onChange:()=>{},readonly:!0})]})]},x.id)})]})},sW=()=>{const{currentUser:e}=Ct(),t=e?.uid||"",r=e?.displayName||"Parent",[a,l]=b.useState([]),[o,u]=b.useState(null),[d,m]=b.useState(null),[p,h]=b.useState(!0),[v,y]=b.useState(!1),[x,_]=b.useState(null),[N,S]=b.useState(!1),[C,z]=b.useState(""),[w,E]=b.useState(!1),[O,M]=b.useState(null),[P,q]=b.useState(null),[L,Y]=b.useState("apercu");b.useEffect(()=>{W()},[t]),b.useEffect(()=>{o&&B(o)},[o]);const W=async()=>{try{h(!0),_(null);const T=await AK(t);l(T),T.length===1&&u(T[0].enfantId)}catch(T){_("Erreur lors du chargement des enfants."),console.error(T)}finally{h(!1)}},B=async T=>{try{y(!0),_(null);const R=await zK(t,T);m(R)}catch(R){_(R.message||"Erreur lors du chargement du suivi."),m(null)}finally{y(!1)}},Q=async T=>{if(T.preventDefault(),M(null),q(null),!C.trim()){M("Veuillez saisir le code d'invitation.");return}try{E(!0);const R=await CK(t,C);q(`${R.enfantNom} a t ajout avec succs !`),z(""),S(!1),await W(),u(R.enfantId)}catch(R){M(R.message||"Erreur lors de la liaison.")}finally{E(!1)}},k=async T=>{if(window.confirm(`tes-vous sr de vouloir retirer ${T.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await EK(T.id,t),o===T.enfantId&&(u(null),m(null)),await W()}catch(J){_(J.message||"Erreur lors de la suppression.")}};return p?n.jsxs("div",{className:"parent-loading",children:[n.jsx("div",{className:"parent-spinner"}),n.jsx("p",{children:"Chargement de votre espace parent..."})]}):n.jsxs("div",{className:"parent-dashboard",children:[n.jsxs("header",{className:"parent-header",children:[n.jsxs("div",{className:"parent-header-info",children:[n.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),n.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",n.jsx("strong",{children:r}),"  Suivez la progression de vos enfants"]})]}),n.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{S(!N),M(null),q(null)},children:" Ajouter un enfant"})]}),x&&n.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[n.jsxs("span",{children:[" ",x]}),n.jsx("button",{onClick:()=>_(null),children:""})]}),P&&n.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[n.jsxs("span",{children:[" ",P]}),n.jsx("button",{onClick:()=>q(null),children:""})]}),N&&n.jsxs("div",{className:"parent-form-liaison",children:[n.jsx("h3",{children:" Lier un enfant  votre compte"}),n.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),n.jsxs("form",{onSubmit:Q,className:"parent-form",children:[n.jsxs("div",{className:"parent-form-group",children:[n.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),n.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:C,onChange:T=>z(T.target.value.toUpperCase()),maxLength:14,disabled:w,className:"parent-input"})]}),O&&n.jsxs("p",{className:"parent-form-erreur",children:[" ",O]}),n.jsxs("div",{className:"parent-form-actions",children:[n.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:w,children:w?"Vrification...":" Valider"}),n.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>S(!1),children:"Annuler"})]})]})]}),a.length===0?n.jsxs("div",{className:"parent-empty-state",children:[n.jsx("div",{className:"parent-empty-icon",children:""}),n.jsx("h2",{children:"Aucun enfant li"}),n.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),n.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>S(!0),children:" Ajouter mon premier enfant"})]}):n.jsxs("div",{className:"parent-content",children:[n.jsxs("aside",{className:"parent-sidebar",children:[n.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),n.jsx("ul",{className:"parent-enfants-liste",children:a.map(T=>n.jsxs("li",{className:`parent-enfant-card ${o===T.enfantId?"parent-enfant-actif":""}`,onClick:()=>u(T.enfantId),children:[n.jsx("div",{className:"parent-enfant-avatar",children:T.enfantNom.charAt(0).toUpperCase()}),n.jsxs("div",{className:"parent-enfant-info",children:[n.jsx("span",{className:"parent-enfant-nom",children:T.enfantNom}),T.enfantClasse&&n.jsx("span",{className:"parent-enfant-classe",children:T.enfantClasse})]}),n.jsx("button",{className:"parent-enfant-supprimer",onClick:R=>{R.stopPropagation(),k(T)},title:"Retirer cet enfant",children:""})]},T.id))})]}),n.jsx("main",{className:"parent-main",children:o?v?n.jsxs("div",{className:"parent-loading",children:[n.jsx("div",{className:"parent-spinner"}),n.jsx("p",{children:"Chargement du suivi..."})]}):d?n.jsxs("div",{className:"parent-dashboard-detail",children:[n.jsxs("div",{className:"parent-enfant-header",children:[n.jsxs("div",{className:"parent-enfant-header-info",children:[n.jsx("h2",{children:d.enfant.nom}),d.enfant.classe&&n.jsx("span",{className:"parent-badge",children:d.enfant.classe}),d.enfant.derniereConnexion&&n.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",rx(d.enfant.derniereConnexion)]})]}),n.jsx("p",{className:"parent-message-motivation",children:TK(d.scoreGlobal)})]}),n.jsxs("div",{className:"parent-indicateurs",children:[n.jsxs("div",{className:"parent-card parent-card-score",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Score Global"}),n.jsxs("span",{className:`parent-card-value parent-score-${d.scoreGlobal>=60?"bon":d.scoreGlobal>=40?"moyen":"bas"}`,children:[d.scoreGlobal,"/100"]})]})]}),n.jsxs("div",{className:"parent-card parent-card-streak",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Streak"}),n.jsxs("span",{className:"parent-card-value",children:[d.streak.actuel," jour",d.streak.actuel>1?"s":""]})]})]}),n.jsxs("div",{className:"parent-card parent-card-lacunes",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Lacunes"}),n.jsxs("span",{className:"parent-card-value",children:[d.lacunes.length," matire",d.lacunes.length>1?"s":""]})]})]}),n.jsxs("div",{className:"parent-card parent-card-objectifs",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Objectifs"}),n.jsxs("span",{className:"parent-card-value",children:[d.objectifs.filter(T=>T.statut==="atteint").length,"/",d.objectifs.length]})]})]})]}),n.jsxs("div",{className:"parent-section parent-section-semaine",children:[n.jsx("h3",{children:" Activit de la semaine"}),n.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((T,R)=>n.jsxs("div",{className:`parent-jour ${d.streak.semaineCourante[R]?"parent-jour-actif":"parent-jour-inactif"}`,children:[n.jsx("span",{className:"parent-jour-label",children:T}),n.jsx("span",{className:"parent-jour-icon",children:d.streak.semaineCourante[R]?"":""})]},T))})]}),n.jsxs("div",{className:"parent-onglets",children:[n.jsx("button",{className:`parent-onglet ${L==="apercu"?"parent-onglet-actif":""}`,onClick:()=>Y("apercu"),children:" Aperu"}),n.jsxs("button",{className:`parent-onglet ${L==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>Y("lacunes"),children:[" Lacunes (",d.lacunes.length,")"]}),n.jsxs("button",{className:`parent-onglet ${L==="alertes"?"parent-onglet-actif":""}`,onClick:()=>Y("alertes"),children:[" Alertes (",d.alertes.length,")"]}),n.jsx("button",{className:`parent-onglet ${L==="resume"?"parent-onglet-actif":""}`,onClick:()=>Y("resume"),children:" Rsum"})]}),n.jsxs("div",{className:"parent-onglet-contenu",children:[L==="apercu"&&n.jsxs("div",{className:"parent-tab-apercu",children:[n.jsxs("div",{className:"parent-section",children:[n.jsx("h3",{children:" Derniers quiz passs"}),d.derniersQuiz.length===0?n.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):n.jsx("div",{className:"parent-quiz-liste",children:d.derniersQuiz.map((T,R)=>n.jsxs("div",{className:`parent-quiz-item ${T.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[n.jsxs("div",{className:"parent-quiz-info",children:[n.jsx("span",{className:"parent-quiz-discipline",children:T.disciplineNom}),n.jsx("span",{className:"parent-quiz-titre",children:T.quizTitre})]}),n.jsxs("div",{className:"parent-quiz-score",children:[n.jsxs("span",{className:`parent-quiz-note ${T.reussi?"note-ok":"note-ko"}`,children:[T.noteSur20,"/20"]}),n.jsx("span",{className:"parent-quiz-statut",children:T.reussi?" Russi":" chou"})]}),n.jsx("span",{className:"parent-quiz-date",children:rx(T.datePassage)})]},R))})]}),n.jsxs("div",{className:"parent-section",children:[n.jsx("h3",{children:" Objectifs de la semaine"}),d.objectifs.length===0?n.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):n.jsx("div",{className:"parent-objectifs-liste",children:d.objectifs.map((T,R)=>n.jsxs("div",{className:"parent-objectif-item",children:[n.jsxs("div",{className:"parent-objectif-header",children:[n.jsx("span",{className:"parent-objectif-titre",children:T.titre}),n.jsx("span",{className:`parent-objectif-statut parent-statut-${T.statut}`,children:T.statut==="atteint"?" Atteint":T.statut==="en_cours"?" En cours":T.statut==="echoue"?" chou":" Non commenc"})]}),n.jsx("div",{className:"parent-progress-bar",children:n.jsx("div",{className:`parent-progress-fill parent-progress-${T.statut}`,style:{width:`${Math.min(T.progression/T.cible*100,100)}%`}})}),n.jsxs("span",{className:"parent-objectif-detail",children:[T.progression,"/",T.cible]})]},R))})]})]}),L==="lacunes"&&n.jsx("div",{className:"parent-tab-lacunes",children:d.lacunes.length===0?n.jsxs("div",{className:"parent-vide-section",children:[n.jsx("span",{className:"parent-vide-icon",children:""}),n.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):n.jsx("div",{className:"parent-lacunes-liste",children:d.lacunes.map((T,R)=>n.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:Kf(T.niveauUrgence)},children:[n.jsxs("div",{className:"parent-lacune-header",children:[n.jsx("span",{className:"parent-lacune-discipline",children:T.disciplineNom}),n.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:Kf(T.niveauUrgence),color:"#fff"},children:QM(T.niveauUrgence)})]}),n.jsxs("div",{className:"parent-lacune-details",children:[n.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",n.jsxs("strong",{children:[T.moyenne,"/20"]})]}),n.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",VM(T.tendance)," ",T.tendance==="hausse"?"En hausse":T.tendance==="baisse"?"En baisse":"Stable"]})]}),n.jsx("p",{className:"parent-lacune-conseil",children:T.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":T.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},R))})}),L==="alertes"&&n.jsx("div",{className:"parent-tab-alertes",children:d.alertes.length===0?n.jsxs("div",{className:"parent-vide-section",children:[n.jsx("span",{className:"parent-vide-icon",children:""}),n.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):n.jsx("div",{className:"parent-alertes-liste",children:d.alertes.map((T,R)=>n.jsxs("div",{className:`parent-alerte-item parent-alerte-${T.niveau}`,children:[n.jsxs("div",{className:"parent-alerte-header",children:[n.jsx("span",{className:"parent-alerte-titre",children:T.titre}),n.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:kK(T.niveau),color:"#fff"},children:PK(T.type)})]}),n.jsx("p",{className:"parent-alerte-message",children:T.message}),n.jsx("span",{className:"parent-alerte-date",children:rx(T.dateCreation)})]},R))})}),L==="resume"&&d.resume&&n.jsxs("div",{className:"parent-tab-resume",children:[n.jsxs("div",{className:"parent-resume-header",children:[n.jsxs("h3",{children:[" Rsum : ",d.resume.semaine]}),n.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",d.resume.scoreGlobal,"/100"," ",sA(d.resume.evolutionScore)]})]}),n.jsxs("div",{className:"parent-resume-stats",children:[n.jsxs("div",{className:"parent-resume-stat",children:[n.jsx("span",{className:"parent-resume-stat-value",children:d.resume.nombreQuizSemaine}),n.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),n.jsxs("div",{className:"parent-resume-stat",children:[n.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.joursActifsSemaine,"/7"]}),n.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),n.jsxs("div",{className:"parent-resume-stat",children:[n.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.tempsEstimeMinutes," min"]}),n.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),n.jsxs("div",{className:"parent-resume-stat",children:[n.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.objectifsAtteints,"/",d.resume.objectifsTotal]}),n.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),d.resume.evolutionDisciplines.length>0&&n.jsxs("div",{className:"parent-section",children:[n.jsx("h4",{children:" volution par matire"}),n.jsx("div",{className:"parent-evolution-liste",children:d.resume.evolutionDisciplines.map((T,R)=>n.jsxs("div",{className:"parent-evolution-item",children:[n.jsx("span",{className:"parent-evolution-discipline",children:T.disciplineNom}),n.jsxs("div",{className:"parent-evolution-scores",children:[n.jsxs("span",{className:"parent-evolution-prec",children:[T.moyenneSemainePrecedente,"/20"]}),n.jsx("span",{className:"parent-evolution-fleche",children:sA(T.evolution)}),n.jsxs("span",{className:"parent-evolution-courante",children:[T.moyenneSemaineCourante,"/20"]}),n.jsxs("span",{className:`parent-evolution-ecart ${T.ecart>0?"ecart-positif":T.ecart<0?"ecart-negatif":""}`,children:["(",T.ecart>0?"+":"",T.ecart,")"]})]})]},R))})]}),d.resume.disciplinesEnDifficulte.length>0&&n.jsxs("div",{className:"parent-section parent-section-warning",children:[n.jsx("h4",{children:" Matires ncessitant une attention"}),n.jsx("ul",{className:"parent-disciplines-difficulte",children:d.resume.disciplinesEnDifficulte.map((T,R)=>n.jsx("li",{children:T},R))})]})]}),L==="resume"&&!d.resume&&n.jsxs("div",{className:"parent-vide-section",children:[n.jsx("span",{className:"parent-vide-icon",children:""}),n.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):n.jsxs("div",{className:"parent-erreur-dashboard",children:[n.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),n.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&B(o),children:" Ressayer"})]}):n.jsx("div",{className:"parent-select-enfant",children:n.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},lW="https://api.pedaclic.sn",Dl={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},oW={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},$d={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function cW(e){try{const t=await fetch(`${lW}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.error||`Erreur serveur (${t.status})`)}const r=await t.json();if(!r.success)throw new Error(r.error||"La gnration a chou.");return r}catch(t){throw console.error("[aiGeneratorService] Erreur gnration:",t),t instanceof TypeError&&t.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):t}}async function uW(e,t,r,a){try{const l=await nr(_e(oe,"generated_content"),{userId:e,type:t.type,discipline:t.discipline,disciplineId:a,classe:t.classe,chapitre:t.chapitre,content:r,options:t.options||null,createdAt:Fe.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",l.id),l.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",l),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function dW(e,t,r,a){try{const l=r.map((d,m)=>({id:`q_${Date.now()}_${m}`,question:d.question,options:d.options,reponseCorrecte:d.reponseCorrecte,explication:d.explication||"",difficulte:d.difficulte||"moyen",points:d.points||2})),o={disciplineId:a,titre:`Quiz IA  ${t.chapitre}`,description:`Quiz auto-gnr pour ${t.discipline} (${t.classe})  Chapitre : ${t.chapitre}`,questions:l,duree:15,isPremium:!0,noteMinimale:10,auteurId:e,source:"ia_generator",createdAt:Fe.now()},u=await nr(_e(oe,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",u.id),u.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",l),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function fW(e,t=20){try{const r=Le(_e(oe,"generated_content"),Ae("userId","==",e),nt("createdAt","desc")),a=await Te(r),l=[];return a.forEach(o=>{l.length<t&&l.push({id:o.id,...o.data()})}),l}catch(r){throw console.error("[aiGeneratorService] Erreur chargement historique:",r),new Error("Erreur lors du chargement de l'historique.")}}async function mW(e){try{await Ln(be(oe,"generated_content",e)),console.log("[aiGeneratorService] Contenu supprim:",e)}catch(t){throw console.error("[aiGeneratorService] Erreur suppression:",t),new Error("Erreur lors de la suppression du contenu.")}}const pW=["6me","5me","4me","3me","2nde","1re","Terminale"],hW=[30,45,60,90,120],vW=()=>{const{currentUser:e}=Ct(),[t,r]=b.useState(1),[a,l]=b.useState([]),[o,u]=b.useState(null),[d,m]=b.useState(""),[p,h]=b.useState(""),[v,y]=b.useState(""),[x,_]=b.useState(null),[N,S]=b.useState({}),[C,z]=b.useState(!1),[w,E]=b.useState(null),[O,M]=b.useState(null),[P,q]=b.useState(!1),[L,Y]=b.useState(!1),[W,B]=b.useState(null),[Q,k]=b.useState(!1),[T,R]=b.useState([]),[J,H]=b.useState(!1),[ve,U]=b.useState(!0),ge=b.useMemo(()=>{const V=new Map;return a.forEach(ye=>{V.has(ye.nom)||V.set(ye.nom,ye)}),Array.from(V.values())},[a]);b.useEffect(()=>{(async()=>{try{U(!0);const ye=Le(_e(oe,"disciplines"),nt("nom")),qe=await Te(ye),Ie=[];qe.forEach(Qe=>{const Qt=Qe.data();Qt.nom&&Qt.nom.trim()&&Ie.push({id:Qe.id,nom:Qt.nom||"",classe:Qt.classe||"",niveau:Qt.niveau||""})}),l(Ie)}catch(ye){console.error("[AIGenerator] Erreur chargement disciplines:",ye),M("Impossible de charger les disciplines.")}finally{U(!1)}})()},[]);const re=V=>{u(V),M(null)},me=()=>{const V=[];if(o||V.push("discipline"),d||V.push("classe"),(!p||p<1)&&V.push("dure de la leon"),V.length>0){M(`Champs requis manquants : ${V.join(", ")}`);return}r(2),M(null)},xe=()=>{if(!v.trim()){M("Veuillez saisir le titre du chapitre.");return}r(3),M(null)},he=V=>{_(V),r(4),M(null)},F=()=>{t>1&&(r(V=>V-1),M(null),t===5&&(E(null),Y(!1),B(null)))},de=()=>{r(1),u(null),m(""),h(""),y(""),_(null),S({}),E(null),M(null),Y(!1),B(null)},Ee=async()=>{if(!o||!x||!v.trim()||!d){M("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}z(!0),M(null);try{const V={...N,duree:typeof p=="number"?p:void 0},ye={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:Object.keys(V).length>0?V:void 0},qe=await cW(ye);E(qe),r(5)}catch(V){const ye=V instanceof Error?V.message:"Erreur inconnue";M(ye)}finally{z(!1)}},ie=async()=>{if(!(!e||!w||!o||!x)){q(!0),M(null);try{let V;const qe=a.find(Qe=>Qe.nom===o.nom&&Qe.classe===d)?.id||o.id,Ie={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:{...N,duree:typeof p=="number"?p:void 0}};w.type==="quiz"&&w.data.questions?V=await dW(e.uid,Ie,w.data.questions,qe):V=await uW(e.uid,Ie,w.data.content||"",qe),B(V),Y(!0)}catch(V){const ye=V instanceof Error?V.message:"Erreur de sauvegarde";M(ye)}finally{q(!1)}}},K=async()=>{if(e){H(!0);try{const V=await fW(e.uid);R(V),k(!0)}catch(V){console.error("[AIGenerator] Erreur historique:",V)}finally{H(!1)}}},$=async V=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await mW(V),R(ye=>ye.filter(qe=>qe.id!==V))}catch(ye){console.error("[AIGenerator] Erreur suppression:",ye)}},se=b.useCallback(V=>{if(!V)return"";let ye=V.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return ye=ye.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,qe=>"<ul>"+qe.replace(/<br \/>/g,"")+"</ul>"),`<p>${ye}</p>`},[]);return e?e.isPremium?n.jsxs("div",{className:"ai-generator",children:[n.jsxs("div",{className:"ai-generator__header",children:[n.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),n.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),n.jsxs("div",{className:"ai-generator__header-actions",children:[n.jsx("button",{className:"btn btn--outline btn--sm",onClick:K,disabled:J,children:J?" Chargement...":" Historique"}),t>1&&n.jsx("button",{className:"btn btn--outline btn--sm",onClick:de,children:" Recommencer"})]})]}),n.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(V=>n.jsxs("div",{className:`ai-generator__step-indicator ${V===t?"ai-generator__step-indicator--active":""} ${V<t?"ai-generator__step-indicator--done":""}`,children:[n.jsx("span",{className:"ai-generator__step-number",children:V<t?"":V}),n.jsxs("span",{className:"ai-generator__step-label",children:[V===1&&"Paramtres",V===2&&"Chapitre",V===3&&"Type",V===4&&"Options",V===5&&"Rsultat"]})]},V))}),O&&n.jsxs("div",{className:"ai-generator__error",children:[n.jsx("span",{className:"ai-generator__error-icon",children:""}),O,n.jsx("button",{className:"ai-generator__error-close",onClick:()=>M(null),children:""})]}),n.jsxs("div",{className:"ai-generator__content",children:[t===1&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsxs("label",{className:"ai-generator__label",children:["Discipline ",n.jsx("span",{className:"ai-generator__required",children:"*"})]}),ve?n.jsxs("div",{className:"ai-generator__loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des disciplines..."})]}):ge.length===0?n.jsx("div",{className:"ai-generator__empty",children:n.jsx("p",{children:"Aucune discipline disponible."})}):n.jsx("div",{className:"ai-generator__discipline-grid",children:ge.map(V=>n.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===V.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>re(V),children:n.jsx("span",{className:"ai-generator__discipline-name",children:V.nom})},V.id))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsxs("label",{className:"ai-generator__label",children:["Classe ",n.jsx("span",{className:"ai-generator__required",children:"*"})]}),n.jsx("div",{className:"ai-generator__classe-grid",children:pW.map(V=>n.jsx("button",{className:`ai-generator__classe-btn ${d===V?"ai-generator__classe-btn--selected":""}`,onClick:()=>{m(V),M(null)},children:V},V))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",n.jsx("span",{className:"ai-generator__required",children:"*"})]}),n.jsxs("div",{className:"ai-generator__duree-group",children:[n.jsx("div",{className:"ai-generator__duree-presets",children:hW.map(V=>n.jsxs("button",{className:`ai-generator__duree-btn ${p===V?"ai-generator__duree-btn--selected":""}`,onClick:()=>{h(V),M(null)},children:[V," min"]},V))}),n.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:p,onChange:V=>{const ye=parseInt(V.target.value);h(isNaN(ye)?"":ye),M(null)},placeholder:"Autre dure..."})]})]}),n.jsxs("div",{className:"ai-generator__nav",children:[n.jsx("div",{})," ",n.jsx("button",{className:"btn btn--primary",onClick:me,disabled:!o||!d||!p,children:"Continuer "})]})]}),t===2&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),n.jsxs("div",{className:"ai-generator__recap",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),n.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:v,onChange:V=>y(V.target.value),onKeyDown:V=>V.key==="Enter"&&xe(),autoFocus:!0})]}),n.jsxs("div",{className:"ai-generator__nav",children:[n.jsx("button",{className:"btn btn--outline",onClick:F,children:" Retour"}),n.jsx("button",{className:"btn btn--primary",onClick:xe,disabled:!v.trim(),children:"Continuer "})]})]}),t===3&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),n.jsxs("div",{className:"ai-generator__recap",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),n.jsx("span",{className:"ai-generator__recap-value",children:v})]}),n.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(Dl).map(V=>n.jsxs("button",{className:"ai-generator__type-card",onClick:()=>he(V),children:[n.jsx("span",{className:"ai-generator__type-icon",children:$d[V]}),n.jsx("span",{className:"ai-generator__type-name",children:Dl[V]}),n.jsx("span",{className:"ai-generator__type-desc",children:oW[V]})]},V))}),n.jsx("div",{className:"ai-generator__nav",children:n.jsx("button",{className:"btn btn--outline",onClick:F,children:" Retour"})})]}),t===4&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),n.jsxs("div",{className:"ai-generator__recap",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),n.jsx("span",{className:"ai-generator__recap-value",children:v}),n.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[x&&$d[x]," ",x&&Dl[x]]})]}),n.jsxs("div",{className:"ai-generator__options",children:[n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),n.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(V=>n.jsxs("label",{className:"ai-generator__radio",children:[n.jsx("input",{type:"radio",name:"difficulte",value:V,checked:N.difficulte===V,onChange:()=>S(ye=>({...ye,difficulte:V}))}),n.jsxs("span",{className:"ai-generator__radio-label",children:[V==="facile"&&" Facile",V==="moyen"&&" Moyen",V==="difficile"&&" Difficile"]})]},V))})]}),x==="sujet_examen"&&n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),n.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(V=>n.jsxs("label",{className:"ai-generator__radio",children:[n.jsx("input",{type:"radio",name:"typeExamen",value:V,checked:N.typeExamen===V,onChange:()=>S(ye=>({...ye,typeExamen:V}))}),n.jsx("span",{className:"ai-generator__radio-label",children:V})]},V))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),n.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:N.objectifs||"",onChange:V=>S(ye=>({...ye,objectifs:V.target.value||void 0}))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),n.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:N.consignesSpeciales||"",onChange:V=>S(ye=>({...ye,consignesSpeciales:V.target.value||void 0}))})]})]}),n.jsxs("div",{className:"ai-generator__nav",children:[n.jsx("button",{className:"btn btn--outline",onClick:F,children:" Retour"}),n.jsx("button",{className:"btn btn--primary btn--lg",onClick:Ee,disabled:C,children:C?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),C&&n.jsxs("div",{className:"ai-generator__generating",children:[n.jsxs("div",{className:"ai-generator__generating-animation",children:[n.jsx("span",{children:""}),n.jsx("span",{children:""}),n.jsx("span",{children:""})]}),n.jsxs("p",{children:["L'IA rdige votre"," ",x&&Dl[x].toLowerCase(),"..."]}),n.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),t===5&&w&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),n.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[x&&$d[x]," ",x&&Dl[x]]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),n.jsx("span",{className:"ai-generator__recap-value",children:v})]}),n.jsxs("div",{className:"ai-generator__preview",children:[n.jsxs("div",{className:"ai-generator__preview-header",children:[n.jsx("h3",{children:"Prvisualisation"}),n.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const V=w.type==="quiz"?JSON.stringify(w.data.questions,null,2):w.data.content||"";navigator.clipboard.writeText(V),alert("Contenu copi dans le presse-papier !")},children:" Copier"})]}),n.jsx("div",{className:"ai-generator__preview-body",children:w.type==="quiz"&&w.data.questions?n.jsxs("div",{className:"ai-generator__quiz-preview",children:[n.jsxs("p",{className:"ai-generator__quiz-count",children:[w.data.questions.length," questions gnres"]}),w.data.questions.map((V,ye)=>n.jsxs("div",{className:"ai-generator__quiz-item",children:[n.jsxs("div",{className:"ai-generator__quiz-question",children:[n.jsxs("strong",{children:["Q",ye+1,"."]})," ",V.question,n.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${V.difficulte}`,children:V.difficulte})]}),n.jsx("div",{className:"ai-generator__quiz-options",children:V.options.map((qe,Ie)=>n.jsxs("div",{className:`ai-generator__quiz-option ${Ie===V.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[n.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+Ie)}),qe,Ie===V.reponseCorrecte&&" "]},Ie))}),V.explication&&n.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",V.explication]})]},ye))]}):n.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:se(w.data.content||"")}})})]}),n.jsxs("div",{className:"ai-generator__actions",children:[L?n.jsxs("div",{className:"ai-generator__save-success",children:[n.jsx("span",{children:" Sauvegard avec succs !"}),w.type==="quiz"&&W&&n.jsx(Re,{to:`/quiz/${W}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):n.jsx("button",{className:"btn btn--primary btn--lg",onClick:ie,disabled:P,children:P?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):n.jsx(n.Fragment,{children:" Sauvegarder dans PedaClic"})}),n.jsx("button",{className:"btn btn--outline",onClick:de,children:" Nouvelle gnration"})]})]})]}),Q&&n.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>k(!1),children:n.jsxs("div",{className:"ai-generator__modal",onClick:V=>V.stopPropagation(),children:[n.jsxs("div",{className:"ai-generator__modal-header",children:[n.jsx("h2",{children:" Historique des gnrations"}),n.jsx("button",{className:"ai-generator__modal-close",onClick:()=>k(!1),children:""})]}),n.jsx("div",{className:"ai-generator__modal-body",children:T.length===0?n.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):n.jsx("div",{className:"ai-generator__history-list",children:T.map(V=>n.jsxs("div",{className:"ai-generator__history-item",children:[n.jsxs("div",{className:"ai-generator__history-info",children:[n.jsxs("span",{className:"ai-generator__history-type",children:[$d[V.type]," ",Dl[V.type]]}),n.jsxs("span",{className:"ai-generator__history-details",children:[V.discipline," (",V.classe,")  ",V.chapitre]}),n.jsx("span",{className:"ai-generator__history-date",children:V.createdAt?.toDate?V.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),n.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>V.id&&$(V.id),title:"Supprimer",children:""})]},V.id))})})]})})]}):n.jsx("div",{className:"ai-generator",children:n.jsxs("div",{className:"ai-generator__gate",children:[n.jsx("div",{className:"ai-generator__gate-icon",children:""}),n.jsx("h2",{children:"Fonctionnalit Premium"}),n.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),n.jsxs("div",{className:"ai-generator__gate-price",children:[n.jsx("span",{className:"price",children:"2 000 FCFA"}),n.jsx("span",{className:"period",children:"/mois"})]}),n.jsx(Re,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):n.jsx("div",{className:"ai-generator",children:n.jsxs("div",{className:"ai-generator__gate",children:[n.jsx("div",{className:"ai-generator__gate-icon",children:""}),n.jsx("h2",{children:"Connexion requise"}),n.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),n.jsx(Re,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},Pi={manuel:"Manuels scolaires",annale:"Annales corriges",guide:"Guides de rvision",litterature:"Culture gnrale & Littrature",fiche:"Fiches de lectures"},Ti={manuel:"",annale:"",guide:"",litterature:"",fiche:""},Za="ebooks";async function gW(){try{const e=Le(_e(oe,Za),Ae("isActive","==",!0),nt("ordre","asc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks:",e),e}}async function xW(){try{const e=Le(_e(oe,Za),nt("ordre","asc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks admin:",e),e}}async function yW(e){try{const t=await Gt(be(oe,Za,e));return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||null}:null}catch(t){throw console.error(" Erreur rcupration ebook:",t),t}}function bW(e,t){let r=[...e];if(t.categorie&&t.categorie!=="all"&&(r=r.filter(a=>a.categorie===t.categorie)),t.niveau&&t.niveau!=="all"&&(r=r.filter(a=>a.niveau===t.niveau)),t.classe&&t.classe!=="all"&&(r=r.filter(a=>a.classe===t.classe||a.classe==="all")),t.matiere&&(r=r.filter(a=>a.matiere?.toLowerCase().includes(t.matiere.toLowerCase()))),t.recherche){const a=t.recherche.toLowerCase();r=r.filter(l=>l.titre.toLowerCase().includes(a)||l.auteur.toLowerCase().includes(a)||l.description.toLowerCase().includes(a)||l.tags?.some(o=>o.toLowerCase().includes(a)))}return r}async function jW(e,t,r,a,l){try{const o=Br(Ur,`ebooks/pdf/${Date.now()}_${t.name}`);await gs(o,t);const u=await Ma(o);let d="";if(r){const v=Br(Ur,`ebooks/covers/${Date.now()}_${r.name}`);await gs(v,r),d=await Ma(v)}let m="";if(a){const v=Br(Ur,`ebooks/previews/${Date.now()}_${a.name}`);await gs(v,a),m=await Ma(v)}const p={...e,fichierURL:u,couvertureURL:d,aperuURL:m,tailleFichier:t.size,nombreTelechargements:0,nombreVues:0,uploadedBy:l||"admin",createdAt:ft(),updatedAt:ft()},h=await nr(_e(oe,Za),p);return console.log(` Ebook ajout : ${e.titre} (ID: ${h.id})`),h.id}catch(o){throw console.error(" Erreur ajout ebook:",o),o}}async function NW(e,t,r,a,l){try{const o={...t,updatedAt:ft()};if(r){const u=Br(Ur,`ebooks/pdf/${Date.now()}_${r.name}`);await gs(u,r),o.fichierURL=await Ma(u),o.tailleFichier=r.size}if(a){const u=Br(Ur,`ebooks/covers/${Date.now()}_${a.name}`);await gs(u,a),o.couvertureURL=await Ma(u)}if(l){const u=Br(Ur,`ebooks/previews/${Date.now()}_${l.name}`);await gs(u,l),o.aperuURL=await Ma(u)}await et(be(oe,Za,e),o),console.log(` Ebook mis  jour : ${e}`)}catch(o){throw console.error(" Erreur mise  jour ebook:",o),o}}async function _W(e){try{const t=await yW(e);if(!t)throw new Error("Ebook introuvable");try{if(t.fichierURL){const r=Br(Ur,t.fichierURL);await vc(r)}if(t.couvertureURL){const r=Br(Ur,t.couvertureURL);await vc(r)}if(t.aperuURL){const r=Br(Ur,t.aperuURL);await vc(r)}}catch{console.warn(" Fichiers Storage non supprims (peut-tre dj supprims)")}await Ln(be(oe,Za,e)),console.log(` Ebook supprim : ${e}`)}catch(t){throw console.error(" Erreur suppression ebook:",t),t}}async function SW(e,t){try{await et(be(oe,Za,e),{isActive:t,updatedAt:ft()})}catch(r){throw console.error(" Erreur toggle ebook:",r),r}}async function wW(e){try{await et(be(oe,Za,e),{nombreVues:Jf(1)})}catch(t){console.error(" Erreur incrment vues:",t)}}async function CW(e){try{await et(be(oe,Za,e),{nombreTelechargements:Jf(1)})}catch(t){console.error(" Erreur incrment tlchargements:",t)}}function AW(e){const t={totalEbooks:e.length,totalTelechargements:0,totalVues:0,parCategorie:{manuel:0,annale:0,guide:0,litterature:0,fiche:0},ebooksActifs:0};return e.forEach(r=>{t.totalTelechargements+=r.nombreTelechargements||0,t.totalVues+=r.nombreVues||0,t.parCategorie[r.categorie]=(t.parCategorie[r.categorie]||0)+1,r.isActive&&t.ebooksActifs++}),t}function jc(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/(1024*1024)).toFixed(1)} Mo`}const lk=["Mathmatiques","Physique-Chimie","SVT","Franais","Anglais","Histoire-Gographie","Philosophie","conomie","Comptabilit","ducation civique","Arabe","Espagnol","Informatique"],EW=({isPremium:e,onReadEbook:t})=>{const[r,a]=b.useState([]),[l,o]=b.useState(!0),[u,d]=b.useState(null),[m,p]=b.useState({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""}),[h,v]=b.useState("grid");b.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0),d(null);const C=await gW();a(C)}catch(C){d("Erreur lors du chargement de la bibliothque"),console.error(C)}finally{o(!1)}},x=b.useMemo(()=>bW(r,m),[r,m]),_=b.useMemo(()=>{const C={all:r.length};return r.forEach(z=>{C[z.categorie]=(C[z.categorie]||0)+1}),C},[r]),N=(C,z)=>{p(w=>({...w,[C]:z}))},S=()=>{p({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""})};return l?n.jsx("div",{className:"ebook-library",children:n.jsxs("div",{className:"ebook-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement de la bibliothque..."})]})}):u?n.jsx("div",{className:"ebook-library",children:n.jsxs("div",{className:"ebook-error",children:[n.jsxs("p",{children:[" ",u]}),n.jsx("button",{onClick:y,className:"btn-retry",children:"Ressayer"})]})}):n.jsxs("div",{className:"ebook-library",children:[n.jsxs("div",{className:"ebook-library-header",children:[n.jsxs("div",{className:"ebook-header-content",children:[n.jsx("h1",{children:" Bibliothque PedaClic"}),n.jsxs("p",{className:"ebook-subtitle",children:["Manuels, annales, fiches de rvision et bien plus encore",!e&&n.jsx("span",{className:"preview-badge",children:"Aperu gratuit disponible"})]})]}),n.jsxs("div",{className:"ebook-search-bar",children:[n.jsx("input",{type:"text",placeholder:"Rechercher un ebook (titre, auteur, mot-cl)...",value:m.recherche||"",onChange:C=>N("recherche",C.target.value),className:"search-input"}),n.jsx("span",{className:"search-icon",children:""})]})]}),n.jsxs("div",{className:"ebook-categories",children:[n.jsxs("button",{className:`category-tab ${m.categorie==="all"?"active":""}`,onClick:()=>N("categorie","all"),children:[" Tous",n.jsx("span",{className:"category-count",children:_.all||0})]}),Object.keys(Pi).map(C=>n.jsxs("button",{className:`category-tab ${m.categorie===C?"active":""}`,onClick:()=>N("categorie",C),children:[Ti[C]," ",Pi[C],n.jsx("span",{className:"category-count",children:_[C]||0})]},C))]}),n.jsxs("div",{className:"ebook-filters",children:[n.jsxs("select",{value:m.niveau||"all",onChange:C=>N("niveau",C.target.value),className:"filter-select",children:[n.jsx("option",{value:"all",children:"Tous les niveaux"}),n.jsx("option",{value:"college",children:"Collge"}),n.jsx("option",{value:"lycee",children:"Lyce"})]}),n.jsxs("select",{value:m.classe||"all",onChange:C=>N("classe",C.target.value),className:"filter-select",children:[n.jsx("option",{value:"all",children:"Toutes les classes"}),n.jsx("option",{value:"6eme",children:"6me"}),n.jsx("option",{value:"5eme",children:"5me"}),n.jsx("option",{value:"4eme",children:"4me"}),n.jsx("option",{value:"3eme",children:"3me"}),n.jsx("option",{value:"2nde",children:"2nde"}),n.jsx("option",{value:"1ere",children:"1re"}),n.jsx("option",{value:"Terminale",children:"Terminale"})]}),n.jsxs("select",{value:m.matiere||"",onChange:C=>N("matiere",C.target.value),className:"filter-select",children:[n.jsx("option",{value:"",children:"Toutes les matires"}),lk.map(C=>n.jsx("option",{value:C,children:C},C))]}),n.jsxs("div",{className:"view-toggle",children:[n.jsx("button",{className:h==="grid"?"active":"",onClick:()=>v("grid"),title:"Vue grille",children:""}),n.jsx("button",{className:h==="list"?"active":"",onClick:()=>v("list"),title:"Vue liste",children:""})]}),(m.categorie!=="all"||m.niveau!=="all"||m.classe!=="all"||m.matiere||m.recherche)&&n.jsx("button",{onClick:S,className:"btn-reset-filters",children:" Rinitialiser"})]}),n.jsx("div",{className:"ebook-results-info",children:n.jsxs("span",{children:[x.length," ebook",x.length>1?"s":""," trouv",x.length>1?"s":""]})}),x.length===0?n.jsxs("div",{className:"ebook-empty",children:[n.jsx("p",{children:" Aucun ebook trouv avec ces filtres."}),n.jsx("button",{onClick:S,className:"btn-reset-filters",children:"Voir tous les ebooks"})]}):n.jsx("div",{className:`ebook-grid ${h==="list"?"list-view":""}`,children:x.map(C=>n.jsx(zW,{ebook:C,isPremium:e,onRead:()=>t(C),viewMode:h},C.id))}),!e&&x.length>0&&n.jsx("div",{className:"ebook-premium-banner",children:n.jsxs("div",{className:"premium-banner-content",children:[n.jsx("h3",{children:" Accdez  tous les ebooks en illimit"}),n.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour lire et tlcharger tous les manuels, annales et fiches de rvision sans limite."}),n.jsx("a",{href:"/premium",className:"btn-premium",children:"S'abonner  2 000 FCFA/mois"})]})})]})},zW=({ebook:e,isPremium:t,onRead:r,viewMode:a})=>n.jsxs("div",{className:`ebook-card ${a==="list"?"ebook-card-list":""}`,children:[n.jsxs("div",{className:"ebook-cover",onClick:r,children:[e.couvertureURL?n.jsx("img",{src:e.couvertureURL,alt:e.titre,loading:"lazy"}):n.jsxs("div",{className:"ebook-cover-placeholder",children:[n.jsx("span",{className:"cover-icon",children:Ti[e.categorie]}),n.jsx("span",{className:"cover-title",children:e.titre})]}),!t&&n.jsx("div",{className:"ebook-badge-premium",children:n.jsx("span",{children:" Premium"})}),n.jsx("div",{className:"ebook-badge-category",children:Pi[e.categorie]})]}),n.jsxs("div",{className:"ebook-info",children:[n.jsx("h3",{className:"ebook-title",onClick:r,children:e.titre}),n.jsx("p",{className:"ebook-author",children:e.auteur}),n.jsx("p",{className:"ebook-description",children:e.description}),n.jsxs("div",{className:"ebook-meta",children:[e.classe!=="all"&&n.jsx("span",{className:"meta-tag",children:e.classe}),e.matiere&&n.jsx("span",{className:"meta-tag",children:e.matiere}),n.jsxs("span",{className:"meta-pages",children:[e.nombrePages," pages"]}),n.jsx("span",{className:"meta-size",children:jc(e.tailleFichier)})]}),n.jsxs("div",{className:"ebook-actions",children:[n.jsx("button",{className:"btn-read",onClick:r,children:t?" Lire":` Aperu (${e.pagesApercu} pages)`}),t&&n.jsx("a",{href:e.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn-download",download:!0,children:" Tlcharger"})]})]})]}),OW=({ebook:e,isPremium:t,onBack:r,onGoPremium:a})=>{const[l,o]=b.useState(!0),[u,d]=b.useState("info");b.useEffect(()=>{wW(e.id)},[e.id]);const m=()=>t?e.fichierURL:e.aperuURL?e.aperuURL:null,p=async()=>{if(!t){a();return}await CW(e.id),window.open(e.fichierURL,"_blank")},h=()=>{o(!1)};return n.jsxs("div",{className:"ebook-viewer",children:[n.jsxs("div",{className:"viewer-navbar",children:[n.jsx("button",{onClick:r,className:"btn-back",children:" Retour  la bibliothque"}),n.jsxs("div",{className:"viewer-title-bar",children:[n.jsxs("span",{className:"viewer-category",children:[Ti[e.categorie]," ",Pi[e.categorie]]}),n.jsx("h2",{className:"viewer-title",children:e.titre})]}),n.jsxs("div",{className:"viewer-actions-bar",children:[n.jsx("button",{className:`btn-tab ${u==="info"?"active":""}`,onClick:()=>d("info"),children:" Dtails"}),n.jsxs("button",{className:`btn-tab ${u==="read"?"active":""}`,onClick:()=>d("read"),children:[" ",t?"Lire":"Aperu"]})]})]}),u==="info"&&n.jsx("div",{className:"viewer-info-panel",children:n.jsxs("div",{className:"info-layout",children:[n.jsxs("div",{className:"info-cover-column",children:[e.couvertureURL?n.jsx("img",{src:e.couvertureURL,alt:e.titre,className:"info-cover-image"}):n.jsxs("div",{className:"info-cover-placeholder",children:[n.jsx("span",{children:Ti[e.categorie]}),n.jsx("span",{children:e.titre})]}),n.jsxs("div",{className:"info-actions",children:[n.jsxs("button",{className:"btn-action-read",onClick:()=>d("read"),children:[" ",t?"Lire le document":`Aperu (${e.pagesApercu} pages)`]}),t?n.jsx("button",{className:"btn-action-download",onClick:p,children:" Tlcharger le PDF"}):n.jsx("button",{className:"btn-action-premium",onClick:a,children:" Accs complet  Passer Premium"})]})]}),n.jsxs("div",{className:"info-details-column",children:[n.jsx("h1",{className:"info-title",children:e.titre}),n.jsxs("p",{className:"info-author",children:["par ",e.auteur]}),n.jsxs("div",{className:"info-description",children:[n.jsx("h3",{children:"Description"}),n.jsx("p",{children:e.description})]}),n.jsxs("div",{className:"info-metadata",children:[n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Catgorie"}),n.jsxs("span",{className:"metadata-value",children:[Ti[e.categorie]," ",Pi[e.categorie]]})]}),n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Niveau"}),n.jsx("span",{className:"metadata-value",children:e.niveau==="college"?"Collge":"Lyce"})]}),e.classe!=="all"&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Classe"}),n.jsx("span",{className:"metadata-value",children:e.classe})]}),e.matiere&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Matire"}),n.jsx("span",{className:"metadata-value",children:e.matiere})]}),n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Pages"}),n.jsx("span",{className:"metadata-value",children:e.nombrePages})]}),n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Taille"}),n.jsx("span",{className:"metadata-value",children:jc(e.tailleFichier)})]}),e.annee&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Anne"}),n.jsx("span",{className:"metadata-value",children:e.annee})]}),e.editeur&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"diteur"}),n.jsx("span",{className:"metadata-value",children:e.editeur})]})]}),n.jsxs("div",{className:"info-stats",children:[n.jsxs("span",{children:[" ",e.nombreVues," vue",e.nombreVues>1?"s":""]}),n.jsxs("span",{children:[" ",e.nombreTelechargements," tlchargement",e.nombreTelechargements>1?"s":""]})]}),e.tags&&e.tags.length>0&&n.jsx("div",{className:"info-tags",children:e.tags.map((v,y)=>n.jsx("span",{className:"info-tag",children:v},y))})]})]})}),u==="read"&&n.jsx("div",{className:"viewer-read-panel",children:m()?n.jsxs(n.Fragment,{children:[l&&n.jsxs("div",{className:"viewer-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement du document..."})]}),n.jsx("iframe",{src:`${m()}#toolbar=1&navpanes=0`,className:"pdf-iframe",title:e.titre,onLoad:h,style:{display:l?"none":"block"}}),!t&&n.jsx("div",{className:"viewer-premium-overlay",children:n.jsxs("div",{className:"overlay-content",children:[n.jsx("div",{className:"overlay-lock",children:""}),n.jsxs("h3",{children:["Aperu limit  ",e.pagesApercu," pages"]}),n.jsxs("p",{children:["Pour lire l'intgralit de ce document (",e.nombrePages," pages) et le tlcharger, passez  PedaClic Premium."]}),n.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),n.jsx("button",{onClick:r,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})]}):n.jsx("div",{className:"viewer-no-preview",children:n.jsxs("div",{className:"no-preview-content",children:[n.jsx("div",{className:"overlay-lock",children:""}),n.jsx("h3",{children:"Document rserv aux abonns Premium"}),n.jsxs("p",{children:["Ce document de ",e.nombrePages," pages est accessible uniquement avec un abonnement PedaClic Premium."]}),n.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),n.jsx("button",{onClick:r,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})})]})},DW=()=>{const{currentUser:e}=Ct(),t=Ht(),[r,a]=b.useState(null),l=d=>{a(d)},o=()=>{a(null)},u=()=>{t("/premium")};return r?n.jsx(OW,{ebook:r,isPremium:e?.isPremium||!1,onBack:o,onGoPremium:u}):n.jsx(EW,{isPremium:e?.isPremium||!1,onReadEbook:l})},MW=()=>{const[e,t]=b.useState([]),[r,a]=b.useState(!0),[l,o]=b.useState(null),[u,d]=b.useState(null),[m,p]=b.useState(!1),[h,v]=b.useState(null),[y,x]=b.useState(Q()),[_,N]=b.useState(!1),[S,C]=b.useState(null),[z,w]=b.useState(null),[E,O]=b.useState(null),[M,P]=b.useState(null),q=b.useRef(null),L=b.useRef(null),Y=b.useRef(null),[W,B]=b.useState(null);function Q(){return{titre:"",auteur:"",description:"",categorie:"manuel",niveau:"college",classe:"all",matiere:"",nombrePages:0,pagesApercu:5,annee:"",editeur:"",isbn:"",tags:[],ordre:0,isActive:!0}}b.useEffect(()=>{k()},[]);const k=async()=>{try{a(!0),o(null);const re=await xW();t(re),d(AW(re))}catch(re){o("Erreur lors du chargement des ebooks"),console.error(re)}finally{a(!1)}},T=re=>{const{name:me,value:xe,type:he}=re.target;x(he==="number"?F=>({...F,[me]:parseInt(xe)||0}):he==="checkbox"?F=>({...F,[me]:re.target.checked}):F=>({...F,[me]:xe}))},R=re=>{const me=re.target.value.split(",").map(xe=>xe.trim()).filter(Boolean);x(xe=>({...xe,tags:me}))},J=async re=>{if(re.preventDefault(),!y.titre.trim()){o("Le titre est obligatoire");return}if(!h&&!z){o("Le fichier PDF est obligatoire");return}try{N(!0),o(null),h?(await NW(h.id,y,z,E,M),C(` Ebook "${y.titre}" modifi avec succs`)):(await jW(y,z,E,M),C(` Ebook "${y.titre}" ajout avec succs`)),ge(),await k(),setTimeout(()=>C(null),4e3)}catch(me){o(me.message||"Erreur lors de la sauvegarde")}finally{N(!1)}},H=re=>{v(re),x({titre:re.titre,auteur:re.auteur,description:re.description,categorie:re.categorie,niveau:re.niveau,classe:re.classe,matiere:re.matiere||"",nombrePages:re.nombrePages,pagesApercu:re.pagesApercu,annee:re.annee||"",editeur:re.editeur||"",isbn:re.isbn||"",tags:re.tags||[],ordre:re.ordre,isActive:re.isActive}),p(!0),window.scrollTo({top:0,behavior:"smooth"})},ve=async re=>{try{await _W(re),B(null),C(" Ebook supprim avec succs"),await k(),setTimeout(()=>C(null),4e3)}catch(me){o(me.message||"Erreur lors de la suppression")}},U=async(re,me)=>{try{await SW(re,!me),await k()}catch(xe){o(xe.message)}},ge=()=>{x(Q()),v(null),w(null),O(null),P(null),p(!1),q.current&&(q.current.value=""),L.current&&(L.current.value=""),Y.current&&(Y.current.value="")};return r?n.jsx("div",{className:"admin-ebooks",children:n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement des ebooks..."})]})}):n.jsxs("div",{className:"admin-ebooks",children:[n.jsxs("div",{className:"admin-ebooks-header",children:[n.jsx("h1",{children:" Gestion de la Bibliothque"}),n.jsx("button",{className:"btn-add-ebook",onClick:()=>{ge(),p(!m)},children:m?" Fermer":"+ Ajouter un ebook"})]}),l&&n.jsxs("div",{className:"admin-alert error",children:[" ",l]}),S&&n.jsx("div",{className:"admin-alert success",children:S}),u&&n.jsxs("div",{className:"admin-stats-grid",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.totalEbooks}),n.jsx("span",{className:"stat-label",children:"Total ebooks"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.ebooksActifs}),n.jsx("span",{className:"stat-label",children:"Actifs"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.totalVues}),n.jsx("span",{className:"stat-label",children:"Vues totales"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.totalTelechargements}),n.jsx("span",{className:"stat-label",children:"Tlchargements"})]})]}),m&&n.jsxs("div",{className:"admin-ebook-form-container",children:[n.jsx("h2",{children:h?" Modifier l'ebook":" Ajouter un ebook"}),n.jsxs("form",{onSubmit:J,className:"admin-ebook-form",children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"titre",children:"Titre *"}),n.jsx("input",{id:"titre",name:"titre",type:"text",value:y.titre,onChange:T,placeholder:"Ex: Mathmatiques 3me - Programme complet",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"auteur",children:"Auteur(s) *"}),n.jsx("input",{id:"auteur",name:"auteur",type:"text",value:y.auteur,onChange:T,placeholder:"Ex: Pr. Diallo Moussa",required:!0})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"description",children:"Description *"}),n.jsx("textarea",{id:"description",name:"description",value:y.description,onChange:T,placeholder:"Dcrivez le contenu de cet ebook...",rows:3,required:!0})]}),n.jsxs("div",{className:"form-row form-row-3",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"categorie",children:"Catgorie *"}),n.jsx("select",{id:"categorie",name:"categorie",value:y.categorie,onChange:T,children:Object.keys(Pi).map(re=>n.jsxs("option",{value:re,children:[Ti[re]," ",Pi[re]]},re))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),n.jsxs("select",{id:"niveau",name:"niveau",value:y.niveau,onChange:T,children:[n.jsx("option",{value:"college",children:"Collge"}),n.jsx("option",{value:"lycee",children:"Lyce"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"classe",children:"Classe"}),n.jsxs("select",{id:"classe",name:"classe",value:y.classe,onChange:T,children:[n.jsx("option",{value:"all",children:"Toutes les classes"}),n.jsx("option",{value:"6eme",children:"6me"}),n.jsx("option",{value:"5eme",children:"5me"}),n.jsx("option",{value:"4eme",children:"4me"}),n.jsx("option",{value:"3eme",children:"3me"}),n.jsx("option",{value:"2nde",children:"2nde"}),n.jsx("option",{value:"1ere",children:"1re"}),n.jsx("option",{value:"Terminale",children:"Terminale"})]})]})]}),n.jsxs("div",{className:"form-row form-row-3",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"matiere",children:"Matire"}),n.jsxs("select",{id:"matiere",name:"matiere",value:y.matiere,onChange:T,children:[n.jsx("option",{value:"",children:"-- Slectionner --"}),lk.map(re=>n.jsx("option",{value:re,children:re},re))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"annee",children:"Anne"}),n.jsx("input",{id:"annee",name:"annee",type:"text",value:y.annee,onChange:T,placeholder:"Ex: 2024-2025"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editeur",children:"diteur"}),n.jsx("input",{id:"editeur",name:"editeur",type:"text",value:y.editeur,onChange:T,placeholder:"Ex: INEADE"})]})]}),n.jsxs("div",{className:"form-row form-row-3",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"nombrePages",children:"Nombre de pages *"}),n.jsx("input",{id:"nombrePages",name:"nombrePages",type:"number",value:y.nombrePages,onChange:T,min:"1",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"pagesApercu",children:"Pages en aperu gratuit"}),n.jsx("input",{id:"pagesApercu",name:"pagesApercu",type:"number",value:y.pagesApercu,onChange:T,min:"1",max:"20"}),n.jsx("small",{children:"Nombre de pages visibles sans Premium (1-20)"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"ordre",children:"Ordre d'affichage"}),n.jsx("input",{id:"ordre",name:"ordre",type:"number",value:y.ordre,onChange:T,min:"0"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"tags",children:"Tags (spars par des virgules)"}),n.jsx("input",{id:"tags",type:"text",value:y.tags?.join(", ")||"",onChange:R,placeholder:"Ex: BFEM, annales, mathmatiques, gomtrie"})]}),n.jsxs("div",{className:"form-files-section",children:[n.jsx("h3",{children:" Fichiers"}),n.jsxs("div",{className:"form-group file-group",children:[n.jsxs("label",{children:["Fichier PDF complet ",!h&&"*",h&&n.jsx("small",{children:"(laisser vide pour garder l'actuel)"})]}),n.jsx("input",{ref:q,type:"file",accept:".pdf",onChange:re=>w(re.target.files?.[0]||null),className:"file-input"}),z&&n.jsxs("span",{className:"file-info",children:[" ",z.name," (",jc(z.size),")"]})]}),n.jsxs("div",{className:"form-group file-group",children:[n.jsxs("label",{children:["Image de couverture",n.jsx("small",{children:"(JPG, PNG  recommand : 400560px)"})]}),n.jsx("input",{ref:L,type:"file",accept:"image/*",onChange:re=>O(re.target.files?.[0]||null),className:"file-input"}),E&&n.jsxs("span",{className:"file-info",children:[" ",E.name," (",jc(E.size),")"]})]}),n.jsxs("div",{className:"form-group file-group",children:[n.jsxs("label",{children:["PDF Aperu (premires pages uniquement)",n.jsx("small",{children:"(optionnel  sinon le PDF complet est affich aux non-Premium)"})]}),n.jsx("input",{ref:Y,type:"file",accept:".pdf",onChange:re=>P(re.target.files?.[0]||null),className:"file-input"}),M&&n.jsxs("span",{className:"file-info",children:[" ",M.name," (",jc(M.size),")"]})]})]}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:T}),"Ebook actif (visible dans la bibliothque)"]})}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",className:"btn-save",disabled:_,children:_?" Enregistrement...":h?" Modifier l'ebook":" Ajouter l'ebook"}),n.jsx("button",{type:"button",className:"btn-cancel",onClick:ge,children:"Annuler"})]})]})]}),n.jsxs("div",{className:"admin-ebooks-list",children:[n.jsxs("h2",{children:[" Liste des ebooks (",e.length,")"]}),e.length===0?n.jsxs("div",{className:"admin-empty",children:[n.jsx("p",{children:"Aucun ebook pour le moment."}),n.jsx("button",{className:"btn-add-ebook",onClick:()=>p(!0),children:"+ Ajouter le premier ebook"})]}):n.jsx("div",{className:"admin-ebooks-table-wrapper",children:n.jsxs("table",{className:"admin-ebooks-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Couverture"}),n.jsx("th",{children:"Titre / Auteur"}),n.jsx("th",{children:"Catgorie"}),n.jsx("th",{children:"Classe"}),n.jsx("th",{children:"Pages"}),n.jsx("th",{children:"Vues / DL"}),n.jsx("th",{children:"Statut"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(re=>n.jsxs("tr",{className:re.isActive?"":"row-inactive",children:[n.jsx("td",{className:"td-cover",children:re.couvertureURL?n.jsx("img",{src:re.couvertureURL,alt:"",className:"mini-cover"}):n.jsx("div",{className:"mini-cover-placeholder",children:Ti[re.categorie]})}),n.jsxs("td",{className:"td-title",children:[n.jsx("strong",{children:re.titre}),n.jsx("span",{className:"td-author",children:re.auteur})]}),n.jsx("td",{children:n.jsxs("span",{className:"badge-category",children:[Ti[re.categorie]," ",Pi[re.categorie]]})}),n.jsx("td",{children:re.classe==="all"?"Toutes":re.classe}),n.jsx("td",{children:re.nombrePages}),n.jsx("td",{children:n.jsxs("span",{className:"td-stats",children:[" ",re.nombreVues,n.jsx("br",{})," ",re.nombreTelechargements]})}),n.jsx("td",{children:n.jsx("button",{className:`btn-status ${re.isActive?"active":"inactive"}`,onClick:()=>U(re.id,re.isActive),title:re.isActive?"Dsactiver":"Activer",children:re.isActive?" Actif":" Inactif"})}),n.jsxs("td",{className:"td-actions",children:[n.jsx("button",{className:"btn-edit",onClick:()=>H(re),title:"Modifier",children:""}),W===re.id?n.jsxs("div",{className:"delete-confirm",children:[n.jsx("span",{children:"Supprimer ?"}),n.jsx("button",{className:"btn-confirm-yes",onClick:()=>ve(re.id),children:"Oui"}),n.jsx("button",{className:"btn-confirm-no",onClick:()=>B(null),children:"Non"})]}):n.jsx("button",{className:"btn-delete",onClick:()=>B(re.id),title:"Supprimer",children:""})]})]},re.id))})]})})]})]})},kW=()=>{const[e,t]=b.useState(null),[r,a]=b.useState(!1),[l,o]=b.useState(!1),[u,d]=b.useState(!1),m=()=>/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream,p=()=>window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0,h=b.useCallback(()=>{try{return parseInt(localStorage.getItem("pedaclic_visit_count")||"0",10)}catch{return 0}},[]),v=b.useCallback(()=>{try{const N=h()+1;localStorage.setItem("pedaclic_visit_count",N.toString())}catch{}},[h]),y=()=>{try{return localStorage.getItem("pedaclic_install_dismissed")==="true"}catch{return!1}};b.useEffect(()=>{if(p()||y())return;v();const N=C=>{C.preventDefault(),t(C),h()>=2&&a(!0)};window.addEventListener("beforeinstallprompt",N),m()&&h()>=2&&(o(!0),a(!0));const S=()=>{a(!1),t(null)};return window.addEventListener("appinstalled",S),()=>{window.removeEventListener("beforeinstallprompt",N),window.removeEventListener("appinstalled",S)}},[h,v]);const x=async()=>{if(e){d(!0);try{await e.prompt();const{outcome:N}=await e.userChoice;N==="accepted"&&a(!1)}catch(N){console.error("Erreur installation PWA:",N)}finally{d(!1),t(null)}}},_=()=>{a(!1);try{localStorage.setItem("pedaclic_install_dismissed","true")}catch{}};return r?n.jsx("div",{className:"install-prompt",children:n.jsxs("div",{className:"install-prompt__container",children:[n.jsxs("div",{className:"install-prompt__content",children:[n.jsx("div",{className:"install-prompt__icon",children:n.jsx(cq,{size:24})}),n.jsxs("div",{className:"install-prompt__text",children:[n.jsx("h3",{className:"install-prompt__title",children:"Installer PedaClic"}),n.jsx("p",{className:"install-prompt__description",children:l?"Accde  tes cours mme sans connexion !":"Installe l'app pour un accs rapide, mme hors-ligne !"})]})]}),n.jsxs("div",{className:"install-prompt__actions",children:[!l&&e&&n.jsx("button",{className:"install-prompt__btn install-prompt__btn--primary",onClick:x,disabled:u,children:u?"Installation...":"Installer"}),l&&n.jsx("div",{className:"install-prompt__ios",children:n.jsxs("p",{className:"install-prompt__ios-text",children:["Appuie sur ",n.jsx(uq,{size:16,className:"install-prompt__ios-icon"})," puis",n.jsxs("span",{className:"install-prompt__ios-highlight",children:[n.jsx(dc,{size:14})," Sur l'cran d'accueil"]})]})}),n.jsx("button",{className:"install-prompt__btn install-prompt__btn--close",onClick:_,"aria-label":"Fermer la bannire d'installation",children:n.jsx(Oi,{size:20})})]})]})}):null};function PW(){const[e,t]=b.useState(typeof navigator<"u"?navigator.onLine:!0);return b.useEffect(()=>{const r=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",a),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}},[]),e}const TW=()=>{const e=PW(),[t,r]=b.useState(!1),[a,l]=b.useState(!1);return b.useEffect(()=>{if(!e)l(!0),r(!1);else if(a){r(!0);const o=setTimeout(()=>{r(!1),l(!1)},3e3);return()=>clearTimeout(o)}},[e,a]),e&&!t?null:n.jsx("div",{className:`network-indicator ${e?"network-indicator--online":"network-indicator--offline"}`,children:n.jsx("div",{className:"network-indicator__content",children:e?n.jsxs(n.Fragment,{children:[n.jsx(dq,{size:14}),n.jsx("span",{children:"Connexion rtablie"})]}):n.jsxs(n.Fragment,{children:[n.jsx(fq,{size:14}),n.jsx("span",{children:"Pas de connexion  mode hors-ligne"})]})})})},qW=()=>n.jsxs(Nq,{children:[n.jsx(kW,{}),n.jsx(TW,{}),n.jsxs(NT,{children:[n.jsx(We,{path:"/",element:n.jsx(mr,{children:n.jsx(wq,{})})}),n.jsx(We,{path:"/disciplines",element:n.jsx(mr,{children:n.jsx(Eq,{})})}),n.jsx(We,{path:"/disciplines/:id",element:n.jsx(mr,{children:n.jsx(Dq,{})})}),n.jsx(We,{path:"/premium",element:n.jsx(mr,{children:n.jsx(Pq,{})})}),n.jsx(We,{path:"/connexion",element:n.jsx(Cq,{})}),n.jsx(We,{path:"/inscription",element:n.jsx(Aq,{})}),n.jsx(We,{path:"/admin",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(qq,{})})})}),n.jsx(We,{path:"/admin/disciplines",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(Rq,{})})})}),n.jsx(We,{path:"/admin/chapitres",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(Lq,{})})})}),n.jsx(We,{path:"/admin/ressources",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(Iq,{})})})}),n.jsx(We,{path:"/admin/quiz",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(Hq,{})})})}),n.jsx(We,{path:"/admin/quiz/nouveau",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(o_,{})})})}),n.jsx(We,{path:"/admin/quiz/modifier/:quizId",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(o_,{})})})}),n.jsx(We,{path:"/admin/quiz-avance",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(bR,{})})})}),n.jsx(We,{path:"/admin/utilisateurs",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(Jq,{})})})}),n.jsx(We,{path:"/admin/resultats",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(eR,{})})})}),n.jsx(We,{path:"/admin/settings",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(tR,{})})})}),n.jsx(We,{path:"/admin/ebooks",element:n.jsx(hn,{children:n.jsx(vn,{children:n.jsx(MW,{})})})}),n.jsx(We,{path:"/admin/premium",element:n.jsx(U1,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),n.jsx(We,{path:"/quiz/:quizId",element:n.jsx(mr,{children:n.jsx(BR,{})})}),n.jsx(We,{path:"/quiz-avance/:quizId",element:n.jsx(mr,{children:n.jsx(AR,{})})}),n.jsx(We,{path:"/eleve/dashboard",element:n.jsx(mr,{children:n.jsx(nX,{})})}),n.jsx(We,{path:"/eleve/suivi",element:n.jsx(mr,{children:n.jsx(aX,{})})}),n.jsx(We,{path:"/prof/dashboard",element:n.jsx(Zo,{children:n.jsx(mr,{children:n.jsx(oX,{})})})}),n.jsx(We,{path:"/prof/cahiers",element:n.jsx(Zo,{children:n.jsx(mr,{children:n.jsx(kX,{})})})}),n.jsx(We,{path:"/prof/cahiers/:cahierId",element:n.jsx(Zo,{children:n.jsx(mr,{children:n.jsx(GX,{})})})}),n.jsx(We,{path:"/prof/cahiers/:cahierId/nouvelle",element:n.jsx(Zo,{children:n.jsx(mr,{children:n.jsx(hA,{})})})}),n.jsx(We,{path:"/prof/cahiers/:cahierId/modifier/:entreeId",element:n.jsx(Zo,{children:n.jsx(mr,{children:n.jsx(hA,{})})})}),n.jsx(We,{path:"/eleve/cahiers/:cahierId",element:n.jsx(Wd,{allowedRoles:["eleve","admin"],children:n.jsx(mr,{children:n.jsx(iW,{})})})}),n.jsx(We,{path:"/parent/dashboard",element:n.jsx(Wd,{allowedRoles:["parent","admin"],children:n.jsx(mr,{children:n.jsx(sW,{})})})}),n.jsx(We,{path:"/generateur",element:n.jsx(mr,{children:n.jsx(vW,{})})}),n.jsx(We,{path:"/ebooks",element:n.jsx(mr,{children:n.jsx(DW,{})})}),n.jsx(We,{path:"*",element:n.jsx(U1,{to:"/",replace:!0})})]})]}),ok=document.getElementById("root");if(!ok)throw new Error("L'lment #root n'existe pas");const RW=bq.createRoot(ok);RW.render(n.jsx(_T.StrictMode,{children:n.jsx(ST,{children:n.jsx(qW,{})})}));
//# sourceMappingURL=index-Dr6m4Dsq.js.map
