import{a as cm,b as lq,g as Ka,r as g,u as ot,c as um,L as Be,d as Hn,e as HA,f as QA,R as oq,h as cq,i as Fe,N as c1,j as uq,B as dq}from"./vendor-react-BMsfgiGx.js";import{i as fq,g as mq,a as pq,p as hq,b as vq,c as gq,o as xq,d as Ne,u as He,s as xt,e as yq,f as bq,h as jq,j as Nq,k as Dt,l as dm,q as Te,m as Ke,n as _e,r as Cy,t as Dn,v as Pt,w as we,x as De,y as $a,z as Vr,A as Sc,B as Ss,C as Ra,D as cn,T as Me,E as $s,F as Ey,G as _q,H as VA}from"./vendor-firebase-E23-SjE9.js";import{H as xx,B as ln,G as ws,L as u1,S as Sq,C as Cs,a as xc,b as lf,U as wq,c as Cq,d as d1,X as qi,M as Eq,e as Wd,f as Aq,P as zq,g as Oq,h as Dq,F as Mq,i as Ay,j as Zd,k as Pq,l as kq,T as Tq,I as qq,m as Rq,Y as Iq,n as an,A as vs,o as Gl,p as Rt,Z as YA,q as KA,r as Xl,s as Ui,t as of,u as yc,v as XA,w as zy,x as yx,E as Vl,y as Lq,z as f1,D as $q,J as Bq,K as Uq,R as Fq,N as Gq,O as Hq,Q as bc,V as bx,W as wv,_ as Qq,$ as Vq,a0 as jx,a1 as Cv,a2 as Ev,a3 as Yq,a4 as Kq,a5 as Xq,a6 as Wq,a7 as Zq,a8 as Jq}from"./vendor-icons-FUmECsCv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var Av={exports:{}},ic={};var m1;function eR(){if(m1)return ic;m1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:u,ref:l!==void 0?l:null,props:o}}return ic.Fragment=t,ic.jsx=n,ic.jsxs=n,ic}var p1;function tR(){return p1||(p1=1,Av.exports=eR()),Av.exports}var r=tR(),zv={exports:{}},sc={},Ov={exports:{}},Dv={};var h1;function rR(){return h1||(h1=1,(function(e){function t(q,Z){var H=q.length;q.push(Z);e:for(;0<H;){var B=H-1>>>1,I=q[B];if(0<l(I,Z))q[B]=Z,q[H]=I,H=B;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var Z=q[0],H=q.pop();if(H!==Z){q[0]=H;e:for(var B=0,I=q.length,pe=I>>>1;B<pe;){var re=2*(B+1)-1,de=q[re],ge=re+1,ye=q[ge];if(0>l(de,H))ge<I&&0>l(ye,de)?(q[B]=ye,q[ge]=H,B=ge):(q[B]=de,q[re]=H,B=re);else if(ge<I&&0>l(ye,H))q[B]=ye,q[ge]=H,B=ge;else break e}}return Z}function l(q,Z){var H=q.sortIndex-Z.sortIndex;return H!==0?H:q.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],p=[],h=1,v=null,y=3,x=!1,_=!1,j=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function E(q){for(var Z=n(p);Z!==null;){if(Z.callback===null)a(p);else if(Z.startTime<=q)a(p),Z.sortIndex=Z.expirationTime,t(m,Z);else break;Z=n(p)}}function O(q){if(j=!1,E(q),!_)if(n(m)!==null)_=!0,D||(D=!0,$());else{var Z=n(p);Z!==null&&M(O,Z.startTime-q)}}var D=!1,T=-1,k=5,R=-1;function L(){return S?!0:!(e.unstable_now()-R<k)}function Q(){if(S=!1,D){var q=e.unstable_now();R=q;var Z=!0;try{e:{_=!1,j&&(j=!1,A(T),T=-1),x=!0;var H=y;try{t:{for(E(q),v=n(m);v!==null&&!(v.expirationTime>q&&L());){var B=v.callback;if(typeof B=="function"){v.callback=null,y=v.priorityLevel;var I=B(v.expirationTime<=q);if(q=e.unstable_now(),typeof I=="function"){v.callback=I,E(q),Z=!0;break t}v===n(m)&&a(m),E(q)}else a(m);v=n(m)}if(v!==null)Z=!0;else{var pe=n(p);pe!==null&&M(O,pe.startTime-q),Z=!1}}break e}finally{v=null,y=H,x=!1}Z=void 0}}finally{Z?$():D=!1}}}var $;if(typeof C=="function")$=function(){C(Q)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Y=F.port2;F.port1.onmessage=Q,$=function(){Y.postMessage(null)}}else $=function(){w(Q,0)};function M(q,Z){T=w(function(){q(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(q){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var H=y;y=Z;try{return q()}finally{y=H}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var H=y;y=q;try{return Z()}finally{y=H}},e.unstable_scheduleCallback=function(q,Z,H){var B=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?B+H:B):H=B,q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=H+I,q={id:h++,callback:Z,priorityLevel:q,startTime:H,expirationTime:I,sortIndex:-1},H>B?(q.sortIndex=H,t(p,q),n(m)===null&&q===n(p)&&(j?(A(T),T=-1):j=!0,M(O,H-B))):(q.sortIndex=I,t(m,q),_||x||(_=!0,D||(D=!0,$()))),q},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(q){var Z=y;return function(){var H=y;y=Z;try{return q.apply(this,arguments)}finally{y=H}}}})(Dv)),Dv}var v1;function nR(){return v1||(v1=1,Ov.exports=rR()),Ov.exports}var g1;function aR(){if(g1)return sc;g1=1;var e=nR(),t=cm(),n=lq();function a(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(a(188))}function p(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(a(188));return s!==i?null:i}for(var c=i,f=s;;){var b=c.return;if(b===null)break;var N=b.alternate;if(N===null){if(f=b.return,f!==null){c=f;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===c)return m(b),i;if(N===f)return m(b),s;N=N.sibling}throw Error(a(188))}if(c.return!==f.return)c=b,f=N;else{for(var z=!1,P=b.child;P;){if(P===c){z=!0,c=b,f=N;break}if(P===f){z=!0,f=b,c=N;break}P=P.sibling}if(!z){for(P=N.child;P;){if(P===c){z=!0,c=N,f=b;break}if(P===f){z=!0,f=N,c=b;break}P=P.sibling}if(!z)throw Error(a(189))}}if(c.alternate!==f)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?i:s}function h(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=h(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function $(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var F=Symbol.for("react.client.reference");function Y(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===F?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case D:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case C:return i.displayName||"Context";case A:return(i._context.displayName||"Context")+".Consumer";case E:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case T:return s=i.displayName||null,s!==null?s:Y(i.type)||"Memo";case k:s=i._payload,i=i._init;try{return Y(i(s))}catch{}}return null}var M=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},B=[],I=-1;function pe(i){return{current:i}}function re(i){0>I||(i.current=B[I],B[I]=null,I--)}function de(i,s){I++,B[I]=i.current,i.current=s}var ge=pe(null),ye=pe(null),V=pe(null),he=pe(null);function Pe(i,s){switch(de(V,s),de(ye,i),de(ge,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?M_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=M_(s),i=P_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(ge),de(ge,i)}function le(){re(ge),re(ye),re(V)}function W(i){i.memoizedState!==null&&de(he,i);var s=ge.current,c=P_(s,i.type);s!==c&&(de(ye,i),de(ge,c))}function G(i){ye.current===i&&(re(ge),re(ye)),he.current===i&&(re(he),tc._currentValue=H)}var ce,X;function je(i){if(ce===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ce=s&&s[1]||"",X=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+i+X}var Ue=!1;function Ge(i,s){if(!i||Ue)return"";Ue=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(ue){var se=ue}Reflect.construct(i,[],be)}else{try{be.call()}catch(ue){se=ue}i.call(be.prototype)}}else{try{throw Error()}catch(ue){se=ue}(be=i())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(ue){if(ue&&se&&typeof ue.stack=="string")return[ue.stack,se.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=f.DetermineComponentFrameRoot(),z=N[0],P=N[1];if(z&&P){var U=z.split(`
`),ie=P.split(`
`);for(b=f=0;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;for(;b<ie.length&&!ie[b].includes("DetermineComponentFrameRoot");)b++;if(f===U.length||b===ie.length)for(f=U.length-1,b=ie.length-1;1<=f&&0<=b&&U[f]!==ie[b];)b--;for(;1<=f&&0<=b;f--,b--)if(U[f]!==ie[b]){if(f!==1||b!==1)do if(f--,b--,0>b||U[f]!==ie[b]){var ve=`
`+U[f].replace(" at new "," at ");return i.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",i.displayName)),ve}while(1<=f&&0<=b);break}}}finally{Ue=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?je(c):""}function Ye(i,s){switch(i.tag){case 26:case 27:case 5:return je(i.type);case 16:return je("Lazy");case 13:return i.child!==s&&s!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Ge(i.type,!1);case 11:return Ge(i.type.render,!1);case 1:return Ge(i.type,!0);case 31:return je("Activity");default:return""}}function $t(i){try{var s="",c=null;do s+=Ye(i,c),c=i,i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Er=Object.prototype.hasOwnProperty,Zt=e.unstable_scheduleCallback,kn=e.unstable_cancelCallback,me=e.unstable_shouldYield,ze=e.unstable_requestPaint,Re=e.unstable_now,J=e.unstable_getCurrentPriorityLevel,fe=e.unstable_ImmediatePriority,Se=e.unstable_UserBlockingPriority,lt=e.unstable_NormalPriority,qr=e.unstable_LowPriority,Gt=e.unstable_IdlePriority,jr=e.log,Yi=e.unstable_setDisableYieldValue,Nr=null,St=null;function Kn(i){if(typeof jr=="function"&&Yi(i),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(Nr,i)}catch{}}var Ar=Math.clz32?Math.clz32:mp,mu=Math.log,fp=Math.LN2;function mp(i){return i>>>=0,i===0?32:31-(mu(i)/fp|0)|0}var Ks=256,Xs=262144,Ws=4194304;function fa(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Xn(i,s,c){var f=i.pendingLanes;if(f===0)return 0;var b=0,N=i.suspendedLanes,z=i.pingedLanes;i=i.warmLanes;var P=f&134217727;return P!==0?(f=P&~N,f!==0?b=fa(f):(z&=P,z!==0?b=fa(z):c||(c=P&~i,c!==0&&(b=fa(c))))):(P=f&~N,P!==0?b=fa(P):z!==0?b=fa(z):c||(c=f&~i,c!==0&&(b=fa(c)))),b===0?0:s!==0&&s!==b&&(s&N)===0&&(N=b&-b,c=s&-s,N>=c||N===32&&(c&4194048)!==0)?s:b}function Ki(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function ne(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(){var i=Ws;return Ws<<=1,(Ws&62914560)===0&&(Ws=4194304),i}function bt(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function _r(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ho(i,s,c,f,b,N){var z=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var P=i.entanglements,U=i.expirationTimes,ie=i.hiddenUpdates;for(c=z&~c;0<c;){var ve=31-Ar(c),be=1<<ve;P[ve]=0,U[ve]=-1;var se=ie[ve];if(se!==null)for(ie[ve]=null,ve=0;ve<se.length;ve++){var ue=se[ve];ue!==null&&(ue.lane&=-536870913)}c&=~be}f!==0&&Xi(i,f,0),N!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=N&~(z&~s))}function Xi(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var f=31-Ar(s);i.entangledLanes|=s,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function hj(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var f=31-Ar(c),b=1<<f;b&s|i[f]&s&&(i[f]|=s),c&=~b}}function vj(i,s){var c=s&-s;return c=(c&42)!==0?1:pp(c),(c&(i.suspendedLanes|s))!==0?0:c}function pp(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hp(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function gj(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:r1(i.type))}function xj(i,s){var c=Z.p;try{return Z.p=i,s()}finally{Z.p=c}}var si=Math.random().toString(36).slice(2),mr="__reactFiber$"+si,Rr="__reactProps$"+si,Zs="__reactContainer$"+si,vp="__reactEvents$"+si,XP="__reactListeners$"+si,WP="__reactHandles$"+si,yj="__reactResources$"+si,vo="__reactMarker$"+si;function gp(i){delete i[mr],delete i[Rr],delete i[vp],delete i[XP],delete i[WP]}function Js(i){var s=i[mr];if(s)return s;for(var c=i.parentNode;c;){if(s=c[Zs]||c[mr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=$_(i);i!==null;){if(c=i[mr])return c;i=$_(i)}return s}i=c,c=i.parentNode}return null}function el(i){if(i=i[mr]||i[Zs]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function go(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(a(33))}function tl(i){var s=i[yj];return s||(s=i[yj]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function nr(i){i[vo]=!0}var bj=new Set,jj={};function Wi(i,s){rl(i,s),rl(i+"Capture",s)}function rl(i,s){for(jj[i]=s,i=0;i<s.length;i++)bj.add(s[i])}var ZP=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nj={},_j={};function JP(i){return Er.call(_j,i)?!0:Er.call(Nj,i)?!1:ZP.test(i)?_j[i]=!0:(Nj[i]=!0,!1)}function pu(i,s,c){if(JP(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function hu(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function ma(i,s,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+f)}}function dn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sj(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ek(i,s,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,N=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return b.call(this)},set:function(z){c=""+z,N.call(this,z)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(z){c=""+z},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function xp(i){if(!i._valueTracker){var s=Sj(i)?"checked":"value";i._valueTracker=ek(i,s,""+i[s])}}function wj(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return i&&(f=Sj(i)?i.checked?"true":"false":i.value),i=f,i!==c?(s.setValue(i),!0):!1}function vu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var tk=/[\n"\\]/g;function fn(i){return i.replace(tk,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function yp(i,s,c,f,b,N,z,P){i.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?i.type=z:i.removeAttribute("type"),s!=null?z==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+dn(s)):i.value!==""+dn(s)&&(i.value=""+dn(s)):z!=="submit"&&z!=="reset"||i.removeAttribute("value"),s!=null?bp(i,z,dn(s)):c!=null?bp(i,z,dn(c)):f!=null&&i.removeAttribute("value"),b==null&&N!=null&&(i.defaultChecked=!!N),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+dn(P):i.removeAttribute("name")}function Cj(i,s,c,f,b,N,z,P){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.type=N),s!=null||c!=null){if(!(N!=="submit"&&N!=="reset"||s!=null)){xp(i);return}c=c!=null?""+dn(c):"",s=s!=null?""+dn(s):c,P||s===i.value||(i.value=s),i.defaultValue=s}f=f??b,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=P?i.checked:!!f,i.defaultChecked=!!f,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(i.name=z),xp(i)}function bp(i,s,c){s==="number"&&vu(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function nl(i,s,c,f){if(i=i.options,s){s={};for(var b=0;b<c.length;b++)s["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=s.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&f&&(i[c].defaultSelected=!0)}else{for(c=""+dn(c),s=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,f&&(i[b].defaultSelected=!0);return}s!==null||i[b].disabled||(s=i[b])}s!==null&&(s.selected=!0)}}function Ej(i,s,c){if(s!=null&&(s=""+dn(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+dn(c):""}function Aj(i,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(a(92));if(M(f)){if(1<f.length)throw Error(a(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=dn(s),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),xp(i)}function al(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var rk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zj(i,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":f?i.setProperty(s,c):typeof c!="number"||c===0||rk.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function Oj(i,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var b in s)f=s[b],s.hasOwnProperty(b)&&c[b]!==f&&zj(i,b,f)}else for(var N in s)s.hasOwnProperty(N)&&zj(i,N,s[N])}function jp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ak=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gu(i){return ak.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function pa(){}var Np=null;function _p(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var il=null,sl=null;function Dj(i){var s=el(i);if(s&&(i=s.stateNode)){var c=i[Rr]||null;e:switch(i=s.stateNode,s.type){case"input":if(yp(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==i&&f.form===i.form){var b=f[Rr]||null;if(!b)throw Error(a(90));yp(f,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===i.form&&wj(f)}break e;case"textarea":Ej(i,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&nl(i,!!c.multiple,s,!1)}}}var Sp=!1;function Mj(i,s,c){if(Sp)return i(s,c);Sp=!0;try{var f=i(s);return f}finally{if(Sp=!1,(il!==null||sl!==null)&&(ad(),il&&(s=il,i=sl,sl=il=null,Dj(s),i)))for(s=0;s<i.length;s++)Dj(i[s])}}function xo(i,s){var c=i.stateNode;if(c===null)return null;var f=c[Rr]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wp=!1;if(ha)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){wp=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{wp=!1}var li=null,Cp=null,xu=null;function Pj(){if(xu)return xu;var i,s=Cp,c=s.length,f,b="value"in li?li.value:li.textContent,N=b.length;for(i=0;i<c&&s[i]===b[i];i++);var z=c-i;for(f=1;f<=z&&s[c-f]===b[N-f];f++);return xu=b.slice(i,1<f?1-f:void 0)}function yu(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function bu(){return!0}function kj(){return!1}function Ir(i){function s(c,f,b,N,z){this._reactName=c,this._targetInst=b,this.type=f,this.nativeEvent=N,this.target=z,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(c=i[P],this[P]=c?c(N):N[P]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?bu:kj,this.isPropagationStopped=kj,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=bu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=bu)},persist:function(){},isPersistent:bu}),s}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ju=Ir(Zi),bo=v({},Zi,{view:0,detail:0}),ik=Ir(bo),Ep,Ap,jo,Nu=v({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Op,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==jo&&(jo&&i.type==="mousemove"?(Ep=i.screenX-jo.screenX,Ap=i.screenY-jo.screenY):Ap=Ep=0,jo=i),Ep)},movementY:function(i){return"movementY"in i?i.movementY:Ap}}),Tj=Ir(Nu),sk=v({},Nu,{dataTransfer:0}),lk=Ir(sk),ok=v({},bo,{relatedTarget:0}),zp=Ir(ok),ck=v({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),uk=Ir(ck),dk=v({},Zi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fk=Ir(dk),mk=v({},Zi,{data:0}),qj=Ir(mk),pk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gk(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=vk[i])?!!s[i]:!1}function Op(){return gk}var xk=v({},bo,{key:function(i){if(i.key){var s=pk[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=yu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?hk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Op,charCode:function(i){return i.type==="keypress"?yu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?yu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yk=Ir(xk),bk=v({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rj=Ir(bk),jk=v({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Op}),Nk=Ir(jk),_k=v({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sk=Ir(_k),wk=v({},Nu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ck=Ir(wk),Ek=v({},Zi,{newState:0,oldState:0}),Ak=Ir(Ek),zk=[9,13,27,32],Dp=ha&&"CompositionEvent"in window,No=null;ha&&"documentMode"in document&&(No=document.documentMode);var Ok=ha&&"TextEvent"in window&&!No,Ij=ha&&(!Dp||No&&8<No&&11>=No),Lj=" ",$j=!1;function Bj(i,s){switch(i){case"keyup":return zk.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uj(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ll=!1;function Dk(i,s){switch(i){case"compositionend":return Uj(s);case"keypress":return s.which!==32?null:($j=!0,Lj);case"textInput":return i=s.data,i===Lj&&$j?null:i;default:return null}}function Mk(i,s){if(ll)return i==="compositionend"||!Dp&&Bj(i,s)?(i=Pj(),xu=Cp=li=null,ll=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ij&&s.locale!=="ko"?null:s.data;default:return null}}var Pk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fj(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Pk[i.type]:s==="textarea"}function Gj(i,s,c,f){il?sl?sl.push(f):sl=[f]:il=f,s=dd(s,"onChange"),0<s.length&&(c=new ju("onChange","change",null,c,f),i.push({event:c,listeners:s}))}var _o=null,So=null;function kk(i){C_(i,0)}function _u(i){var s=go(i);if(wj(s))return i}function Hj(i,s){if(i==="change")return s}var Qj=!1;if(ha){var Mp;if(ha){var Pp="oninput"in document;if(!Pp){var Vj=document.createElement("div");Vj.setAttribute("oninput","return;"),Pp=typeof Vj.oninput=="function"}Mp=Pp}else Mp=!1;Qj=Mp&&(!document.documentMode||9<document.documentMode)}function Yj(){_o&&(_o.detachEvent("onpropertychange",Kj),So=_o=null)}function Kj(i){if(i.propertyName==="value"&&_u(So)){var s=[];Gj(s,So,i,_p(i)),Mj(kk,s)}}function Tk(i,s,c){i==="focusin"?(Yj(),_o=s,So=c,_o.attachEvent("onpropertychange",Kj)):i==="focusout"&&Yj()}function qk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _u(So)}function Rk(i,s){if(i==="click")return _u(s)}function Ik(i,s){if(i==="input"||i==="change")return _u(s)}function Lk(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Xr=typeof Object.is=="function"?Object.is:Lk;function wo(i,s){if(Xr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var b=c[f];if(!Er.call(s,b)||!Xr(i[b],s[b]))return!1}return!0}function Xj(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Wj(i,s){var c=Xj(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=s&&f>=s)return{node:c,offset:s-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Xj(c)}}function Zj(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Zj(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Jj(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=vu(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=vu(i.document)}return s}function kp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var $k=ha&&"documentMode"in document&&11>=document.documentMode,ol=null,Tp=null,Co=null,qp=!1;function e0(i,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;qp||ol==null||ol!==vu(f)||(f=ol,"selectionStart"in f&&kp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Co&&wo(Co,f)||(Co=f,f=dd(Tp,"onSelect"),0<f.length&&(s=new ju("onSelect","select",null,s,c),i.push({event:s,listeners:f}),s.target=ol)))}function Ji(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var cl={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},Rp={},t0={};ha&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function es(i){if(Rp[i])return Rp[i];if(!cl[i])return i;var s=cl[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in t0)return Rp[i]=s[c];return i}var r0=es("animationend"),n0=es("animationiteration"),a0=es("animationstart"),Bk=es("transitionrun"),Uk=es("transitionstart"),Fk=es("transitioncancel"),i0=es("transitionend"),s0=new Map,Ip="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ip.push("scrollEnd");function Tn(i,s){s0.set(i,s),Wi(s,[i])}var Su=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},mn=[],ul=0,Lp=0;function wu(){for(var i=ul,s=Lp=ul=0;s<i;){var c=mn[s];mn[s++]=null;var f=mn[s];mn[s++]=null;var b=mn[s];mn[s++]=null;var N=mn[s];if(mn[s++]=null,f!==null&&b!==null){var z=f.pending;z===null?b.next=b:(b.next=z.next,z.next=b),f.pending=b}N!==0&&l0(c,b,N)}}function Cu(i,s,c,f){mn[ul++]=i,mn[ul++]=s,mn[ul++]=c,mn[ul++]=f,Lp|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function $p(i,s,c,f){return Cu(i,s,c,f),Eu(i)}function ts(i,s){return Cu(i,null,null,s),Eu(i)}function l0(i,s,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var b=!1,N=i.return;N!==null;)N.childLanes|=c,f=N.alternate,f!==null&&(f.childLanes|=c),N.tag===22&&(i=N.stateNode,i===null||i._visibility&1||(b=!0)),i=N,N=N.return;return i.tag===3?(N=i.stateNode,b&&s!==null&&(b=31-Ar(c),i=N.hiddenUpdates,f=i[b],f===null?i[b]=[s]:f.push(s),s.lane=c|536870912),N):null}function Eu(i){if(50<Yo)throw Yo=0,Kh=null,Error(a(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var dl={};function Gk(i,s,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(i,s,c,f){return new Gk(i,s,c,f)}function Bp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function va(i,s){var c=i.alternate;return c===null?(c=Wr(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function o0(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Au(i,s,c,f,b,N){var z=0;if(f=i,typeof i=="function")Bp(i)&&(z=1);else if(typeof i=="string")z=KT(i,c,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Wr(31,c,s,b),i.elementType=R,i.lanes=N,i;case j:return rs(c.children,b,N,s);case S:z=8,b|=24;break;case w:return i=Wr(12,c,s,b|2),i.elementType=w,i.lanes=N,i;case O:return i=Wr(13,c,s,b),i.elementType=O,i.lanes=N,i;case D:return i=Wr(19,c,s,b),i.elementType=D,i.lanes=N,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:z=10;break e;case A:z=9;break e;case E:z=11;break e;case T:z=14;break e;case k:z=16,f=null;break e}z=29,c=Error(a(130,i===null?"null":typeof i,"")),f=null}return s=Wr(z,c,s,b),s.elementType=i,s.type=f,s.lanes=N,s}function rs(i,s,c,f){return i=Wr(7,i,f,s),i.lanes=c,i}function Up(i,s,c){return i=Wr(6,i,null,s),i.lanes=c,i}function c0(i){var s=Wr(18,null,null,0);return s.stateNode=i,s}function Fp(i,s,c){return s=Wr(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var u0=new WeakMap;function pn(i,s){if(typeof i=="object"&&i!==null){var c=u0.get(i);return c!==void 0?c:(s={value:i,source:s,stack:$t(s)},u0.set(i,s),s)}return{value:i,source:s,stack:$t(s)}}var fl=[],ml=0,zu=null,Eo=0,hn=[],vn=0,oi=null,Wn=1,Zn="";function ga(i,s){fl[ml++]=Eo,fl[ml++]=zu,zu=i,Eo=s}function d0(i,s,c){hn[vn++]=Wn,hn[vn++]=Zn,hn[vn++]=oi,oi=i;var f=Wn;i=Zn;var b=32-Ar(f)-1;f&=~(1<<b),c+=1;var N=32-Ar(s)+b;if(30<N){var z=b-b%5;N=(f&(1<<z)-1).toString(32),f>>=z,b-=z,Wn=1<<32-Ar(s)+b|c<<b|f,Zn=N+i}else Wn=1<<N|c<<b|f,Zn=i}function Gp(i){i.return!==null&&(ga(i,1),d0(i,1,0))}function Hp(i){for(;i===zu;)zu=fl[--ml],fl[ml]=null,Eo=fl[--ml],fl[ml]=null;for(;i===oi;)oi=hn[--vn],hn[vn]=null,Zn=hn[--vn],hn[vn]=null,Wn=hn[--vn],hn[vn]=null}function f0(i,s){hn[vn++]=Wn,hn[vn++]=Zn,hn[vn++]=oi,Wn=s.id,Zn=s.overflow,oi=i}var pr=null,wt=null,et=!1,ci=null,gn=!1,Qp=Error(a(519));function ui(i){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ao(pn(s,i)),Qp}function m0(i){var s=i.stateNode,c=i.type,f=i.memoizedProps;switch(s[mr]=i,s[Rr]=f,c){case"dialog":We("cancel",s),We("close",s);break;case"iframe":case"object":case"embed":We("load",s);break;case"video":case"audio":for(c=0;c<Xo.length;c++)We(Xo[c],s);break;case"source":We("error",s);break;case"img":case"image":case"link":We("error",s),We("load",s);break;case"details":We("toggle",s);break;case"input":We("invalid",s),Cj(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":We("invalid",s);break;case"textarea":We("invalid",s),Aj(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||O_(s.textContent,c)?(f.popover!=null&&(We("beforetoggle",s),We("toggle",s)),f.onScroll!=null&&We("scroll",s),f.onScrollEnd!=null&&We("scrollend",s),f.onClick!=null&&(s.onclick=pa),s=!0):s=!1,s||ui(i,!0)}function p0(i){for(pr=i.return;pr;)switch(pr.tag){case 5:case 31:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:pr=pr.return}}function pl(i){if(i!==pr)return!1;if(!et)return p0(i),et=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||uv(i.type,i.memoizedProps)),c=!c),c&&wt&&ui(i),p0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));wt=L_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));wt=L_(i)}else s===27?(s=wt,Si(i.type)?(i=hv,hv=null,wt=i):wt=s):wt=pr?yn(i.stateNode.nextSibling):null;return!0}function ns(){wt=pr=null,et=!1}function Vp(){var i=ci;return i!==null&&(Ur===null?Ur=i:Ur.push.apply(Ur,i),ci=null),i}function Ao(i){ci===null?ci=[i]:ci.push(i)}var Yp=pe(null),as=null,xa=null;function di(i,s,c){de(Yp,s._currentValue),s._currentValue=c}function ya(i){i._currentValue=Yp.current,re(Yp)}function Kp(i,s,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===c)break;i=i.return}}function Xp(i,s,c,f){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var N=b.dependencies;if(N!==null){var z=b.child;N=N.firstContext;e:for(;N!==null;){var P=N;N=b;for(var U=0;U<s.length;U++)if(P.context===s[U]){N.lanes|=c,P=N.alternate,P!==null&&(P.lanes|=c),Kp(N.return,c,i),f||(z=null);break e}N=P.next}}else if(b.tag===18){if(z=b.return,z===null)throw Error(a(341));z.lanes|=c,N=z.alternate,N!==null&&(N.lanes|=c),Kp(z,c,i),z=null}else z=b.child;if(z!==null)z.return=b;else for(z=b;z!==null;){if(z===i){z=null;break}if(b=z.sibling,b!==null){b.return=z.return,z=b;break}z=z.return}b=z}}function hl(i,s,c,f){i=null;for(var b=s,N=!1;b!==null;){if(!N){if((b.flags&524288)!==0)N=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var z=b.alternate;if(z===null)throw Error(a(387));if(z=z.memoizedProps,z!==null){var P=b.type;Xr(b.pendingProps.value,z.value)||(i!==null?i.push(P):i=[P])}}else if(b===he.current){if(z=b.alternate,z===null)throw Error(a(387));z.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(tc):i=[tc])}b=b.return}i!==null&&Xp(s,i,c,f),s.flags|=262144}function Ou(i){for(i=i.firstContext;i!==null;){if(!Xr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function is(i){as=i,xa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function hr(i){return h0(as,i)}function Du(i,s){return as===null&&is(i),h0(i,s)}function h0(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},xa===null){if(i===null)throw Error(a(308));xa=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else xa=xa.next=s;return c}var Hk=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},Qk=e.unstable_scheduleCallback,Vk=e.unstable_NormalPriority,Ht={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wp(){return{controller:new Hk,data:new Map,refCount:0}}function zo(i){i.refCount--,i.refCount===0&&Qk(Vk,function(){i.controller.abort()})}var Oo=null,Zp=0,vl=0,gl=null;function Yk(i,s){if(Oo===null){var c=Oo=[];Zp=0,vl=tv(),gl={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Zp++,s.then(v0,v0),s}function v0(){if(--Zp===0&&Oo!==null){gl!==null&&(gl.status="fulfilled");var i=Oo;Oo=null,vl=0,gl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function Kk(i,s){var c=[],f={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){f.status="fulfilled",f.value=s;for(var b=0;b<c.length;b++)(0,c[b])(s)},function(b){for(f.status="rejected",f.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),f}var g0=q.S;q.S=function(i,s){e_=Re(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Yk(i,s),g0!==null&&g0(i,s)};var ss=pe(null);function Jp(){var i=ss.current;return i!==null?i:jt.pooledCache}function Mu(i,s){s===null?de(ss,ss.current):de(ss,s.pool)}function x0(){var i=Jp();return i===null?null:{parent:Ht._currentValue,pool:i}}var xl=Error(a(460)),eh=Error(a(474)),Pu=Error(a(542)),ku={then:function(){}};function y0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function b0(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(pa,pa),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,N0(i),i;default:if(typeof s.status=="string")s.then(pa,pa);else{if(i=jt,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=s,i.status="pending",i.then(function(f){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=f}},function(f){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,N0(i),i}throw os=s,xl}}function ls(i){try{var s=i._init;return s(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(os=c,xl):c}}var os=null;function j0(){if(os===null)throw Error(a(459));var i=os;return os=null,i}function N0(i){if(i===xl||i===Pu)throw Error(a(483))}var yl=null,Do=0;function Tu(i){var s=Do;return Do+=1,yl===null&&(yl=[]),b0(yl,i,s)}function Mo(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function qu(i,s){throw s.$$typeof===y?Error(a(525)):(i=Object.prototype.toString.call(s),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function _0(i){function s(ee,K){if(i){var ae=ee.deletions;ae===null?(ee.deletions=[K],ee.flags|=16):ae.push(K)}}function c(ee,K){if(!i)return null;for(;K!==null;)s(ee,K),K=K.sibling;return null}function f(ee){for(var K=new Map;ee!==null;)ee.key!==null?K.set(ee.key,ee):K.set(ee.index,ee),ee=ee.sibling;return K}function b(ee,K){return ee=va(ee,K),ee.index=0,ee.sibling=null,ee}function N(ee,K,ae){return ee.index=ae,i?(ae=ee.alternate,ae!==null?(ae=ae.index,ae<K?(ee.flags|=67108866,K):ae):(ee.flags|=67108866,K)):(ee.flags|=1048576,K)}function z(ee){return i&&ee.alternate===null&&(ee.flags|=67108866),ee}function P(ee,K,ae,xe){return K===null||K.tag!==6?(K=Up(ae,ee.mode,xe),K.return=ee,K):(K=b(K,ae),K.return=ee,K)}function U(ee,K,ae,xe){var qe=ae.type;return qe===j?ve(ee,K,ae.props.children,xe,ae.key):K!==null&&(K.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===k&&ls(qe)===K.type)?(K=b(K,ae.props),Mo(K,ae),K.return=ee,K):(K=Au(ae.type,ae.key,ae.props,null,ee.mode,xe),Mo(K,ae),K.return=ee,K)}function ie(ee,K,ae,xe){return K===null||K.tag!==4||K.stateNode.containerInfo!==ae.containerInfo||K.stateNode.implementation!==ae.implementation?(K=Fp(ae,ee.mode,xe),K.return=ee,K):(K=b(K,ae.children||[]),K.return=ee,K)}function ve(ee,K,ae,xe,qe){return K===null||K.tag!==7?(K=rs(ae,ee.mode,xe,qe),K.return=ee,K):(K=b(K,ae),K.return=ee,K)}function be(ee,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Up(""+K,ee.mode,ae),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return ae=Au(K.type,K.key,K.props,null,ee.mode,ae),Mo(ae,K),ae.return=ee,ae;case _:return K=Fp(K,ee.mode,ae),K.return=ee,K;case k:return K=ls(K),be(ee,K,ae)}if(M(K)||$(K))return K=rs(K,ee.mode,ae,null),K.return=ee,K;if(typeof K.then=="function")return be(ee,Tu(K),ae);if(K.$$typeof===C)return be(ee,Du(ee,K),ae);qu(ee,K)}return null}function se(ee,K,ae,xe){var qe=K!==null?K.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return qe!==null?null:P(ee,K,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case x:return ae.key===qe?U(ee,K,ae,xe):null;case _:return ae.key===qe?ie(ee,K,ae,xe):null;case k:return ae=ls(ae),se(ee,K,ae,xe)}if(M(ae)||$(ae))return qe!==null?null:ve(ee,K,ae,xe,null);if(typeof ae.then=="function")return se(ee,K,Tu(ae),xe);if(ae.$$typeof===C)return se(ee,K,Du(ee,ae),xe);qu(ee,ae)}return null}function ue(ee,K,ae,xe,qe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ee=ee.get(ae)||null,P(K,ee,""+xe,qe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case x:return ee=ee.get(xe.key===null?ae:xe.key)||null,U(K,ee,xe,qe);case _:return ee=ee.get(xe.key===null?ae:xe.key)||null,ie(K,ee,xe,qe);case k:return xe=ls(xe),ue(ee,K,ae,xe,qe)}if(M(xe)||$(xe))return ee=ee.get(ae)||null,ve(K,ee,xe,qe,null);if(typeof xe.then=="function")return ue(ee,K,ae,Tu(xe),qe);if(xe.$$typeof===C)return ue(ee,K,ae,Du(K,xe),qe);qu(K,xe)}return null}function Ee(ee,K,ae,xe){for(var qe=null,rt=null,Oe=K,Ve=K=0,Je=null;Oe!==null&&Ve<ae.length;Ve++){Oe.index>Ve?(Je=Oe,Oe=null):Je=Oe.sibling;var nt=se(ee,Oe,ae[Ve],xe);if(nt===null){Oe===null&&(Oe=Je);break}i&&Oe&&nt.alternate===null&&s(ee,Oe),K=N(nt,K,Ve),rt===null?qe=nt:rt.sibling=nt,rt=nt,Oe=Je}if(Ve===ae.length)return c(ee,Oe),et&&ga(ee,Ve),qe;if(Oe===null){for(;Ve<ae.length;Ve++)Oe=be(ee,ae[Ve],xe),Oe!==null&&(K=N(Oe,K,Ve),rt===null?qe=Oe:rt.sibling=Oe,rt=Oe);return et&&ga(ee,Ve),qe}for(Oe=f(Oe);Ve<ae.length;Ve++)Je=ue(Oe,ee,Ve,ae[Ve],xe),Je!==null&&(i&&Je.alternate!==null&&Oe.delete(Je.key===null?Ve:Je.key),K=N(Je,K,Ve),rt===null?qe=Je:rt.sibling=Je,rt=Je);return i&&Oe.forEach(function(zi){return s(ee,zi)}),et&&ga(ee,Ve),qe}function $e(ee,K,ae,xe){if(ae==null)throw Error(a(151));for(var qe=null,rt=null,Oe=K,Ve=K=0,Je=null,nt=ae.next();Oe!==null&&!nt.done;Ve++,nt=ae.next()){Oe.index>Ve?(Je=Oe,Oe=null):Je=Oe.sibling;var zi=se(ee,Oe,nt.value,xe);if(zi===null){Oe===null&&(Oe=Je);break}i&&Oe&&zi.alternate===null&&s(ee,Oe),K=N(zi,K,Ve),rt===null?qe=zi:rt.sibling=zi,rt=zi,Oe=Je}if(nt.done)return c(ee,Oe),et&&ga(ee,Ve),qe;if(Oe===null){for(;!nt.done;Ve++,nt=ae.next())nt=be(ee,nt.value,xe),nt!==null&&(K=N(nt,K,Ve),rt===null?qe=nt:rt.sibling=nt,rt=nt);return et&&ga(ee,Ve),qe}for(Oe=f(Oe);!nt.done;Ve++,nt=ae.next())nt=ue(Oe,ee,Ve,nt.value,xe),nt!==null&&(i&&nt.alternate!==null&&Oe.delete(nt.key===null?Ve:nt.key),K=N(nt,K,Ve),rt===null?qe=nt:rt.sibling=nt,rt=nt);return i&&Oe.forEach(function(sq){return s(ee,sq)}),et&&ga(ee,Ve),qe}function ht(ee,K,ae,xe){if(typeof ae=="object"&&ae!==null&&ae.type===j&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case x:e:{for(var qe=ae.key;K!==null;){if(K.key===qe){if(qe=ae.type,qe===j){if(K.tag===7){c(ee,K.sibling),xe=b(K,ae.props.children),xe.return=ee,ee=xe;break e}}else if(K.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===k&&ls(qe)===K.type){c(ee,K.sibling),xe=b(K,ae.props),Mo(xe,ae),xe.return=ee,ee=xe;break e}c(ee,K);break}else s(ee,K);K=K.sibling}ae.type===j?(xe=rs(ae.props.children,ee.mode,xe,ae.key),xe.return=ee,ee=xe):(xe=Au(ae.type,ae.key,ae.props,null,ee.mode,xe),Mo(xe,ae),xe.return=ee,ee=xe)}return z(ee);case _:e:{for(qe=ae.key;K!==null;){if(K.key===qe)if(K.tag===4&&K.stateNode.containerInfo===ae.containerInfo&&K.stateNode.implementation===ae.implementation){c(ee,K.sibling),xe=b(K,ae.children||[]),xe.return=ee,ee=xe;break e}else{c(ee,K);break}else s(ee,K);K=K.sibling}xe=Fp(ae,ee.mode,xe),xe.return=ee,ee=xe}return z(ee);case k:return ae=ls(ae),ht(ee,K,ae,xe)}if(M(ae))return Ee(ee,K,ae,xe);if($(ae)){if(qe=$(ae),typeof qe!="function")throw Error(a(150));return ae=qe.call(ae),$e(ee,K,ae,xe)}if(typeof ae.then=="function")return ht(ee,K,Tu(ae),xe);if(ae.$$typeof===C)return ht(ee,K,Du(ee,ae),xe);qu(ee,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,K!==null&&K.tag===6?(c(ee,K.sibling),xe=b(K,ae),xe.return=ee,ee=xe):(c(ee,K),xe=Up(ae,ee.mode,xe),xe.return=ee,ee=xe),z(ee)):c(ee,K)}return function(ee,K,ae,xe){try{Do=0;var qe=ht(ee,K,ae,xe);return yl=null,qe}catch(Oe){if(Oe===xl||Oe===Pu)throw Oe;var rt=Wr(29,Oe,null,ee.mode);return rt.lanes=xe,rt.return=ee,rt}}}var cs=_0(!0),S0=_0(!1),fi=!1;function th(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rh(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function mi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function pi(i,s,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(st&2)!==0){var b=f.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),f.pending=s,s=Eu(i),l0(i,null,c),s}return Cu(i,f,s,c),Eu(i)}function Po(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,hj(i,c)}}function nh(i,s){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var b=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var z={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};N===null?b=N=z:N=N.next=z,c=c.next}while(c!==null);N===null?b=N=s:N=N.next=s}else b=N=s;c={baseState:f.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var ah=!1;function ko(){if(ah){var i=gl;if(i!==null)throw i}}function To(i,s,c,f){ah=!1;var b=i.updateQueue;fi=!1;var N=b.firstBaseUpdate,z=b.lastBaseUpdate,P=b.shared.pending;if(P!==null){b.shared.pending=null;var U=P,ie=U.next;U.next=null,z===null?N=ie:z.next=ie,z=U;var ve=i.alternate;ve!==null&&(ve=ve.updateQueue,P=ve.lastBaseUpdate,P!==z&&(P===null?ve.firstBaseUpdate=ie:P.next=ie,ve.lastBaseUpdate=U))}if(N!==null){var be=b.baseState;z=0,ve=ie=U=null,P=N;do{var se=P.lane&-536870913,ue=se!==P.lane;if(ue?(Ze&se)===se:(f&se)===se){se!==0&&se===vl&&(ah=!0),ve!==null&&(ve=ve.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ee=i,$e=P;se=s;var ht=c;switch($e.tag){case 1:if(Ee=$e.payload,typeof Ee=="function"){be=Ee.call(ht,be,se);break e}be=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=$e.payload,se=typeof Ee=="function"?Ee.call(ht,be,se):Ee,se==null)break e;be=v({},be,se);break e;case 2:fi=!0}}se=P.callback,se!==null&&(i.flags|=64,ue&&(i.flags|=8192),ue=b.callbacks,ue===null?b.callbacks=[se]:ue.push(se))}else ue={lane:se,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ve===null?(ie=ve=ue,U=be):ve=ve.next=ue,z|=se;if(P=P.next,P===null){if(P=b.shared.pending,P===null)break;ue=P,P=ue.next,ue.next=null,b.lastBaseUpdate=ue,b.shared.pending=null}}while(!0);ve===null&&(U=be),b.baseState=U,b.firstBaseUpdate=ie,b.lastBaseUpdate=ve,N===null&&(b.shared.lanes=0),yi|=z,i.lanes=z,i.memoizedState=be}}function w0(i,s){if(typeof i!="function")throw Error(a(191,i));i.call(s)}function C0(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)w0(c[i],s)}var bl=pe(null),Ru=pe(0);function E0(i,s){i=Aa,de(Ru,i),de(bl,s),Aa=i|s.baseLanes}function ih(){de(Ru,Aa),de(bl,bl.current)}function sh(){Aa=Ru.current,re(bl),re(Ru)}var Zr=pe(null),xn=null;function hi(i){var s=i.alternate;de(Bt,Bt.current&1),de(Zr,i),xn===null&&(s===null||bl.current!==null||s.memoizedState!==null)&&(xn=i)}function lh(i){de(Bt,Bt.current),de(Zr,i),xn===null&&(xn=i)}function A0(i){i.tag===22?(de(Bt,Bt.current),de(Zr,i),xn===null&&(xn=i)):vi()}function vi(){de(Bt,Bt.current),de(Zr,Zr.current)}function Jr(i){re(Zr),xn===i&&(xn=null),re(Bt)}var Bt=pe(0);function Iu(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||mv(c)||pv(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ba=0,Qe=null,mt=null,Qt=null,Lu=!1,jl=!1,us=!1,$u=0,qo=0,Nl=null,Xk=0;function kt(){throw Error(a(321))}function oh(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!Xr(i[c],s[c]))return!1;return!0}function ch(i,s,c,f,b,N){return ba=N,Qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=i===null||i.memoizedState===null?dN:Sh,us=!1,N=c(f,b),us=!1,jl&&(N=O0(s,c,f,b)),z0(i),N}function z0(i){q.H=Lo;var s=mt!==null&&mt.next!==null;if(ba=0,Qt=mt=Qe=null,Lu=!1,qo=0,Nl=null,s)throw Error(a(300));i===null||Vt||(i=i.dependencies,i!==null&&Ou(i)&&(Vt=!0))}function O0(i,s,c,f){Qe=i;var b=0;do{if(jl&&(Nl=null),qo=0,jl=!1,25<=b)throw Error(a(301));if(b+=1,Qt=mt=null,i.updateQueue!=null){var N=i.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}q.H=fN,N=s(c,f)}while(jl);return N}function Wk(){var i=q.H,s=i.useState()[0];return s=typeof s.then=="function"?Ro(s):s,i=i.useState()[0],(mt!==null?mt.memoizedState:null)!==i&&(Qe.flags|=1024),s}function uh(){var i=$u!==0;return $u=0,i}function dh(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function fh(i){if(Lu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Lu=!1}ba=0,Qt=mt=Qe=null,jl=!1,qo=$u=0,Nl=null}function zr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Qe.memoizedState=Qt=i:Qt=Qt.next=i,Qt}function Ut(){if(mt===null){var i=Qe.alternate;i=i!==null?i.memoizedState:null}else i=mt.next;var s=Qt===null?Qe.memoizedState:Qt.next;if(s!==null)Qt=s,mt=i;else{if(i===null)throw Qe.alternate===null?Error(a(467)):Error(a(310));mt=i,i={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Qt===null?Qe.memoizedState=Qt=i:Qt=Qt.next=i}return Qt}function Bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(i){var s=qo;return qo+=1,Nl===null&&(Nl=[]),i=b0(Nl,i,s),s=Qe,(Qt===null?s.memoizedState:Qt.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?dN:Sh),i}function Uu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ro(i);if(i.$$typeof===C)return hr(i)}throw Error(a(438,String(i)))}function mh(i){var s=null,c=Qe.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=Qe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Bu(),Qe.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),f=0;f<i;f++)c[f]=L;return s.index++,c}function ja(i,s){return typeof s=="function"?s(i):s}function Fu(i){var s=Ut();return ph(s,mt,i)}function ph(i,s,c){var f=i.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=c;var b=i.baseQueue,N=f.pending;if(N!==null){if(b!==null){var z=b.next;b.next=N.next,N.next=z}s.baseQueue=b=N,f.pending=null}if(N=i.baseState,b===null)i.memoizedState=N;else{s=b.next;var P=z=null,U=null,ie=s,ve=!1;do{var be=ie.lane&-536870913;if(be!==ie.lane?(Ze&be)===be:(ba&be)===be){var se=ie.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),be===vl&&(ve=!0);else if((ba&se)===se){ie=ie.next,se===vl&&(ve=!0);continue}else be={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},U===null?(P=U=be,z=N):U=U.next=be,Qe.lanes|=se,yi|=se;be=ie.action,us&&c(N,be),N=ie.hasEagerState?ie.eagerState:c(N,be)}else se={lane:be,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},U===null?(P=U=se,z=N):U=U.next=se,Qe.lanes|=be,yi|=be;ie=ie.next}while(ie!==null&&ie!==s);if(U===null?z=N:U.next=P,!Xr(N,i.memoizedState)&&(Vt=!0,ve&&(c=gl,c!==null)))throw c;i.memoizedState=N,i.baseState=z,i.baseQueue=U,f.lastRenderedState=N}return b===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function hh(i){var s=Ut(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=c.dispatch,b=c.pending,N=s.memoizedState;if(b!==null){c.pending=null;var z=b=b.next;do N=i(N,z.action),z=z.next;while(z!==b);Xr(N,s.memoizedState)||(Vt=!0),s.memoizedState=N,s.baseQueue===null&&(s.baseState=N),c.lastRenderedState=N}return[N,f]}function D0(i,s,c){var f=Qe,b=Ut(),N=et;if(N){if(c===void 0)throw Error(a(407));c=c()}else c=s();var z=!Xr((mt||b).memoizedState,c);if(z&&(b.memoizedState=c,Vt=!0),b=b.queue,xh(k0.bind(null,f,b,i),[i]),b.getSnapshot!==s||z||Qt!==null&&Qt.memoizedState.tag&1){if(f.flags|=2048,_l(9,{destroy:void 0},P0.bind(null,f,b,c,s),null),jt===null)throw Error(a(349));N||(ba&127)!==0||M0(f,s,c)}return c}function M0(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Qe.updateQueue,s===null?(s=Bu(),Qe.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function P0(i,s,c,f){s.value=c,s.getSnapshot=f,T0(s)&&q0(i)}function k0(i,s,c){return c(function(){T0(s)&&q0(i)})}function T0(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!Xr(i,c)}catch{return!0}}function q0(i){var s=ts(i,2);s!==null&&Fr(s,i,2)}function vh(i){var s=zr();if(typeof i=="function"){var c=i;if(i=c(),us){Kn(!0);try{c()}finally{Kn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:i},s}function R0(i,s,c,f){return i.baseState=c,ph(i,mt,typeof f=="function"?f:ja)}function Zk(i,s,c,f,b){if(Qu(i))throw Error(a(485));if(i=s.action,i!==null){var N={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){N.listeners.push(z)}};q.T!==null?c(!0):N.isTransition=!1,f(N),c=s.pending,c===null?(N.next=s.pending=N,I0(s,N)):(N.next=c.next,s.pending=c.next=N)}}function I0(i,s){var c=s.action,f=s.payload,b=i.state;if(s.isTransition){var N=q.T,z={};q.T=z;try{var P=c(b,f),U=q.S;U!==null&&U(z,P),L0(i,s,P)}catch(ie){gh(i,s,ie)}finally{N!==null&&z.types!==null&&(N.types=z.types),q.T=N}}else try{N=c(b,f),L0(i,s,N)}catch(ie){gh(i,s,ie)}}function L0(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){$0(i,s,f)},function(f){return gh(i,s,f)}):$0(i,s,c)}function $0(i,s,c){s.status="fulfilled",s.value=c,B0(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,I0(i,c)))}function gh(i,s,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,B0(s),s=s.next;while(s!==f)}i.action=null}function B0(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function U0(i,s){return s}function F0(i,s){if(et){var c=jt.formState;if(c!==null){e:{var f=Qe;if(et){if(wt){t:{for(var b=wt,N=gn;b.nodeType!==8;){if(!N){b=null;break t}if(b=yn(b.nextSibling),b===null){b=null;break t}}N=b.data,b=N==="F!"||N==="F"?b:null}if(b){wt=yn(b.nextSibling),f=b.data==="F!";break e}}ui(f)}f=!1}f&&(s=c[0])}}return c=zr(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:s},c.queue=f,c=oN.bind(null,Qe,f),f.dispatch=c,f=vh(!1),N=_h.bind(null,Qe,!1,f.queue),f=zr(),b={state:s,dispatch:null,action:i,pending:null},f.queue=b,c=Zk.bind(null,Qe,b,N,c),b.dispatch=c,f.memoizedState=i,[s,c,!1]}function G0(i){var s=Ut();return H0(s,mt,i)}function H0(i,s,c){if(s=ph(i,s,U0)[0],i=Fu(ja)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Ro(s)}catch(z){throw z===xl?Pu:z}else f=s;s=Ut();var b=s.queue,N=b.dispatch;return c!==s.memoizedState&&(Qe.flags|=2048,_l(9,{destroy:void 0},Jk.bind(null,b,c),null)),[f,N,i]}function Jk(i,s){i.action=s}function Q0(i){var s=Ut(),c=mt;if(c!==null)return H0(s,c,i);Ut(),s=s.memoizedState,c=Ut();var f=c.queue.dispatch;return c.memoizedState=i,[s,f,!1]}function _l(i,s,c,f){return i={tag:i,create:c,deps:f,inst:s,next:null},s=Qe.updateQueue,s===null&&(s=Bu(),Qe.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,s.lastEffect=i),i}function V0(){return Ut().memoizedState}function Gu(i,s,c,f){var b=zr();Qe.flags|=i,b.memoizedState=_l(1|s,{destroy:void 0},c,f===void 0?null:f)}function Hu(i,s,c,f){var b=Ut();f=f===void 0?null:f;var N=b.memoizedState.inst;mt!==null&&f!==null&&oh(f,mt.memoizedState.deps)?b.memoizedState=_l(s,N,c,f):(Qe.flags|=i,b.memoizedState=_l(1|s,N,c,f))}function Y0(i,s){Gu(8390656,8,i,s)}function xh(i,s){Hu(2048,8,i,s)}function eT(i){Qe.flags|=4;var s=Qe.updateQueue;if(s===null)s=Bu(),Qe.updateQueue=s,s.events=[i];else{var c=s.events;c===null?s.events=[i]:c.push(i)}}function K0(i){var s=Ut().memoizedState;return eT({ref:s,nextImpl:i}),function(){if((st&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function X0(i,s){return Hu(4,2,i,s)}function W0(i,s){return Hu(4,4,i,s)}function Z0(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function J0(i,s,c){c=c!=null?c.concat([i]):null,Hu(4,4,Z0.bind(null,s,i),c)}function yh(){}function eN(i,s){var c=Ut();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&oh(s,f[1])?f[0]:(c.memoizedState=[i,s],i)}function tN(i,s){var c=Ut();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&oh(s,f[1]))return f[0];if(f=i(),us){Kn(!0);try{i()}finally{Kn(!1)}}return c.memoizedState=[f,s],f}function bh(i,s,c){return c===void 0||(ba&1073741824)!==0&&(Ze&261930)===0?i.memoizedState=s:(i.memoizedState=c,i=r_(),Qe.lanes|=i,yi|=i,c)}function rN(i,s,c,f){return Xr(c,s)?c:bl.current!==null?(i=bh(i,c,f),Xr(i,s)||(Vt=!0),i):(ba&42)===0||(ba&1073741824)!==0&&(Ze&261930)===0?(Vt=!0,i.memoizedState=c):(i=r_(),Qe.lanes|=i,yi|=i,s)}function nN(i,s,c,f,b){var N=Z.p;Z.p=N!==0&&8>N?N:8;var z=q.T,P={};q.T=P,_h(i,!1,s,c);try{var U=b(),ie=q.S;if(ie!==null&&ie(P,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ve=Kk(U,f);Io(i,s,ve,rn(i))}else Io(i,s,f,rn(i))}catch(be){Io(i,s,{then:function(){},status:"rejected",reason:be},rn())}finally{Z.p=N,z!==null&&P.types!==null&&(z.types=P.types),q.T=z}}function tT(){}function jh(i,s,c,f){if(i.tag!==5)throw Error(a(476));var b=aN(i).queue;nN(i,b,s,H,c===null?tT:function(){return iN(i),c(f)})}function aN(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:H},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function iN(i){var s=aN(i);s.next===null&&(s=i.alternate.memoizedState),Io(i,s.next.queue,{},rn())}function Nh(){return hr(tc)}function sN(){return Ut().memoizedState}function lN(){return Ut().memoizedState}function rT(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=rn();i=mi(c);var f=pi(s,i,c);f!==null&&(Fr(f,s,c),Po(f,s,c)),s={cache:Wp()},i.payload=s;return}s=s.return}}function nT(i,s,c){var f=rn();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qu(i)?cN(s,c):(c=$p(i,s,c,f),c!==null&&(Fr(c,i,f),uN(c,s,f)))}function oN(i,s,c){var f=rn();Io(i,s,c,f)}function Io(i,s,c,f){var b={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Qu(i))cN(s,b);else{var N=i.alternate;if(i.lanes===0&&(N===null||N.lanes===0)&&(N=s.lastRenderedReducer,N!==null))try{var z=s.lastRenderedState,P=N(z,c);if(b.hasEagerState=!0,b.eagerState=P,Xr(P,z))return Cu(i,s,b,0),jt===null&&wu(),!1}catch{}if(c=$p(i,s,b,f),c!==null)return Fr(c,i,f),uN(c,s,f),!0}return!1}function _h(i,s,c,f){if(f={lane:2,revertLane:tv(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Qu(i)){if(s)throw Error(a(479))}else s=$p(i,c,f,2),s!==null&&Fr(s,i,2)}function Qu(i){var s=i.alternate;return i===Qe||s!==null&&s===Qe}function cN(i,s){jl=Lu=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function uN(i,s,c){if((c&4194048)!==0){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,hj(i,c)}}var Lo={readContext:hr,use:Uu,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Lo.useEffectEvent=kt;var dN={readContext:hr,use:Uu,useCallback:function(i,s){return zr().memoizedState=[i,s===void 0?null:s],i},useContext:hr,useEffect:Y0,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,Gu(4194308,4,Z0.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Gu(4194308,4,i,s)},useInsertionEffect:function(i,s){Gu(4,2,i,s)},useMemo:function(i,s){var c=zr();s=s===void 0?null:s;var f=i();if(us){Kn(!0);try{i()}finally{Kn(!1)}}return c.memoizedState=[f,s],f},useReducer:function(i,s,c){var f=zr();if(c!==void 0){var b=c(s);if(us){Kn(!0);try{c(s)}finally{Kn(!1)}}}else b=s;return f.memoizedState=f.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},f.queue=i,i=i.dispatch=nT.bind(null,Qe,i),[f.memoizedState,i]},useRef:function(i){var s=zr();return i={current:i},s.memoizedState=i},useState:function(i){i=vh(i);var s=i.queue,c=oN.bind(null,Qe,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:yh,useDeferredValue:function(i,s){var c=zr();return bh(c,i,s)},useTransition:function(){var i=vh(!1);return i=nN.bind(null,Qe,i.queue,!0,!1),zr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var f=Qe,b=zr();if(et){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),jt===null)throw Error(a(349));(Ze&127)!==0||M0(f,s,c)}b.memoizedState=c;var N={value:c,getSnapshot:s};return b.queue=N,Y0(k0.bind(null,f,N,i),[i]),f.flags|=2048,_l(9,{destroy:void 0},P0.bind(null,f,N,c,s),null),c},useId:function(){var i=zr(),s=jt.identifierPrefix;if(et){var c=Zn,f=Wn;c=(f&~(1<<32-Ar(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=$u++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=Xk++,s="_"+s+"r_"+c.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Nh,useFormState:F0,useActionState:F0,useOptimistic:function(i){var s=zr();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=_h.bind(null,Qe,!0,c),c.dispatch=s,[i,s]},useMemoCache:mh,useCacheRefresh:function(){return zr().memoizedState=rT.bind(null,Qe)},useEffectEvent:function(i){var s=zr(),c={impl:i};return s.memoizedState=c,function(){if((st&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},Sh={readContext:hr,use:Uu,useCallback:eN,useContext:hr,useEffect:xh,useImperativeHandle:J0,useInsertionEffect:X0,useLayoutEffect:W0,useMemo:tN,useReducer:Fu,useRef:V0,useState:function(){return Fu(ja)},useDebugValue:yh,useDeferredValue:function(i,s){var c=Ut();return rN(c,mt.memoizedState,i,s)},useTransition:function(){var i=Fu(ja)[0],s=Ut().memoizedState;return[typeof i=="boolean"?i:Ro(i),s]},useSyncExternalStore:D0,useId:sN,useHostTransitionStatus:Nh,useFormState:G0,useActionState:G0,useOptimistic:function(i,s){var c=Ut();return R0(c,mt,i,s)},useMemoCache:mh,useCacheRefresh:lN};Sh.useEffectEvent=K0;var fN={readContext:hr,use:Uu,useCallback:eN,useContext:hr,useEffect:xh,useImperativeHandle:J0,useInsertionEffect:X0,useLayoutEffect:W0,useMemo:tN,useReducer:hh,useRef:V0,useState:function(){return hh(ja)},useDebugValue:yh,useDeferredValue:function(i,s){var c=Ut();return mt===null?bh(c,i,s):rN(c,mt.memoizedState,i,s)},useTransition:function(){var i=hh(ja)[0],s=Ut().memoizedState;return[typeof i=="boolean"?i:Ro(i),s]},useSyncExternalStore:D0,useId:sN,useHostTransitionStatus:Nh,useFormState:Q0,useActionState:Q0,useOptimistic:function(i,s){var c=Ut();return mt!==null?R0(c,mt,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:mh,useCacheRefresh:lN};fN.useEffectEvent=K0;function wh(i,s,c,f){s=i.memoizedState,c=c(f,s),c=c==null?s:v({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ch={enqueueSetState:function(i,s,c){i=i._reactInternals;var f=rn(),b=mi(f);b.payload=s,c!=null&&(b.callback=c),s=pi(i,b,f),s!==null&&(Fr(s,i,f),Po(s,i,f))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var f=rn(),b=mi(f);b.tag=1,b.payload=s,c!=null&&(b.callback=c),s=pi(i,b,f),s!==null&&(Fr(s,i,f),Po(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=rn(),f=mi(c);f.tag=2,s!=null&&(f.callback=s),s=pi(i,f,c),s!==null&&(Fr(s,i,c),Po(s,i,c))}};function mN(i,s,c,f,b,N,z){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,N,z):s.prototype&&s.prototype.isPureReactComponent?!wo(c,f)||!wo(b,N):!0}function pN(i,s,c,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==i&&Ch.enqueueReplaceState(s,s.state,null)}function ds(i,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(i=i.defaultProps){c===s&&(c=v({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}function hN(i){Su(i)}function vN(i){console.error(i)}function gN(i){Su(i)}function Vu(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function xN(i,s,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Eh(i,s,c){return c=mi(c),c.tag=3,c.payload={element:null},c.callback=function(){Vu(i,s)},c}function yN(i){return i=mi(i),i.tag=3,i}function bN(i,s,c,f){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var N=f.value;i.payload=function(){return b(N)},i.callback=function(){xN(s,c,f)}}var z=c.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(i.callback=function(){xN(s,c,f),typeof b!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var P=f.stack;this.componentDidCatch(f.value,{componentStack:P!==null?P:""})})}function aT(i,s,c,f,b){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&hl(s,c,b,!0),c=Zr.current,c!==null){switch(c.tag){case 31:case 13:return xn===null?id():c.alternate===null&&Tt===0&&(Tt=3),c.flags&=-257,c.flags|=65536,c.lanes=b,f===ku?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),Zh(i,f,b)),!1;case 22:return c.flags|=65536,f===ku?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),Zh(i,f,b)),!1}throw Error(a(435,c.tag))}return Zh(i,f,b),id(),!1}if(et)return s=Zr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,f!==Qp&&(i=Error(a(422),{cause:f}),Ao(pn(i,c)))):(f!==Qp&&(s=Error(a(423),{cause:f}),Ao(pn(s,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,f=pn(f,c),b=Eh(i.stateNode,f,b),nh(i,b),Tt!==4&&(Tt=2)),!1;var N=Error(a(520),{cause:f});if(N=pn(N,c),Vo===null?Vo=[N]:Vo.push(N),Tt!==4&&(Tt=2),s===null)return!0;f=pn(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=Eh(c.stateNode,f,i),nh(c,i),!1;case 1:if(s=c.type,N=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(bi===null||!bi.has(N))))return c.flags|=65536,b&=-b,c.lanes|=b,b=yN(b),bN(b,i,c,f),nh(c,b),!1}c=c.return}while(c!==null);return!1}var Ah=Error(a(461)),Vt=!1;function vr(i,s,c,f){s.child=i===null?S0(s,null,c,f):cs(s,i.child,c,f)}function jN(i,s,c,f,b){c=c.render;var N=s.ref;if("ref"in f){var z={};for(var P in f)P!=="ref"&&(z[P]=f[P])}else z=f;return is(s),f=ch(i,s,c,z,N,b),P=uh(),i!==null&&!Vt?(dh(i,s,b),Na(i,s,b)):(et&&P&&Gp(s),s.flags|=1,vr(i,s,f,b),s.child)}function NN(i,s,c,f,b){if(i===null){var N=c.type;return typeof N=="function"&&!Bp(N)&&N.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=N,_N(i,s,N,f,b)):(i=Au(c.type,null,f,s,s.mode,b),i.ref=s.ref,i.return=s,s.child=i)}if(N=i.child,!qh(i,b)){var z=N.memoizedProps;if(c=c.compare,c=c!==null?c:wo,c(z,f)&&i.ref===s.ref)return Na(i,s,b)}return s.flags|=1,i=va(N,f),i.ref=s.ref,i.return=s,s.child=i}function _N(i,s,c,f,b){if(i!==null){var N=i.memoizedProps;if(wo(N,f)&&i.ref===s.ref)if(Vt=!1,s.pendingProps=f=N,qh(i,b))(i.flags&131072)!==0&&(Vt=!0);else return s.lanes=i.lanes,Na(i,s,b)}return zh(i,s,c,f,b)}function SN(i,s,c,f){var b=f.children,N=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(N=N!==null?N.baseLanes|c:c,i!==null){for(f=s.child=i.child,b=0;f!==null;)b=b|f.lanes|f.childLanes,f=f.sibling;f=b&~N}else f=0,s.child=null;return wN(i,s,N,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Mu(s,N!==null?N.cachePool:null),N!==null?E0(s,N):ih(),A0(s);else return f=s.lanes=536870912,wN(i,s,N!==null?N.baseLanes|c:c,c,f)}else N!==null?(Mu(s,N.cachePool),E0(s,N),vi(),s.memoizedState=null):(i!==null&&Mu(s,null),ih(),vi());return vr(i,s,b,c),s.child}function $o(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function wN(i,s,c,f,b){var N=Jp();return N=N===null?null:{parent:Ht._currentValue,pool:N},s.memoizedState={baseLanes:c,cachePool:N},i!==null&&Mu(s,null),ih(),A0(s),i!==null&&hl(i,s,f,!0),s.childLanes=b,null}function Yu(i,s){return s=Xu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function CN(i,s,c){return cs(s,i.child,null,c),i=Yu(s,s.pendingProps),i.flags|=2,Jr(s),s.memoizedState=null,i}function iT(i,s,c){var f=s.pendingProps,b=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(et){if(f.mode==="hidden")return i=Yu(s,f),s.lanes=536870912,$o(null,i);if(lh(s),(i=wt)?(i=I_(i,gn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:oi!==null?{id:Wn,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},c=c0(i),c.return=s,s.child=c,pr=s,wt=null)):i=null,i===null)throw ui(s);return s.lanes=536870912,null}return Yu(s,f)}var N=i.memoizedState;if(N!==null){var z=N.dehydrated;if(lh(s),b)if(s.flags&256)s.flags&=-257,s=CN(i,s,c);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(a(558));else if(Vt||hl(i,s,c,!1),b=(c&i.childLanes)!==0,Vt||b){if(f=jt,f!==null&&(z=vj(f,c),z!==0&&z!==N.retryLane))throw N.retryLane=z,ts(i,z),Fr(f,i,z),Ah;id(),s=CN(i,s,c)}else i=N.treeContext,wt=yn(z.nextSibling),pr=s,et=!0,ci=null,gn=!1,i!==null&&f0(s,i),s=Yu(s,f),s.flags|=4096;return s}return i=va(i.child,{mode:f.mode,children:f.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Ku(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function zh(i,s,c,f,b){return is(s),c=ch(i,s,c,f,void 0,b),f=uh(),i!==null&&!Vt?(dh(i,s,b),Na(i,s,b)):(et&&f&&Gp(s),s.flags|=1,vr(i,s,c,b),s.child)}function EN(i,s,c,f,b,N){return is(s),s.updateQueue=null,c=O0(s,f,c,b),z0(i),f=uh(),i!==null&&!Vt?(dh(i,s,N),Na(i,s,N)):(et&&f&&Gp(s),s.flags|=1,vr(i,s,c,N),s.child)}function AN(i,s,c,f,b){if(is(s),s.stateNode===null){var N=dl,z=c.contextType;typeof z=="object"&&z!==null&&(N=hr(z)),N=new c(f,N),s.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Ch,s.stateNode=N,N._reactInternals=s,N=s.stateNode,N.props=f,N.state=s.memoizedState,N.refs={},th(s),z=c.contextType,N.context=typeof z=="object"&&z!==null?hr(z):dl,N.state=s.memoizedState,z=c.getDerivedStateFromProps,typeof z=="function"&&(wh(s,c,z,f),N.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(z=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),z!==N.state&&Ch.enqueueReplaceState(N,N.state,null),To(s,f,N,b),ko(),N.state=s.memoizedState),typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(i===null){N=s.stateNode;var P=s.memoizedProps,U=ds(c,P);N.props=U;var ie=N.context,ve=c.contextType;z=dl,typeof ve=="object"&&ve!==null&&(z=hr(ve));var be=c.getDerivedStateFromProps;ve=typeof be=="function"||typeof N.getSnapshotBeforeUpdate=="function",P=s.pendingProps!==P,ve||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(P||ie!==z)&&pN(s,N,f,z),fi=!1;var se=s.memoizedState;N.state=se,To(s,f,N,b),ko(),ie=s.memoizedState,P||se!==ie||fi?(typeof be=="function"&&(wh(s,c,be,f),ie=s.memoizedState),(U=fi||mN(s,c,U,f,se,ie,z))?(ve||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(s.flags|=4194308)):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=ie),N.props=f,N.state=ie,N.context=z,f=U):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{N=s.stateNode,rh(i,s),z=s.memoizedProps,ve=ds(c,z),N.props=ve,be=s.pendingProps,se=N.context,ie=c.contextType,U=dl,typeof ie=="object"&&ie!==null&&(U=hr(ie)),P=c.getDerivedStateFromProps,(ie=typeof P=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(z!==be||se!==U)&&pN(s,N,f,U),fi=!1,se=s.memoizedState,N.state=se,To(s,f,N,b),ko();var ue=s.memoizedState;z!==be||se!==ue||fi||i!==null&&i.dependencies!==null&&Ou(i.dependencies)?(typeof P=="function"&&(wh(s,c,P,f),ue=s.memoizedState),(ve=fi||mN(s,c,ve,f,se,ue,U)||i!==null&&i.dependencies!==null&&Ou(i.dependencies))?(ie||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(f,ue,U),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(f,ue,U)),typeof N.componentDidUpdate=="function"&&(s.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof N.componentDidUpdate!="function"||z===i.memoizedProps&&se===i.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&se===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=ue),N.props=f,N.state=ue,N.context=U,f=ve):(typeof N.componentDidUpdate!="function"||z===i.memoizedProps&&se===i.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&se===i.memoizedState||(s.flags|=1024),f=!1)}return N=f,Ku(i,s),f=(s.flags&128)!==0,N||f?(N=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:N.render(),s.flags|=1,i!==null&&f?(s.child=cs(s,i.child,null,b),s.child=cs(s,null,c,b)):vr(i,s,c,b),s.memoizedState=N.state,i=s.child):i=Na(i,s,b),i}function zN(i,s,c,f){return ns(),s.flags|=256,vr(i,s,c,f),s.child}var Oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dh(i){return{baseLanes:i,cachePool:x0()}}function Mh(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=tn),i}function ON(i,s,c){var f=s.pendingProps,b=!1,N=(s.flags&128)!==0,z;if((z=N)||(z=i!==null&&i.memoizedState===null?!1:(Bt.current&2)!==0),z&&(b=!0,s.flags&=-129),z=(s.flags&32)!==0,s.flags&=-33,i===null){if(et){if(b?hi(s):vi(),(i=wt)?(i=I_(i,gn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:oi!==null?{id:Wn,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},c=c0(i),c.return=s,s.child=c,pr=s,wt=null)):i=null,i===null)throw ui(s);return pv(i)?s.lanes=32:s.lanes=536870912,null}var P=f.children;return f=f.fallback,b?(vi(),b=s.mode,P=Xu({mode:"hidden",children:P},b),f=rs(f,b,c,null),P.return=s,f.return=s,P.sibling=f,s.child=P,f=s.child,f.memoizedState=Dh(c),f.childLanes=Mh(i,z,c),s.memoizedState=Oh,$o(null,f)):(hi(s),Ph(s,P))}var U=i.memoizedState;if(U!==null&&(P=U.dehydrated,P!==null)){if(N)s.flags&256?(hi(s),s.flags&=-257,s=kh(i,s,c)):s.memoizedState!==null?(vi(),s.child=i.child,s.flags|=128,s=null):(vi(),P=f.fallback,b=s.mode,f=Xu({mode:"visible",children:f.children},b),P=rs(P,b,c,null),P.flags|=2,f.return=s,P.return=s,f.sibling=P,s.child=f,cs(s,i.child,null,c),f=s.child,f.memoizedState=Dh(c),f.childLanes=Mh(i,z,c),s.memoizedState=Oh,s=$o(null,f));else if(hi(s),pv(P)){if(z=P.nextSibling&&P.nextSibling.dataset,z)var ie=z.dgst;z=ie,f=Error(a(419)),f.stack="",f.digest=z,Ao({value:f,source:null,stack:null}),s=kh(i,s,c)}else if(Vt||hl(i,s,c,!1),z=(c&i.childLanes)!==0,Vt||z){if(z=jt,z!==null&&(f=vj(z,c),f!==0&&f!==U.retryLane))throw U.retryLane=f,ts(i,f),Fr(z,i,f),Ah;mv(P)||id(),s=kh(i,s,c)}else mv(P)?(s.flags|=192,s.child=i.child,s=null):(i=U.treeContext,wt=yn(P.nextSibling),pr=s,et=!0,ci=null,gn=!1,i!==null&&f0(s,i),s=Ph(s,f.children),s.flags|=4096);return s}return b?(vi(),P=f.fallback,b=s.mode,U=i.child,ie=U.sibling,f=va(U,{mode:"hidden",children:f.children}),f.subtreeFlags=U.subtreeFlags&65011712,ie!==null?P=va(ie,P):(P=rs(P,b,c,null),P.flags|=2),P.return=s,f.return=s,f.sibling=P,s.child=f,$o(null,f),f=s.child,P=i.child.memoizedState,P===null?P=Dh(c):(b=P.cachePool,b!==null?(U=Ht._currentValue,b=b.parent!==U?{parent:U,pool:U}:b):b=x0(),P={baseLanes:P.baseLanes|c,cachePool:b}),f.memoizedState=P,f.childLanes=Mh(i,z,c),s.memoizedState=Oh,$o(i.child,f)):(hi(s),c=i.child,i=c.sibling,c=va(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,i!==null&&(z=s.deletions,z===null?(s.deletions=[i],s.flags|=16):z.push(i)),s.child=c,s.memoizedState=null,c)}function Ph(i,s){return s=Xu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Xu(i,s){return i=Wr(22,i,null,s),i.lanes=0,i}function kh(i,s,c){return cs(s,i.child,null,c),i=Ph(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function DN(i,s,c){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),Kp(i.return,s,c)}function Th(i,s,c,f,b,N){var z=i.memoizedState;z===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:b,treeForkCount:N}:(z.isBackwards=s,z.rendering=null,z.renderingStartTime=0,z.last=f,z.tail=c,z.tailMode=b,z.treeForkCount=N)}function MN(i,s,c){var f=s.pendingProps,b=f.revealOrder,N=f.tail;f=f.children;var z=Bt.current,P=(z&2)!==0;if(P?(z=z&1|2,s.flags|=128):z&=1,de(Bt,z),vr(i,s,f,c),f=et?Eo:0,!P&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&DN(i,c,s);else if(i.tag===19)DN(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(c=s.child,b=null;c!==null;)i=c.alternate,i!==null&&Iu(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=s.child,s.child=null):(b=c.sibling,c.sibling=null),Th(s,!1,b,c,N,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=s.child,s.child=null;b!==null;){if(i=b.alternate,i!==null&&Iu(i)===null){s.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}Th(s,!0,c,null,N,f);break;case"together":Th(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function Na(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),yi|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(hl(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(a(153));if(s.child!==null){for(i=s.child,c=va(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=va(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function qh(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Ou(i)))}function sT(i,s,c){switch(s.tag){case 3:Pe(s,s.stateNode.containerInfo),di(s,Ht,i.memoizedState.cache),ns();break;case 27:case 5:W(s);break;case 4:Pe(s,s.stateNode.containerInfo);break;case 10:di(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,lh(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(hi(s),s.flags|=128,null):(c&s.child.childLanes)!==0?ON(i,s,c):(hi(s),i=Na(i,s,c),i!==null?i.sibling:null);hi(s);break;case 19:var b=(i.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(hl(i,s,c,!1),f=(c&s.childLanes)!==0),b){if(f)return MN(i,s,c);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),de(Bt,Bt.current),f)break;return null;case 22:return s.lanes=0,SN(i,s,c,s.pendingProps);case 24:di(s,Ht,i.memoizedState.cache)}return Na(i,s,c)}function PN(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)Vt=!0;else{if(!qh(i,c)&&(s.flags&128)===0)return Vt=!1,sT(i,s,c);Vt=(i.flags&131072)!==0}else Vt=!1,et&&(s.flags&1048576)!==0&&d0(s,Eo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(i=ls(s.elementType),s.type=i,typeof i=="function")Bp(i)?(f=ds(i,f),s.tag=1,s=AN(null,s,i,f,c)):(s.tag=0,s=zh(null,s,i,f,c));else{if(i!=null){var b=i.$$typeof;if(b===E){s.tag=11,s=jN(null,s,i,f,c);break e}else if(b===T){s.tag=14,s=NN(null,s,i,f,c);break e}}throw s=Y(i)||i,Error(a(306,s,""))}}return s;case 0:return zh(i,s,s.type,s.pendingProps,c);case 1:return f=s.type,b=ds(f,s.pendingProps),AN(i,s,f,b,c);case 3:e:{if(Pe(s,s.stateNode.containerInfo),i===null)throw Error(a(387));f=s.pendingProps;var N=s.memoizedState;b=N.element,rh(i,s),To(s,f,null,c);var z=s.memoizedState;if(f=z.cache,di(s,Ht,f),f!==N.cache&&Xp(s,[Ht],c,!0),ko(),f=z.element,N.isDehydrated)if(N={element:f,isDehydrated:!1,cache:z.cache},s.updateQueue.baseState=N,s.memoizedState=N,s.flags&256){s=zN(i,s,f,c);break e}else if(f!==b){b=pn(Error(a(424)),s),Ao(b),s=zN(i,s,f,c);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,wt=yn(i.firstChild),pr=s,et=!0,ci=null,gn=!0,c=S0(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ns(),f===b){s=Na(i,s,c);break e}vr(i,s,f,c)}s=s.child}return s;case 26:return Ku(i,s),i===null?(c=G_(s.type,null,s.pendingProps,null))?s.memoizedState=c:et||(c=s.type,i=s.pendingProps,f=fd(V.current).createElement(c),f[mr]=s,f[Rr]=i,gr(f,c,i),nr(f),s.stateNode=f):s.memoizedState=G_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return W(s),i===null&&et&&(f=s.stateNode=B_(s.type,s.pendingProps,V.current),pr=s,gn=!0,b=wt,Si(s.type)?(hv=b,wt=yn(f.firstChild)):wt=b),vr(i,s,s.pendingProps.children,c),Ku(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&et&&((b=f=wt)&&(f=qT(f,s.type,s.pendingProps,gn),f!==null?(s.stateNode=f,pr=s,wt=yn(f.firstChild),gn=!1,b=!0):b=!1),b||ui(s)),W(s),b=s.type,N=s.pendingProps,z=i!==null?i.memoizedProps:null,f=N.children,uv(b,N)?f=null:z!==null&&uv(b,z)&&(s.flags|=32),s.memoizedState!==null&&(b=ch(i,s,Wk,null,null,c),tc._currentValue=b),Ku(i,s),vr(i,s,f,c),s.child;case 6:return i===null&&et&&((i=c=wt)&&(c=RT(c,s.pendingProps,gn),c!==null?(s.stateNode=c,pr=s,wt=null,i=!0):i=!1),i||ui(s)),null;case 13:return ON(i,s,c);case 4:return Pe(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=cs(s,null,f,c):vr(i,s,f,c),s.child;case 11:return jN(i,s,s.type,s.pendingProps,c);case 7:return vr(i,s,s.pendingProps,c),s.child;case 8:return vr(i,s,s.pendingProps.children,c),s.child;case 12:return vr(i,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,di(s,s.type,f.value),vr(i,s,f.children,c),s.child;case 9:return b=s.type._context,f=s.pendingProps.children,is(s),b=hr(b),f=f(b),s.flags|=1,vr(i,s,f,c),s.child;case 14:return NN(i,s,s.type,s.pendingProps,c);case 15:return _N(i,s,s.type,s.pendingProps,c);case 19:return MN(i,s,c);case 31:return iT(i,s,c);case 22:return SN(i,s,c,s.pendingProps);case 24:return is(s),f=hr(Ht),i===null?(b=Jp(),b===null&&(b=jt,N=Wp(),b.pooledCache=N,N.refCount++,N!==null&&(b.pooledCacheLanes|=c),b=N),s.memoizedState={parent:f,cache:b},th(s),di(s,Ht,b)):((i.lanes&c)!==0&&(rh(i,s),To(s,null,null,c),ko()),b=i.memoizedState,N=s.memoizedState,b.parent!==f?(b={parent:f,cache:f},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),di(s,Ht,f)):(f=N.cache,di(s,Ht,f),f!==b.cache&&Xp(s,[Ht],c,!0))),vr(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function _a(i){i.flags|=4}function Rh(i,s,c,f,b){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(s_())i.flags|=8192;else throw os=ku,eh}else i.flags&=-16777217}function kN(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!K_(s))if(s_())i.flags|=8192;else throw os=ku,eh}function Wu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ie():536870912,i.lanes|=s,El|=s)}function Bo(i,s){if(!et)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Ct(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(s)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,f|=b.subtreeFlags&65011712,f|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,f|=b.subtreeFlags,f|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=f,i.childLanes=c,s}function lT(i,s,c){var f=s.pendingProps;switch(Hp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(s),null;case 1:return Ct(s),null;case 3:return c=s.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),ya(Ht),le(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(pl(s)?_a(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Vp())),Ct(s),null;case 26:var b=s.type,N=s.memoizedState;return i===null?(_a(s),N!==null?(Ct(s),kN(s,N)):(Ct(s),Rh(s,b,null,f,c))):N?N!==i.memoizedState?(_a(s),Ct(s),kN(s,N)):(Ct(s),s.flags&=-16777217):(i=i.memoizedProps,i!==f&&_a(s),Ct(s),Rh(s,b,i,f,c)),null;case 27:if(G(s),c=V.current,b=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&_a(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return Ct(s),null}i=ge.current,pl(s)?m0(s):(i=B_(b,f,c),s.stateNode=i,_a(s))}return Ct(s),null;case 5:if(G(s),b=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&_a(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return Ct(s),null}if(N=ge.current,pl(s))m0(s);else{var z=fd(V.current);switch(N){case 1:N=z.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:N=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":N=z.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":N=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":N=z.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof f.is=="string"?z.createElement("select",{is:f.is}):z.createElement("select"),f.multiple?N.multiple=!0:f.size&&(N.size=f.size);break;default:N=typeof f.is=="string"?z.createElement(b,{is:f.is}):z.createElement(b)}}N[mr]=s,N[Rr]=f;e:for(z=s.child;z!==null;){if(z.tag===5||z.tag===6)N.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===s)break e;for(;z.sibling===null;){if(z.return===null||z.return===s)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}s.stateNode=N;e:switch(gr(N,b,f),b){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&_a(s)}}return Ct(s),Rh(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,c),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==f&&_a(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(a(166));if(i=V.current,pl(s)){if(i=s.stateNode,c=s.memoizedProps,f=null,b=pr,b!==null)switch(b.tag){case 27:case 5:f=b.memoizedProps}i[mr]=s,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||O_(i.nodeValue,c)),i||ui(s,!0)}else i=fd(i).createTextNode(f),i[mr]=s,s.stateNode=i}return Ct(s),null;case 31:if(c=s.memoizedState,i===null||i.memoizedState!==null){if(f=pl(s),c!==null){if(i===null){if(!f)throw Error(a(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[mr]=s}else ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),i=!1}else c=Vp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return s.flags&256?(Jr(s),s):(Jr(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Ct(s),null;case 13:if(f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=pl(s),f!==null&&f.dehydrated!==null){if(i===null){if(!b)throw Error(a(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(a(317));b[mr]=s}else ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),b=!1}else b=Vp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(Jr(s),s):(Jr(s),null)}return Jr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=s.child,b=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(b=f.alternate.memoizedState.cachePool.pool),N=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(N=f.memoizedState.cachePool.pool),N!==b&&(f.flags|=2048)),c!==i&&c&&(s.child.flags|=8192),Wu(s,s.updateQueue),Ct(s),null);case 4:return le(),i===null&&iv(s.stateNode.containerInfo),Ct(s),null;case 10:return ya(s.type),Ct(s),null;case 19:if(re(Bt),f=s.memoizedState,f===null)return Ct(s),null;if(b=(s.flags&128)!==0,N=f.rendering,N===null)if(b)Bo(f,!1);else{if(Tt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(N=Iu(i),N!==null){for(s.flags|=128,Bo(f,!1),i=N.updateQueue,s.updateQueue=i,Wu(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)o0(c,i),c=c.sibling;return de(Bt,Bt.current&1|2),et&&ga(s,f.treeForkCount),s.child}i=i.sibling}f.tail!==null&&Re()>rd&&(s.flags|=128,b=!0,Bo(f,!1),s.lanes=4194304)}else{if(!b)if(i=Iu(N),i!==null){if(s.flags|=128,b=!0,i=i.updateQueue,s.updateQueue=i,Wu(s,i),Bo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!N.alternate&&!et)return Ct(s),null}else 2*Re()-f.renderingStartTime>rd&&c!==536870912&&(s.flags|=128,b=!0,Bo(f,!1),s.lanes=4194304);f.isBackwards?(N.sibling=s.child,s.child=N):(i=f.last,i!==null?i.sibling=N:s.child=N,f.last=N)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Re(),i.sibling=null,c=Bt.current,de(Bt,b?c&1|2:c&1),et&&ga(s,f.treeForkCount),i):(Ct(s),null);case 22:case 23:return Jr(s),sh(),f=s.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(Ct(s),s.subtreeFlags&6&&(s.flags|=8192)):Ct(s),c=s.updateQueue,c!==null&&Wu(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),i!==null&&re(ss),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ya(Ht),Ct(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function oT(i,s){switch(Hp(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ya(Ht),le(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return G(s),null;case 31:if(s.memoizedState!==null){if(Jr(s),s.alternate===null)throw Error(a(340));ns()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Jr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(a(340));ns()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return re(Bt),null;case 4:return le(),null;case 10:return ya(s.type),null;case 22:case 23:return Jr(s),sh(),i!==null&&re(ss),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ya(Ht),null;case 25:return null;default:return null}}function TN(i,s){switch(Hp(s),s.tag){case 3:ya(Ht),le();break;case 26:case 27:case 5:G(s);break;case 4:le();break;case 31:s.memoizedState!==null&&Jr(s);break;case 13:Jr(s);break;case 19:re(Bt);break;case 10:ya(s.type);break;case 22:case 23:Jr(s),sh(),i!==null&&re(ss);break;case 24:ya(Ht)}}function Uo(i,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var b=f.next;c=b;do{if((c.tag&i)===i){f=void 0;var N=c.create,z=c.inst;f=N(),z.destroy=f}c=c.next}while(c!==b)}}catch(P){ut(s,s.return,P)}}function gi(i,s,c){try{var f=s.updateQueue,b=f!==null?f.lastEffect:null;if(b!==null){var N=b.next;f=N;do{if((f.tag&i)===i){var z=f.inst,P=z.destroy;if(P!==void 0){z.destroy=void 0,b=s;var U=c,ie=P;try{ie()}catch(ve){ut(b,U,ve)}}}f=f.next}while(f!==N)}}catch(ve){ut(s,s.return,ve)}}function qN(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{C0(s,c)}catch(f){ut(i,i.return,f)}}}function RN(i,s,c){c.props=ds(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){ut(i,s,f)}}function Fo(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(b){ut(i,s,b)}}function Jn(i,s){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(b){ut(i,s,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){ut(i,s,b)}else c.current=null}function IN(i){var s=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(b){ut(i,i.return,b)}}function Ih(i,s,c){try{var f=i.stateNode;OT(f,i.type,c,s),f[Rr]=s}catch(b){ut(i,i.return,b)}}function LN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Si(i.type)||i.tag===4}function Lh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||LN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Si(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $h(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=pa));else if(f!==4&&(f===27&&Si(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for($h(i,s,c),i=i.sibling;i!==null;)$h(i,s,c),i=i.sibling}function Zu(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(f!==4&&(f===27&&Si(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Zu(i,s,c),i=i.sibling;i!==null;)Zu(i,s,c),i=i.sibling}function $N(i){var s=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);gr(s,f,c),s[mr]=i,s[Rr]=c}catch(N){ut(i,i.return,N)}}var Sa=!1,Yt=!1,Bh=!1,BN=typeof WeakSet=="function"?WeakSet:Set,ar=null;function cT(i,s){if(i=i.containerInfo,ov=yd,i=Jj(i),kp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var b=f.anchorOffset,N=f.focusNode;f=f.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var z=0,P=-1,U=-1,ie=0,ve=0,be=i,se=null;t:for(;;){for(var ue;be!==c||b!==0&&be.nodeType!==3||(P=z+b),be!==N||f!==0&&be.nodeType!==3||(U=z+f),be.nodeType===3&&(z+=be.nodeValue.length),(ue=be.firstChild)!==null;)se=be,be=ue;for(;;){if(be===i)break t;if(se===c&&++ie===b&&(P=z),se===N&&++ve===f&&(U=z),(ue=be.nextSibling)!==null)break;be=se,se=be.parentNode}be=ue}c=P===-1||U===-1?null:{start:P,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(cv={focusedElem:i,selectionRange:c},yd=!1,ar=s;ar!==null;)if(s=ar,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ar=i;else for(;ar!==null;){switch(s=ar,N=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)b=i[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&N!==null){i=void 0,c=s,b=N.memoizedProps,N=N.memoizedState,f=c.stateNode;try{var Ee=ds(c.type,b);i=f.getSnapshotBeforeUpdate(Ee,N),f.__reactInternalSnapshotBeforeUpdate=i}catch($e){ut(c,c.return,$e)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)fv(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":fv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=s.sibling,i!==null){i.return=s.return,ar=i;break}ar=s.return}}function UN(i,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Ca(i,c),f&4&&Uo(5,c);break;case 1:if(Ca(i,c),f&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(z){ut(c,c.return,z)}else{var b=ds(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(b,s,i.__reactInternalSnapshotBeforeUpdate)}catch(z){ut(c,c.return,z)}}f&64&&qN(c),f&512&&Fo(c,c.return);break;case 3:if(Ca(i,c),f&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{C0(i,s)}catch(z){ut(c,c.return,z)}}break;case 27:s===null&&f&4&&$N(c);case 26:case 5:Ca(i,c),s===null&&f&4&&IN(c),f&512&&Fo(c,c.return);break;case 12:Ca(i,c);break;case 31:Ca(i,c),f&4&&HN(i,c);break;case 13:Ca(i,c),f&4&&QN(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=xT.bind(null,c),IT(i,c))));break;case 22:if(f=c.memoizedState!==null||Sa,!f){s=s!==null&&s.memoizedState!==null||Yt,b=Sa;var N=Yt;Sa=f,(Yt=s)&&!N?Ea(i,c,(c.subtreeFlags&8772)!==0):Ca(i,c),Sa=b,Yt=N}break;case 30:break;default:Ca(i,c)}}function FN(i){var s=i.alternate;s!==null&&(i.alternate=null,FN(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&gp(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var At=null,Lr=!1;function wa(i,s,c){for(c=c.child;c!==null;)GN(i,s,c),c=c.sibling}function GN(i,s,c){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Nr,c)}catch{}switch(c.tag){case 26:Yt||Jn(c,s),wa(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Yt||Jn(c,s);var f=At,b=Lr;Si(c.type)&&(At=c.stateNode,Lr=!1),wa(i,s,c),Zo(c.stateNode),At=f,Lr=b;break;case 5:Yt||Jn(c,s);case 6:if(f=At,b=Lr,At=null,wa(i,s,c),At=f,Lr=b,At!==null)if(Lr)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(c.stateNode)}catch(N){ut(c,s,N)}else try{At.removeChild(c.stateNode)}catch(N){ut(c,s,N)}break;case 18:At!==null&&(Lr?(i=At,q_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Tl(i)):q_(At,c.stateNode));break;case 4:f=At,b=Lr,At=c.stateNode.containerInfo,Lr=!0,wa(i,s,c),At=f,Lr=b;break;case 0:case 11:case 14:case 15:gi(2,c,s),Yt||gi(4,c,s),wa(i,s,c);break;case 1:Yt||(Jn(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&RN(c,s,f)),wa(i,s,c);break;case 21:wa(i,s,c);break;case 22:Yt=(f=Yt)||c.memoizedState!==null,wa(i,s,c),Yt=f;break;default:wa(i,s,c)}}function HN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Tl(i)}catch(c){ut(s,s.return,c)}}}function QN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Tl(i)}catch(c){ut(s,s.return,c)}}function uT(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new BN),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new BN),s;default:throw Error(a(435,i.tag))}}function Ju(i,s){var c=uT(i);s.forEach(function(f){if(!c.has(f)){c.add(f);var b=yT.bind(null,i,f);f.then(b,b)}})}function $r(i,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var b=c[f],N=i,z=s,P=z;e:for(;P!==null;){switch(P.tag){case 27:if(Si(P.type)){At=P.stateNode,Lr=!1;break e}break;case 5:At=P.stateNode,Lr=!1;break e;case 3:case 4:At=P.stateNode.containerInfo,Lr=!0;break e}P=P.return}if(At===null)throw Error(a(160));GN(N,z,b),At=null,Lr=!1,N=b.alternate,N!==null&&(N.return=null),b.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)VN(s,i),s=s.sibling}var qn=null;function VN(i,s){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$r(s,i),Br(i),f&4&&(gi(3,i,i.return),Uo(3,i),gi(5,i,i.return));break;case 1:$r(s,i),Br(i),f&512&&(Yt||c===null||Jn(c,c.return)),f&64&&Sa&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var b=qn;if($r(s,i),Br(i),f&512&&(Yt||c===null||Jn(c,c.return)),f&4){var N=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(f){case"title":N=b.getElementsByTagName("title")[0],(!N||N[vo]||N[mr]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=b.createElement(f),b.head.insertBefore(N,b.querySelector("head > title"))),gr(N,f,c),N[mr]=i,nr(N),f=N;break e;case"link":var z=V_("link","href",b).get(f+(c.href||""));if(z){for(var P=0;P<z.length;P++)if(N=z[P],N.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&N.getAttribute("rel")===(c.rel==null?null:c.rel)&&N.getAttribute("title")===(c.title==null?null:c.title)&&N.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){z.splice(P,1);break t}}N=b.createElement(f),gr(N,f,c),b.head.appendChild(N);break;case"meta":if(z=V_("meta","content",b).get(f+(c.content||""))){for(P=0;P<z.length;P++)if(N=z[P],N.getAttribute("content")===(c.content==null?null:""+c.content)&&N.getAttribute("name")===(c.name==null?null:c.name)&&N.getAttribute("property")===(c.property==null?null:c.property)&&N.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&N.getAttribute("charset")===(c.charSet==null?null:c.charSet)){z.splice(P,1);break t}}N=b.createElement(f),gr(N,f,c),b.head.appendChild(N);break;default:throw Error(a(468,f))}N[mr]=i,nr(N),f=N}i.stateNode=f}else Y_(b,i.type,i.stateNode);else i.stateNode=Q_(b,f,i.memoizedProps);else N!==f?(N===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):N.count--,f===null?Y_(b,i.type,i.stateNode):Q_(b,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Ih(i,i.memoizedProps,c.memoizedProps)}break;case 27:$r(s,i),Br(i),f&512&&(Yt||c===null||Jn(c,c.return)),c!==null&&f&4&&Ih(i,i.memoizedProps,c.memoizedProps);break;case 5:if($r(s,i),Br(i),f&512&&(Yt||c===null||Jn(c,c.return)),i.flags&32){b=i.stateNode;try{al(b,"")}catch(Ee){ut(i,i.return,Ee)}}f&4&&i.stateNode!=null&&(b=i.memoizedProps,Ih(i,b,c!==null?c.memoizedProps:b)),f&1024&&(Bh=!0);break;case 6:if($r(s,i),Br(i),f&4){if(i.stateNode===null)throw Error(a(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Ee){ut(i,i.return,Ee)}}break;case 3:if(hd=null,b=qn,qn=md(s.containerInfo),$r(s,i),qn=b,Br(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Tl(s.containerInfo)}catch(Ee){ut(i,i.return,Ee)}Bh&&(Bh=!1,YN(i));break;case 4:f=qn,qn=md(i.stateNode.containerInfo),$r(s,i),Br(i),qn=f;break;case 12:$r(s,i),Br(i);break;case 31:$r(s,i),Br(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ju(i,f)));break;case 13:$r(s,i),Br(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(td=Re()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ju(i,f)));break;case 22:b=i.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,ie=Sa,ve=Yt;if(Sa=ie||b,Yt=ve||U,$r(s,i),Yt=ve,Sa=ie,Br(i),f&8192)e:for(s=i.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(c===null||U||Sa||Yt||fs(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){U=c=s;try{if(N=U.stateNode,b)z=N.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{P=U.stateNode;var be=U.memoizedProps.style,se=be!=null&&be.hasOwnProperty("display")?be.display:null;P.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ee){ut(U,U.return,Ee)}}}else if(s.tag===6){if(c===null){U=s;try{U.stateNode.nodeValue=b?"":U.memoizedProps}catch(Ee){ut(U,U.return,Ee)}}}else if(s.tag===18){if(c===null){U=s;try{var ue=U.stateNode;b?R_(ue,!0):R_(U.stateNode,!1)}catch(Ee){ut(U,U.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Ju(i,c))));break;case 19:$r(s,i),Br(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ju(i,f)));break;case 30:break;case 21:break;default:$r(s,i),Br(i)}}function Br(i){var s=i.flags;if(s&2){try{for(var c,f=i.return;f!==null;){if(LN(f)){c=f;break}f=f.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var b=c.stateNode,N=Lh(i);Zu(i,N,b);break;case 5:var z=c.stateNode;c.flags&32&&(al(z,""),c.flags&=-33);var P=Lh(i);Zu(i,P,z);break;case 3:case 4:var U=c.stateNode.containerInfo,ie=Lh(i);$h(i,ie,U);break;default:throw Error(a(161))}}catch(ve){ut(i,i.return,ve)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function YN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;YN(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Ca(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)UN(i,s.alternate,s),s=s.sibling}function fs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:gi(4,s,s.return),fs(s);break;case 1:Jn(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&RN(s,s.return,c),fs(s);break;case 27:Zo(s.stateNode);case 26:case 5:Jn(s,s.return),fs(s);break;case 22:s.memoizedState===null&&fs(s);break;case 30:fs(s);break;default:fs(s)}i=i.sibling}}function Ea(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,b=i,N=s,z=N.flags;switch(N.tag){case 0:case 11:case 15:Ea(b,N,c),Uo(4,N);break;case 1:if(Ea(b,N,c),f=N,b=f.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ie){ut(f,f.return,ie)}if(f=N,b=f.updateQueue,b!==null){var P=f.stateNode;try{var U=b.shared.hiddenCallbacks;if(U!==null)for(b.shared.hiddenCallbacks=null,b=0;b<U.length;b++)w0(U[b],P)}catch(ie){ut(f,f.return,ie)}}c&&z&64&&qN(N),Fo(N,N.return);break;case 27:$N(N);case 26:case 5:Ea(b,N,c),c&&f===null&&z&4&&IN(N),Fo(N,N.return);break;case 12:Ea(b,N,c);break;case 31:Ea(b,N,c),c&&z&4&&HN(b,N);break;case 13:Ea(b,N,c),c&&z&4&&QN(b,N);break;case 22:N.memoizedState===null&&Ea(b,N,c),Fo(N,N.return);break;case 30:break;default:Ea(b,N,c)}s=s.sibling}}function Uh(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&zo(c))}function Fh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&zo(i))}function Rn(i,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)KN(i,s,c,f),s=s.sibling}function KN(i,s,c,f){var b=s.flags;switch(s.tag){case 0:case 11:case 15:Rn(i,s,c,f),b&2048&&Uo(9,s);break;case 1:Rn(i,s,c,f);break;case 3:Rn(i,s,c,f),b&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&zo(i)));break;case 12:if(b&2048){Rn(i,s,c,f),i=s.stateNode;try{var N=s.memoizedProps,z=N.id,P=N.onPostCommit;typeof P=="function"&&P(z,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){ut(s,s.return,U)}}else Rn(i,s,c,f);break;case 31:Rn(i,s,c,f);break;case 13:Rn(i,s,c,f);break;case 23:break;case 22:N=s.stateNode,z=s.alternate,s.memoizedState!==null?N._visibility&2?Rn(i,s,c,f):Go(i,s):N._visibility&2?Rn(i,s,c,f):(N._visibility|=2,Sl(i,s,c,f,(s.subtreeFlags&10256)!==0||!1)),b&2048&&Uh(z,s);break;case 24:Rn(i,s,c,f),b&2048&&Fh(s.alternate,s);break;default:Rn(i,s,c,f)}}function Sl(i,s,c,f,b){for(b=b&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var N=i,z=s,P=c,U=f,ie=z.flags;switch(z.tag){case 0:case 11:case 15:Sl(N,z,P,U,b),Uo(8,z);break;case 23:break;case 22:var ve=z.stateNode;z.memoizedState!==null?ve._visibility&2?Sl(N,z,P,U,b):Go(N,z):(ve._visibility|=2,Sl(N,z,P,U,b)),b&&ie&2048&&Uh(z.alternate,z);break;case 24:Sl(N,z,P,U,b),b&&ie&2048&&Fh(z.alternate,z);break;default:Sl(N,z,P,U,b)}s=s.sibling}}function Go(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,f=s,b=f.flags;switch(f.tag){case 22:Go(c,f),b&2048&&Uh(f.alternate,f);break;case 24:Go(c,f),b&2048&&Fh(f.alternate,f);break;default:Go(c,f)}s=s.sibling}}var Ho=8192;function wl(i,s,c){if(i.subtreeFlags&Ho)for(i=i.child;i!==null;)XN(i,s,c),i=i.sibling}function XN(i,s,c){switch(i.tag){case 26:wl(i,s,c),i.flags&Ho&&i.memoizedState!==null&&XT(c,qn,i.memoizedState,i.memoizedProps);break;case 5:wl(i,s,c);break;case 3:case 4:var f=qn;qn=md(i.stateNode.containerInfo),wl(i,s,c),qn=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Ho,Ho=16777216,wl(i,s,c),Ho=f):wl(i,s,c));break;default:wl(i,s,c)}}function WN(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Qo(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];ar=f,JN(f,i)}WN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ZN(i),i=i.sibling}function ZN(i){switch(i.tag){case 0:case 11:case 15:Qo(i),i.flags&2048&&gi(9,i,i.return);break;case 3:Qo(i);break;case 12:Qo(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ed(i)):Qo(i);break;default:Qo(i)}}function ed(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];ar=f,JN(f,i)}WN(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:gi(8,s,s.return),ed(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,ed(s));break;default:ed(s)}i=i.sibling}}function JN(i,s){for(;ar!==null;){var c=ar;switch(c.tag){case 0:case 11:case 15:gi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:zo(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,ar=f;else e:for(c=i;ar!==null;){f=ar;var b=f.sibling,N=f.return;if(FN(f),f===c){ar=null;break e}if(b!==null){b.return=N,ar=b;break e}ar=N}}}var dT={getCacheForType:function(i){var s=hr(Ht),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c},cacheSignal:function(){return hr(Ht).controller.signal}},fT=typeof WeakMap=="function"?WeakMap:Map,st=0,jt=null,Xe=null,Ze=0,ct=0,en=null,xi=!1,Cl=!1,Gh=!1,Aa=0,Tt=0,yi=0,ms=0,Hh=0,tn=0,El=0,Vo=null,Ur=null,Qh=!1,td=0,e_=0,rd=1/0,nd=null,bi=null,Jt=0,ji=null,Al=null,za=0,Vh=0,Yh=null,t_=null,Yo=0,Kh=null;function rn(){return(st&2)!==0&&Ze!==0?Ze&-Ze:q.T!==null?tv():gj()}function r_(){if(tn===0)if((Ze&536870912)===0||et){var i=Xs;Xs<<=1,(Xs&3932160)===0&&(Xs=262144),tn=i}else tn=536870912;return i=Zr.current,i!==null&&(i.flags|=32),tn}function Fr(i,s,c){(i===jt&&(ct===2||ct===9)||i.cancelPendingCommit!==null)&&(zl(i,0),Ni(i,Ze,tn,!1)),_r(i,c),((st&2)===0||i!==jt)&&(i===jt&&((st&2)===0&&(ms|=c),Tt===4&&Ni(i,Ze,tn,!1)),ea(i))}function n_(i,s,c){if((st&6)!==0)throw Error(a(327));var f=!c&&(s&127)===0&&(s&i.expiredLanes)===0||Ki(i,s),b=f?hT(i,s):Wh(i,s,!0),N=f;do{if(b===0){Cl&&!f&&Ni(i,s,0,!1);break}else{if(c=i.current.alternate,N&&!mT(c)){b=Wh(i,s,!1),N=!1;continue}if(b===2){if(N=s,i.errorRecoveryDisabledLanes&N)var z=0;else z=i.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){s=z;e:{var P=i;b=Vo;var U=P.current.memoizedState.isDehydrated;if(U&&(zl(P,z).flags|=256),z=Wh(P,z,!1),z!==2){if(Gh&&!U){P.errorRecoveryDisabledLanes|=N,ms|=N,b=4;break e}N=Ur,Ur=b,N!==null&&(Ur===null?Ur=N:Ur.push.apply(Ur,N))}b=z}if(N=!1,b!==2)continue}}if(b===1){zl(i,0),Ni(i,s,0,!0);break}e:{switch(f=i,N=b,N){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Ni(f,s,tn,!xi);break e;case 2:Ur=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(b=td+300-Re(),10<b)){if(Ni(f,s,tn,!xi),Xn(f,0,!0)!==0)break e;za=s,f.timeoutHandle=k_(a_.bind(null,f,c,Ur,nd,Qh,s,tn,ms,El,xi,N,"Throttled",-0,0),b);break e}a_(f,c,Ur,nd,Qh,s,tn,ms,El,xi,N,null,-0,0)}}break}while(!0);ea(i)}function a_(i,s,c,f,b,N,z,P,U,ie,ve,be,se,ue){if(i.timeoutHandle=-1,be=s.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},XN(s,N,be);var Ee=(N&62914560)===N?td-Re():(N&4194048)===N?e_-Re():0;if(Ee=WT(be,Ee),Ee!==null){za=N,i.cancelPendingCommit=Ee(f_.bind(null,i,s,N,c,f,b,z,P,U,ve,be,null,se,ue)),Ni(i,N,z,!ie);return}}f_(i,s,N,c,f,b,z,P,U)}function mT(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var b=c[f],N=b.getSnapshot;b=b.value;try{if(!Xr(N(),b))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ni(i,s,c,f){s&=~Hh,s&=~ms,i.suspendedLanes|=s,i.pingedLanes&=~s,f&&(i.warmLanes|=s),f=i.expirationTimes;for(var b=s;0<b;){var N=31-Ar(b),z=1<<N;f[N]=-1,b&=~z}c!==0&&Xi(i,c,s)}function ad(){return(st&6)===0?(Ko(0),!1):!0}function Xh(){if(Xe!==null){if(ct===0)var i=Xe.return;else i=Xe,xa=as=null,fh(i),yl=null,Do=0,i=Xe;for(;i!==null;)TN(i.alternate,i),i=i.return;Xe=null}}function zl(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,PT(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),za=0,Xh(),jt=i,Xe=c=va(i.current,null),Ze=s,ct=0,en=null,xi=!1,Cl=Ki(i,s),Gh=!1,El=tn=Hh=ms=yi=Tt=0,Ur=Vo=null,Qh=!1,(s&8)!==0&&(s|=s&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=s;0<f;){var b=31-Ar(f),N=1<<b;s|=i[b],f&=~N}return Aa=s,wu(),c}function i_(i,s){Qe=null,q.H=Lo,s===xl||s===Pu?(s=j0(),ct=3):s===eh?(s=j0(),ct=4):ct=s===Ah?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,en=s,Xe===null&&(Tt=1,Vu(i,pn(s,i.current)))}function s_(){var i=Zr.current;return i===null?!0:(Ze&4194048)===Ze?xn===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?i===xn:!1}function l_(){var i=q.H;return q.H=Lo,i===null?Lo:i}function o_(){var i=q.A;return q.A=dT,i}function id(){Tt=4,xi||(Ze&4194048)!==Ze&&Zr.current!==null||(Cl=!0),(yi&134217727)===0&&(ms&134217727)===0||jt===null||Ni(jt,Ze,tn,!1)}function Wh(i,s,c){var f=st;st|=2;var b=l_(),N=o_();(jt!==i||Ze!==s)&&(nd=null,zl(i,s)),s=!1;var z=Tt;e:do try{if(ct!==0&&Xe!==null){var P=Xe,U=en;switch(ct){case 8:Xh(),z=6;break e;case 3:case 2:case 9:case 6:Zr.current===null&&(s=!0);var ie=ct;if(ct=0,en=null,Ol(i,P,U,ie),c&&Cl){z=0;break e}break;default:ie=ct,ct=0,en=null,Ol(i,P,U,ie)}}pT(),z=Tt;break}catch(ve){i_(i,ve)}while(!0);return s&&i.shellSuspendCounter++,xa=as=null,st=f,q.H=b,q.A=N,Xe===null&&(jt=null,Ze=0,wu()),z}function pT(){for(;Xe!==null;)c_(Xe)}function hT(i,s){var c=st;st|=2;var f=l_(),b=o_();jt!==i||Ze!==s?(nd=null,rd=Re()+500,zl(i,s)):Cl=Ki(i,s);e:do try{if(ct!==0&&Xe!==null){s=Xe;var N=en;t:switch(ct){case 1:ct=0,en=null,Ol(i,s,N,1);break;case 2:case 9:if(y0(N)){ct=0,en=null,u_(s);break}s=function(){ct!==2&&ct!==9||jt!==i||(ct=7),ea(i)},N.then(s,s);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:y0(N)?(ct=0,en=null,u_(s)):(ct=0,en=null,Ol(i,s,N,7));break;case 5:var z=null;switch(Xe.tag){case 26:z=Xe.memoizedState;case 5:case 27:var P=Xe;if(z?K_(z):P.stateNode.complete){ct=0,en=null;var U=P.sibling;if(U!==null)Xe=U;else{var ie=P.return;ie!==null?(Xe=ie,sd(ie)):Xe=null}break t}}ct=0,en=null,Ol(i,s,N,5);break;case 6:ct=0,en=null,Ol(i,s,N,6);break;case 8:Xh(),Tt=6;break e;default:throw Error(a(462))}}vT();break}catch(ve){i_(i,ve)}while(!0);return xa=as=null,q.H=f,q.A=b,st=c,Xe!==null?0:(jt=null,Ze=0,wu(),Tt)}function vT(){for(;Xe!==null&&!me();)c_(Xe)}function c_(i){var s=PN(i.alternate,i,Aa);i.memoizedProps=i.pendingProps,s===null?sd(i):Xe=s}function u_(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=EN(c,s,s.pendingProps,s.type,void 0,Ze);break;case 11:s=EN(c,s,s.pendingProps,s.type.render,s.ref,Ze);break;case 5:fh(s);default:TN(c,s),s=Xe=o0(s,Aa),s=PN(c,s,Aa)}i.memoizedProps=i.pendingProps,s===null?sd(i):Xe=s}function Ol(i,s,c,f){xa=as=null,fh(s),yl=null,Do=0;var b=s.return;try{if(aT(i,b,s,c,Ze)){Tt=1,Vu(i,pn(c,i.current)),Xe=null;return}}catch(N){if(b!==null)throw Xe=b,N;Tt=1,Vu(i,pn(c,i.current)),Xe=null;return}s.flags&32768?(et||f===1?i=!0:Cl||(Ze&536870912)!==0?i=!1:(xi=i=!0,(f===2||f===9||f===3||f===6)&&(f=Zr.current,f!==null&&f.tag===13&&(f.flags|=16384))),d_(s,i)):sd(s)}function sd(i){var s=i;do{if((s.flags&32768)!==0){d_(s,xi);return}i=s.return;var c=lT(s.alternate,s,Aa);if(c!==null){Xe=c;return}if(s=s.sibling,s!==null){Xe=s;return}Xe=s=i}while(s!==null);Tt===0&&(Tt=5)}function d_(i,s){do{var c=oT(i.alternate,i);if(c!==null){c.flags&=32767,Xe=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=c}while(i!==null);Tt=6,Xe=null}function f_(i,s,c,f,b,N,z,P,U){i.cancelPendingCommit=null;do ld();while(Jt!==0);if((st&6)!==0)throw Error(a(327));if(s!==null){if(s===i.current)throw Error(a(177));if(N=s.lanes|s.childLanes,N|=Lp,ho(i,c,N,z,P,U),i===jt&&(Xe=jt=null,Ze=0),Al=s,ji=i,za=c,Vh=N,Yh=b,t_=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bT(lt,function(){return g_(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=q.T,q.T=null,b=Z.p,Z.p=2,z=st,st|=4;try{cT(i,s,c)}finally{st=z,Z.p=b,q.T=f}}Jt=1,m_(),p_(),h_()}}function m_(){if(Jt===1){Jt=0;var i=ji,s=Al,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var f=Z.p;Z.p=2;var b=st;st|=4;try{VN(s,i);var N=cv,z=Jj(i.containerInfo),P=N.focusedElem,U=N.selectionRange;if(z!==P&&P&&P.ownerDocument&&Zj(P.ownerDocument.documentElement,P)){if(U!==null&&kp(P)){var ie=U.start,ve=U.end;if(ve===void 0&&(ve=ie),"selectionStart"in P)P.selectionStart=ie,P.selectionEnd=Math.min(ve,P.value.length);else{var be=P.ownerDocument||document,se=be&&be.defaultView||window;if(se.getSelection){var ue=se.getSelection(),Ee=P.textContent.length,$e=Math.min(U.start,Ee),ht=U.end===void 0?$e:Math.min(U.end,Ee);!ue.extend&&$e>ht&&(z=ht,ht=$e,$e=z);var ee=Wj(P,$e),K=Wj(P,ht);if(ee&&K&&(ue.rangeCount!==1||ue.anchorNode!==ee.node||ue.anchorOffset!==ee.offset||ue.focusNode!==K.node||ue.focusOffset!==K.offset)){var ae=be.createRange();ae.setStart(ee.node,ee.offset),ue.removeAllRanges(),$e>ht?(ue.addRange(ae),ue.extend(K.node,K.offset)):(ae.setEnd(K.node,K.offset),ue.addRange(ae))}}}}for(be=[],ue=P;ue=ue.parentNode;)ue.nodeType===1&&be.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<be.length;P++){var xe=be[P];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}yd=!!ov,cv=ov=null}finally{st=b,Z.p=f,q.T=c}}i.current=s,Jt=2}}function p_(){if(Jt===2){Jt=0;var i=ji,s=Al,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var f=Z.p;Z.p=2;var b=st;st|=4;try{UN(i,s.alternate,s)}finally{st=b,Z.p=f,q.T=c}}Jt=3}}function h_(){if(Jt===4||Jt===3){Jt=0,ze();var i=ji,s=Al,c=za,f=t_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Jt=5:(Jt=0,Al=ji=null,v_(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(bi=null),hp(c),s=s.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Nr,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=q.T,b=Z.p,Z.p=2,q.T=null;try{for(var N=i.onRecoverableError,z=0;z<f.length;z++){var P=f[z];N(P.value,{componentStack:P.stack})}}finally{q.T=s,Z.p=b}}(za&3)!==0&&ld(),ea(i),b=i.pendingLanes,(c&261930)!==0&&(b&42)!==0?i===Kh?Yo++:(Yo=0,Kh=i):Yo=0,Ko(0)}}function v_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,zo(s)))}function ld(){return m_(),p_(),h_(),g_()}function g_(){if(Jt!==5)return!1;var i=ji,s=Vh;Vh=0;var c=hp(za),f=q.T,b=Z.p;try{Z.p=32>c?32:c,q.T=null,c=Yh,Yh=null;var N=ji,z=za;if(Jt=0,Al=ji=null,za=0,(st&6)!==0)throw Error(a(331));var P=st;if(st|=4,ZN(N.current),KN(N,N.current,z,c),st=P,Ko(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Nr,N)}catch{}return!0}finally{Z.p=b,q.T=f,v_(i,s)}}function x_(i,s,c){s=pn(c,s),s=Eh(i.stateNode,s,2),i=pi(i,s,2),i!==null&&(_r(i,2),ea(i))}function ut(i,s,c){if(i.tag===3)x_(i,i,c);else for(;s!==null;){if(s.tag===3){x_(s,i,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(bi===null||!bi.has(f))){i=pn(c,i),c=yN(2),f=pi(s,c,2),f!==null&&(bN(c,f,s,i),_r(f,2),ea(f));break}}s=s.return}}function Zh(i,s,c){var f=i.pingCache;if(f===null){f=i.pingCache=new fT;var b=new Set;f.set(s,b)}else b=f.get(s),b===void 0&&(b=new Set,f.set(s,b));b.has(c)||(Gh=!0,b.add(c),i=gT.bind(null,i,s,c),s.then(i,i))}function gT(i,s,c){var f=i.pingCache;f!==null&&f.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,jt===i&&(Ze&c)===c&&(Tt===4||Tt===3&&(Ze&62914560)===Ze&&300>Re()-td?(st&2)===0&&zl(i,0):Hh|=c,El===Ze&&(El=0)),ea(i)}function y_(i,s){s===0&&(s=Ie()),i=ts(i,s),i!==null&&(_r(i,s),ea(i))}function xT(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),y_(i,c)}function yT(i,s){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(s),y_(i,c)}function bT(i,s){return Zt(i,s)}var od=null,Dl=null,Jh=!1,cd=!1,ev=!1,_i=0;function ea(i){i!==Dl&&i.next===null&&(Dl===null?od=Dl=i:Dl=Dl.next=i),cd=!0,Jh||(Jh=!0,NT())}function Ko(i,s){if(!ev&&cd){ev=!0;do for(var c=!1,f=od;f!==null;){if(i!==0){var b=f.pendingLanes;if(b===0)var N=0;else{var z=f.suspendedLanes,P=f.pingedLanes;N=(1<<31-Ar(42|i)+1)-1,N&=b&~(z&~P),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(c=!0,__(f,N))}else N=Ze,N=Xn(f,f===jt?N:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(N&3)===0||Ki(f,N)||(c=!0,__(f,N));f=f.next}while(c);ev=!1}}function jT(){b_()}function b_(){cd=Jh=!1;var i=0;_i!==0&&MT()&&(i=_i);for(var s=Re(),c=null,f=od;f!==null;){var b=f.next,N=j_(f,s);N===0?(f.next=null,c===null?od=b:c.next=b,b===null&&(Dl=c)):(c=f,(i!==0||(N&3)!==0)&&(cd=!0)),f=b}Jt!==0&&Jt!==5||Ko(i),_i!==0&&(_i=0)}function j_(i,s){for(var c=i.suspendedLanes,f=i.pingedLanes,b=i.expirationTimes,N=i.pendingLanes&-62914561;0<N;){var z=31-Ar(N),P=1<<z,U=b[z];U===-1?((P&c)===0||(P&f)!==0)&&(b[z]=ne(P,s)):U<=s&&(i.expiredLanes|=P),N&=~P}if(s=jt,c=Ze,c=Xn(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===s&&(ct===2||ct===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&kn(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ki(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(f!==null&&kn(f),hp(c)){case 2:case 8:c=Se;break;case 32:c=lt;break;case 268435456:c=Gt;break;default:c=lt}return f=N_.bind(null,i),c=Zt(c,f),i.callbackPriority=s,i.callbackNode=c,s}return f!==null&&f!==null&&kn(f),i.callbackPriority=2,i.callbackNode=null,2}function N_(i,s){if(Jt!==0&&Jt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(ld()&&i.callbackNode!==c)return null;var f=Ze;return f=Xn(i,i===jt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(n_(i,f,s),j_(i,Re()),i.callbackNode!=null&&i.callbackNode===c?N_.bind(null,i):null)}function __(i,s){if(ld())return null;n_(i,s,!0)}function NT(){kT(function(){(st&6)!==0?Zt(fe,jT):b_()})}function tv(){if(_i===0){var i=vl;i===0&&(i=Ks,Ks<<=1,(Ks&261888)===0&&(Ks=256)),_i=i}return _i}function S_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:gu(""+i)}function w_(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function _T(i,s,c,f,b){if(s==="submit"&&c&&c.stateNode===b){var N=S_((b[Rr]||null).action),z=f.submitter;z&&(s=(s=z[Rr]||null)?S_(s.formAction):z.getAttribute("formAction"),s!==null&&(N=s,z=null));var P=new ju("action","action",null,f,b);i.push({event:P,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(_i!==0){var U=z?w_(b,z):new FormData(b);jh(c,{pending:!0,data:U,method:b.method,action:N},null,U)}}else typeof N=="function"&&(P.preventDefault(),U=z?w_(b,z):new FormData(b),jh(c,{pending:!0,data:U,method:b.method,action:N},N,U))},currentTarget:b}]})}}for(var rv=0;rv<Ip.length;rv++){var nv=Ip[rv],ST=nv.toLowerCase(),wT=nv[0].toUpperCase()+nv.slice(1);Tn(ST,"on"+wT)}Tn(r0,"onAnimationEnd"),Tn(n0,"onAnimationIteration"),Tn(a0,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(Bk,"onTransitionRun"),Tn(Uk,"onTransitionStart"),Tn(Fk,"onTransitionCancel"),Tn(i0,"onTransitionEnd"),rl("onMouseEnter",["mouseout","mouseover"]),rl("onMouseLeave",["mouseout","mouseover"]),rl("onPointerEnter",["pointerout","pointerover"]),rl("onPointerLeave",["pointerout","pointerover"]),Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xo));function C_(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],b=f.event;f=f.listeners;e:{var N=void 0;if(s)for(var z=f.length-1;0<=z;z--){var P=f[z],U=P.instance,ie=P.currentTarget;if(P=P.listener,U!==N&&b.isPropagationStopped())break e;N=P,b.currentTarget=ie;try{N(b)}catch(ve){Su(ve)}b.currentTarget=null,N=U}else for(z=0;z<f.length;z++){if(P=f[z],U=P.instance,ie=P.currentTarget,P=P.listener,U!==N&&b.isPropagationStopped())break e;N=P,b.currentTarget=ie;try{N(b)}catch(ve){Su(ve)}b.currentTarget=null,N=U}}}}function We(i,s){var c=s[vp];c===void 0&&(c=s[vp]=new Set);var f=i+"__bubble";c.has(f)||(E_(s,i,2,!1),c.add(f))}function av(i,s,c){var f=0;s&&(f|=4),E_(c,i,f,s)}var ud="_reactListening"+Math.random().toString(36).slice(2);function iv(i){if(!i[ud]){i[ud]=!0,bj.forEach(function(c){c!=="selectionchange"&&(CT.has(c)||av(c,!1,i),av(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[ud]||(s[ud]=!0,av("selectionchange",!1,s))}}function E_(i,s,c,f){switch(r1(s)){case 2:var b=eq;break;case 8:b=tq;break;default:b=bv}c=b.bind(null,s,c,i),b=void 0,!wp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),f?b!==void 0?i.addEventListener(s,c,{capture:!0,passive:b}):i.addEventListener(s,c,!0):b!==void 0?i.addEventListener(s,c,{passive:b}):i.addEventListener(s,c,!1)}function sv(i,s,c,f,b){var N=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var z=f.tag;if(z===3||z===4){var P=f.stateNode.containerInfo;if(P===b)break;if(z===4)for(z=f.return;z!==null;){var U=z.tag;if((U===3||U===4)&&z.stateNode.containerInfo===b)return;z=z.return}for(;P!==null;){if(z=Js(P),z===null)return;if(U=z.tag,U===5||U===6||U===26||U===27){f=N=z;continue e}P=P.parentNode}}f=f.return}Mj(function(){var ie=N,ve=_p(c),be=[];e:{var se=s0.get(i);if(se!==void 0){var ue=ju,Ee=i;switch(i){case"keypress":if(yu(c)===0)break e;case"keydown":case"keyup":ue=yk;break;case"focusin":Ee="focus",ue=zp;break;case"focusout":Ee="blur",ue=zp;break;case"beforeblur":case"afterblur":ue=zp;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Tj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=lk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Nk;break;case r0:case n0:case a0:ue=uk;break;case i0:ue=Sk;break;case"scroll":case"scrollend":ue=ik;break;case"wheel":ue=Ck;break;case"copy":case"cut":case"paste":ue=fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Rj;break;case"toggle":case"beforetoggle":ue=Ak}var $e=(s&4)!==0,ht=!$e&&(i==="scroll"||i==="scrollend"),ee=$e?se!==null?se+"Capture":null:se;$e=[];for(var K=ie,ae;K!==null;){var xe=K;if(ae=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ae===null||ee===null||(xe=xo(K,ee),xe!=null&&$e.push(Wo(K,xe,ae))),ht)break;K=K.return}0<$e.length&&(se=new ue(se,Ee,null,c,ve),be.push({event:se,listeners:$e}))}}if((s&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",se&&c!==Np&&(Ee=c.relatedTarget||c.fromElement)&&(Js(Ee)||Ee[Zs]))break e;if((ue||se)&&(se=ve.window===ve?ve:(se=ve.ownerDocument)?se.defaultView||se.parentWindow:window,ue?(Ee=c.relatedTarget||c.toElement,ue=ie,Ee=Ee?Js(Ee):null,Ee!==null&&(ht=o(Ee),$e=Ee.tag,Ee!==ht||$e!==5&&$e!==27&&$e!==6)&&(Ee=null)):(ue=null,Ee=ie),ue!==Ee)){if($e=Tj,xe="onMouseLeave",ee="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&($e=Rj,xe="onPointerLeave",ee="onPointerEnter",K="pointer"),ht=ue==null?se:go(ue),ae=Ee==null?se:go(Ee),se=new $e(xe,K+"leave",ue,c,ve),se.target=ht,se.relatedTarget=ae,xe=null,Js(ve)===ie&&($e=new $e(ee,K+"enter",Ee,c,ve),$e.target=ae,$e.relatedTarget=ht,xe=$e),ht=xe,ue&&Ee)t:{for($e=ET,ee=ue,K=Ee,ae=0,xe=ee;xe;xe=$e(xe))ae++;xe=0;for(var qe=K;qe;qe=$e(qe))xe++;for(;0<ae-xe;)ee=$e(ee),ae--;for(;0<xe-ae;)K=$e(K),xe--;for(;ae--;){if(ee===K||K!==null&&ee===K.alternate){$e=ee;break t}ee=$e(ee),K=$e(K)}$e=null}else $e=null;ue!==null&&A_(be,se,ue,$e,!1),Ee!==null&&ht!==null&&A_(be,ht,Ee,$e,!0)}}e:{if(se=ie?go(ie):window,ue=se.nodeName&&se.nodeName.toLowerCase(),ue==="select"||ue==="input"&&se.type==="file")var rt=Hj;else if(Fj(se))if(Qj)rt=Ik;else{rt=qk;var Oe=Tk}else ue=se.nodeName,!ue||ue.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ie&&jp(ie.elementType)&&(rt=Hj):rt=Rk;if(rt&&(rt=rt(i,ie))){Gj(be,rt,c,ve);break e}Oe&&Oe(i,se,ie),i==="focusout"&&ie&&se.type==="number"&&ie.memoizedProps.value!=null&&bp(se,"number",se.value)}switch(Oe=ie?go(ie):window,i){case"focusin":(Fj(Oe)||Oe.contentEditable==="true")&&(ol=Oe,Tp=ie,Co=null);break;case"focusout":Co=Tp=ol=null;break;case"mousedown":qp=!0;break;case"contextmenu":case"mouseup":case"dragend":qp=!1,e0(be,c,ve);break;case"selectionchange":if($k)break;case"keydown":case"keyup":e0(be,c,ve)}var Ve;if(Dp)e:{switch(i){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else ll?Bj(i,c)&&(Je="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Je="onCompositionStart");Je&&(Ij&&c.locale!=="ko"&&(ll||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&ll&&(Ve=Pj()):(li=ve,Cp="value"in li?li.value:li.textContent,ll=!0)),Oe=dd(ie,Je),0<Oe.length&&(Je=new qj(Je,i,null,c,ve),be.push({event:Je,listeners:Oe}),Ve?Je.data=Ve:(Ve=Uj(c),Ve!==null&&(Je.data=Ve)))),(Ve=Ok?Dk(i,c):Mk(i,c))&&(Je=dd(ie,"onBeforeInput"),0<Je.length&&(Oe=new qj("onBeforeInput","beforeinput",null,c,ve),be.push({event:Oe,listeners:Je}),Oe.data=Ve)),_T(be,i,ie,c,ve)}C_(be,s)})}function Wo(i,s,c){return{instance:i,listener:s,currentTarget:c}}function dd(i,s){for(var c=s+"Capture",f=[];i!==null;){var b=i,N=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||N===null||(b=xo(i,c),b!=null&&f.unshift(Wo(i,b,N)),b=xo(i,s),b!=null&&f.push(Wo(i,b,N))),i.tag===3)return f;i=i.return}return[]}function ET(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function A_(i,s,c,f,b){for(var N=s._reactName,z=[];c!==null&&c!==f;){var P=c,U=P.alternate,ie=P.stateNode;if(P=P.tag,U!==null&&U===f)break;P!==5&&P!==26&&P!==27||ie===null||(U=ie,b?(ie=xo(c,N),ie!=null&&z.unshift(Wo(c,ie,U))):b||(ie=xo(c,N),ie!=null&&z.push(Wo(c,ie,U)))),c=c.return}z.length!==0&&i.push({event:s,listeners:z})}var AT=/\r\n?/g,zT=/\u0000|\uFFFD/g;function z_(i){return(typeof i=="string"?i:""+i).replace(AT,`
`).replace(zT,"")}function O_(i,s){return s=z_(s),z_(i)===s}function pt(i,s,c,f,b,N){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||al(i,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&al(i,""+f);break;case"className":hu(i,"class",f);break;case"tabIndex":hu(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":hu(i,c,f);break;case"style":Oj(i,f,N);break;case"data":if(s!=="object"){hu(i,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=gu(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(c==="formAction"?(s!=="input"&&pt(i,s,"name",b.name,b,null),pt(i,s,"formEncType",b.formEncType,b,null),pt(i,s,"formMethod",b.formMethod,b,null),pt(i,s,"formTarget",b.formTarget,b,null)):(pt(i,s,"encType",b.encType,b,null),pt(i,s,"method",b.method,b,null),pt(i,s,"target",b.target,b,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=gu(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=pa);break;case"onScroll":f!=null&&We("scroll",i);break;case"onScrollEnd":f!=null&&We("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(b.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=gu(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":We("beforetoggle",i),We("toggle",i),pu(i,"popover",f);break;case"xlinkActuate":ma(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":ma(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":ma(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":ma(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":ma(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":ma(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":ma(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":ma(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":ma(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":pu(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=nk.get(c)||c,pu(i,c,f))}}function lv(i,s,c,f,b,N){switch(c){case"style":Oj(i,f,N);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(b.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"children":typeof f=="string"?al(i,f):(typeof f=="number"||typeof f=="bigint")&&al(i,""+f);break;case"onScroll":f!=null&&We("scroll",i);break;case"onScrollEnd":f!=null&&We("scrollend",i);break;case"onClick":f!=null&&(i.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jj.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),s=c.slice(2,b?c.length-7:void 0),N=i[Rr]||null,N=N!=null?N[c]:null,typeof N=="function"&&i.removeEventListener(s,N,b),typeof f=="function")){typeof N!="function"&&N!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,f,b);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):pu(i,c,f)}}}function gr(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",i),We("load",i);var f=!1,b=!1,N;for(N in c)if(c.hasOwnProperty(N)){var z=c[N];if(z!=null)switch(N){case"src":f=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:pt(i,s,N,z,c,null)}}b&&pt(i,s,"srcSet",c.srcSet,c,null),f&&pt(i,s,"src",c.src,c,null);return;case"input":We("invalid",i);var P=N=z=b=null,U=null,ie=null;for(f in c)if(c.hasOwnProperty(f)){var ve=c[f];if(ve!=null)switch(f){case"name":b=ve;break;case"type":z=ve;break;case"checked":U=ve;break;case"defaultChecked":ie=ve;break;case"value":N=ve;break;case"defaultValue":P=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(a(137,s));break;default:pt(i,s,f,ve,c,null)}}Cj(i,N,P,U,ie,z,b,!1);return;case"select":We("invalid",i),f=z=N=null;for(b in c)if(c.hasOwnProperty(b)&&(P=c[b],P!=null))switch(b){case"value":N=P;break;case"defaultValue":z=P;break;case"multiple":f=P;default:pt(i,s,b,P,c,null)}s=N,c=z,i.multiple=!!f,s!=null?nl(i,!!f,s,!1):c!=null&&nl(i,!!f,c,!0);return;case"textarea":We("invalid",i),N=b=f=null;for(z in c)if(c.hasOwnProperty(z)&&(P=c[z],P!=null))switch(z){case"value":f=P;break;case"defaultValue":b=P;break;case"children":N=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(91));break;default:pt(i,s,z,P,c,null)}Aj(i,f,b,N);return;case"option":for(U in c)c.hasOwnProperty(U)&&(f=c[U],f!=null)&&(U==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":pt(i,s,U,f,c,null));return;case"dialog":We("beforetoggle",i),We("toggle",i),We("cancel",i),We("close",i);break;case"iframe":case"object":We("load",i);break;case"video":case"audio":for(f=0;f<Xo.length;f++)We(Xo[f],i);break;case"image":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"embed":case"source":case"link":We("error",i),We("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in c)if(c.hasOwnProperty(ie)&&(f=c[ie],f!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:pt(i,s,ie,f,c,null)}return;default:if(jp(s)){for(ve in c)c.hasOwnProperty(ve)&&(f=c[ve],f!==void 0&&lv(i,s,ve,f,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(f=c[P],f!=null&&pt(i,s,P,f,c,null))}function OT(i,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,N=null,z=null,P=null,U=null,ie=null,ve=null;for(ue in c){var be=c[ue];if(c.hasOwnProperty(ue)&&be!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":U=be;default:f.hasOwnProperty(ue)||pt(i,s,ue,null,f,be)}}for(var se in f){var ue=f[se];if(be=c[se],f.hasOwnProperty(se)&&(ue!=null||be!=null))switch(se){case"type":N=ue;break;case"name":b=ue;break;case"checked":ie=ue;break;case"defaultChecked":ve=ue;break;case"value":z=ue;break;case"defaultValue":P=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,s));break;default:ue!==be&&pt(i,s,se,ue,f,be)}}yp(i,z,P,U,ie,ve,N,b);return;case"select":ue=z=P=se=null;for(N in c)if(U=c[N],c.hasOwnProperty(N)&&U!=null)switch(N){case"value":break;case"multiple":ue=U;default:f.hasOwnProperty(N)||pt(i,s,N,null,f,U)}for(b in f)if(N=f[b],U=c[b],f.hasOwnProperty(b)&&(N!=null||U!=null))switch(b){case"value":se=N;break;case"defaultValue":P=N;break;case"multiple":z=N;default:N!==U&&pt(i,s,b,N,f,U)}s=P,c=z,f=ue,se!=null?nl(i,!!c,se,!1):!!f!=!!c&&(s!=null?nl(i,!!c,s,!0):nl(i,!!c,c?[]:"",!1));return;case"textarea":ue=se=null;for(P in c)if(b=c[P],c.hasOwnProperty(P)&&b!=null&&!f.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:pt(i,s,P,null,f,b)}for(z in f)if(b=f[z],N=c[z],f.hasOwnProperty(z)&&(b!=null||N!=null))switch(z){case"value":se=b;break;case"defaultValue":ue=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:b!==N&&pt(i,s,z,b,f,N)}Ej(i,se,ue);return;case"option":for(var Ee in c)se=c[Ee],c.hasOwnProperty(Ee)&&se!=null&&!f.hasOwnProperty(Ee)&&(Ee==="selected"?i.selected=!1:pt(i,s,Ee,null,f,se));for(U in f)se=f[U],ue=c[U],f.hasOwnProperty(U)&&se!==ue&&(se!=null||ue!=null)&&(U==="selected"?i.selected=se&&typeof se!="function"&&typeof se!="symbol":pt(i,s,U,se,f,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in c)se=c[$e],c.hasOwnProperty($e)&&se!=null&&!f.hasOwnProperty($e)&&pt(i,s,$e,null,f,se);for(ie in f)if(se=f[ie],ue=c[ie],f.hasOwnProperty(ie)&&se!==ue&&(se!=null||ue!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,s));break;default:pt(i,s,ie,se,f,ue)}return;default:if(jp(s)){for(var ht in c)se=c[ht],c.hasOwnProperty(ht)&&se!==void 0&&!f.hasOwnProperty(ht)&&lv(i,s,ht,void 0,f,se);for(ve in f)se=f[ve],ue=c[ve],!f.hasOwnProperty(ve)||se===ue||se===void 0&&ue===void 0||lv(i,s,ve,se,f,ue);return}}for(var ee in c)se=c[ee],c.hasOwnProperty(ee)&&se!=null&&!f.hasOwnProperty(ee)&&pt(i,s,ee,null,f,se);for(be in f)se=f[be],ue=c[be],!f.hasOwnProperty(be)||se===ue||se==null&&ue==null||pt(i,s,be,se,f,ue)}function D_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DT(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var b=c[f],N=b.transferSize,z=b.initiatorType,P=b.duration;if(N&&P&&D_(z)){for(z=0,P=b.responseEnd,f+=1;f<c.length;f++){var U=c[f],ie=U.startTime;if(ie>P)break;var ve=U.transferSize,be=U.initiatorType;ve&&D_(be)&&(U=U.responseEnd,z+=ve*(U<P?1:(P-ie)/(U-ie)))}if(--f,s+=8*(N+z)/(b.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ov=null,cv=null;function fd(i){return i.nodeType===9?i:i.ownerDocument}function M_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function uv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dv=null;function MT(){var i=window.event;return i&&i.type==="popstate"?i===dv?!1:(dv=i,!0):(dv=null,!1)}var k_=typeof setTimeout=="function"?setTimeout:void 0,PT=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,kT=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(i){return T_.resolve(null).then(i).catch(TT)}:k_;function TT(i){setTimeout(function(){throw i})}function Si(i){return i==="head"}function q_(i,s){var c=s,f=0;do{var b=c.nextSibling;if(i.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(b),Tl(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Zo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Zo(c);for(var N=c.firstChild;N;){var z=N.nextSibling,P=N.nodeName;N[vo]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&N.rel.toLowerCase()==="stylesheet"||c.removeChild(N),N=z}}else c==="body"&&Zo(i.ownerDocument.body);c=b}while(c);Tl(s)}function R_(i,s){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function fv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":fv(c),gp(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function qT(i,s,c,f){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[vo])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(N=i.getAttribute("rel"),N==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(N!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(N=i.getAttribute("src"),(N!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&N&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var N=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===N)return i}else return i;if(i=yn(i.nextSibling),i===null)break}return null}function RT(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=yn(i.nextSibling),i===null))return null;return i}function I_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=yn(i.nextSibling),i===null))return null;return i}function mv(i){return i.data==="$?"||i.data==="$~"}function pv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function IT(i,s){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function yn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var hv=null;function L_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(s===0)return yn(i.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}i=i.nextSibling}return null}function $_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return i;s--}else c!=="/$"&&c!=="/&"||s++}i=i.previousSibling}return null}function B_(i,s,c){switch(s=fd(c),i){case"html":if(i=s.documentElement,!i)throw Error(a(452));return i;case"head":if(i=s.head,!i)throw Error(a(453));return i;case"body":if(i=s.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function Zo(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);gp(i)}var bn=new Map,U_=new Set;function md(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Oa=Z.d;Z.d={f:LT,r:$T,D:BT,C:UT,L:FT,m:GT,X:QT,S:HT,M:VT};function LT(){var i=Oa.f(),s=ad();return i||s}function $T(i){var s=el(i);s!==null&&s.tag===5&&s.type==="form"?iN(s):Oa.r(i)}var Ml=typeof document>"u"?null:document;function F_(i,s,c){var f=Ml;if(f&&typeof s=="string"&&s){var b=fn(s);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),U_.has(b)||(U_.add(b),i={rel:i,crossOrigin:c,href:s},f.querySelector(b)===null&&(s=f.createElement("link"),gr(s,"link",i),nr(s),f.head.appendChild(s)))}}function BT(i){Oa.D(i),F_("dns-prefetch",i,null)}function UT(i,s){Oa.C(i,s),F_("preconnect",i,s)}function FT(i,s,c){Oa.L(i,s,c);var f=Ml;if(f&&i&&s){var b='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+fn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+fn(c.imageSizes)+'"]')):b+='[href="'+fn(i)+'"]';var N=b;switch(s){case"style":N=Pl(i);break;case"script":N=kl(i)}bn.has(N)||(i=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),bn.set(N,i),f.querySelector(b)!==null||s==="style"&&f.querySelector(Jo(N))||s==="script"&&f.querySelector(ec(N))||(s=f.createElement("link"),gr(s,"link",i),nr(s),f.head.appendChild(s)))}}function GT(i,s){Oa.m(i,s);var c=Ml;if(c&&i){var f=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+fn(f)+'"][href="'+fn(i)+'"]',N=b;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=kl(i)}if(!bn.has(N)&&(i=v({rel:"modulepreload",href:i},s),bn.set(N,i),c.querySelector(b)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ec(N)))return}f=c.createElement("link"),gr(f,"link",i),nr(f),c.head.appendChild(f)}}}function HT(i,s,c){Oa.S(i,s,c);var f=Ml;if(f&&i){var b=tl(f).hoistableStyles,N=Pl(i);s=s||"default";var z=b.get(N);if(!z){var P={loading:0,preload:null};if(z=f.querySelector(Jo(N)))P.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},c),(c=bn.get(N))&&vv(i,c);var U=z=f.createElement("link");nr(U),gr(U,"link",i),U._p=new Promise(function(ie,ve){U.onload=ie,U.onerror=ve}),U.addEventListener("load",function(){P.loading|=1}),U.addEventListener("error",function(){P.loading|=2}),P.loading|=4,pd(z,s,f)}z={type:"stylesheet",instance:z,count:1,state:P},b.set(N,z)}}}function QT(i,s){Oa.X(i,s);var c=Ml;if(c&&i){var f=tl(c).hoistableScripts,b=kl(i),N=f.get(b);N||(N=c.querySelector(ec(b)),N||(i=v({src:i,async:!0},s),(s=bn.get(b))&&gv(i,s),N=c.createElement("script"),nr(N),gr(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(b,N))}}function VT(i,s){Oa.M(i,s);var c=Ml;if(c&&i){var f=tl(c).hoistableScripts,b=kl(i),N=f.get(b);N||(N=c.querySelector(ec(b)),N||(i=v({src:i,async:!0,type:"module"},s),(s=bn.get(b))&&gv(i,s),N=c.createElement("script"),nr(N),gr(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(b,N))}}function G_(i,s,c,f){var b=(b=V.current)?md(b):null;if(!b)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Pl(c.href),c=tl(b).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Pl(c.href);var N=tl(b).hoistableStyles,z=N.get(i);if(z||(b=b.ownerDocument||b,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(i,z),(N=b.querySelector(Jo(i)))&&!N._p&&(z.instance=N,z.state.loading=5),bn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},bn.set(i,c),N||YT(b,i,c,z.state))),s&&f===null)throw Error(a(528,""));return z}if(s&&f!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=kl(c),c=tl(b).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function Pl(i){return'href="'+fn(i)+'"'}function Jo(i){return'link[rel="stylesheet"]['+i+"]"}function H_(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function YT(i,s,c,f){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=i.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),gr(s,"link",c),nr(s),i.head.appendChild(s))}function kl(i){return'[src="'+fn(i)+'"]'}function ec(i){return"script[async]"+i}function Q_(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=i.querySelector('style[data-href~="'+fn(c.href)+'"]');if(f)return s.instance=f,nr(f),f;var b=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),nr(f),gr(f,"style",b),pd(f,c.precedence,i),s.instance=f;case"stylesheet":b=Pl(c.href);var N=i.querySelector(Jo(b));if(N)return s.state.loading|=4,s.instance=N,nr(N),N;f=H_(c),(b=bn.get(b))&&vv(f,b),N=(i.ownerDocument||i).createElement("link"),nr(N);var z=N;return z._p=new Promise(function(P,U){z.onload=P,z.onerror=U}),gr(N,"link",f),s.state.loading|=4,pd(N,c.precedence,i),s.instance=N;case"script":return N=kl(c.src),(b=i.querySelector(ec(N)))?(s.instance=b,nr(b),b):(f=c,(b=bn.get(N))&&(f=v({},c),gv(f,b)),i=i.ownerDocument||i,b=i.createElement("script"),nr(b),gr(b,"link",f),i.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,pd(f,c.precedence,i));return s.instance}function pd(i,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=f.length?f[f.length-1]:null,N=b,z=0;z<f.length;z++){var P=f[z];if(P.dataset.precedence===s)N=P;else if(N!==b)break}N?N.parentNode.insertBefore(i,N.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function vv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function gv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var hd=null;function V_(i,s,c){if(hd===null){var f=new Map,b=hd=new Map;b.set(c,f)}else b=hd,f=b.get(c),f||(f=new Map,b.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var N=c[b];if(!(N[vo]||N[mr]||i==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var z=N.getAttribute(s)||"";z=i+z;var P=f.get(z);P?P.push(N):f.set(z,[N])}}return f}function Y_(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function KT(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function K_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function XT(i,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=Pl(f.href),N=s.querySelector(Jo(b));if(N){s=N._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=vd.bind(i),s.then(i,i)),c.state.loading|=4,c.instance=N,nr(N);return}N=s.ownerDocument||s,f=H_(f),(b=bn.get(b))&&vv(f,b),N=N.createElement("link"),nr(N);var z=N;z._p=new Promise(function(P,U){z.onload=P,z.onerror=U}),gr(N,"link",f),c.instance=N}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=vd.bind(i),s.addEventListener("load",c),s.addEventListener("error",c))}}var xv=0;function WT(i,s){return i.stylesheets&&i.count===0&&xd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&xd(i,i.stylesheets),i.unsuspend){var N=i.unsuspend;i.unsuspend=null,N()}},6e4+s);0<i.imgBytes&&xv===0&&(xv=62500*DT());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&xd(i,i.stylesheets),i.unsuspend)){var N=i.unsuspend;i.unsuspend=null,N()}},(i.imgBytes>xv?50:800)+s);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(b)}}:null}function vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var gd=null;function xd(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,gd=new Map,s.forEach(ZT,i),gd=null,vd.call(i))}function ZT(i,s){if(!(s.state.loading&4)){var c=gd.get(i);if(c)var f=c.get(null);else{c=new Map,gd.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<b.length;N++){var z=b[N];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(c.set(z.dataset.precedence,z),f=z)}f&&c.set(null,f)}b=s.instance,z=b.getAttribute("data-precedence"),N=c.get(z)||f,N===f&&c.set(null,b),c.set(z,b),this.count++,f=vd.bind(this),b.addEventListener("load",f),b.addEventListener("error",f),N?N.parentNode.insertBefore(b,N.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),s.state.loading|=4}}var tc={$$typeof:C,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function JT(i,s,c,f,b,N,z,P,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=f,this.onUncaughtError=b,this.onCaughtError=N,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function X_(i,s,c,f,b,N,z,P,U,ie,ve,be){return i=new JT(i,s,c,z,U,ie,ve,be,P),s=1,N===!0&&(s|=24),N=Wr(3,null,null,s),i.current=N,N.stateNode=i,s=Wp(),s.refCount++,i.pooledCache=s,s.refCount++,N.memoizedState={element:f,isDehydrated:c,cache:s},th(N),i}function W_(i){return i?(i=dl,i):dl}function Z_(i,s,c,f,b,N){b=W_(b),f.context===null?f.context=b:f.pendingContext=b,f=mi(s),f.payload={element:c},N=N===void 0?null:N,N!==null&&(f.callback=N),c=pi(i,f,s),c!==null&&(Fr(c,i,s),Po(c,i,s))}function J_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function yv(i,s){J_(i,s),(i=i.alternate)&&J_(i,s)}function e1(i){if(i.tag===13||i.tag===31){var s=ts(i,67108864);s!==null&&Fr(s,i,67108864),yv(i,67108864)}}function t1(i){if(i.tag===13||i.tag===31){var s=rn();s=pp(s);var c=ts(i,s);c!==null&&Fr(c,i,s),yv(i,s)}}var yd=!0;function eq(i,s,c,f){var b=q.T;q.T=null;var N=Z.p;try{Z.p=2,bv(i,s,c,f)}finally{Z.p=N,q.T=b}}function tq(i,s,c,f){var b=q.T;q.T=null;var N=Z.p;try{Z.p=8,bv(i,s,c,f)}finally{Z.p=N,q.T=b}}function bv(i,s,c,f){if(yd){var b=jv(f);if(b===null)sv(i,s,f,bd,c),n1(i,f);else if(nq(b,i,s,c,f))f.stopPropagation();else if(n1(i,f),s&4&&-1<rq.indexOf(i)){for(;b!==null;){var N=el(b);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var z=fa(N.pendingLanes);if(z!==0){var P=N;for(P.pendingLanes|=2,P.entangledLanes|=2;z;){var U=1<<31-Ar(z);P.entanglements[1]|=U,z&=~U}ea(N),(st&6)===0&&(rd=Re()+500,Ko(0))}}break;case 31:case 13:P=ts(N,2),P!==null&&Fr(P,N,2),ad(),yv(N,2)}if(N=jv(f),N===null&&sv(i,s,f,bd,c),N===b)break;b=N}b!==null&&f.stopPropagation()}else sv(i,s,f,null,c)}}function jv(i){return i=_p(i),Nv(i)}var bd=null;function Nv(i){if(bd=null,i=Js(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=u(s),i!==null)return i;i=null}else if(c===31){if(i=d(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return bd=i,null}function r1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(J()){case fe:return 2;case Se:return 8;case lt:case qr:return 32;case Gt:return 268435456;default:return 32}default:return 32}}var _v=!1,wi=null,Ci=null,Ei=null,rc=new Map,nc=new Map,Ai=[],rq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n1(i,s){switch(i){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":rc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(s.pointerId)}}function ac(i,s,c,f,b,N){return i===null||i.nativeEvent!==N?(i={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:N,targetContainers:[b]},s!==null&&(s=el(s),s!==null&&e1(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),i)}function nq(i,s,c,f,b){switch(s){case"focusin":return wi=ac(wi,i,s,c,f,b),!0;case"dragenter":return Ci=ac(Ci,i,s,c,f,b),!0;case"mouseover":return Ei=ac(Ei,i,s,c,f,b),!0;case"pointerover":var N=b.pointerId;return rc.set(N,ac(rc.get(N)||null,i,s,c,f,b)),!0;case"gotpointercapture":return N=b.pointerId,nc.set(N,ac(nc.get(N)||null,i,s,c,f,b)),!0}return!1}function a1(i){var s=Js(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){i.blockedOn=s,xj(i.priority,function(){t1(c)});return}}else if(s===31){if(s=d(c),s!==null){i.blockedOn=s,xj(i.priority,function(){t1(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function jd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=jv(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);Np=f,c.target.dispatchEvent(f),Np=null}else return s=el(c),s!==null&&e1(s),i.blockedOn=c,!1;s.shift()}return!0}function i1(i,s,c){jd(i)&&c.delete(s)}function aq(){_v=!1,wi!==null&&jd(wi)&&(wi=null),Ci!==null&&jd(Ci)&&(Ci=null),Ei!==null&&jd(Ei)&&(Ei=null),rc.forEach(i1),nc.forEach(i1)}function Nd(i,s){i.blockedOn===s&&(i.blockedOn=null,_v||(_v=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aq)))}var _d=null;function s1(i){_d!==i&&(_d=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){_d===i&&(_d=null);for(var s=0;s<i.length;s+=3){var c=i[s],f=i[s+1],b=i[s+2];if(typeof f!="function"){if(Nv(f||c)===null)continue;break}var N=el(c);N!==null&&(i.splice(s,3),s-=3,jh(N,{pending:!0,data:b,method:c.method,action:f},f,b))}}))}function Tl(i){function s(U){return Nd(U,i)}wi!==null&&Nd(wi,i),Ci!==null&&Nd(Ci,i),Ei!==null&&Nd(Ei,i),rc.forEach(s),nc.forEach(s);for(var c=0;c<Ai.length;c++){var f=Ai[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Ai.length&&(c=Ai[0],c.blockedOn===null);)a1(c),c.blockedOn===null&&Ai.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var b=c[f],N=c[f+1],z=b[Rr]||null;if(typeof N=="function")z||s1(c);else if(z){var P=null;if(N&&N.hasAttribute("formAction")){if(b=N,z=N[Rr]||null)P=z.formAction;else if(Nv(b)!==null)continue}else P=z.action;typeof P=="function"?c[f+1]=P:(c.splice(f,3),f-=3),s1(c)}}}function l1(){function i(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(z){return b=z})},focusReset:"manual",scroll:"manual"})}function s(){b!==null&&(b(),b=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),b!==null&&(b(),b=null)}}}function Sv(i){this._internalRoot=i}Sd.prototype.render=Sv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,f=rn();Z_(c,f,i,s,null,null)},Sd.prototype.unmount=Sv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Z_(i.current,2,null,i,null,null),ad(),s[Zs]=null}};function Sd(i){this._internalRoot=i}Sd.prototype.unstable_scheduleHydration=function(i){if(i){var s=gj();i={blockedOn:null,target:i,priority:s};for(var c=0;c<Ai.length&&s!==0&&s<Ai[c].priority;c++);Ai.splice(c,0,i),c===0&&a1(i)}};var o1=t.version;if(o1!=="19.2.4")throw Error(a(527,o1,"19.2.4"));Z.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=p(s),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var iq={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Nr=wd.inject(iq),St=wd}catch{}}return sc.createRoot=function(i,s){if(!l(i))throw Error(a(299));var c=!1,f="",b=hN,N=vN,z=gN;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(N=s.onCaughtError),s.onRecoverableError!==void 0&&(z=s.onRecoverableError)),s=X_(i,1,!1,null,null,c,f,null,b,N,z,l1),i[Zs]=s.current,iv(i),new Sv(s)},sc.hydrateRoot=function(i,s,c){if(!l(i))throw Error(a(299));var f=!1,b="",N=hN,z=vN,P=gN,U=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(N=c.onUncaughtError),c.onCaughtError!==void 0&&(z=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.formState!==void 0&&(U=c.formState)),s=X_(i,1,!0,s,c??null,f,b,U,N,z,P,l1),s.context=W_(null),c=s.current,f=rn(),f=pp(f),b=mi(f),b.callback=null,pi(c,b,f),c=f,s.current.lanes=c,_r(s,c),ea(s),i[Zs]=s.current,iv(i),new Sd(s)},sc.version="19.2.4",sc}var x1;function iR(){if(x1)return zv.exports;x1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zv.exports=aR(),zv.exports}var sR=iR();const lR=Ka(sR),oR={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},Oy=fq(oR),Cd=mq(Oy),te=pq(Oy,{localCache:hq({tabManager:gq()})}),Yr=vq(Oy),y1={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},b1=e=>y1[e]||y1.default,WA=g.createContext(null),cR=({children:e})=>{const[t,n]=g.useState(null),[a,l]=g.useState(!0),o=async y=>{try{const x=await Dt(Ne(te,"users",y));if(x.exists()){const _=x.data();return{uid:y,email:_.email,displayName:_.displayName,role:_.role,isPremium:_.isPremium||!1,subscriptionEnd:_.subscriptionEnd?.toDate()||null,photoURL:_.photoURL,createdAt:_.createdAt?.toDate()||new Date,lastLogin:_.lastLogin?.toDate()}}return null}catch(x){return console.error("Erreur lors de la rcupration des donnes utilisateur:",x),null}},u=async(y,x)=>{const _=Ne(te,"users",y.uid);(await Dt(_)).exists()?await He(_,{lastLogin:xt()}):await dm(_,{email:y.email,displayName:y.displayName||x?.displayName||"",role:x?.role||"eleve",isPremium:!1,photoURL:y.photoURL,createdAt:xt(),lastLogin:xt()})},d=async(y,x)=>{try{const _=await Nq(Cd,y,x);await u(_.user)}catch(_){throw new Error(b1(_.code))}},m=async y=>{try{if(y.password!==y.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const x=await bq(Cd,y.email,y.password);await jq(x.user,{displayName:y.displayName}),await u(x.user,{displayName:y.displayName,role:y.role})}catch(x){throw x.message?x:new Error(b1(x.code))}},p=async()=>{try{await yq(Cd),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},h=async y=>{if(!t)throw new Error("Aucun utilisateur connect.");try{const x=Ne(te,"users",t.uid);await He(x,{...y,updatedAt:xt()}),n(_=>_?{..._,...y}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};g.useEffect(()=>{const y=xq(Cd,async x=>{if(x){const _=await o(x.uid);n(_)}else n(null);l(!1)});return()=>y()},[]);const v={currentUser:t,loading:a,login:d,register:m,logout:p,updateProfile:h};return r.jsx(WA.Provider,{value:v,children:a?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement..."})]}):e})},it=()=>{const e=g.useContext(WA);if(!e)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return e},wc=({children:e,allowedRoles:t,requirePremium:n=!1})=>{const{currentUser:a,loading:l}=it();return l?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Vrification des autorisations..."})]}):a?t&&!t.includes(a.role)?r.jsxs("div",{className:"error-container",children:[r.jsx("h2",{children:"Accs non autoris"}),r.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),r.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!a.isPremium?r.jsxs("div",{className:"error-container premium-required",children:[r.jsx("h2",{children:"Contenu Premium"}),r.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),r.jsxs("div",{className:"premium-cta",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",r.jsx("strong",{children:"20 000 FCFA/an"})]}),r.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):r.jsx(r.Fragment,{children:e}):r.jsxs("div",{className:"error-container",children:[r.jsx("h2",{children:"Accs refus"}),r.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),r.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},jn=({children:e})=>r.jsx(wc,{allowedRoles:["admin"],children:e}),Nn=({children:e})=>r.jsx(wc,{allowedRoles:["admin","prof"],children:e}),uR=()=>{const{currentUser:e,logout:t,loading:n}=it(),a=ot(),l=um(),[o,u]=g.useState(!1),[d,m]=g.useState(!1),[p,h]=g.useState(!1),v=g.useRef(null),y=[{path:"/",label:"Accueil",icon:r.jsx(xx,{size:18})},{path:"/disciplines",label:"Disciplines",icon:r.jsx(ln,{size:18})},{path:"/ebooks",label:"Bibliothque",icon:r.jsx(ln,{size:18})},{path:"/quiz-gratuits",label:"Quiz",icon:r.jsx(ws,{size:18}),requireAuth:!1},{path:"/quizzes",label:"Quiz Avancs",icon:r.jsx(ws,{size:18}),requireAuth:!0,requirePremium:!0},{path:e?.role==="eleve"?"/eleve/dashboard":e?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:r.jsx(u1,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:r.jsx(Sq,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:r.jsx(Cs,{size:18}),requireAuth:!0,requireRole:["parent"]}];g.useEffect(()=>{const E=O=>{v.current&&!v.current.contains(O.target)&&m(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),g.useEffect(()=>{u(!1),m(!1)},[l.pathname]),g.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const x=async()=>{try{h(!0),await t(),m(!1),a("/")}catch(E){console.error("Erreur lors de la dconnexion:",E)}finally{h(!1)}},_=()=>{u(!o)},j=()=>{m(!d)},S=E=>!(E.requireAuth&&!e||E.requirePremium&&e&&!e.isPremium||E.requireRole&&e&&!E.requireRole.includes(e.role)),w=E=>E==="/"?l.pathname==="/":l.pathname.startsWith(E),A=E=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[E]||E,C=()=>e?e.displayName?e.displayName.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase():"?";return r.jsxs("header",{className:"header",children:[r.jsxs("div",{className:"header__container",children:[r.jsxs(Be,{to:"/",className:"header__logo",children:[r.jsx(ws,{className:"header__logo-icon",size:32}),r.jsxs("div",{className:"header__logo-text",children:[r.jsx("span",{className:"header__logo-name",children:"PedaClic"}),r.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),r.jsx("nav",{className:"header__nav header__nav--desktop",children:r.jsx("ul",{className:"header__nav-list",children:y.map(E=>S(E)&&r.jsx("li",{className:"header__nav-item",children:r.jsxs(Be,{to:E.path,className:`header__nav-link ${w(E.path)?"header__nav-link--active":""}`,children:[E.icon,r.jsx("span",{children:E.label}),E.requirePremium&&r.jsx(xc,{size:14,className:"header__premium-badge"})]})},E.path))})}),r.jsxs("div",{className:"header__actions",children:[n?r.jsx("div",{className:"header__loading",children:r.jsx("div",{className:"header__spinner"})}):e?r.jsxs("div",{className:"header__user",ref:v,children:[e.isPremium&&r.jsxs("span",{className:"header__premium-tag",children:[r.jsx(xc,{size:14}),"Premium"]}),r.jsxs("button",{className:"header__user-button",onClick:j,"aria-expanded":d,"aria-haspopup":"true",children:[r.jsx("div",{className:"header__avatar",children:e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):r.jsx("span",{className:"header__avatar-initials",children:C()})}),r.jsx("span",{className:"header__user-name",children:e.displayName||e.email.split("@")[0]}),r.jsx(lf,{size:16,className:`header__chevron ${d?"header__chevron--open":""}`})]}),d&&r.jsxs("div",{className:"header__dropdown",children:[r.jsxs("div",{className:"header__dropdown-header",children:[r.jsx("p",{className:"header__dropdown-email",children:e.email}),r.jsx("span",{className:`header__dropdown-role header__dropdown-role--${e.role}`,children:A(e.role)})]}),r.jsx("div",{className:"header__dropdown-divider"}),r.jsxs("nav",{className:"header__dropdown-nav",children:[r.jsxs(Be,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[r.jsx(u1,{size:18}),r.jsx("span",{children:"Tableau de bord"})]}),e.role==="eleve"&&r.jsxs(Be,{to:"/eleve/suivi",className:"header__dropdown-link",children:[r.jsx(Cs,{size:18}),r.jsx("span",{children:"Mes points  amliorer"})]}),e.role==="parent"&&r.jsxs(Be,{to:"/parent/dashboard",className:"header__dropdown-link",children:[r.jsx(Cs,{size:18}),r.jsx("span",{children:"Espace Parent"})]}),r.jsxs(Be,{to:"/profil",className:"header__dropdown-link",children:[r.jsx(wq,{size:18}),r.jsx("span",{children:"Mon profil"})]}),e.role==="admin"&&r.jsxs(Be,{to:"/admin",className:"header__dropdown-link",children:[r.jsx(Cq,{size:18}),r.jsx("span",{children:"Administration"})]}),!e.isPremium&&r.jsxs(Be,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[r.jsx(xc,{size:18}),r.jsx("span",{children:"Passer Premium"})]})]}),r.jsx("div",{className:"header__dropdown-divider"}),r.jsxs("button",{className:"header__dropdown-logout",onClick:x,disabled:p,children:[r.jsx(d1,{size:18}),r.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]}):r.jsxs("div",{className:"header__auth-buttons",children:[r.jsx(Be,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),r.jsx(Be,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),r.jsx("button",{className:"header__mobile-toggle",onClick:_,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?r.jsx(qi,{size:24}):r.jsx(Eq,{size:24})})]})]}),r.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[r.jsx("div",{className:"header__mobile-overlay",onClick:()=>u(!1)}),r.jsxs("div",{className:"header__mobile-content",children:[r.jsx("nav",{className:"header__mobile-nav",children:r.jsx("ul",{className:"header__mobile-list",children:y.map(E=>S(E)&&r.jsx("li",{className:"header__mobile-item",children:r.jsxs(Be,{to:E.path,className:`header__mobile-link ${w(E.path)?"header__mobile-link--active":""}`,children:[E.icon,r.jsx("span",{children:E.label}),E.requirePremium&&r.jsx(xc,{size:14,className:"header__premium-badge"})]})},E.path))})}),!e&&r.jsxs("div",{className:"header__mobile-auth",children:[r.jsx(Be,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),r.jsx(Be,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),e&&r.jsxs("div",{className:"header__mobile-user",children:[r.jsxs("div",{className:"header__mobile-user-info",children:[r.jsx("div",{className:"header__avatar header__avatar--large",children:e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):r.jsx("span",{className:"header__avatar-initials",children:C()})}),r.jsxs("div",{className:"header__mobile-user-details",children:[r.jsx("p",{className:"header__mobile-user-name",children:e.displayName||e.email.split("@")[0]}),r.jsx("p",{className:"header__mobile-user-email",children:e.email})]})]}),r.jsxs("button",{className:"header__mobile-logout",onClick:x,disabled:p,children:[r.jsx(d1,{size:18}),r.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},dR=()=>{const e=new Date().getFullYear(),t=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],n=[{label:"Cours en ligne",path:"/cours",badge:"Nouveau",icon:r.jsx(Pq,{size:14})},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],a=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:r.jsx(kq,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:r.jsx(Tq,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:r.jsx(qq,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:r.jsx(Rq,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:r.jsx(Iq,{size:20})}];return r.jsxs("footer",{className:"footer",children:[r.jsx("div",{className:"footer__main",children:r.jsxs("div",{className:"footer__container",children:[r.jsxs("div",{className:"footer__column footer__column--about",children:[r.jsxs(Be,{to:"/",className:"footer__logo",children:[r.jsx(ws,{className:"footer__logo-icon",size:36}),r.jsxs("div",{className:"footer__logo-text",children:[r.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),r.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),r.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),r.jsxs("div",{className:"footer__stats",children:[r.jsxs("div",{className:"footer__stat",children:[r.jsx(ln,{size:18}),r.jsx("span",{children:"500+ cours"})]}),r.jsxs("div",{className:"footer__stat",children:[r.jsx(Wd,{size:18}),r.jsx("span",{children:"10 000+ lves"})]})]})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),r.jsx("nav",{className:"footer__nav",children:r.jsx("ul",{className:"footer__list",children:t.map((l,o)=>r.jsx("li",{className:"footer__item",children:r.jsx(Be,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),r.jsx("nav",{className:"footer__nav",children:r.jsx("ul",{className:"footer__list",children:n.map((l,o)=>r.jsx("li",{className:"footer__item",children:r.jsxs(Be,{to:l.path,className:`footer__link${l.badge?" footer__link--new":""}`,children:[l.icon&&r.jsx("span",{className:"footer__link-icon",children:l.icon}),l.label,l.badge&&r.jsx("span",{className:"footer__badge",children:l.badge})]})},o))})})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),r.jsxs("div",{className:"footer__contact",children:[r.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[r.jsx(Aq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"contact@pedaclic.sn"})]}),r.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[r.jsx(zq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"+221 77 000 00 00"})]}),r.jsxs("div",{className:"footer__contact-item",children:[r.jsx(Oq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"Dakar, Sngal"})]})]}),r.jsxs("div",{className:"footer__social",children:[r.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),r.jsx("div",{className:"footer__social-links",children:a.map((l,o)=>r.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:l.name,children:l.icon},o))})]})]})]})}),r.jsx("div",{className:"footer__bottom",children:r.jsxs("div",{className:"footer__container footer__bottom-content",children:[r.jsxs("p",{className:"footer__copyright",children:[" ",e," PedaClic. Tous droits rservs."]}),r.jsxs("p",{className:"footer__made-with",children:["Fait avec ",r.jsx(Dq,{size:14,className:"footer__heart"})," au Sngal "]}),r.jsxs("nav",{className:"footer__legal",children:[r.jsxs(Be,{to:"/mentions-legales",className:"footer__legal-link",children:[r.jsx(Mq,{size:14})," Mentions lgales"]}),r.jsxs(Be,{to:"/confidentialite",className:"footer__legal-link",children:[r.jsx(Ay,{size:14})," Confidentialit"]}),r.jsxs(Be,{to:"/aide",className:"footer__legal-link",children:[r.jsx(Zd,{size:14})," Aide"]})]})]})})]})},vt=({children:e,hideHeader:t=!1,hideFooter:n=!1,className:a=""})=>r.jsxs("div",{className:"layout",children:[!t&&r.jsx(uR,{}),r.jsx("main",{className:`layout__main ${t?"":"layout__main--with-header"} ${a}`,children:e}),!n&&r.jsx(dR,{})]}),fR=()=>{const{currentUser:e}=it();return r.jsxs("div",{className:"home-page",children:[r.jsxs("section",{className:"home-page__hero",children:[r.jsxs("div",{className:"home-page__hero-content",children:[r.jsxs("div",{className:"home-page__hero-badge",children:[r.jsx(an,{size:14}),r.jsx("span",{children:"Plateforme N1 au Sngal"})]}),r.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",r.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),r.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),r.jsx("div",{className:"home-page__hero-cta",children:e?r.jsxs(Be,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",r.jsx(vs,{size:20})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Be,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",r.jsx(vs,{size:20})]}),r.jsxs(Be,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[r.jsx(Gl,{size:18}),"Dcouvrir les cours"]})]})}),r.jsxs("div",{className:"home-page__hero-stats",children:[r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"10 000+"}),r.jsx("span",{children:"lves inscrits"})]}),r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"500+"}),r.jsx("span",{children:"Cours disponibles"})]}),r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"95%"}),r.jsx("span",{children:"Taux de russite"})]})]})]}),r.jsx("div",{className:"home-page__hero-image",children:r.jsxs("div",{className:"home-page__hero-illustration",children:[r.jsx(ws,{size:120}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),r.jsx("section",{className:"home-page__levels",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),r.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),r.jsxs("div",{className:"home-page__levels-grid",children:[r.jsxs(Be,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[r.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),r.jsx("h3",{children:"Collge"}),r.jsx("p",{children:"6me  3me"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx(Rt,{size:16})," Prparation au BFEM"]}),r.jsxs("li",{children:[r.jsx(Rt,{size:16})," 9 matires disponibles"]}),r.jsxs("li",{children:[r.jsx(Rt,{size:16})," Exercices corrigs"]})]}),r.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",r.jsx(vs,{size:16})]})]}),r.jsxs(Be,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[r.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),r.jsx("h3",{children:"Lyce"}),r.jsx("p",{children:"2nde  Terminale"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx(Rt,{size:16})," Prparation au BAC"]}),r.jsxs("li",{children:[r.jsx(Rt,{size:16})," 12 matires disponibles"]}),r.jsxs("li",{children:[r.jsx(Rt,{size:16})," Annales d'examens"]})]}),r.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",r.jsx(vs,{size:16})]})]})]})]})}),r.jsx("section",{className:"home-page__features",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),r.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),r.jsxs("div",{className:"home-page__features-grid",children:[r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon",children:r.jsx(ln,{size:28})}),r.jsx("h3",{children:"Cours complets"}),r.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:r.jsx(YA,{size:28})}),r.jsx("h3",{children:"Quiz interactifs"}),r.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:r.jsx(KA,{size:28})}),r.jsx("h3",{children:"Suivi de progression"}),r.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:r.jsx(Ay,{size:28})}),r.jsx("h3",{children:"Contenu vrifi"}),r.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:r.jsx(Xl,{size:28})}),r.jsx("h3",{children:"Accessible 24/7"}),r.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:r.jsx(Ui,{size:28})}),r.jsx("h3",{children:"Certificats"}),r.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),r.jsx("section",{className:"home-page__premium",children:r.jsx("div",{className:"home-page__container",children:r.jsxs("div",{className:"home-page__premium-content",children:[r.jsxs("div",{className:"home-page__premium-text",children:[r.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),r.jsx("h2",{children:"Passez  la vitesse suprieure"}),r.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",r.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),r.jsxs("ul",{className:"home-page__premium-features",children:[r.jsxs("li",{children:[r.jsx(Rt,{size:18})," Quiz illimits dans toutes les matires"]}),r.jsxs("li",{children:[r.jsx(Rt,{size:18})," Corrections dtailles des exercices"]}),r.jsxs("li",{children:[r.jsx(Rt,{size:18})," Annales des examens (BFEM, BAC)"]}),r.jsxs("li",{children:[r.jsx(Rt,{size:18})," Support prioritaire"]})]}),r.jsxs(Be,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",r.jsx(vs,{size:20})]})]}),r.jsx("div",{className:"home-page__premium-pricing",children:r.jsxs("div",{className:"home-page__pricing-card",children:[r.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),r.jsx("h3",{children:"Abonnement Annuel"}),r.jsxs("div",{className:"home-page__pricing-price",children:[r.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),r.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),r.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),r.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),r.jsx(Be,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),r.jsx("section",{className:"home-page__testimonials",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),r.jsxs("div",{className:"home-page__testimonials-grid",children:[r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(an,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Fatou Adara"}),r.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(an,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Moussa Diallo"}),r.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(an,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Aminata Ndiaye"}),r.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),r.jsx("section",{className:"home-page__final-cta",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{children:"Prt  russir ?"}),r.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!e&&r.jsxs(Be,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",r.jsx(vs,{size:24})]})]})})]})},mR=()=>{const{login:e}=it(),t=ot(),a=um().state?.from||"/",[l,o]=g.useState({email:"",password:""}),[u,d]=g.useState(!1),[m,p]=g.useState(""),[h,v]=g.useState(!1),y=j=>{const{name:S,value:w}=j.target;o(A=>({...A,[S]:w})),m&&p("")},x=()=>l.email.trim()?l.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)?!0:(p("Veuillez entrer une adresse email valide."),!1):(p("Veuillez entrer votre mot de passe."),!1):(p("Veuillez entrer votre adresse email."),!1),_=async j=>{if(j.preventDefault(),!!x()){d(!0),p("");try{await e(l.email,l.password),t(a,{replace:!0})}catch(S){S instanceof Error?p(S.message):p("Une erreur est survenue lors de la connexion.")}finally{d(!1)}}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-container",children:[r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs(Be,{to:"/",className:"auth-logo",children:[r.jsx("div",{className:"auth-logo__icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),r.jsx("span",{children:"PedaClic"})]}),r.jsx("h1",{className:"auth-title",children:"Connexion"}),r.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),m&&r.jsxs("div",{className:"auth-error",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 8v4M12 16h.01"})]}),r.jsx("span",{children:m})]}),r.jsxs("form",{onSubmit:_,className:"auth-form",children:[r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:y,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:u})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),r.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),r.jsx("input",{type:h?"text":"password",id:"password",name:"password",value:l.password,onChange:y,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:u}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!h),"aria-label":h?"Masquer le mot de passe":"Afficher le mot de passe",children:h?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsx("div",{className:"auth-forgot",children:r.jsx(Be,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),r.jsx("button",{type:"submit",className:"auth-button",disabled:u,children:u?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"ou"})}),r.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",r.jsx(Be,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),r.jsxs("div",{className:"auth-welcome",children:[r.jsx("h2",{children:"Bienvenue sur PedaClic !"}),r.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),r.jsxs("ul",{className:"auth-features",children:[r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},pR=()=>{const{register:e}=it(),t=ot(),[n,a]=g.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[l,o]=g.useState(!1),[u,d]=g.useState(""),[m,p]=g.useState(!1),[h,v]=g.useState(!1),[y,x]=g.useState(!1),_=w=>{const{name:A,value:C}=w.target;a(E=>({...E,[A]:C})),u&&d("")},j=()=>n.displayName.trim()?n.displayName.trim().length<2?(d("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(d("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(d("Les mots de passe ne correspondent pas."),!1):y?!0:(d("Veuillez accepter les conditions d'utilisation."),!1):(d("Veuillez entrer un mot de passe."),!1):(d("Veuillez entrer une adresse email valide."),!1):(d("Veuillez entrer votre adresse email."),!1):(d("Veuillez entrer votre nom complet."),!1),S=async w=>{if(w.preventDefault(),!!j()){o(!0),d("");try{await e(n),t("/disciplines",{replace:!0})}catch(A){A instanceof Error?d(A.message):d("Une erreur est survenue lors de l'inscription.")}finally{o(!1)}}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-container",children:[r.jsxs("div",{className:"auth-card auth-card--register",children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs(Be,{to:"/",className:"auth-logo",children:[r.jsx("div",{className:"auth-logo__icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),r.jsx("span",{children:"PedaClic"})]}),r.jsx("h1",{className:"auth-title",children:"Crer un compte"}),r.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),u&&r.jsxs("div",{className:"auth-error",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 8v4M12 16h.01"})]}),r.jsx("span",{children:u})]}),r.jsxs("form",{onSubmit:S,className:"auth-form",children:[r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:_,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:l})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:_,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:l})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{className:"auth-label",children:"Je suis :"}),r.jsxs("div",{className:"auth-role-selector",children:[r.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:_,className:"auth-role-input",disabled:l}),r.jsxs("div",{className:"auth-role-content",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),r.jsx("span",{children:"lve"})]})]}),r.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:_,className:"auth-role-input",disabled:l}),r.jsxs("div",{className:"auth-role-content",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),r.jsx("span",{children:"Professeur"})]})]}),r.jsxs("label",{className:`auth-role-option ${n.role==="parent"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"parent",checked:n.role==="parent",onChange:_,className:"auth-role-input",disabled:l}),r.jsxs("div",{className:"auth-role-content",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),r.jsx("span",{children:"Parent d'lve"})]})]})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),r.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),r.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:n.password,onChange:_,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:l}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>p(!m),"aria-label":m?"Masquer":"Afficher",children:m?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),r.jsx("input",{type:h?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:_,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:l}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!h),"aria-label":h?"Masquer":"Afficher",children:h?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsx("div",{className:"auth-checkbox-field",children:r.jsxs("label",{className:"auth-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:y,onChange:w=>x(w.target.checked),className:"auth-checkbox",disabled:l}),r.jsx("span",{className:"auth-checkbox-custom"}),r.jsxs("span",{children:["J'accepte les"," ",r.jsx(Be,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",r.jsx(Be,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),r.jsx("button",{type:"submit",className:"auth-button",disabled:l,children:l?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"ou"})}),r.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",r.jsx(Be,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),r.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[r.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),r.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),r.jsxs("div",{className:"auth-stats",children:[r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"10 000+"}),r.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"500+"}),r.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"95%"}),r.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),r.jsxs("div",{className:"auth-testimonial",children:[r.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),r.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},ZA=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],JA=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],e2=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],t2={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function j1(e){switch(e){case"college":return ZA;case"lycee":return JA;case"formation_libre":return e2;default:return[]}}function r2(e){return[...ZA,...JA,...e2].find(n=>n.value===e)?.label||e}const N1=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],hR=()=>{const[e,t]=g.useState("college"),[n,a]=g.useState([]),[l,o]=g.useState(!0),u=ot();g.useEffect(()=>{const p=Te(_e(te,"disciplines"),Ke("ordre")),h=Cy(p,v=>{const y=v.docs.map(x=>({id:x.id,...x.data(),createdAt:x.data().createdAt?.toDate()||new Date,updatedAt:x.data().updatedAt?.toDate()||new Date}));a(y),o(!1)});return()=>h()},[]);const d=n.filter(p=>p.niveau===e),m=N1.find(p=>p.niveau===e);return r.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[r.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[r.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),r.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:N1.map(p=>{const h=e===p.niveau;return r.jsxs("button",{onClick:()=>t(p.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${h?p.color:"#e2e8f0"}`,background:h?p.bgLight:"#fff",color:h?p.color:"#718096",fontSize:"1rem",fontWeight:h?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:h?`0 2px 8px ${p.color}20`:"none"},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:p.icon}),p.label]},p.niveau)})}),l&&r.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!l&&d.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[r.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",t2[e]," pour le moment."]})]}),!l&&d.length>0&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:d.map(p=>r.jsxs("div",{onClick:()=>u(`/disciplines/${p.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${p.couleur||m.color}`},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[r.jsx("span",{style:{fontSize:"1.8rem"},children:p.icone||""}),r.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:p.nom})]}),p.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:p.description.length>100?`${p.description.slice(0,100)}...`:p.description}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:r.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:m.bgLight,color:m.color},children:r2(p.classe)})}),p.coefficient!==void 0&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",p.coefficient]})]},p.id))})]})},lc="disciplines",_1=e=>{const t=e.data();return{id:e.id,nom:t.nom,niveau:t.niveau,classe:t.classe,ordre:t.ordre,coefficient:t.coefficient,couleur:t.couleur,icone:t.icone,description:t.description,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Xa={async getAll(e){try{const t=[Ke("ordre","asc")];e?.niveau&&t.unshift(we("niveau","==",e.niveau)),e?.classe&&t.unshift(we("classe","==",e.classe));const n=Te(_e(te,lc),...t);return(await De(n)).docs.map(_1)}catch(t){throw console.error("Erreur lors de la rcupration des disciplines:",t),new Error("Impossible de rcuprer les disciplines")}},async getById(e){try{const t=Ne(te,lc,e),n=await Dt(t);return n.exists()?_1(n):null}catch(t){throw console.error("Erreur lors de la rcupration de la discipline:",t),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(e){return this.getAll({niveau:e})},async getByClasse(e){return this.getAll({classe:e})},async create(e){try{return(await Pt(_e(te,lc),{...e,createdAt:xt(),updatedAt:xt()})).id}catch(t){throw console.error("Erreur lors de la cration de la discipline:",t),new Error("Impossible de crer la discipline")}},async update(e,t){try{const n=Ne(te,lc,e);await He(n,{...t,updatedAt:xt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(e){try{const t=Ne(te,lc,e);await Dn(t)}catch(t){throw console.error("Erreur lors de la suppression de la discipline:",t),new Error("Impossible de supprimer la discipline")}},async exists(e){return await this.getById(e)!==null},async countByNiveau(e){return(await this.getByNiveau(e)).length}},ps="ressources",vR="ressources",S1=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,titre:t.titre,type:t.type,contenu:t.contenu,description:t.description,isPremium:t.isPremium||!1,ordre:t.ordre||0,chapitre:t.chapitre,fichierURL:t.fichierURL,dureeEstimee:t.dureeEstimee,tags:t.tags||[],auteurId:t.auteurId,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},gR=e=>{const t=Date.now(),n=e.split(".").pop();return`${e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${t}.${n}`},Da={async getAll(e,t){try{const n=[Ke("ordre","asc")];e?.disciplineId&&n.unshift(we("disciplineId","==",e.disciplineId)),e?.chapitreId&&n.unshift(we("chapitre","==",e.chapitreId)),e?.type&&n.unshift(we("type","==",e.type)),e?.isPremium!==void 0&&n.unshift(we("isPremium","==",e.isPremium)),e?.auteurId&&n.unshift(we("auteurId","==",e.auteurId)),t&&n.push(cn(t));const a=Te(_e(te,ps),...n);return(await De(a)).docs.map(S1)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(e){try{const t=Ne(te,ps,e),n=await Dt(t);return n.exists()?S1(n):null}catch(t){throw console.error("Erreur lors de la rcupration de la ressource:",t),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(e){return this.getAll({disciplineId:e})},async getByChapitre(e){return this.getAll({chapitreId:e})},async getByType(e){return this.getAll({type:e})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(e,t){try{return(await Pt(_e(te,ps),{...e,auteurId:t,createdAt:xt(),updatedAt:xt()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(e,t){try{const n=Ne(te,ps,e);await He(n,{...t,updatedAt:xt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(e){try{const t=await this.getById(e);t?.fichierURL&&await this.deleteFile(t.fichierURL);const n=Ne(te,ps,e);await Dn(n)}catch(t){throw console.error("Erreur lors de la suppression de la ressource:",t),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),n=$a(te);for(const a of t){a.fichierURL&&await this.deleteFile(a.fichierURL);const l=Ne(te,ps,a.id);n.delete(l)}await n.commit()}catch(t){throw console.error("Erreur lors de la suppression des ressources:",t),new Error("Impossible de supprimer les ressources")}},async uploadFile(e,t){try{const n=gR(e.name),a=`${vR}/${t}/${n}`,l=Vr(Yr,a);return await Ss(l,e),await Ra(l)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(e){try{const t=Vr(Yr,e);await Sc(t)}catch(t){console.warn("Fichier non trouv ou dj supprim:",t)}},async reorder(e,t){try{const n=$a(te);t.forEach((a,l)=>{const o=Ne(te,ps,a);n.update(o,{ordre:l+1,updatedAt:xt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(e,t){await this.update(e,{isPremium:t})},async countByType(e){return(await this.getByType(e)).length},async getStats(){try{const e=await this.getAll(),t={total:e.length,premium:e.filter(n=>n.isPremium).length,gratuit:e.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return e.forEach(n=>{t.parType[n.type]!==void 0&&t.parType[n.type]++}),t}catch(e){throw console.error("Erreur lors du calcul des statistiques:",e),new Error("Impossible de calculer les statistiques")}}},xR=()=>{const{id:e}=Hn(),t=ot(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[m,p]=g.useState(!0),[h,v]=g.useState(null),[y,x]=g.useState("tous"),[_,j]=g.useState(new Set),S=g.useCallback(async()=>{if(e)try{p(!0),v(null);const R=await Xa.getById(e);if(!R){v("Discipline introuvable."),p(!1);return}a(R);const L=await Da.getAll({disciplineId:e}),Q=new Map,$=[];for(const Y of L){const M=Y.chapitre||Y.chapitreId;M?(Q.has(M)||Q.set(M,[]),Q.get(M).push(Y)):$.push(Y)}const F=Array.from(Q.entries()).map(([Y,M])=>({chapitreNom:Y,ressources:M.sort((q,Z)=>q.ordre-Z.ordre)})).sort((Y,M)=>Y.chapitreNom.localeCompare(M.chapitreNom,"fr"));o(F),d($),F.length>0&&j(new Set([F[0].chapitreNom]))}catch(R){console.error("Erreur chargement discipline:",R),v("Impossible de charger les donnes. Ressayez plus tard.")}finally{p(!1)}},[e]);g.useEffect(()=>{S()},[S]);const w=R=>{j(L=>{const Q=new Set(L);return Q.has(R)?Q.delete(R):Q.add(R),Q})},A=R=>y==="tous"?R:R.filter(L=>L.type===y),C=R=>{switch(R){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},E=R=>{switch(R){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return R}},O=R=>{switch(R){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},D=R=>R==="college"?"Collge":"Lyce";if(m)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[r.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),r.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),r.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(h||!n)return r.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:h||"Discipline introuvable"}),r.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),r.jsx("button",{onClick:()=>t("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const T=[...l.flatMap(R=>R.ressources),...u],k=[...new Set(T.map(R=>R.type))];return r.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[r.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[r.jsx(Be,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),r.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),r.jsx(Be,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),r.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),r.jsx("span",{style:{color:"#374151"},children:n.nom})]}),r.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&r.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",D(n.niveau),"  ",n.classe]}),r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",T.length," ressource",T.length!==1?"s":""]}),n.coefficient&&r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),k.length>1&&r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[r.jsxs("button",{onClick:()=>x("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:y==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:y==="tous"?"#2563eb":"#fff",color:y==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",T.length,")"]}),k.map(R=>{const L=T.filter($=>$.type===R).length,Q=y===R;return r.jsxs("button",{onClick:()=>x(R),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:Q?`2px solid ${O(R)}`:"1px solid #d1d5db",background:Q?O(R):"#fff",color:Q?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[C(R)," ",E(R)," (",L,")"]},R)})]}),l.length===0&&u.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),r.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.map(R=>{const L=A(R.ressources);if(L.length===0&&y!=="tous")return null;const Q=_.has(R.chapitreNom),$=y==="tous"?R.ressources:L;return r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:Q?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[r.jsx("button",{onClick:()=>w(R.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:Q?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.25rem",transform:Q?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:R.chapitreNom}),r.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[R.ressources.length," ressource",R.ressources.length!==1?"s":""]})]})]})}),Q&&r.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:$.map(F=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:Y=>Y.currentTarget.style.background="#eef2ff",onMouseLeave:Y=>Y.currentTarget.style.background="#f9fafb",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:C(F.type)}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:F.titre}),F.description&&r.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:F.description})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(F.type)},children:E(F.type)}),F.isPremium&&r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),F.dureeEstimee&&r.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",F.dureeEstimee," min"]})]})]},F.id))})]},R.chapitreNom)}),A(u).length>0&&r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:A(u).map(R=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:C(R.type)}),r.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:R.titre})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(R.type)},children:E(R.type)}),R.isPremium&&r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},R.id))})]})]}),r.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:r.jsx(Be,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},Mv=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],yR=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],bR=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],jR=()=>{const{currentUser:e}=it(),t=um(),n=ot(),[a,l]=g.useState("annuel"),[o,u]=g.useState(!1),[d,m]=g.useState(null),[p,h]=g.useState(null);t.state?.from;const v=()=>!e||!e.isPremium?!1:e.subscriptionEnd?(e.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e.subscriptionEnd))>new Date:!0,y=async()=>{if(!e){n("/connexion",{state:{from:"/premium"}});return}if(v()){m("Vous tes dj abonn Premium !");return}try{u(!0),m(null);const j=Mv.find(E=>E.id===a);if(!j)throw new Error("Plan invalide");const S=await Pt(_e(te,"transactions"),{userId:e.uid,userEmail:e.email,planType:a,montant:j.prix,devise:"XOF",statut:"pending",dateTransaction:xt(),createdAt:xt()}),w={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${j.nom}`,item_price:j.prix,currency:"XOF",ref_command:S.id,success_url:`${window.location.origin}/premium/success?ref=${S.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${S.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:e.uid,planType:a,transactionId:S.id}),env:"test"},C=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:w.apiKey,API_SECRET:w.apiSecret},body:JSON.stringify({item_name:w.item_name,item_price:w.item_price,currency:w.currency,ref_command:w.ref_command,command_name:`Abonnement Premium ${j.nom} - ${e.email}`,env:w.env,ipn_url:w.ipn_url,success_url:w.success_url,cancel_url:w.cancel_url,custom_field:w.custom_field})})).json();if(C.success===1&&C.redirect_url)window.location.href=C.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const E=new Date,O=new Date(E);a==="mensuel"?O.setMonth(O.getMonth()+1):O.setFullYear(O.getFullYear()+1),await He(Ne(te,"users",e.uid),{isPremium:!0,subscriptionEnd:O,subscriptionPlan:a,updatedAt:xt()}),await He(Ne(te,"transactions",S.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:O,updatedAt:xt()}),n("/premium/success",{state:{plan:j.nom,montant:j.prix,expiration:O.toLocaleDateString("fr-FR")}})}}catch(j){console.error("Erreur paiement:",j),m("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{u(!1)}},x=j=>{h(p===j?null:j)},_=j=>j.toLocaleString("fr-FR")+" FCFA";if(v()){const j=e?.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e?.subscriptionEnd||Date.now());return r.jsx("div",{className:"premium-page",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"premium-already",children:[r.jsx("span",{className:"premium-already__icon",children:""}),r.jsx("h1",{children:"Vous tes dj Premium !"}),r.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",r.jsx("strong",{children:j.toLocaleDateString("fr-FR")})]}),r.jsxs("div",{className:"premium-already__actions",children:[r.jsx(Be,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),r.jsx(Be,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return r.jsxs("div",{className:"premium-page",children:[r.jsx("section",{className:"premium-hero",children:r.jsxs("div",{className:"container",children:[r.jsx("span",{className:"premium-hero__badge",children:" Premium"}),r.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",r.jsx("span",{children:"PedaClic"})]}),r.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),r.jsx("section",{className:"premium-pricing",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),r.jsx("div",{className:"pricing-cards",children:Mv.map(j=>r.jsxs("div",{className:`pricing-card ${a===j.id?"pricing-card--selected":""} ${j.popular?"pricing-card--popular":""}`,onClick:()=>l(j.id),children:[j.popular&&r.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),r.jsxs("div",{className:"pricing-card__header",children:[r.jsx("h3",{className:"pricing-card__name",children:j.nom}),r.jsx("p",{className:"pricing-card__duration",children:j.duree})]}),r.jsxs("div",{className:"pricing-card__price",children:[j.prixOriginal&&r.jsx("span",{className:"pricing-card__original",children:_(j.prixOriginal)}),r.jsx("span",{className:"pricing-card__amount",children:_(j.prix)}),j.id==="mensuel"&&r.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),j.economie&&r.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",j.economie]}),r.jsx("div",{className:"pricing-card__radio",children:r.jsx("span",{className:`radio-dot ${a===j.id?"radio-dot--active":""}`})})]},j.id))}),r.jsxs("div",{className:"pricing-cta",children:[d&&r.jsxs("div",{className:"pricing-error",children:[r.jsx("span",{children:""})," ",d]}),e?r.jsx("button",{className:"btn btn--premium btn--lg",onClick:y,disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):r.jsxs(r.Fragment,{children:["Payer ",_(Mv.find(j=>j.id===a)?.prix||0)]})}):r.jsxs("div",{className:"pricing-login",children:[r.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),r.jsx(Be,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),r.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",r.jsx(Be,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),r.jsxs("div",{className:"payment-methods",children:[r.jsx("p",{children:"Paiement scuris par"}),r.jsxs("div",{className:"payment-methods__logos",children:[r.jsx("span",{className:"payment-logo",children:" Orange Money"}),r.jsx("span",{className:"payment-logo",children:" Wave"}),r.jsx("span",{className:"payment-logo",children:" Free Money"}),r.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),r.jsx("section",{className:"premium-features",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),r.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),r.jsx("div",{className:"features-grid",children:yR.map((j,S)=>r.jsxs("div",{className:"feature-card",children:[r.jsx("span",{className:"feature-card__icon",children:j.icone}),r.jsx("h3",{className:"feature-card__title",children:j.titre}),r.jsx("p",{className:"feature-card__description",children:j.description})]},S))})]})}),r.jsx("section",{className:"premium-comparison",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),r.jsxs("div",{className:"comparison-table",children:[r.jsxs("div",{className:"comparison-header",children:[r.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),r.jsx("div",{className:"comparison-free",children:"Gratuit"}),r.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((j,S)=>r.jsxs("div",{className:"comparison-row",children:[r.jsx("div",{className:"comparison-feature",children:j.feature}),r.jsx("div",{className:"comparison-free",children:j.free?r.jsx("span",{className:"check",children:""}):r.jsx("span",{className:"cross",children:""})}),r.jsx("div",{className:"comparison-premium",children:r.jsx("span",{className:"check check--premium",children:""})})]},S))]})]})}),r.jsx("section",{className:"premium-testimonials",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),r.jsxs("div",{className:"testimonials-grid",children:[r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),r.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),r.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),r.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),r.jsx("section",{className:"premium-faq",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Questions frquentes"}),r.jsx("div",{className:"faq-list",children:bR.map((j,S)=>r.jsxs("div",{className:`faq-item ${p===S?"faq-item--open":""}`,children:[r.jsxs("button",{className:"faq-item__question",onClick:()=>x(S),"aria-expanded":p===S,children:[r.jsx("span",{children:j.question}),r.jsx("span",{className:"faq-item__icon",children:p===S?"":"+"})]}),p===S&&r.jsx("div",{className:"faq-item__answer",children:r.jsx("p",{children:j.reponse})})]},S))})]})}),r.jsx("section",{className:"premium-cta-final",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{children:"Prt  russir vos examens ?"}),r.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),r.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},NR=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"},{id:"ebooks",label:"Bibliothque Ebooks",icon:"",href:"/admin/ebooks"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],_n=({children:e,currentPage:t="dashboard"})=>{const{currentUser:n,logout:a}=it(),[l,o]=g.useState(!0),[u,d]=g.useState(!1),m=um(),p=async()=>{try{d(!0),await a(),window.location.href="/connexion"}catch(x){console.error("Erreur lors de la dconnexion:",x),d(!1)}},h=()=>n?.displayName?n.displayName.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"AD",v=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},y=x=>x.href==="/admin"?m.pathname==="/admin"||m.pathname==="/admin/":m.pathname.startsWith(x.href);return r.jsxs("div",{className:"admin-layout",children:[r.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[r.jsx("header",{className:"admin-sidebar__header",children:r.jsxs(Be,{to:"/",className:"admin-sidebar__logo",children:[r.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),r.jsx("span",{children:"PedaClic"})]})}),r.jsx("nav",{className:"admin-sidebar__nav",children:NR.map((x,_)=>r.jsxs("div",{className:"admin-nav__section",children:[r.jsx("h3",{className:"admin-nav__title",children:x.title}),r.jsx("ul",{className:"admin-nav__list",children:x.items.map(j=>r.jsx("li",{className:"admin-nav__item",children:r.jsxs(Be,{to:j.href,className:`admin-nav__link ${y(j)?"admin-nav__link--active":""}`,children:[r.jsx("span",{className:"admin-nav__icon",children:j.icon}),r.jsx("span",{className:"admin-nav__label",children:j.label})]})},j.id))})]},_))}),r.jsx("footer",{className:"admin-sidebar__footer",children:r.jsxs("div",{className:"admin-user",children:[r.jsx("div",{className:"admin-user__avatar",children:h()}),r.jsxs("div",{className:"admin-user__info",children:[r.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),r.jsx("div",{className:"admin-user__role",children:v()})]}),r.jsx("button",{onClick:p,disabled:u,className:"admin-logout-btn",title:"Se dconnecter",children:u?"...":""})]})})]}),r.jsxs("main",{className:"admin-content",children:[r.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!l),"aria-label":"Toggle sidebar",children:""}),e]}),r.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Oi="chapitres",Pv=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,numero:t.numero,titre:t.titre,description:t.description,objectifs:t.objectifs||[],dureeEstimee:t.dureeEstimee,isPremium:t.isPremium||!1,actif:t.actif!==!1,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Di={async getByDiscipline(e){try{const t=Te(_e(te,Oi),we("disciplineId","==",e),Ke("numero","asc"));return(await De(t)).docs.map(Pv)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const e=Te(_e(te,Oi),Ke("numero","asc"));return(await De(e)).docs.map(Pv)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getById(e){try{const t=Ne(te,Oi,e),n=await Dt(t);return n.exists()?Pv(n):null}catch(t){throw console.error("Erreur lors de la rcupration du chapitre:",t),new Error("Impossible de rcuprer le chapitre")}},async create(e){try{return(await Pt(_e(te,Oi),{...e,actif:e.actif!==!1,createdAt:xt(),updatedAt:xt()})).id}catch(t){throw console.error("Erreur lors de la cration du chapitre:",t),new Error("Impossible de crer le chapitre")}},async update(e,t){try{const n=Ne(te,Oi,e);await He(n,{...t,updatedAt:xt()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(e){try{const t=Ne(te,Oi,e);await Dn(t)}catch(t){throw console.error("Erreur lors de la suppression du chapitre:",t),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),n=$a(te);t.forEach(a=>{const l=Ne(te,Oi,a.id);n.delete(l)}),await n.commit()}catch(t){throw console.error("Erreur lors de la suppression des chapitres:",t),new Error("Impossible de supprimer les chapitres")}},async reorder(e,t){try{const n=$a(te);t.forEach((a,l)=>{const o=Ne(te,Oi,a);n.update(o,{numero:l+1,updatedAt:xt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(e,t){await this.update(e,{actif:t})},async countByDiscipline(e){return(await this.getByDiscipline(e)).length},async getNextNumero(e){return await this.countByDiscipline(e)+1}},_R=()=>{const{currentUser:e}=it(),t=ot(),[n,a]=g.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{(async()=>{try{o(!0),d(null);const[p,h,v,y,x]=await Promise.all([Xa.getAll(),Di.getAll(),Da.getStats(),De(_e(te,"quizzes")),De(_e(te,"quizzes_v2"))]);a({totalDisciplines:p.length,totalChapitres:h.length,totalRessources:v.total,ressourcesPremium:v.premium,ressourcesGratuites:v.gratuit,totalQuiz:y.size,totalQuizAvances:x.size,ressourcesParType:v.parType})}catch(p){console.error("Erreur lors du chargement des statistiques:",p),d("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),r.jsxs("div",{className:"admin-dashboard",children:[r.jsx("header",{className:"admin-page-header",children:r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),r.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",e?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:u})})]}),l?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/disciplines"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),r.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/chapitres"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),r.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalRessources}),r.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),r.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),r.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz-avance"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),r.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),r.jsxs("section",{className:"content-card",children:[r.jsx("div",{className:"content-card__header",children:r.jsx("h2",{children:"Rpartition des ressources par type"})}),r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"resource-type-grid",children:[r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),r.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),r.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),r.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),r.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),r.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),r.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[r.jsx("div",{className:"content-card__header",children:r.jsx("h2",{children:"Actions rapides"})}),r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"quick-actions-grid",children:[r.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les disciplines"}),r.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),r.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les chapitres"}),r.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),r.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les ressources"}),r.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),r.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les quiz"}),r.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),r.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Quiz avancs"}),r.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),r.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les utilisateurs"}),r.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),r.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},Le={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},kv={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},SR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(kv),[l,o]=g.useState(null),[u,d]=g.useState(!1),[m,p]=g.useState("all");g.useEffect(()=>{const A=Te(_e(te,"disciplines"),Ke("nom")),C=Cy(A,E=>{const O=E.docs.map(D=>({id:D.id,...D.data(),createdAt:D.data().createdAt?.toDate()||new Date,updatedAt:D.data().updatedAt?.toDate()||new Date}));t(O)});return()=>C()},[]);const h=g.useCallback(A=>{const C=j1(A)[0]?.value||"6eme";a(E=>({...E,niveau:A,classe:C,coefficient:A==="formation_libre"?void 0:E.coefficient}))},[]),v=async A=>{if(A.preventDefault(),!!n.nom.trim()){d(!0);try{const C={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:Me.now()};l?await He(Ne(te,"disciplines",l),C):await Pt(_e(te,"disciplines"),{...C,createdAt:Me.now()}),a(kv),o(null)}catch(C){console.error("Erreur lors de la sauvegarde :",C),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{d(!1)}}},y=A=>{a({nom:A.nom,niveau:A.niveau,classe:A.classe,ordre:A.ordre,coefficient:A.coefficient,couleur:A.couleur||"",icone:A.icone||"",description:A.description||""}),o(A.id)},x=async(A,C)=>{if(window.confirm(`Supprimer la discipline "${C}" ? Cette action est irrversible.`))try{await Dn(Ne(te,"disciplines",A))}catch(E){console.error("Erreur lors de la suppression :",E)}},_=()=>{a(kv),o(null)},j=j1(n.niveau),S=m==="all"?e:e.filter(A=>A.niveau===m),w=A=>({...Le.badge,...A==="college"?Le.badgeCollege:{},...A==="lycee"?Le.badgeLycee:{},...A==="formation_libre"?Le.badgeFormationLibre:{}});return r.jsxs("div",{style:Le.container,children:[r.jsx("h2",{style:Le.title,children:" Gestion des Disciplines"}),r.jsxs("form",{style:Le.form,onSubmit:v,children:[r.jsx("h3",{style:Le.formTitle,children:l?" Modifier la discipline":" Ajouter une discipline"}),r.jsxs("div",{style:Le.formGrid,children:[r.jsxs("div",{style:Le.fieldGroup,children:[r.jsx("label",{style:Le.label,children:"Nom de la discipline"}),r.jsx("input",{type:"text",style:Le.input,value:n.nom,onChange:A=>a({...n,nom:A.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),r.jsxs("div",{style:Le.fieldGroup,children:[r.jsx("label",{style:Le.label,children:"Niveau"}),r.jsxs("select",{style:Le.select,value:n.niveau,onChange:A=>h(A.target.value),children:[r.jsx("option",{value:"college",children:" Collge"}),r.jsx("option",{value:"lycee",children:" Lyce"}),r.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),r.jsxs("div",{style:Le.fieldGroup,children:[r.jsx("label",{style:Le.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),r.jsx("select",{style:Le.select,value:n.classe,onChange:A=>a({...n,classe:A.target.value}),children:j.map(({value:A,label:C})=>r.jsx("option",{value:A,children:C},A))})]}),r.jsxs("div",{style:Le.fieldGroup,children:[r.jsx("label",{style:Le.label,children:"Ordre d'affichage"}),r.jsx("input",{type:"number",style:Le.input,value:n.ordre,onChange:A=>a({...n,ordre:Number(A.target.value)}),placeholder:"Ex : 1",min:"0"})]}),r.jsxs("div",{style:Le.fieldGroup,children:[r.jsxs("label",{style:Le.label,children:["Coefficient",n.niveau==="formation_libre"&&r.jsx("span",{style:Le.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"number",style:Le.input,value:n.coefficient??"",onChange:A=>a({...n,coefficient:A.target.value?Number(A.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),r.jsxs("div",{style:Le.fieldGroup,children:[r.jsxs("label",{style:Le.label,children:["Couleur",r.jsx("span",{style:Le.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"color",style:{...Le.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:A=>a({...n,couleur:A.target.value})})]})]}),r.jsxs("div",{style:{...Le.fieldGroup,marginBottom:"20px"},children:[r.jsxs("label",{style:Le.label,children:["Description",r.jsx("span",{style:Le.labelOptional,children:"(optionnel)"})]}),r.jsx("textarea",{style:Le.textarea,value:n.description,onChange:A=>a({...n,description:A.target.value}),placeholder:"Brve description de la discipline..."})]}),r.jsxs("div",{style:{...Le.fieldGroup,marginBottom:"20px"},children:[r.jsxs("label",{style:Le.label,children:["Icne (emoji)",r.jsx("span",{style:Le.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"text",style:{...Le.input,maxWidth:"120px"},value:n.icone,onChange:A=>a({...n,icone:A.target.value}),placeholder:""})]}),r.jsxs("div",{children:[r.jsx("button",{type:"submit",style:Le.btnPrimary,disabled:u,children:u?"Enregistrement...":l?"Mettre  jour":"Ajouter la discipline"}),l&&r.jsx("button",{type:"button",style:Le.btnSecondary,onClick:_,children:"Annuler"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{style:Le.formTitle,children:[" Disciplines existantes (",S.length,")"]}),r.jsxs("div",{style:Le.tabs,children:[r.jsx("button",{style:{...Le.tab,...m==="all"?Le.tabActive:{}},onClick:()=>p("all"),children:"Toutes"}),r.jsx("button",{style:{...Le.tab,...m==="college"?Le.tabActive:{}},onClick:()=>p("college"),children:" Collge"}),r.jsx("button",{style:{...Le.tab,...m==="lycee"?Le.tabActive:{}},onClick:()=>p("lycee"),children:" Lyce"}),r.jsx("button",{style:{...Le.tab,...m==="formation_libre"?Le.tabActive:{}},onClick:()=>p("formation_libre"),children:" Formation libre"})]}),S.length===0?r.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):S.map(A=>r.jsxs("div",{style:Le.card,children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[A.icone&&r.jsx("span",{style:{fontSize:"1.2rem"},children:A.icone}),r.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:A.nom}),r.jsx("span",{style:w(A.niveau),children:t2[A.niveau]})]}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[A.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",r2(A.classe),A.coefficient!==void 0&&r.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",A.coefficient]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r.jsx("button",{style:Le.btnEdit,onClick:()=>y(A),children:"Modifier"}),r.jsx("button",{style:Le.btnDanger,onClick:()=>x(A.id,A.nom),children:"Supprimer"})]})]},A.id))]})]})},w1={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},wR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(""),[u,d]=g.useState(!0),[m,p]=g.useState(!1),[h,v]=g.useState(!1),[y,x]=g.useState(null),[_,j]=g.useState(null),[S,w]=g.useState(null),[A,C]=g.useState(!1),[E,O]=g.useState(!1),[D,T]=g.useState(null),[k,R]=g.useState(null),[L,Q]=g.useState({...w1,disciplineId:""}),[$,F]=g.useState({}),[Y,M]=g.useState(""),q=g.useCallback(async()=>{try{d(!0);const G=await Xa.getAll();t(G),G.length>0&&!l&&o(G[0].id)}catch(G){console.error("Erreur lors du chargement des disciplines:",G),j("Impossible de charger les disciplines.")}finally{d(!1)}},[l]),Z=g.useCallback(async()=>{if(!l){a([]);return}try{p(!0);const G=await Di.getByDiscipline(l);a(G)}catch(G){console.error("Erreur lors du chargement des chapitres:",G),j("Impossible de charger les chapitres.")}finally{p(!1)}},[l]);g.useEffect(()=>{q()},[q]),g.useEffect(()=>{Z()},[Z]);const H=()=>{const G={};return L.disciplineId||(G.disciplineId="Veuillez slectionner une discipline"),L.titre.trim()?L.titre.length<3&&(G.titre="Le titre doit contenir au moins 3 caractres"):G.titre="Le titre du chapitre est requis",L.numero<1&&(G.numero="Le numro doit tre suprieur  0"),F(G),Object.keys(G).length===0},B=G=>{o(G),j(null)},I=async()=>{const G=await Di.getNextNumero(l);T(null),Q({...w1,disciplineId:l,numero:G}),F({}),M(""),C(!0)},pe=G=>{T(G),Q({disciplineId:G.disciplineId,numero:G.numero,titre:G.titre,description:G.description,objectifs:G.objectifs||[],dureeEstimee:G.dureeEstimee,isPremium:G.isPremium,actif:G.actif}),F({}),M(""),C(!0)},re=G=>{R(G),O(!0)},de=()=>{C(!1),O(!1),T(null),R(null),F({}),M("")},ge=G=>{const{name:ce,value:X,type:je}=G.target,Ue=G.target.checked;Q(Ge=>({...Ge,[ce]:je==="checkbox"?Ue:je==="number"?Number(X):X})),$[ce]&&F(Ge=>({...Ge,[ce]:void 0}))},ye=()=>{Y.trim()&&(Q(G=>({...G,objectifs:[...G.objectifs||[],Y.trim()]})),M(""))},V=G=>{Q(ce=>({...ce,objectifs:(ce.objectifs||[]).filter((X,je)=>je!==G)}))},he=async G=>{if(G.preventDefault(),!!H())try{v(!0),j(null),D?(await Di.update(D.id,L),w("Chapitre modifi avec succs !")):(await Di.create(L),w("Chapitre cr avec succs !")),de(),await Z(),setTimeout(()=>w(null),3e3)}catch(ce){console.error("Erreur lors de la sauvegarde:",ce),j("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{v(!1)}},Pe=async()=>{if(k)try{x(k.id),await Di.delete(k.id),w("Chapitre supprim avec succs !"),de(),await Z(),setTimeout(()=>w(null),3e3)}catch(G){console.error("Erreur lors de la suppression:",G),j("Erreur lors de la suppression. Veuillez ressayer.")}finally{x(null)}},le=async G=>{try{await Di.toggleActive(G.id,!G.actif),await Z(),w(G.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>w(null),2e3)}catch{j("Erreur lors de la mise  jour")}},W=G=>{const ce=e.find(X=>X.id===G);return ce?ce.nom:"Non trouve"};return r.jsxs("div",{className:"chapitre-manager",children:[r.jsxs("header",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsxs("button",{onClick:I,className:"btn btn--primary",disabled:!l||u,children:[r.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),_&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:_})}),r.jsx("button",{onClick:()=>j(null),className:"alert__close",children:""})]}),S&&r.jsxs("div",{className:"alert alert--success",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:S})})]}),r.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"discipline-selector",children:[r.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),u?r.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?r.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",r.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):r.jsx("div",{className:"discipline-tabs",children:e.map(G=>r.jsxs("button",{className:`discipline-tab ${l===G.id?"discipline-tab--active":""}`,onClick:()=>B(G.id),style:{"--discipline-color":G.couleur||"#2563eb"},children:[r.jsx("span",{className:"discipline-tab__icon",children:G.icone||""}),r.jsx("span",{className:"discipline-tab__name",children:G.nom}),r.jsx("span",{className:"discipline-tab__class",children:G.classe})]},G.id))})]})})}),r.jsxs("div",{className:"admin-table-container",children:[r.jsx("div",{className:"admin-table-header",children:r.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${W(l)}`,n.length>0&&` (${n.length})`]})}),m?r.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des chapitres..."})]}):l?n.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),r.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),r.jsx("button",{onClick:I,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):r.jsx("div",{className:"chapitres-list",children:n.map(G=>r.jsxs("div",{className:`chapitre-card ${G.actif?"":"chapitre-card--inactive"}`,children:[r.jsx("div",{className:"chapitre-card__number",children:G.numero}),r.jsxs("div",{className:"chapitre-card__content",children:[r.jsxs("h3",{className:"chapitre-card__title",children:[G.titre,G.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"}),!G.actif&&r.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),G.description&&r.jsx("p",{className:"chapitre-card__description",children:G.description}),r.jsxs("div",{className:"chapitre-card__meta",children:[G.dureeEstimee&&r.jsxs("span",{children:[" ",G.dureeEstimee,"h estime"]}),G.objectifs&&G.objectifs.length>0&&r.jsxs("span",{children:[" ",G.objectifs.length," objectif(s)"]})]})]}),r.jsxs("div",{className:"chapitre-card__actions",children:[r.jsx("button",{onClick:()=>le(G),className:`table-action-btn ${G.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:G.actif?"Dsactiver":"Activer",children:G.actif?"":""}),r.jsx("button",{onClick:()=>pe(G),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),r.jsx("button",{onClick:()=>re(G),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:y===G.id,children:y===G.id?"":""})]})]},G.id))}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),r.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),A&&r.jsx("div",{className:"modal-overlay",onClick:de,children:r.jsxs("div",{className:"modal modal--lg",onClick:G=>G.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:D?"Modifier le chapitre":"Nouveau chapitre"}),r.jsx("button",{onClick:de,className:"modal__close",children:""})]}),r.jsxs("form",{onSubmit:he,children:[r.jsxs("div",{className:"modal__body",children:[!D&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),r.jsxs("select",{name:"disciplineId",className:`form-select ${$.disciplineId?"form-select--error":""}`,value:L.disciplineId,onChange:ge,children:[r.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(G=>r.jsxs("option",{value:G.id,children:[G.icone," ",G.nom," (",G.classe,")"]},G.id))]}),$.disciplineId&&r.jsx("span",{className:"form-error",children:$.disciplineId})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[r.jsx("label",{className:"form-label form-label--required",children:"N"}),r.jsx("input",{type:"number",name:"numero",className:`form-input ${$.numero?"form-input--error":""}`,min:"1",value:L.numero,onChange:ge}),$.numero&&r.jsx("span",{className:"form-error",children:$.numero})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),r.jsx("input",{type:"text",name:"titre",className:`form-input ${$.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:L.titre,onChange:ge}),$.titre&&r.jsx("span",{className:"form-error",children:$.titre})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:L.description||"",onChange:ge})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),r.jsxs("div",{className:"objectifs-input",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:Y,onChange:G=>M(G.target.value),onKeyPress:G=>G.key==="Enter"&&(G.preventDefault(),ye())}),r.jsx("button",{type:"button",onClick:ye,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),L.objectifs&&L.objectifs.length>0&&r.jsx("ul",{className:"objectifs-list",children:L.objectifs.map((G,ce)=>r.jsxs("li",{className:"objectif-item",children:[r.jsxs("span",{children:[" ",G]}),r.jsx("button",{type:"button",onClick:()=>V(ce),className:"objectif-remove",children:""})]},ce))})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),r.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:L.dureeEstimee||"",onChange:ge})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Options"}),r.jsxs("div",{className:"form-options",children:[r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"isPremium",checked:L.isPremium,onChange:ge}),r.jsx("span",{children:"Contenu Premium "})]}),r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"actif",checked:L.actif!==!1,onChange:ge}),r.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{type:"button",onClick:de,className:"btn btn--outline",disabled:h,children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn btn--primary",disabled:h,children:h?"Enregistrement...":D?"Mettre  jour":"Crer le chapitre"})]})]})]})}),E&&k&&r.jsx("div",{className:"modal-overlay",onClick:de,children:r.jsxs("div",{className:"modal",onClick:G=>G.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),r.jsx("button",{onClick:de,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[r.jsxs("p",{children:["Supprimer le chapitre ",r.jsxs("strong",{children:[k.numero,". ",k.titre]})," ?"]}),r.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{onClick:de,className:"btn btn--outline",children:"Annuler"}),r.jsx("button",{onClick:Pe,className:"btn btn--danger",disabled:y!==null,children:y?"Suppression...":"Supprimer"})]})]})}),r.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},Ed=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],Ad={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},Tv=50,C1={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},CR=()=>{const{currentUser:e}=it(),[t,n]=g.useState([]),[a,l]=g.useState([]),[o,u]=g.useState([]),[d,m]=g.useState([]),[p,h]=g.useState(""),[v,y]=g.useState(""),[x,_]=g.useState(""),[j,S]=g.useState(""),[w,A]=g.useState(""),[C,E]=g.useState(!0),[O,D]=g.useState(!1),[T,k]=g.useState(!1),[R,L]=g.useState(!1),[Q,$]=g.useState(null),[F,Y]=g.useState(!1),[M,q]=g.useState(0),[Z,H]=g.useState(null),[B,I]=g.useState(null),[pe,re]=g.useState(!1),[de,ge]=g.useState(!1),[ye,V]=g.useState(!1),[he,Pe]=g.useState(null),[le,W]=g.useState(null),[G,ce]=g.useState(null),[X,je]=g.useState({...C1,disciplineId:""}),[Ue,Ge]=g.useState({}),[Ye,$t]=g.useState(null),[Er,Zt]=g.useState(null),kn=g.useRef(null),[me,ze]=g.useState(""),Re=g.useCallback(async()=>{try{E(!0);const ne=await Xa.getAll();n(ne),ne.length>0&&!p&&h(ne[0].id)}catch(ne){console.error("Erreur lors du chargement des disciplines:",ne),H("Impossible de charger les disciplines.")}finally{E(!1)}},[p]),J=g.useCallback(async()=>{if(!p){l([]);return}try{D(!0);const ne=await Di.getByDiscipline(p);l(ne)}catch(ne){console.error("Erreur lors du chargement des chapitres:",ne)}finally{D(!1)}},[p]),fe=g.useCallback(async()=>{if(!p){u([]),m([]);return}try{k(!0);const ne=await Da.getByDiscipline(p);u(ne),m(ne)}catch(ne){console.error("Erreur lors du chargement des ressources:",ne),H("Impossible de charger les ressources.")}finally{k(!1)}},[p]);g.useEffect(()=>{Re()},[Re]),g.useEffect(()=>{J()},[J]),g.useEffect(()=>{fe()},[fe]),g.useEffect(()=>{let ne=[...o];if(v&&(ne=ne.filter(Ie=>Ie.chapitre===v)),x&&(ne=ne.filter(Ie=>Ie.type===x)),j==="premium"?ne=ne.filter(Ie=>Ie.isPremium):j==="free"&&(ne=ne.filter(Ie=>!Ie.isPremium)),w){const Ie=w.toLowerCase();ne=ne.filter(bt=>bt.titre.toLowerCase().includes(Ie)||bt.description?.toLowerCase().includes(Ie)||bt.tags?.some(_r=>_r.toLowerCase().includes(Ie)))}m(ne)},[o,v,x,j,w]);const Se=()=>{const ne={};if(X.disciplineId||(ne.disciplineId="Veuillez slectionner une discipline"),X.titre.trim()?X.titre.length<3&&(ne.titre="Le titre doit contenir au moins 3 caractres"):ne.titre="Le titre est requis",X.type||(ne.type="Veuillez slectionner un type de ressource"),Ye){const Ie="."+Ye.name.split(".").pop()?.toLowerCase(),bt=Ad[X.type];bt.includes(Ie)||(ne.fichier=`Extension non autorise. Extensions acceptes : ${bt.join(", ")}`),Ye.size/(1024*1024)>Tv&&(ne.fichier=`Le fichier est trop volumineux (max ${Tv} Mo)`)}return Ge(ne),Object.keys(ne).length===0},lt=ne=>{h(ne),y(""),H(null)},qr=()=>{Pe(null),je({...C1,disciplineId:p}),Ge({}),$t(null),Zt(null),ze(""),re(!0)},Gt=ne=>{Pe(ne),je({disciplineId:ne.disciplineId,titre:ne.titre,type:ne.type,description:ne.description,contenu:ne.contenu,chapitre:ne.chapitre||"",ordre:ne.ordre,isPremium:ne.isPremium,actif:ne.actif,tags:ne.tags||[],duree:ne.duree,urlExterne:ne.urlExterne||""}),Ge({}),$t(null),Zt(ne.fichierURL||null),ze(""),re(!0)},jr=ne=>{ce(ne),V(!0)},Yi=ne=>{W(ne),ge(!0)},Nr=()=>{re(!1),ge(!1),V(!1),Pe(null),W(null),ce(null),Ge({}),$t(null),Zt(null),ze("")},St=ne=>{const{name:Ie,value:bt,type:_r}=ne.target,ho=ne.target.checked;je(Xi=>({...Xi,[Ie]:_r==="checkbox"?ho:_r==="number"?Number(bt):bt})),Ue[Ie]&&Ge(Xi=>({...Xi,[Ie]:void 0}))},Kn=ne=>{const Ie=ne.target.files?.[0];if(Ie)if($t(Ie),Ge(bt=>({...bt,fichier:void 0})),Ie.type.startsWith("image/")||Ie.type.startsWith("video/")){const bt=new FileReader;bt.onloadend=()=>{Zt(bt.result)},bt.readAsDataURL(Ie)}else Zt(null)},Ar=()=>{$t(null),Zt(null),kn.current&&(kn.current.value="")},mu=()=>{me.trim()&&!X.tags?.includes(me.trim())&&(je(ne=>({...ne,tags:[...ne.tags||[],me.trim()]})),ze(""))},fp=ne=>{je(Ie=>({...Ie,tags:(Ie.tags||[]).filter((bt,_r)=>_r!==ne)}))},mp=async ne=>{if(ne.preventDefault(),!!Se())try{L(!0),H(null);let Ie=he?.fichierURL,bt=he?.fichierNom;if(Ye){Y(!0);const ho=he?.id||`temp_${Date.now()}`;Ie=await Da.uploadFile(Ye,ho),bt=Ye?.name||"fichier",Y(!1)}const _r={...X,fichierURL:Ie,fichierNom:bt};he?(await Da.update(he.id,_r),I("Ressource modifie avec succs !")):(await Da.create(_r,"admin"),I("Ressource cre avec succs !")),Nr(),await fe(),setTimeout(()=>I(null),3e3)}catch(Ie){console.error("Erreur lors de la sauvegarde:",Ie),H("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{L(!1),Y(!1),q(0)}},Ks=async()=>{if(le)try{$(le.id),le.fichierURL&&await Da.deleteFile(le.fichierURL),await Da.delete(le.id),I("Ressource supprime avec succs !"),Nr(),await fe(),setTimeout(()=>I(null),3e3)}catch(ne){console.error("Erreur lors de la suppression:",ne),H("Erreur lors de la suppression. Veuillez ressayer.")}finally{$(null)}},Xs=async ne=>{try{await Da.togglePremium(ne.id,!ne.isPremium),await fe(),I(ne.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>I(null),2e3)}catch{H("Erreur lors de la mise  jour")}},Ws=ne=>{const Ie=t.find(bt=>bt.id===ne);return Ie?Ie.nom:"Non trouve"},fa=ne=>{const Ie=a.find(bt=>bt.id===ne);return Ie?`${Ie.numero}. ${Ie.titre}`:""},Xn=ne=>Ed.find(Ie=>Ie.value===ne)||Ed[0],Ki=ne=>ne<1024?ne+" o":ne<1024*1024?(ne/1024).toFixed(1)+" Ko":(ne/(1024*1024)).toFixed(1)+" Mo";return r.jsxs("div",{className:"resource-manager",children:[r.jsxs("header",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsxs("button",{onClick:qr,className:"btn btn--primary",disabled:!p||C,children:[r.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),Z&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:Z})}),r.jsx("button",{onClick:()=>H(null),className:"alert__close",children:""})]}),B&&r.jsxs("div",{className:"alert alert--success",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:B})})]}),r.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"discipline-selector",children:[r.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),C?r.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?r.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",r.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):r.jsx("div",{className:"discipline-tabs",children:t.map(ne=>r.jsxs("button",{className:`discipline-tab ${p===ne.id?"discipline-tab--active":""}`,onClick:()=>lt(ne.id),style:{"--discipline-color":ne.couleur||"#2563eb"},children:[r.jsx("span",{className:"discipline-tab__icon",children:ne.icone||""}),r.jsx("span",{className:"discipline-tab__name",children:ne.nom}),r.jsx("span",{className:"discipline-tab__class",children:ne.classe})]},ne.id))})]})})}),r.jsxs("div",{className:"admin-table-container",children:[r.jsxs("div",{className:"admin-table-header",children:[r.jsxs("h2",{className:"admin-table-title",children:["Ressources ",p&&`- ${Ws(p)}`,d.length>0&&` (${d.length})`]}),r.jsxs("div",{className:"admin-table-actions",children:[r.jsxs("div",{className:"search-input",children:[r.jsx("span",{className:"search-input__icon",children:""}),r.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:w,onChange:ne=>A(ne.target.value)})]}),r.jsxs("select",{className:"form-select form-select--sm",value:v,onChange:ne=>y(ne.target.value),disabled:O||a.length===0,children:[r.jsx("option",{value:"",children:"Tous les chapitres"}),a.map(ne=>r.jsxs("option",{value:ne.id,children:[ne.numero,". ",ne.titre]},ne.id))]}),r.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:ne=>_(ne.target.value),children:[r.jsx("option",{value:"",children:"Tous les types"}),Ed.map(ne=>r.jsxs("option",{value:ne.value,children:[ne.icon," ",ne.label]},ne.value))]}),r.jsxs("select",{className:"form-select form-select--sm",value:j,onChange:ne=>S(ne.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"premium",children:" Premium"}),r.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),T?r.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des ressources..."})]}):p?d.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),r.jsx("p",{className:"empty-state__message",children:w||x||j||v?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!w&&!x&&!j&&!v&&r.jsx("button",{onClick:qr,className:"btn btn--primary",children:"Crer la premire ressource"})]}):r.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:d.map(ne=>{const Ie=Xn(ne.type);return r.jsxs("div",{className:"resource-item",children:[r.jsx("div",{className:`resource-item__icon resource-item__icon--${ne.type}`,style:{backgroundColor:`${Ie.color}15`,color:Ie.color},children:Ie.icon}),r.jsxs("div",{className:"resource-item__content",children:[r.jsxs("div",{className:"resource-item__title",children:[ne.titre,ne.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"}),!ne.actif&&r.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),r.jsxs("div",{className:"resource-item__meta",children:[r.jsx("span",{children:Ie.label}),ne.chapitre&&r.jsxs("span",{children:[" ",fa(ne.chapitre)]}),ne.duree&&r.jsxs("span",{children:[" ",ne.duree," min"]}),ne.fichierNom&&r.jsxs("span",{children:[" ",ne.fichierNom]}),ne.tags&&ne.tags.length>0&&r.jsxs("span",{children:[" ",ne.tags.join(", ")]})]})]}),r.jsxs("div",{className:"resource-item__actions",children:[r.jsx("button",{onClick:()=>Xs(ne),className:`table-action-btn ${ne.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:ne.isPremium?"Passer en gratuit":"Passer en Premium",children:ne.isPremium?"":""}),(ne.fichierURL||ne.urlExterne)&&r.jsx("button",{onClick:()=>jr(ne),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),r.jsx("button",{onClick:()=>Gt(ne),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),r.jsx("button",{onClick:()=>Yi(ne),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:Q===ne.id,children:Q===ne.id?"":""})]})]},ne.id)})}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),r.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),pe&&r.jsx("div",{className:"modal-overlay",onClick:Nr,children:r.jsxs("div",{className:"modal modal--xl",onClick:ne=>ne.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:he?"Modifier la ressource":"Nouvelle ressource"}),r.jsx("button",{onClick:Nr,className:"modal__close",children:""})]}),r.jsxs("form",{onSubmit:mp,children:[r.jsxs("div",{className:"modal__body",children:[!he&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),r.jsxs("select",{name:"disciplineId",className:`form-select ${Ue.disciplineId?"form-select--error":""}`,value:X.disciplineId,onChange:St,children:[r.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(ne=>r.jsxs("option",{value:ne.id,children:[ne.icone," ",ne.nom," (",ne.classe,")"]},ne.id))]}),Ue.disciplineId&&r.jsx("span",{className:"form-error",children:Ue.disciplineId})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsx("label",{className:"form-label form-label--required",children:"Titre"}),r.jsx("input",{type:"text",name:"titre",className:`form-input ${Ue.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:X.titre,onChange:St}),Ue.titre&&r.jsx("span",{className:"form-error",children:Ue.titre})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{className:"form-label form-label--required",children:"Type"}),r.jsx("select",{name:"type",className:`form-select ${Ue.type?"form-select--error":""}`,value:X.type,onChange:St,children:Ed.map(ne=>r.jsxs("option",{value:ne.value,children:[ne.icon," ",ne.label]},ne.value))}),Ue.type&&r.jsx("span",{className:"form-error",children:Ue.type})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),r.jsxs("select",{name:"chapitreId",className:"form-select",value:X.chapitre||"",onChange:St,disabled:O,children:[r.jsx("option",{value:"",children:"Aucun chapitre"}),a.map(ne=>r.jsxs("option",{value:ne.id,children:[ne.numero,". ",ne.titre]},ne.id))]})]}),r.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[r.jsx("label",{className:"form-label",children:"Ordre"}),r.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:X.ordre,onChange:St})]}),r.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[r.jsx("label",{className:"form-label",children:"Dure (min)"}),r.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:X.duree||"",onChange:St})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:X.description||"",onChange:St})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Fichier",r.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",Ad[X.type].join(", ")," - max ",Tv," Mo)"]})]}),r.jsxs("div",{className:"file-upload",children:[r.jsx("input",{ref:kn,type:"file",accept:Ad[X.type].join(","),onChange:Kn,className:"file-upload__input",id:"file-input"}),!Ye&&!Er?r.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[r.jsx("div",{className:"file-upload__icon",children:""}),r.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),r.jsx("p",{className:"file-upload__hint",children:Ad[X.type].join(", ")})]}):r.jsxs("div",{className:"file-upload__preview",children:[Ye?.type.startsWith("image/")&&Er&&r.jsx("img",{src:Er,alt:"Aperu",className:"file-preview__image"}),Ye?.type.startsWith("video/")&&Er&&r.jsx("video",{src:Er,controls:!0,className:"file-preview__video"}),!Ye?.type.startsWith("image/")&&!Ye?.type.startsWith("video/")&&r.jsx("div",{className:"file-preview__document",children:r.jsx("span",{className:"file-preview__icon",children:Xn(X.type).icon})}),r.jsxs("div",{className:"file-preview__info",children:[r.jsx("p",{className:"file-preview__name",children:Ye?.name||he?.fichierNom}),Ye&&r.jsx("p",{className:"file-preview__size",children:Ki(Ye.size)})]}),r.jsx("button",{type:"button",onClick:Ar,className:"file-preview__remove",children:""})]})]}),Ue.fichier&&r.jsx("span",{className:"form-error",children:Ue.fichier}),F&&r.jsxs("div",{className:"upload-progress",children:[r.jsx("div",{className:"upload-progress__bar",style:{width:`${M}%`}}),r.jsxs("span",{className:"upload-progress__text",children:[M,"%"]})]})]}),X.type==="video"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),r.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:X.urlExterne||"",onChange:St}),r.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),X.type==="cours"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contenu du cours"}),r.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:X.contenu||"",onChange:St}),r.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Tags"}),r.jsxs("div",{className:"tags-input",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:me,onChange:ne=>ze(ne.target.value),onKeyPress:ne=>ne.key==="Enter"&&(ne.preventDefault(),mu())}),r.jsx("button",{type:"button",onClick:mu,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),X.tags&&X.tags.length>0&&r.jsx("div",{className:"tags-list",children:X.tags.map((ne,Ie)=>r.jsxs("span",{className:"tag",children:[ne,r.jsx("button",{type:"button",onClick:()=>fp(Ie),className:"tag__remove",children:""})]},Ie))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Options"}),r.jsxs("div",{className:"form-options",children:[r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"isPremium",checked:X.isPremium,onChange:St}),r.jsx("span",{children:"Contenu Premium "})]}),r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"actif",checked:X.actif!==!1,onChange:St}),r.jsx("span",{children:"Ressource active"})]})]})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{type:"button",onClick:Nr,className:"btn btn--outline",disabled:R||F,children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn btn--primary",disabled:R||F,children:R||F?F?`Upload ${M}%...`:"Enregistrement...":he?"Mettre  jour":"Crer la ressource"})]})]})]})}),ye&&G&&r.jsx("div",{className:"modal-overlay",onClick:Nr,children:r.jsxs("div",{className:"modal modal--xl",onClick:ne=>ne.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsxs("h2",{className:"modal__title",children:[Xn(G.type).icon," ",G.titre]}),r.jsx("button",{onClick:Nr,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[G.type==="video"&&G.urlExterne?r.jsx("div",{className:"preview-video",children:r.jsx("iframe",{src:G.urlExterne.replace("watch?v=","embed/"),title:G.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):G.fichierURL?r.jsx("div",{className:"preview-file",children:G.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?r.jsx("img",{src:G.fichierURL,alt:G.titre}):G.fichierURL.match(/\.(mp4|webm)$/i)?r.jsx("video",{src:G.fichierURL,controls:!0}):G.fichierURL.match(/\.pdf$/i)?r.jsx("iframe",{src:G.fichierURL,title:G.titre}):r.jsxs("div",{className:"preview-download",children:[r.jsx("span",{className:"preview-download__icon",children:Xn(G.type).icon}),r.jsx("p",{children:G.fichierNom}),r.jsx("a",{href:G.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):G.contenu?r.jsx("div",{className:"preview-content",children:r.jsx("p",{children:G.contenu})}):r.jsx("div",{className:"preview-empty",children:r.jsx("p",{children:"Aucun contenu  prvisualiser"})}),r.jsxs("div",{className:"preview-info",children:[G.description&&r.jsx("p",{className:"preview-description",children:G.description}),r.jsxs("div",{className:"preview-meta",children:[r.jsxs("span",{children:["Type : ",Xn(G.type).label]}),G.duree&&r.jsxs("span",{children:["Dure : ",G.duree," min"]}),G.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),de&&le&&r.jsx("div",{className:"modal-overlay",onClick:Nr,children:r.jsxs("div",{className:"modal",onClick:ne=>ne.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),r.jsx("button",{onClick:Nr,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[r.jsxs("p",{children:["Supprimer la ressource ",r.jsx("strong",{children:le.titre})," ?"]}),le.fichierURL&&r.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{onClick:Nr,className:"btn btn--outline",children:"Annuler"}),r.jsx("button",{onClick:Ks,className:"btn btn--danger",disabled:Q!==null,children:Q?"Suppression...":"Supprimer"})]})]})}),r.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},n2=_e(te,"quizzes"),a2=async e=>{try{let t=Te(n2,Ke("titre","asc"));e?.disciplineId;let a=(await De(t)).docs.map(l=>({id:l.id,...l.data()}));return e?.isPremium,e?.difficulte,a}catch(t){throw console.error("Erreur lors de la rcupration des quiz :",t),t}},ER=async e=>{try{const t=await Dt(Ne(te,"quizzes",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){throw console.error("Erreur lors de la rcupration du quiz :",t),t}},AR=async e=>{try{return(await Pt(n2,{...e,createdAt:Me.now(),updatedAt:Me.now()})).id}catch(t){throw console.error("Erreur lors de la cration du quiz :",t),t}},zR=async(e,t)=>{try{await He(Ne(te,"quizzes",e),{...t,updatedAt:Me.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},OR=async e=>{try{await Dn(Ne(te,"quizzes",e))}catch(t){throw console.error("Erreur lors de la suppression du quiz :",t),t}},DR=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,E1=()=>({id:DR(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),A1=e=>{const t=e.questions||[],n=t.reduce((l,o)=>l+(o.points||1),0),a={facile:t.filter(l=>l.difficulte==="facile").length,moyen:t.filter(l=>l.difficulte==="moyen").length,difficile:t.filter(l=>l.difficulte==="difficile").length};return{nombreQuestions:t.length,totalPoints:n,parDifficulte:a,duree:e.duree||0}},MR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(null),[h,v]=g.useState(""),[y,x]=g.useState(""),[_,j]=g.useState(""),[S,w]=g.useState(""),[A,C]=g.useState(!1),[E,O]=g.useState("list"),[D,T]=g.useState(null),[k,R]=g.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[L,Q]=g.useState(null),[$,F]=g.useState(!1),[Y,M]=g.useState(null),[q,Z]=g.useState(null),[H,B]=g.useState({}),[I,pe]=g.useState(!1),re=g.useCallback(async()=>{o(!0),d(null);try{const[me,ze]=await Promise.all([a2(),Xa.getAll()]);t(me),a(ze.map(Re=>({id:Re.id,nom:Re.nom||Re.name||Re.id})))}catch(me){d("Erreur lors du chargement des donnes."),console.error(me)}finally{o(!1)}},[]);g.useEffect(()=>{re()},[re]),g.useEffect(()=>{if(m){const me=setTimeout(()=>p(null),4e3);return()=>clearTimeout(me)}},[m]);const de=e.filter(me=>{if(h){const ze=h.toLowerCase();if(!me.titre.toLowerCase().includes(ze))return!1}return!(y&&me.disciplineId!==y||_==="true"&&!me.isPremium||_==="false"&&me.isPremium||S&&!me.questions?.some(Re=>Re.difficulte===S))}),ge=()=>{T(null),R({disciplineId:"",titre:"",questions:[E1()],duree:15,isPremium:!1,noteMinimale:50}),Q(null),O("form")},ye=me=>{T(me),R({disciplineId:me.disciplineId,titre:me.titre,questions:me.questions||[],duree:me.duree||15,isPremium:me.isPremium||!1,noteMinimale:me.noteMinimale||50}),Q(null),O("form")},V=async()=>{if(!k.titre.trim()){d("Le titre du quiz est obligatoire.");return}if(!k.disciplineId){d("Veuillez slectionner une discipline.");return}if(k.questions.length===0){d("Le quiz doit contenir au moins une question.");return}for(let me=0;me<k.questions.length;me++){const ze=k.questions[me];if(!ze.question.trim()){d(`La question ${me+1} n'a pas d'nonc.`);return}if(ze.options.filter(J=>!J.trim()).length>0){d(`La question ${me+1} a des options vides.`);return}}F(!0),d(null);try{D?(await zR(D.id,k),p("Quiz mis  jour avec succs !")):(await AR(k),p("Quiz cr avec succs !")),await re(),O("list")}catch(me){d("Erreur lors de la sauvegarde du quiz."),console.error(me)}finally{F(!1)}},he=async me=>{try{await OR(me),p("Quiz supprim avec succs."),M(null),await re()}catch(ze){d("Erreur lors de la suppression du quiz."),console.error(ze)}},Pe=()=>{const me=E1();R(ze=>({...ze,questions:[...ze.questions,me]})),Q(me.id)},le=me=>{const ze=k.questions.find(Se=>Se.id===me);if(!ze)return;const Re={...ze,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${ze.question} (copie)`},J=k.questions.findIndex(Se=>Se.id===me),fe=[...k.questions];fe.splice(J+1,0,Re),R(Se=>({...Se,questions:fe})),Q(Re.id)},W=me=>{R(ze=>({...ze,questions:ze.questions.filter(Re=>Re.id!==me)})),L===me&&Q(null)},G=(me,ze,Re)=>{R(J=>({...J,questions:J.questions.map(fe=>fe.id===me?{...fe,[ze]:Re}:fe)}))},ce=(me,ze,Re)=>{R(J=>({...J,questions:J.questions.map(fe=>fe.id===me?{...fe,options:fe.options.map((Se,lt)=>lt===ze?Re:Se)}:fe)}))},X=me=>{Z(me),B({}),pe(!1),O("preview")},je=(me,ze)=>{I||B(Re=>({...Re,[me]:ze}))},Ue=()=>{pe(!0)},Ge=me=>n.find(ze=>ze.id===me)?.nom||me,Ye=({level:me})=>{const ze={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return r.jsx("span",{className:`quiz-badge ${ze[me]||"quiz-badge-moyen"}`,children:me.charAt(0).toUpperCase()+me.slice(1)})},$t=()=>r.jsxs(r.Fragment,{children:[u&&r.jsxs("div",{className:"admin-message admin-message-error",children:[r.jsx(of,{size:18}),r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:r.jsx(qi,{size:16})})]}),m&&r.jsxs("div",{className:"admin-message admin-message-success",children:[r.jsx(Rt,{size:18}),r.jsx("span",{children:m})]})]}),Er=()=>r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(ln,{size:24})," Gestion des Quiz"]}),r.jsxs("p",{className:"admin-subtitle",children:[e.length," quiz au total  ",de.length," affich(s)"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ge,children:[r.jsx(yc,{size:18})," Nouveau Quiz"]})]}),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search-wrapper",children:[r.jsx(XA,{size:18,className:"admin-search-icon"}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:h,onChange:me=>v(me.target.value)})]}),r.jsxs("button",{className:`admin-btn admin-btn-outline ${A?"active":""}`,onClick:()=>C(!A),children:[r.jsx(zy,{size:16})," Filtres",A?r.jsx(yx,{size:14}):r.jsx(lf,{size:14})]})]}),A&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Discipline"}),r.jsxs("select",{className:"admin-select",value:y,onChange:me=>x(me.target.value),children:[r.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(me=>r.jsx("option",{value:me.id,children:me.nom},me.id))]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Accs"}),r.jsxs("select",{className:"admin-select",value:_,onChange:me=>j(me.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"false",children:"Gratuit"}),r.jsx("option",{value:"true",children:"Premium"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Difficult"}),r.jsxs("select",{className:"admin-select",value:S,onChange:me=>w(me.target.value),children:[r.jsx("option",{value:"",children:"Toutes"}),r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),w(""),v("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des quiz..."})]}):de.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx(Zd,{size:48}),r.jsx("h3",{children:"Aucun quiz trouv"}),r.jsx("p",{children:e.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),e.length===0&&r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ge,children:[r.jsx(yc,{size:18})," Crer un quiz"]})]}):r.jsx("div",{className:"quiz-grid",children:de.map(me=>{const ze=A1(me);return r.jsxs("div",{className:"quiz-card",children:[r.jsxs("div",{className:"quiz-card-header",children:[r.jsxs("div",{className:"quiz-card-title-row",children:[r.jsx("h3",{className:"quiz-card-title",children:me.titre}),me.isPremium&&r.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[r.jsx(an,{size:12})," Premium"]})]}),r.jsx("span",{className:"quiz-card-discipline",children:Ge(me.disciplineId)})]}),r.jsxs("div",{className:"quiz-card-stats",children:[r.jsxs("div",{className:"quiz-stat",children:[r.jsx(Zd,{size:14}),r.jsxs("span",{children:[ze.nombreQuestions," question(s)"]})]}),r.jsxs("div",{className:"quiz-stat",children:[r.jsx(Ui,{size:14}),r.jsxs("span",{children:[ze.totalPoints," pts"]})]}),r.jsxs("div",{className:"quiz-stat",children:[r.jsx(Xl,{size:14}),r.jsxs("span",{children:[ze.duree," min"]})]})]}),r.jsxs("div",{className:"quiz-card-difficulty",children:[ze.parDifficulte.facile>0&&r.jsx(Ye,{level:"facile"}),ze.parDifficulte.moyen>0&&r.jsx(Ye,{level:"moyen"}),ze.parDifficulte.difficile>0&&r.jsx(Ye,{level:"difficile"})]}),r.jsxs("div",{className:"quiz-card-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>X(me),title:"Prvisualiser",children:[r.jsx(Vl,{size:14})," Aperu"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ye(me),title:"Modifier",children:[r.jsx(Lq,{size:14})," Modifier"]}),Y===me.id?r.jsxs("div",{className:"quiz-delete-confirm",children:[r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>he(me.id),children:"Confirmer"}),r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>M(null),children:"Annuler"})]}):r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>M(me.id),title:"Supprimer",children:r.jsx(f1,{size:14})})]})]},me.id)})})]}),Zt=()=>r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(ln,{size:24}),D?"Modifier le quiz":"Nouveau quiz"]}),r.jsxs("p",{className:"admin-subtitle",children:[k.questions.length," question(s) ajoute(s)"]})]}),r.jsxs("div",{className:"admin-header-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>O("list"),children:[r.jsx(qi,{size:18})," Annuler"]}),r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:V,disabled:$,children:[r.jsx($q,{size:18})," ",$?"Enregistrement...":"Enregistrer"]})]})]}),r.jsxs("div",{className:"admin-card quiz-form-section",children:[r.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),r.jsxs("div",{className:"quiz-form-grid",children:[r.jsxs("div",{className:"admin-form-group quiz-form-full",children:[r.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),r.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:k.titre,onChange:me=>R(ze=>({...ze,titre:me.target.value}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Discipline *"}),r.jsxs("select",{className:"admin-select",value:k.disciplineId,onChange:me=>R(ze=>({...ze,disciplineId:me.target.value})),children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(me=>r.jsx("option",{value:me.id,children:me.nom},me.id))]})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),r.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:k.duree,onChange:me=>R(ze=>({...ze,duree:parseInt(me.target.value)||15}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),r.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:k.noteMinimale,onChange:me=>R(ze=>({...ze,noteMinimale:parseInt(me.target.value)||50}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Accs"}),r.jsxs("div",{className:`quiz-toggle ${k.isPremium?"quiz-toggle-active":""}`,onClick:()=>R(me=>({...me,isPremium:!me.isPremium})),children:[r.jsx(an,{size:16}),r.jsx("span",{children:k.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),r.jsxs("div",{className:"admin-card quiz-form-section",children:[r.jsxs("div",{className:"quiz-questions-header",children:[r.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",k.questions.length,")"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Pe,children:[r.jsx(yc,{size:14})," Ajouter une question"]})]}),k.questions.length===0?r.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[r.jsx(Zd,{size:36}),r.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):r.jsx("div",{className:"quiz-questions-list",children:k.questions.map((me,ze)=>r.jsxs("div",{className:`quiz-question-item ${L===me.id?"expanded":""}`,children:[r.jsxs("div",{className:"quiz-question-header",onClick:()=>Q(L===me.id?null:me.id),children:[r.jsxs("div",{className:"quiz-question-header-left",children:[r.jsx(Bq,{size:16,className:"quiz-grip-icon"}),r.jsxs("span",{className:"quiz-question-number",children:["Q",ze+1]}),r.jsx("span",{className:"quiz-question-preview",children:me.question||"Question sans nonc..."})]}),r.jsxs("div",{className:"quiz-question-header-right",children:[r.jsx(Ye,{level:me.difficulte||"moyen"}),r.jsxs("span",{className:"quiz-question-points",children:[me.points," pt(s)"]}),L===me.id?r.jsx(yx,{size:16}):r.jsx(lf,{size:16})]})]}),L===me.id&&r.jsxs("div",{className:"quiz-question-body",children:[r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"nonc de la question *"}),r.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:me.question,onChange:Re=>G(me.id,"question",Re.target.value)})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),r.jsx("div",{className:"quiz-options-grid",children:me.options.map((Re,J)=>r.jsxs("div",{className:`quiz-option-item ${me.reponseCorrecte===J?"quiz-option-correct":""}`,children:[r.jsx("button",{type:"button",className:`quiz-option-radio ${me.reponseCorrecte===J?"active":""}`,onClick:()=>G(me.id,"reponseCorrecte",J),title:me.reponseCorrecte===J?"Bonne rponse":"Marquer comme bonne rponse",children:me.reponseCorrecte===J?r.jsx(Rt,{size:16}):r.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+J)})}),r.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+J)}`,value:Re,onChange:fe=>ce(me.id,J,fe.target.value)})]},J))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),r.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:me.explication,onChange:Re=>G(me.id,"explication",Re.target.value)})]}),r.jsxs("div",{className:"quiz-question-meta",children:[r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Difficult"}),r.jsxs("select",{className:"admin-select",value:me.difficulte,onChange:Re=>G(me.id,"difficulte",Re.target.value),children:[r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Points"}),r.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:me.points,onChange:Re=>G(me.id,"points",parseInt(Re.target.value)||1)})]})]}),r.jsxs("div",{className:"quiz-question-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>le(me.id),children:[r.jsx(Uq,{size:14})," Dupliquer"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>W(me.id),children:[r.jsx(f1,{size:14})," Supprimer"]})]})]})]},me.id))}),k.questions.length>0&&r.jsx("div",{className:"quiz-add-question-bottom",children:r.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Pe,children:[r.jsx(yc,{size:16})," Ajouter une question"]})})]})]}),kn=()=>{if(!q)return null;const me=A1(q);let ze=0,Re=0;return I&&q.questions.forEach(J=>{Re+=J.points||1,H[J.id]===J.reponseCorrecte&&(ze+=J.points||1)}),r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(Vl,{size:24})," Prvisualisation : ",q.titre]}),r.jsxs("p",{className:"admin-subtitle",children:[Ge(q.disciplineId),"  ",me.nombreQuestions," questions  ",me.duree," min"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{O("list"),Z(null)},children:[r.jsx(qi,{size:18})," Fermer"]})]}),I&&r.jsxs("div",{className:`quiz-preview-score ${ze/Re>=(q.noteMinimale||50)/100?"success":"fail"}`,children:[r.jsx(Ui,{size:32}),r.jsxs("div",{children:[r.jsxs("h3",{children:["Score : ",ze,"/",Re," (",Math.round(ze/Re*100),"%)"]}),r.jsxs("p",{children:["Note minimale : ",q.noteMinimale||50,"% "," ",ze/Re>=(q.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),r.jsx("div",{className:"quiz-preview-questions",children:q.questions.map((J,fe)=>{const Se=H[J.id],lt=Se===J.reponseCorrecte;return r.jsxs("div",{className:"admin-card quiz-preview-question",children:[r.jsxs("div",{className:"quiz-preview-question-header",children:[r.jsxs("span",{className:"quiz-question-number",children:["Q",fe+1]}),r.jsx(Ye,{level:J.difficulte||"moyen"}),r.jsxs("span",{className:"quiz-question-points",children:[J.points," pt(s)"]})]}),r.jsx("p",{className:"quiz-preview-question-text",children:J.question}),r.jsx("div",{className:"quiz-preview-options",children:J.options.map((qr,Gt)=>{let jr="quiz-preview-option";return I?Gt===J.reponseCorrecte?jr+=" correct":Gt===Se&&!lt&&(jr+=" incorrect"):Se===Gt&&(jr+=" selected"),r.jsxs("button",{className:jr,onClick:()=>je(J.id,Gt),disabled:I,children:[r.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+Gt)}),r.jsx("span",{children:qr}),I&&Gt===J.reponseCorrecte&&r.jsx(Rt,{size:16,className:"quiz-preview-check"})]},Gt)})}),I&&J.explication&&r.jsxs("div",{className:"quiz-preview-explication",children:[r.jsx("strong",{children:"Explication :"})," ",J.explication]})]},J.id)})}),!I&&r.jsx("div",{className:"quiz-preview-submit",children:r.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:Ue,disabled:Object.keys(H).length<q.questions.length,children:[r.jsx(Rt,{size:18})," Soumettre (",Object.keys(H).length,"/",q.questions.length,")"]})})]})};return r.jsxs("div",{className:"admin-container",children:[$t(),E==="list"&&Er(),E==="form"&&Zt(),E==="preview"&&kn()]})},i2=_e(te,"users"),PR=_e(te,"quizResults"),kR=async e=>{try{let t=Te(i2,Ke("displayName","asc"));e?.role;let a=(await De(t)).docs.map(l=>({uid:l.id,...l.data()}));return e?.isPremium,e?.isActive,e?.search,a}catch(t){throw console.error("Erreur lors de la rcupration des utilisateurs :",t),t}},TR=async(e,t)=>{try{await He(Ne(te,"users",e),{role:t,updatedAt:Me.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},qR=async(e,t)=>{try{const n={isPremium:t,updatedAt:Me.now()};if(t){const a=new Date;a.setDate(a.getDate()+30),n.subscriptionEnd=Me.fromDate(a)}else n.subscriptionEnd=null;await He(Ne(te,"users",e),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},RR=async(e,t)=>{try{await He(Ne(te,"users",e),{isActive:t,updatedAt:Me.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},IR=async e=>{try{const t=Te(PR,we("userId","==",e)),a=(await De(t)).docs.map(m=>({id:m.id,...m.data()})),l=a.length,o=a.filter(m=>m.reussi).length,u=l>0?Math.round(a.reduce((m,p)=>m+p.score,0)/l):0,d=a.length>0?new Date(Math.max(...a.map(m=>{const p=m.datePassage;return p?.toDate?p.toDate().getTime():new Date(p).getTime()}))):null;return{totalQuizPasses:l,scoresMoyens:u,quizReussis:o,dernierQuiz:d}}catch(t){return console.error("Erreur lors du calcul des statistiques :",t),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},LR=async()=>{try{const t=(await De(i2)).docs.map(n=>n.data());return{total:t.length,admins:t.filter(n=>n.role==="admin").length,profs:t.filter(n=>n.role==="prof").length,eleves:t.filter(n=>n.role==="eleve").length,premium:t.filter(n=>n.isPremium).length,actifs:t.filter(n=>n.isActive!==!1).length}}catch(e){throw console.error("Erreur lors du calcul des stats globales :",e),e}},$R=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(null),[h,v]=g.useState(""),[y,x]=g.useState(""),[_,j]=g.useState(""),[S,w]=g.useState(""),[A,C]=g.useState(!1),[E]=HA();g.useEffect(()=>{E.get("filter")==="premium"&&j("true")},[E]);const[O,D]=g.useState(null),[T,k]=g.useState(null),[R,L]=g.useState(!1),[Q,$]=g.useState(null),[F,Y]=g.useState(null),M=g.useCallback(async()=>{o(!0),d(null);try{const[V,he]=await Promise.all([kR(),LR()]);t(V),a(he)}catch(V){d("Erreur lors du chargement des utilisateurs."),console.error(V)}finally{o(!1)}},[]);g.useEffect(()=>{M()},[M]),g.useEffect(()=>{if(m){const V=setTimeout(()=>p(null),4e3);return()=>clearTimeout(V)}},[m]);const q=e.filter(V=>{if(h){const he=h.toLowerCase();if(!V.displayName?.toLowerCase().includes(he)&&!V.email?.toLowerCase().includes(he))return!1}return!(y&&V.role!==y||_==="true"&&!V.isPremium||_==="false"&&V.isPremium||S==="true"&&V.isActive===!1||S==="false"&&V.isActive!==!1)}),Z=async V=>{D(V),L(!0);try{const he=await IR(V.uid);k(he)}catch(he){console.error("Erreur lors du chargement des statistiques :",he),k(null)}finally{L(!1)}},H=async()=>{if(F){$(F.userId);try{switch(F.type){case"role":await TR(F.userId,F.value),p("Rle mis  jour avec succs.");break;case"premium":await qR(F.userId,F.value),p(F.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await RR(F.userId,F.value),p(F.value?"Compte ractiv.":"Compte dsactiv.");break}await M()}catch(V){d("Erreur lors de l'excution de l'action."),console.error(V)}finally{$(null),Y(null)}}},B=({role:V})=>{const he={admin:{icon:r.jsx(Ay,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:r.jsx(ws,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:r.jsx(ln,{size:12}),className:"user-badge-eleve",label:"lve"}},Pe=he[V]||he.eleve;return r.jsxs("span",{className:`user-badge ${Pe.className}`,children:[Pe.icon," ",Pe.label]})},I=V=>V?(V?.toDate?V.toDate():new Date(V)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",pe=V=>V?V.charAt(0).toUpperCase():"?",re=()=>r.jsxs(r.Fragment,{children:[u&&r.jsxs("div",{className:"admin-message admin-message-error",children:[r.jsx(of,{size:18}),r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:r.jsx(qi,{size:16})})]}),m&&r.jsxs("div",{className:"admin-message admin-message-success",children:[r.jsx(Rt,{size:18}),r.jsx("span",{children:m})]})]}),de=()=>{if(!n)return null;const V=[{label:"Total",value:n.total,icon:r.jsx(Wd,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:r.jsx(ln,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:r.jsx(ws,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:r.jsx(an,{size:20}),color:"stat-gold"}];return r.jsx("div",{className:"user-stats-grid",children:V.map(he=>r.jsxs("div",{className:`user-stat-card ${he.color}`,children:[r.jsx("div",{className:"user-stat-icon",children:he.icon}),r.jsxs("div",{className:"user-stat-info",children:[r.jsx("span",{className:"user-stat-value",children:he.value}),r.jsx("span",{className:"user-stat-label",children:he.label})]})]},he.label))})},ge=()=>F?r.jsx("div",{className:"admin-modal-overlay",onClick:()=>Y(null),children:r.jsxs("div",{className:"admin-modal",onClick:V=>V.stopPropagation(),children:[r.jsxs("div",{className:"admin-modal-header",children:[r.jsx("h3",{children:"Confirmer l'action"}),r.jsx("button",{className:"admin-modal-close",onClick:()=>Y(null),children:r.jsx(qi,{size:20})})]}),r.jsx("div",{className:"admin-modal-body",children:r.jsx("p",{children:F.label})}),r.jsxs("div",{className:"admin-modal-footer",children:[r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>Y(null),children:"Annuler"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:H,disabled:Q===F.userId,children:Q===F.userId?"En cours...":"Confirmer"})]})]})}):null,ye=()=>O?r.jsx("div",{className:"admin-modal-overlay",onClick:()=>D(null),children:r.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:V=>V.stopPropagation(),children:[r.jsxs("div",{className:"admin-modal-header",children:[r.jsx("h3",{children:"Dtail de l'utilisateur"}),r.jsx("button",{className:"admin-modal-close",onClick:()=>D(null),children:r.jsx(qi,{size:20})})]}),r.jsxs("div",{className:"admin-modal-body",children:[r.jsxs("div",{className:"user-detail-profile",children:[r.jsx("div",{className:"user-detail-avatar",children:pe(O.displayName)}),r.jsxs("div",{className:"user-detail-info",children:[r.jsx("h4",{children:O.displayName||"Sans nom"}),r.jsx("p",{children:O.email}),r.jsxs("div",{className:"user-detail-badges",children:[r.jsx(B,{role:O.role}),O.isPremium&&r.jsxs("span",{className:"user-badge user-badge-premium",children:[r.jsx(an,{size:12})," Premium"]}),r.jsx("span",{className:`user-badge ${O.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:O.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),r.jsxs("div",{className:"user-detail-dates",children:[r.jsxs("div",{children:[r.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),r.jsx("span",{children:I(O.createdAt)})]}),O.isPremium&&O.subscriptionEnd&&r.jsxs("div",{children:[r.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),r.jsx("span",{children:I(O.subscriptionEnd)})]})]}),r.jsxs("div",{className:"user-detail-stats-section",children:[r.jsxs("h4",{children:[r.jsx(Cs,{size:18})," Statistiques"]}),R?r.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):T?r.jsxs("div",{className:"user-detail-stats-grid",children:[r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(ln,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:T.totalQuizPasses}),r.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(bc,{size:20}),r.jsxs("span",{className:"user-detail-stat-value",children:[T.scoresMoyens,"%"]}),r.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(Ui,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:T.quizReussis}),r.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(Xl,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:T.dernierQuiz?I(T.dernierQuiz):"Aucun"}),r.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):r.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return r.jsxs("div",{className:"admin-container",children:[re(),ge(),ye(),r.jsxs("div",{className:"user-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(Wd,{size:24})," Gestion des Utilisateurs"]}),r.jsxs("p",{className:"admin-subtitle",children:[e.length," utilisateur(s) au total  ",q.length," affich(s)"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:M,children:[r.jsx(Fq,{size:16})," Actualiser"]})]}),de(),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search-wrapper",children:[r.jsx(XA,{size:18,className:"admin-search-icon"}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:h,onChange:V=>v(V.target.value)})]}),r.jsxs("button",{className:`admin-btn admin-btn-outline ${A?"active":""}`,onClick:()=>C(!A),children:[r.jsx(zy,{size:16})," Filtres",A?r.jsx(yx,{size:14}):r.jsx(lf,{size:14})]})]}),A&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Rle"}),r.jsxs("select",{className:"admin-select",value:y,onChange:V=>x(V.target.value),children:[r.jsx("option",{value:"",children:"Tous les rles"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"prof",children:"Professeur"}),r.jsx("option",{value:"eleve",children:"lve"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),r.jsxs("select",{className:"admin-select",value:_,onChange:V=>j(V.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Premium"}),r.jsx("option",{value:"false",children:"Gratuit"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Statut"}),r.jsxs("select",{className:"admin-select",value:S,onChange:V=>w(V.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Actifs"}),r.jsx("option",{value:"false",children:"Dsactivs"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),w(""),v("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des utilisateurs..."})]}):q.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx(Wd,{size:48}),r.jsx("h3",{children:"Aucun utilisateur trouv"}),r.jsx("p",{children:e.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):r.jsx("div",{className:"user-table-wrapper",children:r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Utilisateur"}),r.jsx("th",{children:"Rle"}),r.jsx("th",{children:"Abonnement"}),r.jsx("th",{children:"Statut"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:q.map(V=>r.jsxs("tr",{className:V.isActive===!1?"user-row-inactive":"",children:[r.jsx("td",{children:r.jsxs("div",{className:"user-cell-info",children:[r.jsx("div",{className:"user-avatar-sm",children:pe(V.displayName)}),r.jsxs("div",{children:[r.jsx("span",{className:"user-cell-name",children:V.displayName||"Sans nom"}),r.jsx("span",{className:"user-cell-email",children:V.email})]})]})}),r.jsx("td",{children:r.jsxs("select",{className:"admin-select admin-select-sm",value:V.role,onChange:he=>Y({type:"role",userId:V.uid,value:he.target.value,label:`Changer le rle de "${V.displayName||V.email}" en "${he.target.value}" ?`}),children:[r.jsx("option",{value:"eleve",children:"lve"}),r.jsx("option",{value:"prof",children:"Professeur"}),r.jsx("option",{value:"admin",children:"Admin"})]})}),r.jsx("td",{children:r.jsx("button",{className:`user-premium-toggle ${V.isPremium?"active":""}`,onClick:()=>Y({type:"premium",userId:V.uid,value:!V.isPremium,label:V.isPremium?`Dsactiver le statut Premium de "${V.displayName||V.email}" ?`:`Activer le statut Premium de "${V.displayName||V.email}" pour 30 jours ?`}),disabled:Q===V.uid,children:V.isPremium?r.jsxs(r.Fragment,{children:[r.jsx(xc,{size:14})," Premium"]}):r.jsxs(r.Fragment,{children:[r.jsx(an,{size:14})," Gratuit"]})})}),r.jsx("td",{children:r.jsx("button",{className:`user-status-toggle ${V.isActive!==!1?"active":"inactive"}`,onClick:()=>Y({type:"active",userId:V.uid,value:V.isActive===!1,label:V.isActive===!1?`Ractiver le compte de "${V.displayName||V.email}" ?`:`Dsactiver le compte de "${V.displayName||V.email}" ?`}),disabled:Q===V.uid,children:V.isActive!==!1?r.jsxs(r.Fragment,{children:[r.jsx(Gq,{size:14})," Actif"]}):r.jsxs(r.Fragment,{children:[r.jsx(Hq,{size:14})," Dsactiv"]})})}),r.jsx("td",{children:r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>Z(V),title:"Voir les statistiques",children:[r.jsx(Vl,{size:14})," Dtail"]})})]},V.uid))})]})})]})]})},BR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(""),[h,v]=g.useState(""),[y,x]=g.useState(""),[_,j]=g.useState(!1),S=g.useCallback(async()=>{try{o(!0),d(null);const O=await De(_e(te,"users")),D=new Map;O.docs.forEach(de=>{const ge=de.data();D.set(de.id,{name:ge.displayName||"Sans nom",email:ge.email||""})});const T=await De(_e(te,"quizzes")),k=new Map;T.docs.forEach(de=>{const ge=de.data();k.set(de.id,{titre:ge.titre||ge.quizTitre||"Quiz sans titre",discipline:ge.disciplineNom||ge.matiereNom||""})});const R=await De(_e(te,"quizzes_v2")),L=new Map;R.docs.forEach(de=>{const ge=de.data();L.set(de.id,{titre:ge.titre||"Quiz avanc sans titre",discipline:ge.disciplineNom||""})});const Q=[];try{(await De(Te(_e(te,"quiz_results"),Ke("datePassage","desc"),cn(200)))).docs.forEach(ge=>{const ye=ge.data(),V=D.get(ye.userId)||{name:"Inconnu",email:""},he=k.get(ye.quizId)||{titre:ye.quizTitre||"Quiz",discipline:ye.disciplineNom||""},Pe=ye.pourcentage??(ye.totalPoints>0?Math.round(ye.score/ye.totalPoints*100):ye.score>0?Math.round(ye.score/20*100):0);Q.push({id:ge.id,quizId:ye.quizId||"",quizTitre:he.titre,userId:ye.userId||"",userName:V.name,userEmail:V.email,score:ye.score||0,scoreMax:ye.totalPoints||20,pourcentage:Pe,reussi:ye.reussi??Pe>=50,tempsEcoule:ye.tempsEcoule||0,datePassage:ye.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:he.discipline})})}catch(de){console.warn("Pas de rsultats v1 ou index manquant:",de)}const $=[];try{(await De(Te(_e(te,"quiz_results_v2"),Ke("datePassage","desc"),cn(200)))).docs.forEach(ge=>{const ye=ge.data(),V=D.get(ye.userId)||{name:"Inconnu",email:""},he=L.get(ye.quizId)||{titre:ye.quizTitre||"Quiz avanc",discipline:ye.disciplineNom||""},Pe=ye.scoreMax>0?Math.round(ye.score/ye.scoreMax*100):0;$.push({id:ge.id,quizId:ye.quizId||"",quizTitre:he.titre,userId:ye.userId||"",userName:V.name,userEmail:V.email,score:ye.score||0,scoreMax:ye.scoreMax||0,pourcentage:Pe,reussi:ye.reussi??Pe>=50,tempsEcoule:ye.tempsTotal||ye.tempsEcoule||0,datePassage:ye.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:he.discipline})})}catch(de){console.warn("Pas de rsultats v2 ou index manquant:",de)}const F=[...Q,...$].sort((de,ge)=>ge.datePassage.getTime()-de.datePassage.getTime());t(F);const Y=new Date,M=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),q=new Date(M.getTime()-10080*60*1e3),Z=F.length,H=Z>0?Math.round(F.reduce((de,ge)=>de+ge.pourcentage,0)/Z):0,B=Z>0?Math.round(F.filter(de=>de.reussi).length/Z*100):0,I=Z>0?Math.round(F.reduce((de,ge)=>de+ge.tempsEcoule,0)/Z):0,pe=F.filter(de=>de.datePassage>=M).length,re=F.filter(de=>de.datePassage>=q).length;a({totalResultats:Z,moyenneGenerale:H,tauxReussite:B,tempsEcouleMoyen:I,resultatsAujourdHui:pe,resultats7Jours:re})}catch(O){console.error("Erreur chargement rsultats:",O),d("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);g.useEffect(()=>{S()},[S]);const w=e.filter(O=>{if(m&&O.type!==m||h==="true"&&!O.reussi||h==="false"&&O.reussi)return!1;if(y){const D=y.toLowerCase();if(!O.userName.toLowerCase().includes(D)&&!O.userEmail.toLowerCase().includes(D)&&!O.quizTitre.toLowerCase().includes(D)&&!O.disciplineNom.toLowerCase().includes(D))return!1}return!0}),A=O=>{if(O<60)return`${O}s`;const D=Math.floor(O/60),T=O%60;return T>0?`${D}min ${T}s`:`${D}min`},C=O=>O.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=O=>O>=80?"results-score--excellent":O>=60?"results-score--bien":O>=40?"results-score--moyen":"results-score--faible";return r.jsxs("div",{className:"results-admin",children:[r.jsxs("div",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:S,children:" Actualiser"})})]}),n&&r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalResultats}),r.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsxs("div",{className:"stat-card__value",children:[n.moyenneGenerale,"%"]}),r.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsxs("div",{className:"stat-card__value",children:[n.tauxReussite,"%"]}),r.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.resultatsAujourdHui}),r.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search",children:[r.jsx("span",{className:"admin-search-icon",children:""}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:y,onChange:O=>x(O.target.value)})]}),r.jsx("button",{className:`admin-btn admin-btn-ghost ${_?"active":""}`,onClick:()=>j(!_),children:" Filtres"})]}),_&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),r.jsxs("select",{className:"admin-select",value:m,onChange:O=>p(O.target.value),children:[r.jsx("option",{value:"",children:"Tous les types"}),r.jsx("option",{value:"classique",children:"Classique (v1)"}),r.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),r.jsxs("select",{className:"admin-select",value:h,onChange:O=>v(O.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Russis"}),r.jsx("option",{value:"false",children:"chous"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{p(""),v(""),x("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des rsultats..."})]}):u?r.jsxs("div",{className:"admin-error",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,children:"Ressayer"})]}):w.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h3",{children:"Aucun rsultat trouv"}),r.jsx("p",{children:e.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):r.jsxs("div",{className:"results-table-wrapper",children:[r.jsxs("table",{className:"results-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"lve"}),r.jsx("th",{children:"Quiz"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Score"}),r.jsx("th",{children:"Rsultat"}),r.jsx("th",{children:"Dure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:w.map(O=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"results-cell-user",children:[r.jsx("span",{className:"results-cell-name",children:O.userName}),r.jsx("span",{className:"results-cell-email",children:O.userEmail})]})}),r.jsx("td",{children:r.jsxs("div",{className:"results-cell-quiz",children:[r.jsx("span",{className:"results-cell-quiz-title",children:O.quizTitre}),O.disciplineNom&&r.jsx("span",{className:"results-cell-discipline",children:O.disciplineNom})]})}),r.jsx("td",{children:r.jsx("span",{className:`results-badge results-badge--${O.type}`,children:O.type==="classique"?" Classique":" Avanc"})}),r.jsxs("td",{children:[r.jsxs("span",{className:`results-score ${E(O.pourcentage)}`,children:[O.pourcentage,"%"]}),r.jsxs("span",{className:"results-score-detail",children:[O.score,"/",O.scoreMax]})]}),r.jsx("td",{children:r.jsx("span",{className:`results-status ${O.reussi?"results-status--success":"results-status--fail"}`,children:O.reussi?" Russi":" chou"})}),r.jsx("td",{className:"results-cell-duration",children:A(O.tempsEcoule)}),r.jsx("td",{className:"results-cell-date",children:C(O.datePassage)})]},`${O.type}-${O.id}`))})]}),r.jsx("div",{className:"results-footer",children:r.jsxs("p",{children:[w.length," rsultat",w.length>1?"s":""," affich",w.length>1?"s":"",w.length!==e.length&&` sur ${e.length} au total`]})})]})]})},ql={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},UR=()=>{const[e,t]=g.useState(ql),[n,a]=g.useState(ql),[l,o]=g.useState(!0),[u,d]=g.useState(!1),[m,p]=g.useState(null),[h,v]=g.useState(null),[y,x]=g.useState(!1),_=g.useCallback(async()=>{try{o(!0),p(null);const C=Ne(te,"settings","platform"),E=await Dt(C);if(E.exists()){const O=E.data(),D={...ql,...O};t(D),a(D)}else t(ql),a(ql)}catch(C){console.error("Erreur chargement paramtres:",C),p("Impossible de charger les paramtres.")}finally{o(!1)}},[]);g.useEffect(()=>{_()},[_]),g.useEffect(()=>{if(h){const C=setTimeout(()=>v(null),4e3);return()=>clearTimeout(C)}},[h]),g.useEffect(()=>{const C=JSON.stringify(e)!==JSON.stringify(n);x(C)},[e,n]);const j=(C,E)=>{t(O=>({...O,[C]:E}))},S=async()=>{try{if(d(!0),p(null),e.premiumMensuel<0||e.premiumAnnuel<0){p("Les tarifs ne peuvent pas tre ngatifs.");return}if(e.quizNoteMinimale<0||e.quizNoteMinimale>20){p("La note minimale doit tre entre 0 et 20.");return}const C=Ne(te,"settings","platform");await dm(C,{...e,updatedAt:xt()}),a(e),x(!1),v("Paramtres sauvegards avec succs !")}catch(C){console.error("Erreur sauvegarde paramtres:",C),p("Impossible de sauvegarder les paramtres.")}finally{d(!1)}},w=()=>{t(n),x(!1)},A=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&t(ql)};return l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des paramtres..."})]}):r.jsxs("div",{className:"settings-admin",children:[r.jsxs("div",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),r.jsxs("div",{className:"admin-page-header__actions",children:[y&&r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:w,children:"Annuler"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!y||u,children:u?" Sauvegarde...":" Sauvegarder"})]})]}),y&&r.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),m&&r.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",m]}),h&&r.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",h]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),r.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Nom du site"}),r.jsx("input",{type:"text",className:"admin-input",value:e.siteName,onChange:C=>j("siteName",C.target.value)})]}),r.jsxs("div",{className:"settings-field settings-field--full",children:[r.jsx("label",{className:"settings-label",children:"Description"}),r.jsx("input",{type:"text",className:"admin-input",value:e.siteDescription,onChange:C=>j("siteDescription",C.target.value)})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Email de contact"}),r.jsx("input",{type:"email",className:"admin-input",value:e.contactEmail,onChange:C=>j("contactEmail",C.target.value)})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Tlphone"}),r.jsx("input",{type:"tel",className:"admin-input",value:e.contactPhone,onChange:C=>j("contactPhone",C.target.value)})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),r.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.premiumMensuel,onChange:C=>j("premiumMensuel",parseInt(C.target.value)||0),min:0,step:500}),r.jsxs("span",{className:"settings-hint",children:["Actuellement : ",e.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.premiumAnnuel,onChange:C=>j("premiumAnnuel",parseInt(C.target.value)||0),min:0,step:1e3}),r.jsxs("span",{className:"settings-hint",children:["conomie : ",(e.premiumMensuel*12-e.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),r.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizDureeDefaut,onChange:C=>j("quizDureeDefaut",parseInt(C.target.value)||0),min:1,max:120})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizNoteMinimale,onChange:C=>j("quizNoteMinimale",parseInt(C.target.value)||0),min:0,max:20})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizTentativesMax,onChange:C=>j("quizTentativesMax",parseInt(C.target.value)||0),min:1,max:10}),r.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),r.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Mode maintenance"}),r.jsxs("div",{className:"settings-toggle-wrapper",children:[r.jsx("button",{className:`settings-toggle ${e.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>j("maintenanceMode",!e.maintenanceMode),children:r.jsx("span",{className:"settings-toggle__knob"})}),r.jsx("span",{className:`settings-toggle-label ${e.maintenanceMode?"settings-toggle-label--active":""}`,children:e.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),r.jsxs("div",{className:"settings-field settings-field--full",children:[r.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),r.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:e.maintenanceMessage,onChange:C=>j("maintenanceMessage",C.target.value),disabled:!e.maintenanceMode})]})]})]}),r.jsxs("div",{className:"settings-actions",children:[r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:A,children:" Rinitialiser aux valeurs par dfaut"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!y||u,children:u?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},FR=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],GR=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],HR=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Ba=({value:e,onChange:t,placeholder:n="Saisissez votre texte...",minHeight:a=100,maxHeight:l=400,toolbar:o=FR,disabled:u=!1,className:d=""})=>{const m=g.useRef(null),p=g.useRef(!1),[h,v]=g.useState(!1),[y,x]=g.useState(!1);g.useEffect(()=>{m.current&&!p.current&&m.current.innerHTML!==e&&(m.current.innerHTML=e||""),p.current=!1},[e]);const _=g.useCallback(()=>{m.current&&(p.current=!0,t(m.current.innerHTML))},[t]),j=g.useCallback((C,E)=>{m.current?.focus(),document.execCommand(C,!1,E),_()},[_]),S=g.useCallback(()=>{const C=prompt("URL du lien :","https://");C&&j("createLink",C)},[j]),w=g.useCallback(()=>{j("removeFormat"),j("formatBlock","p")},[j]);g.useEffect(()=>{const C=()=>{v(!1),x(!1)};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const A=C=>{switch(C){case"bold":return r.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:E=>{E.preventDefault(),j("bold")},children:r.jsx("strong",{children:"G"})},"bold");case"italic":return r.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:E=>{E.preventDefault(),j("italic")},children:r.jsx("em",{children:"I"})},"italic");case"underline":return r.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:E=>{E.preventDefault(),j("underline")},children:r.jsx("u",{children:"S"})},"underline");case"strikethrough":return r.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:E=>{E.preventDefault(),j("strikeThrough")},children:r.jsx("s",{children:"B"})},"strike");case"heading":return r.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:E=>{E.preventDefault(),j("formatBlock","h3")},children:"H"},"heading");case"color":return r.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[r.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{v(!h),x(!1)},children:r.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),h&&r.jsx("div",{className:"rte-color-picker",children:GR.map(E=>r.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E,border:E==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:O=>{O.preventDefault(),j("foreColor",E),v(!1)}},E))})]},"color");case"highlight":return r.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[r.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{x(!y),v(!1)},children:r.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),y&&r.jsx("div",{className:"rte-color-picker",children:HR.map(E=>r.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E==="transparent"?"#fff":E,border:"1px solid #ccc"},onMouseDown:O=>{O.preventDefault(),j("hiliteColor",E),x(!1)},children:E==="transparent"?"":""},E))})]},"highlight");case"alignLeft":return r.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:E=>{E.preventDefault(),j("justifyLeft")},children:""},"alignL");case"alignCenter":return r.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:E=>{E.preventDefault(),j("justifyCenter")},children:""},"alignC");case"alignRight":return r.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:E=>{E.preventDefault(),j("justifyRight")},children:""},"alignR");case"bulletList":return r.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:E=>{E.preventDefault(),j("insertUnorderedList")},children:""},"ul");case"numberedList":return r.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:E=>{E.preventDefault(),j("insertOrderedList")},children:"1"},"ol");case"subscript":return r.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:E=>{E.preventDefault(),j("subscript")},children:["X",r.jsx("sub",{children:""})]},"sub");case"superscript":return r.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:E=>{E.preventDefault(),j("superscript")},children:["X",r.jsx("sup",{children:""})]},"sup");case"link":return r.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:E=>{E.preventDefault(),S()},children:""},"link");case"clean":return r.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:E=>{E.preventDefault(),w()},children:""},"clean");default:return null}};return r.jsxs("div",{className:`rte-container ${u?"rte-disabled":""} ${d}`,children:[!u&&r.jsx("div",{className:"rte-toolbar",children:o.map(C=>A(C))}),r.jsx("div",{ref:m,className:"rte-editor",contentEditable:!u,onInput:_,onBlur:_,"data-placeholder":n,style:{minHeight:`${a}px`,maxHeight:`${l}px`},suppressContentEditableWarning:!0})]})},Wl={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},cf={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},uf={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Kt(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function QR(e,t){const n={id:Kt("q"),type:e,enonce:"",difficulte:"moyen",points:2,ordre:t};switch(e){case"qcm_unique":return{...n,typeData:{options:[{id:Kt("opt"),texte:"",isCorrect:!0},{id:Kt("opt"),texte:"",isCorrect:!1},{id:Kt("opt"),texte:"",isCorrect:!1},{id:Kt("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:Kt("opt"),texte:"",isCorrect:!0},{id:Kt("opt"),texte:"",isCorrect:!0},{id:Kt("opt"),texte:"",isCorrect:!1},{id:Kt("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:Kt("item"),texte:"",ordreCorrect:1},{id:Kt("item"),texte:"",ordreCorrect:2},{id:Kt("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:Kt("pair"),gauche:"",droite:""},{id:Kt("pair"),gauche:"",droite:""},{id:Kt("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const Vc="quizzes_v2",VR="quiz_results_v2";async function YR(e,t){try{const n=await Pt(_e(te,Vc),{...e,auteurId:t,createdAt:xt(),updatedAt:xt()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function KR(e,t){try{const n=Ne(te,Vc,e);await He(n,{...t,updatedAt:xt()}),console.log(" Quiz avanc mis  jour :",e)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function XR(e){try{await Dn(Ne(te,Vc,e)),console.log(" Quiz avanc supprim :",e)}catch(t){throw console.error(" Erreur suppression quiz :",t),new Error("Impossible de supprimer le quiz")}}async function s2(e){try{const t=await Dt(Ne(te,Vc,e));if(!t.exists())return null;const n=t.data();return{id:t.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(t){throw console.error(" Erreur rcupration quiz :",t),new Error("Impossible de rcuprer le quiz")}}async function l2(){try{const e=Te(_e(te,Vc),Ke("createdAt","desc"));return(await De(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||void 0}})}catch(e){throw console.error(" Erreur rcupration tous les quiz :",e),new Error("Impossible de rcuprer les quiz")}}function WR(e,t){let n=0,a=0;const l=[];for(const o of e.questions){a+=o.points;const u=t.find(v=>v.questionId===o.id);if(!u){l.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let d=0,m=!1,p=!1,h=!1;switch(o.type){case"qcm_unique":{const y=o.typeData.options.find(x=>x.isCorrect);y&&u.selectedOptionId===y.id&&(d=o.points,m=!0);break}case"qcm_multiple":{const v=o.typeData,y=v.options.filter(w=>w.isCorrect).map(w=>w.id),x=v.options.filter(w=>!w.isCorrect).map(w=>w.id),_=u.selectedOptionIds||[],j=_.some(w=>x.includes(w)),S=_.filter(w=>y.includes(w)).length;!j&&S===y.length?(d=o.points,m=!0):v.scoringPartiel&&S>0&&!j&&(d=Math.round(o.points*S/y.length*100)/100,p=!0);break}case"drag_drop":{const v=o.typeData,y=u.ordrePropose||[],x=v.items.sort((j,S)=>j.ordreCorrect-S.ordreCorrect).map(j=>j.id);let _=0;for(let j=0;j<x.length;j++)y[j]===x[j]&&_++;_===x.length?(d=o.points,m=!0):_>0&&(d=Math.round(o.points*_/x.length*100)/100,p=!0);break}case"mise_en_relation":{const v=o.typeData,y=u.relationsProposees||{};let x=0;for(const _ of v.paires)y[_.id]===_.id&&x++;x===v.paires.length?(d=o.points,m=!0):x>0&&(d=Math.round(o.points*x/v.paires.length*100)/100,p=!0);break}case"essai":{const v=o.typeData,y=u.texteReponse||"";if(v.correctionMode==="mots_cles"&&v.motsCles.length>0){const x=y.toLowerCase().replace(/<[^>]*>/g,"");let _=0,j=0;for(const S of v.motsCles)_+=S.poids,x.includes(S.mot.toLowerCase())&&(j+=S.poids);_>0&&(d=Math.round(o.points*j/_*100)/100,m=j===_,p=j>0&&j<_)}else h=!0;break}}n+=d,l.push({questionId:o.id,type:o.type,pointsObtenus:d,pointsMax:o.points,isCorrect:m,isPartiel:p,correctionManuelleRequise:h})}return{score:n,scoreMax:a,details:l}}async function ZR(e,t,n,a){try{const{score:l,scoreMax:o,details:u}=WR(e,n),d=o>0?Math.round(l/o*20*100)/100:0,m=u.some(v=>v.correctionManuelleRequise),p={quizId:e.id,userId:t,reponses:n,score:l,scoreMax:o,note20:d,tempsEcoule:a,datePassage:new Date,reussi:d>=e.noteMinimale,correctionManuelle:m,detailsParQuestion:u},h=await Pt(_e(te,VR),{...p,datePassage:xt()});return console.log(" Rsultat quiz enregistr :",h.id),{id:h.id,...p}}catch(l){throw console.error(" Erreur soumission quiz :",l),new Error("Impossible d'enregistrer le rsultat")}}const JR=({existingQuiz:e,disciplines:t,auteurId:n,onSave:a,onCancel:l})=>{const[o,u]=g.useState(e?.titre||""),[d,m]=g.useState(e?.description||""),[p,h]=g.useState(e?.disciplineId||""),[v,y]=g.useState(e?.duree||30),[x,_]=g.useState(e?.isPremium??!0),[j,S]=g.useState(e?.noteMinimale||10),[w,A]=g.useState(e?.melangerQuestions??!1),[C,E]=g.useState(e?.melangerOptions??!1),[O,D]=g.useState(e?.afficherCorrection??!0),[T,k]=g.useState(e?.tentativesMax||0),[R,L]=g.useState(e?.questions||[]),[Q,$]=g.useState(null),[F,Y]=g.useState(!1),[M,q]=g.useState(null),[Z,H]=g.useState(!1),B=g.useCallback(V=>{const he=QR(V,R.length+1);L(Pe=>[...Pe,he]),$(R.length),H(!1)},[R.length]),I=g.useCallback(V=>{confirm("Supprimer cette question ?")&&(L(he=>he.filter((le,W)=>W!==V).map((le,W)=>({...le,ordre:W+1}))),$(null))},[]),pe=g.useCallback(V=>{L(he=>{const Pe=he[V],le={...JSON.parse(JSON.stringify(Pe)),id:Kt("q"),ordre:he.length+1};return[...he,le]})},[]),re=g.useCallback((V,he)=>{L(Pe=>{const le=[...Pe],W=he==="up"?V-1:V+1;return W<0||W>=le.length?Pe:([le[V],le[W]]=[le[W],le[V]],le.map((G,ce)=>({...G,ordre:ce+1})))}),$(he==="up"?Q!==null?Q-1:null:Q!==null?Q+1:null)},[Q]),de=g.useCallback((V,he)=>{L(Pe=>Pe.map((le,W)=>W===V?{...le,...he}:le))},[]),ge=async()=>{if(!o.trim()){q("Le titre est obligatoire");return}if(!p){q("Slectionnez une discipline");return}if(R.length===0){q("Ajoutez au moins une question");return}for(let V=0;V<R.length;V++)if(!R[V].enonce.replace(/<[^>]*>/g,"").trim()){q(`La question ${V+1} n'a pas d'nonc`),$(V);return}q(null),Y(!0);try{const V={disciplineId:p,titre:o.trim(),description:d.trim()||void 0,questions:R,duree:v,isPremium:x,noteMinimale:j,melangerQuestions:w,melangerOptions:C,afficherCorrection:O,tentativesMax:T};let he;e?.id?(await KR(e.id,V),he=e.id):he=await YR(V,n),a?.(he)}catch(V){q(V.message||"Erreur lors de la sauvegarde")}finally{Y(!1)}},ye=R.reduce((V,he)=>V+he.points,0);return r.jsxs("div",{className:"quiz-editor",children:[r.jsxs("div",{className:"quiz-editor__header",children:[r.jsx("h2",{children:e?" Modifier le quiz":" Nouveau quiz avanc"}),r.jsxs("div",{className:"quiz-editor__header-actions",children:[r.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",ye," pts"]}),r.jsxs("span",{className:"quiz-editor__count-badge",children:[R.length," question",R.length>1?"s":""]})]})]}),M&&r.jsxs("div",{className:"quiz-editor__error",children:[" ",M,r.jsx("button",{onClick:()=>q(null),children:""})]}),r.jsxs("div",{className:"quiz-editor__section",children:[r.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),r.jsxs("div",{className:"quiz-editor__grid",children:[r.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[r.jsx("label",{children:"Titre du quiz *"}),r.jsx("input",{type:"text",value:o,onChange:V=>u(V.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Discipline *"}),r.jsxs("select",{value:p,onChange:V=>h(V.target.value),className:"quiz-editor__select",children:[r.jsx("option",{value:"",children:" Slectionner "}),t.map(V=>r.jsxs("option",{value:V.id,children:[V.nom," (",V.classe,")"]},V.id))]})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Dure (minutes)"}),r.jsx("input",{type:"number",value:v,onChange:V=>y(Number(V.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Note minimale (/20)"}),r.jsx("input",{type:"number",value:j,onChange:V=>S(Number(V.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Tentatives max (0 = illimit)"}),r.jsx("input",{type:"number",value:T,onChange:V=>k(Number(V.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[r.jsx("label",{children:"Description (optionnel)"}),r.jsx(Ba,{value:d,onChange:m,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),r.jsxs("div",{className:"quiz-editor__options-row",children:[r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:V=>_(V.target.checked)}),r.jsx("span",{children:" Premium"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:V=>A(V.target.checked)}),r.jsx("span",{children:" Mlanger les questions"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:C,onChange:V=>E(V.target.checked)}),r.jsx("span",{children:" Mlanger les options QCM"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:O,onChange:V=>D(V.target.checked)}),r.jsx("span",{children:" Afficher la correction"})]})]})]}),r.jsxs("div",{className:"quiz-editor__section",children:[r.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),r.jsx("div",{className:"quiz-editor__questions-list",children:R.map((V,he)=>r.jsx(e3,{question:V,index:he,isActive:Q===he,onToggle:()=>$(Q===he?null:he),onUpdate:Pe=>de(he,Pe),onDelete:()=>I(he),onDuplicate:()=>pe(he),onMoveUp:()=>re(he,"up"),onMoveDown:()=>re(he,"down"),isFirst:he===0,isLast:he===R.length-1},V.id))}),r.jsxs("div",{className:"quiz-editor__add-wrapper",children:[r.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>H(!Z),children:"+ Ajouter une question"}),Z&&r.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(Wl).map(V=>r.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>B(V),children:[r.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:uf[V]},children:cf[V]}),r.jsx("span",{children:Wl[V]})]},V))})]})]}),r.jsxs("div",{className:"quiz-editor__actions",children:[r.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:l,disabled:F,children:"Annuler"}),r.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:ge,disabled:F||R.length===0,children:F?" Sauvegarde...":e?" Mettre  jour":" Crer le quiz"})]})]})},e3=({question:e,index:t,isActive:n,onToggle:a,onUpdate:l,onDelete:o,onDuplicate:u,onMoveUp:d,onMoveDown:m,isFirst:p,isLast:h})=>{const v=uf[e.type],y=cf[e.type],x=Wl[e.type],_=j=>{const S=j.replace(/<[^>]*>/g,"").trim();return S.length>80?S.substring(0,80)+"...":S||"(sans nonc)"};return r.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:v},children:[r.jsxs("div",{className:"question-editor__header",onClick:a,children:[r.jsxs("div",{className:"question-editor__header-left",children:[r.jsx("span",{className:"question-editor__number",children:t+1}),r.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:v},children:[y," ",x]}),!n&&r.jsx("span",{className:"question-editor__preview",children:_(e.enonce)})]}),r.jsxs("div",{className:"question-editor__header-right",children:[r.jsxs("span",{className:"question-editor__points",children:[e.points," pts"]}),r.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&r.jsxs("div",{className:"question-editor__body",children:[r.jsxs("div",{className:"question-editor__toolbar",children:[r.jsx("button",{type:"button",onClick:d,disabled:p,title:"Monter",children:""}),r.jsx("button",{type:"button",onClick:m,disabled:h,title:"Descendre",children:""}),r.jsx("button",{type:"button",onClick:u,title:"Dupliquer",children:""}),r.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),r.jsxs("div",{className:"question-editor__field",children:[r.jsx("label",{children:"nonc de la question *"}),r.jsx(Ba,{value:e.enonce,onChange:j=>l({enonce:j}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),r.jsxs("div",{className:"question-editor__params",children:[r.jsxs("div",{className:"question-editor__param",children:[r.jsx("label",{children:"Difficult"}),r.jsxs("select",{value:e.difficulte,onChange:j=>l({difficulte:j.target.value}),children:[r.jsx("option",{value:"facile",children:" Facile"}),r.jsx("option",{value:"moyen",children:" Moyen"}),r.jsx("option",{value:"difficile",children:" Difficile"})]})]}),r.jsxs("div",{className:"question-editor__param",children:[r.jsx("label",{children:"Points"}),r.jsx("input",{type:"number",value:e.points,onChange:j=>l({points:Number(j.target.value)}),min:1,max:20})]})]}),r.jsxs("div",{className:"question-editor__type-specific",children:[e.type==="qcm_unique"&&r.jsx(t3,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="qcm_multiple"&&r.jsx(r3,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="drag_drop"&&r.jsx(n3,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="mise_en_relation"&&r.jsx(a3,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="essai"&&r.jsx(i3,{data:e.typeData,onChange:j=>l({typeData:j})})]}),r.jsxs("div",{className:"question-editor__field",children:[r.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),r.jsx(Ba,{value:e.explication||"",onChange:j=>l({explication:j}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},t3=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:u.isCorrect===!0?{...m,isCorrect:!1}:m);t({options:d})},a=()=>{e.options.length>=6||t({options:[...e.options,{id:Kt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({options:e.options.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),e.options.map((o,u)=>r.jsxs("div",{className:"type-editor__option-row",children:[r.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>n(u,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(Ba,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&r.jsx("span",{className:"type-editor__correct-badge",children:""}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),e.options.length<6&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"})]})},r3=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:m);t({...e,options:d})},a=()=>{e.options.length>=8||t({...e,options:[...e.options,{id:Kt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({...e,options:e.options.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),e.options.map((o,u)=>r.jsxs("div",{className:"type-editor__option-row",children:[r.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:d=>n(u,{isCorrect:d.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(Ba,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&r.jsx("span",{className:"type-editor__correct-badge",children:""}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,children:""})]},o.id)),e.options.length<8&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"}),r.jsxs("label",{className:"type-editor__sub-option",children:[r.jsx("input",{type:"checkbox",checked:e.scoringPartiel,onChange:o=>t({...e,scoringPartiel:o.target.checked})}),r.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},n3=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.items.map((m,p)=>p===o?{...m,...u}:m);t({...e,items:d})},a=()=>{e.items.length>=10||t({...e,items:[...e.items,{id:Kt("item"),texte:"",ordreCorrect:e.items.length+1}]})},l=o=>{if(e.items.length<=2)return;const u=e.items.filter((d,m)=>m!==o).map((d,m)=>({...d,ordreCorrect:m+1}));t({...e,items:u})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),r.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),r.jsxs("div",{className:"type-editor__field-inline",children:[r.jsx("label",{children:"Consigne :"}),r.jsx("input",{type:"text",value:e.consigneOrdre,onChange:o=>t({...e,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),e.items.map((o,u)=>r.jsxs("div",{className:"type-editor__drag-row",children:[r.jsx("span",{className:"type-editor__drag-number",children:u+1}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(Ba,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`lment ${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.items.length<=2,children:""})]},o.id)),e.items.length<10&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter un lment"})]})},a3=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.paires.map((m,p)=>p===o?{...m,...u}:m);t({paires:d})},a=()=>{e.paires.length>=8||t({paires:[...e.paires,{id:Kt("pair"),gauche:"",droite:""}]})},l=o=>{e.paires.length<=2||t({paires:e.paires.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),r.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),r.jsxs("div",{className:"type-editor__relation-header",children:[r.jsx("span",{children:"Colonne A (gauche)"}),r.jsx("span",{}),r.jsx("span",{children:"Colonne B (droite)"}),r.jsx("span",{})]}),e.paires.map((o,u)=>r.jsxs("div",{className:"type-editor__relation-row",children:[r.jsx("div",{className:"type-editor__relation-cell",children:r.jsx(Ba,{value:o.gauche,onChange:d=>n(u,{gauche:d}),placeholder:`lment A${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("span",{className:"type-editor__relation-arrow",children:""}),r.jsx("div",{className:"type-editor__relation-cell",children:r.jsx(Ba,{value:o.droite,onChange:d=>n(u,{droite:d}),placeholder:`lment B${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.paires.length<=2,children:""})]},o.id)),e.paires.length<8&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une paire"})]})},i3=({data:e,onChange:t})=>{const n=()=>{t({...e,motsCles:[...e.motsCles,{mot:"",poids:1,obligatoire:!1}]})},a=(o,u)=>{const d=e.motsCles.map((m,p)=>p===o?{...m,...u}:m);t({...e,motsCles:d})},l=o=>{t({...e,motsCles:e.motsCles.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),r.jsxs("div",{className:"type-editor__params-row",children:[r.jsxs("div",{className:"type-editor__param-inline",children:[r.jsx("label",{children:"Mots minimum :"}),r.jsx("input",{type:"number",value:e.nombreMotsMin||"",onChange:o=>t({...e,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),r.jsxs("div",{className:"type-editor__param-inline",children:[r.jsx("label",{children:"Mots maximum :"}),r.jsx("input",{type:"number",value:e.nombreMotsMax||"",onChange:o=>t({...e,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),r.jsxs("div",{className:"type-editor__field-inline",children:[r.jsx("label",{children:"Mode de correction :"}),r.jsxs("select",{value:e.correctionMode,onChange:o=>t({...e,correctionMode:o.target.value}),children:[r.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),r.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),r.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(e.correctionMode==="mots_cles"||e.correctionMode==="semi_auto")&&r.jsxs("div",{className:"type-editor__keywords",children:[r.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),e.motsCles.map((o,u)=>r.jsxs("div",{className:"type-editor__keyword-row",children:[r.jsx("input",{type:"text",value:o.mot,onChange:d=>a(u,{mot:d.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),r.jsxs("select",{value:o.poids,onChange:d=>a(u,{poids:Number(d.target.value)}),className:"type-editor__keyword-weight",children:[r.jsx("option",{value:1,children:"Poids 1"}),r.jsx("option",{value:2,children:"Poids 2"}),r.jsx("option",{value:3,children:"Poids 3"}),r.jsx("option",{value:4,children:"Poids 4"}),r.jsx("option",{value:5,children:"Poids 5"})]}),r.jsxs("label",{className:"type-editor__keyword-required",children:[r.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:d=>a(u,{obligatoire:d.target.checked})}),r.jsx("span",{children:"Obligatoire"})]}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),children:""})]},u)),r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),r.jsxs("div",{className:"type-editor__field-block",children:[r.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),r.jsx(Ba,{value:e.reponseModele||"",onChange:o=>t({...e,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},z1=()=>{const{quizId:e}=Hn(),t=ot(),{currentUser:n}=it(),[a,l]=g.useState([]),[o,u]=g.useState(void 0),[d,m]=g.useState(!0),[p,h]=g.useState(null);return g.useEffect(()=>{(async()=>{try{m(!0);const y=await Xa.getAll();if(l(y.map(x=>({id:x.id,nom:x.nom,classe:x.classe||""}))),e){const x=await s2(e);x?u(x):h("Quiz introuvable")}}catch(y){console.error("Erreur chargement donnes:",y),h(y.message||"Erreur de chargement")}finally{m(!1)}})()},[e]),d?r.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:r.jsx("p",{children:" Chargement..."})}):p?r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsxs("p",{style:{color:"#dc2626"},children:[" ",p]}),r.jsx("button",{onClick:()=>t(-1),children:" Retour"})]}):r.jsx(JR,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:a,auteurId:n?.uid||"",onSave:v=>{alert(" Quiz sauvegard avec succs !"),t("/admin/quiz")},onCancel:()=>t(-1)})},s3=()=>{const e=ot(),{currentUser:t}=it(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(null);g.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d(null);const j=await l2();a(j)}catch(j){console.error("Erreur chargement quiz:",j),d("Impossible de charger les quiz")}finally{o(!1)}},v=async j=>{try{await XR(j),a(S=>S.filter(w=>w.id!==j)),p(null)}catch(S){console.error("Erreur suppression:",S),alert("Erreur lors de la suppression : "+S.message)}},y=j=>{const S={};return j.questions.forEach(w=>{S[w.type]=(S[w.type]||0)+1}),Object.entries(S).map(([w,A])=>`${A} ${Wl[w]||w}`).join(", ")},x=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",_=j=>j.questions.reduce((S,w)=>S+w.points,0);return r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),r.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),r.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),u&&r.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",u,r.jsx("button",{onClick:h,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),l&&r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!l&&n.length===0&&!u&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),r.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),r.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!l&&n.length>0&&r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(j=>r.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:j.titre}),j.isPremium&&r.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.questions.length," question",j.questions.length!==1?"s":""]}),r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",_(j)," pts"]}),r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.duree," min"]})]}),r.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",y(j)]}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",x(j.createdAt)]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>e(`/quiz-avance/${j.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),r.jsx("button",{onClick:()=>e(`/admin/quiz/modifier/${j.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),r.jsx("button",{onClick:()=>{const S=`${window.location.origin}/quiz-avance/${j.id}`;navigator.clipboard.writeText(S).then(()=>{alert(` Lien copi !

`+S+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),m===j.id?r.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[r.jsx("button",{onClick:()=>v(j.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),r.jsx("button",{onClick:()=>p(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):r.jsx("button",{onClick:()=>p(j.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},j.id))})]})},l3=({quiz:e,userId:t,onComplete:n,onQuit:a})=>{const l=g.useMemo(()=>{let k=[...e.questions];return e.melangerQuestions&&(k=k.sort(()=>Math.random()-.5)),k},[e]),[o,u]=g.useState(0),[d,m]=g.useState(new Map),[p,h]=g.useState(e.duree*60),[v,y]=g.useState(!1),[x,_]=g.useState(null),[j,S]=g.useState(!1),w=g.useRef(Date.now());g.useEffect(()=>{if(x)return;const k=setInterval(()=>{h(R=>R<=1?(clearInterval(k),D(),0):R-1)},1e3);return()=>clearInterval(k)},[x]);const A=k=>{const R=Math.floor(k/60),L=k%60;return`${R.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},C=l[o],E=g.useCallback((k,R)=>{m(L=>{const Q=new Map(L),$=Q.get(k)||{questionId:k,type:C.type};return Q.set(k,{...$,...R}),Q})},[C]),O=k=>{k>=0&&k<l.length&&u(k)},D=async()=>{S(!1),y(!0);try{const k=Array.from(d.values()),R=Math.round((Date.now()-w.current)/1e3),L=await ZR(e,t,k,R);_(L),n?.(L)}catch(k){alert("Erreur lors de la soumission : "+k.message)}finally{y(!1)}},T=d.size;return x?r.jsx("div",{className:"quiz-player quiz-player--results",children:r.jsxs("div",{className:"quiz-results",children:[r.jsxs("div",{className:`quiz-results__header ${x.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[r.jsx("div",{className:"quiz-results__emoji",children:x.reussi?"":""}),r.jsx("h2",{children:x.reussi?"Flicitations !":"Quiz termin"}),r.jsxs("div",{className:"quiz-results__score",children:[r.jsxs("span",{className:"quiz-results__note",children:[x.note20,"/20"]}),r.jsxs("span",{className:"quiz-results__detail",children:[x.score,"/",x.scoreMax," points"]})]}),r.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",A(x.tempsEcoule)]}),x.correctionManuelle&&r.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),e.afficherCorrection&&r.jsxs("div",{className:"quiz-results__details",children:[r.jsx("h3",{children:" Dtail des rponses"}),l.map((k,R)=>{const L=x.detailsParQuestion.find(Q=>Q.questionId===k.id);return r.jsxs("div",{className:`quiz-results__question ${L?.isCorrect?"quiz-results__question--correct":L?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[r.jsxs("div",{className:"quiz-results__q-header",children:[r.jsxs("span",{children:["Q",R+1," "," ",r.jsxs("span",{style:{color:uf[k.type]},children:[cf[k.type]," ",Wl[k.type]]})]}),r.jsxs("span",{className:"quiz-results__q-score",children:[L?.pointsObtenus||0,"/",L?.pointsMax||k.points," pts",L?.isCorrect&&" ",L?.isPartiel&&" ",!L?.isCorrect&&!L?.isPartiel&&" "]})]}),r.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:k.enonce}}),k.explication&&r.jsxs("div",{className:"quiz-results__q-explanation",children:[r.jsx("strong",{children:" Explication :"}),r.jsx("div",{dangerouslySetInnerHTML:{__html:k.explication}})]})]},k.id)})]}),r.jsx("div",{className:"quiz-results__actions",children:r.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:a,children:"Retour au tableau de bord"})})]})}):r.jsxs("div",{className:"quiz-player",children:[r.jsxs("div",{className:"quiz-player__topbar",children:[r.jsxs("div",{className:"quiz-player__info",children:[r.jsx("span",{className:"quiz-player__title",children:e.titre}),r.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",l.length]})]}),r.jsxs("div",{className:"quiz-player__topbar-right",children:[r.jsxs("span",{className:`quiz-player__timer ${p<60?"quiz-player__timer--danger":p<300?"quiz-player__timer--warning":""}`,children:[" ",A(p)]}),r.jsxs("span",{className:"quiz-player__answered",children:[T,"/",l.length," rpondue",T>1?"s":""]})]})]}),r.jsx("div",{className:"quiz-player__progress-bar",children:r.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/l.length*100}%`}})}),r.jsxs("div",{className:"quiz-player__question-area",children:[r.jsxs("div",{className:"quiz-player__question-meta",children:[r.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:uf[C.type]},children:[cf[C.type]," ",Wl[C.type]]}),r.jsxs("span",{className:"quiz-player__points",children:[C.points," point",C.points>1?"s":""]})]}),r.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:C.enonce}}),r.jsxs("div",{className:"quiz-player__answer-area",children:[C.type==="qcm_unique"&&r.jsx(o3,{question:C,reponse:d.get(C.id),onUpdate:k=>E(C.id,k),melangerOptions:e.melangerOptions}),C.type==="qcm_multiple"&&r.jsx(c3,{question:C,reponse:d.get(C.id),onUpdate:k=>E(C.id,k),melangerOptions:e.melangerOptions}),C.type==="drag_drop"&&r.jsx(u3,{question:C,reponse:d.get(C.id),onUpdate:k=>E(C.id,k)}),C.type==="mise_en_relation"&&r.jsx(d3,{question:C,reponse:d.get(C.id),onUpdate:k=>E(C.id,k)}),C.type==="essai"&&r.jsx(f3,{question:C,reponse:d.get(C.id),onUpdate:k=>E(C.id,k)})]})]}),r.jsxs("div",{className:"quiz-player__nav",children:[r.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>O(o-1),disabled:o===0,children:" Prcdent"}),r.jsx("div",{className:"quiz-player__pagination",children:l.map((k,R)=>r.jsx("button",{className:`quiz-player__page-dot ${R===o?"quiz-player__page-dot--current":""} ${d.has(k.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>O(R),title:`Question ${R+1}`,children:R+1},k.id))}),o<l.length-1?r.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>O(o+1),children:"Suivant "}):r.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>S(!0),disabled:v,children:v?" Envoi...":" Soumettre le quiz"})]}),j&&r.jsx("div",{className:"quiz-player__modal-overlay",children:r.jsxs("div",{className:"quiz-player__modal",children:[r.jsx("h3",{children:"Soumettre le quiz ?"}),r.jsxs("p",{children:["Vous avez rpondu  ",r.jsx("strong",{children:T})," question",T>1?"s":""," sur"," ",r.jsx("strong",{children:l.length}),"."]}),T<l.length&&r.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",l.length-T," question",l.length-T>1?"s":""," sans rponse !"]}),r.jsxs("div",{className:"quiz-player__modal-actions",children:[r.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>S(!1),children:"Continuer le quiz"}),r.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:D,children:"Confirmer la soumission"})]})]})})]})},o3=({question:e,reponse:t,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=g.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]);return r.jsx("div",{className:"player-qcm",children:o.map(u=>r.jsxs("label",{className:`player-qcm__option ${t?.selectedOptionId===u.id?"player-qcm__option--selected":""}`,children:[r.jsx("input",{type:"radio",name:`q_${e.id}`,checked:t?.selectedOptionId===u.id,onChange:()=>n({selectedOptionId:u.id})}),r.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:u.texte}})]},u.id))})},c3=({question:e,reponse:t,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=g.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]),u=t?.selectedOptionIds||[],d=m=>{const p=u.includes(m)?u.filter(h=>h!==m):[...u,m];n({selectedOptionIds:p})};return r.jsxs("div",{className:"player-qcm",children:[r.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(m=>r.jsxs("label",{className:`player-qcm__option ${u.includes(m.id)?"player-qcm__option--selected":""}`,children:[r.jsx("input",{type:"checkbox",checked:u.includes(m.id),onChange:()=>d(m.id)}),r.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:m.texte}})]},m.id))]})},u3=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,[l,o]=g.useState(()=>t?.ordrePropose?t.ordrePropose.map(y=>a.items.find(x=>x.id===y)).filter(Boolean):[...a.items].sort(()=>Math.random()-.5)),[u,d]=g.useState(null);g.useEffect(()=>{n({ordrePropose:l.map(y=>y.id)})},[l]);const m=y=>{d(y)},p=(y,x)=>{if(y.preventDefault(),u===null||u===x)return;const _=[...l],[j]=_.splice(u,1);_.splice(x,0,j),o(_),d(x)},h=()=>{d(null)},v=(y,x)=>{const _=x==="up"?y-1:y+1;if(_<0||_>=l.length)return;const j=[...l];[j[y],j[_]]=[j[_],j[y]],o(j)};return r.jsxs("div",{className:"player-dragdrop",children:[r.jsx("p",{className:"player-dragdrop__consigne",children:a.consigneOrdre}),r.jsx("div",{className:"player-dragdrop__list",children:l.map((y,x)=>r.jsxs("div",{className:`player-dragdrop__item ${u===x?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>m(x),onDragOver:_=>p(_,x),onDragEnd:h,children:[r.jsx("span",{className:"player-dragdrop__handle",children:""}),r.jsx("span",{className:"player-dragdrop__number",children:x+1}),r.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:y.texte}}),r.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[r.jsx("button",{type:"button",onClick:()=>v(x,"up"),disabled:x===0,children:""}),r.jsx("button",{type:"button",onClick:()=>v(x,"down"),disabled:x===l.length-1,children:""})]})]},y.id))})]})},d3=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,l=g.useMemo(()=>[...a.paires].sort(()=>Math.random()-.5),[a.paires]),[o,u]=g.useState(t?.relationsProposees||{}),[d,m]=g.useState(null);g.useEffect(()=>{n({relationsProposees:o})},[o]);const p=x=>{m(x)},h=x=>{d&&(u(_=>({..._,[d]:x})),m(null))},v=x=>{u(_=>{const j={..._};return delete j[x],j})},y=new Set(Object.values(o));return r.jsxs("div",{className:"player-relation",children:[r.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),r.jsxs("div",{className:"player-relation__columns",children:[r.jsxs("div",{className:"player-relation__col",children:[r.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),a.paires.map(x=>r.jsxs("div",{className:`player-relation__item player-relation__item--left ${d===x.id?"player-relation__item--selected":""} ${o[x.id]?"player-relation__item--matched":""}`,onClick:()=>{o[x.id]?v(x.id):p(x.id)},children:[r.jsx("div",{dangerouslySetInnerHTML:{__html:x.gauche}}),o[x.id]&&r.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]}),r.jsxs("div",{className:"player-relation__col",children:[r.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),l.map(x=>r.jsxs("div",{className:`player-relation__item player-relation__item--right ${y.has(x.id)?"player-relation__item--matched":""} ${d&&!y.has(x.id)?"player-relation__item--clickable":""}`,onClick:()=>{d&&!y.has(x.id)&&h(x.id)},children:[r.jsx("div",{dangerouslySetInnerHTML:{__html:x.droite}}),y.has(x.id)&&r.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]})]})]})},f3=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,[l,o]=g.useState(t?.texteReponse||""),u=l.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return g.useEffect(()=>{n({texteReponse:l})},[l]),r.jsxs("div",{className:"player-essai",children:[r.jsxs("div",{className:"player-essai__info",children:[a.nombreMotsMin&&r.jsxs("span",{className:u<a.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",a.nombreMotsMin," mots"]}),a.nombreMotsMax&&r.jsxs("span",{className:u>a.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",a.nombreMotsMax," mots"]}),r.jsxs("span",{className:"player-essai__count",children:[u," mot",u>1?"s":""]})]}),r.jsx("textarea",{className:"player-essai__textarea",value:l,onChange:d=>o(d.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},m3=()=>{const{quizId:e}=Hn(),t=ot(),{currentUser:n}=it(),[a,l]=g.useState(null),[o,u]=g.useState(!0),[d,m]=g.useState(null);return g.useEffect(()=>{(async()=>{if(!e){m("ID du quiz manquant"),u(!1);return}try{const h=await s2(e);if(!h){m("Quiz introuvable");return}if(h.isPremium&&!n?.isPremium){m("Ce quiz est rserv aux abonns Premium");return}l(h)}catch(h){console.error("Erreur chargement quiz:",h),m(h.message||"Impossible de charger le quiz")}finally{u(!1)}})()},[e,n]),o?r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),r.jsx("p",{children:"Chargement du quiz..."})]}):d?r.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:r.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),r.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:d}),d.includes("Premium")&&r.jsx("button",{onClick:()=>t("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),r.jsx("button",{onClick:()=>t(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):a?r.jsx(l3,{quiz:a,userId:n?.uid||"",onComplete:p=>{console.log(" Quiz termin  Note:",p.note20,"/20")},onQuit:()=>t("/dashboard")}):r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsx("p",{children:"Quiz introuvable"}),r.jsx("button",{onClick:()=>t(-1),children:" Retour"})]})},o2=_e(te,"quiz_results"),Dy=_e(te,"progressions"),p3=async e=>{try{const t=await Pt(o2,{...e,datePassage:Me.now()});return e.reussi&&await b3(e.userId,e.disciplineId,e.disciplineNom,e.quizId),t.id}catch(t){throw console.error("Erreur lors de la sauvegarde du rsultat :",t),t}},fm=async(e,t)=>{try{let n=Te(o2,we("userId","==",e),Ke("datePassage","desc"));return t&&(n=Te(n,cn(t))),(await De(n)).docs.map(l=>({id:l.id,...l.data()}))}catch(n){throw console.error("Erreur rcupration historique :",n),n}},h3=async e=>{try{const t=await fm(e);if(t.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=t.reduce((h,v)=>h+v.pourcentage,0),a=Math.round(n/t.length),l=Math.max(...t.map(h=>h.pourcentage)),o=t.reduce((h,v)=>h+(v.tempsEcoule||0),0),u=t.filter(h=>h.reussi).length;let d=0,m=0;for(const h of t)h.reussi?(d++,m=Math.max(m,d)):d=0;let p=0;for(const h of t)if(h.reussi)p++;else break;return{totalQuizPasses:t.length,totalQuizReussis:u,moyenneGenerale:a,tempsTotal:o,meilleurScore:l,serieReussites:p,meilleureSerieReussites:Math.max(m,p)}}catch(t){return console.error("Erreur calcul stats :",t),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},v3=async e=>{try{const t=await fm(e);if(t.length===0)return[];const n={};for(const a of t){const l=a.disciplineId;n[l]||(n[l]=[]),n[l].push(a)}return Object.entries(n).map(([a,l])=>{const o=Math.round(l.reduce((v,y)=>v+y.pourcentage,0)/l.length),u=Math.max(...l.map(v=>v.pourcentage)),d=l[0].pourcentage,m=l.filter(v=>v.reussi).length,p=l.reduce((v,y)=>v+(y.tempsEcoule||0),0);let h="stable";if(l.length>=4){const v=l.slice(0,3),y=l.slice(3,6),x=v.reduce((j,S)=>j+S.pourcentage,0)/v.length,_=y.reduce((j,S)=>j+S.pourcentage,0)/y.length;x-_>5?h="up":_-x>5&&(h="down")}return{disciplineId:a,disciplineNom:l[0].disciplineNom||a,nombreQuiz:l.length,moyenne:o,meilleurScore:u,dernierScore:d,quizReussis:m,tempsTotal:p,tendance:h}})}catch(t){return console.error("Erreur progression par discipline :",t),[]}},g3=async(e,t)=>{try{return(await fm(e,t||20)).reverse().map(a=>({date:(a.datePassage?.toDate?a.datePassage.toDate():new Date(a.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:a.pourcentage,discipline:a.disciplineNom||a.disciplineId}))}catch(n){return console.error("Erreur donnes temporelles :",n),[]}},x3=async(e,t,n)=>{const a=`${e}_${t}`,l=Ne(Dy,a),o=await Dt(l);if(o.exists())return{...o.data()};const[u,d]=await Promise.all([O1("ressources",t),O1("quizzes",t)]),m={userId:e,disciplineId:t,disciplineNom:n,ressourcesVues:[],quizReussis:[],totalRessources:u,totalQuiz:d,pourcentage:0,dernierAcces:Me.now(),createdAt:Me.now(),updatedAt:Me.now()};return await dm(l,m),m},O1=async(e,t)=>{try{const n=Te(_e(te,e),we("disciplineId","==",t));return(await De(n)).size}catch{return 0}},y3=e=>{if(e.totalRessources+e.totalQuiz===0)return 0;const n=e.totalRessources>0?e.ressourcesVues.length/e.totalRessources*40:0,a=e.totalQuiz>0?e.quizReussis.length/e.totalQuiz*60:0;return e.totalRessources===0?Math.min(100,Math.round(e.quizReussis.length/e.totalQuiz*100)):e.totalQuiz===0?Math.min(100,Math.round(e.ressourcesVues.length/e.totalRessources*100)):Math.min(100,Math.round(n+a))},b3=async(e,t,n,a)=>{try{const l=`${e}_${t}`,o=Ne(Dy,l),u=await x3(e,t,n);if(u.quizReussis.includes(a))return await He(o,{dernierAcces:Me.now()}),u;const d=[...u.quizReussis,a],m={...u,quizReussis:d,dernierAcces:Me.now(),updatedAt:Me.now(),pourcentage:0};return m.pourcentage=y3(m),await dm(o,m),m}catch(l){throw console.error("Erreur enregistrement quiz russi :",l),l}},j3=async e=>{try{const t=Te(Dy,we("userId","==",e));return(await De(t)).docs.map(a=>a.data())}catch(t){return console.error("Erreur rcupration progressions :",t),[]}},N3=async e=>{try{const t=await j3(e),n=await c2(e),a=t.reduce((d,m)=>d+m.ressourcesVues.length,0),l=t.reduce((d,m)=>d+m.quizReussis.length,0),o=t.length>0?Math.round(t.reduce((d,m)=>d+m.pourcentage,0)/t.length):0,u=t.filter(d=>d.pourcentage>=100).length;return{totalRessourcesVues:a,totalQuizReussis:l,pourcentageMoyen:o,disciplinesCommencees:t.length,disciplinesCompletees:u,streakActuel:n.streakActuel,meilleurStreak:n.meilleurStreak,parDiscipline:t}}catch(t){return console.error("Erreur progression globale :",t),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},_3=()=>new Date().toISOString().split("T")[0],S3=()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]},c2=async e=>{try{const t=Ne(te,"users",e),n=await Dt(t);if(!n.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const a=n.data();return{streakActuel:a.streakActuel||0,meilleurStreak:a.meilleurStreak||0,dernierJourAcces:a.dernierJourAcces||""}}catch(t){return console.error("Erreur rcupration streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},w3=async e=>{try{const t=Ne(te,"users",e),n=await c2(e),a=_3();if(n.dernierJourAcces===a)return n;const l=S3();let o;n.dernierJourAcces===l?o=n.streakActuel+1:o=1;const u=Math.max(n.meilleurStreak,o);return await He(t,{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}),{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}}catch(t){return console.error("Erreur mise  jour streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},C3=(e,t,n)=>{const a=n?.totalRessourcesVues||0;n?.totalQuizReussis;const l=n?.disciplinesCompletees||0;n?.streakActuel;const o=n?.meilleurStreak||0,u=n?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:a>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:a>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:a>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:a>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:e.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:e.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:e.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:e.moyenneGenerale>=80&&e.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:l>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:u>=3||t.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:u>=5||t.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:a>=50&&e.totalQuizReussis>=20}]},u2=e=>{if(e<60)return`${e} s`;const t=Math.floor(e/60),n=e%60;return n>0?`${t} min ${n.toString().padStart(2,"0")} s`:`${t} min`},Ul=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":"#ef4444",d2=e=>e>=80?"Excellent":e>=60?"Bien":e>=40?"Passable":" amliorer",E3=()=>{const{quizId:e}=Hn(),t=ot(),{currentUser:n}=it(),[a,l]=g.useState(null),[o,u]=g.useState(""),[d,m]=g.useState(!0),[p,h]=g.useState(null),[v,y]=g.useState("intro"),[x,_]=g.useState(0),[j,S]=g.useState({}),[w,A]=g.useState(0),[C,E]=g.useState(0),O=g.useRef(null),[D,T]=g.useState(0),[k,R]=g.useState(0),[L,Q]=g.useState(0),[$,F]=g.useState(!1),[Y,M]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!e){h("ID du quiz manquant."),m(!1);return}try{const V=await ER(e);if(!V){h("Quiz introuvable."),m(!1);return}l(V),A(V.duree*60);try{const Pe=(await Xa.getAll()).find(le=>le.id===V.disciplineId);u(Pe?.nom||V.disciplineId)}catch{u(V.disciplineId)}}catch(V){h("Erreur lors du chargement du quiz."),console.error(V)}finally{m(!1)}})()},[e]),g.useEffect(()=>{if(v==="playing")return O.current=setInterval(()=>{A(ye=>ye<=1?(clearInterval(O.current),B(),0):ye-1),E(ye=>ye+1)},1e3),()=>{O.current&&clearInterval(O.current)}},[v]);const q=()=>{y("playing"),_(0),S({}),E(0),a&&A(a.duree*60)},Z=(ye,V)=>{S(he=>({...he,[ye]:V}))},H=ye=>{a&&ye>=0&&ye<a.questions.length&&_(ye)},B=g.useCallback(async()=>{if(!a||!n||v==="review")return;O.current&&clearInterval(O.current);let ye=0,V=0,he=0;a.questions.forEach(W=>{const G=W.points||1;V+=G,j[W.id]===W.reponseCorrecte&&(ye+=G,he++)});const Pe=V>0?Math.round(ye/V*100):0,le=Pe>=(a.noteMinimale||50);T(ye),R(V),Q(he),y("review"),F(!0);try{const W={quizId:a.id,quizTitre:a.titre,disciplineId:a.disciplineId,disciplineNom:o,userId:n.uid,reponses:a.questions.map(G=>j[G.id]??-1),tempsEcoule:C,score:ye,totalPoints:V,pourcentage:Pe,reussi:le,nombreQuestions:a.questions.length,bonnesReponses:he};await p3(W),M(!0)}catch(W){console.error("Erreur lors de la sauvegarde :",W)}finally{F(!1)}},[a,n,j,C,o,v]),I=ye=>{const V=Math.floor(ye/60),he=ye%60;return`${V.toString().padStart(2,"0")}:${he.toString().padStart(2,"0")}`},pe=()=>{if(!a)return"";const ye=a.duree*60,V=w/ye;return V<=.1?"timer-critical":V<=.25?"timer-warning":""},re=Object.keys(j).length;if(d)return r.jsxs("div",{className:"quiz-player-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement du quiz..."})]});if(p||!a)return r.jsxs("div",{className:"quiz-player-error",children:[r.jsx(of,{size:48}),r.jsx("h3",{children:p||"Quiz introuvable"}),r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(xx,{size:18})," Retour au tableau de bord"]})]});if(a.isPremium&&!n?.isPremium)return r.jsx("div",{className:"quiz-player-locked",children:r.jsxs("div",{className:"qp-locked-card",children:[r.jsx(bx,{size:48}),r.jsx("h3",{children:"Quiz Premium"}),r.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),r.jsxs("p",{className:"qp-locked-price",children:[" partir de ",r.jsx("strong",{children:"2 000 FCFA/mois"})]}),r.jsxs("div",{className:"qp-locked-actions",children:[r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/premium"),children:[r.jsx(an,{size:18})," Devenir Premium"]}),r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(wv,{size:18})," Retour"]})]})]})});if(v==="intro")return r.jsx("div",{className:"quiz-player-intro",children:r.jsxs("div",{className:"qp-intro-card",children:[r.jsxs("div",{className:"qp-intro-header",children:[r.jsxs("button",{className:"qp-back-btn",onClick:()=>t(-1),children:[r.jsx(wv,{size:20})," Retour"]}),a.isPremium&&r.jsxs("span",{className:"qp-badge qp-badge-premium",children:[r.jsx(an,{size:12})," Premium"]})]}),r.jsxs("div",{className:"qp-intro-content",children:[r.jsx("h1",{className:"qp-intro-title",children:a.titre}),r.jsx("span",{className:"qp-intro-discipline",children:o}),r.jsxs("div",{className:"qp-intro-stats",children:[r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(ln,{size:20}),r.jsxs("div",{children:[r.jsx("span",{className:"qp-intro-stat-value",children:a.questions.length}),r.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(Xl,{size:20}),r.jsxs("div",{children:[r.jsxs("span",{className:"qp-intro-stat-value",children:[a.duree," min"]}),r.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(Ui,{size:20}),r.jsxs("div",{children:[r.jsxs("span",{className:"qp-intro-stat-value",children:[a.noteMinimale||50,"%"]}),r.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),r.jsxs("div",{className:"qp-intro-instructions",children:[r.jsx("h3",{children:"Instructions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),r.jsx("li",{children:"Chaque question a une seule bonne rponse"}),r.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),r.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),r.jsxs("li",{children:["Il faut obtenir au moins ",a.noteMinimale||50,"% pour russir"]})]})]})]}),r.jsxs("button",{className:"qp-btn qp-btn-start",onClick:q,children:[r.jsx(Gl,{size:20})," Commencer le quiz"]})]})});if(v==="playing"){const ye=a.questions[x];return r.jsxs("div",{className:"quiz-player-game",children:[r.jsxs("div",{className:"qp-game-header",children:[r.jsxs("div",{className:"qp-game-info",children:[r.jsx("span",{className:"qp-game-title",children:a.titre}),r.jsx("span",{className:"qp-game-discipline",children:o})]}),r.jsxs("div",{className:`qp-timer ${pe()}`,children:[r.jsx(Qq,{size:18}),r.jsx("span",{children:I(w)})]})]}),r.jsx("div",{className:"qp-progress-bar",children:r.jsx("div",{className:"qp-progress-fill",style:{width:`${(x+1)/a.questions.length*100}%`}})}),r.jsxs("div",{className:"qp-game-content",children:[r.jsxs("div",{className:"qp-question-header",children:[r.jsxs("span",{className:"qp-question-number",children:["Question ",x+1,"/",a.questions.length]}),r.jsxs("span",{className:"qp-question-points",children:[ye.points||1," pt(s)"]})]}),r.jsx("h2",{className:"qp-question-text",children:ye.question}),r.jsx("div",{className:"qp-options-list",children:ye.options.map((V,he)=>r.jsxs("button",{className:`qp-option ${j[ye.id]===he?"selected":""}`,onClick:()=>Z(ye.id,he),children:[r.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+he)}),r.jsx("span",{className:"qp-option-text",children:V}),j[ye.id]===he&&r.jsx(Rt,{size:18,className:"qp-option-check"})]},he))})]}),r.jsxs("div",{className:"qp-game-footer",children:[r.jsx("div",{className:"qp-question-indicators",children:a.questions.map((V,he)=>r.jsx("button",{className:`qp-indicator ${he===x?"active":""} ${j[V.id]!==void 0?"answered":""}`,onClick:()=>H(he),children:he+1},V.id))}),r.jsxs("div",{className:"qp-nav-buttons",children:[r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>H(x-1),disabled:x===0,children:[r.jsx(wv,{size:16})," Prcdent"]}),x<a.questions.length-1?r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>H(x+1),children:["Suivant ",r.jsx(vs,{size:16})]}):r.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:B,disabled:re<a.questions.length,children:[r.jsx(Rt,{size:16}),"Soumettre (",re,"/",a.questions.length,")"]})]})]})]})}const de=k>0?Math.round(D/k*100):0,ge=de>=(a.noteMinimale||50);return r.jsxs("div",{className:"quiz-player-review",children:[r.jsxs("div",{className:`qp-score-card ${ge?"success":"fail"}`,children:[r.jsx("div",{className:"qp-score-icon",children:ge?r.jsx(Ui,{size:48}):r.jsx(of,{size:48})}),r.jsx("h2",{className:"qp-score-title",children:ge?"Flicitations ! ":"Continuez vos efforts ! "}),r.jsxs("div",{className:"qp-score-circle",style:{borderColor:Ul(de)},children:[r.jsxs("span",{className:"qp-score-value",children:[de,"%"]}),r.jsx("span",{className:"qp-score-label",children:d2(de)})]}),r.jsxs("div",{className:"qp-score-details",children:[r.jsxs("div",{className:"qp-score-detail",children:[r.jsxs("span",{children:[L,"/",a.questions.length]}),r.jsx("small",{children:"Bonnes rponses"})]}),r.jsxs("div",{className:"qp-score-detail",children:[r.jsxs("span",{children:[D,"/",k]}),r.jsx("small",{children:"Points"})]}),r.jsxs("div",{className:"qp-score-detail",children:[r.jsx("span",{children:u2(C)}),r.jsx("small",{children:"Temps"})]})]}),$&&r.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),Y&&r.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),r.jsxs("div",{className:"qp-review-actions",children:[r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(xx,{size:18})," Tableau de bord"]}),r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:q,children:[r.jsx(Vq,{size:18})," Recommencer"]})]}),r.jsxs("div",{className:"qp-review-questions",children:[r.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),a.questions.map((ye,V)=>{const he=j[ye.id],Pe=he===ye.reponseCorrecte;return r.jsxs("div",{className:`qp-review-question ${Pe?"correct":"incorrect"}`,children:[r.jsxs("div",{className:"qp-review-question-header",children:[r.jsxs("span",{className:"qp-review-q-number",children:["Q",V+1]}),Pe?r.jsxs("span",{className:"qp-review-badge correct",children:[r.jsx(Rt,{size:14})," Correct"]}):r.jsxs("span",{className:"qp-review-badge incorrect",children:[r.jsx(jx,{size:14})," Incorrect"]}),r.jsxs("span",{className:"qp-review-q-points",children:[Pe?ye.points||1:0,"/",ye.points||1," pt(s)"]})]}),r.jsx("p",{className:"qp-review-q-text",children:ye.question}),r.jsx("div",{className:"qp-review-options",children:ye.options.map((le,W)=>{let G="qp-review-option";return W===ye.reponseCorrecte&&(G+=" correct-answer"),W===he&&!Pe&&(G+=" wrong-answer"),r.jsxs("div",{className:G,children:[r.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+W)}),r.jsx("span",{children:le}),W===ye.reponseCorrecte&&r.jsx(Rt,{size:14,className:"qp-review-check"}),W===he&&!Pe&&r.jsx(jx,{size:14,className:"qp-review-x"})]},W)})}),ye.explication&&r.jsxs("div",{className:"qp-review-explication",children:[r.jsx("strong",{children:" Explication :"})," ",ye.explication]})]},ye.id)})]})]})};function f2(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=f2(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function yt(){for(var e,t,n=0,a="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=f2(e))&&(a&&(a+=" "),a+=t);return a}var A3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function My(e){if(typeof e!="string")return!1;var t=A3;return t.includes(e)}var z3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],O3=new Set(z3);function m2(e){return typeof e!="string"?!1:O3.has(e)}function p2(e){return typeof e=="string"&&e.startsWith("data-")}function Un(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(m2(n)||p2(n))&&(t[n]=e[n]);return t}function Yc(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Un(t)}return typeof e=="object"&&!Array.isArray(e)?Un(e):null}function Mr(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(m2(n)||p2(n)||My(n))&&(t[n]=e[n]);return t}function D3(e){return e==null?null:g.isValidElement(e)?Mr(e.props):typeof e=="object"&&!Array.isArray(e)?Mr(e):null}var M3=["children","width","height","viewBox","className","style","title","desc"];function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nx.apply(null,arguments)}function P3(e,t){if(e==null)return{};var n,a,l=k3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function k3(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var h2=g.forwardRef((e,t)=>{var{children:n,width:a,height:l,viewBox:o,className:u,style:d,title:m,desc:p}=e,h=P3(e,M3),v=o||{width:a,height:l,x:0,y:0},y=yt("recharts-surface",u);return g.createElement("svg",Nx({},Mr(h),{className:y,width:a,height:l,style:d,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),g.createElement("title",null,m),g.createElement("desc",null,p),n)}),T3=["children","className"];function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_x.apply(null,arguments)}function q3(e,t){if(e==null)return{};var n,a,l=R3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function R3(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var An=g.forwardRef((e,t)=>{var{children:n,className:a}=e,l=q3(e,T3),o=yt("recharts-layer",a);return g.createElement("g",_x({className:o},Mr(l),{ref:t}),n)}),I3=g.createContext(null);function _t(e){return function(){return e}}const v2=Math.cos,df=Math.sin,Qn=Math.sqrt,ff=Math.PI,mm=2*ff,Sx=Math.PI,wx=2*Sx,gs=1e-6,L3=wx-gs;function g2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return g2;const n=10**t;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}class B3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?g2:$3(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,l){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,n,a,l,o,u){this._append`C${+t},${+n},${+a},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(t,n,a,l,o){if(t=+t,n=+n,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,d=this._y1,m=a-t,p=l-n,h=u-t,v=d-n,y=h*h+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>gs)if(!(Math.abs(v*m-p*h)>gs)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let x=a-u,_=l-d,j=m*m+p*p,S=x*x+_*_,w=Math.sqrt(j),A=Math.sqrt(y),C=o*Math.tan((Sx-Math.acos((j+y-S)/(2*w*A)))/2),E=C/A,O=C/w;Math.abs(E-1)>gs&&this._append`L${t+E*h},${n+E*v}`,this._append`A${o},${o},0,0,${+(v*x>h*_)},${this._x1=t+O*m},${this._y1=n+O*p}`}}arc(t,n,a,l,o,u){if(t=+t,n=+n,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(l),m=a*Math.sin(l),p=t+d,h=n+m,v=1^u,y=u?l-o:o-l;this._x1===null?this._append`M${p},${h}`:(Math.abs(this._x1-p)>gs||Math.abs(this._y1-h)>gs)&&this._append`L${p},${h}`,a&&(y<0&&(y=y%wx+wx),y>L3?this._append`A${a},${a},0,1,${v},${t-d},${n-m}A${a},${a},0,1,${v},${this._x1=p},${this._y1=h}`:y>gs&&this._append`A${a},${a},0,${+(y>=Sx)},${v},${this._x1=t+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(t,n,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function Py(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new B3(t)}function ky(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function x2(e){this._context=e}x2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pm(e){return new x2(e)}function y2(e){return e[0]}function b2(e){return e[1]}function j2(e,t){var n=_t(!0),a=null,l=pm,o=null,u=Py(d);e=typeof e=="function"?e:e===void 0?y2:_t(e),t=typeof t=="function"?t:t===void 0?b2:_t(t);function d(m){var p,h=(m=ky(m)).length,v,y=!1,x;for(a==null&&(o=l(x=u())),p=0;p<=h;++p)!(p<h&&n(v=m[p],p,m))===y&&((y=!y)?o.lineStart():o.lineEnd()),y&&o.point(+e(v,p,m),+t(v,p,m));if(x)return o=null,x+""||null}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:_t(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:_t(+m),d):t},d.defined=function(m){return arguments.length?(n=typeof m=="function"?m:_t(!!m),d):n},d.curve=function(m){return arguments.length?(l=m,a!=null&&(o=l(a)),d):l},d.context=function(m){return arguments.length?(m==null?a=o=null:o=l(a=m),d):a},d}function zd(e,t,n){var a=null,l=_t(!0),o=null,u=pm,d=null,m=Py(p);e=typeof e=="function"?e:e===void 0?y2:_t(+e),t=typeof t=="function"?t:_t(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?b2:_t(+n);function p(v){var y,x,_,j=(v=ky(v)).length,S,w=!1,A,C=new Array(j),E=new Array(j);for(o==null&&(d=u(A=m())),y=0;y<=j;++y){if(!(y<j&&l(S=v[y],y,v))===w)if(w=!w)x=y,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),_=y-1;_>=x;--_)d.point(C[_],E[_]);d.lineEnd(),d.areaEnd()}w&&(C[y]=+e(S,y,v),E[y]=+t(S,y,v),d.point(a?+a(S,y,v):C[y],n?+n(S,y,v):E[y]))}if(A)return d=null,A+""||null}function h(){return j2().defined(l).curve(u).context(o)}return p.x=function(v){return arguments.length?(e=typeof v=="function"?v:_t(+v),a=null,p):e},p.x0=function(v){return arguments.length?(e=typeof v=="function"?v:_t(+v),p):e},p.x1=function(v){return arguments.length?(a=v==null?null:typeof v=="function"?v:_t(+v),p):a},p.y=function(v){return arguments.length?(t=typeof v=="function"?v:_t(+v),n=null,p):t},p.y0=function(v){return arguments.length?(t=typeof v=="function"?v:_t(+v),p):t},p.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:_t(+v),p):n},p.lineX0=p.lineY0=function(){return h().x(e).y(t)},p.lineY1=function(){return h().x(e).y(n)},p.lineX1=function(){return h().x(a).y(t)},p.defined=function(v){return arguments.length?(l=typeof v=="function"?v:_t(!!v),p):l},p.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),p):u},p.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),p):o},p}class N2{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function U3(e){return new N2(e,!0)}function F3(e){return new N2(e,!1)}const Ty={draw(e,t){const n=Qn(t/ff);e.moveTo(n,0),e.arc(0,0,n,0,mm)}},G3={draw(e,t){const n=Qn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},_2=Qn(1/3),H3=_2*2,Q3={draw(e,t){const n=Qn(t/H3),a=n*_2;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},V3={draw(e,t){const n=Qn(t),a=-n/2;e.rect(a,a,n,n)}},Y3=.8908130915292852,S2=df(ff/10)/df(7*ff/10),K3=df(mm/10)*S2,X3=-v2(mm/10)*S2,W3={draw(e,t){const n=Qn(t*Y3),a=K3*n,l=X3*n;e.moveTo(0,-n),e.lineTo(a,l);for(let o=1;o<5;++o){const u=mm*o/5,d=v2(u),m=df(u);e.lineTo(m*n,-d*n),e.lineTo(d*a-m*l,m*a+d*l)}e.closePath()}},qv=Qn(3),Z3={draw(e,t){const n=-Qn(t/(qv*3));e.moveTo(0,n*2),e.lineTo(-qv*n,-n),e.lineTo(qv*n,-n),e.closePath()}},Sn=-.5,wn=Qn(3)/2,Cx=1/Qn(12),J3=(Cx/2+1)*3,e5={draw(e,t){const n=Qn(t/J3),a=n/2,l=n*Cx,o=a,u=n*Cx+n,d=-o,m=u;e.moveTo(a,l),e.lineTo(o,u),e.lineTo(d,m),e.lineTo(Sn*a-wn*l,wn*a+Sn*l),e.lineTo(Sn*o-wn*u,wn*o+Sn*u),e.lineTo(Sn*d-wn*m,wn*d+Sn*m),e.lineTo(Sn*a+wn*l,Sn*l-wn*a),e.lineTo(Sn*o+wn*u,Sn*u-wn*o),e.lineTo(Sn*d+wn*m,Sn*m-wn*d),e.closePath()}};function t5(e,t){let n=null,a=Py(l);e=typeof e=="function"?e:_t(e||Ty),t=typeof t=="function"?t:_t(t===void 0?64:+t);function l(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:_t(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:_t(+o),l):t},l.context=function(o){return arguments.length?(n=o??null,l):n},l}function mf(){}function pf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function w2(e){this._context=e}w2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function r5(e){return new w2(e)}function C2(e){this._context=e}C2.prototype={areaStart:mf,areaEnd:mf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function n5(e){return new C2(e)}function E2(e){this._context=e}E2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:pf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function a5(e){return new E2(e)}function A2(e){this._context=e}A2.prototype={areaStart:mf,areaEnd:mf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function i5(e){return new A2(e)}function D1(e){return e<0?-1:1}function M1(e,t,n){var a=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),u=(n-e._y1)/(l||a<0&&-0),d=(o*l+u*a)/(a+l);return(D1(o)+D1(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(d))||0}function P1(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Rv(e,t,n){var a=e._x0,l=e._y0,o=e._x1,u=e._y1,d=(o-a)/3;e._context.bezierCurveTo(a+d,l+d*t,o-d,u-d*n,o,u)}function hf(e){this._context=e}hf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rv(this,this._t0,P1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rv(this,P1(this,n=M1(this,e,t)),n);break;default:Rv(this,this._t0,n=M1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function z2(e){this._context=new O2(e)}(z2.prototype=Object.create(hf.prototype)).point=function(e,t){hf.prototype.point.call(this,t,e)};function O2(e){this._context=e}O2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,l,o){this._context.bezierCurveTo(t,e,a,n,o,l)}};function s5(e){return new hf(e)}function l5(e){return new z2(e)}function D2(e){this._context=e}D2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=k1(e),l=k1(t),o=0,u=1;u<n;++o,++u)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[u],t[u]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function k1(e){var t,n=e.length-1,a,l=new Array(n),o=new Array(n),u=new Array(n);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],t=1;t<n-1;++t)l[t]=1,o[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[n-1]=2,o[n-1]=7,u[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=l[t]/o[t-1],o[t]-=a,u[t]-=a*u[t-1];for(l[n-1]=u[n-1]/o[n-1],t=n-2;t>=0;--t)l[t]=(u[t]-l[t+1])/o[t];for(o[n-1]=(e[n]+l[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function o5(e){return new D2(e)}function hm(e,t){this._context=e,this._t=t}hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function c5(e){return new hm(e,.5)}function u5(e){return new hm(e,0)}function d5(e){return new hm(e,1)}function Os(e,t){if((u=e.length)>1)for(var n=1,a,l,o=e[t[0]],u,d=o.length;n<u;++n)for(l=o,o=e[t[n]],a=0;a<d;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function Ex(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function f5(e,t){return e[t]}function m5(e){const t=[];return t.key=e,t}function p5(){var e=_t([]),t=Ex,n=Os,a=f5;function l(o){var u=Array.from(e.apply(this,arguments),m5),d,m=u.length,p=-1,h;for(const v of o)for(d=0,++p;d<m;++d)(u[d][p]=[0,+a(v,u[d].key,p,o)]).data=v;for(d=0,h=ky(t(u));d<m;++d)u[h[d]].index=d;return n(u,h),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:_t(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:_t(+o),l):a},l.order=function(o){return arguments.length?(t=o==null?Ex:typeof o=="function"?o:_t(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(n=o??Os,l):n},l}function h5(e,t){if((a=e.length)>0){for(var n,a,l=0,o=e[0].length,u;l<o;++l){for(u=n=0;n<a;++n)u+=e[n][l][1]||0;if(u)for(n=0;n<a;++n)e[n][l][1]/=u}Os(e,t)}}function v5(e,t){if((l=e.length)>0){for(var n=0,a=e[t[0]],l,o=a.length;n<o;++n){for(var u=0,d=0;u<l;++u)d+=e[u][n][1]||0;a[n][1]+=a[n][0]=-d/2}Os(e,t)}}function g5(e,t){if(!(!((u=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var n=0,a=1,l,o,u;a<o;++a){for(var d=0,m=0,p=0;d<u;++d){for(var h=e[t[d]],v=h[a][1]||0,y=h[a-1][1]||0,x=(v-y)/2,_=0;_<d;++_){var j=e[t[_]],S=j[a][1]||0,w=j[a-1][1]||0;x+=S-w}m+=v,p+=x*v}l[a-1][1]+=l[a-1][0]=n,m&&(n-=p/m)}l[a-1][1]+=l[a-1][0]=n,Os(e,t)}}var Iv={},Lv={},T1;function x5(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Lv)),Lv}var $v={},q1;function M2(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})($v)),$v}var Bv={},R1;function qy(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Bv)),Bv}var Uv={},Fv={},I1;function y5(){return I1||(I1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=t})(Fv)),Fv}var L1;function Ry(){return L1||(L1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y5(),n=qy();function a(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],u=l.length;if(u===0)return o;let d=0,m="",p="",h=!1;for(l.charCodeAt(0)===46&&(o.push(""),d++);d<u;){const v=l[d];p?v==="\\"&&d+1<u?(d++,m+=l[d]):v===p?p="":m+=v:h?v==='"'||v==="'"?p=v:v==="]"?(h=!1,o.push(m),m=""):m+=v:v==="["?(h=!0,m&&(o.push(m),m="")):v==="."?m&&(o.push(m),m=""):m+=v,d++}return m&&o.push(m),o}e.toPath=a})(Uv)),Uv}var $1;function Iy(){return $1||($1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x5(),n=M2(),a=qy(),l=Ry();function o(d,m,p){if(d==null)return p;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?n.isDeepKey(m)?o(d,l.toPath(m),p):p:h}case"number":case"symbol":{typeof m=="number"&&(m=a.toKey(m));const h=d[m];return h===void 0?p:h}default:{if(Array.isArray(m))return u(d,m,p);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?p:h}}}function u(d,m,p){if(m.length===0)return p;let h=d;for(let v=0;v<m.length;v++){if(h==null||t.isUnsafeProperty(m[v]))return p;h=h[m[v]]}return h===void 0?p:h}e.get=o})(Iv)),Iv}var Gv,B1;function b5(){return B1||(B1=1,Gv=Iy().get),Gv}var j5=b5();const Zl=Ka(j5);var N5=4;function Ti(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N5,n=10**t,a=Math.round(e*n)/n;return Object.is(a,-0)?0:a}function It(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.reduce((l,o,u)=>{var d=n[u-1];return typeof d=="string"?l+d+o:d!==void 0?l+Ti(d)+o:l+o},"")}var Gr=e=>e===0?0:e>0?1:-1,oa=e=>typeof e=="number"&&e!=+e,Ds=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ae=e=>(typeof e=="number"||e instanceof Number)&&!oa(e),ca=e=>Ae(e)||typeof e=="string",_5=0,Oc=e=>{var t=++_5;return"".concat(e||"").concat(t)},Fn=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(t)&&typeof t!="string")return a;var o;if(Ds(t)){if(n==null)return a;var u=t.indexOf("%");o=n*parseFloat(t.slice(0,u))/100}else o=+t;return oa(o)&&(o=a),l&&n!=null&&o>n&&(o=n),o},P2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[String(e[a])])n[String(e[a])]=!0;else return!0;return!1};function Lt(e,t,n){return Ae(e)&&Ae(t)?Ti(e+n*(t-e)):t}function k2(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Zl(a,t))===n)}var Mt=e=>e===null||typeof e>"u",Kc=e=>Mt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Hr(e){return e!=null}function Bs(){}var S5=["type","size","sizeType"];function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ax.apply(null,arguments)}function U1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function F1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U1(Object(n),!0).forEach(function(a){w5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function w5(e,t,n){return(t=C5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C5(e){var t=E5(e,"string");return typeof t=="symbol"?t:t+""}function E5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A5(e,t){if(e==null)return{};var n,a,l=z5(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function z5(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var T2={symbolCircle:Ty,symbolCross:G3,symbolDiamond:Q3,symbolSquare:V3,symbolStar:W3,symbolTriangle:Z3,symbolWye:e5},O5=Math.PI/180,D5=e=>{var t="symbol".concat(Kc(e));return T2[t]||Ty},M5=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*O5;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},P5=(e,t)=>{T2["symbol".concat(Kc(e))]=t},q2=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,l=A5(e,S5),o=F1(F1({},l),{},{type:t,size:n,sizeType:a}),u="circle";typeof t=="string"&&(u=t);var d=()=>{var y=D5(u),x=t5().type(y).size(M5(n,a,u)),_=x();if(_!==null)return _},{className:m,cx:p,cy:h}=o,v=Mr(o);return Ae(p)&&Ae(h)&&Ae(n)?g.createElement("path",Ax({},v,{className:yt("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};q2.registerSymbol=P5;var R2=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Ly=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(l=>{My(l)&&(a[l]=(o=>n[l](n,o)))}),a},k5=(e,t,n)=>a=>(e(t,n,a),null),$y=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];My(l)&&typeof o=="function"&&(a||(a={}),a[l]=k5(o,t,n))}),a};function G1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function T5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G1(Object(n),!0).forEach(function(a){q5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function q5(e,t,n){return(t=R5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R5(e){var t=I5(e,"string");return typeof t=="symbol"?t:t+""}function I5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kr(e,t){var n=T5({},e),a=t,l=Object.keys(t),o=l.reduce((u,d)=>(u[d]===void 0&&a[d]!==void 0&&(u[d]=a[d]),u),n);return o}var Hv={},Qv={},H1;function L5(){return H1||(H1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const l=new Map;for(let o=0;o<n.length;o++){const u=n[o],d=a(u,o,n);l.has(d)||l.set(d,u)}return Array.from(l.values())}e.uniqBy=t})(Qv)),Qv}var Vv={},Q1;function $5(){return Q1||(Q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return function(...l){return n.apply(this,l.slice(0,a))}}e.ary=t})(Vv)),Vv}var Yv={},V1;function I2(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Yv)),Yv}var Kv={},Xv={},Wv={},Y1;function B5(){return Y1||(Y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Wv)),Wv}var K1;function By(){return K1||(K1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B5();function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(Xv)),Xv}var Zv={},X1;function U5(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Zv)),Zv}var W1;function F5(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=By(),n=U5();function a(l){return n.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=a})(Kv)),Kv}var Jv={},eg={},Z1;function G5(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iy();function n(a){return function(l){return t.get(l,a)}}e.property=n})(eg)),eg}var tg={},rg={},ng={},ag={},J1;function L2(){return J1||(J1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(ag)),ag}var ig={},eS;function $2(){return eS||(eS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(ig)),ig}var sg={},tS;function B2(){return tS||(tS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(sg)),sg}var rS;function H5(){return rS||(rS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L2(),n=$2(),a=B2();function l(h,v,y){return typeof y!="function"?l(h,v,()=>{}):o(h,v,function x(_,j,S,w,A,C){const E=y(_,j,S,w,A,C);return E!==void 0?!!E:o(_,j,x,C)},new Map)}function o(h,v,y,x){if(v===h)return!0;switch(typeof v){case"object":return u(h,v,y,x);case"function":return Object.keys(v).length>0?o(h,{...v},y,x):a.isEqualsSameValueZero(h,v);default:return t.isObject(h)?typeof v=="string"?v==="":!0:a.isEqualsSameValueZero(h,v)}}function u(h,v,y,x){if(v==null)return!0;if(Array.isArray(v))return m(h,v,y,x);if(v instanceof Map)return d(h,v,y,x);if(v instanceof Set)return p(h,v,y,x);const _=Object.keys(v);if(h==null||n.isPrimitive(h))return _.length===0;if(_.length===0)return!0;if(x?.has(v))return x.get(v)===h;x?.set(v,h);try{for(let j=0;j<_.length;j++){const S=_[j];if(!n.isPrimitive(h)&&!(S in h)||v[S]===void 0&&h[S]!==void 0||v[S]===null&&h[S]!==null||!y(h[S],v[S],S,h,v,x))return!1}return!0}finally{x?.delete(v)}}function d(h,v,y,x){if(v.size===0)return!0;if(!(h instanceof Map))return!1;for(const[_,j]of v.entries()){const S=h.get(_);if(y(S,j,_,h,v,x)===!1)return!1}return!0}function m(h,v,y,x){if(v.length===0)return!0;if(!Array.isArray(h))return!1;const _=new Set;for(let j=0;j<v.length;j++){const S=v[j];let w=!1;for(let A=0;A<h.length;A++){if(_.has(A))continue;const C=h[A];let E=!1;if(y(C,S,j,h,v,x)&&(E=!0),E){_.add(A),w=!0;break}}if(!w)return!1}return!0}function p(h,v,y,x){return v.size===0?!0:h instanceof Set?m([...h],[...v],y,x):!1}e.isMatchWith=l,e.isSetMatch=p})(ng)),ng}var nS;function U2(){return nS||(nS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H5();function n(a,l){return t.isMatchWith(a,l,()=>{})}e.isMatch=n})(rg)),rg}var lg={},og={},cg={},aS;function Q5(){return aS||(aS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(cg)),cg}var ug={},iS;function Uy(){return iS||(iS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(ug)),ug}var dg={},sS;function F2(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",d="[object Date]",m="[object Map]",p="[object Set]",h="[object Array]",v="[object Function]",y="[object ArrayBuffer]",x="[object Object]",_="[object Error]",j="[object DataView]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",A="[object Uint16Array]",C="[object Uint32Array]",E="[object BigUint64Array]",O="[object Int8Array]",D="[object Int16Array]",T="[object Int32Array]",k="[object BigInt64Array]",R="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=y,e.arrayTag=h,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=E,e.booleanTag=l,e.dataViewTag=j,e.dateTag=d,e.errorTag=_,e.float32ArrayTag=R,e.float64ArrayTag=L,e.functionTag=v,e.int16ArrayTag=D,e.int32ArrayTag=T,e.int8ArrayTag=O,e.mapTag=m,e.numberTag=a,e.objectTag=x,e.regexpTag=t,e.setTag=p,e.stringTag=n,e.symbolTag=u,e.uint16ArrayTag=A,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=w})(dg)),dg}var fg={},lS;function V5(){return lS||(lS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(fg)),fg}var oS;function G2(){return oS||(oS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q5(),n=Uy(),a=F2(),l=$2(),o=V5();function u(h,v){return d(h,void 0,h,new Map,v)}function d(h,v,y,x=new Map,_=void 0){const j=_?.(h,v,y,x);if(j!==void 0)return j;if(l.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const S=new Array(h.length);x.set(h,S);for(let w=0;w<h.length;w++)S[w]=d(h[w],w,y,x,_);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;x.set(h,S);for(const[w,A]of h)S.set(w,d(A,w,y,x,_));return S}if(h instanceof Set){const S=new Set;x.set(h,S);for(const w of h)S.add(d(w,void 0,y,x,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,S);for(let w=0;w<h.length;w++)S[w]=d(h[w],w,y,x,_);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,S),m(S,h,y,x,_),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return x.set(h,S),m(S,h,y,x,_),S}if(typeof Blob<"u"&&h instanceof Blob){const S=new Blob([h],{type:h.type});return x.set(h,S),m(S,h,y,x,_),S}if(h instanceof Error){const S=new h.constructor;return x.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,m(S,h,y,x,_),S}if(h instanceof Boolean){const S=new Boolean(h.valueOf());return x.set(h,S),m(S,h,y,x,_),S}if(h instanceof Number){const S=new Number(h.valueOf());return x.set(h,S),m(S,h,y,x,_),S}if(h instanceof String){const S=new String(h.valueOf());return x.set(h,S),m(S,h,y,x,_),S}if(typeof h=="object"&&p(h)){const S=Object.create(Object.getPrototypeOf(h));return x.set(h,S),m(S,h,y,x,_),S}return h}function m(h,v,y=h,x,_){const j=[...Object.keys(v),...t.getSymbols(v)];for(let S=0;S<j.length;S++){const w=j[S],A=Object.getOwnPropertyDescriptor(h,w);(A==null||A.writable)&&(h[w]=d(v[w],w,y,x,_))}}function p(h){switch(n.getTag(h)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=m})(og)),og}var cS;function Y5(){return cS||(cS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G2();function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(lg)),lg}var uS;function K5(){return uS||(uS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U2(),n=Y5();function a(l){return l=n.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=a})(tg)),tg}var mg={},pg={},hg={},dS;function X5(){return dS||(dS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G2(),n=Uy(),a=F2();function l(o,u){return t.cloneDeepWith(o,(d,m,p,h)=>{const v=u?.(d,m,p,h);if(v!==void 0)return v;if(typeof o=="object"){if(n.getTag(o)===a.objectTag&&typeof o.constructor!="function"){const y={};return h.set(o,y),t.copyProperties(y,o,p,h),y}switch(Object.prototype.toString.call(o)){case a.numberTag:case a.stringTag:case a.booleanTag:{const y=new o.constructor(o?.valueOf());return t.copyProperties(y,o),y}case a.argumentsTag:{const y={};return t.copyProperties(y,o),y.length=o.length,y[Symbol.iterator]=o[Symbol.iterator],y}default:return}}})}e.cloneDeepWith=l})(hg)),hg}var fS;function W5(){return fS||(fS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X5();function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(pg)),pg}var vg={},gg={},mS;function H2(){return mS||(mS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(gg)),gg}var xg={},pS;function Z5(){return pS||(pS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uy();function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(xg)),xg}var hS;function J5(){return hS||(hS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M2(),n=H2(),a=Z5(),l=Ry();function o(u,d){let m;if(Array.isArray(d)?m=d:typeof d=="string"&&t.isDeepKey(d)&&u?.[d]==null?m=l.toPath(d):m=[d],m.length===0)return!1;let p=u;for(let h=0;h<m.length;h++){const v=m[h];if((p==null||!Object.hasOwn(p,v))&&!((Array.isArray(p)||a.isArguments(p))&&n.isIndex(v)&&v<p.length))return!1;p=p[v]}return!0}e.has=o})(vg)),vg}var vS;function eI(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U2(),n=qy(),a=W5(),l=Iy(),o=J5();function u(d,m){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return m=a.cloneDeep(m),function(p){const h=l.get(p,d);return h===void 0?o.has(p,d):m===void 0?h===void 0:t.isMatch(h,m)}}e.matchesProperty=u})(mg)),mg}var gS;function tI(){return gS||(gS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I2(),n=G5(),a=K5(),l=eI();function o(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):a.matches(u);case"string":case"symbol":case"number":return n.property(u)}}e.iteratee=o})(Jv)),Jv}var xS;function rI(){return xS||(xS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5(),n=$5(),a=I2(),l=F5(),o=tI();function u(d,m=a.identity){return l.isArrayLikeObject(d)?t.uniqBy(Array.from(d),n.ary(o.iteratee(m),1)):[]}e.uniqBy=u})(Hv)),Hv}var yg,yS;function nI(){return yS||(yS=1,yg=rI().uniqBy),yg}var aI=nI();const bS=Ka(aI);function iI(e,t,n){return t===!0?bS(e,n):typeof t=="function"?bS(e,t):e}var bg={exports:{}},jg={},Ng={exports:{}},_g={};var jS;function sI(){if(jS)return _g;jS=1;var e=cm();function t(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function d(v,y){var x=y(),_=a({inst:{value:x,getSnapshot:y}}),j=_[0].inst,S=_[1];return o(function(){j.value=x,j.getSnapshot=y,m(j)&&S({inst:j})},[v,x,y]),l(function(){return m(j)&&S({inst:j}),v(function(){m(j)&&S({inst:j})})},[v]),u(x),x}function m(v){var y=v.getSnapshot;v=v.value;try{var x=y();return!n(v,x)}catch{return!0}}function p(v,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return _g.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,_g}var NS;function lI(){return NS||(NS=1,Ng.exports=sI()),Ng.exports}var _S;function oI(){if(_S)return jg;_S=1;var e=cm(),t=lI();function n(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var a=typeof Object.is=="function"?Object.is:n,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,d=e.useMemo,m=e.useDebugValue;return jg.useSyncExternalStoreWithSelector=function(p,h,v,y,x){var _=o(null);if(_.current===null){var j={hasValue:!1,value:null};_.current=j}else j=_.current;_=d(function(){function w(D){if(!A){if(A=!0,C=D,D=y(D),x!==void 0&&j.hasValue){var T=j.value;if(x(T,D))return E=T}return E=D}if(T=E,a(C,D))return T;var k=y(D);return x!==void 0&&x(T,k)?(C=D,T):(C=D,E=k)}var A=!1,C,E,O=v===void 0?null:v;return[function(){return w(h())},O===null?void 0:function(){return w(O())}]},[h,v,y,x]);var S=l(p,_[0],_[1]);return u(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},jg}var SS;function cI(){return SS||(SS=1,bg.exports=oI()),bg.exports}var uI=cI(),Fy=g.createContext(null),dI=e=>e,Ft=()=>{var e=g.useContext(Fy);return e?e.store.dispatch:dI},Jd=()=>{},fI=()=>Jd,mI=(e,t)=>e===t;function ke(e){var t=g.useContext(Fy),n=g.useMemo(()=>t?a=>{if(a!=null)return e(a)}:Jd,[t,e]);return uI.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:fI,t?t.store.getState:Jd,t?t.store.getState:Jd,n,mI)}function pI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function hI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var wS=e=>Array.isArray(e)?e:[e];function gI(e){const t=Array.isArray(e[0])?e[0]:e;return vI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function xI(e,t){const n=[],{length:a}=e;for(let l=0;l<a;l++)n.push(e[l].apply(null,t));return n}var yI=class{constructor(e){this.value=e}deref(){return this.value}},bI=typeof WeakRef<"u"?WeakRef:yI,jI=0,CS=1;function Od(){return{s:jI,v:void 0,o:null,p:null}}function Q2(e,t={}){let n=Od();const{resultEqualityCheck:a}=t;let l,o=0;function u(){let d=n;const{length:m}=arguments;for(let v=0,y=m;v<y;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let _=d.o;_===null&&(d.o=_=new WeakMap);const j=_.get(x);j===void 0?(d=Od(),_.set(x,d)):d=j}else{let _=d.p;_===null&&(d.p=_=new Map);const j=_.get(x);j===void 0?(d=Od(),_.set(x,d)):d=j}}const p=d;let h;if(d.s===CS)h=d.v;else if(h=e.apply(null,arguments),o++,a){const v=l?.deref?.()??l;v!=null&&a(v,h)&&(h=v,o!==0&&o--),l=typeof h=="object"&&h!==null||typeof h=="function"?new bI(h):h}return p.s=CS,p.v=h,h}return u.clearCache=()=>{n=Od(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function NI(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let o=0,u=0,d,m={},p=l.pop();typeof p=="object"&&(m=p,p=l.pop()),pI(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const h={...n,...m},{memoize:v,memoizeOptions:y=[],argsMemoize:x=Q2,argsMemoizeOptions:_=[]}=h,j=wS(y),S=wS(_),w=gI(l),A=v(function(){return o++,p.apply(null,arguments)},...j),C=x(function(){u++;const O=xI(w,arguments);return d=A.apply(null,O),d},...S);return Object.assign(C,{resultFunc:p,memoizedResultFunc:A,dependencies:w,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:x})};return Object.assign(a,{withTypes:()=>a}),a}var oe=NI(Q2),_I=Object.assign((e,t=oe)=>{hI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return t(a,(...o)=>o.reduce((u,d,m)=>(u[n[m]]=d,u),{}))},{withTypes:()=>_I}),Sg={},wg={},Cg={},ES;function SI(){return ES||(ES=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,l,o)=>{if(a!==l){const u=t(a),d=t(l);if(u===d&&u===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?d-u:u-d}return 0};e.compareValues=n})(Cg)),Cg}var Eg={},Ag={},AS;function V2(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Ag)),Ag}var zS;function wI(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})(Eg)),Eg}var OS;function CI(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SI(),n=wI(),a=Ry();function l(o,u,d,m){if(o==null)return[];d=m?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(x=>String(x));const p=(x,_)=>{let j=x;for(let S=0;S<_.length&&j!=null;++S)j=j[_[S]];return j},h=(x,_)=>_==null||x==null?_:typeof x=="object"&&"key"in x?Object.hasOwn(_,x.key)?_[x.key]:p(_,x.path):typeof x=="function"?x(_):Array.isArray(x)?p(_,x):typeof _=="object"?_[x]:_,v=u.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:a.toPath(x)}));return o.map(x=>({original:x,criteria:v.map(_=>h(_,x))})).slice().sort((x,_)=>{for(let j=0;j<v.length;j++){const S=t.compareValues(x.criteria[j],_.criteria[j],d[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=l})(wg)),wg}var zg={},DS;function EI(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const l=[],o=Math.floor(a),u=(d,m)=>{for(let p=0;p<d.length;p++){const h=d[p];Array.isArray(h)&&m<o?u(h,m+1):l.push(h)}};return u(n,0),l}e.flatten=t})(zg)),zg}var Og={},MS;function Y2(){return MS||(MS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H2(),n=By(),a=L2(),l=B2();function o(u,d,m){return a.isObject(m)&&(typeof d=="number"&&n.isArrayLike(m)&&t.isIndex(d)&&d<m.length||typeof d=="string"&&d in m)?l.isEqualsSameValueZero(m[d],u):!1}e.isIterateeCall=o})(Og)),Og}var PS;function AI(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CI(),n=EI(),a=Y2();function l(o,...u){const d=u.length;return d>1&&a.isIterateeCall(o,u[0],u[1])?u=[]:d>2&&a.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(o,n.flatten(u),["asc"])}e.sortBy=l})(Sg)),Sg}var Dg,kS;function zI(){return kS||(kS=1,Dg=AI().sortBy),Dg}var OI=zI();const vm=Ka(OI);var K2=e=>e.legend.settings,DI=e=>e.legend.size,MI=e=>e.legend.payload;oe([MI,K2],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?vm(a,n):a});var Dd=1;function PI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=g.useState({height:0,left:0,top:0,width:0}),a=g.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-t.height)>Dd||Math.abs(u.left-t.left)>Dd||Math.abs(u.top-t.top)>Dd||Math.abs(u.width-t.width)>Dd)&&n({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function xr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kI=typeof Symbol=="function"&&Symbol.observable||"@@observable",TS=kI,Mg=()=>Math.random().toString(36).substring(7).split("").join("."),TI={INIT:`@@redux/INIT${Mg()}`,REPLACE:`@@redux/REPLACE${Mg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Mg()}`},vf=TI;function Gy(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function X2(e,t,n){if(typeof e!="function")throw new Error(xr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xr(1));return n(X2)(e,t)}let a=e,l=t,o=new Map,u=o,d=0,m=!1;function p(){u===o&&(u=new Map,o.forEach((S,w)=>{u.set(w,S)}))}function h(){if(m)throw new Error(xr(3));return l}function v(S){if(typeof S!="function")throw new Error(xr(4));if(m)throw new Error(xr(5));let w=!0;p();const A=d++;return u.set(A,S),function(){if(w){if(m)throw new Error(xr(6));w=!1,p(),u.delete(A),o=null}}}function y(S){if(!Gy(S))throw new Error(xr(7));if(typeof S.type>"u")throw new Error(xr(8));if(typeof S.type!="string")throw new Error(xr(17));if(m)throw new Error(xr(9));try{m=!0,l=a(l,S)}finally{m=!1}return(o=u).forEach(A=>{A()}),S}function x(S){if(typeof S!="function")throw new Error(xr(10));a=S,y({type:vf.REPLACE})}function _(){const S=v;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(xr(11));function A(){const E=w;E.next&&E.next(h())}return A(),{unsubscribe:S(A)}},[TS](){return this}}}return y({type:vf.INIT}),{dispatch:y,subscribe:v,getState:h,replaceReducer:x,[TS]:_}}function qI(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:vf.INIT})>"u")throw new Error(xr(12));if(typeof n(void 0,{type:vf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xr(13))})}function W2(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(n[u]=e[u])}const a=Object.keys(n);let l;try{qI(n)}catch(o){l=o}return function(u={},d){if(l)throw l;let m=!1;const p={};for(let h=0;h<a.length;h++){const v=a[h],y=n[v],x=u[v],_=y(x,d);if(typeof _>"u")throw d&&d.type,new Error(xr(14));p[v]=_,m=m||_!==x}return m=m||a.length!==Object.keys(u).length,m?p:u}}function gf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function RI(...e){return t=>(n,a)=>{const l=t(n,a);let o=()=>{throw new Error(xr(15))};const u={getState:l.getState,dispatch:(m,...p)=>o(m,...p)},d=e.map(m=>m(u));return o=gf(...d)(l.dispatch),{...l,dispatch:o}}}function Z2(e){return Gy(e)&&"type"in e&&typeof e.type=="string"}var J2=Symbol.for("immer-nothing"),qS=Symbol.for("immer-draftable"),Pr=Symbol.for("immer-state");function In(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sn=Object,Jl=sn.getPrototypeOf,xf="constructor",gm="prototype",zx="configurable",yf="enumerable",ef="writable",Dc="value",Ua=e=>!!e&&!!e[Pr];function Gn(e){return e?ez(e)||ym(e)||!!e[qS]||!!e[xf]?.[qS]||bm(e)||jm(e):!1}var II=sn[gm][xf].toString(),RS=new WeakMap;function ez(e){if(!e||!Hy(e))return!1;const t=Jl(e);if(t===null||t===sn[gm])return!0;const n=sn.hasOwnProperty.call(t,xf)&&t[xf];if(n===Object)return!0;if(!Fl(n))return!1;let a=RS.get(n);return a===void 0&&(a=Function.toString.call(n),RS.set(n,a)),a===II}function xm(e,t,n=!0){Xc(e)===0?(n?Reflect.ownKeys(e):sn.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function Xc(e){const t=e[Pr];return t?t.type_:ym(e)?1:bm(e)?2:jm(e)?3:0}var IS=(e,t,n=Xc(e))=>n===2?e.has(t):sn[gm].hasOwnProperty.call(e,t),Ox=(e,t,n=Xc(e))=>n===2?e.get(t):e[t],bf=(e,t,n,a=Xc(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function LI(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ym=Array.isArray,bm=e=>e instanceof Map,jm=e=>e instanceof Set,Hy=e=>typeof e=="object",Fl=e=>typeof e=="function",Pg=e=>typeof e=="boolean";function $I(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ma=e=>e.copy_||e.base_,Qy=e=>e.modified_?e.copy_:e.base_;function Dx(e,t){if(bm(e))return new Map(e);if(jm(e))return new Set(e);if(ym(e))return Array[gm].slice.call(e);const n=ez(e);if(t===!0||t==="class_only"&&!n){const a=sn.getOwnPropertyDescriptors(e);delete a[Pr];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d[ef]===!1&&(d[ef]=!0,d[zx]=!0),(d.get||d.set)&&(a[u]={[zx]:!0,[ef]:!0,[yf]:d[yf],[Dc]:e[u]})}return sn.create(Jl(e),a)}else{const a=Jl(e);if(a!==null&&n)return{...e};const l=sn.create(a);return sn.assign(l,e)}}function Vy(e,t=!1){return Nm(e)||Ua(e)||!Gn(e)||(Xc(e)>1&&sn.defineProperties(e,{set:Md,add:Md,clear:Md,delete:Md}),sn.freeze(e),t&&xm(e,(n,a)=>{Vy(a,!0)},!1)),e}function BI(){In(2)}var Md={[Dc]:BI};function Nm(e){return e===null||!Hy(e)?!0:sn.isFrozen(e)}var jf="MapSet",Mx="Patches",LS="ArrayMethods",tz={};function Ms(e){const t=tz[e];return t||In(0,e),t}var $S=e=>!!tz[e],Mc,rz=()=>Mc,UI=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:$S(jf)?Ms(jf):void 0,arrayMethodsPlugin_:$S(LS)?Ms(LS):void 0});function BS(e,t){t&&(e.patchPlugin_=Ms(Mx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Px(e){kx(e),e.drafts_.forEach(FI),e.drafts_=null}function kx(e){e===Mc&&(Mc=e.parent_)}var US=e=>Mc=UI(Mc,e);function FI(e){const t=e[Pr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function FS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Pr].modified_&&(Px(t),In(4)),Gn(e)&&(e=GS(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(n[Pr].base_,e,t)}else e=GS(t,n);return GI(t,e,!0),Px(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==J2?e:void 0}function GS(e,t){if(Nm(t))return t;const n=t[Pr];if(!n)return Nf(t,e.handledSet_,e);if(!_m(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);iz(n,e)}return n.copy_}function GI(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Vy(t,n)}function nz(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var _m=(e,t)=>e.scope_===t,HI=[];function az(e,t,n,a){const l=Ma(e),o=e.type_;if(a!==void 0&&Ox(l,a,o)===t){bf(l,a,n,o);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;xm(l,(m,p)=>{if(Ua(p)){const h=d.get(p)||[];h.push(m),d.set(p,h)}})}const u=e.draftLocations_.get(t)??HI;for(const d of u)bf(l,d,n,o)}function QI(e,t,n){e.callbacks_.push(function(l){const o=t;if(!o||!_m(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=Qy(o);az(e,o.draft_??o,u,n),iz(o,l)})}function iz(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}nz(e)}}function VI(e,t,n){const{scope_:a}=e;if(Ua(n)){const l=n[Pr];_m(l,a)&&l.callbacks_.push(function(){tf(e);const u=Qy(l);az(e,n,u,t)})}else Gn(n)&&e.callbacks_.push(function(){const o=Ma(e);e.type_===3?o.has(n)&&Nf(n,a.handledSet_,a):Ox(o,t,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Nf(Ox(e.copy_,t,e.type_),a.handledSet_,a)})}function Nf(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ua(e)||t.has(e)||!Gn(e)||Nm(e)||(t.add(e),xm(e,(a,l)=>{if(Ua(l)){const o=l[Pr];if(_m(o,n)){const u=Qy(o);bf(e,a,u,e.type_),nz(o)}}else Gn(l)&&Nf(l,t,n)})),e}function YI(e,t){const n=ym(e),a={type_:n?1:0,scope_:t?t.scope_:rz(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=_f;n&&(l=[a],o=Pc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,[d,a]}var _f={get(e,t){if(t===Pr)return e;let n=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const l=Ma(e);if(!IS(l,t,e.type_))return KI(e,l,t);const o=l[t];if(e.finalized_||!Gn(o)||a&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&$I(t))return o;if(o===kg(e.base_,t)){tf(e);const u=e.type_===1?+t:t,d=qx(e.scope_,o,e,u);return e.copy_[u]=d}return o},has(e,t){return t in Ma(e)},ownKeys(e){return Reflect.ownKeys(Ma(e))},set(e,t,n){const a=sz(Ma(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=kg(Ma(e),t),o=l?.[Pr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(LI(n,l)&&(n!==void 0||IS(e.base_,t,e.type_)))return!0;tf(e),Tx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),VI(e,t,n)),!0},deleteProperty(e,t){return tf(e),kg(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Tx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ma(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[ef]:!0,[zx]:e.type_!==1||t!=="length",[yf]:a[yf],[Dc]:n[t]}},defineProperty(){In(11)},getPrototypeOf(e){return Jl(e.base_)},setPrototypeOf(){In(12)}},Pc={};for(let e in _f){let t=_f[e];Pc[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Pc.deleteProperty=function(e,t){return Pc.set.call(this,e,t,void 0)};Pc.set=function(e,t,n){return _f.set.call(this,e[0],t,n,e[0])};function kg(e,t){const n=e[Pr];return(n?Ma(n):e)[t]}function KI(e,t,n){const a=sz(t,n);return a?Dc in a?a[Dc]:a.get?.call(e.draft_):void 0}function sz(e,t){if(!(t in e))return;let n=Jl(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Jl(n)}}function Tx(e){e.modified_||(e.modified_=!0,e.parent_&&Tx(e.parent_))}function tf(e){e.copy_||(e.assigned_=new Map,e.copy_=Dx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var XI=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,l)=>{if(Fl(n)&&!Fl(a)){const u=a;a=n;const d=this;return function(p=u,...h){return d.produce(p,v=>a.call(this,v,...h))}}Fl(a)||In(6),l!==void 0&&!Fl(l)&&In(7);let o;if(Gn(n)){const u=US(this),d=qx(u,n,void 0);let m=!0;try{o=a(d),m=!1}finally{m?Px(u):kx(u)}return BS(u,l),FS(o,u)}else if(!n||!Hy(n)){if(o=a(n),o===void 0&&(o=n),o===J2&&(o=void 0),this.autoFreeze_&&Vy(o,!0),l){const u=[],d=[];Ms(Mx).generateReplacementPatches_(n,o,{patches_:u,inversePatches_:d}),l(u,d)}return o}else In(1,n)},this.produceWithPatches=(n,a)=>{if(Fl(n))return(d,...m)=>this.produceWithPatches(d,p=>n(p,...m));let l,o;return[this.produce(n,a,(d,m)=>{l=d,o=m}),l,o]},Pg(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Pg(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Pg(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Gn(t)||In(8),Ua(t)&&(t=Bn(t));const n=US(this),a=qx(n,t,void 0);return a[Pr].isManual_=!0,kx(n),a}finishDraft(t,n){const a=t&&t[Pr];(!a||!a.isManual_)&&In(9);const{scope_:l}=a;return BS(l,n),FS(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const o=n[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(n=n.slice(a+1));const l=Ms(Mx).applyPatches_;return Ua(t)?l(t,n):this.produce(t,o=>l(o,n))}};function qx(e,t,n,a){const[l,o]=bm(t)?Ms(jf).proxyMap_(t,n):jm(t)?Ms(jf).proxySet_(t,n):YI(t,n);return(n?.scope_??rz()).drafts_.push(l),o.callbacks_=n?.callbacks_??[],o.key_=a,n&&a!==void 0?QI(n,o,a):o.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:p}=m;o.modified_&&p&&p.generatePatches_(o,[],m)}),l}function Bn(e){return Ua(e)||In(10,e),lz(e)}function lz(e){if(!Gn(e)||Nm(e))return e;const t=e[Pr];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Dx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Dx(e,!0);return xm(n,(l,o)=>{bf(n,l,lz(o))},a),t&&(t.finalized_=!1),n}var WI=new XI,oz=WI.produce;function cz(e){return({dispatch:n,getState:a})=>l=>o=>typeof o=="function"?o(n,a,e):l(o)}var ZI=cz(),JI=cz,e6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gf:gf.apply(null,arguments)};function zn(e,t){function n(...a){if(t){let l=t(...a);if(!l)throw new Error(on(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>Z2(a)&&a.type===e,n}var uz=class jc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,jc.prototype)}static get[Symbol.species](){return jc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new jc(...t[0].concat(this)):new jc(...t.concat(this))}};function HS(e){return Gn(e)?oz(e,()=>{}):e}function Pd(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function t6(e){return typeof e=="boolean"}var r6=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let u=new uz;return n&&(t6(n)?u.push(ZI):u.push(JI(n.extraArgument))),u},dz="RTK_autoBatch",zt=()=>e=>({payload:e,meta:{[dz]:!0}}),QS=e=>t=>{setTimeout(t,e)},fz=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let l=!0,o=!1,u=!1;const d=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:QS(10):e.type==="callback"?e.queueNotification:QS(e.timeout),p=()=>{u=!1,o&&(o=!1,d.forEach(h=>h()))};return Object.assign({},a,{subscribe(h){const v=()=>l&&h(),y=a.subscribe(v);return d.add(h),()=>{y(),d.delete(h)}},dispatch(h){try{return l=!h?.meta?.[dz],o=!l,o&&(u||(u=!0,m(p))),a.dispatch(h)}finally{l=!0}}})},n6=e=>function(n){const{autoBatch:a=!0}=n??{};let l=new uz(e);return a&&l.push(fz(typeof a=="object"?a:void 0)),l};function a6(e){const t=r6(),{reducer:n=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(Gy(n))d=W2(n);else throw new Error(on(1));let m;typeof a=="function"?m=a(t):m=t();let p=gf;l&&(p=e6({trace:!1,...typeof l=="object"&&l}));const h=RI(...m),v=n6(h);let y=typeof u=="function"?u(v):v();const x=p(...y);return X2(d,o,x)}function mz(e){const t={},n=[];let a;const l={addCase(o,u){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(on(28));if(d in t)throw new Error(on(29));return t[d]=u,l},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&n.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return n.push({matcher:o,reducer:u}),l},addDefaultCase(o){return a=o,l}};return e(l),[t,n,a]}function i6(e){return typeof e=="function"}function s6(e,t){let[n,a,l]=mz(t),o;if(i6(e))o=()=>HS(e());else{const d=HS(e);o=()=>d}function u(d=o(),m){let p=[n[m.type],...a.filter(({matcher:h})=>h(m)).map(({reducer:h})=>h)];return p.filter(h=>!!h).length===0&&(p=[l]),p.reduce((h,v)=>{if(v)if(Ua(h)){const x=v(h,m);return x===void 0?h:x}else{if(Gn(h))return oz(h,y=>v(y,m));{const y=v(h,m);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},d)}return u.getInitialState=o,u}var l6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",o6=(e=21)=>{let t="",n=e;for(;n--;)t+=l6[Math.random()*64|0];return t},c6=Symbol.for("rtk-slice-createasyncthunk");function u6(e,t){return`${e}/${t}`}function d6({creators:e}={}){const t=e?.asyncThunk?.[c6];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(on(11));const u=(typeof a.reducers=="function"?a.reducers(m6()):a.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(C,E){const O=typeof C=="string"?C:C.type;if(!O)throw new Error(on(12));if(O in m.sliceCaseReducersByType)throw new Error(on(13));return m.sliceCaseReducersByType[O]=E,p},addMatcher(C,E){return m.sliceMatchers.push({matcher:C,reducer:E}),p},exposeAction(C,E){return m.actionCreators[C]=E,p},exposeCaseReducer(C,E){return m.sliceCaseReducersByName[C]=E,p}};d.forEach(C=>{const E=u[C],O={reducerName:C,type:u6(l,C),createNotation:typeof a.reducers=="function"};h6(E)?g6(O,E,p,t):p6(O,E,p)});function h(){const[C={},E=[],O=void 0]=typeof a.extraReducers=="function"?mz(a.extraReducers):[a.extraReducers],D={...C,...m.sliceCaseReducersByType};return s6(a.initialState,T=>{for(let k in D)T.addCase(k,D[k]);for(let k of m.sliceMatchers)T.addMatcher(k.matcher,k.reducer);for(let k of E)T.addMatcher(k.matcher,k.reducer);O&&T.addDefaultCase(O)})}const v=C=>C,y=new Map,x=new WeakMap;let _;function j(C,E){return _||(_=h()),_(C,E)}function S(){return _||(_=h()),_.getInitialState()}function w(C,E=!1){function O(T){let k=T[C];return typeof k>"u"&&E&&(k=Pd(x,O,S)),k}function D(T=v){const k=Pd(y,E,()=>new WeakMap);return Pd(k,T,()=>{const R={};for(const[L,Q]of Object.entries(a.selectors??{}))R[L]=f6(Q,T,()=>Pd(x,T,S),E);return R})}return{reducerPath:C,getSelectors:D,get selectors(){return D(O)},selectSlice:O}}const A={name:l,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...w(o),injectInto(C,{reducerPath:E,...O}={}){const D=E??o;return C.inject({reducerPath:D,reducer:j},O),{...A,...w(D,!0)}}};return A}}function f6(e,t,n,a){function l(o,...u){let d=t(o);return typeof d>"u"&&a&&(d=n()),e(d,...u)}return l.unwrapped=e,l}var Kr=d6();function m6(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function p6({type:e,reducerName:t,createNotation:n},a,l){let o,u;if("reducer"in a){if(n&&!v6(a))throw new Error(on(17));o=a.reducer,u=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?zn(e,u):zn(e))}function h6(e){return e._reducerDefinitionType==="asyncThunk"}function v6(e){return e._reducerDefinitionType==="reducerWithPrepare"}function g6({type:e,reducerName:t},n,a,l){if(!l)throw new Error(on(18));const{payloadCreator:o,fulfilled:u,pending:d,rejected:m,settled:p,options:h}=n,v=l(e,o,h);a.exposeAction(t,v),u&&a.addCase(v.fulfilled,u),d&&a.addCase(v.pending,d),m&&a.addCase(v.rejected,m),p&&a.addMatcher(v.settled,p),a.exposeCaseReducer(t,{fulfilled:u||kd,pending:d||kd,rejected:m||kd,settled:p||kd})}function kd(){}var x6="task",pz="listener",hz="completed",Yy="cancelled",y6=`task-${Yy}`,b6=`task-${hz}`,Rx=`${pz}-${Yy}`,j6=`${pz}-${hz}`,Sm=class{constructor(e){this.code=e,this.message=`${x6} ${Yy} (reason: ${e})`}name="TaskAbortError";message},Ky=(e,t)=>{if(typeof e!="function")throw new TypeError(on(32))},Sf=()=>{},vz=(e,t=Sf)=>(e.catch(t),e),gz=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Es=e=>{if(e.aborted)throw new Sm(e.reason)};function xz(e,t){let n=Sf;return new Promise((a,l)=>{const o=()=>l(new Sm(e.reason));if(e.aborted){o();return}n=gz(e,o),t.finally(()=>n()).then(a,l)}).finally(()=>{n=Sf})}var N6=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Sm?"cancelled":"rejected",error:n}}finally{t?.()}},wf=e=>t=>vz(xz(e,t).then(n=>(Es(e),n))),yz=e=>{const t=wf(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:Yl}=Object,VS={},wm="listenerMiddleware",_6=(e,t)=>{const n=a=>gz(e,()=>a.abort(e.reason));return(a,l)=>{Ky(a);const o=new AbortController;n(o);const u=N6(async()=>{Es(e),Es(o.signal);const d=await a({pause:wf(o.signal),delay:yz(o.signal),signal:o.signal});return Es(o.signal),d},()=>o.abort(b6));return l?.autoJoin&&t.push(u.catch(Sf)),{result:wf(e)(u),cancel(){o.abort(y6)}}}},S6=(e,t)=>{const n=async(a,l)=>{Es(t);let o=()=>{};const d=[new Promise((m,p)=>{let h=e({predicate:a,effect:(v,y)=>{y.unsubscribe(),m([v,y.getState(),y.getOriginalState()])}});o=()=>{h(),p()}})];l!=null&&d.push(new Promise(m=>setTimeout(m,l,null)));try{const m=await xz(t,Promise.race(d));return Es(t),m}finally{o()}};return(a,l)=>vz(n(a,l))},bz=e=>{let{type:t,actionCreator:n,matcher:a,predicate:l,effect:o}=e;if(t)l=zn(t).match;else if(n)t=n.type,l=n.match;else if(a)l=a;else if(!l)throw new Error(on(21));return Ky(o),{predicate:l,type:t,effect:o}},jz=Yl(e=>{const{type:t,predicate:n,effect:a}=bz(e);return{id:o6(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(on(22))}}},{withTypes:()=>jz}),YS=(e,t)=>{const{type:n,effect:a,predicate:l}=bz(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===l)&&o.effect===a)},Ix=e=>{e.pending.forEach(t=>{t.abort(Rx)})},w6=(e,t)=>()=>{for(const n of t.keys())Ix(n);e.clear()},KS=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},Nz=Yl(zn(`${wm}/add`),{withTypes:()=>Nz}),C6=zn(`${wm}/removeAll`),_z=Yl(zn(`${wm}/remove`),{withTypes:()=>_z}),E6=(...e)=>{console.error(`${wm}/error`,...e)},Wc=(e={})=>{const t=new Map,n=new Map,a=x=>{const _=n.get(x)??0;n.set(x,_+1)},l=x=>{const _=n.get(x)??1;_===1?n.delete(x):n.set(x,_-1)},{extra:o,onError:u=E6}=e;Ky(u);const d=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),_=>{x.unsubscribe(),_?.cancelActive&&Ix(x)}),m=x=>{const _=YS(t,x)??jz(x);return d(_)};Yl(m,{withTypes:()=>m});const p=x=>{const _=YS(t,x);return _&&(_.unsubscribe(),x.cancelActive&&Ix(_)),!!_};Yl(p,{withTypes:()=>p});const h=async(x,_,j,S)=>{const w=new AbortController,A=S6(m,w.signal),C=[];try{x.pending.add(w),a(x),await Promise.resolve(x.effect(_,Yl({},j,{getOriginalState:S,condition:(E,O)=>A(E,O).then(Boolean),take:A,delay:yz(w.signal),pause:wf(w.signal),extra:o,signal:w.signal,fork:_6(w.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((E,O,D)=>{E!==w&&(E.abort(Rx),D.delete(E))})},cancel:()=>{w.abort(Rx),x.pending.delete(w)},throwIfCancelled:()=>{Es(w.signal)}})))}catch(E){E instanceof Sm||KS(u,E,{raisedBy:"effect"})}finally{await Promise.all(C),w.abort(j6),l(x),x.pending.delete(w)}},v=w6(t,n);return{middleware:x=>_=>j=>{if(!Z2(j))return _(j);if(Nz.match(j))return m(j.payload);if(C6.match(j)){v();return}if(_z.match(j))return p(j.payload);let S=x.getState();const w=()=>{if(S===VS)throw new Error(on(23));return S};let A;try{if(A=_(j),t.size>0){const C=x.getState(),E=Array.from(t.values());for(const O of E){let D=!1;try{D=O.predicate(j,C,S)}catch(T){D=!1,KS(u,T,{raisedBy:"predicate"})}D&&h(O,j,x,w)}}}finally{S=VS}return A},startListening:m,stopListening:p,clearListeners:v}};function on(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var A6={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Sz=Kr({name:"chartLayout",initialState:A6,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,l,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:z6,setLayout:O6,setChartSize:D6,setScale:M6}=Sz.actions,P6=Sz.reducer;function wz(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function tt(e){return Number.isFinite(e)}function ua(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function XS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(n),!0).forEach(function(a){k6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function k6(e,t,n){return(t=T6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T6(e){var t=q6(e,"string");return typeof t=="symbol"?t:t+""}function q6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xt(e,t,n){return Mt(e)||Mt(t)?n:ca(t)?Zl(e,t,n):typeof t=="function"?t(e):n}var R6=(e,t,n)=>{if(t&&n){var{width:a,height:l}=n,{align:o,verticalAlign:u,layout:d}=t;if((d==="vertical"||d==="horizontal"&&u==="middle")&&o!=="center"&&Ae(e[o]))return Hl(Hl({},e),{},{[o]:e[o]+(a||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&u!=="middle"&&Ae(e[u]))return Hl(Hl({},e),{},{[u]:e[u]+(l||0)})}return e},Wa=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Cz=(e,t,n,a)=>{if(a)return e.map(d=>d.coordinate);var l,o,u=e.map(d=>(d.coordinate===t&&(l=!0),d.coordinate===n&&(o=!0),d.coordinate));return l||u.push(t),o||u.push(n),u},Ez=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:l,range:o,scale:u,realScaleType:d,isCategorical:m,categoricalDomain:p,tickCount:h,ticks:v,niceTicks:y,axisType:x}=e;if(!u)return null;var _=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,j=l==="category"&&u.bandwidth?u.bandwidth()/_:0;if(j=x==="angleAxis"&&o&&o.length>=2?Gr(o[0]-o[1])*2*j:j,v||y){var S=(v||y||[]).map((w,A)=>{var C=a?a.indexOf(w):w,E=u.map(C);return tt(E)?{coordinate:E+j,value:w,offset:j,index:A}:null}).filter(Hr);return S}return m&&p?p.map((w,A)=>{var C=u.map(w);return tt(C)?{coordinate:C+j,value:w,index:A,offset:j}:null}).filter(Hr):u.ticks&&h!=null?u.ticks(h).map((w,A)=>{var C=u.map(w);return tt(C)?{coordinate:C+j,value:w,index:A,offset:j}:null}).filter(Hr):u.domain().map((w,A)=>{var C=u.map(w);return tt(C)?{coordinate:C+j,value:a?a[w]:w,index:A,offset:j}:null}).filter(Hr)},I6=(e,t)=>{if(!t||t.length!==2||!Ae(t[0])||!Ae(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!Ae(e[0])||e[0]<n)&&(l[0]=n),(!Ae(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<n&&(l[1]=n),l},L6=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0,d=0;d<n;++d){var m=e[d],p=m?.[l];if(p!=null){var h=p[1],v=p[0],y=oa(h)?v:h;y>=0?(p[0]=o,o+=y,p[1]=o):(p[0]=u,u+=y,p[1]=u)}}}},$6=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0;u<n;++u){var d=e[u],m=d?.[l];if(m!=null){var p=oa(m[1])?m[0]:m[1];p>=0?(m[0]=o,o+=p,m[1]=o):(m[0]=0,m[1]=0)}}}},B6={sign:L6,expand:h5,none:Os,silhouette:v5,wiggle:g5,positive:$6},U6=(e,t,n)=>{var a,l=(a=B6[n])!==null&&a!==void 0?a:Os,o=p5().keys(t).value((d,m)=>Number(Xt(d,m,0))).order(Ex).offset(l),u=o(e);return u.forEach((d,m)=>{d.forEach((p,h)=>{var v=Xt(e[h],t[m],0);Array.isArray(v)&&v.length===2&&Ae(v[0])&&Ae(v[1])&&(p[0]=v[0],p[1]=v[1])})}),u};function F6(e){return e==null?void 0:String(e)}function WS(e){var{axis:t,ticks:n,bandSize:a,entry:l,index:o,dataKey:u}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Mt(l[t.dataKey])){var d=k2(n,"value",l[t.dataKey]);if(d)return d.coordinate+a/2}return n!=null&&n[o]?n[o].coordinate+a/2:null}var m=Xt(l,Mt(u)?t.dataKey:u),p=t.scale.map(m);return Ae(p)?p:null}var ZS=e=>{var{axis:t,ticks:n,offset:a,bandSize:l,entry:o,index:u}=e;if(t.type==="category")return n[u]?n[u].coordinate+a:null;var d=Xt(o,t.dataKey,t.scale.domain()[u]);if(Mt(d))return null;var m=t.scale.map(d);return Ae(m)?m-l/2+a:null},G6=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var a=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return a<=0&&l>=0?0:l<0?l:a}return n[0]},H6=e=>{var t=e.flat(2).filter(Ae);return[Math.min(...t),Math.max(...t)]},Q6=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],V6=(e,t,n)=>{if(e!=null)return Q6(Object.keys(e).reduce((a,l)=>{var o=e[l];if(!o)return a;var{stackedData:u}=o,d=u.reduce((m,p)=>{var h=wz(p,t,n),v=H6(h);return!tt(v[0])||!tt(v[1])?m:[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]))},JS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ew=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eo=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var l=vm(t,h=>h.coordinate),o=1/0,u=1,d=l.length;u<d;u++){var m=l[u],p=l[u-1];o=Math.min((m?.coordinate||0)-(p?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function tw(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:l,name:o}=e;return Hl(Hl({},t),{},{dataKey:n,payload:a,value:l,name:o})}function Cm(e,t){if(e)return String(e);if(typeof t=="string")return t}var Y6=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},K6=(e,t)=>t==="centric"?e.angle:e.radius,Za=e=>e.layout.width,Ja=e=>e.layout.height,X6=e=>e.layout.scale,Az=e=>e.layout.margin,Em=oe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Am=oe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),W6="data-recharts-item-index",Z6="data-recharts-item-id",Zc=60;function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rw(Object(n),!0).forEach(function(a){J6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function J6(e,t,n){return(t=e4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e4(e){var t=t4(e,"string");return typeof t=="symbol"?t:t+""}function t4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r4=e=>e.brush.height;function n4(e){var t=Am(e);return t.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Zc;return n+l}return n},0)}function a4(e){var t=Am(e);return t.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Zc;return n+l}return n},0)}function i4(e){var t=Em(e);return t.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function s4(e){var t=Em(e);return t.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var cr=oe([Za,Ja,Az,r4,n4,a4,i4,s4,K2,DI],(e,t,n,a,l,o,u,d,m,p)=>{var h={left:(n.left||0)+l,right:(n.right||0)+o},v={top:(n.top||0)+u,bottom:(n.bottom||0)+d},y=Td(Td({},v),h),x=y.bottom;y.bottom+=a,y=R6(y,m,p);var _=e-y.left-y.right,j=t-y.top-y.bottom;return Td(Td({brushBottom:x},y),{},{width:Math.max(_,0),height:Math.max(j,0)})}),l4=oe(cr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Xy=oe(Za,Ja,(e,t)=>({x:0,y:0,width:e,height:t})),o4=g.createContext(null),Cr=()=>g.useContext(o4)!=null,zm=e=>e.brush,Om=oe([zm,cr,Az],(e,t,n)=>({height:e.height,x:Ae(e.x)?e.x:t.left,y:Ae(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Ae(e.width)?e.width:t.width})),Tg={},qg={},Rg={},nw;function c4(){return nw||(nw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:l,edges:o}={}){let u,d=null;const m=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),h=()=>{d!==null&&(n.apply(u,d),u=void 0,d=null)},v=()=>{p&&h(),j()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,v()},a)},_=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{_(),u=void 0,d=null},S=()=>{h()},w=function(...A){if(l?.aborted)return;u=this,d=A;const C=y==null;x(),m&&C&&h()};return w.schedule=x,w.cancel=j,w.flush=S,l?.addEventListener("abort",j,{once:!0}),w}e.debounce=t})(Rg)),Rg}var aw;function u4(){return aw||(aw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c4();function n(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:d=!0,maxWait:m}=o,p=Array(2);u&&(p[0]="leading"),d&&(p[1]="trailing");let h,v=null;const y=t.debounce(function(...j){h=a.apply(this,j),v=null},l,{edges:p}),x=function(...j){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(h=a.apply(this,j),v=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,j),h)},_=()=>(y.flush(),h);return x.cancel=y.cancel,x.flush=_,x}e.debounce=n})(qg)),qg}var iw;function d4(){return iw||(iw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u4();function n(a,l=0,o={}){const{leading:u=!0,trailing:d=!0}=o;return t.debounce(a,l,{leading:u,maxWait:l,trailing:d})}e.throttle=n})(Tg)),Tg}var Ig,sw;function f4(){return sw||(sw=1,Ig=d4().throttle),Ig}var m4=f4();const p4=Ka(m4);var Cf=function(t,n){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(n.replace(/%s/g,()=>l[u++]))}},ia={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},zz=(e,t,n)=>{var{width:a=ia.width,height:l=ia.height,aspect:o,maxHeight:u}=n,d=Ds(a)?e:Number(a),m=Ds(l)?t:Number(l);return o&&o>0&&(d?m=d/o:m&&(d=m*o),u&&m!=null&&m>u&&(m=u)),{calculatedWidth:d,calculatedHeight:m}},h4={width:0,height:0,overflow:"visible"},v4={width:0,overflowX:"visible"},g4={height:0,overflowY:"visible"},x4={},y4=e=>{var{width:t,height:n}=e,a=Ds(t),l=Ds(n);return a&&l?h4:a?v4:l?g4:x4};function b4(e){var{width:t,height:n,aspect:a}=e,l=t,o=n;return l===void 0&&o===void 0?(l=ia.width,o=ia.height):l===void 0?l=a&&a>0?void 0:ia.width:o===void 0&&(o=a&&a>0?void 0:ia.height),{width:l,height:o}}function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lx.apply(null,arguments)}function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ow(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(a){j4(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function j4(e,t,n){return(t=N4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oz=g.createContext(ia.initialDimension);function S4(e){return ua(e.width)&&ua(e.height)}function Dz(e){var{children:t,width:n,height:a}=e,l=g.useMemo(()=>({width:n,height:a}),[n,a]);return S4(l)?g.createElement(Oz.Provider,{value:l},t):null}var Wy=()=>g.useContext(Oz),w4=g.forwardRef((e,t)=>{var{aspect:n,initialDimension:a=ia.initialDimension,width:l,height:o,minWidth:u=ia.minWidth,minHeight:d,maxHeight:m,children:p,debounce:h=ia.debounce,id:v,className:y,onResize:x,style:_={}}=e,j=g.useRef(null),S=g.useRef();S.current=x,g.useImperativeHandle(t,()=>j.current);var[w,A]=g.useState({containerWidth:a.width,containerHeight:a.height}),C=g.useCallback((k,R)=>{A(L=>{var Q=Math.round(k),$=Math.round(R);return L.containerWidth===Q&&L.containerHeight===$?L:{containerWidth:Q,containerHeight:$}})},[]);g.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Bs;var k=$=>{var F,Y=$[0];if(Y!=null){var{width:M,height:q}=Y.contentRect;C(M,q),(F=S.current)===null||F===void 0||F.call(S,M,q)}};h>0&&(k=p4(k,h,{trailing:!0,leading:!1}));var R=new ResizeObserver(k),{width:L,height:Q}=j.current.getBoundingClientRect();return C(L,Q),R.observe(j.current),()=>{R.disconnect()}},[C,h]);var{containerWidth:E,containerHeight:O}=w;Cf(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:T}=zz(E,O,{width:l,height:o,aspect:n,maxHeight:m});return Cf(D!=null&&D>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,T,l,o,u,d,n),g.createElement("div",{id:v?"".concat(v):void 0,className:yt("recharts-responsive-container",y),style:ow(ow({},_),{},{width:l,height:o,minWidth:u,minHeight:d,maxHeight:m}),ref:j},g.createElement("div",{style:y4({width:l,height:o})},g.createElement(Dz,{width:D,height:T},p)))}),cw=g.forwardRef((e,t)=>{var n=Wy();if(ua(n.width)&&ua(n.height))return e.children;var{width:a,height:l}=b4({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=zz(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Ae(o)&&Ae(u)?g.createElement(Dz,{width:o,height:u},e.children):g.createElement(w4,Lx({},e,{width:a,height:l,ref:t}))});function Zy(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Dm=()=>{var e,t=Cr(),n=ke(l4),a=ke(Om),l=(e=ke(zm))===null||e===void 0?void 0:e.padding;return!t||!a||!l?n:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},C4={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Mz=()=>{var e;return(e=ke(cr))!==null&&e!==void 0?e:C4},Pz=()=>ke(Za),kz=()=>ke(Ja),ft=e=>e.layout.layoutType,Us=()=>ke(ft),Tz=()=>{var e=Us();if(e==="horizontal"||e==="vertical")return e},qz=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},E4=()=>{var e=Us();return e!==void 0},Jc=e=>{var t=Ft(),n=Cr(),{width:a,height:l}=e,o=Wy(),u=a,d=l;return o&&(u=o.width>0?o.width:a,d=o.height>0?o.height:l),g.useEffect(()=>{!n&&ua(u)&&ua(d)&&t(D6({width:u,height:d}))},[t,n,u,d]),null},Rz=Symbol.for("immer-nothing"),uw=Symbol.for("immer-draftable"),un=Symbol.for("immer-state");function Ln(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var kc=Object.getPrototypeOf;function to(e){return!!e&&!!e[un]}function Ps(e){return e?Iz(e)||Array.isArray(e)||!!e[uw]||!!e.constructor?.[uw]||eu(e)||Pm(e):!1}var A4=Object.prototype.constructor.toString(),dw=new WeakMap;function Iz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=dw.get(n);return a===void 0&&(a=Function.toString.call(n),dw.set(n,a)),a===A4}function Ef(e,t,n=!0){Mm(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function Mm(e){const t=e[un];return t?t.type_:Array.isArray(e)?1:eu(e)?2:Pm(e)?3:0}function $x(e,t){return Mm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Lz(e,t,n){const a=Mm(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function z4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function eu(e){return e instanceof Map}function Pm(e){return e instanceof Set}function xs(e){return e.copy_||e.base_}function Bx(e,t){if(eu(e))return new Map(e);if(Pm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Iz(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[un];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(a[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(kc(e),a)}else{const a=kc(e);if(a!==null&&n)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function Jy(e,t=!1){return km(e)||to(e)||!Ps(e)||(Mm(e)>1&&Object.defineProperties(e,{set:qd,add:qd,clear:qd,delete:qd}),Object.freeze(e),t&&Object.values(e).forEach(n=>Jy(n,!0))),e}function O4(){Ln(2)}var qd={value:O4};function km(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var D4={};function ks(e){const t=D4[e];return t||Ln(0,e),t}var Tc;function $z(){return Tc}function M4(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fw(e,t){t&&(ks("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ux(e){Fx(e),e.drafts_.forEach(P4),e.drafts_=null}function Fx(e){e===Tc&&(Tc=e.parent_)}function mw(e){return Tc=M4(Tc,e)}function P4(e){const t=e[un];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function pw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[un].modified_&&(Ux(t),Ln(4)),Ps(e)&&(e=Af(t,e),t.parent_||zf(t,e)),t.patches_&&ks("Patches").generateReplacementPatches_(n[un].base_,e,t.patches_,t.inversePatches_)):e=Af(t,n,[]),Ux(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Rz?e:void 0}function Af(e,t,n){if(km(t))return t;const a=e.immer_.shouldUseStrictIteration(),l=t[un];if(!l)return Ef(t,(o,u)=>hw(e,l,t,o,u,n),a),t;if(l.scope_!==e)return t;if(!l.modified_)return zf(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,d=!1;l.type_===3&&(u=new Set(o),o.clear(),d=!0),Ef(u,(m,p)=>hw(e,l,o,m,p,n,d),a),zf(e,o,!1),n&&e.patches_&&ks("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function hw(e,t,n,a,l,o,u){if(l==null||typeof l!="object"&&!u)return;const d=km(l);if(!(d&&!u)){if(to(l)){const m=o&&t&&t.type_!==3&&!$x(t.assigned_,a)?o.concat(a):void 0,p=Af(e,l,m);if(Lz(n,a,p),to(p))e.canAutoFreeze_=!1;else return}else u&&n.add(l);if(Ps(l)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===l&&d)return;Af(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(eu(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&zf(e,l)}}}function zf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Jy(t,n)}function k4(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:$z(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=eb;n&&(l=[a],o=qc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,d}var eb={get(e,t){if(t===un)return e;const n=xs(e);if(!$x(n,t))return T4(e,n,t);const a=n[t];return e.finalized_||!Ps(a)?a:a===Lg(e.base_,t)?($g(e),e.copy_[t]=Hx(a,e)):a},has(e,t){return t in xs(e)},ownKeys(e){return Reflect.ownKeys(xs(e))},set(e,t,n){const a=Bz(xs(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Lg(xs(e),t),o=l?.[un];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(z4(n,l)&&(n!==void 0||$x(e.base_,t)))return!0;$g(e),Gx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Lg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,$g(e),Gx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=xs(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){Ln(11)},getPrototypeOf(e){return kc(e.base_)},setPrototypeOf(){Ln(12)}},qc={};Ef(eb,(e,t)=>{qc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});qc.deleteProperty=function(e,t){return qc.set.call(this,e,t,void 0)};qc.set=function(e,t,n){return eb.set.call(this,e[0],t,n,e[0])};function Lg(e,t){const n=e[un];return(n?xs(n):e)[t]}function T4(e,t,n){const a=Bz(t,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function Bz(e,t){if(!(t in e))return;let n=kc(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=kc(n)}}function Gx(e){e.modified_||(e.modified_=!0,e.parent_&&Gx(e.parent_))}function $g(e){e.copy_||(e.copy_=Bx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var q4=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const u=this;return function(m=o,...p){return u.produce(m,h=>n.call(this,h,...p))}}typeof n!="function"&&Ln(6),a!==void 0&&typeof a!="function"&&Ln(7);let l;if(Ps(t)){const o=mw(this),u=Hx(t,void 0);let d=!0;try{l=n(u),d=!1}finally{d?Ux(o):Fx(o)}return fw(o,a),pw(l,o)}else if(!t||typeof t!="object"){if(l=n(t),l===void 0&&(l=t),l===Rz&&(l=void 0),this.autoFreeze_&&Jy(l,!0),a){const o=[],u=[];ks("Patches").generateReplacementPatches_(t,l,o,u),a(o,u)}return l}else Ln(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(u,...d)=>this.produceWithPatches(u,m=>t(m,...d));let a,l;return[this.produce(t,n,(u,d)=>{a=u,l=d}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ps(e)||Ln(8),to(e)&&(e=R4(e));const t=mw(this),n=Hx(e,void 0);return n[un].isManual_=!0,Fx(t),n}finishDraft(e,t){const n=e&&e[un];(!n||!n.isManual_)&&Ln(9);const{scope_:a}=n;return fw(a,t),pw(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const l=t[n];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}n>-1&&(t=t.slice(n+1));const a=ks("Patches").applyPatches_;return to(e)?a(e,t):this.produce(e,l=>a(l,t))}};function Hx(e,t){const n=eu(e)?ks("MapSet").proxyMap_(e,t):Pm(e)?ks("MapSet").proxySet_(e,t):k4(e,t);return(t?t.scope_:$z()).drafts_.push(n),n}function R4(e){return to(e)||Ln(10,e),Uz(e)}function Uz(e){if(!Ps(e)||km(e))return e;const t=e[un];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Bx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Bx(e,!0);return Ef(n,(l,o)=>{Lz(n,l,Uz(o))},a),t&&(t.finalized_=!1),n}var I4=new q4;I4.produce;var L4={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Fz=Kr({name:"legend",initialState:L4,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:zt()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,l=Bn(e).payload.indexOf(n);l>-1&&(e.payload[l]=a)},prepare:zt()},removeLegendPayload:{reducer(e,t){var n=Bn(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:zt()}}}),{setLegendSize:$J,setLegendSettings:BJ,addLegendPayload:$4,replaceLegendPayload:B4,removeLegendPayload:U4}=Fz.actions,F4=Fz.reducer;function Qx(){return Qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qx.apply(null,arguments)}function vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function oc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vw(Object(n),!0).forEach(function(a){G4(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function G4(e,t,n){return(t=H4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H4(e){var t=Q4(e,"string");return typeof t=="symbol"?t:t+""}function Q4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V4(e){return Array.isArray(e)&&ca(e[0])&&ca(e[1])?e.join(" ~ "):e}var Rl={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Y4=e=>{var{separator:t=Rl.separator,contentStyle:n,itemStyle:a,labelStyle:l=Rl.labelStyle,payload:o,formatter:u,itemSorter:d,wrapperClassName:m,labelClassName:p,label:h,labelFormatter:v,accessibilityLayer:y=Rl.accessibilityLayer}=e,x=()=>{if(o&&o.length){var O={padding:0,margin:0},D=(d?vm(o,d):o).map((T,k)=>{if(T.type==="none")return null;var R=T.formatter||u||V4,{value:L,name:Q}=T,$=L,F=Q;if(R){var Y=R(L,Q,T,k,o);if(Array.isArray(Y))[$,F]=Y;else if(Y!=null)$=Y;else return null}var M=oc(oc({},Rl.itemStyle),{},{color:T.color||Rl.itemStyle.color},a);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:M},ca(F)?g.createElement("span",{className:"recharts-tooltip-item-name"},F):null,ca(F)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},$),g.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:O},D)}return null},_=oc(oc({},Rl.contentStyle),n),j=oc({margin:0},l),S=!Mt(h),w=S?h:"",A=yt("recharts-default-tooltip",m),C=yt("recharts-tooltip-label",p);S&&v&&o!==void 0&&o!==null&&(w=v(h,o));var E=y?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",Qx({className:A,style:_},E),g.createElement("p",{className:C,style:j},g.isValidElement(w)?w:"".concat(w)),x())},cc="recharts-tooltip-wrapper",K4={visibility:"hidden"};function X4(e){var{coordinate:t,translateX:n,translateY:a}=e;return yt(cc,{["".concat(cc,"-right")]:Ae(n)&&t&&Ae(t.x)&&n>=t.x,["".concat(cc,"-left")]:Ae(n)&&t&&Ae(t.x)&&n<t.x,["".concat(cc,"-bottom")]:Ae(a)&&t&&Ae(t.y)&&a>=t.y,["".concat(cc,"-top")]:Ae(a)&&t&&Ae(t.y)&&a<t.y})}function gw(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offset:l,position:o,reverseDirection:u,tooltipDimension:d,viewBox:m,viewBoxDimension:p}=e;if(o&&Ae(o[a]))return o[a];var h=n[a]-d-(l>0?l:0),v=n[a]+l;if(t[a])return u[a]?h:v;var y=m[a];if(y==null)return 0;if(u[a]){var x=h,_=y;return x<_?Math.max(v,y):Math.max(h,y)}if(p==null)return 0;var j=v+d,S=y+p;return j>S?Math.max(h,y):Math.max(v,y)}function W4(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Z4(e){var{allowEscapeViewBox:t,coordinate:n,offsetTop:a,offsetLeft:l,position:o,reverseDirection:u,tooltipBox:d,useTranslate3d:m,viewBox:p}=e,h,v,y;return d.height>0&&d.width>0&&n?(v=gw({allowEscapeViewBox:t,coordinate:n,key:"x",offset:l,position:o,reverseDirection:u,tooltipDimension:d.width,viewBox:p,viewBoxDimension:p.width}),y=gw({allowEscapeViewBox:t,coordinate:n,key:"y",offset:a,position:o,reverseDirection:u,tooltipDimension:d.height,viewBox:p,viewBoxDimension:p.height}),h=W4({translateX:v,translateY:y,useTranslate3d:m})):h=K4,{cssProperties:h,cssClasses:X4({translateX:v,translateY:y,coordinate:n})}}function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(n),!0).forEach(function(a){Vx(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Vx(e,t,n){return(t=J4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J4(e){var t=eL(e,"string");return typeof t=="symbol"?t:t+""}function eL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tL extends g.PureComponent{constructor(){super(...arguments),Vx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:l,children:o,coordinate:u,hasPayload:d,isAnimationActive:m,offset:p,position:h,reverseDirection:v,useTranslate3d:y,viewBox:x,wrapperStyle:_,lastBoundingBox:j,innerRef:S,hasPortalFromProps:w}=this.props,A=typeof p=="number"?p:p.x,C=typeof p=="number"?p:p.y,{cssClasses:E,cssProperties:O}=Z4({allowEscapeViewBox:n,coordinate:u,offsetLeft:A,offsetTop:C,position:h,reverseDirection:v,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:x}),D=w?{}:Rd(Rd({transition:m&&t?"transform ".concat(a,"ms ").concat(l):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),T=Rd(Rd({},D),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},_);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:T,ref:S},o)}}var Gz=()=>{var e;return(e=ke(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yx.apply(null,arguments)}function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(a){rL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rL(e,t,n){return(t=nL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nL(e){var t=aL(e,"string");return typeof t=="symbol"?t:t+""}function aL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jw={curveBasisClosed:n5,curveBasisOpen:a5,curveBasis:r5,curveBumpX:U3,curveBumpY:F3,curveLinearClosed:i5,curveLinear:pm,curveMonotoneX:s5,curveMonotoneY:l5,curveNatural:o5,curveStep:c5,curveStepAfter:d5,curveStepBefore:u5},Of=e=>tt(e.x)&&tt(e.y),Nw=e=>e.base!=null&&Of(e.base)&&Of(e),uc=e=>e.x,dc=e=>e.y,iL=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Kc(e));if((n==="curveMonotone"||n==="curveBump")&&t){var a=jw["".concat(n).concat(t==="vertical"?"Y":"X")];if(a)return a}return jw[n]||pm},_w={connectNulls:!1,type:"linear"},sL=e=>{var{type:t=_w.type,points:n=[],baseLine:a,layout:l,connectNulls:o=_w.connectNulls}=e,u=iL(t,l),d=o?n.filter(Of):n;if(Array.isArray(a)){var m,p=n.map((_,j)=>bw(bw({},_),{},{base:a[j]}));l==="vertical"?m=zd().y(dc).x1(uc).x0(_=>_.base.x):m=zd().x(uc).y1(dc).y0(_=>_.base.y);var h=m.defined(Nw).curve(u),v=o?p.filter(Nw):p;return h(v)}var y;l==="vertical"&&Ae(a)?y=zd().y(dc).x1(uc).x0(a):Ae(a)?y=zd().x(uc).y1(dc).y0(a):y=j2().x(uc).y(dc);var x=y.defined(Of).curve(u);return x(d)},Hz=e=>{var{className:t,points:n,path:a,pathRef:l}=e,o=Us();if((!n||!n.length)&&!a)return null;var u={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},d=n&&n.length?sL(u):a;return g.createElement("path",Yx({},Un(e),Ly(e),{className:yt("recharts-curve",t),d:d===null?void 0:d,ref:l}))},lL=["x","y","top","left","width","height","className"];function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kx.apply(null,arguments)}function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function oL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(a){cL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cL(e,t,n){return(t=uL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uL(e){var t=dL(e,"string");return typeof t=="symbol"?t:t+""}function dL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fL(e,t){if(e==null)return{};var n,a,l=mL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function mL(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var pL=(e,t,n,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(n),hL=e=>{var{x:t=0,y:n=0,top:a=0,left:l=0,width:o=0,height:u=0,className:d}=e,m=fL(e,lL),p=oL({x:t,y:n,top:a,left:l,width:o,height:u},m);return!Ae(t)||!Ae(n)||!Ae(o)||!Ae(u)||!Ae(a)||!Ae(l)?null:g.createElement("path",Kx({},Mr(p),{className:yt("recharts-cross",d),d:pL(t,n,o,u,a,l)}))};function vL(e,t,n,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-l,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Cw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(n),!0).forEach(function(a){gL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ww(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gL(e,t,n){return(t=xL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xL(e){var t=yL(e,"string");return typeof t=="symbol"?t:t+""}function yL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bL=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Qz=(e,t,n)=>e.map(a=>"".concat(bL(a)," ").concat(t,"ms ").concat(n)).join(","),jL=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(l=>a.includes(l))),Rc=(e,t)=>Object.keys(t).reduce((n,a)=>Cw(Cw({},n),{},{[a]:e(a,t[a])}),{});function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(n),!0).forEach(function(a){NL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function NL(e,t,n){return(t=_L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _L(e){var t=SL(e,"string");return typeof t=="symbol"?t:t+""}function SL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Df=(e,t,n)=>e+(t-e)*n,Xx=e=>{var{from:t,to:n}=e;return t!==n},Vz=(e,t,n)=>{var a=Rc((l,o)=>{if(Xx(o)){var[u,d]=e(o.from,o.to,o.velocity);return er(er({},o),{},{from:u,velocity:d})}return o},t);return n<1?Rc((l,o)=>Xx(o)&&a[l]!=null?er(er({},o),{},{velocity:Df(o.velocity,a[l].velocity,n),from:Df(o.from,a[l].from,n)}):o,t):Vz(e,a,n-1)};function wL(e,t,n,a,l,o){var u,d=a.reduce((y,x)=>er(er({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>Rc((y,x)=>x.from,d),p=()=>!Object.values(d).filter(Xx).length,h=null,v=y=>{u||(u=y);var x=y-u,_=x/n.dt;d=Vz(n,d,_),l(er(er(er({},e),t),m())),u=y,p()||(h=o.setTimeout(v))};return()=>(h=o.setTimeout(v),()=>{var y;(y=h)===null||y===void 0||y()})}function CL(e,t,n,a,l,o,u){var d=null,m=l.reduce((v,y)=>{var x=e[y],_=t[y];return x==null||_==null?v:er(er({},v),{},{[y]:[x,_]})},{}),p,h=v=>{p||(p=v);var y=(v-p)/a,x=Rc((j,S)=>Df(...S,n(y)),m);if(o(er(er(er({},e),t),x)),y<1)d=u.setTimeout(h);else{var _=Rc((j,S)=>Df(...S,n(1)),m);o(er(er(er({},e),t),_))}};return()=>(d=u.setTimeout(h),()=>{var v;(v=d)===null||v===void 0||v()})}const EL=(e,t,n,a,l,o)=>{var u=jL(e,t);return n==null?()=>(l(er(er({},e),t)),()=>{}):n.isStepper===!0?wL(e,t,n,u,l,o):CL(e,t,n,a,u,l,o)};var Mf=1e-4,Yz=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Kz=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),Aw=(e,t)=>n=>{var a=Yz(e,t);return Kz(a,n)},AL=(e,t)=>n=>{var a=Yz(e,t),l=[...a.map((o,u)=>o*u).slice(1),0];return Kz(l,n)},zL=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var a=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var l=a.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},OL=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=zL(n[0]);if(l)return l}}return n.length===4?n:[0,0,1,1]},DL=(e,t,n,a)=>{var l=Aw(e,n),o=Aw(t,a),u=AL(e,n),d=p=>p>1?1:p<0?0:p,m=p=>{for(var h=p>1?1:p,v=h,y=0;y<8;++y){var x=l(v)-h,_=u(v);if(Math.abs(x-h)<Mf||_<Mf)return o(v);v=d(v-x/_)}return o(v)};return m.isStepper=!1,m},zw=function(){return DL(...OL(...arguments))},ML=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:l=17}=t,o=(u,d,m)=>{var p=-(u-d)*n,h=m*a,v=m+(p-h)*l/1e3,y=m*l/1e3+u;return Math.abs(y-d)<Mf&&Math.abs(v)<Mf?[d,0]:[y,v]};return o.isStepper=!0,o.dt=l,o},PL=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return zw(e);case"spring":return ML();default:if(e.split("(")[0]==="cubic-bezier")return zw(e)}return typeof e=="function"?e:null};function kL(e){var t,n=()=>null,a=!1,l=null,o=u=>{if(!a){if(Array.isArray(u)){if(!u.length)return;var d=u,[m,...p]=d;if(typeof m=="number"){l=e.setTimeout(o.bind(null,p),m);return}o(m),l=e.setTimeout(o.bind(null,p));return}typeof u=="string"&&(t=u,n(t)),typeof u=="object"&&(t=u,n(t)),typeof u=="function"&&u()}};return{stop:()=>{a=!0},start:u=>{a=!1,l&&(l(),l=null),o(u)},subscribe:u=>(n=u,()=>{n=()=>null}),getTimeoutController:()=>e}}class TL{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=u=>{u-a>=n?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function qL(){return kL(new TL)}var RL=g.createContext(qL);function IL(e,t){var n=g.useContext(RL);return g.useMemo(()=>t??n(e),[e,t,n])}var LL=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Tm={isSsr:LL()},$L={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Ow={t:0},Bg={t:1};function qm(e){var t=kr(e,$L),{isActive:n,canBegin:a,duration:l,easing:o,begin:u,onAnimationEnd:d,onAnimationStart:m,children:p}=t,h=n==="auto"?!Tm.isSsr:n,v=IL(t.animationId,t.animationManager),[y,x]=g.useState(h?Ow:Bg),_=g.useRef(null);return g.useEffect(()=>{h||x(Bg)},[h]),g.useEffect(()=>{if(!h||!a)return Bs;var j=EL(Ow,Bg,PL(o),l,x,v.getTimeoutController()),S=()=>{_.current=j()};return v.start([m,u,S,l,d]),()=>{v.stop(),_.current&&_.current(),d()}},[h,a,l,o,u,m,d,v]),p(y.t)}function Rm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=g.useRef(Oc(t)),a=g.useRef(e);return a.current!==e&&(n.current=Oc(t),a.current=e),n.current}var BL=["radius"],UL=["radius"],Dw,Mw,Pw,kw,Tw,qw,Rw,Iw,Lw,$w;function Bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Uw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bw(Object(n),!0).forEach(function(a){FL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FL(e,t,n){return(t=GL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GL(e){var t=HL(e,"string");return typeof t=="symbol"?t:t+""}function HL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pf(){return Pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pf.apply(null,arguments)}function Fw(e,t){if(e==null)return{};var n,a,l=QL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function QL(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ta(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Gw=(e,t,n,a,l)=>{var o=Ti(n),u=Ti(a),d=Math.min(Math.abs(o)/2,Math.abs(u)/2),m=u>=0?1:-1,p=o>=0?1:-1,h=u>=0&&o>=0||u<0&&o<0?1:0,v;if(d>0&&Array.isArray(l)){for(var y=[0,0,0,0],x=0,_=4;x<_;x++){var j,S=(j=l[x])!==null&&j!==void 0?j:0;y[x]=S>d?d:S}v=It(Dw||(Dw=ta(["M",",",""])),e,t+m*y[0]),y[0]>0&&(v+=It(Mw||(Mw=ta(["A ",",",",0,0,",",",",",""])),y[0],y[0],h,e+p*y[0],t)),v+=It(Pw||(Pw=ta(["L ",",",""])),e+n-p*y[1],t),y[1]>0&&(v+=It(kw||(kw=ta(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],h,e+n,t+m*y[1])),v+=It(Tw||(Tw=ta(["L ",",",""])),e+n,t+a-m*y[2]),y[2]>0&&(v+=It(qw||(qw=ta(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],h,e+n-p*y[2],t+a)),v+=It(Rw||(Rw=ta(["L ",",",""])),e+p*y[3],t+a),y[3]>0&&(v+=It(Iw||(Iw=ta(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],h,e,t+a-m*y[3])),v+="Z"}else if(d>0&&l===+l&&l>0){var w=Math.min(d,l);v=It(Lw||(Lw=ta(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*w,w,w,h,e+p*w,t,e+n-p*w,t,w,w,h,e+n,t+m*w,e+n,t+a-m*w,w,w,h,e+n-p*w,t+a,e+p*w,t+a,w,w,h,e,t+a-m*w)}else v=It($w||($w=ta(["M ",","," h "," v "," h "," Z"])),e,t,n,a,-n);return v},Hw={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xz=e=>{var t=kr(e,Hw),n=g.useRef(null),[a,l]=g.useState(-1);g.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Z=n.current.getTotalLength();Z&&l(Z)}catch{}},[]);var{x:o,y:u,width:d,height:m,radius:p,className:h}=t,{animationEasing:v,animationDuration:y,animationBegin:x,isAnimationActive:_,isUpdateAnimationActive:j}=t,S=g.useRef(d),w=g.useRef(m),A=g.useRef(o),C=g.useRef(u),E=g.useMemo(()=>({x:o,y:u,width:d,height:m,radius:p}),[o,u,d,m,p]),O=Rm(E,"rectangle-");if(o!==+o||u!==+u||d!==+d||m!==+m||d===0||m===0)return null;var D=yt("recharts-rectangle",h);if(!j){var T=Mr(t),{radius:k}=T,R=Fw(T,BL);return g.createElement("path",Pf({},R,{x:Ti(o),y:Ti(u),width:Ti(d),height:Ti(m),radius:typeof p=="number"?p:void 0,className:D,d:Gw(o,u,d,m,p)}))}var L=S.current,Q=w.current,$=A.current,F=C.current,Y="0px ".concat(a===-1?1:a,"px"),M="".concat(a,"px 0px"),q=Qz(["strokeDasharray"],y,typeof v=="string"?v:Hw.animationEasing);return g.createElement(qm,{animationId:O,key:O,canBegin:a>0,duration:y,easing:v,isActive:j,begin:x},Z=>{var H=Lt(L,d,Z),B=Lt(Q,m,Z),I=Lt($,o,Z),pe=Lt(F,u,Z);n.current&&(S.current=H,w.current=B,A.current=I,C.current=pe);var re;_?Z>0?re={transition:q,strokeDasharray:M}:re={strokeDasharray:Y}:re={strokeDasharray:M};var de=Mr(t),{radius:ge}=de,ye=Fw(de,UL);return g.createElement("path",Pf({},ye,{radius:typeof p=="number"?p:void 0,className:D,d:Gw(I,pe,H,B,p),ref:n,style:Uw(Uw({},re),t.style)}))})};function Qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Vw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qw(Object(n),!0).forEach(function(a){VL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function VL(e,t,n){return(t=YL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YL(e){var t=KL(e,"string");return typeof t=="symbol"?t:t+""}function KL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kf=Math.PI/180,XL=e=>e*180/Math.PI,br=(e,t,n,a)=>({x:e+Math.cos(-kf*a)*n,y:t+Math.sin(-kf*a)*n}),WL=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},ZL=(e,t)=>{var{x:n,y:a}=e,{x:l,y:o}=t;return Math.sqrt((n-l)**2+(a-o)**2)},JL=(e,t)=>{var{x:n,y:a}=e,{cx:l,cy:o}=t,u=ZL({x:n,y:a},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var d=(n-l)/u,m=Math.acos(d);return a>o&&(m=2*Math.PI-m),{radius:u,angle:XL(m),angleInRadian:m}},e8=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),l=Math.floor(n/360),o=Math.min(a,l);return{startAngle:t-o*360,endAngle:n-o*360}},t8=(e,t)=>{var{startAngle:n,endAngle:a}=t,l=Math.floor(n/360),o=Math.floor(a/360),u=Math.min(l,o);return e+u*360},r8=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:l,angle:o}=JL({x:n,y:a},t),{innerRadius:u,outerRadius:d}=t;if(l<u||l>d||l===0)return null;var{startAngle:m,endAngle:p}=e8(t),h=o,v;if(m<=p){for(;h>p;)h-=360;for(;h<m;)h+=360;v=h>=m&&h<=p}else{for(;h>m;)h-=360;for(;h<p;)h+=360;v=h>=p&&h<=m}return v?Vw(Vw({},t),{},{radius:l,angle:t8(h,t)}):null};function Wz(e){var{cx:t,cy:n,radius:a,startAngle:l,endAngle:o}=e,u=br(t,n,a,l),d=br(t,n,a,o);return{points:[u,d],cx:t,cy:n,radius:a,startAngle:l,endAngle:o}}var Yw,Kw,Xw,Ww,Zw,Jw,eC;function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wx.apply(null,arguments)}function bs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var n8=(e,t)=>{var n=Gr(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},Id=e=>{var{cx:t,cy:n,radius:a,angle:l,sign:o,isExternal:u,cornerRadius:d,cornerIsExternal:m}=e,p=d*(u?1:-1)+a,h=Math.asin(d/p)/kf,v=m?l:l+o*h,y=br(t,n,p,v),x=br(t,n,a,v),_=m?l-o*h:l,j=br(t,n,p*Math.cos(h*kf),_);return{center:y,circleTangency:x,lineTangency:j,theta:h}},Zz=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:o,endAngle:u}=e,d=n8(o,u),m=o+d,p=br(t,n,l,o),h=br(t,n,l,m),v=It(Yw||(Yw=bs(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,l,l,+(Math.abs(d)>180),+(o>m),h.x,h.y);if(a>0){var y=br(t,n,a,o),x=br(t,n,a,m);v+=It(Kw||(Kw=bs(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,a,a,+(Math.abs(d)>180),+(o<=m),y.x,y.y)}else v+=It(Xw||(Xw=bs(["L ",","," Z"])),t,n);return v},a8=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:p}=e,h=Gr(p-m),{circleTangency:v,lineTangency:y,theta:x}=Id({cx:t,cy:n,radius:l,angle:m,sign:h,cornerRadius:o,cornerIsExternal:d}),{circleTangency:_,lineTangency:j,theta:S}=Id({cx:t,cy:n,radius:l,angle:p,sign:-h,cornerRadius:o,cornerIsExternal:d}),w=d?Math.abs(m-p):Math.abs(m-p)-x-S;if(w<0)return u?It(Ww||(Ww=bs(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,o,o,o*2,o,o,-o*2):Zz({cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:m,endAngle:p});var A=It(Zw||(Zw=bs(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,o,o,+(h<0),v.x,v.y,l,l,+(w>180),+(h<0),_.x,_.y,o,o,+(h<0),j.x,j.y);if(a>0){var{circleTangency:C,lineTangency:E,theta:O}=Id({cx:t,cy:n,radius:a,angle:m,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:D,lineTangency:T,theta:k}=Id({cx:t,cy:n,radius:a,angle:p,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),R=d?Math.abs(m-p):Math.abs(m-p)-O-k;if(R<0&&o===0)return"".concat(A,"L").concat(t,",").concat(n,"Z");A+=It(Jw||(Jw=bs(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,o,o,+(h<0),D.x,D.y,a,a,+(R>180),+(h>0),C.x,C.y,o,o,+(h<0),E.x,E.y)}else A+=It(eC||(eC=bs(["L",",","Z"])),t,n);return A},i8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Jz=e=>{var t=kr(e,i8),{cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h,className:v}=t;if(o<l||p===h)return null;var y=yt("recharts-sector",v),x=o-l,_=Fn(u,x,0,!0),j;return _>0&&Math.abs(p-h)<360?j=a8({cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(_,x/2),forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h}):j=Zz({cx:n,cy:a,innerRadius:l,outerRadius:o,startAngle:p,endAngle:h}),g.createElement("path",Wx({},Mr(t),{className:y,d:j}))};function s8(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(R2(t)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:u,angle:d}=t,m=br(a,l,o,d),p=br(a,l,u,d);return[{x:m.x,y:m.y},{x:p.x,y:p.y}]}return Wz(t)}}var Ug={},Fg={},Gg={},tC;function l8(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V2();function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(Gg)),Gg}var rC;function o8(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l8();function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(Fg)),Fg}var nC;function c8(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y2(),n=o8();function a(l,o,u){u&&typeof u!="number"&&t.isIterateeCall(l,o,u)&&(o=u=void 0),l=n.toFinite(l),o===void 0?(o=l,l=0):o=n.toFinite(o),u=u===void 0?l<o?1:-1:n.toFinite(u);const d=Math.max(Math.ceil((o-l)/(u||1)),0),m=new Array(d);for(let p=0;p<d;p++)m[p]=l,l+=u;return m}e.range=a})(Ug)),Ug}var Hg,aC;function u8(){return aC||(aC=1,Hg=c8().range),Hg}var d8=u8();const eO=Ka(d8);function Ri(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function f8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tb(e){let t,n,a;e.length!==2?(t=Ri,n=(d,m)=>Ri(e(d),m),a=(d,m)=>e(d)-m):(t=e===Ri||e===f8?e:m8,n=e,a=e);function l(d,m,p=0,h=d.length){if(p<h){if(t(m,m)!==0)return h;do{const v=p+h>>>1;n(d[v],m)<0?p=v+1:h=v}while(p<h)}return p}function o(d,m,p=0,h=d.length){if(p<h){if(t(m,m)!==0)return h;do{const v=p+h>>>1;n(d[v],m)<=0?p=v+1:h=v}while(p<h)}return p}function u(d,m,p=0,h=d.length){const v=l(d,m,p,h-1);return v>p&&a(d[v-1],m)>-a(d[v],m)?v-1:v}return{left:l,center:u,right:o}}function m8(){return 0}function tO(e){return e===null?NaN:+e}function*p8(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const h8=tb(Ri),tu=h8.right;tb(tO).center;class iC extends Map{constructor(t,n=x8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,l]of t)this.set(a,l)}get(t){return super.get(sC(this,t))}has(t){return super.has(sC(this,t))}set(t,n){return super.set(v8(this,t),n)}delete(t){return super.delete(g8(this,t))}}function sC({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function v8({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function g8({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function x8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function y8(e=Ri){if(e===Ri)return rO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function rO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const b8=Math.sqrt(50),j8=Math.sqrt(10),N8=Math.sqrt(2);function Tf(e,t,n){const a=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),u=o>=b8?10:o>=j8?5:o>=N8?2:1;let d,m,p;return l<0?(p=Math.pow(10,-l)/u,d=Math.round(e*p),m=Math.round(t*p),d/p<e&&++d,m/p>t&&--m,p=-p):(p=Math.pow(10,l)*u,d=Math.round(e/p),m=Math.round(t/p),d*p<e&&++d,m*p>t&&--m),m<d&&.5<=n&&n<2?Tf(e,t,n*2):[d,m,p]}function Zx(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[l,o,u]=a?Tf(t,e,n):Tf(e,t,n);if(!(o>=l))return[];const d=o-l+1,m=new Array(d);if(a)if(u<0)for(let p=0;p<d;++p)m[p]=(o-p)/-u;else for(let p=0;p<d;++p)m[p]=(o-p)*u;else if(u<0)for(let p=0;p<d;++p)m[p]=(l+p)/-u;else for(let p=0;p<d;++p)m[p]=(l+p)*u;return m}function Jx(e,t,n){return t=+t,e=+e,n=+n,Tf(e,t,n)[2]}function ey(e,t,n){t=+t,e=+e,n=+n;const a=t<e,l=a?Jx(t,e,n):Jx(e,t,n);return(a?-1:1)*(l<0?1/-l:l)}function lC(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function oC(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function nO(e,t,n=0,a=1/0,l){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(l=l===void 0?rO:y8(l);a>n;){if(a-n>600){const m=a-n+1,p=t-n+1,h=Math.log(m),v=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*v*(m-v)/m)*(p-m/2<0?-1:1),x=Math.max(n,Math.floor(t-p*v/m+y)),_=Math.min(a,Math.floor(t+(m-p)*v/m+y));nO(e,t,x,_,l)}const o=e[t];let u=n,d=a;for(fc(e,n,t),l(e[a],o)>0&&fc(e,n,a);u<d;){for(fc(e,u,d),++u,--d;l(e[u],o)<0;)++u;for(;l(e[d],o)>0;)--d}l(e[n],o)===0?fc(e,n,d):(++d,fc(e,d,a)),d<=t&&(n=d+1),t<=d&&(a=d-1)}return e}function fc(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function _8(e,t,n){if(e=Float64Array.from(p8(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return oC(e);if(t>=1)return lC(e);var a,l=(a-1)*t,o=Math.floor(l),u=lC(nO(e,o).subarray(0,o+1)),d=oC(e.subarray(o+1));return u+(d-u)*(l-o)}}function S8(e,t,n=tO){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,l=(a-1)*t,o=Math.floor(l),u=+n(e[o],o,e),d=+n(e[o+1],o+1,e);return u+(d-u)*(l-o)}}function w8(e,t,n){e=+e,t=+t,n=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+n;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(l);++a<l;)o[a]=e+a*n;return o}function Mn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ei(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ty=Symbol("implicit");function rb(){var e=new iC,t=[],n=[],a=ty;function l(o){let u=e.get(o);if(u===void 0){if(a!==ty)return a;e.set(o,u=t.push(o)-1)}return n[u%n.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new iC;for(const u of o)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(o){return arguments.length?(n=Array.from(o),l):n.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return rb(t,n).unknown(a)},Mn.apply(l,arguments),l}function nb(){var e=rb().unknown(void 0),t=e.domain,n=e.range,a=0,l=1,o,u,d=!1,m=0,p=0,h=.5;delete e.unknown;function v(){var y=t().length,x=l<a,_=x?l:a,j=x?a:l;o=(j-_)/Math.max(1,y-m+p*2),d&&(o=Math.floor(o)),_+=(j-_-o*(y-m))*h,u=o*(1-m),d&&(_=Math.round(_),u=Math.round(u));var S=w8(y).map(function(w){return _+o*w});return n(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),v()):t()},e.range=function(y){return arguments.length?([a,l]=y,a=+a,l=+l,v()):[a,l]},e.rangeRound=function(y){return[a,l]=y,a=+a,l=+l,d=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(y){return arguments.length?(d=!!y,v()):d},e.padding=function(y){return arguments.length?(m=Math.min(1,p=+y),v()):m},e.paddingInner=function(y){return arguments.length?(m=Math.min(1,y),v()):m},e.paddingOuter=function(y){return arguments.length?(p=+y,v()):p},e.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),v()):h},e.copy=function(){return nb(t(),[a,l]).round(d).paddingInner(m).paddingOuter(p).align(h)},Mn.apply(v(),arguments)}function aO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return aO(t())},e}function C8(){return aO(nb.apply(null,arguments).paddingInner(1))}function ab(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iO(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function ru(){}var Ic=.7,qf=1/Ic,Kl="\\s*([+-]?\\d+)\\s*",Lc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",la="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",E8=/^#([0-9a-f]{3,8})$/,A8=new RegExp(`^rgb\\(${Kl},${Kl},${Kl}\\)$`),z8=new RegExp(`^rgb\\(${la},${la},${la}\\)$`),O8=new RegExp(`^rgba\\(${Kl},${Kl},${Kl},${Lc}\\)$`),D8=new RegExp(`^rgba\\(${la},${la},${la},${Lc}\\)$`),M8=new RegExp(`^hsl\\(${Lc},${la},${la}\\)$`),P8=new RegExp(`^hsla\\(${Lc},${la},${la},${Lc}\\)$`),cC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ab(ru,$c,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uC,formatHex:uC,formatHex8:k8,formatHsl:T8,formatRgb:dC,toString:dC});function uC(){return this.rgb().formatHex()}function k8(){return this.rgb().formatHex8()}function T8(){return sO(this).formatHsl()}function dC(){return this.rgb().formatRgb()}function $c(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=E8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fC(t):n===3?new Qr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ld(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ld(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=A8.exec(e))?new Qr(t[1],t[2],t[3],1):(t=z8.exec(e))?new Qr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=O8.exec(e))?Ld(t[1],t[2],t[3],t[4]):(t=D8.exec(e))?Ld(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=M8.exec(e))?hC(t[1],t[2]/100,t[3]/100,1):(t=P8.exec(e))?hC(t[1],t[2]/100,t[3]/100,t[4]):cC.hasOwnProperty(e)?fC(cC[e]):e==="transparent"?new Qr(NaN,NaN,NaN,0):null}function fC(e){return new Qr(e>>16&255,e>>8&255,e&255,1)}function Ld(e,t,n,a){return a<=0&&(e=t=n=NaN),new Qr(e,t,n,a)}function q8(e){return e instanceof ru||(e=$c(e)),e?(e=e.rgb(),new Qr(e.r,e.g,e.b,e.opacity)):new Qr}function ry(e,t,n,a){return arguments.length===1?q8(e):new Qr(e,t,n,a??1)}function Qr(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}ab(Qr,ry,iO(ru,{brighter(e){return e=e==null?qf:Math.pow(qf,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qr(As(this.r),As(this.g),As(this.b),Rf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mC,formatHex:mC,formatHex8:R8,formatRgb:pC,toString:pC}));function mC(){return`#${js(this.r)}${js(this.g)}${js(this.b)}`}function R8(){return`#${js(this.r)}${js(this.g)}${js(this.b)}${js((isNaN(this.opacity)?1:this.opacity)*255)}`}function pC(){const e=Rf(this.opacity);return`${e===1?"rgb(":"rgba("}${As(this.r)}, ${As(this.g)}, ${As(this.b)}${e===1?")":`, ${e})`}`}function Rf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function As(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function js(e){return e=As(e),(e<16?"0":"")+e.toString(16)}function hC(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $n(e,t,n,a)}function sO(e){if(e instanceof $n)return new $n(e.h,e.s,e.l,e.opacity);if(e instanceof ru||(e=$c(e)),!e)return new $n;if(e instanceof $n)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,l=Math.min(t,n,a),o=Math.max(t,n,a),u=NaN,d=o-l,m=(o+l)/2;return d?(t===o?u=(n-a)/d+(n<a)*6:n===o?u=(a-t)/d+2:u=(t-n)/d+4,d/=m<.5?o+l:2-o-l,u*=60):d=m>0&&m<1?0:u,new $n(u,d,m,e.opacity)}function I8(e,t,n,a){return arguments.length===1?sO(e):new $n(e,t,n,a??1)}function $n(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}ab($n,I8,iO(ru,{brighter(e){return e=e==null?qf:Math.pow(qf,e),new $n(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new $n(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,l=2*n-a;return new Qr(Qg(e>=240?e-240:e+120,l,a),Qg(e,l,a),Qg(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new $n(vC(this.h),$d(this.s),$d(this.l),Rf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rf(this.opacity);return`${e===1?"hsl(":"hsla("}${vC(this.h)}, ${$d(this.s)*100}%, ${$d(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vC(e){return e=(e||0)%360,e<0?e+360:e}function $d(e){return Math.max(0,Math.min(1,e||0))}function Qg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ib=e=>()=>e;function L8(e,t){return function(n){return e+n*t}}function $8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function B8(e){return(e=+e)==1?lO:function(t,n){return n-t?$8(t,n,e):ib(isNaN(t)?n:t)}}function lO(e,t){var n=t-e;return n?L8(e,n):ib(isNaN(e)?t:e)}const gC=(function e(t){var n=B8(t);function a(l,o){var u=n((l=ry(l)).r,(o=ry(o)).r),d=n(l.g,o.g),m=n(l.b,o.b),p=lO(l.opacity,o.opacity);return function(h){return l.r=u(h),l.g=d(h),l.b=m(h),l.opacity=p(h),l+""}}return a.gamma=e,a})(1);function U8(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),l;return function(o){for(l=0;l<n;++l)a[l]=e[l]*(1-o)+t[l]*o;return a}}function F8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function G8(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,l=new Array(a),o=new Array(n),u;for(u=0;u<a;++u)l[u]=io(e[u],t[u]);for(;u<n;++u)o[u]=t[u];return function(d){for(u=0;u<a;++u)o[u]=l[u](d);return o}}function H8(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function If(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Q8(e,t){var n={},a={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?n[l]=io(e[l],t[l]):a[l]=t[l];return function(o){for(l in n)a[l]=n[l](o);return a}}var ny=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vg=new RegExp(ny.source,"g");function V8(e){return function(){return e}}function Y8(e){return function(t){return e(t)+""}}function K8(e,t){var n=ny.lastIndex=Vg.lastIndex=0,a,l,o,u=-1,d=[],m=[];for(e=e+"",t=t+"";(a=ny.exec(e))&&(l=Vg.exec(t));)(o=l.index)>n&&(o=t.slice(n,o),d[u]?d[u]+=o:d[++u]=o),(a=a[0])===(l=l[0])?d[u]?d[u]+=l:d[++u]=l:(d[++u]=null,m.push({i:u,x:If(a,l)})),n=Vg.lastIndex;return n<t.length&&(o=t.slice(n),d[u]?d[u]+=o:d[++u]=o),d.length<2?m[0]?Y8(m[0].x):V8(t):(t=m.length,function(p){for(var h=0,v;h<t;++h)d[(v=m[h]).i]=v.x(p);return d.join("")})}function io(e,t){var n=typeof t,a;return t==null||n==="boolean"?ib(t):(n==="number"?If:n==="string"?(a=$c(t))?(t=a,gC):K8:t instanceof $c?gC:t instanceof Date?H8:F8(t)?U8:Array.isArray(t)?G8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Q8:If)(e,t)}function sb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function X8(e,t){t===void 0&&(t=e,e=io);for(var n=0,a=t.length-1,l=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(l,l=t[++n]);return function(u){var d=Math.max(0,Math.min(a-1,Math.floor(u*=a)));return o[d](u-d)}}function W8(e){return function(){return e}}function Lf(e){return+e}var xC=[0,1];function Dr(e){return e}function ay(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:W8(isNaN(t)?NaN:.5)}function Z8(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function J8(e,t,n){var a=e[0],l=e[1],o=t[0],u=t[1];return l<a?(a=ay(l,a),o=n(u,o)):(a=ay(a,l),o=n(o,u)),function(d){return o(a(d))}}function e$(e,t,n){var a=Math.min(e.length,t.length)-1,l=new Array(a),o=new Array(a),u=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<a;)l[u]=ay(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(d){var m=tu(e,d,1,a)-1;return o[m](l[m](d))}}function nu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Im(){var e=xC,t=xC,n=io,a,l,o,u=Dr,d,m,p;function h(){var y=Math.min(e.length,t.length);return u!==Dr&&(u=Z8(e[0],e[y-1])),d=y>2?e$:J8,m=p=null,v}function v(y){return y==null||isNaN(y=+y)?o:(m||(m=d(e.map(a),t,n)))(a(u(y)))}return v.invert=function(y){return u(l((p||(p=d(t,e.map(a),If)))(y)))},v.domain=function(y){return arguments.length?(e=Array.from(y,Lf),h()):e.slice()},v.range=function(y){return arguments.length?(t=Array.from(y),h()):t.slice()},v.rangeRound=function(y){return t=Array.from(y),n=sb,h()},v.clamp=function(y){return arguments.length?(u=y?!0:Dr,h()):u!==Dr},v.interpolate=function(y){return arguments.length?(n=y,h()):n},v.unknown=function(y){return arguments.length?(o=y,v):o},function(y,x){return a=y,l=x,h()}}function lb(){return Im()(Dr,Dr)}function t$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $f(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function ro(e){return e=$f(Math.abs(e)),e?e[1]:NaN}function r$(e,t){return function(n,a){for(var l=n.length,o=[],u=0,d=e[0],m=0;l>0&&d>0&&(m+d+1>a&&(d=Math.max(1,a-m)),o.push(n.substring(l-=d,l+d)),!((m+=d+1)>a));)d=e[u=(u+1)%e.length];return o.reverse().join(t)}}function n$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var a$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bc(e){if(!(t=a$.exec(e)))throw new Error("invalid format: "+e);var t;return new ob({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bc.prototype=ob.prototype;function ob(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ob.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function i$(e){e:for(var t=e.length,n=1,a=-1,l;n<t;++n)switch(e[n]){case".":a=l=n;break;case"0":a===0&&(a=n),l=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var Bf;function s$(e,t){var n=$f(e,t);if(!n)return Bf=void 0,e.toPrecision(t);var a=n[0],l=n[1],o=l-(Bf=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+$f(e,Math.max(0,t+o-1))[0]}function yC(e,t){var n=$f(e,t);if(!n)return e+"";var a=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const bC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:t$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yC(e*100,t),r:yC,s:s$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jC(e){return e}var NC=Array.prototype.map,_C=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function l$(e){var t=e.grouping===void 0||e.thousands===void 0?jC:r$(NC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?jC:n$(NC.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function p(v,y){v=Bc(v);var x=v.fill,_=v.align,j=v.sign,S=v.symbol,w=v.zero,A=v.width,C=v.comma,E=v.precision,O=v.trim,D=v.type;D==="n"?(C=!0,D="g"):bC[D]||(E===void 0&&(E=12),O=!0,D="g"),(w||x==="0"&&_==="=")&&(w=!0,x="0",_="=");var T=(y&&y.prefix!==void 0?y.prefix:"")+(S==="$"?n:S==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():""),k=(S==="$"?a:/[%p]/.test(D)?u:"")+(y&&y.suffix!==void 0?y.suffix:""),R=bC[D],L=/[defgprs%]/.test(D);E=E===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function Q($){var F=T,Y=k,M,q,Z;if(D==="c")Y=R($)+Y,$="";else{$=+$;var H=$<0||1/$<0;if($=isNaN($)?m:R(Math.abs($),E),O&&($=i$($)),H&&+$==0&&j!=="+"&&(H=!1),F=(H?j==="("?j:d:j==="-"||j==="("?"":j)+F,Y=(D==="s"&&!isNaN($)&&Bf!==void 0?_C[8+Bf/3]:"")+Y+(H&&j==="("?")":""),L){for(M=-1,q=$.length;++M<q;)if(Z=$.charCodeAt(M),48>Z||Z>57){Y=(Z===46?l+$.slice(M+1):$.slice(M))+Y,$=$.slice(0,M);break}}}C&&!w&&($=t($,1/0));var B=F.length+$.length+Y.length,I=B<A?new Array(A-B+1).join(x):"";switch(C&&w&&($=t(I+$,I.length?A-Y.length:1/0),I=""),_){case"<":$=F+$+Y+I;break;case"=":$=F+I+$+Y;break;case"^":$=I.slice(0,B=I.length>>1)+F+$+Y+I.slice(B);break;default:$=I+F+$+Y;break}return o($)}return Q.toString=function(){return v+""},Q}function h(v,y){var x=Math.max(-8,Math.min(8,Math.floor(ro(y)/3)))*3,_=Math.pow(10,-x),j=p((v=Bc(v),v.type="f",v),{suffix:_C[8+x/3]});return function(S){return j(_*S)}}return{format:p,formatPrefix:h}}var Bd,cb,oO;o$({thousands:",",grouping:[3],currency:["$",""]});function o$(e){return Bd=l$(e),cb=Bd.format,oO=Bd.formatPrefix,Bd}function c$(e){return Math.max(0,-ro(Math.abs(e)))}function u$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ro(t)/3)))*3-ro(Math.abs(e)))}function d$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ro(t)-ro(e))+1}function cO(e,t,n,a){var l=ey(e,t,n),o;switch(a=Bc(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=u$(l,u))&&(a.precision=o),oO(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=d$(l,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=c$(l))&&(a.precision=o-(a.type==="%")*2);break}}return cb(a)}function Hi(e){var t=e.domain;return e.ticks=function(n){var a=t();return Zx(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var l=t();return cO(l[0],l[l.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),l=0,o=a.length-1,u=a[l],d=a[o],m,p,h=10;for(d<u&&(p=u,u=d,d=p,p=l,l=o,o=p);h-- >0;){if(p=Jx(u,d,n),p===m)return a[l]=u,a[o]=d,t(a);if(p>0)u=Math.floor(u/p)*p,d=Math.ceil(d/p)*p;else if(p<0)u=Math.ceil(u*p)/p,d=Math.floor(d*p)/p;else break;m=p}return e},e}function uO(){var e=lb();return e.copy=function(){return nu(e,uO())},Mn.apply(e,arguments),Hi(e)}function dO(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Lf),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return dO(e).unknown(t)},e=arguments.length?Array.from(e,Lf):[0,1],Hi(n)}function fO(e,t){e=e.slice();var n=0,a=e.length-1,l=e[n],o=e[a],u;return o<l&&(u=n,n=a,a=u,u=l,l=o,o=u),e[n]=t.floor(l),e[a]=t.ceil(o),e}function SC(e){return Math.log(e)}function wC(e){return Math.exp(e)}function f$(e){return-Math.log(-e)}function m$(e){return-Math.exp(-e)}function p$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function h$(e){return e===10?p$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function v$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function CC(e){return(t,n)=>-e(-t,n)}function ub(e){const t=e(SC,wC),n=t.domain;let a=10,l,o;function u(){return l=v$(a),o=h$(a),n()[0]<0?(l=CC(l),o=CC(o),e(f$,m$)):e(SC,wC),t}return t.base=function(d){return arguments.length?(a=+d,u()):a},t.domain=function(d){return arguments.length?(n(d),u()):n()},t.ticks=d=>{const m=n();let p=m[0],h=m[m.length-1];const v=h<p;v&&([p,h]=[h,p]);let y=l(p),x=l(h),_,j;const S=d==null?10:+d;let w=[];if(!(a%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),p>0){for(;y<=x;++y)for(_=1;_<a;++_)if(j=y<0?_/o(-y):_*o(y),!(j<p)){if(j>h)break;w.push(j)}}else for(;y<=x;++y)for(_=a-1;_>=1;--_)if(j=y>0?_/o(-y):_*o(y),!(j<p)){if(j>h)break;w.push(j)}w.length*2<S&&(w=Zx(p,h,S))}else w=Zx(y,x,Math.min(x-y,S)).map(o);return v?w.reverse():w},t.tickFormat=(d,m)=>{if(d==null&&(d=10),m==null&&(m=a===10?"s":","),typeof m!="function"&&(!(a%1)&&(m=Bc(m)).precision==null&&(m.trim=!0),m=cb(m)),d===1/0)return m;const p=Math.max(1,a*d/t.ticks().length);return h=>{let v=h/o(Math.round(l(h)));return v*a<a-.5&&(v*=a),v<=p?m(h):""}},t.nice=()=>n(fO(n(),{floor:d=>o(Math.floor(l(d))),ceil:d=>o(Math.ceil(l(d)))})),t}function mO(){const e=ub(Im()).domain([1,10]);return e.copy=()=>nu(e,mO()).base(e.base()),Mn.apply(e,arguments),e}function EC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function AC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function db(e){var t=1,n=e(EC(t),AC(t));return n.constant=function(a){return arguments.length?e(EC(t=+a),AC(t)):t},Hi(n)}function pO(){var e=db(Im());return e.copy=function(){return nu(e,pO()).constant(e.constant())},Mn.apply(e,arguments)}function zC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function g$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function x$(e){return e<0?-e*e:e*e}function fb(e){var t=e(Dr,Dr),n=1;function a(){return n===1?e(Dr,Dr):n===.5?e(g$,x$):e(zC(n),zC(1/n))}return t.exponent=function(l){return arguments.length?(n=+l,a()):n},Hi(t)}function mb(){var e=fb(Im());return e.copy=function(){return nu(e,mb()).exponent(e.exponent())},Mn.apply(e,arguments),e}function y$(){return mb.apply(null,arguments).exponent(.5)}function OC(e){return Math.sign(e)*e*e}function b$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hO(){var e=lb(),t=[0,1],n=!1,a;function l(o){var u=b$(e(o));return isNaN(u)?a:n?Math.round(u):u}return l.invert=function(o){return e.invert(OC(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,Lf)).map(OC)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(n=!!o,l):n},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return hO(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Mn.apply(l,arguments),Hi(l)}function vO(){var e=[],t=[],n=[],a;function l(){var u=0,d=Math.max(1,t.length);for(n=new Array(d-1);++u<d;)n[u-1]=S8(e,u/d);return o}function o(u){return u==null||isNaN(u=+u)?a:t[tu(n,u)]}return o.invertExtent=function(u){var d=t.indexOf(u);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Ri),l()},o.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},o.unknown=function(u){return arguments.length?(a=u,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return vO().domain(e).range(t).unknown(a)},Mn.apply(o,arguments)}function gO(){var e=0,t=1,n=1,a=[.5],l=[0,1],o;function u(m){return m!=null&&m<=m?l[tu(a,m,0,n)]:o}function d(){var m=-1;for(a=new Array(n);++m<n;)a[m]=((m+1)*t-(m-n)*e)/(n+1);return u}return u.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,d()):[e,t]},u.range=function(m){return arguments.length?(n=(l=Array.from(m)).length-1,d()):l.slice()},u.invertExtent=function(m){var p=l.indexOf(m);return p<0?[NaN,NaN]:p<1?[e,a[0]]:p>=n?[a[n-1],t]:[a[p-1],a[p]]},u.unknown=function(m){return arguments.length&&(o=m),u},u.thresholds=function(){return a.slice()},u.copy=function(){return gO().domain([e,t]).range(l).unknown(o)},Mn.apply(Hi(u),arguments)}function xO(){var e=[.5],t=[0,1],n,a=1;function l(o){return o!=null&&o<=o?t[tu(e,o,0,a)]:n}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var u=t.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return xO().domain(e).range(t).unknown(n)},Mn.apply(l,arguments)}const Yg=new Date,Kg=new Date;function tr(e,t,n,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const u=l(o),d=l.ceil(o);return o-u<d-o?u:d},l.offset=(o,u)=>(t(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,d)=>{const m=[];if(o=l.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return m;let p;do m.push(p=new Date(+o)),t(o,d),e(o);while(p<o&&o<u);return m},l.filter=o=>tr(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;t(u,-1),!o(u););else for(;--d>=0;)for(;t(u,1),!o(u););}),n&&(l.count=(o,u)=>(Yg.setTime(+o),Kg.setTime(+u),e(Yg),e(Kg),Math.floor(n(Yg,Kg))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?u=>a(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const Uf=tr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Uf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?tr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Uf);Uf.range;const ka=1e3,En=ka*60,Ta=En*60,Fa=Ta*24,pb=Fa*7,DC=Fa*30,Xg=Fa*365,Ns=tr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getUTCSeconds());Ns.range;const hb=tr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ka)},(e,t)=>{e.setTime(+e+t*En)},(e,t)=>(t-e)/En,e=>e.getMinutes());hb.range;const vb=tr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*En)},(e,t)=>(t-e)/En,e=>e.getUTCMinutes());vb.range;const gb=tr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ka-e.getMinutes()*En)},(e,t)=>{e.setTime(+e+t*Ta)},(e,t)=>(t-e)/Ta,e=>e.getHours());gb.range;const xb=tr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ta)},(e,t)=>(t-e)/Ta,e=>e.getUTCHours());xb.range;const au=tr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*En)/Fa,e=>e.getDate()-1);au.range;const Lm=tr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fa,e=>e.getUTCDate()-1);Lm.range;const yO=tr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fa,e=>Math.floor(e/Fa));yO.range;function Fs(e){return tr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*En)/pb)}const $m=Fs(0),Ff=Fs(1),j$=Fs(2),N$=Fs(3),no=Fs(4),_$=Fs(5),S$=Fs(6);$m.range;Ff.range;j$.range;N$.range;no.range;_$.range;S$.range;function Gs(e){return tr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pb)}const Bm=Gs(0),Gf=Gs(1),w$=Gs(2),C$=Gs(3),ao=Gs(4),E$=Gs(5),A$=Gs(6);Bm.range;Gf.range;w$.range;C$.range;ao.range;E$.range;A$.range;const yb=tr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());yb.range;const bb=tr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());bb.range;const Ga=tr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ga.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:tr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ga.range;const Ha=tr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:tr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ha.range;function bO(e,t,n,a,l,o){const u=[[Ns,1,ka],[Ns,5,5*ka],[Ns,15,15*ka],[Ns,30,30*ka],[o,1,En],[o,5,5*En],[o,15,15*En],[o,30,30*En],[l,1,Ta],[l,3,3*Ta],[l,6,6*Ta],[l,12,12*Ta],[a,1,Fa],[a,2,2*Fa],[n,1,pb],[t,1,DC],[t,3,3*DC],[e,1,Xg]];function d(p,h,v){const y=h<p;y&&([p,h]=[h,p]);const x=v&&typeof v.range=="function"?v:m(p,h,v),_=x?x.range(p,+h+1):[];return y?_.reverse():_}function m(p,h,v){const y=Math.abs(h-p)/v,x=tb(([,,S])=>S).right(u,y);if(x===u.length)return e.every(ey(p/Xg,h/Xg,v));if(x===0)return Uf.every(Math.max(ey(p,h,v),1));const[_,j]=u[y/u[x-1][2]<u[x][2]/y?x-1:x];return _.every(j)}return[d,m]}const[z$,O$]=bO(Ha,bb,Bm,yO,xb,vb),[D$,M$]=bO(Ga,yb,$m,au,gb,hb);function Wg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Zg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function P$(e){var t=e.dateTime,n=e.date,a=e.time,l=e.periods,o=e.days,u=e.shortDays,d=e.months,m=e.shortMonths,p=pc(l),h=hc(l),v=pc(o),y=hc(o),x=pc(u),_=hc(u),j=pc(d),S=hc(d),w=pc(m),A=hc(m),C={a:Z,A:H,b:B,B:I,c:null,d:RC,e:RC,f:rB,g:fB,G:pB,H:J$,I:eB,j:tB,L:jO,m:nB,M:aB,p:pe,q:re,Q:$C,s:BC,S:iB,u:sB,U:lB,V:oB,w:cB,W:uB,x:null,X:null,y:dB,Y:mB,Z:hB,"%":LC},E={a:de,A:ge,b:ye,B:V,c:null,d:IC,e:IC,f:yB,g:zB,G:DB,H:vB,I:gB,j:xB,L:_O,m:bB,M:jB,p:he,q:Pe,Q:$C,s:BC,S:NB,u:_B,U:SB,V:wB,w:CB,W:EB,x:null,X:null,y:AB,Y:OB,Z:MB,"%":LC},O={a:L,A:Q,b:$,B:F,c:Y,d:TC,e:TC,f:K$,g:kC,G:PC,H:qC,I:qC,j:H$,L:Y$,m:G$,M:Q$,p:R,q:F$,Q:W$,s:Z$,S:V$,u:I$,U:L$,V:$$,w:R$,W:B$,x:M,X:q,y:kC,Y:PC,Z:U$,"%":X$};C.x=D(n,C),C.X=D(a,C),C.c=D(t,C),E.x=D(n,E),E.X=D(a,E),E.c=D(t,E);function D(le,W){return function(G){var ce=[],X=-1,je=0,Ue=le.length,Ge,Ye,$t;for(G instanceof Date||(G=new Date(+G));++X<Ue;)le.charCodeAt(X)===37&&(ce.push(le.slice(je,X)),(Ye=MC[Ge=le.charAt(++X)])!=null?Ge=le.charAt(++X):Ye=Ge==="e"?" ":"0",($t=W[Ge])&&(Ge=$t(G,Ye)),ce.push(Ge),je=X+1);return ce.push(le.slice(je,X)),ce.join("")}}function T(le,W){return function(G){var ce=mc(1900,void 0,1),X=k(ce,le,G+="",0),je,Ue;if(X!=G.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(W&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(je=Zg(mc(ce.y,0,1)),Ue=je.getUTCDay(),je=Ue>4||Ue===0?Gf.ceil(je):Gf(je),je=Lm.offset(je,(ce.V-1)*7),ce.y=je.getUTCFullYear(),ce.m=je.getUTCMonth(),ce.d=je.getUTCDate()+(ce.w+6)%7):(je=Wg(mc(ce.y,0,1)),Ue=je.getDay(),je=Ue>4||Ue===0?Ff.ceil(je):Ff(je),je=au.offset(je,(ce.V-1)*7),ce.y=je.getFullYear(),ce.m=je.getMonth(),ce.d=je.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Ue="Z"in ce?Zg(mc(ce.y,0,1)).getUTCDay():Wg(mc(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Ue+5)%7:ce.w+ce.U*7-(Ue+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,Zg(ce)):Wg(ce)}}function k(le,W,G,ce){for(var X=0,je=W.length,Ue=G.length,Ge,Ye;X<je;){if(ce>=Ue)return-1;if(Ge=W.charCodeAt(X++),Ge===37){if(Ge=W.charAt(X++),Ye=O[Ge in MC?W.charAt(X++):Ge],!Ye||(ce=Ye(le,G,ce))<0)return-1}else if(Ge!=G.charCodeAt(ce++))return-1}return ce}function R(le,W,G){var ce=p.exec(W.slice(G));return ce?(le.p=h.get(ce[0].toLowerCase()),G+ce[0].length):-1}function L(le,W,G){var ce=x.exec(W.slice(G));return ce?(le.w=_.get(ce[0].toLowerCase()),G+ce[0].length):-1}function Q(le,W,G){var ce=v.exec(W.slice(G));return ce?(le.w=y.get(ce[0].toLowerCase()),G+ce[0].length):-1}function $(le,W,G){var ce=w.exec(W.slice(G));return ce?(le.m=A.get(ce[0].toLowerCase()),G+ce[0].length):-1}function F(le,W,G){var ce=j.exec(W.slice(G));return ce?(le.m=S.get(ce[0].toLowerCase()),G+ce[0].length):-1}function Y(le,W,G){return k(le,t,W,G)}function M(le,W,G){return k(le,n,W,G)}function q(le,W,G){return k(le,a,W,G)}function Z(le){return u[le.getDay()]}function H(le){return o[le.getDay()]}function B(le){return m[le.getMonth()]}function I(le){return d[le.getMonth()]}function pe(le){return l[+(le.getHours()>=12)]}function re(le){return 1+~~(le.getMonth()/3)}function de(le){return u[le.getUTCDay()]}function ge(le){return o[le.getUTCDay()]}function ye(le){return m[le.getUTCMonth()]}function V(le){return d[le.getUTCMonth()]}function he(le){return l[+(le.getUTCHours()>=12)]}function Pe(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var W=D(le+="",C);return W.toString=function(){return le},W},parse:function(le){var W=T(le+="",!1);return W.toString=function(){return le},W},utcFormat:function(le){var W=D(le+="",E);return W.toString=function(){return le},W},utcParse:function(le){var W=T(le+="",!0);return W.toString=function(){return le},W}}}var MC={"-":"",_:" ",0:"0"},ur=/^\s*\d+/,k$=/^%/,T$=/[\\^$*+?|[\]().{}]/g;function at(e,t,n){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<n?new Array(n-o+1).join(t)+l:l)}function q$(e){return e.replace(T$,"\\$&")}function pc(e){return new RegExp("^(?:"+e.map(q$).join("|")+")","i")}function hc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function R$(e,t,n){var a=ur.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function I$(e,t,n){var a=ur.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function L$(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function $$(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function B$(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function PC(e,t,n){var a=ur.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function kC(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function U$(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function F$(e,t,n){var a=ur.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function G$(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function TC(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function H$(e,t,n){var a=ur.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function qC(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function Q$(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function V$(e,t,n){var a=ur.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function Y$(e,t,n){var a=ur.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function K$(e,t,n){var a=ur.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function X$(e,t,n){var a=k$.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function W$(e,t,n){var a=ur.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function Z$(e,t,n){var a=ur.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function RC(e,t){return at(e.getDate(),t,2)}function J$(e,t){return at(e.getHours(),t,2)}function eB(e,t){return at(e.getHours()%12||12,t,2)}function tB(e,t){return at(1+au.count(Ga(e),e),t,3)}function jO(e,t){return at(e.getMilliseconds(),t,3)}function rB(e,t){return jO(e,t)+"000"}function nB(e,t){return at(e.getMonth()+1,t,2)}function aB(e,t){return at(e.getMinutes(),t,2)}function iB(e,t){return at(e.getSeconds(),t,2)}function sB(e){var t=e.getDay();return t===0?7:t}function lB(e,t){return at($m.count(Ga(e)-1,e),t,2)}function NO(e){var t=e.getDay();return t>=4||t===0?no(e):no.ceil(e)}function oB(e,t){return e=NO(e),at(no.count(Ga(e),e)+(Ga(e).getDay()===4),t,2)}function cB(e){return e.getDay()}function uB(e,t){return at(Ff.count(Ga(e)-1,e),t,2)}function dB(e,t){return at(e.getFullYear()%100,t,2)}function fB(e,t){return e=NO(e),at(e.getFullYear()%100,t,2)}function mB(e,t){return at(e.getFullYear()%1e4,t,4)}function pB(e,t){var n=e.getDay();return e=n>=4||n===0?no(e):no.ceil(e),at(e.getFullYear()%1e4,t,4)}function hB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function IC(e,t){return at(e.getUTCDate(),t,2)}function vB(e,t){return at(e.getUTCHours(),t,2)}function gB(e,t){return at(e.getUTCHours()%12||12,t,2)}function xB(e,t){return at(1+Lm.count(Ha(e),e),t,3)}function _O(e,t){return at(e.getUTCMilliseconds(),t,3)}function yB(e,t){return _O(e,t)+"000"}function bB(e,t){return at(e.getUTCMonth()+1,t,2)}function jB(e,t){return at(e.getUTCMinutes(),t,2)}function NB(e,t){return at(e.getUTCSeconds(),t,2)}function _B(e){var t=e.getUTCDay();return t===0?7:t}function SB(e,t){return at(Bm.count(Ha(e)-1,e),t,2)}function SO(e){var t=e.getUTCDay();return t>=4||t===0?ao(e):ao.ceil(e)}function wB(e,t){return e=SO(e),at(ao.count(Ha(e),e)+(Ha(e).getUTCDay()===4),t,2)}function CB(e){return e.getUTCDay()}function EB(e,t){return at(Gf.count(Ha(e)-1,e),t,2)}function AB(e,t){return at(e.getUTCFullYear()%100,t,2)}function zB(e,t){return e=SO(e),at(e.getUTCFullYear()%100,t,2)}function OB(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function DB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ao(e):ao.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function MB(){return"+0000"}function LC(){return"%"}function $C(e){return+e}function BC(e){return Math.floor(+e/1e3)}var Il,wO,CO;PB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PB(e){return Il=P$(e),wO=Il.format,Il.parse,CO=Il.utcFormat,Il.utcParse,Il}function kB(e){return new Date(e)}function TB(e){return e instanceof Date?+e:+new Date(+e)}function jb(e,t,n,a,l,o,u,d,m,p){var h=lb(),v=h.invert,y=h.domain,x=p(".%L"),_=p(":%S"),j=p("%I:%M"),S=p("%I %p"),w=p("%a %d"),A=p("%b %d"),C=p("%B"),E=p("%Y");function O(D){return(m(D)<D?x:d(D)<D?_:u(D)<D?j:o(D)<D?S:a(D)<D?l(D)<D?w:A:n(D)<D?C:E)(D)}return h.invert=function(D){return new Date(v(D))},h.domain=function(D){return arguments.length?y(Array.from(D,TB)):y().map(kB)},h.ticks=function(D){var T=y();return e(T[0],T[T.length-1],D??10)},h.tickFormat=function(D,T){return T==null?O:p(T)},h.nice=function(D){var T=y();return(!D||typeof D.range!="function")&&(D=t(T[0],T[T.length-1],D??10)),D?y(fO(T,D)):h},h.copy=function(){return nu(h,jb(e,t,n,a,l,o,u,d,m,p))},h}function qB(){return Mn.apply(jb(D$,M$,Ga,yb,$m,au,gb,hb,Ns,wO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RB(){return Mn.apply(jb(z$,O$,Ha,bb,Bm,Lm,xb,vb,Ns,CO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Um(){var e=0,t=1,n,a,l,o,u=Dr,d=!1,m;function p(v){return v==null||isNaN(v=+v)?m:u(l===0?.5:(v=(o(v)-n)*l,d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),a=o(t=+t),l=n===a?0:1/(a-n),p):[e,t]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function h(v){return function(y){var x,_;return arguments.length?([x,_]=y,u=v(x,_),p):[u(0),u(1)]}}return p.range=h(io),p.rangeRound=h(sb),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return o=v,n=v(e),a=v(t),l=n===a?0:1/(a-n),p}}function Qi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function EO(){var e=Hi(Um()(Dr));return e.copy=function(){return Qi(e,EO())},ei.apply(e,arguments)}function AO(){var e=ub(Um()).domain([1,10]);return e.copy=function(){return Qi(e,AO()).base(e.base())},ei.apply(e,arguments)}function zO(){var e=db(Um());return e.copy=function(){return Qi(e,zO()).constant(e.constant())},ei.apply(e,arguments)}function Nb(){var e=fb(Um());return e.copy=function(){return Qi(e,Nb()).exponent(e.exponent())},ei.apply(e,arguments)}function IB(){return Nb.apply(null,arguments).exponent(.5)}function OO(){var e=[],t=Dr;function n(a){if(a!=null&&!isNaN(a=+a))return t((tu(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ri),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,l)=>t(l/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(l,o)=>_8(e,o/a))},n.copy=function(){return OO(t).domain(e)},ei.apply(n,arguments)}function Fm(){var e=0,t=.5,n=1,a=1,l,o,u,d,m,p=Dr,h,v=!1,y;function x(j){return isNaN(j=+j)?y:(j=.5+((j=+h(j))-o)*(a*j<a*o?d:m),p(v?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,n]=j,l=h(e=+e),o=h(t=+t),u=h(n=+n),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,x):[e,t,n]},x.clamp=function(j){return arguments.length?(v=!!j,x):v},x.interpolator=function(j){return arguments.length?(p=j,x):p};function _(j){return function(S){var w,A,C;return arguments.length?([w,A,C]=S,p=X8(j,[w,A,C]),x):[p(0),p(.5),p(1)]}}return x.range=_(io),x.rangeRound=_(sb),x.unknown=function(j){return arguments.length?(y=j,x):y},function(j){return h=j,l=j(e),o=j(t),u=j(n),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,x}}function DO(){var e=Hi(Fm()(Dr));return e.copy=function(){return Qi(e,DO())},ei.apply(e,arguments)}function MO(){var e=ub(Fm()).domain([.1,1,10]);return e.copy=function(){return Qi(e,MO()).base(e.base())},ei.apply(e,arguments)}function PO(){var e=db(Fm());return e.copy=function(){return Qi(e,PO()).constant(e.constant())},ei.apply(e,arguments)}function _b(){var e=fb(Fm());return e.copy=function(){return Qi(e,_b()).exponent(e.exponent())},ei.apply(e,arguments)}function LB(){return _b.apply(null,arguments).exponent(.5)}const Nc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nb,scaleDiverging:DO,scaleDivergingLog:MO,scaleDivergingPow:_b,scaleDivergingSqrt:LB,scaleDivergingSymlog:PO,scaleIdentity:dO,scaleImplicit:ty,scaleLinear:uO,scaleLog:mO,scaleOrdinal:rb,scalePoint:C8,scalePow:mb,scaleQuantile:vO,scaleQuantize:gO,scaleRadial:hO,scaleSequential:EO,scaleSequentialLog:AO,scaleSequentialPow:Nb,scaleSequentialQuantile:OO,scaleSequentialSqrt:IB,scaleSequentialSymlog:zO,scaleSqrt:y$,scaleSymlog:pO,scaleThreshold:xO,scaleTime:qB,scaleUtc:RB,tickFormat:cO},Symbol.toStringTag,{value:"Module"}));var ti=e=>e.chartData,kO=oe([ti],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Sb=(e,t,n,a)=>a?kO(e):ti(e),$B=(e,t,n)=>n?kO(e):ti(e);function Qa(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(tt(t)&&tt(n))return!0}return!1}function UC(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function TO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,l,o;if(tt(n))l=n;else if(typeof n=="function")return;if(tt(a))o=a;else if(typeof a=="function")return;var u=[l,o];if(Qa(u))return u}}function BB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(Qa(a))return UC(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,d;if(l==="auto")t!=null&&(u=Math.min(...t));else if(Ae(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&JS.test(l)){var m=JS.exec(l);if(m==null||m[1]==null||t==null)u=void 0;else{var p=+m[1];u=t[0]-p}}else u=t?.[0];if(o==="auto")t!=null&&(d=Math.max(...t));else if(Ae(o))d=o;else if(typeof o=="function")try{t!=null&&(d=o(t?.[1]))}catch{}else if(typeof o=="string"&&ew.test(o)){var h=ew.exec(o);if(h==null||h[1]==null||t==null)d=void 0;else{var v=+h[1];d=t[1]+v}}else d=t?.[1];var y=[u,d];if(Qa(y))return t==null?y:UC(y,t,n)}}}var so=1e9,UB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Cb,Ot=!0,On="[DecimalError] ",zs=On+"Invalid argument: ",wb=On+"Exponent out of range: ",lo=Math.floor,ys=Math.pow,FB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,nn,lr=1e7,Et=7,qO=9007199254740991,Hf=lo(qO/Et),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,n,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,t=0,n=a<l?a:l;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Et;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ce.dividedBy=Ce.div=function(e){return Ia(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,n=t.constructor;return Nt(Ia(t,new n(e),0,1),n.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return Wt(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,n=this,a=n.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(nn))throw Error(On+"NaN");if(n.s<1)throw Error(On+(n.s?"NaN":"-Infinity"));return n.eq(nn)?new a(0):(Ot=!1,t=Ia(Uc(n,o),Uc(e,o),o),Ot=!0,Nt(t,l))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LO(t,e):RO(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,n=this,a=n.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(On+"NaN");return n.s?(Ot=!1,t=Ia(n,e,0,1).times(e),Ot=!0,n.minus(t)):Nt(new a(n),l)};Ce.naturalExponential=Ce.exp=function(){return IO(this)};Ce.naturalLogarithm=Ce.ln=function(){return Uc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RO(t,e):LO(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,n,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(zs+e);if(t=Wt(l)+1,a=l.d.length-1,n=a*Et+1,a=l.d[a],a){for(;a%10==0;a/=10)n--;for(a=l.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};Ce.squareRoot=Ce.sqrt=function(){var e,t,n,a,l,o,u,d=this,m=d.constructor;if(d.s<1){if(!d.s)return new m(0);throw Error(On+"NaN")}for(e=Wt(d),Ot=!1,l=Math.sqrt(+d),l==0||l==1/0?(t=sa(d.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=lo((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new m(t)):a=new m(l.toString()),n=m.precision,l=u=n+3;;)if(o=a,a=o.plus(Ia(d,o,u+2)).times(.5),sa(o.d).slice(0,u)===(t=sa(a.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(Nt(o,n+1,0),o.times(o).eq(d)){a=o;break}}else if(t!="9999")break;u+=4}return Ot=!0,Nt(a,n)};Ce.times=Ce.mul=function(e){var t,n,a,l,o,u,d,m,p,h=this,v=h.constructor,y=h.d,x=(e=new v(e)).d;if(!h.s||!e.s)return new v(0);for(e.s*=h.s,n=h.e+e.e,m=y.length,p=x.length,m<p&&(o=y,y=x,x=o,u=m,m=p,p=u),o=[],u=m+p,a=u;a--;)o.push(0);for(a=p;--a>=0;){for(t=0,l=m+a;l>a;)d=o[l]+x[a]*y[l-a-1]+t,o[l--]=d%lr|0,t=d/lr|0;o[l]=(o[l]+t)%lr|0}for(;!o[--u];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,Ot?Nt(e,v.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(da(e,0,so),t===void 0?t=a.rounding:da(t,0,8),Nt(n,e+Wt(n)+1,t))};Ce.toExponential=function(e,t){var n,a=this,l=a.constructor;return e===void 0?n=Ts(a,!0):(da(e,0,so),t===void 0?t=l.rounding:da(t,0,8),a=Nt(new l(a),e+1,t),n=Ts(a,!0,e+1)),n};Ce.toFixed=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?Ts(l):(da(e,0,so),t===void 0?t=o.rounding:da(t,0,8),a=Nt(new o(l),e+Wt(l)+1,t),n=Ts(a.abs(),!1,e+Wt(a)+1),l.isneg()&&!l.isZero()?"-"+n:n)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return Nt(new t(e),Wt(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,n,a,l,o,u,d=this,m=d.constructor,p=12,h=+(e=new m(e));if(!e.s)return new m(nn);if(d=new m(d),!d.s){if(e.s<1)throw Error(On+"Infinity");return d}if(d.eq(nn))return d;if(a=m.precision,e.eq(nn))return Nt(d,a);if(t=e.e,n=e.d.length-1,u=t>=n,o=d.s,u){if((n=h<0?-h:h)<=qO){for(l=new m(nn),t=Math.ceil(a/Et+4),Ot=!1;n%2&&(l=l.times(d),GC(l.d,t)),n=lo(n/2),n!==0;)d=d.times(d),GC(d.d,t);return Ot=!0,e.s<0?new m(nn).div(l):Nt(l,a)}}else if(o<0)throw Error(On+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,Ot=!1,l=e.times(Uc(d,a+p)),Ot=!0,l=IO(l),l.s=o,l};Ce.toPrecision=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?(n=Wt(l),a=Ts(l,n<=o.toExpNeg||n>=o.toExpPos)):(da(e,1,so),t===void 0?t=o.rounding:da(t,0,8),l=Nt(new o(l),e,t),n=Wt(l),a=Ts(l,e<=n||n<=o.toExpNeg,e)),a};Ce.toSignificantDigits=Ce.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(da(e,1,so),t===void 0?t=a.rounding:da(t,0,8)),Nt(new a(n),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Wt(e),n=e.constructor;return Ts(e,t<=n.toExpNeg||t>=n.toExpPos)};function RO(e,t){var n,a,l,o,u,d,m,p,h=e.constructor,v=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Ot?Nt(t,v):t;if(m=e.d,p=t.d,u=e.e,l=t.e,m=m.slice(),o=u-l,o){for(o<0?(a=m,o=-o,d=p.length):(a=p,l=u,d=m.length),u=Math.ceil(v/Et),d=u>d?u+1:d+1,o>d&&(o=d,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(d=m.length,o=p.length,d-o<0&&(o=d,a=p,p=m,m=a),n=0;o;)n=(m[--o]=m[o]+p[o]+n)/lr|0,m[o]%=lr;for(n&&(m.unshift(n),++l),d=m.length;m[--d]==0;)m.pop();return t.d=m,t.e=l,Ot?Nt(t,v):t}function da(e,t,n){if(e!==~~e||e<t||e>n)throw Error(zs+e)}function sa(e){var t,n,a,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,t=1;t<l;t++)a=e[t]+"",n=Et-a.length,n&&(o+=Mi(n)),o+=a;u=e[t],a=u+"",n=Et-a.length,n&&(o+=Mi(n))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var Ia=(function(){function e(a,l){var o,u=0,d=a.length;for(a=a.slice();d--;)o=a[d]*l+u,a[d]=o%lr|0,u=o/lr|0;return u&&a.unshift(u),a}function t(a,l,o,u){var d,m;if(o!=u)m=o>u?1:-1;else for(d=m=0;d<o;d++)if(a[d]!=l[d]){m=a[d]>l[d]?1:-1;break}return m}function n(a,l,o){for(var u=0;o--;)a[o]-=u,u=a[o]<l[o]?1:0,a[o]=u*lr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,u){var d,m,p,h,v,y,x,_,j,S,w,A,C,E,O,D,T,k,R=a.constructor,L=a.s==l.s?1:-1,Q=a.d,$=l.d;if(!a.s)return new R(a);if(!l.s)throw Error(On+"Division by zero");for(m=a.e-l.e,T=$.length,O=Q.length,x=new R(L),_=x.d=[],p=0;$[p]==(Q[p]||0);)++p;if($[p]>(Q[p]||0)&&--m,o==null?A=o=R.precision:u?A=o+(Wt(a)-Wt(l))+1:A=o,A<0)return new R(0);if(A=A/Et+2|0,p=0,T==1)for(h=0,$=$[0],A++;(p<O||h)&&A--;p++)C=h*lr+(Q[p]||0),_[p]=C/$|0,h=C%$|0;else{for(h=lr/($[0]+1)|0,h>1&&($=e($,h),Q=e(Q,h),T=$.length,O=Q.length),E=T,j=Q.slice(0,T),S=j.length;S<T;)j[S++]=0;k=$.slice(),k.unshift(0),D=$[0],$[1]>=lr/2&&++D;do h=0,d=t($,j,T,S),d<0?(w=j[0],T!=S&&(w=w*lr+(j[1]||0)),h=w/D|0,h>1?(h>=lr&&(h=lr-1),v=e($,h),y=v.length,S=j.length,d=t(v,j,y,S),d==1&&(h--,n(v,T<y?k:$,y))):(h==0&&(d=h=1),v=$.slice()),y=v.length,y<S&&v.unshift(0),n(j,v,S),d==-1&&(S=j.length,d=t($,j,T,S),d<1&&(h++,n(j,T<S?k:$,S))),S=j.length):d===0&&(h++,j=[0]),_[p++]=h,d&&j[0]?j[S++]=Q[E]||0:(j=[Q[E]],S=1);while((E++<O||j[0]!==void 0)&&A--)}return _[0]||_.shift(),x.e=m,Nt(x,u?o+Wt(x)+1:o)}})();function IO(e,t){var n,a,l,o,u,d,m=0,p=0,h=e.constructor,v=h.precision;if(Wt(e)>16)throw Error(wb+Wt(e));if(!e.s)return new h(nn);for(Ot=!1,d=v,u=new h(.03125);e.abs().gte(.1);)e=e.times(u),p+=5;for(a=Math.log(ys(2,p))/Math.LN10*2+5|0,d+=a,n=l=o=new h(nn),h.precision=d;;){if(l=Nt(l.times(e),d),n=n.times(++m),u=o.plus(Ia(l,n,d)),sa(u.d).slice(0,d)===sa(o.d).slice(0,d)){for(;p--;)o=Nt(o.times(o),d);return h.precision=v,t==null?(Ot=!0,Nt(o,v)):o}o=u}}function Wt(e){for(var t=e.e*Et,n=e.d[0];n>=10;n/=10)t++;return t}function Jg(e,t,n){if(t>e.LN10.sd())throw Ot=!0,n&&(e.precision=n),Error(On+"LN10 precision limit exceeded");return Nt(new e(e.LN10),t)}function Mi(e){for(var t="";e--;)t+="0";return t}function Uc(e,t){var n,a,l,o,u,d,m,p,h,v=1,y=10,x=e,_=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(On+(x.s?"NaN":"-Infinity"));if(x.eq(nn))return new j(0);if(t==null?(Ot=!1,p=S):p=t,x.eq(10))return t==null&&(Ot=!0),Jg(j,p);if(p+=y,j.precision=p,n=sa(_),a=n.charAt(0),o=Wt(x),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(e),n=sa(x.d),a=n.charAt(0),v++;o=Wt(x),a>1?(x=new j("0."+n),o++):x=new j(a+"."+n.slice(1))}else return m=Jg(j,p+2,S).times(o+""),x=Uc(new j(a+"."+n.slice(1)),p-y).plus(m),j.precision=S,t==null?(Ot=!0,Nt(x,S)):x;for(d=u=x=Ia(x.minus(nn),x.plus(nn),p),h=Nt(x.times(x),p),l=3;;){if(u=Nt(u.times(h),p),m=d.plus(Ia(u,new j(l),p)),sa(m.d).slice(0,p)===sa(d.d).slice(0,p))return d=d.times(2),o!==0&&(d=d.plus(Jg(j,p+2,S).times(o+""))),d=Ia(d,new j(v),p),j.precision=S,t==null?(Ot=!0,Nt(d,S)):d;d=m,l+=2}}function FC(e,t){var n,a,l;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(a,l),t){if(l-=a,n=n-a-1,e.e=lo(n/Et),e.d=[],a=(n+1)%Et,n<0&&(a+=Et),a<l){for(a&&e.d.push(+t.slice(0,a)),l-=Et;a<l;)e.d.push(+t.slice(a,a+=Et));t=t.slice(a),a=Et-t.length}else a-=l;for(;a--;)t+="0";if(e.d.push(+t),Ot&&(e.e>Hf||e.e<-Hf))throw Error(wb+n)}else e.s=0,e.e=0,e.d=[0];return e}function Nt(e,t,n){var a,l,o,u,d,m,p,h,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(a=t-u,a<0)a+=Et,l=t,p=v[h=0];else{if(h=Math.ceil((a+1)/Et),o=v.length,h>=o)return e;for(p=o=v[h],u=1;o>=10;o/=10)u++;a%=Et,l=a-Et+u}if(n!==void 0&&(o=ys(10,u-l-1),d=p/o%10|0,m=t<0||v[h+1]!==void 0||p%o,m=n<4?(d||m)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||m||n==6&&(a>0?l>0?p/ys(10,u-l):0:v[h-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return m?(o=Wt(e),v.length=1,t=t-o-1,v[0]=ys(10,(Et-t%Et)%Et),e.e=lo(-t/Et)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(a==0?(v.length=h,o=1,h--):(v.length=h+1,o=ys(10,Et-a),v[h]=l>0?(p/ys(10,u-l)%ys(10,l)|0)*o:0),m)for(;;)if(h==0){(v[0]+=o)==lr&&(v[0]=1,++e.e);break}else{if(v[h]+=o,v[h]!=lr)break;v[h--]=0,o=1}for(a=v.length;v[--a]===0;)v.pop();if(Ot&&(e.e>Hf||e.e<-Hf))throw Error(wb+Wt(e));return e}function LO(e,t){var n,a,l,o,u,d,m,p,h,v,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Ot?Nt(t,x):t;if(m=e.d,v=t.d,a=t.e,p=e.e,m=m.slice(),u=p-a,u){for(h=u<0,h?(n=m,u=-u,d=v.length):(n=v,a=p,d=m.length),l=Math.max(Math.ceil(x/Et),d)+2,u>l&&(u=l,n.length=1),n.reverse(),l=u;l--;)n.push(0);n.reverse()}else{for(l=m.length,d=v.length,h=l<d,h&&(d=l),l=0;l<d;l++)if(m[l]!=v[l]){h=m[l]<v[l];break}u=0}for(h&&(n=m,m=v,v=n,t.s=-t.s),d=m.length,l=v.length-d;l>0;--l)m[d++]=0;for(l=v.length;l>u;){if(m[--l]<v[l]){for(o=l;o&&m[--o]===0;)m[o]=lr-1;--m[o],m[l]+=lr}m[l]-=v[l]}for(;m[--d]===0;)m.pop();for(;m[0]===0;m.shift())--a;return m[0]?(t.d=m,t.e=a,Ot?Nt(t,x):t):new y(0)}function Ts(e,t,n){var a,l=Wt(e),o=sa(e.d),u=o.length;return t?(n&&(a=n-u)>0?o=o.charAt(0)+"."+o.slice(1)+Mi(a):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+Mi(-l-1)+o,n&&(a=n-u)>0&&(o+=Mi(a))):l>=u?(o+=Mi(l+1-u),n&&(a=n-l-1)>0&&(o=o+"."+Mi(a))):((a=l+1)<u&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-u)>0&&(l+1===u&&(o+="."),o+=Mi(a))),e.s<0?"-"+o:o}function GC(e,t){if(e.length>t)return e.length=t,!0}function $O(e){var t,n,a;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(zs+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return FC(u,o.toString())}else if(typeof o!="string")throw Error(zs+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,FB.test(o))FC(u,o);else throw Error(zs+o)}if(l.prototype=Ce,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=$O,l.config=l.set=GB,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return l.config(e),l}function GB(e){if(!e||typeof e!="object")throw Error(On+"Object expected");var t,n,a,l=["precision",1,so,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((a=e[n=l[t]])!==void 0)if(lo(a)===a&&a>=l[t+1]&&a<=l[t+2])this[n]=a;else throw Error(zs+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(zs+n+": "+a);return this}var Cb=$O(UB);nn=new Cb(1);const dt=Cb;function BO(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function UO(e,t,n){for(var a=new dt(e),l=0,o=[];a.lt(t)&&l<1e5;)o.push(a.toNumber()),a=a.add(n),l++;return o}var FO=e=>{var[t,n]=e,[a,l]=[t,n];return t>n&&([a,l]=[n,t]),[a,l]},GO=(e,t,n)=>{if(e.lte(0))return new dt(0);var a=BO(e.toNumber()),l=new dt(10).pow(a),o=e.div(l),u=a!==1?.05:.1,d=new dt(Math.ceil(o.div(u).toNumber())).add(n).mul(u),m=d.mul(l);return t?new dt(m.toNumber()):new dt(Math.ceil(m.toNumber()))},HB=(e,t,n)=>{var a=new dt(1),l=new dt(e);if(!l.isint()&&n){var o=Math.abs(e);o<1?(a=new dt(10).pow(BO(e)-1),l=new dt(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new dt(Math.floor(e)))}else e===0?l=new dt(Math.floor((t-1)/2)):n||(l=new dt(Math.floor(e)));for(var u=Math.floor((t-1)/2),d=[],m=0;m<t;m++)d.push(l.add(new dt(m-u).mul(a)).toNumber());return d},HO=function(t,n,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var u=GO(new dt(n).sub(t).div(a-1),l,o),d;t<=0&&n>=0?d=new dt(0):(d=new dt(t).add(n).div(2),d=d.sub(new dt(d).mod(u)));var m=Math.ceil(d.sub(t).div(u).toNumber()),p=Math.ceil(new dt(n).sub(d).div(u).toNumber()),h=m+p+1;return h>a?HO(t,n,a,l,o+1):(h<a&&(p=n>0?p+(a-h):p,m=n>0?m:m+(a-h)),{step:u,tickMin:d.sub(new dt(m).mul(u)),tickMax:d.add(new dt(p).mul(u))})},QB=function(t){var[n,a]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[d,m]=FO([n,a]);if(d===-1/0||m===1/0){var p=m===1/0?[d,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),m];return n>a?p.reverse():p}if(d===m)return HB(d,l,o);var{step:h,tickMin:v,tickMax:y}=HO(d,m,u,o,0),x=UO(v,y.add(new dt(.1).mul(h)),h);return n>a?x.reverse():x},VB=function(t,n){var[a,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=FO([a,l]);if(u===-1/0||d===1/0)return[a,l];if(u===d)return[u];var m=Math.max(n,2),p=GO(new dt(d).sub(u).div(m-1),o,0),h=[...UO(new dt(u),new dt(d),p),d];return o===!1&&(h=h.map(v=>Math.round(v))),a>l?h.reverse():h},QO=e=>e.rootProps.maxBarSize,YB=e=>e.rootProps.barGap,VO=e=>e.rootProps.barCategoryGap,KB=e=>e.rootProps.barSize,Gm=e=>e.rootProps.stackOffset,YO=e=>e.rootProps.reverseStackOrder,Eb=e=>e.options.chartName,Ab=e=>e.rootProps.syncId,KO=e=>e.rootProps.syncMethod,zb=e=>e.options.eventEmitter,or={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},hs={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},ra={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Hm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Qm(e,t,n){if(n!=="auto")return n;if(e!=null)return Wa(e,t)?"category":"number"}function HC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(n),!0).forEach(function(a){XB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XB(e,t,n){return(t=WB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WB(e){var t=ZB(e,"string");return typeof t=="symbol"?t:t+""}function ZB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QC={allowDataOverflow:hs.allowDataOverflow,allowDecimals:hs.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:hs.angleAxisId,includeHidden:!1,name:void 0,reversed:hs.reversed,scale:hs.scale,tick:hs.tick,tickCount:void 0,ticks:void 0,type:hs.type,unit:void 0},VC={allowDataOverflow:ra.allowDataOverflow,allowDecimals:ra.allowDecimals,allowDuplicatedCategory:ra.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ra.radiusAxisId,includeHidden:ra.includeHidden,name:void 0,reversed:ra.reversed,scale:ra.scale,tick:ra.tick,tickCount:ra.tickCount,ticks:void 0,type:ra.type,unit:void 0},JB=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},Ob=oe([JB,qz],(e,t)=>{var n;if(e!=null)return e;var a=(n=Qm(t,"angleAxis",QC.type))!==null&&n!==void 0?n:"category";return Qf(Qf({},QC),{},{type:a})}),e7=(e,t)=>e.polarAxis.radiusAxis[t],Db=oe([e7,qz],(e,t)=>{var n;if(e!=null)return e;var a=(n=Qm(t,"radiusAxis",VC.type))!==null&&n!==void 0?n:"category";return Qf(Qf({},VC),{},{type:a})}),Vm=e=>e.polarOptions,Mb=oe([Za,Ja,cr],WL),XO=oe([Vm,Mb],(e,t)=>{if(e!=null)return Fn(e.innerRadius,t,0)}),WO=oe([Vm,Mb],(e,t)=>{if(e!=null)return Fn(e.outerRadius,t,t*.8)}),t7=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},ZO=oe([Vm],t7);oe([Ob,ZO],Hm);var JO=oe([Mb,XO,WO],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});oe([Db,JO],Hm);var eD=oe([ft,Vm,XO,WO,Za,Ja],(e,t,n,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:u,cy:d,startAngle:m,endAngle:p}=t;return{cx:Fn(u,l,l/2),cy:Fn(d,o,o/2),innerRadius:n,outerRadius:a,startAngle:m,endAngle:p,clockWise:!1}}}),dr=(e,t)=>t,Ym=(e,t,n)=>n;function Pb(e){return e?.id}function tD(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=n,u=new Map;return e.forEach(d=>{var m,p=(m=d.data)!==null&&m!==void 0?m:a;if(!(p==null||p.length===0)){var h=Pb(d);p.forEach((v,y)=>{var x=o==null||l?y:String(Xt(v,o,null)),_=Xt(v,d.dataKey,0),j;u.has(x)?j=u.get(x):j={},Object.assign(j,{[h]:_}),u.set(x,j)})}}),Array.from(u.values())}function Km(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Xm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Wm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function r7(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var fr=e=>{var t=ft(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},oo=e=>e.tooltip.settings.axisId;function n7(e){if(e in Nc)return Nc[e]();var t="scale".concat(Kc(e));if(t in Nc)return Nc[t]()}function YC(e){var t=e.ticks,n=e.bandwidth,a=e.range(),l=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(o){function u(){return o.apply(this,arguments)}return u.toString=function(){return o.toString()},u})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var u=l[0],d=l[1];return u<=d?o>=u&&o<=d:o>=d&&o<=u},bandwidth:n?()=>n.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,u)=>{var d=e(o);if(d!=null){if(e.bandwidth&&u!==null&&u!==void 0&&u.position){var m=e.bandwidth();switch(u.position){case"middle":d+=m/2;break;case"end":d+=m;break}}return d}}}}function KC(e,t,n){if(typeof e=="function")return YC(e.copy().domain(t).range(n));if(e!=null){var a=n7(e);if(a!=null)return a.domain(t).range(n),YC(a)}}var a7=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Qa(t)){for(var n,a,l=0;l<t.length;l++){var o=t[l];tt(o)&&((n===void 0||o<n)&&(n=o),(a===void 0||o>a)&&(a=o))}return n!==void 0&&a!==void 0?[n,a]:void 0}return t}default:return t}};function XC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(n),!0).forEach(function(a){i7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function i7(e,t,n){return(t=s7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s7(e){var t=l7(e,"string");return typeof t=="symbol"?t:t+""}function l7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iy=[0,"auto"],ir={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},rD=(e,t)=>e.cartesianAxis.xAxis[t],ri=(e,t)=>{var n=rD(e,t);return n??ir},sr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iy,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Zc},nD=(e,t)=>e.cartesianAxis.yAxis[t],ni=(e,t)=>{var n=nD(e,t);return n??sr},o7={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},kb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??o7},Tr=(e,t,n)=>{switch(t){case"xAxis":return ri(e,n);case"yAxis":return ni(e,n);case"zAxis":return kb(e,n);case"angleAxis":return Ob(e,n);case"radiusAxis":return Db(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},c7=(e,t,n)=>{switch(t){case"xAxis":return ri(e,n);case"yAxis":return ni(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},iu=(e,t,n)=>{switch(t){case"xAxis":return ri(e,n);case"yAxis":return ni(e,n);case"angleAxis":return Ob(e,n);case"radiusAxis":return Db(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},aD=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function iD(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Zm=e=>e.graphicalItems.cartesianItems,u7=oe([dr,Ym],iD),sD=(e,t,n)=>e.filter(n).filter(a=>t?.includeHidden===!0?!0:!a.hide),su=oe([Zm,Tr,u7],sD,{memoizeOptions:{resultEqualityCheck:Wm}}),lD=oe([su],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Km)),oD=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),d7=oe([su],oD),cD=e=>e.map(t=>t.data).filter(Boolean).flat(1),f7=oe([su],cD,{memoizeOptions:{resultEqualityCheck:Wm}}),uD=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:l}=t;return e.length>0?e:n.slice(a,l+1)},Tb=oe([f7,Sb],uD),dD=(e,t,n)=>t?.dataKey!=null?e.map(a=>({value:Xt(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:Xt(l,a)}))):e.map(a=>({value:a})),Jm=oe([Tb,Tr,su],dD);function fD(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function rf(e){if(ca(e)||e instanceof Date){var t=Number(e);if(tt(t))return t}}function WC(e){if(Array.isArray(e)){var t=[rf(e[0]),rf(e[1])];return Qa(t)?t:void 0}var n=rf(e);if(n!=null)return[n,n]}function Va(e){return e.map(rf).filter(Hr)}function m7(e,t,n){return!n||typeof t!="number"||oa(t)?[]:n.length?Va(n.flatMap(a=>{var l=Xt(e,a.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!tt(o)||!tt(u)))return[t-o,t+u]})):[]}var rr=e=>{var t=fr(e),n=oo(e);return iu(e,t,n)},lu=oe([rr],e=>e?.dataKey),p7=oe([lD,Sb,rr],tD),mD=(e,t,n,a)=>{var l={},o=t.reduce((u,d)=>{if(d.stackId==null)return u;var m=u[d.stackId];return m==null&&(m=[]),m.push(d),u[d.stackId]=m,u},l);return Object.fromEntries(Object.entries(o).map(u=>{var[d,m]=u,p=a?[...m].reverse():m,h=p.map(Pb);return[d,{stackedData:U6(e,h,n),graphicalItems:p}]}))},sy=oe([p7,lD,Gm,YO],mD),pD=(e,t,n,a)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(a==null&&n!=="zAxis"){var u=V6(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},h7=oe([Tr],e=>e.allowDataOverflow),qb=e=>{var t;if(e==null||!("domain"in e))return iy;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Va(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:iy},hD=oe([Tr],qb),vD=oe([hD,h7],TO),v7=oe([sy,ti,dr,vD],pD,{memoizeOptions:{resultEqualityCheck:Xm}}),Rb=e=>e.errorBars,g7=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>fD(n,a)),Yf=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=n.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),d=Math.max(...o);return[u,d]}},gD=(e,t,n,a,l)=>{var o,u;if(n.length>0&&e.forEach(d=>{n.forEach(m=>{var p,h,v=(p=a[m.id])===null||p===void 0?void 0:p.filter(w=>fD(l,w)),y=Xt(d,(h=t.dataKey)!==null&&h!==void 0?h:m.dataKey),x=m7(d,y,v);if(x.length>=2){var _=Math.min(...x),j=Math.max(...x);(o==null||_<o)&&(o=_),(u==null||j>u)&&(u=j)}var S=WC(y);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),u=u==null?S[1]:Math.max(u,S[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var m=WC(Xt(d,t.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),u=u==null?m[1]:Math.max(u,m[1]))}),tt(o)&&tt(u))return[o,u]},x7=oe([Tb,Tr,d7,Rb,dr],gD,{memoizeOptions:{resultEqualityCheck:Xm}});function y7(e){var{value:t}=e;if(ca(t)||t instanceof Date)return t}var b7=(e,t,n)=>{var a=e.map(y7).filter(l=>l!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&P2(a))?eO(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},xD=e=>e.referenceElements.dots,co=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),j7=oe([xD,dr,Ym],co),yD=e=>e.referenceElements.areas,N7=oe([yD,dr,Ym],co),bD=e=>e.referenceElements.lines,_7=oe([bD,dr,Ym],co),jD=(e,t)=>{if(e!=null){var n=Va(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},S7=oe(j7,dr,jD),ND=(e,t)=>{if(e!=null){var n=Va(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},w7=oe([N7,dr],ND);function C7(e){var t;if(e.x!=null)return Va([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return n==null||n.length===0?[]:Va(n)}function E7(e){var t;if(e.y!=null)return Va([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return n==null||n.length===0?[]:Va(n)}var _D=(e,t)=>{if(e!=null){var n=e.flatMap(a=>t==="xAxis"?C7(a):E7(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},A7=oe([_7,dr],_D),z7=oe(S7,A7,w7,(e,t,n)=>Yf(e,n,t)),SD=(e,t,n,a,l,o,u,d)=>{if(n!=null)return n;var m=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",p=m?Yf(a,o,l):Yf(o,l);return BB(t,p,e.allowDataOverflow)},O7=oe([Tr,hD,vD,v7,x7,z7,ft,dr],SD,{memoizeOptions:{resultEqualityCheck:Xm}}),D7=[0,1],wD=(e,t,n,a,l,o,u)=>{if(!((e==null||n==null||n.length===0)&&u===void 0)){var{dataKey:d,type:m}=e,p=Wa(t,o);if(p&&d==null){var h;return eO(0,(h=n?.length)!==null&&h!==void 0?h:0)}return m==="category"?b7(a,e,p):l==="expand"?D7:u}},Ib=oe([Tr,ft,Tb,Jm,Gm,dr,O7],wD);function M7(e){return e in Nc}var CD=(e,t,n)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(Kc(a));return M7(o)?o:"point"}}},uo=oe([Tr,aD,Eb],CD);function Lb(e,t,n,a){if(!(n==null||a==null))return typeof e.scale=="function"?KC(e.scale,n,a):KC(t,n,a)}var ED=(e,t,n)=>{var a=qb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Qa(e))return QB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Qa(e))return VB(e,t.tickCount,t.allowDecimals)}},$b=oe([Ib,iu,uo],ED),AD=(e,t,n,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Qa(t)&&Array.isArray(n)&&n.length>0){var l,o,u=t[0],d=(l=n[0])!==null&&l!==void 0?l:0,m=t[1],p=(o=n[n.length-1])!==null&&o!==void 0?o:0;return[Math.min(u,d),Math.max(m,p)]}return t},P7=oe([Tr,Ib,$b,dr],AD),k7=oe(Jm,Tr,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(Va(e.map(v=>v.value))).sort((v,y)=>v-y),l=a[0],o=a[a.length-1];if(l==null||o==null)return 1/0;var u=o-l;if(u===0)return 1/0;for(var d=0;d<a.length-1;d++){var m=a[d],p=a[d+1];if(!(m==null||p==null)){var h=p-m;n=Math.min(n,h)}}return n/u}}),zD=oe(k7,ft,VO,cr,(e,t,n,a,l)=>l,(e,t,n,a,l)=>{if(!tt(e))return 0;var o=t==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=Fn(n,e*o),d=e*o/2;return d-u-(d-u)/o*u}return 0}),T7=(e,t,n)=>{var a=ri(e,t);return a==null||typeof a.padding!="string"?0:zD(e,"xAxis",t,n,a.padding)},q7=(e,t,n)=>{var a=ni(e,t);return a==null||typeof a.padding!="string"?0:zD(e,"yAxis",t,n,a.padding)},R7=oe(ri,T7,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((n=l.left)!==null&&n!==void 0?n:0)+t,right:((a=l.right)!==null&&a!==void 0?a:0)+t}}),I7=oe(ni,q7,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((n=l.top)!==null&&n!==void 0?n:0)+t,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+t}}),L7=oe([cr,R7,Om,zm,(e,t,n)=>n],(e,t,n,a,l)=>{var{padding:o}=a;return l?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),$7=oe([cr,ft,I7,Om,zm,(e,t,n)=>n],(e,t,n,a,l,o)=>{var{padding:u}=l;return o?[a.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),ou=(e,t,n,a)=>{var l;switch(t){case"xAxis":return L7(e,n,a);case"yAxis":return $7(e,n,a);case"zAxis":return(l=kb(e,n))===null||l===void 0?void 0:l.range;case"angleAxis":return ZO(e);case"radiusAxis":return JO(e,n);default:return}},OD=oe([Tr,ou],Hm),B7=oe([uo,P7],a7),ep=oe([Tr,uo,B7,OD],Lb);oe([su,Rb,dr],g7);function DD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var tp=(e,t)=>t,rp=(e,t,n)=>n,U7=oe(Em,tp,rp,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(DD)),F7=oe(Am,tp,rp,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(DD)),MD=(e,t)=>({width:e.width,height:t.height}),G7=(e,t)=>{var n=typeof t.width=="number"?t.width:Zc;return{width:n,height:e.height}},PD=oe(cr,ri,MD),H7=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Q7=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},V7=oe(Ja,cr,U7,tp,rp,(e,t,n,a,l)=>{var o={},u;return n.forEach(d=>{var m=MD(t,d);u==null&&(u=H7(t,a,e));var p=a==="top"&&!l||a==="bottom"&&l;o[d.id]=u-Number(p)*m.height,u+=(p?-1:1)*m.height}),o}),Y7=oe(Za,cr,F7,tp,rp,(e,t,n,a,l)=>{var o={},u;return n.forEach(d=>{var m=G7(t,d);u==null&&(u=Q7(t,a,e));var p=a==="left"&&!l||a==="right"&&l;o[d.id]=u-Number(p)*m.width,u+=(p?-1:1)*m.width}),o}),K7=(e,t)=>{var n=ri(e,t);if(n!=null)return V7(e,n.orientation,n.mirror)},X7=oe([cr,ri,K7,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),W7=(e,t)=>{var n=ni(e,t);if(n!=null)return Y7(e,n.orientation,n.mirror)},Z7=oe([cr,ni,W7,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),kD=oe(cr,ni,(e,t)=>{var n=typeof t.width=="number"?t.width:Zc;return{width:n,height:e.height}}),ZC=(e,t,n)=>{switch(t){case"xAxis":return PD(e,n).width;case"yAxis":return kD(e,n).height;default:return}},TD=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=n,d=Wa(e,a),m=t.map(p=>p.value);if(u&&d&&o==="category"&&l&&P2(m))return m}},Bb=oe([ft,Jm,Tr,dr],TD),qD=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:o}=n,u=Wa(e,a);if(u&&(l==="number"||o!=="auto"))return t.map(d=>d.value)}},Ub=oe([ft,Jm,iu,dr],qD),JC=oe([ft,c7,uo,ep,Bb,Ub,ou,$b,dr],(e,t,n,a,l,o,u,d,m)=>{if(t!=null){var p=Wa(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:o,duplicateDomain:l,isCategorical:p,niceTicks:d,range:u,realScaleType:n,scale:a}}}),J7=(e,t,n,a,l,o,u,d,m)=>{if(!(t==null||a==null)){var p=Wa(e,m),{type:h,ticks:v,tickCount:y}=t,x=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,_=h==="category"&&a.bandwidth?a.bandwidth()/x:0;_=m==="angleAxis"&&o!=null&&o.length>=2?Gr(o[0]-o[1])*2*_:_;var j=v||l;return j?j.map((S,w)=>{var A=u?u.indexOf(S):S,C=a.map(A);return tt(C)?{index:w,coordinate:C+_,value:S,offset:_}:null}).filter(Hr):p&&d?d.map((S,w)=>{var A=a.map(S);return tt(A)?{coordinate:A+_,value:S,index:w,offset:_}:null}).filter(Hr):a.ticks?a.ticks(y).map((S,w)=>{var A=a.map(S);return tt(A)?{coordinate:A+_,value:S,index:w,offset:_}:null}).filter(Hr):a.domain().map((S,w)=>{var A=a.map(S);return tt(A)?{coordinate:A+_,value:u?u[S]:S,index:w,offset:_}:null}).filter(Hr)}},RD=oe([ft,iu,uo,ep,$b,ou,Bb,Ub,dr],J7),e9=(e,t,n,a,l,o,u)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var d=Wa(e,u),{tickCount:m}=t,p=0;return p=u==="angleAxis"&&a?.length>=2?Gr(a[0]-a[1])*2*p:p,d&&o?o.map((h,v)=>{var y=n.map(h);return tt(y)?{coordinate:y+p,value:h,index:v,offset:p}:null}).filter(Hr):n.ticks?n.ticks(m).map((h,v)=>{var y=n.map(h);return tt(y)?{coordinate:y+p,value:h,index:v,offset:p}:null}).filter(Hr):n.domain().map((h,v)=>{var y=n.map(h);return tt(y)?{coordinate:y+p,value:l?l[h]:h,index:v,offset:p}:null}).filter(Hr)}},Fi=oe([ft,iu,ep,ou,Bb,Ub,dr],e9),Gi=oe(Tr,ep,(e,t)=>{if(!(e==null||t==null))return Vf(Vf({},e),{},{scale:t})}),t9=oe([Tr,uo,Ib,OD],Lb);oe((e,t,n)=>kb(e,n),t9,(e,t)=>{if(!(e==null||t==null))return Vf(Vf({},e),{},{scale:t})});var r9=oe([ft,Em,Am],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ID=e=>e.options.defaultTooltipEventType,LD=e=>e.options.validateTooltipEventTypes;function $D(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function Fb(e,t){var n=ID(e),a=LD(e);return $D(t,n,a)}function n9(e){return ke(t=>Fb(t,e))}var BD=(e,t)=>{var n,a=Number(t);if(!(oa(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},a9=e=>e.tooltip.settings,ki={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},i9={itemInteraction:{click:ki,hover:ki},axisInteraction:{click:ki,hover:ki},keyboardInteraction:ki,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},UD=Kr({name:"tooltip",initialState:i9,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:zt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,l=Bn(e).tooltipItemPayloads.indexOf(n);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:zt()},removeTooltipEntrySettings:{reducer(e,t){var n=Bn(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:zt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:s9,replaceTooltipEntrySettings:l9,removeTooltipEntrySettings:o9,setTooltipSettingsState:c9,setActiveMouseOverItemIndex:FD,mouseLeaveItem:u9,mouseLeaveChart:GD,setActiveClickItemIndex:d9,setMouseOverAxisIndex:HD,setMouseClickAxisIndex:f9,setSyncInteraction:ly,setKeyboardInteraction:oy}=UD.actions,m9=UD.reducer;function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(n),!0).forEach(function(a){p9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function p9(e,t,n){return(t=h9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h9(e){var t=v9(e,"string");return typeof t=="symbol"?t:t+""}function v9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g9(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function x9(e){return e.index!=null}var QD=(e,t,n,a)=>{if(t==null)return ki;var l=g9(e,t,n);if(l==null)return ki;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(x9(l)){if(o)return Ud(Ud({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Ud(Ud({},ki),{},{coordinate:l.coordinate})};function y9(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function b9(e,t){var n=y9(e),a=t[0],l=t[1];if(n===void 0)return!1;var o=Math.min(a,l),u=Math.max(a,l);return n>=o&&n<=u}function j9(e,t,n){if(n==null||t==null)return!0;var a=Xt(e,t);return a==null||!Qa(n)?!0:b9(a,n)}var Gb=(e,t,n,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!tt(o))return l;var u=0,d=1/0;t.length>0&&(d=t.length-1);var m=Math.max(u,Math.min(o,d)),p=t[m];return p==null||j9(p,n,a)?String(m):null},VD=(e,t,n,a,l,o,u)=>{if(o!=null){var d=u[0],m=d?.getPosition(o);if(m!=null)return m;var p=l?.[Number(o)];if(p)return n==="horizontal"?{x:p.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:p.coordinate}}},YD=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(n==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(u=>{var d;return((d=u.settings)===null||d===void 0?void 0:d.graphicalItemId)===l})},KD=e=>e.options.tooltipPayloadSearcher,fo=e=>e.tooltip;function tE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function rE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tE(Object(n),!0).forEach(function(a){N9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function N9(e,t,n){return(t=_9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _9(e){var t=S9(e,"string");return typeof t=="symbol"?t:t+""}function S9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w9(e,t){return e??t}var XD=(e,t,n,a,l,o,u)=>{if(!(t==null||o==null)){var{chartData:d,computedData:m,dataStartIndex:p,dataEndIndex:h}=n,v=[];return e.reduce((y,x)=>{var _,{dataDefinedOnItem:j,settings:S}=x,w=w9(j,d),A=Array.isArray(w)?wz(w,p,h):w,C=(_=S?.dataKey)!==null&&_!==void 0?_:a,E=S?.nameKey,O;if(a&&Array.isArray(A)&&!Array.isArray(A[0])&&u==="axis"?O=k2(A,a,l):O=o(A,t,m,E),Array.isArray(O))O.forEach(T=>{var k=rE(rE({},S),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});y.push(tw({tooltipEntrySettings:k,dataKey:T.dataKey,payload:T.payload,value:Xt(T.payload,T.dataKey),name:T.name}))});else{var D;y.push(tw({tooltipEntrySettings:S,dataKey:C,payload:O,value:Xt(O,C),name:(D=Xt(O,E))!==null&&D!==void 0?D:S?.name}))}return y},v)}},Hb=oe([rr,aD,Eb],CD),C9=oe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),E9=oe([fr,oo],iD),mo=oe([C9,rr,E9],sD,{memoizeOptions:{resultEqualityCheck:Wm}}),A9=oe([mo],e=>e.filter(Km)),z9=oe([mo],cD,{memoizeOptions:{resultEqualityCheck:Wm}}),po=oe([z9,ti],uD),O9=oe([A9,ti,rr],tD),Qb=oe([po,rr,mo],dD),WD=oe([rr],qb),D9=oe([rr],e=>e.allowDataOverflow),ZD=oe([WD,D9],TO),M9=oe([mo],e=>e.filter(Km)),P9=oe([O9,M9,Gm,YO],mD),k9=oe([P9,ti,fr,ZD],pD),T9=oe([mo],oD),q9=oe([po,rr,T9,Rb,fr],gD,{memoizeOptions:{resultEqualityCheck:Xm}}),R9=oe([xD,fr,oo],co),I9=oe([R9,fr],jD),L9=oe([yD,fr,oo],co),$9=oe([L9,fr],ND),B9=oe([bD,fr,oo],co),U9=oe([B9,fr],_D),F9=oe([I9,U9,$9],Yf),G9=oe([rr,WD,ZD,k9,q9,F9,ft,fr],SD),cu=oe([rr,ft,po,Qb,Gm,fr,G9],wD),H9=oe([cu,rr,Hb],ED),Q9=oe([rr,cu,H9,fr],AD),JD=e=>{var t=fr(e),n=oo(e),a=!1;return ou(e,t,n,a)},eM=oe([rr,JD],Hm),tM=oe([rr,Hb,Q9,eM],Lb),V9=oe([ft,Qb,rr,fr],TD),Y9=oe([ft,Qb,rr,fr],qD),K9=(e,t,n,a,l,o,u,d)=>{if(t){var{type:m}=t,p=Wa(e,d);if(a){var h=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,v=m==="category"&&a.bandwidth?a.bandwidth()/h:0;return v=d==="angleAxis"&&l!=null&&l?.length>=2?Gr(l[0]-l[1])*2*v:v,p&&u?u.map((y,x)=>{var _=a.map(y);return tt(_)?{coordinate:_+v,value:y,index:x,offset:v}:null}).filter(Hr):a.domain().map((y,x)=>{var _=a.map(y);return tt(_)?{coordinate:_+v,value:o?o[y]:y,index:x,offset:v}:null}).filter(Hr)}}},ai=oe([ft,rr,Hb,tM,JD,V9,Y9,fr],K9),Vb=oe([ID,LD,a9],(e,t,n)=>$D(n.shared,e,t)),rM=e=>e.tooltip.settings.trigger,Yb=e=>e.tooltip.settings.defaultIndex,uu=oe([fo,Vb,rM,Yb],QD),qs=oe([uu,po,lu,cu],Gb),nM=oe([ai,qs],BD),aM=oe([uu],e=>{if(e)return e.dataKey});oe([uu],e=>{if(e)return e.graphicalItemId});var iM=oe([fo,Vb,rM,Yb],YD),X9=oe([Za,Ja,ft,cr,ai,Yb,iM],VD),W9=oe([uu,X9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Z9=oe([uu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),J9=oe([iM,qs,ti,lu,nM,KD,Vb],XD),eU=oe([J9],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function nE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function aE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nE(Object(n),!0).forEach(function(a){tU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tU(e,t,n){return(t=rU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rU(e){var t=nU(e,"string");return typeof t=="symbol"?t:t+""}function nU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aU=()=>ke(rr),iU=()=>{var e=aU(),t=ke(ai),n=ke(tM);return eo(!e||!n?void 0:aE(aE({},e),{},{scale:n}),t)};function iE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(n),!0).forEach(function(a){sU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sU(e,t,n){return(t=lU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lU(e){var t=oU(e,"string");return typeof t=="symbol"?t:t+""}function oU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cU=(e,t,n,a)=>{var l=t.find(o=>o&&o.index===n);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},uU=(e,t,n,a)=>{var l=t.find(p=>p&&p.index===n);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=a;return Ll(Ll(Ll({},a),br(a.cx,a.cy,u,o)),{},{angle:o,radius:u})}var d=l.coordinate,{angle:m}=a;return Ll(Ll(Ll({},a),br(a.cx,a.cy,d,m)),{},{angle:m,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function dU(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var sM=(e,t,n,a,l)=>{var o,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var d=0;d<u;d++){var m,p,h,v,y,x=d>0?(m=n[d-1])===null||m===void 0?void 0:m.coordinate:(p=n[u-1])===null||p===void 0?void 0:p.coordinate,_=(h=n[d])===null||h===void 0?void 0:h.coordinate,j=d>=u-1?(v=n[0])===null||v===void 0?void 0:v.coordinate:(y=n[d+1])===null||y===void 0?void 0:y.coordinate,S=void 0;if(!(x==null||_==null||j==null))if(Gr(_-x)!==Gr(j-_)){var w=[];if(Gr(j-_)===Gr(l[1]-l[0])){S=j;var A=_+l[1]-l[0];w[0]=Math.min(A,(A+x)/2),w[1]=Math.max(A,(A+x)/2)}else{S=x;var C=j+l[1]-l[0];w[0]=Math.min(_,(C+_)/2),w[1]=Math.max(_,(C+_)/2)}var E=[Math.min(_,(S+_)/2),Math.max(_,(S+_)/2)];if(e>E[0]&&e<=E[1]||e>=w[0]&&e<=w[1]){var O;return(O=n[d])===null||O===void 0?void 0:O.index}}else{var D=Math.min(x,j),T=Math.max(x,j);if(e>(D+_)/2&&e<=(T+_)/2){var k;return(k=n[d])===null||k===void 0?void 0:k.index}}}else if(t)for(var R=0;R<u;R++){var L=t[R];if(L!=null){var Q=t[R+1],$=t[R-1];if(R===0&&Q!=null&&e<=(L.coordinate+Q.coordinate)/2||R===u-1&&$!=null&&e>(L.coordinate+$.coordinate)/2||R>0&&R<u-1&&$!=null&&Q!=null&&e>(L.coordinate+$.coordinate)/2&&e<=(L.coordinate+Q.coordinate)/2)return L.index}}return-1},fU=()=>ke(Eb),Kb=(e,t)=>t,lM=(e,t,n)=>n,Xb=(e,t,n,a)=>a,mU=oe(ai,e=>vm(e,t=>t.coordinate)),Wb=oe([fo,Kb,lM,Xb],QD),Zb=oe([Wb,po,lu,cu],Gb),pU=(e,t,n)=>{if(t!=null){var a=fo(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},oM=oe([fo,Kb,lM,Xb],YD),Kf=oe([Za,Ja,ft,cr,ai,Xb,oM],VD),hU=oe([Wb,Kf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),cM=oe([ai,Zb],BD),vU=oe([oM,Zb,ti,lu,cM,KD,Kb],XD),gU=oe([Wb,Zb],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),xU=(e,t,n,a,l,o,u)=>{if(!(!e||!n||!a||!l)&&dU(e,u)){var d=Y6(e,t),m=sM(d,o,l,n,a),p=cU(t,l,m,e);return{activeIndex:String(m),activeCoordinate:p}}},yU=(e,t,n,a,l,o,u)=>{if(!(!e||!a||!l||!o||!n)){var d=r8(e,n);if(d){var m=K6(d,t),p=sM(m,u,o,a,l),h=uU(t,o,p,d);return{activeIndex:String(p),activeCoordinate:h}}}},bU=(e,t,n,a,l,o,u,d)=>{if(!(!e||!t||!a||!l||!o))return t==="horizontal"||t==="vertical"?xU(e,t,a,l,o,u,d):yU(e,t,n,a,l,o,u)},jU=oe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var a=e[t];if(a!=null)return n?a.panoramaElement:a.element}}),NU=oe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(or)),n=Array.from(new Set(t));return n.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:r7}});function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function lE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(a){_U(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _U(e,t,n){return(t=SU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SU(e){var t=wU(e,"string");return typeof t=="symbol"?t:t+""}function wU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CU={},EU={zIndexMap:Object.values(or).reduce((e,t)=>lE(lE({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),CU)},AU=new Set(Object.values(or));function zU(e){return AU.has(e)}var uM=Kr({name:"zIndex",initialState:EU,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:zt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!zU(n)&&delete e.zIndexMap[n])},prepare:zt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:a,isPanorama:l}=t.payload;e.zIndexMap[n]?l?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:l?void 0:a,panoramaElement:l?a:void 0}},prepare:zt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:zt()}}}),{registerZIndexPortal:OU,unregisterZIndexPortal:DU,registerZIndexPortalElement:MU,unregisterZIndexPortalElement:PU}=uM.actions,kU=uM.reducer;function Pn(e){var{zIndex:t,children:n}=e,a=E4(),l=a&&t!==void 0&&t!==0,o=Cr(),u=Ft();g.useLayoutEffect(()=>l?(u(OU({zIndex:t})),()=>{u(DU({zIndex:t}))}):Bs,[u,t,l]);var d=ke(m=>jU(m,t,o));return l?d?QA.createPortal(n,d):null:n}function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cy.apply(null,arguments)}function oE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oE(Object(n),!0).forEach(function(a){TU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TU(e,t,n){return(t=qU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qU(e){var t=RU(e,"string");return typeof t=="symbol"?t:t+""}function RU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IU(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return g.isValidElement(t)?g.cloneElement(t,a):g.createElement(n,a)}function LU(e){var t,{coordinate:n,payload:a,index:l,offset:o,tooltipAxisBandSize:u,layout:d,cursor:m,tooltipEventType:p,chartName:h}=e,v=n,y=a,x=l;if(!m||!v||h!=="ScatterChart"&&p!=="axis")return null;var _,j,S;if(h==="ScatterChart")_=v,j=hL,S=or.cursorLine;else if(h==="BarChart")_=vL(d,v,o,u),j=Xz,S=or.cursorRectangle;else if(d==="radial"&&R2(v)){var{cx:w,cy:A,radius:C,startAngle:E,endAngle:O}=Wz(v);_={cx:w,cy:A,startAngle:E,endAngle:O,innerRadius:C,outerRadius:C},j=Jz,S=or.cursorLine}else _={points:s8(d,v,o)},j=Hz,S=or.cursorLine;var D=typeof m=="object"&&"className"in m?m.className:void 0,T=Fd(Fd(Fd(Fd({stroke:"#ccc",pointerEvents:"none"},o),_),Yc(m)),{},{payload:y,payloadIndex:x,className:yt("recharts-tooltip-cursor",D)});return g.createElement(Pn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},g.createElement(IU,{cursor:m,cursorComp:j,cursorProps:T}))}function $U(e){var t=iU(),n=Mz(),a=Us(),l=fU();return t==null||n==null||a==null||l==null?null:g.createElement(LU,cy({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:l}))}var dM=g.createContext(null),BU=()=>g.useContext(dM),ex={exports:{}},cE;function UU(){return cE||(cE=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function l(m,p,h){this.fn=m,this.context=p,this.once=h||!1}function o(m,p,h,v,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new l(h,v||m,y),_=n?n+p:p;return m._events[_]?m._events[_].fn?m._events[_]=[m._events[_],x]:m._events[_].push(x):(m._events[_]=x,m._eventsCount++),m}function u(m,p){--m._eventsCount===0?m._events=new a:delete m._events[p]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],h,v;if(this._eventsCount===0)return p;for(v in h=this._events)t.call(h,v)&&p.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},d.prototype.listeners=function(p){var h=n?n+p:p,v=this._events[h];if(!v)return[];if(v.fn)return[v.fn];for(var y=0,x=v.length,_=new Array(x);y<x;y++)_[y]=v[y].fn;return _},d.prototype.listenerCount=function(p){var h=n?n+p:p,v=this._events[h];return v?v.fn?1:v.length:0},d.prototype.emit=function(p,h,v,y,x,_){var j=n?n+p:p;if(!this._events[j])return!1;var S=this._events[j],w=arguments.length,A,C;if(S.fn){switch(S.once&&this.removeListener(p,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,v),!0;case 4:return S.fn.call(S.context,h,v,y),!0;case 5:return S.fn.call(S.context,h,v,y,x),!0;case 6:return S.fn.call(S.context,h,v,y,x,_),!0}for(C=1,A=new Array(w-1);C<w;C++)A[C-1]=arguments[C];S.fn.apply(S.context,A)}else{var E=S.length,O;for(C=0;C<E;C++)switch(S[C].once&&this.removeListener(p,S[C].fn,void 0,!0),w){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,h);break;case 3:S[C].fn.call(S[C].context,h,v);break;case 4:S[C].fn.call(S[C].context,h,v,y);break;default:if(!A)for(O=1,A=new Array(w-1);O<w;O++)A[O-1]=arguments[O];S[C].fn.apply(S[C].context,A)}}return!0},d.prototype.on=function(p,h,v){return o(this,p,h,v,!1)},d.prototype.once=function(p,h,v){return o(this,p,h,v,!0)},d.prototype.removeListener=function(p,h,v,y){var x=n?n+p:p;if(!this._events[x])return this;if(!h)return u(this,x),this;var _=this._events[x];if(_.fn)_.fn===h&&(!y||_.once)&&(!v||_.context===v)&&u(this,x);else{for(var j=0,S=[],w=_.length;j<w;j++)(_[j].fn!==h||y&&!_[j].once||v&&_[j].context!==v)&&S.push(_[j]);S.length?this._events[x]=S.length===1?S[0]:S:u(this,x)}return this},d.prototype.removeAllListeners=function(p){var h;return p?(h=n?n+p:p,this._events[h]&&u(this,h)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(ex)),ex.exports}var FU=UU();const GU=Ka(FU);var Fc=new GU,uy="recharts.syncEvent.tooltip",uE="recharts.syncEvent.brush",fM=(e,t)=>{if(t&&Array.isArray(e)){var n=Number.parseInt(t,10);if(!oa(n))return e[n]}},HU={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},mM=Kr({name:"options",initialState:HU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),QU=mM.reducer,{createEventEmitter:VU}=mM.actions;function YU(e){return e.tooltip.syncInteraction}var KU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},pM=Kr({name:"chartData",initialState:KU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:dE,setDataStartEndIndexes:XU,setComputedData:UJ}=pM.actions,WU=pM.reducer,ZU=["x","y"];function fE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function $l(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(n),!0).forEach(function(a){JU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JU(e,t,n){return(t=eF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rF(e,t){if(e==null)return{};var n,a,l=nF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function nF(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function aF(){var e=ke(Ab),t=ke(zb),n=Ft(),a=ke(KO),l=ke(ai),o=Us(),u=Dm(),d=ke(m=>m.rootProps.className);g.useEffect(()=>{if(e==null)return Bs;var m=(p,h,v)=>{if(t!==v&&e===p){if(a==="index"){var y;if(u&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate&&h.payload.sourceViewBox){var x=h.payload.coordinate,{x:_,y:j}=x,S=rF(x,ZU),{x:w,y:A,width:C,height:E}=h.payload.sourceViewBox,O=$l($l({},S),{},{x:u.x+(C?(_-w)/C:0)*u.width,y:u.y+(E?(j-A)/E:0)*u.height});n($l($l({},h),{},{payload:$l($l({},h.payload),{},{coordinate:O})}))}else n(h);return}if(l!=null){var D;if(typeof a=="function"){var T={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},k=a(l,T);D=l[k]}else a==="value"&&(D=l.find(q=>String(q.value)===h.payload.label));var{coordinate:R}=h.payload;if(D==null||h.payload.active===!1||R==null||u==null){n(ly({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:Q}=R,$=Math.min(L,u.x+u.width),F=Math.min(Q,u.y+u.height),Y={x:o==="horizontal"?D.coordinate:$,y:o==="horizontal"?F:D.coordinate},M=ly({active:h.payload.active,coordinate:Y,dataKey:h.payload.dataKey,index:String(D.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(M)}}};return Fc.on(uy,m),()=>{Fc.off(uy,m)}},[d,n,t,e,a,l,o,u])}function iF(){var e=ke(Ab),t=ke(zb),n=Ft();g.useEffect(()=>{if(e==null)return Bs;var a=(l,o,u)=>{t!==u&&e===l&&n(XU(o))};return Fc.on(uE,a),()=>{Fc.off(uE,a)}},[n,t,e])}function sF(){var e=Ft();g.useEffect(()=>{e(VU())},[e]),aF(),iF()}function lF(e,t,n,a,l,o){var u=ke(x=>pU(x,e,t)),d=ke(zb),m=ke(Ab),p=ke(KO),h=ke(YU),v=h?.active,y=Dm();g.useEffect(()=>{if(!v&&m!=null&&d!=null){var x=ly({active:o,coordinate:n,dataKey:u,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:y,graphicalItemId:void 0});Fc.emit(uy,m,x,d)}},[v,n,u,l,a,d,m,p,o,y])}function mE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function pE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(n),!0).forEach(function(a){oF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function oF(e,t,n){return(t=cF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cF(e){var t=uF(e,"string");return typeof t=="symbol"?t:t+""}function uF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dF(e){return e.dataKey}function fF(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(Y4,t)}var hE=[],mF={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vE(e){var t,n,a=kr(e,mF),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:m,filterNull:p,isAnimationActive:h,offset:v,payloadUniqBy:y,position:x,reverseDirection:_,useTranslate3d:j,wrapperStyle:S,cursor:w,shared:A,trigger:C,defaultIndex:E,portal:O,axisId:D}=a,T=Ft(),k=typeof E=="number"?String(E):E;g.useEffect(()=>{T(c9({shared:A,trigger:C,axisId:D,active:l,defaultIndex:k}))},[T,A,C,D,l,k]);var R=Dm(),L=Gz(),Q=n9(A),{activeIndex:$,isActive:F}=(t=ke(he=>gU(he,Q,C,k)))!==null&&t!==void 0?t:{},Y=ke(he=>vU(he,Q,C,k)),M=ke(he=>cM(he,Q,C,k)),q=ke(he=>hU(he,Q,C,k)),Z=Y,H=BU(),B=(n=l??F)!==null&&n!==void 0?n:!1,[I,pe]=PI([Z,B]),re=Q==="axis"?M:void 0;lF(Q,C,q,re,$,B);var de=O??H;if(de==null||R==null||Q==null)return null;var ge=Z??hE;B||(ge=hE),p&&ge.length&&(ge=iI(ge.filter(he=>he.value!=null&&(he.hide!==!0||a.includeHidden)),y,dF));var ye=ge.length>0,V=g.createElement(tL,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:h,active:B,coordinate:q,hasPayload:ye,offset:v,position:x,reverseDirection:_,useTranslate3d:j,viewBox:R,wrapperStyle:S,lastBoundingBox:I,innerRef:pe,hasPortalFromProps:!!O},fF(m,pE(pE({},a),{},{payload:ge,label:re,active:B,activeIndex:$,coordinate:q,accessibilityLayer:L})));return g.createElement(g.Fragment,null,QA.createPortal(V,de),B&&g.createElement($U,{cursor:w,tooltipEventType:Q,coordinate:q,payload:ge,index:$}))}var Jb=e=>null;Jb.displayName="Cell";function pF(e,t,n){return(t=hF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hF(e){var t=vF(e,"string");return typeof t=="symbol"?t:t+""}function vF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gF{constructor(t){pF(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function xF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(n),!0).forEach(function(a){yF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yF(e,t,n){return(t=bF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bF(e){var t=jF(e,"string");return typeof t=="symbol"?t:t+""}function jF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NF={cacheSize:2e3,enableCache:!0},hM=xF({},NF),xE=new gF(hM.cacheSize),_F={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},yE="recharts_measurement_span";function SF(e,t){var n=t.fontSize||"",a=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",u=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(d)}var bE=(e,t)=>{try{var n=document.getElementById(yE);n||(n=document.createElement("span"),n.setAttribute("id",yE),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,_F,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},Cc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tm.isSsr)return{width:0,height:0};if(!hM.enableCache)return bE(t,n);var a=SF(t,n),l=xE.get(a);if(l)return l;var o=bE(t,n);return xE.set(a,o),o},vM;function wF(e,t,n){return(t=CF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CF(e){var t=EF(e,"string");return typeof t=="symbol"?t:t+""}function EF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},DF=["cm","mm","pt","pc","in","Q","px"];function MF(e){return DF.includes(e)}var Ql="NaN";function PF(e,t){return e*OF[t]}class yr{static parse(t){var n,[,a,l]=(n=zF.exec(t))!==null&&n!==void 0?n:[];return a==null?yr.NaN:new yr(parseFloat(a),l??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,oa(t)&&(this.unit=""),n!==""&&!AF.test(n)&&(this.num=NaN,this.unit=""),MF(n)&&(this.num=PF(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new yr(NaN,""):new yr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new yr(NaN,""):new yr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new yr(NaN,""):new yr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new yr(NaN,""):new yr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return oa(this.num)}}vM=yr;wF(yr,"NaN",new vM(NaN,""));function gM(e){if(e==null||e.includes(Ql))return Ql;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,l,o]=(n=jE.exec(t))!==null&&n!==void 0?n:[],u=yr.parse(a??""),d=yr.parse(o??""),m=l==="*"?u.multiply(d):u.divide(d);if(m.isNaN())return Ql;t=t.replace(jE,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,h,v,y]=(p=NE.exec(t))!==null&&p!==void 0?p:[],x=yr.parse(h??""),_=yr.parse(y??""),j=v==="+"?x.add(_):x.subtract(_);if(j.isNaN())return Ql;t=t.replace(NE,j.toString())}return t}var _E=/\(([^()]*)\)/;function kF(e){for(var t=e,n;(n=_E.exec(t))!=null;){var[,a]=n;t=t.replace(_E,gM(a))}return t}function TF(e){var t=e.replace(/\s+/g,"");return t=kF(t),t=gM(t),t}function qF(e){try{return TF(e)}catch{return Ql}}function tx(e){var t=qF(e.slice(5,-1));return t===Ql?"":t}var RF=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],IF=["dx","dy","angle","className","breakAll"];function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dy.apply(null,arguments)}function SE(e,t){if(e==null)return{};var n,a,l=LF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function LF(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var xM=/[ \f\n\r\t\v\u2028\u2029]+/,yM=e=>{var{children:t,breakAll:n,style:a}=e;try{var l=[];Mt(t)||(n?l=t.toString().split(""):l=t.toString().split(xM));var o=l.map(d=>({word:d,width:Cc(d,a).width})),u=n?0:Cc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function $F(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var bM=(e,t,n,a)=>e.reduce((l,o)=>{var{word:u,width:d}=o,m=l[l.length-1];if(m&&d!=null&&(t==null||a||m.width+d+n<Number(t)))m.words.push(u),m.width+=d+n;else{var p={words:[u],width:d};l.push(p)}return l},[]),jM=e=>e.reduce((t,n)=>t.width>n.width?t:n),BF="",wE=(e,t,n,a,l,o,u,d)=>{var m=e.slice(0,t),p=yM({breakAll:n,style:a,children:m+BF});if(!p)return[!1,[]];var h=bM(p.wordsWithComputedWidth,o,u,d),v=h.length>l||jM(h).width>Number(o);return[v,h]},UF=(e,t,n,a,l)=>{var{maxLines:o,children:u,style:d,breakAll:m}=e,p=Ae(o),h=String(u),v=bM(t,a,n,l);if(!p||l)return v;var y=v.length>o||jM(v).width>Number(a);if(!y)return v;for(var x=0,_=h.length-1,j=0,S;x<=_&&j<=h.length-1;){var w=Math.floor((x+_)/2),A=w-1,[C,E]=wE(h,A,m,d,o,a,n,l),[O]=wE(h,w,m,d,o,a,n,l);if(!C&&!O&&(x=w+1),C&&O&&(_=w-1),!C&&O){S=E;break}j++}return S||v},CE=e=>{var t=Mt(e)?[]:e.toString().split(xM);return[{words:t,width:void 0}]},FF=e=>{var{width:t,scaleToFit:n,children:a,style:l,breakAll:o,maxLines:u}=e;if((t||n)&&!Tm.isSsr){var d,m,p=yM({breakAll:o,children:a,style:l});if(p){var{wordsWithComputedWidth:h,spaceWidth:v}=p;d=h,m=v}else return CE(a);return UF({breakAll:o,children:a,maxLines:u,style:l},d,m,t,!!n)}return CE(a)},NM="#808080",GF={angle:0,breakAll:!1,capHeight:"0.71em",fill:NM,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ej=g.forwardRef((e,t)=>{var n=kr(e,GF),{x:a,y:l,lineHeight:o,capHeight:u,fill:d,scaleToFit:m,textAnchor:p,verticalAnchor:h}=n,v=SE(n,RF),y=g.useMemo(()=>FF({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:x,dy:_,angle:j,className:S,breakAll:w}=v,A=SE(v,IF);if(!ca(a)||!ca(l)||y.length===0)return null;var C=Number(a)+(Ae(x)?x:0),E=Number(l)+(Ae(_)?_:0);if(!tt(C)||!tt(E))return null;var O;switch(h){case"start":O=tx("calc(".concat(u,")"));break;case"middle":O=tx("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:O=tx("calc(".concat(y.length-1," * -").concat(o,")"));break}var D=[],T=y[0];if(m&&T!=null){var k=T.width,{width:R}=v;D.push("scale(".concat(Ae(R)&&Ae(k)?R/k:1,")"))}return j&&D.push("rotate(".concat(j,", ").concat(C,", ").concat(E,")")),D.length&&(A.transform=D.join(" ")),g.createElement("text",dy({},Mr(A),{ref:t,x:C,y:E,className:yt("recharts-text",S),textAnchor:p,fill:d.includes("url")?NM:d}),y.map((L,Q)=>{var $=L.words.join(w?"":" ");return g.createElement("tspan",{x:C,dy:Q===0?O:o,key:"".concat($,"-").concat(Q)},$)}))});ej.displayName="Text";function EE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(n),!0).forEach(function(a){HF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function HF(e,t,n){return(t=QF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QF(e){var t=VF(e,"string");return typeof t=="symbol"?t:t+""}function VF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YF=e=>{var{viewBox:t,position:n,offset:a=0,parentViewBox:l}=e,{x:o,y:u,height:d,upperWidth:m,lowerWidth:p}=Zy(t),h=o,v=o+(m-p)/2,y=(h+v)/2,x=(m+p)/2,_=h+m/2,j=d>=0?1:-1,S=j*a,w=j>0?"end":"start",A=j>0?"start":"end",C=m>=0?1:-1,E=C*a,O=C>0?"end":"start",D=C>0?"start":"end",T=l;if(n==="top"){var k={x:h+m/2,y:u-S,horizontalAnchor:"middle",verticalAnchor:w};return T&&(k.height=Math.max(u-T.y,0),k.width=m),k}if(n==="bottom"){var R={x:v+p/2,y:u+d+S,horizontalAnchor:"middle",verticalAnchor:A};return T&&(R.height=Math.max(T.y+T.height-(u+d),0),R.width=p),R}if(n==="left"){var L={x:y-E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"};return T&&(L.width=Math.max(L.x-T.x,0),L.height=d),L}if(n==="right"){var Q={x:y+x+E,y:u+d/2,horizontalAnchor:D,verticalAnchor:"middle"};return T&&(Q.width=Math.max(T.x+T.width-Q.x,0),Q.height=d),Q}var $=T?{width:x,height:d}:{};return n==="insideLeft"?na({x:y+E,y:u+d/2,horizontalAnchor:D,verticalAnchor:"middle"},$):n==="insideRight"?na({x:y+x-E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"},$):n==="insideTop"?na({x:h+m/2,y:u+S,horizontalAnchor:"middle",verticalAnchor:A},$):n==="insideBottom"?na({x:v+p/2,y:u+d-S,horizontalAnchor:"middle",verticalAnchor:w},$):n==="insideTopLeft"?na({x:h+E,y:u+S,horizontalAnchor:D,verticalAnchor:A},$):n==="insideTopRight"?na({x:h+m-E,y:u+S,horizontalAnchor:O,verticalAnchor:A},$):n==="insideBottomLeft"?na({x:v+E,y:u+d-S,horizontalAnchor:D,verticalAnchor:w},$):n==="insideBottomRight"?na({x:v+p-E,y:u+d-S,horizontalAnchor:O,verticalAnchor:w},$):n&&typeof n=="object"&&(Ae(n.x)||Ds(n.x))&&(Ae(n.y)||Ds(n.y))?na({x:o+Fn(n.x,x),y:u+Fn(n.y,d),horizontalAnchor:"end",verticalAnchor:"end"},$):na({x:_,y:u+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},$)},KF=["labelRef"],XF=["content"];function AE(e,t){if(e==null)return{};var n,a,l=WF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function WF(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function _c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(a){ZF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZF(e,t,n){return(t=JF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JF(e){var t=eG(e,"string");return typeof t=="symbol"?t:t+""}function eG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pa.apply(null,arguments)}var _M=g.createContext(null),tG=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:u,children:d}=e,m=g.useMemo(()=>({x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:u}),[t,n,a,l,o,u]);return g.createElement(_M.Provider,{value:m},d)},SM=()=>{var e=g.useContext(_M),t=Dm();return e||(t?Zy(t):void 0)},rG=g.createContext(null),nG=()=>{var e=g.useContext(rG),t=ke(eD);return e||t},aG=e=>{var{value:t,formatter:n}=e,a=Mt(e.children)?t:e.children;return typeof n=="function"?n(a):a},tj=e=>e!=null&&typeof e=="function",iG=(e,t)=>{var n=Gr(t-e),a=Math.min(Math.abs(t-e),360);return n*a},sG=(e,t,n,a,l)=>{var{offset:o,className:u}=e,{cx:d,cy:m,innerRadius:p,outerRadius:h,startAngle:v,endAngle:y,clockWise:x}=l,_=(p+h)/2,j=iG(v,y),S=j>=0?1:-1,w,A;switch(t){case"insideStart":w=v+S*o,A=x;break;case"insideEnd":w=y-S*o,A=!x;break;case"end":w=y+S*o,A=x;break;default:throw new Error("Unsupported position ".concat(t))}A=j<=0?A:!A;var C=br(d,m,_,w),E=br(d,m,_,w+(A?1:-1)*359),O="M".concat(C.x,",").concat(C.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),D=Mt(e.id)?Oc("recharts-radial-line-"):e.id;return g.createElement("text",Pa({},a,{dominantBaseline:"central",className:yt("recharts-radial-bar-label",u)}),g.createElement("defs",null,g.createElement("path",{id:D,d:O})),g.createElement("textPath",{xlinkHref:"#".concat(D)},n))},lG=(e,t,n)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:u,startAngle:d,endAngle:m}=e,p=(d+m)/2;if(n==="outside"){var{x:h,y:v}=br(a,l,u+t,p);return{x:h,y:v,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(o+u)/2,{x,y:_}=br(a,l,y,p);return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},nf=e=>e!=null&&"cx"in e&&Ae(e.cx),oG={angle:0,offset:5,zIndex:or.label,position:"middle",textBreakAll:!1};function cG(e){if(!nf(e))return e;var{cx:t,cy:n,outerRadius:a}=e,l=a*2;return{x:t-a,y:n-a,width:l,upperWidth:l,lowerWidth:l,height:l}}function Pi(e){var t=kr(e,oG),{viewBox:n,parentViewBox:a,position:l,value:o,children:u,content:d,className:m="",textBreakAll:p,labelRef:h}=t,v=nG(),y=SM(),x=l==="center"?y:v??y,_,j,S;n==null?_=x:nf(n)?_=n:_=Zy(n);var w=cG(_);if(!_||Mt(o)&&Mt(u)&&!g.isValidElement(d)&&typeof d!="function")return null;var A=_c(_c({},t),{},{viewBox:_});if(g.isValidElement(d)){var{labelRef:C}=A,E=AE(A,KF);return g.cloneElement(d,E)}if(typeof d=="function"){var{content:O}=A,D=AE(A,XF);if(j=g.createElement(d,D),g.isValidElement(j))return j}else j=aG(t);var T=Mr(t);if(nf(_)){if(l==="insideStart"||l==="insideEnd"||l==="end")return sG(t,l,j,T,_);S=lG(_,t.offset,t.position)}else{if(!w)return null;var k=YF({viewBox:w,position:l,offset:t.offset,parentViewBox:nf(a)?void 0:a});S=_c(_c({x:k.x,y:k.y,textAnchor:k.horizontalAnchor,verticalAnchor:k.verticalAnchor},k.width!==void 0?{width:k.width}:{}),k.height!==void 0?{height:k.height}:{})}return g.createElement(Pn,{zIndex:t.zIndex},g.createElement(ej,Pa({ref:h,className:yt("recharts-label",m)},T,S,{textAnchor:$F(T.textAnchor)?T.textAnchor:S.textAnchor,breakAll:p}),j))}Pi.displayName="Label";var uG=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?g.createElement(Pi,Pa({key:"label-implicit"},a)):ca(e)?g.createElement(Pi,Pa({key:"label-implicit",value:e},a)):g.isValidElement(e)?e.type===Pi?g.cloneElement(e,_c({key:"label-implicit"},a)):g.createElement(Pi,Pa({key:"label-implicit",content:e},a)):tj(e)?g.createElement(Pi,Pa({key:"label-implicit",content:e},a)):e&&typeof e=="object"?g.createElement(Pi,Pa({},e,{key:"label-implicit"},a)):null};function dG(e){var{label:t,labelRef:n}=e,a=SM();return uG(t,a,n)||null}var rx={},nx={},OE;function fG(){return OE||(OE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(nx)),nx}var ax={},DE;function mG(){return DE||(DE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(ax)),ax}var ME;function pG(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fG(),n=mG(),a=By();function l(o){if(a.isArrayLike(o))return t.last(n.toArray(o))}e.last=l})(rx)),rx}var ix,PE;function hG(){return PE||(PE=1,ix=pG().last),ix}var vG=hG();const gG=Ka(vG);var xG=["valueAccessor"],yG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Xf(){return Xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xf.apply(null,arguments)}function kE(e,t){if(e==null)return{};var n,a,l=bG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function bG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var jG=e=>Array.isArray(e.value)?gG(e.value):e.value,wM=g.createContext(void 0),CM=wM.Provider,EM=g.createContext(void 0);EM.Provider;function NG(){return g.useContext(wM)}function _G(){return g.useContext(EM)}function af(e){var{valueAccessor:t=jG}=e,n=kE(e,xG),{dataKey:a,clockWise:l,id:o,textBreakAll:u,zIndex:d}=n,m=kE(n,yG),p=NG(),h=_G(),v=p||h;return!v||!v.length?null:g.createElement(Pn,{zIndex:d??or.label},g.createElement(An,{className:"recharts-label-list"},v.map((y,x)=>{var _,j=Mt(a)?t(y,x):Xt(y.payload,a),S=Mt(o)?{}:{id:"".concat(o,"-").concat(x)};return g.createElement(Pi,Xf({key:"label-".concat(x)},Mr(y),m,S,{fill:(_=n.fill)!==null&&_!==void 0?_:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:u,viewBox:y.viewBox,index:x,zIndex:0}))})))}af.displayName="LabelList";function AM(e){var{label:t}=e;return t?t===!0?g.createElement(af,{key:"labelList-implicit"}):g.isValidElement(t)||tj(t)?g.createElement(af,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(af,Xf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fy.apply(null,arguments)}var zM=e=>{var{cx:t,cy:n,r:a,className:l}=e,o=yt("recharts-dot",l);return Ae(t)&&Ae(n)&&Ae(a)?g.createElement("circle",fy({},Un(e),Ly(e),{className:o,cx:t,cy:n,r:a})):null},SG={radiusAxis:{},angleAxis:{}},OM=Kr({name:"polarAxis",initialState:SG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:FJ,removeRadiusAxis:GJ,addAngleAxis:HJ,removeAngleAxis:QJ}=OM.actions,wG=OM.reducer;function CG(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var sx={exports:{}},gt={};var TE;function EG(){if(TE)return gt;TE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function _(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case n:case l:case a:case m:case p:case y:return j;default:switch(j=j&&j.$$typeof,j){case u:case d:case v:case h:return j;case o:return j;default:return S}}case t:return S}}}return gt.ContextConsumer=o,gt.ContextProvider=u,gt.Element=e,gt.ForwardRef=d,gt.Fragment=n,gt.Lazy=v,gt.Memo=h,gt.Portal=t,gt.Profiler=l,gt.StrictMode=a,gt.Suspense=m,gt.SuspenseList=p,gt.isContextConsumer=function(j){return _(j)===o},gt.isContextProvider=function(j){return _(j)===u},gt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},gt.isForwardRef=function(j){return _(j)===d},gt.isFragment=function(j){return _(j)===n},gt.isLazy=function(j){return _(j)===v},gt.isMemo=function(j){return _(j)===h},gt.isPortal=function(j){return _(j)===t},gt.isProfiler=function(j){return _(j)===l},gt.isStrictMode=function(j){return _(j)===a},gt.isSuspense=function(j){return _(j)===m},gt.isSuspenseList=function(j){return _(j)===p},gt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===l||j===a||j===m||j===p||typeof j=="object"&&j!==null&&(j.$$typeof===v||j.$$typeof===h||j.$$typeof===u||j.$$typeof===o||j.$$typeof===d||j.$$typeof===x||j.getModuleId!==void 0)},gt.typeOf=_,gt}var qE;function AG(){return qE||(qE=1,sx.exports=EG()),sx.exports}var zG=AG(),RE=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",IE=null,lx=null,DM=e=>{if(e===IE&&Array.isArray(lx))return lx;var t=[];return g.Children.forEach(e,n=>{Mt(n)||(zG.isFragment(n)?t=t.concat(DM(n.props.children)):t.push(n))}),lx=t,IE=e,t};function OG(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(l=>RE(l)):a=[RE(t)],DM(e).forEach(l=>{var o=Zl(l,"type.displayName")||Zl(l,"type.name");o&&a.indexOf(o)!==-1&&n.push(l)}),n}var MM=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,ox={},LE;function DG(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const l=n[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${l}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(ox)),ox}var cx,$E;function MG(){return $E||($E=1,cx=DG().isPlainObject),cx}var PG=MG();const kG=Ka(PG);var BE,UE,FE,GE,HE;function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(a){TG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TG(e,t,n){return(t=qG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qG(e){var t=RG(e,"string");return typeof t=="symbol"?t:t+""}function RG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wf.apply(null,arguments)}function vc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var YE=(e,t,n,a,l)=>{var o=n-a,u;return u=It(BE||(BE=vc(["M ",",",""])),e,t),u+=It(UE||(UE=vc(["L ",",",""])),e+n,t),u+=It(FE||(FE=vc(["L ",",",""])),e+n-o/2,t+l),u+=It(GE||(GE=vc(["L ",",",""])),e+n-o/2-a,t+l),u+=It(HE||(HE=vc(["L ",","," Z"])),e,t),u},IG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LG=e=>{var t=kr(e,IG),{x:n,y:a,upperWidth:l,lowerWidth:o,height:u,className:d}=t,{animationEasing:m,animationDuration:p,animationBegin:h,isUpdateAnimationActive:v}=t,y=g.useRef(null),[x,_]=g.useState(-1),j=g.useRef(l),S=g.useRef(o),w=g.useRef(u),A=g.useRef(n),C=g.useRef(a),E=Rm(e,"trapezoid-");if(g.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var Y=y.current.getTotalLength();Y&&_(Y)}catch{}},[]),n!==+n||a!==+a||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var O=yt("recharts-trapezoid",d);if(!v)return g.createElement("g",null,g.createElement("path",Wf({},Mr(t),{className:O,d:YE(n,a,l,o,u)})));var D=j.current,T=S.current,k=w.current,R=A.current,L=C.current,Q="0px ".concat(x===-1?1:x,"px"),$="".concat(x,"px 0px"),F=Qz(["strokeDasharray"],p,m);return g.createElement(qm,{animationId:E,key:E,canBegin:x>0,duration:p,easing:m,isActive:v,begin:h},Y=>{var M=Lt(D,l,Y),q=Lt(T,o,Y),Z=Lt(k,u,Y),H=Lt(R,n,Y),B=Lt(L,a,Y);y.current&&(j.current=M,S.current=q,w.current=Z,A.current=H,C.current=B);var I=Y>0?{transition:F,strokeDasharray:$}:{strokeDasharray:Q};return g.createElement("path",Wf({},Mr(t),{className:O,d:YE(H,B,M,q,Z),ref:y,style:VE(VE({},I),t.style)}))})},$G=["option","shapeType","activeClassName"];function BG(e,t){if(e==null)return{};var n,a,l=UG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function UG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Zf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(a){FG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FG(e,t,n){return(t=GG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QG(e,t){return Zf(Zf({},t),e)}function VG(e,t){return e==="symbols"}function XE(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return g.createElement(Xz,n);case"trapezoid":return g.createElement(LG,n);case"sector":return g.createElement(Jz,n);case"symbols":if(VG(t))return g.createElement(q2,n);break;case"curve":return g.createElement(Hz,n);default:return null}}function YG(e){return g.isValidElement(e)?e.props:e}function PM(e){var{option:t,shapeType:n,activeClassName:a="recharts-active-shape"}=e,l=BG(e,$G),o;if(g.isValidElement(t))o=g.cloneElement(t,Zf(Zf({},l),YG(t)));else if(typeof t=="function")o=t(l,l.index);else if(kG(t)&&typeof t!="boolean"){var u=QG(t,l);o=g.createElement(XE,{shapeType:n,elementProps:u})}else{var d=l;o=g.createElement(XE,{shapeType:n,elementProps:d})}return l.isActive?g.createElement(An,{className:a},o):o}var kM=(e,t,n)=>{var a=Ft();return(l,o)=>u=>{e?.(l,o,u),a(FD({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}},TM=e=>{var t=Ft();return(n,a)=>l=>{e?.(n,a,l),t(u9())}},qM=(e,t,n)=>{var a=Ft();return(l,o)=>u=>{e?.(l,o,u),a(d9({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}};function RM(e){var{tooltipEntrySettings:t}=e,n=Ft(),a=Cr(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n(s9(t)):l.current!==t&&n(l9({prev:l.current,next:t})),l.current=t)},[t,n,a]),g.useLayoutEffect(()=>()=>{l.current&&(n(o9(l.current)),l.current=null)},[n]),null}function IM(e){var{legendPayload:t}=e,n=Ft(),a=Cr(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n($4(t)):l.current!==t&&n(B4({prev:l.current,next:t})),l.current=t)},[n,a,t]),g.useLayoutEffect(()=>()=>{l.current&&(n(U4(l.current)),l.current=null)},[n]),null}var ux,KG=()=>{var[e]=g.useState(()=>Oc("uid-"));return e},XG=(ux=oq.useId)!==null&&ux!==void 0?ux:KG;function WG(e,t){var n=XG();return t||(e?"".concat(e,"-").concat(n):n)}var ZG=g.createContext(void 0),LM=e=>{var{id:t,type:n,children:a}=e,l=WG("recharts-".concat(n),t);return g.createElement(ZG.Provider,{value:l},a(l))},JG={cartesianItems:[],polarItems:[]},$M=Kr({name:"graphicalItems",initialState:JG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:zt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,l=Bn(e).cartesianItems.indexOf(n);l>-1&&(e.cartesianItems[l]=a)},prepare:zt()},removeCartesianGraphicalItem:{reducer(e,t){var n=Bn(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:zt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:zt()},removePolarGraphicalItem:{reducer(e,t){var n=Bn(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:zt()}}}),{addCartesianGraphicalItem:eH,replaceCartesianGraphicalItem:tH,removeCartesianGraphicalItem:rH,addPolarGraphicalItem:VJ,removePolarGraphicalItem:YJ}=$M.actions,nH=$M.reducer,aH=e=>{var t=Ft(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(eH(e)):n.current!==e&&t(tH({prev:n.current,next:e})),n.current=e},[t,e]),g.useLayoutEffect(()=>()=>{n.current&&(t(rH(n.current)),n.current=null)},[t]),null},BM=g.memo(aH),iH=["points"];function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function dx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(a){sH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sH(e,t,n){return(t=lH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lH(e){var t=oH(e,"string");return typeof t=="symbol"?t:t+""}function oH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jf.apply(null,arguments)}function cH(e,t){if(e==null)return{};var n,a,l=uH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function uH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function dH(e){var{option:t,dotProps:n,className:a}=e;if(g.isValidElement(t))return g.cloneElement(t,n);if(typeof t=="function")return t(n);var l=yt(a,typeof t!="boolean"?t.className:""),o=n??{},{points:u}=o,d=cH(o,iH);return g.createElement(zM,Jf({},d,{className:l}))}function fH(e,t){return e==null?!1:t?!0:e.length===1}function mH(e){var{points:t,dot:n,className:a,dotClassName:l,dataKey:o,baseProps:u,needClip:d,clipPathId:m,zIndex:p=or.scatter}=e;if(!fH(t,n))return null;var h=MM(n),v=D3(n),y=t.map((_,j)=>{var S,w,A=dx(dx(dx({r:3},u),v),{},{index:j,cx:(S=_.x)!==null&&S!==void 0?S:void 0,cy:(w=_.y)!==null&&w!==void 0?w:void 0,dataKey:o,value:_.value,payload:_.payload,points:t});return g.createElement(dH,{key:"dot-".concat(j),option:n,dotProps:A,className:l})}),x={};return d&&m!=null&&(x.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(m,")")),g.createElement(Pn,{zIndex:p},g.createElement(An,Jf({className:a},x),y))}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function JE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(a){pH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pH(e,t,n){return(t=hH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hH(e){var t=vH(e,"string");return typeof t=="symbol"?t:t+""}function vH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UM=0,gH={xAxis:{},yAxis:{},zAxis:{}},FM=Kr({name:"cartesianAxis",initialState:gH,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:zt()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:zt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:zt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:zt()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:zt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:zt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:zt()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:zt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:zt()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,l=e.yAxis[n];if(l){var o,u=l.widthHistory||[];if(u.length===3&&u[0]===u[2]&&a===u[1]&&a!==l.width&&Math.abs(a-((o=u[0])!==null&&o!==void 0?o:0))<=1)return;var d=[...u,a].slice(-3);e.yAxis[n]=JE(JE({},l),{},{width:a,widthHistory:d})}}}}),{addXAxis:xH,replaceXAxis:yH,removeXAxis:bH,addYAxis:jH,replaceYAxis:NH,removeYAxis:_H,addZAxis:KJ,replaceZAxis:XJ,removeZAxis:WJ,updateYAxisWidth:SH}=FM.actions,wH=FM.reducer,CH=oe([cr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),EH=oe([CH,Za,Ja],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),rj=()=>ke(EH),AH=()=>ke(eU);function eA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function fx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(n),!0).forEach(function(a){zH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zH(e,t,n){return(t=OH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OH(e){var t=DH(e,"string");return typeof t=="symbol"?t:t+""}function DH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MH=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||t.x==null||t.y==null)return null;var d={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=fx(fx(fx({},d),Yc(l)),Ly(l)),p;return g.isValidElement(l)?p=g.cloneElement(l,m):typeof l=="function"?p=l(m):p=g.createElement(zM,m),g.createElement(An,{className:"recharts-active-dot",clipPath:u},p)};function PH(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:l,clipPath:o,zIndex:u=or.activeDot}=e,d=ke(qs),m=AH();if(t==null||m==null)return null;var p=t.find(h=>m.includes(h.payload));return Mt(p)?null:g.createElement(Pn,{zIndex:u},g.createElement(MH,{point:p,childIndex:Number(d),mainColor:n,dataKey:l,activeDot:a,clipPath:o}))}var tA=(e,t,n)=>{var a=n??e;if(!Mt(a))return Fn(a,t,0)},kH=(e,t,n)=>{var a={},l=e.filter(Km),o=e.filter(p=>p.stackId==null),u=l.reduce((p,h)=>{var v=p[h.stackId];return v==null&&(v=[]),v.push(h),p[h.stackId]=v,p},a),d=Object.entries(u).map(p=>{var h,[v,y]=p,x=y.map(j=>j.dataKey),_=tA(t,n,(h=y[0])===null||h===void 0?void 0:h.barSize);return{stackId:v,dataKeys:x,barSize:_}}),m=o.map(p=>{var h=[p.dataKey].filter(y=>y!=null),v=tA(t,n,p.barSize);return{stackId:void 0,dataKeys:h,barSize:v}});return[...d,...m]};function rA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(n),!0).forEach(function(a){TH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TH(e,t,n){return(t=qH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qH(e){var t=RH(e,"string");return typeof t=="symbol"?t:t+""}function RH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IH(e,t,n,a,l){var o,u=a.length;if(!(u<1)){var d=Fn(e,n,0,!0),m,p=[];if(tt((o=a[0])===null||o===void 0?void 0:o.barSize)){var h=!1,v=n/u,y=a.reduce((A,C)=>A+(C.barSize||0),0);y+=(u-1)*d,y>=n&&(y-=(u-1)*d,d=0),y>=n&&v>0&&(h=!0,v*=.9,y=u*v);var x=(n-y)/2>>0,_={offset:x-d,size:0};m=a.reduce((A,C)=>{var E,O={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:_.offset+_.size+d,size:h?v:(E=C.barSize)!==null&&E!==void 0?E:0}},D=[...A,O];return _=O.position,D},p)}else{var j=Fn(t,n,0,!0);n-2*j-(u-1)*d<=0&&(d=0);var S=(n-2*j-(u-1)*d)/u;S>1&&(S>>=0);var w=tt(l)?Math.min(S,l):S;m=a.reduce((A,C,E)=>[...A,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:j+(S+d)*E+(S-w)/2,size:w}}],p)}return m}}var LH=(e,t,n,a,l,o,u)=>{var d=Mt(u)?t:u,m=IH(n,a,l!==o?l:o,e,d);return l!==o&&m!=null&&(m=m.map(p=>Gd(Gd({},p),{},{position:Gd(Gd({},p.position),{},{offset:p.position.offset-l/2})}))),m},$H=(e,t)=>{var n=Pb(t);if(!(!e||n==null||t==null)){var{stackId:a}=t;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(u=>u.key===n)}}}},BH=(e,t)=>{if(!(e==null||t==null)){var n=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(n!=null)return n.position}};function UH(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&tt(e.zIndex)?e.zIndex:t}var FH=e=>{var{chartData:t}=e,n=Ft(),a=Cr();return g.useEffect(()=>a?()=>{}:(n(dE(t)),()=>{n(dE(void 0))}),[t,n,a]),null},nA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},GM=Kr({name:"brush",initialState:nA,reducers:{setBrushSettings(e,t){return t.payload==null?nA:t.payload}}}),{setBrushSettings:ZJ}=GM.actions,GH=GM.reducer;function HH(e){return(e%180+180)%180}var QH=function(t){var{width:n,height:a}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=HH(l),u=o*Math.PI/180,d=Math.atan(a/n),m=u>d&&u<Math.PI-d?a/Math.sin(u):n/Math.cos(u);return Math.abs(m)},VH={dots:[],areas:[],lines:[]},HM=Kr({name:"referenceElements",initialState:VH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Bn(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Bn(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Bn(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:JJ,removeDot:eee,addArea:tee,removeArea:ree,addLine:nee,removeLine:aee}=HM.actions,YH=HM.reducer,KH=g.createContext(void 0),XH=e=>{var{children:t}=e,[n]=g.useState("".concat(Oc("recharts"),"-clip")),a=rj();if(a==null)return null;var{x:l,y:o,width:u,height:d}=a;return g.createElement(KH.Provider,{value:n},g.createElement("defs",null,g.createElement("clipPath",{id:n},g.createElement("rect",{x:l,y:o,height:d,width:u}))),t)};function QM(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],a=0;a<e.length;a+=t){var l=e[a];l!==void 0&&n.push(l)}return n}function WH(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return QH(a,n)}function ZH(e,t,n){var a=n==="width",{x:l,y:o,width:u,height:d}=e;return t===1?{start:a?l:o,end:a?l+u:o+d}:{start:a?l+u:o+d,end:a?l:o}}function Gc(e,t,n,a,l){if(e*t<e*a||e*t>e*l)return!1;var o=n();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-l)<=0}function JH(e,t){return QM(e,t+1)}function eQ(e,t,n,a,l){for(var o=(a||[]).slice(),{start:u,end:d}=t,m=0,p=1,h=u,v=function(){var _=a?.[m];if(_===void 0)return{v:QM(a,p)};var j=m,S,w=()=>(S===void 0&&(S=n(_,j)),S),A=_.coordinate,C=m===0||Gc(e,A,w,h,d);C||(m=0,h=u,p+=1),C&&(h=A+e*(w()/2+l),m+=p)},y;p<=o.length;)if(y=v(),y)return y.v;return[]}function tQ(e,t,n,a,l){var o=(a||[]).slice(),u=o.length;if(u===0)return[];for(var{start:d,end:m}=t,p=1;p<=u;p++){for(var h=(u-1)%p,v=d,y=!0,x=function(){var E=a[j];if(E==null)return 0;var O=j,D,T=()=>(D===void 0&&(D=n(E,O)),D),k=E.coordinate,R=j===h||Gc(e,k,T,v,m);if(!R)return y=!1,1;R&&(v=k+e*(T()/2+l))},_,j=h;j<u&&(_=x(),!(_!==0&&_===1));j+=p);if(y){for(var S=[],w=h;w<u;w+=p){var A=a[w];A!=null&&S.push(A)}return S}}return[]}function aA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(n),!0).forEach(function(a){rQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rQ(e,t,n){return(t=nQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nQ(e){var t=aQ(e,"string");return typeof t=="symbol"?t:t+""}function aQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iQ(e,t,n,a,l){for(var o=(a||[]).slice(),u=o.length,{start:d}=t,{end:m}=t,p=function(y){var x=o[y];if(x==null)return 1;var _=x,j,S=()=>(j===void 0&&(j=n(x,y)),j);if(y===u-1){var w=e*(_.coordinate+e*S()/2-m);o[y]=_=Sr(Sr({},_),{},{tickCoord:w>0?_.coordinate-w*e:_.coordinate})}else o[y]=_=Sr(Sr({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var A=Gc(e,_.tickCoord,S,d,m);A&&(m=_.tickCoord-e*(S()/2+l),o[y]=Sr(Sr({},_),{},{isShow:!0}))}},h=u-1;h>=0;h--)p(h);return o}function sQ(e,t,n,a,l,o){var u=(a||[]).slice(),d=u.length,{start:m,end:p}=t;if(o){var h=a[d-1];if(h!=null){var v=n(h,d-1),y=e*(h.coordinate+e*v/2-p);if(u[d-1]=h=Sr(Sr({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate}),h.tickCoord!=null){var x=Gc(e,h.tickCoord,()=>v,m,p);x&&(p=h.tickCoord-e*(v/2+l),u[d-1]=Sr(Sr({},h),{},{isShow:!0}))}}}for(var _=o?d-1:d,j=function(A){var C=u[A];if(C==null)return 1;var E=C,O,D=()=>(O===void 0&&(O=n(C,A)),O);if(A===0){var T=e*(E.coordinate-e*D()/2-m);u[A]=E=Sr(Sr({},E),{},{tickCoord:T<0?E.coordinate-T*e:E.coordinate})}else u[A]=E=Sr(Sr({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var k=Gc(e,E.tickCoord,D,m,p);k&&(m=E.tickCoord+e*(D()/2+l),u[A]=Sr(Sr({},E),{},{isShow:!0}))}},S=0;S<_;S++)j(S);return u}function nj(e,t,n){var{tick:a,ticks:l,viewBox:o,minTickGap:u,orientation:d,interval:m,tickFormatter:p,unit:h,angle:v}=e;if(!l||!l.length||!a)return[];if(Ae(m)||Tm.isSsr){var y;return(y=JH(l,Ae(m)?m:0))!==null&&y!==void 0?y:[]}var x=[],_=d==="top"||d==="bottom"?"width":"height",j=h&&_==="width"?Cc(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(O,D)=>{var T=typeof p=="function"?p(O.value,D):O.value;return _==="width"?WH(Cc(T,{fontSize:t,letterSpacing:n}),j,v):Cc(T,{fontSize:t,letterSpacing:n})[_]},w=l[0],A=l[1],C=l.length>=2&&w!=null&&A!=null?Gr(A.coordinate-w.coordinate):1,E=ZH(o,C,_);return m==="equidistantPreserveStart"?eQ(C,E,S,l,u):m==="equidistantPreserveEnd"?tQ(C,E,S,l,u):(m==="preserveStart"||m==="preserveStartEnd"?x=sQ(C,E,S,l,u,m==="preserveStartEnd"):x=iQ(C,E,S,l,u),x.filter(O=>O.isShow))}var lQ=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(t){Array.from(t).forEach(h=>{if(h){var v=h.getBoundingClientRect();v.width>u&&(u=v.width)}});var d=n?n.getBoundingClientRect().width:0,m=l+o,p=u+m+d+(n?a:0);return Math.round(p)}return 0},oQ=["axisLine","width","height","className","hide","ticks","axisType"];function cQ(e,t){if(e==null)return{};var n,a,l=uQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function uQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rs.apply(null,arguments)}function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iA(Object(n),!0).forEach(function(a){dQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dQ(e,t,n){return(t=fQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fQ(e){var t=mQ(e,"string");return typeof t=="symbol"?t:t+""}function mQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var La={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:or.axis};function pQ(e){var{x:t,y:n,width:a,height:l,orientation:o,mirror:u,axisLine:d,otherSvgProps:m}=e;if(!d)return null;var p=qt(qt(qt({},m),Un(d)),{},{fill:"none"});if(o==="top"||o==="bottom"){var h=+(o==="top"&&!u||o==="bottom"&&u);p=qt(qt({},p),{},{x1:t,y1:n+h*l,x2:t+a,y2:n+h*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);p=qt(qt({},p),{},{x1:t+v*a,y1:n,x2:t+v*a,y2:n+l})}return g.createElement("line",Rs({},p,{className:yt("recharts-cartesian-axis-line",Zl(d,"className"))}))}function hQ(e,t,n,a,l,o,u,d,m){var p,h,v,y,x,_,j=d?-1:1,S=e.tickSize||u,w=Ae(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":p=h=e.coordinate,y=n+ +!d*l,v=y-j*S,_=v-j*m,x=w;break;case"left":v=y=e.coordinate,h=t+ +!d*a,p=h-j*S,x=p-j*m,_=w;break;case"right":v=y=e.coordinate,h=t+ +d*a,p=h+j*S,x=p+j*m,_=w;break;default:p=h=e.coordinate,y=n+ +d*l,v=y+j*S,_=v+j*m,x=w;break}return{line:{x1:p,y1:v,x2:h,y2:y},tick:{x,y:_}}}function vQ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function gQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function xQ(e){var{option:t,tickProps:n,value:a}=e,l,o=yt(n.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))l=g.cloneElement(t,qt(qt({},n),{},{className:o}));else if(typeof t=="function")l=t(qt(qt({},n),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=yt(u,CG(t))),l=g.createElement(ej,Rs({},n,{className:u}),a)}return l}var yQ=g.forwardRef((e,t)=>{var{ticks:n=[],tick:a,tickLine:l,stroke:o,tickFormatter:u,unit:d,padding:m,tickTextProps:p,orientation:h,mirror:v,x:y,y:x,width:_,height:j,tickSize:S,tickMargin:w,fontSize:A,letterSpacing:C,getTicksConfig:E,events:O,axisType:D}=e,T=nj(qt(qt({},E),{},{ticks:n}),A,C),k=vQ(h,v),R=gQ(h,v),L=Un(E),Q=Yc(a),$={};typeof l=="object"&&($=l);var F=qt(qt({},L),{},{fill:"none"},$),Y=T.map(Z=>qt({entry:Z},hQ(Z,y,x,_,j,h,S,v,w))),M=Y.map(Z=>{var{entry:H,line:B}=Z;return g.createElement(An,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},l&&g.createElement("line",Rs({},F,B,{className:yt("recharts-cartesian-axis-tick-line",Zl(l,"className"))})))}),q=Y.map((Z,H)=>{var B,I,{entry:pe,tick:re}=Z,de=qt(qt(qt(qt({verticalAnchor:R},L),{},{textAnchor:k,stroke:"none",fill:o},re),{},{index:H,payload:pe,visibleTicksCount:T.length,tickFormatter:u,padding:m},p),{},{angle:(B=(I=p?.angle)!==null&&I!==void 0?I:L.angle)!==null&&B!==void 0?B:0}),ge=qt(qt({},de),Q);return g.createElement(An,Rs({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(pe.value,"-").concat(pe.coordinate,"-").concat(pe.tickCoord)},$y(O,pe,H)),a&&g.createElement(xQ,{option:a,tickProps:ge,value:"".concat(typeof u=="function"?u(pe.value,H):pe.value).concat(d||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},q.length>0&&g.createElement(Pn,{zIndex:or.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:t},q)),M.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},M))}),bQ=g.forwardRef((e,t)=>{var{axisLine:n,width:a,height:l,className:o,hide:u,ticks:d,axisType:m}=e,p=cQ(e,oQ),[h,v]=g.useState(""),[y,x]=g.useState(""),_=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return lQ({ticks:_.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=g.useCallback(S=>{if(S){var w=S.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=w;var A=w[0];if(A){var C=window.getComputedStyle(A),E=C.fontSize,O=C.letterSpacing;(E!==h||O!==y)&&(v(E),x(O))}}},[h,y]);return u||a!=null&&a<=0||l!=null&&l<=0?null:g.createElement(Pn,{zIndex:e.zIndex},g.createElement(An,{className:yt("recharts-cartesian-axis",o)},g.createElement(pQ,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Un(e)}),g.createElement(yQ,{ref:j,axisType:m,events:p,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(tG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(dG,{label:e.label,labelRef:e.labelRef}),e.children)))}),aj=g.forwardRef((e,t)=>{var n=kr(e,La);return g.createElement(bQ,Rs({},n,{ref:t}))});aj.displayName="CartesianAxis";var jQ=["x1","y1","x2","y2","key"],NQ=["offset"],_Q=["xAxisId","yAxisId"],SQ=["xAxisId","yAxisId"];function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(n),!0).forEach(function(a){wQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wQ(e,t,n){return(t=CQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CQ(e){var t=EQ(e,"string");return typeof t=="symbol"?t:t+""}function EQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _s(){return _s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_s.apply(null,arguments)}function em(e,t){if(e==null)return{};var n,a,l=AQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function AQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var zQ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:l,width:o,height:u,ry:d}=e;return g.createElement("rect",{x:a,y:l,ry:d,width:o,height:u,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function VM(e){var{option:t,lineItemProps:n}=e,a;if(g.isValidElement(t))a=g.cloneElement(t,n);else if(typeof t=="function")a=t(n);else{var l,{x1:o,y1:u,x2:d,y2:m,key:p}=n,h=em(n,jQ),v=(l=Un(h))!==null&&l!==void 0?l:{},{offset:y}=v,x=em(v,NQ);a=g.createElement("line",_s({},x,{x1:o,y1:u,x2:d,y2:m,fill:"none",key:p}))}return a}function OQ(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=em(e,_Q),m=l.map((p,h)=>{var v=wr(wr({},d),{},{x1:t,y1:p,x2:t+n,y2:p,key:"line-".concat(h),index:h});return g.createElement(VM,{key:"line-".concat(h),option:a,lineItemProps:v})});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function DQ(e){var{y:t,height:n,vertical:a=!0,verticalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=em(e,SQ),m=l.map((p,h)=>{var v=wr(wr({},d),{},{x1:p,y1:t,x2:p,y2:t+n,key:"line-".concat(h),index:h});return g.createElement(VM,{option:a,lineItemProps:v,key:"line-".concat(h)})});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function MQ(e){var{horizontalFill:t,fillOpacity:n,x:a,y:l,width:o,height:u,horizontalPoints:d,horizontal:m=!0}=e;if(!m||!t||!t.length||d==null)return null;var p=d.map(v=>Math.round(v+l-l)).sort((v,y)=>v-y);l!==p[0]&&p.unshift(0);var h=p.map((v,y)=>{var x=p[y+1],_=x==null,j=_?l+u-v:x-v;if(j<=0)return null;var S=y%t.length;return g.createElement("rect",{key:"react-".concat(y),y:v,x:a,height:j,width:o,stroke:"none",fill:t[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function PQ(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:l,y:o,width:u,height:d,verticalPoints:m}=e;if(!t||!n||!n.length)return null;var p=m.map(v=>Math.round(v+l-l)).sort((v,y)=>v-y);l!==p[0]&&p.unshift(0);var h=p.map((v,y)=>{var x=p[y+1],_=x==null,j=_?l+u-v:x-v;if(j<=0)return null;var S=y%n.length;return g.createElement("rect",{key:"react-".concat(y),x:v,y:o,width:j,height:d,stroke:"none",fill:n[S],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var kQ=(e,t)=>{var{xAxis:n,width:a,height:l,offset:o}=e;return Cz(nj(wr(wr(wr({},La),n),{},{ticks:Ez(n),viewBox:{x:0,y:0,width:a,height:l}})),o.left,o.left+o.width,t)},TQ=(e,t)=>{var{yAxis:n,width:a,height:l,offset:o}=e;return Cz(nj(wr(wr(wr({},La),n),{},{ticks:Ez(n),viewBox:{x:0,y:0,width:a,height:l}})),o.top,o.top+o.height,t)},qQ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:or.grid};function my(e){var t=Pz(),n=kz(),a=Mz(),l=wr(wr({},kr(e,qQ)),{},{x:Ae(e.x)?e.x:a.left,y:Ae(e.y)?e.y:a.top,width:Ae(e.width)?e.width:a.width,height:Ae(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:u,x:d,y:m,width:p,height:h,syncWithTicks:v,horizontalValues:y,verticalValues:x}=l,_=Cr(),j=ke(R=>JC(R,"xAxis",o,_)),S=ke(R=>JC(R,"yAxis",u,_));if(!ua(p)||!ua(h)||!Ae(d)||!Ae(m))return null;var w=l.verticalCoordinatesGenerator||kQ,A=l.horizontalCoordinatesGenerator||TQ,{horizontalPoints:C,verticalPoints:E}=l;if((!C||!C.length)&&typeof A=="function"){var O=y&&y.length,D=A({yAxis:S?wr(wr({},S),{},{ticks:O?y:S.ticks}):void 0,width:t??p,height:n??h,offset:a},O?!0:v);Cf(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(C=D)}if((!E||!E.length)&&typeof w=="function"){var T=x&&x.length,k=w({xAxis:j?wr(wr({},j),{},{ticks:T?x:j.ticks}):void 0,width:t??p,height:n??h,offset:a},T?!0:v);Cf(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(E=k)}return g.createElement(Pn,{zIndex:l.zIndex},g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(zQ,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),g.createElement(MQ,_s({},l,{horizontalPoints:C})),g.createElement(PQ,_s({},l,{verticalPoints:E})),g.createElement(OQ,_s({},l,{offset:a,horizontalPoints:C,xAxis:j,yAxis:S})),g.createElement(DQ,_s({},l,{offset:a,verticalPoints:E,xAxis:j,yAxis:S}))))}my.displayName="CartesianGrid";var RQ={},YM=Kr({name:"errorBars",initialState:RQ,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:l}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:iee,replaceErrorBar:see,removeErrorBar:lee}=YM.actions,IQ=YM.reducer,LQ=["children"];function $Q(e,t){if(e==null)return{};var n,a,l=BQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function BQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var UQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},FQ=g.createContext(UQ);function KM(e){var{children:t}=e,n=$Q(e,LQ);return g.createElement(FQ.Provider,{value:n},t)}function ij(e,t){var n,a,l=ke(p=>ri(p,e)),o=ke(p=>ni(p,t)),u=(n=l?.allowDataOverflow)!==null&&n!==void 0?n:ir.allowDataOverflow,d=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:sr.allowDataOverflow,m=u||d;return{needClip:m,needClipX:u,needClipY:d}}function XM(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,l=rj(),{needClipX:o,needClipY:u,needClip:d}=ij(t,n);if(!d||!l)return null;var{x:m,y:p,width:h,height:v}=l;return g.createElement("clipPath",{id:"clipPath-".concat(a)},g.createElement("rect",{x:o?m:m-h/2,y:u?p:p-v/2,width:o?h:h*2,height:u?v:v*2}))}var WM=(e,t,n,a)=>Gi(e,"xAxis",t,a),ZM=(e,t,n,a)=>Fi(e,"xAxis",t,a),JM=(e,t,n,a)=>Gi(e,"yAxis",n,a),eP=(e,t,n,a)=>Fi(e,"yAxis",n,a),GQ=oe([ft,WM,JM,ZM,eP],(e,t,n,a,l)=>Wa(e,"xAxis")?eo(t,a,!1):eo(n,l,!1)),HQ=(e,t,n,a,l)=>l;function QQ(e){return e.type==="line"}var VQ=oe([Zm,HQ],(e,t)=>e.filter(QQ).find(n=>n.id===t)),YQ=oe([ft,WM,JM,ZM,eP,VQ,GQ,Sb],(e,t,n,a,l,o,u,d)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:h}=d;if(!(o==null||t==null||n==null||a==null||l==null||a.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:y}=o,x;if(y!=null&&y.length>0?x=y:x=m?.slice(p,h+1),x!=null)return TV({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:x})}});function KQ(e){var t=Yc(e),n=3,a=2;if(t!=null){var{r:l,strokeWidth:o}=t,u=Number(l),d=Number(o);return(Number.isNaN(u)||u<0)&&(u=n),(Number.isNaN(d)||d<0)&&(d=a),{r:u,strokeWidth:d}}return{r:n,strokeWidth:a}}var mx={exports:{}},px={};var lA;function XQ(){if(lA)return px;lA=1;var e=cm();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,d=e.useDebugValue;return px.useSyncExternalStoreWithSelector=function(m,p,h,v,y){var x=l(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=u(function(){function S(O){if(!w){if(w=!0,A=O,O=v(O),y!==void 0&&_.hasValue){var D=_.value;if(y(D,O))return C=D}return C=O}if(D=C,n(A,O))return D;var T=v(O);return y!==void 0&&y(D,T)?(A=O,D):(A=O,C=T)}var w=!1,A,C,E=h===void 0?null:h;return[function(){return S(p())},E===null?void 0:function(){return S(E())}]},[p,h,v,y]);var j=a(m,x[0],x[1]);return o(function(){_.hasValue=!0,_.value=j},[j]),d(j),j},px}var oA;function WQ(){return oA||(oA=1,mx.exports=XQ()),mx.exports}WQ();function ZQ(e){e()}function JQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZQ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const l=t={callback:n,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var cA={notify(){},get:()=>[]};function eV(e,t){let n,a=cA,l=0,o=!1;function u(j){h();const S=a.subscribe(j);let w=!1;return()=>{w||(w=!0,S(),v())}}function d(){a.notify()}function m(){_.onStateChange&&_.onStateChange()}function p(){return o}function h(){l++,n||(n=e.subscribe(m),a=JQ())}function v(){l--,n&&l===0&&(n(),n=void 0,a.clear(),a=cA)}function y(){o||(o=!0,h())}function x(){o&&(o=!1,v())}const _={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:p,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>a};return _}var tV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rV=tV(),nV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",aV=nV(),iV=()=>rV||aV?g.useLayoutEffect:g.useEffect,sV=iV();function uA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function lV(e,t){if(uA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(!Object.prototype.hasOwnProperty.call(t,n[l])||!uA(e[n[l]],t[n[l]]))return!1;return!0}var oV=Symbol.for("react-redux-context"),cV=typeof globalThis<"u"?globalThis:{};function uV(){if(!g.createContext)return{};const e=cV[oV]??=new Map;let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var dV=uV();function fV(e){const{children:t,context:n,serverState:a,store:l}=e,o=g.useMemo(()=>{const m=eV(l);return{store:l,subscription:m,getServerState:a?()=>a:void 0}},[l,a]),u=g.useMemo(()=>l.getState(),[l]);sV(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==l.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,u]);const d=n||dV;return g.createElement(d.Provider,{value:o},t)}var mV=fV,pV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function hV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function np(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(pV.has(a)){if(e[a]==null&&t[a]==null)continue;if(!lV(e[a],t[a]))return!1}else if(!hV(e[a],t[a]))return!1;return!0}var vV=["id"],gV=["type","layout","connectNulls","needClip","shape"],xV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hc.apply(null,arguments)}function dA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(n),!0).forEach(function(a){yV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yV(e,t,n){return(t=bV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bV(e){var t=jV(e,"string");return typeof t=="symbol"?t:t+""}function jV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sj(e,t){if(e==null)return{};var n,a,l=NV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function NV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var _V=e=>{var{dataKey:t,name:n,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:Cm(n,t),payload:e}]},SV=g.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:l,fill:o,name:u,hide:d,unit:m,tooltipType:p,id:h}=e,v={dataDefinedOnItem:n,getPosition:Bs,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:Cm(u,t),hide:d,type:p,color:a,unit:m,graphicalItemId:h}};return g.createElement(RM,{tooltipEntrySettings:v})}),tP=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function wV(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],l=0;l<t;++l)a=[...a,...n];return a}var CV=(e,t,n)=>{var a=n.reduce((x,_)=>x+_);if(!a)return tP(t,e);for(var l=Math.floor(e/a),o=e%a,u=t-e,d=[],m=0,p=0;m<n.length;p+=(h=n[m])!==null&&h!==void 0?h:0,++m){var h,v=n[m];if(v!=null&&p+v>o){d=[...n.slice(0,m),o-p];break}}var y=d.length%2===0?[0,u]:[u];return[...wV(n,l),...d,...y].map(x=>"".concat(x,"px")).join(", ")};function EV(e){var{clipPathId:t,points:n,props:a}=e,{dot:l,dataKey:o,needClip:u}=a,{id:d}=a,m=sj(a,vV),p=Un(m);return g.createElement(mH,{points:n,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:p,needClip:u,clipPathId:t})}function AV(e){var{showLabels:t,children:n,points:a}=e,l=g.useMemo(()=>a?.map(o=>{var u,d,m={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return aa(aa({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return g.createElement(CM,{value:t?l:void 0},n)}function fA(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:l,props:o}=e,{type:u,layout:d,connectNulls:m,needClip:p,shape:h}=o,v=sj(o,gV),y=aa(aa({},Mr(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(t,")"):void 0,points:a,type:u,layout:d,connectNulls:m,strokeDasharray:l??o.strokeDasharray});return g.createElement(g.Fragment,null,a?.length>1&&g.createElement(PM,Hc({shapeType:"curve",option:h},y,{pathRef:n})),g.createElement(EV,{points:a,clipPathId:t,props:o}))}function zV(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function OV(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:d,isAnimationActive:m,animationBegin:p,animationDuration:h,animationEasing:v,animateNewValues:y,width:x,height:_,onAnimationEnd:j,onAnimationStart:S}=n,w=l.current,A=Rm(u,"recharts-line-"),C=g.useRef(A),[E,O]=g.useState(!1),D=!E,T=g.useCallback(()=>{typeof j=="function"&&j(),O(!1)},[j]),k=g.useCallback(()=>{typeof S=="function"&&S(),O(!0)},[S]),R=zV(a.current),L=g.useRef(0);C.current!==A&&(L.current=o.current,C.current=A);var Q=L.current;return g.createElement(AV,{points:u,showLabels:D},n.children,g.createElement(qm,{animationId:A,begin:p,duration:h,isActive:m,easing:v,onAnimationEnd:T,onAnimationStart:k,key:A},$=>{var F=Lt(Q,R+Q,$),Y=Math.min(F,R),M;if(m)if(d){var q="".concat(d).split(/[,\s]+/gim).map(B=>parseFloat(B));M=CV(Y,R,q)}else M=tP(R,Y);else M=d==null?void 0:String(d);if($>0&&R>0&&(l.current=u,o.current=Math.max(o.current,Y)),w){var Z=w.length/u.length,H=$===1?u:u.map((B,I)=>{var pe=Math.floor(I*Z);if(w[pe]){var re=w[pe];return aa(aa({},B),{},{x:Lt(re.x,B.x,$),y:Lt(re.y,B.y,$)})}return y?aa(aa({},B),{},{x:Lt(x*2,B.x,$),y:Lt(_/2,B.y,$)}):aa(aa({},B),{},{x:B.x,y:B.y})});return l.current=H,g.createElement(fA,{props:n,points:H,clipPathId:t,pathRef:a,strokeDasharray:M})}return g.createElement(fA,{props:n,points:u,clipPathId:t,pathRef:a,strokeDasharray:M})}),g.createElement(AM,{label:n.label}))}function DV(e){var{clipPathId:t,props:n}=e,a=g.useRef(null),l=g.useRef(0),o=g.useRef(null);return g.createElement(OV,{props:n,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var MV=(e,t)=>{var n,a;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Xt(e.payload,t)}};class PV extends g.Component{render(){var{hide:t,dot:n,points:a,className:l,xAxisId:o,yAxisId:u,top:d,left:m,width:p,height:h,id:v,needClip:y,zIndex:x}=this.props;if(t)return null;var _=yt("recharts-line",l),j=v,{r:S,strokeWidth:w}=KQ(n),A=MM(n),C=S*2+w,E=y?"url(#clipPath-".concat(A?"":"dots-").concat(j,")"):void 0;return g.createElement(Pn,{zIndex:x},g.createElement(An,{className:_},y&&g.createElement("defs",null,g.createElement(XM,{clipPathId:j,xAxisId:o,yAxisId:u}),!A&&g.createElement("clipPath",{id:"clipPath-dots-".concat(j)},g.createElement("rect",{x:m-C/2,y:d-C/2,width:p+C,height:h+C}))),g.createElement(KM,{xAxisId:o,yAxisId:u,data:a,dataPointFormatter:MV,errorBarOffset:0},g.createElement(DV,{props:this.props,clipPathId:j}))),g.createElement(PH,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:E}))}}var rP={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:or.line,type:"linear"};function kV(e){var t=kr(e,rP),{activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:m,hide:p,isAnimationActive:h,label:v,legendType:y,xAxisId:x,yAxisId:_,id:j}=t,S=sj(t,xV),{needClip:w}=ij(x,_),A=rj(),C=Us(),E=Cr(),O=ke(L=>YQ(L,x,_,E,j));if(C!=="horizontal"&&C!=="vertical"||O==null||A==null)return null;var{height:D,width:T,x:k,y:R}=A;return g.createElement(PV,Hc({},S,{id:j,connectNulls:d,dot:m,activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:h,hide:p,label:v,legendType:y,xAxisId:x,yAxisId:_,points:O,layout:C,height:D,width:T,left:k,top:R,needClip:w}))}function TV(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:d,displayedData:m}=e;return m.map((p,h)=>{var v=Xt(p,u);if(t==="horizontal"){var y=WS({axis:n,ticks:l,bandSize:d,entry:p,index:h}),x=Mt(v)?null:a.scale.map(v);return{x:y,y:x??null,value:v,payload:p}}var _=Mt(v)?null:n.scale.map(v),j=WS({axis:a,ticks:o,bandSize:d,entry:p,index:h});return _==null||j==null?null:{x:_,y:j,value:v,payload:p}}).filter(Boolean)}function qV(e){var t=kr(e,rP),n=Cr();return g.createElement(LM,{id:t.id,type:"line"},a=>g.createElement(g.Fragment,null,g.createElement(IM,{legendPayload:_V(t)}),g.createElement(SV,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),g.createElement(BM,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),g.createElement(kV,Hc({},t,{id:a}))))}var nP=g.memo(qV,np);nP.displayName="Line";function Hs(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&n!==void 0?n:UM}function Qs(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&n!==void 0?n:UM}var RV="Invariant failed";function IV(e,t){throw new Error(RV)}function py(){return py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},py.apply(null,arguments)}function tm(e){return g.createElement(PM,py({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var LV=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(Ae(t))return t;var o=Ae(a)||Mt(a);return o?t(a,l):(o||IV(),n)}},$V=(e,t,n)=>n,BV=(e,t)=>t,du=oe([Zm,BV],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),UV=oe([du],e=>e?.maxBarSize),FV=(e,t,n,a)=>a,GV=oe([ft,Zm,Hs,Qs,$V],(e,t,n,a,l)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),HV=(e,t,n)=>{var a=ft(e),l=Hs(e,t),o=Qs(e,t);if(!(l==null||o==null))return a==="horizontal"?sy(e,"yAxis",o,n):sy(e,"xAxis",l,n)},QV=(e,t)=>{var n=ft(e),a=Hs(e,t),l=Qs(e,t);if(!(a==null||l==null))return n==="horizontal"?ZC(e,"xAxis",a):ZC(e,"yAxis",l)},VV=oe([GV,KB,QV],kH),YV=(e,t,n)=>{var a,l,o=du(e,t);if(o==null)return 0;var u=Hs(e,t),d=Qs(e,t);if(u==null||d==null)return 0;var m=ft(e),p=QO(e),{maxBarSize:h}=o,v=Mt(h)?p:h,y,x;return m==="horizontal"?(y=Gi(e,"xAxis",u,n),x=Fi(e,"xAxis",u,n)):(y=Gi(e,"yAxis",d,n),x=Fi(e,"yAxis",d,n)),(a=(l=eo(y,x,!0))!==null&&l!==void 0?l:v)!==null&&a!==void 0?a:0},aP=(e,t,n)=>{var a=ft(e),l=Hs(e,t),o=Qs(e,t);if(!(l==null||o==null)){var u,d;return a==="horizontal"?(u=Gi(e,"xAxis",l,n),d=Fi(e,"xAxis",l,n)):(u=Gi(e,"yAxis",o,n),d=Fi(e,"yAxis",o,n)),eo(u,d)}},KV=oe([VV,QO,YB,VO,YV,aP,UV],LH),XV=(e,t,n)=>{var a=Hs(e,t);if(a!=null)return Gi(e,"xAxis",a,n)},WV=(e,t,n)=>{var a=Qs(e,t);if(a!=null)return Gi(e,"yAxis",a,n)},ZV=(e,t,n)=>{var a=Hs(e,t);if(a!=null)return Fi(e,"xAxis",a,n)},JV=(e,t,n)=>{var a=Qs(e,t);if(a!=null)return Fi(e,"yAxis",a,n)},eY=oe([KV,du],BH),tY=oe([HV,du],$H),rY=oe([cr,Xy,XV,WV,ZV,JV,eY,ft,$B,aP,tY,du,FV],(e,t,n,a,l,o,u,d,m,p,h,v,y)=>{var{chartData:x,dataStartIndex:_,dataEndIndex:j}=m;if(!(v==null||u==null||t==null||d!=="horizontal"&&d!=="vertical"||n==null||a==null||l==null||o==null||p==null)){var{data:S}=v,w;if(S!=null&&S.length>0?w=S:w=x?.slice(_,j+1),w!=null)return OY({layout:d,barSettings:v,pos:u,parentViewBox:t,bandSize:p,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:h,displayedData:w,offset:e,cells:y,dataStartIndex:_})}}),nY=["index"];function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hy.apply(null,arguments)}function aY(e,t){if(e==null)return{};var n,a,l=iY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function iY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var iP=g.createContext(void 0),sY=e=>{var t=g.useContext(iP);if(t!=null)return t.stackId;if(e!=null)return F6(e)},lY=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),oY=e=>{var t=g.useContext(iP);if(t!=null){var{stackId:n}=t;return"url(#".concat(lY(n,e),")")}},sP=e=>{var{index:t}=e,n=aY(e,nY),a=oY(t);return g.createElement(An,hy({className:"recharts-bar-stack-layer",clipPath:a},n))},cY=["onMouseEnter","onMouseLeave","onClick"],uY=["value","background","tooltipPosition"],dY=["id"],fY=["onMouseEnter","onClick","onMouseLeave"];function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ya.apply(null,arguments)}function mA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(n),!0).forEach(function(a){mY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mY(e,t,n){return(t=pY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pY(e){var t=hY(e,"string");return typeof t=="symbol"?t:t+""}function hY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rm(e,t){if(e==null)return{};var n,a,l=vY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function vY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var gY=e=>{var{dataKey:t,name:n,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:Cm(n,t),payload:e}]},xY=g.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:a,fill:l,name:o,hide:u,unit:d,tooltipType:m,id:p}=e,h={dataDefinedOnItem:void 0,getPosition:Bs,settings:{stroke:n,strokeWidth:a,fill:l,dataKey:t,nameKey:void 0,name:Cm(o,t),hide:u,type:m,color:l,unit:d,graphicalItemId:p}};return g.createElement(RM,{tooltipEntrySettings:h})});function yY(e){var t=ke(qs),{data:n,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:d,onClick:m}=o,p=rm(o,cY),h=kM(u,a,o.id),v=TM(d),y=qM(m,a,o.id);if(!l||n==null)return null;var x=Yc(l);return g.createElement(Pn,{zIndex:UH(l,or.barBackground)},n.map((_,j)=>{var{value:S,background:w,tooltipPosition:A}=_,C=rm(_,uY);if(!w)return null;var E=h(_,j),O=v(_,j),D=y(_,j),T=Or(Or(Or(Or(Or({option:l,isActive:String(j)===t},C),{},{fill:"#eee"},w),x),$y(p,_,j)),{},{onMouseEnter:E,onMouseLeave:O,onClick:D,dataKey:a,index:j,className:"recharts-bar-background-rectangle"});return g.createElement(tm,Ya({key:"background-bar-".concat(j)},T))}))}function bY(e){var{showLabels:t,children:n,rects:a}=e,l=a?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Or(Or({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return g.createElement(CM,{value:t?l:void 0},n)}function jY(e){var{shape:t,activeBar:n,baseProps:a,entry:l,index:o,dataKey:u}=e,d=ke(qs),m=ke(aM),p=n&&String(o)===d&&(m==null||u===m),h=p?n:t;return p?g.createElement(Pn,{zIndex:or.activeBar},g.createElement(sP,{index:o},g.createElement(tm,Ya({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u})))):g.createElement(tm,Ya({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u}))}function NY(e){var{shape:t,baseProps:n,entry:a,index:l,dataKey:o}=e;return g.createElement(tm,Ya({},n,{name:String(n.name)},a,{isActive:!1,option:t,index:l,dataKey:o}))}function _Y(e){var t,{data:n,props:a}=e,l=(t=Un(a))!==null&&t!==void 0?t:{},{id:o}=l,u=rm(l,dY),{shape:d,dataKey:m,activeBar:p}=a,{onMouseEnter:h,onClick:v,onMouseLeave:y}=a,x=rm(a,fY),_=kM(h,m,o),j=TM(y),S=qM(v,m,o);return n?g.createElement(g.Fragment,null,n.map((w,A)=>g.createElement(sP,Ya({index:A,key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(A),className:"recharts-bar-rectangle"},$y(x,w,A),{onMouseEnter:_(w,A),onMouseLeave:j(w,A),onClick:S(w,A)}),p?g.createElement(jY,{shape:d,activeBar:p,baseProps:u,entry:w,index:A,dataKey:m}):g.createElement(NY,{shape:d,baseProps:u,entry:w,index:A,dataKey:m})))):null}function SY(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:u,animationDuration:d,animationEasing:m,onAnimationEnd:p,onAnimationStart:h}=t,v=n.current,y=Rm(t,"recharts-bar-"),[x,_]=g.useState(!1),j=!x,S=g.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),w=g.useCallback(()=>{typeof h=="function"&&h(),_(!0)},[h]);return g.createElement(bY,{showLabels:j,rects:a},g.createElement(qm,{animationId:y,begin:u,duration:d,isActive:o,easing:m,onAnimationEnd:S,onAnimationStart:w,key:y},A=>{var C=A===1?a:a?.map((E,O)=>{var D=v&&v[O];if(D)return Or(Or({},E),{},{x:Lt(D.x,E.x,A),y:Lt(D.y,E.y,A),width:Lt(D.width,E.width,A),height:Lt(D.height,E.height,A)});if(l==="horizontal"){var T=Lt(0,E.height,A),k=Lt(E.stackedBarStart,E.y,A);return Or(Or({},E),{},{y:k,height:T})}var R=Lt(0,E.width,A),L=Lt(E.stackedBarStart,E.x,A);return Or(Or({},E),{},{width:R,x:L})});return A>0&&(n.current=C??null),C==null?null:g.createElement(An,null,g.createElement(_Y,{props:t,data:C}))}),g.createElement(AM,{label:t.label}),t.children)}function wY(e){var t=g.useRef(null);return g.createElement(SY,{previousRectanglesRef:t,props:e})}var lP=0,CY=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Xt(e,t)}};class EY extends g.PureComponent{render(){var{hide:t,data:n,dataKey:a,className:l,xAxisId:o,yAxisId:u,needClip:d,background:m,id:p}=this.props;if(t||n==null)return null;var h=yt("recharts-bar",l),v=p;return g.createElement(An,{className:h,id:p},d&&g.createElement("defs",null,g.createElement(XM,{clipPathId:v,xAxisId:o,yAxisId:u})),g.createElement(An,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(v,")"):void 0},g.createElement(yY,{data:n,dataKey:a,background:m,allOtherBarProps:this.props}),g.createElement(wY,this.props)))}}var AY={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:lP,xAxisId:0,yAxisId:0,zIndex:or.bar};function zY(e){var{xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h}=e,{needClip:v}=ij(t,n),y=Us(),x=Cr(),_=OG(e.children,Jb),j=ke(A=>rY(A,e.id,x,_));if(y!=="vertical"&&y!=="horizontal")return null;var S,w=j?.[0];return w==null||w.height==null||w.width==null?S=0:S=y==="vertical"?w.height/2:w.width/2,g.createElement(KM,{xAxisId:t,yAxisId:n,data:j,dataPointFormatter:CY,errorBarOffset:S},g.createElement(EY,Ya({},e,{layout:y,needClip:v,data:j,xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h})))}function OY(e){var{layout:t,barSettings:{dataKey:n,minPointSize:a},pos:l,bandSize:o,xAxis:u,yAxis:d,xAxisTicks:m,yAxisTicks:p,stackedData:h,displayedData:v,offset:y,cells:x,parentViewBox:_,dataStartIndex:j}=e,S=t==="horizontal"?d:u,w=h?S.scale.domain():null,A=G6({numericAxis:S}),C=S.scale.map(A);return v.map((E,O)=>{var D,T,k,R,L,Q;if(h){var $=h[O+j];if($==null)return null;D=I6($,w)}else D=Xt(E,n),Array.isArray(D)||(D=[A,D]);var F=LV(a,lP)(D[1],O);if(t==="horizontal"){var Y,M=d.scale.map(D[0]),q=d.scale.map(D[1]);if(M==null||q==null)return null;T=ZS({axis:u,ticks:m,bandSize:o,offset:l.offset,entry:E,index:O}),k=(Y=q??M)!==null&&Y!==void 0?Y:void 0,R=l.size;var Z=M-q;if(L=oa(Z)?0:Z,Q={x:T,y:y.top,width:R,height:y.height},Math.abs(F)>0&&Math.abs(L)<Math.abs(F)){var H=Gr(L||F)*(Math.abs(F)-Math.abs(L));k-=H,L+=H}}else{var B=u.scale.map(D[0]),I=u.scale.map(D[1]);if(B==null||I==null)return null;if(T=B,k=ZS({axis:d,ticks:p,bandSize:o,offset:l.offset,entry:E,index:O}),R=I-B,L=l.size,Q={x:y.left,y:k,width:y.width,height:L},Math.abs(F)>0&&Math.abs(R)<Math.abs(F)){var pe=Gr(R||F)*(Math.abs(F)-Math.abs(R));R+=pe}}if(T==null||k==null||R==null||L==null)return null;var re=Or(Or({},E),{},{stackedBarStart:C,x:T,y:k,width:R,height:L,value:h?D:D[1],payload:E,background:Q,tooltipPosition:{x:T+R/2,y:k+L/2},parentViewBox:_},x&&x[O]&&x[O].props);return re}).filter(Boolean)}function DY(e){var t=kr(e,AY),n=sY(t.stackId),a=Cr();return g.createElement(LM,{id:t.id,type:"bar"},l=>g.createElement(g.Fragment,null,g.createElement(IM,{legendPayload:gY(t)}),g.createElement(xY,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),g.createElement(BM,{type:"bar",id:l,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),g.createElement(Pn,{zIndex:t.zIndex},g.createElement(zY,Ya({},t,{id:l})))))}var oP=g.memo(DY,np);oP.displayName="Bar";var MY=["domain","range"],PY=["domain","range"];function pA(e,t){if(e==null)return{};var n,a,l=kY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function kY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function hA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function cP(e,t){if(e===t)return!0;var{domain:n,range:a}=e,l=pA(e,MY),{domain:o,range:u}=t,d=pA(t,PY);return!hA(n,o)||!hA(a,u)?!1:np(l,d)}var TY=["type"],qY=["dangerouslySetInnerHTML","ticks","scale"],RY=["id","scale"];function vy(){return vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vy.apply(null,arguments)}function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function gA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(a){IY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function IY(e,t,n){return(t=LY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gy(e,t){if(e==null)return{};var n,a,l=BY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function BY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function UY(e){var t=Ft(),n=g.useRef(null),a=Tz(),{type:l}=e,o=gy(e,TY),u=Qm(a,"xAxis",l),d=g.useMemo(()=>{if(u!=null)return gA(gA({},o),{},{type:u})},[o,u]);return g.useLayoutEffect(()=>{d!=null&&(n.current===null?t(xH(d)):n.current!==d&&t(yH({prev:n.current,next:d})),n.current=d)},[d,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(bH(n.current)),n.current=null)},[t]),null}var FY=e=>{var{xAxisId:t,className:n}=e,a=ke(Xy),l=Cr(),o="xAxis",u=ke(w=>RD(w,o,t,l)),d=ke(w=>PD(w,t)),m=ke(w=>X7(w,t)),p=ke(w=>rD(w,t));if(d==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:h,ticks:v,scale:y}=e,x=gy(e,qY),{id:_,scale:j}=p,S=gy(p,RY);return g.createElement(aj,vy({},x,S,{x:m.x,y:m.y,width:d.width,height:d.height,className:yt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:u,axisType:o}))},GY={allowDataOverflow:ir.allowDataOverflow,allowDecimals:ir.allowDecimals,allowDuplicatedCategory:ir.allowDuplicatedCategory,angle:ir.angle,axisLine:La.axisLine,height:ir.height,hide:!1,includeHidden:ir.includeHidden,interval:ir.interval,label:!1,minTickGap:ir.minTickGap,mirror:ir.mirror,orientation:ir.orientation,padding:ir.padding,reversed:ir.reversed,scale:ir.scale,tick:ir.tick,tickCount:ir.tickCount,tickLine:La.tickLine,tickSize:La.tickSize,type:ir.type,xAxisId:0},HY=e=>{var t=kr(e,GY);return g.createElement(g.Fragment,null,g.createElement(UY,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),g.createElement(FY,t))},xy=g.memo(HY,cP);xy.displayName="XAxis";var QY=["type"],VY=["dangerouslySetInnerHTML","ticks","scale"],YY=["id","scale"];function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yy.apply(null,arguments)}function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function yA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(a){KY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function KY(e,t,n){return(t=XY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XY(e){var t=WY(e,"string");return typeof t=="symbol"?t:t+""}function WY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function by(e,t){if(e==null)return{};var n,a,l=ZY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function ZY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function JY(e){var t=Ft(),n=g.useRef(null),a=Tz(),{type:l}=e,o=by(e,QY),u=Qm(a,"yAxis",l),d=g.useMemo(()=>{if(u!=null)return yA(yA({},o),{},{type:u})},[u,o]);return g.useLayoutEffect(()=>{d!=null&&(n.current===null?t(jH(d)):n.current!==d&&t(NH({prev:n.current,next:d})),n.current=d)},[d,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(_H(n.current)),n.current=null)},[t]),null}function eK(e){var{yAxisId:t,className:n,width:a,label:l}=e,o=g.useRef(null),u=g.useRef(null),d=ke(Xy),m=Cr(),p=Ft(),h="yAxis",v=ke(D=>kD(D,t)),y=ke(D=>Z7(D,t)),x=ke(D=>RD(D,h,t,m)),_=ke(D=>nD(D,t));if(g.useLayoutEffect(()=>{if(!(a!=="auto"||!v||tj(l)||g.isValidElement(l)||_==null)){var D=o.current;if(D){var T=D.getCalculatedWidth();Math.round(v.width)!==Math.round(T)&&p(SH({id:t,width:T}))}}},[x,v,p,l,t,a,_]),v==null||y==null||_==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:w}=e,A=by(e,VY),{id:C,scale:E}=_,O=by(_,YY);return g.createElement(aj,yy({},A,O,{ref:o,labelRef:u,x:y.x,y:y.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:v.width,height:v.height,className:yt("recharts-".concat(h," ").concat(h),n),viewBox:d,ticks:x,axisType:h}))}var tK={allowDataOverflow:sr.allowDataOverflow,allowDecimals:sr.allowDecimals,allowDuplicatedCategory:sr.allowDuplicatedCategory,angle:sr.angle,axisLine:La.axisLine,hide:!1,includeHidden:sr.includeHidden,interval:sr.interval,label:!1,minTickGap:sr.minTickGap,mirror:sr.mirror,orientation:sr.orientation,padding:sr.padding,reversed:sr.reversed,scale:sr.scale,tick:sr.tick,tickCount:sr.tickCount,tickLine:La.tickLine,tickSize:La.tickSize,type:sr.type,width:sr.width,yAxisId:0},rK=e=>{var t=kr(e,tK);return g.createElement(g.Fragment,null,g.createElement(JY,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),g.createElement(eK,t))},jy=g.memo(rK,cP);jy.displayName="YAxis";var nK=(e,t)=>t,lj=oe([nK,ft,eD,fr,eM,ai,mU,cr],bU),oj=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},uP=zn("mouseClick"),dP=Wc();dP.startListening({actionCreator:uP,effect:(e,t)=>{var n=e.payload,a=lj(t.getState(),oj(n));a?.activeIndex!=null&&t.dispatch(f9({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Ny=zn("mouseMove"),fP=Wc(),Hd=null;fP.startListening({actionCreator:Ny,effect:(e,t)=>{var n=e.payload;Hd!==null&&cancelAnimationFrame(Hd);var a=oj(n);Hd=requestAnimationFrame(()=>{var l=t.getState(),o=Fb(l,l.tooltip.settings.shared);if(o==="axis"){var u=lj(l,a);u?.activeIndex!=null?t.dispatch(HD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(GD())}Hd=null})}});function aK(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var bA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},mP=Kr({name:"rootProps",initialState:bA,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:bA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),iK=mP.reducer,{updateOptions:sK}=mP.actions,lK=null,oK={updatePolarOptions:(e,t)=>t.payload},pP=Kr({name:"polarOptions",initialState:lK,reducers:oK}),{updatePolarOptions:oee}=pP.actions,cK=pP.reducer,hP=zn("keyDown"),vP=zn("focus"),cj=Wc();cj.startListening({actionCreator:hP,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=Gb(l,po(n),lu(n),cu(n)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var m=ai(n);if(o==="Enter"){var p=Kf(n,"axis","hover",String(l.index));t.dispatch(oy({active:!l.active,activeIndex:l.index,activeCoordinate:p}));return}var h=r9(n),v=h==="left-to-right"?1:-1,y=o==="ArrowRight"?1:-1,x=d+y*v;if(!(m==null||x>=m.length||x<0)){var _=Kf(n,"axis","hover",String(x));t.dispatch(oy({active:!0,activeIndex:x.toString(),activeCoordinate:_}))}}}}}});cj.startListening({actionCreator:vP,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var o="0",u=Kf(n,"axis","hover",String(o));t.dispatch(oy({active:!0,activeIndex:o,activeCoordinate:u}))}}}});var Cn=zn("externalEvent"),gP=Wc(),hx=new Map;gP.startListening({actionCreator:Cn,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var l=a.type,o=hx.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var d=t.getState(),m={activeCoordinate:W9(d),activeDataKey:aM(d),activeIndex:qs(d),activeLabel:nM(d),activeTooltipIndex:qs(d),isTooltipActive:Z9(d)};n(m,a)}finally{hx.delete(l)}});hx.set(l,u)}}});var uK=oe([fo],e=>e.tooltipItemPayloads),dK=oe([uK,(e,t)=>t,(e,t,n)=>n],(e,t,n)=>{if(t!=null){var a=e.find(o=>o.settings.graphicalItemId===n);if(a!=null){var{getPosition:l}=a;if(l!=null)return l(t)}}}),xP=zn("touchMove"),yP=Wc();yP.startListening({actionCreator:xP,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=t.getState(),l=Fb(a,a.tooltip.settings.shared);if(l==="axis"){var o=n.touches[0];if(o==null)return;var u=lj(a,oj({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));u?.activeIndex!=null&&t.dispatch(HD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(l==="item"){var d,m=n.touches[0];if(document.elementFromPoint==null||m==null)return;var p=document.elementFromPoint(m.clientX,m.clientY);if(!p||!p.getAttribute)return;var h=p.getAttribute(W6),v=(d=p.getAttribute(Z6))!==null&&d!==void 0?d:void 0,y=mo(a).find(j=>j.id===v);if(h==null||y==null||v==null)return;var{dataKey:x}=y,_=dK(a,h,v);t.dispatch(FD({activeDataKey:x,activeIndex:h,activeCoordinate:_,activeGraphicalItemId:v}))}}}});var fK=W2({brush:GH,cartesianAxis:wH,chartData:WU,errorBars:IQ,graphicalItems:nH,layout:P6,legend:F4,options:QU,polarAxis:wG,polarOptions:cK,referenceElements:YH,rootProps:iK,tooltip:m9,zIndex:kU}),mK=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return a6({reducer:fK,preloadedState:t,middleware:a=>{var l;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([dP.middleware,fP.middleware,cj.middleware,gP.middleware,yP.middleware])},enhancers:a=>{var l=a;return typeof a=="function"&&(l=a()),l.concat(fz({type:"raf"}))},devTools:{serialize:{replacer:aK},name:"recharts-".concat(n)}})};function pK(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,l=Cr(),o=g.useRef(null);if(l)return n;o.current==null&&(o.current=mK(t,a));var u=Fy;return g.createElement(mV,{context:u,store:o.current},n)}function hK(e){var{layout:t,margin:n}=e,a=Ft(),l=Cr();return g.useEffect(()=>{l||(a(O6(t)),a(z6(n)))},[a,l,t,n]),null}var vK=g.memo(hK,np);function gK(e){var t=Ft();return g.useEffect(()=>{t(sK(e))},[t,e]),null}function jA(e){var{zIndex:t,isPanorama:n}=e,a=g.useRef(null),l=Ft();return g.useLayoutEffect(()=>(a.current&&l(MU({zIndex:t,element:a.current,isPanorama:n})),()=>{l(PU({zIndex:t,isPanorama:n}))}),[l,t,n]),g.createElement("g",{tabIndex:-1,ref:a})}function NA(e){var{children:t,isPanorama:n}=e,a=ke(NU);if(!a||a.length===0)return t;var l=a.filter(u=>u<0),o=a.filter(u=>u>0);return g.createElement(g.Fragment,null,l.map(u=>g.createElement(jA,{key:u,zIndex:u,isPanorama:n})),t,o.map(u=>g.createElement(jA,{key:u,zIndex:u,isPanorama:n})))}var xK=["children"];function yK(e,t){if(e==null)return{};var n,a,l=bK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function bK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nm.apply(null,arguments)}var jK={width:"100%",height:"100%",display:"block"},NK=g.forwardRef((e,t)=>{var n=Pz(),a=kz(),l=Gz();if(!ua(n)||!ua(a))return null;var{children:o,otherAttributes:u,title:d,desc:m}=e,p,h;return u!=null&&(typeof u.tabIndex=="number"?p=u.tabIndex:p=l?0:void 0,typeof u.role=="string"?h=u.role:h=l?"application":void 0),g.createElement(h2,nm({},u,{title:d,desc:m,role:h,tabIndex:p,width:n,height:a,style:jK,ref:t}),o)}),_K=e=>{var{children:t}=e,n=ke(Om);if(!n)return null;var{width:a,height:l,y:o,x:u}=n;return g.createElement(h2,{width:a,height:l,x:u,y:o},t)},_A=g.forwardRef((e,t)=>{var{children:n}=e,a=yK(e,xK),l=Cr();return l?g.createElement(_K,null,g.createElement(NA,{isPanorama:!0},n)):g.createElement(NK,nm({ref:t},a),g.createElement(NA,{isPanorama:!1},n))});function SK(){var e=Ft(),[t,n]=g.useState(null),a=ke(X6);return g.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;tt(o)&&o!==a&&e(M6(o))}},[t,e,a]),n}function SA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function wK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(n),!0).forEach(function(a){CK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function CK(e,t,n){return(t=EK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ii.apply(null,arguments)}var zK=()=>(sF(),null);function am(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var OK=g.forwardRef((e,t)=>{var n,a,l=g.useRef(null),[o,u]=g.useState({containerWidth:am((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:am((a=e.style)===null||a===void 0?void 0:a.height)}),d=g.useCallback((p,h)=>{u(v=>{var y=Math.round(p),x=Math.round(h);return v.containerWidth===y&&v.containerHeight===x?v:{containerWidth:y,containerHeight:x}})},[]),m=g.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null&&typeof ResizeObserver<"u"){var{width:h,height:v}=p.getBoundingClientRect();d(h,v);var y=_=>{var j=_[0];if(j!=null){var{width:S,height:w}=j.contentRect;d(S,w)}},x=new ResizeObserver(y);x.observe(p),l.current=x}},[t,d]);return g.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[d]),g.createElement(g.Fragment,null,g.createElement(Jc,{width:o.containerWidth,height:o.containerHeight}),g.createElement("div",Ii({ref:m},e)))}),DK=g.forwardRef((e,t)=>{var{width:n,height:a}=e,[l,o]=g.useState({containerWidth:am(n),containerHeight:am(a)}),u=g.useCallback((m,p)=>{o(h=>{var v=Math.round(m),y=Math.round(p);return h.containerWidth===v&&h.containerHeight===y?h:{containerWidth:v,containerHeight:y}})},[]),d=g.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:p,height:h}=m.getBoundingClientRect();u(p,h)}},[t,u]);return g.createElement(g.Fragment,null,g.createElement(Jc,{width:l.containerWidth,height:l.containerHeight}),g.createElement("div",Ii({ref:d},e)))}),MK=g.forwardRef((e,t)=>{var{width:n,height:a}=e;return g.createElement(g.Fragment,null,g.createElement(Jc,{width:n,height:a}),g.createElement("div",Ii({ref:t},e)))}),PK=g.forwardRef((e,t)=>{var{width:n,height:a}=e;return typeof n=="string"||typeof a=="string"?g.createElement(DK,Ii({},e,{ref:t})):typeof n=="number"&&typeof a=="number"?g.createElement(MK,Ii({},e,{width:n,height:a,ref:t})):g.createElement(g.Fragment,null,g.createElement(Jc,{width:n,height:a}),g.createElement("div",Ii({ref:t},e)))});function kK(e){return e?OK:PK}var TK=g.forwardRef((e,t)=>{var{children:n,className:a,height:l,onClick:o,onContextMenu:u,onDoubleClick:d,onMouseDown:m,onMouseEnter:p,onMouseLeave:h,onMouseMove:v,onMouseUp:y,onTouchEnd:x,onTouchMove:_,onTouchStart:j,style:S,width:w,responsive:A,dispatchTouchEvents:C=!0}=e,E=g.useRef(null),O=Ft(),[D,T]=g.useState(null),[k,R]=g.useState(null),L=SK(),Q=Wy(),$=Q?.width>0?Q.width:w,F=Q?.height>0?Q.height:l,Y=g.useCallback(le=>{L(le),typeof t=="function"&&t(le),T(le),R(le),le!=null&&(E.current=le)},[L,t,T,R]),M=g.useCallback(le=>{O(uP(le)),O(Cn({handler:o,reactEvent:le}))},[O,o]),q=g.useCallback(le=>{O(Ny(le)),O(Cn({handler:p,reactEvent:le}))},[O,p]),Z=g.useCallback(le=>{O(GD()),O(Cn({handler:h,reactEvent:le}))},[O,h]),H=g.useCallback(le=>{O(Ny(le)),O(Cn({handler:v,reactEvent:le}))},[O,v]),B=g.useCallback(()=>{O(vP())},[O]),I=g.useCallback(le=>{O(hP(le.key))},[O]),pe=g.useCallback(le=>{O(Cn({handler:u,reactEvent:le}))},[O,u]),re=g.useCallback(le=>{O(Cn({handler:d,reactEvent:le}))},[O,d]),de=g.useCallback(le=>{O(Cn({handler:m,reactEvent:le}))},[O,m]),ge=g.useCallback(le=>{O(Cn({handler:y,reactEvent:le}))},[O,y]),ye=g.useCallback(le=>{O(Cn({handler:j,reactEvent:le}))},[O,j]),V=g.useCallback(le=>{C&&O(xP(le)),O(Cn({handler:_,reactEvent:le}))},[O,C,_]),he=g.useCallback(le=>{O(Cn({handler:x,reactEvent:le}))},[O,x]),Pe=kK(A);return g.createElement(dM.Provider,{value:D},g.createElement(I3.Provider,{value:k},g.createElement(Pe,{width:$??S?.width,height:F??S?.height,className:yt("recharts-wrapper",a),style:wK({position:"relative",cursor:"default",width:$,height:F},S),onClick:M,onContextMenu:pe,onDoubleClick:re,onFocus:B,onKeyDown:I,onMouseDown:de,onMouseEnter:q,onMouseLeave:Z,onMouseMove:H,onMouseUp:ge,onTouchEnd:he,onTouchMove:V,onTouchStart:ye,ref:Y},g.createElement(zK,null),n)))}),qK=["width","height","responsive","children","className","style","compact","title","desc"];function RK(e,t){if(e==null)return{};var n,a,l=IK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function IK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var LK=g.forwardRef((e,t)=>{var{width:n,height:a,responsive:l,children:o,className:u,style:d,compact:m,title:p,desc:h}=e,v=RK(e,qK),y=Un(v);return m?g.createElement(g.Fragment,null,g.createElement(Jc,{width:n,height:a}),g.createElement(_A,{otherAttributes:y,title:p,desc:h},o)):g.createElement(TK,{className:u,style:d,width:n,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(_A,{otherAttributes:y,title:p,desc:h,ref:t},g.createElement(XH,null,o)))});function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_y.apply(null,arguments)}var $K={top:5,right:5,bottom:5,left:5},BK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:$K,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},bP=g.forwardRef(function(t,n){var a,l=kr(t.categoricalChartProps,BK),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,categoricalChartProps:p}=t,h={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return g.createElement(pK,{preloadedState:{options:h},reduxStoreName:(a=p.id)!==null&&a!==void 0?a:o},g.createElement(FH,{chartData:p.data}),g.createElement(vK,{layout:l.layout,margin:l.margin}),g.createElement(gK,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),g.createElement(LK,_y({},l,{ref:n})))}),UK=["axis"],FK=g.forwardRef((e,t)=>g.createElement(bP,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:UK,tooltipPayloadSearcher:fM,categoricalChartProps:e,ref:t})),GK=["axis","item"],HK=g.forwardRef((e,t)=>g.createElement(bP,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:GK,tooltipPayloadSearcher:fM,categoricalChartProps:e,ref:t}));const QK=8,VK=12,YK=14,KK=1;function uj(e){return e instanceof Me?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function wA(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function ap(){const e=new Date,t=e.getDay(),n=t===0?-6:1-t,a=new Date(e);return a.setDate(e.getDate()+n),a.setHours(0,0,0,0),a}function XK(){const e=ap(),t=new Date(e);return t.setDate(e.getDate()+6),t.setHours(23,59,59,999),t}function vx(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function ip(e){try{const t=Te(_e(te,"quiz_results"),we("userId","==",e),Ke("datePassage","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){return console.error("Erreur rcupration rsultats lve:",t),[]}}async function WK(e){try{const t=await ip(e);if(t.length===0)return[];const n=new Map;t.forEach(o=>{const u=o.disciplineId;n.has(u)||n.set(u,[]),n.get(u).push(o)});const a=[];n.forEach((o,u)=>{if(o.length<KK)return;const d=o.map(S=>S.pourcentage/100*20),m=d.reduce((S,w)=>S+w,0)/d.length;if(m>=YK)return;let p="stable";if(d.length>=3){const S=d.slice(0,2),w=d.slice(2,4),A=S.reduce((O,D)=>O+D,0)/S.length,C=w.reduce((O,D)=>O+D,0)/w.length,E=A-C;E>1.5?p="hausse":E<-1.5&&(p="baisse")}let h="modere";m<QK?h="critique":m<VK&&(h="important");const v=d[0],y=Math.max(...d),x=Math.min(...d),_=uj(o[0].datePassage),j=o[0].disciplineNom||"Discipline inconnue";a.push({id:`lacune_${u}`,disciplineId:u,disciplineNom:j,moyenne:Math.round(m*10)/10,nombreQuiz:o.length,tendance:p,niveauUrgence:h,dernierQuizDate:_,scoreDetails:{dernierScore:Math.round(v*10)/10,meilleurScore:Math.round(y*10)/10,pireScore:Math.round(x*10)/10}})});const l={critique:0,important:1,modere:2};return a.sort((o,u)=>{const d=l[o.niveauUrgence]-l[u.niveauUrgence];return d!==0?d:o.moyenne-u.moyenne}),a}catch(t){return console.error("Erreur dtection lacunes:",t),[]}}function ZK(e){const t=[];let n=1;return e.forEach(a=>{const{id:l,disciplineNom:o,niveauUrgence:u,moyenne:d,tendance:m}=a;switch(u){case"critique":t.push({id:`reco_cours_${l}`,lacuneId:l,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${d}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),t.push({id:`reco_quiz_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":t.push({id:`reco_exercice_${l}`,lacuneId:l,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${d}/20 de moyenne, concentre-toi sur les exercices pratiques. ${m==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),t.push({id:`reco_cours2_${l}`,lacuneId:l,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":t.push({id:`reco_consolider_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${d}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break}}),t}async function JK(e){try{const t=await ip(e);if(t.length===0)return{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;t.forEach(j=>{const S=uj(j.datePassage),w=`${S.getFullYear()}-${S.getMonth()}-${S.getDate()}`;n.add(w)});const a=Array.from(n).map(j=>{const[S,w,A]=j.split("-").map(Number);return new Date(S,w,A)}).sort((j,S)=>S.getTime()-j.getTime()),l=a.length,o=a[0];let u=0;const d=new Date;d.setHours(0,0,0,0);const m=a[0];if(vx(m,d)<=1){u=1;for(let j=1;j<a.length&&vx(a[j],a[j-1])===1;j++)u++}let h=0,v=1;for(let j=1;j<a.length;j++)vx(a[j],a[j-1])===1?v++:(h=Math.max(h,v),v=1);h=Math.max(h,v,u);const y=ap(),x=[];for(let j=0;j<7;j++){const S=new Date(y);S.setDate(y.getDate()+j);const w=a.some(A=>wA(A,S));x.push(w)}const _=[];for(let j=0;j<4;j++){const S=new Date(y);S.setDate(y.getDate()-j*7);let w=0;for(let C=0;C<7;C++){const E=new Date(S);E.setDate(S.getDate()+C),a.some(O=>wA(O,E))&&w++}const A=Math.ceil((S.getDate()+new Date(S.getFullYear(),S.getMonth(),1).getDay())/7);_.push({semaine:j===0?"Cette sem.":`Sem. -${j}`,joursActifs:w})}return{userId:e,streakActuel:u,meilleurStreak:h,dernierJourActif:o,totalJoursActifs:l,semaineCourante:x,historiqueHebdo:_.reverse()}}catch(t){return console.error("Erreur calcul streak:",t),{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function eX(e,t,n){const a=[],l=ap(),o=XK(),u=t.length>2?5:3;if(a.push({id:`obj_quiz_${e}_${l.getTime()}`,userId:e,titre:`Passer ${u} quiz cette semaine`,description:`Entrane-toi en passant au moins ${u} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:u,progression:0,statut:"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Travailleur"'}),t.length>0){const m=t[0],p=Math.min(m.moyenne+3,14);a.push({id:`obj_score_${e}_${l.getTime()}`,userId:e,titre:`Atteindre ${Math.round(p)}/20 en ${m.disciplineNom}`,description:`Ta moyenne actuelle est de ${m.moyenne}/20. Vise ${Math.round(p)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(p),progression:Math.round(m.moyenne),statut:"en_cours",disciplineId:m.disciplineId,disciplineNom:m.disciplineNom,dateDebut:l,dateFin:o,recompense:' Badge "En progrs"'})}const d=n.streakActuel>=5?7:n.streakActuel+2;return a.push({id:`obj_streak_${e}_${l.getTime()}`,userId:e,titre:`Maintenir un streak de ${d} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:d,progression:n.streakActuel,statut:n.streakActuel>=d?"atteint":"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Flamme"'}),a}function tX(e,t,n,a){let l=0;if(a.length>0){const v=a.reduce((y,x)=>y+x.pourcentage/100*20,0)/a.length;l=Math.min(v/20*100,100)}let o=100;const u=e.filter(v=>v.niveauUrgence==="critique").length,d=e.filter(v=>v.niveauUrgence==="important").length;o-=u*25,o-=d*15,o=Math.max(o,0);const m=Math.min(t.streakActuel/7*100,100);let p=0;n.length>0&&(p=n.filter(y=>y.statut==="atteint").length/n.length*100);const h=l*.4+o*.25+m*.2+p*.15;return Math.round(Math.min(Math.max(h,0),100))}function rX(e,t,n){const a=ap(),l=t.filter(o=>uj(o.datePassage)>=a);return e.map(o=>{const u={...o};switch(o.type){case"quiz_count":u.progression=l.length;break;case"score_min":if(o.disciplineId){const d=l.filter(m=>m.disciplineId===o.disciplineId);if(d.length>0){const m=Math.max(...d.map(p=>p.pourcentage));u.progression=Math.round(m/100*20)}}break;case"streak":u.progression=n.streakActuel;break}return u.progression>=u.cible&&(u.statut="atteint"),u})}async function dj(e){try{const t=await WK(e),n=ZK(t),a=await JK(e);let l=eX(e,t,a);const o=await ip(e);l=rX(l,o,a);const u=tX(t,a,l,o);return{lacunes:t,recommandations:n,streak:a,objectifs:l,scoreGlobal:u}}catch(t){return console.error("Erreur suivi complet:",t),{lacunes:[],recommandations:[],streak:{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function im(e){switch(e){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function jP(e){switch(e){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function NP(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function nX(e){return e>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":e>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":e>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":e>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function aX(e){return e.cible===0?0:Math.min(Math.round(e.progression/e.cible*100),100)}const iX="PEDA",sX=4,lX=5,oX=40,_P=5;function qa(e){return e instanceof Me?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function SP(e){const t=new Date,n=t.getDay(),a=n===0?-6:1-n,l=new Date(t);return l.setDate(t.getDate()+a),l.setHours(0,0,0,0),l}function cX(e){const t=SP(),n=new Date(t);return n.setDate(t.getDate()+6),n.setHours(23,59,59,999),n}function CA(e){const t=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${e.getDate()} ${t[e.getMonth()]}`}function wP(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function uX(e){try{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",a="";for(let u=0;u<sX;u++)n+=t.charAt(Math.floor(Math.random()*t.length)),a+=t.charAt(Math.floor(Math.random()*t.length));const l=`${iX}-${n}-${a}`,o=Ne(te,"users",e);return await He(o,{codeParent:l,codeParentGenere:new Date}),l}catch(t){throw console.error("Erreur gnration code invitation:",t),new Error("Impossible de gnrer le code d'invitation")}}async function dX(e){try{const t=Ne(te,"users",e),n=await Dt(t);if(!n.exists())throw new Error("lve introuvable");const a=n.data();return a.codeParent?a.codeParent:await uX(e)}catch(t){throw console.error("Erreur rcupration code invitation:",t),new Error("Impossible de rcuprer le code d'invitation")}}async function fX(e,t){try{const n=t.trim().toUpperCase(),a=_e(te,"users"),l=Te(a,we("codeParent","==",n),we("role","==","eleve"),cn(1)),o=await De(l);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=o.docs[0],d=u.data(),m=u.id,p=_e(te,"liens_parent_enfant"),h=Te(p,we("parentId","==",e),we("enfantId","==",m),we("statut","==","actif"),cn(1));if(!(await De(h)).empty)throw new Error("Cet enfant est dj li  votre compte.");const y={parentId:e,enfantId:m,enfantNom:d.displayName||d.email,enfantEmail:d.email,enfantClasse:d.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await Pt(p,y)).id,...y}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function mX(e){try{const t=_e(te,"liens_parent_enfant"),n=Te(t,we("parentId","==",e),we("statut","==","actif"),Ke("dateCreation","desc"));return(await De(n)).docs.map(l=>({id:l.id,...l.data(),dateCreation:qa(l.data().dateCreation),dateDerniereConsultation:l.data().dateDerniereConsultation?qa(l.data().dateDerniereConsultation):void 0}))}catch(t){return console.error("Erreur rcupration enfants lis:",t),[]}}async function pX(e,t){try{const n=Ne(te,"liens_parent_enfant",e),a=await Dt(n);if(!a.exists())throw new Error("Lien introuvable");if(a.data().parentId!==t)throw new Error("Action non autorise");await He(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function hX(e,t){try{const n=_e(te,"liens_parent_enfant"),a=Te(n,we("parentId","==",e),we("enfantId","==",t),we("statut","==","actif"),cn(1)),l=await De(a);if(l.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=Ne(te,"users",t),u=await Dt(o);if(!u.exists())throw new Error("Profil de l'enfant introuvable.");const d=u.data(),m=await dj(t),p=await ip(t),h=p.slice(0,_P).map(_=>({quizTitre:_.quizTitre||"Quiz",disciplineNom:_.disciplineNom||"Discipline",pourcentage:_.pourcentage,noteSur20:Math.round(_.pourcentage/100*20*10)/10,reussi:_.reussi,datePassage:qa(_.datePassage)})),v=await vX(e,t,d.displayName||d.email,m.lacunes,m.streak,m.scoreGlobal,p),y=gX(t,d.displayName||d.email,m,p),x=l.docs[0];return await He(Ne(te,"liens_parent_enfant",x.id),{dateDerniereConsultation:new Date}),{enfant:{id:t,nom:d.displayName||d.email,email:d.email,classe:d.classe||void 0,derniereConnexion:d.lastLogin?qa(d.lastLogin):void 0},scoreGlobal:m.scoreGlobal,streak:{actuel:m.streak.streakActuel,meilleur:m.streak.meilleurStreak,semaineCourante:m.streak.semaineCourante},lacunes:m.lacunes.map(_=>({disciplineNom:_.disciplineNom,moyenne:_.moyenne,niveauUrgence:_.niveauUrgence,tendance:_.tendance})),objectifs:m.objectifs.map(_=>({titre:_.titre,progression:_.progression,cible:_.cible,statut:_.statut})),derniersQuiz:h,resume:y,alertes:v}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function vX(e,t,n,a,l,o,u){const d=[],m=new Date;if(a.filter(h=>h.niveauUrgence==="critique").forEach(h=>{d.push({id:`alerte_parent_lacune_${h.id}`,parentId:e,enfantId:t,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${h.disciplineNom}`,message:`${n} a une moyenne de ${h.moyenne}/20 en ${h.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:m})}),l.dernierJourActif){const h=wP(qa(l.dernierJourActif),m);h>=lX&&d.push({id:`alerte_parent_inactif_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${h} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:m})}else u.length===0&&d.push({id:`alerte_parent_jamais_actif_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:m});o<oX&&u.length>0&&d.push({id:`alerte_parent_score_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${n} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:m}),a.filter(h=>h.tendance==="hausse").forEach(h=>{d.push({id:`alerte_parent_progression_${h.id}`,parentId:e,enfantId:t,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${h.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${h.disciplineNom}.`,lue:!1,dateCreation:m})}),l.streakActuel>=5&&d.push({id:`alerte_parent_streak_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${l.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${l.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:m});const p={critique:0,important:1,modere:2,info:3};return d.sort((h,v)=>p[h.niveau]-p[v.niveau]),d}function gX(e,t,n,a){const l=SP(),o=cX(),u=new Date(l);u.setDate(u.getDate()-7);const d=new Date(o);d.setDate(d.getDate()-7);const m=a.filter(E=>{const O=qa(E.datePassage);return O>=l&&O<=o}),p=a.filter(E=>{const O=qa(E.datePassage);return O>=u&&O<=d}),h=m.slice(0,_P).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:qa(E.datePassage)})),v=xX(m,p),y=new Set;m.forEach(E=>{const O=qa(E.datePassage);y.add(`${O.getFullYear()}-${O.getMonth()}-${O.getDate()}`)});const x=m.reduce((E,O)=>E+(O.tempsEcoule||5),0);let _=0;if(p.length>0){const E=p.reduce((O,D)=>O+D.pourcentage,0)/p.length;_=Math.round(E)}let j="stable";const S=n.scoreGlobal-_;S>5?j="hausse":S<-5&&(j="baisse");const w=n.lacunes.filter(E=>E.niveauUrgence==="critique"||E.niveauUrgence==="important").map(E=>E.disciplineNom),A=n.objectifs.filter(E=>E.statut==="atteint").length,C=`${CA(l)} - ${CA(o)} ${o.getFullYear()}`;return{enfantId:e,enfantNom:t,semaine:C,dateDebut:l,dateFin:o,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:_,evolutionScore:j,nombreQuizSemaine:m.length,tempsEstimeMinutes:Math.round(x),joursActifsSemaine:y.size,streakActuel:n.streak.streakActuel,derniersQuiz:h,evolutionDisciplines:v,lacunesCritiques:n.lacunes.filter(E=>E.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(E=>E.niveauUrgence==="important").length,disciplinesEnDifficulte:w,objectifsAtteints:A,objectifsTotal:n.objectifs.length}}function xX(e,t){const n=new Map;e.forEach(o=>{n.has(o.disciplineId)||n.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),n.get(o.disciplineId).scores.push(o.pourcentage)});const a=new Map;t.forEach(o=>{a.has(o.disciplineId)||a.set(o.disciplineId,[]),a.get(o.disciplineId).push(o.pourcentage)});const l=[];return n.forEach((o,u)=>{const d=o.scores.reduce((_,j)=>_+j,0)/o.scores.length,m=a.get(u)||[],p=m.length>0?m.reduce((_,j)=>_+j,0)/m.length:d,h=Math.round(d/100*20*10)/10,v=Math.round(p/100*20*10)/10,y=Math.round((h-v)*10)/10;let x="stable";y>1?x="hausse":y<-1&&(x="baisse"),l.push({disciplineNom:o.nom,disciplineId:u,moyenneSemainePrecedente:v,moyenneSemaineCourante:h,evolution:x,ecart:y})}),l}function yX(e){return im(e)}function bX(e){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[e]||"Alerte"}function EA(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function jX(e){return e>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":e>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":e>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":e>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function gx(e){const n=wP(e,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const NX="PROF",_X=4,Qd="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",CP=8,SX=7,wX=16;function Is(e){return e instanceof Me?e.toDate():e instanceof Date?e:e?.seconds?new Me(e.seconds,e.nanoseconds||0).toDate():new Date(e)}function CX(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function EP(){let e=0;const t=10;for(;e<t;){let n="",a="";for(let d=0;d<_X;d++)n+=Qd.charAt(Math.floor(Math.random()*Qd.length)),a+=Qd.charAt(Math.floor(Math.random()*Qd.length));const l=`${NX}-${n}-${a}`,o=Te(_e(te,"groupes_prof"),we("codeInvitation","==",l),cn(1));if((await De(o)).empty)return l;e++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function EX(e,t,n){try{const a=await EP(),l={profId:e,profNom:t,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:a,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await Pt(_e(te,"groupes_prof"),l);return console.log(` Groupe "${n.nom}" cr avec code: ${a}`),{id:o.id,...l}}catch(a){throw console.error(" Erreur cration groupe:",a),new Error("Impossible de crer le groupe. Ressayez.")}}async function AP(e){try{const t=Te(_e(te,"groupes_prof"),we("profId","==",e),Ke("dateCreation","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data(),dateCreation:Is(a.data().dateCreation),dateMiseAJour:a.data().dateMiseAJour?Is(a.data().dateMiseAJour):void 0}))}catch(t){throw console.error(" Erreur rcupration groupes:",t),new Error("Impossible de charger vos groupes.")}}async function AX(e){try{const t=await Dt(Ne(te,"groupes_prof",e));if(!t.exists())return null;const n=t.data();return{id:t.id,...n,dateCreation:Is(n.dateCreation),dateMiseAJour:n.dateMiseAJour?Is(n.dateMiseAJour):void 0}}catch(t){return console.error(" Erreur rcupration groupe:",t),null}}async function zP(e,t){try{const n=Ne(te,"groupes_prof",e);await He(n,{...t,dateMiseAJour:new Date}),console.log(` Groupe ${e} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function zX(e){try{const t=$a(te),n=Te(_e(te,"inscriptions_groupe"),we("groupeId","==",e));(await De(n)).docs.forEach(l=>t.delete(l.ref)),t.delete(Ne(te,"groupes_prof",e)),await t.commit(),console.log(` Groupe ${e} et ses inscriptions supprims`)}catch(t){throw console.error(" Erreur suppression groupe:",t),new Error("Impossible de supprimer le groupe.")}}async function OX(e){await zP(e,{statut:"archive"})}async function DX(e){try{const t=await EP();return await He(Ne(te,"groupes_prof",e),{codeInvitation:t,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${e}: ${t}`),t}catch(t){throw console.error(" Erreur rgnration code:",t),new Error("Impossible de rgnrer le code.")}}async function MX(e,t,n,a){try{const l=a.trim().toUpperCase(),o=Te(_e(te,"groupes_prof"),we("codeInvitation","==",l),cn(1)),u=await De(o);if(u.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const d=u.docs[0],m=d.data();if(m.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const p=Te(_e(te,"inscriptions_groupe"),we("groupeId","==",d.id),we("eleveId","==",e),we("statut","==","actif"),cn(1));if(!(await De(p)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const v={groupeId:d.id,eleveId:e,eleveNom:t,eleveEmail:n,statut:"actif",dateInscription:new Date},y=await Pt(_e(te,"inscriptions_groupe"),v);return await He(Ne(te,"groupes_prof",d.id),{nombreInscrits:$s(1),dateMiseAJour:new Date}),console.log(` lve ${t} inscrit au groupe "${m.nom}"`),{id:y.id,...v}}catch(l){throw console.error(" Erreur inscription groupe:",l),l}}async function sp(e,t="actif"){try{const n=Te(_e(te,"inscriptions_groupe"),we("groupeId","==",e),we("statut","==",t),Ke("dateInscription","asc"));return(await De(n)).docs.map(l=>({id:l.id,...l.data(),dateInscription:Is(l.data().dateInscription),dateRetrait:l.data().dateRetrait?Is(l.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function PX(e){try{const t=Te(_e(te,"inscriptions_groupe"),we("eleveId","==",e),we("statut","==","actif")),n=await De(t);if(n.empty)return[];const a=[];for(const l of n.docs){const o=l.data().groupeId,u=await AX(o);u&&u.statut==="actif"&&a.push(u)}return a}catch(t){return console.error(" Erreur rcupration groupes lve:",t),[]}}async function kX(e,t){try{await He(Ne(te,"inscriptions_groupe",e),{statut:"retire",dateRetrait:new Date}),await He(Ne(te,"groupes_prof",t),{nombreInscrits:$s(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function fj(e){try{const n=(await sp(e)).map(y=>y.eleveId);if(n.length===0)return{groupeId:e,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const a=[],l=[];for(let y=0;y<n.length;y+=10)l.push(n.slice(y,y+10));for(const y of l){const x=Te(_e(te,"quiz_results"),we("userId","in",y));(await De(x)).docs.forEach(j=>a.push({id:j.id,...j.data()}))}const o=new Map;for(const y of a){const x=y.userId;o.has(x)||o.set(x,{total:0,somme:0,reussis:0});const _=o.get(x);_.total++,_.somme+=y.score||0,(y.score||0)>=10&&_.reussis++}let u=0,d=0,m=0,p=0,h=20,v=0;for(const[,y]of o){const x=y.total>0?y.somme/y.total:0;u+=x,d++,v+=y.total,x<CP&&m++,x>p&&(p=x),x<h&&(h=x)}return d===0&&(h=0),{groupeId:e,nombreEleves:n.length,moyenneClasse:d>0?Math.round(u/d*10)/10:0,tauxReussite:v>0?Math.round(Array.from(o.values()).reduce((y,x)=>y+x.reussis,0)/v*100):0,tauxParticipation:Math.round(d/n.length*100),totalQuizPasses:v,elevesEnDifficulte:m,meilleureNote:Math.round(p*10)/10,pireNote:Math.round(h*10)/10,derniereMiseAJour:new Date}}catch(t){throw console.error(" Erreur calcul stats groupe:",t),new Error("Impossible de calculer les statistiques du groupe.")}}async function TX(e){try{const t=await sp(e);if(t.length===0)return[];const n=[];for(const a of t)try{const l=await dj(a.eleveId),o=Te(_e(te,"quiz_results"),we("userId","==",a.eleveId),Ke("datePassage","desc")),d=(await De(o)).docs.map(x=>x.data());let m=0,p=0,h;if(d.length>0){const x=d.reduce((_,j)=>_+(j.score||0),0);m=Math.round(x/d.length*10)/10,p=Math.round(d.filter(_=>(_.score||0)>=10).length/d.length*100),h=Is(d[0].datePassage)}let v="stable";if(d.length>=4){const x=d.slice(0,Math.ceil(d.length/2)),_=d.slice(Math.ceil(d.length/2)),j=x.reduce((w,A)=>w+(A.score||0),0)/x.length,S=_.reduce((w,A)=>w+(A.score||0),0)/_.length;j-S>1?v="hausse":S-j>1&&(v="baisse")}const y=l.lacunes.map(x=>({disciplineNom:x.disciplineNom,chapitre:x.chapitre,moyenne:x.moyenne,niveauUrgence:x.niveauUrgence}));n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:m,totalQuiz:d.length,tauxReussite:p,scoreGlobal:l.scoreGlobal,streak:{actuel:l.streak.streakActuel,meilleur:l.streak.meilleurStreak},lacunes:y,dernierQuiz:h,tendance:v})}catch(l){console.warn(` Suivi incomplet pour lve ${a.eleveNom}:`,l),n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((a,l)=>l.moyenne-a.moyenne),n}catch(t){throw console.error(" Erreur stats lves groupe:",t),new Error("Impossible de charger les statistiques des lves.")}}async function qX(e,t,n){try{const l=(await sp(e)).map(x=>x.eleveId);if(l.length===0)return null;let o=null,u="quiz_results";if(n!=="quizzes_v2"){if(n!=="quizzes"){const x=await Dt(Ne(te,"quizzes_v2",t));if(x.exists())o=x.data(),u="quiz_results_v2";else{const _=await Dt(Ne(te,"quizzes",t));_.exists()&&(o=_.data(),u="quiz_results")}}}if(!o)return null;const d=[],m=[];for(let x=0;x<l.length;x+=10)m.push(l.slice(x,x+10));for(const x of m){const _=Te(_e(te,u),we("quizId","==",t),we("userId","in",x));(await De(_)).docs.forEach(S=>d.push(S.data()))}if(d.length===0)return null;const p=u==="quiz_results_v2",h=d.map(x=>p?x.note20||(x.scoreMax>0?x.score/x.scoreMax*20:0):x.score||0),v=d.map(x=>x.tempsEcoule||0),y=[];if(p&&o.questions)for(let x=0;x<o.questions.length;x++){const _=o.questions[x];let j=0,S=0;for(const C of d){const E=C.detailsParQuestion?.find(O=>O.questionId===_.id);E&&(S++,E.isCorrect||j++)}const w=S>0?Math.round(j/S*100):0,A=_.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${x+1}`;y.push({questionIndex:x,questionTexte:A,tauxEchec:w,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let x=0;x<o.questions.length;x++){const _=o.questions[x];let j=0;const S=new Map;for(const C of d){const E=C.reponses?.[x];E!==void 0&&(S.set(E,(S.get(E)||0)+1),E!==_.reponseCorrecte&&j++)}const w=Math.round(j/d.length*100),A=Array.from(S.entries()).filter(([C])=>C!==_.reponseCorrecte).map(([C,E])=>({reponse:_.options?.[C]||`Option ${C+1}`,nombre:E})).sort((C,E)=>E.nombre-C.nombre);y.push({questionIndex:x,questionTexte:_.question,tauxEchec:w,reponseCorrecte:_.options?.[_.reponseCorrecte]||"N/A",reponsesFrequentes:A})}return y.sort((x,_)=>_.tauxEchec-x.tauxEchec),{quizId:t,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:d.length,moyenneScore:Math.round(h.reduce((x,_)=>x+_,0)/h.length*10)/10,tauxReussite:Math.round(h.filter(x=>x>=10).length/h.length*100),tempsEcouleMoyen:Math.round(v.reduce((x,_)=>x+_,0)/v.length),questionsRatees:y}}catch(a){return console.error(" Erreur analyse quiz groupe:",a),null}}async function RX(e){try{const t=[];try{const n=Te(_e(te,"quizzes"),we("disciplineId","==",e),Ke("createdAt","desc"));(await De(n)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(n){console.warn(" Recherche quizzes choue (index manquant ?):",n)}try{const n=Te(_e(te,"quizzes_v2"),we("disciplineId","==",e),Ke("createdAt","desc"));(await De(n)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(n){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",n)}return console.log(` ${t.length} quiz trouv(s) pour discipline ${e}`),t}catch(t){return console.error(" Erreur rcupration quiz par matire:",t),[]}}function IX(e,t){const n=[],a=new Date;for(const o of e){if(o.totalQuiz>0&&o.moyenne<CP&&n.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(u=>u.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:a}),o.dernierQuiz){const u=CX(o.dernierQuiz,a);u>=SX&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a pas fait de quiz depuis ${u} jours.`,niveauUrgence:u>=14?"important":"info",dateCreation:a})}else o.totalQuiz===0&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:a});o.tendance==="baisse"&&o.totalQuiz>=4&&n.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:a}),o.moyenne>=wX&&o.totalQuiz>=3&&n.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:a})}const l={critique:0,important:1,info:2};return n.sort((o,u)=>l[o.niveauUrgence]-l[u.niveauUrgence]),n}function LX(e,t){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],a=e.map(o=>{const u=o.lacunes.map(d=>`${d.disciplineNom} (${d.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${u}"`,o.tendance].join(",")});return"\uFEFF"+[n.join(","),...a].join(`
`)}function $X(e,t){const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`${t}.csv`,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}const BX=()=>{const{currentUser:e}=it(),[t,n]=g.useState([]),[a,l]=g.useState(!1),[o,u]=g.useState(""),[d,m]=g.useState(!0),[p,h]=g.useState(!1),[v,y]=g.useState(null),[x,_]=g.useState(null),j=g.useCallback(async()=>{if(e?.uid)try{m(!0);const w=await PX(e.uid);n(w)}catch(w){console.error("Erreur chargement groupes:",w)}finally{m(!1)}},[e?.uid]);g.useEffect(()=>{j()},[j]);const S=async w=>{if(w.preventDefault(),!(!e?.uid||!o.trim()))try{h(!0),y(null),_(null),await MX(e.uid,e.displayName||e.email||"lve",e.email||"",o),_("Tu as rejoint le groupe avec succs ! "),u(""),l(!1),await j(),setTimeout(()=>_(null),5e3)}catch(A){y(A.message||"Impossible de rejoindre le groupe.")}finally{h(!1)}};return r.jsxs("div",{className:"rejoindre-groupe-section",children:[r.jsxs("div",{className:"rejoindre-groupe-header",children:[r.jsx("h3",{children:" Mes groupes-classes"}),r.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>l(!a),children:a?" Annuler":" Rejoindre un groupe"})]}),v&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",v,r.jsx("button",{onClick:()=>y(null),className:"prof-alert-close",children:""})]}),x&&r.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:x}),a&&r.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[r.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),r.jsxs("form",{onSubmit:S,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:w=>u(w.target.value.toUpperCase()),maxLength:14,disabled:p,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:p||o.length<14,children:p?" Vrification...":" Rejoindre"})]})]}),d?r.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):t.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[r.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),r.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map(w=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[r.jsxs("div",{children:[r.jsx("strong",{style:{color:"#1f2937"},children:w.nom}),r.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[w.matiereNom,"  Prof: ",w.profNom]})]}),r.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},w.id))})]})},UX=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":e>0?"#ef4444":"#d1d5db",AA=({pourcentage:e,label:t,size:n="md",showPercent:a=!0,color:l,showCheck:o=!0,className:u=""})=>{const[d,m]=g.useState(0);g.useEffect(()=>{const x=setTimeout(()=>{m(Math.min(100,Math.max(0,e)))},100);return()=>clearTimeout(x)},[e]);const h={sm:"4px",md:"8px",lg:"12px"}[n],v=l||UX(e),y=e>=100;return r.jsxs("div",{className:`progress-bar-wrapper ${u}`,children:[(t||a)&&r.jsxs("div",{className:"progress-bar-header",children:[t&&r.jsx("span",{className:"progress-bar-label",children:t}),a&&r.jsxs("span",{className:"progress-bar-percent",style:{color:v},children:[y&&o?" ":"",e,"%"]})]}),r.jsx("div",{className:"progress-bar-track",style:{height:h},children:r.jsx("div",{className:"progress-bar-fill",style:{width:`${d}%`,backgroundColor:v,height:"100%"}})})]})},FX=()=>{const e=ot(),{currentUser:t}=it(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[m,p]=g.useState([]),[h,v]=g.useState([]),[y,x]=g.useState(null),[_,j]=g.useState([]),[S,w]=g.useState("all"),[A,C]=g.useState(!0),[E,O]=g.useState("overview"),[D,T]=g.useState(null),[k,R]=g.useState(!1),[L,Q]=g.useState(!1),$=async()=>{if(t){R(!0);try{const H=await dX(t.uid);T(H)}catch(H){console.error("Erreur gnration code parent :",H)}finally{R(!1)}}},F=()=>{D&&(navigator.clipboard.writeText(D),Q(!0),setTimeout(()=>Q(!1),2e3))};if(g.useEffect(()=>{(async()=>{if(t){C(!0);try{await w3(t.uid);const[B,I,pe,re,de,ge]=await Promise.all([h3(t.uid),v3(t.uid),g3(t.uid,20),fm(t.uid,10),a2().catch(()=>[]),N3(t.uid)]);a(B),o(I),d(pe),p(re),v(de),x(ge);const ye=C3(B,I,ge);j(ye)}catch(B){console.error("Erreur chargement dashboard :",B)}finally{C(!1)}}})()},[t]),A)return r.jsxs("div",{className:"sd-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const Y=_.filter(H=>H.obtenu),M=_.length,q=t?.displayName||t?.email?.split("@")[0]||"lve",Z=S==="all"?_:_.filter(H=>H.categorie===S);return r.jsxs("div",{className:"student-dashboard",children:[r.jsxs("div",{className:"sd-welcome",children:[r.jsxs("div",{className:"sd-welcome-text",children:[r.jsxs("h1",{children:["Bienvenue, ",q," "]}),r.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),r.jsxs("div",{className:"sd-welcome-badges-row",children:[t?.isPremium&&r.jsxs("span",{className:"sd-premium-badge",children:[r.jsx(an,{size:14})," Premium"]}),y&&y.streakActuel>0&&r.jsxs("span",{className:"sd-streak-badge",children:[" ",y.streakActuel," jour",y.streakActuel>1?"s":""]})]})]}),r.jsxs("div",{className:"sd-stats-grid",children:[r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:r.jsx(ln,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),r.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:r.jsx(Cv,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",style:{color:Ul(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),r.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:r.jsx(Vl,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsx("span",{className:"sd-stat-value",children:y?.totalRessourcesVues||0}),r.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:r.jsx(YA,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[y?.streakActuel||0," "]}),r.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:r.jsx(KA,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),r.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:r.jsx(Ui,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[y?.disciplinesCompletees||0,"/",y?.disciplinesCommencees||0]}),r.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),r.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[r.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),D?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[r.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:D}),r.jsx("button",{className:"sd-btn",onClick:F,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:L?"#10b981":"#f3f4f6",color:L?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:L?" Copi !":" Copier"})]}):r.jsx("button",{className:"sd-btn sd-btn-primary",onClick:$,disabled:k,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:k?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):r.jsx(r.Fragment,{children:" Gnrer mon code"})})]}),r.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:r.jsx(BX,{})}),r.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(ln,{size:18})," Cours en ligne"]}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Des cours complets du programme sngalais, accessibles partout."}),r.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e("/cours"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Gl,{size:16})," Accder aux cours"]})]}),r.jsxs("div",{className:"sd-tabs",children:[r.jsxs("button",{className:`sd-tab ${E==="overview"?"active":""}`,onClick:()=>O("overview"),children:[r.jsx(Cs,{size:16})," Vue d'ensemble"]}),r.jsxs("button",{className:`sd-tab ${E==="progression"?"active":""}`,onClick:()=>O("progression"),children:[r.jsx(bc,{size:16})," Progression"]}),r.jsxs("button",{className:`sd-tab ${E==="history"?"active":""}`,onClick:()=>O("history"),children:[r.jsx(Ev,{size:16})," Historique"]}),r.jsxs("button",{className:`sd-tab ${E==="badges"?"active":""}`,onClick:()=>O("badges"),children:[r.jsx(Ui,{size:16})," Badges (",Y.length,"/",M,")"]})]}),E==="overview"&&r.jsxs("div",{className:"sd-overview",children:[u.length>1&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(bc,{size:18})," volution de vos scores"]}),r.jsx("div",{className:"sd-chart-container",children:r.jsx(cw,{width:"100%",height:280,children:r.jsxs(FK,{data:u,children:[r.jsx(my,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(xy,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),r.jsx(jy,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),r.jsx(vE,{formatter:H=>[`${H}%`,"Score"],labelFormatter:H=>`Date : ${H}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),r.jsx(nP,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),l.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(Cs,{size:18})," Moyennes par discipline"]}),r.jsx("div",{className:"sd-chart-container",children:r.jsx(cw,{width:"100%",height:280,children:r.jsxs(HK,{data:l,layout:"vertical",children:[r.jsx(my,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),r.jsx(xy,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),r.jsx(jy,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),r.jsx(vE,{formatter:H=>[`${H}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),r.jsx(oP,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:l.map((H,B)=>r.jsx(Jb,{fill:Ul(H.moyenne)},B))})]})})})]}),h.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(Gl,{size:18})," Quiz disponibles"]}),r.jsx("div",{className:"sd-quiz-grid",children:h.slice(0,6).map(H=>{const B=H.isPremium&&!t?.isPremium;return r.jsxs("div",{className:`sd-quiz-card ${B?"locked":""}`,onClick:()=>!B&&e(`/quiz/${H.id}`),children:[H.isPremium&&r.jsxs("span",{className:"sd-quiz-badge-premium",children:[B?r.jsx(bx,{size:10}):r.jsx(an,{size:10})," Premium"]}),r.jsx("h4",{className:"sd-quiz-title",children:H.titre}),r.jsxs("div",{className:"sd-quiz-meta",children:[r.jsxs("span",{children:[r.jsx(ln,{size:12})," ",H.questions.length," questions"]}),r.jsxs("span",{children:[r.jsx(Xl,{size:12})," ",H.duree," min"]})]}),!B&&r.jsxs("button",{className:"sd-quiz-play-btn",children:[r.jsx(Gl,{size:14})," Commencer"]}),B&&r.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:I=>{I.stopPropagation(),e("/premium")},children:[r.jsx(bx,{size:14})," Dbloquer"]})]},H.id)})})]}),n&&n.totalQuizPasses===0&&(!y||y.totalRessourcesVues===0)&&r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(Cv,{size:48}),r.jsx("h3",{children:"Commencez votre parcours !"}),r.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),h.length>0&&r.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e(`/quiz/${h[0].id}`),children:[r.jsx(Gl,{size:18})," Passer un quiz"]})]})]}),E==="progression"&&r.jsxs("div",{className:"sd-progression",children:[r.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(bc,{size:18})," Avancement global"]}),r.jsx(AA,{pourcentage:y?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),r.jsxs("div",{className:"sd-prog-stats-row",children:[r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:y?.totalRessourcesVues||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:y?.totalQuizReussis||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:y?.disciplinesCommencees||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsxs("span",{className:"sd-prog-stat-number",children:[" ",y?.streakActuel||0]}),r.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",y?.meilleurStreak||0,")"]})]})]})]}),y&&y.parDiscipline.length>0?r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(Cs,{size:18})," Par discipline"]}),r.jsx("div",{className:"sd-prog-disciplines",children:y.parDiscipline.map(H=>r.jsxs("div",{className:"sd-prog-disc-card",children:[r.jsxs("div",{className:"sd-prog-disc-header",children:[r.jsx("span",{className:"sd-prog-disc-name",children:H.disciplineNom}),H.pourcentage>=100&&r.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),r.jsx(AA,{pourcentage:H.pourcentage,size:"md",showPercent:!0}),r.jsxs("div",{className:"sd-prog-disc-details",children:[r.jsxs("span",{children:[r.jsx(Vl,{size:12})," ",H.ressourcesVues.length,"/",H.totalRessources," ressources"]}),r.jsxs("span",{children:[r.jsx(Rt,{size:12})," ",H.quizReussis.length,"/",H.totalQuiz," quiz russis"]})]})]},H.disciplineId))})]}):r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(Vl,{size:48}),r.jsx("h3",{children:"Aucune progression enregistre"}),r.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),l.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(Cv,{size:18})," Performance quiz par discipline"]}),r.jsx("div",{className:"sd-disc-list",children:l.map(H=>r.jsxs("div",{className:"sd-disc-card",children:[r.jsxs("div",{className:"sd-disc-header",children:[r.jsx("span",{className:"sd-disc-name",children:H.disciplineNom}),r.jsxs("span",{className:"sd-disc-tendance",children:[H.tendance==="up"&&r.jsx(bc,{size:16,className:"tendance-up"}),H.tendance==="down"&&r.jsx(Yq,{size:16,className:"tendance-down"}),H.tendance==="stable"&&r.jsx(Kq,{size:16,className:"tendance-stable"})]})]}),r.jsxs("div",{className:"sd-disc-stats",children:[r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",style:{color:Ul(H.moyenne)},children:[H.moyenne,"%"]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsx("span",{className:"sd-disc-stat-value",children:H.nombreQuiz}),r.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",children:[H.meilleurScore,"%"]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",children:[H.quizReussis,"/",H.nombreQuiz]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),r.jsx("div",{className:"sd-disc-bar",children:r.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${H.moyenne}%`,background:Ul(H.moyenne)}})})]},H.disciplineId))})]})]}),E==="history"&&r.jsx("div",{className:"sd-history",children:m.length===0?r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(Ev,{size:48}),r.jsx("h3",{children:"Aucun quiz pass"}),r.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):r.jsx("div",{className:"sd-history-list",children:m.map(H=>{const B=H.datePassage?.toDate?H.datePassage.toDate():new Date(H.datePassage);return r.jsxs("div",{className:`sd-history-item ${H.reussi?"success":"fail"}`,children:[r.jsx("div",{className:`sd-history-icon ${H.reussi?"success":"fail"}`,children:H.reussi?r.jsx(Rt,{size:20}):r.jsx(jx,{size:20})}),r.jsxs("div",{className:"sd-history-content",children:[r.jsxs("div",{className:"sd-history-top",children:[r.jsx("span",{className:"sd-history-title",children:H.quizTitre}),r.jsx("span",{className:"sd-history-discipline",children:H.disciplineNom})]}),r.jsxs("div",{className:"sd-history-meta",children:[r.jsxs("span",{children:[r.jsx(Ev,{size:12}),B.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),r.jsxs("span",{children:[r.jsx(Xl,{size:12})," ",u2(H.tempsEcoule)]}),r.jsxs("span",{children:[r.jsx(Rt,{size:12})," ",H.bonnesReponses,"/",H.nombreQuestions]})]})]}),r.jsxs("div",{className:"sd-history-score",style:{color:Ul(H.pourcentage)},children:[r.jsxs("span",{className:"sd-history-score-value",children:[H.pourcentage,"%"]}),r.jsx("span",{className:"sd-history-score-label",children:d2(H.pourcentage)})]})]},H.id)})})}),E==="badges"&&r.jsxs("div",{className:"sd-badges",children:[r.jsxs("div",{className:"sd-badges-summary",children:[r.jsxs("div",{className:"sd-badges-circle",children:[r.jsx("span",{className:"sd-badges-count",children:Y.length}),r.jsxs("span",{className:"sd-badges-total",children:["/ ",M]})]}),r.jsx("p",{children:"badges obtenus"}),r.jsx("div",{className:"sd-badges-progress",children:r.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${Y.length/M*100}%`}})})]}),r.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(H=>r.jsx("button",{className:`sd-badge-filter-btn ${S===H.key?"active":""}`,onClick:()=>w(H.key),children:H.label},H.key))}),r.jsx("div",{className:"sd-badges-grid",children:Z.map(H=>r.jsxs("div",{className:`sd-badge-card ${H.obtenu?"obtained":"locked"}`,children:[r.jsx("span",{className:"sd-badge-icon",children:H.icone}),r.jsx("h4",{className:"sd-badge-name",children:H.nom}),r.jsx("p",{className:"sd-badge-description",children:H.description}),r.jsx("span",{className:"sd-badge-condition",children:H.condition}),H.obtenu&&r.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),r.jsx("span",{className:"sd-badge-category",children:H.categorie})]},H.id))}),Z.length===0&&r.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[r.jsx(zy,{size:36}),r.jsx("h3",{children:"Aucun badge dans cette catgorie"}),r.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},GX=()=>{const{currentUser:e}=it(),t=ot(),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),m=["L","M","M","J","V","S","D"],p=g.useCallback(async()=>{if(e?.uid)try{o(!0),d(null);const C=await dj(e.uid);a(C)}catch(C){console.error("Erreur chargement suivi:",C),d("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[e?.uid]);g.useEffect(()=>{p()},[p]);const h=(()=>{const C=new Date().getDay();return C===0?6:C-1})();if(l)return r.jsx("div",{className:"suivi-page",children:r.jsx("div",{className:"suivi-container",children:r.jsxs("div",{className:"suivi-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(u)return r.jsx("div",{className:"suivi-page",children:r.jsx("div",{className:"suivi-container",children:r.jsxs("div",{className:"suivi-error",children:[r.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),r.jsx("p",{className:"suivi-error-text",children:u}),r.jsx("button",{className:"suivi-btn-retry",onClick:p,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:v,recommandations:y,streak:x,objectifs:_,scoreGlobal:j}=n,S=2*Math.PI*40,w=S-j/100*S,A=j>=60?"#10b981":j>=30?"#f59e0b":"#ef4444";return r.jsx("div",{className:"suivi-page",children:r.jsxs("div",{className:"suivi-container",children:[r.jsx("div",{className:"suivi-header",children:r.jsxs("div",{className:"suivi-header-content",children:[r.jsxs("div",{children:[r.jsx("h1",{children:" Mes points  amliorer"}),r.jsx("p",{className:"suivi-motivation",children:nX(j)})]}),r.jsxs("div",{className:"score-global-circle",children:[r.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[r.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),r.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:A,strokeDasharray:S,strokeDashoffset:w}),r.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:j})]}),r.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),r.jsxs("div",{className:"streak-card",children:[r.jsxs("div",{className:"streak-header",children:[r.jsx("span",{className:"streak-flamme",children:x.streakActuel>0?"":""}),r.jsxs("div",{children:[r.jsx("div",{className:"streak-nombre",children:x.streakActuel}),r.jsx("div",{className:"streak-label",children:x.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),r.jsx("div",{className:"streak-semaine",children:m.map((C,E)=>r.jsxs("div",{className:"streak-jour",children:[r.jsx("span",{className:"streak-jour-label",children:C}),r.jsx("div",{className:`streak-jour-indicateur ${x.semaineCourante[E]?"actif":"inactif"} ${E===h?"aujourd-hui":""}`,children:x.semaineCourante[E]?"":""})]},E))}),r.jsxs("div",{className:"streak-stats",children:[r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsx("span",{className:"streak-stat-value",children:x.meilleurStreak}),r.jsx("span",{className:"streak-stat-label",children:"record"})]}),r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsx("span",{className:"streak-stat-value",children:x.totalJoursActifs}),r.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),x.dernierJourActif&&r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(x.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),r.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",r.jsx("span",{className:"suivi-section-badge",children:_.length})]}),_.length>0?r.jsx("div",{className:"objectifs-grid",children:_.map(C=>{const E=aX(C);return r.jsxs("div",{className:`objectif-card ${C.statut==="atteint"?"atteint":""}`,children:[r.jsxs("div",{className:"objectif-header",children:[r.jsx("span",{className:"objectif-titre",children:C.titre}),C.recompense&&r.jsx("span",{className:"objectif-recompense",children:C.recompense})]}),r.jsx("p",{className:"objectif-description",children:C.description}),r.jsxs("div",{className:"objectif-progress",children:[r.jsxs("div",{className:"objectif-progress-labels",children:[r.jsxs("span",{className:"objectif-progress-value",children:[C.progression," / ",C.cible]}),r.jsxs("span",{className:"objectif-progress-cible",children:[E,"%"]})]}),r.jsx("div",{className:"objectif-progress-track",children:r.jsx("div",{className:`objectif-progress-fill ${C.statut==="atteint"?"atteint":""}`,style:{width:`${E}%`}})})]}),r.jsx("p",{className:`objectif-statut ${C.statut}`,children:C.statut==="atteint"?" Objectif atteint !":C.statut==="en_cours"?" En cours...":" Non commenc"})]},C.id)})}):r.jsxs("div",{className:"suivi-empty",children:[r.jsx("div",{className:"suivi-empty-icon",children:""}),r.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),r.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),r.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",v.length>0&&r.jsx("span",{className:"suivi-section-badge",children:v.length})]}),v.length>0?r.jsx("div",{className:"lacunes-grid",children:v.map(C=>r.jsxs("div",{className:`lacune-card ${C.niveauUrgence}`,children:[r.jsxs("div",{className:"lacune-card-header",children:[r.jsx("span",{className:"lacune-discipline",children:C.disciplineNom}),r.jsx("span",{className:`lacune-badge ${C.niveauUrgence}`,children:jP(C.niveauUrgence)})]}),r.jsxs("div",{className:"lacune-score-bar",children:[r.jsxs("div",{className:"lacune-score-labels",children:[r.jsxs("span",{className:"lacune-score-value",style:{color:im(C.niveauUrgence)},children:[C.moyenne,"/20"]}),r.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),r.jsx("div",{className:"lacune-progress-track",children:r.jsx("div",{className:`lacune-progress-fill ${C.niveauUrgence}`,style:{width:`${C.moyenne/20*100}%`}})})]}),r.jsxs("div",{className:"lacune-details",children:[r.jsxs("span",{className:"lacune-detail-tag",children:[NP(C.tendance)," ",C.tendance]}),r.jsxs("span",{className:"lacune-detail-tag",children:[" ",C.nombreQuiz," quiz"]}),r.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",C.scoreDetails.dernierScore,"/20"]})]})]},C.id))}):r.jsxs("div",{className:"suivi-empty",children:[r.jsx("div",{className:"suivi-empty-icon",children:""}),r.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),r.jsx("p",{className:"suivi-empty-text",children:j>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),r.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),y.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",r.jsx("span",{className:"suivi-section-badge",children:y.length})]}),r.jsx("div",{className:"recommandations-list",children:y.map(C=>r.jsxs("div",{className:"recommandation-card",children:[r.jsx("div",{className:"recommandation-priorite",children:C.priorite}),r.jsxs("div",{className:"recommandation-content",children:[r.jsx("p",{className:"recommandation-titre",children:C.titre}),r.jsx("p",{className:"recommandation-description",children:C.description}),r.jsx("span",{className:"recommandation-discipline-tag",children:C.disciplineNom})]})]},C.id))})]}),r.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:r.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),children:" Passer un quiz maintenant"})})]})})},HX=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1,l=[];for(let o=-1;o<=3;o++){const u=a+o;l.push(`${u}-${u+1}`)}return l},zA=HX(),gc=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1;return`${a}-${a+1}`},OA=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],QX=({onSelectGroupe:e})=>{const{currentUser:t}=it(),[n,a]=g.useState([]),[l,o]=g.useState(new Map),[u,d]=g.useState([]),[m,p]=g.useState(!0),[h,v]=g.useState(null),[y,x]=g.useState(!1),[_,j]=g.useState(!1),[S,w]=g.useState(null),[A,C]=g.useState(null),[E,O]=g.useState(null),[D,T]=g.useState(!1),[k,R]=g.useState(null),[L,Q]=g.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:gc()}),[$,F]=g.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:gc()}),[Y,M]=g.useState("actif");g.useEffect(()=>{(async()=>{try{const G=await Xa.getAll();d(G.map(ce=>({id:ce.id,nom:ce.nom,classe:ce.classe||""})))}catch(G){console.warn(" Impossible de charger les disciplines:",G)}})()},[]);const q=g.useCallback(async()=>{if(t?.uid)try{p(!0),v(null);const W=await AP(t.uid);a(W);const G=new Map;for(const ce of W)if(ce.statut==="actif")try{const X=await fj(ce.id);G.set(ce.id,X)}catch{console.warn(`Stats indisponibles pour ${ce.nom}`)}o(G)}catch(W){console.error("Erreur chargement groupes:",W),v("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{p(!1)}},[t?.uid]);g.useEffect(()=>{q()},[q]);const Z=(W,G=!1)=>{const ce=u.find(je=>je.id===W),X=ce?`${ce.nom}${ce.classe?` (${ce.classe})`:""}`:"";G?F(je=>({...je,matiereId:W,matiereNom:X})):Q(je=>({...je,matiereId:W,matiereNom:X}))},H=async W=>{if(W.preventDefault(),!(!t?.uid||!L.nom.trim()||!L.matiereId))try{j(!0),await EX(t.uid,t.displayName||t.email||"Professeur",L),Q({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:gc()}),x(!1),R("Groupe cr avec succs !"),setTimeout(()=>R(null),3e3),await q()}catch(G){v(G.message||"Erreur lors de la cration du groupe.")}finally{j(!1)}},B=W=>{O(W),F({nom:W.nom,description:W.description||"",matiereId:W.matiereId,matiereNom:W.matiereNom,classeNiveau:W.classeNiveau,anneeScolaire:W.anneeScolaire}),x(!1)},I=()=>{O(null),F({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:gc()})},pe=async W=>{if(W.preventDefault(),!(!E||!$.nom.trim()||!$.matiereId))try{T(!0),await zP(E.id,{nom:$.nom.trim(),description:$.description?.trim()||"",matiereId:$.matiereId,matiereNom:$.matiereNom,classeNiveau:$.classeNiveau,anneeScolaire:$.anneeScolaire}),O(null),R("Groupe modifi avec succs !"),setTimeout(()=>R(null),3e3),await q()}catch(G){v(G.message||"Erreur lors de la modification du groupe.")}finally{T(!1)}},re=async W=>{try{await navigator.clipboard.writeText(W),w(W),setTimeout(()=>w(null),2e3)}catch{const G=document.createElement("textarea");G.value=W,document.body.appendChild(G),G.select(),document.execCommand("copy"),document.body.removeChild(G),w(W),setTimeout(()=>w(null),2e3)}},de=async W=>{try{await zX(W),C(null),await q()}catch(G){v(G.message)}},ge=async W=>{try{await OX(W),await q()}catch(G){v(G.message)}},ye=async W=>{try{await DX(W),await q()}catch(G){v(G.message)}},V=(W,G)=>{Q(ce=>({...ce,[W]:G}))},he=(W,G)=>{F(ce=>({...ce,[W]:G}))},Pe=n.filter(W=>Y==="tous"?!0:W.statut===Y),le=(W,G,ce)=>r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:W,children:"Discipline / Matire *"}),r.jsxs("select",{id:W,value:G,onChange:X=>ce(X.target.value),className:"prof-select",required:!0,children:[r.jsx("option",{value:"",children:" Slectionner une discipline "}),u.map(X=>r.jsxs("option",{value:X.id,children:[X.nom,X.classe?` (${X.classe})`:""]},X.id))]}),u.length===0&&r.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return m?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):r.jsxs("div",{className:"groupe-manager",children:[r.jsxs("div",{className:"groupe-manager-header",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),r.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",gc()]})]}),r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{x(!y),E&&I()},children:y?" Annuler":" Nouveau groupe"})]}),h&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[r.jsx("span",{children:""})," ",h,r.jsx("button",{onClick:()=>v(null),className:"prof-alert-close",children:""})]}),k&&r.jsxs("div",{className:"prof-alert prof-alert-success",children:[r.jsx("span",{children:""})," ",k,r.jsx("button",{onClick:()=>R(null),className:"prof-alert-close",children:""})]}),y&&r.jsxs("div",{className:"groupe-form-container",children:[r.jsx("h3",{children:"Crer un nouveau groupe-classe"}),r.jsxs("form",{onSubmit:H,className:"groupe-form",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),r.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:L.nom,onChange:W=>V("nom",W.target.value),required:!0,className:"prof-input",maxLength:60})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),r.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:L.description||"",onChange:W=>V("description",W.target.value),className:"prof-input",maxLength:120})]}),r.jsxs("div",{className:"prof-form-row",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),r.jsx("select",{id:"groupe-niveau",value:L.classeNiveau,onChange:W=>V("classeNiveau",W.target.value),className:"prof-select",children:OA.map(W=>r.jsx("option",{value:W.value,children:W.label},W.value))})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),r.jsx("select",{id:"groupe-annee",value:L.anneeScolaire,onChange:W=>V("anneeScolaire",W.target.value),className:"prof-select",children:zA.map(W=>r.jsx("option",{value:W,children:W},W))})]})]}),le("groupe-discipline",L.matiereId,W=>Z(W,!1)),r.jsx("div",{className:"prof-form-actions",children:r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:_||!L.nom.trim()||!L.matiereId,children:_?" Cration...":" Crer le groupe"})})]})]}),E&&r.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[r.jsxs("h3",{children:[" Modifier le groupe : ",E.nom]}),r.jsxs("form",{onSubmit:pe,className:"groupe-form",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),r.jsx("input",{id:"edit-groupe-nom",type:"text",value:$.nom,onChange:W=>he("nom",W.target.value),required:!0,className:"prof-input",maxLength:60})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),r.jsx("input",{id:"edit-groupe-desc",type:"text",value:$.description||"",onChange:W=>he("description",W.target.value),className:"prof-input",maxLength:120})]}),r.jsxs("div",{className:"prof-form-row",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),r.jsx("select",{id:"edit-groupe-niveau",value:$.classeNiveau,onChange:W=>he("classeNiveau",W.target.value),className:"prof-select",children:OA.map(W=>r.jsx("option",{value:W.value,children:W.label},W.value))})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),r.jsx("select",{id:"edit-groupe-annee",value:$.anneeScolaire,onChange:W=>he("anneeScolaire",W.target.value),className:"prof-select",children:zA.map(W=>r.jsx("option",{value:W,children:W},W))})]})]}),le("edit-groupe-discipline",$.matiereId,W=>Z(W,!0)),r.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:D||!$.nom.trim()||!$.matiereId,children:D?" Enregistrement...":" Enregistrer"}),r.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:I,disabled:D,children:" Annuler"})]})]})]}),r.jsxs("div",{className:"groupe-filtres",children:[r.jsxs("button",{className:`prof-filtre-btn ${Y==="actif"?"active":""}`,onClick:()=>M("actif"),children:["Actifs (",n.filter(W=>W.statut==="actif").length,")"]}),r.jsxs("button",{className:`prof-filtre-btn ${Y==="archive"?"active":""}`,onClick:()=>M("archive"),children:["Archivs (",n.filter(W=>W.statut==="archive").length,")"]}),r.jsxs("button",{className:`prof-filtre-btn ${Y==="tous"?"active":""}`,onClick:()=>M("tous"),children:["Tous (",n.length,")"]})]}),Pe.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:Y==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),r.jsx("p",{children:Y==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),Y!=="archive"&&r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>x(!0),children:" Crer mon premier groupe"})]}):r.jsx("div",{className:"groupe-grid",children:Pe.map(W=>{const G=l.get(W.id),ce=E?.id===W.id;return r.jsxs("div",{className:`groupe-card ${W.statut==="archive"?"groupe-card-archive":""} ${ce?"groupe-card-editing":""}`,children:[r.jsxs("div",{className:"groupe-card-header",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"groupe-card-titre",children:W.nom}),r.jsx("span",{className:"groupe-card-matiere",children:W.matiereNom})]}),r.jsx("span",{className:`groupe-badge groupe-badge-${W.statut}`,children:W.statut==="actif"?" Actif":" Archiv"})]}),W.description&&r.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:W.description}),r.jsxs("div",{className:"groupe-card-infos",children:[r.jsxs("span",{children:[" ",W.classeNiveau]}),r.jsxs("span",{children:[" ",W.anneeScolaire]}),r.jsxs("span",{children:[" ",W.nombreInscrits," lve",W.nombreInscrits!==1?"s":""]})]}),r.jsxs("div",{className:"groupe-card-code",children:[r.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),r.jsxs("div",{className:"groupe-code-box",children:[r.jsx("code",{className:"groupe-code-value",children:W.codeInvitation}),r.jsx("button",{className:"prof-btn-icon",onClick:X=>{X.stopPropagation(),re(W.codeInvitation)},title:"Copier le code",children:S===W.codeInvitation?"":""}),W.statut==="actif"&&r.jsx("button",{className:"prof-btn-icon",onClick:X=>{X.stopPropagation(),ye(W.id)},title:"Rgnrer le code",children:""})]})]}),G&&G.nombreEleves>0&&r.jsxs("div",{className:"groupe-card-stats",children:[r.jsxs("div",{className:"groupe-stat-item",children:[r.jsx("span",{className:"groupe-stat-value",children:G.moyenneClasse}),r.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),r.jsxs("div",{className:"groupe-stat-item",children:[r.jsxs("span",{className:"groupe-stat-value",children:[G.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),r.jsxs("div",{className:"groupe-stat-item",children:[r.jsx("span",{className:"groupe-stat-value",children:G.elevesEnDifficulte}),r.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),r.jsxs("div",{className:"groupe-card-actions",children:[W.statut==="actif"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>e(W),children:" Voir dtails"}),r.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>B(W),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>ge(W.id),children:" Archiver"})]}),A===W.id?r.jsxs("div",{className:"groupe-confirm-suppression",children:[r.jsx("span",{children:"Confirmer ?"}),r.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>de(W.id),children:"Oui, supprimer"}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>C(null),children:"Non"})]}):r.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>C(W.id),children:" Supprimer"})]})]},W.id)})})]})},VX=({groupe:e,onRetour:t})=>{const[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[m,p]=g.useState([]),[h,v]=g.useState(null),[y,x]=g.useState(!0),[_,j]=g.useState(null),[S,w]=g.useState("apercu"),[A,C]=g.useState("moyenne_desc"),[E,O]=g.useState(null),[D,T]=g.useState(null),[k,R]=g.useState(!1),[L,Q]=g.useState(null),$=g.useCallback(async()=>{try{x(!0),j(null);const[I,pe,re]=await Promise.all([fj(e.id),TX(e.id),RX(e.matiereId)]);a(I),o(pe),p(re);const de=IX(pe,e.nom);d(de)}catch(I){console.error("Erreur chargement dtail groupe:",I),j("Impossible de charger les donnes du groupe.")}finally{x(!1)}},[e.id,e.matiereId,e.nom]);g.useEffect(()=>{$()},[$]);const F=async I=>{try{R(!0),T(I);const pe=await qX(e.id,I);v(pe)}catch(pe){console.error("Erreur analyse quiz:",pe)}finally{R(!1)}},Y=()=>{const I=LX(l,e.nom),pe=`PedaClic_${e.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;$X(I,pe)},M=async I=>{try{Q(I);const re=(await sp(e.id)).find(de=>de.eleveId===I);re&&(await kX(re.id,e.id),await $())}catch(pe){j(pe.message)}finally{Q(null)}},q=[...l].sort((I,pe)=>{switch(A){case"moyenne_desc":return pe.moyenne-I.moyenne;case"moyenne_asc":return I.moyenne-pe.moyenne;case"nom":return I.eleveNom.localeCompare(pe.eleveNom);case"streak":return pe.streak.actuel-I.streak.actuel;case"quiz_count":return pe.totalQuiz-I.totalQuiz;default:return 0}}),Z=I=>I>=16?"prof-note-excellent":I>=12?"prof-note-bien":I>=10?"prof-note-passable":I>=8?"prof-note-insuffisant":"prof-note-critique",H=I=>{switch(I){case"hausse":return"";case"baisse":return"";default:return""}},B=I=>{switch(I){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return y?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsxs("p",{children:['Chargement des donnes de "',e.nom,'"...']})]}):r.jsxs("div",{className:"groupe-detail",children:[r.jsxs("div",{className:"groupe-detail-header",children:[r.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:t,children:" Retour aux groupes"}),r.jsxs("div",{className:"groupe-detail-titre-section",children:[r.jsx("h2",{className:"groupe-detail-titre",children:e.nom}),r.jsxs("p",{className:"groupe-detail-subtitle",children:[e.matiereNom,"  ",e.classeNiveau,"  ",e.anneeScolaire]})]}),r.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:Y,children:" Export CSV"})]}),_&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",_,r.jsx("button",{onClick:()=>j(null),className:"prof-alert-close",children:""})]}),r.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:l.length},{id:"quiz",label:" Quiz",count:m.length},{id:"alertes",label:" Alertes",count:u.length}].map(I=>r.jsxs("button",{className:`groupe-onglet ${S===I.id?"active":""}`,onClick:()=>w(I.id),children:[I.label,I.count!==null&&I.count>0&&r.jsx("span",{className:"groupe-onglet-badge",children:I.count})]},I.id))}),S==="apercu"&&n&&r.jsxs("div",{className:"groupe-apercu",children:[r.jsxs("div",{className:"groupe-stats-grid",children:[r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:`groupe-stat-card-value ${Z(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),r.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),r.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),r.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),r.jsx("div",{className:"groupe-apercu-notes",children:r.jsxs("div",{className:"groupe-note-range",children:[r.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),r.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),r.jsx("div",{className:"groupe-note-barre",children:r.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),r.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),l.length>=3&&r.jsxs("div",{className:"groupe-apercu-classement",children:[r.jsxs("div",{className:"groupe-classement-section",children:[r.jsx("h4",{children:" Top 3"}),l.slice(0,3).map((I,pe)=>r.jsxs("div",{className:"groupe-classement-item",children:[r.jsx("span",{className:"groupe-classement-rang",children:pe===0?"":pe===1?"":""}),r.jsx("span",{className:"groupe-classement-nom",children:I.eleveNom}),r.jsxs("span",{className:`groupe-classement-note ${Z(I.moyenne)}`,children:[I.moyenne,"/20"]})]},I.eleveId))]}),r.jsxs("div",{className:"groupe-classement-section",children:[r.jsx("h4",{children:"  surveiller"}),l.filter(I=>I.moyenne<8&&I.totalQuiz>0).slice(0,3).map(I=>r.jsxs("div",{className:"groupe-classement-item",children:[r.jsx("span",{className:"groupe-classement-rang",children:""}),r.jsx("span",{className:"groupe-classement-nom",children:I.eleveNom}),r.jsxs("span",{className:`groupe-classement-note ${Z(I.moyenne)}`,children:[I.moyenne,"/20"]})]},I.eleveId)),l.filter(I=>I.moyenne<8&&I.totalQuiz>0).length===0&&r.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),S==="eleves"&&r.jsxs("div",{className:"groupe-eleves",children:[r.jsxs("div",{className:"groupe-eleves-toolbar",children:[r.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),r.jsxs("select",{id:"tri-eleves",value:A,onChange:I=>C(I.target.value),className:"prof-select prof-select-sm",children:[r.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),r.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),r.jsx("option",{value:"nom",children:"Nom (A-Z)"}),r.jsx("option",{value:"streak",children:"Streak ()"}),r.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),r.jsxs("span",{className:"groupe-eleves-count",children:[l.length," lve",l.length!==1?"s":""]})]}),l.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Aucun lve inscrit"}),r.jsxs("p",{children:["Partagez le code ",r.jsx("strong",{children:e.codeInvitation}),"  vos lves."]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"groupe-eleves-table-wrapper",children:r.jsxs("table",{className:"groupe-eleves-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"#"}),r.jsx("th",{children:"lve"}),r.jsx("th",{children:"Moyenne"}),r.jsx("th",{children:"Quiz"}),r.jsx("th",{children:"Russite"}),r.jsx("th",{children:"Streak"}),r.jsx("th",{children:"Tendance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:q.map((I,pe)=>r.jsxs("tr",{className:`${E===I.eleveId?"groupe-eleve-row-active":""}`,children:[r.jsx("td",{className:"groupe-eleve-rang",children:pe+1}),r.jsx("td",{className:"groupe-eleve-nom-cell",children:r.jsxs("div",{children:[r.jsx("strong",{children:I.eleveNom}),r.jsx("span",{className:"groupe-eleve-email",children:I.eleveEmail})]})}),r.jsx("td",{children:r.jsxs("span",{className:`groupe-note-badge ${Z(I.moyenne)}`,children:[I.moyenne,"/20"]})}),r.jsx("td",{children:I.totalQuiz}),r.jsxs("td",{children:[I.tauxReussite,"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"groupe-streak",children:[" ",I.streak.actuel,"j"]})}),r.jsxs("td",{children:[H(I.tendance)," ",I.tendance]}),r.jsxs("td",{className:"groupe-eleve-actions",children:[r.jsx("button",{className:"prof-btn-icon",onClick:()=>O(E===I.eleveId?null:I.eleveId),title:"Voir dtails",children:E===I.eleveId?"":""}),r.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>M(I.eleveId),disabled:L===I.eleveId,title:"Retirer du groupe",children:L===I.eleveId?"":""})]})]},I.eleveId))})]})}),E&&(()=>{const I=l.find(pe=>pe.eleveId===E);return I?r.jsxs("div",{className:"groupe-eleve-detail",children:[r.jsxs("div",{className:"groupe-eleve-detail-header",children:[r.jsxs("h3",{children:[" Dtail  ",I.eleveNom]}),r.jsx("button",{className:"prof-btn-icon",onClick:()=>O(null),children:""})]}),r.jsxs("div",{className:"groupe-eleve-detail-grid",children:[r.jsxs("div",{className:"groupe-eleve-detail-card",children:[r.jsx("h4",{children:"Score global"}),r.jsx("div",{className:"groupe-eleve-score-circle",children:r.jsxs("span",{className:Z(I.scoreGlobal/5),children:[I.scoreGlobal,"/100"]})})]}),r.jsxs("div",{className:"groupe-eleve-detail-card",children:[r.jsx("h4",{children:" Streak"}),r.jsxs("p",{children:["Actuel : ",r.jsxs("strong",{children:[I.streak.actuel," jour",I.streak.actuel!==1?"s":""]})]}),r.jsxs("p",{children:["Meilleur : ",I.streak.meilleur," jours"]})]}),r.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[r.jsx("h4",{children:" Lacunes dtectes"}),I.lacunes.length===0?r.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):r.jsx("ul",{className:"groupe-lacunes-liste",children:I.lacunes.map((pe,re)=>r.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${pe.niveauUrgence}`,children:[r.jsxs("span",{className:"groupe-lacune-nom",children:[pe.disciplineNom,pe.chapitre&&`  ${pe.chapitre}`]}),r.jsxs("span",{className:"groupe-lacune-moyenne",children:[pe.moyenne,"/20"]}),r.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${pe.niveauUrgence}`,children:pe.niveauUrgence})]},re))})]})]})]}):null})()]})]}),S==="quiz"&&r.jsxs("div",{className:"groupe-quiz",children:[r.jsxs("div",{className:"groupe-quiz-selector",children:[r.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),r.jsxs("select",{id:"select-quiz",value:D||"",onChange:I=>{I.target.value&&F(I.target.value)},className:"prof-select",children:[r.jsx("option",{value:"",children:" Choisir un quiz "}),m.map(I=>r.jsx("option",{value:I.id,children:I.titre},I.id))]})]}),!D&&r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Analyse par quiz"}),r.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),k&&r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Analyse en cours..."})]}),h&&!k&&r.jsxs("div",{className:"groupe-quiz-resultats",children:[r.jsxs("div",{className:"groupe-quiz-stats-header",children:[r.jsx("h3",{children:h.quizTitre}),r.jsxs("div",{className:"groupe-quiz-stats-grid",children:[r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsx("span",{className:"groupe-stat-mini-value",children:h.totalPassages}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:`groupe-stat-mini-value ${Z(h.moyenneScore)}`,children:[h.moyenneScore,"/20"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:"groupe-stat-mini-value",children:[h.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(h.tempsEcouleMoyen/60),"min"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),r.jsxs("div",{className:"groupe-quiz-questions",children:[r.jsx("h4",{children:" Questions les plus rates"}),h.questionsRatees.filter(I=>I.tauxEchec>30).map((I,pe)=>r.jsxs("div",{className:"groupe-quiz-question-card",children:[r.jsxs("div",{className:"groupe-quiz-question-header",children:[r.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",I.questionIndex+1]}),r.jsxs("span",{className:"groupe-quiz-question-echec",children:[I.tauxEchec,"% d'chec"]})]}),r.jsx("p",{className:"groupe-quiz-question-texte",children:I.questionTexte}),r.jsx("div",{className:"groupe-quiz-question-reponse",children:r.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",I.reponseCorrecte]})}),I.reponsesFrequentes.length>0&&r.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[r.jsx("span",{children:"Erreurs frquentes :"}),I.reponsesFrequentes.slice(0,2).map((re,de)=>r.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",re.reponse," (",re.nombre," lve",re.nombre>1?"s":"",")"]},de))]})]},pe)),h.questionsRatees.filter(I=>I.tauxEchec>30).length===0&&r.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),S==="alertes"&&r.jsx("div",{className:"groupe-alertes",children:u.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Aucune alerte"}),r.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):r.jsx("div",{className:"groupe-alertes-liste",children:u.map(I=>r.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${I.niveauUrgence}`,children:[r.jsxs("div",{className:"groupe-alerte-header",children:[r.jsx("span",{className:"groupe-alerte-emoji",children:B(I.type)}),r.jsx("span",{className:"groupe-alerte-eleve",children:I.eleveNom}),r.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${I.niveauUrgence}`,children:I.niveauUrgence})]}),r.jsx("p",{className:"groupe-alerte-message",children:I.message}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{w("eleves"),O(I.eleveId)},children:" Voir dtail"})]},I.id))})})]})},YX=()=>{const{currentUser:e}=it(),t=ot(),[n,a]=g.useState("overview"),[l,o]=g.useState(null),[u,d]=g.useState(0),[m,p]=g.useState(0),[h,v]=g.useState(0),[y,x]=g.useState(0),[_,j]=g.useState([]),[S,w]=g.useState(!0),A=g.useCallback(async()=>{if(e?.uid)try{w(!0);const D=(await AP(e.uid)).filter($=>$.statut==="actif");d(D.length);let T=0,k=0,R=0,L=0;const Q=[];for(const $ of D)try{const F=await fj($.id);T+=F.nombreEleves,F.nombreEleves>0&&(k+=F.moyenneClasse,R++),L+=F.elevesEnDifficulte,Q.push({...$,stats:F})}catch{Q.push({...$})}p(T),v(R>0?Math.round(k/R*10)/10:0),x(L),j(Q)}catch(O){console.error("Erreur chargement rsum prof:",O)}finally{w(!1)}},[e?.uid]);g.useEffect(()=>{A()},[A]);const C=O=>{o(O),a("detail")},E=()=>{o(null),a("groupes"),A()};return S?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement de votre espace professeur..."})]}):r.jsxs("div",{className:"prof-dashboard",children:[r.jsx("header",{className:"prof-dashboard-header",children:r.jsxs("div",{children:[r.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),r.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",e?.displayName||"Professeur"," "]})]})}),n!=="detail"&&r.jsxs("nav",{className:"prof-nav",children:[r.jsx("button",{className:`prof-nav-btn ${n==="overview"?"active":""}`,onClick:()=>a("overview"),children:" Vue d'ensemble"}),r.jsx("button",{className:`prof-nav-btn ${n==="groupes"?"active":""}`,onClick:()=>a("groupes"),children:" Mes groupes-classes"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/cahiers"),children:" Cahier de textes"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/sequences"),children:" Squences pdagogiques"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/cours"),children:" Cours en ligne"})]}),n==="overview"&&r.jsxs("div",{className:"prof-overview",children:[r.jsxs("div",{className:"prof-overview-cards",children:[r.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>a("groupes"),children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:"prof-overview-card-value",children:u}),r.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",u!==1?"s":""," actif",u!==1?"s":""]})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:"prof-overview-card-value",children:m}),r.jsxs("span",{className:"prof-overview-card-label",children:["lve",m!==1?"s":""," inscrit",m!==1?"s":""]})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),r.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:`prof-overview-card-value ${y>0?"prof-note-critique":""}`,children:y}),r.jsxs("span",{className:"prof-overview-card-label",children:["lve",y!==1?"s":""," en difficult"]})]})]})]}),_.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),r.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>a("groupes"),children:" Crer un groupe-classe"})]}):r.jsxs("div",{className:"prof-overview-groupes",children:[r.jsx("h2",{children:"Mes groupes"}),r.jsx("div",{className:"prof-overview-groupes-grid",children:_.map(O=>r.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>C(O),children:[r.jsxs("div",{className:"prof-overview-groupe-header",children:[r.jsx("h3",{children:O.nom}),r.jsx("span",{className:"prof-overview-groupe-matiere",children:O.matiereNom})]}),O.stats&&r.jsxs("div",{className:"prof-overview-groupe-stats",children:[r.jsxs("div",{children:[r.jsx("span",{className:"prof-overview-groupe-stat-value",children:O.stats.nombreEleves}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[O.stats.moyenneClasse,"/20"]}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[O.stats.tauxReussite,"%"]}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),r.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},O.id))})]})]}),n==="groupes"&&r.jsx(QX,{onSelectGroupe:C}),n==="detail"&&l&&r.jsx(VX,{groupe:l,onRetour:E})]})},KX=e=>{if(!e?.length)return{label:"",color:"#9ca3af"};const t=e.map(a=>a.difficulte),n=t.reduce((a,l)=>a+(l==="facile"?1:l==="moyen"?2:3),0)/t.length;return n<1.5?{label:"Facile",color:"#059669"}:n<2.5?{label:"Moyen",color:"#d97706"}:{label:"Difficile",color:"#dc2626"}},XX=e=>e?.reduce((t,n)=>t+(n.points??0),0)??0,WX=()=>{const e=ot(),{currentUser:t}=it(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(""),[m,p]=g.useState("");g.useEffect(()=>{(async()=>{try{const y=await l2();a(y)}catch{d("Impossible de charger les quiz.")}finally{o(!1)}})()},[]);const h=n.filter(v=>v.titre.toLowerCase().includes(m.toLowerCase())||(v.description??"").toLowerCase().includes(m.toLowerCase()));return r.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"2rem 1rem"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:800,color:"#1f2937",margin:"0 0 0.4rem"},children:" Quiz disponibles"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.95rem",margin:0},children:"Testez vos connaissances avec nos quiz interactifs"})]}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsx("input",{type:"text",placeholder:"Rechercher un quiz...",value:m,onChange:v=>p(v.target.value),style:{width:"100%",maxWidth:400,padding:"0.6rem 1rem",border:"1.5px solid #e5e7eb",borderRadius:10,fontSize:"0.9rem",outline:"none",boxSizing:"border-box"}})}),l&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:[r.jsx("div",{style:{width:36,height:36,border:"3px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto 1rem"}}),"Chargement des quiz..."]}),u&&r.jsxs("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.9rem 1.2rem",borderRadius:10,marginBottom:"1.5rem"},children:[" ",u]}),!l&&!u&&h.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#9ca3af"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.75rem",opacity:.4},children:""}),r.jsx("p",{style:{margin:0},children:m?"Aucun quiz ne correspond  votre recherche.":"Aucun quiz disponible pour le moment."})]}),!l&&!u&&h.length>0&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.25rem"},children:h.map(v=>{const y=KX(v.questions),x=XX(v.questions),_=v.questions?.length??0,j=v.isPremium,S=!j||t?.isPremium;return r.jsxs("div",{onClick:()=>S&&e(`/quiz-avance/${v.id}`),style:{background:"white",borderRadius:14,boxShadow:"0 2px 10px rgba(0,0,0,0.08)",padding:"1.25rem",cursor:S?"pointer":"default",opacity:S?1:.65,transition:"transform 0.15s, box-shadow 0.15s",border:"1.5px solid #f3f4f6",display:"flex",flexDirection:"column",gap:"0.6rem",position:"relative"},onMouseEnter:w=>{S&&(w.currentTarget.style.transform="translateY(-3px)",w.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.12)")},onMouseLeave:w=>{w.currentTarget.style.transform="",w.currentTarget.style.boxShadow="0 2px 10px rgba(0,0,0,0.08)"},children:[j&&r.jsx("span",{style:{position:"absolute",top:12,right:12,background:"#fef3c7",color:"#d97706",fontSize:"0.7rem",fontWeight:700,padding:"0.15rem 0.5rem",borderRadius:20},children:" Premium"}),r.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0,lineHeight:1.3,paddingRight:j?"4rem":0},children:v.titre}),v.description&&r.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:0,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},dangerouslySetInnerHTML:{__html:v.description}}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginTop:"0.25rem"},children:[r.jsxs("span",{style:{fontSize:"0.75rem",background:"#eff6ff",color:"#2563eb",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",_," question",_>1?"s":""]}),r.jsxs("span",{style:{fontSize:"0.75rem",background:"#f3f4f6",color:"#374151",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",v.duree," min"]}),x>0&&r.jsxs("span",{style:{fontSize:"0.75rem",background:"#f0fdf4",color:"#059669",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",x," pts"]}),r.jsx("span",{style:{fontSize:"0.75rem",background:"#fafafa",color:y.color,padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:700,border:`1px solid ${y.color}30`},children:y.label})]}),r.jsx("button",{disabled:!S,onClick:w=>{w.stopPropagation(),S&&e(`/quiz-avance/${v.id}`)},style:{marginTop:"auto",padding:"0.55rem 1rem",background:S?"#2563eb":"#e5e7eb",color:S?"white":"#9ca3af",border:"none",borderRadius:8,fontWeight:600,fontSize:"0.85rem",cursor:S?"pointer":"not-allowed",transition:"background 0.15s"},children:S?" Commencer le quiz":" Premium requis"})]},v.id)})}),!l&&h.length>0&&r.jsxs("p",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.8rem",marginTop:"2rem"},children:[h.length," quiz",(h.length>1,"")," disponible",h.length>1?"s":""]})]})},ZX="quizzes",JX="quizzes_v2",DA=50;function eW(e){const t=e.data();return{id:e.id,titre:t.titre||"Quiz sans titre",description:t.description||"",matiere:t.matiere||t.disciplineId||"",niveau:t.niveau||"",classe:t.classe||"",nombreQuestions:Array.isArray(t.questions)?t.questions.length:0,duree:t.duree||void 0,difficulte:t.difficulte||"moyen",source:"quizzes",isPremium:!1,createdAt:t.createdAt||void 0}}function tW(e){const t=e.data();return{id:e.id,titre:t.titre||"Quiz sans titre",description:t.description||"",matiere:t.matiere||"",niveau:t.niveau||"",classe:t.classe||"",nombreQuestions:Array.isArray(t.questions)?t.questions.length:0,duree:t.dureeEstimee||void 0,difficulte:t.difficulte||"moyen",source:"quizzes_v2",isPremium:!1,createdAt:t.createdAt||void 0}}async function OP(){const[e,t]=await Promise.all([De(Te(_e(te,ZX),we("isPremium","==",!1),Ke("createdAt","desc"),cn(DA))),De(Te(_e(te,JX),we("isPremium","==",!1),Ke("createdAt","desc"),cn(DA)))]),n=e.docs.map(eW),a=t.docs.map(tW);return[...n,...a].sort((l,o)=>{const u=l.createdAt?.toMillis()??0;return(o.createdAt?.toMillis()??0)-u})}async function rW(){return(await OP()).slice(0,3)}const nW={"6eme":1,"6me":1,"5eme":2,"5me":2,"4eme":3,"4me":3,"3eme":4,"3me":4,"2nde":5,seconde:5,"1ere":6,"1re":6,terminale:7};function MA(e){const t=e.toLowerCase().trim();return nW[t]??99}function lp(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{let m=!1;async function p(){o(!0),d(null);try{const h=Te(_e(te,"disciplines"),Ke("ordre")),v=await De(h);if(m)return;const y=new Set,x=new Set;v.forEach(S=>{const w=S.data();w.nom&&typeof w.nom=="string"&&y.add(w.nom.trim()),w.classe&&typeof w.classe=="string"&&x.add(w.classe.trim())});const _=Array.from(y).sort((S,w)=>S.localeCompare(w,"fr")).map(S=>({valeur:S,label:S})),j=Array.from(x).sort((S,w)=>{const A=MA(S),C=MA(w);return A!==C?A-C:S.localeCompare(w,"fr")}).map(S=>({valeur:S,label:S}));t(_),a(j)}catch(h){m||(console.error("[useDisciplinesOptions] Erreur Firestore :",h),d("Impossible de charger les matires/niveaux."))}finally{m||o(!1)}}return p(),()=>{m=!0}},[]),{matieres:e,niveaux:n,loading:l,error:u}}const aW={facile:{label:"Facile",color:"#059669",bg:"#d1fae5"},moyen:{label:"Moyen",color:"#d97706",bg:"#fef3c7"},difficile:{label:"Difficile",color:"#dc2626",bg:"#fee2e2"}},iW=({quiz:e,onJouer:t,estConnecte:n})=>{const a=aW[e.difficulte??"moyen"];return r.jsxs("div",{className:"qg-card",onClick:()=>t(e),children:[r.jsxs("div",{className:"qg-card__header",children:[r.jsx("span",{className:`qg-card__source qg-card__source--${e.source}`,children:e.source==="quizzes_v2"?" Quiz avanc":" Quiz"}),r.jsx("span",{className:"qg-card__difficulte",style:{color:a.color,background:a.bg},children:a.label})]}),r.jsx("h3",{className:"qg-card__titre",children:e.titre}),e.description&&r.jsx("p",{className:"qg-card__description",children:e.description}),r.jsxs("div",{className:"qg-card__meta",children:[e.matiere&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.matiere]}),e.classe&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.classe]}),r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.nombreQuestions," question",e.nombreQuestions>1?"s":""]}),e.duree&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.duree," min"]})]}),r.jsx("button",{className:"qg-card__btn",children:n?" Commencer":" Aperu"})]})},sW=()=>r.jsxs("div",{className:"qg-banniere qg-banniere--inscription",children:[r.jsx("div",{className:"qg-banniere__icone",children:""}),r.jsxs("div",{className:"qg-banniere__texte",children:[r.jsx("h3",{children:"Connectez-vous pour accder  tous les quiz gratuits"}),r.jsx("p",{children:"Crez un compte gratuitement et commencez  vous entraner ds maintenant."})]}),r.jsxs("div",{className:"qg-banniere__actions",children:[r.jsx(Be,{to:"/inscription",className:"btn btn-primary",children:"Crer un compte gratuit"}),r.jsx(Be,{to:"/connexion",className:"btn btn-secondary",children:"Se connecter"})]})]}),lW=()=>r.jsxs("div",{className:"qg-banniere qg-banniere--premium",children:[r.jsx("div",{className:"qg-banniere__icone",children:""}),r.jsxs("div",{className:"qg-banniere__texte",children:[r.jsx("h3",{children:"Dbloquez les Quiz Avancs Premium"}),r.jsx("p",{children:"Accdez  des centaines de quiz avancs avec corrections dtailles, suivi de progression et bien plus encore."}),r.jsxs("p",{className:"qg-banniere__prix",children:[r.jsx("strong",{children:"2 000 FCFA/mois"}),"  ",r.jsx("strong",{children:"20 000 FCFA/an"})]})]}),r.jsx(Be,{to:"/premium",className:"btn btn-premium",children:" Devenir Premium"})]}),oW=()=>{const e=ot(),{currentUser:t}=it(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(""),[m,p]=g.useState(""),[h,v]=g.useState(""),[y,x]=g.useState(""),{matieres:_}=lp(),j=!!t,S=t?.isPremium??!1,w=t?.role==="prof"||t?.role==="admin";g.useEffect(()=>{(async()=>{o(!0),d("");try{const O=j?await OP():await rW();a(O)}catch(O){console.error("Erreur chargement quiz gratuits:",O),d("Impossible de charger les quiz. Veuillez ressayer.")}finally{o(!1)}})()},[j]);const A=n.filter(E=>{const O=!y||E.titre.toLowerCase().includes(y.toLowerCase())||E.matiere.toLowerCase().includes(y.toLowerCase()),D=!m||E.matiere.toLowerCase().includes(m.toLowerCase()),T=!h||(E.niveau??"").toLowerCase().includes(h.toLowerCase())||(E.classe??"").toLowerCase().includes(h.toLowerCase());return O&&D&&T}),C=E=>{if(!j){e("/connexion");return}E.source==="quizzes_v2"?e(`/quiz-avance/${E.id}`):e(`/quiz/${E.id}`)};return r.jsxs("div",{className:"qg-page",children:[r.jsxs("div",{className:"qg-hero",children:[r.jsxs("div",{className:"qg-hero__content",children:[r.jsx("h1",{className:"qg-hero__titre",children:" Quiz Gratuits"}),r.jsx("p",{className:"qg-hero__sous-titre",children:"Entranez-vous gratuitement avec nos quiz de rvision pour tous les niveaux du collge au lyce."}),r.jsxs("div",{className:"qg-hero__stats",children:[r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:n.length}),j?" quiz disponibles":"+ quiz"]}),r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:"100%"})," gratuit"]}),r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:"6me"}),"  ",r.jsx("strong",{children:"Terminale"})]})]})]}),(S||w)&&r.jsx(Be,{to:"/quizzes",className:"qg-hero__lien-premium",children:" Voir les Quiz Premium "})]}),r.jsxs("div",{className:"qg-filtres",children:[r.jsx("div",{className:"qg-filtres__recherche",children:r.jsx("input",{type:"text",placeholder:" Rechercher un quiz...",value:y,onChange:E=>x(E.target.value),className:"qg-filtres__input"})}),r.jsxs("select",{value:m,onChange:E=>p(E.target.value),className:"qg-filtres__select",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),_.map(E=>r.jsx("option",{value:E.valeur,children:E.label},E.valeur))]}),(m||h||y)&&r.jsx("button",{className:"qg-filtres__reset",onClick:()=>{p(""),v(""),x("")},children:" Rinitialiser"})]}),r.jsxs("div",{className:"qg-contenu",children:[l&&r.jsxs("div",{className:"qg-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des quiz..."})]}),!l&&u&&r.jsxs("div",{className:"qg-erreur",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"Ressayer"})]}),!l&&!u&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"qg-compteur",children:[A.length," quiz",A.length>1?"s":"",m?` en ${m}`:"",j?"":" (aperu  connectez-vous pour tout voir)"]}),A.length>0?r.jsx("div",{className:"qg-grille",children:A.map(E=>r.jsx(iW,{quiz:E,onJouer:C,estConnecte:j},`${E.source}-${E.id}`))}):r.jsxs("div",{className:"qg-vide",children:[r.jsx("p",{children:" Aucun quiz trouv pour ces critres."}),r.jsx("button",{onClick:()=>{p(""),x("")},className:"btn btn-secondary",children:"Voir tous les quiz"})]}),!j&&r.jsx(sW,{}),j&&!S&&!w&&r.jsx(lW,{})]})]})]})},Vs="cahiers_textes",Vn="entrees_cahier",cW="groupes_prof",uW="ebooks";async function dW(e,t){const n=[we("profId","==",e),Ke("updatedAt","desc")],a=Te(_e(te,Vs),...n);return(await De(a)).docs.map(o=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...o.data(),id:o.id}))}const DP=e=>dW(e);function fW(e,t,n,a){const l=[we("profId","==",e),Ke("updatedAt","desc")];t&&l.splice(1,0,we("anneeScolaire","==",t));const o=Te(_e(te,Vs),...l);return Cy(o,u=>{n(u.docs.map(d=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...d.data(),id:d.id})))},a)}async function MP(e){const t=await Dt(Ne(te,Vs,e));return t.exists()?{groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...t.data(),id:t.id}:null}const PP=e=>bW(e);async function mW(e){const t=await Dt(Ne(te,Vn,e));return t.exists()?{id:t.id,...t.data()}:null}async function pW(e,t,n,a){const l=`${Date.now()}_${n.name}`,o=`cahiers/${e}/${t}/${l}`,u=Vr(Yr,o),d=VA(u,n);return new Promise((m,p)=>{d.on("state_changed",h=>{},p,async()=>{const h=await Ra(d.snapshot.ref);m({id:l,nom:n.name,url:h,type:n.type,taille:n.size,mimeType:n.type,uploadedAt:new Date().toISOString()})})})}async function PA(e,t,n){await He(Ne(te,Vn,e),{piecesJointes:Ey(...n),updatedAt:Me.now()})}async function hW(e,t,n){const a=t.find(l=>l.url===n);try{a?.id&&await Sc(Vr(Yr,`cahiers/${a.id}`))}catch{}a&&await He(Ne(te,Vn,e),{piecesJointes:_q(a),updatedAt:Me.now()})}async function vW(e,t){const n=Me.now(),a=t.titre?.trim()||`${t.matiere} ${t.classe} ${t.anneeScolaire}`;return(await Pt(_e(te,Vs),{profId:e,titre:a,matiere:t.matiere,classe:t.classe,anneeScolaire:t.anneeScolaire,description:t.description||"",couleur:t.couleur,nombreSeancesPrevu:t.nombreSeancesPrevu,nombreSeancesRealise:0,isArchived:!1,groupeIds:t.groupeIds??[],groupeNoms:t.groupeNoms??[],isPartage:t.isPartage??!1,createdAt:n,updatedAt:n})).id}async function sm(e,t){const n={...t};if("matiere"in t&&"classe"in t&&!("id"in t)){const a=t;a.titre?.trim()||(n.titre=`${a.matiere} ${a.classe} ${a.anneeScolaire}`)}await He(Ne(te,Vs,e),{...n,updatedAt:Me.now()})}async function gW(e){await Dn(Ne(te,Vs,e))}async function xW(e){const t=await Dt(Ne(te,Vs,e));if(!t.exists())return null;const n=t.data();return n.isPartage?{id:t.id,...n}:null}async function kP(e){const t=Te(_e(te,cW),we("profId","==",e),Ke("nom","asc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function yW(){return(await De(_e(te,uW))).docs.map(t=>({id:t.id,...t.data()}))}async function bW(e){const t=Te(_e(te,Vn),we("cahierId","==",e),Ke("ordre","asc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}const jW=async(e,t,n)=>{const a=Me.fromDate(new Date(t,n,1)),l=Me.fromDate(new Date(t,n+1,0,23,59,59)),o=Te(_e(te,Vn),we("cahierId","==",e),we("date",">=",a),we("date","<=",l),Ke("date","asc"));return(await De(o)).docs.map(d=>({id:d.id,...d.data()}))},NW=async(e,t)=>{const n=[we("profId","==",e),we("isMarqueEvaluation","==",!0),Ke("date","desc")];t&&n.unshift(we("cahierId","==",t));const a=Te(_e(te,Vn),...n);return(await De(a)).docs.map(o=>({id:o.id,...o.data()}))},_W=async e=>{const n=(await De(Te(_e(te,Vn),we("cahierId","==",e)))).docs.map(u=>u.data()),a=n.length,l={realise:0,planifie:0,annule:0,reporte:0},o={};for(const u of n){const d=u.statut;d in l&&l[d]++,u.typeContenu&&(o[u.typeContenu]=(o[u.typeContenu]??0)+1)}return{total:a,...l,parType:o,tauxRealisation:a>0?Math.round(l.realise/a*100):0}};async function SW(e){const t=Te(_e(te,Vn),we("cahierId","==",e),we("statut","==","realise"),Ke("date","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function wW(e,t,n){const a=Me.now();let l;if(typeof e=="string"){const u=n;l={cahierId:e,profId:t,date:Me.fromDate(new Date(u.date)),heureDebut:u.heureDebut||"",heureFin:u.heureFin||"",chapitre:u.chapitre,typeContenu:u.typeContenu,contenu:u.contenu,objectifs:u.objectifs||"",competences:u.competences||[],statut:u.statut,motifAnnulation:u.motifAnnulation||"",dateReport:u.dateReport?Me.fromDate(new Date(u.dateReport)):null,notesPrivees:u.notesPrivees||"",isMarqueEvaluation:u.isMarqueEvaluation,typeEvaluation:u.typeEvaluation||null,dateEvaluationPrevue:u.dateEvaluationPrevue?Me.fromDate(new Date(u.dateEvaluationPrevue)):null,statutEvaluation:u.statutEvaluation,ordre:Date.now(),piecesJointes:[],liens:[],ebooksLies:[]}}else l={liens:[],ebooksLies:[],piecesJointes:[],...e};return(await Pt(_e(te,Vn),{...l,createdAt:a,updatedAt:a})).id}async function Ec(e,t,n){let a;if(typeof t=="string"&&n){const l=n;a={date:Me.fromDate(new Date(l.date)),heureDebut:l.heureDebut||"",heureFin:l.heureFin||"",chapitre:l.chapitre,typeContenu:l.typeContenu,contenu:l.contenu,objectifs:l.objectifs||"",competences:l.competences||[],statut:l.statut,motifAnnulation:l.motifAnnulation||"",dateReport:l.dateReport?Me.fromDate(new Date(l.dateReport)):null,notesPrivees:l.notesPrivees||"",isMarqueEvaluation:l.isMarqueEvaluation,typeEvaluation:l.typeEvaluation||null,dateEvaluationPrevue:l.dateEvaluationPrevue?Me.fromDate(new Date(l.dateEvaluationPrevue)):null,statutEvaluation:l.statutEvaluation}}else a={...t};await He(Ne(te,Vn,e),{...a,updatedAt:Me.now()})}async function CW(e){await Dn(Ne(te,Vn,e))}const op=["6me","5me","4me","3me","2nde","1re","Terminale"],kA=["2023-2024","2024-2025","2025-2026","2026-2027"],EW=["#2563eb","#7c3aed","#059669","#d97706","#dc2626","#0891b2","#db2777","#65a30d"],Li={cours:{label:"Cours",emoji:"",color:"#3b82f6"},exercices:{label:"Exercices",emoji:"",color:"#8b5cf6"},correction:{label:"Correction",emoji:"",color:"#10b981"},devoir_surveille:{label:"Devoir surveill",emoji:"",color:"#f59e0b"},devoir_maison:{label:"Devoir  la maison",emoji:"",color:"#6366f1"},travaux_pratiques:{label:"Travaux pratiques",emoji:"",color:"#14b8a6"},evaluation:{label:"valuation",emoji:"",color:"#ef4444"},revision:{label:"Rvision",emoji:"",color:"#f97316"}},Ac={realise:{label:"Ralis",color:"#059669",bg:"#d1fae5"},planifie:{label:"Planifi",color:"#d97706",bg:"#fef3c7"},annule:{label:"Annul",color:"#dc2626",bg:"#fee2e2"},reporte:{label:"Report",color:"#2563eb",bg:"#dbeafe"}},TP={interro:"Interrogation",ds:"Devoir Surveill",examen:"Examen",oral:"Oral",autre:"Autre"},qP={devoir:{label:"Devoir  corriger",emoji:""},evaluation:{label:"valuation  prparer",emoji:""},notes:{label:"Notes  saisir",emoji:""},cours:{label:"Cours  prparer",emoji:""},personnalise:{label:"Rappel personnalis",emoji:""}},AW=["Communiquer  l'crit","Communiquer  l'oral","Raisonner et rsoudre des problmes","Chercher et s'informer","Modliser","Reprsenter","Calculer et algorithmiser","Analyser et interprter","Exprimenter et observer","Cooprer et mutualiser"],TA=()=>({classe:"3me",matiere:"Mathmatiques",anneeScolaire:"2025-2026",titre:"",description:"",couleur:"#2563eb",nombreSeancesPrevu:30,groupeIds:[],groupeNoms:[],isPartage:!1}),zW=()=>{const{currentUser:e}=it(),t=ot(),[n]=HA(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,m]=g.useState("2025-2026"),[p,h]=g.useState(!1),[v,y]=g.useState(null),[x,_]=g.useState(TA()),[j,S]=g.useState(!1),[w,A]=g.useState(""),{matieres:C,loading:E}=lp(),[O,D]=g.useState([]),[T,k]=g.useState([]);if(!e?.isPremium)return r.jsx("div",{className:"cahier-textes-page",children:r.jsxs("div",{className:"premium-gate",children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h2",{children:"Cahier de Textes Numrique"}),r.jsxs("p",{children:["Cette fonctionnalit est rserve aux enseignants Premium.",r.jsx("br",{}),"Passez au Premium pour organiser, planifier et suivre votre enseignement."]}),r.jsx("button",{className:"btn-primary",onClick:()=>t("/premium"),children:" Passer au Premium  2 000 FCFA/mois"})]})});g.useEffect(()=>{if(!e?.uid)return;u(!0);const M=fW(e.uid,d||void 0,q=>{l(q),u(!1)},q=>{console.error("Erreur chargement cahiers:",q),u(!1)});return()=>M()},[e?.uid,d]),g.useEffect(()=>{if(!e?.uid)return;kP(e.uid).then(D).catch(H=>console.error("Erreur chargement groupes:",H));const M=n.get("groupeId"),q=n.get("groupeNom"),Z=n.get("classe");M&&q&&(k([M]),_(H=>({...H,classe:Z||H.classe,groupeIds:[M],groupeNoms:[q]})),y(null),A(""),h(!0))},[e?.uid]);const R=()=>{y(null),_(TA()),k([]),A(""),h(!0)},L=(M,q)=>{q.stopPropagation(),y(M),k(M.groupeIds??[]),_({classe:M.classe,matiere:M.matiere,anneeScolaire:M.anneeScolaire,titre:M.titre,description:M.description||"",couleur:M.couleur,nombreSeancesPrevu:M.nombreSeancesPrevu,groupeIds:M.groupeIds??[],groupeNoms:M.groupeNoms??[],isPartage:M.isPartage??!1}),A(""),h(!0)},Q=M=>{k(q=>{const Z=q.includes(M)?q.filter(B=>B!==M):[...q,M],H=Z.map(B=>O.find(I=>I.id===B)?.nom??"").filter(Boolean);return _(B=>({...B,groupeIds:Z,groupeNoms:H})),Z})},$=async M=>{if(M.preventDefault(),!!e?.uid){S(!0),A("");try{v?await sm(v.id,x):await vW(e.uid,x),h(!1)}catch(q){const Z=q instanceof Error?q.message:String(q);A("Erreur : "+Z)}finally{S(!1)}}},F=async(M,q)=>{if(q.stopPropagation(),!!confirm(`Supprimer le cahier "${M.titre}" et toutes ses entres ?`))try{await gW(M.id),l(Z=>Z.filter(H=>H.id!==M.id))}catch{alert("Erreur lors de la suppression.")}},Y=M=>M.nombreSeancesPrevu>0?Math.min(100,Math.round(M.nombreSeancesRealise/M.nombreSeancesPrevu*100)):0;return r.jsxs("div",{className:"cahier-textes-page",children:[r.jsxs("div",{className:"cahier-page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"cahier-page-title",children:" Cahier de Textes"}),r.jsx("p",{className:"cahier-page-subtitle",children:"Organisez et planifiez votre enseignement"})]}),r.jsx("button",{className:"btn-primary",onClick:R,children:"+ Nouveau cahier"})]}),r.jsxs("div",{className:"cahier-filtres",children:[r.jsx("label",{style:{fontSize:"0.85rem",color:"#6b7280",fontWeight:600},children:"Anne scolaire :"}),r.jsxs("select",{className:"filtre-select",value:d,onChange:M=>m(M.target.value),children:[r.jsx("option",{value:"",children:"Toutes les annes"}),kA.map(M=>r.jsx("option",{value:M,children:M},M))]})]}),o?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):a.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{style:{fontSize:"3rem",opacity:.3,marginBottom:"0.75rem"},children:""}),r.jsxs("h3",{children:["Aucun cahier pour ",d||"cette priode"]}),r.jsx("p",{children:"Crez votre premier cahier de textes pour commencer  planifier votre enseignement."}),r.jsx("button",{className:"btn-primary",onClick:R,style:{marginTop:"1rem"},children:"+ Crer mon premier cahier"})]}):r.jsx("div",{className:"cahiers-grid",children:a.map(M=>{const q=Y(M);return r.jsxs("div",{className:"cahier-card",onClick:()=>t(`/prof/cahiers/${M.id}`),children:[r.jsx("div",{style:{height:4,background:M.couleur,borderRadius:"12px 12px 0 0"}}),r.jsx("div",{className:"cahier-card-header",children:r.jsxs("div",{style:{flex:1},children:[r.jsx("h3",{className:"cahier-card-titre",children:M.titre}),r.jsxs("div",{className:"cahier-card-meta",children:[r.jsx("span",{className:"badge-classe",children:M.classe}),r.jsx("span",{className:"badge-matiere",children:M.matiere}),r.jsx("span",{className:"badge-annee",children:M.anneeScolaire})]}),(M.groupeIds?.length??0)>0&&r.jsxs("span",{className:`badge-partage ${M.isPartage?"actif":""}`,style:{marginTop:6,display:"inline-flex"},children:[M.isPartage?" Partag avec":" Li "," ",M.groupeIds.length," groupe",M.groupeIds.length>1?"s":""]})]})}),r.jsxs("div",{className:"cahier-card-body",children:[M.description&&r.jsxs("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 0.75rem",lineHeight:1.5},children:[M.description.substring(0,80),M.description.length>80?"...":""]}),r.jsxs("div",{className:"progression-bar-wrap",children:[r.jsxs("div",{className:"progression-label",children:[r.jsx("span",{children:"Progression"}),r.jsxs("span",{style:{fontWeight:700,color:M.couleur},children:[q,"%"]})]}),r.jsx("div",{className:"progression-bar-bg",children:r.jsx("div",{className:"progression-bar-fill",style:{width:`${q}%`,background:M.couleur}})}),r.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:"0.3rem"},children:[M.nombreSeancesRealise," / ",M.nombreSeancesPrevu," sances ralises"]})]})]}),r.jsxs("div",{className:"cahier-card-footer",children:[r.jsxs("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["Mis  jour le ",M.updatedAt?.toDate().toLocaleDateString("fr-FR")||""]}),r.jsxs("div",{className:"cahier-actions",children:[r.jsx("button",{className:"btn-icon",onClick:Z=>L(M,Z),title:"Modifier",children:""}),r.jsx("button",{className:"btn-icon",onClick:Z=>F(M,Z),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]})]},M.id)})}),p&&r.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:r.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),children:[r.jsxs("h2",{className:"modal-title",children:[" ",v?"Modifier le cahier":"Nouveau cahier de textes"]}),r.jsxs("form",{onSubmit:$,children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Classe *"}),r.jsx("select",{className:"form-select",value:x.classe,onChange:M=>_(q=>({...q,classe:M.target.value})),required:!0,children:op.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Matire *"}),r.jsxs("select",{className:"form-select",value:x.matiere,onChange:M=>_(q=>({...q,matiere:M.target.value})),required:!0,disabled:E,children:[r.jsx("option",{value:"",children:E?"Chargement":" Slectionner "}),C.map(M=>r.jsx("option",{value:M.valeur,children:M.label},M.valeur)),x.matiere&&!C.find(M=>M.valeur===x.matiere)&&r.jsx("option",{value:x.matiere,children:x.matiere})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Anne scolaire *"}),r.jsx("select",{className:"form-select",value:x.anneeScolaire,onChange:M=>_(q=>({...q,anneeScolaire:M.target.value})),children:kA.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Titre personnalis"}),r.jsx("input",{className:"form-input",placeholder:`Ex: Maths 3me A - ${x.anneeScolaire}`,value:x.titre,onChange:M=>_(q=>({...q,titre:M.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Nombre de sances prvues"}),r.jsx("input",{type:"number",className:"form-input",min:"1",max:"200",value:x.nombreSeancesPrevu,onChange:M=>_(q=>({...q,nombreSeancesPrevu:Number(M.target.value)}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description / Objectifs (optionnel)"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Objectifs gnraux, groupe classe, notes...",value:x.description,onChange:M=>_(q=>({...q,description:M.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Couleur du cahier"}),r.jsx("div",{className:"couleur-picker",children:EW.map(M=>r.jsx("div",{className:`couleur-option ${x.couleur===M?"selected":""}`,style:{background:M},onClick:()=>_(q=>({...q,couleur:M})),title:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Groupes classes lis"," ",r.jsx("span",{style:{fontWeight:400,color:"#9ca3af"},children:"(optionnel)"})]}),O.length===0?r.jsxs("p",{style:{fontSize:"0.82rem",color:"#9ca3af",margin:0},children:["Aucun groupe cr."," ",r.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:0,fontSize:"0.82rem"},onClick:()=>t("/prof/groupes"),children:"Crer un groupe "})]}):r.jsx("div",{className:"groupe-selector",children:O.map(M=>{const q=T.includes(M.id);return r.jsxs("div",{className:`groupe-option ${q?"selected":""}`,onClick:()=>Q(M.id),children:[r.jsx("input",{type:"checkbox",checked:q,readOnly:!0,tabIndex:-1}),r.jsxs("span",{children:[r.jsx("strong",{children:M.nom}),"  ",M.classe," (",M.anneeScolaire,")"]})]},M.id)})}),T.length>0&&r.jsx("div",{className:"groupes-tags",children:T.map(M=>{const q=O.find(Z=>Z.id===M);return q?r.jsxs("span",{className:"groupe-tag",children:[q.nom,r.jsx("button",{type:"button",onClick:()=>Q(M),"aria-label":`Retirer ${q.nom}`,children:""})]},M):null})}),T.length>0&&r.jsxs("label",{className:"toggle-partage",style:{marginTop:10},children:[r.jsx("input",{type:"checkbox",checked:x.isPartage??!1,onChange:M=>_(q=>({...q,isPartage:M.target.checked}))}),r.jsx("span",{children:" Rendre visible aux lves des groupes lis"})]})]}),w&&r.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem",marginBottom:"0.75rem",background:"#fee2e2",padding:"0.5rem 0.75rem",borderRadius:8},children:w}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>h(!1),children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:j,children:j?"Enregistrement...":v?"Mettre  jour":"Crer le cahier"})]})]})]})})]})},OW=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],DW=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],MW=(e,t,n)=>{const a=new Date(e,t,1),l=new Date(e,t+1,0);let o=a.getDay()-1;o<0&&(o=6);const u=new Date,d=[];for(let p=o-1;p>=0;p--){const h=new Date(e,t,-p);d.push({date:h,isCurrentMonth:!1,isToday:!1,entrees:[]})}for(let p=1;p<=l.getDate();p++){const h=new Date(e,t,p),v=h.toDateString()===u.toDateString(),y=n.filter(x=>{const _=x.date.toDate();return _.getFullYear()===e&&_.getMonth()===t&&_.getDate()===p});d.push({date:h,isCurrentMonth:!0,isToday:v,entrees:y})}let m=1;for(;d.length<42;){const p=new Date(e,t+1,m++);d.push({date:p,isCurrentMonth:!1,isToday:!1,entrees:[]})}return d},PW=({cahierId:e})=>{const t=ot(),n=new Date,[a,l]=g.useState(n.getFullYear()),[o,u]=g.useState(n.getMonth()),[d,m]=g.useState([]),[p,h]=g.useState(!1),[v,y]=g.useState(null),[x,_]=g.useState({x:0,y:0});g.useEffect(()=>{(async()=>{h(!0);try{const E=await jW(e,a,o);m(E)}catch(E){console.error("Erreur chargement entres calendrier:",E)}finally{h(!1)}})()},[e,a,o]);const j=MW(a,o,d),S=()=>{o===0?(l(C=>C-1),u(11)):u(C=>C-1)},w=()=>{o===11?(l(C=>C+1),u(0)):u(C=>C+1)},A=(C,E)=>{if(!C.isCurrentMonth||C.entrees.length===0)return;const O=E.target.getBoundingClientRect();_({x:O.left,y:O.bottom+window.scrollY+8}),y(C)};return r.jsxs("div",{className:"cahier-calendar",onClick:()=>y(null),children:[r.jsxs("div",{className:"calendar-nav",children:[r.jsx("button",{className:"calendar-nav-btn",onClick:S,"aria-label":"Mois prcdent",children:""}),r.jsxs("span",{className:"calendar-nav-title",children:[DW[o]," ",a,p&&" ..."]}),r.jsx("button",{className:"calendar-nav-btn",onClick:w,"aria-label":"Mois suivant",children:""})]}),r.jsx("div",{className:"calendar-weekdays",children:OW.map(C=>r.jsx("div",{className:"calendar-weekday",children:C},C))}),r.jsx("div",{className:"calendar-grid",onClick:C=>C.stopPropagation(),children:j.map((C,E)=>r.jsxs("div",{className:`calendar-day ${C.isCurrentMonth?"":"other-month"} ${C.isToday?"today":""} ${v?.date.toDateString()===C.date.toDateString()?"selected":""}`,onClick:O=>A(C,O),children:[r.jsx("div",{className:"calendar-day-num",children:C.date.getDate()}),r.jsxs("div",{className:"calendar-day-events",children:[C.entrees.slice(0,3).map(O=>{const D=Li[O.typeContenu];return r.jsxs("div",{className:"calendar-event-dot",style:{background:D.color},title:O.chapitre,children:[D.emoji," ",O.chapitre.substring(0,12)]},O.id)}),C.entrees.length>3&&r.jsxs("div",{className:"calendar-more",children:["+",C.entrees.length-3]})]})]},E))}),r.jsx("div",{className:"calendar-legend",children:Object.entries(Li).slice(0,5).map(([C,E])=>r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-dot",style:{background:E.color}}),E.label]},C))}),v&&v.entrees.length>0&&r.jsxs("div",{className:"calendar-day-popup",style:{top:x.y,left:Math.min(x.x,window.innerWidth-300)},onClick:C=>C.stopPropagation(),children:[r.jsxs("div",{className:"calendar-day-popup-title",children:[" ",v.date.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})]}),v.entrees.map(C=>{const E=Li[C.typeContenu];return r.jsxs("div",{className:"calendar-popup-entree",onClick:()=>t(`/prof/cahiers/${e}/modifier/${C.id}`),children:[r.jsx("span",{className:"calendar-popup-entree-type",children:E.emoji}),r.jsxs("div",{className:"calendar-popup-entree-info",children:[r.jsx("div",{className:"calendar-popup-entree-chapitre",children:C.chapitre}),C.heureDebut&&r.jsxs("div",{className:"calendar-popup-entree-heure",children:[C.heureDebut,C.heureFin?`  ${C.heureFin}`:""]})]})]},C.id)})]})]})},cp="rappels_prof",kW=async(e,t)=>(await Pt(_e(te,cp),{profId:e,titre:t.titre,description:t.description||"",typeRappel:t.typeRappel,dateRappel:Me.fromDate(new Date(t.dateRappel)),recurrence:t.recurrence,priorite:t.priorite,cahierId:t.cahierId||null,isLu:!1,isDone:!1,createdAt:Me.now()})).id,TW=async e=>{const t=Te(_e(te,cp),we("profId","==",e),we("isDone","==",!1),Ke("dateRappel","asc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))},qW=async(e,t)=>{await He(Ne(te,cp,e),{isDone:t,isLu:t})},RW=async e=>{await Dn(Ne(te,cp,e))},qA=()=>({titre:"",description:"",typeRappel:"personnalise",dateRappel:new Date(Date.now()+36e5).toISOString().slice(0,16),recurrence:"unique",priorite:"normale"}),Vd=({profId:e,cahierId:t})=>{const[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(!1),[m,p]=g.useState(qA()),[h,v]=g.useState(!1),y=async()=>{try{o(!0);const C=await TW(e);a(C)}catch(C){console.error("Erreur rappels:",C)}finally{o(!1)}};g.useEffect(()=>{y()},[e]);const x=async C=>{if(C.preventDefault(),!!m.titre.trim()){v(!0);try{await kW(e,{...m,cahierId:t}),d(!1),p(qA()),await y()}catch(E){console.error("Erreur cration rappel:",E)}finally{v(!1)}}},_=async C=>{await qW(C,!0),a(E=>E.filter(O=>O.id!==C))},j=async C=>{confirm("Supprimer ce rappel ?")&&(await RW(C),a(E=>E.filter(O=>O.id!==C)))},S=new Date,w=n.filter(C=>C.dateRappel.toDate()<=S),A=n.filter(C=>C.dateRappel.toDate()>S);return r.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.1rem"},children:""}),r.jsx("span",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937"},children:"Rappels"}),w.length>0&&r.jsx("span",{style:{background:"#dc2626",color:"white",borderRadius:20,padding:"1px 7px",fontSize:"0.7rem",fontWeight:700},children:w.length})]}),r.jsx("button",{className:"btn-primary",style:{padding:"0.35rem 0.75rem",fontSize:"0.8rem"},onClick:()=>d(C=>!C),children:"+ Ajouter"})]}),u&&r.jsxs("form",{onSubmit:x,style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",background:"#f9fafb"},children:[r.jsx("div",{className:"form-group",children:r.jsx("input",{className:"form-input",placeholder:"Titre du rappel *",value:m.titre,onChange:C=>p(E=>({...E,titre:C.target.value})),required:!0})}),r.jsx("div",{className:"form-group",children:r.jsx("select",{className:"form-select",value:m.typeRappel,onChange:C=>p(E=>({...E,typeRappel:C.target.value})),children:Object.entries(qP).map(([C,E])=>r.jsxs("option",{value:C,children:[E.emoji," ",E.label]},C))})}),r.jsx("div",{className:"form-group",children:r.jsx("input",{type:"datetime-local",className:"form-input",value:m.dateRappel,onChange:C=>p(E=>({...E,dateRappel:C.target.value})),required:!0})}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("select",{className:"form-select",value:m.priorite,onChange:C=>p(E=>({...E,priorite:C.target.value})),children:[r.jsx("option",{value:"normale",children:"Normale"}),r.jsx("option",{value:"urgente",children:" Urgente"})]}),r.jsxs("select",{className:"form-select",value:m.recurrence,onChange:C=>p(E=>({...E,recurrence:C.target.value})),children:[r.jsx("option",{value:"unique",children:"Une fois"}),r.jsx("option",{value:"hebdomadaire",children:"Hebdo"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[r.jsx("button",{type:"submit",className:"btn-primary",disabled:h,style:{flex:1},children:h?"...":"Enregistrer"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Annuler"})]})]}),r.jsx("div",{style:{padding:"0.75rem 1.25rem"},children:l?r.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:"Chargement..."}):n.length===0?r.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:[r.jsx("div",{children:""}),r.jsx("div",{children:"Aucun rappel actif"})]}):r.jsxs(r.Fragment,{children:[w.length>0&&r.jsxs("div",{style:{marginBottom:"0.75rem"},children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#dc2626",textTransform:"uppercase",marginBottom:"0.4rem"},children:" En retard"}),w.map(C=>r.jsx(RA,{rappel:C,onDone:_,onDelete:j},C.id))]}),A.length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#6b7280",textTransform:"uppercase",marginBottom:"0.4rem"},children:" venir"}),A.slice(0,5).map(C=>r.jsx(RA,{rappel:C,onDone:_,onDelete:j},C.id))]})]})})]})},RA=({rappel:e,onDone:t,onDelete:n})=>{const a=qP[e.typeRappel],l=e.dateRappel.toDate(),o=e.priorite==="urgente",u=l<=new Date;return r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.5rem 0",borderBottom:"1px solid #f9fafb"},children:[r.jsx("button",{onClick:()=>t(e.id),style:{width:20,height:20,border:`2px solid ${o?"#dc2626":"#d1d5db"}`,borderRadius:4,background:"white",cursor:"pointer",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",marginTop:2},title:"Marquer termin"}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{fontSize:"0.82rem",fontWeight:600,color:u?"#dc2626":"#1f2937",display:"flex",alignItems:"center",gap:"0.3rem"},children:[a.emoji," ",e.titre,o&&r.jsx("span",{style:{fontSize:"0.65rem",color:"#dc2626"},children:""})]}),r.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:2},children:[l.toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),"  ",l.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),r.jsx("button",{onClick:()=>n(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"0.9rem",flexShrink:0},title:"Supprimer",children:""})]})},IW=({profId:e,cahierId:t})=>{const n=ot(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,m]=g.useState("tous");g.useEffect(()=>{(async()=>{u(!0);try{const x=await NW(e,t);l(x)}catch(x){console.error("Erreur signets:",x)}finally{u(!1)}})()},[e,t]);const p=async(y,x)=>{try{await Ec(y.id,{statutEvaluation:x}),l(_=>_.map(j=>j.id===y.id?{...j,statutEvaluation:x}:j))}catch(_){console.error("Erreur mise  jour statut:",_)}},h=d==="tous"?a:a.filter(y=>y.statutEvaluation===d),v=[{value:"tous",label:"Tous",color:"#6b7280"},{value:"a_evaluer",label:" valuer",color:"#d97706"},{value:"evaluation_creee",label:"Cre",color:"#2563eb"},{value:"evaluation_terminee",label:"Termine",color:"#059669"}];return r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:700,color:"#1f2937",margin:0},children:[" Signets d'valuation (",a.length,")"]})}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:v.map(y=>r.jsx("button",{onClick:()=>m(y.value),style:{padding:"0.3rem 0.85rem",borderRadius:20,border:`1.5px solid ${d===y.value?y.color:"#e5e7eb"}`,background:d===y.value?y.color:"white",color:d===y.value?"white":"#4b5563",fontSize:"0.8rem",fontWeight:600,cursor:"pointer",transition:"all 0.15s"},children:y.label},y.value))}),o?r.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Chargement..."}):h.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"#9ca3af"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),r.jsx("div",{style:{fontWeight:600,color:"#6b7280",marginBottom:"0.25rem"},children:"Aucun signet trouv"}),r.jsx("div",{style:{fontSize:"0.85rem"},children:"Marquez des entres pour valuation depuis l'diteur de sance."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:h.map(y=>{const x=Li[y.typeContenu];return Ac[y.statut],r.jsxs("div",{style:{background:"white",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:"1rem",borderLeft:"4px solid #f59e0b"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,color:"#1f2937"},children:y.chapitre}),r.jsx("div",{style:{fontSize:"0.78rem",color:"#9ca3af",marginTop:"0.15rem"},children:y.date.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),r.jsx("button",{onClick:()=>n(`/prof/cahiers/${t}/modifier/${y.id}`),style:{background:"none",border:"none",cursor:"pointer",color:"#2563eb",fontSize:"0.8rem",fontWeight:600,whiteSpace:"nowrap"},children:" Modifier"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:x.color+"22",color:x.color},children:[x.emoji," ",x.label]}),y.typeEvaluation&&r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:"#fef3c7",color:"#92400e"},children:[" ",TP[y.typeEvaluation]]}),y.dateEvaluationPrevue&&r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",background:"#f3f4f6",color:"#4b5563"},children:[" ",y.dateEvaluationPrevue.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),r.jsx("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:["a_evaluer","evaluation_creee","evaluation_terminee"].map(_=>{const j=y.statutEvaluation===_,S={a_evaluer:" valuer",evaluation_creee:"Cre",evaluation_terminee:" Termine"},w={a_evaluer:"#d97706",evaluation_creee:"#2563eb",evaluation_terminee:"#059669"};return r.jsx("button",{onClick:()=>p(y,_),style:{padding:"0.25rem 0.7rem",borderRadius:20,border:`1.5px solid ${j?w[_]:"#e5e7eb"}`,background:j?w[_]:"white",color:j?"white":"#6b7280",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:S[_]},_)})})]},y.id)})})]})},LW=({cahier:e})=>{const[t,n]=g.useState(null),[a,l]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const d=await _W(e.id);n(d)}catch{}finally{l(!1)}})()},[e.id]);const o=e.nombreSeancesPrevu>0?Math.min(100,Math.round(e.nombreSeancesRealise/e.nombreSeancesPrevu*100)):0;return a?r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#9ca3af",fontSize:"0.85rem"},children:"Chargement des stats..."}):t?r.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"1.25rem"},children:[r.jsx("div",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Statistiques du cahier"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsx(Yd,{value:t.total,label:"Sances total",color:"#2563eb",bg:"#dbeafe"}),r.jsx(Yd,{value:t.realise,label:"Ralises",color:"#059669",bg:"#d1fae5"}),r.jsx(Yd,{value:t.planifie,label:"Planifies",color:"#d97706",bg:"#fef3c7"}),r.jsx(Yd,{value:`${t.tauxRealisation}%`,label:"Taux de ralisation",color:"#7c3aed",bg:"#ede9fe"})]}),r.jsxs("div",{style:{marginBottom:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.4rem"},children:[r.jsx("span",{children:"Progression du programme"}),r.jsxs("span",{style:{fontWeight:700,color:e.couleur},children:[o,"%"]})]}),r.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:10,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${o}%`,background:e.couleur,borderRadius:10,transition:"width 0.5s ease"}})}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.3rem"},children:[e.nombreSeancesRealise," / ",e.nombreSeancesPrevu," sances prvues"]})]}),Object.keys(t.parType).length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.78rem",fontWeight:700,color:"#9ca3af",textTransform:"uppercase",marginBottom:"0.6rem"},children:"Rpartition par type"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:Object.entries(t.parType).sort((u,d)=>d[1]-u[1]).map(([u,d])=>{const m=Li[u];if(!m)return null;const p=t.total>0?Math.round(d/t.total*100):0;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"#4b5563",marginBottom:"0.2rem"},children:[r.jsxs("span",{children:[m.emoji," ",m.label]}),r.jsxs("span",{style:{fontWeight:600},children:[d," (",p,"%)"]})]}),r.jsx("div",{style:{height:4,background:"#f3f4f6",borderRadius:10,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${p}%`,background:m.color,borderRadius:10}})})]},u)})})]})]}):null},Yd=({value:e,label:t,color:n,bg:a})=>r.jsxs("div",{style:{background:a,borderRadius:10,padding:"0.75rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:n},children:e}),r.jsx("div",{style:{fontSize:"0.72rem",color:"#6b7280",marginTop:"0.15rem"},children:t})]}),$W=()=>{const{cahierId:e}=Hn(),{currentUser:t}=it(),n=ot(),[a,l]=g.useState(null),[o,u]=g.useState([]),[d,m]=g.useState(!1),[p,h]=g.useState(!0),[v,y]=g.useState(!0),[x,_]=g.useState("liste"),[j,S]=g.useState("tous"),[w,A]=g.useState("tous"),[C,E]=g.useState("tous");g.useEffect(()=>{if(!e)return;(async()=>{h(!0);try{const Q=await MP(e);if(!Q){n("/prof/cahiers");return}l(Q)}finally{h(!1)}})()},[e]);const O=g.useCallback(async()=>{if(e){y(!0);try{const L=await PP(e);u(L),m(!1)}finally{y(!1)}}},[e]);g.useEffect(()=>{O()},[e]);const D=async L=>{if(confirm(`Supprimer la sance "${L.chapitre}" ?`))try{await CW(L.id);const Q=o.filter(F=>F.id!==L.id);u(Q);const $=Q.filter(F=>F.statut==="realise").length;await sm(e,{nombreSeancesRealise:$}),l(F=>F&&{...F,nombreSeancesRealise:$})}catch{alert("Erreur lors de la suppression.")}},T=async(L,Q)=>{try{await Ec(L.id,{statut:Q});const $=o.map(Y=>Y.id===L.id?{...Y,statut:Q}:Y);u($);const F=$.filter(Y=>Y.statut==="realise").length;await sm(e,{nombreSeancesRealise:F}),l(Y=>Y&&{...Y,nombreSeancesRealise:F})}catch{alert("Erreur mise  jour statut.")}},k=Array.from(new Set(o.map(L=>{const Q=L.date.toDate();return`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`}))).sort().reverse(),R=o.filter(L=>{const Q=j==="tous"||L.statut===j,$=w==="tous"||L.typeContenu===w,F=C==="tous"||(()=>{const Y=L.date.toDate();return`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}`===C})();return Q&&$&&F});return p?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):a?r.jsxs("div",{className:"cahier-detail-page",children:[r.jsxs("div",{className:"cahier-detail-header",children:[r.jsx("button",{onClick:()=>n("/prof/cahiers"),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem",padding:"0 0.5rem"},title:"Retour",children:""}),r.jsx("div",{style:{width:6,minHeight:60,borderRadius:4,background:a.couleur,alignSelf:"stretch"}}),r.jsxs("div",{className:"cahier-detail-info",children:[r.jsx("h1",{className:"cahier-detail-titre",children:a.titre}),r.jsxs("div",{className:"cahier-detail-badges",children:[r.jsx("span",{className:"badge-classe",children:a.classe}),r.jsx("span",{className:"badge-matiere",children:a.matiere}),r.jsx("span",{className:"badge-annee",children:a.anneeScolaire})]}),a.description&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",margin:0},children:a.description})]}),r.jsx("div",{className:"cahier-detail-actions",children:r.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),children:"+ Nouvelle sance"})})]}),r.jsx("div",{className:"view-tabs",children:[{id:"liste",label:" Liste"},{id:"calendrier",label:" Calendrier"},{id:"signets",label:" Signets"},{id:"stats",label:" Statistiques"}].map(L=>r.jsx("button",{className:`view-tab ${x===L.id?"active":""}`,onClick:()=>_(L.id),children:L.label},L.id))}),x==="calendrier"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx("div",{children:r.jsx(PW,{cahierId:a.id})}),r.jsx("div",{children:r.jsx(Vd,{profId:t.uid,cahierId:a.id})})]}),x==="signets"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx(IW,{profId:t.uid,cahierId:a.id}),r.jsx(Vd,{profId:t.uid,cahierId:a.id})]}),x==="stats"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx(LW,{cahier:{...a,nombreSeancesRealise:o.filter(L=>L.statut==="realise").length}}),r.jsx(Vd,{profId:t.uid,cahierId:a.id})]}),x==="liste"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[["tous","realise","planifie","annule","reporte"].map(L=>{const Q=L==="tous"?null:Ac[L];return r.jsx("button",{onClick:()=>S(L),style:{padding:"0.3rem 0.75rem",borderRadius:20,border:`1.5px solid ${j===L?Q?.color||"#2563eb":"#e5e7eb"}`,background:j===L?Q?.bg||"#dbeafe":"white",color:j===L?Q?.color||"#2563eb":"#4b5563",fontSize:"0.78rem",fontWeight:600,cursor:"pointer"},children:L==="tous"?"Tous":Q?.label},L)}),r.jsxs("select",{className:"filtre-select",value:w,onChange:L=>A(L.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[r.jsx("option",{value:"tous",children:"Tous types"}),Object.entries(Li).map(([L,Q])=>r.jsxs("option",{value:L,children:[Q.emoji," ",Q.label]},L))]}),r.jsxs("select",{className:"filtre-select",value:C,onChange:L=>E(L.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[r.jsx("option",{value:"tous",children:"Tous les mois"}),k.map(L=>{const[Q,$]=L.split("-"),F=new Date(Number(Q),Number($)-1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"});return r.jsx("option",{value:L,children:F},L)})]})]}),v&&R.length===0?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):R.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{style:{fontSize:"2.5rem",opacity:.3,marginBottom:"0.5rem"},children:""}),r.jsxs("h3",{children:["Aucune sance",j!=="tous"||w!=="tous"?" (avec ce filtre)":""]}),r.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),style:{marginTop:"1rem"},children:"+ Ajouter la premire sance"})]}):r.jsxs("div",{className:"entrees-list",children:[R.map(L=>{const Q=Li[L.typeContenu],$=Ac[L.statut],F=L.date.toDate();return r.jsxs("div",{className:"entree-card",style:{borderLeftColor:Q.color,cursor:"pointer"},onClick:()=>n(`/prof/cahiers/${e}/modifier/${L.id}`),children:[r.jsxs("div",{className:"entree-card-top",children:[r.jsxs("div",{className:"entree-card-gauche",children:[r.jsxs("div",{className:"entree-date",children:[" ",F.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),L.heureDebut&&r.jsxs("span",{style:{marginLeft:"0.5rem"},children:[" ",L.heureDebut,L.heureFin?`  ${L.heureFin}`:""]})]}),r.jsx("h3",{className:"entree-chapitre",children:L.chapitre}),r.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[r.jsxs("span",{className:"entree-type-badge",style:{background:Q.color},children:[Q.emoji," ",Q.label]}),r.jsx("span",{className:"entree-statut-badge",style:{background:$.bg,color:$.color},children:$.label}),L.isMarqueEvaluation&&r.jsx("span",{className:"signet-badge",children:" valuation"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.25rem",flexShrink:0},children:[r.jsx("button",{className:"btn-icon",onClick:Y=>{Y.stopPropagation(),n(`/prof/cahiers/${e}/modifier/${L.id}`)},title:"Modifier",children:""}),r.jsx("button",{className:"btn-icon",onClick:Y=>{Y.stopPropagation(),D(L)},title:"Supprimer",style:{color:"#ef4444"},children:""})]})]}),L.contenu&&r.jsx("div",{className:"entree-contenu-preview",dangerouslySetInnerHTML:{__html:L.contenu}}),L.objectifs&&r.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem",fontStyle:"italic"},children:[" ",L.objectifs]}),L.piecesJointes&&L.piecesJointes.length>0&&r.jsxs("div",{style:{fontSize:"0.78rem",color:"#2563eb",marginTop:"0.4rem"},children:[" ",L.piecesJointes.length," pice(s) jointe(s)"]}),r.jsx("div",{className:"entree-card-footer",children:r.jsx("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap"},children:["realise","planifie","annule"].map(Y=>{const M=Ac[Y],q=L.statut===Y;return r.jsx("button",{onClick:Z=>{Z.stopPropagation(),T(L,Y)},style:{padding:"0.2rem 0.6rem",borderRadius:20,border:`1.5px solid ${q?M.color:"#e5e7eb"}`,background:q?M.bg:"white",color:q?M.color:"#9ca3af",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:M.label},Y)})})})]},L.id)}),d&&r.jsx("div",{style:{textAlign:"center",padding:"1rem"},children:r.jsx("button",{className:"btn-secondary",onClick:()=>O(),disabled:v,children:v?"Chargement...":"Charger plus de sances"})})]})]}),r.jsx("div",{children:r.jsx(Vd,{profId:t.uid,cahierId:a.id})})]})]}):null};function BW(e){return{video:"",article:"",exercice:"",autre:""}[e]??""}function UW(e){const t=/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]{11})/,n=e.match(t);return n?n[1]:null}const FW=({onAjouter:e,onAnnuler:t})=>{const[n,a]=g.useState(""),[l,o]=g.useState(""),[u,d]=g.useState("article"),[m,p]=g.useState(""),[h,v]=g.useState("");function y(_){o(_),(_.includes("youtube.com")||_.includes("youtu.be"))&&d("video")}function x(){if(!n.trim()){v("Le titre est requis.");return}if(!l.trim()||!l.startsWith("http://")&&!l.startsWith("https://")){v("Entrez une URL valide commenant par https://");return}const _={id:String(Date.now()),titre:n.trim(),url:l.trim(),type:u,description:m.trim()||void 0};e(_)}return r.jsxs("div",{className:"lien-form",children:[r.jsx("input",{type:"text",placeholder:"Titre du lien *",value:n,onChange:_=>a(_.target.value),"aria-label":"Titre du lien"}),r.jsx("input",{type:"url",placeholder:"https://... *",value:l,onChange:_=>y(_.target.value),"aria-label":"URL du lien"}),r.jsxs("select",{value:u,onChange:_=>d(_.target.value),"aria-label":"Type de lien",children:[r.jsx("option",{value:"article",children:" Article"}),r.jsx("option",{value:"video",children:" Vido"}),r.jsx("option",{value:"exercice",children:" Exercice"}),r.jsx("option",{value:"autre",children:" Autre"})]}),r.jsx("textarea",{placeholder:"Description (optionnelle)",value:m,onChange:_=>p(_.target.value),rows:2,"aria-label":"Description du lien"}),h&&r.jsx("p",{style:{color:"#dc2626",fontSize:"0.8rem",margin:0},children:h}),r.jsxs("div",{className:"lien-form-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:t,type:"button",children:"Annuler"}),r.jsx("button",{className:"btn-pedaclic",onClick:x,type:"button",children:" Ajouter"})]})]})},GW=({videoId:e})=>r.jsx("div",{className:"youtube-embed",children:r.jsx("iframe",{src:`https://www.youtube.com/embed/${e}`,title:"Vido YouTube",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}),RP=({liens:e,onChange:t,readonly:n=!1})=>{const[a,l]=g.useState(!1);function o(d){t([...e,d]),l(!1)}function u(d){t(e.filter(m=>m.id!==d))}return r.jsxs("section",{className:"liens-section","aria-label":"Liens externes",children:[r.jsx("h4",{children:" Liens et ressources"}),e.length>0&&r.jsx("div",{className:"liens-liste",children:e.map(d=>{const m=UW(d.url);return r.jsxs("div",{className:"lien-card",children:[r.jsx("span",{className:"lien-icone","aria-hidden":"true",children:BW(d.type)}),r.jsxs("div",{className:"lien-infos",children:[r.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"lien-titre",title:d.url,children:d.titre}),d.description&&r.jsx("p",{className:"lien-description",children:d.description}),m&&r.jsx(GW,{videoId:m})]}),!n&&r.jsx("button",{className:"lien-suppr",onClick:()=>u(d.id),title:"Supprimer ce lien",type:"button","aria-label":`Supprimer le lien ${d.titre}`,children:""})]},d.id)})}),e.length===0&&!n&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun lien ajout. Ajoutez des ressources pour enrichir cette sance."}),!n&&r.jsx(r.Fragment,{children:a?r.jsx(FW,{onAjouter:o,onAnnuler:()=>l(!1)}):r.jsx("button",{className:"btn-secondary",onClick:()=>l(!0),type:"button",children:" Ajouter un lien"})})]})},HW=({selectedIds:e,onSelect:t,onFermer:n})=>{const[a,l]=g.useState(""),[o,u]=g.useState([]),[d,m]=g.useState(!0),[p,h]=g.useState("");g.useEffect(()=>{async function x(){try{const _=await yW();u(_)}catch{h("Impossible de charger la bibliothque.")}finally{m(!1)}}x()},[]);const v=g.useMemo(()=>{const x=a.toLowerCase().trim();return x?o.filter(_=>_.titre.toLowerCase().includes(x)||_.auteur.toLowerCase().includes(x)||_.categorie.toLowerCase().includes(x)):o},[o,a]);function y(x){x.target===x.currentTarget&&n()}return r.jsx("div",{className:"ebook-selector-overlay",onClick:y,role:"dialog","aria-modal":"true","aria-label":"Slectionner un ebook",children:r.jsxs("div",{className:"ebook-selector-panel",children:[r.jsxs("div",{className:"ebook-selector-header",children:[r.jsx("h3",{children:" Bibliothque PedaClic"}),r.jsx("button",{onClick:n,"aria-label":"Fermer",style:{background:"none",border:"none",fontSize:"1.3rem",cursor:"pointer",color:"#6b7280"},type:"button",children:""})]}),r.jsx("div",{className:"ebook-search",children:r.jsx("input",{type:"search",placeholder:" Rechercher par titre, auteur ou catgorie...",value:a,onChange:x=>l(x.target.value),autoFocus:!0,"aria-label":"Recherche ebook"})}),r.jsxs("div",{className:"ebook-liste",children:[d&&r.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:" Chargement de la bibliothque"}),p&&r.jsx("p",{style:{color:"#dc2626",textAlign:"center"},children:p}),!d&&!p&&v.length===0&&r.jsx("p",{style:{color:"#9ca3af",textAlign:"center"},children:"Aucun ebook ne correspond  votre recherche."}),!d&&v.map(x=>{const _=e.includes(x.id);return r.jsxs("button",{type:"button",className:`ebook-item ${_?"selected":""}`,onClick:()=>!_&&t(x),disabled:_,"aria-pressed":_,"aria-label":`${_?"Dj li : ":""}${x.titre}`,children:[x.couvertureUrl?r.jsx("img",{src:x.couvertureUrl,alt:`Couverture de ${x.titre}`,loading:"lazy"}):r.jsx("div",{style:{width:36,height:48,background:"#e5e7eb",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",flexShrink:0},"aria-hidden":"true",children:""}),r.jsxs("div",{className:"ebook-item-info",children:[r.jsx("div",{className:"ebook-item-titre",children:x.titre}),r.jsxs("div",{className:"ebook-item-meta",children:[x.auteur,"  ",x.categorie]}),_&&r.jsx("div",{style:{fontSize:"0.75rem",color:"#2563eb",marginTop:2},children:" Dj li  cette sance"})]})]},x.id)})]})]})})},IP=({ebooksLies:e,onChange:t,readonly:n=!1})=>{const[a,l]=g.useState(!1),o=e.map(m=>m.ebookId);function u(m){const p={ebookId:m.id,titre:m.titre,categorie:m.categorie,auteur:m.auteur};t([...e,p]),l(!1)}function d(m){t(e.filter(p=>p.ebookId!==m))}return r.jsxs("section",{"aria-label":"Ebooks lis  la sance",style:{marginTop:16},children:[r.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 8px"},children:" Ebooks de la bibliothque"}),e.length>0&&r.jsx("div",{className:"ebooks-lies",children:e.map(m=>r.jsxs("span",{className:"ebook-chip",children:[r.jsxs("a",{href:`/bibliotheque/${m.ebookId}`,className:"ebook-chip",style:{textDecoration:"none"},title:`Lire : ${m.titre}`,children:[" ",m.titre]}),!n&&r.jsx("button",{onClick:()=>d(m.ebookId),title:`Retirer ${m.titre}`,type:"button","aria-label":`Retirer l'ebook ${m.titre}`,children:""})]},m.ebookId))}),e.length===0&&!n&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 8px"},children:"Aucun ebook li. Associez un ebook de la bibliothque  cette sance."}),!n&&r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(!0),style:{marginTop:8},children:" Choisir dans la bibliothque"}),a&&r.jsx(HW,{selectedIds:o,onSelect:u,onFermer:()=>l(!1)})]})},QW=()=>({date:new Date().toISOString().slice(0,10),heureDebut:"",heureFin:"",chapitre:"",typeContenu:"cours",contenu:"",objectifs:"",competences:[],statut:"realise",motifAnnulation:"",dateReport:"",notesPrivees:"",isMarqueEvaluation:!1,typeEvaluation:"",dateEvaluationPrevue:"",statutEvaluation:"a_evaluer"}),VW=({value:e,onChange:t,placeholder:n})=>{const a=g.useRef(null);g.useEffect(()=>{a.current&&a.current.innerHTML!==e&&(a.current.innerHTML=e)},[]);const l=(d,m)=>{document.execCommand(d,!1,m),a.current?.focus(),o()},o=()=>{a.current&&t(a.current.innerHTML)},u=d=>{try{return document.queryCommandState(d)}catch{return!1}};return r.jsxs("div",{children:[r.jsxs("div",{className:"rich-editor-toolbar",children:[[{cmd:"bold",label:"G",title:"Gras"},{cmd:"italic",label:"I",title:"Italique"},{cmd:"underline",label:"S",title:"Soulign"}].map(({cmd:d,label:m,title:p})=>r.jsx("button",{type:"button",className:`toolbar-btn ${u(d)?"active":""}`,onMouseDown:h=>{h.preventDefault(),l(d)},title:p,children:m},d)),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertUnorderedList")},title:"Liste  puces",children:""}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertOrderedList")},title:"Liste numrote",children:"1."}),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),["h2","h3","p"].map(d=>r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:m=>{m.preventDefault(),l("formatBlock",d)},title:d==="p"?"Paragraphe":d.toUpperCase(),children:d==="p"?"":d.toUpperCase()},d)),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("removeFormat")},title:"Effacer",children:""})]}),r.jsx("div",{ref:a,className:"rich-editor-area",contentEditable:!0,suppressContentEditableWarning:!0,onInput:o,"data-placeholder":n||"Dcrivez le contenu de la sance...",style:{position:"relative"}})]})},IA=()=>{const{cahierId:e,entreeId:t}=Hn(),{currentUser:n}=it(),a=ot(),[l,o]=g.useState(null),[u,d]=g.useState(null),[m,p]=g.useState(QW()),[h,v]=g.useState([]),[y,x]=g.useState(!0),[_,j]=g.useState(!1),[S,w]=g.useState(!1),[A,C]=g.useState(""),[E,O]=g.useState([]),[D,T]=g.useState([]),k=!!t;g.useEffect(()=>{if(!e)return;(async()=>{x(!0);try{const Y=await MP(e);if(!Y){a("/prof/cahiers");return}if(o(Y),k&&t){const M=await mW(t);M&&(d(M),v(M.piecesJointes||[]),O(M.liens??[]),T(M.ebooksLies??[]),p({date:M.date.toDate().toISOString().slice(0,10),heureDebut:M.heureDebut||"",heureFin:M.heureFin||"",chapitre:M.chapitre,typeContenu:M.typeContenu,contenu:M.contenu,objectifs:M.objectifs||"",competences:M.competences||[],statut:M.statut,motifAnnulation:M.motifAnnulation||"",dateReport:M.dateReport?M.dateReport.toDate().toISOString().slice(0,10):"",notesPrivees:M.notesPrivees||"",isMarqueEvaluation:M.isMarqueEvaluation,typeEvaluation:M.typeEvaluation||"",dateEvaluationPrevue:M.dateEvaluationPrevue?M.dateEvaluationPrevue.toDate().toISOString().slice(0,10):"",statutEvaluation:M.statutEvaluation||"a_evaluer"}))}}finally{x(!1)}})()},[e,t]);const R=F=>{p(Y=>({...Y,competences:Y.competences.includes(F)?Y.competences.filter(M=>M!==F):[...Y.competences,F]}))},L=async F=>{if(!F.target.files?.length||!n?.uid||!e)return;const Y=F.target.files[0];if(Y.size>10*1024*1024){alert("Fichier trop volumineux (max 10 Mo)");return}w(!0);try{const M=await pW(n.uid,e,Y),q=[...h,M];v(q),k&&t&&u&&await PA(t,h,[M])}catch{alert("Erreur upload fichier.")}finally{w(!1),F.target.value=""}},Q=async F=>{if(!t){v(Y=>Y.filter(M=>M.url!==F));return}try{await hW(t,h,F),v(Y=>Y.filter(M=>M.url!==F))}catch{alert("Erreur suppression fichier.")}},$=async F=>{if(F.preventDefault(),!m.chapitre.trim()){C("Le chapitre est obligatoire.");return}if(!m.date){C("La date est obligatoire.");return}if(!(!n?.uid||!e)){j(!0),C("");try{if(k&&t)await Ec(t,e,m),await Ec(t,{liens:E,ebooksLies:D});else{const q=await wW(e,n.uid,m);h.length>0&&await PA(q,[],h),(E.length>0||D.length>0)&&await Ec(q,{liens:E,ebooksLies:D})}const M=(await PP(e)).filter(q=>q.statut==="realise").length;await sm(e,{nombreSeancesRealise:M}),a(`/prof/cahiers/${e}`)}catch(Y){const M=Y instanceof Error?Y.message:String(Y);C("Erreur : "+M)}finally{j(!1)}}};return y?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):l?r.jsxs("div",{className:"entree-editor-page",children:[r.jsxs("div",{className:"editor-header",children:[r.jsx("button",{onClick:()=>a(`/prof/cahiers/${e}`),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem"},children:""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.4rem",fontWeight:700,color:"#1f2937",margin:"0 0 0.2rem"},children:k?" Modifier la sance":" Nouvelle sance"}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[l.titre,"  ",l.classe,"  ",l.matiere]})]})]}),r.jsxs("form",{onSubmit:$,children:[r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Informations de la sance"}),r.jsxs("div",{className:"form-row",style:{gridTemplateColumns:"1.5fr 1fr 1fr"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date *"}),r.jsx("input",{type:"date",className:"form-input",value:m.date,onChange:F=>p(Y=>({...Y,date:F.target.value})),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Heure dbut"}),r.jsx("input",{type:"time",className:"form-input",value:m.heureDebut,onChange:F=>p(Y=>({...Y,heureDebut:F.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Heure fin"}),r.jsx("input",{type:"time",className:"form-input",value:m.heureFin,onChange:F=>p(Y=>({...Y,heureFin:F.target.value}))})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Chapitre / Titre de la sance *"}),r.jsx("input",{className:"form-input",placeholder:"Ex: Chapitre 3  Les fonctions affines",value:m.chapitre,onChange:F=>p(Y=>({...Y,chapitre:F.target.value})),required:!0})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Type de sance"}),r.jsx("select",{className:"form-select",value:m.typeContenu,onChange:F=>p(Y=>({...Y,typeContenu:F.target.value})),children:Object.entries(Li).map(([F,Y])=>r.jsxs("option",{value:F,children:[Y.emoji," ",Y.label]},F))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Statut"}),r.jsx("select",{className:"form-select",value:m.statut,onChange:F=>p(Y=>({...Y,statut:F.target.value})),children:Object.entries(Ac).map(([F,Y])=>r.jsx("option",{value:F,children:Y.label},F))})]})]}),m.statut==="annule"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Motif d'annulation"}),r.jsx("input",{className:"form-input",placeholder:"Ex: Grve enseignants, sortie scolaire...",value:m.motifAnnulation,onChange:F=>p(Y=>({...Y,motifAnnulation:F.target.value}))})]}),m.statut==="reporte"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Nouvelle date (report)"}),r.jsx("input",{type:"date",className:"form-input",value:m.dateReport,onChange:F=>p(Y=>({...Y,dateReport:F.target.value}))})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Contenu de la sance"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contenu (mise en forme riche)"}),r.jsx(VW,{value:m.contenu,onChange:F=>p(Y=>({...Y,contenu:F})),placeholder:"Dcrivez le contenu enseign, les exemples traits, les formules vues..."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Ex: L'lve sera capable de rsoudre une quation du second degr...",value:m.objectifs,onChange:F=>p(Y=>({...Y,objectifs:F.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Comptences vises"}),r.jsx("div",{className:"competences-container",children:AW.map(F=>r.jsx("button",{type:"button",className:`competence-tag ${m.competences.includes(F)?"selected":""}`,onClick:()=>R(F),children:F},F))})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Signet d'valuation"}),r.jsxs("div",{className:"signet-section",children:[r.jsxs("div",{className:"signet-toggle",onClick:()=>p(F=>({...F,isMarqueEvaluation:!F.isMarqueEvaluation})),children:[r.jsx("div",{className:`toggle-switch ${m.isMarqueEvaluation?"on":""}`}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1f2937"},children:"Marquer pour valuation"}),r.jsx("div",{style:{fontSize:"0.78rem",color:"#6b7280"},children:"Ce contenu sera valu ultrieurement"})]})]}),m.isMarqueEvaluation&&r.jsx("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Type d'valuation"}),r.jsxs("select",{className:"form-select",value:m.typeEvaluation,onChange:F=>p(Y=>({...Y,typeEvaluation:F.target.value})),children:[r.jsx("option",{value:"",children:"Choisir..."}),Object.entries(TP).map(([F,Y])=>r.jsx("option",{value:F,children:Y},F))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date prvue d'valuation"}),r.jsx("input",{type:"date",className:"form-input",value:m.dateEvaluationPrevue,onChange:F=>p(Y=>({...Y,dateEvaluationPrevue:F.target.value}))})]})]})})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Pices jointes"}),h.length>0&&r.jsx("div",{className:"pieces-jointes-list",children:h.map(F=>r.jsxs("div",{className:"piece-jointe-item",children:[r.jsx("span",{children:""}),r.jsx("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",children:F.nom}),r.jsxs("span",{style:{color:"#9ca3af",fontSize:"0.75rem"},children:["(",Math.round((F.taille??0)/1024)," Ko)"]}),r.jsx("button",{type:"button",onClick:()=>Q(F.url),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",marginLeft:"auto"},children:""})]},F.url))}),r.jsxs("label",{className:"upload-zone",children:[S?"Envoi en cours...":" Cliquer pour ajouter un fichier (PDF, image  max 10 Mo)",r.jsx("input",{type:"file",style:{display:"none"},accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.ppt,.pptx",onChange:L,disabled:S})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Ressources enrichies"}),r.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 4px"},children:"Ajoutez des liens ou des ebooks pour enrichir cette sance."}),r.jsx(RP,{liens:E,onChange:O}),r.jsx(IP,{ebooksLies:D,onChange:T})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Notes prives"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Notes personnelles (non visibles par l'administration)...",value:m.notesPrivees,onChange:F=>p(Y=>({...Y,notesPrivees:F.target.value})),rows:3}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Ces notes sont uniquement visibles par vous."})]}),A&&r.jsx("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.85rem"},children:A}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingBottom:"2rem"},children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(`/prof/cahiers/${e}`),children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:_,style:{minWidth:160},children:_?"Enregistrement...":k?" Mettre  jour":" Enregistrer la sance"})]})]})]}):null},Vi="sequences_pedagogiques",YW="entrees_cahier";function LP(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function up(e){return e.filter(t=>t.estEvaluation&&t.typeEvaluation).map(t=>({id:t.id,titre:t.titre,type:t.typeEvaluation,seanceNumero:t.numero,noteMax:t.noteMax??20,coefficient:t.coefficient??1,datePrevue:t.datePrevue}))}async function KW(e){const t=Te(_e(te,Vi),we("profId","==",e),Ke("updatedAt","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function Qc(e){const t=await Dt(Ne(te,Vi,e));return t.exists()?{id:t.id,...t.data()}:null}async function XW(e,t){const n=Me.now(),a=t.seances.map(u=>({...u,id:u.id||LP(),exporterVersCahier:u.exporterVersCahier??!0,entreesCahierIds:u.entreesCahierIds??[]})),l=up(a);return(await Pt(_e(te,Vi),{...t,profId:e,seances:a,evaluationsPrevues:l,statut:t.statut??"brouillon",genereeParIA:t.genereeParIA??!1,competences:t.competences??[],createdAt:n,updatedAt:n})).id}async function WW(e,t){const n={...t,updatedAt:Me.now()};t.seances&&(n.evaluationsPrevues=up(t.seances)),await He(Ne(te,Vi,e),n)}async function ZW(e,t){await He(Ne(te,Vi,e),{statut:t,updatedAt:Me.now()})}async function $P(e){await Dn(Ne(te,Vi,e))}async function JW(e,t){const n=await Qc(e);if(!n)throw new Error(`Squence ${e} introuvable`);const a=Me.now(),l=n.seances.map(u=>({...u,id:LP(),exporterVersCahier:!0,entreesCahierIds:[],datePrevue:void 0}));return(await Pt(_e(te,Vi),{titre:`[Copie] ${n.titre}`,description:n.description,niveau:n.niveau,matiere:n.matiere,theme:n.theme,competences:n.competences,objectifGeneral:n.objectifGeneral,prerequis:n.prerequis,nombreSeances:n.nombreSeances,dureeSeanceMinutes:n.dureeSeanceMinutes,trimestre:n.trimestre,seances:l,evaluationsPrevues:up(l),genereeParIA:n.genereeParIA,profId:t,statut:"brouillon",groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0,createdAt:a,updatedAt:a})).id}async function eZ(e){const{sequenceId:t,cahierDeTextesId:n,profId:a,datesParSeance:l}=e,o=await Qc(t);if(!o)throw new Error(`Squence ${t} introuvable`);const u=Me.now(),d=[],m=[],p=Object.keys(l),h=[...o.seances];for(const v of p){const y=h.findIndex(j=>j.id===v);if(y===-1){m.push(v);continue}const x=h[y],_=l[v];try{const j={cahierId:n,profId:a,date:_,chapitre:x.titre,typeContenu:"cours",contenu:x.contenu,objectifs:x.objectifSpecifique,statut:"planifie",notesPrivees:x.ressources.length>0?`Ressources : ${x.ressources.join(" | ")}`:void 0,isMarqueEvaluation:!1,ordre:y,liens:[],ebooksLies:[],piecesJointes:[]},S=await Pt(_e(te,YW),{...j,createdAt:u,updatedAt:u});d.push(S.id),h[y]={...x,exporterVersCahier:!1,entreesCahierIds:[...x.entreesCahierIds??[],S.id]}}catch(j){console.error(`[exporterVersCahier] Erreur sance ${v}:`,j),m.push(v)}}return d.length>0&&await He(Ne(te,Vi,t),{seances:h,evaluationsPrevues:up(h),cahierDeTextesId:n,cahierDeTextesNom:o.cahierDeTextesNom??"",exporteAt:u,updatedAt:u}),{nbExportees:d.length,idsEntrees:d,erreurs:m}}function tZ(e,t){return e.filter(n=>{if(t.matiere&&n.matiere!==t.matiere||t.niveau&&n.niveau!==t.niveau||t.statut&&n.statut!==t.statut||t.groupeClasseId&&n.groupeClasseId!==t.groupeClasseId)return!1;if(t.recherche){const a=t.recherche.toLowerCase();if(!(n.titre.toLowerCase().includes(a)||n.matiere.toLowerCase().includes(a)||n.theme.toLowerCase().includes(a)||n.description.toLowerCase().includes(a)))return!1}return!0})}const lm={cours:"Cours",td:"TD",tp:"TP",evaluation:"valuation",revision:"Rvision",projet:"Projet",correction:"Correction"},mj={formative:"Formative",sommative:"Sommative",diagnostique:"Diagnostique",devoir:"Devoir sur table",composition:"Composition (BFEM/BAC)",interrogation:"Interrogation"},dp={brouillon:{label:"Brouillon",couleur:"#6b7280"},active:{label:"En cours",couleur:"#2563eb"},terminee:{label:"Termine",couleur:"#16a34a"},archivee:{label:"Archive",couleur:"#9ca3af"}},fu=[{valeur:"6eme",label:"6me"},{valeur:"5eme",label:"5me"},{valeur:"4eme",label:"4me"},{valeur:"3eme",label:"3me (BFEM)"},{valeur:"2nde",label:"2nde"},{valeur:"1ere",label:"1re"},{valeur:"terminale",label:"Terminale (BAC)"}],om=[30,45,55,60,90,120],BP=["Mathmatiques","Franais","Sciences de la Vie et de la Terre (SVT)","Histoire-Gographie","Physique-Chimie","Anglais","Philosophie","Sciences conomiques et Sociales","ducation Civique","Arts Plastiques","ducation Physique et Sportive"],rZ=({statut:e})=>{const{label:t}=dp[e];return r.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[r.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),t]})},nZ=({sequence:e,onView:t,onEdit:n,onDuplicate:a,onDelete:l})=>{const o=e.seances.filter(u=>u.estEvaluation).length;return r.jsxs("article",{className:"sequence-card",onClick:t,role:"button",tabIndex:0,onKeyDown:u=>u.key==="Enter"&&t(),children:[r.jsxs("div",{className:"sequence-card__badges",children:[r.jsx(rZ,{statut:e.statut}),e.genereeParIA&&r.jsx("span",{className:"badge-ia",children:" IA"})]}),r.jsx("h3",{className:"sequence-card__title",children:e.titre}),r.jsxs("div",{className:"sequence-card__meta",children:[r.jsx("span",{className:"sequence-card__meta-chip",children:e.matiere}),r.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:fu.find(u=>u.valeur===e.niveau)?.label??e.niveau}),e.trimestre&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",e.trimestre]})]}),e.description&&r.jsx("p",{className:"sequence-card__desc",children:e.description}),r.jsxs("div",{className:"sequence-card__footer",children:[r.jsxs("span",{className:"sequence-card__seances-count",children:[" ",e.seances.length," sance",e.seances.length>1?"s":"",o>0&&`   ${o} val.`]}),e.groupeClasseNom&&r.jsxs("span",{className:"sequence-card__groupe",children:[" ",e.groupeClasseNom]})]}),r.jsxs("div",{className:"sequence-card__actions",onClick:u=>u.stopPropagation(),children:[r.jsx("button",{className:"sequence-card__action-btn",onClick:n,title:"Modifier","aria-label":"Modifier la squence",children:""}),r.jsx("button",{className:"sequence-card__action-btn",onClick:a,title:"Dupliquer","aria-label":"Dupliquer la squence",children:""}),r.jsx("button",{className:"sequence-card__action-btn sequence-card__action-btn--danger",onClick:l,title:"Supprimer","aria-label":"Supprimer la squence",children:""})]})]})},aZ=()=>{const e=ot(),{currentUser:t}=it(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(null),[h,v]=g.useState({matiere:"",niveau:"",statut:"",recherche:""}),y=g.useCallback(async()=>{if(t?.uid){o(!0),d(null);try{const A=await KW(t.uid);a(A)}catch(A){console.error("[SequencesPage] Chargement:",A),d("Impossible de charger vos squences. Vrifiez votre connexion.")}finally{o(!1)}}},[t?.uid]);if(g.useEffect(()=>{y()},[y]),!t?.isPremium)return r.jsxs("div",{className:"premium-gate",children:[r.jsx("span",{className:"premium-gate__icon",children:""}),r.jsx("h2",{className:"premium-gate__title",children:"Fonctionnalit Premium"}),r.jsx("p",{className:"premium-gate__text",children:"Le Gnrateur de Squences Pdagogiques est rserv aux enseignants Premium. Passez  Premium pour crer des squences structures et les exporter vers votre Cahier de Textes."}),r.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/premium"),children:" Passer  Premium  2 000 FCFA/mois"})]});const x=tZ(n,h),_=[...new Set(n.map(A=>A.matiere))].sort(),j=async A=>{if(window.confirm(`Supprimer la squence "${A.titre}" ?

Cette action est irrversible.`)){p(A.id);try{await $P(A.id),a(E=>E.filter(O=>O.id!==A.id))}catch(E){console.error("[SequencesPage] Suppression:",E),d("Erreur lors de la suppression. Ressayez.")}finally{p(null)}}},S=async A=>{if(t?.uid){p(A.id);try{const C=await JW(A.id,t.uid);e(`/prof/sequences/${C}/modifier`)}catch(C){console.error("[SequencesPage] Duplication:",C),d("Erreur lors de la duplication. Ressayez."),p(null)}}},w={total:n.length,active:n.filter(A=>A.statut==="active").length,terminee:n.filter(A=>A.statut==="terminee").length,ia:n.filter(A=>A.genereeParIA).length};return r.jsxs("div",{className:"sequences-page",children:[r.jsxs("div",{className:"sequences-page__header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"sequences-page__title",children:" Squences Pdagogiques"}),r.jsxs("p",{className:"sequences-page__subtitle",children:[w.total," squence",w.total>1?"s":"",w.active>0&&`  ${w.active} en cours`,w.ia>0&&`  ${w.ia} assiste${w.ia>1?"s":""} par IA`]})]}),r.jsx("button",{className:"sequences-page__btn-new",onClick:()=>e("/prof/sequences/nouvelle"),children:"+ Nouvelle squence"})]}),u&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",u,r.jsx("button",{onClick:y,style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontWeight:600},children:"Ressayer"})]}),r.jsxs("div",{className:"sequences-filters",role:"search",children:[r.jsx("input",{type:"search",className:"sequences-filters__search",placeholder:" Rechercher une squence...",value:h.recherche??"",onChange:A=>v(C=>({...C,recherche:A.target.value})),"aria-label":"Rechercher une squence"}),r.jsxs("select",{className:"sequences-filters__select",value:h.matiere??"",onChange:A=>v(C=>({...C,matiere:A.target.value})),"aria-label":"Filtrer par matire",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),_.map(A=>r.jsx("option",{value:A,children:A},A))]}),r.jsxs("select",{className:"sequences-filters__select",value:h.niveau??"",onChange:A=>v(C=>({...C,niveau:A.target.value})),"aria-label":"Filtrer par niveau",children:[r.jsx("option",{value:"",children:"Tous les niveaux"}),fu.map(A=>r.jsx("option",{value:A.valeur,children:A.label},A.valeur))]}),r.jsxs("select",{className:"sequences-filters__select",value:h.statut??"",onChange:A=>v(C=>({...C,statut:A.target.value})),"aria-label":"Filtrer par statut",children:[r.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(dp).map(([A,{label:C}])=>r.jsx("option",{value:A,children:C},A))]})]}),l?r.jsx("div",{className:"sequences-grid",children:[1,2,3].map(A=>r.jsxs("div",{className:"sequence-card",style:{minHeight:180},children:[r.jsx("div",{className:"skeleton",style:{height:20,width:"40%",marginBottom:10}}),r.jsx("div",{className:"skeleton",style:{height:22,width:"80%",marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:14,width:"60%"}})]},A))}):r.jsx("div",{className:"sequences-grid",role:"list",children:x.length===0?r.jsxs("div",{className:"sequences-empty",children:[r.jsx("span",{className:"sequences-empty__icon",children:""}),r.jsx("p",{className:"sequences-empty__text",children:n.length===0?"Aucune squence pour l'instant":"Aucune squence ne correspond  vos filtres"}),r.jsx("p",{className:"sequences-empty__hint",children:n.length===0?'Cliquez sur "+ Nouvelle squence" pour commencer':"Modifiez ou effacez les filtres pour voir plus de rsultats"})]}):x.map(A=>r.jsx("div",{role:"listitem",style:{opacity:m===A.id?.6:1},children:r.jsx(nZ,{sequence:A,onView:()=>e(`/prof/sequences/${A.id}`),onEdit:()=>e(`/prof/sequences/${A.id}/modifier`),onDuplicate:()=>S(A),onDelete:()=>j(A)})},A.id))})]})},iZ="https://votre-app.railway.app",sZ=["cours","td","tp","evaluation","revision","projet","correction"],lZ=["formative","sommative","diagnostique","devoir","composition","interrogation"];function oZ(e){return sZ.includes(e)?e:"cours"}function cZ(e){if(e)return lZ.includes(e)?e:"formative"}function uZ(e){if(!e||typeof e!="object")throw new Error("Rponse IA invalide : non-objet");if(!Array.isArray(e.seances)||e.seances.length===0)throw new Error("Rponse IA invalide : tableau seances absent ou vide");const t=e.seances.map((n,a)=>({numero:Number(n.numero)||a+1,titre:String(n.titre??`Sance ${a+1}`),dureeMinutes:Number(n.dureeMinutes)||55,objectifSpecifique:String(n.objectifSpecifique??""),contenu:String(n.contenu??""),ressources:Array.isArray(n.ressources)?n.ressources.map(String):[],typeActivite:oZ(String(n.typeActivite??"cours")),estEvaluation:!!n.estEvaluation,typeEvaluation:cZ(n.typeEvaluation),noteMax:typeof n.noteMax=="number"?n.noteMax:void 0,coefficient:typeof n.coefficient=="number"?n.coefficient:void 0}));return{titre:String(e.titre??""),description:String(e.description??""),objectifGeneral:String(e.objectifGeneral??""),prerequis:String(e.prerequis??""),competences:Array.isArray(e.competences)?e.competences.map(String):[],seances:t}}function dZ(){return`Tu es un expert en ingnierie pdagogique pour le systme ducatif sngalais 
(programme du Ministre de l'ducation Nationale du Sngal).

Tu gnres des squences pdagogiques structures pour des professeurs du secondaire 
(collges et lyces sngalais, niveaux 6me  Terminale).

RPONDRE UNIQUEMENT EN JSON valide. Aucun texte avant ou aprs le JSON.
Aucune balise markdown, aucun \`\`\`json.

Structure JSON attendue :
{
  "titre": "string",
  "description": "string (2-3 phrases contextuelles)",
  "objectifGeneral": "string (formulation en termes de comptences, verbes d'action)",
  "prerequis": "string (connaissances ncessaires avant cette squence)",
  "competences": ["string", "string", ...],
  "seances": [
    {
      "numero": 1,
      "titre": "string",
      "dureeMinutes": 55,
      "objectifSpecifique": "string (verbe d'action + contenu)",
      "contenu": "string (droulement dtaill de la sance)",
      "ressources": ["string", ...],
      "typeActivite": "cours|td|tp|evaluation|revision|projet|correction",
      "estEvaluation": false,
      "typeEvaluation": null,
      "noteMax": null,
      "coefficient": null
    }
  ]
}

Rgles :
- Respecte les programmes officiels sngalais
- Les trimestres au Sngal : 1er (Oct-Dc), 2me (Jan-Mars), 3me (Avr-Juin)
- Inclure des sances de rvision avant les valuations
- Pour les valuations (estEvaluation=true), prciser typeEvaluation
- Les contenus doivent tre adapts aux ralits sngalaises (exemples locaux)
- Note maximale habituelle : 20 (systme franais)
- Niveaux  fort enjeu : 3me (BFEM), Terminale (BAC)
- Langue : franais`}async function fZ(e){const t=`
Gnre une squence pdagogique complte pour :
- Matire : ${e.matiere}
- Niveau : ${e.niveau}
- Thme/Chapitre : ${e.theme}
- Nombre de sances : ${e.nombreSeances}
- Dure par sance : ${e.dureeSeanceMinutes} minutes
${e.trimestre?`- Trimestre : ${e.trimestre}me trimestre`:""}
${e.instructionsSupplementaires?`- Instructions supplmentaires : ${e.instructionsSupplementaires}`:""}

Distribue intelligemment les sances : cours  TD/TP  rvision  valuation.
Assure-toi que les objectifs spcifiques sont progressifs et mesurables.
  `.trim();let n;try{n=await fetch(`${iZ}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({systemPrompt:dZ(),userPrompt:t,maxTokens:4e3})})}catch{throw new Error("Impossible de contacter le serveur IA. Vrifiez votre connexion Internet.")}if(!n.ok){const d=await n.text().catch(()=>"Erreur inconnue");throw new Error(`Erreur serveur IA (${n.status}) : ${d}`)}const a=await n.json(),l=a.content??a.result??a.text??"";if(!l)throw new Error("Rponse IA vide  le serveur a renvoy un contenu vide.");const o=l.replace(/^```json\s*/i,"").replace(/^```\s*/,"").replace(/```\s*$/,"").trim();let u;try{u=JSON.parse(o)}catch{throw new Error(`Rponse IA non parsable : ${o.substring(0,200)}...`)}return uZ(u)}function UP(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function mZ(e){return{id:UP(),numero:e,titre:"",dureeMinutes:55,objectifSpecifique:"",contenu:"",ressources:[],typeActivite:"cours",estEvaluation:!1,exporterVersCahier:!0,entreesCahierIds:[]}}const pZ=({seance:e,onChange:t,onDelete:n,onMoveUp:a,onMoveDown:l,isFirst:o,isLast:u})=>{const[d,m]=g.useState(e.titre===""),[p,h]=g.useState(""),v=_=>t({...e,..._}),y=()=>{const _=p.trim();_&&(v({ressources:[...e.ressources,_]}),h(""))},x=_=>v({ressources:e.ressources.filter((j,S)=>S!==_)});return r.jsxs("div",{className:"seance-card",children:[r.jsxs("div",{className:"seance-card__header",onClick:()=>m(_=>!_),children:[r.jsx("div",{className:`seance-card__numero${e.estEvaluation?" seance-card__numero--eval":""}`,children:e.numero}),r.jsx("span",{className:"seance-card__header-title",children:e.titre||`Sance ${e.numero} (sans titre)`}),r.jsxs("div",{className:"seance-card__header-badges",children:[r.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:lm[e.typeActivite]}),r.jsxs("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:[e.dureeMinutes,"min"]})]}),r.jsx("span",{className:`seance-card__toggle-icon${d?" seance-card__toggle-icon--open":""}`,children:""})]}),d&&r.jsxs("div",{className:"seance-card__body",children:[r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsxs("label",{children:["Titre de la sance ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Introduction aux vecteurs",value:e.titre,onChange:_=>v({titre:_.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type d'activit"}),r.jsx("select",{className:"form-control",value:e.typeActivite,onChange:_=>v({typeActivite:_.target.value,estEvaluation:_.target.value==="evaluation"?!0:e.estEvaluation}),children:Object.entries(lm).map(([_,j])=>r.jsx("option",{value:_,children:j},_))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure (minutes)"}),r.jsxs("select",{className:"form-control",value:e.dureeMinutes,onChange:_=>v({dureeMinutes:Number(_.target.value)}),children:[om.map(_=>r.jsxs("option",{value:_,children:[_," min"]},_)),r.jsx("option",{value:e.dureeMinutes,children:om.includes(e.dureeMinutes)?null:`${e.dureeMinutes} min (personnalis)`})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Objectif spcifique"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Ex : L'lve sera capable de calculer le module d'un vecteur",value:e.objectifSpecifique,onChange:_=>v({objectifSpecifique:_.target.value}),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Contenu / Droulement"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Dcrivez le droulement de la sance : activits, tapes, mthodes...",value:e.contenu,onChange:_=>v({contenu:_.target.value}),rows:4})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Supports / Ressources"}),e.ressources.length>0&&r.jsx("div",{className:"timeline-card__ressources",style:{marginBottom:6},children:e.ressources.map((_,j)=>r.jsxs("span",{className:"ressource-chip",style:{cursor:"pointer"},onClick:()=>x(j),title:"Cliquer pour supprimer",children:[_," "]},j))}),r.jsxs("div",{className:"competence-input-row",children:[r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Manuel p.42, GeoGebra, Calculatrice...",value:p,onChange:_=>h(_.target.value),onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),y())}),r.jsx("button",{type:"button",className:"btn-add-competence",onClick:y,children:"+ Ajouter"})]})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[r.jsx("input",{type:"checkbox",checked:e.estEvaluation,onChange:_=>v({estEvaluation:_.target.checked,typeEvaluation:_.target.checked?e.typeEvaluation??"formative":void 0}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Cette sance est une valuation"]})}),e.estEvaluation&&r.jsxs("div",{className:"editor-form-grid",style:{background:"#fef2f2",padding:12,borderRadius:8,border:"1px solid #fecaca"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type d'valuation"}),r.jsx("select",{className:"form-control",value:e.typeEvaluation??"formative",onChange:_=>v({typeEvaluation:_.target.value}),children:Object.entries(mj).map(([_,j])=>r.jsx("option",{value:_,children:j},_))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Note maximale"}),r.jsx("input",{type:"number",className:"form-control",min:1,max:100,value:e.noteMax??20,onChange:_=>v({noteMax:Number(_.target.value)})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Coefficient"}),r.jsx("input",{type:"number",className:"form-control",min:1,max:10,step:.5,value:e.coefficient??1,onChange:_=>v({coefficient:Number(_.target.value)})})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[r.jsx("input",{type:"checkbox",checked:e.exporterVersCahier,onChange:_=>v({exporterVersCahier:_.target.checked}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Inclure dans l'export vers le Cahier de Textes"]}),e.entreesCahierIds&&e.entreesCahierIds.length>0&&r.jsxs("span",{className:"export-seance-row__exported",style:{marginTop:4},children:[" Dj exporte (",e.entreesCahierIds.length," entre",e.entreesCahierIds.length>1?"s":"",")"]})]}),r.jsxs("div",{className:"seance-card__actions",children:[r.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:a,disabled:o,title:"Monter",children:""}),r.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:l,disabled:u,title:"Descendre",children:""}),r.jsx("button",{type:"button",className:"btn-seance-action btn-seance-action--delete",onClick:n,children:" Supprimer cette sance"})]})]})]})},hZ=({onSequenceGeneree:e,defaultMatiere:t,defaultNiveau:n,matieres:a})=>{const[l,o]=g.useState(t??""),[u,d]=g.useState(n??""),[m,p]=g.useState(""),[h,v]=g.useState(8),[y,x]=g.useState(55),[_,j]=g.useState(1),[S,w]=g.useState(""),[A,C]=g.useState(!1),[E,O]=g.useState({type:"idle",message:""}),D=async()=>{if(!l||!u||!m){O({type:"error",message:"Veuillez remplir la matire, le niveau et le thme."});return}C(!0),O({type:"loading",message:"L'IA gnre votre squence... (30-45 secondes)"});try{const T=await fZ({matiere:l,niveau:u,theme:m,nombreSeances:h,dureeSeanceMinutes:y,trimestre:_,instructionsSupplementaires:S||void 0}),k=T.seances.map(R=>({...R,ressources:R.ressources??[]}));e({titre:T.titre,description:T.description,objectifGeneral:T.objectifGeneral,prerequis:T.prerequis,competences:T.competences,seances:k}),O({type:"success",message:` Squence gnre avec ${k.length} sances ! Vrifiez et compltez les informations.`})}catch(T){const k=T instanceof Error?T.message:"Erreur inconnue";O({type:"error",message:`Erreur IA : ${k}`})}finally{C(!1)}};return r.jsxs("div",{className:"ia-panel",children:[r.jsx("h3",{className:"ia-panel__title",children:" Gnration assiste par IA"}),r.jsx("p",{className:"ia-panel__subtitle",children:"Dcrivez votre squence et Claude gnre la structure complte"}),r.jsxs("div",{className:"ia-panel__form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Matire ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l,onChange:T=>o(T.target.value),children:[r.jsx("option",{value:"",children:"Slectionner..."}),a.length>0?a.map(T=>r.jsx("option",{value:T,children:T},T)):BP.map(T=>r.jsx("option",{value:T,children:T},T))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Niveau ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:u,onChange:T=>d(T.target.value),children:[r.jsx("option",{value:"",children:"Slectionner..."}),fu.map(T=>r.jsx("option",{value:T.valeur,children:T.label},T.valeur))]})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[r.jsxs("label",{children:["Thme / Chapitre ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines, La photosynthse, La Rvolution franaise...",value:m,onChange:T=>p(T.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Nombre de sances"}),r.jsx("input",{type:"number",className:"form-control",min:2,max:25,value:h,onChange:T=>v(Number(T.target.value))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure par sance"}),r.jsx("select",{className:"form-control",value:y,onChange:T=>x(Number(T.target.value)),children:om.map(T=>r.jsxs("option",{value:T,children:[T," min"]},T))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Trimestre"}),r.jsxs("select",{className:"form-control",value:_,onChange:T=>j(Number(T.target.value)),children:[r.jsx("option",{value:1,children:"1er trimestre (OctDc)"}),r.jsx("option",{value:2,children:"2me trimestre (JanMars)"}),r.jsx("option",{value:3,children:"3me trimestre (AvrJuin)"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Instructions supplmentaires (optionnel)"}),r.jsx("textarea",{className:"ia-panel__instructions",placeholder:"Ex : Insister sur la rsolution graphique, Inclure un TP sur GeoGebra, Prvoir une sance de remdiation...",value:S,onChange:T=>w(T.target.value),rows:2})]}),r.jsxs("button",{type:"button",className:"ia-panel__btn-generate",onClick:D,disabled:A,children:[A?r.jsx("span",{className:"spinner"}):"",A?"Gnration en cours...":"Gnrer avec l'IA"]}),E.type!=="idle"&&r.jsxs("div",{className:`ia-panel__status ia-panel__status--${E.type}`,children:[E.type==="loading"&&r.jsx("span",{className:"spinner spinner--blue"}),E.message]})]})},LA=()=>{const e=ot(),{id:t}=Hn(),{currentUser:n}=it(),a=!!t,[l,o]=g.useState({titre:"",description:"",niveau:"",matiere:"",theme:"",competences:[],objectifGeneral:"",prerequis:"",nombreSeances:6,dureeSeanceMinutes:55,seances:[],evaluationsPrevues:[],statut:"brouillon",genereeParIA:!1,trimestre:void 0,groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0}),[u,d]=g.useState([]),[m,p]=g.useState([]),[h,v]=g.useState([]),[y,x]=g.useState([]),[_,j]=g.useState(a),[S,w]=g.useState(!1),[A,C]=g.useState(null),[E,O]=g.useState(null),[D,T]=g.useState(""),[k,R]=g.useState(!a);g.useEffect(()=>{(async()=>{if(!n?.uid)return;const[I,pe,re]=await Promise.all([DP(n.uid).catch(()=>[]),kP(n.uid).catch(()=>[]),Xa.getAll().catch(()=>[])]);p(I),v(pe);const de=[...new Set(re.map(ge=>ge.nom))].sort();if(x(de),a&&t){j(!0);try{const ge=await Qc(t);if(!ge){C("Squence introuvable.");return}if(ge.profId!==n.uid){C("Accs non autoris.");return}o({titre:ge.titre,description:ge.description,niveau:ge.niveau,matiere:ge.matiere,theme:ge.theme,competences:ge.competences,objectifGeneral:ge.objectifGeneral,prerequis:ge.prerequis,nombreSeances:ge.nombreSeances,dureeSeanceMinutes:ge.dureeSeanceMinutes,statut:ge.statut,genereeParIA:ge.genereeParIA,trimestre:ge.trimestre,groupeClasseId:ge.groupeClasseId,groupeClasseNom:ge.groupeClasseNom,cahierDeTextesId:ge.cahierDeTextesId,cahierDeTextesNom:ge.cahierDeTextesNom}),d(ge.seances)}catch{C("Erreur de chargement. Ressayez.")}finally{j(!1)}}})()},[n?.uid,t,a]);const L=()=>{d(B=>[...B,mZ(B.length+1)])},Q=(B,I)=>{d(pe=>pe.map((re,de)=>de===B?I:re))},$=B=>{d(I=>I.filter((pe,re)=>re!==B).map((pe,re)=>({...pe,numero:re+1})))},F=B=>{B!==0&&d(I=>{const pe=[...I];return[pe[B-1],pe[B]]=[pe[B],pe[B-1]],pe.map((re,de)=>({...re,numero:de+1}))})},Y=B=>{d(I=>{if(B===I.length-1)return I;const pe=[...I];return[pe[B],pe[B+1]]=[pe[B+1],pe[B]],pe.map((re,de)=>({...re,numero:de+1}))})},M=()=>{const B=D.trim();B&&(o(I=>({...I,competences:[...I.competences??[],B]})),T(""))},q=B=>{o(I=>({...I,competences:(I.competences??[]).filter((pe,re)=>re!==B)}))},Z=B=>{o(pe=>({...pe,titre:B.titre,description:B.description,objectifGeneral:B.objectifGeneral,prerequis:B.prerequis,competences:B.competences,genereeParIA:!0}));const I=B.seances.map(pe=>({...pe,id:UP(),exporterVersCahier:!0,entreesCahierIds:[]}));d(I),R(!1),window.scrollTo({top:0,behavior:"smooth"})},H=async()=>{if(!n?.uid)return;if(!l.titre?.trim()){C("Le titre est obligatoire.");return}if(!l.matiere?.trim()){C("La matire est obligatoire.");return}if(!l.niveau?.trim()){C("Le niveau est obligatoire.");return}const B=u.find(de=>!de.titre.trim());if(B){C(`La sance n${B.numero} n'a pas de titre.`);return}w(!0),C(null);const I=h.find(de=>de.id===l.groupeClasseId),pe=m.find(de=>de.id===l.cahierDeTextesId),re={titre:l.titre.trim(),description:l.description?.trim()??"",niveau:l.niveau,matiere:l.matiere.trim(),theme:l.theme?.trim()??"",competences:l.competences??[],objectifGeneral:l.objectifGeneral?.trim()??"",prerequis:l.prerequis?.trim()??"",nombreSeances:u.length,dureeSeanceMinutes:l.dureeSeanceMinutes??55,statut:l.statut??"brouillon",genereeParIA:l.genereeParIA??!1,trimestre:l.trimestre??null,seances:u,evaluationsPrevues:[],groupeClasseId:l.groupeClasseId||null,groupeClasseNom:I?.nom||l.groupeClasseNom||null,cahierDeTextesId:l.cahierDeTextesId||null,cahierDeTextesNom:pe?.titre||l.cahierDeTextesNom||null};try{if(a&&t)await WW(t,re),O("Squence mise  jour avec succs !"),setTimeout(()=>e(`/prof/sequences/${t}`),1200);else{const de=await XW(n.uid,re);O("Squence cre avec succs !"),setTimeout(()=>e(`/prof/sequences/${de}`),1200)}}catch(de){console.error("[SequenceEditorPage] Sauvegarde:",de),C("Erreur lors de la sauvegarde. Ressayez.")}finally{w(!1)}};return _?r.jsxs("div",{className:"sequence-editor",children:[r.jsx("div",{className:"skeleton",style:{height:30,width:"50%",marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:200,borderRadius:12}})]}):r.jsxs("div",{className:"sequence-editor",children:[r.jsxs("div",{className:"sequence-editor__header",children:[r.jsxs("p",{className:"sequence-editor__breadcrumb",children:[r.jsx("a",{onClick:()=>e("/prof/sequences"),style:{cursor:"pointer"},children:" Squences"})," / ",a?"Modifier":"Nouvelle squence"]}),r.jsx("h1",{className:"sequence-editor__title",children:a?" Modifier la squence":" Nouvelle squence"})]}),A&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",A]}),E&&r.jsxs("div",{className:"success-banner",role:"status",children:[" ",E]}),r.jsx("div",{style:{marginBottom:8},children:r.jsx("button",{type:"button",className:"btn-secondary",style:{marginBottom:12},onClick:()=>R(B=>!B),children:k?" Masquer":" Gnrer avec l'IA"})}),k&&r.jsx(hZ,{onSequenceGeneree:Z,defaultMatiere:l.matiere,defaultNiveau:l.niveau,matieres:y}),r.jsxs("section",{className:"editor-section",children:[r.jsx("h2",{className:"editor-section__title",children:" Informations gnrales"}),r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsxs("label",{children:["Titre de la squence ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines  Terminale S",value:l.titre??"",onChange:B=>o(I=>({...I,titre:B.target.value})),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Matire ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l.matiere??"",onChange:B=>o(I=>({...I,matiere:B.target.value})),children:[r.jsx("option",{value:"",children:"Slectionner..."}),y.length>0?y.map(B=>r.jsx("option",{value:B,children:B},B)):BP.map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Niveau ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l.niveau??"",onChange:B=>o(I=>({...I,niveau:B.target.value})),children:[r.jsx("option",{value:"",children:"Slectionner..."}),fu.map(B=>r.jsx("option",{value:B.valeur,children:B.label},B.valeur))]})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Thme / Chapitre du programme"}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Chapitre 4  Les vecteurs du plan",value:l.theme??"",onChange:B=>o(I=>({...I,theme:B.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Trimestre"}),r.jsxs("select",{className:"form-control",value:l.trimestre??"",onChange:B=>o(I=>({...I,trimestre:B.target.value?Number(B.target.value):void 0})),children:[r.jsx("option",{value:"",children:"Non prcis"}),r.jsx("option",{value:"1",children:"1er trimestre (OctDc)"}),r.jsx("option",{value:"2",children:"2me trimestre (JanMars)"}),r.jsx("option",{value:"3",children:"3me trimestre (AvrJuin)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure standard d'une sance"}),r.jsx("select",{className:"form-control",value:l.dureeSeanceMinutes??55,onChange:B=>o(I=>({...I,dureeSeanceMinutes:Number(B.target.value)})),children:om.map(B=>r.jsxs("option",{value:B,children:[B," minutes"]},B))})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Description / Contexte"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Contexte de la squence dans le programme, niveau de la classe, prrequis globaux...",value:l.description??"",onChange:B=>o(I=>({...I,description:B.target.value})),rows:3})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Objectif gnral"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:" la fin de cette squence, les lves seront capables de...",value:l.objectifGeneral??"",onChange:B=>o(I=>({...I,objectifGeneral:B.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Prrequis"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Connaissances ncessaires avant cette squence...",value:l.prerequis??"",onChange:B=>o(I=>({...I,prerequis:B.target.value})),rows:2})]})]}),r.jsxs("div",{className:"form-group",style:{marginTop:14},children:[r.jsx("label",{children:"Comptences vises"}),r.jsx("div",{className:"competences-list",children:(l.competences??[]).map((B,I)=>r.jsxs("span",{className:"competence-tag",children:[B,r.jsx("button",{type:"button",className:"competence-tag__remove",onClick:()=>q(I),"aria-label":"Supprimer la comptence",children:""})]},I))}),r.jsxs("div",{className:"competence-input-row",children:[r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Rsoudre une quation du second degr",value:D,onChange:B=>T(B.target.value),onKeyDown:B=>B.key==="Enter"&&(B.preventDefault(),M())}),r.jsx("button",{type:"button",className:"btn-add-competence",onClick:M,children:"+ Ajouter"})]})]})]}),r.jsxs("section",{className:"editor-section",children:[r.jsx("h2",{className:"editor-section__title",children:" Liens optionnels"}),r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Groupe-classe"}),r.jsxs("select",{className:"form-control",value:l.groupeClasseId??"",onChange:B=>o(I=>({...I,groupeClasseId:B.target.value||void 0})),children:[r.jsx("option",{value:"",children:"Aucun groupe"}),h.map(B=>r.jsxs("option",{value:B.id,children:[B.nom,"  ",B.classe]},B.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Cahier de Textes"}),r.jsxs("select",{className:"form-control",value:l.cahierDeTextesId??"",onChange:B=>o(I=>({...I,cahierDeTextesId:B.target.value||void 0})),children:[r.jsx("option",{value:"",children:" Aucun cahier "}),m.filter(B=>l.matiere&&l.niveau?B.matiere===l.matiere&&B.classe===l.niveau:l.matiere?B.matiere===l.matiere:l.niveau?B.classe===l.niveau:!0).map(B=>r.jsxs("option",{value:B.id,children:[B.titre,"  ",B.classe,"  ",B.anneeScolaire]},B.id))]}),l.niveau&&l.matiere&&m.filter(B=>B.classe===l.niveau&&B.matiere===l.matiere).length===0&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#f59e0b",marginTop:6},children:[" Aucun cahier pour ",l.matiere,"  ",l.niveau,"."," ",r.jsx("a",{href:"/prof/cahiers",style:{color:"#2563eb",textDecoration:"underline"},children:"Crer un cahier"})]}),(!l.niveau||!l.matiere)&&m.length>0&&r.jsx("p",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:6},children:" Slectionnez la matire et le niveau pour filtrer les cahiers."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Statut"}),r.jsxs("select",{className:"form-control",value:l.statut??"brouillon",onChange:B=>o(I=>({...I,statut:B.target.value})),children:[r.jsx("option",{value:"brouillon",children:"Brouillon"}),r.jsx("option",{value:"active",children:"En cours"}),r.jsx("option",{value:"terminee",children:"Termine"}),r.jsx("option",{value:"archivee",children:"Archive"})]})]})]})]}),r.jsxs("section",{className:"editor-section",children:[r.jsxs("div",{className:"seances-editor__header",children:[r.jsx("h2",{className:"editor-section__title",style:{margin:0},children:" Sances"}),r.jsxs("span",{className:"seances-editor__count",children:[u.length," sance",u.length>1?"s":"",u.filter(B=>B.estEvaluation).length>0&&`  ${u.filter(B=>B.estEvaluation).length} val.`]})]}),r.jsx("div",{className:"seances-list",children:u.length===0?r.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",textAlign:"center",padding:"20px 0"},children:"Aucune sance. Utilisez le bouton ci-dessous ou gnrez avec l'IA."}):u.map((B,I)=>r.jsx(pZ,{seance:B,onChange:pe=>Q(I,pe),onDelete:()=>$(I),onMoveUp:()=>F(I),onMoveDown:()=>Y(I),isFirst:I===0,isLast:I===u.length-1},B.id))}),r.jsx("button",{type:"button",className:"btn-add-seance",style:{marginTop:14},onClick:L,children:"+ Ajouter une sance"})]}),r.jsxs("div",{style:{position:"sticky",bottom:16,display:"flex",justifyContent:"flex-end",gap:10,background:"rgba(248,250,252,0.95)",backdropFilter:"blur(6px)",padding:"12px 0",zIndex:10},children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>e("/prof/sequences"),disabled:S,children:"Annuler"}),r.jsx("button",{type:"button",className:"btn-primary",onClick:H,disabled:S,children:S?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Enregistrement..."]}):a?" Mettre  jour":" Crer la squence"})]})]})},vZ=({statut:e})=>{const{label:t}=dp[e];return r.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[r.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),t]})},gZ=({sequence:e,cahiers:t,profId:n,onClose:a,onSuccess:l})=>{const[o,u]=g.useState(e.cahierDeTextesId??(t.length===1?t[0].id:"")),[d,m]=g.useState(()=>{const w=new Date().toISOString().split("T")[0],A={};return e.seances.forEach(C=>{A[C.id]=w}),A}),[p,h]=g.useState(()=>{const w={};return e.seances.forEach(A=>{w[A.id]=A.exporterVersCahier&&(!A.entreesCahierIds||A.entreesCahierIds.length===0)}),w}),[v,y]=g.useState(!1),[x,_]=g.useState(null),j=Object.values(p).filter(Boolean).length,S=async()=>{if(!o){_("Veuillez slectionner un Cahier de Textes.");return}if(j===0){_("Slectionnez au moins une sance  exporter.");return}y(!0),_(null);const w={};e.seances.filter(A=>p[A.id]).forEach(A=>{const C=d[A.id];if(C){const E=Me.fromDate(new Date(C+"T08:00:00"));w[A.id]=E}});try{const A=await eZ({sequenceId:e.id,cahierDeTextesId:o,profId:n,datesParSeance:w});A.erreurs.length>0&&_(`${A.erreurs.length} sance(s) n'ont pas pu tre exportes.`),l(A.nbExportees)}catch(A){const C=A instanceof Error?A.message:"Erreur inconnue";_(`Erreur d'export : ${C}`)}finally{y(!1)}};return g.useEffect(()=>{const w=A=>{A.key==="Escape"&&a()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[a]),r.jsx("div",{className:"export-modal__overlay",onClick:w=>w.target===w.currentTarget&&a(),children:r.jsxs("div",{className:"export-modal",role:"dialog","aria-modal":"true","aria-labelledby":"export-modal-title",children:[r.jsxs("div",{className:"export-modal__header",children:[r.jsx("h2",{className:"export-modal__title",id:"export-modal-title",children:" Exporter vers le Cahier de Textes"}),r.jsx("button",{className:"export-modal__close",onClick:a,"aria-label":"Fermer",children:""})]}),r.jsxs("div",{className:"export-modal__body",children:[r.jsxs("div",{className:"form-group",style:{marginBottom:16},children:[r.jsxs("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:["Cahier de Textes cible ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.length===0?r.jsx("p",{style:{color:"#dc2626",fontSize:"0.875rem"},children:"Aucun Cahier de Textes trouv. Crez-en un d'abord."}):r.jsxs("select",{className:"form-control",value:o,onChange:w=>u(w.target.value),children:[r.jsx("option",{value:"",children:"Slectionner un cahier..."}),t.map(w=>r.jsxs("option",{value:w.id,children:[w.titre,"  ",w.classe," (",w.anneeScolaire,")"]},w.id))]})]}),r.jsx("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:12},children:"Slectionnez les sances  exporter et assignez leur une date. Chaque sance deviendra une entre dans le Cahier de Textes."}),e.seances.map(w=>{const A=(w.entreesCahierIds?.length??0)>0;return r.jsxs("div",{className:"export-seance-row",children:[r.jsx("input",{type:"checkbox",className:"export-seance-row__check",checked:!!p[w.id],onChange:C=>h(E=>({...E,[w.id]:C.target.checked})),id:`export-${w.id}`,"aria-label":`Exporter la sance ${w.numero}`}),r.jsxs("div",{className:"export-seance-row__info",children:[r.jsx("label",{htmlFor:`export-${w.id}`,style:{cursor:"pointer"},children:r.jsxs("div",{className:"export-seance-row__titre",children:[w.numero,". ",w.titre||`Sance ${w.numero}`]})}),r.jsxs("div",{className:"export-seance-row__type",children:[lm[w.typeActivite],"  ",w.dureeMinutes,"min",A&&r.jsx("span",{className:"export-seance-row__exported",style:{marginLeft:6},children:" Dj exporte"})]})]}),r.jsx("input",{type:"date",className:"export-seance-row__date",value:d[w.id]??"",onChange:C=>m(E=>({...E,[w.id]:C.target.value})),disabled:!p[w.id],"aria-label":`Date pour la sance ${w.numero}`})]},w.id)}),x&&r.jsxs("div",{className:"error-banner",style:{marginTop:12},children:[" ",x]})]}),r.jsxs("div",{className:"export-modal__footer",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:a,disabled:v,children:"Annuler"}),r.jsx("button",{type:"button",className:"btn-success",onClick:S,disabled:v||j===0||!o,children:v?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Export en cours..."]}):` Exporter ${j} sance${j>1?"s":""}`})]})]})})},xZ=()=>{const e=ot(),{id:t}=Hn(),{currentUser:n}=it(),[a,l]=g.useState(null),[o,u]=g.useState([]),[d,m]=g.useState(!0),[p,h]=g.useState(null),[v,y]=g.useState(null),[x,_]=g.useState("seances"),[j,S]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!(!n?.uid||!t)){m(!0);try{const[D,T]=await Promise.all([Qc(t),DP(n.uid)]);if(!D){h("Squence introuvable.");return}if(D.profId!==n.uid){h("Accs non autoris.");return}l(D),u(T)}catch{h("Erreur de chargement.")}finally{m(!1)}}})()},[n?.uid,t]);const w=async()=>{if(!(!a||!window.confirm(`Supprimer "${a.titre}" ?
Cette action est irrversible.`)))try{await $P(a.id),e("/prof/sequences")}catch{h("Erreur lors de la suppression.")}},A=async O=>{if(a)try{await ZW(a.id,O),l(D=>D?{...D,statut:O}:null)}catch{h("Erreur de mise  jour du statut.")}},C=O=>{S(!1),y(` ${O} sance${O>1?"s":""} exporte${O>1?"s":""} vers le Cahier de Textes !`),t&&Qc(t).then(D=>D&&l(D)).catch(()=>null),setTimeout(()=>y(null),5e3)};if(d)return r.jsxs("div",{className:"sequence-detail",children:[r.jsx("div",{className:"skeleton",style:{height:28,width:"50%",marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:180,borderRadius:12,marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:400,borderRadius:12}})]});if(p||!a)return r.jsxs("div",{className:"sequence-detail",children:[r.jsxs("div",{className:"error-banner",children:[" ",p??"Squence introuvable."]}),r.jsx("button",{className:"btn-secondary",onClick:()=>e("/prof/sequences"),children:" Retour"})]});const E=fu.find(O=>O.valeur===a.niveau)?.label??a.niveau;return r.jsxs("div",{className:"sequence-detail",children:[j&&r.jsx(gZ,{sequence:a,cahiers:o,profId:n.uid,onClose:()=>S(!1),onSuccess:C}),p&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",p]}),v&&r.jsx("div",{className:"success-banner",role:"status",children:v}),r.jsxs("div",{className:"sequence-detail__header",children:[r.jsxs("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:8},children:[r.jsx("a",{onClick:()=>e("/prof/sequences"),style:{color:"#2563eb",cursor:"pointer",fontWeight:500},children:" Squences"})," / ",a.titre]}),r.jsxs("div",{className:"sequence-detail__header-top",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"sequence-detail__title",children:a.titre}),r.jsxs("div",{className:"sequence-detail__meta",style:{marginTop:8},children:[r.jsx(vZ,{statut:a.statut}),a.genereeParIA&&r.jsx("span",{className:"badge-ia",children:" IA"}),r.jsx("span",{className:"sequence-card__meta-chip",children:a.matiere}),r.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:E}),a.trimestre&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",a.trimestre]}),a.groupeClasseNom&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:[" ",a.groupeClasseNom]})]})]}),r.jsxs("div",{className:"sequence-detail__actions",children:[r.jsx("select",{className:"form-control",style:{width:"auto",fontSize:"0.8rem"},value:a.statut,onChange:O=>A(O.target.value),"aria-label":"Changer le statut",children:Object.entries(dp).map(([O,{label:D}])=>r.jsx("option",{value:O,children:D},O))}),r.jsx("button",{className:"btn-success",onClick:()=>S(!0),title:"Exporter les sances vers le Cahier de Textes",children:" Exporter"}),r.jsx("button",{className:"btn-secondary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Modifier"}),r.jsx("button",{className:"btn-danger",onClick:w,children:""})]})]}),a.objectifGeneral&&r.jsxs("div",{className:"sequence-detail__objectif",children:[r.jsx("strong",{children:" Objectif :"})," ",a.objectifGeneral]}),r.jsxs("div",{style:{display:"flex",gap:16,marginTop:12,flexWrap:"wrap",fontSize:"0.8125rem",color:"#64748b"},children:[r.jsxs("span",{children:[" ",a.seances.length," sances"]}),r.jsxs("span",{children:[" ",a.evaluationsPrevues.length," valuation",a.evaluationsPrevues.length>1?"s":""]}),r.jsxs("span",{children:[" ",a.seances.reduce((O,D)=>O+D.dureeMinutes,0)," min total"]}),a.cahierDeTextesNom&&r.jsxs("span",{children:[" ",a.cahierDeTextesNom]}),a.exporteAt&&r.jsxs("span",{children:[" Export le ",a.exporteAt.toDate().toLocaleDateString("fr-FR")]})]})]}),r.jsxs("div",{className:"sequence-tabs",role:"tablist",children:[r.jsxs("button",{role:"tab",className:`sequence-tab${x==="seances"?" sequence-tab--active":""}`,onClick:()=>_("seances"),"aria-selected":x==="seances",children:[" Sances (",a.seances.length,")"]}),r.jsxs("button",{role:"tab",className:`sequence-tab${x==="evaluations"?" sequence-tab--active":""}`,onClick:()=>_("evaluations"),"aria-selected":x==="evaluations",children:[" valuations (",a.evaluationsPrevues.length,")"]}),r.jsx("button",{role:"tab",className:`sequence-tab${x==="infos"?" sequence-tab--active":""}`,onClick:()=>_("infos"),"aria-selected":x==="infos",children:" Dtails"})]}),x==="seances"&&r.jsx("div",{role:"tabpanel",children:a.seances.length===0?r.jsxs("div",{className:"sequences-empty",children:[r.jsx("span",{className:"sequences-empty__icon",children:""}),r.jsx("p",{className:"sequences-empty__text",children:"Aucune sance planifie"}),r.jsx("button",{className:"btn-primary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Ajouter des sances"})]}):r.jsx("div",{className:"sequence-timeline",children:a.seances.map(O=>r.jsx(yZ,{seance:O},O.id))})}),x==="evaluations"&&r.jsxs("div",{role:"tabpanel",className:"evaluations-panel",children:[r.jsx("h3",{className:"evaluations-panel__title",children:" valuations prvues"}),a.evaluationsPrevues.length===0?r.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:'Aucune valuation marque dans cette squence. Modifiez une sance et cochez "Cette sance est une valuation".'}):a.evaluationsPrevues.map(O=>r.jsxs("div",{className:"evaluation-row",children:[r.jsxs("div",{className:"evaluation-row__numero",children:["S",O.seanceNumero]}),r.jsxs("div",{className:"evaluation-row__info",children:[r.jsx("div",{className:"evaluation-row__titre",children:O.titre}),r.jsxs("div",{className:"evaluation-row__type",children:[mj[O.type],O.datePrevue&&`  ${O.datePrevue.toDate().toLocaleDateString("fr-FR")}`]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"evaluation-row__note",children:["/",O.noteMax]}),r.jsxs("div",{className:"evaluation-row__coeff",children:["Coeff. ",O.coefficient]})]})]},O.id))]}),x==="infos"&&r.jsx("div",{role:"tabpanel",children:r.jsxs("div",{className:"editor-section",children:[a.competences.length>0&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:8},children:"Comptences vises"}),r.jsx("div",{className:"competences-list",children:a.competences.map((O,D)=>r.jsx("span",{className:"competence-tag",children:O},D))})]}),a.prerequis&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Prrequis"}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.prerequis})]}),a.description&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Description"}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.description})]}),r.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:12,fontSize:"0.8rem",color:"#94a3b8"},children:[r.jsxs("p",{children:["Cre le ",a.createdAt.toDate().toLocaleDateString("fr-FR")]}),r.jsxs("p",{children:["Modifie le ",a.updatedAt.toDate().toLocaleDateString("fr-FR")]}),a.genereeParIA&&r.jsx("p",{children:" Gnre avec l'IA Claude"})]})]})})]})},yZ=({seance:e})=>{const[t,n]=g.useState(!1),a=(e.entreesCahierIds?.length??0)>0;return r.jsx("div",{className:`timeline-item${e.estEvaluation?" timeline-item--eval":""}`,children:r.jsxs("div",{className:"timeline-card",children:[r.jsxs("div",{className:"timeline-card__header",onClick:()=>n(l=>!l),style:{cursor:"pointer"},children:[r.jsxs("h3",{className:"timeline-card__title",children:[e.numero,". ",e.titre||`Sance ${e.numero}`]}),r.jsxs("div",{className:"timeline-card__meta",children:[r.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:lm[e.typeActivite]}),r.jsxs("span",{className:"timeline-card__duree",children:[e.dureeMinutes,"min"]}),a&&r.jsx("span",{className:"export-seance-row__exported",children:" Exporte"}),r.jsx("span",{style:{color:"#94a3b8",fontSize:"0.7rem"},children:t?"":""})]})]}),e.objectifSpecifique&&r.jsxs("p",{className:"timeline-card__objectif",children:[" ",e.objectifSpecifique]}),t&&r.jsxs(r.Fragment,{children:[e.contenu&&r.jsx("p",{className:"timeline-card__contenu",style:{marginTop:8},children:e.contenu}),e.ressources.length>0&&r.jsx("div",{className:"timeline-card__ressources",children:e.ressources.map((l,o)=>r.jsx("span",{className:"ressource-chip",children:l},o))}),e.estEvaluation&&e.typeEvaluation&&r.jsxs("div",{style:{marginTop:10,padding:"8px 12px",background:"#fef2f2",borderRadius:6,fontSize:"0.8rem",color:"#dc2626"},children:[" ",mj[e.typeEvaluation],e.noteMax&&`  /${e.noteMax}`,e.coefficient&&`  Coeff. ${e.coefficient}`]})]})]})})},bZ=50*1024*1024,jZ="image/jpeg,image/png,image/gif,image/webp,audio/mpeg,audio/wav,audio/ogg,video/mp4";function NZ(e){return e.startsWith("image/")?"image":e.startsWith("audio/")?"audio":e.startsWith("video/")?"video":"autre"}function FP(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/1024/1024).toFixed(1)} Mo`}const _Z=({src:e,alt:t,onFermer:n})=>r.jsx("div",{className:"image-fullscreen-overlay",onClick:n,role:"dialog","aria-modal":"true","aria-label":"Image en plein cran",children:r.jsx("img",{src:e,alt:t})}),SZ=({pj:e,onSupprimer:t,readonly:n=!1})=>{const[a,l]=g.useState(!1);return r.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",marginBottom:10,background:"#fff"},children:[e.type==="image"&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:e.url,alt:e.nom,className:"media-image",onClick:()=>l(!0),style:{maxWidth:"100%",display:"block"},loading:"lazy"}),a&&r.jsx(_Z,{src:e.url,alt:e.nom,onFermer:()=>l(!1)})]}),e.type==="audio"&&r.jsx("div",{className:"media-player",children:r.jsxs("audio",{controls:!0,preload:"metadata",children:[r.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture audio."]})}),e.type==="video"&&r.jsx("div",{className:"media-player",children:r.jsxs("video",{controls:!0,preload:"none",playsInline:!0,children:[r.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture vido."]})}),(e.type==="pdf"||e.type==="autre")&&r.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",textDecoration:"none",color:"#2563eb"},children:[" ",e.nom]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 12px",background:"#f9fafb",borderTop:"1px solid #f3f4f6"},children:[r.jsxs("span",{style:{fontSize:"0.78rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.nom,e.taille&&`  ${FP(e.taille)}`]}),!n&&t&&r.jsx("button",{type:"button",onClick:()=>t(e.id),title:"Supprimer ce fichier",style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"1rem",padding:"0 4px"},"aria-label":`Supprimer ${e.nom}`,children:""})]})]})},wZ=({piecesJointes:e,entreeId:t,profId:n,onChange:a,readonly:l=!1})=>{const o=g.useRef(null),[u,d]=g.useState(null),[m,p]=g.useState("");async function h(y){const x=y.target.files?.[0];if(!x)return;if(x.size>bZ){p(`Fichier trop volumineux (max 50 Mo). Ce fichier fait ${FP(x.size)}.`);return}p("");const _=`${Date.now()}_${x.name}`,j=`cahiers/${n}/${t}/${_}`,S=Vr(Yr,j),w=VA(S,x);w.on("state_changed",A=>{const C=Math.round(A.bytesTransferred/A.totalBytes*100);d(C)},A=>{p(`Erreur d'envoi : ${A.message}`),d(null)},async()=>{const A=await Ra(w.snapshot.ref),C=NZ(x.type),E={id:String(Date.now()),nom:x.name,url:A,type:C,taille:x.size,mimeType:x.type};a([...e,E]),d(null),o.current&&(o.current.value="")})}function v(y){a(e.filter(x=>x.id!==y))}return r.jsxs("section",{"aria-label":"Fichiers mdias",style:{marginTop:20},children:[r.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 12px"},children:" Fichiers mdias"}),e.map(y=>r.jsx(SZ,{pj:y,onSupprimer:v,readonly:l},y.id)),e.length===0&&!l&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun fichier ajout. Formats accepts : images, audio, vido (max 50 Mo)."}),!l&&r.jsxs(r.Fragment,{children:[u!==null&&r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:9999,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${u}%`,background:"#2563eb",transition:"width 0.3s ease"},role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100})}),r.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:"4px 0 0"},children:["Envoi en cours ",u,"%"]})]}),m&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#dc2626",margin:"0 0 8px"},children:[" ",m]}),r.jsx("input",{ref:o,type:"file",accept:jZ,onChange:h,style:{display:"none"},"aria-label":"Choisir un fichier mdia"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o.current?.click(),disabled:u!==null,children:" Ajouter un fichier (image / audio / vido)"}),r.jsx("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:6},children:"Max 50 Mo  JPG, PNG, GIF, WebP, MP3, WAV, OGG, MP4"})]})]})};function CZ(e){return e.toDate().toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}const EZ=()=>{const{cahierId:e}=Hn(),t=ot(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState(!0),[m,p]=g.useState(""),[h,v]=g.useState(null);g.useEffect(()=>{async function x(){if(e){d(!0);try{const _=await xW(e);if(!_){p("Ce cahier n'est pas accessible ou n'existe pas.");return}a(_);const j=await SW(e);o(j)}catch{p("Une erreur est survenue lors du chargement.")}finally{d(!1)}}}x()},[e]);function y(x){v(_=>_===x?null:x)}return u?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"2rem"},children:""}),r.jsx("p",{children:"Chargement du cahier de textes"})]}):m||!n?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[r.jsx("div",{style:{fontSize:"2.5rem"},children:""}),r.jsx("p",{style:{color:"#dc2626",fontWeight:600},children:m||"Accs non autoris"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>t(-1),style:{marginTop:12},children:" Retour"})]}):r.jsxs("main",{style:{maxWidth:760,margin:"0 auto",padding:"20px 16px"},children:[r.jsxs("header",{className:"eleve-cahier-header",children:[r.jsx("button",{type:"button",onClick:()=>t(-1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff",cursor:"pointer",borderRadius:8,padding:"4px 10px",fontSize:"0.85rem",marginBottom:10,display:"inline-flex",alignItems:"center",gap:4},children:" Retour"}),r.jsx("h1",{children:n.titre}),r.jsxs("p",{children:[n.matiere,"  ",n.classe,"  ",n.anneeScolaire]}),r.jsx("span",{className:"badge-lecture-seule",children:" Lecture seule  Sances ralises"})]}),n.description&&r.jsx("div",{style:{background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:10,padding:14,marginBottom:20,fontSize:"0.9rem",color:"#0c4a6e"},children:n.description}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:16},children:l.length===0?"Aucune sance ralise pour l'instant.":`${l.length} sance${l.length>1?"s":""} ralise${l.length>1?"s":""}`}),l.length===0&&r.jsxs("div",{className:"eleve-vide",children:[r.jsx("span",{className:"emoji",children:""}),r.jsx("p",{children:"Votre professeur n'a pas encore enregistr de sance ralise."}),r.jsx("p",{style:{fontSize:"0.8rem"},children:"Revenez plus tard !"})]}),l.map(x=>{const _=h===x.id,j=(x.piecesJointes?.length??0)>0,S=(x.liens?.length??0)>0,w=(x.ebooksLies?.length??0)>0;return r.jsxs("article",{className:"seance-card-eleve",children:[r.jsxs("button",{type:"button",onClick:()=>y(x.id),style:{width:"100%",background:"none",border:"none",cursor:"pointer",textAlign:"left",padding:0},"aria-expanded":_,"aria-controls":`seance-corps-${x.id}`,children:[r.jsxs("div",{className:"seance-card-eleve-date",children:[" ",CZ(x.date),x.heureDebut?`  ${x.heureDebut}${x.heureFin?`  ${x.heureFin}`:""}`:""]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0},children:x.chapitre}),r.jsx("span",{style:{fontSize:"1.1rem",transition:"transform 0.2s",transform:_?"rotate(180deg)":"rotate(0)",display:"inline-block"},"aria-hidden":"true",children:""})]}),r.jsxs("div",{style:{display:"flex",gap:6,marginTop:6,flexWrap:"wrap"},children:[S&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#eff6ff",color:"#2563eb",padding:"2px 8px",borderRadius:9999},children:" Ressources"}),w&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:9999},children:" Ebooks"}),j&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#f0fdf4",color:"#16a34a",padding:"2px 8px",borderRadius:9999},children:" Mdias"})]})]}),_&&r.jsxs("div",{id:`seance-corps-${x.id}`,style:{marginTop:14,borderTop:"1px solid #f3f4f6",paddingTop:14},children:[x.objectifs&&r.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8,padding:10,fontSize:"0.875rem",color:"#166534",marginBottom:12},children:[r.jsx("strong",{children:" Objectifs :"})," ",x.objectifs]}),r.jsx("div",{className:"seance-card-eleve-contenu",children:x.contenu}),S&&r.jsx(RP,{liens:x.liens??[],onChange:()=>{},readonly:!0}),w&&r.jsx(IP,{ebooksLies:x.ebooksLies??[],onChange:()=>{},readonly:!0}),j&&r.jsx(wZ,{piecesJointes:x.piecesJointes??[],entreeId:x.id,profId:"",onChange:()=>{},readonly:!0})]})]},x.id)})]})},AZ=()=>{const{currentUser:e}=it(),t=e?.uid||"",n=e?.displayName||"Parent",[a,l]=g.useState([]),[o,u]=g.useState(null),[d,m]=g.useState(null),[p,h]=g.useState(!0),[v,y]=g.useState(!1),[x,_]=g.useState(null),[j,S]=g.useState(!1),[w,A]=g.useState(""),[C,E]=g.useState(!1),[O,D]=g.useState(null),[T,k]=g.useState(null),[R,L]=g.useState("apercu");g.useEffect(()=>{Q()},[t]),g.useEffect(()=>{o&&$(o)},[o]);const Q=async()=>{try{h(!0),_(null);const M=await mX(t);l(M),M.length===1&&u(M[0].enfantId)}catch(M){_("Erreur lors du chargement des enfants."),console.error(M)}finally{h(!1)}},$=async M=>{try{y(!0),_(null);const q=await hX(t,M);m(q)}catch(q){_(q.message||"Erreur lors du chargement du suivi."),m(null)}finally{y(!1)}},F=async M=>{if(M.preventDefault(),D(null),k(null),!w.trim()){D("Veuillez saisir le code d'invitation.");return}try{E(!0);const q=await fX(t,w);k(`${q.enfantNom} a t ajout avec succs !`),A(""),S(!1),await Q(),u(q.enfantId)}catch(q){D(q.message||"Erreur lors de la liaison.")}finally{E(!1)}},Y=async M=>{if(window.confirm(`tes-vous sr de vouloir retirer ${M.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await pX(M.id,t),o===M.enfantId&&(u(null),m(null)),await Q()}catch(Z){_(Z.message||"Erreur lors de la suppression.")}};return p?r.jsxs("div",{className:"parent-loading",children:[r.jsx("div",{className:"parent-spinner"}),r.jsx("p",{children:"Chargement de votre espace parent..."})]}):r.jsxs("div",{className:"parent-dashboard",children:[r.jsxs("header",{className:"parent-header",children:[r.jsxs("div",{className:"parent-header-info",children:[r.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),r.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",r.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{S(!j),D(null),k(null)},children:" Ajouter un enfant"})]}),x&&r.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[r.jsxs("span",{children:[" ",x]}),r.jsx("button",{onClick:()=>_(null),children:""})]}),T&&r.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[r.jsxs("span",{children:[" ",T]}),r.jsx("button",{onClick:()=>k(null),children:""})]}),j&&r.jsxs("div",{className:"parent-form-liaison",children:[r.jsx("h3",{children:" Lier un enfant  votre compte"}),r.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),r.jsxs("form",{onSubmit:F,className:"parent-form",children:[r.jsxs("div",{className:"parent-form-group",children:[r.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),r.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:w,onChange:M=>A(M.target.value.toUpperCase()),maxLength:14,disabled:C,className:"parent-input"})]}),O&&r.jsxs("p",{className:"parent-form-erreur",children:[" ",O]}),r.jsxs("div",{className:"parent-form-actions",children:[r.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:C,children:C?"Vrification...":" Valider"}),r.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>S(!1),children:"Annuler"})]})]})]}),a.length===0?r.jsxs("div",{className:"parent-empty-state",children:[r.jsx("div",{className:"parent-empty-icon",children:""}),r.jsx("h2",{children:"Aucun enfant li"}),r.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>S(!0),children:" Ajouter mon premier enfant"})]}):r.jsxs("div",{className:"parent-content",children:[r.jsxs("aside",{className:"parent-sidebar",children:[r.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),r.jsx("ul",{className:"parent-enfants-liste",children:a.map(M=>r.jsxs("li",{className:`parent-enfant-card ${o===M.enfantId?"parent-enfant-actif":""}`,onClick:()=>u(M.enfantId),children:[r.jsx("div",{className:"parent-enfant-avatar",children:M.enfantNom.charAt(0).toUpperCase()}),r.jsxs("div",{className:"parent-enfant-info",children:[r.jsx("span",{className:"parent-enfant-nom",children:M.enfantNom}),M.enfantClasse&&r.jsx("span",{className:"parent-enfant-classe",children:M.enfantClasse})]}),r.jsx("button",{className:"parent-enfant-supprimer",onClick:q=>{q.stopPropagation(),Y(M)},title:"Retirer cet enfant",children:""})]},M.id))})]}),r.jsx("main",{className:"parent-main",children:o?v?r.jsxs("div",{className:"parent-loading",children:[r.jsx("div",{className:"parent-spinner"}),r.jsx("p",{children:"Chargement du suivi..."})]}):d?r.jsxs("div",{className:"parent-dashboard-detail",children:[r.jsxs("div",{className:"parent-enfant-header",children:[r.jsxs("div",{className:"parent-enfant-header-info",children:[r.jsx("h2",{children:d.enfant.nom}),d.enfant.classe&&r.jsx("span",{className:"parent-badge",children:d.enfant.classe}),d.enfant.derniereConnexion&&r.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",gx(d.enfant.derniereConnexion)]})]}),r.jsx("p",{className:"parent-message-motivation",children:jX(d.scoreGlobal)})]}),r.jsxs("div",{className:"parent-indicateurs",children:[r.jsxs("div",{className:"parent-card parent-card-score",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Score Global"}),r.jsxs("span",{className:`parent-card-value parent-score-${d.scoreGlobal>=60?"bon":d.scoreGlobal>=40?"moyen":"bas"}`,children:[d.scoreGlobal,"/100"]})]})]}),r.jsxs("div",{className:"parent-card parent-card-streak",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Streak"}),r.jsxs("span",{className:"parent-card-value",children:[d.streak.actuel," jour",d.streak.actuel>1?"s":""]})]})]}),r.jsxs("div",{className:"parent-card parent-card-lacunes",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Lacunes"}),r.jsxs("span",{className:"parent-card-value",children:[d.lacunes.length," matire",d.lacunes.length>1?"s":""]})]})]}),r.jsxs("div",{className:"parent-card parent-card-objectifs",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Objectifs"}),r.jsxs("span",{className:"parent-card-value",children:[d.objectifs.filter(M=>M.statut==="atteint").length,"/",d.objectifs.length]})]})]})]}),r.jsxs("div",{className:"parent-section parent-section-semaine",children:[r.jsx("h3",{children:" Activit de la semaine"}),r.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((M,q)=>r.jsxs("div",{className:`parent-jour ${d.streak.semaineCourante[q]?"parent-jour-actif":"parent-jour-inactif"}`,children:[r.jsx("span",{className:"parent-jour-label",children:M}),r.jsx("span",{className:"parent-jour-icon",children:d.streak.semaineCourante[q]?"":""})]},M))})]}),r.jsxs("div",{className:"parent-onglets",children:[r.jsx("button",{className:`parent-onglet ${R==="apercu"?"parent-onglet-actif":""}`,onClick:()=>L("apercu"),children:" Aperu"}),r.jsxs("button",{className:`parent-onglet ${R==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>L("lacunes"),children:[" Lacunes (",d.lacunes.length,")"]}),r.jsxs("button",{className:`parent-onglet ${R==="alertes"?"parent-onglet-actif":""}`,onClick:()=>L("alertes"),children:[" Alertes (",d.alertes.length,")"]}),r.jsx("button",{className:`parent-onglet ${R==="resume"?"parent-onglet-actif":""}`,onClick:()=>L("resume"),children:" Rsum"})]}),r.jsxs("div",{className:"parent-onglet-contenu",children:[R==="apercu"&&r.jsxs("div",{className:"parent-tab-apercu",children:[r.jsxs("div",{className:"parent-section",children:[r.jsx("h3",{children:" Derniers quiz passs"}),d.derniersQuiz.length===0?r.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):r.jsx("div",{className:"parent-quiz-liste",children:d.derniersQuiz.map((M,q)=>r.jsxs("div",{className:`parent-quiz-item ${M.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[r.jsxs("div",{className:"parent-quiz-info",children:[r.jsx("span",{className:"parent-quiz-discipline",children:M.disciplineNom}),r.jsx("span",{className:"parent-quiz-titre",children:M.quizTitre})]}),r.jsxs("div",{className:"parent-quiz-score",children:[r.jsxs("span",{className:`parent-quiz-note ${M.reussi?"note-ok":"note-ko"}`,children:[M.noteSur20,"/20"]}),r.jsx("span",{className:"parent-quiz-statut",children:M.reussi?" Russi":" chou"})]}),r.jsx("span",{className:"parent-quiz-date",children:gx(M.datePassage)})]},q))})]}),r.jsxs("div",{className:"parent-section",children:[r.jsx("h3",{children:" Objectifs de la semaine"}),d.objectifs.length===0?r.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):r.jsx("div",{className:"parent-objectifs-liste",children:d.objectifs.map((M,q)=>r.jsxs("div",{className:"parent-objectif-item",children:[r.jsxs("div",{className:"parent-objectif-header",children:[r.jsx("span",{className:"parent-objectif-titre",children:M.titre}),r.jsx("span",{className:`parent-objectif-statut parent-statut-${M.statut}`,children:M.statut==="atteint"?" Atteint":M.statut==="en_cours"?" En cours":M.statut==="echoue"?" chou":" Non commenc"})]}),r.jsx("div",{className:"parent-progress-bar",children:r.jsx("div",{className:`parent-progress-fill parent-progress-${M.statut}`,style:{width:`${Math.min(M.progression/M.cible*100,100)}%`}})}),r.jsxs("span",{className:"parent-objectif-detail",children:[M.progression,"/",M.cible]})]},q))})]})]}),R==="lacunes"&&r.jsx("div",{className:"parent-tab-lacunes",children:d.lacunes.length===0?r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):r.jsx("div",{className:"parent-lacunes-liste",children:d.lacunes.map((M,q)=>r.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:im(M.niveauUrgence)},children:[r.jsxs("div",{className:"parent-lacune-header",children:[r.jsx("span",{className:"parent-lacune-discipline",children:M.disciplineNom}),r.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:im(M.niveauUrgence),color:"#fff"},children:jP(M.niveauUrgence)})]}),r.jsxs("div",{className:"parent-lacune-details",children:[r.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",r.jsxs("strong",{children:[M.moyenne,"/20"]})]}),r.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",NP(M.tendance)," ",M.tendance==="hausse"?"En hausse":M.tendance==="baisse"?"En baisse":"Stable"]})]}),r.jsx("p",{className:"parent-lacune-conseil",children:M.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":M.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},q))})}),R==="alertes"&&r.jsx("div",{className:"parent-tab-alertes",children:d.alertes.length===0?r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):r.jsx("div",{className:"parent-alertes-liste",children:d.alertes.map((M,q)=>r.jsxs("div",{className:`parent-alerte-item parent-alerte-${M.niveau}`,children:[r.jsxs("div",{className:"parent-alerte-header",children:[r.jsx("span",{className:"parent-alerte-titre",children:M.titre}),r.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:yX(M.niveau),color:"#fff"},children:bX(M.type)})]}),r.jsx("p",{className:"parent-alerte-message",children:M.message}),r.jsx("span",{className:"parent-alerte-date",children:gx(M.dateCreation)})]},q))})}),R==="resume"&&d.resume&&r.jsxs("div",{className:"parent-tab-resume",children:[r.jsxs("div",{className:"parent-resume-header",children:[r.jsxs("h3",{children:[" Rsum : ",d.resume.semaine]}),r.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",d.resume.scoreGlobal,"/100"," ",EA(d.resume.evolutionScore)]})]}),r.jsxs("div",{className:"parent-resume-stats",children:[r.jsxs("div",{className:"parent-resume-stat",children:[r.jsx("span",{className:"parent-resume-stat-value",children:d.resume.nombreQuizSemaine}),r.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.joursActifsSemaine,"/7"]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.tempsEstimeMinutes," min"]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.objectifsAtteints,"/",d.resume.objectifsTotal]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),d.resume.evolutionDisciplines.length>0&&r.jsxs("div",{className:"parent-section",children:[r.jsx("h4",{children:" volution par matire"}),r.jsx("div",{className:"parent-evolution-liste",children:d.resume.evolutionDisciplines.map((M,q)=>r.jsxs("div",{className:"parent-evolution-item",children:[r.jsx("span",{className:"parent-evolution-discipline",children:M.disciplineNom}),r.jsxs("div",{className:"parent-evolution-scores",children:[r.jsxs("span",{className:"parent-evolution-prec",children:[M.moyenneSemainePrecedente,"/20"]}),r.jsx("span",{className:"parent-evolution-fleche",children:EA(M.evolution)}),r.jsxs("span",{className:"parent-evolution-courante",children:[M.moyenneSemaineCourante,"/20"]}),r.jsxs("span",{className:`parent-evolution-ecart ${M.ecart>0?"ecart-positif":M.ecart<0?"ecart-negatif":""}`,children:["(",M.ecart>0?"+":"",M.ecart,")"]})]})]},q))})]}),d.resume.disciplinesEnDifficulte.length>0&&r.jsxs("div",{className:"parent-section parent-section-warning",children:[r.jsx("h4",{children:" Matires ncessitant une attention"}),r.jsx("ul",{className:"parent-disciplines-difficulte",children:d.resume.disciplinesEnDifficulte.map((M,q)=>r.jsx("li",{children:M},q))})]})]}),R==="resume"&&!d.resume&&r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):r.jsxs("div",{className:"parent-erreur-dashboard",children:[r.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&$(o),children:" Ressayer"})]}):r.jsx("div",{className:"parent-select-enfant",children:r.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},zZ="https://api.pedaclic.sn",Bl={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},OZ={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},Kd={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function DZ(e){try{const t=await fetch(`${zZ}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.error||`Erreur serveur (${t.status})`)}const n=await t.json();if(!n.success)throw new Error(n.error||"La gnration a chou.");return n}catch(t){throw console.error("[aiGeneratorService] Erreur gnration:",t),t instanceof TypeError&&t.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):t}}async function MZ(e,t,n,a){try{const l=await Pt(_e(te,"generated_content"),{userId:e,type:t.type,discipline:t.discipline,disciplineId:a,classe:t.classe,chapitre:t.chapitre,content:n,options:t.options||null,createdAt:Me.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",l.id),l.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",l),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function PZ(e,t,n,a){try{const l=n.map((d,m)=>({id:`q_${Date.now()}_${m}`,question:d.question,options:d.options,reponseCorrecte:d.reponseCorrecte,explication:d.explication||"",difficulte:d.difficulte||"moyen",points:d.points||2})),o={disciplineId:a,titre:`Quiz IA  ${t.chapitre}`,description:`Quiz auto-gnr pour ${t.discipline} (${t.classe})  Chapitre : ${t.chapitre}`,questions:l,duree:15,isPremium:!0,noteMinimale:10,auteurId:e,source:"ia_generator",createdAt:Me.now()},u=await Pt(_e(te,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",u.id),u.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",l),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function kZ(e,t=20){try{const n=Te(_e(te,"generated_content"),we("userId","==",e),Ke("createdAt","desc")),a=await De(n),l=[];return a.forEach(o=>{l.length<t&&l.push({id:o.id,...o.data()})}),l}catch(n){throw console.error("[aiGeneratorService] Erreur chargement historique:",n),new Error("Erreur lors du chargement de l'historique.")}}async function TZ(e){try{await Dn(Ne(te,"generated_content",e)),console.log("[aiGeneratorService] Contenu supprim:",e)}catch(t){throw console.error("[aiGeneratorService] Erreur suppression:",t),new Error("Erreur lors de la suppression du contenu.")}}const qZ=["6me","5me","4me","3me","2nde","1re","Terminale"],RZ=[30,45,60,90,120],IZ=()=>{const{currentUser:e}=it(),[t,n]=g.useState(1),[a,l]=g.useState([]),[o,u]=g.useState(null),[d,m]=g.useState(""),[p,h]=g.useState(""),[v,y]=g.useState(""),[x,_]=g.useState(null),[j,S]=g.useState({}),[w,A]=g.useState(!1),[C,E]=g.useState(null),[O,D]=g.useState(null),[T,k]=g.useState(!1),[R,L]=g.useState(!1),[Q,$]=g.useState(null),[F,Y]=g.useState(!1),[M,q]=g.useState([]),[Z,H]=g.useState(!1),[B,I]=g.useState(!0),pe=g.useMemo(()=>{const X=new Map;return a.forEach(je=>{X.has(je.nom)||X.set(je.nom,je)}),Array.from(X.values())},[a]);g.useEffect(()=>{(async()=>{try{I(!0);const je=Te(_e(te,"disciplines"),Ke("nom")),Ue=await De(je),Ge=[];Ue.forEach(Ye=>{const $t=Ye.data();$t.nom&&$t.nom.trim()&&Ge.push({id:Ye.id,nom:$t.nom||"",classe:$t.classe||"",niveau:$t.niveau||""})}),l(Ge)}catch(je){console.error("[AIGenerator] Erreur chargement disciplines:",je),D("Impossible de charger les disciplines.")}finally{I(!1)}})()},[]);const re=X=>{u(X),D(null)},de=()=>{const X=[];if(o||X.push("discipline"),d||X.push("classe"),(!p||p<1)&&X.push("dure de la leon"),X.length>0){D(`Champs requis manquants : ${X.join(", ")}`);return}n(2),D(null)},ge=()=>{if(!v.trim()){D("Veuillez saisir le titre du chapitre.");return}n(3),D(null)},ye=X=>{_(X),n(4),D(null)},V=()=>{t>1&&(n(X=>X-1),D(null),t===5&&(E(null),L(!1),$(null)))},he=()=>{n(1),u(null),m(""),h(""),y(""),_(null),S({}),E(null),D(null),L(!1),$(null)},Pe=async()=>{if(!o||!x||!v.trim()||!d){D("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}A(!0),D(null);try{const X={...j,duree:typeof p=="number"?p:void 0},je={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:Object.keys(X).length>0?X:void 0},Ue=await DZ(je);E(Ue),n(5)}catch(X){const je=X instanceof Error?X.message:"Erreur inconnue";D(je)}finally{A(!1)}},le=async()=>{if(!(!e||!C||!o||!x)){k(!0),D(null);try{let X;const Ue=a.find(Ye=>Ye.nom===o.nom&&Ye.classe===d)?.id||o.id,Ge={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:{...j,duree:typeof p=="number"?p:void 0}};C.type==="quiz"&&C.data.questions?X=await PZ(e.uid,Ge,C.data.questions,Ue):X=await MZ(e.uid,Ge,C.data.content||"",Ue),$(X),L(!0)}catch(X){const je=X instanceof Error?X.message:"Erreur de sauvegarde";D(je)}finally{k(!1)}}},W=async()=>{if(e){H(!0);try{const X=await kZ(e.uid);q(X),Y(!0)}catch(X){console.error("[AIGenerator] Erreur historique:",X)}finally{H(!1)}}},G=async X=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await TZ(X),q(je=>je.filter(Ue=>Ue.id!==X))}catch(je){console.error("[AIGenerator] Erreur suppression:",je)}},ce=g.useCallback(X=>{if(!X)return"";let je=X.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return je=je.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,Ue=>"<ul>"+Ue.replace(/<br \/>/g,"")+"</ul>"),`<p>${je}</p>`},[]);return e?e.isPremium?r.jsxs("div",{className:"ai-generator",children:[r.jsxs("div",{className:"ai-generator__header",children:[r.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),r.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),r.jsxs("div",{className:"ai-generator__header-actions",children:[r.jsx("button",{className:"btn btn--outline btn--sm",onClick:W,disabled:Z,children:Z?" Chargement...":" Historique"}),t>1&&r.jsx("button",{className:"btn btn--outline btn--sm",onClick:he,children:" Recommencer"})]})]}),r.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(X=>r.jsxs("div",{className:`ai-generator__step-indicator ${X===t?"ai-generator__step-indicator--active":""} ${X<t?"ai-generator__step-indicator--done":""}`,children:[r.jsx("span",{className:"ai-generator__step-number",children:X<t?"":X}),r.jsxs("span",{className:"ai-generator__step-label",children:[X===1&&"Paramtres",X===2&&"Chapitre",X===3&&"Type",X===4&&"Options",X===5&&"Rsultat"]})]},X))}),O&&r.jsxs("div",{className:"ai-generator__error",children:[r.jsx("span",{className:"ai-generator__error-icon",children:""}),O,r.jsx("button",{className:"ai-generator__error-close",onClick:()=>D(null),children:""})]}),r.jsxs("div",{className:"ai-generator__content",children:[t===1&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{className:"ai-generator__label",children:["Discipline ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),B?r.jsxs("div",{className:"ai-generator__loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des disciplines..."})]}):pe.length===0?r.jsx("div",{className:"ai-generator__empty",children:r.jsx("p",{children:"Aucune discipline disponible."})}):r.jsx("div",{className:"ai-generator__discipline-grid",children:pe.map(X=>r.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===X.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>re(X),children:r.jsx("span",{className:"ai-generator__discipline-name",children:X.nom})},X.id))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{className:"ai-generator__label",children:["Classe ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),r.jsx("div",{className:"ai-generator__classe-grid",children:qZ.map(X=>r.jsx("button",{className:`ai-generator__classe-btn ${d===X?"ai-generator__classe-btn--selected":""}`,onClick:()=>{m(X),D(null)},children:X},X))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),r.jsxs("div",{className:"ai-generator__duree-group",children:[r.jsx("div",{className:"ai-generator__duree-presets",children:RZ.map(X=>r.jsxs("button",{className:`ai-generator__duree-btn ${p===X?"ai-generator__duree-btn--selected":""}`,onClick:()=>{h(X),D(null)},children:[X," min"]},X))}),r.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:p,onChange:X=>{const je=parseInt(X.target.value);h(isNaN(je)?"":je),D(null)},placeholder:"Autre dure..."})]})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("div",{})," ",r.jsx("button",{className:"btn btn--primary",onClick:de,disabled:!o||!d||!p,children:"Continuer "})]})]}),t===2&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),r.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:v,onChange:X=>y(X.target.value),onKeyDown:X=>X.key==="Enter"&&ge(),autoFocus:!0})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("button",{className:"btn btn--outline",onClick:V,children:" Retour"}),r.jsx("button",{className:"btn btn--primary",onClick:ge,disabled:!v.trim(),children:"Continuer "})]})]}),t===3&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v})]}),r.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(Bl).map(X=>r.jsxs("button",{className:"ai-generator__type-card",onClick:()=>ye(X),children:[r.jsx("span",{className:"ai-generator__type-icon",children:Kd[X]}),r.jsx("span",{className:"ai-generator__type-name",children:Bl[X]}),r.jsx("span",{className:"ai-generator__type-desc",children:OZ[X]})]},X))}),r.jsx("div",{className:"ai-generator__nav",children:r.jsx("button",{className:"btn btn--outline",onClick:V,children:" Retour"})})]}),t===4&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v}),r.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Kd[x]," ",x&&Bl[x]]})]}),r.jsxs("div",{className:"ai-generator__options",children:[r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),r.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(X=>r.jsxs("label",{className:"ai-generator__radio",children:[r.jsx("input",{type:"radio",name:"difficulte",value:X,checked:j.difficulte===X,onChange:()=>S(je=>({...je,difficulte:X}))}),r.jsxs("span",{className:"ai-generator__radio-label",children:[X==="facile"&&" Facile",X==="moyen"&&" Moyen",X==="difficile"&&" Difficile"]})]},X))})]}),x==="sujet_examen"&&r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),r.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(X=>r.jsxs("label",{className:"ai-generator__radio",children:[r.jsx("input",{type:"radio",name:"typeExamen",value:X,checked:j.typeExamen===X,onChange:()=>S(je=>({...je,typeExamen:X}))}),r.jsx("span",{className:"ai-generator__radio-label",children:X})]},X))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),r.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:j.objectifs||"",onChange:X=>S(je=>({...je,objectifs:X.target.value||void 0}))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),r.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:j.consignesSpeciales||"",onChange:X=>S(je=>({...je,consignesSpeciales:X.target.value||void 0}))})]})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("button",{className:"btn btn--outline",onClick:V,children:" Retour"}),r.jsx("button",{className:"btn btn--primary btn--lg",onClick:Pe,disabled:w,children:w?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),w&&r.jsxs("div",{className:"ai-generator__generating",children:[r.jsxs("div",{className:"ai-generator__generating-animation",children:[r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""})]}),r.jsxs("p",{children:["L'IA rdige votre"," ",x&&Bl[x].toLowerCase(),"..."]}),r.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),t===5&&C&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),r.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Kd[x]," ",x&&Bl[x]]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v})]}),r.jsxs("div",{className:"ai-generator__preview",children:[r.jsxs("div",{className:"ai-generator__preview-header",children:[r.jsx("h3",{children:"Prvisualisation"}),r.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const X=C.type==="quiz"?JSON.stringify(C.data.questions,null,2):C.data.content||"";navigator.clipboard.writeText(X),alert("Contenu copi dans le presse-papier !")},children:" Copier"})]}),r.jsx("div",{className:"ai-generator__preview-body",children:C.type==="quiz"&&C.data.questions?r.jsxs("div",{className:"ai-generator__quiz-preview",children:[r.jsxs("p",{className:"ai-generator__quiz-count",children:[C.data.questions.length," questions gnres"]}),C.data.questions.map((X,je)=>r.jsxs("div",{className:"ai-generator__quiz-item",children:[r.jsxs("div",{className:"ai-generator__quiz-question",children:[r.jsxs("strong",{children:["Q",je+1,"."]})," ",X.question,r.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${X.difficulte}`,children:X.difficulte})]}),r.jsx("div",{className:"ai-generator__quiz-options",children:X.options.map((Ue,Ge)=>r.jsxs("div",{className:`ai-generator__quiz-option ${Ge===X.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[r.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+Ge)}),Ue,Ge===X.reponseCorrecte&&" "]},Ge))}),X.explication&&r.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",X.explication]})]},je))]}):r.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:ce(C.data.content||"")}})})]}),r.jsxs("div",{className:"ai-generator__actions",children:[R?r.jsxs("div",{className:"ai-generator__save-success",children:[r.jsx("span",{children:" Sauvegard avec succs !"}),C.type==="quiz"&&Q&&r.jsx(Be,{to:`/quiz/${Q}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):r.jsx("button",{className:"btn btn--primary btn--lg",onClick:le,disabled:T,children:T?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):r.jsx(r.Fragment,{children:" Sauvegarder dans PedaClic"})}),r.jsx("button",{className:"btn btn--outline",onClick:he,children:" Nouvelle gnration"})]})]})]}),F&&r.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>Y(!1),children:r.jsxs("div",{className:"ai-generator__modal",onClick:X=>X.stopPropagation(),children:[r.jsxs("div",{className:"ai-generator__modal-header",children:[r.jsx("h2",{children:" Historique des gnrations"}),r.jsx("button",{className:"ai-generator__modal-close",onClick:()=>Y(!1),children:""})]}),r.jsx("div",{className:"ai-generator__modal-body",children:M.length===0?r.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):r.jsx("div",{className:"ai-generator__history-list",children:M.map(X=>r.jsxs("div",{className:"ai-generator__history-item",children:[r.jsxs("div",{className:"ai-generator__history-info",children:[r.jsxs("span",{className:"ai-generator__history-type",children:[Kd[X.type]," ",Bl[X.type]]}),r.jsxs("span",{className:"ai-generator__history-details",children:[X.discipline," (",X.classe,")  ",X.chapitre]}),r.jsx("span",{className:"ai-generator__history-date",children:X.createdAt?.toDate?X.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),r.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>X.id&&G(X.id),title:"Supprimer",children:""})]},X.id))})})]})})]}):r.jsx("div",{className:"ai-generator",children:r.jsxs("div",{className:"ai-generator__gate",children:[r.jsx("div",{className:"ai-generator__gate-icon",children:""}),r.jsx("h2",{children:"Fonctionnalit Premium"}),r.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),r.jsxs("div",{className:"ai-generator__gate-price",children:[r.jsx("span",{className:"price",children:"2 000 FCFA"}),r.jsx("span",{className:"period",children:"/mois"})]}),r.jsx(Be,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):r.jsx("div",{className:"ai-generator",children:r.jsxs("div",{className:"ai-generator__gate",children:[r.jsx("div",{className:"ai-generator__gate-icon",children:""}),r.jsx("h2",{children:"Connexion requise"}),r.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),r.jsx(Be,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},$i={manuel:"Manuels scolaires",annale:"Annales corriges",guide:"Guides de rvision",litterature:"Culture gnrale & Littrature",fiche:"Fiches de lectures"},Bi={manuel:"",annale:"",guide:"",litterature:"",fiche:""},ii="ebooks";async function LZ(){try{const e=Te(_e(te,ii),we("isActive","==",!0),Ke("ordre","asc"));return(await De(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks:",e),e}}async function $Z(){try{const e=Te(_e(te,ii),Ke("ordre","asc"));return(await De(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks admin:",e),e}}async function BZ(e){try{const t=await Dt(Ne(te,ii,e));return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||null}:null}catch(t){throw console.error(" Erreur rcupration ebook:",t),t}}function UZ(e,t){let n=[...e];if(t.categorie&&t.categorie!=="all"&&(n=n.filter(a=>a.categorie===t.categorie)),t.niveau&&t.niveau!=="all"&&(n=n.filter(a=>a.niveau===t.niveau)),t.classe&&t.classe!=="all"&&(n=n.filter(a=>a.classe===t.classe||a.classe==="all")),t.matiere&&(n=n.filter(a=>a.matiere?.toLowerCase().includes(t.matiere.toLowerCase()))),t.recherche){const a=t.recherche.toLowerCase();n=n.filter(l=>l.titre.toLowerCase().includes(a)||l.auteur.toLowerCase().includes(a)||l.description.toLowerCase().includes(a)||l.tags?.some(o=>o.toLowerCase().includes(a)))}return n}async function FZ(e,t,n,a,l){try{const o=Vr(Yr,`ebooks/pdf/${Date.now()}_${t.name}`);await Ss(o,t);const u=await Ra(o);let d="";if(n){const v=Vr(Yr,`ebooks/covers/${Date.now()}_${n.name}`);await Ss(v,n),d=await Ra(v)}let m="";if(a){const v=Vr(Yr,`ebooks/previews/${Date.now()}_${a.name}`);await Ss(v,a),m=await Ra(v)}const p={...e,fichierURL:u,couvertureURL:d,aperuURL:m,tailleFichier:t.size,nombreTelechargements:0,nombreVues:0,uploadedBy:l||"admin",createdAt:xt(),updatedAt:xt()},h=await Pt(_e(te,ii),p);return console.log(` Ebook ajout : ${e.titre} (ID: ${h.id})`),h.id}catch(o){throw console.error(" Erreur ajout ebook:",o),o}}async function GZ(e,t,n,a,l){try{const o={...t,updatedAt:xt()};if(n){const u=Vr(Yr,`ebooks/pdf/${Date.now()}_${n.name}`);await Ss(u,n),o.fichierURL=await Ra(u),o.tailleFichier=n.size}if(a){const u=Vr(Yr,`ebooks/covers/${Date.now()}_${a.name}`);await Ss(u,a),o.couvertureURL=await Ra(u)}if(l){const u=Vr(Yr,`ebooks/previews/${Date.now()}_${l.name}`);await Ss(u,l),o.aperuURL=await Ra(u)}await He(Ne(te,ii,e),o),console.log(` Ebook mis  jour : ${e}`)}catch(o){throw console.error(" Erreur mise  jour ebook:",o),o}}async function HZ(e){try{const t=await BZ(e);if(!t)throw new Error("Ebook introuvable");try{if(t.fichierURL){const n=Vr(Yr,t.fichierURL);await Sc(n)}if(t.couvertureURL){const n=Vr(Yr,t.couvertureURL);await Sc(n)}if(t.aperuURL){const n=Vr(Yr,t.aperuURL);await Sc(n)}}catch{console.warn(" Fichiers Storage non supprims (peut-tre dj supprims)")}await Dn(Ne(te,ii,e)),console.log(` Ebook supprim : ${e}`)}catch(t){throw console.error(" Erreur suppression ebook:",t),t}}async function QZ(e,t){try{await He(Ne(te,ii,e),{isActive:t,updatedAt:xt()})}catch(n){throw console.error(" Erreur toggle ebook:",n),n}}async function VZ(e){try{await He(Ne(te,ii,e),{nombreVues:$s(1)})}catch(t){console.error(" Erreur incrment vues:",t)}}async function YZ(e){try{await He(Ne(te,ii,e),{nombreTelechargements:$s(1)})}catch(t){console.error(" Erreur incrment tlchargements:",t)}}function KZ(e){const t={totalEbooks:e.length,totalTelechargements:0,totalVues:0,parCategorie:{manuel:0,annale:0,guide:0,litterature:0,fiche:0},ebooksActifs:0};return e.forEach(n=>{t.totalTelechargements+=n.nombreTelechargements||0,t.totalVues+=n.nombreVues||0,t.parCategorie[n.categorie]=(t.parCategorie[n.categorie]||0)+1,n.isActive&&t.ebooksActifs++}),t}function zc(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/(1024*1024)).toFixed(1)} Mo`}const GP=["Mathmatiques","Physique-Chimie","SVT","Franais","Anglais","Histoire-Gographie","Philosophie","conomie","Comptabilit","ducation civique","Arabe","Espagnol","Informatique"],XZ=({isPremium:e,onReadEbook:t})=>{const[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""}),[h,v]=g.useState("grid");g.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0),d(null);const w=await LZ();a(w)}catch(w){d("Erreur lors du chargement de la bibliothque"),console.error(w)}finally{o(!1)}},x=g.useMemo(()=>UZ(n,m),[n,m]),_=g.useMemo(()=>{const w={all:n.length};return n.forEach(A=>{w[A.categorie]=(w[A.categorie]||0)+1}),w},[n]),j=(w,A)=>{p(C=>({...C,[w]:A}))},S=()=>{p({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""})};return l?r.jsx("div",{className:"ebook-library",children:r.jsxs("div",{className:"ebook-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement de la bibliothque..."})]})}):u?r.jsx("div",{className:"ebook-library",children:r.jsxs("div",{className:"ebook-error",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{onClick:y,className:"btn-retry",children:"Ressayer"})]})}):r.jsxs("div",{className:"ebook-library",children:[r.jsxs("div",{className:"ebook-library-header",children:[r.jsxs("div",{className:"ebook-header-content",children:[r.jsx("h1",{children:" Bibliothque PedaClic"}),r.jsxs("p",{className:"ebook-subtitle",children:["Manuels, annales, fiches de rvision et bien plus encore",!e&&r.jsx("span",{className:"preview-badge",children:"Aperu gratuit disponible"})]})]}),r.jsxs("div",{className:"ebook-search-bar",children:[r.jsx("input",{type:"text",placeholder:"Rechercher un ebook (titre, auteur, mot-cl)...",value:m.recherche||"",onChange:w=>j("recherche",w.target.value),className:"search-input"}),r.jsx("span",{className:"search-icon",children:""})]})]}),r.jsxs("div",{className:"ebook-categories",children:[r.jsxs("button",{className:`category-tab ${m.categorie==="all"?"active":""}`,onClick:()=>j("categorie","all"),children:[" Tous",r.jsx("span",{className:"category-count",children:_.all||0})]}),Object.keys($i).map(w=>r.jsxs("button",{className:`category-tab ${m.categorie===w?"active":""}`,onClick:()=>j("categorie",w),children:[Bi[w]," ",$i[w],r.jsx("span",{className:"category-count",children:_[w]||0})]},w))]}),r.jsxs("div",{className:"ebook-filters",children:[r.jsxs("select",{value:m.niveau||"all",onChange:w=>j("niveau",w.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"Tous les niveaux"}),r.jsx("option",{value:"college",children:"Collge"}),r.jsx("option",{value:"lycee",children:"Lyce"})]}),r.jsxs("select",{value:m.classe||"all",onChange:w=>j("classe",w.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"Toutes les classes"}),r.jsx("option",{value:"6eme",children:"6me"}),r.jsx("option",{value:"5eme",children:"5me"}),r.jsx("option",{value:"4eme",children:"4me"}),r.jsx("option",{value:"3eme",children:"3me"}),r.jsx("option",{value:"2nde",children:"2nde"}),r.jsx("option",{value:"1ere",children:"1re"}),r.jsx("option",{value:"Terminale",children:"Terminale"})]}),r.jsxs("select",{value:m.matiere||"",onChange:w=>j("matiere",w.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),GP.map(w=>r.jsx("option",{value:w,children:w},w))]}),r.jsxs("div",{className:"view-toggle",children:[r.jsx("button",{className:h==="grid"?"active":"",onClick:()=>v("grid"),title:"Vue grille",children:""}),r.jsx("button",{className:h==="list"?"active":"",onClick:()=>v("list"),title:"Vue liste",children:""})]}),(m.categorie!=="all"||m.niveau!=="all"||m.classe!=="all"||m.matiere||m.recherche)&&r.jsx("button",{onClick:S,className:"btn-reset-filters",children:" Rinitialiser"})]}),r.jsx("div",{className:"ebook-results-info",children:r.jsxs("span",{children:[x.length," ebook",x.length>1?"s":""," trouv",x.length>1?"s":""]})}),x.length===0?r.jsxs("div",{className:"ebook-empty",children:[r.jsx("p",{children:" Aucun ebook trouv avec ces filtres."}),r.jsx("button",{onClick:S,className:"btn-reset-filters",children:"Voir tous les ebooks"})]}):r.jsx("div",{className:`ebook-grid ${h==="list"?"list-view":""}`,children:x.map(w=>r.jsx(WZ,{ebook:w,isPremium:e,onRead:()=>t(w),viewMode:h},w.id))}),!e&&x.length>0&&r.jsx("div",{className:"ebook-premium-banner",children:r.jsxs("div",{className:"premium-banner-content",children:[r.jsx("h3",{children:" Accdez  tous les ebooks en illimit"}),r.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour lire et tlcharger tous les manuels, annales et fiches de rvision sans limite."}),r.jsx("a",{href:"/premium",className:"btn-premium",children:"S'abonner  2 000 FCFA/mois"})]})})]})},WZ=({ebook:e,isPremium:t,onRead:n,viewMode:a})=>r.jsxs("div",{className:`ebook-card ${a==="list"?"ebook-card-list":""}`,children:[r.jsxs("div",{className:"ebook-cover",onClick:n,children:[e.couvertureURL?r.jsx("img",{src:e.couvertureURL,alt:e.titre,loading:"lazy"}):r.jsxs("div",{className:"ebook-cover-placeholder",children:[r.jsx("span",{className:"cover-icon",children:Bi[e.categorie]}),r.jsx("span",{className:"cover-title",children:e.titre})]}),!t&&r.jsx("div",{className:"ebook-badge-premium",children:r.jsx("span",{children:" Premium"})}),r.jsx("div",{className:"ebook-badge-category",children:$i[e.categorie]})]}),r.jsxs("div",{className:"ebook-info",children:[r.jsx("h3",{className:"ebook-title",onClick:n,children:e.titre}),r.jsx("p",{className:"ebook-author",children:e.auteur}),r.jsx("p",{className:"ebook-description",children:e.description}),r.jsxs("div",{className:"ebook-meta",children:[e.classe!=="all"&&r.jsx("span",{className:"meta-tag",children:e.classe}),e.matiere&&r.jsx("span",{className:"meta-tag",children:e.matiere}),r.jsxs("span",{className:"meta-pages",children:[e.nombrePages," pages"]}),r.jsx("span",{className:"meta-size",children:zc(e.tailleFichier)})]}),r.jsxs("div",{className:"ebook-actions",children:[r.jsx("button",{className:"btn-read",onClick:n,children:t?" Lire":` Aperu (${e.pagesApercu} pages)`}),t&&r.jsx("a",{href:e.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn-download",download:!0,children:" Tlcharger"})]})]})]}),ZZ=({ebook:e,isPremium:t,onBack:n,onGoPremium:a})=>{const[l,o]=g.useState(!0),[u,d]=g.useState("info");g.useEffect(()=>{VZ(e.id)},[e.id]);const m=()=>t?e.fichierURL:e.aperuURL?e.aperuURL:null,p=async()=>{if(!t){a();return}await YZ(e.id),window.open(e.fichierURL,"_blank")},h=()=>{o(!1)};return r.jsxs("div",{className:"ebook-viewer",children:[r.jsxs("div",{className:"viewer-navbar",children:[r.jsx("button",{onClick:n,className:"btn-back",children:" Retour  la bibliothque"}),r.jsxs("div",{className:"viewer-title-bar",children:[r.jsxs("span",{className:"viewer-category",children:[Bi[e.categorie]," ",$i[e.categorie]]}),r.jsx("h2",{className:"viewer-title",children:e.titre})]}),r.jsxs("div",{className:"viewer-actions-bar",children:[r.jsx("button",{className:`btn-tab ${u==="info"?"active":""}`,onClick:()=>d("info"),children:" Dtails"}),r.jsxs("button",{className:`btn-tab ${u==="read"?"active":""}`,onClick:()=>d("read"),children:[" ",t?"Lire":"Aperu"]})]})]}),u==="info"&&r.jsx("div",{className:"viewer-info-panel",children:r.jsxs("div",{className:"info-layout",children:[r.jsxs("div",{className:"info-cover-column",children:[e.couvertureURL?r.jsx("img",{src:e.couvertureURL,alt:e.titre,className:"info-cover-image"}):r.jsxs("div",{className:"info-cover-placeholder",children:[r.jsx("span",{children:Bi[e.categorie]}),r.jsx("span",{children:e.titre})]}),r.jsxs("div",{className:"info-actions",children:[r.jsxs("button",{className:"btn-action-read",onClick:()=>d("read"),children:[" ",t?"Lire le document":`Aperu (${e.pagesApercu} pages)`]}),t?r.jsx("button",{className:"btn-action-download",onClick:p,children:" Tlcharger le PDF"}):r.jsx("button",{className:"btn-action-premium",onClick:a,children:" Accs complet  Passer Premium"})]})]}),r.jsxs("div",{className:"info-details-column",children:[r.jsx("h1",{className:"info-title",children:e.titre}),r.jsxs("p",{className:"info-author",children:["par ",e.auteur]}),r.jsxs("div",{className:"info-description",children:[r.jsx("h3",{children:"Description"}),r.jsx("p",{children:e.description})]}),r.jsxs("div",{className:"info-metadata",children:[r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Catgorie"}),r.jsxs("span",{className:"metadata-value",children:[Bi[e.categorie]," ",$i[e.categorie]]})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Niveau"}),r.jsx("span",{className:"metadata-value",children:e.niveau==="college"?"Collge":"Lyce"})]}),e.classe!=="all"&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Classe"}),r.jsx("span",{className:"metadata-value",children:e.classe})]}),e.matiere&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Matire"}),r.jsx("span",{className:"metadata-value",children:e.matiere})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Pages"}),r.jsx("span",{className:"metadata-value",children:e.nombrePages})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Taille"}),r.jsx("span",{className:"metadata-value",children:zc(e.tailleFichier)})]}),e.annee&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Anne"}),r.jsx("span",{className:"metadata-value",children:e.annee})]}),e.editeur&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"diteur"}),r.jsx("span",{className:"metadata-value",children:e.editeur})]})]}),r.jsxs("div",{className:"info-stats",children:[r.jsxs("span",{children:[" ",e.nombreVues," vue",e.nombreVues>1?"s":""]}),r.jsxs("span",{children:[" ",e.nombreTelechargements," tlchargement",e.nombreTelechargements>1?"s":""]})]}),e.tags&&e.tags.length>0&&r.jsx("div",{className:"info-tags",children:e.tags.map((v,y)=>r.jsx("span",{className:"info-tag",children:v},y))})]})]})}),u==="read"&&r.jsx("div",{className:"viewer-read-panel",children:m()?r.jsxs(r.Fragment,{children:[l&&r.jsxs("div",{className:"viewer-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement du document..."})]}),r.jsx("iframe",{src:`${m()}#toolbar=1&navpanes=0`,className:"pdf-iframe",title:e.titre,onLoad:h,style:{display:l?"none":"block"}}),!t&&r.jsx("div",{className:"viewer-premium-overlay",children:r.jsxs("div",{className:"overlay-content",children:[r.jsx("div",{className:"overlay-lock",children:""}),r.jsxs("h3",{children:["Aperu limit  ",e.pagesApercu," pages"]}),r.jsxs("p",{children:["Pour lire l'intgralit de ce document (",e.nombrePages," pages) et le tlcharger, passez  PedaClic Premium."]}),r.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),r.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})]}):r.jsx("div",{className:"viewer-no-preview",children:r.jsxs("div",{className:"no-preview-content",children:[r.jsx("div",{className:"overlay-lock",children:""}),r.jsx("h3",{children:"Document rserv aux abonns Premium"}),r.jsxs("p",{children:["Ce document de ",e.nombrePages," pages est accessible uniquement avec un abonnement PedaClic Premium."]}),r.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),r.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})})]})},JZ=()=>{const{currentUser:e}=it(),t=ot(),[n,a]=g.useState(null),l=d=>{a(d)},o=()=>{a(null)},u=()=>{t("/premium")};return n?r.jsx(ZZ,{ebook:n,isPremium:e?.isPremium||!1,onBack:o,onGoPremium:u}):r.jsx(XZ,{isPremium:e?.isPremium||!1,onReadEbook:l})},eJ=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null),[u,d]=g.useState(null),[m,p]=g.useState(!1),[h,v]=g.useState(null),[y,x]=g.useState(F()),[_,j]=g.useState(!1),[S,w]=g.useState(null),[A,C]=g.useState(null),[E,O]=g.useState(null),[D,T]=g.useState(null),k=g.useRef(null),R=g.useRef(null),L=g.useRef(null),[Q,$]=g.useState(null);function F(){return{titre:"",auteur:"",description:"",categorie:"manuel",niveau:"college",classe:"all",matiere:"",nombrePages:0,pagesApercu:5,annee:"",editeur:"",isbn:"",tags:[],ordre:0,isActive:!0}}g.useEffect(()=>{Y()},[]);const Y=async()=>{try{a(!0),o(null);const re=await $Z();t(re),d(KZ(re))}catch(re){o("Erreur lors du chargement des ebooks"),console.error(re)}finally{a(!1)}},M=re=>{const{name:de,value:ge,type:ye}=re.target;x(ye==="number"?V=>({...V,[de]:parseInt(ge)||0}):ye==="checkbox"?V=>({...V,[de]:re.target.checked}):V=>({...V,[de]:ge}))},q=re=>{const de=re.target.value.split(",").map(ge=>ge.trim()).filter(Boolean);x(ge=>({...ge,tags:de}))},Z=async re=>{if(re.preventDefault(),!y.titre.trim()){o("Le titre est obligatoire");return}if(!h&&!A){o("Le fichier PDF est obligatoire");return}try{j(!0),o(null),h?(await GZ(h.id,y,A,E,D),w(` Ebook "${y.titre}" modifi avec succs`)):(await FZ(y,A,E,D),w(` Ebook "${y.titre}" ajout avec succs`)),pe(),await Y(),setTimeout(()=>w(null),4e3)}catch(de){o(de.message||"Erreur lors de la sauvegarde")}finally{j(!1)}},H=re=>{v(re),x({titre:re.titre,auteur:re.auteur,description:re.description,categorie:re.categorie,niveau:re.niveau,classe:re.classe,matiere:re.matiere||"",nombrePages:re.nombrePages,pagesApercu:re.pagesApercu,annee:re.annee||"",editeur:re.editeur||"",isbn:re.isbn||"",tags:re.tags||[],ordre:re.ordre,isActive:re.isActive}),p(!0),window.scrollTo({top:0,behavior:"smooth"})},B=async re=>{try{await HZ(re),$(null),w(" Ebook supprim avec succs"),await Y(),setTimeout(()=>w(null),4e3)}catch(de){o(de.message||"Erreur lors de la suppression")}},I=async(re,de)=>{try{await QZ(re,!de),await Y()}catch(ge){o(ge.message)}},pe=()=>{x(F()),v(null),C(null),O(null),T(null),p(!1),k.current&&(k.current.value=""),R.current&&(R.current.value=""),L.current&&(L.current.value="")};return n?r.jsx("div",{className:"admin-ebooks",children:r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement des ebooks..."})]})}):r.jsxs("div",{className:"admin-ebooks",children:[r.jsxs("div",{className:"admin-ebooks-header",children:[r.jsx("h1",{children:" Gestion de la Bibliothque"}),r.jsx("button",{className:"btn-add-ebook",onClick:()=>{pe(),p(!m)},children:m?" Fermer":"+ Ajouter un ebook"})]}),l&&r.jsxs("div",{className:"admin-alert error",children:[" ",l]}),S&&r.jsx("div",{className:"admin-alert success",children:S}),u&&r.jsxs("div",{className:"admin-stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalEbooks}),r.jsx("span",{className:"stat-label",children:"Total ebooks"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.ebooksActifs}),r.jsx("span",{className:"stat-label",children:"Actifs"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalVues}),r.jsx("span",{className:"stat-label",children:"Vues totales"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalTelechargements}),r.jsx("span",{className:"stat-label",children:"Tlchargements"})]})]}),m&&r.jsxs("div",{className:"admin-ebook-form-container",children:[r.jsx("h2",{children:h?" Modifier l'ebook":" Ajouter un ebook"}),r.jsxs("form",{onSubmit:Z,className:"admin-ebook-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"titre",children:"Titre *"}),r.jsx("input",{id:"titre",name:"titre",type:"text",value:y.titre,onChange:M,placeholder:"Ex: Mathmatiques 3me - Programme complet",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"auteur",children:"Auteur(s) *"}),r.jsx("input",{id:"auteur",name:"auteur",type:"text",value:y.auteur,onChange:M,placeholder:"Ex: Pr. Diallo Moussa",required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description *"}),r.jsx("textarea",{id:"description",name:"description",value:y.description,onChange:M,placeholder:"Dcrivez le contenu de cet ebook...",rows:3,required:!0})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"categorie",children:"Catgorie *"}),r.jsx("select",{id:"categorie",name:"categorie",value:y.categorie,onChange:M,children:Object.keys($i).map(re=>r.jsxs("option",{value:re,children:[Bi[re]," ",$i[re]]},re))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),r.jsxs("select",{id:"niveau",name:"niveau",value:y.niveau,onChange:M,children:[r.jsx("option",{value:"college",children:"Collge"}),r.jsx("option",{value:"lycee",children:"Lyce"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"classe",children:"Classe"}),r.jsxs("select",{id:"classe",name:"classe",value:y.classe,onChange:M,children:[r.jsx("option",{value:"all",children:"Toutes les classes"}),r.jsx("option",{value:"6eme",children:"6me"}),r.jsx("option",{value:"5eme",children:"5me"}),r.jsx("option",{value:"4eme",children:"4me"}),r.jsx("option",{value:"3eme",children:"3me"}),r.jsx("option",{value:"2nde",children:"2nde"}),r.jsx("option",{value:"1ere",children:"1re"}),r.jsx("option",{value:"Terminale",children:"Terminale"})]})]})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"matiere",children:"Matire"}),r.jsxs("select",{id:"matiere",name:"matiere",value:y.matiere,onChange:M,children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),GP.map(re=>r.jsx("option",{value:re,children:re},re))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"annee",children:"Anne"}),r.jsx("input",{id:"annee",name:"annee",type:"text",value:y.annee,onChange:M,placeholder:"Ex: 2024-2025"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"editeur",children:"diteur"}),r.jsx("input",{id:"editeur",name:"editeur",type:"text",value:y.editeur,onChange:M,placeholder:"Ex: INEADE"})]})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"nombrePages",children:"Nombre de pages *"}),r.jsx("input",{id:"nombrePages",name:"nombrePages",type:"number",value:y.nombrePages,onChange:M,min:"1",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pagesApercu",children:"Pages en aperu gratuit"}),r.jsx("input",{id:"pagesApercu",name:"pagesApercu",type:"number",value:y.pagesApercu,onChange:M,min:"1",max:"20"}),r.jsx("small",{children:"Nombre de pages visibles sans Premium (1-20)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"ordre",children:"Ordre d'affichage"}),r.jsx("input",{id:"ordre",name:"ordre",type:"number",value:y.ordre,onChange:M,min:"0"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"tags",children:"Tags (spars par des virgules)"}),r.jsx("input",{id:"tags",type:"text",value:y.tags?.join(", ")||"",onChange:q,placeholder:"Ex: BFEM, annales, mathmatiques, gomtrie"})]}),r.jsxs("div",{className:"form-files-section",children:[r.jsx("h3",{children:" Fichiers"}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["Fichier PDF complet ",!h&&"*",h&&r.jsx("small",{children:"(laisser vide pour garder l'actuel)"})]}),r.jsx("input",{ref:k,type:"file",accept:".pdf",onChange:re=>C(re.target.files?.[0]||null),className:"file-input"}),A&&r.jsxs("span",{className:"file-info",children:[" ",A.name," (",zc(A.size),")"]})]}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["Image de couverture",r.jsx("small",{children:"(JPG, PNG  recommand : 400560px)"})]}),r.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:re=>O(re.target.files?.[0]||null),className:"file-input"}),E&&r.jsxs("span",{className:"file-info",children:[" ",E.name," (",zc(E.size),")"]})]}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["PDF Aperu (premires pages uniquement)",r.jsx("small",{children:"(optionnel  sinon le PDF complet est affich aux non-Premium)"})]}),r.jsx("input",{ref:L,type:"file",accept:".pdf",onChange:re=>T(re.target.files?.[0]||null),className:"file-input"}),D&&r.jsxs("span",{className:"file-info",children:[" ",D.name," (",zc(D.size),")"]})]})]}),r.jsx("div",{className:"form-group checkbox-group",children:r.jsxs("label",{children:[r.jsx("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:M}),"Ebook actif (visible dans la bibliothque)"]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"btn-save",disabled:_,children:_?" Enregistrement...":h?" Modifier l'ebook":" Ajouter l'ebook"}),r.jsx("button",{type:"button",className:"btn-cancel",onClick:pe,children:"Annuler"})]})]})]}),r.jsxs("div",{className:"admin-ebooks-list",children:[r.jsxs("h2",{children:[" Liste des ebooks (",e.length,")"]}),e.length===0?r.jsxs("div",{className:"admin-empty",children:[r.jsx("p",{children:"Aucun ebook pour le moment."}),r.jsx("button",{className:"btn-add-ebook",onClick:()=>p(!0),children:"+ Ajouter le premier ebook"})]}):r.jsx("div",{className:"admin-ebooks-table-wrapper",children:r.jsxs("table",{className:"admin-ebooks-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Couverture"}),r.jsx("th",{children:"Titre / Auteur"}),r.jsx("th",{children:"Catgorie"}),r.jsx("th",{children:"Classe"}),r.jsx("th",{children:"Pages"}),r.jsx("th",{children:"Vues / DL"}),r.jsx("th",{children:"Statut"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(re=>r.jsxs("tr",{className:re.isActive?"":"row-inactive",children:[r.jsx("td",{className:"td-cover",children:re.couvertureURL?r.jsx("img",{src:re.couvertureURL,alt:"",className:"mini-cover"}):r.jsx("div",{className:"mini-cover-placeholder",children:Bi[re.categorie]})}),r.jsxs("td",{className:"td-title",children:[r.jsx("strong",{children:re.titre}),r.jsx("span",{className:"td-author",children:re.auteur})]}),r.jsx("td",{children:r.jsxs("span",{className:"badge-category",children:[Bi[re.categorie]," ",$i[re.categorie]]})}),r.jsx("td",{children:re.classe==="all"?"Toutes":re.classe}),r.jsx("td",{children:re.nombrePages}),r.jsx("td",{children:r.jsxs("span",{className:"td-stats",children:[" ",re.nombreVues,r.jsx("br",{})," ",re.nombreTelechargements]})}),r.jsx("td",{children:r.jsx("button",{className:`btn-status ${re.isActive?"active":"inactive"}`,onClick:()=>I(re.id,re.isActive),title:re.isActive?"Dsactiver":"Activer",children:re.isActive?" Actif":" Inactif"})}),r.jsxs("td",{className:"td-actions",children:[r.jsx("button",{className:"btn-edit",onClick:()=>H(re),title:"Modifier",children:""}),Q===re.id?r.jsxs("div",{className:"delete-confirm",children:[r.jsx("span",{children:"Supprimer ?"}),r.jsx("button",{className:"btn-confirm-yes",onClick:()=>B(re.id),children:"Oui"}),r.jsx("button",{className:"btn-confirm-no",onClick:()=>$(null),children:"Non"})]}):r.jsx("button",{className:"btn-delete",onClick:()=>$(re.id),title:"Supprimer",children:""})]})]},re.id))})]})})]})]})},Yn="cours_en_ligne",Ys="cours_sections";function tJ(e){const t=[/(?:youtube\.com\/watch\?v=)([^&\n?#]+)/,/(?:youtu\.be\/)([^&\n?#]+)/,/(?:youtube\.com\/embed\/)([^&\n?#]+)/];for(const n of t){const a=e.match(n);if(a)return a[1]}return null}async function rJ(e){let t=Te(_e(te,Yn),we("statut","==","publie"),Ke("updatedAt","desc"),cn(50));return(await De(t)).docs.map(l=>({id:l.id,...l.data()}))}async function HP(e){const t=await Dt(Ne(te,Yn,e));return t.exists()?{id:t.id,...t.data()}:null}async function nJ(e){const t=Te(_e(te,Yn),we("profId","==",e),Ke("updatedAt","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function aJ(e,t,n){const a=Me.now();return(await Pt(_e(te,Yn),{...n,profId:e,profNom:t,statut:n.statut??"brouillon",nombreInscrits:0,nombreSections:0,createdAt:a,updatedAt:a})).id}async function iJ(e,t){await He(Ne(te,Yn,e),{...t,updatedAt:Me.now()})}async function Sy(e){await He(Ne(te,Yn,e),{statut:"publie",publieAt:Me.now(),updatedAt:Me.now()})}async function sJ(e){await He(Ne(te,Yn,e),{statut:"archive",updatedAt:Me.now()})}async function lJ(e){const t=$a(te);(await De(Te(_e(te,Ys),we("coursId","==",e)))).docs.forEach(a=>t.delete(a.ref)),t.delete(Ne(te,Yn,e)),await t.commit()}async function QP(e){const t=Te(_e(te,Ys),we("coursId","==",e),Ke("ordre","asc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function oJ(e,t){const n=$a(te),a=Me.now(),l=Ne(_e(te,Ys));return n.set(l,{...t,coursId:e,blocs:t.blocs??[],createdAt:a,updatedAt:a}),n.update(Ne(te,Yn,e),{nombreSections:$s(1),updatedAt:a}),await n.commit(),l.id}async function $A(e,t){const n=Me.now();let a={...t,updatedAt:n};t.blocs&&(a.dureeEstimee=VP(t.blocs)),await He(Ne(te,Ys,e),a)}async function cJ(e,t){const n=$a(te),a=Me.now();n.delete(Ne(te,Ys,e)),n.update(Ne(te,Yn,t),{nombreSections:$s(-1),updatedAt:a}),await n.commit()}async function uJ(e){const t=$a(te),n=Me.now();e.forEach(({id:a,ordre:l})=>{t.update(Ne(te,Ys,a),{ordre:l,updatedAt:n})}),await t.commit()}async function dJ(e,t){const n=t.map((a,l)=>({...a,ordre:l}));await He(Ne(te,Ys,e),{blocs:n,dureeEstimee:VP(n),updatedAt:Me.now()})}function VP(e){let t=0;return e.forEach(n=>{switch(n.type){case"texte":t+=Math.max(1,Math.ceil(n.contenu.split(" ").length/200));break;case"video":t+=5;break;case"quiz":t+=2;break;case"exercice":t+=n.difficulte==="difficile"?10:n.difficulte==="moyen"?5:3;break;case"image":case"encadre":t+=1;break}}),Math.max(1,t)}async function fJ(e){await He(Ne(te,Yn,e),{nombreInscrits:$s(1)})}const wy={texte:{label:"Texte",emoji:"",description:"Paragraphe format"},image:{label:"Image",emoji:"",description:"Image avec lgende"},video:{label:"Vido",emoji:"",description:"Vido YouTube"},encadre:{label:"Encadr",emoji:"",description:"Dfinition, remarque, astuce..."},quiz:{label:"Quiz",emoji:"",description:"Question  choix multiple"},exercice:{label:"Exercice",emoji:"",description:"Problme avec correction"}},YP={definition:{label:"Dfinition",emoji:"",bg:"#eff6ff",border:"#2563eb",color:"#1d4ed8"},remarque:{label:"Remarque",emoji:"",bg:"#fefce8",border:"#ca8a04",color:"#854d0e"},attention:{label:"Attention",emoji:"",bg:"#fef2f2",border:"#dc2626",color:"#991b1b"},astuce:{label:"Astuce",emoji:"",bg:"#f0fdf4",border:"#16a34a",color:"#15803d"},exemple:{label:"Exemple",emoji:"",bg:"#f8fafc",border:"#64748b",color:"#475569"}},pj=op.map(e=>({valeur:e,label:e==="3me"?"3me (BFEM)":e==="Terminale"?"Terminale (BAC)":e})),mJ={brouillon:{label:"Brouillon",couleur:"#6b7280",bg:"#f3f4f6"},publie:{label:"Publi",couleur:"#16a34a",bg:"#f0fdf4"},archive:{label:"Archiv",couleur:"#9ca3af",bg:"#f9fafb"}};function pJ({cours:e,onClick:t}){const n=e.dureeEstimee>=60?`${Math.floor(e.dureeEstimee/60)}h${e.dureeEstimee%60>0?e.dureeEstimee%60:""}`:`${e.dureeEstimee} min`,a=pj.find(l=>l.valeur===e.niveau)?.label??e.niveau;return r.jsxs("article",{className:"cours-card",onClick:t,role:"button",tabIndex:0,onKeyDown:l=>l.key==="Enter"&&t(),"aria-label":`Cours : ${e.titre}`,children:[r.jsxs("div",{className:"cours-card__cover",children:[e.couvertureUrl?r.jsx("img",{src:e.couvertureUrl,alt:e.titre,loading:"lazy"}):r.jsx("div",{className:"cours-card__cover-placeholder",children:r.jsx("span",{children:e.matiere.charAt(0)})}),e.isPremium&&r.jsx("span",{className:"cours-card__badge cours-card__badge--premium",children:" Premium"}),!e.isPremium&&r.jsx("span",{className:"cours-card__badge cours-card__badge--gratuit",children:" Gratuit"})]}),r.jsxs("div",{className:"cours-card__body",children:[r.jsxs("div",{className:"cours-card__meta",children:[r.jsx("span",{className:"cours-card__matiere",children:e.matiere}),r.jsx("span",{className:"cours-card__niveau",children:a})]}),r.jsx("h3",{className:"cours-card__titre",children:e.titre}),r.jsx("p",{className:"cours-card__description",children:e.description}),r.jsxs("div",{className:"cours-card__footer",children:[r.jsxs("span",{className:"cours-card__prof",children:[" ",e.profNom]}),r.jsxs("div",{className:"cours-card__stats",children:[r.jsxs("span",{children:[" ",e.nombreSections," section",e.nombreSections>1?"s":""]}),r.jsxs("span",{children:[" ",n]}),r.jsxs("span",{children:[" ",e.nombreInscrits]})]})]})]})]})}function BA(){const e=ot(),{matieres:t}=lp(),[n,a]=g.useState([]),[l,o]=g.useState([]),[u,d]=g.useState(!0),[m,p]=g.useState(null),[h,v]=g.useState({matiere:"",niveau:"",recherche:"",isPremium:""});g.useEffect(()=>{y()},[]);async function y(){d(!0),p(null);try{const S=await rJ();a(S),o(S)}catch(S){console.error("[CoursPage] Erreur chargement :",S),p("Impossible de charger les cours. Vrifiez votre connexion.")}finally{d(!1)}}const x=g.useCallback(S=>{v(S);let w=[...n];if(S.matiere&&(w=w.filter(A=>A.matiere===S.matiere)),S.niveau&&(w=w.filter(A=>A.niveau===S.niveau)),S.isPremium!==""&&S.isPremium!==void 0&&(w=w.filter(A=>A.isPremium===S.isPremium)),S.recherche){const A=S.recherche.toLowerCase();w=w.filter(C=>C.titre.toLowerCase().includes(A)||C.description.toLowerCase().includes(A)||C.matiere.toLowerCase().includes(A)||C.tags.some(E=>E.toLowerCase().includes(A)))}o(w)},[n]),_=()=>{v({matiere:"",niveau:"",recherche:"",isPremium:""}),o(n)},j=!!(h.matiere||h.niveau||h.recherche||h.isPremium!=="");return r.jsxs("div",{className:"cours-catalogue",children:[r.jsx("section",{className:"cours-catalogue__hero","aria-label":"Introduction aux cours",children:r.jsxs("div",{className:"cours-catalogue__hero-content",children:[r.jsx("h1",{className:"cours-catalogue__hero-titre",children:" Cours en ligne"}),r.jsx("p",{className:"cours-catalogue__hero-sous-titre",children:"Des cours complets du programme sngalais  de la 6me au Bac. Crs par vos professeurs, accessibles partout, mme hors-ligne."}),r.jsxs("div",{className:"cours-catalogue__hero-stats","aria-label":"Statistiques de la plateforme",children:[r.jsxs("div",{className:"cours-catalogue__stat",children:[r.jsx("span",{className:"cours-catalogue__stat-val",children:n.length}),r.jsx("span",{className:"cours-catalogue__stat-label",children:"Cours disponibles"})]}),r.jsxs("div",{className:"cours-catalogue__stat",children:[r.jsx("span",{className:"cours-catalogue__stat-val",children:n.filter(S=>!S.isPremium).length}),r.jsx("span",{className:"cours-catalogue__stat-label",children:"Cours gratuits"})]}),r.jsxs("div",{className:"cours-catalogue__stat",children:[r.jsx("span",{className:"cours-catalogue__stat-val",children:[...new Set(n.map(S=>S.matiere))].length}),r.jsx("span",{className:"cours-catalogue__stat-label",children:"Matires"})]})]})]})}),r.jsx("section",{className:"cours-catalogue__filtres","aria-label":"Filtres de recherche",children:r.jsxs("div",{className:"cours-catalogue__filtres-inner",children:[r.jsxs("div",{className:"cours-catalogue__search",children:[r.jsx("span",{className:"cours-catalogue__search-icon","aria-hidden":"true",children:""}),r.jsx("input",{type:"search",placeholder:"Rechercher un cours, une matire, un tag...",value:h.recherche,onChange:S=>x({...h,recherche:S.target.value}),className:"cours-catalogue__search-input","aria-label":"Rechercher dans les cours"})]}),r.jsxs("select",{value:h.matiere,onChange:S=>x({...h,matiere:S.target.value}),className:"cours-catalogue__select","aria-label":"Filtrer par matire",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),t.map(S=>r.jsx("option",{value:S.valeur,children:S.label},S.valeur))]}),r.jsxs("select",{value:h.niveau,onChange:S=>x({...h,niveau:S.target.value}),className:"cours-catalogue__select","aria-label":"Filtrer par niveau",children:[r.jsx("option",{value:"",children:"Tous les niveaux"}),op.map(S=>r.jsx("option",{value:S,children:S},S))]}),r.jsxs("select",{value:String(h.isPremium),onChange:S=>{const w=S.target.value===""?"":S.target.value==="true";x({...h,isPremium:w})},className:"cours-catalogue__select","aria-label":"Filtrer par accs",children:[r.jsx("option",{value:"",children:"Tous les accs"}),r.jsx("option",{value:"false",children:" Gratuits"}),r.jsx("option",{value:"true",children:" Premium"})]}),j&&r.jsx("button",{className:"btn-secondary btn--sm",onClick:_,"aria-label":"Effacer les filtres",children:" Effacer les filtres"})]})}),r.jsxs("main",{className:"cours-catalogue__contenu",children:[m&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",m,r.jsx("button",{className:"btn-link",onClick:y,children:"Ressayer"})]}),u&&r.jsx("div",{className:"cours-catalogue__grille","aria-busy":"true","aria-label":"Chargement des cours",children:[1,2,3,4,5,6].map(S=>r.jsxs("div",{className:"cours-card cours-card--skeleton",children:[r.jsx("div",{className:"skeleton cours-card__cover"}),r.jsxs("div",{className:"cours-card__body",children:[r.jsx("div",{className:"skeleton",style:{height:16,width:"60%",marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:20,marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:14,width:"80%"}})]})]},S))}),!u&&l.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"cours-catalogue__compteur","aria-live":"polite",children:[l.length," cours trouv",l.length>1?"s":"",j&&" pour ces critres"]}),r.jsx("div",{className:"cours-catalogue__grille",children:l.map(S=>r.jsx(pJ,{cours:S,onClick:()=>e(`/cours/${S.id}`)},S.id))})]}),!u&&l.length===0&&!m&&r.jsxs("div",{className:"cours-catalogue__vide",role:"status",children:[r.jsx("span",{"aria-hidden":"true",children:""}),r.jsx("h3",{children:"Aucun cours trouv"}),r.jsx("p",{children:j?"Essayez de modifier ou supprimer vos filtres.":"Les cours seront disponibles bientt. Revenez dans quelques jours !"}),j&&r.jsx("button",{className:"btn-secondary",onClick:_,children:"Afficher tous les cours"})]})]})]})}const Ls="progression_cours";async function UA(e,t){const n=Te(_e(te,Ls),we("userId","==",e),we("coursId","==",t)),a=await De(n);if(a.empty)return null;const l=a.docs[0];return{id:l.id,...l.data()}}async function hJ(e){const t=Te(_e(te,Ls),we("coursId","==",e));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function vJ(e,t){const n=Me.now(),a=await Pt(_e(te,Ls),{userId:e,coursId:t,sectionsLues:[],reponsesQuiz:[],pourcentageProgression:0,scoreQuiz:0,tentativesQuiz:0,debutLe:n,dernierAcces:n,estTermine:!1});return await fJ(t),a.id}async function gJ(e,t,n){const a=await Dt(Ne(te,Ls,e));if(!a.exists())return;const l=a.data();if(l.sectionsLues.includes(t))return;const o=[...l.sectionsLues,t],u=Math.round(o.length/n*100),d=o.length>=n;await He(Ne(te,Ls,e),{sectionsLues:Ey(t),pourcentageProgression:u,estTermine:d,dernierAcces:Me.now()})}async function xJ(e,t){const n=await Dt(Ne(te,Ls,e));if(!n.exists())return;const a=n.data(),l=a.reponsesQuiz??[];if(l.some(p=>p.blocId===t.blocId))return;const u=[...l,t],d=u.filter(p=>p.estCorrecte).length,m=u.length>0?Math.round(d/u.length*100):0;await He(Ne(te,Ls,e),{reponsesQuiz:Ey(t),scoreQuiz:m,tentativesQuiz:a.tentativesQuiz+1,dernierAcces:Me.now()})}function yJ(e){if(e.length===0)return{nombreInscrits:0,nombreTermines:0,tauxCompletion:0,progressionMoyenne:0,scoreMoyen:0};const t=e.filter(l=>l.estTermine).length,n=Math.round(e.reduce((l,o)=>l+o.pourcentageProgression,0)/e.length),a=Math.round(e.reduce((l,o)=>l+o.scoreQuiz,0)/e.length);return{nombreInscrits:e.length,nombreTermines:t,tauxCompletion:Math.round(t/e.length*100),progressionMoyenne:n,scoreMoyen:a}}function bJ({bloc:e}){const t=e.contenu.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/gs,"<ul>$1</ul>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br/>");return r.jsx("div",{className:"bloc-texte",dangerouslySetInnerHTML:{__html:`<p>${t}</p>`}})}function jJ({bloc:e}){return r.jsxs("figure",{className:"bloc-image",children:[r.jsx("img",{src:e.url,alt:e.alt,loading:"lazy"}),e.legende&&r.jsx("figcaption",{children:e.legende})]})}function NJ({bloc:e}){const t=tJ(e.urlYoutube);return t?r.jsxs("div",{className:"bloc-video",children:[e.titre&&r.jsxs("h4",{className:"bloc-video__titre",children:[" ",e.titre]}),e.description&&r.jsx("p",{className:"bloc-video__description",children:e.description}),r.jsx("div",{className:"bloc-video__embed",children:r.jsx("iframe",{src:`https://www.youtube.com/embed/${t}`,title:e.titre||"Vido pdagogique",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})]}):null}function _J({bloc:e}){const t=YP[e.variante];return r.jsxs("div",{className:"bloc-encadre",style:{background:t.bg,borderLeftColor:t.border,color:t.color},children:[r.jsxs("p",{className:"bloc-encadre__titre",children:[t.emoji," ",e.titre]}),r.jsx("p",{className:"bloc-encadre__contenu",children:e.contenu})]})}function SJ({bloc:e,onReponse:t,reponseExistante:n}){const[a,l]=g.useState(n??null),o=a!==null;function u(d,m){o||(l(d),t(d,m))}return r.jsxs("div",{className:"bloc-quiz",children:[r.jsxs("p",{className:"bloc-quiz__question",children:[" ",e.question]}),r.jsx("div",{className:"bloc-quiz__options",children:e.options.map(d=>{let m="";return o&&(d.id===a?m=d.estCorrecte?"correct":"incorrect":d.estCorrecte&&(m="attendu")),r.jsxs("button",{className:`bloc-quiz__option bloc-quiz__option--${m||"neutre"}`,onClick:()=>u(d.id,d.estCorrecte),disabled:o,"aria-pressed":d.id===a,children:[m==="correct"&&" ",m==="incorrect"&&" ",m==="attendu"&&" ",d.texte]},d.id)})}),o&&e.explication&&r.jsxs("div",{className:"bloc-quiz__explication",children:[" ",r.jsx("strong",{children:"Explication :"})," ",e.explication]})]})}function wJ({bloc:e}){const[t,n]=g.useState(!1),a={facile:"#16a34a",moyen:"#ca8a04",difficile:"#dc2626"};return r.jsxs("div",{className:"bloc-exercice",children:[r.jsxs("div",{className:"bloc-exercice__header",children:[r.jsx("span",{className:"bloc-exercice__titre",children:" Exercice"}),r.jsxs("span",{className:"bloc-exercice__difficulte",style:{color:a[e.difficulte]},children:[e.difficulte.charAt(0).toUpperCase()+e.difficulte.slice(1),e.points&&`  ${e.points} pt${e.points>1?"s":""}`]})]}),r.jsx("p",{className:"bloc-exercice__enonce",children:e.enonce}),t?r.jsxs("div",{className:"bloc-exercice__correction",children:[r.jsx("p",{className:"bloc-exercice__correction-titre",children:" Correction"}),r.jsx("p",{children:e.correction})]}):r.jsx("button",{className:"btn-secondary btn--sm",onClick:()=>n(!0),children:" Voir la correction"})]})}function CJ({bloc:e,isPremiumVerrou:t,onReponseQuiz:n,reponseExistante:a}){if(t)return r.jsxs("div",{className:"bloc-premium-verrou","aria-label":"Contenu Premium",children:[r.jsx("span",{children:""}),r.jsx("p",{children:"Ce contenu est rserv aux abonns Premium."})]});switch(e.type){case"texte":return r.jsx(bJ,{bloc:e});case"image":return r.jsx(jJ,{bloc:e});case"video":return r.jsx(NJ,{bloc:e});case"encadre":return r.jsx(_J,{bloc:e});case"quiz":return r.jsx(SJ,{bloc:e,reponseExistante:a,onReponse:(l,o)=>n(e.id,l,o)});case"exercice":return r.jsx(wJ,{bloc:e});default:return null}}function FA(){const{coursId:e}=Hn(),t=ot(),{currentUser:n}=it(),a=n?.isPremium??!1,[l,o]=g.useState(null),[u,d]=g.useState([]),[m,p]=g.useState(null),[h,v]=g.useState(null),[y,x]=g.useState(!0),[_,j]=g.useState(null),S=g.useRef(null);g.useEffect(()=>{e&&w()},[e,n]);async function w(){if(e){x(!0),j(null);try{const[k,R]=await Promise.all([HP(e),QP(e)]);if(!k||k.statut!=="publie"){j("Ce cours n'est pas disponible."),x(!1);return}if(o(k),d(R),R.length>0&&v(R[0].id),n){let L=await UA(n.uid,e);L||(await vJ(n.uid,e),L=await UA(n.uid,e)),p(L)}}catch(k){console.error("[CoursDetailPage] Erreur chargement :",k),j("Erreur de chargement. Vrifiez votre connexion.")}finally{x(!1)}}}async function A(k){if(!(!n||!m||!l)&&!m.sectionsLues.includes(k))try{await gJ(m.id,k,l.nombreSections),p(R=>R?{...R,sectionsLues:[...R.sectionsLues,k],pourcentageProgression:Math.round((R.sectionsLues.length+1)/l.nombreSections*100)}:null)}catch(R){console.error("[CoursDetailPage] Erreur marquer section :",R)}}async function C(k,R,L){if(!(!n||!m))try{await xJ(m.id,{blocId:k,optionChoisieId:R,estCorrecte:L,reponduAt:Me.now()})}catch(Q){console.error("[CoursDetailPage] Erreur enregistrement quiz :",Q)}}function E(k){return!!(k.estGratuite||k.ordre===1||!l?.isPremium||a)}if(y)return r.jsxs("div",{className:"cours-detail__loading","aria-busy":"true",children:[r.jsx("div",{className:"spinner spinner--blue"}),r.jsx("p",{children:"Chargement du cours..."})]});if(_||!l)return r.jsxs("div",{className:"cours-detail__erreur",role:"alert",children:[r.jsx("span",{"aria-hidden":"true",children:""}),r.jsx("p",{children:_??"Cours introuvable."}),r.jsx("button",{className:"btn-secondary",onClick:()=>t("/cours"),children:" Retour au catalogue"})]});const O=pj.find(k=>k.valeur===l.niveau)?.label??l.niveau,D=u.find(k=>k.id===h),T=D?E(D):!1;return r.jsxs("div",{className:"cours-detail",children:[r.jsxs("header",{className:"cours-detail__header",children:[r.jsxs("p",{className:"cours-detail__breadcrumb",children:[r.jsx("button",{className:"btn-link",onClick:()=>t("/cours"),children:" Cours"})," / ",r.jsx("span",{children:l.matiere})," / ",r.jsx("span",{children:l.titre})]}),r.jsxs("div",{className:"cours-detail__header-grid",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"cours-detail__badges",children:[r.jsx("span",{className:"badge badge--matiere",children:l.matiere}),r.jsx("span",{className:"badge badge--niveau",children:O}),l.isPremium?r.jsx("span",{className:"badge badge--premium",children:" Premium"}):r.jsx("span",{className:"badge badge--gratuit",children:" Gratuit"})]}),r.jsx("h1",{className:"cours-detail__titre",children:l.titre}),r.jsx("p",{className:"cours-detail__description",children:l.description}),r.jsxs("p",{className:"cours-detail__prof",children:[" Cours de ",r.jsx("strong",{children:l.profNom})]}),l.objectifs.length>0&&r.jsxs("div",{className:"cours-detail__objectifs",children:[r.jsx("h3",{children:" Objectifs du cours"}),r.jsx("ul",{children:l.objectifs.map((k,R)=>r.jsx("li",{children:k},R))})]})]}),n&&m&&r.jsxs("div",{className:"cours-detail__progression-card",children:[r.jsx("h3",{children:" Ma progression"}),r.jsx("div",{className:"progression-bar",children:r.jsx("div",{className:"progression-bar__fill",style:{width:`${m.pourcentageProgression}%`},role:"progressbar","aria-valuenow":m.pourcentageProgression,"aria-valuemin":0,"aria-valuemax":100})}),r.jsxs("p",{className:"progression-bar__label",children:[m.pourcentageProgression,"%  ",m.sectionsLues.length,"/",l.nombreSections," section",l.nombreSections>1?"s":""," lue",m.sectionsLues.length>1?"s":""]}),m.scoreQuiz>0&&r.jsxs("p",{className:"progression-bar__score",children:[" Score quiz : ",r.jsxs("strong",{children:[m.scoreQuiz,"%"]})]}),m.estTermine&&r.jsx("div",{className:"cours-detail__termine-badge",children:" Cours termin !"})]})]})]}),r.jsxs("div",{className:"cours-detail__layout",children:[r.jsxs("nav",{className:"cours-detail__sidebar","aria-label":"Sections du cours",children:[r.jsx("h2",{className:"cours-detail__sidebar-titre",children:" Sections"}),r.jsx("ol",{className:"cours-detail__sections-liste",children:u.map(k=>{const R=m?.sectionsLues.includes(k.id)??!1,L=k.id===h,Q=E(k);return r.jsx("li",{children:r.jsxs("button",{className:["cours-detail__section-btn",L?"cours-detail__section-btn--active":"",R?"cours-detail__section-btn--lue":"",Q?"":"cours-detail__section-btn--verrou"].join(" "),onClick:()=>v(k.id),"aria-current":L?"true":void 0,children:[r.jsx("span",{className:"cours-detail__section-icone","aria-hidden":"true",children:Q?R?"":`${k.ordre}.`:""}),r.jsx("span",{className:"cours-detail__section-nom",children:k.titre}),r.jsxs("span",{className:"cours-detail__section-duree",children:[k.dureeEstimee," min"]})]})},k.id)})})]}),r.jsx("main",{className:"cours-detail__contenu",ref:S,"aria-live":"polite",children:D?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"cours-detail__section-header",children:[r.jsxs("h2",{className:"cours-detail__section-titre",children:[D.ordre,". ",D.titre]}),r.jsxs("span",{className:"cours-detail__section-duree-label",children:[" ",D.dureeEstimee," min de lecture"]})]}),T?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"cours-detail__blocs",children:D.blocs.sort((k,R)=>k.ordre-R.ordre).map(k=>{const R=k.isPremium&&!a&&!D.estGratuite,L=m?.reponsesQuiz.find(Q=>Q.blocId===k.id)?.optionChoisieId;return r.jsx("div",{className:`cours-detail__bloc cours-detail__bloc--${k.type}`,children:r.jsx(CJ,{bloc:k,isPremiumVerrou:R,onReponseQuiz:C,reponseExistante:L})},k.id)})}),n&&!m?.sectionsLues.includes(D.id)&&r.jsx("div",{className:"cours-detail__action-lu",children:r.jsx("button",{className:"btn-primary",onClick:()=>A(D.id),children:" Marquer cette section comme lue"})}),r.jsxs("div",{className:"cours-detail__nav-sections",children:[D.ordre>1&&r.jsx("button",{className:"btn-secondary",onClick:()=>{const k=u.find(R=>R.ordre===D.ordre-1);k&&v(k.id)},children:" Section prcdente"}),D.ordre<u.length&&r.jsx("button",{className:"btn-primary",onClick:()=>{const k=u.find(R=>R.ordre===D.ordre+1);k&&v(k.id)},children:"Section suivante "})]})]}):r.jsxs("div",{className:"cours-detail__premium-gate",children:[r.jsx("span",{className:"cours-detail__premium-gate-icon","aria-hidden":"true",children:""}),r.jsx("h3",{children:"Contenu Premium"}),r.jsxs("p",{children:["Cette section ncessite un abonnement Premium PedaClic.",r.jsx("br",{}),"Accdez  tous les cours complets  partir de ",r.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),n?r.jsx("button",{className:"btn-primary",onClick:()=>t("/premium"),children:" Passer Premium"}):r.jsx("button",{className:"btn-primary",onClick:()=>t("/connexion"),children:"Se connecter pour accder"})]})]}):r.jsx("div",{className:"cours-detail__vide-section",role:"status",children:r.jsx("p",{children:"Slectionnez une section dans le menu de gauche pour commencer."})})})]})]})}const sf=()=>crypto.randomUUID();function EJ(e,t){const n={id:sf(),type:e,ordre:t,isPremium:!1};switch(e){case"texte":return{...n,type:"texte",contenu:""};case"image":return{...n,type:"image",url:"",alt:"",legende:""};case"video":return{...n,type:"video",urlYoutube:"",titre:"",description:""};case"encadre":return{...n,type:"encadre",variante:"definition",titre:"Dfinition",contenu:""};case"quiz":return{...n,type:"quiz",question:"",options:[{id:sf(),texte:"",estCorrecte:!0},{id:sf(),texte:"",estCorrecte:!1}],explication:""};case"exercice":return{...n,type:"exercice",enonce:"",correction:"",difficulte:"moyen"}}}function AJ({bloc:e,index:t,total:n,onUpdate:a,onDelete:l,onMoveUp:o,onMoveDown:u,isDragging:d,onDragStart:m,onDragOver:p,onDrop:h,onDragEnd:v,dragOverIndex:y}){const x=wy[e.type],_=y===t;function j(){switch(e.type){case"texte":return r.jsx("textarea",{className:"editor-bloc__textarea",placeholder:"Texte du paragraphe (Markdown : **gras**, *italique*, - liste)",value:e.contenu,onChange:S=>a({...e,contenu:S.target.value}),rows:4});case"image":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("input",{type:"url",placeholder:"URL de l'image (Firebase Storage ou lien externe)",value:e.url,onChange:S=>a({...e,url:S.target.value}),className:"editor-bloc__input"}),r.jsx("input",{type:"text",placeholder:"Texte alternatif (accessibilit)",value:e.alt,onChange:S=>a({...e,alt:S.target.value}),className:"editor-bloc__input"}),r.jsx("input",{type:"text",placeholder:"Lgende (optionnelle)",value:e.legende??"",onChange:S=>a({...e,legende:S.target.value}),className:"editor-bloc__input"}),e.url&&r.jsx("img",{src:e.url,alt:e.alt||"Aperu",className:"editor-bloc__image-preview",onError:S=>S.currentTarget.style.display="none"})]});case"video":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("input",{type:"url",placeholder:"URL YouTube (ex: https://www.youtube.com/watch?v=...)",value:e.urlYoutube,onChange:S=>a({...e,urlYoutube:S.target.value}),className:"editor-bloc__input"}),r.jsx("input",{type:"text",placeholder:"Titre de la vido",value:e.titre,onChange:S=>a({...e,titre:S.target.value}),className:"editor-bloc__input"}),r.jsx("input",{type:"text",placeholder:"Description courte (optionnelle)",value:e.description??"",onChange:S=>a({...e,description:S.target.value}),className:"editor-bloc__input"})]});case"encadre":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("select",{value:e.variante,onChange:S=>a({...e,variante:S.target.value}),className:"editor-bloc__select",children:Object.entries(YP).map(([S,w])=>r.jsxs("option",{value:S,children:[w.emoji," ",w.label]},S))}),r.jsx("input",{type:"text",placeholder:"Titre de l'encadr",value:e.titre,onChange:S=>a({...e,titre:S.target.value}),className:"editor-bloc__input"}),r.jsx("textarea",{placeholder:"Contenu de l'encadr",value:e.contenu,onChange:S=>a({...e,contenu:S.target.value}),className:"editor-bloc__textarea",rows:3})]});case"quiz":{const S=e;return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("input",{type:"text",placeholder:"Question",value:S.question,onChange:w=>a({...S,question:w.target.value}),className:"editor-bloc__input"}),r.jsxs("div",{className:"editor-bloc__quiz-options",children:[S.options.map((w,A)=>r.jsxs("div",{className:"editor-bloc__quiz-option",children:[r.jsx("input",{type:"radio",name:`quiz-correct-${e.id}`,checked:w.estCorrecte,onChange:()=>a({...S,options:S.options.map((C,E)=>({...C,estCorrecte:E===A}))}),title:"Marquer comme bonne rponse"}),r.jsx("input",{type:"text",placeholder:`Option ${A+1}`,value:w.texte,onChange:C=>a({...S,options:S.options.map((E,O)=>O===A?{...E,texte:C.target.value}:E)}),className:"editor-bloc__input"}),S.options.length>2&&r.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:()=>a({...S,options:S.options.filter((C,E)=>E!==A)}),title:"Supprimer cette option",children:""})]},w.id)),S.options.length<4&&r.jsx("button",{type:"button",className:"btn-link",onClick:()=>a({...S,options:[...S.options,{id:sf(),texte:"",estCorrecte:!1}]}),children:"+ Ajouter une option"})]}),r.jsx("input",{type:"text",placeholder:"Explication aprs rponse (optionnelle)",value:S.explication??"",onChange:w=>a({...S,explication:w.target.value}),className:"editor-bloc__input"})]})}case"exercice":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("textarea",{placeholder:"nonc de l'exercice",value:e.enonce,onChange:S=>a({...e,enonce:S.target.value}),className:"editor-bloc__textarea",rows:3}),r.jsx("textarea",{placeholder:"Correction (masque pour l'lve jusqu'au clic)",value:e.correction,onChange:S=>a({...e,correction:S.target.value}),className:"editor-bloc__textarea editor-bloc__textarea--correction",rows:3}),r.jsxs("div",{className:"editor-bloc__row",children:[r.jsxs("select",{value:e.difficulte,onChange:S=>a({...e,difficulte:S.target.value}),className:"editor-bloc__select",children:[r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]}),r.jsx("input",{type:"number",placeholder:"Points (opt.)",value:e.points??"",onChange:S=>a({...e,points:Number(S.target.value)||void 0}),className:"editor-bloc__input editor-bloc__input--sm",min:1})]})]});default:return null}}return r.jsxs("div",{className:["editor-bloc",d?"editor-bloc--dragging":"",_?"editor-bloc--drag-over":""].join(" "),draggable:!0,onDragStart:S=>m(S,t),onDragOver:S=>p(S,t),onDrop:S=>h(S,t),onDragEnd:v,children:[r.jsxs("div",{className:"editor-bloc__header",children:[r.jsx("span",{className:"editor-bloc__drag-handle",title:"Dplacer","aria-hidden":"true",children:""}),r.jsxs("span",{className:"editor-bloc__type-label",children:[x.emoji," ",x.label]}),r.jsxs("label",{className:"editor-bloc__premium-toggle",title:"Rserver aux abonns Premium",children:[r.jsx("input",{type:"checkbox",checked:e.isPremium,onChange:S=>a({...e,isPremium:S.target.checked})}),r.jsx("span",{children:" Premium"})]}),r.jsxs("div",{className:"editor-bloc__actions",children:[r.jsx("button",{type:"button",className:"btn-icon",onClick:o,disabled:t===0,title:"Monter","aria-label":"Monter ce bloc",children:""}),r.jsx("button",{type:"button",className:"btn-icon",onClick:u,disabled:t===n-1,title:"Descendre","aria-label":"Descendre ce bloc",children:""}),r.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:l,title:"Supprimer ce bloc","aria-label":"Supprimer ce bloc",children:""})]})]}),r.jsx("div",{className:"editor-bloc__form",children:j()})]})}function Xd(){const{coursId:e}=Hn(),t=ot(),{currentUser:n}=it(),a=!!e,{matieres:l}=lp(),[o,u]=g.useState({titre:"",description:"",matiere:"Mathmatiques",niveau:"3me",classe:"",isPremium:!1,statut:"brouillon",couvertureUrl:"",dureeEstimee:0,objectifs:[""],prerequis:"",tags:[]}),[d,m]=g.useState([]),[p,h]=g.useState(null),[v,y]=g.useState([]),[x,_]=g.useState(""),j=g.useRef(null),[S,w]=g.useState(null),A=g.useRef(null),[C,E]=g.useState(null),[O,D]=g.useState(null),[T,k]=g.useState(!1),[R,L]=g.useState(!1),[Q,$]=g.useState(null),[F,Y]=g.useState(null),[M,q]=g.useState("infos");g.useEffect(()=>{a&&e&&Z(e)},[e]);async function Z(J){k(!0);try{const[fe,Se]=await Promise.all([HP(J),QP(J)]);fe&&u({titre:fe.titre,description:fe.description,matiere:fe.matiere,niveau:fe.niveau,classe:fe.classe??"",isPremium:fe.isPremium,statut:fe.statut,couvertureUrl:fe.couvertureUrl??"",dureeEstimee:fe.dureeEstimee,objectifs:fe.objectifs.length>0?fe.objectifs:[""],prerequis:fe.prerequis??"",tags:fe.tags}),m(Se),Se.length>0&&(h(Se[0].id),y(Se[0].blocs),_(Se[0].titre))}catch{$("Erreur de chargement du cours.")}finally{k(!1)}}g.useEffect(()=>{if(!p)return;const J=d.find(fe=>fe.id===p);J&&(y([...J.blocs].sort((fe,Se)=>fe.ordre-Se.ordre)),_(J.titre))},[p]);const H=(J,fe)=>u(Se=>({...Se,[J]:fe})),B=(J,fe)=>{const Se=[...o.objectifs];Se[J]=fe,H("objectifs",Se)},I=()=>H("objectifs",[...o.objectifs,""]),pe=J=>H("objectifs",o.objectifs.filter((fe,Se)=>Se!==J)),[re,de]=g.useState(""),ge=()=>{const J=re.trim();J&&!o.tags.includes(J)&&H("tags",[...o.tags,J]),de("")},ye=J=>H("tags",o.tags.filter(fe=>fe!==J));async function V(J=!1){if(n){if(!o.titre.trim()){$("Le titre du cours est obligatoire.");return}L(!0),$(null);try{const fe={...o,objectifs:o.objectifs.filter(Se=>Se.trim()),statut:J?"publie":o.statut};if(a&&e)await iJ(e,fe),J&&await Sy(e),he(J?" Cours publi !":" Cours sauvegard.");else{const Se=n.displayName??"Professeur",lt=await aJ(n.uid,Se,fe);J&&await Sy(lt),he(" Cours cr ! Ajoutez maintenant vos sections."),t(`/prof/cours/${lt}/modifier`)}}catch(fe){console.error("[CoursEditorPage] Erreur sauvegarde :",fe),$("Erreur lors de la sauvegarde. Ressayez.")}finally{L(!1)}}}function he(J){Y(J),setTimeout(()=>Y(null),4e3)}async function Pe(){if(!e){$("Sauvegardez d'abord le cours pour ajouter des sections.");return}const J=d.length+1,fe=`Section ${J}`;try{const Se=await oJ(e,{titre:fe,ordre:J,blocs:[],dureeEstimee:0,estGratuite:J===1}),lt=Me.now(),qr={id:Se,coursId:e,titre:fe,ordre:J,blocs:[],dureeEstimee:0,estGratuite:J===1,createdAt:lt,updatedAt:lt};m(Gt=>[...Gt,qr]),h(Se),y([]),_(fe)}catch{$("Erreur lors de la cration de la section.")}}async function le(J){if(e&&confirm("Supprimer cette section et tous ses blocs ?"))try{await cJ(J,e);const fe=d.filter(Se=>Se.id!==J).map((Se,lt)=>({...Se,ordre:lt+1}));m(fe),p===J&&h(fe[0]?.id??null)}catch{$("Erreur lors de la suppression.")}}async function W(){if(p)try{await $A(p,{titre:x}),m(J=>J.map(fe=>fe.id===p?{...fe,titre:x}:fe))}catch{$("Erreur lors de la mise  jour du titre.")}}function G(J,fe){j.current=fe,J.dataTransfer.effectAllowed="move"}function ce(J,fe){J.preventDefault(),J.dataTransfer.dropEffect="move",w(fe)}async function X(J,fe){J.preventDefault(),w(null);const Se=j.current;if(Se===null||Se===fe)return;const lt=[...d],[qr]=lt.splice(Se,1);lt.splice(fe,0,qr);const Gt=lt.map((jr,Yi)=>({...jr,ordre:Yi+1}));m(Gt);try{await uJ(Gt.map(jr=>({id:jr.id,ordre:jr.ordre})))}catch{$("Erreur lors du rordonnancement. Rechargez la page.")}j.current=null}function je(J){const fe=EJ(J,v.length),Se=[...v,fe];y(Se),Zt(Se)}function Ue(J,fe){const Se=v.map((lt,qr)=>qr===J?fe:lt);y(Se),Zt(Se)}function Ge(J){const fe=v.filter((Se,lt)=>lt!==J);y(fe),Zt(fe)}function Ye(J){if(J===0)return;const fe=[...v];[fe[J-1],fe[J]]=[fe[J],fe[J-1]],y(fe),Zt(fe)}function $t(J){if(J===v.length-1)return;const fe=[...v];[fe[J],fe[J+1]]=[fe[J+1],fe[J]],y(fe),Zt(fe)}const Er=g.useRef(null);function Zt(J){p&&(Er.current&&clearTimeout(Er.current),Er.current=setTimeout(async()=>{try{await dJ(p,J),m(fe=>fe.map(Se=>Se.id===p?{...Se,blocs:J}:Se))}catch(fe){console.error("[CoursEditorPage] Erreur sauvegarde blocs :",fe)}},1500))}function kn(J,fe){A.current=fe,D(fe),J.dataTransfer.effectAllowed="move"}function me(J,fe){J.preventDefault(),J.dataTransfer.dropEffect="move",E(fe)}function ze(J,fe){J.preventDefault(),E(null),D(null);const Se=A.current;if(Se===null||Se===fe)return;const lt=[...v],[qr]=lt.splice(Se,1);lt.splice(fe,0,qr);const Gt=lt.map((jr,Yi)=>({...jr,ordre:Yi}));y(Gt),Zt(Gt),A.current=null}function Re(){E(null),D(null),A.current=null}return T?r.jsxs("div",{className:"cours-editor__loading","aria-busy":"true",children:[r.jsx("div",{className:"spinner spinner--blue"}),r.jsx("p",{children:"Chargement de l'diteur..."})]}):r.jsxs("div",{className:"cours-editor",children:[r.jsxs("header",{className:"cours-editor__header",children:[r.jsxs("p",{className:"cours-editor__breadcrumb",children:[r.jsx("button",{className:"btn-link",onClick:()=>t("/prof/cours"),children:" Mes cours"})," / ",a?"Modifier le cours":"Nouveau cours"]}),r.jsxs("div",{className:"cours-editor__header-actions",children:[r.jsx("h1",{className:"cours-editor__titre",children:a?" Modifier le cours":" Nouveau cours"}),r.jsxs("div",{className:"cours-editor__btn-group",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>t("/prof/cours"),disabled:R,children:"Annuler"}),r.jsx("button",{className:"btn-secondary",onClick:()=>V(!1),disabled:R,children:R?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Sauvegarde..."]}):" Sauvegarder"}),r.jsx("button",{className:"btn-primary",onClick:()=>V(!0),disabled:R||o.statut==="publie",children:o.statut==="publie"?" Publi":" Publier"})]})]}),Q&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",Q]}),F&&r.jsx("div",{className:"success-banner",role:"status",children:F})]}),r.jsxs("div",{className:"cours-editor__tabs",role:"tablist",children:[r.jsx("button",{className:`cours-editor__tab ${M==="infos"?"cours-editor__tab--active":""}`,onClick:()=>q("infos"),role:"tab","aria-selected":M==="infos",children:" Informations du cours"}),r.jsxs("button",{className:`cours-editor__tab ${M==="sections"?"cours-editor__tab--active":""}`,onClick:()=>q("sections"),role:"tab","aria-selected":M==="sections",disabled:!a&&!e,children:[" Sections et contenu ",d.length>0&&`(${d.length})`]})]}),M==="infos"&&r.jsxs("section",{className:"cours-editor__form","aria-label":"Informations du cours",children:[r.jsxs("div",{className:"cours-editor__card",children:[r.jsx("h2",{className:"cours-editor__card-titre",children:" Informations gnrales"}),r.jsxs("div",{className:"cours-editor__form-grid",children:[r.jsxs("div",{className:"cours-editor__field cours-editor__field--full",children:[r.jsx("label",{htmlFor:"titre",children:"Titre du cours *"}),r.jsx("input",{id:"titre",type:"text",value:o.titre,onChange:J=>H("titre",J.target.value),placeholder:"Ex : Les fonctions affines  Terminale S",className:"cours-editor__input",required:!0})]}),r.jsxs("div",{className:"cours-editor__field cours-editor__field--full",children:[r.jsx("label",{htmlFor:"description",children:"Description *"}),r.jsx("textarea",{id:"description",value:o.description,onChange:J=>H("description",J.target.value),placeholder:"Description courte affiche dans le catalogue",className:"cours-editor__textarea",rows:3})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"matiere",children:"Matire *"}),r.jsx("select",{id:"matiere",value:o.matiere,onChange:J=>H("matiere",J.target.value),className:"cours-editor__select",children:l.map(J=>r.jsx("option",{value:J.valeur,children:J.label},J.valeur))})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),r.jsx("select",{id:"niveau",value:o.niveau,onChange:J=>H("niveau",J.target.value),className:"cours-editor__select",children:op.map(J=>r.jsx("option",{value:J,children:J},J))})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"classe",children:"Classe (optionnelle)"}),r.jsx("input",{id:"classe",type:"text",value:o.classe??"",onChange:J=>H("classe",J.target.value),placeholder:"Ex : 3me A, TS, L2",className:"cours-editor__input"})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"couverture",children:"Image de couverture (URL)"}),r.jsx("input",{id:"couverture",type:"url",value:o.couvertureUrl??"",onChange:J=>H("couvertureUrl",J.target.value),placeholder:"https://...",className:"cours-editor__input"})]}),r.jsx("div",{className:"cours-editor__field cours-editor__field--full",children:r.jsxs("label",{className:"cours-editor__toggle-label",children:[r.jsx("input",{type:"checkbox",checked:o.isPremium,onChange:J=>H("isPremium",J.target.checked)}),r.jsx("span",{children:" Cours Premium  Les sections (sauf la 1re) ncessitent un abonnement"})]})})]})]}),r.jsxs("div",{className:"cours-editor__card",children:[r.jsx("h2",{className:"cours-editor__card-titre",children:" Objectifs pdagogiques"}),o.objectifs.map((J,fe)=>r.jsxs("div",{className:"cours-editor__objectif-row",children:[r.jsx("input",{type:"text",value:J,onChange:Se=>B(fe,Se.target.value),placeholder:`Objectif ${fe+1} (ex : Savoir calculer une drive)`,className:"cours-editor__input"}),o.objectifs.length>1&&r.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:()=>pe(fe),title:"Supprimer cet objectif",children:""})]},fe)),r.jsx("button",{type:"button",className:"btn-link",onClick:I,children:"+ Ajouter un objectif"})]}),r.jsxs("div",{className:"cours-editor__card",children:[r.jsx("h2",{className:"cours-editor__card-titre",children:" Prrequis et tags"}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"prerequis",children:"Prrequis conseills"}),r.jsx("input",{id:"prerequis",type:"text",value:o.prerequis??"",onChange:J=>H("prerequis",J.target.value),placeholder:"Ex : Matriser les quations du 2nd degr",className:"cours-editor__input"})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{children:"Tags (aide  la recherche)"}),r.jsxs("div",{className:"cours-editor__tags-wrapper",children:[o.tags.map(J=>r.jsxs("span",{className:"cours-editor__tag",children:[J,r.jsx("button",{type:"button",onClick:()=>ye(J),"aria-label":`Supprimer le tag ${J}`,children:""})]},J)),r.jsxs("div",{className:"cours-editor__tag-input-row",children:[r.jsx("input",{type:"text",value:re,onChange:J=>de(J.target.value),onKeyDown:J=>J.key==="Enter"&&(J.preventDefault(),ge()),placeholder:"Ajouter un tag...",className:"cours-editor__input cours-editor__input--sm"}),r.jsx("button",{type:"button",className:"btn-secondary btn--sm",onClick:ge,children:"+ Tag"})]})]})]})]})]}),M==="sections"&&r.jsx("section",{className:"cours-editor__sections","aria-label":"diteur de sections",children:a?r.jsxs("div",{className:"cours-editor__sections-layout",children:[r.jsxs("aside",{className:"cours-editor__sections-sidebar",children:[r.jsxs("div",{className:"cours-editor__sections-sidebar-header",children:[r.jsx("h2",{children:" Sections"}),r.jsx("button",{className:"btn-primary btn--sm",onClick:Pe,children:"+ Ajouter"})]}),d.length===0?r.jsx("p",{className:"cours-editor__sections-empty-hint",children:'Aucune section. Cliquez sur "+ Ajouter" pour commencer.'}):r.jsx("ol",{className:"cours-editor__sections-liste",children:d.map((J,fe)=>r.jsxs("li",{className:["cours-editor__section-item",J.id===p?"cours-editor__section-item--active":"",S===fe?"cours-editor__section-item--drag-over":""].join(" "),draggable:!0,onDragStart:Se=>G(Se,fe),onDragOver:Se=>ce(Se,fe),onDrop:Se=>X(Se,fe),onDragEnd:()=>w(null),children:[r.jsx("span",{className:"cours-editor__section-drag","aria-hidden":"true",children:""}),r.jsxs("button",{className:"cours-editor__section-btn",onClick:()=>h(J.id),"aria-current":J.id===p?"true":void 0,children:[r.jsx("span",{className:"cours-editor__section-ordre",children:J.ordre}),r.jsxs("span",{className:"cours-editor__section-nom",children:[J.titre,J.estGratuite&&r.jsx("span",{className:"cours-editor__section-gratuite",title:"Section gratuite",children:"G"})]}),r.jsxs("span",{className:"cours-editor__section-blocs-count",children:[J.blocs.length," bloc",J.blocs.length>1?"s":""]})]}),r.jsx("button",{className:"btn-icon btn-icon--danger btn-icon--xs",onClick:()=>le(J.id),title:"Supprimer cette section","aria-label":`Supprimer la section ${J.titre}`,children:""})]},J.id))})]}),p?r.jsxs("div",{className:"cours-editor__section-content",children:[r.jsxs("div",{className:"cours-editor__section-titre-row",children:[r.jsx("input",{type:"text",value:x,onChange:J=>_(J.target.value),onBlur:W,className:"cours-editor__section-titre-input",placeholder:"Titre de la section","aria-label":"Titre de la section"}),r.jsxs("label",{className:"cours-editor__toggle-label",children:[r.jsx("input",{type:"checkbox",checked:d.find(J=>J.id===p)?.estGratuite??!1,onChange:async J=>{try{await $A(p,{estGratuite:J.target.checked}),m(fe=>fe.map(Se=>Se.id===p?{...Se,estGratuite:J.target.checked}:Se))}catch{}}}),r.jsx("span",{children:"Gratuite"})]})]}),r.jsxs("div",{className:"cours-editor__palette","aria-label":"Ajouter un bloc",children:[r.jsx("span",{className:"cours-editor__palette-label",children:"Ajouter un bloc :"}),Object.keys(wy).map(J=>{const fe=wy[J];return r.jsxs("button",{className:"cours-editor__palette-btn",onClick:()=>je(J),title:fe.description,children:[fe.emoji," ",fe.label]},J)})]}),v.length===0?r.jsxs("div",{className:"cours-editor__blocs-empty",children:[r.jsx("p",{children:" Aucun bloc dans cette section."}),r.jsx("p",{children:"Utilisez la palette ci-dessus pour ajouter du contenu."})]}):r.jsx("div",{className:"cours-editor__blocs-liste","aria-label":"Blocs de la section",children:v.map((J,fe)=>r.jsx(AJ,{bloc:J,index:fe,total:v.length,onUpdate:Se=>Ue(fe,Se),onDelete:()=>Ge(fe),onMoveUp:()=>Ye(fe),onMoveDown:()=>$t(fe),isDragging:O===fe,onDragStart:kn,onDragOver:me,onDrop:ze,onDragEnd:Re,dragOverIndex:C},J.id))})]}):r.jsx("div",{className:"cours-editor__section-content-empty",children:r.jsx("p",{children:"Slectionnez ou crez une section pour commencer  diter."})})]}):r.jsxs("div",{className:"cours-editor__sections-empty",children:[r.jsx("p",{children:"Sauvegardez d'abord les informations du cours pour ajouter des sections."}),r.jsx("button",{className:"btn-primary",onClick:()=>q("infos"),children:" Revenir aux informations"})]})})]})}function zJ({cours:e,onModifier:t,onPublier:n,onArchiver:a,onSupprimer:l,onVoirStats:o}){const u=mJ[e.statut],d=pj.find(m=>m.valeur===e.niveau)?.label??e.niveau;return r.jsxs("article",{className:"prof-cours-card",children:[r.jsxs("div",{className:"prof-cours-card__header",children:[r.jsxs("div",{className:"prof-cours-card__header-left",children:[r.jsx("span",{className:"prof-cours-card__statut",style:{color:u.couleur,background:u.bg},children:u.label}),e.isPremium&&r.jsx("span",{className:"badge badge--premium",children:" Premium"})]}),r.jsxs("div",{className:"prof-cours-card__actions",children:[r.jsx("button",{className:"btn-icon",onClick:t,title:"Modifier","aria-label":`Modifier ${e.titre}`,children:""}),e.statut==="brouillon"&&r.jsx("button",{className:"btn-icon btn-icon--success",onClick:n,title:"Publier","aria-label":`Publier ${e.titre}`,children:""}),e.statut==="publie"&&r.jsx("button",{className:"btn-icon",onClick:a,title:"Archiver","aria-label":`Archiver ${e.titre}`,children:""}),r.jsx("button",{className:"btn-icon btn-icon--info",onClick:o,title:"Voir les statistiques","aria-label":`Statistiques de ${e.titre}`,children:""}),r.jsx("button",{className:"btn-icon btn-icon--danger",onClick:l,title:"Supprimer","aria-label":`Supprimer ${e.titre}`,children:""})]})]}),r.jsxs("div",{className:"prof-cours-card__body",children:[r.jsx("h3",{className:"prof-cours-card__titre",children:e.titre}),r.jsx("p",{className:"prof-cours-card__description",children:e.description}),r.jsxs("div",{className:"prof-cours-card__meta",children:[r.jsx("span",{className:"badge badge--matiere",children:e.matiere}),r.jsx("span",{className:"badge badge--niveau",children:d}),e.classe&&r.jsx("span",{className:"badge badge--classe",children:e.classe})]})]}),r.jsxs("div",{className:"prof-cours-card__footer",children:[r.jsxs("span",{title:"Sections",children:[" ",e.nombreSections," section",e.nombreSections>1?"s":""]}),r.jsxs("span",{title:"Dure estime",children:[" ",e.dureeEstimee," min"]}),r.jsxs("span",{title:"lves inscrits",children:[" ",e.nombreInscrits," lve",e.nombreInscrits>1?"s":""]})]})]})}function OJ({cours:e,onClose:t}){const[n,a]=g.useState(null),[l,o]=g.useState(!0);g.useEffect(()=>{u()},[e.id]);async function u(){try{const d=await hJ(e.id);a(yJ(d))}catch(d){console.error("[StatsModal] Erreur :",d)}finally{o(!1)}}return r.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":`Statistiques du cours : ${e.titre}`,onClick:d=>{d.target===d.currentTarget&&t()},children:r.jsxs("div",{className:"modal-content",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:[" Statistiques  ",e.titre]}),r.jsx("button",{className:"btn-icon",onClick:t,"aria-label":"Fermer",children:""})]}),r.jsx("div",{className:"modal-body",children:l?r.jsxs("div",{className:"modal-loading",children:[r.jsx("div",{className:"spinner spinner--blue"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):n?r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stats-card",children:[r.jsx("span",{className:"stats-card__val",children:n.nombreInscrits}),r.jsx("span",{className:"stats-card__label",children:"lves inscrits"})]}),r.jsxs("div",{className:"stats-card stats-card--success",children:[r.jsx("span",{className:"stats-card__val",children:n.nombreTermines}),r.jsx("span",{className:"stats-card__label",children:"Cours termins"})]}),r.jsxs("div",{className:"stats-card stats-card--info",children:[r.jsxs("span",{className:"stats-card__val",children:[n.tauxCompletion,"%"]}),r.jsx("span",{className:"stats-card__label",children:"Taux de compltion"})]}),r.jsxs("div",{className:"stats-card",children:[r.jsxs("span",{className:"stats-card__val",children:[n.progressionMoyenne,"%"]}),r.jsx("span",{className:"stats-card__label",children:"Progression moyenne"})]}),r.jsxs("div",{className:"stats-card stats-card--primary",children:[r.jsxs("span",{className:"stats-card__val",children:[n.scoreMoyen,"%"]}),r.jsx("span",{className:"stats-card__label",children:"Score moyen aux quiz"})]}),r.jsxs("div",{className:"stats-progress-bar-wrapper",children:[r.jsx("label",{children:"Progression globale des lves"}),r.jsx("div",{className:"progression-bar",children:r.jsx("div",{className:"progression-bar__fill",style:{width:`${n.progressionMoyenne}%`}})})]})]}):r.jsx("p",{className:"modal-vide",children:"Aucune donne disponible pour ce cours."})})]})})}function GA(){const e=ot(),{currentUser:t}=it(),[n,a]=g.useState([]),[l,o]=g.useState([]),[u,d]=g.useState(!0),[m,p]=g.useState(null),[h,v]=g.useState(null),[y,x]=g.useState(""),[_,j]=g.useState(null);g.useEffect(()=>{t&&S()},[t]);async function S(){if(t){d(!0),p(null);try{const D=await nJ(t.uid);a(D),o(D)}catch{p("Impossible de charger vos cours.")}finally{d(!1)}}}function w(D){x(D),o(D?n.filter(T=>T.statut===D):n)}async function A(D){if(confirm("Publier ce cours dans le catalogue ?"))try{await Sy(D),a(T=>T.map(k=>k.id===D?{...k,statut:"publie"}:k)),o(T=>T.map(k=>k.id===D?{...k,statut:"publie"}:k)),O(" Cours publi dans le catalogue !")}catch{p("Erreur lors de la publication.")}}async function C(D){if(confirm("Archiver ce cours ? Il ne sera plus visible dans le catalogue."))try{await sJ(D),a(T=>T.map(k=>k.id===D?{...k,statut:"archive"}:k)),o(T=>T.map(k=>k.id===D?{...k,statut:"archive"}:k)),O(" Cours archiv.")}catch{p("Erreur lors de l'archivage.")}}async function E(D,T){if(confirm(`Supprimer dfinitivement le cours "${T}" et tout son contenu ? Cette action est irrversible.`))try{await lJ(D);const k=n.filter(R=>R.id!==D);a(k),o(k.filter(R=>!y||R.statut===y)),O(" Cours supprim.")}catch{p("Erreur lors de la suppression.")}}function O(D){v(D),setTimeout(()=>v(null),4e3)}return r.jsxs("div",{className:"prof-cours-page",children:[r.jsxs("header",{className:"prof-cours-page__header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"prof-cours-page__titre",children:" Mes cours en ligne"}),r.jsx("p",{className:"prof-cours-page__sous-titre",children:"Crez, grez et publiez vos cours pour vos lves."})]}),r.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/cours/nouveau"),children:" Crer un cours"})]}),m&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",m]}),h&&r.jsx("div",{className:"success-banner",role:"status",children:h}),!u&&n.length>0&&r.jsxs("div",{className:"prof-cours-page__stats","aria-label":"Rsum de mes cours",children:[r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",children:n.length}),r.jsx("span",{children:"Total"})]}),r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#16a34a"},children:n.filter(D=>D.statut==="publie").length}),r.jsx("span",{children:"Publis"})]}),r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#ca8a04"},children:n.filter(D=>D.statut==="brouillon").length}),r.jsx("span",{children:"Brouillons"})]}),r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#2563eb"},children:n.reduce((D,T)=>D+T.nombreInscrits,0)}),r.jsx("span",{children:"lves inscrits"})]})]}),!u&&n.length>0&&r.jsx("div",{className:"prof-cours-page__filtres",role:"tablist","aria-label":"Filtrer par statut",children:[{val:"",label:`Tous (${n.length})`},{val:"publie",label:`Publis (${n.filter(D=>D.statut==="publie").length})`},{val:"brouillon",label:`Brouillons (${n.filter(D=>D.statut==="brouillon").length})`},{val:"archive",label:`Archivs (${n.filter(D=>D.statut==="archive").length})`}].map(D=>r.jsx("button",{className:`prof-cours-page__filtre-btn ${y===D.val?"prof-cours-page__filtre-btn--active":""}`,onClick:()=>w(D.val),role:"tab","aria-selected":y===D.val,children:D.label},D.val))}),r.jsxs("main",{className:"prof-cours-page__grille",children:[u&&r.jsx("div",{className:"prof-cours-page__grille-inner","aria-busy":"true",children:[1,2,3].map(D=>r.jsxs("div",{className:"prof-cours-card prof-cours-card--skeleton",children:[r.jsx("div",{className:"skeleton",style:{height:20,marginBottom:12}}),r.jsx("div",{className:"skeleton",style:{height:16,width:"60%",marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:14,width:"80%"}})]},D))}),!u&&l.length>0&&r.jsx("div",{className:"prof-cours-page__grille-inner",children:l.map(D=>r.jsx(zJ,{cours:D,onModifier:()=>e(`/prof/cours/${D.id}/modifier`),onPublier:()=>A(D.id),onArchiver:()=>C(D.id),onSupprimer:()=>E(D.id,D.titre),onVoirStats:()=>j(D)},D.id))}),!u&&l.length===0&&r.jsxs("div",{className:"prof-cours-page__vide",role:"status",children:[r.jsx("span",{"aria-hidden":"true",children:""}),r.jsx("h3",{children:n.length===0?"Vous n'avez pas encore cr de cours.":"Aucun cours dans cette catgorie."}),n.length===0&&r.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/cours/nouveau"),children:" Crer mon premier cours"})]})]}),_&&r.jsx(OJ,{cours:_,onClose:()=>j(null)})]})}const DJ=()=>{const[e,t]=g.useState(null),[n,a]=g.useState(!1),[l,o]=g.useState(!1),[u,d]=g.useState(!1),m=()=>/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream,p=()=>window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0,h=g.useCallback(()=>{try{return parseInt(localStorage.getItem("pedaclic_visit_count")||"0",10)}catch{return 0}},[]),v=g.useCallback(()=>{try{const j=h()+1;localStorage.setItem("pedaclic_visit_count",j.toString())}catch{}},[h]),y=()=>{try{return localStorage.getItem("pedaclic_install_dismissed")==="true"}catch{return!1}};g.useEffect(()=>{if(p()||y())return;v();const j=w=>{w.preventDefault(),t(w),h()>=2&&a(!0)};window.addEventListener("beforeinstallprompt",j),m()&&h()>=2&&(o(!0),a(!0));const S=()=>{a(!1),t(null)};return window.addEventListener("appinstalled",S),()=>{window.removeEventListener("beforeinstallprompt",j),window.removeEventListener("appinstalled",S)}},[h,v]);const x=async()=>{if(e){d(!0);try{await e.prompt();const{outcome:j}=await e.userChoice;j==="accepted"&&a(!1)}catch(j){console.error("Erreur installation PWA:",j)}finally{d(!1),t(null)}}},_=()=>{a(!1);try{localStorage.setItem("pedaclic_install_dismissed","true")}catch{}};return n?r.jsx("div",{className:"install-prompt",children:r.jsxs("div",{className:"install-prompt__container",children:[r.jsxs("div",{className:"install-prompt__content",children:[r.jsx("div",{className:"install-prompt__icon",children:r.jsx(Xq,{size:24})}),r.jsxs("div",{className:"install-prompt__text",children:[r.jsx("h3",{className:"install-prompt__title",children:"Installer PedaClic"}),r.jsx("p",{className:"install-prompt__description",children:l?"Accde  tes cours mme sans connexion !":"Installe l'app pour un accs rapide, mme hors-ligne !"})]})]}),r.jsxs("div",{className:"install-prompt__actions",children:[!l&&e&&r.jsx("button",{className:"install-prompt__btn install-prompt__btn--primary",onClick:x,disabled:u,children:u?"Installation...":"Installer"}),l&&r.jsx("div",{className:"install-prompt__ios",children:r.jsxs("p",{className:"install-prompt__ios-text",children:["Appuie sur ",r.jsx(Wq,{size:16,className:"install-prompt__ios-icon"})," puis",r.jsxs("span",{className:"install-prompt__ios-highlight",children:[r.jsx(yc,{size:14})," Sur l'cran d'accueil"]})]})}),r.jsx("button",{className:"install-prompt__btn install-prompt__btn--close",onClick:_,"aria-label":"Fermer la bannire d'installation",children:r.jsx(qi,{size:20})})]})]})}):null};function MJ(){const[e,t]=g.useState(typeof navigator<"u"?navigator.onLine:!0);return g.useEffect(()=>{const n=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",n),window.addEventListener("offline",a),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}},[]),e}const PJ=()=>{const e=MJ(),[t,n]=g.useState(!1),[a,l]=g.useState(!1);return g.useEffect(()=>{if(!e)l(!0),n(!1);else if(a){n(!0);const o=setTimeout(()=>{n(!1),l(!1)},3e3);return()=>clearTimeout(o)}},[e,a]),e&&!t?null:r.jsx("div",{className:`network-indicator ${e?"network-indicator--online":"network-indicator--offline"}`,children:r.jsx("div",{className:"network-indicator__content",children:e?r.jsxs(r.Fragment,{children:[r.jsx(Zq,{size:14}),r.jsx("span",{children:"Connexion rtablie"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Jq,{size:14}),r.jsx("span",{children:"Pas de connexion  mode hors-ligne"})]})})})},kJ=()=>r.jsxs(cR,{children:[r.jsx(DJ,{}),r.jsx(PJ,{}),r.jsxs(cq,{children:[r.jsx(Fe,{path:"/",element:r.jsx(vt,{children:r.jsx(fR,{})})}),r.jsx(Fe,{path:"/disciplines",element:r.jsx(vt,{children:r.jsx(hR,{})})}),r.jsx(Fe,{path:"/disciplines/:id",element:r.jsx(vt,{children:r.jsx(xR,{})})}),r.jsx(Fe,{path:"/premium",element:r.jsx(vt,{children:r.jsx(jR,{})})}),r.jsx(Fe,{path:"/cours",element:r.jsx(BA,{})}),r.jsx(Fe,{path:"/cours/:coursId",element:r.jsx(FA,{})}),r.jsx(Fe,{path:"/prof/cours",element:r.jsx(GA,{})}),r.jsx(Fe,{path:"/prof/cours/nouveau",element:r.jsx(Xd,{})}),r.jsx(Fe,{path:"/prof/cours/:coursId/modifier",element:r.jsx(Xd,{})}),r.jsx(Fe,{path:"/connexion",element:r.jsx(mR,{})}),r.jsx(Fe,{path:"/inscription",element:r.jsx(pR,{})}),r.jsx(Fe,{path:"/admin",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(_R,{})})})}),r.jsx(Fe,{path:"/admin/disciplines",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(SR,{})})})}),r.jsx(Fe,{path:"/admin/chapitres",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(wR,{})})})}),r.jsx(Fe,{path:"/admin/ressources",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(CR,{})})})}),r.jsx(Fe,{path:"/admin/quiz",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(MR,{})})})}),r.jsx(Fe,{path:"/admin/quiz/nouveau",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(z1,{})})})}),r.jsx(Fe,{path:"/admin/quiz/modifier/:quizId",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(z1,{})})})}),r.jsx(Fe,{path:"/admin/quiz-avance",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(s3,{})})})}),r.jsx(Fe,{path:"/admin/utilisateurs",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx($R,{})})})}),r.jsx(Fe,{path:"/admin/resultats",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(BR,{})})})}),r.jsx(Fe,{path:"/admin/settings",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(UR,{})})})}),r.jsx(Fe,{path:"/admin/ebooks",element:r.jsx(jn,{children:r.jsx(_n,{children:r.jsx(eJ,{})})})}),r.jsx(Fe,{path:"/admin/premium",element:r.jsx(c1,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),r.jsx(Fe,{path:"/quizzes",element:r.jsx(wc,{allowedRoles:["eleve","prof","admin"],children:r.jsx(vt,{children:r.jsx(WX,{})})})}),r.jsx(Fe,{path:"/quiz/:quizId",element:r.jsx(vt,{children:r.jsx(E3,{})})}),r.jsx(Fe,{path:"/quiz-avance/:quizId",element:r.jsx(vt,{children:r.jsx(m3,{})})}),r.jsx(Fe,{path:"/quiz-gratuits",element:r.jsx(vt,{children:r.jsx(oW,{})})}),r.jsx(Fe,{path:"/eleve/dashboard",element:r.jsx(vt,{children:r.jsx(FX,{})})}),r.jsx(Fe,{path:"/eleve/suivi",element:r.jsx(vt,{children:r.jsx(GX,{})})}),r.jsx(Fe,{path:"/prof/dashboard",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(YX,{})})})}),r.jsx(Fe,{path:"/prof/cahiers",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(zW,{})})})}),r.jsx(Fe,{path:"/prof/cahiers/:cahierId",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx($W,{})})})}),r.jsx(Fe,{path:"/prof/cahiers/:cahierId/nouvelle",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(IA,{})})})}),r.jsx(Fe,{path:"/prof/cahiers/:cahierId/modifier/:entreeId",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(IA,{})})})}),"        ",r.jsx(Fe,{path:"/prof/sequences",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(aZ,{})})})}),"        ",r.jsx(Fe,{path:"/prof/sequences/nouvelle",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(LA,{})})})}),"        ",r.jsx(Fe,{path:"/prof/sequences/:id",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(xZ,{})})})}),"        ",r.jsx(Fe,{path:"/prof/sequences/:id/modifier",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(LA,{})})})}),r.jsx(Fe,{path:"/eleve/cahiers/:cahierId",element:r.jsx(wc,{allowedRoles:["eleve","admin"],children:r.jsx(vt,{children:r.jsx(EZ,{})})})}),r.jsx(Fe,{path:"/parent/dashboard",element:r.jsx(wc,{allowedRoles:["parent","admin"],children:r.jsx(vt,{children:r.jsx(AZ,{})})})}),r.jsx(Fe,{path:"/generateur",element:r.jsx(vt,{children:r.jsx(IZ,{})})}),r.jsx(Fe,{path:"/ebooks",element:r.jsx(vt,{children:r.jsx(JZ,{})})}),r.jsx(Fe,{path:"/cours",element:r.jsx(vt,{children:r.jsx(BA,{})})}),r.jsx(Fe,{path:"/cours/:coursId",element:r.jsx(vt,{children:r.jsx(FA,{})})}),r.jsx(Fe,{path:"/prof/cours",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(GA,{})})})}),r.jsx(Fe,{path:"/prof/cours/nouveau",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(Xd,{})})})}),r.jsx(Fe,{path:"/prof/cours/:coursId/modifier",element:r.jsx(Nn,{children:r.jsx(vt,{children:r.jsx(Xd,{})})})}),r.jsx(Fe,{path:"*",element:r.jsx(c1,{to:"/",replace:!0})})]})]}),KP=document.getElementById("root");if(!KP)throw new Error("L'lment #root n'existe pas");const TJ=lR.createRoot(KP);TJ.render(r.jsx(uq.StrictMode,{children:r.jsx(dq,{children:r.jsx(kJ,{})})}));
//# sourceMappingURL=index-C1sFhE9z.js.map
