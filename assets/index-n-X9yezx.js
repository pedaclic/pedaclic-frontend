import{a as Yf,b as gk,g as Ua,r as y,u as Yt,c as Kf,L as Le,d as Kl,e as xk,f as x2,R as yk,h as bk,i as et,N as G1,j as jk,B as Nk}from"./vendor-react-BMsfgiGx.js";import{i as _k,g as Sk,a as wk,p as Ck,b as Ak,c as Ek,o as zk,d as be,u as We,s as ft,e as Ok,f as Dk,h as Mk,j as Tk,k as Vt,l as Xf,q as qe,m as nt,n as je,r as y2,t as _n,v as nr,w as we,x as ke,y as jc,z as Jr,A as vc,B as zi,C as Oi,D as Sn,T as He,E as Wf,F as Pk}from"./vendor-firebase-VkGUDqwf.js";import{H as rx,B as Nn,G as Il,L as F1,S as kk,C as xs,a as uc,b as Yd,U as qk,c as Rk,d as Q1,X as Di,M as Lk,e as $d,f as Ik,P as $k,g as Bk,h as Uk,F as Hk,i as oy,j as Bd,k as Gk,T as Fk,I as Qk,l as Vk,Y as Yk,m as Wr,A as us,n as gc,o as Dt,Z as b2,p as j2,q as $l,r as Ri,s as Kd,t as dc,u as N2,v as cy,w as nx,E as ql,x as Kk,y as V1,z as Xk,D as Wk,J as Zk,R as Jk,K as eq,N as tq,O as fc,Q as ax,V as ov,W as rq,_ as nq,$ as ix,a0 as cv,a1 as uv,a2 as aq,a3 as iq,a4 as sq,a5 as lq,a6 as oq,a7 as cq}from"./vendor-icons-hkj4svf_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();var dv={exports:{}},Xo={};var Y1;function uq(){if(Y1)return Xo;Y1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:u,ref:l!==void 0?l:null,props:o}}return Xo.Fragment=t,Xo.jsx=r,Xo.jsxs=r,Xo}var K1;function dq(){return K1||(K1=1,dv.exports=uq()),dv.exports}var n=dq(),fv={exports:{}},Wo={},mv={exports:{}},hv={};var X1;function fq(){return X1||(X1=1,(function(e){function t(q,J){var Q=q.length;q.push(J);e:for(;0<Q;){var ve=Q-1>>>1,U=q[ve];if(0<l(U,J))q[ve]=J,q[Q]=U,Q=ve;else break e}}function r(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var J=q[0],Q=q.pop();if(Q!==J){q[0]=Q;e:for(var ve=0,U=q.length,ge=U>>>1;ve<ge;){var ee=2*(ve+1)-1,me=q[ee],xe=ee+1,pe=q[xe];if(0>l(me,Q))xe<U&&0>l(pe,me)?(q[ve]=pe,q[xe]=Q,ve=xe):(q[ve]=me,q[ee]=Q,ve=ee);else if(xe<U&&0>l(pe,Q))q[ve]=pe,q[xe]=Q,ve=xe;else break e}}return J}function l(q,J){var Q=q.sortIndex-J.sortIndex;return Q!==0?Q:q.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],h=[],p=1,v=null,x=3,b=!1,_=!1,N=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function E(q){for(var J=r(h);J!==null;){if(J.callback===null)a(h);else if(J.startTime<=q)a(h),J.sortIndex=J.expirationTime,t(m,J);else break;J=r(h)}}function O(q){if(N=!1,E(q),!_)if(r(m)!==null)_=!0,P||(P=!0,B());else{var J=r(h);J!==null&&F(O,J.startTime-q)}}var P=!1,L=-1,T=5,D=-1;function k(){return S?!0:!(e.unstable_now()-D<T)}function $(){if(S=!1,P){var q=e.unstable_now();D=q;var J=!0;try{e:{_=!1,N&&(N=!1,z(L),L=-1),b=!0;var Q=x;try{t:{for(E(q),v=r(m);v!==null&&!(v.expirationTime>q&&k());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,x=v.priorityLevel;var U=ve(v.expirationTime<=q);if(q=e.unstable_now(),typeof U=="function"){v.callback=U,E(q),J=!0;break t}v===r(m)&&a(m),E(q)}else a(m);v=r(m)}if(v!==null)J=!0;else{var ge=r(h);ge!==null&&F(O,ge.startTime-q),J=!1}}break e}finally{v=null,x=Q,b=!1}J=void 0}}finally{J?B():P=!1}}}var B;if(typeof w=="function")B=function(){w($)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,oe=le.port2;le.port1.onmessage=$,B=function(){oe.postMessage(null)}}else B=function(){C($,0)};function F(q,J){L=C(function(){q(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(q){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var Q=x;x=J;try{return q()}finally{x=Q}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Q=x;x=q;try{return J()}finally{x=Q}},e.unstable_scheduleCallback=function(q,J,Q){var ve=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ve+Q:ve):Q=ve,q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,q={id:p++,callback:J,priorityLevel:q,startTime:Q,expirationTime:U,sortIndex:-1},Q>ve?(q.sortIndex=Q,t(h,q),r(m)===null&&q===r(h)&&(N?(z(L),L=-1):N=!0,F(O,Q-ve))):(q.sortIndex=U,t(m,q),_||b||(_=!0,P||(P=!0,B()))),q},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(q){var J=x;return function(){var Q=x;x=J;try{return q.apply(this,arguments)}finally{x=Q}}}})(hv)),hv}var W1;function mq(){return W1||(W1=1,mv.exports=fq()),mv.exports}var Z1;function hq(){if(Z1)return Wo;Z1=1;var e=mq(),t=Yf(),r=gk();function a(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(a(188))}function h(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(a(188));return s!==i?null:i}for(var c=i,f=s;;){var g=c.return;if(g===null)break;var j=g.alternate;if(j===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===j.child){for(j=g.child;j;){if(j===c)return m(g),i;if(j===f)return m(g),s;j=j.sibling}throw Error(a(188))}if(c.return!==f.return)c=g,f=j;else{for(var A=!1,M=g.child;M;){if(M===c){A=!0,c=g,f=j;break}if(M===f){A=!0,f=g,c=j;break}M=M.sibling}if(!A){for(M=j.child;M;){if(M===c){A=!0,c=j,f=g;break}if(M===f){A=!0,f=j,c=g;break}M=M.sibling}if(!A)throw Error(a(189))}}if(c.alternate!==f)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var le=Symbol.for("react.client.reference");function oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===le?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList";case D:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case w:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case E:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case L:return s=i.displayName||null,s!==null?s:oe(i.type)||"Memo";case T:s=i._payload,i=i._init;try{return oe(i(s))}catch{}}return null}var F=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ve=[],U=-1;function ge(i){return{current:i}}function ee(i){0>U||(i.current=ve[U],ve[U]=null,U--)}function me(i,s){U++,ve[U]=i.current,i.current=s}var xe=ge(null),pe=ge(null),H=ge(null),de=ge(null);function Ee(i,s){switch(me(H,s),me(pe,i),me(xe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?m1(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=m1(s),i=h1(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(xe),me(xe,i)}function ne(){ee(xe),ee(pe),ee(H)}function Y(i){i.memoizedState!==null&&me(de,i);var s=xe.current,c=h1(s,i.type);s!==c&&(me(pe,i),me(xe,c))}function I(i){pe.current===i&&(ee(xe),ee(pe)),de.current===i&&(ee(de),Qo._currentValue=Q)}var ae,V;function ye(i){if(ae===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ae=s&&s[1]||"",V=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+i+V}var Re=!1;function Ie(i,s){if(!i||Re)return"";Re=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var te=ie}Reflect.construct(i,[],he)}else{try{he.call()}catch(ie){te=ie}i.call(he.prototype)}}else{try{throw Error()}catch(ie){te=ie}(he=i())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=f.DetermineComponentFrameRoot(),A=j[0],M=j[1];if(A&&M){var R=A.split(`
`),Z=M.split(`
`);for(g=f=0;f<R.length&&!R[f].includes("DetermineComponentFrameRoot");)f++;for(;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;if(f===R.length||g===Z.length)for(f=R.length-1,g=Z.length-1;1<=f&&0<=g&&R[f]!==Z[g];)g--;for(;1<=f&&0<=g;f--,g--)if(R[f]!==Z[g]){if(f!==1||g!==1)do if(f--,g--,0>g||R[f]!==Z[g]){var ue=`
`+R[f].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),ue}while(1<=f&&0<=g);break}}}finally{Re=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ye(c):""}function Qe(i,s){switch(i.tag){case 26:case 27:case 5:return ye(i.type);case 16:return ye("Lazy");case 13:return i.child!==s&&s!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Ie(i.type,!1);case 11:return Ie(i.type.render,!1);case 1:return Ie(i.type,!0);case 31:return ye("Activity");default:return""}}function Gt(i){try{var s="",c=null;do s+=Qe(i,c),c=i,i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var On=Object.prototype.hasOwnProperty,nn=e.unstable_scheduleCallback,sa=e.unstable_cancelCallback,ce=e.unstable_shouldYield,Ae=e.unstable_requestPaint,Te=e.unstable_now,$e=e.unstable_getCurrentPriorityLevel,Nt=e.unstable_ImmediatePriority,vr=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,Ls=e.unstable_LowPriority,an=e.unstable_IdlePriority,Za=e.log,Ym=e.unstable_setDisableYieldValue,gr=null,xt=null;function Hn(i){if(typeof Za=="function"&&Ym(i),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(gr,i)}catch{}}var _r=Math.clz32?Math.clz32:Xm,nu=Math.log,Km=Math.LN2;function Xm(i){return i>>>=0,i===0?32:31-(nu(i)/Km|0)|0}var Is=256,$s=262144,Bs=4194304;function la(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Gn(i,s,c){var f=i.pendingLanes;if(f===0)return 0;var g=0,j=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var M=f&134217727;return M!==0?(f=M&~j,f!==0?g=la(f):(A&=M,A!==0?g=la(A):c||(c=M&~i,c!==0&&(g=la(c))))):(M=f&~j,M!==0?g=la(M):A!==0?g=la(A):c||(c=f&~i,c!==0&&(g=la(c)))),g===0?0:s!==0&&s!==g&&(s&j)===0&&(j=g&-g,c=s&-s,j>=c||j===32&&(c&4194048)!==0)?s:g}function Hi(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function X(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var i=Bs;return Bs<<=1,(Bs&62914560)===0&&(Bs=4194304),i}function ht(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function xr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function io(i,s,c,f,g,j){var A=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var M=i.entanglements,R=i.expirationTimes,Z=i.hiddenUpdates;for(c=A&~c;0<c;){var ue=31-_r(c),he=1<<ue;M[ue]=0,R[ue]=-1;var te=Z[ue];if(te!==null)for(Z[ue]=null,ue=0;ue<te.length;ue++){var ie=te[ue];ie!==null&&(ie.lane&=-536870913)}c&=~he}f!==0&&Gi(i,f,0),j!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=j&~(A&~s))}function Gi(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var f=31-_r(s);i.entangledLanes|=s,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function Xb(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var f=31-_r(c),g=1<<f;g&s|i[f]&s&&(i[f]|=s),c&=~g}}function Wb(i,s){var c=s&-s;return c=(c&42)!==0?1:Wm(c),(c&(i.suspendedLanes|s))!==0?0:c}function Wm(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Zm(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Zb(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:R1(i.type))}function Jb(i,s){var c=J.p;try{return J.p=i,s()}finally{J.p=c}}var Ja=Math.random().toString(36).slice(2),or="__reactFiber$"+Ja,Dr="__reactProps$"+Ja,Us="__reactContainer$"+Ja,Jm="__reactEvents$"+Ja,sT="__reactListeners$"+Ja,lT="__reactHandles$"+Ja,e0="__reactResources$"+Ja,so="__reactMarker$"+Ja;function eh(i){delete i[or],delete i[Dr],delete i[Jm],delete i[sT],delete i[lT]}function Hs(i){var s=i[or];if(s)return s;for(var c=i.parentNode;c;){if(s=c[Us]||c[or]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=j1(i);i!==null;){if(c=i[or])return c;i=j1(i)}return s}i=c,c=i.parentNode}return null}function Gs(i){if(i=i[or]||i[Us]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function lo(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(a(33))}function Fs(i){var s=i[e0];return s||(s=i[e0]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Wt(i){i[so]=!0}var t0=new Set,r0={};function Fi(i,s){Qs(i,s),Qs(i+"Capture",s)}function Qs(i,s){for(r0[i]=s,i=0;i<s.length;i++)t0.add(s[i])}var oT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),n0={},a0={};function cT(i){return On.call(a0,i)?!0:On.call(n0,i)?!1:oT.test(i)?a0[i]=!0:(n0[i]=!0,!1)}function au(i,s,c){if(cT(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function iu(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function oa(i,s,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+f)}}function sn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function i0(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function uT(i,s,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,j=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){c=""+A,j.call(this,A)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function th(i){if(!i._valueTracker){var s=i0(i)?"checked":"value";i._valueTracker=uT(i,s,""+i[s])}}function s0(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return i&&(f=i0(i)?i.checked?"true":"false":i.value),i=f,i!==c?(s.setValue(i),!0):!1}function su(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var dT=/[\n"\\]/g;function ln(i){return i.replace(dT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function rh(i,s,c,f,g,j,A,M){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+sn(s)):i.value!==""+sn(s)&&(i.value=""+sn(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?nh(i,A,sn(s)):c!=null?nh(i,A,sn(c)):f!=null&&i.removeAttribute("value"),g==null&&j!=null&&(i.defaultChecked=!!j),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+sn(M):i.removeAttribute("name")}function l0(i,s,c,f,g,j,A,M){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(i.type=j),s!=null||c!=null){if(!(j!=="submit"&&j!=="reset"||s!=null)){th(i);return}c=c!=null?""+sn(c):"",s=s!=null?""+sn(s):c,M||s===i.value||(i.value=s),i.defaultValue=s}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=M?i.checked:!!f,i.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),th(i)}function nh(i,s,c){s==="number"&&su(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Vs(i,s,c,f){if(i=i.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=s.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+sn(c),s=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function o0(i,s,c){if(s!=null&&(s=""+sn(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+sn(c):""}function c0(i,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(a(92));if(F(f)){if(1<f.length)throw Error(a(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=sn(s),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),th(i)}function Ys(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var fT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function u0(i,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":f?i.setProperty(s,c):typeof c!="number"||c===0||fT.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function d0(i,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in s)f=s[g],s.hasOwnProperty(g)&&c[g]!==f&&u0(i,g,f)}else for(var j in s)s.hasOwnProperty(j)&&u0(i,j,s[j])}function ah(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lu(i){return hT.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ca(){}var ih=null;function sh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ks=null,Xs=null;function f0(i){var s=Gs(i);if(s&&(i=s.stateNode)){var c=i[Dr]||null;e:switch(i=s.stateNode,s.type){case"input":if(rh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ln(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==i&&f.form===i.form){var g=f[Dr]||null;if(!g)throw Error(a(90));rh(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===i.form&&s0(f)}break e;case"textarea":o0(i,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Vs(i,!!c.multiple,s,!1)}}}var lh=!1;function m0(i,s,c){if(lh)return i(s,c);lh=!0;try{var f=i(s);return f}finally{if(lh=!1,(Ks!==null||Xs!==null)&&(Yu(),Ks&&(s=Ks,i=Xs,Xs=Ks=null,f0(s),i)))for(s=0;s<i.length;s++)f0(i[s])}}function oo(i,s){var c=i.stateNode;if(c===null)return null;var f=c[Dr]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=!1;if(ua)try{var co={};Object.defineProperty(co,"passive",{get:function(){oh=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{oh=!1}var ei=null,ch=null,ou=null;function h0(){if(ou)return ou;var i,s=ch,c=s.length,f,g="value"in ei?ei.value:ei.textContent,j=g.length;for(i=0;i<c&&s[i]===g[i];i++);var A=c-i;for(f=1;f<=A&&s[c-f]===g[j-f];f++);return ou=g.slice(i,1<f?1-f:void 0)}function cu(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function uu(){return!0}function p0(){return!1}function Mr(i){function s(c,f,g,j,A){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=j,this.target=A,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(c=i[M],this[M]=c?c(j):j[M]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?uu:p0,this.isPropagationStopped=p0,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=uu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=uu)},persist:function(){},isPersistent:uu}),s}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=Mr(Qi),uo=v({},Qi,{view:0,detail:0}),pT=Mr(uo),uh,dh,fo,fu=v({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==fo&&(fo&&i.type==="mousemove"?(uh=i.screenX-fo.screenX,dh=i.screenY-fo.screenY):dh=uh=0,fo=i),uh)},movementY:function(i){return"movementY"in i?i.movementY:dh}}),v0=Mr(fu),vT=v({},fu,{dataTransfer:0}),gT=Mr(vT),xT=v({},uo,{relatedTarget:0}),fh=Mr(xT),yT=v({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),bT=Mr(yT),jT=v({},Qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),NT=Mr(jT),_T=v({},Qi,{data:0}),g0=Mr(_T),ST={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=CT[i])?!!s[i]:!1}function mh(){return AT}var ET=v({},uo,{key:function(i){if(i.key){var s=ST[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=cu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?wT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mh,charCode:function(i){return i.type==="keypress"?cu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?cu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),zT=Mr(ET),OT=v({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x0=Mr(OT),DT=v({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mh}),MT=Mr(DT),TT=v({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),PT=Mr(TT),kT=v({},fu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qT=Mr(kT),RT=v({},Qi,{newState:0,oldState:0}),LT=Mr(RT),IT=[9,13,27,32],hh=ua&&"CompositionEvent"in window,mo=null;ua&&"documentMode"in document&&(mo=document.documentMode);var $T=ua&&"TextEvent"in window&&!mo,y0=ua&&(!hh||mo&&8<mo&&11>=mo),b0=" ",j0=!1;function N0(i,s){switch(i){case"keyup":return IT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ws=!1;function BT(i,s){switch(i){case"compositionend":return _0(s);case"keypress":return s.which!==32?null:(j0=!0,b0);case"textInput":return i=s.data,i===b0&&j0?null:i;default:return null}}function UT(i,s){if(Ws)return i==="compositionend"||!hh&&N0(i,s)?(i=h0(),ou=ch=ei=null,Ws=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return y0&&s.locale!=="ko"?null:s.data;default:return null}}var HT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!HT[i.type]:s==="textarea"}function w0(i,s,c,f){Ks?Xs?Xs.push(f):Xs=[f]:Ks=f,s=td(s,"onChange"),0<s.length&&(c=new du("onChange","change",null,c,f),i.push({event:c,listeners:s}))}var ho=null,po=null;function GT(i){l1(i,0)}function mu(i){var s=lo(i);if(s0(s))return i}function C0(i,s){if(i==="change")return s}var A0=!1;if(ua){var ph;if(ua){var vh="oninput"in document;if(!vh){var E0=document.createElement("div");E0.setAttribute("oninput","return;"),vh=typeof E0.oninput=="function"}ph=vh}else ph=!1;A0=ph&&(!document.documentMode||9<document.documentMode)}function z0(){ho&&(ho.detachEvent("onpropertychange",O0),po=ho=null)}function O0(i){if(i.propertyName==="value"&&mu(po)){var s=[];w0(s,po,i,sh(i)),m0(GT,s)}}function FT(i,s,c){i==="focusin"?(z0(),ho=s,po=c,ho.attachEvent("onpropertychange",O0)):i==="focusout"&&z0()}function QT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mu(po)}function VT(i,s){if(i==="click")return mu(s)}function YT(i,s){if(i==="input"||i==="change")return mu(s)}function KT(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Hr=typeof Object.is=="function"?Object.is:KT;function vo(i,s){if(Hr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!On.call(s,g)||!Hr(i[g],s[g]))return!1}return!0}function D0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function M0(i,s){var c=D0(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=s&&f>=s)return{node:c,offset:s-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=D0(c)}}function T0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?T0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function P0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=su(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=su(i.document)}return s}function gh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var XT=ua&&"documentMode"in document&&11>=document.documentMode,Zs=null,xh=null,go=null,yh=!1;function k0(i,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;yh||Zs==null||Zs!==su(f)||(f=Zs,"selectionStart"in f&&gh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),go&&vo(go,f)||(go=f,f=td(xh,"onSelect"),0<f.length&&(s=new du("onSelect","select",null,s,c),i.push({event:s,listeners:f}),s.target=Zs)))}function Vi(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var Js={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},bh={},q0={};ua&&(q0=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Yi(i){if(bh[i])return bh[i];if(!Js[i])return i;var s=Js[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in q0)return bh[i]=s[c];return i}var R0=Yi("animationend"),L0=Yi("animationiteration"),I0=Yi("animationstart"),WT=Yi("transitionrun"),ZT=Yi("transitionstart"),JT=Yi("transitioncancel"),$0=Yi("transitionend"),B0=new Map,jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jh.push("scrollEnd");function Dn(i,s){B0.set(i,s),Fi(s,[i])}var hu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},on=[],el=0,Nh=0;function pu(){for(var i=el,s=Nh=el=0;s<i;){var c=on[s];on[s++]=null;var f=on[s];on[s++]=null;var g=on[s];on[s++]=null;var j=on[s];if(on[s++]=null,f!==null&&g!==null){var A=f.pending;A===null?g.next=g:(g.next=A.next,A.next=g),f.pending=g}j!==0&&U0(c,g,j)}}function vu(i,s,c,f){on[el++]=i,on[el++]=s,on[el++]=c,on[el++]=f,Nh|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function _h(i,s,c,f){return vu(i,s,c,f),gu(i)}function Ki(i,s){return vu(i,null,null,s),gu(i)}function U0(i,s,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var g=!1,j=i.return;j!==null;)j.childLanes|=c,f=j.alternate,f!==null&&(f.childLanes|=c),j.tag===22&&(i=j.stateNode,i===null||i._visibility&1||(g=!0)),i=j,j=j.return;return i.tag===3?(j=i.stateNode,g&&s!==null&&(g=31-_r(c),i=j.hiddenUpdates,f=i[g],f===null?i[g]=[s]:f.push(s),s.lane=c|536870912),j):null}function gu(i){if(50<Io)throw Io=0,Mp=null,Error(a(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var tl={};function eP(i,s,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(i,s,c,f){return new eP(i,s,c,f)}function Sh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function da(i,s){var c=i.alternate;return c===null?(c=Gr(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function H0(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function xu(i,s,c,f,g,j){var A=0;if(f=i,typeof i=="function")Sh(i)&&(A=1);else if(typeof i=="string")A=ik(i,c,xe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case D:return i=Gr(31,c,s,g),i.elementType=D,i.lanes=j,i;case N:return Xi(c.children,g,j,s);case S:A=8,g|=24;break;case C:return i=Gr(12,c,s,g|2),i.elementType=C,i.lanes=j,i;case O:return i=Gr(13,c,s,g),i.elementType=O,i.lanes=j,i;case P:return i=Gr(19,c,s,g),i.elementType=P,i.lanes=j,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:A=10;break e;case z:A=9;break e;case E:A=11;break e;case L:A=14;break e;case T:A=16,f=null;break e}A=29,c=Error(a(130,i===null?"null":typeof i,"")),f=null}return s=Gr(A,c,s,g),s.elementType=i,s.type=f,s.lanes=j,s}function Xi(i,s,c,f){return i=Gr(7,i,f,s),i.lanes=c,i}function wh(i,s,c){return i=Gr(6,i,null,s),i.lanes=c,i}function G0(i){var s=Gr(18,null,null,0);return s.stateNode=i,s}function Ch(i,s,c){return s=Gr(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var F0=new WeakMap;function cn(i,s){if(typeof i=="object"&&i!==null){var c=F0.get(i);return c!==void 0?c:(s={value:i,source:s,stack:Gt(s)},F0.set(i,s),s)}return{value:i,source:s,stack:Gt(s)}}var rl=[],nl=0,yu=null,xo=0,un=[],dn=0,ti=null,Fn=1,Qn="";function fa(i,s){rl[nl++]=xo,rl[nl++]=yu,yu=i,xo=s}function Q0(i,s,c){un[dn++]=Fn,un[dn++]=Qn,un[dn++]=ti,ti=i;var f=Fn;i=Qn;var g=32-_r(f)-1;f&=~(1<<g),c+=1;var j=32-_r(s)+g;if(30<j){var A=g-g%5;j=(f&(1<<A)-1).toString(32),f>>=A,g-=A,Fn=1<<32-_r(s)+g|c<<g|f,Qn=j+i}else Fn=1<<j|c<<g|f,Qn=i}function Ah(i){i.return!==null&&(fa(i,1),Q0(i,1,0))}function Eh(i){for(;i===yu;)yu=rl[--nl],rl[nl]=null,xo=rl[--nl],rl[nl]=null;for(;i===ti;)ti=un[--dn],un[dn]=null,Qn=un[--dn],un[dn]=null,Fn=un[--dn],un[dn]=null}function V0(i,s){un[dn++]=Fn,un[dn++]=Qn,un[dn++]=ti,Fn=s.id,Qn=s.overflow,ti=i}var cr=null,yt=null,Ke=!1,ri=null,fn=!1,zh=Error(a(519));function ni(i){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo(cn(s,i)),zh}function Y0(i){var s=i.stateNode,c=i.type,f=i.memoizedProps;switch(s[or]=i,s[Dr]=f,c){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(c=0;c<Bo.length;c++)Fe(Bo[c],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Fe("invalid",s),l0(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Fe("invalid",s);break;case"textarea":Fe("invalid",s),c0(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||d1(s.textContent,c)?(f.popover!=null&&(Fe("beforetoggle",s),Fe("toggle",s)),f.onScroll!=null&&Fe("scroll",s),f.onScrollEnd!=null&&Fe("scrollend",s),f.onClick!=null&&(s.onclick=ca),s=!0):s=!1,s||ni(i,!0)}function K0(i){for(cr=i.return;cr;)switch(cr.tag){case 5:case 31:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:cr=cr.return}}function al(i){if(i!==cr)return!1;if(!Ke)return K0(i),Ke=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Vp(i.type,i.memoizedProps)),c=!c),c&&yt&&ni(i),K0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));yt=b1(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));yt=b1(i)}else s===27?(s=yt,gi(i.type)?(i=Zp,Zp=null,yt=i):yt=s):yt=cr?hn(i.stateNode.nextSibling):null;return!0}function Wi(){yt=cr=null,Ke=!1}function Oh(){var i=ri;return i!==null&&(qr===null?qr=i:qr.push.apply(qr,i),ri=null),i}function yo(i){ri===null?ri=[i]:ri.push(i)}var Dh=ge(null),Zi=null,ma=null;function ai(i,s,c){me(Dh,s._currentValue),s._currentValue=c}function ha(i){i._currentValue=Dh.current,ee(Dh)}function Mh(i,s,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===c)break;i=i.return}}function Th(i,s,c,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var j=g.dependencies;if(j!==null){var A=g.child;j=j.firstContext;e:for(;j!==null;){var M=j;j=g;for(var R=0;R<s.length;R++)if(M.context===s[R]){j.lanes|=c,M=j.alternate,M!==null&&(M.lanes|=c),Mh(j.return,c,i),f||(A=null);break e}j=M.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(a(341));A.lanes|=c,j=A.alternate,j!==null&&(j.lanes|=c),Mh(A,c,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function il(i,s,c,f){i=null;for(var g=s,j=!1;g!==null;){if(!j){if((g.flags&524288)!==0)j=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(a(387));if(A=A.memoizedProps,A!==null){var M=g.type;Hr(g.pendingProps.value,A.value)||(i!==null?i.push(M):i=[M])}}else if(g===de.current){if(A=g.alternate,A===null)throw Error(a(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Qo):i=[Qo])}g=g.return}i!==null&&Th(s,i,c,f),s.flags|=262144}function bu(i){for(i=i.firstContext;i!==null;){if(!Hr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ji(i){Zi=i,ma=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ur(i){return X0(Zi,i)}function ju(i,s){return Zi===null&&Ji(i),X0(i,s)}function X0(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ma===null){if(i===null)throw Error(a(308));ma=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ma=ma.next=s;return c}var tP=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},rP=e.unstable_scheduleCallback,nP=e.unstable_NormalPriority,Rt={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new tP,data:new Map,refCount:0}}function bo(i){i.refCount--,i.refCount===0&&rP(nP,function(){i.controller.abort()})}var jo=null,kh=0,sl=0,ll=null;function aP(i,s){if(jo===null){var c=jo=[];kh=0,sl=Lp(),ll={status:"pending",value:void 0,then:function(f){c.push(f)}}}return kh++,s.then(W0,W0),s}function W0(){if(--kh===0&&jo!==null){ll!==null&&(ll.status="fulfilled");var i=jo;jo=null,sl=0,ll=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function iP(i,s){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){f.status="fulfilled",f.value=s;for(var g=0;g<c.length;g++)(0,c[g])(s)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var Z0=q.S;q.S=function(i,s){kN=Te(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&aP(i,s),Z0!==null&&Z0(i,s)};var es=ge(null);function qh(){var i=es.current;return i!==null?i:pt.pooledCache}function Nu(i,s){s===null?me(es,es.current):me(es,s.pool)}function J0(){var i=qh();return i===null?null:{parent:Rt._currentValue,pool:i}}var ol=Error(a(460)),Rh=Error(a(474)),_u=Error(a(542)),Su={then:function(){}};function ej(i){return i=i.status,i==="fulfilled"||i==="rejected"}function tj(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(ca,ca),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nj(i),i;default:if(typeof s.status=="string")s.then(ca,ca);else{if(i=pt,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=s,i.status="pending",i.then(function(f){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=f}},function(f){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nj(i),i}throw rs=s,ol}}function ts(i){try{var s=i._init;return s(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(rs=c,ol):c}}var rs=null;function rj(){if(rs===null)throw Error(a(459));var i=rs;return rs=null,i}function nj(i){if(i===ol||i===_u)throw Error(a(483))}var cl=null,No=0;function wu(i){var s=No;return No+=1,cl===null&&(cl=[]),tj(cl,i,s)}function _o(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Cu(i,s){throw s.$$typeof===x?Error(a(525)):(i=Object.prototype.toString.call(s),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function aj(i){function s(K,G){if(i){var W=K.deletions;W===null?(K.deletions=[G],K.flags|=16):W.push(G)}}function c(K,G){if(!i)return null;for(;G!==null;)s(K,G),G=G.sibling;return null}function f(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function g(K,G){return K=da(K,G),K.index=0,K.sibling=null,K}function j(K,G,W){return K.index=W,i?(W=K.alternate,W!==null?(W=W.index,W<G?(K.flags|=67108866,G):W):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function A(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function M(K,G,W,fe){return G===null||G.tag!==6?(G=wh(W,K.mode,fe),G.return=K,G):(G=g(G,W),G.return=K,G)}function R(K,G,W,fe){var Oe=W.type;return Oe===N?ue(K,G,W.props.children,fe,W.key):G!==null&&(G.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===T&&ts(Oe)===G.type)?(G=g(G,W.props),_o(G,W),G.return=K,G):(G=xu(W.type,W.key,W.props,null,K.mode,fe),_o(G,W),G.return=K,G)}function Z(K,G,W,fe){return G===null||G.tag!==4||G.stateNode.containerInfo!==W.containerInfo||G.stateNode.implementation!==W.implementation?(G=Ch(W,K.mode,fe),G.return=K,G):(G=g(G,W.children||[]),G.return=K,G)}function ue(K,G,W,fe,Oe){return G===null||G.tag!==7?(G=Xi(W,K.mode,fe,Oe),G.return=K,G):(G=g(G,W),G.return=K,G)}function he(K,G,W){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=wh(""+G,K.mode,W),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return W=xu(G.type,G.key,G.props,null,K.mode,W),_o(W,G),W.return=K,W;case _:return G=Ch(G,K.mode,W),G.return=K,G;case T:return G=ts(G),he(K,G,W)}if(F(G)||B(G))return G=Xi(G,K.mode,W,null),G.return=K,G;if(typeof G.then=="function")return he(K,wu(G),W);if(G.$$typeof===w)return he(K,ju(K,G),W);Cu(K,G)}return null}function te(K,G,W,fe){var Oe=G!==null?G.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Oe!==null?null:M(K,G,""+W,fe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return W.key===Oe?R(K,G,W,fe):null;case _:return W.key===Oe?Z(K,G,W,fe):null;case T:return W=ts(W),te(K,G,W,fe)}if(F(W)||B(W))return Oe!==null?null:ue(K,G,W,fe,null);if(typeof W.then=="function")return te(K,G,wu(W),fe);if(W.$$typeof===w)return te(K,G,ju(K,W),fe);Cu(K,W)}return null}function ie(K,G,W,fe,Oe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return K=K.get(W)||null,M(G,K,""+fe,Oe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return K=K.get(fe.key===null?W:fe.key)||null,R(G,K,fe,Oe);case _:return K=K.get(fe.key===null?W:fe.key)||null,Z(G,K,fe,Oe);case T:return fe=ts(fe),ie(K,G,W,fe,Oe)}if(F(fe)||B(fe))return K=K.get(W)||null,ue(G,K,fe,Oe,null);if(typeof fe.then=="function")return ie(K,G,W,wu(fe),Oe);if(fe.$$typeof===w)return ie(K,G,W,ju(G,fe),Oe);Cu(G,fe)}return null}function _e(K,G,W,fe){for(var Oe=null,Ze=null,Ce=G,Ue=G=0,Ye=null;Ce!==null&&Ue<W.length;Ue++){Ce.index>Ue?(Ye=Ce,Ce=null):Ye=Ce.sibling;var Je=te(K,Ce,W[Ue],fe);if(Je===null){Ce===null&&(Ce=Ye);break}i&&Ce&&Je.alternate===null&&s(K,Ce),G=j(Je,G,Ue),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je,Ce=Ye}if(Ue===W.length)return c(K,Ce),Ke&&fa(K,Ue),Oe;if(Ce===null){for(;Ue<W.length;Ue++)Ce=he(K,W[Ue],fe),Ce!==null&&(G=j(Ce,G,Ue),Ze===null?Oe=Ce:Ze.sibling=Ce,Ze=Ce);return Ke&&fa(K,Ue),Oe}for(Ce=f(Ce);Ue<W.length;Ue++)Ye=ie(Ce,K,Ue,W[Ue],fe),Ye!==null&&(i&&Ye.alternate!==null&&Ce.delete(Ye.key===null?Ue:Ye.key),G=j(Ye,G,Ue),Ze===null?Oe=Ye:Ze.sibling=Ye,Ze=Ye);return i&&Ce.forEach(function(Ni){return s(K,Ni)}),Ke&&fa(K,Ue),Oe}function Pe(K,G,W,fe){if(W==null)throw Error(a(151));for(var Oe=null,Ze=null,Ce=G,Ue=G=0,Ye=null,Je=W.next();Ce!==null&&!Je.done;Ue++,Je=W.next()){Ce.index>Ue?(Ye=Ce,Ce=null):Ye=Ce.sibling;var Ni=te(K,Ce,Je.value,fe);if(Ni===null){Ce===null&&(Ce=Ye);break}i&&Ce&&Ni.alternate===null&&s(K,Ce),G=j(Ni,G,Ue),Ze===null?Oe=Ni:Ze.sibling=Ni,Ze=Ni,Ce=Ye}if(Je.done)return c(K,Ce),Ke&&fa(K,Ue),Oe;if(Ce===null){for(;!Je.done;Ue++,Je=W.next())Je=he(K,Je.value,fe),Je!==null&&(G=j(Je,G,Ue),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je);return Ke&&fa(K,Ue),Oe}for(Ce=f(Ce);!Je.done;Ue++,Je=W.next())Je=ie(Ce,K,Ue,Je.value,fe),Je!==null&&(i&&Je.alternate!==null&&Ce.delete(Je.key===null?Ue:Je.key),G=j(Je,G,Ue),Ze===null?Oe=Je:Ze.sibling=Je,Ze=Je);return i&&Ce.forEach(function(vk){return s(K,vk)}),Ke&&fa(K,Ue),Oe}function ut(K,G,W,fe){if(typeof W=="object"&&W!==null&&W.type===N&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case b:e:{for(var Oe=W.key;G!==null;){if(G.key===Oe){if(Oe=W.type,Oe===N){if(G.tag===7){c(K,G.sibling),fe=g(G,W.props.children),fe.return=K,K=fe;break e}}else if(G.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===T&&ts(Oe)===G.type){c(K,G.sibling),fe=g(G,W.props),_o(fe,W),fe.return=K,K=fe;break e}c(K,G);break}else s(K,G);G=G.sibling}W.type===N?(fe=Xi(W.props.children,K.mode,fe,W.key),fe.return=K,K=fe):(fe=xu(W.type,W.key,W.props,null,K.mode,fe),_o(fe,W),fe.return=K,K=fe)}return A(K);case _:e:{for(Oe=W.key;G!==null;){if(G.key===Oe)if(G.tag===4&&G.stateNode.containerInfo===W.containerInfo&&G.stateNode.implementation===W.implementation){c(K,G.sibling),fe=g(G,W.children||[]),fe.return=K,K=fe;break e}else{c(K,G);break}else s(K,G);G=G.sibling}fe=Ch(W,K.mode,fe),fe.return=K,K=fe}return A(K);case T:return W=ts(W),ut(K,G,W,fe)}if(F(W))return _e(K,G,W,fe);if(B(W)){if(Oe=B(W),typeof Oe!="function")throw Error(a(150));return W=Oe.call(W),Pe(K,G,W,fe)}if(typeof W.then=="function")return ut(K,G,wu(W),fe);if(W.$$typeof===w)return ut(K,G,ju(K,W),fe);Cu(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,G!==null&&G.tag===6?(c(K,G.sibling),fe=g(G,W),fe.return=K,K=fe):(c(K,G),fe=wh(W,K.mode,fe),fe.return=K,K=fe),A(K)):c(K,G)}return function(K,G,W,fe){try{No=0;var Oe=ut(K,G,W,fe);return cl=null,Oe}catch(Ce){if(Ce===ol||Ce===_u)throw Ce;var Ze=Gr(29,Ce,null,K.mode);return Ze.lanes=fe,Ze.return=K,Ze}}}var ns=aj(!0),ij=aj(!1),ii=!1;function Lh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ih(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function si(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function li(i,s,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(rt&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,s=gu(i),U0(i,null,c),s}return vu(i,f,s,c),gu(i)}function So(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,Xb(i,c)}}function $h(i,s){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,j=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};j===null?g=j=A:j=j.next=A,c=c.next}while(c!==null);j===null?g=j=s:j=j.next=s}else g=j=s;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:j,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var Bh=!1;function wo(){if(Bh){var i=ll;if(i!==null)throw i}}function Co(i,s,c,f){Bh=!1;var g=i.updateQueue;ii=!1;var j=g.firstBaseUpdate,A=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var R=M,Z=R.next;R.next=null,A===null?j=Z:A.next=Z,A=R;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,M=ue.lastBaseUpdate,M!==A&&(M===null?ue.firstBaseUpdate=Z:M.next=Z,ue.lastBaseUpdate=R))}if(j!==null){var he=g.baseState;A=0,ue=Z=R=null,M=j;do{var te=M.lane&-536870913,ie=te!==M.lane;if(ie?(Ve&te)===te:(f&te)===te){te!==0&&te===sl&&(Bh=!0),ue!==null&&(ue=ue.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var _e=i,Pe=M;te=s;var ut=c;switch(Pe.tag){case 1:if(_e=Pe.payload,typeof _e=="function"){he=_e.call(ut,he,te);break e}he=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Pe.payload,te=typeof _e=="function"?_e.call(ut,he,te):_e,te==null)break e;he=v({},he,te);break e;case 2:ii=!0}}te=M.callback,te!==null&&(i.flags|=64,ie&&(i.flags|=8192),ie=g.callbacks,ie===null?g.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ue===null?(Z=ue=ie,R=he):ue=ue.next=ie,A|=te;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ie=M,M=ie.next,ie.next=null,g.lastBaseUpdate=ie,g.shared.pending=null}}while(!0);ue===null&&(R=he),g.baseState=R,g.firstBaseUpdate=Z,g.lastBaseUpdate=ue,j===null&&(g.shared.lanes=0),fi|=A,i.lanes=A,i.memoizedState=he}}function sj(i,s){if(typeof i!="function")throw Error(a(191,i));i.call(s)}function lj(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)sj(c[i],s)}var ul=ge(null),Au=ge(0);function oj(i,s){i=_a,me(Au,i),me(ul,s),_a=i|s.baseLanes}function Uh(){me(Au,_a),me(ul,ul.current)}function Hh(){_a=Au.current,ee(ul),ee(Au)}var Fr=ge(null),mn=null;function oi(i){var s=i.alternate;me(Pt,Pt.current&1),me(Fr,i),mn===null&&(s===null||ul.current!==null||s.memoizedState!==null)&&(mn=i)}function Gh(i){me(Pt,Pt.current),me(Fr,i),mn===null&&(mn=i)}function cj(i){i.tag===22?(me(Pt,Pt.current),me(Fr,i),mn===null&&(mn=i)):ci()}function ci(){me(Pt,Pt.current),me(Fr,Fr.current)}function Qr(i){ee(Fr),mn===i&&(mn=null),ee(Pt)}var Pt=ge(0);function Eu(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Xp(c)||Wp(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pa=0,Be=null,ot=null,Lt=null,zu=!1,dl=!1,as=!1,Ou=0,Ao=0,fl=null,sP=0;function Et(){throw Error(a(321))}function Fh(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!Hr(i[c],s[c]))return!1;return!0}function Qh(i,s,c,f,g,j){return pa=j,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=i===null||i.memoizedState===null?Qj:lp,as=!1,j=c(f,g),as=!1,dl&&(j=dj(s,c,f,g)),uj(i),j}function uj(i){q.H=Oo;var s=ot!==null&&ot.next!==null;if(pa=0,Lt=ot=Be=null,zu=!1,Ao=0,fl=null,s)throw Error(a(300));i===null||It||(i=i.dependencies,i!==null&&bu(i)&&(It=!0))}function dj(i,s,c,f){Be=i;var g=0;do{if(dl&&(fl=null),Ao=0,dl=!1,25<=g)throw Error(a(301));if(g+=1,Lt=ot=null,i.updateQueue!=null){var j=i.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}q.H=Vj,j=s(c,f)}while(dl);return j}function lP(){var i=q.H,s=i.useState()[0];return s=typeof s.then=="function"?Eo(s):s,i=i.useState()[0],(ot!==null?ot.memoizedState:null)!==i&&(Be.flags|=1024),s}function Vh(){var i=Ou!==0;return Ou=0,i}function Yh(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function Kh(i){if(zu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}zu=!1}pa=0,Lt=ot=Be=null,dl=!1,Ao=Ou=0,fl=null}function Sr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Be.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function kt(){if(ot===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=ot.next;var s=Lt===null?Be.memoizedState:Lt.next;if(s!==null)Lt=s,ot=i;else{if(i===null)throw Be.alternate===null?Error(a(467)):Error(a(310));ot=i,i={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Lt===null?Be.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function Du(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(i){var s=Ao;return Ao+=1,fl===null&&(fl=[]),i=tj(fl,i,s),s=Be,(Lt===null?s.memoizedState:Lt.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?Qj:lp),i}function Mu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Eo(i);if(i.$$typeof===w)return ur(i)}throw Error(a(438,String(i)))}function Xh(i){var s=null,c=Be.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=Be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Du(),Be.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),f=0;f<i;f++)c[f]=k;return s.index++,c}function va(i,s){return typeof s=="function"?s(i):s}function Tu(i){var s=kt();return Wh(s,ot,i)}function Wh(i,s,c){var f=i.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=c;var g=i.baseQueue,j=f.pending;if(j!==null){if(g!==null){var A=g.next;g.next=j.next,j.next=A}s.baseQueue=g=j,f.pending=null}if(j=i.baseState,g===null)i.memoizedState=j;else{s=g.next;var M=A=null,R=null,Z=s,ue=!1;do{var he=Z.lane&-536870913;if(he!==Z.lane?(Ve&he)===he:(pa&he)===he){var te=Z.revertLane;if(te===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),he===sl&&(ue=!0);else if((pa&te)===te){Z=Z.next,te===sl&&(ue=!0);continue}else he={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(M=R=he,A=j):R=R.next=he,Be.lanes|=te,fi|=te;he=Z.action,as&&c(j,he),j=Z.hasEagerState?Z.eagerState:c(j,he)}else te={lane:he,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(M=R=te,A=j):R=R.next=te,Be.lanes|=he,fi|=he;Z=Z.next}while(Z!==null&&Z!==s);if(R===null?A=j:R.next=M,!Hr(j,i.memoizedState)&&(It=!0,ue&&(c=ll,c!==null)))throw c;i.memoizedState=j,i.baseState=A,i.baseQueue=R,f.lastRenderedState=j}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Zh(i){var s=kt(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,j=s.memoizedState;if(g!==null){c.pending=null;var A=g=g.next;do j=i(j,A.action),A=A.next;while(A!==g);Hr(j,s.memoizedState)||(It=!0),s.memoizedState=j,s.baseQueue===null&&(s.baseState=j),c.lastRenderedState=j}return[j,f]}function fj(i,s,c){var f=Be,g=kt(),j=Ke;if(j){if(c===void 0)throw Error(a(407));c=c()}else c=s();var A=!Hr((ot||g).memoizedState,c);if(A&&(g.memoizedState=c,It=!0),g=g.queue,tp(pj.bind(null,f,g,i),[i]),g.getSnapshot!==s||A||Lt!==null&&Lt.memoizedState.tag&1){if(f.flags|=2048,ml(9,{destroy:void 0},hj.bind(null,f,g,c,s),null),pt===null)throw Error(a(349));j||(pa&127)!==0||mj(f,s,c)}return c}function mj(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Be.updateQueue,s===null?(s=Du(),Be.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function hj(i,s,c,f){s.value=c,s.getSnapshot=f,vj(s)&&gj(i)}function pj(i,s,c){return c(function(){vj(s)&&gj(i)})}function vj(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!Hr(i,c)}catch{return!0}}function gj(i){var s=Ki(i,2);s!==null&&Rr(s,i,2)}function Jh(i){var s=Sr();if(typeof i=="function"){var c=i;if(i=c(),as){Hn(!0);try{c()}finally{Hn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:i},s}function xj(i,s,c,f){return i.baseState=c,Wh(i,ot,typeof f=="function"?f:va)}function oP(i,s,c,f,g){if(qu(i))throw Error(a(485));if(i=s.action,i!==null){var j={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){j.listeners.push(A)}};q.T!==null?c(!0):j.isTransition=!1,f(j),c=s.pending,c===null?(j.next=s.pending=j,yj(s,j)):(j.next=c.next,s.pending=c.next=j)}}function yj(i,s){var c=s.action,f=s.payload,g=i.state;if(s.isTransition){var j=q.T,A={};q.T=A;try{var M=c(g,f),R=q.S;R!==null&&R(A,M),bj(i,s,M)}catch(Z){ep(i,s,Z)}finally{j!==null&&A.types!==null&&(j.types=A.types),q.T=j}}else try{j=c(g,f),bj(i,s,j)}catch(Z){ep(i,s,Z)}}function bj(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){jj(i,s,f)},function(f){return ep(i,s,f)}):jj(i,s,c)}function jj(i,s,c){s.status="fulfilled",s.value=c,Nj(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,yj(i,c)))}function ep(i,s,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,Nj(s),s=s.next;while(s!==f)}i.action=null}function Nj(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function _j(i,s){return s}function Sj(i,s){if(Ke){var c=pt.formState;if(c!==null){e:{var f=Be;if(Ke){if(yt){t:{for(var g=yt,j=fn;g.nodeType!==8;){if(!j){g=null;break t}if(g=hn(g.nextSibling),g===null){g=null;break t}}j=g.data,g=j==="F!"||j==="F"?g:null}if(g){yt=hn(g.nextSibling),f=g.data==="F!";break e}}ni(f)}f=!1}f&&(s=c[0])}}return c=Sr(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_j,lastRenderedState:s},c.queue=f,c=Hj.bind(null,Be,f),f.dispatch=c,f=Jh(!1),j=sp.bind(null,Be,!1,f.queue),f=Sr(),g={state:s,dispatch:null,action:i,pending:null},f.queue=g,c=oP.bind(null,Be,g,j,c),g.dispatch=c,f.memoizedState=i,[s,c,!1]}function wj(i){var s=kt();return Cj(s,ot,i)}function Cj(i,s,c){if(s=Wh(i,s,_j)[0],i=Tu(va)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Eo(s)}catch(A){throw A===ol?_u:A}else f=s;s=kt();var g=s.queue,j=g.dispatch;return c!==s.memoizedState&&(Be.flags|=2048,ml(9,{destroy:void 0},cP.bind(null,g,c),null)),[f,j,i]}function cP(i,s){i.action=s}function Aj(i){var s=kt(),c=ot;if(c!==null)return Cj(s,c,i);kt(),s=s.memoizedState,c=kt();var f=c.queue.dispatch;return c.memoizedState=i,[s,f,!1]}function ml(i,s,c,f){return i={tag:i,create:c,deps:f,inst:s,next:null},s=Be.updateQueue,s===null&&(s=Du(),Be.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,s.lastEffect=i),i}function Ej(){return kt().memoizedState}function Pu(i,s,c,f){var g=Sr();Be.flags|=i,g.memoizedState=ml(1|s,{destroy:void 0},c,f===void 0?null:f)}function ku(i,s,c,f){var g=kt();f=f===void 0?null:f;var j=g.memoizedState.inst;ot!==null&&f!==null&&Fh(f,ot.memoizedState.deps)?g.memoizedState=ml(s,j,c,f):(Be.flags|=i,g.memoizedState=ml(1|s,j,c,f))}function zj(i,s){Pu(8390656,8,i,s)}function tp(i,s){ku(2048,8,i,s)}function uP(i){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=Du(),Be.updateQueue=s,s.events=[i];else{var c=s.events;c===null?s.events=[i]:c.push(i)}}function Oj(i){var s=kt().memoizedState;return uP({ref:s,nextImpl:i}),function(){if((rt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function Dj(i,s){return ku(4,2,i,s)}function Mj(i,s){return ku(4,4,i,s)}function Tj(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Pj(i,s,c){c=c!=null?c.concat([i]):null,ku(4,4,Tj.bind(null,s,i),c)}function rp(){}function kj(i,s){var c=kt();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&Fh(s,f[1])?f[0]:(c.memoizedState=[i,s],i)}function qj(i,s){var c=kt();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&Fh(s,f[1]))return f[0];if(f=i(),as){Hn(!0);try{i()}finally{Hn(!1)}}return c.memoizedState=[f,s],f}function np(i,s,c){return c===void 0||(pa&1073741824)!==0&&(Ve&261930)===0?i.memoizedState=s:(i.memoizedState=c,i=RN(),Be.lanes|=i,fi|=i,c)}function Rj(i,s,c,f){return Hr(c,s)?c:ul.current!==null?(i=np(i,c,f),Hr(i,s)||(It=!0),i):(pa&42)===0||(pa&1073741824)!==0&&(Ve&261930)===0?(It=!0,i.memoizedState=c):(i=RN(),Be.lanes|=i,fi|=i,s)}function Lj(i,s,c,f,g){var j=J.p;J.p=j!==0&&8>j?j:8;var A=q.T,M={};q.T=M,sp(i,!1,s,c);try{var R=g(),Z=q.S;if(Z!==null&&Z(M,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ue=iP(R,f);zo(i,s,ue,Kr(i))}else zo(i,s,f,Kr(i))}catch(he){zo(i,s,{then:function(){},status:"rejected",reason:he},Kr())}finally{J.p=j,A!==null&&M.types!==null&&(A.types=M.types),q.T=A}}function dP(){}function ap(i,s,c,f){if(i.tag!==5)throw Error(a(476));var g=Ij(i).queue;Lj(i,g,s,Q,c===null?dP:function(){return $j(i),c(f)})}function Ij(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:Q},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function $j(i){var s=Ij(i);s.next===null&&(s=i.alternate.memoizedState),zo(i,s.next.queue,{},Kr())}function ip(){return ur(Qo)}function Bj(){return kt().memoizedState}function Uj(){return kt().memoizedState}function fP(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=Kr();i=si(c);var f=li(s,i,c);f!==null&&(Rr(f,s,c),So(f,s,c)),s={cache:Ph()},i.payload=s;return}s=s.return}}function mP(i,s,c){var f=Kr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},qu(i)?Gj(s,c):(c=_h(i,s,c,f),c!==null&&(Rr(c,i,f),Fj(c,s,f)))}function Hj(i,s,c){var f=Kr();zo(i,s,c,f)}function zo(i,s,c,f){var g={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(qu(i))Gj(s,g);else{var j=i.alternate;if(i.lanes===0&&(j===null||j.lanes===0)&&(j=s.lastRenderedReducer,j!==null))try{var A=s.lastRenderedState,M=j(A,c);if(g.hasEagerState=!0,g.eagerState=M,Hr(M,A))return vu(i,s,g,0),pt===null&&pu(),!1}catch{}if(c=_h(i,s,g,f),c!==null)return Rr(c,i,f),Fj(c,s,f),!0}return!1}function sp(i,s,c,f){if(f={lane:2,revertLane:Lp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},qu(i)){if(s)throw Error(a(479))}else s=_h(i,c,f,2),s!==null&&Rr(s,i,2)}function qu(i){var s=i.alternate;return i===Be||s!==null&&s===Be}function Gj(i,s){dl=zu=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function Fj(i,s,c){if((c&4194048)!==0){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,Xb(i,c)}}var Oo={readContext:ur,use:Mu,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Oo.useEffectEvent=Et;var Qj={readContext:ur,use:Mu,useCallback:function(i,s){return Sr().memoizedState=[i,s===void 0?null:s],i},useContext:ur,useEffect:zj,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,Pu(4194308,4,Tj.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Pu(4194308,4,i,s)},useInsertionEffect:function(i,s){Pu(4,2,i,s)},useMemo:function(i,s){var c=Sr();s=s===void 0?null:s;var f=i();if(as){Hn(!0);try{i()}finally{Hn(!1)}}return c.memoizedState=[f,s],f},useReducer:function(i,s,c){var f=Sr();if(c!==void 0){var g=c(s);if(as){Hn(!0);try{c(s)}finally{Hn(!1)}}}else g=s;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=mP.bind(null,Be,i),[f.memoizedState,i]},useRef:function(i){var s=Sr();return i={current:i},s.memoizedState=i},useState:function(i){i=Jh(i);var s=i.queue,c=Hj.bind(null,Be,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:rp,useDeferredValue:function(i,s){var c=Sr();return np(c,i,s)},useTransition:function(){var i=Jh(!1);return i=Lj.bind(null,Be,i.queue,!0,!1),Sr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var f=Be,g=Sr();if(Ke){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),pt===null)throw Error(a(349));(Ve&127)!==0||mj(f,s,c)}g.memoizedState=c;var j={value:c,getSnapshot:s};return g.queue=j,zj(pj.bind(null,f,j,i),[i]),f.flags|=2048,ml(9,{destroy:void 0},hj.bind(null,f,j,c,s),null),c},useId:function(){var i=Sr(),s=pt.identifierPrefix;if(Ke){var c=Qn,f=Fn;c=(f&~(1<<32-_r(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Ou++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=sP++,s="_"+s+"r_"+c.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:ip,useFormState:Sj,useActionState:Sj,useOptimistic:function(i){var s=Sr();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=sp.bind(null,Be,!0,c),c.dispatch=s,[i,s]},useMemoCache:Xh,useCacheRefresh:function(){return Sr().memoizedState=fP.bind(null,Be)},useEffectEvent:function(i){var s=Sr(),c={impl:i};return s.memoizedState=c,function(){if((rt&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},lp={readContext:ur,use:Mu,useCallback:kj,useContext:ur,useEffect:tp,useImperativeHandle:Pj,useInsertionEffect:Dj,useLayoutEffect:Mj,useMemo:qj,useReducer:Tu,useRef:Ej,useState:function(){return Tu(va)},useDebugValue:rp,useDeferredValue:function(i,s){var c=kt();return Rj(c,ot.memoizedState,i,s)},useTransition:function(){var i=Tu(va)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:Eo(i),s]},useSyncExternalStore:fj,useId:Bj,useHostTransitionStatus:ip,useFormState:wj,useActionState:wj,useOptimistic:function(i,s){var c=kt();return xj(c,ot,i,s)},useMemoCache:Xh,useCacheRefresh:Uj};lp.useEffectEvent=Oj;var Vj={readContext:ur,use:Mu,useCallback:kj,useContext:ur,useEffect:tp,useImperativeHandle:Pj,useInsertionEffect:Dj,useLayoutEffect:Mj,useMemo:qj,useReducer:Zh,useRef:Ej,useState:function(){return Zh(va)},useDebugValue:rp,useDeferredValue:function(i,s){var c=kt();return ot===null?np(c,i,s):Rj(c,ot.memoizedState,i,s)},useTransition:function(){var i=Zh(va)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:Eo(i),s]},useSyncExternalStore:fj,useId:Bj,useHostTransitionStatus:ip,useFormState:Aj,useActionState:Aj,useOptimistic:function(i,s){var c=kt();return ot!==null?xj(c,ot,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Xh,useCacheRefresh:Uj};Vj.useEffectEvent=Oj;function op(i,s,c,f){s=i.memoizedState,c=c(f,s),c=c==null?s:v({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var cp={enqueueSetState:function(i,s,c){i=i._reactInternals;var f=Kr(),g=si(f);g.payload=s,c!=null&&(g.callback=c),s=li(i,g,f),s!==null&&(Rr(s,i,f),So(s,i,f))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var f=Kr(),g=si(f);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=li(i,g,f),s!==null&&(Rr(s,i,f),So(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=Kr(),f=si(c);f.tag=2,s!=null&&(f.callback=s),s=li(i,f,c),s!==null&&(Rr(s,i,c),So(s,i,c))}};function Yj(i,s,c,f,g,j,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,j,A):s.prototype&&s.prototype.isPureReactComponent?!vo(c,f)||!vo(g,j):!0}function Kj(i,s,c,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==i&&cp.enqueueReplaceState(s,s.state,null)}function is(i,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(i=i.defaultProps){c===s&&(c=v({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Xj(i){hu(i)}function Wj(i){console.error(i)}function Zj(i){hu(i)}function Ru(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function Jj(i,s,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function up(i,s,c){return c=si(c),c.tag=3,c.payload={element:null},c.callback=function(){Ru(i,s)},c}function eN(i){return i=si(i),i.tag=3,i}function tN(i,s,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var j=f.value;i.payload=function(){return g(j)},i.callback=function(){Jj(s,c,f)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Jj(s,c,f),typeof g!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var M=f.stack;this.componentDidCatch(f.value,{componentStack:M!==null?M:""})})}function hP(i,s,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&il(s,c,g,!0),c=Fr.current,c!==null){switch(c.tag){case 31:case 13:return mn===null?Ku():c.alternate===null&&zt===0&&(zt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===Su?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),kp(i,f,g)),!1;case 22:return c.flags|=65536,f===Su?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),kp(i,f,g)),!1}throw Error(a(435,c.tag))}return kp(i,f,g),Ku(),!1}if(Ke)return s=Fr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,f!==zh&&(i=Error(a(422),{cause:f}),yo(cn(i,c)))):(f!==zh&&(s=Error(a(423),{cause:f}),yo(cn(s,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=cn(f,c),g=up(i.stateNode,f,g),$h(i,g),zt!==4&&(zt=2)),!1;var j=Error(a(520),{cause:f});if(j=cn(j,c),Lo===null?Lo=[j]:Lo.push(j),zt!==4&&(zt=2),s===null)return!0;f=cn(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=up(c.stateNode,f,i),$h(c,i),!1;case 1:if(s=c.type,j=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(mi===null||!mi.has(j))))return c.flags|=65536,g&=-g,c.lanes|=g,g=eN(g),tN(g,i,c,f),$h(c,g),!1}c=c.return}while(c!==null);return!1}var dp=Error(a(461)),It=!1;function dr(i,s,c,f){s.child=i===null?ij(s,null,c,f):ns(s,i.child,c,f)}function rN(i,s,c,f,g){c=c.render;var j=s.ref;if("ref"in f){var A={};for(var M in f)M!=="ref"&&(A[M]=f[M])}else A=f;return Ji(s),f=Qh(i,s,c,A,j,g),M=Vh(),i!==null&&!It?(Yh(i,s,g),ga(i,s,g)):(Ke&&M&&Ah(s),s.flags|=1,dr(i,s,f,g),s.child)}function nN(i,s,c,f,g){if(i===null){var j=c.type;return typeof j=="function"&&!Sh(j)&&j.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=j,aN(i,s,j,f,g)):(i=xu(c.type,null,f,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(j=i.child,!yp(i,g)){var A=j.memoizedProps;if(c=c.compare,c=c!==null?c:vo,c(A,f)&&i.ref===s.ref)return ga(i,s,g)}return s.flags|=1,i=da(j,f),i.ref=s.ref,i.return=s,s.child=i}function aN(i,s,c,f,g){if(i!==null){var j=i.memoizedProps;if(vo(j,f)&&i.ref===s.ref)if(It=!1,s.pendingProps=f=j,yp(i,g))(i.flags&131072)!==0&&(It=!0);else return s.lanes=i.lanes,ga(i,s,g)}return fp(i,s,c,f,g)}function iN(i,s,c,f){var g=f.children,j=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(j=j!==null?j.baseLanes|c:c,i!==null){for(f=s.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~j}else f=0,s.child=null;return sN(i,s,j,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Nu(s,j!==null?j.cachePool:null),j!==null?oj(s,j):Uh(),cj(s);else return f=s.lanes=536870912,sN(i,s,j!==null?j.baseLanes|c:c,c,f)}else j!==null?(Nu(s,j.cachePool),oj(s,j),ci(),s.memoizedState=null):(i!==null&&Nu(s,null),Uh(),ci());return dr(i,s,g,c),s.child}function Do(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sN(i,s,c,f,g){var j=qh();return j=j===null?null:{parent:Rt._currentValue,pool:j},s.memoizedState={baseLanes:c,cachePool:j},i!==null&&Nu(s,null),Uh(),cj(s),i!==null&&il(i,s,f,!0),s.childLanes=g,null}function Lu(i,s){return s=$u({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function lN(i,s,c){return ns(s,i.child,null,c),i=Lu(s,s.pendingProps),i.flags|=2,Qr(s),s.memoizedState=null,i}function pP(i,s,c){var f=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ke){if(f.mode==="hidden")return i=Lu(s,f),s.lanes=536870912,Do(null,i);if(Gh(s),(i=yt)?(i=y1(i,fn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ti!==null?{id:Fn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},c=G0(i),c.return=s,s.child=c,cr=s,yt=null)):i=null,i===null)throw ni(s);return s.lanes=536870912,null}return Lu(s,f)}var j=i.memoizedState;if(j!==null){var A=j.dehydrated;if(Gh(s),g)if(s.flags&256)s.flags&=-257,s=lN(i,s,c);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(a(558));else if(It||il(i,s,c,!1),g=(c&i.childLanes)!==0,It||g){if(f=pt,f!==null&&(A=Wb(f,c),A!==0&&A!==j.retryLane))throw j.retryLane=A,Ki(i,A),Rr(f,i,A),dp;Ku(),s=lN(i,s,c)}else i=j.treeContext,yt=hn(A.nextSibling),cr=s,Ke=!0,ri=null,fn=!1,i!==null&&V0(s,i),s=Lu(s,f),s.flags|=4096;return s}return i=da(i.child,{mode:f.mode,children:f.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Iu(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function fp(i,s,c,f,g){return Ji(s),c=Qh(i,s,c,f,void 0,g),f=Vh(),i!==null&&!It?(Yh(i,s,g),ga(i,s,g)):(Ke&&f&&Ah(s),s.flags|=1,dr(i,s,c,g),s.child)}function oN(i,s,c,f,g,j){return Ji(s),s.updateQueue=null,c=dj(s,f,c,g),uj(i),f=Vh(),i!==null&&!It?(Yh(i,s,j),ga(i,s,j)):(Ke&&f&&Ah(s),s.flags|=1,dr(i,s,c,j),s.child)}function cN(i,s,c,f,g){if(Ji(s),s.stateNode===null){var j=tl,A=c.contextType;typeof A=="object"&&A!==null&&(j=ur(A)),j=new c(f,j),s.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=cp,s.stateNode=j,j._reactInternals=s,j=s.stateNode,j.props=f,j.state=s.memoizedState,j.refs={},Lh(s),A=c.contextType,j.context=typeof A=="object"&&A!==null?ur(A):tl,j.state=s.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(op(s,c,A,f),j.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(A=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),A!==j.state&&cp.enqueueReplaceState(j,j.state,null),Co(s,f,j,g),wo(),j.state=s.memoizedState),typeof j.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(i===null){j=s.stateNode;var M=s.memoizedProps,R=is(c,M);j.props=R;var Z=j.context,ue=c.contextType;A=tl,typeof ue=="object"&&ue!==null&&(A=ur(ue));var he=c.getDerivedStateFromProps;ue=typeof he=="function"||typeof j.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,ue||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(M||Z!==A)&&Kj(s,j,f,A),ii=!1;var te=s.memoizedState;j.state=te,Co(s,f,j,g),wo(),Z=s.memoizedState,M||te!==Z||ii?(typeof he=="function"&&(op(s,c,he,f),Z=s.memoizedState),(R=ii||Yj(s,c,R,f,te,Z,A))?(ue||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(s.flags|=4194308)):(typeof j.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=Z),j.props=f,j.state=Z,j.context=A,f=R):(typeof j.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{j=s.stateNode,Ih(i,s),A=s.memoizedProps,ue=is(c,A),j.props=ue,he=s.pendingProps,te=j.context,Z=c.contextType,R=tl,typeof Z=="object"&&Z!==null&&(R=ur(Z)),M=c.getDerivedStateFromProps,(Z=typeof M=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(A!==he||te!==R)&&Kj(s,j,f,R),ii=!1,te=s.memoizedState,j.state=te,Co(s,f,j,g),wo();var ie=s.memoizedState;A!==he||te!==ie||ii||i!==null&&i.dependencies!==null&&bu(i.dependencies)?(typeof M=="function"&&(op(s,c,M,f),ie=s.memoizedState),(ue=ii||Yj(s,c,ue,f,te,ie,R)||i!==null&&i.dependencies!==null&&bu(i.dependencies))?(Z||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(f,ie,R),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(f,ie,R)),typeof j.componentDidUpdate=="function"&&(s.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof j.componentDidUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=ie),j.props=f,j.state=ie,j.context=R,f=ue):(typeof j.componentDidUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),f=!1)}return j=f,Iu(i,s),f=(s.flags&128)!==0,j||f?(j=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:j.render(),s.flags|=1,i!==null&&f?(s.child=ns(s,i.child,null,g),s.child=ns(s,null,c,g)):dr(i,s,c,g),s.memoizedState=j.state,i=s.child):i=ga(i,s,g),i}function uN(i,s,c,f){return Wi(),s.flags|=256,dr(i,s,c,f),s.child}var mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hp(i){return{baseLanes:i,cachePool:J0()}}function pp(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=Yr),i}function dN(i,s,c){var f=s.pendingProps,g=!1,j=(s.flags&128)!==0,A;if((A=j)||(A=i!==null&&i.memoizedState===null?!1:(Pt.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ke){if(g?oi(s):ci(),(i=yt)?(i=y1(i,fn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ti!==null?{id:Fn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},c=G0(i),c.return=s,s.child=c,cr=s,yt=null)):i=null,i===null)throw ni(s);return Wp(i)?s.lanes=32:s.lanes=536870912,null}var M=f.children;return f=f.fallback,g?(ci(),g=s.mode,M=$u({mode:"hidden",children:M},g),f=Xi(f,g,c,null),M.return=s,f.return=s,M.sibling=f,s.child=M,f=s.child,f.memoizedState=hp(c),f.childLanes=pp(i,A,c),s.memoizedState=mp,Do(null,f)):(oi(s),vp(s,M))}var R=i.memoizedState;if(R!==null&&(M=R.dehydrated,M!==null)){if(j)s.flags&256?(oi(s),s.flags&=-257,s=gp(i,s,c)):s.memoizedState!==null?(ci(),s.child=i.child,s.flags|=128,s=null):(ci(),M=f.fallback,g=s.mode,f=$u({mode:"visible",children:f.children},g),M=Xi(M,g,c,null),M.flags|=2,f.return=s,M.return=s,f.sibling=M,s.child=f,ns(s,i.child,null,c),f=s.child,f.memoizedState=hp(c),f.childLanes=pp(i,A,c),s.memoizedState=mp,s=Do(null,f));else if(oi(s),Wp(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var Z=A.dgst;A=Z,f=Error(a(419)),f.stack="",f.digest=A,yo({value:f,source:null,stack:null}),s=gp(i,s,c)}else if(It||il(i,s,c,!1),A=(c&i.childLanes)!==0,It||A){if(A=pt,A!==null&&(f=Wb(A,c),f!==0&&f!==R.retryLane))throw R.retryLane=f,Ki(i,f),Rr(A,i,f),dp;Xp(M)||Ku(),s=gp(i,s,c)}else Xp(M)?(s.flags|=192,s.child=i.child,s=null):(i=R.treeContext,yt=hn(M.nextSibling),cr=s,Ke=!0,ri=null,fn=!1,i!==null&&V0(s,i),s=vp(s,f.children),s.flags|=4096);return s}return g?(ci(),M=f.fallback,g=s.mode,R=i.child,Z=R.sibling,f=da(R,{mode:"hidden",children:f.children}),f.subtreeFlags=R.subtreeFlags&65011712,Z!==null?M=da(Z,M):(M=Xi(M,g,c,null),M.flags|=2),M.return=s,f.return=s,f.sibling=M,s.child=f,Do(null,f),f=s.child,M=i.child.memoizedState,M===null?M=hp(c):(g=M.cachePool,g!==null?(R=Rt._currentValue,g=g.parent!==R?{parent:R,pool:R}:g):g=J0(),M={baseLanes:M.baseLanes|c,cachePool:g}),f.memoizedState=M,f.childLanes=pp(i,A,c),s.memoizedState=mp,Do(i.child,f)):(oi(s),c=i.child,i=c.sibling,c=da(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=c,s.memoizedState=null,c)}function vp(i,s){return s=$u({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function $u(i,s){return i=Gr(22,i,null,s),i.lanes=0,i}function gp(i,s,c){return ns(s,i.child,null,c),i=vp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function fN(i,s,c){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),Mh(i.return,s,c)}function xp(i,s,c,f,g,j){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g,treeForkCount:j}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=f,A.tail=c,A.tailMode=g,A.treeForkCount=j)}function mN(i,s,c){var f=s.pendingProps,g=f.revealOrder,j=f.tail;f=f.children;var A=Pt.current,M=(A&2)!==0;if(M?(A=A&1|2,s.flags|=128):A&=1,me(Pt,A),dr(i,s,f,c),f=Ke?xo:0,!M&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fN(i,c,s);else if(i.tag===19)fN(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=s.child,g=null;c!==null;)i=c.alternate,i!==null&&Eu(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),xp(s,!1,g,c,j,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&Eu(i)===null){s.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}xp(s,!0,c,null,j,f);break;case"together":xp(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function ga(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),fi|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(il(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(a(153));if(s.child!==null){for(i=s.child,c=da(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=da(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function yp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&bu(i)))}function vP(i,s,c){switch(s.tag){case 3:Ee(s,s.stateNode.containerInfo),ai(s,Rt,i.memoizedState.cache),Wi();break;case 27:case 5:Y(s);break;case 4:Ee(s,s.stateNode.containerInfo);break;case 10:ai(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Gh(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(oi(s),s.flags|=128,null):(c&s.child.childLanes)!==0?dN(i,s,c):(oi(s),i=ga(i,s,c),i!==null?i.sibling:null);oi(s);break;case 19:var g=(i.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(il(i,s,c,!1),f=(c&s.childLanes)!==0),g){if(f)return mN(i,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),me(Pt,Pt.current),f)break;return null;case 22:return s.lanes=0,iN(i,s,c,s.pendingProps);case 24:ai(s,Rt,i.memoizedState.cache)}return ga(i,s,c)}function hN(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)It=!0;else{if(!yp(i,c)&&(s.flags&128)===0)return It=!1,vP(i,s,c);It=(i.flags&131072)!==0}else It=!1,Ke&&(s.flags&1048576)!==0&&Q0(s,xo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(i=ts(s.elementType),s.type=i,typeof i=="function")Sh(i)?(f=is(i,f),s.tag=1,s=cN(null,s,i,f,c)):(s.tag=0,s=fp(null,s,i,f,c));else{if(i!=null){var g=i.$$typeof;if(g===E){s.tag=11,s=rN(null,s,i,f,c);break e}else if(g===L){s.tag=14,s=nN(null,s,i,f,c);break e}}throw s=oe(i)||i,Error(a(306,s,""))}}return s;case 0:return fp(i,s,s.type,s.pendingProps,c);case 1:return f=s.type,g=is(f,s.pendingProps),cN(i,s,f,g,c);case 3:e:{if(Ee(s,s.stateNode.containerInfo),i===null)throw Error(a(387));f=s.pendingProps;var j=s.memoizedState;g=j.element,Ih(i,s),Co(s,f,null,c);var A=s.memoizedState;if(f=A.cache,ai(s,Rt,f),f!==j.cache&&Th(s,[Rt],c,!0),wo(),f=A.element,j.isDehydrated)if(j={element:f,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=j,s.memoizedState=j,s.flags&256){s=uN(i,s,f,c);break e}else if(f!==g){g=cn(Error(a(424)),s),yo(g),s=uN(i,s,f,c);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,yt=hn(i.firstChild),cr=s,Ke=!0,ri=null,fn=!0,c=ij(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Wi(),f===g){s=ga(i,s,c);break e}dr(i,s,f,c)}s=s.child}return s;case 26:return Iu(i,s),i===null?(c=w1(s.type,null,s.pendingProps,null))?s.memoizedState=c:Ke||(c=s.type,i=s.pendingProps,f=rd(H.current).createElement(c),f[or]=s,f[Dr]=i,fr(f,c,i),Wt(f),s.stateNode=f):s.memoizedState=w1(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Y(s),i===null&&Ke&&(f=s.stateNode=N1(s.type,s.pendingProps,H.current),cr=s,fn=!0,g=yt,gi(s.type)?(Zp=g,yt=hn(f.firstChild)):yt=g),dr(i,s,s.pendingProps.children,c),Iu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ke&&((g=f=yt)&&(f=QP(f,s.type,s.pendingProps,fn),f!==null?(s.stateNode=f,cr=s,yt=hn(f.firstChild),fn=!1,g=!0):g=!1),g||ni(s)),Y(s),g=s.type,j=s.pendingProps,A=i!==null?i.memoizedProps:null,f=j.children,Vp(g,j)?f=null:A!==null&&Vp(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=Qh(i,s,lP,null,null,c),Qo._currentValue=g),Iu(i,s),dr(i,s,f,c),s.child;case 6:return i===null&&Ke&&((i=c=yt)&&(c=VP(c,s.pendingProps,fn),c!==null?(s.stateNode=c,cr=s,yt=null,i=!0):i=!1),i||ni(s)),null;case 13:return dN(i,s,c);case 4:return Ee(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=ns(s,null,f,c):dr(i,s,f,c),s.child;case 11:return rN(i,s,s.type,s.pendingProps,c);case 7:return dr(i,s,s.pendingProps,c),s.child;case 8:return dr(i,s,s.pendingProps.children,c),s.child;case 12:return dr(i,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,ai(s,s.type,f.value),dr(i,s,f.children,c),s.child;case 9:return g=s.type._context,f=s.pendingProps.children,Ji(s),g=ur(g),f=f(g),s.flags|=1,dr(i,s,f,c),s.child;case 14:return nN(i,s,s.type,s.pendingProps,c);case 15:return aN(i,s,s.type,s.pendingProps,c);case 19:return mN(i,s,c);case 31:return pP(i,s,c);case 22:return iN(i,s,c,s.pendingProps);case 24:return Ji(s),f=ur(Rt),i===null?(g=qh(),g===null&&(g=pt,j=Ph(),g.pooledCache=j,j.refCount++,j!==null&&(g.pooledCacheLanes|=c),g=j),s.memoizedState={parent:f,cache:g},Lh(s),ai(s,Rt,g)):((i.lanes&c)!==0&&(Ih(i,s),Co(s,null,null,c),wo()),g=i.memoizedState,j=s.memoizedState,g.parent!==f?(g={parent:f,cache:f},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ai(s,Rt,f)):(f=j.cache,ai(s,Rt,f),f!==g.cache&&Th(s,[Rt],c,!0))),dr(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function xa(i){i.flags|=4}function bp(i,s,c,f,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(BN())i.flags|=8192;else throw rs=Su,Rh}else i.flags&=-16777217}function pN(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!O1(s))if(BN())i.flags|=8192;else throw rs=Su,Rh}function Bu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?De():536870912,i.lanes|=s,gl|=s)}function Mo(i,s){if(!Ke)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function bt(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(s)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,s}function gP(i,s,c){var f=s.pendingProps;switch(Eh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return bt(s),null;case 3:return c=s.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),ha(Rt),ne(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(al(s)?xa(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Oh())),bt(s),null;case 26:var g=s.type,j=s.memoizedState;return i===null?(xa(s),j!==null?(bt(s),pN(s,j)):(bt(s),bp(s,g,null,f,c))):j?j!==i.memoizedState?(xa(s),bt(s),pN(s,j)):(bt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==f&&xa(s),bt(s),bp(s,g,i,f,c)),null;case 27:if(I(s),c=H.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return bt(s),null}i=xe.current,al(s)?Y0(s):(i=N1(g,f,c),s.stateNode=i,xa(s))}return bt(s),null;case 5:if(I(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return bt(s),null}if(j=xe.current,al(s))Y0(s);else{var A=rd(H.current);switch(j){case 1:j=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:j=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":j=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":j=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":j=A.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof f.is=="string"?A.createElement("select",{is:f.is}):A.createElement("select"),f.multiple?j.multiple=!0:f.size&&(j.size=f.size);break;default:j=typeof f.is=="string"?A.createElement(g,{is:f.is}):A.createElement(g)}}j[or]=s,j[Dr]=f;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)j.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=j;e:switch(fr(j,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&xa(s)}}return bt(s),bp(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,c),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(a(166));if(i=H.current,al(s)){if(i=s.stateNode,c=s.memoizedProps,f=null,g=cr,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[or]=s,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||d1(i.nodeValue,c)),i||ni(s,!0)}else i=rd(i).createTextNode(f),i[or]=s,s.stateNode=i}return bt(s),null;case 31:if(c=s.memoizedState,i===null||i.memoizedState!==null){if(f=al(s),c!==null){if(i===null){if(!f)throw Error(a(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[or]=s}else Wi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),i=!1}else c=Oh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return s.flags&256?(Qr(s),s):(Qr(s),null);if((s.flags&128)!==0)throw Error(a(558))}return bt(s),null;case 13:if(f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=al(s),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(a(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[or]=s}else Wi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),g=!1}else g=Oh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Qr(s),s):(Qr(s),null)}return Qr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=s.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),j=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),j!==g&&(f.flags|=2048)),c!==i&&c&&(s.child.flags|=8192),Bu(s,s.updateQueue),bt(s),null);case 4:return ne(),i===null&&Up(s.stateNode.containerInfo),bt(s),null;case 10:return ha(s.type),bt(s),null;case 19:if(ee(Pt),f=s.memoizedState,f===null)return bt(s),null;if(g=(s.flags&128)!==0,j=f.rendering,j===null)if(g)Mo(f,!1);else{if(zt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(j=Eu(i),j!==null){for(s.flags|=128,Mo(f,!1),i=j.updateQueue,s.updateQueue=i,Bu(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)H0(c,i),c=c.sibling;return me(Pt,Pt.current&1|2),Ke&&fa(s,f.treeForkCount),s.child}i=i.sibling}f.tail!==null&&Te()>Qu&&(s.flags|=128,g=!0,Mo(f,!1),s.lanes=4194304)}else{if(!g)if(i=Eu(j),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Bu(s,i),Mo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!j.alternate&&!Ke)return bt(s),null}else 2*Te()-f.renderingStartTime>Qu&&c!==536870912&&(s.flags|=128,g=!0,Mo(f,!1),s.lanes=4194304);f.isBackwards?(j.sibling=s.child,s.child=j):(i=f.last,i!==null?i.sibling=j:s.child=j,f.last=j)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Te(),i.sibling=null,c=Pt.current,me(Pt,g?c&1|2:c&1),Ke&&fa(s,f.treeForkCount),i):(bt(s),null);case 22:case 23:return Qr(s),Hh(),f=s.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),c=s.updateQueue,c!==null&&Bu(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),i!==null&&ee(es),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ha(Rt),bt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function xP(i,s){switch(Eh(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ha(Rt),ne(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return I(s),null;case 31:if(s.memoizedState!==null){if(Qr(s),s.alternate===null)throw Error(a(340));Wi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Qr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Wi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ee(Pt),null;case 4:return ne(),null;case 10:return ha(s.type),null;case 22:case 23:return Qr(s),Hh(),i!==null&&ee(es),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ha(Rt),null;case 25:return null;default:return null}}function vN(i,s){switch(Eh(s),s.tag){case 3:ha(Rt),ne();break;case 26:case 27:case 5:I(s);break;case 4:ne();break;case 31:s.memoizedState!==null&&Qr(s);break;case 13:Qr(s);break;case 19:ee(Pt);break;case 10:ha(s.type);break;case 22:case 23:Qr(s),Hh(),i!==null&&ee(es);break;case 24:ha(Rt)}}function To(i,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){f=void 0;var j=c.create,A=c.inst;f=j(),A.destroy=f}c=c.next}while(c!==g)}}catch(M){it(s,s.return,M)}}function ui(i,s,c){try{var f=s.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var j=g.next;f=j;do{if((f.tag&i)===i){var A=f.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,g=s;var R=c,Z=M;try{Z()}catch(ue){it(g,R,ue)}}}f=f.next}while(f!==j)}}catch(ue){it(s,s.return,ue)}}function gN(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{lj(s,c)}catch(f){it(i,i.return,f)}}}function xN(i,s,c){c.props=is(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){it(i,s,f)}}function Po(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(g){it(i,s,g)}}function Vn(i,s){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){it(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){it(i,s,g)}else c.current=null}function yN(i){var s=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){it(i,i.return,g)}}function jp(i,s,c){try{var f=i.stateNode;$P(f,i.type,c,s),f[Dr]=s}catch(g){it(i,i.return,g)}}function bN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&gi(i.type)||i.tag===4}function Np(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||bN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&gi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _p(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=ca));else if(f!==4&&(f===27&&gi(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for(_p(i,s,c),i=i.sibling;i!==null;)_p(i,s,c),i=i.sibling}function Uu(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(f!==4&&(f===27&&gi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Uu(i,s,c),i=i.sibling;i!==null;)Uu(i,s,c),i=i.sibling}function jN(i){var s=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);fr(s,f,c),s[or]=i,s[Dr]=c}catch(j){it(i,i.return,j)}}var ya=!1,$t=!1,Sp=!1,NN=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function yP(i,s){if(i=i.containerInfo,Fp=cd,i=P0(i),gh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,j=f.focusNode;f=f.focusOffset;try{c.nodeType,j.nodeType}catch{c=null;break e}var A=0,M=-1,R=-1,Z=0,ue=0,he=i,te=null;t:for(;;){for(var ie;he!==c||g!==0&&he.nodeType!==3||(M=A+g),he!==j||f!==0&&he.nodeType!==3||(R=A+f),he.nodeType===3&&(A+=he.nodeValue.length),(ie=he.firstChild)!==null;)te=he,he=ie;for(;;){if(he===i)break t;if(te===c&&++Z===g&&(M=A),te===j&&++ue===f&&(R=A),(ie=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=ie}c=M===-1||R===-1?null:{start:M,end:R}}else c=null}c=c||{start:0,end:0}}else c=null;for(Qp={focusedElem:i,selectionRange:c},cd=!1,Zt=s;Zt!==null;)if(s=Zt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Zt=i;else for(;Zt!==null;){switch(s=Zt,j=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&j!==null){i=void 0,c=s,g=j.memoizedProps,j=j.memoizedState,f=c.stateNode;try{var _e=is(c.type,g);i=f.getSnapshotBeforeUpdate(_e,j),f.__reactInternalSnapshotBeforeUpdate=i}catch(Pe){it(c,c.return,Pe)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)Kp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Kp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=s.sibling,i!==null){i.return=s.return,Zt=i;break}Zt=s.return}}function _N(i,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ja(i,c),f&4&&To(5,c);break;case 1:if(ja(i,c),f&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(A){it(c,c.return,A)}else{var g=is(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){it(c,c.return,A)}}f&64&&gN(c),f&512&&Po(c,c.return);break;case 3:if(ja(i,c),f&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{lj(i,s)}catch(A){it(c,c.return,A)}}break;case 27:s===null&&f&4&&jN(c);case 26:case 5:ja(i,c),s===null&&f&4&&yN(c),f&512&&Po(c,c.return);break;case 12:ja(i,c);break;case 31:ja(i,c),f&4&&CN(i,c);break;case 13:ja(i,c),f&4&&AN(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=EP.bind(null,c),YP(i,c))));break;case 22:if(f=c.memoizedState!==null||ya,!f){s=s!==null&&s.memoizedState!==null||$t,g=ya;var j=$t;ya=f,($t=s)&&!j?Na(i,c,(c.subtreeFlags&8772)!==0):ja(i,c),ya=g,$t=j}break;case 30:break;default:ja(i,c)}}function SN(i){var s=i.alternate;s!==null&&(i.alternate=null,SN(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&eh(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _t=null,Tr=!1;function ba(i,s,c){for(c=c.child;c!==null;)wN(i,s,c),c=c.sibling}function wN(i,s,c){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(gr,c)}catch{}switch(c.tag){case 26:$t||Vn(c,s),ba(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:$t||Vn(c,s);var f=_t,g=Tr;gi(c.type)&&(_t=c.stateNode,Tr=!1),ba(i,s,c),Ho(c.stateNode),_t=f,Tr=g;break;case 5:$t||Vn(c,s);case 6:if(f=_t,g=Tr,_t=null,ba(i,s,c),_t=f,Tr=g,_t!==null)if(Tr)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(j){it(c,s,j)}else try{_t.removeChild(c.stateNode)}catch(j){it(c,s,j)}break;case 18:_t!==null&&(Tr?(i=_t,g1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),wl(i)):g1(_t,c.stateNode));break;case 4:f=_t,g=Tr,_t=c.stateNode.containerInfo,Tr=!0,ba(i,s,c),_t=f,Tr=g;break;case 0:case 11:case 14:case 15:ui(2,c,s),$t||ui(4,c,s),ba(i,s,c);break;case 1:$t||(Vn(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&xN(c,s,f)),ba(i,s,c);break;case 21:ba(i,s,c);break;case 22:$t=(f=$t)||c.memoizedState!==null,ba(i,s,c),$t=f;break;default:ba(i,s,c)}}function CN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{wl(i)}catch(c){it(s,s.return,c)}}}function AN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wl(i)}catch(c){it(s,s.return,c)}}function bP(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new NN),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new NN),s;default:throw Error(a(435,i.tag))}}function Hu(i,s){var c=bP(i);s.forEach(function(f){if(!c.has(f)){c.add(f);var g=zP.bind(null,i,f);f.then(g,g)}})}function Pr(i,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],j=i,A=s,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(gi(M.type)){_t=M.stateNode,Tr=!1;break e}break;case 5:_t=M.stateNode,Tr=!1;break e;case 3:case 4:_t=M.stateNode.containerInfo,Tr=!0;break e}M=M.return}if(_t===null)throw Error(a(160));wN(j,A,g),_t=null,Tr=!1,j=g.alternate,j!==null&&(j.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)EN(s,i),s=s.sibling}var Mn=null;function EN(i,s){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Pr(s,i),kr(i),f&4&&(ui(3,i,i.return),To(3,i),ui(5,i,i.return));break;case 1:Pr(s,i),kr(i),f&512&&($t||c===null||Vn(c,c.return)),f&64&&ya&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=Mn;if(Pr(s,i),kr(i),f&512&&($t||c===null||Vn(c,c.return)),f&4){var j=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":j=g.getElementsByTagName("title")[0],(!j||j[so]||j[or]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=g.createElement(f),g.head.insertBefore(j,g.querySelector("head > title"))),fr(j,f,c),j[or]=i,Wt(j),f=j;break e;case"link":var A=E1("link","href",g).get(f+(c.href||""));if(A){for(var M=0;M<A.length;M++)if(j=A[M],j.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&j.getAttribute("rel")===(c.rel==null?null:c.rel)&&j.getAttribute("title")===(c.title==null?null:c.title)&&j.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(M,1);break t}}j=g.createElement(f),fr(j,f,c),g.head.appendChild(j);break;case"meta":if(A=E1("meta","content",g).get(f+(c.content||""))){for(M=0;M<A.length;M++)if(j=A[M],j.getAttribute("content")===(c.content==null?null:""+c.content)&&j.getAttribute("name")===(c.name==null?null:c.name)&&j.getAttribute("property")===(c.property==null?null:c.property)&&j.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&j.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(M,1);break t}}j=g.createElement(f),fr(j,f,c),g.head.appendChild(j);break;default:throw Error(a(468,f))}j[or]=i,Wt(j),f=j}i.stateNode=f}else z1(g,i.type,i.stateNode);else i.stateNode=A1(g,f,i.memoizedProps);else j!==f?(j===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):j.count--,f===null?z1(g,i.type,i.stateNode):A1(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&jp(i,i.memoizedProps,c.memoizedProps)}break;case 27:Pr(s,i),kr(i),f&512&&($t||c===null||Vn(c,c.return)),c!==null&&f&4&&jp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Pr(s,i),kr(i),f&512&&($t||c===null||Vn(c,c.return)),i.flags&32){g=i.stateNode;try{Ys(g,"")}catch(_e){it(i,i.return,_e)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,jp(i,g,c!==null?c.memoizedProps:g)),f&1024&&(Sp=!0);break;case 6:if(Pr(s,i),kr(i),f&4){if(i.stateNode===null)throw Error(a(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(_e){it(i,i.return,_e)}}break;case 3:if(id=null,g=Mn,Mn=nd(s.containerInfo),Pr(s,i),Mn=g,kr(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{wl(s.containerInfo)}catch(_e){it(i,i.return,_e)}Sp&&(Sp=!1,zN(i));break;case 4:f=Mn,Mn=nd(i.stateNode.containerInfo),Pr(s,i),kr(i),Mn=f;break;case 12:Pr(s,i),kr(i);break;case 31:Pr(s,i),kr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Hu(i,f)));break;case 13:Pr(s,i),kr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Fu=Te()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Hu(i,f)));break;case 22:g=i.memoizedState!==null;var R=c!==null&&c.memoizedState!==null,Z=ya,ue=$t;if(ya=Z||g,$t=ue||R,Pr(s,i),$t=ue,ya=Z,kr(i),f&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(c===null||R||ya||$t||ss(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){R=c=s;try{if(j=R.stateNode,g)A=j.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=R.stateNode;var he=R.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(_e){it(R,R.return,_e)}}}else if(s.tag===6){if(c===null){R=s;try{R.stateNode.nodeValue=g?"":R.memoizedProps}catch(_e){it(R,R.return,_e)}}}else if(s.tag===18){if(c===null){R=s;try{var ie=R.stateNode;g?x1(ie,!0):x1(R.stateNode,!1)}catch(_e){it(R,R.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Hu(i,c))));break;case 19:Pr(s,i),kr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Hu(i,f)));break;case 30:break;case 21:break;default:Pr(s,i),kr(i)}}function kr(i){var s=i.flags;if(s&2){try{for(var c,f=i.return;f!==null;){if(bN(f)){c=f;break}f=f.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var g=c.stateNode,j=Np(i);Uu(i,j,g);break;case 5:var A=c.stateNode;c.flags&32&&(Ys(A,""),c.flags&=-33);var M=Np(i);Uu(i,M,A);break;case 3:case 4:var R=c.stateNode.containerInfo,Z=Np(i);_p(i,Z,R);break;default:throw Error(a(161))}}catch(ue){it(i,i.return,ue)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function zN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;zN(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ja(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)_N(i,s.alternate,s),s=s.sibling}function ss(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ui(4,s,s.return),ss(s);break;case 1:Vn(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&xN(s,s.return,c),ss(s);break;case 27:Ho(s.stateNode);case 26:case 5:Vn(s,s.return),ss(s);break;case 22:s.memoizedState===null&&ss(s);break;case 30:ss(s);break;default:ss(s)}i=i.sibling}}function Na(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,g=i,j=s,A=j.flags;switch(j.tag){case 0:case 11:case 15:Na(g,j,c),To(4,j);break;case 1:if(Na(g,j,c),f=j,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Z){it(f,f.return,Z)}if(f=j,g=f.updateQueue,g!==null){var M=f.stateNode;try{var R=g.shared.hiddenCallbacks;if(R!==null)for(g.shared.hiddenCallbacks=null,g=0;g<R.length;g++)sj(R[g],M)}catch(Z){it(f,f.return,Z)}}c&&A&64&&gN(j),Po(j,j.return);break;case 27:jN(j);case 26:case 5:Na(g,j,c),c&&f===null&&A&4&&yN(j),Po(j,j.return);break;case 12:Na(g,j,c);break;case 31:Na(g,j,c),c&&A&4&&CN(g,j);break;case 13:Na(g,j,c),c&&A&4&&AN(g,j);break;case 22:j.memoizedState===null&&Na(g,j,c),Po(j,j.return);break;case 30:break;default:Na(g,j,c)}s=s.sibling}}function wp(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&bo(c))}function Cp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&bo(i))}function Tn(i,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ON(i,s,c,f),s=s.sibling}function ON(i,s,c,f){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Tn(i,s,c,f),g&2048&&To(9,s);break;case 1:Tn(i,s,c,f);break;case 3:Tn(i,s,c,f),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&bo(i)));break;case 12:if(g&2048){Tn(i,s,c,f),i=s.stateNode;try{var j=s.memoizedProps,A=j.id,M=j.onPostCommit;typeof M=="function"&&M(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(R){it(s,s.return,R)}}else Tn(i,s,c,f);break;case 31:Tn(i,s,c,f);break;case 13:Tn(i,s,c,f);break;case 23:break;case 22:j=s.stateNode,A=s.alternate,s.memoizedState!==null?j._visibility&2?Tn(i,s,c,f):ko(i,s):j._visibility&2?Tn(i,s,c,f):(j._visibility|=2,hl(i,s,c,f,(s.subtreeFlags&10256)!==0||!1)),g&2048&&wp(A,s);break;case 24:Tn(i,s,c,f),g&2048&&Cp(s.alternate,s);break;default:Tn(i,s,c,f)}}function hl(i,s,c,f,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var j=i,A=s,M=c,R=f,Z=A.flags;switch(A.tag){case 0:case 11:case 15:hl(j,A,M,R,g),To(8,A);break;case 23:break;case 22:var ue=A.stateNode;A.memoizedState!==null?ue._visibility&2?hl(j,A,M,R,g):ko(j,A):(ue._visibility|=2,hl(j,A,M,R,g)),g&&Z&2048&&wp(A.alternate,A);break;case 24:hl(j,A,M,R,g),g&&Z&2048&&Cp(A.alternate,A);break;default:hl(j,A,M,R,g)}s=s.sibling}}function ko(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,f=s,g=f.flags;switch(f.tag){case 22:ko(c,f),g&2048&&wp(f.alternate,f);break;case 24:ko(c,f),g&2048&&Cp(f.alternate,f);break;default:ko(c,f)}s=s.sibling}}var qo=8192;function pl(i,s,c){if(i.subtreeFlags&qo)for(i=i.child;i!==null;)DN(i,s,c),i=i.sibling}function DN(i,s,c){switch(i.tag){case 26:pl(i,s,c),i.flags&qo&&i.memoizedState!==null&&sk(c,Mn,i.memoizedState,i.memoizedProps);break;case 5:pl(i,s,c);break;case 3:case 4:var f=Mn;Mn=nd(i.stateNode.containerInfo),pl(i,s,c),Mn=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=qo,qo=16777216,pl(i,s,c),qo=f):pl(i,s,c));break;default:pl(i,s,c)}}function MN(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ro(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,PN(f,i)}MN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)TN(i),i=i.sibling}function TN(i){switch(i.tag){case 0:case 11:case 15:Ro(i),i.flags&2048&&ui(9,i,i.return);break;case 3:Ro(i);break;case 12:Ro(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Gu(i)):Ro(i);break;default:Ro(i)}}function Gu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,PN(f,i)}MN(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ui(8,s,s.return),Gu(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Gu(s));break;default:Gu(s)}i=i.sibling}}function PN(i,s){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:ui(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:bo(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Zt=f;else e:for(c=i;Zt!==null;){f=Zt;var g=f.sibling,j=f.return;if(SN(f),f===c){Zt=null;break e}if(g!==null){g.return=j,Zt=g;break e}Zt=j}}}var jP={getCacheForType:function(i){var s=ur(Rt),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c},cacheSignal:function(){return ur(Rt).controller.signal}},NP=typeof WeakMap=="function"?WeakMap:Map,rt=0,pt=null,Ge=null,Ve=0,at=0,Vr=null,di=!1,vl=!1,Ap=!1,_a=0,zt=0,fi=0,ls=0,Ep=0,Yr=0,gl=0,Lo=null,qr=null,zp=!1,Fu=0,kN=0,Qu=1/0,Vu=null,mi=null,Ft=0,hi=null,xl=null,Sa=0,Op=0,Dp=null,qN=null,Io=0,Mp=null;function Kr(){return(rt&2)!==0&&Ve!==0?Ve&-Ve:q.T!==null?Lp():Zb()}function RN(){if(Yr===0)if((Ve&536870912)===0||Ke){var i=$s;$s<<=1,($s&3932160)===0&&($s=262144),Yr=i}else Yr=536870912;return i=Fr.current,i!==null&&(i.flags|=32),Yr}function Rr(i,s,c){(i===pt&&(at===2||at===9)||i.cancelPendingCommit!==null)&&(yl(i,0),pi(i,Ve,Yr,!1)),xr(i,c),((rt&2)===0||i!==pt)&&(i===pt&&((rt&2)===0&&(ls|=c),zt===4&&pi(i,Ve,Yr,!1)),Yn(i))}function LN(i,s,c){if((rt&6)!==0)throw Error(a(327));var f=!c&&(s&127)===0&&(s&i.expiredLanes)===0||Hi(i,s),g=f?wP(i,s):Pp(i,s,!0),j=f;do{if(g===0){vl&&!f&&pi(i,s,0,!1);break}else{if(c=i.current.alternate,j&&!_P(c)){g=Pp(i,s,!1),j=!1;continue}if(g===2){if(j=s,i.errorRecoveryDisabledLanes&j)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var M=i;g=Lo;var R=M.current.memoizedState.isDehydrated;if(R&&(yl(M,A).flags|=256),A=Pp(M,A,!1),A!==2){if(Ap&&!R){M.errorRecoveryDisabledLanes|=j,ls|=j,g=4;break e}j=qr,qr=g,j!==null&&(qr===null?qr=j:qr.push.apply(qr,j))}g=A}if(j=!1,g!==2)continue}}if(g===1){yl(i,0),pi(i,s,0,!0);break}e:{switch(f=i,j=g,j){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:pi(f,s,Yr,!di);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(g=Fu+300-Te(),10<g)){if(pi(f,s,Yr,!di),Gn(f,0,!0)!==0)break e;Sa=s,f.timeoutHandle=p1(IN.bind(null,f,c,qr,Vu,zp,s,Yr,ls,gl,di,j,"Throttled",-0,0),g);break e}IN(f,c,qr,Vu,zp,s,Yr,ls,gl,di,j,null,-0,0)}}break}while(!0);Yn(i)}function IN(i,s,c,f,g,j,A,M,R,Z,ue,he,te,ie){if(i.timeoutHandle=-1,he=s.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},DN(s,j,he);var _e=(j&62914560)===j?Fu-Te():(j&4194048)===j?kN-Te():0;if(_e=lk(he,_e),_e!==null){Sa=j,i.cancelPendingCommit=_e(VN.bind(null,i,s,j,c,f,g,A,M,R,ue,he,null,te,ie)),pi(i,j,A,!Z);return}}VN(i,s,j,c,f,g,A,M,R)}function _P(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],j=g.getSnapshot;g=g.value;try{if(!Hr(j(),g))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pi(i,s,c,f){s&=~Ep,s&=~ls,i.suspendedLanes|=s,i.pingedLanes&=~s,f&&(i.warmLanes|=s),f=i.expirationTimes;for(var g=s;0<g;){var j=31-_r(g),A=1<<j;f[j]=-1,g&=~A}c!==0&&Gi(i,c,s)}function Yu(){return(rt&6)===0?($o(0),!1):!0}function Tp(){if(Ge!==null){if(at===0)var i=Ge.return;else i=Ge,ma=Zi=null,Kh(i),cl=null,No=0,i=Ge;for(;i!==null;)vN(i.alternate,i),i=i.return;Ge=null}}function yl(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,HP(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Sa=0,Tp(),pt=i,Ge=c=da(i.current,null),Ve=s,at=0,Vr=null,di=!1,vl=Hi(i,s),Ap=!1,gl=Yr=Ep=ls=fi=zt=0,qr=Lo=null,zp=!1,(s&8)!==0&&(s|=s&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=s;0<f;){var g=31-_r(f),j=1<<g;s|=i[g],f&=~j}return _a=s,pu(),c}function $N(i,s){Be=null,q.H=Oo,s===ol||s===_u?(s=rj(),at=3):s===Rh?(s=rj(),at=4):at=s===dp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vr=s,Ge===null&&(zt=1,Ru(i,cn(s,i.current)))}function BN(){var i=Fr.current;return i===null?!0:(Ve&4194048)===Ve?mn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?i===mn:!1}function UN(){var i=q.H;return q.H=Oo,i===null?Oo:i}function HN(){var i=q.A;return q.A=jP,i}function Ku(){zt=4,di||(Ve&4194048)!==Ve&&Fr.current!==null||(vl=!0),(fi&134217727)===0&&(ls&134217727)===0||pt===null||pi(pt,Ve,Yr,!1)}function Pp(i,s,c){var f=rt;rt|=2;var g=UN(),j=HN();(pt!==i||Ve!==s)&&(Vu=null,yl(i,s)),s=!1;var A=zt;e:do try{if(at!==0&&Ge!==null){var M=Ge,R=Vr;switch(at){case 8:Tp(),A=6;break e;case 3:case 2:case 9:case 6:Fr.current===null&&(s=!0);var Z=at;if(at=0,Vr=null,bl(i,M,R,Z),c&&vl){A=0;break e}break;default:Z=at,at=0,Vr=null,bl(i,M,R,Z)}}SP(),A=zt;break}catch(ue){$N(i,ue)}while(!0);return s&&i.shellSuspendCounter++,ma=Zi=null,rt=f,q.H=g,q.A=j,Ge===null&&(pt=null,Ve=0,pu()),A}function SP(){for(;Ge!==null;)GN(Ge)}function wP(i,s){var c=rt;rt|=2;var f=UN(),g=HN();pt!==i||Ve!==s?(Vu=null,Qu=Te()+500,yl(i,s)):vl=Hi(i,s);e:do try{if(at!==0&&Ge!==null){s=Ge;var j=Vr;t:switch(at){case 1:at=0,Vr=null,bl(i,s,j,1);break;case 2:case 9:if(ej(j)){at=0,Vr=null,FN(s);break}s=function(){at!==2&&at!==9||pt!==i||(at=7),Yn(i)},j.then(s,s);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:ej(j)?(at=0,Vr=null,FN(s)):(at=0,Vr=null,bl(i,s,j,7));break;case 5:var A=null;switch(Ge.tag){case 26:A=Ge.memoizedState;case 5:case 27:var M=Ge;if(A?O1(A):M.stateNode.complete){at=0,Vr=null;var R=M.sibling;if(R!==null)Ge=R;else{var Z=M.return;Z!==null?(Ge=Z,Xu(Z)):Ge=null}break t}}at=0,Vr=null,bl(i,s,j,5);break;case 6:at=0,Vr=null,bl(i,s,j,6);break;case 8:Tp(),zt=6;break e;default:throw Error(a(462))}}CP();break}catch(ue){$N(i,ue)}while(!0);return ma=Zi=null,q.H=f,q.A=g,rt=c,Ge!==null?0:(pt=null,Ve=0,pu(),zt)}function CP(){for(;Ge!==null&&!ce();)GN(Ge)}function GN(i){var s=hN(i.alternate,i,_a);i.memoizedProps=i.pendingProps,s===null?Xu(i):Ge=s}function FN(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=oN(c,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=oN(c,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:Kh(s);default:vN(c,s),s=Ge=H0(s,_a),s=hN(c,s,_a)}i.memoizedProps=i.pendingProps,s===null?Xu(i):Ge=s}function bl(i,s,c,f){ma=Zi=null,Kh(s),cl=null,No=0;var g=s.return;try{if(hP(i,g,s,c,Ve)){zt=1,Ru(i,cn(c,i.current)),Ge=null;return}}catch(j){if(g!==null)throw Ge=g,j;zt=1,Ru(i,cn(c,i.current)),Ge=null;return}s.flags&32768?(Ke||f===1?i=!0:vl||(Ve&536870912)!==0?i=!1:(di=i=!0,(f===2||f===9||f===3||f===6)&&(f=Fr.current,f!==null&&f.tag===13&&(f.flags|=16384))),QN(s,i)):Xu(s)}function Xu(i){var s=i;do{if((s.flags&32768)!==0){QN(s,di);return}i=s.return;var c=gP(s.alternate,s,_a);if(c!==null){Ge=c;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=i}while(s!==null);zt===0&&(zt=5)}function QN(i,s){do{var c=xP(i.alternate,i);if(c!==null){c.flags&=32767,Ge=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){Ge=i;return}Ge=i=c}while(i!==null);zt=6,Ge=null}function VN(i,s,c,f,g,j,A,M,R){i.cancelPendingCommit=null;do Wu();while(Ft!==0);if((rt&6)!==0)throw Error(a(327));if(s!==null){if(s===i.current)throw Error(a(177));if(j=s.lanes|s.childLanes,j|=Nh,io(i,c,j,A,M,R),i===pt&&(Ge=pt=null,Ve=0),xl=s,hi=i,Sa=c,Op=j,Dp=g,qN=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,OP(Un,function(){return ZN(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=q.T,q.T=null,g=J.p,J.p=2,A=rt,rt|=4;try{yP(i,s,c)}finally{rt=A,J.p=g,q.T=f}}Ft=1,YN(),KN(),XN()}}function YN(){if(Ft===1){Ft=0;var i=hi,s=xl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var f=J.p;J.p=2;var g=rt;rt|=4;try{EN(s,i);var j=Qp,A=P0(i.containerInfo),M=j.focusedElem,R=j.selectionRange;if(A!==M&&M&&M.ownerDocument&&T0(M.ownerDocument.documentElement,M)){if(R!==null&&gh(M)){var Z=R.start,ue=R.end;if(ue===void 0&&(ue=Z),"selectionStart"in M)M.selectionStart=Z,M.selectionEnd=Math.min(ue,M.value.length);else{var he=M.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var ie=te.getSelection(),_e=M.textContent.length,Pe=Math.min(R.start,_e),ut=R.end===void 0?Pe:Math.min(R.end,_e);!ie.extend&&Pe>ut&&(A=ut,ut=Pe,Pe=A);var K=M0(M,Pe),G=M0(M,ut);if(K&&G&&(ie.rangeCount!==1||ie.anchorNode!==K.node||ie.anchorOffset!==K.offset||ie.focusNode!==G.node||ie.focusOffset!==G.offset)){var W=he.createRange();W.setStart(K.node,K.offset),ie.removeAllRanges(),Pe>ut?(ie.addRange(W),ie.extend(G.node,G.offset)):(W.setEnd(G.node,G.offset),ie.addRange(W))}}}}for(he=[],ie=M;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<he.length;M++){var fe=he[M];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}cd=!!Fp,Qp=Fp=null}finally{rt=g,J.p=f,q.T=c}}i.current=s,Ft=2}}function KN(){if(Ft===2){Ft=0;var i=hi,s=xl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var f=J.p;J.p=2;var g=rt;rt|=4;try{_N(i,s.alternate,s)}finally{rt=g,J.p=f,q.T=c}}Ft=3}}function XN(){if(Ft===4||Ft===3){Ft=0,Ae();var i=hi,s=xl,c=Sa,f=qN;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ft=5:(Ft=0,xl=hi=null,WN(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(mi=null),Zm(c),s=s.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(gr,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=q.T,g=J.p,J.p=2,q.T=null;try{for(var j=i.onRecoverableError,A=0;A<f.length;A++){var M=f[A];j(M.value,{componentStack:M.stack})}}finally{q.T=s,J.p=g}}(Sa&3)!==0&&Wu(),Yn(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===Mp?Io++:(Io=0,Mp=i):Io=0,$o(0)}}function WN(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,bo(s)))}function Wu(){return YN(),KN(),XN(),ZN()}function ZN(){if(Ft!==5)return!1;var i=hi,s=Op;Op=0;var c=Zm(Sa),f=q.T,g=J.p;try{J.p=32>c?32:c,q.T=null,c=Dp,Dp=null;var j=hi,A=Sa;if(Ft=0,xl=hi=null,Sa=0,(rt&6)!==0)throw Error(a(331));var M=rt;if(rt|=4,TN(j.current),ON(j,j.current,A,c),rt=M,$o(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(gr,j)}catch{}return!0}finally{J.p=g,q.T=f,WN(i,s)}}function JN(i,s,c){s=cn(c,s),s=up(i.stateNode,s,2),i=li(i,s,2),i!==null&&(xr(i,2),Yn(i))}function it(i,s,c){if(i.tag===3)JN(i,i,c);else for(;s!==null;){if(s.tag===3){JN(s,i,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(mi===null||!mi.has(f))){i=cn(c,i),c=eN(2),f=li(s,c,2),f!==null&&(tN(c,f,s,i),xr(f,2),Yn(f));break}}s=s.return}}function kp(i,s,c){var f=i.pingCache;if(f===null){f=i.pingCache=new NP;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(c)||(Ap=!0,g.add(c),i=AP.bind(null,i,s,c),s.then(i,i))}function AP(i,s,c){var f=i.pingCache;f!==null&&f.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,pt===i&&(Ve&c)===c&&(zt===4||zt===3&&(Ve&62914560)===Ve&&300>Te()-Fu?(rt&2)===0&&yl(i,0):Ep|=c,gl===Ve&&(gl=0)),Yn(i)}function e1(i,s){s===0&&(s=De()),i=Ki(i,s),i!==null&&(xr(i,s),Yn(i))}function EP(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),e1(i,c)}function zP(i,s){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(s),e1(i,c)}function OP(i,s){return nn(i,s)}var Zu=null,jl=null,qp=!1,Ju=!1,Rp=!1,vi=0;function Yn(i){i!==jl&&i.next===null&&(jl===null?Zu=jl=i:jl=jl.next=i),Ju=!0,qp||(qp=!0,MP())}function $o(i,s){if(!Rp&&Ju){Rp=!0;do for(var c=!1,f=Zu;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var j=0;else{var A=f.suspendedLanes,M=f.pingedLanes;j=(1<<31-_r(42|i)+1)-1,j&=g&~(A&~M),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(c=!0,a1(f,j))}else j=Ve,j=Gn(f,f===pt?j:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(j&3)===0||Hi(f,j)||(c=!0,a1(f,j));f=f.next}while(c);Rp=!1}}function DP(){t1()}function t1(){Ju=qp=!1;var i=0;vi!==0&&UP()&&(i=vi);for(var s=Te(),c=null,f=Zu;f!==null;){var g=f.next,j=r1(f,s);j===0?(f.next=null,c===null?Zu=g:c.next=g,g===null&&(jl=c)):(c=f,(i!==0||(j&3)!==0)&&(Ju=!0)),f=g}Ft!==0&&Ft!==5||$o(i),vi!==0&&(vi=0)}function r1(i,s){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,j=i.pendingLanes&-62914561;0<j;){var A=31-_r(j),M=1<<A,R=g[A];R===-1?((M&c)===0||(M&f)!==0)&&(g[A]=X(M,s)):R<=s&&(i.expiredLanes|=M),j&=~M}if(s=pt,c=Ve,c=Gn(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===s&&(at===2||at===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&sa(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Hi(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(f!==null&&sa(f),Zm(c)){case 2:case 8:c=vr;break;case 32:c=Un;break;case 268435456:c=an;break;default:c=Un}return f=n1.bind(null,i),c=nn(c,f),i.callbackPriority=s,i.callbackNode=c,s}return f!==null&&f!==null&&sa(f),i.callbackPriority=2,i.callbackNode=null,2}function n1(i,s){if(Ft!==0&&Ft!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Wu()&&i.callbackNode!==c)return null;var f=Ve;return f=Gn(i,i===pt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(LN(i,f,s),r1(i,Te()),i.callbackNode!=null&&i.callbackNode===c?n1.bind(null,i):null)}function a1(i,s){if(Wu())return null;LN(i,s,!0)}function MP(){GP(function(){(rt&6)!==0?nn(Nt,DP):t1()})}function Lp(){if(vi===0){var i=sl;i===0&&(i=Is,Is<<=1,(Is&261888)===0&&(Is=256)),vi=i}return vi}function i1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:lu(""+i)}function s1(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function TP(i,s,c,f,g){if(s==="submit"&&c&&c.stateNode===g){var j=i1((g[Dr]||null).action),A=f.submitter;A&&(s=(s=A[Dr]||null)?i1(s.formAction):A.getAttribute("formAction"),s!==null&&(j=s,A=null));var M=new du("action","action",null,f,g);i.push({event:M,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(vi!==0){var R=A?s1(g,A):new FormData(g);ap(c,{pending:!0,data:R,method:g.method,action:j},null,R)}}else typeof j=="function"&&(M.preventDefault(),R=A?s1(g,A):new FormData(g),ap(c,{pending:!0,data:R,method:g.method,action:j},j,R))},currentTarget:g}]})}}for(var Ip=0;Ip<jh.length;Ip++){var $p=jh[Ip],PP=$p.toLowerCase(),kP=$p[0].toUpperCase()+$p.slice(1);Dn(PP,"on"+kP)}Dn(R0,"onAnimationEnd"),Dn(L0,"onAnimationIteration"),Dn(I0,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(WT,"onTransitionRun"),Dn(ZT,"onTransitionStart"),Dn(JT,"onTransitionCancel"),Dn($0,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function l1(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var j=void 0;if(s)for(var A=f.length-1;0<=A;A--){var M=f[A],R=M.instance,Z=M.currentTarget;if(M=M.listener,R!==j&&g.isPropagationStopped())break e;j=M,g.currentTarget=Z;try{j(g)}catch(ue){hu(ue)}g.currentTarget=null,j=R}else for(A=0;A<f.length;A++){if(M=f[A],R=M.instance,Z=M.currentTarget,M=M.listener,R!==j&&g.isPropagationStopped())break e;j=M,g.currentTarget=Z;try{j(g)}catch(ue){hu(ue)}g.currentTarget=null,j=R}}}}function Fe(i,s){var c=s[Jm];c===void 0&&(c=s[Jm]=new Set);var f=i+"__bubble";c.has(f)||(o1(s,i,2,!1),c.add(f))}function Bp(i,s,c){var f=0;s&&(f|=4),o1(c,i,f,s)}var ed="_reactListening"+Math.random().toString(36).slice(2);function Up(i){if(!i[ed]){i[ed]=!0,t0.forEach(function(c){c!=="selectionchange"&&(qP.has(c)||Bp(c,!1,i),Bp(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[ed]||(s[ed]=!0,Bp("selectionchange",!1,s))}}function o1(i,s,c,f){switch(R1(s)){case 2:var g=uk;break;case 8:g=dk;break;default:g=nv}c=g.bind(null,s,c,i),g=void 0,!oh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(s,c,{capture:!0,passive:g}):i.addEventListener(s,c,!0):g!==void 0?i.addEventListener(s,c,{passive:g}):i.addEventListener(s,c,!1)}function Hp(i,s,c,f,g){var j=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var M=f.stateNode.containerInfo;if(M===g)break;if(A===4)for(A=f.return;A!==null;){var R=A.tag;if((R===3||R===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;M!==null;){if(A=Hs(M),A===null)return;if(R=A.tag,R===5||R===6||R===26||R===27){f=j=A;continue e}M=M.parentNode}}f=f.return}m0(function(){var Z=j,ue=sh(c),he=[];e:{var te=B0.get(i);if(te!==void 0){var ie=du,_e=i;switch(i){case"keypress":if(cu(c)===0)break e;case"keydown":case"keyup":ie=zT;break;case"focusin":_e="focus",ie=fh;break;case"focusout":_e="blur",ie=fh;break;case"beforeblur":case"afterblur":ie=fh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=v0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=gT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=MT;break;case R0:case L0:case I0:ie=bT;break;case $0:ie=PT;break;case"scroll":case"scrollend":ie=pT;break;case"wheel":ie=qT;break;case"copy":case"cut":case"paste":ie=NT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=x0;break;case"toggle":case"beforetoggle":ie=LT}var Pe=(s&4)!==0,ut=!Pe&&(i==="scroll"||i==="scrollend"),K=Pe?te!==null?te+"Capture":null:te;Pe=[];for(var G=Z,W;G!==null;){var fe=G;if(W=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||W===null||K===null||(fe=oo(G,K),fe!=null&&Pe.push(Uo(G,fe,W))),ut)break;G=G.return}0<Pe.length&&(te=new ie(te,_e,null,c,ue),he.push({event:te,listeners:Pe}))}}if((s&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ie=i==="mouseout"||i==="pointerout",te&&c!==ih&&(_e=c.relatedTarget||c.fromElement)&&(Hs(_e)||_e[Us]))break e;if((ie||te)&&(te=ue.window===ue?ue:(te=ue.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(_e=c.relatedTarget||c.toElement,ie=Z,_e=_e?Hs(_e):null,_e!==null&&(ut=o(_e),Pe=_e.tag,_e!==ut||Pe!==5&&Pe!==27&&Pe!==6)&&(_e=null)):(ie=null,_e=Z),ie!==_e)){if(Pe=v0,fe="onMouseLeave",K="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=x0,fe="onPointerLeave",K="onPointerEnter",G="pointer"),ut=ie==null?te:lo(ie),W=_e==null?te:lo(_e),te=new Pe(fe,G+"leave",ie,c,ue),te.target=ut,te.relatedTarget=W,fe=null,Hs(ue)===Z&&(Pe=new Pe(K,G+"enter",_e,c,ue),Pe.target=W,Pe.relatedTarget=ut,fe=Pe),ut=fe,ie&&_e)t:{for(Pe=RP,K=ie,G=_e,W=0,fe=K;fe;fe=Pe(fe))W++;fe=0;for(var Oe=G;Oe;Oe=Pe(Oe))fe++;for(;0<W-fe;)K=Pe(K),W--;for(;0<fe-W;)G=Pe(G),fe--;for(;W--;){if(K===G||G!==null&&K===G.alternate){Pe=K;break t}K=Pe(K),G=Pe(G)}Pe=null}else Pe=null;ie!==null&&c1(he,te,ie,Pe,!1),_e!==null&&ut!==null&&c1(he,ut,_e,Pe,!0)}}e:{if(te=Z?lo(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var Ze=C0;else if(S0(te))if(A0)Ze=YT;else{Ze=QT;var Ce=FT}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&ah(Z.elementType)&&(Ze=C0):Ze=VT;if(Ze&&(Ze=Ze(i,Z))){w0(he,Ze,c,ue);break e}Ce&&Ce(i,te,Z),i==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&nh(te,"number",te.value)}switch(Ce=Z?lo(Z):window,i){case"focusin":(S0(Ce)||Ce.contentEditable==="true")&&(Zs=Ce,xh=Z,go=null);break;case"focusout":go=xh=Zs=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,k0(he,c,ue);break;case"selectionchange":if(XT)break;case"keydown":case"keyup":k0(he,c,ue)}var Ue;if(hh)e:{switch(i){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ws?N0(i,c)&&(Ye="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ye="onCompositionStart");Ye&&(y0&&c.locale!=="ko"&&(Ws||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ws&&(Ue=h0()):(ei=ue,ch="value"in ei?ei.value:ei.textContent,Ws=!0)),Ce=td(Z,Ye),0<Ce.length&&(Ye=new g0(Ye,i,null,c,ue),he.push({event:Ye,listeners:Ce}),Ue?Ye.data=Ue:(Ue=_0(c),Ue!==null&&(Ye.data=Ue)))),(Ue=$T?BT(i,c):UT(i,c))&&(Ye=td(Z,"onBeforeInput"),0<Ye.length&&(Ce=new g0("onBeforeInput","beforeinput",null,c,ue),he.push({event:Ce,listeners:Ye}),Ce.data=Ue)),TP(he,i,Z,c,ue)}l1(he,s)})}function Uo(i,s,c){return{instance:i,listener:s,currentTarget:c}}function td(i,s){for(var c=s+"Capture",f=[];i!==null;){var g=i,j=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||j===null||(g=oo(i,c),g!=null&&f.unshift(Uo(i,g,j)),g=oo(i,s),g!=null&&f.push(Uo(i,g,j))),i.tag===3)return f;i=i.return}return[]}function RP(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function c1(i,s,c,f,g){for(var j=s._reactName,A=[];c!==null&&c!==f;){var M=c,R=M.alternate,Z=M.stateNode;if(M=M.tag,R!==null&&R===f)break;M!==5&&M!==26&&M!==27||Z===null||(R=Z,g?(Z=oo(c,j),Z!=null&&A.unshift(Uo(c,Z,R))):g||(Z=oo(c,j),Z!=null&&A.push(Uo(c,Z,R)))),c=c.return}A.length!==0&&i.push({event:s,listeners:A})}var LP=/\r\n?/g,IP=/\u0000|\uFFFD/g;function u1(i){return(typeof i=="string"?i:""+i).replace(LP,`
`).replace(IP,"")}function d1(i,s){return s=u1(s),u1(i)===s}function ct(i,s,c,f,g,j){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Ys(i,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Ys(i,""+f);break;case"className":iu(i,"class",f);break;case"tabIndex":iu(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":iu(i,c,f);break;case"style":d0(i,f,j);break;case"data":if(s!=="object"){iu(i,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=lu(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(c==="formAction"?(s!=="input"&&ct(i,s,"name",g.name,g,null),ct(i,s,"formEncType",g.formEncType,g,null),ct(i,s,"formMethod",g.formMethod,g,null),ct(i,s,"formTarget",g.formTarget,g,null)):(ct(i,s,"encType",g.encType,g,null),ct(i,s,"method",g.method,g,null),ct(i,s,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=lu(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=ca);break;case"onScroll":f!=null&&Fe("scroll",i);break;case"onScrollEnd":f!=null&&Fe("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=lu(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":Fe("beforetoggle",i),Fe("toggle",i),au(i,"popover",f);break;case"xlinkActuate":oa(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":oa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":oa(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":oa(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":oa(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":oa(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":oa(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":oa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":oa(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":au(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=mT.get(c)||c,au(i,c,f))}}function Gp(i,s,c,f,g,j){switch(c){case"style":d0(i,f,j);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Ys(i,f):(typeof f=="number"||typeof f=="bigint")&&Ys(i,""+f);break;case"onScroll":f!=null&&Fe("scroll",i);break;case"onScrollEnd":f!=null&&Fe("scrollend",i);break;case"onClick":f!=null&&(i.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!r0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),s=c.slice(2,g?c.length-7:void 0),j=i[Dr]||null,j=j!=null?j[c]:null,typeof j=="function"&&i.removeEventListener(s,j,g),typeof f=="function")){typeof j!="function"&&j!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,f,g);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):au(i,c,f)}}}function fr(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",i),Fe("load",i);var f=!1,g=!1,j;for(j in c)if(c.hasOwnProperty(j)){var A=c[j];if(A!=null)switch(j){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ct(i,s,j,A,c,null)}}g&&ct(i,s,"srcSet",c.srcSet,c,null),f&&ct(i,s,"src",c.src,c,null);return;case"input":Fe("invalid",i);var M=j=A=g=null,R=null,Z=null;for(f in c)if(c.hasOwnProperty(f)){var ue=c[f];if(ue!=null)switch(f){case"name":g=ue;break;case"type":A=ue;break;case"checked":R=ue;break;case"defaultChecked":Z=ue;break;case"value":j=ue;break;case"defaultValue":M=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,s));break;default:ct(i,s,f,ue,c,null)}}l0(i,j,M,R,Z,A,g,!1);return;case"select":Fe("invalid",i),f=A=j=null;for(g in c)if(c.hasOwnProperty(g)&&(M=c[g],M!=null))switch(g){case"value":j=M;break;case"defaultValue":A=M;break;case"multiple":f=M;default:ct(i,s,g,M,c,null)}s=j,c=A,i.multiple=!!f,s!=null?Vs(i,!!f,s,!1):c!=null&&Vs(i,!!f,c,!0);return;case"textarea":Fe("invalid",i),j=g=f=null;for(A in c)if(c.hasOwnProperty(A)&&(M=c[A],M!=null))switch(A){case"value":f=M;break;case"defaultValue":g=M;break;case"children":j=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(a(91));break;default:ct(i,s,A,M,c,null)}c0(i,f,g,j);return;case"option":for(R in c)c.hasOwnProperty(R)&&(f=c[R],f!=null)&&(R==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":ct(i,s,R,f,c,null));return;case"dialog":Fe("beforetoggle",i),Fe("toggle",i),Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":Fe("load",i);break;case"video":case"audio":for(f=0;f<Bo.length;f++)Fe(Bo[f],i);break;case"image":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"embed":case"source":case"link":Fe("error",i),Fe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in c)if(c.hasOwnProperty(Z)&&(f=c[Z],f!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ct(i,s,Z,f,c,null)}return;default:if(ah(s)){for(ue in c)c.hasOwnProperty(ue)&&(f=c[ue],f!==void 0&&Gp(i,s,ue,f,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(f=c[M],f!=null&&ct(i,s,M,f,c,null))}function $P(i,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,j=null,A=null,M=null,R=null,Z=null,ue=null;for(ie in c){var he=c[ie];if(c.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":R=he;default:f.hasOwnProperty(ie)||ct(i,s,ie,null,f,he)}}for(var te in f){var ie=f[te];if(he=c[te],f.hasOwnProperty(te)&&(ie!=null||he!=null))switch(te){case"type":j=ie;break;case"name":g=ie;break;case"checked":Z=ie;break;case"defaultChecked":ue=ie;break;case"value":A=ie;break;case"defaultValue":M=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,s));break;default:ie!==he&&ct(i,s,te,ie,f,he)}}rh(i,A,M,R,Z,ue,j,g);return;case"select":ie=A=M=te=null;for(j in c)if(R=c[j],c.hasOwnProperty(j)&&R!=null)switch(j){case"value":break;case"multiple":ie=R;default:f.hasOwnProperty(j)||ct(i,s,j,null,f,R)}for(g in f)if(j=f[g],R=c[g],f.hasOwnProperty(g)&&(j!=null||R!=null))switch(g){case"value":te=j;break;case"defaultValue":M=j;break;case"multiple":A=j;default:j!==R&&ct(i,s,g,j,f,R)}s=M,c=A,f=ie,te!=null?Vs(i,!!c,te,!1):!!f!=!!c&&(s!=null?Vs(i,!!c,s,!0):Vs(i,!!c,c?[]:"",!1));return;case"textarea":ie=te=null;for(M in c)if(g=c[M],c.hasOwnProperty(M)&&g!=null&&!f.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:ct(i,s,M,null,f,g)}for(A in f)if(g=f[A],j=c[A],f.hasOwnProperty(A)&&(g!=null||j!=null))switch(A){case"value":te=g;break;case"defaultValue":ie=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==j&&ct(i,s,A,g,f,j)}o0(i,te,ie);return;case"option":for(var _e in c)te=c[_e],c.hasOwnProperty(_e)&&te!=null&&!f.hasOwnProperty(_e)&&(_e==="selected"?i.selected=!1:ct(i,s,_e,null,f,te));for(R in f)te=f[R],ie=c[R],f.hasOwnProperty(R)&&te!==ie&&(te!=null||ie!=null)&&(R==="selected"?i.selected=te&&typeof te!="function"&&typeof te!="symbol":ct(i,s,R,te,f,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in c)te=c[Pe],c.hasOwnProperty(Pe)&&te!=null&&!f.hasOwnProperty(Pe)&&ct(i,s,Pe,null,f,te);for(Z in f)if(te=f[Z],ie=c[Z],f.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,s));break;default:ct(i,s,Z,te,f,ie)}return;default:if(ah(s)){for(var ut in c)te=c[ut],c.hasOwnProperty(ut)&&te!==void 0&&!f.hasOwnProperty(ut)&&Gp(i,s,ut,void 0,f,te);for(ue in f)te=f[ue],ie=c[ue],!f.hasOwnProperty(ue)||te===ie||te===void 0&&ie===void 0||Gp(i,s,ue,te,f,ie);return}}for(var K in c)te=c[K],c.hasOwnProperty(K)&&te!=null&&!f.hasOwnProperty(K)&&ct(i,s,K,null,f,te);for(he in f)te=f[he],ie=c[he],!f.hasOwnProperty(he)||te===ie||te==null&&ie==null||ct(i,s,he,te,f,ie)}function f1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BP(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var g=c[f],j=g.transferSize,A=g.initiatorType,M=g.duration;if(j&&M&&f1(A)){for(A=0,M=g.responseEnd,f+=1;f<c.length;f++){var R=c[f],Z=R.startTime;if(Z>M)break;var ue=R.transferSize,he=R.initiatorType;ue&&f1(he)&&(R=R.responseEnd,A+=ue*(R<M?1:(M-Z)/(R-Z)))}if(--f,s+=8*(j+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Fp=null,Qp=null;function rd(i){return i.nodeType===9?i:i.ownerDocument}function m1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h1(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Vp(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yp=null;function UP(){var i=window.event;return i&&i.type==="popstate"?i===Yp?!1:(Yp=i,!0):(Yp=null,!1)}var p1=typeof setTimeout=="function"?setTimeout:void 0,HP=typeof clearTimeout=="function"?clearTimeout:void 0,v1=typeof Promise=="function"?Promise:void 0,GP=typeof queueMicrotask=="function"?queueMicrotask:typeof v1<"u"?function(i){return v1.resolve(null).then(i).catch(FP)}:p1;function FP(i){setTimeout(function(){throw i})}function gi(i){return i==="head"}function g1(i,s){var c=s,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(g),wl(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Ho(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Ho(c);for(var j=c.firstChild;j;){var A=j.nextSibling,M=j.nodeName;j[so]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&j.rel.toLowerCase()==="stylesheet"||c.removeChild(j),j=A}}else c==="body"&&Ho(i.ownerDocument.body);c=g}while(c);wl(s)}function x1(i,s){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function Kp(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Kp(c),eh(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function QP(i,s,c,f){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[so])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(j=i.getAttribute("rel"),j==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(j!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(j=i.getAttribute("src"),(j!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&j&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var j=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===j)return i}else return i;if(i=hn(i.nextSibling),i===null)break}return null}function VP(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=hn(i.nextSibling),i===null))return null;return i}function y1(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=hn(i.nextSibling),i===null))return null;return i}function Xp(i){return i.data==="$?"||i.data==="$~"}function Wp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function YP(i,s){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function hn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Zp=null;function b1(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(s===0)return hn(i.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}i=i.nextSibling}return null}function j1(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return i;s--}else c!=="/$"&&c!=="/&"||s++}i=i.previousSibling}return null}function N1(i,s,c){switch(s=rd(c),i){case"html":if(i=s.documentElement,!i)throw Error(a(452));return i;case"head":if(i=s.head,!i)throw Error(a(453));return i;case"body":if(i=s.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function Ho(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);eh(i)}var pn=new Map,_1=new Set;function nd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wa=J.d;J.d={f:KP,r:XP,D:WP,C:ZP,L:JP,m:ek,X:rk,S:tk,M:nk};function KP(){var i=wa.f(),s=Yu();return i||s}function XP(i){var s=Gs(i);s!==null&&s.tag===5&&s.type==="form"?$j(s):wa.r(i)}var Nl=typeof document>"u"?null:document;function S1(i,s,c){var f=Nl;if(f&&typeof s=="string"&&s){var g=ln(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),_1.has(g)||(_1.add(g),i={rel:i,crossOrigin:c,href:s},f.querySelector(g)===null&&(s=f.createElement("link"),fr(s,"link",i),Wt(s),f.head.appendChild(s)))}}function WP(i){wa.D(i),S1("dns-prefetch",i,null)}function ZP(i,s){wa.C(i,s),S1("preconnect",i,s)}function JP(i,s,c){wa.L(i,s,c);var f=Nl;if(f&&i&&s){var g='link[rel="preload"][as="'+ln(s)+'"]';s==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+ln(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+ln(c.imageSizes)+'"]')):g+='[href="'+ln(i)+'"]';var j=g;switch(s){case"style":j=_l(i);break;case"script":j=Sl(i)}pn.has(j)||(i=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),pn.set(j,i),f.querySelector(g)!==null||s==="style"&&f.querySelector(Go(j))||s==="script"&&f.querySelector(Fo(j))||(s=f.createElement("link"),fr(s,"link",i),Wt(s),f.head.appendChild(s)))}}function ek(i,s){wa.m(i,s);var c=Nl;if(c&&i){var f=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+ln(f)+'"][href="'+ln(i)+'"]',j=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=Sl(i)}if(!pn.has(j)&&(i=v({rel:"modulepreload",href:i},s),pn.set(j,i),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Fo(j)))return}f=c.createElement("link"),fr(f,"link",i),Wt(f),c.head.appendChild(f)}}}function tk(i,s,c){wa.S(i,s,c);var f=Nl;if(f&&i){var g=Fs(f).hoistableStyles,j=_l(i);s=s||"default";var A=g.get(j);if(!A){var M={loading:0,preload:null};if(A=f.querySelector(Go(j)))M.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},c),(c=pn.get(j))&&Jp(i,c);var R=A=f.createElement("link");Wt(R),fr(R,"link",i),R._p=new Promise(function(Z,ue){R.onload=Z,R.onerror=ue}),R.addEventListener("load",function(){M.loading|=1}),R.addEventListener("error",function(){M.loading|=2}),M.loading|=4,ad(A,s,f)}A={type:"stylesheet",instance:A,count:1,state:M},g.set(j,A)}}}function rk(i,s){wa.X(i,s);var c=Nl;if(c&&i){var f=Fs(c).hoistableScripts,g=Sl(i),j=f.get(g);j||(j=c.querySelector(Fo(g)),j||(i=v({src:i,async:!0},s),(s=pn.get(g))&&ev(i,s),j=c.createElement("script"),Wt(j),fr(j,"link",i),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},f.set(g,j))}}function nk(i,s){wa.M(i,s);var c=Nl;if(c&&i){var f=Fs(c).hoistableScripts,g=Sl(i),j=f.get(g);j||(j=c.querySelector(Fo(g)),j||(i=v({src:i,async:!0,type:"module"},s),(s=pn.get(g))&&ev(i,s),j=c.createElement("script"),Wt(j),fr(j,"link",i),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},f.set(g,j))}}function w1(i,s,c,f){var g=(g=H.current)?nd(g):null;if(!g)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=_l(c.href),c=Fs(g).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=_l(c.href);var j=Fs(g).hoistableStyles,A=j.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(i,A),(j=g.querySelector(Go(i)))&&!j._p&&(A.instance=j,A.state.loading=5),pn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},pn.set(i,c),j||ak(g,i,c,A.state))),s&&f===null)throw Error(a(528,""));return A}if(s&&f!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sl(c),c=Fs(g).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function _l(i){return'href="'+ln(i)+'"'}function Go(i){return'link[rel="stylesheet"]['+i+"]"}function C1(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function ak(i,s,c,f){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=i.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),fr(s,"link",c),Wt(s),i.head.appendChild(s))}function Sl(i){return'[src="'+ln(i)+'"]'}function Fo(i){return"script[async]"+i}function A1(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=i.querySelector('style[data-href~="'+ln(c.href)+'"]');if(f)return s.instance=f,Wt(f),f;var g=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Wt(f),fr(f,"style",g),ad(f,c.precedence,i),s.instance=f;case"stylesheet":g=_l(c.href);var j=i.querySelector(Go(g));if(j)return s.state.loading|=4,s.instance=j,Wt(j),j;f=C1(c),(g=pn.get(g))&&Jp(f,g),j=(i.ownerDocument||i).createElement("link"),Wt(j);var A=j;return A._p=new Promise(function(M,R){A.onload=M,A.onerror=R}),fr(j,"link",f),s.state.loading|=4,ad(j,c.precedence,i),s.instance=j;case"script":return j=Sl(c.src),(g=i.querySelector(Fo(j)))?(s.instance=g,Wt(g),g):(f=c,(g=pn.get(j))&&(f=v({},c),ev(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),Wt(g),fr(g,"link",f),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,ad(f,c.precedence,i));return s.instance}function ad(i,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,j=g,A=0;A<f.length;A++){var M=f[A];if(M.dataset.precedence===s)j=M;else if(j!==g)break}j?j.parentNode.insertBefore(i,j.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function Jp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function ev(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var id=null;function E1(i,s,c){if(id===null){var f=new Map,g=id=new Map;g.set(c,f)}else g=id,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var j=c[g];if(!(j[so]||j[or]||i==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var A=j.getAttribute(s)||"";A=i+A;var M=f.get(A);M?M.push(j):f.set(A,[j])}}return f}function z1(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function ik(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function O1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function sk(i,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=_l(f.href),j=s.querySelector(Go(g));if(j){s=j._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=sd.bind(i),s.then(i,i)),c.state.loading|=4,c.instance=j,Wt(j);return}j=s.ownerDocument||s,f=C1(f),(g=pn.get(g))&&Jp(f,g),j=j.createElement("link"),Wt(j);var A=j;A._p=new Promise(function(M,R){A.onload=M,A.onerror=R}),fr(j,"link",f),c.instance=j}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=sd.bind(i),s.addEventListener("load",c),s.addEventListener("error",c))}}var tv=0;function lk(i,s){return i.stylesheets&&i.count===0&&od(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&od(i,i.stylesheets),i.unsuspend){var j=i.unsuspend;i.unsuspend=null,j()}},6e4+s);0<i.imgBytes&&tv===0&&(tv=62500*BP());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&od(i,i.stylesheets),i.unsuspend)){var j=i.unsuspend;i.unsuspend=null,j()}},(i.imgBytes>tv?50:800)+s);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function sd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ld=null;function od(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ld=new Map,s.forEach(ok,i),ld=null,sd.call(i))}function ok(i,s){if(!(s.state.loading&4)){var c=ld.get(i);if(c)var f=c.get(null);else{c=new Map,ld.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<g.length;j++){var A=g[j];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),f=A)}f&&c.set(null,f)}g=s.instance,A=g.getAttribute("data-precedence"),j=c.get(A)||f,j===f&&c.set(null,g),c.set(A,g),this.count++,f=sd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),j?j.parentNode.insertBefore(g,j.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var Qo={$$typeof:w,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function ck(i,s,c,f,g,j,A,M,R){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ht(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.hiddenUpdates=ht(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=j,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function D1(i,s,c,f,g,j,A,M,R,Z,ue,he){return i=new ck(i,s,c,A,R,Z,ue,he,M),s=1,j===!0&&(s|=24),j=Gr(3,null,null,s),i.current=j,j.stateNode=i,s=Ph(),s.refCount++,i.pooledCache=s,s.refCount++,j.memoizedState={element:f,isDehydrated:c,cache:s},Lh(j),i}function M1(i){return i?(i=tl,i):tl}function T1(i,s,c,f,g,j){g=M1(g),f.context===null?f.context=g:f.pendingContext=g,f=si(s),f.payload={element:c},j=j===void 0?null:j,j!==null&&(f.callback=j),c=li(i,f,s),c!==null&&(Rr(c,i,s),So(c,i,s))}function P1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function rv(i,s){P1(i,s),(i=i.alternate)&&P1(i,s)}function k1(i){if(i.tag===13||i.tag===31){var s=Ki(i,67108864);s!==null&&Rr(s,i,67108864),rv(i,67108864)}}function q1(i){if(i.tag===13||i.tag===31){var s=Kr();s=Wm(s);var c=Ki(i,s);c!==null&&Rr(c,i,s),rv(i,s)}}var cd=!0;function uk(i,s,c,f){var g=q.T;q.T=null;var j=J.p;try{J.p=2,nv(i,s,c,f)}finally{J.p=j,q.T=g}}function dk(i,s,c,f){var g=q.T;q.T=null;var j=J.p;try{J.p=8,nv(i,s,c,f)}finally{J.p=j,q.T=g}}function nv(i,s,c,f){if(cd){var g=av(f);if(g===null)Hp(i,s,f,ud,c),L1(i,f);else if(mk(g,i,s,c,f))f.stopPropagation();else if(L1(i,f),s&4&&-1<fk.indexOf(i)){for(;g!==null;){var j=Gs(g);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var A=la(j.pendingLanes);if(A!==0){var M=j;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var R=1<<31-_r(A);M.entanglements[1]|=R,A&=~R}Yn(j),(rt&6)===0&&(Qu=Te()+500,$o(0))}}break;case 31:case 13:M=Ki(j,2),M!==null&&Rr(M,j,2),Yu(),rv(j,2)}if(j=av(f),j===null&&Hp(i,s,f,ud,c),j===g)break;g=j}g!==null&&f.stopPropagation()}else Hp(i,s,f,null,c)}}function av(i){return i=sh(i),iv(i)}var ud=null;function iv(i){if(ud=null,i=Hs(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=u(s),i!==null)return i;i=null}else if(c===31){if(i=d(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return ud=i,null}function R1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case Nt:return 2;case vr:return 8;case Un:case Ls:return 32;case an:return 268435456;default:return 32}default:return 32}}var sv=!1,xi=null,yi=null,bi=null,Vo=new Map,Yo=new Map,ji=[],fk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L1(i,s){switch(i){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":Vo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(s.pointerId)}}function Ko(i,s,c,f,g,j){return i===null||i.nativeEvent!==j?(i={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:j,targetContainers:[g]},s!==null&&(s=Gs(s),s!==null&&k1(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function mk(i,s,c,f,g){switch(s){case"focusin":return xi=Ko(xi,i,s,c,f,g),!0;case"dragenter":return yi=Ko(yi,i,s,c,f,g),!0;case"mouseover":return bi=Ko(bi,i,s,c,f,g),!0;case"pointerover":var j=g.pointerId;return Vo.set(j,Ko(Vo.get(j)||null,i,s,c,f,g)),!0;case"gotpointercapture":return j=g.pointerId,Yo.set(j,Ko(Yo.get(j)||null,i,s,c,f,g)),!0}return!1}function I1(i){var s=Hs(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){i.blockedOn=s,Jb(i.priority,function(){q1(c)});return}}else if(s===31){if(s=d(c),s!==null){i.blockedOn=s,Jb(i.priority,function(){q1(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function dd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=av(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);ih=f,c.target.dispatchEvent(f),ih=null}else return s=Gs(c),s!==null&&k1(s),i.blockedOn=c,!1;s.shift()}return!0}function $1(i,s,c){dd(i)&&c.delete(s)}function hk(){sv=!1,xi!==null&&dd(xi)&&(xi=null),yi!==null&&dd(yi)&&(yi=null),bi!==null&&dd(bi)&&(bi=null),Vo.forEach($1),Yo.forEach($1)}function fd(i,s){i.blockedOn===s&&(i.blockedOn=null,sv||(sv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hk)))}var md=null;function B1(i){md!==i&&(md=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){md===i&&(md=null);for(var s=0;s<i.length;s+=3){var c=i[s],f=i[s+1],g=i[s+2];if(typeof f!="function"){if(iv(f||c)===null)continue;break}var j=Gs(c);j!==null&&(i.splice(s,3),s-=3,ap(j,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function wl(i){function s(R){return fd(R,i)}xi!==null&&fd(xi,i),yi!==null&&fd(yi,i),bi!==null&&fd(bi,i),Vo.forEach(s),Yo.forEach(s);for(var c=0;c<ji.length;c++){var f=ji[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<ji.length&&(c=ji[0],c.blockedOn===null);)I1(c),c.blockedOn===null&&ji.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],j=c[f+1],A=g[Dr]||null;if(typeof j=="function")A||B1(c);else if(A){var M=null;if(j&&j.hasAttribute("formAction")){if(g=j,A=j[Dr]||null)M=A.formAction;else if(iv(g)!==null)continue}else M=A.action;typeof M=="function"?c[f+1]=M:(c.splice(f,3),f-=3),B1(c)}}}function U1(){function i(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function lv(i){this._internalRoot=i}hd.prototype.render=lv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,f=Kr();T1(c,f,i,s,null,null)},hd.prototype.unmount=lv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;T1(i.current,2,null,i,null,null),Yu(),s[Us]=null}};function hd(i){this._internalRoot=i}hd.prototype.unstable_scheduleHydration=function(i){if(i){var s=Zb();i={blockedOn:null,target:i,priority:s};for(var c=0;c<ji.length&&s!==0&&s<ji[c].priority;c++);ji.splice(c,0,i),c===0&&I1(i)}};var H1=t.version;if(H1!=="19.2.4")throw Error(a(527,H1,"19.2.4"));J.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=h(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var pk={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{gr=pd.inject(pk),xt=pd}catch{}}return Wo.createRoot=function(i,s){if(!l(i))throw Error(a(299));var c=!1,f="",g=Xj,j=Wj,A=Zj;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(j=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=D1(i,1,!1,null,null,c,f,null,g,j,A,U1),i[Us]=s.current,Up(i),new lv(s)},Wo.hydrateRoot=function(i,s,c){if(!l(i))throw Error(a(299));var f=!1,g="",j=Xj,A=Wj,M=Zj,R=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(j=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.formState!==void 0&&(R=c.formState)),s=D1(i,1,!0,s,c??null,f,g,R,j,A,M,U1),s.context=M1(null),c=s.current,f=Kr(),f=Wm(f),g=si(f),g.callback=null,li(c,g,f),c=f,s.current.lanes=c,xr(s,c),Yn(s),i[Us]=s.current,Up(i),new hd(s)},Wo.version="19.2.4",Wo}var J1;function pq(){if(J1)return fv.exports;J1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fv.exports=hq(),fv.exports}var vq=pq();const gq=Ua(vq),xq={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},uy=_k(xq),vd=Sk(uy),se=wk(uy,{localCache:Ck({tabManager:Ek()})}),en=Ak(uy),e_={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},t_=e=>e_[e]||e_.default,_2=y.createContext(null),yq=({children:e})=>{const[t,r]=y.useState(null),[a,l]=y.useState(!0),o=async x=>{try{const b=await Vt(be(se,"users",x));if(b.exists()){const _=b.data();return{uid:x,email:_.email,displayName:_.displayName,role:_.role,isPremium:_.isPremium||!1,subscriptionEnd:_.subscriptionEnd?.toDate()||null,photoURL:_.photoURL,createdAt:_.createdAt?.toDate()||new Date,lastLogin:_.lastLogin?.toDate()}}return null}catch(b){return console.error("Erreur lors de la rcupration des donnes utilisateur:",b),null}},u=async(x,b)=>{const _=be(se,"users",x.uid);(await Vt(_)).exists()?await We(_,{lastLogin:ft()}):await Xf(_,{email:x.email,displayName:x.displayName||b?.displayName||"",role:b?.role||"eleve",isPremium:!1,photoURL:x.photoURL,createdAt:ft(),lastLogin:ft()})},d=async(x,b)=>{try{const _=await Tk(vd,x,b);await u(_.user)}catch(_){throw new Error(t_(_.code))}},m=async x=>{try{if(x.password!==x.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const b=await Dk(vd,x.email,x.password);await Mk(b.user,{displayName:x.displayName}),await u(b.user,{displayName:x.displayName,role:x.role})}catch(b){throw b.message?b:new Error(t_(b.code))}},h=async()=>{try{await Ok(vd),r(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},p=async x=>{if(!t)throw new Error("Aucun utilisateur connect.");try{const b=be(se,"users",t.uid);await We(b,{...x,updatedAt:ft()}),r(_=>_?{..._,...x}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};y.useEffect(()=>{const x=zk(vd,async b=>{if(b){const _=await o(b.uid);r(_)}else r(null);l(!1)});return()=>x()},[]);const v={currentUser:t,loading:a,login:d,register:m,logout:h,updateProfile:p};return n.jsx(_2.Provider,{value:v,children:a?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement..."})]}):e})},Ct=()=>{const e=y.useContext(_2);if(!e)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return e},dy=({children:e,allowedRoles:t,requirePremium:r=!1})=>{const{currentUser:a,loading:l}=Ct();return l?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Vrification des autorisations..."})]}):a?t&&!t.includes(a.role)?n.jsxs("div",{className:"error-container",children:[n.jsx("h2",{children:"Accs non autoris"}),n.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),n.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):r&&!a.isPremium?n.jsxs("div",{className:"error-container premium-required",children:[n.jsx("h2",{children:"Contenu Premium"}),n.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),n.jsxs("div",{className:"premium-cta",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",n.jsx("strong",{children:"20 000 FCFA/an"})]}),n.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):n.jsx(n.Fragment,{children:e}):n.jsxs("div",{className:"error-container",children:[n.jsx("h2",{children:"Accs refus"}),n.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),n.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},vn=({children:e})=>n.jsx(dy,{allowedRoles:["admin"],children:e}),Zo=({children:e})=>n.jsx(dy,{allowedRoles:["admin","prof"],children:e}),bq=()=>{const{currentUser:e,logout:t,loading:r}=Ct(),a=Yt(),l=Kf(),[o,u]=y.useState(!1),[d,m]=y.useState(!1),[h,p]=y.useState(!1),v=y.useRef(null),x=[{path:"/",label:"Accueil",icon:n.jsx(rx,{size:18})},{path:"/disciplines",label:"Disciplines",icon:n.jsx(Nn,{size:18})},{path:"/ebooks",label:"Bibliothque",icon:n.jsx(Nn,{size:18})},{path:"/quiz",label:"Quiz",icon:n.jsx(Il,{size:18}),requireAuth:!0,requirePremium:!0},{path:e?.role==="eleve"?"/eleve/dashboard":e?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:n.jsx(F1,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:n.jsx(kk,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:n.jsx(xs,{size:18}),requireAuth:!0,requireRole:["parent"]}];y.useEffect(()=>{const E=O=>{v.current&&!v.current.contains(O.target)&&m(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),y.useEffect(()=>{u(!1),m(!1)},[l.pathname]),y.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const b=async()=>{try{p(!0),await t(),m(!1),a("/")}catch(E){console.error("Erreur lors de la dconnexion:",E)}finally{p(!1)}},_=()=>{u(!o)},N=()=>{m(!d)},S=E=>!(E.requireAuth&&!e||E.requirePremium&&e&&!e.isPremium||E.requireRole&&e&&!E.requireRole.includes(e.role)),C=E=>E==="/"?l.pathname==="/":l.pathname.startsWith(E),z=E=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[E]||E,w=()=>e?e.displayName?e.displayName.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase():"?";return n.jsxs("header",{className:"header",children:[n.jsxs("div",{className:"header__container",children:[n.jsxs(Le,{to:"/",className:"header__logo",children:[n.jsx(Il,{className:"header__logo-icon",size:32}),n.jsxs("div",{className:"header__logo-text",children:[n.jsx("span",{className:"header__logo-name",children:"PedaClic"}),n.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),n.jsx("nav",{className:"header__nav header__nav--desktop",children:n.jsx("ul",{className:"header__nav-list",children:x.map(E=>S(E)&&n.jsx("li",{className:"header__nav-item",children:n.jsxs(Le,{to:E.path,className:`header__nav-link ${C(E.path)?"header__nav-link--active":""}`,children:[E.icon,n.jsx("span",{children:E.label}),E.requirePremium&&n.jsx(uc,{size:14,className:"header__premium-badge"})]})},E.path))})}),n.jsxs("div",{className:"header__actions",children:[r?n.jsx("div",{className:"header__loading",children:n.jsx("div",{className:"header__spinner"})}):e?n.jsxs("div",{className:"header__user",ref:v,children:[e.isPremium&&n.jsxs("span",{className:"header__premium-tag",children:[n.jsx(uc,{size:14}),"Premium"]}),n.jsxs("button",{className:"header__user-button",onClick:N,"aria-expanded":d,"aria-haspopup":"true",children:[n.jsx("div",{className:"header__avatar",children:e.photoURL?n.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):n.jsx("span",{className:"header__avatar-initials",children:w()})}),n.jsx("span",{className:"header__user-name",children:e.displayName||e.email.split("@")[0]}),n.jsx(Yd,{size:16,className:`header__chevron ${d?"header__chevron--open":""}`})]}),d&&n.jsxs("div",{className:"header__dropdown",children:[n.jsxs("div",{className:"header__dropdown-header",children:[n.jsx("p",{className:"header__dropdown-email",children:e.email}),n.jsx("span",{className:`header__dropdown-role header__dropdown-role--${e.role}`,children:z(e.role)})]}),n.jsx("div",{className:"header__dropdown-divider"}),n.jsxs("nav",{className:"header__dropdown-nav",children:[n.jsxs(Le,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[n.jsx(F1,{size:18}),n.jsx("span",{children:"Tableau de bord"})]}),e.role==="eleve"&&n.jsxs(Le,{to:"/eleve/suivi",className:"header__dropdown-link",children:[n.jsx(xs,{size:18}),n.jsx("span",{children:"Mes points  amliorer"})]}),e.role==="parent"&&n.jsxs(Le,{to:"/parent/dashboard",className:"header__dropdown-link",children:[n.jsx(xs,{size:18}),n.jsx("span",{children:"Espace Parent"})]}),n.jsxs(Le,{to:"/profil",className:"header__dropdown-link",children:[n.jsx(qk,{size:18}),n.jsx("span",{children:"Mon profil"})]}),e.role==="admin"&&n.jsxs(Le,{to:"/admin",className:"header__dropdown-link",children:[n.jsx(Rk,{size:18}),n.jsx("span",{children:"Administration"})]}),!e.isPremium&&n.jsxs(Le,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[n.jsx(uc,{size:18}),n.jsx("span",{children:"Passer Premium"})]})]}),n.jsx("div",{className:"header__dropdown-divider"}),n.jsxs("button",{className:"header__dropdown-logout",onClick:b,disabled:h,children:[n.jsx(Q1,{size:18}),n.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]}):n.jsxs("div",{className:"header__auth-buttons",children:[n.jsx(Le,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),n.jsx(Le,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),n.jsx("button",{className:"header__mobile-toggle",onClick:_,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?n.jsx(Di,{size:24}):n.jsx(Lk,{size:24})})]})]}),n.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[n.jsx("div",{className:"header__mobile-overlay",onClick:()=>u(!1)}),n.jsxs("div",{className:"header__mobile-content",children:[n.jsx("nav",{className:"header__mobile-nav",children:n.jsx("ul",{className:"header__mobile-list",children:x.map(E=>S(E)&&n.jsx("li",{className:"header__mobile-item",children:n.jsxs(Le,{to:E.path,className:`header__mobile-link ${C(E.path)?"header__mobile-link--active":""}`,children:[E.icon,n.jsx("span",{children:E.label}),E.requirePremium&&n.jsx(uc,{size:14,className:"header__premium-badge"})]})},E.path))})}),!e&&n.jsxs("div",{className:"header__mobile-auth",children:[n.jsx(Le,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),n.jsx(Le,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),e&&n.jsxs("div",{className:"header__mobile-user",children:[n.jsxs("div",{className:"header__mobile-user-info",children:[n.jsx("div",{className:"header__avatar header__avatar--large",children:e.photoURL?n.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):n.jsx("span",{className:"header__avatar-initials",children:w()})}),n.jsxs("div",{className:"header__mobile-user-details",children:[n.jsx("p",{className:"header__mobile-user-name",children:e.displayName||e.email.split("@")[0]}),n.jsx("p",{className:"header__mobile-user-email",children:e.email})]})]}),n.jsxs("button",{className:"header__mobile-logout",onClick:b,disabled:h,children:[n.jsx(Q1,{size:18}),n.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},jq=()=>{const e=new Date().getFullYear(),t=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],r=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],a=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:n.jsx(Gk,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:n.jsx(Fk,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:n.jsx(Qk,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:n.jsx(Vk,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:n.jsx(Yk,{size:20})}];return n.jsxs("footer",{className:"footer",children:[n.jsx("div",{className:"footer__main",children:n.jsxs("div",{className:"footer__container",children:[n.jsxs("div",{className:"footer__column footer__column--about",children:[n.jsxs(Le,{to:"/",className:"footer__logo",children:[n.jsx(Il,{className:"footer__logo-icon",size:36}),n.jsxs("div",{className:"footer__logo-text",children:[n.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),n.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),n.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),n.jsxs("div",{className:"footer__stats",children:[n.jsxs("div",{className:"footer__stat",children:[n.jsx(Nn,{size:18}),n.jsx("span",{children:"500+ cours"})]}),n.jsxs("div",{className:"footer__stat",children:[n.jsx($d,{size:18}),n.jsx("span",{children:"10 000+ lves"})]})]})]}),n.jsxs("div",{className:"footer__column",children:[n.jsxs("h3",{className:"footer__title",children:[n.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),n.jsx("nav",{className:"footer__nav",children:n.jsx("ul",{className:"footer__list",children:t.map((l,o)=>n.jsx("li",{className:"footer__item",children:n.jsx(Le,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),n.jsxs("div",{className:"footer__column",children:[n.jsxs("h3",{className:"footer__title",children:[n.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),n.jsx("nav",{className:"footer__nav",children:n.jsx("ul",{className:"footer__list",children:r.map((l,o)=>n.jsx("li",{className:"footer__item",children:n.jsx(Le,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),n.jsxs("div",{className:"footer__column",children:[n.jsxs("h3",{className:"footer__title",children:[n.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),n.jsxs("div",{className:"footer__contact",children:[n.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[n.jsx(Ik,{size:16,className:"footer__contact-icon"}),n.jsx("span",{children:"contact@pedaclic.sn"})]}),n.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[n.jsx($k,{size:16,className:"footer__contact-icon"}),n.jsx("span",{children:"+221 77 000 00 00"})]}),n.jsxs("div",{className:"footer__contact-item",children:[n.jsx(Bk,{size:16,className:"footer__contact-icon"}),n.jsx("span",{children:"Dakar, Sngal"})]})]}),n.jsxs("div",{className:"footer__social",children:[n.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),n.jsx("div",{className:"footer__social-links",children:a.map((l,o)=>n.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:l.name,children:l.icon},o))})]})]})]})}),n.jsx("div",{className:"footer__bottom",children:n.jsxs("div",{className:"footer__container footer__bottom-content",children:[n.jsxs("p",{className:"footer__copyright",children:[" ",e," PedaClic. Tous droits rservs."]}),n.jsxs("p",{className:"footer__made-with",children:["Fait avec ",n.jsx(Uk,{size:14,className:"footer__heart"})," au Sngal "]}),n.jsxs("nav",{className:"footer__legal",children:[n.jsxs(Le,{to:"/mentions-legales",className:"footer__legal-link",children:[n.jsx(Hk,{size:14})," Mentions lgales"]}),n.jsxs(Le,{to:"/confidentialite",className:"footer__legal-link",children:[n.jsx(oy,{size:14})," Confidentialit"]}),n.jsxs(Le,{to:"/aide",className:"footer__legal-link",children:[n.jsx(Bd,{size:14})," Aide"]})]})]})})]})},yr=({children:e,hideHeader:t=!1,hideFooter:r=!1,className:a=""})=>n.jsxs("div",{className:"layout",children:[!t&&n.jsx(bq,{}),n.jsx("main",{className:`layout__main ${t?"":"layout__main--with-header"} ${a}`,children:e}),!r&&n.jsx(jq,{})]}),Nq=()=>{const{currentUser:e}=Ct();return n.jsxs("div",{className:"home-page",children:[n.jsxs("section",{className:"home-page__hero",children:[n.jsxs("div",{className:"home-page__hero-content",children:[n.jsxs("div",{className:"home-page__hero-badge",children:[n.jsx(Wr,{size:14}),n.jsx("span",{children:"Plateforme N1 au Sngal"})]}),n.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",n.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),n.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),n.jsx("div",{className:"home-page__hero-cta",children:e?n.jsxs(Le,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",n.jsx(us,{size:20})]}):n.jsxs(n.Fragment,{children:[n.jsxs(Le,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",n.jsx(us,{size:20})]}),n.jsxs(Le,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[n.jsx(gc,{size:18}),"Dcouvrir les cours"]})]})}),n.jsxs("div",{className:"home-page__hero-stats",children:[n.jsxs("div",{className:"home-page__hero-stat",children:[n.jsx("strong",{children:"10 000+"}),n.jsx("span",{children:"lves inscrits"})]}),n.jsxs("div",{className:"home-page__hero-stat",children:[n.jsx("strong",{children:"500+"}),n.jsx("span",{children:"Cours disponibles"})]}),n.jsxs("div",{className:"home-page__hero-stat",children:[n.jsx("strong",{children:"95%"}),n.jsx("span",{children:"Taux de russite"})]})]})]}),n.jsx("div",{className:"home-page__hero-image",children:n.jsxs("div",{className:"home-page__hero-illustration",children:[n.jsx(Il,{size:120}),n.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),n.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),n.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),n.jsx("section",{className:"home-page__levels",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),n.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),n.jsxs("div",{className:"home-page__levels-grid",children:[n.jsxs(Le,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[n.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),n.jsx("h3",{children:"Collge"}),n.jsx("p",{children:"6me  3me"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Prparation au BFEM"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," 9 matires disponibles"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Exercices corrigs"]})]}),n.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",n.jsx(us,{size:16})]})]}),n.jsxs(Le,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[n.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),n.jsx("h3",{children:"Lyce"}),n.jsx("p",{children:"2nde  Terminale"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Prparation au BAC"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," 12 matires disponibles"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:16})," Annales d'examens"]})]}),n.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",n.jsx(us,{size:16})]})]})]})]})}),n.jsx("section",{className:"home-page__features",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),n.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),n.jsxs("div",{className:"home-page__features-grid",children:[n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon",children:n.jsx(Nn,{size:28})}),n.jsx("h3",{children:"Cours complets"}),n.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:n.jsx(b2,{size:28})}),n.jsx("h3",{children:"Quiz interactifs"}),n.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:n.jsx(j2,{size:28})}),n.jsx("h3",{children:"Suivi de progression"}),n.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:n.jsx(oy,{size:28})}),n.jsx("h3",{children:"Contenu vrifi"}),n.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:n.jsx($l,{size:28})}),n.jsx("h3",{children:"Accessible 24/7"}),n.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),n.jsxs("div",{className:"home-page__feature-card",children:[n.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:n.jsx(Ri,{size:28})}),n.jsx("h3",{children:"Certificats"}),n.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),n.jsx("section",{className:"home-page__premium",children:n.jsx("div",{className:"home-page__container",children:n.jsxs("div",{className:"home-page__premium-content",children:[n.jsxs("div",{className:"home-page__premium-text",children:[n.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),n.jsx("h2",{children:"Passez  la vitesse suprieure"}),n.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",n.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),n.jsxs("ul",{className:"home-page__premium-features",children:[n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Quiz illimits dans toutes les matires"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Corrections dtailles des exercices"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Annales des examens (BFEM, BAC)"]}),n.jsxs("li",{children:[n.jsx(Dt,{size:18})," Support prioritaire"]})]}),n.jsxs(Le,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",n.jsx(us,{size:20})]})]}),n.jsx("div",{className:"home-page__premium-pricing",children:n.jsxs("div",{className:"home-page__pricing-card",children:[n.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),n.jsx("h3",{children:"Abonnement Annuel"}),n.jsxs("div",{className:"home-page__pricing-price",children:[n.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),n.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),n.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),n.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),n.jsx(Le,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),n.jsx("section",{className:"home-page__testimonials",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),n.jsxs("div",{className:"home-page__testimonials-grid",children:[n.jsxs("div",{className:"home-page__testimonial-card",children:[n.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>n.jsx(Wr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),n.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),n.jsxs("div",{className:"home-page__testimonial-author",children:[n.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),n.jsxs("div",{children:[n.jsx("strong",{children:"Fatou Adara"}),n.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),n.jsxs("div",{className:"home-page__testimonial-card",children:[n.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>n.jsx(Wr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),n.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),n.jsxs("div",{className:"home-page__testimonial-author",children:[n.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),n.jsxs("div",{children:[n.jsx("strong",{children:"Moussa Diallo"}),n.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),n.jsxs("div",{className:"home-page__testimonial-card",children:[n.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>n.jsx(Wr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),n.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),n.jsxs("div",{className:"home-page__testimonial-author",children:[n.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),n.jsxs("div",{children:[n.jsx("strong",{children:"Aminata Ndiaye"}),n.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),n.jsx("section",{className:"home-page__final-cta",children:n.jsxs("div",{className:"home-page__container",children:[n.jsx("h2",{children:"Prt  russir ?"}),n.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!e&&n.jsxs(Le,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",n.jsx(us,{size:24})]})]})})]})},_q=()=>{const{login:e}=Ct(),t=Yt(),a=Kf().state?.from||"/",[l,o]=y.useState({email:"",password:""}),[u,d]=y.useState(!1),[m,h]=y.useState(""),[p,v]=y.useState(!1),x=N=>{const{name:S,value:C}=N.target;o(z=>({...z,[S]:C})),m&&h("")},b=()=>l.email.trim()?l.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)?!0:(h("Veuillez entrer une adresse email valide."),!1):(h("Veuillez entrer votre mot de passe."),!1):(h("Veuillez entrer votre adresse email."),!1),_=async N=>{if(N.preventDefault(),!!b()){d(!0),h("");try{await e(l.email,l.password),t(a,{replace:!0})}catch(S){S instanceof Error?h(S.message):h("Une erreur est survenue lors de la connexion.")}finally{d(!1)}}};return n.jsx("div",{className:"auth-page",children:n.jsxs("div",{className:"auth-container",children:[n.jsxs("div",{className:"auth-card",children:[n.jsxs("div",{className:"auth-header",children:[n.jsxs(Le,{to:"/",className:"auth-logo",children:[n.jsx("div",{className:"auth-logo__icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),n.jsx("span",{children:"PedaClic"})]}),n.jsx("h1",{className:"auth-title",children:"Connexion"}),n.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),m&&n.jsxs("div",{className:"auth-error",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 8v4M12 16h.01"})]}),n.jsx("span",{children:m})]}),n.jsxs("form",{onSubmit:_,className:"auth-form",children:[n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),n.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:x,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:u})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[n.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),n.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),n.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:l.password,onChange:x,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:u}),n.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!p),"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",children:p?n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),n.jsx("div",{className:"auth-forgot",children:n.jsx(Le,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),n.jsx("button",{type:"submit",className:"auth-button",disabled:u,children:u?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),n.jsx("div",{className:"auth-divider",children:n.jsx("span",{children:"ou"})}),n.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",n.jsx(Le,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),n.jsxs("div",{className:"auth-welcome",children:[n.jsx("h2",{children:"Bienvenue sur PedaClic !"}),n.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),n.jsxs("ul",{className:"auth-features",children:[n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},Sq=()=>{const{register:e}=Ct(),t=Yt(),[r,a]=y.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[l,o]=y.useState(!1),[u,d]=y.useState(""),[m,h]=y.useState(!1),[p,v]=y.useState(!1),[x,b]=y.useState(!1),_=C=>{const{name:z,value:w}=C.target;a(E=>({...E,[z]:w})),u&&d("")},N=()=>r.displayName.trim()?r.displayName.trim().length<2?(d("Le nom doit contenir au moins 2 caractres."),!1):r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?r.password?r.password.length<6?(d("Le mot de passe doit contenir au moins 6 caractres."),!1):r.password!==r.confirmPassword?(d("Les mots de passe ne correspondent pas."),!1):x?!0:(d("Veuillez accepter les conditions d'utilisation."),!1):(d("Veuillez entrer un mot de passe."),!1):(d("Veuillez entrer une adresse email valide."),!1):(d("Veuillez entrer votre adresse email."),!1):(d("Veuillez entrer votre nom complet."),!1),S=async C=>{if(C.preventDefault(),!!N()){o(!0),d("");try{await e(r),t("/disciplines",{replace:!0})}catch(z){z instanceof Error?d(z.message):d("Une erreur est survenue lors de l'inscription.")}finally{o(!1)}}};return n.jsx("div",{className:"auth-page",children:n.jsxs("div",{className:"auth-container",children:[n.jsxs("div",{className:"auth-card auth-card--register",children:[n.jsxs("div",{className:"auth-header",children:[n.jsxs(Le,{to:"/",className:"auth-logo",children:[n.jsx("div",{className:"auth-logo__icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),n.jsx("span",{children:"PedaClic"})]}),n.jsx("h1",{className:"auth-title",children:"Crer un compte"}),n.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),u&&n.jsxs("div",{className:"auth-error",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 8v4M12 16h.01"})]}),n.jsx("span",{children:u})]}),n.jsxs("form",{onSubmit:S,className:"auth-form",children:[n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),n.jsx("input",{type:"text",id:"displayName",name:"displayName",value:r.displayName,onChange:_,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:l})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),n.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:_,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:l})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{className:"auth-label",children:"Je suis :"}),n.jsxs("div",{className:"auth-role-selector",children:[n.jsxs("label",{className:`auth-role-option ${r.role==="eleve"?"auth-role-option--selected":""}`,children:[n.jsx("input",{type:"radio",name:"role",value:"eleve",checked:r.role==="eleve",onChange:_,className:"auth-role-input",disabled:l}),n.jsxs("div",{className:"auth-role-content",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),n.jsx("span",{children:"lve"})]})]}),n.jsxs("label",{className:`auth-role-option ${r.role==="prof"?"auth-role-option--selected":""}`,children:[n.jsx("input",{type:"radio",name:"role",value:"prof",checked:r.role==="prof",onChange:_,className:"auth-role-input",disabled:l}),n.jsxs("div",{className:"auth-role-content",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),n.jsx("span",{children:"Professeur"})]})]}),n.jsxs("label",{className:`auth-role-option ${r.role==="parent"?"auth-role-option--selected":""}`,children:[n.jsx("input",{type:"radio",name:"role",value:"parent",checked:r.role==="parent",onChange:_,className:"auth-role-input",disabled:l}),n.jsxs("div",{className:"auth-role-content",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),n.jsx("span",{children:"Parent d'lve"})]})]})]})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[n.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),n.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),n.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:r.password,onChange:_,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:l}),n.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>h(!m),"aria-label":m?"Masquer":"Afficher",children:m?n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),n.jsxs("div",{className:"auth-field",children:[n.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),n.jsxs("div",{className:"auth-input-wrapper",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),n.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:_,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:l}),n.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!p),"aria-label":p?"Masquer":"Afficher",children:p?n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),n.jsx("div",{className:"auth-checkbox-field",children:n.jsxs("label",{className:"auth-checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:C=>b(C.target.checked),className:"auth-checkbox",disabled:l}),n.jsx("span",{className:"auth-checkbox-custom"}),n.jsxs("span",{children:["J'accepte les"," ",n.jsx(Le,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",n.jsx(Le,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),n.jsx("button",{type:"submit",className:"auth-button",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),n.jsx("div",{className:"auth-divider",children:n.jsx("span",{children:"ou"})}),n.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",n.jsx(Le,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),n.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[n.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),n.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),n.jsxs("div",{className:"auth-stats",children:[n.jsxs("div",{className:"auth-stat",children:[n.jsx("span",{className:"auth-stat-number",children:"10 000+"}),n.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),n.jsxs("div",{className:"auth-stat",children:[n.jsx("span",{className:"auth-stat-number",children:"500+"}),n.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),n.jsxs("div",{className:"auth-stat",children:[n.jsx("span",{className:"auth-stat-number",children:"95%"}),n.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),n.jsxs("div",{className:"auth-testimonial",children:[n.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),n.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},S2=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],w2=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],C2=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],A2={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function r_(e){switch(e){case"college":return S2;case"lycee":return w2;case"formation_libre":return C2;default:return[]}}function E2(e){return[...S2,...w2,...C2].find(r=>r.value===e)?.label||e}const n_=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],wq=()=>{const[e,t]=y.useState("college"),[r,a]=y.useState([]),[l,o]=y.useState(!0),u=Yt();y.useEffect(()=>{const h=qe(je(se,"disciplines"),nt("ordre")),p=y2(h,v=>{const x=v.docs.map(b=>({id:b.id,...b.data(),createdAt:b.data().createdAt?.toDate()||new Date,updatedAt:b.data().updatedAt?.toDate()||new Date}));a(x),o(!1)});return()=>p()},[]);const d=r.filter(h=>h.niveau===e),m=n_.find(h=>h.niveau===e);return n.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[n.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[n.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),n.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),n.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:n_.map(h=>{const p=e===h.niveau;return n.jsxs("button",{onClick:()=>t(h.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${p?h.color:"#e2e8f0"}`,background:p?h.bgLight:"#fff",color:p?h.color:"#718096",fontSize:"1rem",fontWeight:p?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:p?`0 2px 8px ${h.color}20`:"none"},children:[n.jsx("span",{style:{fontSize:"1.2rem"},children:h.icon}),h.label]},h.niveau)})}),l&&n.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!l&&d.length===0&&n.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[n.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",A2[e]," pour le moment."]})]}),!l&&d.length>0&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:d.map(h=>n.jsxs("div",{onClick:()=>u(`/disciplines/${h.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${h.couleur||m.color}`},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[n.jsx("span",{style:{fontSize:"1.8rem"},children:h.icone||""}),n.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:h.nom})]}),h.description&&n.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:h.description.length>100?`${h.description.slice(0,100)}...`:h.description}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:n.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:m.bgLight,color:m.color},children:E2(h.classe)})}),h.coefficient!==void 0&&n.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",h.coefficient]})]},h.id))})]})},Jo="disciplines",a_=e=>{const t=e.data();return{id:e.id,nom:t.nom,niveau:t.niveau,classe:t.classe,ordre:t.ordre,coefficient:t.coefficient,couleur:t.couleur,icone:t.icone,description:t.description,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},$i={async getAll(e){try{const t=[nt("ordre","asc")];e?.niveau&&t.unshift(we("niveau","==",e.niveau)),e?.classe&&t.unshift(we("classe","==",e.classe));const r=qe(je(se,Jo),...t);return(await ke(r)).docs.map(a_)}catch(t){throw console.error("Erreur lors de la rcupration des disciplines:",t),new Error("Impossible de rcuprer les disciplines")}},async getById(e){try{const t=be(se,Jo,e),r=await Vt(t);return r.exists()?a_(r):null}catch(t){throw console.error("Erreur lors de la rcupration de la discipline:",t),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(e){return this.getAll({niveau:e})},async getByClasse(e){return this.getAll({classe:e})},async create(e){try{return(await nr(je(se,Jo),{...e,createdAt:ft(),updatedAt:ft()})).id}catch(t){throw console.error("Erreur lors de la cration de la discipline:",t),new Error("Impossible de crer la discipline")}},async update(e,t){try{const r=be(se,Jo,e);await We(r,{...t,updatedAt:ft()})}catch(r){throw console.error("Erreur lors de la mise  jour de la discipline:",r),new Error("Impossible de mettre  jour la discipline")}},async delete(e){try{const t=be(se,Jo,e);await _n(t)}catch(t){throw console.error("Erreur lors de la suppression de la discipline:",t),new Error("Impossible de supprimer la discipline")}},async exists(e){return await this.getById(e)!==null},async countByNiveau(e){return(await this.getByNiveau(e)).length}},os="ressources",Cq="ressources",i_=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,titre:t.titre,type:t.type,contenu:t.contenu,description:t.description,isPremium:t.isPremium||!1,ordre:t.ordre||0,chapitre:t.chapitre,fichierURL:t.fichierURL,dureeEstimee:t.dureeEstimee,tags:t.tags||[],auteurId:t.auteurId,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Aq=e=>{const t=Date.now(),r=e.split(".").pop();return`${e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${t}.${r}`},Ca={async getAll(e,t){try{const r=[nt("ordre","asc")];e?.disciplineId&&r.unshift(we("disciplineId","==",e.disciplineId)),e?.chapitreId&&r.unshift(we("chapitre","==",e.chapitreId)),e?.type&&r.unshift(we("type","==",e.type)),e?.isPremium!==void 0&&r.unshift(we("isPremium","==",e.isPremium)),e?.auteurId&&r.unshift(we("auteurId","==",e.auteurId)),t&&r.push(Sn(t));const a=qe(je(se,os),...r);return(await ke(a)).docs.map(i_)}catch(r){throw console.error("Erreur lors de la rcupration des ressources:",r),new Error("Impossible de rcuprer les ressources")}},async getById(e){try{const t=be(se,os,e),r=await Vt(t);return r.exists()?i_(r):null}catch(t){throw console.error("Erreur lors de la rcupration de la ressource:",t),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(e){return this.getAll({disciplineId:e})},async getByChapitre(e){return this.getAll({chapitreId:e})},async getByType(e){return this.getAll({type:e})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(e,t){try{return(await nr(je(se,os),{...e,auteurId:t,createdAt:ft(),updatedAt:ft()})).id}catch(r){throw console.error("Erreur lors de la cration de la ressource:",r),new Error("Impossible de crer la ressource")}},async update(e,t){try{const r=be(se,os,e);await We(r,{...t,updatedAt:ft()})}catch(r){throw console.error("Erreur lors de la mise  jour de la ressource:",r),new Error("Impossible de mettre  jour la ressource")}},async delete(e){try{const t=await this.getById(e);t?.fichierURL&&await this.deleteFile(t.fichierURL);const r=be(se,os,e);await _n(r)}catch(t){throw console.error("Erreur lors de la suppression de la ressource:",t),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),r=jc(se);for(const a of t){a.fichierURL&&await this.deleteFile(a.fichierURL);const l=be(se,os,a.id);r.delete(l)}await r.commit()}catch(t){throw console.error("Erreur lors de la suppression des ressources:",t),new Error("Impossible de supprimer les ressources")}},async uploadFile(e,t){try{const r=Aq(e.name),a=`${Cq}/${t}/${r}`,l=Jr(en,a);return await zi(l,e),await Oi(l)}catch(r){throw console.error("Erreur lors de l'upload du fichier:",r),new Error("Impossible d'uploader le fichier")}},async deleteFile(e){try{const t=Jr(en,e);await vc(t)}catch(t){console.warn("Fichier non trouv ou dj supprim:",t)}},async reorder(e,t){try{const r=jc(se);t.forEach((a,l)=>{const o=be(se,os,a);r.update(o,{ordre:l+1,updatedAt:ft()})}),await r.commit()}catch(r){throw console.error("Erreur lors de la rorganisation des ressources:",r),new Error("Impossible de rorganiser les ressources")}},async togglePremium(e,t){await this.update(e,{isPremium:t})},async countByType(e){return(await this.getByType(e)).length},async getStats(){try{const e=await this.getAll(),t={total:e.length,premium:e.filter(r=>r.isPremium).length,gratuit:e.filter(r=>!r.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return e.forEach(r=>{t.parType[r.type]!==void 0&&t.parType[r.type]++}),t}catch(e){throw console.error("Erreur lors du calcul des statistiques:",e),new Error("Impossible de calculer les statistiques")}}},Eq=()=>{const{id:e}=Kl(),t=Yt(),[r,a]=y.useState(null),[l,o]=y.useState([]),[u,d]=y.useState([]),[m,h]=y.useState(!0),[p,v]=y.useState(null),[x,b]=y.useState("tous"),[_,N]=y.useState(new Set),S=y.useCallback(async()=>{if(e)try{h(!0),v(null);const D=await $i.getById(e);if(!D){v("Discipline introuvable."),h(!1);return}a(D);const k=await Ca.getAll({disciplineId:e}),$=new Map,B=[];for(const oe of k){const F=oe.chapitre||oe.chapitreId;F?($.has(F)||$.set(F,[]),$.get(F).push(oe)):B.push(oe)}const le=Array.from($.entries()).map(([oe,F])=>({chapitreNom:oe,ressources:F.sort((q,J)=>q.ordre-J.ordre)})).sort((oe,F)=>oe.chapitreNom.localeCompare(F.chapitreNom,"fr"));o(le),d(B),le.length>0&&N(new Set([le[0].chapitreNom]))}catch(D){console.error("Erreur chargement discipline:",D),v("Impossible de charger les donnes. Ressayez plus tard.")}finally{h(!1)}},[e]);y.useEffect(()=>{S()},[S]);const C=D=>{N(k=>{const $=new Set(k);return $.has(D)?$.delete(D):$.add(D),$})},z=D=>x==="tous"?D:D.filter(k=>k.type===x),w=D=>{switch(D){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},E=D=>{switch(D){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return D}},O=D=>{switch(D){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},P=D=>D==="college"?"Collge":"Lyce";if(m)return n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),n.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(p||!r)return n.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[n.jsx("span",{style:{fontSize:"3rem"},children:""}),n.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:p||"Discipline introuvable"}),n.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),n.jsx("button",{onClick:()=>t("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const L=[...l.flatMap(D=>D.ressources),...u],T=[...new Set(L.map(D=>D.type))];return n.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[n.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[n.jsx(Le,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),n.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),n.jsx(Le,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),n.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),n.jsx("span",{style:{color:"#374151"},children:r.nom})]}),n.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[n.jsx("span",{style:{fontSize:"2.5rem"},children:r.icone||""}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:r.nom}),r.description&&n.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:r.description})]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[n.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",P(r.niveau),"  ",r.classe]}),n.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",L.length," ressource",L.length!==1?"s":""]}),r.coefficient&&n.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",r.coefficient]})]})]}),T.length>1&&n.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[n.jsxs("button",{onClick:()=>b("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:x==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:x==="tous"?"#2563eb":"#fff",color:x==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",L.length,")"]}),T.map(D=>{const k=L.filter(B=>B.type===D).length,$=x===D;return n.jsxs("button",{onClick:()=>b(D),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:$?`2px solid ${O(D)}`:"1px solid #d1d5db",background:$?O(D):"#fff",color:$?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[w(D)," ",E(D)," (",k,")"]},D)})]}),l.length===0&&u.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[n.jsx("span",{style:{fontSize:"3rem"},children:""}),n.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),n.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.map(D=>{const k=z(D.ressources);if(k.length===0&&x!=="tous")return null;const $=_.has(D.chapitreNom),B=x==="tous"?D.ressources:k;return n.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:$?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[n.jsx("button",{onClick:()=>C(D.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:$?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("span",{style:{fontSize:"1.25rem",transform:$?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:D.chapitreNom}),n.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[D.ressources.length," ressource",D.ressources.length!==1?"s":""]})]})]})}),$&&n.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:B.map(le=>n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:oe=>oe.currentTarget.style.background="#eef2ff",onMouseLeave:oe=>oe.currentTarget.style.background="#f9fafb",children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[n.jsx("span",{style:{fontSize:"1.2rem"},children:w(le.type)}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:le.titre}),le.description&&n.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:le.description})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(le.type)},children:E(le.type)}),le.isPremium&&n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),le.dureeEstimee&&n.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",le.dureeEstimee," min"]})]})]},le.id))})]},D.chapitreNom)}),z(u).length>0&&n.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:z(u).map(D=>n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("span",{style:{fontSize:"1.2rem"},children:w(D.type)}),n.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:D.titre})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(D.type)},children:E(D.type)}),D.isPremium&&n.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},D.id))})]})]}),n.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:n.jsx(Le,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},pv=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],zq=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],Oq=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],Dq=()=>{const{currentUser:e}=Ct(),t=Kf(),r=Yt(),[a,l]=y.useState("annuel"),[o,u]=y.useState(!1),[d,m]=y.useState(null),[h,p]=y.useState(null);t.state?.from;const v=()=>!e||!e.isPremium?!1:e.subscriptionEnd?(e.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e.subscriptionEnd))>new Date:!0,x=async()=>{if(!e){r("/connexion",{state:{from:"/premium"}});return}if(v()){m("Vous tes dj abonn Premium !");return}try{u(!0),m(null);const N=pv.find(E=>E.id===a);if(!N)throw new Error("Plan invalide");const S=await nr(je(se,"transactions"),{userId:e.uid,userEmail:e.email,planType:a,montant:N.prix,devise:"XOF",statut:"pending",dateTransaction:ft(),createdAt:ft()}),C={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${N.nom}`,item_price:N.prix,currency:"XOF",ref_command:S.id,success_url:`${window.location.origin}/premium/success?ref=${S.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${S.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:e.uid,planType:a,transactionId:S.id}),env:"test"},w=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:C.apiKey,API_SECRET:C.apiSecret},body:JSON.stringify({item_name:C.item_name,item_price:C.item_price,currency:C.currency,ref_command:C.ref_command,command_name:`Abonnement Premium ${N.nom} - ${e.email}`,env:C.env,ipn_url:C.ipn_url,success_url:C.success_url,cancel_url:C.cancel_url,custom_field:C.custom_field})})).json();if(w.success===1&&w.redirect_url)window.location.href=w.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const E=new Date,O=new Date(E);a==="mensuel"?O.setMonth(O.getMonth()+1):O.setFullYear(O.getFullYear()+1),await We(be(se,"users",e.uid),{isPremium:!0,subscriptionEnd:O,subscriptionPlan:a,updatedAt:ft()}),await We(be(se,"transactions",S.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:O,updatedAt:ft()}),r("/premium/success",{state:{plan:N.nom,montant:N.prix,expiration:O.toLocaleDateString("fr-FR")}})}}catch(N){console.error("Erreur paiement:",N),m("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{u(!1)}},b=N=>{p(h===N?null:N)},_=N=>N.toLocaleString("fr-FR")+" FCFA";if(v()){const N=e?.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e?.subscriptionEnd||Date.now());return n.jsx("div",{className:"premium-page",children:n.jsx("div",{className:"container",children:n.jsxs("div",{className:"premium-already",children:[n.jsx("span",{className:"premium-already__icon",children:""}),n.jsx("h1",{children:"Vous tes dj Premium !"}),n.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",n.jsx("strong",{children:N.toLocaleDateString("fr-FR")})]}),n.jsxs("div",{className:"premium-already__actions",children:[n.jsx(Le,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),n.jsx(Le,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return n.jsxs("div",{className:"premium-page",children:[n.jsx("section",{className:"premium-hero",children:n.jsxs("div",{className:"container",children:[n.jsx("span",{className:"premium-hero__badge",children:" Premium"}),n.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",n.jsx("span",{children:"PedaClic"})]}),n.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),n.jsx("section",{className:"premium-pricing",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),n.jsx("div",{className:"pricing-cards",children:pv.map(N=>n.jsxs("div",{className:`pricing-card ${a===N.id?"pricing-card--selected":""} ${N.popular?"pricing-card--popular":""}`,onClick:()=>l(N.id),children:[N.popular&&n.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),n.jsxs("div",{className:"pricing-card__header",children:[n.jsx("h3",{className:"pricing-card__name",children:N.nom}),n.jsx("p",{className:"pricing-card__duration",children:N.duree})]}),n.jsxs("div",{className:"pricing-card__price",children:[N.prixOriginal&&n.jsx("span",{className:"pricing-card__original",children:_(N.prixOriginal)}),n.jsx("span",{className:"pricing-card__amount",children:_(N.prix)}),N.id==="mensuel"&&n.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),N.economie&&n.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",N.economie]}),n.jsx("div",{className:"pricing-card__radio",children:n.jsx("span",{className:`radio-dot ${a===N.id?"radio-dot--active":""}`})})]},N.id))}),n.jsxs("div",{className:"pricing-cta",children:[d&&n.jsxs("div",{className:"pricing-error",children:[n.jsx("span",{children:""})," ",d]}),e?n.jsx("button",{className:"btn btn--premium btn--lg",onClick:x,disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):n.jsxs(n.Fragment,{children:["Payer ",_(pv.find(N=>N.id===a)?.prix||0)]})}):n.jsxs("div",{className:"pricing-login",children:[n.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),n.jsx(Le,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),n.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",n.jsx(Le,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),n.jsxs("div",{className:"payment-methods",children:[n.jsx("p",{children:"Paiement scuris par"}),n.jsxs("div",{className:"payment-methods__logos",children:[n.jsx("span",{className:"payment-logo",children:" Orange Money"}),n.jsx("span",{className:"payment-logo",children:" Wave"}),n.jsx("span",{className:"payment-logo",children:" Free Money"}),n.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),n.jsx("section",{className:"premium-features",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),n.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),n.jsx("div",{className:"features-grid",children:zq.map((N,S)=>n.jsxs("div",{className:"feature-card",children:[n.jsx("span",{className:"feature-card__icon",children:N.icone}),n.jsx("h3",{className:"feature-card__title",children:N.titre}),n.jsx("p",{className:"feature-card__description",children:N.description})]},S))})]})}),n.jsx("section",{className:"premium-comparison",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),n.jsxs("div",{className:"comparison-table",children:[n.jsxs("div",{className:"comparison-header",children:[n.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),n.jsx("div",{className:"comparison-free",children:"Gratuit"}),n.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((N,S)=>n.jsxs("div",{className:"comparison-row",children:[n.jsx("div",{className:"comparison-feature",children:N.feature}),n.jsx("div",{className:"comparison-free",children:N.free?n.jsx("span",{className:"check",children:""}):n.jsx("span",{className:"cross",children:""})}),n.jsx("div",{className:"comparison-premium",children:n.jsx("span",{className:"check check--premium",children:""})})]},S))]})]})}),n.jsx("section",{className:"premium-testimonials",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),n.jsxs("div",{className:"testimonials-grid",children:[n.jsxs("div",{className:"testimonial-card",children:[n.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),n.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),n.jsxs("div",{className:"testimonial-card__author",children:[n.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),n.jsxs("div",{children:[n.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),n.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),n.jsxs("div",{className:"testimonial-card",children:[n.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),n.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),n.jsxs("div",{className:"testimonial-card__author",children:[n.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),n.jsxs("div",{children:[n.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),n.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),n.jsxs("div",{className:"testimonial-card",children:[n.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),n.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),n.jsxs("div",{className:"testimonial-card__author",children:[n.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),n.jsxs("div",{children:[n.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),n.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),n.jsx("section",{className:"premium-faq",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{className:"section-title",children:"Questions frquentes"}),n.jsx("div",{className:"faq-list",children:Oq.map((N,S)=>n.jsxs("div",{className:`faq-item ${h===S?"faq-item--open":""}`,children:[n.jsxs("button",{className:"faq-item__question",onClick:()=>b(S),"aria-expanded":h===S,children:[n.jsx("span",{children:N.question}),n.jsx("span",{className:"faq-item__icon",children:h===S?"":"+"})]}),h===S&&n.jsx("div",{className:"faq-item__answer",children:n.jsx("p",{children:N.reponse})})]},S))})]})}),n.jsx("section",{className:"premium-cta-final",children:n.jsxs("div",{className:"container",children:[n.jsx("h2",{children:"Prt  russir vos examens ?"}),n.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),n.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},Mq=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"},{id:"ebooks",label:"Bibliothque Ebooks",icon:"",href:"/admin/ebooks"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],gn=({children:e,currentPage:t="dashboard"})=>{const{currentUser:r,logout:a}=Ct(),[l,o]=y.useState(!0),[u,d]=y.useState(!1),m=Kf(),h=async()=>{try{d(!0),await a(),window.location.href="/connexion"}catch(b){console.error("Erreur lors de la dconnexion:",b),d(!1)}},p=()=>r?.displayName?r.displayName.split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2):"AD",v=()=>{switch(r?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},x=b=>b.href==="/admin"?m.pathname==="/admin"||m.pathname==="/admin/":m.pathname.startsWith(b.href);return n.jsxs("div",{className:"admin-layout",children:[n.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[n.jsx("header",{className:"admin-sidebar__header",children:n.jsxs(Le,{to:"/",className:"admin-sidebar__logo",children:[n.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),n.jsx("span",{children:"PedaClic"})]})}),n.jsx("nav",{className:"admin-sidebar__nav",children:Mq.map((b,_)=>n.jsxs("div",{className:"admin-nav__section",children:[n.jsx("h3",{className:"admin-nav__title",children:b.title}),n.jsx("ul",{className:"admin-nav__list",children:b.items.map(N=>n.jsx("li",{className:"admin-nav__item",children:n.jsxs(Le,{to:N.href,className:`admin-nav__link ${x(N)?"admin-nav__link--active":""}`,children:[n.jsx("span",{className:"admin-nav__icon",children:N.icon}),n.jsx("span",{className:"admin-nav__label",children:N.label})]})},N.id))})]},_))}),n.jsx("footer",{className:"admin-sidebar__footer",children:n.jsxs("div",{className:"admin-user",children:[n.jsx("div",{className:"admin-user__avatar",children:p()}),n.jsxs("div",{className:"admin-user__info",children:[n.jsx("div",{className:"admin-user__name",children:r?.displayName||"Administrateur"}),n.jsx("div",{className:"admin-user__role",children:v()})]}),n.jsx("button",{onClick:h,disabled:u,className:"admin-logout-btn",title:"Se dconnecter",children:u?"...":""})]})})]}),n.jsxs("main",{className:"admin-content",children:[n.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!l),"aria-label":"Toggle sidebar",children:""}),e]}),n.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},_i="chapitres",vv=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,numero:t.numero,titre:t.titre,description:t.description,objectifs:t.objectifs||[],dureeEstimee:t.dureeEstimee,isPremium:t.isPremium||!1,actif:t.actif!==!1,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Si={async getByDiscipline(e){try{const t=qe(je(se,_i),we("disciplineId","==",e),nt("numero","asc"));return(await ke(t)).docs.map(vv)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const e=qe(je(se,_i),nt("numero","asc"));return(await ke(e)).docs.map(vv)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getById(e){try{const t=be(se,_i,e),r=await Vt(t);return r.exists()?vv(r):null}catch(t){throw console.error("Erreur lors de la rcupration du chapitre:",t),new Error("Impossible de rcuprer le chapitre")}},async create(e){try{return(await nr(je(se,_i),{...e,actif:e.actif!==!1,createdAt:ft(),updatedAt:ft()})).id}catch(t){throw console.error("Erreur lors de la cration du chapitre:",t),new Error("Impossible de crer le chapitre")}},async update(e,t){try{const r=be(se,_i,e);await We(r,{...t,updatedAt:ft()})}catch(r){throw console.error("Erreur lors de la mise  jour du chapitre:",r),new Error("Impossible de mettre  jour le chapitre")}},async delete(e){try{const t=be(se,_i,e);await _n(t)}catch(t){throw console.error("Erreur lors de la suppression du chapitre:",t),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),r=jc(se);t.forEach(a=>{const l=be(se,_i,a.id);r.delete(l)}),await r.commit()}catch(t){throw console.error("Erreur lors de la suppression des chapitres:",t),new Error("Impossible de supprimer les chapitres")}},async reorder(e,t){try{const r=jc(se);t.forEach((a,l)=>{const o=be(se,_i,a);r.update(o,{numero:l+1,updatedAt:ft()})}),await r.commit()}catch(r){throw console.error("Erreur lors de la rorganisation des chapitres:",r),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(e,t){await this.update(e,{actif:t})},async countByDiscipline(e){return(await this.getByDiscipline(e)).length},async getNextNumero(e){return await this.countByDiscipline(e)+1}},Tq=()=>{const{currentUser:e}=Ct(),t=Yt(),[r,a]=y.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[l,o]=y.useState(!0),[u,d]=y.useState(null);return y.useEffect(()=>{(async()=>{try{o(!0),d(null);const[h,p,v,x,b]=await Promise.all([$i.getAll(),Si.getAll(),Ca.getStats(),ke(je(se,"quizzes")),ke(je(se,"quizzes_v2"))]);a({totalDisciplines:h.length,totalChapitres:p.length,totalRessources:v.total,ressourcesPremium:v.premium,ressourcesGratuites:v.gratuit,totalQuiz:x.size,totalQuizAvances:b.size,ressourcesParType:v.parType})}catch(h){console.error("Erreur lors du chargement des statistiques:",h),d("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),n.jsxs("div",{className:"admin-dashboard",children:[n.jsx("header",{className:"admin-page-header",children:n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),n.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",e?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&n.jsxs("div",{className:"alert alert--error",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:u})})]}),l?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des statistiques..."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/disciplines"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalDisciplines}),n.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/chapitres"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalChapitres}),n.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalRessources}),n.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.ressourcesPremium}),n.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalQuiz}),n.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),n.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz-avance"),children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalQuizAvances}),n.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),n.jsxs("section",{className:"content-card",children:[n.jsx("div",{className:"content-card__header",children:n.jsx("h2",{children:"Rpartition des ressources par type"})}),n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"resource-type-grid",children:[n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.cours}),n.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.exercice}),n.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.video}),n.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.document}),n.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),n.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,children:[n.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),n.jsxs("div",{className:"resource-type-info",children:[n.jsx("span",{className:"resource-type-value",children:r.totalQuiz+r.totalQuizAvances}),n.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),n.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[n.jsx("div",{className:"content-card__header",children:n.jsx("h2",{children:"Actions rapides"})}),n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"quick-actions-grid",children:[n.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les disciplines"}),n.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),n.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les chapitres"}),n.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),n.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les ressources"}),n.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),n.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les quiz"}),n.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),n.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Quiz avancs"}),n.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),n.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[n.jsx("div",{className:"quick-action-icon",children:""}),n.jsxs("div",{className:"quick-action-content",children:[n.jsx("h3",{children:"Grer les utilisateurs"}),n.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),n.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},Me={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},gv={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},Pq=()=>{const[e,t]=y.useState([]),[r,a]=y.useState(gv),[l,o]=y.useState(null),[u,d]=y.useState(!1),[m,h]=y.useState("all");y.useEffect(()=>{const z=qe(je(se,"disciplines"),nt("nom")),w=y2(z,E=>{const O=E.docs.map(P=>({id:P.id,...P.data(),createdAt:P.data().createdAt?.toDate()||new Date,updatedAt:P.data().updatedAt?.toDate()||new Date}));t(O)});return()=>w()},[]);const p=y.useCallback(z=>{const w=r_(z)[0]?.value||"6eme";a(E=>({...E,niveau:z,classe:w,coefficient:z==="formation_libre"?void 0:E.coefficient}))},[]),v=async z=>{if(z.preventDefault(),!!r.nom.trim()){d(!0);try{const w={nom:r.nom.trim(),niveau:r.niveau,classe:r.classe,ordre:r.ordre,...r.coefficient!==void 0&&{coefficient:r.coefficient},couleur:r.couleur||"",icone:r.icone||"",description:r.description||"",updatedAt:He.now()};l?await We(be(se,"disciplines",l),w):await nr(je(se,"disciplines"),{...w,createdAt:He.now()}),a(gv),o(null)}catch(w){console.error("Erreur lors de la sauvegarde :",w),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{d(!1)}}},x=z=>{a({nom:z.nom,niveau:z.niveau,classe:z.classe,ordre:z.ordre,coefficient:z.coefficient,couleur:z.couleur||"",icone:z.icone||"",description:z.description||""}),o(z.id)},b=async(z,w)=>{if(window.confirm(`Supprimer la discipline "${w}" ? Cette action est irrversible.`))try{await _n(be(se,"disciplines",z))}catch(E){console.error("Erreur lors de la suppression :",E)}},_=()=>{a(gv),o(null)},N=r_(r.niveau),S=m==="all"?e:e.filter(z=>z.niveau===m),C=z=>({...Me.badge,...z==="college"?Me.badgeCollege:{},...z==="lycee"?Me.badgeLycee:{},...z==="formation_libre"?Me.badgeFormationLibre:{}});return n.jsxs("div",{style:Me.container,children:[n.jsx("h2",{style:Me.title,children:" Gestion des Disciplines"}),n.jsxs("form",{style:Me.form,onSubmit:v,children:[n.jsx("h3",{style:Me.formTitle,children:l?" Modifier la discipline":" Ajouter une discipline"}),n.jsxs("div",{style:Me.formGrid,children:[n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:"Nom de la discipline"}),n.jsx("input",{type:"text",style:Me.input,value:r.nom,onChange:z=>a({...r,nom:z.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:"Niveau"}),n.jsxs("select",{style:Me.select,value:r.niveau,onChange:z=>p(z.target.value),children:[n.jsx("option",{value:"college",children:" Collge"}),n.jsx("option",{value:"lycee",children:" Lyce"}),n.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:r.niveau==="formation_libre"?"Niveau de formation":"Classe"}),n.jsx("select",{style:Me.select,value:r.classe,onChange:z=>a({...r,classe:z.target.value}),children:N.map(({value:z,label:w})=>n.jsx("option",{value:z,children:w},z))})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsx("label",{style:Me.label,children:"Ordre d'affichage"}),n.jsx("input",{type:"number",style:Me.input,value:r.ordre,onChange:z=>a({...r,ordre:Number(z.target.value)}),placeholder:"Ex : 1",min:"0"})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsxs("label",{style:Me.label,children:["Coefficient",r.niveau==="formation_libre"&&n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("input",{type:"number",style:Me.input,value:r.coefficient??"",onChange:z=>a({...r,coefficient:z.target.value?Number(z.target.value):void 0}),placeholder:r.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:r.niveau!=="formation_libre"})]}),n.jsxs("div",{style:Me.fieldGroup,children:[n.jsxs("label",{style:Me.label,children:["Couleur",n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("input",{type:"color",style:{...Me.input,maxWidth:"80px",padding:"4px",height:"40px"},value:r.couleur||"#3182ce",onChange:z=>a({...r,couleur:z.target.value})})]})]}),n.jsxs("div",{style:{...Me.fieldGroup,marginBottom:"20px"},children:[n.jsxs("label",{style:Me.label,children:["Description",n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("textarea",{style:Me.textarea,value:r.description,onChange:z=>a({...r,description:z.target.value}),placeholder:"Brve description de la discipline..."})]}),n.jsxs("div",{style:{...Me.fieldGroup,marginBottom:"20px"},children:[n.jsxs("label",{style:Me.label,children:["Icne (emoji)",n.jsx("span",{style:Me.labelOptional,children:"(optionnel)"})]}),n.jsx("input",{type:"text",style:{...Me.input,maxWidth:"120px"},value:r.icone,onChange:z=>a({...r,icone:z.target.value}),placeholder:""})]}),n.jsxs("div",{children:[n.jsx("button",{type:"submit",style:Me.btnPrimary,disabled:u,children:u?"Enregistrement...":l?"Mettre  jour":"Ajouter la discipline"}),l&&n.jsx("button",{type:"button",style:Me.btnSecondary,onClick:_,children:"Annuler"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{style:Me.formTitle,children:[" Disciplines existantes (",S.length,")"]}),n.jsxs("div",{style:Me.tabs,children:[n.jsx("button",{style:{...Me.tab,...m==="all"?Me.tabActive:{}},onClick:()=>h("all"),children:"Toutes"}),n.jsx("button",{style:{...Me.tab,...m==="college"?Me.tabActive:{}},onClick:()=>h("college"),children:" Collge"}),n.jsx("button",{style:{...Me.tab,...m==="lycee"?Me.tabActive:{}},onClick:()=>h("lycee"),children:" Lyce"}),n.jsx("button",{style:{...Me.tab,...m==="formation_libre"?Me.tabActive:{}},onClick:()=>h("formation_libre"),children:" Formation libre"})]}),S.length===0?n.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):S.map(z=>n.jsxs("div",{style:Me.card,children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[z.icone&&n.jsx("span",{style:{fontSize:"1.2rem"},children:z.icone}),n.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:z.nom}),n.jsx("span",{style:C(z.niveau),children:A2[z.niveau]})]}),n.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[z.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",E2(z.classe),z.coefficient!==void 0&&n.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",z.coefficient]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"4px"},children:[n.jsx("button",{style:Me.btnEdit,onClick:()=>x(z),children:"Modifier"}),n.jsx("button",{style:Me.btnDanger,onClick:()=>b(z.id,z.nom),children:"Supprimer"})]})]},z.id))]})]})},s_={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},kq=()=>{const[e,t]=y.useState([]),[r,a]=y.useState([]),[l,o]=y.useState(""),[u,d]=y.useState(!0),[m,h]=y.useState(!1),[p,v]=y.useState(!1),[x,b]=y.useState(null),[_,N]=y.useState(null),[S,C]=y.useState(null),[z,w]=y.useState(!1),[E,O]=y.useState(!1),[P,L]=y.useState(null),[T,D]=y.useState(null),[k,$]=y.useState({...s_,disciplineId:""}),[B,le]=y.useState({}),[oe,F]=y.useState(""),q=y.useCallback(async()=>{try{d(!0);const I=await $i.getAll();t(I),I.length>0&&!l&&o(I[0].id)}catch(I){console.error("Erreur lors du chargement des disciplines:",I),N("Impossible de charger les disciplines.")}finally{d(!1)}},[l]),J=y.useCallback(async()=>{if(!l){a([]);return}try{h(!0);const I=await Si.getByDiscipline(l);a(I)}catch(I){console.error("Erreur lors du chargement des chapitres:",I),N("Impossible de charger les chapitres.")}finally{h(!1)}},[l]);y.useEffect(()=>{q()},[q]),y.useEffect(()=>{J()},[J]);const Q=()=>{const I={};return k.disciplineId||(I.disciplineId="Veuillez slectionner une discipline"),k.titre.trim()?k.titre.length<3&&(I.titre="Le titre doit contenir au moins 3 caractres"):I.titre="Le titre du chapitre est requis",k.numero<1&&(I.numero="Le numro doit tre suprieur  0"),le(I),Object.keys(I).length===0},ve=I=>{o(I),N(null)},U=async()=>{const I=await Si.getNextNumero(l);L(null),$({...s_,disciplineId:l,numero:I}),le({}),F(""),w(!0)},ge=I=>{L(I),$({disciplineId:I.disciplineId,numero:I.numero,titre:I.titre,description:I.description,objectifs:I.objectifs||[],dureeEstimee:I.dureeEstimee,isPremium:I.isPremium,actif:I.actif}),le({}),F(""),w(!0)},ee=I=>{D(I),O(!0)},me=()=>{w(!1),O(!1),L(null),D(null),le({}),F("")},xe=I=>{const{name:ae,value:V,type:ye}=I.target,Re=I.target.checked;$(Ie=>({...Ie,[ae]:ye==="checkbox"?Re:ye==="number"?Number(V):V})),B[ae]&&le(Ie=>({...Ie,[ae]:void 0}))},pe=()=>{oe.trim()&&($(I=>({...I,objectifs:[...I.objectifs||[],oe.trim()]})),F(""))},H=I=>{$(ae=>({...ae,objectifs:(ae.objectifs||[]).filter((V,ye)=>ye!==I)}))},de=async I=>{if(I.preventDefault(),!!Q())try{v(!0),N(null),P?(await Si.update(P.id,k),C("Chapitre modifi avec succs !")):(await Si.create(k),C("Chapitre cr avec succs !")),me(),await J(),setTimeout(()=>C(null),3e3)}catch(ae){console.error("Erreur lors de la sauvegarde:",ae),N("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{v(!1)}},Ee=async()=>{if(T)try{b(T.id),await Si.delete(T.id),C("Chapitre supprim avec succs !"),me(),await J(),setTimeout(()=>C(null),3e3)}catch(I){console.error("Erreur lors de la suppression:",I),N("Erreur lors de la suppression. Veuillez ressayer.")}finally{b(null)}},ne=async I=>{try{await Si.toggleActive(I.id,!I.actif),await J(),C(I.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>C(null),2e3)}catch{N("Erreur lors de la mise  jour")}},Y=I=>{const ae=e.find(V=>V.id===I);return ae?ae.nom:"Non trouve"};return n.jsxs("div",{className:"chapitre-manager",children:[n.jsxs("header",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),n.jsx("div",{className:"admin-page-header__actions",children:n.jsxs("button",{onClick:U,className:"btn btn--primary",disabled:!l||u,children:[n.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),_&&n.jsxs("div",{className:"alert alert--error",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:_})}),n.jsx("button",{onClick:()=>N(null),className:"alert__close",children:""})]}),S&&n.jsxs("div",{className:"alert alert--success",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:S})})]}),n.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"discipline-selector",children:[n.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),u?n.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?n.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",n.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):n.jsx("div",{className:"discipline-tabs",children:e.map(I=>n.jsxs("button",{className:`discipline-tab ${l===I.id?"discipline-tab--active":""}`,onClick:()=>ve(I.id),style:{"--discipline-color":I.couleur||"#2563eb"},children:[n.jsx("span",{className:"discipline-tab__icon",children:I.icone||""}),n.jsx("span",{className:"discipline-tab__name",children:I.nom}),n.jsx("span",{className:"discipline-tab__class",children:I.classe})]},I.id))})]})})}),n.jsxs("div",{className:"admin-table-container",children:[n.jsx("div",{className:"admin-table-header",children:n.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${Y(l)}`,r.length>0&&` (${r.length})`]})}),m?n.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des chapitres..."})]}):l?r.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),n.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),n.jsx("button",{onClick:U,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):n.jsx("div",{className:"chapitres-list",children:r.map(I=>n.jsxs("div",{className:`chapitre-card ${I.actif?"":"chapitre-card--inactive"}`,children:[n.jsx("div",{className:"chapitre-card__number",children:I.numero}),n.jsxs("div",{className:"chapitre-card__content",children:[n.jsxs("h3",{className:"chapitre-card__title",children:[I.titre,I.isPremium&&n.jsx("span",{className:"badge badge--premium",children:"Premium"}),!I.actif&&n.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),I.description&&n.jsx("p",{className:"chapitre-card__description",children:I.description}),n.jsxs("div",{className:"chapitre-card__meta",children:[I.dureeEstimee&&n.jsxs("span",{children:[" ",I.dureeEstimee,"h estime"]}),I.objectifs&&I.objectifs.length>0&&n.jsxs("span",{children:[" ",I.objectifs.length," objectif(s)"]})]})]}),n.jsxs("div",{className:"chapitre-card__actions",children:[n.jsx("button",{onClick:()=>ne(I),className:`table-action-btn ${I.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:I.actif?"Dsactiver":"Activer",children:I.actif?"":""}),n.jsx("button",{onClick:()=>ge(I),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),n.jsx("button",{onClick:()=>ee(I),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:x===I.id,children:x===I.id?"":""})]})]},I.id))}):n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),n.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),z&&n.jsx("div",{className:"modal-overlay",onClick:me,children:n.jsxs("div",{className:"modal modal--lg",onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:P?"Modifier le chapitre":"Nouveau chapitre"}),n.jsx("button",{onClick:me,className:"modal__close",children:""})]}),n.jsxs("form",{onSubmit:de,children:[n.jsxs("div",{className:"modal__body",children:[!P&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),n.jsxs("select",{name:"disciplineId",className:`form-select ${B.disciplineId?"form-select--error":""}`,value:k.disciplineId,onChange:xe,children:[n.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(I=>n.jsxs("option",{value:I.id,children:[I.icone," ",I.nom," (",I.classe,")"]},I.id))]}),B.disciplineId&&n.jsx("span",{className:"form-error",children:B.disciplineId})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[n.jsx("label",{className:"form-label form-label--required",children:"N"}),n.jsx("input",{type:"number",name:"numero",className:`form-input ${B.numero?"form-input--error":""}`,min:"1",value:k.numero,onChange:xe}),B.numero&&n.jsx("span",{className:"form-error",children:B.numero})]}),n.jsxs("div",{className:"form-group",style:{flex:1},children:[n.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),n.jsx("input",{type:"text",name:"titre",className:`form-input ${B.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:k.titre,onChange:xe}),B.titre&&n.jsx("span",{className:"form-error",children:B.titre})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:k.description||"",onChange:xe})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),n.jsxs("div",{className:"objectifs-input",children:[n.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:oe,onChange:I=>F(I.target.value),onKeyPress:I=>I.key==="Enter"&&(I.preventDefault(),pe())}),n.jsx("button",{type:"button",onClick:pe,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),k.objectifs&&k.objectifs.length>0&&n.jsx("ul",{className:"objectifs-list",children:k.objectifs.map((I,ae)=>n.jsxs("li",{className:"objectif-item",children:[n.jsxs("span",{children:[" ",I]}),n.jsx("button",{type:"button",onClick:()=>H(ae),className:"objectif-remove",children:""})]},ae))})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),n.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:k.dureeEstimee||"",onChange:xe})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Options"}),n.jsxs("div",{className:"form-options",children:[n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"isPremium",checked:k.isPremium,onChange:xe}),n.jsx("span",{children:"Contenu Premium "})]}),n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"actif",checked:k.actif!==!1,onChange:xe}),n.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{type:"button",onClick:me,className:"btn btn--outline",disabled:p,children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn btn--primary",disabled:p,children:p?"Enregistrement...":P?"Mettre  jour":"Crer le chapitre"})]})]})]})}),E&&T&&n.jsx("div",{className:"modal-overlay",onClick:me,children:n.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),n.jsx("button",{onClick:me,className:"modal__close",children:""})]}),n.jsxs("div",{className:"modal__body",children:[n.jsxs("p",{children:["Supprimer le chapitre ",n.jsxs("strong",{children:[T.numero,". ",T.titre]})," ?"]}),n.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{onClick:me,className:"btn btn--outline",children:"Annuler"}),n.jsx("button",{onClick:Ee,className:"btn btn--danger",disabled:x!==null,children:x?"Suppression...":"Supprimer"})]})]})}),n.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},gd=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],xd={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},xv=50,l_={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},qq=()=>{const{currentUser:e}=Ct(),[t,r]=y.useState([]),[a,l]=y.useState([]),[o,u]=y.useState([]),[d,m]=y.useState([]),[h,p]=y.useState(""),[v,x]=y.useState(""),[b,_]=y.useState(""),[N,S]=y.useState(""),[C,z]=y.useState(""),[w,E]=y.useState(!0),[O,P]=y.useState(!1),[L,T]=y.useState(!1),[D,k]=y.useState(!1),[$,B]=y.useState(null),[le,oe]=y.useState(!1),[F,q]=y.useState(0),[J,Q]=y.useState(null),[ve,U]=y.useState(null),[ge,ee]=y.useState(!1),[me,xe]=y.useState(!1),[pe,H]=y.useState(!1),[de,Ee]=y.useState(null),[ne,Y]=y.useState(null),[I,ae]=y.useState(null),[V,ye]=y.useState({...l_,disciplineId:""}),[Re,Ie]=y.useState({}),[Qe,Gt]=y.useState(null),[On,nn]=y.useState(null),sa=y.useRef(null),[ce,Ae]=y.useState(""),Te=y.useCallback(async()=>{try{E(!0);const X=await $i.getAll();r(X),X.length>0&&!h&&p(X[0].id)}catch(X){console.error("Erreur lors du chargement des disciplines:",X),Q("Impossible de charger les disciplines.")}finally{E(!1)}},[h]),$e=y.useCallback(async()=>{if(!h){l([]);return}try{P(!0);const X=await Si.getByDiscipline(h);l(X)}catch(X){console.error("Erreur lors du chargement des chapitres:",X)}finally{P(!1)}},[h]),Nt=y.useCallback(async()=>{if(!h){u([]),m([]);return}try{T(!0);const X=await Ca.getByDiscipline(h);u(X),m(X)}catch(X){console.error("Erreur lors du chargement des ressources:",X),Q("Impossible de charger les ressources.")}finally{T(!1)}},[h]);y.useEffect(()=>{Te()},[Te]),y.useEffect(()=>{$e()},[$e]),y.useEffect(()=>{Nt()},[Nt]),y.useEffect(()=>{let X=[...o];if(v&&(X=X.filter(De=>De.chapitre===v)),b&&(X=X.filter(De=>De.type===b)),N==="premium"?X=X.filter(De=>De.isPremium):N==="free"&&(X=X.filter(De=>!De.isPremium)),C){const De=C.toLowerCase();X=X.filter(ht=>ht.titre.toLowerCase().includes(De)||ht.description?.toLowerCase().includes(De)||ht.tags?.some(xr=>xr.toLowerCase().includes(De)))}m(X)},[o,v,b,N,C]);const vr=()=>{const X={};if(V.disciplineId||(X.disciplineId="Veuillez slectionner une discipline"),V.titre.trim()?V.titre.length<3&&(X.titre="Le titre doit contenir au moins 3 caractres"):X.titre="Le titre est requis",V.type||(X.type="Veuillez slectionner un type de ressource"),Qe){const De="."+Qe.name.split(".").pop()?.toLowerCase(),ht=xd[V.type];ht.includes(De)||(X.fichier=`Extension non autorise. Extensions acceptes : ${ht.join(", ")}`),Qe.size/(1024*1024)>xv&&(X.fichier=`Le fichier est trop volumineux (max ${xv} Mo)`)}return Ie(X),Object.keys(X).length===0},Un=X=>{p(X),x(""),Q(null)},Ls=()=>{Ee(null),ye({...l_,disciplineId:h}),Ie({}),Gt(null),nn(null),Ae(""),ee(!0)},an=X=>{Ee(X),ye({disciplineId:X.disciplineId,titre:X.titre,type:X.type,description:X.description,contenu:X.contenu,chapitre:X.chapitre||"",ordre:X.ordre,isPremium:X.isPremium,actif:X.actif,tags:X.tags||[],duree:X.duree,urlExterne:X.urlExterne||""}),Ie({}),Gt(null),nn(X.fichierURL||null),Ae(""),ee(!0)},Za=X=>{ae(X),H(!0)},Ym=X=>{Y(X),xe(!0)},gr=()=>{ee(!1),xe(!1),H(!1),Ee(null),Y(null),ae(null),Ie({}),Gt(null),nn(null),Ae("")},xt=X=>{const{name:De,value:ht,type:xr}=X.target,io=X.target.checked;ye(Gi=>({...Gi,[De]:xr==="checkbox"?io:xr==="number"?Number(ht):ht})),Re[De]&&Ie(Gi=>({...Gi,[De]:void 0}))},Hn=X=>{const De=X.target.files?.[0];if(De)if(Gt(De),Ie(ht=>({...ht,fichier:void 0})),De.type.startsWith("image/")||De.type.startsWith("video/")){const ht=new FileReader;ht.onloadend=()=>{nn(ht.result)},ht.readAsDataURL(De)}else nn(null)},_r=()=>{Gt(null),nn(null),sa.current&&(sa.current.value="")},nu=()=>{ce.trim()&&!V.tags?.includes(ce.trim())&&(ye(X=>({...X,tags:[...X.tags||[],ce.trim()]})),Ae(""))},Km=X=>{ye(De=>({...De,tags:(De.tags||[]).filter((ht,xr)=>xr!==X)}))},Xm=async X=>{if(X.preventDefault(),!!vr())try{k(!0),Q(null);let De=de?.fichierURL,ht=de?.fichierNom;if(Qe){oe(!0);const io=de?.id||`temp_${Date.now()}`;De=await Ca.uploadFile(Qe,io),ht=Qe?.name||"fichier",oe(!1)}const xr={...V,fichierURL:De,fichierNom:ht};de?(await Ca.update(de.id,xr),U("Ressource modifie avec succs !")):(await Ca.create(xr,"admin"),U("Ressource cre avec succs !")),gr(),await Nt(),setTimeout(()=>U(null),3e3)}catch(De){console.error("Erreur lors de la sauvegarde:",De),Q("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{k(!1),oe(!1),q(0)}},Is=async()=>{if(ne)try{B(ne.id),ne.fichierURL&&await Ca.deleteFile(ne.fichierURL),await Ca.delete(ne.id),U("Ressource supprime avec succs !"),gr(),await Nt(),setTimeout(()=>U(null),3e3)}catch(X){console.error("Erreur lors de la suppression:",X),Q("Erreur lors de la suppression. Veuillez ressayer.")}finally{B(null)}},$s=async X=>{try{await Ca.togglePremium(X.id,!X.isPremium),await Nt(),U(X.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>U(null),2e3)}catch{Q("Erreur lors de la mise  jour")}},Bs=X=>{const De=t.find(ht=>ht.id===X);return De?De.nom:"Non trouve"},la=X=>{const De=a.find(ht=>ht.id===X);return De?`${De.numero}. ${De.titre}`:""},Gn=X=>gd.find(De=>De.value===X)||gd[0],Hi=X=>X<1024?X+" o":X<1024*1024?(X/1024).toFixed(1)+" Ko":(X/(1024*1024)).toFixed(1)+" Mo";return n.jsxs("div",{className:"resource-manager",children:[n.jsxs("header",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),n.jsx("div",{className:"admin-page-header__actions",children:n.jsxs("button",{onClick:Ls,className:"btn btn--primary",disabled:!h||w,children:[n.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),J&&n.jsxs("div",{className:"alert alert--error",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:J})}),n.jsx("button",{onClick:()=>Q(null),className:"alert__close",children:""})]}),ve&&n.jsxs("div",{className:"alert alert--success",children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:ve})})]}),n.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:n.jsx("div",{className:"content-card__body",children:n.jsxs("div",{className:"discipline-selector",children:[n.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),w?n.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?n.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",n.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):n.jsx("div",{className:"discipline-tabs",children:t.map(X=>n.jsxs("button",{className:`discipline-tab ${h===X.id?"discipline-tab--active":""}`,onClick:()=>Un(X.id),style:{"--discipline-color":X.couleur||"#2563eb"},children:[n.jsx("span",{className:"discipline-tab__icon",children:X.icone||""}),n.jsx("span",{className:"discipline-tab__name",children:X.nom}),n.jsx("span",{className:"discipline-tab__class",children:X.classe})]},X.id))})]})})}),n.jsxs("div",{className:"admin-table-container",children:[n.jsxs("div",{className:"admin-table-header",children:[n.jsxs("h2",{className:"admin-table-title",children:["Ressources ",h&&`- ${Bs(h)}`,d.length>0&&` (${d.length})`]}),n.jsxs("div",{className:"admin-table-actions",children:[n.jsxs("div",{className:"search-input",children:[n.jsx("span",{className:"search-input__icon",children:""}),n.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:C,onChange:X=>z(X.target.value)})]}),n.jsxs("select",{className:"form-select form-select--sm",value:v,onChange:X=>x(X.target.value),disabled:O||a.length===0,children:[n.jsx("option",{value:"",children:"Tous les chapitres"}),a.map(X=>n.jsxs("option",{value:X.id,children:[X.numero,". ",X.titre]},X.id))]}),n.jsxs("select",{className:"form-select form-select--sm",value:b,onChange:X=>_(X.target.value),children:[n.jsx("option",{value:"",children:"Tous les types"}),gd.map(X=>n.jsxs("option",{value:X.value,children:[X.icon," ",X.label]},X.value))]}),n.jsxs("select",{className:"form-select form-select--sm",value:N,onChange:X=>S(X.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"premium",children:" Premium"}),n.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),L?n.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des ressources..."})]}):h?d.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),n.jsx("p",{className:"empty-state__message",children:C||b||N||v?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!C&&!b&&!N&&!v&&n.jsx("button",{onClick:Ls,className:"btn btn--primary",children:"Crer la premire ressource"})]}):n.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:d.map(X=>{const De=Gn(X.type);return n.jsxs("div",{className:"resource-item",children:[n.jsx("div",{className:`resource-item__icon resource-item__icon--${X.type}`,style:{backgroundColor:`${De.color}15`,color:De.color},children:De.icon}),n.jsxs("div",{className:"resource-item__content",children:[n.jsxs("div",{className:"resource-item__title",children:[X.titre,X.isPremium&&n.jsx("span",{className:"badge badge--premium",children:"Premium"}),!X.actif&&n.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),n.jsxs("div",{className:"resource-item__meta",children:[n.jsx("span",{children:De.label}),X.chapitre&&n.jsxs("span",{children:[" ",la(X.chapitre)]}),X.duree&&n.jsxs("span",{children:[" ",X.duree," min"]}),X.fichierNom&&n.jsxs("span",{children:[" ",X.fichierNom]}),X.tags&&X.tags.length>0&&n.jsxs("span",{children:[" ",X.tags.join(", ")]})]})]}),n.jsxs("div",{className:"resource-item__actions",children:[n.jsx("button",{onClick:()=>$s(X),className:`table-action-btn ${X.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:X.isPremium?"Passer en gratuit":"Passer en Premium",children:X.isPremium?"":""}),(X.fichierURL||X.urlExterne)&&n.jsx("button",{onClick:()=>Za(X),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),n.jsx("button",{onClick:()=>an(X),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),n.jsx("button",{onClick:()=>Ym(X),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:$===X.id,children:$===X.id?"":""})]})]},X.id)})}):n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state__icon",children:""}),n.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),n.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),ge&&n.jsx("div",{className:"modal-overlay",onClick:gr,children:n.jsxs("div",{className:"modal modal--xl",onClick:X=>X.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:de?"Modifier la ressource":"Nouvelle ressource"}),n.jsx("button",{onClick:gr,className:"modal__close",children:""})]}),n.jsxs("form",{onSubmit:Xm,children:[n.jsxs("div",{className:"modal__body",children:[!de&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),n.jsxs("select",{name:"disciplineId",className:`form-select ${Re.disciplineId?"form-select--error":""}`,value:V.disciplineId,onChange:xt,children:[n.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(X=>n.jsxs("option",{value:X.id,children:[X.icone," ",X.nom," (",X.classe,")"]},X.id))]}),Re.disciplineId&&n.jsx("span",{className:"form-error",children:Re.disciplineId})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",style:{flex:2},children:[n.jsx("label",{className:"form-label form-label--required",children:"Titre"}),n.jsx("input",{type:"text",name:"titre",className:`form-input ${Re.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:V.titre,onChange:xt}),Re.titre&&n.jsx("span",{className:"form-error",children:Re.titre})]}),n.jsxs("div",{className:"form-group",style:{flex:1},children:[n.jsx("label",{className:"form-label form-label--required",children:"Type"}),n.jsx("select",{name:"type",className:`form-select ${Re.type?"form-select--error":""}`,value:V.type,onChange:xt,children:gd.map(X=>n.jsxs("option",{value:X.value,children:[X.icon," ",X.label]},X.value))}),Re.type&&n.jsx("span",{className:"form-error",children:Re.type})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),n.jsxs("select",{name:"chapitreId",className:"form-select",value:V.chapitre||"",onChange:xt,disabled:O,children:[n.jsx("option",{value:"",children:"Aucun chapitre"}),a.map(X=>n.jsxs("option",{value:X.id,children:[X.numero,". ",X.titre]},X.id))]})]}),n.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[n.jsx("label",{className:"form-label",children:"Ordre"}),n.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:V.ordre,onChange:xt})]}),n.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[n.jsx("label",{className:"form-label",children:"Dure (min)"}),n.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:V.duree||"",onChange:xt})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:V.description||"",onChange:xt})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Fichier",n.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",xd[V.type].join(", ")," - max ",xv," Mo)"]})]}),n.jsxs("div",{className:"file-upload",children:[n.jsx("input",{ref:sa,type:"file",accept:xd[V.type].join(","),onChange:Hn,className:"file-upload__input",id:"file-input"}),!Qe&&!On?n.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[n.jsx("div",{className:"file-upload__icon",children:""}),n.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),n.jsx("p",{className:"file-upload__hint",children:xd[V.type].join(", ")})]}):n.jsxs("div",{className:"file-upload__preview",children:[Qe?.type.startsWith("image/")&&On&&n.jsx("img",{src:On,alt:"Aperu",className:"file-preview__image"}),Qe?.type.startsWith("video/")&&On&&n.jsx("video",{src:On,controls:!0,className:"file-preview__video"}),!Qe?.type.startsWith("image/")&&!Qe?.type.startsWith("video/")&&n.jsx("div",{className:"file-preview__document",children:n.jsx("span",{className:"file-preview__icon",children:Gn(V.type).icon})}),n.jsxs("div",{className:"file-preview__info",children:[n.jsx("p",{className:"file-preview__name",children:Qe?.name||de?.fichierNom}),Qe&&n.jsx("p",{className:"file-preview__size",children:Hi(Qe.size)})]}),n.jsx("button",{type:"button",onClick:_r,className:"file-preview__remove",children:""})]})]}),Re.fichier&&n.jsx("span",{className:"form-error",children:Re.fichier}),le&&n.jsxs("div",{className:"upload-progress",children:[n.jsx("div",{className:"upload-progress__bar",style:{width:`${F}%`}}),n.jsxs("span",{className:"upload-progress__text",children:[F,"%"]})]})]}),V.type==="video"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),n.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:V.urlExterne||"",onChange:xt}),n.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),V.type==="cours"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Contenu du cours"}),n.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:V.contenu||"",onChange:xt}),n.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Tags"}),n.jsxs("div",{className:"tags-input",children:[n.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:ce,onChange:X=>Ae(X.target.value),onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),nu())}),n.jsx("button",{type:"button",onClick:nu,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),V.tags&&V.tags.length>0&&n.jsx("div",{className:"tags-list",children:V.tags.map((X,De)=>n.jsxs("span",{className:"tag",children:[X,n.jsx("button",{type:"button",onClick:()=>Km(De),className:"tag__remove",children:""})]},De))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Options"}),n.jsxs("div",{className:"form-options",children:[n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"isPremium",checked:V.isPremium,onChange:xt}),n.jsx("span",{children:"Contenu Premium "})]}),n.jsxs("label",{className:"form-checkbox",children:[n.jsx("input",{type:"checkbox",name:"actif",checked:V.actif!==!1,onChange:xt}),n.jsx("span",{children:"Ressource active"})]})]})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{type:"button",onClick:gr,className:"btn btn--outline",disabled:D||le,children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn btn--primary",disabled:D||le,children:D||le?le?`Upload ${F}%...`:"Enregistrement...":de?"Mettre  jour":"Crer la ressource"})]})]})]})}),pe&&I&&n.jsx("div",{className:"modal-overlay",onClick:gr,children:n.jsxs("div",{className:"modal modal--xl",onClick:X=>X.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsxs("h2",{className:"modal__title",children:[Gn(I.type).icon," ",I.titre]}),n.jsx("button",{onClick:gr,className:"modal__close",children:""})]}),n.jsxs("div",{className:"modal__body",children:[I.type==="video"&&I.urlExterne?n.jsx("div",{className:"preview-video",children:n.jsx("iframe",{src:I.urlExterne.replace("watch?v=","embed/"),title:I.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):I.fichierURL?n.jsx("div",{className:"preview-file",children:I.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?n.jsx("img",{src:I.fichierURL,alt:I.titre}):I.fichierURL.match(/\.(mp4|webm)$/i)?n.jsx("video",{src:I.fichierURL,controls:!0}):I.fichierURL.match(/\.pdf$/i)?n.jsx("iframe",{src:I.fichierURL,title:I.titre}):n.jsxs("div",{className:"preview-download",children:[n.jsx("span",{className:"preview-download__icon",children:Gn(I.type).icon}),n.jsx("p",{children:I.fichierNom}),n.jsx("a",{href:I.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):I.contenu?n.jsx("div",{className:"preview-content",children:n.jsx("p",{children:I.contenu})}):n.jsx("div",{className:"preview-empty",children:n.jsx("p",{children:"Aucun contenu  prvisualiser"})}),n.jsxs("div",{className:"preview-info",children:[I.description&&n.jsx("p",{className:"preview-description",children:I.description}),n.jsxs("div",{className:"preview-meta",children:[n.jsxs("span",{children:["Type : ",Gn(I.type).label]}),I.duree&&n.jsxs("span",{children:["Dure : ",I.duree," min"]}),I.isPremium&&n.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),me&&ne&&n.jsx("div",{className:"modal-overlay",onClick:gr,children:n.jsxs("div",{className:"modal",onClick:X=>X.stopPropagation(),children:[n.jsxs("div",{className:"modal__header",children:[n.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),n.jsx("button",{onClick:gr,className:"modal__close",children:""})]}),n.jsxs("div",{className:"modal__body",children:[n.jsxs("p",{children:["Supprimer la ressource ",n.jsx("strong",{children:ne.titre})," ?"]}),ne.fichierURL&&n.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[n.jsx("span",{className:"alert__icon",children:""}),n.jsx("div",{className:"alert__content",children:n.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),n.jsxs("div",{className:"modal__footer",children:[n.jsx("button",{onClick:gr,className:"btn btn--outline",children:"Annuler"}),n.jsx("button",{onClick:Is,className:"btn btn--danger",disabled:$!==null,children:$?"Suppression...":"Supprimer"})]})]})}),n.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},z2=je(se,"quizzes"),O2=async e=>{try{let t=qe(z2,nt("titre","asc"));e?.disciplineId;let a=(await ke(t)).docs.map(l=>({id:l.id,...l.data()}));return e?.isPremium,e?.difficulte,a}catch(t){throw console.error("Erreur lors de la rcupration des quiz :",t),t}},Rq=async e=>{try{const t=await Vt(be(se,"quizzes",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){throw console.error("Erreur lors de la rcupration du quiz :",t),t}},Lq=async e=>{try{return(await nr(z2,{...e,createdAt:He.now(),updatedAt:He.now()})).id}catch(t){throw console.error("Erreur lors de la cration du quiz :",t),t}},Iq=async(e,t)=>{try{await We(be(se,"quizzes",e),{...t,updatedAt:He.now()})}catch(r){throw console.error("Erreur lors de la mise  jour du quiz :",r),r}},$q=async e=>{try{await _n(be(se,"quizzes",e))}catch(t){throw console.error("Erreur lors de la suppression du quiz :",t),t}},Bq=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,o_=()=>({id:Bq(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),c_=e=>{const t=e.questions||[],r=t.reduce((l,o)=>l+(o.points||1),0),a={facile:t.filter(l=>l.difficulte==="facile").length,moyen:t.filter(l=>l.difficulte==="moyen").length,difficile:t.filter(l=>l.difficulte==="difficile").length};return{nombreQuestions:t.length,totalPoints:r,parDifficulte:a,duree:e.duree||0}},Uq=()=>{const[e,t]=y.useState([]),[r,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,h]=y.useState(null),[p,v]=y.useState(""),[x,b]=y.useState(""),[_,N]=y.useState(""),[S,C]=y.useState(""),[z,w]=y.useState(!1),[E,O]=y.useState("list"),[P,L]=y.useState(null),[T,D]=y.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[k,$]=y.useState(null),[B,le]=y.useState(!1),[oe,F]=y.useState(null),[q,J]=y.useState(null),[Q,ve]=y.useState({}),[U,ge]=y.useState(!1),ee=y.useCallback(async()=>{o(!0),d(null);try{const[ce,Ae]=await Promise.all([O2(),$i.getAll()]);t(ce),a(Ae.map(Te=>({id:Te.id,nom:Te.nom||Te.name||Te.id})))}catch(ce){d("Erreur lors du chargement des donnes."),console.error(ce)}finally{o(!1)}},[]);y.useEffect(()=>{ee()},[ee]),y.useEffect(()=>{if(m){const ce=setTimeout(()=>h(null),4e3);return()=>clearTimeout(ce)}},[m]);const me=e.filter(ce=>{if(p){const Ae=p.toLowerCase();if(!ce.titre.toLowerCase().includes(Ae))return!1}return!(x&&ce.disciplineId!==x||_==="true"&&!ce.isPremium||_==="false"&&ce.isPremium||S&&!ce.questions?.some(Te=>Te.difficulte===S))}),xe=()=>{L(null),D({disciplineId:"",titre:"",questions:[o_()],duree:15,isPremium:!1,noteMinimale:50}),$(null),O("form")},pe=ce=>{L(ce),D({disciplineId:ce.disciplineId,titre:ce.titre,questions:ce.questions||[],duree:ce.duree||15,isPremium:ce.isPremium||!1,noteMinimale:ce.noteMinimale||50}),$(null),O("form")},H=async()=>{if(!T.titre.trim()){d("Le titre du quiz est obligatoire.");return}if(!T.disciplineId){d("Veuillez slectionner une discipline.");return}if(T.questions.length===0){d("Le quiz doit contenir au moins une question.");return}for(let ce=0;ce<T.questions.length;ce++){const Ae=T.questions[ce];if(!Ae.question.trim()){d(`La question ${ce+1} n'a pas d'nonc.`);return}if(Ae.options.filter($e=>!$e.trim()).length>0){d(`La question ${ce+1} a des options vides.`);return}}le(!0),d(null);try{P?(await Iq(P.id,T),h("Quiz mis  jour avec succs !")):(await Lq(T),h("Quiz cr avec succs !")),await ee(),O("list")}catch(ce){d("Erreur lors de la sauvegarde du quiz."),console.error(ce)}finally{le(!1)}},de=async ce=>{try{await $q(ce),h("Quiz supprim avec succs."),F(null),await ee()}catch(Ae){d("Erreur lors de la suppression du quiz."),console.error(Ae)}},Ee=()=>{const ce=o_();D(Ae=>({...Ae,questions:[...Ae.questions,ce]})),$(ce.id)},ne=ce=>{const Ae=T.questions.find(vr=>vr.id===ce);if(!Ae)return;const Te={...Ae,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${Ae.question} (copie)`},$e=T.questions.findIndex(vr=>vr.id===ce),Nt=[...T.questions];Nt.splice($e+1,0,Te),D(vr=>({...vr,questions:Nt})),$(Te.id)},Y=ce=>{D(Ae=>({...Ae,questions:Ae.questions.filter(Te=>Te.id!==ce)})),k===ce&&$(null)},I=(ce,Ae,Te)=>{D($e=>({...$e,questions:$e.questions.map(Nt=>Nt.id===ce?{...Nt,[Ae]:Te}:Nt)}))},ae=(ce,Ae,Te)=>{D($e=>({...$e,questions:$e.questions.map(Nt=>Nt.id===ce?{...Nt,options:Nt.options.map((vr,Un)=>Un===Ae?Te:vr)}:Nt)}))},V=ce=>{J(ce),ve({}),ge(!1),O("preview")},ye=(ce,Ae)=>{U||ve(Te=>({...Te,[ce]:Ae}))},Re=()=>{ge(!0)},Ie=ce=>r.find(Ae=>Ae.id===ce)?.nom||ce,Qe=({level:ce})=>{const Ae={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return n.jsx("span",{className:`quiz-badge ${Ae[ce]||"quiz-badge-moyen"}`,children:ce.charAt(0).toUpperCase()+ce.slice(1)})},Gt=()=>n.jsxs(n.Fragment,{children:[u&&n.jsxs("div",{className:"admin-message admin-message-error",children:[n.jsx(Kd,{size:18}),n.jsx("span",{children:u}),n.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:n.jsx(Di,{size:16})})]}),m&&n.jsxs("div",{className:"admin-message admin-message-success",children:[n.jsx(Dt,{size:18}),n.jsx("span",{children:m})]})]}),On=()=>n.jsxs("div",{className:"quiz-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx(Nn,{size:24})," Gestion des Quiz"]}),n.jsxs("p",{className:"admin-subtitle",children:[e.length," quiz au total  ",me.length," affich(s)"]})]}),n.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:xe,children:[n.jsx(dc,{size:18})," Nouveau Quiz"]})]}),n.jsxs("div",{className:"admin-toolbar",children:[n.jsxs("div",{className:"admin-search-wrapper",children:[n.jsx(N2,{size:18,className:"admin-search-icon"}),n.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:p,onChange:ce=>v(ce.target.value)})]}),n.jsxs("button",{className:`admin-btn admin-btn-outline ${z?"active":""}`,onClick:()=>w(!z),children:[n.jsx(cy,{size:16})," Filtres",z?n.jsx(nx,{size:14}):n.jsx(Yd,{size:14})]})]}),z&&n.jsxs("div",{className:"admin-filters-panel",children:[n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Discipline"}),n.jsxs("select",{className:"admin-select",value:x,onChange:ce=>b(ce.target.value),children:[n.jsx("option",{value:"",children:"Toutes les disciplines"}),r.map(ce=>n.jsx("option",{value:ce.id,children:ce.nom},ce.id))]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Accs"}),n.jsxs("select",{className:"admin-select",value:_,onChange:ce=>N(ce.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"false",children:"Gratuit"}),n.jsx("option",{value:"true",children:"Premium"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Difficult"}),n.jsxs("select",{className:"admin-select",value:S,onChange:ce=>C(ce.target.value),children:[n.jsx("option",{value:"",children:"Toutes"}),n.jsx("option",{value:"facile",children:"Facile"}),n.jsx("option",{value:"moyen",children:"Moyen"}),n.jsx("option",{value:"difficile",children:"Difficile"})]})]}),n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{b(""),N(""),C(""),v("")},children:"Rinitialiser"})]}),l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des quiz..."})]}):me.length===0?n.jsxs("div",{className:"admin-empty-state",children:[n.jsx(Bd,{size:48}),n.jsx("h3",{children:"Aucun quiz trouv"}),n.jsx("p",{children:e.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),e.length===0&&n.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:xe,children:[n.jsx(dc,{size:18})," Crer un quiz"]})]}):n.jsx("div",{className:"quiz-grid",children:me.map(ce=>{const Ae=c_(ce);return n.jsxs("div",{className:"quiz-card",children:[n.jsxs("div",{className:"quiz-card-header",children:[n.jsxs("div",{className:"quiz-card-title-row",children:[n.jsx("h3",{className:"quiz-card-title",children:ce.titre}),ce.isPremium&&n.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[n.jsx(Wr,{size:12})," Premium"]})]}),n.jsx("span",{className:"quiz-card-discipline",children:Ie(ce.disciplineId)})]}),n.jsxs("div",{className:"quiz-card-stats",children:[n.jsxs("div",{className:"quiz-stat",children:[n.jsx(Bd,{size:14}),n.jsxs("span",{children:[Ae.nombreQuestions," question(s)"]})]}),n.jsxs("div",{className:"quiz-stat",children:[n.jsx(Ri,{size:14}),n.jsxs("span",{children:[Ae.totalPoints," pts"]})]}),n.jsxs("div",{className:"quiz-stat",children:[n.jsx($l,{size:14}),n.jsxs("span",{children:[Ae.duree," min"]})]})]}),n.jsxs("div",{className:"quiz-card-difficulty",children:[Ae.parDifficulte.facile>0&&n.jsx(Qe,{level:"facile"}),Ae.parDifficulte.moyen>0&&n.jsx(Qe,{level:"moyen"}),Ae.parDifficulte.difficile>0&&n.jsx(Qe,{level:"difficile"})]}),n.jsxs("div",{className:"quiz-card-actions",children:[n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>V(ce),title:"Prvisualiser",children:[n.jsx(ql,{size:14})," Aperu"]}),n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>pe(ce),title:"Modifier",children:[n.jsx(Kk,{size:14})," Modifier"]}),oe===ce.id?n.jsxs("div",{className:"quiz-delete-confirm",children:[n.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>de(ce.id),children:"Confirmer"}),n.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>F(null),children:"Annuler"})]}):n.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>F(ce.id),title:"Supprimer",children:n.jsx(V1,{size:14})})]})]},ce.id)})})]}),nn=()=>n.jsxs("div",{className:"quiz-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx(Nn,{size:24}),P?"Modifier le quiz":"Nouveau quiz"]}),n.jsxs("p",{className:"admin-subtitle",children:[T.questions.length," question(s) ajoute(s)"]})]}),n.jsxs("div",{className:"admin-header-actions",children:[n.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>O("list"),children:[n.jsx(Di,{size:18})," Annuler"]}),n.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:H,disabled:B,children:[n.jsx(Xk,{size:18})," ",B?"Enregistrement...":"Enregistrer"]})]})]}),n.jsxs("div",{className:"admin-card quiz-form-section",children:[n.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),n.jsxs("div",{className:"quiz-form-grid",children:[n.jsxs("div",{className:"admin-form-group quiz-form-full",children:[n.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),n.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:T.titre,onChange:ce=>D(Ae=>({...Ae,titre:ce.target.value}))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Discipline *"}),n.jsxs("select",{className:"admin-select",value:T.disciplineId,onChange:ce=>D(Ae=>({...Ae,disciplineId:ce.target.value})),children:[n.jsx("option",{value:"",children:"-- Slectionner --"}),r.map(ce=>n.jsx("option",{value:ce.id,children:ce.nom},ce.id))]})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),n.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:T.duree,onChange:ce=>D(Ae=>({...Ae,duree:parseInt(ce.target.value)||15}))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),n.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:T.noteMinimale,onChange:ce=>D(Ae=>({...Ae,noteMinimale:parseInt(ce.target.value)||50}))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Accs"}),n.jsxs("div",{className:`quiz-toggle ${T.isPremium?"quiz-toggle-active":""}`,onClick:()=>D(ce=>({...ce,isPremium:!ce.isPremium})),children:[n.jsx(Wr,{size:16}),n.jsx("span",{children:T.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),n.jsxs("div",{className:"admin-card quiz-form-section",children:[n.jsxs("div",{className:"quiz-questions-header",children:[n.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",T.questions.length,")"]}),n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Ee,children:[n.jsx(dc,{size:14})," Ajouter une question"]})]}),T.questions.length===0?n.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[n.jsx(Bd,{size:36}),n.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):n.jsx("div",{className:"quiz-questions-list",children:T.questions.map((ce,Ae)=>n.jsxs("div",{className:`quiz-question-item ${k===ce.id?"expanded":""}`,children:[n.jsxs("div",{className:"quiz-question-header",onClick:()=>$(k===ce.id?null:ce.id),children:[n.jsxs("div",{className:"quiz-question-header-left",children:[n.jsx(Wk,{size:16,className:"quiz-grip-icon"}),n.jsxs("span",{className:"quiz-question-number",children:["Q",Ae+1]}),n.jsx("span",{className:"quiz-question-preview",children:ce.question||"Question sans nonc..."})]}),n.jsxs("div",{className:"quiz-question-header-right",children:[n.jsx(Qe,{level:ce.difficulte||"moyen"}),n.jsxs("span",{className:"quiz-question-points",children:[ce.points," pt(s)"]}),k===ce.id?n.jsx(nx,{size:16}):n.jsx(Yd,{size:16})]})]}),k===ce.id&&n.jsxs("div",{className:"quiz-question-body",children:[n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"nonc de la question *"}),n.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:ce.question,onChange:Te=>I(ce.id,"question",Te.target.value)})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),n.jsx("div",{className:"quiz-options-grid",children:ce.options.map((Te,$e)=>n.jsxs("div",{className:`quiz-option-item ${ce.reponseCorrecte===$e?"quiz-option-correct":""}`,children:[n.jsx("button",{type:"button",className:`quiz-option-radio ${ce.reponseCorrecte===$e?"active":""}`,onClick:()=>I(ce.id,"reponseCorrecte",$e),title:ce.reponseCorrecte===$e?"Bonne rponse":"Marquer comme bonne rponse",children:ce.reponseCorrecte===$e?n.jsx(Dt,{size:16}):n.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+$e)})}),n.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+$e)}`,value:Te,onChange:Nt=>ae(ce.id,$e,Nt.target.value)})]},$e))})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),n.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:ce.explication,onChange:Te=>I(ce.id,"explication",Te.target.value)})]}),n.jsxs("div",{className:"quiz-question-meta",children:[n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Difficult"}),n.jsxs("select",{className:"admin-select",value:ce.difficulte,onChange:Te=>I(ce.id,"difficulte",Te.target.value),children:[n.jsx("option",{value:"facile",children:"Facile"}),n.jsx("option",{value:"moyen",children:"Moyen"}),n.jsx("option",{value:"difficile",children:"Difficile"})]})]}),n.jsxs("div",{className:"admin-form-group",children:[n.jsx("label",{className:"admin-label",children:"Points"}),n.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:ce.points,onChange:Te=>I(ce.id,"points",parseInt(Te.target.value)||1)})]})]}),n.jsxs("div",{className:"quiz-question-actions",children:[n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ne(ce.id),children:[n.jsx(Zk,{size:14})," Dupliquer"]}),n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>Y(ce.id),children:[n.jsx(V1,{size:14})," Supprimer"]})]})]})]},ce.id))}),T.questions.length>0&&n.jsx("div",{className:"quiz-add-question-bottom",children:n.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Ee,children:[n.jsx(dc,{size:16})," Ajouter une question"]})})]})]}),sa=()=>{if(!q)return null;const ce=c_(q);let Ae=0,Te=0;return U&&q.questions.forEach($e=>{Te+=$e.points||1,Q[$e.id]===$e.reponseCorrecte&&(Ae+=$e.points||1)}),n.jsxs("div",{className:"quiz-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx(ql,{size:24})," Prvisualisation : ",q.titre]}),n.jsxs("p",{className:"admin-subtitle",children:[Ie(q.disciplineId),"  ",ce.nombreQuestions," questions  ",ce.duree," min"]})]}),n.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{O("list"),J(null)},children:[n.jsx(Di,{size:18})," Fermer"]})]}),U&&n.jsxs("div",{className:`quiz-preview-score ${Ae/Te>=(q.noteMinimale||50)/100?"success":"fail"}`,children:[n.jsx(Ri,{size:32}),n.jsxs("div",{children:[n.jsxs("h3",{children:["Score : ",Ae,"/",Te," (",Math.round(Ae/Te*100),"%)"]}),n.jsxs("p",{children:["Note minimale : ",q.noteMinimale||50,"% "," ",Ae/Te>=(q.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),n.jsx("div",{className:"quiz-preview-questions",children:q.questions.map(($e,Nt)=>{const vr=Q[$e.id],Un=vr===$e.reponseCorrecte;return n.jsxs("div",{className:"admin-card quiz-preview-question",children:[n.jsxs("div",{className:"quiz-preview-question-header",children:[n.jsxs("span",{className:"quiz-question-number",children:["Q",Nt+1]}),n.jsx(Qe,{level:$e.difficulte||"moyen"}),n.jsxs("span",{className:"quiz-question-points",children:[$e.points," pt(s)"]})]}),n.jsx("p",{className:"quiz-preview-question-text",children:$e.question}),n.jsx("div",{className:"quiz-preview-options",children:$e.options.map((Ls,an)=>{let Za="quiz-preview-option";return U?an===$e.reponseCorrecte?Za+=" correct":an===vr&&!Un&&(Za+=" incorrect"):vr===an&&(Za+=" selected"),n.jsxs("button",{className:Za,onClick:()=>ye($e.id,an),disabled:U,children:[n.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+an)}),n.jsx("span",{children:Ls}),U&&an===$e.reponseCorrecte&&n.jsx(Dt,{size:16,className:"quiz-preview-check"})]},an)})}),U&&$e.explication&&n.jsxs("div",{className:"quiz-preview-explication",children:[n.jsx("strong",{children:"Explication :"})," ",$e.explication]})]},$e.id)})}),!U&&n.jsx("div",{className:"quiz-preview-submit",children:n.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:Re,disabled:Object.keys(Q).length<q.questions.length,children:[n.jsx(Dt,{size:18})," Soumettre (",Object.keys(Q).length,"/",q.questions.length,")"]})})]})};return n.jsxs("div",{className:"admin-container",children:[Gt(),E==="list"&&On(),E==="form"&&nn(),E==="preview"&&sa()]})},D2=je(se,"users"),Hq=je(se,"quizResults"),Gq=async e=>{try{let t=qe(D2,nt("displayName","asc"));e?.role;let a=(await ke(t)).docs.map(l=>({uid:l.id,...l.data()}));return e?.isPremium,e?.isActive,e?.search,a}catch(t){throw console.error("Erreur lors de la rcupration des utilisateurs :",t),t}},Fq=async(e,t)=>{try{await We(be(se,"users",e),{role:t,updatedAt:He.now()})}catch(r){throw console.error("Erreur lors de la mise  jour du rle :",r),r}},Qq=async(e,t)=>{try{const r={isPremium:t,updatedAt:He.now()};if(t){const a=new Date;a.setDate(a.getDate()+30),r.subscriptionEnd=He.fromDate(a)}else r.subscriptionEnd=null;await We(be(se,"users",e),r)}catch(r){throw console.error("Erreur lors de la mise  jour du statut Premium :",r),r}},Vq=async(e,t)=>{try{await We(be(se,"users",e),{isActive:t,updatedAt:He.now()})}catch(r){throw console.error("Erreur lors du changement de statut du compte :",r),r}},Yq=async e=>{try{const t=qe(Hq,we("userId","==",e)),a=(await ke(t)).docs.map(m=>({id:m.id,...m.data()})),l=a.length,o=a.filter(m=>m.reussi).length,u=l>0?Math.round(a.reduce((m,h)=>m+h.score,0)/l):0,d=a.length>0?new Date(Math.max(...a.map(m=>{const h=m.datePassage;return h?.toDate?h.toDate().getTime():new Date(h).getTime()}))):null;return{totalQuizPasses:l,scoresMoyens:u,quizReussis:o,dernierQuiz:d}}catch(t){return console.error("Erreur lors du calcul des statistiques :",t),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},Kq=async()=>{try{const t=(await ke(D2)).docs.map(r=>r.data());return{total:t.length,admins:t.filter(r=>r.role==="admin").length,profs:t.filter(r=>r.role==="prof").length,eleves:t.filter(r=>r.role==="eleve").length,premium:t.filter(r=>r.isPremium).length,actifs:t.filter(r=>r.isActive!==!1).length}}catch(e){throw console.error("Erreur lors du calcul des stats globales :",e),e}},Xq=()=>{const[e,t]=y.useState([]),[r,a]=y.useState(null),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,h]=y.useState(null),[p,v]=y.useState(""),[x,b]=y.useState(""),[_,N]=y.useState(""),[S,C]=y.useState(""),[z,w]=y.useState(!1),[E]=xk();y.useEffect(()=>{E.get("filter")==="premium"&&N("true")},[E]);const[O,P]=y.useState(null),[L,T]=y.useState(null),[D,k]=y.useState(!1),[$,B]=y.useState(null),[le,oe]=y.useState(null),F=y.useCallback(async()=>{o(!0),d(null);try{const[H,de]=await Promise.all([Gq(),Kq()]);t(H),a(de)}catch(H){d("Erreur lors du chargement des utilisateurs."),console.error(H)}finally{o(!1)}},[]);y.useEffect(()=>{F()},[F]),y.useEffect(()=>{if(m){const H=setTimeout(()=>h(null),4e3);return()=>clearTimeout(H)}},[m]);const q=e.filter(H=>{if(p){const de=p.toLowerCase();if(!H.displayName?.toLowerCase().includes(de)&&!H.email?.toLowerCase().includes(de))return!1}return!(x&&H.role!==x||_==="true"&&!H.isPremium||_==="false"&&H.isPremium||S==="true"&&H.isActive===!1||S==="false"&&H.isActive!==!1)}),J=async H=>{P(H),k(!0);try{const de=await Yq(H.uid);T(de)}catch(de){console.error("Erreur lors du chargement des statistiques :",de),T(null)}finally{k(!1)}},Q=async()=>{if(le){B(le.userId);try{switch(le.type){case"role":await Fq(le.userId,le.value),h("Rle mis  jour avec succs.");break;case"premium":await Qq(le.userId,le.value),h(le.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await Vq(le.userId,le.value),h(le.value?"Compte ractiv.":"Compte dsactiv.");break}await F()}catch(H){d("Erreur lors de l'excution de l'action."),console.error(H)}finally{B(null),oe(null)}}},ve=({role:H})=>{const de={admin:{icon:n.jsx(oy,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:n.jsx(Il,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:n.jsx(Nn,{size:12}),className:"user-badge-eleve",label:"lve"}},Ee=de[H]||de.eleve;return n.jsxs("span",{className:`user-badge ${Ee.className}`,children:[Ee.icon," ",Ee.label]})},U=H=>H?(H?.toDate?H.toDate():new Date(H)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",ge=H=>H?H.charAt(0).toUpperCase():"?",ee=()=>n.jsxs(n.Fragment,{children:[u&&n.jsxs("div",{className:"admin-message admin-message-error",children:[n.jsx(Kd,{size:18}),n.jsx("span",{children:u}),n.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:n.jsx(Di,{size:16})})]}),m&&n.jsxs("div",{className:"admin-message admin-message-success",children:[n.jsx(Dt,{size:18}),n.jsx("span",{children:m})]})]}),me=()=>{if(!r)return null;const H=[{label:"Total",value:r.total,icon:n.jsx($d,{size:20}),color:"stat-blue"},{label:"lves",value:r.eleves,icon:n.jsx(Nn,{size:20}),color:"stat-green"},{label:"Professeurs",value:r.profs,icon:n.jsx(Il,{size:20}),color:"stat-purple"},{label:"Premium",value:r.premium,icon:n.jsx(Wr,{size:20}),color:"stat-gold"}];return n.jsx("div",{className:"user-stats-grid",children:H.map(de=>n.jsxs("div",{className:`user-stat-card ${de.color}`,children:[n.jsx("div",{className:"user-stat-icon",children:de.icon}),n.jsxs("div",{className:"user-stat-info",children:[n.jsx("span",{className:"user-stat-value",children:de.value}),n.jsx("span",{className:"user-stat-label",children:de.label})]})]},de.label))})},xe=()=>le?n.jsx("div",{className:"admin-modal-overlay",onClick:()=>oe(null),children:n.jsxs("div",{className:"admin-modal",onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{className:"admin-modal-header",children:[n.jsx("h3",{children:"Confirmer l'action"}),n.jsx("button",{className:"admin-modal-close",onClick:()=>oe(null),children:n.jsx(Di,{size:20})})]}),n.jsx("div",{className:"admin-modal-body",children:n.jsx("p",{children:le.label})}),n.jsxs("div",{className:"admin-modal-footer",children:[n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>oe(null),children:"Annuler"}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:Q,disabled:$===le.userId,children:$===le.userId?"En cours...":"Confirmer"})]})]})}):null,pe=()=>O?n.jsx("div",{className:"admin-modal-overlay",onClick:()=>P(null),children:n.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{className:"admin-modal-header",children:[n.jsx("h3",{children:"Dtail de l'utilisateur"}),n.jsx("button",{className:"admin-modal-close",onClick:()=>P(null),children:n.jsx(Di,{size:20})})]}),n.jsxs("div",{className:"admin-modal-body",children:[n.jsxs("div",{className:"user-detail-profile",children:[n.jsx("div",{className:"user-detail-avatar",children:ge(O.displayName)}),n.jsxs("div",{className:"user-detail-info",children:[n.jsx("h4",{children:O.displayName||"Sans nom"}),n.jsx("p",{children:O.email}),n.jsxs("div",{className:"user-detail-badges",children:[n.jsx(ve,{role:O.role}),O.isPremium&&n.jsxs("span",{className:"user-badge user-badge-premium",children:[n.jsx(Wr,{size:12})," Premium"]}),n.jsx("span",{className:`user-badge ${O.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:O.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),n.jsxs("div",{className:"user-detail-dates",children:[n.jsxs("div",{children:[n.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),n.jsx("span",{children:U(O.createdAt)})]}),O.isPremium&&O.subscriptionEnd&&n.jsxs("div",{children:[n.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),n.jsx("span",{children:U(O.subscriptionEnd)})]})]}),n.jsxs("div",{className:"user-detail-stats-section",children:[n.jsxs("h4",{children:[n.jsx(xs,{size:18})," Statistiques"]}),D?n.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des statistiques..."})]}):L?n.jsxs("div",{className:"user-detail-stats-grid",children:[n.jsxs("div",{className:"user-detail-stat",children:[n.jsx(Nn,{size:20}),n.jsx("span",{className:"user-detail-stat-value",children:L.totalQuizPasses}),n.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),n.jsxs("div",{className:"user-detail-stat",children:[n.jsx(fc,{size:20}),n.jsxs("span",{className:"user-detail-stat-value",children:[L.scoresMoyens,"%"]}),n.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),n.jsxs("div",{className:"user-detail-stat",children:[n.jsx(Ri,{size:20}),n.jsx("span",{className:"user-detail-stat-value",children:L.quizReussis}),n.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),n.jsxs("div",{className:"user-detail-stat",children:[n.jsx($l,{size:20}),n.jsx("span",{className:"user-detail-stat-value",children:L.dernierQuiz?U(L.dernierQuiz):"Aucun"}),n.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):n.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return n.jsxs("div",{className:"admin-container",children:[ee(),xe(),pe(),n.jsxs("div",{className:"user-manager",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"admin-title",children:[n.jsx($d,{size:24})," Gestion des Utilisateurs"]}),n.jsxs("p",{className:"admin-subtitle",children:[e.length," utilisateur(s) au total  ",q.length," affich(s)"]})]}),n.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:F,children:[n.jsx(Jk,{size:16})," Actualiser"]})]}),me(),n.jsxs("div",{className:"admin-toolbar",children:[n.jsxs("div",{className:"admin-search-wrapper",children:[n.jsx(N2,{size:18,className:"admin-search-icon"}),n.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:p,onChange:H=>v(H.target.value)})]}),n.jsxs("button",{className:`admin-btn admin-btn-outline ${z?"active":""}`,onClick:()=>w(!z),children:[n.jsx(cy,{size:16})," Filtres",z?n.jsx(nx,{size:14}):n.jsx(Yd,{size:14})]})]}),z&&n.jsxs("div",{className:"admin-filters-panel",children:[n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Rle"}),n.jsxs("select",{className:"admin-select",value:x,onChange:H=>b(H.target.value),children:[n.jsx("option",{value:"",children:"Tous les rles"}),n.jsx("option",{value:"admin",children:"Admin"}),n.jsx("option",{value:"prof",children:"Professeur"}),n.jsx("option",{value:"eleve",children:"lve"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),n.jsxs("select",{className:"admin-select",value:_,onChange:H=>N(H.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"true",children:"Premium"}),n.jsx("option",{value:"false",children:"Gratuit"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Statut"}),n.jsxs("select",{className:"admin-select",value:S,onChange:H=>C(H.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"true",children:"Actifs"}),n.jsx("option",{value:"false",children:"Dsactivs"})]})]}),n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{b(""),N(""),C(""),v("")},children:"Rinitialiser"})]}),l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des utilisateurs..."})]}):q.length===0?n.jsxs("div",{className:"admin-empty-state",children:[n.jsx($d,{size:48}),n.jsx("h3",{children:"Aucun utilisateur trouv"}),n.jsx("p",{children:e.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):n.jsx("div",{className:"user-table-wrapper",children:n.jsxs("table",{className:"user-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Utilisateur"}),n.jsx("th",{children:"Rle"}),n.jsx("th",{children:"Abonnement"}),n.jsx("th",{children:"Statut"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:q.map(H=>n.jsxs("tr",{className:H.isActive===!1?"user-row-inactive":"",children:[n.jsx("td",{children:n.jsxs("div",{className:"user-cell-info",children:[n.jsx("div",{className:"user-avatar-sm",children:ge(H.displayName)}),n.jsxs("div",{children:[n.jsx("span",{className:"user-cell-name",children:H.displayName||"Sans nom"}),n.jsx("span",{className:"user-cell-email",children:H.email})]})]})}),n.jsx("td",{children:n.jsxs("select",{className:"admin-select admin-select-sm",value:H.role,onChange:de=>oe({type:"role",userId:H.uid,value:de.target.value,label:`Changer le rle de "${H.displayName||H.email}" en "${de.target.value}" ?`}),children:[n.jsx("option",{value:"eleve",children:"lve"}),n.jsx("option",{value:"prof",children:"Professeur"}),n.jsx("option",{value:"admin",children:"Admin"})]})}),n.jsx("td",{children:n.jsx("button",{className:`user-premium-toggle ${H.isPremium?"active":""}`,onClick:()=>oe({type:"premium",userId:H.uid,value:!H.isPremium,label:H.isPremium?`Dsactiver le statut Premium de "${H.displayName||H.email}" ?`:`Activer le statut Premium de "${H.displayName||H.email}" pour 30 jours ?`}),disabled:$===H.uid,children:H.isPremium?n.jsxs(n.Fragment,{children:[n.jsx(uc,{size:14})," Premium"]}):n.jsxs(n.Fragment,{children:[n.jsx(Wr,{size:14})," Gratuit"]})})}),n.jsx("td",{children:n.jsx("button",{className:`user-status-toggle ${H.isActive!==!1?"active":"inactive"}`,onClick:()=>oe({type:"active",userId:H.uid,value:H.isActive===!1,label:H.isActive===!1?`Ractiver le compte de "${H.displayName||H.email}" ?`:`Dsactiver le compte de "${H.displayName||H.email}" ?`}),disabled:$===H.uid,children:H.isActive!==!1?n.jsxs(n.Fragment,{children:[n.jsx(eq,{size:14})," Actif"]}):n.jsxs(n.Fragment,{children:[n.jsx(tq,{size:14})," Dsactiv"]})})}),n.jsx("td",{children:n.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>J(H),title:"Voir les statistiques",children:[n.jsx(ql,{size:14})," Dtail"]})})]},H.uid))})]})})]})]})},Wq=()=>{const[e,t]=y.useState([]),[r,a]=y.useState(null),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,h]=y.useState(""),[p,v]=y.useState(""),[x,b]=y.useState(""),[_,N]=y.useState(!1),S=y.useCallback(async()=>{try{o(!0),d(null);const O=await ke(je(se,"users")),P=new Map;O.docs.forEach(me=>{const xe=me.data();P.set(me.id,{name:xe.displayName||"Sans nom",email:xe.email||""})});const L=await ke(je(se,"quizzes")),T=new Map;L.docs.forEach(me=>{const xe=me.data();T.set(me.id,{titre:xe.titre||xe.quizTitre||"Quiz sans titre",discipline:xe.disciplineNom||xe.matiereNom||""})});const D=await ke(je(se,"quizzes_v2")),k=new Map;D.docs.forEach(me=>{const xe=me.data();k.set(me.id,{titre:xe.titre||"Quiz avanc sans titre",discipline:xe.disciplineNom||""})});const $=[];try{(await ke(qe(je(se,"quiz_results"),nt("datePassage","desc"),Sn(200)))).docs.forEach(xe=>{const pe=xe.data(),H=P.get(pe.userId)||{name:"Inconnu",email:""},de=T.get(pe.quizId)||{titre:pe.quizTitre||"Quiz",discipline:pe.disciplineNom||""},Ee=pe.pourcentage??(pe.totalPoints>0?Math.round(pe.score/pe.totalPoints*100):pe.score>0?Math.round(pe.score/20*100):0);$.push({id:xe.id,quizId:pe.quizId||"",quizTitre:de.titre,userId:pe.userId||"",userName:H.name,userEmail:H.email,score:pe.score||0,scoreMax:pe.totalPoints||20,pourcentage:Ee,reussi:pe.reussi??Ee>=50,tempsEcoule:pe.tempsEcoule||0,datePassage:pe.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:de.discipline})})}catch(me){console.warn("Pas de rsultats v1 ou index manquant:",me)}const B=[];try{(await ke(qe(je(se,"quiz_results_v2"),nt("datePassage","desc"),Sn(200)))).docs.forEach(xe=>{const pe=xe.data(),H=P.get(pe.userId)||{name:"Inconnu",email:""},de=k.get(pe.quizId)||{titre:pe.quizTitre||"Quiz avanc",discipline:pe.disciplineNom||""},Ee=pe.scoreMax>0?Math.round(pe.score/pe.scoreMax*100):0;B.push({id:xe.id,quizId:pe.quizId||"",quizTitre:de.titre,userId:pe.userId||"",userName:H.name,userEmail:H.email,score:pe.score||0,scoreMax:pe.scoreMax||0,pourcentage:Ee,reussi:pe.reussi??Ee>=50,tempsEcoule:pe.tempsTotal||pe.tempsEcoule||0,datePassage:pe.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:de.discipline})})}catch(me){console.warn("Pas de rsultats v2 ou index manquant:",me)}const le=[...$,...B].sort((me,xe)=>xe.datePassage.getTime()-me.datePassage.getTime());t(le);const oe=new Date,F=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate()),q=new Date(F.getTime()-10080*60*1e3),J=le.length,Q=J>0?Math.round(le.reduce((me,xe)=>me+xe.pourcentage,0)/J):0,ve=J>0?Math.round(le.filter(me=>me.reussi).length/J*100):0,U=J>0?Math.round(le.reduce((me,xe)=>me+xe.tempsEcoule,0)/J):0,ge=le.filter(me=>me.datePassage>=F).length,ee=le.filter(me=>me.datePassage>=q).length;a({totalResultats:J,moyenneGenerale:Q,tauxReussite:ve,tempsEcouleMoyen:U,resultatsAujourdHui:ge,resultats7Jours:ee})}catch(O){console.error("Erreur chargement rsultats:",O),d("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);y.useEffect(()=>{S()},[S]);const C=e.filter(O=>{if(m&&O.type!==m||p==="true"&&!O.reussi||p==="false"&&O.reussi)return!1;if(x){const P=x.toLowerCase();if(!O.userName.toLowerCase().includes(P)&&!O.userEmail.toLowerCase().includes(P)&&!O.quizTitre.toLowerCase().includes(P)&&!O.disciplineNom.toLowerCase().includes(P))return!1}return!0}),z=O=>{if(O<60)return`${O}s`;const P=Math.floor(O/60),L=O%60;return L>0?`${P}min ${L}s`:`${P}min`},w=O=>O.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=O=>O>=80?"results-score--excellent":O>=60?"results-score--bien":O>=40?"results-score--moyen":"results-score--faible";return n.jsxs("div",{className:"results-admin",children:[n.jsxs("div",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),n.jsx("div",{className:"admin-page-header__actions",children:n.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:S,children:" Actualiser"})})]}),r&&n.jsxs("div",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.totalResultats}),n.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsxs("div",{className:"stat-card__value",children:[r.moyenneGenerale,"%"]}),n.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsxs("div",{className:"stat-card__value",children:[r.tauxReussite,"%"]}),n.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),n.jsxs("div",{className:"stat-card__content",children:[n.jsx("div",{className:"stat-card__value",children:r.resultatsAujourdHui}),n.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),n.jsxs("div",{className:"admin-toolbar",children:[n.jsxs("div",{className:"admin-search",children:[n.jsx("span",{className:"admin-search-icon",children:""}),n.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:x,onChange:O=>b(O.target.value)})]}),n.jsx("button",{className:`admin-btn admin-btn-ghost ${_?"active":""}`,onClick:()=>N(!_),children:" Filtres"})]}),_&&n.jsxs("div",{className:"admin-filters-panel",children:[n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),n.jsxs("select",{className:"admin-select",value:m,onChange:O=>h(O.target.value),children:[n.jsx("option",{value:"",children:"Tous les types"}),n.jsx("option",{value:"classique",children:"Classique (v1)"}),n.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),n.jsxs("div",{className:"admin-filter-group",children:[n.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),n.jsxs("select",{className:"admin-select",value:p,onChange:O=>v(O.target.value),children:[n.jsx("option",{value:"",children:"Tous"}),n.jsx("option",{value:"true",children:"Russis"}),n.jsx("option",{value:"false",children:"chous"})]})]}),n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{h(""),v(""),b("")},children:"Rinitialiser"})]}),l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des rsultats..."})]}):u?n.jsxs("div",{className:"admin-error",children:[n.jsxs("p",{children:[" ",u]}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,children:"Ressayer"})]}):C.length===0?n.jsxs("div",{className:"admin-empty-state",children:[n.jsx("span",{style:{fontSize:"3rem"},children:""}),n.jsx("h3",{children:"Aucun rsultat trouv"}),n.jsx("p",{children:e.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):n.jsxs("div",{className:"results-table-wrapper",children:[n.jsxs("table",{className:"results-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"lve"}),n.jsx("th",{children:"Quiz"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Score"}),n.jsx("th",{children:"Rsultat"}),n.jsx("th",{children:"Dure"}),n.jsx("th",{children:"Date"})]})}),n.jsx("tbody",{children:C.map(O=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"results-cell-user",children:[n.jsx("span",{className:"results-cell-name",children:O.userName}),n.jsx("span",{className:"results-cell-email",children:O.userEmail})]})}),n.jsx("td",{children:n.jsxs("div",{className:"results-cell-quiz",children:[n.jsx("span",{className:"results-cell-quiz-title",children:O.quizTitre}),O.disciplineNom&&n.jsx("span",{className:"results-cell-discipline",children:O.disciplineNom})]})}),n.jsx("td",{children:n.jsx("span",{className:`results-badge results-badge--${O.type}`,children:O.type==="classique"?" Classique":" Avanc"})}),n.jsxs("td",{children:[n.jsxs("span",{className:`results-score ${E(O.pourcentage)}`,children:[O.pourcentage,"%"]}),n.jsxs("span",{className:"results-score-detail",children:[O.score,"/",O.scoreMax]})]}),n.jsx("td",{children:n.jsx("span",{className:`results-status ${O.reussi?"results-status--success":"results-status--fail"}`,children:O.reussi?" Russi":" chou"})}),n.jsx("td",{className:"results-cell-duration",children:z(O.tempsEcoule)}),n.jsx("td",{className:"results-cell-date",children:w(O.datePassage)})]},`${O.type}-${O.id}`))})]}),n.jsx("div",{className:"results-footer",children:n.jsxs("p",{children:[C.length," rsultat",C.length>1?"s":""," affich",C.length>1?"s":"",C.length!==e.length&&` sur ${e.length} au total`]})})]})]})},Cl={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},Zq=()=>{const[e,t]=y.useState(Cl),[r,a]=y.useState(Cl),[l,o]=y.useState(!0),[u,d]=y.useState(!1),[m,h]=y.useState(null),[p,v]=y.useState(null),[x,b]=y.useState(!1),_=y.useCallback(async()=>{try{o(!0),h(null);const w=be(se,"settings","platform"),E=await Vt(w);if(E.exists()){const O=E.data(),P={...Cl,...O};t(P),a(P)}else t(Cl),a(Cl)}catch(w){console.error("Erreur chargement paramtres:",w),h("Impossible de charger les paramtres.")}finally{o(!1)}},[]);y.useEffect(()=>{_()},[_]),y.useEffect(()=>{if(p){const w=setTimeout(()=>v(null),4e3);return()=>clearTimeout(w)}},[p]),y.useEffect(()=>{const w=JSON.stringify(e)!==JSON.stringify(r);b(w)},[e,r]);const N=(w,E)=>{t(O=>({...O,[w]:E}))},S=async()=>{try{if(d(!0),h(null),e.premiumMensuel<0||e.premiumAnnuel<0){h("Les tarifs ne peuvent pas tre ngatifs.");return}if(e.quizNoteMinimale<0||e.quizNoteMinimale>20){h("La note minimale doit tre entre 0 et 20.");return}const w=be(se,"settings","platform");await Xf(w,{...e,updatedAt:ft()}),a(e),b(!1),v("Paramtres sauvegards avec succs !")}catch(w){console.error("Erreur sauvegarde paramtres:",w),h("Impossible de sauvegarder les paramtres.")}finally{d(!1)}},C=()=>{t(r),b(!1)},z=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&t(Cl)};return l?n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement des paramtres..."})]}):n.jsxs("div",{className:"settings-admin",children:[n.jsxs("div",{className:"admin-page-header",children:[n.jsxs("div",{className:"admin-page-header__info",children:[n.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),n.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),n.jsxs("div",{className:"admin-page-header__actions",children:[x&&n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:C,children:"Annuler"}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!x||u,children:u?" Sauvegarde...":" Sauvegarder"})]})]}),x&&n.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),m&&n.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",m]}),p&&n.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",p]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),n.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Nom du site"}),n.jsx("input",{type:"text",className:"admin-input",value:e.siteName,onChange:w=>N("siteName",w.target.value)})]}),n.jsxs("div",{className:"settings-field settings-field--full",children:[n.jsx("label",{className:"settings-label",children:"Description"}),n.jsx("input",{type:"text",className:"admin-input",value:e.siteDescription,onChange:w=>N("siteDescription",w.target.value)})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Email de contact"}),n.jsx("input",{type:"email",className:"admin-input",value:e.contactEmail,onChange:w=>N("contactEmail",w.target.value)})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Tlphone"}),n.jsx("input",{type:"tel",className:"admin-input",value:e.contactPhone,onChange:w=>N("contactPhone",w.target.value)})]})]})]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),n.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.premiumMensuel,onChange:w=>N("premiumMensuel",parseInt(w.target.value)||0),min:0,step:500}),n.jsxs("span",{className:"settings-hint",children:["Actuellement : ",e.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.premiumAnnuel,onChange:w=>N("premiumAnnuel",parseInt(w.target.value)||0),min:0,step:1e3}),n.jsxs("span",{className:"settings-hint",children:["conomie : ",(e.premiumMensuel*12-e.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),n.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.quizDureeDefaut,onChange:w=>N("quizDureeDefaut",parseInt(w.target.value)||0),min:1,max:120})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),n.jsx("input",{type:"number",className:"admin-input",value:e.quizNoteMinimale,onChange:w=>N("quizNoteMinimale",parseInt(w.target.value)||0),min:0,max:20})]}),n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),n.jsx("input",{type:"number",className:"admin-input",value:e.quizTentativesMax,onChange:w=>N("quizTentativesMax",parseInt(w.target.value)||0),min:1,max:10}),n.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),n.jsxs("div",{className:"settings-section",children:[n.jsxs("div",{className:"settings-section__header",children:[n.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),n.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"settings-field",children:[n.jsx("label",{className:"settings-label",children:"Mode maintenance"}),n.jsxs("div",{className:"settings-toggle-wrapper",children:[n.jsx("button",{className:`settings-toggle ${e.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>N("maintenanceMode",!e.maintenanceMode),children:n.jsx("span",{className:"settings-toggle__knob"})}),n.jsx("span",{className:`settings-toggle-label ${e.maintenanceMode?"settings-toggle-label--active":""}`,children:e.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),n.jsxs("div",{className:"settings-field settings-field--full",children:[n.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),n.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:e.maintenanceMessage,onChange:w=>N("maintenanceMessage",w.target.value),disabled:!e.maintenanceMode})]})]})]}),n.jsxs("div",{className:"settings-actions",children:[n.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:z,children:" Rinitialiser aux valeurs par dfaut"}),n.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!x||u,children:u?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},Jq=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],e3=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],t3=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Pa=({value:e,onChange:t,placeholder:r="Saisissez votre texte...",minHeight:a=100,maxHeight:l=400,toolbar:o=Jq,disabled:u=!1,className:d=""})=>{const m=y.useRef(null),h=y.useRef(!1),[p,v]=y.useState(!1),[x,b]=y.useState(!1);y.useEffect(()=>{m.current&&!h.current&&m.current.innerHTML!==e&&(m.current.innerHTML=e||""),h.current=!1},[e]);const _=y.useCallback(()=>{m.current&&(h.current=!0,t(m.current.innerHTML))},[t]),N=y.useCallback((w,E)=>{m.current?.focus(),document.execCommand(w,!1,E),_()},[_]),S=y.useCallback(()=>{const w=prompt("URL du lien :","https://");w&&N("createLink",w)},[N]),C=y.useCallback(()=>{N("removeFormat"),N("formatBlock","p")},[N]);y.useEffect(()=>{const w=()=>{v(!1),b(!1)};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[]);const z=w=>{switch(w){case"bold":return n.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:E=>{E.preventDefault(),N("bold")},children:n.jsx("strong",{children:"G"})},"bold");case"italic":return n.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:E=>{E.preventDefault(),N("italic")},children:n.jsx("em",{children:"I"})},"italic");case"underline":return n.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:E=>{E.preventDefault(),N("underline")},children:n.jsx("u",{children:"S"})},"underline");case"strikethrough":return n.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:E=>{E.preventDefault(),N("strikeThrough")},children:n.jsx("s",{children:"B"})},"strike");case"heading":return n.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:E=>{E.preventDefault(),N("formatBlock","h3")},children:"H"},"heading");case"color":return n.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{v(!p),b(!1)},children:n.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),p&&n.jsx("div",{className:"rte-color-picker",children:e3.map(E=>n.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E,border:E==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:O=>{O.preventDefault(),N("foreColor",E),v(!1)}},E))})]},"color");case"highlight":return n.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{b(!x),v(!1)},children:n.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),x&&n.jsx("div",{className:"rte-color-picker",children:t3.map(E=>n.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E==="transparent"?"#fff":E,border:"1px solid #ccc"},onMouseDown:O=>{O.preventDefault(),N("hiliteColor",E),b(!1)},children:E==="transparent"?"":""},E))})]},"highlight");case"alignLeft":return n.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:E=>{E.preventDefault(),N("justifyLeft")},children:""},"alignL");case"alignCenter":return n.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:E=>{E.preventDefault(),N("justifyCenter")},children:""},"alignC");case"alignRight":return n.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:E=>{E.preventDefault(),N("justifyRight")},children:""},"alignR");case"bulletList":return n.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:E=>{E.preventDefault(),N("insertUnorderedList")},children:""},"ul");case"numberedList":return n.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:E=>{E.preventDefault(),N("insertOrderedList")},children:"1"},"ol");case"subscript":return n.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:E=>{E.preventDefault(),N("subscript")},children:["X",n.jsx("sub",{children:""})]},"sub");case"superscript":return n.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:E=>{E.preventDefault(),N("superscript")},children:["X",n.jsx("sup",{children:""})]},"sup");case"link":return n.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:E=>{E.preventDefault(),S()},children:""},"link");case"clean":return n.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:E=>{E.preventDefault(),C()},children:""},"clean");default:return null}};return n.jsxs("div",{className:`rte-container ${u?"rte-disabled":""} ${d}`,children:[!u&&n.jsx("div",{className:"rte-toolbar",children:o.map(w=>z(w))}),n.jsx("div",{ref:m,className:"rte-editor",contentEditable:!u,onInput:_,onBlur:_,"data-placeholder":r,style:{minHeight:`${a}px`,maxHeight:`${l}px`},suppressContentEditableWarning:!0})]})},Bl={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},Xd={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},Wd={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Bt(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function r3(e,t){const r={id:Bt("q"),type:e,enonce:"",difficulte:"moyen",points:2,ordre:t};switch(e){case"qcm_unique":return{...r,typeData:{options:[{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...r,typeData:{options:[{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...r,typeData:{items:[{id:Bt("item"),texte:"",ordreCorrect:1},{id:Bt("item"),texte:"",ordreCorrect:2},{id:Bt("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...r,typeData:{paires:[{id:Bt("pair"),gauche:"",droite:""},{id:Bt("pair"),gauche:"",droite:""},{id:Bt("pair"),gauche:"",droite:""}]}};case"essai":return{...r,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const Lc="quizzes_v2",n3="quiz_results_v2";async function a3(e,t){try{const r=await nr(je(se,Lc),{...e,auteurId:t,createdAt:ft(),updatedAt:ft()});return console.log(" Quiz avanc cr :",r.id),r.id}catch(r){throw console.error(" Erreur cration quiz avanc :",r),new Error("Impossible de crer le quiz")}}async function i3(e,t){try{const r=be(se,Lc,e);await We(r,{...t,updatedAt:ft()}),console.log(" Quiz avanc mis  jour :",e)}catch(r){throw console.error(" Erreur mise  jour quiz :",r),new Error("Impossible de mettre  jour le quiz")}}async function s3(e){try{await _n(be(se,Lc,e)),console.log(" Quiz avanc supprim :",e)}catch(t){throw console.error(" Erreur suppression quiz :",t),new Error("Impossible de supprimer le quiz")}}async function M2(e){try{const t=await Vt(be(se,Lc,e));if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||void 0}}catch(t){throw console.error(" Erreur rcupration quiz :",t),new Error("Impossible de rcuprer le quiz")}}async function l3(){try{const e=qe(je(se,Lc),nt("createdAt","desc"));return(await ke(e)).docs.map(r=>{const a=r.data();return{id:r.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||void 0}})}catch(e){throw console.error(" Erreur rcupration tous les quiz :",e),new Error("Impossible de rcuprer les quiz")}}function o3(e,t){let r=0,a=0;const l=[];for(const o of e.questions){a+=o.points;const u=t.find(v=>v.questionId===o.id);if(!u){l.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let d=0,m=!1,h=!1,p=!1;switch(o.type){case"qcm_unique":{const x=o.typeData.options.find(b=>b.isCorrect);x&&u.selectedOptionId===x.id&&(d=o.points,m=!0);break}case"qcm_multiple":{const v=o.typeData,x=v.options.filter(C=>C.isCorrect).map(C=>C.id),b=v.options.filter(C=>!C.isCorrect).map(C=>C.id),_=u.selectedOptionIds||[],N=_.some(C=>b.includes(C)),S=_.filter(C=>x.includes(C)).length;!N&&S===x.length?(d=o.points,m=!0):v.scoringPartiel&&S>0&&!N&&(d=Math.round(o.points*S/x.length*100)/100,h=!0);break}case"drag_drop":{const v=o.typeData,x=u.ordrePropose||[],b=v.items.sort((N,S)=>N.ordreCorrect-S.ordreCorrect).map(N=>N.id);let _=0;for(let N=0;N<b.length;N++)x[N]===b[N]&&_++;_===b.length?(d=o.points,m=!0):_>0&&(d=Math.round(o.points*_/b.length*100)/100,h=!0);break}case"mise_en_relation":{const v=o.typeData,x=u.relationsProposees||{};let b=0;for(const _ of v.paires)x[_.id]===_.id&&b++;b===v.paires.length?(d=o.points,m=!0):b>0&&(d=Math.round(o.points*b/v.paires.length*100)/100,h=!0);break}case"essai":{const v=o.typeData,x=u.texteReponse||"";if(v.correctionMode==="mots_cles"&&v.motsCles.length>0){const b=x.toLowerCase().replace(/<[^>]*>/g,"");let _=0,N=0;for(const S of v.motsCles)_+=S.poids,b.includes(S.mot.toLowerCase())&&(N+=S.poids);_>0&&(d=Math.round(o.points*N/_*100)/100,m=N===_,h=N>0&&N<_)}else p=!0;break}}r+=d,l.push({questionId:o.id,type:o.type,pointsObtenus:d,pointsMax:o.points,isCorrect:m,isPartiel:h,correctionManuelleRequise:p})}return{score:r,scoreMax:a,details:l}}async function c3(e,t,r,a){try{const{score:l,scoreMax:o,details:u}=o3(e,r),d=o>0?Math.round(l/o*20*100)/100:0,m=u.some(v=>v.correctionManuelleRequise),h={quizId:e.id,userId:t,reponses:r,score:l,scoreMax:o,note20:d,tempsEcoule:a,datePassage:new Date,reussi:d>=e.noteMinimale,correctionManuelle:m,detailsParQuestion:u},p=await nr(je(se,n3),{...h,datePassage:ft()});return console.log(" Rsultat quiz enregistr :",p.id),{id:p.id,...h}}catch(l){throw console.error(" Erreur soumission quiz :",l),new Error("Impossible d'enregistrer le rsultat")}}const u3=({existingQuiz:e,disciplines:t,auteurId:r,onSave:a,onCancel:l})=>{const[o,u]=y.useState(e?.titre||""),[d,m]=y.useState(e?.description||""),[h,p]=y.useState(e?.disciplineId||""),[v,x]=y.useState(e?.duree||30),[b,_]=y.useState(e?.isPremium??!0),[N,S]=y.useState(e?.noteMinimale||10),[C,z]=y.useState(e?.melangerQuestions??!1),[w,E]=y.useState(e?.melangerOptions??!1),[O,P]=y.useState(e?.afficherCorrection??!0),[L,T]=y.useState(e?.tentativesMax||0),[D,k]=y.useState(e?.questions||[]),[$,B]=y.useState(null),[le,oe]=y.useState(!1),[F,q]=y.useState(null),[J,Q]=y.useState(!1),ve=y.useCallback(H=>{const de=r3(H,D.length+1);k(Ee=>[...Ee,de]),B(D.length),Q(!1)},[D.length]),U=y.useCallback(H=>{confirm("Supprimer cette question ?")&&(k(de=>de.filter((ne,Y)=>Y!==H).map((ne,Y)=>({...ne,ordre:Y+1}))),B(null))},[]),ge=y.useCallback(H=>{k(de=>{const Ee=de[H],ne={...JSON.parse(JSON.stringify(Ee)),id:Bt("q"),ordre:de.length+1};return[...de,ne]})},[]),ee=y.useCallback((H,de)=>{k(Ee=>{const ne=[...Ee],Y=de==="up"?H-1:H+1;return Y<0||Y>=ne.length?Ee:([ne[H],ne[Y]]=[ne[Y],ne[H]],ne.map((I,ae)=>({...I,ordre:ae+1})))}),B(de==="up"?$!==null?$-1:null:$!==null?$+1:null)},[$]),me=y.useCallback((H,de)=>{k(Ee=>Ee.map((ne,Y)=>Y===H?{...ne,...de}:ne))},[]),xe=async()=>{if(!o.trim()){q("Le titre est obligatoire");return}if(!h){q("Slectionnez une discipline");return}if(D.length===0){q("Ajoutez au moins une question");return}for(let H=0;H<D.length;H++)if(!D[H].enonce.replace(/<[^>]*>/g,"").trim()){q(`La question ${H+1} n'a pas d'nonc`),B(H);return}q(null),oe(!0);try{const H={disciplineId:h,titre:o.trim(),description:d.trim()||void 0,questions:D,duree:v,isPremium:b,noteMinimale:N,melangerQuestions:C,melangerOptions:w,afficherCorrection:O,tentativesMax:L};let de;e?.id?(await i3(e.id,H),de=e.id):de=await a3(H,r),a?.(de)}catch(H){q(H.message||"Erreur lors de la sauvegarde")}finally{oe(!1)}},pe=D.reduce((H,de)=>H+de.points,0);return n.jsxs("div",{className:"quiz-editor",children:[n.jsxs("div",{className:"quiz-editor__header",children:[n.jsx("h2",{children:e?" Modifier le quiz":" Nouveau quiz avanc"}),n.jsxs("div",{className:"quiz-editor__header-actions",children:[n.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",pe," pts"]}),n.jsxs("span",{className:"quiz-editor__count-badge",children:[D.length," question",D.length>1?"s":""]})]})]}),F&&n.jsxs("div",{className:"quiz-editor__error",children:[" ",F,n.jsx("button",{onClick:()=>q(null),children:""})]}),n.jsxs("div",{className:"quiz-editor__section",children:[n.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),n.jsxs("div",{className:"quiz-editor__grid",children:[n.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[n.jsx("label",{children:"Titre du quiz *"}),n.jsx("input",{type:"text",value:o,onChange:H=>u(H.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Discipline *"}),n.jsxs("select",{value:h,onChange:H=>p(H.target.value),className:"quiz-editor__select",children:[n.jsx("option",{value:"",children:" Slectionner "}),t.map(H=>n.jsxs("option",{value:H.id,children:[H.nom," (",H.classe,")"]},H.id))]})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Dure (minutes)"}),n.jsx("input",{type:"number",value:v,onChange:H=>x(Number(H.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Note minimale (/20)"}),n.jsx("input",{type:"number",value:N,onChange:H=>S(Number(H.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field",children:[n.jsx("label",{children:"Tentatives max (0 = illimit)"}),n.jsx("input",{type:"number",value:L,onChange:H=>T(Number(H.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),n.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[n.jsx("label",{children:"Description (optionnel)"}),n.jsx(Pa,{value:d,onChange:m,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),n.jsxs("div",{className:"quiz-editor__options-row",children:[n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:b,onChange:H=>_(H.target.checked)}),n.jsx("span",{children:" Premium"})]}),n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:C,onChange:H=>z(H.target.checked)}),n.jsx("span",{children:" Mlanger les questions"})]}),n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:w,onChange:H=>E(H.target.checked)}),n.jsx("span",{children:" Mlanger les options QCM"})]}),n.jsxs("label",{className:"quiz-editor__checkbox",children:[n.jsx("input",{type:"checkbox",checked:O,onChange:H=>P(H.target.checked)}),n.jsx("span",{children:" Afficher la correction"})]})]})]}),n.jsxs("div",{className:"quiz-editor__section",children:[n.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),n.jsx("div",{className:"quiz-editor__questions-list",children:D.map((H,de)=>n.jsx(d3,{question:H,index:de,isActive:$===de,onToggle:()=>B($===de?null:de),onUpdate:Ee=>me(de,Ee),onDelete:()=>U(de),onDuplicate:()=>ge(de),onMoveUp:()=>ee(de,"up"),onMoveDown:()=>ee(de,"down"),isFirst:de===0,isLast:de===D.length-1},H.id))}),n.jsxs("div",{className:"quiz-editor__add-wrapper",children:[n.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>Q(!J),children:"+ Ajouter une question"}),J&&n.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(Bl).map(H=>n.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>ve(H),children:[n.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:Wd[H]},children:Xd[H]}),n.jsx("span",{children:Bl[H]})]},H))})]})]}),n.jsxs("div",{className:"quiz-editor__actions",children:[n.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:l,disabled:le,children:"Annuler"}),n.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:xe,disabled:le||D.length===0,children:le?" Sauvegarde...":e?" Mettre  jour":" Crer le quiz"})]})]})},d3=({question:e,index:t,isActive:r,onToggle:a,onUpdate:l,onDelete:o,onDuplicate:u,onMoveUp:d,onMoveDown:m,isFirst:h,isLast:p})=>{const v=Wd[e.type],x=Xd[e.type],b=Bl[e.type],_=N=>{const S=N.replace(/<[^>]*>/g,"").trim();return S.length>80?S.substring(0,80)+"...":S||"(sans nonc)"};return n.jsxs("div",{className:`question-editor ${r?"question-editor--active":""}`,style:{borderLeftColor:v},children:[n.jsxs("div",{className:"question-editor__header",onClick:a,children:[n.jsxs("div",{className:"question-editor__header-left",children:[n.jsx("span",{className:"question-editor__number",children:t+1}),n.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:v},children:[x," ",b]}),!r&&n.jsx("span",{className:"question-editor__preview",children:_(e.enonce)})]}),n.jsxs("div",{className:"question-editor__header-right",children:[n.jsxs("span",{className:"question-editor__points",children:[e.points," pts"]}),n.jsx("span",{className:"question-editor__toggle",children:r?"":""})]})]}),r&&n.jsxs("div",{className:"question-editor__body",children:[n.jsxs("div",{className:"question-editor__toolbar",children:[n.jsx("button",{type:"button",onClick:d,disabled:h,title:"Monter",children:""}),n.jsx("button",{type:"button",onClick:m,disabled:p,title:"Descendre",children:""}),n.jsx("button",{type:"button",onClick:u,title:"Dupliquer",children:""}),n.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),n.jsxs("div",{className:"question-editor__field",children:[n.jsx("label",{children:"nonc de la question *"}),n.jsx(Pa,{value:e.enonce,onChange:N=>l({enonce:N}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),n.jsxs("div",{className:"question-editor__params",children:[n.jsxs("div",{className:"question-editor__param",children:[n.jsx("label",{children:"Difficult"}),n.jsxs("select",{value:e.difficulte,onChange:N=>l({difficulte:N.target.value}),children:[n.jsx("option",{value:"facile",children:" Facile"}),n.jsx("option",{value:"moyen",children:" Moyen"}),n.jsx("option",{value:"difficile",children:" Difficile"})]})]}),n.jsxs("div",{className:"question-editor__param",children:[n.jsx("label",{children:"Points"}),n.jsx("input",{type:"number",value:e.points,onChange:N=>l({points:Number(N.target.value)}),min:1,max:20})]})]}),n.jsxs("div",{className:"question-editor__type-specific",children:[e.type==="qcm_unique"&&n.jsx(f3,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="qcm_multiple"&&n.jsx(m3,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="drag_drop"&&n.jsx(h3,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="mise_en_relation"&&n.jsx(p3,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="essai"&&n.jsx(v3,{data:e.typeData,onChange:N=>l({typeData:N})})]}),n.jsxs("div",{className:"question-editor__field",children:[n.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),n.jsx(Pa,{value:e.explication||"",onChange:N=>l({explication:N}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},f3=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.options.map((m,h)=>h===o?{...m,...u}:u.isCorrect===!0?{...m,isCorrect:!1}:m);t({options:d})},a=()=>{e.options.length>=6||t({options:[...e.options,{id:Bt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({options:e.options.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),e.options.map((o,u)=>n.jsxs("div",{className:"type-editor__option-row",children:[n.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>r(u,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),n.jsx("div",{className:"type-editor__option-text",children:n.jsx(Pa,{value:o.texte,onChange:d=>r(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&n.jsx("span",{className:"type-editor__correct-badge",children:""}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),e.options.length<6&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"})]})},m3=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.options.map((m,h)=>h===o?{...m,...u}:m);t({...e,options:d})},a=()=>{e.options.length>=8||t({...e,options:[...e.options,{id:Bt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({...e,options:e.options.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),e.options.map((o,u)=>n.jsxs("div",{className:"type-editor__option-row",children:[n.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:d=>r(u,{isCorrect:d.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),n.jsx("div",{className:"type-editor__option-text",children:n.jsx(Pa,{value:o.texte,onChange:d=>r(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&n.jsx("span",{className:"type-editor__correct-badge",children:""}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,children:""})]},o.id)),e.options.length<8&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"}),n.jsxs("label",{className:"type-editor__sub-option",children:[n.jsx("input",{type:"checkbox",checked:e.scoringPartiel,onChange:o=>t({...e,scoringPartiel:o.target.checked})}),n.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},h3=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.items.map((m,h)=>h===o?{...m,...u}:m);t({...e,items:d})},a=()=>{e.items.length>=10||t({...e,items:[...e.items,{id:Bt("item"),texte:"",ordreCorrect:e.items.length+1}]})},l=o=>{if(e.items.length<=2)return;const u=e.items.filter((d,m)=>m!==o).map((d,m)=>({...d,ordreCorrect:m+1}));t({...e,items:u})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),n.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),n.jsxs("div",{className:"type-editor__field-inline",children:[n.jsx("label",{children:"Consigne :"}),n.jsx("input",{type:"text",value:e.consigneOrdre,onChange:o=>t({...e,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),e.items.map((o,u)=>n.jsxs("div",{className:"type-editor__drag-row",children:[n.jsx("span",{className:"type-editor__drag-number",children:u+1}),n.jsx("div",{className:"type-editor__option-text",children:n.jsx(Pa,{value:o.texte,onChange:d=>r(u,{texte:d}),placeholder:`lment ${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.items.length<=2,children:""})]},o.id)),e.items.length<10&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter un lment"})]})},p3=({data:e,onChange:t})=>{const r=(o,u)=>{const d=e.paires.map((m,h)=>h===o?{...m,...u}:m);t({paires:d})},a=()=>{e.paires.length>=8||t({paires:[...e.paires,{id:Bt("pair"),gauche:"",droite:""}]})},l=o=>{e.paires.length<=2||t({paires:e.paires.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),n.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),n.jsxs("div",{className:"type-editor__relation-header",children:[n.jsx("span",{children:"Colonne A (gauche)"}),n.jsx("span",{}),n.jsx("span",{children:"Colonne B (droite)"}),n.jsx("span",{})]}),e.paires.map((o,u)=>n.jsxs("div",{className:"type-editor__relation-row",children:[n.jsx("div",{className:"type-editor__relation-cell",children:n.jsx(Pa,{value:o.gauche,onChange:d=>r(u,{gauche:d}),placeholder:`lment A${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),n.jsx("span",{className:"type-editor__relation-arrow",children:""}),n.jsx("div",{className:"type-editor__relation-cell",children:n.jsx(Pa,{value:o.droite,onChange:d=>r(u,{droite:d}),placeholder:`lment B${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.paires.length<=2,children:""})]},o.id)),e.paires.length<8&&n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une paire"})]})},v3=({data:e,onChange:t})=>{const r=()=>{t({...e,motsCles:[...e.motsCles,{mot:"",poids:1,obligatoire:!1}]})},a=(o,u)=>{const d=e.motsCles.map((m,h)=>h===o?{...m,...u}:m);t({...e,motsCles:d})},l=o=>{t({...e,motsCles:e.motsCles.filter((u,d)=>d!==o)})};return n.jsxs("div",{className:"type-editor",children:[n.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),n.jsxs("div",{className:"type-editor__params-row",children:[n.jsxs("div",{className:"type-editor__param-inline",children:[n.jsx("label",{children:"Mots minimum :"}),n.jsx("input",{type:"number",value:e.nombreMotsMin||"",onChange:o=>t({...e,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),n.jsxs("div",{className:"type-editor__param-inline",children:[n.jsx("label",{children:"Mots maximum :"}),n.jsx("input",{type:"number",value:e.nombreMotsMax||"",onChange:o=>t({...e,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),n.jsxs("div",{className:"type-editor__field-inline",children:[n.jsx("label",{children:"Mode de correction :"}),n.jsxs("select",{value:e.correctionMode,onChange:o=>t({...e,correctionMode:o.target.value}),children:[n.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),n.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),n.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(e.correctionMode==="mots_cles"||e.correctionMode==="semi_auto")&&n.jsxs("div",{className:"type-editor__keywords",children:[n.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),e.motsCles.map((o,u)=>n.jsxs("div",{className:"type-editor__keyword-row",children:[n.jsx("input",{type:"text",value:o.mot,onChange:d=>a(u,{mot:d.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),n.jsxs("select",{value:o.poids,onChange:d=>a(u,{poids:Number(d.target.value)}),className:"type-editor__keyword-weight",children:[n.jsx("option",{value:1,children:"Poids 1"}),n.jsx("option",{value:2,children:"Poids 2"}),n.jsx("option",{value:3,children:"Poids 3"}),n.jsx("option",{value:4,children:"Poids 4"}),n.jsx("option",{value:5,children:"Poids 5"})]}),n.jsxs("label",{className:"type-editor__keyword-required",children:[n.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:d=>a(u,{obligatoire:d.target.checked})}),n.jsx("span",{children:"Obligatoire"})]}),n.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),children:""})]},u)),n.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter un mot-cl"})]}),n.jsxs("div",{className:"type-editor__field-block",children:[n.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),n.jsx(Pa,{value:e.reponseModele||"",onChange:o=>t({...e,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},u_=()=>{const{quizId:e}=Kl(),t=Yt(),{currentUser:r}=Ct(),[a,l]=y.useState([]),[o,u]=y.useState(void 0),[d,m]=y.useState(!0),[h,p]=y.useState(null);return y.useEffect(()=>{(async()=>{try{m(!0);const x=await $i.getAll();if(l(x.map(b=>({id:b.id,nom:b.nom,classe:b.classe||""}))),e){const b=await M2(e);b?u(b):p("Quiz introuvable")}}catch(x){console.error("Erreur chargement donnes:",x),p(x.message||"Erreur de chargement")}finally{m(!1)}})()},[e]),d?n.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:n.jsx("p",{children:" Chargement..."})}):h?n.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[n.jsxs("p",{style:{color:"#dc2626"},children:[" ",h]}),n.jsx("button",{onClick:()=>t(-1),children:" Retour"})]}):n.jsx(u3,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:a,auteurId:r?.uid||"",onSave:v=>{alert(" Quiz sauvegard avec succs !"),t("/admin/quiz")},onCancel:()=>t(-1)})},g3=()=>{const e=Yt(),{currentUser:t}=Ct(),[r,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,h]=y.useState(null);y.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0),d(null);const N=await l3();a(N)}catch(N){console.error("Erreur chargement quiz:",N),d("Impossible de charger les quiz")}finally{o(!1)}},v=async N=>{try{await s3(N),a(S=>S.filter(C=>C.id!==N)),h(null)}catch(S){console.error("Erreur suppression:",S),alert("Erreur lors de la suppression : "+S.message)}},x=N=>{const S={};return N.questions.forEach(C=>{S[C.type]=(S[C.type]||0)+1}),Object.entries(S).map(([C,z])=>`${z} ${Bl[C]||C}`).join(", ")},b=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",_=N=>N.questions.reduce((S,C)=>S+C.points,0);return n.jsxs("div",{style:{padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),n.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[r.length," quiz cr",r.length!==1?"s":""]})]}),n.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),u&&n.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",u,n.jsx("button",{onClick:p,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),l&&n.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!l&&r.length===0&&!u&&n.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),n.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),n.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),n.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!l&&r.length>0&&n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.map(N=>n.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[n.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[n.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:N.titre}),N.isPremium&&n.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[n.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N.questions.length," question",N.questions.length!==1?"s":""]}),n.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",_(N)," pts"]}),n.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N.duree," min"]})]}),n.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",x(N)]}),n.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",b(N.createdAt)]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[n.jsx("button",{onClick:()=>e(`/quiz-avance/${N.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),n.jsx("button",{onClick:()=>e(`/admin/quiz/modifier/${N.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),n.jsx("button",{onClick:()=>{const S=`${window.location.origin}/quiz-avance/${N.id}`;navigator.clipboard.writeText(S).then(()=>{alert(` Lien copi !

`+S+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),m===N.id?n.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[n.jsx("button",{onClick:()=>v(N.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),n.jsx("button",{onClick:()=>h(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):n.jsx("button",{onClick:()=>h(N.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},N.id))})]})},x3=({quiz:e,userId:t,onComplete:r,onQuit:a})=>{const l=y.useMemo(()=>{let T=[...e.questions];return e.melangerQuestions&&(T=T.sort(()=>Math.random()-.5)),T},[e]),[o,u]=y.useState(0),[d,m]=y.useState(new Map),[h,p]=y.useState(e.duree*60),[v,x]=y.useState(!1),[b,_]=y.useState(null),[N,S]=y.useState(!1),C=y.useRef(Date.now());y.useEffect(()=>{if(b)return;const T=setInterval(()=>{p(D=>D<=1?(clearInterval(T),P(),0):D-1)},1e3);return()=>clearInterval(T)},[b]);const z=T=>{const D=Math.floor(T/60),k=T%60;return`${D.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`},w=l[o],E=y.useCallback((T,D)=>{m(k=>{const $=new Map(k),B=$.get(T)||{questionId:T,type:w.type};return $.set(T,{...B,...D}),$})},[w]),O=T=>{T>=0&&T<l.length&&u(T)},P=async()=>{S(!1),x(!0);try{const T=Array.from(d.values()),D=Math.round((Date.now()-C.current)/1e3),k=await c3(e,t,T,D);_(k),r?.(k)}catch(T){alert("Erreur lors de la soumission : "+T.message)}finally{x(!1)}},L=d.size;return b?n.jsx("div",{className:"quiz-player quiz-player--results",children:n.jsxs("div",{className:"quiz-results",children:[n.jsxs("div",{className:`quiz-results__header ${b.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[n.jsx("div",{className:"quiz-results__emoji",children:b.reussi?"":""}),n.jsx("h2",{children:b.reussi?"Flicitations !":"Quiz termin"}),n.jsxs("div",{className:"quiz-results__score",children:[n.jsxs("span",{className:"quiz-results__note",children:[b.note20,"/20"]}),n.jsxs("span",{className:"quiz-results__detail",children:[b.score,"/",b.scoreMax," points"]})]}),n.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",z(b.tempsEcoule)]}),b.correctionManuelle&&n.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),e.afficherCorrection&&n.jsxs("div",{className:"quiz-results__details",children:[n.jsx("h3",{children:" Dtail des rponses"}),l.map((T,D)=>{const k=b.detailsParQuestion.find($=>$.questionId===T.id);return n.jsxs("div",{className:`quiz-results__question ${k?.isCorrect?"quiz-results__question--correct":k?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[n.jsxs("div",{className:"quiz-results__q-header",children:[n.jsxs("span",{children:["Q",D+1," "," ",n.jsxs("span",{style:{color:Wd[T.type]},children:[Xd[T.type]," ",Bl[T.type]]})]}),n.jsxs("span",{className:"quiz-results__q-score",children:[k?.pointsObtenus||0,"/",k?.pointsMax||T.points," pts",k?.isCorrect&&" ",k?.isPartiel&&" ",!k?.isCorrect&&!k?.isPartiel&&" "]})]}),n.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:T.enonce}}),T.explication&&n.jsxs("div",{className:"quiz-results__q-explanation",children:[n.jsx("strong",{children:" Explication :"}),n.jsx("div",{dangerouslySetInnerHTML:{__html:T.explication}})]})]},T.id)})]}),n.jsx("div",{className:"quiz-results__actions",children:n.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:a,children:"Retour au tableau de bord"})})]})}):n.jsxs("div",{className:"quiz-player",children:[n.jsxs("div",{className:"quiz-player__topbar",children:[n.jsxs("div",{className:"quiz-player__info",children:[n.jsx("span",{className:"quiz-player__title",children:e.titre}),n.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",l.length]})]}),n.jsxs("div",{className:"quiz-player__topbar-right",children:[n.jsxs("span",{className:`quiz-player__timer ${h<60?"quiz-player__timer--danger":h<300?"quiz-player__timer--warning":""}`,children:[" ",z(h)]}),n.jsxs("span",{className:"quiz-player__answered",children:[L,"/",l.length," rpondue",L>1?"s":""]})]})]}),n.jsx("div",{className:"quiz-player__progress-bar",children:n.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/l.length*100}%`}})}),n.jsxs("div",{className:"quiz-player__question-area",children:[n.jsxs("div",{className:"quiz-player__question-meta",children:[n.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:Wd[w.type]},children:[Xd[w.type]," ",Bl[w.type]]}),n.jsxs("span",{className:"quiz-player__points",children:[w.points," point",w.points>1?"s":""]})]}),n.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:w.enonce}}),n.jsxs("div",{className:"quiz-player__answer-area",children:[w.type==="qcm_unique"&&n.jsx(y3,{question:w,reponse:d.get(w.id),onUpdate:T=>E(w.id,T),melangerOptions:e.melangerOptions}),w.type==="qcm_multiple"&&n.jsx(b3,{question:w,reponse:d.get(w.id),onUpdate:T=>E(w.id,T),melangerOptions:e.melangerOptions}),w.type==="drag_drop"&&n.jsx(j3,{question:w,reponse:d.get(w.id),onUpdate:T=>E(w.id,T)}),w.type==="mise_en_relation"&&n.jsx(N3,{question:w,reponse:d.get(w.id),onUpdate:T=>E(w.id,T)}),w.type==="essai"&&n.jsx(_3,{question:w,reponse:d.get(w.id),onUpdate:T=>E(w.id,T)})]})]}),n.jsxs("div",{className:"quiz-player__nav",children:[n.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>O(o-1),disabled:o===0,children:" Prcdent"}),n.jsx("div",{className:"quiz-player__pagination",children:l.map((T,D)=>n.jsx("button",{className:`quiz-player__page-dot ${D===o?"quiz-player__page-dot--current":""} ${d.has(T.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>O(D),title:`Question ${D+1}`,children:D+1},T.id))}),o<l.length-1?n.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>O(o+1),children:"Suivant "}):n.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>S(!0),disabled:v,children:v?" Envoi...":" Soumettre le quiz"})]}),N&&n.jsx("div",{className:"quiz-player__modal-overlay",children:n.jsxs("div",{className:"quiz-player__modal",children:[n.jsx("h3",{children:"Soumettre le quiz ?"}),n.jsxs("p",{children:["Vous avez rpondu  ",n.jsx("strong",{children:L})," question",L>1?"s":""," sur"," ",n.jsx("strong",{children:l.length}),"."]}),L<l.length&&n.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",l.length-L," question",l.length-L>1?"s":""," sans rponse !"]}),n.jsxs("div",{className:"quiz-player__modal-actions",children:[n.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>S(!1),children:"Continuer le quiz"}),n.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:P,children:"Confirmer la soumission"})]})]})})]})},y3=({question:e,reponse:t,onUpdate:r,melangerOptions:a})=>{const l=e.typeData,o=y.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]);return n.jsx("div",{className:"player-qcm",children:o.map(u=>n.jsxs("label",{className:`player-qcm__option ${t?.selectedOptionId===u.id?"player-qcm__option--selected":""}`,children:[n.jsx("input",{type:"radio",name:`q_${e.id}`,checked:t?.selectedOptionId===u.id,onChange:()=>r({selectedOptionId:u.id})}),n.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:u.texte}})]},u.id))})},b3=({question:e,reponse:t,onUpdate:r,melangerOptions:a})=>{const l=e.typeData,o=y.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]),u=t?.selectedOptionIds||[],d=m=>{const h=u.includes(m)?u.filter(p=>p!==m):[...u,m];r({selectedOptionIds:h})};return n.jsxs("div",{className:"player-qcm",children:[n.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(m=>n.jsxs("label",{className:`player-qcm__option ${u.includes(m.id)?"player-qcm__option--selected":""}`,children:[n.jsx("input",{type:"checkbox",checked:u.includes(m.id),onChange:()=>d(m.id)}),n.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:m.texte}})]},m.id))]})},j3=({question:e,reponse:t,onUpdate:r})=>{const a=e.typeData,[l,o]=y.useState(()=>t?.ordrePropose?t.ordrePropose.map(x=>a.items.find(b=>b.id===x)).filter(Boolean):[...a.items].sort(()=>Math.random()-.5)),[u,d]=y.useState(null);y.useEffect(()=>{r({ordrePropose:l.map(x=>x.id)})},[l]);const m=x=>{d(x)},h=(x,b)=>{if(x.preventDefault(),u===null||u===b)return;const _=[...l],[N]=_.splice(u,1);_.splice(b,0,N),o(_),d(b)},p=()=>{d(null)},v=(x,b)=>{const _=b==="up"?x-1:x+1;if(_<0||_>=l.length)return;const N=[...l];[N[x],N[_]]=[N[_],N[x]],o(N)};return n.jsxs("div",{className:"player-dragdrop",children:[n.jsx("p",{className:"player-dragdrop__consigne",children:a.consigneOrdre}),n.jsx("div",{className:"player-dragdrop__list",children:l.map((x,b)=>n.jsxs("div",{className:`player-dragdrop__item ${u===b?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>m(b),onDragOver:_=>h(_,b),onDragEnd:p,children:[n.jsx("span",{className:"player-dragdrop__handle",children:""}),n.jsx("span",{className:"player-dragdrop__number",children:b+1}),n.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:x.texte}}),n.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[n.jsx("button",{type:"button",onClick:()=>v(b,"up"),disabled:b===0,children:""}),n.jsx("button",{type:"button",onClick:()=>v(b,"down"),disabled:b===l.length-1,children:""})]})]},x.id))})]})},N3=({question:e,reponse:t,onUpdate:r})=>{const a=e.typeData,l=y.useMemo(()=>[...a.paires].sort(()=>Math.random()-.5),[a.paires]),[o,u]=y.useState(t?.relationsProposees||{}),[d,m]=y.useState(null);y.useEffect(()=>{r({relationsProposees:o})},[o]);const h=b=>{m(b)},p=b=>{d&&(u(_=>({..._,[d]:b})),m(null))},v=b=>{u(_=>{const N={..._};return delete N[b],N})},x=new Set(Object.values(o));return n.jsxs("div",{className:"player-relation",children:[n.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),n.jsxs("div",{className:"player-relation__columns",children:[n.jsxs("div",{className:"player-relation__col",children:[n.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),a.paires.map(b=>n.jsxs("div",{className:`player-relation__item player-relation__item--left ${d===b.id?"player-relation__item--selected":""} ${o[b.id]?"player-relation__item--matched":""}`,onClick:()=>{o[b.id]?v(b.id):h(b.id)},children:[n.jsx("div",{dangerouslySetInnerHTML:{__html:b.gauche}}),o[b.id]&&n.jsx("span",{className:"player-relation__linked",children:""})]},b.id))]}),n.jsxs("div",{className:"player-relation__col",children:[n.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),l.map(b=>n.jsxs("div",{className:`player-relation__item player-relation__item--right ${x.has(b.id)?"player-relation__item--matched":""} ${d&&!x.has(b.id)?"player-relation__item--clickable":""}`,onClick:()=>{d&&!x.has(b.id)&&p(b.id)},children:[n.jsx("div",{dangerouslySetInnerHTML:{__html:b.droite}}),x.has(b.id)&&n.jsx("span",{className:"player-relation__linked",children:""})]},b.id))]})]})]})},_3=({question:e,reponse:t,onUpdate:r})=>{const a=e.typeData,[l,o]=y.useState(t?.texteReponse||""),u=l.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return y.useEffect(()=>{r({texteReponse:l})},[l]),n.jsxs("div",{className:"player-essai",children:[n.jsxs("div",{className:"player-essai__info",children:[a.nombreMotsMin&&n.jsxs("span",{className:u<a.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",a.nombreMotsMin," mots"]}),a.nombreMotsMax&&n.jsxs("span",{className:u>a.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",a.nombreMotsMax," mots"]}),n.jsxs("span",{className:"player-essai__count",children:[u," mot",u>1?"s":""]})]}),n.jsx("textarea",{className:"player-essai__textarea",value:l,onChange:d=>o(d.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},S3=()=>{const{quizId:e}=Kl(),t=Yt(),{currentUser:r}=Ct(),[a,l]=y.useState(null),[o,u]=y.useState(!0),[d,m]=y.useState(null);return y.useEffect(()=>{(async()=>{if(!e){m("ID du quiz manquant"),u(!1);return}try{const p=await M2(e);if(!p){m("Quiz introuvable");return}if(p.isPremium&&!r?.isPremium){m("Ce quiz est rserv aux abonns Premium");return}l(p)}catch(p){console.error("Erreur chargement quiz:",p),m(p.message||"Impossible de charger le quiz")}finally{u(!1)}})()},[e,r]),o?n.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),n.jsx("p",{children:"Chargement du quiz..."})]}):d?n.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:n.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),n.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:d}),d.includes("Premium")&&n.jsx("button",{onClick:()=>t("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),n.jsx("button",{onClick:()=>t(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):a?n.jsx(x3,{quiz:a,userId:r?.uid||"",onComplete:h=>{console.log(" Quiz termin  Note:",h.note20,"/20")},onQuit:()=>t("/dashboard")}):n.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[n.jsx("p",{children:"Quiz introuvable"}),n.jsx("button",{onClick:()=>t(-1),children:" Retour"})]})},T2=je(se,"quiz_results"),fy=je(se,"progressions"),w3=async e=>{try{const t=await nr(T2,{...e,datePassage:He.now()});return e.reussi&&await D3(e.userId,e.disciplineId,e.disciplineNom,e.quizId),t.id}catch(t){throw console.error("Erreur lors de la sauvegarde du rsultat :",t),t}},Zf=async(e,t)=>{try{let r=qe(T2,we("userId","==",e),nt("datePassage","desc"));return t&&(r=qe(r,Sn(t))),(await ke(r)).docs.map(l=>({id:l.id,...l.data()}))}catch(r){throw console.error("Erreur rcupration historique :",r),r}},C3=async e=>{try{const t=await Zf(e);if(t.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const r=t.reduce((p,v)=>p+v.pourcentage,0),a=Math.round(r/t.length),l=Math.max(...t.map(p=>p.pourcentage)),o=t.reduce((p,v)=>p+(v.tempsEcoule||0),0),u=t.filter(p=>p.reussi).length;let d=0,m=0;for(const p of t)p.reussi?(d++,m=Math.max(m,d)):d=0;let h=0;for(const p of t)if(p.reussi)h++;else break;return{totalQuizPasses:t.length,totalQuizReussis:u,moyenneGenerale:a,tempsTotal:o,meilleurScore:l,serieReussites:h,meilleureSerieReussites:Math.max(m,h)}}catch(t){return console.error("Erreur calcul stats :",t),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},A3=async e=>{try{const t=await Zf(e);if(t.length===0)return[];const r={};for(const a of t){const l=a.disciplineId;r[l]||(r[l]=[]),r[l].push(a)}return Object.entries(r).map(([a,l])=>{const o=Math.round(l.reduce((v,x)=>v+x.pourcentage,0)/l.length),u=Math.max(...l.map(v=>v.pourcentage)),d=l[0].pourcentage,m=l.filter(v=>v.reussi).length,h=l.reduce((v,x)=>v+(x.tempsEcoule||0),0);let p="stable";if(l.length>=4){const v=l.slice(0,3),x=l.slice(3,6),b=v.reduce((N,S)=>N+S.pourcentage,0)/v.length,_=x.reduce((N,S)=>N+S.pourcentage,0)/x.length;b-_>5?p="up":_-b>5&&(p="down")}return{disciplineId:a,disciplineNom:l[0].disciplineNom||a,nombreQuiz:l.length,moyenne:o,meilleurScore:u,dernierScore:d,quizReussis:m,tempsTotal:h,tendance:p}})}catch(t){return console.error("Erreur progression par discipline :",t),[]}},E3=async(e,t)=>{try{return(await Zf(e,t||20)).reverse().map(a=>({date:(a.datePassage?.toDate?a.datePassage.toDate():new Date(a.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:a.pourcentage,discipline:a.disciplineNom||a.disciplineId}))}catch(r){return console.error("Erreur donnes temporelles :",r),[]}},z3=async(e,t,r)=>{const a=`${e}_${t}`,l=be(fy,a),o=await Vt(l);if(o.exists())return{...o.data()};const[u,d]=await Promise.all([d_("ressources",t),d_("quizzes",t)]),m={userId:e,disciplineId:t,disciplineNom:r,ressourcesVues:[],quizReussis:[],totalRessources:u,totalQuiz:d,pourcentage:0,dernierAcces:He.now(),createdAt:He.now(),updatedAt:He.now()};return await Xf(l,m),m},d_=async(e,t)=>{try{const r=qe(je(se,e),we("disciplineId","==",t));return(await ke(r)).size}catch{return 0}},O3=e=>{if(e.totalRessources+e.totalQuiz===0)return 0;const r=e.totalRessources>0?e.ressourcesVues.length/e.totalRessources*40:0,a=e.totalQuiz>0?e.quizReussis.length/e.totalQuiz*60:0;return e.totalRessources===0?Math.min(100,Math.round(e.quizReussis.length/e.totalQuiz*100)):e.totalQuiz===0?Math.min(100,Math.round(e.ressourcesVues.length/e.totalRessources*100)):Math.min(100,Math.round(r+a))},D3=async(e,t,r,a)=>{try{const l=`${e}_${t}`,o=be(fy,l),u=await z3(e,t,r);if(u.quizReussis.includes(a))return await We(o,{dernierAcces:He.now()}),u;const d=[...u.quizReussis,a],m={...u,quizReussis:d,dernierAcces:He.now(),updatedAt:He.now(),pourcentage:0};return m.pourcentage=O3(m),await Xf(o,m),m}catch(l){throw console.error("Erreur enregistrement quiz russi :",l),l}},M3=async e=>{try{const t=qe(fy,we("userId","==",e));return(await ke(t)).docs.map(a=>a.data())}catch(t){return console.error("Erreur rcupration progressions :",t),[]}},T3=async e=>{try{const t=await M3(e),r=await P2(e),a=t.reduce((d,m)=>d+m.ressourcesVues.length,0),l=t.reduce((d,m)=>d+m.quizReussis.length,0),o=t.length>0?Math.round(t.reduce((d,m)=>d+m.pourcentage,0)/t.length):0,u=t.filter(d=>d.pourcentage>=100).length;return{totalRessourcesVues:a,totalQuizReussis:l,pourcentageMoyen:o,disciplinesCommencees:t.length,disciplinesCompletees:u,streakActuel:r.streakActuel,meilleurStreak:r.meilleurStreak,parDiscipline:t}}catch(t){return console.error("Erreur progression globale :",t),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},P3=()=>new Date().toISOString().split("T")[0],k3=()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]},P2=async e=>{try{const t=be(se,"users",e),r=await Vt(t);if(!r.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const a=r.data();return{streakActuel:a.streakActuel||0,meilleurStreak:a.meilleurStreak||0,dernierJourAcces:a.dernierJourAcces||""}}catch(t){return console.error("Erreur rcupration streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},q3=async e=>{try{const t=be(se,"users",e),r=await P2(e),a=P3();if(r.dernierJourAcces===a)return r;const l=k3();let o;r.dernierJourAcces===l?o=r.streakActuel+1:o=1;const u=Math.max(r.meilleurStreak,o);return await We(t,{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}),{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}}catch(t){return console.error("Erreur mise  jour streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},R3=(e,t,r)=>{const a=r?.totalRessourcesVues||0;r?.totalQuizReussis;const l=r?.disciplinesCompletees||0;r?.streakActuel;const o=r?.meilleurStreak||0,u=r?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:a>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:a>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:a>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:a>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:e.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:e.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:e.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:e.moyenneGenerale>=80&&e.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:l>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:u>=3||t.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:u>=5||t.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:a>=50&&e.totalQuizReussis>=20}]},k2=e=>{if(e<60)return`${e} s`;const t=Math.floor(e/60),r=e%60;return r>0?`${t} min ${r.toString().padStart(2,"0")} s`:`${t} min`},Ml=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":"#ef4444",q2=e=>e>=80?"Excellent":e>=60?"Bien":e>=40?"Passable":" amliorer",L3=()=>{const{quizId:e}=Kl(),t=Yt(),{currentUser:r}=Ct(),[a,l]=y.useState(null),[o,u]=y.useState(""),[d,m]=y.useState(!0),[h,p]=y.useState(null),[v,x]=y.useState("intro"),[b,_]=y.useState(0),[N,S]=y.useState({}),[C,z]=y.useState(0),[w,E]=y.useState(0),O=y.useRef(null),[P,L]=y.useState(0),[T,D]=y.useState(0),[k,$]=y.useState(0),[B,le]=y.useState(!1),[oe,F]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e){p("ID du quiz manquant."),m(!1);return}try{const H=await Rq(e);if(!H){p("Quiz introuvable."),m(!1);return}l(H),z(H.duree*60);try{const Ee=(await $i.getAll()).find(ne=>ne.id===H.disciplineId);u(Ee?.nom||H.disciplineId)}catch{u(H.disciplineId)}}catch(H){p("Erreur lors du chargement du quiz."),console.error(H)}finally{m(!1)}})()},[e]),y.useEffect(()=>{if(v==="playing")return O.current=setInterval(()=>{z(pe=>pe<=1?(clearInterval(O.current),ve(),0):pe-1),E(pe=>pe+1)},1e3),()=>{O.current&&clearInterval(O.current)}},[v]);const q=()=>{x("playing"),_(0),S({}),E(0),a&&z(a.duree*60)},J=(pe,H)=>{S(de=>({...de,[pe]:H}))},Q=pe=>{a&&pe>=0&&pe<a.questions.length&&_(pe)},ve=y.useCallback(async()=>{if(!a||!r||v==="review")return;O.current&&clearInterval(O.current);let pe=0,H=0,de=0;a.questions.forEach(Y=>{const I=Y.points||1;H+=I,N[Y.id]===Y.reponseCorrecte&&(pe+=I,de++)});const Ee=H>0?Math.round(pe/H*100):0,ne=Ee>=(a.noteMinimale||50);L(pe),D(H),$(de),x("review"),le(!0);try{const Y={quizId:a.id,quizTitre:a.titre,disciplineId:a.disciplineId,disciplineNom:o,userId:r.uid,reponses:a.questions.map(I=>N[I.id]??-1),tempsEcoule:w,score:pe,totalPoints:H,pourcentage:Ee,reussi:ne,nombreQuestions:a.questions.length,bonnesReponses:de};await w3(Y),F(!0)}catch(Y){console.error("Erreur lors de la sauvegarde :",Y)}finally{le(!1)}},[a,r,N,w,o,v]),U=pe=>{const H=Math.floor(pe/60),de=pe%60;return`${H.toString().padStart(2,"0")}:${de.toString().padStart(2,"0")}`},ge=()=>{if(!a)return"";const pe=a.duree*60,H=C/pe;return H<=.1?"timer-critical":H<=.25?"timer-warning":""},ee=Object.keys(N).length;if(d)return n.jsxs("div",{className:"quiz-player-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement du quiz..."})]});if(h||!a)return n.jsxs("div",{className:"quiz-player-error",children:[n.jsx(Kd,{size:48}),n.jsx("h3",{children:h||"Quiz introuvable"}),n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[n.jsx(rx,{size:18})," Retour au tableau de bord"]})]});if(a.isPremium&&!r?.isPremium)return n.jsx("div",{className:"quiz-player-locked",children:n.jsxs("div",{className:"qp-locked-card",children:[n.jsx(ax,{size:48}),n.jsx("h3",{children:"Quiz Premium"}),n.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),n.jsxs("p",{className:"qp-locked-price",children:[" partir de ",n.jsx("strong",{children:"2 000 FCFA/mois"})]}),n.jsxs("div",{className:"qp-locked-actions",children:[n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/premium"),children:[n.jsx(Wr,{size:18})," Devenir Premium"]}),n.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>t("/eleve/dashboard"),children:[n.jsx(ov,{size:18})," Retour"]})]})]})});if(v==="intro")return n.jsx("div",{className:"quiz-player-intro",children:n.jsxs("div",{className:"qp-intro-card",children:[n.jsxs("div",{className:"qp-intro-header",children:[n.jsxs("button",{className:"qp-back-btn",onClick:()=>t(-1),children:[n.jsx(ov,{size:20})," Retour"]}),a.isPremium&&n.jsxs("span",{className:"qp-badge qp-badge-premium",children:[n.jsx(Wr,{size:12})," Premium"]})]}),n.jsxs("div",{className:"qp-intro-content",children:[n.jsx("h1",{className:"qp-intro-title",children:a.titre}),n.jsx("span",{className:"qp-intro-discipline",children:o}),n.jsxs("div",{className:"qp-intro-stats",children:[n.jsxs("div",{className:"qp-intro-stat",children:[n.jsx(Nn,{size:20}),n.jsxs("div",{children:[n.jsx("span",{className:"qp-intro-stat-value",children:a.questions.length}),n.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),n.jsxs("div",{className:"qp-intro-stat",children:[n.jsx($l,{size:20}),n.jsxs("div",{children:[n.jsxs("span",{className:"qp-intro-stat-value",children:[a.duree," min"]}),n.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),n.jsxs("div",{className:"qp-intro-stat",children:[n.jsx(Ri,{size:20}),n.jsxs("div",{children:[n.jsxs("span",{className:"qp-intro-stat-value",children:[a.noteMinimale||50,"%"]}),n.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),n.jsxs("div",{className:"qp-intro-instructions",children:[n.jsx("h3",{children:"Instructions"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),n.jsx("li",{children:"Chaque question a une seule bonne rponse"}),n.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),n.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),n.jsxs("li",{children:["Il faut obtenir au moins ",a.noteMinimale||50,"% pour russir"]})]})]})]}),n.jsxs("button",{className:"qp-btn qp-btn-start",onClick:q,children:[n.jsx(gc,{size:20})," Commencer le quiz"]})]})});if(v==="playing"){const pe=a.questions[b];return n.jsxs("div",{className:"quiz-player-game",children:[n.jsxs("div",{className:"qp-game-header",children:[n.jsxs("div",{className:"qp-game-info",children:[n.jsx("span",{className:"qp-game-title",children:a.titre}),n.jsx("span",{className:"qp-game-discipline",children:o})]}),n.jsxs("div",{className:`qp-timer ${ge()}`,children:[n.jsx(rq,{size:18}),n.jsx("span",{children:U(C)})]})]}),n.jsx("div",{className:"qp-progress-bar",children:n.jsx("div",{className:"qp-progress-fill",style:{width:`${(b+1)/a.questions.length*100}%`}})}),n.jsxs("div",{className:"qp-game-content",children:[n.jsxs("div",{className:"qp-question-header",children:[n.jsxs("span",{className:"qp-question-number",children:["Question ",b+1,"/",a.questions.length]}),n.jsxs("span",{className:"qp-question-points",children:[pe.points||1," pt(s)"]})]}),n.jsx("h2",{className:"qp-question-text",children:pe.question}),n.jsx("div",{className:"qp-options-list",children:pe.options.map((H,de)=>n.jsxs("button",{className:`qp-option ${N[pe.id]===de?"selected":""}`,onClick:()=>J(pe.id,de),children:[n.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+de)}),n.jsx("span",{className:"qp-option-text",children:H}),N[pe.id]===de&&n.jsx(Dt,{size:18,className:"qp-option-check"})]},de))})]}),n.jsxs("div",{className:"qp-game-footer",children:[n.jsx("div",{className:"qp-question-indicators",children:a.questions.map((H,de)=>n.jsx("button",{className:`qp-indicator ${de===b?"active":""} ${N[H.id]!==void 0?"answered":""}`,onClick:()=>Q(de),children:de+1},H.id))}),n.jsxs("div",{className:"qp-nav-buttons",children:[n.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>Q(b-1),disabled:b===0,children:[n.jsx(ov,{size:16})," Prcdent"]}),b<a.questions.length-1?n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>Q(b+1),children:["Suivant ",n.jsx(us,{size:16})]}):n.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:ve,disabled:ee<a.questions.length,children:[n.jsx(Dt,{size:16}),"Soumettre (",ee,"/",a.questions.length,")"]})]})]})]})}const me=T>0?Math.round(P/T*100):0,xe=me>=(a.noteMinimale||50);return n.jsxs("div",{className:"quiz-player-review",children:[n.jsxs("div",{className:`qp-score-card ${xe?"success":"fail"}`,children:[n.jsx("div",{className:"qp-score-icon",children:xe?n.jsx(Ri,{size:48}):n.jsx(Kd,{size:48})}),n.jsx("h2",{className:"qp-score-title",children:xe?"Flicitations ! ":"Continuez vos efforts ! "}),n.jsxs("div",{className:"qp-score-circle",style:{borderColor:Ml(me)},children:[n.jsxs("span",{className:"qp-score-value",children:[me,"%"]}),n.jsx("span",{className:"qp-score-label",children:q2(me)})]}),n.jsxs("div",{className:"qp-score-details",children:[n.jsxs("div",{className:"qp-score-detail",children:[n.jsxs("span",{children:[k,"/",a.questions.length]}),n.jsx("small",{children:"Bonnes rponses"})]}),n.jsxs("div",{className:"qp-score-detail",children:[n.jsxs("span",{children:[P,"/",T]}),n.jsx("small",{children:"Points"})]}),n.jsxs("div",{className:"qp-score-detail",children:[n.jsx("span",{children:k2(w)}),n.jsx("small",{children:"Temps"})]})]}),B&&n.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),oe&&n.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),n.jsxs("div",{className:"qp-review-actions",children:[n.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[n.jsx(rx,{size:18})," Tableau de bord"]}),n.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:q,children:[n.jsx(nq,{size:18})," Recommencer"]})]}),n.jsxs("div",{className:"qp-review-questions",children:[n.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),a.questions.map((pe,H)=>{const de=N[pe.id],Ee=de===pe.reponseCorrecte;return n.jsxs("div",{className:`qp-review-question ${Ee?"correct":"incorrect"}`,children:[n.jsxs("div",{className:"qp-review-question-header",children:[n.jsxs("span",{className:"qp-review-q-number",children:["Q",H+1]}),Ee?n.jsxs("span",{className:"qp-review-badge correct",children:[n.jsx(Dt,{size:14})," Correct"]}):n.jsxs("span",{className:"qp-review-badge incorrect",children:[n.jsx(ix,{size:14})," Incorrect"]}),n.jsxs("span",{className:"qp-review-q-points",children:[Ee?pe.points||1:0,"/",pe.points||1," pt(s)"]})]}),n.jsx("p",{className:"qp-review-q-text",children:pe.question}),n.jsx("div",{className:"qp-review-options",children:pe.options.map((ne,Y)=>{let I="qp-review-option";return Y===pe.reponseCorrecte&&(I+=" correct-answer"),Y===de&&!Ee&&(I+=" wrong-answer"),n.jsxs("div",{className:I,children:[n.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+Y)}),n.jsx("span",{children:ne}),Y===pe.reponseCorrecte&&n.jsx(Dt,{size:14,className:"qp-review-check"}),Y===de&&!Ee&&n.jsx(ix,{size:14,className:"qp-review-x"})]},Y)})}),pe.explication&&n.jsxs("div",{className:"qp-review-explication",children:[n.jsx("strong",{children:" Explication :"})," ",pe.explication]})]},pe.id)})]})]})};function R2(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=R2(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function mt(){for(var e,t,r=0,a="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=R2(e))&&(a&&(a+=" "),a+=t);return a}var I3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function my(e){if(typeof e!="string")return!1;var t=I3;return t.includes(e)}var $3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],B3=new Set($3);function L2(e){return typeof e!="string"?!1:B3.has(e)}function I2(e){return typeof e=="string"&&e.startsWith("data-")}function Ln(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(L2(r)||I2(r))&&(t[r]=e[r]);return t}function Ic(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ln(t)}return typeof e=="object"&&!Array.isArray(e)?Ln(e):null}function Ar(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(L2(r)||I2(r)||my(r))&&(t[r]=e[r]);return t}function U3(e){return e==null?null:y.isValidElement(e)?Ar(e.props):typeof e=="object"&&!Array.isArray(e)?Ar(e):null}var H3=["children","width","height","viewBox","className","style","title","desc"];function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sx.apply(null,arguments)}function G3(e,t){if(e==null)return{};var r,a,l=F3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function F3(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var $2=y.forwardRef((e,t)=>{var{children:r,width:a,height:l,viewBox:o,className:u,style:d,title:m,desc:h}=e,p=G3(e,H3),v=o||{width:a,height:l,x:0,y:0},x=mt("recharts-surface",u);return y.createElement("svg",sx({},Ar(p),{className:x,width:a,height:l,style:d,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,h),r)}),Q3=["children","className"];function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lx.apply(null,arguments)}function V3(e,t){if(e==null)return{};var r,a,l=Y3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Y3(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var wn=y.forwardRef((e,t)=>{var{children:r,className:a}=e,l=V3(e,Q3),o=mt("recharts-layer",a);return y.createElement("g",lx({className:o},Ar(l),{ref:t}),r)}),K3=y.createContext(null);function gt(e){return function(){return e}}const B2=Math.cos,Zd=Math.sin,Bn=Math.sqrt,Jd=Math.PI,Jf=2*Jd,ox=Math.PI,cx=2*ox,ds=1e-6,X3=cx-ds;function U2(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function W3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return U2;const r=10**t;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*r)/r+a[l]}}class Z3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?U2:W3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,l){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,r,a,l,o,u){this._append`C${+t},${+r},${+a},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(t,r,a,l,o){if(t=+t,r=+r,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,d=this._y1,m=a-t,h=l-r,p=u-t,v=d-r,x=p*p+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>ds)if(!(Math.abs(v*m-h*p)>ds)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let b=a-u,_=l-d,N=m*m+h*h,S=b*b+_*_,C=Math.sqrt(N),z=Math.sqrt(x),w=o*Math.tan((ox-Math.acos((N+x-S)/(2*C*z)))/2),E=w/z,O=w/C;Math.abs(E-1)>ds&&this._append`L${t+E*p},${r+E*v}`,this._append`A${o},${o},0,0,${+(v*b>p*_)},${this._x1=t+O*m},${this._y1=r+O*h}`}}arc(t,r,a,l,o,u){if(t=+t,r=+r,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(l),m=a*Math.sin(l),h=t+d,p=r+m,v=1^u,x=u?l-o:o-l;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>ds||Math.abs(this._y1-p)>ds)&&this._append`L${h},${p}`,a&&(x<0&&(x=x%cx+cx),x>X3?this._append`A${a},${a},0,1,${v},${t-d},${r-m}A${a},${a},0,1,${v},${this._x1=h},${this._y1=p}`:x>ds&&this._append`A${a},${a},0,${+(x>=ox)},${v},${this._x1=t+a*Math.cos(o)},${this._y1=r+a*Math.sin(o)}`)}rect(t,r,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function hy(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new Z3(t)}function py(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function H2(e){this._context=e}H2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function em(e){return new H2(e)}function G2(e){return e[0]}function F2(e){return e[1]}function Q2(e,t){var r=gt(!0),a=null,l=em,o=null,u=hy(d);e=typeof e=="function"?e:e===void 0?G2:gt(e),t=typeof t=="function"?t:t===void 0?F2:gt(t);function d(m){var h,p=(m=py(m)).length,v,x=!1,b;for(a==null&&(o=l(b=u())),h=0;h<=p;++h)!(h<p&&r(v=m[h],h,m))===x&&((x=!x)?o.lineStart():o.lineEnd()),x&&o.point(+e(v,h,m),+t(v,h,m));if(b)return o=null,b+""||null}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:gt(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:gt(+m),d):t},d.defined=function(m){return arguments.length?(r=typeof m=="function"?m:gt(!!m),d):r},d.curve=function(m){return arguments.length?(l=m,a!=null&&(o=l(a)),d):l},d.context=function(m){return arguments.length?(m==null?a=o=null:o=l(a=m),d):a},d}function yd(e,t,r){var a=null,l=gt(!0),o=null,u=em,d=null,m=hy(h);e=typeof e=="function"?e:e===void 0?G2:gt(+e),t=typeof t=="function"?t:gt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?F2:gt(+r);function h(v){var x,b,_,N=(v=py(v)).length,S,C=!1,z,w=new Array(N),E=new Array(N);for(o==null&&(d=u(z=m())),x=0;x<=N;++x){if(!(x<N&&l(S=v[x],x,v))===C)if(C=!C)b=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),_=x-1;_>=b;--_)d.point(w[_],E[_]);d.lineEnd(),d.areaEnd()}C&&(w[x]=+e(S,x,v),E[x]=+t(S,x,v),d.point(a?+a(S,x,v):w[x],r?+r(S,x,v):E[x]))}if(z)return d=null,z+""||null}function p(){return Q2().defined(l).curve(u).context(o)}return h.x=function(v){return arguments.length?(e=typeof v=="function"?v:gt(+v),a=null,h):e},h.x0=function(v){return arguments.length?(e=typeof v=="function"?v:gt(+v),h):e},h.x1=function(v){return arguments.length?(a=v==null?null:typeof v=="function"?v:gt(+v),h):a},h.y=function(v){return arguments.length?(t=typeof v=="function"?v:gt(+v),r=null,h):t},h.y0=function(v){return arguments.length?(t=typeof v=="function"?v:gt(+v),h):t},h.y1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:gt(+v),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(a).y(t)},h.defined=function(v){return arguments.length?(l=typeof v=="function"?v:gt(!!v),h):l},h.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),h):u},h.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),h):o},h}class V2{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function J3(e){return new V2(e,!0)}function eR(e){return new V2(e,!1)}const vy={draw(e,t){const r=Bn(t/Jd);e.moveTo(r,0),e.arc(0,0,r,0,Jf)}},tR={draw(e,t){const r=Bn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Y2=Bn(1/3),rR=Y2*2,nR={draw(e,t){const r=Bn(t/rR),a=r*Y2;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},aR={draw(e,t){const r=Bn(t),a=-r/2;e.rect(a,a,r,r)}},iR=.8908130915292852,K2=Zd(Jd/10)/Zd(7*Jd/10),sR=Zd(Jf/10)*K2,lR=-B2(Jf/10)*K2,oR={draw(e,t){const r=Bn(t*iR),a=sR*r,l=lR*r;e.moveTo(0,-r),e.lineTo(a,l);for(let o=1;o<5;++o){const u=Jf*o/5,d=B2(u),m=Zd(u);e.lineTo(m*r,-d*r),e.lineTo(d*a-m*l,m*a+d*l)}e.closePath()}},yv=Bn(3),cR={draw(e,t){const r=-Bn(t/(yv*3));e.moveTo(0,r*2),e.lineTo(-yv*r,-r),e.lineTo(yv*r,-r),e.closePath()}},xn=-.5,yn=Bn(3)/2,ux=1/Bn(12),uR=(ux/2+1)*3,dR={draw(e,t){const r=Bn(t/uR),a=r/2,l=r*ux,o=a,u=r*ux+r,d=-o,m=u;e.moveTo(a,l),e.lineTo(o,u),e.lineTo(d,m),e.lineTo(xn*a-yn*l,yn*a+xn*l),e.lineTo(xn*o-yn*u,yn*o+xn*u),e.lineTo(xn*d-yn*m,yn*d+xn*m),e.lineTo(xn*a+yn*l,xn*l-yn*a),e.lineTo(xn*o+yn*u,xn*u-yn*o),e.lineTo(xn*d+yn*m,xn*m-yn*d),e.closePath()}};function fR(e,t){let r=null,a=hy(l);e=typeof e=="function"?e:gt(e||vy),t=typeof t=="function"?t:gt(t===void 0?64:+t);function l(){let o;if(r||(r=o=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:gt(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),l):t},l.context=function(o){return arguments.length?(r=o??null,l):r},l}function ef(){}function tf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function X2(e){this._context=e}X2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mR(e){return new X2(e)}function W2(e){this._context=e}W2.prototype={areaStart:ef,areaEnd:ef,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hR(e){return new W2(e)}function Z2(e){this._context=e}Z2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:tf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pR(e){return new Z2(e)}function J2(e){this._context=e}J2.prototype={areaStart:ef,areaEnd:ef,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function vR(e){return new J2(e)}function f_(e){return e<0?-1:1}function m_(e,t,r){var a=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),u=(r-e._y1)/(l||a<0&&-0),d=(o*l+u*a)/(a+l);return(f_(o)+f_(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(d))||0}function h_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function bv(e,t,r){var a=e._x0,l=e._y0,o=e._x1,u=e._y1,d=(o-a)/3;e._context.bezierCurveTo(a+d,l+d*t,o-d,u-d*r,o,u)}function rf(e){this._context=e}rf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bv(this,this._t0,h_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bv(this,h_(this,r=m_(this,e,t)),r);break;default:bv(this,this._t0,r=m_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function eE(e){this._context=new tE(e)}(eE.prototype=Object.create(rf.prototype)).point=function(e,t){rf.prototype.point.call(this,t,e)};function tE(e){this._context=e}tE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,l,o){this._context.bezierCurveTo(t,e,a,r,o,l)}};function gR(e){return new rf(e)}function xR(e){return new eE(e)}function rE(e){this._context=e}rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=p_(e),l=p_(t),o=0,u=1;u<r;++o,++u)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[u],t[u]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function p_(e){var t,r=e.length-1,a,l=new Array(r),o=new Array(r),u=new Array(r);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],t=1;t<r-1;++t)l[t]=1,o[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[r-1]=2,o[r-1]=7,u[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=l[t]/o[t-1],o[t]-=a,u[t]-=a*u[t-1];for(l[r-1]=u[r-1]/o[r-1],t=r-2;t>=0;--t)l[t]=(u[t]-l[t+1])/o[t];for(o[r-1]=(e[r]+l[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function yR(e){return new rE(e)}function tm(e,t){this._context=e,this._t=t}tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function bR(e){return new tm(e,.5)}function jR(e){return new tm(e,0)}function NR(e){return new tm(e,1)}function Ns(e,t){if((u=e.length)>1)for(var r=1,a,l,o=e[t[0]],u,d=o.length;r<u;++r)for(l=o,o=e[t[r]],a=0;a<d;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function dx(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function _R(e,t){return e[t]}function SR(e){const t=[];return t.key=e,t}function wR(){var e=gt([]),t=dx,r=Ns,a=_R;function l(o){var u=Array.from(e.apply(this,arguments),SR),d,m=u.length,h=-1,p;for(const v of o)for(d=0,++h;d<m;++d)(u[d][h]=[0,+a(v,u[d].key,h,o)]).data=v;for(d=0,p=py(t(u));d<m;++d)u[p[d]].index=d;return r(u,p),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:gt(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:gt(+o),l):a},l.order=function(o){return arguments.length?(t=o==null?dx:typeof o=="function"?o:gt(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(r=o??Ns,l):r},l}function CR(e,t){if((a=e.length)>0){for(var r,a,l=0,o=e[0].length,u;l<o;++l){for(u=r=0;r<a;++r)u+=e[r][l][1]||0;if(u)for(r=0;r<a;++r)e[r][l][1]/=u}Ns(e,t)}}function AR(e,t){if((l=e.length)>0){for(var r=0,a=e[t[0]],l,o=a.length;r<o;++r){for(var u=0,d=0;u<l;++u)d+=e[u][r][1]||0;a[r][1]+=a[r][0]=-d/2}Ns(e,t)}}function ER(e,t){if(!(!((u=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var r=0,a=1,l,o,u;a<o;++a){for(var d=0,m=0,h=0;d<u;++d){for(var p=e[t[d]],v=p[a][1]||0,x=p[a-1][1]||0,b=(v-x)/2,_=0;_<d;++_){var N=e[t[_]],S=N[a][1]||0,C=N[a-1][1]||0;b+=S-C}m+=v,h+=b*v}l[a-1][1]+=l[a-1][0]=r,m&&(r-=h/m)}l[a-1][1]+=l[a-1][0]=r,Ns(e,t)}}var jv={},Nv={},v_;function zR(){return v_||(v_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Nv)),Nv}var _v={},g_;function nE(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(_v)),_v}var Sv={},x_;function gy(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Sv)),Sv}var wv={},Cv={},y_;function OR(){return y_||(y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const a=String(r);return a==="0"&&Object.is(Number(r),-0)?"-0":a}e.toString=t})(Cv)),Cv}var b_;function xy(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OR(),r=gy();function a(l){if(Array.isArray(l))return l.map(r.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],u=l.length;if(u===0)return o;let d=0,m="",h="",p=!1;for(l.charCodeAt(0)===46&&(o.push(""),d++);d<u;){const v=l[d];h?v==="\\"&&d+1<u?(d++,m+=l[d]):v===h?h="":m+=v:p?v==='"'||v==="'"?h=v:v==="]"?(p=!1,o.push(m),m=""):m+=v:v==="["?(p=!0,m&&(o.push(m),m="")):v==="."?m&&(o.push(m),m=""):m+=v,d++}return m&&o.push(m),o}e.toPath=a})(wv)),wv}var j_;function yy(){return j_||(j_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zR(),r=nE(),a=gy(),l=xy();function o(d,m,h){if(d==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const p=d[m];return p===void 0?r.isDeepKey(m)?o(d,l.toPath(m),h):h:p}case"number":case"symbol":{typeof m=="number"&&(m=a.toKey(m));const p=d[m];return p===void 0?h:p}default:{if(Array.isArray(m))return u(d,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const p=d[m];return p===void 0?h:p}}}function u(d,m,h){if(m.length===0)return h;let p=d;for(let v=0;v<m.length;v++){if(p==null||t.isUnsafeProperty(m[v]))return h;p=p[m[v]]}return p===void 0?h:p}e.get=o})(jv)),jv}var Av,N_;function DR(){return N_||(N_=1,Av=yy().get),Av}var MR=DR();const Ul=Ua(MR);var TR=4;function Ei(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TR,r=10**t,a=Math.round(e*r)/r;return Object.is(a,-0)?0:a}function Mt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return e.reduce((l,o,u)=>{var d=r[u-1];return typeof d=="string"?l+d+o:d!==void 0?l+Ei(d)+o:l+o},"")}var Lr=e=>e===0?0:e>0?1:-1,ra=e=>typeof e=="number"&&e!=+e,_s=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Se=e=>(typeof e=="number"||e instanceof Number)&&!ra(e),na=e=>Se(e)||typeof e=="string",PR=0,Nc=e=>{var t=++PR;return"".concat(e||"").concat(t)},In=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Se(t)&&typeof t!="string")return a;var o;if(_s(t)){if(r==null)return a;var u=t.indexOf("%");o=r*parseFloat(t.slice(0,u))/100}else o=+t;return ra(o)&&(o=a),l&&r!=null&&o>r&&(o=r),o},aE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[String(e[a])])r[String(e[a])]=!0;else return!0;return!1};function Tt(e,t,r){return Se(e)&&Se(t)?Ei(e+r*(t-e)):t}function iE(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Ul(a,t))===r)}var At=e=>e===null||typeof e>"u",$c=e=>At(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Ir(e){return e!=null}function Ms(){}var kR=["type","size","sizeType"];function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fx.apply(null,arguments)}function __(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function S_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?__(Object(r),!0).forEach(function(a){qR(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qR(e,t,r){return(t=RR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RR(e){var t=LR(e,"string");return typeof t=="symbol"?t:t+""}function LR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IR(e,t){if(e==null)return{};var r,a,l=$R(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function $R(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var sE={symbolCircle:vy,symbolCross:tR,symbolDiamond:nR,symbolSquare:aR,symbolStar:oR,symbolTriangle:cR,symbolWye:dR},BR=Math.PI/180,UR=e=>{var t="symbol".concat($c(e));return sE[t]||vy},HR=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*BR;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},GR=(e,t)=>{sE["symbol".concat($c(e))]=t},lE=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,l=IR(e,kR),o=S_(S_({},l),{},{type:t,size:r,sizeType:a}),u="circle";typeof t=="string"&&(u=t);var d=()=>{var x=UR(u),b=fR().type(x).size(HR(r,a,u)),_=b();if(_!==null)return _},{className:m,cx:h,cy:p}=o,v=Ar(o);return Se(h)&&Se(p)&&Se(r)?y.createElement("path",fx({},v,{className:mt("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};lE.registerSymbol=GR;var oE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,by=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(l=>{my(l)&&(a[l]=(o=>r[l](r,o)))}),a},FR=(e,t,r)=>a=>(e(t,r,a),null),jy=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];my(l)&&typeof o=="function"&&(a||(a={}),a[l]=FR(o,t,r))}),a};function w_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function QR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(r),!0).forEach(function(a){VR(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w_(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VR(e,t,r){return(t=YR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YR(e){var t=KR(e,"string");return typeof t=="symbol"?t:t+""}function KR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zr(e,t){var r=QR({},e),a=t,l=Object.keys(t),o=l.reduce((u,d)=>(u[d]===void 0&&a[d]!==void 0&&(u[d]=a[d]),u),r);return o}var Ev={},zv={},C_;function XR(){return C_||(C_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const l=new Map;for(let o=0;o<r.length;o++){const u=r[o],d=a(u,o,r);l.has(d)||l.set(d,u)}return Array.from(l.values())}e.uniqBy=t})(zv)),zv}var Ov={},A_;function WR(){return A_||(A_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return function(...l){return r.apply(this,l.slice(0,a))}}e.ary=t})(Ov)),Ov}var Dv={},E_;function cE(){return E_||(E_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Dv)),Dv}var Mv={},Tv={},Pv={},z_;function ZR(){return z_||(z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Pv)),Pv}var O_;function Ny(){return O_||(O_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZR();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r})(Tv)),Tv}var kv={},D_;function JR(){return D_||(D_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(kv)),kv}var M_;function e5(){return M_||(M_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ny(),r=JR();function a(l){return r.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=a})(Mv)),Mv}var qv={},Rv={},T_;function t5(){return T_||(T_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yy();function r(a){return function(l){return t.get(l,a)}}e.property=r})(Rv)),Rv}var Lv={},Iv={},$v={},Bv={},P_;function uE(){return P_||(P_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Bv)),Bv}var Uv={},k_;function dE(){return k_||(k_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Uv)),Uv}var Hv={},q_;function fE(){return q_||(q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(Hv)),Hv}var R_;function r5(){return R_||(R_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uE(),r=dE(),a=fE();function l(p,v,x){return typeof x!="function"?l(p,v,()=>{}):o(p,v,function b(_,N,S,C,z,w){const E=x(_,N,S,C,z,w);return E!==void 0?!!E:o(_,N,b,w)},new Map)}function o(p,v,x,b){if(v===p)return!0;switch(typeof v){case"object":return u(p,v,x,b);case"function":return Object.keys(v).length>0?o(p,{...v},x,b):a.isEqualsSameValueZero(p,v);default:return t.isObject(p)?typeof v=="string"?v==="":!0:a.isEqualsSameValueZero(p,v)}}function u(p,v,x,b){if(v==null)return!0;if(Array.isArray(v))return m(p,v,x,b);if(v instanceof Map)return d(p,v,x,b);if(v instanceof Set)return h(p,v,x,b);const _=Object.keys(v);if(p==null||r.isPrimitive(p))return _.length===0;if(_.length===0)return!0;if(b?.has(v))return b.get(v)===p;b?.set(v,p);try{for(let N=0;N<_.length;N++){const S=_[N];if(!r.isPrimitive(p)&&!(S in p)||v[S]===void 0&&p[S]!==void 0||v[S]===null&&p[S]!==null||!x(p[S],v[S],S,p,v,b))return!1}return!0}finally{b?.delete(v)}}function d(p,v,x,b){if(v.size===0)return!0;if(!(p instanceof Map))return!1;for(const[_,N]of v.entries()){const S=p.get(_);if(x(S,N,_,p,v,b)===!1)return!1}return!0}function m(p,v,x,b){if(v.length===0)return!0;if(!Array.isArray(p))return!1;const _=new Set;for(let N=0;N<v.length;N++){const S=v[N];let C=!1;for(let z=0;z<p.length;z++){if(_.has(z))continue;const w=p[z];let E=!1;if(x(w,S,N,p,v,b)&&(E=!0),E){_.add(z),C=!0;break}}if(!C)return!1}return!0}function h(p,v,x,b){return v.size===0?!0:p instanceof Set?m([...p],[...v],x,b):!1}e.isMatchWith=l,e.isSetMatch=h})($v)),$v}var L_;function mE(){return L_||(L_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r5();function r(a,l){return t.isMatchWith(a,l,()=>{})}e.isMatch=r})(Iv)),Iv}var Gv={},Fv={},Qv={},I_;function n5(){return I_||(I_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t})(Qv)),Qv}var Vv={},$_;function _y(){return $_||($_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Vv)),Vv}var Yv={},B_;function hE(){return B_||(B_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",d="[object Date]",m="[object Map]",h="[object Set]",p="[object Array]",v="[object Function]",x="[object ArrayBuffer]",b="[object Object]",_="[object Error]",N="[object DataView]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",z="[object Uint16Array]",w="[object Uint32Array]",E="[object BigUint64Array]",O="[object Int8Array]",P="[object Int16Array]",L="[object Int32Array]",T="[object BigInt64Array]",D="[object Float32Array]",k="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=x,e.arrayTag=p,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=E,e.booleanTag=l,e.dataViewTag=N,e.dateTag=d,e.errorTag=_,e.float32ArrayTag=D,e.float64ArrayTag=k,e.functionTag=v,e.int16ArrayTag=P,e.int32ArrayTag=L,e.int8ArrayTag=O,e.mapTag=m,e.numberTag=a,e.objectTag=b,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=u,e.uint16ArrayTag=z,e.uint32ArrayTag=w,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=C})(Yv)),Yv}var Kv={},U_;function a5(){return U_||(U_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Kv)),Kv}var H_;function pE(){return H_||(H_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n5(),r=_y(),a=hE(),l=dE(),o=a5();function u(p,v){return d(p,void 0,p,new Map,v)}function d(p,v,x,b=new Map,_=void 0){const N=_?.(p,v,x,b);if(N!==void 0)return N;if(l.isPrimitive(p))return p;if(b.has(p))return b.get(p);if(Array.isArray(p)){const S=new Array(p.length);b.set(p,S);for(let C=0;C<p.length;C++)S[C]=d(p[C],C,x,b,_);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;b.set(p,S);for(const[C,z]of p)S.set(C,d(z,C,x,b,_));return S}if(p instanceof Set){const S=new Set;b.set(p,S);for(const C of p)S.add(d(C,void 0,x,b,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(o.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);b.set(p,S);for(let C=0;C<p.length;C++)S[C]=d(p[C],C,x,b,_);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return b.set(p,S),m(S,p,x,b,_),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return b.set(p,S),m(S,p,x,b,_),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return b.set(p,S),m(S,p,x,b,_),S}if(p instanceof Error){const S=new p.constructor;return b.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,m(S,p,x,b,_),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return b.set(p,S),m(S,p,x,b,_),S}if(p instanceof Number){const S=new Number(p.valueOf());return b.set(p,S),m(S,p,x,b,_),S}if(p instanceof String){const S=new String(p.valueOf());return b.set(p,S),m(S,p,x,b,_),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return b.set(p,S),m(S,p,x,b,_),S}return p}function m(p,v,x=p,b,_){const N=[...Object.keys(v),...t.getSymbols(v)];for(let S=0;S<N.length;S++){const C=N[S],z=Object.getOwnPropertyDescriptor(p,C);(z==null||z.writable)&&(p[C]=d(v[C],C,x,b,_))}}function h(p){switch(r.getTag(p)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=m})(Fv)),Fv}var G_;function i5(){return G_||(G_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pE();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r})(Gv)),Gv}var F_;function s5(){return F_||(F_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mE(),r=i5();function a(l){return l=r.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=a})(Lv)),Lv}var Xv={},Wv={},Zv={},Q_;function l5(){return Q_||(Q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pE(),r=_y(),a=hE();function l(o,u){return t.cloneDeepWith(o,(d,m,h,p)=>{const v=u?.(d,m,h,p);if(v!==void 0)return v;if(typeof o=="object"){if(r.getTag(o)===a.objectTag&&typeof o.constructor!="function"){const x={};return p.set(o,x),t.copyProperties(x,o,h,p),x}switch(Object.prototype.toString.call(o)){case a.numberTag:case a.stringTag:case a.booleanTag:{const x=new o.constructor(o?.valueOf());return t.copyProperties(x,o),x}case a.argumentsTag:{const x={};return t.copyProperties(x,o),x.length=o.length,x[Symbol.iterator]=o[Symbol.iterator],x}default:return}}})}e.cloneDeepWith=l})(Zv)),Zv}var V_;function o5(){return V_||(V_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l5();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r})(Wv)),Wv}var Jv={},eg={},Y_;function vE(){return Y_||(Y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r})(eg)),eg}var tg={},K_;function c5(){return K_||(K_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_y();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r})(tg)),tg}var X_;function u5(){return X_||(X_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nE(),r=vE(),a=c5(),l=xy();function o(u,d){let m;if(Array.isArray(d)?m=d:typeof d=="string"&&t.isDeepKey(d)&&u?.[d]==null?m=l.toPath(d):m=[d],m.length===0)return!1;let h=u;for(let p=0;p<m.length;p++){const v=m[p];if((h==null||!Object.hasOwn(h,v))&&!((Array.isArray(h)||a.isArguments(h))&&r.isIndex(v)&&v<h.length))return!1;h=h[v]}return!0}e.has=o})(Jv)),Jv}var W_;function d5(){return W_||(W_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mE(),r=gy(),a=o5(),l=yy(),o=u5();function u(d,m){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return m=a.cloneDeep(m),function(h){const p=l.get(h,d);return p===void 0?o.has(h,d):m===void 0?p===void 0:t.isMatch(p,m)}}e.matchesProperty=u})(Xv)),Xv}var Z_;function f5(){return Z_||(Z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cE(),r=t5(),a=s5(),l=d5();function o(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):a.matches(u);case"string":case"symbol":case"number":return r.property(u)}}e.iteratee=o})(qv)),qv}var J_;function m5(){return J_||(J_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XR(),r=WR(),a=cE(),l=e5(),o=f5();function u(d,m=a.identity){return l.isArrayLikeObject(d)?t.uniqBy(Array.from(d),r.ary(o.iteratee(m),1)):[]}e.uniqBy=u})(Ev)),Ev}var rg,eS;function h5(){return eS||(eS=1,rg=m5().uniqBy),rg}var p5=h5();const tS=Ua(p5);function v5(e,t,r){return t===!0?tS(e,r):typeof t=="function"?tS(e,t):e}var ng={exports:{}},ag={},ig={exports:{}},sg={};var rS;function g5(){if(rS)return sg;rS=1;var e=Yf();function t(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function d(v,x){var b=x(),_=a({inst:{value:b,getSnapshot:x}}),N=_[0].inst,S=_[1];return o(function(){N.value=b,N.getSnapshot=x,m(N)&&S({inst:N})},[v,b,x]),l(function(){return m(N)&&S({inst:N}),v(function(){m(N)&&S({inst:N})})},[v]),u(b),b}function m(v){var x=v.getSnapshot;v=v.value;try{var b=x();return!r(v,b)}catch{return!0}}function h(v,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return sg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,sg}var nS;function x5(){return nS||(nS=1,ig.exports=g5()),ig.exports}var aS;function y5(){if(aS)return ag;aS=1;var e=Yf(),t=x5();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:r,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,d=e.useMemo,m=e.useDebugValue;return ag.useSyncExternalStoreWithSelector=function(h,p,v,x,b){var _=o(null);if(_.current===null){var N={hasValue:!1,value:null};_.current=N}else N=_.current;_=d(function(){function C(P){if(!z){if(z=!0,w=P,P=x(P),b!==void 0&&N.hasValue){var L=N.value;if(b(L,P))return E=L}return E=P}if(L=E,a(w,P))return L;var T=x(P);return b!==void 0&&b(L,T)?(w=P,L):(w=P,E=T)}var z=!1,w,E,O=v===void 0?null:v;return[function(){return C(p())},O===null?void 0:function(){return C(O())}]},[p,v,x,b]);var S=l(h,_[0],_[1]);return u(function(){N.hasValue=!0,N.value=S},[S]),m(S),S},ag}var iS;function b5(){return iS||(iS=1,ng.exports=y5()),ng.exports}var j5=b5(),Sy=y.createContext(null),N5=e=>e,qt=()=>{var e=y.useContext(Sy);return e?e.store.dispatch:N5},Ud=()=>{},_5=()=>Ud,S5=(e,t)=>e===t;function ze(e){var t=y.useContext(Sy),r=y.useMemo(()=>t?a=>{if(a!=null)return e(a)}:Ud,[t,e]);return j5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:_5,t?t.store.getState:Ud,t?t.store.getState:Ud,r,S5)}function w5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function C5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function A5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var sS=e=>Array.isArray(e)?e:[e];function E5(e){const t=Array.isArray(e[0])?e[0]:e;return A5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function z5(e,t){const r=[],{length:a}=e;for(let l=0;l<a;l++)r.push(e[l].apply(null,t));return r}var O5=class{constructor(e){this.value=e}deref(){return this.value}},D5=typeof WeakRef<"u"?WeakRef:O5,M5=0,lS=1;function bd(){return{s:M5,v:void 0,o:null,p:null}}function gE(e,t={}){let r=bd();const{resultEqualityCheck:a}=t;let l,o=0;function u(){let d=r;const{length:m}=arguments;for(let v=0,x=m;v<x;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let _=d.o;_===null&&(d.o=_=new WeakMap);const N=_.get(b);N===void 0?(d=bd(),_.set(b,d)):d=N}else{let _=d.p;_===null&&(d.p=_=new Map);const N=_.get(b);N===void 0?(d=bd(),_.set(b,d)):d=N}}const h=d;let p;if(d.s===lS)p=d.v;else if(p=e.apply(null,arguments),o++,a){const v=l?.deref?.()??l;v!=null&&a(v,p)&&(p=v,o!==0&&o--),l=typeof p=="object"&&p!==null||typeof p=="function"?new D5(p):p}return h.s=lS,h.v=p,p}return u.clearCache=()=>{r=bd(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function T5(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let o=0,u=0,d,m={},h=l.pop();typeof h=="object"&&(m=h,h=l.pop()),w5(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...m},{memoize:v,memoizeOptions:x=[],argsMemoize:b=gE,argsMemoizeOptions:_=[]}=p,N=sS(x),S=sS(_),C=E5(l),z=v(function(){return o++,h.apply(null,arguments)},...N),w=b(function(){u++;const O=z5(C,arguments);return d=z.apply(null,O),d},...S);return Object.assign(w,{resultFunc:h,memoizedResultFunc:z,dependencies:C,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:b})};return Object.assign(a,{withTypes:()=>a}),a}var re=T5(gE),P5=Object.assign((e,t=re)=>{C5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(o=>e[o]);return t(a,(...o)=>o.reduce((u,d,m)=>(u[r[m]]=d,u),{}))},{withTypes:()=>P5}),lg={},og={},cg={},oS;function k5(){return oS||(oS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,l,o)=>{if(a!==l){const u=t(a),d=t(l);if(u===d&&u===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?d-u:u-d}return 0};e.compareValues=r})(cg)),cg}var ug={},dg={},cS;function xE(){return cS||(cS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(dg)),dg}var uS;function q5(){return uS||(uS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!r.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})(ug)),ug}var dS;function R5(){return dS||(dS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k5(),r=q5(),a=xy();function l(o,u,d,m){if(o==null)return[];d=m?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(b=>String(b));const h=(b,_)=>{let N=b;for(let S=0;S<_.length&&N!=null;++S)N=N[_[S]];return N},p=(b,_)=>_==null||b==null?_:typeof b=="object"&&"key"in b?Object.hasOwn(_,b.key)?_[b.key]:h(_,b.path):typeof b=="function"?b(_):Array.isArray(b)?h(_,b):typeof _=="object"?_[b]:_,v=u.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||r.isKey(b)?b:{key:b,path:a.toPath(b)}));return o.map(b=>({original:b,criteria:v.map(_=>p(_,b))})).slice().sort((b,_)=>{for(let N=0;N<v.length;N++){const S=t.compareValues(b.criteria[N],_.criteria[N],d[N]);if(S!==0)return S}return 0}).map(b=>b.original)}e.orderBy=l})(og)),og}var fg={},fS;function L5(){return fS||(fS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const l=[],o=Math.floor(a),u=(d,m)=>{for(let h=0;h<d.length;h++){const p=d[h];Array.isArray(p)&&m<o?u(p,m+1):l.push(p)}};return u(r,0),l}e.flatten=t})(fg)),fg}var mg={},mS;function yE(){return mS||(mS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vE(),r=Ny(),a=uE(),l=fE();function o(u,d,m){return a.isObject(m)&&(typeof d=="number"&&r.isArrayLike(m)&&t.isIndex(d)&&d<m.length||typeof d=="string"&&d in m)?l.isEqualsSameValueZero(m[d],u):!1}e.isIterateeCall=o})(mg)),mg}var hS;function I5(){return hS||(hS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R5(),r=L5(),a=yE();function l(o,...u){const d=u.length;return d>1&&a.isIterateeCall(o,u[0],u[1])?u=[]:d>2&&a.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(o,r.flatten(u),["asc"])}e.sortBy=l})(lg)),lg}var hg,pS;function $5(){return pS||(pS=1,hg=I5().sortBy),hg}var B5=$5();const rm=Ua(B5);var bE=e=>e.legend.settings,U5=e=>e.legend.size,H5=e=>e.legend.payload;re([H5,bE],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?rm(a,r):a});var jd=1;function G5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),a=y.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-t.height)>jd||Math.abs(u.left-t.left)>jd||Math.abs(u.top-t.top)>jd||Math.abs(u.width-t.width)>jd)&&r({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function mr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var F5=typeof Symbol=="function"&&Symbol.observable||"@@observable",vS=F5,pg=()=>Math.random().toString(36).substring(7).split("").join("."),Q5={INIT:`@@redux/INIT${pg()}`,REPLACE:`@@redux/REPLACE${pg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pg()}`},nf=Q5;function wy(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jE(e,t,r){if(typeof e!="function")throw new Error(mr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(mr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(mr(1));return r(jE)(e,t)}let a=e,l=t,o=new Map,u=o,d=0,m=!1;function h(){u===o&&(u=new Map,o.forEach((S,C)=>{u.set(C,S)}))}function p(){if(m)throw new Error(mr(3));return l}function v(S){if(typeof S!="function")throw new Error(mr(4));if(m)throw new Error(mr(5));let C=!0;h();const z=d++;return u.set(z,S),function(){if(C){if(m)throw new Error(mr(6));C=!1,h(),u.delete(z),o=null}}}function x(S){if(!wy(S))throw new Error(mr(7));if(typeof S.type>"u")throw new Error(mr(8));if(typeof S.type!="string")throw new Error(mr(17));if(m)throw new Error(mr(9));try{m=!0,l=a(l,S)}finally{m=!1}return(o=u).forEach(z=>{z()}),S}function b(S){if(typeof S!="function")throw new Error(mr(10));a=S,x({type:nf.REPLACE})}function _(){const S=v;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(mr(11));function z(){const E=C;E.next&&E.next(p())}return z(),{unsubscribe:S(z)}},[vS](){return this}}}return x({type:nf.INIT}),{dispatch:x,subscribe:v,getState:p,replaceReducer:b,[vS]:_}}function V5(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:nf.INIT})>"u")throw new Error(mr(12));if(typeof r(void 0,{type:nf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(mr(13))})}function NE(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(r[u]=e[u])}const a=Object.keys(r);let l;try{V5(r)}catch(o){l=o}return function(u={},d){if(l)throw l;let m=!1;const h={};for(let p=0;p<a.length;p++){const v=a[p],x=r[v],b=u[v],_=x(b,d);if(typeof _>"u")throw d&&d.type,new Error(mr(14));h[v]=_,m=m||_!==b}return m=m||a.length!==Object.keys(u).length,m?h:u}}function af(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function Y5(...e){return t=>(r,a)=>{const l=t(r,a);let o=()=>{throw new Error(mr(15))};const u={getState:l.getState,dispatch:(m,...h)=>o(m,...h)},d=e.map(m=>m(u));return o=af(...d)(l.dispatch),{...l,dispatch:o}}}function _E(e){return wy(e)&&"type"in e&&typeof e.type=="string"}var SE=Symbol.for("immer-nothing"),gS=Symbol.for("immer-draftable"),Er=Symbol.for("immer-state");function Pn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zr=Object,Hl=Zr.getPrototypeOf,sf="constructor",nm="prototype",mx="configurable",lf="enumerable",Hd="writable",_c="value",ka=e=>!!e&&!!e[Er];function $n(e){return e?wE(e)||im(e)||!!e[gS]||!!e[sf]?.[gS]||sm(e)||lm(e):!1}var K5=Zr[nm][sf].toString(),xS=new WeakMap;function wE(e){if(!e||!Cy(e))return!1;const t=Hl(e);if(t===null||t===Zr[nm])return!0;const r=Zr.hasOwnProperty.call(t,sf)&&t[sf];if(r===Object)return!0;if(!Tl(r))return!1;let a=xS.get(r);return a===void 0&&(a=Function.toString.call(r),xS.set(r,a)),a===K5}function am(e,t,r=!0){Bc(e)===0?(r?Reflect.ownKeys(e):Zr.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function Bc(e){const t=e[Er];return t?t.type_:im(e)?1:sm(e)?2:lm(e)?3:0}var yS=(e,t,r=Bc(e))=>r===2?e.has(t):Zr[nm].hasOwnProperty.call(e,t),hx=(e,t,r=Bc(e))=>r===2?e.get(t):e[t],of=(e,t,r,a=Bc(e))=>{a===2?e.set(t,r):a===3?e.add(r):e[t]=r};function X5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var im=Array.isArray,sm=e=>e instanceof Map,lm=e=>e instanceof Set,Cy=e=>typeof e=="object",Tl=e=>typeof e=="function",vg=e=>typeof e=="boolean";function W5(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Aa=e=>e.copy_||e.base_,Ay=e=>e.modified_?e.copy_:e.base_;function px(e,t){if(sm(e))return new Map(e);if(lm(e))return new Set(e);if(im(e))return Array[nm].slice.call(e);const r=wE(e);if(t===!0||t==="class_only"&&!r){const a=Zr.getOwnPropertyDescriptors(e);delete a[Er];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d[Hd]===!1&&(d[Hd]=!0,d[mx]=!0),(d.get||d.set)&&(a[u]={[mx]:!0,[Hd]:!0,[lf]:d[lf],[_c]:e[u]})}return Zr.create(Hl(e),a)}else{const a=Hl(e);if(a!==null&&r)return{...e};const l=Zr.create(a);return Zr.assign(l,e)}}function Ey(e,t=!1){return om(e)||ka(e)||!$n(e)||(Bc(e)>1&&Zr.defineProperties(e,{set:Nd,add:Nd,clear:Nd,delete:Nd}),Zr.freeze(e),t&&am(e,(r,a)=>{Ey(a,!0)},!1)),e}function Z5(){Pn(2)}var Nd={[_c]:Z5};function om(e){return e===null||!Cy(e)?!0:Zr.isFrozen(e)}var cf="MapSet",vx="Patches",bS="ArrayMethods",CE={};function Ss(e){const t=CE[e];return t||Pn(0,e),t}var jS=e=>!!CE[e],Sc,AE=()=>Sc,J5=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:jS(cf)?Ss(cf):void 0,arrayMethodsPlugin_:jS(bS)?Ss(bS):void 0});function NS(e,t){t&&(e.patchPlugin_=Ss(vx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gx(e){xx(e),e.drafts_.forEach(e4),e.drafts_=null}function xx(e){e===Sc&&(Sc=e.parent_)}var _S=e=>Sc=J5(Sc,e);function e4(e){const t=e[Er];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function SS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Er].modified_&&(gx(t),Pn(4)),$n(e)&&(e=wS(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(r[Er].base_,e,t)}else e=wS(t,r);return t4(t,e,!0),gx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SE?e:void 0}function wS(e,t){if(om(t))return t;const r=t[Er];if(!r)return uf(t,e.handledSet_,e);if(!cm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:a}=r;if(a)for(;a.length>0;)a.pop()(e);OE(r,e)}return r.copy_}function t4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ey(t,r)}function EE(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var cm=(e,t)=>e.scope_===t,r4=[];function zE(e,t,r,a){const l=Aa(e),o=e.type_;if(a!==void 0&&hx(l,a,o)===t){of(l,a,r,o);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;am(l,(m,h)=>{if(ka(h)){const p=d.get(h)||[];p.push(m),d.set(h,p)}})}const u=e.draftLocations_.get(t)??r4;for(const d of u)of(l,d,r,o)}function n4(e,t,r){e.callbacks_.push(function(l){const o=t;if(!o||!cm(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=Ay(o);zE(e,o.draft_??o,u,r),OE(o,l)})}function OE(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}EE(e)}}function a4(e,t,r){const{scope_:a}=e;if(ka(r)){const l=r[Er];cm(l,a)&&l.callbacks_.push(function(){Gd(e);const u=Ay(l);zE(e,r,u,t)})}else $n(r)&&e.callbacks_.push(function(){const o=Aa(e);e.type_===3?o.has(r)&&uf(r,a.handledSet_,a):hx(o,t,e.type_)===r&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&uf(hx(e.copy_,t,e.type_),a.handledSet_,a)})}function uf(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ka(e)||t.has(e)||!$n(e)||om(e)||(t.add(e),am(e,(a,l)=>{if(ka(l)){const o=l[Er];if(cm(o,r)){const u=Ay(o);of(e,a,u,e.type_),EE(o)}}else $n(l)&&uf(l,t,r)})),e}function i4(e,t){const r=im(e),a={type_:r?1:0,scope_:t?t.scope_:AE(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=df;r&&(l=[a],o=wc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,[d,a]}var df={get(e,t){if(t===Er)return e;let r=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const l=Aa(e);if(!yS(l,t,e.type_))return s4(e,l,t);const o=l[t];if(e.finalized_||!$n(o)||a&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&W5(t))return o;if(o===gg(e.base_,t)){Gd(e);const u=e.type_===1?+t:t,d=bx(e.scope_,o,e,u);return e.copy_[u]=d}return o},has(e,t){return t in Aa(e)},ownKeys(e){return Reflect.ownKeys(Aa(e))},set(e,t,r){const a=DE(Aa(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const l=gg(Aa(e),t),o=l?.[Er];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(X5(r,l)&&(r!==void 0||yS(e.base_,t,e.type_)))return!0;Gd(e),yx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),a4(e,t,r)),!0},deleteProperty(e,t){return Gd(e),gg(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),yx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Aa(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{[Hd]:!0,[mx]:e.type_!==1||t!=="length",[lf]:a[lf],[_c]:r[t]}},defineProperty(){Pn(11)},getPrototypeOf(e){return Hl(e.base_)},setPrototypeOf(){Pn(12)}},wc={};for(let e in df){let t=df[e];wc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}wc.deleteProperty=function(e,t){return wc.set.call(this,e,t,void 0)};wc.set=function(e,t,r){return df.set.call(this,e[0],t,r,e[0])};function gg(e,t){const r=e[Er];return(r?Aa(r):e)[t]}function s4(e,t,r){const a=DE(t,r);return a?_c in a?a[_c]:a.get?.call(e.draft_):void 0}function DE(e,t){if(!(t in e))return;let r=Hl(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Hl(r)}}function yx(e){e.modified_||(e.modified_=!0,e.parent_&&yx(e.parent_))}function Gd(e){e.copy_||(e.assigned_=new Map,e.copy_=px(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var l4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,a,l)=>{if(Tl(r)&&!Tl(a)){const u=a;a=r;const d=this;return function(h=u,...p){return d.produce(h,v=>a.call(this,v,...p))}}Tl(a)||Pn(6),l!==void 0&&!Tl(l)&&Pn(7);let o;if($n(r)){const u=_S(this),d=bx(u,r,void 0);let m=!0;try{o=a(d),m=!1}finally{m?gx(u):xx(u)}return NS(u,l),SS(o,u)}else if(!r||!Cy(r)){if(o=a(r),o===void 0&&(o=r),o===SE&&(o=void 0),this.autoFreeze_&&Ey(o,!0),l){const u=[],d=[];Ss(vx).generateReplacementPatches_(r,o,{patches_:u,inversePatches_:d}),l(u,d)}return o}else Pn(1,r)},this.produceWithPatches=(r,a)=>{if(Tl(r))return(d,...m)=>this.produceWithPatches(d,h=>r(h,...m));let l,o;return[this.produce(r,a,(d,m)=>{l=d,o=m}),l,o]},vg(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),vg(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),vg(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){$n(t)||Pn(8),ka(t)&&(t=Rn(t));const r=_S(this),a=bx(r,t,void 0);return a[Er].isManual_=!0,xx(r),a}finishDraft(t,r){const a=t&&t[Er];(!a||!a.isManual_)&&Pn(9);const{scope_:l}=a;return NS(l,r),SS(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let a;for(a=r.length-1;a>=0;a--){const o=r[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(r=r.slice(a+1));const l=Ss(vx).applyPatches_;return ka(t)?l(t,r):this.produce(t,o=>l(o,r))}};function bx(e,t,r,a){const[l,o]=sm(t)?Ss(cf).proxyMap_(t,r):lm(t)?Ss(cf).proxySet_(t,r):i4(t,r);return(r?.scope_??AE()).drafts_.push(l),o.callbacks_=r?.callbacks_??[],o.key_=a,r&&a!==void 0?n4(r,o,a):o.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:h}=m;o.modified_&&h&&h.generatePatches_(o,[],m)}),l}function Rn(e){return ka(e)||Pn(10,e),ME(e)}function ME(e){if(!$n(e)||om(e))return e;const t=e[Er];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=px(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=px(e,!0);return am(r,(l,o)=>{of(r,l,ME(o))},a),t&&(t.finalized_=!1),r}var o4=new l4,TE=o4.produce;function PE(e){return({dispatch:r,getState:a})=>l=>o=>typeof o=="function"?o(r,a,e):l(o)}var c4=PE(),u4=PE,d4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?af:af.apply(null,arguments)};function Cn(e,t){function r(...a){if(t){let l=t(...a);if(!l)throw new Error(tn(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>_E(a)&&a.type===e,r}var kE=class mc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,mc.prototype)}static get[Symbol.species](){return mc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new mc(...t[0].concat(this)):new mc(...t.concat(this))}};function CS(e){return $n(e)?TE(e,()=>{}):e}function _d(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function f4(e){return typeof e=="boolean"}var m4=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let u=new kE;return r&&(f4(r)?u.push(c4):u.push(u4(r.extraArgument))),u},qE="RTK_autoBatch",St=()=>e=>({payload:e,meta:{[qE]:!0}}),AS=e=>t=>{setTimeout(t,e)},RE=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let l=!0,o=!1,u=!1;const d=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:AS(10):e.type==="callback"?e.queueNotification:AS(e.timeout),h=()=>{u=!1,o&&(o=!1,d.forEach(p=>p()))};return Object.assign({},a,{subscribe(p){const v=()=>l&&p(),x=a.subscribe(v);return d.add(p),()=>{x(),d.delete(p)}},dispatch(p){try{return l=!p?.meta?.[qE],o=!l,o&&(u||(u=!0,m(h))),a.dispatch(p)}finally{l=!0}}})},h4=e=>function(r){const{autoBatch:a=!0}=r??{};let l=new kE(e);return a&&l.push(RE(typeof a=="object"?a:void 0)),l};function p4(e){const t=m4(),{reducer:r=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(wy(r))d=NE(r);else throw new Error(tn(1));let m;typeof a=="function"?m=a(t):m=t();let h=af;l&&(h=d4({trace:!1,...typeof l=="object"&&l}));const p=Y5(...m),v=h4(p);let x=typeof u=="function"?u(v):v();const b=h(...x);return jE(d,o,b)}function LE(e){const t={},r=[];let a;const l={addCase(o,u){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(tn(28));if(d in t)throw new Error(tn(29));return t[d]=u,l},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return r.push({matcher:o,reducer:u}),l},addDefaultCase(o){return a=o,l}};return e(l),[t,r,a]}function v4(e){return typeof e=="function"}function g4(e,t){let[r,a,l]=LE(t),o;if(v4(e))o=()=>CS(e());else{const d=CS(e);o=()=>d}function u(d=o(),m){let h=[r[m.type],...a.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[l]),h.reduce((p,v)=>{if(v)if(ka(p)){const b=v(p,m);return b===void 0?p:b}else{if($n(p))return TE(p,x=>v(x,m));{const x=v(p,m);if(x===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return p},d)}return u.getInitialState=o,u}var x4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",y4=(e=21)=>{let t="",r=e;for(;r--;)t+=x4[Math.random()*64|0];return t},b4=Symbol.for("rtk-slice-createasyncthunk");function j4(e,t){return`${e}/${t}`}function N4({creators:e}={}){const t=e?.asyncThunk?.[b4];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(tn(11));const u=(typeof a.reducers=="function"?a.reducers(S4()):a.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(w,E){const O=typeof w=="string"?w:w.type;if(!O)throw new Error(tn(12));if(O in m.sliceCaseReducersByType)throw new Error(tn(13));return m.sliceCaseReducersByType[O]=E,h},addMatcher(w,E){return m.sliceMatchers.push({matcher:w,reducer:E}),h},exposeAction(w,E){return m.actionCreators[w]=E,h},exposeCaseReducer(w,E){return m.sliceCaseReducersByName[w]=E,h}};d.forEach(w=>{const E=u[w],O={reducerName:w,type:j4(l,w),createNotation:typeof a.reducers=="function"};C4(E)?E4(O,E,h,t):w4(O,E,h)});function p(){const[w={},E=[],O=void 0]=typeof a.extraReducers=="function"?LE(a.extraReducers):[a.extraReducers],P={...w,...m.sliceCaseReducersByType};return g4(a.initialState,L=>{for(let T in P)L.addCase(T,P[T]);for(let T of m.sliceMatchers)L.addMatcher(T.matcher,T.reducer);for(let T of E)L.addMatcher(T.matcher,T.reducer);O&&L.addDefaultCase(O)})}const v=w=>w,x=new Map,b=new WeakMap;let _;function N(w,E){return _||(_=p()),_(w,E)}function S(){return _||(_=p()),_.getInitialState()}function C(w,E=!1){function O(L){let T=L[w];return typeof T>"u"&&E&&(T=_d(b,O,S)),T}function P(L=v){const T=_d(x,E,()=>new WeakMap);return _d(T,L,()=>{const D={};for(const[k,$]of Object.entries(a.selectors??{}))D[k]=_4($,L,()=>_d(b,L,S),E);return D})}return{reducerPath:w,getSelectors:P,get selectors(){return P(O)},selectSlice:O}}const z={name:l,reducer:N,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...C(o),injectInto(w,{reducerPath:E,...O}={}){const P=E??o;return w.inject({reducerPath:P,reducer:N},O),{...z,...C(P,!0)}}};return z}}function _4(e,t,r,a){function l(o,...u){let d=t(o);return typeof d>"u"&&a&&(d=r()),e(d,...u)}return l.unwrapped=e,l}var Ur=N4();function S4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function w4({type:e,reducerName:t,createNotation:r},a,l){let o,u;if("reducer"in a){if(r&&!A4(a))throw new Error(tn(17));o=a.reducer,u=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?Cn(e,u):Cn(e))}function C4(e){return e._reducerDefinitionType==="asyncThunk"}function A4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function E4({type:e,reducerName:t},r,a,l){if(!l)throw new Error(tn(18));const{payloadCreator:o,fulfilled:u,pending:d,rejected:m,settled:h,options:p}=r,v=l(e,o,p);a.exposeAction(t,v),u&&a.addCase(v.fulfilled,u),d&&a.addCase(v.pending,d),m&&a.addCase(v.rejected,m),h&&a.addMatcher(v.settled,h),a.exposeCaseReducer(t,{fulfilled:u||Sd,pending:d||Sd,rejected:m||Sd,settled:h||Sd})}function Sd(){}var z4="task",IE="listener",$E="completed",zy="cancelled",O4=`task-${zy}`,D4=`task-${$E}`,jx=`${IE}-${zy}`,M4=`${IE}-${$E}`,um=class{constructor(e){this.code=e,this.message=`${z4} ${zy} (reason: ${e})`}name="TaskAbortError";message},Oy=(e,t)=>{if(typeof e!="function")throw new TypeError(tn(32))},ff=()=>{},BE=(e,t=ff)=>(e.catch(t),e),UE=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ys=e=>{if(e.aborted)throw new um(e.reason)};function HE(e,t){let r=ff;return new Promise((a,l)=>{const o=()=>l(new um(e.reason));if(e.aborted){o();return}r=UE(e,o),t.finally(()=>r()).then(a,l)}).finally(()=>{r=ff})}var T4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof um?"cancelled":"rejected",error:r}}finally{t?.()}},mf=e=>t=>BE(HE(e,t).then(r=>(ys(e),r))),GE=e=>{const t=mf(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:Rl}=Object,ES={},dm="listenerMiddleware",P4=(e,t)=>{const r=a=>UE(e,()=>a.abort(e.reason));return(a,l)=>{Oy(a);const o=new AbortController;r(o);const u=T4(async()=>{ys(e),ys(o.signal);const d=await a({pause:mf(o.signal),delay:GE(o.signal),signal:o.signal});return ys(o.signal),d},()=>o.abort(D4));return l?.autoJoin&&t.push(u.catch(ff)),{result:mf(e)(u),cancel(){o.abort(O4)}}}},k4=(e,t)=>{const r=async(a,l)=>{ys(t);let o=()=>{};const d=[new Promise((m,h)=>{let p=e({predicate:a,effect:(v,x)=>{x.unsubscribe(),m([v,x.getState(),x.getOriginalState()])}});o=()=>{p(),h()}})];l!=null&&d.push(new Promise(m=>setTimeout(m,l,null)));try{const m=await HE(t,Promise.race(d));return ys(t),m}finally{o()}};return(a,l)=>BE(r(a,l))},FE=e=>{let{type:t,actionCreator:r,matcher:a,predicate:l,effect:o}=e;if(t)l=Cn(t).match;else if(r)t=r.type,l=r.match;else if(a)l=a;else if(!l)throw new Error(tn(21));return Oy(o),{predicate:l,type:t,effect:o}},QE=Rl(e=>{const{type:t,predicate:r,effect:a}=FE(e);return{id:y4(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(tn(22))}}},{withTypes:()=>QE}),zS=(e,t)=>{const{type:r,effect:a,predicate:l}=FE(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===l)&&o.effect===a)},Nx=e=>{e.pending.forEach(t=>{t.abort(jx)})},q4=(e,t)=>()=>{for(const r of t.keys())Nx(r);e.clear()},OS=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},VE=Rl(Cn(`${dm}/add`),{withTypes:()=>VE}),R4=Cn(`${dm}/removeAll`),YE=Rl(Cn(`${dm}/remove`),{withTypes:()=>YE}),L4=(...e)=>{console.error(`${dm}/error`,...e)},Uc=(e={})=>{const t=new Map,r=new Map,a=b=>{const _=r.get(b)??0;r.set(b,_+1)},l=b=>{const _=r.get(b)??1;_===1?r.delete(b):r.set(b,_-1)},{extra:o,onError:u=L4}=e;Oy(u);const d=b=>(b.unsubscribe=()=>t.delete(b.id),t.set(b.id,b),_=>{b.unsubscribe(),_?.cancelActive&&Nx(b)}),m=b=>{const _=zS(t,b)??QE(b);return d(_)};Rl(m,{withTypes:()=>m});const h=b=>{const _=zS(t,b);return _&&(_.unsubscribe(),b.cancelActive&&Nx(_)),!!_};Rl(h,{withTypes:()=>h});const p=async(b,_,N,S)=>{const C=new AbortController,z=k4(m,C.signal),w=[];try{b.pending.add(C),a(b),await Promise.resolve(b.effect(_,Rl({},N,{getOriginalState:S,condition:(E,O)=>z(E,O).then(Boolean),take:z,delay:GE(C.signal),pause:mf(C.signal),extra:o,signal:C.signal,fork:P4(C.signal,w),unsubscribe:b.unsubscribe,subscribe:()=>{t.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((E,O,P)=>{E!==C&&(E.abort(jx),P.delete(E))})},cancel:()=>{C.abort(jx),b.pending.delete(C)},throwIfCancelled:()=>{ys(C.signal)}})))}catch(E){E instanceof um||OS(u,E,{raisedBy:"effect"})}finally{await Promise.all(w),C.abort(M4),l(b),b.pending.delete(C)}},v=q4(t,r);return{middleware:b=>_=>N=>{if(!_E(N))return _(N);if(VE.match(N))return m(N.payload);if(R4.match(N)){v();return}if(YE.match(N))return h(N.payload);let S=b.getState();const C=()=>{if(S===ES)throw new Error(tn(23));return S};let z;try{if(z=_(N),t.size>0){const w=b.getState(),E=Array.from(t.values());for(const O of E){let P=!1;try{P=O.predicate(N,w,S)}catch(L){P=!1,OS(u,L,{raisedBy:"predicate"})}P&&p(O,N,b,C)}}}finally{S=ES}return z},startListening:m,stopListening:h,clearListeners:v}};function tn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var I4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},KE=Ur({name:"chartLayout",initialState:I4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,a,l,o;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:$4,setLayout:B4,setChartSize:U4,setScale:H4}=KE.actions,G4=KE.reducer;function XE(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Xe(e){return Number.isFinite(e)}function aa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function DS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DS(Object(r),!0).forEach(function(a){F4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function F4(e,t,r){return(t=Q4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q4(e){var t=V4(e,"string");return typeof t=="symbol"?t:t+""}function V4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ut(e,t,r){return At(e)||At(t)?r:na(t)?Ul(e,t,r):typeof t=="function"?t(e):r}var Y4=(e,t,r)=>{if(t&&r){var{width:a,height:l}=r,{align:o,verticalAlign:u,layout:d}=t;if((d==="vertical"||d==="horizontal"&&u==="middle")&&o!=="center"&&Se(e[o]))return Pl(Pl({},e),{},{[o]:e[o]+(a||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&u!=="middle"&&Se(e[u]))return Pl(Pl({},e),{},{[u]:e[u]+(l||0)})}return e},Ha=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",WE=(e,t,r,a)=>{if(a)return e.map(d=>d.coordinate);var l,o,u=e.map(d=>(d.coordinate===t&&(l=!0),d.coordinate===r&&(o=!0),d.coordinate));return l||u.push(t),o||u.push(r),u},ZE=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:l,range:o,scale:u,realScaleType:d,isCategorical:m,categoricalDomain:h,tickCount:p,ticks:v,niceTicks:x,axisType:b}=e;if(!u)return null;var _=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,N=l==="category"&&u.bandwidth?u.bandwidth()/_:0;if(N=b==="angleAxis"&&o&&o.length>=2?Lr(o[0]-o[1])*2*N:N,v||x){var S=(v||x||[]).map((C,z)=>{var w=a?a.indexOf(C):C,E=u.map(w);return Xe(E)?{coordinate:E+N,value:C,offset:N,index:z}:null}).filter(Ir);return S}return m&&h?h.map((C,z)=>{var w=u.map(C);return Xe(w)?{coordinate:w+N,value:C,index:z,offset:N}:null}).filter(Ir):u.ticks&&p!=null?u.ticks(p).map((C,z)=>{var w=u.map(C);return Xe(w)?{coordinate:w+N,value:C,index:z,offset:N}:null}).filter(Ir):u.domain().map((C,z)=>{var w=u.map(C);return Xe(w)?{coordinate:w+N,value:a?a[C]:C,index:z,offset:N}:null}).filter(Ir)},K4=(e,t)=>{if(!t||t.length!==2||!Se(t[0])||!Se(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!Se(e[0])||e[0]<r)&&(l[0]=r),(!Se(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<r&&(l[1]=r),l},X4=e=>{var t,r=e.length;if(!(r<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0,d=0;d<r;++d){var m=e[d],h=m?.[l];if(h!=null){var p=h[1],v=h[0],x=ra(p)?v:p;x>=0?(h[0]=o,o+=x,h[1]=o):(h[0]=u,u+=x,h[1]=u)}}}},W4=e=>{var t,r=e.length;if(!(r<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0;u<r;++u){var d=e[u],m=d?.[l];if(m!=null){var h=ra(m[1])?m[0]:m[1];h>=0?(m[0]=o,o+=h,m[1]=o):(m[0]=0,m[1]=0)}}}},Z4={sign:X4,expand:CR,none:Ns,silhouette:AR,wiggle:ER,positive:W4},J4=(e,t,r)=>{var a,l=(a=Z4[r])!==null&&a!==void 0?a:Ns,o=wR().keys(t).value((d,m)=>Number(Ut(d,m,0))).order(dx).offset(l),u=o(e);return u.forEach((d,m)=>{d.forEach((h,p)=>{var v=Ut(e[p],t[m],0);Array.isArray(v)&&v.length===2&&Se(v[0])&&Se(v[1])&&(h[0]=v[0],h[1]=v[1])})}),u};function e6(e){return e==null?void 0:String(e)}function MS(e){var{axis:t,ticks:r,bandSize:a,entry:l,index:o,dataKey:u}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!At(l[t.dataKey])){var d=iE(r,"value",l[t.dataKey]);if(d)return d.coordinate+a/2}return r!=null&&r[o]?r[o].coordinate+a/2:null}var m=Ut(l,At(u)?t.dataKey:u),h=t.scale.map(m);return Se(h)?h:null}var TS=e=>{var{axis:t,ticks:r,offset:a,bandSize:l,entry:o,index:u}=e;if(t.type==="category")return r[u]?r[u].coordinate+a:null;var d=Ut(o,t.dataKey,t.scale.domain()[u]);if(At(d))return null;var m=t.scale.map(d);return Se(m)?m-l/2+a:null},t6=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return a<=0&&l>=0?0:l<0?l:a}return r[0]},r6=e=>{var t=e.flat(2).filter(Se);return[Math.min(...t),Math.max(...t)]},n6=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],a6=(e,t,r)=>{if(e!=null)return n6(Object.keys(e).reduce((a,l)=>{var o=e[l];if(!o)return a;var{stackedData:u}=o,d=u.reduce((m,h)=>{var p=XE(h,t,r),v=r6(p);return!Xe(v[0])||!Xe(v[1])?m:[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]))},PS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var l=rm(t,p=>p.coordinate),o=1/0,u=1,d=l.length;u<d;u++){var m=l[u],h=l[u-1];o=Math.min((m?.coordinate||0)-(h?.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function qS(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:l,name:o}=e;return Pl(Pl({},t),{},{dataKey:r,payload:a,value:l,name:o})}function fm(e,t){if(e)return String(e);if(typeof t=="string")return t}var i6=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},s6=(e,t)=>t==="centric"?e.angle:e.radius,Ga=e=>e.layout.width,Fa=e=>e.layout.height,l6=e=>e.layout.scale,JE=e=>e.layout.margin,mm=re(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),hm=re(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),o6="data-recharts-item-index",c6="data-recharts-item-id",Hc=60;function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RS(Object(r),!0).forEach(function(a){u6(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function u6(e,t,r){return(t=d6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d6(e){var t=f6(e,"string");return typeof t=="symbol"?t:t+""}function f6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m6=e=>e.brush.height;function h6(e){var t=hm(e);return t.reduce((r,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Hc;return r+l}return r},0)}function p6(e){var t=hm(e);return t.reduce((r,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Hc;return r+l}return r},0)}function v6(e){var t=mm(e);return t.reduce((r,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?r+a.height:r,0)}function g6(e){var t=mm(e);return t.reduce((r,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?r+a.height:r,0)}var ar=re([Ga,Fa,JE,m6,h6,p6,v6,g6,bE,U5],(e,t,r,a,l,o,u,d,m,h)=>{var p={left:(r.left||0)+l,right:(r.right||0)+o},v={top:(r.top||0)+u,bottom:(r.bottom||0)+d},x=wd(wd({},v),p),b=x.bottom;x.bottom+=a,x=Y4(x,m,h);var _=e-x.left-x.right,N=t-x.top-x.bottom;return wd(wd({brushBottom:b},x),{},{width:Math.max(_,0),height:Math.max(N,0)})}),x6=re(ar,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Dy=re(Ga,Fa,(e,t)=>({x:0,y:0,width:e,height:t})),y6=y.createContext(null),Nr=()=>y.useContext(y6)!=null,pm=e=>e.brush,vm=re([pm,ar,JE],(e,t,r)=>({height:e.height,x:Se(e.x)?e.x:t.left,y:Se(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Se(e.width)?e.width:t.width})),xg={},yg={},bg={},LS;function b6(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:l,edges:o}={}){let u,d=null;const m=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),p=()=>{d!==null&&(r.apply(u,d),u=void 0,d=null)},v=()=>{h&&p(),N()};let x=null;const b=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,v()},a)},_=()=>{x!==null&&(clearTimeout(x),x=null)},N=()=>{_(),u=void 0,d=null},S=()=>{p()},C=function(...z){if(l?.aborted)return;u=this,d=z;const w=x==null;b(),m&&w&&p()};return C.schedule=b,C.cancel=N,C.flush=S,l?.addEventListener("abort",N,{once:!0}),C}e.debounce=t})(bg)),bg}var IS;function j6(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b6();function r(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:d=!0,maxWait:m}=o,h=Array(2);u&&(h[0]="leading"),d&&(h[1]="trailing");let p,v=null;const x=t.debounce(function(...N){p=a.apply(this,N),v=null},l,{edges:h}),b=function(...N){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(p=a.apply(this,N),v=Date.now(),x.cancel(),x.schedule(),p):(x.apply(this,N),p)},_=()=>(x.flush(),p);return b.cancel=x.cancel,b.flush=_,b}e.debounce=r})(yg)),yg}var $S;function N6(){return $S||($S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j6();function r(a,l=0,o={}){const{leading:u=!0,trailing:d=!0}=o;return t.debounce(a,l,{leading:u,maxWait:l,trailing:d})}e.throttle=r})(xg)),xg}var jg,BS;function _6(){return BS||(BS=1,jg=N6().throttle),jg}var S6=_6();const w6=Ua(S6);var hf=function(t,r){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(r.replace(/%s/g,()=>l[u++]))}},Jn={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},ez=(e,t,r)=>{var{width:a=Jn.width,height:l=Jn.height,aspect:o,maxHeight:u}=r,d=_s(a)?e:Number(a),m=_s(l)?t:Number(l);return o&&o>0&&(d?m=d/o:m&&(d=m*o),u&&m!=null&&m>u&&(m=u)),{calculatedWidth:d,calculatedHeight:m}},C6={width:0,height:0,overflow:"visible"},A6={width:0,overflowX:"visible"},E6={height:0,overflowY:"visible"},z6={},O6=e=>{var{width:t,height:r}=e,a=_s(t),l=_s(r);return a&&l?C6:a?A6:l?E6:z6};function D6(e){var{width:t,height:r,aspect:a}=e,l=t,o=r;return l===void 0&&o===void 0?(l=Jn.width,o=Jn.height):l===void 0?l=a&&a>0?void 0:Jn.width:o===void 0&&(o=a&&a>0?void 0:Jn.height),{width:l,height:o}}function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_x.apply(null,arguments)}function US(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function HS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?US(Object(r),!0).forEach(function(a){M6(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function M6(e,t,r){return(t=T6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T6(e){var t=P6(e,"string");return typeof t=="symbol"?t:t+""}function P6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tz=y.createContext(Jn.initialDimension);function k6(e){return aa(e.width)&&aa(e.height)}function rz(e){var{children:t,width:r,height:a}=e,l=y.useMemo(()=>({width:r,height:a}),[r,a]);return k6(l)?y.createElement(tz.Provider,{value:l},t):null}var My=()=>y.useContext(tz),q6=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:a=Jn.initialDimension,width:l,height:o,minWidth:u=Jn.minWidth,minHeight:d,maxHeight:m,children:h,debounce:p=Jn.debounce,id:v,className:x,onResize:b,style:_={}}=e,N=y.useRef(null),S=y.useRef();S.current=b,y.useImperativeHandle(t,()=>N.current);var[C,z]=y.useState({containerWidth:a.width,containerHeight:a.height}),w=y.useCallback((T,D)=>{z(k=>{var $=Math.round(T),B=Math.round(D);return k.containerWidth===$&&k.containerHeight===B?k:{containerWidth:$,containerHeight:B}})},[]);y.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Ms;var T=B=>{var le,oe=B[0];if(oe!=null){var{width:F,height:q}=oe.contentRect;w(F,q),(le=S.current)===null||le===void 0||le.call(S,F,q)}};p>0&&(T=w6(T,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(T),{width:k,height:$}=N.current.getBoundingClientRect();return w(k,$),D.observe(N.current),()=>{D.disconnect()}},[w,p]);var{containerWidth:E,containerHeight:O}=C;hf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:L}=ez(E,O,{width:l,height:o,aspect:r,maxHeight:m});return hf(P!=null&&P>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,L,l,o,u,d,r),y.createElement("div",{id:v?"".concat(v):void 0,className:mt("recharts-responsive-container",x),style:HS(HS({},_),{},{width:l,height:o,minWidth:u,minHeight:d,maxHeight:m}),ref:N},y.createElement("div",{style:O6({width:l,height:o})},y.createElement(rz,{width:P,height:L},h)))}),GS=y.forwardRef((e,t)=>{var r=My();if(aa(r.width)&&aa(r.height))return e.children;var{width:a,height:l}=D6({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=ez(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Se(o)&&Se(u)?y.createElement(rz,{width:o,height:u},e.children):y.createElement(q6,_x({},e,{width:a,height:l,ref:t}))});function Ty(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var gm=()=>{var e,t=Nr(),r=ze(x6),a=ze(vm),l=(e=ze(pm))===null||e===void 0?void 0:e.padding;return!t||!a||!l?r:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},R6={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},nz=()=>{var e;return(e=ze(ar))!==null&&e!==void 0?e:R6},az=()=>ze(Ga),iz=()=>ze(Fa),lt=e=>e.layout.layoutType,Ts=()=>ze(lt),sz=()=>{var e=Ts();if(e==="horizontal"||e==="vertical")return e},lz=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},L6=()=>{var e=Ts();return e!==void 0},Gc=e=>{var t=qt(),r=Nr(),{width:a,height:l}=e,o=My(),u=a,d=l;return o&&(u=o.width>0?o.width:a,d=o.height>0?o.height:l),y.useEffect(()=>{!r&&aa(u)&&aa(d)&&t(U4({width:u,height:d}))},[t,r,u,d]),null},oz=Symbol.for("immer-nothing"),FS=Symbol.for("immer-draftable"),rn=Symbol.for("immer-state");function kn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cc=Object.getPrototypeOf;function Fl(e){return!!e&&!!e[rn]}function ws(e){return e?cz(e)||Array.isArray(e)||!!e[FS]||!!e.constructor?.[FS]||Fc(e)||ym(e):!1}var I6=Object.prototype.constructor.toString(),QS=new WeakMap;function cz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let a=QS.get(r);return a===void 0&&(a=Function.toString.call(r),QS.set(r,a)),a===I6}function pf(e,t,r=!0){xm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function xm(e){const t=e[rn];return t?t.type_:Array.isArray(e)?1:Fc(e)?2:ym(e)?3:0}function Sx(e,t){return xm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uz(e,t,r){const a=xm(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function $6(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fc(e){return e instanceof Map}function ym(e){return e instanceof Set}function fs(e){return e.copy_||e.base_}function wx(e,t){if(Fc(e))return new Map(e);if(ym(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cz(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[rn];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(a[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(Cc(e),a)}else{const a=Cc(e);if(a!==null&&r)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function Py(e,t=!1){return bm(e)||Fl(e)||!ws(e)||(xm(e)>1&&Object.defineProperties(e,{set:Cd,add:Cd,clear:Cd,delete:Cd}),Object.freeze(e),t&&Object.values(e).forEach(r=>Py(r,!0))),e}function B6(){kn(2)}var Cd={value:B6};function bm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var U6={};function Cs(e){const t=U6[e];return t||kn(0,e),t}var Ac;function dz(){return Ac}function H6(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function VS(e,t){t&&(Cs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cx(e){Ax(e),e.drafts_.forEach(G6),e.drafts_=null}function Ax(e){e===Ac&&(Ac=e.parent_)}function YS(e){return Ac=H6(Ac,e)}function G6(e){const t=e[rn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function KS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[rn].modified_&&(Cx(t),kn(4)),ws(e)&&(e=vf(t,e),t.parent_||gf(t,e)),t.patches_&&Cs("Patches").generateReplacementPatches_(r[rn].base_,e,t.patches_,t.inversePatches_)):e=vf(t,r,[]),Cx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==oz?e:void 0}function vf(e,t,r){if(bm(t))return t;const a=e.immer_.shouldUseStrictIteration(),l=t[rn];if(!l)return pf(t,(o,u)=>XS(e,l,t,o,u,r),a),t;if(l.scope_!==e)return t;if(!l.modified_)return gf(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,d=!1;l.type_===3&&(u=new Set(o),o.clear(),d=!0),pf(u,(m,h)=>XS(e,l,o,m,h,r,d),a),gf(e,o,!1),r&&e.patches_&&Cs("Patches").generatePatches_(l,r,e.patches_,e.inversePatches_)}return l.copy_}function XS(e,t,r,a,l,o,u){if(l==null||typeof l!="object"&&!u)return;const d=bm(l);if(!(d&&!u)){if(Fl(l)){const m=o&&t&&t.type_!==3&&!Sx(t.assigned_,a)?o.concat(a):void 0,h=vf(e,l,m);if(uz(r,a,h),Fl(h))e.canAutoFreeze_=!1;else return}else u&&r.add(l);if(ws(l)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===l&&d)return;vf(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(Fc(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&gf(e,l)}}}function gf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Py(t,r)}function F6(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:dz(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=ky;r&&(l=[a],o=Ec);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,d}var ky={get(e,t){if(t===rn)return e;const r=fs(e);if(!Sx(r,t))return Q6(e,r,t);const a=r[t];return e.finalized_||!ws(a)?a:a===Ng(e.base_,t)?(_g(e),e.copy_[t]=zx(a,e)):a},has(e,t){return t in fs(e)},ownKeys(e){return Reflect.ownKeys(fs(e))},set(e,t,r){const a=fz(fs(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const l=Ng(fs(e),t),o=l?.[rn];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if($6(r,l)&&(r!==void 0||Sx(e.base_,t)))return!0;_g(e),Ex(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ng(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_g(e),Ex(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=fs(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){kn(11)},getPrototypeOf(e){return Cc(e.base_)},setPrototypeOf(){kn(12)}},Ec={};pf(ky,(e,t)=>{Ec[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ec.deleteProperty=function(e,t){return Ec.set.call(this,e,t,void 0)};Ec.set=function(e,t,r){return ky.set.call(this,e[0],t,r,e[0])};function Ng(e,t){const r=e[rn];return(r?fs(r):e)[t]}function Q6(e,t,r){const a=fz(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function fz(e,t){if(!(t in e))return;let r=Cc(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Cc(r)}}function Ex(e){e.modified_||(e.modified_=!0,e.parent_&&Ex(e.parent_))}function _g(e){e.copy_||(e.copy_=wx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var V6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const u=this;return function(m=o,...h){return u.produce(m,p=>r.call(this,p,...h))}}typeof r!="function"&&kn(6),a!==void 0&&typeof a!="function"&&kn(7);let l;if(ws(t)){const o=YS(this),u=zx(t,void 0);let d=!0;try{l=r(u),d=!1}finally{d?Cx(o):Ax(o)}return VS(o,a),KS(l,o)}else if(!t||typeof t!="object"){if(l=r(t),l===void 0&&(l=t),l===oz&&(l=void 0),this.autoFreeze_&&Py(l,!0),a){const o=[],u=[];Cs("Patches").generateReplacementPatches_(t,l,o,u),a(o,u)}return l}else kn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...d)=>this.produceWithPatches(u,m=>t(m,...d));let a,l;return[this.produce(t,r,(u,d)=>{a=u,l=d}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ws(e)||kn(8),Fl(e)&&(e=Y6(e));const t=YS(this),r=zx(e,void 0);return r[rn].isManual_=!0,Ax(t),r}finishDraft(e,t){const r=e&&e[rn];(!r||!r.isManual_)&&kn(9);const{scope_:a}=r;return VS(a,t),KS(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const l=t[r];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}r>-1&&(t=t.slice(r+1));const a=Cs("Patches").applyPatches_;return Fl(e)?a(e,t):this.produce(e,l=>a(l,t))}};function zx(e,t){const r=Fc(e)?Cs("MapSet").proxyMap_(e,t):ym(e)?Cs("MapSet").proxySet_(e,t):F6(e,t);return(t?t.scope_:dz()).drafts_.push(r),r}function Y6(e){return Fl(e)||kn(10,e),mz(e)}function mz(e){if(!ws(e)||bm(e))return e;const t=e[rn];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=wx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=wx(e,!0);return pf(r,(l,o)=>{uz(r,l,mz(o))},a),t&&(t.finalized_=!1),r}var K6=new V6;K6.produce;var X6={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hz=Ur({name:"legend",initialState:X6,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:St()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:a}=t.payload,l=Rn(e).payload.indexOf(r);l>-1&&(e.payload[l]=a)},prepare:St()},removeLegendPayload:{reducer(e,t){var r=Rn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:St()}}}),{setLegendSize:yW,setLegendSettings:bW,addLegendPayload:W6,replaceLegendPayload:Z6,removeLegendPayload:J6}=hz.actions,eL=hz.reducer;function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ox.apply(null,arguments)}function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(r),!0).forEach(function(a){tL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tL(e,t,r){return(t=rL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(e){var t=nL(e,"string");return typeof t=="symbol"?t:t+""}function nL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aL(e){return Array.isArray(e)&&na(e[0])&&na(e[1])?e.join(" ~ "):e}var Al={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},iL=e=>{var{separator:t=Al.separator,contentStyle:r,itemStyle:a,labelStyle:l=Al.labelStyle,payload:o,formatter:u,itemSorter:d,wrapperClassName:m,labelClassName:h,label:p,labelFormatter:v,accessibilityLayer:x=Al.accessibilityLayer}=e,b=()=>{if(o&&o.length){var O={padding:0,margin:0},P=(d?rm(o,d):o).map((L,T)=>{if(L.type==="none")return null;var D=L.formatter||u||aL,{value:k,name:$}=L,B=k,le=$;if(D){var oe=D(k,$,L,T,o);if(Array.isArray(oe))[B,le]=oe;else if(oe!=null)B=oe;else return null}var F=ec(ec({},Al.itemStyle),{},{color:L.color||Al.itemStyle.color},a);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:F},na(le)?y.createElement("span",{className:"recharts-tooltip-item-name"},le):null,na(le)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},B),y.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:O},P)}return null},_=ec(ec({},Al.contentStyle),r),N=ec({margin:0},l),S=!At(p),C=S?p:"",z=mt("recharts-default-tooltip",m),w=mt("recharts-tooltip-label",h);S&&v&&o!==void 0&&o!==null&&(C=v(p,o));var E=x?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Ox({className:z,style:_},E),y.createElement("p",{className:w,style:N},y.isValidElement(C)?C:"".concat(C)),b())},tc="recharts-tooltip-wrapper",sL={visibility:"hidden"};function lL(e){var{coordinate:t,translateX:r,translateY:a}=e;return mt(tc,{["".concat(tc,"-right")]:Se(r)&&t&&Se(t.x)&&r>=t.x,["".concat(tc,"-left")]:Se(r)&&t&&Se(t.x)&&r<t.x,["".concat(tc,"-bottom")]:Se(a)&&t&&Se(t.y)&&a>=t.y,["".concat(tc,"-top")]:Se(a)&&t&&Se(t.y)&&a<t.y})}function ZS(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offset:l,position:o,reverseDirection:u,tooltipDimension:d,viewBox:m,viewBoxDimension:h}=e;if(o&&Se(o[a]))return o[a];var p=r[a]-d-(l>0?l:0),v=r[a]+l;if(t[a])return u[a]?p:v;var x=m[a];if(x==null)return 0;if(u[a]){var b=p,_=x;return b<_?Math.max(v,x):Math.max(p,x)}if(h==null)return 0;var N=v+d,S=x+h;return N>S?Math.max(p,x):Math.max(v,x)}function oL(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function cL(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:a,offsetLeft:l,position:o,reverseDirection:u,tooltipBox:d,useTranslate3d:m,viewBox:h}=e,p,v,x;return d.height>0&&d.width>0&&r?(v=ZS({allowEscapeViewBox:t,coordinate:r,key:"x",offset:l,position:o,reverseDirection:u,tooltipDimension:d.width,viewBox:h,viewBoxDimension:h.width}),x=ZS({allowEscapeViewBox:t,coordinate:r,key:"y",offset:a,position:o,reverseDirection:u,tooltipDimension:d.height,viewBox:h,viewBoxDimension:h.height}),p=oL({translateX:v,translateY:x,useTranslate3d:m})):p=sL,{cssProperties:p,cssClasses:lL({translateX:v,translateY:x,coordinate:r})}}function JS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ad(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JS(Object(r),!0).forEach(function(a){Dx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Dx(e,t,r){return(t=uL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uL(e){var t=dL(e,"string");return typeof t=="symbol"?t:t+""}function dL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class fL extends y.PureComponent{constructor(){super(...arguments),Dx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Dx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:l,children:o,coordinate:u,hasPayload:d,isAnimationActive:m,offset:h,position:p,reverseDirection:v,useTranslate3d:x,viewBox:b,wrapperStyle:_,lastBoundingBox:N,innerRef:S,hasPortalFromProps:C}=this.props,z=typeof h=="number"?h:h.x,w=typeof h=="number"?h:h.y,{cssClasses:E,cssProperties:O}=cL({allowEscapeViewBox:r,coordinate:u,offsetLeft:z,offsetTop:w,position:p,reverseDirection:v,tooltipBox:{height:N.height,width:N.width},useTranslate3d:x,viewBox:b}),P=C?{}:Ad(Ad({transition:m&&t?"transform ".concat(a,"ms ").concat(l):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),L=Ad(Ad({},P),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},_);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:L,ref:S},o)}}var pz=()=>{var e;return(e=ze(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mx.apply(null,arguments)}function ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function tw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ew(Object(r),!0).forEach(function(a){mL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ew(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mL(e,t,r){return(t=hL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hL(e){var t=pL(e,"string");return typeof t=="symbol"?t:t+""}function pL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rw={curveBasisClosed:hR,curveBasisOpen:pR,curveBasis:mR,curveBumpX:J3,curveBumpY:eR,curveLinearClosed:vR,curveLinear:em,curveMonotoneX:gR,curveMonotoneY:xR,curveNatural:yR,curveStep:bR,curveStepAfter:NR,curveStepBefore:jR},xf=e=>Xe(e.x)&&Xe(e.y),nw=e=>e.base!=null&&xf(e.base)&&xf(e),rc=e=>e.x,nc=e=>e.y,vL=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($c(e));if((r==="curveMonotone"||r==="curveBump")&&t){var a=rw["".concat(r).concat(t==="vertical"?"Y":"X")];if(a)return a}return rw[r]||em},aw={connectNulls:!1,type:"linear"},gL=e=>{var{type:t=aw.type,points:r=[],baseLine:a,layout:l,connectNulls:o=aw.connectNulls}=e,u=vL(t,l),d=o?r.filter(xf):r;if(Array.isArray(a)){var m,h=r.map((_,N)=>tw(tw({},_),{},{base:a[N]}));l==="vertical"?m=yd().y(nc).x1(rc).x0(_=>_.base.x):m=yd().x(rc).y1(nc).y0(_=>_.base.y);var p=m.defined(nw).curve(u),v=o?h.filter(nw):h;return p(v)}var x;l==="vertical"&&Se(a)?x=yd().y(nc).x1(rc).x0(a):Se(a)?x=yd().x(rc).y1(nc).y0(a):x=Q2().x(rc).y(nc);var b=x.defined(xf).curve(u);return b(d)},vz=e=>{var{className:t,points:r,path:a,pathRef:l}=e,o=Ts();if((!r||!r.length)&&!a)return null;var u={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},d=r&&r.length?gL(u):a;return y.createElement("path",Mx({},Ln(e),by(e),{className:mt("recharts-curve",t),d:d===null?void 0:d,ref:l}))},xL=["x","y","top","left","width","height","className"];function Tx(){return Tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Tx.apply(null,arguments)}function iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function yL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(r),!0).forEach(function(a){bL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bL(e,t,r){return(t=jL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jL(e){var t=NL(e,"string");return typeof t=="symbol"?t:t+""}function NL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _L(e,t){if(e==null)return{};var r,a,l=SL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function SL(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var wL=(e,t,r,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(r),CL=e=>{var{x:t=0,y:r=0,top:a=0,left:l=0,width:o=0,height:u=0,className:d}=e,m=_L(e,xL),h=yL({x:t,y:r,top:a,left:l,width:o,height:u},m);return!Se(t)||!Se(r)||!Se(o)||!Se(u)||!Se(a)||!Se(l)?null:y.createElement("path",Tx({},Ar(h),{className:mt("recharts-cross",d),d:wL(t,r,o,u,a,l)}))};function AL(e,t,r,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-l,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function lw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(a){EL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function EL(e,t,r){return(t=zL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zL(e){var t=OL(e,"string");return typeof t=="symbol"?t:t+""}function OL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DL=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gz=(e,t,r)=>e.map(a=>"".concat(DL(a)," ").concat(t,"ms ").concat(r)).join(","),ML=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(l=>a.includes(l))),zc=(e,t)=>Object.keys(t).reduce((r,a)=>lw(lw({},r),{},{[a]:e(a,t[a])}),{});function ow(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(r),!0).forEach(function(a){TL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ow(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function TL(e,t,r){return(t=PL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PL(e){var t=kL(e,"string");return typeof t=="symbol"?t:t+""}function kL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yf=(e,t,r)=>e+(t-e)*r,Px=e=>{var{from:t,to:r}=e;return t!==r},xz=(e,t,r)=>{var a=zc((l,o)=>{if(Px(o)){var[u,d]=e(o.from,o.to,o.velocity);return Qt(Qt({},o),{},{from:u,velocity:d})}return o},t);return r<1?zc((l,o)=>Px(o)&&a[l]!=null?Qt(Qt({},o),{},{velocity:yf(o.velocity,a[l].velocity,r),from:yf(o.from,a[l].from,r)}):o,t):xz(e,a,r-1)};function qL(e,t,r,a,l,o){var u,d=a.reduce((x,b)=>Qt(Qt({},x),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),m=()=>zc((x,b)=>b.from,d),h=()=>!Object.values(d).filter(Px).length,p=null,v=x=>{u||(u=x);var b=x-u,_=b/r.dt;d=xz(r,d,_),l(Qt(Qt(Qt({},e),t),m())),u=x,h()||(p=o.setTimeout(v))};return()=>(p=o.setTimeout(v),()=>{var x;(x=p)===null||x===void 0||x()})}function RL(e,t,r,a,l,o,u){var d=null,m=l.reduce((v,x)=>{var b=e[x],_=t[x];return b==null||_==null?v:Qt(Qt({},v),{},{[x]:[b,_]})},{}),h,p=v=>{h||(h=v);var x=(v-h)/a,b=zc((N,S)=>yf(...S,r(x)),m);if(o(Qt(Qt(Qt({},e),t),b)),x<1)d=u.setTimeout(p);else{var _=zc((N,S)=>yf(...S,r(1)),m);o(Qt(Qt(Qt({},e),t),_))}};return()=>(d=u.setTimeout(p),()=>{var v;(v=d)===null||v===void 0||v()})}const LL=(e,t,r,a,l,o)=>{var u=ML(e,t);return r==null?()=>(l(Qt(Qt({},e),t)),()=>{}):r.isStepper===!0?qL(e,t,r,u,l,o):RL(e,t,r,a,u,l,o)};var bf=1e-4,yz=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bz=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),cw=(e,t)=>r=>{var a=yz(e,t);return bz(a,r)},IL=(e,t)=>r=>{var a=yz(e,t),l=[...a.map((o,u)=>o*u).slice(1),0];return bz(l,r)},$L=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var a=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var l=a.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},BL=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=$L(r[0]);if(l)return l}}return r.length===4?r:[0,0,1,1]},UL=(e,t,r,a)=>{var l=cw(e,r),o=cw(t,a),u=IL(e,r),d=h=>h>1?1:h<0?0:h,m=h=>{for(var p=h>1?1:h,v=p,x=0;x<8;++x){var b=l(v)-p,_=u(v);if(Math.abs(b-p)<bf||_<bf)return o(v);v=d(v-b/_)}return o(v)};return m.isStepper=!1,m},uw=function(){return UL(...BL(...arguments))},HL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:l=17}=t,o=(u,d,m)=>{var h=-(u-d)*r,p=m*a,v=m+(h-p)*l/1e3,x=m*l/1e3+u;return Math.abs(x-d)<bf&&Math.abs(v)<bf?[d,0]:[x,v]};return o.isStepper=!0,o.dt=l,o},GL=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uw(e);case"spring":return HL();default:if(e.split("(")[0]==="cubic-bezier")return uw(e)}return typeof e=="function"?e:null};function FL(e){var t,r=()=>null,a=!1,l=null,o=u=>{if(!a){if(Array.isArray(u)){if(!u.length)return;var d=u,[m,...h]=d;if(typeof m=="number"){l=e.setTimeout(o.bind(null,h),m);return}o(m),l=e.setTimeout(o.bind(null,h));return}typeof u=="string"&&(t=u,r(t)),typeof u=="object"&&(t=u,r(t)),typeof u=="function"&&u()}};return{stop:()=>{a=!0},start:u=>{a=!1,l&&(l(),l=null),o(u)},subscribe:u=>(r=u,()=>{r=()=>null}),getTimeoutController:()=>e}}class QL{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=u=>{u-a>=r?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function VL(){return FL(new QL)}var YL=y.createContext(VL);function KL(e,t){var r=y.useContext(YL);return y.useMemo(()=>t??r(e),[e,t,r])}var XL=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),jm={isSsr:XL()},WL={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},dw={t:0},Sg={t:1};function Nm(e){var t=zr(e,WL),{isActive:r,canBegin:a,duration:l,easing:o,begin:u,onAnimationEnd:d,onAnimationStart:m,children:h}=t,p=r==="auto"?!jm.isSsr:r,v=KL(t.animationId,t.animationManager),[x,b]=y.useState(p?dw:Sg),_=y.useRef(null);return y.useEffect(()=>{p||b(Sg)},[p]),y.useEffect(()=>{if(!p||!a)return Ms;var N=LL(dw,Sg,GL(o),l,b,v.getTimeoutController()),S=()=>{_.current=N()};return v.start([m,u,S,l,d]),()=>{v.stop(),_.current&&_.current(),d()}},[p,a,l,o,u,m,d,v]),h(x.t)}function _m(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Nc(t)),a=y.useRef(e);return a.current!==e&&(r.current=Nc(t),a.current=e),r.current}var ZL=["radius"],JL=["radius"],fw,mw,hw,pw,vw,gw,xw,yw,bw,jw;function Nw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function _w(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nw(Object(r),!0).forEach(function(a){eI(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eI(e,t,r){return(t=tI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tI(e){var t=rI(e,"string");return typeof t=="symbol"?t:t+""}function rI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jf(){return jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jf.apply(null,arguments)}function Sw(e,t){if(e==null)return{};var r,a,l=nI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function nI(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Kn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ww=(e,t,r,a,l)=>{var o=Ei(r),u=Ei(a),d=Math.min(Math.abs(o)/2,Math.abs(u)/2),m=u>=0?1:-1,h=o>=0?1:-1,p=u>=0&&o>=0||u<0&&o<0?1:0,v;if(d>0&&Array.isArray(l)){for(var x=[0,0,0,0],b=0,_=4;b<_;b++){var N,S=(N=l[b])!==null&&N!==void 0?N:0;x[b]=S>d?d:S}v=Mt(fw||(fw=Kn(["M",",",""])),e,t+m*x[0]),x[0]>0&&(v+=Mt(mw||(mw=Kn(["A ",",",",0,0,",",",",",""])),x[0],x[0],p,e+h*x[0],t)),v+=Mt(hw||(hw=Kn(["L ",",",""])),e+r-h*x[1],t),x[1]>0&&(v+=Mt(pw||(pw=Kn(["A ",",",",0,0,",`,
        `,",",""])),x[1],x[1],p,e+r,t+m*x[1])),v+=Mt(vw||(vw=Kn(["L ",",",""])),e+r,t+a-m*x[2]),x[2]>0&&(v+=Mt(gw||(gw=Kn(["A ",",",",0,0,",`,
        `,",",""])),x[2],x[2],p,e+r-h*x[2],t+a)),v+=Mt(xw||(xw=Kn(["L ",",",""])),e+h*x[3],t+a),x[3]>0&&(v+=Mt(yw||(yw=Kn(["A ",",",",0,0,",`,
        `,",",""])),x[3],x[3],p,e,t+a-m*x[3])),v+="Z"}else if(d>0&&l===+l&&l>0){var C=Math.min(d,l);v=Mt(bw||(bw=Kn(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*C,C,C,p,e+h*C,t,e+r-h*C,t,C,C,p,e+r,t+m*C,e+r,t+a-m*C,C,C,p,e+r-h*C,t+a,e+h*C,t+a,C,C,p,e,t+a-m*C)}else v=Mt(jw||(jw=Kn(["M ",","," h "," v "," h "," Z"])),e,t,r,a,-r);return v},Cw={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jz=e=>{var t=zr(e,Cw),r=y.useRef(null),[a,l]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var J=r.current.getTotalLength();J&&l(J)}catch{}},[]);var{x:o,y:u,width:d,height:m,radius:h,className:p}=t,{animationEasing:v,animationDuration:x,animationBegin:b,isAnimationActive:_,isUpdateAnimationActive:N}=t,S=y.useRef(d),C=y.useRef(m),z=y.useRef(o),w=y.useRef(u),E=y.useMemo(()=>({x:o,y:u,width:d,height:m,radius:h}),[o,u,d,m,h]),O=_m(E,"rectangle-");if(o!==+o||u!==+u||d!==+d||m!==+m||d===0||m===0)return null;var P=mt("recharts-rectangle",p);if(!N){var L=Ar(t),{radius:T}=L,D=Sw(L,ZL);return y.createElement("path",jf({},D,{x:Ei(o),y:Ei(u),width:Ei(d),height:Ei(m),radius:typeof h=="number"?h:void 0,className:P,d:ww(o,u,d,m,h)}))}var k=S.current,$=C.current,B=z.current,le=w.current,oe="0px ".concat(a===-1?1:a,"px"),F="".concat(a,"px 0px"),q=gz(["strokeDasharray"],x,typeof v=="string"?v:Cw.animationEasing);return y.createElement(Nm,{animationId:O,key:O,canBegin:a>0,duration:x,easing:v,isActive:N,begin:b},J=>{var Q=Tt(k,d,J),ve=Tt($,m,J),U=Tt(B,o,J),ge=Tt(le,u,J);r.current&&(S.current=Q,C.current=ve,z.current=U,w.current=ge);var ee;_?J>0?ee={transition:q,strokeDasharray:F}:ee={strokeDasharray:oe}:ee={strokeDasharray:F};var me=Ar(t),{radius:xe}=me,pe=Sw(me,JL);return y.createElement("path",jf({},pe,{radius:typeof h=="number"?h:void 0,className:P,d:ww(U,ge,Q,ve,h),ref:r,style:_w(_w({},ee),t.style)}))})};function Aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ew(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(r),!0).forEach(function(a){aI(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function aI(e,t,r){return(t=iI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iI(e){var t=sI(e,"string");return typeof t=="symbol"?t:t+""}function sI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nf=Math.PI/180,lI=e=>e*180/Math.PI,pr=(e,t,r,a)=>({x:e+Math.cos(-Nf*a)*r,y:t+Math.sin(-Nf*a)*r}),oI=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},cI=(e,t)=>{var{x:r,y:a}=e,{x:l,y:o}=t;return Math.sqrt((r-l)**2+(a-o)**2)},uI=(e,t)=>{var{x:r,y:a}=e,{cx:l,cy:o}=t,u=cI({x:r,y:a},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var d=(r-l)/u,m=Math.acos(d);return a>o&&(m=2*Math.PI-m),{radius:u,angle:lI(m),angleInRadian:m}},dI=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),l=Math.floor(r/360),o=Math.min(a,l);return{startAngle:t-o*360,endAngle:r-o*360}},fI=(e,t)=>{var{startAngle:r,endAngle:a}=t,l=Math.floor(r/360),o=Math.floor(a/360),u=Math.min(l,o);return e+u*360},mI=(e,t)=>{var{chartX:r,chartY:a}=e,{radius:l,angle:o}=uI({x:r,y:a},t),{innerRadius:u,outerRadius:d}=t;if(l<u||l>d||l===0)return null;var{startAngle:m,endAngle:h}=dI(t),p=o,v;if(m<=h){for(;p>h;)p-=360;for(;p<m;)p+=360;v=p>=m&&p<=h}else{for(;p>m;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=m}return v?Ew(Ew({},t),{},{radius:l,angle:fI(p,t)}):null};function Nz(e){var{cx:t,cy:r,radius:a,startAngle:l,endAngle:o}=e,u=pr(t,r,a,l),d=pr(t,r,a,o);return{points:[u,d],cx:t,cy:r,radius:a,startAngle:l,endAngle:o}}var zw,Ow,Dw,Mw,Tw,Pw,kw;function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kx.apply(null,arguments)}function hs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var hI=(e,t)=>{var r=Lr(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},Ed=e=>{var{cx:t,cy:r,radius:a,angle:l,sign:o,isExternal:u,cornerRadius:d,cornerIsExternal:m}=e,h=d*(u?1:-1)+a,p=Math.asin(d/h)/Nf,v=m?l:l+o*p,x=pr(t,r,h,v),b=pr(t,r,a,v),_=m?l-o*p:l,N=pr(t,r,h*Math.cos(p*Nf),_);return{center:x,circleTangency:b,lineTangency:N,theta:p}},_z=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:l,startAngle:o,endAngle:u}=e,d=hI(o,u),m=o+d,h=pr(t,r,l,o),p=pr(t,r,l,m),v=Mt(zw||(zw=hs(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,l,l,+(Math.abs(d)>180),+(o>m),p.x,p.y);if(a>0){var x=pr(t,r,a,o),b=pr(t,r,a,m);v+=Mt(Ow||(Ow=hs(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),b.x,b.y,a,a,+(Math.abs(d)>180),+(o<=m),x.x,x.y)}else v+=Mt(Dw||(Dw=hs(["L ",","," Z"])),t,r);return v},pI=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:h}=e,p=Lr(h-m),{circleTangency:v,lineTangency:x,theta:b}=Ed({cx:t,cy:r,radius:l,angle:m,sign:p,cornerRadius:o,cornerIsExternal:d}),{circleTangency:_,lineTangency:N,theta:S}=Ed({cx:t,cy:r,radius:l,angle:h,sign:-p,cornerRadius:o,cornerIsExternal:d}),C=d?Math.abs(m-h):Math.abs(m-h)-b-S;if(C<0)return u?Mt(Mw||(Mw=hs(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),x.x,x.y,o,o,o*2,o,o,-o*2):_z({cx:t,cy:r,innerRadius:a,outerRadius:l,startAngle:m,endAngle:h});var z=Mt(Tw||(Tw=hs(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),x.x,x.y,o,o,+(p<0),v.x,v.y,l,l,+(C>180),+(p<0),_.x,_.y,o,o,+(p<0),N.x,N.y);if(a>0){var{circleTangency:w,lineTangency:E,theta:O}=Ed({cx:t,cy:r,radius:a,angle:m,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:P,lineTangency:L,theta:T}=Ed({cx:t,cy:r,radius:a,angle:h,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),D=d?Math.abs(m-h):Math.abs(m-h)-O-T;if(D<0&&o===0)return"".concat(z,"L").concat(t,",").concat(r,"Z");z+=Mt(Pw||(Pw=hs(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,o,o,+(p<0),P.x,P.y,a,a,+(D>180),+(p>0),w.x,w.y,o,o,+(p<0),E.x,E.y)}else z+=Mt(kw||(kw=hs(["L",",","Z"])),t,r);return z},vI={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sz=e=>{var t=zr(e,vI),{cx:r,cy:a,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:m,startAngle:h,endAngle:p,className:v}=t;if(o<l||h===p)return null;var x=mt("recharts-sector",v),b=o-l,_=In(u,b,0,!0),N;return _>0&&Math.abs(h-p)<360?N=pI({cx:r,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(_,b/2),forceCornerRadius:d,cornerIsExternal:m,startAngle:h,endAngle:p}):N=_z({cx:r,cy:a,innerRadius:l,outerRadius:o,startAngle:h,endAngle:p}),y.createElement("path",kx({},Ar(t),{className:x,d:N}))};function gI(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(oE(t)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:u,angle:d}=t,m=pr(a,l,o,d),h=pr(a,l,u,d);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return Nz(t)}}var wg={},Cg={},Ag={},qw;function xI(){return qw||(qw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xE();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r})(Ag)),Ag}var Rw;function yI(){return Rw||(Rw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xI();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r})(Cg)),Cg}var Lw;function bI(){return Lw||(Lw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yE(),r=yI();function a(l,o,u){u&&typeof u!="number"&&t.isIterateeCall(l,o,u)&&(o=u=void 0),l=r.toFinite(l),o===void 0?(o=l,l=0):o=r.toFinite(o),u=u===void 0?l<o?1:-1:r.toFinite(u);const d=Math.max(Math.ceil((o-l)/(u||1)),0),m=new Array(d);for(let h=0;h<d;h++)m[h]=l,l+=u;return m}e.range=a})(wg)),wg}var Eg,Iw;function jI(){return Iw||(Iw=1,Eg=bI().range),Eg}var NI=jI();const wz=Ua(NI);function Mi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _I(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qy(e){let t,r,a;e.length!==2?(t=Mi,r=(d,m)=>Mi(e(d),m),a=(d,m)=>e(d)-m):(t=e===Mi||e===_I?e:SI,r=e,a=e);function l(d,m,h=0,p=d.length){if(h<p){if(t(m,m)!==0)return p;do{const v=h+p>>>1;r(d[v],m)<0?h=v+1:p=v}while(h<p)}return h}function o(d,m,h=0,p=d.length){if(h<p){if(t(m,m)!==0)return p;do{const v=h+p>>>1;r(d[v],m)<=0?h=v+1:p=v}while(h<p)}return h}function u(d,m,h=0,p=d.length){const v=l(d,m,h,p-1);return v>h&&a(d[v-1],m)>-a(d[v],m)?v-1:v}return{left:l,center:u,right:o}}function SI(){return 0}function Cz(e){return e===null?NaN:+e}function*wI(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const CI=qy(Mi),Qc=CI.right;qy(Cz).center;class $w extends Map{constructor(t,r=zI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,l]of t)this.set(a,l)}get(t){return super.get(Bw(this,t))}has(t){return super.has(Bw(this,t))}set(t,r){return super.set(AI(this,t),r)}delete(t){return super.delete(EI(this,t))}}function Bw({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function AI({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function EI({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function zI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function OI(e=Mi){if(e===Mi)return Az;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function Az(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const DI=Math.sqrt(50),MI=Math.sqrt(10),TI=Math.sqrt(2);function _f(e,t,r){const a=(t-e)/Math.max(0,r),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),u=o>=DI?10:o>=MI?5:o>=TI?2:1;let d,m,h;return l<0?(h=Math.pow(10,-l)/u,d=Math.round(e*h),m=Math.round(t*h),d/h<e&&++d,m/h>t&&--m,h=-h):(h=Math.pow(10,l)*u,d=Math.round(e/h),m=Math.round(t/h),d*h<e&&++d,m*h>t&&--m),m<d&&.5<=r&&r<2?_f(e,t,r*2):[d,m,h]}function qx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[l,o,u]=a?_f(t,e,r):_f(e,t,r);if(!(o>=l))return[];const d=o-l+1,m=new Array(d);if(a)if(u<0)for(let h=0;h<d;++h)m[h]=(o-h)/-u;else for(let h=0;h<d;++h)m[h]=(o-h)*u;else if(u<0)for(let h=0;h<d;++h)m[h]=(l+h)/-u;else for(let h=0;h<d;++h)m[h]=(l+h)*u;return m}function Rx(e,t,r){return t=+t,e=+e,r=+r,_f(e,t,r)[2]}function Lx(e,t,r){t=+t,e=+e,r=+r;const a=t<e,l=a?Rx(t,e,r):Rx(e,t,r);return(a?-1:1)*(l<0?1/-l:l)}function Uw(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function Hw(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function Ez(e,t,r=0,a=1/0,l){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(l=l===void 0?Az:OI(l);a>r;){if(a-r>600){const m=a-r+1,h=t-r+1,p=Math.log(m),v=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*v*(m-v)/m)*(h-m/2<0?-1:1),b=Math.max(r,Math.floor(t-h*v/m+x)),_=Math.min(a,Math.floor(t+(m-h)*v/m+x));Ez(e,t,b,_,l)}const o=e[t];let u=r,d=a;for(ac(e,r,t),l(e[a],o)>0&&ac(e,r,a);u<d;){for(ac(e,u,d),++u,--d;l(e[u],o)<0;)++u;for(;l(e[d],o)>0;)--d}l(e[r],o)===0?ac(e,r,d):(++d,ac(e,d,a)),d<=t&&(r=d+1),t<=d&&(a=d-1)}return e}function ac(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function PI(e,t,r){if(e=Float64Array.from(wI(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return Hw(e);if(t>=1)return Uw(e);var a,l=(a-1)*t,o=Math.floor(l),u=Uw(Ez(e,o).subarray(0,o+1)),d=Hw(e.subarray(o+1));return u+(d-u)*(l-o)}}function kI(e,t,r=Cz){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,l=(a-1)*t,o=Math.floor(l),u=+r(e[o],o,e),d=+r(e[o+1],o+1,e);return u+(d-u)*(l-o)}}function qI(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(l);++a<l;)o[a]=e+a*r;return o}function En(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Ix=Symbol("implicit");function Ry(){var e=new $w,t=[],r=[],a=Ix;function l(o){let u=e.get(o);if(u===void 0){if(a!==Ix)return a;e.set(o,u=t.push(o)-1)}return r[u%r.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new $w;for(const u of o)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(o){return arguments.length?(r=Array.from(o),l):r.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return Ry(t,r).unknown(a)},En.apply(l,arguments),l}function Ly(){var e=Ry().unknown(void 0),t=e.domain,r=e.range,a=0,l=1,o,u,d=!1,m=0,h=0,p=.5;delete e.unknown;function v(){var x=t().length,b=l<a,_=b?l:a,N=b?a:l;o=(N-_)/Math.max(1,x-m+h*2),d&&(o=Math.floor(o)),_+=(N-_-o*(x-m))*p,u=o*(1-m),d&&(_=Math.round(_),u=Math.round(u));var S=qI(x).map(function(C){return _+o*C});return r(b?S.reverse():S)}return e.domain=function(x){return arguments.length?(t(x),v()):t()},e.range=function(x){return arguments.length?([a,l]=x,a=+a,l=+l,v()):[a,l]},e.rangeRound=function(x){return[a,l]=x,a=+a,l=+l,d=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(x){return arguments.length?(d=!!x,v()):d},e.padding=function(x){return arguments.length?(m=Math.min(1,h=+x),v()):m},e.paddingInner=function(x){return arguments.length?(m=Math.min(1,x),v()):m},e.paddingOuter=function(x){return arguments.length?(h=+x,v()):h},e.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),v()):p},e.copy=function(){return Ly(t(),[a,l]).round(d).paddingInner(m).paddingOuter(h).align(p)},En.apply(v(),arguments)}function zz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zz(t())},e}function RI(){return zz(Ly.apply(null,arguments).paddingInner(1))}function Iy(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Oz(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Vc(){}var Oc=.7,Sf=1/Oc,Ll="\\s*([+-]?\\d+)\\s*",Dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LI=/^#([0-9a-f]{3,8})$/,II=new RegExp(`^rgb\\(${Ll},${Ll},${Ll}\\)$`),$I=new RegExp(`^rgb\\(${ta},${ta},${ta}\\)$`),BI=new RegExp(`^rgba\\(${Ll},${Ll},${Ll},${Dc}\\)$`),UI=new RegExp(`^rgba\\(${ta},${ta},${ta},${Dc}\\)$`),HI=new RegExp(`^hsl\\(${Dc},${ta},${ta}\\)$`),GI=new RegExp(`^hsla\\(${Dc},${ta},${ta},${Dc}\\)$`),Gw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Iy(Vc,Mc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fw,formatHex:Fw,formatHex8:FI,formatHsl:QI,formatRgb:Qw,toString:Qw});function Fw(){return this.rgb().formatHex()}function FI(){return this.rgb().formatHex8()}function QI(){return Dz(this).formatHsl()}function Qw(){return this.rgb().formatRgb()}function Mc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=LI.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Vw(t):r===3?new $r(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?zd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?zd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=II.exec(e))?new $r(t[1],t[2],t[3],1):(t=$I.exec(e))?new $r(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BI.exec(e))?zd(t[1],t[2],t[3],t[4]):(t=UI.exec(e))?zd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=HI.exec(e))?Xw(t[1],t[2]/100,t[3]/100,1):(t=GI.exec(e))?Xw(t[1],t[2]/100,t[3]/100,t[4]):Gw.hasOwnProperty(e)?Vw(Gw[e]):e==="transparent"?new $r(NaN,NaN,NaN,0):null}function Vw(e){return new $r(e>>16&255,e>>8&255,e&255,1)}function zd(e,t,r,a){return a<=0&&(e=t=r=NaN),new $r(e,t,r,a)}function VI(e){return e instanceof Vc||(e=Mc(e)),e?(e=e.rgb(),new $r(e.r,e.g,e.b,e.opacity)):new $r}function $x(e,t,r,a){return arguments.length===1?VI(e):new $r(e,t,r,a??1)}function $r(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}Iy($r,$x,Oz(Vc,{brighter(e){return e=e==null?Sf:Math.pow(Sf,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Oc:Math.pow(Oc,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $r(bs(this.r),bs(this.g),bs(this.b),wf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yw,formatHex:Yw,formatHex8:YI,formatRgb:Kw,toString:Kw}));function Yw(){return`#${ps(this.r)}${ps(this.g)}${ps(this.b)}`}function YI(){return`#${ps(this.r)}${ps(this.g)}${ps(this.b)}${ps((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kw(){const e=wf(this.opacity);return`${e===1?"rgb(":"rgba("}${bs(this.r)}, ${bs(this.g)}, ${bs(this.b)}${e===1?")":`, ${e})`}`}function wf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ps(e){return e=bs(e),(e<16?"0":"")+e.toString(16)}function Xw(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qn(e,t,r,a)}function Dz(e){if(e instanceof qn)return new qn(e.h,e.s,e.l,e.opacity);if(e instanceof Vc||(e=Mc(e)),!e)return new qn;if(e instanceof qn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,l=Math.min(t,r,a),o=Math.max(t,r,a),u=NaN,d=o-l,m=(o+l)/2;return d?(t===o?u=(r-a)/d+(r<a)*6:r===o?u=(a-t)/d+2:u=(t-r)/d+4,d/=m<.5?o+l:2-o-l,u*=60):d=m>0&&m<1?0:u,new qn(u,d,m,e.opacity)}function KI(e,t,r,a){return arguments.length===1?Dz(e):new qn(e,t,r,a??1)}function qn(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}Iy(qn,KI,Oz(Vc,{brighter(e){return e=e==null?Sf:Math.pow(Sf,e),new qn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Oc:Math.pow(Oc,e),new qn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,l=2*r-a;return new $r(zg(e>=240?e-240:e+120,l,a),zg(e,l,a),zg(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new qn(Ww(this.h),Od(this.s),Od(this.l),wf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wf(this.opacity);return`${e===1?"hsl(":"hsla("}${Ww(this.h)}, ${Od(this.s)*100}%, ${Od(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ww(e){return e=(e||0)%360,e<0?e+360:e}function Od(e){return Math.max(0,Math.min(1,e||0))}function zg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const $y=e=>()=>e;function XI(e,t){return function(r){return e+r*t}}function WI(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function ZI(e){return(e=+e)==1?Mz:function(t,r){return r-t?WI(t,r,e):$y(isNaN(t)?r:t)}}function Mz(e,t){var r=t-e;return r?XI(e,r):$y(isNaN(e)?t:e)}const Zw=(function e(t){var r=ZI(t);function a(l,o){var u=r((l=$x(l)).r,(o=$x(o)).r),d=r(l.g,o.g),m=r(l.b,o.b),h=Mz(l.opacity,o.opacity);return function(p){return l.r=u(p),l.g=d(p),l.b=m(p),l.opacity=h(p),l+""}}return a.gamma=e,a})(1);function JI(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),l;return function(o){for(l=0;l<r;++l)a[l]=e[l]*(1-o)+t[l]*o;return a}}function e8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function t8(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,l=new Array(a),o=new Array(r),u;for(u=0;u<a;++u)l[u]=Xl(e[u],t[u]);for(;u<r;++u)o[u]=t[u];return function(d){for(u=0;u<a;++u)o[u]=l[u](d);return o}}function r8(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Cf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function n8(e,t){var r={},a={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=Xl(e[l],t[l]):a[l]=t[l];return function(o){for(l in r)a[l]=r[l](o);return a}}var Bx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Og=new RegExp(Bx.source,"g");function a8(e){return function(){return e}}function i8(e){return function(t){return e(t)+""}}function s8(e,t){var r=Bx.lastIndex=Og.lastIndex=0,a,l,o,u=-1,d=[],m=[];for(e=e+"",t=t+"";(a=Bx.exec(e))&&(l=Og.exec(t));)(o=l.index)>r&&(o=t.slice(r,o),d[u]?d[u]+=o:d[++u]=o),(a=a[0])===(l=l[0])?d[u]?d[u]+=l:d[++u]=l:(d[++u]=null,m.push({i:u,x:Cf(a,l)})),r=Og.lastIndex;return r<t.length&&(o=t.slice(r),d[u]?d[u]+=o:d[++u]=o),d.length<2?m[0]?i8(m[0].x):a8(t):(t=m.length,function(h){for(var p=0,v;p<t;++p)d[(v=m[p]).i]=v.x(h);return d.join("")})}function Xl(e,t){var r=typeof t,a;return t==null||r==="boolean"?$y(t):(r==="number"?Cf:r==="string"?(a=Mc(t))?(t=a,Zw):s8:t instanceof Mc?Zw:t instanceof Date?r8:e8(t)?JI:Array.isArray(t)?t8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?n8:Cf)(e,t)}function By(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function l8(e,t){t===void 0&&(t=e,e=Xl);for(var r=0,a=t.length-1,l=t[0],o=new Array(a<0?0:a);r<a;)o[r]=e(l,l=t[++r]);return function(u){var d=Math.max(0,Math.min(a-1,Math.floor(u*=a)));return o[d](u-d)}}function o8(e){return function(){return e}}function Af(e){return+e}var Jw=[0,1];function Cr(e){return e}function Ux(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:o8(isNaN(t)?NaN:.5)}function c8(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function u8(e,t,r){var a=e[0],l=e[1],o=t[0],u=t[1];return l<a?(a=Ux(l,a),o=r(u,o)):(a=Ux(a,l),o=r(o,u)),function(d){return o(a(d))}}function d8(e,t,r){var a=Math.min(e.length,t.length)-1,l=new Array(a),o=new Array(a),u=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<a;)l[u]=Ux(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(d){var m=Qc(e,d,1,a)-1;return o[m](l[m](d))}}function Yc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Sm(){var e=Jw,t=Jw,r=Xl,a,l,o,u=Cr,d,m,h;function p(){var x=Math.min(e.length,t.length);return u!==Cr&&(u=c8(e[0],e[x-1])),d=x>2?d8:u8,m=h=null,v}function v(x){return x==null||isNaN(x=+x)?o:(m||(m=d(e.map(a),t,r)))(a(u(x)))}return v.invert=function(x){return u(l((h||(h=d(t,e.map(a),Cf)))(x)))},v.domain=function(x){return arguments.length?(e=Array.from(x,Af),p()):e.slice()},v.range=function(x){return arguments.length?(t=Array.from(x),p()):t.slice()},v.rangeRound=function(x){return t=Array.from(x),r=By,p()},v.clamp=function(x){return arguments.length?(u=x?!0:Cr,p()):u!==Cr},v.interpolate=function(x){return arguments.length?(r=x,p()):r},v.unknown=function(x){return arguments.length?(o=x,v):o},function(x,b){return a=x,l=b,p()}}function Uy(){return Sm()(Cr,Cr)}function f8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ef(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Ql(e){return e=Ef(Math.abs(e)),e?e[1]:NaN}function m8(e,t){return function(r,a){for(var l=r.length,o=[],u=0,d=e[0],m=0;l>0&&d>0&&(m+d+1>a&&(d=Math.max(1,a-m)),o.push(r.substring(l-=d,l+d)),!((m+=d+1)>a));)d=e[u=(u+1)%e.length];return o.reverse().join(t)}}function h8(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var p8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tc(e){if(!(t=p8.exec(e)))throw new Error("invalid format: "+e);var t;return new Hy({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tc.prototype=Hy.prototype;function Hy(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Hy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v8(e){e:for(var t=e.length,r=1,a=-1,l;r<t;++r)switch(e[r]){case".":a=l=r;break;case"0":a===0&&(a=r),l=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var zf;function g8(e,t){var r=Ef(e,t);if(!r)return zf=void 0,e.toPrecision(t);var a=r[0],l=r[1],o=l-(zf=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+Ef(e,Math.max(0,t+o-1))[0]}function eC(e,t){var r=Ef(e,t);if(!r)return e+"";var a=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const tC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:f8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eC(e*100,t),r:eC,s:g8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rC(e){return e}var nC=Array.prototype.map,aC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function x8(e){var t=e.grouping===void 0||e.thousands===void 0?rC:m8(nC.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?rC:h8(nC.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(v,x){v=Tc(v);var b=v.fill,_=v.align,N=v.sign,S=v.symbol,C=v.zero,z=v.width,w=v.comma,E=v.precision,O=v.trim,P=v.type;P==="n"?(w=!0,P="g"):tC[P]||(E===void 0&&(E=12),O=!0,P="g"),(C||b==="0"&&_==="=")&&(C=!0,b="0",_="=");var L=(x&&x.prefix!==void 0?x.prefix:"")+(S==="$"?r:S==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),T=(S==="$"?a:/[%p]/.test(P)?u:"")+(x&&x.suffix!==void 0?x.suffix:""),D=tC[P],k=/[defgprs%]/.test(P);E=E===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function $(B){var le=L,oe=T,F,q,J;if(P==="c")oe=D(B)+oe,B="";else{B=+B;var Q=B<0||1/B<0;if(B=isNaN(B)?m:D(Math.abs(B),E),O&&(B=v8(B)),Q&&+B==0&&N!=="+"&&(Q=!1),le=(Q?N==="("?N:d:N==="-"||N==="("?"":N)+le,oe=(P==="s"&&!isNaN(B)&&zf!==void 0?aC[8+zf/3]:"")+oe+(Q&&N==="("?")":""),k){for(F=-1,q=B.length;++F<q;)if(J=B.charCodeAt(F),48>J||J>57){oe=(J===46?l+B.slice(F+1):B.slice(F))+oe,B=B.slice(0,F);break}}}w&&!C&&(B=t(B,1/0));var ve=le.length+B.length+oe.length,U=ve<z?new Array(z-ve+1).join(b):"";switch(w&&C&&(B=t(U+B,U.length?z-oe.length:1/0),U=""),_){case"<":B=le+B+oe+U;break;case"=":B=le+U+B+oe;break;case"^":B=U.slice(0,ve=U.length>>1)+le+B+oe+U.slice(ve);break;default:B=U+le+B+oe;break}return o(B)}return $.toString=function(){return v+""},$}function p(v,x){var b=Math.max(-8,Math.min(8,Math.floor(Ql(x)/3)))*3,_=Math.pow(10,-b),N=h((v=Tc(v),v.type="f",v),{suffix:aC[8+b/3]});return function(S){return N(_*S)}}return{format:h,formatPrefix:p}}var Dd,Gy,Tz;y8({thousands:",",grouping:[3],currency:["$",""]});function y8(e){return Dd=x8(e),Gy=Dd.format,Tz=Dd.formatPrefix,Dd}function b8(e){return Math.max(0,-Ql(Math.abs(e)))}function j8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ql(t)/3)))*3-Ql(Math.abs(e)))}function N8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ql(t)-Ql(e))+1}function Pz(e,t,r,a){var l=Lx(e,t,r),o;switch(a=Tc(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=j8(l,u))&&(a.precision=o),Tz(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=N8(l,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=b8(l))&&(a.precision=o-(a.type==="%")*2);break}}return Gy(a)}function Bi(e){var t=e.domain;return e.ticks=function(r){var a=t();return qx(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var l=t();return Pz(l[0],l[l.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),l=0,o=a.length-1,u=a[l],d=a[o],m,h,p=10;for(d<u&&(h=u,u=d,d=h,h=l,l=o,o=h);p-- >0;){if(h=Rx(u,d,r),h===m)return a[l]=u,a[o]=d,t(a);if(h>0)u=Math.floor(u/h)*h,d=Math.ceil(d/h)*h;else if(h<0)u=Math.ceil(u*h)/h,d=Math.floor(d*h)/h;else break;m=h}return e},e}function kz(){var e=Uy();return e.copy=function(){return Yc(e,kz())},En.apply(e,arguments),Bi(e)}function qz(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Af),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return qz(e).unknown(t)},e=arguments.length?Array.from(e,Af):[0,1],Bi(r)}function Rz(e,t){e=e.slice();var r=0,a=e.length-1,l=e[r],o=e[a],u;return o<l&&(u=r,r=a,a=u,u=l,l=o,o=u),e[r]=t.floor(l),e[a]=t.ceil(o),e}function iC(e){return Math.log(e)}function sC(e){return Math.exp(e)}function _8(e){return-Math.log(-e)}function S8(e){return-Math.exp(-e)}function w8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function C8(e){return e===10?w8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function A8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lC(e){return(t,r)=>-e(-t,r)}function Fy(e){const t=e(iC,sC),r=t.domain;let a=10,l,o;function u(){return l=A8(a),o=C8(a),r()[0]<0?(l=lC(l),o=lC(o),e(_8,S8)):e(iC,sC),t}return t.base=function(d){return arguments.length?(a=+d,u()):a},t.domain=function(d){return arguments.length?(r(d),u()):r()},t.ticks=d=>{const m=r();let h=m[0],p=m[m.length-1];const v=p<h;v&&([h,p]=[p,h]);let x=l(h),b=l(p),_,N;const S=d==null?10:+d;let C=[];if(!(a%1)&&b-x<S){if(x=Math.floor(x),b=Math.ceil(b),h>0){for(;x<=b;++x)for(_=1;_<a;++_)if(N=x<0?_/o(-x):_*o(x),!(N<h)){if(N>p)break;C.push(N)}}else for(;x<=b;++x)for(_=a-1;_>=1;--_)if(N=x>0?_/o(-x):_*o(x),!(N<h)){if(N>p)break;C.push(N)}C.length*2<S&&(C=qx(h,p,S))}else C=qx(x,b,Math.min(b-x,S)).map(o);return v?C.reverse():C},t.tickFormat=(d,m)=>{if(d==null&&(d=10),m==null&&(m=a===10?"s":","),typeof m!="function"&&(!(a%1)&&(m=Tc(m)).precision==null&&(m.trim=!0),m=Gy(m)),d===1/0)return m;const h=Math.max(1,a*d/t.ticks().length);return p=>{let v=p/o(Math.round(l(p)));return v*a<a-.5&&(v*=a),v<=h?m(p):""}},t.nice=()=>r(Rz(r(),{floor:d=>o(Math.floor(l(d))),ceil:d=>o(Math.ceil(l(d)))})),t}function Lz(){const e=Fy(Sm()).domain([1,10]);return e.copy=()=>Yc(e,Lz()).base(e.base()),En.apply(e,arguments),e}function oC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function cC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Qy(e){var t=1,r=e(oC(t),cC(t));return r.constant=function(a){return arguments.length?e(oC(t=+a),cC(t)):t},Bi(r)}function Iz(){var e=Qy(Sm());return e.copy=function(){return Yc(e,Iz()).constant(e.constant())},En.apply(e,arguments)}function uC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function E8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function z8(e){return e<0?-e*e:e*e}function Vy(e){var t=e(Cr,Cr),r=1;function a(){return r===1?e(Cr,Cr):r===.5?e(E8,z8):e(uC(r),uC(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,a()):r},Bi(t)}function Yy(){var e=Vy(Sm());return e.copy=function(){return Yc(e,Yy()).exponent(e.exponent())},En.apply(e,arguments),e}function O8(){return Yy.apply(null,arguments).exponent(.5)}function dC(e){return Math.sign(e)*e*e}function D8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function $z(){var e=Uy(),t=[0,1],r=!1,a;function l(o){var u=D8(e(o));return isNaN(u)?a:r?Math.round(u):u}return l.invert=function(o){return e.invert(dC(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,Af)).map(dC)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(r=!!o,l):r},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return $z(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},En.apply(l,arguments),Bi(l)}function Bz(){var e=[],t=[],r=[],a;function l(){var u=0,d=Math.max(1,t.length);for(r=new Array(d-1);++u<d;)r[u-1]=kI(e,u/d);return o}function o(u){return u==null||isNaN(u=+u)?a:t[Qc(r,u)]}return o.invertExtent=function(u){var d=t.indexOf(u);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Mi),l()},o.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},o.unknown=function(u){return arguments.length?(a=u,o):a},o.quantiles=function(){return r.slice()},o.copy=function(){return Bz().domain(e).range(t).unknown(a)},En.apply(o,arguments)}function Uz(){var e=0,t=1,r=1,a=[.5],l=[0,1],o;function u(m){return m!=null&&m<=m?l[Qc(a,m,0,r)]:o}function d(){var m=-1;for(a=new Array(r);++m<r;)a[m]=((m+1)*t-(m-r)*e)/(r+1);return u}return u.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,d()):[e,t]},u.range=function(m){return arguments.length?(r=(l=Array.from(m)).length-1,d()):l.slice()},u.invertExtent=function(m){var h=l.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,a[0]]:h>=r?[a[r-1],t]:[a[h-1],a[h]]},u.unknown=function(m){return arguments.length&&(o=m),u},u.thresholds=function(){return a.slice()},u.copy=function(){return Uz().domain([e,t]).range(l).unknown(o)},En.apply(Bi(u),arguments)}function Hz(){var e=[.5],t=[0,1],r,a=1;function l(o){return o!=null&&o<=o?t[Qc(e,o,0,a)]:r}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var u=t.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(r=o,l):r},l.copy=function(){return Hz().domain(e).range(t).unknown(r)},En.apply(l,arguments)}const Dg=new Date,Mg=new Date;function Kt(e,t,r,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const u=l(o),d=l.ceil(o);return o-u<d-o?u:d},l.offset=(o,u)=>(t(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,d)=>{const m=[];if(o=l.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return m;let h;do m.push(h=new Date(+o)),t(o,d),e(o);while(h<o&&o<u);return m},l.filter=o=>Kt(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;t(u,-1),!o(u););else for(;--d>=0;)for(;t(u,1),!o(u););}),r&&(l.count=(o,u)=>(Dg.setTime(+o),Mg.setTime(+u),e(Dg),e(Mg),Math.floor(r(Dg,Mg))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?u=>a(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const Of=Kt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Of.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Kt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Of);Of.range;const za=1e3,jn=za*60,Oa=jn*60,qa=Oa*24,Ky=qa*7,fC=qa*30,Tg=qa*365,vs=Kt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getUTCSeconds());vs.range;const Xy=Kt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*za)},(e,t)=>{e.setTime(+e+t*jn)},(e,t)=>(t-e)/jn,e=>e.getMinutes());Xy.range;const Wy=Kt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jn)},(e,t)=>(t-e)/jn,e=>e.getUTCMinutes());Wy.range;const Zy=Kt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*za-e.getMinutes()*jn)},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getHours());Zy.range;const Jy=Kt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getUTCHours());Jy.range;const Kc=Kt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jn)/qa,e=>e.getDate()-1);Kc.range;const wm=Kt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qa,e=>e.getUTCDate()-1);wm.range;const Gz=Kt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qa,e=>Math.floor(e/qa));Gz.range;function Ps(e){return Kt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*jn)/Ky)}const Cm=Ps(0),Df=Ps(1),M8=Ps(2),T8=Ps(3),Vl=Ps(4),P8=Ps(5),k8=Ps(6);Cm.range;Df.range;M8.range;T8.range;Vl.range;P8.range;k8.range;function ks(e){return Kt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ky)}const Am=ks(0),Mf=ks(1),q8=ks(2),R8=ks(3),Yl=ks(4),L8=ks(5),I8=ks(6);Am.range;Mf.range;q8.range;R8.range;Yl.range;L8.range;I8.range;const eb=Kt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());eb.range;const tb=Kt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());tb.range;const Ra=Kt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ra.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ra.range;const La=Kt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());La.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});La.range;function Fz(e,t,r,a,l,o){const u=[[vs,1,za],[vs,5,5*za],[vs,15,15*za],[vs,30,30*za],[o,1,jn],[o,5,5*jn],[o,15,15*jn],[o,30,30*jn],[l,1,Oa],[l,3,3*Oa],[l,6,6*Oa],[l,12,12*Oa],[a,1,qa],[a,2,2*qa],[r,1,Ky],[t,1,fC],[t,3,3*fC],[e,1,Tg]];function d(h,p,v){const x=p<h;x&&([h,p]=[p,h]);const b=v&&typeof v.range=="function"?v:m(h,p,v),_=b?b.range(h,+p+1):[];return x?_.reverse():_}function m(h,p,v){const x=Math.abs(p-h)/v,b=qy(([,,S])=>S).right(u,x);if(b===u.length)return e.every(Lx(h/Tg,p/Tg,v));if(b===0)return Of.every(Math.max(Lx(h,p,v),1));const[_,N]=u[x/u[b-1][2]<u[b][2]/x?b-1:b];return _.every(N)}return[d,m]}const[$8,B8]=Fz(La,tb,Am,Gz,Jy,Wy),[U8,H8]=Fz(Ra,eb,Cm,Kc,Zy,Xy);function Pg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function kg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ic(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function G8(e){var t=e.dateTime,r=e.date,a=e.time,l=e.periods,o=e.days,u=e.shortDays,d=e.months,m=e.shortMonths,h=sc(l),p=lc(l),v=sc(o),x=lc(o),b=sc(u),_=lc(u),N=sc(d),S=lc(d),C=sc(m),z=lc(m),w={a:J,A:Q,b:ve,B:U,c:null,d:xC,e:xC,f:m$,g:_$,G:w$,H:u$,I:d$,j:f$,L:Qz,m:h$,M:p$,p:ge,q:ee,Q:jC,s:NC,S:v$,u:g$,U:x$,V:y$,w:b$,W:j$,x:null,X:null,y:N$,Y:S$,Z:C$,"%":bC},E={a:me,A:xe,b:pe,B:H,c:null,d:yC,e:yC,f:O$,g:$$,G:U$,H:A$,I:E$,j:z$,L:Yz,m:D$,M:M$,p:de,q:Ee,Q:jC,s:NC,S:T$,u:P$,U:k$,V:q$,w:R$,W:L$,x:null,X:null,y:I$,Y:B$,Z:H$,"%":bC},O={a:k,A:$,b:B,B:le,c:oe,d:vC,e:vC,f:s$,g:pC,G:hC,H:gC,I:gC,j:r$,L:i$,m:t$,M:n$,p:D,q:e$,Q:o$,s:c$,S:a$,u:K8,U:X8,V:W8,w:Y8,W:Z8,x:F,X:q,y:pC,Y:hC,Z:J8,"%":l$};w.x=P(r,w),w.X=P(a,w),w.c=P(t,w),E.x=P(r,E),E.X=P(a,E),E.c=P(t,E);function P(ne,Y){return function(I){var ae=[],V=-1,ye=0,Re=ne.length,Ie,Qe,Gt;for(I instanceof Date||(I=new Date(+I));++V<Re;)ne.charCodeAt(V)===37&&(ae.push(ne.slice(ye,V)),(Qe=mC[Ie=ne.charAt(++V)])!=null?Ie=ne.charAt(++V):Qe=Ie==="e"?" ":"0",(Gt=Y[Ie])&&(Ie=Gt(I,Qe)),ae.push(Ie),ye=V+1);return ae.push(ne.slice(ye,V)),ae.join("")}}function L(ne,Y){return function(I){var ae=ic(1900,void 0,1),V=T(ae,ne,I+="",0),ye,Re;if(V!=I.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(Y&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(ye=kg(ic(ae.y,0,1)),Re=ye.getUTCDay(),ye=Re>4||Re===0?Mf.ceil(ye):Mf(ye),ye=wm.offset(ye,(ae.V-1)*7),ae.y=ye.getUTCFullYear(),ae.m=ye.getUTCMonth(),ae.d=ye.getUTCDate()+(ae.w+6)%7):(ye=Pg(ic(ae.y,0,1)),Re=ye.getDay(),ye=Re>4||Re===0?Df.ceil(ye):Df(ye),ye=Kc.offset(ye,(ae.V-1)*7),ae.y=ye.getFullYear(),ae.m=ye.getMonth(),ae.d=ye.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),Re="Z"in ae?kg(ic(ae.y,0,1)).getUTCDay():Pg(ic(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(Re+5)%7:ae.w+ae.U*7-(Re+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,kg(ae)):Pg(ae)}}function T(ne,Y,I,ae){for(var V=0,ye=Y.length,Re=I.length,Ie,Qe;V<ye;){if(ae>=Re)return-1;if(Ie=Y.charCodeAt(V++),Ie===37){if(Ie=Y.charAt(V++),Qe=O[Ie in mC?Y.charAt(V++):Ie],!Qe||(ae=Qe(ne,I,ae))<0)return-1}else if(Ie!=I.charCodeAt(ae++))return-1}return ae}function D(ne,Y,I){var ae=h.exec(Y.slice(I));return ae?(ne.p=p.get(ae[0].toLowerCase()),I+ae[0].length):-1}function k(ne,Y,I){var ae=b.exec(Y.slice(I));return ae?(ne.w=_.get(ae[0].toLowerCase()),I+ae[0].length):-1}function $(ne,Y,I){var ae=v.exec(Y.slice(I));return ae?(ne.w=x.get(ae[0].toLowerCase()),I+ae[0].length):-1}function B(ne,Y,I){var ae=C.exec(Y.slice(I));return ae?(ne.m=z.get(ae[0].toLowerCase()),I+ae[0].length):-1}function le(ne,Y,I){var ae=N.exec(Y.slice(I));return ae?(ne.m=S.get(ae[0].toLowerCase()),I+ae[0].length):-1}function oe(ne,Y,I){return T(ne,t,Y,I)}function F(ne,Y,I){return T(ne,r,Y,I)}function q(ne,Y,I){return T(ne,a,Y,I)}function J(ne){return u[ne.getDay()]}function Q(ne){return o[ne.getDay()]}function ve(ne){return m[ne.getMonth()]}function U(ne){return d[ne.getMonth()]}function ge(ne){return l[+(ne.getHours()>=12)]}function ee(ne){return 1+~~(ne.getMonth()/3)}function me(ne){return u[ne.getUTCDay()]}function xe(ne){return o[ne.getUTCDay()]}function pe(ne){return m[ne.getUTCMonth()]}function H(ne){return d[ne.getUTCMonth()]}function de(ne){return l[+(ne.getUTCHours()>=12)]}function Ee(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var Y=P(ne+="",w);return Y.toString=function(){return ne},Y},parse:function(ne){var Y=L(ne+="",!1);return Y.toString=function(){return ne},Y},utcFormat:function(ne){var Y=P(ne+="",E);return Y.toString=function(){return ne},Y},utcParse:function(ne){var Y=L(ne+="",!0);return Y.toString=function(){return ne},Y}}}var mC={"-":"",_:" ",0:"0"},ir=/^\s*\d+/,F8=/^%/,Q8=/[\\^$*+?|[\]().{}]/g;function tt(e,t,r){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<r?new Array(r-o+1).join(t)+l:l)}function V8(e){return e.replace(Q8,"\\$&")}function sc(e){return new RegExp("^(?:"+e.map(V8).join("|")+")","i")}function lc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Y8(e,t,r){var a=ir.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function K8(e,t,r){var a=ir.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function X8(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function W8(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function Z8(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function hC(e,t,r){var a=ir.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function pC(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function J8(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function e$(e,t,r){var a=ir.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function t$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function vC(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function r$(e,t,r){var a=ir.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function gC(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function n$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function a$(e,t,r){var a=ir.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function i$(e,t,r){var a=ir.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function s$(e,t,r){var a=ir.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function l$(e,t,r){var a=F8.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function o$(e,t,r){var a=ir.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function c$(e,t,r){var a=ir.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function xC(e,t){return tt(e.getDate(),t,2)}function u$(e,t){return tt(e.getHours(),t,2)}function d$(e,t){return tt(e.getHours()%12||12,t,2)}function f$(e,t){return tt(1+Kc.count(Ra(e),e),t,3)}function Qz(e,t){return tt(e.getMilliseconds(),t,3)}function m$(e,t){return Qz(e,t)+"000"}function h$(e,t){return tt(e.getMonth()+1,t,2)}function p$(e,t){return tt(e.getMinutes(),t,2)}function v$(e,t){return tt(e.getSeconds(),t,2)}function g$(e){var t=e.getDay();return t===0?7:t}function x$(e,t){return tt(Cm.count(Ra(e)-1,e),t,2)}function Vz(e){var t=e.getDay();return t>=4||t===0?Vl(e):Vl.ceil(e)}function y$(e,t){return e=Vz(e),tt(Vl.count(Ra(e),e)+(Ra(e).getDay()===4),t,2)}function b$(e){return e.getDay()}function j$(e,t){return tt(Df.count(Ra(e)-1,e),t,2)}function N$(e,t){return tt(e.getFullYear()%100,t,2)}function _$(e,t){return e=Vz(e),tt(e.getFullYear()%100,t,2)}function S$(e,t){return tt(e.getFullYear()%1e4,t,4)}function w$(e,t){var r=e.getDay();return e=r>=4||r===0?Vl(e):Vl.ceil(e),tt(e.getFullYear()%1e4,t,4)}function C$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tt(t/60|0,"0",2)+tt(t%60,"0",2)}function yC(e,t){return tt(e.getUTCDate(),t,2)}function A$(e,t){return tt(e.getUTCHours(),t,2)}function E$(e,t){return tt(e.getUTCHours()%12||12,t,2)}function z$(e,t){return tt(1+wm.count(La(e),e),t,3)}function Yz(e,t){return tt(e.getUTCMilliseconds(),t,3)}function O$(e,t){return Yz(e,t)+"000"}function D$(e,t){return tt(e.getUTCMonth()+1,t,2)}function M$(e,t){return tt(e.getUTCMinutes(),t,2)}function T$(e,t){return tt(e.getUTCSeconds(),t,2)}function P$(e){var t=e.getUTCDay();return t===0?7:t}function k$(e,t){return tt(Am.count(La(e)-1,e),t,2)}function Kz(e){var t=e.getUTCDay();return t>=4||t===0?Yl(e):Yl.ceil(e)}function q$(e,t){return e=Kz(e),tt(Yl.count(La(e),e)+(La(e).getUTCDay()===4),t,2)}function R$(e){return e.getUTCDay()}function L$(e,t){return tt(Mf.count(La(e)-1,e),t,2)}function I$(e,t){return tt(e.getUTCFullYear()%100,t,2)}function $$(e,t){return e=Kz(e),tt(e.getUTCFullYear()%100,t,2)}function B$(e,t){return tt(e.getUTCFullYear()%1e4,t,4)}function U$(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Yl(e):Yl.ceil(e),tt(e.getUTCFullYear()%1e4,t,4)}function H$(){return"+0000"}function bC(){return"%"}function jC(e){return+e}function NC(e){return Math.floor(+e/1e3)}var El,Xz,Wz;G$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G$(e){return El=G8(e),Xz=El.format,El.parse,Wz=El.utcFormat,El.utcParse,El}function F$(e){return new Date(e)}function Q$(e){return e instanceof Date?+e:+new Date(+e)}function rb(e,t,r,a,l,o,u,d,m,h){var p=Uy(),v=p.invert,x=p.domain,b=h(".%L"),_=h(":%S"),N=h("%I:%M"),S=h("%I %p"),C=h("%a %d"),z=h("%b %d"),w=h("%B"),E=h("%Y");function O(P){return(m(P)<P?b:d(P)<P?_:u(P)<P?N:o(P)<P?S:a(P)<P?l(P)<P?C:z:r(P)<P?w:E)(P)}return p.invert=function(P){return new Date(v(P))},p.domain=function(P){return arguments.length?x(Array.from(P,Q$)):x().map(F$)},p.ticks=function(P){var L=x();return e(L[0],L[L.length-1],P??10)},p.tickFormat=function(P,L){return L==null?O:h(L)},p.nice=function(P){var L=x();return(!P||typeof P.range!="function")&&(P=t(L[0],L[L.length-1],P??10)),P?x(Rz(L,P)):p},p.copy=function(){return Yc(p,rb(e,t,r,a,l,o,u,d,m,h))},p}function V$(){return En.apply(rb(U8,H8,Ra,eb,Cm,Kc,Zy,Xy,vs,Xz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Y$(){return En.apply(rb($8,B8,La,tb,Am,wm,Jy,Wy,vs,Wz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Em(){var e=0,t=1,r,a,l,o,u=Cr,d=!1,m;function h(v){return v==null||isNaN(v=+v)?m:u(l===0?.5:(v=(o(v)-r)*l,d?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t]=v,r=o(e=+e),a=o(t=+t),l=r===a?0:1/(a-r),h):[e,t]},h.clamp=function(v){return arguments.length?(d=!!v,h):d},h.interpolator=function(v){return arguments.length?(u=v,h):u};function p(v){return function(x){var b,_;return arguments.length?([b,_]=x,u=v(b,_),h):[u(0),u(1)]}}return h.range=p(Xl),h.rangeRound=p(By),h.unknown=function(v){return arguments.length?(m=v,h):m},function(v){return o=v,r=v(e),a=v(t),l=r===a?0:1/(a-r),h}}function Ui(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Zz(){var e=Bi(Em()(Cr));return e.copy=function(){return Ui(e,Zz())},Qa.apply(e,arguments)}function Jz(){var e=Fy(Em()).domain([1,10]);return e.copy=function(){return Ui(e,Jz()).base(e.base())},Qa.apply(e,arguments)}function eO(){var e=Qy(Em());return e.copy=function(){return Ui(e,eO()).constant(e.constant())},Qa.apply(e,arguments)}function nb(){var e=Vy(Em());return e.copy=function(){return Ui(e,nb()).exponent(e.exponent())},Qa.apply(e,arguments)}function K$(){return nb.apply(null,arguments).exponent(.5)}function tO(){var e=[],t=Cr;function r(a){if(a!=null&&!isNaN(a=+a))return t((Qc(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Mi),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,l)=>t(l/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(l,o)=>PI(e,o/a))},r.copy=function(){return tO(t).domain(e)},Qa.apply(r,arguments)}function zm(){var e=0,t=.5,r=1,a=1,l,o,u,d,m,h=Cr,p,v=!1,x;function b(N){return isNaN(N=+N)?x:(N=.5+((N=+p(N))-o)*(a*N<a*o?d:m),h(v?Math.max(0,Math.min(1,N)):N))}b.domain=function(N){return arguments.length?([e,t,r]=N,l=p(e=+e),o=p(t=+t),u=p(r=+r),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,b):[e,t,r]},b.clamp=function(N){return arguments.length?(v=!!N,b):v},b.interpolator=function(N){return arguments.length?(h=N,b):h};function _(N){return function(S){var C,z,w;return arguments.length?([C,z,w]=S,h=l8(N,[C,z,w]),b):[h(0),h(.5),h(1)]}}return b.range=_(Xl),b.rangeRound=_(By),b.unknown=function(N){return arguments.length?(x=N,b):x},function(N){return p=N,l=N(e),o=N(t),u=N(r),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,b}}function rO(){var e=Bi(zm()(Cr));return e.copy=function(){return Ui(e,rO())},Qa.apply(e,arguments)}function nO(){var e=Fy(zm()).domain([.1,1,10]);return e.copy=function(){return Ui(e,nO()).base(e.base())},Qa.apply(e,arguments)}function aO(){var e=Qy(zm());return e.copy=function(){return Ui(e,aO()).constant(e.constant())},Qa.apply(e,arguments)}function ab(){var e=Vy(zm());return e.copy=function(){return Ui(e,ab()).exponent(e.exponent())},Qa.apply(e,arguments)}function X$(){return ab.apply(null,arguments).exponent(.5)}const hc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ly,scaleDiverging:rO,scaleDivergingLog:nO,scaleDivergingPow:ab,scaleDivergingSqrt:X$,scaleDivergingSymlog:aO,scaleIdentity:qz,scaleImplicit:Ix,scaleLinear:kz,scaleLog:Lz,scaleOrdinal:Ry,scalePoint:RI,scalePow:Yy,scaleQuantile:Bz,scaleQuantize:Uz,scaleRadial:$z,scaleSequential:Zz,scaleSequentialLog:Jz,scaleSequentialPow:nb,scaleSequentialQuantile:tO,scaleSequentialSqrt:K$,scaleSequentialSymlog:eO,scaleSqrt:O8,scaleSymlog:Iz,scaleThreshold:Hz,scaleTime:V$,scaleUtc:Y$,tickFormat:Pz},Symbol.toStringTag,{value:"Module"}));var Va=e=>e.chartData,iO=re([Va],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),ib=(e,t,r,a)=>a?iO(e):Va(e),W$=(e,t,r)=>r?iO(e):Va(e);function Ia(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Xe(t)&&Xe(r))return!0}return!1}function _C(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function sO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,l,o;if(Xe(r))l=r;else if(typeof r=="function")return;if(Xe(a))o=a;else if(typeof a=="function")return;var u=[l,o];if(Ia(u))return u}}function Z$(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(Ia(a))return _C(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,d;if(l==="auto")t!=null&&(u=Math.min(...t));else if(Se(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&PS.test(l)){var m=PS.exec(l);if(m==null||m[1]==null||t==null)u=void 0;else{var h=+m[1];u=t[0]-h}}else u=t?.[0];if(o==="auto")t!=null&&(d=Math.max(...t));else if(Se(o))d=o;else if(typeof o=="function")try{t!=null&&(d=o(t?.[1]))}catch{}else if(typeof o=="string"&&kS.test(o)){var p=kS.exec(o);if(p==null||p[1]==null||t==null)d=void 0;else{var v=+p[1];d=t[1]+v}}else d=t?.[1];var x=[u,d];if(Ia(x))return t==null?x:_C(x,t,r)}}}var Wl=1e9,J$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lb,wt=!0,An="[DecimalError] ",js=An+"Invalid argument: ",sb=An+"Exponent out of range: ",Zl=Math.floor,ms=Math.pow,eB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xr,tr=1e7,jt=7,lO=9007199254740991,Tf=Zl(lO/jt),Ne={};Ne.absoluteValue=Ne.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ne.comparedTo=Ne.cmp=function(e){var t,r,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,t=0,r=a<l?a:l;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};Ne.decimalPlaces=Ne.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*jt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ne.dividedBy=Ne.div=function(e){return Ma(this,new this.constructor(e))};Ne.dividedToIntegerBy=Ne.idiv=function(e){var t=this,r=t.constructor;return vt(Ma(t,new r(e),0,1),r.precision)};Ne.equals=Ne.eq=function(e){return!this.cmp(e)};Ne.exponent=function(){return Ht(this)};Ne.greaterThan=Ne.gt=function(e){return this.cmp(e)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(e){return this.cmp(e)>=0};Ne.isInteger=Ne.isint=function(){return this.e>this.d.length-2};Ne.isNegative=Ne.isneg=function(){return this.s<0};Ne.isPositive=Ne.ispos=function(){return this.s>0};Ne.isZero=function(){return this.s===0};Ne.lessThan=Ne.lt=function(e){return this.cmp(e)<0};Ne.lessThanOrEqualTo=Ne.lte=function(e){return this.cmp(e)<1};Ne.logarithm=Ne.log=function(e){var t,r=this,a=r.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Xr))throw Error(An+"NaN");if(r.s<1)throw Error(An+(r.s?"NaN":"-Infinity"));return r.eq(Xr)?new a(0):(wt=!1,t=Ma(Pc(r,o),Pc(e,o),o),wt=!0,vt(t,l))};Ne.minus=Ne.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uO(t,e):oO(t,(e.s=-e.s,e))};Ne.modulo=Ne.mod=function(e){var t,r=this,a=r.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(An+"NaN");return r.s?(wt=!1,t=Ma(r,e,0,1).times(e),wt=!0,r.minus(t)):vt(new a(r),l)};Ne.naturalExponential=Ne.exp=function(){return cO(this)};Ne.naturalLogarithm=Ne.ln=function(){return Pc(this)};Ne.negated=Ne.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ne.plus=Ne.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oO(t,e):uO(t,(e.s=-e.s,e))};Ne.precision=Ne.sd=function(e){var t,r,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(js+e);if(t=Ht(l)+1,a=l.d.length-1,r=a*jt+1,a=l.d[a],a){for(;a%10==0;a/=10)r--;for(a=l.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Ne.squareRoot=Ne.sqrt=function(){var e,t,r,a,l,o,u,d=this,m=d.constructor;if(d.s<1){if(!d.s)return new m(0);throw Error(An+"NaN")}for(e=Ht(d),wt=!1,l=Math.sqrt(+d),l==0||l==1/0?(t=ea(d.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=Zl((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new m(t)):a=new m(l.toString()),r=m.precision,l=u=r+3;;)if(o=a,a=o.plus(Ma(d,o,u+2)).times(.5),ea(o.d).slice(0,u)===(t=ea(a.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(vt(o,r+1,0),o.times(o).eq(d)){a=o;break}}else if(t!="9999")break;u+=4}return wt=!0,vt(a,r)};Ne.times=Ne.mul=function(e){var t,r,a,l,o,u,d,m,h,p=this,v=p.constructor,x=p.d,b=(e=new v(e)).d;if(!p.s||!e.s)return new v(0);for(e.s*=p.s,r=p.e+e.e,m=x.length,h=b.length,m<h&&(o=x,x=b,b=o,u=m,m=h,h=u),o=[],u=m+h,a=u;a--;)o.push(0);for(a=h;--a>=0;){for(t=0,l=m+a;l>a;)d=o[l]+b[a]*x[l-a-1]+t,o[l--]=d%tr|0,t=d/tr|0;o[l]=(o[l]+t)%tr|0}for(;!o[--u];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,wt?vt(e,v.precision):e};Ne.toDecimalPlaces=Ne.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(ia(e,0,Wl),t===void 0?t=a.rounding:ia(t,0,8),vt(r,e+Ht(r)+1,t))};Ne.toExponential=function(e,t){var r,a=this,l=a.constructor;return e===void 0?r=As(a,!0):(ia(e,0,Wl),t===void 0?t=l.rounding:ia(t,0,8),a=vt(new l(a),e+1,t),r=As(a,!0,e+1)),r};Ne.toFixed=function(e,t){var r,a,l=this,o=l.constructor;return e===void 0?As(l):(ia(e,0,Wl),t===void 0?t=o.rounding:ia(t,0,8),a=vt(new o(l),e+Ht(l)+1,t),r=As(a.abs(),!1,e+Ht(a)+1),l.isneg()&&!l.isZero()?"-"+r:r)};Ne.toInteger=Ne.toint=function(){var e=this,t=e.constructor;return vt(new t(e),Ht(e)+1,t.rounding)};Ne.toNumber=function(){return+this};Ne.toPower=Ne.pow=function(e){var t,r,a,l,o,u,d=this,m=d.constructor,h=12,p=+(e=new m(e));if(!e.s)return new m(Xr);if(d=new m(d),!d.s){if(e.s<1)throw Error(An+"Infinity");return d}if(d.eq(Xr))return d;if(a=m.precision,e.eq(Xr))return vt(d,a);if(t=e.e,r=e.d.length-1,u=t>=r,o=d.s,u){if((r=p<0?-p:p)<=lO){for(l=new m(Xr),t=Math.ceil(a/jt+4),wt=!1;r%2&&(l=l.times(d),wC(l.d,t)),r=Zl(r/2),r!==0;)d=d.times(d),wC(d.d,t);return wt=!0,e.s<0?new m(Xr).div(l):vt(l,a)}}else if(o<0)throw Error(An+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,wt=!1,l=e.times(Pc(d,a+h)),wt=!0,l=cO(l),l.s=o,l};Ne.toPrecision=function(e,t){var r,a,l=this,o=l.constructor;return e===void 0?(r=Ht(l),a=As(l,r<=o.toExpNeg||r>=o.toExpPos)):(ia(e,1,Wl),t===void 0?t=o.rounding:ia(t,0,8),l=vt(new o(l),e,t),r=Ht(l),a=As(l,e<=r||r<=o.toExpNeg,e)),a};Ne.toSignificantDigits=Ne.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(ia(e,1,Wl),t===void 0?t=a.rounding:ia(t,0,8)),vt(new a(r),e,t)};Ne.toString=Ne.valueOf=Ne.val=Ne.toJSON=Ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ht(e),r=e.constructor;return As(e,t<=r.toExpNeg||t>=r.toExpPos)};function oO(e,t){var r,a,l,o,u,d,m,h,p=e.constructor,v=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),wt?vt(t,v):t;if(m=e.d,h=t.d,u=e.e,l=t.e,m=m.slice(),o=u-l,o){for(o<0?(a=m,o=-o,d=h.length):(a=h,l=u,d=m.length),u=Math.ceil(v/jt),d=u>d?u+1:d+1,o>d&&(o=d,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(d=m.length,o=h.length,d-o<0&&(o=d,a=h,h=m,m=a),r=0;o;)r=(m[--o]=m[o]+h[o]+r)/tr|0,m[o]%=tr;for(r&&(m.unshift(r),++l),d=m.length;m[--d]==0;)m.pop();return t.d=m,t.e=l,wt?vt(t,v):t}function ia(e,t,r){if(e!==~~e||e<t||e>r)throw Error(js+e)}function ea(e){var t,r,a,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,t=1;t<l;t++)a=e[t]+"",r=jt-a.length,r&&(o+=wi(r)),o+=a;u=e[t],a=u+"",r=jt-a.length,r&&(o+=wi(r))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var Ma=(function(){function e(a,l){var o,u=0,d=a.length;for(a=a.slice();d--;)o=a[d]*l+u,a[d]=o%tr|0,u=o/tr|0;return u&&a.unshift(u),a}function t(a,l,o,u){var d,m;if(o!=u)m=o>u?1:-1;else for(d=m=0;d<o;d++)if(a[d]!=l[d]){m=a[d]>l[d]?1:-1;break}return m}function r(a,l,o){for(var u=0;o--;)a[o]-=u,u=a[o]<l[o]?1:0,a[o]=u*tr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,u){var d,m,h,p,v,x,b,_,N,S,C,z,w,E,O,P,L,T,D=a.constructor,k=a.s==l.s?1:-1,$=a.d,B=l.d;if(!a.s)return new D(a);if(!l.s)throw Error(An+"Division by zero");for(m=a.e-l.e,L=B.length,O=$.length,b=new D(k),_=b.d=[],h=0;B[h]==($[h]||0);)++h;if(B[h]>($[h]||0)&&--m,o==null?z=o=D.precision:u?z=o+(Ht(a)-Ht(l))+1:z=o,z<0)return new D(0);if(z=z/jt+2|0,h=0,L==1)for(p=0,B=B[0],z++;(h<O||p)&&z--;h++)w=p*tr+($[h]||0),_[h]=w/B|0,p=w%B|0;else{for(p=tr/(B[0]+1)|0,p>1&&(B=e(B,p),$=e($,p),L=B.length,O=$.length),E=L,N=$.slice(0,L),S=N.length;S<L;)N[S++]=0;T=B.slice(),T.unshift(0),P=B[0],B[1]>=tr/2&&++P;do p=0,d=t(B,N,L,S),d<0?(C=N[0],L!=S&&(C=C*tr+(N[1]||0)),p=C/P|0,p>1?(p>=tr&&(p=tr-1),v=e(B,p),x=v.length,S=N.length,d=t(v,N,x,S),d==1&&(p--,r(v,L<x?T:B,x))):(p==0&&(d=p=1),v=B.slice()),x=v.length,x<S&&v.unshift(0),r(N,v,S),d==-1&&(S=N.length,d=t(B,N,L,S),d<1&&(p++,r(N,L<S?T:B,S))),S=N.length):d===0&&(p++,N=[0]),_[h++]=p,d&&N[0]?N[S++]=$[E]||0:(N=[$[E]],S=1);while((E++<O||N[0]!==void 0)&&z--)}return _[0]||_.shift(),b.e=m,vt(b,u?o+Ht(b)+1:o)}})();function cO(e,t){var r,a,l,o,u,d,m=0,h=0,p=e.constructor,v=p.precision;if(Ht(e)>16)throw Error(sb+Ht(e));if(!e.s)return new p(Xr);for(wt=!1,d=v,u=new p(.03125);e.abs().gte(.1);)e=e.times(u),h+=5;for(a=Math.log(ms(2,h))/Math.LN10*2+5|0,d+=a,r=l=o=new p(Xr),p.precision=d;;){if(l=vt(l.times(e),d),r=r.times(++m),u=o.plus(Ma(l,r,d)),ea(u.d).slice(0,d)===ea(o.d).slice(0,d)){for(;h--;)o=vt(o.times(o),d);return p.precision=v,t==null?(wt=!0,vt(o,v)):o}o=u}}function Ht(e){for(var t=e.e*jt,r=e.d[0];r>=10;r/=10)t++;return t}function qg(e,t,r){if(t>e.LN10.sd())throw wt=!0,r&&(e.precision=r),Error(An+"LN10 precision limit exceeded");return vt(new e(e.LN10),t)}function wi(e){for(var t="";e--;)t+="0";return t}function Pc(e,t){var r,a,l,o,u,d,m,h,p,v=1,x=10,b=e,_=b.d,N=b.constructor,S=N.precision;if(b.s<1)throw Error(An+(b.s?"NaN":"-Infinity"));if(b.eq(Xr))return new N(0);if(t==null?(wt=!1,h=S):h=t,b.eq(10))return t==null&&(wt=!0),qg(N,h);if(h+=x,N.precision=h,r=ea(_),a=r.charAt(0),o=Ht(b),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)b=b.times(e),r=ea(b.d),a=r.charAt(0),v++;o=Ht(b),a>1?(b=new N("0."+r),o++):b=new N(a+"."+r.slice(1))}else return m=qg(N,h+2,S).times(o+""),b=Pc(new N(a+"."+r.slice(1)),h-x).plus(m),N.precision=S,t==null?(wt=!0,vt(b,S)):b;for(d=u=b=Ma(b.minus(Xr),b.plus(Xr),h),p=vt(b.times(b),h),l=3;;){if(u=vt(u.times(p),h),m=d.plus(Ma(u,new N(l),h)),ea(m.d).slice(0,h)===ea(d.d).slice(0,h))return d=d.times(2),o!==0&&(d=d.plus(qg(N,h+2,S).times(o+""))),d=Ma(d,new N(v),h),N.precision=S,t==null?(wt=!0,vt(d,S)):d;d=m,l+=2}}function SC(e,t){var r,a,l;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(a,l),t){if(l-=a,r=r-a-1,e.e=Zl(r/jt),e.d=[],a=(r+1)%jt,r<0&&(a+=jt),a<l){for(a&&e.d.push(+t.slice(0,a)),l-=jt;a<l;)e.d.push(+t.slice(a,a+=jt));t=t.slice(a),a=jt-t.length}else a-=l;for(;a--;)t+="0";if(e.d.push(+t),wt&&(e.e>Tf||e.e<-Tf))throw Error(sb+r)}else e.s=0,e.e=0,e.d=[0];return e}function vt(e,t,r){var a,l,o,u,d,m,h,p,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(a=t-u,a<0)a+=jt,l=t,h=v[p=0];else{if(p=Math.ceil((a+1)/jt),o=v.length,p>=o)return e;for(h=o=v[p],u=1;o>=10;o/=10)u++;a%=jt,l=a-jt+u}if(r!==void 0&&(o=ms(10,u-l-1),d=h/o%10|0,m=t<0||v[p+1]!==void 0||h%o,m=r<4?(d||m)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||m||r==6&&(a>0?l>0?h/ms(10,u-l):0:v[p-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return m?(o=Ht(e),v.length=1,t=t-o-1,v[0]=ms(10,(jt-t%jt)%jt),e.e=Zl(-t/jt)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(a==0?(v.length=p,o=1,p--):(v.length=p+1,o=ms(10,jt-a),v[p]=l>0?(h/ms(10,u-l)%ms(10,l)|0)*o:0),m)for(;;)if(p==0){(v[0]+=o)==tr&&(v[0]=1,++e.e);break}else{if(v[p]+=o,v[p]!=tr)break;v[p--]=0,o=1}for(a=v.length;v[--a]===0;)v.pop();if(wt&&(e.e>Tf||e.e<-Tf))throw Error(sb+Ht(e));return e}function uO(e,t){var r,a,l,o,u,d,m,h,p,v,x=e.constructor,b=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),wt?vt(t,b):t;if(m=e.d,v=t.d,a=t.e,h=e.e,m=m.slice(),u=h-a,u){for(p=u<0,p?(r=m,u=-u,d=v.length):(r=v,a=h,d=m.length),l=Math.max(Math.ceil(b/jt),d)+2,u>l&&(u=l,r.length=1),r.reverse(),l=u;l--;)r.push(0);r.reverse()}else{for(l=m.length,d=v.length,p=l<d,p&&(d=l),l=0;l<d;l++)if(m[l]!=v[l]){p=m[l]<v[l];break}u=0}for(p&&(r=m,m=v,v=r,t.s=-t.s),d=m.length,l=v.length-d;l>0;--l)m[d++]=0;for(l=v.length;l>u;){if(m[--l]<v[l]){for(o=l;o&&m[--o]===0;)m[o]=tr-1;--m[o],m[l]+=tr}m[l]-=v[l]}for(;m[--d]===0;)m.pop();for(;m[0]===0;m.shift())--a;return m[0]?(t.d=m,t.e=a,wt?vt(t,b):t):new x(0)}function As(e,t,r){var a,l=Ht(e),o=ea(e.d),u=o.length;return t?(r&&(a=r-u)>0?o=o.charAt(0)+"."+o.slice(1)+wi(a):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+wi(-l-1)+o,r&&(a=r-u)>0&&(o+=wi(a))):l>=u?(o+=wi(l+1-u),r&&(a=r-l-1)>0&&(o=o+"."+wi(a))):((a=l+1)<u&&(o=o.slice(0,a)+"."+o.slice(a)),r&&(a=r-u)>0&&(l+1===u&&(o+="."),o+=wi(a))),e.s<0?"-"+o:o}function wC(e,t){if(e.length>t)return e.length=t,!0}function dO(e){var t,r,a;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(js+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return SC(u,o.toString())}else if(typeof o!="string")throw Error(js+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,eB.test(o))SC(u,o);else throw Error(js+o)}if(l.prototype=Ne,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=dO,l.config=l.set=tB,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return l.config(e),l}function tB(e){if(!e||typeof e!="object")throw Error(An+"Object expected");var t,r,a,l=["precision",1,Wl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((a=e[r=l[t]])!==void 0)if(Zl(a)===a&&a>=l[t+1]&&a<=l[t+2])this[r]=a;else throw Error(js+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(js+r+": "+a);return this}var lb=dO(J$);Xr=new lb(1);const st=lb;function fO(e){var t;return e===0?t=1:t=Math.floor(new st(e).abs().log(10).toNumber())+1,t}function mO(e,t,r){for(var a=new st(e),l=0,o=[];a.lt(t)&&l<1e5;)o.push(a.toNumber()),a=a.add(r),l++;return o}var hO=e=>{var[t,r]=e,[a,l]=[t,r];return t>r&&([a,l]=[r,t]),[a,l]},pO=(e,t,r)=>{if(e.lte(0))return new st(0);var a=fO(e.toNumber()),l=new st(10).pow(a),o=e.div(l),u=a!==1?.05:.1,d=new st(Math.ceil(o.div(u).toNumber())).add(r).mul(u),m=d.mul(l);return t?new st(m.toNumber()):new st(Math.ceil(m.toNumber()))},rB=(e,t,r)=>{var a=new st(1),l=new st(e);if(!l.isint()&&r){var o=Math.abs(e);o<1?(a=new st(10).pow(fO(e)-1),l=new st(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new st(Math.floor(e)))}else e===0?l=new st(Math.floor((t-1)/2)):r||(l=new st(Math.floor(e)));for(var u=Math.floor((t-1)/2),d=[],m=0;m<t;m++)d.push(l.add(new st(m-u).mul(a)).toNumber());return d},vO=function(t,r,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new st(0),tickMin:new st(0),tickMax:new st(0)};var u=pO(new st(r).sub(t).div(a-1),l,o),d;t<=0&&r>=0?d=new st(0):(d=new st(t).add(r).div(2),d=d.sub(new st(d).mod(u)));var m=Math.ceil(d.sub(t).div(u).toNumber()),h=Math.ceil(new st(r).sub(d).div(u).toNumber()),p=m+h+1;return p>a?vO(t,r,a,l,o+1):(p<a&&(h=r>0?h+(a-p):h,m=r>0?m:m+(a-p)),{step:u,tickMin:d.sub(new st(m).mul(u)),tickMax:d.add(new st(h).mul(u))})},nB=function(t){var[r,a]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[d,m]=hO([r,a]);if(d===-1/0||m===1/0){var h=m===1/0?[d,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),m];return r>a?h.reverse():h}if(d===m)return rB(d,l,o);var{step:p,tickMin:v,tickMax:x}=vO(d,m,u,o,0),b=mO(v,x.add(new st(.1).mul(p)),p);return r>a?b.reverse():b},aB=function(t,r){var[a,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=hO([a,l]);if(u===-1/0||d===1/0)return[a,l];if(u===d)return[u];var m=Math.max(r,2),h=pO(new st(d).sub(u).div(m-1),o,0),p=[...mO(new st(u),new st(d),h),d];return o===!1&&(p=p.map(v=>Math.round(v))),a>l?p.reverse():p},gO=e=>e.rootProps.maxBarSize,iB=e=>e.rootProps.barGap,xO=e=>e.rootProps.barCategoryGap,sB=e=>e.rootProps.barSize,Om=e=>e.rootProps.stackOffset,yO=e=>e.rootProps.reverseStackOrder,ob=e=>e.options.chartName,cb=e=>e.rootProps.syncId,bO=e=>e.rootProps.syncMethod,ub=e=>e.options.eventEmitter,rr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},cs={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Xn={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Dm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Mm(e,t,r){if(r!=="auto")return r;if(e!=null)return Ha(e,t)?"category":"number"}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Pf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(a){lB(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lB(e,t,r){return(t=oB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oB(e){var t=cB(e,"string");return typeof t=="symbol"?t:t+""}function cB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AC={allowDataOverflow:cs.allowDataOverflow,allowDecimals:cs.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:cs.angleAxisId,includeHidden:!1,name:void 0,reversed:cs.reversed,scale:cs.scale,tick:cs.tick,tickCount:void 0,ticks:void 0,type:cs.type,unit:void 0},EC={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:Xn.allowDecimals,allowDuplicatedCategory:Xn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xn.radiusAxisId,includeHidden:Xn.includeHidden,name:void 0,reversed:Xn.reversed,scale:Xn.scale,tick:Xn.tick,tickCount:Xn.tickCount,ticks:void 0,type:Xn.type,unit:void 0},uB=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},db=re([uB,lz],(e,t)=>{var r;if(e!=null)return e;var a=(r=Mm(t,"angleAxis",AC.type))!==null&&r!==void 0?r:"category";return Pf(Pf({},AC),{},{type:a})}),dB=(e,t)=>e.polarAxis.radiusAxis[t],fb=re([dB,lz],(e,t)=>{var r;if(e!=null)return e;var a=(r=Mm(t,"radiusAxis",EC.type))!==null&&r!==void 0?r:"category";return Pf(Pf({},EC),{},{type:a})}),Tm=e=>e.polarOptions,mb=re([Ga,Fa,ar],oI),jO=re([Tm,mb],(e,t)=>{if(e!=null)return In(e.innerRadius,t,0)}),NO=re([Tm,mb],(e,t)=>{if(e!=null)return In(e.outerRadius,t,t*.8)}),fB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_O=re([Tm],fB);re([db,_O],Dm);var SO=re([mb,jO,NO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});re([fb,SO],Dm);var wO=re([lt,Tm,jO,NO,Ga,Fa],(e,t,r,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:u,cy:d,startAngle:m,endAngle:h}=t;return{cx:In(u,l,l/2),cy:In(d,o,o/2),innerRadius:r,outerRadius:a,startAngle:m,endAngle:h,clockWise:!1}}}),sr=(e,t)=>t,Pm=(e,t,r)=>r;function hb(e){return e?.id}function CO(e,t,r){var{chartData:a=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=r,u=new Map;return e.forEach(d=>{var m,h=(m=d.data)!==null&&m!==void 0?m:a;if(!(h==null||h.length===0)){var p=hb(d);h.forEach((v,x)=>{var b=o==null||l?x:String(Ut(v,o,null)),_=Ut(v,d.dataKey,0),N;u.has(b)?N=u.get(b):N={},Object.assign(N,{[p]:_}),u.set(b,N)})}}),Array.from(u.values())}function km(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var qm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Rm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function mB(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var lr=e=>{var t=lt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Jl=e=>e.tooltip.settings.axisId;function hB(e){if(e in hc)return hc[e]();var t="scale".concat($c(e));if(t in hc)return hc[t]()}function zC(e){var t=e.ticks,r=e.bandwidth,a=e.range(),l=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(o){function u(){return o.apply(this,arguments)}return u.toString=function(){return o.toString()},u})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var u=l[0],d=l[1];return u<=d?o>=u&&o<=d:o>=d&&o<=u},bandwidth:r?()=>r.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,u)=>{var d=e(o);if(d!=null){if(e.bandwidth&&u!==null&&u!==void 0&&u.position){var m=e.bandwidth();switch(u.position){case"middle":d+=m/2;break;case"end":d+=m;break}}return d}}}}function OC(e,t,r){if(typeof e=="function")return zC(e.copy().domain(t).range(r));if(e!=null){var a=hB(e);if(a!=null)return a.domain(t).range(r),zC(a)}}var pB=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Ia(t)){for(var r,a,l=0;l<t.length;l++){var o=t[l];Xe(o)&&((r===void 0||o<r)&&(r=o),(a===void 0||o>a)&&(a=o))}return r!==void 0&&a!==void 0?[r,a]:void 0}return t}default:return t}};function DC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function kf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(r),!0).forEach(function(a){vB(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vB(e,t,r){return(t=gB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gB(e){var t=xB(e,"string");return typeof t=="symbol"?t:t+""}function xB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hx=[0,"auto"],Jt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},AO=(e,t)=>e.cartesianAxis.xAxis[t],Ya=(e,t)=>{var r=AO(e,t);return r??Jt},er={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Hx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Hc},EO=(e,t)=>e.cartesianAxis.yAxis[t],Ka=(e,t)=>{var r=EO(e,t);return r??er},yB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},pb=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??yB},Or=(e,t,r)=>{switch(t){case"xAxis":return Ya(e,r);case"yAxis":return Ka(e,r);case"zAxis":return pb(e,r);case"angleAxis":return db(e,r);case"radiusAxis":return fb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},bB=(e,t,r)=>{switch(t){case"xAxis":return Ya(e,r);case"yAxis":return Ka(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Xc=(e,t,r)=>{switch(t){case"xAxis":return Ya(e,r);case"yAxis":return Ka(e,r);case"angleAxis":return db(e,r);case"radiusAxis":return fb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},zO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function OO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Lm=e=>e.graphicalItems.cartesianItems,jB=re([sr,Pm],OO),DO=(e,t,r)=>e.filter(r).filter(a=>t?.includeHidden===!0?!0:!a.hide),Wc=re([Lm,Or,jB],DO,{memoizeOptions:{resultEqualityCheck:Rm}}),MO=re([Wc],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(km)),TO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),NB=re([Wc],TO),PO=e=>e.map(t=>t.data).filter(Boolean).flat(1),_B=re([Wc],PO,{memoizeOptions:{resultEqualityCheck:Rm}}),kO=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:l}=t;return e.length>0?e:r.slice(a,l+1)},vb=re([_B,ib],kO),qO=(e,t,r)=>t?.dataKey!=null?e.map(a=>({value:Ut(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:Ut(l,a)}))):e.map(a=>({value:a})),Im=re([vb,Or,Wc],qO);function RO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Fd(e){if(na(e)||e instanceof Date){var t=Number(e);if(Xe(t))return t}}function MC(e){if(Array.isArray(e)){var t=[Fd(e[0]),Fd(e[1])];return Ia(t)?t:void 0}var r=Fd(e);if(r!=null)return[r,r]}function $a(e){return e.map(Fd).filter(Ir)}function SB(e,t,r){return!r||typeof t!="number"||ra(t)?[]:r.length?$a(r.flatMap(a=>{var l=Ut(e,a.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!Xe(o)||!Xe(u)))return[t-o,t+u]})):[]}var Xt=e=>{var t=lr(e),r=Jl(e);return Xc(e,t,r)},Zc=re([Xt],e=>e?.dataKey),wB=re([MO,ib,Xt],CO),LO=(e,t,r,a)=>{var l={},o=t.reduce((u,d)=>{if(d.stackId==null)return u;var m=u[d.stackId];return m==null&&(m=[]),m.push(d),u[d.stackId]=m,u},l);return Object.fromEntries(Object.entries(o).map(u=>{var[d,m]=u,h=a?[...m].reverse():m,p=h.map(hb);return[d,{stackedData:J4(e,p,r),graphicalItems:h}]}))},Gx=re([wB,MO,Om,yO],LO),IO=(e,t,r,a)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(a==null&&r!=="zAxis"){var u=a6(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},CB=re([Or],e=>e.allowDataOverflow),gb=e=>{var t;if(e==null||!("domain"in e))return Hx;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=$a(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Hx},$O=re([Or],gb),BO=re([$O,CB],sO),AB=re([Gx,Va,sr,BO],IO,{memoizeOptions:{resultEqualityCheck:qm}}),xb=e=>e.errorBars,EB=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>RO(r,a)),qf=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var l=r.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),d=Math.max(...o);return[u,d]}},UO=(e,t,r,a,l)=>{var o,u;if(r.length>0&&e.forEach(d=>{r.forEach(m=>{var h,p,v=(h=a[m.id])===null||h===void 0?void 0:h.filter(C=>RO(l,C)),x=Ut(d,(p=t.dataKey)!==null&&p!==void 0?p:m.dataKey),b=SB(d,x,v);if(b.length>=2){var _=Math.min(...b),N=Math.max(...b);(o==null||_<o)&&(o=_),(u==null||N>u)&&(u=N)}var S=MC(x);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),u=u==null?S[1]:Math.max(u,S[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var m=MC(Ut(d,t.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),u=u==null?m[1]:Math.max(u,m[1]))}),Xe(o)&&Xe(u))return[o,u]},zB=re([vb,Or,NB,xb,sr],UO,{memoizeOptions:{resultEqualityCheck:qm}});function OB(e){var{value:t}=e;if(na(t)||t instanceof Date)return t}var DB=(e,t,r)=>{var a=e.map(OB).filter(l=>l!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&aE(a))?wz(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},HO=e=>e.referenceElements.dots,eo=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),MB=re([HO,sr,Pm],eo),GO=e=>e.referenceElements.areas,TB=re([GO,sr,Pm],eo),FO=e=>e.referenceElements.lines,PB=re([FO,sr,Pm],eo),QO=(e,t)=>{if(e!=null){var r=$a(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},kB=re(MB,sr,QO),VO=(e,t)=>{if(e!=null){var r=$a(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},qB=re([TB,sr],VO);function RB(e){var t;if(e.x!=null)return $a([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return r==null||r.length===0?[]:$a(r)}function LB(e){var t;if(e.y!=null)return $a([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return r==null||r.length===0?[]:$a(r)}var YO=(e,t)=>{if(e!=null){var r=e.flatMap(a=>t==="xAxis"?RB(a):LB(a));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},IB=re([PB,sr],YO),$B=re(kB,IB,qB,(e,t,r)=>qf(e,r,t)),KO=(e,t,r,a,l,o,u,d)=>{if(r!=null)return r;var m=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",h=m?qf(a,o,l):qf(o,l);return Z$(t,h,e.allowDataOverflow)},BB=re([Or,$O,BO,AB,zB,$B,lt,sr],KO,{memoizeOptions:{resultEqualityCheck:qm}}),UB=[0,1],XO=(e,t,r,a,l,o,u)=>{if(!((e==null||r==null||r.length===0)&&u===void 0)){var{dataKey:d,type:m}=e,h=Ha(t,o);if(h&&d==null){var p;return wz(0,(p=r?.length)!==null&&p!==void 0?p:0)}return m==="category"?DB(a,e,h):l==="expand"?UB:u}},yb=re([Or,lt,vb,Im,Om,sr,BB],XO);function HB(e){return e in hc}var WO=(e,t,r)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat($c(a));return HB(o)?o:"point"}}},to=re([Or,zO,ob],WO);function bb(e,t,r,a){if(!(r==null||a==null))return typeof e.scale=="function"?OC(e.scale,r,a):OC(t,r,a)}var ZO=(e,t,r)=>{var a=gb(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Ia(e))return nB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ia(e))return aB(e,t.tickCount,t.allowDecimals)}},jb=re([yb,Xc,to],ZO),JO=(e,t,r,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Ia(t)&&Array.isArray(r)&&r.length>0){var l,o,u=t[0],d=(l=r[0])!==null&&l!==void 0?l:0,m=t[1],h=(o=r[r.length-1])!==null&&o!==void 0?o:0;return[Math.min(u,d),Math.max(m,h)]}return t},GB=re([Or,yb,jb,sr],JO),FB=re(Im,Or,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from($a(e.map(v=>v.value))).sort((v,x)=>v-x),l=a[0],o=a[a.length-1];if(l==null||o==null)return 1/0;var u=o-l;if(u===0)return 1/0;for(var d=0;d<a.length-1;d++){var m=a[d],h=a[d+1];if(!(m==null||h==null)){var p=h-m;r=Math.min(r,p)}}return r/u}}),eD=re(FB,lt,xO,ar,(e,t,r,a,l)=>l,(e,t,r,a,l)=>{if(!Xe(e))return 0;var o=t==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=In(r,e*o),d=e*o/2;return d-u-(d-u)/o*u}return 0}),QB=(e,t,r)=>{var a=Ya(e,t);return a==null||typeof a.padding!="string"?0:eD(e,"xAxis",t,r,a.padding)},VB=(e,t,r)=>{var a=Ka(e,t);return a==null||typeof a.padding!="string"?0:eD(e,"yAxis",t,r,a.padding)},YB=re(Ya,QB,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((r=l.left)!==null&&r!==void 0?r:0)+t,right:((a=l.right)!==null&&a!==void 0?a:0)+t}}),KB=re(Ka,VB,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((r=l.top)!==null&&r!==void 0?r:0)+t,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+t}}),XB=re([ar,YB,vm,pm,(e,t,r)=>r],(e,t,r,a,l)=>{var{padding:o}=a;return l?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),WB=re([ar,lt,KB,vm,pm,(e,t,r)=>r],(e,t,r,a,l,o)=>{var{padding:u}=l;return o?[a.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Jc=(e,t,r,a)=>{var l;switch(t){case"xAxis":return XB(e,r,a);case"yAxis":return WB(e,r,a);case"zAxis":return(l=pb(e,r))===null||l===void 0?void 0:l.range;case"angleAxis":return _O(e);case"radiusAxis":return SO(e,r);default:return}},tD=re([Or,Jc],Dm),ZB=re([to,GB],pB),$m=re([Or,to,ZB,tD],bb);re([Wc,xb,sr],EB);function rD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Bm=(e,t)=>t,Um=(e,t,r)=>r,JB=re(mm,Bm,Um,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(rD)),e7=re(hm,Bm,Um,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(rD)),nD=(e,t)=>({width:e.width,height:t.height}),t7=(e,t)=>{var r=typeof t.width=="number"?t.width:Hc;return{width:r,height:e.height}},aD=re(ar,Ya,nD),r7=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},n7=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},a7=re(Fa,ar,JB,Bm,Um,(e,t,r,a,l)=>{var o={},u;return r.forEach(d=>{var m=nD(t,d);u==null&&(u=r7(t,a,e));var h=a==="top"&&!l||a==="bottom"&&l;o[d.id]=u-Number(h)*m.height,u+=(h?-1:1)*m.height}),o}),i7=re(Ga,ar,e7,Bm,Um,(e,t,r,a,l)=>{var o={},u;return r.forEach(d=>{var m=t7(t,d);u==null&&(u=n7(t,a,e));var h=a==="left"&&!l||a==="right"&&l;o[d.id]=u-Number(h)*m.width,u+=(h?-1:1)*m.width}),o}),s7=(e,t)=>{var r=Ya(e,t);if(r!=null)return a7(e,r.orientation,r.mirror)},l7=re([ar,Ya,s7,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var l=r?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),o7=(e,t)=>{var r=Ka(e,t);if(r!=null)return i7(e,r.orientation,r.mirror)},c7=re([ar,Ka,o7,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var l=r?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),iD=re(ar,Ka,(e,t)=>{var r=typeof t.width=="number"?t.width:Hc;return{width:r,height:e.height}}),TC=(e,t,r)=>{switch(t){case"xAxis":return aD(e,r).width;case"yAxis":return iD(e,r).height;default:return}},sD=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=r,d=Ha(e,a),m=t.map(h=>h.value);if(u&&d&&o==="category"&&l&&aE(m))return m}},Nb=re([lt,Im,Or,sr],sD),lD=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:l,scale:o}=r,u=Ha(e,a);if(u&&(l==="number"||o!=="auto"))return t.map(d=>d.value)}},_b=re([lt,Im,Xc,sr],lD),PC=re([lt,bB,to,$m,Nb,_b,Jc,jb,sr],(e,t,r,a,l,o,u,d,m)=>{if(t!=null){var h=Ha(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:o,duplicateDomain:l,isCategorical:h,niceTicks:d,range:u,realScaleType:r,scale:a}}}),u7=(e,t,r,a,l,o,u,d,m)=>{if(!(t==null||a==null)){var h=Ha(e,m),{type:p,ticks:v,tickCount:x}=t,b=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,_=p==="category"&&a.bandwidth?a.bandwidth()/b:0;_=m==="angleAxis"&&o!=null&&o.length>=2?Lr(o[0]-o[1])*2*_:_;var N=v||l;return N?N.map((S,C)=>{var z=u?u.indexOf(S):S,w=a.map(z);return Xe(w)?{index:C,coordinate:w+_,value:S,offset:_}:null}).filter(Ir):h&&d?d.map((S,C)=>{var z=a.map(S);return Xe(z)?{coordinate:z+_,value:S,index:C,offset:_}:null}).filter(Ir):a.ticks?a.ticks(x).map((S,C)=>{var z=a.map(S);return Xe(z)?{coordinate:z+_,value:S,index:C,offset:_}:null}).filter(Ir):a.domain().map((S,C)=>{var z=a.map(S);return Xe(z)?{coordinate:z+_,value:u?u[S]:S,index:C,offset:_}:null}).filter(Ir)}},oD=re([lt,Xc,to,$m,jb,Jc,Nb,_b,sr],u7),d7=(e,t,r,a,l,o,u)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var d=Ha(e,u),{tickCount:m}=t,h=0;return h=u==="angleAxis"&&a?.length>=2?Lr(a[0]-a[1])*2*h:h,d&&o?o.map((p,v)=>{var x=r.map(p);return Xe(x)?{coordinate:x+h,value:p,index:v,offset:h}:null}).filter(Ir):r.ticks?r.ticks(m).map((p,v)=>{var x=r.map(p);return Xe(x)?{coordinate:x+h,value:p,index:v,offset:h}:null}).filter(Ir):r.domain().map((p,v)=>{var x=r.map(p);return Xe(x)?{coordinate:x+h,value:l?l[p]:p,index:v,offset:h}:null}).filter(Ir)}},Li=re([lt,Xc,$m,Jc,Nb,_b,sr],d7),Ii=re(Or,$m,(e,t)=>{if(!(e==null||t==null))return kf(kf({},e),{},{scale:t})}),f7=re([Or,to,yb,tD],bb);re((e,t,r)=>pb(e,r),f7,(e,t)=>{if(!(e==null||t==null))return kf(kf({},e),{},{scale:t})});var m7=re([lt,mm,hm],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),cD=e=>e.options.defaultTooltipEventType,uD=e=>e.options.validateTooltipEventTypes;function dD(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function Sb(e,t){var r=cD(e),a=uD(e);return dD(t,r,a)}function h7(e){return ze(t=>Sb(t,e))}var fD=(e,t)=>{var r,a=Number(t);if(!(ra(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},p7=e=>e.tooltip.settings,Ai={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},v7={itemInteraction:{click:Ai,hover:Ai},axisInteraction:{click:Ai,hover:Ai},keyboardInteraction:Ai,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},mD=Ur({name:"tooltip",initialState:v7,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:St()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:a}=t.payload,l=Rn(e).tooltipItemPayloads.indexOf(r);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:St()},removeTooltipEntrySettings:{reducer(e,t){var r=Rn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:St()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:g7,replaceTooltipEntrySettings:x7,removeTooltipEntrySettings:y7,setTooltipSettingsState:b7,setActiveMouseOverItemIndex:hD,mouseLeaveItem:j7,mouseLeaveChart:pD,setActiveClickItemIndex:N7,setMouseOverAxisIndex:vD,setMouseClickAxisIndex:_7,setSyncInteraction:Fx,setKeyboardInteraction:Qx}=mD.actions,S7=mD.reducer;function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Md(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(a){w7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function w7(e,t,r){return(t=C7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C7(e){var t=A7(e,"string");return typeof t=="symbol"?t:t+""}function A7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E7(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function z7(e){return e.index!=null}var gD=(e,t,r,a)=>{if(t==null)return Ai;var l=E7(e,t,r);if(l==null)return Ai;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(z7(l)){if(o)return Md(Md({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Md(Md({},Ai),{},{coordinate:l.coordinate})};function O7(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function D7(e,t){var r=O7(e),a=t[0],l=t[1];if(r===void 0)return!1;var o=Math.min(a,l),u=Math.max(a,l);return r>=o&&r<=u}function M7(e,t,r){if(r==null||t==null)return!0;var a=Ut(e,t);return a==null||!Ia(r)?!0:D7(a,r)}var wb=(e,t,r,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!Xe(o))return l;var u=0,d=1/0;t.length>0&&(d=t.length-1);var m=Math.max(u,Math.min(o,d)),h=t[m];return h==null||M7(h,r,a)?String(m):null},xD=(e,t,r,a,l,o,u)=>{if(o!=null){var d=u[0],m=d?.getPosition(o);if(m!=null)return m;var h=l?.[Number(o)];if(h)return r==="horizontal"?{x:h.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:h.coordinate}}},yD=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(r==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(u=>{var d;return((d=u.settings)===null||d===void 0?void 0:d.graphicalItemId)===l})},bD=e=>e.options.tooltipPayloadSearcher,ro=e=>e.tooltip;function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function RC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(a){T7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function T7(e,t,r){return(t=P7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P7(e){var t=k7(e,"string");return typeof t=="symbol"?t:t+""}function k7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q7(e,t){return e??t}var jD=(e,t,r,a,l,o,u)=>{if(!(t==null||o==null)){var{chartData:d,computedData:m,dataStartIndex:h,dataEndIndex:p}=r,v=[];return e.reduce((x,b)=>{var _,{dataDefinedOnItem:N,settings:S}=b,C=q7(N,d),z=Array.isArray(C)?XE(C,h,p):C,w=(_=S?.dataKey)!==null&&_!==void 0?_:a,E=S?.nameKey,O;if(a&&Array.isArray(z)&&!Array.isArray(z[0])&&u==="axis"?O=iE(z,a,l):O=o(z,t,m,E),Array.isArray(O))O.forEach(L=>{var T=RC(RC({},S),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});x.push(qS({tooltipEntrySettings:T,dataKey:L.dataKey,payload:L.payload,value:Ut(L.payload,L.dataKey),name:L.name}))});else{var P;x.push(qS({tooltipEntrySettings:S,dataKey:w,payload:O,value:Ut(O,w),name:(P=Ut(O,E))!==null&&P!==void 0?P:S?.name}))}return x},v)}},Cb=re([Xt,zO,ob],WO),R7=re([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),L7=re([lr,Jl],OO),no=re([R7,Xt,L7],DO,{memoizeOptions:{resultEqualityCheck:Rm}}),I7=re([no],e=>e.filter(km)),$7=re([no],PO,{memoizeOptions:{resultEqualityCheck:Rm}}),ao=re([$7,Va],kO),B7=re([I7,Va,Xt],CO),Ab=re([ao,Xt,no],qO),ND=re([Xt],gb),U7=re([Xt],e=>e.allowDataOverflow),_D=re([ND,U7],sO),H7=re([no],e=>e.filter(km)),G7=re([B7,H7,Om,yO],LO),F7=re([G7,Va,lr,_D],IO),Q7=re([no],TO),V7=re([ao,Xt,Q7,xb,lr],UO,{memoizeOptions:{resultEqualityCheck:qm}}),Y7=re([HO,lr,Jl],eo),K7=re([Y7,lr],QO),X7=re([GO,lr,Jl],eo),W7=re([X7,lr],VO),Z7=re([FO,lr,Jl],eo),J7=re([Z7,lr],YO),e9=re([K7,J7,W7],qf),t9=re([Xt,ND,_D,F7,V7,e9,lt,lr],KO),eu=re([Xt,lt,ao,Ab,Om,lr,t9],XO),r9=re([eu,Xt,Cb],ZO),n9=re([Xt,eu,r9,lr],JO),SD=e=>{var t=lr(e),r=Jl(e),a=!1;return Jc(e,t,r,a)},wD=re([Xt,SD],Dm),CD=re([Xt,Cb,n9,wD],bb),a9=re([lt,Ab,Xt,lr],sD),i9=re([lt,Ab,Xt,lr],lD),s9=(e,t,r,a,l,o,u,d)=>{if(t){var{type:m}=t,h=Ha(e,d);if(a){var p=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,v=m==="category"&&a.bandwidth?a.bandwidth()/p:0;return v=d==="angleAxis"&&l!=null&&l?.length>=2?Lr(l[0]-l[1])*2*v:v,h&&u?u.map((x,b)=>{var _=a.map(x);return Xe(_)?{coordinate:_+v,value:x,index:b,offset:v}:null}).filter(Ir):a.domain().map((x,b)=>{var _=a.map(x);return Xe(_)?{coordinate:_+v,value:o?o[x]:x,index:b,offset:v}:null}).filter(Ir)}}},Xa=re([lt,Xt,Cb,CD,SD,a9,i9,lr],s9),Eb=re([cD,uD,p7],(e,t,r)=>dD(r.shared,e,t)),AD=e=>e.tooltip.settings.trigger,zb=e=>e.tooltip.settings.defaultIndex,tu=re([ro,Eb,AD,zb],gD),Es=re([tu,ao,Zc,eu],wb),ED=re([Xa,Es],fD),zD=re([tu],e=>{if(e)return e.dataKey});re([tu],e=>{if(e)return e.graphicalItemId});var OD=re([ro,Eb,AD,zb],yD),l9=re([Ga,Fa,lt,ar,Xa,zb,OD],xD),o9=re([tu,l9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),c9=re([tu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),u9=re([OD,Es,Va,Zc,ED,bD,Eb],jD),d9=re([u9],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function LC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function IC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(r),!0).forEach(function(a){f9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function f9(e,t,r){return(t=m9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m9(e){var t=h9(e,"string");return typeof t=="symbol"?t:t+""}function h9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p9=()=>ze(Xt),v9=()=>{var e=p9(),t=ze(Xa),r=ze(CD);return Gl(!e||!r?void 0:IC(IC({},e),{},{scale:r}),t)};function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(a){g9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function g9(e,t,r){return(t=x9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x9(e){var t=y9(e,"string");return typeof t=="symbol"?t:t+""}function y9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b9=(e,t,r,a)=>{var l=t.find(o=>o&&o.index===r);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},j9=(e,t,r,a)=>{var l=t.find(h=>h&&h.index===r);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=a;return zl(zl(zl({},a),pr(a.cx,a.cy,u,o)),{},{angle:o,radius:u})}var d=l.coordinate,{angle:m}=a;return zl(zl(zl({},a),pr(a.cx,a.cy,d,m)),{},{angle:m,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function N9(e,t){var{chartX:r,chartY:a}=e;return r>=t.left&&r<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var DD=(e,t,r,a,l)=>{var o,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var d=0;d<u;d++){var m,h,p,v,x,b=d>0?(m=r[d-1])===null||m===void 0?void 0:m.coordinate:(h=r[u-1])===null||h===void 0?void 0:h.coordinate,_=(p=r[d])===null||p===void 0?void 0:p.coordinate,N=d>=u-1?(v=r[0])===null||v===void 0?void 0:v.coordinate:(x=r[d+1])===null||x===void 0?void 0:x.coordinate,S=void 0;if(!(b==null||_==null||N==null))if(Lr(_-b)!==Lr(N-_)){var C=[];if(Lr(N-_)===Lr(l[1]-l[0])){S=N;var z=_+l[1]-l[0];C[0]=Math.min(z,(z+b)/2),C[1]=Math.max(z,(z+b)/2)}else{S=b;var w=N+l[1]-l[0];C[0]=Math.min(_,(w+_)/2),C[1]=Math.max(_,(w+_)/2)}var E=[Math.min(_,(S+_)/2),Math.max(_,(S+_)/2)];if(e>E[0]&&e<=E[1]||e>=C[0]&&e<=C[1]){var O;return(O=r[d])===null||O===void 0?void 0:O.index}}else{var P=Math.min(b,N),L=Math.max(b,N);if(e>(P+_)/2&&e<=(L+_)/2){var T;return(T=r[d])===null||T===void 0?void 0:T.index}}}else if(t)for(var D=0;D<u;D++){var k=t[D];if(k!=null){var $=t[D+1],B=t[D-1];if(D===0&&$!=null&&e<=(k.coordinate+$.coordinate)/2||D===u-1&&B!=null&&e>(k.coordinate+B.coordinate)/2||D>0&&D<u-1&&B!=null&&$!=null&&e>(k.coordinate+B.coordinate)/2&&e<=(k.coordinate+$.coordinate)/2)return k.index}}return-1},_9=()=>ze(ob),Ob=(e,t)=>t,MD=(e,t,r)=>r,Db=(e,t,r,a)=>a,S9=re(Xa,e=>rm(e,t=>t.coordinate)),Mb=re([ro,Ob,MD,Db],gD),Tb=re([Mb,ao,Zc,eu],wb),w9=(e,t,r)=>{if(t!=null){var a=ro(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},TD=re([ro,Ob,MD,Db],yD),Rf=re([Ga,Fa,lt,ar,Xa,Db,TD],xD),C9=re([Mb,Rf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),PD=re([Xa,Tb],fD),A9=re([TD,Tb,Va,Zc,PD,bD,Ob],jD),E9=re([Mb,Tb],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),z9=(e,t,r,a,l,o,u)=>{if(!(!e||!r||!a||!l)&&N9(e,u)){var d=i6(e,t),m=DD(d,o,l,r,a),h=b9(t,l,m,e);return{activeIndex:String(m),activeCoordinate:h}}},O9=(e,t,r,a,l,o,u)=>{if(!(!e||!a||!l||!o||!r)){var d=mI(e,r);if(d){var m=s6(d,t),h=DD(m,u,o,a,l),p=j9(t,o,h,d);return{activeIndex:String(h),activeCoordinate:p}}}},D9=(e,t,r,a,l,o,u,d)=>{if(!(!e||!t||!a||!l||!o))return t==="horizontal"||t==="vertical"?z9(e,t,a,l,o,u,d):O9(e,t,r,a,l,o,u)},M9=re(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var a=e[t];if(a!=null)return r?a.panoramaElement:a.element}}),T9=re(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(rr)),r=Array.from(new Set(t));return r.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:mB}});function BC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(r),!0).forEach(function(a){P9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function P9(e,t,r){return(t=k9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R9={},L9={zIndexMap:Object.values(rr).reduce((e,t)=>UC(UC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),R9)},I9=new Set(Object.values(rr));function $9(e){return I9.has(e)}var kD=Ur({name:"zIndex",initialState:L9,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:St()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!$9(r)&&delete e.zIndexMap[r])},prepare:St()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:a,isPanorama:l}=t.payload;e.zIndexMap[r]?l?e.zIndexMap[r].panoramaElement=a:e.zIndexMap[r].element=a:e.zIndexMap[r]={consumers:0,element:l?void 0:a,panoramaElement:l?a:void 0}},prepare:St()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:St()}}}),{registerZIndexPortal:B9,unregisterZIndexPortal:U9,registerZIndexPortalElement:H9,unregisterZIndexPortalElement:G9}=kD.actions,F9=kD.reducer;function zn(e){var{zIndex:t,children:r}=e,a=L6(),l=a&&t!==void 0&&t!==0,o=Nr(),u=qt();y.useLayoutEffect(()=>l?(u(B9({zIndex:t})),()=>{u(U9({zIndex:t}))}):Ms,[u,t,l]);var d=ze(m=>M9(m,t,o));return l?d?x2.createPortal(r,d):null:r}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vx.apply(null,arguments)}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(a){Q9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Q9(e,t,r){return(t=V9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V9(e){var t=Y9(e,"string");return typeof t=="symbol"?t:t+""}function Y9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K9(e){var{cursor:t,cursorComp:r,cursorProps:a}=e;return y.isValidElement(t)?y.cloneElement(t,a):y.createElement(r,a)}function X9(e){var t,{coordinate:r,payload:a,index:l,offset:o,tooltipAxisBandSize:u,layout:d,cursor:m,tooltipEventType:h,chartName:p}=e,v=r,x=a,b=l;if(!m||!v||p!=="ScatterChart"&&h!=="axis")return null;var _,N,S;if(p==="ScatterChart")_=v,N=CL,S=rr.cursorLine;else if(p==="BarChart")_=AL(d,v,o,u),N=jz,S=rr.cursorRectangle;else if(d==="radial"&&oE(v)){var{cx:C,cy:z,radius:w,startAngle:E,endAngle:O}=Nz(v);_={cx:C,cy:z,startAngle:E,endAngle:O,innerRadius:w,outerRadius:w},N=Sz,S=rr.cursorLine}else _={points:gI(d,v,o)},N=vz,S=rr.cursorLine;var P=typeof m=="object"&&"className"in m?m.className:void 0,L=Td(Td(Td(Td({stroke:"#ccc",pointerEvents:"none"},o),_),Ic(m)),{},{payload:x,payloadIndex:b,className:mt("recharts-tooltip-cursor",P)});return y.createElement(zn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(K9,{cursor:m,cursorComp:N,cursorProps:L}))}function W9(e){var t=v9(),r=nz(),a=Ts(),l=_9();return t==null||r==null||a==null||l==null?null:y.createElement(X9,Vx({},e,{offset:r,layout:a,tooltipAxisBandSize:t,chartName:l}))}var qD=y.createContext(null),Z9=()=>y.useContext(qD),Rg={exports:{}},GC;function J9(){return GC||(GC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function l(m,h,p){this.fn=m,this.context=h,this.once=p||!1}function o(m,h,p,v,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new l(p,v||m,x),_=r?r+h:h;return m._events[_]?m._events[_].fn?m._events[_]=[m._events[_],b]:m._events[_].push(b):(m._events[_]=b,m._eventsCount++),m}function u(m,h){--m._eventsCount===0?m._events=new a:delete m._events[h]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,v;if(this._eventsCount===0)return h;for(v in p=this._events)t.call(p,v)&&h.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=r?r+h:h,v=this._events[p];if(!v)return[];if(v.fn)return[v.fn];for(var x=0,b=v.length,_=new Array(b);x<b;x++)_[x]=v[x].fn;return _},d.prototype.listenerCount=function(h){var p=r?r+h:h,v=this._events[p];return v?v.fn?1:v.length:0},d.prototype.emit=function(h,p,v,x,b,_){var N=r?r+h:h;if(!this._events[N])return!1;var S=this._events[N],C=arguments.length,z,w;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,v),!0;case 4:return S.fn.call(S.context,p,v,x),!0;case 5:return S.fn.call(S.context,p,v,x,b),!0;case 6:return S.fn.call(S.context,p,v,x,b,_),!0}for(w=1,z=new Array(C-1);w<C;w++)z[w-1]=arguments[w];S.fn.apply(S.context,z)}else{var E=S.length,O;for(w=0;w<E;w++)switch(S[w].once&&this.removeListener(h,S[w].fn,void 0,!0),C){case 1:S[w].fn.call(S[w].context);break;case 2:S[w].fn.call(S[w].context,p);break;case 3:S[w].fn.call(S[w].context,p,v);break;case 4:S[w].fn.call(S[w].context,p,v,x);break;default:if(!z)for(O=1,z=new Array(C-1);O<C;O++)z[O-1]=arguments[O];S[w].fn.apply(S[w].context,z)}}return!0},d.prototype.on=function(h,p,v){return o(this,h,p,v,!1)},d.prototype.once=function(h,p,v){return o(this,h,p,v,!0)},d.prototype.removeListener=function(h,p,v,x){var b=r?r+h:h;if(!this._events[b])return this;if(!p)return u(this,b),this;var _=this._events[b];if(_.fn)_.fn===p&&(!x||_.once)&&(!v||_.context===v)&&u(this,b);else{for(var N=0,S=[],C=_.length;N<C;N++)(_[N].fn!==p||x&&!_[N].once||v&&_[N].context!==v)&&S.push(_[N]);S.length?this._events[b]=S.length===1?S[0]:S:u(this,b)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&u(this,p)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d})(Rg)),Rg.exports}var eU=J9();const tU=Ua(eU);var kc=new tU,Yx="recharts.syncEvent.tooltip",FC="recharts.syncEvent.brush",RD=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!ra(r))return e[r]}},rU={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},LD=Ur({name:"options",initialState:rU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),nU=LD.reducer,{createEventEmitter:aU}=LD.actions;function iU(e){return e.tooltip.syncInteraction}var sU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ID=Ur({name:"chartData",initialState:sU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:QC,setDataStartEndIndexes:lU,setComputedData:jW}=ID.actions,oU=ID.reducer,cU=["x","y"];function VC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(r),!0).forEach(function(a){uU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uU(e,t,r){return(t=dU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(e){var t=fU(e,"string");return typeof t=="symbol"?t:t+""}function fU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mU(e,t){if(e==null)return{};var r,a,l=hU(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function hU(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function pU(){var e=ze(cb),t=ze(ub),r=qt(),a=ze(bO),l=ze(Xa),o=Ts(),u=gm(),d=ze(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Ms;var m=(h,p,v)=>{if(t!==v&&e===h){if(a==="index"){var x;if(u&&p!==null&&p!==void 0&&(x=p.payload)!==null&&x!==void 0&&x.coordinate&&p.payload.sourceViewBox){var b=p.payload.coordinate,{x:_,y:N}=b,S=mU(b,cU),{x:C,y:z,width:w,height:E}=p.payload.sourceViewBox,O=Ol(Ol({},S),{},{x:u.x+(w?(_-C)/w:0)*u.width,y:u.y+(E?(N-z)/E:0)*u.height});r(Ol(Ol({},p),{},{payload:Ol(Ol({},p.payload),{},{coordinate:O})}))}else r(p);return}if(l!=null){var P;if(typeof a=="function"){var L={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},T=a(l,L);P=l[T]}else a==="value"&&(P=l.find(q=>String(q.value)===p.payload.label));var{coordinate:D}=p.payload;if(P==null||p.payload.active===!1||D==null||u==null){r(Fx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:k,y:$}=D,B=Math.min(k,u.x+u.width),le=Math.min($,u.y+u.height),oe={x:o==="horizontal"?P.coordinate:B,y:o==="horizontal"?le:P.coordinate},F=Fx({active:p.payload.active,coordinate:oe,dataKey:p.payload.dataKey,index:String(P.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(F)}}};return kc.on(Yx,m),()=>{kc.off(Yx,m)}},[d,r,t,e,a,l,o,u])}function vU(){var e=ze(cb),t=ze(ub),r=qt();y.useEffect(()=>{if(e==null)return Ms;var a=(l,o,u)=>{t!==u&&e===l&&r(lU(o))};return kc.on(FC,a),()=>{kc.off(FC,a)}},[r,t,e])}function gU(){var e=qt();y.useEffect(()=>{e(aU())},[e]),pU(),vU()}function xU(e,t,r,a,l,o){var u=ze(b=>w9(b,e,t)),d=ze(ub),m=ze(cb),h=ze(bO),p=ze(iU),v=p?.active,x=gm();y.useEffect(()=>{if(!v&&m!=null&&d!=null){var b=Fx({active:o,coordinate:r,dataKey:u,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:x,graphicalItemId:void 0});kc.emit(Yx,m,b,d)}},[v,r,u,l,a,d,m,h,o,x])}function YC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function KC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(r),!0).forEach(function(a){yU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yU(e,t,r){return(t=bU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bU(e){var t=jU(e,"string");return typeof t=="symbol"?t:t+""}function jU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NU(e){return e.dataKey}function _U(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(iL,t)}var XC=[],SU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function WC(e){var t,r,a=zr(e,SU),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:m,filterNull:h,isAnimationActive:p,offset:v,payloadUniqBy:x,position:b,reverseDirection:_,useTranslate3d:N,wrapperStyle:S,cursor:C,shared:z,trigger:w,defaultIndex:E,portal:O,axisId:P}=a,L=qt(),T=typeof E=="number"?String(E):E;y.useEffect(()=>{L(b7({shared:z,trigger:w,axisId:P,active:l,defaultIndex:T}))},[L,z,w,P,l,T]);var D=gm(),k=pz(),$=h7(z),{activeIndex:B,isActive:le}=(t=ze(de=>E9(de,$,w,T)))!==null&&t!==void 0?t:{},oe=ze(de=>A9(de,$,w,T)),F=ze(de=>PD(de,$,w,T)),q=ze(de=>C9(de,$,w,T)),J=oe,Q=Z9(),ve=(r=l??le)!==null&&r!==void 0?r:!1,[U,ge]=G5([J,ve]),ee=$==="axis"?F:void 0;xU($,w,q,ee,B,ve);var me=O??Q;if(me==null||D==null||$==null)return null;var xe=J??XC;ve||(xe=XC),h&&xe.length&&(xe=v5(xe.filter(de=>de.value!=null&&(de.hide!==!0||a.includeHidden)),x,NU));var pe=xe.length>0,H=y.createElement(fL,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:p,active:ve,coordinate:q,hasPayload:pe,offset:v,position:b,reverseDirection:_,useTranslate3d:N,viewBox:D,wrapperStyle:S,lastBoundingBox:U,innerRef:ge,hasPortalFromProps:!!O},_U(m,KC(KC({},a),{},{payload:xe,label:ee,active:ve,activeIndex:B,coordinate:q,accessibilityLayer:k})));return y.createElement(y.Fragment,null,x2.createPortal(H,me),ve&&y.createElement(W9,{cursor:C,tooltipEventType:$,coordinate:q,payload:xe,index:B}))}var Pb=e=>null;Pb.displayName="Cell";function wU(e,t,r){return(t=CU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CU(e){var t=AU(e,"string");return typeof t=="symbol"?t:t+""}function AU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class EU{constructor(t){wU(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function ZC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function zU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(r),!0).forEach(function(a){OU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OU(e,t,r){return(t=DU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DU(e){var t=MU(e,"string");return typeof t=="symbol"?t:t+""}function MU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TU={cacheSize:2e3,enableCache:!0},$D=zU({},TU),JC=new EU($D.cacheSize),PU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eA="recharts_measurement_span";function kU(e,t){var r=t.fontSize||"",a=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",u=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(d)}var tA=(e,t)=>{try{var r=document.getElementById(eA);r||(r=document.createElement("span"),r.setAttribute("id",eA),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,PU,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},xc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jm.isSsr)return{width:0,height:0};if(!$D.enableCache)return tA(t,r);var a=kU(t,r),l=JC.get(a);if(l)return l;var o=tA(t,r);return JC.set(a,o),o},BD;function qU(e,t,r){return(t=RU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RU(e){var t=LU(e,"string");return typeof t=="symbol"?t:t+""}function LU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$U=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,BU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},UU=["cm","mm","pt","pc","in","Q","px"];function HU(e){return UU.includes(e)}var kl="NaN";function GU(e,t){return e*BU[t]}class hr{static parse(t){var r,[,a,l]=(r=$U.exec(t))!==null&&r!==void 0?r:[];return a==null?hr.NaN:new hr(parseFloat(a),l??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ra(t)&&(this.unit=""),r!==""&&!IU.test(r)&&(this.num=NaN,this.unit=""),HU(r)&&(this.num=GU(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ra(this.num)}}BD=hr;qU(hr,"NaN",new BD(NaN,""));function UD(e){if(e==null||e.includes(kl))return kl;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,l,o]=(r=rA.exec(t))!==null&&r!==void 0?r:[],u=hr.parse(a??""),d=hr.parse(o??""),m=l==="*"?u.multiply(d):u.divide(d);if(m.isNaN())return kl;t=t.replace(rA,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,v,x]=(h=nA.exec(t))!==null&&h!==void 0?h:[],b=hr.parse(p??""),_=hr.parse(x??""),N=v==="+"?b.add(_):b.subtract(_);if(N.isNaN())return kl;t=t.replace(nA,N.toString())}return t}var aA=/\(([^()]*)\)/;function FU(e){for(var t=e,r;(r=aA.exec(t))!=null;){var[,a]=r;t=t.replace(aA,UD(a))}return t}function QU(e){var t=e.replace(/\s+/g,"");return t=FU(t),t=UD(t),t}function VU(e){try{return QU(e)}catch{return kl}}function Lg(e){var t=VU(e.slice(5,-1));return t===kl?"":t}var YU=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],KU=["dx","dy","angle","className","breakAll"];function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Kx.apply(null,arguments)}function iA(e,t){if(e==null)return{};var r,a,l=XU(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function XU(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var HD=/[ \f\n\r\t\v\u2028\u2029]+/,GD=e=>{var{children:t,breakAll:r,style:a}=e;try{var l=[];At(t)||(r?l=t.toString().split(""):l=t.toString().split(HD));var o=l.map(d=>({word:d,width:xc(d,a).width})),u=r?0:xc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function WU(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var FD=(e,t,r,a)=>e.reduce((l,o)=>{var{word:u,width:d}=o,m=l[l.length-1];if(m&&d!=null&&(t==null||a||m.width+d+r<Number(t)))m.words.push(u),m.width+=d+r;else{var h={words:[u],width:d};l.push(h)}return l},[]),QD=e=>e.reduce((t,r)=>t.width>r.width?t:r),ZU="",sA=(e,t,r,a,l,o,u,d)=>{var m=e.slice(0,t),h=GD({breakAll:r,style:a,children:m+ZU});if(!h)return[!1,[]];var p=FD(h.wordsWithComputedWidth,o,u,d),v=p.length>l||QD(p).width>Number(o);return[v,p]},JU=(e,t,r,a,l)=>{var{maxLines:o,children:u,style:d,breakAll:m}=e,h=Se(o),p=String(u),v=FD(t,a,r,l);if(!h||l)return v;var x=v.length>o||QD(v).width>Number(a);if(!x)return v;for(var b=0,_=p.length-1,N=0,S;b<=_&&N<=p.length-1;){var C=Math.floor((b+_)/2),z=C-1,[w,E]=sA(p,z,m,d,o,a,r,l),[O]=sA(p,C,m,d,o,a,r,l);if(!w&&!O&&(b=C+1),w&&O&&(_=C-1),!w&&O){S=E;break}N++}return S||v},lA=e=>{var t=At(e)?[]:e.toString().split(HD);return[{words:t,width:void 0}]},eH=e=>{var{width:t,scaleToFit:r,children:a,style:l,breakAll:o,maxLines:u}=e;if((t||r)&&!jm.isSsr){var d,m,h=GD({breakAll:o,children:a,style:l});if(h){var{wordsWithComputedWidth:p,spaceWidth:v}=h;d=p,m=v}else return lA(a);return JU({breakAll:o,children:a,maxLines:u,style:l},d,m,t,!!r)}return lA(a)},VD="#808080",tH={angle:0,breakAll:!1,capHeight:"0.71em",fill:VD,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},kb=y.forwardRef((e,t)=>{var r=zr(e,tH),{x:a,y:l,lineHeight:o,capHeight:u,fill:d,scaleToFit:m,textAnchor:h,verticalAnchor:p}=r,v=iA(r,YU),x=y.useMemo(()=>eH({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:b,dy:_,angle:N,className:S,breakAll:C}=v,z=iA(v,KU);if(!na(a)||!na(l)||x.length===0)return null;var w=Number(a)+(Se(b)?b:0),E=Number(l)+(Se(_)?_:0);if(!Xe(w)||!Xe(E))return null;var O;switch(p){case"start":O=Lg("calc(".concat(u,")"));break;case"middle":O=Lg("calc(".concat((x.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:O=Lg("calc(".concat(x.length-1," * -").concat(o,")"));break}var P=[],L=x[0];if(m&&L!=null){var T=L.width,{width:D}=v;P.push("scale(".concat(Se(D)&&Se(T)?D/T:1,")"))}return N&&P.push("rotate(".concat(N,", ").concat(w,", ").concat(E,")")),P.length&&(z.transform=P.join(" ")),y.createElement("text",Kx({},Ar(z),{ref:t,x:w,y:E,className:mt("recharts-text",S),textAnchor:h,fill:d.includes("url")?VD:d}),x.map((k,$)=>{var B=k.words.join(C?"":" ");return y.createElement("tspan",{x:w,dy:$===0?O:o,key:"".concat(B,"-").concat($)},B)}))});kb.displayName="Text";function oA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(r),!0).forEach(function(a){rH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rH(e,t,r){return(t=nH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nH(e){var t=aH(e,"string");return typeof t=="symbol"?t:t+""}function aH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iH=e=>{var{viewBox:t,position:r,offset:a=0,parentViewBox:l}=e,{x:o,y:u,height:d,upperWidth:m,lowerWidth:h}=Ty(t),p=o,v=o+(m-h)/2,x=(p+v)/2,b=(m+h)/2,_=p+m/2,N=d>=0?1:-1,S=N*a,C=N>0?"end":"start",z=N>0?"start":"end",w=m>=0?1:-1,E=w*a,O=w>0?"end":"start",P=w>0?"start":"end",L=l;if(r==="top"){var T={x:p+m/2,y:u-S,horizontalAnchor:"middle",verticalAnchor:C};return L&&(T.height=Math.max(u-L.y,0),T.width=m),T}if(r==="bottom"){var D={x:v+h/2,y:u+d+S,horizontalAnchor:"middle",verticalAnchor:z};return L&&(D.height=Math.max(L.y+L.height-(u+d),0),D.width=h),D}if(r==="left"){var k={x:x-E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"};return L&&(k.width=Math.max(k.x-L.x,0),k.height=d),k}if(r==="right"){var $={x:x+b+E,y:u+d/2,horizontalAnchor:P,verticalAnchor:"middle"};return L&&($.width=Math.max(L.x+L.width-$.x,0),$.height=d),$}var B=L?{width:b,height:d}:{};return r==="insideLeft"?Wn({x:x+E,y:u+d/2,horizontalAnchor:P,verticalAnchor:"middle"},B):r==="insideRight"?Wn({x:x+b-E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"},B):r==="insideTop"?Wn({x:p+m/2,y:u+S,horizontalAnchor:"middle",verticalAnchor:z},B):r==="insideBottom"?Wn({x:v+h/2,y:u+d-S,horizontalAnchor:"middle",verticalAnchor:C},B):r==="insideTopLeft"?Wn({x:p+E,y:u+S,horizontalAnchor:P,verticalAnchor:z},B):r==="insideTopRight"?Wn({x:p+m-E,y:u+S,horizontalAnchor:O,verticalAnchor:z},B):r==="insideBottomLeft"?Wn({x:v+E,y:u+d-S,horizontalAnchor:P,verticalAnchor:C},B):r==="insideBottomRight"?Wn({x:v+h-E,y:u+d-S,horizontalAnchor:O,verticalAnchor:C},B):r&&typeof r=="object"&&(Se(r.x)||_s(r.x))&&(Se(r.y)||_s(r.y))?Wn({x:o+In(r.x,b),y:u+In(r.y,d),horizontalAnchor:"end",verticalAnchor:"end"},B):Wn({x:_,y:u+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},B)},sH=["labelRef"],lH=["content"];function cA(e,t){if(e==null)return{};var r,a,l=oH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function oH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function pc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(r),!0).forEach(function(a){cH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cH(e,t,r){return(t=uH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uH(e){var t=dH(e,"string");return typeof t=="symbol"?t:t+""}function dH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ea.apply(null,arguments)}var YD=y.createContext(null),fH=e=>{var{x:t,y:r,upperWidth:a,lowerWidth:l,width:o,height:u,children:d}=e,m=y.useMemo(()=>({x:t,y:r,upperWidth:a,lowerWidth:l,width:o,height:u}),[t,r,a,l,o,u]);return y.createElement(YD.Provider,{value:m},d)},KD=()=>{var e=y.useContext(YD),t=gm();return e||(t?Ty(t):void 0)},mH=y.createContext(null),hH=()=>{var e=y.useContext(mH),t=ze(wO);return e||t},pH=e=>{var{value:t,formatter:r}=e,a=At(e.children)?t:e.children;return typeof r=="function"?r(a):a},qb=e=>e!=null&&typeof e=="function",vH=(e,t)=>{var r=Lr(t-e),a=Math.min(Math.abs(t-e),360);return r*a},gH=(e,t,r,a,l)=>{var{offset:o,className:u}=e,{cx:d,cy:m,innerRadius:h,outerRadius:p,startAngle:v,endAngle:x,clockWise:b}=l,_=(h+p)/2,N=vH(v,x),S=N>=0?1:-1,C,z;switch(t){case"insideStart":C=v+S*o,z=b;break;case"insideEnd":C=x-S*o,z=!b;break;case"end":C=x+S*o,z=b;break;default:throw new Error("Unsupported position ".concat(t))}z=N<=0?z:!z;var w=pr(d,m,_,C),E=pr(d,m,_,C+(z?1:-1)*359),O="M".concat(w.x,",").concat(w.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(z?0:1,`,
    `).concat(E.x,",").concat(E.y),P=At(e.id)?Nc("recharts-radial-line-"):e.id;return y.createElement("text",Ea({},a,{dominantBaseline:"central",className:mt("recharts-radial-bar-label",u)}),y.createElement("defs",null,y.createElement("path",{id:P,d:O})),y.createElement("textPath",{xlinkHref:"#".concat(P)},r))},xH=(e,t,r)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:u,startAngle:d,endAngle:m}=e,h=(d+m)/2;if(r==="outside"){var{x:p,y:v}=pr(a,l,u+t,h);return{x:p,y:v,textAnchor:p>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(o+u)/2,{x:b,y:_}=pr(a,l,x,h);return{x:b,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Qd=e=>e!=null&&"cx"in e&&Se(e.cx),yH={angle:0,offset:5,zIndex:rr.label,position:"middle",textBreakAll:!1};function bH(e){if(!Qd(e))return e;var{cx:t,cy:r,outerRadius:a}=e,l=a*2;return{x:t-a,y:r-a,width:l,upperWidth:l,lowerWidth:l,height:l}}function Ci(e){var t=zr(e,yH),{viewBox:r,parentViewBox:a,position:l,value:o,children:u,content:d,className:m="",textBreakAll:h,labelRef:p}=t,v=hH(),x=KD(),b=l==="center"?x:v??x,_,N,S;r==null?_=b:Qd(r)?_=r:_=Ty(r);var C=bH(_);if(!_||At(o)&&At(u)&&!y.isValidElement(d)&&typeof d!="function")return null;var z=pc(pc({},t),{},{viewBox:_});if(y.isValidElement(d)){var{labelRef:w}=z,E=cA(z,sH);return y.cloneElement(d,E)}if(typeof d=="function"){var{content:O}=z,P=cA(z,lH);if(N=y.createElement(d,P),y.isValidElement(N))return N}else N=pH(t);var L=Ar(t);if(Qd(_)){if(l==="insideStart"||l==="insideEnd"||l==="end")return gH(t,l,N,L,_);S=xH(_,t.offset,t.position)}else{if(!C)return null;var T=iH({viewBox:C,position:l,offset:t.offset,parentViewBox:Qd(a)?void 0:a});S=pc(pc({x:T.x,y:T.y,textAnchor:T.horizontalAnchor,verticalAnchor:T.verticalAnchor},T.width!==void 0?{width:T.width}:{}),T.height!==void 0?{height:T.height}:{})}return y.createElement(zn,{zIndex:t.zIndex},y.createElement(kb,Ea({ref:p,className:mt("recharts-label",m)},L,S,{textAnchor:WU(L.textAnchor)?L.textAnchor:S.textAnchor,breakAll:h}),N))}Ci.displayName="Label";var jH=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?y.createElement(Ci,Ea({key:"label-implicit"},a)):na(e)?y.createElement(Ci,Ea({key:"label-implicit",value:e},a)):y.isValidElement(e)?e.type===Ci?y.cloneElement(e,pc({key:"label-implicit"},a)):y.createElement(Ci,Ea({key:"label-implicit",content:e},a)):qb(e)?y.createElement(Ci,Ea({key:"label-implicit",content:e},a)):e&&typeof e=="object"?y.createElement(Ci,Ea({},e,{key:"label-implicit"},a)):null};function NH(e){var{label:t,labelRef:r}=e,a=KD();return jH(t,a,r)||null}var Ig={},$g={},dA;function _H(){return dA||(dA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})($g)),$g}var Bg={},fA;function SH(){return fA||(fA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Bg)),Bg}var mA;function wH(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_H(),r=SH(),a=Ny();function l(o){if(a.isArrayLike(o))return t.last(r.toArray(o))}e.last=l})(Ig)),Ig}var Ug,hA;function CH(){return hA||(hA=1,Ug=wH().last),Ug}var AH=CH();const EH=Ua(AH);var zH=["valueAccessor"],OH=["dataKey","clockWise","id","textBreakAll","zIndex"];function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lf.apply(null,arguments)}function pA(e,t){if(e==null)return{};var r,a,l=DH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function DH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var MH=e=>Array.isArray(e.value)?EH(e.value):e.value,XD=y.createContext(void 0),WD=XD.Provider,ZD=y.createContext(void 0);ZD.Provider;function TH(){return y.useContext(XD)}function PH(){return y.useContext(ZD)}function Vd(e){var{valueAccessor:t=MH}=e,r=pA(e,zH),{dataKey:a,clockWise:l,id:o,textBreakAll:u,zIndex:d}=r,m=pA(r,OH),h=TH(),p=PH(),v=h||p;return!v||!v.length?null:y.createElement(zn,{zIndex:d??rr.label},y.createElement(wn,{className:"recharts-label-list"},v.map((x,b)=>{var _,N=At(a)?t(x,b):Ut(x.payload,a),S=At(o)?{}:{id:"".concat(o,"-").concat(b)};return y.createElement(Ci,Lf({key:"label-".concat(b)},Ar(x),m,S,{fill:(_=r.fill)!==null&&_!==void 0?_:x.fill,parentViewBox:x.parentViewBox,value:N,textBreakAll:u,viewBox:x.viewBox,index:b,zIndex:0}))})))}Vd.displayName="LabelList";function JD(e){var{label:t}=e;return t?t===!0?y.createElement(Vd,{key:"labelList-implicit"}):y.isValidElement(t)||qb(t)?y.createElement(Vd,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(Vd,Lf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xx.apply(null,arguments)}var eM=e=>{var{cx:t,cy:r,r:a,className:l}=e,o=mt("recharts-dot",l);return Se(t)&&Se(r)&&Se(a)?y.createElement("circle",Xx({},Ln(e),by(e),{className:o,cx:t,cy:r,r:a})):null},kH={radiusAxis:{},angleAxis:{}},tM=Ur({name:"polarAxis",initialState:kH,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:NW,removeRadiusAxis:_W,addAngleAxis:SW,removeAngleAxis:wW}=tM.actions,qH=tM.reducer;function RH(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Hg={exports:{}},dt={};var vA;function LH(){if(vA)return dt;vA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function _(N){if(typeof N=="object"&&N!==null){var S=N.$$typeof;switch(S){case e:switch(N=N.type,N){case r:case l:case a:case m:case h:case x:return N;default:switch(N=N&&N.$$typeof,N){case u:case d:case v:case p:return N;case o:return N;default:return S}}case t:return S}}}return dt.ContextConsumer=o,dt.ContextProvider=u,dt.Element=e,dt.ForwardRef=d,dt.Fragment=r,dt.Lazy=v,dt.Memo=p,dt.Portal=t,dt.Profiler=l,dt.StrictMode=a,dt.Suspense=m,dt.SuspenseList=h,dt.isContextConsumer=function(N){return _(N)===o},dt.isContextProvider=function(N){return _(N)===u},dt.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},dt.isForwardRef=function(N){return _(N)===d},dt.isFragment=function(N){return _(N)===r},dt.isLazy=function(N){return _(N)===v},dt.isMemo=function(N){return _(N)===p},dt.isPortal=function(N){return _(N)===t},dt.isProfiler=function(N){return _(N)===l},dt.isStrictMode=function(N){return _(N)===a},dt.isSuspense=function(N){return _(N)===m},dt.isSuspenseList=function(N){return _(N)===h},dt.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===l||N===a||N===m||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===v||N.$$typeof===p||N.$$typeof===u||N.$$typeof===o||N.$$typeof===d||N.$$typeof===b||N.getModuleId!==void 0)},dt.typeOf=_,dt}var gA;function IH(){return gA||(gA=1,Hg.exports=LH()),Hg.exports}var $H=IH(),xA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",yA=null,Gg=null,rM=e=>{if(e===yA&&Array.isArray(Gg))return Gg;var t=[];return y.Children.forEach(e,r=>{At(r)||($H.isFragment(r)?t=t.concat(rM(r.props.children)):t.push(r))}),Gg=t,yA=e,t};function BH(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(l=>xA(l)):a=[xA(t)],rM(e).forEach(l=>{var o=Ul(l,"type.displayName")||Ul(l,"type.name");o&&a.indexOf(o)!==-1&&r.push(l)}),r}var nM=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Fg={},bA;function UH(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${l}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t})(Fg)),Fg}var Qg,jA;function HH(){return jA||(jA=1,Qg=UH().isPlainObject),Qg}var GH=HH();const FH=Ua(GH);var NA,_A,SA,wA,CA;function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function EA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(a){QH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QH(e,t,r){return(t=VH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=YH(e,"string");return typeof t=="symbol"?t:t+""}function YH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},If.apply(null,arguments)}function oc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var zA=(e,t,r,a,l)=>{var o=r-a,u;return u=Mt(NA||(NA=oc(["M ",",",""])),e,t),u+=Mt(_A||(_A=oc(["L ",",",""])),e+r,t),u+=Mt(SA||(SA=oc(["L ",",",""])),e+r-o/2,t+l),u+=Mt(wA||(wA=oc(["L ",",",""])),e+r-o/2-a,t+l),u+=Mt(CA||(CA=oc(["L ",","," Z"])),e,t),u},KH={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XH=e=>{var t=zr(e,KH),{x:r,y:a,upperWidth:l,lowerWidth:o,height:u,className:d}=t,{animationEasing:m,animationDuration:h,animationBegin:p,isUpdateAnimationActive:v}=t,x=y.useRef(null),[b,_]=y.useState(-1),N=y.useRef(l),S=y.useRef(o),C=y.useRef(u),z=y.useRef(r),w=y.useRef(a),E=_m(e,"trapezoid-");if(y.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var oe=x.current.getTotalLength();oe&&_(oe)}catch{}},[]),r!==+r||a!==+a||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var O=mt("recharts-trapezoid",d);if(!v)return y.createElement("g",null,y.createElement("path",If({},Ar(t),{className:O,d:zA(r,a,l,o,u)})));var P=N.current,L=S.current,T=C.current,D=z.current,k=w.current,$="0px ".concat(b===-1?1:b,"px"),B="".concat(b,"px 0px"),le=gz(["strokeDasharray"],h,m);return y.createElement(Nm,{animationId:E,key:E,canBegin:b>0,duration:h,easing:m,isActive:v,begin:p},oe=>{var F=Tt(P,l,oe),q=Tt(L,o,oe),J=Tt(T,u,oe),Q=Tt(D,r,oe),ve=Tt(k,a,oe);x.current&&(N.current=F,S.current=q,C.current=J,z.current=Q,w.current=ve);var U=oe>0?{transition:le,strokeDasharray:B}:{strokeDasharray:$};return y.createElement("path",If({},Ar(t),{className:O,d:zA(Q,ve,F,q,J),ref:x,style:EA(EA({},U),t.style)}))})},WH=["option","shapeType","activeClassName"];function ZH(e,t){if(e==null)return{};var r,a,l=JH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function JH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function $f(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(a){eG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eG(e,t,r){return(t=tG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tG(e){var t=rG(e,"string");return typeof t=="symbol"?t:t+""}function rG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nG(e,t){return $f($f({},t),e)}function aG(e,t){return e==="symbols"}function DA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(jz,r);case"trapezoid":return y.createElement(XH,r);case"sector":return y.createElement(Sz,r);case"symbols":if(aG(t))return y.createElement(lE,r);break;case"curve":return y.createElement(vz,r);default:return null}}function iG(e){return y.isValidElement(e)?e.props:e}function aM(e){var{option:t,shapeType:r,activeClassName:a="recharts-active-shape"}=e,l=ZH(e,WH),o;if(y.isValidElement(t))o=y.cloneElement(t,$f($f({},l),iG(t)));else if(typeof t=="function")o=t(l,l.index);else if(FH(t)&&typeof t!="boolean"){var u=nG(t,l);o=y.createElement(DA,{shapeType:r,elementProps:u})}else{var d=l;o=y.createElement(DA,{shapeType:r,elementProps:d})}return l.isActive?y.createElement(wn,{className:a},o):o}var iM=(e,t,r)=>{var a=qt();return(l,o)=>u=>{e?.(l,o,u),a(hD({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}},sM=e=>{var t=qt();return(r,a)=>l=>{e?.(r,a,l),t(j7())}},lM=(e,t,r)=>{var a=qt();return(l,o)=>u=>{e?.(l,o,u),a(N7({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}};function oM(e){var{tooltipEntrySettings:t}=e,r=qt(),a=Nr(),l=y.useRef(null);return y.useLayoutEffect(()=>{a||(l.current===null?r(g7(t)):l.current!==t&&r(x7({prev:l.current,next:t})),l.current=t)},[t,r,a]),y.useLayoutEffect(()=>()=>{l.current&&(r(y7(l.current)),l.current=null)},[r]),null}function cM(e){var{legendPayload:t}=e,r=qt(),a=Nr(),l=y.useRef(null);return y.useLayoutEffect(()=>{a||(l.current===null?r(W6(t)):l.current!==t&&r(Z6({prev:l.current,next:t})),l.current=t)},[r,a,t]),y.useLayoutEffect(()=>()=>{l.current&&(r(J6(l.current)),l.current=null)},[r]),null}var Vg,sG=()=>{var[e]=y.useState(()=>Nc("uid-"));return e},lG=(Vg=yk.useId)!==null&&Vg!==void 0?Vg:sG;function oG(e,t){var r=lG();return t||(e?"".concat(e,"-").concat(r):r)}var cG=y.createContext(void 0),uM=e=>{var{id:t,type:r,children:a}=e,l=oG("recharts-".concat(r),t);return y.createElement(cG.Provider,{value:l},a(l))},uG={cartesianItems:[],polarItems:[]},dM=Ur({name:"graphicalItems",initialState:uG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:St()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:a}=t.payload,l=Rn(e).cartesianItems.indexOf(r);l>-1&&(e.cartesianItems[l]=a)},prepare:St()},removeCartesianGraphicalItem:{reducer(e,t){var r=Rn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:St()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:St()},removePolarGraphicalItem:{reducer(e,t){var r=Rn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:St()}}}),{addCartesianGraphicalItem:dG,replaceCartesianGraphicalItem:fG,removeCartesianGraphicalItem:mG,addPolarGraphicalItem:CW,removePolarGraphicalItem:AW}=dM.actions,hG=dM.reducer,pG=e=>{var t=qt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(dG(e)):r.current!==e&&t(fG({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(mG(r.current)),r.current=null)},[t]),null},fM=y.memo(pG),vG=["points"];function MA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MA(Object(r),!0).forEach(function(a){gG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gG(e,t,r){return(t=xG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xG(e){var t=yG(e,"string");return typeof t=="symbol"?t:t+""}function yG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bf(){return Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bf.apply(null,arguments)}function bG(e,t){if(e==null)return{};var r,a,l=jG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function jG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function NG(e){var{option:t,dotProps:r,className:a}=e;if(y.isValidElement(t))return y.cloneElement(t,r);if(typeof t=="function")return t(r);var l=mt(a,typeof t!="boolean"?t.className:""),o=r??{},{points:u}=o,d=bG(o,vG);return y.createElement(eM,Bf({},d,{className:l}))}function _G(e,t){return e==null?!1:t?!0:e.length===1}function SG(e){var{points:t,dot:r,className:a,dotClassName:l,dataKey:o,baseProps:u,needClip:d,clipPathId:m,zIndex:h=rr.scatter}=e;if(!_G(t,r))return null;var p=nM(r),v=U3(r),x=t.map((_,N)=>{var S,C,z=Yg(Yg(Yg({r:3},u),v),{},{index:N,cx:(S=_.x)!==null&&S!==void 0?S:void 0,cy:(C=_.y)!==null&&C!==void 0?C:void 0,dataKey:o,value:_.value,payload:_.payload,points:t});return y.createElement(NG,{key:"dot-".concat(N),option:r,dotProps:z,className:l})}),b={};return d&&m!=null&&(b.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(m,")")),y.createElement(zn,{zIndex:h},y.createElement(wn,Bf({className:a},b),x))}function TA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function PA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(r),!0).forEach(function(a){wG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wG(e,t,r){return(t=CG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=AG(e,"string");return typeof t=="symbol"?t:t+""}function AG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mM=0,EG={xAxis:{},yAxis:{},zAxis:{}},hM=Ur({name:"cartesianAxis",initialState:EG,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:St()},replaceXAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.xAxis[r.id],e.xAxis[a.id]=a)},prepare:St()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:St()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:St()},replaceYAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.yAxis[r.id],e.yAxis[a.id]=a)},prepare:St()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:St()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:St()},replaceZAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.zAxis[r.id],e.zAxis[a.id]=a)},prepare:St()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:St()},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload,l=e.yAxis[r];if(l){var o,u=l.widthHistory||[];if(u.length===3&&u[0]===u[2]&&a===u[1]&&a!==l.width&&Math.abs(a-((o=u[0])!==null&&o!==void 0?o:0))<=1)return;var d=[...u,a].slice(-3);e.yAxis[r]=PA(PA({},l),{},{width:a,widthHistory:d})}}}}),{addXAxis:zG,replaceXAxis:OG,removeXAxis:DG,addYAxis:MG,replaceYAxis:TG,removeYAxis:PG,addZAxis:EW,replaceZAxis:zW,removeZAxis:OW,updateYAxisWidth:kG}=hM.actions,qG=hM.reducer,RG=re([ar],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),LG=re([RG,Ga,Fa],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Rb=()=>ze(LG),IG=()=>ze(d9);function kA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Kg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(r),!0).forEach(function(a){$G(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $G(e,t,r){return(t=BG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BG(e){var t=UG(e,"string");return typeof t=="symbol"?t:t+""}function UG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HG=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||t.x==null||t.y==null)return null;var d={index:r,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=Kg(Kg(Kg({},d),Ic(l)),by(l)),h;return y.isValidElement(l)?h=y.cloneElement(l,m):typeof l=="function"?h=l(m):h=y.createElement(eM,m),y.createElement(wn,{className:"recharts-active-dot",clipPath:u},h)};function GG(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:l,clipPath:o,zIndex:u=rr.activeDot}=e,d=ze(Es),m=IG();if(t==null||m==null)return null;var h=t.find(p=>m.includes(p.payload));return At(h)?null:y.createElement(zn,{zIndex:u},y.createElement(HG,{point:h,childIndex:Number(d),mainColor:r,dataKey:l,activeDot:a,clipPath:o}))}var qA=(e,t,r)=>{var a=r??e;if(!At(a))return In(a,t,0)},FG=(e,t,r)=>{var a={},l=e.filter(km),o=e.filter(h=>h.stackId==null),u=l.reduce((h,p)=>{var v=h[p.stackId];return v==null&&(v=[]),v.push(p),h[p.stackId]=v,h},a),d=Object.entries(u).map(h=>{var p,[v,x]=h,b=x.map(N=>N.dataKey),_=qA(t,r,(p=x[0])===null||p===void 0?void 0:p.barSize);return{stackId:v,dataKeys:b,barSize:_}}),m=o.map(h=>{var p=[h.dataKey].filter(x=>x!=null),v=qA(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:v}});return[...d,...m]};function RA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Pd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RA(Object(r),!0).forEach(function(a){QG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QG(e,t,r){return(t=VG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KG(e,t,r,a,l){var o,u=a.length;if(!(u<1)){var d=In(e,r,0,!0),m,h=[];if(Xe((o=a[0])===null||o===void 0?void 0:o.barSize)){var p=!1,v=r/u,x=a.reduce((z,w)=>z+(w.barSize||0),0);x+=(u-1)*d,x>=r&&(x-=(u-1)*d,d=0),x>=r&&v>0&&(p=!0,v*=.9,x=u*v);var b=(r-x)/2>>0,_={offset:b-d,size:0};m=a.reduce((z,w)=>{var E,O={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:_.offset+_.size+d,size:p?v:(E=w.barSize)!==null&&E!==void 0?E:0}},P=[...z,O];return _=O.position,P},h)}else{var N=In(t,r,0,!0);r-2*N-(u-1)*d<=0&&(d=0);var S=(r-2*N-(u-1)*d)/u;S>1&&(S>>=0);var C=Xe(l)?Math.min(S,l):S;m=a.reduce((z,w,E)=>[...z,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:N+(S+d)*E+(S-C)/2,size:C}}],h)}return m}}var XG=(e,t,r,a,l,o,u)=>{var d=At(u)?t:u,m=KG(r,a,l!==o?l:o,e,d);return l!==o&&m!=null&&(m=m.map(h=>Pd(Pd({},h),{},{position:Pd(Pd({},h.position),{},{offset:h.position.offset-l/2})}))),m},WG=(e,t)=>{var r=hb(t);if(!(!e||r==null||t==null)){var{stackId:a}=t;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(u=>u.key===r)}}}},ZG=(e,t)=>{if(!(e==null||t==null)){var r=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function JG(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Xe(e.zIndex)?e.zIndex:t}var eF=e=>{var{chartData:t}=e,r=qt(),a=Nr();return y.useEffect(()=>a?()=>{}:(r(QC(t)),()=>{r(QC(void 0))}),[t,r,a]),null},LA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},pM=Ur({name:"brush",initialState:LA,reducers:{setBrushSettings(e,t){return t.payload==null?LA:t.payload}}}),{setBrushSettings:DW}=pM.actions,tF=pM.reducer;function rF(e){return(e%180+180)%180}var nF=function(t){var{width:r,height:a}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=rF(l),u=o*Math.PI/180,d=Math.atan(a/r),m=u>d&&u<Math.PI-d?a/Math.sin(u):r/Math.cos(u);return Math.abs(m)},aF={dots:[],areas:[],lines:[]},vM=Ur({name:"referenceElements",initialState:aF,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Rn(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Rn(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Rn(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:MW,removeDot:TW,addArea:PW,removeArea:kW,addLine:qW,removeLine:RW}=vM.actions,iF=vM.reducer,sF=y.createContext(void 0),lF=e=>{var{children:t}=e,[r]=y.useState("".concat(Nc("recharts"),"-clip")),a=Rb();if(a==null)return null;var{x:l,y:o,width:u,height:d}=a;return y.createElement(sF.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:l,y:o,height:d,width:u}))),t)};function gM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],a=0;a<e.length;a+=t){var l=e[a];l!==void 0&&r.push(l)}return r}function oF(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return nF(a,r)}function cF(e,t,r){var a=r==="width",{x:l,y:o,width:u,height:d}=e;return t===1?{start:a?l:o,end:a?l+u:o+d}:{start:a?l+u:o+d,end:a?l:o}}function qc(e,t,r,a,l){if(e*t<e*a||e*t>e*l)return!1;var o=r();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-l)<=0}function uF(e,t){return gM(e,t+1)}function dF(e,t,r,a,l){for(var o=(a||[]).slice(),{start:u,end:d}=t,m=0,h=1,p=u,v=function(){var _=a?.[m];if(_===void 0)return{v:gM(a,h)};var N=m,S,C=()=>(S===void 0&&(S=r(_,N)),S),z=_.coordinate,w=m===0||qc(e,z,C,p,d);w||(m=0,p=u,h+=1),w&&(p=z+e*(C()/2+l),m+=h)},x;h<=o.length;)if(x=v(),x)return x.v;return[]}function fF(e,t,r,a,l){var o=(a||[]).slice(),u=o.length;if(u===0)return[];for(var{start:d,end:m}=t,h=1;h<=u;h++){for(var p=(u-1)%h,v=d,x=!0,b=function(){var E=a[N];if(E==null)return 0;var O=N,P,L=()=>(P===void 0&&(P=r(E,O)),P),T=E.coordinate,D=N===p||qc(e,T,L,v,m);if(!D)return x=!1,1;D&&(v=T+e*(L()/2+l))},_,N=p;N<u&&(_=b(),!(_!==0&&_===1));N+=h);if(x){for(var S=[],C=p;C<u;C+=h){var z=a[C];z!=null&&S.push(z)}return S}}return[]}function IA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(r),!0).forEach(function(a){mF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mF(e,t,r){return(t=hF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hF(e){var t=pF(e,"string");return typeof t=="symbol"?t:t+""}function pF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vF(e,t,r,a,l){for(var o=(a||[]).slice(),u=o.length,{start:d}=t,{end:m}=t,h=function(x){var b=o[x];if(b==null)return 1;var _=b,N,S=()=>(N===void 0&&(N=r(b,x)),N);if(x===u-1){var C=e*(_.coordinate+e*S()/2-m);o[x]=_=br(br({},_),{},{tickCoord:C>0?_.coordinate-C*e:_.coordinate})}else o[x]=_=br(br({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var z=qc(e,_.tickCoord,S,d,m);z&&(m=_.tickCoord-e*(S()/2+l),o[x]=br(br({},_),{},{isShow:!0}))}},p=u-1;p>=0;p--)h(p);return o}function gF(e,t,r,a,l,o){var u=(a||[]).slice(),d=u.length,{start:m,end:h}=t;if(o){var p=a[d-1];if(p!=null){var v=r(p,d-1),x=e*(p.coordinate+e*v/2-h);if(u[d-1]=p=br(br({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate}),p.tickCoord!=null){var b=qc(e,p.tickCoord,()=>v,m,h);b&&(h=p.tickCoord-e*(v/2+l),u[d-1]=br(br({},p),{},{isShow:!0}))}}}for(var _=o?d-1:d,N=function(z){var w=u[z];if(w==null)return 1;var E=w,O,P=()=>(O===void 0&&(O=r(w,z)),O);if(z===0){var L=e*(E.coordinate-e*P()/2-m);u[z]=E=br(br({},E),{},{tickCoord:L<0?E.coordinate-L*e:E.coordinate})}else u[z]=E=br(br({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var T=qc(e,E.tickCoord,P,m,h);T&&(m=E.tickCoord+e*(P()/2+l),u[z]=br(br({},E),{},{isShow:!0}))}},S=0;S<_;S++)N(S);return u}function Lb(e,t,r){var{tick:a,ticks:l,viewBox:o,minTickGap:u,orientation:d,interval:m,tickFormatter:h,unit:p,angle:v}=e;if(!l||!l.length||!a)return[];if(Se(m)||jm.isSsr){var x;return(x=uF(l,Se(m)?m:0))!==null&&x!==void 0?x:[]}var b=[],_=d==="top"||d==="bottom"?"width":"height",N=p&&_==="width"?xc(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(O,P)=>{var L=typeof h=="function"?h(O.value,P):O.value;return _==="width"?oF(xc(L,{fontSize:t,letterSpacing:r}),N,v):xc(L,{fontSize:t,letterSpacing:r})[_]},C=l[0],z=l[1],w=l.length>=2&&C!=null&&z!=null?Lr(z.coordinate-C.coordinate):1,E=cF(o,w,_);return m==="equidistantPreserveStart"?dF(w,E,S,l,u):m==="equidistantPreserveEnd"?fF(w,E,S,l,u):(m==="preserveStart"||m==="preserveStartEnd"?b=gF(w,E,S,l,u,m==="preserveStartEnd"):b=vF(w,E,S,l,u),b.filter(O=>O.isShow))}var xF=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(t){Array.from(t).forEach(p=>{if(p){var v=p.getBoundingClientRect();v.width>u&&(u=v.width)}});var d=r?r.getBoundingClientRect().width:0,m=l+o,h=u+m+d+(r?a:0);return Math.round(h)}return 0},yF=["axisLine","width","height","className","hide","ticks","axisType"];function bF(e,t){if(e==null)return{};var r,a,l=jF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function jF(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zs.apply(null,arguments)}function $A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(r),!0).forEach(function(a){NF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function NF(e,t,r){return(t=_F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _F(e){var t=SF(e,"string");return typeof t=="symbol"?t:t+""}function SF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ta={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:rr.axis};function wF(e){var{x:t,y:r,width:a,height:l,orientation:o,mirror:u,axisLine:d,otherSvgProps:m}=e;if(!d)return null;var h=Ot(Ot(Ot({},m),Ln(d)),{},{fill:"none"});if(o==="top"||o==="bottom"){var p=+(o==="top"&&!u||o==="bottom"&&u);h=Ot(Ot({},h),{},{x1:t,y1:r+p*l,x2:t+a,y2:r+p*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);h=Ot(Ot({},h),{},{x1:t+v*a,y1:r,x2:t+v*a,y2:r+l})}return y.createElement("line",zs({},h,{className:mt("recharts-cartesian-axis-line",Ul(d,"className"))}))}function CF(e,t,r,a,l,o,u,d,m){var h,p,v,x,b,_,N=d?-1:1,S=e.tickSize||u,C=Se(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=p=e.coordinate,x=r+ +!d*l,v=x-N*S,_=v-N*m,b=C;break;case"left":v=x=e.coordinate,p=t+ +!d*a,h=p-N*S,b=h-N*m,_=C;break;case"right":v=x=e.coordinate,p=t+ +d*a,h=p+N*S,b=h+N*m,_=C;break;default:h=p=e.coordinate,x=r+ +d*l,v=x+N*S,_=v+N*m,b=C;break}return{line:{x1:h,y1:v,x2:p,y2:x},tick:{x:b,y:_}}}function AF(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function EF(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function zF(e){var{option:t,tickProps:r,value:a}=e,l,o=mt(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))l=y.cloneElement(t,Ot(Ot({},r),{},{className:o}));else if(typeof t=="function")l=t(Ot(Ot({},r),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=mt(u,RH(t))),l=y.createElement(kb,zs({},r,{className:u}),a)}return l}var OF=y.forwardRef((e,t)=>{var{ticks:r=[],tick:a,tickLine:l,stroke:o,tickFormatter:u,unit:d,padding:m,tickTextProps:h,orientation:p,mirror:v,x,y:b,width:_,height:N,tickSize:S,tickMargin:C,fontSize:z,letterSpacing:w,getTicksConfig:E,events:O,axisType:P}=e,L=Lb(Ot(Ot({},E),{},{ticks:r}),z,w),T=AF(p,v),D=EF(p,v),k=Ln(E),$=Ic(a),B={};typeof l=="object"&&(B=l);var le=Ot(Ot({},k),{},{fill:"none"},B),oe=L.map(J=>Ot({entry:J},CF(J,x,b,_,N,p,S,v,C))),F=oe.map(J=>{var{entry:Q,line:ve}=J;return y.createElement(wn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},l&&y.createElement("line",zs({},le,ve,{className:mt("recharts-cartesian-axis-tick-line",Ul(l,"className"))})))}),q=oe.map((J,Q)=>{var ve,U,{entry:ge,tick:ee}=J,me=Ot(Ot(Ot(Ot({verticalAnchor:D},k),{},{textAnchor:T,stroke:"none",fill:o},ee),{},{index:Q,payload:ge,visibleTicksCount:L.length,tickFormatter:u,padding:m},h),{},{angle:(ve=(U=h?.angle)!==null&&U!==void 0?U:k.angle)!==null&&ve!==void 0?ve:0}),xe=Ot(Ot({},me),$);return y.createElement(wn,zs({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},jy(O,ge,Q)),a&&y.createElement(zF,{option:a,tickProps:xe,value:"".concat(typeof u=="function"?u(ge.value,Q):ge.value).concat(d||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},q.length>0&&y.createElement(zn,{zIndex:rr.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},q)),F.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},F))}),DF=y.forwardRef((e,t)=>{var{axisLine:r,width:a,height:l,className:o,hide:u,ticks:d,axisType:m}=e,h=bF(e,yF),[p,v]=y.useState(""),[x,b]=y.useState(""),_=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return xF({ticks:_.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=y.useCallback(S=>{if(S){var C=S.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=C;var z=C[0];if(z){var w=window.getComputedStyle(z),E=w.fontSize,O=w.letterSpacing;(E!==p||O!==x)&&(v(E),b(O))}}},[p,x]);return u||a!=null&&a<=0||l!=null&&l<=0?null:y.createElement(zn,{zIndex:e.zIndex},y.createElement(wn,{className:mt("recharts-cartesian-axis",o)},y.createElement(wF,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Ln(e)}),y.createElement(OF,{ref:N,axisType:m,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(fH,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(NH,{label:e.label,labelRef:e.labelRef}),e.children)))}),Ib=y.forwardRef((e,t)=>{var r=zr(e,Ta);return y.createElement(DF,zs({},r,{ref:t}))});Ib.displayName="CartesianAxis";var MF=["x1","y1","x2","y2","key"],TF=["offset"],PF=["xAxisId","yAxisId"],kF=["xAxisId","yAxisId"];function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(a){qF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qF(e,t,r){return(t=RF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RF(e){var t=LF(e,"string");return typeof t=="symbol"?t:t+""}function LF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gs.apply(null,arguments)}function Uf(e,t){if(e==null)return{};var r,a,l=IF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function IF(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var $F=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:l,width:o,height:u,ry:d}=e;return y.createElement("rect",{x:a,y:l,ry:d,width:o,height:u,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function xM(e){var{option:t,lineItemProps:r}=e,a;if(y.isValidElement(t))a=y.cloneElement(t,r);else if(typeof t=="function")a=t(r);else{var l,{x1:o,y1:u,x2:d,y2:m,key:h}=r,p=Uf(r,MF),v=(l=Ln(p))!==null&&l!==void 0?l:{},{offset:x}=v,b=Uf(v,TF);a=y.createElement("line",gs({},b,{x1:o,y1:u,x2:d,y2:m,fill:"none",key:h}))}return a}function BF(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=Uf(e,PF),m=l.map((h,p)=>{var v=jr(jr({},d),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return y.createElement(xM,{key:"line-".concat(p),option:a,lineItemProps:v})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function UF(e){var{y:t,height:r,vertical:a=!0,verticalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=Uf(e,kF),m=l.map((h,p)=>{var v=jr(jr({},d),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return y.createElement(xM,{option:a,lineItemProps:v,key:"line-".concat(p)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function HF(e){var{horizontalFill:t,fillOpacity:r,x:a,y:l,width:o,height:u,horizontalPoints:d,horizontal:m=!0}=e;if(!m||!t||!t.length||d==null)return null;var h=d.map(v=>Math.round(v+l-l)).sort((v,x)=>v-x);l!==h[0]&&h.unshift(0);var p=h.map((v,x)=>{var b=h[x+1],_=b==null,N=_?l+u-v:b-v;if(N<=0)return null;var S=x%t.length;return y.createElement("rect",{key:"react-".concat(x),y:v,x:a,height:N,width:o,stroke:"none",fill:t[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function GF(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:l,y:o,width:u,height:d,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(v=>Math.round(v+l-l)).sort((v,x)=>v-x);l!==h[0]&&h.unshift(0);var p=h.map((v,x)=>{var b=h[x+1],_=b==null,N=_?l+u-v:b-v;if(N<=0)return null;var S=x%r.length;return y.createElement("rect",{key:"react-".concat(x),x:v,y:o,width:N,height:d,stroke:"none",fill:r[S],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var FF=(e,t)=>{var{xAxis:r,width:a,height:l,offset:o}=e;return WE(Lb(jr(jr(jr({},Ta),r),{},{ticks:ZE(r),viewBox:{x:0,y:0,width:a,height:l}})),o.left,o.left+o.width,t)},QF=(e,t)=>{var{yAxis:r,width:a,height:l,offset:o}=e;return WE(Lb(jr(jr(jr({},Ta),r),{},{ticks:ZE(r),viewBox:{x:0,y:0,width:a,height:l}})),o.top,o.top+o.height,t)},VF={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:rr.grid};function Wx(e){var t=az(),r=iz(),a=nz(),l=jr(jr({},zr(e,VF)),{},{x:Se(e.x)?e.x:a.left,y:Se(e.y)?e.y:a.top,width:Se(e.width)?e.width:a.width,height:Se(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:u,x:d,y:m,width:h,height:p,syncWithTicks:v,horizontalValues:x,verticalValues:b}=l,_=Nr(),N=ze(D=>PC(D,"xAxis",o,_)),S=ze(D=>PC(D,"yAxis",u,_));if(!aa(h)||!aa(p)||!Se(d)||!Se(m))return null;var C=l.verticalCoordinatesGenerator||FF,z=l.horizontalCoordinatesGenerator||QF,{horizontalPoints:w,verticalPoints:E}=l;if((!w||!w.length)&&typeof z=="function"){var O=x&&x.length,P=z({yAxis:S?jr(jr({},S),{},{ticks:O?x:S.ticks}):void 0,width:t??h,height:r??p,offset:a},O?!0:v);hf(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(w=P)}if((!E||!E.length)&&typeof C=="function"){var L=b&&b.length,T=C({xAxis:N?jr(jr({},N),{},{ticks:L?b:N.ticks}):void 0,width:t??h,height:r??p,offset:a},L?!0:v);hf(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(E=T)}return y.createElement(zn,{zIndex:l.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement($F,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),y.createElement(HF,gs({},l,{horizontalPoints:w})),y.createElement(GF,gs({},l,{verticalPoints:E})),y.createElement(BF,gs({},l,{offset:a,horizontalPoints:w,xAxis:N,yAxis:S})),y.createElement(UF,gs({},l,{offset:a,verticalPoints:E,xAxis:N,yAxis:S}))))}Wx.displayName="CartesianGrid";var YF={},yM=Ur({name:"errorBars",initialState:YF,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:a,next:l}=t.payload;e[r]&&(e[r]=e[r].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:LW,replaceErrorBar:IW,removeErrorBar:$W}=yM.actions,KF=yM.reducer,XF=["children"];function WF(e,t){if(e==null)return{};var r,a,l=ZF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function ZF(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var JF={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},eQ=y.createContext(JF);function bM(e){var{children:t}=e,r=WF(e,XF);return y.createElement(eQ.Provider,{value:r},t)}function $b(e,t){var r,a,l=ze(h=>Ya(h,e)),o=ze(h=>Ka(h,t)),u=(r=l?.allowDataOverflow)!==null&&r!==void 0?r:Jt.allowDataOverflow,d=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:er.allowDataOverflow,m=u||d;return{needClip:m,needClipX:u,needClipY:d}}function jM(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,l=Rb(),{needClipX:o,needClipY:u,needClip:d}=$b(t,r);if(!d||!l)return null;var{x:m,y:h,width:p,height:v}=l;return y.createElement("clipPath",{id:"clipPath-".concat(a)},y.createElement("rect",{x:o?m:m-p/2,y:u?h:h-v/2,width:o?p:p*2,height:u?v:v*2}))}var NM=(e,t,r,a)=>Ii(e,"xAxis",t,a),_M=(e,t,r,a)=>Li(e,"xAxis",t,a),SM=(e,t,r,a)=>Ii(e,"yAxis",r,a),wM=(e,t,r,a)=>Li(e,"yAxis",r,a),tQ=re([lt,NM,SM,_M,wM],(e,t,r,a,l)=>Ha(e,"xAxis")?Gl(t,a,!1):Gl(r,l,!1)),rQ=(e,t,r,a,l)=>l;function nQ(e){return e.type==="line"}var aQ=re([Lm,rQ],(e,t)=>e.filter(nQ).find(r=>r.id===t)),iQ=re([lt,NM,SM,_M,wM,aQ,tQ,ib],(e,t,r,a,l,o,u,d)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=d;if(!(o==null||t==null||r==null||a==null||l==null||a.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:x}=o,b;if(x!=null&&x.length>0?b=x:b=m?.slice(h,p+1),b!=null)return QQ({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:b})}});function sQ(e){var t=Ic(e),r=3,a=2;if(t!=null){var{r:l,strokeWidth:o}=t,u=Number(l),d=Number(o);return(Number.isNaN(u)||u<0)&&(u=r),(Number.isNaN(d)||d<0)&&(d=a),{r:u,strokeWidth:d}}return{r,strokeWidth:a}}var Xg={exports:{}},Wg={};var UA;function lQ(){if(UA)return Wg;UA=1;var e=Yf();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Wg.useSyncExternalStoreWithSelector=function(m,h,p,v,x){var b=l(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=u(function(){function S(O){if(!C){if(C=!0,z=O,O=v(O),x!==void 0&&_.hasValue){var P=_.value;if(x(P,O))return w=P}return w=O}if(P=w,r(z,O))return P;var L=v(O);return x!==void 0&&x(P,L)?(z=O,P):(z=O,w=L)}var C=!1,z,w,E=p===void 0?null:p;return[function(){return S(h())},E===null?void 0:function(){return S(E())}]},[h,p,v,x]);var N=a(m,b[0],b[1]);return o(function(){_.hasValue=!0,_.value=N},[N]),d(N),N},Wg}var HA;function oQ(){return HA||(HA=1,Xg.exports=lQ()),Xg.exports}oQ();function cQ(e){e()}function uQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){cQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const l=t={callback:r,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var GA={notify(){},get:()=>[]};function dQ(e,t){let r,a=GA,l=0,o=!1;function u(N){p();const S=a.subscribe(N);let C=!1;return()=>{C||(C=!0,S(),v())}}function d(){a.notify()}function m(){_.onStateChange&&_.onStateChange()}function h(){return o}function p(){l++,r||(r=e.subscribe(m),a=uQ())}function v(){l--,r&&l===0&&(r(),r=void 0,a.clear(),a=GA)}function x(){o||(o=!0,p())}function b(){o&&(o=!1,v())}const _={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:h,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>a};return _}var fQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mQ=fQ(),hQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",pQ=hQ(),vQ=()=>mQ||pQ?y.useLayoutEffect:y.useEffect,gQ=vQ();function FA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xQ(e,t){if(FA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!FA(e[r[l]],t[r[l]]))return!1;return!0}var yQ=Symbol.for("react-redux-context"),bQ=typeof globalThis<"u"?globalThis:{};function jQ(){if(!y.createContext)return{};const e=bQ[yQ]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var NQ=jQ();function _Q(e){const{children:t,context:r,serverState:a,store:l}=e,o=y.useMemo(()=>{const m=dQ(l);return{store:l,subscription:m,getServerState:a?()=>a:void 0}},[l,a]),u=y.useMemo(()=>l.getState(),[l]);gQ(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==l.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,u]);const d=r||NQ;return y.createElement(d.Provider,{value:o},t)}var SQ=_Q,wQ=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function CQ(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Hm(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of r)if(wQ.has(a)){if(e[a]==null&&t[a]==null)continue;if(!xQ(e[a],t[a]))return!1}else if(!CQ(e[a],t[a]))return!1;return!0}var AQ=["id"],EQ=["type","layout","connectNulls","needClip","shape"],zQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Rc(){return Rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Rc.apply(null,arguments)}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(a){OQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OQ(e,t,r){return(t=DQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DQ(e){var t=MQ(e,"string");return typeof t=="symbol"?t:t+""}function MQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bb(e,t){if(e==null)return{};var r,a,l=TQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function TQ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var PQ=e=>{var{dataKey:t,name:r,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:fm(r,t),payload:e}]},kQ=y.memo(e=>{var{dataKey:t,data:r,stroke:a,strokeWidth:l,fill:o,name:u,hide:d,unit:m,tooltipType:h,id:p}=e,v={dataDefinedOnItem:r,getPosition:Ms,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:fm(u,t),hide:d,type:h,color:a,unit:m,graphicalItemId:p}};return y.createElement(oM,{tooltipEntrySettings:v})}),CM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function qQ(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],l=0;l<t;++l)a=[...a,...r];return a}var RQ=(e,t,r)=>{var a=r.reduce((b,_)=>b+_);if(!a)return CM(t,e);for(var l=Math.floor(e/a),o=e%a,u=t-e,d=[],m=0,h=0;m<r.length;h+=(p=r[m])!==null&&p!==void 0?p:0,++m){var p,v=r[m];if(v!=null&&h+v>o){d=[...r.slice(0,m),o-h];break}}var x=d.length%2===0?[0,u]:[u];return[...qQ(r,l),...d,...x].map(b=>"".concat(b,"px")).join(", ")};function LQ(e){var{clipPathId:t,points:r,props:a}=e,{dot:l,dataKey:o,needClip:u}=a,{id:d}=a,m=Bb(a,AQ),h=Ln(m);return y.createElement(SG,{points:r,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:h,needClip:u,clipPathId:t})}function IQ(e){var{showLabels:t,children:r,points:a}=e,l=y.useMemo(()=>a?.map(o=>{var u,d,m={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Zn(Zn({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return y.createElement(WD,{value:t?l:void 0},r)}function VA(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:l,props:o}=e,{type:u,layout:d,connectNulls:m,needClip:h,shape:p}=o,v=Bb(o,EQ),x=Zn(Zn({},Ar(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:a,type:u,layout:d,connectNulls:m,strokeDasharray:l??o.strokeDasharray});return y.createElement(y.Fragment,null,a?.length>1&&y.createElement(aM,Rc({shapeType:"curve",option:p},x,{pathRef:r})),y.createElement(LQ,{points:a,clipPathId:t,props:o}))}function $Q(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function BQ(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:d,isAnimationActive:m,animationBegin:h,animationDuration:p,animationEasing:v,animateNewValues:x,width:b,height:_,onAnimationEnd:N,onAnimationStart:S}=r,C=l.current,z=_m(u,"recharts-line-"),w=y.useRef(z),[E,O]=y.useState(!1),P=!E,L=y.useCallback(()=>{typeof N=="function"&&N(),O(!1)},[N]),T=y.useCallback(()=>{typeof S=="function"&&S(),O(!0)},[S]),D=$Q(a.current),k=y.useRef(0);w.current!==z&&(k.current=o.current,w.current=z);var $=k.current;return y.createElement(IQ,{points:u,showLabels:P},r.children,y.createElement(Nm,{animationId:z,begin:h,duration:p,isActive:m,easing:v,onAnimationEnd:L,onAnimationStart:T,key:z},B=>{var le=Tt($,D+$,B),oe=Math.min(le,D),F;if(m)if(d){var q="".concat(d).split(/[,\s]+/gim).map(ve=>parseFloat(ve));F=RQ(oe,D,q)}else F=CM(D,oe);else F=d==null?void 0:String(d);if(B>0&&D>0&&(l.current=u,o.current=Math.max(o.current,oe)),C){var J=C.length/u.length,Q=B===1?u:u.map((ve,U)=>{var ge=Math.floor(U*J);if(C[ge]){var ee=C[ge];return Zn(Zn({},ve),{},{x:Tt(ee.x,ve.x,B),y:Tt(ee.y,ve.y,B)})}return x?Zn(Zn({},ve),{},{x:Tt(b*2,ve.x,B),y:Tt(_/2,ve.y,B)}):Zn(Zn({},ve),{},{x:ve.x,y:ve.y})});return l.current=Q,y.createElement(VA,{props:r,points:Q,clipPathId:t,pathRef:a,strokeDasharray:F})}return y.createElement(VA,{props:r,points:u,clipPathId:t,pathRef:a,strokeDasharray:F})}),y.createElement(JD,{label:r.label}))}function UQ(e){var{clipPathId:t,props:r}=e,a=y.useRef(null),l=y.useRef(0),o=y.useRef(null);return y.createElement(BQ,{props:r,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var HQ=(e,t)=>{var r,a;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Ut(e.payload,t)}};class GQ extends y.Component{render(){var{hide:t,dot:r,points:a,className:l,xAxisId:o,yAxisId:u,top:d,left:m,width:h,height:p,id:v,needClip:x,zIndex:b}=this.props;if(t)return null;var _=mt("recharts-line",l),N=v,{r:S,strokeWidth:C}=sQ(r),z=nM(r),w=S*2+C,E=x?"url(#clipPath-".concat(z?"":"dots-").concat(N,")"):void 0;return y.createElement(zn,{zIndex:b},y.createElement(wn,{className:_},x&&y.createElement("defs",null,y.createElement(jM,{clipPathId:N,xAxisId:o,yAxisId:u}),!z&&y.createElement("clipPath",{id:"clipPath-dots-".concat(N)},y.createElement("rect",{x:m-w/2,y:d-w/2,width:h+w,height:p+w}))),y.createElement(bM,{xAxisId:o,yAxisId:u,data:a,dataPointFormatter:HQ,errorBarOffset:0},y.createElement(UQ,{props:this.props,clipPathId:N}))),y.createElement(GG,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:E}))}}var AM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:rr.line,type:"linear"};function FQ(e){var t=zr(e,AM),{activeDot:r,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:m,hide:h,isAnimationActive:p,label:v,legendType:x,xAxisId:b,yAxisId:_,id:N}=t,S=Bb(t,zQ),{needClip:C}=$b(b,_),z=Rb(),w=Ts(),E=Nr(),O=ze(k=>iQ(k,b,_,E,N));if(w!=="horizontal"&&w!=="vertical"||O==null||z==null)return null;var{height:P,width:L,x:T,y:D}=z;return y.createElement(GQ,Rc({},S,{id:N,connectNulls:d,dot:m,activeDot:r,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:p,hide:h,label:v,legendType:x,xAxisId:b,yAxisId:_,points:O,layout:w,height:P,width:L,left:T,top:D,needClip:C}))}function QQ(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:d,displayedData:m}=e;return m.map((h,p)=>{var v=Ut(h,u);if(t==="horizontal"){var x=MS({axis:r,ticks:l,bandSize:d,entry:h,index:p}),b=At(v)?null:a.scale.map(v);return{x,y:b??null,value:v,payload:h}}var _=At(v)?null:r.scale.map(v),N=MS({axis:a,ticks:o,bandSize:d,entry:h,index:p});return _==null||N==null?null:{x:_,y:N,value:v,payload:h}}).filter(Boolean)}function VQ(e){var t=zr(e,AM),r=Nr();return y.createElement(uM,{id:t.id,type:"line"},a=>y.createElement(y.Fragment,null,y.createElement(cM,{legendPayload:PQ(t)}),y.createElement(kQ,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),y.createElement(fM,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),y.createElement(FQ,Rc({},t,{id:a}))))}var EM=y.memo(VQ,Hm);EM.displayName="Line";function qs(e,t){var r,a;return(r=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&r!==void 0?r:mM}function Rs(e,t){var r,a;return(r=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&r!==void 0?r:mM}var YQ="Invariant failed";function KQ(e,t){throw new Error(YQ)}function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zx.apply(null,arguments)}function Hf(e){return y.createElement(aM,Zx({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var XQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(Se(t))return t;var o=Se(a)||At(a);return o?t(a,l):(o||KQ(),r)}},WQ=(e,t,r)=>r,ZQ=(e,t)=>t,ru=re([Lm,ZQ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),JQ=re([ru],e=>e?.maxBarSize),eV=(e,t,r,a)=>a,tV=re([lt,Lm,qs,Rs,WQ],(e,t,r,a,l)=>t.filter(o=>e==="horizontal"?o.xAxisId===r:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),rV=(e,t,r)=>{var a=lt(e),l=qs(e,t),o=Rs(e,t);if(!(l==null||o==null))return a==="horizontal"?Gx(e,"yAxis",o,r):Gx(e,"xAxis",l,r)},nV=(e,t)=>{var r=lt(e),a=qs(e,t),l=Rs(e,t);if(!(a==null||l==null))return r==="horizontal"?TC(e,"xAxis",a):TC(e,"yAxis",l)},aV=re([tV,sB,nV],FG),iV=(e,t,r)=>{var a,l,o=ru(e,t);if(o==null)return 0;var u=qs(e,t),d=Rs(e,t);if(u==null||d==null)return 0;var m=lt(e),h=gO(e),{maxBarSize:p}=o,v=At(p)?h:p,x,b;return m==="horizontal"?(x=Ii(e,"xAxis",u,r),b=Li(e,"xAxis",u,r)):(x=Ii(e,"yAxis",d,r),b=Li(e,"yAxis",d,r)),(a=(l=Gl(x,b,!0))!==null&&l!==void 0?l:v)!==null&&a!==void 0?a:0},zM=(e,t,r)=>{var a=lt(e),l=qs(e,t),o=Rs(e,t);if(!(l==null||o==null)){var u,d;return a==="horizontal"?(u=Ii(e,"xAxis",l,r),d=Li(e,"xAxis",l,r)):(u=Ii(e,"yAxis",o,r),d=Li(e,"yAxis",o,r)),Gl(u,d)}},sV=re([aV,gO,iB,xO,iV,zM,JQ],XG),lV=(e,t,r)=>{var a=qs(e,t);if(a!=null)return Ii(e,"xAxis",a,r)},oV=(e,t,r)=>{var a=Rs(e,t);if(a!=null)return Ii(e,"yAxis",a,r)},cV=(e,t,r)=>{var a=qs(e,t);if(a!=null)return Li(e,"xAxis",a,r)},uV=(e,t,r)=>{var a=Rs(e,t);if(a!=null)return Li(e,"yAxis",a,r)},dV=re([sV,ru],ZG),fV=re([rV,ru],WG),mV=re([ar,Dy,lV,oV,cV,uV,dV,lt,W$,zM,fV,ru,eV],(e,t,r,a,l,o,u,d,m,h,p,v,x)=>{var{chartData:b,dataStartIndex:_,dataEndIndex:N}=m;if(!(v==null||u==null||t==null||d!=="horizontal"&&d!=="vertical"||r==null||a==null||l==null||o==null||h==null)){var{data:S}=v,C;if(S!=null&&S.length>0?C=S:C=b?.slice(_,N+1),C!=null)return BV({layout:d,barSettings:v,pos:u,parentViewBox:t,bandSize:h,xAxis:r,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:p,displayedData:C,offset:e,cells:x,dataStartIndex:_})}}),hV=["index"];function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jx.apply(null,arguments)}function pV(e,t){if(e==null)return{};var r,a,l=vV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function vV(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var OM=y.createContext(void 0),gV=e=>{var t=y.useContext(OM);if(t!=null)return t.stackId;if(e!=null)return e6(e)},xV=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),yV=e=>{var t=y.useContext(OM);if(t!=null){var{stackId:r}=t;return"url(#".concat(xV(r,e),")")}},DM=e=>{var{index:t}=e,r=pV(e,hV),a=yV(t);return y.createElement(wn,Jx({className:"recharts-bar-stack-layer",clipPath:a},r))},bV=["onMouseEnter","onMouseLeave","onClick"],jV=["value","background","tooltipPosition"],NV=["id"],_V=["onMouseEnter","onClick","onMouseLeave"];function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ba.apply(null,arguments)}function YA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(r),!0).forEach(function(a){SV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function SV(e,t,r){return(t=wV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wV(e){var t=CV(e,"string");return typeof t=="symbol"?t:t+""}function CV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gf(e,t){if(e==null)return{};var r,a,l=AV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function AV(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var EV=e=>{var{dataKey:t,name:r,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:fm(r,t),payload:e}]},zV=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:a,fill:l,name:o,hide:u,unit:d,tooltipType:m,id:h}=e,p={dataDefinedOnItem:void 0,getPosition:Ms,settings:{stroke:r,strokeWidth:a,fill:l,dataKey:t,nameKey:void 0,name:fm(o,t),hide:u,type:m,color:l,unit:d,graphicalItemId:h}};return y.createElement(oM,{tooltipEntrySettings:p})});function OV(e){var t=ze(Es),{data:r,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:d,onClick:m}=o,h=Gf(o,bV),p=iM(u,a,o.id),v=sM(d),x=lM(m,a,o.id);if(!l||r==null)return null;var b=Ic(l);return y.createElement(zn,{zIndex:JG(l,rr.barBackground)},r.map((_,N)=>{var{value:S,background:C,tooltipPosition:z}=_,w=Gf(_,jV);if(!C)return null;var E=p(_,N),O=v(_,N),P=x(_,N),L=wr(wr(wr(wr(wr({option:l,isActive:String(N)===t},w),{},{fill:"#eee"},C),b),jy(h,_,N)),{},{onMouseEnter:E,onMouseLeave:O,onClick:P,dataKey:a,index:N,className:"recharts-bar-background-rectangle"});return y.createElement(Hf,Ba({key:"background-bar-".concat(N)},L))}))}function DV(e){var{showLabels:t,children:r,rects:a}=e,l=a?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return wr(wr({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return y.createElement(WD,{value:t?l:void 0},r)}function MV(e){var{shape:t,activeBar:r,baseProps:a,entry:l,index:o,dataKey:u}=e,d=ze(Es),m=ze(zD),h=r&&String(o)===d&&(m==null||u===m),p=h?r:t;return h?y.createElement(zn,{zIndex:rr.activeBar},y.createElement(DM,{index:o},y.createElement(Hf,Ba({},a,{name:String(a.name)},l,{isActive:h,option:p,index:o,dataKey:u})))):y.createElement(Hf,Ba({},a,{name:String(a.name)},l,{isActive:h,option:p,index:o,dataKey:u}))}function TV(e){var{shape:t,baseProps:r,entry:a,index:l,dataKey:o}=e;return y.createElement(Hf,Ba({},r,{name:String(r.name)},a,{isActive:!1,option:t,index:l,dataKey:o}))}function PV(e){var t,{data:r,props:a}=e,l=(t=Ln(a))!==null&&t!==void 0?t:{},{id:o}=l,u=Gf(l,NV),{shape:d,dataKey:m,activeBar:h}=a,{onMouseEnter:p,onClick:v,onMouseLeave:x}=a,b=Gf(a,_V),_=iM(p,m,o),N=sM(x),S=lM(v,m,o);return r?y.createElement(y.Fragment,null,r.map((C,z)=>y.createElement(DM,Ba({index:z,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(z),className:"recharts-bar-rectangle"},jy(b,C,z),{onMouseEnter:_(C,z),onMouseLeave:N(C,z),onClick:S(C,z)}),h?y.createElement(MV,{shape:d,activeBar:h,baseProps:u,entry:C,index:z,dataKey:m}):y.createElement(TV,{shape:d,baseProps:u,entry:C,index:z,dataKey:m})))):null}function kV(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:u,animationDuration:d,animationEasing:m,onAnimationEnd:h,onAnimationStart:p}=t,v=r.current,x=_m(t,"recharts-bar-"),[b,_]=y.useState(!1),N=!b,S=y.useCallback(()=>{typeof h=="function"&&h(),_(!1)},[h]),C=y.useCallback(()=>{typeof p=="function"&&p(),_(!0)},[p]);return y.createElement(DV,{showLabels:N,rects:a},y.createElement(Nm,{animationId:x,begin:u,duration:d,isActive:o,easing:m,onAnimationEnd:S,onAnimationStart:C,key:x},z=>{var w=z===1?a:a?.map((E,O)=>{var P=v&&v[O];if(P)return wr(wr({},E),{},{x:Tt(P.x,E.x,z),y:Tt(P.y,E.y,z),width:Tt(P.width,E.width,z),height:Tt(P.height,E.height,z)});if(l==="horizontal"){var L=Tt(0,E.height,z),T=Tt(E.stackedBarStart,E.y,z);return wr(wr({},E),{},{y:T,height:L})}var D=Tt(0,E.width,z),k=Tt(E.stackedBarStart,E.x,z);return wr(wr({},E),{},{width:D,x:k})});return z>0&&(r.current=w??null),w==null?null:y.createElement(wn,null,y.createElement(PV,{props:t,data:w}))}),y.createElement(JD,{label:t.label}),t.children)}function qV(e){var t=y.useRef(null);return y.createElement(kV,{previousRectanglesRef:t,props:e})}var MM=0,RV=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ut(e,t)}};class LV extends y.PureComponent{render(){var{hide:t,data:r,dataKey:a,className:l,xAxisId:o,yAxisId:u,needClip:d,background:m,id:h}=this.props;if(t||r==null)return null;var p=mt("recharts-bar",l),v=h;return y.createElement(wn,{className:p,id:h},d&&y.createElement("defs",null,y.createElement(jM,{clipPathId:v,xAxisId:o,yAxisId:u})),y.createElement(wn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(v,")"):void 0},y.createElement(OV,{data:r,dataKey:a,background:m,allOtherBarProps:this.props}),y.createElement(qV,this.props)))}}var IV={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:MM,xAxisId:0,yAxisId:0,zIndex:rr.bar};function $V(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:h,isAnimationActive:p}=e,{needClip:v}=$b(t,r),x=Ts(),b=Nr(),_=BH(e.children,Pb),N=ze(z=>mV(z,e.id,b,_));if(x!=="vertical"&&x!=="horizontal")return null;var S,C=N?.[0];return C==null||C.height==null||C.width==null?S=0:S=x==="vertical"?C.height/2:C.width/2,y.createElement(bM,{xAxisId:t,yAxisId:r,data:N,dataPointFormatter:RV,errorBarOffset:S},y.createElement(LV,Ba({},e,{layout:x,needClip:v,data:N,xAxisId:t,yAxisId:r,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:h,isAnimationActive:p})))}function BV(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:l,bandSize:o,xAxis:u,yAxis:d,xAxisTicks:m,yAxisTicks:h,stackedData:p,displayedData:v,offset:x,cells:b,parentViewBox:_,dataStartIndex:N}=e,S=t==="horizontal"?d:u,C=p?S.scale.domain():null,z=t6({numericAxis:S}),w=S.scale.map(z);return v.map((E,O)=>{var P,L,T,D,k,$;if(p){var B=p[O+N];if(B==null)return null;P=K4(B,C)}else P=Ut(E,r),Array.isArray(P)||(P=[z,P]);var le=XQ(a,MM)(P[1],O);if(t==="horizontal"){var oe,F=d.scale.map(P[0]),q=d.scale.map(P[1]);if(F==null||q==null)return null;L=TS({axis:u,ticks:m,bandSize:o,offset:l.offset,entry:E,index:O}),T=(oe=q??F)!==null&&oe!==void 0?oe:void 0,D=l.size;var J=F-q;if(k=ra(J)?0:J,$={x:L,y:x.top,width:D,height:x.height},Math.abs(le)>0&&Math.abs(k)<Math.abs(le)){var Q=Lr(k||le)*(Math.abs(le)-Math.abs(k));T-=Q,k+=Q}}else{var ve=u.scale.map(P[0]),U=u.scale.map(P[1]);if(ve==null||U==null)return null;if(L=ve,T=TS({axis:d,ticks:h,bandSize:o,offset:l.offset,entry:E,index:O}),D=U-ve,k=l.size,$={x:x.left,y:T,width:x.width,height:k},Math.abs(le)>0&&Math.abs(D)<Math.abs(le)){var ge=Lr(D||le)*(Math.abs(le)-Math.abs(D));D+=ge}}if(L==null||T==null||D==null||k==null)return null;var ee=wr(wr({},E),{},{stackedBarStart:w,x:L,y:T,width:D,height:k,value:p?P:P[1],payload:E,background:$,tooltipPosition:{x:L+D/2,y:T+k/2},parentViewBox:_},b&&b[O]&&b[O].props);return ee}).filter(Boolean)}function UV(e){var t=zr(e,IV),r=gV(t.stackId),a=Nr();return y.createElement(uM,{id:t.id,type:"bar"},l=>y.createElement(y.Fragment,null,y.createElement(cM,{legendPayload:EV(t)}),y.createElement(zV,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),y.createElement(fM,{type:"bar",id:l,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),y.createElement(zn,{zIndex:t.zIndex},y.createElement($V,Ba({},t,{id:l})))))}var TM=y.memo(UV,Hm);TM.displayName="Bar";var HV=["domain","range"],GV=["domain","range"];function KA(e,t){if(e==null)return{};var r,a,l=FV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function FV(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function XA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function PM(e,t){if(e===t)return!0;var{domain:r,range:a}=e,l=KA(e,HV),{domain:o,range:u}=t,d=KA(t,GV);return!XA(r,o)||!XA(a,u)?!1:Hm(l,d)}var QV=["type"],VV=["dangerouslySetInnerHTML","ticks","scale"],YV=["id","scale"];function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ey.apply(null,arguments)}function WA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function ZA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(r),!0).forEach(function(a){KV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KV(e,t,r){return(t=XV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XV(e){var t=WV(e,"string");return typeof t=="symbol"?t:t+""}function WV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ty(e,t){if(e==null)return{};var r,a,l=ZV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function ZV(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function JV(e){var t=qt(),r=y.useRef(null),a=sz(),{type:l}=e,o=ty(e,QV),u=Mm(a,"xAxis",l),d=y.useMemo(()=>{if(u!=null)return ZA(ZA({},o),{},{type:u})},[o,u]);return y.useLayoutEffect(()=>{d!=null&&(r.current===null?t(zG(d)):r.current!==d&&t(OG({prev:r.current,next:d})),r.current=d)},[d,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(DG(r.current)),r.current=null)},[t]),null}var eY=e=>{var{xAxisId:t,className:r}=e,a=ze(Dy),l=Nr(),o="xAxis",u=ze(C=>oD(C,o,t,l)),d=ze(C=>aD(C,t)),m=ze(C=>l7(C,t)),h=ze(C=>AO(C,t));if(d==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:v,scale:x}=e,b=ty(e,VV),{id:_,scale:N}=h,S=ty(h,YV);return y.createElement(Ib,ey({},b,S,{x:m.x,y:m.y,width:d.width,height:d.height,className:mt("recharts-".concat(o," ").concat(o),r),viewBox:a,ticks:u,axisType:o}))},tY={allowDataOverflow:Jt.allowDataOverflow,allowDecimals:Jt.allowDecimals,allowDuplicatedCategory:Jt.allowDuplicatedCategory,angle:Jt.angle,axisLine:Ta.axisLine,height:Jt.height,hide:!1,includeHidden:Jt.includeHidden,interval:Jt.interval,label:!1,minTickGap:Jt.minTickGap,mirror:Jt.mirror,orientation:Jt.orientation,padding:Jt.padding,reversed:Jt.reversed,scale:Jt.scale,tick:Jt.tick,tickCount:Jt.tickCount,tickLine:Ta.tickLine,tickSize:Ta.tickSize,type:Jt.type,xAxisId:0},rY=e=>{var t=zr(e,tY);return y.createElement(y.Fragment,null,y.createElement(JV,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(eY,t))},ry=y.memo(rY,PM);ry.displayName="XAxis";var nY=["type"],aY=["dangerouslySetInnerHTML","ticks","scale"],iY=["id","scale"];function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ny.apply(null,arguments)}function JA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function e2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(r),!0).forEach(function(a){sY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sY(e,t,r){return(t=lY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=oY(e,"string");return typeof t=="symbol"?t:t+""}function oY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ay(e,t){if(e==null)return{};var r,a,l=cY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function cY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function uY(e){var t=qt(),r=y.useRef(null),a=sz(),{type:l}=e,o=ay(e,nY),u=Mm(a,"yAxis",l),d=y.useMemo(()=>{if(u!=null)return e2(e2({},o),{},{type:u})},[u,o]);return y.useLayoutEffect(()=>{d!=null&&(r.current===null?t(MG(d)):r.current!==d&&t(TG({prev:r.current,next:d})),r.current=d)},[d,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(PG(r.current)),r.current=null)},[t]),null}function dY(e){var{yAxisId:t,className:r,width:a,label:l}=e,o=y.useRef(null),u=y.useRef(null),d=ze(Dy),m=Nr(),h=qt(),p="yAxis",v=ze(P=>iD(P,t)),x=ze(P=>c7(P,t)),b=ze(P=>oD(P,p,t,m)),_=ze(P=>EO(P,t));if(y.useLayoutEffect(()=>{if(!(a!=="auto"||!v||qb(l)||y.isValidElement(l)||_==null)){var P=o.current;if(P){var L=P.getCalculatedWidth();Math.round(v.width)!==Math.round(L)&&h(kG({id:t,width:L}))}}},[b,v,h,l,t,a,_]),v==null||x==null||_==null)return null;var{dangerouslySetInnerHTML:N,ticks:S,scale:C}=e,z=ay(e,aY),{id:w,scale:E}=_,O=ay(_,iY);return y.createElement(Ib,ny({},z,O,{ref:o,labelRef:u,x:x.x,y:x.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:v.width,height:v.height,className:mt("recharts-".concat(p," ").concat(p),r),viewBox:d,ticks:b,axisType:p}))}var fY={allowDataOverflow:er.allowDataOverflow,allowDecimals:er.allowDecimals,allowDuplicatedCategory:er.allowDuplicatedCategory,angle:er.angle,axisLine:Ta.axisLine,hide:!1,includeHidden:er.includeHidden,interval:er.interval,label:!1,minTickGap:er.minTickGap,mirror:er.mirror,orientation:er.orientation,padding:er.padding,reversed:er.reversed,scale:er.scale,tick:er.tick,tickCount:er.tickCount,tickLine:Ta.tickLine,tickSize:Ta.tickSize,type:er.type,width:er.width,yAxisId:0},mY=e=>{var t=zr(e,fY);return y.createElement(y.Fragment,null,y.createElement(uY,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(dY,t))},iy=y.memo(mY,PM);iy.displayName="YAxis";var hY=(e,t)=>t,Ub=re([hY,lt,wO,lr,wD,Xa,S9,ar],D9),Hb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},kM=Cn("mouseClick"),qM=Uc();qM.startListening({actionCreator:kM,effect:(e,t)=>{var r=e.payload,a=Ub(t.getState(),Hb(r));a?.activeIndex!=null&&t.dispatch(_7({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var sy=Cn("mouseMove"),RM=Uc(),kd=null;RM.startListening({actionCreator:sy,effect:(e,t)=>{var r=e.payload;kd!==null&&cancelAnimationFrame(kd);var a=Hb(r);kd=requestAnimationFrame(()=>{var l=t.getState(),o=Sb(l,l.tooltip.settings.shared);if(o==="axis"){var u=Ub(l,a);u?.activeIndex!=null?t.dispatch(vD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(pD())}kd=null})}});function pY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var t2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},LM=Ur({name:"rootProps",initialState:t2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:t2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),vY=LM.reducer,{updateOptions:gY}=LM.actions,xY=null,yY={updatePolarOptions:(e,t)=>t.payload},IM=Ur({name:"polarOptions",initialState:xY,reducers:yY}),{updatePolarOptions:BW}=IM.actions,bY=IM.reducer,$M=Cn("keyDown"),BM=Cn("focus"),Gb=Uc();Gb.startListening({actionCreator:$M,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=r.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=wb(l,ao(r),Zc(r),eu(r)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var m=Xa(r);if(o==="Enter"){var h=Rf(r,"axis","hover",String(l.index));t.dispatch(Qx({active:!l.active,activeIndex:l.index,activeCoordinate:h}));return}var p=m7(r),v=p==="left-to-right"?1:-1,x=o==="ArrowRight"?1:-1,b=d+x*v;if(!(m==null||b>=m.length||b<0)){var _=Rf(r,"axis","hover",String(b));t.dispatch(Qx({active:!0,activeIndex:b.toString(),activeCoordinate:_}))}}}}}});Gb.startListening({actionCreator:BM,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=r.tooltip;if(!l.active&&l.index==null){var o="0",u=Rf(r,"axis","hover",String(o));t.dispatch(Qx({active:!0,activeIndex:o,activeCoordinate:u}))}}}});var bn=Cn("externalEvent"),UM=Uc(),Zg=new Map;UM.startListening({actionCreator:bn,effect:(e,t)=>{var{handler:r,reactEvent:a}=e.payload;if(r!=null){a.persist();var l=a.type,o=Zg.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var d=t.getState(),m={activeCoordinate:o9(d),activeDataKey:zD(d),activeIndex:Es(d),activeLabel:ED(d),activeTooltipIndex:Es(d),isTooltipActive:c9(d)};r(m,a)}finally{Zg.delete(l)}});Zg.set(l,u)}}});var jY=re([ro],e=>e.tooltipItemPayloads),NY=re([jY,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var a=e.find(o=>o.settings.graphicalItemId===r);if(a!=null){var{getPosition:l}=a;if(l!=null)return l(t)}}}),HM=Cn("touchMove"),GM=Uc();GM.startListening({actionCreator:HM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var a=t.getState(),l=Sb(a,a.tooltip.settings.shared);if(l==="axis"){var o=r.touches[0];if(o==null)return;var u=Ub(a,Hb({clientX:o.clientX,clientY:o.clientY,currentTarget:r.currentTarget}));u?.activeIndex!=null&&t.dispatch(vD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(l==="item"){var d,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(o6),v=(d=h.getAttribute(c6))!==null&&d!==void 0?d:void 0,x=no(a).find(N=>N.id===v);if(p==null||x==null||v==null)return;var{dataKey:b}=x,_=NY(a,p,v);t.dispatch(hD({activeDataKey:b,activeIndex:p,activeCoordinate:_,activeGraphicalItemId:v}))}}}});var _Y=NE({brush:tF,cartesianAxis:qG,chartData:oU,errorBars:KF,graphicalItems:hG,layout:G4,legend:eL,options:nU,polarAxis:qH,polarOptions:bY,referenceElements:iF,rootProps:vY,tooltip:S7,zIndex:F9}),SY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return p4({reducer:_Y,preloadedState:t,middleware:a=>{var l;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([qM.middleware,RM.middleware,Gb.middleware,UM.middleware,GM.middleware])},enhancers:a=>{var l=a;return typeof a=="function"&&(l=a()),l.concat(RE({type:"raf"}))},devTools:{serialize:{replacer:pY},name:"recharts-".concat(r)}})};function wY(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,l=Nr(),o=y.useRef(null);if(l)return r;o.current==null&&(o.current=SY(t,a));var u=Sy;return y.createElement(SQ,{context:u,store:o.current},r)}function CY(e){var{layout:t,margin:r}=e,a=qt(),l=Nr();return y.useEffect(()=>{l||(a(B4(t)),a($4(r)))},[a,l,t,r]),null}var AY=y.memo(CY,Hm);function EY(e){var t=qt();return y.useEffect(()=>{t(gY(e))},[t,e]),null}function r2(e){var{zIndex:t,isPanorama:r}=e,a=y.useRef(null),l=qt();return y.useLayoutEffect(()=>(a.current&&l(H9({zIndex:t,element:a.current,isPanorama:r})),()=>{l(G9({zIndex:t,isPanorama:r}))}),[l,t,r]),y.createElement("g",{tabIndex:-1,ref:a})}function n2(e){var{children:t,isPanorama:r}=e,a=ze(T9);if(!a||a.length===0)return t;var l=a.filter(u=>u<0),o=a.filter(u=>u>0);return y.createElement(y.Fragment,null,l.map(u=>y.createElement(r2,{key:u,zIndex:u,isPanorama:r})),t,o.map(u=>y.createElement(r2,{key:u,zIndex:u,isPanorama:r})))}var zY=["children"];function OY(e,t){if(e==null)return{};var r,a,l=DY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function DY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ff.apply(null,arguments)}var MY={width:"100%",height:"100%",display:"block"},TY=y.forwardRef((e,t)=>{var r=az(),a=iz(),l=pz();if(!aa(r)||!aa(a))return null;var{children:o,otherAttributes:u,title:d,desc:m}=e,h,p;return u!=null&&(typeof u.tabIndex=="number"?h=u.tabIndex:h=l?0:void 0,typeof u.role=="string"?p=u.role:p=l?"application":void 0),y.createElement($2,Ff({},u,{title:d,desc:m,role:p,tabIndex:h,width:r,height:a,style:MY,ref:t}),o)}),PY=e=>{var{children:t}=e,r=ze(vm);if(!r)return null;var{width:a,height:l,y:o,x:u}=r;return y.createElement($2,{width:a,height:l,x:u,y:o},t)},a2=y.forwardRef((e,t)=>{var{children:r}=e,a=OY(e,zY),l=Nr();return l?y.createElement(PY,null,y.createElement(n2,{isPanorama:!0},r)):y.createElement(TY,Ff({ref:t},a),y.createElement(n2,{isPanorama:!1},r))});function kY(){var e=qt(),[t,r]=y.useState(null),a=ze(l6);return y.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;Xe(o)&&o!==a&&e(H4(o))}},[t,e,a]),r}function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function qY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(r),!0).forEach(function(a){RY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function RY(e,t,r){return(t=LY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LY(e){var t=IY(e,"string");return typeof t=="symbol"?t:t+""}function IY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ti.apply(null,arguments)}var $Y=()=>(gU(),null);function Qf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var BY=y.forwardRef((e,t)=>{var r,a,l=y.useRef(null),[o,u]=y.useState({containerWidth:Qf((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Qf((a=e.style)===null||a===void 0?void 0:a.height)}),d=y.useCallback((h,p)=>{u(v=>{var x=Math.round(h),b=Math.round(p);return v.containerWidth===x&&v.containerHeight===b?v:{containerWidth:x,containerHeight:b}})},[]),m=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:v}=h.getBoundingClientRect();d(p,v);var x=_=>{var N=_[0];if(N!=null){var{width:S,height:C}=N.contentRect;d(S,C)}},b=new ResizeObserver(x);b.observe(h),l.current=b}},[t,d]);return y.useEffect(()=>()=>{var h=l.current;h?.disconnect()},[d]),y.createElement(y.Fragment,null,y.createElement(Gc,{width:o.containerWidth,height:o.containerHeight}),y.createElement("div",Ti({ref:m},e)))}),UY=y.forwardRef((e,t)=>{var{width:r,height:a}=e,[l,o]=y.useState({containerWidth:Qf(r),containerHeight:Qf(a)}),u=y.useCallback((m,h)=>{o(p=>{var v=Math.round(m),x=Math.round(h);return p.containerWidth===v&&p.containerHeight===x?p:{containerWidth:v,containerHeight:x}})},[]),d=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:p}=m.getBoundingClientRect();u(h,p)}},[t,u]);return y.createElement(y.Fragment,null,y.createElement(Gc,{width:l.containerWidth,height:l.containerHeight}),y.createElement("div",Ti({ref:d},e)))}),HY=y.forwardRef((e,t)=>{var{width:r,height:a}=e;return y.createElement(y.Fragment,null,y.createElement(Gc,{width:r,height:a}),y.createElement("div",Ti({ref:t},e)))}),GY=y.forwardRef((e,t)=>{var{width:r,height:a}=e;return typeof r=="string"||typeof a=="string"?y.createElement(UY,Ti({},e,{ref:t})):typeof r=="number"&&typeof a=="number"?y.createElement(HY,Ti({},e,{width:r,height:a,ref:t})):y.createElement(y.Fragment,null,y.createElement(Gc,{width:r,height:a}),y.createElement("div",Ti({ref:t},e)))});function FY(e){return e?BY:GY}var QY=y.forwardRef((e,t)=>{var{children:r,className:a,height:l,onClick:o,onContextMenu:u,onDoubleClick:d,onMouseDown:m,onMouseEnter:h,onMouseLeave:p,onMouseMove:v,onMouseUp:x,onTouchEnd:b,onTouchMove:_,onTouchStart:N,style:S,width:C,responsive:z,dispatchTouchEvents:w=!0}=e,E=y.useRef(null),O=qt(),[P,L]=y.useState(null),[T,D]=y.useState(null),k=kY(),$=My(),B=$?.width>0?$.width:C,le=$?.height>0?$.height:l,oe=y.useCallback(ne=>{k(ne),typeof t=="function"&&t(ne),L(ne),D(ne),ne!=null&&(E.current=ne)},[k,t,L,D]),F=y.useCallback(ne=>{O(kM(ne)),O(bn({handler:o,reactEvent:ne}))},[O,o]),q=y.useCallback(ne=>{O(sy(ne)),O(bn({handler:h,reactEvent:ne}))},[O,h]),J=y.useCallback(ne=>{O(pD()),O(bn({handler:p,reactEvent:ne}))},[O,p]),Q=y.useCallback(ne=>{O(sy(ne)),O(bn({handler:v,reactEvent:ne}))},[O,v]),ve=y.useCallback(()=>{O(BM())},[O]),U=y.useCallback(ne=>{O($M(ne.key))},[O]),ge=y.useCallback(ne=>{O(bn({handler:u,reactEvent:ne}))},[O,u]),ee=y.useCallback(ne=>{O(bn({handler:d,reactEvent:ne}))},[O,d]),me=y.useCallback(ne=>{O(bn({handler:m,reactEvent:ne}))},[O,m]),xe=y.useCallback(ne=>{O(bn({handler:x,reactEvent:ne}))},[O,x]),pe=y.useCallback(ne=>{O(bn({handler:N,reactEvent:ne}))},[O,N]),H=y.useCallback(ne=>{w&&O(HM(ne)),O(bn({handler:_,reactEvent:ne}))},[O,w,_]),de=y.useCallback(ne=>{O(bn({handler:b,reactEvent:ne}))},[O,b]),Ee=FY(z);return y.createElement(qD.Provider,{value:P},y.createElement(K3.Provider,{value:T},y.createElement(Ee,{width:B??S?.width,height:le??S?.height,className:mt("recharts-wrapper",a),style:qY({position:"relative",cursor:"default",width:B,height:le},S),onClick:F,onContextMenu:ge,onDoubleClick:ee,onFocus:ve,onKeyDown:U,onMouseDown:me,onMouseEnter:q,onMouseLeave:J,onMouseMove:Q,onMouseUp:xe,onTouchEnd:de,onTouchMove:H,onTouchStart:pe,ref:oe},y.createElement($Y,null),r)))}),VY=["width","height","responsive","children","className","style","compact","title","desc"];function YY(e,t){if(e==null)return{};var r,a,l=KY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function KY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var XY=y.forwardRef((e,t)=>{var{width:r,height:a,responsive:l,children:o,className:u,style:d,compact:m,title:h,desc:p}=e,v=YY(e,VY),x=Ln(v);return m?y.createElement(y.Fragment,null,y.createElement(Gc,{width:r,height:a}),y.createElement(a2,{otherAttributes:x,title:h,desc:p},o)):y.createElement(QY,{className:u,style:d,width:r,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(a2,{otherAttributes:x,title:h,desc:p,ref:t},y.createElement(lF,null,o)))});function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ly.apply(null,arguments)}var WY={top:5,right:5,bottom:5,left:5},ZY={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:WY,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},FM=y.forwardRef(function(t,r){var a,l=zr(t.categoricalChartProps,ZY),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,p={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(wY,{preloadedState:{options:p},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:o},y.createElement(eF,{chartData:h.data}),y.createElement(AY,{layout:l.layout,margin:l.margin}),y.createElement(EY,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),y.createElement(XY,ly({},l,{ref:r})))}),JY=["axis"],eK=y.forwardRef((e,t)=>y.createElement(FM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:JY,tooltipPayloadSearcher:RD,categoricalChartProps:e,ref:t})),tK=["axis","item"],rK=y.forwardRef((e,t)=>y.createElement(FM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tK,tooltipPayloadSearcher:RD,categoricalChartProps:e,ref:t}));const nK=8,aK=12,iK=14,sK=1;function Fb(e){return e instanceof He?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function s2(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function Gm(){const e=new Date,t=e.getDay(),r=t===0?-6:1-t,a=new Date(e);return a.setDate(e.getDate()+r),a.setHours(0,0,0,0),a}function lK(){const e=Gm(),t=new Date(e);return t.setDate(e.getDate()+6),t.setHours(23,59,59,999),t}function Jg(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function Fm(e){try{const t=qe(je(se,"quiz_results"),we("userId","==",e),nt("datePassage","desc"));return(await ke(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){return console.error("Erreur rcupration rsultats lve:",t),[]}}async function oK(e){try{const t=await Fm(e);if(t.length===0)return[];const r=new Map;t.forEach(o=>{const u=o.disciplineId;r.has(u)||r.set(u,[]),r.get(u).push(o)});const a=[];r.forEach((o,u)=>{if(o.length<sK)return;const d=o.map(S=>S.pourcentage/100*20),m=d.reduce((S,C)=>S+C,0)/d.length;if(m>=iK)return;let h="stable";if(d.length>=3){const S=d.slice(0,2),C=d.slice(2,4),z=S.reduce((O,P)=>O+P,0)/S.length,w=C.reduce((O,P)=>O+P,0)/C.length,E=z-w;E>1.5?h="hausse":E<-1.5&&(h="baisse")}let p="modere";m<nK?p="critique":m<aK&&(p="important");const v=d[0],x=Math.max(...d),b=Math.min(...d),_=Fb(o[0].datePassage),N=o[0].disciplineNom||"Discipline inconnue";a.push({id:`lacune_${u}`,disciplineId:u,disciplineNom:N,moyenne:Math.round(m*10)/10,nombreQuiz:o.length,tendance:h,niveauUrgence:p,dernierQuizDate:_,scoreDetails:{dernierScore:Math.round(v*10)/10,meilleurScore:Math.round(x*10)/10,pireScore:Math.round(b*10)/10}})});const l={critique:0,important:1,modere:2};return a.sort((o,u)=>{const d=l[o.niveauUrgence]-l[u.niveauUrgence];return d!==0?d:o.moyenne-u.moyenne}),a}catch(t){return console.error("Erreur dtection lacunes:",t),[]}}function cK(e){const t=[];let r=1;return e.forEach(a=>{const{id:l,disciplineNom:o,niveauUrgence:u,moyenne:d,tendance:m}=a;switch(u){case"critique":t.push({id:`reco_cours_${l}`,lacuneId:l,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${d}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date}),t.push({id:`reco_quiz_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break;case"important":t.push({id:`reco_exercice_${l}`,lacuneId:l,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${d}/20 de moyenne, concentre-toi sur les exercices pratiques. ${m==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date}),t.push({id:`reco_cours2_${l}`,lacuneId:l,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break;case"modere":t.push({id:`reco_consolider_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${d}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break}}),t}async function uK(e){try{const t=await Fm(e);if(t.length===0)return{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const r=new Set;t.forEach(N=>{const S=Fb(N.datePassage),C=`${S.getFullYear()}-${S.getMonth()}-${S.getDate()}`;r.add(C)});const a=Array.from(r).map(N=>{const[S,C,z]=N.split("-").map(Number);return new Date(S,C,z)}).sort((N,S)=>S.getTime()-N.getTime()),l=a.length,o=a[0];let u=0;const d=new Date;d.setHours(0,0,0,0);const m=a[0];if(Jg(m,d)<=1){u=1;for(let N=1;N<a.length&&Jg(a[N],a[N-1])===1;N++)u++}let p=0,v=1;for(let N=1;N<a.length;N++)Jg(a[N],a[N-1])===1?v++:(p=Math.max(p,v),v=1);p=Math.max(p,v,u);const x=Gm(),b=[];for(let N=0;N<7;N++){const S=new Date(x);S.setDate(x.getDate()+N);const C=a.some(z=>s2(z,S));b.push(C)}const _=[];for(let N=0;N<4;N++){const S=new Date(x);S.setDate(x.getDate()-N*7);let C=0;for(let w=0;w<7;w++){const E=new Date(S);E.setDate(S.getDate()+w),a.some(O=>s2(O,E))&&C++}const z=Math.ceil((S.getDate()+new Date(S.getFullYear(),S.getMonth(),1).getDay())/7);_.push({semaine:N===0?"Cette sem.":`Sem. -${N}`,joursActifs:C})}return{userId:e,streakActuel:u,meilleurStreak:p,dernierJourActif:o,totalJoursActifs:l,semaineCourante:b,historiqueHebdo:_.reverse()}}catch(t){return console.error("Erreur calcul streak:",t),{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function dK(e,t,r){const a=[],l=Gm(),o=lK(),u=t.length>2?5:3;if(a.push({id:`obj_quiz_${e}_${l.getTime()}`,userId:e,titre:`Passer ${u} quiz cette semaine`,description:`Entrane-toi en passant au moins ${u} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:u,progression:0,statut:"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Travailleur"'}),t.length>0){const m=t[0],h=Math.min(m.moyenne+3,14);a.push({id:`obj_score_${e}_${l.getTime()}`,userId:e,titre:`Atteindre ${Math.round(h)}/20 en ${m.disciplineNom}`,description:`Ta moyenne actuelle est de ${m.moyenne}/20. Vise ${Math.round(h)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(h),progression:Math.round(m.moyenne),statut:"en_cours",disciplineId:m.disciplineId,disciplineNom:m.disciplineNom,dateDebut:l,dateFin:o,recompense:' Badge "En progrs"'})}const d=r.streakActuel>=5?7:r.streakActuel+2;return a.push({id:`obj_streak_${e}_${l.getTime()}`,userId:e,titre:`Maintenir un streak de ${d} jours`,description:`Tu es actuellement  ${r.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:d,progression:r.streakActuel,statut:r.streakActuel>=d?"atteint":"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Flamme"'}),a}function fK(e,t,r,a){let l=0;if(a.length>0){const v=a.reduce((x,b)=>x+b.pourcentage/100*20,0)/a.length;l=Math.min(v/20*100,100)}let o=100;const u=e.filter(v=>v.niveauUrgence==="critique").length,d=e.filter(v=>v.niveauUrgence==="important").length;o-=u*25,o-=d*15,o=Math.max(o,0);const m=Math.min(t.streakActuel/7*100,100);let h=0;r.length>0&&(h=r.filter(x=>x.statut==="atteint").length/r.length*100);const p=l*.4+o*.25+m*.2+h*.15;return Math.round(Math.min(Math.max(p,0),100))}function mK(e,t,r){const a=Gm(),l=t.filter(o=>Fb(o.datePassage)>=a);return e.map(o=>{const u={...o};switch(o.type){case"quiz_count":u.progression=l.length;break;case"score_min":if(o.disciplineId){const d=l.filter(m=>m.disciplineId===o.disciplineId);if(d.length>0){const m=Math.max(...d.map(h=>h.pourcentage));u.progression=Math.round(m/100*20)}}break;case"streak":u.progression=r.streakActuel;break}return u.progression>=u.cible&&(u.statut="atteint"),u})}async function Qb(e){try{const t=await oK(e),r=cK(t),a=await uK(e);let l=dK(e,t,a);const o=await Fm(e);l=mK(l,o,a);const u=fK(t,a,l,o);return{lacunes:t,recommandations:r,streak:a,objectifs:l,scoreGlobal:u}}catch(t){return console.error("Erreur suivi complet:",t),{lacunes:[],recommandations:[],streak:{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function Vf(e){switch(e){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function QM(e){switch(e){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function VM(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function hK(e){return e>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":e>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":e>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":e>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function pK(e){return e.cible===0?0:Math.min(Math.round(e.progression/e.cible*100),100)}const vK="PEDA",gK=4,xK=5,yK=40,YM=5;function Da(e){return e instanceof He?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function KM(e){const t=new Date,r=t.getDay(),a=r===0?-6:1-r,l=new Date(t);return l.setDate(t.getDate()+a),l.setHours(0,0,0,0),l}function bK(e){const t=KM(),r=new Date(t);return r.setDate(t.getDate()+6),r.setHours(23,59,59,999),r}function l2(e){const t=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${e.getDate()} ${t[e.getMonth()]}`}function XM(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function jK(e){try{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let r="",a="";for(let u=0;u<gK;u++)r+=t.charAt(Math.floor(Math.random()*t.length)),a+=t.charAt(Math.floor(Math.random()*t.length));const l=`${vK}-${r}-${a}`,o=be(se,"users",e);return await We(o,{codeParent:l,codeParentGenere:new Date}),l}catch(t){throw console.error("Erreur gnration code invitation:",t),new Error("Impossible de gnrer le code d'invitation")}}async function NK(e){try{const t=be(se,"users",e),r=await Vt(t);if(!r.exists())throw new Error("lve introuvable");const a=r.data();return a.codeParent?a.codeParent:await jK(e)}catch(t){throw console.error("Erreur rcupration code invitation:",t),new Error("Impossible de rcuprer le code d'invitation")}}async function _K(e,t){try{const r=t.trim().toUpperCase(),a=je(se,"users"),l=qe(a,we("codeParent","==",r),we("role","==","eleve"),Sn(1)),o=await ke(l);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=o.docs[0],d=u.data(),m=u.id,h=je(se,"liens_parent_enfant"),p=qe(h,we("parentId","==",e),we("enfantId","==",m),we("statut","==","actif"),Sn(1));if(!(await ke(p)).empty)throw new Error("Cet enfant est dj li  votre compte.");const x={parentId:e,enfantId:m,enfantNom:d.displayName||d.email,enfantEmail:d.email,enfantClasse:d.classe||void 0,codeInvitation:r,statut:"actif",dateCreation:new Date};return{id:(await nr(h,x)).id,...x}}catch(r){throw console.error("Erreur liaison parent-enfant:",r),r}}async function SK(e){try{const t=je(se,"liens_parent_enfant"),r=qe(t,we("parentId","==",e),we("statut","==","actif"),nt("dateCreation","desc"));return(await ke(r)).docs.map(l=>({id:l.id,...l.data(),dateCreation:Da(l.data().dateCreation),dateDerniereConsultation:l.data().dateDerniereConsultation?Da(l.data().dateDerniereConsultation):void 0}))}catch(t){return console.error("Erreur rcupration enfants lis:",t),[]}}async function wK(e,t){try{const r=be(se,"liens_parent_enfant",e),a=await Vt(r);if(!a.exists())throw new Error("Lien introuvable");if(a.data().parentId!==t)throw new Error("Action non autorise");await We(r,{statut:"revoque",dateRevocation:new Date})}catch(r){throw console.error("Erreur rvocation lien:",r),r}}async function CK(e,t){try{const r=je(se,"liens_parent_enfant"),a=qe(r,we("parentId","==",e),we("enfantId","==",t),we("statut","==","actif"),Sn(1)),l=await ke(a);if(l.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=be(se,"users",t),u=await Vt(o);if(!u.exists())throw new Error("Profil de l'enfant introuvable.");const d=u.data(),m=await Qb(t),h=await Fm(t),p=h.slice(0,YM).map(_=>({quizTitre:_.quizTitre||"Quiz",disciplineNom:_.disciplineNom||"Discipline",pourcentage:_.pourcentage,noteSur20:Math.round(_.pourcentage/100*20*10)/10,reussi:_.reussi,datePassage:Da(_.datePassage)})),v=await AK(e,t,d.displayName||d.email,m.lacunes,m.streak,m.scoreGlobal,h),x=EK(t,d.displayName||d.email,m,h),b=l.docs[0];return await We(be(se,"liens_parent_enfant",b.id),{dateDerniereConsultation:new Date}),{enfant:{id:t,nom:d.displayName||d.email,email:d.email,classe:d.classe||void 0,derniereConnexion:d.lastLogin?Da(d.lastLogin):void 0},scoreGlobal:m.scoreGlobal,streak:{actuel:m.streak.streakActuel,meilleur:m.streak.meilleurStreak,semaineCourante:m.streak.semaineCourante},lacunes:m.lacunes.map(_=>({disciplineNom:_.disciplineNom,moyenne:_.moyenne,niveauUrgence:_.niveauUrgence,tendance:_.tendance})),objectifs:m.objectifs.map(_=>({titre:_.titre,progression:_.progression,cible:_.cible,statut:_.statut})),derniersQuiz:p,resume:x,alertes:v}}catch(r){throw console.error("Erreur dashboard parent:",r),r}}async function AK(e,t,r,a,l,o,u){const d=[],m=new Date;if(a.filter(p=>p.niveauUrgence==="critique").forEach(p=>{d.push({id:`alerte_parent_lacune_${p.id}`,parentId:e,enfantId:t,enfantNom:r,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${p.disciplineNom}`,message:`${r} a une moyenne de ${p.moyenne}/20 en ${p.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:m})}),l.dernierJourActif){const p=XM(Da(l.dernierJourActif),m);p>=xK&&d.push({id:`alerte_parent_inactif_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"inactivite",niveau:"important",titre:` ${r} est inactif`,message:`${r} n'a pas utilis PedaClic depuis ${p} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:m})}else u.length===0&&d.push({id:`alerte_parent_jamais_actif_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"inactivite",niveau:"modere",titre:` ${r} n'a pas encore commenc`,message:`${r} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:m});o<yK&&u.length>0&&d.push({id:`alerte_parent_score_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${r} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:m}),a.filter(p=>p.tendance==="hausse").forEach(p=>{d.push({id:`alerte_parent_progression_${p.id}`,parentId:e,enfantId:t,enfantNom:r,type:"progression",niveau:"info",titre:` Progression en ${p.disciplineNom}`,message:`Bonne nouvelle ! ${r} montre une tendance  la hausse en ${p.disciplineNom}.`,lue:!1,dateCreation:m})}),l.streakActuel>=5&&d.push({id:`alerte_parent_streak_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"objectif_atteint",niveau:"info",titre:` Streak de ${l.streakActuel} jours !`,message:`Flicitations ! ${r} maintient un streak de ${l.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:m});const h={critique:0,important:1,modere:2,info:3};return d.sort((p,v)=>h[p.niveau]-h[v.niveau]),d}function EK(e,t,r,a){const l=KM(),o=bK(),u=new Date(l);u.setDate(u.getDate()-7);const d=new Date(o);d.setDate(d.getDate()-7);const m=a.filter(E=>{const O=Da(E.datePassage);return O>=l&&O<=o}),h=a.filter(E=>{const O=Da(E.datePassage);return O>=u&&O<=d}),p=m.slice(0,YM).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:Da(E.datePassage)})),v=zK(m,h),x=new Set;m.forEach(E=>{const O=Da(E.datePassage);x.add(`${O.getFullYear()}-${O.getMonth()}-${O.getDate()}`)});const b=m.reduce((E,O)=>E+(O.tempsEcoule||5),0);let _=0;if(h.length>0){const E=h.reduce((O,P)=>O+P.pourcentage,0)/h.length;_=Math.round(E)}let N="stable";const S=r.scoreGlobal-_;S>5?N="hausse":S<-5&&(N="baisse");const C=r.lacunes.filter(E=>E.niveauUrgence==="critique"||E.niveauUrgence==="important").map(E=>E.disciplineNom),z=r.objectifs.filter(E=>E.statut==="atteint").length,w=`${l2(l)} - ${l2(o)} ${o.getFullYear()}`;return{enfantId:e,enfantNom:t,semaine:w,dateDebut:l,dateFin:o,scoreGlobal:r.scoreGlobal,scoreGlobalPrecedent:_,evolutionScore:N,nombreQuizSemaine:m.length,tempsEstimeMinutes:Math.round(b),joursActifsSemaine:x.size,streakActuel:r.streak.streakActuel,derniersQuiz:p,evolutionDisciplines:v,lacunesCritiques:r.lacunes.filter(E=>E.niveauUrgence==="critique").length,lacunesImportantes:r.lacunes.filter(E=>E.niveauUrgence==="important").length,disciplinesEnDifficulte:C,objectifsAtteints:z,objectifsTotal:r.objectifs.length}}function zK(e,t){const r=new Map;e.forEach(o=>{r.has(o.disciplineId)||r.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),r.get(o.disciplineId).scores.push(o.pourcentage)});const a=new Map;t.forEach(o=>{a.has(o.disciplineId)||a.set(o.disciplineId,[]),a.get(o.disciplineId).push(o.pourcentage)});const l=[];return r.forEach((o,u)=>{const d=o.scores.reduce((_,N)=>_+N,0)/o.scores.length,m=a.get(u)||[],h=m.length>0?m.reduce((_,N)=>_+N,0)/m.length:d,p=Math.round(d/100*20*10)/10,v=Math.round(h/100*20*10)/10,x=Math.round((p-v)*10)/10;let b="stable";x>1?b="hausse":x<-1&&(b="baisse"),l.push({disciplineNom:o.nom,disciplineId:u,moyenneSemainePrecedente:v,moyenneSemaineCourante:p,evolution:b,ecart:x})}),l}function OK(e){return Vf(e)}function DK(e){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[e]||"Alerte"}function o2(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function MK(e){return e>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":e>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":e>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":e>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function ex(e){const r=XM(e,new Date);return r===0?"Aujourd'hui":r===1?"Hier":r<7?`Il y a ${r} jours`:r<30?`Il y a ${Math.floor(r/7)} semaine(s)`:`Il y a ${Math.floor(r/30)} mois`}const TK="PROF",PK=4,qd="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",WM=8,kK=7,qK=16;function Os(e){return e instanceof He?e.toDate():e instanceof Date?e:e?.seconds?new He(e.seconds,e.nanoseconds||0).toDate():new Date(e)}function RK(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function ZM(){let e=0;const t=10;for(;e<t;){let r="",a="";for(let d=0;d<PK;d++)r+=qd.charAt(Math.floor(Math.random()*qd.length)),a+=qd.charAt(Math.floor(Math.random()*qd.length));const l=`${TK}-${r}-${a}`,o=qe(je(se,"groupes_prof"),we("codeInvitation","==",l),Sn(1));if((await ke(o)).empty)return l;e++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function LK(e,t,r){try{const a=await ZM(),l={profId:e,profNom:t,nom:r.nom.trim(),description:r.description?.trim()||"",matiereId:r.matiereId,matiereNom:r.matiereNom,classeNiveau:r.classeNiveau,codeInvitation:a,nombreInscrits:0,statut:"actif",anneeScolaire:r.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await nr(je(se,"groupes_prof"),l);return console.log(` Groupe "${r.nom}" cr avec code: ${a}`),{id:o.id,...l}}catch(a){throw console.error(" Erreur cration groupe:",a),new Error("Impossible de crer le groupe. Ressayez.")}}async function JM(e){try{const t=qe(je(se,"groupes_prof"),we("profId","==",e),nt("dateCreation","desc"));return(await ke(t)).docs.map(a=>({id:a.id,...a.data(),dateCreation:Os(a.data().dateCreation),dateMiseAJour:a.data().dateMiseAJour?Os(a.data().dateMiseAJour):void 0}))}catch(t){throw console.error(" Erreur rcupration groupes:",t),new Error("Impossible de charger vos groupes.")}}async function IK(e){try{const t=await Vt(be(se,"groupes_prof",e));if(!t.exists())return null;const r=t.data();return{id:t.id,...r,dateCreation:Os(r.dateCreation),dateMiseAJour:r.dateMiseAJour?Os(r.dateMiseAJour):void 0}}catch(t){return console.error(" Erreur rcupration groupe:",t),null}}async function eT(e,t){try{const r=be(se,"groupes_prof",e);await We(r,{...t,dateMiseAJour:new Date}),console.log(` Groupe ${e} mis  jour`)}catch(r){throw console.error(" Erreur modification groupe:",r),new Error("Impossible de modifier le groupe.")}}async function $K(e){try{const t=jc(se),r=qe(je(se,"inscriptions_groupe"),we("groupeId","==",e));(await ke(r)).docs.forEach(l=>t.delete(l.ref)),t.delete(be(se,"groupes_prof",e)),await t.commit(),console.log(` Groupe ${e} et ses inscriptions supprims`)}catch(t){throw console.error(" Erreur suppression groupe:",t),new Error("Impossible de supprimer le groupe.")}}async function BK(e){await eT(e,{statut:"archive"})}async function UK(e){try{const t=await ZM();return await We(be(se,"groupes_prof",e),{codeInvitation:t,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${e}: ${t}`),t}catch(t){throw console.error(" Erreur rgnration code:",t),new Error("Impossible de rgnrer le code.")}}async function HK(e,t,r,a){try{const l=a.trim().toUpperCase(),o=qe(je(se,"groupes_prof"),we("codeInvitation","==",l),Sn(1)),u=await ke(o);if(u.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const d=u.docs[0],m=d.data();if(m.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const h=qe(je(se,"inscriptions_groupe"),we("groupeId","==",d.id),we("eleveId","==",e),we("statut","==","actif"),Sn(1));if(!(await ke(h)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const v={groupeId:d.id,eleveId:e,eleveNom:t,eleveEmail:r,statut:"actif",dateInscription:new Date},x=await nr(je(se,"inscriptions_groupe"),v);return await We(be(se,"groupes_prof",d.id),{nombreInscrits:Wf(1),dateMiseAJour:new Date}),console.log(` lve ${t} inscrit au groupe "${m.nom}"`),{id:x.id,...v}}catch(l){throw console.error(" Erreur inscription groupe:",l),l}}async function Qm(e,t="actif"){try{const r=qe(je(se,"inscriptions_groupe"),we("groupeId","==",e),we("statut","==",t),nt("dateInscription","asc"));return(await ke(r)).docs.map(l=>({id:l.id,...l.data(),dateInscription:Os(l.data().dateInscription),dateRetrait:l.data().dateRetrait?Os(l.data().dateRetrait):void 0}))}catch(r){throw console.error(" Erreur rcupration lves groupe:",r),new Error("Impossible de charger les lves du groupe.")}}async function GK(e){try{const t=qe(je(se,"inscriptions_groupe"),we("eleveId","==",e),we("statut","==","actif")),r=await ke(t);if(r.empty)return[];const a=[];for(const l of r.docs){const o=l.data().groupeId,u=await IK(o);u&&u.statut==="actif"&&a.push(u)}return a}catch(t){return console.error(" Erreur rcupration groupes lve:",t),[]}}async function FK(e,t){try{await We(be(se,"inscriptions_groupe",e),{statut:"retire",dateRetrait:new Date}),await We(be(se,"groupes_prof",t),{nombreInscrits:Wf(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(r){throw console.error(" Erreur retrait lve:",r),new Error("Impossible de retirer l'lve du groupe.")}}async function Vb(e){try{const r=(await Qm(e)).map(x=>x.eleveId);if(r.length===0)return{groupeId:e,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const a=[],l=[];for(let x=0;x<r.length;x+=10)l.push(r.slice(x,x+10));for(const x of l){const b=qe(je(se,"quiz_results"),we("userId","in",x));(await ke(b)).docs.forEach(N=>a.push({id:N.id,...N.data()}))}const o=new Map;for(const x of a){const b=x.userId;o.has(b)||o.set(b,{total:0,somme:0,reussis:0});const _=o.get(b);_.total++,_.somme+=x.score||0,(x.score||0)>=10&&_.reussis++}let u=0,d=0,m=0,h=0,p=20,v=0;for(const[,x]of o){const b=x.total>0?x.somme/x.total:0;u+=b,d++,v+=x.total,b<WM&&m++,b>h&&(h=b),b<p&&(p=b)}return d===0&&(p=0),{groupeId:e,nombreEleves:r.length,moyenneClasse:d>0?Math.round(u/d*10)/10:0,tauxReussite:v>0?Math.round(Array.from(o.values()).reduce((x,b)=>x+b.reussis,0)/v*100):0,tauxParticipation:Math.round(d/r.length*100),totalQuizPasses:v,elevesEnDifficulte:m,meilleureNote:Math.round(h*10)/10,pireNote:Math.round(p*10)/10,derniereMiseAJour:new Date}}catch(t){throw console.error(" Erreur calcul stats groupe:",t),new Error("Impossible de calculer les statistiques du groupe.")}}async function QK(e){try{const t=await Qm(e);if(t.length===0)return[];const r=[];for(const a of t)try{const l=await Qb(a.eleveId),o=qe(je(se,"quiz_results"),we("userId","==",a.eleveId),nt("datePassage","desc")),d=(await ke(o)).docs.map(b=>b.data());let m=0,h=0,p;if(d.length>0){const b=d.reduce((_,N)=>_+(N.score||0),0);m=Math.round(b/d.length*10)/10,h=Math.round(d.filter(_=>(_.score||0)>=10).length/d.length*100),p=Os(d[0].datePassage)}let v="stable";if(d.length>=4){const b=d.slice(0,Math.ceil(d.length/2)),_=d.slice(Math.ceil(d.length/2)),N=b.reduce((C,z)=>C+(z.score||0),0)/b.length,S=_.reduce((C,z)=>C+(z.score||0),0)/_.length;N-S>1?v="hausse":S-N>1&&(v="baisse")}const x=l.lacunes.map(b=>({disciplineNom:b.disciplineNom,chapitre:b.chapitre,moyenne:b.moyenne,niveauUrgence:b.niveauUrgence}));r.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:m,totalQuiz:d.length,tauxReussite:h,scoreGlobal:l.scoreGlobal,streak:{actuel:l.streak.streakActuel,meilleur:l.streak.meilleurStreak},lacunes:x,dernierQuiz:p,tendance:v})}catch(l){console.warn(` Suivi incomplet pour lve ${a.eleveNom}:`,l),r.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return r.sort((a,l)=>l.moyenne-a.moyenne),r}catch(t){throw console.error(" Erreur stats lves groupe:",t),new Error("Impossible de charger les statistiques des lves.")}}async function VK(e,t,r){try{const l=(await Qm(e)).map(b=>b.eleveId);if(l.length===0)return null;let o=null,u="quiz_results";if(r!=="quizzes_v2"){if(r!=="quizzes"){const b=await Vt(be(se,"quizzes_v2",t));if(b.exists())o=b.data(),u="quiz_results_v2";else{const _=await Vt(be(se,"quizzes",t));_.exists()&&(o=_.data(),u="quiz_results")}}}if(!o)return null;const d=[],m=[];for(let b=0;b<l.length;b+=10)m.push(l.slice(b,b+10));for(const b of m){const _=qe(je(se,u),we("quizId","==",t),we("userId","in",b));(await ke(_)).docs.forEach(S=>d.push(S.data()))}if(d.length===0)return null;const h=u==="quiz_results_v2",p=d.map(b=>h?b.note20||(b.scoreMax>0?b.score/b.scoreMax*20:0):b.score||0),v=d.map(b=>b.tempsEcoule||0),x=[];if(h&&o.questions)for(let b=0;b<o.questions.length;b++){const _=o.questions[b];let N=0,S=0;for(const w of d){const E=w.detailsParQuestion?.find(O=>O.questionId===_.id);E&&(S++,E.isCorrect||N++)}const C=S>0?Math.round(N/S*100):0,z=_.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${b+1}`;x.push({questionIndex:b,questionTexte:z,tauxEchec:C,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let b=0;b<o.questions.length;b++){const _=o.questions[b];let N=0;const S=new Map;for(const w of d){const E=w.reponses?.[b];E!==void 0&&(S.set(E,(S.get(E)||0)+1),E!==_.reponseCorrecte&&N++)}const C=Math.round(N/d.length*100),z=Array.from(S.entries()).filter(([w])=>w!==_.reponseCorrecte).map(([w,E])=>({reponse:_.options?.[w]||`Option ${w+1}`,nombre:E})).sort((w,E)=>E.nombre-w.nombre);x.push({questionIndex:b,questionTexte:_.question,tauxEchec:C,reponseCorrecte:_.options?.[_.reponseCorrecte]||"N/A",reponsesFrequentes:z})}return x.sort((b,_)=>_.tauxEchec-b.tauxEchec),{quizId:t,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:d.length,moyenneScore:Math.round(p.reduce((b,_)=>b+_,0)/p.length*10)/10,tauxReussite:Math.round(p.filter(b=>b>=10).length/p.length*100),tempsEcouleMoyen:Math.round(v.reduce((b,_)=>b+_,0)/v.length),questionsRatees:x}}catch(a){return console.error(" Erreur analyse quiz groupe:",a),null}}async function YK(e){try{const t=[];try{const r=qe(je(se,"quizzes"),we("disciplineId","==",e),nt("createdAt","desc"));(await ke(r)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(r){console.warn(" Recherche quizzes choue (index manquant ?):",r)}try{const r=qe(je(se,"quizzes_v2"),we("disciplineId","==",e),nt("createdAt","desc"));(await ke(r)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(r){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",r)}return console.log(` ${t.length} quiz trouv(s) pour discipline ${e}`),t}catch(t){return console.error(" Erreur rcupration quiz par matire:",t),[]}}function KK(e,t){const r=[],a=new Date;for(const o of e){if(o.totalQuiz>0&&o.moyenne<WM&&r.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(u=>u.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:a}),o.dernierQuiz){const u=RK(o.dernierQuiz,a);u>=kK&&r.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a pas fait de quiz depuis ${u} jours.`,niveauUrgence:u>=14?"important":"info",dateCreation:a})}else o.totalQuiz===0&&r.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:a});o.tendance==="baisse"&&o.totalQuiz>=4&&r.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:a}),o.moyenne>=qK&&o.totalQuiz>=3&&r.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:a})}const l={critique:0,important:1,info:2};return r.sort((o,u)=>l[o.niveauUrgence]-l[u.niveauUrgence]),r}function XK(e,t){const r=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],a=e.map(o=>{const u=o.lacunes.map(d=>`${d.disciplineNom} (${d.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${u}"`,o.tendance].join(",")});return"\uFEFF"+[r.join(","),...a].join(`
`)}function WK(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),l=document.createElement("a");l.href=a,l.download=`${t}.csv`,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}const ZK=()=>{const{currentUser:e}=Ct(),[t,r]=y.useState([]),[a,l]=y.useState(!1),[o,u]=y.useState(""),[d,m]=y.useState(!0),[h,p]=y.useState(!1),[v,x]=y.useState(null),[b,_]=y.useState(null),N=y.useCallback(async()=>{if(e?.uid)try{m(!0);const C=await GK(e.uid);r(C)}catch(C){console.error("Erreur chargement groupes:",C)}finally{m(!1)}},[e?.uid]);y.useEffect(()=>{N()},[N]);const S=async C=>{if(C.preventDefault(),!(!e?.uid||!o.trim()))try{p(!0),x(null),_(null),await HK(e.uid,e.displayName||e.email||"lve",e.email||"",o),_("Tu as rejoint le groupe avec succs ! "),u(""),l(!1),await N(),setTimeout(()=>_(null),5e3)}catch(z){x(z.message||"Impossible de rejoindre le groupe.")}finally{p(!1)}};return n.jsxs("div",{className:"rejoindre-groupe-section",children:[n.jsxs("div",{className:"rejoindre-groupe-header",children:[n.jsx("h3",{children:" Mes groupes-classes"}),n.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>l(!a),children:a?" Annuler":" Rejoindre un groupe"})]}),v&&n.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",v,n.jsx("button",{onClick:()=>x(null),className:"prof-alert-close",children:""})]}),b&&n.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:b}),a&&n.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[n.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),n.jsxs("form",{onSubmit:S,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:C=>u(C.target.value.toUpperCase()),maxLength:14,disabled:h,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),n.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:h||o.length<14,children:h?" Vrification...":" Rejoindre"})]})]}),d?n.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):t.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[n.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),n.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map(C=>n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#1f2937"},children:C.nom}),n.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[C.matiereNom,"  Prof: ",C.profNom]})]}),n.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},C.id))})]})},JK=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":e>0?"#ef4444":"#d1d5db",c2=({pourcentage:e,label:t,size:r="md",showPercent:a=!0,color:l,showCheck:o=!0,className:u=""})=>{const[d,m]=y.useState(0);y.useEffect(()=>{const b=setTimeout(()=>{m(Math.min(100,Math.max(0,e)))},100);return()=>clearTimeout(b)},[e]);const p={sm:"4px",md:"8px",lg:"12px"}[r],v=l||JK(e),x=e>=100;return n.jsxs("div",{className:`progress-bar-wrapper ${u}`,children:[(t||a)&&n.jsxs("div",{className:"progress-bar-header",children:[t&&n.jsx("span",{className:"progress-bar-label",children:t}),a&&n.jsxs("span",{className:"progress-bar-percent",style:{color:v},children:[x&&o?" ":"",e,"%"]})]}),n.jsx("div",{className:"progress-bar-track",style:{height:p},children:n.jsx("div",{className:"progress-bar-fill",style:{width:`${d}%`,backgroundColor:v,height:"100%"}})})]})},eX=()=>{const e=Yt(),{currentUser:t}=Ct(),[r,a]=y.useState(null),[l,o]=y.useState([]),[u,d]=y.useState([]),[m,h]=y.useState([]),[p,v]=y.useState([]),[x,b]=y.useState(null),[_,N]=y.useState([]),[S,C]=y.useState("all"),[z,w]=y.useState(!0),[E,O]=y.useState("overview"),[P,L]=y.useState(null),[T,D]=y.useState(!1),[k,$]=y.useState(!1),B=async()=>{if(t){D(!0);try{const Q=await NK(t.uid);L(Q)}catch(Q){console.error("Erreur gnration code parent :",Q)}finally{D(!1)}}},le=()=>{P&&(navigator.clipboard.writeText(P),$(!0),setTimeout(()=>$(!1),2e3))};if(y.useEffect(()=>{(async()=>{if(t){w(!0);try{await q3(t.uid);const[ve,U,ge,ee,me,xe]=await Promise.all([C3(t.uid),A3(t.uid),E3(t.uid,20),Zf(t.uid,10),O2().catch(()=>[]),T3(t.uid)]);a(ve),o(U),d(ge),h(ee),v(me),b(xe);const pe=R3(ve,U,xe);N(pe)}catch(ve){console.error("Erreur chargement dashboard :",ve)}finally{w(!1)}}})()},[t]),z)return n.jsxs("div",{className:"sd-loading",children:[n.jsx("div",{className:"admin-spinner"}),n.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const oe=_.filter(Q=>Q.obtenu),F=_.length,q=t?.displayName||t?.email?.split("@")[0]||"lve",J=S==="all"?_:_.filter(Q=>Q.categorie===S);return n.jsxs("div",{className:"student-dashboard",children:[n.jsxs("div",{className:"sd-welcome",children:[n.jsxs("div",{className:"sd-welcome-text",children:[n.jsxs("h1",{children:["Bienvenue, ",q," "]}),n.jsx("p",{children:r&&r.totalQuizPasses>0?`Vous avez pass ${r.totalQuizPasses} quiz avec une moyenne de ${r.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),n.jsxs("div",{className:"sd-welcome-badges-row",children:[t?.isPremium&&n.jsxs("span",{className:"sd-premium-badge",children:[n.jsx(Wr,{size:14})," Premium"]}),x&&x.streakActuel>0&&n.jsxs("span",{className:"sd-streak-badge",children:[" ",x.streakActuel," jour",x.streakActuel>1?"s":""]})]})]}),n.jsxs("div",{className:"sd-stats-grid",children:[n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:n.jsx(Nn,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsx("span",{className:"sd-stat-value",children:r?.totalQuizPasses||0}),n.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:n.jsx(cv,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",style:{color:Ml(r?.moyenneGenerale||0)},children:[r?.moyenneGenerale||0,"%"]}),n.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:n.jsx(ql,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsx("span",{className:"sd-stat-value",children:x?.totalRessourcesVues||0}),n.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:n.jsx(b2,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",children:[x?.streakActuel||0," "]}),n.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:n.jsx(j2,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",children:[r?.meilleurScore||0,"%"]}),n.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),n.jsxs("div",{className:"sd-stat-card",children:[n.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:n.jsx(Ri,{size:22})}),n.jsxs("div",{className:"sd-stat-content",children:[n.jsxs("span",{className:"sd-stat-value",children:[x?.disciplinesCompletees||0,"/",x?.disciplinesCommencees||0]}),n.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),n.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[n.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),n.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),P?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[n.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:P}),n.jsx("button",{className:"sd-btn",onClick:le,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:k?"#10b981":"#f3f4f6",color:k?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:k?" Copi !":" Copier"})]}):n.jsx("button",{className:"sd-btn sd-btn-primary",onClick:B,disabled:T,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:T?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):n.jsx(n.Fragment,{children:" Gnrer mon code"})})]}),n.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:n.jsx(ZK,{})}),n.jsxs("div",{className:"sd-tabs",children:[n.jsxs("button",{className:`sd-tab ${E==="overview"?"active":""}`,onClick:()=>O("overview"),children:[n.jsx(xs,{size:16})," Vue d'ensemble"]}),n.jsxs("button",{className:`sd-tab ${E==="progression"?"active":""}`,onClick:()=>O("progression"),children:[n.jsx(fc,{size:16})," Progression"]}),n.jsxs("button",{className:`sd-tab ${E==="history"?"active":""}`,onClick:()=>O("history"),children:[n.jsx(uv,{size:16})," Historique"]}),n.jsxs("button",{className:`sd-tab ${E==="badges"?"active":""}`,onClick:()=>O("badges"),children:[n.jsx(Ri,{size:16})," Badges (",oe.length,"/",F,")"]})]}),E==="overview"&&n.jsxs("div",{className:"sd-overview",children:[u.length>1&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(fc,{size:18})," volution de vos scores"]}),n.jsx("div",{className:"sd-chart-container",children:n.jsx(GS,{width:"100%",height:280,children:n.jsxs(eK,{data:u,children:[n.jsx(Wx,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(ry,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),n.jsx(iy,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),n.jsx(WC,{formatter:Q=>[`${Q}%`,"Score"],labelFormatter:Q=>`Date : ${Q}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),n.jsx(EM,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),l.length>0&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(xs,{size:18})," Moyennes par discipline"]}),n.jsx("div",{className:"sd-chart-container",children:n.jsx(GS,{width:"100%",height:280,children:n.jsxs(rK,{data:l,layout:"vertical",children:[n.jsx(Wx,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),n.jsx(ry,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),n.jsx(iy,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),n.jsx(WC,{formatter:Q=>[`${Q}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),n.jsx(TM,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:l.map((Q,ve)=>n.jsx(Pb,{fill:Ml(Q.moyenne)},ve))})]})})})]}),p.length>0&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(gc,{size:18})," Quiz disponibles"]}),n.jsx("div",{className:"sd-quiz-grid",children:p.slice(0,6).map(Q=>{const ve=Q.isPremium&&!t?.isPremium;return n.jsxs("div",{className:`sd-quiz-card ${ve?"locked":""}`,onClick:()=>!ve&&e(`/quiz/${Q.id}`),children:[Q.isPremium&&n.jsxs("span",{className:"sd-quiz-badge-premium",children:[ve?n.jsx(ax,{size:10}):n.jsx(Wr,{size:10})," Premium"]}),n.jsx("h4",{className:"sd-quiz-title",children:Q.titre}),n.jsxs("div",{className:"sd-quiz-meta",children:[n.jsxs("span",{children:[n.jsx(Nn,{size:12})," ",Q.questions.length," questions"]}),n.jsxs("span",{children:[n.jsx($l,{size:12})," ",Q.duree," min"]})]}),!ve&&n.jsxs("button",{className:"sd-quiz-play-btn",children:[n.jsx(gc,{size:14})," Commencer"]}),ve&&n.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:U=>{U.stopPropagation(),e("/premium")},children:[n.jsx(ax,{size:14})," Dbloquer"]})]},Q.id)})})]}),r&&r.totalQuizPasses===0&&(!x||x.totalRessourcesVues===0)&&n.jsxs("div",{className:"sd-empty-state",children:[n.jsx(cv,{size:48}),n.jsx("h3",{children:"Commencez votre parcours !"}),n.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),p.length>0&&n.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e(`/quiz/${p[0].id}`),children:[n.jsx(gc,{size:18})," Passer un quiz"]})]})]}),E==="progression"&&n.jsxs("div",{className:"sd-progression",children:[n.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(fc,{size:18})," Avancement global"]}),n.jsx(c2,{pourcentage:x?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),n.jsxs("div",{className:"sd-prog-stats-row",children:[n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsx("span",{className:"sd-prog-stat-number",children:x?.totalRessourcesVues||0}),n.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsx("span",{className:"sd-prog-stat-number",children:x?.totalQuizReussis||0}),n.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsx("span",{className:"sd-prog-stat-number",children:x?.disciplinesCommencees||0}),n.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),n.jsxs("div",{className:"sd-prog-stat-item",children:[n.jsxs("span",{className:"sd-prog-stat-number",children:[" ",x?.streakActuel||0]}),n.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",x?.meilleurStreak||0,")"]})]})]})]}),x&&x.parDiscipline.length>0?n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(xs,{size:18})," Par discipline"]}),n.jsx("div",{className:"sd-prog-disciplines",children:x.parDiscipline.map(Q=>n.jsxs("div",{className:"sd-prog-disc-card",children:[n.jsxs("div",{className:"sd-prog-disc-header",children:[n.jsx("span",{className:"sd-prog-disc-name",children:Q.disciplineNom}),Q.pourcentage>=100&&n.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),n.jsx(c2,{pourcentage:Q.pourcentage,size:"md",showPercent:!0}),n.jsxs("div",{className:"sd-prog-disc-details",children:[n.jsxs("span",{children:[n.jsx(ql,{size:12})," ",Q.ressourcesVues.length,"/",Q.totalRessources," ressources"]}),n.jsxs("span",{children:[n.jsx(Dt,{size:12})," ",Q.quizReussis.length,"/",Q.totalQuiz," quiz russis"]})]})]},Q.disciplineId))})]}):n.jsxs("div",{className:"sd-empty-state",children:[n.jsx(ql,{size:48}),n.jsx("h3",{children:"Aucune progression enregistre"}),n.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),l.length>0&&n.jsxs("div",{className:"sd-chart-card",children:[n.jsxs("h3",{className:"sd-section-title",children:[n.jsx(cv,{size:18})," Performance quiz par discipline"]}),n.jsx("div",{className:"sd-disc-list",children:l.map(Q=>n.jsxs("div",{className:"sd-disc-card",children:[n.jsxs("div",{className:"sd-disc-header",children:[n.jsx("span",{className:"sd-disc-name",children:Q.disciplineNom}),n.jsxs("span",{className:"sd-disc-tendance",children:[Q.tendance==="up"&&n.jsx(fc,{size:16,className:"tendance-up"}),Q.tendance==="down"&&n.jsx(aq,{size:16,className:"tendance-down"}),Q.tendance==="stable"&&n.jsx(iq,{size:16,className:"tendance-stable"})]})]}),n.jsxs("div",{className:"sd-disc-stats",children:[n.jsxs("div",{className:"sd-disc-stat",children:[n.jsxs("span",{className:"sd-disc-stat-value",style:{color:Ml(Q.moyenne)},children:[Q.moyenne,"%"]}),n.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),n.jsxs("div",{className:"sd-disc-stat",children:[n.jsx("span",{className:"sd-disc-stat-value",children:Q.nombreQuiz}),n.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),n.jsxs("div",{className:"sd-disc-stat",children:[n.jsxs("span",{className:"sd-disc-stat-value",children:[Q.meilleurScore,"%"]}),n.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),n.jsxs("div",{className:"sd-disc-stat",children:[n.jsxs("span",{className:"sd-disc-stat-value",children:[Q.quizReussis,"/",Q.nombreQuiz]}),n.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),n.jsx("div",{className:"sd-disc-bar",children:n.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${Q.moyenne}%`,background:Ml(Q.moyenne)}})})]},Q.disciplineId))})]})]}),E==="history"&&n.jsx("div",{className:"sd-history",children:m.length===0?n.jsxs("div",{className:"sd-empty-state",children:[n.jsx(uv,{size:48}),n.jsx("h3",{children:"Aucun quiz pass"}),n.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):n.jsx("div",{className:"sd-history-list",children:m.map(Q=>{const ve=Q.datePassage?.toDate?Q.datePassage.toDate():new Date(Q.datePassage);return n.jsxs("div",{className:`sd-history-item ${Q.reussi?"success":"fail"}`,children:[n.jsx("div",{className:`sd-history-icon ${Q.reussi?"success":"fail"}`,children:Q.reussi?n.jsx(Dt,{size:20}):n.jsx(ix,{size:20})}),n.jsxs("div",{className:"sd-history-content",children:[n.jsxs("div",{className:"sd-history-top",children:[n.jsx("span",{className:"sd-history-title",children:Q.quizTitre}),n.jsx("span",{className:"sd-history-discipline",children:Q.disciplineNom})]}),n.jsxs("div",{className:"sd-history-meta",children:[n.jsxs("span",{children:[n.jsx(uv,{size:12}),ve.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),n.jsxs("span",{children:[n.jsx($l,{size:12})," ",k2(Q.tempsEcoule)]}),n.jsxs("span",{children:[n.jsx(Dt,{size:12})," ",Q.bonnesReponses,"/",Q.nombreQuestions]})]})]}),n.jsxs("div",{className:"sd-history-score",style:{color:Ml(Q.pourcentage)},children:[n.jsxs("span",{className:"sd-history-score-value",children:[Q.pourcentage,"%"]}),n.jsx("span",{className:"sd-history-score-label",children:q2(Q.pourcentage)})]})]},Q.id)})})}),E==="badges"&&n.jsxs("div",{className:"sd-badges",children:[n.jsxs("div",{className:"sd-badges-summary",children:[n.jsxs("div",{className:"sd-badges-circle",children:[n.jsx("span",{className:"sd-badges-count",children:oe.length}),n.jsxs("span",{className:"sd-badges-total",children:["/ ",F]})]}),n.jsx("p",{children:"badges obtenus"}),n.jsx("div",{className:"sd-badges-progress",children:n.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${oe.length/F*100}%`}})})]}),n.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(Q=>n.jsx("button",{className:`sd-badge-filter-btn ${S===Q.key?"active":""}`,onClick:()=>C(Q.key),children:Q.label},Q.key))}),n.jsx("div",{className:"sd-badges-grid",children:J.map(Q=>n.jsxs("div",{className:`sd-badge-card ${Q.obtenu?"obtained":"locked"}`,children:[n.jsx("span",{className:"sd-badge-icon",children:Q.icone}),n.jsx("h4",{className:"sd-badge-name",children:Q.nom}),n.jsx("p",{className:"sd-badge-description",children:Q.description}),n.jsx("span",{className:"sd-badge-condition",children:Q.condition}),Q.obtenu&&n.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),n.jsx("span",{className:"sd-badge-category",children:Q.categorie})]},Q.id))}),J.length===0&&n.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[n.jsx(cy,{size:36}),n.jsx("h3",{children:"Aucun badge dans cette catgorie"}),n.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},tX=()=>{const{currentUser:e}=Ct(),t=Yt(),[r,a]=y.useState(null),[l,o]=y.useState(!0),[u,d]=y.useState(null),m=["L","M","M","J","V","S","D"],h=y.useCallback(async()=>{if(e?.uid)try{o(!0),d(null);const w=await Qb(e.uid);a(w)}catch(w){console.error("Erreur chargement suivi:",w),d("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[e?.uid]);y.useEffect(()=>{h()},[h]);const p=(()=>{const w=new Date().getDay();return w===0?6:w-1})();if(l)return n.jsx("div",{className:"suivi-page",children:n.jsx("div",{className:"suivi-container",children:n.jsxs("div",{className:"suivi-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(u)return n.jsx("div",{className:"suivi-page",children:n.jsx("div",{className:"suivi-container",children:n.jsxs("div",{className:"suivi-error",children:[n.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),n.jsx("p",{className:"suivi-error-text",children:u}),n.jsx("button",{className:"suivi-btn-retry",onClick:h,children:" Ressayer"})]})})});if(!r)return null;const{lacunes:v,recommandations:x,streak:b,objectifs:_,scoreGlobal:N}=r,S=2*Math.PI*40,C=S-N/100*S,z=N>=60?"#10b981":N>=30?"#f59e0b":"#ef4444";return n.jsx("div",{className:"suivi-page",children:n.jsxs("div",{className:"suivi-container",children:[n.jsx("div",{className:"suivi-header",children:n.jsxs("div",{className:"suivi-header-content",children:[n.jsxs("div",{children:[n.jsx("h1",{children:" Mes points  amliorer"}),n.jsx("p",{className:"suivi-motivation",children:hK(N)})]}),n.jsxs("div",{className:"score-global-circle",children:[n.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[n.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),n.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:z,strokeDasharray:S,strokeDashoffset:C}),n.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:N})]}),n.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),n.jsxs("div",{className:"streak-card",children:[n.jsxs("div",{className:"streak-header",children:[n.jsx("span",{className:"streak-flamme",children:b.streakActuel>0?"":""}),n.jsxs("div",{children:[n.jsx("div",{className:"streak-nombre",children:b.streakActuel}),n.jsx("div",{className:"streak-label",children:b.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),n.jsx("div",{className:"streak-semaine",children:m.map((w,E)=>n.jsxs("div",{className:"streak-jour",children:[n.jsx("span",{className:"streak-jour-label",children:w}),n.jsx("div",{className:`streak-jour-indicateur ${b.semaineCourante[E]?"actif":"inactif"} ${E===p?"aujourd-hui":""}`,children:b.semaineCourante[E]?"":""})]},E))}),n.jsxs("div",{className:"streak-stats",children:[n.jsxs("div",{className:"streak-stat",children:[n.jsx("span",{className:"streak-stat-icon",children:""}),n.jsx("span",{className:"streak-stat-value",children:b.meilleurStreak}),n.jsx("span",{className:"streak-stat-label",children:"record"})]}),n.jsxs("div",{className:"streak-stat",children:[n.jsx("span",{className:"streak-stat-icon",children:""}),n.jsx("span",{className:"streak-stat-value",children:b.totalJoursActifs}),n.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),b.dernierJourActif&&n.jsxs("div",{className:"streak-stat",children:[n.jsx("span",{className:"streak-stat-icon",children:""}),n.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(b.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),n.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",n.jsx("span",{className:"suivi-section-badge",children:_.length})]}),_.length>0?n.jsx("div",{className:"objectifs-grid",children:_.map(w=>{const E=pK(w);return n.jsxs("div",{className:`objectif-card ${w.statut==="atteint"?"atteint":""}`,children:[n.jsxs("div",{className:"objectif-header",children:[n.jsx("span",{className:"objectif-titre",children:w.titre}),w.recompense&&n.jsx("span",{className:"objectif-recompense",children:w.recompense})]}),n.jsx("p",{className:"objectif-description",children:w.description}),n.jsxs("div",{className:"objectif-progress",children:[n.jsxs("div",{className:"objectif-progress-labels",children:[n.jsxs("span",{className:"objectif-progress-value",children:[w.progression," / ",w.cible]}),n.jsxs("span",{className:"objectif-progress-cible",children:[E,"%"]})]}),n.jsx("div",{className:"objectif-progress-track",children:n.jsx("div",{className:`objectif-progress-fill ${w.statut==="atteint"?"atteint":""}`,style:{width:`${E}%`}})})]}),n.jsx("p",{className:`objectif-statut ${w.statut}`,children:w.statut==="atteint"?" Objectif atteint !":w.statut==="en_cours"?" En cours...":" Non commenc"})]},w.id)})}):n.jsxs("div",{className:"suivi-empty",children:[n.jsx("div",{className:"suivi-empty-icon",children:""}),n.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),n.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),n.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",v.length>0&&n.jsx("span",{className:"suivi-section-badge",children:v.length})]}),v.length>0?n.jsx("div",{className:"lacunes-grid",children:v.map(w=>n.jsxs("div",{className:`lacune-card ${w.niveauUrgence}`,children:[n.jsxs("div",{className:"lacune-card-header",children:[n.jsx("span",{className:"lacune-discipline",children:w.disciplineNom}),n.jsx("span",{className:`lacune-badge ${w.niveauUrgence}`,children:QM(w.niveauUrgence)})]}),n.jsxs("div",{className:"lacune-score-bar",children:[n.jsxs("div",{className:"lacune-score-labels",children:[n.jsxs("span",{className:"lacune-score-value",style:{color:Vf(w.niveauUrgence)},children:[w.moyenne,"/20"]}),n.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),n.jsx("div",{className:"lacune-progress-track",children:n.jsx("div",{className:`lacune-progress-fill ${w.niveauUrgence}`,style:{width:`${w.moyenne/20*100}%`}})})]}),n.jsxs("div",{className:"lacune-details",children:[n.jsxs("span",{className:"lacune-detail-tag",children:[VM(w.tendance)," ",w.tendance]}),n.jsxs("span",{className:"lacune-detail-tag",children:[" ",w.nombreQuiz," quiz"]}),n.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",w.scoreDetails.dernierScore,"/20"]})]})]},w.id))}):n.jsxs("div",{className:"suivi-empty",children:[n.jsx("div",{className:"suivi-empty-icon",children:""}),n.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),n.jsx("p",{className:"suivi-empty-text",children:N>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),n.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),x.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",n.jsx("span",{className:"suivi-section-badge",children:x.length})]}),n.jsx("div",{className:"recommandations-list",children:x.map(w=>n.jsxs("div",{className:"recommandation-card",children:[n.jsx("div",{className:"recommandation-priorite",children:w.priorite}),n.jsxs("div",{className:"recommandation-content",children:[n.jsx("p",{className:"recommandation-titre",children:w.titre}),n.jsx("p",{className:"recommandation-description",children:w.description}),n.jsx("span",{className:"recommandation-discipline-tag",children:w.disciplineNom})]})]},w.id))})]}),n.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:n.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),children:" Passer un quiz maintenant"})})]})})},rX=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1,l=[];for(let o=-1;o<=3;o++){const u=a+o;l.push(`${u}-${u+1}`)}return l},u2=rX(),cc=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1;return`${a}-${a+1}`},d2=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],nX=({onSelectGroupe:e})=>{const{currentUser:t}=Ct(),[r,a]=y.useState([]),[l,o]=y.useState(new Map),[u,d]=y.useState([]),[m,h]=y.useState(!0),[p,v]=y.useState(null),[x,b]=y.useState(!1),[_,N]=y.useState(!1),[S,C]=y.useState(null),[z,w]=y.useState(null),[E,O]=y.useState(null),[P,L]=y.useState(!1),[T,D]=y.useState(null),[k,$]=y.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()}),[B,le]=y.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()}),[oe,F]=y.useState("actif");y.useEffect(()=>{(async()=>{try{const I=await $i.getAll();d(I.map(ae=>({id:ae.id,nom:ae.nom,classe:ae.classe||""})))}catch(I){console.warn(" Impossible de charger les disciplines:",I)}})()},[]);const q=y.useCallback(async()=>{if(t?.uid)try{h(!0),v(null);const Y=await JM(t.uid);a(Y);const I=new Map;for(const ae of Y)if(ae.statut==="actif")try{const V=await Vb(ae.id);I.set(ae.id,V)}catch{console.warn(`Stats indisponibles pour ${ae.nom}`)}o(I)}catch(Y){console.error("Erreur chargement groupes:",Y),v("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{h(!1)}},[t?.uid]);y.useEffect(()=>{q()},[q]);const J=(Y,I=!1)=>{const ae=u.find(ye=>ye.id===Y),V=ae?`${ae.nom}${ae.classe?` (${ae.classe})`:""}`:"";I?le(ye=>({...ye,matiereId:Y,matiereNom:V})):$(ye=>({...ye,matiereId:Y,matiereNom:V}))},Q=async Y=>{if(Y.preventDefault(),!(!t?.uid||!k.nom.trim()||!k.matiereId))try{N(!0),await LK(t.uid,t.displayName||t.email||"Professeur",k),$({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()}),b(!1),D("Groupe cr avec succs !"),setTimeout(()=>D(null),3e3),await q()}catch(I){v(I.message||"Erreur lors de la cration du groupe.")}finally{N(!1)}},ve=Y=>{O(Y),le({nom:Y.nom,description:Y.description||"",matiereId:Y.matiereId,matiereNom:Y.matiereNom,classeNiveau:Y.classeNiveau,anneeScolaire:Y.anneeScolaire}),b(!1)},U=()=>{O(null),le({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:cc()})},ge=async Y=>{if(Y.preventDefault(),!(!E||!B.nom.trim()||!B.matiereId))try{L(!0),await eT(E.id,{nom:B.nom.trim(),description:B.description?.trim()||"",matiereId:B.matiereId,matiereNom:B.matiereNom,classeNiveau:B.classeNiveau,anneeScolaire:B.anneeScolaire}),O(null),D("Groupe modifi avec succs !"),setTimeout(()=>D(null),3e3),await q()}catch(I){v(I.message||"Erreur lors de la modification du groupe.")}finally{L(!1)}},ee=async Y=>{try{await navigator.clipboard.writeText(Y),C(Y),setTimeout(()=>C(null),2e3)}catch{const I=document.createElement("textarea");I.value=Y,document.body.appendChild(I),I.select(),document.execCommand("copy"),document.body.removeChild(I),C(Y),setTimeout(()=>C(null),2e3)}},me=async Y=>{try{await $K(Y),w(null),await q()}catch(I){v(I.message)}},xe=async Y=>{try{await BK(Y),await q()}catch(I){v(I.message)}},pe=async Y=>{try{await UK(Y),await q()}catch(I){v(I.message)}},H=(Y,I)=>{$(ae=>({...ae,[Y]:I}))},de=(Y,I)=>{le(ae=>({...ae,[Y]:I}))},Ee=r.filter(Y=>oe==="tous"?!0:Y.statut===oe),ne=(Y,I,ae)=>n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:Y,children:"Discipline / Matire *"}),n.jsxs("select",{id:Y,value:I,onChange:V=>ae(V.target.value),className:"prof-select",required:!0,children:[n.jsx("option",{value:"",children:" Slectionner une discipline "}),u.map(V=>n.jsxs("option",{value:V.id,children:[V.nom,V.classe?` (${V.classe})`:""]},V.id))]}),u.length===0&&n.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return m?n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):n.jsxs("div",{className:"groupe-manager",children:[n.jsxs("div",{className:"groupe-manager-header",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),n.jsxs("p",{className:"groupe-manager-subtitle",children:[r.length," groupe",r.length!==1?"s":"","  Anne ",cc()]})]}),n.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{b(!x),E&&U()},children:x?" Annuler":" Nouveau groupe"})]}),p&&n.jsxs("div",{className:"prof-alert prof-alert-error",children:[n.jsx("span",{children:""})," ",p,n.jsx("button",{onClick:()=>v(null),className:"prof-alert-close",children:""})]}),T&&n.jsxs("div",{className:"prof-alert prof-alert-success",children:[n.jsx("span",{children:""})," ",T,n.jsx("button",{onClick:()=>D(null),className:"prof-alert-close",children:""})]}),x&&n.jsxs("div",{className:"groupe-form-container",children:[n.jsx("h3",{children:"Crer un nouveau groupe-classe"}),n.jsxs("form",{onSubmit:Q,className:"groupe-form",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),n.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:k.nom,onChange:Y=>H("nom",Y.target.value),required:!0,className:"prof-input",maxLength:60})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),n.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:k.description||"",onChange:Y=>H("description",Y.target.value),className:"prof-input",maxLength:120})]}),n.jsxs("div",{className:"prof-form-row",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),n.jsx("select",{id:"groupe-niveau",value:k.classeNiveau,onChange:Y=>H("classeNiveau",Y.target.value),className:"prof-select",children:d2.map(Y=>n.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),n.jsx("select",{id:"groupe-annee",value:k.anneeScolaire,onChange:Y=>H("anneeScolaire",Y.target.value),className:"prof-select",children:u2.map(Y=>n.jsx("option",{value:Y,children:Y},Y))})]})]}),ne("groupe-discipline",k.matiereId,Y=>J(Y,!1)),n.jsx("div",{className:"prof-form-actions",children:n.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:_||!k.nom.trim()||!k.matiereId,children:_?" Cration...":" Crer le groupe"})})]})]}),E&&n.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[n.jsxs("h3",{children:[" Modifier le groupe : ",E.nom]}),n.jsxs("form",{onSubmit:ge,className:"groupe-form",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),n.jsx("input",{id:"edit-groupe-nom",type:"text",value:B.nom,onChange:Y=>de("nom",Y.target.value),required:!0,className:"prof-input",maxLength:60})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),n.jsx("input",{id:"edit-groupe-desc",type:"text",value:B.description||"",onChange:Y=>de("description",Y.target.value),className:"prof-input",maxLength:120})]}),n.jsxs("div",{className:"prof-form-row",children:[n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),n.jsx("select",{id:"edit-groupe-niveau",value:B.classeNiveau,onChange:Y=>de("classeNiveau",Y.target.value),className:"prof-select",children:d2.map(Y=>n.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),n.jsxs("div",{className:"prof-form-group",children:[n.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),n.jsx("select",{id:"edit-groupe-annee",value:B.anneeScolaire,onChange:Y=>de("anneeScolaire",Y.target.value),className:"prof-select",children:u2.map(Y=>n.jsx("option",{value:Y,children:Y},Y))})]})]}),ne("edit-groupe-discipline",B.matiereId,Y=>J(Y,!0)),n.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[n.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:P||!B.nom.trim()||!B.matiereId,children:P?" Enregistrement...":" Enregistrer"}),n.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:U,disabled:P,children:" Annuler"})]})]})]}),n.jsxs("div",{className:"groupe-filtres",children:[n.jsxs("button",{className:`prof-filtre-btn ${oe==="actif"?"active":""}`,onClick:()=>F("actif"),children:["Actifs (",r.filter(Y=>Y.statut==="actif").length,")"]}),n.jsxs("button",{className:`prof-filtre-btn ${oe==="archive"?"active":""}`,onClick:()=>F("archive"),children:["Archivs (",r.filter(Y=>Y.statut==="archive").length,")"]}),n.jsxs("button",{className:`prof-filtre-btn ${oe==="tous"?"active":""}`,onClick:()=>F("tous"),children:["Tous (",r.length,")"]})]}),Ee.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:oe==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),n.jsx("p",{children:oe==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),oe!=="archive"&&n.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>b(!0),children:" Crer mon premier groupe"})]}):n.jsx("div",{className:"groupe-grid",children:Ee.map(Y=>{const I=l.get(Y.id),ae=E?.id===Y.id;return n.jsxs("div",{className:`groupe-card ${Y.statut==="archive"?"groupe-card-archive":""} ${ae?"groupe-card-editing":""}`,children:[n.jsxs("div",{className:"groupe-card-header",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"groupe-card-titre",children:Y.nom}),n.jsx("span",{className:"groupe-card-matiere",children:Y.matiereNom})]}),n.jsx("span",{className:`groupe-badge groupe-badge-${Y.statut}`,children:Y.statut==="actif"?" Actif":" Archiv"})]}),Y.description&&n.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:Y.description}),n.jsxs("div",{className:"groupe-card-infos",children:[n.jsxs("span",{children:[" ",Y.classeNiveau]}),n.jsxs("span",{children:[" ",Y.anneeScolaire]}),n.jsxs("span",{children:[" ",Y.nombreInscrits," lve",Y.nombreInscrits!==1?"s":""]})]}),n.jsxs("div",{className:"groupe-card-code",children:[n.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),n.jsxs("div",{className:"groupe-code-box",children:[n.jsx("code",{className:"groupe-code-value",children:Y.codeInvitation}),n.jsx("button",{className:"prof-btn-icon",onClick:V=>{V.stopPropagation(),ee(Y.codeInvitation)},title:"Copier le code",children:S===Y.codeInvitation?"":""}),Y.statut==="actif"&&n.jsx("button",{className:"prof-btn-icon",onClick:V=>{V.stopPropagation(),pe(Y.id)},title:"Rgnrer le code",children:""})]})]}),I&&I.nombreEleves>0&&n.jsxs("div",{className:"groupe-card-stats",children:[n.jsxs("div",{className:"groupe-stat-item",children:[n.jsx("span",{className:"groupe-stat-value",children:I.moyenneClasse}),n.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),n.jsxs("div",{className:"groupe-stat-item",children:[n.jsxs("span",{className:"groupe-stat-value",children:[I.tauxReussite,"%"]}),n.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),n.jsxs("div",{className:"groupe-stat-item",children:[n.jsx("span",{className:"groupe-stat-value",children:I.elevesEnDifficulte}),n.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),n.jsxs("div",{className:"groupe-card-actions",children:[Y.statut==="actif"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>e(Y),children:" Voir dtails"}),n.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>ve(Y),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),n.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>xe(Y.id),children:" Archiver"})]}),z===Y.id?n.jsxs("div",{className:"groupe-confirm-suppression",children:[n.jsx("span",{children:"Confirmer ?"}),n.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>me(Y.id),children:"Oui, supprimer"}),n.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>w(null),children:"Non"})]}):n.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>w(Y.id),children:" Supprimer"})]})]},Y.id)})})]})},aX=({groupe:e,onRetour:t})=>{const[r,a]=y.useState(null),[l,o]=y.useState([]),[u,d]=y.useState([]),[m,h]=y.useState([]),[p,v]=y.useState(null),[x,b]=y.useState(!0),[_,N]=y.useState(null),[S,C]=y.useState("apercu"),[z,w]=y.useState("moyenne_desc"),[E,O]=y.useState(null),[P,L]=y.useState(null),[T,D]=y.useState(!1),[k,$]=y.useState(null),B=y.useCallback(async()=>{try{b(!0),N(null);const[U,ge,ee]=await Promise.all([Vb(e.id),QK(e.id),YK(e.matiereId)]);a(U),o(ge),h(ee);const me=KK(ge,e.nom);d(me)}catch(U){console.error("Erreur chargement dtail groupe:",U),N("Impossible de charger les donnes du groupe.")}finally{b(!1)}},[e.id,e.matiereId,e.nom]);y.useEffect(()=>{B()},[B]);const le=async U=>{try{D(!0),L(U);const ge=await VK(e.id,U);v(ge)}catch(ge){console.error("Erreur analyse quiz:",ge)}finally{D(!1)}},oe=()=>{const U=XK(l,e.nom),ge=`PedaClic_${e.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;WK(U,ge)},F=async U=>{try{$(U);const ee=(await Qm(e.id)).find(me=>me.eleveId===U);ee&&(await FK(ee.id,e.id),await B())}catch(ge){N(ge.message)}finally{$(null)}},q=[...l].sort((U,ge)=>{switch(z){case"moyenne_desc":return ge.moyenne-U.moyenne;case"moyenne_asc":return U.moyenne-ge.moyenne;case"nom":return U.eleveNom.localeCompare(ge.eleveNom);case"streak":return ge.streak.actuel-U.streak.actuel;case"quiz_count":return ge.totalQuiz-U.totalQuiz;default:return 0}}),J=U=>U>=16?"prof-note-excellent":U>=12?"prof-note-bien":U>=10?"prof-note-passable":U>=8?"prof-note-insuffisant":"prof-note-critique",Q=U=>{switch(U){case"hausse":return"";case"baisse":return"";default:return""}},ve=U=>{switch(U){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return x?n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsxs("p",{children:['Chargement des donnes de "',e.nom,'"...']})]}):n.jsxs("div",{className:"groupe-detail",children:[n.jsxs("div",{className:"groupe-detail-header",children:[n.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:t,children:" Retour aux groupes"}),n.jsxs("div",{className:"groupe-detail-titre-section",children:[n.jsx("h2",{className:"groupe-detail-titre",children:e.nom}),n.jsxs("p",{className:"groupe-detail-subtitle",children:[e.matiereNom,"  ",e.classeNiveau,"  ",e.anneeScolaire]})]}),n.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:oe,children:" Export CSV"})]}),_&&n.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",_,n.jsx("button",{onClick:()=>N(null),className:"prof-alert-close",children:""})]}),n.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:l.length},{id:"quiz",label:" Quiz",count:m.length},{id:"alertes",label:" Alertes",count:u.length}].map(U=>n.jsxs("button",{className:`groupe-onglet ${S===U.id?"active":""}`,onClick:()=>C(U.id),children:[U.label,U.count!==null&&U.count>0&&n.jsx("span",{className:"groupe-onglet-badge",children:U.count})]},U.id))}),S==="apercu"&&r&&n.jsxs("div",{className:"groupe-apercu",children:[n.jsxs("div",{className:"groupe-stats-grid",children:[n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsxs("span",{className:`groupe-stat-card-value ${J(r.moyenneClasse)}`,children:[r.moyenneClasse,"/20"]}),n.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsxs("span",{className:"groupe-stat-card-value",children:[r.tauxReussite,"%"]}),n.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsx("span",{className:"groupe-stat-card-value",children:r.nombreEleves}),n.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsx("span",{className:"groupe-stat-card-value",children:r.totalQuizPasses}),n.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsxs("span",{className:"groupe-stat-card-value",children:[r.tauxParticipation,"%"]}),n.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),n.jsxs("div",{className:"groupe-stat-card",children:[n.jsx("div",{className:"groupe-stat-card-icon",children:""}),n.jsxs("div",{className:"groupe-stat-card-content",children:[n.jsx("span",{className:`groupe-stat-card-value ${r.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:r.elevesEnDifficulte}),n.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),n.jsx("div",{className:"groupe-apercu-notes",children:n.jsxs("div",{className:"groupe-note-range",children:[n.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),n.jsxs("span",{className:"prof-note-critique",children:[r.pireNote,"/20"]}),n.jsx("div",{className:"groupe-note-barre",children:n.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${r.pireNote/20*100}%`,width:`${(r.meilleureNote-r.pireNote)/20*100}%`}})}),n.jsxs("span",{className:"prof-note-excellent",children:[r.meilleureNote,"/20"]})]})}),l.length>=3&&n.jsxs("div",{className:"groupe-apercu-classement",children:[n.jsxs("div",{className:"groupe-classement-section",children:[n.jsx("h4",{children:" Top 3"}),l.slice(0,3).map((U,ge)=>n.jsxs("div",{className:"groupe-classement-item",children:[n.jsx("span",{className:"groupe-classement-rang",children:ge===0?"":ge===1?"":""}),n.jsx("span",{className:"groupe-classement-nom",children:U.eleveNom}),n.jsxs("span",{className:`groupe-classement-note ${J(U.moyenne)}`,children:[U.moyenne,"/20"]})]},U.eleveId))]}),n.jsxs("div",{className:"groupe-classement-section",children:[n.jsx("h4",{children:"  surveiller"}),l.filter(U=>U.moyenne<8&&U.totalQuiz>0).slice(0,3).map(U=>n.jsxs("div",{className:"groupe-classement-item",children:[n.jsx("span",{className:"groupe-classement-rang",children:""}),n.jsx("span",{className:"groupe-classement-nom",children:U.eleveNom}),n.jsxs("span",{className:`groupe-classement-note ${J(U.moyenne)}`,children:[U.moyenne,"/20"]})]},U.eleveId)),l.filter(U=>U.moyenne<8&&U.totalQuiz>0).length===0&&n.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),S==="eleves"&&n.jsxs("div",{className:"groupe-eleves",children:[n.jsxs("div",{className:"groupe-eleves-toolbar",children:[n.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),n.jsxs("select",{id:"tri-eleves",value:z,onChange:U=>w(U.target.value),className:"prof-select prof-select-sm",children:[n.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),n.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),n.jsx("option",{value:"nom",children:"Nom (A-Z)"}),n.jsx("option",{value:"streak",children:"Streak ()"}),n.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),n.jsxs("span",{className:"groupe-eleves-count",children:[l.length," lve",l.length!==1?"s":""]})]}),l.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Aucun lve inscrit"}),n.jsxs("p",{children:["Partagez le code ",n.jsx("strong",{children:e.codeInvitation}),"  vos lves."]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"groupe-eleves-table-wrapper",children:n.jsxs("table",{className:"groupe-eleves-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"lve"}),n.jsx("th",{children:"Moyenne"}),n.jsx("th",{children:"Quiz"}),n.jsx("th",{children:"Russite"}),n.jsx("th",{children:"Streak"}),n.jsx("th",{children:"Tendance"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:q.map((U,ge)=>n.jsxs("tr",{className:`${E===U.eleveId?"groupe-eleve-row-active":""}`,children:[n.jsx("td",{className:"groupe-eleve-rang",children:ge+1}),n.jsx("td",{className:"groupe-eleve-nom-cell",children:n.jsxs("div",{children:[n.jsx("strong",{children:U.eleveNom}),n.jsx("span",{className:"groupe-eleve-email",children:U.eleveEmail})]})}),n.jsx("td",{children:n.jsxs("span",{className:`groupe-note-badge ${J(U.moyenne)}`,children:[U.moyenne,"/20"]})}),n.jsx("td",{children:U.totalQuiz}),n.jsxs("td",{children:[U.tauxReussite,"%"]}),n.jsx("td",{children:n.jsxs("span",{className:"groupe-streak",children:[" ",U.streak.actuel,"j"]})}),n.jsxs("td",{children:[Q(U.tendance)," ",U.tendance]}),n.jsxs("td",{className:"groupe-eleve-actions",children:[n.jsx("button",{className:"prof-btn-icon",onClick:()=>O(E===U.eleveId?null:U.eleveId),title:"Voir dtails",children:E===U.eleveId?"":""}),n.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>F(U.eleveId),disabled:k===U.eleveId,title:"Retirer du groupe",children:k===U.eleveId?"":""})]})]},U.eleveId))})]})}),E&&(()=>{const U=l.find(ge=>ge.eleveId===E);return U?n.jsxs("div",{className:"groupe-eleve-detail",children:[n.jsxs("div",{className:"groupe-eleve-detail-header",children:[n.jsxs("h3",{children:[" Dtail  ",U.eleveNom]}),n.jsx("button",{className:"prof-btn-icon",onClick:()=>O(null),children:""})]}),n.jsxs("div",{className:"groupe-eleve-detail-grid",children:[n.jsxs("div",{className:"groupe-eleve-detail-card",children:[n.jsx("h4",{children:"Score global"}),n.jsx("div",{className:"groupe-eleve-score-circle",children:n.jsxs("span",{className:J(U.scoreGlobal/5),children:[U.scoreGlobal,"/100"]})})]}),n.jsxs("div",{className:"groupe-eleve-detail-card",children:[n.jsx("h4",{children:" Streak"}),n.jsxs("p",{children:["Actuel : ",n.jsxs("strong",{children:[U.streak.actuel," jour",U.streak.actuel!==1?"s":""]})]}),n.jsxs("p",{children:["Meilleur : ",U.streak.meilleur," jours"]})]}),n.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[n.jsx("h4",{children:" Lacunes dtectes"}),U.lacunes.length===0?n.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):n.jsx("ul",{className:"groupe-lacunes-liste",children:U.lacunes.map((ge,ee)=>n.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${ge.niveauUrgence}`,children:[n.jsxs("span",{className:"groupe-lacune-nom",children:[ge.disciplineNom,ge.chapitre&&`  ${ge.chapitre}`]}),n.jsxs("span",{className:"groupe-lacune-moyenne",children:[ge.moyenne,"/20"]}),n.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${ge.niveauUrgence}`,children:ge.niveauUrgence})]},ee))})]})]})]}):null})()]})]}),S==="quiz"&&n.jsxs("div",{className:"groupe-quiz",children:[n.jsxs("div",{className:"groupe-quiz-selector",children:[n.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),n.jsxs("select",{id:"select-quiz",value:P||"",onChange:U=>{U.target.value&&le(U.target.value)},className:"prof-select",children:[n.jsx("option",{value:"",children:" Choisir un quiz "}),m.map(U=>n.jsx("option",{value:U.id,children:U.titre},U.id))]})]}),!P&&n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Analyse par quiz"}),n.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),T&&n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Analyse en cours..."})]}),p&&!T&&n.jsxs("div",{className:"groupe-quiz-resultats",children:[n.jsxs("div",{className:"groupe-quiz-stats-header",children:[n.jsx("h3",{children:p.quizTitre}),n.jsxs("div",{className:"groupe-quiz-stats-grid",children:[n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsx("span",{className:"groupe-stat-mini-value",children:p.totalPassages}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsxs("span",{className:`groupe-stat-mini-value ${J(p.moyenneScore)}`,children:[p.moyenneScore,"/20"]}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsxs("span",{className:"groupe-stat-mini-value",children:[p.tauxReussite,"%"]}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),n.jsxs("div",{className:"groupe-stat-mini",children:[n.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(p.tempsEcouleMoyen/60),"min"]}),n.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),n.jsxs("div",{className:"groupe-quiz-questions",children:[n.jsx("h4",{children:" Questions les plus rates"}),p.questionsRatees.filter(U=>U.tauxEchec>30).map((U,ge)=>n.jsxs("div",{className:"groupe-quiz-question-card",children:[n.jsxs("div",{className:"groupe-quiz-question-header",children:[n.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",U.questionIndex+1]}),n.jsxs("span",{className:"groupe-quiz-question-echec",children:[U.tauxEchec,"% d'chec"]})]}),n.jsx("p",{className:"groupe-quiz-question-texte",children:U.questionTexte}),n.jsx("div",{className:"groupe-quiz-question-reponse",children:n.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",U.reponseCorrecte]})}),U.reponsesFrequentes.length>0&&n.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[n.jsx("span",{children:"Erreurs frquentes :"}),U.reponsesFrequentes.slice(0,2).map((ee,me)=>n.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",ee.reponse," (",ee.nombre," lve",ee.nombre>1?"s":"",")"]},me))]})]},ge)),p.questionsRatees.filter(U=>U.tauxEchec>30).length===0&&n.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),S==="alertes"&&n.jsx("div",{className:"groupe-alertes",children:u.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Aucune alerte"}),n.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):n.jsx("div",{className:"groupe-alertes-liste",children:u.map(U=>n.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${U.niveauUrgence}`,children:[n.jsxs("div",{className:"groupe-alerte-header",children:[n.jsx("span",{className:"groupe-alerte-emoji",children:ve(U.type)}),n.jsx("span",{className:"groupe-alerte-eleve",children:U.eleveNom}),n.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${U.niveauUrgence}`,children:U.niveauUrgence})]}),n.jsx("p",{className:"groupe-alerte-message",children:U.message}),n.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{C("eleves"),O(U.eleveId)},children:" Voir dtail"})]},U.id))})})]})},iX=()=>{const{currentUser:e}=Ct(),[t,r]=y.useState("overview"),[a,l]=y.useState(null),[o,u]=y.useState(0),[d,m]=y.useState(0),[h,p]=y.useState(0),[v,x]=y.useState(0),[b,_]=y.useState([]),[N,S]=y.useState(!0),C=y.useCallback(async()=>{if(e?.uid)try{S(!0);const O=(await JM(e.uid)).filter($=>$.statut==="actif");u(O.length);let P=0,L=0,T=0,D=0;const k=[];for(const $ of O)try{const B=await Vb($.id);P+=B.nombreEleves,B.nombreEleves>0&&(L+=B.moyenneClasse,T++),D+=B.elevesEnDifficulte,k.push({...$,stats:B})}catch{k.push({...$})}m(P),p(T>0?Math.round(L/T*10)/10:0),x(D),_(k)}catch(E){console.error("Erreur chargement rsum prof:",E)}finally{S(!1)}},[e?.uid]);y.useEffect(()=>{C()},[C]);const z=E=>{l(E),r("detail")},w=()=>{l(null),r("groupes"),C()};return N?n.jsxs("div",{className:"prof-loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement de votre espace professeur..."})]}):n.jsxs("div",{className:"prof-dashboard",children:[n.jsx("header",{className:"prof-dashboard-header",children:n.jsxs("div",{children:[n.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),n.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",e?.displayName||"Professeur"," "]})]})}),t!=="detail"&&n.jsxs("nav",{className:"prof-nav",children:[n.jsx("button",{className:`prof-nav-btn ${t==="overview"?"active":""}`,onClick:()=>r("overview"),children:" Vue d'ensemble"}),n.jsx("button",{className:`prof-nav-btn ${t==="groupes"?"active":""}`,onClick:()=>r("groupes"),children:" Mes groupes-classes"})]}),t==="overview"&&n.jsxs("div",{className:"prof-overview",children:[n.jsxs("div",{className:"prof-overview-cards",children:[n.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>r("groupes"),children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsx("span",{className:"prof-overview-card-value",children:o}),n.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",o!==1?"s":""," actif",o!==1?"s":""]})]})]}),n.jsxs("div",{className:"prof-overview-card",children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsx("span",{className:"prof-overview-card-value",children:d}),n.jsxs("span",{className:"prof-overview-card-label",children:["lve",d!==1?"s":""," inscrit",d!==1?"s":""]})]})]}),n.jsxs("div",{className:"prof-overview-card",children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),n.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),n.jsxs("div",{className:"prof-overview-card",children:[n.jsx("div",{className:"prof-overview-card-icon",children:""}),n.jsxs("div",{className:"prof-overview-card-content",children:[n.jsx("span",{className:`prof-overview-card-value ${v>0?"prof-note-critique":""}`,children:v}),n.jsxs("span",{className:"prof-overview-card-label",children:["lve",v!==1?"s":""," en difficult"]})]})]})]}),b.length===0?n.jsxs("div",{className:"prof-empty-state",children:[n.jsx("div",{className:"prof-empty-icon",children:""}),n.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),n.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),n.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>r("groupes"),children:" Crer un groupe-classe"})]}):n.jsxs("div",{className:"prof-overview-groupes",children:[n.jsx("h2",{children:"Mes groupes"}),n.jsx("div",{className:"prof-overview-groupes-grid",children:b.map(E=>n.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>z(E),children:[n.jsxs("div",{className:"prof-overview-groupe-header",children:[n.jsx("h3",{children:E.nom}),n.jsx("span",{className:"prof-overview-groupe-matiere",children:E.matiereNom})]}),E.stats&&n.jsxs("div",{className:"prof-overview-groupe-stats",children:[n.jsxs("div",{children:[n.jsx("span",{className:"prof-overview-groupe-stat-value",children:E.stats.nombreEleves}),n.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[E.stats.moyenneClasse,"/20"]}),n.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[E.stats.tauxReussite,"%"]}),n.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),n.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},E.id))})]})]}),t==="groupes"&&n.jsx(nX,{onSelectGroupe:z}),t==="detail"&&a&&n.jsx(aX,{groupe:a,onRetour:w})]})},Ds="cahiers_textes",Br="entrees_cahier",tx=20,sX=async(e,t)=>{const r=t.titre.trim()||`${t.matiere} - ${t.classe} ${t.anneeScolaire}`;return(await nr(je(se,Ds),{profId:e,classe:t.classe,matiere:t.matiere,anneeScolaire:t.anneeScolaire,titre:r,description:t.description||"",couleur:t.couleur||"#2563eb",nombreSeancesPrevu:t.nombreSeancesPrevu||0,nombreSeancesRealise:0,isArchived:!1,createdAt:He.now(),updatedAt:He.now()})).id},lX=async(e,t)=>{await We(be(se,Ds,e),{...t,updatedAt:He.now()})},oX=async e=>{const t=await ke(qe(je(se,Br),we("cahierId","==",e)));await Promise.all(t.docs.map(r=>_n(r.ref))),await _n(be(se,Ds,e))},cX=async(e,t)=>{let r=qe(je(se,Ds),we("profId","==",e),we("isArchived","==",!1),nt("updatedAt","desc"));return t&&(r=qe(je(se,Ds),we("profId","==",e),we("anneeScolaire","==",t),we("isArchived","==",!1),nt("updatedAt","desc"))),(await ke(r)).docs.map(l=>({id:l.id,...l.data()}))},tT=async e=>{const t=await Vt(be(se,Ds,e));return t.exists()?{id:t.id,...t.data()}:null},Yb=async e=>{const t=await ke(qe(je(se,Br),we("cahierId","==",e),we("statut","==","realise")));await We(be(se,Ds,e),{nombreSeancesRealise:t.size,updatedAt:He.now()})},uX=async(e,t,r)=>{const a=He.fromDate(new Date(r.date)),l={cahierId:e,profId:t,date:a,heureDebut:r.heureDebut||void 0,heureFin:r.heureFin||void 0,chapitre:r.chapitre,typeContenu:r.typeContenu,contenu:r.contenu,objectifs:r.objectifs||void 0,competences:r.competences.length?r.competences:void 0,statut:r.statut,motifAnnulation:r.motifAnnulation||void 0,dateReport:r.dateReport?He.fromDate(new Date(r.dateReport)):void 0,notesPrivees:r.notesPrivees||void 0,isMarqueEvaluation:r.isMarqueEvaluation,typeEvaluation:r.typeEvaluation||void 0,dateEvaluationPrevue:r.dateEvaluationPrevue?He.fromDate(new Date(r.dateEvaluationPrevue)):void 0,statutEvaluation:r.isMarqueEvaluation?r.statutEvaluation||"a_evaluer":void 0,piecesJointes:[],ordre:Date.now(),createdAt:He.now(),updatedAt:He.now()},o=await nr(je(se,Br),l);return r.statut==="realise"&&await Yb(e),o.id},Kb=async(e,t,r)=>{const a={updatedAt:He.now()};r.date&&(a.date=He.fromDate(new Date(r.date))),r.heureDebut!==void 0&&(a.heureDebut=r.heureDebut),r.heureFin!==void 0&&(a.heureFin=r.heureFin),r.chapitre!==void 0&&(a.chapitre=r.chapitre),r.typeContenu!==void 0&&(a.typeContenu=r.typeContenu),r.contenu!==void 0&&(a.contenu=r.contenu),r.objectifs!==void 0&&(a.objectifs=r.objectifs),r.competences!==void 0&&(a.competences=r.competences),r.statut!==void 0&&(a.statut=r.statut),r.motifAnnulation!==void 0&&(a.motifAnnulation=r.motifAnnulation),r.notesPrivees!==void 0&&(a.notesPrivees=r.notesPrivees),r.isMarqueEvaluation!==void 0&&(a.isMarqueEvaluation=r.isMarqueEvaluation),r.typeEvaluation!==void 0&&(a.typeEvaluation=r.typeEvaluation),r.statutEvaluation!==void 0&&(a.statutEvaluation=r.statutEvaluation),r.dateEvaluationPrevue&&(a.dateEvaluationPrevue=He.fromDate(new Date(r.dateEvaluationPrevue))),r.dateReport&&(a.dateReport=He.fromDate(new Date(r.dateReport))),await We(be(se,Br,e),a),await Yb(t)},dX=async(e,t)=>{await _n(be(se,Br,e)),await Yb(t)},fX=async(e,t)=>{let r=qe(je(se,Br),we("cahierId","==",e),nt("date","desc"),Sn(tx));t&&(r=qe(je(se,Br),we("cahierId","==",e),nt("date","desc"),Pk(t),Sn(tx)));const a=await ke(r),l=a.docs.map(u=>({id:u.id,...u.data()})),o=a.docs.length===tx?a.docs[a.docs.length-1]:null;return{entrees:l,lastDoc:o}},mX=async(e,t)=>{let r=qe(je(se,Br),we("profId","==",e),we("isMarqueEvaluation","==",!0),nt("date","desc"));return t&&(r=qe(je(se,Br),we("cahierId","==",t),we("isMarqueEvaluation","==",!0),nt("date","desc"))),(await ke(r)).docs.map(l=>({id:l.id,...l.data()}))},hX=async e=>{const t=await Vt(be(se,Br,e));return t.exists()?{id:t.id,...t.data()}:null},pX=async(e,t,r)=>{const a=new Date(t,r,1),l=new Date(t,r+1,0,23,59,59),o=qe(je(se,Br),we("cahierId","==",e),we("date",">=",He.fromDate(a)),we("date","<=",He.fromDate(l)),nt("date","asc"));return(await ke(o)).docs.map(d=>({id:d.id,...d.data()}))},vX=async(e,t,r)=>{const a=`cahiers_textes/${e}/${t}/${Date.now()}_${r.name}`,l=Jr(en,a);await zi(l,r);const o=await Oi(l);return{nom:r.name,url:o,type:r.type,taille:r.size,uploadedAt:new Date().toISOString()}},f2=async(e,t,r)=>{await We(be(se,Br,e),{piecesJointes:[...t,...r],updatedAt:He.now()})},gX=async(e,t,r)=>{try{const a=Jr(en,r);await vc(a)}catch{}await We(be(se,Br,e),{piecesJointes:t.filter(a=>a.url!==r),updatedAt:He.now()})},xX=async e=>{const r=(await ke(qe(je(se,Br),we("cahierId","==",e)))).docs.map(l=>l.data()),a={total:r.length,realises:0,planifies:0,annules:0,reportes:0,parType:{},heuresTotal:0};for(const l of r)if(a[`${l.statut}s`]=(a[`${l.statut}s`]||0)+1,a.parType[l.typeContenu]=(a.parType[l.typeContenu]||0)+1,l.heureDebut&&l.heureFin){const[o,u]=l.heureDebut.split(":").map(Number),[d,m]=l.heureFin.split(":").map(Number);a.heuresTotal+=(d*60+m-(o*60+u))/60}return a},yX=["6me","5me","4me","3me","2nde","1re","Terminale"],bX=["Mathmatiques","Franais","Physique-Chimie","SVT","Histoire-Gographie","Anglais","Philosophie","conomie","Comptabilit","Arabe","Espagnol","Informatique","ducation civique","Littrature","Arts plastiques","EPS"],m2=["2023-2024","2024-2025","2025-2026","2026-2027"],Pi={cours:{label:"Cours",emoji:"",color:"#3b82f6"},exercices:{label:"Exercices",emoji:"",color:"#8b5cf6"},correction:{label:"Correction",emoji:"",color:"#10b981"},devoir_surveille:{label:"Devoir surveill",emoji:"",color:"#f59e0b"},devoir_maison:{label:"Devoir  la maison",emoji:"",color:"#6366f1"},travaux_pratiques:{label:"Travaux pratiques",emoji:"",color:"#14b8a6"},evaluation:{label:"valuation",emoji:"",color:"#ef4444"},revision:{label:"Rvision",emoji:"",color:"#f97316"}},yc={realise:{label:"Ralis",color:"#059669",bg:"#d1fae5"},planifie:{label:"Planifi",color:"#d97706",bg:"#fef3c7"},annule:{label:"Annul",color:"#dc2626",bg:"#fee2e2"},reporte:{label:"Report",color:"#2563eb",bg:"#dbeafe"}},rT={interro:"Interrogation",ds:"Devoir Surveill",examen:"Examen",oral:"Oral",autre:"Autre"},jX=["#2563eb","#7c3aed","#059669","#d97706","#dc2626","#0891b2","#db2777","#65a30d"],NX=["Comprendre","Analyser","Synthtiser","Appliquer","valuer","Crer","Mmoriser","Raisonner","Communiquer","Rsoudre","Exprimenter","Modliser"],nT={devoir:{label:"Devoir  corriger",emoji:""},evaluation:{label:"valuation  prparer",emoji:""},notes:{label:"Notes  saisir",emoji:""},cours:{label:"Cours  prparer",emoji:""},personnalise:{label:"Rappel personnalis",emoji:""}},h2=()=>({classe:"3me",matiere:"Mathmatiques",anneeScolaire:"2025-2026",titre:"",description:"",couleur:"#2563eb",nombreSeancesPrevu:30}),_X=()=>{const{currentUser:e}=Ct(),t=Yt(),[r,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState("2025-2026"),[m,h]=y.useState(!1),[p,v]=y.useState(null),[x,b]=y.useState(h2()),[_,N]=y.useState(!1),[S,C]=y.useState("");if(!e?.isPremium)return n.jsx("div",{className:"cahier-textes-page",children:n.jsxs("div",{className:"premium-gate",children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),n.jsx("h2",{children:"Cahier de Textes Numrique"}),n.jsxs("p",{children:["Cette fonctionnalit est rserve aux enseignants Premium.",n.jsx("br",{}),"Passez au Premium pour organiser, planifier et suivre votre enseignement."]}),n.jsx("button",{className:"btn-primary",onClick:()=>t("/premium"),children:" Passer au Premium  2 000 FCFA/mois"})]})});const z=async()=>{if(e?.uid){o(!0);try{const T=await cX(e.uid,u||void 0);a(T)}catch(T){console.error("Erreur chargement cahiers:",T)}finally{o(!1)}}};y.useEffect(()=>{z()},[e?.uid,u]);const w=()=>{v(null),b(h2()),C(""),h(!0)},E=(T,D)=>{D.stopPropagation(),v(T),b({classe:T.classe,matiere:T.matiere,anneeScolaire:T.anneeScolaire,titre:T.titre,description:T.description||"",couleur:T.couleur,nombreSeancesPrevu:T.nombreSeancesPrevu}),C(""),h(!0)},O=async T=>{if(T.preventDefault(),!!e?.uid){N(!0),C("");try{p?await lX(p.id,x):await sX(e.uid,x),h(!1),await z()}catch(D){const k=D instanceof Error?D.message:String(D);C("Erreur : "+k)}finally{N(!1)}}},P=async(T,D)=>{if(D.stopPropagation(),!!confirm(`Supprimer le cahier "${T.titre}" et toutes ses entres ?`))try{await oX(T.id),a(k=>k.filter($=>$.id!==T.id))}catch{alert("Erreur lors de la suppression.")}},L=T=>T.nombreSeancesPrevu>0?Math.min(100,Math.round(T.nombreSeancesRealise/T.nombreSeancesPrevu*100)):0;return n.jsxs("div",{className:"cahier-textes-page",children:[n.jsxs("div",{className:"cahier-page-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"cahier-page-title",children:" Cahier de Textes"}),n.jsx("p",{className:"cahier-page-subtitle",children:"Organisez et planifiez votre enseignement"})]}),n.jsx("button",{className:"btn-primary",onClick:w,children:"+ Nouveau cahier"})]}),n.jsxs("div",{className:"cahier-filtres",children:[n.jsx("label",{style:{fontSize:"0.85rem",color:"#6b7280",fontWeight:600},children:"Anne scolaire :"}),n.jsxs("select",{className:"filtre-select",value:u,onChange:T=>d(T.target.value),children:[n.jsx("option",{value:"",children:"Toutes les annes"}),m2.map(T=>n.jsx("option",{value:T,children:T},T))]})]}),l?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):r.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{style:{fontSize:"3rem",opacity:.3,marginBottom:"0.75rem"},children:""}),n.jsxs("h3",{children:["Aucun cahier pour ",u||"cette priode"]}),n.jsx("p",{children:"Crez votre premier cahier de textes pour commencer  planifier votre enseignement."}),n.jsx("button",{className:"btn-primary",onClick:w,style:{marginTop:"1rem"},children:"+ Crer mon premier cahier"})]}):n.jsx("div",{className:"cahiers-grid",children:r.map(T=>{const D=L(T);return n.jsxs("div",{className:"cahier-card",onClick:()=>t(`/prof/cahiers/${T.id}`),children:[n.jsx("div",{style:{height:4,background:T.couleur,borderRadius:"12px 12px 0 0"}}),n.jsx("div",{className:"cahier-card-header",children:n.jsxs("div",{style:{flex:1},children:[n.jsx("h3",{className:"cahier-card-titre",children:T.titre}),n.jsxs("div",{className:"cahier-card-meta",children:[n.jsx("span",{className:"badge-classe",children:T.classe}),n.jsx("span",{className:"badge-matiere",children:T.matiere}),n.jsx("span",{className:"badge-annee",children:T.anneeScolaire})]})]})}),n.jsxs("div",{className:"cahier-card-body",children:[T.description&&n.jsxs("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 0.75rem",lineHeight:1.5},children:[T.description.substring(0,80),T.description.length>80?"...":""]}),n.jsxs("div",{className:"progression-bar-wrap",children:[n.jsxs("div",{className:"progression-label",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{style:{fontWeight:700,color:T.couleur},children:[D,"%"]})]}),n.jsx("div",{className:"progression-bar-bg",children:n.jsx("div",{className:"progression-bar-fill",style:{width:`${D}%`,background:T.couleur}})}),n.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:"0.3rem"},children:[T.nombreSeancesRealise," / ",T.nombreSeancesPrevu," sances ralises"]})]})]}),n.jsxs("div",{className:"cahier-card-footer",children:[n.jsxs("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["Mis  jour le ",T.updatedAt?.toDate().toLocaleDateString("fr-FR")||""]}),n.jsxs("div",{className:"cahier-actions",children:[n.jsx("button",{className:"btn-icon",onClick:k=>E(T,k),title:"Modifier",children:""}),n.jsx("button",{className:"btn-icon",onClick:k=>P(T,k),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]})]},T.id)})}),m&&n.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:n.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[n.jsxs("h2",{className:"modal-title",children:[" ",p?"Modifier le cahier":"Nouveau cahier de textes"]}),n.jsxs("form",{onSubmit:O,children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Classe *"}),n.jsx("select",{className:"form-select",value:x.classe,onChange:T=>b(D=>({...D,classe:T.target.value})),required:!0,children:yX.map(T=>n.jsx("option",{value:T,children:T},T))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Matire *"}),n.jsx("select",{className:"form-select",value:x.matiere,onChange:T=>b(D=>({...D,matiere:T.target.value})),required:!0,children:bX.map(T=>n.jsx("option",{value:T,children:T},T))})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Anne scolaire *"}),n.jsx("select",{className:"form-select",value:x.anneeScolaire,onChange:T=>b(D=>({...D,anneeScolaire:T.target.value})),children:m2.map(T=>n.jsx("option",{value:T,children:T},T))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Titre personnalis"}),n.jsx("input",{className:"form-input",placeholder:`Ex: Maths 3me A - ${x.anneeScolaire}`,value:x.titre,onChange:T=>b(D=>({...D,titre:T.target.value}))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Nombre de sances prvues"}),n.jsx("input",{type:"number",className:"form-input",min:"1",max:"200",value:x.nombreSeancesPrevu,onChange:T=>b(D=>({...D,nombreSeancesPrevu:Number(T.target.value)}))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description / Objectifs (optionnel)"}),n.jsx("textarea",{className:"form-textarea",placeholder:"Objectifs gnraux, groupe classe, notes...",value:x.description,onChange:T=>b(D=>({...D,description:T.target.value})),rows:2})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Couleur du cahier"}),n.jsx("div",{className:"couleur-picker",children:jX.map(T=>n.jsx("div",{className:`couleur-option ${x.couleur===T?"selected":""}`,style:{background:T},onClick:()=>b(D=>({...D,couleur:T})),title:T},T))})]}),S&&n.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem",marginBottom:"0.75rem",background:"#fee2e2",padding:"0.5rem 0.75rem",borderRadius:8},children:S}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>h(!1),children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:_,children:_?"Enregistrement...":p?"Mettre  jour":"Crer le cahier"})]})]})]})})]})},SX=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],wX=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],CX=(e,t,r)=>{const a=new Date(e,t,1),l=new Date(e,t+1,0);let o=a.getDay()-1;o<0&&(o=6);const u=new Date,d=[];for(let h=o-1;h>=0;h--){const p=new Date(e,t,-h);d.push({date:p,isCurrentMonth:!1,isToday:!1,entrees:[]})}for(let h=1;h<=l.getDate();h++){const p=new Date(e,t,h),v=p.toDateString()===u.toDateString(),x=r.filter(b=>{const _=b.date.toDate();return _.getFullYear()===e&&_.getMonth()===t&&_.getDate()===h});d.push({date:p,isCurrentMonth:!0,isToday:v,entrees:x})}let m=1;for(;d.length<42;){const h=new Date(e,t+1,m++);d.push({date:h,isCurrentMonth:!1,isToday:!1,entrees:[]})}return d},AX=({cahierId:e})=>{const t=Yt(),r=new Date,[a,l]=y.useState(r.getFullYear()),[o,u]=y.useState(r.getMonth()),[d,m]=y.useState([]),[h,p]=y.useState(!1),[v,x]=y.useState(null),[b,_]=y.useState({x:0,y:0});y.useEffect(()=>{(async()=>{p(!0);try{const E=await pX(e,a,o);m(E)}catch(E){console.error("Erreur chargement entres calendrier:",E)}finally{p(!1)}})()},[e,a,o]);const N=CX(a,o,d),S=()=>{o===0?(l(w=>w-1),u(11)):u(w=>w-1)},C=()=>{o===11?(l(w=>w+1),u(0)):u(w=>w+1)},z=(w,E)=>{if(!w.isCurrentMonth||w.entrees.length===0)return;const O=E.target.getBoundingClientRect();_({x:O.left,y:O.bottom+window.scrollY+8}),x(w)};return n.jsxs("div",{className:"cahier-calendar",onClick:()=>x(null),children:[n.jsxs("div",{className:"calendar-nav",children:[n.jsx("button",{className:"calendar-nav-btn",onClick:S,"aria-label":"Mois prcdent",children:""}),n.jsxs("span",{className:"calendar-nav-title",children:[wX[o]," ",a,h&&" ..."]}),n.jsx("button",{className:"calendar-nav-btn",onClick:C,"aria-label":"Mois suivant",children:""})]}),n.jsx("div",{className:"calendar-weekdays",children:SX.map(w=>n.jsx("div",{className:"calendar-weekday",children:w},w))}),n.jsx("div",{className:"calendar-grid",onClick:w=>w.stopPropagation(),children:N.map((w,E)=>n.jsxs("div",{className:`calendar-day ${w.isCurrentMonth?"":"other-month"} ${w.isToday?"today":""} ${v?.date.toDateString()===w.date.toDateString()?"selected":""}`,onClick:O=>z(w,O),children:[n.jsx("div",{className:"calendar-day-num",children:w.date.getDate()}),n.jsxs("div",{className:"calendar-day-events",children:[w.entrees.slice(0,3).map(O=>{const P=Pi[O.typeContenu];return n.jsxs("div",{className:"calendar-event-dot",style:{background:P.color},title:O.chapitre,children:[P.emoji," ",O.chapitre.substring(0,12)]},O.id)}),w.entrees.length>3&&n.jsxs("div",{className:"calendar-more",children:["+",w.entrees.length-3]})]})]},E))}),n.jsx("div",{className:"calendar-legend",children:Object.entries(Pi).slice(0,5).map(([w,E])=>n.jsxs("div",{className:"legend-item",children:[n.jsx("div",{className:"legend-dot",style:{background:E.color}}),E.label]},w))}),v&&v.entrees.length>0&&n.jsxs("div",{className:"calendar-day-popup",style:{top:b.y,left:Math.min(b.x,window.innerWidth-300)},onClick:w=>w.stopPropagation(),children:[n.jsxs("div",{className:"calendar-day-popup-title",children:[" ",v.date.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})]}),v.entrees.map(w=>{const E=Pi[w.typeContenu];return n.jsxs("div",{className:"calendar-popup-entree",onClick:()=>t(`/prof/cahiers/${e}/modifier/${w.id}`),children:[n.jsx("span",{className:"calendar-popup-entree-type",children:E.emoji}),n.jsxs("div",{className:"calendar-popup-entree-info",children:[n.jsx("div",{className:"calendar-popup-entree-chapitre",children:w.chapitre}),w.heureDebut&&n.jsxs("div",{className:"calendar-popup-entree-heure",children:[w.heureDebut,w.heureFin?`  ${w.heureFin}`:""]})]})]},w.id)})]})]})},Vm="rappels_prof",EX=async(e,t)=>(await nr(je(se,Vm),{profId:e,titre:t.titre,description:t.description||"",typeRappel:t.typeRappel,dateRappel:He.fromDate(new Date(t.dateRappel)),recurrence:t.recurrence,priorite:t.priorite,cahierId:t.cahierId||null,isLu:!1,isDone:!1,createdAt:He.now()})).id,zX=async e=>{const t=qe(je(se,Vm),we("profId","==",e),we("isDone","==",!1),nt("dateRappel","asc"));return(await ke(t)).docs.map(a=>({id:a.id,...a.data()}))},OX=async(e,t)=>{await We(be(se,Vm,e),{isDone:t,isLu:t})},DX=async e=>{await _n(be(se,Vm,e))},p2=()=>({titre:"",description:"",typeRappel:"personnalise",dateRappel:new Date(Date.now()+36e5).toISOString().slice(0,16),recurrence:"unique",priorite:"normale"}),Rd=({profId:e,cahierId:t})=>{const[r,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(!1),[m,h]=y.useState(p2()),[p,v]=y.useState(!1),x=async()=>{try{o(!0);const w=await zX(e);a(w)}catch(w){console.error("Erreur rappels:",w)}finally{o(!1)}};y.useEffect(()=>{x()},[e]);const b=async w=>{if(w.preventDefault(),!!m.titre.trim()){v(!0);try{await EX(e,{...m,cahierId:t}),d(!1),h(p2()),await x()}catch(E){console.error("Erreur cration rappel:",E)}finally{v(!1)}}},_=async w=>{await OX(w,!0),a(E=>E.filter(O=>O.id!==w))},N=async w=>{confirm("Supprimer ce rappel ?")&&(await DX(w),a(E=>E.filter(O=>O.id!==w)))},S=new Date,C=r.filter(w=>w.dateRappel.toDate()<=S),z=r.filter(w=>w.dateRappel.toDate()>S);return n.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"1.1rem"},children:""}),n.jsx("span",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937"},children:"Rappels"}),C.length>0&&n.jsx("span",{style:{background:"#dc2626",color:"white",borderRadius:20,padding:"1px 7px",fontSize:"0.7rem",fontWeight:700},children:C.length})]}),n.jsx("button",{className:"btn-primary",style:{padding:"0.35rem 0.75rem",fontSize:"0.8rem"},onClick:()=>d(w=>!w),children:"+ Ajouter"})]}),u&&n.jsxs("form",{onSubmit:b,style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",background:"#f9fafb"},children:[n.jsx("div",{className:"form-group",children:n.jsx("input",{className:"form-input",placeholder:"Titre du rappel *",value:m.titre,onChange:w=>h(E=>({...E,titre:w.target.value})),required:!0})}),n.jsx("div",{className:"form-group",children:n.jsx("select",{className:"form-select",value:m.typeRappel,onChange:w=>h(E=>({...E,typeRappel:w.target.value})),children:Object.entries(nT).map(([w,E])=>n.jsxs("option",{value:w,children:[E.emoji," ",E.label]},w))})}),n.jsx("div",{className:"form-group",children:n.jsx("input",{type:"datetime-local",className:"form-input",value:m.dateRappel,onChange:w=>h(E=>({...E,dateRappel:w.target.value})),required:!0})}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsxs("select",{className:"form-select",value:m.priorite,onChange:w=>h(E=>({...E,priorite:w.target.value})),children:[n.jsx("option",{value:"normale",children:"Normale"}),n.jsx("option",{value:"urgente",children:" Urgente"})]}),n.jsxs("select",{className:"form-select",value:m.recurrence,onChange:w=>h(E=>({...E,recurrence:w.target.value})),children:[n.jsx("option",{value:"unique",children:"Une fois"}),n.jsx("option",{value:"hebdomadaire",children:"Hebdo"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[n.jsx("button",{type:"submit",className:"btn-primary",disabled:p,style:{flex:1},children:p?"...":"Enregistrer"}),n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Annuler"})]})]}),n.jsx("div",{style:{padding:"0.75rem 1.25rem"},children:l?n.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:"Chargement..."}):r.length===0?n.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:[n.jsx("div",{children:""}),n.jsx("div",{children:"Aucun rappel actif"})]}):n.jsxs(n.Fragment,{children:[C.length>0&&n.jsxs("div",{style:{marginBottom:"0.75rem"},children:[n.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#dc2626",textTransform:"uppercase",marginBottom:"0.4rem"},children:" En retard"}),C.map(w=>n.jsx(v2,{rappel:w,onDone:_,onDelete:N},w.id))]}),z.length>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#6b7280",textTransform:"uppercase",marginBottom:"0.4rem"},children:" venir"}),z.slice(0,5).map(w=>n.jsx(v2,{rappel:w,onDone:_,onDelete:N},w.id))]})]})})]})},v2=({rappel:e,onDone:t,onDelete:r})=>{const a=nT[e.typeRappel],l=e.dateRappel.toDate(),o=e.priorite==="urgente",u=l<=new Date;return n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.5rem 0",borderBottom:"1px solid #f9fafb"},children:[n.jsx("button",{onClick:()=>t(e.id),style:{width:20,height:20,border:`2px solid ${o?"#dc2626":"#d1d5db"}`,borderRadius:4,background:"white",cursor:"pointer",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",marginTop:2},title:"Marquer termin"}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{fontSize:"0.82rem",fontWeight:600,color:u?"#dc2626":"#1f2937",display:"flex",alignItems:"center",gap:"0.3rem"},children:[a.emoji," ",e.titre,o&&n.jsx("span",{style:{fontSize:"0.65rem",color:"#dc2626"},children:""})]}),n.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:2},children:[l.toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),"  ",l.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),n.jsx("button",{onClick:()=>r(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"0.9rem",flexShrink:0},title:"Supprimer",children:""})]})},MX=({profId:e,cahierId:t})=>{const r=Yt(),[a,l]=y.useState([]),[o,u]=y.useState(!0),[d,m]=y.useState("tous");y.useEffect(()=>{(async()=>{u(!0);try{const b=await mX(e,t);l(b)}catch(b){console.error("Erreur signets:",b)}finally{u(!1)}})()},[e,t]);const h=async(x,b)=>{try{await Kb(x.id,t,{statutEvaluation:b}),l(_=>_.map(N=>N.id===x.id?{...N,statutEvaluation:b}:N))}catch(_){console.error("Erreur mise  jour statut:",_)}},p=d==="tous"?a:a.filter(x=>x.statutEvaluation===d),v=[{value:"tous",label:"Tous",color:"#6b7280"},{value:"a_evaluer",label:" valuer",color:"#d97706"},{value:"evaluation_creee",label:"Cre",color:"#2563eb"},{value:"evaluation_terminee",label:"Termine",color:"#059669"}];return n.jsxs("div",{children:[n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:n.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:700,color:"#1f2937",margin:0},children:[" Signets d'valuation (",a.length,")"]})}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:v.map(x=>n.jsx("button",{onClick:()=>m(x.value),style:{padding:"0.3rem 0.85rem",borderRadius:20,border:`1.5px solid ${d===x.value?x.color:"#e5e7eb"}`,background:d===x.value?x.color:"white",color:d===x.value?"white":"#4b5563",fontSize:"0.8rem",fontWeight:600,cursor:"pointer",transition:"all 0.15s"},children:x.label},x.value))}),o?n.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Chargement..."}):p.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"#9ca3af"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),n.jsx("div",{style:{fontWeight:600,color:"#6b7280",marginBottom:"0.25rem"},children:"Aucun signet trouv"}),n.jsx("div",{style:{fontSize:"0.85rem"},children:"Marquez des entres pour valuation depuis l'diteur de sance."})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:p.map(x=>{const b=Pi[x.typeContenu];return yc[x.statut],n.jsxs("div",{style:{background:"white",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:"1rem",borderLeft:"4px solid #f59e0b"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.5rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,color:"#1f2937"},children:x.chapitre}),n.jsx("div",{style:{fontSize:"0.78rem",color:"#9ca3af",marginTop:"0.15rem"},children:x.date.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsx("button",{onClick:()=>r(`/prof/cahiers/${t}/modifier/${x.id}`),style:{background:"none",border:"none",cursor:"pointer",color:"#2563eb",fontSize:"0.8rem",fontWeight:600,whiteSpace:"nowrap"},children:" Modifier"})]}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[n.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:b.color+"22",color:b.color},children:[b.emoji," ",b.label]}),x.typeEvaluation&&n.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:"#fef3c7",color:"#92400e"},children:[" ",rT[x.typeEvaluation]]}),x.dateEvaluationPrevue&&n.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",background:"#f3f4f6",color:"#4b5563"},children:[" ",x.dateEvaluationPrevue.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),n.jsx("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:["a_evaluer","evaluation_creee","evaluation_terminee"].map(_=>{const N=x.statutEvaluation===_,S={a_evaluer:" valuer",evaluation_creee:"Cre",evaluation_terminee:" Termine"},C={a_evaluer:"#d97706",evaluation_creee:"#2563eb",evaluation_terminee:"#059669"};return n.jsx("button",{onClick:()=>h(x,_),style:{padding:"0.25rem 0.7rem",borderRadius:20,border:`1.5px solid ${N?C[_]:"#e5e7eb"}`,background:N?C[_]:"white",color:N?"white":"#6b7280",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:S[_]},_)})})]},x.id)})})]})},TX=({cahier:e})=>{const[t,r]=y.useState(null),[a,l]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const d=await xX(e.id);r(d)}catch{}finally{l(!1)}})()},[e.id]);const o=e.nombreSeancesPrevu>0?Math.min(100,Math.round(e.nombreSeancesRealise/e.nombreSeancesPrevu*100)):0;return a?n.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#9ca3af",fontSize:"0.85rem"},children:"Chargement des stats..."}):t?n.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"1.25rem"},children:[n.jsx("div",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Statistiques du cahier"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[n.jsx(Ld,{value:t.total,label:"Sances total",color:"#2563eb",bg:"#dbeafe"}),n.jsx(Ld,{value:t.realises,label:"Ralises",color:"#059669",bg:"#d1fae5"}),n.jsx(Ld,{value:t.planifies,label:"Planifies",color:"#d97706",bg:"#fef3c7"}),n.jsx(Ld,{value:`${t.heuresTotal.toFixed(1)}h`,label:"Heures d'enseignement",color:"#7c3aed",bg:"#ede9fe"})]}),n.jsxs("div",{style:{marginBottom:"1.25rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.4rem"},children:[n.jsx("span",{children:"Progression du programme"}),n.jsxs("span",{style:{fontWeight:700,color:e.couleur},children:[o,"%"]})]}),n.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:10,overflow:"hidden"},children:n.jsx("div",{style:{height:"100%",width:`${o}%`,background:e.couleur,borderRadius:10,transition:"width 0.5s ease"}})}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.3rem"},children:[e.nombreSeancesRealise," / ",e.nombreSeancesPrevu," sances prvues"]})]}),Object.keys(t.parType).length>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.78rem",fontWeight:700,color:"#9ca3af",textTransform:"uppercase",marginBottom:"0.6rem"},children:"Rpartition par type"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:Object.entries(t.parType).sort((u,d)=>d[1]-u[1]).map(([u,d])=>{const m=Pi[u];if(!m)return null;const h=t.total>0?Math.round(d/t.total*100):0;return n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"#4b5563",marginBottom:"0.2rem"},children:[n.jsxs("span",{children:[m.emoji," ",m.label]}),n.jsxs("span",{style:{fontWeight:600},children:[d," (",h,"%)"]})]}),n.jsx("div",{style:{height:4,background:"#f3f4f6",borderRadius:10,overflow:"hidden"},children:n.jsx("div",{style:{height:"100%",width:`${h}%`,background:m.color,borderRadius:10}})})]},u)})})]})]}):null},Ld=({value:e,label:t,color:r,bg:a})=>n.jsxs("div",{style:{background:a,borderRadius:10,padding:"0.75rem",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:r},children:e}),n.jsx("div",{style:{fontSize:"0.72rem",color:"#6b7280",marginTop:"0.15rem"},children:t})]}),PX=()=>{const{cahierId:e}=Kl(),{currentUser:t}=Ct(),r=Yt(),[a,l]=y.useState(null),[o,u]=y.useState([]),[d,m]=y.useState(null),[h,p]=y.useState(!1),[v,x]=y.useState(!0),[b,_]=y.useState(!0),[N,S]=y.useState("liste"),[C,z]=y.useState("tous"),[w,E]=y.useState("tous");y.useEffect(()=>{if(!e)return;(async()=>{x(!0);try{const k=await tT(e);if(!k){r("/prof/cahiers");return}l(k)}finally{x(!1)}})()},[e]);const O=y.useCallback(async(D=!1)=>{if(e){_(!0);try{const $=await fX(e,D?void 0:d??void 0);u(D?$.entrees:[...o,...$.entrees]),m($.lastDoc),p(!!$.lastDoc)}finally{_(!1)}}},[e,d]);y.useEffect(()=>{O(!0)},[e]);const P=async D=>{if(confirm(`Supprimer la sance "${D.chapitre}" ?`))try{await dX(D.id,D.cahierId),u(k=>k.filter($=>$.id!==D.id))}catch{alert("Erreur lors de la suppression.")}},L=async(D,k)=>{try{await Kb(D.id,D.cahierId,{statut:k}),u($=>$.map(B=>B.id===D.id?{...B,statut:k}:B))}catch{alert("Erreur mise  jour statut.")}},T=o.filter(D=>{const k=C==="tous"||D.statut===C,$=w==="tous"||D.typeContenu===w;return k&&$});return v?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):a?n.jsxs("div",{className:"cahier-detail-page",children:[n.jsxs("div",{className:"cahier-detail-header",children:[n.jsx("button",{onClick:()=>r("/prof/cahiers"),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem",padding:"0 0.5rem"},title:"Retour",children:""}),n.jsx("div",{style:{width:6,minHeight:60,borderRadius:4,background:a.couleur,alignSelf:"stretch"}}),n.jsxs("div",{className:"cahier-detail-info",children:[n.jsx("h1",{className:"cahier-detail-titre",children:a.titre}),n.jsxs("div",{className:"cahier-detail-badges",children:[n.jsx("span",{className:"badge-classe",children:a.classe}),n.jsx("span",{className:"badge-matiere",children:a.matiere}),n.jsx("span",{className:"badge-annee",children:a.anneeScolaire})]}),a.description&&n.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",margin:0},children:a.description})]}),n.jsx("div",{className:"cahier-detail-actions",children:n.jsx("button",{className:"btn-primary",onClick:()=>r(`/prof/cahiers/${e}/nouvelle`),children:"+ Nouvelle sance"})})]}),n.jsx("div",{className:"view-tabs",children:[{id:"liste",label:" Liste"},{id:"calendrier",label:" Calendrier"},{id:"signets",label:" Signets"},{id:"stats",label:" Statistiques"}].map(D=>n.jsx("button",{className:`view-tab ${N===D.id?"active":""}`,onClick:()=>S(D.id),children:D.label},D.id))}),N==="calendrier"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsx("div",{children:n.jsx(AX,{cahierId:a.id})}),n.jsx("div",{children:n.jsx(Rd,{profId:t.uid,cahierId:a.id})})]}),N==="signets"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsx(MX,{profId:t.uid,cahierId:a.id}),n.jsx(Rd,{profId:t.uid,cahierId:a.id})]}),N==="stats"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsx(TX,{cahier:a}),n.jsx(Rd,{profId:t.uid,cahierId:a.id})]}),N==="liste"&&n.jsxs("div",{className:"cahier-detail-layout",children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[["tous","realise","planifie","annule","reporte"].map(D=>{const k=D==="tous"?null:yc[D];return n.jsx("button",{onClick:()=>z(D),style:{padding:"0.3rem 0.75rem",borderRadius:20,border:`1.5px solid ${C===D?k?.color||"#2563eb":"#e5e7eb"}`,background:C===D?k?.bg||"#dbeafe":"white",color:C===D?k?.color||"#2563eb":"#4b5563",fontSize:"0.78rem",fontWeight:600,cursor:"pointer"},children:D==="tous"?"Tous":k?.label},D)}),n.jsxs("select",{className:"filtre-select",value:w,onChange:D=>E(D.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[n.jsx("option",{value:"tous",children:"Tous types"}),Object.entries(Pi).map(([D,k])=>n.jsxs("option",{value:D,children:[k.emoji," ",k.label]},D))]})]}),b&&T.length===0?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):T.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{style:{fontSize:"2.5rem",opacity:.3,marginBottom:"0.5rem"},children:""}),n.jsxs("h3",{children:["Aucune sance",C!=="tous"||w!=="tous"?" (avec ce filtre)":""]}),n.jsx("button",{className:"btn-primary",onClick:()=>r(`/prof/cahiers/${e}/nouvelle`),style:{marginTop:"1rem"},children:"+ Ajouter la premire sance"})]}):n.jsxs("div",{className:"entrees-list",children:[T.map(D=>{const k=Pi[D.typeContenu],$=yc[D.statut],B=D.date.toDate();return n.jsxs("div",{className:"entree-card",style:{borderLeftColor:k.color},children:[n.jsxs("div",{className:"entree-card-top",children:[n.jsxs("div",{className:"entree-card-gauche",children:[n.jsxs("div",{className:"entree-date",children:[" ",B.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),D.heureDebut&&n.jsxs("span",{style:{marginLeft:"0.5rem"},children:[" ",D.heureDebut,D.heureFin?`  ${D.heureFin}`:""]})]}),n.jsx("h3",{className:"entree-chapitre",children:D.chapitre}),n.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[n.jsxs("span",{className:"entree-type-badge",style:{background:k.color},children:[k.emoji," ",k.label]}),n.jsx("span",{className:"entree-statut-badge",style:{background:$.bg,color:$.color},children:$.label}),D.isMarqueEvaluation&&n.jsx("span",{className:"signet-badge",children:" valuation"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.25rem",flexShrink:0},children:[n.jsx("button",{className:"btn-icon",onClick:()=>r(`/prof/cahiers/${e}/modifier/${D.id}`),title:"Modifier",children:""}),n.jsx("button",{className:"btn-icon",onClick:()=>P(D),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]}),D.contenu&&n.jsx("div",{className:"entree-contenu-preview",dangerouslySetInnerHTML:{__html:D.contenu}}),D.objectifs&&n.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem",fontStyle:"italic"},children:[" ",D.objectifs]}),D.piecesJointes&&D.piecesJointes.length>0&&n.jsxs("div",{style:{fontSize:"0.78rem",color:"#2563eb",marginTop:"0.4rem"},children:[" ",D.piecesJointes.length," pice(s) jointe(s)"]}),n.jsx("div",{className:"entree-card-footer",children:n.jsx("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap"},children:["realise","planifie","annule"].map(le=>{const oe=yc[le],F=D.statut===le;return n.jsx("button",{onClick:()=>L(D,le),style:{padding:"0.2rem 0.6rem",borderRadius:20,border:`1.5px solid ${F?oe.color:"#e5e7eb"}`,background:F?oe.bg:"white",color:F?oe.color:"#9ca3af",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:oe.label},le)})})})]},D.id)}),h&&n.jsx("div",{style:{textAlign:"center",padding:"1rem"},children:n.jsx("button",{className:"btn-secondary",onClick:()=>O(!1),disabled:b,children:b?"Chargement...":"Charger plus de sances"})})]})]}),n.jsx("div",{children:n.jsx(Rd,{profId:t.uid,cahierId:a.id})})]})]}):null},kX=()=>({date:new Date().toISOString().slice(0,10),heureDebut:"",heureFin:"",chapitre:"",typeContenu:"cours",contenu:"",objectifs:"",competences:[],statut:"realise",motifAnnulation:"",dateReport:"",notesPrivees:"",isMarqueEvaluation:!1,typeEvaluation:"",dateEvaluationPrevue:"",statutEvaluation:"a_evaluer"}),qX=({value:e,onChange:t,placeholder:r})=>{const a=y.useRef(null);y.useEffect(()=>{a.current&&a.current.innerHTML!==e&&(a.current.innerHTML=e)},[]);const l=(d,m)=>{document.execCommand(d,!1,m),a.current?.focus(),o()},o=()=>{a.current&&t(a.current.innerHTML)},u=d=>{try{return document.queryCommandState(d)}catch{return!1}};return n.jsxs("div",{children:[n.jsxs("div",{className:"rich-editor-toolbar",children:[[{cmd:"bold",label:"G",title:"Gras"},{cmd:"italic",label:"I",title:"Italique"},{cmd:"underline",label:"S",title:"Soulign"}].map(({cmd:d,label:m,title:h})=>n.jsx("button",{type:"button",className:`toolbar-btn ${u(d)?"active":""}`,onMouseDown:p=>{p.preventDefault(),l(d)},title:h,children:m},d)),n.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertUnorderedList")},title:"Liste  puces",children:""}),n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertOrderedList")},title:"Liste numrote",children:"1."}),n.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),["h2","h3","p"].map(d=>n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:m=>{m.preventDefault(),l("formatBlock",d)},title:d==="p"?"Paragraphe":d.toUpperCase(),children:d==="p"?"":d.toUpperCase()},d)),n.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),n.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("removeFormat")},title:"Effacer la mise en forme",children:""})]}),n.jsx("div",{ref:a,className:"rich-editor-area",contentEditable:!0,suppressContentEditableWarning:!0,onInput:o,"data-placeholder":r||"Dcrivez le contenu de la sance...",style:{position:"relative"}})]})},g2=()=>{const{cahierId:e,entreeId:t}=Kl(),{currentUser:r}=Ct(),a=Yt(),[l,o]=y.useState(null),[u,d]=y.useState(null),[m,h]=y.useState(kX()),[p,v]=y.useState([]),[x,b]=y.useState(!0),[_,N]=y.useState(!1),[S,C]=y.useState(!1),[z,w]=y.useState(""),E=!!t;y.useEffect(()=>{if(!e)return;(async()=>{b(!0);try{const k=await tT(e);if(!k){a("/prof/cahiers");return}if(o(k),E&&t){const $=await hX(t);$&&(d($),v($.piecesJointes||[]),h({date:$.date.toDate().toISOString().slice(0,10),heureDebut:$.heureDebut||"",heureFin:$.heureFin||"",chapitre:$.chapitre,typeContenu:$.typeContenu,contenu:$.contenu,objectifs:$.objectifs||"",competences:$.competences||[],statut:$.statut,motifAnnulation:$.motifAnnulation||"",dateReport:$.dateReport?$.dateReport.toDate().toISOString().slice(0,10):"",notesPrivees:$.notesPrivees||"",isMarqueEvaluation:$.isMarqueEvaluation,typeEvaluation:$.typeEvaluation||"",dateEvaluationPrevue:$.dateEvaluationPrevue?$.dateEvaluationPrevue.toDate().toISOString().slice(0,10):"",statutEvaluation:$.statutEvaluation||"a_evaluer"}))}}finally{b(!1)}})()},[e,t]);const O=D=>{h(k=>({...k,competences:k.competences.includes(D)?k.competences.filter($=>$!==D):[...k.competences,D]}))},P=async D=>{if(!D.target.files?.length||!r?.uid||!e)return;const k=D.target.files[0];if(k.size>10*1024*1024){alert("Fichier trop volumineux (max 10 Mo)");return}C(!0);try{const $=await vX(r.uid,e,k),B=[...p,$];v(B),E&&t&&u&&await f2(t,p,[$])}catch{alert("Erreur upload fichier.")}finally{C(!1),D.target.value=""}},L=async D=>{if(!t){v(k=>k.filter($=>$.url!==D));return}try{await gX(t,p,D),v(k=>k.filter($=>$.url!==D))}catch{alert("Erreur suppression fichier.")}},T=async D=>{if(D.preventDefault(),!m.chapitre.trim()){w("Le chapitre est obligatoire.");return}if(!m.date){w("La date est obligatoire.");return}if(!(!r?.uid||!e)){N(!0),w("");try{if(E&&t)await Kb(t,e,m);else{const k=await uX(e,r.uid,m);p.length>0&&await f2(k,[],p)}a(`/prof/cahiers/${e}`)}catch(k){const $=k instanceof Error?k.message:String(k);w("Erreur : "+$)}finally{N(!1)}}};return x?n.jsx("div",{className:"loading-spinner",children:n.jsx("div",{className:"spinner-circle"})}):l?n.jsxs("div",{className:"entree-editor-page",children:[n.jsxs("div",{className:"editor-header",children:[n.jsx("button",{onClick:()=>a(`/prof/cahiers/${e}`),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem"},children:""}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"1.4rem",fontWeight:700,color:"#1f2937",margin:"0 0 0.2rem"},children:E?" Modifier la sance":" Nouvelle sance"}),n.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[l.titre,"  ",l.classe,"  ",l.matiere]})]})]}),n.jsxs("form",{onSubmit:T,children:[n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Informations de la sance"}),n.jsxs("div",{className:"form-row",style:{gridTemplateColumns:"1.5fr 1fr 1fr"},children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date *"}),n.jsx("input",{type:"date",className:"form-input",value:m.date,onChange:D=>h(k=>({...k,date:D.target.value})),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Heure dbut"}),n.jsx("input",{type:"time",className:"form-input",value:m.heureDebut,onChange:D=>h(k=>({...k,heureDebut:D.target.value}))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Heure fin"}),n.jsx("input",{type:"time",className:"form-input",value:m.heureFin,onChange:D=>h(k=>({...k,heureFin:D.target.value}))})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Chapitre / Titre de la sance *"}),n.jsx("input",{className:"form-input",placeholder:"Ex: Chapitre 3  Les fonctions affines",value:m.chapitre,onChange:D=>h(k=>({...k,chapitre:D.target.value})),required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Type de sance"}),n.jsx("select",{className:"form-select",value:m.typeContenu,onChange:D=>h(k=>({...k,typeContenu:D.target.value})),children:Object.entries(Pi).map(([D,k])=>n.jsxs("option",{value:D,children:[k.emoji," ",k.label]},D))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Statut"}),n.jsx("select",{className:"form-select",value:m.statut,onChange:D=>h(k=>({...k,statut:D.target.value})),children:Object.entries(yc).map(([D,k])=>n.jsx("option",{value:D,children:k.label},D))})]})]}),m.statut==="annule"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Motif d'annulation"}),n.jsx("input",{className:"form-input",placeholder:"Ex: Grve enseignants, sortie scolaire...",value:m.motifAnnulation,onChange:D=>h(k=>({...k,motifAnnulation:D.target.value}))})]}),m.statut==="reporte"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Nouvelle date (report)"}),n.jsx("input",{type:"date",className:"form-input",value:m.dateReport,onChange:D=>h(k=>({...k,dateReport:D.target.value}))})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Contenu de la sance"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Contenu (mise en forme riche)"}),n.jsx(qX,{value:m.contenu,onChange:D=>h(k=>({...k,contenu:D})),placeholder:"Dcrivez le contenu enseign, les exemples traits, les formules vues..."})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),n.jsx("textarea",{className:"form-textarea",placeholder:"Ex: L'lve sera capable de rsoudre une quation du second degr...",value:m.objectifs,onChange:D=>h(k=>({...k,objectifs:D.target.value})),rows:2})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Comptences vises"}),n.jsx("div",{className:"competences-container",children:NX.map(D=>n.jsx("button",{type:"button",className:`competence-tag ${m.competences.includes(D)?"selected":""}`,onClick:()=>O(D),children:D},D))})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Signet d'valuation"}),n.jsxs("div",{className:"signet-section",children:[n.jsxs("div",{className:"signet-toggle",onClick:()=>h(D=>({...D,isMarqueEvaluation:!D.isMarqueEvaluation})),children:[n.jsx("div",{className:`toggle-switch ${m.isMarqueEvaluation?"on":""}`}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1f2937"},children:"Marquer pour valuation"}),n.jsx("div",{style:{fontSize:"0.78rem",color:"#6b7280"},children:"Ce contenu sera valu ultrieurement"})]})]}),m.isMarqueEvaluation&&n.jsx("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Type d'valuation"}),n.jsxs("select",{className:"form-select",value:m.typeEvaluation,onChange:D=>h(k=>({...k,typeEvaluation:D.target.value})),children:[n.jsx("option",{value:"",children:"Choisir..."}),Object.entries(rT).map(([D,k])=>n.jsx("option",{value:D,children:k},D))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date prvue d'valuation"}),n.jsx("input",{type:"date",className:"form-input",value:m.dateEvaluationPrevue,onChange:D=>h(k=>({...k,dateEvaluationPrevue:D.target.value}))})]})]})})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Pices jointes"}),p.length>0&&n.jsx("div",{className:"pieces-jointes-list",children:p.map(D=>n.jsxs("div",{className:"piece-jointe-item",children:[n.jsx("span",{children:""}),n.jsx("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",children:D.nom}),n.jsxs("span",{style:{color:"#9ca3af",fontSize:"0.75rem"},children:["(",Math.round(D.taille/1024)," Ko)"]}),n.jsx("button",{type:"button",onClick:()=>L(D.url),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",marginLeft:"auto"},children:""})]},D.url))}),n.jsxs("label",{className:"upload-zone",children:[S?"Envoi en cours...":" Cliquer pour ajouter un fichier (PDF, image  max 10 Mo)",n.jsx("input",{type:"file",style:{display:"none"},accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.ppt,.pptx",onChange:P,disabled:S})]})]}),n.jsxs("div",{className:"editor-card",children:[n.jsx("div",{className:"editor-section-title",children:" Notes prives"}),n.jsx("textarea",{className:"form-textarea",placeholder:"Notes personnelles (non visibles par l'administration)...",value:m.notesPrivees,onChange:D=>h(k=>({...k,notesPrivees:D.target.value})),rows:3}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Ces notes sont uniquement visibles par vous."})]}),z&&n.jsx("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.85rem"},children:z}),n.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingBottom:"2rem"},children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(`/prof/cahiers/${e}`),children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:_,style:{minWidth:160},children:_?"Enregistrement...":E?" Mettre  jour":" Enregistrer la sance"})]})]})]}):null},RX=()=>{const{currentUser:e}=Ct(),t=e?.uid||"",r=e?.displayName||"Parent",[a,l]=y.useState([]),[o,u]=y.useState(null),[d,m]=y.useState(null),[h,p]=y.useState(!0),[v,x]=y.useState(!1),[b,_]=y.useState(null),[N,S]=y.useState(!1),[C,z]=y.useState(""),[w,E]=y.useState(!1),[O,P]=y.useState(null),[L,T]=y.useState(null),[D,k]=y.useState("apercu");y.useEffect(()=>{$()},[t]),y.useEffect(()=>{o&&B(o)},[o]);const $=async()=>{try{p(!0),_(null);const F=await SK(t);l(F),F.length===1&&u(F[0].enfantId)}catch(F){_("Erreur lors du chargement des enfants."),console.error(F)}finally{p(!1)}},B=async F=>{try{x(!0),_(null);const q=await CK(t,F);m(q)}catch(q){_(q.message||"Erreur lors du chargement du suivi."),m(null)}finally{x(!1)}},le=async F=>{if(F.preventDefault(),P(null),T(null),!C.trim()){P("Veuillez saisir le code d'invitation.");return}try{E(!0);const q=await _K(t,C);T(`${q.enfantNom} a t ajout avec succs !`),z(""),S(!1),await $(),u(q.enfantId)}catch(q){P(q.message||"Erreur lors de la liaison.")}finally{E(!1)}},oe=async F=>{if(window.confirm(`tes-vous sr de vouloir retirer ${F.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await wK(F.id,t),o===F.enfantId&&(u(null),m(null)),await $()}catch(J){_(J.message||"Erreur lors de la suppression.")}};return h?n.jsxs("div",{className:"parent-loading",children:[n.jsx("div",{className:"parent-spinner"}),n.jsx("p",{children:"Chargement de votre espace parent..."})]}):n.jsxs("div",{className:"parent-dashboard",children:[n.jsxs("header",{className:"parent-header",children:[n.jsxs("div",{className:"parent-header-info",children:[n.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),n.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",n.jsx("strong",{children:r}),"  Suivez la progression de vos enfants"]})]}),n.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{S(!N),P(null),T(null)},children:" Ajouter un enfant"})]}),b&&n.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[n.jsxs("span",{children:[" ",b]}),n.jsx("button",{onClick:()=>_(null),children:""})]}),L&&n.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[n.jsxs("span",{children:[" ",L]}),n.jsx("button",{onClick:()=>T(null),children:""})]}),N&&n.jsxs("div",{className:"parent-form-liaison",children:[n.jsx("h3",{children:" Lier un enfant  votre compte"}),n.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),n.jsxs("form",{onSubmit:le,className:"parent-form",children:[n.jsxs("div",{className:"parent-form-group",children:[n.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),n.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:C,onChange:F=>z(F.target.value.toUpperCase()),maxLength:14,disabled:w,className:"parent-input"})]}),O&&n.jsxs("p",{className:"parent-form-erreur",children:[" ",O]}),n.jsxs("div",{className:"parent-form-actions",children:[n.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:w,children:w?"Vrification...":" Valider"}),n.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>S(!1),children:"Annuler"})]})]})]}),a.length===0?n.jsxs("div",{className:"parent-empty-state",children:[n.jsx("div",{className:"parent-empty-icon",children:""}),n.jsx("h2",{children:"Aucun enfant li"}),n.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),n.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>S(!0),children:" Ajouter mon premier enfant"})]}):n.jsxs("div",{className:"parent-content",children:[n.jsxs("aside",{className:"parent-sidebar",children:[n.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),n.jsx("ul",{className:"parent-enfants-liste",children:a.map(F=>n.jsxs("li",{className:`parent-enfant-card ${o===F.enfantId?"parent-enfant-actif":""}`,onClick:()=>u(F.enfantId),children:[n.jsx("div",{className:"parent-enfant-avatar",children:F.enfantNom.charAt(0).toUpperCase()}),n.jsxs("div",{className:"parent-enfant-info",children:[n.jsx("span",{className:"parent-enfant-nom",children:F.enfantNom}),F.enfantClasse&&n.jsx("span",{className:"parent-enfant-classe",children:F.enfantClasse})]}),n.jsx("button",{className:"parent-enfant-supprimer",onClick:q=>{q.stopPropagation(),oe(F)},title:"Retirer cet enfant",children:""})]},F.id))})]}),n.jsx("main",{className:"parent-main",children:o?v?n.jsxs("div",{className:"parent-loading",children:[n.jsx("div",{className:"parent-spinner"}),n.jsx("p",{children:"Chargement du suivi..."})]}):d?n.jsxs("div",{className:"parent-dashboard-detail",children:[n.jsxs("div",{className:"parent-enfant-header",children:[n.jsxs("div",{className:"parent-enfant-header-info",children:[n.jsx("h2",{children:d.enfant.nom}),d.enfant.classe&&n.jsx("span",{className:"parent-badge",children:d.enfant.classe}),d.enfant.derniereConnexion&&n.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",ex(d.enfant.derniereConnexion)]})]}),n.jsx("p",{className:"parent-message-motivation",children:MK(d.scoreGlobal)})]}),n.jsxs("div",{className:"parent-indicateurs",children:[n.jsxs("div",{className:"parent-card parent-card-score",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Score Global"}),n.jsxs("span",{className:`parent-card-value parent-score-${d.scoreGlobal>=60?"bon":d.scoreGlobal>=40?"moyen":"bas"}`,children:[d.scoreGlobal,"/100"]})]})]}),n.jsxs("div",{className:"parent-card parent-card-streak",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Streak"}),n.jsxs("span",{className:"parent-card-value",children:[d.streak.actuel," jour",d.streak.actuel>1?"s":""]})]})]}),n.jsxs("div",{className:"parent-card parent-card-lacunes",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Lacunes"}),n.jsxs("span",{className:"parent-card-value",children:[d.lacunes.length," matire",d.lacunes.length>1?"s":""]})]})]}),n.jsxs("div",{className:"parent-card parent-card-objectifs",children:[n.jsx("div",{className:"parent-card-icon",children:""}),n.jsxs("div",{className:"parent-card-content",children:[n.jsx("span",{className:"parent-card-label",children:"Objectifs"}),n.jsxs("span",{className:"parent-card-value",children:[d.objectifs.filter(F=>F.statut==="atteint").length,"/",d.objectifs.length]})]})]})]}),n.jsxs("div",{className:"parent-section parent-section-semaine",children:[n.jsx("h3",{children:" Activit de la semaine"}),n.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((F,q)=>n.jsxs("div",{className:`parent-jour ${d.streak.semaineCourante[q]?"parent-jour-actif":"parent-jour-inactif"}`,children:[n.jsx("span",{className:"parent-jour-label",children:F}),n.jsx("span",{className:"parent-jour-icon",children:d.streak.semaineCourante[q]?"":""})]},F))})]}),n.jsxs("div",{className:"parent-onglets",children:[n.jsx("button",{className:`parent-onglet ${D==="apercu"?"parent-onglet-actif":""}`,onClick:()=>k("apercu"),children:" Aperu"}),n.jsxs("button",{className:`parent-onglet ${D==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>k("lacunes"),children:[" Lacunes (",d.lacunes.length,")"]}),n.jsxs("button",{className:`parent-onglet ${D==="alertes"?"parent-onglet-actif":""}`,onClick:()=>k("alertes"),children:[" Alertes (",d.alertes.length,")"]}),n.jsx("button",{className:`parent-onglet ${D==="resume"?"parent-onglet-actif":""}`,onClick:()=>k("resume"),children:" Rsum"})]}),n.jsxs("div",{className:"parent-onglet-contenu",children:[D==="apercu"&&n.jsxs("div",{className:"parent-tab-apercu",children:[n.jsxs("div",{className:"parent-section",children:[n.jsx("h3",{children:" Derniers quiz passs"}),d.derniersQuiz.length===0?n.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):n.jsx("div",{className:"parent-quiz-liste",children:d.derniersQuiz.map((F,q)=>n.jsxs("div",{className:`parent-quiz-item ${F.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[n.jsxs("div",{className:"parent-quiz-info",children:[n.jsx("span",{className:"parent-quiz-discipline",children:F.disciplineNom}),n.jsx("span",{className:"parent-quiz-titre",children:F.quizTitre})]}),n.jsxs("div",{className:"parent-quiz-score",children:[n.jsxs("span",{className:`parent-quiz-note ${F.reussi?"note-ok":"note-ko"}`,children:[F.noteSur20,"/20"]}),n.jsx("span",{className:"parent-quiz-statut",children:F.reussi?" Russi":" chou"})]}),n.jsx("span",{className:"parent-quiz-date",children:ex(F.datePassage)})]},q))})]}),n.jsxs("div",{className:"parent-section",children:[n.jsx("h3",{children:" Objectifs de la semaine"}),d.objectifs.length===0?n.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):n.jsx("div",{className:"parent-objectifs-liste",children:d.objectifs.map((F,q)=>n.jsxs("div",{className:"parent-objectif-item",children:[n.jsxs("div",{className:"parent-objectif-header",children:[n.jsx("span",{className:"parent-objectif-titre",children:F.titre}),n.jsx("span",{className:`parent-objectif-statut parent-statut-${F.statut}`,children:F.statut==="atteint"?" Atteint":F.statut==="en_cours"?" En cours":F.statut==="echoue"?" chou":" Non commenc"})]}),n.jsx("div",{className:"parent-progress-bar",children:n.jsx("div",{className:`parent-progress-fill parent-progress-${F.statut}`,style:{width:`${Math.min(F.progression/F.cible*100,100)}%`}})}),n.jsxs("span",{className:"parent-objectif-detail",children:[F.progression,"/",F.cible]})]},q))})]})]}),D==="lacunes"&&n.jsx("div",{className:"parent-tab-lacunes",children:d.lacunes.length===0?n.jsxs("div",{className:"parent-vide-section",children:[n.jsx("span",{className:"parent-vide-icon",children:""}),n.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):n.jsx("div",{className:"parent-lacunes-liste",children:d.lacunes.map((F,q)=>n.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:Vf(F.niveauUrgence)},children:[n.jsxs("div",{className:"parent-lacune-header",children:[n.jsx("span",{className:"parent-lacune-discipline",children:F.disciplineNom}),n.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:Vf(F.niveauUrgence),color:"#fff"},children:QM(F.niveauUrgence)})]}),n.jsxs("div",{className:"parent-lacune-details",children:[n.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",n.jsxs("strong",{children:[F.moyenne,"/20"]})]}),n.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",VM(F.tendance)," ",F.tendance==="hausse"?"En hausse":F.tendance==="baisse"?"En baisse":"Stable"]})]}),n.jsx("p",{className:"parent-lacune-conseil",children:F.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":F.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},q))})}),D==="alertes"&&n.jsx("div",{className:"parent-tab-alertes",children:d.alertes.length===0?n.jsxs("div",{className:"parent-vide-section",children:[n.jsx("span",{className:"parent-vide-icon",children:""}),n.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):n.jsx("div",{className:"parent-alertes-liste",children:d.alertes.map((F,q)=>n.jsxs("div",{className:`parent-alerte-item parent-alerte-${F.niveau}`,children:[n.jsxs("div",{className:"parent-alerte-header",children:[n.jsx("span",{className:"parent-alerte-titre",children:F.titre}),n.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:OK(F.niveau),color:"#fff"},children:DK(F.type)})]}),n.jsx("p",{className:"parent-alerte-message",children:F.message}),n.jsx("span",{className:"parent-alerte-date",children:ex(F.dateCreation)})]},q))})}),D==="resume"&&d.resume&&n.jsxs("div",{className:"parent-tab-resume",children:[n.jsxs("div",{className:"parent-resume-header",children:[n.jsxs("h3",{children:[" Rsum : ",d.resume.semaine]}),n.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",d.resume.scoreGlobal,"/100"," ",o2(d.resume.evolutionScore)]})]}),n.jsxs("div",{className:"parent-resume-stats",children:[n.jsxs("div",{className:"parent-resume-stat",children:[n.jsx("span",{className:"parent-resume-stat-value",children:d.resume.nombreQuizSemaine}),n.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),n.jsxs("div",{className:"parent-resume-stat",children:[n.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.joursActifsSemaine,"/7"]}),n.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),n.jsxs("div",{className:"parent-resume-stat",children:[n.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.tempsEstimeMinutes," min"]}),n.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),n.jsxs("div",{className:"parent-resume-stat",children:[n.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.objectifsAtteints,"/",d.resume.objectifsTotal]}),n.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),d.resume.evolutionDisciplines.length>0&&n.jsxs("div",{className:"parent-section",children:[n.jsx("h4",{children:" volution par matire"}),n.jsx("div",{className:"parent-evolution-liste",children:d.resume.evolutionDisciplines.map((F,q)=>n.jsxs("div",{className:"parent-evolution-item",children:[n.jsx("span",{className:"parent-evolution-discipline",children:F.disciplineNom}),n.jsxs("div",{className:"parent-evolution-scores",children:[n.jsxs("span",{className:"parent-evolution-prec",children:[F.moyenneSemainePrecedente,"/20"]}),n.jsx("span",{className:"parent-evolution-fleche",children:o2(F.evolution)}),n.jsxs("span",{className:"parent-evolution-courante",children:[F.moyenneSemaineCourante,"/20"]}),n.jsxs("span",{className:`parent-evolution-ecart ${F.ecart>0?"ecart-positif":F.ecart<0?"ecart-negatif":""}`,children:["(",F.ecart>0?"+":"",F.ecart,")"]})]})]},q))})]}),d.resume.disciplinesEnDifficulte.length>0&&n.jsxs("div",{className:"parent-section parent-section-warning",children:[n.jsx("h4",{children:" Matires ncessitant une attention"}),n.jsx("ul",{className:"parent-disciplines-difficulte",children:d.resume.disciplinesEnDifficulte.map((F,q)=>n.jsx("li",{children:F},q))})]})]}),D==="resume"&&!d.resume&&n.jsxs("div",{className:"parent-vide-section",children:[n.jsx("span",{className:"parent-vide-icon",children:""}),n.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):n.jsxs("div",{className:"parent-erreur-dashboard",children:[n.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),n.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&B(o),children:" Ressayer"})]}):n.jsx("div",{className:"parent-select-enfant",children:n.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},LX="https://api.pedaclic.sn",Dl={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},IX={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},Id={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function $X(e){try{const t=await fetch(`${LX}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.error||`Erreur serveur (${t.status})`)}const r=await t.json();if(!r.success)throw new Error(r.error||"La gnration a chou.");return r}catch(t){throw console.error("[aiGeneratorService] Erreur gnration:",t),t instanceof TypeError&&t.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):t}}async function BX(e,t,r,a){try{const l=await nr(je(se,"generated_content"),{userId:e,type:t.type,discipline:t.discipline,disciplineId:a,classe:t.classe,chapitre:t.chapitre,content:r,options:t.options||null,createdAt:He.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",l.id),l.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",l),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function UX(e,t,r,a){try{const l=r.map((d,m)=>({id:`q_${Date.now()}_${m}`,question:d.question,options:d.options,reponseCorrecte:d.reponseCorrecte,explication:d.explication||"",difficulte:d.difficulte||"moyen",points:d.points||2})),o={disciplineId:a,titre:`Quiz IA  ${t.chapitre}`,description:`Quiz auto-gnr pour ${t.discipline} (${t.classe})  Chapitre : ${t.chapitre}`,questions:l,duree:15,isPremium:!0,noteMinimale:10,auteurId:e,source:"ia_generator",createdAt:He.now()},u=await nr(je(se,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",u.id),u.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",l),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function HX(e,t=20){try{const r=qe(je(se,"generated_content"),we("userId","==",e),nt("createdAt","desc")),a=await ke(r),l=[];return a.forEach(o=>{l.length<t&&l.push({id:o.id,...o.data()})}),l}catch(r){throw console.error("[aiGeneratorService] Erreur chargement historique:",r),new Error("Erreur lors du chargement de l'historique.")}}async function GX(e){try{await _n(be(se,"generated_content",e)),console.log("[aiGeneratorService] Contenu supprim:",e)}catch(t){throw console.error("[aiGeneratorService] Erreur suppression:",t),new Error("Erreur lors de la suppression du contenu.")}}const FX=["6me","5me","4me","3me","2nde","1re","Terminale"],QX=[30,45,60,90,120],VX=()=>{const{currentUser:e}=Ct(),[t,r]=y.useState(1),[a,l]=y.useState([]),[o,u]=y.useState(null),[d,m]=y.useState(""),[h,p]=y.useState(""),[v,x]=y.useState(""),[b,_]=y.useState(null),[N,S]=y.useState({}),[C,z]=y.useState(!1),[w,E]=y.useState(null),[O,P]=y.useState(null),[L,T]=y.useState(!1),[D,k]=y.useState(!1),[$,B]=y.useState(null),[le,oe]=y.useState(!1),[F,q]=y.useState([]),[J,Q]=y.useState(!1),[ve,U]=y.useState(!0),ge=y.useMemo(()=>{const V=new Map;return a.forEach(ye=>{V.has(ye.nom)||V.set(ye.nom,ye)}),Array.from(V.values())},[a]);y.useEffect(()=>{(async()=>{try{U(!0);const ye=qe(je(se,"disciplines"),nt("nom")),Re=await ke(ye),Ie=[];Re.forEach(Qe=>{const Gt=Qe.data();Gt.nom&&Gt.nom.trim()&&Ie.push({id:Qe.id,nom:Gt.nom||"",classe:Gt.classe||"",niveau:Gt.niveau||""})}),l(Ie)}catch(ye){console.error("[AIGenerator] Erreur chargement disciplines:",ye),P("Impossible de charger les disciplines.")}finally{U(!1)}})()},[]);const ee=V=>{u(V),P(null)},me=()=>{const V=[];if(o||V.push("discipline"),d||V.push("classe"),(!h||h<1)&&V.push("dure de la leon"),V.length>0){P(`Champs requis manquants : ${V.join(", ")}`);return}r(2),P(null)},xe=()=>{if(!v.trim()){P("Veuillez saisir le titre du chapitre.");return}r(3),P(null)},pe=V=>{_(V),r(4),P(null)},H=()=>{t>1&&(r(V=>V-1),P(null),t===5&&(E(null),k(!1),B(null)))},de=()=>{r(1),u(null),m(""),p(""),x(""),_(null),S({}),E(null),P(null),k(!1),B(null)},Ee=async()=>{if(!o||!b||!v.trim()||!d){P("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}z(!0),P(null);try{const V={...N,duree:typeof h=="number"?h:void 0},ye={type:b,discipline:o.nom,classe:d,chapitre:v.trim(),options:Object.keys(V).length>0?V:void 0},Re=await $X(ye);E(Re),r(5)}catch(V){const ye=V instanceof Error?V.message:"Erreur inconnue";P(ye)}finally{z(!1)}},ne=async()=>{if(!(!e||!w||!o||!b)){T(!0),P(null);try{let V;const Re=a.find(Qe=>Qe.nom===o.nom&&Qe.classe===d)?.id||o.id,Ie={type:b,discipline:o.nom,classe:d,chapitre:v.trim(),options:{...N,duree:typeof h=="number"?h:void 0}};w.type==="quiz"&&w.data.questions?V=await UX(e.uid,Ie,w.data.questions,Re):V=await BX(e.uid,Ie,w.data.content||"",Re),B(V),k(!0)}catch(V){const ye=V instanceof Error?V.message:"Erreur de sauvegarde";P(ye)}finally{T(!1)}}},Y=async()=>{if(e){Q(!0);try{const V=await HX(e.uid);q(V),oe(!0)}catch(V){console.error("[AIGenerator] Erreur historique:",V)}finally{Q(!1)}}},I=async V=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await GX(V),q(ye=>ye.filter(Re=>Re.id!==V))}catch(ye){console.error("[AIGenerator] Erreur suppression:",ye)}},ae=y.useCallback(V=>{if(!V)return"";let ye=V.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return ye=ye.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,Re=>"<ul>"+Re.replace(/<br \/>/g,"")+"</ul>"),`<p>${ye}</p>`},[]);return e?e.isPremium?n.jsxs("div",{className:"ai-generator",children:[n.jsxs("div",{className:"ai-generator__header",children:[n.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),n.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),n.jsxs("div",{className:"ai-generator__header-actions",children:[n.jsx("button",{className:"btn btn--outline btn--sm",onClick:Y,disabled:J,children:J?" Chargement...":" Historique"}),t>1&&n.jsx("button",{className:"btn btn--outline btn--sm",onClick:de,children:" Recommencer"})]})]}),n.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(V=>n.jsxs("div",{className:`ai-generator__step-indicator ${V===t?"ai-generator__step-indicator--active":""} ${V<t?"ai-generator__step-indicator--done":""}`,children:[n.jsx("span",{className:"ai-generator__step-number",children:V<t?"":V}),n.jsxs("span",{className:"ai-generator__step-label",children:[V===1&&"Paramtres",V===2&&"Chapitre",V===3&&"Type",V===4&&"Options",V===5&&"Rsultat"]})]},V))}),O&&n.jsxs("div",{className:"ai-generator__error",children:[n.jsx("span",{className:"ai-generator__error-icon",children:""}),O,n.jsx("button",{className:"ai-generator__error-close",onClick:()=>P(null),children:""})]}),n.jsxs("div",{className:"ai-generator__content",children:[t===1&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsxs("label",{className:"ai-generator__label",children:["Discipline ",n.jsx("span",{className:"ai-generator__required",children:"*"})]}),ve?n.jsxs("div",{className:"ai-generator__loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des disciplines..."})]}):ge.length===0?n.jsx("div",{className:"ai-generator__empty",children:n.jsx("p",{children:"Aucune discipline disponible."})}):n.jsx("div",{className:"ai-generator__discipline-grid",children:ge.map(V=>n.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===V.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>ee(V),children:n.jsx("span",{className:"ai-generator__discipline-name",children:V.nom})},V.id))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsxs("label",{className:"ai-generator__label",children:["Classe ",n.jsx("span",{className:"ai-generator__required",children:"*"})]}),n.jsx("div",{className:"ai-generator__classe-grid",children:FX.map(V=>n.jsx("button",{className:`ai-generator__classe-btn ${d===V?"ai-generator__classe-btn--selected":""}`,onClick:()=>{m(V),P(null)},children:V},V))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",n.jsx("span",{className:"ai-generator__required",children:"*"})]}),n.jsxs("div",{className:"ai-generator__duree-group",children:[n.jsx("div",{className:"ai-generator__duree-presets",children:QX.map(V=>n.jsxs("button",{className:`ai-generator__duree-btn ${h===V?"ai-generator__duree-btn--selected":""}`,onClick:()=>{p(V),P(null)},children:[V," min"]},V))}),n.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:h,onChange:V=>{const ye=parseInt(V.target.value);p(isNaN(ye)?"":ye),P(null)},placeholder:"Autre dure..."})]})]}),n.jsxs("div",{className:"ai-generator__nav",children:[n.jsx("div",{})," ",n.jsx("button",{className:"btn btn--primary",onClick:me,disabled:!o||!d||!h,children:"Continuer "})]})]}),t===2&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),n.jsxs("div",{className:"ai-generator__recap",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),n.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:v,onChange:V=>x(V.target.value),onKeyDown:V=>V.key==="Enter"&&xe(),autoFocus:!0})]}),n.jsxs("div",{className:"ai-generator__nav",children:[n.jsx("button",{className:"btn btn--outline",onClick:H,children:" Retour"}),n.jsx("button",{className:"btn btn--primary",onClick:xe,disabled:!v.trim(),children:"Continuer "})]})]}),t===3&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),n.jsxs("div",{className:"ai-generator__recap",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),n.jsx("span",{className:"ai-generator__recap-value",children:v})]}),n.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(Dl).map(V=>n.jsxs("button",{className:"ai-generator__type-card",onClick:()=>pe(V),children:[n.jsx("span",{className:"ai-generator__type-icon",children:Id[V]}),n.jsx("span",{className:"ai-generator__type-name",children:Dl[V]}),n.jsx("span",{className:"ai-generator__type-desc",children:IX[V]})]},V))}),n.jsx("div",{className:"ai-generator__nav",children:n.jsx("button",{className:"btn btn--outline",onClick:H,children:" Retour"})})]}),t===4&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),n.jsxs("div",{className:"ai-generator__recap",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),n.jsx("span",{className:"ai-generator__recap-value",children:v}),n.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[b&&Id[b]," ",b&&Dl[b]]})]}),n.jsxs("div",{className:"ai-generator__options",children:[n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),n.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(V=>n.jsxs("label",{className:"ai-generator__radio",children:[n.jsx("input",{type:"radio",name:"difficulte",value:V,checked:N.difficulte===V,onChange:()=>S(ye=>({...ye,difficulte:V}))}),n.jsxs("span",{className:"ai-generator__radio-label",children:[V==="facile"&&" Facile",V==="moyen"&&" Moyen",V==="difficile"&&" Difficile"]})]},V))})]}),b==="sujet_examen"&&n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),n.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(V=>n.jsxs("label",{className:"ai-generator__radio",children:[n.jsx("input",{type:"radio",name:"typeExamen",value:V,checked:N.typeExamen===V,onChange:()=>S(ye=>({...ye,typeExamen:V}))}),n.jsx("span",{className:"ai-generator__radio-label",children:V})]},V))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),n.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:N.objectifs||"",onChange:V=>S(ye=>({...ye,objectifs:V.target.value||void 0}))})]}),n.jsxs("div",{className:"ai-generator__field",children:[n.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),n.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:N.consignesSpeciales||"",onChange:V=>S(ye=>({...ye,consignesSpeciales:V.target.value||void 0}))})]})]}),n.jsxs("div",{className:"ai-generator__nav",children:[n.jsx("button",{className:"btn btn--outline",onClick:H,children:" Retour"}),n.jsx("button",{className:"btn btn--primary btn--lg",onClick:Ee,disabled:C,children:C?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),C&&n.jsxs("div",{className:"ai-generator__generating",children:[n.jsxs("div",{className:"ai-generator__generating-animation",children:[n.jsx("span",{children:""}),n.jsx("span",{children:""}),n.jsx("span",{children:""})]}),n.jsxs("p",{children:["L'IA rdige votre"," ",b&&Dl[b].toLowerCase(),"..."]}),n.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),t===5&&w&&n.jsxs("div",{className:"ai-generator__step-content",children:[n.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),n.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[n.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[b&&Id[b]," ",b&&Dl[b]]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),n.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),n.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),n.jsx("span",{className:"ai-generator__recap-value",children:d}),n.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),n.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]}),n.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),n.jsx("span",{className:"ai-generator__recap-value",children:v})]}),n.jsxs("div",{className:"ai-generator__preview",children:[n.jsxs("div",{className:"ai-generator__preview-header",children:[n.jsx("h3",{children:"Prvisualisation"}),n.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const V=w.type==="quiz"?JSON.stringify(w.data.questions,null,2):w.data.content||"";navigator.clipboard.writeText(V),alert("Contenu copi dans le presse-papier !")},children:" Copier"})]}),n.jsx("div",{className:"ai-generator__preview-body",children:w.type==="quiz"&&w.data.questions?n.jsxs("div",{className:"ai-generator__quiz-preview",children:[n.jsxs("p",{className:"ai-generator__quiz-count",children:[w.data.questions.length," questions gnres"]}),w.data.questions.map((V,ye)=>n.jsxs("div",{className:"ai-generator__quiz-item",children:[n.jsxs("div",{className:"ai-generator__quiz-question",children:[n.jsxs("strong",{children:["Q",ye+1,"."]})," ",V.question,n.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${V.difficulte}`,children:V.difficulte})]}),n.jsx("div",{className:"ai-generator__quiz-options",children:V.options.map((Re,Ie)=>n.jsxs("div",{className:`ai-generator__quiz-option ${Ie===V.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[n.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+Ie)}),Re,Ie===V.reponseCorrecte&&" "]},Ie))}),V.explication&&n.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",V.explication]})]},ye))]}):n.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:ae(w.data.content||"")}})})]}),n.jsxs("div",{className:"ai-generator__actions",children:[D?n.jsxs("div",{className:"ai-generator__save-success",children:[n.jsx("span",{children:" Sauvegard avec succs !"}),w.type==="quiz"&&$&&n.jsx(Le,{to:`/quiz/${$}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):n.jsx("button",{className:"btn btn--primary btn--lg",onClick:ne,disabled:L,children:L?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):n.jsx(n.Fragment,{children:" Sauvegarder dans PedaClic"})}),n.jsx("button",{className:"btn btn--outline",onClick:de,children:" Nouvelle gnration"})]})]})]}),le&&n.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>oe(!1),children:n.jsxs("div",{className:"ai-generator__modal",onClick:V=>V.stopPropagation(),children:[n.jsxs("div",{className:"ai-generator__modal-header",children:[n.jsx("h2",{children:" Historique des gnrations"}),n.jsx("button",{className:"ai-generator__modal-close",onClick:()=>oe(!1),children:""})]}),n.jsx("div",{className:"ai-generator__modal-body",children:F.length===0?n.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):n.jsx("div",{className:"ai-generator__history-list",children:F.map(V=>n.jsxs("div",{className:"ai-generator__history-item",children:[n.jsxs("div",{className:"ai-generator__history-info",children:[n.jsxs("span",{className:"ai-generator__history-type",children:[Id[V.type]," ",Dl[V.type]]}),n.jsxs("span",{className:"ai-generator__history-details",children:[V.discipline," (",V.classe,")  ",V.chapitre]}),n.jsx("span",{className:"ai-generator__history-date",children:V.createdAt?.toDate?V.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),n.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>V.id&&I(V.id),title:"Supprimer",children:""})]},V.id))})})]})})]}):n.jsx("div",{className:"ai-generator",children:n.jsxs("div",{className:"ai-generator__gate",children:[n.jsx("div",{className:"ai-generator__gate-icon",children:""}),n.jsx("h2",{children:"Fonctionnalit Premium"}),n.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),n.jsxs("div",{className:"ai-generator__gate-price",children:[n.jsx("span",{className:"price",children:"2 000 FCFA"}),n.jsx("span",{className:"period",children:"/mois"})]}),n.jsx(Le,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):n.jsx("div",{className:"ai-generator",children:n.jsxs("div",{className:"ai-generator__gate",children:[n.jsx("div",{className:"ai-generator__gate-icon",children:""}),n.jsx("h2",{children:"Connexion requise"}),n.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),n.jsx(Le,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},ki={manuel:"Manuels scolaires",annale:"Annales corriges",guide:"Guides de rvision",litterature:"Culture gnrale & Littrature",fiche:"Fiches de lectures"},qi={manuel:"",annale:"",guide:"",litterature:"",fiche:""},Wa="ebooks";async function YX(){try{const e=qe(je(se,Wa),we("isActive","==",!0),nt("ordre","asc"));return(await ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks:",e),e}}async function KX(){try{const e=qe(je(se,Wa),nt("ordre","asc"));return(await ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks admin:",e),e}}async function XX(e){try{const t=await Vt(be(se,Wa,e));return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||null}:null}catch(t){throw console.error(" Erreur rcupration ebook:",t),t}}function WX(e,t){let r=[...e];if(t.categorie&&t.categorie!=="all"&&(r=r.filter(a=>a.categorie===t.categorie)),t.niveau&&t.niveau!=="all"&&(r=r.filter(a=>a.niveau===t.niveau)),t.classe&&t.classe!=="all"&&(r=r.filter(a=>a.classe===t.classe||a.classe==="all")),t.matiere&&(r=r.filter(a=>a.matiere?.toLowerCase().includes(t.matiere.toLowerCase()))),t.recherche){const a=t.recherche.toLowerCase();r=r.filter(l=>l.titre.toLowerCase().includes(a)||l.auteur.toLowerCase().includes(a)||l.description.toLowerCase().includes(a)||l.tags?.some(o=>o.toLowerCase().includes(a)))}return r}async function ZX(e,t,r,a,l){try{const o=Jr(en,`ebooks/pdf/${Date.now()}_${t.name}`);await zi(o,t);const u=await Oi(o);let d="";if(r){const v=Jr(en,`ebooks/covers/${Date.now()}_${r.name}`);await zi(v,r),d=await Oi(v)}let m="";if(a){const v=Jr(en,`ebooks/previews/${Date.now()}_${a.name}`);await zi(v,a),m=await Oi(v)}const h={...e,fichierURL:u,couvertureURL:d,aperuURL:m,tailleFichier:t.size,nombreTelechargements:0,nombreVues:0,uploadedBy:l||"admin",createdAt:ft(),updatedAt:ft()},p=await nr(je(se,Wa),h);return console.log(` Ebook ajout : ${e.titre} (ID: ${p.id})`),p.id}catch(o){throw console.error(" Erreur ajout ebook:",o),o}}async function JX(e,t,r,a,l){try{const o={...t,updatedAt:ft()};if(r){const u=Jr(en,`ebooks/pdf/${Date.now()}_${r.name}`);await zi(u,r),o.fichierURL=await Oi(u),o.tailleFichier=r.size}if(a){const u=Jr(en,`ebooks/covers/${Date.now()}_${a.name}`);await zi(u,a),o.couvertureURL=await Oi(u)}if(l){const u=Jr(en,`ebooks/previews/${Date.now()}_${l.name}`);await zi(u,l),o.aperuURL=await Oi(u)}await We(be(se,Wa,e),o),console.log(` Ebook mis  jour : ${e}`)}catch(o){throw console.error(" Erreur mise  jour ebook:",o),o}}async function eW(e){try{const t=await XX(e);if(!t)throw new Error("Ebook introuvable");try{if(t.fichierURL){const r=Jr(en,t.fichierURL);await vc(r)}if(t.couvertureURL){const r=Jr(en,t.couvertureURL);await vc(r)}if(t.aperuURL){const r=Jr(en,t.aperuURL);await vc(r)}}catch{console.warn(" Fichiers Storage non supprims (peut-tre dj supprims)")}await _n(be(se,Wa,e)),console.log(` Ebook supprim : ${e}`)}catch(t){throw console.error(" Erreur suppression ebook:",t),t}}async function tW(e,t){try{await We(be(se,Wa,e),{isActive:t,updatedAt:ft()})}catch(r){throw console.error(" Erreur toggle ebook:",r),r}}async function rW(e){try{await We(be(se,Wa,e),{nombreVues:Wf(1)})}catch(t){console.error(" Erreur incrment vues:",t)}}async function nW(e){try{await We(be(se,Wa,e),{nombreTelechargements:Wf(1)})}catch(t){console.error(" Erreur incrment tlchargements:",t)}}function aW(e){const t={totalEbooks:e.length,totalTelechargements:0,totalVues:0,parCategorie:{manuel:0,annale:0,guide:0,litterature:0,fiche:0},ebooksActifs:0};return e.forEach(r=>{t.totalTelechargements+=r.nombreTelechargements||0,t.totalVues+=r.nombreVues||0,t.parCategorie[r.categorie]=(t.parCategorie[r.categorie]||0)+1,r.isActive&&t.ebooksActifs++}),t}function bc(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/(1024*1024)).toFixed(1)} Mo`}const aT=["Mathmatiques","Physique-Chimie","SVT","Franais","Anglais","Histoire-Gographie","Philosophie","conomie","Comptabilit","ducation civique","Arabe","Espagnol","Informatique"],iW=({isPremium:e,onReadEbook:t})=>{const[r,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,h]=y.useState({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""}),[p,v]=y.useState("grid");y.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0),d(null);const C=await YX();a(C)}catch(C){d("Erreur lors du chargement de la bibliothque"),console.error(C)}finally{o(!1)}},b=y.useMemo(()=>WX(r,m),[r,m]),_=y.useMemo(()=>{const C={all:r.length};return r.forEach(z=>{C[z.categorie]=(C[z.categorie]||0)+1}),C},[r]),N=(C,z)=>{h(w=>({...w,[C]:z}))},S=()=>{h({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""})};return l?n.jsx("div",{className:"ebook-library",children:n.jsxs("div",{className:"ebook-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement de la bibliothque..."})]})}):u?n.jsx("div",{className:"ebook-library",children:n.jsxs("div",{className:"ebook-error",children:[n.jsxs("p",{children:[" ",u]}),n.jsx("button",{onClick:x,className:"btn-retry",children:"Ressayer"})]})}):n.jsxs("div",{className:"ebook-library",children:[n.jsxs("div",{className:"ebook-library-header",children:[n.jsxs("div",{className:"ebook-header-content",children:[n.jsx("h1",{children:" Bibliothque PedaClic"}),n.jsxs("p",{className:"ebook-subtitle",children:["Manuels, annales, fiches de rvision et bien plus encore",!e&&n.jsx("span",{className:"preview-badge",children:"Aperu gratuit disponible"})]})]}),n.jsxs("div",{className:"ebook-search-bar",children:[n.jsx("input",{type:"text",placeholder:"Rechercher un ebook (titre, auteur, mot-cl)...",value:m.recherche||"",onChange:C=>N("recherche",C.target.value),className:"search-input"}),n.jsx("span",{className:"search-icon",children:""})]})]}),n.jsxs("div",{className:"ebook-categories",children:[n.jsxs("button",{className:`category-tab ${m.categorie==="all"?"active":""}`,onClick:()=>N("categorie","all"),children:[" Tous",n.jsx("span",{className:"category-count",children:_.all||0})]}),Object.keys(ki).map(C=>n.jsxs("button",{className:`category-tab ${m.categorie===C?"active":""}`,onClick:()=>N("categorie",C),children:[qi[C]," ",ki[C],n.jsx("span",{className:"category-count",children:_[C]||0})]},C))]}),n.jsxs("div",{className:"ebook-filters",children:[n.jsxs("select",{value:m.niveau||"all",onChange:C=>N("niveau",C.target.value),className:"filter-select",children:[n.jsx("option",{value:"all",children:"Tous les niveaux"}),n.jsx("option",{value:"college",children:"Collge"}),n.jsx("option",{value:"lycee",children:"Lyce"})]}),n.jsxs("select",{value:m.classe||"all",onChange:C=>N("classe",C.target.value),className:"filter-select",children:[n.jsx("option",{value:"all",children:"Toutes les classes"}),n.jsx("option",{value:"6eme",children:"6me"}),n.jsx("option",{value:"5eme",children:"5me"}),n.jsx("option",{value:"4eme",children:"4me"}),n.jsx("option",{value:"3eme",children:"3me"}),n.jsx("option",{value:"2nde",children:"2nde"}),n.jsx("option",{value:"1ere",children:"1re"}),n.jsx("option",{value:"Terminale",children:"Terminale"})]}),n.jsxs("select",{value:m.matiere||"",onChange:C=>N("matiere",C.target.value),className:"filter-select",children:[n.jsx("option",{value:"",children:"Toutes les matires"}),aT.map(C=>n.jsx("option",{value:C,children:C},C))]}),n.jsxs("div",{className:"view-toggle",children:[n.jsx("button",{className:p==="grid"?"active":"",onClick:()=>v("grid"),title:"Vue grille",children:""}),n.jsx("button",{className:p==="list"?"active":"",onClick:()=>v("list"),title:"Vue liste",children:""})]}),(m.categorie!=="all"||m.niveau!=="all"||m.classe!=="all"||m.matiere||m.recherche)&&n.jsx("button",{onClick:S,className:"btn-reset-filters",children:" Rinitialiser"})]}),n.jsx("div",{className:"ebook-results-info",children:n.jsxs("span",{children:[b.length," ebook",b.length>1?"s":""," trouv",b.length>1?"s":""]})}),b.length===0?n.jsxs("div",{className:"ebook-empty",children:[n.jsx("p",{children:" Aucun ebook trouv avec ces filtres."}),n.jsx("button",{onClick:S,className:"btn-reset-filters",children:"Voir tous les ebooks"})]}):n.jsx("div",{className:`ebook-grid ${p==="list"?"list-view":""}`,children:b.map(C=>n.jsx(sW,{ebook:C,isPremium:e,onRead:()=>t(C),viewMode:p},C.id))}),!e&&b.length>0&&n.jsx("div",{className:"ebook-premium-banner",children:n.jsxs("div",{className:"premium-banner-content",children:[n.jsx("h3",{children:" Accdez  tous les ebooks en illimit"}),n.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour lire et tlcharger tous les manuels, annales et fiches de rvision sans limite."}),n.jsx("a",{href:"/premium",className:"btn-premium",children:"S'abonner  2 000 FCFA/mois"})]})})]})},sW=({ebook:e,isPremium:t,onRead:r,viewMode:a})=>n.jsxs("div",{className:`ebook-card ${a==="list"?"ebook-card-list":""}`,children:[n.jsxs("div",{className:"ebook-cover",onClick:r,children:[e.couvertureURL?n.jsx("img",{src:e.couvertureURL,alt:e.titre,loading:"lazy"}):n.jsxs("div",{className:"ebook-cover-placeholder",children:[n.jsx("span",{className:"cover-icon",children:qi[e.categorie]}),n.jsx("span",{className:"cover-title",children:e.titre})]}),!t&&n.jsx("div",{className:"ebook-badge-premium",children:n.jsx("span",{children:" Premium"})}),n.jsx("div",{className:"ebook-badge-category",children:ki[e.categorie]})]}),n.jsxs("div",{className:"ebook-info",children:[n.jsx("h3",{className:"ebook-title",onClick:r,children:e.titre}),n.jsx("p",{className:"ebook-author",children:e.auteur}),n.jsx("p",{className:"ebook-description",children:e.description}),n.jsxs("div",{className:"ebook-meta",children:[e.classe!=="all"&&n.jsx("span",{className:"meta-tag",children:e.classe}),e.matiere&&n.jsx("span",{className:"meta-tag",children:e.matiere}),n.jsxs("span",{className:"meta-pages",children:[e.nombrePages," pages"]}),n.jsx("span",{className:"meta-size",children:bc(e.tailleFichier)})]}),n.jsxs("div",{className:"ebook-actions",children:[n.jsx("button",{className:"btn-read",onClick:r,children:t?" Lire":` Aperu (${e.pagesApercu} pages)`}),t&&n.jsx("a",{href:e.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn-download",download:!0,children:" Tlcharger"})]})]})]}),lW=({ebook:e,isPremium:t,onBack:r,onGoPremium:a})=>{const[l,o]=y.useState(!0),[u,d]=y.useState("info");y.useEffect(()=>{rW(e.id)},[e.id]);const m=()=>t?e.fichierURL:e.aperuURL?e.aperuURL:null,h=async()=>{if(!t){a();return}await nW(e.id),window.open(e.fichierURL,"_blank")},p=()=>{o(!1)};return n.jsxs("div",{className:"ebook-viewer",children:[n.jsxs("div",{className:"viewer-navbar",children:[n.jsx("button",{onClick:r,className:"btn-back",children:" Retour  la bibliothque"}),n.jsxs("div",{className:"viewer-title-bar",children:[n.jsxs("span",{className:"viewer-category",children:[qi[e.categorie]," ",ki[e.categorie]]}),n.jsx("h2",{className:"viewer-title",children:e.titre})]}),n.jsxs("div",{className:"viewer-actions-bar",children:[n.jsx("button",{className:`btn-tab ${u==="info"?"active":""}`,onClick:()=>d("info"),children:" Dtails"}),n.jsxs("button",{className:`btn-tab ${u==="read"?"active":""}`,onClick:()=>d("read"),children:[" ",t?"Lire":"Aperu"]})]})]}),u==="info"&&n.jsx("div",{className:"viewer-info-panel",children:n.jsxs("div",{className:"info-layout",children:[n.jsxs("div",{className:"info-cover-column",children:[e.couvertureURL?n.jsx("img",{src:e.couvertureURL,alt:e.titre,className:"info-cover-image"}):n.jsxs("div",{className:"info-cover-placeholder",children:[n.jsx("span",{children:qi[e.categorie]}),n.jsx("span",{children:e.titre})]}),n.jsxs("div",{className:"info-actions",children:[n.jsxs("button",{className:"btn-action-read",onClick:()=>d("read"),children:[" ",t?"Lire le document":`Aperu (${e.pagesApercu} pages)`]}),t?n.jsx("button",{className:"btn-action-download",onClick:h,children:" Tlcharger le PDF"}):n.jsx("button",{className:"btn-action-premium",onClick:a,children:" Accs complet  Passer Premium"})]})]}),n.jsxs("div",{className:"info-details-column",children:[n.jsx("h1",{className:"info-title",children:e.titre}),n.jsxs("p",{className:"info-author",children:["par ",e.auteur]}),n.jsxs("div",{className:"info-description",children:[n.jsx("h3",{children:"Description"}),n.jsx("p",{children:e.description})]}),n.jsxs("div",{className:"info-metadata",children:[n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Catgorie"}),n.jsxs("span",{className:"metadata-value",children:[qi[e.categorie]," ",ki[e.categorie]]})]}),n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Niveau"}),n.jsx("span",{className:"metadata-value",children:e.niveau==="college"?"Collge":"Lyce"})]}),e.classe!=="all"&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Classe"}),n.jsx("span",{className:"metadata-value",children:e.classe})]}),e.matiere&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Matire"}),n.jsx("span",{className:"metadata-value",children:e.matiere})]}),n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Pages"}),n.jsx("span",{className:"metadata-value",children:e.nombrePages})]}),n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Taille"}),n.jsx("span",{className:"metadata-value",children:bc(e.tailleFichier)})]}),e.annee&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"Anne"}),n.jsx("span",{className:"metadata-value",children:e.annee})]}),e.editeur&&n.jsxs("div",{className:"metadata-item",children:[n.jsx("span",{className:"metadata-label",children:"diteur"}),n.jsx("span",{className:"metadata-value",children:e.editeur})]})]}),n.jsxs("div",{className:"info-stats",children:[n.jsxs("span",{children:[" ",e.nombreVues," vue",e.nombreVues>1?"s":""]}),n.jsxs("span",{children:[" ",e.nombreTelechargements," tlchargement",e.nombreTelechargements>1?"s":""]})]}),e.tags&&e.tags.length>0&&n.jsx("div",{className:"info-tags",children:e.tags.map((v,x)=>n.jsx("span",{className:"info-tag",children:v},x))})]})]})}),u==="read"&&n.jsx("div",{className:"viewer-read-panel",children:m()?n.jsxs(n.Fragment,{children:[l&&n.jsxs("div",{className:"viewer-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement du document..."})]}),n.jsx("iframe",{src:`${m()}#toolbar=1&navpanes=0`,className:"pdf-iframe",title:e.titre,onLoad:p,style:{display:l?"none":"block"}}),!t&&n.jsx("div",{className:"viewer-premium-overlay",children:n.jsxs("div",{className:"overlay-content",children:[n.jsx("div",{className:"overlay-lock",children:""}),n.jsxs("h3",{children:["Aperu limit  ",e.pagesApercu," pages"]}),n.jsxs("p",{children:["Pour lire l'intgralit de ce document (",e.nombrePages," pages) et le tlcharger, passez  PedaClic Premium."]}),n.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),n.jsx("button",{onClick:r,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})]}):n.jsx("div",{className:"viewer-no-preview",children:n.jsxs("div",{className:"no-preview-content",children:[n.jsx("div",{className:"overlay-lock",children:""}),n.jsx("h3",{children:"Document rserv aux abonns Premium"}),n.jsxs("p",{children:["Ce document de ",e.nombrePages," pages est accessible uniquement avec un abonnement PedaClic Premium."]}),n.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),n.jsx("button",{onClick:r,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})})]})},oW=()=>{const{currentUser:e}=Ct(),t=Yt(),[r,a]=y.useState(null),l=d=>{a(d)},o=()=>{a(null)},u=()=>{t("/premium")};return r?n.jsx(lW,{ebook:r,isPremium:e?.isPremium||!1,onBack:o,onGoPremium:u}):n.jsx(iW,{isPremium:e?.isPremium||!1,onReadEbook:l})},cW=()=>{const[e,t]=y.useState([]),[r,a]=y.useState(!0),[l,o]=y.useState(null),[u,d]=y.useState(null),[m,h]=y.useState(!1),[p,v]=y.useState(null),[x,b]=y.useState(le()),[_,N]=y.useState(!1),[S,C]=y.useState(null),[z,w]=y.useState(null),[E,O]=y.useState(null),[P,L]=y.useState(null),T=y.useRef(null),D=y.useRef(null),k=y.useRef(null),[$,B]=y.useState(null);function le(){return{titre:"",auteur:"",description:"",categorie:"manuel",niveau:"college",classe:"all",matiere:"",nombrePages:0,pagesApercu:5,annee:"",editeur:"",isbn:"",tags:[],ordre:0,isActive:!0}}y.useEffect(()=>{oe()},[]);const oe=async()=>{try{a(!0),o(null);const ee=await KX();t(ee),d(aW(ee))}catch(ee){o("Erreur lors du chargement des ebooks"),console.error(ee)}finally{a(!1)}},F=ee=>{const{name:me,value:xe,type:pe}=ee.target;b(pe==="number"?H=>({...H,[me]:parseInt(xe)||0}):pe==="checkbox"?H=>({...H,[me]:ee.target.checked}):H=>({...H,[me]:xe}))},q=ee=>{const me=ee.target.value.split(",").map(xe=>xe.trim()).filter(Boolean);b(xe=>({...xe,tags:me}))},J=async ee=>{if(ee.preventDefault(),!x.titre.trim()){o("Le titre est obligatoire");return}if(!p&&!z){o("Le fichier PDF est obligatoire");return}try{N(!0),o(null),p?(await JX(p.id,x,z,E,P),C(` Ebook "${x.titre}" modifi avec succs`)):(await ZX(x,z,E,P),C(` Ebook "${x.titre}" ajout avec succs`)),ge(),await oe(),setTimeout(()=>C(null),4e3)}catch(me){o(me.message||"Erreur lors de la sauvegarde")}finally{N(!1)}},Q=ee=>{v(ee),b({titre:ee.titre,auteur:ee.auteur,description:ee.description,categorie:ee.categorie,niveau:ee.niveau,classe:ee.classe,matiere:ee.matiere||"",nombrePages:ee.nombrePages,pagesApercu:ee.pagesApercu,annee:ee.annee||"",editeur:ee.editeur||"",isbn:ee.isbn||"",tags:ee.tags||[],ordre:ee.ordre,isActive:ee.isActive}),h(!0),window.scrollTo({top:0,behavior:"smooth"})},ve=async ee=>{try{await eW(ee),B(null),C(" Ebook supprim avec succs"),await oe(),setTimeout(()=>C(null),4e3)}catch(me){o(me.message||"Erreur lors de la suppression")}},U=async(ee,me)=>{try{await tW(ee,!me),await oe()}catch(xe){o(xe.message)}},ge=()=>{b(le()),v(null),w(null),O(null),L(null),h(!1),T.current&&(T.current.value=""),D.current&&(D.current.value=""),k.current&&(k.current.value="")};return r?n.jsx("div",{className:"admin-ebooks",children:n.jsxs("div",{className:"admin-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement des ebooks..."})]})}):n.jsxs("div",{className:"admin-ebooks",children:[n.jsxs("div",{className:"admin-ebooks-header",children:[n.jsx("h1",{children:" Gestion de la Bibliothque"}),n.jsx("button",{className:"btn-add-ebook",onClick:()=>{ge(),h(!m)},children:m?" Fermer":"+ Ajouter un ebook"})]}),l&&n.jsxs("div",{className:"admin-alert error",children:[" ",l]}),S&&n.jsx("div",{className:"admin-alert success",children:S}),u&&n.jsxs("div",{className:"admin-stats-grid",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.totalEbooks}),n.jsx("span",{className:"stat-label",children:"Total ebooks"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.ebooksActifs}),n.jsx("span",{className:"stat-label",children:"Actifs"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.totalVues}),n.jsx("span",{className:"stat-label",children:"Vues totales"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("span",{className:"stat-number",children:u.totalTelechargements}),n.jsx("span",{className:"stat-label",children:"Tlchargements"})]})]}),m&&n.jsxs("div",{className:"admin-ebook-form-container",children:[n.jsx("h2",{children:p?" Modifier l'ebook":" Ajouter un ebook"}),n.jsxs("form",{onSubmit:J,className:"admin-ebook-form",children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"titre",children:"Titre *"}),n.jsx("input",{id:"titre",name:"titre",type:"text",value:x.titre,onChange:F,placeholder:"Ex: Mathmatiques 3me - Programme complet",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"auteur",children:"Auteur(s) *"}),n.jsx("input",{id:"auteur",name:"auteur",type:"text",value:x.auteur,onChange:F,placeholder:"Ex: Pr. Diallo Moussa",required:!0})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"description",children:"Description *"}),n.jsx("textarea",{id:"description",name:"description",value:x.description,onChange:F,placeholder:"Dcrivez le contenu de cet ebook...",rows:3,required:!0})]}),n.jsxs("div",{className:"form-row form-row-3",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"categorie",children:"Catgorie *"}),n.jsx("select",{id:"categorie",name:"categorie",value:x.categorie,onChange:F,children:Object.keys(ki).map(ee=>n.jsxs("option",{value:ee,children:[qi[ee]," ",ki[ee]]},ee))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),n.jsxs("select",{id:"niveau",name:"niveau",value:x.niveau,onChange:F,children:[n.jsx("option",{value:"college",children:"Collge"}),n.jsx("option",{value:"lycee",children:"Lyce"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"classe",children:"Classe"}),n.jsxs("select",{id:"classe",name:"classe",value:x.classe,onChange:F,children:[n.jsx("option",{value:"all",children:"Toutes les classes"}),n.jsx("option",{value:"6eme",children:"6me"}),n.jsx("option",{value:"5eme",children:"5me"}),n.jsx("option",{value:"4eme",children:"4me"}),n.jsx("option",{value:"3eme",children:"3me"}),n.jsx("option",{value:"2nde",children:"2nde"}),n.jsx("option",{value:"1ere",children:"1re"}),n.jsx("option",{value:"Terminale",children:"Terminale"})]})]})]}),n.jsxs("div",{className:"form-row form-row-3",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"matiere",children:"Matire"}),n.jsxs("select",{id:"matiere",name:"matiere",value:x.matiere,onChange:F,children:[n.jsx("option",{value:"",children:"-- Slectionner --"}),aT.map(ee=>n.jsx("option",{value:ee,children:ee},ee))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"annee",children:"Anne"}),n.jsx("input",{id:"annee",name:"annee",type:"text",value:x.annee,onChange:F,placeholder:"Ex: 2024-2025"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editeur",children:"diteur"}),n.jsx("input",{id:"editeur",name:"editeur",type:"text",value:x.editeur,onChange:F,placeholder:"Ex: INEADE"})]})]}),n.jsxs("div",{className:"form-row form-row-3",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"nombrePages",children:"Nombre de pages *"}),n.jsx("input",{id:"nombrePages",name:"nombrePages",type:"number",value:x.nombrePages,onChange:F,min:"1",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"pagesApercu",children:"Pages en aperu gratuit"}),n.jsx("input",{id:"pagesApercu",name:"pagesApercu",type:"number",value:x.pagesApercu,onChange:F,min:"1",max:"20"}),n.jsx("small",{children:"Nombre de pages visibles sans Premium (1-20)"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"ordre",children:"Ordre d'affichage"}),n.jsx("input",{id:"ordre",name:"ordre",type:"number",value:x.ordre,onChange:F,min:"0"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"tags",children:"Tags (spars par des virgules)"}),n.jsx("input",{id:"tags",type:"text",value:x.tags?.join(", ")||"",onChange:q,placeholder:"Ex: BFEM, annales, mathmatiques, gomtrie"})]}),n.jsxs("div",{className:"form-files-section",children:[n.jsx("h3",{children:" Fichiers"}),n.jsxs("div",{className:"form-group file-group",children:[n.jsxs("label",{children:["Fichier PDF complet ",!p&&"*",p&&n.jsx("small",{children:"(laisser vide pour garder l'actuel)"})]}),n.jsx("input",{ref:T,type:"file",accept:".pdf",onChange:ee=>w(ee.target.files?.[0]||null),className:"file-input"}),z&&n.jsxs("span",{className:"file-info",children:[" ",z.name," (",bc(z.size),")"]})]}),n.jsxs("div",{className:"form-group file-group",children:[n.jsxs("label",{children:["Image de couverture",n.jsx("small",{children:"(JPG, PNG  recommand : 400560px)"})]}),n.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:ee=>O(ee.target.files?.[0]||null),className:"file-input"}),E&&n.jsxs("span",{className:"file-info",children:[" ",E.name," (",bc(E.size),")"]})]}),n.jsxs("div",{className:"form-group file-group",children:[n.jsxs("label",{children:["PDF Aperu (premires pages uniquement)",n.jsx("small",{children:"(optionnel  sinon le PDF complet est affich aux non-Premium)"})]}),n.jsx("input",{ref:k,type:"file",accept:".pdf",onChange:ee=>L(ee.target.files?.[0]||null),className:"file-input"}),P&&n.jsxs("span",{className:"file-info",children:[" ",P.name," (",bc(P.size),")"]})]})]}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:x.isActive,onChange:F}),"Ebook actif (visible dans la bibliothque)"]})}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"submit",className:"btn-save",disabled:_,children:_?" Enregistrement...":p?" Modifier l'ebook":" Ajouter l'ebook"}),n.jsx("button",{type:"button",className:"btn-cancel",onClick:ge,children:"Annuler"})]})]})]}),n.jsxs("div",{className:"admin-ebooks-list",children:[n.jsxs("h2",{children:[" Liste des ebooks (",e.length,")"]}),e.length===0?n.jsxs("div",{className:"admin-empty",children:[n.jsx("p",{children:"Aucun ebook pour le moment."}),n.jsx("button",{className:"btn-add-ebook",onClick:()=>h(!0),children:"+ Ajouter le premier ebook"})]}):n.jsx("div",{className:"admin-ebooks-table-wrapper",children:n.jsxs("table",{className:"admin-ebooks-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Couverture"}),n.jsx("th",{children:"Titre / Auteur"}),n.jsx("th",{children:"Catgorie"}),n.jsx("th",{children:"Classe"}),n.jsx("th",{children:"Pages"}),n.jsx("th",{children:"Vues / DL"}),n.jsx("th",{children:"Statut"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(ee=>n.jsxs("tr",{className:ee.isActive?"":"row-inactive",children:[n.jsx("td",{className:"td-cover",children:ee.couvertureURL?n.jsx("img",{src:ee.couvertureURL,alt:"",className:"mini-cover"}):n.jsx("div",{className:"mini-cover-placeholder",children:qi[ee.categorie]})}),n.jsxs("td",{className:"td-title",children:[n.jsx("strong",{children:ee.titre}),n.jsx("span",{className:"td-author",children:ee.auteur})]}),n.jsx("td",{children:n.jsxs("span",{className:"badge-category",children:[qi[ee.categorie]," ",ki[ee.categorie]]})}),n.jsx("td",{children:ee.classe==="all"?"Toutes":ee.classe}),n.jsx("td",{children:ee.nombrePages}),n.jsx("td",{children:n.jsxs("span",{className:"td-stats",children:[" ",ee.nombreVues,n.jsx("br",{})," ",ee.nombreTelechargements]})}),n.jsx("td",{children:n.jsx("button",{className:`btn-status ${ee.isActive?"active":"inactive"}`,onClick:()=>U(ee.id,ee.isActive),title:ee.isActive?"Dsactiver":"Activer",children:ee.isActive?" Actif":" Inactif"})}),n.jsxs("td",{className:"td-actions",children:[n.jsx("button",{className:"btn-edit",onClick:()=>Q(ee),title:"Modifier",children:""}),$===ee.id?n.jsxs("div",{className:"delete-confirm",children:[n.jsx("span",{children:"Supprimer ?"}),n.jsx("button",{className:"btn-confirm-yes",onClick:()=>ve(ee.id),children:"Oui"}),n.jsx("button",{className:"btn-confirm-no",onClick:()=>B(null),children:"Non"})]}):n.jsx("button",{className:"btn-delete",onClick:()=>B(ee.id),title:"Supprimer",children:""})]})]},ee.id))})]})})]})]})},uW=()=>{const[e,t]=y.useState(null),[r,a]=y.useState(!1),[l,o]=y.useState(!1),[u,d]=y.useState(!1),m=()=>/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream,h=()=>window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0,p=y.useCallback(()=>{try{return parseInt(localStorage.getItem("pedaclic_visit_count")||"0",10)}catch{return 0}},[]),v=y.useCallback(()=>{try{const N=p()+1;localStorage.setItem("pedaclic_visit_count",N.toString())}catch{}},[p]),x=()=>{try{return localStorage.getItem("pedaclic_install_dismissed")==="true"}catch{return!1}};y.useEffect(()=>{if(h()||x())return;v();const N=C=>{C.preventDefault(),t(C),p()>=2&&a(!0)};window.addEventListener("beforeinstallprompt",N),m()&&p()>=2&&(o(!0),a(!0));const S=()=>{a(!1),t(null)};return window.addEventListener("appinstalled",S),()=>{window.removeEventListener("beforeinstallprompt",N),window.removeEventListener("appinstalled",S)}},[p,v]);const b=async()=>{if(e){d(!0);try{await e.prompt();const{outcome:N}=await e.userChoice;N==="accepted"&&a(!1)}catch(N){console.error("Erreur installation PWA:",N)}finally{d(!1),t(null)}}},_=()=>{a(!1);try{localStorage.setItem("pedaclic_install_dismissed","true")}catch{}};return r?n.jsx("div",{className:"install-prompt",children:n.jsxs("div",{className:"install-prompt__container",children:[n.jsxs("div",{className:"install-prompt__content",children:[n.jsx("div",{className:"install-prompt__icon",children:n.jsx(sq,{size:24})}),n.jsxs("div",{className:"install-prompt__text",children:[n.jsx("h3",{className:"install-prompt__title",children:"Installer PedaClic"}),n.jsx("p",{className:"install-prompt__description",children:l?"Accde  tes cours mme sans connexion !":"Installe l'app pour un accs rapide, mme hors-ligne !"})]})]}),n.jsxs("div",{className:"install-prompt__actions",children:[!l&&e&&n.jsx("button",{className:"install-prompt__btn install-prompt__btn--primary",onClick:b,disabled:u,children:u?"Installation...":"Installer"}),l&&n.jsx("div",{className:"install-prompt__ios",children:n.jsxs("p",{className:"install-prompt__ios-text",children:["Appuie sur ",n.jsx(lq,{size:16,className:"install-prompt__ios-icon"})," puis",n.jsxs("span",{className:"install-prompt__ios-highlight",children:[n.jsx(dc,{size:14})," Sur l'cran d'accueil"]})]})}),n.jsx("button",{className:"install-prompt__btn install-prompt__btn--close",onClick:_,"aria-label":"Fermer la bannire d'installation",children:n.jsx(Di,{size:20})})]})]})}):null};function dW(){const[e,t]=y.useState(typeof navigator<"u"?navigator.onLine:!0);return y.useEffect(()=>{const r=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",a),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}},[]),e}const fW=()=>{const e=dW(),[t,r]=y.useState(!1),[a,l]=y.useState(!1);return y.useEffect(()=>{if(!e)l(!0),r(!1);else if(a){r(!0);const o=setTimeout(()=>{r(!1),l(!1)},3e3);return()=>clearTimeout(o)}},[e,a]),e&&!t?null:n.jsx("div",{className:`network-indicator ${e?"network-indicator--online":"network-indicator--offline"}`,children:n.jsx("div",{className:"network-indicator__content",children:e?n.jsxs(n.Fragment,{children:[n.jsx(oq,{size:14}),n.jsx("span",{children:"Connexion rtablie"})]}):n.jsxs(n.Fragment,{children:[n.jsx(cq,{size:14}),n.jsx("span",{children:"Pas de connexion  mode hors-ligne"})]})})})},mW=()=>n.jsxs(yq,{children:[n.jsx(uW,{}),n.jsx(fW,{}),n.jsxs(bk,{children:[n.jsx(et,{path:"/",element:n.jsx(yr,{children:n.jsx(Nq,{})})}),n.jsx(et,{path:"/disciplines",element:n.jsx(yr,{children:n.jsx(wq,{})})}),n.jsx(et,{path:"/disciplines/:id",element:n.jsx(yr,{children:n.jsx(Eq,{})})}),n.jsx(et,{path:"/premium",element:n.jsx(yr,{children:n.jsx(Dq,{})})}),n.jsx(et,{path:"/connexion",element:n.jsx(_q,{})}),n.jsx(et,{path:"/inscription",element:n.jsx(Sq,{})}),n.jsx(et,{path:"/admin",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(Tq,{})})})}),n.jsx(et,{path:"/admin/disciplines",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(Pq,{})})})}),n.jsx(et,{path:"/admin/chapitres",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(kq,{})})})}),n.jsx(et,{path:"/admin/ressources",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(qq,{})})})}),n.jsx(et,{path:"/admin/quiz",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(Uq,{})})})}),n.jsx(et,{path:"/admin/quiz/nouveau",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(u_,{})})})}),n.jsx(et,{path:"/admin/quiz/modifier/:quizId",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(u_,{})})})}),n.jsx(et,{path:"/admin/quiz-avance",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(g3,{})})})}),n.jsx(et,{path:"/admin/utilisateurs",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(Xq,{})})})}),n.jsx(et,{path:"/admin/resultats",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(Wq,{})})})}),n.jsx(et,{path:"/admin/settings",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(Zq,{})})})}),n.jsx(et,{path:"/admin/ebooks",element:n.jsx(vn,{children:n.jsx(gn,{children:n.jsx(cW,{})})})}),n.jsx(et,{path:"/admin/premium",element:n.jsx(G1,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),n.jsx(et,{path:"/quiz/:quizId",element:n.jsx(yr,{children:n.jsx(L3,{})})}),n.jsx(et,{path:"/quiz-avance/:quizId",element:n.jsx(yr,{children:n.jsx(S3,{})})}),n.jsx(et,{path:"/eleve/dashboard",element:n.jsx(yr,{children:n.jsx(eX,{})})}),n.jsx(et,{path:"/eleve/suivi",element:n.jsx(yr,{children:n.jsx(tX,{})})}),n.jsx(et,{path:"/prof/dashboard",element:n.jsx(Zo,{children:n.jsx(yr,{children:n.jsx(iX,{})})})}),n.jsx(et,{path:"/prof/cahiers",element:n.jsx(Zo,{children:n.jsx(yr,{children:n.jsx(_X,{})})})}),n.jsx(et,{path:"/prof/cahiers/:cahierId",element:n.jsx(Zo,{children:n.jsx(yr,{children:n.jsx(PX,{})})})}),n.jsx(et,{path:"/prof/cahiers/:cahierId/nouvelle",element:n.jsx(Zo,{children:n.jsx(yr,{children:n.jsx(g2,{})})})}),n.jsx(et,{path:"/prof/cahiers/:cahierId/modifier/:entreeId",element:n.jsx(Zo,{children:n.jsx(yr,{children:n.jsx(g2,{})})})}),n.jsx(et,{path:"/parent/dashboard",element:n.jsx(dy,{allowedRoles:["parent","admin"],children:n.jsx(yr,{children:n.jsx(RX,{})})})}),n.jsx(et,{path:"/generateur",element:n.jsx(yr,{children:n.jsx(VX,{})})}),n.jsx(et,{path:"/ebooks",element:n.jsx(yr,{children:n.jsx(oW,{})})}),n.jsx(et,{path:"*",element:n.jsx(G1,{to:"/",replace:!0})})]})]}),iT=document.getElementById("root");if(!iT)throw new Error("L'lment #root n'existe pas");const hW=gq.createRoot(iT);hW.render(n.jsx(jk.StrictMode,{children:n.jsx(Nk,{children:n.jsx(mW,{})})}));
//# sourceMappingURL=index-n-X9yezx.js.map
