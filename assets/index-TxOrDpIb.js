import{a as Bf,b as Wk,g as Ba,r as j,u as Zr,c as $f,L as Pe,d as Uf,e as Zk,f as e2,R as Jk,h as eP,i as lt,N as M_,j as tP,B as rP}from"./vendor-react-BMsfgiGx.js";import{i as nP,g as aP,a as iP,p as sP,b as lP,c as oP,o as cP,d as Ee,u as xt,s as ct,e as uP,f as dP,h as fP,j as mP,k as mr,l as Hf,q as Ge,m as wt,n as Oe,r as t2,t as Mi,v as Ar,w as Ie,x as $e,y as mc,z as Mn,A as zd,B as ds,C as fs,D as Jn,T as Mt,E as r2}from"./vendor-firebase-BJitAc4y.js";import{H as Fg,B as xn,G as Pl,L as T_,S as hP,C as ms,a as ac,b as Bd,U as pP,c as vP,d as k_,X as Ai,M as gP,e as Dd,f as yP,P as xP,g as bP,h as jP,F as NP,i as Zy,j as Md,k as _P,T as wP,I as SP,l as AP,Y as CP,m as Yr,A as ns,n as uc,o as Ot,Z as n2,p as a2,q as ql,r as Oi,s as $d,t as ic,u as i2,v as Jy,w as Vg,E as Dl,x as EP,y as P_,z as OP,D as zP,J as DP,R as MP,K as TP,N as kP,O as sc,Q as Yg,V as Jp,W as PP,_ as qP,$ as Kg,a0 as ev,a1 as tv,a2 as RP,a3 as LP,a4 as IP,a5 as BP,a6 as $P,a7 as UP}from"./vendor-icons-hkj4svf_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();var rv={exports:{}},Qo={};var q_;function HP(){if(q_)return Qo;q_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var f in l)f!=="key"&&(o[f]=l[f])}else o=l;return l=o.ref,{$$typeof:e,type:n,key:u,ref:l!==void 0?l:null,props:o}}return Qo.Fragment=t,Qo.jsx=r,Qo.jsxs=r,Qo}var R_;function GP(){return R_||(R_=1,rv.exports=HP()),rv.exports}var a=GP(),nv={exports:{}},Fo={},av={exports:{}},iv={};var L_;function QP(){return L_||(L_=1,(function(e){function t(P,J){var H=P.length;P.push(J);e:for(;0<H;){var ve=H-1>>>1,I=P[ve];if(0<l(I,J))P[ve]=J,P[H]=I,H=ve;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var J=P[0],H=P.pop();if(H!==J){P[0]=H;e:for(var ve=0,I=P.length,ge=I>>>1;ve<ge;){var ee=2*(ve+1)-1,fe=P[ee],ye=ee+1,he=P[ye];if(0>l(fe,H))ye<I&&0>l(he,fe)?(P[ve]=he,P[ye]=H,ve=ye):(P[ve]=fe,P[ee]=H,ve=ee);else if(ye<I&&0>l(he,H))P[ve]=he,P[ye]=H,ve=ye;else break e}}return J}function l(P,J){var H=P.sortIndex-J.sortIndex;return H!==0?H:P.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],h=[],p=1,v=null,y=3,b=!1,_=!1,N=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function E(P){for(var J=r(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=P)n(h),J.sortIndex=J.expirationTime,t(m,J);else break;J=r(h)}}function z(P){if(N=!1,E(P),!_)if(r(m)!==null)_=!0,M||(M=!0,B());else{var J=r(h);J!==null&&Q(z,J.startTime-P)}}var M=!1,L=-1,T=5,k=-1;function Y(){return w?!0:!(e.unstable_now()-k<T)}function X(){if(w=!1,M){var P=e.unstable_now();k=P;var J=!0;try{e:{_=!1,N&&(N=!1,O(L),L=-1),b=!0;var H=y;try{t:{for(E(P),v=r(m);v!==null&&!(v.expirationTime>P&&Y());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,y=v.priorityLevel;var I=ve(v.expirationTime<=P);if(P=e.unstable_now(),typeof I=="function"){v.callback=I,E(P),J=!0;break t}v===r(m)&&n(m),E(P)}else n(m);v=r(m)}if(v!==null)J=!0;else{var ge=r(h);ge!==null&&Q(z,ge.startTime-P),J=!1}}break e}finally{v=null,y=H,b=!1}J=void 0}}finally{J?B():M=!1}}}var B;if(typeof C=="function")B=function(){C(X)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ue=le.port2;le.port1.onmessage=X,B=function(){ue.postMessage(null)}}else B=function(){S(X,0)};function Q(P,J){L=S(function(){P(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(P){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var H=y;y=J;try{return P()}finally{y=H}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(P,J){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var H=y;y=P;try{return J()}finally{y=H}},e.unstable_scheduleCallback=function(P,J,H){var ve=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ve+H:ve):H=ve,P){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=H+I,P={id:p++,callback:J,priorityLevel:P,startTime:H,expirationTime:I,sortIndex:-1},H>ve?(P.sortIndex=H,t(h,P),r(m)===null&&P===r(h)&&(N?(O(L),L=-1):N=!0,Q(z,H-ve))):(P.sortIndex=I,t(m,P),_||b||(_=!0,M||(M=!0,B()))),P},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(P){var J=y;return function(){var H=y;y=J;try{return P.apply(this,arguments)}finally{y=H}}}})(iv)),iv}var I_;function FP(){return I_||(I_=1,av.exports=QP()),av.exports}var B_;function VP(){if(B_)return Fo;B_=1;var e=FP(),t=Bf(),r=Wk();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(n(188))}function h(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(n(188));return s!==i?null:i}for(var c=i,d=s;;){var g=c.return;if(g===null)break;var x=g.alternate;if(x===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===c)return m(g),i;if(x===d)return m(g),s;x=x.sibling}throw Error(n(188))}if(c.return!==d.return)c=g,d=x;else{for(var A=!1,D=g.child;D;){if(D===c){A=!0,c=g,d=x;break}if(D===d){A=!0,d=g,c=x;break}D=D.sibling}if(!A){for(D=x.child;D;){if(D===c){A=!0,c=x,d=g;break}if(D===d){A=!0,d=x,c=g;break}D=D.sibling}if(!A)throw Error(n(189))}}if(c.alternate!==d)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var le=Symbol.for("react.client.reference");function ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===le?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case z:return"Suspense";case M:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case C:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case E:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case L:return s=i.displayName||null,s!==null?s:ue(i.type)||"Memo";case T:s=i._payload,i=i._init;try{return ue(i(s))}catch{}}return null}var Q=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},ve=[],I=-1;function ge(i){return{current:i}}function ee(i){0>I||(i.current=ve[I],ve[I]=null,I--)}function fe(i,s){I++,ve[I]=i.current,i.current=s}var ye=ge(null),he=ge(null),$=ge(null),ce=ge(null);function Se(i,s){switch(fe($,s),fe(he,i),fe(ye,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?t_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=t_(s),i=r_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(ye),fe(ye,i)}function ne(){ee(ye),ee(he),ee($)}function F(i){i.memoizedState!==null&&fe(ce,i);var s=ye.current,c=r_(s,i.type);s!==c&&(fe(he,i),fe(ye,c))}function R(i){he.current===i&&(ee(ye),ee(he)),ce.current===i&&(ee(ce),$o._currentValue=H)}var ae,G;function xe(i){if(ae===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ae=s&&s[1]||"",G=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+i+G}var ke=!1;function qe(i,s){if(!i||ke)return"";ke=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ie){var te=ie}Reflect.construct(i,[],me)}else{try{me.call()}catch(ie){te=ie}i.call(me.prototype)}}else{try{throw Error()}catch(ie){te=ie}(me=i())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),A=x[0],D=x[1];if(A&&D){var q=A.split(`
`),Z=D.split(`
`);for(g=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;if(d===q.length||g===Z.length)for(d=q.length-1,g=Z.length-1;1<=d&&0<=g&&q[d]!==Z[g];)g--;for(;1<=d&&0<=g;d--,g--)if(q[d]!==Z[g]){if(d!==1||g!==1)do if(d--,g--,0>g||q[d]!==Z[g]){var oe=`
`+q[d].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=d&&0<=g);break}}}finally{ke=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?xe(c):""}function Qe(i,s){switch(i.tag){case 26:case 27:case 5:return xe(i.type);case 16:return xe("Lazy");case 13:return i.child!==s&&s!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return qe(i.type,!1);case 11:return qe(i.type.render,!1);case 1:return qe(i.type,!0);case 31:return xe("Activity");default:return""}}function Gt(i){try{var s="",c=null;do s+=Qe(i,c),c=i,i=i.return;while(i);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Sn=Object.prototype.hasOwnProperty,Jr=e.unstable_scheduleCallback,aa=e.unstable_cancelCallback,se=e.unstable_shouldYield,we=e.unstable_requestPaint,Me=e.unstable_now,Re=e.unstable_getCurrentPriorityLevel,bt=e.unstable_ImmediatePriority,hr=e.unstable_UserBlockingPriority,In=e.unstable_NormalPriority,Ts=e.unstable_LowPriority,en=e.unstable_IdlePriority,Ka=e.log,Im=e.unstable_setDisableYieldValue,pr=null,pt=null;function Bn(i){if(typeof Ka=="function"&&Im(i),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(pr,i)}catch{}}var br=Math.clz32?Math.clz32:$m,Kc=Math.log,Bm=Math.LN2;function $m(i){return i>>>=0,i===0?32:31-(Kc(i)/Bm|0)|0}var ks=256,Ps=262144,qs=4194304;function ia(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function $n(i,s,c){var d=i.pendingLanes;if(d===0)return 0;var g=0,x=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var D=d&134217727;return D!==0?(d=D&~x,d!==0?g=ia(d):(A&=D,A!==0?g=ia(A):c||(c=D&~i,c!==0&&(g=ia(c))))):(D=d&~x,D!==0?g=ia(D):A!==0?g=ia(A):c||(c=d&~i,c!==0&&(g=ia(c)))),g===0?0:s!==0&&s!==g&&(s&x)===0&&(x=g&-g,c=s&-s,x>=c||x===32&&(c&4194048)!==0)?s:g}function qi(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function K(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ze(){var i=qs;return qs<<=1,(qs&62914560)===0&&(qs=4194304),i}function dt(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function vr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function eo(i,s,c,d,g,x){var A=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var D=i.entanglements,q=i.expirationTimes,Z=i.hiddenUpdates;for(c=A&~c;0<c;){var oe=31-br(c),me=1<<oe;D[oe]=0,q[oe]=-1;var te=Z[oe];if(te!==null)for(Z[oe]=null,oe=0;oe<te.length;oe++){var ie=te[oe];ie!==null&&(ie.lane&=-536870913)}c&=~me}d!==0&&Ri(i,d,0),x!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=x&~(A&~s))}function Ri(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var d=31-br(s);i.entangledLanes|=s,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function Lb(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var d=31-br(c),g=1<<d;g&s|i[d]&s&&(i[d]|=s),c&=~g}}function Ib(i,s){var c=s&-s;return c=(c&42)!==0?1:Um(c),(c&(i.suspendedLanes|s))!==0?0:c}function Um(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hm(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Bb(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:S_(i.type))}function $b(i,s){var c=J.p;try{return J.p=i,s()}finally{J.p=c}}var Xa=Math.random().toString(36).slice(2),ir="__reactFiber$"+Xa,Or="__reactProps$"+Xa,Rs="__reactContainer$"+Xa,Gm="__reactEvents$"+Xa,BM="__reactListeners$"+Xa,$M="__reactHandles$"+Xa,Ub="__reactResources$"+Xa,to="__reactMarker$"+Xa;function Qm(i){delete i[ir],delete i[Or],delete i[Gm],delete i[BM],delete i[$M]}function Ls(i){var s=i[ir];if(s)return s;for(var c=i.parentNode;c;){if(s=c[Rs]||c[ir]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=c_(i);i!==null;){if(c=i[ir])return c;i=c_(i)}return s}i=c,c=i.parentNode}return null}function Is(i){if(i=i[ir]||i[Rs]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ro(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function Bs(i){var s=i[Ub];return s||(s=i[Ub]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Kt(i){i[to]=!0}var Hb=new Set,Gb={};function Li(i,s){$s(i,s),$s(i+"Capture",s)}function $s(i,s){for(Gb[i]=s,i=0;i<s.length;i++)Hb.add(s[i])}var UM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qb={},Fb={};function HM(i){return Sn.call(Fb,i)?!0:Sn.call(Qb,i)?!1:UM.test(i)?Fb[i]=!0:(Qb[i]=!0,!1)}function Xc(i,s,c){if(HM(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function Wc(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function sa(i,s,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+d)}}function tn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Vb(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function GM(i,s,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,x=d.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){c=""+A,x.call(this,A)}}),Object.defineProperty(i,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Fm(i){if(!i._valueTracker){var s=Vb(i)?"checked":"value";i._valueTracker=GM(i,s,""+i[s])}}function Yb(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return i&&(d=Vb(i)?i.checked?"true":"false":i.value),i=d,i!==c?(s.setValue(i),!0):!1}function Zc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var QM=/[\n"\\]/g;function rn(i){return i.replace(QM,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vm(i,s,c,d,g,x,A,D){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+tn(s)):i.value!==""+tn(s)&&(i.value=""+tn(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Ym(i,A,tn(s)):c!=null?Ym(i,A,tn(c)):d!=null&&i.removeAttribute("value"),g==null&&x!=null&&(i.defaultChecked=!!x),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+tn(D):i.removeAttribute("name")}function Kb(i,s,c,d,g,x,A,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),s!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||s!=null)){Fm(i);return}c=c!=null?""+tn(c):"",s=s!=null?""+tn(s):c,D||s===i.value||(i.value=s),i.defaultValue=s}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=D?i.checked:!!d,i.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Fm(i)}function Ym(i,s,c){s==="number"&&Zc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Us(i,s,c,d){if(i=i.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=s.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&d&&(i[c].defaultSelected=!0)}else{for(c=""+tn(c),s=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function Xb(i,s,c){if(s!=null&&(s=""+tn(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+tn(c):""}function Wb(i,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(n(92));if(Q(d)){if(1<d.length)throw Error(n(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=tn(s),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Fm(i)}function Hs(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var FM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zb(i,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":d?i.setProperty(s,c):typeof c!="number"||c===0||FM.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function Jb(i,s,c){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in s)d=s[g],s.hasOwnProperty(g)&&c[g]!==d&&Zb(i,g,d)}else for(var x in s)s.hasOwnProperty(x)&&Zb(i,x,s[x])}function Km(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),YM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jc(i){return YM.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function la(){}var Xm=null;function Wm(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gs=null,Qs=null;function e0(i){var s=Is(i);if(s&&(i=s.stateNode)){var c=i[Or]||null;e:switch(i=s.stateNode,s.type){case"input":if(Vm(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+rn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==i&&d.form===i.form){var g=d[Or]||null;if(!g)throw Error(n(90));Vm(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===i.form&&Yb(d)}break e;case"textarea":Xb(i,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Us(i,!!c.multiple,s,!1)}}}var Zm=!1;function t0(i,s,c){if(Zm)return i(s,c);Zm=!0;try{var d=i(s);return d}finally{if(Zm=!1,(Gs!==null||Qs!==null)&&(Bu(),Gs&&(s=Gs,i=Qs,Qs=Gs=null,e0(s),i)))for(s=0;s<i.length;s++)e0(i[s])}}function no(i,s){var c=i.stateNode;if(c===null)return null;var d=c[Or]||null;if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,s,typeof c));return c}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jm=!1;if(oa)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){Jm=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{Jm=!1}var Wa=null,eh=null,eu=null;function r0(){if(eu)return eu;var i,s=eh,c=s.length,d,g="value"in Wa?Wa.value:Wa.textContent,x=g.length;for(i=0;i<c&&s[i]===g[i];i++);var A=c-i;for(d=1;d<=A&&s[c-d]===g[x-d];d++);return eu=g.slice(i,1<d?1-d:void 0)}function tu(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ru(){return!0}function n0(){return!1}function zr(i){function s(c,d,g,x,A){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=x,this.target=A,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ru:n0,this.isPropagationStopped=n0,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),s}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nu=zr(Ii),io=v({},Ii,{view:0,detail:0}),KM=zr(io),th,rh,so,au=v({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ah,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==so&&(so&&i.type==="mousemove"?(th=i.screenX-so.screenX,rh=i.screenY-so.screenY):rh=th=0,so=i),th)},movementY:function(i){return"movementY"in i?i.movementY:rh}}),a0=zr(au),XM=v({},au,{dataTransfer:0}),WM=zr(XM),ZM=v({},io,{relatedTarget:0}),nh=zr(ZM),JM=v({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),eT=zr(JM),tT=v({},Ii,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rT=zr(tT),nT=v({},Ii,{data:0}),i0=zr(nT),aT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=sT[i])?!!s[i]:!1}function ah(){return lT}var oT=v({},io,{key:function(i){if(i.key){var s=aT[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=tu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?iT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ah,charCode:function(i){return i.type==="keypress"?tu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?tu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),cT=zr(oT),uT=v({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s0=zr(uT),dT=v({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ah}),fT=zr(dT),mT=v({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),hT=zr(mT),pT=v({},au,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vT=zr(pT),gT=v({},Ii,{newState:0,oldState:0}),yT=zr(gT),xT=[9,13,27,32],ih=oa&&"CompositionEvent"in window,lo=null;oa&&"documentMode"in document&&(lo=document.documentMode);var bT=oa&&"TextEvent"in window&&!lo,l0=oa&&(!ih||lo&&8<lo&&11>=lo),o0=" ",c0=!1;function u0(i,s){switch(i){case"keyup":return xT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fs=!1;function jT(i,s){switch(i){case"compositionend":return d0(s);case"keypress":return s.which!==32?null:(c0=!0,o0);case"textInput":return i=s.data,i===o0&&c0?null:i;default:return null}}function NT(i,s){if(Fs)return i==="compositionend"||!ih&&u0(i,s)?(i=r0(),eu=eh=Wa=null,Fs=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return l0&&s.locale!=="ko"?null:s.data;default:return null}}var _T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!_T[i.type]:s==="textarea"}function m0(i,s,c,d){Gs?Qs?Qs.push(d):Qs=[d]:Gs=d,s=Vu(s,"onChange"),0<s.length&&(c=new nu("onChange","change",null,c,d),i.push({event:c,listeners:s}))}var oo=null,co=null;function wT(i){KN(i,0)}function iu(i){var s=ro(i);if(Yb(s))return i}function h0(i,s){if(i==="change")return s}var p0=!1;if(oa){var sh;if(oa){var lh="oninput"in document;if(!lh){var v0=document.createElement("div");v0.setAttribute("oninput","return;"),lh=typeof v0.oninput=="function"}sh=lh}else sh=!1;p0=sh&&(!document.documentMode||9<document.documentMode)}function g0(){oo&&(oo.detachEvent("onpropertychange",y0),co=oo=null)}function y0(i){if(i.propertyName==="value"&&iu(co)){var s=[];m0(s,co,i,Wm(i)),t0(wT,s)}}function ST(i,s,c){i==="focusin"?(g0(),oo=s,co=c,oo.attachEvent("onpropertychange",y0)):i==="focusout"&&g0()}function AT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return iu(co)}function CT(i,s){if(i==="click")return iu(s)}function ET(i,s){if(i==="input"||i==="change")return iu(s)}function OT(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Br=typeof Object.is=="function"?Object.is:OT;function uo(i,s){if(Br(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!Sn.call(s,g)||!Br(i[g],s[g]))return!1}return!0}function x0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function b0(i,s){var c=x0(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=s&&d>=s)return{node:c,offset:s-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=x0(c)}}function j0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?j0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function N0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Zc(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=Zc(i.document)}return s}function oh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var zT=oa&&"documentMode"in document&&11>=document.documentMode,Vs=null,ch=null,fo=null,uh=!1;function _0(i,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;uh||Vs==null||Vs!==Zc(d)||(d=Vs,"selectionStart"in d&&oh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),fo&&uo(fo,d)||(fo=d,d=Vu(ch,"onSelect"),0<d.length&&(s=new nu("onSelect","select",null,s,c),i.push({event:s,listeners:d}),s.target=Vs)))}function Bi(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var Ys={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},dh={},w0={};oa&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function $i(i){if(dh[i])return dh[i];if(!Ys[i])return i;var s=Ys[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in w0)return dh[i]=s[c];return i}var S0=$i("animationend"),A0=$i("animationiteration"),C0=$i("animationstart"),DT=$i("transitionrun"),MT=$i("transitionstart"),TT=$i("transitioncancel"),E0=$i("transitionend"),O0=new Map,fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fh.push("scrollEnd");function An(i,s){O0.set(i,s),Li(s,[i])}var su=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},nn=[],Ks=0,mh=0;function lu(){for(var i=Ks,s=mh=Ks=0;s<i;){var c=nn[s];nn[s++]=null;var d=nn[s];nn[s++]=null;var g=nn[s];nn[s++]=null;var x=nn[s];if(nn[s++]=null,d!==null&&g!==null){var A=d.pending;A===null?g.next=g:(g.next=A.next,A.next=g),d.pending=g}x!==0&&z0(c,g,x)}}function ou(i,s,c,d){nn[Ks++]=i,nn[Ks++]=s,nn[Ks++]=c,nn[Ks++]=d,mh|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function hh(i,s,c,d){return ou(i,s,c,d),cu(i)}function Ui(i,s){return ou(i,null,null,s),cu(i)}function z0(i,s,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var g=!1,x=i.return;x!==null;)x.childLanes|=c,d=x.alternate,d!==null&&(d.childLanes|=c),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(g=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,g&&s!==null&&(g=31-br(c),i=x.hiddenUpdates,d=i[g],d===null?i[g]=[s]:d.push(s),s.lane=c|536870912),x):null}function cu(i){if(50<ko)throw ko=0,_p=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Xs={};function kT(i,s,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(i,s,c,d){return new kT(i,s,c,d)}function ph(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ca(i,s){var c=i.alternate;return c===null?(c=$r(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function D0(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function uu(i,s,c,d,g,x){var A=0;if(d=i,typeof i=="function")ph(i)&&(A=1);else if(typeof i=="string")A=Ik(i,c,ye.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=$r(31,c,s,g),i.elementType=k,i.lanes=x,i;case N:return Hi(c.children,g,x,s);case w:A=8,g|=24;break;case S:return i=$r(12,c,s,g|2),i.elementType=S,i.lanes=x,i;case z:return i=$r(13,c,s,g),i.elementType=z,i.lanes=x,i;case M:return i=$r(19,c,s,g),i.elementType=M,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:A=10;break e;case O:A=9;break e;case E:A=11;break e;case L:A=14;break e;case T:A=16,d=null;break e}A=29,c=Error(n(130,i===null?"null":typeof i,"")),d=null}return s=$r(A,c,s,g),s.elementType=i,s.type=d,s.lanes=x,s}function Hi(i,s,c,d){return i=$r(7,i,d,s),i.lanes=c,i}function vh(i,s,c){return i=$r(6,i,null,s),i.lanes=c,i}function M0(i){var s=$r(18,null,null,0);return s.stateNode=i,s}function gh(i,s,c){return s=$r(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var T0=new WeakMap;function an(i,s){if(typeof i=="object"&&i!==null){var c=T0.get(i);return c!==void 0?c:(s={value:i,source:s,stack:Gt(s)},T0.set(i,s),s)}return{value:i,source:s,stack:Gt(s)}}var Ws=[],Zs=0,du=null,mo=0,sn=[],ln=0,Za=null,Un=1,Hn="";function ua(i,s){Ws[Zs++]=mo,Ws[Zs++]=du,du=i,mo=s}function k0(i,s,c){sn[ln++]=Un,sn[ln++]=Hn,sn[ln++]=Za,Za=i;var d=Un;i=Hn;var g=32-br(d)-1;d&=~(1<<g),c+=1;var x=32-br(s)+g;if(30<x){var A=g-g%5;x=(d&(1<<A)-1).toString(32),d>>=A,g-=A,Un=1<<32-br(s)+g|c<<g|d,Hn=x+i}else Un=1<<x|c<<g|d,Hn=i}function yh(i){i.return!==null&&(ua(i,1),k0(i,1,0))}function xh(i){for(;i===du;)du=Ws[--Zs],Ws[Zs]=null,mo=Ws[--Zs],Ws[Zs]=null;for(;i===Za;)Za=sn[--ln],sn[ln]=null,Hn=sn[--ln],sn[ln]=null,Un=sn[--ln],sn[ln]=null}function P0(i,s){sn[ln++]=Un,sn[ln++]=Hn,sn[ln++]=Za,Un=s.id,Hn=s.overflow,Za=i}var sr=null,vt=null,Ye=!1,Ja=null,on=!1,bh=Error(n(519));function ei(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ho(an(s,i)),bh}function q0(i){var s=i.stateNode,c=i.type,d=i.memoizedProps;switch(s[ir]=i,s[Or]=d,c){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(c=0;c<qo.length;c++)He(qo[c],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),Kb(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),Wb(s,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||JN(s.textContent,c)?(d.popover!=null&&(He("beforetoggle",s),He("toggle",s)),d.onScroll!=null&&He("scroll",s),d.onScrollEnd!=null&&He("scrollend",s),d.onClick!=null&&(s.onclick=la),s=!0):s=!1,s||ei(i,!0)}function R0(i){for(sr=i.return;sr;)switch(sr.tag){case 5:case 31:case 13:on=!1;return;case 27:case 3:on=!0;return;default:sr=sr.return}}function Js(i){if(i!==sr)return!1;if(!Ye)return R0(i),Ye=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Lp(i.type,i.memoizedProps)),c=!c),c&&vt&&ei(i),R0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));vt=o_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));vt=o_(i)}else s===27?(s=vt,hi(i.type)?(i=Hp,Hp=null,vt=i):vt=s):vt=sr?un(i.stateNode.nextSibling):null;return!0}function Gi(){vt=sr=null,Ye=!1}function jh(){var i=Ja;return i!==null&&(kr===null?kr=i:kr.push.apply(kr,i),Ja=null),i}function ho(i){Ja===null?Ja=[i]:Ja.push(i)}var Nh=ge(null),Qi=null,da=null;function ti(i,s,c){fe(Nh,s._currentValue),s._currentValue=c}function fa(i){i._currentValue=Nh.current,ee(Nh)}function _h(i,s,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),i===c)break;i=i.return}}function wh(i,s,c,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var x=g.dependencies;if(x!==null){var A=g.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=g;for(var q=0;q<s.length;q++)if(D.context===s[q]){x.lanes|=c,D=x.alternate,D!==null&&(D.lanes|=c),_h(x.return,c,i),d||(A=null);break e}x=D.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(n(341));A.lanes|=c,x=A.alternate,x!==null&&(x.lanes|=c),_h(A,c,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function el(i,s,c,d){i=null;for(var g=s,x=!1;g!==null;){if(!x){if((g.flags&524288)!==0)x=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var D=g.type;Br(g.pendingProps.value,A.value)||(i!==null?i.push(D):i=[D])}}else if(g===ce.current){if(A=g.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push($o):i=[$o])}g=g.return}i!==null&&wh(s,i,c,d),s.flags|=262144}function fu(i){for(i=i.firstContext;i!==null;){if(!Br(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fi(i){Qi=i,da=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function lr(i){return L0(Qi,i)}function mu(i,s){return Qi===null&&Fi(i),L0(i,s)}function L0(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},da===null){if(i===null)throw Error(n(308));da=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else da=da.next=s;return c}var PT=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},qT=e.unstable_scheduleCallback,RT=e.unstable_NormalPriority,qt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sh(){return{controller:new PT,data:new Map,refCount:0}}function po(i){i.refCount--,i.refCount===0&&qT(RT,function(){i.controller.abort()})}var vo=null,Ah=0,tl=0,rl=null;function LT(i,s){if(vo===null){var c=vo=[];Ah=0,tl=Op(),rl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Ah++,s.then(I0,I0),s}function I0(){if(--Ah===0&&vo!==null){rl!==null&&(rl.status="fulfilled");var i=vo;vo=null,tl=0,rl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function IT(i,s){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){d.status="fulfilled",d.value=s;for(var g=0;g<c.length;g++)(0,c[g])(s)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var B0=P.S;P.S=function(i,s){_N=Me(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&LT(i,s),B0!==null&&B0(i,s)};var Vi=ge(null);function Ch(){var i=Vi.current;return i!==null?i:ft.pooledCache}function hu(i,s){s===null?fe(Vi,Vi.current):fe(Vi,s.pool)}function $0(){var i=Ch();return i===null?null:{parent:qt._currentValue,pool:i}}var nl=Error(n(460)),Eh=Error(n(474)),pu=Error(n(542)),vu={then:function(){}};function U0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function H0(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(la,la),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Q0(i),i;default:if(typeof s.status=="string")s.then(la,la);else{if(i=ft,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(d){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=d}},function(d){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Q0(i),i}throw Ki=s,nl}}function Yi(i){try{var s=i._init;return s(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ki=c,nl):c}}var Ki=null;function G0(){if(Ki===null)throw Error(n(459));var i=Ki;return Ki=null,i}function Q0(i){if(i===nl||i===pu)throw Error(n(483))}var al=null,go=0;function gu(i){var s=go;return go+=1,al===null&&(al=[]),H0(al,i,s)}function yo(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function yu(i,s){throw s.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function F0(i){function s(V,U){if(i){var W=V.deletions;W===null?(V.deletions=[U],V.flags|=16):W.push(U)}}function c(V,U){if(!i)return null;for(;U!==null;)s(V,U),U=U.sibling;return null}function d(V){for(var U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function g(V,U){return V=ca(V,U),V.index=0,V.sibling=null,V}function x(V,U,W){return V.index=W,i?(W=V.alternate,W!==null?(W=W.index,W<U?(V.flags|=67108866,U):W):(V.flags|=67108866,U)):(V.flags|=1048576,U)}function A(V){return i&&V.alternate===null&&(V.flags|=67108866),V}function D(V,U,W,de){return U===null||U.tag!==6?(U=vh(W,V.mode,de),U.return=V,U):(U=g(U,W),U.return=V,U)}function q(V,U,W,de){var Ce=W.type;return Ce===N?oe(V,U,W.props.children,de,W.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===T&&Yi(Ce)===U.type)?(U=g(U,W.props),yo(U,W),U.return=V,U):(U=uu(W.type,W.key,W.props,null,V.mode,de),yo(U,W),U.return=V,U)}function Z(V,U,W,de){return U===null||U.tag!==4||U.stateNode.containerInfo!==W.containerInfo||U.stateNode.implementation!==W.implementation?(U=gh(W,V.mode,de),U.return=V,U):(U=g(U,W.children||[]),U.return=V,U)}function oe(V,U,W,de,Ce){return U===null||U.tag!==7?(U=Hi(W,V.mode,de,Ce),U.return=V,U):(U=g(U,W),U.return=V,U)}function me(V,U,W){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=vh(""+U,V.mode,W),U.return=V,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return W=uu(U.type,U.key,U.props,null,V.mode,W),yo(W,U),W.return=V,W;case _:return U=gh(U,V.mode,W),U.return=V,U;case T:return U=Yi(U),me(V,U,W)}if(Q(U)||B(U))return U=Hi(U,V.mode,W,null),U.return=V,U;if(typeof U.then=="function")return me(V,gu(U),W);if(U.$$typeof===C)return me(V,mu(V,U),W);yu(V,U)}return null}function te(V,U,W,de){var Ce=U!==null?U.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ce!==null?null:D(V,U,""+W,de);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return W.key===Ce?q(V,U,W,de):null;case _:return W.key===Ce?Z(V,U,W,de):null;case T:return W=Yi(W),te(V,U,W,de)}if(Q(W)||B(W))return Ce!==null?null:oe(V,U,W,de,null);if(typeof W.then=="function")return te(V,U,gu(W),de);if(W.$$typeof===C)return te(V,U,mu(V,W),de);yu(V,W)}return null}function ie(V,U,W,de,Ce){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return V=V.get(W)||null,D(U,V,""+de,Ce);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return V=V.get(de.key===null?W:de.key)||null,q(U,V,de,Ce);case _:return V=V.get(de.key===null?W:de.key)||null,Z(U,V,de,Ce);case T:return de=Yi(de),ie(V,U,W,de,Ce)}if(Q(de)||B(de))return V=V.get(W)||null,oe(U,V,de,Ce,null);if(typeof de.then=="function")return ie(V,U,W,gu(de),Ce);if(de.$$typeof===C)return ie(V,U,W,mu(U,de),Ce);yu(U,de)}return null}function je(V,U,W,de){for(var Ce=null,Xe=null,_e=U,Be=U=0,Ve=null;_e!==null&&Be<W.length;Be++){_e.index>Be?(Ve=_e,_e=null):Ve=_e.sibling;var We=te(V,_e,W[Be],de);if(We===null){_e===null&&(_e=Ve);break}i&&_e&&We.alternate===null&&s(V,_e),U=x(We,U,Be),Xe===null?Ce=We:Xe.sibling=We,Xe=We,_e=Ve}if(Be===W.length)return c(V,_e),Ye&&ua(V,Be),Ce;if(_e===null){for(;Be<W.length;Be++)_e=me(V,W[Be],de),_e!==null&&(U=x(_e,U,Be),Xe===null?Ce=_e:Xe.sibling=_e,Xe=_e);return Ye&&ua(V,Be),Ce}for(_e=d(_e);Be<W.length;Be++)Ve=ie(_e,V,Be,W[Be],de),Ve!==null&&(i&&Ve.alternate!==null&&_e.delete(Ve.key===null?Be:Ve.key),U=x(Ve,U,Be),Xe===null?Ce=Ve:Xe.sibling=Ve,Xe=Ve);return i&&_e.forEach(function(xi){return s(V,xi)}),Ye&&ua(V,Be),Ce}function Te(V,U,W,de){if(W==null)throw Error(n(151));for(var Ce=null,Xe=null,_e=U,Be=U=0,Ve=null,We=W.next();_e!==null&&!We.done;Be++,We=W.next()){_e.index>Be?(Ve=_e,_e=null):Ve=_e.sibling;var xi=te(V,_e,We.value,de);if(xi===null){_e===null&&(_e=Ve);break}i&&_e&&xi.alternate===null&&s(V,_e),U=x(xi,U,Be),Xe===null?Ce=xi:Xe.sibling=xi,Xe=xi,_e=Ve}if(We.done)return c(V,_e),Ye&&ua(V,Be),Ce;if(_e===null){for(;!We.done;Be++,We=W.next())We=me(V,We.value,de),We!==null&&(U=x(We,U,Be),Xe===null?Ce=We:Xe.sibling=We,Xe=We);return Ye&&ua(V,Be),Ce}for(_e=d(_e);!We.done;Be++,We=W.next())We=ie(_e,V,Be,We.value,de),We!==null&&(i&&We.alternate!==null&&_e.delete(We.key===null?Be:We.key),U=x(We,U,Be),Xe===null?Ce=We:Xe.sibling=We,Xe=We);return i&&_e.forEach(function(Xk){return s(V,Xk)}),Ye&&ua(V,Be),Ce}function st(V,U,W,de){if(typeof W=="object"&&W!==null&&W.type===N&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case b:e:{for(var Ce=W.key;U!==null;){if(U.key===Ce){if(Ce=W.type,Ce===N){if(U.tag===7){c(V,U.sibling),de=g(U,W.props.children),de.return=V,V=de;break e}}else if(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===T&&Yi(Ce)===U.type){c(V,U.sibling),de=g(U,W.props),yo(de,W),de.return=V,V=de;break e}c(V,U);break}else s(V,U);U=U.sibling}W.type===N?(de=Hi(W.props.children,V.mode,de,W.key),de.return=V,V=de):(de=uu(W.type,W.key,W.props,null,V.mode,de),yo(de,W),de.return=V,V=de)}return A(V);case _:e:{for(Ce=W.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===W.containerInfo&&U.stateNode.implementation===W.implementation){c(V,U.sibling),de=g(U,W.children||[]),de.return=V,V=de;break e}else{c(V,U);break}else s(V,U);U=U.sibling}de=gh(W,V.mode,de),de.return=V,V=de}return A(V);case T:return W=Yi(W),st(V,U,W,de)}if(Q(W))return je(V,U,W,de);if(B(W)){if(Ce=B(W),typeof Ce!="function")throw Error(n(150));return W=Ce.call(W),Te(V,U,W,de)}if(typeof W.then=="function")return st(V,U,gu(W),de);if(W.$$typeof===C)return st(V,U,mu(V,W),de);yu(V,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,U!==null&&U.tag===6?(c(V,U.sibling),de=g(U,W),de.return=V,V=de):(c(V,U),de=vh(W,V.mode,de),de.return=V,V=de),A(V)):c(V,U)}return function(V,U,W,de){try{go=0;var Ce=st(V,U,W,de);return al=null,Ce}catch(_e){if(_e===nl||_e===pu)throw _e;var Xe=$r(29,_e,null,V.mode);return Xe.lanes=de,Xe.return=V,Xe}}}var Xi=F0(!0),V0=F0(!1),ri=!1;function Oh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ni(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ai(i,s,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Je&2)!==0){var g=d.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),d.pending=s,s=cu(i),z0(i,null,c),s}return ou(i,d,s,c),cu(i)}function xo(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=i.pendingLanes,c|=d,s.lanes=c,Lb(i,c)}}function Dh(i,s){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?g=x=A:x=x.next=A,c=c.next}while(c!==null);x===null?g=x=s:x=x.next=s}else g=x=s;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var Mh=!1;function bo(){if(Mh){var i=rl;if(i!==null)throw i}}function jo(i,s,c,d){Mh=!1;var g=i.updateQueue;ri=!1;var x=g.firstBaseUpdate,A=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var q=D,Z=q.next;q.next=null,A===null?x=Z:A.next=Z,A=q;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==A&&(D===null?oe.firstBaseUpdate=Z:D.next=Z,oe.lastBaseUpdate=q))}if(x!==null){var me=g.baseState;A=0,oe=Z=q=null,D=x;do{var te=D.lane&-536870913,ie=te!==D.lane;if(ie?(Fe&te)===te:(d&te)===te){te!==0&&te===tl&&(Mh=!0),oe!==null&&(oe=oe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var je=i,Te=D;te=s;var st=c;switch(Te.tag){case 1:if(je=Te.payload,typeof je=="function"){me=je.call(st,me,te);break e}me=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Te.payload,te=typeof je=="function"?je.call(st,me,te):je,te==null)break e;me=v({},me,te);break e;case 2:ri=!0}}te=D.callback,te!==null&&(i.flags|=64,ie&&(i.flags|=8192),ie=g.callbacks,ie===null?g.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(Z=oe=ie,q=me):oe=oe.next=ie,A|=te;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ie=D,D=ie.next,ie.next=null,g.lastBaseUpdate=ie,g.shared.pending=null}}while(!0);oe===null&&(q=me),g.baseState=q,g.firstBaseUpdate=Z,g.lastBaseUpdate=oe,x===null&&(g.shared.lanes=0),ci|=A,i.lanes=A,i.memoizedState=me}}function Y0(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function K0(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Y0(c[i],s)}var il=ge(null),xu=ge(0);function X0(i,s){i=ja,fe(xu,i),fe(il,s),ja=i|s.baseLanes}function Th(){fe(xu,ja),fe(il,il.current)}function kh(){ja=xu.current,ee(il),ee(xu)}var Ur=ge(null),cn=null;function ii(i){var s=i.alternate;fe(Tt,Tt.current&1),fe(Ur,i),cn===null&&(s===null||il.current!==null||s.memoizedState!==null)&&(cn=i)}function Ph(i){fe(Tt,Tt.current),fe(Ur,i),cn===null&&(cn=i)}function W0(i){i.tag===22?(fe(Tt,Tt.current),fe(Ur,i),cn===null&&(cn=i)):si()}function si(){fe(Tt,Tt.current),fe(Ur,Ur.current)}function Hr(i){ee(Ur),cn===i&&(cn=null),ee(Tt)}var Tt=ge(0);function bu(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||$p(c)||Up(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ma=0,Le=null,at=null,Rt=null,ju=!1,sl=!1,Wi=!1,Nu=0,No=0,ll=null,BT=0;function At(){throw Error(n(321))}function qh(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!Br(i[c],s[c]))return!1;return!0}function Rh(i,s,c,d,g,x){return ma=x,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=i===null||i.memoizedState===null?kj:Zh,Wi=!1,x=c(d,g),Wi=!1,sl&&(x=J0(s,c,d,g)),Z0(i),x}function Z0(i){P.H=So;var s=at!==null&&at.next!==null;if(ma=0,Rt=at=Le=null,ju=!1,No=0,ll=null,s)throw Error(n(300));i===null||Lt||(i=i.dependencies,i!==null&&fu(i)&&(Lt=!0))}function J0(i,s,c,d){Le=i;var g=0;do{if(sl&&(ll=null),No=0,sl=!1,25<=g)throw Error(n(301));if(g+=1,Rt=at=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}P.H=Pj,x=s(c,d)}while(sl);return x}function $T(){var i=P.H,s=i.useState()[0];return s=typeof s.then=="function"?_o(s):s,i=i.useState()[0],(at!==null?at.memoizedState:null)!==i&&(Le.flags|=1024),s}function Lh(){var i=Nu!==0;return Nu=0,i}function Ih(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function Bh(i){if(ju){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ju=!1}ma=0,Rt=at=Le=null,sl=!1,No=Nu=0,ll=null}function jr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Le.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function kt(){if(at===null){var i=Le.alternate;i=i!==null?i.memoizedState:null}else i=at.next;var s=Rt===null?Le.memoizedState:Rt.next;if(s!==null)Rt=s,at=i;else{if(i===null)throw Le.alternate===null?Error(n(467)):Error(n(310));at=i,i={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Rt===null?Le.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function _u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _o(i){var s=No;return No+=1,ll===null&&(ll=[]),i=H0(ll,i,s),s=Le,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?kj:Zh),i}function wu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return _o(i);if(i.$$typeof===C)return lr(i)}throw Error(n(438,String(i)))}function $h(i){var s=null,c=Le.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=_u(),Le.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),d=0;d<i;d++)c[d]=Y;return s.index++,c}function ha(i,s){return typeof s=="function"?s(i):s}function Su(i){var s=kt();return Uh(s,at,i)}function Uh(i,s,c){var d=i.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=c;var g=i.baseQueue,x=d.pending;if(x!==null){if(g!==null){var A=g.next;g.next=x.next,x.next=A}s.baseQueue=g=x,d.pending=null}if(x=i.baseState,g===null)i.memoizedState=x;else{s=g.next;var D=A=null,q=null,Z=s,oe=!1;do{var me=Z.lane&-536870913;if(me!==Z.lane?(Fe&me)===me:(ma&me)===me){var te=Z.revertLane;if(te===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),me===tl&&(oe=!0);else if((ma&te)===te){Z=Z.next,te===tl&&(oe=!0);continue}else me={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(D=q=me,A=x):q=q.next=me,Le.lanes|=te,ci|=te;me=Z.action,Wi&&c(x,me),x=Z.hasEagerState?Z.eagerState:c(x,me)}else te={lane:me,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(D=q=te,A=x):q=q.next=te,Le.lanes|=me,ci|=me;Z=Z.next}while(Z!==null&&Z!==s);if(q===null?A=x:q.next=D,!Br(x,i.memoizedState)&&(Lt=!0,oe&&(c=rl,c!==null)))throw c;i.memoizedState=x,i.baseState=A,i.baseQueue=q,d.lastRenderedState=x}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Hh(i){var s=kt(),c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var d=c.dispatch,g=c.pending,x=s.memoizedState;if(g!==null){c.pending=null;var A=g=g.next;do x=i(x,A.action),A=A.next;while(A!==g);Br(x,s.memoizedState)||(Lt=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),c.lastRenderedState=x}return[x,d]}function ej(i,s,c){var d=Le,g=kt(),x=Ye;if(x){if(c===void 0)throw Error(n(407));c=c()}else c=s();var A=!Br((at||g).memoizedState,c);if(A&&(g.memoizedState=c,Lt=!0),g=g.queue,Fh(nj.bind(null,d,g,i),[i]),g.getSnapshot!==s||A||Rt!==null&&Rt.memoizedState.tag&1){if(d.flags|=2048,ol(9,{destroy:void 0},rj.bind(null,d,g,c,s),null),ft===null)throw Error(n(349));x||(ma&127)!==0||tj(d,s,c)}return c}function tj(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Le.updateQueue,s===null?(s=_u(),Le.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function rj(i,s,c,d){s.value=c,s.getSnapshot=d,aj(s)&&ij(i)}function nj(i,s,c){return c(function(){aj(s)&&ij(i)})}function aj(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!Br(i,c)}catch{return!0}}function ij(i){var s=Ui(i,2);s!==null&&Pr(s,i,2)}function Gh(i){var s=jr();if(typeof i=="function"){var c=i;if(i=c(),Wi){Bn(!0);try{c()}finally{Bn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:i},s}function sj(i,s,c,d){return i.baseState=c,Uh(i,at,typeof d=="function"?d:ha)}function UT(i,s,c,d,g){if(Eu(i))throw Error(n(485));if(i=s.action,i!==null){var x={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){x.listeners.push(A)}};P.T!==null?c(!0):x.isTransition=!1,d(x),c=s.pending,c===null?(x.next=s.pending=x,lj(s,x)):(x.next=c.next,s.pending=c.next=x)}}function lj(i,s){var c=s.action,d=s.payload,g=i.state;if(s.isTransition){var x=P.T,A={};P.T=A;try{var D=c(g,d),q=P.S;q!==null&&q(A,D),oj(i,s,D)}catch(Z){Qh(i,s,Z)}finally{x!==null&&A.types!==null&&(x.types=A.types),P.T=x}}else try{x=c(g,d),oj(i,s,x)}catch(Z){Qh(i,s,Z)}}function oj(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){cj(i,s,d)},function(d){return Qh(i,s,d)}):cj(i,s,c)}function cj(i,s,c){s.status="fulfilled",s.value=c,uj(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,lj(i,c)))}function Qh(i,s,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,uj(s),s=s.next;while(s!==d)}i.action=null}function uj(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function dj(i,s){return s}function fj(i,s){if(Ye){var c=ft.formState;if(c!==null){e:{var d=Le;if(Ye){if(vt){t:{for(var g=vt,x=on;g.nodeType!==8;){if(!x){g=null;break t}if(g=un(g.nextSibling),g===null){g=null;break t}}x=g.data,g=x==="F!"||x==="F"?g:null}if(g){vt=un(g.nextSibling),d=g.data==="F!";break e}}ei(d)}d=!1}d&&(s=c[0])}}return c=jr(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dj,lastRenderedState:s},c.queue=d,c=Dj.bind(null,Le,d),d.dispatch=c,d=Gh(!1),x=Wh.bind(null,Le,!1,d.queue),d=jr(),g={state:s,dispatch:null,action:i,pending:null},d.queue=g,c=UT.bind(null,Le,g,x,c),g.dispatch=c,d.memoizedState=i,[s,c,!1]}function mj(i){var s=kt();return hj(s,at,i)}function hj(i,s,c){if(s=Uh(i,s,dj)[0],i=Su(ha)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=_o(s)}catch(A){throw A===nl?pu:A}else d=s;s=kt();var g=s.queue,x=g.dispatch;return c!==s.memoizedState&&(Le.flags|=2048,ol(9,{destroy:void 0},HT.bind(null,g,c),null)),[d,x,i]}function HT(i,s){i.action=s}function pj(i){var s=kt(),c=at;if(c!==null)return hj(s,c,i);kt(),s=s.memoizedState,c=kt();var d=c.queue.dispatch;return c.memoizedState=i,[s,d,!1]}function ol(i,s,c,d){return i={tag:i,create:c,deps:d,inst:s,next:null},s=Le.updateQueue,s===null&&(s=_u(),Le.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,s.lastEffect=i),i}function vj(){return kt().memoizedState}function Au(i,s,c,d){var g=jr();Le.flags|=i,g.memoizedState=ol(1|s,{destroy:void 0},c,d===void 0?null:d)}function Cu(i,s,c,d){var g=kt();d=d===void 0?null:d;var x=g.memoizedState.inst;at!==null&&d!==null&&qh(d,at.memoizedState.deps)?g.memoizedState=ol(s,x,c,d):(Le.flags|=i,g.memoizedState=ol(1|s,x,c,d))}function gj(i,s){Au(8390656,8,i,s)}function Fh(i,s){Cu(2048,8,i,s)}function GT(i){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=_u(),Le.updateQueue=s,s.events=[i];else{var c=s.events;c===null?s.events=[i]:c.push(i)}}function yj(i){var s=kt().memoizedState;return GT({ref:s,nextImpl:i}),function(){if((Je&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function xj(i,s){return Cu(4,2,i,s)}function bj(i,s){return Cu(4,4,i,s)}function jj(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Nj(i,s,c){c=c!=null?c.concat([i]):null,Cu(4,4,jj.bind(null,s,i),c)}function Vh(){}function _j(i,s){var c=kt();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&qh(s,d[1])?d[0]:(c.memoizedState=[i,s],i)}function wj(i,s){var c=kt();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&qh(s,d[1]))return d[0];if(d=i(),Wi){Bn(!0);try{i()}finally{Bn(!1)}}return c.memoizedState=[d,s],d}function Yh(i,s,c){return c===void 0||(ma&1073741824)!==0&&(Fe&261930)===0?i.memoizedState=s:(i.memoizedState=c,i=SN(),Le.lanes|=i,ci|=i,c)}function Sj(i,s,c,d){return Br(c,s)?c:il.current!==null?(i=Yh(i,c,d),Br(i,s)||(Lt=!0),i):(ma&42)===0||(ma&1073741824)!==0&&(Fe&261930)===0?(Lt=!0,i.memoizedState=c):(i=SN(),Le.lanes|=i,ci|=i,s)}function Aj(i,s,c,d,g){var x=J.p;J.p=x!==0&&8>x?x:8;var A=P.T,D={};P.T=D,Wh(i,!1,s,c);try{var q=g(),Z=P.S;if(Z!==null&&Z(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var oe=IT(q,d);wo(i,s,oe,Fr(i))}else wo(i,s,d,Fr(i))}catch(me){wo(i,s,{then:function(){},status:"rejected",reason:me},Fr())}finally{J.p=x,A!==null&&D.types!==null&&(A.types=D.types),P.T=A}}function QT(){}function Kh(i,s,c,d){if(i.tag!==5)throw Error(n(476));var g=Cj(i).queue;Aj(i,g,s,H,c===null?QT:function(){return Ej(i),c(d)})}function Cj(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:H},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Ej(i){var s=Cj(i);s.next===null&&(s=i.alternate.memoizedState),wo(i,s.next.queue,{},Fr())}function Xh(){return lr($o)}function Oj(){return kt().memoizedState}function zj(){return kt().memoizedState}function FT(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=Fr();i=ni(c);var d=ai(s,i,c);d!==null&&(Pr(d,s,c),xo(d,s,c)),s={cache:Sh()},i.payload=s;return}s=s.return}}function VT(i,s,c){var d=Fr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Eu(i)?Mj(s,c):(c=hh(i,s,c,d),c!==null&&(Pr(c,i,d),Tj(c,s,d)))}function Dj(i,s,c){var d=Fr();wo(i,s,c,d)}function wo(i,s,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Eu(i))Mj(s,g);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var A=s.lastRenderedState,D=x(A,c);if(g.hasEagerState=!0,g.eagerState=D,Br(D,A))return ou(i,s,g,0),ft===null&&lu(),!1}catch{}if(c=hh(i,s,g,d),c!==null)return Pr(c,i,d),Tj(c,s,d),!0}return!1}function Wh(i,s,c,d){if(d={lane:2,revertLane:Op(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Eu(i)){if(s)throw Error(n(479))}else s=hh(i,c,d,2),s!==null&&Pr(s,i,2)}function Eu(i){var s=i.alternate;return i===Le||s!==null&&s===Le}function Mj(i,s){sl=ju=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function Tj(i,s,c){if((c&4194048)!==0){var d=s.lanes;d&=i.pendingLanes,c|=d,s.lanes=c,Lb(i,c)}}var So={readContext:lr,use:wu,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};So.useEffectEvent=At;var kj={readContext:lr,use:wu,useCallback:function(i,s){return jr().memoizedState=[i,s===void 0?null:s],i},useContext:lr,useEffect:gj,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,Au(4194308,4,jj.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Au(4194308,4,i,s)},useInsertionEffect:function(i,s){Au(4,2,i,s)},useMemo:function(i,s){var c=jr();s=s===void 0?null:s;var d=i();if(Wi){Bn(!0);try{i()}finally{Bn(!1)}}return c.memoizedState=[d,s],d},useReducer:function(i,s,c){var d=jr();if(c!==void 0){var g=c(s);if(Wi){Bn(!0);try{c(s)}finally{Bn(!1)}}}else g=s;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=VT.bind(null,Le,i),[d.memoizedState,i]},useRef:function(i){var s=jr();return i={current:i},s.memoizedState=i},useState:function(i){i=Gh(i);var s=i.queue,c=Dj.bind(null,Le,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:Vh,useDeferredValue:function(i,s){var c=jr();return Yh(c,i,s)},useTransition:function(){var i=Gh(!1);return i=Aj.bind(null,Le,i.queue,!0,!1),jr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var d=Le,g=jr();if(Ye){if(c===void 0)throw Error(n(407));c=c()}else{if(c=s(),ft===null)throw Error(n(349));(Fe&127)!==0||tj(d,s,c)}g.memoizedState=c;var x={value:c,getSnapshot:s};return g.queue=x,gj(nj.bind(null,d,x,i),[i]),d.flags|=2048,ol(9,{destroy:void 0},rj.bind(null,d,x,c,s),null),c},useId:function(){var i=jr(),s=ft.identifierPrefix;if(Ye){var c=Hn,d=Un;c=(d&~(1<<32-br(d)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Nu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=BT++,s="_"+s+"r_"+c.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Xh,useFormState:fj,useActionState:fj,useOptimistic:function(i){var s=jr();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Wh.bind(null,Le,!0,c),c.dispatch=s,[i,s]},useMemoCache:$h,useCacheRefresh:function(){return jr().memoizedState=FT.bind(null,Le)},useEffectEvent:function(i){var s=jr(),c={impl:i};return s.memoizedState=c,function(){if((Je&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},Zh={readContext:lr,use:wu,useCallback:_j,useContext:lr,useEffect:Fh,useImperativeHandle:Nj,useInsertionEffect:xj,useLayoutEffect:bj,useMemo:wj,useReducer:Su,useRef:vj,useState:function(){return Su(ha)},useDebugValue:Vh,useDeferredValue:function(i,s){var c=kt();return Sj(c,at.memoizedState,i,s)},useTransition:function(){var i=Su(ha)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:_o(i),s]},useSyncExternalStore:ej,useId:Oj,useHostTransitionStatus:Xh,useFormState:mj,useActionState:mj,useOptimistic:function(i,s){var c=kt();return sj(c,at,i,s)},useMemoCache:$h,useCacheRefresh:zj};Zh.useEffectEvent=yj;var Pj={readContext:lr,use:wu,useCallback:_j,useContext:lr,useEffect:Fh,useImperativeHandle:Nj,useInsertionEffect:xj,useLayoutEffect:bj,useMemo:wj,useReducer:Hh,useRef:vj,useState:function(){return Hh(ha)},useDebugValue:Vh,useDeferredValue:function(i,s){var c=kt();return at===null?Yh(c,i,s):Sj(c,at.memoizedState,i,s)},useTransition:function(){var i=Hh(ha)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:_o(i),s]},useSyncExternalStore:ej,useId:Oj,useHostTransitionStatus:Xh,useFormState:pj,useActionState:pj,useOptimistic:function(i,s){var c=kt();return at!==null?sj(c,at,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:$h,useCacheRefresh:zj};Pj.useEffectEvent=yj;function Jh(i,s,c,d){s=i.memoizedState,c=c(d,s),c=c==null?s:v({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var ep={enqueueSetState:function(i,s,c){i=i._reactInternals;var d=Fr(),g=ni(d);g.payload=s,c!=null&&(g.callback=c),s=ai(i,g,d),s!==null&&(Pr(s,i,d),xo(s,i,d))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var d=Fr(),g=ni(d);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=ai(i,g,d),s!==null&&(Pr(s,i,d),xo(s,i,d))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=Fr(),d=ni(c);d.tag=2,s!=null&&(d.callback=s),s=ai(i,d,c),s!==null&&(Pr(s,i,c),xo(s,i,c))}};function qj(i,s,c,d,g,x,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,x,A):s.prototype&&s.prototype.isPureReactComponent?!uo(c,d)||!uo(g,x):!0}function Rj(i,s,c,d){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==i&&ep.enqueueReplaceState(s,s.state,null)}function Zi(i,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(i=i.defaultProps){c===s&&(c=v({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Lj(i){su(i)}function Ij(i){console.error(i)}function Bj(i){su(i)}function Ou(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function $j(i,s,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function tp(i,s,c){return c=ni(c),c.tag=3,c.payload={element:null},c.callback=function(){Ou(i,s)},c}function Uj(i){return i=ni(i),i.tag=3,i}function Hj(i,s,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var x=d.value;i.payload=function(){return g(x)},i.callback=function(){$j(s,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){$j(s,c,d),typeof g!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function YT(i,s,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&el(s,c,g,!0),c=Ur.current,c!==null){switch(c.tag){case 31:case 13:return cn===null?$u():c.alternate===null&&Ct===0&&(Ct=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===vu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Ap(i,d,g)),!1;case 22:return c.flags|=65536,d===vu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Ap(i,d,g)),!1}throw Error(n(435,c.tag))}return Ap(i,d,g),$u(),!1}if(Ye)return s=Ur.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,d!==bh&&(i=Error(n(422),{cause:d}),ho(an(i,c)))):(d!==bh&&(s=Error(n(423),{cause:d}),ho(an(s,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=an(d,c),g=tp(i.stateNode,d,g),Dh(i,g),Ct!==4&&(Ct=2)),!1;var x=Error(n(520),{cause:d});if(x=an(x,c),To===null?To=[x]:To.push(x),Ct!==4&&(Ct=2),s===null)return!0;d=an(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=tp(c.stateNode,d,i),Dh(c,i),!1;case 1:if(s=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ui===null||!ui.has(x))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Uj(g),Hj(g,i,c,d),Dh(c,g),!1}c=c.return}while(c!==null);return!1}var rp=Error(n(461)),Lt=!1;function or(i,s,c,d){s.child=i===null?V0(s,null,c,d):Xi(s,i.child,c,d)}function Gj(i,s,c,d,g){c=c.render;var x=s.ref;if("ref"in d){var A={};for(var D in d)D!=="ref"&&(A[D]=d[D])}else A=d;return Fi(s),d=Rh(i,s,c,A,x,g),D=Lh(),i!==null&&!Lt?(Ih(i,s,g),pa(i,s,g)):(Ye&&D&&yh(s),s.flags|=1,or(i,s,d,g),s.child)}function Qj(i,s,c,d,g){if(i===null){var x=c.type;return typeof x=="function"&&!ph(x)&&x.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=x,Fj(i,s,x,d,g)):(i=uu(c.type,null,d,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(x=i.child,!up(i,g)){var A=x.memoizedProps;if(c=c.compare,c=c!==null?c:uo,c(A,d)&&i.ref===s.ref)return pa(i,s,g)}return s.flags|=1,i=ca(x,d),i.ref=s.ref,i.return=s,s.child=i}function Fj(i,s,c,d,g){if(i!==null){var x=i.memoizedProps;if(uo(x,d)&&i.ref===s.ref)if(Lt=!1,s.pendingProps=d=x,up(i,g))(i.flags&131072)!==0&&(Lt=!0);else return s.lanes=i.lanes,pa(i,s,g)}return np(i,s,c,d,g)}function Vj(i,s,c,d){var g=d.children,x=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|c:c,i!==null){for(d=s.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~x}else d=0,s.child=null;return Yj(i,s,x,c,d)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&hu(s,x!==null?x.cachePool:null),x!==null?X0(s,x):Th(),W0(s);else return d=s.lanes=536870912,Yj(i,s,x!==null?x.baseLanes|c:c,c,d)}else x!==null?(hu(s,x.cachePool),X0(s,x),si(),s.memoizedState=null):(i!==null&&hu(s,null),Th(),si());return or(i,s,g,c),s.child}function Ao(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Yj(i,s,c,d,g){var x=Ch();return x=x===null?null:{parent:qt._currentValue,pool:x},s.memoizedState={baseLanes:c,cachePool:x},i!==null&&hu(s,null),Th(),W0(s),i!==null&&el(i,s,d,!0),s.childLanes=g,null}function zu(i,s){return s=Mu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Kj(i,s,c){return Xi(s,i.child,null,c),i=zu(s,s.pendingProps),i.flags|=2,Hr(s),s.memoizedState=null,i}function KT(i,s,c){var d=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ye){if(d.mode==="hidden")return i=zu(s,d),s.lanes=536870912,Ao(null,i);if(Ph(s),(i=vt)?(i=l_(i,on),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Za!==null?{id:Un,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},c=M0(i),c.return=s,s.child=c,sr=s,vt=null)):i=null,i===null)throw ei(s);return s.lanes=536870912,null}return zu(s,d)}var x=i.memoizedState;if(x!==null){var A=x.dehydrated;if(Ph(s),g)if(s.flags&256)s.flags&=-257,s=Kj(i,s,c);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(Lt||el(i,s,c,!1),g=(c&i.childLanes)!==0,Lt||g){if(d=ft,d!==null&&(A=Ib(d,c),A!==0&&A!==x.retryLane))throw x.retryLane=A,Ui(i,A),Pr(d,i,A),rp;$u(),s=Kj(i,s,c)}else i=x.treeContext,vt=un(A.nextSibling),sr=s,Ye=!0,Ja=null,on=!1,i!==null&&P0(s,i),s=zu(s,d),s.flags|=4096;return s}return i=ca(i.child,{mode:d.mode,children:d.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Du(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function np(i,s,c,d,g){return Fi(s),c=Rh(i,s,c,d,void 0,g),d=Lh(),i!==null&&!Lt?(Ih(i,s,g),pa(i,s,g)):(Ye&&d&&yh(s),s.flags|=1,or(i,s,c,g),s.child)}function Xj(i,s,c,d,g,x){return Fi(s),s.updateQueue=null,c=J0(s,d,c,g),Z0(i),d=Lh(),i!==null&&!Lt?(Ih(i,s,x),pa(i,s,x)):(Ye&&d&&yh(s),s.flags|=1,or(i,s,c,x),s.child)}function Wj(i,s,c,d,g){if(Fi(s),s.stateNode===null){var x=Xs,A=c.contextType;typeof A=="object"&&A!==null&&(x=lr(A)),x=new c(d,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=ep,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=d,x.state=s.memoizedState,x.refs={},Oh(s),A=c.contextType,x.context=typeof A=="object"&&A!==null?lr(A):Xs,x.state=s.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(Jh(s,c,A,d),x.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(A=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),A!==x.state&&ep.enqueueReplaceState(x,x.state,null),jo(s,d,x,g),bo(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(i===null){x=s.stateNode;var D=s.memoizedProps,q=Zi(c,D);x.props=q;var Z=x.context,oe=c.contextType;A=Xs,typeof oe=="object"&&oe!==null&&(A=lr(oe));var me=c.getDerivedStateFromProps;oe=typeof me=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,oe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||Z!==A)&&Rj(s,x,d,A),ri=!1;var te=s.memoizedState;x.state=te,jo(s,d,x,g),bo(),Z=s.memoizedState,D||te!==Z||ri?(typeof me=="function"&&(Jh(s,c,me,d),Z=s.memoizedState),(q=ri||qj(s,c,q,d,te,Z,A))?(oe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=Z),x.props=d,x.state=Z,x.context=A,d=q):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{x=s.stateNode,zh(i,s),A=s.memoizedProps,oe=Zi(c,A),x.props=oe,me=s.pendingProps,te=x.context,Z=c.contextType,q=Xs,typeof Z=="object"&&Z!==null&&(q=lr(Z)),D=c.getDerivedStateFromProps,(Z=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==me||te!==q)&&Rj(s,x,d,q),ri=!1,te=s.memoizedState,x.state=te,jo(s,d,x,g),bo();var ie=s.memoizedState;A!==me||te!==ie||ri||i!==null&&i.dependencies!==null&&fu(i.dependencies)?(typeof D=="function"&&(Jh(s,c,D,d),ie=s.memoizedState),(oe=ri||qj(s,c,oe,d,te,ie,q)||i!==null&&i.dependencies!==null&&fu(i.dependencies))?(Z||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,ie,q),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,ie,q)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ie),x.props=d,x.state=ie,x.context=q,d=oe):(typeof x.componentDidUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),d=!1)}return x=d,Du(i,s),d=(s.flags&128)!==0,x||d?(x=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,i!==null&&d?(s.child=Xi(s,i.child,null,g),s.child=Xi(s,null,c,g)):or(i,s,c,g),s.memoizedState=x.state,i=s.child):i=pa(i,s,g),i}function Zj(i,s,c,d){return Gi(),s.flags|=256,or(i,s,c,d),s.child}var ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ip(i){return{baseLanes:i,cachePool:$0()}}function sp(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=Qr),i}function Jj(i,s,c){var d=s.pendingProps,g=!1,x=(s.flags&128)!==0,A;if((A=x)||(A=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ye){if(g?ii(s):si(),(i=vt)?(i=l_(i,on),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Za!==null?{id:Un,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},c=M0(i),c.return=s,s.child=c,sr=s,vt=null)):i=null,i===null)throw ei(s);return Up(i)?s.lanes=32:s.lanes=536870912,null}var D=d.children;return d=d.fallback,g?(si(),g=s.mode,D=Mu({mode:"hidden",children:D},g),d=Hi(d,g,c,null),D.return=s,d.return=s,D.sibling=d,s.child=D,d=s.child,d.memoizedState=ip(c),d.childLanes=sp(i,A,c),s.memoizedState=ap,Ao(null,d)):(ii(s),lp(s,D))}var q=i.memoizedState;if(q!==null&&(D=q.dehydrated,D!==null)){if(x)s.flags&256?(ii(s),s.flags&=-257,s=op(i,s,c)):s.memoizedState!==null?(si(),s.child=i.child,s.flags|=128,s=null):(si(),D=d.fallback,g=s.mode,d=Mu({mode:"visible",children:d.children},g),D=Hi(D,g,c,null),D.flags|=2,d.return=s,D.return=s,d.sibling=D,s.child=d,Xi(s,i.child,null,c),d=s.child,d.memoizedState=ip(c),d.childLanes=sp(i,A,c),s.memoizedState=ap,s=Ao(null,d));else if(ii(s),Up(D)){if(A=D.nextSibling&&D.nextSibling.dataset,A)var Z=A.dgst;A=Z,d=Error(n(419)),d.stack="",d.digest=A,ho({value:d,source:null,stack:null}),s=op(i,s,c)}else if(Lt||el(i,s,c,!1),A=(c&i.childLanes)!==0,Lt||A){if(A=ft,A!==null&&(d=Ib(A,c),d!==0&&d!==q.retryLane))throw q.retryLane=d,Ui(i,d),Pr(A,i,d),rp;$p(D)||$u(),s=op(i,s,c)}else $p(D)?(s.flags|=192,s.child=i.child,s=null):(i=q.treeContext,vt=un(D.nextSibling),sr=s,Ye=!0,Ja=null,on=!1,i!==null&&P0(s,i),s=lp(s,d.children),s.flags|=4096);return s}return g?(si(),D=d.fallback,g=s.mode,q=i.child,Z=q.sibling,d=ca(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&65011712,Z!==null?D=ca(Z,D):(D=Hi(D,g,c,null),D.flags|=2),D.return=s,d.return=s,d.sibling=D,s.child=d,Ao(null,d),d=s.child,D=i.child.memoizedState,D===null?D=ip(c):(g=D.cachePool,g!==null?(q=qt._currentValue,g=g.parent!==q?{parent:q,pool:q}:g):g=$0(),D={baseLanes:D.baseLanes|c,cachePool:g}),d.memoizedState=D,d.childLanes=sp(i,A,c),s.memoizedState=ap,Ao(i.child,d)):(ii(s),c=i.child,i=c.sibling,c=ca(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=c,s.memoizedState=null,c)}function lp(i,s){return s=Mu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Mu(i,s){return i=$r(22,i,null,s),i.lanes=0,i}function op(i,s,c){return Xi(s,i.child,null,c),i=lp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function eN(i,s,c){i.lanes|=s;var d=i.alternate;d!==null&&(d.lanes|=s),_h(i.return,s,c)}function cp(i,s,c,d,g,x){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:x}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=g,A.treeForkCount=x)}function tN(i,s,c){var d=s.pendingProps,g=d.revealOrder,x=d.tail;d=d.children;var A=Tt.current,D=(A&2)!==0;if(D?(A=A&1|2,s.flags|=128):A&=1,fe(Tt,A),or(i,s,d,c),d=Ye?mo:0,!D&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&eN(i,c,s);else if(i.tag===19)eN(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=s.child,g=null;c!==null;)i=c.alternate,i!==null&&bu(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),cp(s,!1,g,c,x,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&bu(i)===null){s.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}cp(s,!0,c,null,x,d);break;case"together":cp(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function pa(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),ci|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(el(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,c=ca(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=ca(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function up(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&fu(i)))}function XT(i,s,c){switch(s.tag){case 3:Se(s,s.stateNode.containerInfo),ti(s,qt,i.memoizedState.cache),Gi();break;case 27:case 5:F(s);break;case 4:Se(s,s.stateNode.containerInfo);break;case 10:ti(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ph(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(ii(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Jj(i,s,c):(ii(s),i=pa(i,s,c),i!==null?i.sibling:null);ii(s);break;case 19:var g=(i.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(el(i,s,c,!1),d=(c&s.childLanes)!==0),g){if(d)return tN(i,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),fe(Tt,Tt.current),d)break;return null;case 22:return s.lanes=0,Vj(i,s,c,s.pendingProps);case 24:ti(s,qt,i.memoizedState.cache)}return pa(i,s,c)}function rN(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)Lt=!0;else{if(!up(i,c)&&(s.flags&128)===0)return Lt=!1,XT(i,s,c);Lt=(i.flags&131072)!==0}else Lt=!1,Ye&&(s.flags&1048576)!==0&&k0(s,mo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var d=s.pendingProps;if(i=Yi(s.elementType),s.type=i,typeof i=="function")ph(i)?(d=Zi(i,d),s.tag=1,s=Wj(null,s,i,d,c)):(s.tag=0,s=np(null,s,i,d,c));else{if(i!=null){var g=i.$$typeof;if(g===E){s.tag=11,s=Gj(null,s,i,d,c);break e}else if(g===L){s.tag=14,s=Qj(null,s,i,d,c);break e}}throw s=ue(i)||i,Error(n(306,s,""))}}return s;case 0:return np(i,s,s.type,s.pendingProps,c);case 1:return d=s.type,g=Zi(d,s.pendingProps),Wj(i,s,d,g,c);case 3:e:{if(Se(s,s.stateNode.containerInfo),i===null)throw Error(n(387));d=s.pendingProps;var x=s.memoizedState;g=x.element,zh(i,s),jo(s,d,null,c);var A=s.memoizedState;if(d=A.cache,ti(s,qt,d),d!==x.cache&&wh(s,[qt],c,!0),bo(),d=A.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=Zj(i,s,d,c);break e}else if(d!==g){g=an(Error(n(424)),s),ho(g),s=Zj(i,s,d,c);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,vt=un(i.firstChild),sr=s,Ye=!0,Ja=null,on=!0,c=V0(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Gi(),d===g){s=pa(i,s,c);break e}or(i,s,d,c)}s=s.child}return s;case 26:return Du(i,s),i===null?(c=m_(s.type,null,s.pendingProps,null))?s.memoizedState=c:Ye||(c=s.type,i=s.pendingProps,d=Yu($.current).createElement(c),d[ir]=s,d[Or]=i,cr(d,c,i),Kt(d),s.stateNode=d):s.memoizedState=m_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return F(s),i===null&&Ye&&(d=s.stateNode=u_(s.type,s.pendingProps,$.current),sr=s,on=!0,g=vt,hi(s.type)?(Hp=g,vt=un(d.firstChild)):vt=g),or(i,s,s.pendingProps.children,c),Du(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ye&&((g=d=vt)&&(d=Ak(d,s.type,s.pendingProps,on),d!==null?(s.stateNode=d,sr=s,vt=un(d.firstChild),on=!1,g=!0):g=!1),g||ei(s)),F(s),g=s.type,x=s.pendingProps,A=i!==null?i.memoizedProps:null,d=x.children,Lp(g,x)?d=null:A!==null&&Lp(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=Rh(i,s,$T,null,null,c),$o._currentValue=g),Du(i,s),or(i,s,d,c),s.child;case 6:return i===null&&Ye&&((i=c=vt)&&(c=Ck(c,s.pendingProps,on),c!==null?(s.stateNode=c,sr=s,vt=null,i=!0):i=!1),i||ei(s)),null;case 13:return Jj(i,s,c);case 4:return Se(s,s.stateNode.containerInfo),d=s.pendingProps,i===null?s.child=Xi(s,null,d,c):or(i,s,d,c),s.child;case 11:return Gj(i,s,s.type,s.pendingProps,c);case 7:return or(i,s,s.pendingProps,c),s.child;case 8:return or(i,s,s.pendingProps.children,c),s.child;case 12:return or(i,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,ti(s,s.type,d.value),or(i,s,d.children,c),s.child;case 9:return g=s.type._context,d=s.pendingProps.children,Fi(s),g=lr(g),d=d(g),s.flags|=1,or(i,s,d,c),s.child;case 14:return Qj(i,s,s.type,s.pendingProps,c);case 15:return Fj(i,s,s.type,s.pendingProps,c);case 19:return tN(i,s,c);case 31:return KT(i,s,c);case 22:return Vj(i,s,c,s.pendingProps);case 24:return Fi(s),d=lr(qt),i===null?(g=Ch(),g===null&&(g=ft,x=Sh(),g.pooledCache=x,x.refCount++,x!==null&&(g.pooledCacheLanes|=c),g=x),s.memoizedState={parent:d,cache:g},Oh(s),ti(s,qt,g)):((i.lanes&c)!==0&&(zh(i,s),jo(s,null,null,c),bo()),g=i.memoizedState,x=s.memoizedState,g.parent!==d?(g={parent:d,cache:d},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ti(s,qt,d)):(d=x.cache,ti(s,qt,d),d!==g.cache&&wh(s,[qt],c,!0))),or(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function va(i){i.flags|=4}function dp(i,s,c,d,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(ON())i.flags|=8192;else throw Ki=vu,Eh}else i.flags&=-16777217}function nN(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!y_(s))if(ON())i.flags|=8192;else throw Ki=vu,Eh}function Tu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?ze():536870912,i.lanes|=s,fl|=s)}function Co(i,s){if(!Ye)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function gt(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(s)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=c,s}function WT(i,s,c){var d=s.pendingProps;switch(xh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(s),null;case 1:return gt(s),null;case 3:return c=s.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),fa(qt),ne(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Js(s)?va(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jh())),gt(s),null;case 26:var g=s.type,x=s.memoizedState;return i===null?(va(s),x!==null?(gt(s),nN(s,x)):(gt(s),dp(s,g,null,d,c))):x?x!==i.memoizedState?(va(s),gt(s),nN(s,x)):(gt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==d&&va(s),gt(s),dp(s,g,i,d,c)),null;case 27:if(R(s),c=$.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==d&&va(s);else{if(!d){if(s.stateNode===null)throw Error(n(166));return gt(s),null}i=ye.current,Js(s)?q0(s):(i=u_(g,d,c),s.stateNode=i,va(s))}return gt(s),null;case 5:if(R(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==d&&va(s);else{if(!d){if(s.stateNode===null)throw Error(n(166));return gt(s),null}if(x=ye.current,Js(s))q0(s);else{var A=Yu($.current);switch(x){case 1:x=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:x=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":x=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":x=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":x=A.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?A.createElement(g,{is:d.is}):A.createElement(g)}}x[ir]=s,x[Or]=d;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)x.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=x;e:switch(cr(x,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&va(s)}}return gt(s),dp(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,c),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==d&&va(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(n(166));if(i=$.current,Js(s)){if(i=s.stateNode,c=s.memoizedProps,d=null,g=sr,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[ir]=s,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||JN(i.nodeValue,c)),i||ei(s,!0)}else i=Yu(i).createTextNode(d),i[ir]=s,s.stateNode=i}return gt(s),null;case 31:if(c=s.memoizedState,i===null||i.memoizedState!==null){if(d=Js(s),c!==null){if(i===null){if(!d)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[ir]=s}else Gi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),i=!1}else c=jh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return s.flags&256?(Hr(s),s):(Hr(s),null);if((s.flags&128)!==0)throw Error(n(558))}return gt(s),null;case 13:if(d=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Js(s),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[ir]=s}else Gi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),g=!1}else g=jh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Hr(s),s):(Hr(s),null)}return Hr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=s.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==g&&(d.flags|=2048)),c!==i&&c&&(s.child.flags|=8192),Tu(s,s.updateQueue),gt(s),null);case 4:return ne(),i===null&&Tp(s.stateNode.containerInfo),gt(s),null;case 10:return fa(s.type),gt(s),null;case 19:if(ee(Tt),d=s.memoizedState,d===null)return gt(s),null;if(g=(s.flags&128)!==0,x=d.rendering,x===null)if(g)Co(d,!1);else{if(Ct!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(x=bu(i),x!==null){for(s.flags|=128,Co(d,!1),i=x.updateQueue,s.updateQueue=i,Tu(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)D0(c,i),c=c.sibling;return fe(Tt,Tt.current&1|2),Ye&&ua(s,d.treeForkCount),s.child}i=i.sibling}d.tail!==null&&Me()>Lu&&(s.flags|=128,g=!0,Co(d,!1),s.lanes=4194304)}else{if(!g)if(i=bu(x),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Tu(s,i),Co(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!Ye)return gt(s),null}else 2*Me()-d.renderingStartTime>Lu&&c!==536870912&&(s.flags|=128,g=!0,Co(d,!1),s.lanes=4194304);d.isBackwards?(x.sibling=s.child,s.child=x):(i=d.last,i!==null?i.sibling=x:s.child=x,d.last=x)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Me(),i.sibling=null,c=Tt.current,fe(Tt,g?c&1|2:c&1),Ye&&ua(s,d.treeForkCount),i):(gt(s),null);case 22:case 23:return Hr(s),kh(),d=s.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(gt(s),s.subtreeFlags&6&&(s.flags|=8192)):gt(s),c=s.updateQueue,c!==null&&Tu(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),i!==null&&ee(Vi),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),fa(qt),gt(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function ZT(i,s){switch(xh(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return fa(qt),ne(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return R(s),null;case 31:if(s.memoizedState!==null){if(Hr(s),s.alternate===null)throw Error(n(340));Gi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Hr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Gi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ee(Tt),null;case 4:return ne(),null;case 10:return fa(s.type),null;case 22:case 23:return Hr(s),kh(),i!==null&&ee(Vi),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return fa(qt),null;case 25:return null;default:return null}}function aN(i,s){switch(xh(s),s.tag){case 3:fa(qt),ne();break;case 26:case 27:case 5:R(s);break;case 4:ne();break;case 31:s.memoizedState!==null&&Hr(s);break;case 13:Hr(s);break;case 19:ee(Tt);break;case 10:fa(s.type);break;case 22:case 23:Hr(s),kh(),i!==null&&ee(Vi);break;case 24:fa(qt)}}function Eo(i,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&i)===i){d=void 0;var x=c.create,A=c.inst;d=x(),A.destroy=d}c=c.next}while(c!==g)}}catch(D){tt(s,s.return,D)}}function li(i,s,c){try{var d=s.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var x=g.next;d=x;do{if((d.tag&i)===i){var A=d.inst,D=A.destroy;if(D!==void 0){A.destroy=void 0,g=s;var q=c,Z=D;try{Z()}catch(oe){tt(g,q,oe)}}}d=d.next}while(d!==x)}}catch(oe){tt(s,s.return,oe)}}function iN(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{K0(s,c)}catch(d){tt(i,i.return,d)}}}function sN(i,s,c){c.props=Zi(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){tt(i,s,d)}}function Oo(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(g){tt(i,s,g)}}function Gn(i,s){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){tt(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){tt(i,s,g)}else c.current=null}function lN(i){var s=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){tt(i,i.return,g)}}function fp(i,s,c){try{var d=i.stateNode;bk(d,i.type,c,s),d[Or]=s}catch(g){tt(i,i.return,g)}}function oN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&hi(i.type)||i.tag===4}function mp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||oN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&hi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function hp(i,s,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=la));else if(d!==4&&(d===27&&hi(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for(hp(i,s,c),i=i.sibling;i!==null;)hp(i,s,c),i=i.sibling}function ku(i,s,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(d!==4&&(d===27&&hi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(ku(i,s,c),i=i.sibling;i!==null;)ku(i,s,c),i=i.sibling}function cN(i){var s=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);cr(s,d,c),s[ir]=i,s[Or]=c}catch(x){tt(i,i.return,x)}}var ga=!1,It=!1,pp=!1,uN=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function JT(i,s){if(i=i.containerInfo,qp=td,i=N0(i),oh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var A=0,D=-1,q=-1,Z=0,oe=0,me=i,te=null;t:for(;;){for(var ie;me!==c||g!==0&&me.nodeType!==3||(D=A+g),me!==x||d!==0&&me.nodeType!==3||(q=A+d),me.nodeType===3&&(A+=me.nodeValue.length),(ie=me.firstChild)!==null;)te=me,me=ie;for(;;){if(me===i)break t;if(te===c&&++Z===g&&(D=A),te===x&&++oe===d&&(q=A),(ie=me.nextSibling)!==null)break;me=te,te=me.parentNode}me=ie}c=D===-1||q===-1?null:{start:D,end:q}}else c=null}c=c||{start:0,end:0}}else c=null;for(Rp={focusedElem:i,selectionRange:c},td=!1,Xt=s;Xt!==null;)if(s=Xt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Xt=i;else for(;Xt!==null;){switch(s=Xt,x=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,c=s,g=x.memoizedProps,x=x.memoizedState,d=c.stateNode;try{var je=Zi(c.type,g);i=d.getSnapshotBeforeUpdate(je,x),d.__reactInternalSnapshotBeforeUpdate=i}catch(Te){tt(c,c.return,Te)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)Bp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Bp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,Xt=i;break}Xt=s.return}}function dN(i,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:xa(i,c),d&4&&Eo(5,c);break;case 1:if(xa(i,c),d&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(A){tt(c,c.return,A)}else{var g=Zi(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(c,c.return,A)}}d&64&&iN(c),d&512&&Oo(c,c.return);break;case 3:if(xa(i,c),d&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{K0(i,s)}catch(A){tt(c,c.return,A)}}break;case 27:s===null&&d&4&&cN(c);case 26:case 5:xa(i,c),s===null&&d&4&&lN(c),d&512&&Oo(c,c.return);break;case 12:xa(i,c);break;case 31:xa(i,c),d&4&&hN(i,c);break;case 13:xa(i,c),d&4&&pN(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=ok.bind(null,c),Ek(i,c))));break;case 22:if(d=c.memoizedState!==null||ga,!d){s=s!==null&&s.memoizedState!==null||It,g=ga;var x=It;ga=d,(It=s)&&!x?ba(i,c,(c.subtreeFlags&8772)!==0):xa(i,c),ga=g,It=x}break;case 30:break;default:xa(i,c)}}function fN(i){var s=i.alternate;s!==null&&(i.alternate=null,fN(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Qm(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var jt=null,Dr=!1;function ya(i,s,c){for(c=c.child;c!==null;)mN(i,s,c),c=c.sibling}function mN(i,s,c){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(pr,c)}catch{}switch(c.tag){case 26:It||Gn(c,s),ya(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:It||Gn(c,s);var d=jt,g=Dr;hi(c.type)&&(jt=c.stateNode,Dr=!1),ya(i,s,c),Lo(c.stateNode),jt=d,Dr=g;break;case 5:It||Gn(c,s);case 6:if(d=jt,g=Dr,jt=null,ya(i,s,c),jt=d,Dr=g,jt!==null)if(Dr)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(c.stateNode)}catch(x){tt(c,s,x)}else try{jt.removeChild(c.stateNode)}catch(x){tt(c,s,x)}break;case 18:jt!==null&&(Dr?(i=jt,i_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),bl(i)):i_(jt,c.stateNode));break;case 4:d=jt,g=Dr,jt=c.stateNode.containerInfo,Dr=!0,ya(i,s,c),jt=d,Dr=g;break;case 0:case 11:case 14:case 15:li(2,c,s),It||li(4,c,s),ya(i,s,c);break;case 1:It||(Gn(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&sN(c,s,d)),ya(i,s,c);break;case 21:ya(i,s,c);break;case 22:It=(d=It)||c.memoizedState!==null,ya(i,s,c),It=d;break;default:ya(i,s,c)}}function hN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{bl(i)}catch(c){tt(s,s.return,c)}}}function pN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{bl(i)}catch(c){tt(s,s.return,c)}}function ek(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new uN),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new uN),s;default:throw Error(n(435,i.tag))}}function Pu(i,s){var c=ek(i);s.forEach(function(d){if(!c.has(d)){c.add(d);var g=ck.bind(null,i,d);d.then(g,g)}})}function Mr(i,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],x=i,A=s,D=A;e:for(;D!==null;){switch(D.tag){case 27:if(hi(D.type)){jt=D.stateNode,Dr=!1;break e}break;case 5:jt=D.stateNode,Dr=!1;break e;case 3:case 4:jt=D.stateNode.containerInfo,Dr=!0;break e}D=D.return}if(jt===null)throw Error(n(160));mN(x,A,g),jt=null,Dr=!1,x=g.alternate,x!==null&&(x.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)vN(s,i),s=s.sibling}var Cn=null;function vN(i,s){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Mr(s,i),Tr(i),d&4&&(li(3,i,i.return),Eo(3,i),li(5,i,i.return));break;case 1:Mr(s,i),Tr(i),d&512&&(It||c===null||Gn(c,c.return)),d&64&&ga&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Cn;if(Mr(s,i),Tr(i),d&512&&(It||c===null||Gn(c,c.return)),d&4){var x=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":x=g.getElementsByTagName("title")[0],(!x||x[to]||x[ir]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=g.createElement(d),g.head.insertBefore(x,g.querySelector("head > title"))),cr(x,d,c),x[ir]=i,Kt(x),d=x;break e;case"link":var A=v_("link","href",g).get(d+(c.href||""));if(A){for(var D=0;D<A.length;D++)if(x=A[D],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(D,1);break t}}x=g.createElement(d),cr(x,d,c),g.head.appendChild(x);break;case"meta":if(A=v_("meta","content",g).get(d+(c.content||""))){for(D=0;D<A.length;D++)if(x=A[D],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(D,1);break t}}x=g.createElement(d),cr(x,d,c),g.head.appendChild(x);break;default:throw Error(n(468,d))}x[ir]=i,Kt(x),d=x}i.stateNode=d}else g_(g,i.type,i.stateNode);else i.stateNode=p_(g,d,i.memoizedProps);else x!==d?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,d===null?g_(g,i.type,i.stateNode):p_(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&fp(i,i.memoizedProps,c.memoizedProps)}break;case 27:Mr(s,i),Tr(i),d&512&&(It||c===null||Gn(c,c.return)),c!==null&&d&4&&fp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Mr(s,i),Tr(i),d&512&&(It||c===null||Gn(c,c.return)),i.flags&32){g=i.stateNode;try{Hs(g,"")}catch(je){tt(i,i.return,je)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,fp(i,g,c!==null?c.memoizedProps:g)),d&1024&&(pp=!0);break;case 6:if(Mr(s,i),Tr(i),d&4){if(i.stateNode===null)throw Error(n(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(je){tt(i,i.return,je)}}break;case 3:if(Wu=null,g=Cn,Cn=Ku(s.containerInfo),Mr(s,i),Cn=g,Tr(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{bl(s.containerInfo)}catch(je){tt(i,i.return,je)}pp&&(pp=!1,gN(i));break;case 4:d=Cn,Cn=Ku(i.stateNode.containerInfo),Mr(s,i),Tr(i),Cn=d;break;case 12:Mr(s,i),Tr(i);break;case 31:Mr(s,i),Tr(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Pu(i,d)));break;case 13:Mr(s,i),Tr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ru=Me()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Pu(i,d)));break;case 22:g=i.memoizedState!==null;var q=c!==null&&c.memoizedState!==null,Z=ga,oe=It;if(ga=Z||g,It=oe||q,Mr(s,i),It=oe,ga=Z,Tr(i),d&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(c===null||q||ga||It||Ji(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){q=c=s;try{if(x=q.stateNode,g)A=x.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{D=q.stateNode;var me=q.memoizedProps.style,te=me!=null&&me.hasOwnProperty("display")?me.display:null;D.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(je){tt(q,q.return,je)}}}else if(s.tag===6){if(c===null){q=s;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(je){tt(q,q.return,je)}}}else if(s.tag===18){if(c===null){q=s;try{var ie=q.stateNode;g?s_(ie,!0):s_(q.stateNode,!1)}catch(je){tt(q,q.return,je)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Pu(i,c))));break;case 19:Mr(s,i),Tr(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Pu(i,d)));break;case 30:break;case 21:break;default:Mr(s,i),Tr(i)}}function Tr(i){var s=i.flags;if(s&2){try{for(var c,d=i.return;d!==null;){if(oN(d)){c=d;break}d=d.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var g=c.stateNode,x=mp(i);ku(i,x,g);break;case 5:var A=c.stateNode;c.flags&32&&(Hs(A,""),c.flags&=-33);var D=mp(i);ku(i,D,A);break;case 3:case 4:var q=c.stateNode.containerInfo,Z=mp(i);hp(i,Z,q);break;default:throw Error(n(161))}}catch(oe){tt(i,i.return,oe)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function gN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;gN(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function xa(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)dN(i,s.alternate,s),s=s.sibling}function Ji(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:li(4,s,s.return),Ji(s);break;case 1:Gn(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&sN(s,s.return,c),Ji(s);break;case 27:Lo(s.stateNode);case 26:case 5:Gn(s,s.return),Ji(s);break;case 22:s.memoizedState===null&&Ji(s);break;case 30:Ji(s);break;default:Ji(s)}i=i.sibling}}function ba(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,g=i,x=s,A=x.flags;switch(x.tag){case 0:case 11:case 15:ba(g,x,c),Eo(4,x);break;case 1:if(ba(g,x,c),d=x,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Z){tt(d,d.return,Z)}if(d=x,g=d.updateQueue,g!==null){var D=d.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)Y0(q[g],D)}catch(Z){tt(d,d.return,Z)}}c&&A&64&&iN(x),Oo(x,x.return);break;case 27:cN(x);case 26:case 5:ba(g,x,c),c&&d===null&&A&4&&lN(x),Oo(x,x.return);break;case 12:ba(g,x,c);break;case 31:ba(g,x,c),c&&A&4&&hN(g,x);break;case 13:ba(g,x,c),c&&A&4&&pN(g,x);break;case 22:x.memoizedState===null&&ba(g,x,c),Oo(x,x.return);break;case 30:break;default:ba(g,x,c)}s=s.sibling}}function vp(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&po(c))}function gp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&po(i))}function En(i,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)yN(i,s,c,d),s=s.sibling}function yN(i,s,c,d){var g=s.flags;switch(s.tag){case 0:case 11:case 15:En(i,s,c,d),g&2048&&Eo(9,s);break;case 1:En(i,s,c,d);break;case 3:En(i,s,c,d),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&po(i)));break;case 12:if(g&2048){En(i,s,c,d),i=s.stateNode;try{var x=s.memoizedProps,A=x.id,D=x.onPostCommit;typeof D=="function"&&D(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(q){tt(s,s.return,q)}}else En(i,s,c,d);break;case 31:En(i,s,c,d);break;case 13:En(i,s,c,d);break;case 23:break;case 22:x=s.stateNode,A=s.alternate,s.memoizedState!==null?x._visibility&2?En(i,s,c,d):zo(i,s):x._visibility&2?En(i,s,c,d):(x._visibility|=2,cl(i,s,c,d,(s.subtreeFlags&10256)!==0||!1)),g&2048&&vp(A,s);break;case 24:En(i,s,c,d),g&2048&&gp(s.alternate,s);break;default:En(i,s,c,d)}}function cl(i,s,c,d,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=i,A=s,D=c,q=d,Z=A.flags;switch(A.tag){case 0:case 11:case 15:cl(x,A,D,q,g),Eo(8,A);break;case 23:break;case 22:var oe=A.stateNode;A.memoizedState!==null?oe._visibility&2?cl(x,A,D,q,g):zo(x,A):(oe._visibility|=2,cl(x,A,D,q,g)),g&&Z&2048&&vp(A.alternate,A);break;case 24:cl(x,A,D,q,g),g&&Z&2048&&gp(A.alternate,A);break;default:cl(x,A,D,q,g)}s=s.sibling}}function zo(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,d=s,g=d.flags;switch(d.tag){case 22:zo(c,d),g&2048&&vp(d.alternate,d);break;case 24:zo(c,d),g&2048&&gp(d.alternate,d);break;default:zo(c,d)}s=s.sibling}}var Do=8192;function ul(i,s,c){if(i.subtreeFlags&Do)for(i=i.child;i!==null;)xN(i,s,c),i=i.sibling}function xN(i,s,c){switch(i.tag){case 26:ul(i,s,c),i.flags&Do&&i.memoizedState!==null&&Bk(c,Cn,i.memoizedState,i.memoizedProps);break;case 5:ul(i,s,c);break;case 3:case 4:var d=Cn;Cn=Ku(i.stateNode.containerInfo),ul(i,s,c),Cn=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Do,Do=16777216,ul(i,s,c),Do=d):ul(i,s,c));break;default:ul(i,s,c)}}function bN(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Mo(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];Xt=d,NN(d,i)}bN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)jN(i),i=i.sibling}function jN(i){switch(i.tag){case 0:case 11:case 15:Mo(i),i.flags&2048&&li(9,i,i.return);break;case 3:Mo(i);break;case 12:Mo(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,qu(i)):Mo(i);break;default:Mo(i)}}function qu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];Xt=d,NN(d,i)}bN(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:li(8,s,s.return),qu(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,qu(s));break;default:qu(s)}i=i.sibling}}function NN(i,s){for(;Xt!==null;){var c=Xt;switch(c.tag){case 0:case 11:case 15:li(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:po(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Xt=d;else e:for(c=i;Xt!==null;){d=Xt;var g=d.sibling,x=d.return;if(fN(d),d===c){Xt=null;break e}if(g!==null){g.return=x,Xt=g;break e}Xt=x}}}var tk={getCacheForType:function(i){var s=lr(qt),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c},cacheSignal:function(){return lr(qt).controller.signal}},rk=typeof WeakMap=="function"?WeakMap:Map,Je=0,ft=null,Ue=null,Fe=0,et=0,Gr=null,oi=!1,dl=!1,yp=!1,ja=0,Ct=0,ci=0,es=0,xp=0,Qr=0,fl=0,To=null,kr=null,bp=!1,Ru=0,_N=0,Lu=1/0,Iu=null,ui=null,Qt=0,di=null,ml=null,Na=0,jp=0,Np=null,wN=null,ko=0,_p=null;function Fr(){return(Je&2)!==0&&Fe!==0?Fe&-Fe:P.T!==null?Op():Bb()}function SN(){if(Qr===0)if((Fe&536870912)===0||Ye){var i=Ps;Ps<<=1,(Ps&3932160)===0&&(Ps=262144),Qr=i}else Qr=536870912;return i=Ur.current,i!==null&&(i.flags|=32),Qr}function Pr(i,s,c){(i===ft&&(et===2||et===9)||i.cancelPendingCommit!==null)&&(hl(i,0),fi(i,Fe,Qr,!1)),vr(i,c),((Je&2)===0||i!==ft)&&(i===ft&&((Je&2)===0&&(es|=c),Ct===4&&fi(i,Fe,Qr,!1)),Qn(i))}function AN(i,s,c){if((Je&6)!==0)throw Error(n(327));var d=!c&&(s&127)===0&&(s&i.expiredLanes)===0||qi(i,s),g=d?ik(i,s):Sp(i,s,!0),x=d;do{if(g===0){dl&&!d&&fi(i,s,0,!1);break}else{if(c=i.current.alternate,x&&!nk(c)){g=Sp(i,s,!1),x=!1;continue}if(g===2){if(x=s,i.errorRecoveryDisabledLanes&x)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var D=i;g=To;var q=D.current.memoizedState.isDehydrated;if(q&&(hl(D,A).flags|=256),A=Sp(D,A,!1),A!==2){if(yp&&!q){D.errorRecoveryDisabledLanes|=x,es|=x,g=4;break e}x=kr,kr=g,x!==null&&(kr===null?kr=x:kr.push.apply(kr,x))}g=A}if(x=!1,g!==2)continue}}if(g===1){hl(i,0),fi(i,s,0,!0);break}e:{switch(d=i,x=g,x){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:fi(d,s,Qr,!oi);break e;case 2:kr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(g=Ru+300-Me(),10<g)){if(fi(d,s,Qr,!oi),$n(d,0,!0)!==0)break e;Na=s,d.timeoutHandle=n_(CN.bind(null,d,c,kr,Iu,bp,s,Qr,es,fl,oi,x,"Throttled",-0,0),g);break e}CN(d,c,kr,Iu,bp,s,Qr,es,fl,oi,x,null,-0,0)}}break}while(!0);Qn(i)}function CN(i,s,c,d,g,x,A,D,q,Z,oe,me,te,ie){if(i.timeoutHandle=-1,me=s.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:la},xN(s,x,me);var je=(x&62914560)===x?Ru-Me():(x&4194048)===x?_N-Me():0;if(je=$k(me,je),je!==null){Na=x,i.cancelPendingCommit=je(PN.bind(null,i,s,x,c,d,g,A,D,q,oe,me,null,te,ie)),fi(i,x,A,!Z);return}}PN(i,s,x,c,d,g,A,D,q)}function nk(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],x=g.getSnapshot;g=g.value;try{if(!Br(x(),g))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fi(i,s,c,d){s&=~xp,s&=~es,i.suspendedLanes|=s,i.pingedLanes&=~s,d&&(i.warmLanes|=s),d=i.expirationTimes;for(var g=s;0<g;){var x=31-br(g),A=1<<x;d[x]=-1,g&=~A}c!==0&&Ri(i,c,s)}function Bu(){return(Je&6)===0?(Po(0),!1):!0}function wp(){if(Ue!==null){if(et===0)var i=Ue.return;else i=Ue,da=Qi=null,Bh(i),al=null,go=0,i=Ue;for(;i!==null;)aN(i.alternate,i),i=i.return;Ue=null}}function hl(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,_k(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Na=0,wp(),ft=i,Ue=c=ca(i.current,null),Fe=s,et=0,Gr=null,oi=!1,dl=qi(i,s),yp=!1,fl=Qr=xp=es=ci=Ct=0,kr=To=null,bp=!1,(s&8)!==0&&(s|=s&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=s;0<d;){var g=31-br(d),x=1<<g;s|=i[g],d&=~x}return ja=s,lu(),c}function EN(i,s){Le=null,P.H=So,s===nl||s===pu?(s=G0(),et=3):s===Eh?(s=G0(),et=4):et=s===rp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Gr=s,Ue===null&&(Ct=1,Ou(i,an(s,i.current)))}function ON(){var i=Ur.current;return i===null?!0:(Fe&4194048)===Fe?cn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?i===cn:!1}function zN(){var i=P.H;return P.H=So,i===null?So:i}function DN(){var i=P.A;return P.A=tk,i}function $u(){Ct=4,oi||(Fe&4194048)!==Fe&&Ur.current!==null||(dl=!0),(ci&134217727)===0&&(es&134217727)===0||ft===null||fi(ft,Fe,Qr,!1)}function Sp(i,s,c){var d=Je;Je|=2;var g=zN(),x=DN();(ft!==i||Fe!==s)&&(Iu=null,hl(i,s)),s=!1;var A=Ct;e:do try{if(et!==0&&Ue!==null){var D=Ue,q=Gr;switch(et){case 8:wp(),A=6;break e;case 3:case 2:case 9:case 6:Ur.current===null&&(s=!0);var Z=et;if(et=0,Gr=null,pl(i,D,q,Z),c&&dl){A=0;break e}break;default:Z=et,et=0,Gr=null,pl(i,D,q,Z)}}ak(),A=Ct;break}catch(oe){EN(i,oe)}while(!0);return s&&i.shellSuspendCounter++,da=Qi=null,Je=d,P.H=g,P.A=x,Ue===null&&(ft=null,Fe=0,lu()),A}function ak(){for(;Ue!==null;)MN(Ue)}function ik(i,s){var c=Je;Je|=2;var d=zN(),g=DN();ft!==i||Fe!==s?(Iu=null,Lu=Me()+500,hl(i,s)):dl=qi(i,s);e:do try{if(et!==0&&Ue!==null){s=Ue;var x=Gr;t:switch(et){case 1:et=0,Gr=null,pl(i,s,x,1);break;case 2:case 9:if(U0(x)){et=0,Gr=null,TN(s);break}s=function(){et!==2&&et!==9||ft!==i||(et=7),Qn(i)},x.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:U0(x)?(et=0,Gr=null,TN(s)):(et=0,Gr=null,pl(i,s,x,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var D=Ue;if(A?y_(A):D.stateNode.complete){et=0,Gr=null;var q=D.sibling;if(q!==null)Ue=q;else{var Z=D.return;Z!==null?(Ue=Z,Uu(Z)):Ue=null}break t}}et=0,Gr=null,pl(i,s,x,5);break;case 6:et=0,Gr=null,pl(i,s,x,6);break;case 8:wp(),Ct=6;break e;default:throw Error(n(462))}}sk();break}catch(oe){EN(i,oe)}while(!0);return da=Qi=null,P.H=d,P.A=g,Je=c,Ue!==null?0:(ft=null,Fe=0,lu(),Ct)}function sk(){for(;Ue!==null&&!se();)MN(Ue)}function MN(i){var s=rN(i.alternate,i,ja);i.memoizedProps=i.pendingProps,s===null?Uu(i):Ue=s}function TN(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=Xj(c,s,s.pendingProps,s.type,void 0,Fe);break;case 11:s=Xj(c,s,s.pendingProps,s.type.render,s.ref,Fe);break;case 5:Bh(s);default:aN(c,s),s=Ue=D0(s,ja),s=rN(c,s,ja)}i.memoizedProps=i.pendingProps,s===null?Uu(i):Ue=s}function pl(i,s,c,d){da=Qi=null,Bh(s),al=null,go=0;var g=s.return;try{if(YT(i,g,s,c,Fe)){Ct=1,Ou(i,an(c,i.current)),Ue=null;return}}catch(x){if(g!==null)throw Ue=g,x;Ct=1,Ou(i,an(c,i.current)),Ue=null;return}s.flags&32768?(Ye||d===1?i=!0:dl||(Fe&536870912)!==0?i=!1:(oi=i=!0,(d===2||d===9||d===3||d===6)&&(d=Ur.current,d!==null&&d.tag===13&&(d.flags|=16384))),kN(s,i)):Uu(s)}function Uu(i){var s=i;do{if((s.flags&32768)!==0){kN(s,oi);return}i=s.return;var c=WT(s.alternate,s,ja);if(c!==null){Ue=c;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=i}while(s!==null);Ct===0&&(Ct=5)}function kN(i,s){do{var c=ZT(i.alternate,i);if(c!==null){c.flags&=32767,Ue=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){Ue=i;return}Ue=i=c}while(i!==null);Ct=6,Ue=null}function PN(i,s,c,d,g,x,A,D,q){i.cancelPendingCommit=null;do Hu();while(Qt!==0);if((Je&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(x=s.lanes|s.childLanes,x|=mh,eo(i,c,x,A,D,q),i===ft&&(Ue=ft=null,Fe=0),ml=s,di=i,Na=c,jp=x,Np=g,wN=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,uk(In,function(){return BN(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,g=J.p,J.p=2,A=Je,Je|=4;try{JT(i,s,c)}finally{Je=A,J.p=g,P.T=d}}Qt=1,qN(),RN(),LN()}}function qN(){if(Qt===1){Qt=0;var i=di,s=ml,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=J.p;J.p=2;var g=Je;Je|=4;try{vN(s,i);var x=Rp,A=N0(i.containerInfo),D=x.focusedElem,q=x.selectionRange;if(A!==D&&D&&D.ownerDocument&&j0(D.ownerDocument.documentElement,D)){if(q!==null&&oh(D)){var Z=q.start,oe=q.end;if(oe===void 0&&(oe=Z),"selectionStart"in D)D.selectionStart=Z,D.selectionEnd=Math.min(oe,D.value.length);else{var me=D.ownerDocument||document,te=me&&me.defaultView||window;if(te.getSelection){var ie=te.getSelection(),je=D.textContent.length,Te=Math.min(q.start,je),st=q.end===void 0?Te:Math.min(q.end,je);!ie.extend&&Te>st&&(A=st,st=Te,Te=A);var V=b0(D,Te),U=b0(D,st);if(V&&U&&(ie.rangeCount!==1||ie.anchorNode!==V.node||ie.anchorOffset!==V.offset||ie.focusNode!==U.node||ie.focusOffset!==U.offset)){var W=me.createRange();W.setStart(V.node,V.offset),ie.removeAllRanges(),Te>st?(ie.addRange(W),ie.extend(U.node,U.offset)):(W.setEnd(U.node,U.offset),ie.addRange(W))}}}}for(me=[],ie=D;ie=ie.parentNode;)ie.nodeType===1&&me.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<me.length;D++){var de=me[D];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}td=!!qp,Rp=qp=null}finally{Je=g,J.p=d,P.T=c}}i.current=s,Qt=2}}function RN(){if(Qt===2){Qt=0;var i=di,s=ml,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=J.p;J.p=2;var g=Je;Je|=4;try{dN(i,s.alternate,s)}finally{Je=g,J.p=d,P.T=c}}Qt=3}}function LN(){if(Qt===4||Qt===3){Qt=0,we();var i=di,s=ml,c=Na,d=wN;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qt=5:(Qt=0,ml=di=null,IN(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ui=null),Hm(c),s=s.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(pr,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=P.T,g=J.p,J.p=2,P.T=null;try{for(var x=i.onRecoverableError,A=0;A<d.length;A++){var D=d[A];x(D.value,{componentStack:D.stack})}}finally{P.T=s,J.p=g}}(Na&3)!==0&&Hu(),Qn(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===_p?ko++:(ko=0,_p=i):ko=0,Po(0)}}function IN(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,po(s)))}function Hu(){return qN(),RN(),LN(),BN()}function BN(){if(Qt!==5)return!1;var i=di,s=jp;jp=0;var c=Hm(Na),d=P.T,g=J.p;try{J.p=32>c?32:c,P.T=null,c=Np,Np=null;var x=di,A=Na;if(Qt=0,ml=di=null,Na=0,(Je&6)!==0)throw Error(n(331));var D=Je;if(Je|=4,jN(x.current),yN(x,x.current,A,c),Je=D,Po(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(pr,x)}catch{}return!0}finally{J.p=g,P.T=d,IN(i,s)}}function $N(i,s,c){s=an(c,s),s=tp(i.stateNode,s,2),i=ai(i,s,2),i!==null&&(vr(i,2),Qn(i))}function tt(i,s,c){if(i.tag===3)$N(i,i,c);else for(;s!==null;){if(s.tag===3){$N(s,i,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ui===null||!ui.has(d))){i=an(c,i),c=Uj(2),d=ai(s,c,2),d!==null&&(Hj(c,d,s,i),vr(d,2),Qn(d));break}}s=s.return}}function Ap(i,s,c){var d=i.pingCache;if(d===null){d=i.pingCache=new rk;var g=new Set;d.set(s,g)}else g=d.get(s),g===void 0&&(g=new Set,d.set(s,g));g.has(c)||(yp=!0,g.add(c),i=lk.bind(null,i,s,c),s.then(i,i))}function lk(i,s,c){var d=i.pingCache;d!==null&&d.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,ft===i&&(Fe&c)===c&&(Ct===4||Ct===3&&(Fe&62914560)===Fe&&300>Me()-Ru?(Je&2)===0&&hl(i,0):xp|=c,fl===Fe&&(fl=0)),Qn(i)}function UN(i,s){s===0&&(s=ze()),i=Ui(i,s),i!==null&&(vr(i,s),Qn(i))}function ok(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),UN(i,c)}function ck(i,s){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(s),UN(i,c)}function uk(i,s){return Jr(i,s)}var Gu=null,vl=null,Cp=!1,Qu=!1,Ep=!1,mi=0;function Qn(i){i!==vl&&i.next===null&&(vl===null?Gu=vl=i:vl=vl.next=i),Qu=!0,Cp||(Cp=!0,fk())}function Po(i,s){if(!Ep&&Qu){Ep=!0;do for(var c=!1,d=Gu;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var x=0;else{var A=d.suspendedLanes,D=d.pingedLanes;x=(1<<31-br(42|i)+1)-1,x&=g&~(A&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,FN(d,x))}else x=Fe,x=$n(d,d===ft?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||qi(d,x)||(c=!0,FN(d,x));d=d.next}while(c);Ep=!1}}function dk(){HN()}function HN(){Qu=Cp=!1;var i=0;mi!==0&&Nk()&&(i=mi);for(var s=Me(),c=null,d=Gu;d!==null;){var g=d.next,x=GN(d,s);x===0?(d.next=null,c===null?Gu=g:c.next=g,g===null&&(vl=c)):(c=d,(i!==0||(x&3)!==0)&&(Qu=!0)),d=g}Qt!==0&&Qt!==5||Po(i),mi!==0&&(mi=0)}function GN(i,s){for(var c=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var A=31-br(x),D=1<<A,q=g[A];q===-1?((D&c)===0||(D&d)!==0)&&(g[A]=K(D,s)):q<=s&&(i.expiredLanes|=D),x&=~D}if(s=ft,c=Fe,c=$n(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===s&&(et===2||et===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&aa(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||qi(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(d!==null&&aa(d),Hm(c)){case 2:case 8:c=hr;break;case 32:c=In;break;case 268435456:c=en;break;default:c=In}return d=QN.bind(null,i),c=Jr(c,d),i.callbackPriority=s,i.callbackNode=c,s}return d!==null&&d!==null&&aa(d),i.callbackPriority=2,i.callbackNode=null,2}function QN(i,s){if(Qt!==0&&Qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Hu()&&i.callbackNode!==c)return null;var d=Fe;return d=$n(i,i===ft?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(AN(i,d,s),GN(i,Me()),i.callbackNode!=null&&i.callbackNode===c?QN.bind(null,i):null)}function FN(i,s){if(Hu())return null;AN(i,s,!0)}function fk(){wk(function(){(Je&6)!==0?Jr(bt,dk):HN()})}function Op(){if(mi===0){var i=tl;i===0&&(i=ks,ks<<=1,(ks&261888)===0&&(ks=256)),mi=i}return mi}function VN(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Jc(""+i)}function YN(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function mk(i,s,c,d,g){if(s==="submit"&&c&&c.stateNode===g){var x=VN((g[Or]||null).action),A=d.submitter;A&&(s=(s=A[Or]||null)?VN(s.formAction):A.getAttribute("formAction"),s!==null&&(x=s,A=null));var D=new nu("action","action",null,d,g);i.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(mi!==0){var q=A?YN(g,A):new FormData(g);Kh(c,{pending:!0,data:q,method:g.method,action:x},null,q)}}else typeof x=="function"&&(D.preventDefault(),q=A?YN(g,A):new FormData(g),Kh(c,{pending:!0,data:q,method:g.method,action:x},x,q))},currentTarget:g}]})}}for(var zp=0;zp<fh.length;zp++){var Dp=fh[zp],hk=Dp.toLowerCase(),pk=Dp[0].toUpperCase()+Dp.slice(1);An(hk,"on"+pk)}An(S0,"onAnimationEnd"),An(A0,"onAnimationIteration"),An(C0,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(DT,"onTransitionRun"),An(MT,"onTransitionStart"),An(TT,"onTransitionCancel"),An(E0,"onTransitionEnd"),$s("onMouseEnter",["mouseout","mouseover"]),$s("onMouseLeave",["mouseout","mouseover"]),$s("onPointerEnter",["pointerout","pointerover"]),$s("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function KN(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],g=d.event;d=d.listeners;e:{var x=void 0;if(s)for(var A=d.length-1;0<=A;A--){var D=d[A],q=D.instance,Z=D.currentTarget;if(D=D.listener,q!==x&&g.isPropagationStopped())break e;x=D,g.currentTarget=Z;try{x(g)}catch(oe){su(oe)}g.currentTarget=null,x=q}else for(A=0;A<d.length;A++){if(D=d[A],q=D.instance,Z=D.currentTarget,D=D.listener,q!==x&&g.isPropagationStopped())break e;x=D,g.currentTarget=Z;try{x(g)}catch(oe){su(oe)}g.currentTarget=null,x=q}}}}function He(i,s){var c=s[Gm];c===void 0&&(c=s[Gm]=new Set);var d=i+"__bubble";c.has(d)||(XN(s,i,2,!1),c.add(d))}function Mp(i,s,c){var d=0;s&&(d|=4),XN(c,i,d,s)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Tp(i){if(!i[Fu]){i[Fu]=!0,Hb.forEach(function(c){c!=="selectionchange"&&(vk.has(c)||Mp(c,!1,i),Mp(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Fu]||(s[Fu]=!0,Mp("selectionchange",!1,s))}}function XN(i,s,c,d){switch(S_(s)){case 2:var g=Gk;break;case 8:g=Qk;break;default:g=Yp}c=g.bind(null,s,c,i),g=void 0,!Jm||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(s,c,{capture:!0,passive:g}):i.addEventListener(s,c,!0):g!==void 0?i.addEventListener(s,c,{passive:g}):i.addEventListener(s,c,!1)}function kp(i,s,c,d,g){var x=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var D=d.stateNode.containerInfo;if(D===g)break;if(A===4)for(A=d.return;A!==null;){var q=A.tag;if((q===3||q===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;D!==null;){if(A=Ls(D),A===null)return;if(q=A.tag,q===5||q===6||q===26||q===27){d=x=A;continue e}D=D.parentNode}}d=d.return}t0(function(){var Z=x,oe=Wm(c),me=[];e:{var te=O0.get(i);if(te!==void 0){var ie=nu,je=i;switch(i){case"keypress":if(tu(c)===0)break e;case"keydown":case"keyup":ie=cT;break;case"focusin":je="focus",ie=nh;break;case"focusout":je="blur",ie=nh;break;case"beforeblur":case"afterblur":ie=nh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=a0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=WM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=fT;break;case S0:case A0:case C0:ie=eT;break;case E0:ie=hT;break;case"scroll":case"scrollend":ie=KM;break;case"wheel":ie=vT;break;case"copy":case"cut":case"paste":ie=rT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=s0;break;case"toggle":case"beforetoggle":ie=yT}var Te=(s&4)!==0,st=!Te&&(i==="scroll"||i==="scrollend"),V=Te?te!==null?te+"Capture":null:te;Te=[];for(var U=Z,W;U!==null;){var de=U;if(W=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||W===null||V===null||(de=no(U,V),de!=null&&Te.push(Ro(U,de,W))),st)break;U=U.return}0<Te.length&&(te=new ie(te,je,null,c,oe),me.push({event:te,listeners:Te}))}}if((s&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ie=i==="mouseout"||i==="pointerout",te&&c!==Xm&&(je=c.relatedTarget||c.fromElement)&&(Ls(je)||je[Rs]))break e;if((ie||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(je=c.relatedTarget||c.toElement,ie=Z,je=je?Ls(je):null,je!==null&&(st=o(je),Te=je.tag,je!==st||Te!==5&&Te!==27&&Te!==6)&&(je=null)):(ie=null,je=Z),ie!==je)){if(Te=a0,de="onMouseLeave",V="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Te=s0,de="onPointerLeave",V="onPointerEnter",U="pointer"),st=ie==null?te:ro(ie),W=je==null?te:ro(je),te=new Te(de,U+"leave",ie,c,oe),te.target=st,te.relatedTarget=W,de=null,Ls(oe)===Z&&(Te=new Te(V,U+"enter",je,c,oe),Te.target=W,Te.relatedTarget=st,de=Te),st=de,ie&&je)t:{for(Te=gk,V=ie,U=je,W=0,de=V;de;de=Te(de))W++;de=0;for(var Ce=U;Ce;Ce=Te(Ce))de++;for(;0<W-de;)V=Te(V),W--;for(;0<de-W;)U=Te(U),de--;for(;W--;){if(V===U||U!==null&&V===U.alternate){Te=V;break t}V=Te(V),U=Te(U)}Te=null}else Te=null;ie!==null&&WN(me,te,ie,Te,!1),je!==null&&st!==null&&WN(me,st,je,Te,!0)}}e:{if(te=Z?ro(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var Xe=h0;else if(f0(te))if(p0)Xe=ET;else{Xe=AT;var _e=ST}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Km(Z.elementType)&&(Xe=h0):Xe=CT;if(Xe&&(Xe=Xe(i,Z))){m0(me,Xe,c,oe);break e}_e&&_e(i,te,Z),i==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Ym(te,"number",te.value)}switch(_e=Z?ro(Z):window,i){case"focusin":(f0(_e)||_e.contentEditable==="true")&&(Vs=_e,ch=Z,fo=null);break;case"focusout":fo=ch=Vs=null;break;case"mousedown":uh=!0;break;case"contextmenu":case"mouseup":case"dragend":uh=!1,_0(me,c,oe);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":_0(me,c,oe)}var Be;if(ih)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Fs?u0(i,c)&&(Ve="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(l0&&c.locale!=="ko"&&(Fs||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Fs&&(Be=r0()):(Wa=oe,eh="value"in Wa?Wa.value:Wa.textContent,Fs=!0)),_e=Vu(Z,Ve),0<_e.length&&(Ve=new i0(Ve,i,null,c,oe),me.push({event:Ve,listeners:_e}),Be?Ve.data=Be:(Be=d0(c),Be!==null&&(Ve.data=Be)))),(Be=bT?jT(i,c):NT(i,c))&&(Ve=Vu(Z,"onBeforeInput"),0<Ve.length&&(_e=new i0("onBeforeInput","beforeinput",null,c,oe),me.push({event:_e,listeners:Ve}),_e.data=Be)),mk(me,i,Z,c,oe)}KN(me,s)})}function Ro(i,s,c){return{instance:i,listener:s,currentTarget:c}}function Vu(i,s){for(var c=s+"Capture",d=[];i!==null;){var g=i,x=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||x===null||(g=no(i,c),g!=null&&d.unshift(Ro(i,g,x)),g=no(i,s),g!=null&&d.push(Ro(i,g,x))),i.tag===3)return d;i=i.return}return[]}function gk(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function WN(i,s,c,d,g){for(var x=s._reactName,A=[];c!==null&&c!==d;){var D=c,q=D.alternate,Z=D.stateNode;if(D=D.tag,q!==null&&q===d)break;D!==5&&D!==26&&D!==27||Z===null||(q=Z,g?(Z=no(c,x),Z!=null&&A.unshift(Ro(c,Z,q))):g||(Z=no(c,x),Z!=null&&A.push(Ro(c,Z,q)))),c=c.return}A.length!==0&&i.push({event:s,listeners:A})}var yk=/\r\n?/g,xk=/\u0000|\uFFFD/g;function ZN(i){return(typeof i=="string"?i:""+i).replace(yk,`
`).replace(xk,"")}function JN(i,s){return s=ZN(s),ZN(i)===s}function it(i,s,c,d,g,x){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||Hs(i,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&Hs(i,""+d);break;case"className":Wc(i,"class",d);break;case"tabIndex":Wc(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Wc(i,c,d);break;case"style":Jb(i,d,x);break;case"data":if(s!=="object"){Wc(i,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Jc(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(s!=="input"&&it(i,s,"name",g.name,g,null),it(i,s,"formEncType",g.formEncType,g,null),it(i,s,"formMethod",g.formMethod,g,null),it(i,s,"formTarget",g.formTarget,g,null)):(it(i,s,"encType",g.encType,g,null),it(i,s,"method",g.method,g,null),it(i,s,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Jc(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=la);break;case"onScroll":d!=null&&He("scroll",i);break;case"onScrollEnd":d!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=Jc(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":He("beforetoggle",i),He("toggle",i),Xc(i,"popover",d);break;case"xlinkActuate":sa(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":sa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":sa(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":sa(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":sa(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":sa(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":sa(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":sa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":sa(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Xc(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=VM.get(c)||c,Xc(i,c,d))}}function Pp(i,s,c,d,g,x){switch(c){case"style":Jb(i,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof d=="string"?Hs(i,d):(typeof d=="number"||typeof d=="bigint")&&Hs(i,""+d);break;case"onScroll":d!=null&&He("scroll",i);break;case"onScrollEnd":d!=null&&He("scrollend",i);break;case"onClick":d!=null&&(i.onclick=la);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gb.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),s=c.slice(2,g?c.length-7:void 0),x=i[Or]||null,x=x!=null?x[c]:null,typeof x=="function"&&i.removeEventListener(s,x,g),typeof d=="function")){typeof x!="function"&&x!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,d,g);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):Xc(i,c,d)}}}function cr(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var d=!1,g=!1,x;for(x in c)if(c.hasOwnProperty(x)){var A=c[x];if(A!=null)switch(x){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:it(i,s,x,A,c,null)}}g&&it(i,s,"srcSet",c.srcSet,c,null),d&&it(i,s,"src",c.src,c,null);return;case"input":He("invalid",i);var D=x=A=g=null,q=null,Z=null;for(d in c)if(c.hasOwnProperty(d)){var oe=c[d];if(oe!=null)switch(d){case"name":g=oe;break;case"type":A=oe;break;case"checked":q=oe;break;case"defaultChecked":Z=oe;break;case"value":x=oe;break;case"defaultValue":D=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,s));break;default:it(i,s,d,oe,c,null)}}Kb(i,x,D,q,Z,A,g,!1);return;case"select":He("invalid",i),d=A=x=null;for(g in c)if(c.hasOwnProperty(g)&&(D=c[g],D!=null))switch(g){case"value":x=D;break;case"defaultValue":A=D;break;case"multiple":d=D;default:it(i,s,g,D,c,null)}s=x,c=A,i.multiple=!!d,s!=null?Us(i,!!d,s,!1):c!=null&&Us(i,!!d,c,!0);return;case"textarea":He("invalid",i),x=g=d=null;for(A in c)if(c.hasOwnProperty(A)&&(D=c[A],D!=null))switch(A){case"value":d=D;break;case"defaultValue":g=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:it(i,s,A,D,c,null)}Wb(i,d,g,x);return;case"option":for(q in c)c.hasOwnProperty(q)&&(d=c[q],d!=null)&&(q==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":it(i,s,q,d,c,null));return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(d=0;d<qo.length;d++)He(qo[d],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in c)if(c.hasOwnProperty(Z)&&(d=c[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:it(i,s,Z,d,c,null)}return;default:if(Km(s)){for(oe in c)c.hasOwnProperty(oe)&&(d=c[oe],d!==void 0&&Pp(i,s,oe,d,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(d=c[D],d!=null&&it(i,s,D,d,c,null))}function bk(i,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,x=null,A=null,D=null,q=null,Z=null,oe=null;for(ie in c){var me=c[ie];if(c.hasOwnProperty(ie)&&me!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":q=me;default:d.hasOwnProperty(ie)||it(i,s,ie,null,d,me)}}for(var te in d){var ie=d[te];if(me=c[te],d.hasOwnProperty(te)&&(ie!=null||me!=null))switch(te){case"type":x=ie;break;case"name":g=ie;break;case"checked":Z=ie;break;case"defaultChecked":oe=ie;break;case"value":A=ie;break;case"defaultValue":D=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(137,s));break;default:ie!==me&&it(i,s,te,ie,d,me)}}Vm(i,A,D,q,Z,oe,x,g);return;case"select":ie=A=D=te=null;for(x in c)if(q=c[x],c.hasOwnProperty(x)&&q!=null)switch(x){case"value":break;case"multiple":ie=q;default:d.hasOwnProperty(x)||it(i,s,x,null,d,q)}for(g in d)if(x=d[g],q=c[g],d.hasOwnProperty(g)&&(x!=null||q!=null))switch(g){case"value":te=x;break;case"defaultValue":D=x;break;case"multiple":A=x;default:x!==q&&it(i,s,g,x,d,q)}s=D,c=A,d=ie,te!=null?Us(i,!!c,te,!1):!!d!=!!c&&(s!=null?Us(i,!!c,s,!0):Us(i,!!c,c?[]:"",!1));return;case"textarea":ie=te=null;for(D in c)if(g=c[D],c.hasOwnProperty(D)&&g!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:it(i,s,D,null,d,g)}for(A in d)if(g=d[A],x=c[A],d.hasOwnProperty(A)&&(g!=null||x!=null))switch(A){case"value":te=g;break;case"defaultValue":ie=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==x&&it(i,s,A,g,d,x)}Xb(i,te,ie);return;case"option":for(var je in c)te=c[je],c.hasOwnProperty(je)&&te!=null&&!d.hasOwnProperty(je)&&(je==="selected"?i.selected=!1:it(i,s,je,null,d,te));for(q in d)te=d[q],ie=c[q],d.hasOwnProperty(q)&&te!==ie&&(te!=null||ie!=null)&&(q==="selected"?i.selected=te&&typeof te!="function"&&typeof te!="symbol":it(i,s,q,te,d,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in c)te=c[Te],c.hasOwnProperty(Te)&&te!=null&&!d.hasOwnProperty(Te)&&it(i,s,Te,null,d,te);for(Z in d)if(te=d[Z],ie=c[Z],d.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,s));break;default:it(i,s,Z,te,d,ie)}return;default:if(Km(s)){for(var st in c)te=c[st],c.hasOwnProperty(st)&&te!==void 0&&!d.hasOwnProperty(st)&&Pp(i,s,st,void 0,d,te);for(oe in d)te=d[oe],ie=c[oe],!d.hasOwnProperty(oe)||te===ie||te===void 0&&ie===void 0||Pp(i,s,oe,te,d,ie);return}}for(var V in c)te=c[V],c.hasOwnProperty(V)&&te!=null&&!d.hasOwnProperty(V)&&it(i,s,V,null,d,te);for(me in d)te=d[me],ie=c[me],!d.hasOwnProperty(me)||te===ie||te==null&&ie==null||it(i,s,me,te,d,ie)}function e_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],x=g.transferSize,A=g.initiatorType,D=g.duration;if(x&&D&&e_(A)){for(A=0,D=g.responseEnd,d+=1;d<c.length;d++){var q=c[d],Z=q.startTime;if(Z>D)break;var oe=q.transferSize,me=q.initiatorType;oe&&e_(me)&&(q=q.responseEnd,A+=oe*(q<D?1:(D-Z)/(q-Z)))}if(--d,s+=8*(x+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var qp=null,Rp=null;function Yu(i){return i.nodeType===9?i:i.ownerDocument}function t_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Lp(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ip=null;function Nk(){var i=window.event;return i&&i.type==="popstate"?i===Ip?!1:(Ip=i,!0):(Ip=null,!1)}var n_=typeof setTimeout=="function"?setTimeout:void 0,_k=typeof clearTimeout=="function"?clearTimeout:void 0,a_=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof a_<"u"?function(i){return a_.resolve(null).then(i).catch(Sk)}:n_;function Sk(i){setTimeout(function(){throw i})}function hi(i){return i==="head"}function i_(i,s){var c=s,d=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(g),bl(s);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Lo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Lo(c);for(var x=c.firstChild;x;){var A=x.nextSibling,D=x.nodeName;x[to]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=A}}else c==="body"&&Lo(i.ownerDocument.body);c=g}while(c);bl(s)}function s_(i,s){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function Bp(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Bp(c),Qm(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Ak(i,s,c,d){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[to])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var x=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=un(i.nextSibling),i===null)break}return null}function Ck(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=un(i.nextSibling),i===null))return null;return i}function l_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=un(i.nextSibling),i===null))return null;return i}function $p(i){return i.data==="$?"||i.data==="$~"}function Up(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Ek(i,s){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||c.readyState!=="loading")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function un(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Hp=null;function o_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(s===0)return un(i.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}i=i.nextSibling}return null}function c_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return i;s--}else c!=="/$"&&c!=="/&"||s++}i=i.previousSibling}return null}function u_(i,s,c){switch(s=Yu(c),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Lo(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Qm(i)}var dn=new Map,d_=new Set;function Ku(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var _a=J.d;J.d={f:Ok,r:zk,D:Dk,C:Mk,L:Tk,m:kk,X:qk,S:Pk,M:Rk};function Ok(){var i=_a.f(),s=Bu();return i||s}function zk(i){var s=Is(i);s!==null&&s.tag===5&&s.type==="form"?Ej(s):_a.r(i)}var gl=typeof document>"u"?null:document;function f_(i,s,c){var d=gl;if(d&&typeof s=="string"&&s){var g=rn(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),d_.has(g)||(d_.add(g),i={rel:i,crossOrigin:c,href:s},d.querySelector(g)===null&&(s=d.createElement("link"),cr(s,"link",i),Kt(s),d.head.appendChild(s)))}}function Dk(i){_a.D(i),f_("dns-prefetch",i,null)}function Mk(i,s){_a.C(i,s),f_("preconnect",i,s)}function Tk(i,s,c){_a.L(i,s,c);var d=gl;if(d&&i&&s){var g='link[rel="preload"][as="'+rn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+rn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+rn(c.imageSizes)+'"]')):g+='[href="'+rn(i)+'"]';var x=g;switch(s){case"style":x=yl(i);break;case"script":x=xl(i)}dn.has(x)||(i=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),dn.set(x,i),d.querySelector(g)!==null||s==="style"&&d.querySelector(Io(x))||s==="script"&&d.querySelector(Bo(x))||(s=d.createElement("link"),cr(s,"link",i),Kt(s),d.head.appendChild(s)))}}function kk(i,s){_a.m(i,s);var c=gl;if(c&&i){var d=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+rn(d)+'"][href="'+rn(i)+'"]',x=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=xl(i)}if(!dn.has(x)&&(i=v({rel:"modulepreload",href:i},s),dn.set(x,i),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Bo(x)))return}d=c.createElement("link"),cr(d,"link",i),Kt(d),c.head.appendChild(d)}}}function Pk(i,s,c){_a.S(i,s,c);var d=gl;if(d&&i){var g=Bs(d).hoistableStyles,x=yl(i);s=s||"default";var A=g.get(x);if(!A){var D={loading:0,preload:null};if(A=d.querySelector(Io(x)))D.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},c),(c=dn.get(x))&&Gp(i,c);var q=A=d.createElement("link");Kt(q),cr(q,"link",i),q._p=new Promise(function(Z,oe){q.onload=Z,q.onerror=oe}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Xu(A,s,d)}A={type:"stylesheet",instance:A,count:1,state:D},g.set(x,A)}}}function qk(i,s){_a.X(i,s);var c=gl;if(c&&i){var d=Bs(c).hoistableScripts,g=xl(i),x=d.get(g);x||(x=c.querySelector(Bo(g)),x||(i=v({src:i,async:!0},s),(s=dn.get(g))&&Qp(i,s),x=c.createElement("script"),Kt(x),cr(x,"link",i),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(g,x))}}function Rk(i,s){_a.M(i,s);var c=gl;if(c&&i){var d=Bs(c).hoistableScripts,g=xl(i),x=d.get(g);x||(x=c.querySelector(Bo(g)),x||(i=v({src:i,async:!0,type:"module"},s),(s=dn.get(g))&&Qp(i,s),x=c.createElement("script"),Kt(x),cr(x,"link",i),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(g,x))}}function m_(i,s,c,d){var g=(g=$.current)?Ku(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=yl(c.href),c=Bs(g).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=yl(c.href);var x=Bs(g).hoistableStyles,A=x.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,A),(x=g.querySelector(Io(i)))&&!x._p&&(A.instance=x,A.state.loading=5),dn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},dn.set(i,c),x||Lk(g,i,c,A.state))),s&&d===null)throw Error(n(528,""));return A}if(s&&d!==null)throw Error(n(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xl(c),c=Bs(g).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function yl(i){return'href="'+rn(i)+'"'}function Io(i){return'link[rel="stylesheet"]['+i+"]"}function h_(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function Lk(i,s,c,d){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=i.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),cr(s,"link",c),Kt(s),i.head.appendChild(s))}function xl(i){return'[src="'+rn(i)+'"]'}function Bo(i){return"script[async]"+i}function p_(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=i.querySelector('style[data-href~="'+rn(c.href)+'"]');if(d)return s.instance=d,Kt(d),d;var g=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Kt(d),cr(d,"style",g),Xu(d,c.precedence,i),s.instance=d;case"stylesheet":g=yl(c.href);var x=i.querySelector(Io(g));if(x)return s.state.loading|=4,s.instance=x,Kt(x),x;d=h_(c),(g=dn.get(g))&&Gp(d,g),x=(i.ownerDocument||i).createElement("link"),Kt(x);var A=x;return A._p=new Promise(function(D,q){A.onload=D,A.onerror=q}),cr(x,"link",d),s.state.loading|=4,Xu(x,c.precedence,i),s.instance=x;case"script":return x=xl(c.src),(g=i.querySelector(Bo(x)))?(s.instance=g,Kt(g),g):(d=c,(g=dn.get(x))&&(d=v({},c),Qp(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),Kt(g),cr(g,"link",d),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Xu(d,c.precedence,i));return s.instance}function Xu(i,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,x=g,A=0;A<d.length;A++){var D=d[A];if(D.dataset.precedence===s)x=D;else if(x!==g)break}x?x.parentNode.insertBefore(i,x.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function Gp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Qp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Wu=null;function v_(i,s,c){if(Wu===null){var d=new Map,g=Wu=new Map;g.set(c,d)}else g=Wu,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var x=c[g];if(!(x[to]||x[ir]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var A=x.getAttribute(s)||"";A=i+A;var D=d.get(A);D?D.push(x):d.set(A,[x])}}return d}function g_(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function Ik(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function y_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Bk(i,s,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=yl(d.href),x=s.querySelector(Io(g));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Zu.bind(i),s.then(i,i)),c.state.loading|=4,c.instance=x,Kt(x);return}x=s.ownerDocument||s,d=h_(d),(g=dn.get(g))&&Gp(d,g),x=x.createElement("link"),Kt(x);var A=x;A._p=new Promise(function(D,q){A.onload=D,A.onerror=q}),cr(x,"link",d),c.instance=x}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Zu.bind(i),s.addEventListener("load",c),s.addEventListener("error",c))}}var Fp=0;function $k(i,s){return i.stylesheets&&i.count===0&&ed(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&ed(i,i.stylesheets),i.unsuspend){var x=i.unsuspend;i.unsuspend=null,x()}},6e4+s);0<i.imgBytes&&Fp===0&&(Fp=62500*jk());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ed(i,i.stylesheets),i.unsuspend)){var x=i.unsuspend;i.unsuspend=null,x()}},(i.imgBytes>Fp?50:800)+s);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Zu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ed(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ju=null;function ed(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ju=new Map,s.forEach(Uk,i),Ju=null,Zu.call(i))}function Uk(i,s){if(!(s.state.loading&4)){var c=Ju.get(i);if(c)var d=c.get(null);else{c=new Map,Ju.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<g.length;x++){var A=g[x];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}g=s.instance,A=g.getAttribute("data-precedence"),x=c.get(A)||d,x===d&&c.set(null,g),c.set(A,g),this.count++,d=Zu.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),x?x.parentNode.insertBefore(g,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var $o={$$typeof:C,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Hk(i,s,c,d,g,x,A,D,q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dt(0),this.hiddenUpdates=dt(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=x,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function x_(i,s,c,d,g,x,A,D,q,Z,oe,me){return i=new Hk(i,s,c,A,q,Z,oe,me,D),s=1,x===!0&&(s|=24),x=$r(3,null,null,s),i.current=x,x.stateNode=i,s=Sh(),s.refCount++,i.pooledCache=s,s.refCount++,x.memoizedState={element:d,isDehydrated:c,cache:s},Oh(x),i}function b_(i){return i?(i=Xs,i):Xs}function j_(i,s,c,d,g,x){g=b_(g),d.context===null?d.context=g:d.pendingContext=g,d=ni(s),d.payload={element:c},x=x===void 0?null:x,x!==null&&(d.callback=x),c=ai(i,d,s),c!==null&&(Pr(c,i,s),xo(c,i,s))}function N_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function Vp(i,s){N_(i,s),(i=i.alternate)&&N_(i,s)}function __(i){if(i.tag===13||i.tag===31){var s=Ui(i,67108864);s!==null&&Pr(s,i,67108864),Vp(i,67108864)}}function w_(i){if(i.tag===13||i.tag===31){var s=Fr();s=Um(s);var c=Ui(i,s);c!==null&&Pr(c,i,s),Vp(i,s)}}var td=!0;function Gk(i,s,c,d){var g=P.T;P.T=null;var x=J.p;try{J.p=2,Yp(i,s,c,d)}finally{J.p=x,P.T=g}}function Qk(i,s,c,d){var g=P.T;P.T=null;var x=J.p;try{J.p=8,Yp(i,s,c,d)}finally{J.p=x,P.T=g}}function Yp(i,s,c,d){if(td){var g=Kp(d);if(g===null)kp(i,s,d,rd,c),A_(i,d);else if(Vk(g,i,s,c,d))d.stopPropagation();else if(A_(i,d),s&4&&-1<Fk.indexOf(i)){for(;g!==null;){var x=Is(g);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var A=ia(x.pendingLanes);if(A!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;A;){var q=1<<31-br(A);D.entanglements[1]|=q,A&=~q}Qn(x),(Je&6)===0&&(Lu=Me()+500,Po(0))}}break;case 31:case 13:D=Ui(x,2),D!==null&&Pr(D,x,2),Bu(),Vp(x,2)}if(x=Kp(d),x===null&&kp(i,s,d,rd,c),x===g)break;g=x}g!==null&&d.stopPropagation()}else kp(i,s,d,null,c)}}function Kp(i){return i=Wm(i),Xp(i)}var rd=null;function Xp(i){if(rd=null,i=Ls(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=u(s),i!==null)return i;i=null}else if(c===31){if(i=f(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return rd=i,null}function S_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Re()){case bt:return 2;case hr:return 8;case In:case Ts:return 32;case en:return 268435456;default:return 32}default:return 32}}var Wp=!1,pi=null,vi=null,gi=null,Uo=new Map,Ho=new Map,yi=[],Fk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A_(i,s){switch(i){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Uo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(s.pointerId)}}function Go(i,s,c,d,g,x){return i===null||i.nativeEvent!==x?(i={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:x,targetContainers:[g]},s!==null&&(s=Is(s),s!==null&&__(s)),i):(i.eventSystemFlags|=d,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function Vk(i,s,c,d,g){switch(s){case"focusin":return pi=Go(pi,i,s,c,d,g),!0;case"dragenter":return vi=Go(vi,i,s,c,d,g),!0;case"mouseover":return gi=Go(gi,i,s,c,d,g),!0;case"pointerover":var x=g.pointerId;return Uo.set(x,Go(Uo.get(x)||null,i,s,c,d,g)),!0;case"gotpointercapture":return x=g.pointerId,Ho.set(x,Go(Ho.get(x)||null,i,s,c,d,g)),!0}return!1}function C_(i){var s=Ls(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){i.blockedOn=s,$b(i.priority,function(){w_(c)});return}}else if(s===31){if(s=f(c),s!==null){i.blockedOn=s,$b(i.priority,function(){w_(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=Kp(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Xm=d,c.target.dispatchEvent(d),Xm=null}else return s=Is(c),s!==null&&__(s),i.blockedOn=c,!1;s.shift()}return!0}function E_(i,s,c){nd(i)&&c.delete(s)}function Yk(){Wp=!1,pi!==null&&nd(pi)&&(pi=null),vi!==null&&nd(vi)&&(vi=null),gi!==null&&nd(gi)&&(gi=null),Uo.forEach(E_),Ho.forEach(E_)}function ad(i,s){i.blockedOn===s&&(i.blockedOn=null,Wp||(Wp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yk)))}var id=null;function O_(i){id!==i&&(id=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){id===i&&(id=null);for(var s=0;s<i.length;s+=3){var c=i[s],d=i[s+1],g=i[s+2];if(typeof d!="function"){if(Xp(d||c)===null)continue;break}var x=Is(c);x!==null&&(i.splice(s,3),s-=3,Kh(x,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function bl(i){function s(q){return ad(q,i)}pi!==null&&ad(pi,i),vi!==null&&ad(vi,i),gi!==null&&ad(gi,i),Uo.forEach(s),Ho.forEach(s);for(var c=0;c<yi.length;c++){var d=yi[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<yi.length&&(c=yi[0],c.blockedOn===null);)C_(c),c.blockedOn===null&&yi.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],x=c[d+1],A=g[Or]||null;if(typeof x=="function")A||O_(c);else if(A){var D=null;if(x&&x.hasAttribute("formAction")){if(g=x,A=x[Or]||null)D=A.formAction;else if(Xp(g)!==null)continue}else D=A.action;typeof D=="function"?c[d+1]=D:(c.splice(d,3),d-=3),O_(c)}}}function z_(){function i(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Zp(i){this._internalRoot=i}sd.prototype.render=Zp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var c=s.current,d=Fr();j_(c,d,i,s,null,null)},sd.prototype.unmount=Zp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;j_(i.current,2,null,i,null,null),Bu(),s[Rs]=null}};function sd(i){this._internalRoot=i}sd.prototype.unstable_scheduleHydration=function(i){if(i){var s=Bb();i={blockedOn:null,target:i,priority:s};for(var c=0;c<yi.length&&s!==0&&s<yi[c].priority;c++);yi.splice(c,0,i),c===0&&C_(i)}};var D_=t.version;if(D_!=="19.2.4")throw Error(n(527,D_,"19.2.4"));J.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var Kk={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{pr=ld.inject(Kk),pt=ld}catch{}}return Fo.createRoot=function(i,s){if(!l(i))throw Error(n(299));var c=!1,d="",g=Lj,x=Ij,A=Bj;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=x_(i,1,!1,null,null,c,d,null,g,x,A,z_),i[Rs]=s.current,Tp(i),new Zp(s)},Fo.hydrateRoot=function(i,s,c){if(!l(i))throw Error(n(299));var d=!1,g="",x=Lj,A=Ij,D=Bj,q=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(q=c.formState)),s=x_(i,1,!0,s,c??null,d,g,q,x,A,D,z_),s.context=b_(null),c=s.current,d=Fr(),d=Um(d),g=ni(d),g.callback=null,ai(c,g,d),c=d,s.current.lanes=c,vr(s,c),Qn(s),i[Rs]=s.current,Tp(i),new sd(s)},Fo.version="19.2.4",Fo}var $_;function YP(){if($_)return nv.exports;$_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),nv.exports=VP(),nv.exports}var KP=YP();const XP=Ba(KP),WP={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},ex=nP(WP),od=aP(ex),pe=iP(ex,{localCache:sP({tabManager:oP()})}),Tn=lP(ex),U_={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},H_=e=>U_[e]||U_.default,s2=j.createContext(null),ZP=({children:e})=>{const[t,r]=j.useState(null),[n,l]=j.useState(!0),o=async y=>{try{const b=await mr(Ee(pe,"users",y));if(b.exists()){const _=b.data();return{uid:y,email:_.email,displayName:_.displayName,role:_.role,isPremium:_.isPremium||!1,subscriptionEnd:_.subscriptionEnd?.toDate()||null,photoURL:_.photoURL,createdAt:_.createdAt?.toDate()||new Date,lastLogin:_.lastLogin?.toDate()}}return null}catch(b){return console.error("Erreur lors de la rcupration des donnes utilisateur:",b),null}},u=async(y,b)=>{const _=Ee(pe,"users",y.uid);(await mr(_)).exists()?await xt(_,{lastLogin:ct()}):await Hf(_,{email:y.email,displayName:y.displayName||b?.displayName||"",role:b?.role||"eleve",isPremium:!1,photoURL:y.photoURL,createdAt:ct(),lastLogin:ct()})},f=async(y,b)=>{try{const _=await mP(od,y,b);await u(_.user)}catch(_){throw new Error(H_(_.code))}},m=async y=>{try{if(y.password!==y.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const b=await dP(od,y.email,y.password);await fP(b.user,{displayName:y.displayName}),await u(b.user,{displayName:y.displayName,role:y.role})}catch(b){throw b.message?b:new Error(H_(b.code))}},h=async()=>{try{await uP(od),r(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},p=async y=>{if(!t)throw new Error("Aucun utilisateur connect.");try{const b=Ee(pe,"users",t.uid);await xt(b,{...y,updatedAt:ct()}),r(_=>_?{..._,...y}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};j.useEffect(()=>{const y=cP(od,async b=>{if(b){const _=await o(b.uid);r(_)}else r(null);l(!1)});return()=>y()},[]);const v={currentUser:t,loading:n,login:f,register:m,logout:h,updateProfile:p};return a.jsx(s2.Provider,{value:v,children:n?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement..."})]}):e})},Ht=()=>{const e=j.useContext(s2);if(!e)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return e},tx=({children:e,allowedRoles:t,requirePremium:r=!1})=>{const{currentUser:n,loading:l}=Ht();return l?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Vrification des autorisations..."})]}):n?t&&!t.includes(n.role)?a.jsxs("div",{className:"error-container",children:[a.jsx("h2",{children:"Accs non autoris"}),a.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),a.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):r&&!n.isPremium?a.jsxs("div",{className:"error-container premium-required",children:[a.jsx("h2",{children:"Contenu Premium"}),a.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),a.jsxs("div",{className:"premium-cta",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",a.jsx("strong",{children:"20 000 FCFA/an"})]}),a.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):a.jsx(a.Fragment,{children:e}):a.jsxs("div",{className:"error-container",children:[a.jsx("h2",{children:"Accs refus"}),a.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),a.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},fn=({children:e})=>a.jsx(tx,{allowedRoles:["admin"],children:e}),JP=({children:e})=>a.jsx(tx,{allowedRoles:["admin","prof"],children:e}),eq=()=>{const{currentUser:e,logout:t,loading:r}=Ht(),n=Zr(),l=$f(),[o,u]=j.useState(!1),[f,m]=j.useState(!1),[h,p]=j.useState(!1),v=j.useRef(null),y=[{path:"/",label:"Accueil",icon:a.jsx(Fg,{size:18})},{path:"/disciplines",label:"Disciplines",icon:a.jsx(xn,{size:18})},{path:"/ebooks",label:"Bibliothque",icon:a.jsx(xn,{size:18})},{path:"/quiz",label:"Quiz",icon:a.jsx(Pl,{size:18}),requireAuth:!0,requirePremium:!0},{path:e?.role==="eleve"?"/eleve/dashboard":e?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:a.jsx(T_,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:a.jsx(hP,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:a.jsx(ms,{size:18}),requireAuth:!0,requireRole:["parent"]}];j.useEffect(()=>{const E=z=>{v.current&&!v.current.contains(z.target)&&m(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),j.useEffect(()=>{u(!1),m(!1)},[l.pathname]),j.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const b=async()=>{try{p(!0),await t(),m(!1),n("/")}catch(E){console.error("Erreur lors de la dconnexion:",E)}finally{p(!1)}},_=()=>{u(!o)},N=()=>{m(!f)},w=E=>!(E.requireAuth&&!e||E.requirePremium&&e&&!e.isPremium||E.requireRole&&e&&!E.requireRole.includes(e.role)),S=E=>E==="/"?l.pathname==="/":l.pathname.startsWith(E),O=E=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[E]||E,C=()=>e?e.displayName?e.displayName.split(" ").map(z=>z[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase():"?";return a.jsxs("header",{className:"header",children:[a.jsxs("div",{className:"header__container",children:[a.jsxs(Pe,{to:"/",className:"header__logo",children:[a.jsx(Pl,{className:"header__logo-icon",size:32}),a.jsxs("div",{className:"header__logo-text",children:[a.jsx("span",{className:"header__logo-name",children:"PedaClic"}),a.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),a.jsx("nav",{className:"header__nav header__nav--desktop",children:a.jsx("ul",{className:"header__nav-list",children:y.map(E=>w(E)&&a.jsx("li",{className:"header__nav-item",children:a.jsxs(Pe,{to:E.path,className:`header__nav-link ${S(E.path)?"header__nav-link--active":""}`,children:[E.icon,a.jsx("span",{children:E.label}),E.requirePremium&&a.jsx(ac,{size:14,className:"header__premium-badge"})]})},E.path))})}),a.jsxs("div",{className:"header__actions",children:[r?a.jsx("div",{className:"header__loading",children:a.jsx("div",{className:"header__spinner"})}):e?a.jsxs("div",{className:"header__user",ref:v,children:[e.isPremium&&a.jsxs("span",{className:"header__premium-tag",children:[a.jsx(ac,{size:14}),"Premium"]}),a.jsxs("button",{className:"header__user-button",onClick:N,"aria-expanded":f,"aria-haspopup":"true",children:[a.jsx("div",{className:"header__avatar",children:e.photoURL?a.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):a.jsx("span",{className:"header__avatar-initials",children:C()})}),a.jsx("span",{className:"header__user-name",children:e.displayName||e.email.split("@")[0]}),a.jsx(Bd,{size:16,className:`header__chevron ${f?"header__chevron--open":""}`})]}),f&&a.jsxs("div",{className:"header__dropdown",children:[a.jsxs("div",{className:"header__dropdown-header",children:[a.jsx("p",{className:"header__dropdown-email",children:e.email}),a.jsx("span",{className:`header__dropdown-role header__dropdown-role--${e.role}`,children:O(e.role)})]}),a.jsx("div",{className:"header__dropdown-divider"}),a.jsxs("nav",{className:"header__dropdown-nav",children:[a.jsxs(Pe,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[a.jsx(T_,{size:18}),a.jsx("span",{children:"Tableau de bord"})]}),e.role==="eleve"&&a.jsxs(Pe,{to:"/eleve/suivi",className:"header__dropdown-link",children:[a.jsx(ms,{size:18}),a.jsx("span",{children:"Mes points  amliorer"})]}),e.role==="parent"&&a.jsxs(Pe,{to:"/parent/dashboard",className:"header__dropdown-link",children:[a.jsx(ms,{size:18}),a.jsx("span",{children:"Espace Parent"})]}),a.jsxs(Pe,{to:"/profil",className:"header__dropdown-link",children:[a.jsx(pP,{size:18}),a.jsx("span",{children:"Mon profil"})]}),e.role==="admin"&&a.jsxs(Pe,{to:"/admin",className:"header__dropdown-link",children:[a.jsx(vP,{size:18}),a.jsx("span",{children:"Administration"})]}),!e.isPremium&&a.jsxs(Pe,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[a.jsx(ac,{size:18}),a.jsx("span",{children:"Passer Premium"})]})]}),a.jsx("div",{className:"header__dropdown-divider"}),a.jsxs("button",{className:"header__dropdown-logout",onClick:b,disabled:h,children:[a.jsx(k_,{size:18}),a.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]}):a.jsxs("div",{className:"header__auth-buttons",children:[a.jsx(Pe,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),a.jsx(Pe,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),a.jsx("button",{className:"header__mobile-toggle",onClick:_,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?a.jsx(Ai,{size:24}):a.jsx(gP,{size:24})})]})]}),a.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[a.jsx("div",{className:"header__mobile-overlay",onClick:()=>u(!1)}),a.jsxs("div",{className:"header__mobile-content",children:[a.jsx("nav",{className:"header__mobile-nav",children:a.jsx("ul",{className:"header__mobile-list",children:y.map(E=>w(E)&&a.jsx("li",{className:"header__mobile-item",children:a.jsxs(Pe,{to:E.path,className:`header__mobile-link ${S(E.path)?"header__mobile-link--active":""}`,children:[E.icon,a.jsx("span",{children:E.label}),E.requirePremium&&a.jsx(ac,{size:14,className:"header__premium-badge"})]})},E.path))})}),!e&&a.jsxs("div",{className:"header__mobile-auth",children:[a.jsx(Pe,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),a.jsx(Pe,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),e&&a.jsxs("div",{className:"header__mobile-user",children:[a.jsxs("div",{className:"header__mobile-user-info",children:[a.jsx("div",{className:"header__avatar header__avatar--large",children:e.photoURL?a.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):a.jsx("span",{className:"header__avatar-initials",children:C()})}),a.jsxs("div",{className:"header__mobile-user-details",children:[a.jsx("p",{className:"header__mobile-user-name",children:e.displayName||e.email.split("@")[0]}),a.jsx("p",{className:"header__mobile-user-email",children:e.email})]})]}),a.jsxs("button",{className:"header__mobile-logout",onClick:b,disabled:h,children:[a.jsx(k_,{size:18}),a.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},tq=()=>{const e=new Date().getFullYear(),t=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],r=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],n=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:a.jsx(_P,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:a.jsx(wP,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:a.jsx(SP,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:a.jsx(AP,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:a.jsx(CP,{size:20})}];return a.jsxs("footer",{className:"footer",children:[a.jsx("div",{className:"footer__main",children:a.jsxs("div",{className:"footer__container",children:[a.jsxs("div",{className:"footer__column footer__column--about",children:[a.jsxs(Pe,{to:"/",className:"footer__logo",children:[a.jsx(Pl,{className:"footer__logo-icon",size:36}),a.jsxs("div",{className:"footer__logo-text",children:[a.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),a.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),a.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),a.jsxs("div",{className:"footer__stats",children:[a.jsxs("div",{className:"footer__stat",children:[a.jsx(xn,{size:18}),a.jsx("span",{children:"500+ cours"})]}),a.jsxs("div",{className:"footer__stat",children:[a.jsx(Dd,{size:18}),a.jsx("span",{children:"10 000+ lves"})]})]})]}),a.jsxs("div",{className:"footer__column",children:[a.jsxs("h3",{className:"footer__title",children:[a.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),a.jsx("nav",{className:"footer__nav",children:a.jsx("ul",{className:"footer__list",children:t.map((l,o)=>a.jsx("li",{className:"footer__item",children:a.jsx(Pe,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),a.jsxs("div",{className:"footer__column",children:[a.jsxs("h3",{className:"footer__title",children:[a.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),a.jsx("nav",{className:"footer__nav",children:a.jsx("ul",{className:"footer__list",children:r.map((l,o)=>a.jsx("li",{className:"footer__item",children:a.jsx(Pe,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),a.jsxs("div",{className:"footer__column",children:[a.jsxs("h3",{className:"footer__title",children:[a.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),a.jsxs("div",{className:"footer__contact",children:[a.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[a.jsx(yP,{size:16,className:"footer__contact-icon"}),a.jsx("span",{children:"contact@pedaclic.sn"})]}),a.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[a.jsx(xP,{size:16,className:"footer__contact-icon"}),a.jsx("span",{children:"+221 77 000 00 00"})]}),a.jsxs("div",{className:"footer__contact-item",children:[a.jsx(bP,{size:16,className:"footer__contact-icon"}),a.jsx("span",{children:"Dakar, Sngal"})]})]}),a.jsxs("div",{className:"footer__social",children:[a.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),a.jsx("div",{className:"footer__social-links",children:n.map((l,o)=>a.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:l.name,children:l.icon},o))})]})]})]})}),a.jsx("div",{className:"footer__bottom",children:a.jsxs("div",{className:"footer__container footer__bottom-content",children:[a.jsxs("p",{className:"footer__copyright",children:[" ",e," PedaClic. Tous droits rservs."]}),a.jsxs("p",{className:"footer__made-with",children:["Fait avec ",a.jsx(jP,{size:14,className:"footer__heart"})," au Sngal "]}),a.jsxs("nav",{className:"footer__legal",children:[a.jsxs(Pe,{to:"/mentions-legales",className:"footer__legal-link",children:[a.jsx(NP,{size:14})," Mentions lgales"]}),a.jsxs(Pe,{to:"/confidentialite",className:"footer__legal-link",children:[a.jsx(Zy,{size:14})," Confidentialit"]}),a.jsxs(Pe,{to:"/aide",className:"footer__legal-link",children:[a.jsx(Md,{size:14})," Aide"]})]})]})})]})},mn=({children:e,hideHeader:t=!1,hideFooter:r=!1,className:n=""})=>a.jsxs("div",{className:"layout",children:[!t&&a.jsx(eq,{}),a.jsx("main",{className:`layout__main ${t?"":"layout__main--with-header"} ${n}`,children:e}),!r&&a.jsx(tq,{})]}),rq=()=>{const{currentUser:e}=Ht();return a.jsxs("div",{className:"home-page",children:[a.jsxs("section",{className:"home-page__hero",children:[a.jsxs("div",{className:"home-page__hero-content",children:[a.jsxs("div",{className:"home-page__hero-badge",children:[a.jsx(Yr,{size:14}),a.jsx("span",{children:"Plateforme N1 au Sngal"})]}),a.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",a.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),a.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),a.jsx("div",{className:"home-page__hero-cta",children:e?a.jsxs(Pe,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",a.jsx(ns,{size:20})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Pe,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",a.jsx(ns,{size:20})]}),a.jsxs(Pe,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[a.jsx(uc,{size:18}),"Dcouvrir les cours"]})]})}),a.jsxs("div",{className:"home-page__hero-stats",children:[a.jsxs("div",{className:"home-page__hero-stat",children:[a.jsx("strong",{children:"10 000+"}),a.jsx("span",{children:"lves inscrits"})]}),a.jsxs("div",{className:"home-page__hero-stat",children:[a.jsx("strong",{children:"500+"}),a.jsx("span",{children:"Cours disponibles"})]}),a.jsxs("div",{className:"home-page__hero-stat",children:[a.jsx("strong",{children:"95%"}),a.jsx("span",{children:"Taux de russite"})]})]})]}),a.jsx("div",{className:"home-page__hero-image",children:a.jsxs("div",{className:"home-page__hero-illustration",children:[a.jsx(Pl,{size:120}),a.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),a.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),a.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),a.jsx("section",{className:"home-page__levels",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),a.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),a.jsxs("div",{className:"home-page__levels-grid",children:[a.jsxs(Pe,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[a.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),a.jsx("h3",{children:"Collge"}),a.jsx("p",{children:"6me  3me"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx(Ot,{size:16})," Prparation au BFEM"]}),a.jsxs("li",{children:[a.jsx(Ot,{size:16})," 9 matires disponibles"]}),a.jsxs("li",{children:[a.jsx(Ot,{size:16})," Exercices corrigs"]})]}),a.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",a.jsx(ns,{size:16})]})]}),a.jsxs(Pe,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[a.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),a.jsx("h3",{children:"Lyce"}),a.jsx("p",{children:"2nde  Terminale"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx(Ot,{size:16})," Prparation au BAC"]}),a.jsxs("li",{children:[a.jsx(Ot,{size:16})," 12 matires disponibles"]}),a.jsxs("li",{children:[a.jsx(Ot,{size:16})," Annales d'examens"]})]}),a.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",a.jsx(ns,{size:16})]})]})]})]})}),a.jsx("section",{className:"home-page__features",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),a.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),a.jsxs("div",{className:"home-page__features-grid",children:[a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon",children:a.jsx(xn,{size:28})}),a.jsx("h3",{children:"Cours complets"}),a.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:a.jsx(n2,{size:28})}),a.jsx("h3",{children:"Quiz interactifs"}),a.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:a.jsx(a2,{size:28})}),a.jsx("h3",{children:"Suivi de progression"}),a.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:a.jsx(Zy,{size:28})}),a.jsx("h3",{children:"Contenu vrifi"}),a.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:a.jsx(ql,{size:28})}),a.jsx("h3",{children:"Accessible 24/7"}),a.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),a.jsxs("div",{className:"home-page__feature-card",children:[a.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:a.jsx(Oi,{size:28})}),a.jsx("h3",{children:"Certificats"}),a.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),a.jsx("section",{className:"home-page__premium",children:a.jsx("div",{className:"home-page__container",children:a.jsxs("div",{className:"home-page__premium-content",children:[a.jsxs("div",{className:"home-page__premium-text",children:[a.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),a.jsx("h2",{children:"Passez  la vitesse suprieure"}),a.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",a.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),a.jsxs("ul",{className:"home-page__premium-features",children:[a.jsxs("li",{children:[a.jsx(Ot,{size:18})," Quiz illimits dans toutes les matires"]}),a.jsxs("li",{children:[a.jsx(Ot,{size:18})," Corrections dtailles des exercices"]}),a.jsxs("li",{children:[a.jsx(Ot,{size:18})," Annales des examens (BFEM, BAC)"]}),a.jsxs("li",{children:[a.jsx(Ot,{size:18})," Support prioritaire"]})]}),a.jsxs(Pe,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",a.jsx(ns,{size:20})]})]}),a.jsx("div",{className:"home-page__premium-pricing",children:a.jsxs("div",{className:"home-page__pricing-card",children:[a.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),a.jsx("h3",{children:"Abonnement Annuel"}),a.jsxs("div",{className:"home-page__pricing-price",children:[a.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),a.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),a.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),a.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),a.jsx(Pe,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),a.jsx("section",{className:"home-page__testimonials",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),a.jsxs("div",{className:"home-page__testimonials-grid",children:[a.jsxs("div",{className:"home-page__testimonial-card",children:[a.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>a.jsx(Yr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),a.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),a.jsxs("div",{className:"home-page__testimonial-author",children:[a.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),a.jsxs("div",{children:[a.jsx("strong",{children:"Fatou Adara"}),a.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),a.jsxs("div",{className:"home-page__testimonial-card",children:[a.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>a.jsx(Yr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),a.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),a.jsxs("div",{className:"home-page__testimonial-author",children:[a.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),a.jsxs("div",{children:[a.jsx("strong",{children:"Moussa Diallo"}),a.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),a.jsxs("div",{className:"home-page__testimonial-card",children:[a.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>a.jsx(Yr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),a.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),a.jsxs("div",{className:"home-page__testimonial-author",children:[a.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),a.jsxs("div",{children:[a.jsx("strong",{children:"Aminata Ndiaye"}),a.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),a.jsx("section",{className:"home-page__final-cta",children:a.jsxs("div",{className:"home-page__container",children:[a.jsx("h2",{children:"Prt  russir ?"}),a.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!e&&a.jsxs(Pe,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",a.jsx(ns,{size:24})]})]})})]})},nq=()=>{const{login:e}=Ht(),t=Zr(),n=$f().state?.from||"/",[l,o]=j.useState({email:"",password:""}),[u,f]=j.useState(!1),[m,h]=j.useState(""),[p,v]=j.useState(!1),y=N=>{const{name:w,value:S}=N.target;o(O=>({...O,[w]:S})),m&&h("")},b=()=>l.email.trim()?l.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)?!0:(h("Veuillez entrer une adresse email valide."),!1):(h("Veuillez entrer votre mot de passe."),!1):(h("Veuillez entrer votre adresse email."),!1),_=async N=>{if(N.preventDefault(),!!b()){f(!0),h("");try{await e(l.email,l.password),t(n,{replace:!0})}catch(w){w instanceof Error?h(w.message):h("Une erreur est survenue lors de la connexion.")}finally{f(!1)}}};return a.jsx("div",{className:"auth-page",children:a.jsxs("div",{className:"auth-container",children:[a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsxs(Pe,{to:"/",className:"auth-logo",children:[a.jsx("div",{className:"auth-logo__icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),a.jsx("span",{children:"PedaClic"})]}),a.jsx("h1",{className:"auth-title",children:"Connexion"}),a.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),m&&a.jsxs("div",{className:"auth-error",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 8v4M12 16h.01"})]}),a.jsx("span",{children:m})]}),a.jsxs("form",{onSubmit:_,className:"auth-form",children:[a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:y,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:u})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),a.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),a.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:l.password,onChange:y,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:u}),a.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!p),"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",children:p?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),a.jsx("div",{className:"auth-forgot",children:a.jsx(Pe,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),a.jsx("button",{type:"submit",className:"auth-button",disabled:u,children:u?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"ou"})}),a.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",a.jsx(Pe,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),a.jsxs("div",{className:"auth-welcome",children:[a.jsx("h2",{children:"Bienvenue sur PedaClic !"}),a.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),a.jsxs("ul",{className:"auth-features",children:[a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),a.jsxs("li",{children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},aq=()=>{const{register:e}=Ht(),t=Zr(),[r,n]=j.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[l,o]=j.useState(!1),[u,f]=j.useState(""),[m,h]=j.useState(!1),[p,v]=j.useState(!1),[y,b]=j.useState(!1),_=S=>{const{name:O,value:C}=S.target;n(E=>({...E,[O]:C})),u&&f("")},N=()=>r.displayName.trim()?r.displayName.trim().length<2?(f("Le nom doit contenir au moins 2 caractres."),!1):r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?r.password?r.password.length<6?(f("Le mot de passe doit contenir au moins 6 caractres."),!1):r.password!==r.confirmPassword?(f("Les mots de passe ne correspondent pas."),!1):y?!0:(f("Veuillez accepter les conditions d'utilisation."),!1):(f("Veuillez entrer un mot de passe."),!1):(f("Veuillez entrer une adresse email valide."),!1):(f("Veuillez entrer votre adresse email."),!1):(f("Veuillez entrer votre nom complet."),!1),w=async S=>{if(S.preventDefault(),!!N()){o(!0),f("");try{await e(r),t("/disciplines",{replace:!0})}catch(O){O instanceof Error?f(O.message):f("Une erreur est survenue lors de l'inscription.")}finally{o(!1)}}};return a.jsx("div",{className:"auth-page",children:a.jsxs("div",{className:"auth-container",children:[a.jsxs("div",{className:"auth-card auth-card--register",children:[a.jsxs("div",{className:"auth-header",children:[a.jsxs(Pe,{to:"/",className:"auth-logo",children:[a.jsx("div",{className:"auth-logo__icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),a.jsx("span",{children:"PedaClic"})]}),a.jsx("h1",{className:"auth-title",children:"Crer un compte"}),a.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),u&&a.jsxs("div",{className:"auth-error",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 8v4M12 16h.01"})]}),a.jsx("span",{children:u})]}),a.jsxs("form",{onSubmit:w,className:"auth-form",children:[a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("input",{type:"text",id:"displayName",name:"displayName",value:r.displayName,onChange:_,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:l})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:_,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:l})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{className:"auth-label",children:"Je suis :"}),a.jsxs("div",{className:"auth-role-selector",children:[a.jsxs("label",{className:`auth-role-option ${r.role==="eleve"?"auth-role-option--selected":""}`,children:[a.jsx("input",{type:"radio",name:"role",value:"eleve",checked:r.role==="eleve",onChange:_,className:"auth-role-input",disabled:l}),a.jsxs("div",{className:"auth-role-content",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),a.jsx("span",{children:"lve"})]})]}),a.jsxs("label",{className:`auth-role-option ${r.role==="prof"?"auth-role-option--selected":""}`,children:[a.jsx("input",{type:"radio",name:"role",value:"prof",checked:r.role==="prof",onChange:_,className:"auth-role-input",disabled:l}),a.jsxs("div",{className:"auth-role-content",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),a.jsx("span",{children:"Professeur"})]})]}),a.jsxs("label",{className:`auth-role-option ${r.role==="parent"?"auth-role-option--selected":""}`,children:[a.jsx("input",{type:"radio",name:"role",value:"parent",checked:r.role==="parent",onChange:_,className:"auth-role-input",disabled:l}),a.jsxs("div",{className:"auth-role-content",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),a.jsx("span",{children:"Parent d'lve"})]})]})]})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),a.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),a.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:r.password,onChange:_,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:l}),a.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>h(!m),"aria-label":m?"Masquer":"Afficher",children:m?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),a.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),a.jsxs("div",{className:"auth-input-wrapper",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:_,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:l}),a.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!p),"aria-label":p?"Masquer":"Afficher",children:p?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),a.jsx("div",{className:"auth-checkbox-field",children:a.jsxs("label",{className:"auth-checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:S=>b(S.target.checked),className:"auth-checkbox",disabled:l}),a.jsx("span",{className:"auth-checkbox-custom"}),a.jsxs("span",{children:["J'accepte les"," ",a.jsx(Pe,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",a.jsx(Pe,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),a.jsx("button",{type:"submit",className:"auth-button",disabled:l,children:l?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"ou"})}),a.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",a.jsx(Pe,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),a.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[a.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),a.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),a.jsxs("div",{className:"auth-stats",children:[a.jsxs("div",{className:"auth-stat",children:[a.jsx("span",{className:"auth-stat-number",children:"10 000+"}),a.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),a.jsxs("div",{className:"auth-stat",children:[a.jsx("span",{className:"auth-stat-number",children:"500+"}),a.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),a.jsxs("div",{className:"auth-stat",children:[a.jsx("span",{className:"auth-stat-number",children:"95%"}),a.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),a.jsxs("div",{className:"auth-testimonial",children:[a.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),a.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},l2=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],o2=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],c2=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],u2={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function G_(e){switch(e){case"college":return l2;case"lycee":return o2;case"formation_libre":return c2;default:return[]}}function d2(e){return[...l2,...o2,...c2].find(r=>r.value===e)?.label||e}const Q_=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],iq=()=>{const[e,t]=j.useState("college"),[r,n]=j.useState([]),[l,o]=j.useState(!0),u=Zr();j.useEffect(()=>{const h=Ge(Oe(pe,"disciplines"),wt("ordre")),p=t2(h,v=>{const y=v.docs.map(b=>({id:b.id,...b.data(),createdAt:b.data().createdAt?.toDate()||new Date,updatedAt:b.data().updatedAt?.toDate()||new Date}));n(y),o(!1)});return()=>p()},[]);const f=r.filter(h=>h.niveau===e),m=Q_.find(h=>h.niveau===e);return a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[a.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[a.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),a.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:Q_.map(h=>{const p=e===h.niveau;return a.jsxs("button",{onClick:()=>t(h.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${p?h.color:"#e2e8f0"}`,background:p?h.bgLight:"#fff",color:p?h.color:"#718096",fontSize:"1rem",fontWeight:p?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:p?`0 2px 8px ${h.color}20`:"none"},children:[a.jsx("span",{style:{fontSize:"1.2rem"},children:h.icon}),h.label]},h.niveau)})}),l&&a.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!l&&f.length===0&&a.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[a.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),a.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",u2[e]," pour le moment."]})]}),!l&&f.length>0&&a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:f.map(h=>a.jsxs("div",{onClick:()=>u(`/disciplines/${h.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${h.couleur||m.color}`},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[a.jsx("span",{style:{fontSize:"1.8rem"},children:h.icone||""}),a.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:h.nom})]}),h.description&&a.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:h.description.length>100?`${h.description.slice(0,100)}...`:h.description}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:a.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:m.bgLight,color:m.color},children:d2(h.classe)})}),h.coefficient!==void 0&&a.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",h.coefficient]})]},h.id))})]})},Vo="disciplines",F_=e=>{const t=e.data();return{id:e.id,nom:t.nom,niveau:t.niveau,classe:t.classe,ordre:t.ordre,coefficient:t.coefficient,couleur:t.couleur,icone:t.icone,description:t.description,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Ti={async getAll(e){try{const t=[wt("ordre","asc")];e?.niveau&&t.unshift(Ie("niveau","==",e.niveau)),e?.classe&&t.unshift(Ie("classe","==",e.classe));const r=Ge(Oe(pe,Vo),...t);return(await $e(r)).docs.map(F_)}catch(t){throw console.error("Erreur lors de la rcupration des disciplines:",t),new Error("Impossible de rcuprer les disciplines")}},async getById(e){try{const t=Ee(pe,Vo,e),r=await mr(t);return r.exists()?F_(r):null}catch(t){throw console.error("Erreur lors de la rcupration de la discipline:",t),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(e){return this.getAll({niveau:e})},async getByClasse(e){return this.getAll({classe:e})},async create(e){try{return(await Ar(Oe(pe,Vo),{...e,createdAt:ct(),updatedAt:ct()})).id}catch(t){throw console.error("Erreur lors de la cration de la discipline:",t),new Error("Impossible de crer la discipline")}},async update(e,t){try{const r=Ee(pe,Vo,e);await xt(r,{...t,updatedAt:ct()})}catch(r){throw console.error("Erreur lors de la mise  jour de la discipline:",r),new Error("Impossible de mettre  jour la discipline")}},async delete(e){try{const t=Ee(pe,Vo,e);await Mi(t)}catch(t){throw console.error("Erreur lors de la suppression de la discipline:",t),new Error("Impossible de supprimer la discipline")}},async exists(e){return await this.getById(e)!==null},async countByNiveau(e){return(await this.getByNiveau(e)).length}},ts="ressources",sq="ressources",V_=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,titre:t.titre,type:t.type,contenu:t.contenu,description:t.description,isPremium:t.isPremium||!1,ordre:t.ordre||0,chapitre:t.chapitre,fichierURL:t.fichierURL,dureeEstimee:t.dureeEstimee,tags:t.tags||[],auteurId:t.auteurId,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},lq=e=>{const t=Date.now(),r=e.split(".").pop();return`${e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${t}.${r}`},wa={async getAll(e,t){try{const r=[wt("ordre","asc")];e?.disciplineId&&r.unshift(Ie("disciplineId","==",e.disciplineId)),e?.chapitreId&&r.unshift(Ie("chapitre","==",e.chapitreId)),e?.type&&r.unshift(Ie("type","==",e.type)),e?.isPremium!==void 0&&r.unshift(Ie("isPremium","==",e.isPremium)),e?.auteurId&&r.unshift(Ie("auteurId","==",e.auteurId)),t&&r.push(Jn(t));const n=Ge(Oe(pe,ts),...r);return(await $e(n)).docs.map(V_)}catch(r){throw console.error("Erreur lors de la rcupration des ressources:",r),new Error("Impossible de rcuprer les ressources")}},async getById(e){try{const t=Ee(pe,ts,e),r=await mr(t);return r.exists()?V_(r):null}catch(t){throw console.error("Erreur lors de la rcupration de la ressource:",t),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(e){return this.getAll({disciplineId:e})},async getByChapitre(e){return this.getAll({chapitreId:e})},async getByType(e){return this.getAll({type:e})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(e,t){try{return(await Ar(Oe(pe,ts),{...e,auteurId:t,createdAt:ct(),updatedAt:ct()})).id}catch(r){throw console.error("Erreur lors de la cration de la ressource:",r),new Error("Impossible de crer la ressource")}},async update(e,t){try{const r=Ee(pe,ts,e);await xt(r,{...t,updatedAt:ct()})}catch(r){throw console.error("Erreur lors de la mise  jour de la ressource:",r),new Error("Impossible de mettre  jour la ressource")}},async delete(e){try{const t=await this.getById(e);t?.fichierURL&&await this.deleteFile(t.fichierURL);const r=Ee(pe,ts,e);await Mi(r)}catch(t){throw console.error("Erreur lors de la suppression de la ressource:",t),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),r=mc(pe);for(const n of t){n.fichierURL&&await this.deleteFile(n.fichierURL);const l=Ee(pe,ts,n.id);r.delete(l)}await r.commit()}catch(t){throw console.error("Erreur lors de la suppression des ressources:",t),new Error("Impossible de supprimer les ressources")}},async uploadFile(e,t){try{const r=lq(e.name),n=`${sq}/${t}/${r}`,l=Mn(Tn,n);return await ds(l,e),await fs(l)}catch(r){throw console.error("Erreur lors de l'upload du fichier:",r),new Error("Impossible d'uploader le fichier")}},async deleteFile(e){try{const t=Mn(Tn,e);await zd(t)}catch(t){console.warn("Fichier non trouv ou dj supprim:",t)}},async reorder(e,t){try{const r=mc(pe);t.forEach((n,l)=>{const o=Ee(pe,ts,n);r.update(o,{ordre:l+1,updatedAt:ct()})}),await r.commit()}catch(r){throw console.error("Erreur lors de la rorganisation des ressources:",r),new Error("Impossible de rorganiser les ressources")}},async togglePremium(e,t){await this.update(e,{isPremium:t})},async countByType(e){return(await this.getByType(e)).length},async getStats(){try{const e=await this.getAll(),t={total:e.length,premium:e.filter(r=>r.isPremium).length,gratuit:e.filter(r=>!r.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return e.forEach(r=>{t.parType[r.type]!==void 0&&t.parType[r.type]++}),t}catch(e){throw console.error("Erreur lors du calcul des statistiques:",e),new Error("Impossible de calculer les statistiques")}}},oq=()=>{const{id:e}=Uf(),t=Zr(),[r,n]=j.useState(null),[l,o]=j.useState([]),[u,f]=j.useState([]),[m,h]=j.useState(!0),[p,v]=j.useState(null),[y,b]=j.useState("tous"),[_,N]=j.useState(new Set),w=j.useCallback(async()=>{if(e)try{h(!0),v(null);const k=await Ti.getById(e);if(!k){v("Discipline introuvable."),h(!1);return}n(k);const Y=await wa.getAll({disciplineId:e}),X=new Map,B=[];for(const ue of Y){const Q=ue.chapitre||ue.chapitreId;Q?(X.has(Q)||X.set(Q,[]),X.get(Q).push(ue)):B.push(ue)}const le=Array.from(X.entries()).map(([ue,Q])=>({chapitreNom:ue,ressources:Q.sort((P,J)=>P.ordre-J.ordre)})).sort((ue,Q)=>ue.chapitreNom.localeCompare(Q.chapitreNom,"fr"));o(le),f(B),le.length>0&&N(new Set([le[0].chapitreNom]))}catch(k){console.error("Erreur chargement discipline:",k),v("Impossible de charger les donnes. Ressayez plus tard.")}finally{h(!1)}},[e]);j.useEffect(()=>{w()},[w]);const S=k=>{N(Y=>{const X=new Set(Y);return X.has(k)?X.delete(k):X.add(k),X})},O=k=>y==="tous"?k:k.filter(Y=>Y.type===y),C=k=>{switch(k){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},E=k=>{switch(k){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return k}},z=k=>{switch(k){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},M=k=>k==="college"?"Collge":"Lyce";if(m)return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[a.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),a.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),a.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(p||!r)return a.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[a.jsx("span",{style:{fontSize:"3rem"},children:""}),a.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:p||"Discipline introuvable"}),a.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),a.jsx("button",{onClick:()=>t("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const L=[...l.flatMap(k=>k.ressources),...u],T=[...new Set(L.map(k=>k.type))];return a.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[a.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[a.jsx(Pe,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),a.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),a.jsx(Pe,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),a.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),a.jsx("span",{style:{color:"#374151"},children:r.nom})]}),a.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"2.5rem"},children:r.icone||""}),a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:r.nom}),r.description&&a.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:r.description})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[a.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",M(r.niveau),"  ",r.classe]}),a.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",L.length," ressource",L.length!==1?"s":""]}),r.coefficient&&a.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",r.coefficient]})]})]}),T.length>1&&a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[a.jsxs("button",{onClick:()=>b("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:y==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:y==="tous"?"#2563eb":"#fff",color:y==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",L.length,")"]}),T.map(k=>{const Y=L.filter(B=>B.type===k).length,X=y===k;return a.jsxs("button",{onClick:()=>b(k),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:X?`2px solid ${z(k)}`:"1px solid #d1d5db",background:X?z(k):"#fff",color:X?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[C(k)," ",E(k)," (",Y,")"]},k)})]}),l.length===0&&u.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[a.jsx("span",{style:{fontSize:"3rem"},children:""}),a.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),a.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.map(k=>{const Y=O(k.ressources);if(Y.length===0&&y!=="tous")return null;const X=_.has(k.chapitreNom),B=y==="tous"?k.ressources:Y;return a.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:X?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[a.jsx("button",{onClick:()=>S(k.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:X?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.25rem",transform:X?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),a.jsxs("div",{children:[a.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:k.chapitreNom}),a.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[k.ressources.length," ressource",k.ressources.length!==1?"s":""]})]})]})}),X&&a.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:B.map(le=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:ue=>ue.currentTarget.style.background="#eef2ff",onMouseLeave:ue=>ue.currentTarget.style.background="#f9fafb",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[a.jsx("span",{style:{fontSize:"1.2rem"},children:C(le.type)}),a.jsxs("div",{children:[a.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:le.titre}),le.description&&a.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:le.description})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:z(le.type)},children:E(le.type)}),le.isPremium&&a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),le.dureeEstimee&&a.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",le.dureeEstimee," min"]})]})]},le.id))})]},k.chapitreNom)}),O(u).length>0&&a.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[a.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:O(u).map(k=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.2rem"},children:C(k.type)}),a.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:k.titre})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:z(k.type)},children:E(k.type)}),k.isPremium&&a.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},k.id))})]})]}),a.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:a.jsx(Pe,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},sv=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],cq=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],uq=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],dq=()=>{const{currentUser:e}=Ht(),t=$f(),r=Zr(),[n,l]=j.useState("annuel"),[o,u]=j.useState(!1),[f,m]=j.useState(null),[h,p]=j.useState(null);t.state?.from;const v=()=>!e||!e.isPremium?!1:e.subscriptionEnd?(e.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e.subscriptionEnd))>new Date:!0,y=async()=>{if(!e){r("/connexion",{state:{from:"/premium"}});return}if(v()){m("Vous tes dj abonn Premium !");return}try{u(!0),m(null);const N=sv.find(E=>E.id===n);if(!N)throw new Error("Plan invalide");const w=await Ar(Oe(pe,"transactions"),{userId:e.uid,userEmail:e.email,planType:n,montant:N.prix,devise:"XOF",statut:"pending",dateTransaction:ct(),createdAt:ct()}),S={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${N.nom}`,item_price:N.prix,currency:"XOF",ref_command:w.id,success_url:`${window.location.origin}/premium/success?ref=${w.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${w.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:e.uid,planType:n,transactionId:w.id}),env:"test"},C=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:S.apiKey,API_SECRET:S.apiSecret},body:JSON.stringify({item_name:S.item_name,item_price:S.item_price,currency:S.currency,ref_command:S.ref_command,command_name:`Abonnement Premium ${N.nom} - ${e.email}`,env:S.env,ipn_url:S.ipn_url,success_url:S.success_url,cancel_url:S.cancel_url,custom_field:S.custom_field})})).json();if(C.success===1&&C.redirect_url)window.location.href=C.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const E=new Date,z=new Date(E);n==="mensuel"?z.setMonth(z.getMonth()+1):z.setFullYear(z.getFullYear()+1),await xt(Ee(pe,"users",e.uid),{isPremium:!0,subscriptionEnd:z,subscriptionPlan:n,updatedAt:ct()}),await xt(Ee(pe,"transactions",w.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:z,updatedAt:ct()}),r("/premium/success",{state:{plan:N.nom,montant:N.prix,expiration:z.toLocaleDateString("fr-FR")}})}}catch(N){console.error("Erreur paiement:",N),m("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{u(!1)}},b=N=>{p(h===N?null:N)},_=N=>N.toLocaleString("fr-FR")+" FCFA";if(v()){const N=e?.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e?.subscriptionEnd||Date.now());return a.jsx("div",{className:"premium-page",children:a.jsx("div",{className:"container",children:a.jsxs("div",{className:"premium-already",children:[a.jsx("span",{className:"premium-already__icon",children:""}),a.jsx("h1",{children:"Vous tes dj Premium !"}),a.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",a.jsx("strong",{children:N.toLocaleDateString("fr-FR")})]}),a.jsxs("div",{className:"premium-already__actions",children:[a.jsx(Pe,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),a.jsx(Pe,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return a.jsxs("div",{className:"premium-page",children:[a.jsx("section",{className:"premium-hero",children:a.jsxs("div",{className:"container",children:[a.jsx("span",{className:"premium-hero__badge",children:" Premium"}),a.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",a.jsx("span",{children:"PedaClic"})]}),a.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),a.jsx("section",{className:"premium-pricing",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),a.jsx("div",{className:"pricing-cards",children:sv.map(N=>a.jsxs("div",{className:`pricing-card ${n===N.id?"pricing-card--selected":""} ${N.popular?"pricing-card--popular":""}`,onClick:()=>l(N.id),children:[N.popular&&a.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),a.jsxs("div",{className:"pricing-card__header",children:[a.jsx("h3",{className:"pricing-card__name",children:N.nom}),a.jsx("p",{className:"pricing-card__duration",children:N.duree})]}),a.jsxs("div",{className:"pricing-card__price",children:[N.prixOriginal&&a.jsx("span",{className:"pricing-card__original",children:_(N.prixOriginal)}),a.jsx("span",{className:"pricing-card__amount",children:_(N.prix)}),N.id==="mensuel"&&a.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),N.economie&&a.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",N.economie]}),a.jsx("div",{className:"pricing-card__radio",children:a.jsx("span",{className:`radio-dot ${n===N.id?"radio-dot--active":""}`})})]},N.id))}),a.jsxs("div",{className:"pricing-cta",children:[f&&a.jsxs("div",{className:"pricing-error",children:[a.jsx("span",{children:""})," ",f]}),e?a.jsx("button",{className:"btn btn--premium btn--lg",onClick:y,disabled:o,children:o?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):a.jsxs(a.Fragment,{children:["Payer ",_(sv.find(N=>N.id===n)?.prix||0)]})}):a.jsxs("div",{className:"pricing-login",children:[a.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),a.jsx(Pe,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),a.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",a.jsx(Pe,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),a.jsxs("div",{className:"payment-methods",children:[a.jsx("p",{children:"Paiement scuris par"}),a.jsxs("div",{className:"payment-methods__logos",children:[a.jsx("span",{className:"payment-logo",children:" Orange Money"}),a.jsx("span",{className:"payment-logo",children:" Wave"}),a.jsx("span",{className:"payment-logo",children:" Free Money"}),a.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),a.jsx("section",{className:"premium-features",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),a.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),a.jsx("div",{className:"features-grid",children:cq.map((N,w)=>a.jsxs("div",{className:"feature-card",children:[a.jsx("span",{className:"feature-card__icon",children:N.icone}),a.jsx("h3",{className:"feature-card__title",children:N.titre}),a.jsx("p",{className:"feature-card__description",children:N.description})]},w))})]})}),a.jsx("section",{className:"premium-comparison",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),a.jsxs("div",{className:"comparison-table",children:[a.jsxs("div",{className:"comparison-header",children:[a.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),a.jsx("div",{className:"comparison-free",children:"Gratuit"}),a.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((N,w)=>a.jsxs("div",{className:"comparison-row",children:[a.jsx("div",{className:"comparison-feature",children:N.feature}),a.jsx("div",{className:"comparison-free",children:N.free?a.jsx("span",{className:"check",children:""}):a.jsx("span",{className:"cross",children:""})}),a.jsx("div",{className:"comparison-premium",children:a.jsx("span",{className:"check check--premium",children:""})})]},w))]})]})}),a.jsx("section",{className:"premium-testimonials",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),a.jsxs("div",{className:"testimonials-grid",children:[a.jsxs("div",{className:"testimonial-card",children:[a.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),a.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),a.jsxs("div",{className:"testimonial-card__author",children:[a.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),a.jsxs("div",{children:[a.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),a.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),a.jsxs("div",{className:"testimonial-card",children:[a.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),a.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),a.jsxs("div",{className:"testimonial-card__author",children:[a.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),a.jsxs("div",{children:[a.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),a.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),a.jsxs("div",{className:"testimonial-card",children:[a.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),a.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),a.jsxs("div",{className:"testimonial-card__author",children:[a.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),a.jsxs("div",{children:[a.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),a.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),a.jsx("section",{className:"premium-faq",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"section-title",children:"Questions frquentes"}),a.jsx("div",{className:"faq-list",children:uq.map((N,w)=>a.jsxs("div",{className:`faq-item ${h===w?"faq-item--open":""}`,children:[a.jsxs("button",{className:"faq-item__question",onClick:()=>b(w),"aria-expanded":h===w,children:[a.jsx("span",{children:N.question}),a.jsx("span",{className:"faq-item__icon",children:h===w?"":"+"})]}),h===w&&a.jsx("div",{className:"faq-item__answer",children:a.jsx("p",{children:N.reponse})})]},w))})]})}),a.jsx("section",{className:"premium-cta-final",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Prt  russir vos examens ?"}),a.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),a.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},fq=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"},{id:"ebooks",label:"Bibliothque Ebooks",icon:"",href:"/admin/ebooks"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],hn=({children:e,currentPage:t="dashboard"})=>{const{currentUser:r,logout:n}=Ht(),[l,o]=j.useState(!0),[u,f]=j.useState(!1),m=$f(),h=async()=>{try{f(!0),await n(),window.location.href="/connexion"}catch(b){console.error("Erreur lors de la dconnexion:",b),f(!1)}},p=()=>r?.displayName?r.displayName.split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2):"AD",v=()=>{switch(r?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},y=b=>b.href==="/admin"?m.pathname==="/admin"||m.pathname==="/admin/":m.pathname.startsWith(b.href);return a.jsxs("div",{className:"admin-layout",children:[a.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[a.jsx("header",{className:"admin-sidebar__header",children:a.jsxs(Pe,{to:"/",className:"admin-sidebar__logo",children:[a.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),a.jsx("span",{children:"PedaClic"})]})}),a.jsx("nav",{className:"admin-sidebar__nav",children:fq.map((b,_)=>a.jsxs("div",{className:"admin-nav__section",children:[a.jsx("h3",{className:"admin-nav__title",children:b.title}),a.jsx("ul",{className:"admin-nav__list",children:b.items.map(N=>a.jsx("li",{className:"admin-nav__item",children:a.jsxs(Pe,{to:N.href,className:`admin-nav__link ${y(N)?"admin-nav__link--active":""}`,children:[a.jsx("span",{className:"admin-nav__icon",children:N.icon}),a.jsx("span",{className:"admin-nav__label",children:N.label})]})},N.id))})]},_))}),a.jsx("footer",{className:"admin-sidebar__footer",children:a.jsxs("div",{className:"admin-user",children:[a.jsx("div",{className:"admin-user__avatar",children:p()}),a.jsxs("div",{className:"admin-user__info",children:[a.jsx("div",{className:"admin-user__name",children:r?.displayName||"Administrateur"}),a.jsx("div",{className:"admin-user__role",children:v()})]}),a.jsx("button",{onClick:h,disabled:u,className:"admin-logout-btn",title:"Se dconnecter",children:u?"...":""})]})})]}),a.jsxs("main",{className:"admin-content",children:[a.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!l),"aria-label":"Toggle sidebar",children:""}),e]}),a.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},bi="chapitres",lv=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,numero:t.numero,titre:t.titre,description:t.description,objectifs:t.objectifs||[],dureeEstimee:t.dureeEstimee,isPremium:t.isPremium||!1,actif:t.actif!==!1,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},ji={async getByDiscipline(e){try{const t=Ge(Oe(pe,bi),Ie("disciplineId","==",e),wt("numero","asc"));return(await $e(t)).docs.map(lv)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const e=Ge(Oe(pe,bi),wt("numero","asc"));return(await $e(e)).docs.map(lv)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getById(e){try{const t=Ee(pe,bi,e),r=await mr(t);return r.exists()?lv(r):null}catch(t){throw console.error("Erreur lors de la rcupration du chapitre:",t),new Error("Impossible de rcuprer le chapitre")}},async create(e){try{return(await Ar(Oe(pe,bi),{...e,actif:e.actif!==!1,createdAt:ct(),updatedAt:ct()})).id}catch(t){throw console.error("Erreur lors de la cration du chapitre:",t),new Error("Impossible de crer le chapitre")}},async update(e,t){try{const r=Ee(pe,bi,e);await xt(r,{...t,updatedAt:ct()})}catch(r){throw console.error("Erreur lors de la mise  jour du chapitre:",r),new Error("Impossible de mettre  jour le chapitre")}},async delete(e){try{const t=Ee(pe,bi,e);await Mi(t)}catch(t){throw console.error("Erreur lors de la suppression du chapitre:",t),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),r=mc(pe);t.forEach(n=>{const l=Ee(pe,bi,n.id);r.delete(l)}),await r.commit()}catch(t){throw console.error("Erreur lors de la suppression des chapitres:",t),new Error("Impossible de supprimer les chapitres")}},async reorder(e,t){try{const r=mc(pe);t.forEach((n,l)=>{const o=Ee(pe,bi,n);r.update(o,{numero:l+1,updatedAt:ct()})}),await r.commit()}catch(r){throw console.error("Erreur lors de la rorganisation des chapitres:",r),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(e,t){await this.update(e,{actif:t})},async countByDiscipline(e){return(await this.getByDiscipline(e)).length},async getNextNumero(e){return await this.countByDiscipline(e)+1}},mq=()=>{const{currentUser:e}=Ht(),t=Zr(),[r,n]=j.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[l,o]=j.useState(!0),[u,f]=j.useState(null);return j.useEffect(()=>{(async()=>{try{o(!0),f(null);const[h,p,v,y,b]=await Promise.all([Ti.getAll(),ji.getAll(),wa.getStats(),$e(Oe(pe,"quizzes")),$e(Oe(pe,"quizzes_v2"))]);n({totalDisciplines:h.length,totalChapitres:p.length,totalRessources:v.total,ressourcesPremium:v.premium,ressourcesGratuites:v.gratuit,totalQuiz:y.size,totalQuizAvances:b.size,ressourcesParType:v.parType})}catch(h){console.error("Erreur lors du chargement des statistiques:",h),f("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),a.jsxs("div",{className:"admin-dashboard",children:[a.jsx("header",{className:"admin-page-header",children:a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),a.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",e?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&a.jsxs("div",{className:"alert alert--error",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:u})})]}),l?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des statistiques..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/disciplines"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.totalDisciplines}),a.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/chapitres"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.totalChapitres}),a.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.totalRessources}),a.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.ressourcesPremium}),a.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.totalQuiz}),a.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),a.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz-avance"),children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.totalQuizAvances}),a.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),a.jsxs("section",{className:"content-card",children:[a.jsx("div",{className:"content-card__header",children:a.jsx("h2",{children:"Rpartition des ressources par type"})}),a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"resource-type-grid",children:[a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.cours}),a.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.exercice}),a.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.video}),a.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:r.ressourcesParType.document}),a.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),a.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),a.jsxs("div",{className:"resource-type-info",children:[a.jsx("span",{className:"resource-type-value",children:r.totalQuiz+r.totalQuizAvances}),a.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),a.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[a.jsx("div",{className:"content-card__header",children:a.jsx("h2",{children:"Actions rapides"})}),a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"quick-actions-grid",children:[a.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les disciplines"}),a.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),a.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les chapitres"}),a.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),a.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les ressources"}),a.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),a.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les quiz"}),a.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),a.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Quiz avancs"}),a.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),a.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[a.jsx("div",{className:"quick-action-icon",children:""}),a.jsxs("div",{className:"quick-action-content",children:[a.jsx("h3",{children:"Grer les utilisateurs"}),a.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),a.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},De={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},ov={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},hq=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(ov),[l,o]=j.useState(null),[u,f]=j.useState(!1),[m,h]=j.useState("all");j.useEffect(()=>{const O=Ge(Oe(pe,"disciplines"),wt("nom")),C=t2(O,E=>{const z=E.docs.map(M=>({id:M.id,...M.data(),createdAt:M.data().createdAt?.toDate()||new Date,updatedAt:M.data().updatedAt?.toDate()||new Date}));t(z)});return()=>C()},[]);const p=j.useCallback(O=>{const C=G_(O)[0]?.value||"6eme";n(E=>({...E,niveau:O,classe:C,coefficient:O==="formation_libre"?void 0:E.coefficient}))},[]),v=async O=>{if(O.preventDefault(),!!r.nom.trim()){f(!0);try{const C={nom:r.nom.trim(),niveau:r.niveau,classe:r.classe,ordre:r.ordre,...r.coefficient!==void 0&&{coefficient:r.coefficient},couleur:r.couleur||"",icone:r.icone||"",description:r.description||"",updatedAt:Mt.now()};l?await xt(Ee(pe,"disciplines",l),C):await Ar(Oe(pe,"disciplines"),{...C,createdAt:Mt.now()}),n(ov),o(null)}catch(C){console.error("Erreur lors de la sauvegarde :",C),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{f(!1)}}},y=O=>{n({nom:O.nom,niveau:O.niveau,classe:O.classe,ordre:O.ordre,coefficient:O.coefficient,couleur:O.couleur||"",icone:O.icone||"",description:O.description||""}),o(O.id)},b=async(O,C)=>{if(window.confirm(`Supprimer la discipline "${C}" ? Cette action est irrversible.`))try{await Mi(Ee(pe,"disciplines",O))}catch(E){console.error("Erreur lors de la suppression :",E)}},_=()=>{n(ov),o(null)},N=G_(r.niveau),w=m==="all"?e:e.filter(O=>O.niveau===m),S=O=>({...De.badge,...O==="college"?De.badgeCollege:{},...O==="lycee"?De.badgeLycee:{},...O==="formation_libre"?De.badgeFormationLibre:{}});return a.jsxs("div",{style:De.container,children:[a.jsx("h2",{style:De.title,children:" Gestion des Disciplines"}),a.jsxs("form",{style:De.form,onSubmit:v,children:[a.jsx("h3",{style:De.formTitle,children:l?" Modifier la discipline":" Ajouter une discipline"}),a.jsxs("div",{style:De.formGrid,children:[a.jsxs("div",{style:De.fieldGroup,children:[a.jsx("label",{style:De.label,children:"Nom de la discipline"}),a.jsx("input",{type:"text",style:De.input,value:r.nom,onChange:O=>n({...r,nom:O.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),a.jsxs("div",{style:De.fieldGroup,children:[a.jsx("label",{style:De.label,children:"Niveau"}),a.jsxs("select",{style:De.select,value:r.niveau,onChange:O=>p(O.target.value),children:[a.jsx("option",{value:"college",children:" Collge"}),a.jsx("option",{value:"lycee",children:" Lyce"}),a.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),a.jsxs("div",{style:De.fieldGroup,children:[a.jsx("label",{style:De.label,children:r.niveau==="formation_libre"?"Niveau de formation":"Classe"}),a.jsx("select",{style:De.select,value:r.classe,onChange:O=>n({...r,classe:O.target.value}),children:N.map(({value:O,label:C})=>a.jsx("option",{value:O,children:C},O))})]}),a.jsxs("div",{style:De.fieldGroup,children:[a.jsx("label",{style:De.label,children:"Ordre d'affichage"}),a.jsx("input",{type:"number",style:De.input,value:r.ordre,onChange:O=>n({...r,ordre:Number(O.target.value)}),placeholder:"Ex : 1",min:"0"})]}),a.jsxs("div",{style:De.fieldGroup,children:[a.jsxs("label",{style:De.label,children:["Coefficient",r.niveau==="formation_libre"&&a.jsx("span",{style:De.labelOptional,children:"(optionnel)"})]}),a.jsx("input",{type:"number",style:De.input,value:r.coefficient??"",onChange:O=>n({...r,coefficient:O.target.value?Number(O.target.value):void 0}),placeholder:r.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:r.niveau!=="formation_libre"})]}),a.jsxs("div",{style:De.fieldGroup,children:[a.jsxs("label",{style:De.label,children:["Couleur",a.jsx("span",{style:De.labelOptional,children:"(optionnel)"})]}),a.jsx("input",{type:"color",style:{...De.input,maxWidth:"80px",padding:"4px",height:"40px"},value:r.couleur||"#3182ce",onChange:O=>n({...r,couleur:O.target.value})})]})]}),a.jsxs("div",{style:{...De.fieldGroup,marginBottom:"20px"},children:[a.jsxs("label",{style:De.label,children:["Description",a.jsx("span",{style:De.labelOptional,children:"(optionnel)"})]}),a.jsx("textarea",{style:De.textarea,value:r.description,onChange:O=>n({...r,description:O.target.value}),placeholder:"Brve description de la discipline..."})]}),a.jsxs("div",{style:{...De.fieldGroup,marginBottom:"20px"},children:[a.jsxs("label",{style:De.label,children:["Icne (emoji)",a.jsx("span",{style:De.labelOptional,children:"(optionnel)"})]}),a.jsx("input",{type:"text",style:{...De.input,maxWidth:"120px"},value:r.icone,onChange:O=>n({...r,icone:O.target.value}),placeholder:""})]}),a.jsxs("div",{children:[a.jsx("button",{type:"submit",style:De.btnPrimary,disabled:u,children:u?"Enregistrement...":l?"Mettre  jour":"Ajouter la discipline"}),l&&a.jsx("button",{type:"button",style:De.btnSecondary,onClick:_,children:"Annuler"})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{style:De.formTitle,children:[" Disciplines existantes (",w.length,")"]}),a.jsxs("div",{style:De.tabs,children:[a.jsx("button",{style:{...De.tab,...m==="all"?De.tabActive:{}},onClick:()=>h("all"),children:"Toutes"}),a.jsx("button",{style:{...De.tab,...m==="college"?De.tabActive:{}},onClick:()=>h("college"),children:" Collge"}),a.jsx("button",{style:{...De.tab,...m==="lycee"?De.tabActive:{}},onClick:()=>h("lycee"),children:" Lyce"}),a.jsx("button",{style:{...De.tab,...m==="formation_libre"?De.tabActive:{}},onClick:()=>h("formation_libre"),children:" Formation libre"})]}),w.length===0?a.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):w.map(O=>a.jsxs("div",{style:De.card,children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[O.icone&&a.jsx("span",{style:{fontSize:"1.2rem"},children:O.icone}),a.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:O.nom}),a.jsx("span",{style:S(O.niveau),children:u2[O.niveau]})]}),a.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[O.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",d2(O.classe),O.coefficient!==void 0&&a.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",O.coefficient]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"4px"},children:[a.jsx("button",{style:De.btnEdit,onClick:()=>y(O),children:"Modifier"}),a.jsx("button",{style:De.btnDanger,onClick:()=>b(O.id,O.nom),children:"Supprimer"})]})]},O.id))]})]})},Y_={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},pq=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[l,o]=j.useState(""),[u,f]=j.useState(!0),[m,h]=j.useState(!1),[p,v]=j.useState(!1),[y,b]=j.useState(null),[_,N]=j.useState(null),[w,S]=j.useState(null),[O,C]=j.useState(!1),[E,z]=j.useState(!1),[M,L]=j.useState(null),[T,k]=j.useState(null),[Y,X]=j.useState({...Y_,disciplineId:""}),[B,le]=j.useState({}),[ue,Q]=j.useState(""),P=j.useCallback(async()=>{try{f(!0);const R=await Ti.getAll();t(R),R.length>0&&!l&&o(R[0].id)}catch(R){console.error("Erreur lors du chargement des disciplines:",R),N("Impossible de charger les disciplines.")}finally{f(!1)}},[l]),J=j.useCallback(async()=>{if(!l){n([]);return}try{h(!0);const R=await ji.getByDiscipline(l);n(R)}catch(R){console.error("Erreur lors du chargement des chapitres:",R),N("Impossible de charger les chapitres.")}finally{h(!1)}},[l]);j.useEffect(()=>{P()},[P]),j.useEffect(()=>{J()},[J]);const H=()=>{const R={};return Y.disciplineId||(R.disciplineId="Veuillez slectionner une discipline"),Y.titre.trim()?Y.titre.length<3&&(R.titre="Le titre doit contenir au moins 3 caractres"):R.titre="Le titre du chapitre est requis",Y.numero<1&&(R.numero="Le numro doit tre suprieur  0"),le(R),Object.keys(R).length===0},ve=R=>{o(R),N(null)},I=async()=>{const R=await ji.getNextNumero(l);L(null),X({...Y_,disciplineId:l,numero:R}),le({}),Q(""),C(!0)},ge=R=>{L(R),X({disciplineId:R.disciplineId,numero:R.numero,titre:R.titre,description:R.description,objectifs:R.objectifs||[],dureeEstimee:R.dureeEstimee,isPremium:R.isPremium,actif:R.actif}),le({}),Q(""),C(!0)},ee=R=>{k(R),z(!0)},fe=()=>{C(!1),z(!1),L(null),k(null),le({}),Q("")},ye=R=>{const{name:ae,value:G,type:xe}=R.target,ke=R.target.checked;X(qe=>({...qe,[ae]:xe==="checkbox"?ke:xe==="number"?Number(G):G})),B[ae]&&le(qe=>({...qe,[ae]:void 0}))},he=()=>{ue.trim()&&(X(R=>({...R,objectifs:[...R.objectifs||[],ue.trim()]})),Q(""))},$=R=>{X(ae=>({...ae,objectifs:(ae.objectifs||[]).filter((G,xe)=>xe!==R)}))},ce=async R=>{if(R.preventDefault(),!!H())try{v(!0),N(null),M?(await ji.update(M.id,Y),S("Chapitre modifi avec succs !")):(await ji.create(Y),S("Chapitre cr avec succs !")),fe(),await J(),setTimeout(()=>S(null),3e3)}catch(ae){console.error("Erreur lors de la sauvegarde:",ae),N("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{v(!1)}},Se=async()=>{if(T)try{b(T.id),await ji.delete(T.id),S("Chapitre supprim avec succs !"),fe(),await J(),setTimeout(()=>S(null),3e3)}catch(R){console.error("Erreur lors de la suppression:",R),N("Erreur lors de la suppression. Veuillez ressayer.")}finally{b(null)}},ne=async R=>{try{await ji.toggleActive(R.id,!R.actif),await J(),S(R.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>S(null),2e3)}catch{N("Erreur lors de la mise  jour")}},F=R=>{const ae=e.find(G=>G.id===R);return ae?ae.nom:"Non trouve"};return a.jsxs("div",{className:"chapitre-manager",children:[a.jsxs("header",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),a.jsx("div",{className:"admin-page-header__actions",children:a.jsxs("button",{onClick:I,className:"btn btn--primary",disabled:!l||u,children:[a.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),_&&a.jsxs("div",{className:"alert alert--error",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:_})}),a.jsx("button",{onClick:()=>N(null),className:"alert__close",children:""})]}),w&&a.jsxs("div",{className:"alert alert--success",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:w})})]}),a.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"discipline-selector",children:[a.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),u?a.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?a.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",a.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):a.jsx("div",{className:"discipline-tabs",children:e.map(R=>a.jsxs("button",{className:`discipline-tab ${l===R.id?"discipline-tab--active":""}`,onClick:()=>ve(R.id),style:{"--discipline-color":R.couleur||"#2563eb"},children:[a.jsx("span",{className:"discipline-tab__icon",children:R.icone||""}),a.jsx("span",{className:"discipline-tab__name",children:R.nom}),a.jsx("span",{className:"discipline-tab__class",children:R.classe})]},R.id))})]})})}),a.jsxs("div",{className:"admin-table-container",children:[a.jsx("div",{className:"admin-table-header",children:a.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${F(l)}`,r.length>0&&` (${r.length})`]})}),m?a.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des chapitres..."})]}):l?r.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),a.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),a.jsx("button",{onClick:I,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):a.jsx("div",{className:"chapitres-list",children:r.map(R=>a.jsxs("div",{className:`chapitre-card ${R.actif?"":"chapitre-card--inactive"}`,children:[a.jsx("div",{className:"chapitre-card__number",children:R.numero}),a.jsxs("div",{className:"chapitre-card__content",children:[a.jsxs("h3",{className:"chapitre-card__title",children:[R.titre,R.isPremium&&a.jsx("span",{className:"badge badge--premium",children:"Premium"}),!R.actif&&a.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),R.description&&a.jsx("p",{className:"chapitre-card__description",children:R.description}),a.jsxs("div",{className:"chapitre-card__meta",children:[R.dureeEstimee&&a.jsxs("span",{children:[" ",R.dureeEstimee,"h estime"]}),R.objectifs&&R.objectifs.length>0&&a.jsxs("span",{children:[" ",R.objectifs.length," objectif(s)"]})]})]}),a.jsxs("div",{className:"chapitre-card__actions",children:[a.jsx("button",{onClick:()=>ne(R),className:`table-action-btn ${R.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:R.actif?"Dsactiver":"Activer",children:R.actif?"":""}),a.jsx("button",{onClick:()=>ge(R),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),a.jsx("button",{onClick:()=>ee(R),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:y===R.id,children:y===R.id?"":""})]})]},R.id))}):a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),a.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),O&&a.jsx("div",{className:"modal-overlay",onClick:fe,children:a.jsxs("div",{className:"modal modal--lg",onClick:R=>R.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:M?"Modifier le chapitre":"Nouveau chapitre"}),a.jsx("button",{onClick:fe,className:"modal__close",children:""})]}),a.jsxs("form",{onSubmit:ce,children:[a.jsxs("div",{className:"modal__body",children:[!M&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),a.jsxs("select",{name:"disciplineId",className:`form-select ${B.disciplineId?"form-select--error":""}`,value:Y.disciplineId,onChange:ye,children:[a.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(R=>a.jsxs("option",{value:R.id,children:[R.icone," ",R.nom," (",R.classe,")"]},R.id))]}),B.disciplineId&&a.jsx("span",{className:"form-error",children:B.disciplineId})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[a.jsx("label",{className:"form-label form-label--required",children:"N"}),a.jsx("input",{type:"number",name:"numero",className:`form-input ${B.numero?"form-input--error":""}`,min:"1",value:Y.numero,onChange:ye}),B.numero&&a.jsx("span",{className:"form-error",children:B.numero})]}),a.jsxs("div",{className:"form-group",style:{flex:1},children:[a.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),a.jsx("input",{type:"text",name:"titre",className:`form-input ${B.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:Y.titre,onChange:ye}),B.titre&&a.jsx("span",{className:"form-error",children:B.titre})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:Y.description||"",onChange:ye})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),a.jsxs("div",{className:"objectifs-input",children:[a.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:ue,onChange:R=>Q(R.target.value),onKeyPress:R=>R.key==="Enter"&&(R.preventDefault(),he())}),a.jsx("button",{type:"button",onClick:he,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),Y.objectifs&&Y.objectifs.length>0&&a.jsx("ul",{className:"objectifs-list",children:Y.objectifs.map((R,ae)=>a.jsxs("li",{className:"objectif-item",children:[a.jsxs("span",{children:[" ",R]}),a.jsx("button",{type:"button",onClick:()=>$(ae),className:"objectif-remove",children:""})]},ae))})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),a.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:Y.dureeEstimee||"",onChange:ye})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Options"}),a.jsxs("div",{className:"form-options",children:[a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"isPremium",checked:Y.isPremium,onChange:ye}),a.jsx("span",{children:"Contenu Premium "})]}),a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"actif",checked:Y.actif!==!1,onChange:ye}),a.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{type:"button",onClick:fe,className:"btn btn--outline",disabled:p,children:"Annuler"}),a.jsx("button",{type:"submit",className:"btn btn--primary",disabled:p,children:p?"Enregistrement...":M?"Mettre  jour":"Crer le chapitre"})]})]})]})}),E&&T&&a.jsx("div",{className:"modal-overlay",onClick:fe,children:a.jsxs("div",{className:"modal",onClick:R=>R.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),a.jsx("button",{onClick:fe,className:"modal__close",children:""})]}),a.jsxs("div",{className:"modal__body",children:[a.jsxs("p",{children:["Supprimer le chapitre ",a.jsxs("strong",{children:[T.numero,". ",T.titre]})," ?"]}),a.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{onClick:fe,className:"btn btn--outline",children:"Annuler"}),a.jsx("button",{onClick:Se,className:"btn btn--danger",disabled:y!==null,children:y?"Suppression...":"Supprimer"})]})]})}),a.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},cd=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],ud={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},cv=50,K_={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},vq=()=>{const{currentUser:e}=Ht(),[t,r]=j.useState([]),[n,l]=j.useState([]),[o,u]=j.useState([]),[f,m]=j.useState([]),[h,p]=j.useState(""),[v,y]=j.useState(""),[b,_]=j.useState(""),[N,w]=j.useState(""),[S,O]=j.useState(""),[C,E]=j.useState(!0),[z,M]=j.useState(!1),[L,T]=j.useState(!1),[k,Y]=j.useState(!1),[X,B]=j.useState(null),[le,ue]=j.useState(!1),[Q,P]=j.useState(0),[J,H]=j.useState(null),[ve,I]=j.useState(null),[ge,ee]=j.useState(!1),[fe,ye]=j.useState(!1),[he,$]=j.useState(!1),[ce,Se]=j.useState(null),[ne,F]=j.useState(null),[R,ae]=j.useState(null),[G,xe]=j.useState({...K_,disciplineId:""}),[ke,qe]=j.useState({}),[Qe,Gt]=j.useState(null),[Sn,Jr]=j.useState(null),aa=j.useRef(null),[se,we]=j.useState(""),Me=j.useCallback(async()=>{try{E(!0);const K=await Ti.getAll();r(K),K.length>0&&!h&&p(K[0].id)}catch(K){console.error("Erreur lors du chargement des disciplines:",K),H("Impossible de charger les disciplines.")}finally{E(!1)}},[h]),Re=j.useCallback(async()=>{if(!h){l([]);return}try{M(!0);const K=await ji.getByDiscipline(h);l(K)}catch(K){console.error("Erreur lors du chargement des chapitres:",K)}finally{M(!1)}},[h]),bt=j.useCallback(async()=>{if(!h){u([]),m([]);return}try{T(!0);const K=await wa.getByDiscipline(h);u(K),m(K)}catch(K){console.error("Erreur lors du chargement des ressources:",K),H("Impossible de charger les ressources.")}finally{T(!1)}},[h]);j.useEffect(()=>{Me()},[Me]),j.useEffect(()=>{Re()},[Re]),j.useEffect(()=>{bt()},[bt]),j.useEffect(()=>{let K=[...o];if(v&&(K=K.filter(ze=>ze.chapitre===v)),b&&(K=K.filter(ze=>ze.type===b)),N==="premium"?K=K.filter(ze=>ze.isPremium):N==="free"&&(K=K.filter(ze=>!ze.isPremium)),S){const ze=S.toLowerCase();K=K.filter(dt=>dt.titre.toLowerCase().includes(ze)||dt.description?.toLowerCase().includes(ze)||dt.tags?.some(vr=>vr.toLowerCase().includes(ze)))}m(K)},[o,v,b,N,S]);const hr=()=>{const K={};if(G.disciplineId||(K.disciplineId="Veuillez slectionner une discipline"),G.titre.trim()?G.titre.length<3&&(K.titre="Le titre doit contenir au moins 3 caractres"):K.titre="Le titre est requis",G.type||(K.type="Veuillez slectionner un type de ressource"),Qe){const ze="."+Qe.name.split(".").pop()?.toLowerCase(),dt=ud[G.type];dt.includes(ze)||(K.fichier=`Extension non autorise. Extensions acceptes : ${dt.join(", ")}`),Qe.size/(1024*1024)>cv&&(K.fichier=`Le fichier est trop volumineux (max ${cv} Mo)`)}return qe(K),Object.keys(K).length===0},In=K=>{p(K),y(""),H(null)},Ts=()=>{Se(null),xe({...K_,disciplineId:h}),qe({}),Gt(null),Jr(null),we(""),ee(!0)},en=K=>{Se(K),xe({disciplineId:K.disciplineId,titre:K.titre,type:K.type,description:K.description,contenu:K.contenu,chapitre:K.chapitre||"",ordre:K.ordre,isPremium:K.isPremium,actif:K.actif,tags:K.tags||[],duree:K.duree,urlExterne:K.urlExterne||""}),qe({}),Gt(null),Jr(K.fichierURL||null),we(""),ee(!0)},Ka=K=>{ae(K),$(!0)},Im=K=>{F(K),ye(!0)},pr=()=>{ee(!1),ye(!1),$(!1),Se(null),F(null),ae(null),qe({}),Gt(null),Jr(null),we("")},pt=K=>{const{name:ze,value:dt,type:vr}=K.target,eo=K.target.checked;xe(Ri=>({...Ri,[ze]:vr==="checkbox"?eo:vr==="number"?Number(dt):dt})),ke[ze]&&qe(Ri=>({...Ri,[ze]:void 0}))},Bn=K=>{const ze=K.target.files?.[0];if(ze)if(Gt(ze),qe(dt=>({...dt,fichier:void 0})),ze.type.startsWith("image/")||ze.type.startsWith("video/")){const dt=new FileReader;dt.onloadend=()=>{Jr(dt.result)},dt.readAsDataURL(ze)}else Jr(null)},br=()=>{Gt(null),Jr(null),aa.current&&(aa.current.value="")},Kc=()=>{se.trim()&&!G.tags?.includes(se.trim())&&(xe(K=>({...K,tags:[...K.tags||[],se.trim()]})),we(""))},Bm=K=>{xe(ze=>({...ze,tags:(ze.tags||[]).filter((dt,vr)=>vr!==K)}))},$m=async K=>{if(K.preventDefault(),!!hr())try{Y(!0),H(null);let ze=ce?.fichierURL,dt=ce?.fichierNom;if(Qe){ue(!0);const eo=ce?.id||`temp_${Date.now()}`;ze=await wa.uploadFile(Qe,eo),dt=Qe?.name||"fichier",ue(!1)}const vr={...G,fichierURL:ze,fichierNom:dt};ce?(await wa.update(ce.id,vr),I("Ressource modifie avec succs !")):(await wa.create(vr,"admin"),I("Ressource cre avec succs !")),pr(),await bt(),setTimeout(()=>I(null),3e3)}catch(ze){console.error("Erreur lors de la sauvegarde:",ze),H("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{Y(!1),ue(!1),P(0)}},ks=async()=>{if(ne)try{B(ne.id),ne.fichierURL&&await wa.deleteFile(ne.fichierURL),await wa.delete(ne.id),I("Ressource supprime avec succs !"),pr(),await bt(),setTimeout(()=>I(null),3e3)}catch(K){console.error("Erreur lors de la suppression:",K),H("Erreur lors de la suppression. Veuillez ressayer.")}finally{B(null)}},Ps=async K=>{try{await wa.togglePremium(K.id,!K.isPremium),await bt(),I(K.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>I(null),2e3)}catch{H("Erreur lors de la mise  jour")}},qs=K=>{const ze=t.find(dt=>dt.id===K);return ze?ze.nom:"Non trouve"},ia=K=>{const ze=n.find(dt=>dt.id===K);return ze?`${ze.numero}. ${ze.titre}`:""},$n=K=>cd.find(ze=>ze.value===K)||cd[0],qi=K=>K<1024?K+" o":K<1024*1024?(K/1024).toFixed(1)+" Ko":(K/(1024*1024)).toFixed(1)+" Mo";return a.jsxs("div",{className:"resource-manager",children:[a.jsxs("header",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),a.jsx("div",{className:"admin-page-header__actions",children:a.jsxs("button",{onClick:Ts,className:"btn btn--primary",disabled:!h||C,children:[a.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),J&&a.jsxs("div",{className:"alert alert--error",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:J})}),a.jsx("button",{onClick:()=>H(null),className:"alert__close",children:""})]}),ve&&a.jsxs("div",{className:"alert alert--success",children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:ve})})]}),a.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:a.jsx("div",{className:"content-card__body",children:a.jsxs("div",{className:"discipline-selector",children:[a.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),C?a.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?a.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",a.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):a.jsx("div",{className:"discipline-tabs",children:t.map(K=>a.jsxs("button",{className:`discipline-tab ${h===K.id?"discipline-tab--active":""}`,onClick:()=>In(K.id),style:{"--discipline-color":K.couleur||"#2563eb"},children:[a.jsx("span",{className:"discipline-tab__icon",children:K.icone||""}),a.jsx("span",{className:"discipline-tab__name",children:K.nom}),a.jsx("span",{className:"discipline-tab__class",children:K.classe})]},K.id))})]})})}),a.jsxs("div",{className:"admin-table-container",children:[a.jsxs("div",{className:"admin-table-header",children:[a.jsxs("h2",{className:"admin-table-title",children:["Ressources ",h&&`- ${qs(h)}`,f.length>0&&` (${f.length})`]}),a.jsxs("div",{className:"admin-table-actions",children:[a.jsxs("div",{className:"search-input",children:[a.jsx("span",{className:"search-input__icon",children:""}),a.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:S,onChange:K=>O(K.target.value)})]}),a.jsxs("select",{className:"form-select form-select--sm",value:v,onChange:K=>y(K.target.value),disabled:z||n.length===0,children:[a.jsx("option",{value:"",children:"Tous les chapitres"}),n.map(K=>a.jsxs("option",{value:K.id,children:[K.numero,". ",K.titre]},K.id))]}),a.jsxs("select",{className:"form-select form-select--sm",value:b,onChange:K=>_(K.target.value),children:[a.jsx("option",{value:"",children:"Tous les types"}),cd.map(K=>a.jsxs("option",{value:K.value,children:[K.icon," ",K.label]},K.value))]}),a.jsxs("select",{className:"form-select form-select--sm",value:N,onChange:K=>w(K.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"premium",children:" Premium"}),a.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),L?a.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des ressources..."})]}):h?f.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),a.jsx("p",{className:"empty-state__message",children:S||b||N||v?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!S&&!b&&!N&&!v&&a.jsx("button",{onClick:Ts,className:"btn btn--primary",children:"Crer la premire ressource"})]}):a.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:f.map(K=>{const ze=$n(K.type);return a.jsxs("div",{className:"resource-item",children:[a.jsx("div",{className:`resource-item__icon resource-item__icon--${K.type}`,style:{backgroundColor:`${ze.color}15`,color:ze.color},children:ze.icon}),a.jsxs("div",{className:"resource-item__content",children:[a.jsxs("div",{className:"resource-item__title",children:[K.titre,K.isPremium&&a.jsx("span",{className:"badge badge--premium",children:"Premium"}),!K.actif&&a.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),a.jsxs("div",{className:"resource-item__meta",children:[a.jsx("span",{children:ze.label}),K.chapitre&&a.jsxs("span",{children:[" ",ia(K.chapitre)]}),K.duree&&a.jsxs("span",{children:[" ",K.duree," min"]}),K.fichierNom&&a.jsxs("span",{children:[" ",K.fichierNom]}),K.tags&&K.tags.length>0&&a.jsxs("span",{children:[" ",K.tags.join(", ")]})]})]}),a.jsxs("div",{className:"resource-item__actions",children:[a.jsx("button",{onClick:()=>Ps(K),className:`table-action-btn ${K.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:K.isPremium?"Passer en gratuit":"Passer en Premium",children:K.isPremium?"":""}),(K.fichierURL||K.urlExterne)&&a.jsx("button",{onClick:()=>Ka(K),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),a.jsx("button",{onClick:()=>en(K),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),a.jsx("button",{onClick:()=>Im(K),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:X===K.id,children:X===K.id?"":""})]})]},K.id)})}):a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-state__icon",children:""}),a.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),a.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),ge&&a.jsx("div",{className:"modal-overlay",onClick:pr,children:a.jsxs("div",{className:"modal modal--xl",onClick:K=>K.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:ce?"Modifier la ressource":"Nouvelle ressource"}),a.jsx("button",{onClick:pr,className:"modal__close",children:""})]}),a.jsxs("form",{onSubmit:$m,children:[a.jsxs("div",{className:"modal__body",children:[!ce&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),a.jsxs("select",{name:"disciplineId",className:`form-select ${ke.disciplineId?"form-select--error":""}`,value:G.disciplineId,onChange:pt,children:[a.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(K=>a.jsxs("option",{value:K.id,children:[K.icone," ",K.nom," (",K.classe,")"]},K.id))]}),ke.disciplineId&&a.jsx("span",{className:"form-error",children:ke.disciplineId})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",style:{flex:2},children:[a.jsx("label",{className:"form-label form-label--required",children:"Titre"}),a.jsx("input",{type:"text",name:"titre",className:`form-input ${ke.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:G.titre,onChange:pt}),ke.titre&&a.jsx("span",{className:"form-error",children:ke.titre})]}),a.jsxs("div",{className:"form-group",style:{flex:1},children:[a.jsx("label",{className:"form-label form-label--required",children:"Type"}),a.jsx("select",{name:"type",className:`form-select ${ke.type?"form-select--error":""}`,value:G.type,onChange:pt,children:cd.map(K=>a.jsxs("option",{value:K.value,children:[K.icon," ",K.label]},K.value))}),ke.type&&a.jsx("span",{className:"form-error",children:ke.type})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),a.jsxs("select",{name:"chapitreId",className:"form-select",value:G.chapitre||"",onChange:pt,disabled:z,children:[a.jsx("option",{value:"",children:"Aucun chapitre"}),n.map(K=>a.jsxs("option",{value:K.id,children:[K.numero,". ",K.titre]},K.id))]})]}),a.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[a.jsx("label",{className:"form-label",children:"Ordre"}),a.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:G.ordre,onChange:pt})]}),a.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[a.jsx("label",{className:"form-label",children:"Dure (min)"}),a.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:G.duree||"",onChange:pt})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:G.description||"",onChange:pt})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:["Fichier",a.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",ud[G.type].join(", ")," - max ",cv," Mo)"]})]}),a.jsxs("div",{className:"file-upload",children:[a.jsx("input",{ref:aa,type:"file",accept:ud[G.type].join(","),onChange:Bn,className:"file-upload__input",id:"file-input"}),!Qe&&!Sn?a.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[a.jsx("div",{className:"file-upload__icon",children:""}),a.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),a.jsx("p",{className:"file-upload__hint",children:ud[G.type].join(", ")})]}):a.jsxs("div",{className:"file-upload__preview",children:[Qe?.type.startsWith("image/")&&Sn&&a.jsx("img",{src:Sn,alt:"Aperu",className:"file-preview__image"}),Qe?.type.startsWith("video/")&&Sn&&a.jsx("video",{src:Sn,controls:!0,className:"file-preview__video"}),!Qe?.type.startsWith("image/")&&!Qe?.type.startsWith("video/")&&a.jsx("div",{className:"file-preview__document",children:a.jsx("span",{className:"file-preview__icon",children:$n(G.type).icon})}),a.jsxs("div",{className:"file-preview__info",children:[a.jsx("p",{className:"file-preview__name",children:Qe?.name||ce?.fichierNom}),Qe&&a.jsx("p",{className:"file-preview__size",children:qi(Qe.size)})]}),a.jsx("button",{type:"button",onClick:br,className:"file-preview__remove",children:""})]})]}),ke.fichier&&a.jsx("span",{className:"form-error",children:ke.fichier}),le&&a.jsxs("div",{className:"upload-progress",children:[a.jsx("div",{className:"upload-progress__bar",style:{width:`${Q}%`}}),a.jsxs("span",{className:"upload-progress__text",children:[Q,"%"]})]})]}),G.type==="video"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),a.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:G.urlExterne||"",onChange:pt}),a.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),G.type==="cours"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Contenu du cours"}),a.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:G.contenu||"",onChange:pt}),a.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsxs("div",{className:"tags-input",children:[a.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:se,onChange:K=>we(K.target.value),onKeyPress:K=>K.key==="Enter"&&(K.preventDefault(),Kc())}),a.jsx("button",{type:"button",onClick:Kc,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),G.tags&&G.tags.length>0&&a.jsx("div",{className:"tags-list",children:G.tags.map((K,ze)=>a.jsxs("span",{className:"tag",children:[K,a.jsx("button",{type:"button",onClick:()=>Bm(ze),className:"tag__remove",children:""})]},ze))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Options"}),a.jsxs("div",{className:"form-options",children:[a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"isPremium",checked:G.isPremium,onChange:pt}),a.jsx("span",{children:"Contenu Premium "})]}),a.jsxs("label",{className:"form-checkbox",children:[a.jsx("input",{type:"checkbox",name:"actif",checked:G.actif!==!1,onChange:pt}),a.jsx("span",{children:"Ressource active"})]})]})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{type:"button",onClick:pr,className:"btn btn--outline",disabled:k||le,children:"Annuler"}),a.jsx("button",{type:"submit",className:"btn btn--primary",disabled:k||le,children:k||le?le?`Upload ${Q}%...`:"Enregistrement...":ce?"Mettre  jour":"Crer la ressource"})]})]})]})}),he&&R&&a.jsx("div",{className:"modal-overlay",onClick:pr,children:a.jsxs("div",{className:"modal modal--xl",onClick:K=>K.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsxs("h2",{className:"modal__title",children:[$n(R.type).icon," ",R.titre]}),a.jsx("button",{onClick:pr,className:"modal__close",children:""})]}),a.jsxs("div",{className:"modal__body",children:[R.type==="video"&&R.urlExterne?a.jsx("div",{className:"preview-video",children:a.jsx("iframe",{src:R.urlExterne.replace("watch?v=","embed/"),title:R.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):R.fichierURL?a.jsx("div",{className:"preview-file",children:R.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?a.jsx("img",{src:R.fichierURL,alt:R.titre}):R.fichierURL.match(/\.(mp4|webm)$/i)?a.jsx("video",{src:R.fichierURL,controls:!0}):R.fichierURL.match(/\.pdf$/i)?a.jsx("iframe",{src:R.fichierURL,title:R.titre}):a.jsxs("div",{className:"preview-download",children:[a.jsx("span",{className:"preview-download__icon",children:$n(R.type).icon}),a.jsx("p",{children:R.fichierNom}),a.jsx("a",{href:R.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):R.contenu?a.jsx("div",{className:"preview-content",children:a.jsx("p",{children:R.contenu})}):a.jsx("div",{className:"preview-empty",children:a.jsx("p",{children:"Aucun contenu  prvisualiser"})}),a.jsxs("div",{className:"preview-info",children:[R.description&&a.jsx("p",{className:"preview-description",children:R.description}),a.jsxs("div",{className:"preview-meta",children:[a.jsxs("span",{children:["Type : ",$n(R.type).label]}),R.duree&&a.jsxs("span",{children:["Dure : ",R.duree," min"]}),R.isPremium&&a.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),fe&&ne&&a.jsx("div",{className:"modal-overlay",onClick:pr,children:a.jsxs("div",{className:"modal",onClick:K=>K.stopPropagation(),children:[a.jsxs("div",{className:"modal__header",children:[a.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),a.jsx("button",{onClick:pr,className:"modal__close",children:""})]}),a.jsxs("div",{className:"modal__body",children:[a.jsxs("p",{children:["Supprimer la ressource ",a.jsx("strong",{children:ne.titre})," ?"]}),ne.fichierURL&&a.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[a.jsx("span",{className:"alert__icon",children:""}),a.jsx("div",{className:"alert__content",children:a.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),a.jsxs("div",{className:"modal__footer",children:[a.jsx("button",{onClick:pr,className:"btn btn--outline",children:"Annuler"}),a.jsx("button",{onClick:ks,className:"btn btn--danger",disabled:X!==null,children:X?"Suppression...":"Supprimer"})]})]})}),a.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},f2=Oe(pe,"quizzes"),m2=async e=>{try{let t=Ge(f2,wt("titre","asc"));e?.disciplineId;let n=(await $e(t)).docs.map(l=>({id:l.id,...l.data()}));return e?.isPremium,e?.difficulte,n}catch(t){throw console.error("Erreur lors de la rcupration des quiz :",t),t}},gq=async e=>{try{const t=await mr(Ee(pe,"quizzes",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){throw console.error("Erreur lors de la rcupration du quiz :",t),t}},yq=async e=>{try{return(await Ar(f2,{...e,createdAt:Mt.now(),updatedAt:Mt.now()})).id}catch(t){throw console.error("Erreur lors de la cration du quiz :",t),t}},xq=async(e,t)=>{try{await xt(Ee(pe,"quizzes",e),{...t,updatedAt:Mt.now()})}catch(r){throw console.error("Erreur lors de la mise  jour du quiz :",r),r}},bq=async e=>{try{await Mi(Ee(pe,"quizzes",e))}catch(t){throw console.error("Erreur lors de la suppression du quiz :",t),t}},jq=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,X_=()=>({id:jq(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),W_=e=>{const t=e.questions||[],r=t.reduce((l,o)=>l+(o.points||1),0),n={facile:t.filter(l=>l.difficulte==="facile").length,moyen:t.filter(l=>l.difficulte==="moyen").length,difficile:t.filter(l=>l.difficulte==="difficile").length};return{nombreQuestions:t.length,totalPoints:r,parDifficulte:n,duree:e.duree||0}},Nq=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[l,o]=j.useState(!0),[u,f]=j.useState(null),[m,h]=j.useState(null),[p,v]=j.useState(""),[y,b]=j.useState(""),[_,N]=j.useState(""),[w,S]=j.useState(""),[O,C]=j.useState(!1),[E,z]=j.useState("list"),[M,L]=j.useState(null),[T,k]=j.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[Y,X]=j.useState(null),[B,le]=j.useState(!1),[ue,Q]=j.useState(null),[P,J]=j.useState(null),[H,ve]=j.useState({}),[I,ge]=j.useState(!1),ee=j.useCallback(async()=>{o(!0),f(null);try{const[se,we]=await Promise.all([m2(),Ti.getAll()]);t(se),n(we.map(Me=>({id:Me.id,nom:Me.nom||Me.name||Me.id})))}catch(se){f("Erreur lors du chargement des donnes."),console.error(se)}finally{o(!1)}},[]);j.useEffect(()=>{ee()},[ee]),j.useEffect(()=>{if(m){const se=setTimeout(()=>h(null),4e3);return()=>clearTimeout(se)}},[m]);const fe=e.filter(se=>{if(p){const we=p.toLowerCase();if(!se.titre.toLowerCase().includes(we))return!1}return!(y&&se.disciplineId!==y||_==="true"&&!se.isPremium||_==="false"&&se.isPremium||w&&!se.questions?.some(Me=>Me.difficulte===w))}),ye=()=>{L(null),k({disciplineId:"",titre:"",questions:[X_()],duree:15,isPremium:!1,noteMinimale:50}),X(null),z("form")},he=se=>{L(se),k({disciplineId:se.disciplineId,titre:se.titre,questions:se.questions||[],duree:se.duree||15,isPremium:se.isPremium||!1,noteMinimale:se.noteMinimale||50}),X(null),z("form")},$=async()=>{if(!T.titre.trim()){f("Le titre du quiz est obligatoire.");return}if(!T.disciplineId){f("Veuillez slectionner une discipline.");return}if(T.questions.length===0){f("Le quiz doit contenir au moins une question.");return}for(let se=0;se<T.questions.length;se++){const we=T.questions[se];if(!we.question.trim()){f(`La question ${se+1} n'a pas d'nonc.`);return}if(we.options.filter(Re=>!Re.trim()).length>0){f(`La question ${se+1} a des options vides.`);return}}le(!0),f(null);try{M?(await xq(M.id,T),h("Quiz mis  jour avec succs !")):(await yq(T),h("Quiz cr avec succs !")),await ee(),z("list")}catch(se){f("Erreur lors de la sauvegarde du quiz."),console.error(se)}finally{le(!1)}},ce=async se=>{try{await bq(se),h("Quiz supprim avec succs."),Q(null),await ee()}catch(we){f("Erreur lors de la suppression du quiz."),console.error(we)}},Se=()=>{const se=X_();k(we=>({...we,questions:[...we.questions,se]})),X(se.id)},ne=se=>{const we=T.questions.find(hr=>hr.id===se);if(!we)return;const Me={...we,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${we.question} (copie)`},Re=T.questions.findIndex(hr=>hr.id===se),bt=[...T.questions];bt.splice(Re+1,0,Me),k(hr=>({...hr,questions:bt})),X(Me.id)},F=se=>{k(we=>({...we,questions:we.questions.filter(Me=>Me.id!==se)})),Y===se&&X(null)},R=(se,we,Me)=>{k(Re=>({...Re,questions:Re.questions.map(bt=>bt.id===se?{...bt,[we]:Me}:bt)}))},ae=(se,we,Me)=>{k(Re=>({...Re,questions:Re.questions.map(bt=>bt.id===se?{...bt,options:bt.options.map((hr,In)=>In===we?Me:hr)}:bt)}))},G=se=>{J(se),ve({}),ge(!1),z("preview")},xe=(se,we)=>{I||ve(Me=>({...Me,[se]:we}))},ke=()=>{ge(!0)},qe=se=>r.find(we=>we.id===se)?.nom||se,Qe=({level:se})=>{const we={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return a.jsx("span",{className:`quiz-badge ${we[se]||"quiz-badge-moyen"}`,children:se.charAt(0).toUpperCase()+se.slice(1)})},Gt=()=>a.jsxs(a.Fragment,{children:[u&&a.jsxs("div",{className:"admin-message admin-message-error",children:[a.jsx($d,{size:18}),a.jsx("span",{children:u}),a.jsx("button",{onClick:()=>f(null),className:"admin-message-close",children:a.jsx(Ai,{size:16})})]}),m&&a.jsxs("div",{className:"admin-message admin-message-success",children:[a.jsx(Ot,{size:18}),a.jsx("span",{children:m})]})]}),Sn=()=>a.jsxs("div",{className:"quiz-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(xn,{size:24})," Gestion des Quiz"]}),a.jsxs("p",{className:"admin-subtitle",children:[e.length," quiz au total  ",fe.length," affich(s)"]})]}),a.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ye,children:[a.jsx(ic,{size:18})," Nouveau Quiz"]})]}),a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"admin-search-wrapper",children:[a.jsx(i2,{size:18,className:"admin-search-icon"}),a.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:p,onChange:se=>v(se.target.value)})]}),a.jsxs("button",{className:`admin-btn admin-btn-outline ${O?"active":""}`,onClick:()=>C(!O),children:[a.jsx(Jy,{size:16})," Filtres",O?a.jsx(Vg,{size:14}):a.jsx(Bd,{size:14})]})]}),O&&a.jsxs("div",{className:"admin-filters-panel",children:[a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Discipline"}),a.jsxs("select",{className:"admin-select",value:y,onChange:se=>b(se.target.value),children:[a.jsx("option",{value:"",children:"Toutes les disciplines"}),r.map(se=>a.jsx("option",{value:se.id,children:se.nom},se.id))]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Accs"}),a.jsxs("select",{className:"admin-select",value:_,onChange:se=>N(se.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"false",children:"Gratuit"}),a.jsx("option",{value:"true",children:"Premium"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Difficult"}),a.jsxs("select",{className:"admin-select",value:w,onChange:se=>S(se.target.value),children:[a.jsx("option",{value:"",children:"Toutes"}),a.jsx("option",{value:"facile",children:"Facile"}),a.jsx("option",{value:"moyen",children:"Moyen"}),a.jsx("option",{value:"difficile",children:"Difficile"})]})]}),a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{b(""),N(""),S(""),v("")},children:"Rinitialiser"})]}),l?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des quiz..."})]}):fe.length===0?a.jsxs("div",{className:"admin-empty-state",children:[a.jsx(Md,{size:48}),a.jsx("h3",{children:"Aucun quiz trouv"}),a.jsx("p",{children:e.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),e.length===0&&a.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ye,children:[a.jsx(ic,{size:18})," Crer un quiz"]})]}):a.jsx("div",{className:"quiz-grid",children:fe.map(se=>{const we=W_(se);return a.jsxs("div",{className:"quiz-card",children:[a.jsxs("div",{className:"quiz-card-header",children:[a.jsxs("div",{className:"quiz-card-title-row",children:[a.jsx("h3",{className:"quiz-card-title",children:se.titre}),se.isPremium&&a.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[a.jsx(Yr,{size:12})," Premium"]})]}),a.jsx("span",{className:"quiz-card-discipline",children:qe(se.disciplineId)})]}),a.jsxs("div",{className:"quiz-card-stats",children:[a.jsxs("div",{className:"quiz-stat",children:[a.jsx(Md,{size:14}),a.jsxs("span",{children:[we.nombreQuestions," question(s)"]})]}),a.jsxs("div",{className:"quiz-stat",children:[a.jsx(Oi,{size:14}),a.jsxs("span",{children:[we.totalPoints," pts"]})]}),a.jsxs("div",{className:"quiz-stat",children:[a.jsx(ql,{size:14}),a.jsxs("span",{children:[we.duree," min"]})]})]}),a.jsxs("div",{className:"quiz-card-difficulty",children:[we.parDifficulte.facile>0&&a.jsx(Qe,{level:"facile"}),we.parDifficulte.moyen>0&&a.jsx(Qe,{level:"moyen"}),we.parDifficulte.difficile>0&&a.jsx(Qe,{level:"difficile"})]}),a.jsxs("div",{className:"quiz-card-actions",children:[a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>G(se),title:"Prvisualiser",children:[a.jsx(Dl,{size:14})," Aperu"]}),a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>he(se),title:"Modifier",children:[a.jsx(EP,{size:14})," Modifier"]}),ue===se.id?a.jsxs("div",{className:"quiz-delete-confirm",children:[a.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>ce(se.id),children:"Confirmer"}),a.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>Q(null),children:"Annuler"})]}):a.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>Q(se.id),title:"Supprimer",children:a.jsx(P_,{size:14})})]})]},se.id)})})]}),Jr=()=>a.jsxs("div",{className:"quiz-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(xn,{size:24}),M?"Modifier le quiz":"Nouveau quiz"]}),a.jsxs("p",{className:"admin-subtitle",children:[T.questions.length," question(s) ajoute(s)"]})]}),a.jsxs("div",{className:"admin-header-actions",children:[a.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>z("list"),children:[a.jsx(Ai,{size:18})," Annuler"]}),a.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:$,disabled:B,children:[a.jsx(OP,{size:18})," ",B?"Enregistrement...":"Enregistrer"]})]})]}),a.jsxs("div",{className:"admin-card quiz-form-section",children:[a.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),a.jsxs("div",{className:"quiz-form-grid",children:[a.jsxs("div",{className:"admin-form-group quiz-form-full",children:[a.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),a.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:T.titre,onChange:se=>k(we=>({...we,titre:se.target.value}))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Discipline *"}),a.jsxs("select",{className:"admin-select",value:T.disciplineId,onChange:se=>k(we=>({...we,disciplineId:se.target.value})),children:[a.jsx("option",{value:"",children:"-- Slectionner --"}),r.map(se=>a.jsx("option",{value:se.id,children:se.nom},se.id))]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),a.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:T.duree,onChange:se=>k(we=>({...we,duree:parseInt(se.target.value)||15}))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),a.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:T.noteMinimale,onChange:se=>k(we=>({...we,noteMinimale:parseInt(se.target.value)||50}))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Accs"}),a.jsxs("div",{className:`quiz-toggle ${T.isPremium?"quiz-toggle-active":""}`,onClick:()=>k(se=>({...se,isPremium:!se.isPremium})),children:[a.jsx(Yr,{size:16}),a.jsx("span",{children:T.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),a.jsxs("div",{className:"admin-card quiz-form-section",children:[a.jsxs("div",{className:"quiz-questions-header",children:[a.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",T.questions.length,")"]}),a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Se,children:[a.jsx(ic,{size:14})," Ajouter une question"]})]}),T.questions.length===0?a.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[a.jsx(Md,{size:36}),a.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):a.jsx("div",{className:"quiz-questions-list",children:T.questions.map((se,we)=>a.jsxs("div",{className:`quiz-question-item ${Y===se.id?"expanded":""}`,children:[a.jsxs("div",{className:"quiz-question-header",onClick:()=>X(Y===se.id?null:se.id),children:[a.jsxs("div",{className:"quiz-question-header-left",children:[a.jsx(zP,{size:16,className:"quiz-grip-icon"}),a.jsxs("span",{className:"quiz-question-number",children:["Q",we+1]}),a.jsx("span",{className:"quiz-question-preview",children:se.question||"Question sans nonc..."})]}),a.jsxs("div",{className:"quiz-question-header-right",children:[a.jsx(Qe,{level:se.difficulte||"moyen"}),a.jsxs("span",{className:"quiz-question-points",children:[se.points," pt(s)"]}),Y===se.id?a.jsx(Vg,{size:16}):a.jsx(Bd,{size:16})]})]}),Y===se.id&&a.jsxs("div",{className:"quiz-question-body",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"nonc de la question *"}),a.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:se.question,onChange:Me=>R(se.id,"question",Me.target.value)})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),a.jsx("div",{className:"quiz-options-grid",children:se.options.map((Me,Re)=>a.jsxs("div",{className:`quiz-option-item ${se.reponseCorrecte===Re?"quiz-option-correct":""}`,children:[a.jsx("button",{type:"button",className:`quiz-option-radio ${se.reponseCorrecte===Re?"active":""}`,onClick:()=>R(se.id,"reponseCorrecte",Re),title:se.reponseCorrecte===Re?"Bonne rponse":"Marquer comme bonne rponse",children:se.reponseCorrecte===Re?a.jsx(Ot,{size:16}):a.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+Re)})}),a.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+Re)}`,value:Me,onChange:bt=>ae(se.id,Re,bt.target.value)})]},Re))})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),a.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:se.explication,onChange:Me=>R(se.id,"explication",Me.target.value)})]}),a.jsxs("div",{className:"quiz-question-meta",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Difficult"}),a.jsxs("select",{className:"admin-select",value:se.difficulte,onChange:Me=>R(se.id,"difficulte",Me.target.value),children:[a.jsx("option",{value:"facile",children:"Facile"}),a.jsx("option",{value:"moyen",children:"Moyen"}),a.jsx("option",{value:"difficile",children:"Difficile"})]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{className:"admin-label",children:"Points"}),a.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:se.points,onChange:Me=>R(se.id,"points",parseInt(Me.target.value)||1)})]})]}),a.jsxs("div",{className:"quiz-question-actions",children:[a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ne(se.id),children:[a.jsx(DP,{size:14})," Dupliquer"]}),a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>F(se.id),children:[a.jsx(P_,{size:14})," Supprimer"]})]})]})]},se.id))}),T.questions.length>0&&a.jsx("div",{className:"quiz-add-question-bottom",children:a.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Se,children:[a.jsx(ic,{size:16})," Ajouter une question"]})})]})]}),aa=()=>{if(!P)return null;const se=W_(P);let we=0,Me=0;return I&&P.questions.forEach(Re=>{Me+=Re.points||1,H[Re.id]===Re.reponseCorrecte&&(we+=Re.points||1)}),a.jsxs("div",{className:"quiz-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(Dl,{size:24})," Prvisualisation : ",P.titre]}),a.jsxs("p",{className:"admin-subtitle",children:[qe(P.disciplineId),"  ",se.nombreQuestions," questions  ",se.duree," min"]})]}),a.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{z("list"),J(null)},children:[a.jsx(Ai,{size:18})," Fermer"]})]}),I&&a.jsxs("div",{className:`quiz-preview-score ${we/Me>=(P.noteMinimale||50)/100?"success":"fail"}`,children:[a.jsx(Oi,{size:32}),a.jsxs("div",{children:[a.jsxs("h3",{children:["Score : ",we,"/",Me," (",Math.round(we/Me*100),"%)"]}),a.jsxs("p",{children:["Note minimale : ",P.noteMinimale||50,"% "," ",we/Me>=(P.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),a.jsx("div",{className:"quiz-preview-questions",children:P.questions.map((Re,bt)=>{const hr=H[Re.id],In=hr===Re.reponseCorrecte;return a.jsxs("div",{className:"admin-card quiz-preview-question",children:[a.jsxs("div",{className:"quiz-preview-question-header",children:[a.jsxs("span",{className:"quiz-question-number",children:["Q",bt+1]}),a.jsx(Qe,{level:Re.difficulte||"moyen"}),a.jsxs("span",{className:"quiz-question-points",children:[Re.points," pt(s)"]})]}),a.jsx("p",{className:"quiz-preview-question-text",children:Re.question}),a.jsx("div",{className:"quiz-preview-options",children:Re.options.map((Ts,en)=>{let Ka="quiz-preview-option";return I?en===Re.reponseCorrecte?Ka+=" correct":en===hr&&!In&&(Ka+=" incorrect"):hr===en&&(Ka+=" selected"),a.jsxs("button",{className:Ka,onClick:()=>xe(Re.id,en),disabled:I,children:[a.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+en)}),a.jsx("span",{children:Ts}),I&&en===Re.reponseCorrecte&&a.jsx(Ot,{size:16,className:"quiz-preview-check"})]},en)})}),I&&Re.explication&&a.jsxs("div",{className:"quiz-preview-explication",children:[a.jsx("strong",{children:"Explication :"})," ",Re.explication]})]},Re.id)})}),!I&&a.jsx("div",{className:"quiz-preview-submit",children:a.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:ke,disabled:Object.keys(H).length<P.questions.length,children:[a.jsx(Ot,{size:18})," Soumettre (",Object.keys(H).length,"/",P.questions.length,")"]})})]})};return a.jsxs("div",{className:"admin-container",children:[Gt(),E==="list"&&Sn(),E==="form"&&Jr(),E==="preview"&&aa()]})},h2=Oe(pe,"users"),_q=Oe(pe,"quizResults"),wq=async e=>{try{let t=Ge(h2,wt("displayName","asc"));e?.role;let n=(await $e(t)).docs.map(l=>({uid:l.id,...l.data()}));return e?.isPremium,e?.isActive,e?.search,n}catch(t){throw console.error("Erreur lors de la rcupration des utilisateurs :",t),t}},Sq=async(e,t)=>{try{await xt(Ee(pe,"users",e),{role:t,updatedAt:Mt.now()})}catch(r){throw console.error("Erreur lors de la mise  jour du rle :",r),r}},Aq=async(e,t)=>{try{const r={isPremium:t,updatedAt:Mt.now()};if(t){const n=new Date;n.setDate(n.getDate()+30),r.subscriptionEnd=Mt.fromDate(n)}else r.subscriptionEnd=null;await xt(Ee(pe,"users",e),r)}catch(r){throw console.error("Erreur lors de la mise  jour du statut Premium :",r),r}},Cq=async(e,t)=>{try{await xt(Ee(pe,"users",e),{isActive:t,updatedAt:Mt.now()})}catch(r){throw console.error("Erreur lors du changement de statut du compte :",r),r}},Eq=async e=>{try{const t=Ge(_q,Ie("userId","==",e)),n=(await $e(t)).docs.map(m=>({id:m.id,...m.data()})),l=n.length,o=n.filter(m=>m.reussi).length,u=l>0?Math.round(n.reduce((m,h)=>m+h.score,0)/l):0,f=n.length>0?new Date(Math.max(...n.map(m=>{const h=m.datePassage;return h?.toDate?h.toDate().getTime():new Date(h).getTime()}))):null;return{totalQuizPasses:l,scoresMoyens:u,quizReussis:o,dernierQuiz:f}}catch(t){return console.error("Erreur lors du calcul des statistiques :",t),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},Oq=async()=>{try{const t=(await $e(h2)).docs.map(r=>r.data());return{total:t.length,admins:t.filter(r=>r.role==="admin").length,profs:t.filter(r=>r.role==="prof").length,eleves:t.filter(r=>r.role==="eleve").length,premium:t.filter(r=>r.isPremium).length,actifs:t.filter(r=>r.isActive!==!1).length}}catch(e){throw console.error("Erreur lors du calcul des stats globales :",e),e}},zq=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(null),[l,o]=j.useState(!0),[u,f]=j.useState(null),[m,h]=j.useState(null),[p,v]=j.useState(""),[y,b]=j.useState(""),[_,N]=j.useState(""),[w,S]=j.useState(""),[O,C]=j.useState(!1),[E]=Zk();j.useEffect(()=>{E.get("filter")==="premium"&&N("true")},[E]);const[z,M]=j.useState(null),[L,T]=j.useState(null),[k,Y]=j.useState(!1),[X,B]=j.useState(null),[le,ue]=j.useState(null),Q=j.useCallback(async()=>{o(!0),f(null);try{const[$,ce]=await Promise.all([wq(),Oq()]);t($),n(ce)}catch($){f("Erreur lors du chargement des utilisateurs."),console.error($)}finally{o(!1)}},[]);j.useEffect(()=>{Q()},[Q]),j.useEffect(()=>{if(m){const $=setTimeout(()=>h(null),4e3);return()=>clearTimeout($)}},[m]);const P=e.filter($=>{if(p){const ce=p.toLowerCase();if(!$.displayName?.toLowerCase().includes(ce)&&!$.email?.toLowerCase().includes(ce))return!1}return!(y&&$.role!==y||_==="true"&&!$.isPremium||_==="false"&&$.isPremium||w==="true"&&$.isActive===!1||w==="false"&&$.isActive!==!1)}),J=async $=>{M($),Y(!0);try{const ce=await Eq($.uid);T(ce)}catch(ce){console.error("Erreur lors du chargement des statistiques :",ce),T(null)}finally{Y(!1)}},H=async()=>{if(le){B(le.userId);try{switch(le.type){case"role":await Sq(le.userId,le.value),h("Rle mis  jour avec succs.");break;case"premium":await Aq(le.userId,le.value),h(le.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await Cq(le.userId,le.value),h(le.value?"Compte ractiv.":"Compte dsactiv.");break}await Q()}catch($){f("Erreur lors de l'excution de l'action."),console.error($)}finally{B(null),ue(null)}}},ve=({role:$})=>{const ce={admin:{icon:a.jsx(Zy,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:a.jsx(Pl,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:a.jsx(xn,{size:12}),className:"user-badge-eleve",label:"lve"}},Se=ce[$]||ce.eleve;return a.jsxs("span",{className:`user-badge ${Se.className}`,children:[Se.icon," ",Se.label]})},I=$=>$?($?.toDate?$.toDate():new Date($)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",ge=$=>$?$.charAt(0).toUpperCase():"?",ee=()=>a.jsxs(a.Fragment,{children:[u&&a.jsxs("div",{className:"admin-message admin-message-error",children:[a.jsx($d,{size:18}),a.jsx("span",{children:u}),a.jsx("button",{onClick:()=>f(null),className:"admin-message-close",children:a.jsx(Ai,{size:16})})]}),m&&a.jsxs("div",{className:"admin-message admin-message-success",children:[a.jsx(Ot,{size:18}),a.jsx("span",{children:m})]})]}),fe=()=>{if(!r)return null;const $=[{label:"Total",value:r.total,icon:a.jsx(Dd,{size:20}),color:"stat-blue"},{label:"lves",value:r.eleves,icon:a.jsx(xn,{size:20}),color:"stat-green"},{label:"Professeurs",value:r.profs,icon:a.jsx(Pl,{size:20}),color:"stat-purple"},{label:"Premium",value:r.premium,icon:a.jsx(Yr,{size:20}),color:"stat-gold"}];return a.jsx("div",{className:"user-stats-grid",children:$.map(ce=>a.jsxs("div",{className:`user-stat-card ${ce.color}`,children:[a.jsx("div",{className:"user-stat-icon",children:ce.icon}),a.jsxs("div",{className:"user-stat-info",children:[a.jsx("span",{className:"user-stat-value",children:ce.value}),a.jsx("span",{className:"user-stat-label",children:ce.label})]})]},ce.label))})},ye=()=>le?a.jsx("div",{className:"admin-modal-overlay",onClick:()=>ue(null),children:a.jsxs("div",{className:"admin-modal",onClick:$=>$.stopPropagation(),children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h3",{children:"Confirmer l'action"}),a.jsx("button",{className:"admin-modal-close",onClick:()=>ue(null),children:a.jsx(Ai,{size:20})})]}),a.jsx("div",{className:"admin-modal-body",children:a.jsx("p",{children:le.label})}),a.jsxs("div",{className:"admin-modal-footer",children:[a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>ue(null),children:"Annuler"}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:H,disabled:X===le.userId,children:X===le.userId?"En cours...":"Confirmer"})]})]})}):null,he=()=>z?a.jsx("div",{className:"admin-modal-overlay",onClick:()=>M(null),children:a.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:$=>$.stopPropagation(),children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h3",{children:"Dtail de l'utilisateur"}),a.jsx("button",{className:"admin-modal-close",onClick:()=>M(null),children:a.jsx(Ai,{size:20})})]}),a.jsxs("div",{className:"admin-modal-body",children:[a.jsxs("div",{className:"user-detail-profile",children:[a.jsx("div",{className:"user-detail-avatar",children:ge(z.displayName)}),a.jsxs("div",{className:"user-detail-info",children:[a.jsx("h4",{children:z.displayName||"Sans nom"}),a.jsx("p",{children:z.email}),a.jsxs("div",{className:"user-detail-badges",children:[a.jsx(ve,{role:z.role}),z.isPremium&&a.jsxs("span",{className:"user-badge user-badge-premium",children:[a.jsx(Yr,{size:12})," Premium"]}),a.jsx("span",{className:`user-badge ${z.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:z.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),a.jsxs("div",{className:"user-detail-dates",children:[a.jsxs("div",{children:[a.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),a.jsx("span",{children:I(z.createdAt)})]}),z.isPremium&&z.subscriptionEnd&&a.jsxs("div",{children:[a.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),a.jsx("span",{children:I(z.subscriptionEnd)})]})]}),a.jsxs("div",{className:"user-detail-stats-section",children:[a.jsxs("h4",{children:[a.jsx(ms,{size:18})," Statistiques"]}),k?a.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des statistiques..."})]}):L?a.jsxs("div",{className:"user-detail-stats-grid",children:[a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(xn,{size:20}),a.jsx("span",{className:"user-detail-stat-value",children:L.totalQuizPasses}),a.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(sc,{size:20}),a.jsxs("span",{className:"user-detail-stat-value",children:[L.scoresMoyens,"%"]}),a.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(Oi,{size:20}),a.jsx("span",{className:"user-detail-stat-value",children:L.quizReussis}),a.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),a.jsxs("div",{className:"user-detail-stat",children:[a.jsx(ql,{size:20}),a.jsx("span",{className:"user-detail-stat-value",children:L.dernierQuiz?I(L.dernierQuiz):"Aucun"}),a.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):a.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return a.jsxs("div",{className:"admin-container",children:[ee(),ye(),he(),a.jsxs("div",{className:"user-manager",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"admin-title",children:[a.jsx(Dd,{size:24})," Gestion des Utilisateurs"]}),a.jsxs("p",{className:"admin-subtitle",children:[e.length," utilisateur(s) au total  ",P.length," affich(s)"]})]}),a.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Q,children:[a.jsx(MP,{size:16})," Actualiser"]})]}),fe(),a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"admin-search-wrapper",children:[a.jsx(i2,{size:18,className:"admin-search-icon"}),a.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:p,onChange:$=>v($.target.value)})]}),a.jsxs("button",{className:`admin-btn admin-btn-outline ${O?"active":""}`,onClick:()=>C(!O),children:[a.jsx(Jy,{size:16})," Filtres",O?a.jsx(Vg,{size:14}):a.jsx(Bd,{size:14})]})]}),O&&a.jsxs("div",{className:"admin-filters-panel",children:[a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Rle"}),a.jsxs("select",{className:"admin-select",value:y,onChange:$=>b($.target.value),children:[a.jsx("option",{value:"",children:"Tous les rles"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"prof",children:"Professeur"}),a.jsx("option",{value:"eleve",children:"lve"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),a.jsxs("select",{className:"admin-select",value:_,onChange:$=>N($.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"true",children:"Premium"}),a.jsx("option",{value:"false",children:"Gratuit"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Statut"}),a.jsxs("select",{className:"admin-select",value:w,onChange:$=>S($.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"true",children:"Actifs"}),a.jsx("option",{value:"false",children:"Dsactivs"})]})]}),a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{b(""),N(""),S(""),v("")},children:"Rinitialiser"})]}),l?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des utilisateurs..."})]}):P.length===0?a.jsxs("div",{className:"admin-empty-state",children:[a.jsx(Dd,{size:48}),a.jsx("h3",{children:"Aucun utilisateur trouv"}),a.jsx("p",{children:e.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):a.jsx("div",{className:"user-table-wrapper",children:a.jsxs("table",{className:"user-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Utilisateur"}),a.jsx("th",{children:"Rle"}),a.jsx("th",{children:"Abonnement"}),a.jsx("th",{children:"Statut"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:P.map($=>a.jsxs("tr",{className:$.isActive===!1?"user-row-inactive":"",children:[a.jsx("td",{children:a.jsxs("div",{className:"user-cell-info",children:[a.jsx("div",{className:"user-avatar-sm",children:ge($.displayName)}),a.jsxs("div",{children:[a.jsx("span",{className:"user-cell-name",children:$.displayName||"Sans nom"}),a.jsx("span",{className:"user-cell-email",children:$.email})]})]})}),a.jsx("td",{children:a.jsxs("select",{className:"admin-select admin-select-sm",value:$.role,onChange:ce=>ue({type:"role",userId:$.uid,value:ce.target.value,label:`Changer le rle de "${$.displayName||$.email}" en "${ce.target.value}" ?`}),children:[a.jsx("option",{value:"eleve",children:"lve"}),a.jsx("option",{value:"prof",children:"Professeur"}),a.jsx("option",{value:"admin",children:"Admin"})]})}),a.jsx("td",{children:a.jsx("button",{className:`user-premium-toggle ${$.isPremium?"active":""}`,onClick:()=>ue({type:"premium",userId:$.uid,value:!$.isPremium,label:$.isPremium?`Dsactiver le statut Premium de "${$.displayName||$.email}" ?`:`Activer le statut Premium de "${$.displayName||$.email}" pour 30 jours ?`}),disabled:X===$.uid,children:$.isPremium?a.jsxs(a.Fragment,{children:[a.jsx(ac,{size:14})," Premium"]}):a.jsxs(a.Fragment,{children:[a.jsx(Yr,{size:14})," Gratuit"]})})}),a.jsx("td",{children:a.jsx("button",{className:`user-status-toggle ${$.isActive!==!1?"active":"inactive"}`,onClick:()=>ue({type:"active",userId:$.uid,value:$.isActive===!1,label:$.isActive===!1?`Ractiver le compte de "${$.displayName||$.email}" ?`:`Dsactiver le compte de "${$.displayName||$.email}" ?`}),disabled:X===$.uid,children:$.isActive!==!1?a.jsxs(a.Fragment,{children:[a.jsx(TP,{size:14})," Actif"]}):a.jsxs(a.Fragment,{children:[a.jsx(kP,{size:14})," Dsactiv"]})})}),a.jsx("td",{children:a.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>J($),title:"Voir les statistiques",children:[a.jsx(Dl,{size:14})," Dtail"]})})]},$.uid))})]})})]})]})},Dq=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(null),[l,o]=j.useState(!0),[u,f]=j.useState(null),[m,h]=j.useState(""),[p,v]=j.useState(""),[y,b]=j.useState(""),[_,N]=j.useState(!1),w=j.useCallback(async()=>{try{o(!0),f(null);const z=await $e(Oe(pe,"users")),M=new Map;z.docs.forEach(fe=>{const ye=fe.data();M.set(fe.id,{name:ye.displayName||"Sans nom",email:ye.email||""})});const L=await $e(Oe(pe,"quizzes")),T=new Map;L.docs.forEach(fe=>{const ye=fe.data();T.set(fe.id,{titre:ye.titre||ye.quizTitre||"Quiz sans titre",discipline:ye.disciplineNom||ye.matiereNom||""})});const k=await $e(Oe(pe,"quizzes_v2")),Y=new Map;k.docs.forEach(fe=>{const ye=fe.data();Y.set(fe.id,{titre:ye.titre||"Quiz avanc sans titre",discipline:ye.disciplineNom||""})});const X=[];try{(await $e(Ge(Oe(pe,"quiz_results"),wt("datePassage","desc"),Jn(200)))).docs.forEach(ye=>{const he=ye.data(),$=M.get(he.userId)||{name:"Inconnu",email:""},ce=T.get(he.quizId)||{titre:he.quizTitre||"Quiz",discipline:he.disciplineNom||""},Se=he.pourcentage??(he.totalPoints>0?Math.round(he.score/he.totalPoints*100):he.score>0?Math.round(he.score/20*100):0);X.push({id:ye.id,quizId:he.quizId||"",quizTitre:ce.titre,userId:he.userId||"",userName:$.name,userEmail:$.email,score:he.score||0,scoreMax:he.totalPoints||20,pourcentage:Se,reussi:he.reussi??Se>=50,tempsEcoule:he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:ce.discipline})})}catch(fe){console.warn("Pas de rsultats v1 ou index manquant:",fe)}const B=[];try{(await $e(Ge(Oe(pe,"quiz_results_v2"),wt("datePassage","desc"),Jn(200)))).docs.forEach(ye=>{const he=ye.data(),$=M.get(he.userId)||{name:"Inconnu",email:""},ce=Y.get(he.quizId)||{titre:he.quizTitre||"Quiz avanc",discipline:he.disciplineNom||""},Se=he.scoreMax>0?Math.round(he.score/he.scoreMax*100):0;B.push({id:ye.id,quizId:he.quizId||"",quizTitre:ce.titre,userId:he.userId||"",userName:$.name,userEmail:$.email,score:he.score||0,scoreMax:he.scoreMax||0,pourcentage:Se,reussi:he.reussi??Se>=50,tempsEcoule:he.tempsTotal||he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:ce.discipline})})}catch(fe){console.warn("Pas de rsultats v2 ou index manquant:",fe)}const le=[...X,...B].sort((fe,ye)=>ye.datePassage.getTime()-fe.datePassage.getTime());t(le);const ue=new Date,Q=new Date(ue.getFullYear(),ue.getMonth(),ue.getDate()),P=new Date(Q.getTime()-10080*60*1e3),J=le.length,H=J>0?Math.round(le.reduce((fe,ye)=>fe+ye.pourcentage,0)/J):0,ve=J>0?Math.round(le.filter(fe=>fe.reussi).length/J*100):0,I=J>0?Math.round(le.reduce((fe,ye)=>fe+ye.tempsEcoule,0)/J):0,ge=le.filter(fe=>fe.datePassage>=Q).length,ee=le.filter(fe=>fe.datePassage>=P).length;n({totalResultats:J,moyenneGenerale:H,tauxReussite:ve,tempsEcouleMoyen:I,resultatsAujourdHui:ge,resultats7Jours:ee})}catch(z){console.error("Erreur chargement rsultats:",z),f("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);j.useEffect(()=>{w()},[w]);const S=e.filter(z=>{if(m&&z.type!==m||p==="true"&&!z.reussi||p==="false"&&z.reussi)return!1;if(y){const M=y.toLowerCase();if(!z.userName.toLowerCase().includes(M)&&!z.userEmail.toLowerCase().includes(M)&&!z.quizTitre.toLowerCase().includes(M)&&!z.disciplineNom.toLowerCase().includes(M))return!1}return!0}),O=z=>{if(z<60)return`${z}s`;const M=Math.floor(z/60),L=z%60;return L>0?`${M}min ${L}s`:`${M}min`},C=z=>z.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=z=>z>=80?"results-score--excellent":z>=60?"results-score--bien":z>=40?"results-score--moyen":"results-score--faible";return a.jsxs("div",{className:"results-admin",children:[a.jsxs("div",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),a.jsx("div",{className:"admin-page-header__actions",children:a.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:w,children:" Actualiser"})})]}),r&&a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.totalResultats}),a.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsxs("div",{className:"stat-card__value",children:[r.moyenneGenerale,"%"]}),a.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsxs("div",{className:"stat-card__value",children:[r.tauxReussite,"%"]}),a.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),a.jsxs("div",{className:"stat-card__content",children:[a.jsx("div",{className:"stat-card__value",children:r.resultatsAujourdHui}),a.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"admin-search",children:[a.jsx("span",{className:"admin-search-icon",children:""}),a.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:y,onChange:z=>b(z.target.value)})]}),a.jsx("button",{className:`admin-btn admin-btn-ghost ${_?"active":""}`,onClick:()=>N(!_),children:" Filtres"})]}),_&&a.jsxs("div",{className:"admin-filters-panel",children:[a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),a.jsxs("select",{className:"admin-select",value:m,onChange:z=>h(z.target.value),children:[a.jsx("option",{value:"",children:"Tous les types"}),a.jsx("option",{value:"classique",children:"Classique (v1)"}),a.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),a.jsxs("div",{className:"admin-filter-group",children:[a.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),a.jsxs("select",{className:"admin-select",value:p,onChange:z=>v(z.target.value),children:[a.jsx("option",{value:"",children:"Tous"}),a.jsx("option",{value:"true",children:"Russis"}),a.jsx("option",{value:"false",children:"chous"})]})]}),a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{h(""),v(""),b("")},children:"Rinitialiser"})]}),l?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des rsultats..."})]}):u?a.jsxs("div",{className:"admin-error",children:[a.jsxs("p",{children:[" ",u]}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:w,children:"Ressayer"})]}):S.length===0?a.jsxs("div",{className:"admin-empty-state",children:[a.jsx("span",{style:{fontSize:"3rem"},children:""}),a.jsx("h3",{children:"Aucun rsultat trouv"}),a.jsx("p",{children:e.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):a.jsxs("div",{className:"results-table-wrapper",children:[a.jsxs("table",{className:"results-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"lve"}),a.jsx("th",{children:"Quiz"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Score"}),a.jsx("th",{children:"Rsultat"}),a.jsx("th",{children:"Dure"}),a.jsx("th",{children:"Date"})]})}),a.jsx("tbody",{children:S.map(z=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"results-cell-user",children:[a.jsx("span",{className:"results-cell-name",children:z.userName}),a.jsx("span",{className:"results-cell-email",children:z.userEmail})]})}),a.jsx("td",{children:a.jsxs("div",{className:"results-cell-quiz",children:[a.jsx("span",{className:"results-cell-quiz-title",children:z.quizTitre}),z.disciplineNom&&a.jsx("span",{className:"results-cell-discipline",children:z.disciplineNom})]})}),a.jsx("td",{children:a.jsx("span",{className:`results-badge results-badge--${z.type}`,children:z.type==="classique"?" Classique":" Avanc"})}),a.jsxs("td",{children:[a.jsxs("span",{className:`results-score ${E(z.pourcentage)}`,children:[z.pourcentage,"%"]}),a.jsxs("span",{className:"results-score-detail",children:[z.score,"/",z.scoreMax]})]}),a.jsx("td",{children:a.jsx("span",{className:`results-status ${z.reussi?"results-status--success":"results-status--fail"}`,children:z.reussi?" Russi":" chou"})}),a.jsx("td",{className:"results-cell-duration",children:O(z.tempsEcoule)}),a.jsx("td",{className:"results-cell-date",children:C(z.datePassage)})]},`${z.type}-${z.id}`))})]}),a.jsx("div",{className:"results-footer",children:a.jsxs("p",{children:[S.length," rsultat",S.length>1?"s":""," affich",S.length>1?"s":"",S.length!==e.length&&` sur ${e.length} au total`]})})]})]})},jl={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},Mq=()=>{const[e,t]=j.useState(jl),[r,n]=j.useState(jl),[l,o]=j.useState(!0),[u,f]=j.useState(!1),[m,h]=j.useState(null),[p,v]=j.useState(null),[y,b]=j.useState(!1),_=j.useCallback(async()=>{try{o(!0),h(null);const C=Ee(pe,"settings","platform"),E=await mr(C);if(E.exists()){const z=E.data(),M={...jl,...z};t(M),n(M)}else t(jl),n(jl)}catch(C){console.error("Erreur chargement paramtres:",C),h("Impossible de charger les paramtres.")}finally{o(!1)}},[]);j.useEffect(()=>{_()},[_]),j.useEffect(()=>{if(p){const C=setTimeout(()=>v(null),4e3);return()=>clearTimeout(C)}},[p]),j.useEffect(()=>{const C=JSON.stringify(e)!==JSON.stringify(r);b(C)},[e,r]);const N=(C,E)=>{t(z=>({...z,[C]:E}))},w=async()=>{try{if(f(!0),h(null),e.premiumMensuel<0||e.premiumAnnuel<0){h("Les tarifs ne peuvent pas tre ngatifs.");return}if(e.quizNoteMinimale<0||e.quizNoteMinimale>20){h("La note minimale doit tre entre 0 et 20.");return}const C=Ee(pe,"settings","platform");await Hf(C,{...e,updatedAt:ct()}),n(e),b(!1),v("Paramtres sauvegards avec succs !")}catch(C){console.error("Erreur sauvegarde paramtres:",C),h("Impossible de sauvegarder les paramtres.")}finally{f(!1)}},S=()=>{t(r),b(!1)},O=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&t(jl)};return l?a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement des paramtres..."})]}):a.jsxs("div",{className:"settings-admin",children:[a.jsxs("div",{className:"admin-page-header",children:[a.jsxs("div",{className:"admin-page-header__info",children:[a.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),a.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),a.jsxs("div",{className:"admin-page-header__actions",children:[y&&a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:S,children:"Annuler"}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:w,disabled:!y||u,children:u?" Sauvegarde...":" Sauvegarder"})]})]}),y&&a.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),m&&a.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",m]}),p&&a.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",p]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),a.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Nom du site"}),a.jsx("input",{type:"text",className:"admin-input",value:e.siteName,onChange:C=>N("siteName",C.target.value)})]}),a.jsxs("div",{className:"settings-field settings-field--full",children:[a.jsx("label",{className:"settings-label",children:"Description"}),a.jsx("input",{type:"text",className:"admin-input",value:e.siteDescription,onChange:C=>N("siteDescription",C.target.value)})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Email de contact"}),a.jsx("input",{type:"email",className:"admin-input",value:e.contactEmail,onChange:C=>N("contactEmail",C.target.value)})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Tlphone"}),a.jsx("input",{type:"tel",className:"admin-input",value:e.contactPhone,onChange:C=>N("contactPhone",C.target.value)})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),a.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),a.jsx("input",{type:"number",className:"admin-input",value:e.premiumMensuel,onChange:C=>N("premiumMensuel",parseInt(C.target.value)||0),min:0,step:500}),a.jsxs("span",{className:"settings-hint",children:["Actuellement : ",e.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),a.jsx("input",{type:"number",className:"admin-input",value:e.premiumAnnuel,onChange:C=>N("premiumAnnuel",parseInt(C.target.value)||0),min:0,step:1e3}),a.jsxs("span",{className:"settings-hint",children:["conomie : ",(e.premiumMensuel*12-e.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),a.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),a.jsx("input",{type:"number",className:"admin-input",value:e.quizDureeDefaut,onChange:C=>N("quizDureeDefaut",parseInt(C.target.value)||0),min:1,max:120})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),a.jsx("input",{type:"number",className:"admin-input",value:e.quizNoteMinimale,onChange:C=>N("quizNoteMinimale",parseInt(C.target.value)||0),min:0,max:20})]}),a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),a.jsx("input",{type:"number",className:"admin-input",value:e.quizTentativesMax,onChange:C=>N("quizTentativesMax",parseInt(C.target.value)||0),min:1,max:10}),a.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-section__header",children:[a.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),a.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("div",{className:"settings-field",children:[a.jsx("label",{className:"settings-label",children:"Mode maintenance"}),a.jsxs("div",{className:"settings-toggle-wrapper",children:[a.jsx("button",{className:`settings-toggle ${e.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>N("maintenanceMode",!e.maintenanceMode),children:a.jsx("span",{className:"settings-toggle__knob"})}),a.jsx("span",{className:`settings-toggle-label ${e.maintenanceMode?"settings-toggle-label--active":""}`,children:e.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),a.jsxs("div",{className:"settings-field settings-field--full",children:[a.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),a.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:e.maintenanceMessage,onChange:C=>N("maintenanceMessage",C.target.value),disabled:!e.maintenanceMode})]})]})]}),a.jsxs("div",{className:"settings-actions",children:[a.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:O,children:" Rinitialiser aux valeurs par dfaut"}),a.jsx("button",{className:"admin-btn admin-btn-primary",onClick:w,disabled:!y||u,children:u?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},Tq=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],kq=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],Pq=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Ma=({value:e,onChange:t,placeholder:r="Saisissez votre texte...",minHeight:n=100,maxHeight:l=400,toolbar:o=Tq,disabled:u=!1,className:f=""})=>{const m=j.useRef(null),h=j.useRef(!1),[p,v]=j.useState(!1),[y,b]=j.useState(!1);j.useEffect(()=>{m.current&&!h.current&&m.current.innerHTML!==e&&(m.current.innerHTML=e||""),h.current=!1},[e]);const _=j.useCallback(()=>{m.current&&(h.current=!0,t(m.current.innerHTML))},[t]),N=j.useCallback((C,E)=>{m.current?.focus(),document.execCommand(C,!1,E),_()},[_]),w=j.useCallback(()=>{const C=prompt("URL du lien :","https://");C&&N("createLink",C)},[N]),S=j.useCallback(()=>{N("removeFormat"),N("formatBlock","p")},[N]);j.useEffect(()=>{const C=()=>{v(!1),b(!1)};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const O=C=>{switch(C){case"bold":return a.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:E=>{E.preventDefault(),N("bold")},children:a.jsx("strong",{children:"G"})},"bold");case"italic":return a.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:E=>{E.preventDefault(),N("italic")},children:a.jsx("em",{children:"I"})},"italic");case"underline":return a.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:E=>{E.preventDefault(),N("underline")},children:a.jsx("u",{children:"S"})},"underline");case"strikethrough":return a.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:E=>{E.preventDefault(),N("strikeThrough")},children:a.jsx("s",{children:"B"})},"strike");case"heading":return a.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:E=>{E.preventDefault(),N("formatBlock","h3")},children:"H"},"heading");case"color":return a.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[a.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{v(!p),b(!1)},children:a.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),p&&a.jsx("div",{className:"rte-color-picker",children:kq.map(E=>a.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E,border:E==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:z=>{z.preventDefault(),N("foreColor",E),v(!1)}},E))})]},"color");case"highlight":return a.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[a.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{b(!y),v(!1)},children:a.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),y&&a.jsx("div",{className:"rte-color-picker",children:Pq.map(E=>a.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E==="transparent"?"#fff":E,border:"1px solid #ccc"},onMouseDown:z=>{z.preventDefault(),N("hiliteColor",E),b(!1)},children:E==="transparent"?"":""},E))})]},"highlight");case"alignLeft":return a.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:E=>{E.preventDefault(),N("justifyLeft")},children:""},"alignL");case"alignCenter":return a.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:E=>{E.preventDefault(),N("justifyCenter")},children:""},"alignC");case"alignRight":return a.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:E=>{E.preventDefault(),N("justifyRight")},children:""},"alignR");case"bulletList":return a.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:E=>{E.preventDefault(),N("insertUnorderedList")},children:""},"ul");case"numberedList":return a.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:E=>{E.preventDefault(),N("insertOrderedList")},children:"1"},"ol");case"subscript":return a.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:E=>{E.preventDefault(),N("subscript")},children:["X",a.jsx("sub",{children:""})]},"sub");case"superscript":return a.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:E=>{E.preventDefault(),N("superscript")},children:["X",a.jsx("sup",{children:""})]},"sup");case"link":return a.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:E=>{E.preventDefault(),w()},children:""},"link");case"clean":return a.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:E=>{E.preventDefault(),S()},children:""},"clean");default:return null}};return a.jsxs("div",{className:`rte-container ${u?"rte-disabled":""} ${f}`,children:[!u&&a.jsx("div",{className:"rte-toolbar",children:o.map(C=>O(C))}),a.jsx("div",{ref:m,className:"rte-editor",contentEditable:!u,onInput:_,onBlur:_,"data-placeholder":r,style:{minHeight:`${n}px`,maxHeight:`${l}px`},suppressContentEditableWarning:!0})]})},Rl={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},Ud={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},Hd={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Bt(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function qq(e,t){const r={id:Bt("q"),type:e,enonce:"",difficulte:"moyen",points:2,ordre:t};switch(e){case"qcm_unique":return{...r,typeData:{options:[{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...r,typeData:{options:[{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!0},{id:Bt("opt"),texte:"",isCorrect:!1},{id:Bt("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...r,typeData:{items:[{id:Bt("item"),texte:"",ordreCorrect:1},{id:Bt("item"),texte:"",ordreCorrect:2},{id:Bt("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...r,typeData:{paires:[{id:Bt("pair"),gauche:"",droite:""},{id:Bt("pair"),gauche:"",droite:""},{id:Bt("pair"),gauche:"",droite:""}]}};case"essai":return{...r,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const zc="quizzes_v2",Rq="quiz_results_v2";async function Lq(e,t){try{const r=await Ar(Oe(pe,zc),{...e,auteurId:t,createdAt:ct(),updatedAt:ct()});return console.log(" Quiz avanc cr :",r.id),r.id}catch(r){throw console.error(" Erreur cration quiz avanc :",r),new Error("Impossible de crer le quiz")}}async function Iq(e,t){try{const r=Ee(pe,zc,e);await xt(r,{...t,updatedAt:ct()}),console.log(" Quiz avanc mis  jour :",e)}catch(r){throw console.error(" Erreur mise  jour quiz :",r),new Error("Impossible de mettre  jour le quiz")}}async function Bq(e){try{await Mi(Ee(pe,zc,e)),console.log(" Quiz avanc supprim :",e)}catch(t){throw console.error(" Erreur suppression quiz :",t),new Error("Impossible de supprimer le quiz")}}async function p2(e){try{const t=await mr(Ee(pe,zc,e));if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||void 0}}catch(t){throw console.error(" Erreur rcupration quiz :",t),new Error("Impossible de rcuprer le quiz")}}async function $q(){try{const e=Ge(Oe(pe,zc),wt("createdAt","desc"));return(await $e(e)).docs.map(r=>{const n=r.data();return{id:r.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}})}catch(e){throw console.error(" Erreur rcupration tous les quiz :",e),new Error("Impossible de rcuprer les quiz")}}function Uq(e,t){let r=0,n=0;const l=[];for(const o of e.questions){n+=o.points;const u=t.find(v=>v.questionId===o.id);if(!u){l.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let f=0,m=!1,h=!1,p=!1;switch(o.type){case"qcm_unique":{const y=o.typeData.options.find(b=>b.isCorrect);y&&u.selectedOptionId===y.id&&(f=o.points,m=!0);break}case"qcm_multiple":{const v=o.typeData,y=v.options.filter(S=>S.isCorrect).map(S=>S.id),b=v.options.filter(S=>!S.isCorrect).map(S=>S.id),_=u.selectedOptionIds||[],N=_.some(S=>b.includes(S)),w=_.filter(S=>y.includes(S)).length;!N&&w===y.length?(f=o.points,m=!0):v.scoringPartiel&&w>0&&!N&&(f=Math.round(o.points*w/y.length*100)/100,h=!0);break}case"drag_drop":{const v=o.typeData,y=u.ordrePropose||[],b=v.items.sort((N,w)=>N.ordreCorrect-w.ordreCorrect).map(N=>N.id);let _=0;for(let N=0;N<b.length;N++)y[N]===b[N]&&_++;_===b.length?(f=o.points,m=!0):_>0&&(f=Math.round(o.points*_/b.length*100)/100,h=!0);break}case"mise_en_relation":{const v=o.typeData,y=u.relationsProposees||{};let b=0;for(const _ of v.paires)y[_.id]===_.id&&b++;b===v.paires.length?(f=o.points,m=!0):b>0&&(f=Math.round(o.points*b/v.paires.length*100)/100,h=!0);break}case"essai":{const v=o.typeData,y=u.texteReponse||"";if(v.correctionMode==="mots_cles"&&v.motsCles.length>0){const b=y.toLowerCase().replace(/<[^>]*>/g,"");let _=0,N=0;for(const w of v.motsCles)_+=w.poids,b.includes(w.mot.toLowerCase())&&(N+=w.poids);_>0&&(f=Math.round(o.points*N/_*100)/100,m=N===_,h=N>0&&N<_)}else p=!0;break}}r+=f,l.push({questionId:o.id,type:o.type,pointsObtenus:f,pointsMax:o.points,isCorrect:m,isPartiel:h,correctionManuelleRequise:p})}return{score:r,scoreMax:n,details:l}}async function Hq(e,t,r,n){try{const{score:l,scoreMax:o,details:u}=Uq(e,r),f=o>0?Math.round(l/o*20*100)/100:0,m=u.some(v=>v.correctionManuelleRequise),h={quizId:e.id,userId:t,reponses:r,score:l,scoreMax:o,note20:f,tempsEcoule:n,datePassage:new Date,reussi:f>=e.noteMinimale,correctionManuelle:m,detailsParQuestion:u},p=await Ar(Oe(pe,Rq),{...h,datePassage:ct()});return console.log(" Rsultat quiz enregistr :",p.id),{id:p.id,...h}}catch(l){throw console.error(" Erreur soumission quiz :",l),new Error("Impossible d'enregistrer le rsultat")}}const Gq=({existingQuiz:e,disciplines:t,auteurId:r,onSave:n,onCancel:l})=>{const[o,u]=j.useState(e?.titre||""),[f,m]=j.useState(e?.description||""),[h,p]=j.useState(e?.disciplineId||""),[v,y]=j.useState(e?.duree||30),[b,_]=j.useState(e?.isPremium??!0),[N,w]=j.useState(e?.noteMinimale||10),[S,O]=j.useState(e?.melangerQuestions??!1),[C,E]=j.useState(e?.melangerOptions??!1),[z,M]=j.useState(e?.afficherCorrection??!0),[L,T]=j.useState(e?.tentativesMax||0),[k,Y]=j.useState(e?.questions||[]),[X,B]=j.useState(null),[le,ue]=j.useState(!1),[Q,P]=j.useState(null),[J,H]=j.useState(!1),ve=j.useCallback($=>{const ce=qq($,k.length+1);Y(Se=>[...Se,ce]),B(k.length),H(!1)},[k.length]),I=j.useCallback($=>{confirm("Supprimer cette question ?")&&(Y(ce=>ce.filter((ne,F)=>F!==$).map((ne,F)=>({...ne,ordre:F+1}))),B(null))},[]),ge=j.useCallback($=>{Y(ce=>{const Se=ce[$],ne={...JSON.parse(JSON.stringify(Se)),id:Bt("q"),ordre:ce.length+1};return[...ce,ne]})},[]),ee=j.useCallback(($,ce)=>{Y(Se=>{const ne=[...Se],F=ce==="up"?$-1:$+1;return F<0||F>=ne.length?Se:([ne[$],ne[F]]=[ne[F],ne[$]],ne.map((R,ae)=>({...R,ordre:ae+1})))}),B(ce==="up"?X!==null?X-1:null:X!==null?X+1:null)},[X]),fe=j.useCallback(($,ce)=>{Y(Se=>Se.map((ne,F)=>F===$?{...ne,...ce}:ne))},[]),ye=async()=>{if(!o.trim()){P("Le titre est obligatoire");return}if(!h){P("Slectionnez une discipline");return}if(k.length===0){P("Ajoutez au moins une question");return}for(let $=0;$<k.length;$++)if(!k[$].enonce.replace(/<[^>]*>/g,"").trim()){P(`La question ${$+1} n'a pas d'nonc`),B($);return}P(null),ue(!0);try{const $={disciplineId:h,titre:o.trim(),description:f.trim()||void 0,questions:k,duree:v,isPremium:b,noteMinimale:N,melangerQuestions:S,melangerOptions:C,afficherCorrection:z,tentativesMax:L};let ce;e?.id?(await Iq(e.id,$),ce=e.id):ce=await Lq($,r),n?.(ce)}catch($){P($.message||"Erreur lors de la sauvegarde")}finally{ue(!1)}},he=k.reduce(($,ce)=>$+ce.points,0);return a.jsxs("div",{className:"quiz-editor",children:[a.jsxs("div",{className:"quiz-editor__header",children:[a.jsx("h2",{children:e?" Modifier le quiz":" Nouveau quiz avanc"}),a.jsxs("div",{className:"quiz-editor__header-actions",children:[a.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",he," pts"]}),a.jsxs("span",{className:"quiz-editor__count-badge",children:[k.length," question",k.length>1?"s":""]})]})]}),Q&&a.jsxs("div",{className:"quiz-editor__error",children:[" ",Q,a.jsx("button",{onClick:()=>P(null),children:""})]}),a.jsxs("div",{className:"quiz-editor__section",children:[a.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),a.jsxs("div",{className:"quiz-editor__grid",children:[a.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[a.jsx("label",{children:"Titre du quiz *"}),a.jsx("input",{type:"text",value:o,onChange:$=>u($.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Discipline *"}),a.jsxs("select",{value:h,onChange:$=>p($.target.value),className:"quiz-editor__select",children:[a.jsx("option",{value:"",children:" Slectionner "}),t.map($=>a.jsxs("option",{value:$.id,children:[$.nom," (",$.classe,")"]},$.id))]})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Dure (minutes)"}),a.jsx("input",{type:"number",value:v,onChange:$=>y(Number($.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Note minimale (/20)"}),a.jsx("input",{type:"number",value:N,onChange:$=>w(Number($.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field",children:[a.jsx("label",{children:"Tentatives max (0 = illimit)"}),a.jsx("input",{type:"number",value:L,onChange:$=>T(Number($.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),a.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[a.jsx("label",{children:"Description (optionnel)"}),a.jsx(Ma,{value:f,onChange:m,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),a.jsxs("div",{className:"quiz-editor__options-row",children:[a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:b,onChange:$=>_($.target.checked)}),a.jsx("span",{children:" Premium"})]}),a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:S,onChange:$=>O($.target.checked)}),a.jsx("span",{children:" Mlanger les questions"})]}),a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:C,onChange:$=>E($.target.checked)}),a.jsx("span",{children:" Mlanger les options QCM"})]}),a.jsxs("label",{className:"quiz-editor__checkbox",children:[a.jsx("input",{type:"checkbox",checked:z,onChange:$=>M($.target.checked)}),a.jsx("span",{children:" Afficher la correction"})]})]})]}),a.jsxs("div",{className:"quiz-editor__section",children:[a.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),a.jsx("div",{className:"quiz-editor__questions-list",children:k.map(($,ce)=>a.jsx(Qq,{question:$,index:ce,isActive:X===ce,onToggle:()=>B(X===ce?null:ce),onUpdate:Se=>fe(ce,Se),onDelete:()=>I(ce),onDuplicate:()=>ge(ce),onMoveUp:()=>ee(ce,"up"),onMoveDown:()=>ee(ce,"down"),isFirst:ce===0,isLast:ce===k.length-1},$.id))}),a.jsxs("div",{className:"quiz-editor__add-wrapper",children:[a.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>H(!J),children:"+ Ajouter une question"}),J&&a.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(Rl).map($=>a.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>ve($),children:[a.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:Hd[$]},children:Ud[$]}),a.jsx("span",{children:Rl[$]})]},$))})]})]}),a.jsxs("div",{className:"quiz-editor__actions",children:[a.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:l,disabled:le,children:"Annuler"}),a.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:ye,disabled:le||k.length===0,children:le?" Sauvegarde...":e?" Mettre  jour":" Crer le quiz"})]})]})},Qq=({question:e,index:t,isActive:r,onToggle:n,onUpdate:l,onDelete:o,onDuplicate:u,onMoveUp:f,onMoveDown:m,isFirst:h,isLast:p})=>{const v=Hd[e.type],y=Ud[e.type],b=Rl[e.type],_=N=>{const w=N.replace(/<[^>]*>/g,"").trim();return w.length>80?w.substring(0,80)+"...":w||"(sans nonc)"};return a.jsxs("div",{className:`question-editor ${r?"question-editor--active":""}`,style:{borderLeftColor:v},children:[a.jsxs("div",{className:"question-editor__header",onClick:n,children:[a.jsxs("div",{className:"question-editor__header-left",children:[a.jsx("span",{className:"question-editor__number",children:t+1}),a.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:v},children:[y," ",b]}),!r&&a.jsx("span",{className:"question-editor__preview",children:_(e.enonce)})]}),a.jsxs("div",{className:"question-editor__header-right",children:[a.jsxs("span",{className:"question-editor__points",children:[e.points," pts"]}),a.jsx("span",{className:"question-editor__toggle",children:r?"":""})]})]}),r&&a.jsxs("div",{className:"question-editor__body",children:[a.jsxs("div",{className:"question-editor__toolbar",children:[a.jsx("button",{type:"button",onClick:f,disabled:h,title:"Monter",children:""}),a.jsx("button",{type:"button",onClick:m,disabled:p,title:"Descendre",children:""}),a.jsx("button",{type:"button",onClick:u,title:"Dupliquer",children:""}),a.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),a.jsxs("div",{className:"question-editor__field",children:[a.jsx("label",{children:"nonc de la question *"}),a.jsx(Ma,{value:e.enonce,onChange:N=>l({enonce:N}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),a.jsxs("div",{className:"question-editor__params",children:[a.jsxs("div",{className:"question-editor__param",children:[a.jsx("label",{children:"Difficult"}),a.jsxs("select",{value:e.difficulte,onChange:N=>l({difficulte:N.target.value}),children:[a.jsx("option",{value:"facile",children:" Facile"}),a.jsx("option",{value:"moyen",children:" Moyen"}),a.jsx("option",{value:"difficile",children:" Difficile"})]})]}),a.jsxs("div",{className:"question-editor__param",children:[a.jsx("label",{children:"Points"}),a.jsx("input",{type:"number",value:e.points,onChange:N=>l({points:Number(N.target.value)}),min:1,max:20})]})]}),a.jsxs("div",{className:"question-editor__type-specific",children:[e.type==="qcm_unique"&&a.jsx(Fq,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="qcm_multiple"&&a.jsx(Vq,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="drag_drop"&&a.jsx(Yq,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="mise_en_relation"&&a.jsx(Kq,{data:e.typeData,onChange:N=>l({typeData:N})}),e.type==="essai"&&a.jsx(Xq,{data:e.typeData,onChange:N=>l({typeData:N})})]}),a.jsxs("div",{className:"question-editor__field",children:[a.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),a.jsx(Ma,{value:e.explication||"",onChange:N=>l({explication:N}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},Fq=({data:e,onChange:t})=>{const r=(o,u)=>{const f=e.options.map((m,h)=>h===o?{...m,...u}:u.isCorrect===!0?{...m,isCorrect:!1}:m);t({options:f})},n=()=>{e.options.length>=6||t({options:[...e.options,{id:Bt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({options:e.options.filter((u,f)=>f!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),e.options.map((o,u)=>a.jsxs("div",{className:"type-editor__option-row",children:[a.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>r(u,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),a.jsx("div",{className:"type-editor__option-text",children:a.jsx(Ma,{value:o.texte,onChange:f=>r(u,{texte:f}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&a.jsx("span",{className:"type-editor__correct-badge",children:""}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),e.options.length<6&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter une option"})]})},Vq=({data:e,onChange:t})=>{const r=(o,u)=>{const f=e.options.map((m,h)=>h===o?{...m,...u}:m);t({...e,options:f})},n=()=>{e.options.length>=8||t({...e,options:[...e.options,{id:Bt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({...e,options:e.options.filter((u,f)=>f!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),e.options.map((o,u)=>a.jsxs("div",{className:"type-editor__option-row",children:[a.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:f=>r(u,{isCorrect:f.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),a.jsx("div",{className:"type-editor__option-text",children:a.jsx(Ma,{value:o.texte,onChange:f=>r(u,{texte:f}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&a.jsx("span",{className:"type-editor__correct-badge",children:""}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,children:""})]},o.id)),e.options.length<8&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter une option"}),a.jsxs("label",{className:"type-editor__sub-option",children:[a.jsx("input",{type:"checkbox",checked:e.scoringPartiel,onChange:o=>t({...e,scoringPartiel:o.target.checked})}),a.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},Yq=({data:e,onChange:t})=>{const r=(o,u)=>{const f=e.items.map((m,h)=>h===o?{...m,...u}:m);t({...e,items:f})},n=()=>{e.items.length>=10||t({...e,items:[...e.items,{id:Bt("item"),texte:"",ordreCorrect:e.items.length+1}]})},l=o=>{if(e.items.length<=2)return;const u=e.items.filter((f,m)=>m!==o).map((f,m)=>({...f,ordreCorrect:m+1}));t({...e,items:u})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),a.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),a.jsxs("div",{className:"type-editor__field-inline",children:[a.jsx("label",{children:"Consigne :"}),a.jsx("input",{type:"text",value:e.consigneOrdre,onChange:o=>t({...e,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),e.items.map((o,u)=>a.jsxs("div",{className:"type-editor__drag-row",children:[a.jsx("span",{className:"type-editor__drag-number",children:u+1}),a.jsx("div",{className:"type-editor__option-text",children:a.jsx(Ma,{value:o.texte,onChange:f=>r(u,{texte:f}),placeholder:`lment ${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.items.length<=2,children:""})]},o.id)),e.items.length<10&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un lment"})]})},Kq=({data:e,onChange:t})=>{const r=(o,u)=>{const f=e.paires.map((m,h)=>h===o?{...m,...u}:m);t({paires:f})},n=()=>{e.paires.length>=8||t({paires:[...e.paires,{id:Bt("pair"),gauche:"",droite:""}]})},l=o=>{e.paires.length<=2||t({paires:e.paires.filter((u,f)=>f!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),a.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),a.jsxs("div",{className:"type-editor__relation-header",children:[a.jsx("span",{children:"Colonne A (gauche)"}),a.jsx("span",{}),a.jsx("span",{children:"Colonne B (droite)"}),a.jsx("span",{})]}),e.paires.map((o,u)=>a.jsxs("div",{className:"type-editor__relation-row",children:[a.jsx("div",{className:"type-editor__relation-cell",children:a.jsx(Ma,{value:o.gauche,onChange:f=>r(u,{gauche:f}),placeholder:`lment A${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),a.jsx("span",{className:"type-editor__relation-arrow",children:""}),a.jsx("div",{className:"type-editor__relation-cell",children:a.jsx(Ma,{value:o.droite,onChange:f=>r(u,{droite:f}),placeholder:`lment B${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.paires.length<=2,children:""})]},o.id)),e.paires.length<8&&a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter une paire"})]})},Xq=({data:e,onChange:t})=>{const r=()=>{t({...e,motsCles:[...e.motsCles,{mot:"",poids:1,obligatoire:!1}]})},n=(o,u)=>{const f=e.motsCles.map((m,h)=>h===o?{...m,...u}:m);t({...e,motsCles:f})},l=o=>{t({...e,motsCles:e.motsCles.filter((u,f)=>f!==o)})};return a.jsxs("div",{className:"type-editor",children:[a.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),a.jsxs("div",{className:"type-editor__params-row",children:[a.jsxs("div",{className:"type-editor__param-inline",children:[a.jsx("label",{children:"Mots minimum :"}),a.jsx("input",{type:"number",value:e.nombreMotsMin||"",onChange:o=>t({...e,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),a.jsxs("div",{className:"type-editor__param-inline",children:[a.jsx("label",{children:"Mots maximum :"}),a.jsx("input",{type:"number",value:e.nombreMotsMax||"",onChange:o=>t({...e,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),a.jsxs("div",{className:"type-editor__field-inline",children:[a.jsx("label",{children:"Mode de correction :"}),a.jsxs("select",{value:e.correctionMode,onChange:o=>t({...e,correctionMode:o.target.value}),children:[a.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),a.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),a.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(e.correctionMode==="mots_cles"||e.correctionMode==="semi_auto")&&a.jsxs("div",{className:"type-editor__keywords",children:[a.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),e.motsCles.map((o,u)=>a.jsxs("div",{className:"type-editor__keyword-row",children:[a.jsx("input",{type:"text",value:o.mot,onChange:f=>n(u,{mot:f.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),a.jsxs("select",{value:o.poids,onChange:f=>n(u,{poids:Number(f.target.value)}),className:"type-editor__keyword-weight",children:[a.jsx("option",{value:1,children:"Poids 1"}),a.jsx("option",{value:2,children:"Poids 2"}),a.jsx("option",{value:3,children:"Poids 3"}),a.jsx("option",{value:4,children:"Poids 4"}),a.jsx("option",{value:5,children:"Poids 5"})]}),a.jsxs("label",{className:"type-editor__keyword-required",children:[a.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:f=>n(u,{obligatoire:f.target.checked})}),a.jsx("span",{children:"Obligatoire"})]}),a.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),children:""})]},u)),a.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter un mot-cl"})]}),a.jsxs("div",{className:"type-editor__field-block",children:[a.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),a.jsx(Ma,{value:e.reponseModele||"",onChange:o=>t({...e,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},Z_=()=>{const{quizId:e}=Uf(),t=Zr(),{currentUser:r}=Ht(),[n,l]=j.useState([]),[o,u]=j.useState(void 0),[f,m]=j.useState(!0),[h,p]=j.useState(null);return j.useEffect(()=>{(async()=>{try{m(!0);const y=await Ti.getAll();if(l(y.map(b=>({id:b.id,nom:b.nom,classe:b.classe||""}))),e){const b=await p2(e);b?u(b):p("Quiz introuvable")}}catch(y){console.error("Erreur chargement donnes:",y),p(y.message||"Erreur de chargement")}finally{m(!1)}})()},[e]),f?a.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:a.jsx("p",{children:" Chargement..."})}):h?a.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[a.jsxs("p",{style:{color:"#dc2626"},children:[" ",h]}),a.jsx("button",{onClick:()=>t(-1),children:" Retour"})]}):a.jsx(Gq,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:n,auteurId:r?.uid||"",onSave:v=>{alert(" Quiz sauvegard avec succs !"),t("/admin/quiz")},onCancel:()=>t(-1)})},Wq=()=>{const e=Zr(),{currentUser:t}=Ht(),[r,n]=j.useState([]),[l,o]=j.useState(!0),[u,f]=j.useState(null),[m,h]=j.useState(null);j.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0),f(null);const N=await $q();n(N)}catch(N){console.error("Erreur chargement quiz:",N),f("Impossible de charger les quiz")}finally{o(!1)}},v=async N=>{try{await Bq(N),n(w=>w.filter(S=>S.id!==N)),h(null)}catch(w){console.error("Erreur suppression:",w),alert("Erreur lors de la suppression : "+w.message)}},y=N=>{const w={};return N.questions.forEach(S=>{w[S.type]=(w[S.type]||0)+1}),Object.entries(w).map(([S,O])=>`${O} ${Rl[S]||S}`).join(", ")},b=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",_=N=>N.questions.reduce((w,S)=>w+S.points,0);return a.jsxs("div",{style:{padding:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),a.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[r.length," quiz cr",r.length!==1?"s":""]})]}),a.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),u&&a.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",u,a.jsx("button",{onClick:p,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),l&&a.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!l&&r.length===0&&!u&&a.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),a.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),a.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),a.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!l&&r.length>0&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.map(N=>a.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:N.titre}),N.isPremium&&a.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[a.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N.questions.length," question",N.questions.length!==1?"s":""]}),a.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",_(N)," pts"]}),a.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N.duree," min"]})]}),a.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",y(N)]}),a.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",b(N.createdAt)]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>e(`/quiz-avance/${N.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),a.jsx("button",{onClick:()=>e(`/admin/quiz/modifier/${N.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),a.jsx("button",{onClick:()=>{const w=`${window.location.origin}/quiz-avance/${N.id}`;navigator.clipboard.writeText(w).then(()=>{alert(` Lien copi !

`+w+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),m===N.id?a.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[a.jsx("button",{onClick:()=>v(N.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),a.jsx("button",{onClick:()=>h(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):a.jsx("button",{onClick:()=>h(N.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},N.id))})]})},Zq=({quiz:e,userId:t,onComplete:r,onQuit:n})=>{const l=j.useMemo(()=>{let T=[...e.questions];return e.melangerQuestions&&(T=T.sort(()=>Math.random()-.5)),T},[e]),[o,u]=j.useState(0),[f,m]=j.useState(new Map),[h,p]=j.useState(e.duree*60),[v,y]=j.useState(!1),[b,_]=j.useState(null),[N,w]=j.useState(!1),S=j.useRef(Date.now());j.useEffect(()=>{if(b)return;const T=setInterval(()=>{p(k=>k<=1?(clearInterval(T),M(),0):k-1)},1e3);return()=>clearInterval(T)},[b]);const O=T=>{const k=Math.floor(T/60),Y=T%60;return`${k.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}`},C=l[o],E=j.useCallback((T,k)=>{m(Y=>{const X=new Map(Y),B=X.get(T)||{questionId:T,type:C.type};return X.set(T,{...B,...k}),X})},[C]),z=T=>{T>=0&&T<l.length&&u(T)},M=async()=>{w(!1),y(!0);try{const T=Array.from(f.values()),k=Math.round((Date.now()-S.current)/1e3),Y=await Hq(e,t,T,k);_(Y),r?.(Y)}catch(T){alert("Erreur lors de la soumission : "+T.message)}finally{y(!1)}},L=f.size;return b?a.jsx("div",{className:"quiz-player quiz-player--results",children:a.jsxs("div",{className:"quiz-results",children:[a.jsxs("div",{className:`quiz-results__header ${b.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[a.jsx("div",{className:"quiz-results__emoji",children:b.reussi?"":""}),a.jsx("h2",{children:b.reussi?"Flicitations !":"Quiz termin"}),a.jsxs("div",{className:"quiz-results__score",children:[a.jsxs("span",{className:"quiz-results__note",children:[b.note20,"/20"]}),a.jsxs("span",{className:"quiz-results__detail",children:[b.score,"/",b.scoreMax," points"]})]}),a.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",O(b.tempsEcoule)]}),b.correctionManuelle&&a.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),e.afficherCorrection&&a.jsxs("div",{className:"quiz-results__details",children:[a.jsx("h3",{children:" Dtail des rponses"}),l.map((T,k)=>{const Y=b.detailsParQuestion.find(X=>X.questionId===T.id);return a.jsxs("div",{className:`quiz-results__question ${Y?.isCorrect?"quiz-results__question--correct":Y?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[a.jsxs("div",{className:"quiz-results__q-header",children:[a.jsxs("span",{children:["Q",k+1," "," ",a.jsxs("span",{style:{color:Hd[T.type]},children:[Ud[T.type]," ",Rl[T.type]]})]}),a.jsxs("span",{className:"quiz-results__q-score",children:[Y?.pointsObtenus||0,"/",Y?.pointsMax||T.points," pts",Y?.isCorrect&&" ",Y?.isPartiel&&" ",!Y?.isCorrect&&!Y?.isPartiel&&" "]})]}),a.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:T.enonce}}),T.explication&&a.jsxs("div",{className:"quiz-results__q-explanation",children:[a.jsx("strong",{children:" Explication :"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:T.explication}})]})]},T.id)})]}),a.jsx("div",{className:"quiz-results__actions",children:a.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:n,children:"Retour au tableau de bord"})})]})}):a.jsxs("div",{className:"quiz-player",children:[a.jsxs("div",{className:"quiz-player__topbar",children:[a.jsxs("div",{className:"quiz-player__info",children:[a.jsx("span",{className:"quiz-player__title",children:e.titre}),a.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",l.length]})]}),a.jsxs("div",{className:"quiz-player__topbar-right",children:[a.jsxs("span",{className:`quiz-player__timer ${h<60?"quiz-player__timer--danger":h<300?"quiz-player__timer--warning":""}`,children:[" ",O(h)]}),a.jsxs("span",{className:"quiz-player__answered",children:[L,"/",l.length," rpondue",L>1?"s":""]})]})]}),a.jsx("div",{className:"quiz-player__progress-bar",children:a.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/l.length*100}%`}})}),a.jsxs("div",{className:"quiz-player__question-area",children:[a.jsxs("div",{className:"quiz-player__question-meta",children:[a.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:Hd[C.type]},children:[Ud[C.type]," ",Rl[C.type]]}),a.jsxs("span",{className:"quiz-player__points",children:[C.points," point",C.points>1?"s":""]})]}),a.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:C.enonce}}),a.jsxs("div",{className:"quiz-player__answer-area",children:[C.type==="qcm_unique"&&a.jsx(Jq,{question:C,reponse:f.get(C.id),onUpdate:T=>E(C.id,T),melangerOptions:e.melangerOptions}),C.type==="qcm_multiple"&&a.jsx(e3,{question:C,reponse:f.get(C.id),onUpdate:T=>E(C.id,T),melangerOptions:e.melangerOptions}),C.type==="drag_drop"&&a.jsx(t3,{question:C,reponse:f.get(C.id),onUpdate:T=>E(C.id,T)}),C.type==="mise_en_relation"&&a.jsx(r3,{question:C,reponse:f.get(C.id),onUpdate:T=>E(C.id,T)}),C.type==="essai"&&a.jsx(n3,{question:C,reponse:f.get(C.id),onUpdate:T=>E(C.id,T)})]})]}),a.jsxs("div",{className:"quiz-player__nav",children:[a.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>z(o-1),disabled:o===0,children:" Prcdent"}),a.jsx("div",{className:"quiz-player__pagination",children:l.map((T,k)=>a.jsx("button",{className:`quiz-player__page-dot ${k===o?"quiz-player__page-dot--current":""} ${f.has(T.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>z(k),title:`Question ${k+1}`,children:k+1},T.id))}),o<l.length-1?a.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>z(o+1),children:"Suivant "}):a.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>w(!0),disabled:v,children:v?" Envoi...":" Soumettre le quiz"})]}),N&&a.jsx("div",{className:"quiz-player__modal-overlay",children:a.jsxs("div",{className:"quiz-player__modal",children:[a.jsx("h3",{children:"Soumettre le quiz ?"}),a.jsxs("p",{children:["Vous avez rpondu  ",a.jsx("strong",{children:L})," question",L>1?"s":""," sur"," ",a.jsx("strong",{children:l.length}),"."]}),L<l.length&&a.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",l.length-L," question",l.length-L>1?"s":""," sans rponse !"]}),a.jsxs("div",{className:"quiz-player__modal-actions",children:[a.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>w(!1),children:"Continuer le quiz"}),a.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:M,children:"Confirmer la soumission"})]})]})})]})},Jq=({question:e,reponse:t,onUpdate:r,melangerOptions:n})=>{const l=e.typeData,o=j.useMemo(()=>n?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,n]);return a.jsx("div",{className:"player-qcm",children:o.map(u=>a.jsxs("label",{className:`player-qcm__option ${t?.selectedOptionId===u.id?"player-qcm__option--selected":""}`,children:[a.jsx("input",{type:"radio",name:`q_${e.id}`,checked:t?.selectedOptionId===u.id,onChange:()=>r({selectedOptionId:u.id})}),a.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:u.texte}})]},u.id))})},e3=({question:e,reponse:t,onUpdate:r,melangerOptions:n})=>{const l=e.typeData,o=j.useMemo(()=>n?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,n]),u=t?.selectedOptionIds||[],f=m=>{const h=u.includes(m)?u.filter(p=>p!==m):[...u,m];r({selectedOptionIds:h})};return a.jsxs("div",{className:"player-qcm",children:[a.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(m=>a.jsxs("label",{className:`player-qcm__option ${u.includes(m.id)?"player-qcm__option--selected":""}`,children:[a.jsx("input",{type:"checkbox",checked:u.includes(m.id),onChange:()=>f(m.id)}),a.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:m.texte}})]},m.id))]})},t3=({question:e,reponse:t,onUpdate:r})=>{const n=e.typeData,[l,o]=j.useState(()=>t?.ordrePropose?t.ordrePropose.map(y=>n.items.find(b=>b.id===y)).filter(Boolean):[...n.items].sort(()=>Math.random()-.5)),[u,f]=j.useState(null);j.useEffect(()=>{r({ordrePropose:l.map(y=>y.id)})},[l]);const m=y=>{f(y)},h=(y,b)=>{if(y.preventDefault(),u===null||u===b)return;const _=[...l],[N]=_.splice(u,1);_.splice(b,0,N),o(_),f(b)},p=()=>{f(null)},v=(y,b)=>{const _=b==="up"?y-1:y+1;if(_<0||_>=l.length)return;const N=[...l];[N[y],N[_]]=[N[_],N[y]],o(N)};return a.jsxs("div",{className:"player-dragdrop",children:[a.jsx("p",{className:"player-dragdrop__consigne",children:n.consigneOrdre}),a.jsx("div",{className:"player-dragdrop__list",children:l.map((y,b)=>a.jsxs("div",{className:`player-dragdrop__item ${u===b?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>m(b),onDragOver:_=>h(_,b),onDragEnd:p,children:[a.jsx("span",{className:"player-dragdrop__handle",children:""}),a.jsx("span",{className:"player-dragdrop__number",children:b+1}),a.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:y.texte}}),a.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[a.jsx("button",{type:"button",onClick:()=>v(b,"up"),disabled:b===0,children:""}),a.jsx("button",{type:"button",onClick:()=>v(b,"down"),disabled:b===l.length-1,children:""})]})]},y.id))})]})},r3=({question:e,reponse:t,onUpdate:r})=>{const n=e.typeData,l=j.useMemo(()=>[...n.paires].sort(()=>Math.random()-.5),[n.paires]),[o,u]=j.useState(t?.relationsProposees||{}),[f,m]=j.useState(null);j.useEffect(()=>{r({relationsProposees:o})},[o]);const h=b=>{m(b)},p=b=>{f&&(u(_=>({..._,[f]:b})),m(null))},v=b=>{u(_=>{const N={..._};return delete N[b],N})},y=new Set(Object.values(o));return a.jsxs("div",{className:"player-relation",children:[a.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),a.jsxs("div",{className:"player-relation__columns",children:[a.jsxs("div",{className:"player-relation__col",children:[a.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),n.paires.map(b=>a.jsxs("div",{className:`player-relation__item player-relation__item--left ${f===b.id?"player-relation__item--selected":""} ${o[b.id]?"player-relation__item--matched":""}`,onClick:()=>{o[b.id]?v(b.id):h(b.id)},children:[a.jsx("div",{dangerouslySetInnerHTML:{__html:b.gauche}}),o[b.id]&&a.jsx("span",{className:"player-relation__linked",children:""})]},b.id))]}),a.jsxs("div",{className:"player-relation__col",children:[a.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),l.map(b=>a.jsxs("div",{className:`player-relation__item player-relation__item--right ${y.has(b.id)?"player-relation__item--matched":""} ${f&&!y.has(b.id)?"player-relation__item--clickable":""}`,onClick:()=>{f&&!y.has(b.id)&&p(b.id)},children:[a.jsx("div",{dangerouslySetInnerHTML:{__html:b.droite}}),y.has(b.id)&&a.jsx("span",{className:"player-relation__linked",children:""})]},b.id))]})]})]})},n3=({question:e,reponse:t,onUpdate:r})=>{const n=e.typeData,[l,o]=j.useState(t?.texteReponse||""),u=l.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return j.useEffect(()=>{r({texteReponse:l})},[l]),a.jsxs("div",{className:"player-essai",children:[a.jsxs("div",{className:"player-essai__info",children:[n.nombreMotsMin&&a.jsxs("span",{className:u<n.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",n.nombreMotsMin," mots"]}),n.nombreMotsMax&&a.jsxs("span",{className:u>n.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",n.nombreMotsMax," mots"]}),a.jsxs("span",{className:"player-essai__count",children:[u," mot",u>1?"s":""]})]}),a.jsx("textarea",{className:"player-essai__textarea",value:l,onChange:f=>o(f.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},a3=()=>{const{quizId:e}=Uf(),t=Zr(),{currentUser:r}=Ht(),[n,l]=j.useState(null),[o,u]=j.useState(!0),[f,m]=j.useState(null);return j.useEffect(()=>{(async()=>{if(!e){m("ID du quiz manquant"),u(!1);return}try{const p=await p2(e);if(!p){m("Quiz introuvable");return}if(p.isPremium&&!r?.isPremium){m("Ce quiz est rserv aux abonns Premium");return}l(p)}catch(p){console.error("Erreur chargement quiz:",p),m(p.message||"Impossible de charger le quiz")}finally{u(!1)}})()},[e,r]),o?a.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),a.jsx("p",{children:"Chargement du quiz..."})]}):f?a.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:a.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),a.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:f}),f.includes("Premium")&&a.jsx("button",{onClick:()=>t("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),a.jsx("button",{onClick:()=>t(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):n?a.jsx(Zq,{quiz:n,userId:r?.uid||"",onComplete:h=>{console.log(" Quiz termin  Note:",h.note20,"/20")},onQuit:()=>t("/dashboard")}):a.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[a.jsx("p",{children:"Quiz introuvable"}),a.jsx("button",{onClick:()=>t(-1),children:" Retour"})]})},v2=Oe(pe,"quiz_results"),rx=Oe(pe,"progressions"),i3=async e=>{try{const t=await Ar(v2,{...e,datePassage:Mt.now()});return e.reussi&&await d3(e.userId,e.disciplineId,e.disciplineNom,e.quizId),t.id}catch(t){throw console.error("Erreur lors de la sauvegarde du rsultat :",t),t}},Gf=async(e,t)=>{try{let r=Ge(v2,Ie("userId","==",e),wt("datePassage","desc"));return t&&(r=Ge(r,Jn(t))),(await $e(r)).docs.map(l=>({id:l.id,...l.data()}))}catch(r){throw console.error("Erreur rcupration historique :",r),r}},s3=async e=>{try{const t=await Gf(e);if(t.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const r=t.reduce((p,v)=>p+v.pourcentage,0),n=Math.round(r/t.length),l=Math.max(...t.map(p=>p.pourcentage)),o=t.reduce((p,v)=>p+(v.tempsEcoule||0),0),u=t.filter(p=>p.reussi).length;let f=0,m=0;for(const p of t)p.reussi?(f++,m=Math.max(m,f)):f=0;let h=0;for(const p of t)if(p.reussi)h++;else break;return{totalQuizPasses:t.length,totalQuizReussis:u,moyenneGenerale:n,tempsTotal:o,meilleurScore:l,serieReussites:h,meilleureSerieReussites:Math.max(m,h)}}catch(t){return console.error("Erreur calcul stats :",t),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},l3=async e=>{try{const t=await Gf(e);if(t.length===0)return[];const r={};for(const n of t){const l=n.disciplineId;r[l]||(r[l]=[]),r[l].push(n)}return Object.entries(r).map(([n,l])=>{const o=Math.round(l.reduce((v,y)=>v+y.pourcentage,0)/l.length),u=Math.max(...l.map(v=>v.pourcentage)),f=l[0].pourcentage,m=l.filter(v=>v.reussi).length,h=l.reduce((v,y)=>v+(y.tempsEcoule||0),0);let p="stable";if(l.length>=4){const v=l.slice(0,3),y=l.slice(3,6),b=v.reduce((N,w)=>N+w.pourcentage,0)/v.length,_=y.reduce((N,w)=>N+w.pourcentage,0)/y.length;b-_>5?p="up":_-b>5&&(p="down")}return{disciplineId:n,disciplineNom:l[0].disciplineNom||n,nombreQuiz:l.length,moyenne:o,meilleurScore:u,dernierScore:f,quizReussis:m,tempsTotal:h,tendance:p}})}catch(t){return console.error("Erreur progression par discipline :",t),[]}},o3=async(e,t)=>{try{return(await Gf(e,t||20)).reverse().map(n=>({date:(n.datePassage?.toDate?n.datePassage.toDate():new Date(n.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:n.pourcentage,discipline:n.disciplineNom||n.disciplineId}))}catch(r){return console.error("Erreur donnes temporelles :",r),[]}},c3=async(e,t,r)=>{const n=`${e}_${t}`,l=Ee(rx,n),o=await mr(l);if(o.exists())return{...o.data()};const[u,f]=await Promise.all([J_("ressources",t),J_("quizzes",t)]),m={userId:e,disciplineId:t,disciplineNom:r,ressourcesVues:[],quizReussis:[],totalRessources:u,totalQuiz:f,pourcentage:0,dernierAcces:Mt.now(),createdAt:Mt.now(),updatedAt:Mt.now()};return await Hf(l,m),m},J_=async(e,t)=>{try{const r=Ge(Oe(pe,e),Ie("disciplineId","==",t));return(await $e(r)).size}catch{return 0}},u3=e=>{if(e.totalRessources+e.totalQuiz===0)return 0;const r=e.totalRessources>0?e.ressourcesVues.length/e.totalRessources*40:0,n=e.totalQuiz>0?e.quizReussis.length/e.totalQuiz*60:0;return e.totalRessources===0?Math.min(100,Math.round(e.quizReussis.length/e.totalQuiz*100)):e.totalQuiz===0?Math.min(100,Math.round(e.ressourcesVues.length/e.totalRessources*100)):Math.min(100,Math.round(r+n))},d3=async(e,t,r,n)=>{try{const l=`${e}_${t}`,o=Ee(rx,l),u=await c3(e,t,r);if(u.quizReussis.includes(n))return await xt(o,{dernierAcces:Mt.now()}),u;const f=[...u.quizReussis,n],m={...u,quizReussis:f,dernierAcces:Mt.now(),updatedAt:Mt.now(),pourcentage:0};return m.pourcentage=u3(m),await Hf(o,m),m}catch(l){throw console.error("Erreur enregistrement quiz russi :",l),l}},f3=async e=>{try{const t=Ge(rx,Ie("userId","==",e));return(await $e(t)).docs.map(n=>n.data())}catch(t){return console.error("Erreur rcupration progressions :",t),[]}},m3=async e=>{try{const t=await f3(e),r=await g2(e),n=t.reduce((f,m)=>f+m.ressourcesVues.length,0),l=t.reduce((f,m)=>f+m.quizReussis.length,0),o=t.length>0?Math.round(t.reduce((f,m)=>f+m.pourcentage,0)/t.length):0,u=t.filter(f=>f.pourcentage>=100).length;return{totalRessourcesVues:n,totalQuizReussis:l,pourcentageMoyen:o,disciplinesCommencees:t.length,disciplinesCompletees:u,streakActuel:r.streakActuel,meilleurStreak:r.meilleurStreak,parDiscipline:t}}catch(t){return console.error("Erreur progression globale :",t),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},h3=()=>new Date().toISOString().split("T")[0],p3=()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]},g2=async e=>{try{const t=Ee(pe,"users",e),r=await mr(t);if(!r.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const n=r.data();return{streakActuel:n.streakActuel||0,meilleurStreak:n.meilleurStreak||0,dernierJourAcces:n.dernierJourAcces||""}}catch(t){return console.error("Erreur rcupration streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},v3=async e=>{try{const t=Ee(pe,"users",e),r=await g2(e),n=h3();if(r.dernierJourAcces===n)return r;const l=p3();let o;r.dernierJourAcces===l?o=r.streakActuel+1:o=1;const u=Math.max(r.meilleurStreak,o);return await xt(t,{streakActuel:o,meilleurStreak:u,dernierJourAcces:n}),{streakActuel:o,meilleurStreak:u,dernierJourAcces:n}}catch(t){return console.error("Erreur mise  jour streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},g3=(e,t,r)=>{const n=r?.totalRessourcesVues||0;r?.totalQuizReussis;const l=r?.disciplinesCompletees||0;r?.streakActuel;const o=r?.meilleurStreak||0,u=r?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:n>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:n>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:n>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:n>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:e.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:e.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:e.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:e.moyenneGenerale>=80&&e.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:l>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:u>=3||t.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:u>=5||t.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:n>=50&&e.totalQuizReussis>=20}]},y2=e=>{if(e<60)return`${e} s`;const t=Math.floor(e/60),r=e%60;return r>0?`${t} min ${r.toString().padStart(2,"0")} s`:`${t} min`},Cl=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":"#ef4444",x2=e=>e>=80?"Excellent":e>=60?"Bien":e>=40?"Passable":" amliorer",y3=()=>{const{quizId:e}=Uf(),t=Zr(),{currentUser:r}=Ht(),[n,l]=j.useState(null),[o,u]=j.useState(""),[f,m]=j.useState(!0),[h,p]=j.useState(null),[v,y]=j.useState("intro"),[b,_]=j.useState(0),[N,w]=j.useState({}),[S,O]=j.useState(0),[C,E]=j.useState(0),z=j.useRef(null),[M,L]=j.useState(0),[T,k]=j.useState(0),[Y,X]=j.useState(0),[B,le]=j.useState(!1),[ue,Q]=j.useState(!1);j.useEffect(()=>{(async()=>{if(!e){p("ID du quiz manquant."),m(!1);return}try{const $=await gq(e);if(!$){p("Quiz introuvable."),m(!1);return}l($),O($.duree*60);try{const Se=(await Ti.getAll()).find(ne=>ne.id===$.disciplineId);u(Se?.nom||$.disciplineId)}catch{u($.disciplineId)}}catch($){p("Erreur lors du chargement du quiz."),console.error($)}finally{m(!1)}})()},[e]),j.useEffect(()=>{if(v==="playing")return z.current=setInterval(()=>{O(he=>he<=1?(clearInterval(z.current),ve(),0):he-1),E(he=>he+1)},1e3),()=>{z.current&&clearInterval(z.current)}},[v]);const P=()=>{y("playing"),_(0),w({}),E(0),n&&O(n.duree*60)},J=(he,$)=>{w(ce=>({...ce,[he]:$}))},H=he=>{n&&he>=0&&he<n.questions.length&&_(he)},ve=j.useCallback(async()=>{if(!n||!r||v==="review")return;z.current&&clearInterval(z.current);let he=0,$=0,ce=0;n.questions.forEach(F=>{const R=F.points||1;$+=R,N[F.id]===F.reponseCorrecte&&(he+=R,ce++)});const Se=$>0?Math.round(he/$*100):0,ne=Se>=(n.noteMinimale||50);L(he),k($),X(ce),y("review"),le(!0);try{const F={quizId:n.id,quizTitre:n.titre,disciplineId:n.disciplineId,disciplineNom:o,userId:r.uid,reponses:n.questions.map(R=>N[R.id]??-1),tempsEcoule:C,score:he,totalPoints:$,pourcentage:Se,reussi:ne,nombreQuestions:n.questions.length,bonnesReponses:ce};await i3(F),Q(!0)}catch(F){console.error("Erreur lors de la sauvegarde :",F)}finally{le(!1)}},[n,r,N,C,o,v]),I=he=>{const $=Math.floor(he/60),ce=he%60;return`${$.toString().padStart(2,"0")}:${ce.toString().padStart(2,"0")}`},ge=()=>{if(!n)return"";const he=n.duree*60,$=S/he;return $<=.1?"timer-critical":$<=.25?"timer-warning":""},ee=Object.keys(N).length;if(f)return a.jsxs("div",{className:"quiz-player-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement du quiz..."})]});if(h||!n)return a.jsxs("div",{className:"quiz-player-error",children:[a.jsx($d,{size:48}),a.jsx("h3",{children:h||"Quiz introuvable"}),a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[a.jsx(Fg,{size:18})," Retour au tableau de bord"]})]});if(n.isPremium&&!r?.isPremium)return a.jsx("div",{className:"quiz-player-locked",children:a.jsxs("div",{className:"qp-locked-card",children:[a.jsx(Yg,{size:48}),a.jsx("h3",{children:"Quiz Premium"}),a.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),a.jsxs("p",{className:"qp-locked-price",children:[" partir de ",a.jsx("strong",{children:"2 000 FCFA/mois"})]}),a.jsxs("div",{className:"qp-locked-actions",children:[a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/premium"),children:[a.jsx(Yr,{size:18})," Devenir Premium"]}),a.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>t("/eleve/dashboard"),children:[a.jsx(Jp,{size:18})," Retour"]})]})]})});if(v==="intro")return a.jsx("div",{className:"quiz-player-intro",children:a.jsxs("div",{className:"qp-intro-card",children:[a.jsxs("div",{className:"qp-intro-header",children:[a.jsxs("button",{className:"qp-back-btn",onClick:()=>t(-1),children:[a.jsx(Jp,{size:20})," Retour"]}),n.isPremium&&a.jsxs("span",{className:"qp-badge qp-badge-premium",children:[a.jsx(Yr,{size:12})," Premium"]})]}),a.jsxs("div",{className:"qp-intro-content",children:[a.jsx("h1",{className:"qp-intro-title",children:n.titre}),a.jsx("span",{className:"qp-intro-discipline",children:o}),a.jsxs("div",{className:"qp-intro-stats",children:[a.jsxs("div",{className:"qp-intro-stat",children:[a.jsx(xn,{size:20}),a.jsxs("div",{children:[a.jsx("span",{className:"qp-intro-stat-value",children:n.questions.length}),a.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),a.jsxs("div",{className:"qp-intro-stat",children:[a.jsx(ql,{size:20}),a.jsxs("div",{children:[a.jsxs("span",{className:"qp-intro-stat-value",children:[n.duree," min"]}),a.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),a.jsxs("div",{className:"qp-intro-stat",children:[a.jsx(Oi,{size:20}),a.jsxs("div",{children:[a.jsxs("span",{className:"qp-intro-stat-value",children:[n.noteMinimale||50,"%"]}),a.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),a.jsxs("div",{className:"qp-intro-instructions",children:[a.jsx("h3",{children:"Instructions"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),a.jsx("li",{children:"Chaque question a une seule bonne rponse"}),a.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),a.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),a.jsxs("li",{children:["Il faut obtenir au moins ",n.noteMinimale||50,"% pour russir"]})]})]})]}),a.jsxs("button",{className:"qp-btn qp-btn-start",onClick:P,children:[a.jsx(uc,{size:20})," Commencer le quiz"]})]})});if(v==="playing"){const he=n.questions[b];return a.jsxs("div",{className:"quiz-player-game",children:[a.jsxs("div",{className:"qp-game-header",children:[a.jsxs("div",{className:"qp-game-info",children:[a.jsx("span",{className:"qp-game-title",children:n.titre}),a.jsx("span",{className:"qp-game-discipline",children:o})]}),a.jsxs("div",{className:`qp-timer ${ge()}`,children:[a.jsx(PP,{size:18}),a.jsx("span",{children:I(S)})]})]}),a.jsx("div",{className:"qp-progress-bar",children:a.jsx("div",{className:"qp-progress-fill",style:{width:`${(b+1)/n.questions.length*100}%`}})}),a.jsxs("div",{className:"qp-game-content",children:[a.jsxs("div",{className:"qp-question-header",children:[a.jsxs("span",{className:"qp-question-number",children:["Question ",b+1,"/",n.questions.length]}),a.jsxs("span",{className:"qp-question-points",children:[he.points||1," pt(s)"]})]}),a.jsx("h2",{className:"qp-question-text",children:he.question}),a.jsx("div",{className:"qp-options-list",children:he.options.map(($,ce)=>a.jsxs("button",{className:`qp-option ${N[he.id]===ce?"selected":""}`,onClick:()=>J(he.id,ce),children:[a.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+ce)}),a.jsx("span",{className:"qp-option-text",children:$}),N[he.id]===ce&&a.jsx(Ot,{size:18,className:"qp-option-check"})]},ce))})]}),a.jsxs("div",{className:"qp-game-footer",children:[a.jsx("div",{className:"qp-question-indicators",children:n.questions.map(($,ce)=>a.jsx("button",{className:`qp-indicator ${ce===b?"active":""} ${N[$.id]!==void 0?"answered":""}`,onClick:()=>H(ce),children:ce+1},$.id))}),a.jsxs("div",{className:"qp-nav-buttons",children:[a.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>H(b-1),disabled:b===0,children:[a.jsx(Jp,{size:16})," Prcdent"]}),b<n.questions.length-1?a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>H(b+1),children:["Suivant ",a.jsx(ns,{size:16})]}):a.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:ve,disabled:ee<n.questions.length,children:[a.jsx(Ot,{size:16}),"Soumettre (",ee,"/",n.questions.length,")"]})]})]})]})}const fe=T>0?Math.round(M/T*100):0,ye=fe>=(n.noteMinimale||50);return a.jsxs("div",{className:"quiz-player-review",children:[a.jsxs("div",{className:`qp-score-card ${ye?"success":"fail"}`,children:[a.jsx("div",{className:"qp-score-icon",children:ye?a.jsx(Oi,{size:48}):a.jsx($d,{size:48})}),a.jsx("h2",{className:"qp-score-title",children:ye?"Flicitations ! ":"Continuez vos efforts ! "}),a.jsxs("div",{className:"qp-score-circle",style:{borderColor:Cl(fe)},children:[a.jsxs("span",{className:"qp-score-value",children:[fe,"%"]}),a.jsx("span",{className:"qp-score-label",children:x2(fe)})]}),a.jsxs("div",{className:"qp-score-details",children:[a.jsxs("div",{className:"qp-score-detail",children:[a.jsxs("span",{children:[Y,"/",n.questions.length]}),a.jsx("small",{children:"Bonnes rponses"})]}),a.jsxs("div",{className:"qp-score-detail",children:[a.jsxs("span",{children:[M,"/",T]}),a.jsx("small",{children:"Points"})]}),a.jsxs("div",{className:"qp-score-detail",children:[a.jsx("span",{children:y2(C)}),a.jsx("small",{children:"Temps"})]})]}),B&&a.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),ue&&a.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),a.jsxs("div",{className:"qp-review-actions",children:[a.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[a.jsx(Fg,{size:18})," Tableau de bord"]}),a.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:P,children:[a.jsx(qP,{size:18})," Recommencer"]})]}),a.jsxs("div",{className:"qp-review-questions",children:[a.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),n.questions.map((he,$)=>{const ce=N[he.id],Se=ce===he.reponseCorrecte;return a.jsxs("div",{className:`qp-review-question ${Se?"correct":"incorrect"}`,children:[a.jsxs("div",{className:"qp-review-question-header",children:[a.jsxs("span",{className:"qp-review-q-number",children:["Q",$+1]}),Se?a.jsxs("span",{className:"qp-review-badge correct",children:[a.jsx(Ot,{size:14})," Correct"]}):a.jsxs("span",{className:"qp-review-badge incorrect",children:[a.jsx(Kg,{size:14})," Incorrect"]}),a.jsxs("span",{className:"qp-review-q-points",children:[Se?he.points||1:0,"/",he.points||1," pt(s)"]})]}),a.jsx("p",{className:"qp-review-q-text",children:he.question}),a.jsx("div",{className:"qp-review-options",children:he.options.map((ne,F)=>{let R="qp-review-option";return F===he.reponseCorrecte&&(R+=" correct-answer"),F===ce&&!Se&&(R+=" wrong-answer"),a.jsxs("div",{className:R,children:[a.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+F)}),a.jsx("span",{children:ne}),F===he.reponseCorrecte&&a.jsx(Ot,{size:14,className:"qp-review-check"}),F===ce&&!Se&&a.jsx(Kg,{size:14,className:"qp-review-x"})]},F)})}),he.explication&&a.jsxs("div",{className:"qp-review-explication",children:[a.jsx("strong",{children:" Explication :"})," ",he.explication]})]},he.id)})]})]})};function b2(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=b2(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ut(){for(var e,t,r=0,n="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=b2(e))&&(n&&(n+=" "),n+=t);return n}var x3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function nx(e){if(typeof e!="string")return!1;var t=x3;return t.includes(e)}var b3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],j3=new Set(b3);function j2(e){return typeof e!="string"?!1:j3.has(e)}function N2(e){return typeof e=="string"&&e.startsWith("data-")}function Pn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(j2(r)||N2(r))&&(t[r]=e[r]);return t}function Dc(e){if(e==null)return null;if(j.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Pn(t)}return typeof e=="object"&&!Array.isArray(e)?Pn(e):null}function wr(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(j2(r)||N2(r)||nx(r))&&(t[r]=e[r]);return t}function N3(e){return e==null?null:j.isValidElement(e)?wr(e.props):typeof e=="object"&&!Array.isArray(e)?wr(e):null}var _3=["children","width","height","viewBox","className","style","title","desc"];function Xg(){return Xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xg.apply(null,arguments)}function w3(e,t){if(e==null)return{};var r,n,l=S3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function S3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _2=j.forwardRef((e,t)=>{var{children:r,width:n,height:l,viewBox:o,className:u,style:f,title:m,desc:h}=e,p=w3(e,_3),v=o||{width:n,height:l,x:0,y:0},y=ut("recharts-surface",u);return j.createElement("svg",Xg({},wr(p),{className:y,width:n,height:l,style:f,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),j.createElement("title",null,m),j.createElement("desc",null,h),r)}),A3=["children","className"];function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wg.apply(null,arguments)}function C3(e,t){if(e==null)return{};var r,n,l=E3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function E3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bn=j.forwardRef((e,t)=>{var{children:r,className:n}=e,l=C3(e,A3),o=ut("recharts-layer",n);return j.createElement("g",Wg({className:o},wr(l),{ref:t}),r)}),O3=j.createContext(null);function ht(e){return function(){return e}}const w2=Math.cos,Gd=Math.sin,Ln=Math.sqrt,Qd=Math.PI,Qf=2*Qd,Zg=Math.PI,Jg=2*Zg,as=1e-6,z3=Jg-as;function S2(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function D3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return S2;const r=10**t;return function(n){this._+=n[0];for(let l=1,o=n.length;l<o;++l)this._+=Math.round(arguments[l]*r)/r+n[l]}}class M3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?S2:D3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,l){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+l}`}bezierCurveTo(t,r,n,l,o,u){this._append`C${+t},${+r},${+n},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(t,r,n,l,o){if(t=+t,r=+r,n=+n,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,f=this._y1,m=n-t,h=l-r,p=u-t,v=f-r,y=p*p+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>as)if(!(Math.abs(v*m-h*p)>as)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let b=n-u,_=l-f,N=m*m+h*h,w=b*b+_*_,S=Math.sqrt(N),O=Math.sqrt(y),C=o*Math.tan((Zg-Math.acos((N+y-w)/(2*S*O)))/2),E=C/O,z=C/S;Math.abs(E-1)>as&&this._append`L${t+E*p},${r+E*v}`,this._append`A${o},${o},0,0,${+(v*b>p*_)},${this._x1=t+z*m},${this._y1=r+z*h}`}}arc(t,r,n,l,o,u){if(t=+t,r=+r,n=+n,u=!!u,n<0)throw new Error(`negative radius: ${n}`);let f=n*Math.cos(l),m=n*Math.sin(l),h=t+f,p=r+m,v=1^u,y=u?l-o:o-l;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>as||Math.abs(this._y1-p)>as)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%Jg+Jg),y>z3?this._append`A${n},${n},0,1,${v},${t-f},${r-m}A${n},${n},0,1,${v},${this._x1=h},${this._y1=p}`:y>as&&this._append`A${n},${n},0,${+(y>=Zg)},${v},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+l}h${-n}Z`}toString(){return this._}}function ax(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new M3(t)}function ix(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function A2(e){this._context=e}A2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ff(e){return new A2(e)}function C2(e){return e[0]}function E2(e){return e[1]}function O2(e,t){var r=ht(!0),n=null,l=Ff,o=null,u=ax(f);e=typeof e=="function"?e:e===void 0?C2:ht(e),t=typeof t=="function"?t:t===void 0?E2:ht(t);function f(m){var h,p=(m=ix(m)).length,v,y=!1,b;for(n==null&&(o=l(b=u())),h=0;h<=p;++h)!(h<p&&r(v=m[h],h,m))===y&&((y=!y)?o.lineStart():o.lineEnd()),y&&o.point(+e(v,h,m),+t(v,h,m));if(b)return o=null,b+""||null}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:ht(+m),f):e},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:ht(+m),f):t},f.defined=function(m){return arguments.length?(r=typeof m=="function"?m:ht(!!m),f):r},f.curve=function(m){return arguments.length?(l=m,n!=null&&(o=l(n)),f):l},f.context=function(m){return arguments.length?(m==null?n=o=null:o=l(n=m),f):n},f}function dd(e,t,r){var n=null,l=ht(!0),o=null,u=Ff,f=null,m=ax(h);e=typeof e=="function"?e:e===void 0?C2:ht(+e),t=typeof t=="function"?t:ht(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?E2:ht(+r);function h(v){var y,b,_,N=(v=ix(v)).length,w,S=!1,O,C=new Array(N),E=new Array(N);for(o==null&&(f=u(O=m())),y=0;y<=N;++y){if(!(y<N&&l(w=v[y],y,v))===S)if(S=!S)b=y,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),_=y-1;_>=b;--_)f.point(C[_],E[_]);f.lineEnd(),f.areaEnd()}S&&(C[y]=+e(w,y,v),E[y]=+t(w,y,v),f.point(n?+n(w,y,v):C[y],r?+r(w,y,v):E[y]))}if(O)return f=null,O+""||null}function p(){return O2().defined(l).curve(u).context(o)}return h.x=function(v){return arguments.length?(e=typeof v=="function"?v:ht(+v),n=null,h):e},h.x0=function(v){return arguments.length?(e=typeof v=="function"?v:ht(+v),h):e},h.x1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:ht(+v),h):n},h.y=function(v){return arguments.length?(t=typeof v=="function"?v:ht(+v),r=null,h):t},h.y0=function(v){return arguments.length?(t=typeof v=="function"?v:ht(+v),h):t},h.y1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:ht(+v),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(n).y(t)},h.defined=function(v){return arguments.length?(l=typeof v=="function"?v:ht(!!v),h):l},h.curve=function(v){return arguments.length?(u=v,o!=null&&(f=u(o)),h):u},h.context=function(v){return arguments.length?(v==null?o=f=null:f=u(o=v),h):o},h}class z2{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function T3(e){return new z2(e,!0)}function k3(e){return new z2(e,!1)}const sx={draw(e,t){const r=Ln(t/Qd);e.moveTo(r,0),e.arc(0,0,r,0,Qf)}},P3={draw(e,t){const r=Ln(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},D2=Ln(1/3),q3=D2*2,R3={draw(e,t){const r=Ln(t/q3),n=r*D2;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},L3={draw(e,t){const r=Ln(t),n=-r/2;e.rect(n,n,r,r)}},I3=.8908130915292852,M2=Gd(Qd/10)/Gd(7*Qd/10),B3=Gd(Qf/10)*M2,$3=-w2(Qf/10)*M2,U3={draw(e,t){const r=Ln(t*I3),n=B3*r,l=$3*r;e.moveTo(0,-r),e.lineTo(n,l);for(let o=1;o<5;++o){const u=Qf*o/5,f=w2(u),m=Gd(u);e.lineTo(m*r,-f*r),e.lineTo(f*n-m*l,m*n+f*l)}e.closePath()}},uv=Ln(3),H3={draw(e,t){const r=-Ln(t/(uv*3));e.moveTo(0,r*2),e.lineTo(-uv*r,-r),e.lineTo(uv*r,-r),e.closePath()}},pn=-.5,vn=Ln(3)/2,ey=1/Ln(12),G3=(ey/2+1)*3,Q3={draw(e,t){const r=Ln(t/G3),n=r/2,l=r*ey,o=n,u=r*ey+r,f=-o,m=u;e.moveTo(n,l),e.lineTo(o,u),e.lineTo(f,m),e.lineTo(pn*n-vn*l,vn*n+pn*l),e.lineTo(pn*o-vn*u,vn*o+pn*u),e.lineTo(pn*f-vn*m,vn*f+pn*m),e.lineTo(pn*n+vn*l,pn*l-vn*n),e.lineTo(pn*o+vn*u,pn*u-vn*o),e.lineTo(pn*f+vn*m,pn*m-vn*f),e.closePath()}};function F3(e,t){let r=null,n=ax(l);e=typeof e=="function"?e:ht(e||sx),t=typeof t=="function"?t:ht(t===void 0?64:+t);function l(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:ht(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:ht(+o),l):t},l.context=function(o){return arguments.length?(r=o??null,l):r},l}function Fd(){}function Vd(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function T2(e){this._context=e}T2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function V3(e){return new T2(e)}function k2(e){this._context=e}k2.prototype={areaStart:Fd,areaEnd:Fd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Y3(e){return new k2(e)}function P2(e){this._context=e}P2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Vd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K3(e){return new P2(e)}function q2(e){this._context=e}q2.prototype={areaStart:Fd,areaEnd:Fd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function X3(e){return new q2(e)}function e1(e){return e<0?-1:1}function t1(e,t,r){var n=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(n||l<0&&-0),u=(r-e._y1)/(l||n<0&&-0),f=(o*l+u*n)/(n+l);return(e1(o)+e1(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(f))||0}function r1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function dv(e,t,r){var n=e._x0,l=e._y0,o=e._x1,u=e._y1,f=(o-n)/3;e._context.bezierCurveTo(n+f,l+f*t,o-f,u-f*r,o,u)}function Yd(e){this._context=e}Yd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dv(this,this._t0,r1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dv(this,r1(this,r=t1(this,e,t)),r);break;default:dv(this,this._t0,r=t1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function R2(e){this._context=new L2(e)}(R2.prototype=Object.create(Yd.prototype)).point=function(e,t){Yd.prototype.point.call(this,t,e)};function L2(e){this._context=e}L2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,l,o){this._context.bezierCurveTo(t,e,n,r,o,l)}};function W3(e){return new Yd(e)}function Z3(e){return new R2(e)}function I2(e){this._context=e}I2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=n1(e),l=n1(t),o=0,u=1;u<r;++o,++u)this._context.bezierCurveTo(n[0][o],l[0][o],n[1][o],l[1][o],e[u],t[u]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function n1(e){var t,r=e.length-1,n,l=new Array(r),o=new Array(r),u=new Array(r);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],t=1;t<r-1;++t)l[t]=1,o[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[r-1]=2,o[r-1]=7,u[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=l[t]/o[t-1],o[t]-=n,u[t]-=n*u[t-1];for(l[r-1]=u[r-1]/o[r-1],t=r-2;t>=0;--t)l[t]=(u[t]-l[t+1])/o[t];for(o[r-1]=(e[r]+l[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function J3(e){return new I2(e)}function Vf(e,t){this._context=e,this._t=t}Vf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function eR(e){return new Vf(e,.5)}function tR(e){return new Vf(e,0)}function rR(e){return new Vf(e,1)}function gs(e,t){if((u=e.length)>1)for(var r=1,n,l,o=e[t[0]],u,f=o.length;r<u;++r)for(l=o,o=e[t[r]],n=0;n<f;++n)o[n][1]+=o[n][0]=isNaN(l[n][1])?l[n][0]:l[n][1]}function ty(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function nR(e,t){return e[t]}function aR(e){const t=[];return t.key=e,t}function iR(){var e=ht([]),t=ty,r=gs,n=nR;function l(o){var u=Array.from(e.apply(this,arguments),aR),f,m=u.length,h=-1,p;for(const v of o)for(f=0,++h;f<m;++f)(u[f][h]=[0,+n(v,u[f].key,h,o)]).data=v;for(f=0,p=ix(t(u));f<m;++f)u[p[f]].index=f;return r(u,p),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:ht(Array.from(o)),l):e},l.value=function(o){return arguments.length?(n=typeof o=="function"?o:ht(+o),l):n},l.order=function(o){return arguments.length?(t=o==null?ty:typeof o=="function"?o:ht(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(r=o??gs,l):r},l}function sR(e,t){if((n=e.length)>0){for(var r,n,l=0,o=e[0].length,u;l<o;++l){for(u=r=0;r<n;++r)u+=e[r][l][1]||0;if(u)for(r=0;r<n;++r)e[r][l][1]/=u}gs(e,t)}}function lR(e,t){if((l=e.length)>0){for(var r=0,n=e[t[0]],l,o=n.length;r<o;++r){for(var u=0,f=0;u<l;++u)f+=e[u][r][1]||0;n[r][1]+=n[r][0]=-f/2}gs(e,t)}}function oR(e,t){if(!(!((u=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var r=0,n=1,l,o,u;n<o;++n){for(var f=0,m=0,h=0;f<u;++f){for(var p=e[t[f]],v=p[n][1]||0,y=p[n-1][1]||0,b=(v-y)/2,_=0;_<f;++_){var N=e[t[_]],w=N[n][1]||0,S=N[n-1][1]||0;b+=w-S}m+=v,h+=b*v}l[n-1][1]+=l[n-1][0]=r,m&&(r-=h/m)}l[n-1][1]+=l[n-1][0]=r,gs(e,t)}}var fv={},mv={},a1;function cR(){return a1||(a1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(mv)),mv}var hv={},i1;function B2(){return i1||(i1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(hv)),hv}var pv={},s1;function lx(){return s1||(s1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(pv)),pv}var vv={},gv={},l1;function uR(){return l1||(l1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(gv)),gv}var o1;function ox(){return o1||(o1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uR(),r=lx();function n(l){if(Array.isArray(l))return l.map(r.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],u=l.length;if(u===0)return o;let f=0,m="",h="",p=!1;for(l.charCodeAt(0)===46&&(o.push(""),f++);f<u;){const v=l[f];h?v==="\\"&&f+1<u?(f++,m+=l[f]):v===h?h="":m+=v:p?v==='"'||v==="'"?h=v:v==="]"?(p=!1,o.push(m),m=""):m+=v:v==="["?(p=!0,m&&(o.push(m),m="")):v==="."?m&&(o.push(m),m=""):m+=v,f++}return m&&o.push(m),o}e.toPath=n})(vv)),vv}var c1;function cx(){return c1||(c1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cR(),r=B2(),n=lx(),l=ox();function o(f,m,h){if(f==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const p=f[m];return p===void 0?r.isDeepKey(m)?o(f,l.toPath(m),h):h:p}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const p=f[m];return p===void 0?h:p}default:{if(Array.isArray(m))return u(f,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const p=f[m];return p===void 0?h:p}}}function u(f,m,h){if(m.length===0)return h;let p=f;for(let v=0;v<m.length;v++){if(p==null||t.isUnsafeProperty(m[v]))return h;p=p[m[v]]}return p===void 0?h:p}e.get=o})(fv)),fv}var yv,u1;function dR(){return u1||(u1=1,yv=cx().get),yv}var fR=dR();const Ll=Ba(fR);var mR=4;function Si(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mR,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function zt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((l,o,u)=>{var f=r[u-1];return typeof f=="string"?l+f+o:f!==void 0?l+Si(f)+o:l+o},"")}var qr=e=>e===0?0:e>0?1:-1,ea=e=>typeof e=="number"&&e!=+e,ys=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ne=e=>(typeof e=="number"||e instanceof Number)&&!ea(e),ta=e=>Ne(e)||typeof e=="string",hR=0,hc=e=>{var t=++hR;return"".concat(e||"").concat(t)},qn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(t)&&typeof t!="string")return n;var o;if(ys(t)){if(r==null)return n;var u=t.indexOf("%");o=r*parseFloat(t.slice(0,u))/100}else o=+t;return ea(o)&&(o=n),l&&r!=null&&o>r&&(o=r),o},$2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Dt(e,t,r){return Ne(e)&&Ne(t)?Si(e+r*(t-e)):t}function U2(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ll(n,t))===r)}var St=e=>e===null||typeof e>"u",Mc=e=>St(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Rr(e){return e!=null}function As(){}var pR=["type","size","sizeType"];function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ry.apply(null,arguments)}function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function f1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(r),!0).forEach(function(n){vR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vR(e,t,r){return(t=gR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gR(e){var t=yR(e,"string");return typeof t=="symbol"?t:t+""}function yR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xR(e,t){if(e==null)return{};var r,n,l=bR(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function bR(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var H2={symbolCircle:sx,symbolCross:P3,symbolDiamond:R3,symbolSquare:L3,symbolStar:U3,symbolTriangle:H3,symbolWye:Q3},jR=Math.PI/180,NR=e=>{var t="symbol".concat(Mc(e));return H2[t]||sx},_R=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*jR;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},wR=(e,t)=>{H2["symbol".concat(Mc(e))]=t},G2=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,l=xR(e,pR),o=f1(f1({},l),{},{type:t,size:r,sizeType:n}),u="circle";typeof t=="string"&&(u=t);var f=()=>{var y=NR(u),b=F3().type(y).size(_R(r,n,u)),_=b();if(_!==null)return _},{className:m,cx:h,cy:p}=o,v=wr(o);return Ne(h)&&Ne(p)&&Ne(r)?j.createElement("path",ry({},v,{className:ut("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};G2.registerSymbol=wR;var Q2=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,ux=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(l=>{nx(l)&&(n[l]=(o=>r[l](r,o)))}),n},SR=(e,t,r)=>n=>(e(t,r,n),null),dx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(l=>{var o=e[l];nx(l)&&typeof o=="function"&&(n||(n={}),n[l]=SR(o,t,r))}),n};function m1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function AR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(r),!0).forEach(function(n){CR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CR(e,t,r){return(t=ER(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ER(e){var t=OR(e,"string");return typeof t=="symbol"?t:t+""}function OR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cr(e,t){var r=AR({},e),n=t,l=Object.keys(t),o=l.reduce((u,f)=>(u[f]===void 0&&n[f]!==void 0&&(u[f]=n[f]),u),r);return o}var xv={},bv={},h1;function zR(){return h1||(h1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const l=new Map;for(let o=0;o<r.length;o++){const u=r[o],f=n(u,o,r);l.has(f)||l.set(f,u)}return Array.from(l.values())}e.uniqBy=t})(bv)),bv}var jv={},p1;function DR(){return p1||(p1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...l){return r.apply(this,l.slice(0,n))}}e.ary=t})(jv)),jv}var Nv={},v1;function F2(){return v1||(v1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Nv)),Nv}var _v={},wv={},Sv={},g1;function MR(){return g1||(g1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Sv)),Sv}var y1;function fx(){return y1||(y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MR();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(wv)),wv}var Av={},x1;function TR(){return x1||(x1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Av)),Av}var b1;function kR(){return b1||(b1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=TR();function n(l){return r.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=n})(_v)),_v}var Cv={},Ev={},j1;function PR(){return j1||(j1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cx();function r(n){return function(l){return t.get(l,n)}}e.property=r})(Ev)),Ev}var Ov={},zv={},Dv={},Mv={},N1;function V2(){return N1||(N1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Mv)),Mv}var Tv={},_1;function Y2(){return _1||(_1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Tv)),Tv}var kv={},w1;function K2(){return w1||(w1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(kv)),kv}var S1;function qR(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V2(),r=Y2(),n=K2();function l(p,v,y){return typeof y!="function"?l(p,v,()=>{}):o(p,v,function b(_,N,w,S,O,C){const E=y(_,N,w,S,O,C);return E!==void 0?!!E:o(_,N,b,C)},new Map)}function o(p,v,y,b){if(v===p)return!0;switch(typeof v){case"object":return u(p,v,y,b);case"function":return Object.keys(v).length>0?o(p,{...v},y,b):n.isEqualsSameValueZero(p,v);default:return t.isObject(p)?typeof v=="string"?v==="":!0:n.isEqualsSameValueZero(p,v)}}function u(p,v,y,b){if(v==null)return!0;if(Array.isArray(v))return m(p,v,y,b);if(v instanceof Map)return f(p,v,y,b);if(v instanceof Set)return h(p,v,y,b);const _=Object.keys(v);if(p==null||r.isPrimitive(p))return _.length===0;if(_.length===0)return!0;if(b?.has(v))return b.get(v)===p;b?.set(v,p);try{for(let N=0;N<_.length;N++){const w=_[N];if(!r.isPrimitive(p)&&!(w in p)||v[w]===void 0&&p[w]!==void 0||v[w]===null&&p[w]!==null||!y(p[w],v[w],w,p,v,b))return!1}return!0}finally{b?.delete(v)}}function f(p,v,y,b){if(v.size===0)return!0;if(!(p instanceof Map))return!1;for(const[_,N]of v.entries()){const w=p.get(_);if(y(w,N,_,p,v,b)===!1)return!1}return!0}function m(p,v,y,b){if(v.length===0)return!0;if(!Array.isArray(p))return!1;const _=new Set;for(let N=0;N<v.length;N++){const w=v[N];let S=!1;for(let O=0;O<p.length;O++){if(_.has(O))continue;const C=p[O];let E=!1;if(y(C,w,N,p,v,b)&&(E=!0),E){_.add(O),S=!0;break}}if(!S)return!1}return!0}function h(p,v,y,b){return v.size===0?!0:p instanceof Set?m([...p],[...v],y,b):!1}e.isMatchWith=l,e.isSetMatch=h})(Dv)),Dv}var A1;function X2(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qR();function r(n,l){return t.isMatchWith(n,l,()=>{})}e.isMatch=r})(zv)),zv}var Pv={},qv={},Rv={},C1;function RR(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Rv)),Rv}var Lv={},E1;function mx(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Lv)),Lv}var Iv={},O1;function W2(){return O1||(O1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",f="[object Date]",m="[object Map]",h="[object Set]",p="[object Array]",v="[object Function]",y="[object ArrayBuffer]",b="[object Object]",_="[object Error]",N="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",O="[object Uint16Array]",C="[object Uint32Array]",E="[object BigUint64Array]",z="[object Int8Array]",M="[object Int16Array]",L="[object Int32Array]",T="[object BigInt64Array]",k="[object Float32Array]",Y="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=y,e.arrayTag=p,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=E,e.booleanTag=l,e.dataViewTag=N,e.dateTag=f,e.errorTag=_,e.float32ArrayTag=k,e.float64ArrayTag=Y,e.functionTag=v,e.int16ArrayTag=M,e.int32ArrayTag=L,e.int8ArrayTag=z,e.mapTag=m,e.numberTag=n,e.objectTag=b,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=u,e.uint16ArrayTag=O,e.uint32ArrayTag=C,e.uint8ArrayTag=w,e.uint8ClampedArrayTag=S})(Iv)),Iv}var Bv={},z1;function LR(){return z1||(z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Bv)),Bv}var D1;function Z2(){return D1||(D1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RR(),r=mx(),n=W2(),l=Y2(),o=LR();function u(p,v){return f(p,void 0,p,new Map,v)}function f(p,v,y,b=new Map,_=void 0){const N=_?.(p,v,y,b);if(N!==void 0)return N;if(l.isPrimitive(p))return p;if(b.has(p))return b.get(p);if(Array.isArray(p)){const w=new Array(p.length);b.set(p,w);for(let S=0;S<p.length;S++)w[S]=f(p[S],S,y,b,_);return Object.hasOwn(p,"index")&&(w.index=p.index),Object.hasOwn(p,"input")&&(w.input=p.input),w}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const w=new RegExp(p.source,p.flags);return w.lastIndex=p.lastIndex,w}if(p instanceof Map){const w=new Map;b.set(p,w);for(const[S,O]of p)w.set(S,f(O,S,y,b,_));return w}if(p instanceof Set){const w=new Set;b.set(p,w);for(const S of p)w.add(f(S,void 0,y,b,_));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(o.isTypedArray(p)){const w=new(Object.getPrototypeOf(p)).constructor(p.length);b.set(p,w);for(let S=0;S<p.length;S++)w[S]=f(p[S],S,y,b,_);return w}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const w=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return b.set(p,w),m(w,p,y,b,_),w}if(typeof File<"u"&&p instanceof File){const w=new File([p],p.name,{type:p.type});return b.set(p,w),m(w,p,y,b,_),w}if(typeof Blob<"u"&&p instanceof Blob){const w=new Blob([p],{type:p.type});return b.set(p,w),m(w,p,y,b,_),w}if(p instanceof Error){const w=new p.constructor;return b.set(p,w),w.message=p.message,w.name=p.name,w.stack=p.stack,w.cause=p.cause,m(w,p,y,b,_),w}if(p instanceof Boolean){const w=new Boolean(p.valueOf());return b.set(p,w),m(w,p,y,b,_),w}if(p instanceof Number){const w=new Number(p.valueOf());return b.set(p,w),m(w,p,y,b,_),w}if(p instanceof String){const w=new String(p.valueOf());return b.set(p,w),m(w,p,y,b,_),w}if(typeof p=="object"&&h(p)){const w=Object.create(Object.getPrototypeOf(p));return b.set(p,w),m(w,p,y,b,_),w}return p}function m(p,v,y=p,b,_){const N=[...Object.keys(v),...t.getSymbols(v)];for(let w=0;w<N.length;w++){const S=N[w],O=Object.getOwnPropertyDescriptor(p,S);(O==null||O.writable)&&(p[S]=f(v[S],S,y,b,_))}}function h(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=f,e.copyProperties=m})(qv)),qv}var M1;function IR(){return M1||(M1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z2();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Pv)),Pv}var T1;function BR(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X2(),r=IR();function n(l){return l=r.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=n})(Ov)),Ov}var $v={},Uv={},Hv={},k1;function $R(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z2(),r=mx(),n=W2();function l(o,u){return t.cloneDeepWith(o,(f,m,h,p)=>{const v=u?.(f,m,h,p);if(v!==void 0)return v;if(typeof o=="object"){if(r.getTag(o)===n.objectTag&&typeof o.constructor!="function"){const y={};return p.set(o,y),t.copyProperties(y,o,h,p),y}switch(Object.prototype.toString.call(o)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new o.constructor(o?.valueOf());return t.copyProperties(y,o),y}case n.argumentsTag:{const y={};return t.copyProperties(y,o),y.length=o.length,y[Symbol.iterator]=o[Symbol.iterator],y}default:return}}})}e.cloneDeepWith=l})(Hv)),Hv}var P1;function UR(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$R();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Uv)),Uv}var Gv={},Qv={},q1;function J2(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,l=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<l;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Qv)),Qv}var Fv={},R1;function HR(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Fv)),Fv}var L1;function GR(){return L1||(L1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B2(),r=J2(),n=HR(),l=ox();function o(u,f){let m;if(Array.isArray(f)?m=f:typeof f=="string"&&t.isDeepKey(f)&&u?.[f]==null?m=l.toPath(f):m=[f],m.length===0)return!1;let h=u;for(let p=0;p<m.length;p++){const v=m[p];if((h==null||!Object.hasOwn(h,v))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(v)&&v<h.length))return!1;h=h[v]}return!0}e.has=o})(Gv)),Gv}var I1;function QR(){return I1||(I1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X2(),r=lx(),n=UR(),l=cx(),o=GR();function u(f,m){switch(typeof f){case"object":{Object.is(f?.valueOf(),-0)&&(f="-0");break}case"number":{f=r.toKey(f);break}}return m=n.cloneDeep(m),function(h){const p=l.get(h,f);return p===void 0?o.has(h,f):m===void 0?p===void 0:t.isMatch(p,m)}}e.matchesProperty=u})($v)),$v}var B1;function FR(){return B1||(B1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F2(),r=PR(),n=BR(),l=QR();function o(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):n.matches(u);case"string":case"symbol":case"number":return r.property(u)}}e.iteratee=o})(Cv)),Cv}var $1;function VR(){return $1||($1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zR(),r=DR(),n=F2(),l=kR(),o=FR();function u(f,m=n.identity){return l.isArrayLikeObject(f)?t.uniqBy(Array.from(f),r.ary(o.iteratee(m),1)):[]}e.uniqBy=u})(xv)),xv}var Vv,U1;function YR(){return U1||(U1=1,Vv=VR().uniqBy),Vv}var KR=YR();const H1=Ba(KR);function XR(e,t,r){return t===!0?H1(e,r):typeof t=="function"?H1(e,t):e}var Yv={exports:{}},Kv={},Xv={exports:{}},Wv={};var G1;function WR(){if(G1)return Wv;G1=1;var e=Bf();function t(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function f(v,y){var b=y(),_=n({inst:{value:b,getSnapshot:y}}),N=_[0].inst,w=_[1];return o(function(){N.value=b,N.getSnapshot=y,m(N)&&w({inst:N})},[v,b,y]),l(function(){return m(N)&&w({inst:N}),v(function(){m(N)&&w({inst:N})})},[v]),u(b),b}function m(v){var y=v.getSnapshot;v=v.value;try{var b=y();return!r(v,b)}catch{return!0}}function h(v,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Wv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Wv}var Q1;function ZR(){return Q1||(Q1=1,Xv.exports=WR()),Xv.exports}var F1;function JR(){if(F1)return Kv;F1=1;var e=Bf(),t=ZR();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,f=e.useMemo,m=e.useDebugValue;return Kv.useSyncExternalStoreWithSelector=function(h,p,v,y,b){var _=o(null);if(_.current===null){var N={hasValue:!1,value:null};_.current=N}else N=_.current;_=f(function(){function S(M){if(!O){if(O=!0,C=M,M=y(M),b!==void 0&&N.hasValue){var L=N.value;if(b(L,M))return E=L}return E=M}if(L=E,n(C,M))return L;var T=y(M);return b!==void 0&&b(L,T)?(C=M,L):(C=M,E=T)}var O=!1,C,E,z=v===void 0?null:v;return[function(){return S(p())},z===null?void 0:function(){return S(z())}]},[p,v,y,b]);var w=l(h,_[0],_[1]);return u(function(){N.hasValue=!0,N.value=w},[w]),m(w),w},Kv}var V1;function e5(){return V1||(V1=1,Yv.exports=JR()),Yv.exports}var t5=e5(),hx=j.createContext(null),r5=e=>e,Pt=()=>{var e=j.useContext(hx);return e?e.store.dispatch:r5},Td=()=>{},n5=()=>Td,a5=(e,t)=>e===t;function Ae(e){var t=j.useContext(hx),r=j.useMemo(()=>t?n=>{if(n!=null)return e(n)}:Td,[t,e]);return t5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:n5,t?t.store.getState:Td,t?t.store.getState:Td,r,a5)}function i5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function s5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function l5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Y1=e=>Array.isArray(e)?e:[e];function o5(e){const t=Array.isArray(e[0])?e[0]:e;return l5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function c5(e,t){const r=[],{length:n}=e;for(let l=0;l<n;l++)r.push(e[l].apply(null,t));return r}var u5=class{constructor(e){this.value=e}deref(){return this.value}},d5=typeof WeakRef<"u"?WeakRef:u5,f5=0,K1=1;function fd(){return{s:f5,v:void 0,o:null,p:null}}function eE(e,t={}){let r=fd();const{resultEqualityCheck:n}=t;let l,o=0;function u(){let f=r;const{length:m}=arguments;for(let v=0,y=m;v<y;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let _=f.o;_===null&&(f.o=_=new WeakMap);const N=_.get(b);N===void 0?(f=fd(),_.set(b,f)):f=N}else{let _=f.p;_===null&&(f.p=_=new Map);const N=_.get(b);N===void 0?(f=fd(),_.set(b,f)):f=N}}const h=f;let p;if(f.s===K1)p=f.v;else if(p=e.apply(null,arguments),o++,n){const v=l?.deref?.()??l;v!=null&&n(v,p)&&(p=v,o!==0&&o--),l=typeof p=="object"&&p!==null||typeof p=="function"?new d5(p):p}return h.s=K1,h.v=p,p}return u.clearCache=()=>{r=fd(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function m5(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...l)=>{let o=0,u=0,f,m={},h=l.pop();typeof h=="object"&&(m=h,h=l.pop()),i5(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...m},{memoize:v,memoizeOptions:y=[],argsMemoize:b=eE,argsMemoizeOptions:_=[]}=p,N=Y1(y),w=Y1(_),S=o5(l),O=v(function(){return o++,h.apply(null,arguments)},...N),C=b(function(){u++;const z=c5(S,arguments);return f=O.apply(null,z),f},...w);return Object.assign(C,{resultFunc:h,memoizedResultFunc:O,dependencies:S,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>f,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:b})};return Object.assign(n,{withTypes:()=>n}),n}var re=m5(eE),h5=Object.assign((e,t=re)=>{s5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(o=>e[o]);return t(n,(...o)=>o.reduce((u,f,m)=>(u[r[m]]=f,u),{}))},{withTypes:()=>h5}),Zv={},Jv={},eg={},X1;function p5(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,l,o)=>{if(n!==l){const u=t(n),f=t(l);if(u===f&&u===0){if(n<l)return o==="desc"?1:-1;if(n>l)return o==="desc"?-1:1}return o==="desc"?f-u:u-f}return 0};e.compareValues=r})(eg)),eg}var tg={},rg={},W1;function tE(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(rg)),rg}var Z1;function v5(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(n.test(o)||!r.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})(tg)),tg}var J1;function g5(){return J1||(J1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p5(),r=v5(),n=ox();function l(o,u,f,m){if(o==null)return[];f=m?void 0:f,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(b=>String(b));const h=(b,_)=>{let N=b;for(let w=0;w<_.length&&N!=null;++w)N=N[_[w]];return N},p=(b,_)=>_==null||b==null?_:typeof b=="object"&&"key"in b?Object.hasOwn(_,b.key)?_[b.key]:h(_,b.path):typeof b=="function"?b(_):Array.isArray(b)?h(_,b):typeof _=="object"?_[b]:_,v=u.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||r.isKey(b)?b:{key:b,path:n.toPath(b)}));return o.map(b=>({original:b,criteria:v.map(_=>p(_,b))})).slice().sort((b,_)=>{for(let N=0;N<v.length;N++){const w=t.compareValues(b.criteria[N],_.criteria[N],f[N]);if(w!==0)return w}return 0}).map(b=>b.original)}e.orderBy=l})(Jv)),Jv}var ng={},ew;function y5(){return ew||(ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const l=[],o=Math.floor(n),u=(f,m)=>{for(let h=0;h<f.length;h++){const p=f[h];Array.isArray(p)&&m<o?u(p,m+1):l.push(p)}};return u(r,0),l}e.flatten=t})(ng)),ng}var ag={},tw;function rE(){return tw||(tw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J2(),r=fx(),n=V2(),l=K2();function o(u,f,m){return n.isObject(m)&&(typeof f=="number"&&r.isArrayLike(m)&&t.isIndex(f)&&f<m.length||typeof f=="string"&&f in m)?l.isEqualsSameValueZero(m[f],u):!1}e.isIterateeCall=o})(ag)),ag}var rw;function x5(){return rw||(rw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g5(),r=y5(),n=rE();function l(o,...u){const f=u.length;return f>1&&n.isIterateeCall(o,u[0],u[1])?u=[]:f>2&&n.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(o,r.flatten(u),["asc"])}e.sortBy=l})(Zv)),Zv}var ig,nw;function b5(){return nw||(nw=1,ig=x5().sortBy),ig}var j5=b5();const Yf=Ba(j5);var nE=e=>e.legend.settings,N5=e=>e.legend.size,_5=e=>e.legend.payload;re([_5,nE],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Yf(n,r):n});var md=1;function w5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=j.useState({height:0,left:0,top:0,width:0}),n=j.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-t.height)>md||Math.abs(u.left-t.left)>md||Math.abs(u.top-t.top)>md||Math.abs(u.width-t.width)>md)&&r({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function ur(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var S5=typeof Symbol=="function"&&Symbol.observable||"@@observable",aw=S5,sg=()=>Math.random().toString(36).substring(7).split("").join("."),A5={INIT:`@@redux/INIT${sg()}`,REPLACE:`@@redux/REPLACE${sg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sg()}`},Kd=A5;function px(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aE(e,t,r){if(typeof e!="function")throw new Error(ur(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ur(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ur(1));return r(aE)(e,t)}let n=e,l=t,o=new Map,u=o,f=0,m=!1;function h(){u===o&&(u=new Map,o.forEach((w,S)=>{u.set(S,w)}))}function p(){if(m)throw new Error(ur(3));return l}function v(w){if(typeof w!="function")throw new Error(ur(4));if(m)throw new Error(ur(5));let S=!0;h();const O=f++;return u.set(O,w),function(){if(S){if(m)throw new Error(ur(6));S=!1,h(),u.delete(O),o=null}}}function y(w){if(!px(w))throw new Error(ur(7));if(typeof w.type>"u")throw new Error(ur(8));if(typeof w.type!="string")throw new Error(ur(17));if(m)throw new Error(ur(9));try{m=!0,l=n(l,w)}finally{m=!1}return(o=u).forEach(O=>{O()}),w}function b(w){if(typeof w!="function")throw new Error(ur(10));n=w,y({type:Kd.REPLACE})}function _(){const w=v;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(ur(11));function O(){const E=S;E.next&&E.next(p())}return O(),{unsubscribe:w(O)}},[aw](){return this}}}return y({type:Kd.INIT}),{dispatch:y,subscribe:v,getState:p,replaceReducer:b,[aw]:_}}function C5(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Kd.INIT})>"u")throw new Error(ur(12));if(typeof r(void 0,{type:Kd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ur(13))})}function iE(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let l;try{C5(r)}catch(o){l=o}return function(u={},f){if(l)throw l;let m=!1;const h={};for(let p=0;p<n.length;p++){const v=n[p],y=r[v],b=u[v],_=y(b,f);if(typeof _>"u")throw f&&f.type,new Error(ur(14));h[v]=_,m=m||_!==b}return m=m||n.length!==Object.keys(u).length,m?h:u}}function Xd(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function E5(...e){return t=>(r,n)=>{const l=t(r,n);let o=()=>{throw new Error(ur(15))};const u={getState:l.getState,dispatch:(m,...h)=>o(m,...h)},f=e.map(m=>m(u));return o=Xd(...f)(l.dispatch),{...l,dispatch:o}}}function sE(e){return px(e)&&"type"in e&&typeof e.type=="string"}var lE=Symbol.for("immer-nothing"),iw=Symbol.for("immer-draftable"),Sr=Symbol.for("immer-state");function On(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kr=Object,Il=Kr.getPrototypeOf,Wd="constructor",Kf="prototype",ny="configurable",Zd="enumerable",kd="writable",pc="value",Ta=e=>!!e&&!!e[Sr];function Rn(e){return e?oE(e)||Wf(e)||!!e[iw]||!!e[Wd]?.[iw]||Zf(e)||Jf(e):!1}var O5=Kr[Kf][Wd].toString(),sw=new WeakMap;function oE(e){if(!e||!vx(e))return!1;const t=Il(e);if(t===null||t===Kr[Kf])return!0;const r=Kr.hasOwnProperty.call(t,Wd)&&t[Wd];if(r===Object)return!0;if(!El(r))return!1;let n=sw.get(r);return n===void 0&&(n=Function.toString.call(r),sw.set(r,n)),n===O5}function Xf(e,t,r=!0){Tc(e)===0?(r?Reflect.ownKeys(e):Kr.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((n,l)=>t(l,n,e))}function Tc(e){const t=e[Sr];return t?t.type_:Wf(e)?1:Zf(e)?2:Jf(e)?3:0}var lw=(e,t,r=Tc(e))=>r===2?e.has(t):Kr[Kf].hasOwnProperty.call(e,t),ay=(e,t,r=Tc(e))=>r===2?e.get(t):e[t],Jd=(e,t,r,n=Tc(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function z5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Wf=Array.isArray,Zf=e=>e instanceof Map,Jf=e=>e instanceof Set,vx=e=>typeof e=="object",El=e=>typeof e=="function",lg=e=>typeof e=="boolean";function D5(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Sa=e=>e.copy_||e.base_,gx=e=>e.modified_?e.copy_:e.base_;function iy(e,t){if(Zf(e))return new Map(e);if(Jf(e))return new Set(e);if(Wf(e))return Array[Kf].slice.call(e);const r=oE(e);if(t===!0||t==="class_only"&&!r){const n=Kr.getOwnPropertyDescriptors(e);delete n[Sr];let l=Reflect.ownKeys(n);for(let o=0;o<l.length;o++){const u=l[o],f=n[u];f[kd]===!1&&(f[kd]=!0,f[ny]=!0),(f.get||f.set)&&(n[u]={[ny]:!0,[kd]:!0,[Zd]:f[Zd],[pc]:e[u]})}return Kr.create(Il(e),n)}else{const n=Il(e);if(n!==null&&r)return{...e};const l=Kr.create(n);return Kr.assign(l,e)}}function yx(e,t=!1){return em(e)||Ta(e)||!Rn(e)||(Tc(e)>1&&Kr.defineProperties(e,{set:hd,add:hd,clear:hd,delete:hd}),Kr.freeze(e),t&&Xf(e,(r,n)=>{yx(n,!0)},!1)),e}function M5(){On(2)}var hd={[pc]:M5};function em(e){return e===null||!vx(e)?!0:Kr.isFrozen(e)}var ef="MapSet",sy="Patches",ow="ArrayMethods",cE={};function xs(e){const t=cE[e];return t||On(0,e),t}var cw=e=>!!cE[e],vc,uE=()=>vc,T5=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cw(ef)?xs(ef):void 0,arrayMethodsPlugin_:cw(ow)?xs(ow):void 0});function uw(e,t){t&&(e.patchPlugin_=xs(sy),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ly(e){oy(e),e.drafts_.forEach(k5),e.drafts_=null}function oy(e){e===vc&&(vc=e.parent_)}var dw=e=>vc=T5(vc,e);function k5(e){const t=e[Sr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function fw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Sr].modified_&&(ly(t),On(4)),Rn(e)&&(e=mw(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(r[Sr].base_,e,t)}else e=mw(t,r);return P5(t,e,!0),ly(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lE?e:void 0}function mw(e,t){if(em(t))return t;const r=t[Sr];if(!r)return tf(t,e.handledSet_,e);if(!tm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);mE(r,e)}return r.copy_}function P5(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yx(t,r)}function dE(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var tm=(e,t)=>e.scope_===t,q5=[];function fE(e,t,r,n){const l=Sa(e),o=e.type_;if(n!==void 0&&ay(l,n,o)===t){Jd(l,n,r,o);return}if(!e.draftLocations_){const f=e.draftLocations_=new Map;Xf(l,(m,h)=>{if(Ta(h)){const p=f.get(h)||[];p.push(m),f.set(h,p)}})}const u=e.draftLocations_.get(t)??q5;for(const f of u)Jd(l,f,r,o)}function R5(e,t,r){e.callbacks_.push(function(l){const o=t;if(!o||!tm(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=gx(o);fE(e,o.draft_??o,u,r),mE(o,l)})}function mE(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const l=n.getPath(e);l&&n.generatePatches_(e,l,t)}dE(e)}}function L5(e,t,r){const{scope_:n}=e;if(Ta(r)){const l=r[Sr];tm(l,n)&&l.callbacks_.push(function(){Pd(e);const u=gx(l);fE(e,r,u,t)})}else Rn(r)&&e.callbacks_.push(function(){const o=Sa(e);e.type_===3?o.has(r)&&tf(r,n.handledSet_,n):ay(o,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&tf(ay(e.copy_,t,e.type_),n.handledSet_,n)})}function tf(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ta(e)||t.has(e)||!Rn(e)||em(e)||(t.add(e),Xf(e,(n,l)=>{if(Ta(l)){const o=l[Sr];if(tm(o,r)){const u=gx(o);Jd(e,n,u,e.type_),dE(o)}}else Rn(l)&&tf(l,t,r)})),e}function I5(e,t){const r=Wf(e),n={type_:r?1:0,scope_:t?t.scope_:uE(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=n,o=rf;r&&(l=[n],o=gc);const{revoke:u,proxy:f}=Proxy.revocable(l,o);return n.draft_=f,n.revoke_=u,[f,n]}var rf={get(e,t){if(t===Sr)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const l=Sa(e);if(!lw(l,t,e.type_))return B5(e,l,t);const o=l[t];if(e.finalized_||!Rn(o)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&D5(t))return o;if(o===og(e.base_,t)){Pd(e);const u=e.type_===1?+t:t,f=uy(e.scope_,o,e,u);return e.copy_[u]=f}return o},has(e,t){return t in Sa(e)},ownKeys(e){return Reflect.ownKeys(Sa(e))},set(e,t,r){const n=hE(Sa(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const l=og(Sa(e),t),o=l?.[Sr];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(z5(r,l)&&(r!==void 0||lw(e.base_,t,e.type_)))return!0;Pd(e),cy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),L5(e,t,r)),!0},deleteProperty(e,t){return Pd(e),og(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),cy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Sa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[kd]:!0,[ny]:e.type_!==1||t!=="length",[Zd]:n[Zd],[pc]:r[t]}},defineProperty(){On(11)},getPrototypeOf(e){return Il(e.base_)},setPrototypeOf(){On(12)}},gc={};for(let e in rf){let t=rf[e];gc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}gc.deleteProperty=function(e,t){return gc.set.call(this,e,t,void 0)};gc.set=function(e,t,r){return rf.set.call(this,e[0],t,r,e[0])};function og(e,t){const r=e[Sr];return(r?Sa(r):e)[t]}function B5(e,t,r){const n=hE(t,r);return n?pc in n?n[pc]:n.get?.call(e.draft_):void 0}function hE(e,t){if(!(t in e))return;let r=Il(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Il(r)}}function cy(e){e.modified_||(e.modified_=!0,e.parent_&&cy(e.parent_))}function Pd(e){e.copy_||(e.assigned_=new Map,e.copy_=iy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $5=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,l)=>{if(El(r)&&!El(n)){const u=n;n=r;const f=this;return function(h=u,...p){return f.produce(h,v=>n.call(this,v,...p))}}El(n)||On(6),l!==void 0&&!El(l)&&On(7);let o;if(Rn(r)){const u=dw(this),f=uy(u,r,void 0);let m=!0;try{o=n(f),m=!1}finally{m?ly(u):oy(u)}return uw(u,l),fw(o,u)}else if(!r||!vx(r)){if(o=n(r),o===void 0&&(o=r),o===lE&&(o=void 0),this.autoFreeze_&&yx(o,!0),l){const u=[],f=[];xs(sy).generateReplacementPatches_(r,o,{patches_:u,inversePatches_:f}),l(u,f)}return o}else On(1,r)},this.produceWithPatches=(r,n)=>{if(El(r))return(f,...m)=>this.produceWithPatches(f,h=>r(h,...m));let l,o;return[this.produce(r,n,(f,m)=>{l=f,o=m}),l,o]},lg(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),lg(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),lg(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Rn(t)||On(8),Ta(t)&&(t=kn(t));const r=dw(this),n=uy(r,t,void 0);return n[Sr].isManual_=!0,oy(r),n}finishDraft(t,r){const n=t&&t[Sr];(!n||!n.isManual_)&&On(9);const{scope_:l}=n;return uw(l,r),fw(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const o=r[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(r=r.slice(n+1));const l=xs(sy).applyPatches_;return Ta(t)?l(t,r):this.produce(t,o=>l(o,r))}};function uy(e,t,r,n){const[l,o]=Zf(t)?xs(ef).proxyMap_(t,r):Jf(t)?xs(ef).proxySet_(t,r):I5(t,r);return(r?.scope_??uE()).drafts_.push(l),o.callbacks_=r?.callbacks_??[],o.key_=n,r&&n!==void 0?R5(r,o,n):o.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:h}=m;o.modified_&&h&&h.generatePatches_(o,[],m)}),l}function kn(e){return Ta(e)||On(10,e),pE(e)}function pE(e){if(!Rn(e)||em(e))return e;const t=e[Sr];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=iy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=iy(e,!0);return Xf(r,(l,o)=>{Jd(r,l,pE(o))},n),t&&(t.finalized_=!1),r}var U5=new $5,vE=U5.produce;function gE(e){return({dispatch:r,getState:n})=>l=>o=>typeof o=="function"?o(r,n,e):l(o)}var H5=gE(),G5=gE,Q5=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Xd:Xd.apply(null,arguments)};function jn(e,t){function r(...n){if(t){let l=t(...n);if(!l)throw new Error(Xr(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>sE(n)&&n.type===e,r}var yE=class lc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,lc.prototype)}static get[Symbol.species](){return lc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new lc(...t[0].concat(this)):new lc(...t.concat(this))}};function hw(e){return Rn(e)?vE(e,()=>{}):e}function pd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function F5(e){return typeof e=="boolean"}var V5=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let u=new yE;return r&&(F5(r)?u.push(H5):u.push(G5(r.extraArgument))),u},xE="RTK_autoBatch",Nt=()=>e=>({payload:e,meta:{[xE]:!0}}),pw=e=>t=>{setTimeout(t,e)},bE=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let l=!0,o=!1,u=!1;const f=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pw(10):e.type==="callback"?e.queueNotification:pw(e.timeout),h=()=>{u=!1,o&&(o=!1,f.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const v=()=>l&&p(),y=n.subscribe(v);return f.add(p),()=>{y(),f.delete(p)}},dispatch(p){try{return l=!p?.meta?.[xE],o=!l,o&&(u||(u=!0,m(h))),n.dispatch(p)}finally{l=!0}}})},Y5=e=>function(r){const{autoBatch:n=!0}=r??{};let l=new yE(e);return n&&l.push(bE(typeof n=="object"?n:void 0)),l};function K5(e){const t=V5(),{reducer:r=void 0,middleware:n,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let f;if(typeof r=="function")f=r;else if(px(r))f=iE(r);else throw new Error(Xr(1));let m;typeof n=="function"?m=n(t):m=t();let h=Xd;l&&(h=Q5({trace:!1,...typeof l=="object"&&l}));const p=E5(...m),v=Y5(p);let y=typeof u=="function"?u(v):v();const b=h(...y);return aE(f,o,b)}function jE(e){const t={},r=[];let n;const l={addCase(o,u){const f=typeof o=="string"?o:o.type;if(!f)throw new Error(Xr(28));if(f in t)throw new Error(Xr(29));return t[f]=u,l},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return r.push({matcher:o,reducer:u}),l},addDefaultCase(o){return n=o,l}};return e(l),[t,r,n]}function X5(e){return typeof e=="function"}function W5(e,t){let[r,n,l]=jE(t),o;if(X5(e))o=()=>hw(e());else{const f=hw(e);o=()=>f}function u(f=o(),m){let h=[r[m.type],...n.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[l]),h.reduce((p,v)=>{if(v)if(Ta(p)){const b=v(p,m);return b===void 0?p:b}else{if(Rn(p))return vE(p,y=>v(y,m));{const y=v(p,m);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},f)}return u.getInitialState=o,u}var Z5="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",J5=(e=21)=>{let t="",r=e;for(;r--;)t+=Z5[Math.random()*64|0];return t},e4=Symbol.for("rtk-slice-createasyncthunk");function t4(e,t){return`${e}/${t}`}function r4({creators:e}={}){const t=e?.asyncThunk?.[e4];return function(n){const{name:l,reducerPath:o=l}=n;if(!l)throw new Error(Xr(11));const u=(typeof n.reducers=="function"?n.reducers(a4()):n.reducers)||{},f=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(C,E){const z=typeof C=="string"?C:C.type;if(!z)throw new Error(Xr(12));if(z in m.sliceCaseReducersByType)throw new Error(Xr(13));return m.sliceCaseReducersByType[z]=E,h},addMatcher(C,E){return m.sliceMatchers.push({matcher:C,reducer:E}),h},exposeAction(C,E){return m.actionCreators[C]=E,h},exposeCaseReducer(C,E){return m.sliceCaseReducersByName[C]=E,h}};f.forEach(C=>{const E=u[C],z={reducerName:C,type:t4(l,C),createNotation:typeof n.reducers=="function"};s4(E)?o4(z,E,h,t):i4(z,E,h)});function p(){const[C={},E=[],z=void 0]=typeof n.extraReducers=="function"?jE(n.extraReducers):[n.extraReducers],M={...C,...m.sliceCaseReducersByType};return W5(n.initialState,L=>{for(let T in M)L.addCase(T,M[T]);for(let T of m.sliceMatchers)L.addMatcher(T.matcher,T.reducer);for(let T of E)L.addMatcher(T.matcher,T.reducer);z&&L.addDefaultCase(z)})}const v=C=>C,y=new Map,b=new WeakMap;let _;function N(C,E){return _||(_=p()),_(C,E)}function w(){return _||(_=p()),_.getInitialState()}function S(C,E=!1){function z(L){let T=L[C];return typeof T>"u"&&E&&(T=pd(b,z,w)),T}function M(L=v){const T=pd(y,E,()=>new WeakMap);return pd(T,L,()=>{const k={};for(const[Y,X]of Object.entries(n.selectors??{}))k[Y]=n4(X,L,()=>pd(b,L,w),E);return k})}return{reducerPath:C,getSelectors:M,get selectors(){return M(z)},selectSlice:z}}const O={name:l,reducer:N,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:w,...S(o),injectInto(C,{reducerPath:E,...z}={}){const M=E??o;return C.inject({reducerPath:M,reducer:N},z),{...O,...S(M,!0)}}};return O}}function n4(e,t,r,n){function l(o,...u){let f=t(o);return typeof f>"u"&&n&&(f=r()),e(f,...u)}return l.unwrapped=e,l}var Ir=r4();function a4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function i4({type:e,reducerName:t,createNotation:r},n,l){let o,u;if("reducer"in n){if(r&&!l4(n))throw new Error(Xr(17));o=n.reducer,u=n.prepare}else o=n;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?jn(e,u):jn(e))}function s4(e){return e._reducerDefinitionType==="asyncThunk"}function l4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function o4({type:e,reducerName:t},r,n,l){if(!l)throw new Error(Xr(18));const{payloadCreator:o,fulfilled:u,pending:f,rejected:m,settled:h,options:p}=r,v=l(e,o,p);n.exposeAction(t,v),u&&n.addCase(v.fulfilled,u),f&&n.addCase(v.pending,f),m&&n.addCase(v.rejected,m),h&&n.addMatcher(v.settled,h),n.exposeCaseReducer(t,{fulfilled:u||vd,pending:f||vd,rejected:m||vd,settled:h||vd})}function vd(){}var c4="task",NE="listener",_E="completed",xx="cancelled",u4=`task-${xx}`,d4=`task-${_E}`,dy=`${NE}-${xx}`,f4=`${NE}-${_E}`,rm=class{constructor(e){this.code=e,this.message=`${c4} ${xx} (reason: ${e})`}name="TaskAbortError";message},bx=(e,t)=>{if(typeof e!="function")throw new TypeError(Xr(32))},nf=()=>{},wE=(e,t=nf)=>(e.catch(t),e),SE=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),hs=e=>{if(e.aborted)throw new rm(e.reason)};function AE(e,t){let r=nf;return new Promise((n,l)=>{const o=()=>l(new rm(e.reason));if(e.aborted){o();return}r=SE(e,o),t.finally(()=>r()).then(n,l)}).finally(()=>{r=nf})}var m4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof rm?"cancelled":"rejected",error:r}}finally{t?.()}},af=e=>t=>wE(AE(e,t).then(r=>(hs(e),r))),CE=e=>{const t=af(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ml}=Object,vw={},nm="listenerMiddleware",h4=(e,t)=>{const r=n=>SE(e,()=>n.abort(e.reason));return(n,l)=>{bx(n);const o=new AbortController;r(o);const u=m4(async()=>{hs(e),hs(o.signal);const f=await n({pause:af(o.signal),delay:CE(o.signal),signal:o.signal});return hs(o.signal),f},()=>o.abort(d4));return l?.autoJoin&&t.push(u.catch(nf)),{result:af(e)(u),cancel(){o.abort(u4)}}}},p4=(e,t)=>{const r=async(n,l)=>{hs(t);let o=()=>{};const f=[new Promise((m,h)=>{let p=e({predicate:n,effect:(v,y)=>{y.unsubscribe(),m([v,y.getState(),y.getOriginalState()])}});o=()=>{p(),h()}})];l!=null&&f.push(new Promise(m=>setTimeout(m,l,null)));try{const m=await AE(t,Promise.race(f));return hs(t),m}finally{o()}};return(n,l)=>wE(r(n,l))},EE=e=>{let{type:t,actionCreator:r,matcher:n,predicate:l,effect:o}=e;if(t)l=jn(t).match;else if(r)t=r.type,l=r.match;else if(n)l=n;else if(!l)throw new Error(Xr(21));return bx(o),{predicate:l,type:t,effect:o}},OE=Ml(e=>{const{type:t,predicate:r,effect:n}=EE(e);return{id:J5(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Xr(22))}}},{withTypes:()=>OE}),gw=(e,t)=>{const{type:r,effect:n,predicate:l}=EE(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===l)&&o.effect===n)},fy=e=>{e.pending.forEach(t=>{t.abort(dy)})},v4=(e,t)=>()=>{for(const r of t.keys())fy(r);e.clear()},yw=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},zE=Ml(jn(`${nm}/add`),{withTypes:()=>zE}),g4=jn(`${nm}/removeAll`),DE=Ml(jn(`${nm}/remove`),{withTypes:()=>DE}),y4=(...e)=>{console.error(`${nm}/error`,...e)},kc=(e={})=>{const t=new Map,r=new Map,n=b=>{const _=r.get(b)??0;r.set(b,_+1)},l=b=>{const _=r.get(b)??1;_===1?r.delete(b):r.set(b,_-1)},{extra:o,onError:u=y4}=e;bx(u);const f=b=>(b.unsubscribe=()=>t.delete(b.id),t.set(b.id,b),_=>{b.unsubscribe(),_?.cancelActive&&fy(b)}),m=b=>{const _=gw(t,b)??OE(b);return f(_)};Ml(m,{withTypes:()=>m});const h=b=>{const _=gw(t,b);return _&&(_.unsubscribe(),b.cancelActive&&fy(_)),!!_};Ml(h,{withTypes:()=>h});const p=async(b,_,N,w)=>{const S=new AbortController,O=p4(m,S.signal),C=[];try{b.pending.add(S),n(b),await Promise.resolve(b.effect(_,Ml({},N,{getOriginalState:w,condition:(E,z)=>O(E,z).then(Boolean),take:O,delay:CE(S.signal),pause:af(S.signal),extra:o,signal:S.signal,fork:h4(S.signal,C),unsubscribe:b.unsubscribe,subscribe:()=>{t.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((E,z,M)=>{E!==S&&(E.abort(dy),M.delete(E))})},cancel:()=>{S.abort(dy),b.pending.delete(S)},throwIfCancelled:()=>{hs(S.signal)}})))}catch(E){E instanceof rm||yw(u,E,{raisedBy:"effect"})}finally{await Promise.all(C),S.abort(f4),l(b),b.pending.delete(S)}},v=v4(t,r);return{middleware:b=>_=>N=>{if(!sE(N))return _(N);if(zE.match(N))return m(N.payload);if(g4.match(N)){v();return}if(DE.match(N))return h(N.payload);let w=b.getState();const S=()=>{if(w===vw)throw new Error(Xr(23));return w};let O;try{if(O=_(N),t.size>0){const C=b.getState(),E=Array.from(t.values());for(const z of E){let M=!1;try{M=z.predicate(N,C,w)}catch(L){M=!1,yw(u,L,{raisedBy:"predicate"})}M&&p(z,N,b,S)}}}finally{w=vw}return O},startListening:m,stopListening:h,clearListeners:v}};function Xr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var x4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ME=Ir({name:"chartLayout",initialState:x4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,l,o;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:b4,setLayout:j4,setChartSize:N4,setScale:_4}=ME.actions,w4=ME.reducer;function TE(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Ke(e){return Number.isFinite(e)}function ra(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(r),!0).forEach(function(n){S4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S4(e,t,r){return(t=A4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A4(e){var t=C4(e,"string");return typeof t=="symbol"?t:t+""}function C4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $t(e,t,r){return St(e)||St(t)?r:ta(t)?Ll(e,t,r):typeof t=="function"?t(e):r}var E4=(e,t,r)=>{if(t&&r){var{width:n,height:l}=r,{align:o,verticalAlign:u,layout:f}=t;if((f==="vertical"||f==="horizontal"&&u==="middle")&&o!=="center"&&Ne(e[o]))return Ol(Ol({},e),{},{[o]:e[o]+(n||0)});if((f==="horizontal"||f==="vertical"&&o==="center")&&u!=="middle"&&Ne(e[u]))return Ol(Ol({},e),{},{[u]:e[u]+(l||0)})}return e},$a=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",kE=(e,t,r,n)=>{if(n)return e.map(f=>f.coordinate);var l,o,u=e.map(f=>(f.coordinate===t&&(l=!0),f.coordinate===r&&(o=!0),f.coordinate));return l||u.push(t),o||u.push(r),u},PE=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:l,range:o,scale:u,realScaleType:f,isCategorical:m,categoricalDomain:h,tickCount:p,ticks:v,niceTicks:y,axisType:b}=e;if(!u)return null;var _=f==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,N=l==="category"&&u.bandwidth?u.bandwidth()/_:0;if(N=b==="angleAxis"&&o&&o.length>=2?qr(o[0]-o[1])*2*N:N,v||y){var w=(v||y||[]).map((S,O)=>{var C=n?n.indexOf(S):S,E=u.map(C);return Ke(E)?{coordinate:E+N,value:S,offset:N,index:O}:null}).filter(Rr);return w}return m&&h?h.map((S,O)=>{var C=u.map(S);return Ke(C)?{coordinate:C+N,value:S,index:O,offset:N}:null}).filter(Rr):u.ticks&&p!=null?u.ticks(p).map((S,O)=>{var C=u.map(S);return Ke(C)?{coordinate:C+N,value:S,index:O,offset:N}:null}).filter(Rr):u.domain().map((S,O)=>{var C=u.map(S);return Ke(C)?{coordinate:C+N,value:n?n[S]:S,index:O,offset:N}:null}).filter(Rr)},O4=(e,t)=>{if(!t||t.length!==2||!Ne(t[0])||!Ne(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!Ne(e[0])||e[0]<r)&&(l[0]=r),(!Ne(e[1])||e[1]>n)&&(l[1]=n),l[0]>n&&(l[0]=n),l[1]<r&&(l[1]=r),l},z4=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var l=0;l<n;++l)for(var o=0,u=0,f=0;f<r;++f){var m=e[f],h=m?.[l];if(h!=null){var p=h[1],v=h[0],y=ea(p)?v:p;y>=0?(h[0]=o,o+=y,h[1]=o):(h[0]=u,u+=y,h[1]=u)}}}},D4=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var l=0;l<n;++l)for(var o=0,u=0;u<r;++u){var f=e[u],m=f?.[l];if(m!=null){var h=ea(m[1])?m[0]:m[1];h>=0?(m[0]=o,o+=h,m[1]=o):(m[0]=0,m[1]=0)}}}},M4={sign:z4,expand:sR,none:gs,silhouette:lR,wiggle:oR,positive:D4},T4=(e,t,r)=>{var n,l=(n=M4[r])!==null&&n!==void 0?n:gs,o=iR().keys(t).value((f,m)=>Number($t(f,m,0))).order(ty).offset(l),u=o(e);return u.forEach((f,m)=>{f.forEach((h,p)=>{var v=$t(e[p],t[m],0);Array.isArray(v)&&v.length===2&&Ne(v[0])&&Ne(v[1])&&(h[0]=v[0],h[1]=v[1])})}),u};function k4(e){return e==null?void 0:String(e)}function bw(e){var{axis:t,ticks:r,bandSize:n,entry:l,index:o,dataKey:u}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!St(l[t.dataKey])){var f=U2(r,"value",l[t.dataKey]);if(f)return f.coordinate+n/2}return r!=null&&r[o]?r[o].coordinate+n/2:null}var m=$t(l,St(u)?t.dataKey:u),h=t.scale.map(m);return Ne(h)?h:null}var jw=e=>{var{axis:t,ticks:r,offset:n,bandSize:l,entry:o,index:u}=e;if(t.type==="category")return r[u]?r[u].coordinate+n:null;var f=$t(o,t.dataKey,t.scale.domain()[u]);if(St(f))return null;var m=t.scale.map(f);return Ne(m)?m-l/2+n:null},P4=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return n<=0&&l>=0?0:l<0?l:n}return r[0]},q4=e=>{var t=e.flat(2).filter(Ne);return[Math.min(...t),Math.max(...t)]},R4=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],L4=(e,t,r)=>{if(e!=null)return R4(Object.keys(e).reduce((n,l)=>{var o=e[l];if(!o)return n;var{stackedData:u}=o,f=u.reduce((m,h)=>{var p=TE(h,t,r),v=q4(p);return!Ke(v[0])||!Ke(v[1])?m:[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(f[0],n[0]),Math.max(f[1],n[1])]},[1/0,-1/0]))},Nw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_w=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Bl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var l=Yf(t,p=>p.coordinate),o=1/0,u=1,f=l.length;u<f;u++){var m=l[u],h=l[u-1];o=Math.min((m?.coordinate||0)-(h?.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function ww(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:l,name:o}=e;return Ol(Ol({},t),{},{dataKey:r,payload:n,value:l,name:o})}function am(e,t){if(e)return String(e);if(typeof t=="string")return t}var I4=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},B4=(e,t)=>t==="centric"?e.angle:e.radius,Ua=e=>e.layout.width,Ha=e=>e.layout.height,$4=e=>e.layout.scale,qE=e=>e.layout.margin,im=re(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),sm=re(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),U4="data-recharts-item-index",H4="data-recharts-item-id",Pc=60;function Sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(r),!0).forEach(function(n){G4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G4(e,t,r){return(t=Q4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q4(e){var t=F4(e,"string");return typeof t=="symbol"?t:t+""}function F4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V4=e=>e.brush.height;function Y4(e){var t=sm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var l=typeof n.width=="number"?n.width:Pc;return r+l}return r},0)}function K4(e){var t=sm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var l=typeof n.width=="number"?n.width:Pc;return r+l}return r},0)}function X4(e){var t=im(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function W4(e){var t=im(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var tr=re([Ua,Ha,qE,V4,Y4,K4,X4,W4,nE,N5],(e,t,r,n,l,o,u,f,m,h)=>{var p={left:(r.left||0)+l,right:(r.right||0)+o},v={top:(r.top||0)+u,bottom:(r.bottom||0)+f},y=gd(gd({},v),p),b=y.bottom;y.bottom+=n,y=E4(y,m,h);var _=e-y.left-y.right,N=t-y.top-y.bottom;return gd(gd({brushBottom:b},y),{},{width:Math.max(_,0),height:Math.max(N,0)})}),Z4=re(tr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),jx=re(Ua,Ha,(e,t)=>({x:0,y:0,width:e,height:t})),J4=j.createContext(null),xr=()=>j.useContext(J4)!=null,lm=e=>e.brush,om=re([lm,tr,qE],(e,t,r)=>({height:e.height,x:Ne(e.x)?e.x:t.left,y:Ne(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Ne(e.width)?e.width:t.width})),cg={},ug={},dg={},Aw;function eL(){return Aw||(Aw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:l,edges:o}={}){let u,f=null;const m=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),p=()=>{f!==null&&(r.apply(u,f),u=void 0,f=null)},v=()=>{h&&p(),N()};let y=null;const b=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,v()},n)},_=()=>{y!==null&&(clearTimeout(y),y=null)},N=()=>{_(),u=void 0,f=null},w=()=>{p()},S=function(...O){if(l?.aborted)return;u=this,f=O;const C=y==null;b(),m&&C&&p()};return S.schedule=b,S.cancel=N,S.flush=w,l?.addEventListener("abort",N,{once:!0}),S}e.debounce=t})(dg)),dg}var Cw;function tL(){return Cw||(Cw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eL();function r(n,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:f=!0,maxWait:m}=o,h=Array(2);u&&(h[0]="leading"),f&&(h[1]="trailing");let p,v=null;const y=t.debounce(function(...N){p=n.apply(this,N),v=null},l,{edges:h}),b=function(...N){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(p=n.apply(this,N),v=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,N),p)},_=()=>(y.flush(),p);return b.cancel=y.cancel,b.flush=_,b}e.debounce=r})(ug)),ug}var Ew;function rL(){return Ew||(Ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tL();function r(n,l=0,o={}){const{leading:u=!0,trailing:f=!0}=o;return t.debounce(n,l,{leading:u,maxWait:l,trailing:f})}e.throttle=r})(cg)),cg}var fg,Ow;function nL(){return Ow||(Ow=1,fg=rL().throttle),fg}var aL=nL();const iL=Ba(aL);var sf=function(t,r){for(var n=arguments.length,l=new Array(n>2?n-2:0),o=2;o<n;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(r.replace(/%s/g,()=>l[u++]))}},Xn={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},RE=(e,t,r)=>{var{width:n=Xn.width,height:l=Xn.height,aspect:o,maxHeight:u}=r,f=ys(n)?e:Number(n),m=ys(l)?t:Number(l);return o&&o>0&&(f?m=f/o:m&&(f=m*o),u&&m!=null&&m>u&&(m=u)),{calculatedWidth:f,calculatedHeight:m}},sL={width:0,height:0,overflow:"visible"},lL={width:0,overflowX:"visible"},oL={height:0,overflowY:"visible"},cL={},uL=e=>{var{width:t,height:r}=e,n=ys(t),l=ys(r);return n&&l?sL:n?lL:l?oL:cL};function dL(e){var{width:t,height:r,aspect:n}=e,l=t,o=r;return l===void 0&&o===void 0?(l=Xn.width,o=Xn.height):l===void 0?l=n&&n>0?void 0:Xn.width:o===void 0&&(o=n&&n>0?void 0:Xn.height),{width:l,height:o}}function my(){return my=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},my.apply(null,arguments)}function zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Dw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zw(Object(r),!0).forEach(function(n){fL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fL(e,t,r){return(t=mL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mL(e){var t=hL(e,"string");return typeof t=="symbol"?t:t+""}function hL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LE=j.createContext(Xn.initialDimension);function pL(e){return ra(e.width)&&ra(e.height)}function IE(e){var{children:t,width:r,height:n}=e,l=j.useMemo(()=>({width:r,height:n}),[r,n]);return pL(l)?j.createElement(LE.Provider,{value:l},t):null}var Nx=()=>j.useContext(LE),vL=j.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=Xn.initialDimension,width:l,height:o,minWidth:u=Xn.minWidth,minHeight:f,maxHeight:m,children:h,debounce:p=Xn.debounce,id:v,className:y,onResize:b,style:_={}}=e,N=j.useRef(null),w=j.useRef();w.current=b,j.useImperativeHandle(t,()=>N.current);var[S,O]=j.useState({containerWidth:n.width,containerHeight:n.height}),C=j.useCallback((T,k)=>{O(Y=>{var X=Math.round(T),B=Math.round(k);return Y.containerWidth===X&&Y.containerHeight===B?Y:{containerWidth:X,containerHeight:B}})},[]);j.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return As;var T=B=>{var le,ue=B[0];if(ue!=null){var{width:Q,height:P}=ue.contentRect;C(Q,P),(le=w.current)===null||le===void 0||le.call(w,Q,P)}};p>0&&(T=iL(T,p,{trailing:!0,leading:!1}));var k=new ResizeObserver(T),{width:Y,height:X}=N.current.getBoundingClientRect();return C(Y,X),k.observe(N.current),()=>{k.disconnect()}},[C,p]);var{containerWidth:E,containerHeight:z}=S;sf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:L}=RE(E,z,{width:l,height:o,aspect:r,maxHeight:m});return sf(M!=null&&M>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,L,l,o,u,f,r),j.createElement("div",{id:v?"".concat(v):void 0,className:ut("recharts-responsive-container",y),style:Dw(Dw({},_),{},{width:l,height:o,minWidth:u,minHeight:f,maxHeight:m}),ref:N},j.createElement("div",{style:uL({width:l,height:o})},j.createElement(IE,{width:M,height:L},h)))}),Mw=j.forwardRef((e,t)=>{var r=Nx();if(ra(r.width)&&ra(r.height))return e.children;var{width:n,height:l}=dL({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=RE(void 0,void 0,{width:n,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Ne(o)&&Ne(u)?j.createElement(IE,{width:o,height:u},e.children):j.createElement(vL,my({},e,{width:n,height:l,ref:t}))});function _x(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var cm=()=>{var e,t=xr(),r=Ae(Z4),n=Ae(om),l=(e=Ae(lm))===null||e===void 0?void 0:e.padding;return!t||!n||!l?r:{width:n.width-l.left-l.right,height:n.height-l.top-l.bottom,x:l.left,y:l.top}},gL={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},BE=()=>{var e;return(e=Ae(tr))!==null&&e!==void 0?e:gL},$E=()=>Ae(Ua),UE=()=>Ae(Ha),nt=e=>e.layout.layoutType,Cs=()=>Ae(nt),HE=()=>{var e=Cs();if(e==="horizontal"||e==="vertical")return e},GE=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},yL=()=>{var e=Cs();return e!==void 0},qc=e=>{var t=Pt(),r=xr(),{width:n,height:l}=e,o=Nx(),u=n,f=l;return o&&(u=o.width>0?o.width:n,f=o.height>0?o.height:l),j.useEffect(()=>{!r&&ra(u)&&ra(f)&&t(N4({width:u,height:f}))},[t,r,u,f]),null},QE=Symbol.for("immer-nothing"),Tw=Symbol.for("immer-draftable"),Wr=Symbol.for("immer-state");function zn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yc=Object.getPrototypeOf;function $l(e){return!!e&&!!e[Wr]}function bs(e){return e?FE(e)||Array.isArray(e)||!!e[Tw]||!!e.constructor?.[Tw]||Rc(e)||dm(e):!1}var xL=Object.prototype.constructor.toString(),kw=new WeakMap;function FE(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=kw.get(r);return n===void 0&&(n=Function.toString.call(r),kw.set(r,n)),n===xL}function lf(e,t,r=!0){um(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((n,l)=>t(l,n,e))}function um(e){const t=e[Wr];return t?t.type_:Array.isArray(e)?1:Rc(e)?2:dm(e)?3:0}function hy(e,t){return um(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function VE(e,t,r){const n=um(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function bL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Rc(e){return e instanceof Map}function dm(e){return e instanceof Set}function is(e){return e.copy_||e.base_}function py(e,t){if(Rc(e))return new Map(e);if(dm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=FE(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Wr];let l=Reflect.ownKeys(n);for(let o=0;o<l.length;o++){const u=l[o],f=n[u];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(n[u]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[u]})}return Object.create(yc(e),n)}else{const n=yc(e);if(n!==null&&r)return{...e};const l=Object.create(n);return Object.assign(l,e)}}function wx(e,t=!1){return fm(e)||$l(e)||!bs(e)||(um(e)>1&&Object.defineProperties(e,{set:yd,add:yd,clear:yd,delete:yd}),Object.freeze(e),t&&Object.values(e).forEach(r=>wx(r,!0))),e}function jL(){zn(2)}var yd={value:jL};function fm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var NL={};function js(e){const t=NL[e];return t||zn(0,e),t}var xc;function YE(){return xc}function _L(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Pw(e,t){t&&(js("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function vy(e){gy(e),e.drafts_.forEach(wL),e.drafts_=null}function gy(e){e===xc&&(xc=e.parent_)}function qw(e){return xc=_L(xc,e)}function wL(e){const t=e[Wr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Rw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Wr].modified_&&(vy(t),zn(4)),bs(e)&&(e=of(t,e),t.parent_||cf(t,e)),t.patches_&&js("Patches").generateReplacementPatches_(r[Wr].base_,e,t.patches_,t.inversePatches_)):e=of(t,r,[]),vy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==QE?e:void 0}function of(e,t,r){if(fm(t))return t;const n=e.immer_.shouldUseStrictIteration(),l=t[Wr];if(!l)return lf(t,(o,u)=>Lw(e,l,t,o,u,r),n),t;if(l.scope_!==e)return t;if(!l.modified_)return cf(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,f=!1;l.type_===3&&(u=new Set(o),o.clear(),f=!0),lf(u,(m,h)=>Lw(e,l,o,m,h,r,f),n),cf(e,o,!1),r&&e.patches_&&js("Patches").generatePatches_(l,r,e.patches_,e.inversePatches_)}return l.copy_}function Lw(e,t,r,n,l,o,u){if(l==null||typeof l!="object"&&!u)return;const f=fm(l);if(!(f&&!u)){if($l(l)){const m=o&&t&&t.type_!==3&&!hy(t.assigned_,n)?o.concat(n):void 0,h=of(e,l,m);if(VE(r,n,h),$l(h))e.canAutoFreeze_=!1;else return}else u&&r.add(l);if(bs(l)&&!f){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===l&&f)return;of(e,l),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Rc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&cf(e,l)}}}function cf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wx(t,r)}function SL(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:YE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=n,o=Sx;r&&(l=[n],o=bc);const{revoke:u,proxy:f}=Proxy.revocable(l,o);return n.draft_=f,n.revoke_=u,f}var Sx={get(e,t){if(t===Wr)return e;const r=is(e);if(!hy(r,t))return AL(e,r,t);const n=r[t];return e.finalized_||!bs(n)?n:n===mg(e.base_,t)?(hg(e),e.copy_[t]=xy(n,e)):n},has(e,t){return t in is(e)},ownKeys(e){return Reflect.ownKeys(is(e))},set(e,t,r){const n=KE(is(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const l=mg(is(e),t),o=l?.[Wr];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(bL(r,l)&&(r!==void 0||hy(e.base_,t)))return!0;hg(e),yy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return mg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,hg(e),yy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=is(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){zn(11)},getPrototypeOf(e){return yc(e.base_)},setPrototypeOf(){zn(12)}},bc={};lf(Sx,(e,t)=>{bc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});bc.deleteProperty=function(e,t){return bc.set.call(this,e,t,void 0)};bc.set=function(e,t,r){return Sx.set.call(this,e[0],t,r,e[0])};function mg(e,t){const r=e[Wr];return(r?is(r):e)[t]}function AL(e,t,r){const n=KE(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function KE(e,t){if(!(t in e))return;let r=yc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=yc(r)}}function yy(e){e.modified_||(e.modified_=!0,e.parent_&&yy(e.parent_))}function hg(e){e.copy_||(e.copy_=py(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var CL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const u=this;return function(m=o,...h){return u.produce(m,p=>r.call(this,p,...h))}}typeof r!="function"&&zn(6),n!==void 0&&typeof n!="function"&&zn(7);let l;if(bs(t)){const o=qw(this),u=xy(t,void 0);let f=!0;try{l=r(u),f=!1}finally{f?vy(o):gy(o)}return Pw(o,n),Rw(l,o)}else if(!t||typeof t!="object"){if(l=r(t),l===void 0&&(l=t),l===QE&&(l=void 0),this.autoFreeze_&&wx(l,!0),n){const o=[],u=[];js("Patches").generateReplacementPatches_(t,l,o,u),n(o,u)}return l}else zn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...f)=>this.produceWithPatches(u,m=>t(m,...f));let n,l;return[this.produce(t,r,(u,f)=>{n=u,l=f}),n,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){bs(e)||zn(8),$l(e)&&(e=EL(e));const t=qw(this),r=xy(e,void 0);return r[Wr].isManual_=!0,gy(t),r}finishDraft(e,t){const r=e&&e[Wr];(!r||!r.isManual_)&&zn(9);const{scope_:n}=r;return Pw(n,t),Rw(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const l=t[r];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}r>-1&&(t=t.slice(r+1));const n=js("Patches").applyPatches_;return $l(e)?n(e,t):this.produce(e,l=>n(l,t))}};function xy(e,t){const r=Rc(e)?js("MapSet").proxyMap_(e,t):dm(e)?js("MapSet").proxySet_(e,t):SL(e,t);return(t?t.scope_:YE()).drafts_.push(r),r}function EL(e){return $l(e)||zn(10,e),XE(e)}function XE(e){if(!bs(e)||fm(e))return e;const t=e[Wr];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=py(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=py(e,!0);return lf(r,(l,o)=>{VE(r,l,XE(o))},n),t&&(t.finalized_=!1),r}var OL=new CL;OL.produce;var zL={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},WE=Ir({name:"legend",initialState:zL,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Nt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,l=kn(e).payload.indexOf(r);l>-1&&(e.payload[l]=n)},prepare:Nt()},removeLegendPayload:{reducer(e,t){var r=kn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Nt()}}}),{setLegendSize:yX,setLegendSettings:xX,addLegendPayload:DL,replaceLegendPayload:ML,removeLegendPayload:TL}=WE.actions,kL=WE.reducer;function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},by.apply(null,arguments)}function Iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iw(Object(r),!0).forEach(function(n){PL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PL(e,t,r){return(t=qL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qL(e){var t=RL(e,"string");return typeof t=="symbol"?t:t+""}function RL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LL(e){return Array.isArray(e)&&ta(e[0])&&ta(e[1])?e.join(" ~ "):e}var Nl={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},IL=e=>{var{separator:t=Nl.separator,contentStyle:r,itemStyle:n,labelStyle:l=Nl.labelStyle,payload:o,formatter:u,itemSorter:f,wrapperClassName:m,labelClassName:h,label:p,labelFormatter:v,accessibilityLayer:y=Nl.accessibilityLayer}=e,b=()=>{if(o&&o.length){var z={padding:0,margin:0},M=(f?Yf(o,f):o).map((L,T)=>{if(L.type==="none")return null;var k=L.formatter||u||LL,{value:Y,name:X}=L,B=Y,le=X;if(k){var ue=k(Y,X,L,T,o);if(Array.isArray(ue))[B,le]=ue;else if(ue!=null)B=ue;else return null}var Q=Yo(Yo({},Nl.itemStyle),{},{color:L.color||Nl.itemStyle.color},n);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:Q},ta(le)?j.createElement("span",{className:"recharts-tooltip-item-name"},le):null,ta(le)?j.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,j.createElement("span",{className:"recharts-tooltip-item-value"},B),j.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:z},M)}return null},_=Yo(Yo({},Nl.contentStyle),r),N=Yo({margin:0},l),w=!St(p),S=w?p:"",O=ut("recharts-default-tooltip",m),C=ut("recharts-tooltip-label",h);w&&v&&o!==void 0&&o!==null&&(S=v(p,o));var E=y?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",by({className:O,style:_},E),j.createElement("p",{className:C,style:N},j.isValidElement(S)?S:"".concat(S)),b())},Ko="recharts-tooltip-wrapper",BL={visibility:"hidden"};function $L(e){var{coordinate:t,translateX:r,translateY:n}=e;return ut(Ko,{["".concat(Ko,"-right")]:Ne(r)&&t&&Ne(t.x)&&r>=t.x,["".concat(Ko,"-left")]:Ne(r)&&t&&Ne(t.x)&&r<t.x,["".concat(Ko,"-bottom")]:Ne(n)&&t&&Ne(t.y)&&n>=t.y,["".concat(Ko,"-top")]:Ne(n)&&t&&Ne(t.y)&&n<t.y})}function Bw(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:l,position:o,reverseDirection:u,tooltipDimension:f,viewBox:m,viewBoxDimension:h}=e;if(o&&Ne(o[n]))return o[n];var p=r[n]-f-(l>0?l:0),v=r[n]+l;if(t[n])return u[n]?p:v;var y=m[n];if(y==null)return 0;if(u[n]){var b=p,_=y;return b<_?Math.max(v,y):Math.max(p,y)}if(h==null)return 0;var N=v+f,w=y+h;return N>w?Math.max(p,y):Math.max(v,y)}function UL(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function HL(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:l,position:o,reverseDirection:u,tooltipBox:f,useTranslate3d:m,viewBox:h}=e,p,v,y;return f.height>0&&f.width>0&&r?(v=Bw({allowEscapeViewBox:t,coordinate:r,key:"x",offset:l,position:o,reverseDirection:u,tooltipDimension:f.width,viewBox:h,viewBoxDimension:h.width}),y=Bw({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:o,reverseDirection:u,tooltipDimension:f.height,viewBox:h,viewBoxDimension:h.height}),p=UL({translateX:v,translateY:y,useTranslate3d:m})):p=BL,{cssProperties:p,cssClasses:$L({translateX:v,translateY:y,coordinate:r})}}function $w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$w(Object(r),!0).forEach(function(n){jy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$w(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jy(e,t,r){return(t=GL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GL(e){var t=QL(e,"string");return typeof t=="symbol"?t:t+""}function QL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class FL extends j.PureComponent{constructor(){super(...arguments),jy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),jy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:l,children:o,coordinate:u,hasPayload:f,isAnimationActive:m,offset:h,position:p,reverseDirection:v,useTranslate3d:y,viewBox:b,wrapperStyle:_,lastBoundingBox:N,innerRef:w,hasPortalFromProps:S}=this.props,O=typeof h=="number"?h:h.x,C=typeof h=="number"?h:h.y,{cssClasses:E,cssProperties:z}=HL({allowEscapeViewBox:r,coordinate:u,offsetLeft:O,offsetTop:C,position:p,reverseDirection:v,tooltipBox:{height:N.height,width:N.width},useTranslate3d:y,viewBox:b}),M=S?{}:xd(xd({transition:m&&t?"transform ".concat(n,"ms ").concat(l):void 0},z),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&f?"visible":"hidden",position:"absolute",top:0,left:0}),L=xd(xd({},M),{},{visibility:!this.state.dismissed&&t&&f?"visible":"hidden"},_);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:L,ref:w},o)}}var ZE=()=>{var e;return(e=Ae(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(null,arguments)}function Uw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Hw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uw(Object(r),!0).forEach(function(n){VL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VL(e,t,r){return(t=YL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YL(e){var t=KL(e,"string");return typeof t=="symbol"?t:t+""}function KL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gw={curveBasisClosed:Y3,curveBasisOpen:K3,curveBasis:V3,curveBumpX:T3,curveBumpY:k3,curveLinearClosed:X3,curveLinear:Ff,curveMonotoneX:W3,curveMonotoneY:Z3,curveNatural:J3,curveStep:eR,curveStepAfter:rR,curveStepBefore:tR},uf=e=>Ke(e.x)&&Ke(e.y),Qw=e=>e.base!=null&&uf(e.base)&&uf(e),Xo=e=>e.x,Wo=e=>e.y,XL=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Mc(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=Gw["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return Gw[r]||Ff},Fw={connectNulls:!1,type:"linear"},WL=e=>{var{type:t=Fw.type,points:r=[],baseLine:n,layout:l,connectNulls:o=Fw.connectNulls}=e,u=XL(t,l),f=o?r.filter(uf):r;if(Array.isArray(n)){var m,h=r.map((_,N)=>Hw(Hw({},_),{},{base:n[N]}));l==="vertical"?m=dd().y(Wo).x1(Xo).x0(_=>_.base.x):m=dd().x(Xo).y1(Wo).y0(_=>_.base.y);var p=m.defined(Qw).curve(u),v=o?h.filter(Qw):h;return p(v)}var y;l==="vertical"&&Ne(n)?y=dd().y(Wo).x1(Xo).x0(n):Ne(n)?y=dd().x(Xo).y1(Wo).y0(n):y=O2().x(Xo).y(Wo);var b=y.defined(uf).curve(u);return b(f)},JE=e=>{var{className:t,points:r,path:n,pathRef:l}=e,o=Cs();if((!r||!r.length)&&!n)return null;var u={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},f=r&&r.length?WL(u):n;return j.createElement("path",Ny({},Pn(e),ux(e),{className:ut("recharts-curve",t),d:f===null?void 0:f,ref:l}))},ZL=["x","y","top","left","width","height","className"];function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_y.apply(null,arguments)}function Vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function JL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vw(Object(r),!0).forEach(function(n){e6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e6(e,t,r){return(t=t6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t6(e){var t=r6(e,"string");return typeof t=="symbol"?t:t+""}function r6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n6(e,t){if(e==null)return{};var r,n,l=a6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function a6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var i6=(e,t,r,n,l,o)=>"M".concat(e,",").concat(l,"v").concat(n,"M").concat(o,",").concat(t,"h").concat(r),s6=e=>{var{x:t=0,y:r=0,top:n=0,left:l=0,width:o=0,height:u=0,className:f}=e,m=n6(e,ZL),h=JL({x:t,y:r,top:n,left:l,width:o,height:u},m);return!Ne(t)||!Ne(r)||!Ne(o)||!Ne(u)||!Ne(n)||!Ne(l)?null:j.createElement("path",_y({},wr(h),{className:ut("recharts-cross",f),d:i6(t,r,o,u,n,l)}))};function l6(e,t,r,n){var l=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-l,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Yw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(r),!0).forEach(function(n){o6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o6(e,t,r){return(t=c6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c6(e){var t=u6(e,"string");return typeof t=="symbol"?t:t+""}function u6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d6=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),eO=(e,t,r)=>e.map(n=>"".concat(d6(n)," ").concat(t,"ms ").concat(r)).join(","),f6=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(l=>n.includes(l))),jc=(e,t)=>Object.keys(t).reduce((r,n)=>Kw(Kw({},r),{},{[n]:e(n,t[n])}),{});function Xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(r),!0).forEach(function(n){m6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m6(e,t,r){return(t=h6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h6(e){var t=p6(e,"string");return typeof t=="symbol"?t:t+""}function p6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var df=(e,t,r)=>e+(t-e)*r,wy=e=>{var{from:t,to:r}=e;return t!==r},tO=(e,t,r)=>{var n=jc((l,o)=>{if(wy(o)){var[u,f]=e(o.from,o.to,o.velocity);return Ft(Ft({},o),{},{from:u,velocity:f})}return o},t);return r<1?jc((l,o)=>wy(o)&&n[l]!=null?Ft(Ft({},o),{},{velocity:df(o.velocity,n[l].velocity,r),from:df(o.from,n[l].from,r)}):o,t):tO(e,n,r-1)};function v6(e,t,r,n,l,o){var u,f=n.reduce((y,b)=>Ft(Ft({},y),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),m=()=>jc((y,b)=>b.from,f),h=()=>!Object.values(f).filter(wy).length,p=null,v=y=>{u||(u=y);var b=y-u,_=b/r.dt;f=tO(r,f,_),l(Ft(Ft(Ft({},e),t),m())),u=y,h()||(p=o.setTimeout(v))};return()=>(p=o.setTimeout(v),()=>{var y;(y=p)===null||y===void 0||y()})}function g6(e,t,r,n,l,o,u){var f=null,m=l.reduce((v,y)=>{var b=e[y],_=t[y];return b==null||_==null?v:Ft(Ft({},v),{},{[y]:[b,_]})},{}),h,p=v=>{h||(h=v);var y=(v-h)/n,b=jc((N,w)=>df(...w,r(y)),m);if(o(Ft(Ft(Ft({},e),t),b)),y<1)f=u.setTimeout(p);else{var _=jc((N,w)=>df(...w,r(1)),m);o(Ft(Ft(Ft({},e),t),_))}};return()=>(f=u.setTimeout(p),()=>{var v;(v=f)===null||v===void 0||v()})}const y6=(e,t,r,n,l,o)=>{var u=f6(e,t);return r==null?()=>(l(Ft(Ft({},e),t)),()=>{}):r.isStepper===!0?v6(e,t,r,u,l,o):g6(e,t,r,n,u,l,o)};var ff=1e-4,rO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],nO=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),Ww=(e,t)=>r=>{var n=rO(e,t);return nO(n,r)},x6=(e,t)=>r=>{var n=rO(e,t),l=[...n.map((o,u)=>o*u).slice(1),0];return nO(l,r)},b6=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var l=n.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},j6=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=b6(r[0]);if(l)return l}}return r.length===4?r:[0,0,1,1]},N6=(e,t,r,n)=>{var l=Ww(e,r),o=Ww(t,n),u=x6(e,r),f=h=>h>1?1:h<0?0:h,m=h=>{for(var p=h>1?1:h,v=p,y=0;y<8;++y){var b=l(v)-p,_=u(v);if(Math.abs(b-p)<ff||_<ff)return o(v);v=f(v-b/_)}return o(v)};return m.isStepper=!1,m},Zw=function(){return N6(...j6(...arguments))},_6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:l=17}=t,o=(u,f,m)=>{var h=-(u-f)*r,p=m*n,v=m+(h-p)*l/1e3,y=m*l/1e3+u;return Math.abs(y-f)<ff&&Math.abs(v)<ff?[f,0]:[y,v]};return o.isStepper=!0,o.dt=l,o},w6=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Zw(e);case"spring":return _6();default:if(e.split("(")[0]==="cubic-bezier")return Zw(e)}return typeof e=="function"?e:null};function S6(e){var t,r=()=>null,n=!1,l=null,o=u=>{if(!n){if(Array.isArray(u)){if(!u.length)return;var f=u,[m,...h]=f;if(typeof m=="number"){l=e.setTimeout(o.bind(null,h),m);return}o(m),l=e.setTimeout(o.bind(null,h));return}typeof u=="string"&&(t=u,r(t)),typeof u=="object"&&(t=u,r(t)),typeof u=="function"&&u()}};return{stop:()=>{n=!0},start:u=>{n=!1,l&&(l(),l=null),o(u)},subscribe:u=>(r=u,()=>{r=()=>null}),getTimeoutController:()=>e}}class A6{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),l=null,o=u=>{u-n>=r?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function C6(){return S6(new A6)}var E6=j.createContext(C6);function O6(e,t){var r=j.useContext(E6);return j.useMemo(()=>t??r(e),[e,t,r])}var z6=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),mm={isSsr:z6()},D6={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Jw={t:0},pg={t:1};function hm(e){var t=Cr(e,D6),{isActive:r,canBegin:n,duration:l,easing:o,begin:u,onAnimationEnd:f,onAnimationStart:m,children:h}=t,p=r==="auto"?!mm.isSsr:r,v=O6(t.animationId,t.animationManager),[y,b]=j.useState(p?Jw:pg),_=j.useRef(null);return j.useEffect(()=>{p||b(pg)},[p]),j.useEffect(()=>{if(!p||!n)return As;var N=y6(Jw,pg,w6(o),l,b,v.getTimeoutController()),w=()=>{_.current=N()};return v.start([m,u,w,l,f]),()=>{v.stop(),_.current&&_.current(),f()}},[p,n,l,o,u,m,f,v]),h(y.t)}function pm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=j.useRef(hc(t)),n=j.useRef(e);return n.current!==e&&(r.current=hc(t),n.current=e),r.current}var M6=["radius"],T6=["radius"],eS,tS,rS,nS,aS,iS,sS,lS,oS,cS;function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function dS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){k6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k6(e,t,r){return(t=P6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P6(e){var t=q6(e,"string");return typeof t=="symbol"?t:t+""}function q6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mf(){return mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mf.apply(null,arguments)}function fS(e,t){if(e==null)return{};var r,n,l=R6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function R6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Fn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mS=(e,t,r,n,l)=>{var o=Si(r),u=Si(n),f=Math.min(Math.abs(o)/2,Math.abs(u)/2),m=u>=0?1:-1,h=o>=0?1:-1,p=u>=0&&o>=0||u<0&&o<0?1:0,v;if(f>0&&Array.isArray(l)){for(var y=[0,0,0,0],b=0,_=4;b<_;b++){var N,w=(N=l[b])!==null&&N!==void 0?N:0;y[b]=w>f?f:w}v=zt(eS||(eS=Fn(["M",",",""])),e,t+m*y[0]),y[0]>0&&(v+=zt(tS||(tS=Fn(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,e+h*y[0],t)),v+=zt(rS||(rS=Fn(["L ",",",""])),e+r-h*y[1],t),y[1]>0&&(v+=zt(nS||(nS=Fn(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,e+r,t+m*y[1])),v+=zt(aS||(aS=Fn(["L ",",",""])),e+r,t+n-m*y[2]),y[2]>0&&(v+=zt(iS||(iS=Fn(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,e+r-h*y[2],t+n)),v+=zt(sS||(sS=Fn(["L ",",",""])),e+h*y[3],t+n),y[3]>0&&(v+=zt(lS||(lS=Fn(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,e,t+n-m*y[3])),v+="Z"}else if(f>0&&l===+l&&l>0){var S=Math.min(f,l);v=zt(oS||(oS=Fn(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*S,S,S,p,e+h*S,t,e+r-h*S,t,S,S,p,e+r,t+m*S,e+r,t+n-m*S,S,S,p,e+r-h*S,t+n,e+h*S,t+n,S,S,p,e,t+n-m*S)}else v=zt(cS||(cS=Fn(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return v},hS={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aO=e=>{var t=Cr(e,hS),r=j.useRef(null),[n,l]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var J=r.current.getTotalLength();J&&l(J)}catch{}},[]);var{x:o,y:u,width:f,height:m,radius:h,className:p}=t,{animationEasing:v,animationDuration:y,animationBegin:b,isAnimationActive:_,isUpdateAnimationActive:N}=t,w=j.useRef(f),S=j.useRef(m),O=j.useRef(o),C=j.useRef(u),E=j.useMemo(()=>({x:o,y:u,width:f,height:m,radius:h}),[o,u,f,m,h]),z=pm(E,"rectangle-");if(o!==+o||u!==+u||f!==+f||m!==+m||f===0||m===0)return null;var M=ut("recharts-rectangle",p);if(!N){var L=wr(t),{radius:T}=L,k=fS(L,M6);return j.createElement("path",mf({},k,{x:Si(o),y:Si(u),width:Si(f),height:Si(m),radius:typeof h=="number"?h:void 0,className:M,d:mS(o,u,f,m,h)}))}var Y=w.current,X=S.current,B=O.current,le=C.current,ue="0px ".concat(n===-1?1:n,"px"),Q="".concat(n,"px 0px"),P=eO(["strokeDasharray"],y,typeof v=="string"?v:hS.animationEasing);return j.createElement(hm,{animationId:z,key:z,canBegin:n>0,duration:y,easing:v,isActive:N,begin:b},J=>{var H=Dt(Y,f,J),ve=Dt(X,m,J),I=Dt(B,o,J),ge=Dt(le,u,J);r.current&&(w.current=H,S.current=ve,O.current=I,C.current=ge);var ee;_?J>0?ee={transition:P,strokeDasharray:Q}:ee={strokeDasharray:ue}:ee={strokeDasharray:Q};var fe=wr(t),{radius:ye}=fe,he=fS(fe,T6);return j.createElement("path",mf({},he,{radius:typeof h=="number"?h:void 0,className:M,d:mS(I,ge,H,ve,h),ref:r,style:dS(dS({},ee),t.style)}))})};function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function vS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){L6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L6(e,t,r){return(t=I6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I6(e){var t=B6(e,"string");return typeof t=="symbol"?t:t+""}function B6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hf=Math.PI/180,$6=e=>e*180/Math.PI,fr=(e,t,r,n)=>({x:e+Math.cos(-hf*n)*r,y:t+Math.sin(-hf*n)*r}),U6=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},H6=(e,t)=>{var{x:r,y:n}=e,{x:l,y:o}=t;return Math.sqrt((r-l)**2+(n-o)**2)},G6=(e,t)=>{var{x:r,y:n}=e,{cx:l,cy:o}=t,u=H6({x:r,y:n},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var f=(r-l)/u,m=Math.acos(f);return n>o&&(m=2*Math.PI-m),{radius:u,angle:$6(m),angleInRadian:m}},Q6=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),l=Math.floor(r/360),o=Math.min(n,l);return{startAngle:t-o*360,endAngle:r-o*360}},F6=(e,t)=>{var{startAngle:r,endAngle:n}=t,l=Math.floor(r/360),o=Math.floor(n/360),u=Math.min(l,o);return e+u*360},V6=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:l,angle:o}=G6({x:r,y:n},t),{innerRadius:u,outerRadius:f}=t;if(l<u||l>f||l===0)return null;var{startAngle:m,endAngle:h}=Q6(t),p=o,v;if(m<=h){for(;p>h;)p-=360;for(;p<m;)p+=360;v=p>=m&&p<=h}else{for(;p>m;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=m}return v?vS(vS({},t),{},{radius:l,angle:F6(p,t)}):null};function iO(e){var{cx:t,cy:r,radius:n,startAngle:l,endAngle:o}=e,u=fr(t,r,n,l),f=fr(t,r,n,o);return{points:[u,f],cx:t,cy:r,radius:n,startAngle:l,endAngle:o}}var gS,yS,xS,bS,jS,NS,_S;function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sy.apply(null,arguments)}function ls(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Y6=(e,t)=>{var r=qr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},bd=e=>{var{cx:t,cy:r,radius:n,angle:l,sign:o,isExternal:u,cornerRadius:f,cornerIsExternal:m}=e,h=f*(u?1:-1)+n,p=Math.asin(f/h)/hf,v=m?l:l+o*p,y=fr(t,r,h,v),b=fr(t,r,n,v),_=m?l-o*p:l,N=fr(t,r,h*Math.cos(p*hf),_);return{center:y,circleTangency:b,lineTangency:N,theta:p}},sO=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:l,startAngle:o,endAngle:u}=e,f=Y6(o,u),m=o+f,h=fr(t,r,l,o),p=fr(t,r,l,m),v=zt(gS||(gS=ls(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,l,l,+(Math.abs(f)>180),+(o>m),p.x,p.y);if(n>0){var y=fr(t,r,n,o),b=fr(t,r,n,m);v+=zt(yS||(yS=ls(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),b.x,b.y,n,n,+(Math.abs(f)>180),+(o<=m),y.x,y.y)}else v+=zt(xS||(xS=ls(["L ",","," Z"])),t,r);return v},K6=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:f,startAngle:m,endAngle:h}=e,p=qr(h-m),{circleTangency:v,lineTangency:y,theta:b}=bd({cx:t,cy:r,radius:l,angle:m,sign:p,cornerRadius:o,cornerIsExternal:f}),{circleTangency:_,lineTangency:N,theta:w}=bd({cx:t,cy:r,radius:l,angle:h,sign:-p,cornerRadius:o,cornerIsExternal:f}),S=f?Math.abs(m-h):Math.abs(m-h)-b-w;if(S<0)return u?zt(bS||(bS=ls(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,o,o,o*2,o,o,-o*2):sO({cx:t,cy:r,innerRadius:n,outerRadius:l,startAngle:m,endAngle:h});var O=zt(jS||(jS=ls(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,o,o,+(p<0),v.x,v.y,l,l,+(S>180),+(p<0),_.x,_.y,o,o,+(p<0),N.x,N.y);if(n>0){var{circleTangency:C,lineTangency:E,theta:z}=bd({cx:t,cy:r,radius:n,angle:m,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:f}),{circleTangency:M,lineTangency:L,theta:T}=bd({cx:t,cy:r,radius:n,angle:h,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:f}),k=f?Math.abs(m-h):Math.abs(m-h)-z-T;if(k<0&&o===0)return"".concat(O,"L").concat(t,",").concat(r,"Z");O+=zt(NS||(NS=ls(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,o,o,+(p<0),M.x,M.y,n,n,+(k>180),+(p>0),C.x,C.y,o,o,+(p<0),E.x,E.y)}else O+=zt(_S||(_S=ls(["L",",","Z"])),t,r);return O},X6={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lO=e=>{var t=Cr(e,X6),{cx:r,cy:n,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:f,cornerIsExternal:m,startAngle:h,endAngle:p,className:v}=t;if(o<l||h===p)return null;var y=ut("recharts-sector",v),b=o-l,_=qn(u,b,0,!0),N;return _>0&&Math.abs(h-p)<360?N=K6({cx:r,cy:n,innerRadius:l,outerRadius:o,cornerRadius:Math.min(_,b/2),forceCornerRadius:f,cornerIsExternal:m,startAngle:h,endAngle:p}):N=sO({cx:r,cy:n,innerRadius:l,outerRadius:o,startAngle:h,endAngle:p}),j.createElement("path",Sy({},wr(t),{className:y,d:N}))};function W6(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(Q2(t)){if(e==="centric"){var{cx:n,cy:l,innerRadius:o,outerRadius:u,angle:f}=t,m=fr(n,l,o,f),h=fr(n,l,u,f);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return iO(t)}}var vg={},gg={},yg={},wS;function Z6(){return wS||(wS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tE();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(yg)),yg}var SS;function J6(){return SS||(SS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z6();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(gg)),gg}var AS;function eI(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rE(),r=J6();function n(l,o,u){u&&typeof u!="number"&&t.isIterateeCall(l,o,u)&&(o=u=void 0),l=r.toFinite(l),o===void 0?(o=l,l=0):o=r.toFinite(o),u=u===void 0?l<o?1:-1:r.toFinite(u);const f=Math.max(Math.ceil((o-l)/(u||1)),0),m=new Array(f);for(let h=0;h<f;h++)m[h]=l,l+=u;return m}e.range=n})(vg)),vg}var xg,CS;function tI(){return CS||(CS=1,xg=eI().range),xg}var rI=tI();const oO=Ba(rI);function Ci(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nI(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ax(e){let t,r,n;e.length!==2?(t=Ci,r=(f,m)=>Ci(e(f),m),n=(f,m)=>e(f)-m):(t=e===Ci||e===nI?e:aI,r=e,n=e);function l(f,m,h=0,p=f.length){if(h<p){if(t(m,m)!==0)return p;do{const v=h+p>>>1;r(f[v],m)<0?h=v+1:p=v}while(h<p)}return h}function o(f,m,h=0,p=f.length){if(h<p){if(t(m,m)!==0)return p;do{const v=h+p>>>1;r(f[v],m)<=0?h=v+1:p=v}while(h<p)}return h}function u(f,m,h=0,p=f.length){const v=l(f,m,h,p-1);return v>h&&n(f[v-1],m)>-n(f[v],m)?v-1:v}return{left:l,center:u,right:o}}function aI(){return 0}function cO(e){return e===null?NaN:+e}function*iI(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const sI=Ax(Ci),Lc=sI.right;Ax(cO).center;class ES extends Map{constructor(t,r=cI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,l]of t)this.set(n,l)}get(t){return super.get(OS(this,t))}has(t){return super.has(OS(this,t))}set(t,r){return super.set(lI(this,t),r)}delete(t){return super.delete(oI(this,t))}}function OS({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function lI({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function oI({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function cI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function uI(e=Ci){if(e===Ci)return uO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function uO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const dI=Math.sqrt(50),fI=Math.sqrt(10),mI=Math.sqrt(2);function pf(e,t,r){const n=(t-e)/Math.max(0,r),l=Math.floor(Math.log10(n)),o=n/Math.pow(10,l),u=o>=dI?10:o>=fI?5:o>=mI?2:1;let f,m,h;return l<0?(h=Math.pow(10,-l)/u,f=Math.round(e*h),m=Math.round(t*h),f/h<e&&++f,m/h>t&&--m,h=-h):(h=Math.pow(10,l)*u,f=Math.round(e/h),m=Math.round(t/h),f*h<e&&++f,m*h>t&&--m),m<f&&.5<=r&&r<2?pf(e,t,r*2):[f,m,h]}function Ay(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[l,o,u]=n?pf(t,e,r):pf(e,t,r);if(!(o>=l))return[];const f=o-l+1,m=new Array(f);if(n)if(u<0)for(let h=0;h<f;++h)m[h]=(o-h)/-u;else for(let h=0;h<f;++h)m[h]=(o-h)*u;else if(u<0)for(let h=0;h<f;++h)m[h]=(l+h)/-u;else for(let h=0;h<f;++h)m[h]=(l+h)*u;return m}function Cy(e,t,r){return t=+t,e=+e,r=+r,pf(e,t,r)[2]}function Ey(e,t,r){t=+t,e=+e,r=+r;const n=t<e,l=n?Cy(t,e,r):Cy(e,t,r);return(n?-1:1)*(l<0?1/-l:l)}function zS(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function DS(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function dO(e,t,r=0,n=1/0,l){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(l=l===void 0?uO:uI(l);n>r;){if(n-r>600){const m=n-r+1,h=t-r+1,p=Math.log(m),v=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*v*(m-v)/m)*(h-m/2<0?-1:1),b=Math.max(r,Math.floor(t-h*v/m+y)),_=Math.min(n,Math.floor(t+(m-h)*v/m+y));dO(e,t,b,_,l)}const o=e[t];let u=r,f=n;for(Zo(e,r,t),l(e[n],o)>0&&Zo(e,r,n);u<f;){for(Zo(e,u,f),++u,--f;l(e[u],o)<0;)++u;for(;l(e[f],o)>0;)--f}l(e[r],o)===0?Zo(e,r,f):(++f,Zo(e,f,n)),f<=t&&(r=f+1),t<=f&&(n=f-1)}return e}function Zo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function hI(e,t,r){if(e=Float64Array.from(iI(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return DS(e);if(t>=1)return zS(e);var n,l=(n-1)*t,o=Math.floor(l),u=zS(dO(e,o).subarray(0,o+1)),f=DS(e.subarray(o+1));return u+(f-u)*(l-o)}}function pI(e,t,r=cO){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,l=(n-1)*t,o=Math.floor(l),u=+r(e[o],o,e),f=+r(e[o+1],o+1,e);return u+(f-u)*(l-o)}}function vI(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var n=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(l);++n<l;)o[n]=e+n*r;return o}function _n(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ga(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Oy=Symbol("implicit");function Cx(){var e=new ES,t=[],r=[],n=Oy;function l(o){let u=e.get(o);if(u===void 0){if(n!==Oy)return n;e.set(o,u=t.push(o)-1)}return r[u%r.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new ES;for(const u of o)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(o){return arguments.length?(r=Array.from(o),l):r.slice()},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return Cx(t,r).unknown(n)},_n.apply(l,arguments),l}function Ex(){var e=Cx().unknown(void 0),t=e.domain,r=e.range,n=0,l=1,o,u,f=!1,m=0,h=0,p=.5;delete e.unknown;function v(){var y=t().length,b=l<n,_=b?l:n,N=b?n:l;o=(N-_)/Math.max(1,y-m+h*2),f&&(o=Math.floor(o)),_+=(N-_-o*(y-m))*p,u=o*(1-m),f&&(_=Math.round(_),u=Math.round(u));var w=vI(y).map(function(S){return _+o*S});return r(b?w.reverse():w)}return e.domain=function(y){return arguments.length?(t(y),v()):t()},e.range=function(y){return arguments.length?([n,l]=y,n=+n,l=+l,v()):[n,l]},e.rangeRound=function(y){return[n,l]=y,n=+n,l=+l,f=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(y){return arguments.length?(f=!!y,v()):f},e.padding=function(y){return arguments.length?(m=Math.min(1,h=+y),v()):m},e.paddingInner=function(y){return arguments.length?(m=Math.min(1,y),v()):m},e.paddingOuter=function(y){return arguments.length?(h=+y,v()):h},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),v()):p},e.copy=function(){return Ex(t(),[n,l]).round(f).paddingInner(m).paddingOuter(h).align(p)},_n.apply(v(),arguments)}function fO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fO(t())},e}function gI(){return fO(Ex.apply(null,arguments).paddingInner(1))}function Ox(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function mO(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ic(){}var Nc=.7,vf=1/Nc,Tl="\\s*([+-]?\\d+)\\s*",_c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yI=/^#([0-9a-f]{3,8})$/,xI=new RegExp(`^rgb\\(${Tl},${Tl},${Tl}\\)$`),bI=new RegExp(`^rgb\\(${Zn},${Zn},${Zn}\\)$`),jI=new RegExp(`^rgba\\(${Tl},${Tl},${Tl},${_c}\\)$`),NI=new RegExp(`^rgba\\(${Zn},${Zn},${Zn},${_c}\\)$`),_I=new RegExp(`^hsl\\(${_c},${Zn},${Zn}\\)$`),wI=new RegExp(`^hsla\\(${_c},${Zn},${Zn},${_c}\\)$`),MS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ox(Ic,wc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:TS,formatHex:TS,formatHex8:SI,formatHsl:AI,formatRgb:kS,toString:kS});function TS(){return this.rgb().formatHex()}function SI(){return this.rgb().formatHex8()}function AI(){return hO(this).formatHsl()}function kS(){return this.rgb().formatRgb()}function wc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=yI.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?PS(t):r===3?new Lr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?jd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?jd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xI.exec(e))?new Lr(t[1],t[2],t[3],1):(t=bI.exec(e))?new Lr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jI.exec(e))?jd(t[1],t[2],t[3],t[4]):(t=NI.exec(e))?jd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_I.exec(e))?LS(t[1],t[2]/100,t[3]/100,1):(t=wI.exec(e))?LS(t[1],t[2]/100,t[3]/100,t[4]):MS.hasOwnProperty(e)?PS(MS[e]):e==="transparent"?new Lr(NaN,NaN,NaN,0):null}function PS(e){return new Lr(e>>16&255,e>>8&255,e&255,1)}function jd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Lr(e,t,r,n)}function CI(e){return e instanceof Ic||(e=wc(e)),e?(e=e.rgb(),new Lr(e.r,e.g,e.b,e.opacity)):new Lr}function zy(e,t,r,n){return arguments.length===1?CI(e):new Lr(e,t,r,n??1)}function Lr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Ox(Lr,zy,mO(Ic,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new Lr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nc:Math.pow(Nc,e),new Lr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Lr(ps(this.r),ps(this.g),ps(this.b),gf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qS,formatHex:qS,formatHex8:EI,formatRgb:RS,toString:RS}));function qS(){return`#${os(this.r)}${os(this.g)}${os(this.b)}`}function EI(){return`#${os(this.r)}${os(this.g)}${os(this.b)}${os((isNaN(this.opacity)?1:this.opacity)*255)}`}function RS(){const e=gf(this.opacity);return`${e===1?"rgb(":"rgba("}${ps(this.r)}, ${ps(this.g)}, ${ps(this.b)}${e===1?")":`, ${e})`}`}function gf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ps(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function os(e){return e=ps(e),(e<16?"0":"")+e.toString(16)}function LS(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Dn(e,t,r,n)}function hO(e){if(e instanceof Dn)return new Dn(e.h,e.s,e.l,e.opacity);if(e instanceof Ic||(e=wc(e)),!e)return new Dn;if(e instanceof Dn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,l=Math.min(t,r,n),o=Math.max(t,r,n),u=NaN,f=o-l,m=(o+l)/2;return f?(t===o?u=(r-n)/f+(r<n)*6:r===o?u=(n-t)/f+2:u=(t-r)/f+4,f/=m<.5?o+l:2-o-l,u*=60):f=m>0&&m<1?0:u,new Dn(u,f,m,e.opacity)}function OI(e,t,r,n){return arguments.length===1?hO(e):new Dn(e,t,r,n??1)}function Dn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Ox(Dn,OI,mO(Ic,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new Dn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nc:Math.pow(Nc,e),new Dn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,l=2*r-n;return new Lr(bg(e>=240?e-240:e+120,l,n),bg(e,l,n),bg(e<120?e+240:e-120,l,n),this.opacity)},clamp(){return new Dn(IS(this.h),Nd(this.s),Nd(this.l),gf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gf(this.opacity);return`${e===1?"hsl(":"hsla("}${IS(this.h)}, ${Nd(this.s)*100}%, ${Nd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function IS(e){return e=(e||0)%360,e<0?e+360:e}function Nd(e){return Math.max(0,Math.min(1,e||0))}function bg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const zx=e=>()=>e;function zI(e,t){return function(r){return e+r*t}}function DI(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function MI(e){return(e=+e)==1?pO:function(t,r){return r-t?DI(t,r,e):zx(isNaN(t)?r:t)}}function pO(e,t){var r=t-e;return r?zI(e,r):zx(isNaN(e)?t:e)}const BS=(function e(t){var r=MI(t);function n(l,o){var u=r((l=zy(l)).r,(o=zy(o)).r),f=r(l.g,o.g),m=r(l.b,o.b),h=pO(l.opacity,o.opacity);return function(p){return l.r=u(p),l.g=f(p),l.b=m(p),l.opacity=h(p),l+""}}return n.gamma=e,n})(1);function TI(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),l;return function(o){for(l=0;l<r;++l)n[l]=e[l]*(1-o)+t[l]*o;return n}}function kI(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PI(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,l=new Array(n),o=new Array(r),u;for(u=0;u<n;++u)l[u]=Ql(e[u],t[u]);for(;u<r;++u)o[u]=t[u];return function(f){for(u=0;u<n;++u)o[u]=l[u](f);return o}}function qI(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function yf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function RI(e,t){var r={},n={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=Ql(e[l],t[l]):n[l]=t[l];return function(o){for(l in r)n[l]=r[l](o);return n}}var Dy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jg=new RegExp(Dy.source,"g");function LI(e){return function(){return e}}function II(e){return function(t){return e(t)+""}}function BI(e,t){var r=Dy.lastIndex=jg.lastIndex=0,n,l,o,u=-1,f=[],m=[];for(e=e+"",t=t+"";(n=Dy.exec(e))&&(l=jg.exec(t));)(o=l.index)>r&&(o=t.slice(r,o),f[u]?f[u]+=o:f[++u]=o),(n=n[0])===(l=l[0])?f[u]?f[u]+=l:f[++u]=l:(f[++u]=null,m.push({i:u,x:yf(n,l)})),r=jg.lastIndex;return r<t.length&&(o=t.slice(r),f[u]?f[u]+=o:f[++u]=o),f.length<2?m[0]?II(m[0].x):LI(t):(t=m.length,function(h){for(var p=0,v;p<t;++p)f[(v=m[p]).i]=v.x(h);return f.join("")})}function Ql(e,t){var r=typeof t,n;return t==null||r==="boolean"?zx(t):(r==="number"?yf:r==="string"?(n=wc(t))?(t=n,BS):BI:t instanceof wc?BS:t instanceof Date?qI:kI(t)?TI:Array.isArray(t)?PI:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?RI:yf)(e,t)}function Dx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function $I(e,t){t===void 0&&(t=e,e=Ql);for(var r=0,n=t.length-1,l=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(l,l=t[++r]);return function(u){var f=Math.max(0,Math.min(n-1,Math.floor(u*=n)));return o[f](u-f)}}function UI(e){return function(){return e}}function xf(e){return+e}var $S=[0,1];function _r(e){return e}function My(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:UI(isNaN(t)?NaN:.5)}function HI(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function GI(e,t,r){var n=e[0],l=e[1],o=t[0],u=t[1];return l<n?(n=My(l,n),o=r(u,o)):(n=My(n,l),o=r(o,u)),function(f){return o(n(f))}}function QI(e,t,r){var n=Math.min(e.length,t.length)-1,l=new Array(n),o=new Array(n),u=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<n;)l[u]=My(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(f){var m=Lc(e,f,1,n)-1;return o[m](l[m](f))}}function Bc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vm(){var e=$S,t=$S,r=Ql,n,l,o,u=_r,f,m,h;function p(){var y=Math.min(e.length,t.length);return u!==_r&&(u=HI(e[0],e[y-1])),f=y>2?QI:GI,m=h=null,v}function v(y){return y==null||isNaN(y=+y)?o:(m||(m=f(e.map(n),t,r)))(n(u(y)))}return v.invert=function(y){return u(l((h||(h=f(t,e.map(n),yf)))(y)))},v.domain=function(y){return arguments.length?(e=Array.from(y,xf),p()):e.slice()},v.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},v.rangeRound=function(y){return t=Array.from(y),r=Dx,p()},v.clamp=function(y){return arguments.length?(u=y?!0:_r,p()):u!==_r},v.interpolate=function(y){return arguments.length?(r=y,p()):r},v.unknown=function(y){return arguments.length?(o=y,v):o},function(y,b){return n=y,l=b,p()}}function Mx(){return vm()(_r,_r)}function FI(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function bf(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ul(e){return e=bf(Math.abs(e)),e?e[1]:NaN}function VI(e,t){return function(r,n){for(var l=r.length,o=[],u=0,f=e[0],m=0;l>0&&f>0&&(m+f+1>n&&(f=Math.max(1,n-m)),o.push(r.substring(l-=f,l+f)),!((m+=f+1)>n));)f=e[u=(u+1)%e.length];return o.reverse().join(t)}}function YI(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var KI=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sc(e){if(!(t=KI.exec(e)))throw new Error("invalid format: "+e);var t;return new Tx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sc.prototype=Tx.prototype;function Tx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Tx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function XI(e){e:for(var t=e.length,r=1,n=-1,l;r<t;++r)switch(e[r]){case".":n=l=r;break;case"0":n===0&&(n=r),l=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(l+1):e}var jf;function WI(e,t){var r=bf(e,t);if(!r)return jf=void 0,e.toPrecision(t);var n=r[0],l=r[1],o=l-(jf=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=n.length;return o===u?n:o>u?n+new Array(o-u+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+bf(e,Math.max(0,t+o-1))[0]}function US(e,t){var r=bf(e,t);if(!r)return e+"";var n=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+n:n.length>l+1?n.slice(0,l+1)+"."+n.slice(l+1):n+new Array(l-n.length+2).join("0")}const HS={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:FI,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>US(e*100,t),r:US,s:WI,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function GS(e){return e}var QS=Array.prototype.map,FS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ZI(e){var t=e.grouping===void 0||e.thousands===void 0?GS:VI(QS.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?GS:YI(QS.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(v,y){v=Sc(v);var b=v.fill,_=v.align,N=v.sign,w=v.symbol,S=v.zero,O=v.width,C=v.comma,E=v.precision,z=v.trim,M=v.type;M==="n"?(C=!0,M="g"):HS[M]||(E===void 0&&(E=12),z=!0,M="g"),(S||b==="0"&&_==="=")&&(S=!0,b="0",_="=");var L=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():""),T=(w==="$"?n:/[%p]/.test(M)?u:"")+(y&&y.suffix!==void 0?y.suffix:""),k=HS[M],Y=/[defgprs%]/.test(M);E=E===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function X(B){var le=L,ue=T,Q,P,J;if(M==="c")ue=k(B)+ue,B="";else{B=+B;var H=B<0||1/B<0;if(B=isNaN(B)?m:k(Math.abs(B),E),z&&(B=XI(B)),H&&+B==0&&N!=="+"&&(H=!1),le=(H?N==="("?N:f:N==="-"||N==="("?"":N)+le,ue=(M==="s"&&!isNaN(B)&&jf!==void 0?FS[8+jf/3]:"")+ue+(H&&N==="("?")":""),Y){for(Q=-1,P=B.length;++Q<P;)if(J=B.charCodeAt(Q),48>J||J>57){ue=(J===46?l+B.slice(Q+1):B.slice(Q))+ue,B=B.slice(0,Q);break}}}C&&!S&&(B=t(B,1/0));var ve=le.length+B.length+ue.length,I=ve<O?new Array(O-ve+1).join(b):"";switch(C&&S&&(B=t(I+B,I.length?O-ue.length:1/0),I=""),_){case"<":B=le+B+ue+I;break;case"=":B=le+I+B+ue;break;case"^":B=I.slice(0,ve=I.length>>1)+le+B+ue+I.slice(ve);break;default:B=I+le+B+ue;break}return o(B)}return X.toString=function(){return v+""},X}function p(v,y){var b=Math.max(-8,Math.min(8,Math.floor(Ul(y)/3)))*3,_=Math.pow(10,-b),N=h((v=Sc(v),v.type="f",v),{suffix:FS[8+b/3]});return function(w){return N(_*w)}}return{format:h,formatPrefix:p}}var _d,kx,vO;JI({thousands:",",grouping:[3],currency:["$",""]});function JI(e){return _d=ZI(e),kx=_d.format,vO=_d.formatPrefix,_d}function e8(e){return Math.max(0,-Ul(Math.abs(e)))}function t8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ul(t)/3)))*3-Ul(Math.abs(e)))}function r8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ul(t)-Ul(e))+1}function gO(e,t,r,n){var l=Ey(e,t,r),o;switch(n=Sc(n??",f"),n.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=t8(l,u))&&(n.precision=o),vO(n,u)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=r8(l,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=e8(l))&&(n.precision=o-(n.type==="%")*2);break}}return kx(n)}function ki(e){var t=e.domain;return e.ticks=function(r){var n=t();return Ay(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var l=t();return gO(l[0],l[l.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),l=0,o=n.length-1,u=n[l],f=n[o],m,h,p=10;for(f<u&&(h=u,u=f,f=h,h=l,l=o,o=h);p-- >0;){if(h=Cy(u,f,r),h===m)return n[l]=u,n[o]=f,t(n);if(h>0)u=Math.floor(u/h)*h,f=Math.ceil(f/h)*h;else if(h<0)u=Math.ceil(u*h)/h,f=Math.floor(f*h)/h;else break;m=h}return e},e}function yO(){var e=Mx();return e.copy=function(){return Bc(e,yO())},_n.apply(e,arguments),ki(e)}function xO(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,xf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return xO(e).unknown(t)},e=arguments.length?Array.from(e,xf):[0,1],ki(r)}function bO(e,t){e=e.slice();var r=0,n=e.length-1,l=e[r],o=e[n],u;return o<l&&(u=r,r=n,n=u,u=l,l=o,o=u),e[r]=t.floor(l),e[n]=t.ceil(o),e}function VS(e){return Math.log(e)}function YS(e){return Math.exp(e)}function n8(e){return-Math.log(-e)}function a8(e){return-Math.exp(-e)}function i8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function s8(e){return e===10?i8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function l8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function KS(e){return(t,r)=>-e(-t,r)}function Px(e){const t=e(VS,YS),r=t.domain;let n=10,l,o;function u(){return l=l8(n),o=s8(n),r()[0]<0?(l=KS(l),o=KS(o),e(n8,a8)):e(VS,YS),t}return t.base=function(f){return arguments.length?(n=+f,u()):n},t.domain=function(f){return arguments.length?(r(f),u()):r()},t.ticks=f=>{const m=r();let h=m[0],p=m[m.length-1];const v=p<h;v&&([h,p]=[p,h]);let y=l(h),b=l(p),_,N;const w=f==null?10:+f;let S=[];if(!(n%1)&&b-y<w){if(y=Math.floor(y),b=Math.ceil(b),h>0){for(;y<=b;++y)for(_=1;_<n;++_)if(N=y<0?_/o(-y):_*o(y),!(N<h)){if(N>p)break;S.push(N)}}else for(;y<=b;++y)for(_=n-1;_>=1;--_)if(N=y>0?_/o(-y):_*o(y),!(N<h)){if(N>p)break;S.push(N)}S.length*2<w&&(S=Ay(h,p,w))}else S=Ay(y,b,Math.min(b-y,w)).map(o);return v?S.reverse():S},t.tickFormat=(f,m)=>{if(f==null&&(f=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Sc(m)).precision==null&&(m.trim=!0),m=kx(m)),f===1/0)return m;const h=Math.max(1,n*f/t.ticks().length);return p=>{let v=p/o(Math.round(l(p)));return v*n<n-.5&&(v*=n),v<=h?m(p):""}},t.nice=()=>r(bO(r(),{floor:f=>o(Math.floor(l(f))),ceil:f=>o(Math.ceil(l(f)))})),t}function jO(){const e=Px(vm()).domain([1,10]);return e.copy=()=>Bc(e,jO()).base(e.base()),_n.apply(e,arguments),e}function XS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function WS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function qx(e){var t=1,r=e(XS(t),WS(t));return r.constant=function(n){return arguments.length?e(XS(t=+n),WS(t)):t},ki(r)}function NO(){var e=qx(vm());return e.copy=function(){return Bc(e,NO()).constant(e.constant())},_n.apply(e,arguments)}function ZS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function o8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function c8(e){return e<0?-e*e:e*e}function Rx(e){var t=e(_r,_r),r=1;function n(){return r===1?e(_r,_r):r===.5?e(o8,c8):e(ZS(r),ZS(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,n()):r},ki(t)}function Lx(){var e=Rx(vm());return e.copy=function(){return Bc(e,Lx()).exponent(e.exponent())},_n.apply(e,arguments),e}function u8(){return Lx.apply(null,arguments).exponent(.5)}function JS(e){return Math.sign(e)*e*e}function d8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function _O(){var e=Mx(),t=[0,1],r=!1,n;function l(o){var u=d8(e(o));return isNaN(u)?n:r?Math.round(u):u}return l.invert=function(o){return e.invert(JS(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,xf)).map(JS)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(r=!!o,l):r},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return _O(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},_n.apply(l,arguments),ki(l)}function wO(){var e=[],t=[],r=[],n;function l(){var u=0,f=Math.max(1,t.length);for(r=new Array(f-1);++u<f;)r[u-1]=pI(e,u/f);return o}function o(u){return u==null||isNaN(u=+u)?n:t[Lc(r,u)]}return o.invertExtent=function(u){var f=t.indexOf(u);return f<0?[NaN,NaN]:[f>0?r[f-1]:e[0],f<r.length?r[f]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let f of u)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(Ci),l()},o.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},o.unknown=function(u){return arguments.length?(n=u,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return wO().domain(e).range(t).unknown(n)},_n.apply(o,arguments)}function SO(){var e=0,t=1,r=1,n=[.5],l=[0,1],o;function u(m){return m!=null&&m<=m?l[Lc(n,m,0,r)]:o}function f(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return u}return u.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,f()):[e,t]},u.range=function(m){return arguments.length?(r=(l=Array.from(m)).length-1,f()):l.slice()},u.invertExtent=function(m){var h=l.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},u.unknown=function(m){return arguments.length&&(o=m),u},u.thresholds=function(){return n.slice()},u.copy=function(){return SO().domain([e,t]).range(l).unknown(o)},_n.apply(ki(u),arguments)}function AO(){var e=[.5],t=[0,1],r,n=1;function l(o){return o!=null&&o<=o?t[Lc(e,o,0,n)]:r}return l.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var u=t.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(r=o,l):r},l.copy=function(){return AO().domain(e).range(t).unknown(r)},_n.apply(l,arguments)}const Ng=new Date,_g=new Date;function Vt(e,t,r,n){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const u=l(o),f=l.ceil(o);return o-u<f-o?u:f},l.offset=(o,u)=>(t(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,f)=>{const m=[];if(o=l.ceil(o),f=f==null?1:Math.floor(f),!(o<u)||!(f>0))return m;let h;do m.push(h=new Date(+o)),t(o,f),e(o);while(h<o&&o<u);return m},l.filter=o=>Vt(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,f)=>{if(u>=u)if(f<0)for(;++f<=0;)for(;t(u,-1),!o(u););else for(;--f>=0;)for(;t(u,1),!o(u););}),r&&(l.count=(o,u)=>(Ng.setTime(+o),_g.setTime(+u),e(Ng),e(_g),Math.floor(r(Ng,_g))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(n?u=>n(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const Nf=Vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Nf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Nf);Nf.range;const Ca=1e3,yn=Ca*60,Ea=yn*60,ka=Ea*24,Ix=ka*7,eA=ka*30,wg=ka*365,cs=Vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ca)},(e,t)=>(t-e)/Ca,e=>e.getUTCSeconds());cs.range;const Bx=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ca)},(e,t)=>{e.setTime(+e+t*yn)},(e,t)=>(t-e)/yn,e=>e.getMinutes());Bx.range;const $x=Vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*yn)},(e,t)=>(t-e)/yn,e=>e.getUTCMinutes());$x.range;const Ux=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ca-e.getMinutes()*yn)},(e,t)=>{e.setTime(+e+t*Ea)},(e,t)=>(t-e)/Ea,e=>e.getHours());Ux.range;const Hx=Vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ea)},(e,t)=>(t-e)/Ea,e=>e.getUTCHours());Hx.range;const $c=Vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*yn)/ka,e=>e.getDate()-1);$c.range;const gm=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ka,e=>e.getUTCDate()-1);gm.range;const CO=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ka,e=>Math.floor(e/ka));CO.range;function Es(e){return Vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*yn)/Ix)}const ym=Es(0),_f=Es(1),f8=Es(2),m8=Es(3),Hl=Es(4),h8=Es(5),p8=Es(6);ym.range;_f.range;f8.range;m8.range;Hl.range;h8.range;p8.range;function Os(e){return Vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ix)}const xm=Os(0),wf=Os(1),v8=Os(2),g8=Os(3),Gl=Os(4),y8=Os(5),x8=Os(6);xm.range;wf.range;v8.range;g8.range;Gl.range;y8.range;x8.range;const Gx=Vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Gx.range;const Qx=Vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Qx.range;const Pa=Vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Pa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Pa.range;const qa=Vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});qa.range;function EO(e,t,r,n,l,o){const u=[[cs,1,Ca],[cs,5,5*Ca],[cs,15,15*Ca],[cs,30,30*Ca],[o,1,yn],[o,5,5*yn],[o,15,15*yn],[o,30,30*yn],[l,1,Ea],[l,3,3*Ea],[l,6,6*Ea],[l,12,12*Ea],[n,1,ka],[n,2,2*ka],[r,1,Ix],[t,1,eA],[t,3,3*eA],[e,1,wg]];function f(h,p,v){const y=p<h;y&&([h,p]=[p,h]);const b=v&&typeof v.range=="function"?v:m(h,p,v),_=b?b.range(h,+p+1):[];return y?_.reverse():_}function m(h,p,v){const y=Math.abs(p-h)/v,b=Ax(([,,w])=>w).right(u,y);if(b===u.length)return e.every(Ey(h/wg,p/wg,v));if(b===0)return Nf.every(Math.max(Ey(h,p,v),1));const[_,N]=u[y/u[b-1][2]<u[b][2]/y?b-1:b];return _.every(N)}return[f,m]}const[b8,j8]=EO(qa,Qx,xm,CO,Hx,$x),[N8,_8]=EO(Pa,Gx,ym,$c,Ux,Bx);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ag(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jo(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function w8(e){var t=e.dateTime,r=e.date,n=e.time,l=e.periods,o=e.days,u=e.shortDays,f=e.months,m=e.shortMonths,h=ec(l),p=tc(l),v=ec(o),y=tc(o),b=ec(u),_=tc(u),N=ec(f),w=tc(f),S=ec(m),O=tc(m),C={a:J,A:H,b:ve,B:I,c:null,d:sA,e:sA,f:V8,g:nB,G:iB,H:G8,I:Q8,j:F8,L:OO,m:Y8,M:K8,p:ge,q:ee,Q:cA,s:uA,S:X8,u:W8,U:Z8,V:J8,w:eB,W:tB,x:null,X:null,y:rB,Y:aB,Z:sB,"%":oA},E={a:fe,A:ye,b:he,B:$,c:null,d:lA,e:lA,f:uB,g:bB,G:NB,H:lB,I:oB,j:cB,L:DO,m:dB,M:fB,p:ce,q:Se,Q:cA,s:uA,S:mB,u:hB,U:pB,V:vB,w:gB,W:yB,x:null,X:null,y:xB,Y:jB,Z:_B,"%":oA},z={a:Y,A:X,b:B,B:le,c:ue,d:aA,e:aA,f:B8,g:nA,G:rA,H:iA,I:iA,j:q8,L:I8,m:P8,M:R8,p:k,q:k8,Q:U8,s:H8,S:L8,u:O8,U:z8,V:D8,w:E8,W:M8,x:Q,X:P,y:nA,Y:rA,Z:T8,"%":$8};C.x=M(r,C),C.X=M(n,C),C.c=M(t,C),E.x=M(r,E),E.X=M(n,E),E.c=M(t,E);function M(ne,F){return function(R){var ae=[],G=-1,xe=0,ke=ne.length,qe,Qe,Gt;for(R instanceof Date||(R=new Date(+R));++G<ke;)ne.charCodeAt(G)===37&&(ae.push(ne.slice(xe,G)),(Qe=tA[qe=ne.charAt(++G)])!=null?qe=ne.charAt(++G):Qe=qe==="e"?" ":"0",(Gt=F[qe])&&(qe=Gt(R,Qe)),ae.push(qe),xe=G+1);return ae.push(ne.slice(xe,G)),ae.join("")}}function L(ne,F){return function(R){var ae=Jo(1900,void 0,1),G=T(ae,ne,R+="",0),xe,ke;if(G!=R.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(F&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(xe=Ag(Jo(ae.y,0,1)),ke=xe.getUTCDay(),xe=ke>4||ke===0?wf.ceil(xe):wf(xe),xe=gm.offset(xe,(ae.V-1)*7),ae.y=xe.getUTCFullYear(),ae.m=xe.getUTCMonth(),ae.d=xe.getUTCDate()+(ae.w+6)%7):(xe=Sg(Jo(ae.y,0,1)),ke=xe.getDay(),xe=ke>4||ke===0?_f.ceil(xe):_f(xe),xe=$c.offset(xe,(ae.V-1)*7),ae.y=xe.getFullYear(),ae.m=xe.getMonth(),ae.d=xe.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ke="Z"in ae?Ag(Jo(ae.y,0,1)).getUTCDay():Sg(Jo(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ke+5)%7:ae.w+ae.U*7-(ke+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,Ag(ae)):Sg(ae)}}function T(ne,F,R,ae){for(var G=0,xe=F.length,ke=R.length,qe,Qe;G<xe;){if(ae>=ke)return-1;if(qe=F.charCodeAt(G++),qe===37){if(qe=F.charAt(G++),Qe=z[qe in tA?F.charAt(G++):qe],!Qe||(ae=Qe(ne,R,ae))<0)return-1}else if(qe!=R.charCodeAt(ae++))return-1}return ae}function k(ne,F,R){var ae=h.exec(F.slice(R));return ae?(ne.p=p.get(ae[0].toLowerCase()),R+ae[0].length):-1}function Y(ne,F,R){var ae=b.exec(F.slice(R));return ae?(ne.w=_.get(ae[0].toLowerCase()),R+ae[0].length):-1}function X(ne,F,R){var ae=v.exec(F.slice(R));return ae?(ne.w=y.get(ae[0].toLowerCase()),R+ae[0].length):-1}function B(ne,F,R){var ae=S.exec(F.slice(R));return ae?(ne.m=O.get(ae[0].toLowerCase()),R+ae[0].length):-1}function le(ne,F,R){var ae=N.exec(F.slice(R));return ae?(ne.m=w.get(ae[0].toLowerCase()),R+ae[0].length):-1}function ue(ne,F,R){return T(ne,t,F,R)}function Q(ne,F,R){return T(ne,r,F,R)}function P(ne,F,R){return T(ne,n,F,R)}function J(ne){return u[ne.getDay()]}function H(ne){return o[ne.getDay()]}function ve(ne){return m[ne.getMonth()]}function I(ne){return f[ne.getMonth()]}function ge(ne){return l[+(ne.getHours()>=12)]}function ee(ne){return 1+~~(ne.getMonth()/3)}function fe(ne){return u[ne.getUTCDay()]}function ye(ne){return o[ne.getUTCDay()]}function he(ne){return m[ne.getUTCMonth()]}function $(ne){return f[ne.getUTCMonth()]}function ce(ne){return l[+(ne.getUTCHours()>=12)]}function Se(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var F=M(ne+="",C);return F.toString=function(){return ne},F},parse:function(ne){var F=L(ne+="",!1);return F.toString=function(){return ne},F},utcFormat:function(ne){var F=M(ne+="",E);return F.toString=function(){return ne},F},utcParse:function(ne){var F=L(ne+="",!0);return F.toString=function(){return ne},F}}}var tA={"-":"",_:" ",0:"0"},rr=/^\s*\d+/,S8=/^%/,A8=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,r){var n=e<0?"-":"",l=(n?-e:e)+"",o=l.length;return n+(o<r?new Array(r-o+1).join(t)+l:l)}function C8(e){return e.replace(A8,"\\$&")}function ec(e){return new RegExp("^(?:"+e.map(C8).join("|")+")","i")}function tc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function E8(e,t,r){var n=rr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function O8(e,t,r){var n=rr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function z8(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function D8(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function M8(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function rA(e,t,r){var n=rr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function nA(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function T8(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function k8(e,t,r){var n=rr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function P8(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function aA(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function q8(e,t,r){var n=rr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function iA(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function R8(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function L8(e,t,r){var n=rr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function I8(e,t,r){var n=rr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function B8(e,t,r){var n=rr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function $8(e,t,r){var n=S8.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function U8(e,t,r){var n=rr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function H8(e,t,r){var n=rr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function sA(e,t){return Ze(e.getDate(),t,2)}function G8(e,t){return Ze(e.getHours(),t,2)}function Q8(e,t){return Ze(e.getHours()%12||12,t,2)}function F8(e,t){return Ze(1+$c.count(Pa(e),e),t,3)}function OO(e,t){return Ze(e.getMilliseconds(),t,3)}function V8(e,t){return OO(e,t)+"000"}function Y8(e,t){return Ze(e.getMonth()+1,t,2)}function K8(e,t){return Ze(e.getMinutes(),t,2)}function X8(e,t){return Ze(e.getSeconds(),t,2)}function W8(e){var t=e.getDay();return t===0?7:t}function Z8(e,t){return Ze(ym.count(Pa(e)-1,e),t,2)}function zO(e){var t=e.getDay();return t>=4||t===0?Hl(e):Hl.ceil(e)}function J8(e,t){return e=zO(e),Ze(Hl.count(Pa(e),e)+(Pa(e).getDay()===4),t,2)}function eB(e){return e.getDay()}function tB(e,t){return Ze(_f.count(Pa(e)-1,e),t,2)}function rB(e,t){return Ze(e.getFullYear()%100,t,2)}function nB(e,t){return e=zO(e),Ze(e.getFullYear()%100,t,2)}function aB(e,t){return Ze(e.getFullYear()%1e4,t,4)}function iB(e,t){var r=e.getDay();return e=r>=4||r===0?Hl(e):Hl.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function sB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function lA(e,t){return Ze(e.getUTCDate(),t,2)}function lB(e,t){return Ze(e.getUTCHours(),t,2)}function oB(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function cB(e,t){return Ze(1+gm.count(qa(e),e),t,3)}function DO(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function uB(e,t){return DO(e,t)+"000"}function dB(e,t){return Ze(e.getUTCMonth()+1,t,2)}function fB(e,t){return Ze(e.getUTCMinutes(),t,2)}function mB(e,t){return Ze(e.getUTCSeconds(),t,2)}function hB(e){var t=e.getUTCDay();return t===0?7:t}function pB(e,t){return Ze(xm.count(qa(e)-1,e),t,2)}function MO(e){var t=e.getUTCDay();return t>=4||t===0?Gl(e):Gl.ceil(e)}function vB(e,t){return e=MO(e),Ze(Gl.count(qa(e),e)+(qa(e).getUTCDay()===4),t,2)}function gB(e){return e.getUTCDay()}function yB(e,t){return Ze(wf.count(qa(e)-1,e),t,2)}function xB(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function bB(e,t){return e=MO(e),Ze(e.getUTCFullYear()%100,t,2)}function jB(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function NB(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Gl(e):Gl.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function _B(){return"+0000"}function oA(){return"%"}function cA(e){return+e}function uA(e){return Math.floor(+e/1e3)}var _l,TO,kO;wB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wB(e){return _l=w8(e),TO=_l.format,_l.parse,kO=_l.utcFormat,_l.utcParse,_l}function SB(e){return new Date(e)}function AB(e){return e instanceof Date?+e:+new Date(+e)}function Fx(e,t,r,n,l,o,u,f,m,h){var p=Mx(),v=p.invert,y=p.domain,b=h(".%L"),_=h(":%S"),N=h("%I:%M"),w=h("%I %p"),S=h("%a %d"),O=h("%b %d"),C=h("%B"),E=h("%Y");function z(M){return(m(M)<M?b:f(M)<M?_:u(M)<M?N:o(M)<M?w:n(M)<M?l(M)<M?S:O:r(M)<M?C:E)(M)}return p.invert=function(M){return new Date(v(M))},p.domain=function(M){return arguments.length?y(Array.from(M,AB)):y().map(SB)},p.ticks=function(M){var L=y();return e(L[0],L[L.length-1],M??10)},p.tickFormat=function(M,L){return L==null?z:h(L)},p.nice=function(M){var L=y();return(!M||typeof M.range!="function")&&(M=t(L[0],L[L.length-1],M??10)),M?y(bO(L,M)):p},p.copy=function(){return Bc(p,Fx(e,t,r,n,l,o,u,f,m,h))},p}function CB(){return _n.apply(Fx(N8,_8,Pa,Gx,ym,$c,Ux,Bx,cs,TO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function EB(){return _n.apply(Fx(b8,j8,qa,Qx,xm,gm,Hx,$x,cs,kO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bm(){var e=0,t=1,r,n,l,o,u=_r,f=!1,m;function h(v){return v==null||isNaN(v=+v)?m:u(l===0?.5:(v=(o(v)-r)*l,f?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t]=v,r=o(e=+e),n=o(t=+t),l=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(v){return arguments.length?(f=!!v,h):f},h.interpolator=function(v){return arguments.length?(u=v,h):u};function p(v){return function(y){var b,_;return arguments.length?([b,_]=y,u=v(b,_),h):[u(0),u(1)]}}return h.range=p(Ql),h.rangeRound=p(Dx),h.unknown=function(v){return arguments.length?(m=v,h):m},function(v){return o=v,r=v(e),n=v(t),l=r===n?0:1/(n-r),h}}function Pi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PO(){var e=ki(bm()(_r));return e.copy=function(){return Pi(e,PO())},Ga.apply(e,arguments)}function qO(){var e=Px(bm()).domain([1,10]);return e.copy=function(){return Pi(e,qO()).base(e.base())},Ga.apply(e,arguments)}function RO(){var e=qx(bm());return e.copy=function(){return Pi(e,RO()).constant(e.constant())},Ga.apply(e,arguments)}function Vx(){var e=Rx(bm());return e.copy=function(){return Pi(e,Vx()).exponent(e.exponent())},Ga.apply(e,arguments)}function OB(){return Vx.apply(null,arguments).exponent(.5)}function LO(){var e=[],t=_r;function r(n){if(n!=null&&!isNaN(n=+n))return t((Lc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let l of n)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ci),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,l)=>t(l/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(l,o)=>hI(e,o/n))},r.copy=function(){return LO(t).domain(e)},Ga.apply(r,arguments)}function jm(){var e=0,t=.5,r=1,n=1,l,o,u,f,m,h=_r,p,v=!1,y;function b(N){return isNaN(N=+N)?y:(N=.5+((N=+p(N))-o)*(n*N<n*o?f:m),h(v?Math.max(0,Math.min(1,N)):N))}b.domain=function(N){return arguments.length?([e,t,r]=N,l=p(e=+e),o=p(t=+t),u=p(r=+r),f=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),n=o<l?-1:1,b):[e,t,r]},b.clamp=function(N){return arguments.length?(v=!!N,b):v},b.interpolator=function(N){return arguments.length?(h=N,b):h};function _(N){return function(w){var S,O,C;return arguments.length?([S,O,C]=w,h=$I(N,[S,O,C]),b):[h(0),h(.5),h(1)]}}return b.range=_(Ql),b.rangeRound=_(Dx),b.unknown=function(N){return arguments.length?(y=N,b):y},function(N){return p=N,l=N(e),o=N(t),u=N(r),f=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),n=o<l?-1:1,b}}function IO(){var e=ki(jm()(_r));return e.copy=function(){return Pi(e,IO())},Ga.apply(e,arguments)}function BO(){var e=Px(jm()).domain([.1,1,10]);return e.copy=function(){return Pi(e,BO()).base(e.base())},Ga.apply(e,arguments)}function $O(){var e=qx(jm());return e.copy=function(){return Pi(e,$O()).constant(e.constant())},Ga.apply(e,arguments)}function Yx(){var e=Rx(jm());return e.copy=function(){return Pi(e,Yx()).exponent(e.exponent())},Ga.apply(e,arguments)}function zB(){return Yx.apply(null,arguments).exponent(.5)}const oc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ex,scaleDiverging:IO,scaleDivergingLog:BO,scaleDivergingPow:Yx,scaleDivergingSqrt:zB,scaleDivergingSymlog:$O,scaleIdentity:xO,scaleImplicit:Oy,scaleLinear:yO,scaleLog:jO,scaleOrdinal:Cx,scalePoint:gI,scalePow:Lx,scaleQuantile:wO,scaleQuantize:SO,scaleRadial:_O,scaleSequential:PO,scaleSequentialLog:qO,scaleSequentialPow:Vx,scaleSequentialQuantile:LO,scaleSequentialSqrt:OB,scaleSequentialSymlog:RO,scaleSqrt:u8,scaleSymlog:NO,scaleThreshold:AO,scaleTime:CB,scaleUtc:EB,tickFormat:gO},Symbol.toStringTag,{value:"Module"}));var Qa=e=>e.chartData,UO=re([Qa],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Kx=(e,t,r,n)=>n?UO(e):Qa(e),DB=(e,t,r)=>r?UO(e):Qa(e);function Ra(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ke(t)&&Ke(r))return!0}return!1}function dA(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function HO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,l,o;if(Ke(r))l=r;else if(typeof r=="function")return;if(Ke(n))o=n;else if(typeof n=="function")return;var u=[l,o];if(Ra(u))return u}}function MB(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ra(n))return dA(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,f;if(l==="auto")t!=null&&(u=Math.min(...t));else if(Ne(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&Nw.test(l)){var m=Nw.exec(l);if(m==null||m[1]==null||t==null)u=void 0;else{var h=+m[1];u=t[0]-h}}else u=t?.[0];if(o==="auto")t!=null&&(f=Math.max(...t));else if(Ne(o))f=o;else if(typeof o=="function")try{t!=null&&(f=o(t?.[1]))}catch{}else if(typeof o=="string"&&_w.test(o)){var p=_w.exec(o);if(p==null||p[1]==null||t==null)f=void 0;else{var v=+p[1];f=t[1]+v}}else f=t?.[1];var y=[u,f];if(Ra(y))return t==null?y:dA(y,t,r)}}}var Fl=1e9,TB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Wx,_t=!0,Nn="[DecimalError] ",vs=Nn+"Invalid argument: ",Xx=Nn+"Exponent out of range: ",Vl=Math.floor,ss=Math.pow,kB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vr,Jt=1e7,yt=7,GO=9007199254740991,Sf=Vl(GO/yt),be={};be.absoluteValue=be.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};be.comparedTo=be.cmp=function(e){var t,r,n,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,l=e.d.length,t=0,r=n<l?n:l;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===l?0:n>l^o.s<0?1:-1};be.decimalPlaces=be.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*yt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};be.dividedBy=be.div=function(e){return za(this,new this.constructor(e))};be.dividedToIntegerBy=be.idiv=function(e){var t=this,r=t.constructor;return mt(za(t,new r(e),0,1),r.precision)};be.equals=be.eq=function(e){return!this.cmp(e)};be.exponent=function(){return Ut(this)};be.greaterThan=be.gt=function(e){return this.cmp(e)>0};be.greaterThanOrEqualTo=be.gte=function(e){return this.cmp(e)>=0};be.isInteger=be.isint=function(){return this.e>this.d.length-2};be.isNegative=be.isneg=function(){return this.s<0};be.isPositive=be.ispos=function(){return this.s>0};be.isZero=function(){return this.s===0};be.lessThan=be.lt=function(e){return this.cmp(e)<0};be.lessThanOrEqualTo=be.lte=function(e){return this.cmp(e)<1};be.logarithm=be.log=function(e){var t,r=this,n=r.constructor,l=n.precision,o=l+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Vr))throw Error(Nn+"NaN");if(r.s<1)throw Error(Nn+(r.s?"NaN":"-Infinity"));return r.eq(Vr)?new n(0):(_t=!1,t=za(Ac(r,o),Ac(e,o),o),_t=!0,mt(t,l))};be.minus=be.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VO(t,e):QO(t,(e.s=-e.s,e))};be.modulo=be.mod=function(e){var t,r=this,n=r.constructor,l=n.precision;if(e=new n(e),!e.s)throw Error(Nn+"NaN");return r.s?(_t=!1,t=za(r,e,0,1).times(e),_t=!0,r.minus(t)):mt(new n(r),l)};be.naturalExponential=be.exp=function(){return FO(this)};be.naturalLogarithm=be.ln=function(){return Ac(this)};be.negated=be.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};be.plus=be.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QO(t,e):VO(t,(e.s=-e.s,e))};be.precision=be.sd=function(e){var t,r,n,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vs+e);if(t=Ut(l)+1,n=l.d.length-1,r=n*yt+1,n=l.d[n],n){for(;n%10==0;n/=10)r--;for(n=l.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};be.squareRoot=be.sqrt=function(){var e,t,r,n,l,o,u,f=this,m=f.constructor;if(f.s<1){if(!f.s)return new m(0);throw Error(Nn+"NaN")}for(e=Ut(f),_t=!1,l=Math.sqrt(+f),l==0||l==1/0?(t=Wn(f.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=Vl((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(l.toString()),r=m.precision,l=u=r+3;;)if(o=n,n=o.plus(za(f,o,u+2)).times(.5),Wn(o.d).slice(0,u)===(t=Wn(n.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(mt(o,r+1,0),o.times(o).eq(f)){n=o;break}}else if(t!="9999")break;u+=4}return _t=!0,mt(n,r)};be.times=be.mul=function(e){var t,r,n,l,o,u,f,m,h,p=this,v=p.constructor,y=p.d,b=(e=new v(e)).d;if(!p.s||!e.s)return new v(0);for(e.s*=p.s,r=p.e+e.e,m=y.length,h=b.length,m<h&&(o=y,y=b,b=o,u=m,m=h,h=u),o=[],u=m+h,n=u;n--;)o.push(0);for(n=h;--n>=0;){for(t=0,l=m+n;l>n;)f=o[l]+b[n]*y[l-n-1]+t,o[l--]=f%Jt|0,t=f/Jt|0;o[l]=(o[l]+t)%Jt|0}for(;!o[--u];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,_t?mt(e,v.precision):e};be.toDecimalPlaces=be.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(na(e,0,Fl),t===void 0?t=n.rounding:na(t,0,8),mt(r,e+Ut(r)+1,t))};be.toExponential=function(e,t){var r,n=this,l=n.constructor;return e===void 0?r=Ns(n,!0):(na(e,0,Fl),t===void 0?t=l.rounding:na(t,0,8),n=mt(new l(n),e+1,t),r=Ns(n,!0,e+1)),r};be.toFixed=function(e,t){var r,n,l=this,o=l.constructor;return e===void 0?Ns(l):(na(e,0,Fl),t===void 0?t=o.rounding:na(t,0,8),n=mt(new o(l),e+Ut(l)+1,t),r=Ns(n.abs(),!1,e+Ut(n)+1),l.isneg()&&!l.isZero()?"-"+r:r)};be.toInteger=be.toint=function(){var e=this,t=e.constructor;return mt(new t(e),Ut(e)+1,t.rounding)};be.toNumber=function(){return+this};be.toPower=be.pow=function(e){var t,r,n,l,o,u,f=this,m=f.constructor,h=12,p=+(e=new m(e));if(!e.s)return new m(Vr);if(f=new m(f),!f.s){if(e.s<1)throw Error(Nn+"Infinity");return f}if(f.eq(Vr))return f;if(n=m.precision,e.eq(Vr))return mt(f,n);if(t=e.e,r=e.d.length-1,u=t>=r,o=f.s,u){if((r=p<0?-p:p)<=GO){for(l=new m(Vr),t=Math.ceil(n/yt+4),_t=!1;r%2&&(l=l.times(f),mA(l.d,t)),r=Vl(r/2),r!==0;)f=f.times(f),mA(f.d,t);return _t=!0,e.s<0?new m(Vr).div(l):mt(l,n)}}else if(o<0)throw Error(Nn+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,f.s=1,_t=!1,l=e.times(Ac(f,n+h)),_t=!0,l=FO(l),l.s=o,l};be.toPrecision=function(e,t){var r,n,l=this,o=l.constructor;return e===void 0?(r=Ut(l),n=Ns(l,r<=o.toExpNeg||r>=o.toExpPos)):(na(e,1,Fl),t===void 0?t=o.rounding:na(t,0,8),l=mt(new o(l),e,t),r=Ut(l),n=Ns(l,e<=r||r<=o.toExpNeg,e)),n};be.toSignificantDigits=be.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(na(e,1,Fl),t===void 0?t=n.rounding:na(t,0,8)),mt(new n(r),e,t)};be.toString=be.valueOf=be.val=be.toJSON=be[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ut(e),r=e.constructor;return Ns(e,t<=r.toExpNeg||t>=r.toExpPos)};function QO(e,t){var r,n,l,o,u,f,m,h,p=e.constructor,v=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),_t?mt(t,v):t;if(m=e.d,h=t.d,u=e.e,l=t.e,m=m.slice(),o=u-l,o){for(o<0?(n=m,o=-o,f=h.length):(n=h,l=u,f=m.length),u=Math.ceil(v/yt),f=u>f?u+1:f+1,o>f&&(o=f,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(f=m.length,o=h.length,f-o<0&&(o=f,n=h,h=m,m=n),r=0;o;)r=(m[--o]=m[o]+h[o]+r)/Jt|0,m[o]%=Jt;for(r&&(m.unshift(r),++l),f=m.length;m[--f]==0;)m.pop();return t.d=m,t.e=l,_t?mt(t,v):t}function na(e,t,r){if(e!==~~e||e<t||e>r)throw Error(vs+e)}function Wn(e){var t,r,n,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,t=1;t<l;t++)n=e[t]+"",r=yt-n.length,r&&(o+=Ni(r)),o+=n;u=e[t],n=u+"",r=yt-n.length,r&&(o+=Ni(r))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var za=(function(){function e(n,l){var o,u=0,f=n.length;for(n=n.slice();f--;)o=n[f]*l+u,n[f]=o%Jt|0,u=o/Jt|0;return u&&n.unshift(u),n}function t(n,l,o,u){var f,m;if(o!=u)m=o>u?1:-1;else for(f=m=0;f<o;f++)if(n[f]!=l[f]){m=n[f]>l[f]?1:-1;break}return m}function r(n,l,o){for(var u=0;o--;)n[o]-=u,u=n[o]<l[o]?1:0,n[o]=u*Jt+n[o]-l[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,l,o,u){var f,m,h,p,v,y,b,_,N,w,S,O,C,E,z,M,L,T,k=n.constructor,Y=n.s==l.s?1:-1,X=n.d,B=l.d;if(!n.s)return new k(n);if(!l.s)throw Error(Nn+"Division by zero");for(m=n.e-l.e,L=B.length,z=X.length,b=new k(Y),_=b.d=[],h=0;B[h]==(X[h]||0);)++h;if(B[h]>(X[h]||0)&&--m,o==null?O=o=k.precision:u?O=o+(Ut(n)-Ut(l))+1:O=o,O<0)return new k(0);if(O=O/yt+2|0,h=0,L==1)for(p=0,B=B[0],O++;(h<z||p)&&O--;h++)C=p*Jt+(X[h]||0),_[h]=C/B|0,p=C%B|0;else{for(p=Jt/(B[0]+1)|0,p>1&&(B=e(B,p),X=e(X,p),L=B.length,z=X.length),E=L,N=X.slice(0,L),w=N.length;w<L;)N[w++]=0;T=B.slice(),T.unshift(0),M=B[0],B[1]>=Jt/2&&++M;do p=0,f=t(B,N,L,w),f<0?(S=N[0],L!=w&&(S=S*Jt+(N[1]||0)),p=S/M|0,p>1?(p>=Jt&&(p=Jt-1),v=e(B,p),y=v.length,w=N.length,f=t(v,N,y,w),f==1&&(p--,r(v,L<y?T:B,y))):(p==0&&(f=p=1),v=B.slice()),y=v.length,y<w&&v.unshift(0),r(N,v,w),f==-1&&(w=N.length,f=t(B,N,L,w),f<1&&(p++,r(N,L<w?T:B,w))),w=N.length):f===0&&(p++,N=[0]),_[h++]=p,f&&N[0]?N[w++]=X[E]||0:(N=[X[E]],w=1);while((E++<z||N[0]!==void 0)&&O--)}return _[0]||_.shift(),b.e=m,mt(b,u?o+Ut(b)+1:o)}})();function FO(e,t){var r,n,l,o,u,f,m=0,h=0,p=e.constructor,v=p.precision;if(Ut(e)>16)throw Error(Xx+Ut(e));if(!e.s)return new p(Vr);for(_t=!1,f=v,u=new p(.03125);e.abs().gte(.1);)e=e.times(u),h+=5;for(n=Math.log(ss(2,h))/Math.LN10*2+5|0,f+=n,r=l=o=new p(Vr),p.precision=f;;){if(l=mt(l.times(e),f),r=r.times(++m),u=o.plus(za(l,r,f)),Wn(u.d).slice(0,f)===Wn(o.d).slice(0,f)){for(;h--;)o=mt(o.times(o),f);return p.precision=v,t==null?(_t=!0,mt(o,v)):o}o=u}}function Ut(e){for(var t=e.e*yt,r=e.d[0];r>=10;r/=10)t++;return t}function Cg(e,t,r){if(t>e.LN10.sd())throw _t=!0,r&&(e.precision=r),Error(Nn+"LN10 precision limit exceeded");return mt(new e(e.LN10),t)}function Ni(e){for(var t="";e--;)t+="0";return t}function Ac(e,t){var r,n,l,o,u,f,m,h,p,v=1,y=10,b=e,_=b.d,N=b.constructor,w=N.precision;if(b.s<1)throw Error(Nn+(b.s?"NaN":"-Infinity"));if(b.eq(Vr))return new N(0);if(t==null?(_t=!1,h=w):h=t,b.eq(10))return t==null&&(_t=!0),Cg(N,h);if(h+=y,N.precision=h,r=Wn(_),n=r.charAt(0),o=Ut(b),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)b=b.times(e),r=Wn(b.d),n=r.charAt(0),v++;o=Ut(b),n>1?(b=new N("0."+r),o++):b=new N(n+"."+r.slice(1))}else return m=Cg(N,h+2,w).times(o+""),b=Ac(new N(n+"."+r.slice(1)),h-y).plus(m),N.precision=w,t==null?(_t=!0,mt(b,w)):b;for(f=u=b=za(b.minus(Vr),b.plus(Vr),h),p=mt(b.times(b),h),l=3;;){if(u=mt(u.times(p),h),m=f.plus(za(u,new N(l),h)),Wn(m.d).slice(0,h)===Wn(f.d).slice(0,h))return f=f.times(2),o!==0&&(f=f.plus(Cg(N,h+2,w).times(o+""))),f=za(f,new N(v),h),N.precision=w,t==null?(_t=!0,mt(f,w)):f;f=m,l+=2}}function fA(e,t){var r,n,l;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(n,l),t){if(l-=n,r=r-n-1,e.e=Vl(r/yt),e.d=[],n=(r+1)%yt,r<0&&(n+=yt),n<l){for(n&&e.d.push(+t.slice(0,n)),l-=yt;n<l;)e.d.push(+t.slice(n,n+=yt));t=t.slice(n),n=yt-t.length}else n-=l;for(;n--;)t+="0";if(e.d.push(+t),_t&&(e.e>Sf||e.e<-Sf))throw Error(Xx+r)}else e.s=0,e.e=0,e.d=[0];return e}function mt(e,t,r){var n,l,o,u,f,m,h,p,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(n=t-u,n<0)n+=yt,l=t,h=v[p=0];else{if(p=Math.ceil((n+1)/yt),o=v.length,p>=o)return e;for(h=o=v[p],u=1;o>=10;o/=10)u++;n%=yt,l=n-yt+u}if(r!==void 0&&(o=ss(10,u-l-1),f=h/o%10|0,m=t<0||v[p+1]!==void 0||h%o,m=r<4?(f||m)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||m||r==6&&(n>0?l>0?h/ss(10,u-l):0:v[p-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return m?(o=Ut(e),v.length=1,t=t-o-1,v[0]=ss(10,(yt-t%yt)%yt),e.e=Vl(-t/yt)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(n==0?(v.length=p,o=1,p--):(v.length=p+1,o=ss(10,yt-n),v[p]=l>0?(h/ss(10,u-l)%ss(10,l)|0)*o:0),m)for(;;)if(p==0){(v[0]+=o)==Jt&&(v[0]=1,++e.e);break}else{if(v[p]+=o,v[p]!=Jt)break;v[p--]=0,o=1}for(n=v.length;v[--n]===0;)v.pop();if(_t&&(e.e>Sf||e.e<-Sf))throw Error(Xx+Ut(e));return e}function VO(e,t){var r,n,l,o,u,f,m,h,p,v,y=e.constructor,b=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),_t?mt(t,b):t;if(m=e.d,v=t.d,n=t.e,h=e.e,m=m.slice(),u=h-n,u){for(p=u<0,p?(r=m,u=-u,f=v.length):(r=v,n=h,f=m.length),l=Math.max(Math.ceil(b/yt),f)+2,u>l&&(u=l,r.length=1),r.reverse(),l=u;l--;)r.push(0);r.reverse()}else{for(l=m.length,f=v.length,p=l<f,p&&(f=l),l=0;l<f;l++)if(m[l]!=v[l]){p=m[l]<v[l];break}u=0}for(p&&(r=m,m=v,v=r,t.s=-t.s),f=m.length,l=v.length-f;l>0;--l)m[f++]=0;for(l=v.length;l>u;){if(m[--l]<v[l]){for(o=l;o&&m[--o]===0;)m[o]=Jt-1;--m[o],m[l]+=Jt}m[l]-=v[l]}for(;m[--f]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,_t?mt(t,b):t):new y(0)}function Ns(e,t,r){var n,l=Ut(e),o=Wn(e.d),u=o.length;return t?(r&&(n=r-u)>0?o=o.charAt(0)+"."+o.slice(1)+Ni(n):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+Ni(-l-1)+o,r&&(n=r-u)>0&&(o+=Ni(n))):l>=u?(o+=Ni(l+1-u),r&&(n=r-l-1)>0&&(o=o+"."+Ni(n))):((n=l+1)<u&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-u)>0&&(l+1===u&&(o+="."),o+=Ni(n))),e.s<0?"-"+o:o}function mA(e,t){if(e.length>t)return e.length=t,!0}function YO(e){var t,r,n;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(vs+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return fA(u,o.toString())}else if(typeof o!="string")throw Error(vs+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,kB.test(o))fA(u,o);else throw Error(vs+o)}if(l.prototype=be,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=YO,l.config=l.set=PB,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return l.config(e),l}function PB(e){if(!e||typeof e!="object")throw Error(Nn+"Object expected");var t,r,n,l=["precision",1,Fl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((n=e[r=l[t]])!==void 0)if(Vl(n)===n&&n>=l[t+1]&&n<=l[t+2])this[r]=n;else throw Error(vs+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(vs+r+": "+n);return this}var Wx=YO(TB);Vr=new Wx(1);const rt=Wx;function KO(e){var t;return e===0?t=1:t=Math.floor(new rt(e).abs().log(10).toNumber())+1,t}function XO(e,t,r){for(var n=new rt(e),l=0,o=[];n.lt(t)&&l<1e5;)o.push(n.toNumber()),n=n.add(r),l++;return o}var WO=e=>{var[t,r]=e,[n,l]=[t,r];return t>r&&([n,l]=[r,t]),[n,l]},ZO=(e,t,r)=>{if(e.lte(0))return new rt(0);var n=KO(e.toNumber()),l=new rt(10).pow(n),o=e.div(l),u=n!==1?.05:.1,f=new rt(Math.ceil(o.div(u).toNumber())).add(r).mul(u),m=f.mul(l);return t?new rt(m.toNumber()):new rt(Math.ceil(m.toNumber()))},qB=(e,t,r)=>{var n=new rt(1),l=new rt(e);if(!l.isint()&&r){var o=Math.abs(e);o<1?(n=new rt(10).pow(KO(e)-1),l=new rt(Math.floor(l.div(n).toNumber())).mul(n)):o>1&&(l=new rt(Math.floor(e)))}else e===0?l=new rt(Math.floor((t-1)/2)):r||(l=new rt(Math.floor(e)));for(var u=Math.floor((t-1)/2),f=[],m=0;m<t;m++)f.push(l.add(new rt(m-u).mul(n)).toNumber());return f},JO=function(t,r,n,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new rt(0),tickMin:new rt(0),tickMax:new rt(0)};var u=ZO(new rt(r).sub(t).div(n-1),l,o),f;t<=0&&r>=0?f=new rt(0):(f=new rt(t).add(r).div(2),f=f.sub(new rt(f).mod(u)));var m=Math.ceil(f.sub(t).div(u).toNumber()),h=Math.ceil(new rt(r).sub(f).div(u).toNumber()),p=m+h+1;return p>n?JO(t,r,n,l,o+1):(p<n&&(h=r>0?h+(n-p):h,m=r>0?m:m+(n-p)),{step:u,tickMin:f.sub(new rt(m).mul(u)),tickMax:f.add(new rt(h).mul(u))})},RB=function(t){var[r,n]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[f,m]=WO([r,n]);if(f===-1/0||m===1/0){var h=m===1/0?[f,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),m];return r>n?h.reverse():h}if(f===m)return qB(f,l,o);var{step:p,tickMin:v,tickMax:y}=JO(f,m,u,o,0),b=XO(v,y.add(new rt(.1).mul(p)),p);return r>n?b.reverse():b},LB=function(t,r){var[n,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,f]=WO([n,l]);if(u===-1/0||f===1/0)return[n,l];if(u===f)return[u];var m=Math.max(r,2),h=ZO(new rt(f).sub(u).div(m-1),o,0),p=[...XO(new rt(u),new rt(f),h),f];return o===!1&&(p=p.map(v=>Math.round(v))),n>l?p.reverse():p},ez=e=>e.rootProps.maxBarSize,IB=e=>e.rootProps.barGap,tz=e=>e.rootProps.barCategoryGap,BB=e=>e.rootProps.barSize,Nm=e=>e.rootProps.stackOffset,rz=e=>e.rootProps.reverseStackOrder,Zx=e=>e.options.chartName,Jx=e=>e.rootProps.syncId,nz=e=>e.rootProps.syncMethod,eb=e=>e.options.eventEmitter,er={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},rs={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Vn={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},_m=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function wm(e,t,r){if(r!=="auto")return r;if(e!=null)return $a(e,t)?"category":"number"}function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Af(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){$B(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $B(e,t,r){return(t=UB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=HB(e,"string");return typeof t=="symbol"?t:t+""}function HB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pA={allowDataOverflow:rs.allowDataOverflow,allowDecimals:rs.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:rs.angleAxisId,includeHidden:!1,name:void 0,reversed:rs.reversed,scale:rs.scale,tick:rs.tick,tickCount:void 0,ticks:void 0,type:rs.type,unit:void 0},vA={allowDataOverflow:Vn.allowDataOverflow,allowDecimals:Vn.allowDecimals,allowDuplicatedCategory:Vn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vn.radiusAxisId,includeHidden:Vn.includeHidden,name:void 0,reversed:Vn.reversed,scale:Vn.scale,tick:Vn.tick,tickCount:Vn.tickCount,ticks:void 0,type:Vn.type,unit:void 0},GB=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},tb=re([GB,GE],(e,t)=>{var r;if(e!=null)return e;var n=(r=wm(t,"angleAxis",pA.type))!==null&&r!==void 0?r:"category";return Af(Af({},pA),{},{type:n})}),QB=(e,t)=>e.polarAxis.radiusAxis[t],rb=re([QB,GE],(e,t)=>{var r;if(e!=null)return e;var n=(r=wm(t,"radiusAxis",vA.type))!==null&&r!==void 0?r:"category";return Af(Af({},vA),{},{type:n})}),Sm=e=>e.polarOptions,nb=re([Ua,Ha,tr],U6),az=re([Sm,nb],(e,t)=>{if(e!=null)return qn(e.innerRadius,t,0)}),iz=re([Sm,nb],(e,t)=>{if(e!=null)return qn(e.outerRadius,t,t*.8)}),FB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},sz=re([Sm],FB);re([tb,sz],_m);var lz=re([nb,az,iz],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});re([rb,lz],_m);var oz=re([nt,Sm,az,iz,Ua,Ha],(e,t,r,n,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:u,cy:f,startAngle:m,endAngle:h}=t;return{cx:qn(u,l,l/2),cy:qn(f,o,o/2),innerRadius:r,outerRadius:n,startAngle:m,endAngle:h,clockWise:!1}}}),nr=(e,t)=>t,Am=(e,t,r)=>r;function ab(e){return e?.id}function cz(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=r,u=new Map;return e.forEach(f=>{var m,h=(m=f.data)!==null&&m!==void 0?m:n;if(!(h==null||h.length===0)){var p=ab(f);h.forEach((v,y)=>{var b=o==null||l?y:String($t(v,o,null)),_=$t(v,f.dataKey,0),N;u.has(b)?N=u.get(b):N={},Object.assign(N,{[p]:_}),u.set(b,N)})}}),Array.from(u.values())}function Cm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Em=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Om(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function VB(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var ar=e=>{var t=nt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Yl=e=>e.tooltip.settings.axisId;function YB(e){if(e in oc)return oc[e]();var t="scale".concat(Mc(e));if(t in oc)return oc[t]()}function gA(e){var t=e.ticks,r=e.bandwidth,n=e.range(),l=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:(function(o){function u(){return o.apply(this,arguments)}return u.toString=function(){return o.toString()},u})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var u=l[0],f=l[1];return u<=f?o>=u&&o<=f:o>=f&&o<=u},bandwidth:r?()=>r.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,u)=>{var f=e(o);if(f!=null){if(e.bandwidth&&u!==null&&u!==void 0&&u.position){var m=e.bandwidth();switch(u.position){case"middle":f+=m/2;break;case"end":f+=m;break}}return f}}}}function yA(e,t,r){if(typeof e=="function")return gA(e.copy().domain(t).range(r));if(e!=null){var n=YB(e);if(n!=null)return n.domain(t).range(r),gA(n)}}var KB=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Ra(t)){for(var r,n,l=0;l<t.length;l++){var o=t[l];Ke(o)&&((r===void 0||o<r)&&(r=o),(n===void 0||o>n)&&(n=o))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function xA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(r),!0).forEach(function(n){XB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XB(e,t,r){return(t=WB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WB(e){var t=ZB(e,"string");return typeof t=="symbol"?t:t+""}function ZB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ty=[0,"auto"],Wt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},uz=(e,t)=>e.cartesianAxis.xAxis[t],Fa=(e,t)=>{var r=uz(e,t);return r??Wt},Zt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Ty,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Pc},dz=(e,t)=>e.cartesianAxis.yAxis[t],Va=(e,t)=>{var r=dz(e,t);return r??Zt},JB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ib=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??JB},Er=(e,t,r)=>{switch(t){case"xAxis":return Fa(e,r);case"yAxis":return Va(e,r);case"zAxis":return ib(e,r);case"angleAxis":return tb(e,r);case"radiusAxis":return rb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},e$=(e,t,r)=>{switch(t){case"xAxis":return Fa(e,r);case"yAxis":return Va(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Uc=(e,t,r)=>{switch(t){case"xAxis":return Fa(e,r);case"yAxis":return Va(e,r);case"angleAxis":return tb(e,r);case"radiusAxis":return rb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},fz=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function mz(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var zm=e=>e.graphicalItems.cartesianItems,t$=re([nr,Am],mz),hz=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Hc=re([zm,Er,t$],hz,{memoizeOptions:{resultEqualityCheck:Om}}),pz=re([Hc],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Cm)),vz=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),r$=re([Hc],vz),gz=e=>e.map(t=>t.data).filter(Boolean).flat(1),n$=re([Hc],gz,{memoizeOptions:{resultEqualityCheck:Om}}),yz=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:l}=t;return e.length>0?e:r.slice(n,l+1)},sb=re([n$,Kx],yz),xz=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:$t(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(l=>({value:$t(l,n)}))):e.map(n=>({value:n})),Dm=re([sb,Er,Hc],xz);function bz(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function qd(e){if(ta(e)||e instanceof Date){var t=Number(e);if(Ke(t))return t}}function bA(e){if(Array.isArray(e)){var t=[qd(e[0]),qd(e[1])];return Ra(t)?t:void 0}var r=qd(e);if(r!=null)return[r,r]}function La(e){return e.map(qd).filter(Rr)}function a$(e,t,r){return!r||typeof t!="number"||ea(t)?[]:r.length?La(r.flatMap(n=>{var l=$t(e,n.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!Ke(o)||!Ke(u)))return[t-o,t+u]})):[]}var Yt=e=>{var t=ar(e),r=Yl(e);return Uc(e,t,r)},Gc=re([Yt],e=>e?.dataKey),i$=re([pz,Kx,Yt],cz),jz=(e,t,r,n)=>{var l={},o=t.reduce((u,f)=>{if(f.stackId==null)return u;var m=u[f.stackId];return m==null&&(m=[]),m.push(f),u[f.stackId]=m,u},l);return Object.fromEntries(Object.entries(o).map(u=>{var[f,m]=u,h=n?[...m].reverse():m,p=h.map(ab);return[f,{stackedData:T4(e,p,r),graphicalItems:h}]}))},ky=re([i$,pz,Nm,rz],jz),Nz=(e,t,r,n)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(n==null&&r!=="zAxis"){var u=L4(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},s$=re([Er],e=>e.allowDataOverflow),lb=e=>{var t;if(e==null||!("domain"in e))return Ty;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=La(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Ty},_z=re([Er],lb),wz=re([_z,s$],HO),l$=re([ky,Qa,nr,wz],Nz,{memoizeOptions:{resultEqualityCheck:Em}}),ob=e=>e.errorBars,o$=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>bz(r,n)),Ef=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var l=r.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),f=Math.max(...o);return[u,f]}},Sz=(e,t,r,n,l)=>{var o,u;if(r.length>0&&e.forEach(f=>{r.forEach(m=>{var h,p,v=(h=n[m.id])===null||h===void 0?void 0:h.filter(S=>bz(l,S)),y=$t(f,(p=t.dataKey)!==null&&p!==void 0?p:m.dataKey),b=a$(f,y,v);if(b.length>=2){var _=Math.min(...b),N=Math.max(...b);(o==null||_<o)&&(o=_),(u==null||N>u)&&(u=N)}var w=bA(y);w!=null&&(o=o==null?w[0]:Math.min(o,w[0]),u=u==null?w[1]:Math.max(u,w[1]))})}),t?.dataKey!=null&&e.forEach(f=>{var m=bA($t(f,t.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),u=u==null?m[1]:Math.max(u,m[1]))}),Ke(o)&&Ke(u))return[o,u]},c$=re([sb,Er,r$,ob,nr],Sz,{memoizeOptions:{resultEqualityCheck:Em}});function u$(e){var{value:t}=e;if(ta(t)||t instanceof Date)return t}var d$=(e,t,r)=>{var n=e.map(u$).filter(l=>l!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&$2(n))?oO(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Az=e=>e.referenceElements.dots,Kl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),f$=re([Az,nr,Am],Kl),Cz=e=>e.referenceElements.areas,m$=re([Cz,nr,Am],Kl),Ez=e=>e.referenceElements.lines,h$=re([Ez,nr,Am],Kl),Oz=(e,t)=>{if(e!=null){var r=La(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},p$=re(f$,nr,Oz),zz=(e,t)=>{if(e!=null){var r=La(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},v$=re([m$,nr],zz);function g$(e){var t;if(e.x!=null)return La([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:La(r)}function y$(e){var t;if(e.y!=null)return La([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:La(r)}var Dz=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?g$(n):y$(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},x$=re([h$,nr],Dz),b$=re(p$,x$,v$,(e,t,r)=>Ef(e,r,t)),Mz=(e,t,r,n,l,o,u,f)=>{if(r!=null)return r;var m=u==="vertical"&&f==="xAxis"||u==="horizontal"&&f==="yAxis",h=m?Ef(n,o,l):Ef(o,l);return MB(t,h,e.allowDataOverflow)},j$=re([Er,_z,wz,l$,c$,b$,nt,nr],Mz,{memoizeOptions:{resultEqualityCheck:Em}}),N$=[0,1],Tz=(e,t,r,n,l,o,u)=>{if(!((e==null||r==null||r.length===0)&&u===void 0)){var{dataKey:f,type:m}=e,h=$a(t,o);if(h&&f==null){var p;return oO(0,(p=r?.length)!==null&&p!==void 0?p:0)}return m==="category"?d$(n,e,h):l==="expand"?N$:u}},cb=re([Er,nt,sb,Dm,Nm,nr,j$],Tz);function _$(e){return e in oc}var kz=(e,t,r)=>{if(e!=null){var{scale:n,type:l}=e;if(n==="auto")return l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":l==="category"?"band":"linear";if(typeof n=="string"){var o="scale".concat(Mc(n));return _$(o)?o:"point"}}},Xl=re([Er,fz,Zx],kz);function ub(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?yA(e.scale,r,n):yA(t,r,n)}var Pz=(e,t,r)=>{var n=lb(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ra(e))return RB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ra(e))return LB(e,t.tickCount,t.allowDecimals)}},db=re([cb,Uc,Xl],Pz),qz=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Ra(t)&&Array.isArray(r)&&r.length>0){var l,o,u=t[0],f=(l=r[0])!==null&&l!==void 0?l:0,m=t[1],h=(o=r[r.length-1])!==null&&o!==void 0?o:0;return[Math.min(u,f),Math.max(m,h)]}return t},w$=re([Er,cb,db,nr],qz),S$=re(Dm,Er,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(La(e.map(v=>v.value))).sort((v,y)=>v-y),l=n[0],o=n[n.length-1];if(l==null||o==null)return 1/0;var u=o-l;if(u===0)return 1/0;for(var f=0;f<n.length-1;f++){var m=n[f],h=n[f+1];if(!(m==null||h==null)){var p=h-m;r=Math.min(r,p)}}return r/u}}),Rz=re(S$,nt,tz,tr,(e,t,r,n,l)=>l,(e,t,r,n,l)=>{if(!Ke(e))return 0;var o=t==="vertical"?n.height:n.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=qn(r,e*o),f=e*o/2;return f-u-(f-u)/o*u}return 0}),A$=(e,t,r)=>{var n=Fa(e,t);return n==null||typeof n.padding!="string"?0:Rz(e,"xAxis",t,r,n.padding)},C$=(e,t,r)=>{var n=Va(e,t);return n==null||typeof n.padding!="string"?0:Rz(e,"yAxis",t,r,n.padding)},E$=re(Fa,A$,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((r=l.left)!==null&&r!==void 0?r:0)+t,right:((n=l.right)!==null&&n!==void 0?n:0)+t}}),O$=re(Va,C$,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((r=l.top)!==null&&r!==void 0?r:0)+t,bottom:((n=l.bottom)!==null&&n!==void 0?n:0)+t}}),z$=re([tr,E$,om,lm,(e,t,r)=>r],(e,t,r,n,l)=>{var{padding:o}=n;return l?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),D$=re([tr,nt,O$,om,lm,(e,t,r)=>r],(e,t,r,n,l,o)=>{var{padding:u}=l;return o?[n.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Qc=(e,t,r,n)=>{var l;switch(t){case"xAxis":return z$(e,r,n);case"yAxis":return D$(e,r,n);case"zAxis":return(l=ib(e,r))===null||l===void 0?void 0:l.range;case"angleAxis":return sz(e);case"radiusAxis":return lz(e,r);default:return}},Lz=re([Er,Qc],_m),M$=re([Xl,w$],KB),Mm=re([Er,Xl,M$,Lz],ub);re([Hc,ob,nr],o$);function Iz(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Tm=(e,t)=>t,km=(e,t,r)=>r,T$=re(im,Tm,km,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Iz)),k$=re(sm,Tm,km,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Iz)),Bz=(e,t)=>({width:e.width,height:t.height}),P$=(e,t)=>{var r=typeof t.width=="number"?t.width:Pc;return{width:r,height:e.height}},$z=re(tr,Fa,Bz),q$=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},R$=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},L$=re(Ha,tr,T$,Tm,km,(e,t,r,n,l)=>{var o={},u;return r.forEach(f=>{var m=Bz(t,f);u==null&&(u=q$(t,n,e));var h=n==="top"&&!l||n==="bottom"&&l;o[f.id]=u-Number(h)*m.height,u+=(h?-1:1)*m.height}),o}),I$=re(Ua,tr,k$,Tm,km,(e,t,r,n,l)=>{var o={},u;return r.forEach(f=>{var m=P$(t,f);u==null&&(u=R$(t,n,e));var h=n==="left"&&!l||n==="right"&&l;o[f.id]=u-Number(h)*m.width,u+=(h?-1:1)*m.width}),o}),B$=(e,t)=>{var r=Fa(e,t);if(r!=null)return L$(e,r.orientation,r.mirror)},$$=re([tr,Fa,B$,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var l=r?.[n];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),U$=(e,t)=>{var r=Va(e,t);if(r!=null)return I$(e,r.orientation,r.mirror)},H$=re([tr,Va,U$,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var l=r?.[n];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),Uz=re(tr,Va,(e,t)=>{var r=typeof t.width=="number"?t.width:Pc;return{width:r,height:e.height}}),jA=(e,t,r)=>{switch(t){case"xAxis":return $z(e,r).width;case"yAxis":return Uz(e,r).height;default:return}},Hz=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=r,f=$a(e,n),m=t.map(h=>h.value);if(u&&f&&o==="category"&&l&&$2(m))return m}},fb=re([nt,Dm,Er,nr],Hz),Gz=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:l,scale:o}=r,u=$a(e,n);if(u&&(l==="number"||o!=="auto"))return t.map(f=>f.value)}},mb=re([nt,Dm,Uc,nr],Gz),NA=re([nt,e$,Xl,Mm,fb,mb,Qc,db,nr],(e,t,r,n,l,o,u,f,m)=>{if(t!=null){var h=$a(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:o,duplicateDomain:l,isCategorical:h,niceTicks:f,range:u,realScaleType:r,scale:n}}}),G$=(e,t,r,n,l,o,u,f,m)=>{if(!(t==null||n==null)){var h=$a(e,m),{type:p,ticks:v,tickCount:y}=t,b=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,_=p==="category"&&n.bandwidth?n.bandwidth()/b:0;_=m==="angleAxis"&&o!=null&&o.length>=2?qr(o[0]-o[1])*2*_:_;var N=v||l;return N?N.map((w,S)=>{var O=u?u.indexOf(w):w,C=n.map(O);return Ke(C)?{index:S,coordinate:C+_,value:w,offset:_}:null}).filter(Rr):h&&f?f.map((w,S)=>{var O=n.map(w);return Ke(O)?{coordinate:O+_,value:w,index:S,offset:_}:null}).filter(Rr):n.ticks?n.ticks(y).map((w,S)=>{var O=n.map(w);return Ke(O)?{coordinate:O+_,value:w,index:S,offset:_}:null}).filter(Rr):n.domain().map((w,S)=>{var O=n.map(w);return Ke(O)?{coordinate:O+_,value:u?u[w]:w,index:S,offset:_}:null}).filter(Rr)}},Qz=re([nt,Uc,Xl,Mm,db,Qc,fb,mb,nr],G$),Q$=(e,t,r,n,l,o,u)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var f=$a(e,u),{tickCount:m}=t,h=0;return h=u==="angleAxis"&&n?.length>=2?qr(n[0]-n[1])*2*h:h,f&&o?o.map((p,v)=>{var y=r.map(p);return Ke(y)?{coordinate:y+h,value:p,index:v,offset:h}:null}).filter(Rr):r.ticks?r.ticks(m).map((p,v)=>{var y=r.map(p);return Ke(y)?{coordinate:y+h,value:p,index:v,offset:h}:null}).filter(Rr):r.domain().map((p,v)=>{var y=r.map(p);return Ke(y)?{coordinate:y+h,value:l?l[p]:p,index:v,offset:h}:null}).filter(Rr)}},zi=re([nt,Uc,Mm,Qc,fb,mb,nr],Q$),Di=re(Er,Mm,(e,t)=>{if(!(e==null||t==null))return Cf(Cf({},e),{},{scale:t})}),F$=re([Er,Xl,cb,Lz],ub);re((e,t,r)=>ib(e,r),F$,(e,t)=>{if(!(e==null||t==null))return Cf(Cf({},e),{},{scale:t})});var V$=re([nt,im,sm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Fz=e=>e.options.defaultTooltipEventType,Vz=e=>e.options.validateTooltipEventTypes;function Yz(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function hb(e,t){var r=Fz(e),n=Vz(e);return Yz(t,r,n)}function Y$(e){return Ae(t=>hb(t,e))}var Kz=(e,t)=>{var r,n=Number(t);if(!(ea(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},K$=e=>e.tooltip.settings,wi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},X$={itemInteraction:{click:wi,hover:wi},axisInteraction:{click:wi,hover:wi},keyboardInteraction:wi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Xz=Ir({name:"tooltip",initialState:X$,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Nt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,l=kn(e).tooltipItemPayloads.indexOf(r);l>-1&&(e.tooltipItemPayloads[l]=n)},prepare:Nt()},removeTooltipEntrySettings:{reducer(e,t){var r=kn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Nt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:W$,replaceTooltipEntrySettings:Z$,removeTooltipEntrySettings:J$,setTooltipSettingsState:eU,setActiveMouseOverItemIndex:Wz,mouseLeaveItem:tU,mouseLeaveChart:Zz,setActiveClickItemIndex:rU,setMouseOverAxisIndex:Jz,setMouseClickAxisIndex:nU,setSyncInteraction:Py,setKeyboardInteraction:qy}=Xz.actions,aU=Xz.reducer;function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){iU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iU(e,t,r){return(t=sU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sU(e){var t=lU(e,"string");return typeof t=="symbol"?t:t+""}function lU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oU(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function cU(e){return e.index!=null}var eD=(e,t,r,n)=>{if(t==null)return wi;var l=oU(e,t,r);if(l==null)return wi;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(cU(l)){if(o)return wd(wd({},l),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return wd(wd({},wi),{},{coordinate:l.coordinate})};function uU(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function dU(e,t){var r=uU(e),n=t[0],l=t[1];if(r===void 0)return!1;var o=Math.min(n,l),u=Math.max(n,l);return r>=o&&r<=u}function fU(e,t,r){if(r==null||t==null)return!0;var n=$t(e,t);return n==null||!Ra(r)?!0:dU(n,r)}var pb=(e,t,r,n)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!Ke(o))return l;var u=0,f=1/0;t.length>0&&(f=t.length-1);var m=Math.max(u,Math.min(o,f)),h=t[m];return h==null||fU(h,r,n)?String(m):null},tD=(e,t,r,n,l,o,u)=>{if(o!=null){var f=u[0],m=f?.getPosition(o);if(m!=null)return m;var h=l?.[Number(o)];if(h)return r==="horizontal"?{x:h.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:h.coordinate}}},rD=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(r==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&n!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(u=>{var f;return((f=u.settings)===null||f===void 0?void 0:f.graphicalItemId)===l})},nD=e=>e.options.tooltipPayloadSearcher,Wl=e=>e.tooltip;function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function SA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){mU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mU(e,t,r){return(t=hU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hU(e){var t=pU(e,"string");return typeof t=="symbol"?t:t+""}function pU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vU(e,t){return e??t}var aD=(e,t,r,n,l,o,u)=>{if(!(t==null||o==null)){var{chartData:f,computedData:m,dataStartIndex:h,dataEndIndex:p}=r,v=[];return e.reduce((y,b)=>{var _,{dataDefinedOnItem:N,settings:w}=b,S=vU(N,f),O=Array.isArray(S)?TE(S,h,p):S,C=(_=w?.dataKey)!==null&&_!==void 0?_:n,E=w?.nameKey,z;if(n&&Array.isArray(O)&&!Array.isArray(O[0])&&u==="axis"?z=U2(O,n,l):z=o(O,t,m,E),Array.isArray(z))z.forEach(L=>{var T=SA(SA({},w),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});y.push(ww({tooltipEntrySettings:T,dataKey:L.dataKey,payload:L.payload,value:$t(L.payload,L.dataKey),name:L.name}))});else{var M;y.push(ww({tooltipEntrySettings:w,dataKey:C,payload:z,value:$t(z,C),name:(M=$t(z,E))!==null&&M!==void 0?M:w?.name}))}return y},v)}},vb=re([Yt,fz,Zx],kz),gU=re([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),yU=re([ar,Yl],mz),Zl=re([gU,Yt,yU],hz,{memoizeOptions:{resultEqualityCheck:Om}}),xU=re([Zl],e=>e.filter(Cm)),bU=re([Zl],gz,{memoizeOptions:{resultEqualityCheck:Om}}),Jl=re([bU,Qa],yz),jU=re([xU,Qa,Yt],cz),gb=re([Jl,Yt,Zl],xz),iD=re([Yt],lb),NU=re([Yt],e=>e.allowDataOverflow),sD=re([iD,NU],HO),_U=re([Zl],e=>e.filter(Cm)),wU=re([jU,_U,Nm,rz],jz),SU=re([wU,Qa,ar,sD],Nz),AU=re([Zl],vz),CU=re([Jl,Yt,AU,ob,ar],Sz,{memoizeOptions:{resultEqualityCheck:Em}}),EU=re([Az,ar,Yl],Kl),OU=re([EU,ar],Oz),zU=re([Cz,ar,Yl],Kl),DU=re([zU,ar],zz),MU=re([Ez,ar,Yl],Kl),TU=re([MU,ar],Dz),kU=re([OU,TU,DU],Ef),PU=re([Yt,iD,sD,SU,CU,kU,nt,ar],Mz),Fc=re([Yt,nt,Jl,gb,Nm,ar,PU],Tz),qU=re([Fc,Yt,vb],Pz),RU=re([Yt,Fc,qU,ar],qz),lD=e=>{var t=ar(e),r=Yl(e),n=!1;return Qc(e,t,r,n)},oD=re([Yt,lD],_m),cD=re([Yt,vb,RU,oD],ub),LU=re([nt,gb,Yt,ar],Hz),IU=re([nt,gb,Yt,ar],Gz),BU=(e,t,r,n,l,o,u,f)=>{if(t){var{type:m}=t,h=$a(e,f);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,v=m==="category"&&n.bandwidth?n.bandwidth()/p:0;return v=f==="angleAxis"&&l!=null&&l?.length>=2?qr(l[0]-l[1])*2*v:v,h&&u?u.map((y,b)=>{var _=n.map(y);return Ke(_)?{coordinate:_+v,value:y,index:b,offset:v}:null}).filter(Rr):n.domain().map((y,b)=>{var _=n.map(y);return Ke(_)?{coordinate:_+v,value:o?o[y]:y,index:b,offset:v}:null}).filter(Rr)}}},Ya=re([nt,Yt,vb,cD,lD,LU,IU,ar],BU),yb=re([Fz,Vz,K$],(e,t,r)=>Yz(r.shared,e,t)),uD=e=>e.tooltip.settings.trigger,xb=e=>e.tooltip.settings.defaultIndex,Vc=re([Wl,yb,uD,xb],eD),_s=re([Vc,Jl,Gc,Fc],pb),dD=re([Ya,_s],Kz),fD=re([Vc],e=>{if(e)return e.dataKey});re([Vc],e=>{if(e)return e.graphicalItemId});var mD=re([Wl,yb,uD,xb],rD),$U=re([Ua,Ha,nt,tr,Ya,xb,mD],tD),UU=re([Vc,$U],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),HU=re([Vc],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),GU=re([mD,_s,Qa,Gc,dD,nD,yb],aD),QU=re([GU],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function CA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(n){FU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FU(e,t,r){return(t=VU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VU(e){var t=YU(e,"string");return typeof t=="symbol"?t:t+""}function YU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KU=()=>Ae(Yt),XU=()=>{var e=KU(),t=Ae(Ya),r=Ae(cD);return Bl(!e||!r?void 0:CA(CA({},e),{},{scale:r}),t)};function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function wl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(n){WU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WU(e,t,r){return(t=ZU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZU(e){var t=JU(e,"string");return typeof t=="symbol"?t:t+""}function JU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e9=(e,t,r,n)=>{var l=t.find(o=>o&&o.index===r);if(l){if(e==="horizontal")return{x:l.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:l.coordinate}}return{x:0,y:0}},t9=(e,t,r,n)=>{var l=t.find(h=>h&&h.index===r);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=n;return wl(wl(wl({},n),fr(n.cx,n.cy,u,o)),{},{angle:o,radius:u})}var f=l.coordinate,{angle:m}=n;return wl(wl(wl({},n),fr(n.cx,n.cy,f,m)),{},{angle:m,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function r9(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var hD=(e,t,r,n,l)=>{var o,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var f=0;f<u;f++){var m,h,p,v,y,b=f>0?(m=r[f-1])===null||m===void 0?void 0:m.coordinate:(h=r[u-1])===null||h===void 0?void 0:h.coordinate,_=(p=r[f])===null||p===void 0?void 0:p.coordinate,N=f>=u-1?(v=r[0])===null||v===void 0?void 0:v.coordinate:(y=r[f+1])===null||y===void 0?void 0:y.coordinate,w=void 0;if(!(b==null||_==null||N==null))if(qr(_-b)!==qr(N-_)){var S=[];if(qr(N-_)===qr(l[1]-l[0])){w=N;var O=_+l[1]-l[0];S[0]=Math.min(O,(O+b)/2),S[1]=Math.max(O,(O+b)/2)}else{w=b;var C=N+l[1]-l[0];S[0]=Math.min(_,(C+_)/2),S[1]=Math.max(_,(C+_)/2)}var E=[Math.min(_,(w+_)/2),Math.max(_,(w+_)/2)];if(e>E[0]&&e<=E[1]||e>=S[0]&&e<=S[1]){var z;return(z=r[f])===null||z===void 0?void 0:z.index}}else{var M=Math.min(b,N),L=Math.max(b,N);if(e>(M+_)/2&&e<=(L+_)/2){var T;return(T=r[f])===null||T===void 0?void 0:T.index}}}else if(t)for(var k=0;k<u;k++){var Y=t[k];if(Y!=null){var X=t[k+1],B=t[k-1];if(k===0&&X!=null&&e<=(Y.coordinate+X.coordinate)/2||k===u-1&&B!=null&&e>(Y.coordinate+B.coordinate)/2||k>0&&k<u-1&&B!=null&&X!=null&&e>(Y.coordinate+B.coordinate)/2&&e<=(Y.coordinate+X.coordinate)/2)return Y.index}}return-1},n9=()=>Ae(Zx),bb=(e,t)=>t,pD=(e,t,r)=>r,jb=(e,t,r,n)=>n,a9=re(Ya,e=>Yf(e,t=>t.coordinate)),Nb=re([Wl,bb,pD,jb],eD),_b=re([Nb,Jl,Gc,Fc],pb),i9=(e,t,r)=>{if(t!=null){var n=Wl(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},vD=re([Wl,bb,pD,jb],rD),Of=re([Ua,Ha,nt,tr,Ya,jb,vD],tD),s9=re([Nb,Of],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),gD=re([Ya,_b],Kz),l9=re([vD,_b,Qa,Gc,gD,nD,bb],aD),o9=re([Nb,_b],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),c9=(e,t,r,n,l,o,u)=>{if(!(!e||!r||!n||!l)&&r9(e,u)){var f=I4(e,t),m=hD(f,o,l,r,n),h=e9(t,l,m,e);return{activeIndex:String(m),activeCoordinate:h}}},u9=(e,t,r,n,l,o,u)=>{if(!(!e||!n||!l||!o||!r)){var f=V6(e,r);if(f){var m=B4(f,t),h=hD(m,u,o,n,l),p=t9(t,o,h,f);return{activeIndex:String(h),activeCoordinate:p}}}},d9=(e,t,r,n,l,o,u,f)=>{if(!(!e||!t||!n||!l||!o))return t==="horizontal"||t==="vertical"?c9(e,t,n,l,o,u,f):u9(e,t,r,n,l,o,u)},f9=re(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),m9=re(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(er)),r=Array.from(new Set(t));return r.sort((n,l)=>n-l)},{memoizeOptions:{resultEqualityCheck:VB}});function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function zA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(n){h9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h9(e,t,r){return(t=p9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p9(e){var t=v9(e,"string");return typeof t=="symbol"?t:t+""}function v9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g9={},y9={zIndexMap:Object.values(er).reduce((e,t)=>zA(zA({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),g9)},x9=new Set(Object.values(er));function b9(e){return x9.has(e)}var yD=Ir({name:"zIndex",initialState:y9,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Nt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!b9(r)&&delete e.zIndexMap[r])},prepare:Nt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:l}=t.payload;e.zIndexMap[r]?l?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:l?void 0:n,panoramaElement:l?n:void 0}},prepare:Nt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Nt()}}}),{registerZIndexPortal:j9,unregisterZIndexPortal:N9,registerZIndexPortalElement:_9,unregisterZIndexPortalElement:w9}=yD.actions,S9=yD.reducer;function wn(e){var{zIndex:t,children:r}=e,n=yL(),l=n&&t!==void 0&&t!==0,o=xr(),u=Pt();j.useLayoutEffect(()=>l?(u(j9({zIndex:t})),()=>{u(N9({zIndex:t}))}):As,[u,t,l]);var f=Ae(m=>f9(m,t,o));return l?f?e2.createPortal(r,f):null:r}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ry.apply(null,arguments)}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(r),!0).forEach(function(n){A9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A9(e,t,r){return(t=C9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C9(e){var t=E9(e,"string");return typeof t=="symbol"?t:t+""}function E9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O9(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return j.isValidElement(t)?j.cloneElement(t,n):j.createElement(r,n)}function z9(e){var t,{coordinate:r,payload:n,index:l,offset:o,tooltipAxisBandSize:u,layout:f,cursor:m,tooltipEventType:h,chartName:p}=e,v=r,y=n,b=l;if(!m||!v||p!=="ScatterChart"&&h!=="axis")return null;var _,N,w;if(p==="ScatterChart")_=v,N=s6,w=er.cursorLine;else if(p==="BarChart")_=l6(f,v,o,u),N=aO,w=er.cursorRectangle;else if(f==="radial"&&Q2(v)){var{cx:S,cy:O,radius:C,startAngle:E,endAngle:z}=iO(v);_={cx:S,cy:O,startAngle:E,endAngle:z,innerRadius:C,outerRadius:C},N=lO,w=er.cursorLine}else _={points:W6(f,v,o)},N=JE,w=er.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,L=Sd(Sd(Sd(Sd({stroke:"#ccc",pointerEvents:"none"},o),_),Dc(m)),{},{payload:y,payloadIndex:b,className:ut("recharts-tooltip-cursor",M)});return j.createElement(wn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:w},j.createElement(O9,{cursor:m,cursorComp:N,cursorProps:L}))}function D9(e){var t=XU(),r=BE(),n=Cs(),l=n9();return t==null||r==null||n==null||l==null?null:j.createElement(z9,Ry({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:l}))}var xD=j.createContext(null),M9=()=>j.useContext(xD),Eg={exports:{}},MA;function T9(){return MA||(MA=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function l(m,h,p){this.fn=m,this.context=h,this.once=p||!1}function o(m,h,p,v,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new l(p,v||m,y),_=r?r+h:h;return m._events[_]?m._events[_].fn?m._events[_]=[m._events[_],b]:m._events[_].push(b):(m._events[_]=b,m._eventsCount++),m}function u(m,h){--m._eventsCount===0?m._events=new n:delete m._events[h]}function f(){this._events=new n,this._eventsCount=0}f.prototype.eventNames=function(){var h=[],p,v;if(this._eventsCount===0)return h;for(v in p=this._events)t.call(p,v)&&h.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},f.prototype.listeners=function(h){var p=r?r+h:h,v=this._events[p];if(!v)return[];if(v.fn)return[v.fn];for(var y=0,b=v.length,_=new Array(b);y<b;y++)_[y]=v[y].fn;return _},f.prototype.listenerCount=function(h){var p=r?r+h:h,v=this._events[p];return v?v.fn?1:v.length:0},f.prototype.emit=function(h,p,v,y,b,_){var N=r?r+h:h;if(!this._events[N])return!1;var w=this._events[N],S=arguments.length,O,C;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,v),!0;case 4:return w.fn.call(w.context,p,v,y),!0;case 5:return w.fn.call(w.context,p,v,y,b),!0;case 6:return w.fn.call(w.context,p,v,y,b,_),!0}for(C=1,O=new Array(S-1);C<S;C++)O[C-1]=arguments[C];w.fn.apply(w.context,O)}else{var E=w.length,z;for(C=0;C<E;C++)switch(w[C].once&&this.removeListener(h,w[C].fn,void 0,!0),S){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,p);break;case 3:w[C].fn.call(w[C].context,p,v);break;case 4:w[C].fn.call(w[C].context,p,v,y);break;default:if(!O)for(z=1,O=new Array(S-1);z<S;z++)O[z-1]=arguments[z];w[C].fn.apply(w[C].context,O)}}return!0},f.prototype.on=function(h,p,v){return o(this,h,p,v,!1)},f.prototype.once=function(h,p,v){return o(this,h,p,v,!0)},f.prototype.removeListener=function(h,p,v,y){var b=r?r+h:h;if(!this._events[b])return this;if(!p)return u(this,b),this;var _=this._events[b];if(_.fn)_.fn===p&&(!y||_.once)&&(!v||_.context===v)&&u(this,b);else{for(var N=0,w=[],S=_.length;N<S;N++)(_[N].fn!==p||y&&!_[N].once||v&&_[N].context!==v)&&w.push(_[N]);w.length?this._events[b]=w.length===1?w[0]:w:u(this,b)}return this},f.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&u(this,p)):(this._events=new n,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=r,f.EventEmitter=f,e.exports=f})(Eg)),Eg.exports}var k9=T9();const P9=Ba(k9);var Cc=new P9,Ly="recharts.syncEvent.tooltip",TA="recharts.syncEvent.brush",bD=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!ea(r))return e[r]}},q9={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},jD=Ir({name:"options",initialState:q9,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),R9=jD.reducer,{createEventEmitter:L9}=jD.actions;function I9(e){return e.tooltip.syncInteraction}var B9={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ND=Ir({name:"chartData",initialState:B9,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:kA,setDataStartEndIndexes:$9,setComputedData:bX}=ND.actions,U9=ND.reducer,H9=["x","y"];function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(n){G9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G9(e,t,r){return(t=Q9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q9(e){var t=F9(e,"string");return typeof t=="symbol"?t:t+""}function F9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V9(e,t){if(e==null)return{};var r,n,l=Y9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Y9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function K9(){var e=Ae(Jx),t=Ae(eb),r=Pt(),n=Ae(nz),l=Ae(Ya),o=Cs(),u=cm(),f=Ae(m=>m.rootProps.className);j.useEffect(()=>{if(e==null)return As;var m=(h,p,v)=>{if(t!==v&&e===h){if(n==="index"){var y;if(u&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var b=p.payload.coordinate,{x:_,y:N}=b,w=V9(b,H9),{x:S,y:O,width:C,height:E}=p.payload.sourceViewBox,z=Sl(Sl({},w),{},{x:u.x+(C?(_-S)/C:0)*u.width,y:u.y+(E?(N-O)/E:0)*u.height});r(Sl(Sl({},p),{},{payload:Sl(Sl({},p.payload),{},{coordinate:z})}))}else r(p);return}if(l!=null){var M;if(typeof n=="function"){var L={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},T=n(l,L);M=l[T]}else n==="value"&&(M=l.find(P=>String(P.value)===p.payload.label));var{coordinate:k}=p.payload;if(M==null||p.payload.active===!1||k==null||u==null){r(Py({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Y,y:X}=k,B=Math.min(Y,u.x+u.width),le=Math.min(X,u.y+u.height),ue={x:o==="horizontal"?M.coordinate:B,y:o==="horizontal"?le:M.coordinate},Q=Py({active:p.payload.active,coordinate:ue,dataKey:p.payload.dataKey,index:String(M.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(Q)}}};return Cc.on(Ly,m),()=>{Cc.off(Ly,m)}},[f,r,t,e,n,l,o,u])}function X9(){var e=Ae(Jx),t=Ae(eb),r=Pt();j.useEffect(()=>{if(e==null)return As;var n=(l,o,u)=>{t!==u&&e===l&&r($9(o))};return Cc.on(TA,n),()=>{Cc.off(TA,n)}},[r,t,e])}function W9(){var e=Pt();j.useEffect(()=>{e(L9())},[e]),K9(),X9()}function Z9(e,t,r,n,l,o){var u=Ae(b=>i9(b,e,t)),f=Ae(eb),m=Ae(Jx),h=Ae(nz),p=Ae(I9),v=p?.active,y=cm();j.useEffect(()=>{if(!v&&m!=null&&f!=null){var b=Py({active:o,coordinate:r,dataKey:u,index:l,label:typeof n=="number"?String(n):n,sourceViewBox:y,graphicalItemId:void 0});Cc.emit(Ly,m,b,f)}},[v,r,u,l,n,f,m,h,o,y])}function qA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function RA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(r),!0).forEach(function(n){J9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J9(e,t,r){return(t=e7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e7(e){var t=t7(e,"string");return typeof t=="symbol"?t:t+""}function t7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r7(e){return e.dataKey}function n7(e,t){return j.isValidElement(e)?j.cloneElement(e,t):typeof e=="function"?j.createElement(e,t):j.createElement(IL,t)}var LA=[],a7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function IA(e){var t,r,n=Cr(e,a7),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:f,content:m,filterNull:h,isAnimationActive:p,offset:v,payloadUniqBy:y,position:b,reverseDirection:_,useTranslate3d:N,wrapperStyle:w,cursor:S,shared:O,trigger:C,defaultIndex:E,portal:z,axisId:M}=n,L=Pt(),T=typeof E=="number"?String(E):E;j.useEffect(()=>{L(eU({shared:O,trigger:C,axisId:M,active:l,defaultIndex:T}))},[L,O,C,M,l,T]);var k=cm(),Y=ZE(),X=Y$(O),{activeIndex:B,isActive:le}=(t=Ae(ce=>o9(ce,X,C,T)))!==null&&t!==void 0?t:{},ue=Ae(ce=>l9(ce,X,C,T)),Q=Ae(ce=>gD(ce,X,C,T)),P=Ae(ce=>s9(ce,X,C,T)),J=ue,H=M9(),ve=(r=l??le)!==null&&r!==void 0?r:!1,[I,ge]=w5([J,ve]),ee=X==="axis"?Q:void 0;Z9(X,C,P,ee,B,ve);var fe=z??H;if(fe==null||k==null||X==null)return null;var ye=J??LA;ve||(ye=LA),h&&ye.length&&(ye=XR(ye.filter(ce=>ce.value!=null&&(ce.hide!==!0||n.includeHidden)),y,r7));var he=ye.length>0,$=j.createElement(FL,{allowEscapeViewBox:o,animationDuration:u,animationEasing:f,isAnimationActive:p,active:ve,coordinate:P,hasPayload:he,offset:v,position:b,reverseDirection:_,useTranslate3d:N,viewBox:k,wrapperStyle:w,lastBoundingBox:I,innerRef:ge,hasPortalFromProps:!!z},n7(m,RA(RA({},n),{},{payload:ye,label:ee,active:ve,activeIndex:B,coordinate:P,accessibilityLayer:Y})));return j.createElement(j.Fragment,null,e2.createPortal($,fe),ve&&j.createElement(D9,{cursor:S,tooltipEventType:X,coordinate:P,payload:ye,index:B}))}var wb=e=>null;wb.displayName="Cell";function i7(e,t,r){return(t=s7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s7(e){var t=l7(e,"string");return typeof t=="symbol"?t:t+""}function l7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class o7{constructor(t){i7(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function c7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(n){u7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u7(e,t,r){return(t=d7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d7(e){var t=f7(e,"string");return typeof t=="symbol"?t:t+""}function f7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m7={cacheSize:2e3,enableCache:!0},_D=c7({},m7),$A=new o7(_D.cacheSize),h7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UA="recharts_measurement_span";function p7(e,t){var r=t.fontSize||"",n=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",u=t.letterSpacing||"",f=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(f)}var HA=(e,t)=>{try{var r=document.getElementById(UA);r||(r=document.createElement("span"),r.setAttribute("id",UA),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,h7,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},dc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||mm.isSsr)return{width:0,height:0};if(!_D.enableCache)return HA(t,r);var n=p7(t,r),l=$A.get(n);if(l)return l;var o=HA(t,r);return $A.set(n,o),o},wD;function v7(e,t,r){return(t=g7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,b7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,j7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},N7=["cm","mm","pt","pc","in","Q","px"];function _7(e){return N7.includes(e)}var zl="NaN";function w7(e,t){return e*j7[t]}class dr{static parse(t){var r,[,n,l]=(r=b7.exec(t))!==null&&r!==void 0?r:[];return n==null?dr.NaN:new dr(parseFloat(n),l??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ea(t)&&(this.unit=""),r!==""&&!x7.test(r)&&(this.num=NaN,this.unit=""),_7(r)&&(this.num=w7(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new dr(NaN,""):new dr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new dr(NaN,""):new dr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new dr(NaN,""):new dr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new dr(NaN,""):new dr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ea(this.num)}}wD=dr;v7(dr,"NaN",new wD(NaN,""));function SD(e){if(e==null||e.includes(zl))return zl;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,l,o]=(r=GA.exec(t))!==null&&r!==void 0?r:[],u=dr.parse(n??""),f=dr.parse(o??""),m=l==="*"?u.multiply(f):u.divide(f);if(m.isNaN())return zl;t=t.replace(GA,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,v,y]=(h=QA.exec(t))!==null&&h!==void 0?h:[],b=dr.parse(p??""),_=dr.parse(y??""),N=v==="+"?b.add(_):b.subtract(_);if(N.isNaN())return zl;t=t.replace(QA,N.toString())}return t}var FA=/\(([^()]*)\)/;function S7(e){for(var t=e,r;(r=FA.exec(t))!=null;){var[,n]=r;t=t.replace(FA,SD(n))}return t}function A7(e){var t=e.replace(/\s+/g,"");return t=S7(t),t=SD(t),t}function C7(e){try{return A7(e)}catch{return zl}}function Og(e){var t=C7(e.slice(5,-1));return t===zl?"":t}var E7=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],O7=["dx","dy","angle","className","breakAll"];function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iy.apply(null,arguments)}function VA(e,t){if(e==null)return{};var r,n,l=z7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function z7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AD=/[ \f\n\r\t\v\u2028\u2029]+/,CD=e=>{var{children:t,breakAll:r,style:n}=e;try{var l=[];St(t)||(r?l=t.toString().split(""):l=t.toString().split(AD));var o=l.map(f=>({word:f,width:dc(f,n).width})),u=r?0:dc("",n).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function D7(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var ED=(e,t,r,n)=>e.reduce((l,o)=>{var{word:u,width:f}=o,m=l[l.length-1];if(m&&f!=null&&(t==null||n||m.width+f+r<Number(t)))m.words.push(u),m.width+=f+r;else{var h={words:[u],width:f};l.push(h)}return l},[]),OD=e=>e.reduce((t,r)=>t.width>r.width?t:r),M7="",YA=(e,t,r,n,l,o,u,f)=>{var m=e.slice(0,t),h=CD({breakAll:r,style:n,children:m+M7});if(!h)return[!1,[]];var p=ED(h.wordsWithComputedWidth,o,u,f),v=p.length>l||OD(p).width>Number(o);return[v,p]},T7=(e,t,r,n,l)=>{var{maxLines:o,children:u,style:f,breakAll:m}=e,h=Ne(o),p=String(u),v=ED(t,n,r,l);if(!h||l)return v;var y=v.length>o||OD(v).width>Number(n);if(!y)return v;for(var b=0,_=p.length-1,N=0,w;b<=_&&N<=p.length-1;){var S=Math.floor((b+_)/2),O=S-1,[C,E]=YA(p,O,m,f,o,n,r,l),[z]=YA(p,S,m,f,o,n,r,l);if(!C&&!z&&(b=S+1),C&&z&&(_=S-1),!C&&z){w=E;break}N++}return w||v},KA=e=>{var t=St(e)?[]:e.toString().split(AD);return[{words:t,width:void 0}]},k7=e=>{var{width:t,scaleToFit:r,children:n,style:l,breakAll:o,maxLines:u}=e;if((t||r)&&!mm.isSsr){var f,m,h=CD({breakAll:o,children:n,style:l});if(h){var{wordsWithComputedWidth:p,spaceWidth:v}=h;f=p,m=v}else return KA(n);return T7({breakAll:o,children:n,maxLines:u,style:l},f,m,t,!!r)}return KA(n)},zD="#808080",P7={angle:0,breakAll:!1,capHeight:"0.71em",fill:zD,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Sb=j.forwardRef((e,t)=>{var r=Cr(e,P7),{x:n,y:l,lineHeight:o,capHeight:u,fill:f,scaleToFit:m,textAnchor:h,verticalAnchor:p}=r,v=VA(r,E7),y=j.useMemo(()=>k7({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:b,dy:_,angle:N,className:w,breakAll:S}=v,O=VA(v,O7);if(!ta(n)||!ta(l)||y.length===0)return null;var C=Number(n)+(Ne(b)?b:0),E=Number(l)+(Ne(_)?_:0);if(!Ke(C)||!Ke(E))return null;var z;switch(p){case"start":z=Og("calc(".concat(u,")"));break;case"middle":z=Og("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:z=Og("calc(".concat(y.length-1," * -").concat(o,")"));break}var M=[],L=y[0];if(m&&L!=null){var T=L.width,{width:k}=v;M.push("scale(".concat(Ne(k)&&Ne(T)?k/T:1,")"))}return N&&M.push("rotate(".concat(N,", ").concat(C,", ").concat(E,")")),M.length&&(O.transform=M.join(" ")),j.createElement("text",Iy({},wr(O),{ref:t,x:C,y:E,className:ut("recharts-text",w),textAnchor:h,fill:f.includes("url")?zD:f}),y.map((Y,X)=>{var B=Y.words.join(S?"":" ");return j.createElement("tspan",{x:C,dy:X===0?z:o,key:"".concat(B,"-").concat(X)},B)}))});Sb.displayName="Text";function XA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(r),!0).forEach(function(n){q7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q7(e,t,r){return(t=R7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7(e){var t=L7(e,"string");return typeof t=="symbol"?t:t+""}function L7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I7=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:l}=e,{x:o,y:u,height:f,upperWidth:m,lowerWidth:h}=_x(t),p=o,v=o+(m-h)/2,y=(p+v)/2,b=(m+h)/2,_=p+m/2,N=f>=0?1:-1,w=N*n,S=N>0?"end":"start",O=N>0?"start":"end",C=m>=0?1:-1,E=C*n,z=C>0?"end":"start",M=C>0?"start":"end",L=l;if(r==="top"){var T={x:p+m/2,y:u-w,horizontalAnchor:"middle",verticalAnchor:S};return L&&(T.height=Math.max(u-L.y,0),T.width=m),T}if(r==="bottom"){var k={x:v+h/2,y:u+f+w,horizontalAnchor:"middle",verticalAnchor:O};return L&&(k.height=Math.max(L.y+L.height-(u+f),0),k.width=h),k}if(r==="left"){var Y={x:y-E,y:u+f/2,horizontalAnchor:z,verticalAnchor:"middle"};return L&&(Y.width=Math.max(Y.x-L.x,0),Y.height=f),Y}if(r==="right"){var X={x:y+b+E,y:u+f/2,horizontalAnchor:M,verticalAnchor:"middle"};return L&&(X.width=Math.max(L.x+L.width-X.x,0),X.height=f),X}var B=L?{width:b,height:f}:{};return r==="insideLeft"?Yn({x:y+E,y:u+f/2,horizontalAnchor:M,verticalAnchor:"middle"},B):r==="insideRight"?Yn({x:y+b-E,y:u+f/2,horizontalAnchor:z,verticalAnchor:"middle"},B):r==="insideTop"?Yn({x:p+m/2,y:u+w,horizontalAnchor:"middle",verticalAnchor:O},B):r==="insideBottom"?Yn({x:v+h/2,y:u+f-w,horizontalAnchor:"middle",verticalAnchor:S},B):r==="insideTopLeft"?Yn({x:p+E,y:u+w,horizontalAnchor:M,verticalAnchor:O},B):r==="insideTopRight"?Yn({x:p+m-E,y:u+w,horizontalAnchor:z,verticalAnchor:O},B):r==="insideBottomLeft"?Yn({x:v+E,y:u+f-w,horizontalAnchor:M,verticalAnchor:S},B):r==="insideBottomRight"?Yn({x:v+h-E,y:u+f-w,horizontalAnchor:z,verticalAnchor:S},B):r&&typeof r=="object"&&(Ne(r.x)||ys(r.x))&&(Ne(r.y)||ys(r.y))?Yn({x:o+qn(r.x,b),y:u+qn(r.y,f),horizontalAnchor:"end",verticalAnchor:"end"},B):Yn({x:_,y:u+f/2,horizontalAnchor:"middle",verticalAnchor:"middle"},B)},B7=["labelRef"],$7=["content"];function WA(e,t){if(e==null)return{};var r,n,l=U7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function U7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(r),!0).forEach(function(n){H7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H7(e,t,r){return(t=G7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G7(e){var t=Q7(e,"string");return typeof t=="symbol"?t:t+""}function Q7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aa.apply(null,arguments)}var DD=j.createContext(null),F7=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:l,width:o,height:u,children:f}=e,m=j.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:l,width:o,height:u}),[t,r,n,l,o,u]);return j.createElement(DD.Provider,{value:m},f)},MD=()=>{var e=j.useContext(DD),t=cm();return e||(t?_x(t):void 0)},V7=j.createContext(null),Y7=()=>{var e=j.useContext(V7),t=Ae(oz);return e||t},K7=e=>{var{value:t,formatter:r}=e,n=St(e.children)?t:e.children;return typeof r=="function"?r(n):n},Ab=e=>e!=null&&typeof e=="function",X7=(e,t)=>{var r=qr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},W7=(e,t,r,n,l)=>{var{offset:o,className:u}=e,{cx:f,cy:m,innerRadius:h,outerRadius:p,startAngle:v,endAngle:y,clockWise:b}=l,_=(h+p)/2,N=X7(v,y),w=N>=0?1:-1,S,O;switch(t){case"insideStart":S=v+w*o,O=b;break;case"insideEnd":S=y-w*o,O=!b;break;case"end":S=y+w*o,O=b;break;default:throw new Error("Unsupported position ".concat(t))}O=N<=0?O:!O;var C=fr(f,m,_,S),E=fr(f,m,_,S+(O?1:-1)*359),z="M".concat(C.x,",").concat(C.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(O?0:1,`,
    `).concat(E.x,",").concat(E.y),M=St(e.id)?hc("recharts-radial-line-"):e.id;return j.createElement("text",Aa({},n,{dominantBaseline:"central",className:ut("recharts-radial-bar-label",u)}),j.createElement("defs",null,j.createElement("path",{id:M,d:z})),j.createElement("textPath",{xlinkHref:"#".concat(M)},r))},Z7=(e,t,r)=>{var{cx:n,cy:l,innerRadius:o,outerRadius:u,startAngle:f,endAngle:m}=e,h=(f+m)/2;if(r==="outside"){var{x:p,y:v}=fr(n,l,u+t,h);return{x:p,y:v,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(o+u)/2,{x:b,y:_}=fr(n,l,y,h);return{x:b,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Rd=e=>e!=null&&"cx"in e&&Ne(e.cx),J7={angle:0,offset:5,zIndex:er.label,position:"middle",textBreakAll:!1};function eH(e){if(!Rd(e))return e;var{cx:t,cy:r,outerRadius:n}=e,l=n*2;return{x:t-n,y:r-n,width:l,upperWidth:l,lowerWidth:l,height:l}}function _i(e){var t=Cr(e,J7),{viewBox:r,parentViewBox:n,position:l,value:o,children:u,content:f,className:m="",textBreakAll:h,labelRef:p}=t,v=Y7(),y=MD(),b=l==="center"?y:v??y,_,N,w;r==null?_=b:Rd(r)?_=r:_=_x(r);var S=eH(_);if(!_||St(o)&&St(u)&&!j.isValidElement(f)&&typeof f!="function")return null;var O=cc(cc({},t),{},{viewBox:_});if(j.isValidElement(f)){var{labelRef:C}=O,E=WA(O,B7);return j.cloneElement(f,E)}if(typeof f=="function"){var{content:z}=O,M=WA(O,$7);if(N=j.createElement(f,M),j.isValidElement(N))return N}else N=K7(t);var L=wr(t);if(Rd(_)){if(l==="insideStart"||l==="insideEnd"||l==="end")return W7(t,l,N,L,_);w=Z7(_,t.offset,t.position)}else{if(!S)return null;var T=I7({viewBox:S,position:l,offset:t.offset,parentViewBox:Rd(n)?void 0:n});w=cc(cc({x:T.x,y:T.y,textAnchor:T.horizontalAnchor,verticalAnchor:T.verticalAnchor},T.width!==void 0?{width:T.width}:{}),T.height!==void 0?{height:T.height}:{})}return j.createElement(wn,{zIndex:t.zIndex},j.createElement(Sb,Aa({ref:p,className:ut("recharts-label",m)},L,w,{textAnchor:D7(L.textAnchor)?L.textAnchor:w.textAnchor,breakAll:h}),N))}_i.displayName="Label";var tH=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?j.createElement(_i,Aa({key:"label-implicit"},n)):ta(e)?j.createElement(_i,Aa({key:"label-implicit",value:e},n)):j.isValidElement(e)?e.type===_i?j.cloneElement(e,cc({key:"label-implicit"},n)):j.createElement(_i,Aa({key:"label-implicit",content:e},n)):Ab(e)?j.createElement(_i,Aa({key:"label-implicit",content:e},n)):e&&typeof e=="object"?j.createElement(_i,Aa({},e,{key:"label-implicit"},n)):null};function rH(e){var{label:t,labelRef:r}=e,n=MD();return tH(t,n,r)||null}var zg={},Dg={},JA;function nH(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Dg)),Dg}var Mg={},eC;function aH(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Mg)),Mg}var tC;function iH(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nH(),r=aH(),n=fx();function l(o){if(n.isArrayLike(o))return t.last(r.toArray(o))}e.last=l})(zg)),zg}var Tg,rC;function sH(){return rC||(rC=1,Tg=iH().last),Tg}var lH=sH();const oH=Ba(lH);var cH=["valueAccessor"],uH=["dataKey","clockWise","id","textBreakAll","zIndex"];function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zf.apply(null,arguments)}function nC(e,t){if(e==null)return{};var r,n,l=dH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function dH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fH=e=>Array.isArray(e.value)?oH(e.value):e.value,TD=j.createContext(void 0),kD=TD.Provider,PD=j.createContext(void 0);PD.Provider;function mH(){return j.useContext(TD)}function hH(){return j.useContext(PD)}function Ld(e){var{valueAccessor:t=fH}=e,r=nC(e,cH),{dataKey:n,clockWise:l,id:o,textBreakAll:u,zIndex:f}=r,m=nC(r,uH),h=mH(),p=hH(),v=h||p;return!v||!v.length?null:j.createElement(wn,{zIndex:f??er.label},j.createElement(bn,{className:"recharts-label-list"},v.map((y,b)=>{var _,N=St(n)?t(y,b):$t(y.payload,n),w=St(o)?{}:{id:"".concat(o,"-").concat(b)};return j.createElement(_i,zf({key:"label-".concat(b)},wr(y),m,w,{fill:(_=r.fill)!==null&&_!==void 0?_:y.fill,parentViewBox:y.parentViewBox,value:N,textBreakAll:u,viewBox:y.viewBox,index:b,zIndex:0}))})))}Ld.displayName="LabelList";function qD(e){var{label:t}=e;return t?t===!0?j.createElement(Ld,{key:"labelList-implicit"}):j.isValidElement(t)||Ab(t)?j.createElement(Ld,{key:"labelList-implicit",content:t}):typeof t=="object"?j.createElement(Ld,zf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(null,arguments)}var RD=e=>{var{cx:t,cy:r,r:n,className:l}=e,o=ut("recharts-dot",l);return Ne(t)&&Ne(r)&&Ne(n)?j.createElement("circle",By({},Pn(e),ux(e),{className:o,cx:t,cy:r,r:n})):null},pH={radiusAxis:{},angleAxis:{}},LD=Ir({name:"polarAxis",initialState:pH,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:jX,removeRadiusAxis:NX,addAngleAxis:_X,removeAngleAxis:wX}=LD.actions,vH=LD.reducer;function gH(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var kg={exports:{}},ot={};var aC;function yH(){if(aC)return ot;aC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function _(N){if(typeof N=="object"&&N!==null){var w=N.$$typeof;switch(w){case e:switch(N=N.type,N){case r:case l:case n:case m:case h:case y:return N;default:switch(N=N&&N.$$typeof,N){case u:case f:case v:case p:return N;case o:return N;default:return w}}case t:return w}}}return ot.ContextConsumer=o,ot.ContextProvider=u,ot.Element=e,ot.ForwardRef=f,ot.Fragment=r,ot.Lazy=v,ot.Memo=p,ot.Portal=t,ot.Profiler=l,ot.StrictMode=n,ot.Suspense=m,ot.SuspenseList=h,ot.isContextConsumer=function(N){return _(N)===o},ot.isContextProvider=function(N){return _(N)===u},ot.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},ot.isForwardRef=function(N){return _(N)===f},ot.isFragment=function(N){return _(N)===r},ot.isLazy=function(N){return _(N)===v},ot.isMemo=function(N){return _(N)===p},ot.isPortal=function(N){return _(N)===t},ot.isProfiler=function(N){return _(N)===l},ot.isStrictMode=function(N){return _(N)===n},ot.isSuspense=function(N){return _(N)===m},ot.isSuspenseList=function(N){return _(N)===h},ot.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===l||N===n||N===m||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===v||N.$$typeof===p||N.$$typeof===u||N.$$typeof===o||N.$$typeof===f||N.$$typeof===b||N.getModuleId!==void 0)},ot.typeOf=_,ot}var iC;function xH(){return iC||(iC=1,kg.exports=yH()),kg.exports}var bH=xH(),sC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lC=null,Pg=null,ID=e=>{if(e===lC&&Array.isArray(Pg))return Pg;var t=[];return j.Children.forEach(e,r=>{St(r)||(bH.isFragment(r)?t=t.concat(ID(r.props.children)):t.push(r))}),Pg=t,lC=e,t};function jH(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(l=>sC(l)):n=[sC(t)],ID(e).forEach(l=>{var o=Ll(l,"type.displayName")||Ll(l,"type.name");o&&n.indexOf(o)!==-1&&r.push(l)}),r}var BD=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,qg={},oC;function NH(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${l}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(qg)),qg}var Rg,cC;function _H(){return cC||(cC=1,Rg=NH().isPlainObject),Rg}var wH=_H();const SH=Ba(wH);var uC,dC,fC,mC,hC;function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function vC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(n){AH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AH(e,t,r){return(t=CH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Df.apply(null,arguments)}function rc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gC=(e,t,r,n,l)=>{var o=r-n,u;return u=zt(uC||(uC=rc(["M ",",",""])),e,t),u+=zt(dC||(dC=rc(["L ",",",""])),e+r,t),u+=zt(fC||(fC=rc(["L ",",",""])),e+r-o/2,t+l),u+=zt(mC||(mC=rc(["L ",",",""])),e+r-o/2-n,t+l),u+=zt(hC||(hC=rc(["L ",","," Z"])),e,t),u},OH={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zH=e=>{var t=Cr(e,OH),{x:r,y:n,upperWidth:l,lowerWidth:o,height:u,className:f}=t,{animationEasing:m,animationDuration:h,animationBegin:p,isUpdateAnimationActive:v}=t,y=j.useRef(null),[b,_]=j.useState(-1),N=j.useRef(l),w=j.useRef(o),S=j.useRef(u),O=j.useRef(r),C=j.useRef(n),E=pm(e,"trapezoid-");if(j.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ue=y.current.getTotalLength();ue&&_(ue)}catch{}},[]),r!==+r||n!==+n||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var z=ut("recharts-trapezoid",f);if(!v)return j.createElement("g",null,j.createElement("path",Df({},wr(t),{className:z,d:gC(r,n,l,o,u)})));var M=N.current,L=w.current,T=S.current,k=O.current,Y=C.current,X="0px ".concat(b===-1?1:b,"px"),B="".concat(b,"px 0px"),le=eO(["strokeDasharray"],h,m);return j.createElement(hm,{animationId:E,key:E,canBegin:b>0,duration:h,easing:m,isActive:v,begin:p},ue=>{var Q=Dt(M,l,ue),P=Dt(L,o,ue),J=Dt(T,u,ue),H=Dt(k,r,ue),ve=Dt(Y,n,ue);y.current&&(N.current=Q,w.current=P,S.current=J,O.current=H,C.current=ve);var I=ue>0?{transition:le,strokeDasharray:B}:{strokeDasharray:X};return j.createElement("path",Df({},wr(t),{className:z,d:gC(H,ve,Q,P,J),ref:y,style:vC(vC({},I),t.style)}))})},DH=["option","shapeType","activeClassName"];function MH(e,t){if(e==null)return{};var r,n,l=TH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function TH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){kH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kH(e,t,r){return(t=PH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PH(e){var t=qH(e,"string");return typeof t=="symbol"?t:t+""}function qH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RH(e,t){return Mf(Mf({},t),e)}function LH(e,t){return e==="symbols"}function xC(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return j.createElement(aO,r);case"trapezoid":return j.createElement(zH,r);case"sector":return j.createElement(lO,r);case"symbols":if(LH(t))return j.createElement(G2,r);break;case"curve":return j.createElement(JE,r);default:return null}}function IH(e){return j.isValidElement(e)?e.props:e}function $D(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,l=MH(e,DH),o;if(j.isValidElement(t))o=j.cloneElement(t,Mf(Mf({},l),IH(t)));else if(typeof t=="function")o=t(l,l.index);else if(SH(t)&&typeof t!="boolean"){var u=RH(t,l);o=j.createElement(xC,{shapeType:r,elementProps:u})}else{var f=l;o=j.createElement(xC,{shapeType:r,elementProps:f})}return l.isActive?j.createElement(bn,{className:n},o):o}var UD=(e,t,r)=>{var n=Pt();return(l,o)=>u=>{e?.(l,o,u),n(Wz({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}},HD=e=>{var t=Pt();return(r,n)=>l=>{e?.(r,n,l),t(tU())}},GD=(e,t,r)=>{var n=Pt();return(l,o)=>u=>{e?.(l,o,u),n(rU({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}};function QD(e){var{tooltipEntrySettings:t}=e,r=Pt(),n=xr(),l=j.useRef(null);return j.useLayoutEffect(()=>{n||(l.current===null?r(W$(t)):l.current!==t&&r(Z$({prev:l.current,next:t})),l.current=t)},[t,r,n]),j.useLayoutEffect(()=>()=>{l.current&&(r(J$(l.current)),l.current=null)},[r]),null}function FD(e){var{legendPayload:t}=e,r=Pt(),n=xr(),l=j.useRef(null);return j.useLayoutEffect(()=>{n||(l.current===null?r(DL(t)):l.current!==t&&r(ML({prev:l.current,next:t})),l.current=t)},[r,n,t]),j.useLayoutEffect(()=>()=>{l.current&&(r(TL(l.current)),l.current=null)},[r]),null}var Lg,BH=()=>{var[e]=j.useState(()=>hc("uid-"));return e},$H=(Lg=Jk.useId)!==null&&Lg!==void 0?Lg:BH;function UH(e,t){var r=$H();return t||(e?"".concat(e,"-").concat(r):r)}var HH=j.createContext(void 0),VD=e=>{var{id:t,type:r,children:n}=e,l=UH("recharts-".concat(r),t);return j.createElement(HH.Provider,{value:l},n(l))},GH={cartesianItems:[],polarItems:[]},YD=Ir({name:"graphicalItems",initialState:GH,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Nt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,l=kn(e).cartesianItems.indexOf(r);l>-1&&(e.cartesianItems[l]=n)},prepare:Nt()},removeCartesianGraphicalItem:{reducer(e,t){var r=kn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Nt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Nt()},removePolarGraphicalItem:{reducer(e,t){var r=kn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Nt()}}}),{addCartesianGraphicalItem:QH,replaceCartesianGraphicalItem:FH,removeCartesianGraphicalItem:VH,addPolarGraphicalItem:SX,removePolarGraphicalItem:AX}=YD.actions,YH=YD.reducer,KH=e=>{var t=Pt(),r=j.useRef(null);return j.useLayoutEffect(()=>{r.current===null?t(QH(e)):r.current!==e&&t(FH({prev:r.current,next:e})),r.current=e},[t,e]),j.useLayoutEffect(()=>()=>{r.current&&(t(VH(r.current)),r.current=null)},[t]),null},KD=j.memo(KH),XH=["points"];function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(n){WH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WH(e,t,r){return(t=ZH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZH(e){var t=JH(e,"string");return typeof t=="symbol"?t:t+""}function JH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tf.apply(null,arguments)}function eG(e,t){if(e==null)return{};var r,n,l=tG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function tG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rG(e){var{option:t,dotProps:r,className:n}=e;if(j.isValidElement(t))return j.cloneElement(t,r);if(typeof t=="function")return t(r);var l=ut(n,typeof t!="boolean"?t.className:""),o=r??{},{points:u}=o,f=eG(o,XH);return j.createElement(RD,Tf({},f,{className:l}))}function nG(e,t){return e==null?!1:t?!0:e.length===1}function aG(e){var{points:t,dot:r,className:n,dotClassName:l,dataKey:o,baseProps:u,needClip:f,clipPathId:m,zIndex:h=er.scatter}=e;if(!nG(t,r))return null;var p=BD(r),v=N3(r),y=t.map((_,N)=>{var w,S,O=Ig(Ig(Ig({r:3},u),v),{},{index:N,cx:(w=_.x)!==null&&w!==void 0?w:void 0,cy:(S=_.y)!==null&&S!==void 0?S:void 0,dataKey:o,value:_.value,payload:_.payload,points:t});return j.createElement(rG,{key:"dot-".concat(N),option:r,dotProps:O,className:l})}),b={};return f&&m!=null&&(b.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(m,")")),j.createElement(wn,{zIndex:h},j.createElement(bn,Tf({className:n},b),y))}function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function NC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(n){iG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iG(e,t,r){return(t=sG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sG(e){var t=lG(e,"string");return typeof t=="symbol"?t:t+""}function lG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XD=0,oG={xAxis:{},yAxis:{},zAxis:{}},WD=Ir({name:"cartesianAxis",initialState:oG,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Nt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Nt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Nt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Nt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Nt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Nt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Nt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Nt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Nt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,l=e.yAxis[r];if(l){var o,u=l.widthHistory||[];if(u.length===3&&u[0]===u[2]&&n===u[1]&&n!==l.width&&Math.abs(n-((o=u[0])!==null&&o!==void 0?o:0))<=1)return;var f=[...u,n].slice(-3);e.yAxis[r]=NC(NC({},l),{},{width:n,widthHistory:f})}}}}),{addXAxis:cG,replaceXAxis:uG,removeXAxis:dG,addYAxis:fG,replaceYAxis:mG,removeYAxis:hG,addZAxis:CX,replaceZAxis:EX,removeZAxis:OX,updateYAxisWidth:pG}=WD.actions,vG=WD.reducer,gG=re([tr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),yG=re([gG,Ua,Ha],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Cb=()=>Ae(yG),xG=()=>Ae(QU);function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Bg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(r),!0).forEach(function(n){bG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bG(e,t,r){return(t=jG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=NG(e,"string");return typeof t=="symbol"?t:t+""}function NG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _G=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||t.x==null||t.y==null)return null;var f={index:r,dataKey:o,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=Bg(Bg(Bg({},f),Dc(l)),ux(l)),h;return j.isValidElement(l)?h=j.cloneElement(l,m):typeof l=="function"?h=l(m):h=j.createElement(RD,m),j.createElement(bn,{className:"recharts-active-dot",clipPath:u},h)};function wG(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:l,clipPath:o,zIndex:u=er.activeDot}=e,f=Ae(_s),m=xG();if(t==null||m==null)return null;var h=t.find(p=>m.includes(p.payload));return St(h)?null:j.createElement(wn,{zIndex:u},j.createElement(_G,{point:h,childIndex:Number(f),mainColor:r,dataKey:l,activeDot:n,clipPath:o}))}var wC=(e,t,r)=>{var n=r??e;if(!St(n))return qn(n,t,0)},SG=(e,t,r)=>{var n={},l=e.filter(Cm),o=e.filter(h=>h.stackId==null),u=l.reduce((h,p)=>{var v=h[p.stackId];return v==null&&(v=[]),v.push(p),h[p.stackId]=v,h},n),f=Object.entries(u).map(h=>{var p,[v,y]=h,b=y.map(N=>N.dataKey),_=wC(t,r,(p=y[0])===null||p===void 0?void 0:p.barSize);return{stackId:v,dataKeys:b,barSize:_}}),m=o.map(h=>{var p=[h.dataKey].filter(y=>y!=null),v=wC(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:v}});return[...f,...m]};function SC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ad(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(r),!0).forEach(function(n){AG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AG(e,t,r){return(t=CG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=EG(e,"string");return typeof t=="symbol"?t:t+""}function EG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OG(e,t,r,n,l){var o,u=n.length;if(!(u<1)){var f=qn(e,r,0,!0),m,h=[];if(Ke((o=n[0])===null||o===void 0?void 0:o.barSize)){var p=!1,v=r/u,y=n.reduce((O,C)=>O+(C.barSize||0),0);y+=(u-1)*f,y>=r&&(y-=(u-1)*f,f=0),y>=r&&v>0&&(p=!0,v*=.9,y=u*v);var b=(r-y)/2>>0,_={offset:b-f,size:0};m=n.reduce((O,C)=>{var E,z={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:_.offset+_.size+f,size:p?v:(E=C.barSize)!==null&&E!==void 0?E:0}},M=[...O,z];return _=z.position,M},h)}else{var N=qn(t,r,0,!0);r-2*N-(u-1)*f<=0&&(f=0);var w=(r-2*N-(u-1)*f)/u;w>1&&(w>>=0);var S=Ke(l)?Math.min(w,l):w;m=n.reduce((O,C,E)=>[...O,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:N+(w+f)*E+(w-S)/2,size:S}}],h)}return m}}var zG=(e,t,r,n,l,o,u)=>{var f=St(u)?t:u,m=OG(r,n,l!==o?l:o,e,f);return l!==o&&m!=null&&(m=m.map(h=>Ad(Ad({},h),{},{position:Ad(Ad({},h.position),{},{offset:h.position.offset-l/2})}))),m},DG=(e,t)=>{var r=ab(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var l=e[n];if(l){var{stackedData:o}=l;if(o)return o.find(u=>u.key===r)}}}},MG=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function TG(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ke(e.zIndex)?e.zIndex:t}var kG=e=>{var{chartData:t}=e,r=Pt(),n=xr();return j.useEffect(()=>n?()=>{}:(r(kA(t)),()=>{r(kA(void 0))}),[t,r,n]),null},AC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ZD=Ir({name:"brush",initialState:AC,reducers:{setBrushSettings(e,t){return t.payload==null?AC:t.payload}}}),{setBrushSettings:zX}=ZD.actions,PG=ZD.reducer;function qG(e){return(e%180+180)%180}var RG=function(t){var{width:r,height:n}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=qG(l),u=o*Math.PI/180,f=Math.atan(n/r),m=u>f&&u<Math.PI-f?n/Math.sin(u):r/Math.cos(u);return Math.abs(m)},LG={dots:[],areas:[],lines:[]},JD=Ir({name:"referenceElements",initialState:LG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=kn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=kn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=kn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:DX,removeDot:MX,addArea:TX,removeArea:kX,addLine:PX,removeLine:qX}=JD.actions,IG=JD.reducer,BG=j.createContext(void 0),$G=e=>{var{children:t}=e,[r]=j.useState("".concat(hc("recharts"),"-clip")),n=Cb();if(n==null)return null;var{x:l,y:o,width:u,height:f}=n;return j.createElement(BG.Provider,{value:r},j.createElement("defs",null,j.createElement("clipPath",{id:r},j.createElement("rect",{x:l,y:o,height:f,width:u}))),t)};function eM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var l=e[n];l!==void 0&&r.push(l)}return r}function UG(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return RG(n,r)}function HG(e,t,r){var n=r==="width",{x:l,y:o,width:u,height:f}=e;return t===1?{start:n?l:o,end:n?l+u:o+f}:{start:n?l+u:o+f,end:n?l:o}}function Ec(e,t,r,n,l){if(e*t<e*n||e*t>e*l)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-l)<=0}function GG(e,t){return eM(e,t+1)}function QG(e,t,r,n,l){for(var o=(n||[]).slice(),{start:u,end:f}=t,m=0,h=1,p=u,v=function(){var _=n?.[m];if(_===void 0)return{v:eM(n,h)};var N=m,w,S=()=>(w===void 0&&(w=r(_,N)),w),O=_.coordinate,C=m===0||Ec(e,O,S,p,f);C||(m=0,p=u,h+=1),C&&(p=O+e*(S()/2+l),m+=h)},y;h<=o.length;)if(y=v(),y)return y.v;return[]}function FG(e,t,r,n,l){var o=(n||[]).slice(),u=o.length;if(u===0)return[];for(var{start:f,end:m}=t,h=1;h<=u;h++){for(var p=(u-1)%h,v=f,y=!0,b=function(){var E=n[N];if(E==null)return 0;var z=N,M,L=()=>(M===void 0&&(M=r(E,z)),M),T=E.coordinate,k=N===p||Ec(e,T,L,v,m);if(!k)return y=!1,1;k&&(v=T+e*(L()/2+l))},_,N=p;N<u&&(_=b(),!(_!==0&&_===1));N+=h);if(y){for(var w=[],S=p;S<u;S+=h){var O=n[S];O!=null&&w.push(O)}return w}}return[]}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){VG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VG(e,t,r){return(t=YG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YG(e){var t=KG(e,"string");return typeof t=="symbol"?t:t+""}function KG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XG(e,t,r,n,l){for(var o=(n||[]).slice(),u=o.length,{start:f}=t,{end:m}=t,h=function(y){var b=o[y];if(b==null)return 1;var _=b,N,w=()=>(N===void 0&&(N=r(b,y)),N);if(y===u-1){var S=e*(_.coordinate+e*w()/2-m);o[y]=_=gr(gr({},_),{},{tickCoord:S>0?_.coordinate-S*e:_.coordinate})}else o[y]=_=gr(gr({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var O=Ec(e,_.tickCoord,w,f,m);O&&(m=_.tickCoord-e*(w()/2+l),o[y]=gr(gr({},_),{},{isShow:!0}))}},p=u-1;p>=0;p--)h(p);return o}function WG(e,t,r,n,l,o){var u=(n||[]).slice(),f=u.length,{start:m,end:h}=t;if(o){var p=n[f-1];if(p!=null){var v=r(p,f-1),y=e*(p.coordinate+e*v/2-h);if(u[f-1]=p=gr(gr({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate}),p.tickCoord!=null){var b=Ec(e,p.tickCoord,()=>v,m,h);b&&(h=p.tickCoord-e*(v/2+l),u[f-1]=gr(gr({},p),{},{isShow:!0}))}}}for(var _=o?f-1:f,N=function(O){var C=u[O];if(C==null)return 1;var E=C,z,M=()=>(z===void 0&&(z=r(C,O)),z);if(O===0){var L=e*(E.coordinate-e*M()/2-m);u[O]=E=gr(gr({},E),{},{tickCoord:L<0?E.coordinate-L*e:E.coordinate})}else u[O]=E=gr(gr({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var T=Ec(e,E.tickCoord,M,m,h);T&&(m=E.tickCoord+e*(M()/2+l),u[O]=gr(gr({},E),{},{isShow:!0}))}},w=0;w<_;w++)N(w);return u}function Eb(e,t,r){var{tick:n,ticks:l,viewBox:o,minTickGap:u,orientation:f,interval:m,tickFormatter:h,unit:p,angle:v}=e;if(!l||!l.length||!n)return[];if(Ne(m)||mm.isSsr){var y;return(y=GG(l,Ne(m)?m:0))!==null&&y!==void 0?y:[]}var b=[],_=f==="top"||f==="bottom"?"width":"height",N=p&&_==="width"?dc(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},w=(z,M)=>{var L=typeof h=="function"?h(z.value,M):z.value;return _==="width"?UG(dc(L,{fontSize:t,letterSpacing:r}),N,v):dc(L,{fontSize:t,letterSpacing:r})[_]},S=l[0],O=l[1],C=l.length>=2&&S!=null&&O!=null?qr(O.coordinate-S.coordinate):1,E=HG(o,C,_);return m==="equidistantPreserveStart"?QG(C,E,w,l,u):m==="equidistantPreserveEnd"?FG(C,E,w,l,u):(m==="preserveStart"||m==="preserveStartEnd"?b=WG(C,E,w,l,u,m==="preserveStartEnd"):b=XG(C,E,w,l,u),b.filter(z=>z.isShow))}var ZG=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(t){Array.from(t).forEach(p=>{if(p){var v=p.getBoundingClientRect();v.width>u&&(u=v.width)}});var f=r?r.getBoundingClientRect().width:0,m=l+o,h=u+m+f+(r?n:0);return Math.round(h)}return 0},JG=["axisLine","width","height","className","hide","ticks","axisType"];function eQ(e,t){if(e==null)return{};var r,n,l=tQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function tQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ws(){return ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ws.apply(null,arguments)}function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(n){rQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rQ(e,t,r){return(t=nQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nQ(e){var t=aQ(e,"string");return typeof t=="symbol"?t:t+""}function aQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Da={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:er.axis};function iQ(e){var{x:t,y:r,width:n,height:l,orientation:o,mirror:u,axisLine:f,otherSvgProps:m}=e;if(!f)return null;var h=Et(Et(Et({},m),Pn(f)),{},{fill:"none"});if(o==="top"||o==="bottom"){var p=+(o==="top"&&!u||o==="bottom"&&u);h=Et(Et({},h),{},{x1:t,y1:r+p*l,x2:t+n,y2:r+p*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);h=Et(Et({},h),{},{x1:t+v*n,y1:r,x2:t+v*n,y2:r+l})}return j.createElement("line",ws({},h,{className:ut("recharts-cartesian-axis-line",Ll(f,"className"))}))}function sQ(e,t,r,n,l,o,u,f,m){var h,p,v,y,b,_,N=f?-1:1,w=e.tickSize||u,S=Ne(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=p=e.coordinate,y=r+ +!f*l,v=y-N*w,_=v-N*m,b=S;break;case"left":v=y=e.coordinate,p=t+ +!f*n,h=p-N*w,b=h-N*m,_=S;break;case"right":v=y=e.coordinate,p=t+ +f*n,h=p+N*w,b=h+N*m,_=S;break;default:h=p=e.coordinate,y=r+ +f*l,v=y+N*w,_=v+N*m,b=S;break}return{line:{x1:h,y1:v,x2:p,y2:y},tick:{x:b,y:_}}}function lQ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function oQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function cQ(e){var{option:t,tickProps:r,value:n}=e,l,o=ut(r.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(t))l=j.cloneElement(t,Et(Et({},r),{},{className:o}));else if(typeof t=="function")l=t(Et(Et({},r),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=ut(u,gH(t))),l=j.createElement(Sb,ws({},r,{className:u}),n)}return l}var uQ=j.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:l,stroke:o,tickFormatter:u,unit:f,padding:m,tickTextProps:h,orientation:p,mirror:v,x:y,y:b,width:_,height:N,tickSize:w,tickMargin:S,fontSize:O,letterSpacing:C,getTicksConfig:E,events:z,axisType:M}=e,L=Eb(Et(Et({},E),{},{ticks:r}),O,C),T=lQ(p,v),k=oQ(p,v),Y=Pn(E),X=Dc(n),B={};typeof l=="object"&&(B=l);var le=Et(Et({},Y),{},{fill:"none"},B),ue=L.map(J=>Et({entry:J},sQ(J,y,b,_,N,p,w,v,S))),Q=ue.map(J=>{var{entry:H,line:ve}=J;return j.createElement(bn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},l&&j.createElement("line",ws({},le,ve,{className:ut("recharts-cartesian-axis-tick-line",Ll(l,"className"))})))}),P=ue.map((J,H)=>{var ve,I,{entry:ge,tick:ee}=J,fe=Et(Et(Et(Et({verticalAnchor:k},Y),{},{textAnchor:T,stroke:"none",fill:o},ee),{},{index:H,payload:ge,visibleTicksCount:L.length,tickFormatter:u,padding:m},h),{},{angle:(ve=(I=h?.angle)!==null&&I!==void 0?I:Y.angle)!==null&&ve!==void 0?ve:0}),ye=Et(Et({},fe),X);return j.createElement(bn,ws({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},dx(z,ge,H)),n&&j.createElement(cQ,{option:n,tickProps:ye,value:"".concat(typeof u=="function"?u(ge.value,H):ge.value).concat(f||"")}))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},P.length>0&&j.createElement(wn,{zIndex:er.label},j.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},P)),Q.length>0&&j.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},Q))}),dQ=j.forwardRef((e,t)=>{var{axisLine:r,width:n,height:l,className:o,hide:u,ticks:f,axisType:m}=e,h=eQ(e,JG),[p,v]=j.useState(""),[y,b]=j.useState(""),_=j.useRef(null);j.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return ZG({ticks:_.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=j.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=S;var O=S[0];if(O){var C=window.getComputedStyle(O),E=C.fontSize,z=C.letterSpacing;(E!==p||z!==y)&&(v(E),b(z))}}},[p,y]);return u||n!=null&&n<=0||l!=null&&l<=0?null:j.createElement(wn,{zIndex:e.zIndex},j.createElement(bn,{className:ut("recharts-cartesian-axis",o)},j.createElement(iQ,{x:e.x,y:e.y,width:n,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Pn(e)}),j.createElement(uQ,{ref:N,axisType:m,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:f,unit:e.unit,width:e.width,x:e.x,y:e.y}),j.createElement(F7,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},j.createElement(rH,{label:e.label,labelRef:e.labelRef}),e.children)))}),Ob=j.forwardRef((e,t)=>{var r=Cr(e,Da);return j.createElement(dQ,ws({},r,{ref:t}))});Ob.displayName="CartesianAxis";var fQ=["x1","y1","x2","y2","key"],mQ=["offset"],hQ=["xAxisId","yAxisId"],pQ=["xAxisId","yAxisId"];function OC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(r),!0).forEach(function(n){vQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vQ(e,t,r){return(t=gQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gQ(e){var t=yQ(e,"string");return typeof t=="symbol"?t:t+""}function yQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},us.apply(null,arguments)}function kf(e,t){if(e==null)return{};var r,n,l=xQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function xQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bQ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:l,width:o,height:u,ry:f}=e;return j.createElement("rect",{x:n,y:l,ry:f,width:o,height:u,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function tM(e){var{option:t,lineItemProps:r}=e,n;if(j.isValidElement(t))n=j.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var l,{x1:o,y1:u,x2:f,y2:m,key:h}=r,p=kf(r,fQ),v=(l=Pn(p))!==null&&l!==void 0?l:{},{offset:y}=v,b=kf(v,mQ);n=j.createElement("line",us({},b,{x1:o,y1:u,x2:f,y2:m,fill:"none",key:h}))}return n}function jQ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:l}=e;if(!n||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,f=kf(e,hQ),m=l.map((h,p)=>{var v=yr(yr({},f),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return j.createElement(tM,{key:"line-".concat(p),option:n,lineItemProps:v})});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function NQ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:l}=e;if(!n||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,f=kf(e,pQ),m=l.map((h,p)=>{var v=yr(yr({},f),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return j.createElement(tM,{option:n,lineItemProps:v,key:"line-".concat(p)})});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function _Q(e){var{horizontalFill:t,fillOpacity:r,x:n,y:l,width:o,height:u,horizontalPoints:f,horizontal:m=!0}=e;if(!m||!t||!t.length||f==null)return null;var h=f.map(v=>Math.round(v+l-l)).sort((v,y)=>v-y);l!==h[0]&&h.unshift(0);var p=h.map((v,y)=>{var b=h[y+1],_=b==null,N=_?l+u-v:b-v;if(N<=0)return null;var w=y%t.length;return j.createElement("rect",{key:"react-".concat(y),y:v,x:n,height:N,width:o,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function wQ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:l,y:o,width:u,height:f,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(v=>Math.round(v+l-l)).sort((v,y)=>v-y);l!==h[0]&&h.unshift(0);var p=h.map((v,y)=>{var b=h[y+1],_=b==null,N=_?l+u-v:b-v;if(N<=0)return null;var w=y%r.length;return j.createElement("rect",{key:"react-".concat(y),x:v,y:o,width:N,height:f,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var SQ=(e,t)=>{var{xAxis:r,width:n,height:l,offset:o}=e;return kE(Eb(yr(yr(yr({},Da),r),{},{ticks:PE(r),viewBox:{x:0,y:0,width:n,height:l}})),o.left,o.left+o.width,t)},AQ=(e,t)=>{var{yAxis:r,width:n,height:l,offset:o}=e;return kE(Eb(yr(yr(yr({},Da),r),{},{ticks:PE(r),viewBox:{x:0,y:0,width:n,height:l}})),o.top,o.top+o.height,t)},CQ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:er.grid};function $y(e){var t=$E(),r=UE(),n=BE(),l=yr(yr({},Cr(e,CQ)),{},{x:Ne(e.x)?e.x:n.left,y:Ne(e.y)?e.y:n.top,width:Ne(e.width)?e.width:n.width,height:Ne(e.height)?e.height:n.height}),{xAxisId:o,yAxisId:u,x:f,y:m,width:h,height:p,syncWithTicks:v,horizontalValues:y,verticalValues:b}=l,_=xr(),N=Ae(k=>NA(k,"xAxis",o,_)),w=Ae(k=>NA(k,"yAxis",u,_));if(!ra(h)||!ra(p)||!Ne(f)||!Ne(m))return null;var S=l.verticalCoordinatesGenerator||SQ,O=l.horizontalCoordinatesGenerator||AQ,{horizontalPoints:C,verticalPoints:E}=l;if((!C||!C.length)&&typeof O=="function"){var z=y&&y.length,M=O({yAxis:w?yr(yr({},w),{},{ticks:z?y:w.ticks}):void 0,width:t??h,height:r??p,offset:n},z?!0:v);sf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(C=M)}if((!E||!E.length)&&typeof S=="function"){var L=b&&b.length,T=S({xAxis:N?yr(yr({},N),{},{ticks:L?b:N.ticks}):void 0,width:t??h,height:r??p,offset:n},L?!0:v);sf(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(E=T)}return j.createElement(wn,{zIndex:l.zIndex},j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(bQ,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),j.createElement(_Q,us({},l,{horizontalPoints:C})),j.createElement(wQ,us({},l,{verticalPoints:E})),j.createElement(jQ,us({},l,{offset:n,horizontalPoints:C,xAxis:N,yAxis:w})),j.createElement(NQ,us({},l,{offset:n,verticalPoints:E,xAxis:N,yAxis:w}))))}$y.displayName="CartesianGrid";var EQ={},rM=Ir({name:"errorBars",initialState:EQ,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:l}=t.payload;e[r]&&(e[r]=e[r].map(o=>o.dataKey===n.dataKey&&o.direction===n.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(l=>l.dataKey!==n.dataKey||l.direction!==n.direction))}}}),{addErrorBar:RX,replaceErrorBar:LX,removeErrorBar:IX}=rM.actions,OQ=rM.reducer,zQ=["children"];function DQ(e,t){if(e==null)return{};var r,n,l=MQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function MQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},kQ=j.createContext(TQ);function nM(e){var{children:t}=e,r=DQ(e,zQ);return j.createElement(kQ.Provider,{value:r},t)}function zb(e,t){var r,n,l=Ae(h=>Fa(h,e)),o=Ae(h=>Va(h,t)),u=(r=l?.allowDataOverflow)!==null&&r!==void 0?r:Wt.allowDataOverflow,f=(n=o?.allowDataOverflow)!==null&&n!==void 0?n:Zt.allowDataOverflow,m=u||f;return{needClip:m,needClipX:u,needClipY:f}}function aM(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,l=Cb(),{needClipX:o,needClipY:u,needClip:f}=zb(t,r);if(!f||!l)return null;var{x:m,y:h,width:p,height:v}=l;return j.createElement("clipPath",{id:"clipPath-".concat(n)},j.createElement("rect",{x:o?m:m-p/2,y:u?h:h-v/2,width:o?p:p*2,height:u?v:v*2}))}var iM=(e,t,r,n)=>Di(e,"xAxis",t,n),sM=(e,t,r,n)=>zi(e,"xAxis",t,n),lM=(e,t,r,n)=>Di(e,"yAxis",r,n),oM=(e,t,r,n)=>zi(e,"yAxis",r,n),PQ=re([nt,iM,lM,sM,oM],(e,t,r,n,l)=>$a(e,"xAxis")?Bl(t,n,!1):Bl(r,l,!1)),qQ=(e,t,r,n,l)=>l;function RQ(e){return e.type==="line"}var LQ=re([zm,qQ],(e,t)=>e.filter(RQ).find(r=>r.id===t)),IQ=re([nt,iM,lM,sM,oM,LQ,PQ,Kx],(e,t,r,n,l,o,u,f)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=f;if(!(o==null||t==null||r==null||n==null||l==null||n.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:y}=o,b;if(y!=null&&y.length>0?b=y:b=m?.slice(h,p+1),b!=null)return AF({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:b})}});function BQ(e){var t=Dc(e),r=3,n=2;if(t!=null){var{r:l,strokeWidth:o}=t,u=Number(l),f=Number(o);return(Number.isNaN(u)||u<0)&&(u=r),(Number.isNaN(f)||f<0)&&(f=n),{r:u,strokeWidth:f}}return{r,strokeWidth:n}}var $g={exports:{}},Ug={};var zC;function $Q(){if(zC)return Ug;zC=1;var e=Bf();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,f=e.useDebugValue;return Ug.useSyncExternalStoreWithSelector=function(m,h,p,v,y){var b=l(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=u(function(){function w(z){if(!S){if(S=!0,O=z,z=v(z),y!==void 0&&_.hasValue){var M=_.value;if(y(M,z))return C=M}return C=z}if(M=C,r(O,z))return M;var L=v(z);return y!==void 0&&y(M,L)?(O=z,M):(O=z,C=L)}var S=!1,O,C,E=p===void 0?null:p;return[function(){return w(h())},E===null?void 0:function(){return w(E())}]},[h,p,v,y]);var N=n(m,b[0],b[1]);return o(function(){_.hasValue=!0,_.value=N},[N]),f(N),N},Ug}var DC;function UQ(){return DC||(DC=1,$g.exports=$Q()),$g.exports}UQ();function HQ(e){e()}function GQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){HQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const l=t={callback:r,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!n||e===null||(n=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var MC={notify(){},get:()=>[]};function QQ(e,t){let r,n=MC,l=0,o=!1;function u(N){p();const w=n.subscribe(N);let S=!1;return()=>{S||(S=!0,w(),v())}}function f(){n.notify()}function m(){_.onStateChange&&_.onStateChange()}function h(){return o}function p(){l++,r||(r=e.subscribe(m),n=GQ())}function v(){l--,r&&l===0&&(r(),r=void 0,n.clear(),n=MC)}function y(){o||(o=!0,p())}function b(){o&&(o=!1,v())}const _={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:h,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>n};return _}var FQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VQ=FQ(),YQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",KQ=YQ(),XQ=()=>VQ||KQ?j.useLayoutEffect:j.useEffect,WQ=XQ();function TC(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function ZQ(e,t){if(TC(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!TC(e[r[l]],t[r[l]]))return!1;return!0}var JQ=Symbol.for("react-redux-context"),eF=typeof globalThis<"u"?globalThis:{};function tF(){if(!j.createContext)return{};const e=eF[JQ]??=new Map;let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var rF=tF();function nF(e){const{children:t,context:r,serverState:n,store:l}=e,o=j.useMemo(()=>{const m=QQ(l);return{store:l,subscription:m,getServerState:n?()=>n:void 0}},[l,n]),u=j.useMemo(()=>l.getState(),[l]);WQ(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==l.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,u]);const f=r||rF;return j.createElement(f.Provider,{value:o},t)}var aF=nF,iF=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function sF(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Pm(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(iF.has(n)){if(e[n]==null&&t[n]==null)continue;if(!ZQ(e[n],t[n]))return!1}else if(!sF(e[n],t[n]))return!1;return!0}var lF=["id"],oF=["type","layout","connectNulls","needClip","shape"],cF=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Oc(){return Oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oc.apply(null,arguments)}function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(n){uF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uF(e,t,r){return(t=dF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dF(e){var t=fF(e,"string");return typeof t=="symbol"?t:t+""}function fF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Db(e,t){if(e==null)return{};var r,n,l=mF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function mF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hF=e=>{var{dataKey:t,name:r,stroke:n,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:n,value:am(r,t),payload:e}]},pF=j.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:l,fill:o,name:u,hide:f,unit:m,tooltipType:h,id:p}=e,v={dataDefinedOnItem:r,getPosition:As,settings:{stroke:n,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:am(u,t),hide:f,type:h,color:n,unit:m,graphicalItemId:p}};return j.createElement(QD,{tooltipEntrySettings:v})}),cM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function vF(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],l=0;l<t;++l)n=[...n,...r];return n}var gF=(e,t,r)=>{var n=r.reduce((b,_)=>b+_);if(!n)return cM(t,e);for(var l=Math.floor(e/n),o=e%n,u=t-e,f=[],m=0,h=0;m<r.length;h+=(p=r[m])!==null&&p!==void 0?p:0,++m){var p,v=r[m];if(v!=null&&h+v>o){f=[...r.slice(0,m),o-h];break}}var y=f.length%2===0?[0,u]:[u];return[...vF(r,l),...f,...y].map(b=>"".concat(b,"px")).join(", ")};function yF(e){var{clipPathId:t,points:r,props:n}=e,{dot:l,dataKey:o,needClip:u}=n,{id:f}=n,m=Db(n,lF),h=Pn(m);return j.createElement(aG,{points:r,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:h,needClip:u,clipPathId:t})}function xF(e){var{showLabels:t,children:r,points:n}=e,l=j.useMemo(()=>n?.map(o=>{var u,f,m={x:(u=o.x)!==null&&u!==void 0?u:0,y:(f=o.y)!==null&&f!==void 0?f:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Kn(Kn({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return j.createElement(kD,{value:t?l:void 0},r)}function PC(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:l,props:o}=e,{type:u,layout:f,connectNulls:m,needClip:h,shape:p}=o,v=Db(o,oF),y=Kn(Kn({},wr(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:u,layout:f,connectNulls:m,strokeDasharray:l??o.strokeDasharray});return j.createElement(j.Fragment,null,n?.length>1&&j.createElement($D,Oc({shapeType:"curve",option:p},y,{pathRef:r})),j.createElement(yF,{points:n,clipPathId:t,props:o}))}function bF(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function jF(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:f,isAnimationActive:m,animationBegin:h,animationDuration:p,animationEasing:v,animateNewValues:y,width:b,height:_,onAnimationEnd:N,onAnimationStart:w}=r,S=l.current,O=pm(u,"recharts-line-"),C=j.useRef(O),[E,z]=j.useState(!1),M=!E,L=j.useCallback(()=>{typeof N=="function"&&N(),z(!1)},[N]),T=j.useCallback(()=>{typeof w=="function"&&w(),z(!0)},[w]),k=bF(n.current),Y=j.useRef(0);C.current!==O&&(Y.current=o.current,C.current=O);var X=Y.current;return j.createElement(xF,{points:u,showLabels:M},r.children,j.createElement(hm,{animationId:O,begin:h,duration:p,isActive:m,easing:v,onAnimationEnd:L,onAnimationStart:T,key:O},B=>{var le=Dt(X,k+X,B),ue=Math.min(le,k),Q;if(m)if(f){var P="".concat(f).split(/[,\s]+/gim).map(ve=>parseFloat(ve));Q=gF(ue,k,P)}else Q=cM(k,ue);else Q=f==null?void 0:String(f);if(B>0&&k>0&&(l.current=u,o.current=Math.max(o.current,ue)),S){var J=S.length/u.length,H=B===1?u:u.map((ve,I)=>{var ge=Math.floor(I*J);if(S[ge]){var ee=S[ge];return Kn(Kn({},ve),{},{x:Dt(ee.x,ve.x,B),y:Dt(ee.y,ve.y,B)})}return y?Kn(Kn({},ve),{},{x:Dt(b*2,ve.x,B),y:Dt(_/2,ve.y,B)}):Kn(Kn({},ve),{},{x:ve.x,y:ve.y})});return l.current=H,j.createElement(PC,{props:r,points:H,clipPathId:t,pathRef:n,strokeDasharray:Q})}return j.createElement(PC,{props:r,points:u,clipPathId:t,pathRef:n,strokeDasharray:Q})}),j.createElement(qD,{label:r.label}))}function NF(e){var{clipPathId:t,props:r}=e,n=j.useRef(null),l=j.useRef(0),o=j.useRef(null);return j.createElement(jF,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:l,pathRef:o})}var _F=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:$t(e.payload,t)}};class wF extends j.Component{render(){var{hide:t,dot:r,points:n,className:l,xAxisId:o,yAxisId:u,top:f,left:m,width:h,height:p,id:v,needClip:y,zIndex:b}=this.props;if(t)return null;var _=ut("recharts-line",l),N=v,{r:w,strokeWidth:S}=BQ(r),O=BD(r),C=w*2+S,E=y?"url(#clipPath-".concat(O?"":"dots-").concat(N,")"):void 0;return j.createElement(wn,{zIndex:b},j.createElement(bn,{className:_},y&&j.createElement("defs",null,j.createElement(aM,{clipPathId:N,xAxisId:o,yAxisId:u}),!O&&j.createElement("clipPath",{id:"clipPath-dots-".concat(N)},j.createElement("rect",{x:m-C/2,y:f-C/2,width:h+C,height:p+C}))),j.createElement(nM,{xAxisId:o,yAxisId:u,data:n,dataPointFormatter:_F,errorBarOffset:0},j.createElement(NF,{props:this.props,clipPathId:N}))),j.createElement(wG,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:E}))}}var uM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:er.line,type:"linear"};function SF(e){var t=Cr(e,uM),{activeDot:r,animateNewValues:n,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:f,dot:m,hide:h,isAnimationActive:p,label:v,legendType:y,xAxisId:b,yAxisId:_,id:N}=t,w=Db(t,cF),{needClip:S}=zb(b,_),O=Cb(),C=Cs(),E=xr(),z=Ae(Y=>IQ(Y,b,_,E,N));if(C!=="horizontal"&&C!=="vertical"||z==null||O==null)return null;var{height:M,width:L,x:T,y:k}=O;return j.createElement(wF,Oc({},w,{id:N,connectNulls:f,dot:m,activeDot:r,animateNewValues:n,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:p,hide:h,label:v,legendType:y,xAxisId:b,yAxisId:_,points:z,layout:C,height:M,width:L,left:T,top:k,needClip:S}))}function AF(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:f,displayedData:m}=e;return m.map((h,p)=>{var v=$t(h,u);if(t==="horizontal"){var y=bw({axis:r,ticks:l,bandSize:f,entry:h,index:p}),b=St(v)?null:n.scale.map(v);return{x:y,y:b??null,value:v,payload:h}}var _=St(v)?null:r.scale.map(v),N=bw({axis:n,ticks:o,bandSize:f,entry:h,index:p});return _==null||N==null?null:{x:_,y:N,value:v,payload:h}}).filter(Boolean)}function CF(e){var t=Cr(e,uM),r=xr();return j.createElement(VD,{id:t.id,type:"line"},n=>j.createElement(j.Fragment,null,j.createElement(FD,{legendPayload:hF(t)}),j.createElement(pF,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),j.createElement(KD,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),j.createElement(SF,Oc({},t,{id:n}))))}var dM=j.memo(CF,Pm);dM.displayName="Line";function zs(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:XD}function Ds(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:XD}var EF="Invariant failed";function OF(e,t){throw new Error(EF)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(null,arguments)}function Pf(e){return j.createElement($D,Uy({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var zF=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,l)=>{if(Ne(t))return t;var o=Ne(n)||St(n);return o?t(n,l):(o||OF(),r)}},DF=(e,t,r)=>r,MF=(e,t)=>t,Yc=re([zm,MF],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),TF=re([Yc],e=>e?.maxBarSize),kF=(e,t,r,n)=>n,PF=re([nt,zm,zs,Ds,DF],(e,t,r,n,l)=>t.filter(o=>e==="horizontal"?o.xAxisId===r:o.yAxisId===n).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),qF=(e,t,r)=>{var n=nt(e),l=zs(e,t),o=Ds(e,t);if(!(l==null||o==null))return n==="horizontal"?ky(e,"yAxis",o,r):ky(e,"xAxis",l,r)},RF=(e,t)=>{var r=nt(e),n=zs(e,t),l=Ds(e,t);if(!(n==null||l==null))return r==="horizontal"?jA(e,"xAxis",n):jA(e,"yAxis",l)},LF=re([PF,BB,RF],SG),IF=(e,t,r)=>{var n,l,o=Yc(e,t);if(o==null)return 0;var u=zs(e,t),f=Ds(e,t);if(u==null||f==null)return 0;var m=nt(e),h=ez(e),{maxBarSize:p}=o,v=St(p)?h:p,y,b;return m==="horizontal"?(y=Di(e,"xAxis",u,r),b=zi(e,"xAxis",u,r)):(y=Di(e,"yAxis",f,r),b=zi(e,"yAxis",f,r)),(n=(l=Bl(y,b,!0))!==null&&l!==void 0?l:v)!==null&&n!==void 0?n:0},fM=(e,t,r)=>{var n=nt(e),l=zs(e,t),o=Ds(e,t);if(!(l==null||o==null)){var u,f;return n==="horizontal"?(u=Di(e,"xAxis",l,r),f=zi(e,"xAxis",l,r)):(u=Di(e,"yAxis",o,r),f=zi(e,"yAxis",o,r)),Bl(u,f)}},BF=re([LF,ez,IB,tz,IF,fM,TF],zG),$F=(e,t,r)=>{var n=zs(e,t);if(n!=null)return Di(e,"xAxis",n,r)},UF=(e,t,r)=>{var n=Ds(e,t);if(n!=null)return Di(e,"yAxis",n,r)},HF=(e,t,r)=>{var n=zs(e,t);if(n!=null)return zi(e,"xAxis",n,r)},GF=(e,t,r)=>{var n=Ds(e,t);if(n!=null)return zi(e,"yAxis",n,r)},QF=re([BF,Yc],MG),FF=re([qF,Yc],DG),VF=re([tr,jx,$F,UF,HF,GF,QF,nt,DB,fM,FF,Yc,kF],(e,t,r,n,l,o,u,f,m,h,p,v,y)=>{var{chartData:b,dataStartIndex:_,dataEndIndex:N}=m;if(!(v==null||u==null||t==null||f!=="horizontal"&&f!=="vertical"||r==null||n==null||l==null||o==null||h==null)){var{data:w}=v,S;if(w!=null&&w.length>0?S=w:S=b?.slice(_,N+1),S!=null)return jV({layout:f,barSettings:v,pos:u,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:l,yAxisTicks:o,stackedData:p,displayedData:S,offset:e,cells:y,dataStartIndex:_})}}),YF=["index"];function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(null,arguments)}function KF(e,t){if(e==null)return{};var r,n,l=XF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function XF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mM=j.createContext(void 0),WF=e=>{var t=j.useContext(mM);if(t!=null)return t.stackId;if(e!=null)return k4(e)},ZF=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),JF=e=>{var t=j.useContext(mM);if(t!=null){var{stackId:r}=t;return"url(#".concat(ZF(r,e),")")}},hM=e=>{var{index:t}=e,r=KF(e,YF),n=JF(t);return j.createElement(bn,Hy({className:"recharts-bar-stack-layer",clipPath:n},r))},eV=["onMouseEnter","onMouseLeave","onClick"],tV=["value","background","tooltipPosition"],rV=["id"],nV=["onMouseEnter","onClick","onMouseLeave"];function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ia.apply(null,arguments)}function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(n){aV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aV(e,t,r){return(t=iV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iV(e){var t=sV(e,"string");return typeof t=="symbol"?t:t+""}function sV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qf(e,t){if(e==null)return{};var r,n,l=lV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function lV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var oV=e=>{var{dataKey:t,name:r,fill:n,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:n,value:am(r,t),payload:e}]},cV=j.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:l,name:o,hide:u,unit:f,tooltipType:m,id:h}=e,p={dataDefinedOnItem:void 0,getPosition:As,settings:{stroke:r,strokeWidth:n,fill:l,dataKey:t,nameKey:void 0,name:am(o,t),hide:u,type:m,color:l,unit:f,graphicalItemId:h}};return j.createElement(QD,{tooltipEntrySettings:p})});function uV(e){var t=Ae(_s),{data:r,dataKey:n,background:l,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:f,onClick:m}=o,h=qf(o,eV),p=UD(u,n,o.id),v=HD(f),y=GD(m,n,o.id);if(!l||r==null)return null;var b=Dc(l);return j.createElement(wn,{zIndex:TG(l,er.barBackground)},r.map((_,N)=>{var{value:w,background:S,tooltipPosition:O}=_,C=qf(_,tV);if(!S)return null;var E=p(_,N),z=v(_,N),M=y(_,N),L=Nr(Nr(Nr(Nr(Nr({option:l,isActive:String(N)===t},C),{},{fill:"#eee"},S),b),dx(h,_,N)),{},{onMouseEnter:E,onMouseLeave:z,onClick:M,dataKey:n,index:N,className:"recharts-bar-background-rectangle"});return j.createElement(Pf,Ia({key:"background-bar-".concat(N)},L))}))}function dV(e){var{showLabels:t,children:r,rects:n}=e,l=n?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Nr(Nr({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return j.createElement(kD,{value:t?l:void 0},r)}function fV(e){var{shape:t,activeBar:r,baseProps:n,entry:l,index:o,dataKey:u}=e,f=Ae(_s),m=Ae(fD),h=r&&String(o)===f&&(m==null||u===m),p=h?r:t;return h?j.createElement(wn,{zIndex:er.activeBar},j.createElement(hM,{index:o},j.createElement(Pf,Ia({},n,{name:String(n.name)},l,{isActive:h,option:p,index:o,dataKey:u})))):j.createElement(Pf,Ia({},n,{name:String(n.name)},l,{isActive:h,option:p,index:o,dataKey:u}))}function mV(e){var{shape:t,baseProps:r,entry:n,index:l,dataKey:o}=e;return j.createElement(Pf,Ia({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:l,dataKey:o}))}function hV(e){var t,{data:r,props:n}=e,l=(t=Pn(n))!==null&&t!==void 0?t:{},{id:o}=l,u=qf(l,rV),{shape:f,dataKey:m,activeBar:h}=n,{onMouseEnter:p,onClick:v,onMouseLeave:y}=n,b=qf(n,nV),_=UD(p,m,o),N=HD(y),w=GD(v,m,o);return r?j.createElement(j.Fragment,null,r.map((S,O)=>j.createElement(hM,Ia({index:O,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(O),className:"recharts-bar-rectangle"},dx(b,S,O),{onMouseEnter:_(S,O),onMouseLeave:N(S,O),onClick:w(S,O)}),h?j.createElement(fV,{shape:f,activeBar:h,baseProps:u,entry:S,index:O,dataKey:m}):j.createElement(mV,{shape:f,baseProps:u,entry:S,index:O,dataKey:m})))):null}function pV(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:l,isAnimationActive:o,animationBegin:u,animationDuration:f,animationEasing:m,onAnimationEnd:h,onAnimationStart:p}=t,v=r.current,y=pm(t,"recharts-bar-"),[b,_]=j.useState(!1),N=!b,w=j.useCallback(()=>{typeof h=="function"&&h(),_(!1)},[h]),S=j.useCallback(()=>{typeof p=="function"&&p(),_(!0)},[p]);return j.createElement(dV,{showLabels:N,rects:n},j.createElement(hm,{animationId:y,begin:u,duration:f,isActive:o,easing:m,onAnimationEnd:w,onAnimationStart:S,key:y},O=>{var C=O===1?n:n?.map((E,z)=>{var M=v&&v[z];if(M)return Nr(Nr({},E),{},{x:Dt(M.x,E.x,O),y:Dt(M.y,E.y,O),width:Dt(M.width,E.width,O),height:Dt(M.height,E.height,O)});if(l==="horizontal"){var L=Dt(0,E.height,O),T=Dt(E.stackedBarStart,E.y,O);return Nr(Nr({},E),{},{y:T,height:L})}var k=Dt(0,E.width,O),Y=Dt(E.stackedBarStart,E.x,O);return Nr(Nr({},E),{},{width:k,x:Y})});return O>0&&(r.current=C??null),C==null?null:j.createElement(bn,null,j.createElement(hV,{props:t,data:C}))}),j.createElement(qD,{label:t.label}),t.children)}function vV(e){var t=j.useRef(null);return j.createElement(pV,{previousRectanglesRef:t,props:e})}var pM=0,gV=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:$t(e,t)}};class yV extends j.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:l,xAxisId:o,yAxisId:u,needClip:f,background:m,id:h}=this.props;if(t||r==null)return null;var p=ut("recharts-bar",l),v=h;return j.createElement(bn,{className:p,id:h},f&&j.createElement("defs",null,j.createElement(aM,{clipPathId:v,xAxisId:o,yAxisId:u})),j.createElement(bn,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(v,")"):void 0},j.createElement(uV,{data:r,dataKey:n,background:m,allOtherBarProps:this.props}),j.createElement(vV,this.props)))}}var xV={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:pM,xAxisId:0,yAxisId:0,zIndex:er.bar};function bV(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:l,minPointSize:o,activeBar:u,animationBegin:f,animationDuration:m,animationEasing:h,isAnimationActive:p}=e,{needClip:v}=zb(t,r),y=Cs(),b=xr(),_=jH(e.children,wb),N=Ae(O=>VF(O,e.id,b,_));if(y!=="vertical"&&y!=="horizontal")return null;var w,S=N?.[0];return S==null||S.height==null||S.width==null?w=0:w=y==="vertical"?S.height/2:S.width/2,j.createElement(nM,{xAxisId:t,yAxisId:r,data:N,dataPointFormatter:gV,errorBarOffset:w},j.createElement(yV,Ia({},e,{layout:y,needClip:v,data:N,xAxisId:t,yAxisId:r,hide:n,legendType:l,minPointSize:o,activeBar:u,animationBegin:f,animationDuration:m,animationEasing:h,isAnimationActive:p})))}function jV(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:l,bandSize:o,xAxis:u,yAxis:f,xAxisTicks:m,yAxisTicks:h,stackedData:p,displayedData:v,offset:y,cells:b,parentViewBox:_,dataStartIndex:N}=e,w=t==="horizontal"?f:u,S=p?w.scale.domain():null,O=P4({numericAxis:w}),C=w.scale.map(O);return v.map((E,z)=>{var M,L,T,k,Y,X;if(p){var B=p[z+N];if(B==null)return null;M=O4(B,S)}else M=$t(E,r),Array.isArray(M)||(M=[O,M]);var le=zF(n,pM)(M[1],z);if(t==="horizontal"){var ue,Q=f.scale.map(M[0]),P=f.scale.map(M[1]);if(Q==null||P==null)return null;L=jw({axis:u,ticks:m,bandSize:o,offset:l.offset,entry:E,index:z}),T=(ue=P??Q)!==null&&ue!==void 0?ue:void 0,k=l.size;var J=Q-P;if(Y=ea(J)?0:J,X={x:L,y:y.top,width:k,height:y.height},Math.abs(le)>0&&Math.abs(Y)<Math.abs(le)){var H=qr(Y||le)*(Math.abs(le)-Math.abs(Y));T-=H,Y+=H}}else{var ve=u.scale.map(M[0]),I=u.scale.map(M[1]);if(ve==null||I==null)return null;if(L=ve,T=jw({axis:f,ticks:h,bandSize:o,offset:l.offset,entry:E,index:z}),k=I-ve,Y=l.size,X={x:y.left,y:T,width:y.width,height:Y},Math.abs(le)>0&&Math.abs(k)<Math.abs(le)){var ge=qr(k||le)*(Math.abs(le)-Math.abs(k));k+=ge}}if(L==null||T==null||k==null||Y==null)return null;var ee=Nr(Nr({},E),{},{stackedBarStart:C,x:L,y:T,width:k,height:Y,value:p?M:M[1],payload:E,background:X,tooltipPosition:{x:L+k/2,y:T+Y/2},parentViewBox:_},b&&b[z]&&b[z].props);return ee}).filter(Boolean)}function NV(e){var t=Cr(e,xV),r=WF(t.stackId),n=xr();return j.createElement(VD,{id:t.id,type:"bar"},l=>j.createElement(j.Fragment,null,j.createElement(FD,{legendPayload:oV(t)}),j.createElement(cV,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),j.createElement(KD,{type:"bar",id:l,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),j.createElement(wn,{zIndex:t.zIndex},j.createElement(bV,Ia({},t,{id:l})))))}var vM=j.memo(NV,Pm);vM.displayName="Bar";var _V=["domain","range"],wV=["domain","range"];function RC(e,t){if(e==null)return{};var r,n,l=SV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function SV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function LC(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function gM(e,t){if(e===t)return!0;var{domain:r,range:n}=e,l=RC(e,_V),{domain:o,range:u}=t,f=RC(t,wV);return!LC(r,o)||!LC(n,u)?!1:Pm(l,f)}var AV=["type"],CV=["dangerouslySetInnerHTML","ticks","scale"],EV=["id","scale"];function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gy.apply(null,arguments)}function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function BC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(n){OV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OV(e,t,r){return(t=zV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zV(e){var t=DV(e,"string");return typeof t=="symbol"?t:t+""}function DV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qy(e,t){if(e==null)return{};var r,n,l=MV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function MV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function TV(e){var t=Pt(),r=j.useRef(null),n=HE(),{type:l}=e,o=Qy(e,AV),u=wm(n,"xAxis",l),f=j.useMemo(()=>{if(u!=null)return BC(BC({},o),{},{type:u})},[o,u]);return j.useLayoutEffect(()=>{f!=null&&(r.current===null?t(cG(f)):r.current!==f&&t(uG({prev:r.current,next:f})),r.current=f)},[f,t]),j.useLayoutEffect(()=>()=>{r.current&&(t(dG(r.current)),r.current=null)},[t]),null}var kV=e=>{var{xAxisId:t,className:r}=e,n=Ae(jx),l=xr(),o="xAxis",u=Ae(S=>Qz(S,o,t,l)),f=Ae(S=>$z(S,t)),m=Ae(S=>$$(S,t)),h=Ae(S=>uz(S,t));if(f==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:v,scale:y}=e,b=Qy(e,CV),{id:_,scale:N}=h,w=Qy(h,EV);return j.createElement(Ob,Gy({},b,w,{x:m.x,y:m.y,width:f.width,height:f.height,className:ut("recharts-".concat(o," ").concat(o),r),viewBox:n,ticks:u,axisType:o}))},PV={allowDataOverflow:Wt.allowDataOverflow,allowDecimals:Wt.allowDecimals,allowDuplicatedCategory:Wt.allowDuplicatedCategory,angle:Wt.angle,axisLine:Da.axisLine,height:Wt.height,hide:!1,includeHidden:Wt.includeHidden,interval:Wt.interval,label:!1,minTickGap:Wt.minTickGap,mirror:Wt.mirror,orientation:Wt.orientation,padding:Wt.padding,reversed:Wt.reversed,scale:Wt.scale,tick:Wt.tick,tickCount:Wt.tickCount,tickLine:Da.tickLine,tickSize:Da.tickSize,type:Wt.type,xAxisId:0},qV=e=>{var t=Cr(e,PV);return j.createElement(j.Fragment,null,j.createElement(TV,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),j.createElement(kV,t))},Fy=j.memo(qV,gM);Fy.displayName="XAxis";var RV=["type"],LV=["dangerouslySetInnerHTML","ticks","scale"],IV=["id","scale"];function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vy.apply(null,arguments)}function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(n){BV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BV(e,t,r){return(t=$V(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $V(e){var t=UV(e,"string");return typeof t=="symbol"?t:t+""}function UV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yy(e,t){if(e==null)return{};var r,n,l=HV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function HV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GV(e){var t=Pt(),r=j.useRef(null),n=HE(),{type:l}=e,o=Yy(e,RV),u=wm(n,"yAxis",l),f=j.useMemo(()=>{if(u!=null)return UC(UC({},o),{},{type:u})},[u,o]);return j.useLayoutEffect(()=>{f!=null&&(r.current===null?t(fG(f)):r.current!==f&&t(mG({prev:r.current,next:f})),r.current=f)},[f,t]),j.useLayoutEffect(()=>()=>{r.current&&(t(hG(r.current)),r.current=null)},[t]),null}function QV(e){var{yAxisId:t,className:r,width:n,label:l}=e,o=j.useRef(null),u=j.useRef(null),f=Ae(jx),m=xr(),h=Pt(),p="yAxis",v=Ae(M=>Uz(M,t)),y=Ae(M=>H$(M,t)),b=Ae(M=>Qz(M,p,t,m)),_=Ae(M=>dz(M,t));if(j.useLayoutEffect(()=>{if(!(n!=="auto"||!v||Ab(l)||j.isValidElement(l)||_==null)){var M=o.current;if(M){var L=M.getCalculatedWidth();Math.round(v.width)!==Math.round(L)&&h(pG({id:t,width:L}))}}},[b,v,h,l,t,n,_]),v==null||y==null||_==null)return null;var{dangerouslySetInnerHTML:N,ticks:w,scale:S}=e,O=Yy(e,LV),{id:C,scale:E}=_,z=Yy(_,IV);return j.createElement(Ob,Vy({},O,z,{ref:o,labelRef:u,x:y.x,y:y.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:v.width,height:v.height,className:ut("recharts-".concat(p," ").concat(p),r),viewBox:f,ticks:b,axisType:p}))}var FV={allowDataOverflow:Zt.allowDataOverflow,allowDecimals:Zt.allowDecimals,allowDuplicatedCategory:Zt.allowDuplicatedCategory,angle:Zt.angle,axisLine:Da.axisLine,hide:!1,includeHidden:Zt.includeHidden,interval:Zt.interval,label:!1,minTickGap:Zt.minTickGap,mirror:Zt.mirror,orientation:Zt.orientation,padding:Zt.padding,reversed:Zt.reversed,scale:Zt.scale,tick:Zt.tick,tickCount:Zt.tickCount,tickLine:Da.tickLine,tickSize:Da.tickSize,type:Zt.type,width:Zt.width,yAxisId:0},VV=e=>{var t=Cr(e,FV);return j.createElement(j.Fragment,null,j.createElement(GV,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),j.createElement(QV,t))},Ky=j.memo(VV,gM);Ky.displayName="YAxis";var YV=(e,t)=>t,Mb=re([YV,nt,oz,ar,oD,Ya,a9,tr],d9),Tb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},yM=jn("mouseClick"),xM=kc();xM.startListening({actionCreator:yM,effect:(e,t)=>{var r=e.payload,n=Mb(t.getState(),Tb(r));n?.activeIndex!=null&&t.dispatch(nU({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Xy=jn("mouseMove"),bM=kc(),Cd=null;bM.startListening({actionCreator:Xy,effect:(e,t)=>{var r=e.payload;Cd!==null&&cancelAnimationFrame(Cd);var n=Tb(r);Cd=requestAnimationFrame(()=>{var l=t.getState(),o=hb(l,l.tooltip.settings.shared);if(o==="axis"){var u=Mb(l,n);u?.activeIndex!=null?t.dispatch(Jz({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(Zz())}Cd=null})}});function KV(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var HC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},jM=Ir({name:"rootProps",initialState:HC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:HC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),XV=jM.reducer,{updateOptions:WV}=jM.actions,ZV=null,JV={updatePolarOptions:(e,t)=>t.payload},NM=Ir({name:"polarOptions",initialState:ZV,reducers:JV}),{updatePolarOptions:BX}=NM.actions,eY=NM.reducer,_M=jn("keyDown"),wM=jn("focus"),kb=kc();kb.startListening({actionCreator:_M,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:l}=r.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=pb(l,Jl(r),Gc(r),Fc(r)),f=u==null?-1:Number(u);if(!(!Number.isFinite(f)||f<0)){var m=Ya(r);if(o==="Enter"){var h=Of(r,"axis","hover",String(l.index));t.dispatch(qy({active:!l.active,activeIndex:l.index,activeCoordinate:h}));return}var p=V$(r),v=p==="left-to-right"?1:-1,y=o==="ArrowRight"?1:-1,b=f+y*v;if(!(m==null||b>=m.length||b<0)){var _=Of(r,"axis","hover",String(b));t.dispatch(qy({active:!0,activeIndex:b.toString(),activeCoordinate:_}))}}}}}});kb.startListening({actionCreator:wM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:l}=r.tooltip;if(!l.active&&l.index==null){var o="0",u=Of(r,"axis","hover",String(o));t.dispatch(qy({active:!0,activeIndex:o,activeCoordinate:u}))}}}});var gn=jn("externalEvent"),SM=kc(),Hg=new Map;SM.startListening({actionCreator:gn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var l=n.type,o=Hg.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var f=t.getState(),m={activeCoordinate:UU(f),activeDataKey:fD(f),activeIndex:_s(f),activeLabel:dD(f),activeTooltipIndex:_s(f),isTooltipActive:HU(f)};r(m,n)}finally{Hg.delete(l)}});Hg.set(l,u)}}});var tY=re([Wl],e=>e.tooltipItemPayloads),rY=re([tY,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(o=>o.settings.graphicalItemId===r);if(n!=null){var{getPosition:l}=n;if(l!=null)return l(t)}}}),AM=jn("touchMove"),CM=kc();CM.startListening({actionCreator:AM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),l=hb(n,n.tooltip.settings.shared);if(l==="axis"){var o=r.touches[0];if(o==null)return;var u=Mb(n,Tb({clientX:o.clientX,clientY:o.clientY,currentTarget:r.currentTarget}));u?.activeIndex!=null&&t.dispatch(Jz({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(l==="item"){var f,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(U4),v=(f=h.getAttribute(H4))!==null&&f!==void 0?f:void 0,y=Zl(n).find(N=>N.id===v);if(p==null||y==null||v==null)return;var{dataKey:b}=y,_=rY(n,p,v);t.dispatch(Wz({activeDataKey:b,activeIndex:p,activeCoordinate:_,activeGraphicalItemId:v}))}}}});var nY=iE({brush:PG,cartesianAxis:vG,chartData:U9,errorBars:OQ,graphicalItems:YH,layout:w4,legend:kL,options:R9,polarAxis:vH,polarOptions:eY,referenceElements:IG,rootProps:XV,tooltip:aU,zIndex:S9}),aY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return K5({reducer:nY,preloadedState:t,middleware:n=>{var l;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([xM.middleware,bM.middleware,kb.middleware,SM.middleware,CM.middleware])},enhancers:n=>{var l=n;return typeof n=="function"&&(l=n()),l.concat(bE({type:"raf"}))},devTools:{serialize:{replacer:KV},name:"recharts-".concat(r)}})};function iY(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,l=xr(),o=j.useRef(null);if(l)return r;o.current==null&&(o.current=aY(t,n));var u=hx;return j.createElement(aF,{context:u,store:o.current},r)}function sY(e){var{layout:t,margin:r}=e,n=Pt(),l=xr();return j.useEffect(()=>{l||(n(j4(t)),n(b4(r)))},[n,l,t,r]),null}var lY=j.memo(sY,Pm);function oY(e){var t=Pt();return j.useEffect(()=>{t(WV(e))},[t,e]),null}function GC(e){var{zIndex:t,isPanorama:r}=e,n=j.useRef(null),l=Pt();return j.useLayoutEffect(()=>(n.current&&l(_9({zIndex:t,element:n.current,isPanorama:r})),()=>{l(w9({zIndex:t,isPanorama:r}))}),[l,t,r]),j.createElement("g",{tabIndex:-1,ref:n})}function QC(e){var{children:t,isPanorama:r}=e,n=Ae(m9);if(!n||n.length===0)return t;var l=n.filter(u=>u<0),o=n.filter(u=>u>0);return j.createElement(j.Fragment,null,l.map(u=>j.createElement(GC,{key:u,zIndex:u,isPanorama:r})),t,o.map(u=>j.createElement(GC,{key:u,zIndex:u,isPanorama:r})))}var cY=["children"];function uY(e,t){if(e==null)return{};var r,n,l=dY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function dY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rf.apply(null,arguments)}var fY={width:"100%",height:"100%",display:"block"},mY=j.forwardRef((e,t)=>{var r=$E(),n=UE(),l=ZE();if(!ra(r)||!ra(n))return null;var{children:o,otherAttributes:u,title:f,desc:m}=e,h,p;return u!=null&&(typeof u.tabIndex=="number"?h=u.tabIndex:h=l?0:void 0,typeof u.role=="string"?p=u.role:p=l?"application":void 0),j.createElement(_2,Rf({},u,{title:f,desc:m,role:p,tabIndex:h,width:r,height:n,style:fY,ref:t}),o)}),hY=e=>{var{children:t}=e,r=Ae(om);if(!r)return null;var{width:n,height:l,y:o,x:u}=r;return j.createElement(_2,{width:n,height:l,x:u,y:o},t)},FC=j.forwardRef((e,t)=>{var{children:r}=e,n=uY(e,cY),l=xr();return l?j.createElement(hY,null,j.createElement(QC,{isPanorama:!0},r)):j.createElement(mY,Rf({ref:t},n),j.createElement(QC,{isPanorama:!1},r))});function pY(){var e=Pt(),[t,r]=j.useState(null),n=Ae($4);return j.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;Ke(o)&&o!==n&&e(_4(o))}},[t,e,n]),r}function VC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function vY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(r),!0).forEach(function(n){gY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gY(e,t,r){return(t=yY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yY(e){var t=xY(e,"string");return typeof t=="symbol"?t:t+""}function xY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ei(){return Ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ei.apply(null,arguments)}var bY=()=>(W9(),null);function Lf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var jY=j.forwardRef((e,t)=>{var r,n,l=j.useRef(null),[o,u]=j.useState({containerWidth:Lf((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Lf((n=e.style)===null||n===void 0?void 0:n.height)}),f=j.useCallback((h,p)=>{u(v=>{var y=Math.round(h),b=Math.round(p);return v.containerWidth===y&&v.containerHeight===b?v:{containerWidth:y,containerHeight:b}})},[]),m=j.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:v}=h.getBoundingClientRect();f(p,v);var y=_=>{var N=_[0];if(N!=null){var{width:w,height:S}=N.contentRect;f(w,S)}},b=new ResizeObserver(y);b.observe(h),l.current=b}},[t,f]);return j.useEffect(()=>()=>{var h=l.current;h?.disconnect()},[f]),j.createElement(j.Fragment,null,j.createElement(qc,{width:o.containerWidth,height:o.containerHeight}),j.createElement("div",Ei({ref:m},e)))}),NY=j.forwardRef((e,t)=>{var{width:r,height:n}=e,[l,o]=j.useState({containerWidth:Lf(r),containerHeight:Lf(n)}),u=j.useCallback((m,h)=>{o(p=>{var v=Math.round(m),y=Math.round(h);return p.containerWidth===v&&p.containerHeight===y?p:{containerWidth:v,containerHeight:y}})},[]),f=j.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:p}=m.getBoundingClientRect();u(h,p)}},[t,u]);return j.createElement(j.Fragment,null,j.createElement(qc,{width:l.containerWidth,height:l.containerHeight}),j.createElement("div",Ei({ref:f},e)))}),_Y=j.forwardRef((e,t)=>{var{width:r,height:n}=e;return j.createElement(j.Fragment,null,j.createElement(qc,{width:r,height:n}),j.createElement("div",Ei({ref:t},e)))}),wY=j.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?j.createElement(NY,Ei({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?j.createElement(_Y,Ei({},e,{width:r,height:n,ref:t})):j.createElement(j.Fragment,null,j.createElement(qc,{width:r,height:n}),j.createElement("div",Ei({ref:t},e)))});function SY(e){return e?jY:wY}var AY=j.forwardRef((e,t)=>{var{children:r,className:n,height:l,onClick:o,onContextMenu:u,onDoubleClick:f,onMouseDown:m,onMouseEnter:h,onMouseLeave:p,onMouseMove:v,onMouseUp:y,onTouchEnd:b,onTouchMove:_,onTouchStart:N,style:w,width:S,responsive:O,dispatchTouchEvents:C=!0}=e,E=j.useRef(null),z=Pt(),[M,L]=j.useState(null),[T,k]=j.useState(null),Y=pY(),X=Nx(),B=X?.width>0?X.width:S,le=X?.height>0?X.height:l,ue=j.useCallback(ne=>{Y(ne),typeof t=="function"&&t(ne),L(ne),k(ne),ne!=null&&(E.current=ne)},[Y,t,L,k]),Q=j.useCallback(ne=>{z(yM(ne)),z(gn({handler:o,reactEvent:ne}))},[z,o]),P=j.useCallback(ne=>{z(Xy(ne)),z(gn({handler:h,reactEvent:ne}))},[z,h]),J=j.useCallback(ne=>{z(Zz()),z(gn({handler:p,reactEvent:ne}))},[z,p]),H=j.useCallback(ne=>{z(Xy(ne)),z(gn({handler:v,reactEvent:ne}))},[z,v]),ve=j.useCallback(()=>{z(wM())},[z]),I=j.useCallback(ne=>{z(_M(ne.key))},[z]),ge=j.useCallback(ne=>{z(gn({handler:u,reactEvent:ne}))},[z,u]),ee=j.useCallback(ne=>{z(gn({handler:f,reactEvent:ne}))},[z,f]),fe=j.useCallback(ne=>{z(gn({handler:m,reactEvent:ne}))},[z,m]),ye=j.useCallback(ne=>{z(gn({handler:y,reactEvent:ne}))},[z,y]),he=j.useCallback(ne=>{z(gn({handler:N,reactEvent:ne}))},[z,N]),$=j.useCallback(ne=>{C&&z(AM(ne)),z(gn({handler:_,reactEvent:ne}))},[z,C,_]),ce=j.useCallback(ne=>{z(gn({handler:b,reactEvent:ne}))},[z,b]),Se=SY(O);return j.createElement(xD.Provider,{value:M},j.createElement(O3.Provider,{value:T},j.createElement(Se,{width:B??w?.width,height:le??w?.height,className:ut("recharts-wrapper",n),style:vY({position:"relative",cursor:"default",width:B,height:le},w),onClick:Q,onContextMenu:ge,onDoubleClick:ee,onFocus:ve,onKeyDown:I,onMouseDown:fe,onMouseEnter:P,onMouseLeave:J,onMouseMove:H,onMouseUp:ye,onTouchEnd:ce,onTouchMove:$,onTouchStart:he,ref:ue},j.createElement(bY,null),r)))}),CY=["width","height","responsive","children","className","style","compact","title","desc"];function EY(e,t){if(e==null)return{};var r,n,l=OY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function OY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zY=j.forwardRef((e,t)=>{var{width:r,height:n,responsive:l,children:o,className:u,style:f,compact:m,title:h,desc:p}=e,v=EY(e,CY),y=Pn(v);return m?j.createElement(j.Fragment,null,j.createElement(qc,{width:r,height:n}),j.createElement(FC,{otherAttributes:y,title:h,desc:p},o)):j.createElement(AY,{className:u,style:f,width:r,height:n,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},j.createElement(FC,{otherAttributes:y,title:h,desc:p,ref:t},j.createElement($G,null,o)))});function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(null,arguments)}var DY={top:5,right:5,bottom:5,left:5},MY={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:DY,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},EM=j.forwardRef(function(t,r){var n,l=Cr(t.categoricalChartProps,MY),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,p={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return j.createElement(iY,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:o},j.createElement(kG,{chartData:h.data}),j.createElement(lY,{layout:l.layout,margin:l.margin}),j.createElement(oY,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),j.createElement(zY,Wy({},l,{ref:r})))}),TY=["axis"],kY=j.forwardRef((e,t)=>j.createElement(EM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:TY,tooltipPayloadSearcher:bD,categoricalChartProps:e,ref:t})),PY=["axis","item"],qY=j.forwardRef((e,t)=>j.createElement(EM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:PY,tooltipPayloadSearcher:bD,categoricalChartProps:e,ref:t}));const RY=8,LY=12,IY=14,BY=1;function Pb(e){return e instanceof Mt?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function YC(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function qm(){const e=new Date,t=e.getDay(),r=t===0?-6:1-t,n=new Date(e);return n.setDate(e.getDate()+r),n.setHours(0,0,0,0),n}function $Y(){const e=qm(),t=new Date(e);return t.setDate(e.getDate()+6),t.setHours(23,59,59,999),t}function Gg(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function Rm(e){try{const t=Ge(Oe(pe,"quiz_results"),Ie("userId","==",e),wt("datePassage","desc"));return(await $e(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Erreur rcupration rsultats lve:",t),[]}}async function UY(e){try{const t=await Rm(e);if(t.length===0)return[];const r=new Map;t.forEach(o=>{const u=o.disciplineId;r.has(u)||r.set(u,[]),r.get(u).push(o)});const n=[];r.forEach((o,u)=>{if(o.length<BY)return;const f=o.map(w=>w.pourcentage/100*20),m=f.reduce((w,S)=>w+S,0)/f.length;if(m>=IY)return;let h="stable";if(f.length>=3){const w=f.slice(0,2),S=f.slice(2,4),O=w.reduce((z,M)=>z+M,0)/w.length,C=S.reduce((z,M)=>z+M,0)/S.length,E=O-C;E>1.5?h="hausse":E<-1.5&&(h="baisse")}let p="modere";m<RY?p="critique":m<LY&&(p="important");const v=f[0],y=Math.max(...f),b=Math.min(...f),_=Pb(o[0].datePassage),N=o[0].disciplineNom||"Discipline inconnue";n.push({id:`lacune_${u}`,disciplineId:u,disciplineNom:N,moyenne:Math.round(m*10)/10,nombreQuiz:o.length,tendance:h,niveauUrgence:p,dernierQuizDate:_,scoreDetails:{dernierScore:Math.round(v*10)/10,meilleurScore:Math.round(y*10)/10,pireScore:Math.round(b*10)/10}})});const l={critique:0,important:1,modere:2};return n.sort((o,u)=>{const f=l[o.niveauUrgence]-l[u.niveauUrgence];return f!==0?f:o.moyenne-u.moyenne}),n}catch(t){return console.error("Erreur dtection lacunes:",t),[]}}function HY(e){const t=[];let r=1;return e.forEach(n=>{const{id:l,disciplineNom:o,niveauUrgence:u,moyenne:f,tendance:m}=n;switch(u){case"critique":t.push({id:`reco_cours_${l}`,lacuneId:l,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${f}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date}),t.push({id:`reco_quiz_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break;case"important":t.push({id:`reco_exercice_${l}`,lacuneId:l,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${f}/20 de moyenne, concentre-toi sur les exercices pratiques. ${m==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date}),t.push({id:`reco_cours2_${l}`,lacuneId:l,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break;case"modere":t.push({id:`reco_consolider_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${f}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:r++,completee:!1,dateCreation:new Date});break}}),t}async function GY(e){try{const t=await Rm(e);if(t.length===0)return{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const r=new Set;t.forEach(N=>{const w=Pb(N.datePassage),S=`${w.getFullYear()}-${w.getMonth()}-${w.getDate()}`;r.add(S)});const n=Array.from(r).map(N=>{const[w,S,O]=N.split("-").map(Number);return new Date(w,S,O)}).sort((N,w)=>w.getTime()-N.getTime()),l=n.length,o=n[0];let u=0;const f=new Date;f.setHours(0,0,0,0);const m=n[0];if(Gg(m,f)<=1){u=1;for(let N=1;N<n.length&&Gg(n[N],n[N-1])===1;N++)u++}let p=0,v=1;for(let N=1;N<n.length;N++)Gg(n[N],n[N-1])===1?v++:(p=Math.max(p,v),v=1);p=Math.max(p,v,u);const y=qm(),b=[];for(let N=0;N<7;N++){const w=new Date(y);w.setDate(y.getDate()+N);const S=n.some(O=>YC(O,w));b.push(S)}const _=[];for(let N=0;N<4;N++){const w=new Date(y);w.setDate(y.getDate()-N*7);let S=0;for(let C=0;C<7;C++){const E=new Date(w);E.setDate(w.getDate()+C),n.some(z=>YC(z,E))&&S++}const O=Math.ceil((w.getDate()+new Date(w.getFullYear(),w.getMonth(),1).getDay())/7);_.push({semaine:N===0?"Cette sem.":`Sem. -${N}`,joursActifs:S})}return{userId:e,streakActuel:u,meilleurStreak:p,dernierJourActif:o,totalJoursActifs:l,semaineCourante:b,historiqueHebdo:_.reverse()}}catch(t){return console.error("Erreur calcul streak:",t),{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function QY(e,t,r){const n=[],l=qm(),o=$Y(),u=t.length>2?5:3;if(n.push({id:`obj_quiz_${e}_${l.getTime()}`,userId:e,titre:`Passer ${u} quiz cette semaine`,description:`Entrane-toi en passant au moins ${u} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:u,progression:0,statut:"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Travailleur"'}),t.length>0){const m=t[0],h=Math.min(m.moyenne+3,14);n.push({id:`obj_score_${e}_${l.getTime()}`,userId:e,titre:`Atteindre ${Math.round(h)}/20 en ${m.disciplineNom}`,description:`Ta moyenne actuelle est de ${m.moyenne}/20. Vise ${Math.round(h)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(h),progression:Math.round(m.moyenne),statut:"en_cours",disciplineId:m.disciplineId,disciplineNom:m.disciplineNom,dateDebut:l,dateFin:o,recompense:' Badge "En progrs"'})}const f=r.streakActuel>=5?7:r.streakActuel+2;return n.push({id:`obj_streak_${e}_${l.getTime()}`,userId:e,titre:`Maintenir un streak de ${f} jours`,description:`Tu es actuellement  ${r.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:f,progression:r.streakActuel,statut:r.streakActuel>=f?"atteint":"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Flamme"'}),n}function FY(e,t,r,n){let l=0;if(n.length>0){const v=n.reduce((y,b)=>y+b.pourcentage/100*20,0)/n.length;l=Math.min(v/20*100,100)}let o=100;const u=e.filter(v=>v.niveauUrgence==="critique").length,f=e.filter(v=>v.niveauUrgence==="important").length;o-=u*25,o-=f*15,o=Math.max(o,0);const m=Math.min(t.streakActuel/7*100,100);let h=0;r.length>0&&(h=r.filter(y=>y.statut==="atteint").length/r.length*100);const p=l*.4+o*.25+m*.2+h*.15;return Math.round(Math.min(Math.max(p,0),100))}function VY(e,t,r){const n=qm(),l=t.filter(o=>Pb(o.datePassage)>=n);return e.map(o=>{const u={...o};switch(o.type){case"quiz_count":u.progression=l.length;break;case"score_min":if(o.disciplineId){const f=l.filter(m=>m.disciplineId===o.disciplineId);if(f.length>0){const m=Math.max(...f.map(h=>h.pourcentage));u.progression=Math.round(m/100*20)}}break;case"streak":u.progression=r.streakActuel;break}return u.progression>=u.cible&&(u.statut="atteint"),u})}async function qb(e){try{const t=await UY(e),r=HY(t),n=await GY(e);let l=QY(e,t,n);const o=await Rm(e);l=VY(l,o,n);const u=FY(t,n,l,o);return{lacunes:t,recommandations:r,streak:n,objectifs:l,scoreGlobal:u}}catch(t){return console.error("Erreur suivi complet:",t),{lacunes:[],recommandations:[],streak:{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function If(e){switch(e){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function OM(e){switch(e){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function zM(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function YY(e){return e>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":e>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":e>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":e>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function KY(e){return e.cible===0?0:Math.min(Math.round(e.progression/e.cible*100),100)}const XY="PEDA",WY=4,ZY=5,JY=40,DM=5;function Oa(e){return e instanceof Mt?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function MM(e){const t=new Date,r=t.getDay(),n=r===0?-6:1-r,l=new Date(t);return l.setDate(t.getDate()+n),l.setHours(0,0,0,0),l}function eK(e){const t=MM(),r=new Date(t);return r.setDate(t.getDate()+6),r.setHours(23,59,59,999),r}function KC(e){const t=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${e.getDate()} ${t[e.getMonth()]}`}function TM(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function tK(e){try{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let r="",n="";for(let u=0;u<WY;u++)r+=t.charAt(Math.floor(Math.random()*t.length)),n+=t.charAt(Math.floor(Math.random()*t.length));const l=`${XY}-${r}-${n}`,o=Ee(pe,"users",e);return await xt(o,{codeParent:l,codeParentGenere:new Date}),l}catch(t){throw console.error("Erreur gnration code invitation:",t),new Error("Impossible de gnrer le code d'invitation")}}async function rK(e){try{const t=Ee(pe,"users",e),r=await mr(t);if(!r.exists())throw new Error("lve introuvable");const n=r.data();return n.codeParent?n.codeParent:await tK(e)}catch(t){throw console.error("Erreur rcupration code invitation:",t),new Error("Impossible de rcuprer le code d'invitation")}}async function nK(e,t){try{const r=t.trim().toUpperCase(),n=Oe(pe,"users"),l=Ge(n,Ie("codeParent","==",r),Ie("role","==","eleve"),Jn(1)),o=await $e(l);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=o.docs[0],f=u.data(),m=u.id,h=Oe(pe,"liens_parent_enfant"),p=Ge(h,Ie("parentId","==",e),Ie("enfantId","==",m),Ie("statut","==","actif"),Jn(1));if(!(await $e(p)).empty)throw new Error("Cet enfant est dj li  votre compte.");const y={parentId:e,enfantId:m,enfantNom:f.displayName||f.email,enfantEmail:f.email,enfantClasse:f.classe||void 0,codeInvitation:r,statut:"actif",dateCreation:new Date};return{id:(await Ar(h,y)).id,...y}}catch(r){throw console.error("Erreur liaison parent-enfant:",r),r}}async function aK(e){try{const t=Oe(pe,"liens_parent_enfant"),r=Ge(t,Ie("parentId","==",e),Ie("statut","==","actif"),wt("dateCreation","desc"));return(await $e(r)).docs.map(l=>({id:l.id,...l.data(),dateCreation:Oa(l.data().dateCreation),dateDerniereConsultation:l.data().dateDerniereConsultation?Oa(l.data().dateDerniereConsultation):void 0}))}catch(t){return console.error("Erreur rcupration enfants lis:",t),[]}}async function iK(e,t){try{const r=Ee(pe,"liens_parent_enfant",e),n=await mr(r);if(!n.exists())throw new Error("Lien introuvable");if(n.data().parentId!==t)throw new Error("Action non autorise");await xt(r,{statut:"revoque",dateRevocation:new Date})}catch(r){throw console.error("Erreur rvocation lien:",r),r}}async function sK(e,t){try{const r=Oe(pe,"liens_parent_enfant"),n=Ge(r,Ie("parentId","==",e),Ie("enfantId","==",t),Ie("statut","==","actif"),Jn(1)),l=await $e(n);if(l.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=Ee(pe,"users",t),u=await mr(o);if(!u.exists())throw new Error("Profil de l'enfant introuvable.");const f=u.data(),m=await qb(t),h=await Rm(t),p=h.slice(0,DM).map(_=>({quizTitre:_.quizTitre||"Quiz",disciplineNom:_.disciplineNom||"Discipline",pourcentage:_.pourcentage,noteSur20:Math.round(_.pourcentage/100*20*10)/10,reussi:_.reussi,datePassage:Oa(_.datePassage)})),v=await lK(e,t,f.displayName||f.email,m.lacunes,m.streak,m.scoreGlobal,h),y=oK(t,f.displayName||f.email,m,h),b=l.docs[0];return await xt(Ee(pe,"liens_parent_enfant",b.id),{dateDerniereConsultation:new Date}),{enfant:{id:t,nom:f.displayName||f.email,email:f.email,classe:f.classe||void 0,derniereConnexion:f.lastLogin?Oa(f.lastLogin):void 0},scoreGlobal:m.scoreGlobal,streak:{actuel:m.streak.streakActuel,meilleur:m.streak.meilleurStreak,semaineCourante:m.streak.semaineCourante},lacunes:m.lacunes.map(_=>({disciplineNom:_.disciplineNom,moyenne:_.moyenne,niveauUrgence:_.niveauUrgence,tendance:_.tendance})),objectifs:m.objectifs.map(_=>({titre:_.titre,progression:_.progression,cible:_.cible,statut:_.statut})),derniersQuiz:p,resume:y,alertes:v}}catch(r){throw console.error("Erreur dashboard parent:",r),r}}async function lK(e,t,r,n,l,o,u){const f=[],m=new Date;if(n.filter(p=>p.niveauUrgence==="critique").forEach(p=>{f.push({id:`alerte_parent_lacune_${p.id}`,parentId:e,enfantId:t,enfantNom:r,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${p.disciplineNom}`,message:`${r} a une moyenne de ${p.moyenne}/20 en ${p.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:m})}),l.dernierJourActif){const p=TM(Oa(l.dernierJourActif),m);p>=ZY&&f.push({id:`alerte_parent_inactif_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"inactivite",niveau:"important",titre:` ${r} est inactif`,message:`${r} n'a pas utilis PedaClic depuis ${p} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:m})}else u.length===0&&f.push({id:`alerte_parent_jamais_actif_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"inactivite",niveau:"modere",titre:` ${r} n'a pas encore commenc`,message:`${r} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:m});o<JY&&u.length>0&&f.push({id:`alerte_parent_score_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${r} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:m}),n.filter(p=>p.tendance==="hausse").forEach(p=>{f.push({id:`alerte_parent_progression_${p.id}`,parentId:e,enfantId:t,enfantNom:r,type:"progression",niveau:"info",titre:` Progression en ${p.disciplineNom}`,message:`Bonne nouvelle ! ${r} montre une tendance  la hausse en ${p.disciplineNom}.`,lue:!1,dateCreation:m})}),l.streakActuel>=5&&f.push({id:`alerte_parent_streak_${t}`,parentId:e,enfantId:t,enfantNom:r,type:"objectif_atteint",niveau:"info",titre:` Streak de ${l.streakActuel} jours !`,message:`Flicitations ! ${r} maintient un streak de ${l.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:m});const h={critique:0,important:1,modere:2,info:3};return f.sort((p,v)=>h[p.niveau]-h[v.niveau]),f}function oK(e,t,r,n){const l=MM(),o=eK(),u=new Date(l);u.setDate(u.getDate()-7);const f=new Date(o);f.setDate(f.getDate()-7);const m=n.filter(E=>{const z=Oa(E.datePassage);return z>=l&&z<=o}),h=n.filter(E=>{const z=Oa(E.datePassage);return z>=u&&z<=f}),p=m.slice(0,DM).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:Oa(E.datePassage)})),v=cK(m,h),y=new Set;m.forEach(E=>{const z=Oa(E.datePassage);y.add(`${z.getFullYear()}-${z.getMonth()}-${z.getDate()}`)});const b=m.reduce((E,z)=>E+(z.tempsEcoule||5),0);let _=0;if(h.length>0){const E=h.reduce((z,M)=>z+M.pourcentage,0)/h.length;_=Math.round(E)}let N="stable";const w=r.scoreGlobal-_;w>5?N="hausse":w<-5&&(N="baisse");const S=r.lacunes.filter(E=>E.niveauUrgence==="critique"||E.niveauUrgence==="important").map(E=>E.disciplineNom),O=r.objectifs.filter(E=>E.statut==="atteint").length,C=`${KC(l)} - ${KC(o)} ${o.getFullYear()}`;return{enfantId:e,enfantNom:t,semaine:C,dateDebut:l,dateFin:o,scoreGlobal:r.scoreGlobal,scoreGlobalPrecedent:_,evolutionScore:N,nombreQuizSemaine:m.length,tempsEstimeMinutes:Math.round(b),joursActifsSemaine:y.size,streakActuel:r.streak.streakActuel,derniersQuiz:p,evolutionDisciplines:v,lacunesCritiques:r.lacunes.filter(E=>E.niveauUrgence==="critique").length,lacunesImportantes:r.lacunes.filter(E=>E.niveauUrgence==="important").length,disciplinesEnDifficulte:S,objectifsAtteints:O,objectifsTotal:r.objectifs.length}}function cK(e,t){const r=new Map;e.forEach(o=>{r.has(o.disciplineId)||r.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),r.get(o.disciplineId).scores.push(o.pourcentage)});const n=new Map;t.forEach(o=>{n.has(o.disciplineId)||n.set(o.disciplineId,[]),n.get(o.disciplineId).push(o.pourcentage)});const l=[];return r.forEach((o,u)=>{const f=o.scores.reduce((_,N)=>_+N,0)/o.scores.length,m=n.get(u)||[],h=m.length>0?m.reduce((_,N)=>_+N,0)/m.length:f,p=Math.round(f/100*20*10)/10,v=Math.round(h/100*20*10)/10,y=Math.round((p-v)*10)/10;let b="stable";y>1?b="hausse":y<-1&&(b="baisse"),l.push({disciplineNom:o.nom,disciplineId:u,moyenneSemainePrecedente:v,moyenneSemaineCourante:p,evolution:b,ecart:y})}),l}function uK(e){return If(e)}function dK(e){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[e]||"Alerte"}function XC(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function fK(e){return e>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":e>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":e>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":e>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function Qg(e){const r=TM(e,new Date);return r===0?"Aujourd'hui":r===1?"Hier":r<7?`Il y a ${r} jours`:r<30?`Il y a ${Math.floor(r/7)} semaine(s)`:`Il y a ${Math.floor(r/30)} mois`}const mK="PROF",hK=4,Ed="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",kM=8,pK=7,vK=16;function Ss(e){return e instanceof Mt?e.toDate():e instanceof Date?e:e?.seconds?new Mt(e.seconds,e.nanoseconds||0).toDate():new Date(e)}function gK(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function PM(){let e=0;const t=10;for(;e<t;){let r="",n="";for(let f=0;f<hK;f++)r+=Ed.charAt(Math.floor(Math.random()*Ed.length)),n+=Ed.charAt(Math.floor(Math.random()*Ed.length));const l=`${mK}-${r}-${n}`,o=Ge(Oe(pe,"groupes_prof"),Ie("codeInvitation","==",l),Jn(1));if((await $e(o)).empty)return l;e++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function yK(e,t,r){try{const n=await PM(),l={profId:e,profNom:t,nom:r.nom.trim(),description:r.description?.trim()||"",matiereId:r.matiereId,matiereNom:r.matiereNom,classeNiveau:r.classeNiveau,codeInvitation:n,nombreInscrits:0,statut:"actif",anneeScolaire:r.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await Ar(Oe(pe,"groupes_prof"),l);return console.log(` Groupe "${r.nom}" cr avec code: ${n}`),{id:o.id,...l}}catch(n){throw console.error(" Erreur cration groupe:",n),new Error("Impossible de crer le groupe. Ressayez.")}}async function qM(e){try{const t=Ge(Oe(pe,"groupes_prof"),Ie("profId","==",e),wt("dateCreation","desc"));return(await $e(t)).docs.map(n=>({id:n.id,...n.data(),dateCreation:Ss(n.data().dateCreation),dateMiseAJour:n.data().dateMiseAJour?Ss(n.data().dateMiseAJour):void 0}))}catch(t){throw console.error(" Erreur rcupration groupes:",t),new Error("Impossible de charger vos groupes.")}}async function xK(e){try{const t=await mr(Ee(pe,"groupes_prof",e));if(!t.exists())return null;const r=t.data();return{id:t.id,...r,dateCreation:Ss(r.dateCreation),dateMiseAJour:r.dateMiseAJour?Ss(r.dateMiseAJour):void 0}}catch(t){return console.error(" Erreur rcupration groupe:",t),null}}async function RM(e,t){try{const r=Ee(pe,"groupes_prof",e);await xt(r,{...t,dateMiseAJour:new Date}),console.log(` Groupe ${e} mis  jour`)}catch(r){throw console.error(" Erreur modification groupe:",r),new Error("Impossible de modifier le groupe.")}}async function bK(e){try{const t=mc(pe),r=Ge(Oe(pe,"inscriptions_groupe"),Ie("groupeId","==",e));(await $e(r)).docs.forEach(l=>t.delete(l.ref)),t.delete(Ee(pe,"groupes_prof",e)),await t.commit(),console.log(` Groupe ${e} et ses inscriptions supprims`)}catch(t){throw console.error(" Erreur suppression groupe:",t),new Error("Impossible de supprimer le groupe.")}}async function jK(e){await RM(e,{statut:"archive"})}async function NK(e){try{const t=await PM();return await xt(Ee(pe,"groupes_prof",e),{codeInvitation:t,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${e}: ${t}`),t}catch(t){throw console.error(" Erreur rgnration code:",t),new Error("Impossible de rgnrer le code.")}}async function _K(e,t,r,n){try{const l=n.trim().toUpperCase(),o=Ge(Oe(pe,"groupes_prof"),Ie("codeInvitation","==",l),Jn(1)),u=await $e(o);if(u.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const f=u.docs[0],m=f.data();if(m.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const h=Ge(Oe(pe,"inscriptions_groupe"),Ie("groupeId","==",f.id),Ie("eleveId","==",e),Ie("statut","==","actif"),Jn(1));if(!(await $e(h)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const v={groupeId:f.id,eleveId:e,eleveNom:t,eleveEmail:r,statut:"actif",dateInscription:new Date},y=await Ar(Oe(pe,"inscriptions_groupe"),v);return await xt(Ee(pe,"groupes_prof",f.id),{nombreInscrits:r2(1),dateMiseAJour:new Date}),console.log(` lve ${t} inscrit au groupe "${m.nom}"`),{id:y.id,...v}}catch(l){throw console.error(" Erreur inscription groupe:",l),l}}async function Lm(e,t="actif"){try{const r=Ge(Oe(pe,"inscriptions_groupe"),Ie("groupeId","==",e),Ie("statut","==",t),wt("dateInscription","asc"));return(await $e(r)).docs.map(l=>({id:l.id,...l.data(),dateInscription:Ss(l.data().dateInscription),dateRetrait:l.data().dateRetrait?Ss(l.data().dateRetrait):void 0}))}catch(r){throw console.error(" Erreur rcupration lves groupe:",r),new Error("Impossible de charger les lves du groupe.")}}async function wK(e){try{const t=Ge(Oe(pe,"inscriptions_groupe"),Ie("eleveId","==",e),Ie("statut","==","actif")),r=await $e(t);if(r.empty)return[];const n=[];for(const l of r.docs){const o=l.data().groupeId,u=await xK(o);u&&u.statut==="actif"&&n.push(u)}return n}catch(t){return console.error(" Erreur rcupration groupes lve:",t),[]}}async function SK(e,t){try{await xt(Ee(pe,"inscriptions_groupe",e),{statut:"retire",dateRetrait:new Date}),await xt(Ee(pe,"groupes_prof",t),{nombreInscrits:r2(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(r){throw console.error(" Erreur retrait lve:",r),new Error("Impossible de retirer l'lve du groupe.")}}async function Rb(e){try{const r=(await Lm(e)).map(y=>y.eleveId);if(r.length===0)return{groupeId:e,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const n=[],l=[];for(let y=0;y<r.length;y+=10)l.push(r.slice(y,y+10));for(const y of l){const b=Ge(Oe(pe,"quiz_results"),Ie("userId","in",y));(await $e(b)).docs.forEach(N=>n.push({id:N.id,...N.data()}))}const o=new Map;for(const y of n){const b=y.userId;o.has(b)||o.set(b,{total:0,somme:0,reussis:0});const _=o.get(b);_.total++,_.somme+=y.score||0,(y.score||0)>=10&&_.reussis++}let u=0,f=0,m=0,h=0,p=20,v=0;for(const[,y]of o){const b=y.total>0?y.somme/y.total:0;u+=b,f++,v+=y.total,b<kM&&m++,b>h&&(h=b),b<p&&(p=b)}return f===0&&(p=0),{groupeId:e,nombreEleves:r.length,moyenneClasse:f>0?Math.round(u/f*10)/10:0,tauxReussite:v>0?Math.round(Array.from(o.values()).reduce((y,b)=>y+b.reussis,0)/v*100):0,tauxParticipation:Math.round(f/r.length*100),totalQuizPasses:v,elevesEnDifficulte:m,meilleureNote:Math.round(h*10)/10,pireNote:Math.round(p*10)/10,derniereMiseAJour:new Date}}catch(t){throw console.error(" Erreur calcul stats groupe:",t),new Error("Impossible de calculer les statistiques du groupe.")}}async function AK(e){try{const t=await Lm(e);if(t.length===0)return[];const r=[];for(const n of t)try{const l=await qb(n.eleveId),o=Ge(Oe(pe,"quiz_results"),Ie("userId","==",n.eleveId),wt("datePassage","desc")),f=(await $e(o)).docs.map(b=>b.data());let m=0,h=0,p;if(f.length>0){const b=f.reduce((_,N)=>_+(N.score||0),0);m=Math.round(b/f.length*10)/10,h=Math.round(f.filter(_=>(_.score||0)>=10).length/f.length*100),p=Ss(f[0].datePassage)}let v="stable";if(f.length>=4){const b=f.slice(0,Math.ceil(f.length/2)),_=f.slice(Math.ceil(f.length/2)),N=b.reduce((S,O)=>S+(O.score||0),0)/b.length,w=_.reduce((S,O)=>S+(O.score||0),0)/_.length;N-w>1?v="hausse":w-N>1&&(v="baisse")}const y=l.lacunes.map(b=>({disciplineNom:b.disciplineNom,chapitre:b.chapitre,moyenne:b.moyenne,niveauUrgence:b.niveauUrgence}));r.push({eleveId:n.eleveId,eleveNom:n.eleveNom,eleveEmail:n.eleveEmail,moyenne:m,totalQuiz:f.length,tauxReussite:h,scoreGlobal:l.scoreGlobal,streak:{actuel:l.streak.streakActuel,meilleur:l.streak.meilleurStreak},lacunes:y,dernierQuiz:p,tendance:v})}catch(l){console.warn(` Suivi incomplet pour lve ${n.eleveNom}:`,l),r.push({eleveId:n.eleveId,eleveNom:n.eleveNom,eleveEmail:n.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return r.sort((n,l)=>l.moyenne-n.moyenne),r}catch(t){throw console.error(" Erreur stats lves groupe:",t),new Error("Impossible de charger les statistiques des lves.")}}async function CK(e,t,r){try{const l=(await Lm(e)).map(b=>b.eleveId);if(l.length===0)return null;let o=null,u="quiz_results";if(r!=="quizzes_v2"){if(r!=="quizzes"){const b=await mr(Ee(pe,"quizzes_v2",t));if(b.exists())o=b.data(),u="quiz_results_v2";else{const _=await mr(Ee(pe,"quizzes",t));_.exists()&&(o=_.data(),u="quiz_results")}}}if(!o)return null;const f=[],m=[];for(let b=0;b<l.length;b+=10)m.push(l.slice(b,b+10));for(const b of m){const _=Ge(Oe(pe,u),Ie("quizId","==",t),Ie("userId","in",b));(await $e(_)).docs.forEach(w=>f.push(w.data()))}if(f.length===0)return null;const h=u==="quiz_results_v2",p=f.map(b=>h?b.note20||(b.scoreMax>0?b.score/b.scoreMax*20:0):b.score||0),v=f.map(b=>b.tempsEcoule||0),y=[];if(h&&o.questions)for(let b=0;b<o.questions.length;b++){const _=o.questions[b];let N=0,w=0;for(const C of f){const E=C.detailsParQuestion?.find(z=>z.questionId===_.id);E&&(w++,E.isCorrect||N++)}const S=w>0?Math.round(N/w*100):0,O=_.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${b+1}`;y.push({questionIndex:b,questionTexte:O,tauxEchec:S,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let b=0;b<o.questions.length;b++){const _=o.questions[b];let N=0;const w=new Map;for(const C of f){const E=C.reponses?.[b];E!==void 0&&(w.set(E,(w.get(E)||0)+1),E!==_.reponseCorrecte&&N++)}const S=Math.round(N/f.length*100),O=Array.from(w.entries()).filter(([C])=>C!==_.reponseCorrecte).map(([C,E])=>({reponse:_.options?.[C]||`Option ${C+1}`,nombre:E})).sort((C,E)=>E.nombre-C.nombre);y.push({questionIndex:b,questionTexte:_.question,tauxEchec:S,reponseCorrecte:_.options?.[_.reponseCorrecte]||"N/A",reponsesFrequentes:O})}return y.sort((b,_)=>_.tauxEchec-b.tauxEchec),{quizId:t,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:f.length,moyenneScore:Math.round(p.reduce((b,_)=>b+_,0)/p.length*10)/10,tauxReussite:Math.round(p.filter(b=>b>=10).length/p.length*100),tempsEcouleMoyen:Math.round(v.reduce((b,_)=>b+_,0)/v.length),questionsRatees:y}}catch(n){return console.error(" Erreur analyse quiz groupe:",n),null}}async function EK(e){try{const t=[];try{const r=Ge(Oe(pe,"quizzes"),Ie("disciplineId","==",e),wt("createdAt","desc"));(await $e(r)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(r){console.warn(" Recherche quizzes choue (index manquant ?):",r)}try{const r=Ge(Oe(pe,"quizzes_v2"),Ie("disciplineId","==",e),wt("createdAt","desc"));(await $e(r)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(r){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",r)}return console.log(` ${t.length} quiz trouv(s) pour discipline ${e}`),t}catch(t){return console.error(" Erreur rcupration quiz par matire:",t),[]}}function OK(e,t){const r=[],n=new Date;for(const o of e){if(o.totalQuiz>0&&o.moyenne<kM&&r.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(u=>u.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:n}),o.dernierQuiz){const u=gK(o.dernierQuiz,n);u>=pK&&r.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a pas fait de quiz depuis ${u} jours.`,niveauUrgence:u>=14?"important":"info",dateCreation:n})}else o.totalQuiz===0&&r.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:n});o.tendance==="baisse"&&o.totalQuiz>=4&&r.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:n}),o.moyenne>=vK&&o.totalQuiz>=3&&r.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:n})}const l={critique:0,important:1,info:2};return r.sort((o,u)=>l[o.niveauUrgence]-l[u.niveauUrgence]),r}function zK(e,t){const r=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],n=e.map(o=>{const u=o.lacunes.map(f=>`${f.disciplineNom} (${f.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${u}"`,o.tendance].join(",")});return"\uFEFF"+[r.join(","),...n].join(`
`)}function DK(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),l=document.createElement("a");l.href=n,l.download=`${t}.csv`,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}const MK=()=>{const{currentUser:e}=Ht(),[t,r]=j.useState([]),[n,l]=j.useState(!1),[o,u]=j.useState(""),[f,m]=j.useState(!0),[h,p]=j.useState(!1),[v,y]=j.useState(null),[b,_]=j.useState(null),N=j.useCallback(async()=>{if(e?.uid)try{m(!0);const S=await wK(e.uid);r(S)}catch(S){console.error("Erreur chargement groupes:",S)}finally{m(!1)}},[e?.uid]);j.useEffect(()=>{N()},[N]);const w=async S=>{if(S.preventDefault(),!(!e?.uid||!o.trim()))try{p(!0),y(null),_(null),await _K(e.uid,e.displayName||e.email||"lve",e.email||"",o),_("Tu as rejoint le groupe avec succs ! "),u(""),l(!1),await N(),setTimeout(()=>_(null),5e3)}catch(O){y(O.message||"Impossible de rejoindre le groupe.")}finally{p(!1)}};return a.jsxs("div",{className:"rejoindre-groupe-section",children:[a.jsxs("div",{className:"rejoindre-groupe-header",children:[a.jsx("h3",{children:" Mes groupes-classes"}),a.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>l(!n),children:n?" Annuler":" Rejoindre un groupe"})]}),v&&a.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",v,a.jsx("button",{onClick:()=>y(null),className:"prof-alert-close",children:""})]}),b&&a.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:b}),n&&a.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[a.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),a.jsxs("form",{onSubmit:w,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:S=>u(S.target.value.toUpperCase()),maxLength:14,disabled:h,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),a.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:h||o.length<14,children:h?" Vrification...":" Rejoindre"})]})]}),f?a.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):t.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[a.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),a.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map(S=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{children:[a.jsx("strong",{style:{color:"#1f2937"},children:S.nom}),a.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[S.matiereNom,"  Prof: ",S.profNom]})]}),a.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},S.id))})]})},TK=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":e>0?"#ef4444":"#d1d5db",WC=({pourcentage:e,label:t,size:r="md",showPercent:n=!0,color:l,showCheck:o=!0,className:u=""})=>{const[f,m]=j.useState(0);j.useEffect(()=>{const b=setTimeout(()=>{m(Math.min(100,Math.max(0,e)))},100);return()=>clearTimeout(b)},[e]);const p={sm:"4px",md:"8px",lg:"12px"}[r],v=l||TK(e),y=e>=100;return a.jsxs("div",{className:`progress-bar-wrapper ${u}`,children:[(t||n)&&a.jsxs("div",{className:"progress-bar-header",children:[t&&a.jsx("span",{className:"progress-bar-label",children:t}),n&&a.jsxs("span",{className:"progress-bar-percent",style:{color:v},children:[y&&o?" ":"",e,"%"]})]}),a.jsx("div",{className:"progress-bar-track",style:{height:p},children:a.jsx("div",{className:"progress-bar-fill",style:{width:`${f}%`,backgroundColor:v,height:"100%"}})})]})},kK=()=>{const e=Zr(),{currentUser:t}=Ht(),[r,n]=j.useState(null),[l,o]=j.useState([]),[u,f]=j.useState([]),[m,h]=j.useState([]),[p,v]=j.useState([]),[y,b]=j.useState(null),[_,N]=j.useState([]),[w,S]=j.useState("all"),[O,C]=j.useState(!0),[E,z]=j.useState("overview"),[M,L]=j.useState(null),[T,k]=j.useState(!1),[Y,X]=j.useState(!1),B=async()=>{if(t){k(!0);try{const H=await rK(t.uid);L(H)}catch(H){console.error("Erreur gnration code parent :",H)}finally{k(!1)}}},le=()=>{M&&(navigator.clipboard.writeText(M),X(!0),setTimeout(()=>X(!1),2e3))};if(j.useEffect(()=>{(async()=>{if(t){C(!0);try{await v3(t.uid);const[ve,I,ge,ee,fe,ye]=await Promise.all([s3(t.uid),l3(t.uid),o3(t.uid,20),Gf(t.uid,10),m2().catch(()=>[]),m3(t.uid)]);n(ve),o(I),f(ge),h(ee),v(fe),b(ye);const he=g3(ve,I,ye);N(he)}catch(ve){console.error("Erreur chargement dashboard :",ve)}finally{C(!1)}}})()},[t]),O)return a.jsxs("div",{className:"sd-loading",children:[a.jsx("div",{className:"admin-spinner"}),a.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const ue=_.filter(H=>H.obtenu),Q=_.length,P=t?.displayName||t?.email?.split("@")[0]||"lve",J=w==="all"?_:_.filter(H=>H.categorie===w);return a.jsxs("div",{className:"student-dashboard",children:[a.jsxs("div",{className:"sd-welcome",children:[a.jsxs("div",{className:"sd-welcome-text",children:[a.jsxs("h1",{children:["Bienvenue, ",P," "]}),a.jsx("p",{children:r&&r.totalQuizPasses>0?`Vous avez pass ${r.totalQuizPasses} quiz avec une moyenne de ${r.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),a.jsxs("div",{className:"sd-welcome-badges-row",children:[t?.isPremium&&a.jsxs("span",{className:"sd-premium-badge",children:[a.jsx(Yr,{size:14})," Premium"]}),y&&y.streakActuel>0&&a.jsxs("span",{className:"sd-streak-badge",children:[" ",y.streakActuel," jour",y.streakActuel>1?"s":""]})]})]}),a.jsxs("div",{className:"sd-stats-grid",children:[a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:a.jsx(xn,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsx("span",{className:"sd-stat-value",children:r?.totalQuizPasses||0}),a.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:a.jsx(ev,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",style:{color:Cl(r?.moyenneGenerale||0)},children:[r?.moyenneGenerale||0,"%"]}),a.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:a.jsx(Dl,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsx("span",{className:"sd-stat-value",children:y?.totalRessourcesVues||0}),a.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:a.jsx(n2,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",children:[y?.streakActuel||0," "]}),a.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:a.jsx(a2,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",children:[r?.meilleurScore||0,"%"]}),a.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),a.jsxs("div",{className:"sd-stat-card",children:[a.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:a.jsx(Oi,{size:22})}),a.jsxs("div",{className:"sd-stat-content",children:[a.jsxs("span",{className:"sd-stat-value",children:[y?.disciplinesCompletees||0,"/",y?.disciplinesCommencees||0]}),a.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),a.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[a.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),a.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),M?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:M}),a.jsx("button",{className:"sd-btn",onClick:le,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:Y?"#10b981":"#f3f4f6",color:Y?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:Y?" Copi !":" Copier"})]}):a.jsx("button",{className:"sd-btn sd-btn-primary",onClick:B,disabled:T,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:T?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):a.jsx(a.Fragment,{children:" Gnrer mon code"})})]}),a.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:a.jsx(MK,{})}),a.jsxs("div",{className:"sd-tabs",children:[a.jsxs("button",{className:`sd-tab ${E==="overview"?"active":""}`,onClick:()=>z("overview"),children:[a.jsx(ms,{size:16})," Vue d'ensemble"]}),a.jsxs("button",{className:`sd-tab ${E==="progression"?"active":""}`,onClick:()=>z("progression"),children:[a.jsx(sc,{size:16})," Progression"]}),a.jsxs("button",{className:`sd-tab ${E==="history"?"active":""}`,onClick:()=>z("history"),children:[a.jsx(tv,{size:16})," Historique"]}),a.jsxs("button",{className:`sd-tab ${E==="badges"?"active":""}`,onClick:()=>z("badges"),children:[a.jsx(Oi,{size:16})," Badges (",ue.length,"/",Q,")"]})]}),E==="overview"&&a.jsxs("div",{className:"sd-overview",children:[u.length>1&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(sc,{size:18})," volution de vos scores"]}),a.jsx("div",{className:"sd-chart-container",children:a.jsx(Mw,{width:"100%",height:280,children:a.jsxs(kY,{data:u,children:[a.jsx($y,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(Fy,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),a.jsx(Ky,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),a.jsx(IA,{formatter:H=>[`${H}%`,"Score"],labelFormatter:H=>`Date : ${H}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),a.jsx(dM,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),l.length>0&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(ms,{size:18})," Moyennes par discipline"]}),a.jsx("div",{className:"sd-chart-container",children:a.jsx(Mw,{width:"100%",height:280,children:a.jsxs(qY,{data:l,layout:"vertical",children:[a.jsx($y,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),a.jsx(Fy,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),a.jsx(Ky,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),a.jsx(IA,{formatter:H=>[`${H}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),a.jsx(vM,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:l.map((H,ve)=>a.jsx(wb,{fill:Cl(H.moyenne)},ve))})]})})})]}),p.length>0&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(uc,{size:18})," Quiz disponibles"]}),a.jsx("div",{className:"sd-quiz-grid",children:p.slice(0,6).map(H=>{const ve=H.isPremium&&!t?.isPremium;return a.jsxs("div",{className:`sd-quiz-card ${ve?"locked":""}`,onClick:()=>!ve&&e(`/quiz/${H.id}`),children:[H.isPremium&&a.jsxs("span",{className:"sd-quiz-badge-premium",children:[ve?a.jsx(Yg,{size:10}):a.jsx(Yr,{size:10})," Premium"]}),a.jsx("h4",{className:"sd-quiz-title",children:H.titre}),a.jsxs("div",{className:"sd-quiz-meta",children:[a.jsxs("span",{children:[a.jsx(xn,{size:12})," ",H.questions.length," questions"]}),a.jsxs("span",{children:[a.jsx(ql,{size:12})," ",H.duree," min"]})]}),!ve&&a.jsxs("button",{className:"sd-quiz-play-btn",children:[a.jsx(uc,{size:14})," Commencer"]}),ve&&a.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:I=>{I.stopPropagation(),e("/premium")},children:[a.jsx(Yg,{size:14})," Dbloquer"]})]},H.id)})})]}),r&&r.totalQuizPasses===0&&(!y||y.totalRessourcesVues===0)&&a.jsxs("div",{className:"sd-empty-state",children:[a.jsx(ev,{size:48}),a.jsx("h3",{children:"Commencez votre parcours !"}),a.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),p.length>0&&a.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e(`/quiz/${p[0].id}`),children:[a.jsx(uc,{size:18})," Passer un quiz"]})]})]}),E==="progression"&&a.jsxs("div",{className:"sd-progression",children:[a.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(sc,{size:18})," Avancement global"]}),a.jsx(WC,{pourcentage:y?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),a.jsxs("div",{className:"sd-prog-stats-row",children:[a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsx("span",{className:"sd-prog-stat-number",children:y?.totalRessourcesVues||0}),a.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsx("span",{className:"sd-prog-stat-number",children:y?.totalQuizReussis||0}),a.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsx("span",{className:"sd-prog-stat-number",children:y?.disciplinesCommencees||0}),a.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),a.jsxs("div",{className:"sd-prog-stat-item",children:[a.jsxs("span",{className:"sd-prog-stat-number",children:[" ",y?.streakActuel||0]}),a.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",y?.meilleurStreak||0,")"]})]})]})]}),y&&y.parDiscipline.length>0?a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(ms,{size:18})," Par discipline"]}),a.jsx("div",{className:"sd-prog-disciplines",children:y.parDiscipline.map(H=>a.jsxs("div",{className:"sd-prog-disc-card",children:[a.jsxs("div",{className:"sd-prog-disc-header",children:[a.jsx("span",{className:"sd-prog-disc-name",children:H.disciplineNom}),H.pourcentage>=100&&a.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),a.jsx(WC,{pourcentage:H.pourcentage,size:"md",showPercent:!0}),a.jsxs("div",{className:"sd-prog-disc-details",children:[a.jsxs("span",{children:[a.jsx(Dl,{size:12})," ",H.ressourcesVues.length,"/",H.totalRessources," ressources"]}),a.jsxs("span",{children:[a.jsx(Ot,{size:12})," ",H.quizReussis.length,"/",H.totalQuiz," quiz russis"]})]})]},H.disciplineId))})]}):a.jsxs("div",{className:"sd-empty-state",children:[a.jsx(Dl,{size:48}),a.jsx("h3",{children:"Aucune progression enregistre"}),a.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),l.length>0&&a.jsxs("div",{className:"sd-chart-card",children:[a.jsxs("h3",{className:"sd-section-title",children:[a.jsx(ev,{size:18})," Performance quiz par discipline"]}),a.jsx("div",{className:"sd-disc-list",children:l.map(H=>a.jsxs("div",{className:"sd-disc-card",children:[a.jsxs("div",{className:"sd-disc-header",children:[a.jsx("span",{className:"sd-disc-name",children:H.disciplineNom}),a.jsxs("span",{className:"sd-disc-tendance",children:[H.tendance==="up"&&a.jsx(sc,{size:16,className:"tendance-up"}),H.tendance==="down"&&a.jsx(RP,{size:16,className:"tendance-down"}),H.tendance==="stable"&&a.jsx(LP,{size:16,className:"tendance-stable"})]})]}),a.jsxs("div",{className:"sd-disc-stats",children:[a.jsxs("div",{className:"sd-disc-stat",children:[a.jsxs("span",{className:"sd-disc-stat-value",style:{color:Cl(H.moyenne)},children:[H.moyenne,"%"]}),a.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),a.jsxs("div",{className:"sd-disc-stat",children:[a.jsx("span",{className:"sd-disc-stat-value",children:H.nombreQuiz}),a.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),a.jsxs("div",{className:"sd-disc-stat",children:[a.jsxs("span",{className:"sd-disc-stat-value",children:[H.meilleurScore,"%"]}),a.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),a.jsxs("div",{className:"sd-disc-stat",children:[a.jsxs("span",{className:"sd-disc-stat-value",children:[H.quizReussis,"/",H.nombreQuiz]}),a.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),a.jsx("div",{className:"sd-disc-bar",children:a.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${H.moyenne}%`,background:Cl(H.moyenne)}})})]},H.disciplineId))})]})]}),E==="history"&&a.jsx("div",{className:"sd-history",children:m.length===0?a.jsxs("div",{className:"sd-empty-state",children:[a.jsx(tv,{size:48}),a.jsx("h3",{children:"Aucun quiz pass"}),a.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):a.jsx("div",{className:"sd-history-list",children:m.map(H=>{const ve=H.datePassage?.toDate?H.datePassage.toDate():new Date(H.datePassage);return a.jsxs("div",{className:`sd-history-item ${H.reussi?"success":"fail"}`,children:[a.jsx("div",{className:`sd-history-icon ${H.reussi?"success":"fail"}`,children:H.reussi?a.jsx(Ot,{size:20}):a.jsx(Kg,{size:20})}),a.jsxs("div",{className:"sd-history-content",children:[a.jsxs("div",{className:"sd-history-top",children:[a.jsx("span",{className:"sd-history-title",children:H.quizTitre}),a.jsx("span",{className:"sd-history-discipline",children:H.disciplineNom})]}),a.jsxs("div",{className:"sd-history-meta",children:[a.jsxs("span",{children:[a.jsx(tv,{size:12}),ve.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),a.jsxs("span",{children:[a.jsx(ql,{size:12})," ",y2(H.tempsEcoule)]}),a.jsxs("span",{children:[a.jsx(Ot,{size:12})," ",H.bonnesReponses,"/",H.nombreQuestions]})]})]}),a.jsxs("div",{className:"sd-history-score",style:{color:Cl(H.pourcentage)},children:[a.jsxs("span",{className:"sd-history-score-value",children:[H.pourcentage,"%"]}),a.jsx("span",{className:"sd-history-score-label",children:x2(H.pourcentage)})]})]},H.id)})})}),E==="badges"&&a.jsxs("div",{className:"sd-badges",children:[a.jsxs("div",{className:"sd-badges-summary",children:[a.jsxs("div",{className:"sd-badges-circle",children:[a.jsx("span",{className:"sd-badges-count",children:ue.length}),a.jsxs("span",{className:"sd-badges-total",children:["/ ",Q]})]}),a.jsx("p",{children:"badges obtenus"}),a.jsx("div",{className:"sd-badges-progress",children:a.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${ue.length/Q*100}%`}})})]}),a.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(H=>a.jsx("button",{className:`sd-badge-filter-btn ${w===H.key?"active":""}`,onClick:()=>S(H.key),children:H.label},H.key))}),a.jsx("div",{className:"sd-badges-grid",children:J.map(H=>a.jsxs("div",{className:`sd-badge-card ${H.obtenu?"obtained":"locked"}`,children:[a.jsx("span",{className:"sd-badge-icon",children:H.icone}),a.jsx("h4",{className:"sd-badge-name",children:H.nom}),a.jsx("p",{className:"sd-badge-description",children:H.description}),a.jsx("span",{className:"sd-badge-condition",children:H.condition}),H.obtenu&&a.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),a.jsx("span",{className:"sd-badge-category",children:H.categorie})]},H.id))}),J.length===0&&a.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[a.jsx(Jy,{size:36}),a.jsx("h3",{children:"Aucun badge dans cette catgorie"}),a.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},PK=()=>{const{currentUser:e}=Ht(),t=Zr(),[r,n]=j.useState(null),[l,o]=j.useState(!0),[u,f]=j.useState(null),m=["L","M","M","J","V","S","D"],h=j.useCallback(async()=>{if(e?.uid)try{o(!0),f(null);const C=await qb(e.uid);n(C)}catch(C){console.error("Erreur chargement suivi:",C),f("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[e?.uid]);j.useEffect(()=>{h()},[h]);const p=(()=>{const C=new Date().getDay();return C===0?6:C-1})();if(l)return a.jsx("div",{className:"suivi-page",children:a.jsx("div",{className:"suivi-container",children:a.jsxs("div",{className:"suivi-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(u)return a.jsx("div",{className:"suivi-page",children:a.jsx("div",{className:"suivi-container",children:a.jsxs("div",{className:"suivi-error",children:[a.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),a.jsx("p",{className:"suivi-error-text",children:u}),a.jsx("button",{className:"suivi-btn-retry",onClick:h,children:" Ressayer"})]})})});if(!r)return null;const{lacunes:v,recommandations:y,streak:b,objectifs:_,scoreGlobal:N}=r,w=2*Math.PI*40,S=w-N/100*w,O=N>=60?"#10b981":N>=30?"#f59e0b":"#ef4444";return a.jsx("div",{className:"suivi-page",children:a.jsxs("div",{className:"suivi-container",children:[a.jsx("div",{className:"suivi-header",children:a.jsxs("div",{className:"suivi-header-content",children:[a.jsxs("div",{children:[a.jsx("h1",{children:" Mes points  amliorer"}),a.jsx("p",{className:"suivi-motivation",children:YY(N)})]}),a.jsxs("div",{className:"score-global-circle",children:[a.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),a.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:O,strokeDasharray:w,strokeDashoffset:S}),a.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:N})]}),a.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),a.jsxs("div",{className:"streak-card",children:[a.jsxs("div",{className:"streak-header",children:[a.jsx("span",{className:"streak-flamme",children:b.streakActuel>0?"":""}),a.jsxs("div",{children:[a.jsx("div",{className:"streak-nombre",children:b.streakActuel}),a.jsx("div",{className:"streak-label",children:b.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),a.jsx("div",{className:"streak-semaine",children:m.map((C,E)=>a.jsxs("div",{className:"streak-jour",children:[a.jsx("span",{className:"streak-jour-label",children:C}),a.jsx("div",{className:`streak-jour-indicateur ${b.semaineCourante[E]?"actif":"inactif"} ${E===p?"aujourd-hui":""}`,children:b.semaineCourante[E]?"":""})]},E))}),a.jsxs("div",{className:"streak-stats",children:[a.jsxs("div",{className:"streak-stat",children:[a.jsx("span",{className:"streak-stat-icon",children:""}),a.jsx("span",{className:"streak-stat-value",children:b.meilleurStreak}),a.jsx("span",{className:"streak-stat-label",children:"record"})]}),a.jsxs("div",{className:"streak-stat",children:[a.jsx("span",{className:"streak-stat-icon",children:""}),a.jsx("span",{className:"streak-stat-value",children:b.totalJoursActifs}),a.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),b.dernierJourActif&&a.jsxs("div",{className:"streak-stat",children:[a.jsx("span",{className:"streak-stat-icon",children:""}),a.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(b.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),a.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",a.jsx("span",{className:"suivi-section-badge",children:_.length})]}),_.length>0?a.jsx("div",{className:"objectifs-grid",children:_.map(C=>{const E=KY(C);return a.jsxs("div",{className:`objectif-card ${C.statut==="atteint"?"atteint":""}`,children:[a.jsxs("div",{className:"objectif-header",children:[a.jsx("span",{className:"objectif-titre",children:C.titre}),C.recompense&&a.jsx("span",{className:"objectif-recompense",children:C.recompense})]}),a.jsx("p",{className:"objectif-description",children:C.description}),a.jsxs("div",{className:"objectif-progress",children:[a.jsxs("div",{className:"objectif-progress-labels",children:[a.jsxs("span",{className:"objectif-progress-value",children:[C.progression," / ",C.cible]}),a.jsxs("span",{className:"objectif-progress-cible",children:[E,"%"]})]}),a.jsx("div",{className:"objectif-progress-track",children:a.jsx("div",{className:`objectif-progress-fill ${C.statut==="atteint"?"atteint":""}`,style:{width:`${E}%`}})})]}),a.jsx("p",{className:`objectif-statut ${C.statut}`,children:C.statut==="atteint"?" Objectif atteint !":C.statut==="en_cours"?" En cours...":" Non commenc"})]},C.id)})}):a.jsxs("div",{className:"suivi-empty",children:[a.jsx("div",{className:"suivi-empty-icon",children:""}),a.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),a.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),a.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",v.length>0&&a.jsx("span",{className:"suivi-section-badge",children:v.length})]}),v.length>0?a.jsx("div",{className:"lacunes-grid",children:v.map(C=>a.jsxs("div",{className:`lacune-card ${C.niveauUrgence}`,children:[a.jsxs("div",{className:"lacune-card-header",children:[a.jsx("span",{className:"lacune-discipline",children:C.disciplineNom}),a.jsx("span",{className:`lacune-badge ${C.niveauUrgence}`,children:OM(C.niveauUrgence)})]}),a.jsxs("div",{className:"lacune-score-bar",children:[a.jsxs("div",{className:"lacune-score-labels",children:[a.jsxs("span",{className:"lacune-score-value",style:{color:If(C.niveauUrgence)},children:[C.moyenne,"/20"]}),a.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),a.jsx("div",{className:"lacune-progress-track",children:a.jsx("div",{className:`lacune-progress-fill ${C.niveauUrgence}`,style:{width:`${C.moyenne/20*100}%`}})})]}),a.jsxs("div",{className:"lacune-details",children:[a.jsxs("span",{className:"lacune-detail-tag",children:[zM(C.tendance)," ",C.tendance]}),a.jsxs("span",{className:"lacune-detail-tag",children:[" ",C.nombreQuiz," quiz"]}),a.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",C.scoreDetails.dernierScore,"/20"]})]})]},C.id))}):a.jsxs("div",{className:"suivi-empty",children:[a.jsx("div",{className:"suivi-empty-icon",children:""}),a.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),a.jsx("p",{className:"suivi-empty-text",children:N>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),a.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),y.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",a.jsx("span",{className:"suivi-section-badge",children:y.length})]}),a.jsx("div",{className:"recommandations-list",children:y.map(C=>a.jsxs("div",{className:"recommandation-card",children:[a.jsx("div",{className:"recommandation-priorite",children:C.priorite}),a.jsxs("div",{className:"recommandation-content",children:[a.jsx("p",{className:"recommandation-titre",children:C.titre}),a.jsx("p",{className:"recommandation-description",children:C.description}),a.jsx("span",{className:"recommandation-discipline-tag",children:C.disciplineNom})]})]},C.id))})]}),a.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:a.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),children:" Passer un quiz maintenant"})})]})})},qK=()=>{const e=new Date,t=e.getFullYear(),n=e.getMonth()>=9?t:t-1,l=[];for(let o=-1;o<=3;o++){const u=n+o;l.push(`${u}-${u+1}`)}return l},ZC=qK(),nc=()=>{const e=new Date,t=e.getFullYear(),n=e.getMonth()>=9?t:t-1;return`${n}-${n+1}`},JC=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],RK=({onSelectGroupe:e})=>{const{currentUser:t}=Ht(),[r,n]=j.useState([]),[l,o]=j.useState(new Map),[u,f]=j.useState([]),[m,h]=j.useState(!0),[p,v]=j.useState(null),[y,b]=j.useState(!1),[_,N]=j.useState(!1),[w,S]=j.useState(null),[O,C]=j.useState(null),[E,z]=j.useState(null),[M,L]=j.useState(!1),[T,k]=j.useState(null),[Y,X]=j.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:nc()}),[B,le]=j.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:nc()}),[ue,Q]=j.useState("actif");j.useEffect(()=>{(async()=>{try{const R=await Ti.getAll();f(R.map(ae=>({id:ae.id,nom:ae.nom,classe:ae.classe||""})))}catch(R){console.warn(" Impossible de charger les disciplines:",R)}})()},[]);const P=j.useCallback(async()=>{if(t?.uid)try{h(!0),v(null);const F=await qM(t.uid);n(F);const R=new Map;for(const ae of F)if(ae.statut==="actif")try{const G=await Rb(ae.id);R.set(ae.id,G)}catch{console.warn(`Stats indisponibles pour ${ae.nom}`)}o(R)}catch(F){console.error("Erreur chargement groupes:",F),v("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{h(!1)}},[t?.uid]);j.useEffect(()=>{P()},[P]);const J=(F,R=!1)=>{const ae=u.find(xe=>xe.id===F),G=ae?`${ae.nom}${ae.classe?` (${ae.classe})`:""}`:"";R?le(xe=>({...xe,matiereId:F,matiereNom:G})):X(xe=>({...xe,matiereId:F,matiereNom:G}))},H=async F=>{if(F.preventDefault(),!(!t?.uid||!Y.nom.trim()||!Y.matiereId))try{N(!0),await yK(t.uid,t.displayName||t.email||"Professeur",Y),X({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:nc()}),b(!1),k("Groupe cr avec succs !"),setTimeout(()=>k(null),3e3),await P()}catch(R){v(R.message||"Erreur lors de la cration du groupe.")}finally{N(!1)}},ve=F=>{z(F),le({nom:F.nom,description:F.description||"",matiereId:F.matiereId,matiereNom:F.matiereNom,classeNiveau:F.classeNiveau,anneeScolaire:F.anneeScolaire}),b(!1)},I=()=>{z(null),le({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:nc()})},ge=async F=>{if(F.preventDefault(),!(!E||!B.nom.trim()||!B.matiereId))try{L(!0),await RM(E.id,{nom:B.nom.trim(),description:B.description?.trim()||"",matiereId:B.matiereId,matiereNom:B.matiereNom,classeNiveau:B.classeNiveau,anneeScolaire:B.anneeScolaire}),z(null),k("Groupe modifi avec succs !"),setTimeout(()=>k(null),3e3),await P()}catch(R){v(R.message||"Erreur lors de la modification du groupe.")}finally{L(!1)}},ee=async F=>{try{await navigator.clipboard.writeText(F),S(F),setTimeout(()=>S(null),2e3)}catch{const R=document.createElement("textarea");R.value=F,document.body.appendChild(R),R.select(),document.execCommand("copy"),document.body.removeChild(R),S(F),setTimeout(()=>S(null),2e3)}},fe=async F=>{try{await bK(F),C(null),await P()}catch(R){v(R.message)}},ye=async F=>{try{await jK(F),await P()}catch(R){v(R.message)}},he=async F=>{try{await NK(F),await P()}catch(R){v(R.message)}},$=(F,R)=>{X(ae=>({...ae,[F]:R}))},ce=(F,R)=>{le(ae=>({...ae,[F]:R}))},Se=r.filter(F=>ue==="tous"?!0:F.statut===ue),ne=(F,R,ae)=>a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:F,children:"Discipline / Matire *"}),a.jsxs("select",{id:F,value:R,onChange:G=>ae(G.target.value),className:"prof-select",required:!0,children:[a.jsx("option",{value:"",children:" Slectionner une discipline "}),u.map(G=>a.jsxs("option",{value:G.id,children:[G.nom,G.classe?` (${G.classe})`:""]},G.id))]}),u.length===0&&a.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return m?a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):a.jsxs("div",{className:"groupe-manager",children:[a.jsxs("div",{className:"groupe-manager-header",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),a.jsxs("p",{className:"groupe-manager-subtitle",children:[r.length," groupe",r.length!==1?"s":"","  Anne ",nc()]})]}),a.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{b(!y),E&&I()},children:y?" Annuler":" Nouveau groupe"})]}),p&&a.jsxs("div",{className:"prof-alert prof-alert-error",children:[a.jsx("span",{children:""})," ",p,a.jsx("button",{onClick:()=>v(null),className:"prof-alert-close",children:""})]}),T&&a.jsxs("div",{className:"prof-alert prof-alert-success",children:[a.jsx("span",{children:""})," ",T,a.jsx("button",{onClick:()=>k(null),className:"prof-alert-close",children:""})]}),y&&a.jsxs("div",{className:"groupe-form-container",children:[a.jsx("h3",{children:"Crer un nouveau groupe-classe"}),a.jsxs("form",{onSubmit:H,className:"groupe-form",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),a.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:Y.nom,onChange:F=>$("nom",F.target.value),required:!0,className:"prof-input",maxLength:60})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),a.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:Y.description||"",onChange:F=>$("description",F.target.value),className:"prof-input",maxLength:120})]}),a.jsxs("div",{className:"prof-form-row",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),a.jsx("select",{id:"groupe-niveau",value:Y.classeNiveau,onChange:F=>$("classeNiveau",F.target.value),className:"prof-select",children:JC.map(F=>a.jsx("option",{value:F.value,children:F.label},F.value))})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),a.jsx("select",{id:"groupe-annee",value:Y.anneeScolaire,onChange:F=>$("anneeScolaire",F.target.value),className:"prof-select",children:ZC.map(F=>a.jsx("option",{value:F,children:F},F))})]})]}),ne("groupe-discipline",Y.matiereId,F=>J(F,!1)),a.jsx("div",{className:"prof-form-actions",children:a.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:_||!Y.nom.trim()||!Y.matiereId,children:_?" Cration...":" Crer le groupe"})})]})]}),E&&a.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[a.jsxs("h3",{children:[" Modifier le groupe : ",E.nom]}),a.jsxs("form",{onSubmit:ge,className:"groupe-form",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),a.jsx("input",{id:"edit-groupe-nom",type:"text",value:B.nom,onChange:F=>ce("nom",F.target.value),required:!0,className:"prof-input",maxLength:60})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),a.jsx("input",{id:"edit-groupe-desc",type:"text",value:B.description||"",onChange:F=>ce("description",F.target.value),className:"prof-input",maxLength:120})]}),a.jsxs("div",{className:"prof-form-row",children:[a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),a.jsx("select",{id:"edit-groupe-niveau",value:B.classeNiveau,onChange:F=>ce("classeNiveau",F.target.value),className:"prof-select",children:JC.map(F=>a.jsx("option",{value:F.value,children:F.label},F.value))})]}),a.jsxs("div",{className:"prof-form-group",children:[a.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),a.jsx("select",{id:"edit-groupe-annee",value:B.anneeScolaire,onChange:F=>ce("anneeScolaire",F.target.value),className:"prof-select",children:ZC.map(F=>a.jsx("option",{value:F,children:F},F))})]})]}),ne("edit-groupe-discipline",B.matiereId,F=>J(F,!0)),a.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[a.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:M||!B.nom.trim()||!B.matiereId,children:M?" Enregistrement...":" Enregistrer"}),a.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:I,disabled:M,children:" Annuler"})]})]})]}),a.jsxs("div",{className:"groupe-filtres",children:[a.jsxs("button",{className:`prof-filtre-btn ${ue==="actif"?"active":""}`,onClick:()=>Q("actif"),children:["Actifs (",r.filter(F=>F.statut==="actif").length,")"]}),a.jsxs("button",{className:`prof-filtre-btn ${ue==="archive"?"active":""}`,onClick:()=>Q("archive"),children:["Archivs (",r.filter(F=>F.statut==="archive").length,")"]}),a.jsxs("button",{className:`prof-filtre-btn ${ue==="tous"?"active":""}`,onClick:()=>Q("tous"),children:["Tous (",r.length,")"]})]}),Se.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:ue==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),a.jsx("p",{children:ue==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),ue!=="archive"&&a.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>b(!0),children:" Crer mon premier groupe"})]}):a.jsx("div",{className:"groupe-grid",children:Se.map(F=>{const R=l.get(F.id),ae=E?.id===F.id;return a.jsxs("div",{className:`groupe-card ${F.statut==="archive"?"groupe-card-archive":""} ${ae?"groupe-card-editing":""}`,children:[a.jsxs("div",{className:"groupe-card-header",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"groupe-card-titre",children:F.nom}),a.jsx("span",{className:"groupe-card-matiere",children:F.matiereNom})]}),a.jsx("span",{className:`groupe-badge groupe-badge-${F.statut}`,children:F.statut==="actif"?" Actif":" Archiv"})]}),F.description&&a.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:F.description}),a.jsxs("div",{className:"groupe-card-infos",children:[a.jsxs("span",{children:[" ",F.classeNiveau]}),a.jsxs("span",{children:[" ",F.anneeScolaire]}),a.jsxs("span",{children:[" ",F.nombreInscrits," lve",F.nombreInscrits!==1?"s":""]})]}),a.jsxs("div",{className:"groupe-card-code",children:[a.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),a.jsxs("div",{className:"groupe-code-box",children:[a.jsx("code",{className:"groupe-code-value",children:F.codeInvitation}),a.jsx("button",{className:"prof-btn-icon",onClick:G=>{G.stopPropagation(),ee(F.codeInvitation)},title:"Copier le code",children:w===F.codeInvitation?"":""}),F.statut==="actif"&&a.jsx("button",{className:"prof-btn-icon",onClick:G=>{G.stopPropagation(),he(F.id)},title:"Rgnrer le code",children:""})]})]}),R&&R.nombreEleves>0&&a.jsxs("div",{className:"groupe-card-stats",children:[a.jsxs("div",{className:"groupe-stat-item",children:[a.jsx("span",{className:"groupe-stat-value",children:R.moyenneClasse}),a.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),a.jsxs("div",{className:"groupe-stat-item",children:[a.jsxs("span",{className:"groupe-stat-value",children:[R.tauxReussite,"%"]}),a.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),a.jsxs("div",{className:"groupe-stat-item",children:[a.jsx("span",{className:"groupe-stat-value",children:R.elevesEnDifficulte}),a.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),a.jsxs("div",{className:"groupe-card-actions",children:[F.statut==="actif"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>e(F),children:" Voir dtails"}),a.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>ve(F),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),a.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>ye(F.id),children:" Archiver"})]}),O===F.id?a.jsxs("div",{className:"groupe-confirm-suppression",children:[a.jsx("span",{children:"Confirmer ?"}),a.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>fe(F.id),children:"Oui, supprimer"}),a.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>C(null),children:"Non"})]}):a.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>C(F.id),children:" Supprimer"})]})]},F.id)})})]})},LK=({groupe:e,onRetour:t})=>{const[r,n]=j.useState(null),[l,o]=j.useState([]),[u,f]=j.useState([]),[m,h]=j.useState([]),[p,v]=j.useState(null),[y,b]=j.useState(!0),[_,N]=j.useState(null),[w,S]=j.useState("apercu"),[O,C]=j.useState("moyenne_desc"),[E,z]=j.useState(null),[M,L]=j.useState(null),[T,k]=j.useState(!1),[Y,X]=j.useState(null),B=j.useCallback(async()=>{try{b(!0),N(null);const[I,ge,ee]=await Promise.all([Rb(e.id),AK(e.id),EK(e.matiereId)]);n(I),o(ge),h(ee);const fe=OK(ge,e.nom);f(fe)}catch(I){console.error("Erreur chargement dtail groupe:",I),N("Impossible de charger les donnes du groupe.")}finally{b(!1)}},[e.id,e.matiereId,e.nom]);j.useEffect(()=>{B()},[B]);const le=async I=>{try{k(!0),L(I);const ge=await CK(e.id,I);v(ge)}catch(ge){console.error("Erreur analyse quiz:",ge)}finally{k(!1)}},ue=()=>{const I=zK(l,e.nom),ge=`PedaClic_${e.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;DK(I,ge)},Q=async I=>{try{X(I);const ee=(await Lm(e.id)).find(fe=>fe.eleveId===I);ee&&(await SK(ee.id,e.id),await B())}catch(ge){N(ge.message)}finally{X(null)}},P=[...l].sort((I,ge)=>{switch(O){case"moyenne_desc":return ge.moyenne-I.moyenne;case"moyenne_asc":return I.moyenne-ge.moyenne;case"nom":return I.eleveNom.localeCompare(ge.eleveNom);case"streak":return ge.streak.actuel-I.streak.actuel;case"quiz_count":return ge.totalQuiz-I.totalQuiz;default:return 0}}),J=I=>I>=16?"prof-note-excellent":I>=12?"prof-note-bien":I>=10?"prof-note-passable":I>=8?"prof-note-insuffisant":"prof-note-critique",H=I=>{switch(I){case"hausse":return"";case"baisse":return"";default:return""}},ve=I=>{switch(I){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return y?a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsxs("p",{children:['Chargement des donnes de "',e.nom,'"...']})]}):a.jsxs("div",{className:"groupe-detail",children:[a.jsxs("div",{className:"groupe-detail-header",children:[a.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:t,children:" Retour aux groupes"}),a.jsxs("div",{className:"groupe-detail-titre-section",children:[a.jsx("h2",{className:"groupe-detail-titre",children:e.nom}),a.jsxs("p",{className:"groupe-detail-subtitle",children:[e.matiereNom,"  ",e.classeNiveau,"  ",e.anneeScolaire]})]}),a.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:ue,children:" Export CSV"})]}),_&&a.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",_,a.jsx("button",{onClick:()=>N(null),className:"prof-alert-close",children:""})]}),a.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:l.length},{id:"quiz",label:" Quiz",count:m.length},{id:"alertes",label:" Alertes",count:u.length}].map(I=>a.jsxs("button",{className:`groupe-onglet ${w===I.id?"active":""}`,onClick:()=>S(I.id),children:[I.label,I.count!==null&&I.count>0&&a.jsx("span",{className:"groupe-onglet-badge",children:I.count})]},I.id))}),w==="apercu"&&r&&a.jsxs("div",{className:"groupe-apercu",children:[a.jsxs("div",{className:"groupe-stats-grid",children:[a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsxs("span",{className:`groupe-stat-card-value ${J(r.moyenneClasse)}`,children:[r.moyenneClasse,"/20"]}),a.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsxs("span",{className:"groupe-stat-card-value",children:[r.tauxReussite,"%"]}),a.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsx("span",{className:"groupe-stat-card-value",children:r.nombreEleves}),a.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsx("span",{className:"groupe-stat-card-value",children:r.totalQuizPasses}),a.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsxs("span",{className:"groupe-stat-card-value",children:[r.tauxParticipation,"%"]}),a.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),a.jsxs("div",{className:"groupe-stat-card",children:[a.jsx("div",{className:"groupe-stat-card-icon",children:""}),a.jsxs("div",{className:"groupe-stat-card-content",children:[a.jsx("span",{className:`groupe-stat-card-value ${r.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:r.elevesEnDifficulte}),a.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),a.jsx("div",{className:"groupe-apercu-notes",children:a.jsxs("div",{className:"groupe-note-range",children:[a.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),a.jsxs("span",{className:"prof-note-critique",children:[r.pireNote,"/20"]}),a.jsx("div",{className:"groupe-note-barre",children:a.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${r.pireNote/20*100}%`,width:`${(r.meilleureNote-r.pireNote)/20*100}%`}})}),a.jsxs("span",{className:"prof-note-excellent",children:[r.meilleureNote,"/20"]})]})}),l.length>=3&&a.jsxs("div",{className:"groupe-apercu-classement",children:[a.jsxs("div",{className:"groupe-classement-section",children:[a.jsx("h4",{children:" Top 3"}),l.slice(0,3).map((I,ge)=>a.jsxs("div",{className:"groupe-classement-item",children:[a.jsx("span",{className:"groupe-classement-rang",children:ge===0?"":ge===1?"":""}),a.jsx("span",{className:"groupe-classement-nom",children:I.eleveNom}),a.jsxs("span",{className:`groupe-classement-note ${J(I.moyenne)}`,children:[I.moyenne,"/20"]})]},I.eleveId))]}),a.jsxs("div",{className:"groupe-classement-section",children:[a.jsx("h4",{children:"  surveiller"}),l.filter(I=>I.moyenne<8&&I.totalQuiz>0).slice(0,3).map(I=>a.jsxs("div",{className:"groupe-classement-item",children:[a.jsx("span",{className:"groupe-classement-rang",children:""}),a.jsx("span",{className:"groupe-classement-nom",children:I.eleveNom}),a.jsxs("span",{className:`groupe-classement-note ${J(I.moyenne)}`,children:[I.moyenne,"/20"]})]},I.eleveId)),l.filter(I=>I.moyenne<8&&I.totalQuiz>0).length===0&&a.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),w==="eleves"&&a.jsxs("div",{className:"groupe-eleves",children:[a.jsxs("div",{className:"groupe-eleves-toolbar",children:[a.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),a.jsxs("select",{id:"tri-eleves",value:O,onChange:I=>C(I.target.value),className:"prof-select prof-select-sm",children:[a.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),a.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),a.jsx("option",{value:"nom",children:"Nom (A-Z)"}),a.jsx("option",{value:"streak",children:"Streak ()"}),a.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),a.jsxs("span",{className:"groupe-eleves-count",children:[l.length," lve",l.length!==1?"s":""]})]}),l.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Aucun lve inscrit"}),a.jsxs("p",{children:["Partagez le code ",a.jsx("strong",{children:e.codeInvitation}),"  vos lves."]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"groupe-eleves-table-wrapper",children:a.jsxs("table",{className:"groupe-eleves-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"lve"}),a.jsx("th",{children:"Moyenne"}),a.jsx("th",{children:"Quiz"}),a.jsx("th",{children:"Russite"}),a.jsx("th",{children:"Streak"}),a.jsx("th",{children:"Tendance"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:P.map((I,ge)=>a.jsxs("tr",{className:`${E===I.eleveId?"groupe-eleve-row-active":""}`,children:[a.jsx("td",{className:"groupe-eleve-rang",children:ge+1}),a.jsx("td",{className:"groupe-eleve-nom-cell",children:a.jsxs("div",{children:[a.jsx("strong",{children:I.eleveNom}),a.jsx("span",{className:"groupe-eleve-email",children:I.eleveEmail})]})}),a.jsx("td",{children:a.jsxs("span",{className:`groupe-note-badge ${J(I.moyenne)}`,children:[I.moyenne,"/20"]})}),a.jsx("td",{children:I.totalQuiz}),a.jsxs("td",{children:[I.tauxReussite,"%"]}),a.jsx("td",{children:a.jsxs("span",{className:"groupe-streak",children:[" ",I.streak.actuel,"j"]})}),a.jsxs("td",{children:[H(I.tendance)," ",I.tendance]}),a.jsxs("td",{className:"groupe-eleve-actions",children:[a.jsx("button",{className:"prof-btn-icon",onClick:()=>z(E===I.eleveId?null:I.eleveId),title:"Voir dtails",children:E===I.eleveId?"":""}),a.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>Q(I.eleveId),disabled:Y===I.eleveId,title:"Retirer du groupe",children:Y===I.eleveId?"":""})]})]},I.eleveId))})]})}),E&&(()=>{const I=l.find(ge=>ge.eleveId===E);return I?a.jsxs("div",{className:"groupe-eleve-detail",children:[a.jsxs("div",{className:"groupe-eleve-detail-header",children:[a.jsxs("h3",{children:[" Dtail  ",I.eleveNom]}),a.jsx("button",{className:"prof-btn-icon",onClick:()=>z(null),children:""})]}),a.jsxs("div",{className:"groupe-eleve-detail-grid",children:[a.jsxs("div",{className:"groupe-eleve-detail-card",children:[a.jsx("h4",{children:"Score global"}),a.jsx("div",{className:"groupe-eleve-score-circle",children:a.jsxs("span",{className:J(I.scoreGlobal/5),children:[I.scoreGlobal,"/100"]})})]}),a.jsxs("div",{className:"groupe-eleve-detail-card",children:[a.jsx("h4",{children:" Streak"}),a.jsxs("p",{children:["Actuel : ",a.jsxs("strong",{children:[I.streak.actuel," jour",I.streak.actuel!==1?"s":""]})]}),a.jsxs("p",{children:["Meilleur : ",I.streak.meilleur," jours"]})]}),a.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[a.jsx("h4",{children:" Lacunes dtectes"}),I.lacunes.length===0?a.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):a.jsx("ul",{className:"groupe-lacunes-liste",children:I.lacunes.map((ge,ee)=>a.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${ge.niveauUrgence}`,children:[a.jsxs("span",{className:"groupe-lacune-nom",children:[ge.disciplineNom,ge.chapitre&&`  ${ge.chapitre}`]}),a.jsxs("span",{className:"groupe-lacune-moyenne",children:[ge.moyenne,"/20"]}),a.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${ge.niveauUrgence}`,children:ge.niveauUrgence})]},ee))})]})]})]}):null})()]})]}),w==="quiz"&&a.jsxs("div",{className:"groupe-quiz",children:[a.jsxs("div",{className:"groupe-quiz-selector",children:[a.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),a.jsxs("select",{id:"select-quiz",value:M||"",onChange:I=>{I.target.value&&le(I.target.value)},className:"prof-select",children:[a.jsx("option",{value:"",children:" Choisir un quiz "}),m.map(I=>a.jsx("option",{value:I.id,children:I.titre},I.id))]})]}),!M&&a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Analyse par quiz"}),a.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),T&&a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Analyse en cours..."})]}),p&&!T&&a.jsxs("div",{className:"groupe-quiz-resultats",children:[a.jsxs("div",{className:"groupe-quiz-stats-header",children:[a.jsx("h3",{children:p.quizTitre}),a.jsxs("div",{className:"groupe-quiz-stats-grid",children:[a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsx("span",{className:"groupe-stat-mini-value",children:p.totalPassages}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsxs("span",{className:`groupe-stat-mini-value ${J(p.moyenneScore)}`,children:[p.moyenneScore,"/20"]}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsxs("span",{className:"groupe-stat-mini-value",children:[p.tauxReussite,"%"]}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),a.jsxs("div",{className:"groupe-stat-mini",children:[a.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(p.tempsEcouleMoyen/60),"min"]}),a.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),a.jsxs("div",{className:"groupe-quiz-questions",children:[a.jsx("h4",{children:" Questions les plus rates"}),p.questionsRatees.filter(I=>I.tauxEchec>30).map((I,ge)=>a.jsxs("div",{className:"groupe-quiz-question-card",children:[a.jsxs("div",{className:"groupe-quiz-question-header",children:[a.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",I.questionIndex+1]}),a.jsxs("span",{className:"groupe-quiz-question-echec",children:[I.tauxEchec,"% d'chec"]})]}),a.jsx("p",{className:"groupe-quiz-question-texte",children:I.questionTexte}),a.jsx("div",{className:"groupe-quiz-question-reponse",children:a.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",I.reponseCorrecte]})}),I.reponsesFrequentes.length>0&&a.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[a.jsx("span",{children:"Erreurs frquentes :"}),I.reponsesFrequentes.slice(0,2).map((ee,fe)=>a.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",ee.reponse," (",ee.nombre," lve",ee.nombre>1?"s":"",")"]},fe))]})]},ge)),p.questionsRatees.filter(I=>I.tauxEchec>30).length===0&&a.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),w==="alertes"&&a.jsx("div",{className:"groupe-alertes",children:u.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Aucune alerte"}),a.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):a.jsx("div",{className:"groupe-alertes-liste",children:u.map(I=>a.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${I.niveauUrgence}`,children:[a.jsxs("div",{className:"groupe-alerte-header",children:[a.jsx("span",{className:"groupe-alerte-emoji",children:ve(I.type)}),a.jsx("span",{className:"groupe-alerte-eleve",children:I.eleveNom}),a.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${I.niveauUrgence}`,children:I.niveauUrgence})]}),a.jsx("p",{className:"groupe-alerte-message",children:I.message}),a.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{S("eleves"),z(I.eleveId)},children:" Voir dtail"})]},I.id))})})]})},IK=()=>{const{currentUser:e}=Ht(),[t,r]=j.useState("overview"),[n,l]=j.useState(null),[o,u]=j.useState(0),[f,m]=j.useState(0),[h,p]=j.useState(0),[v,y]=j.useState(0),[b,_]=j.useState([]),[N,w]=j.useState(!0),S=j.useCallback(async()=>{if(e?.uid)try{w(!0);const z=(await qM(e.uid)).filter(X=>X.statut==="actif");u(z.length);let M=0,L=0,T=0,k=0;const Y=[];for(const X of z)try{const B=await Rb(X.id);M+=B.nombreEleves,B.nombreEleves>0&&(L+=B.moyenneClasse,T++),k+=B.elevesEnDifficulte,Y.push({...X,stats:B})}catch{Y.push({...X})}m(M),p(T>0?Math.round(L/T*10)/10:0),y(k),_(Y)}catch(E){console.error("Erreur chargement rsum prof:",E)}finally{w(!1)}},[e?.uid]);j.useEffect(()=>{S()},[S]);const O=E=>{l(E),r("detail")},C=()=>{l(null),r("groupes"),S()};return N?a.jsxs("div",{className:"prof-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement de votre espace professeur..."})]}):a.jsxs("div",{className:"prof-dashboard",children:[a.jsx("header",{className:"prof-dashboard-header",children:a.jsxs("div",{children:[a.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),a.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",e?.displayName||"Professeur"," "]})]})}),t!=="detail"&&a.jsxs("nav",{className:"prof-nav",children:[a.jsx("button",{className:`prof-nav-btn ${t==="overview"?"active":""}`,onClick:()=>r("overview"),children:" Vue d'ensemble"}),a.jsx("button",{className:`prof-nav-btn ${t==="groupes"?"active":""}`,onClick:()=>r("groupes"),children:" Mes groupes-classes"})]}),t==="overview"&&a.jsxs("div",{className:"prof-overview",children:[a.jsxs("div",{className:"prof-overview-cards",children:[a.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>r("groupes"),children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsx("span",{className:"prof-overview-card-value",children:o}),a.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",o!==1?"s":""," actif",o!==1?"s":""]})]})]}),a.jsxs("div",{className:"prof-overview-card",children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsx("span",{className:"prof-overview-card-value",children:f}),a.jsxs("span",{className:"prof-overview-card-label",children:["lve",f!==1?"s":""," inscrit",f!==1?"s":""]})]})]}),a.jsxs("div",{className:"prof-overview-card",children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),a.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),a.jsxs("div",{className:"prof-overview-card",children:[a.jsx("div",{className:"prof-overview-card-icon",children:""}),a.jsxs("div",{className:"prof-overview-card-content",children:[a.jsx("span",{className:`prof-overview-card-value ${v>0?"prof-note-critique":""}`,children:v}),a.jsxs("span",{className:"prof-overview-card-label",children:["lve",v!==1?"s":""," en difficult"]})]})]})]}),b.length===0?a.jsxs("div",{className:"prof-empty-state",children:[a.jsx("div",{className:"prof-empty-icon",children:""}),a.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),a.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),a.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>r("groupes"),children:" Crer un groupe-classe"})]}):a.jsxs("div",{className:"prof-overview-groupes",children:[a.jsx("h2",{children:"Mes groupes"}),a.jsx("div",{className:"prof-overview-groupes-grid",children:b.map(E=>a.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>O(E),children:[a.jsxs("div",{className:"prof-overview-groupe-header",children:[a.jsx("h3",{children:E.nom}),a.jsx("span",{className:"prof-overview-groupe-matiere",children:E.matiereNom})]}),E.stats&&a.jsxs("div",{className:"prof-overview-groupe-stats",children:[a.jsxs("div",{children:[a.jsx("span",{className:"prof-overview-groupe-stat-value",children:E.stats.nombreEleves}),a.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),a.jsxs("div",{children:[a.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[E.stats.moyenneClasse,"/20"]}),a.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),a.jsxs("div",{children:[a.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[E.stats.tauxReussite,"%"]}),a.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),a.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},E.id))})]})]}),t==="groupes"&&a.jsx(RK,{onSelectGroupe:O}),t==="detail"&&n&&a.jsx(LK,{groupe:n,onRetour:C})]})},BK=()=>{const{currentUser:e}=Ht(),t=e?.uid||"",r=e?.displayName||"Parent",[n,l]=j.useState([]),[o,u]=j.useState(null),[f,m]=j.useState(null),[h,p]=j.useState(!0),[v,y]=j.useState(!1),[b,_]=j.useState(null),[N,w]=j.useState(!1),[S,O]=j.useState(""),[C,E]=j.useState(!1),[z,M]=j.useState(null),[L,T]=j.useState(null),[k,Y]=j.useState("apercu");j.useEffect(()=>{X()},[t]),j.useEffect(()=>{o&&B(o)},[o]);const X=async()=>{try{p(!0),_(null);const Q=await aK(t);l(Q),Q.length===1&&u(Q[0].enfantId)}catch(Q){_("Erreur lors du chargement des enfants."),console.error(Q)}finally{p(!1)}},B=async Q=>{try{y(!0),_(null);const P=await sK(t,Q);m(P)}catch(P){_(P.message||"Erreur lors du chargement du suivi."),m(null)}finally{y(!1)}},le=async Q=>{if(Q.preventDefault(),M(null),T(null),!S.trim()){M("Veuillez saisir le code d'invitation.");return}try{E(!0);const P=await nK(t,S);T(`${P.enfantNom} a t ajout avec succs !`),O(""),w(!1),await X(),u(P.enfantId)}catch(P){M(P.message||"Erreur lors de la liaison.")}finally{E(!1)}},ue=async Q=>{if(window.confirm(`tes-vous sr de vouloir retirer ${Q.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await iK(Q.id,t),o===Q.enfantId&&(u(null),m(null)),await X()}catch(J){_(J.message||"Erreur lors de la suppression.")}};return h?a.jsxs("div",{className:"parent-loading",children:[a.jsx("div",{className:"parent-spinner"}),a.jsx("p",{children:"Chargement de votre espace parent..."})]}):a.jsxs("div",{className:"parent-dashboard",children:[a.jsxs("header",{className:"parent-header",children:[a.jsxs("div",{className:"parent-header-info",children:[a.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),a.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",a.jsx("strong",{children:r}),"  Suivez la progression de vos enfants"]})]}),a.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{w(!N),M(null),T(null)},children:" Ajouter un enfant"})]}),b&&a.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[a.jsxs("span",{children:[" ",b]}),a.jsx("button",{onClick:()=>_(null),children:""})]}),L&&a.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[a.jsxs("span",{children:[" ",L]}),a.jsx("button",{onClick:()=>T(null),children:""})]}),N&&a.jsxs("div",{className:"parent-form-liaison",children:[a.jsx("h3",{children:" Lier un enfant  votre compte"}),a.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),a.jsxs("form",{onSubmit:le,className:"parent-form",children:[a.jsxs("div",{className:"parent-form-group",children:[a.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),a.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:S,onChange:Q=>O(Q.target.value.toUpperCase()),maxLength:14,disabled:C,className:"parent-input"})]}),z&&a.jsxs("p",{className:"parent-form-erreur",children:[" ",z]}),a.jsxs("div",{className:"parent-form-actions",children:[a.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:C,children:C?"Vrification...":" Valider"}),a.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>w(!1),children:"Annuler"})]})]})]}),n.length===0?a.jsxs("div",{className:"parent-empty-state",children:[a.jsx("div",{className:"parent-empty-icon",children:""}),a.jsx("h2",{children:"Aucun enfant li"}),a.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),a.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>w(!0),children:" Ajouter mon premier enfant"})]}):a.jsxs("div",{className:"parent-content",children:[a.jsxs("aside",{className:"parent-sidebar",children:[a.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),a.jsx("ul",{className:"parent-enfants-liste",children:n.map(Q=>a.jsxs("li",{className:`parent-enfant-card ${o===Q.enfantId?"parent-enfant-actif":""}`,onClick:()=>u(Q.enfantId),children:[a.jsx("div",{className:"parent-enfant-avatar",children:Q.enfantNom.charAt(0).toUpperCase()}),a.jsxs("div",{className:"parent-enfant-info",children:[a.jsx("span",{className:"parent-enfant-nom",children:Q.enfantNom}),Q.enfantClasse&&a.jsx("span",{className:"parent-enfant-classe",children:Q.enfantClasse})]}),a.jsx("button",{className:"parent-enfant-supprimer",onClick:P=>{P.stopPropagation(),ue(Q)},title:"Retirer cet enfant",children:""})]},Q.id))})]}),a.jsx("main",{className:"parent-main",children:o?v?a.jsxs("div",{className:"parent-loading",children:[a.jsx("div",{className:"parent-spinner"}),a.jsx("p",{children:"Chargement du suivi..."})]}):f?a.jsxs("div",{className:"parent-dashboard-detail",children:[a.jsxs("div",{className:"parent-enfant-header",children:[a.jsxs("div",{className:"parent-enfant-header-info",children:[a.jsx("h2",{children:f.enfant.nom}),f.enfant.classe&&a.jsx("span",{className:"parent-badge",children:f.enfant.classe}),f.enfant.derniereConnexion&&a.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",Qg(f.enfant.derniereConnexion)]})]}),a.jsx("p",{className:"parent-message-motivation",children:fK(f.scoreGlobal)})]}),a.jsxs("div",{className:"parent-indicateurs",children:[a.jsxs("div",{className:"parent-card parent-card-score",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Score Global"}),a.jsxs("span",{className:`parent-card-value parent-score-${f.scoreGlobal>=60?"bon":f.scoreGlobal>=40?"moyen":"bas"}`,children:[f.scoreGlobal,"/100"]})]})]}),a.jsxs("div",{className:"parent-card parent-card-streak",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Streak"}),a.jsxs("span",{className:"parent-card-value",children:[f.streak.actuel," jour",f.streak.actuel>1?"s":""]})]})]}),a.jsxs("div",{className:"parent-card parent-card-lacunes",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Lacunes"}),a.jsxs("span",{className:"parent-card-value",children:[f.lacunes.length," matire",f.lacunes.length>1?"s":""]})]})]}),a.jsxs("div",{className:"parent-card parent-card-objectifs",children:[a.jsx("div",{className:"parent-card-icon",children:""}),a.jsxs("div",{className:"parent-card-content",children:[a.jsx("span",{className:"parent-card-label",children:"Objectifs"}),a.jsxs("span",{className:"parent-card-value",children:[f.objectifs.filter(Q=>Q.statut==="atteint").length,"/",f.objectifs.length]})]})]})]}),a.jsxs("div",{className:"parent-section parent-section-semaine",children:[a.jsx("h3",{children:" Activit de la semaine"}),a.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((Q,P)=>a.jsxs("div",{className:`parent-jour ${f.streak.semaineCourante[P]?"parent-jour-actif":"parent-jour-inactif"}`,children:[a.jsx("span",{className:"parent-jour-label",children:Q}),a.jsx("span",{className:"parent-jour-icon",children:f.streak.semaineCourante[P]?"":""})]},Q))})]}),a.jsxs("div",{className:"parent-onglets",children:[a.jsx("button",{className:`parent-onglet ${k==="apercu"?"parent-onglet-actif":""}`,onClick:()=>Y("apercu"),children:" Aperu"}),a.jsxs("button",{className:`parent-onglet ${k==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>Y("lacunes"),children:[" Lacunes (",f.lacunes.length,")"]}),a.jsxs("button",{className:`parent-onglet ${k==="alertes"?"parent-onglet-actif":""}`,onClick:()=>Y("alertes"),children:[" Alertes (",f.alertes.length,")"]}),a.jsx("button",{className:`parent-onglet ${k==="resume"?"parent-onglet-actif":""}`,onClick:()=>Y("resume"),children:" Rsum"})]}),a.jsxs("div",{className:"parent-onglet-contenu",children:[k==="apercu"&&a.jsxs("div",{className:"parent-tab-apercu",children:[a.jsxs("div",{className:"parent-section",children:[a.jsx("h3",{children:" Derniers quiz passs"}),f.derniersQuiz.length===0?a.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):a.jsx("div",{className:"parent-quiz-liste",children:f.derniersQuiz.map((Q,P)=>a.jsxs("div",{className:`parent-quiz-item ${Q.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[a.jsxs("div",{className:"parent-quiz-info",children:[a.jsx("span",{className:"parent-quiz-discipline",children:Q.disciplineNom}),a.jsx("span",{className:"parent-quiz-titre",children:Q.quizTitre})]}),a.jsxs("div",{className:"parent-quiz-score",children:[a.jsxs("span",{className:`parent-quiz-note ${Q.reussi?"note-ok":"note-ko"}`,children:[Q.noteSur20,"/20"]}),a.jsx("span",{className:"parent-quiz-statut",children:Q.reussi?" Russi":" chou"})]}),a.jsx("span",{className:"parent-quiz-date",children:Qg(Q.datePassage)})]},P))})]}),a.jsxs("div",{className:"parent-section",children:[a.jsx("h3",{children:" Objectifs de la semaine"}),f.objectifs.length===0?a.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):a.jsx("div",{className:"parent-objectifs-liste",children:f.objectifs.map((Q,P)=>a.jsxs("div",{className:"parent-objectif-item",children:[a.jsxs("div",{className:"parent-objectif-header",children:[a.jsx("span",{className:"parent-objectif-titre",children:Q.titre}),a.jsx("span",{className:`parent-objectif-statut parent-statut-${Q.statut}`,children:Q.statut==="atteint"?" Atteint":Q.statut==="en_cours"?" En cours":Q.statut==="echoue"?" chou":" Non commenc"})]}),a.jsx("div",{className:"parent-progress-bar",children:a.jsx("div",{className:`parent-progress-fill parent-progress-${Q.statut}`,style:{width:`${Math.min(Q.progression/Q.cible*100,100)}%`}})}),a.jsxs("span",{className:"parent-objectif-detail",children:[Q.progression,"/",Q.cible]})]},P))})]})]}),k==="lacunes"&&a.jsx("div",{className:"parent-tab-lacunes",children:f.lacunes.length===0?a.jsxs("div",{className:"parent-vide-section",children:[a.jsx("span",{className:"parent-vide-icon",children:""}),a.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):a.jsx("div",{className:"parent-lacunes-liste",children:f.lacunes.map((Q,P)=>a.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:If(Q.niveauUrgence)},children:[a.jsxs("div",{className:"parent-lacune-header",children:[a.jsx("span",{className:"parent-lacune-discipline",children:Q.disciplineNom}),a.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:If(Q.niveauUrgence),color:"#fff"},children:OM(Q.niveauUrgence)})]}),a.jsxs("div",{className:"parent-lacune-details",children:[a.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",a.jsxs("strong",{children:[Q.moyenne,"/20"]})]}),a.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",zM(Q.tendance)," ",Q.tendance==="hausse"?"En hausse":Q.tendance==="baisse"?"En baisse":"Stable"]})]}),a.jsx("p",{className:"parent-lacune-conseil",children:Q.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":Q.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},P))})}),k==="alertes"&&a.jsx("div",{className:"parent-tab-alertes",children:f.alertes.length===0?a.jsxs("div",{className:"parent-vide-section",children:[a.jsx("span",{className:"parent-vide-icon",children:""}),a.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):a.jsx("div",{className:"parent-alertes-liste",children:f.alertes.map((Q,P)=>a.jsxs("div",{className:`parent-alerte-item parent-alerte-${Q.niveau}`,children:[a.jsxs("div",{className:"parent-alerte-header",children:[a.jsx("span",{className:"parent-alerte-titre",children:Q.titre}),a.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:uK(Q.niveau),color:"#fff"},children:dK(Q.type)})]}),a.jsx("p",{className:"parent-alerte-message",children:Q.message}),a.jsx("span",{className:"parent-alerte-date",children:Qg(Q.dateCreation)})]},P))})}),k==="resume"&&f.resume&&a.jsxs("div",{className:"parent-tab-resume",children:[a.jsxs("div",{className:"parent-resume-header",children:[a.jsxs("h3",{children:[" Rsum : ",f.resume.semaine]}),a.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",f.resume.scoreGlobal,"/100"," ",XC(f.resume.evolutionScore)]})]}),a.jsxs("div",{className:"parent-resume-stats",children:[a.jsxs("div",{className:"parent-resume-stat",children:[a.jsx("span",{className:"parent-resume-stat-value",children:f.resume.nombreQuizSemaine}),a.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),a.jsxs("div",{className:"parent-resume-stat",children:[a.jsxs("span",{className:"parent-resume-stat-value",children:[f.resume.joursActifsSemaine,"/7"]}),a.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),a.jsxs("div",{className:"parent-resume-stat",children:[a.jsxs("span",{className:"parent-resume-stat-value",children:[f.resume.tempsEstimeMinutes," min"]}),a.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),a.jsxs("div",{className:"parent-resume-stat",children:[a.jsxs("span",{className:"parent-resume-stat-value",children:[f.resume.objectifsAtteints,"/",f.resume.objectifsTotal]}),a.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),f.resume.evolutionDisciplines.length>0&&a.jsxs("div",{className:"parent-section",children:[a.jsx("h4",{children:" volution par matire"}),a.jsx("div",{className:"parent-evolution-liste",children:f.resume.evolutionDisciplines.map((Q,P)=>a.jsxs("div",{className:"parent-evolution-item",children:[a.jsx("span",{className:"parent-evolution-discipline",children:Q.disciplineNom}),a.jsxs("div",{className:"parent-evolution-scores",children:[a.jsxs("span",{className:"parent-evolution-prec",children:[Q.moyenneSemainePrecedente,"/20"]}),a.jsx("span",{className:"parent-evolution-fleche",children:XC(Q.evolution)}),a.jsxs("span",{className:"parent-evolution-courante",children:[Q.moyenneSemaineCourante,"/20"]}),a.jsxs("span",{className:`parent-evolution-ecart ${Q.ecart>0?"ecart-positif":Q.ecart<0?"ecart-negatif":""}`,children:["(",Q.ecart>0?"+":"",Q.ecart,")"]})]})]},P))})]}),f.resume.disciplinesEnDifficulte.length>0&&a.jsxs("div",{className:"parent-section parent-section-warning",children:[a.jsx("h4",{children:" Matires ncessitant une attention"}),a.jsx("ul",{className:"parent-disciplines-difficulte",children:f.resume.disciplinesEnDifficulte.map((Q,P)=>a.jsx("li",{children:Q},P))})]})]}),k==="resume"&&!f.resume&&a.jsxs("div",{className:"parent-vide-section",children:[a.jsx("span",{className:"parent-vide-icon",children:""}),a.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):a.jsxs("div",{className:"parent-erreur-dashboard",children:[a.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),a.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&B(o),children:" Ressayer"})]}):a.jsx("div",{className:"parent-select-enfant",children:a.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},$K="https://api.pedaclic.sn",Al={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},UK={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},Od={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function HK(e){try{const t=await fetch(`${$K}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`Erreur serveur (${t.status})`)}const r=await t.json();if(!r.success)throw new Error(r.error||"La gnration a chou.");return r}catch(t){throw console.error("[aiGeneratorService] Erreur gnration:",t),t instanceof TypeError&&t.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):t}}async function GK(e,t,r,n){try{const l=await Ar(Oe(pe,"generated_content"),{userId:e,type:t.type,discipline:t.discipline,disciplineId:n,classe:t.classe,chapitre:t.chapitre,content:r,options:t.options||null,createdAt:Mt.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",l.id),l.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",l),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function QK(e,t,r,n){try{const l=r.map((f,m)=>({id:`q_${Date.now()}_${m}`,question:f.question,options:f.options,reponseCorrecte:f.reponseCorrecte,explication:f.explication||"",difficulte:f.difficulte||"moyen",points:f.points||2})),o={disciplineId:n,titre:`Quiz IA  ${t.chapitre}`,description:`Quiz auto-gnr pour ${t.discipline} (${t.classe})  Chapitre : ${t.chapitre}`,questions:l,duree:15,isPremium:!0,noteMinimale:10,auteurId:e,source:"ia_generator",createdAt:Mt.now()},u=await Ar(Oe(pe,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",u.id),u.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",l),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function FK(e,t=20){try{const r=Ge(Oe(pe,"generated_content"),Ie("userId","==",e),wt("createdAt","desc")),n=await $e(r),l=[];return n.forEach(o=>{l.length<t&&l.push({id:o.id,...o.data()})}),l}catch(r){throw console.error("[aiGeneratorService] Erreur chargement historique:",r),new Error("Erreur lors du chargement de l'historique.")}}async function VK(e){try{await Mi(Ee(pe,"generated_content",e)),console.log("[aiGeneratorService] Contenu supprim:",e)}catch(t){throw console.error("[aiGeneratorService] Erreur suppression:",t),new Error("Erreur lors de la suppression du contenu.")}}const YK=["6me","5me","4me","3me","2nde","1re","Terminale"],KK=[30,45,60,90,120],XK=()=>{const{currentUser:e}=Ht(),[t,r]=j.useState(1),[n,l]=j.useState([]),[o,u]=j.useState(null),[f,m]=j.useState(""),[h,p]=j.useState(""),[v,y]=j.useState(""),[b,_]=j.useState(null),[N,w]=j.useState({}),[S,O]=j.useState(!1),[C,E]=j.useState(null),[z,M]=j.useState(null),[L,T]=j.useState(!1),[k,Y]=j.useState(!1),[X,B]=j.useState(null),[le,ue]=j.useState(!1),[Q,P]=j.useState([]),[J,H]=j.useState(!1),[ve,I]=j.useState(!0),ge=j.useMemo(()=>{const G=new Map;return n.forEach(xe=>{G.has(xe.nom)||G.set(xe.nom,xe)}),Array.from(G.values())},[n]);j.useEffect(()=>{(async()=>{try{I(!0);const xe=Ge(Oe(pe,"disciplines"),wt("nom")),ke=await $e(xe),qe=[];ke.forEach(Qe=>{const Gt=Qe.data();Gt.nom&&Gt.nom.trim()&&qe.push({id:Qe.id,nom:Gt.nom||"",classe:Gt.classe||"",niveau:Gt.niveau||""})}),l(qe)}catch(xe){console.error("[AIGenerator] Erreur chargement disciplines:",xe),M("Impossible de charger les disciplines.")}finally{I(!1)}})()},[]);const ee=G=>{u(G),M(null)},fe=()=>{const G=[];if(o||G.push("discipline"),f||G.push("classe"),(!h||h<1)&&G.push("dure de la leon"),G.length>0){M(`Champs requis manquants : ${G.join(", ")}`);return}r(2),M(null)},ye=()=>{if(!v.trim()){M("Veuillez saisir le titre du chapitre.");return}r(3),M(null)},he=G=>{_(G),r(4),M(null)},$=()=>{t>1&&(r(G=>G-1),M(null),t===5&&(E(null),Y(!1),B(null)))},ce=()=>{r(1),u(null),m(""),p(""),y(""),_(null),w({}),E(null),M(null),Y(!1),B(null)},Se=async()=>{if(!o||!b||!v.trim()||!f){M("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}O(!0),M(null);try{const G={...N,duree:typeof h=="number"?h:void 0},xe={type:b,discipline:o.nom,classe:f,chapitre:v.trim(),options:Object.keys(G).length>0?G:void 0},ke=await HK(xe);E(ke),r(5)}catch(G){const xe=G instanceof Error?G.message:"Erreur inconnue";M(xe)}finally{O(!1)}},ne=async()=>{if(!(!e||!C||!o||!b)){T(!0),M(null);try{let G;const ke=n.find(Qe=>Qe.nom===o.nom&&Qe.classe===f)?.id||o.id,qe={type:b,discipline:o.nom,classe:f,chapitre:v.trim(),options:{...N,duree:typeof h=="number"?h:void 0}};C.type==="quiz"&&C.data.questions?G=await QK(e.uid,qe,C.data.questions,ke):G=await GK(e.uid,qe,C.data.content||"",ke),B(G),Y(!0)}catch(G){const xe=G instanceof Error?G.message:"Erreur de sauvegarde";M(xe)}finally{T(!1)}}},F=async()=>{if(e){H(!0);try{const G=await FK(e.uid);P(G),ue(!0)}catch(G){console.error("[AIGenerator] Erreur historique:",G)}finally{H(!1)}}},R=async G=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await VK(G),P(xe=>xe.filter(ke=>ke.id!==G))}catch(xe){console.error("[AIGenerator] Erreur suppression:",xe)}},ae=j.useCallback(G=>{if(!G)return"";let xe=G.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return xe=xe.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,ke=>"<ul>"+ke.replace(/<br \/>/g,"")+"</ul>"),`<p>${xe}</p>`},[]);return e?e.isPremium?a.jsxs("div",{className:"ai-generator",children:[a.jsxs("div",{className:"ai-generator__header",children:[a.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),a.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),a.jsxs("div",{className:"ai-generator__header-actions",children:[a.jsx("button",{className:"btn btn--outline btn--sm",onClick:F,disabled:J,children:J?" Chargement...":" Historique"}),t>1&&a.jsx("button",{className:"btn btn--outline btn--sm",onClick:ce,children:" Recommencer"})]})]}),a.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(G=>a.jsxs("div",{className:`ai-generator__step-indicator ${G===t?"ai-generator__step-indicator--active":""} ${G<t?"ai-generator__step-indicator--done":""}`,children:[a.jsx("span",{className:"ai-generator__step-number",children:G<t?"":G}),a.jsxs("span",{className:"ai-generator__step-label",children:[G===1&&"Paramtres",G===2&&"Chapitre",G===3&&"Type",G===4&&"Options",G===5&&"Rsultat"]})]},G))}),z&&a.jsxs("div",{className:"ai-generator__error",children:[a.jsx("span",{className:"ai-generator__error-icon",children:""}),z,a.jsx("button",{className:"ai-generator__error-close",onClick:()=>M(null),children:""})]}),a.jsxs("div",{className:"ai-generator__content",children:[t===1&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsxs("label",{className:"ai-generator__label",children:["Discipline ",a.jsx("span",{className:"ai-generator__required",children:"*"})]}),ve?a.jsxs("div",{className:"ai-generator__loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Chargement des disciplines..."})]}):ge.length===0?a.jsx("div",{className:"ai-generator__empty",children:a.jsx("p",{children:"Aucune discipline disponible."})}):a.jsx("div",{className:"ai-generator__discipline-grid",children:ge.map(G=>a.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===G.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>ee(G),children:a.jsx("span",{className:"ai-generator__discipline-name",children:G.nom})},G.id))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsxs("label",{className:"ai-generator__label",children:["Classe ",a.jsx("span",{className:"ai-generator__required",children:"*"})]}),a.jsx("div",{className:"ai-generator__classe-grid",children:YK.map(G=>a.jsx("button",{className:`ai-generator__classe-btn ${f===G?"ai-generator__classe-btn--selected":""}`,onClick:()=>{m(G),M(null)},children:G},G))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",a.jsx("span",{className:"ai-generator__required",children:"*"})]}),a.jsxs("div",{className:"ai-generator__duree-group",children:[a.jsx("div",{className:"ai-generator__duree-presets",children:KK.map(G=>a.jsxs("button",{className:`ai-generator__duree-btn ${h===G?"ai-generator__duree-btn--selected":""}`,onClick:()=>{p(G),M(null)},children:[G," min"]},G))}),a.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:h,onChange:G=>{const xe=parseInt(G.target.value);p(isNaN(xe)?"":xe),M(null)},placeholder:"Autre dure..."})]})]}),a.jsxs("div",{className:"ai-generator__nav",children:[a.jsx("div",{})," ",a.jsx("button",{className:"btn btn--primary",onClick:fe,disabled:!o||!f||!h,children:"Continuer "})]})]}),t===2&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),a.jsxs("div",{className:"ai-generator__recap",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:f}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),a.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:v,onChange:G=>y(G.target.value),onKeyDown:G=>G.key==="Enter"&&ye(),autoFocus:!0})]}),a.jsxs("div",{className:"ai-generator__nav",children:[a.jsx("button",{className:"btn btn--outline",onClick:$,children:" Retour"}),a.jsx("button",{className:"btn btn--primary",onClick:ye,disabled:!v.trim(),children:"Continuer "})]})]}),t===3&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),a.jsxs("div",{className:"ai-generator__recap",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:f}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),a.jsx("span",{className:"ai-generator__recap-value",children:v})]}),a.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(Al).map(G=>a.jsxs("button",{className:"ai-generator__type-card",onClick:()=>he(G),children:[a.jsx("span",{className:"ai-generator__type-icon",children:Od[G]}),a.jsx("span",{className:"ai-generator__type-name",children:Al[G]}),a.jsx("span",{className:"ai-generator__type-desc",children:UK[G]})]},G))}),a.jsx("div",{className:"ai-generator__nav",children:a.jsx("button",{className:"btn btn--outline",onClick:$,children:" Retour"})})]}),t===4&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),a.jsxs("div",{className:"ai-generator__recap",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:f}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),a.jsx("span",{className:"ai-generator__recap-value",children:v}),a.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[b&&Od[b]," ",b&&Al[b]]})]}),a.jsxs("div",{className:"ai-generator__options",children:[a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),a.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(G=>a.jsxs("label",{className:"ai-generator__radio",children:[a.jsx("input",{type:"radio",name:"difficulte",value:G,checked:N.difficulte===G,onChange:()=>w(xe=>({...xe,difficulte:G}))}),a.jsxs("span",{className:"ai-generator__radio-label",children:[G==="facile"&&" Facile",G==="moyen"&&" Moyen",G==="difficile"&&" Difficile"]})]},G))})]}),b==="sujet_examen"&&a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),a.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(G=>a.jsxs("label",{className:"ai-generator__radio",children:[a.jsx("input",{type:"radio",name:"typeExamen",value:G,checked:N.typeExamen===G,onChange:()=>w(xe=>({...xe,typeExamen:G}))}),a.jsx("span",{className:"ai-generator__radio-label",children:G})]},G))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),a.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:N.objectifs||"",onChange:G=>w(xe=>({...xe,objectifs:G.target.value||void 0}))})]}),a.jsxs("div",{className:"ai-generator__field",children:[a.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),a.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:N.consignesSpeciales||"",onChange:G=>w(xe=>({...xe,consignesSpeciales:G.target.value||void 0}))})]})]}),a.jsxs("div",{className:"ai-generator__nav",children:[a.jsx("button",{className:"btn btn--outline",onClick:$,children:" Retour"}),a.jsx("button",{className:"btn btn--primary btn--lg",onClick:Se,disabled:S,children:S?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),S&&a.jsxs("div",{className:"ai-generator__generating",children:[a.jsxs("div",{className:"ai-generator__generating-animation",children:[a.jsx("span",{children:""}),a.jsx("span",{children:""}),a.jsx("span",{children:""})]}),a.jsxs("p",{children:["L'IA rdige votre"," ",b&&Al[b].toLowerCase(),"..."]}),a.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),t===5&&C&&a.jsxs("div",{className:"ai-generator__step-content",children:[a.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),a.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[a.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[b&&Od[b]," ",b&&Al[b]]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),a.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),a.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),a.jsx("span",{className:"ai-generator__recap-value",children:f}),a.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),a.jsxs("span",{className:"ai-generator__recap-value",children:[h," minutes"]}),a.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),a.jsx("span",{className:"ai-generator__recap-value",children:v})]}),a.jsxs("div",{className:"ai-generator__preview",children:[a.jsxs("div",{className:"ai-generator__preview-header",children:[a.jsx("h3",{children:"Prvisualisation"}),a.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const G=C.type==="quiz"?JSON.stringify(C.data.questions,null,2):C.data.content||"";navigator.clipboard.writeText(G),alert("Contenu copi dans le presse-papier !")},children:" Copier"})]}),a.jsx("div",{className:"ai-generator__preview-body",children:C.type==="quiz"&&C.data.questions?a.jsxs("div",{className:"ai-generator__quiz-preview",children:[a.jsxs("p",{className:"ai-generator__quiz-count",children:[C.data.questions.length," questions gnres"]}),C.data.questions.map((G,xe)=>a.jsxs("div",{className:"ai-generator__quiz-item",children:[a.jsxs("div",{className:"ai-generator__quiz-question",children:[a.jsxs("strong",{children:["Q",xe+1,"."]})," ",G.question,a.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${G.difficulte}`,children:G.difficulte})]}),a.jsx("div",{className:"ai-generator__quiz-options",children:G.options.map((ke,qe)=>a.jsxs("div",{className:`ai-generator__quiz-option ${qe===G.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[a.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+qe)}),ke,qe===G.reponseCorrecte&&" "]},qe))}),G.explication&&a.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",G.explication]})]},xe))]}):a.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:ae(C.data.content||"")}})})]}),a.jsxs("div",{className:"ai-generator__actions",children:[k?a.jsxs("div",{className:"ai-generator__save-success",children:[a.jsx("span",{children:" Sauvegard avec succs !"}),C.type==="quiz"&&X&&a.jsx(Pe,{to:`/quiz/${X}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):a.jsx("button",{className:"btn btn--primary btn--lg",onClick:ne,disabled:L,children:L?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):a.jsx(a.Fragment,{children:" Sauvegarder dans PedaClic"})}),a.jsx("button",{className:"btn btn--outline",onClick:ce,children:" Nouvelle gnration"})]})]})]}),le&&a.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>ue(!1),children:a.jsxs("div",{className:"ai-generator__modal",onClick:G=>G.stopPropagation(),children:[a.jsxs("div",{className:"ai-generator__modal-header",children:[a.jsx("h2",{children:" Historique des gnrations"}),a.jsx("button",{className:"ai-generator__modal-close",onClick:()=>ue(!1),children:""})]}),a.jsx("div",{className:"ai-generator__modal-body",children:Q.length===0?a.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):a.jsx("div",{className:"ai-generator__history-list",children:Q.map(G=>a.jsxs("div",{className:"ai-generator__history-item",children:[a.jsxs("div",{className:"ai-generator__history-info",children:[a.jsxs("span",{className:"ai-generator__history-type",children:[Od[G.type]," ",Al[G.type]]}),a.jsxs("span",{className:"ai-generator__history-details",children:[G.discipline," (",G.classe,")  ",G.chapitre]}),a.jsx("span",{className:"ai-generator__history-date",children:G.createdAt?.toDate?G.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),a.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>G.id&&R(G.id),title:"Supprimer",children:""})]},G.id))})})]})})]}):a.jsx("div",{className:"ai-generator",children:a.jsxs("div",{className:"ai-generator__gate",children:[a.jsx("div",{className:"ai-generator__gate-icon",children:""}),a.jsx("h2",{children:"Fonctionnalit Premium"}),a.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),a.jsxs("div",{className:"ai-generator__gate-price",children:[a.jsx("span",{className:"price",children:"2 000 FCFA"}),a.jsx("span",{className:"period",children:"/mois"})]}),a.jsx(Pe,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):a.jsx("div",{className:"ai-generator",children:a.jsxs("div",{className:"ai-generator__gate",children:[a.jsx("div",{className:"ai-generator__gate-icon",children:""}),a.jsx("h2",{children:"Connexion requise"}),a.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),a.jsx(Pe,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},kl={manuel:"Manuels scolaires",annale:"Annales corriges",guide:"Guides de rvision",litterature:"Culture gnrale & Littrature",fiche:"Fiches de lectures"},fc={manuel:"",annale:"",guide:"",litterature:"",fiche:""},Ms="ebooks";async function WK(){try{const e=Ge(Oe(pe,Ms),Ie("isActive","==",!0),wt("ordre","asc"));return(await $e(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks:",e),e}}async function ZK(){try{const e=Ge(Oe(pe,Ms),wt("ordre","asc"));return(await $e(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks admin:",e),e}}async function JK(e){try{const t=await mr(Ee(pe,Ms,e));return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||null}:null}catch(t){throw console.error(" Erreur rcupration ebook:",t),t}}function eX(e,t){let r=[...e];if(t.categorie&&t.categorie!=="all"&&(r=r.filter(n=>n.categorie===t.categorie)),t.niveau&&t.niveau!=="all"&&(r=r.filter(n=>n.niveau===t.niveau)),t.classe&&t.classe!=="all"&&(r=r.filter(n=>n.classe===t.classe||n.classe==="all")),t.matiere&&(r=r.filter(n=>n.matiere?.toLowerCase().includes(t.matiere.toLowerCase()))),t.recherche){const n=t.recherche.toLowerCase();r=r.filter(l=>l.titre.toLowerCase().includes(n)||l.auteur.toLowerCase().includes(n)||l.description.toLowerCase().includes(n)||l.tags?.some(o=>o.toLowerCase().includes(n)))}return r}async function tX(e,t,r,n,l){try{const o=Mn(Tn,`ebooks/pdf/${Date.now()}_${t.name}`);await ds(o,t);const u=await fs(o);let f="";if(r){const v=Mn(Tn,`ebooks/covers/${Date.now()}_${r.name}`);await ds(v,r),f=await fs(v)}let m="";if(n){const v=Mn(Tn,`ebooks/previews/${Date.now()}_${n.name}`);await ds(v,n),m=await fs(v)}const h={...e,fichierURL:u,couvertureURL:f,aperuURL:m,tailleFichier:t.size,nombreTelechargements:0,nombreVues:0,uploadedBy:l||"admin",createdAt:ct(),updatedAt:ct()},p=await Ar(Oe(pe,Ms),h);return console.log(` Ebook ajout : ${e.titre} (ID: ${p.id})`),p.id}catch(o){throw console.error(" Erreur ajout ebook:",o),o}}async function rX(e,t,r,n,l){try{const o={...t,updatedAt:ct()};if(r){const u=Mn(Tn,`ebooks/pdf/${Date.now()}_${r.name}`);await ds(u,r),o.fichierURL=await fs(u),o.tailleFichier=r.size}if(n){const u=Mn(Tn,`ebooks/covers/${Date.now()}_${n.name}`);await ds(u,n),o.couvertureURL=await fs(u)}if(l){const u=Mn(Tn,`ebooks/previews/${Date.now()}_${l.name}`);await ds(u,l),o.aperuURL=await fs(u)}await xt(Ee(pe,Ms,e),o),console.log(` Ebook mis  jour : ${e}`)}catch(o){throw console.error(" Erreur mise  jour ebook:",o),o}}async function nX(e){try{const t=await JK(e);if(!t)throw new Error("Ebook introuvable");try{if(t.fichierURL){const r=Mn(Tn,t.fichierURL);await zd(r)}if(t.couvertureURL){const r=Mn(Tn,t.couvertureURL);await zd(r)}if(t.aperuURL){const r=Mn(Tn,t.aperuURL);await zd(r)}}catch{console.warn(" Fichiers Storage non supprims (peut-tre dj supprims)")}await Mi(Ee(pe,Ms,e)),console.log(` Ebook supprim : ${e}`)}catch(t){throw console.error(" Erreur suppression ebook:",t),t}}async function aX(e,t){try{await xt(Ee(pe,Ms,e),{isActive:t,updatedAt:ct()})}catch(r){throw console.error(" Erreur toggle ebook:",r),r}}function iX(e){const t={totalEbooks:e.length,totalTelechargements:0,totalVues:0,parCategorie:{manuel:0,annale:0,guide:0,litterature:0,fiche:0},ebooksActifs:0};return e.forEach(r=>{t.totalTelechargements+=r.nombreTelechargements||0,t.totalVues+=r.nombreVues||0,t.parCategorie[r.categorie]=(t.parCategorie[r.categorie]||0)+1,r.isActive&&t.ebooksActifs++}),t}function Id(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/(1024*1024)).toFixed(1)} Mo`}const LM=["Mathmatiques","Physique-Chimie","SVT","Franais","Anglais","Histoire-Gographie","Philosophie","conomie","Comptabilit","ducation civique","Arabe","Espagnol","Informatique"],sX=({isPremium:e,onReadEbook:t})=>{const[r,n]=j.useState([]),[l,o]=j.useState(!0),[u,f]=j.useState(null),[m,h]=j.useState({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""}),[p,v]=j.useState("grid");j.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0),f(null);const S=await WK();n(S)}catch(S){f("Erreur lors du chargement de la bibliothque"),console.error(S)}finally{o(!1)}},b=j.useMemo(()=>eX(r,m),[r,m]),_=j.useMemo(()=>{const S={all:r.length};return r.forEach(O=>{S[O.categorie]=(S[O.categorie]||0)+1}),S},[r]),N=(S,O)=>{h(C=>({...C,[S]:O}))},w=()=>{h({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""})};return l?a.jsx("div",{className:"ebook-library",children:a.jsxs("div",{className:"ebook-loading",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Chargement de la bibliothque..."})]})}):u?a.jsx("div",{className:"ebook-library",children:a.jsxs("div",{className:"ebook-error",children:[a.jsxs("p",{children:[" ",u]}),a.jsx("button",{onClick:y,className:"btn-retry",children:"Ressayer"})]})}):a.jsxs("div",{className:"ebook-library",children:[a.jsxs("div",{className:"ebook-library-header",children:[a.jsxs("div",{className:"ebook-header-content",children:[a.jsx("h1",{children:" Bibliothque PedaClic"}),a.jsxs("p",{className:"ebook-subtitle",children:["Manuels, annales, fiches de rvision et bien plus encore",!e&&a.jsx("span",{className:"preview-badge",children:"Aperu gratuit disponible"})]})]}),a.jsxs("div",{className:"ebook-search-bar",children:[a.jsx("input",{type:"text",placeholder:"Rechercher un ebook (titre, auteur, mot-cl)...",value:m.recherche||"",onChange:S=>N("recherche",S.target.value),className:"search-input"}),a.jsx("span",{className:"search-icon",children:""})]})]}),a.jsxs("div",{className:"ebook-categories",children:[a.jsxs("button",{className:`category-tab ${m.categorie==="all"?"active":""}`,onClick:()=>N("categorie","all"),children:[" Tous",a.jsx("span",{className:"category-count",children:_.all||0})]}),Object.keys(kl).map(S=>a.jsxs("button",{className:`category-tab ${m.categorie===S?"active":""}`,onClick:()=>N("categorie",S),children:[fc[S]," ",kl[S],a.jsx("span",{className:"category-count",children:_[S]||0})]},S))]}),a.jsxs("div",{className:"ebook-filters",children:[a.jsxs("select",{value:m.niveau||"all",onChange:S=>N("niveau",S.target.value),className:"filter-select",children:[a.jsx("option",{value:"all",children:"Tous les niveaux"}),a.jsx("option",{value:"college",children:"Collge"}),a.jsx("option",{value:"lycee",children:"Lyce"})]}),a.jsxs("select",{value:m.classe||"all",onChange:S=>N("classe",S.target.value),className:"filter-select",children:[a.jsx("option",{value:"all",children:"Toutes les classes"}),a.jsx("option",{value:"6eme",children:"6me"}),a.jsx("option",{value:"5eme",children:"5me"}),a.jsx("option",{value:"4eme",children:"4me"}),a.jsx("option",{value:"3eme",children:"3me"}),a.jsx("option",{value:"2nde",children:"2nde"}),a.jsx("option",{value:"1ere",children:"1re"}),a.jsx("option",{value:"Terminale",children:"Terminale"})]}),a.jsxs("select",{value:m.matiere||"",onChange:S=>N("matiere",S.target.value),className:"filter-select",children:[a.jsx("option",{value:"",children:"Toutes les matires"}),LM.map(S=>a.jsx("option",{value:S,children:S},S))]}),a.jsxs("div",{className:"view-toggle",children:[a.jsx("button",{className:p==="grid"?"active":"",onClick:()=>v("grid"),title:"Vue grille",children:""}),a.jsx("button",{className:p==="list"?"active":"",onClick:()=>v("list"),title:"Vue liste",children:""})]}),(m.categorie!=="all"||m.niveau!=="all"||m.classe!=="all"||m.matiere||m.recherche)&&a.jsx("button",{onClick:w,className:"btn-reset-filters",children:" Rinitialiser"})]}),a.jsx("div",{className:"ebook-results-info",children:a.jsxs("span",{children:[b.length," ebook",b.length>1?"s":""," trouv",b.length>1?"s":""]})}),b.length===0?a.jsxs("div",{className:"ebook-empty",children:[a.jsx("p",{children:" Aucun ebook trouv avec ces filtres."}),a.jsx("button",{onClick:w,className:"btn-reset-filters",children:"Voir tous les ebooks"})]}):a.jsx("div",{className:`ebook-grid ${p==="list"?"list-view":""}`,children:b.map(S=>a.jsx(lX,{ebook:S,isPremium:e,onRead:()=>t(S),viewMode:p},S.id))}),!e&&b.length>0&&a.jsx("div",{className:"ebook-premium-banner",children:a.jsxs("div",{className:"premium-banner-content",children:[a.jsx("h3",{children:" Accdez  tous les ebooks en illimit"}),a.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour lire et tlcharger tous les manuels, annales et fiches de rvision sans limite."}),a.jsx("a",{href:"/premium",className:"btn-premium",children:"S'abonner  2 000 FCFA/mois"})]})})]})},lX=({ebook:e,isPremium:t,onRead:r,viewMode:n})=>a.jsxs("div",{className:`ebook-card ${n==="list"?"ebook-card-list":""}`,children:[a.jsxs("div",{className:"ebook-cover",onClick:r,children:[e.couvertureURL?a.jsx("img",{src:e.couvertureURL,alt:e.titre,loading:"lazy"}):a.jsxs("div",{className:"ebook-cover-placeholder",children:[a.jsx("span",{className:"cover-icon",children:fc[e.categorie]}),a.jsx("span",{className:"cover-title",children:e.titre})]}),!t&&a.jsx("div",{className:"ebook-badge-premium",children:a.jsx("span",{children:" Premium"})}),a.jsx("div",{className:"ebook-badge-category",children:kl[e.categorie]})]}),a.jsxs("div",{className:"ebook-info",children:[a.jsx("h3",{className:"ebook-title",onClick:r,children:e.titre}),a.jsx("p",{className:"ebook-author",children:e.auteur}),a.jsx("p",{className:"ebook-description",children:e.description}),a.jsxs("div",{className:"ebook-meta",children:[e.classe!=="all"&&a.jsx("span",{className:"meta-tag",children:e.classe}),e.matiere&&a.jsx("span",{className:"meta-tag",children:e.matiere}),a.jsxs("span",{className:"meta-pages",children:[e.nombrePages," pages"]}),a.jsx("span",{className:"meta-size",children:Id(e.tailleFichier)})]}),a.jsxs("div",{className:"ebook-actions",children:[a.jsx("button",{className:"btn-read",onClick:r,children:t?" Lire":` Aperu (${e.pagesApercu} pages)`}),t&&a.jsx("a",{href:e.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn-download",download:!0,children:" Tlcharger"})]})]})]}),oX=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[l,o]=j.useState(null),[u,f]=j.useState(null),[m,h]=j.useState(!1),[p,v]=j.useState(null),[y,b]=j.useState(le()),[_,N]=j.useState(!1),[w,S]=j.useState(null),[O,C]=j.useState(null),[E,z]=j.useState(null),[M,L]=j.useState(null),T=j.useRef(null),k=j.useRef(null),Y=j.useRef(null),[X,B]=j.useState(null);function le(){return{titre:"",auteur:"",description:"",categorie:"manuel",niveau:"college",classe:"all",matiere:"",nombrePages:0,pagesApercu:5,annee:"",editeur:"",isbn:"",tags:[],ordre:0,isActive:!0}}j.useEffect(()=>{ue()},[]);const ue=async()=>{try{n(!0),o(null);const ee=await ZK();t(ee),f(iX(ee))}catch(ee){o("Erreur lors du chargement des ebooks"),console.error(ee)}finally{n(!1)}},Q=ee=>{const{name:fe,value:ye,type:he}=ee.target;b(he==="number"?$=>({...$,[fe]:parseInt(ye)||0}):he==="checkbox"?$=>({...$,[fe]:ee.target.checked}):$=>({...$,[fe]:ye}))},P=ee=>{const fe=ee.target.value.split(",").map(ye=>ye.trim()).filter(Boolean);b(ye=>({...ye,tags:fe}))},J=async ee=>{if(ee.preventDefault(),!y.titre.trim()){o("Le titre est obligatoire");return}if(!p&&!O){o("Le fichier PDF est obligatoire");return}try{N(!0),o(null),p?(await rX(p.id,y,O,E,M),S(` Ebook "${y.titre}" modifi avec succs`)):(await tX(y,O,E,M),S(` Ebook "${y.titre}" ajout avec succs`)),ge(),await ue(),setTimeout(()=>S(null),4e3)}catch(fe){o(fe.message||"Erreur lors de la sauvegarde")}finally{N(!1)}},H=ee=>{v(ee),b({titre:ee.titre,auteur:ee.auteur,description:ee.description,categorie:ee.categorie,niveau:ee.niveau,classe:ee.classe,matiere:ee.matiere||"",nombrePages:ee.nombrePages,pagesApercu:ee.pagesApercu,annee:ee.annee||"",editeur:ee.editeur||"",isbn:ee.isbn||"",tags:ee.tags||[],ordre:ee.ordre,isActive:ee.isActive}),h(!0),window.scrollTo({top:0,behavior:"smooth"})},ve=async ee=>{try{await nX(ee),B(null),S(" Ebook supprim avec succs"),await ue(),setTimeout(()=>S(null),4e3)}catch(fe){o(fe.message||"Erreur lors de la suppression")}},I=async(ee,fe)=>{try{await aX(ee,!fe),await ue()}catch(ye){o(ye.message)}},ge=()=>{b(le()),v(null),C(null),z(null),L(null),h(!1),T.current&&(T.current.value=""),k.current&&(k.current.value=""),Y.current&&(Y.current.value="")};return r?a.jsx("div",{className:"admin-ebooks",children:a.jsxs("div",{className:"admin-loading",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Chargement des ebooks..."})]})}):a.jsxs("div",{className:"admin-ebooks",children:[a.jsxs("div",{className:"admin-ebooks-header",children:[a.jsx("h1",{children:" Gestion de la Bibliothque"}),a.jsx("button",{className:"btn-add-ebook",onClick:()=>{ge(),h(!m)},children:m?" Fermer":"+ Ajouter un ebook"})]}),l&&a.jsxs("div",{className:"admin-alert error",children:[" ",l]}),w&&a.jsx("div",{className:"admin-alert success",children:w}),u&&a.jsxs("div",{className:"admin-stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:u.totalEbooks}),a.jsx("span",{className:"stat-label",children:"Total ebooks"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:u.ebooksActifs}),a.jsx("span",{className:"stat-label",children:"Actifs"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:u.totalVues}),a.jsx("span",{className:"stat-label",children:"Vues totales"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:u.totalTelechargements}),a.jsx("span",{className:"stat-label",children:"Tlchargements"})]})]}),m&&a.jsxs("div",{className:"admin-ebook-form-container",children:[a.jsx("h2",{children:p?" Modifier l'ebook":" Ajouter un ebook"}),a.jsxs("form",{onSubmit:J,className:"admin-ebook-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"titre",children:"Titre *"}),a.jsx("input",{id:"titre",name:"titre",type:"text",value:y.titre,onChange:Q,placeholder:"Ex: Mathmatiques 3me - Programme complet",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"auteur",children:"Auteur(s) *"}),a.jsx("input",{id:"auteur",name:"auteur",type:"text",value:y.auteur,onChange:Q,placeholder:"Ex: Pr. Diallo Moussa",required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"description",children:"Description *"}),a.jsx("textarea",{id:"description",name:"description",value:y.description,onChange:Q,placeholder:"Dcrivez le contenu de cet ebook...",rows:3,required:!0})]}),a.jsxs("div",{className:"form-row form-row-3",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"categorie",children:"Catgorie *"}),a.jsx("select",{id:"categorie",name:"categorie",value:y.categorie,onChange:Q,children:Object.keys(kl).map(ee=>a.jsxs("option",{value:ee,children:[fc[ee]," ",kl[ee]]},ee))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),a.jsxs("select",{id:"niveau",name:"niveau",value:y.niveau,onChange:Q,children:[a.jsx("option",{value:"college",children:"Collge"}),a.jsx("option",{value:"lycee",children:"Lyce"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"classe",children:"Classe"}),a.jsxs("select",{id:"classe",name:"classe",value:y.classe,onChange:Q,children:[a.jsx("option",{value:"all",children:"Toutes les classes"}),a.jsx("option",{value:"6eme",children:"6me"}),a.jsx("option",{value:"5eme",children:"5me"}),a.jsx("option",{value:"4eme",children:"4me"}),a.jsx("option",{value:"3eme",children:"3me"}),a.jsx("option",{value:"2nde",children:"2nde"}),a.jsx("option",{value:"1ere",children:"1re"}),a.jsx("option",{value:"Terminale",children:"Terminale"})]})]})]}),a.jsxs("div",{className:"form-row form-row-3",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"matiere",children:"Matire"}),a.jsxs("select",{id:"matiere",name:"matiere",value:y.matiere,onChange:Q,children:[a.jsx("option",{value:"",children:"-- Slectionner --"}),LM.map(ee=>a.jsx("option",{value:ee,children:ee},ee))]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"annee",children:"Anne"}),a.jsx("input",{id:"annee",name:"annee",type:"text",value:y.annee,onChange:Q,placeholder:"Ex: 2024-2025"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"editeur",children:"diteur"}),a.jsx("input",{id:"editeur",name:"editeur",type:"text",value:y.editeur,onChange:Q,placeholder:"Ex: INEADE"})]})]}),a.jsxs("div",{className:"form-row form-row-3",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"nombrePages",children:"Nombre de pages *"}),a.jsx("input",{id:"nombrePages",name:"nombrePages",type:"number",value:y.nombrePages,onChange:Q,min:"1",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"pagesApercu",children:"Pages en aperu gratuit"}),a.jsx("input",{id:"pagesApercu",name:"pagesApercu",type:"number",value:y.pagesApercu,onChange:Q,min:"1",max:"20"}),a.jsx("small",{children:"Nombre de pages visibles sans Premium (1-20)"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"ordre",children:"Ordre d'affichage"}),a.jsx("input",{id:"ordre",name:"ordre",type:"number",value:y.ordre,onChange:Q,min:"0"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"tags",children:"Tags (spars par des virgules)"}),a.jsx("input",{id:"tags",type:"text",value:y.tags?.join(", ")||"",onChange:P,placeholder:"Ex: BFEM, annales, mathmatiques, gomtrie"})]}),a.jsxs("div",{className:"form-files-section",children:[a.jsx("h3",{children:" Fichiers"}),a.jsxs("div",{className:"form-group file-group",children:[a.jsxs("label",{children:["Fichier PDF complet ",!p&&"*",p&&a.jsx("small",{children:"(laisser vide pour garder l'actuel)"})]}),a.jsx("input",{ref:T,type:"file",accept:".pdf",onChange:ee=>C(ee.target.files?.[0]||null),className:"file-input"}),O&&a.jsxs("span",{className:"file-info",children:[" ",O.name," (",Id(O.size),")"]})]}),a.jsxs("div",{className:"form-group file-group",children:[a.jsxs("label",{children:["Image de couverture",a.jsx("small",{children:"(JPG, PNG  recommand : 400560px)"})]}),a.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:ee=>z(ee.target.files?.[0]||null),className:"file-input"}),E&&a.jsxs("span",{className:"file-info",children:[" ",E.name," (",Id(E.size),")"]})]}),a.jsxs("div",{className:"form-group file-group",children:[a.jsxs("label",{children:["PDF Aperu (premires pages uniquement)",a.jsx("small",{children:"(optionnel  sinon le PDF complet est affich aux non-Premium)"})]}),a.jsx("input",{ref:Y,type:"file",accept:".pdf",onChange:ee=>L(ee.target.files?.[0]||null),className:"file-input"}),M&&a.jsxs("span",{className:"file-info",children:[" ",M.name," (",Id(M.size),")"]})]})]}),a.jsx("div",{className:"form-group checkbox-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:Q}),"Ebook actif (visible dans la bibliothque)"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{type:"submit",className:"btn-save",disabled:_,children:_?" Enregistrement...":p?" Modifier l'ebook":" Ajouter l'ebook"}),a.jsx("button",{type:"button",className:"btn-cancel",onClick:ge,children:"Annuler"})]})]})]}),a.jsxs("div",{className:"admin-ebooks-list",children:[a.jsxs("h2",{children:[" Liste des ebooks (",e.length,")"]}),e.length===0?a.jsxs("div",{className:"admin-empty",children:[a.jsx("p",{children:"Aucun ebook pour le moment."}),a.jsx("button",{className:"btn-add-ebook",onClick:()=>h(!0),children:"+ Ajouter le premier ebook"})]}):a.jsx("div",{className:"admin-ebooks-table-wrapper",children:a.jsxs("table",{className:"admin-ebooks-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Couverture"}),a.jsx("th",{children:"Titre / Auteur"}),a.jsx("th",{children:"Catgorie"}),a.jsx("th",{children:"Classe"}),a.jsx("th",{children:"Pages"}),a.jsx("th",{children:"Vues / DL"}),a.jsx("th",{children:"Statut"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(ee=>a.jsxs("tr",{className:ee.isActive?"":"row-inactive",children:[a.jsx("td",{className:"td-cover",children:ee.couvertureURL?a.jsx("img",{src:ee.couvertureURL,alt:"",className:"mini-cover"}):a.jsx("div",{className:"mini-cover-placeholder",children:fc[ee.categorie]})}),a.jsxs("td",{className:"td-title",children:[a.jsx("strong",{children:ee.titre}),a.jsx("span",{className:"td-author",children:ee.auteur})]}),a.jsx("td",{children:a.jsxs("span",{className:"badge-category",children:[fc[ee.categorie]," ",kl[ee.categorie]]})}),a.jsx("td",{children:ee.classe==="all"?"Toutes":ee.classe}),a.jsx("td",{children:ee.nombrePages}),a.jsx("td",{children:a.jsxs("span",{className:"td-stats",children:[" ",ee.nombreVues,a.jsx("br",{})," ",ee.nombreTelechargements]})}),a.jsx("td",{children:a.jsx("button",{className:`btn-status ${ee.isActive?"active":"inactive"}`,onClick:()=>I(ee.id,ee.isActive),title:ee.isActive?"Dsactiver":"Activer",children:ee.isActive?" Actif":" Inactif"})}),a.jsxs("td",{className:"td-actions",children:[a.jsx("button",{className:"btn-edit",onClick:()=>H(ee),title:"Modifier",children:""}),X===ee.id?a.jsxs("div",{className:"delete-confirm",children:[a.jsx("span",{children:"Supprimer ?"}),a.jsx("button",{className:"btn-confirm-yes",onClick:()=>ve(ee.id),children:"Oui"}),a.jsx("button",{className:"btn-confirm-no",onClick:()=>B(null),children:"Non"})]}):a.jsx("button",{className:"btn-delete",onClick:()=>B(ee.id),title:"Supprimer",children:""})]})]},ee.id))})]})})]})]})},cX=()=>{const[e,t]=j.useState(null),[r,n]=j.useState(!1),[l,o]=j.useState(!1),[u,f]=j.useState(!1),m=()=>/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream,h=()=>window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0,p=j.useCallback(()=>{try{return parseInt(localStorage.getItem("pedaclic_visit_count")||"0",10)}catch{return 0}},[]),v=j.useCallback(()=>{try{const N=p()+1;localStorage.setItem("pedaclic_visit_count",N.toString())}catch{}},[p]),y=()=>{try{return localStorage.getItem("pedaclic_install_dismissed")==="true"}catch{return!1}};j.useEffect(()=>{if(h()||y())return;v();const N=S=>{S.preventDefault(),t(S),p()>=2&&n(!0)};window.addEventListener("beforeinstallprompt",N),m()&&p()>=2&&(o(!0),n(!0));const w=()=>{n(!1),t(null)};return window.addEventListener("appinstalled",w),()=>{window.removeEventListener("beforeinstallprompt",N),window.removeEventListener("appinstalled",w)}},[p,v]);const b=async()=>{if(e){f(!0);try{await e.prompt();const{outcome:N}=await e.userChoice;N==="accepted"&&n(!1)}catch(N){console.error("Erreur installation PWA:",N)}finally{f(!1),t(null)}}},_=()=>{n(!1);try{localStorage.setItem("pedaclic_install_dismissed","true")}catch{}};return r?a.jsx("div",{className:"install-prompt",children:a.jsxs("div",{className:"install-prompt__container",children:[a.jsxs("div",{className:"install-prompt__content",children:[a.jsx("div",{className:"install-prompt__icon",children:a.jsx(IP,{size:24})}),a.jsxs("div",{className:"install-prompt__text",children:[a.jsx("h3",{className:"install-prompt__title",children:"Installer PedaClic"}),a.jsx("p",{className:"install-prompt__description",children:l?"Accde  tes cours mme sans connexion !":"Installe l'app pour un accs rapide, mme hors-ligne !"})]})]}),a.jsxs("div",{className:"install-prompt__actions",children:[!l&&e&&a.jsx("button",{className:"install-prompt__btn install-prompt__btn--primary",onClick:b,disabled:u,children:u?"Installation...":"Installer"}),l&&a.jsx("div",{className:"install-prompt__ios",children:a.jsxs("p",{className:"install-prompt__ios-text",children:["Appuie sur ",a.jsx(BP,{size:16,className:"install-prompt__ios-icon"})," puis",a.jsxs("span",{className:"install-prompt__ios-highlight",children:[a.jsx(ic,{size:14})," Sur l'cran d'accueil"]})]})}),a.jsx("button",{className:"install-prompt__btn install-prompt__btn--close",onClick:_,"aria-label":"Fermer la bannire d'installation",children:a.jsx(Ai,{size:20})})]})]})}):null};function uX(){const[e,t]=j.useState(typeof navigator<"u"?navigator.onLine:!0);return j.useEffect(()=>{const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),e}const dX=()=>{const e=uX(),[t,r]=j.useState(!1),[n,l]=j.useState(!1);return j.useEffect(()=>{if(!e)l(!0),r(!1);else if(n){r(!0);const o=setTimeout(()=>{r(!1),l(!1)},3e3);return()=>clearTimeout(o)}},[e,n]),e&&!t?null:a.jsx("div",{className:`network-indicator ${e?"network-indicator--online":"network-indicator--offline"}`,children:a.jsx("div",{className:"network-indicator__content",children:e?a.jsxs(a.Fragment,{children:[a.jsx($P,{size:14}),a.jsx("span",{children:"Connexion rtablie"})]}):a.jsxs(a.Fragment,{children:[a.jsx(UP,{size:14}),a.jsx("span",{children:"Pas de connexion  mode hors-ligne"})]})})})},fX=()=>a.jsxs(ZP,{children:[a.jsx(cX,{}),a.jsx(dX,{}),a.jsxs(eP,{children:[a.jsx(lt,{path:"/",element:a.jsx(mn,{children:a.jsx(rq,{})})}),a.jsx(lt,{path:"/disciplines",element:a.jsx(mn,{children:a.jsx(iq,{})})}),a.jsx(lt,{path:"/disciplines/:id",element:a.jsx(mn,{children:a.jsx(oq,{})})}),a.jsx(lt,{path:"/premium",element:a.jsx(mn,{children:a.jsx(dq,{})})}),a.jsx(lt,{path:"/connexion",element:a.jsx(nq,{})}),a.jsx(lt,{path:"/inscription",element:a.jsx(aq,{})}),a.jsx(lt,{path:"/admin",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(mq,{})})})}),a.jsx(lt,{path:"/admin/disciplines",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(hq,{})})})}),a.jsx(lt,{path:"/admin/chapitres",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(pq,{})})})}),a.jsx(lt,{path:"/admin/ressources",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(vq,{})})})}),a.jsx(lt,{path:"/admin/quiz",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(Nq,{})})})}),a.jsx(lt,{path:"/admin/quiz/nouveau",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(Z_,{})})})}),a.jsx(lt,{path:"/admin/quiz/modifier/:quizId",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(Z_,{})})})}),a.jsx(lt,{path:"/admin/quiz-avance",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(Wq,{})})})}),a.jsx(lt,{path:"/admin/utilisateurs",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(zq,{})})})}),a.jsx(lt,{path:"/admin/resultats",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(Dq,{})})})}),a.jsx(lt,{path:"/admin/settings",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(Mq,{})})})}),a.jsx(lt,{path:"/admin/ebooks",element:a.jsx(fn,{children:a.jsx(hn,{children:a.jsx(oX,{})})})}),a.jsx(lt,{path:"/admin/premium",element:a.jsx(M_,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),a.jsx(lt,{path:"/quiz/:quizId",element:a.jsx(mn,{children:a.jsx(y3,{})})}),a.jsx(lt,{path:"/quiz-avance/:quizId",element:a.jsx(mn,{children:a.jsx(a3,{})})}),a.jsx(lt,{path:"/eleve/dashboard",element:a.jsx(mn,{children:a.jsx(kK,{})})}),a.jsx(lt,{path:"/eleve/suivi",element:a.jsx(mn,{children:a.jsx(PK,{})})}),a.jsx(lt,{path:"/prof/dashboard",element:a.jsx(JP,{children:a.jsx(mn,{children:a.jsx(IK,{})})})}),a.jsx(lt,{path:"/parent/dashboard",element:a.jsx(tx,{allowedRoles:["parent","admin"],children:a.jsx(mn,{children:a.jsx(BK,{})})})}),a.jsx(lt,{path:"/generateur",element:a.jsx(mn,{children:a.jsx(XK,{})})}),a.jsx(lt,{path:"/ebooks",element:a.jsx(mn,{children:a.jsx(sX,{isPremium:!1,onReadEbook:()=>{}})})}),a.jsx(lt,{path:"*",element:a.jsx(M_,{to:"/",replace:!0})})]})]}),IM=document.getElementById("root");if(!IM)throw new Error("L'lment #root n'existe pas");const mX=XP.createRoot(IM);mX.render(a.jsx(tP.StrictMode,{children:a.jsx(rP,{children:a.jsx(fX,{})})}));
//# sourceMappingURL=index-TxOrDpIb.js.map
