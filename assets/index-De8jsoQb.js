import{a as mf,b as Nq,g as Xa,r as g,u as it,c as ff,L as Le,d as Yn,e as rA,f as nA,R as _q,h as Sq,i as Ie,N as h1,j as wq,B as Cq}from"./vendor-react-BMsfgiGx.js";import{i as Eq,g as Aq,a as zq,p as Oq,b as Dq,c as Mq,o as kq,d as je,u as Qe,s as yt,e as Pq,f as Tq,h as qq,G as Rq,j as Iq,k as Lq,l as Mt,m as pf,w as we,n as Xe,q as _r,r as De,t as Ne,v as ze,x as Dn,T as Oe,y as pn,z as hf,A as kt,B as Mr,C as zc,D as Es,E as ca,F as Fs,H as Db,I as $q,J as Mb}from"./vendor-firebase-LntcAirY.js";import{H as Nx,B as dn,G as As,L as v1,S as Bq,C as zs,a as _c,b as om,U as Uq,c as Fq,d as g1,X as Li,M as Gq,e as Jd,f as Hq,P as Qq,g as Vq,h as Yq,F as Kq,i as kb,j as em,k as Wq,l as Xq,T as Zq,I as Jq,m as e3,Y as t3,n as cn,A as bs,o as Yl,p as $t,Z as aA,q as iA,r as to,s as Hi,t as cm,u as Sc,v as sA,w as Pb,x as _x,E as Zl,y as r3,z as x1,D as n3,J as a3,K as i3,R as s3,N as l3,O as o3,Q as wc,V as Sx,W as Av,_ as c3,$ as u3,a0 as wx,a1 as zv,a2 as Ov,a3 as d3,a4 as m3,a5 as f3,a6 as p3,a7 as h3,a8 as v3}from"./vendor-icons-FUmECsCv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var Dv={exports:{}},uc={};var b1;function g3(){if(b1)return uc;b1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:u,ref:l!==void 0?l:null,props:o}}return uc.Fragment=t,uc.jsx=n,uc.jsxs=n,uc}var y1;function x3(){return y1||(y1=1,Dv.exports=g3()),Dv.exports}var r=x3(),Mv={exports:{}},dc={},kv={exports:{}},Pv={};var j1;function b3(){return j1||(j1=1,(function(e){function t(q,X){var Q=q.length;q.push(X);e:for(;0<Q;){var $=Q-1>>>1,L=q[$];if(0<l(L,X))q[$]=X,q[Q]=L,Q=$;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var X=q[0],Q=q.pop();if(Q!==X){q[0]=Q;e:for(var $=0,L=q.length,pe=L>>>1;$<pe;){var te=2*($+1)-1,de=q[te],me=te+1,xe=q[me];if(0>l(de,Q))me<L&&0>l(xe,de)?(q[$]=xe,q[me]=Q,$=me):(q[$]=de,q[te]=Q,$=te);else if(me<L&&0>l(xe,Q))q[$]=xe,q[me]=Q,$=me;else break e}}return X}function l(q,X){var Q=q.sortIndex-X.sortIndex;return Q!==0?Q:q.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var f=[],p=[],h=1,v=null,b=3,x=!1,N=!1,j=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function E(q){for(var X=n(p);X!==null;){if(X.callback===null)a(p);else if(X.startTime<=q)a(p),X.sortIndex=X.expirationTime,t(f,X);else break;X=n(p)}}function D(q){if(j=!1,E(q),!N)if(n(f)!==null)N=!0,O||(O=!0,B());else{var X=n(p);X!==null&&M(D,X.startTime-q)}}var O=!1,T=-1,P=5,I=-1;function R(){return S?!0:!(e.unstable_now()-I<P)}function F(){if(S=!1,O){var q=e.unstable_now();I=q;var X=!0;try{e:{N=!1,j&&(j=!1,A(T),T=-1),x=!0;var Q=b;try{t:{for(E(q),v=n(f);v!==null&&!(v.expirationTime>q&&R());){var $=v.callback;if(typeof $=="function"){v.callback=null,b=v.priorityLevel;var L=$(v.expirationTime<=q);if(q=e.unstable_now(),typeof L=="function"){v.callback=L,E(q),X=!0;break t}v===n(f)&&a(f),E(q)}else a(f);v=n(f)}if(v!==null)X=!0;else{var pe=n(p);pe!==null&&M(D,pe.startTime-q),X=!1}}break e}finally{v=null,b=Q,x=!1}X=void 0}}finally{X?B():O=!1}}}var B;if(typeof w=="function")B=function(){w(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,V=G.port2;G.port1.onmessage=F,B=function(){V.postMessage(null)}}else B=function(){C(F,0)};function M(q,X){T=C(function(){q(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(q){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var Q=b;b=X;try{return q()}finally{b=Q}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Q=b;b=q;try{return X()}finally{b=Q}},e.unstable_scheduleCallback=function(q,X,Q){var $=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?$+Q:$):Q=$,q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Q+L,q={id:h++,callback:X,priorityLevel:q,startTime:Q,expirationTime:L,sortIndex:-1},Q>$?(q.sortIndex=Q,t(p,q),n(f)===null&&q===n(p)&&(j?(A(T),T=-1):j=!0,M(D,Q-$))):(q.sortIndex=L,t(f,q),N||x||(N=!0,O||(O=!0,B()))),q},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(q){var X=b;return function(){var Q=b;b=X;try{return q.apply(this,arguments)}finally{b=Q}}}})(Pv)),Pv}var N1;function y3(){return N1||(N1=1,kv.exports=b3()),kv.exports}var _1;function j3(){if(_1)return dc;_1=1;var e=y3(),t=mf(),n=Nq();function a(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(a(188))}function p(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(a(188));return s!==i?null:i}for(var c=i,m=s;;){var y=c.return;if(y===null)break;var _=y.alternate;if(_===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===c)return f(y),i;if(_===m)return f(y),s;_=_.sibling}throw Error(a(188))}if(c.return!==m.return)c=y,m=_;else{for(var z=!1,k=y.child;k;){if(k===c){z=!0,c=y,m=_;break}if(k===m){z=!0,m=y,c=_;break}k=k.sibling}if(!z){for(k=_.child;k;){if(k===c){z=!0,c=_,m=y;break}if(k===m){z=!0,m=_,c=y;break}k=k.sibling}if(!z)throw Error(a(189))}}if(c.alternate!==m)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?i:s}function h(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=h(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=F&&i[F]||i["@@iterator"],typeof i=="function"?i:null)}var G=Symbol.for("react.client.reference");function V(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===G?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case w:return i.displayName||"Context";case A:return(i._context.displayName||"Context")+".Consumer";case E:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case T:return s=i.displayName||null,s!==null?s:V(i.type)||"Memo";case P:s=i._payload,i=i._init;try{return V(i(s))}catch{}}return null}var M=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},$=[],L=-1;function pe(i){return{current:i}}function te(i){0>L||(i.current=$[L],$[L]=null,L--)}function de(i,s){L++,$[L]=i.current,i.current=s}var me=pe(null),xe=pe(null),Y=pe(null),he=pe(null);function Pe(i,s){switch(de(Y,s),de(xe,i),de(me,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?I_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=I_(s),i=L_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(me),de(me,i)}function se(){te(me),te(xe),te(Y)}function J(i){i.memoizedState!==null&&de(he,i);var s=me.current,c=L_(s,i.type);s!==c&&(de(xe,i),de(me,c))}function H(i){xe.current===i&&(te(me),te(xe)),he.current===i&&(te(he),sc._currentValue=Q)}var ce,Z;function _e(i){if(ce===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ce=s&&s[1]||"",Z=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+i+Z}var Fe=!1;function Ve(i,s){if(!i||Fe)return"";Fe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(s){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(ue){var ie=ue}Reflect.construct(i,[],be)}else{try{be.call()}catch(ue){ie=ue}i.call(be.prototype)}}else{try{throw Error()}catch(ue){ie=ue}(be=i())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(ue){if(ue&&ie&&typeof ue.stack=="string")return[ue.stack,ie.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),z=_[0],k=_[1];if(z&&k){var U=z.split(`
`),ae=k.split(`
`);for(y=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;y<ae.length&&!ae[y].includes("DetermineComponentFrameRoot");)y++;if(m===U.length||y===ae.length)for(m=U.length-1,y=ae.length-1;1<=m&&0<=y&&U[m]!==ae[y];)y--;for(;1<=m&&0<=y;m--,y--)if(U[m]!==ae[y]){if(m!==1||y!==1)do if(m--,y--,0>y||U[m]!==ae[y]){var ve=`
`+U[m].replace(" at new "," at ");return i.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",i.displayName)),ve}while(1<=m&&0<=y);break}}}finally{Fe=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?_e(c):""}function We(i,s){switch(i.tag){case 26:case 27:case 5:return _e(i.type);case 16:return _e("Lazy");case 13:return i.child!==s&&s!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Ve(i.type,!1);case 11:return Ve(i.type.render,!1);case 1:return Ve(i.type,!0);case 31:return _e("Activity");default:return""}}function Ft(i){try{var s="",c=null;do s+=We(i,c),c=i,i=i.return;while(i);return s}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Wr=Object.prototype.hasOwnProperty,Rr=e.unstable_scheduleCallback,Rn=e.unstable_cancelCallback,fe=e.unstable_shouldYield,Me=e.unstable_requestPaint,Re=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,ct=e.unstable_ImmediatePriority,ar=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,oi=e.unstable_LowPriority,Ir=e.unstable_IdlePriority,le=e.log,ye=e.unstable_setDisableYieldValue,Se=null,Ge=null;function qt(i){if(typeof le=="function"&&ye(i),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Se,i)}catch{}}var Pt=Math.clz32?Math.clz32:vp,vn=Math.log,Xi=Math.LN2;function vp(i){return i>>>=0,i===0?32:31-(vn(i)/Xi|0)|0}var Zs=256,Js=262144,el=4194304;function va(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Zn(i,s,c){var m=i.pendingLanes;if(m===0)return 0;var y=0,_=i.suspendedLanes,z=i.pingedLanes;i=i.warmLanes;var k=m&134217727;return k!==0?(m=k&~_,m!==0?y=va(m):(z&=k,z!==0?y=va(z):c||(c=k&~i,c!==0&&(y=va(c))))):(k=m&~_,k!==0?y=va(k):z!==0?y=va(z):c||(c=m&~i,c!==0&&(y=va(c)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,c=s&-s,_>=c||_===32&&(c&4194048)!==0)?s:y}function Zi(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function re(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $e(){var i=el;return el<<=1,(el&62914560)===0&&(el=4194304),i}function Nt(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function Sr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function yo(i,s,c,m,y,_){var z=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var k=i.entanglements,U=i.expirationTimes,ae=i.hiddenUpdates;for(c=z&~c;0<c;){var ve=31-Pt(c),be=1<<ve;k[ve]=0,U[ve]=-1;var ie=ae[ve];if(ie!==null)for(ae[ve]=null,ve=0;ve<ie.length;ve++){var ue=ie[ve];ue!==null&&(ue.lane&=-536870913)}c&=~be}m!==0&&Ji(i,m,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(z&~s))}function Ji(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var m=31-Pt(s);i.entangledLanes|=s,i.entanglements[m]=i.entanglements[m]|1073741824|c&261930}function jj(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var m=31-Pt(c),y=1<<m;y&s|i[m]&s&&(i[m]|=s),c&=~y}}function Nj(i,s){var c=s&-s;return c=(c&42)!==0?1:gp(c),(c&(i.suspendedLanes|s))!==0?0:c}function gp(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function xp(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function _j(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:o1(i.type))}function Sj(i,s){var c=X.p;try{return X.p=i,s()}finally{X.p=c}}var ci=Math.random().toString(36).slice(2),hr="__reactFiber$"+ci,Lr="__reactProps$"+ci,tl="__reactContainer$"+ci,bp="__reactEvents$"+ci,dP="__reactListeners$"+ci,mP="__reactHandles$"+ci,wj="__reactResources$"+ci,jo="__reactMarker$"+ci;function yp(i){delete i[hr],delete i[Lr],delete i[bp],delete i[dP],delete i[mP]}function rl(i){var s=i[hr];if(s)return s;for(var c=i.parentNode;c;){if(s=c[tl]||c[hr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=Q_(i);i!==null;){if(c=i[hr])return c;i=Q_(i)}return s}i=c,c=i.parentNode}return null}function nl(i){if(i=i[hr]||i[tl]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function No(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(a(33))}function al(i){var s=i[wj];return s||(s=i[wj]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ir(i){i[jo]=!0}var Cj=new Set,Ej={};function es(i,s){il(i,s),il(i+"Capture",s)}function il(i,s){for(Ej[i]=s,i=0;i<s.length;i++)Cj.add(s[i])}var fP=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Aj={},zj={};function pP(i){return Wr.call(zj,i)?!0:Wr.call(Aj,i)?!1:fP.test(i)?zj[i]=!0:(Aj[i]=!0,!1)}function gu(i,s,c){if(pP(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var m=s.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function xu(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function ga(i,s,c,m){if(m===null)i.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+m)}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Oj(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hP(i,s,c){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var y=m.get,_=m.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(z){c=""+z,_.call(this,z)}}),Object.defineProperty(i,s,{enumerable:m.enumerable}),{getValue:function(){return c},setValue:function(z){c=""+z},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function jp(i){if(!i._valueTracker){var s=Oj(i)?"checked":"value";i._valueTracker=hP(i,s,""+i[s])}}function Dj(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),m="";return i&&(m=Oj(i)?i.checked?"true":"false":i.value),i=m,i!==c?(s.setValue(i),!0):!1}function bu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var vP=/[\n"\\]/g;function xn(i){return i.replace(vP,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Np(i,s,c,m,y,_,z,k){i.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?i.type=z:i.removeAttribute("type"),s!=null?z==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+gn(s)):i.value!==""+gn(s)&&(i.value=""+gn(s)):z!=="submit"&&z!=="reset"||i.removeAttribute("value"),s!=null?_p(i,z,gn(s)):c!=null?_p(i,z,gn(c)):m!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+gn(k):i.removeAttribute("name")}function Mj(i,s,c,m,y,_,z,k){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){jp(i);return}c=c!=null?""+gn(c):"",s=s!=null?""+gn(s):c,k||s===i.value||(i.value=s),i.defaultValue=s}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=k?i.checked:!!m,i.defaultChecked=!!m,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(i.name=z),jp(i)}function _p(i,s,c){s==="number"&&bu(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function sl(i,s,c,m){if(i=i.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=s.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&m&&(i[c].defaultSelected=!0)}else{for(c=""+gn(c),s=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,m&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function kj(i,s,c){if(s!=null&&(s=""+gn(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+gn(c):""}function Pj(i,s,c,m){if(s==null){if(m!=null){if(c!=null)throw Error(a(92));if(M(m)){if(1<m.length)throw Error(a(93));m=m[0]}c=m}c==null&&(c=""),s=c}c=gn(s),i.defaultValue=c,m=i.textContent,m===c&&m!==""&&m!==null&&(i.value=m),jp(i)}function ll(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var gP=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tj(i,s,c){var m=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":m?i.setProperty(s,c):typeof c!="number"||c===0||gP.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function qj(i,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(i=i.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||s!=null&&s.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var y in s)m=s[y],s.hasOwnProperty(y)&&c[y]!==m&&Tj(i,y,m)}else for(var _ in s)s.hasOwnProperty(_)&&Tj(i,_,s[_])}function Sp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xP=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bP=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yu(i){return bP.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function xa(){}var wp=null;function Cp(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ol=null,cl=null;function Rj(i){var s=nl(i);if(s&&(i=s.stateNode)){var c=i[Lr]||null;e:switch(i=s.stateNode,s.type){case"input":if(Np(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+xn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var m=c[s];if(m!==i&&m.form===i.form){var y=m[Lr]||null;if(!y)throw Error(a(90));Np(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<c.length;s++)m=c[s],m.form===i.form&&Dj(m)}break e;case"textarea":kj(i,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&sl(i,!!c.multiple,s,!1)}}}var Ep=!1;function Ij(i,s,c){if(Ep)return i(s,c);Ep=!0;try{var m=i(s);return m}finally{if(Ep=!1,(ol!==null||cl!==null)&&(ld(),ol&&(s=ol,i=cl,cl=ol=null,Rj(s),i)))for(s=0;s<i.length;s++)Rj(i[s])}}function _o(i,s){var c=i.stateNode;if(c===null)return null;var m=c[Lr]||null;if(m===null)return null;c=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ap=!1;if(ba)try{var So={};Object.defineProperty(So,"passive",{get:function(){Ap=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{Ap=!1}var ui=null,zp=null,ju=null;function Lj(){if(ju)return ju;var i,s=zp,c=s.length,m,y="value"in ui?ui.value:ui.textContent,_=y.length;for(i=0;i<c&&s[i]===y[i];i++);var z=c-i;for(m=1;m<=z&&s[c-m]===y[_-m];m++);return ju=y.slice(i,1<m?1-m:void 0)}function Nu(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function _u(){return!0}function $j(){return!1}function $r(i){function s(c,m,y,_,z){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=_,this.target=z,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(c=i[k],this[k]=c?c(_):_[k]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_u:$j,this.isPropagationStopped=$j,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=_u)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=_u)},persist:function(){},isPersistent:_u}),s}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=$r(ts),wo=v({},ts,{view:0,detail:0}),yP=$r(wo),Op,Dp,Co,wu=v({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kp,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Co&&(Co&&i.type==="mousemove"?(Op=i.screenX-Co.screenX,Dp=i.screenY-Co.screenY):Dp=Op=0,Co=i),Op)},movementY:function(i){return"movementY"in i?i.movementY:Dp}}),Bj=$r(wu),jP=v({},wu,{dataTransfer:0}),NP=$r(jP),_P=v({},wo,{relatedTarget:0}),Mp=$r(_P),SP=v({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),wP=$r(SP),CP=v({},ts,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),EP=$r(CP),AP=v({},ts,{data:0}),Uj=$r(AP),zP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MP(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=DP[i])?!!s[i]:!1}function kp(){return MP}var kP=v({},wo,{key:function(i){if(i.key){var s=zP[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Nu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?OP[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kp,charCode:function(i){return i.type==="keypress"?Nu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Nu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),PP=$r(kP),TP=v({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fj=$r(TP),qP=v({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kp}),RP=$r(qP),IP=v({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),LP=$r(IP),$P=v({},wu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),BP=$r($P),UP=v({},ts,{newState:0,oldState:0}),FP=$r(UP),GP=[9,13,27,32],Pp=ba&&"CompositionEvent"in window,Eo=null;ba&&"documentMode"in document&&(Eo=document.documentMode);var HP=ba&&"TextEvent"in window&&!Eo,Gj=ba&&(!Pp||Eo&&8<Eo&&11>=Eo),Hj=" ",Qj=!1;function Vj(i,s){switch(i){case"keyup":return GP.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yj(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ul=!1;function QP(i,s){switch(i){case"compositionend":return Yj(s);case"keypress":return s.which!==32?null:(Qj=!0,Hj);case"textInput":return i=s.data,i===Hj&&Qj?null:i;default:return null}}function VP(i,s){if(ul)return i==="compositionend"||!Pp&&Vj(i,s)?(i=Lj(),ju=zp=ui=null,ul=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gj&&s.locale!=="ko"?null:s.data;default:return null}}var YP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kj(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!YP[i.type]:s==="textarea"}function Wj(i,s,c,m){ol?cl?cl.push(m):cl=[m]:ol=m,s=pd(s,"onChange"),0<s.length&&(c=new Su("onChange","change",null,c,m),i.push({event:c,listeners:s}))}var Ao=null,zo=null;function KP(i){M_(i,0)}function Cu(i){var s=No(i);if(Dj(s))return i}function Xj(i,s){if(i==="change")return s}var Zj=!1;if(ba){var Tp;if(ba){var qp="oninput"in document;if(!qp){var Jj=document.createElement("div");Jj.setAttribute("oninput","return;"),qp=typeof Jj.oninput=="function"}Tp=qp}else Tp=!1;Zj=Tp&&(!document.documentMode||9<document.documentMode)}function e0(){Ao&&(Ao.detachEvent("onpropertychange",t0),zo=Ao=null)}function t0(i){if(i.propertyName==="value"&&Cu(zo)){var s=[];Wj(s,zo,i,Cp(i)),Ij(KP,s)}}function WP(i,s,c){i==="focusin"?(e0(),Ao=s,zo=c,Ao.attachEvent("onpropertychange",t0)):i==="focusout"&&e0()}function XP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Cu(zo)}function ZP(i,s){if(i==="click")return Cu(s)}function JP(i,s){if(i==="input"||i==="change")return Cu(s)}function eT(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Xr=typeof Object.is=="function"?Object.is:eT;function Oo(i,s){if(Xr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),m=Object.keys(s);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!Wr.call(s,y)||!Xr(i[y],s[y]))return!1}return!0}function r0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function n0(i,s){var c=r0(i);i=0;for(var m;c;){if(c.nodeType===3){if(m=i+c.textContent.length,i<=s&&m>=s)return{node:c,offset:s-i};i=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=r0(c)}}function a0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?a0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function i0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=bu(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=bu(i.document)}return s}function Rp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var tT=ba&&"documentMode"in document&&11>=document.documentMode,dl=null,Ip=null,Do=null,Lp=!1;function s0(i,s,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Lp||dl==null||dl!==bu(m)||(m=dl,"selectionStart"in m&&Rp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Do&&Oo(Do,m)||(Do=m,m=pd(Ip,"onSelect"),0<m.length&&(s=new Su("onSelect","select",null,s,c),i.push({event:s,listeners:m}),s.target=dl)))}function rs(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var ml={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionrun:rs("Transition","TransitionRun"),transitionstart:rs("Transition","TransitionStart"),transitioncancel:rs("Transition","TransitionCancel"),transitionend:rs("Transition","TransitionEnd")},$p={},l0={};ba&&(l0=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function ns(i){if($p[i])return $p[i];if(!ml[i])return i;var s=ml[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in l0)return $p[i]=s[c];return i}var o0=ns("animationend"),c0=ns("animationiteration"),u0=ns("animationstart"),rT=ns("transitionrun"),nT=ns("transitionstart"),aT=ns("transitioncancel"),d0=ns("transitionend"),m0=new Map,Bp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bp.push("scrollEnd");function In(i,s){m0.set(i,s),es(s,[i])}var Eu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},bn=[],fl=0,Up=0;function Au(){for(var i=fl,s=Up=fl=0;s<i;){var c=bn[s];bn[s++]=null;var m=bn[s];bn[s++]=null;var y=bn[s];bn[s++]=null;var _=bn[s];if(bn[s++]=null,m!==null&&y!==null){var z=m.pending;z===null?y.next=y:(y.next=z.next,z.next=y),m.pending=y}_!==0&&f0(c,y,_)}}function zu(i,s,c,m){bn[fl++]=i,bn[fl++]=s,bn[fl++]=c,bn[fl++]=m,Up|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function Fp(i,s,c,m){return zu(i,s,c,m),Ou(i)}function as(i,s){return zu(i,null,null,s),Ou(i)}function f0(i,s,c){i.lanes|=c;var m=i.alternate;m!==null&&(m.lanes|=c);for(var y=!1,_=i.return;_!==null;)_.childLanes|=c,m=_.alternate,m!==null&&(m.childLanes|=c),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&s!==null&&(y=31-Pt(c),i=_.hiddenUpdates,m=i[y],m===null?i[y]=[s]:m.push(s),s.lane=c|536870912),_):null}function Ou(i){if(50<Jo)throw Jo=0,Zh=null,Error(a(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var pl={};function iT(i,s,c,m){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(i,s,c,m){return new iT(i,s,c,m)}function Gp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ya(i,s){var c=i.alternate;return c===null?(c=Zr(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function p0(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Du(i,s,c,m,y,_){var z=0;if(m=i,typeof i=="function")Gp(i)&&(z=1);else if(typeof i=="string")z=uq(i,c,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=Zr(31,c,s,y),i.elementType=I,i.lanes=_,i;case j:return is(c.children,y,_,s);case S:z=8,y|=24;break;case C:return i=Zr(12,c,s,y|2),i.elementType=C,i.lanes=_,i;case D:return i=Zr(13,c,s,y),i.elementType=D,i.lanes=_,i;case O:return i=Zr(19,c,s,y),i.elementType=O,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:z=10;break e;case A:z=9;break e;case E:z=11;break e;case T:z=14;break e;case P:z=16,m=null;break e}z=29,c=Error(a(130,i===null?"null":typeof i,"")),m=null}return s=Zr(z,c,s,y),s.elementType=i,s.type=m,s.lanes=_,s}function is(i,s,c,m){return i=Zr(7,i,m,s),i.lanes=c,i}function Hp(i,s,c){return i=Zr(6,i,null,s),i.lanes=c,i}function h0(i){var s=Zr(18,null,null,0);return s.stateNode=i,s}function Qp(i,s,c){return s=Zr(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var v0=new WeakMap;function yn(i,s){if(typeof i=="object"&&i!==null){var c=v0.get(i);return c!==void 0?c:(s={value:i,source:s,stack:Ft(s)},v0.set(i,s),s)}return{value:i,source:s,stack:Ft(s)}}var hl=[],vl=0,Mu=null,Mo=0,jn=[],Nn=0,di=null,Jn=1,ea="";function ja(i,s){hl[vl++]=Mo,hl[vl++]=Mu,Mu=i,Mo=s}function g0(i,s,c){jn[Nn++]=Jn,jn[Nn++]=ea,jn[Nn++]=di,di=i;var m=Jn;i=ea;var y=32-Pt(m)-1;m&=~(1<<y),c+=1;var _=32-Pt(s)+y;if(30<_){var z=y-y%5;_=(m&(1<<z)-1).toString(32),m>>=z,y-=z,Jn=1<<32-Pt(s)+y|c<<y|m,ea=_+i}else Jn=1<<_|c<<y|m,ea=i}function Vp(i){i.return!==null&&(ja(i,1),g0(i,1,0))}function Yp(i){for(;i===Mu;)Mu=hl[--vl],hl[vl]=null,Mo=hl[--vl],hl[vl]=null;for(;i===di;)di=jn[--Nn],jn[Nn]=null,ea=jn[--Nn],jn[Nn]=null,Jn=jn[--Nn],jn[Nn]=null}function x0(i,s){jn[Nn++]=Jn,jn[Nn++]=ea,jn[Nn++]=di,Jn=s.id,ea=s.overflow,di=i}var vr=null,Ct=null,nt=!1,mi=null,_n=!1,Kp=Error(a(519));function fi(i){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ko(yn(s,i)),Kp}function b0(i){var s=i.stateNode,c=i.type,m=i.memoizedProps;switch(s[hr]=i,s[Lr]=m,c){case"dialog":Je("cancel",s),Je("close",s);break;case"iframe":case"object":case"embed":Je("load",s);break;case"video":case"audio":for(c=0;c<tc.length;c++)Je(tc[c],s);break;case"source":Je("error",s);break;case"img":case"image":case"link":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"input":Je("invalid",s),Mj(s,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Je("invalid",s);break;case"textarea":Je("invalid",s),Pj(s,m.value,m.defaultValue,m.children)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||m.suppressHydrationWarning===!0||q_(s.textContent,c)?(m.popover!=null&&(Je("beforetoggle",s),Je("toggle",s)),m.onScroll!=null&&Je("scroll",s),m.onScrollEnd!=null&&Je("scrollend",s),m.onClick!=null&&(s.onclick=xa),s=!0):s=!1,s||fi(i,!0)}function y0(i){for(vr=i.return;vr;)switch(vr.tag){case 5:case 31:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:vr=vr.return}}function gl(i){if(i!==vr)return!1;if(!nt)return y0(i),nt=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||fv(i.type,i.memoizedProps)),c=!c),c&&Ct&&fi(i),y0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));Ct=H_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));Ct=H_(i)}else s===27?(s=Ct,Ei(i.type)?(i=xv,xv=null,Ct=i):Ct=s):Ct=vr?wn(i.stateNode.nextSibling):null;return!0}function ss(){Ct=vr=null,nt=!1}function Wp(){var i=mi;return i!==null&&(Gr===null?Gr=i:Gr.push.apply(Gr,i),mi=null),i}function ko(i){mi===null?mi=[i]:mi.push(i)}var Xp=pe(null),ls=null,Na=null;function pi(i,s,c){de(Xp,s._currentValue),s._currentValue=c}function _a(i){i._currentValue=Xp.current,te(Xp)}function Zp(i,s,c){for(;i!==null;){var m=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),i===c)break;i=i.return}}function Jp(i,s,c,m){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var z=y.child;_=_.firstContext;e:for(;_!==null;){var k=_;_=y;for(var U=0;U<s.length;U++)if(k.context===s[U]){_.lanes|=c,k=_.alternate,k!==null&&(k.lanes|=c),Zp(_.return,c,i),m||(z=null);break e}_=k.next}}else if(y.tag===18){if(z=y.return,z===null)throw Error(a(341));z.lanes|=c,_=z.alternate,_!==null&&(_.lanes|=c),Zp(z,c,i),z=null}else z=y.child;if(z!==null)z.return=y;else for(z=y;z!==null;){if(z===i){z=null;break}if(y=z.sibling,y!==null){y.return=z.return,z=y;break}z=z.return}y=z}}function xl(i,s,c,m){i=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var z=y.alternate;if(z===null)throw Error(a(387));if(z=z.memoizedProps,z!==null){var k=y.type;Xr(y.pendingProps.value,z.value)||(i!==null?i.push(k):i=[k])}}else if(y===he.current){if(z=y.alternate,z===null)throw Error(a(387));z.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(sc):i=[sc])}y=y.return}i!==null&&Jp(s,i,c,m),s.flags|=262144}function ku(i){for(i=i.firstContext;i!==null;){if(!Xr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function os(i){ls=i,Na=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function gr(i){return j0(ls,i)}function Pu(i,s){return ls===null&&os(i),j0(i,s)}function j0(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Na===null){if(i===null)throw Error(a(308));Na=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Na=Na.next=s;return c}var sT=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,m){i.push(m)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},lT=e.unstable_scheduleCallback,oT=e.unstable_NormalPriority,Vt={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eh(){return{controller:new sT,data:new Map,refCount:0}}function Po(i){i.refCount--,i.refCount===0&&lT(oT,function(){i.controller.abort()})}var To=null,th=0,bl=0,yl=null;function cT(i,s){if(To===null){var c=To=[];th=0,bl=av(),yl={status:"pending",value:void 0,then:function(m){c.push(m)}}}return th++,s.then(N0,N0),s}function N0(){if(--th===0&&To!==null){yl!==null&&(yl.status="fulfilled");var i=To;To=null,bl=0,yl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function uT(i,s){var c=[],m={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return i.then(function(){m.status="fulfilled",m.value=s;for(var y=0;y<c.length;y++)(0,c[y])(s)},function(y){for(m.status="rejected",m.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),m}var _0=q.S;q.S=function(i,s){s_=Re(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&cT(i,s),_0!==null&&_0(i,s)};var cs=pe(null);function rh(){var i=cs.current;return i!==null?i:_t.pooledCache}function Tu(i,s){s===null?de(cs,cs.current):de(cs,s.pool)}function S0(){var i=rh();return i===null?null:{parent:Vt._currentValue,pool:i}}var jl=Error(a(460)),nh=Error(a(474)),qu=Error(a(542)),Ru={then:function(){}};function w0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function C0(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(xa,xa),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,A0(i),i;default:if(typeof s.status=="string")s.then(xa,xa);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=s,i.status="pending",i.then(function(m){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=m}},function(m){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=m}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,A0(i),i}throw ds=s,jl}}function us(i){try{var s=i._init;return s(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ds=c,jl):c}}var ds=null;function E0(){if(ds===null)throw Error(a(459));var i=ds;return ds=null,i}function A0(i){if(i===jl||i===qu)throw Error(a(483))}var Nl=null,qo=0;function Iu(i){var s=qo;return qo+=1,Nl===null&&(Nl=[]),C0(Nl,i,s)}function Ro(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Lu(i,s){throw s.$$typeof===b?Error(a(525)):(i=Object.prototype.toString.call(s),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function z0(i){function s(ee,K){if(i){var ne=ee.deletions;ne===null?(ee.deletions=[K],ee.flags|=16):ne.push(K)}}function c(ee,K){if(!i)return null;for(;K!==null;)s(ee,K),K=K.sibling;return null}function m(ee){for(var K=new Map;ee!==null;)ee.key!==null?K.set(ee.key,ee):K.set(ee.index,ee),ee=ee.sibling;return K}function y(ee,K){return ee=ya(ee,K),ee.index=0,ee.sibling=null,ee}function _(ee,K,ne){return ee.index=ne,i?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<K?(ee.flags|=67108866,K):ne):(ee.flags|=67108866,K)):(ee.flags|=1048576,K)}function z(ee){return i&&ee.alternate===null&&(ee.flags|=67108866),ee}function k(ee,K,ne,ge){return K===null||K.tag!==6?(K=Hp(ne,ee.mode,ge),K.return=ee,K):(K=y(K,ne),K.return=ee,K)}function U(ee,K,ne,ge){var qe=ne.type;return qe===j?ve(ee,K,ne.props.children,ge,ne.key):K!==null&&(K.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&us(qe)===K.type)?(K=y(K,ne.props),Ro(K,ne),K.return=ee,K):(K=Du(ne.type,ne.key,ne.props,null,ee.mode,ge),Ro(K,ne),K.return=ee,K)}function ae(ee,K,ne,ge){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=Qp(ne,ee.mode,ge),K.return=ee,K):(K=y(K,ne.children||[]),K.return=ee,K)}function ve(ee,K,ne,ge,qe){return K===null||K.tag!==7?(K=is(ne,ee.mode,ge,qe),K.return=ee,K):(K=y(K,ne),K.return=ee,K)}function be(ee,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Hp(""+K,ee.mode,ne),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return ne=Du(K.type,K.key,K.props,null,ee.mode,ne),Ro(ne,K),ne.return=ee,ne;case N:return K=Qp(K,ee.mode,ne),K.return=ee,K;case P:return K=us(K),be(ee,K,ne)}if(M(K)||B(K))return K=is(K,ee.mode,ne,null),K.return=ee,K;if(typeof K.then=="function")return be(ee,Iu(K),ne);if(K.$$typeof===w)return be(ee,Pu(ee,K),ne);Lu(ee,K)}return null}function ie(ee,K,ne,ge){var qe=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return qe!==null?null:k(ee,K,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case x:return ne.key===qe?U(ee,K,ne,ge):null;case N:return ne.key===qe?ae(ee,K,ne,ge):null;case P:return ne=us(ne),ie(ee,K,ne,ge)}if(M(ne)||B(ne))return qe!==null?null:ve(ee,K,ne,ge,null);if(typeof ne.then=="function")return ie(ee,K,Iu(ne),ge);if(ne.$$typeof===w)return ie(ee,K,Pu(ee,ne),ge);Lu(ee,ne)}return null}function ue(ee,K,ne,ge,qe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ee=ee.get(ne)||null,k(K,ee,""+ge,qe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case x:return ee=ee.get(ge.key===null?ne:ge.key)||null,U(K,ee,ge,qe);case N:return ee=ee.get(ge.key===null?ne:ge.key)||null,ae(K,ee,ge,qe);case P:return ge=us(ge),ue(ee,K,ne,ge,qe)}if(M(ge)||B(ge))return ee=ee.get(ne)||null,ve(K,ee,ge,qe,null);if(typeof ge.then=="function")return ue(ee,K,ne,Iu(ge),qe);if(ge.$$typeof===w)return ue(ee,K,ne,Pu(K,ge),qe);Lu(K,ge)}return null}function Ee(ee,K,ne,ge){for(var qe=null,st=null,ke=K,Ke=K=0,tt=null;ke!==null&&Ke<ne.length;Ke++){ke.index>Ke?(tt=ke,ke=null):tt=ke.sibling;var lt=ie(ee,ke,ne[Ke],ge);if(lt===null){ke===null&&(ke=tt);break}i&&ke&&lt.alternate===null&&s(ee,ke),K=_(lt,K,Ke),st===null?qe=lt:st.sibling=lt,st=lt,ke=tt}if(Ke===ne.length)return c(ee,ke),nt&&ja(ee,Ke),qe;if(ke===null){for(;Ke<ne.length;Ke++)ke=be(ee,ne[Ke],ge),ke!==null&&(K=_(ke,K,Ke),st===null?qe=ke:st.sibling=ke,st=ke);return nt&&ja(ee,Ke),qe}for(ke=m(ke);Ke<ne.length;Ke++)tt=ue(ke,ee,Ke,ne[Ke],ge),tt!==null&&(i&&tt.alternate!==null&&ke.delete(tt.key===null?Ke:tt.key),K=_(tt,K,Ke),st===null?qe=tt:st.sibling=tt,st=tt);return i&&ke.forEach(function(Mi){return s(ee,Mi)}),nt&&ja(ee,Ke),qe}function Ue(ee,K,ne,ge){if(ne==null)throw Error(a(151));for(var qe=null,st=null,ke=K,Ke=K=0,tt=null,lt=ne.next();ke!==null&&!lt.done;Ke++,lt=ne.next()){ke.index>Ke?(tt=ke,ke=null):tt=ke.sibling;var Mi=ie(ee,ke,lt.value,ge);if(Mi===null){ke===null&&(ke=tt);break}i&&ke&&Mi.alternate===null&&s(ee,ke),K=_(Mi,K,Ke),st===null?qe=Mi:st.sibling=Mi,st=Mi,ke=tt}if(lt.done)return c(ee,ke),nt&&ja(ee,Ke),qe;if(ke===null){for(;!lt.done;Ke++,lt=ne.next())lt=be(ee,lt.value,ge),lt!==null&&(K=_(lt,K,Ke),st===null?qe=lt:st.sibling=lt,st=lt);return nt&&ja(ee,Ke),qe}for(ke=m(ke);!lt.done;Ke++,lt=ne.next())lt=ue(ke,ee,Ke,lt.value,ge),lt!==null&&(i&&lt.alternate!==null&&ke.delete(lt.key===null?Ke:lt.key),K=_(lt,K,Ke),st===null?qe=lt:st.sibling=lt,st=lt);return i&&ke.forEach(function(jq){return s(ee,jq)}),nt&&ja(ee,Ke),qe}function xt(ee,K,ne,ge){if(typeof ne=="object"&&ne!==null&&ne.type===j&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case x:e:{for(var qe=ne.key;K!==null;){if(K.key===qe){if(qe=ne.type,qe===j){if(K.tag===7){c(ee,K.sibling),ge=y(K,ne.props.children),ge.return=ee,ee=ge;break e}}else if(K.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&us(qe)===K.type){c(ee,K.sibling),ge=y(K,ne.props),Ro(ge,ne),ge.return=ee,ee=ge;break e}c(ee,K);break}else s(ee,K);K=K.sibling}ne.type===j?(ge=is(ne.props.children,ee.mode,ge,ne.key),ge.return=ee,ee=ge):(ge=Du(ne.type,ne.key,ne.props,null,ee.mode,ge),Ro(ge,ne),ge.return=ee,ee=ge)}return z(ee);case N:e:{for(qe=ne.key;K!==null;){if(K.key===qe)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){c(ee,K.sibling),ge=y(K,ne.children||[]),ge.return=ee,ee=ge;break e}else{c(ee,K);break}else s(ee,K);K=K.sibling}ge=Qp(ne,ee.mode,ge),ge.return=ee,ee=ge}return z(ee);case P:return ne=us(ne),xt(ee,K,ne,ge)}if(M(ne))return Ee(ee,K,ne,ge);if(B(ne)){if(qe=B(ne),typeof qe!="function")throw Error(a(150));return ne=qe.call(ne),Ue(ee,K,ne,ge)}if(typeof ne.then=="function")return xt(ee,K,Iu(ne),ge);if(ne.$$typeof===w)return xt(ee,K,Pu(ee,ne),ge);Lu(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(c(ee,K.sibling),ge=y(K,ne),ge.return=ee,ee=ge):(c(ee,K),ge=Hp(ne,ee.mode,ge),ge.return=ee,ee=ge),z(ee)):c(ee,K)}return function(ee,K,ne,ge){try{qo=0;var qe=xt(ee,K,ne,ge);return Nl=null,qe}catch(ke){if(ke===jl||ke===qu)throw ke;var st=Zr(29,ke,null,ee.mode);return st.lanes=ge,st.return=ee,st}}}var ms=z0(!0),O0=z0(!1),hi=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ih(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function vi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function gi(i,s,c){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var y=m.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),m.pending=s,s=Ou(i),f0(i,null,c),s}return zu(i,m,s,c),Ou(i)}function Io(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var m=s.lanes;m&=i.pendingLanes,c|=m,s.lanes=c,jj(i,c)}}function sh(i,s){var c=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var z={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?y=_=z:_=_.next=z,c=c.next}while(c!==null);_===null?y=_=s:_=_.next=s}else y=_=s;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var lh=!1;function Lo(){if(lh){var i=yl;if(i!==null)throw i}}function $o(i,s,c,m){lh=!1;var y=i.updateQueue;hi=!1;var _=y.firstBaseUpdate,z=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var U=k,ae=U.next;U.next=null,z===null?_=ae:z.next=ae,z=U;var ve=i.alternate;ve!==null&&(ve=ve.updateQueue,k=ve.lastBaseUpdate,k!==z&&(k===null?ve.firstBaseUpdate=ae:k.next=ae,ve.lastBaseUpdate=U))}if(_!==null){var be=y.baseState;z=0,ve=ae=U=null,k=_;do{var ie=k.lane&-536870913,ue=ie!==k.lane;if(ue?(et&ie)===ie:(m&ie)===ie){ie!==0&&ie===bl&&(lh=!0),ve!==null&&(ve=ve.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ee=i,Ue=k;ie=s;var xt=c;switch(Ue.tag){case 1:if(Ee=Ue.payload,typeof Ee=="function"){be=Ee.call(xt,be,ie);break e}be=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ue.payload,ie=typeof Ee=="function"?Ee.call(xt,be,ie):Ee,ie==null)break e;be=v({},be,ie);break e;case 2:hi=!0}}ie=k.callback,ie!==null&&(i.flags|=64,ue&&(i.flags|=8192),ue=y.callbacks,ue===null?y.callbacks=[ie]:ue.push(ie))}else ue={lane:ie,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ve===null?(ae=ve=ue,U=be):ve=ve.next=ue,z|=ie;if(k=k.next,k===null){if(k=y.shared.pending,k===null)break;ue=k,k=ue.next,ue.next=null,y.lastBaseUpdate=ue,y.shared.pending=null}}while(!0);ve===null&&(U=be),y.baseState=U,y.firstBaseUpdate=ae,y.lastBaseUpdate=ve,_===null&&(y.shared.lanes=0),Ni|=z,i.lanes=z,i.memoizedState=be}}function D0(i,s){if(typeof i!="function")throw Error(a(191,i));i.call(s)}function M0(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)D0(c[i],s)}var _l=pe(null),$u=pe(0);function k0(i,s){i=Ma,de($u,i),de(_l,s),Ma=i|s.baseLanes}function oh(){de($u,Ma),de(_l,_l.current)}function ch(){Ma=$u.current,te(_l),te($u)}var Jr=pe(null),Sn=null;function xi(i){var s=i.alternate;de(Gt,Gt.current&1),de(Jr,i),Sn===null&&(s===null||_l.current!==null||s.memoizedState!==null)&&(Sn=i)}function uh(i){de(Gt,Gt.current),de(Jr,i),Sn===null&&(Sn=i)}function P0(i){i.tag===22?(de(Gt,Gt.current),de(Jr,i),Sn===null&&(Sn=i)):bi()}function bi(){de(Gt,Gt.current),de(Jr,Jr.current)}function en(i){te(Jr),Sn===i&&(Sn=null),te(Gt)}var Gt=pe(0);function Bu(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||vv(c)||gv(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Sa=0,Ye=null,vt=null,Yt=null,Uu=!1,Sl=!1,fs=!1,Fu=0,Bo=0,wl=null,dT=0;function Rt(){throw Error(a(321))}function dh(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!Xr(i[c],s[c]))return!1;return!0}function mh(i,s,c,m,y,_){return Sa=_,Ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=i===null||i.memoizedState===null?gN:Eh,fs=!1,_=c(m,y),fs=!1,Sl&&(_=q0(s,c,m,y)),T0(i),_}function T0(i){q.H=Go;var s=vt!==null&&vt.next!==null;if(Sa=0,Yt=vt=Ye=null,Uu=!1,Bo=0,wl=null,s)throw Error(a(300));i===null||Kt||(i=i.dependencies,i!==null&&ku(i)&&(Kt=!0))}function q0(i,s,c,m){Ye=i;var y=0;do{if(Sl&&(wl=null),Bo=0,Sl=!1,25<=y)throw Error(a(301));if(y+=1,Yt=vt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}q.H=xN,_=s(c,m)}while(Sl);return _}function mT(){var i=q.H,s=i.useState()[0];return s=typeof s.then=="function"?Uo(s):s,i=i.useState()[0],(vt!==null?vt.memoizedState:null)!==i&&(Ye.flags|=1024),s}function fh(){var i=Fu!==0;return Fu=0,i}function ph(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function hh(i){if(Uu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Uu=!1}Sa=0,Yt=vt=Ye=null,Sl=!1,Bo=Fu=0,wl=null}function zr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Ye.memoizedState=Yt=i:Yt=Yt.next=i,Yt}function Ht(){if(vt===null){var i=Ye.alternate;i=i!==null?i.memoizedState:null}else i=vt.next;var s=Yt===null?Ye.memoizedState:Yt.next;if(s!==null)Yt=s,vt=i;else{if(i===null)throw Ye.alternate===null?Error(a(467)):Error(a(310));vt=i,i={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Yt===null?Ye.memoizedState=Yt=i:Yt=Yt.next=i}return Yt}function Gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uo(i){var s=Bo;return Bo+=1,wl===null&&(wl=[]),i=C0(wl,i,s),s=Ye,(Yt===null?s.memoizedState:Yt.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?gN:Eh),i}function Hu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Uo(i);if(i.$$typeof===w)return gr(i)}throw Error(a(438,String(i)))}function vh(i){var s=null,c=Ye.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var m=Ye.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(s={data:m.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Gu(),Ye.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),m=0;m<i;m++)c[m]=R;return s.index++,c}function wa(i,s){return typeof s=="function"?s(i):s}function Qu(i){var s=Ht();return gh(s,vt,i)}function gh(i,s,c){var m=i.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=c;var y=i.baseQueue,_=m.pending;if(_!==null){if(y!==null){var z=y.next;y.next=_.next,_.next=z}s.baseQueue=y=_,m.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{s=y.next;var k=z=null,U=null,ae=s,ve=!1;do{var be=ae.lane&-536870913;if(be!==ae.lane?(et&be)===be:(Sa&be)===be){var ie=ae.revertLane;if(ie===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),be===bl&&(ve=!0);else if((Sa&ie)===ie){ae=ae.next,ie===bl&&(ve=!0);continue}else be={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},U===null?(k=U=be,z=_):U=U.next=be,Ye.lanes|=ie,Ni|=ie;be=ae.action,fs&&c(_,be),_=ae.hasEagerState?ae.eagerState:c(_,be)}else ie={lane:be,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},U===null?(k=U=ie,z=_):U=U.next=ie,Ye.lanes|=be,Ni|=be;ae=ae.next}while(ae!==null&&ae!==s);if(U===null?z=_:U.next=k,!Xr(_,i.memoizedState)&&(Kt=!0,ve&&(c=yl,c!==null)))throw c;i.memoizedState=_,i.baseState=z,i.baseQueue=U,m.lastRenderedState=_}return y===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function xh(i){var s=Ht(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var m=c.dispatch,y=c.pending,_=s.memoizedState;if(y!==null){c.pending=null;var z=y=y.next;do _=i(_,z.action),z=z.next;while(z!==y);Xr(_,s.memoizedState)||(Kt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),c.lastRenderedState=_}return[_,m]}function R0(i,s,c){var m=Ye,y=Ht(),_=nt;if(_){if(c===void 0)throw Error(a(407));c=c()}else c=s();var z=!Xr((vt||y).memoizedState,c);if(z&&(y.memoizedState=c,Kt=!0),y=y.queue,jh($0.bind(null,m,y,i),[i]),y.getSnapshot!==s||z||Yt!==null&&Yt.memoizedState.tag&1){if(m.flags|=2048,Cl(9,{destroy:void 0},L0.bind(null,m,y,c,s),null),_t===null)throw Error(a(349));_||(Sa&127)!==0||I0(m,s,c)}return c}function I0(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Ye.updateQueue,s===null?(s=Gu(),Ye.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function L0(i,s,c,m){s.value=c,s.getSnapshot=m,B0(s)&&U0(i)}function $0(i,s,c){return c(function(){B0(s)&&U0(i)})}function B0(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!Xr(i,c)}catch{return!0}}function U0(i){var s=as(i,2);s!==null&&Hr(s,i,2)}function bh(i){var s=zr();if(typeof i=="function"){var c=i;if(i=c(),fs){qt(!0);try{c()}finally{qt(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:i},s}function F0(i,s,c,m){return i.baseState=c,gh(i,vt,typeof m=="function"?m:wa)}function fT(i,s,c,m,y){if(Ku(i))throw Error(a(485));if(i=s.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){_.listeners.push(z)}};q.T!==null?c(!0):_.isTransition=!1,m(_),c=s.pending,c===null?(_.next=s.pending=_,G0(s,_)):(_.next=c.next,s.pending=c.next=_)}}function G0(i,s){var c=s.action,m=s.payload,y=i.state;if(s.isTransition){var _=q.T,z={};q.T=z;try{var k=c(y,m),U=q.S;U!==null&&U(z,k),H0(i,s,k)}catch(ae){yh(i,s,ae)}finally{_!==null&&z.types!==null&&(_.types=z.types),q.T=_}}else try{_=c(y,m),H0(i,s,_)}catch(ae){yh(i,s,ae)}}function H0(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){Q0(i,s,m)},function(m){return yh(i,s,m)}):Q0(i,s,c)}function Q0(i,s,c){s.status="fulfilled",s.value=c,V0(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,G0(i,c)))}function yh(i,s,c){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do s.status="rejected",s.reason=c,V0(s),s=s.next;while(s!==m)}i.action=null}function V0(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Y0(i,s){return s}function K0(i,s){if(nt){var c=_t.formState;if(c!==null){e:{var m=Ye;if(nt){if(Ct){t:{for(var y=Ct,_=_n;y.nodeType!==8;){if(!_){y=null;break t}if(y=wn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Ct=wn(y.nextSibling),m=y.data==="F!";break e}}fi(m)}m=!1}m&&(s=c[0])}}return c=zr(),c.memoizedState=c.baseState=s,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y0,lastRenderedState:s},c.queue=m,c=pN.bind(null,Ye,m),m.dispatch=c,m=bh(!1),_=Ch.bind(null,Ye,!1,m.queue),m=zr(),y={state:s,dispatch:null,action:i,pending:null},m.queue=y,c=fT.bind(null,Ye,y,_,c),y.dispatch=c,m.memoizedState=i,[s,c,!1]}function W0(i){var s=Ht();return X0(s,vt,i)}function X0(i,s,c){if(s=gh(i,s,Y0)[0],i=Qu(wa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var m=Uo(s)}catch(z){throw z===jl?qu:z}else m=s;s=Ht();var y=s.queue,_=y.dispatch;return c!==s.memoizedState&&(Ye.flags|=2048,Cl(9,{destroy:void 0},pT.bind(null,y,c),null)),[m,_,i]}function pT(i,s){i.action=s}function Z0(i){var s=Ht(),c=vt;if(c!==null)return X0(s,c,i);Ht(),s=s.memoizedState,c=Ht();var m=c.queue.dispatch;return c.memoizedState=i,[s,m,!1]}function Cl(i,s,c,m){return i={tag:i,create:c,deps:m,inst:s,next:null},s=Ye.updateQueue,s===null&&(s=Gu(),Ye.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(m=c.next,c.next=i,i.next=m,s.lastEffect=i),i}function J0(){return Ht().memoizedState}function Vu(i,s,c,m){var y=zr();Ye.flags|=i,y.memoizedState=Cl(1|s,{destroy:void 0},c,m===void 0?null:m)}function Yu(i,s,c,m){var y=Ht();m=m===void 0?null:m;var _=y.memoizedState.inst;vt!==null&&m!==null&&dh(m,vt.memoizedState.deps)?y.memoizedState=Cl(s,_,c,m):(Ye.flags|=i,y.memoizedState=Cl(1|s,_,c,m))}function eN(i,s){Vu(8390656,8,i,s)}function jh(i,s){Yu(2048,8,i,s)}function hT(i){Ye.flags|=4;var s=Ye.updateQueue;if(s===null)s=Gu(),Ye.updateQueue=s,s.events=[i];else{var c=s.events;c===null?s.events=[i]:c.push(i)}}function tN(i){var s=Ht().memoizedState;return hT({ref:s,nextImpl:i}),function(){if((ut&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function rN(i,s){return Yu(4,2,i,s)}function nN(i,s){return Yu(4,4,i,s)}function aN(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function iN(i,s,c){c=c!=null?c.concat([i]):null,Yu(4,4,aN.bind(null,s,i),c)}function Nh(){}function sN(i,s){var c=Ht();s=s===void 0?null:s;var m=c.memoizedState;return s!==null&&dh(s,m[1])?m[0]:(c.memoizedState=[i,s],i)}function lN(i,s){var c=Ht();s=s===void 0?null:s;var m=c.memoizedState;if(s!==null&&dh(s,m[1]))return m[0];if(m=i(),fs){qt(!0);try{i()}finally{qt(!1)}}return c.memoizedState=[m,s],m}function _h(i,s,c){return c===void 0||(Sa&1073741824)!==0&&(et&261930)===0?i.memoizedState=s:(i.memoizedState=c,i=o_(),Ye.lanes|=i,Ni|=i,c)}function oN(i,s,c,m){return Xr(c,s)?c:_l.current!==null?(i=_h(i,c,m),Xr(i,s)||(Kt=!0),i):(Sa&42)===0||(Sa&1073741824)!==0&&(et&261930)===0?(Kt=!0,i.memoizedState=c):(i=o_(),Ye.lanes|=i,Ni|=i,s)}function cN(i,s,c,m,y){var _=X.p;X.p=_!==0&&8>_?_:8;var z=q.T,k={};q.T=k,Ch(i,!1,s,c);try{var U=y(),ae=q.S;if(ae!==null&&ae(k,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ve=uT(U,m);Fo(i,s,ve,nn(i))}else Fo(i,s,m,nn(i))}catch(be){Fo(i,s,{then:function(){},status:"rejected",reason:be},nn())}finally{X.p=_,z!==null&&k.types!==null&&(z.types=k.types),q.T=z}}function vT(){}function Sh(i,s,c,m){if(i.tag!==5)throw Error(a(476));var y=uN(i).queue;cN(i,y,s,Q,c===null?vT:function(){return dN(i),c(m)})}function uN(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:Q},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function dN(i){var s=uN(i);s.next===null&&(s=i.alternate.memoizedState),Fo(i,s.next.queue,{},nn())}function wh(){return gr(sc)}function mN(){return Ht().memoizedState}function fN(){return Ht().memoizedState}function gT(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=nn();i=vi(c);var m=gi(s,i,c);m!==null&&(Hr(m,s,c),Io(m,s,c)),s={cache:eh()},i.payload=s;return}s=s.return}}function xT(i,s,c){var m=nn();c={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ku(i)?hN(s,c):(c=Fp(i,s,c,m),c!==null&&(Hr(c,i,m),vN(c,s,m)))}function pN(i,s,c){var m=nn();Fo(i,s,c,m)}function Fo(i,s,c,m){var y={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ku(i))hN(s,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var z=s.lastRenderedState,k=_(z,c);if(y.hasEagerState=!0,y.eagerState=k,Xr(k,z))return zu(i,s,y,0),_t===null&&Au(),!1}catch{}if(c=Fp(i,s,y,m),c!==null)return Hr(c,i,m),vN(c,s,m),!0}return!1}function Ch(i,s,c,m){if(m={lane:2,revertLane:av(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Ku(i)){if(s)throw Error(a(479))}else s=Fp(i,c,m,2),s!==null&&Hr(s,i,2)}function Ku(i){var s=i.alternate;return i===Ye||s!==null&&s===Ye}function hN(i,s){Sl=Uu=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function vN(i,s,c){if((c&4194048)!==0){var m=s.lanes;m&=i.pendingLanes,c|=m,s.lanes=c,jj(i,c)}}var Go={readContext:gr,use:Hu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Go.useEffectEvent=Rt;var gN={readContext:gr,use:Hu,useCallback:function(i,s){return zr().memoizedState=[i,s===void 0?null:s],i},useContext:gr,useEffect:eN,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,Vu(4194308,4,aN.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Vu(4194308,4,i,s)},useInsertionEffect:function(i,s){Vu(4,2,i,s)},useMemo:function(i,s){var c=zr();s=s===void 0?null:s;var m=i();if(fs){qt(!0);try{i()}finally{qt(!1)}}return c.memoizedState=[m,s],m},useReducer:function(i,s,c){var m=zr();if(c!==void 0){var y=c(s);if(fs){qt(!0);try{c(s)}finally{qt(!1)}}}else y=s;return m.memoizedState=m.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},m.queue=i,i=i.dispatch=xT.bind(null,Ye,i),[m.memoizedState,i]},useRef:function(i){var s=zr();return i={current:i},s.memoizedState=i},useState:function(i){i=bh(i);var s=i.queue,c=pN.bind(null,Ye,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:Nh,useDeferredValue:function(i,s){var c=zr();return _h(c,i,s)},useTransition:function(){var i=bh(!1);return i=cN.bind(null,Ye,i.queue,!0,!1),zr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var m=Ye,y=zr();if(nt){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),_t===null)throw Error(a(349));(et&127)!==0||I0(m,s,c)}y.memoizedState=c;var _={value:c,getSnapshot:s};return y.queue=_,eN($0.bind(null,m,_,i),[i]),m.flags|=2048,Cl(9,{destroy:void 0},L0.bind(null,m,_,c,s),null),c},useId:function(){var i=zr(),s=_t.identifierPrefix;if(nt){var c=ea,m=Jn;c=(m&~(1<<32-Pt(m)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Fu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=dT++,s="_"+s+"r_"+c.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:wh,useFormState:K0,useActionState:K0,useOptimistic:function(i){var s=zr();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Ch.bind(null,Ye,!0,c),c.dispatch=s,[i,s]},useMemoCache:vh,useCacheRefresh:function(){return zr().memoizedState=gT.bind(null,Ye)},useEffectEvent:function(i){var s=zr(),c={impl:i};return s.memoizedState=c,function(){if((ut&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},Eh={readContext:gr,use:Hu,useCallback:sN,useContext:gr,useEffect:jh,useImperativeHandle:iN,useInsertionEffect:rN,useLayoutEffect:nN,useMemo:lN,useReducer:Qu,useRef:J0,useState:function(){return Qu(wa)},useDebugValue:Nh,useDeferredValue:function(i,s){var c=Ht();return oN(c,vt.memoizedState,i,s)},useTransition:function(){var i=Qu(wa)[0],s=Ht().memoizedState;return[typeof i=="boolean"?i:Uo(i),s]},useSyncExternalStore:R0,useId:mN,useHostTransitionStatus:wh,useFormState:W0,useActionState:W0,useOptimistic:function(i,s){var c=Ht();return F0(c,vt,i,s)},useMemoCache:vh,useCacheRefresh:fN};Eh.useEffectEvent=tN;var xN={readContext:gr,use:Hu,useCallback:sN,useContext:gr,useEffect:jh,useImperativeHandle:iN,useInsertionEffect:rN,useLayoutEffect:nN,useMemo:lN,useReducer:xh,useRef:J0,useState:function(){return xh(wa)},useDebugValue:Nh,useDeferredValue:function(i,s){var c=Ht();return vt===null?_h(c,i,s):oN(c,vt.memoizedState,i,s)},useTransition:function(){var i=xh(wa)[0],s=Ht().memoizedState;return[typeof i=="boolean"?i:Uo(i),s]},useSyncExternalStore:R0,useId:mN,useHostTransitionStatus:wh,useFormState:Z0,useActionState:Z0,useOptimistic:function(i,s){var c=Ht();return vt!==null?F0(c,vt,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:vh,useCacheRefresh:fN};xN.useEffectEvent=tN;function Ah(i,s,c,m){s=i.memoizedState,c=c(m,s),c=c==null?s:v({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var zh={enqueueSetState:function(i,s,c){i=i._reactInternals;var m=nn(),y=vi(m);y.payload=s,c!=null&&(y.callback=c),s=gi(i,y,m),s!==null&&(Hr(s,i,m),Io(s,i,m))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var m=nn(),y=vi(m);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=gi(i,y,m),s!==null&&(Hr(s,i,m),Io(s,i,m))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=nn(),m=vi(c);m.tag=2,s!=null&&(m.callback=s),s=gi(i,m,c),s!==null&&(Hr(s,i,c),Io(s,i,c))}};function bN(i,s,c,m,y,_,z){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,z):s.prototype&&s.prototype.isPureReactComponent?!Oo(c,m)||!Oo(y,_):!0}function yN(i,s,c,m){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,m),s.state!==i&&zh.enqueueReplaceState(s,s.state,null)}function ps(i,s){var c=s;if("ref"in s){c={};for(var m in s)m!=="ref"&&(c[m]=s[m])}if(i=i.defaultProps){c===s&&(c=v({},c));for(var y in i)c[y]===void 0&&(c[y]=i[y])}return c}function jN(i){Eu(i)}function NN(i){console.error(i)}function _N(i){Eu(i)}function Wu(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(m){setTimeout(function(){throw m})}}function SN(i,s,c){try{var m=i.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Oh(i,s,c){return c=vi(c),c.tag=3,c.payload={element:null},c.callback=function(){Wu(i,s)},c}function wN(i){return i=vi(i),i.tag=3,i}function CN(i,s,c,m){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var _=m.value;i.payload=function(){return y(_)},i.callback=function(){SN(s,c,m)}}var z=c.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(i.callback=function(){SN(s,c,m),typeof y!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function bT(i,s,c,m,y){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(s=c.alternate,s!==null&&xl(s,c,y,!0),c=Jr.current,c!==null){switch(c.tag){case 31:case 13:return Sn===null?od():c.alternate===null&&It===0&&(It=3),c.flags&=-257,c.flags|=65536,c.lanes=y,m===Ru?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([m]):s.add(m),tv(i,m,y)),!1;case 22:return c.flags|=65536,m===Ru?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([m]):c.add(m)),tv(i,m,y)),!1}throw Error(a(435,c.tag))}return tv(i,m,y),od(),!1}if(nt)return s=Jr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,m!==Kp&&(i=Error(a(422),{cause:m}),ko(yn(i,c)))):(m!==Kp&&(s=Error(a(423),{cause:m}),ko(yn(s,c))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,m=yn(m,c),y=Oh(i.stateNode,m,y),sh(i,y),It!==4&&(It=2)),!1;var _=Error(a(520),{cause:m});if(_=yn(_,c),Zo===null?Zo=[_]:Zo.push(_),It!==4&&(It=2),s===null)return!0;m=yn(m,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=y&-y,c.lanes|=i,i=Oh(c.stateNode,m,i),sh(c,i),!1;case 1:if(s=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(_i===null||!_i.has(_))))return c.flags|=65536,y&=-y,c.lanes|=y,y=wN(y),CN(y,i,c,m),sh(c,y),!1}c=c.return}while(c!==null);return!1}var Dh=Error(a(461)),Kt=!1;function xr(i,s,c,m){s.child=i===null?O0(s,null,c,m):ms(s,i.child,c,m)}function EN(i,s,c,m,y){c=c.render;var _=s.ref;if("ref"in m){var z={};for(var k in m)k!=="ref"&&(z[k]=m[k])}else z=m;return os(s),m=mh(i,s,c,z,_,y),k=fh(),i!==null&&!Kt?(ph(i,s,y),Ca(i,s,y)):(nt&&k&&Vp(s),s.flags|=1,xr(i,s,m,y),s.child)}function AN(i,s,c,m,y){if(i===null){var _=c.type;return typeof _=="function"&&!Gp(_)&&_.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=_,zN(i,s,_,m,y)):(i=Du(c.type,null,m,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!Lh(i,y)){var z=_.memoizedProps;if(c=c.compare,c=c!==null?c:Oo,c(z,m)&&i.ref===s.ref)return Ca(i,s,y)}return s.flags|=1,i=ya(_,m),i.ref=s.ref,i.return=s,s.child=i}function zN(i,s,c,m,y){if(i!==null){var _=i.memoizedProps;if(Oo(_,m)&&i.ref===s.ref)if(Kt=!1,s.pendingProps=m=_,Lh(i,y))(i.flags&131072)!==0&&(Kt=!0);else return s.lanes=i.lanes,Ca(i,s,y)}return Mh(i,s,c,m,y)}function ON(i,s,c,m){var y=m.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,i!==null){for(m=s.child=i.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;m=y&~_}else m=0,s.child=null;return DN(i,s,_,c,m)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Tu(s,_!==null?_.cachePool:null),_!==null?k0(s,_):oh(),P0(s);else return m=s.lanes=536870912,DN(i,s,_!==null?_.baseLanes|c:c,c,m)}else _!==null?(Tu(s,_.cachePool),k0(s,_),bi(),s.memoizedState=null):(i!==null&&Tu(s,null),oh(),bi());return xr(i,s,y,c),s.child}function Ho(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function DN(i,s,c,m,y){var _=rh();return _=_===null?null:{parent:Vt._currentValue,pool:_},s.memoizedState={baseLanes:c,cachePool:_},i!==null&&Tu(s,null),oh(),P0(s),i!==null&&xl(i,s,m,!0),s.childLanes=y,null}function Xu(i,s){return s=Ju({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function MN(i,s,c){return ms(s,i.child,null,c),i=Xu(s,s.pendingProps),i.flags|=2,en(s),s.memoizedState=null,i}function yT(i,s,c){var m=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(nt){if(m.mode==="hidden")return i=Xu(s,m),s.lanes=536870912,Ho(null,i);if(uh(s),(i=Ct)?(i=G_(i,_n),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:di!==null?{id:Jn,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},c=h0(i),c.return=s,s.child=c,vr=s,Ct=null)):i=null,i===null)throw fi(s);return s.lanes=536870912,null}return Xu(s,m)}var _=i.memoizedState;if(_!==null){var z=_.dehydrated;if(uh(s),y)if(s.flags&256)s.flags&=-257,s=MN(i,s,c);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(a(558));else if(Kt||xl(i,s,c,!1),y=(c&i.childLanes)!==0,Kt||y){if(m=_t,m!==null&&(z=Nj(m,c),z!==0&&z!==_.retryLane))throw _.retryLane=z,as(i,z),Hr(m,i,z),Dh;od(),s=MN(i,s,c)}else i=_.treeContext,Ct=wn(z.nextSibling),vr=s,nt=!0,mi=null,_n=!1,i!==null&&x0(s,i),s=Xu(s,m),s.flags|=4096;return s}return i=ya(i.child,{mode:m.mode,children:m.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Zu(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function Mh(i,s,c,m,y){return os(s),c=mh(i,s,c,m,void 0,y),m=fh(),i!==null&&!Kt?(ph(i,s,y),Ca(i,s,y)):(nt&&m&&Vp(s),s.flags|=1,xr(i,s,c,y),s.child)}function kN(i,s,c,m,y,_){return os(s),s.updateQueue=null,c=q0(s,m,c,y),T0(i),m=fh(),i!==null&&!Kt?(ph(i,s,_),Ca(i,s,_)):(nt&&m&&Vp(s),s.flags|=1,xr(i,s,c,_),s.child)}function PN(i,s,c,m,y){if(os(s),s.stateNode===null){var _=pl,z=c.contextType;typeof z=="object"&&z!==null&&(_=gr(z)),_=new c(m,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=zh,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=m,_.state=s.memoizedState,_.refs={},ah(s),z=c.contextType,_.context=typeof z=="object"&&z!==null?gr(z):pl,_.state=s.memoizedState,z=c.getDerivedStateFromProps,typeof z=="function"&&(Ah(s,c,z,m),_.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(z=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),z!==_.state&&zh.enqueueReplaceState(_,_.state,null),$o(s,m,_,y),Lo(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),m=!0}else if(i===null){_=s.stateNode;var k=s.memoizedProps,U=ps(c,k);_.props=U;var ae=_.context,ve=c.contextType;z=pl,typeof ve=="object"&&ve!==null&&(z=gr(ve));var be=c.getDerivedStateFromProps;ve=typeof be=="function"||typeof _.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k||ae!==z)&&yN(s,_,m,z),hi=!1;var ie=s.memoizedState;_.state=ie,$o(s,m,_,y),Lo(),ae=s.memoizedState,k||ie!==ae||hi?(typeof be=="function"&&(Ah(s,c,be,m),ae=s.memoizedState),(U=hi||bN(s,c,U,m,ie,ae,z))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=ae),_.props=m,_.state=ae,_.context=z,m=U):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{_=s.stateNode,ih(i,s),z=s.memoizedProps,ve=ps(c,z),_.props=ve,be=s.pendingProps,ie=_.context,ae=c.contextType,U=pl,typeof ae=="object"&&ae!==null&&(U=gr(ae)),k=c.getDerivedStateFromProps,(ae=typeof k=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(z!==be||ie!==U)&&yN(s,_,m,U),hi=!1,ie=s.memoizedState,_.state=ie,$o(s,m,_,y),Lo();var ue=s.memoizedState;z!==be||ie!==ue||hi||i!==null&&i.dependencies!==null&&ku(i.dependencies)?(typeof k=="function"&&(Ah(s,c,k,m),ue=s.memoizedState),(ve=hi||bN(s,c,ve,m,ie,ue,U)||i!==null&&i.dependencies!==null&&ku(i.dependencies))?(ae||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,ue,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,ue,U)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||z===i.memoizedProps&&ie===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&ie===i.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=ue),_.props=m,_.state=ue,_.context=U,m=ve):(typeof _.componentDidUpdate!="function"||z===i.memoizedProps&&ie===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&ie===i.memoizedState||(s.flags|=1024),m=!1)}return _=m,Zu(i,s),m=(s.flags&128)!==0,_||m?(_=s.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&m?(s.child=ms(s,i.child,null,y),s.child=ms(s,null,c,y)):xr(i,s,c,y),s.memoizedState=_.state,i=s.child):i=Ca(i,s,y),i}function TN(i,s,c,m){return ss(),s.flags|=256,xr(i,s,c,m),s.child}var kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ph(i){return{baseLanes:i,cachePool:S0()}}function Th(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=rn),i}function qN(i,s,c){var m=s.pendingProps,y=!1,_=(s.flags&128)!==0,z;if((z=_)||(z=i!==null&&i.memoizedState===null?!1:(Gt.current&2)!==0),z&&(y=!0,s.flags&=-129),z=(s.flags&32)!==0,s.flags&=-33,i===null){if(nt){if(y?xi(s):bi(),(i=Ct)?(i=G_(i,_n),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:di!==null?{id:Jn,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},c=h0(i),c.return=s,s.child=c,vr=s,Ct=null)):i=null,i===null)throw fi(s);return gv(i)?s.lanes=32:s.lanes=536870912,null}var k=m.children;return m=m.fallback,y?(bi(),y=s.mode,k=Ju({mode:"hidden",children:k},y),m=is(m,y,c,null),k.return=s,m.return=s,k.sibling=m,s.child=k,m=s.child,m.memoizedState=Ph(c),m.childLanes=Th(i,z,c),s.memoizedState=kh,Ho(null,m)):(xi(s),qh(s,k))}var U=i.memoizedState;if(U!==null&&(k=U.dehydrated,k!==null)){if(_)s.flags&256?(xi(s),s.flags&=-257,s=Rh(i,s,c)):s.memoizedState!==null?(bi(),s.child=i.child,s.flags|=128,s=null):(bi(),k=m.fallback,y=s.mode,m=Ju({mode:"visible",children:m.children},y),k=is(k,y,c,null),k.flags|=2,m.return=s,k.return=s,m.sibling=k,s.child=m,ms(s,i.child,null,c),m=s.child,m.memoizedState=Ph(c),m.childLanes=Th(i,z,c),s.memoizedState=kh,s=Ho(null,m));else if(xi(s),gv(k)){if(z=k.nextSibling&&k.nextSibling.dataset,z)var ae=z.dgst;z=ae,m=Error(a(419)),m.stack="",m.digest=z,ko({value:m,source:null,stack:null}),s=Rh(i,s,c)}else if(Kt||xl(i,s,c,!1),z=(c&i.childLanes)!==0,Kt||z){if(z=_t,z!==null&&(m=Nj(z,c),m!==0&&m!==U.retryLane))throw U.retryLane=m,as(i,m),Hr(z,i,m),Dh;vv(k)||od(),s=Rh(i,s,c)}else vv(k)?(s.flags|=192,s.child=i.child,s=null):(i=U.treeContext,Ct=wn(k.nextSibling),vr=s,nt=!0,mi=null,_n=!1,i!==null&&x0(s,i),s=qh(s,m.children),s.flags|=4096);return s}return y?(bi(),k=m.fallback,y=s.mode,U=i.child,ae=U.sibling,m=ya(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,ae!==null?k=ya(ae,k):(k=is(k,y,c,null),k.flags|=2),k.return=s,m.return=s,m.sibling=k,s.child=m,Ho(null,m),m=s.child,k=i.child.memoizedState,k===null?k=Ph(c):(y=k.cachePool,y!==null?(U=Vt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=S0(),k={baseLanes:k.baseLanes|c,cachePool:y}),m.memoizedState=k,m.childLanes=Th(i,z,c),s.memoizedState=kh,Ho(i.child,m)):(xi(s),c=i.child,i=c.sibling,c=ya(c,{mode:"visible",children:m.children}),c.return=s,c.sibling=null,i!==null&&(z=s.deletions,z===null?(s.deletions=[i],s.flags|=16):z.push(i)),s.child=c,s.memoizedState=null,c)}function qh(i,s){return s=Ju({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Ju(i,s){return i=Zr(22,i,null,s),i.lanes=0,i}function Rh(i,s,c){return ms(s,i.child,null,c),i=qh(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function RN(i,s,c){i.lanes|=s;var m=i.alternate;m!==null&&(m.lanes|=s),Zp(i.return,s,c)}function Ih(i,s,c,m,y,_){var z=i.memoizedState;z===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y,treeForkCount:_}:(z.isBackwards=s,z.rendering=null,z.renderingStartTime=0,z.last=m,z.tail=c,z.tailMode=y,z.treeForkCount=_)}function IN(i,s,c){var m=s.pendingProps,y=m.revealOrder,_=m.tail;m=m.children;var z=Gt.current,k=(z&2)!==0;if(k?(z=z&1|2,s.flags|=128):z&=1,de(Gt,z),xr(i,s,m,c),m=nt?Mo:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&RN(i,c,s);else if(i.tag===19)RN(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(c=s.child,y=null;c!==null;)i=c.alternate,i!==null&&Bu(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),Ih(s,!1,y,c,_,m);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Bu(i)===null){s.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}Ih(s,!0,c,null,_,m);break;case"together":Ih(s,!1,null,null,void 0,m);break;default:s.memoizedState=null}return s.child}function Ca(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),Ni|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(xl(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(a(153));if(s.child!==null){for(i=s.child,c=ya(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=ya(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function Lh(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&ku(i)))}function jT(i,s,c){switch(s.tag){case 3:Pe(s,s.stateNode.containerInfo),pi(s,Vt,i.memoizedState.cache),ss();break;case 27:case 5:J(s);break;case 4:Pe(s,s.stateNode.containerInfo);break;case 10:pi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,uh(s),null;break;case 13:var m=s.memoizedState;if(m!==null)return m.dehydrated!==null?(xi(s),s.flags|=128,null):(c&s.child.childLanes)!==0?qN(i,s,c):(xi(s),i=Ca(i,s,c),i!==null?i.sibling:null);xi(s);break;case 19:var y=(i.flags&128)!==0;if(m=(c&s.childLanes)!==0,m||(xl(i,s,c,!1),m=(c&s.childLanes)!==0),y){if(m)return IN(i,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),de(Gt,Gt.current),m)break;return null;case 22:return s.lanes=0,ON(i,s,c,s.pendingProps);case 24:pi(s,Vt,i.memoizedState.cache)}return Ca(i,s,c)}function LN(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)Kt=!0;else{if(!Lh(i,c)&&(s.flags&128)===0)return Kt=!1,jT(i,s,c);Kt=(i.flags&131072)!==0}else Kt=!1,nt&&(s.flags&1048576)!==0&&g0(s,Mo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var m=s.pendingProps;if(i=us(s.elementType),s.type=i,typeof i=="function")Gp(i)?(m=ps(i,m),s.tag=1,s=PN(null,s,i,m,c)):(s.tag=0,s=Mh(null,s,i,m,c));else{if(i!=null){var y=i.$$typeof;if(y===E){s.tag=11,s=EN(null,s,i,m,c);break e}else if(y===T){s.tag=14,s=AN(null,s,i,m,c);break e}}throw s=V(i)||i,Error(a(306,s,""))}}return s;case 0:return Mh(i,s,s.type,s.pendingProps,c);case 1:return m=s.type,y=ps(m,s.pendingProps),PN(i,s,m,y,c);case 3:e:{if(Pe(s,s.stateNode.containerInfo),i===null)throw Error(a(387));m=s.pendingProps;var _=s.memoizedState;y=_.element,ih(i,s),$o(s,m,null,c);var z=s.memoizedState;if(m=z.cache,pi(s,Vt,m),m!==_.cache&&Jp(s,[Vt],c,!0),Lo(),m=z.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:z.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=TN(i,s,m,c);break e}else if(m!==y){y=yn(Error(a(424)),s),ko(y),s=TN(i,s,m,c);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Ct=wn(i.firstChild),vr=s,nt=!0,mi=null,_n=!0,c=O0(s,null,m,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ss(),m===y){s=Ca(i,s,c);break e}xr(i,s,m,c)}s=s.child}return s;case 26:return Zu(i,s),i===null?(c=W_(s.type,null,s.pendingProps,null))?s.memoizedState=c:nt||(c=s.type,i=s.pendingProps,m=hd(Y.current).createElement(c),m[hr]=s,m[Lr]=i,br(m,c,i),ir(m),s.stateNode=m):s.memoizedState=W_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return J(s),i===null&&nt&&(m=s.stateNode=V_(s.type,s.pendingProps,Y.current),vr=s,_n=!0,y=Ct,Ei(s.type)?(xv=y,Ct=wn(m.firstChild)):Ct=y),xr(i,s,s.pendingProps.children,c),Zu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&nt&&((y=m=Ct)&&(m=XT(m,s.type,s.pendingProps,_n),m!==null?(s.stateNode=m,vr=s,Ct=wn(m.firstChild),_n=!1,y=!0):y=!1),y||fi(s)),J(s),y=s.type,_=s.pendingProps,z=i!==null?i.memoizedProps:null,m=_.children,fv(y,_)?m=null:z!==null&&fv(y,z)&&(s.flags|=32),s.memoizedState!==null&&(y=mh(i,s,mT,null,null,c),sc._currentValue=y),Zu(i,s),xr(i,s,m,c),s.child;case 6:return i===null&&nt&&((i=c=Ct)&&(c=ZT(c,s.pendingProps,_n),c!==null?(s.stateNode=c,vr=s,Ct=null,i=!0):i=!1),i||fi(s)),null;case 13:return qN(i,s,c);case 4:return Pe(s,s.stateNode.containerInfo),m=s.pendingProps,i===null?s.child=ms(s,null,m,c):xr(i,s,m,c),s.child;case 11:return EN(i,s,s.type,s.pendingProps,c);case 7:return xr(i,s,s.pendingProps,c),s.child;case 8:return xr(i,s,s.pendingProps.children,c),s.child;case 12:return xr(i,s,s.pendingProps.children,c),s.child;case 10:return m=s.pendingProps,pi(s,s.type,m.value),xr(i,s,m.children,c),s.child;case 9:return y=s.type._context,m=s.pendingProps.children,os(s),y=gr(y),m=m(y),s.flags|=1,xr(i,s,m,c),s.child;case 14:return AN(i,s,s.type,s.pendingProps,c);case 15:return zN(i,s,s.type,s.pendingProps,c);case 19:return IN(i,s,c);case 31:return yT(i,s,c);case 22:return ON(i,s,c,s.pendingProps);case 24:return os(s),m=gr(Vt),i===null?(y=rh(),y===null&&(y=_t,_=eh(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=c),y=_),s.memoizedState={parent:m,cache:y},ah(s),pi(s,Vt,y)):((i.lanes&c)!==0&&(ih(i,s),$o(s,null,null,c),Lo()),y=i.memoizedState,_=s.memoizedState,y.parent!==m?(y={parent:m,cache:m},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),pi(s,Vt,m)):(m=_.cache,pi(s,Vt,m),m!==y.cache&&Jp(s,[Vt],c,!0))),xr(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Ea(i){i.flags|=4}function $h(i,s,c,m,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(m_())i.flags|=8192;else throw ds=Ru,nh}else i.flags&=-16777217}function $N(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!t1(s))if(m_())i.flags|=8192;else throw ds=Ru,nh}function ed(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?$e():536870912,i.lanes|=s,Ol|=s)}function Qo(i,s){if(!nt)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Et(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,m=0;if(s)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=m,i.childLanes=c,s}function NT(i,s,c){var m=s.pendingProps;switch(Yp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Et(s),null;case 3:return c=s.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),s.memoizedState.cache!==m&&(s.flags|=2048),_a(Vt),se(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(gl(s)?Ea(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wp())),Et(s),null;case 26:var y=s.type,_=s.memoizedState;return i===null?(Ea(s),_!==null?(Et(s),$N(s,_)):(Et(s),$h(s,y,null,m,c))):_?_!==i.memoizedState?(Ea(s),Et(s),$N(s,_)):(Et(s),s.flags&=-16777217):(i=i.memoizedProps,i!==m&&Ea(s),Et(s),$h(s,y,i,m,c)),null;case 27:if(H(s),c=Y.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==m&&Ea(s);else{if(!m){if(s.stateNode===null)throw Error(a(166));return Et(s),null}i=me.current,gl(s)?b0(s):(i=V_(y,m,c),s.stateNode=i,Ea(s))}return Et(s),null;case 5:if(H(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==m&&Ea(s);else{if(!m){if(s.stateNode===null)throw Error(a(166));return Et(s),null}if(_=me.current,gl(s))b0(s);else{var z=hd(Y.current);switch(_){case 1:_=z.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=z.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=z.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=z.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=z.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?z.createElement("select",{is:m.is}):z.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?z.createElement(y,{is:m.is}):z.createElement(y)}}_[hr]=s,_[Lr]=m;e:for(z=s.child;z!==null;){if(z.tag===5||z.tag===6)_.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===s)break e;for(;z.sibling===null;){if(z.return===null||z.return===s)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}s.stateNode=_;e:switch(br(_,y,m),y){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Ea(s)}}return Et(s),$h(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,c),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==m&&Ea(s);else{if(typeof m!="string"&&s.stateNode===null)throw Error(a(166));if(i=Y.current,gl(s)){if(i=s.stateNode,c=s.memoizedProps,m=null,y=vr,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}i[hr]=s,i=!!(i.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||q_(i.nodeValue,c)),i||fi(s,!0)}else i=hd(i).createTextNode(m),i[hr]=s,s.stateNode=i}return Et(s),null;case 31:if(c=s.memoizedState,i===null||i.memoizedState!==null){if(m=gl(s),c!==null){if(i===null){if(!m)throw Error(a(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[hr]=s}else ss(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),i=!1}else c=Wp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return s.flags&256?(en(s),s):(en(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Et(s),null;case 13:if(m=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=gl(s),m!==null&&m.dehydrated!==null){if(i===null){if(!y)throw Error(a(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));y[hr]=s}else ss(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),y=!1}else y=Wp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(en(s),s):(en(s),null)}return en(s),(s.flags&128)!==0?(s.lanes=c,s):(c=m!==null,i=i!==null&&i.memoizedState!==null,c&&(m=s.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==y&&(m.flags|=2048)),c!==i&&c&&(s.child.flags|=8192),ed(s,s.updateQueue),Et(s),null);case 4:return se(),i===null&&ov(s.stateNode.containerInfo),Et(s),null;case 10:return _a(s.type),Et(s),null;case 19:if(te(Gt),m=s.memoizedState,m===null)return Et(s),null;if(y=(s.flags&128)!==0,_=m.rendering,_===null)if(y)Qo(m,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=Bu(i),_!==null){for(s.flags|=128,Qo(m,!1),i=_.updateQueue,s.updateQueue=i,ed(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)p0(c,i),c=c.sibling;return de(Gt,Gt.current&1|2),nt&&ja(s,m.treeForkCount),s.child}i=i.sibling}m.tail!==null&&Re()>id&&(s.flags|=128,y=!0,Qo(m,!1),s.lanes=4194304)}else{if(!y)if(i=Bu(_),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,ed(s,i),Qo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!nt)return Et(s),null}else 2*Re()-m.renderingStartTime>id&&c!==536870912&&(s.flags|=128,y=!0,Qo(m,!1),s.lanes=4194304);m.isBackwards?(_.sibling=s.child,s.child=_):(i=m.last,i!==null?i.sibling=_:s.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Re(),i.sibling=null,c=Gt.current,de(Gt,y?c&1|2:c&1),nt&&ja(s,m.treeForkCount),i):(Et(s),null);case 22:case 23:return en(s),ch(),m=s.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(s.flags|=8192):m&&(s.flags|=8192),m?(c&536870912)!==0&&(s.flags&128)===0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),c=s.updateQueue,c!==null&&ed(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),m=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),m!==c&&(s.flags|=2048),i!==null&&te(cs),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),_a(Vt),Et(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function _T(i,s){switch(Yp(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return _a(Vt),se(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return H(s),null;case 31:if(s.memoizedState!==null){if(en(s),s.alternate===null)throw Error(a(340));ss()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(en(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(a(340));ss()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return te(Gt),null;case 4:return se(),null;case 10:return _a(s.type),null;case 22:case 23:return en(s),ch(),i!==null&&te(cs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return _a(Vt),null;case 25:return null;default:return null}}function BN(i,s){switch(Yp(s),s.tag){case 3:_a(Vt),se();break;case 26:case 27:case 5:H(s);break;case 4:se();break;case 31:s.memoizedState!==null&&en(s);break;case 13:en(s);break;case 19:te(Gt);break;case 10:_a(s.type);break;case 22:case 23:en(s),ch(),i!==null&&te(cs);break;case 24:_a(Vt)}}function Vo(i,s){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&i)===i){m=void 0;var _=c.create,z=c.inst;m=_(),z.destroy=m}c=c.next}while(c!==y)}}catch(k){ft(s,s.return,k)}}function yi(i,s,c){try{var m=s.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var _=y.next;m=_;do{if((m.tag&i)===i){var z=m.inst,k=z.destroy;if(k!==void 0){z.destroy=void 0,y=s;var U=c,ae=k;try{ae()}catch(ve){ft(y,U,ve)}}}m=m.next}while(m!==_)}}catch(ve){ft(s,s.return,ve)}}function UN(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{M0(s,c)}catch(m){ft(i,i.return,m)}}}function FN(i,s,c){c.props=ps(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(m){ft(i,s,m)}}function Yo(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof c=="function"?i.refCleanup=c(m):c.current=m}}catch(y){ft(i,s,y)}}function ta(i,s){var c=i.ref,m=i.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(y){ft(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){ft(i,s,y)}else c.current=null}function GN(i){var s=i.type,c=i.memoizedProps,m=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(y){ft(i,i.return,y)}}function Bh(i,s,c){try{var m=i.stateNode;HT(m,i.type,c,s),m[Lr]=s}catch(y){ft(i,i.return,y)}}function HN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ei(i.type)||i.tag===4}function Uh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||HN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ei(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Fh(i,s,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=xa));else if(m!==4&&(m===27&&Ei(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for(Fh(i,s,c),i=i.sibling;i!==null;)Fh(i,s,c),i=i.sibling}function td(i,s,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(m!==4&&(m===27&&Ei(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(td(i,s,c),i=i.sibling;i!==null;)td(i,s,c),i=i.sibling}function QN(i){var s=i.stateNode,c=i.memoizedProps;try{for(var m=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);br(s,m,c),s[hr]=i,s[Lr]=c}catch(_){ft(i,i.return,_)}}var Aa=!1,Wt=!1,Gh=!1,VN=typeof WeakSet=="function"?WeakSet:Set,sr=null;function ST(i,s){if(i=i.containerInfo,dv=Nd,i=i0(i),Rp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var z=0,k=-1,U=-1,ae=0,ve=0,be=i,ie=null;t:for(;;){for(var ue;be!==c||y!==0&&be.nodeType!==3||(k=z+y),be!==_||m!==0&&be.nodeType!==3||(U=z+m),be.nodeType===3&&(z+=be.nodeValue.length),(ue=be.firstChild)!==null;)ie=be,be=ue;for(;;){if(be===i)break t;if(ie===c&&++ae===y&&(k=z),ie===_&&++ve===m&&(U=z),(ue=be.nextSibling)!==null)break;be=ie,ie=be.parentNode}be=ue}c=k===-1||U===-1?null:{start:k,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(mv={focusedElem:i,selectionRange:c},Nd=!1,sr=s;sr!==null;)if(s=sr,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,sr=i;else for(;sr!==null;){switch(s=sr,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)y=i[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,c=s,y=_.memoizedProps,_=_.memoizedState,m=c.stateNode;try{var Ee=ps(c.type,y);i=m.getSnapshotBeforeUpdate(Ee,_),m.__reactInternalSnapshotBeforeUpdate=i}catch(Ue){ft(c,c.return,Ue)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)hv(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":hv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=s.sibling,i!==null){i.return=s.return,sr=i;break}sr=s.return}}function YN(i,s,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Oa(i,c),m&4&&Vo(5,c);break;case 1:if(Oa(i,c),m&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(z){ft(c,c.return,z)}else{var y=ps(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(z){ft(c,c.return,z)}}m&64&&UN(c),m&512&&Yo(c,c.return);break;case 3:if(Oa(i,c),m&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{M0(i,s)}catch(z){ft(c,c.return,z)}}break;case 27:s===null&&m&4&&QN(c);case 26:case 5:Oa(i,c),s===null&&m&4&&GN(c),m&512&&Yo(c,c.return);break;case 12:Oa(i,c);break;case 31:Oa(i,c),m&4&&XN(i,c);break;case 13:Oa(i,c),m&4&&ZN(i,c),m&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=kT.bind(null,c),JT(i,c))));break;case 22:if(m=c.memoizedState!==null||Aa,!m){s=s!==null&&s.memoizedState!==null||Wt,y=Aa;var _=Wt;Aa=m,(Wt=s)&&!_?Da(i,c,(c.subtreeFlags&8772)!==0):Oa(i,c),Aa=y,Wt=_}break;case 30:break;default:Oa(i,c)}}function KN(i){var s=i.alternate;s!==null&&(i.alternate=null,KN(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&yp(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var zt=null,Br=!1;function za(i,s,c){for(c=c.child;c!==null;)WN(i,s,c),c=c.sibling}function WN(i,s,c){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Se,c)}catch{}switch(c.tag){case 26:Wt||ta(c,s),za(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Wt||ta(c,s);var m=zt,y=Br;Ei(c.type)&&(zt=c.stateNode,Br=!1),za(i,s,c),nc(c.stateNode),zt=m,Br=y;break;case 5:Wt||ta(c,s);case 6:if(m=zt,y=Br,zt=null,za(i,s,c),zt=m,Br=y,zt!==null)if(Br)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(c.stateNode)}catch(_){ft(c,s,_)}else try{zt.removeChild(c.stateNode)}catch(_){ft(c,s,_)}break;case 18:zt!==null&&(Br?(i=zt,U_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Il(i)):U_(zt,c.stateNode));break;case 4:m=zt,y=Br,zt=c.stateNode.containerInfo,Br=!0,za(i,s,c),zt=m,Br=y;break;case 0:case 11:case 14:case 15:yi(2,c,s),Wt||yi(4,c,s),za(i,s,c);break;case 1:Wt||(ta(c,s),m=c.stateNode,typeof m.componentWillUnmount=="function"&&FN(c,s,m)),za(i,s,c);break;case 21:za(i,s,c);break;case 22:Wt=(m=Wt)||c.memoizedState!==null,za(i,s,c),Wt=m;break;default:za(i,s,c)}}function XN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Il(i)}catch(c){ft(s,s.return,c)}}}function ZN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Il(i)}catch(c){ft(s,s.return,c)}}function wT(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new VN),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new VN),s;default:throw Error(a(435,i.tag))}}function rd(i,s){var c=wT(i);s.forEach(function(m){if(!c.has(m)){c.add(m);var y=PT.bind(null,i,m);m.then(y,y)}})}function Ur(i,s){var c=s.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m],_=i,z=s,k=z;e:for(;k!==null;){switch(k.tag){case 27:if(Ei(k.type)){zt=k.stateNode,Br=!1;break e}break;case 5:zt=k.stateNode,Br=!1;break e;case 3:case 4:zt=k.stateNode.containerInfo,Br=!0;break e}k=k.return}if(zt===null)throw Error(a(160));WN(_,z,y),zt=null,Br=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)JN(s,i),s=s.sibling}var Ln=null;function JN(i,s){var c=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ur(s,i),Fr(i),m&4&&(yi(3,i,i.return),Vo(3,i),yi(5,i,i.return));break;case 1:Ur(s,i),Fr(i),m&512&&(Wt||c===null||ta(c,c.return)),m&64&&Aa&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var y=Ln;if(Ur(s,i),Fr(i),m&512&&(Wt||c===null||ta(c,c.return)),m&4){var _=c!==null?c.memoizedState:null;if(m=i.memoizedState,c===null)if(m===null)if(i.stateNode===null){e:{m=i.type,c=i.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":_=y.getElementsByTagName("title")[0],(!_||_[jo]||_[hr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(m),y.head.insertBefore(_,y.querySelector("head > title"))),br(_,m,c),_[hr]=i,ir(_),m=_;break e;case"link":var z=J_("link","href",y).get(m+(c.href||""));if(z){for(var k=0;k<z.length;k++)if(_=z[k],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){z.splice(k,1);break t}}_=y.createElement(m),br(_,m,c),y.head.appendChild(_);break;case"meta":if(z=J_("meta","content",y).get(m+(c.content||""))){for(k=0;k<z.length;k++)if(_=z[k],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){z.splice(k,1);break t}}_=y.createElement(m),br(_,m,c),y.head.appendChild(_);break;default:throw Error(a(468,m))}_[hr]=i,ir(_),m=_}i.stateNode=m}else e1(y,i.type,i.stateNode);else i.stateNode=Z_(y,m,i.memoizedProps);else _!==m?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,m===null?e1(y,i.type,i.stateNode):Z_(y,m,i.memoizedProps)):m===null&&i.stateNode!==null&&Bh(i,i.memoizedProps,c.memoizedProps)}break;case 27:Ur(s,i),Fr(i),m&512&&(Wt||c===null||ta(c,c.return)),c!==null&&m&4&&Bh(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Ur(s,i),Fr(i),m&512&&(Wt||c===null||ta(c,c.return)),i.flags&32){y=i.stateNode;try{ll(y,"")}catch(Ee){ft(i,i.return,Ee)}}m&4&&i.stateNode!=null&&(y=i.memoizedProps,Bh(i,y,c!==null?c.memoizedProps:y)),m&1024&&(Gh=!0);break;case 6:if(Ur(s,i),Fr(i),m&4){if(i.stateNode===null)throw Error(a(162));m=i.memoizedProps,c=i.stateNode;try{c.nodeValue=m}catch(Ee){ft(i,i.return,Ee)}}break;case 3:if(xd=null,y=Ln,Ln=vd(s.containerInfo),Ur(s,i),Ln=y,Fr(i),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Il(s.containerInfo)}catch(Ee){ft(i,i.return,Ee)}Gh&&(Gh=!1,e_(i));break;case 4:m=Ln,Ln=vd(i.stateNode.containerInfo),Ur(s,i),Fr(i),Ln=m;break;case 12:Ur(s,i),Fr(i);break;case 31:Ur(s,i),Fr(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,rd(i,m)));break;case 13:Ur(s,i),Fr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ad=Re()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,rd(i,m)));break;case 22:y=i.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,ae=Aa,ve=Wt;if(Aa=ae||y,Wt=ve||U,Ur(s,i),Wt=ve,Aa=ae,Fr(i),m&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(c===null||U||Aa||Wt||hs(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){U=c=s;try{if(_=U.stateNode,y)z=_.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{k=U.stateNode;var be=U.memoizedProps.style,ie=be!=null&&be.hasOwnProperty("display")?be.display:null;k.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ee){ft(U,U.return,Ee)}}}else if(s.tag===6){if(c===null){U=s;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(Ee){ft(U,U.return,Ee)}}}else if(s.tag===18){if(c===null){U=s;try{var ue=U.stateNode;y?F_(ue,!0):F_(U.stateNode,!1)}catch(Ee){ft(U,U.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}m&4&&(m=i.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,rd(i,c))));break;case 19:Ur(s,i),Fr(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,rd(i,m)));break;case 30:break;case 21:break;default:Ur(s,i),Fr(i)}}function Fr(i){var s=i.flags;if(s&2){try{for(var c,m=i.return;m!==null;){if(HN(m)){c=m;break}m=m.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var y=c.stateNode,_=Uh(i);td(i,_,y);break;case 5:var z=c.stateNode;c.flags&32&&(ll(z,""),c.flags&=-33);var k=Uh(i);td(i,k,z);break;case 3:case 4:var U=c.stateNode.containerInfo,ae=Uh(i);Fh(i,ae,U);break;default:throw Error(a(161))}}catch(ve){ft(i,i.return,ve)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function e_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;e_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Oa(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)YN(i,s.alternate,s),s=s.sibling}function hs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:yi(4,s,s.return),hs(s);break;case 1:ta(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&FN(s,s.return,c),hs(s);break;case 27:nc(s.stateNode);case 26:case 5:ta(s,s.return),hs(s);break;case 22:s.memoizedState===null&&hs(s);break;case 30:hs(s);break;default:hs(s)}i=i.sibling}}function Da(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var m=s.alternate,y=i,_=s,z=_.flags;switch(_.tag){case 0:case 11:case 15:Da(y,_,c),Vo(4,_);break;case 1:if(Da(y,_,c),m=_,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ae){ft(m,m.return,ae)}if(m=_,y=m.updateQueue,y!==null){var k=m.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)D0(U[y],k)}catch(ae){ft(m,m.return,ae)}}c&&z&64&&UN(_),Yo(_,_.return);break;case 27:QN(_);case 26:case 5:Da(y,_,c),c&&m===null&&z&4&&GN(_),Yo(_,_.return);break;case 12:Da(y,_,c);break;case 31:Da(y,_,c),c&&z&4&&XN(y,_);break;case 13:Da(y,_,c),c&&z&4&&ZN(y,_);break;case 22:_.memoizedState===null&&Da(y,_,c),Yo(_,_.return);break;case 30:break;default:Da(y,_,c)}s=s.sibling}}function Hh(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Po(c))}function Qh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Po(i))}function $n(i,s,c,m){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)t_(i,s,c,m),s=s.sibling}function t_(i,s,c,m){var y=s.flags;switch(s.tag){case 0:case 11:case 15:$n(i,s,c,m),y&2048&&Vo(9,s);break;case 1:$n(i,s,c,m);break;case 3:$n(i,s,c,m),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Po(i)));break;case 12:if(y&2048){$n(i,s,c,m),i=s.stateNode;try{var _=s.memoizedProps,z=_.id,k=_.onPostCommit;typeof k=="function"&&k(z,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){ft(s,s.return,U)}}else $n(i,s,c,m);break;case 31:$n(i,s,c,m);break;case 13:$n(i,s,c,m);break;case 23:break;case 22:_=s.stateNode,z=s.alternate,s.memoizedState!==null?_._visibility&2?$n(i,s,c,m):Ko(i,s):_._visibility&2?$n(i,s,c,m):(_._visibility|=2,El(i,s,c,m,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Hh(z,s);break;case 24:$n(i,s,c,m),y&2048&&Qh(s.alternate,s);break;default:$n(i,s,c,m)}}function El(i,s,c,m,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,z=s,k=c,U=m,ae=z.flags;switch(z.tag){case 0:case 11:case 15:El(_,z,k,U,y),Vo(8,z);break;case 23:break;case 22:var ve=z.stateNode;z.memoizedState!==null?ve._visibility&2?El(_,z,k,U,y):Ko(_,z):(ve._visibility|=2,El(_,z,k,U,y)),y&&ae&2048&&Hh(z.alternate,z);break;case 24:El(_,z,k,U,y),y&&ae&2048&&Qh(z.alternate,z);break;default:El(_,z,k,U,y)}s=s.sibling}}function Ko(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,m=s,y=m.flags;switch(m.tag){case 22:Ko(c,m),y&2048&&Hh(m.alternate,m);break;case 24:Ko(c,m),y&2048&&Qh(m.alternate,m);break;default:Ko(c,m)}s=s.sibling}}var Wo=8192;function Al(i,s,c){if(i.subtreeFlags&Wo)for(i=i.child;i!==null;)r_(i,s,c),i=i.sibling}function r_(i,s,c){switch(i.tag){case 26:Al(i,s,c),i.flags&Wo&&i.memoizedState!==null&&dq(c,Ln,i.memoizedState,i.memoizedProps);break;case 5:Al(i,s,c);break;case 3:case 4:var m=Ln;Ln=vd(i.stateNode.containerInfo),Al(i,s,c),Ln=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=Wo,Wo=16777216,Al(i,s,c),Wo=m):Al(i,s,c));break;default:Al(i,s,c)}}function n_(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Xo(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var m=s[c];sr=m,i_(m,i)}n_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a_(i),i=i.sibling}function a_(i){switch(i.tag){case 0:case 11:case 15:Xo(i),i.flags&2048&&yi(9,i,i.return);break;case 3:Xo(i);break;case 12:Xo(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,nd(i)):Xo(i);break;default:Xo(i)}}function nd(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var m=s[c];sr=m,i_(m,i)}n_(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:yi(8,s,s.return),nd(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,nd(s));break;default:nd(s)}i=i.sibling}}function i_(i,s){for(;sr!==null;){var c=sr;switch(c.tag){case 0:case 11:case 15:yi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Po(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,sr=m;else e:for(c=i;sr!==null;){m=sr;var y=m.sibling,_=m.return;if(KN(m),m===c){sr=null;break e}if(y!==null){y.return=_,sr=y;break e}sr=_}}}var CT={getCacheForType:function(i){var s=gr(Vt),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c},cacheSignal:function(){return gr(Vt).controller.signal}},ET=typeof WeakMap=="function"?WeakMap:Map,ut=0,_t=null,Ze=null,et=0,mt=0,tn=null,ji=!1,zl=!1,Vh=!1,Ma=0,It=0,Ni=0,vs=0,Yh=0,rn=0,Ol=0,Zo=null,Gr=null,Kh=!1,ad=0,s_=0,id=1/0,sd=null,_i=null,er=0,Si=null,Dl=null,ka=0,Wh=0,Xh=null,l_=null,Jo=0,Zh=null;function nn(){return(ut&2)!==0&&et!==0?et&-et:q.T!==null?av():_j()}function o_(){if(rn===0)if((et&536870912)===0||nt){var i=Js;Js<<=1,(Js&3932160)===0&&(Js=262144),rn=i}else rn=536870912;return i=Jr.current,i!==null&&(i.flags|=32),rn}function Hr(i,s,c){(i===_t&&(mt===2||mt===9)||i.cancelPendingCommit!==null)&&(Ml(i,0),wi(i,et,rn,!1)),Sr(i,c),((ut&2)===0||i!==_t)&&(i===_t&&((ut&2)===0&&(vs|=c),It===4&&wi(i,et,rn,!1)),ra(i))}function c_(i,s,c){if((ut&6)!==0)throw Error(a(327));var m=!c&&(s&127)===0&&(s&i.expiredLanes)===0||Zi(i,s),y=m?OT(i,s):ev(i,s,!0),_=m;do{if(y===0){zl&&!m&&wi(i,s,0,!1);break}else{if(c=i.current.alternate,_&&!AT(c)){y=ev(i,s,!1),_=!1;continue}if(y===2){if(_=s,i.errorRecoveryDisabledLanes&_)var z=0;else z=i.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){s=z;e:{var k=i;y=Zo;var U=k.current.memoizedState.isDehydrated;if(U&&(Ml(k,z).flags|=256),z=ev(k,z,!1),z!==2){if(Vh&&!U){k.errorRecoveryDisabledLanes|=_,vs|=_,y=4;break e}_=Gr,Gr=y,_!==null&&(Gr===null?Gr=_:Gr.push.apply(Gr,_))}y=z}if(_=!1,y!==2)continue}}if(y===1){Ml(i,0),wi(i,s,0,!0);break}e:{switch(m=i,_=y,_){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:wi(m,s,rn,!ji);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(y=ad+300-Re(),10<y)){if(wi(m,s,rn,!ji),Zn(m,0,!0)!==0)break e;ka=s,m.timeoutHandle=$_(u_.bind(null,m,c,Gr,sd,Kh,s,rn,vs,Ol,ji,_,"Throttled",-0,0),y);break e}u_(m,c,Gr,sd,Kh,s,rn,vs,Ol,ji,_,null,-0,0)}}break}while(!0);ra(i)}function u_(i,s,c,m,y,_,z,k,U,ae,ve,be,ie,ue){if(i.timeoutHandle=-1,be=s.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},r_(s,_,be);var Ee=(_&62914560)===_?ad-Re():(_&4194048)===_?s_-Re():0;if(Ee=mq(be,Ee),Ee!==null){ka=_,i.cancelPendingCommit=Ee(x_.bind(null,i,s,_,c,m,y,z,k,U,ve,be,null,ie,ue)),wi(i,_,z,!ae);return}}x_(i,s,_,c,m,y,z,k,U)}function AT(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var y=c[m],_=y.getSnapshot;y=y.value;try{if(!Xr(_(),y))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wi(i,s,c,m){s&=~Yh,s&=~vs,i.suspendedLanes|=s,i.pingedLanes&=~s,m&&(i.warmLanes|=s),m=i.expirationTimes;for(var y=s;0<y;){var _=31-Pt(y),z=1<<_;m[_]=-1,y&=~z}c!==0&&Ji(i,c,s)}function ld(){return(ut&6)===0?(ec(0),!1):!0}function Jh(){if(Ze!==null){if(mt===0)var i=Ze.return;else i=Ze,Na=ls=null,hh(i),Nl=null,qo=0,i=Ze;for(;i!==null;)BN(i.alternate,i),i=i.return;Ze=null}}function Ml(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,YT(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ka=0,Jh(),_t=i,Ze=c=ya(i.current,null),et=s,mt=0,tn=null,ji=!1,zl=Zi(i,s),Vh=!1,Ol=rn=Yh=vs=Ni=It=0,Gr=Zo=null,Kh=!1,(s&8)!==0&&(s|=s&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=s;0<m;){var y=31-Pt(m),_=1<<y;s|=i[y],m&=~_}return Ma=s,Au(),c}function d_(i,s){Ye=null,q.H=Go,s===jl||s===qu?(s=E0(),mt=3):s===nh?(s=E0(),mt=4):mt=s===Dh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,tn=s,Ze===null&&(It=1,Wu(i,yn(s,i.current)))}function m_(){var i=Jr.current;return i===null?!0:(et&4194048)===et?Sn===null:(et&62914560)===et||(et&536870912)!==0?i===Sn:!1}function f_(){var i=q.H;return q.H=Go,i===null?Go:i}function p_(){var i=q.A;return q.A=CT,i}function od(){It=4,ji||(et&4194048)!==et&&Jr.current!==null||(zl=!0),(Ni&134217727)===0&&(vs&134217727)===0||_t===null||wi(_t,et,rn,!1)}function ev(i,s,c){var m=ut;ut|=2;var y=f_(),_=p_();(_t!==i||et!==s)&&(sd=null,Ml(i,s)),s=!1;var z=It;e:do try{if(mt!==0&&Ze!==null){var k=Ze,U=tn;switch(mt){case 8:Jh(),z=6;break e;case 3:case 2:case 9:case 6:Jr.current===null&&(s=!0);var ae=mt;if(mt=0,tn=null,kl(i,k,U,ae),c&&zl){z=0;break e}break;default:ae=mt,mt=0,tn=null,kl(i,k,U,ae)}}zT(),z=It;break}catch(ve){d_(i,ve)}while(!0);return s&&i.shellSuspendCounter++,Na=ls=null,ut=m,q.H=y,q.A=_,Ze===null&&(_t=null,et=0,Au()),z}function zT(){for(;Ze!==null;)h_(Ze)}function OT(i,s){var c=ut;ut|=2;var m=f_(),y=p_();_t!==i||et!==s?(sd=null,id=Re()+500,Ml(i,s)):zl=Zi(i,s);e:do try{if(mt!==0&&Ze!==null){s=Ze;var _=tn;t:switch(mt){case 1:mt=0,tn=null,kl(i,s,_,1);break;case 2:case 9:if(w0(_)){mt=0,tn=null,v_(s);break}s=function(){mt!==2&&mt!==9||_t!==i||(mt=7),ra(i)},_.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:w0(_)?(mt=0,tn=null,v_(s)):(mt=0,tn=null,kl(i,s,_,7));break;case 5:var z=null;switch(Ze.tag){case 26:z=Ze.memoizedState;case 5:case 27:var k=Ze;if(z?t1(z):k.stateNode.complete){mt=0,tn=null;var U=k.sibling;if(U!==null)Ze=U;else{var ae=k.return;ae!==null?(Ze=ae,cd(ae)):Ze=null}break t}}mt=0,tn=null,kl(i,s,_,5);break;case 6:mt=0,tn=null,kl(i,s,_,6);break;case 8:Jh(),It=6;break e;default:throw Error(a(462))}}DT();break}catch(ve){d_(i,ve)}while(!0);return Na=ls=null,q.H=m,q.A=y,ut=c,Ze!==null?0:(_t=null,et=0,Au(),It)}function DT(){for(;Ze!==null&&!fe();)h_(Ze)}function h_(i){var s=LN(i.alternate,i,Ma);i.memoizedProps=i.pendingProps,s===null?cd(i):Ze=s}function v_(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=kN(c,s,s.pendingProps,s.type,void 0,et);break;case 11:s=kN(c,s,s.pendingProps,s.type.render,s.ref,et);break;case 5:hh(s);default:BN(c,s),s=Ze=p0(s,Ma),s=LN(c,s,Ma)}i.memoizedProps=i.pendingProps,s===null?cd(i):Ze=s}function kl(i,s,c,m){Na=ls=null,hh(s),Nl=null,qo=0;var y=s.return;try{if(bT(i,y,s,c,et)){It=1,Wu(i,yn(c,i.current)),Ze=null;return}}catch(_){if(y!==null)throw Ze=y,_;It=1,Wu(i,yn(c,i.current)),Ze=null;return}s.flags&32768?(nt||m===1?i=!0:zl||(et&536870912)!==0?i=!1:(ji=i=!0,(m===2||m===9||m===3||m===6)&&(m=Jr.current,m!==null&&m.tag===13&&(m.flags|=16384))),g_(s,i)):cd(s)}function cd(i){var s=i;do{if((s.flags&32768)!==0){g_(s,ji);return}i=s.return;var c=NT(s.alternate,s,Ma);if(c!==null){Ze=c;return}if(s=s.sibling,s!==null){Ze=s;return}Ze=s=i}while(s!==null);It===0&&(It=5)}function g_(i,s){do{var c=_T(i.alternate,i);if(c!==null){c.flags&=32767,Ze=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){Ze=i;return}Ze=i=c}while(i!==null);It=6,Ze=null}function x_(i,s,c,m,y,_,z,k,U){i.cancelPendingCommit=null;do ud();while(er!==0);if((ut&6)!==0)throw Error(a(327));if(s!==null){if(s===i.current)throw Error(a(177));if(_=s.lanes|s.childLanes,_|=Up,yo(i,c,_,z,k,U),i===_t&&(Ze=_t=null,et=0),Dl=s,Si=i,ka=c,Wh=_,Xh=y,l_=m,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,TT(hn,function(){return __(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||m){m=q.T,q.T=null,y=X.p,X.p=2,z=ut,ut|=4;try{ST(i,s,c)}finally{ut=z,X.p=y,q.T=m}}er=1,b_(),y_(),j_()}}function b_(){if(er===1){er=0;var i=Si,s=Dl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var m=X.p;X.p=2;var y=ut;ut|=4;try{JN(s,i);var _=mv,z=i0(i.containerInfo),k=_.focusedElem,U=_.selectionRange;if(z!==k&&k&&k.ownerDocument&&a0(k.ownerDocument.documentElement,k)){if(U!==null&&Rp(k)){var ae=U.start,ve=U.end;if(ve===void 0&&(ve=ae),"selectionStart"in k)k.selectionStart=ae,k.selectionEnd=Math.min(ve,k.value.length);else{var be=k.ownerDocument||document,ie=be&&be.defaultView||window;if(ie.getSelection){var ue=ie.getSelection(),Ee=k.textContent.length,Ue=Math.min(U.start,Ee),xt=U.end===void 0?Ue:Math.min(U.end,Ee);!ue.extend&&Ue>xt&&(z=xt,xt=Ue,Ue=z);var ee=n0(k,Ue),K=n0(k,xt);if(ee&&K&&(ue.rangeCount!==1||ue.anchorNode!==ee.node||ue.anchorOffset!==ee.offset||ue.focusNode!==K.node||ue.focusOffset!==K.offset)){var ne=be.createRange();ne.setStart(ee.node,ee.offset),ue.removeAllRanges(),Ue>xt?(ue.addRange(ne),ue.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),ue.addRange(ne))}}}}for(be=[],ue=k;ue=ue.parentNode;)ue.nodeType===1&&be.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<be.length;k++){var ge=be[k];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Nd=!!dv,mv=dv=null}finally{ut=y,X.p=m,q.T=c}}i.current=s,er=2}}function y_(){if(er===2){er=0;var i=Si,s=Dl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var m=X.p;X.p=2;var y=ut;ut|=4;try{YN(i,s.alternate,s)}finally{ut=y,X.p=m,q.T=c}}er=3}}function j_(){if(er===4||er===3){er=0,Me();var i=Si,s=Dl,c=ka,m=l_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?er=5:(er=0,Dl=Si=null,N_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(_i=null),xp(c),s=s.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Se,s,void 0,(s.current.flags&128)===128)}catch{}if(m!==null){s=q.T,y=X.p,X.p=2,q.T=null;try{for(var _=i.onRecoverableError,z=0;z<m.length;z++){var k=m[z];_(k.value,{componentStack:k.stack})}}finally{q.T=s,X.p=y}}(ka&3)!==0&&ud(),ra(i),y=i.pendingLanes,(c&261930)!==0&&(y&42)!==0?i===Zh?Jo++:(Jo=0,Zh=i):Jo=0,ec(0)}}function N_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Po(s)))}function ud(){return b_(),y_(),j_(),__()}function __(){if(er!==5)return!1;var i=Si,s=Wh;Wh=0;var c=xp(ka),m=q.T,y=X.p;try{X.p=32>c?32:c,q.T=null,c=Xh,Xh=null;var _=Si,z=ka;if(er=0,Dl=Si=null,ka=0,(ut&6)!==0)throw Error(a(331));var k=ut;if(ut|=4,a_(_.current),t_(_,_.current,z,c),ut=k,ec(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Se,_)}catch{}return!0}finally{X.p=y,q.T=m,N_(i,s)}}function S_(i,s,c){s=yn(c,s),s=Oh(i.stateNode,s,2),i=gi(i,s,2),i!==null&&(Sr(i,2),ra(i))}function ft(i,s,c){if(i.tag===3)S_(i,i,c);else for(;s!==null;){if(s.tag===3){S_(s,i,c);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(_i===null||!_i.has(m))){i=yn(c,i),c=wN(2),m=gi(s,c,2),m!==null&&(CN(c,m,s,i),Sr(m,2),ra(m));break}}s=s.return}}function tv(i,s,c){var m=i.pingCache;if(m===null){m=i.pingCache=new ET;var y=new Set;m.set(s,y)}else y=m.get(s),y===void 0&&(y=new Set,m.set(s,y));y.has(c)||(Vh=!0,y.add(c),i=MT.bind(null,i,s,c),s.then(i,i))}function MT(i,s,c){var m=i.pingCache;m!==null&&m.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,_t===i&&(et&c)===c&&(It===4||It===3&&(et&62914560)===et&&300>Re()-ad?(ut&2)===0&&Ml(i,0):Yh|=c,Ol===et&&(Ol=0)),ra(i)}function w_(i,s){s===0&&(s=$e()),i=as(i,s),i!==null&&(Sr(i,s),ra(i))}function kT(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),w_(i,c)}function PT(i,s){var c=0;switch(i.tag){case 31:case 13:var m=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(a(314))}m!==null&&m.delete(s),w_(i,c)}function TT(i,s){return Rr(i,s)}var dd=null,Pl=null,rv=!1,md=!1,nv=!1,Ci=0;function ra(i){i!==Pl&&i.next===null&&(Pl===null?dd=Pl=i:Pl=Pl.next=i),md=!0,rv||(rv=!0,RT())}function ec(i,s){if(!nv&&md){nv=!0;do for(var c=!1,m=dd;m!==null;){if(i!==0){var y=m.pendingLanes;if(y===0)var _=0;else{var z=m.suspendedLanes,k=m.pingedLanes;_=(1<<31-Pt(42|i)+1)-1,_&=y&~(z&~k),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,z_(m,_))}else _=et,_=Zn(m,m===_t?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||Zi(m,_)||(c=!0,z_(m,_));m=m.next}while(c);nv=!1}}function qT(){C_()}function C_(){md=rv=!1;var i=0;Ci!==0&&VT()&&(i=Ci);for(var s=Re(),c=null,m=dd;m!==null;){var y=m.next,_=E_(m,s);_===0?(m.next=null,c===null?dd=y:c.next=y,y===null&&(Pl=c)):(c=m,(i!==0||(_&3)!==0)&&(md=!0)),m=y}er!==0&&er!==5||ec(i),Ci!==0&&(Ci=0)}function E_(i,s){for(var c=i.suspendedLanes,m=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var z=31-Pt(_),k=1<<z,U=y[z];U===-1?((k&c)===0||(k&m)!==0)&&(y[z]=re(k,s)):U<=s&&(i.expiredLanes|=k),_&=~k}if(s=_t,c=et,c=Zn(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,c===0||i===s&&(mt===2||mt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Rn(m),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Zi(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(m!==null&&Rn(m),xp(c)){case 2:case 8:c=ar;break;case 32:c=hn;break;case 268435456:c=Ir;break;default:c=hn}return m=A_.bind(null,i),c=Rr(c,m),i.callbackPriority=s,i.callbackNode=c,s}return m!==null&&m!==null&&Rn(m),i.callbackPriority=2,i.callbackNode=null,2}function A_(i,s){if(er!==0&&er!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(ud()&&i.callbackNode!==c)return null;var m=et;return m=Zn(i,i===_t?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(c_(i,m,s),E_(i,Re()),i.callbackNode!=null&&i.callbackNode===c?A_.bind(null,i):null)}function z_(i,s){if(ud())return null;c_(i,s,!0)}function RT(){KT(function(){(ut&6)!==0?Rr(ct,qT):C_()})}function av(){if(Ci===0){var i=bl;i===0&&(i=Zs,Zs<<=1,(Zs&261888)===0&&(Zs=256)),Ci=i}return Ci}function O_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:yu(""+i)}function D_(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function IT(i,s,c,m,y){if(s==="submit"&&c&&c.stateNode===y){var _=O_((y[Lr]||null).action),z=m.submitter;z&&(s=(s=z[Lr]||null)?O_(s.formAction):z.getAttribute("formAction"),s!==null&&(_=s,z=null));var k=new Su("action","action",null,m,y);i.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ci!==0){var U=z?D_(y,z):new FormData(y);Sh(c,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(k.preventDefault(),U=z?D_(y,z):new FormData(y),Sh(c,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var iv=0;iv<Bp.length;iv++){var sv=Bp[iv],LT=sv.toLowerCase(),$T=sv[0].toUpperCase()+sv.slice(1);In(LT,"on"+$T)}In(o0,"onAnimationEnd"),In(c0,"onAnimationIteration"),In(u0,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(rT,"onTransitionRun"),In(nT,"onTransitionStart"),In(aT,"onTransitionCancel"),In(d0,"onTransitionEnd"),il("onMouseEnter",["mouseout","mouseover"]),il("onMouseLeave",["mouseout","mouseover"]),il("onPointerEnter",["pointerout","pointerover"]),il("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tc));function M_(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var m=i[c],y=m.event;m=m.listeners;e:{var _=void 0;if(s)for(var z=m.length-1;0<=z;z--){var k=m[z],U=k.instance,ae=k.currentTarget;if(k=k.listener,U!==_&&y.isPropagationStopped())break e;_=k,y.currentTarget=ae;try{_(y)}catch(ve){Eu(ve)}y.currentTarget=null,_=U}else for(z=0;z<m.length;z++){if(k=m[z],U=k.instance,ae=k.currentTarget,k=k.listener,U!==_&&y.isPropagationStopped())break e;_=k,y.currentTarget=ae;try{_(y)}catch(ve){Eu(ve)}y.currentTarget=null,_=U}}}}function Je(i,s){var c=s[bp];c===void 0&&(c=s[bp]=new Set);var m=i+"__bubble";c.has(m)||(k_(s,i,2,!1),c.add(m))}function lv(i,s,c){var m=0;s&&(m|=4),k_(c,i,m,s)}var fd="_reactListening"+Math.random().toString(36).slice(2);function ov(i){if(!i[fd]){i[fd]=!0,Cj.forEach(function(c){c!=="selectionchange"&&(BT.has(c)||lv(c,!1,i),lv(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[fd]||(s[fd]=!0,lv("selectionchange",!1,s))}}function k_(i,s,c,m){switch(o1(s)){case 2:var y=hq;break;case 8:y=vq;break;default:y=_v}c=y.bind(null,s,c,i),y=void 0,!Ap||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),m?y!==void 0?i.addEventListener(s,c,{capture:!0,passive:y}):i.addEventListener(s,c,!0):y!==void 0?i.addEventListener(s,c,{passive:y}):i.addEventListener(s,c,!1)}function cv(i,s,c,m,y){var _=m;if((s&1)===0&&(s&2)===0&&m!==null)e:for(;;){if(m===null)return;var z=m.tag;if(z===3||z===4){var k=m.stateNode.containerInfo;if(k===y)break;if(z===4)for(z=m.return;z!==null;){var U=z.tag;if((U===3||U===4)&&z.stateNode.containerInfo===y)return;z=z.return}for(;k!==null;){if(z=rl(k),z===null)return;if(U=z.tag,U===5||U===6||U===26||U===27){m=_=z;continue e}k=k.parentNode}}m=m.return}Ij(function(){var ae=_,ve=Cp(c),be=[];e:{var ie=m0.get(i);if(ie!==void 0){var ue=Su,Ee=i;switch(i){case"keypress":if(Nu(c)===0)break e;case"keydown":case"keyup":ue=PP;break;case"focusin":Ee="focus",ue=Mp;break;case"focusout":Ee="blur",ue=Mp;break;case"beforeblur":case"afterblur":ue=Mp;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Bj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=NP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=RP;break;case o0:case c0:case u0:ue=wP;break;case d0:ue=LP;break;case"scroll":case"scrollend":ue=yP;break;case"wheel":ue=BP;break;case"copy":case"cut":case"paste":ue=EP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Fj;break;case"toggle":case"beforetoggle":ue=FP}var Ue=(s&4)!==0,xt=!Ue&&(i==="scroll"||i==="scrollend"),ee=Ue?ie!==null?ie+"Capture":null:ie;Ue=[];for(var K=ae,ne;K!==null;){var ge=K;if(ne=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ne===null||ee===null||(ge=_o(K,ee),ge!=null&&Ue.push(rc(K,ge,ne))),xt)break;K=K.return}0<Ue.length&&(ie=new ue(ie,Ee,null,c,ve),be.push({event:ie,listeners:Ue}))}}if((s&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",ie&&c!==wp&&(Ee=c.relatedTarget||c.fromElement)&&(rl(Ee)||Ee[tl]))break e;if((ue||ie)&&(ie=ve.window===ve?ve:(ie=ve.ownerDocument)?ie.defaultView||ie.parentWindow:window,ue?(Ee=c.relatedTarget||c.toElement,ue=ae,Ee=Ee?rl(Ee):null,Ee!==null&&(xt=o(Ee),Ue=Ee.tag,Ee!==xt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ee=null)):(ue=null,Ee=ae),ue!==Ee)){if(Ue=Bj,ge="onMouseLeave",ee="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&(Ue=Fj,ge="onPointerLeave",ee="onPointerEnter",K="pointer"),xt=ue==null?ie:No(ue),ne=Ee==null?ie:No(Ee),ie=new Ue(ge,K+"leave",ue,c,ve),ie.target=xt,ie.relatedTarget=ne,ge=null,rl(ve)===ae&&(Ue=new Ue(ee,K+"enter",Ee,c,ve),Ue.target=ne,Ue.relatedTarget=xt,ge=Ue),xt=ge,ue&&Ee)t:{for(Ue=UT,ee=ue,K=Ee,ne=0,ge=ee;ge;ge=Ue(ge))ne++;ge=0;for(var qe=K;qe;qe=Ue(qe))ge++;for(;0<ne-ge;)ee=Ue(ee),ne--;for(;0<ge-ne;)K=Ue(K),ge--;for(;ne--;){if(ee===K||K!==null&&ee===K.alternate){Ue=ee;break t}ee=Ue(ee),K=Ue(K)}Ue=null}else Ue=null;ue!==null&&P_(be,ie,ue,Ue,!1),Ee!==null&&xt!==null&&P_(be,xt,Ee,Ue,!0)}}e:{if(ie=ae?No(ae):window,ue=ie.nodeName&&ie.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ie.type==="file")var st=Xj;else if(Kj(ie))if(Zj)st=JP;else{st=XP;var ke=WP}else ue=ie.nodeName,!ue||ue.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ae&&Sp(ae.elementType)&&(st=Xj):st=ZP;if(st&&(st=st(i,ae))){Wj(be,st,c,ve);break e}ke&&ke(i,ie,ae),i==="focusout"&&ae&&ie.type==="number"&&ae.memoizedProps.value!=null&&_p(ie,"number",ie.value)}switch(ke=ae?No(ae):window,i){case"focusin":(Kj(ke)||ke.contentEditable==="true")&&(dl=ke,Ip=ae,Do=null);break;case"focusout":Do=Ip=dl=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,s0(be,c,ve);break;case"selectionchange":if(tT)break;case"keydown":case"keyup":s0(be,c,ve)}var Ke;if(Pp)e:{switch(i){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else ul?Vj(i,c)&&(tt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(tt="onCompositionStart");tt&&(Gj&&c.locale!=="ko"&&(ul||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&ul&&(Ke=Lj()):(ui=ve,zp="value"in ui?ui.value:ui.textContent,ul=!0)),ke=pd(ae,tt),0<ke.length&&(tt=new Uj(tt,i,null,c,ve),be.push({event:tt,listeners:ke}),Ke?tt.data=Ke:(Ke=Yj(c),Ke!==null&&(tt.data=Ke)))),(Ke=HP?QP(i,c):VP(i,c))&&(tt=pd(ae,"onBeforeInput"),0<tt.length&&(ke=new Uj("onBeforeInput","beforeinput",null,c,ve),be.push({event:ke,listeners:tt}),ke.data=Ke)),IT(be,i,ae,c,ve)}M_(be,s)})}function rc(i,s,c){return{instance:i,listener:s,currentTarget:c}}function pd(i,s){for(var c=s+"Capture",m=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=_o(i,c),y!=null&&m.unshift(rc(i,y,_)),y=_o(i,s),y!=null&&m.push(rc(i,y,_))),i.tag===3)return m;i=i.return}return[]}function UT(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function P_(i,s,c,m,y){for(var _=s._reactName,z=[];c!==null&&c!==m;){var k=c,U=k.alternate,ae=k.stateNode;if(k=k.tag,U!==null&&U===m)break;k!==5&&k!==26&&k!==27||ae===null||(U=ae,y?(ae=_o(c,_),ae!=null&&z.unshift(rc(c,ae,U))):y||(ae=_o(c,_),ae!=null&&z.push(rc(c,ae,U)))),c=c.return}z.length!==0&&i.push({event:s,listeners:z})}var FT=/\r\n?/g,GT=/\u0000|\uFFFD/g;function T_(i){return(typeof i=="string"?i:""+i).replace(FT,`
`).replace(GT,"")}function q_(i,s){return s=T_(s),T_(i)===s}function gt(i,s,c,m,y,_){switch(c){case"children":typeof m=="string"?s==="body"||s==="textarea"&&m===""||ll(i,m):(typeof m=="number"||typeof m=="bigint")&&s!=="body"&&ll(i,""+m);break;case"className":xu(i,"class",m);break;case"tabIndex":xu(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":xu(i,c,m);break;case"style":qj(i,m,_);break;case"data":if(s!=="object"){xu(i,"data",m);break}case"src":case"href":if(m===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=yu(""+m),i.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(s!=="input"&&gt(i,s,"name",y.name,y,null),gt(i,s,"formEncType",y.formEncType,y,null),gt(i,s,"formMethod",y.formMethod,y,null),gt(i,s,"formTarget",y.formTarget,y,null)):(gt(i,s,"encType",y.encType,y,null),gt(i,s,"method",y.method,y,null),gt(i,s,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=yu(""+m),i.setAttribute(c,m);break;case"onClick":m!=null&&(i.onclick=xa);break;case"onScroll":m!=null&&Je("scroll",i);break;case"onScrollEnd":m!=null&&Je("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(a(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}c=yu(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""+m):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":m===!0?i.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,m):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(c,m):i.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(c):i.setAttribute(c,m);break;case"popover":Je("beforetoggle",i),Je("toggle",i),gu(i,"popover",m);break;case"xlinkActuate":ga(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ga(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ga(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ga(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ga(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ga(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ga(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ga(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ga(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":gu(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=xP.get(c)||c,gu(i,c,m))}}function uv(i,s,c,m,y,_){switch(c){case"style":qj(i,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(a(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"children":typeof m=="string"?ll(i,m):(typeof m=="number"||typeof m=="bigint")&&ll(i,""+m);break;case"onScroll":m!=null&&Je("scroll",i);break;case"onScrollEnd":m!=null&&Je("scrollend",i);break;case"onClick":m!=null&&(i.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ej.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),s=c.slice(2,y?c.length-7:void 0),_=i[Lr]||null,_=_!=null?_[c]:null,typeof _=="function"&&i.removeEventListener(s,_,y),typeof m=="function")){typeof _!="function"&&_!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,m,y);break e}c in i?i[c]=m:m===!0?i.setAttribute(c,""):gu(i,c,m)}}}function br(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",i),Je("load",i);var m=!1,y=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var z=c[_];if(z!=null)switch(_){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:gt(i,s,_,z,c,null)}}y&&gt(i,s,"srcSet",c.srcSet,c,null),m&&gt(i,s,"src",c.src,c,null);return;case"input":Je("invalid",i);var k=_=z=y=null,U=null,ae=null;for(m in c)if(c.hasOwnProperty(m)){var ve=c[m];if(ve!=null)switch(m){case"name":y=ve;break;case"type":z=ve;break;case"checked":U=ve;break;case"defaultChecked":ae=ve;break;case"value":_=ve;break;case"defaultValue":k=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(a(137,s));break;default:gt(i,s,m,ve,c,null)}}Mj(i,_,k,U,ae,z,y,!1);return;case"select":Je("invalid",i),m=z=_=null;for(y in c)if(c.hasOwnProperty(y)&&(k=c[y],k!=null))switch(y){case"value":_=k;break;case"defaultValue":z=k;break;case"multiple":m=k;default:gt(i,s,y,k,c,null)}s=_,c=z,i.multiple=!!m,s!=null?sl(i,!!m,s,!1):c!=null&&sl(i,!!m,c,!0);return;case"textarea":Je("invalid",i),_=y=m=null;for(z in c)if(c.hasOwnProperty(z)&&(k=c[z],k!=null))switch(z){case"value":m=k;break;case"defaultValue":y=k;break;case"children":_=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(91));break;default:gt(i,s,z,k,c,null)}Pj(i,m,y,_);return;case"option":for(U in c)c.hasOwnProperty(U)&&(m=c[U],m!=null)&&(U==="selected"?i.selected=m&&typeof m!="function"&&typeof m!="symbol":gt(i,s,U,m,c,null));return;case"dialog":Je("beforetoggle",i),Je("toggle",i),Je("cancel",i),Je("close",i);break;case"iframe":case"object":Je("load",i);break;case"video":case"audio":for(m=0;m<tc.length;m++)Je(tc[m],i);break;case"image":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"embed":case"source":case"link":Je("error",i),Je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in c)if(c.hasOwnProperty(ae)&&(m=c[ae],m!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:gt(i,s,ae,m,c,null)}return;default:if(Sp(s)){for(ve in c)c.hasOwnProperty(ve)&&(m=c[ve],m!==void 0&&uv(i,s,ve,m,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(m=c[k],m!=null&&gt(i,s,k,m,c,null))}function HT(i,s,c,m){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,z=null,k=null,U=null,ae=null,ve=null;for(ue in c){var be=c[ue];if(c.hasOwnProperty(ue)&&be!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":U=be;default:m.hasOwnProperty(ue)||gt(i,s,ue,null,m,be)}}for(var ie in m){var ue=m[ie];if(be=c[ie],m.hasOwnProperty(ie)&&(ue!=null||be!=null))switch(ie){case"type":_=ue;break;case"name":y=ue;break;case"checked":ae=ue;break;case"defaultChecked":ve=ue;break;case"value":z=ue;break;case"defaultValue":k=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,s));break;default:ue!==be&&gt(i,s,ie,ue,m,be)}}Np(i,z,k,U,ae,ve,_,y);return;case"select":ue=z=k=ie=null;for(_ in c)if(U=c[_],c.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":ue=U;default:m.hasOwnProperty(_)||gt(i,s,_,null,m,U)}for(y in m)if(_=m[y],U=c[y],m.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":ie=_;break;case"defaultValue":k=_;break;case"multiple":z=_;default:_!==U&&gt(i,s,y,_,m,U)}s=k,c=z,m=ue,ie!=null?sl(i,!!c,ie,!1):!!m!=!!c&&(s!=null?sl(i,!!c,s,!0):sl(i,!!c,c?[]:"",!1));return;case"textarea":ue=ie=null;for(k in c)if(y=c[k],c.hasOwnProperty(k)&&y!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:gt(i,s,k,null,m,y)}for(z in m)if(y=m[z],_=c[z],m.hasOwnProperty(z)&&(y!=null||_!=null))switch(z){case"value":ie=y;break;case"defaultValue":ue=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(a(91));break;default:y!==_&&gt(i,s,z,y,m,_)}kj(i,ie,ue);return;case"option":for(var Ee in c)ie=c[Ee],c.hasOwnProperty(Ee)&&ie!=null&&!m.hasOwnProperty(Ee)&&(Ee==="selected"?i.selected=!1:gt(i,s,Ee,null,m,ie));for(U in m)ie=m[U],ue=c[U],m.hasOwnProperty(U)&&ie!==ue&&(ie!=null||ue!=null)&&(U==="selected"?i.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":gt(i,s,U,ie,m,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in c)ie=c[Ue],c.hasOwnProperty(Ue)&&ie!=null&&!m.hasOwnProperty(Ue)&&gt(i,s,Ue,null,m,ie);for(ae in m)if(ie=m[ae],ue=c[ae],m.hasOwnProperty(ae)&&ie!==ue&&(ie!=null||ue!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,s));break;default:gt(i,s,ae,ie,m,ue)}return;default:if(Sp(s)){for(var xt in c)ie=c[xt],c.hasOwnProperty(xt)&&ie!==void 0&&!m.hasOwnProperty(xt)&&uv(i,s,xt,void 0,m,ie);for(ve in m)ie=m[ve],ue=c[ve],!m.hasOwnProperty(ve)||ie===ue||ie===void 0&&ue===void 0||uv(i,s,ve,ie,m,ue);return}}for(var ee in c)ie=c[ee],c.hasOwnProperty(ee)&&ie!=null&&!m.hasOwnProperty(ee)&&gt(i,s,ee,null,m,ie);for(be in m)ie=m[be],ue=c[be],!m.hasOwnProperty(be)||ie===ue||ie==null&&ue==null||gt(i,s,be,ie,m,ue)}function R_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QT(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,c=performance.getEntriesByType("resource"),m=0;m<c.length;m++){var y=c[m],_=y.transferSize,z=y.initiatorType,k=y.duration;if(_&&k&&R_(z)){for(z=0,k=y.responseEnd,m+=1;m<c.length;m++){var U=c[m],ae=U.startTime;if(ae>k)break;var ve=U.transferSize,be=U.initiatorType;ve&&R_(be)&&(U=U.responseEnd,z+=ve*(U<k?1:(k-ae)/(U-ae)))}if(--m,s+=8*(_+z)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var dv=null,mv=null;function hd(i){return i.nodeType===9?i:i.ownerDocument}function I_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function fv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pv=null;function VT(){var i=window.event;return i&&i.type==="popstate"?i===pv?!1:(pv=i,!0):(pv=null,!1)}var $_=typeof setTimeout=="function"?setTimeout:void 0,YT=typeof clearTimeout=="function"?clearTimeout:void 0,B_=typeof Promise=="function"?Promise:void 0,KT=typeof queueMicrotask=="function"?queueMicrotask:typeof B_<"u"?function(i){return B_.resolve(null).then(i).catch(WT)}:$_;function WT(i){setTimeout(function(){throw i})}function Ei(i){return i==="head"}function U_(i,s){var c=s,m=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(m===0){i.removeChild(y),Il(s);return}m--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")m++;else if(c==="html")nc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,nc(c);for(var _=c.firstChild;_;){var z=_.nextSibling,k=_.nodeName;_[jo]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=z}}else c==="body"&&nc(i.ownerDocument.body);c=y}while(c);Il(s)}function F_(i,s){var c=i;i=0;do{var m=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=m}while(c)}function hv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":hv(c),yp(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function XT(i,s,c,m){for(;i.nodeType===1;){var y=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[jo])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=wn(i.nextSibling),i===null)break}return null}function ZT(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=wn(i.nextSibling),i===null))return null;return i}function G_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=wn(i.nextSibling),i===null))return null;return i}function vv(i){return i.data==="$?"||i.data==="$~"}function gv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function JT(i,s){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||c.readyState!=="loading")s();else{var m=function(){s(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function wn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var xv=null;function H_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(s===0)return wn(i.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}i=i.nextSibling}return null}function Q_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return i;s--}else c!=="/$"&&c!=="/&"||s++}i=i.previousSibling}return null}function V_(i,s,c){switch(s=hd(c),i){case"html":if(i=s.documentElement,!i)throw Error(a(452));return i;case"head":if(i=s.head,!i)throw Error(a(453));return i;case"body":if(i=s.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function nc(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);yp(i)}var Cn=new Map,Y_=new Set;function vd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Pa=X.d;X.d={f:eq,r:tq,D:rq,C:nq,L:aq,m:iq,X:lq,S:sq,M:oq};function eq(){var i=Pa.f(),s=ld();return i||s}function tq(i){var s=nl(i);s!==null&&s.tag===5&&s.type==="form"?dN(s):Pa.r(i)}var Tl=typeof document>"u"?null:document;function K_(i,s,c){var m=Tl;if(m&&typeof s=="string"&&s){var y=xn(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Y_.has(y)||(Y_.add(y),i={rel:i,crossOrigin:c,href:s},m.querySelector(y)===null&&(s=m.createElement("link"),br(s,"link",i),ir(s),m.head.appendChild(s)))}}function rq(i){Pa.D(i),K_("dns-prefetch",i,null)}function nq(i,s){Pa.C(i,s),K_("preconnect",i,s)}function aq(i,s,c){Pa.L(i,s,c);var m=Tl;if(m&&i&&s){var y='link[rel="preload"][as="'+xn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+xn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+xn(c.imageSizes)+'"]')):y+='[href="'+xn(i)+'"]';var _=y;switch(s){case"style":_=ql(i);break;case"script":_=Rl(i)}Cn.has(_)||(i=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),Cn.set(_,i),m.querySelector(y)!==null||s==="style"&&m.querySelector(ac(_))||s==="script"&&m.querySelector(ic(_))||(s=m.createElement("link"),br(s,"link",i),ir(s),m.head.appendChild(s)))}}function iq(i,s){Pa.m(i,s);var c=Tl;if(c&&i){var m=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+xn(m)+'"][href="'+xn(i)+'"]',_=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Rl(i)}if(!Cn.has(_)&&(i=v({rel:"modulepreload",href:i},s),Cn.set(_,i),c.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ic(_)))return}m=c.createElement("link"),br(m,"link",i),ir(m),c.head.appendChild(m)}}}function sq(i,s,c){Pa.S(i,s,c);var m=Tl;if(m&&i){var y=al(m).hoistableStyles,_=ql(i);s=s||"default";var z=y.get(_);if(!z){var k={loading:0,preload:null};if(z=m.querySelector(ac(_)))k.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},c),(c=Cn.get(_))&&bv(i,c);var U=z=m.createElement("link");ir(U),br(U,"link",i),U._p=new Promise(function(ae,ve){U.onload=ae,U.onerror=ve}),U.addEventListener("load",function(){k.loading|=1}),U.addEventListener("error",function(){k.loading|=2}),k.loading|=4,gd(z,s,m)}z={type:"stylesheet",instance:z,count:1,state:k},y.set(_,z)}}}function lq(i,s){Pa.X(i,s);var c=Tl;if(c&&i){var m=al(c).hoistableScripts,y=Rl(i),_=m.get(y);_||(_=c.querySelector(ic(y)),_||(i=v({src:i,async:!0},s),(s=Cn.get(y))&&yv(i,s),_=c.createElement("script"),ir(_),br(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(y,_))}}function oq(i,s){Pa.M(i,s);var c=Tl;if(c&&i){var m=al(c).hoistableScripts,y=Rl(i),_=m.get(y);_||(_=c.querySelector(ic(y)),_||(i=v({src:i,async:!0,type:"module"},s),(s=Cn.get(y))&&yv(i,s),_=c.createElement("script"),ir(_),br(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(y,_))}}function W_(i,s,c,m){var y=(y=Y.current)?vd(y):null;if(!y)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=ql(c.href),c=al(y).hoistableStyles,m=c.get(s),m||(m={type:"style",instance:null,count:0,state:null},c.set(s,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=ql(c.href);var _=al(y).hoistableStyles,z=_.get(i);if(z||(y=y.ownerDocument||y,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,z),(_=y.querySelector(ac(i)))&&!_._p&&(z.instance=_,z.state.loading=5),Cn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Cn.set(i,c),_||cq(y,i,c,z.state))),s&&m===null)throw Error(a(528,""));return z}if(s&&m!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Rl(c),c=al(y).hoistableScripts,m=c.get(s),m||(m={type:"script",instance:null,count:0,state:null},c.set(s,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function ql(i){return'href="'+xn(i)+'"'}function ac(i){return'link[rel="stylesheet"]['+i+"]"}function X_(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function cq(i,s,c,m){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?m.loading=1:(s=i.createElement("link"),m.preload=s,s.addEventListener("load",function(){return m.loading|=1}),s.addEventListener("error",function(){return m.loading|=2}),br(s,"link",c),ir(s),i.head.appendChild(s))}function Rl(i){return'[src="'+xn(i)+'"]'}function ic(i){return"script[async]"+i}function Z_(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var m=i.querySelector('style[data-href~="'+xn(c.href)+'"]');if(m)return s.instance=m,ir(m),m;var y=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),ir(m),br(m,"style",y),gd(m,c.precedence,i),s.instance=m;case"stylesheet":y=ql(c.href);var _=i.querySelector(ac(y));if(_)return s.state.loading|=4,s.instance=_,ir(_),_;m=X_(c),(y=Cn.get(y))&&bv(m,y),_=(i.ownerDocument||i).createElement("link"),ir(_);var z=_;return z._p=new Promise(function(k,U){z.onload=k,z.onerror=U}),br(_,"link",m),s.state.loading|=4,gd(_,c.precedence,i),s.instance=_;case"script":return _=Rl(c.src),(y=i.querySelector(ic(_)))?(s.instance=y,ir(y),y):(m=c,(y=Cn.get(_))&&(m=v({},c),yv(m,y)),i=i.ownerDocument||i,y=i.createElement("script"),ir(y),br(y,"link",m),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(m=s.instance,s.state.loading|=4,gd(m,c.precedence,i));return s.instance}function gd(i,s,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,_=y,z=0;z<m.length;z++){var k=m[z];if(k.dataset.precedence===s)_=k;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function bv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function yv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var xd=null;function J_(i,s,c){if(xd===null){var m=new Map,y=xd=new Map;y.set(c,m)}else y=xd,m=y.get(c),m||(m=new Map,y.set(c,m));if(m.has(i))return m;for(m.set(i,null),c=c.getElementsByTagName(i),y=0;y<c.length;y++){var _=c[y];if(!(_[jo]||_[hr]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var z=_.getAttribute(s)||"";z=i+z;var k=m.get(z);k?k.push(_):m.set(z,[_])}}return m}function e1(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function uq(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function t1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function dq(i,s,c,m){if(c.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=ql(m.href),_=s.querySelector(ac(y));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=bd.bind(i),s.then(i,i)),c.state.loading|=4,c.instance=_,ir(_);return}_=s.ownerDocument||s,m=X_(m),(y=Cn.get(y))&&bv(m,y),_=_.createElement("link"),ir(_);var z=_;z._p=new Promise(function(k,U){z.onload=k,z.onerror=U}),br(_,"link",m),c.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=bd.bind(i),s.addEventListener("load",c),s.addEventListener("error",c))}}var jv=0;function mq(i,s){return i.stylesheets&&i.count===0&&jd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var m=setTimeout(function(){if(i.stylesheets&&jd(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&jv===0&&(jv=62500*QT());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&jd(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>jv?50:800)+s);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(y)}}:null}function bd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yd=null;function jd(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yd=new Map,s.forEach(fq,i),yd=null,bd.call(i))}function fq(i,s){if(!(s.state.loading&4)){var c=yd.get(i);if(c)var m=c.get(null);else{c=new Map,yd.set(i,c);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var z=y[_];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(c.set(z.dataset.precedence,z),m=z)}m&&c.set(null,m)}y=s.instance,z=y.getAttribute("data-precedence"),_=c.get(z)||m,_===m&&c.set(null,y),c.set(z,y),this.count++,m=bd.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var sc={$$typeof:w,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function pq(i,s,c,m,y,_,z,k,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function r1(i,s,c,m,y,_,z,k,U,ae,ve,be){return i=new pq(i,s,c,z,U,ae,ve,be,k),s=1,_===!0&&(s|=24),_=Zr(3,null,null,s),i.current=_,_.stateNode=i,s=eh(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:m,isDehydrated:c,cache:s},ah(_),i}function n1(i){return i?(i=pl,i):pl}function a1(i,s,c,m,y,_){y=n1(y),m.context===null?m.context=y:m.pendingContext=y,m=vi(s),m.payload={element:c},_=_===void 0?null:_,_!==null&&(m.callback=_),c=gi(i,m,s),c!==null&&(Hr(c,i,s),Io(c,i,s))}function i1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function Nv(i,s){i1(i,s),(i=i.alternate)&&i1(i,s)}function s1(i){if(i.tag===13||i.tag===31){var s=as(i,67108864);s!==null&&Hr(s,i,67108864),Nv(i,67108864)}}function l1(i){if(i.tag===13||i.tag===31){var s=nn();s=gp(s);var c=as(i,s);c!==null&&Hr(c,i,s),Nv(i,s)}}var Nd=!0;function hq(i,s,c,m){var y=q.T;q.T=null;var _=X.p;try{X.p=2,_v(i,s,c,m)}finally{X.p=_,q.T=y}}function vq(i,s,c,m){var y=q.T;q.T=null;var _=X.p;try{X.p=8,_v(i,s,c,m)}finally{X.p=_,q.T=y}}function _v(i,s,c,m){if(Nd){var y=Sv(m);if(y===null)cv(i,s,m,_d,c),c1(i,m);else if(xq(y,i,s,c,m))m.stopPropagation();else if(c1(i,m),s&4&&-1<gq.indexOf(i)){for(;y!==null;){var _=nl(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var z=va(_.pendingLanes);if(z!==0){var k=_;for(k.pendingLanes|=2,k.entangledLanes|=2;z;){var U=1<<31-Pt(z);k.entanglements[1]|=U,z&=~U}ra(_),(ut&6)===0&&(id=Re()+500,ec(0))}}break;case 31:case 13:k=as(_,2),k!==null&&Hr(k,_,2),ld(),Nv(_,2)}if(_=Sv(m),_===null&&cv(i,s,m,_d,c),_===y)break;y=_}y!==null&&m.stopPropagation()}else cv(i,s,m,null,c)}}function Sv(i){return i=Cp(i),wv(i)}var _d=null;function wv(i){if(_d=null,i=rl(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=u(s),i!==null)return i;i=null}else if(c===31){if(i=d(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return _d=i,null}function o1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case ct:return 2;case ar:return 8;case hn:case oi:return 32;case Ir:return 268435456;default:return 32}default:return 32}}var Cv=!1,Ai=null,zi=null,Oi=null,lc=new Map,oc=new Map,Di=[],gq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c1(i,s){switch(i){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(s.pointerId)}}function cc(i,s,c,m,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:c,eventSystemFlags:m,nativeEvent:_,targetContainers:[y]},s!==null&&(s=nl(s),s!==null&&s1(s)),i):(i.eventSystemFlags|=m,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function xq(i,s,c,m,y){switch(s){case"focusin":return Ai=cc(Ai,i,s,c,m,y),!0;case"dragenter":return zi=cc(zi,i,s,c,m,y),!0;case"mouseover":return Oi=cc(Oi,i,s,c,m,y),!0;case"pointerover":var _=y.pointerId;return lc.set(_,cc(lc.get(_)||null,i,s,c,m,y)),!0;case"gotpointercapture":return _=y.pointerId,oc.set(_,cc(oc.get(_)||null,i,s,c,m,y)),!0}return!1}function u1(i){var s=rl(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){i.blockedOn=s,Sj(i.priority,function(){l1(c)});return}}else if(s===31){if(s=d(c),s!==null){i.blockedOn=s,Sj(i.priority,function(){l1(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=Sv(i.nativeEvent);if(c===null){c=i.nativeEvent;var m=new c.constructor(c.type,c);wp=m,c.target.dispatchEvent(m),wp=null}else return s=nl(c),s!==null&&s1(s),i.blockedOn=c,!1;s.shift()}return!0}function d1(i,s,c){Sd(i)&&c.delete(s)}function bq(){Cv=!1,Ai!==null&&Sd(Ai)&&(Ai=null),zi!==null&&Sd(zi)&&(zi=null),Oi!==null&&Sd(Oi)&&(Oi=null),lc.forEach(d1),oc.forEach(d1)}function wd(i,s){i.blockedOn===s&&(i.blockedOn=null,Cv||(Cv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bq)))}var Cd=null;function m1(i){Cd!==i&&(Cd=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Cd===i&&(Cd=null);for(var s=0;s<i.length;s+=3){var c=i[s],m=i[s+1],y=i[s+2];if(typeof m!="function"){if(wv(m||c)===null)continue;break}var _=nl(c);_!==null&&(i.splice(s,3),s-=3,Sh(_,{pending:!0,data:y,method:c.method,action:m},m,y))}}))}function Il(i){function s(U){return wd(U,i)}Ai!==null&&wd(Ai,i),zi!==null&&wd(zi,i),Oi!==null&&wd(Oi,i),lc.forEach(s),oc.forEach(s);for(var c=0;c<Di.length;c++){var m=Di[c];m.blockedOn===i&&(m.blockedOn=null)}for(;0<Di.length&&(c=Di[0],c.blockedOn===null);)u1(c),c.blockedOn===null&&Di.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var y=c[m],_=c[m+1],z=y[Lr]||null;if(typeof _=="function")z||m1(c);else if(z){var k=null;if(_&&_.hasAttribute("formAction")){if(y=_,z=_[Lr]||null)k=z.formAction;else if(wv(y)!==null)continue}else k=z.action;typeof k=="function"?c[m+1]=k:(c.splice(m,3),m-=3),m1(c)}}}function f1(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(z){return y=z})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),m||setTimeout(c,20)}function c(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Ev(i){this._internalRoot=i}Ed.prototype.render=Ev.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,m=nn();a1(c,m,i,s,null,null)},Ed.prototype.unmount=Ev.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;a1(i.current,2,null,i,null,null),ld(),s[tl]=null}};function Ed(i){this._internalRoot=i}Ed.prototype.unstable_scheduleHydration=function(i){if(i){var s=_j();i={blockedOn:null,target:i,priority:s};for(var c=0;c<Di.length&&s!==0&&s<Di[c].priority;c++);Di.splice(c,0,i),c===0&&u1(i)}};var p1=t.version;if(p1!=="19.2.4")throw Error(a(527,p1,"19.2.4"));X.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=p(s),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var yq={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{Se=Ad.inject(yq),Ge=Ad}catch{}}return dc.createRoot=function(i,s){if(!l(i))throw Error(a(299));var c=!1,m="",y=jN,_=NN,z=_N;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(z=s.onRecoverableError)),s=r1(i,1,!1,null,null,c,m,null,y,_,z,f1),i[tl]=s.current,ov(i),new Ev(s)},dc.hydrateRoot=function(i,s,c){if(!l(i))throw Error(a(299));var m=!1,y="",_=jN,z=NN,k=_N,U=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(z=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(U=c.formState)),s=r1(i,1,!0,s,c??null,m,y,U,_,z,k,f1),s.context=n1(null),c=s.current,m=nn(),m=gp(m),y=vi(m),y.callback=null,gi(c,y,m),c=m,s.current.lanes=c,Sr(s,c),ra(s),i[tl]=s.current,ov(i),new Ed(s)},dc.version="19.2.4",dc}var S1;function N3(){if(S1)return Mv.exports;S1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mv.exports=j3(),Mv.exports}var _3=N3();const S3=Xa(_3),w3={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},Tb=Eq(w3),Hl=Aq(Tb),W=zq(Tb,{localCache:Oq({tabManager:Mq()})}),Er=Dq(Tb),C3=Object.freeze(Object.defineProperty({__proto__:null,auth:Hl,db:W,storage:Er},Symbol.toStringTag,{value:"Module"})),w1={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},Tv=e=>w1[e]||w1.default,lA=g.createContext(null),E3=({children:e})=>{const[t,n]=g.useState(null),[a,l]=g.useState(!0),o=async x=>{try{const N=await Mt(je(W,"users",x));if(N.exists()){const j=N.data();return{uid:x,email:j.email,displayName:j.displayName,role:j.role,isPremium:j.isPremium||!1,subscriptionEnd:j.subscriptionEnd?.toDate()||null,photoURL:j.photoURL,createdAt:j.createdAt?.toDate()||new Date,lastLogin:j.lastLogin?.toDate()}}return null}catch(N){return console.error("Erreur lors de la rcupration des donnes utilisateur:",N),null}},u=async(x,N)=>{const j=je(W,"users",x.uid);(await Mt(j)).exists()?await Qe(j,{lastLogin:yt()}):await pf(j,{email:x.email,displayName:x.displayName||N?.displayName||"",role:N?.role||"eleve",isPremium:!1,photoURL:x.photoURL,createdAt:yt(),lastLogin:yt()})},d=async(x,N)=>{try{const j=await Lq(Hl,x,N);await u(j.user)}catch(j){throw new Error(Tv(j.code))}},f=async x=>{try{if(x.password!==x.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const N=await Tq(Hl,x.email,x.password);await qq(N.user,{displayName:x.displayName}),await u(N.user,{displayName:x.displayName,role:x.role})}catch(N){throw N.message?N:new Error(Tv(N.code))}},p=async x=>{try{const N=new Rq;N.setCustomParameters({prompt:"select_account"});const j=await Iq(Hl,N);await u(j.user,{role:x??"eleve"})}catch(N){throw new Error(Tv(N.code))}},h=async()=>{try{await Pq(Hl),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},v=async x=>{if(!t)throw new Error("Aucun utilisateur connect.");try{const N=je(W,"users",t.uid);await Qe(N,{...x,updatedAt:yt()}),n(j=>j?{...j,...x}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};g.useEffect(()=>{const x=kq(Hl,async N=>{if(N){const j=await o(N.uid);n(j)}else n(null);l(!1)});return()=>x()},[]);const b={currentUser:t,loading:a,login:d,loginWithGoogle:p,register:f,logout:h,updateProfile:v};return r.jsx(lA.Provider,{value:b,children:a?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement..."})]}):e})},rt=()=>{const e=g.useContext(lA);if(!e)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return e},Kl=({children:e,allowedRoles:t,requirePremium:n=!1})=>{const{currentUser:a,loading:l}=rt();return l?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Vrification des autorisations..."})]}):a?t&&!t.includes(a.role)?r.jsxs("div",{className:"error-container",children:[r.jsx("h2",{children:"Accs non autoris"}),r.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),r.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!a.isPremium?r.jsxs("div",{className:"error-container premium-required",children:[r.jsx("h2",{children:"Contenu Premium"}),r.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),r.jsxs("div",{className:"premium-cta",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",r.jsx("strong",{children:"20 000 FCFA/an"})]}),r.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):r.jsx(r.Fragment,{children:e}):r.jsxs("div",{className:"error-container",children:[r.jsx("h2",{children:"Accs refus"}),r.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),r.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},an=({children:e})=>r.jsx(Kl,{allowedRoles:["admin"],children:e}),sn=({children:e})=>r.jsx(Kl,{allowedRoles:["admin","prof"],children:e}),A3="http://localhost:3001",ha="notifications";function oA(e,t){return{id:e,destinataireId:t.destinataireId,destinataireRole:t.destinataireRole,type:t.type,titre:t.titre,message:t.message,lienAction:t.lienAction,labelAction:t.labelAction,emetteurId:t.emetteurId,emetteurNom:t.emetteurNom,entiteId:t.entiteId,entiteType:t.entiteType,statut:t.statut,canal:t.canal,emailEnvoye:t.emailEnvoye,emailErreur:t.emailErreur,createdAt:t.createdAt?.toDate()??new Date,luAt:t.luAt?.toDate()??void 0}}async function z3(e){return(await kt(Ne(W,ha),{destinataireId:e.destinataireId,destinataireRole:e.destinataireRole,type:e.type,titre:e.titre,message:e.message,lienAction:e.lienAction??null,labelAction:e.labelAction??null,emetteurId:e.emetteurId??null,emetteurNom:e.emetteurNom??null,entiteId:e.entiteId??null,entiteType:e.entiteType??null,statut:"non_lue",canal:e.canal,emailEnvoye:!1,createdAt:Oe.now()})).id}async function O3(e){try{const t=await fetch(`${A3}/api/notifications/send-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const a=await t.text();return{success:!1,error:`HTTP ${t.status}: ${a}`}}return await t.json()}catch(t){return{success:!1,error:t instanceof Error?t.message:"Erreur rseau inconnue"}}}async function D3(e){const t=await z3(e);let n=!1,a;if((e.canal==="email"||e.canal==="les_deux")&&e.emailDestinataire){const l=await O3({to:e.emailDestinataire,toName:e.emailDestinatairNom,type:e.type,titre:e.titre,message:e.message,lienAction:e.lienAction,labelAction:e.labelAction,emetteurNom:e.emetteurNom});n=l.success,a=l.error,await Qe(je(W,ha,t),{emailEnvoye:n,emailErreur:a??null})}return{notifId:t,emailEnvoye:n,emailErreur:a}}async function M3(e,t){const n=De(Ne(W,"inscriptions_groupe"),we("groupeId","==",e),we("statut","==","actif")),a=await ze(n);let l=0;const o=Dn(W);return a.docs.forEach(u=>{const d=u.data().eleveId,f=je(Ne(W,ha));o.set(f,{destinataireId:d,destinataireRole:"eleve",type:t.type,titre:t.titre,message:t.message,lienAction:t.lienAction??null,labelAction:t.labelAction??null,emetteurId:t.emetteurId??null,emetteurNom:t.emetteurNom??null,entiteId:t.entiteId??null,entiteType:t.entiteType??null,statut:"non_lue",canal:t.canal,emailEnvoye:!1,createdAt:Oe.now()}),l++}),await o.commit(),l}async function k3(e,t){const n=e==="tous"?De(Ne(W,"users"),_r(500)):De(Ne(W,"users"),we("role","==",e),_r(500)),a=await ze(n);let l=0;const o=Dn(W);return a.docs.forEach(u=>{const d=u.data(),f=je(Ne(W,ha));o.set(f,{destinataireId:u.id,destinataireRole:d.role??e,type:t.type,titre:t.titre,message:t.message,lienAction:t.lienAction??null,labelAction:t.labelAction??null,emetteurId:t.emetteurId??null,emetteurNom:t.emetteurNom??null,entiteId:t.entiteId??null,entiteType:t.entiteType??null,statut:"non_lue",canal:t.canal,emailEnvoye:!1,createdAt:Oe.now()}),l++}),await o.commit(),l}async function P3(e,t={}){const{includeArchived:n=!1,limitCount:a=50}=t,l=[we("destinataireId","==",e),Xe("createdAt","desc"),_r(a)];n||l.splice(1,0,we("statut","!=","archivee"));const o=De(Ne(W,ha),...l);return(await ze(o)).docs.map(d=>oA(d.id,d.data()))}function T3(e,t){const n=De(Ne(W,ha),we("destinataireId","==",e),we("statut","==","non_lue"),Xe("createdAt","desc"),_r(20));return hf(n,a=>{const l=a.docs.map(o=>oA(o.id,o.data()));t(l)})}async function Cx(e){await Qe(je(W,ha,e),{statut:"lue",luAt:Oe.now()})}async function cA(e){const t=De(Ne(W,ha),we("destinataireId","==",e),we("statut","==","non_lue")),n=await ze(t),a=Dn(W);n.docs.forEach(l=>{a.update(l.ref,{statut:"lue",luAt:Oe.now()})}),await a.commit()}async function q3(e){await Qe(je(W,ha,e),{statut:"archivee"})}async function R3(e){await pn(je(W,ha,e))}const um={nouveau_cours:{titreDefaut:"Nouveau cours disponible",messageDefaut:"Un nouveau cours vient d'tre publi dans votre matire.",icone:"",couleur:"#2563eb"},resultat_quiz:{titreDefaut:"Rsultat de votre quiz",messageDefaut:"Votre rsultat au quiz est disponible.",icone:"",couleur:"#10b981"},rappel_echeance:{titreDefaut:"Rappel d'chance",messageDefaut:"N'oubliez pas votre examen approche.",icone:"",couleur:"#f59e0b"},message_prof:{titreDefaut:"Message de votre professeur",messageDefaut:"",icone:"",couleur:"#8b5cf6"},annonce:{titreDefaut:"Annonce importante",messageDefaut:"",icone:"",couleur:"#ef4444"},nouveau_abonnement:{titreDefaut:"Abonnement Premium activ ",messageDefaut:"Votre abonnement Premium PedaClic est maintenant actif. Profitez de tous les contenus !",icone:"",couleur:"#f59e0b"},bienvenue:{titreDefaut:"Bienvenue sur PedaClic !",messageDefaut:"Bienvenue sur PedaClic, la plateforme ducative sngalaise. Commencez votre apprentissage ds maintenant !",icone:"",couleur:"#10b981"}},qb={nouveau_cours:" Nouveau cours",resultat_quiz:" Rsultat quiz",rappel_echeance:" Rappel chance",message_prof:" Message prof",annonce:" Annonce",nouveau_abonnement:" Abonnement",bienvenue:" Bienvenue"},I3={eleve:" lves",parent:" Parents",prof:" Professeurs",admin:" Admins",tous:" Tous les utilisateurs"};function L3(e){const n=new Date().getTime()-e.getTime(),a=Math.floor(n/6e4),l=Math.floor(a/60),o=Math.floor(l/24);return a<1?" l'instant":a<60?`Il y a ${a} min`:l<24?`Il y a ${l}h`:o===1?"Hier":o<7?`Il y a ${o} jours`:e.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}const $3=()=>{const{currentUser:e}=rt(),t=it(),[n,a]=g.useState([]),[l,o]=g.useState(!1),[u,d]=g.useState(!1),f=g.useRef(null);g.useEffect(()=>{if(!e)return;const x=T3(e.uid,N=>a(N));return()=>x()},[e]),g.useEffect(()=>{function x(N){f.current&&!f.current.contains(N.target)&&o(!1)}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const p=n.length,h=g.useCallback(async x=>{await Cx(x.id),o(!1),x.lienAction&&t(x.lienAction)},[t]),v=g.useCallback(async()=>{if(!(!e||u)){d(!0);try{await cA(e.uid)}finally{d(!1)}}},[e,u]),b=()=>{o(!1),t("/notifications")};return e?r.jsxs("div",{className:"notif-bell",ref:f,children:[r.jsxs("button",{className:"notif-bell__btn",onClick:()=>o(x=>!x),"aria-label":`Notifications${p>0?`  ${p} non lues`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[r.jsx("span",{className:"notif-bell__icon","aria-hidden":"true",children:""}),p>0&&r.jsx("span",{className:"notif-bell__badge","aria-hidden":"true",children:p>99?"99+":p})]}),l&&r.jsxs("div",{className:"notif-bell__dropdown",role:"dialog","aria-label":"Notifications rcentes",children:[r.jsxs("div",{className:"notif-bell__dropdown-header",children:[r.jsxs("h3",{className:"notif-bell__dropdown-title",children:[" Notifications",p>0&&r.jsxs("span",{className:"notif-bell__dropdown-count",children:[p," nouvelles"]})]}),p>0&&r.jsx("button",{className:"notif-bell__mark-all-btn",onClick:v,disabled:u,children:u?"":"Tout lire"})]}),r.jsx("div",{className:"notif-bell__list",children:n.length===0?r.jsxs("div",{className:"notif-bell__empty",children:[r.jsx("span",{className:"notif-bell__empty-icon",children:""}),r.jsx("p",{children:"Tout est  jour !"})]}):n.slice(0,5).map(x=>{const N=um[x.type];return r.jsxs("button",{className:`notif-bell__item ${x.statut==="non_lue"?"notif-bell__item--unread":""}`,onClick:()=>h(x),children:[r.jsx("span",{className:"notif-bell__item-icon",style:{background:N.couleur+"20",color:N.couleur},"aria-hidden":"true",children:N.icone}),r.jsxs("div",{className:"notif-bell__item-content",children:[r.jsx("p",{className:"notif-bell__item-titre",children:x.titre}),r.jsx("p",{className:"notif-bell__item-message",children:x.message}),r.jsx("p",{className:"notif-bell__item-date",children:L3(x.createdAt)})]}),x.statut==="non_lue"&&r.jsx("span",{className:"notif-bell__item-dot","aria-hidden":"true"})]},x.id)})}),r.jsx("div",{className:"notif-bell__dropdown-footer",children:r.jsx("button",{className:"notif-bell__see-all-btn",onClick:b,children:"Voir toutes les notifications "})})]})]}):null},B3=()=>{const{currentUser:e,logout:t,loading:n}=rt(),a=it(),l=ff(),[o,u]=g.useState(!1),[d,f]=g.useState(!1),[p,h]=g.useState(!1),v=g.useRef(null),b=[{path:"/",label:"Accueil",icon:r.jsx(Nx,{size:18})},{path:"/disciplines",label:"Disciplines",icon:r.jsx(dn,{size:18})},{path:"/ebooks",label:"Bibliothque",icon:r.jsx(dn,{size:18})},{path:"/quiz-gratuits",label:"Quiz",icon:r.jsx(As,{size:18}),requireAuth:!1},{path:"/quizzes",label:"Quiz Avancs",icon:r.jsx(As,{size:18}),requireAuth:!0,requirePremium:!0},{path:e?.role==="eleve"?"/eleve/dashboard":e?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:r.jsx(v1,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:r.jsx(Bq,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:r.jsx(zs,{size:18}),requireAuth:!0,requireRole:["parent"]}];g.useEffect(()=>{const E=D=>{v.current&&!v.current.contains(D.target)&&f(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),g.useEffect(()=>{u(!1),f(!1)},[l.pathname]),g.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const x=async()=>{try{h(!0),await t(),f(!1),a("/")}catch(E){console.error("Erreur lors de la dconnexion:",E)}finally{h(!1)}},N=()=>{u(!o)},j=()=>{f(!d)},S=E=>!(E.requireAuth&&!e||E.requirePremium&&e&&!e.isPremium||E.requireRole&&e&&!E.requireRole.includes(e.role)),C=E=>E==="/"?l.pathname==="/":l.pathname.startsWith(E),A=E=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[E]||E,w=()=>e?e.displayName?e.displayName.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase():"?";return r.jsxs("header",{className:"header",children:[r.jsxs("div",{className:"header__container",children:[r.jsxs(Le,{to:"/",className:"header__logo",children:[r.jsx(As,{className:"header__logo-icon",size:32}),r.jsxs("div",{className:"header__logo-text",children:[r.jsx("span",{className:"header__logo-name",children:"PedaClic"}),r.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),r.jsx("nav",{className:"header__nav header__nav--desktop",children:r.jsx("ul",{className:"header__nav-list",children:b.map(E=>S(E)&&r.jsx("li",{className:"header__nav-item",children:r.jsxs(Le,{to:E.path,className:`header__nav-link ${C(E.path)?"header__nav-link--active":""}`,children:[E.icon,r.jsx("span",{children:E.label}),E.requirePremium&&r.jsx(_c,{size:14,className:"header__premium-badge"})]})},E.path))})}),r.jsxs("div",{className:"header__actions",children:[n?r.jsx("div",{className:"header__loading",children:r.jsx("div",{className:"header__spinner"})}):e?r.jsxs(r.Fragment,{children:[r.jsx($3,{}),r.jsxs("div",{className:"header__user",ref:v,children:[e.isPremium&&r.jsxs("span",{className:"header__premium-tag",children:[r.jsx(_c,{size:14}),"Premium"]}),r.jsxs("button",{className:"header__user-button",onClick:j,"aria-expanded":d,"aria-haspopup":"true",children:[r.jsx("div",{className:"header__avatar",children:e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):r.jsx("span",{className:"header__avatar-initials",children:w()})}),r.jsx("span",{className:"header__user-name",children:e.displayName||e.email.split("@")[0]}),r.jsx(om,{size:16,className:`header__chevron ${d?"header__chevron--open":""}`})]}),d&&r.jsxs("div",{className:"header__dropdown",children:[r.jsxs("div",{className:"header__dropdown-header",children:[r.jsx("p",{className:"header__dropdown-email",children:e.email}),r.jsx("span",{className:`header__dropdown-role header__dropdown-role--${e.role}`,children:A(e.role)})]}),r.jsx("div",{className:"header__dropdown-divider"}),r.jsxs("nav",{className:"header__dropdown-nav",children:[r.jsxs(Le,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[r.jsx(v1,{size:18}),r.jsx("span",{children:"Tableau de bord"})]}),e.role==="eleve"&&r.jsxs(Le,{to:"/eleve/suivi",className:"header__dropdown-link",children:[r.jsx(zs,{size:18}),r.jsx("span",{children:"Mes points  amliorer"})]}),e.role==="parent"&&r.jsxs(Le,{to:"/parent/dashboard",className:"header__dropdown-link",children:[r.jsx(zs,{size:18}),r.jsx("span",{children:"Espace Parent"})]}),r.jsxs(Le,{to:"/profil",className:"header__dropdown-link",children:[r.jsx(Uq,{size:18}),r.jsx("span",{children:"Mon profil"})]}),e.role==="admin"&&r.jsxs(Le,{to:"/admin",className:"header__dropdown-link",children:[r.jsx(Fq,{size:18}),r.jsx("span",{children:"Administration"})]}),!e.isPremium&&r.jsxs(Le,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[r.jsx(_c,{size:18}),r.jsx("span",{children:"Passer Premium"})]})]}),r.jsx("div",{className:"header__dropdown-divider"}),r.jsxs("button",{className:"header__dropdown-logout",onClick:x,disabled:p,children:[r.jsx(g1,{size:18}),r.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]})]}):r.jsxs("div",{className:"header__auth-buttons",children:[r.jsx(Le,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),r.jsx(Le,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),r.jsx("button",{className:"header__mobile-toggle",onClick:N,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?r.jsx(Li,{size:24}):r.jsx(Gq,{size:24})})]})]}),r.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[r.jsx("div",{className:"header__mobile-overlay",onClick:()=>u(!1)}),r.jsxs("div",{className:"header__mobile-content",children:[r.jsx("nav",{className:"header__mobile-nav",children:r.jsx("ul",{className:"header__mobile-list",children:b.map(E=>S(E)&&r.jsx("li",{className:"header__mobile-item",children:r.jsxs(Le,{to:E.path,className:`header__mobile-link ${C(E.path)?"header__mobile-link--active":""}`,children:[E.icon,r.jsx("span",{children:E.label}),E.requirePremium&&r.jsx(_c,{size:14,className:"header__premium-badge"})]})},E.path))})}),!e&&r.jsxs("div",{className:"header__mobile-auth",children:[r.jsx(Le,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),r.jsx(Le,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),e&&r.jsxs("div",{className:"header__mobile-user",children:[r.jsxs("div",{className:"header__mobile-user-info",children:[r.jsx("div",{className:"header__avatar header__avatar--large",children:e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):r.jsx("span",{className:"header__avatar-initials",children:w()})}),r.jsxs("div",{className:"header__mobile-user-details",children:[r.jsx("p",{className:"header__mobile-user-name",children:e.displayName||e.email.split("@")[0]}),r.jsx("p",{className:"header__mobile-user-email",children:e.email})]})]}),r.jsxs("button",{className:"header__mobile-logout",onClick:x,disabled:p,children:[r.jsx(g1,{size:18}),r.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},U3=()=>{const e=new Date().getFullYear(),{currentUser:t}=rt(),a=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Avancs",path:"/quizzes"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:(()=>{if(!t)return"/connexion";switch(t.role){case"eleve":return"/eleve/dashboard";case"prof":return"/prof/dashboard";case"parent":return"/parent/dashboard";case"admin":return"/admin";default:return"/connexion"}})()}],l=[{label:"Cours en ligne",path:"/cours",badge:"Nouveau",icon:r.jsx(Wq,{size:14})},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],o=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:r.jsx(Xq,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:r.jsx(Zq,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:r.jsx(Jq,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:r.jsx(e3,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:r.jsx(t3,{size:20})}];return r.jsxs("footer",{className:"footer",children:[r.jsx("div",{className:"footer__main",children:r.jsxs("div",{className:"footer__container",children:[r.jsxs("div",{className:"footer__column footer__column--about",children:[r.jsxs(Le,{to:"/",className:"footer__logo",children:[r.jsx(As,{className:"footer__logo-icon",size:36}),r.jsxs("div",{className:"footer__logo-text",children:[r.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),r.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),r.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),r.jsxs("div",{className:"footer__stats",children:[r.jsxs("div",{className:"footer__stat",children:[r.jsx(dn,{size:18}),r.jsx("span",{children:"500+ cours"})]}),r.jsxs("div",{className:"footer__stat",children:[r.jsx(Jd,{size:18}),r.jsx("span",{children:"10 000+ lves"})]})]})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),r.jsx("nav",{className:"footer__nav",children:r.jsx("ul",{className:"footer__list",children:a.map((u,d)=>r.jsx("li",{className:"footer__item",children:r.jsx(Le,{to:u.path,className:"footer__link",children:u.label})},d))})})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),r.jsx("nav",{className:"footer__nav",children:r.jsx("ul",{className:"footer__list",children:l.map((u,d)=>r.jsx("li",{className:"footer__item",children:r.jsxs(Le,{to:u.path,className:`footer__link${u.badge?" footer__link--new":""}`,children:[u.icon&&r.jsx("span",{className:"footer__link-icon",children:u.icon}),u.label,u.badge&&r.jsx("span",{className:"footer__badge",children:u.badge})]})},d))})})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),r.jsxs("div",{className:"footer__contact",children:[r.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[r.jsx(Hq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"contact@pedaclic.sn"})]}),r.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[r.jsx(Qq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"+221 77 000 00 00"})]}),r.jsxs("div",{className:"footer__contact-item",children:[r.jsx(Vq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"Dakar, Sngal"})]})]}),r.jsxs("div",{className:"footer__social",children:[r.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),r.jsx("div",{className:"footer__social-links",children:o.map((u,d)=>r.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:u.name,children:u.icon},d))})]})]})]})}),r.jsx("div",{className:"footer__bottom",children:r.jsxs("div",{className:"footer__container footer__bottom-content",children:[r.jsxs("p",{className:"footer__copyright",children:[" ",e," PedaClic. Tous droits rservs."]}),r.jsxs("p",{className:"footer__made-with",children:["Fait avec ",r.jsx(Yq,{size:14,className:"footer__heart"})," au Sngal "]}),r.jsxs("nav",{className:"footer__legal",children:[r.jsxs(Le,{to:"/mentions-legales",className:"footer__legal-link",children:[r.jsx(Kq,{size:14})," Mentions lgales"]}),r.jsxs(Le,{to:"/confidentialite",className:"footer__legal-link",children:[r.jsx(kb,{size:14})," Confidentialit"]}),r.jsxs(Le,{to:"/aide",className:"footer__legal-link",children:[r.jsx(em,{size:14})," Aide"]})]})]})})]})},dt=({children:e,hideHeader:t=!1,hideFooter:n=!1,className:a=""})=>r.jsxs("div",{className:"layout",children:[!t&&r.jsx(B3,{}),r.jsx("main",{className:`layout__main ${t?"":"layout__main--with-header"} ${a}`,children:e}),!n&&r.jsx(U3,{})]}),F3=()=>{const{currentUser:e}=rt();return r.jsxs("div",{className:"home-page",children:[r.jsxs("section",{className:"home-page__hero",children:[r.jsxs("div",{className:"home-page__hero-content",children:[r.jsxs("div",{className:"home-page__hero-badge",children:[r.jsx(cn,{size:14}),r.jsx("span",{children:"Plateforme N1 au Sngal"})]}),r.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",r.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),r.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),r.jsx("div",{className:"home-page__hero-cta",children:e?r.jsxs(Le,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",r.jsx(bs,{size:20})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Le,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",r.jsx(bs,{size:20})]}),r.jsxs(Le,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[r.jsx(Yl,{size:18}),"Dcouvrir les cours"]})]})}),r.jsxs("div",{className:"home-page__hero-stats",children:[r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"10 000+"}),r.jsx("span",{children:"lves inscrits"})]}),r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"500+"}),r.jsx("span",{children:"Cours disponibles"})]}),r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"95%"}),r.jsx("span",{children:"Taux de russite"})]})]})]}),r.jsx("div",{className:"home-page__hero-image",children:r.jsxs("div",{className:"home-page__hero-illustration",children:[r.jsx(As,{size:120}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),r.jsx("section",{className:"home-page__levels",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),r.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),r.jsxs("div",{className:"home-page__levels-grid",children:[r.jsxs(Le,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[r.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),r.jsx("h3",{children:"Collge"}),r.jsx("p",{children:"6me  3me"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx($t,{size:16})," Prparation au BFEM"]}),r.jsxs("li",{children:[r.jsx($t,{size:16})," 9 matires disponibles"]}),r.jsxs("li",{children:[r.jsx($t,{size:16})," Exercices corrigs"]})]}),r.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",r.jsx(bs,{size:16})]})]}),r.jsxs(Le,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[r.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),r.jsx("h3",{children:"Lyce"}),r.jsx("p",{children:"2nde  Terminale"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx($t,{size:16})," Prparation au BAC"]}),r.jsxs("li",{children:[r.jsx($t,{size:16})," 12 matires disponibles"]}),r.jsxs("li",{children:[r.jsx($t,{size:16})," Annales d'examens"]})]}),r.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",r.jsx(bs,{size:16})]})]})]})]})}),r.jsx("section",{className:"home-page__features",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),r.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),r.jsxs("div",{className:"home-page__features-grid",children:[r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon",children:r.jsx(dn,{size:28})}),r.jsx("h3",{children:"Cours complets"}),r.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:r.jsx(aA,{size:28})}),r.jsx("h3",{children:"Quiz interactifs"}),r.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:r.jsx(iA,{size:28})}),r.jsx("h3",{children:"Suivi de progression"}),r.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:r.jsx(kb,{size:28})}),r.jsx("h3",{children:"Contenu vrifi"}),r.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:r.jsx(to,{size:28})}),r.jsx("h3",{children:"Accessible 24/7"}),r.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:r.jsx(Hi,{size:28})}),r.jsx("h3",{children:"Certificats"}),r.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),r.jsx("section",{className:"home-page__premium",children:r.jsx("div",{className:"home-page__container",children:r.jsxs("div",{className:"home-page__premium-content",children:[r.jsxs("div",{className:"home-page__premium-text",children:[r.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),r.jsx("h2",{children:"Passez  la vitesse suprieure"}),r.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",r.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),r.jsxs("ul",{className:"home-page__premium-features",children:[r.jsxs("li",{children:[r.jsx($t,{size:18})," Quiz illimits dans toutes les matires"]}),r.jsxs("li",{children:[r.jsx($t,{size:18})," Corrections dtailles des exercices"]}),r.jsxs("li",{children:[r.jsx($t,{size:18})," Annales des examens (BFEM, BAC)"]}),r.jsxs("li",{children:[r.jsx($t,{size:18})," Support prioritaire"]})]}),r.jsxs(Le,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",r.jsx(bs,{size:20})]})]}),r.jsx("div",{className:"home-page__premium-pricing",children:r.jsxs("div",{className:"home-page__pricing-card",children:[r.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),r.jsx("h3",{children:"Abonnement Annuel"}),r.jsxs("div",{className:"home-page__pricing-price",children:[r.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),r.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),r.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),r.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),r.jsx(Le,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),r.jsx("section",{className:"home-page__testimonials",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),r.jsxs("div",{className:"home-page__testimonials-grid",children:[r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(cn,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Fatou Adara"}),r.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(cn,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Moussa Diallo"}),r.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(cn,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Aminata Ndiaye"}),r.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),r.jsx("section",{className:"home-page__final-cta",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{children:"Prt  russir ?"}),r.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!e&&r.jsxs(Le,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",r.jsx(bs,{size:24})]})]})})]})},G3=()=>{const{login:e,loginWithGoogle:t}=rt(),n=it(),l=ff().state?.from||"/",[o,u]=g.useState({email:"",password:""}),[d,f]=g.useState(!1),[p,h]=g.useState(!1),[v,b]=g.useState(""),[x,N]=g.useState(!1),j=w=>{const{name:E,value:D}=w.target;u(O=>({...O,[E]:D})),v&&b("")},S=()=>o.email.trim()?o.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)?!0:(b("Veuillez entrer une adresse email valide."),!1):(b("Veuillez entrer votre mot de passe."),!1):(b("Veuillez entrer votre adresse email."),!1),C=async w=>{if(w.preventDefault(),!!S()){f(!0),b("");try{await e(o.email,o.password),n(l,{replace:!0})}catch(E){E instanceof Error?b(E.message):b("Une erreur est survenue lors de la connexion.")}finally{f(!1)}}},A=async()=>{h(!0),b("");try{await t(),n(l,{replace:!0})}catch(w){w instanceof Error&&b(w.message)}finally{h(!1)}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-container",children:[r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs(Le,{to:"/",className:"auth-logo",children:[r.jsx("div",{className:"auth-logo__icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),r.jsx("span",{children:"PedaClic"})]}),r.jsx("h1",{className:"auth-title",children:"Connexion"}),r.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),v&&r.jsxs("div",{className:"auth-error",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 8v4M12 16h.01"})]}),r.jsx("span",{children:v})]}),r.jsxs("form",{onSubmit:C,className:"auth-form",children:[r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:j,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:d})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),r.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),r.jsx("input",{type:x?"text":"password",id:"password",name:"password",value:o.password,onChange:j,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:d}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>N(!x),"aria-label":x?"Masquer le mot de passe":"Afficher le mot de passe",children:x?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsx("div",{className:"auth-forgot",children:r.jsx(Le,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),r.jsx("button",{type:"submit",className:"auth-button",disabled:d,children:d?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"ou"})}),r.jsx("button",{type:"button",className:"auth-google-btn",onClick:A,disabled:d||p,children:p?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner auth-button-spinner--dark"}),"Connexion en cours"]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"auth-google-icon",viewBox:"0 0 24 24","aria-hidden":"true",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]})}),r.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",r.jsx(Le,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),r.jsxs("div",{className:"auth-welcome",children:[r.jsx("h2",{children:"Bienvenue sur PedaClic !"}),r.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),r.jsxs("ul",{className:"auth-features",children:[r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},H3=()=>{const{register:e,loginWithGoogle:t}=rt(),n=it(),[a,l]=g.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[o,u]=g.useState(!1),[d,f]=g.useState(""),[p,h]=g.useState(!1),[v,b]=g.useState(!1),[x,N]=g.useState(!1),[j,S]=g.useState(!1),C=D=>{const{name:O,value:T}=D.target;l(P=>({...P,[O]:T})),d&&f("")},A=()=>a.displayName.trim()?a.displayName.trim().length<2?(f("Le nom doit contenir au moins 2 caractres."),!1):a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)?a.password?a.password.length<6?(f("Le mot de passe doit contenir au moins 6 caractres."),!1):a.password!==a.confirmPassword?(f("Les mots de passe ne correspondent pas."),!1):x?!0:(f("Veuillez accepter les conditions d'utilisation."),!1):(f("Veuillez entrer un mot de passe."),!1):(f("Veuillez entrer une adresse email valide."),!1):(f("Veuillez entrer votre adresse email."),!1):(f("Veuillez entrer votre nom complet."),!1),w=async D=>{if(D.preventDefault(),!!A()){u(!0),f("");try{await e(a),n("/disciplines",{replace:!0})}catch(O){O instanceof Error?f(O.message):f("Une erreur est survenue lors de l'inscription.")}finally{u(!1)}}},E=async()=>{if(!x){f("Veuillez accepter les conditions d'utilisation.");return}S(!0),f("");try{await t(a.role),n("/disciplines",{replace:!0})}catch(D){D instanceof Error&&f(D.message)}finally{S(!1)}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-container",children:[r.jsxs("div",{className:"auth-card auth-card--register",children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs(Le,{to:"/",className:"auth-logo",children:[r.jsx("div",{className:"auth-logo__icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),r.jsx("span",{children:"PedaClic"})]}),r.jsx("h1",{className:"auth-title",children:"Crer un compte"}),r.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),d&&r.jsxs("div",{className:"auth-error",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 8v4M12 16h.01"})]}),r.jsx("span",{children:d})]}),r.jsxs("form",{onSubmit:w,className:"auth-form",children:[r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("input",{type:"text",id:"displayName",name:"displayName",value:a.displayName,onChange:C,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:o})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:C,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:o})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{className:"auth-label",children:"Je suis :"}),r.jsxs("div",{className:"auth-role-selector",children:[r.jsxs("label",{className:`auth-role-option ${a.role==="eleve"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"eleve",checked:a.role==="eleve",onChange:C,className:"auth-role-input",disabled:o}),r.jsxs("div",{className:"auth-role-content",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),r.jsx("span",{children:"lve"})]})]}),r.jsxs("label",{className:`auth-role-option ${a.role==="prof"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"prof",checked:a.role==="prof",onChange:C,className:"auth-role-input",disabled:o}),r.jsxs("div",{className:"auth-role-content",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),r.jsx("span",{children:"Professeur"})]})]}),r.jsxs("label",{className:`auth-role-option ${a.role==="parent"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"parent",checked:a.role==="parent",onChange:C,className:"auth-role-input",disabled:o}),r.jsxs("div",{className:"auth-role-content",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),r.jsx("span",{children:"Parent d'lve"})]})]})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),r.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),r.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:a.password,onChange:C,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:o}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>h(!p),"aria-label":p?"Masquer":"Afficher",children:p?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),r.jsx("input",{type:v?"text":"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:C,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:o}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>b(!v),"aria-label":v?"Masquer":"Afficher",children:v?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsx("div",{className:"auth-checkbox-field",children:r.jsxs("label",{className:"auth-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:D=>N(D.target.checked),className:"auth-checkbox",disabled:o}),r.jsx("span",{className:"auth-checkbox-custom"}),r.jsxs("span",{children:["J'accepte les"," ",r.jsx(Le,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",r.jsx(Le,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),r.jsx("button",{type:"submit",className:"auth-button",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"ou"})}),r.jsx("button",{type:"button",className:"auth-google-btn",onClick:E,disabled:o||j,children:j?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner auth-button-spinner--dark"}),"Cration du compte"]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"auth-google-icon",viewBox:"0 0 24 24","aria-hidden":"true",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"S'inscrire avec Google"]})}),r.jsx("p",{className:"auth-google-hint",children:"Le rle slectionn ci-dessus sera utilis pour votre compte Google."}),r.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",r.jsx(Le,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),r.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[r.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),r.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),r.jsxs("div",{className:"auth-stats",children:[r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"10 000+"}),r.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"500+"}),r.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"95%"}),r.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),r.jsxs("div",{className:"auth-testimonial",children:[r.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),r.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},Q3="modulepreload",V3=function(e){return"/"+e},C1={},E1=function(t,n,a){let l=Promise.resolve();if(n&&n.length>0){let f=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");l=f(n.map(p=>{if(p=V3(p),p in C1)return;C1[p]=!0;const h=p.endsWith(".css"),v=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const b=document.createElement("link");if(b.rel=h?"stylesheet":Q3,h||(b.as="script"),b.crossOrigin="",b.href=p,d&&b.setAttribute("nonce",d),document.head.appendChild(b),h)return new Promise((x,N)=>{b.addEventListener("load",x),b.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return l.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})},Y3=()=>{const e=async b=>{const{sendPasswordResetEmail:x}=await E1(async()=>{const{sendPasswordResetEmail:j}=await import("./vendor-firebase-LntcAirY.js").then(S=>S.K);return{sendPasswordResetEmail:j}},[]),{auth:N}=await E1(async()=>{const{auth:j}=await Promise.resolve().then(()=>C3);return{auth:j}},void 0);await x(N,b)},[t,n]=g.useState(""),[a,l]=g.useState(!1),[o,u]=g.useState(""),[d,f]=g.useState(!1),p=()=>t.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?!0:(u("Veuillez entrer une adresse email valide."),!1):(u("Veuillez entrer votre adresse email."),!1),h=async b=>{if(b.preventDefault(),!!p()){l(!0),u("");try{await e(t),f(!0)}catch(x){x instanceof Error?u(x.message):u("Une erreur est survenue. Veuillez ressayer.")}finally{l(!1)}}},v=()=>{f(!1),n(""),u("")};return r.jsx("div",{className:"auth-page",children:r.jsx("div",{className:"auth-container auth-container--centered",children:r.jsxs("div",{className:"auth-card auth-card--narrow",children:[r.jsx("div",{className:"auth-header",children:r.jsxs(Le,{to:"/",className:"auth-logo",children:[r.jsx("div",{className:"auth-logo__icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),r.jsx("span",{children:"PedaClic"})]})}),d?r.jsxs("div",{className:"auth-success-content",children:[r.jsx("div",{className:"auth-success-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),r.jsx("h1",{className:"auth-title",children:"Email envoy !"}),r.jsxs("p",{className:"auth-subtitle",children:["Nous avons envoy un lien de rinitialisation  ",r.jsx("strong",{children:t})]}),r.jsxs("div",{className:"auth-instructions",children:[r.jsx("p",{children:"Vrifiez votre bote de rception et cliquez sur le lien pour rinitialiser votre mot de passe."}),r.jsxs("p",{className:"auth-instructions-note",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"Si vous ne voyez pas l'email, vrifiez votre dossier spam."]})]}),r.jsxs("div",{className:"auth-success-actions",children:[r.jsx(Le,{to:"/connexion",className:"auth-button",children:"Retour  la connexion"}),r.jsx("button",{type:"button",className:"auth-button auth-button--outline",onClick:v,children:"Renvoyer l'email"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"auth-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),r.jsx("h1",{className:"auth-title",children:"Mot de passe oubli ?"}),r.jsx("p",{className:"auth-subtitle",children:"Pas de panique ! Entrez votre email et nous vous enverrons un lien pour rinitialiser votre mot de passe."}),o&&r.jsxs("div",{className:"auth-error",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 8v4M12 16h.01"})]}),r.jsx("span",{children:o})]}),r.jsxs("form",{onSubmit:h,className:"auth-form",children:[r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("input",{type:"email",id:"email",value:t,onChange:b=>{n(b.target.value),o&&u("")},placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:a,autoFocus:!0})]})]}),r.jsx("button",{type:"submit",className:"auth-button",disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner"}),"Envoi en cours..."]}):"Envoyer le lien"})]}),r.jsx("div",{className:"auth-back",children:r.jsxs(Le,{to:"/connexion",className:"auth-back-link",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour  la connexion"]})})]})]})})})},uA=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],dA=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],mA=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],fA={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function A1(e){switch(e){case"college":return uA;case"lycee":return dA;case"formation_libre":return mA;default:return[]}}function pA(e){return[...uA,...dA,...mA].find(n=>n.value===e)?.label||e}const z1=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],K3=()=>{const[e,t]=g.useState("college"),[n,a]=g.useState([]),[l,o]=g.useState(!0),u=it();g.useEffect(()=>{const p=De(Ne(W,"disciplines"),Xe("ordre")),h=hf(p,v=>{const b=v.docs.map(x=>({id:x.id,...x.data(),createdAt:x.data().createdAt?.toDate()||new Date,updatedAt:x.data().updatedAt?.toDate()||new Date}));a(b),o(!1)});return()=>h()},[]);const d=n.filter(p=>p.niveau===e),f=z1.find(p=>p.niveau===e);return r.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[r.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[r.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),r.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:z1.map(p=>{const h=e===p.niveau;return r.jsxs("button",{onClick:()=>t(p.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${h?p.color:"#e2e8f0"}`,background:h?p.bgLight:"#fff",color:h?p.color:"#718096",fontSize:"1rem",fontWeight:h?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:h?`0 2px 8px ${p.color}20`:"none"},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:p.icon}),p.label]},p.niveau)})}),l&&r.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!l&&d.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[r.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",fA[e]," pour le moment."]})]}),!l&&d.length>0&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:d.map(p=>r.jsxs("div",{onClick:()=>u(`/disciplines/${p.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${p.couleur||f.color}`},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[r.jsx("span",{style:{fontSize:"1.8rem"},children:p.icone||""}),r.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:p.nom})]}),p.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:p.description.length>100?`${p.description.slice(0,100)}...`:p.description}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:r.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:f.bgLight,color:f.color},children:pA(p.classe)})}),p.coefficient!==void 0&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",p.coefficient]})]},p.id))})]})},mc="disciplines",O1=e=>{const t=e.data();return{id:e.id,nom:t.nom,niveau:t.niveau,classe:t.classe,ordre:t.ordre,coefficient:t.coefficient,couleur:t.couleur,icone:t.icone,description:t.description,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Za={async getAll(e){try{const t=[Xe("ordre","asc")];e?.niveau&&t.unshift(we("niveau","==",e.niveau)),e?.classe&&t.unshift(we("classe","==",e.classe));const n=De(Ne(W,mc),...t);return(await ze(n)).docs.map(O1)}catch(t){throw console.error("Erreur lors de la rcupration des disciplines:",t),new Error("Impossible de rcuprer les disciplines")}},async getById(e){try{const t=je(W,mc,e),n=await Mt(t);return n.exists()?O1(n):null}catch(t){throw console.error("Erreur lors de la rcupration de la discipline:",t),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(e){return this.getAll({niveau:e})},async getByClasse(e){return this.getAll({classe:e})},async create(e){try{return(await kt(Ne(W,mc),{...e,createdAt:yt(),updatedAt:yt()})).id}catch(t){throw console.error("Erreur lors de la cration de la discipline:",t),new Error("Impossible de crer la discipline")}},async update(e,t){try{const n=je(W,mc,e);await Qe(n,{...t,updatedAt:yt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(e){try{const t=je(W,mc,e);await pn(t)}catch(t){throw console.error("Erreur lors de la suppression de la discipline:",t),new Error("Impossible de supprimer la discipline")}},async exists(e){return await this.getById(e)!==null},async countByNiveau(e){return(await this.getByNiveau(e)).length}},gs="ressources",W3="ressources",D1=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,titre:t.titre,type:t.type,contenu:t.contenu,description:t.description,isPremium:t.isPremium||!1,ordre:t.ordre||0,chapitre:t.chapitre,fichierURL:t.fichierURL,dureeEstimee:t.dureeEstimee,tags:t.tags||[],auteurId:t.auteurId,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},X3=e=>{const t=Date.now(),n=e.split(".").pop();return`${e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${t}.${n}`},Ta={async getAll(e,t){try{const n=[Xe("ordre","asc")];e?.disciplineId&&n.unshift(we("disciplineId","==",e.disciplineId)),e?.chapitreId&&n.unshift(we("chapitre","==",e.chapitreId)),e?.type&&n.unshift(we("type","==",e.type)),e?.isPremium!==void 0&&n.unshift(we("isPremium","==",e.isPremium)),e?.auteurId&&n.unshift(we("auteurId","==",e.auteurId)),t&&n.push(_r(t));const a=De(Ne(W,gs),...n);return(await ze(a)).docs.map(D1)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(e){try{const t=je(W,gs,e),n=await Mt(t);return n.exists()?D1(n):null}catch(t){throw console.error("Erreur lors de la rcupration de la ressource:",t),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(e){return this.getAll({disciplineId:e})},async getByChapitre(e){return this.getAll({chapitreId:e})},async getByType(e){return this.getAll({type:e})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(e,t){try{return(await kt(Ne(W,gs),{...e,auteurId:t,createdAt:yt(),updatedAt:yt()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(e,t){try{const n=je(W,gs,e);await Qe(n,{...t,updatedAt:yt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(e){try{const t=await this.getById(e);t?.fichierURL&&await this.deleteFile(t.fichierURL);const n=je(W,gs,e);await pn(n)}catch(t){throw console.error("Erreur lors de la suppression de la ressource:",t),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),n=Dn(W);for(const a of t){a.fichierURL&&await this.deleteFile(a.fichierURL);const l=je(W,gs,a.id);n.delete(l)}await n.commit()}catch(t){throw console.error("Erreur lors de la suppression des ressources:",t),new Error("Impossible de supprimer les ressources")}},async uploadFile(e,t){try{const n=X3(e.name),a=`${W3}/${t}/${n}`,l=Mr(Er,a);return await Es(l,e),await ca(l)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(e){try{const t=Mr(Er,e);await zc(t)}catch(t){console.warn("Fichier non trouv ou dj supprim:",t)}},async reorder(e,t){try{const n=Dn(W);t.forEach((a,l)=>{const o=je(W,gs,a);n.update(o,{ordre:l+1,updatedAt:yt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(e,t){await this.update(e,{isPremium:t})},async countByType(e){return(await this.getByType(e)).length},async getStats(){try{const e=await this.getAll(),t={total:e.length,premium:e.filter(n=>n.isPremium).length,gratuit:e.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return e.forEach(n=>{t.parType[n.type]!==void 0&&t.parType[n.type]++}),t}catch(e){throw console.error("Erreur lors du calcul des statistiques:",e),new Error("Impossible de calculer les statistiques")}}},Z3=()=>{const{id:e}=Yn(),t=it(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[f,p]=g.useState(!0),[h,v]=g.useState(null),[b,x]=g.useState("tous"),[N,j]=g.useState(new Set),S=g.useCallback(async()=>{if(e)try{p(!0),v(null);const I=await Za.getById(e);if(!I){v("Discipline introuvable."),p(!1);return}a(I);const R=await Ta.getAll({disciplineId:e}),F=new Map,B=[];for(const V of R){const M=V.chapitre||V.chapitreId;M?(F.has(M)||F.set(M,[]),F.get(M).push(V)):B.push(V)}const G=Array.from(F.entries()).map(([V,M])=>({chapitreNom:V,ressources:M.sort((q,X)=>q.ordre-X.ordre)})).sort((V,M)=>V.chapitreNom.localeCompare(M.chapitreNom,"fr"));o(G),d(B),G.length>0&&j(new Set([G[0].chapitreNom]))}catch(I){console.error("Erreur chargement discipline:",I),v("Impossible de charger les donnes. Ressayez plus tard.")}finally{p(!1)}},[e]);g.useEffect(()=>{S()},[S]);const C=I=>{j(R=>{const F=new Set(R);return F.has(I)?F.delete(I):F.add(I),F})},A=I=>b==="tous"?I:I.filter(R=>R.type===b),w=I=>{switch(I){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},E=I=>{switch(I){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return I}},D=I=>{switch(I){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},O=I=>I==="college"?"Collge":"Lyce";if(f)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[r.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),r.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),r.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(h||!n)return r.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:h||"Discipline introuvable"}),r.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),r.jsx("button",{onClick:()=>t("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const T=[...l.flatMap(I=>I.ressources),...u],P=[...new Set(T.map(I=>I.type))];return r.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[r.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[r.jsx(Le,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),r.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),r.jsx(Le,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),r.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),r.jsx("span",{style:{color:"#374151"},children:n.nom})]}),r.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&r.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",O(n.niveau),"  ",n.classe]}),r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",T.length," ressource",T.length!==1?"s":""]}),n.coefficient&&r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),P.length>1&&r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[r.jsxs("button",{onClick:()=>x("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:b==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:b==="tous"?"#2563eb":"#fff",color:b==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",T.length,")"]}),P.map(I=>{const R=T.filter(B=>B.type===I).length,F=b===I;return r.jsxs("button",{onClick:()=>x(I),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:F?`2px solid ${D(I)}`:"1px solid #d1d5db",background:F?D(I):"#fff",color:F?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[w(I)," ",E(I)," (",R,")"]},I)})]}),l.length===0&&u.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),r.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.map(I=>{const R=A(I.ressources);if(R.length===0&&b!=="tous")return null;const F=N.has(I.chapitreNom),B=b==="tous"?I.ressources:R;return r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:F?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[r.jsx("button",{onClick:()=>C(I.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:F?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.25rem",transform:F?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:I.chapitreNom}),r.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[I.ressources.length," ressource",I.ressources.length!==1?"s":""]})]})]})}),F&&r.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:B.map(G=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:V=>V.currentTarget.style.background="#eef2ff",onMouseLeave:V=>V.currentTarget.style.background="#f9fafb",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:w(G.type)}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:G.titre}),G.description&&r.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:G.description})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:D(G.type)},children:E(G.type)}),G.isPremium&&r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),G.dureeEstimee&&r.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",G.dureeEstimee," min"]})]})]},G.id))})]},I.chapitreNom)}),A(u).length>0&&r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:A(u).map(I=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:w(I.type)}),r.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:I.titre})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:D(I.type)},children:E(I.type)}),I.isPremium&&r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},I.id))})]})]}),r.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:r.jsx(Le,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},qv=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],J3=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],eR=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],tR=()=>{const{currentUser:e}=rt(),t=ff(),n=it(),[a,l]=g.useState("annuel"),[o,u]=g.useState(!1),[d,f]=g.useState(null),[p,h]=g.useState(null);t.state?.from;const v=()=>!e||!e.isPremium?!1:e.subscriptionEnd?(e.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e.subscriptionEnd))>new Date:!0,b=async()=>{if(!e){n("/connexion",{state:{from:"/premium"}});return}if(v()){f("Vous tes dj abonn Premium !");return}try{u(!0),f(null);const j=qv.find(E=>E.id===a);if(!j)throw new Error("Plan invalide");const S=await kt(Ne(W,"transactions"),{userId:e.uid,userEmail:e.email,planType:a,montant:j.prix,devise:"XOF",statut:"pending",dateTransaction:yt(),createdAt:yt()}),C={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${j.nom}`,item_price:j.prix,currency:"XOF",ref_command:S.id,success_url:`${window.location.origin}/premium/success?ref=${S.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${S.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:e.uid,planType:a,transactionId:S.id}),env:"test"},w=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:C.apiKey,API_SECRET:C.apiSecret},body:JSON.stringify({item_name:C.item_name,item_price:C.item_price,currency:C.currency,ref_command:C.ref_command,command_name:`Abonnement Premium ${j.nom} - ${e.email}`,env:C.env,ipn_url:C.ipn_url,success_url:C.success_url,cancel_url:C.cancel_url,custom_field:C.custom_field})})).json();if(w.success===1&&w.redirect_url)window.location.href=w.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const E=new Date,D=new Date(E);a==="mensuel"?D.setMonth(D.getMonth()+1):D.setFullYear(D.getFullYear()+1),await Qe(je(W,"users",e.uid),{isPremium:!0,subscriptionEnd:D,subscriptionPlan:a,updatedAt:yt()}),await Qe(je(W,"transactions",S.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:D,updatedAt:yt()}),n("/premium/success",{state:{plan:j.nom,montant:j.prix,expiration:D.toLocaleDateString("fr-FR")}})}}catch(j){console.error("Erreur paiement:",j),f("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{u(!1)}},x=j=>{h(p===j?null:j)},N=j=>j.toLocaleString("fr-FR")+" FCFA";if(v()){const j=e?.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e?.subscriptionEnd||Date.now());return r.jsx("div",{className:"premium-page",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"premium-already",children:[r.jsx("span",{className:"premium-already__icon",children:""}),r.jsx("h1",{children:"Vous tes dj Premium !"}),r.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",r.jsx("strong",{children:j.toLocaleDateString("fr-FR")})]}),r.jsxs("div",{className:"premium-already__actions",children:[r.jsx(Le,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),r.jsx(Le,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return r.jsxs("div",{className:"premium-page",children:[r.jsx("section",{className:"premium-hero",children:r.jsxs("div",{className:"container",children:[r.jsx("span",{className:"premium-hero__badge",children:" Premium"}),r.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",r.jsx("span",{children:"PedaClic"})]}),r.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),r.jsx("section",{className:"premium-pricing",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),r.jsx("div",{className:"pricing-cards",children:qv.map(j=>r.jsxs("div",{className:`pricing-card ${a===j.id?"pricing-card--selected":""} ${j.popular?"pricing-card--popular":""}`,onClick:()=>l(j.id),children:[j.popular&&r.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),r.jsxs("div",{className:"pricing-card__header",children:[r.jsx("h3",{className:"pricing-card__name",children:j.nom}),r.jsx("p",{className:"pricing-card__duration",children:j.duree})]}),r.jsxs("div",{className:"pricing-card__price",children:[j.prixOriginal&&r.jsx("span",{className:"pricing-card__original",children:N(j.prixOriginal)}),r.jsx("span",{className:"pricing-card__amount",children:N(j.prix)}),j.id==="mensuel"&&r.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),j.economie&&r.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",j.economie]}),r.jsx("div",{className:"pricing-card__radio",children:r.jsx("span",{className:`radio-dot ${a===j.id?"radio-dot--active":""}`})})]},j.id))}),r.jsxs("div",{className:"pricing-cta",children:[d&&r.jsxs("div",{className:"pricing-error",children:[r.jsx("span",{children:""})," ",d]}),e?r.jsx("button",{className:"btn btn--premium btn--lg",onClick:b,disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):r.jsxs(r.Fragment,{children:["Payer ",N(qv.find(j=>j.id===a)?.prix||0)]})}):r.jsxs("div",{className:"pricing-login",children:[r.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),r.jsx(Le,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),r.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",r.jsx(Le,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),r.jsxs("div",{className:"payment-methods",children:[r.jsx("p",{children:"Paiement scuris par"}),r.jsxs("div",{className:"payment-methods__logos",children:[r.jsx("span",{className:"payment-logo",children:" Orange Money"}),r.jsx("span",{className:"payment-logo",children:" Wave"}),r.jsx("span",{className:"payment-logo",children:" Free Money"}),r.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),r.jsx("section",{className:"premium-features",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),r.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),r.jsx("div",{className:"features-grid",children:J3.map((j,S)=>r.jsxs("div",{className:"feature-card",children:[r.jsx("span",{className:"feature-card__icon",children:j.icone}),r.jsx("h3",{className:"feature-card__title",children:j.titre}),r.jsx("p",{className:"feature-card__description",children:j.description})]},S))})]})}),r.jsx("section",{className:"premium-comparison",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),r.jsxs("div",{className:"comparison-table",children:[r.jsxs("div",{className:"comparison-header",children:[r.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),r.jsx("div",{className:"comparison-free",children:"Gratuit"}),r.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((j,S)=>r.jsxs("div",{className:"comparison-row",children:[r.jsx("div",{className:"comparison-feature",children:j.feature}),r.jsx("div",{className:"comparison-free",children:j.free?r.jsx("span",{className:"check",children:""}):r.jsx("span",{className:"cross",children:""})}),r.jsx("div",{className:"comparison-premium",children:r.jsx("span",{className:"check check--premium",children:""})})]},S))]})]})}),r.jsx("section",{className:"premium-testimonials",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),r.jsxs("div",{className:"testimonials-grid",children:[r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),r.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),r.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),r.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),r.jsx("section",{className:"premium-faq",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Questions frquentes"}),r.jsx("div",{className:"faq-list",children:eR.map((j,S)=>r.jsxs("div",{className:`faq-item ${p===S?"faq-item--open":""}`,children:[r.jsxs("button",{className:"faq-item__question",onClick:()=>x(S),"aria-expanded":p===S,children:[r.jsx("span",{children:j.question}),r.jsx("span",{className:"faq-item__icon",children:p===S?"":"+"})]}),p===S&&r.jsx("div",{className:"faq-item__answer",children:r.jsx("p",{children:j.reponse})})]},S))})]})}),r.jsx("section",{className:"premium-cta-final",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{children:"Prt  russir vos examens ?"}),r.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),r.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},rR=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"},{id:"ebooks",label:"Bibliothque Ebooks",icon:"",href:"/admin/ebooks"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],ln=({children:e,currentPage:t="dashboard"})=>{const{currentUser:n,logout:a}=rt(),[l,o]=g.useState(!0),[u,d]=g.useState(!1),f=ff(),p=async()=>{try{d(!0),await a(),window.location.href="/connexion"}catch(x){console.error("Erreur lors de la dconnexion:",x),d(!1)}},h=()=>n?.displayName?n.displayName.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"AD",v=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},b=x=>x.href==="/admin"?f.pathname==="/admin"||f.pathname==="/admin/":f.pathname.startsWith(x.href);return r.jsxs("div",{className:"admin-layout",children:[r.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[r.jsx("header",{className:"admin-sidebar__header",children:r.jsxs(Le,{to:"/",className:"admin-sidebar__logo",children:[r.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),r.jsx("span",{children:"PedaClic"})]})}),r.jsx("nav",{className:"admin-sidebar__nav",children:rR.map((x,N)=>r.jsxs("div",{className:"admin-nav__section",children:[r.jsx("h3",{className:"admin-nav__title",children:x.title}),r.jsx("ul",{className:"admin-nav__list",children:x.items.map(j=>r.jsx("li",{className:"admin-nav__item",children:r.jsxs(Le,{to:j.href,className:`admin-nav__link ${b(j)?"admin-nav__link--active":""}`,children:[r.jsx("span",{className:"admin-nav__icon",children:j.icon}),r.jsx("span",{className:"admin-nav__label",children:j.label})]})},j.id))})]},N))}),r.jsx("footer",{className:"admin-sidebar__footer",children:r.jsxs("div",{className:"admin-user",children:[r.jsx("div",{className:"admin-user__avatar",children:h()}),r.jsxs("div",{className:"admin-user__info",children:[r.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),r.jsx("div",{className:"admin-user__role",children:v()})]}),r.jsx("button",{onClick:p,disabled:u,className:"admin-logout-btn",title:"Se dconnecter",children:u?"...":""})]})})]}),r.jsxs("main",{className:"admin-content",children:[r.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!l),"aria-label":"Toggle sidebar",children:""}),e]}),r.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},ki="chapitres",Rv=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,numero:t.numero,titre:t.titre,description:t.description,objectifs:t.objectifs||[],dureeEstimee:t.dureeEstimee,isPremium:t.isPremium||!1,actif:t.actif!==!1,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Pi={async getByDiscipline(e){try{const t=De(Ne(W,ki),we("disciplineId","==",e),Xe("numero","asc"));return(await ze(t)).docs.map(Rv)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const e=De(Ne(W,ki),Xe("numero","asc"));return(await ze(e)).docs.map(Rv)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getById(e){try{const t=je(W,ki,e),n=await Mt(t);return n.exists()?Rv(n):null}catch(t){throw console.error("Erreur lors de la rcupration du chapitre:",t),new Error("Impossible de rcuprer le chapitre")}},async create(e){try{return(await kt(Ne(W,ki),{...e,actif:e.actif!==!1,createdAt:yt(),updatedAt:yt()})).id}catch(t){throw console.error("Erreur lors de la cration du chapitre:",t),new Error("Impossible de crer le chapitre")}},async update(e,t){try{const n=je(W,ki,e);await Qe(n,{...t,updatedAt:yt()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(e){try{const t=je(W,ki,e);await pn(t)}catch(t){throw console.error("Erreur lors de la suppression du chapitre:",t),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),n=Dn(W);t.forEach(a=>{const l=je(W,ki,a.id);n.delete(l)}),await n.commit()}catch(t){throw console.error("Erreur lors de la suppression des chapitres:",t),new Error("Impossible de supprimer les chapitres")}},async reorder(e,t){try{const n=Dn(W);t.forEach((a,l)=>{const o=je(W,ki,a);n.update(o,{numero:l+1,updatedAt:yt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(e,t){await this.update(e,{actif:t})},async countByDiscipline(e){return(await this.getByDiscipline(e)).length},async getNextNumero(e){return await this.countByDiscipline(e)+1}},nR=()=>{const{currentUser:e}=rt(),t=it(),[n,a]=g.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{(async()=>{try{o(!0),d(null);const[p,h,v,b,x]=await Promise.all([Za.getAll(),Pi.getAll(),Ta.getStats(),ze(Ne(W,"quizzes")),ze(Ne(W,"quizzes_v2"))]);a({totalDisciplines:p.length,totalChapitres:h.length,totalRessources:v.total,ressourcesPremium:v.premium,ressourcesGratuites:v.gratuit,totalQuiz:b.size,totalQuizAvances:x.size,ressourcesParType:v.parType})}catch(p){console.error("Erreur lors du chargement des statistiques:",p),d("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),r.jsxs("div",{className:"admin-dashboard",children:[r.jsx("header",{className:"admin-page-header",children:r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),r.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",e?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:u})})]}),l?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&t("/admin/disciplines"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),r.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&t("/admin/chapitres"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),r.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&t("/admin/ressources"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalRessources}),r.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&t("/admin/ressources"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),r.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&t("/admin/quiz"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),r.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&t("/admin/quiz-avance"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),r.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),r.jsxs("section",{className:"content-card",children:[r.jsx("div",{className:"content-card__header",children:r.jsx("h2",{children:"Rpartition des ressources par type"})}),r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"resource-type-grid",children:[r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),r.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),r.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),r.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),r.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),r.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),r.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[r.jsx("div",{className:"content-card__header",children:r.jsx("h2",{children:"Actions rapides"})}),r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"quick-actions-grid",children:[r.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les disciplines"}),r.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),r.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les chapitres"}),r.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),r.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les ressources"}),r.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),r.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les quiz"}),r.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),r.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Quiz avancs"}),r.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),r.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les utilisateurs"}),r.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),r.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},Be={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},Iv={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},aR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(Iv),[l,o]=g.useState(null),[u,d]=g.useState(!1),[f,p]=g.useState("all");g.useEffect(()=>{const A=De(Ne(W,"disciplines"),Xe("nom")),w=hf(A,E=>{const D=E.docs.map(O=>({id:O.id,...O.data(),createdAt:O.data().createdAt?.toDate()||new Date,updatedAt:O.data().updatedAt?.toDate()||new Date}));t(D)});return()=>w()},[]);const h=g.useCallback(A=>{const w=A1(A)[0]?.value||"6eme";a(E=>({...E,niveau:A,classe:w,coefficient:A==="formation_libre"?void 0:E.coefficient}))},[]),v=async A=>{if(A.preventDefault(),!!n.nom.trim()){d(!0);try{const w={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:Oe.now()};l?await Qe(je(W,"disciplines",l),w):await kt(Ne(W,"disciplines"),{...w,createdAt:Oe.now()}),a(Iv),o(null)}catch(w){console.error("Erreur lors de la sauvegarde :",w),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{d(!1)}}},b=A=>{a({nom:A.nom,niveau:A.niveau,classe:A.classe,ordre:A.ordre,coefficient:A.coefficient,couleur:A.couleur||"",icone:A.icone||"",description:A.description||""}),o(A.id)},x=async(A,w)=>{if(window.confirm(`Supprimer la discipline "${w}" ? Cette action est irrversible.`))try{await pn(je(W,"disciplines",A))}catch(E){console.error("Erreur lors de la suppression :",E)}},N=()=>{a(Iv),o(null)},j=A1(n.niveau),S=f==="all"?e:e.filter(A=>A.niveau===f),C=A=>({...Be.badge,...A==="college"?Be.badgeCollege:{},...A==="lycee"?Be.badgeLycee:{},...A==="formation_libre"?Be.badgeFormationLibre:{}});return r.jsxs("div",{style:Be.container,children:[r.jsx("h2",{style:Be.title,children:" Gestion des Disciplines"}),r.jsxs("form",{style:Be.form,onSubmit:v,children:[r.jsx("h3",{style:Be.formTitle,children:l?" Modifier la discipline":" Ajouter une discipline"}),r.jsxs("div",{style:Be.formGrid,children:[r.jsxs("div",{style:Be.fieldGroup,children:[r.jsx("label",{style:Be.label,children:"Nom de la discipline"}),r.jsx("input",{type:"text",style:Be.input,value:n.nom,onChange:A=>a({...n,nom:A.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),r.jsxs("div",{style:Be.fieldGroup,children:[r.jsx("label",{style:Be.label,children:"Niveau"}),r.jsxs("select",{style:Be.select,value:n.niveau,onChange:A=>h(A.target.value),children:[r.jsx("option",{value:"college",children:" Collge"}),r.jsx("option",{value:"lycee",children:" Lyce"}),r.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),r.jsxs("div",{style:Be.fieldGroup,children:[r.jsx("label",{style:Be.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),r.jsx("select",{style:Be.select,value:n.classe,onChange:A=>a({...n,classe:A.target.value}),children:j.map(({value:A,label:w})=>r.jsx("option",{value:A,children:w},A))})]}),r.jsxs("div",{style:Be.fieldGroup,children:[r.jsx("label",{style:Be.label,children:"Ordre d'affichage"}),r.jsx("input",{type:"number",style:Be.input,value:n.ordre,onChange:A=>a({...n,ordre:Number(A.target.value)}),placeholder:"Ex : 1",min:"0"})]}),r.jsxs("div",{style:Be.fieldGroup,children:[r.jsxs("label",{style:Be.label,children:["Coefficient",n.niveau==="formation_libre"&&r.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"number",style:Be.input,value:n.coefficient??"",onChange:A=>a({...n,coefficient:A.target.value?Number(A.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),r.jsxs("div",{style:Be.fieldGroup,children:[r.jsxs("label",{style:Be.label,children:["Couleur",r.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"color",style:{...Be.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:A=>a({...n,couleur:A.target.value})})]})]}),r.jsxs("div",{style:{...Be.fieldGroup,marginBottom:"20px"},children:[r.jsxs("label",{style:Be.label,children:["Description",r.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),r.jsx("textarea",{style:Be.textarea,value:n.description,onChange:A=>a({...n,description:A.target.value}),placeholder:"Brve description de la discipline..."})]}),r.jsxs("div",{style:{...Be.fieldGroup,marginBottom:"20px"},children:[r.jsxs("label",{style:Be.label,children:["Icne (emoji)",r.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"text",style:{...Be.input,maxWidth:"120px"},value:n.icone,onChange:A=>a({...n,icone:A.target.value}),placeholder:""})]}),r.jsxs("div",{children:[r.jsx("button",{type:"submit",style:Be.btnPrimary,disabled:u,children:u?"Enregistrement...":l?"Mettre  jour":"Ajouter la discipline"}),l&&r.jsx("button",{type:"button",style:Be.btnSecondary,onClick:N,children:"Annuler"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{style:Be.formTitle,children:[" Disciplines existantes (",S.length,")"]}),r.jsxs("div",{style:Be.tabs,children:[r.jsx("button",{style:{...Be.tab,...f==="all"?Be.tabActive:{}},onClick:()=>p("all"),children:"Toutes"}),r.jsx("button",{style:{...Be.tab,...f==="college"?Be.tabActive:{}},onClick:()=>p("college"),children:" Collge"}),r.jsx("button",{style:{...Be.tab,...f==="lycee"?Be.tabActive:{}},onClick:()=>p("lycee"),children:" Lyce"}),r.jsx("button",{style:{...Be.tab,...f==="formation_libre"?Be.tabActive:{}},onClick:()=>p("formation_libre"),children:" Formation libre"})]}),S.length===0?r.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):S.map(A=>r.jsxs("div",{style:Be.card,children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[A.icone&&r.jsx("span",{style:{fontSize:"1.2rem"},children:A.icone}),r.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:A.nom}),r.jsx("span",{style:C(A.niveau),children:fA[A.niveau]})]}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[A.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",pA(A.classe),A.coefficient!==void 0&&r.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",A.coefficient]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r.jsx("button",{style:Be.btnEdit,onClick:()=>b(A),children:"Modifier"}),r.jsx("button",{style:Be.btnDanger,onClick:()=>x(A.id,A.nom),children:"Supprimer"})]})]},A.id))]})]})},M1={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},iR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(""),[u,d]=g.useState(!0),[f,p]=g.useState(!1),[h,v]=g.useState(!1),[b,x]=g.useState(null),[N,j]=g.useState(null),[S,C]=g.useState(null),[A,w]=g.useState(!1),[E,D]=g.useState(!1),[O,T]=g.useState(null),[P,I]=g.useState(null),[R,F]=g.useState({...M1,disciplineId:""}),[B,G]=g.useState({}),[V,M]=g.useState(""),q=g.useCallback(async()=>{try{d(!0);const H=await Za.getAll();t(H),H.length>0&&!l&&o(H[0].id)}catch(H){console.error("Erreur lors du chargement des disciplines:",H),j("Impossible de charger les disciplines.")}finally{d(!1)}},[l]),X=g.useCallback(async()=>{if(!l){a([]);return}try{p(!0);const H=await Pi.getByDiscipline(l);a(H)}catch(H){console.error("Erreur lors du chargement des chapitres:",H),j("Impossible de charger les chapitres.")}finally{p(!1)}},[l]);g.useEffect(()=>{q()},[q]),g.useEffect(()=>{X()},[X]);const Q=()=>{const H={};return R.disciplineId||(H.disciplineId="Veuillez slectionner une discipline"),R.titre.trim()?R.titre.length<3&&(H.titre="Le titre doit contenir au moins 3 caractres"):H.titre="Le titre du chapitre est requis",R.numero<1&&(H.numero="Le numro doit tre suprieur  0"),G(H),Object.keys(H).length===0},$=H=>{o(H),j(null)},L=async()=>{const H=await Pi.getNextNumero(l);T(null),F({...M1,disciplineId:l,numero:H}),G({}),M(""),w(!0)},pe=H=>{T(H),F({disciplineId:H.disciplineId,numero:H.numero,titre:H.titre,description:H.description,objectifs:H.objectifs||[],dureeEstimee:H.dureeEstimee,isPremium:H.isPremium,actif:H.actif}),G({}),M(""),w(!0)},te=H=>{I(H),D(!0)},de=()=>{w(!1),D(!1),T(null),I(null),G({}),M("")},me=H=>{const{name:ce,value:Z,type:_e}=H.target,Fe=H.target.checked;F(Ve=>({...Ve,[ce]:_e==="checkbox"?Fe:_e==="number"?Number(Z):Z})),B[ce]&&G(Ve=>({...Ve,[ce]:void 0}))},xe=()=>{V.trim()&&(F(H=>({...H,objectifs:[...H.objectifs||[],V.trim()]})),M(""))},Y=H=>{F(ce=>({...ce,objectifs:(ce.objectifs||[]).filter((Z,_e)=>_e!==H)}))},he=async H=>{if(H.preventDefault(),!!Q())try{v(!0),j(null),O?(await Pi.update(O.id,R),C("Chapitre modifi avec succs !")):(await Pi.create(R),C("Chapitre cr avec succs !")),de(),await X(),setTimeout(()=>C(null),3e3)}catch(ce){console.error("Erreur lors de la sauvegarde:",ce),j("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{v(!1)}},Pe=async()=>{if(P)try{x(P.id),await Pi.delete(P.id),C("Chapitre supprim avec succs !"),de(),await X(),setTimeout(()=>C(null),3e3)}catch(H){console.error("Erreur lors de la suppression:",H),j("Erreur lors de la suppression. Veuillez ressayer.")}finally{x(null)}},se=async H=>{try{await Pi.toggleActive(H.id,!H.actif),await X(),C(H.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>C(null),2e3)}catch{j("Erreur lors de la mise  jour")}},J=H=>{const ce=e.find(Z=>Z.id===H);return ce?ce.nom:"Non trouve"};return r.jsxs("div",{className:"chapitre-manager",children:[r.jsxs("header",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsxs("button",{onClick:L,className:"btn btn--primary",disabled:!l||u,children:[r.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),N&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:N})}),r.jsx("button",{onClick:()=>j(null),className:"alert__close",children:""})]}),S&&r.jsxs("div",{className:"alert alert--success",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:S})})]}),r.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"discipline-selector",children:[r.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),u?r.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?r.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",r.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):r.jsx("div",{className:"discipline-tabs",children:e.map(H=>r.jsxs("button",{className:`discipline-tab ${l===H.id?"discipline-tab--active":""}`,onClick:()=>$(H.id),style:{"--discipline-color":H.couleur||"#2563eb"},children:[r.jsx("span",{className:"discipline-tab__icon",children:H.icone||""}),r.jsx("span",{className:"discipline-tab__name",children:H.nom}),r.jsx("span",{className:"discipline-tab__class",children:H.classe})]},H.id))})]})})}),r.jsxs("div",{className:"admin-table-container",children:[r.jsx("div",{className:"admin-table-header",children:r.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${J(l)}`,n.length>0&&` (${n.length})`]})}),f?r.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des chapitres..."})]}):l?n.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),r.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),r.jsx("button",{onClick:L,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):r.jsx("div",{className:"chapitres-list",children:n.map(H=>r.jsxs("div",{className:`chapitre-card ${H.actif?"":"chapitre-card--inactive"}`,children:[r.jsx("div",{className:"chapitre-card__number",children:H.numero}),r.jsxs("div",{className:"chapitre-card__content",children:[r.jsxs("h3",{className:"chapitre-card__title",children:[H.titre,H.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"}),!H.actif&&r.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),H.description&&r.jsx("p",{className:"chapitre-card__description",children:H.description}),r.jsxs("div",{className:"chapitre-card__meta",children:[H.dureeEstimee&&r.jsxs("span",{children:[" ",H.dureeEstimee,"h estime"]}),H.objectifs&&H.objectifs.length>0&&r.jsxs("span",{children:[" ",H.objectifs.length," objectif(s)"]})]})]}),r.jsxs("div",{className:"chapitre-card__actions",children:[r.jsx("button",{onClick:()=>se(H),className:`table-action-btn ${H.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:H.actif?"Dsactiver":"Activer",children:H.actif?"":""}),r.jsx("button",{onClick:()=>pe(H),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),r.jsx("button",{onClick:()=>te(H),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:b===H.id,children:b===H.id?"":""})]})]},H.id))}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),r.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),A&&r.jsx("div",{className:"modal-overlay",onClick:de,children:r.jsxs("div",{className:"modal modal--lg",onClick:H=>H.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:O?"Modifier le chapitre":"Nouveau chapitre"}),r.jsx("button",{onClick:de,className:"modal__close",children:""})]}),r.jsxs("form",{onSubmit:he,children:[r.jsxs("div",{className:"modal__body",children:[!O&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),r.jsxs("select",{name:"disciplineId",className:`form-select ${B.disciplineId?"form-select--error":""}`,value:R.disciplineId,onChange:me,children:[r.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(H=>r.jsxs("option",{value:H.id,children:[H.icone," ",H.nom," (",H.classe,")"]},H.id))]}),B.disciplineId&&r.jsx("span",{className:"form-error",children:B.disciplineId})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[r.jsx("label",{className:"form-label form-label--required",children:"N"}),r.jsx("input",{type:"number",name:"numero",className:`form-input ${B.numero?"form-input--error":""}`,min:"1",value:R.numero,onChange:me}),B.numero&&r.jsx("span",{className:"form-error",children:B.numero})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),r.jsx("input",{type:"text",name:"titre",className:`form-input ${B.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:R.titre,onChange:me}),B.titre&&r.jsx("span",{className:"form-error",children:B.titre})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:R.description||"",onChange:me})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),r.jsxs("div",{className:"objectifs-input",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:V,onChange:H=>M(H.target.value),onKeyPress:H=>H.key==="Enter"&&(H.preventDefault(),xe())}),r.jsx("button",{type:"button",onClick:xe,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),R.objectifs&&R.objectifs.length>0&&r.jsx("ul",{className:"objectifs-list",children:R.objectifs.map((H,ce)=>r.jsxs("li",{className:"objectif-item",children:[r.jsxs("span",{children:[" ",H]}),r.jsx("button",{type:"button",onClick:()=>Y(ce),className:"objectif-remove",children:""})]},ce))})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),r.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:R.dureeEstimee||"",onChange:me})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Options"}),r.jsxs("div",{className:"form-options",children:[r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"isPremium",checked:R.isPremium,onChange:me}),r.jsx("span",{children:"Contenu Premium "})]}),r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"actif",checked:R.actif!==!1,onChange:me}),r.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{type:"button",onClick:de,className:"btn btn--outline",disabled:h,children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn btn--primary",disabled:h,children:h?"Enregistrement...":O?"Mettre  jour":"Crer le chapitre"})]})]})]})}),E&&P&&r.jsx("div",{className:"modal-overlay",onClick:de,children:r.jsxs("div",{className:"modal",onClick:H=>H.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),r.jsx("button",{onClick:de,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[r.jsxs("p",{children:["Supprimer le chapitre ",r.jsxs("strong",{children:[P.numero,". ",P.titre]})," ?"]}),r.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{onClick:de,className:"btn btn--outline",children:"Annuler"}),r.jsx("button",{onClick:Pe,className:"btn btn--danger",disabled:b!==null,children:b?"Suppression...":"Supprimer"})]})]})}),r.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},zd=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],Od={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},Lv=50,k1={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},sR=()=>{const{currentUser:e}=rt(),[t,n]=g.useState([]),[a,l]=g.useState([]),[o,u]=g.useState([]),[d,f]=g.useState([]),[p,h]=g.useState(""),[v,b]=g.useState(""),[x,N]=g.useState(""),[j,S]=g.useState(""),[C,A]=g.useState(""),[w,E]=g.useState(!0),[D,O]=g.useState(!1),[T,P]=g.useState(!1),[I,R]=g.useState(!1),[F,B]=g.useState(null),[G,V]=g.useState(!1),[M,q]=g.useState(0),[X,Q]=g.useState(null),[$,L]=g.useState(null),[pe,te]=g.useState(!1),[de,me]=g.useState(!1),[xe,Y]=g.useState(!1),[he,Pe]=g.useState(null),[se,J]=g.useState(null),[H,ce]=g.useState(null),[Z,_e]=g.useState({...k1,disciplineId:""}),[Fe,Ve]=g.useState({}),[We,Ft]=g.useState(null),[Wr,Rr]=g.useState(null),Rn=g.useRef(null),[fe,Me]=g.useState(""),Re=g.useCallback(async()=>{try{E(!0);const re=await Za.getAll();n(re),re.length>0&&!p&&h(re[0].id)}catch(re){console.error("Erreur lors du chargement des disciplines:",re),Q("Impossible de charger les disciplines.")}finally{E(!1)}},[p]),He=g.useCallback(async()=>{if(!p){l([]);return}try{O(!0);const re=await Pi.getByDiscipline(p);l(re)}catch(re){console.error("Erreur lors du chargement des chapitres:",re)}finally{O(!1)}},[p]),ct=g.useCallback(async()=>{if(!p){u([]),f([]);return}try{P(!0);const re=await Ta.getByDiscipline(p);u(re),f(re)}catch(re){console.error("Erreur lors du chargement des ressources:",re),Q("Impossible de charger les ressources.")}finally{P(!1)}},[p]);g.useEffect(()=>{Re()},[Re]),g.useEffect(()=>{He()},[He]),g.useEffect(()=>{ct()},[ct]),g.useEffect(()=>{let re=[...o];if(v&&(re=re.filter($e=>$e.chapitre===v)),x&&(re=re.filter($e=>$e.type===x)),j==="premium"?re=re.filter($e=>$e.isPremium):j==="free"&&(re=re.filter($e=>!$e.isPremium)),C){const $e=C.toLowerCase();re=re.filter(Nt=>Nt.titre.toLowerCase().includes($e)||Nt.description?.toLowerCase().includes($e)||Nt.tags?.some(Sr=>Sr.toLowerCase().includes($e)))}f(re)},[o,v,x,j,C]);const ar=()=>{const re={};if(Z.disciplineId||(re.disciplineId="Veuillez slectionner une discipline"),Z.titre.trim()?Z.titre.length<3&&(re.titre="Le titre doit contenir au moins 3 caractres"):re.titre="Le titre est requis",Z.type||(re.type="Veuillez slectionner un type de ressource"),We){const $e="."+We.name.split(".").pop()?.toLowerCase(),Nt=Od[Z.type];Nt.includes($e)||(re.fichier=`Extension non autorise. Extensions acceptes : ${Nt.join(", ")}`),We.size/(1024*1024)>Lv&&(re.fichier=`Le fichier est trop volumineux (max ${Lv} Mo)`)}return Ve(re),Object.keys(re).length===0},hn=re=>{h(re),b(""),Q(null)},oi=()=>{Pe(null),_e({...k1,disciplineId:p}),Ve({}),Ft(null),Rr(null),Me(""),te(!0)},Ir=re=>{Pe(re),_e({disciplineId:re.disciplineId,titre:re.titre,type:re.type,description:re.description,contenu:re.contenu,chapitre:re.chapitre||"",ordre:re.ordre,isPremium:re.isPremium,actif:re.actif,tags:re.tags||[],duree:re.duree,urlExterne:re.urlExterne||""}),Ve({}),Ft(null),Rr(re.fichierURL||null),Me(""),te(!0)},le=re=>{ce(re),Y(!0)},ye=re=>{J(re),me(!0)},Se=()=>{te(!1),me(!1),Y(!1),Pe(null),J(null),ce(null),Ve({}),Ft(null),Rr(null),Me("")},Ge=re=>{const{name:$e,value:Nt,type:Sr}=re.target,yo=re.target.checked;_e(Ji=>({...Ji,[$e]:Sr==="checkbox"?yo:Sr==="number"?Number(Nt):Nt})),Fe[$e]&&Ve(Ji=>({...Ji,[$e]:void 0}))},qt=re=>{const $e=re.target.files?.[0];if($e)if(Ft($e),Ve(Nt=>({...Nt,fichier:void 0})),$e.type.startsWith("image/")||$e.type.startsWith("video/")){const Nt=new FileReader;Nt.onloadend=()=>{Rr(Nt.result)},Nt.readAsDataURL($e)}else Rr(null)},Pt=()=>{Ft(null),Rr(null),Rn.current&&(Rn.current.value="")},vn=()=>{fe.trim()&&!Z.tags?.includes(fe.trim())&&(_e(re=>({...re,tags:[...re.tags||[],fe.trim()]})),Me(""))},Xi=re=>{_e($e=>({...$e,tags:($e.tags||[]).filter((Nt,Sr)=>Sr!==re)}))},vp=async re=>{if(re.preventDefault(),!!ar())try{R(!0),Q(null);let $e=he?.fichierURL,Nt=he?.fichierNom;if(We){V(!0);const yo=he?.id||`temp_${Date.now()}`;$e=await Ta.uploadFile(We,yo),Nt=We?.name||"fichier",V(!1)}const Sr={...Z,fichierURL:$e,fichierNom:Nt};he?(await Ta.update(he.id,Sr),L("Ressource modifie avec succs !")):(await Ta.create(Sr,"admin"),L("Ressource cre avec succs !")),Se(),await ct(),setTimeout(()=>L(null),3e3)}catch($e){console.error("Erreur lors de la sauvegarde:",$e),Q("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{R(!1),V(!1),q(0)}},Zs=async()=>{if(se)try{B(se.id),se.fichierURL&&await Ta.deleteFile(se.fichierURL),await Ta.delete(se.id),L("Ressource supprime avec succs !"),Se(),await ct(),setTimeout(()=>L(null),3e3)}catch(re){console.error("Erreur lors de la suppression:",re),Q("Erreur lors de la suppression. Veuillez ressayer.")}finally{B(null)}},Js=async re=>{try{await Ta.togglePremium(re.id,!re.isPremium),await ct(),L(re.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>L(null),2e3)}catch{Q("Erreur lors de la mise  jour")}},el=re=>{const $e=t.find(Nt=>Nt.id===re);return $e?$e.nom:"Non trouve"},va=re=>{const $e=a.find(Nt=>Nt.id===re);return $e?`${$e.numero}. ${$e.titre}`:""},Zn=re=>zd.find($e=>$e.value===re)||zd[0],Zi=re=>re<1024?re+" o":re<1024*1024?(re/1024).toFixed(1)+" Ko":(re/(1024*1024)).toFixed(1)+" Mo";return r.jsxs("div",{className:"resource-manager",children:[r.jsxs("header",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsxs("button",{onClick:oi,className:"btn btn--primary",disabled:!p||w,children:[r.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),X&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:X})}),r.jsx("button",{onClick:()=>Q(null),className:"alert__close",children:""})]}),$&&r.jsxs("div",{className:"alert alert--success",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:$})})]}),r.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"discipline-selector",children:[r.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),w?r.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?r.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",r.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):r.jsx("div",{className:"discipline-tabs",children:t.map(re=>r.jsxs("button",{className:`discipline-tab ${p===re.id?"discipline-tab--active":""}`,onClick:()=>hn(re.id),style:{"--discipline-color":re.couleur||"#2563eb"},children:[r.jsx("span",{className:"discipline-tab__icon",children:re.icone||""}),r.jsx("span",{className:"discipline-tab__name",children:re.nom}),r.jsx("span",{className:"discipline-tab__class",children:re.classe})]},re.id))})]})})}),r.jsxs("div",{className:"admin-table-container",children:[r.jsxs("div",{className:"admin-table-header",children:[r.jsxs("h2",{className:"admin-table-title",children:["Ressources ",p&&`- ${el(p)}`,d.length>0&&` (${d.length})`]}),r.jsxs("div",{className:"admin-table-actions",children:[r.jsxs("div",{className:"search-input",children:[r.jsx("span",{className:"search-input__icon",children:""}),r.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:C,onChange:re=>A(re.target.value)})]}),r.jsxs("select",{className:"form-select form-select--sm",value:v,onChange:re=>b(re.target.value),disabled:D||a.length===0,children:[r.jsx("option",{value:"",children:"Tous les chapitres"}),a.map(re=>r.jsxs("option",{value:re.id,children:[re.numero,". ",re.titre]},re.id))]}),r.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:re=>N(re.target.value),children:[r.jsx("option",{value:"",children:"Tous les types"}),zd.map(re=>r.jsxs("option",{value:re.value,children:[re.icon," ",re.label]},re.value))]}),r.jsxs("select",{className:"form-select form-select--sm",value:j,onChange:re=>S(re.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"premium",children:" Premium"}),r.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),T?r.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des ressources..."})]}):p?d.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),r.jsx("p",{className:"empty-state__message",children:C||x||j||v?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!C&&!x&&!j&&!v&&r.jsx("button",{onClick:oi,className:"btn btn--primary",children:"Crer la premire ressource"})]}):r.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:d.map(re=>{const $e=Zn(re.type);return r.jsxs("div",{className:"resource-item",children:[r.jsx("div",{className:`resource-item__icon resource-item__icon--${re.type}`,style:{backgroundColor:`${$e.color}15`,color:$e.color},children:$e.icon}),r.jsxs("div",{className:"resource-item__content",children:[r.jsxs("div",{className:"resource-item__title",children:[re.titre,re.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"}),!re.actif&&r.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),r.jsxs("div",{className:"resource-item__meta",children:[r.jsx("span",{children:$e.label}),re.chapitre&&r.jsxs("span",{children:[" ",va(re.chapitre)]}),re.duree&&r.jsxs("span",{children:[" ",re.duree," min"]}),re.fichierNom&&r.jsxs("span",{children:[" ",re.fichierNom]}),re.tags&&re.tags.length>0&&r.jsxs("span",{children:[" ",re.tags.join(", ")]})]})]}),r.jsxs("div",{className:"resource-item__actions",children:[r.jsx("button",{onClick:()=>Js(re),className:`table-action-btn ${re.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:re.isPremium?"Passer en gratuit":"Passer en Premium",children:re.isPremium?"":""}),(re.fichierURL||re.urlExterne)&&r.jsx("button",{onClick:()=>le(re),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),r.jsx("button",{onClick:()=>Ir(re),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),r.jsx("button",{onClick:()=>ye(re),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:F===re.id,children:F===re.id?"":""})]})]},re.id)})}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),r.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),pe&&r.jsx("div",{className:"modal-overlay",onClick:Se,children:r.jsxs("div",{className:"modal modal--xl",onClick:re=>re.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:he?"Modifier la ressource":"Nouvelle ressource"}),r.jsx("button",{onClick:Se,className:"modal__close",children:""})]}),r.jsxs("form",{onSubmit:vp,children:[r.jsxs("div",{className:"modal__body",children:[!he&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),r.jsxs("select",{name:"disciplineId",className:`form-select ${Fe.disciplineId?"form-select--error":""}`,value:Z.disciplineId,onChange:Ge,children:[r.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(re=>r.jsxs("option",{value:re.id,children:[re.icone," ",re.nom," (",re.classe,")"]},re.id))]}),Fe.disciplineId&&r.jsx("span",{className:"form-error",children:Fe.disciplineId})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsx("label",{className:"form-label form-label--required",children:"Titre"}),r.jsx("input",{type:"text",name:"titre",className:`form-input ${Fe.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:Z.titre,onChange:Ge}),Fe.titre&&r.jsx("span",{className:"form-error",children:Fe.titre})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{className:"form-label form-label--required",children:"Type"}),r.jsx("select",{name:"type",className:`form-select ${Fe.type?"form-select--error":""}`,value:Z.type,onChange:Ge,children:zd.map(re=>r.jsxs("option",{value:re.value,children:[re.icon," ",re.label]},re.value))}),Fe.type&&r.jsx("span",{className:"form-error",children:Fe.type})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),r.jsxs("select",{name:"chapitreId",className:"form-select",value:Z.chapitre||"",onChange:Ge,disabled:D,children:[r.jsx("option",{value:"",children:"Aucun chapitre"}),a.map(re=>r.jsxs("option",{value:re.id,children:[re.numero,". ",re.titre]},re.id))]})]}),r.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[r.jsx("label",{className:"form-label",children:"Ordre"}),r.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:Z.ordre,onChange:Ge})]}),r.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[r.jsx("label",{className:"form-label",children:"Dure (min)"}),r.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:Z.duree||"",onChange:Ge})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:Z.description||"",onChange:Ge})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Fichier",r.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",Od[Z.type].join(", ")," - max ",Lv," Mo)"]})]}),r.jsxs("div",{className:"file-upload",children:[r.jsx("input",{ref:Rn,type:"file",accept:Od[Z.type].join(","),onChange:qt,className:"file-upload__input",id:"file-input"}),!We&&!Wr?r.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[r.jsx("div",{className:"file-upload__icon",children:""}),r.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),r.jsx("p",{className:"file-upload__hint",children:Od[Z.type].join(", ")})]}):r.jsxs("div",{className:"file-upload__preview",children:[We?.type.startsWith("image/")&&Wr&&r.jsx("img",{src:Wr,alt:"Aperu",className:"file-preview__image"}),We?.type.startsWith("video/")&&Wr&&r.jsx("video",{src:Wr,controls:!0,className:"file-preview__video"}),!We?.type.startsWith("image/")&&!We?.type.startsWith("video/")&&r.jsx("div",{className:"file-preview__document",children:r.jsx("span",{className:"file-preview__icon",children:Zn(Z.type).icon})}),r.jsxs("div",{className:"file-preview__info",children:[r.jsx("p",{className:"file-preview__name",children:We?.name||he?.fichierNom}),We&&r.jsx("p",{className:"file-preview__size",children:Zi(We.size)})]}),r.jsx("button",{type:"button",onClick:Pt,className:"file-preview__remove",children:""})]})]}),Fe.fichier&&r.jsx("span",{className:"form-error",children:Fe.fichier}),G&&r.jsxs("div",{className:"upload-progress",children:[r.jsx("div",{className:"upload-progress__bar",style:{width:`${M}%`}}),r.jsxs("span",{className:"upload-progress__text",children:[M,"%"]})]})]}),Z.type==="video"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),r.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:Z.urlExterne||"",onChange:Ge}),r.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),Z.type==="cours"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contenu du cours"}),r.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:Z.contenu||"",onChange:Ge}),r.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Tags"}),r.jsxs("div",{className:"tags-input",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:fe,onChange:re=>Me(re.target.value),onKeyPress:re=>re.key==="Enter"&&(re.preventDefault(),vn())}),r.jsx("button",{type:"button",onClick:vn,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),Z.tags&&Z.tags.length>0&&r.jsx("div",{className:"tags-list",children:Z.tags.map((re,$e)=>r.jsxs("span",{className:"tag",children:[re,r.jsx("button",{type:"button",onClick:()=>Xi($e),className:"tag__remove",children:""})]},$e))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Options"}),r.jsxs("div",{className:"form-options",children:[r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"isPremium",checked:Z.isPremium,onChange:Ge}),r.jsx("span",{children:"Contenu Premium "})]}),r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"actif",checked:Z.actif!==!1,onChange:Ge}),r.jsx("span",{children:"Ressource active"})]})]})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{type:"button",onClick:Se,className:"btn btn--outline",disabled:I||G,children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn btn--primary",disabled:I||G,children:I||G?G?`Upload ${M}%...`:"Enregistrement...":he?"Mettre  jour":"Crer la ressource"})]})]})]})}),xe&&H&&r.jsx("div",{className:"modal-overlay",onClick:Se,children:r.jsxs("div",{className:"modal modal--xl",onClick:re=>re.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsxs("h2",{className:"modal__title",children:[Zn(H.type).icon," ",H.titre]}),r.jsx("button",{onClick:Se,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[H.type==="video"&&H.urlExterne?r.jsx("div",{className:"preview-video",children:r.jsx("iframe",{src:H.urlExterne.replace("watch?v=","embed/"),title:H.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):H.fichierURL?r.jsx("div",{className:"preview-file",children:H.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?r.jsx("img",{src:H.fichierURL,alt:H.titre}):H.fichierURL.match(/\.(mp4|webm)$/i)?r.jsx("video",{src:H.fichierURL,controls:!0}):H.fichierURL.match(/\.pdf$/i)?r.jsx("iframe",{src:H.fichierURL,title:H.titre}):r.jsxs("div",{className:"preview-download",children:[r.jsx("span",{className:"preview-download__icon",children:Zn(H.type).icon}),r.jsx("p",{children:H.fichierNom}),r.jsx("a",{href:H.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):H.contenu?r.jsx("div",{className:"preview-content",children:r.jsx("p",{children:H.contenu})}):r.jsx("div",{className:"preview-empty",children:r.jsx("p",{children:"Aucun contenu  prvisualiser"})}),r.jsxs("div",{className:"preview-info",children:[H.description&&r.jsx("p",{className:"preview-description",children:H.description}),r.jsxs("div",{className:"preview-meta",children:[r.jsxs("span",{children:["Type : ",Zn(H.type).label]}),H.duree&&r.jsxs("span",{children:["Dure : ",H.duree," min"]}),H.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),de&&se&&r.jsx("div",{className:"modal-overlay",onClick:Se,children:r.jsxs("div",{className:"modal",onClick:re=>re.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),r.jsx("button",{onClick:Se,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[r.jsxs("p",{children:["Supprimer la ressource ",r.jsx("strong",{children:se.titre})," ?"]}),se.fichierURL&&r.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{onClick:Se,className:"btn btn--outline",children:"Annuler"}),r.jsx("button",{onClick:Zs,className:"btn btn--danger",disabled:F!==null,children:F?"Suppression...":"Supprimer"})]})]})}),r.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},hA=Ne(W,"quizzes"),vA=async e=>{try{let t=De(hA,Xe("titre","asc"));e?.disciplineId;let a=(await ze(t)).docs.map(l=>({id:l.id,...l.data()}));return e?.isPremium,e?.difficulte,a}catch(t){throw console.error("Erreur lors de la rcupration des quiz :",t),t}},lR=async e=>{try{const t=await Mt(je(W,"quizzes",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){throw console.error("Erreur lors de la rcupration du quiz :",t),t}},oR=async e=>{try{return(await kt(hA,{...e,createdAt:Oe.now(),updatedAt:Oe.now()})).id}catch(t){throw console.error("Erreur lors de la cration du quiz :",t),t}},cR=async(e,t)=>{try{await Qe(je(W,"quizzes",e),{...t,updatedAt:Oe.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},uR=async e=>{try{await pn(je(W,"quizzes",e))}catch(t){throw console.error("Erreur lors de la suppression du quiz :",t),t}},dR=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,P1=()=>({id:dR(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),T1=e=>{const t=e.questions||[],n=t.reduce((l,o)=>l+(o.points||1),0),a={facile:t.filter(l=>l.difficulte==="facile").length,moyen:t.filter(l=>l.difficulte==="moyen").length,difficile:t.filter(l=>l.difficulte==="difficile").length};return{nombreQuestions:t.length,totalPoints:n,parDifficulte:a,duree:e.duree||0}},mR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[f,p]=g.useState(null),[h,v]=g.useState(""),[b,x]=g.useState(""),[N,j]=g.useState(""),[S,C]=g.useState(""),[A,w]=g.useState(!1),[E,D]=g.useState("list"),[O,T]=g.useState(null),[P,I]=g.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[R,F]=g.useState(null),[B,G]=g.useState(!1),[V,M]=g.useState(null),[q,X]=g.useState(null),[Q,$]=g.useState({}),[L,pe]=g.useState(!1),te=g.useCallback(async()=>{o(!0),d(null);try{const[fe,Me]=await Promise.all([vA(),Za.getAll()]);t(fe),a(Me.map(Re=>({id:Re.id,nom:Re.nom||Re.name||Re.id})))}catch(fe){d("Erreur lors du chargement des donnes."),console.error(fe)}finally{o(!1)}},[]);g.useEffect(()=>{te()},[te]),g.useEffect(()=>{if(f){const fe=setTimeout(()=>p(null),4e3);return()=>clearTimeout(fe)}},[f]);const de=e.filter(fe=>{if(h){const Me=h.toLowerCase();if(!fe.titre.toLowerCase().includes(Me))return!1}return!(b&&fe.disciplineId!==b||N==="true"&&!fe.isPremium||N==="false"&&fe.isPremium||S&&!fe.questions?.some(Re=>Re.difficulte===S))}),me=()=>{T(null),I({disciplineId:"",titre:"",questions:[P1()],duree:15,isPremium:!1,noteMinimale:50}),F(null),D("form")},xe=fe=>{T(fe),I({disciplineId:fe.disciplineId,titre:fe.titre,questions:fe.questions||[],duree:fe.duree||15,isPremium:fe.isPremium||!1,noteMinimale:fe.noteMinimale||50}),F(null),D("form")},Y=async()=>{if(!P.titre.trim()){d("Le titre du quiz est obligatoire.");return}if(!P.disciplineId){d("Veuillez slectionner une discipline.");return}if(P.questions.length===0){d("Le quiz doit contenir au moins une question.");return}for(let fe=0;fe<P.questions.length;fe++){const Me=P.questions[fe];if(!Me.question.trim()){d(`La question ${fe+1} n'a pas d'nonc.`);return}if(Me.options.filter(He=>!He.trim()).length>0){d(`La question ${fe+1} a des options vides.`);return}}G(!0),d(null);try{O?(await cR(O.id,P),p("Quiz mis  jour avec succs !")):(await oR(P),p("Quiz cr avec succs !")),await te(),D("list")}catch(fe){d("Erreur lors de la sauvegarde du quiz."),console.error(fe)}finally{G(!1)}},he=async fe=>{try{await uR(fe),p("Quiz supprim avec succs."),M(null),await te()}catch(Me){d("Erreur lors de la suppression du quiz."),console.error(Me)}},Pe=()=>{const fe=P1();I(Me=>({...Me,questions:[...Me.questions,fe]})),F(fe.id)},se=fe=>{const Me=P.questions.find(ar=>ar.id===fe);if(!Me)return;const Re={...Me,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${Me.question} (copie)`},He=P.questions.findIndex(ar=>ar.id===fe),ct=[...P.questions];ct.splice(He+1,0,Re),I(ar=>({...ar,questions:ct})),F(Re.id)},J=fe=>{I(Me=>({...Me,questions:Me.questions.filter(Re=>Re.id!==fe)})),R===fe&&F(null)},H=(fe,Me,Re)=>{I(He=>({...He,questions:He.questions.map(ct=>ct.id===fe?{...ct,[Me]:Re}:ct)}))},ce=(fe,Me,Re)=>{I(He=>({...He,questions:He.questions.map(ct=>ct.id===fe?{...ct,options:ct.options.map((ar,hn)=>hn===Me?Re:ar)}:ct)}))},Z=fe=>{X(fe),$({}),pe(!1),D("preview")},_e=(fe,Me)=>{L||$(Re=>({...Re,[fe]:Me}))},Fe=()=>{pe(!0)},Ve=fe=>n.find(Me=>Me.id===fe)?.nom||fe,We=({level:fe})=>{const Me={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return r.jsx("span",{className:`quiz-badge ${Me[fe]||"quiz-badge-moyen"}`,children:fe.charAt(0).toUpperCase()+fe.slice(1)})},Ft=()=>r.jsxs(r.Fragment,{children:[u&&r.jsxs("div",{className:"admin-message admin-message-error",children:[r.jsx(cm,{size:18}),r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:r.jsx(Li,{size:16})})]}),f&&r.jsxs("div",{className:"admin-message admin-message-success",children:[r.jsx($t,{size:18}),r.jsx("span",{children:f})]})]}),Wr=()=>r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(dn,{size:24})," Gestion des Quiz"]}),r.jsxs("p",{className:"admin-subtitle",children:[e.length," quiz au total  ",de.length," affich(s)"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:me,children:[r.jsx(Sc,{size:18})," Nouveau Quiz"]})]}),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search-wrapper",children:[r.jsx(sA,{size:18,className:"admin-search-icon"}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:h,onChange:fe=>v(fe.target.value)})]}),r.jsxs("button",{className:`admin-btn admin-btn-outline ${A?"active":""}`,onClick:()=>w(!A),children:[r.jsx(Pb,{size:16})," Filtres",A?r.jsx(_x,{size:14}):r.jsx(om,{size:14})]})]}),A&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Discipline"}),r.jsxs("select",{className:"admin-select",value:b,onChange:fe=>x(fe.target.value),children:[r.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(fe=>r.jsx("option",{value:fe.id,children:fe.nom},fe.id))]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Accs"}),r.jsxs("select",{className:"admin-select",value:N,onChange:fe=>j(fe.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"false",children:"Gratuit"}),r.jsx("option",{value:"true",children:"Premium"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Difficult"}),r.jsxs("select",{className:"admin-select",value:S,onChange:fe=>C(fe.target.value),children:[r.jsx("option",{value:"",children:"Toutes"}),r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),C(""),v("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des quiz..."})]}):de.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx(em,{size:48}),r.jsx("h3",{children:"Aucun quiz trouv"}),r.jsx("p",{children:e.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),e.length===0&&r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:me,children:[r.jsx(Sc,{size:18})," Crer un quiz"]})]}):r.jsx("div",{className:"quiz-grid",children:de.map(fe=>{const Me=T1(fe);return r.jsxs("div",{className:"quiz-card",children:[r.jsxs("div",{className:"quiz-card-header",children:[r.jsxs("div",{className:"quiz-card-title-row",children:[r.jsx("h3",{className:"quiz-card-title",children:fe.titre}),fe.isPremium&&r.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[r.jsx(cn,{size:12})," Premium"]})]}),r.jsx("span",{className:"quiz-card-discipline",children:Ve(fe.disciplineId)})]}),r.jsxs("div",{className:"quiz-card-stats",children:[r.jsxs("div",{className:"quiz-stat",children:[r.jsx(em,{size:14}),r.jsxs("span",{children:[Me.nombreQuestions," question(s)"]})]}),r.jsxs("div",{className:"quiz-stat",children:[r.jsx(Hi,{size:14}),r.jsxs("span",{children:[Me.totalPoints," pts"]})]}),r.jsxs("div",{className:"quiz-stat",children:[r.jsx(to,{size:14}),r.jsxs("span",{children:[Me.duree," min"]})]})]}),r.jsxs("div",{className:"quiz-card-difficulty",children:[Me.parDifficulte.facile>0&&r.jsx(We,{level:"facile"}),Me.parDifficulte.moyen>0&&r.jsx(We,{level:"moyen"}),Me.parDifficulte.difficile>0&&r.jsx(We,{level:"difficile"})]}),r.jsxs("div",{className:"quiz-card-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>Z(fe),title:"Prvisualiser",children:[r.jsx(Zl,{size:14})," Aperu"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>xe(fe),title:"Modifier",children:[r.jsx(r3,{size:14})," Modifier"]}),V===fe.id?r.jsxs("div",{className:"quiz-delete-confirm",children:[r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>he(fe.id),children:"Confirmer"}),r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>M(null),children:"Annuler"})]}):r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>M(fe.id),title:"Supprimer",children:r.jsx(x1,{size:14})})]})]},fe.id)})})]}),Rr=()=>r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(dn,{size:24}),O?"Modifier le quiz":"Nouveau quiz"]}),r.jsxs("p",{className:"admin-subtitle",children:[P.questions.length," question(s) ajoute(s)"]})]}),r.jsxs("div",{className:"admin-header-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>D("list"),children:[r.jsx(Li,{size:18})," Annuler"]}),r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:Y,disabled:B,children:[r.jsx(n3,{size:18})," ",B?"Enregistrement...":"Enregistrer"]})]})]}),r.jsxs("div",{className:"admin-card quiz-form-section",children:[r.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),r.jsxs("div",{className:"quiz-form-grid",children:[r.jsxs("div",{className:"admin-form-group quiz-form-full",children:[r.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),r.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:P.titre,onChange:fe=>I(Me=>({...Me,titre:fe.target.value}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Discipline *"}),r.jsxs("select",{className:"admin-select",value:P.disciplineId,onChange:fe=>I(Me=>({...Me,disciplineId:fe.target.value})),children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(fe=>r.jsx("option",{value:fe.id,children:fe.nom},fe.id))]})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),r.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:P.duree,onChange:fe=>I(Me=>({...Me,duree:parseInt(fe.target.value)||15}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),r.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:P.noteMinimale,onChange:fe=>I(Me=>({...Me,noteMinimale:parseInt(fe.target.value)||50}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Accs"}),r.jsxs("div",{className:`quiz-toggle ${P.isPremium?"quiz-toggle-active":""}`,onClick:()=>I(fe=>({...fe,isPremium:!fe.isPremium})),children:[r.jsx(cn,{size:16}),r.jsx("span",{children:P.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),r.jsxs("div",{className:"admin-card quiz-form-section",children:[r.jsxs("div",{className:"quiz-questions-header",children:[r.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",P.questions.length,")"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Pe,children:[r.jsx(Sc,{size:14})," Ajouter une question"]})]}),P.questions.length===0?r.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[r.jsx(em,{size:36}),r.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):r.jsx("div",{className:"quiz-questions-list",children:P.questions.map((fe,Me)=>r.jsxs("div",{className:`quiz-question-item ${R===fe.id?"expanded":""}`,children:[r.jsxs("div",{className:"quiz-question-header",onClick:()=>F(R===fe.id?null:fe.id),children:[r.jsxs("div",{className:"quiz-question-header-left",children:[r.jsx(a3,{size:16,className:"quiz-grip-icon"}),r.jsxs("span",{className:"quiz-question-number",children:["Q",Me+1]}),r.jsx("span",{className:"quiz-question-preview",children:fe.question||"Question sans nonc..."})]}),r.jsxs("div",{className:"quiz-question-header-right",children:[r.jsx(We,{level:fe.difficulte||"moyen"}),r.jsxs("span",{className:"quiz-question-points",children:[fe.points," pt(s)"]}),R===fe.id?r.jsx(_x,{size:16}):r.jsx(om,{size:16})]})]}),R===fe.id&&r.jsxs("div",{className:"quiz-question-body",children:[r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"nonc de la question *"}),r.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:fe.question,onChange:Re=>H(fe.id,"question",Re.target.value)})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),r.jsx("div",{className:"quiz-options-grid",children:fe.options.map((Re,He)=>r.jsxs("div",{className:`quiz-option-item ${fe.reponseCorrecte===He?"quiz-option-correct":""}`,children:[r.jsx("button",{type:"button",className:`quiz-option-radio ${fe.reponseCorrecte===He?"active":""}`,onClick:()=>H(fe.id,"reponseCorrecte",He),title:fe.reponseCorrecte===He?"Bonne rponse":"Marquer comme bonne rponse",children:fe.reponseCorrecte===He?r.jsx($t,{size:16}):r.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+He)})}),r.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+He)}`,value:Re,onChange:ct=>ce(fe.id,He,ct.target.value)})]},He))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),r.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:fe.explication,onChange:Re=>H(fe.id,"explication",Re.target.value)})]}),r.jsxs("div",{className:"quiz-question-meta",children:[r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Difficult"}),r.jsxs("select",{className:"admin-select",value:fe.difficulte,onChange:Re=>H(fe.id,"difficulte",Re.target.value),children:[r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Points"}),r.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:fe.points,onChange:Re=>H(fe.id,"points",parseInt(Re.target.value)||1)})]})]}),r.jsxs("div",{className:"quiz-question-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>se(fe.id),children:[r.jsx(i3,{size:14})," Dupliquer"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>J(fe.id),children:[r.jsx(x1,{size:14})," Supprimer"]})]})]})]},fe.id))}),P.questions.length>0&&r.jsx("div",{className:"quiz-add-question-bottom",children:r.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Pe,children:[r.jsx(Sc,{size:16})," Ajouter une question"]})})]})]}),Rn=()=>{if(!q)return null;const fe=T1(q);let Me=0,Re=0;return L&&q.questions.forEach(He=>{Re+=He.points||1,Q[He.id]===He.reponseCorrecte&&(Me+=He.points||1)}),r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(Zl,{size:24})," Prvisualisation : ",q.titre]}),r.jsxs("p",{className:"admin-subtitle",children:[Ve(q.disciplineId),"  ",fe.nombreQuestions," questions  ",fe.duree," min"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{D("list"),X(null)},children:[r.jsx(Li,{size:18})," Fermer"]})]}),L&&r.jsxs("div",{className:`quiz-preview-score ${Me/Re>=(q.noteMinimale||50)/100?"success":"fail"}`,children:[r.jsx(Hi,{size:32}),r.jsxs("div",{children:[r.jsxs("h3",{children:["Score : ",Me,"/",Re," (",Math.round(Me/Re*100),"%)"]}),r.jsxs("p",{children:["Note minimale : ",q.noteMinimale||50,"% "," ",Me/Re>=(q.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),r.jsx("div",{className:"quiz-preview-questions",children:q.questions.map((He,ct)=>{const ar=Q[He.id],hn=ar===He.reponseCorrecte;return r.jsxs("div",{className:"admin-card quiz-preview-question",children:[r.jsxs("div",{className:"quiz-preview-question-header",children:[r.jsxs("span",{className:"quiz-question-number",children:["Q",ct+1]}),r.jsx(We,{level:He.difficulte||"moyen"}),r.jsxs("span",{className:"quiz-question-points",children:[He.points," pt(s)"]})]}),r.jsx("p",{className:"quiz-preview-question-text",children:He.question}),r.jsx("div",{className:"quiz-preview-options",children:He.options.map((oi,Ir)=>{let le="quiz-preview-option";return L?Ir===He.reponseCorrecte?le+=" correct":Ir===ar&&!hn&&(le+=" incorrect"):ar===Ir&&(le+=" selected"),r.jsxs("button",{className:le,onClick:()=>_e(He.id,Ir),disabled:L,children:[r.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+Ir)}),r.jsx("span",{children:oi}),L&&Ir===He.reponseCorrecte&&r.jsx($t,{size:16,className:"quiz-preview-check"})]},Ir)})}),L&&He.explication&&r.jsxs("div",{className:"quiz-preview-explication",children:[r.jsx("strong",{children:"Explication :"})," ",He.explication]})]},He.id)})}),!L&&r.jsx("div",{className:"quiz-preview-submit",children:r.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:Fe,disabled:Object.keys(Q).length<q.questions.length,children:[r.jsx($t,{size:18})," Soumettre (",Object.keys(Q).length,"/",q.questions.length,")"]})})]})};return r.jsxs("div",{className:"admin-container",children:[Ft(),E==="list"&&Wr(),E==="form"&&Rr(),E==="preview"&&Rn()]})},gA=Ne(W,"users"),fR=Ne(W,"quizResults"),pR=async e=>{try{let t=De(gA,Xe("displayName","asc"));e?.role;let a=(await ze(t)).docs.map(l=>({uid:l.id,...l.data()}));return e?.isPremium,e?.isActive,e?.search,a}catch(t){throw console.error("Erreur lors de la rcupration des utilisateurs :",t),t}},hR=async(e,t)=>{try{await Qe(je(W,"users",e),{role:t,updatedAt:Oe.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},vR=async(e,t)=>{try{const n={isPremium:t,updatedAt:Oe.now()};if(t){const a=new Date;a.setDate(a.getDate()+30),n.subscriptionEnd=Oe.fromDate(a)}else n.subscriptionEnd=null;await Qe(je(W,"users",e),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},gR=async(e,t)=>{try{await Qe(je(W,"users",e),{isActive:t,updatedAt:Oe.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},xR=async e=>{try{const t=De(fR,we("userId","==",e)),a=(await ze(t)).docs.map(f=>({id:f.id,...f.data()})),l=a.length,o=a.filter(f=>f.reussi).length,u=l>0?Math.round(a.reduce((f,p)=>f+p.score,0)/l):0,d=a.length>0?new Date(Math.max(...a.map(f=>{const p=f.datePassage;return p?.toDate?p.toDate().getTime():new Date(p).getTime()}))):null;return{totalQuizPasses:l,scoresMoyens:u,quizReussis:o,dernierQuiz:d}}catch(t){return console.error("Erreur lors du calcul des statistiques :",t),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},bR=async()=>{try{const t=(await ze(gA)).docs.map(n=>n.data());return{total:t.length,admins:t.filter(n=>n.role==="admin").length,profs:t.filter(n=>n.role==="prof").length,eleves:t.filter(n=>n.role==="eleve").length,premium:t.filter(n=>n.isPremium).length,actifs:t.filter(n=>n.isActive!==!1).length}}catch(e){throw console.error("Erreur lors du calcul des stats globales :",e),e}},yR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),[f,p]=g.useState(null),[h,v]=g.useState(""),[b,x]=g.useState(""),[N,j]=g.useState(""),[S,C]=g.useState(""),[A,w]=g.useState(!1),[E]=rA();g.useEffect(()=>{E.get("filter")==="premium"&&j("true")},[E]);const[D,O]=g.useState(null),[T,P]=g.useState(null),[I,R]=g.useState(!1),[F,B]=g.useState(null),[G,V]=g.useState(null),M=g.useCallback(async()=>{o(!0),d(null);try{const[Y,he]=await Promise.all([pR(),bR()]);t(Y),a(he)}catch(Y){d("Erreur lors du chargement des utilisateurs."),console.error(Y)}finally{o(!1)}},[]);g.useEffect(()=>{M()},[M]),g.useEffect(()=>{if(f){const Y=setTimeout(()=>p(null),4e3);return()=>clearTimeout(Y)}},[f]);const q=e.filter(Y=>{if(h){const he=h.toLowerCase();if(!Y.displayName?.toLowerCase().includes(he)&&!Y.email?.toLowerCase().includes(he))return!1}return!(b&&Y.role!==b||N==="true"&&!Y.isPremium||N==="false"&&Y.isPremium||S==="true"&&Y.isActive===!1||S==="false"&&Y.isActive!==!1)}),X=async Y=>{O(Y),R(!0);try{const he=await xR(Y.uid);P(he)}catch(he){console.error("Erreur lors du chargement des statistiques :",he),P(null)}finally{R(!1)}},Q=async()=>{if(G){B(G.userId);try{switch(G.type){case"role":await hR(G.userId,G.value),p("Rle mis  jour avec succs.");break;case"premium":await vR(G.userId,G.value),p(G.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await gR(G.userId,G.value),p(G.value?"Compte ractiv.":"Compte dsactiv.");break}await M()}catch(Y){d("Erreur lors de l'excution de l'action."),console.error(Y)}finally{B(null),V(null)}}},$=({role:Y})=>{const he={admin:{icon:r.jsx(kb,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:r.jsx(As,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:r.jsx(dn,{size:12}),className:"user-badge-eleve",label:"lve"}},Pe=he[Y]||he.eleve;return r.jsxs("span",{className:`user-badge ${Pe.className}`,children:[Pe.icon," ",Pe.label]})},L=Y=>Y?(Y?.toDate?Y.toDate():new Date(Y)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",pe=Y=>Y?Y.charAt(0).toUpperCase():"?",te=()=>r.jsxs(r.Fragment,{children:[u&&r.jsxs("div",{className:"admin-message admin-message-error",children:[r.jsx(cm,{size:18}),r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:r.jsx(Li,{size:16})})]}),f&&r.jsxs("div",{className:"admin-message admin-message-success",children:[r.jsx($t,{size:18}),r.jsx("span",{children:f})]})]}),de=()=>{if(!n)return null;const Y=[{label:"Total",value:n.total,icon:r.jsx(Jd,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:r.jsx(dn,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:r.jsx(As,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:r.jsx(cn,{size:20}),color:"stat-gold"}];return r.jsx("div",{className:"user-stats-grid",children:Y.map(he=>r.jsxs("div",{className:`user-stat-card ${he.color}`,children:[r.jsx("div",{className:"user-stat-icon",children:he.icon}),r.jsxs("div",{className:"user-stat-info",children:[r.jsx("span",{className:"user-stat-value",children:he.value}),r.jsx("span",{className:"user-stat-label",children:he.label})]})]},he.label))})},me=()=>G?r.jsx("div",{className:"admin-modal-overlay",onClick:()=>V(null),children:r.jsxs("div",{className:"admin-modal",onClick:Y=>Y.stopPropagation(),children:[r.jsxs("div",{className:"admin-modal-header",children:[r.jsx("h3",{children:"Confirmer l'action"}),r.jsx("button",{className:"admin-modal-close",onClick:()=>V(null),children:r.jsx(Li,{size:20})})]}),r.jsx("div",{className:"admin-modal-body",children:r.jsx("p",{children:G.label})}),r.jsxs("div",{className:"admin-modal-footer",children:[r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>V(null),children:"Annuler"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:Q,disabled:F===G.userId,children:F===G.userId?"En cours...":"Confirmer"})]})]})}):null,xe=()=>D?r.jsx("div",{className:"admin-modal-overlay",onClick:()=>O(null),children:r.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:Y=>Y.stopPropagation(),children:[r.jsxs("div",{className:"admin-modal-header",children:[r.jsx("h3",{children:"Dtail de l'utilisateur"}),r.jsx("button",{className:"admin-modal-close",onClick:()=>O(null),children:r.jsx(Li,{size:20})})]}),r.jsxs("div",{className:"admin-modal-body",children:[r.jsxs("div",{className:"user-detail-profile",children:[r.jsx("div",{className:"user-detail-avatar",children:pe(D.displayName)}),r.jsxs("div",{className:"user-detail-info",children:[r.jsx("h4",{children:D.displayName||"Sans nom"}),r.jsx("p",{children:D.email}),r.jsxs("div",{className:"user-detail-badges",children:[r.jsx($,{role:D.role}),D.isPremium&&r.jsxs("span",{className:"user-badge user-badge-premium",children:[r.jsx(cn,{size:12})," Premium"]}),r.jsx("span",{className:`user-badge ${D.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:D.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),r.jsxs("div",{className:"user-detail-dates",children:[r.jsxs("div",{children:[r.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),r.jsx("span",{children:L(D.createdAt)})]}),D.isPremium&&D.subscriptionEnd&&r.jsxs("div",{children:[r.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),r.jsx("span",{children:L(D.subscriptionEnd)})]})]}),r.jsxs("div",{className:"user-detail-stats-section",children:[r.jsxs("h4",{children:[r.jsx(zs,{size:18})," Statistiques"]}),I?r.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):T?r.jsxs("div",{className:"user-detail-stats-grid",children:[r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(dn,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:T.totalQuizPasses}),r.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(wc,{size:20}),r.jsxs("span",{className:"user-detail-stat-value",children:[T.scoresMoyens,"%"]}),r.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(Hi,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:T.quizReussis}),r.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(to,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:T.dernierQuiz?L(T.dernierQuiz):"Aucun"}),r.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):r.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return r.jsxs("div",{className:"admin-container",children:[te(),me(),xe(),r.jsxs("div",{className:"user-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(Jd,{size:24})," Gestion des Utilisateurs"]}),r.jsxs("p",{className:"admin-subtitle",children:[e.length," utilisateur(s) au total  ",q.length," affich(s)"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:M,children:[r.jsx(s3,{size:16})," Actualiser"]})]}),de(),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search-wrapper",children:[r.jsx(sA,{size:18,className:"admin-search-icon"}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:h,onChange:Y=>v(Y.target.value)})]}),r.jsxs("button",{className:`admin-btn admin-btn-outline ${A?"active":""}`,onClick:()=>w(!A),children:[r.jsx(Pb,{size:16})," Filtres",A?r.jsx(_x,{size:14}):r.jsx(om,{size:14})]})]}),A&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Rle"}),r.jsxs("select",{className:"admin-select",value:b,onChange:Y=>x(Y.target.value),children:[r.jsx("option",{value:"",children:"Tous les rles"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"prof",children:"Professeur"}),r.jsx("option",{value:"eleve",children:"lve"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),r.jsxs("select",{className:"admin-select",value:N,onChange:Y=>j(Y.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Premium"}),r.jsx("option",{value:"false",children:"Gratuit"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Statut"}),r.jsxs("select",{className:"admin-select",value:S,onChange:Y=>C(Y.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Actifs"}),r.jsx("option",{value:"false",children:"Dsactivs"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),C(""),v("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des utilisateurs..."})]}):q.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx(Jd,{size:48}),r.jsx("h3",{children:"Aucun utilisateur trouv"}),r.jsx("p",{children:e.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):r.jsx("div",{className:"user-table-wrapper",children:r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Utilisateur"}),r.jsx("th",{children:"Rle"}),r.jsx("th",{children:"Abonnement"}),r.jsx("th",{children:"Statut"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:q.map(Y=>r.jsxs("tr",{className:Y.isActive===!1?"user-row-inactive":"",children:[r.jsx("td",{children:r.jsxs("div",{className:"user-cell-info",children:[r.jsx("div",{className:"user-avatar-sm",children:pe(Y.displayName)}),r.jsxs("div",{children:[r.jsx("span",{className:"user-cell-name",children:Y.displayName||"Sans nom"}),r.jsx("span",{className:"user-cell-email",children:Y.email})]})]})}),r.jsx("td",{children:r.jsxs("select",{className:"admin-select admin-select-sm",value:Y.role,onChange:he=>V({type:"role",userId:Y.uid,value:he.target.value,label:`Changer le rle de "${Y.displayName||Y.email}" en "${he.target.value}" ?`}),children:[r.jsx("option",{value:"eleve",children:"lve"}),r.jsx("option",{value:"prof",children:"Professeur"}),r.jsx("option",{value:"admin",children:"Admin"})]})}),r.jsx("td",{children:r.jsx("button",{className:`user-premium-toggle ${Y.isPremium?"active":""}`,onClick:()=>V({type:"premium",userId:Y.uid,value:!Y.isPremium,label:Y.isPremium?`Dsactiver le statut Premium de "${Y.displayName||Y.email}" ?`:`Activer le statut Premium de "${Y.displayName||Y.email}" pour 30 jours ?`}),disabled:F===Y.uid,children:Y.isPremium?r.jsxs(r.Fragment,{children:[r.jsx(_c,{size:14})," Premium"]}):r.jsxs(r.Fragment,{children:[r.jsx(cn,{size:14})," Gratuit"]})})}),r.jsx("td",{children:r.jsx("button",{className:`user-status-toggle ${Y.isActive!==!1?"active":"inactive"}`,onClick:()=>V({type:"active",userId:Y.uid,value:Y.isActive===!1,label:Y.isActive===!1?`Ractiver le compte de "${Y.displayName||Y.email}" ?`:`Dsactiver le compte de "${Y.displayName||Y.email}" ?`}),disabled:F===Y.uid,children:Y.isActive!==!1?r.jsxs(r.Fragment,{children:[r.jsx(l3,{size:14})," Actif"]}):r.jsxs(r.Fragment,{children:[r.jsx(o3,{size:14})," Dsactiv"]})})}),r.jsx("td",{children:r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>X(Y),title:"Voir les statistiques",children:[r.jsx(Zl,{size:14})," Dtail"]})})]},Y.uid))})]})})]})]})},jR=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),[f,p]=g.useState(""),[h,v]=g.useState(""),[b,x]=g.useState(""),[N,j]=g.useState(!1),S=g.useCallback(async()=>{try{o(!0),d(null);const D=await ze(Ne(W,"users")),O=new Map;D.docs.forEach(de=>{const me=de.data();O.set(de.id,{name:me.displayName||"Sans nom",email:me.email||""})});const T=await ze(Ne(W,"quizzes")),P=new Map;T.docs.forEach(de=>{const me=de.data();P.set(de.id,{titre:me.titre||me.quizTitre||"Quiz sans titre",discipline:me.disciplineNom||me.matiereNom||""})});const I=await ze(Ne(W,"quizzes_v2")),R=new Map;I.docs.forEach(de=>{const me=de.data();R.set(de.id,{titre:me.titre||"Quiz avanc sans titre",discipline:me.disciplineNom||""})});const F=[];try{(await ze(De(Ne(W,"quiz_results"),Xe("datePassage","desc"),_r(200)))).docs.forEach(me=>{const xe=me.data(),Y=O.get(xe.userId)||{name:"Inconnu",email:""},he=P.get(xe.quizId)||{titre:xe.quizTitre||"Quiz",discipline:xe.disciplineNom||""},Pe=xe.pourcentage??(xe.totalPoints>0?Math.round(xe.score/xe.totalPoints*100):xe.score>0?Math.round(xe.score/20*100):0);F.push({id:me.id,quizId:xe.quizId||"",quizTitre:he.titre,userId:xe.userId||"",userName:Y.name,userEmail:Y.email,score:xe.score||0,scoreMax:xe.totalPoints||20,pourcentage:Pe,reussi:xe.reussi??Pe>=50,tempsEcoule:xe.tempsEcoule||0,datePassage:xe.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:he.discipline})})}catch(de){console.warn("Pas de rsultats v1 ou index manquant:",de)}const B=[];try{(await ze(De(Ne(W,"quiz_results_v2"),Xe("datePassage","desc"),_r(200)))).docs.forEach(me=>{const xe=me.data(),Y=O.get(xe.userId)||{name:"Inconnu",email:""},he=R.get(xe.quizId)||{titre:xe.quizTitre||"Quiz avanc",discipline:xe.disciplineNom||""},Pe=xe.scoreMax>0?Math.round(xe.score/xe.scoreMax*100):0;B.push({id:me.id,quizId:xe.quizId||"",quizTitre:he.titre,userId:xe.userId||"",userName:Y.name,userEmail:Y.email,score:xe.score||0,scoreMax:xe.scoreMax||0,pourcentage:Pe,reussi:xe.reussi??Pe>=50,tempsEcoule:xe.tempsTotal||xe.tempsEcoule||0,datePassage:xe.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:he.discipline})})}catch(de){console.warn("Pas de rsultats v2 ou index manquant:",de)}const G=[...F,...B].sort((de,me)=>me.datePassage.getTime()-de.datePassage.getTime());t(G);const V=new Date,M=new Date(V.getFullYear(),V.getMonth(),V.getDate()),q=new Date(M.getTime()-10080*60*1e3),X=G.length,Q=X>0?Math.round(G.reduce((de,me)=>de+me.pourcentage,0)/X):0,$=X>0?Math.round(G.filter(de=>de.reussi).length/X*100):0,L=X>0?Math.round(G.reduce((de,me)=>de+me.tempsEcoule,0)/X):0,pe=G.filter(de=>de.datePassage>=M).length,te=G.filter(de=>de.datePassage>=q).length;a({totalResultats:X,moyenneGenerale:Q,tauxReussite:$,tempsEcouleMoyen:L,resultatsAujourdHui:pe,resultats7Jours:te})}catch(D){console.error("Erreur chargement rsultats:",D),d("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);g.useEffect(()=>{S()},[S]);const C=e.filter(D=>{if(f&&D.type!==f||h==="true"&&!D.reussi||h==="false"&&D.reussi)return!1;if(b){const O=b.toLowerCase();if(!D.userName.toLowerCase().includes(O)&&!D.userEmail.toLowerCase().includes(O)&&!D.quizTitre.toLowerCase().includes(O)&&!D.disciplineNom.toLowerCase().includes(O))return!1}return!0}),A=D=>{if(D<60)return`${D}s`;const O=Math.floor(D/60),T=D%60;return T>0?`${O}min ${T}s`:`${O}min`},w=D=>D.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=D=>D>=80?"results-score--excellent":D>=60?"results-score--bien":D>=40?"results-score--moyen":"results-score--faible";return r.jsxs("div",{className:"results-admin",children:[r.jsxs("div",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:S,children:" Actualiser"})})]}),n&&r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalResultats}),r.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsxs("div",{className:"stat-card__value",children:[n.moyenneGenerale,"%"]}),r.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsxs("div",{className:"stat-card__value",children:[n.tauxReussite,"%"]}),r.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.resultatsAujourdHui}),r.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search",children:[r.jsx("span",{className:"admin-search-icon",children:""}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:b,onChange:D=>x(D.target.value)})]}),r.jsx("button",{className:`admin-btn admin-btn-ghost ${N?"active":""}`,onClick:()=>j(!N),children:" Filtres"})]}),N&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),r.jsxs("select",{className:"admin-select",value:f,onChange:D=>p(D.target.value),children:[r.jsx("option",{value:"",children:"Tous les types"}),r.jsx("option",{value:"classique",children:"Classique (v1)"}),r.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),r.jsxs("select",{className:"admin-select",value:h,onChange:D=>v(D.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Russis"}),r.jsx("option",{value:"false",children:"chous"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{p(""),v(""),x("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des rsultats..."})]}):u?r.jsxs("div",{className:"admin-error",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,children:"Ressayer"})]}):C.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h3",{children:"Aucun rsultat trouv"}),r.jsx("p",{children:e.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):r.jsxs("div",{className:"results-table-wrapper",children:[r.jsxs("table",{className:"results-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"lve"}),r.jsx("th",{children:"Quiz"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Score"}),r.jsx("th",{children:"Rsultat"}),r.jsx("th",{children:"Dure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:C.map(D=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"results-cell-user",children:[r.jsx("span",{className:"results-cell-name",children:D.userName}),r.jsx("span",{className:"results-cell-email",children:D.userEmail})]})}),r.jsx("td",{children:r.jsxs("div",{className:"results-cell-quiz",children:[r.jsx("span",{className:"results-cell-quiz-title",children:D.quizTitre}),D.disciplineNom&&r.jsx("span",{className:"results-cell-discipline",children:D.disciplineNom})]})}),r.jsx("td",{children:r.jsx("span",{className:`results-badge results-badge--${D.type}`,children:D.type==="classique"?" Classique":" Avanc"})}),r.jsxs("td",{children:[r.jsxs("span",{className:`results-score ${E(D.pourcentage)}`,children:[D.pourcentage,"%"]}),r.jsxs("span",{className:"results-score-detail",children:[D.score,"/",D.scoreMax]})]}),r.jsx("td",{children:r.jsx("span",{className:`results-status ${D.reussi?"results-status--success":"results-status--fail"}`,children:D.reussi?" Russi":" chou"})}),r.jsx("td",{className:"results-cell-duration",children:A(D.tempsEcoule)}),r.jsx("td",{className:"results-cell-date",children:w(D.datePassage)})]},`${D.type}-${D.id}`))})]}),r.jsx("div",{className:"results-footer",children:r.jsxs("p",{children:[C.length," rsultat",C.length>1?"s":""," affich",C.length>1?"s":"",C.length!==e.length&&` sur ${e.length} au total`]})})]})]})},Ll={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},NR=()=>{const[e,t]=g.useState(Ll),[n,a]=g.useState(Ll),[l,o]=g.useState(!0),[u,d]=g.useState(!1),[f,p]=g.useState(null),[h,v]=g.useState(null),[b,x]=g.useState(!1),N=g.useCallback(async()=>{try{o(!0),p(null);const w=je(W,"settings","platform"),E=await Mt(w);if(E.exists()){const D=E.data(),O={...Ll,...D};t(O),a(O)}else t(Ll),a(Ll)}catch(w){console.error("Erreur chargement paramtres:",w),p("Impossible de charger les paramtres.")}finally{o(!1)}},[]);g.useEffect(()=>{N()},[N]),g.useEffect(()=>{if(h){const w=setTimeout(()=>v(null),4e3);return()=>clearTimeout(w)}},[h]),g.useEffect(()=>{const w=JSON.stringify(e)!==JSON.stringify(n);x(w)},[e,n]);const j=(w,E)=>{t(D=>({...D,[w]:E}))},S=async()=>{try{if(d(!0),p(null),e.premiumMensuel<0||e.premiumAnnuel<0){p("Les tarifs ne peuvent pas tre ngatifs.");return}if(e.quizNoteMinimale<0||e.quizNoteMinimale>20){p("La note minimale doit tre entre 0 et 20.");return}const w=je(W,"settings","platform");await pf(w,{...e,updatedAt:yt()}),a(e),x(!1),v("Paramtres sauvegards avec succs !")}catch(w){console.error("Erreur sauvegarde paramtres:",w),p("Impossible de sauvegarder les paramtres.")}finally{d(!1)}},C=()=>{t(n),x(!1)},A=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&t(Ll)};return l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des paramtres..."})]}):r.jsxs("div",{className:"settings-admin",children:[r.jsxs("div",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),r.jsxs("div",{className:"admin-page-header__actions",children:[b&&r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:C,children:"Annuler"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!b||u,children:u?" Sauvegarde...":" Sauvegarder"})]})]}),b&&r.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),f&&r.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",f]}),h&&r.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",h]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),r.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Nom du site"}),r.jsx("input",{type:"text",className:"admin-input",value:e.siteName,onChange:w=>j("siteName",w.target.value)})]}),r.jsxs("div",{className:"settings-field settings-field--full",children:[r.jsx("label",{className:"settings-label",children:"Description"}),r.jsx("input",{type:"text",className:"admin-input",value:e.siteDescription,onChange:w=>j("siteDescription",w.target.value)})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Email de contact"}),r.jsx("input",{type:"email",className:"admin-input",value:e.contactEmail,onChange:w=>j("contactEmail",w.target.value)})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Tlphone"}),r.jsx("input",{type:"tel",className:"admin-input",value:e.contactPhone,onChange:w=>j("contactPhone",w.target.value)})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),r.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.premiumMensuel,onChange:w=>j("premiumMensuel",parseInt(w.target.value)||0),min:0,step:500}),r.jsxs("span",{className:"settings-hint",children:["Actuellement : ",e.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.premiumAnnuel,onChange:w=>j("premiumAnnuel",parseInt(w.target.value)||0),min:0,step:1e3}),r.jsxs("span",{className:"settings-hint",children:["conomie : ",(e.premiumMensuel*12-e.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),r.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizDureeDefaut,onChange:w=>j("quizDureeDefaut",parseInt(w.target.value)||0),min:1,max:120})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizNoteMinimale,onChange:w=>j("quizNoteMinimale",parseInt(w.target.value)||0),min:0,max:20})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizTentativesMax,onChange:w=>j("quizTentativesMax",parseInt(w.target.value)||0),min:1,max:10}),r.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),r.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Mode maintenance"}),r.jsxs("div",{className:"settings-toggle-wrapper",children:[r.jsx("button",{className:`settings-toggle ${e.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>j("maintenanceMode",!e.maintenanceMode),children:r.jsx("span",{className:"settings-toggle__knob"})}),r.jsx("span",{className:`settings-toggle-label ${e.maintenanceMode?"settings-toggle-label--active":""}`,children:e.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),r.jsxs("div",{className:"settings-field settings-field--full",children:[r.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),r.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:e.maintenanceMessage,onChange:w=>j("maintenanceMessage",w.target.value),disabled:!e.maintenanceMode})]})]})]}),r.jsxs("div",{className:"settings-actions",children:[r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:A,children:" Rinitialiser aux valeurs par dfaut"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!b||u,children:u?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},_R=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],SR=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],wR=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Fa=({value:e,onChange:t,placeholder:n="Saisissez votre texte...",minHeight:a=100,maxHeight:l=400,toolbar:o=_R,disabled:u=!1,className:d=""})=>{const f=g.useRef(null),p=g.useRef(!1),[h,v]=g.useState(!1),[b,x]=g.useState(!1);g.useEffect(()=>{f.current&&!p.current&&f.current.innerHTML!==e&&(f.current.innerHTML=e||""),p.current=!1},[e]);const N=g.useCallback(()=>{f.current&&(p.current=!0,t(f.current.innerHTML))},[t]),j=g.useCallback((w,E)=>{f.current?.focus(),document.execCommand(w,!1,E),N()},[N]),S=g.useCallback(()=>{const w=prompt("URL du lien :","https://");w&&j("createLink",w)},[j]),C=g.useCallback(()=>{j("removeFormat"),j("formatBlock","p")},[j]);g.useEffect(()=>{const w=()=>{v(!1),x(!1)};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[]);const A=w=>{switch(w){case"bold":return r.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:E=>{E.preventDefault(),j("bold")},children:r.jsx("strong",{children:"G"})},"bold");case"italic":return r.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:E=>{E.preventDefault(),j("italic")},children:r.jsx("em",{children:"I"})},"italic");case"underline":return r.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:E=>{E.preventDefault(),j("underline")},children:r.jsx("u",{children:"S"})},"underline");case"strikethrough":return r.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:E=>{E.preventDefault(),j("strikeThrough")},children:r.jsx("s",{children:"B"})},"strike");case"heading":return r.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:E=>{E.preventDefault(),j("formatBlock","h3")},children:"H"},"heading");case"color":return r.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[r.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{v(!h),x(!1)},children:r.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),h&&r.jsx("div",{className:"rte-color-picker",children:SR.map(E=>r.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E,border:E==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:D=>{D.preventDefault(),j("foreColor",E),v(!1)}},E))})]},"color");case"highlight":return r.jsxs("span",{className:"rte-dropdown-wrapper",onClick:E=>E.stopPropagation(),children:[r.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{x(!b),v(!1)},children:r.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),b&&r.jsx("div",{className:"rte-color-picker",children:wR.map(E=>r.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:E==="transparent"?"#fff":E,border:"1px solid #ccc"},onMouseDown:D=>{D.preventDefault(),j("hiliteColor",E),x(!1)},children:E==="transparent"?"":""},E))})]},"highlight");case"alignLeft":return r.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:E=>{E.preventDefault(),j("justifyLeft")},children:""},"alignL");case"alignCenter":return r.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:E=>{E.preventDefault(),j("justifyCenter")},children:""},"alignC");case"alignRight":return r.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:E=>{E.preventDefault(),j("justifyRight")},children:""},"alignR");case"bulletList":return r.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:E=>{E.preventDefault(),j("insertUnorderedList")},children:""},"ul");case"numberedList":return r.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:E=>{E.preventDefault(),j("insertOrderedList")},children:"1"},"ol");case"subscript":return r.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:E=>{E.preventDefault(),j("subscript")},children:["X",r.jsx("sub",{children:""})]},"sub");case"superscript":return r.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:E=>{E.preventDefault(),j("superscript")},children:["X",r.jsx("sup",{children:""})]},"sup");case"link":return r.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:E=>{E.preventDefault(),S()},children:""},"link");case"clean":return r.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:E=>{E.preventDefault(),C()},children:""},"clean");default:return null}};return r.jsxs("div",{className:`rte-container ${u?"rte-disabled":""} ${d}`,children:[!u&&r.jsx("div",{className:"rte-toolbar",children:o.map(w=>A(w))}),r.jsx("div",{ref:f,className:"rte-editor",contentEditable:!u,onInput:N,onBlur:N,"data-placeholder":n,style:{minHeight:`${a}px`,maxHeight:`${l}px`},suppressContentEditableWarning:!0})]})},ro={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},dm={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},mm={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Xt(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function CR(e,t){const n={id:Xt("q"),type:e,enonce:"",difficulte:"moyen",points:2,ordre:t};switch(e){case"qcm_unique":return{...n,typeData:{options:[{id:Xt("opt"),texte:"",isCorrect:!0},{id:Xt("opt"),texte:"",isCorrect:!1},{id:Xt("opt"),texte:"",isCorrect:!1},{id:Xt("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:Xt("opt"),texte:"",isCorrect:!0},{id:Xt("opt"),texte:"",isCorrect:!0},{id:Xt("opt"),texte:"",isCorrect:!1},{id:Xt("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:Xt("item"),texte:"",ordreCorrect:1},{id:Xt("item"),texte:"",ordreCorrect:2},{id:Xt("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:Xt("pair"),gauche:"",droite:""},{id:Xt("pair"),gauche:"",droite:""},{id:Xt("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const Xc="quizzes_v2",ER="quiz_results_v2";async function AR(e,t){try{const n=await kt(Ne(W,Xc),{...e,auteurId:t,createdAt:yt(),updatedAt:yt()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function zR(e,t){try{const n=je(W,Xc,e);await Qe(n,{...t,updatedAt:yt()}),console.log(" Quiz avanc mis  jour :",e)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function OR(e){try{await pn(je(W,Xc,e)),console.log(" Quiz avanc supprim :",e)}catch(t){throw console.error(" Erreur suppression quiz :",t),new Error("Impossible de supprimer le quiz")}}async function xA(e){try{const t=await Mt(je(W,Xc,e));if(!t.exists())return null;const n=t.data();return{id:t.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(t){throw console.error(" Erreur rcupration quiz :",t),new Error("Impossible de rcuprer le quiz")}}async function bA(){try{const e=De(Ne(W,Xc),Xe("createdAt","desc"));return(await ze(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||void 0}})}catch(e){throw console.error(" Erreur rcupration tous les quiz :",e),new Error("Impossible de rcuprer les quiz")}}function DR(e,t){let n=0,a=0;const l=[];for(const o of e.questions){a+=o.points;const u=t.find(v=>v.questionId===o.id);if(!u){l.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let d=0,f=!1,p=!1,h=!1;switch(o.type){case"qcm_unique":{const b=o.typeData.options.find(x=>x.isCorrect);b&&u.selectedOptionId===b.id&&(d=o.points,f=!0);break}case"qcm_multiple":{const v=o.typeData,b=v.options.filter(C=>C.isCorrect).map(C=>C.id),x=v.options.filter(C=>!C.isCorrect).map(C=>C.id),N=u.selectedOptionIds||[],j=N.some(C=>x.includes(C)),S=N.filter(C=>b.includes(C)).length;!j&&S===b.length?(d=o.points,f=!0):v.scoringPartiel&&S>0&&!j&&(d=Math.round(o.points*S/b.length*100)/100,p=!0);break}case"drag_drop":{const v=o.typeData,b=u.ordrePropose||[],x=v.items.sort((j,S)=>j.ordreCorrect-S.ordreCorrect).map(j=>j.id);let N=0;for(let j=0;j<x.length;j++)b[j]===x[j]&&N++;N===x.length?(d=o.points,f=!0):N>0&&(d=Math.round(o.points*N/x.length*100)/100,p=!0);break}case"mise_en_relation":{const v=o.typeData,b=u.relationsProposees||{};let x=0;for(const N of v.paires)b[N.id]===N.id&&x++;x===v.paires.length?(d=o.points,f=!0):x>0&&(d=Math.round(o.points*x/v.paires.length*100)/100,p=!0);break}case"essai":{const v=o.typeData,b=u.texteReponse||"";if(v.correctionMode==="mots_cles"&&v.motsCles.length>0){const x=b.toLowerCase().replace(/<[^>]*>/g,"");let N=0,j=0;for(const S of v.motsCles)N+=S.poids,x.includes(S.mot.toLowerCase())&&(j+=S.poids);N>0&&(d=Math.round(o.points*j/N*100)/100,f=j===N,p=j>0&&j<N)}else h=!0;break}}n+=d,l.push({questionId:o.id,type:o.type,pointsObtenus:d,pointsMax:o.points,isCorrect:f,isPartiel:p,correctionManuelleRequise:h})}return{score:n,scoreMax:a,details:l}}async function MR(e,t,n,a){try{const{score:l,scoreMax:o,details:u}=DR(e,n),d=o>0?Math.round(l/o*20*100)/100:0,f=u.some(v=>v.correctionManuelleRequise),p={quizId:e.id,userId:t,reponses:n,score:l,scoreMax:o,note20:d,tempsEcoule:a,datePassage:new Date,reussi:d>=e.noteMinimale,correctionManuelle:f,detailsParQuestion:u},h=await kt(Ne(W,ER),{...p,datePassage:yt()});return console.log(" Rsultat quiz enregistr :",h.id),{id:h.id,...p}}catch(l){throw console.error(" Erreur soumission quiz :",l),new Error("Impossible d'enregistrer le rsultat")}}const kR=({existingQuiz:e,disciplines:t,auteurId:n,onSave:a,onCancel:l})=>{const[o,u]=g.useState(e?.titre||""),[d,f]=g.useState(e?.description||""),[p,h]=g.useState(e?.disciplineId||""),[v,b]=g.useState(e?.duree||30),[x,N]=g.useState(e?.isPremium??!0),[j,S]=g.useState(e?.noteMinimale||10),[C,A]=g.useState(e?.melangerQuestions??!1),[w,E]=g.useState(e?.melangerOptions??!1),[D,O]=g.useState(e?.afficherCorrection??!0),[T,P]=g.useState(e?.tentativesMax||0),[I,R]=g.useState(e?.questions||[]),[F,B]=g.useState(null),[G,V]=g.useState(!1),[M,q]=g.useState(null),[X,Q]=g.useState(!1),$=g.useCallback(Y=>{const he=CR(Y,I.length+1);R(Pe=>[...Pe,he]),B(I.length),Q(!1)},[I.length]),L=g.useCallback(Y=>{confirm("Supprimer cette question ?")&&(R(he=>he.filter((se,J)=>J!==Y).map((se,J)=>({...se,ordre:J+1}))),B(null))},[]),pe=g.useCallback(Y=>{R(he=>{const Pe=he[Y],se={...JSON.parse(JSON.stringify(Pe)),id:Xt("q"),ordre:he.length+1};return[...he,se]})},[]),te=g.useCallback((Y,he)=>{R(Pe=>{const se=[...Pe],J=he==="up"?Y-1:Y+1;return J<0||J>=se.length?Pe:([se[Y],se[J]]=[se[J],se[Y]],se.map((H,ce)=>({...H,ordre:ce+1})))}),B(he==="up"?F!==null?F-1:null:F!==null?F+1:null)},[F]),de=g.useCallback((Y,he)=>{R(Pe=>Pe.map((se,J)=>J===Y?{...se,...he}:se))},[]),me=async()=>{if(!o.trim()){q("Le titre est obligatoire");return}if(!p){q("Slectionnez une discipline");return}if(I.length===0){q("Ajoutez au moins une question");return}for(let Y=0;Y<I.length;Y++)if(!I[Y].enonce.replace(/<[^>]*>/g,"").trim()){q(`La question ${Y+1} n'a pas d'nonc`),B(Y);return}q(null),V(!0);try{const Y={disciplineId:p,titre:o.trim(),description:d.trim()||void 0,questions:I,duree:v,isPremium:x,noteMinimale:j,melangerQuestions:C,melangerOptions:w,afficherCorrection:D,tentativesMax:T};let he;e?.id?(await zR(e.id,Y),he=e.id):he=await AR(Y,n),a?.(he)}catch(Y){q(Y.message||"Erreur lors de la sauvegarde")}finally{V(!1)}},xe=I.reduce((Y,he)=>Y+he.points,0);return r.jsxs("div",{className:"quiz-editor",children:[r.jsxs("div",{className:"quiz-editor__header",children:[r.jsx("h2",{children:e?" Modifier le quiz":" Nouveau quiz avanc"}),r.jsxs("div",{className:"quiz-editor__header-actions",children:[r.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",xe," pts"]}),r.jsxs("span",{className:"quiz-editor__count-badge",children:[I.length," question",I.length>1?"s":""]})]})]}),M&&r.jsxs("div",{className:"quiz-editor__error",children:[" ",M,r.jsx("button",{onClick:()=>q(null),children:""})]}),r.jsxs("div",{className:"quiz-editor__section",children:[r.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),r.jsxs("div",{className:"quiz-editor__grid",children:[r.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[r.jsx("label",{children:"Titre du quiz *"}),r.jsx("input",{type:"text",value:o,onChange:Y=>u(Y.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Discipline *"}),r.jsxs("select",{value:p,onChange:Y=>h(Y.target.value),className:"quiz-editor__select",children:[r.jsx("option",{value:"",children:" Slectionner "}),t.map(Y=>r.jsxs("option",{value:Y.id,children:[Y.nom," (",Y.classe,")"]},Y.id))]})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Dure (minutes)"}),r.jsx("input",{type:"number",value:v,onChange:Y=>b(Number(Y.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Note minimale (/20)"}),r.jsx("input",{type:"number",value:j,onChange:Y=>S(Number(Y.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Tentatives max (0 = illimit)"}),r.jsx("input",{type:"number",value:T,onChange:Y=>P(Number(Y.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[r.jsx("label",{children:"Description (optionnel)"}),r.jsx(Fa,{value:d,onChange:f,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),r.jsxs("div",{className:"quiz-editor__options-row",children:[r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:Y=>N(Y.target.checked)}),r.jsx("span",{children:" Premium"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:C,onChange:Y=>A(Y.target.checked)}),r.jsx("span",{children:" Mlanger les questions"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:Y=>E(Y.target.checked)}),r.jsx("span",{children:" Mlanger les options QCM"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:D,onChange:Y=>O(Y.target.checked)}),r.jsx("span",{children:" Afficher la correction"})]})]})]}),r.jsxs("div",{className:"quiz-editor__section",children:[r.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),r.jsx("div",{className:"quiz-editor__questions-list",children:I.map((Y,he)=>r.jsx(PR,{question:Y,index:he,isActive:F===he,onToggle:()=>B(F===he?null:he),onUpdate:Pe=>de(he,Pe),onDelete:()=>L(he),onDuplicate:()=>pe(he),onMoveUp:()=>te(he,"up"),onMoveDown:()=>te(he,"down"),isFirst:he===0,isLast:he===I.length-1},Y.id))}),r.jsxs("div",{className:"quiz-editor__add-wrapper",children:[r.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>Q(!X),children:"+ Ajouter une question"}),X&&r.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(ro).map(Y=>r.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>$(Y),children:[r.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:mm[Y]},children:dm[Y]}),r.jsx("span",{children:ro[Y]})]},Y))})]})]}),r.jsxs("div",{className:"quiz-editor__actions",children:[r.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:l,disabled:G,children:"Annuler"}),r.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:me,disabled:G||I.length===0,children:G?" Sauvegarde...":e?" Mettre  jour":" Crer le quiz"})]})]})},PR=({question:e,index:t,isActive:n,onToggle:a,onUpdate:l,onDelete:o,onDuplicate:u,onMoveUp:d,onMoveDown:f,isFirst:p,isLast:h})=>{const v=mm[e.type],b=dm[e.type],x=ro[e.type],N=j=>{const S=j.replace(/<[^>]*>/g,"").trim();return S.length>80?S.substring(0,80)+"...":S||"(sans nonc)"};return r.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:v},children:[r.jsxs("div",{className:"question-editor__header",onClick:a,children:[r.jsxs("div",{className:"question-editor__header-left",children:[r.jsx("span",{className:"question-editor__number",children:t+1}),r.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:v},children:[b," ",x]}),!n&&r.jsx("span",{className:"question-editor__preview",children:N(e.enonce)})]}),r.jsxs("div",{className:"question-editor__header-right",children:[r.jsxs("span",{className:"question-editor__points",children:[e.points," pts"]}),r.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&r.jsxs("div",{className:"question-editor__body",children:[r.jsxs("div",{className:"question-editor__toolbar",children:[r.jsx("button",{type:"button",onClick:d,disabled:p,title:"Monter",children:""}),r.jsx("button",{type:"button",onClick:f,disabled:h,title:"Descendre",children:""}),r.jsx("button",{type:"button",onClick:u,title:"Dupliquer",children:""}),r.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),r.jsxs("div",{className:"question-editor__field",children:[r.jsx("label",{children:"nonc de la question *"}),r.jsx(Fa,{value:e.enonce,onChange:j=>l({enonce:j}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),r.jsxs("div",{className:"question-editor__params",children:[r.jsxs("div",{className:"question-editor__param",children:[r.jsx("label",{children:"Difficult"}),r.jsxs("select",{value:e.difficulte,onChange:j=>l({difficulte:j.target.value}),children:[r.jsx("option",{value:"facile",children:" Facile"}),r.jsx("option",{value:"moyen",children:" Moyen"}),r.jsx("option",{value:"difficile",children:" Difficile"})]})]}),r.jsxs("div",{className:"question-editor__param",children:[r.jsx("label",{children:"Points"}),r.jsx("input",{type:"number",value:e.points,onChange:j=>l({points:Number(j.target.value)}),min:1,max:20})]})]}),r.jsxs("div",{className:"question-editor__type-specific",children:[e.type==="qcm_unique"&&r.jsx(TR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="qcm_multiple"&&r.jsx(qR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="drag_drop"&&r.jsx(RR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="mise_en_relation"&&r.jsx(IR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="essai"&&r.jsx(LR,{data:e.typeData,onChange:j=>l({typeData:j})})]}),r.jsxs("div",{className:"question-editor__field",children:[r.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),r.jsx(Fa,{value:e.explication||"",onChange:j=>l({explication:j}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},TR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.options.map((f,p)=>p===o?{...f,...u}:u.isCorrect===!0?{...f,isCorrect:!1}:f);t({options:d})},a=()=>{e.options.length>=6||t({options:[...e.options,{id:Xt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({options:e.options.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),e.options.map((o,u)=>r.jsxs("div",{className:"type-editor__option-row",children:[r.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>n(u,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(Fa,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&r.jsx("span",{className:"type-editor__correct-badge",children:""}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),e.options.length<6&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"})]})},qR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.options.map((f,p)=>p===o?{...f,...u}:f);t({...e,options:d})},a=()=>{e.options.length>=8||t({...e,options:[...e.options,{id:Xt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({...e,options:e.options.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),e.options.map((o,u)=>r.jsxs("div",{className:"type-editor__option-row",children:[r.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:d=>n(u,{isCorrect:d.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(Fa,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&r.jsx("span",{className:"type-editor__correct-badge",children:""}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,children:""})]},o.id)),e.options.length<8&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"}),r.jsxs("label",{className:"type-editor__sub-option",children:[r.jsx("input",{type:"checkbox",checked:e.scoringPartiel,onChange:o=>t({...e,scoringPartiel:o.target.checked})}),r.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},RR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.items.map((f,p)=>p===o?{...f,...u}:f);t({...e,items:d})},a=()=>{e.items.length>=10||t({...e,items:[...e.items,{id:Xt("item"),texte:"",ordreCorrect:e.items.length+1}]})},l=o=>{if(e.items.length<=2)return;const u=e.items.filter((d,f)=>f!==o).map((d,f)=>({...d,ordreCorrect:f+1}));t({...e,items:u})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),r.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),r.jsxs("div",{className:"type-editor__field-inline",children:[r.jsx("label",{children:"Consigne :"}),r.jsx("input",{type:"text",value:e.consigneOrdre,onChange:o=>t({...e,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),e.items.map((o,u)=>r.jsxs("div",{className:"type-editor__drag-row",children:[r.jsx("span",{className:"type-editor__drag-number",children:u+1}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(Fa,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`lment ${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.items.length<=2,children:""})]},o.id)),e.items.length<10&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter un lment"})]})},IR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.paires.map((f,p)=>p===o?{...f,...u}:f);t({paires:d})},a=()=>{e.paires.length>=8||t({paires:[...e.paires,{id:Xt("pair"),gauche:"",droite:""}]})},l=o=>{e.paires.length<=2||t({paires:e.paires.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),r.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),r.jsxs("div",{className:"type-editor__relation-header",children:[r.jsx("span",{children:"Colonne A (gauche)"}),r.jsx("span",{}),r.jsx("span",{children:"Colonne B (droite)"}),r.jsx("span",{})]}),e.paires.map((o,u)=>r.jsxs("div",{className:"type-editor__relation-row",children:[r.jsx("div",{className:"type-editor__relation-cell",children:r.jsx(Fa,{value:o.gauche,onChange:d=>n(u,{gauche:d}),placeholder:`lment A${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("span",{className:"type-editor__relation-arrow",children:""}),r.jsx("div",{className:"type-editor__relation-cell",children:r.jsx(Fa,{value:o.droite,onChange:d=>n(u,{droite:d}),placeholder:`lment B${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.paires.length<=2,children:""})]},o.id)),e.paires.length<8&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une paire"})]})},LR=({data:e,onChange:t})=>{const n=()=>{t({...e,motsCles:[...e.motsCles,{mot:"",poids:1,obligatoire:!1}]})},a=(o,u)=>{const d=e.motsCles.map((f,p)=>p===o?{...f,...u}:f);t({...e,motsCles:d})},l=o=>{t({...e,motsCles:e.motsCles.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),r.jsxs("div",{className:"type-editor__params-row",children:[r.jsxs("div",{className:"type-editor__param-inline",children:[r.jsx("label",{children:"Mots minimum :"}),r.jsx("input",{type:"number",value:e.nombreMotsMin||"",onChange:o=>t({...e,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),r.jsxs("div",{className:"type-editor__param-inline",children:[r.jsx("label",{children:"Mots maximum :"}),r.jsx("input",{type:"number",value:e.nombreMotsMax||"",onChange:o=>t({...e,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),r.jsxs("div",{className:"type-editor__field-inline",children:[r.jsx("label",{children:"Mode de correction :"}),r.jsxs("select",{value:e.correctionMode,onChange:o=>t({...e,correctionMode:o.target.value}),children:[r.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),r.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),r.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(e.correctionMode==="mots_cles"||e.correctionMode==="semi_auto")&&r.jsxs("div",{className:"type-editor__keywords",children:[r.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),e.motsCles.map((o,u)=>r.jsxs("div",{className:"type-editor__keyword-row",children:[r.jsx("input",{type:"text",value:o.mot,onChange:d=>a(u,{mot:d.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),r.jsxs("select",{value:o.poids,onChange:d=>a(u,{poids:Number(d.target.value)}),className:"type-editor__keyword-weight",children:[r.jsx("option",{value:1,children:"Poids 1"}),r.jsx("option",{value:2,children:"Poids 2"}),r.jsx("option",{value:3,children:"Poids 3"}),r.jsx("option",{value:4,children:"Poids 4"}),r.jsx("option",{value:5,children:"Poids 5"})]}),r.jsxs("label",{className:"type-editor__keyword-required",children:[r.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:d=>a(u,{obligatoire:d.target.checked})}),r.jsx("span",{children:"Obligatoire"})]}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),children:""})]},u)),r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),r.jsxs("div",{className:"type-editor__field-block",children:[r.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),r.jsx(Fa,{value:e.reponseModele||"",onChange:o=>t({...e,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},q1=()=>{const{quizId:e}=Yn(),t=it(),{currentUser:n}=rt(),[a,l]=g.useState([]),[o,u]=g.useState(void 0),[d,f]=g.useState(!0),[p,h]=g.useState(null);return g.useEffect(()=>{(async()=>{try{f(!0);const b=await Za.getAll();if(l(b.map(x=>({id:x.id,nom:x.nom,classe:x.classe||""}))),e){const x=await xA(e);x?u(x):h("Quiz introuvable")}}catch(b){console.error("Erreur chargement donnes:",b),h(b.message||"Erreur de chargement")}finally{f(!1)}})()},[e]),d?r.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:r.jsx("p",{children:" Chargement..."})}):p?r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsxs("p",{style:{color:"#dc2626"},children:[" ",p]}),r.jsx("button",{onClick:()=>t(-1),children:" Retour"})]}):r.jsx(kR,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:a,auteurId:n?.uid||"",onSave:v=>{alert(" Quiz sauvegard avec succs !"),t("/admin/quiz")},onCancel:()=>t(-1)})},$R=()=>{const e=it(),{currentUser:t}=rt(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[f,p]=g.useState(null);g.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d(null);const j=await bA();a(j)}catch(j){console.error("Erreur chargement quiz:",j),d("Impossible de charger les quiz")}finally{o(!1)}},v=async j=>{try{await OR(j),a(S=>S.filter(C=>C.id!==j)),p(null)}catch(S){console.error("Erreur suppression:",S),alert("Erreur lors de la suppression : "+S.message)}},b=j=>{const S={};return j.questions.forEach(C=>{S[C.type]=(S[C.type]||0)+1}),Object.entries(S).map(([C,A])=>`${A} ${ro[C]||C}`).join(", ")},x=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",N=j=>j.questions.reduce((S,C)=>S+C.points,0);return r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),r.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),r.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),u&&r.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",u,r.jsx("button",{onClick:h,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),l&&r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!l&&n.length===0&&!u&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),r.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),r.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!l&&n.length>0&&r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(j=>r.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:j.titre}),j.isPremium&&r.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.questions.length," question",j.questions.length!==1?"s":""]}),r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",N(j)," pts"]}),r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.duree," min"]})]}),r.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",b(j)]}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",x(j.createdAt)]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>e(`/quiz-avance/${j.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),r.jsx("button",{onClick:()=>e(`/admin/quiz/modifier/${j.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),r.jsx("button",{onClick:()=>{const S=`${window.location.origin}/quiz-avance/${j.id}`;navigator.clipboard.writeText(S).then(()=>{alert(` Lien copi !

`+S+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),f===j.id?r.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[r.jsx("button",{onClick:()=>v(j.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),r.jsx("button",{onClick:()=>p(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):r.jsx("button",{onClick:()=>p(j.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},j.id))})]})},BR=({quiz:e,userId:t,onComplete:n,onQuit:a})=>{const l=g.useMemo(()=>{let P=[...e.questions];return e.melangerQuestions&&(P=P.sort(()=>Math.random()-.5)),P},[e]),[o,u]=g.useState(0),[d,f]=g.useState(new Map),[p,h]=g.useState(e.duree*60),[v,b]=g.useState(!1),[x,N]=g.useState(null),[j,S]=g.useState(!1),C=g.useRef(Date.now());g.useEffect(()=>{if(x)return;const P=setInterval(()=>{h(I=>I<=1?(clearInterval(P),O(),0):I-1)},1e3);return()=>clearInterval(P)},[x]);const A=P=>{const I=Math.floor(P/60),R=P%60;return`${I.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`},w=l[o],E=g.useCallback((P,I)=>{f(R=>{const F=new Map(R),B=F.get(P)||{questionId:P,type:w.type};return F.set(P,{...B,...I}),F})},[w]),D=P=>{P>=0&&P<l.length&&u(P)},O=async()=>{S(!1),b(!0);try{const P=Array.from(d.values()),I=Math.round((Date.now()-C.current)/1e3),R=await MR(e,t,P,I);N(R),n?.(R)}catch(P){alert("Erreur lors de la soumission : "+P.message)}finally{b(!1)}},T=d.size;return x?r.jsx("div",{className:"quiz-player quiz-player--results",children:r.jsxs("div",{className:"quiz-results",children:[r.jsxs("div",{className:`quiz-results__header ${x.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[r.jsx("div",{className:"quiz-results__emoji",children:x.reussi?"":""}),r.jsx("h2",{children:x.reussi?"Flicitations !":"Quiz termin"}),r.jsxs("div",{className:"quiz-results__score",children:[r.jsxs("span",{className:"quiz-results__note",children:[x.note20,"/20"]}),r.jsxs("span",{className:"quiz-results__detail",children:[x.score,"/",x.scoreMax," points"]})]}),r.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",A(x.tempsEcoule)]}),x.correctionManuelle&&r.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),e.afficherCorrection&&r.jsxs("div",{className:"quiz-results__details",children:[r.jsx("h3",{children:" Dtail des rponses"}),l.map((P,I)=>{const R=x.detailsParQuestion.find(F=>F.questionId===P.id);return r.jsxs("div",{className:`quiz-results__question ${R?.isCorrect?"quiz-results__question--correct":R?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[r.jsxs("div",{className:"quiz-results__q-header",children:[r.jsxs("span",{children:["Q",I+1," "," ",r.jsxs("span",{style:{color:mm[P.type]},children:[dm[P.type]," ",ro[P.type]]})]}),r.jsxs("span",{className:"quiz-results__q-score",children:[R?.pointsObtenus||0,"/",R?.pointsMax||P.points," pts",R?.isCorrect&&" ",R?.isPartiel&&" ",!R?.isCorrect&&!R?.isPartiel&&" "]})]}),r.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:P.enonce}}),P.explication&&r.jsxs("div",{className:"quiz-results__q-explanation",children:[r.jsx("strong",{children:" Explication :"}),r.jsx("div",{dangerouslySetInnerHTML:{__html:P.explication}})]})]},P.id)})]}),r.jsx("div",{className:"quiz-results__actions",children:r.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:a,children:"Retour au tableau de bord"})})]})}):r.jsxs("div",{className:"quiz-player",children:[r.jsxs("div",{className:"quiz-player__topbar",children:[r.jsxs("div",{className:"quiz-player__info",children:[r.jsx("span",{className:"quiz-player__title",children:e.titre}),r.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",l.length]})]}),r.jsxs("div",{className:"quiz-player__topbar-right",children:[r.jsxs("span",{className:`quiz-player__timer ${p<60?"quiz-player__timer--danger":p<300?"quiz-player__timer--warning":""}`,children:[" ",A(p)]}),r.jsxs("span",{className:"quiz-player__answered",children:[T,"/",l.length," rpondue",T>1?"s":""]})]})]}),r.jsx("div",{className:"quiz-player__progress-bar",children:r.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/l.length*100}%`}})}),r.jsxs("div",{className:"quiz-player__question-area",children:[r.jsxs("div",{className:"quiz-player__question-meta",children:[r.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:mm[w.type]},children:[dm[w.type]," ",ro[w.type]]}),r.jsxs("span",{className:"quiz-player__points",children:[w.points," point",w.points>1?"s":""]})]}),r.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:w.enonce}}),r.jsxs("div",{className:"quiz-player__answer-area",children:[w.type==="qcm_unique"&&r.jsx(UR,{question:w,reponse:d.get(w.id),onUpdate:P=>E(w.id,P),melangerOptions:e.melangerOptions}),w.type==="qcm_multiple"&&r.jsx(FR,{question:w,reponse:d.get(w.id),onUpdate:P=>E(w.id,P),melangerOptions:e.melangerOptions}),w.type==="drag_drop"&&r.jsx(GR,{question:w,reponse:d.get(w.id),onUpdate:P=>E(w.id,P)}),w.type==="mise_en_relation"&&r.jsx(HR,{question:w,reponse:d.get(w.id),onUpdate:P=>E(w.id,P)}),w.type==="essai"&&r.jsx(QR,{question:w,reponse:d.get(w.id),onUpdate:P=>E(w.id,P)})]})]}),r.jsxs("div",{className:"quiz-player__nav",children:[r.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>D(o-1),disabled:o===0,children:" Prcdent"}),r.jsx("div",{className:"quiz-player__pagination",children:l.map((P,I)=>r.jsx("button",{className:`quiz-player__page-dot ${I===o?"quiz-player__page-dot--current":""} ${d.has(P.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>D(I),title:`Question ${I+1}`,children:I+1},P.id))}),o<l.length-1?r.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>D(o+1),children:"Suivant "}):r.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>S(!0),disabled:v,children:v?" Envoi...":" Soumettre le quiz"})]}),j&&r.jsx("div",{className:"quiz-player__modal-overlay",children:r.jsxs("div",{className:"quiz-player__modal",children:[r.jsx("h3",{children:"Soumettre le quiz ?"}),r.jsxs("p",{children:["Vous avez rpondu  ",r.jsx("strong",{children:T})," question",T>1?"s":""," sur"," ",r.jsx("strong",{children:l.length}),"."]}),T<l.length&&r.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",l.length-T," question",l.length-T>1?"s":""," sans rponse !"]}),r.jsxs("div",{className:"quiz-player__modal-actions",children:[r.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>S(!1),children:"Continuer le quiz"}),r.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:O,children:"Confirmer la soumission"})]})]})})]})},UR=({question:e,reponse:t,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=g.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]);return r.jsx("div",{className:"player-qcm",children:o.map(u=>r.jsxs("label",{className:`player-qcm__option ${t?.selectedOptionId===u.id?"player-qcm__option--selected":""}`,children:[r.jsx("input",{type:"radio",name:`q_${e.id}`,checked:t?.selectedOptionId===u.id,onChange:()=>n({selectedOptionId:u.id})}),r.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:u.texte}})]},u.id))})},FR=({question:e,reponse:t,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=g.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]),u=t?.selectedOptionIds||[],d=f=>{const p=u.includes(f)?u.filter(h=>h!==f):[...u,f];n({selectedOptionIds:p})};return r.jsxs("div",{className:"player-qcm",children:[r.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(f=>r.jsxs("label",{className:`player-qcm__option ${u.includes(f.id)?"player-qcm__option--selected":""}`,children:[r.jsx("input",{type:"checkbox",checked:u.includes(f.id),onChange:()=>d(f.id)}),r.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:f.texte}})]},f.id))]})},GR=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,[l,o]=g.useState(()=>t?.ordrePropose?t.ordrePropose.map(b=>a.items.find(x=>x.id===b)).filter(Boolean):[...a.items].sort(()=>Math.random()-.5)),[u,d]=g.useState(null);g.useEffect(()=>{n({ordrePropose:l.map(b=>b.id)})},[l]);const f=b=>{d(b)},p=(b,x)=>{if(b.preventDefault(),u===null||u===x)return;const N=[...l],[j]=N.splice(u,1);N.splice(x,0,j),o(N),d(x)},h=()=>{d(null)},v=(b,x)=>{const N=x==="up"?b-1:b+1;if(N<0||N>=l.length)return;const j=[...l];[j[b],j[N]]=[j[N],j[b]],o(j)};return r.jsxs("div",{className:"player-dragdrop",children:[r.jsx("p",{className:"player-dragdrop__consigne",children:a.consigneOrdre}),r.jsx("div",{className:"player-dragdrop__list",children:l.map((b,x)=>r.jsxs("div",{className:`player-dragdrop__item ${u===x?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>f(x),onDragOver:N=>p(N,x),onDragEnd:h,children:[r.jsx("span",{className:"player-dragdrop__handle",children:""}),r.jsx("span",{className:"player-dragdrop__number",children:x+1}),r.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:b.texte}}),r.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[r.jsx("button",{type:"button",onClick:()=>v(x,"up"),disabled:x===0,children:""}),r.jsx("button",{type:"button",onClick:()=>v(x,"down"),disabled:x===l.length-1,children:""})]})]},b.id))})]})},HR=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,l=g.useMemo(()=>[...a.paires].sort(()=>Math.random()-.5),[a.paires]),[o,u]=g.useState(t?.relationsProposees||{}),[d,f]=g.useState(null);g.useEffect(()=>{n({relationsProposees:o})},[o]);const p=x=>{f(x)},h=x=>{d&&(u(N=>({...N,[d]:x})),f(null))},v=x=>{u(N=>{const j={...N};return delete j[x],j})},b=new Set(Object.values(o));return r.jsxs("div",{className:"player-relation",children:[r.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),r.jsxs("div",{className:"player-relation__columns",children:[r.jsxs("div",{className:"player-relation__col",children:[r.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),a.paires.map(x=>r.jsxs("div",{className:`player-relation__item player-relation__item--left ${d===x.id?"player-relation__item--selected":""} ${o[x.id]?"player-relation__item--matched":""}`,onClick:()=>{o[x.id]?v(x.id):p(x.id)},children:[r.jsx("div",{dangerouslySetInnerHTML:{__html:x.gauche}}),o[x.id]&&r.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]}),r.jsxs("div",{className:"player-relation__col",children:[r.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),l.map(x=>r.jsxs("div",{className:`player-relation__item player-relation__item--right ${b.has(x.id)?"player-relation__item--matched":""} ${d&&!b.has(x.id)?"player-relation__item--clickable":""}`,onClick:()=>{d&&!b.has(x.id)&&h(x.id)},children:[r.jsx("div",{dangerouslySetInnerHTML:{__html:x.droite}}),b.has(x.id)&&r.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]})]})]})},QR=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,[l,o]=g.useState(t?.texteReponse||""),u=l.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return g.useEffect(()=>{n({texteReponse:l})},[l]),r.jsxs("div",{className:"player-essai",children:[r.jsxs("div",{className:"player-essai__info",children:[a.nombreMotsMin&&r.jsxs("span",{className:u<a.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",a.nombreMotsMin," mots"]}),a.nombreMotsMax&&r.jsxs("span",{className:u>a.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",a.nombreMotsMax," mots"]}),r.jsxs("span",{className:"player-essai__count",children:[u," mot",u>1?"s":""]})]}),r.jsx("textarea",{className:"player-essai__textarea",value:l,onChange:d=>o(d.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},VR=()=>{const{quizId:e}=Yn(),t=it(),{currentUser:n}=rt(),[a,l]=g.useState(null),[o,u]=g.useState(!0),[d,f]=g.useState(null);return g.useEffect(()=>{(async()=>{if(!e){f("ID du quiz manquant"),u(!1);return}try{const h=await xA(e);if(!h){f("Quiz introuvable");return}if(h.isPremium&&!n?.isPremium){f("Ce quiz est rserv aux abonns Premium");return}l(h)}catch(h){console.error("Erreur chargement quiz:",h),f(h.message||"Impossible de charger le quiz")}finally{u(!1)}})()},[e,n]),o?r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),r.jsx("p",{children:"Chargement du quiz..."})]}):d?r.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:r.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),r.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:d}),d.includes("Premium")&&r.jsx("button",{onClick:()=>t("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),r.jsx("button",{onClick:()=>t(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):a?r.jsx(BR,{quiz:a,userId:n?.uid||"",onComplete:p=>{console.log(" Quiz termin  Note:",p.note20,"/20")},onQuit:()=>t("/dashboard")}):r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsx("p",{children:"Quiz introuvable"}),r.jsx("button",{onClick:()=>t(-1),children:" Retour"})]})},yA=Ne(W,"quiz_results"),Rb=Ne(W,"progressions"),YR=async e=>{try{const t=await kt(yA,{...e,datePassage:Oe.now()});return e.reussi&&await e5(e.userId,e.disciplineId,e.disciplineNom,e.quizId),t.id}catch(t){throw console.error("Erreur lors de la sauvegarde du rsultat :",t),t}},vf=async(e,t)=>{try{let n=De(yA,we("userId","==",e),Xe("datePassage","desc"));return t&&(n=De(n,_r(t))),(await ze(n)).docs.map(l=>({id:l.id,...l.data()}))}catch(n){throw console.error("Erreur rcupration historique :",n),n}},KR=async e=>{try{const t=await vf(e);if(t.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=t.reduce((h,v)=>h+v.pourcentage,0),a=Math.round(n/t.length),l=Math.max(...t.map(h=>h.pourcentage)),o=t.reduce((h,v)=>h+(v.tempsEcoule||0),0),u=t.filter(h=>h.reussi).length;let d=0,f=0;for(const h of t)h.reussi?(d++,f=Math.max(f,d)):d=0;let p=0;for(const h of t)if(h.reussi)p++;else break;return{totalQuizPasses:t.length,totalQuizReussis:u,moyenneGenerale:a,tempsTotal:o,meilleurScore:l,serieReussites:p,meilleureSerieReussites:Math.max(f,p)}}catch(t){return console.error("Erreur calcul stats :",t),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},WR=async e=>{try{const t=await vf(e);if(t.length===0)return[];const n={};for(const a of t){const l=a.disciplineId;n[l]||(n[l]=[]),n[l].push(a)}return Object.entries(n).map(([a,l])=>{const o=Math.round(l.reduce((v,b)=>v+b.pourcentage,0)/l.length),u=Math.max(...l.map(v=>v.pourcentage)),d=l[0].pourcentage,f=l.filter(v=>v.reussi).length,p=l.reduce((v,b)=>v+(b.tempsEcoule||0),0);let h="stable";if(l.length>=4){const v=l.slice(0,3),b=l.slice(3,6),x=v.reduce((j,S)=>j+S.pourcentage,0)/v.length,N=b.reduce((j,S)=>j+S.pourcentage,0)/b.length;x-N>5?h="up":N-x>5&&(h="down")}return{disciplineId:a,disciplineNom:l[0].disciplineNom||a,nombreQuiz:l.length,moyenne:o,meilleurScore:u,dernierScore:d,quizReussis:f,tempsTotal:p,tendance:h}})}catch(t){return console.error("Erreur progression par discipline :",t),[]}},XR=async(e,t)=>{try{return(await vf(e,t||20)).reverse().map(a=>({date:(a.datePassage?.toDate?a.datePassage.toDate():new Date(a.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:a.pourcentage,discipline:a.disciplineNom||a.disciplineId}))}catch(n){return console.error("Erreur donnes temporelles :",n),[]}},ZR=async(e,t,n)=>{const a=`${e}_${t}`,l=je(Rb,a),o=await Mt(l);if(o.exists())return{...o.data()};const[u,d]=await Promise.all([R1("ressources",t),R1("quizzes",t)]),f={userId:e,disciplineId:t,disciplineNom:n,ressourcesVues:[],quizReussis:[],totalRessources:u,totalQuiz:d,pourcentage:0,dernierAcces:Oe.now(),createdAt:Oe.now(),updatedAt:Oe.now()};return await pf(l,f),f},R1=async(e,t)=>{try{const n=De(Ne(W,e),we("disciplineId","==",t));return(await ze(n)).size}catch{return 0}},JR=e=>{if(e.totalRessources+e.totalQuiz===0)return 0;const n=e.totalRessources>0?e.ressourcesVues.length/e.totalRessources*40:0,a=e.totalQuiz>0?e.quizReussis.length/e.totalQuiz*60:0;return e.totalRessources===0?Math.min(100,Math.round(e.quizReussis.length/e.totalQuiz*100)):e.totalQuiz===0?Math.min(100,Math.round(e.ressourcesVues.length/e.totalRessources*100)):Math.min(100,Math.round(n+a))},e5=async(e,t,n,a)=>{try{const l=`${e}_${t}`,o=je(Rb,l),u=await ZR(e,t,n);if(u.quizReussis.includes(a))return await Qe(o,{dernierAcces:Oe.now()}),u;const d=[...u.quizReussis,a],f={...u,quizReussis:d,dernierAcces:Oe.now(),updatedAt:Oe.now(),pourcentage:0};return f.pourcentage=JR(f),await pf(o,f),f}catch(l){throw console.error("Erreur enregistrement quiz russi :",l),l}},t5=async e=>{try{const t=De(Rb,we("userId","==",e));return(await ze(t)).docs.map(a=>a.data())}catch(t){return console.error("Erreur rcupration progressions :",t),[]}},r5=async e=>{try{const t=await t5(e),n=await jA(e),a=t.reduce((d,f)=>d+f.ressourcesVues.length,0),l=t.reduce((d,f)=>d+f.quizReussis.length,0),o=t.length>0?Math.round(t.reduce((d,f)=>d+f.pourcentage,0)/t.length):0,u=t.filter(d=>d.pourcentage>=100).length;return{totalRessourcesVues:a,totalQuizReussis:l,pourcentageMoyen:o,disciplinesCommencees:t.length,disciplinesCompletees:u,streakActuel:n.streakActuel,meilleurStreak:n.meilleurStreak,parDiscipline:t}}catch(t){return console.error("Erreur progression globale :",t),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},n5=()=>new Date().toISOString().split("T")[0],a5=()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]},jA=async e=>{try{const t=je(W,"users",e),n=await Mt(t);if(!n.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const a=n.data();return{streakActuel:a.streakActuel||0,meilleurStreak:a.meilleurStreak||0,dernierJourAcces:a.dernierJourAcces||""}}catch(t){return console.error("Erreur rcupration streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},i5=async e=>{try{const t=je(W,"users",e),n=await jA(e),a=n5();if(n.dernierJourAcces===a)return n;const l=a5();let o;n.dernierJourAcces===l?o=n.streakActuel+1:o=1;const u=Math.max(n.meilleurStreak,o);return await Qe(t,{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}),{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}}catch(t){return console.error("Erreur mise  jour streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},s5=(e,t,n)=>{const a=n?.totalRessourcesVues||0;n?.totalQuizReussis;const l=n?.disciplinesCompletees||0;n?.streakActuel;const o=n?.meilleurStreak||0,u=n?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:a>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:a>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:a>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:a>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:e.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:e.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:e.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:e.moyenneGenerale>=80&&e.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:l>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:u>=3||t.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:u>=5||t.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:a>=50&&e.totalQuizReussis>=20}]},NA=e=>{if(e<60)return`${e} s`;const t=Math.floor(e/60),n=e%60;return n>0?`${t} min ${n.toString().padStart(2,"0")} s`:`${t} min`},Ql=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":"#ef4444",_A=e=>e>=80?"Excellent":e>=60?"Bien":e>=40?"Passable":" amliorer",l5=()=>{const{quizId:e}=Yn(),t=it(),{currentUser:n}=rt(),[a,l]=g.useState(null),[o,u]=g.useState(""),[d,f]=g.useState(!0),[p,h]=g.useState(null),[v,b]=g.useState("intro"),[x,N]=g.useState(0),[j,S]=g.useState({}),[C,A]=g.useState(0),[w,E]=g.useState(0),D=g.useRef(null),[O,T]=g.useState(0),[P,I]=g.useState(0),[R,F]=g.useState(0),[B,G]=g.useState(!1),[V,M]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!e){h("ID du quiz manquant."),f(!1);return}try{const Y=await lR(e);if(!Y){h("Quiz introuvable."),f(!1);return}l(Y),A(Y.duree*60);try{const Pe=(await Za.getAll()).find(se=>se.id===Y.disciplineId);u(Pe?.nom||Y.disciplineId)}catch{u(Y.disciplineId)}}catch(Y){h("Erreur lors du chargement du quiz."),console.error(Y)}finally{f(!1)}})()},[e]),g.useEffect(()=>{if(v==="playing")return D.current=setInterval(()=>{A(xe=>xe<=1?(clearInterval(D.current),$(),0):xe-1),E(xe=>xe+1)},1e3),()=>{D.current&&clearInterval(D.current)}},[v]);const q=()=>{b("playing"),N(0),S({}),E(0),a&&A(a.duree*60)},X=(xe,Y)=>{S(he=>({...he,[xe]:Y}))},Q=xe=>{a&&xe>=0&&xe<a.questions.length&&N(xe)},$=g.useCallback(async()=>{if(!a||!n||v==="review")return;D.current&&clearInterval(D.current);let xe=0,Y=0,he=0;a.questions.forEach(J=>{const H=J.points||1;Y+=H,j[J.id]===J.reponseCorrecte&&(xe+=H,he++)});const Pe=Y>0?Math.round(xe/Y*100):0,se=Pe>=(a.noteMinimale||50);T(xe),I(Y),F(he),b("review"),G(!0);try{const J={quizId:a.id,quizTitre:a.titre,disciplineId:a.disciplineId,disciplineNom:o,userId:n.uid,reponses:a.questions.map(H=>j[H.id]??-1),tempsEcoule:w,score:xe,totalPoints:Y,pourcentage:Pe,reussi:se,nombreQuestions:a.questions.length,bonnesReponses:he};await YR(J),M(!0)}catch(J){console.error("Erreur lors de la sauvegarde :",J)}finally{G(!1)}},[a,n,j,w,o,v]),L=xe=>{const Y=Math.floor(xe/60),he=xe%60;return`${Y.toString().padStart(2,"0")}:${he.toString().padStart(2,"0")}`},pe=()=>{if(!a)return"";const xe=a.duree*60,Y=C/xe;return Y<=.1?"timer-critical":Y<=.25?"timer-warning":""},te=Object.keys(j).length;if(d)return r.jsxs("div",{className:"quiz-player-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement du quiz..."})]});if(p||!a)return r.jsxs("div",{className:"quiz-player-error",children:[r.jsx(cm,{size:48}),r.jsx("h3",{children:p||"Quiz introuvable"}),r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(Nx,{size:18})," Retour au tableau de bord"]})]});if(a.isPremium&&!n?.isPremium)return r.jsx("div",{className:"quiz-player-locked",children:r.jsxs("div",{className:"qp-locked-card",children:[r.jsx(Sx,{size:48}),r.jsx("h3",{children:"Quiz Premium"}),r.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),r.jsxs("p",{className:"qp-locked-price",children:[" partir de ",r.jsx("strong",{children:"2 000 FCFA/mois"})]}),r.jsxs("div",{className:"qp-locked-actions",children:[r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/premium"),children:[r.jsx(cn,{size:18})," Devenir Premium"]}),r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(Av,{size:18})," Retour"]})]})]})});if(v==="intro")return r.jsx("div",{className:"quiz-player-intro",children:r.jsxs("div",{className:"qp-intro-card",children:[r.jsxs("div",{className:"qp-intro-header",children:[r.jsxs("button",{className:"qp-back-btn",onClick:()=>t(-1),children:[r.jsx(Av,{size:20})," Retour"]}),a.isPremium&&r.jsxs("span",{className:"qp-badge qp-badge-premium",children:[r.jsx(cn,{size:12})," Premium"]})]}),r.jsxs("div",{className:"qp-intro-content",children:[r.jsx("h1",{className:"qp-intro-title",children:a.titre}),r.jsx("span",{className:"qp-intro-discipline",children:o}),r.jsxs("div",{className:"qp-intro-stats",children:[r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(dn,{size:20}),r.jsxs("div",{children:[r.jsx("span",{className:"qp-intro-stat-value",children:a.questions.length}),r.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(to,{size:20}),r.jsxs("div",{children:[r.jsxs("span",{className:"qp-intro-stat-value",children:[a.duree," min"]}),r.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(Hi,{size:20}),r.jsxs("div",{children:[r.jsxs("span",{className:"qp-intro-stat-value",children:[a.noteMinimale||50,"%"]}),r.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),r.jsxs("div",{className:"qp-intro-instructions",children:[r.jsx("h3",{children:"Instructions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),r.jsx("li",{children:"Chaque question a une seule bonne rponse"}),r.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),r.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),r.jsxs("li",{children:["Il faut obtenir au moins ",a.noteMinimale||50,"% pour russir"]})]})]})]}),r.jsxs("button",{className:"qp-btn qp-btn-start",onClick:q,children:[r.jsx(Yl,{size:20})," Commencer le quiz"]})]})});if(v==="playing"){const xe=a.questions[x];return r.jsxs("div",{className:"quiz-player-game",children:[r.jsxs("div",{className:"qp-game-header",children:[r.jsxs("div",{className:"qp-game-info",children:[r.jsx("span",{className:"qp-game-title",children:a.titre}),r.jsx("span",{className:"qp-game-discipline",children:o})]}),r.jsxs("div",{className:`qp-timer ${pe()}`,children:[r.jsx(c3,{size:18}),r.jsx("span",{children:L(C)})]})]}),r.jsx("div",{className:"qp-progress-bar",children:r.jsx("div",{className:"qp-progress-fill",style:{width:`${(x+1)/a.questions.length*100}%`}})}),r.jsxs("div",{className:"qp-game-content",children:[r.jsxs("div",{className:"qp-question-header",children:[r.jsxs("span",{className:"qp-question-number",children:["Question ",x+1,"/",a.questions.length]}),r.jsxs("span",{className:"qp-question-points",children:[xe.points||1," pt(s)"]})]}),r.jsx("h2",{className:"qp-question-text",children:xe.question}),r.jsx("div",{className:"qp-options-list",children:xe.options.map((Y,he)=>r.jsxs("button",{className:`qp-option ${j[xe.id]===he?"selected":""}`,onClick:()=>X(xe.id,he),children:[r.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+he)}),r.jsx("span",{className:"qp-option-text",children:Y}),j[xe.id]===he&&r.jsx($t,{size:18,className:"qp-option-check"})]},he))})]}),r.jsxs("div",{className:"qp-game-footer",children:[r.jsx("div",{className:"qp-question-indicators",children:a.questions.map((Y,he)=>r.jsx("button",{className:`qp-indicator ${he===x?"active":""} ${j[Y.id]!==void 0?"answered":""}`,onClick:()=>Q(he),children:he+1},Y.id))}),r.jsxs("div",{className:"qp-nav-buttons",children:[r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>Q(x-1),disabled:x===0,children:[r.jsx(Av,{size:16})," Prcdent"]}),x<a.questions.length-1?r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>Q(x+1),children:["Suivant ",r.jsx(bs,{size:16})]}):r.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:$,disabled:te<a.questions.length,children:[r.jsx($t,{size:16}),"Soumettre (",te,"/",a.questions.length,")"]})]})]})]})}const de=P>0?Math.round(O/P*100):0,me=de>=(a.noteMinimale||50);return r.jsxs("div",{className:"quiz-player-review",children:[r.jsxs("div",{className:`qp-score-card ${me?"success":"fail"}`,children:[r.jsx("div",{className:"qp-score-icon",children:me?r.jsx(Hi,{size:48}):r.jsx(cm,{size:48})}),r.jsx("h2",{className:"qp-score-title",children:me?"Flicitations ! ":"Continuez vos efforts ! "}),r.jsxs("div",{className:"qp-score-circle",style:{borderColor:Ql(de)},children:[r.jsxs("span",{className:"qp-score-value",children:[de,"%"]}),r.jsx("span",{className:"qp-score-label",children:_A(de)})]}),r.jsxs("div",{className:"qp-score-details",children:[r.jsxs("div",{className:"qp-score-detail",children:[r.jsxs("span",{children:[R,"/",a.questions.length]}),r.jsx("small",{children:"Bonnes rponses"})]}),r.jsxs("div",{className:"qp-score-detail",children:[r.jsxs("span",{children:[O,"/",P]}),r.jsx("small",{children:"Points"})]}),r.jsxs("div",{className:"qp-score-detail",children:[r.jsx("span",{children:NA(w)}),r.jsx("small",{children:"Temps"})]})]}),B&&r.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),V&&r.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),r.jsxs("div",{className:"qp-review-actions",children:[r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(Nx,{size:18})," Tableau de bord"]}),r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:q,children:[r.jsx(u3,{size:18})," Recommencer"]})]}),r.jsxs("div",{className:"qp-review-questions",children:[r.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),a.questions.map((xe,Y)=>{const he=j[xe.id],Pe=he===xe.reponseCorrecte;return r.jsxs("div",{className:`qp-review-question ${Pe?"correct":"incorrect"}`,children:[r.jsxs("div",{className:"qp-review-question-header",children:[r.jsxs("span",{className:"qp-review-q-number",children:["Q",Y+1]}),Pe?r.jsxs("span",{className:"qp-review-badge correct",children:[r.jsx($t,{size:14})," Correct"]}):r.jsxs("span",{className:"qp-review-badge incorrect",children:[r.jsx(wx,{size:14})," Incorrect"]}),r.jsxs("span",{className:"qp-review-q-points",children:[Pe?xe.points||1:0,"/",xe.points||1," pt(s)"]})]}),r.jsx("p",{className:"qp-review-q-text",children:xe.question}),r.jsx("div",{className:"qp-review-options",children:xe.options.map((se,J)=>{let H="qp-review-option";return J===xe.reponseCorrecte&&(H+=" correct-answer"),J===he&&!Pe&&(H+=" wrong-answer"),r.jsxs("div",{className:H,children:[r.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+J)}),r.jsx("span",{children:se}),J===xe.reponseCorrecte&&r.jsx($t,{size:14,className:"qp-review-check"}),J===he&&!Pe&&r.jsx(wx,{size:14,className:"qp-review-x"})]},J)})}),xe.explication&&r.jsxs("div",{className:"qp-review-explication",children:[r.jsx("strong",{children:" Explication :"})," ",xe.explication]})]},xe.id)})]})]})};function SA(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=SA(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function jt(){for(var e,t,n=0,a="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=SA(e))&&(a&&(a+=" "),a+=t);return a}var o5=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ib(e){if(typeof e!="string")return!1;var t=o5;return t.includes(e)}var c5=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],u5=new Set(c5);function wA(e){return typeof e!="string"?!1:u5.has(e)}function CA(e){return typeof e=="string"&&e.startsWith("data-")}function Hn(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(wA(n)||CA(n))&&(t[n]=e[n]);return t}function Zc(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Hn(t)}return typeof e=="object"&&!Array.isArray(e)?Hn(e):null}function kr(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(wA(n)||CA(n)||Ib(n))&&(t[n]=e[n]);return t}function d5(e){return e==null?null:g.isValidElement(e)?kr(e.props):typeof e=="object"&&!Array.isArray(e)?kr(e):null}var m5=["children","width","height","viewBox","className","style","title","desc"];function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ex.apply(null,arguments)}function f5(e,t){if(e==null)return{};var n,a,l=p5(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function p5(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var EA=g.forwardRef((e,t)=>{var{children:n,width:a,height:l,viewBox:o,className:u,style:d,title:f,desc:p}=e,h=f5(e,m5),v=o||{width:a,height:l,x:0,y:0},b=jt("recharts-surface",u);return g.createElement("svg",Ex({},kr(h),{className:b,width:a,height:l,style:d,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),g.createElement("title",null,f),g.createElement("desc",null,p),n)}),h5=["children","className"];function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ax.apply(null,arguments)}function v5(e,t){if(e==null)return{};var n,a,l=g5(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function g5(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Mn=g.forwardRef((e,t)=>{var{children:n,className:a}=e,l=v5(e,h5),o=jt("recharts-layer",a);return g.createElement("g",Ax({className:o},kr(l),{ref:t}),n)}),x5=g.createContext(null);function wt(e){return function(){return e}}const AA=Math.cos,fm=Math.sin,Kn=Math.sqrt,pm=Math.PI,gf=2*pm,zx=Math.PI,Ox=2*zx,ys=1e-6,b5=Ox-ys;function zA(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function y5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zA;const n=10**t;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}class j5{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zA:y5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,l){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,n,a,l,o,u){this._append`C${+t},${+n},${+a},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(t,n,a,l,o){if(t=+t,n=+n,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,d=this._y1,f=a-t,p=l-n,h=u-t,v=d-n,b=h*h+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>ys)if(!(Math.abs(v*f-p*h)>ys)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let x=a-u,N=l-d,j=f*f+p*p,S=x*x+N*N,C=Math.sqrt(j),A=Math.sqrt(b),w=o*Math.tan((zx-Math.acos((j+b-S)/(2*C*A)))/2),E=w/A,D=w/C;Math.abs(E-1)>ys&&this._append`L${t+E*h},${n+E*v}`,this._append`A${o},${o},0,0,${+(v*x>h*N)},${this._x1=t+D*f},${this._y1=n+D*p}`}}arc(t,n,a,l,o,u){if(t=+t,n=+n,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(l),f=a*Math.sin(l),p=t+d,h=n+f,v=1^u,b=u?l-o:o-l;this._x1===null?this._append`M${p},${h}`:(Math.abs(this._x1-p)>ys||Math.abs(this._y1-h)>ys)&&this._append`L${p},${h}`,a&&(b<0&&(b=b%Ox+Ox),b>b5?this._append`A${a},${a},0,1,${v},${t-d},${n-f}A${a},${a},0,1,${v},${this._x1=p},${this._y1=h}`:b>ys&&this._append`A${a},${a},0,${+(b>=zx)},${v},${this._x1=t+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(t,n,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function Lb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new j5(t)}function $b(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OA(e){this._context=e}OA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xf(e){return new OA(e)}function DA(e){return e[0]}function MA(e){return e[1]}function kA(e,t){var n=wt(!0),a=null,l=xf,o=null,u=Lb(d);e=typeof e=="function"?e:e===void 0?DA:wt(e),t=typeof t=="function"?t:t===void 0?MA:wt(t);function d(f){var p,h=(f=$b(f)).length,v,b=!1,x;for(a==null&&(o=l(x=u())),p=0;p<=h;++p)!(p<h&&n(v=f[p],p,f))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(v,p,f),+t(v,p,f));if(x)return o=null,x+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:wt(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:wt(+f),d):t},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:wt(!!f),d):n},d.curve=function(f){return arguments.length?(l=f,a!=null&&(o=l(a)),d):l},d.context=function(f){return arguments.length?(f==null?a=o=null:o=l(a=f),d):a},d}function Dd(e,t,n){var a=null,l=wt(!0),o=null,u=xf,d=null,f=Lb(p);e=typeof e=="function"?e:e===void 0?DA:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?MA:wt(+n);function p(v){var b,x,N,j=(v=$b(v)).length,S,C=!1,A,w=new Array(j),E=new Array(j);for(o==null&&(d=u(A=f())),b=0;b<=j;++b){if(!(b<j&&l(S=v[b],b,v))===C)if(C=!C)x=b,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),N=b-1;N>=x;--N)d.point(w[N],E[N]);d.lineEnd(),d.areaEnd()}C&&(w[b]=+e(S,b,v),E[b]=+t(S,b,v),d.point(a?+a(S,b,v):w[b],n?+n(S,b,v):E[b]))}if(A)return d=null,A+""||null}function h(){return kA().defined(l).curve(u).context(o)}return p.x=function(v){return arguments.length?(e=typeof v=="function"?v:wt(+v),a=null,p):e},p.x0=function(v){return arguments.length?(e=typeof v=="function"?v:wt(+v),p):e},p.x1=function(v){return arguments.length?(a=v==null?null:typeof v=="function"?v:wt(+v),p):a},p.y=function(v){return arguments.length?(t=typeof v=="function"?v:wt(+v),n=null,p):t},p.y0=function(v){return arguments.length?(t=typeof v=="function"?v:wt(+v),p):t},p.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:wt(+v),p):n},p.lineX0=p.lineY0=function(){return h().x(e).y(t)},p.lineY1=function(){return h().x(e).y(n)},p.lineX1=function(){return h().x(a).y(t)},p.defined=function(v){return arguments.length?(l=typeof v=="function"?v:wt(!!v),p):l},p.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),p):u},p.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),p):o},p}class PA{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function N5(e){return new PA(e,!0)}function _5(e){return new PA(e,!1)}const Bb={draw(e,t){const n=Kn(t/pm);e.moveTo(n,0),e.arc(0,0,n,0,gf)}},S5={draw(e,t){const n=Kn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},TA=Kn(1/3),w5=TA*2,C5={draw(e,t){const n=Kn(t/w5),a=n*TA;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},E5={draw(e,t){const n=Kn(t),a=-n/2;e.rect(a,a,n,n)}},A5=.8908130915292852,qA=fm(pm/10)/fm(7*pm/10),z5=fm(gf/10)*qA,O5=-AA(gf/10)*qA,D5={draw(e,t){const n=Kn(t*A5),a=z5*n,l=O5*n;e.moveTo(0,-n),e.lineTo(a,l);for(let o=1;o<5;++o){const u=gf*o/5,d=AA(u),f=fm(u);e.lineTo(f*n,-d*n),e.lineTo(d*a-f*l,f*a+d*l)}e.closePath()}},$v=Kn(3),M5={draw(e,t){const n=-Kn(t/($v*3));e.moveTo(0,n*2),e.lineTo(-$v*n,-n),e.lineTo($v*n,-n),e.closePath()}},En=-.5,An=Kn(3)/2,Dx=1/Kn(12),k5=(Dx/2+1)*3,P5={draw(e,t){const n=Kn(t/k5),a=n/2,l=n*Dx,o=a,u=n*Dx+n,d=-o,f=u;e.moveTo(a,l),e.lineTo(o,u),e.lineTo(d,f),e.lineTo(En*a-An*l,An*a+En*l),e.lineTo(En*o-An*u,An*o+En*u),e.lineTo(En*d-An*f,An*d+En*f),e.lineTo(En*a+An*l,En*l-An*a),e.lineTo(En*o+An*u,En*u-An*o),e.lineTo(En*d+An*f,En*f-An*d),e.closePath()}};function T5(e,t){let n=null,a=Lb(l);e=typeof e=="function"?e:wt(e||Bb),t=typeof t=="function"?t:wt(t===void 0?64:+t);function l(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:wt(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:wt(+o),l):t},l.context=function(o){return arguments.length?(n=o??null,l):n},l}function hm(){}function vm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function RA(e){this._context=e}RA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q5(e){return new RA(e)}function IA(e){this._context=e}IA.prototype={areaStart:hm,areaEnd:hm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function R5(e){return new IA(e)}function LA(e){this._context=e}LA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I5(e){return new LA(e)}function $A(e){this._context=e}$A.prototype={areaStart:hm,areaEnd:hm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function L5(e){return new $A(e)}function I1(e){return e<0?-1:1}function L1(e,t,n){var a=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),u=(n-e._y1)/(l||a<0&&-0),d=(o*l+u*a)/(a+l);return(I1(o)+I1(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(d))||0}function $1(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Bv(e,t,n){var a=e._x0,l=e._y0,o=e._x1,u=e._y1,d=(o-a)/3;e._context.bezierCurveTo(a+d,l+d*t,o-d,u-d*n,o,u)}function gm(e){this._context=e}gm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bv(this,this._t0,$1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Bv(this,$1(this,n=L1(this,e,t)),n);break;default:Bv(this,this._t0,n=L1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function BA(e){this._context=new UA(e)}(BA.prototype=Object.create(gm.prototype)).point=function(e,t){gm.prototype.point.call(this,t,e)};function UA(e){this._context=e}UA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,l,o){this._context.bezierCurveTo(t,e,a,n,o,l)}};function $5(e){return new gm(e)}function B5(e){return new BA(e)}function FA(e){this._context=e}FA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=B1(e),l=B1(t),o=0,u=1;u<n;++o,++u)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[u],t[u]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function B1(e){var t,n=e.length-1,a,l=new Array(n),o=new Array(n),u=new Array(n);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],t=1;t<n-1;++t)l[t]=1,o[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[n-1]=2,o[n-1]=7,u[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=l[t]/o[t-1],o[t]-=a,u[t]-=a*u[t-1];for(l[n-1]=u[n-1]/o[n-1],t=n-2;t>=0;--t)l[t]=(u[t]-l[t+1])/o[t];for(o[n-1]=(e[n]+l[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function U5(e){return new FA(e)}function bf(e,t){this._context=e,this._t=t}bf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function F5(e){return new bf(e,.5)}function G5(e){return new bf(e,0)}function H5(e){return new bf(e,1)}function ks(e,t){if((u=e.length)>1)for(var n=1,a,l,o=e[t[0]],u,d=o.length;n<u;++n)for(l=o,o=e[t[n]],a=0;a<d;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function Mx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Q5(e,t){return e[t]}function V5(e){const t=[];return t.key=e,t}function Y5(){var e=wt([]),t=Mx,n=ks,a=Q5;function l(o){var u=Array.from(e.apply(this,arguments),V5),d,f=u.length,p=-1,h;for(const v of o)for(d=0,++p;d<f;++d)(u[d][p]=[0,+a(v,u[d].key,p,o)]).data=v;for(d=0,h=$b(t(u));d<f;++d)u[h[d]].index=d;return n(u,h),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:wt(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:wt(+o),l):a},l.order=function(o){return arguments.length?(t=o==null?Mx:typeof o=="function"?o:wt(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(n=o??ks,l):n},l}function K5(e,t){if((a=e.length)>0){for(var n,a,l=0,o=e[0].length,u;l<o;++l){for(u=n=0;n<a;++n)u+=e[n][l][1]||0;if(u)for(n=0;n<a;++n)e[n][l][1]/=u}ks(e,t)}}function W5(e,t){if((l=e.length)>0){for(var n=0,a=e[t[0]],l,o=a.length;n<o;++n){for(var u=0,d=0;u<l;++u)d+=e[u][n][1]||0;a[n][1]+=a[n][0]=-d/2}ks(e,t)}}function X5(e,t){if(!(!((u=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var n=0,a=1,l,o,u;a<o;++a){for(var d=0,f=0,p=0;d<u;++d){for(var h=e[t[d]],v=h[a][1]||0,b=h[a-1][1]||0,x=(v-b)/2,N=0;N<d;++N){var j=e[t[N]],S=j[a][1]||0,C=j[a-1][1]||0;x+=S-C}f+=v,p+=x*v}l[a-1][1]+=l[a-1][0]=n,f&&(n-=p/f)}l[a-1][1]+=l[a-1][0]=n,ks(e,t)}}var Uv={},Fv={},U1;function Z5(){return U1||(U1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Fv)),Fv}var Gv={},F1;function GA(){return F1||(F1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Gv)),Gv}var Hv={},G1;function Ub(){return G1||(G1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Hv)),Hv}var Qv={},Vv={},H1;function J5(){return H1||(H1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=t})(Vv)),Vv}var Q1;function Fb(){return Q1||(Q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J5(),n=Ub();function a(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],u=l.length;if(u===0)return o;let d=0,f="",p="",h=!1;for(l.charCodeAt(0)===46&&(o.push(""),d++);d<u;){const v=l[d];p?v==="\\"&&d+1<u?(d++,f+=l[d]):v===p?p="":f+=v:h?v==='"'||v==="'"?p=v:v==="]"?(h=!1,o.push(f),f=""):f+=v:v==="["?(h=!0,f&&(o.push(f),f="")):v==="."?f&&(o.push(f),f=""):f+=v,d++}return f&&o.push(f),o}e.toPath=a})(Qv)),Qv}var V1;function Gb(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z5(),n=GA(),a=Ub(),l=Fb();function o(d,f,p){if(d==null)return p;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return p;const h=d[f];return h===void 0?n.isDeepKey(f)?o(d,l.toPath(f),p):p:h}case"number":case"symbol":{typeof f=="number"&&(f=a.toKey(f));const h=d[f];return h===void 0?p:h}default:{if(Array.isArray(f))return u(d,f,p);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return p;const h=d[f];return h===void 0?p:h}}}function u(d,f,p){if(f.length===0)return p;let h=d;for(let v=0;v<f.length;v++){if(h==null||t.isUnsafeProperty(f[v]))return p;h=h[f[v]]}return h===void 0?p:h}e.get=o})(Uv)),Uv}var Yv,Y1;function eI(){return Y1||(Y1=1,Yv=Gb().get),Yv}var tI=eI();const no=Xa(tI);var rI=4;function Ii(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rI,n=10**t,a=Math.round(e*n)/n;return Object.is(a,-0)?0:a}function Bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.reduce((l,o,u)=>{var d=n[u-1];return typeof d=="string"?l+d+o:d!==void 0?l+Ii(d)+o:l+o},"")}var Qr=e=>e===0?0:e>0?1:-1,da=e=>typeof e=="number"&&e!=+e,Ps=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ae=e=>(typeof e=="number"||e instanceof Number)&&!da(e),ma=e=>Ae(e)||typeof e=="string",nI=0,Pc=e=>{var t=++nI;return"".concat(e||"").concat(t)},Qn=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(t)&&typeof t!="string")return a;var o;if(Ps(t)){if(n==null)return a;var u=t.indexOf("%");o=n*parseFloat(t.slice(0,u))/100}else o=+t;return da(o)&&(o=a),l&&n!=null&&o>n&&(o=n),o},HA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[String(e[a])])n[String(e[a])]=!0;else return!0;return!1};function Ut(e,t,n){return Ae(e)&&Ae(t)?Ii(e+n*(t-e)):t}function QA(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):no(a,t))===n)}var Tt=e=>e===null||typeof e>"u",Jc=e=>Tt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Vr(e){return e!=null}function Gs(){}var aI=["type","size","sizeType"];function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kx.apply(null,arguments)}function K1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function W1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K1(Object(n),!0).forEach(function(a){iI(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function iI(e,t,n){return(t=sI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sI(e){var t=lI(e,"string");return typeof t=="symbol"?t:t+""}function lI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oI(e,t){if(e==null)return{};var n,a,l=cI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function cI(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var VA={symbolCircle:Bb,symbolCross:S5,symbolDiamond:C5,symbolSquare:E5,symbolStar:D5,symbolTriangle:M5,symbolWye:P5},uI=Math.PI/180,dI=e=>{var t="symbol".concat(Jc(e));return VA[t]||Bb},mI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*uI;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},fI=(e,t)=>{VA["symbol".concat(Jc(e))]=t},YA=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,l=oI(e,aI),o=W1(W1({},l),{},{type:t,size:n,sizeType:a}),u="circle";typeof t=="string"&&(u=t);var d=()=>{var b=dI(u),x=T5().type(b).size(mI(n,a,u)),N=x();if(N!==null)return N},{className:f,cx:p,cy:h}=o,v=kr(o);return Ae(p)&&Ae(h)&&Ae(n)?g.createElement("path",kx({},v,{className:jt("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};YA.registerSymbol=fI;var KA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Hb=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(l=>{Ib(l)&&(a[l]=(o=>n[l](n,o)))}),a},pI=(e,t,n)=>a=>(e(t,n,a),null),Qb=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];Ib(l)&&typeof o=="function"&&(a||(a={}),a[l]=pI(o,t,n))}),a};function X1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function hI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X1(Object(n),!0).forEach(function(a){vI(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vI(e,t,n){return(t=gI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gI(e){var t=xI(e,"string");return typeof t=="symbol"?t:t+""}function xI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tr(e,t){var n=hI({},e),a=t,l=Object.keys(t),o=l.reduce((u,d)=>(u[d]===void 0&&a[d]!==void 0&&(u[d]=a[d]),u),n);return o}var Kv={},Wv={},Z1;function bI(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const l=new Map;for(let o=0;o<n.length;o++){const u=n[o],d=a(u,o,n);l.has(d)||l.set(d,u)}return Array.from(l.values())}e.uniqBy=t})(Wv)),Wv}var Xv={},J1;function yI(){return J1||(J1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return function(...l){return n.apply(this,l.slice(0,a))}}e.ary=t})(Xv)),Xv}var Zv={},eS;function WA(){return eS||(eS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Zv)),Zv}var Jv={},eg={},tg={},tS;function jI(){return tS||(tS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(tg)),tg}var rS;function Vb(){return rS||(rS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jI();function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(eg)),eg}var rg={},nS;function NI(){return nS||(nS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(rg)),rg}var aS;function _I(){return aS||(aS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vb(),n=NI();function a(l){return n.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=a})(Jv)),Jv}var ng={},ag={},iS;function SI(){return iS||(iS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gb();function n(a){return function(l){return t.get(l,a)}}e.property=n})(ag)),ag}var ig={},sg={},lg={},og={},sS;function XA(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(og)),og}var cg={},lS;function ZA(){return lS||(lS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(cg)),cg}var ug={},oS;function JA(){return oS||(oS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(ug)),ug}var cS;function wI(){return cS||(cS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XA(),n=ZA(),a=JA();function l(h,v,b){return typeof b!="function"?l(h,v,()=>{}):o(h,v,function x(N,j,S,C,A,w){const E=b(N,j,S,C,A,w);return E!==void 0?!!E:o(N,j,x,w)},new Map)}function o(h,v,b,x){if(v===h)return!0;switch(typeof v){case"object":return u(h,v,b,x);case"function":return Object.keys(v).length>0?o(h,{...v},b,x):a.isEqualsSameValueZero(h,v);default:return t.isObject(h)?typeof v=="string"?v==="":!0:a.isEqualsSameValueZero(h,v)}}function u(h,v,b,x){if(v==null)return!0;if(Array.isArray(v))return f(h,v,b,x);if(v instanceof Map)return d(h,v,b,x);if(v instanceof Set)return p(h,v,b,x);const N=Object.keys(v);if(h==null||n.isPrimitive(h))return N.length===0;if(N.length===0)return!0;if(x?.has(v))return x.get(v)===h;x?.set(v,h);try{for(let j=0;j<N.length;j++){const S=N[j];if(!n.isPrimitive(h)&&!(S in h)||v[S]===void 0&&h[S]!==void 0||v[S]===null&&h[S]!==null||!b(h[S],v[S],S,h,v,x))return!1}return!0}finally{x?.delete(v)}}function d(h,v,b,x){if(v.size===0)return!0;if(!(h instanceof Map))return!1;for(const[N,j]of v.entries()){const S=h.get(N);if(b(S,j,N,h,v,x)===!1)return!1}return!0}function f(h,v,b,x){if(v.length===0)return!0;if(!Array.isArray(h))return!1;const N=new Set;for(let j=0;j<v.length;j++){const S=v[j];let C=!1;for(let A=0;A<h.length;A++){if(N.has(A))continue;const w=h[A];let E=!1;if(b(w,S,j,h,v,x)&&(E=!0),E){N.add(A),C=!0;break}}if(!C)return!1}return!0}function p(h,v,b,x){return v.size===0?!0:h instanceof Set?f([...h],[...v],b,x):!1}e.isMatchWith=l,e.isSetMatch=p})(lg)),lg}var uS;function ez(){return uS||(uS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wI();function n(a,l){return t.isMatchWith(a,l,()=>{})}e.isMatch=n})(sg)),sg}var dg={},mg={},fg={},dS;function CI(){return dS||(dS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(fg)),fg}var pg={},mS;function Yb(){return mS||(mS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(pg)),pg}var hg={},fS;function tz(){return fS||(fS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",d="[object Date]",f="[object Map]",p="[object Set]",h="[object Array]",v="[object Function]",b="[object ArrayBuffer]",x="[object Object]",N="[object Error]",j="[object DataView]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",A="[object Uint16Array]",w="[object Uint32Array]",E="[object BigUint64Array]",D="[object Int8Array]",O="[object Int16Array]",T="[object Int32Array]",P="[object BigInt64Array]",I="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=b,e.arrayTag=h,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=E,e.booleanTag=l,e.dataViewTag=j,e.dateTag=d,e.errorTag=N,e.float32ArrayTag=I,e.float64ArrayTag=R,e.functionTag=v,e.int16ArrayTag=O,e.int32ArrayTag=T,e.int8ArrayTag=D,e.mapTag=f,e.numberTag=a,e.objectTag=x,e.regexpTag=t,e.setTag=p,e.stringTag=n,e.symbolTag=u,e.uint16ArrayTag=A,e.uint32ArrayTag=w,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=C})(hg)),hg}var vg={},pS;function EI(){return pS||(pS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(vg)),vg}var hS;function rz(){return hS||(hS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CI(),n=Yb(),a=tz(),l=ZA(),o=EI();function u(h,v){return d(h,void 0,h,new Map,v)}function d(h,v,b,x=new Map,N=void 0){const j=N?.(h,v,b,x);if(j!==void 0)return j;if(l.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const S=new Array(h.length);x.set(h,S);for(let C=0;C<h.length;C++)S[C]=d(h[C],C,b,x,N);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;x.set(h,S);for(const[C,A]of h)S.set(C,d(A,C,b,x,N));return S}if(h instanceof Set){const S=new Set;x.set(h,S);for(const C of h)S.add(d(C,void 0,b,x,N));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,S);for(let C=0;C<h.length;C++)S[C]=d(h[C],C,b,x,N);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,S),f(S,h,b,x,N),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return x.set(h,S),f(S,h,b,x,N),S}if(typeof Blob<"u"&&h instanceof Blob){const S=new Blob([h],{type:h.type});return x.set(h,S),f(S,h,b,x,N),S}if(h instanceof Error){const S=new h.constructor;return x.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,f(S,h,b,x,N),S}if(h instanceof Boolean){const S=new Boolean(h.valueOf());return x.set(h,S),f(S,h,b,x,N),S}if(h instanceof Number){const S=new Number(h.valueOf());return x.set(h,S),f(S,h,b,x,N),S}if(h instanceof String){const S=new String(h.valueOf());return x.set(h,S),f(S,h,b,x,N),S}if(typeof h=="object"&&p(h)){const S=Object.create(Object.getPrototypeOf(h));return x.set(h,S),f(S,h,b,x,N),S}return h}function f(h,v,b=h,x,N){const j=[...Object.keys(v),...t.getSymbols(v)];for(let S=0;S<j.length;S++){const C=j[S],A=Object.getOwnPropertyDescriptor(h,C);(A==null||A.writable)&&(h[C]=d(v[C],C,b,x,N))}}function p(h){switch(n.getTag(h)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=f})(mg)),mg}var vS;function AI(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rz();function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(dg)),dg}var gS;function zI(){return gS||(gS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ez(),n=AI();function a(l){return l=n.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=a})(ig)),ig}var gg={},xg={},bg={},xS;function OI(){return xS||(xS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rz(),n=Yb(),a=tz();function l(o,u){return t.cloneDeepWith(o,(d,f,p,h)=>{const v=u?.(d,f,p,h);if(v!==void 0)return v;if(typeof o=="object"){if(n.getTag(o)===a.objectTag&&typeof o.constructor!="function"){const b={};return h.set(o,b),t.copyProperties(b,o,p,h),b}switch(Object.prototype.toString.call(o)){case a.numberTag:case a.stringTag:case a.booleanTag:{const b=new o.constructor(o?.valueOf());return t.copyProperties(b,o),b}case a.argumentsTag:{const b={};return t.copyProperties(b,o),b.length=o.length,b[Symbol.iterator]=o[Symbol.iterator],b}default:return}}})}e.cloneDeepWith=l})(bg)),bg}var bS;function DI(){return bS||(bS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OI();function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(xg)),xg}var yg={},jg={},yS;function nz(){return yS||(yS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(jg)),jg}var Ng={},jS;function MI(){return jS||(jS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yb();function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(Ng)),Ng}var NS;function kI(){return NS||(NS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GA(),n=nz(),a=MI(),l=Fb();function o(u,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&t.isDeepKey(d)&&u?.[d]==null?f=l.toPath(d):f=[d],f.length===0)return!1;let p=u;for(let h=0;h<f.length;h++){const v=f[h];if((p==null||!Object.hasOwn(p,v))&&!((Array.isArray(p)||a.isArguments(p))&&n.isIndex(v)&&v<p.length))return!1;p=p[v]}return!0}e.has=o})(yg)),yg}var _S;function PI(){return _S||(_S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ez(),n=Ub(),a=DI(),l=Gb(),o=kI();function u(d,f){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return f=a.cloneDeep(f),function(p){const h=l.get(p,d);return h===void 0?o.has(p,d):f===void 0?h===void 0:t.isMatch(h,f)}}e.matchesProperty=u})(gg)),gg}var SS;function TI(){return SS||(SS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WA(),n=SI(),a=zI(),l=PI();function o(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):a.matches(u);case"string":case"symbol":case"number":return n.property(u)}}e.iteratee=o})(ng)),ng}var wS;function qI(){return wS||(wS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bI(),n=yI(),a=WA(),l=_I(),o=TI();function u(d,f=a.identity){return l.isArrayLikeObject(d)?t.uniqBy(Array.from(d),n.ary(o.iteratee(f),1)):[]}e.uniqBy=u})(Kv)),Kv}var _g,CS;function RI(){return CS||(CS=1,_g=qI().uniqBy),_g}var II=RI();const ES=Xa(II);function LI(e,t,n){return t===!0?ES(e,n):typeof t=="function"?ES(e,t):e}var Sg={exports:{}},wg={},Cg={exports:{}},Eg={};var AS;function $I(){if(AS)return Eg;AS=1;var e=mf();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function d(v,b){var x=b(),N=a({inst:{value:x,getSnapshot:b}}),j=N[0].inst,S=N[1];return o(function(){j.value=x,j.getSnapshot=b,f(j)&&S({inst:j})},[v,x,b]),l(function(){return f(j)&&S({inst:j}),v(function(){f(j)&&S({inst:j})})},[v]),u(x),x}function f(v){var b=v.getSnapshot;v=v.value;try{var x=b();return!n(v,x)}catch{return!0}}function p(v,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return Eg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Eg}var zS;function BI(){return zS||(zS=1,Cg.exports=$I()),Cg.exports}var OS;function UI(){if(OS)return wg;OS=1;var e=mf(),t=BI();function n(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var a=typeof Object.is=="function"?Object.is:n,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,d=e.useMemo,f=e.useDebugValue;return wg.useSyncExternalStoreWithSelector=function(p,h,v,b,x){var N=o(null);if(N.current===null){var j={hasValue:!1,value:null};N.current=j}else j=N.current;N=d(function(){function C(O){if(!A){if(A=!0,w=O,O=b(O),x!==void 0&&j.hasValue){var T=j.value;if(x(T,O))return E=T}return E=O}if(T=E,a(w,O))return T;var P=b(O);return x!==void 0&&x(T,P)?(w=O,T):(w=O,E=P)}var A=!1,w,E,D=v===void 0?null:v;return[function(){return C(h())},D===null?void 0:function(){return C(D())}]},[h,v,b,x]);var S=l(p,N[0],N[1]);return u(function(){j.hasValue=!0,j.value=S},[S]),f(S),S},wg}var DS;function FI(){return DS||(DS=1,Sg.exports=UI()),Sg.exports}var GI=FI(),Kb=g.createContext(null),HI=e=>e,Qt=()=>{var e=g.useContext(Kb);return e?e.store.dispatch:HI},tm=()=>{},QI=()=>tm,VI=(e,t)=>e===t;function Te(e){var t=g.useContext(Kb),n=g.useMemo(()=>t?a=>{if(a!=null)return e(a)}:tm,[t,e]);return GI.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:QI,t?t.store.getState:tm,t?t.store.getState:tm,n,VI)}function YI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function KI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function WI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var MS=e=>Array.isArray(e)?e:[e];function XI(e){const t=Array.isArray(e[0])?e[0]:e;return WI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ZI(e,t){const n=[],{length:a}=e;for(let l=0;l<a;l++)n.push(e[l].apply(null,t));return n}var JI=class{constructor(e){this.value=e}deref(){return this.value}},e4=typeof WeakRef<"u"?WeakRef:JI,t4=0,kS=1;function Md(){return{s:t4,v:void 0,o:null,p:null}}function az(e,t={}){let n=Md();const{resultEqualityCheck:a}=t;let l,o=0;function u(){let d=n;const{length:f}=arguments;for(let v=0,b=f;v<b;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let N=d.o;N===null&&(d.o=N=new WeakMap);const j=N.get(x);j===void 0?(d=Md(),N.set(x,d)):d=j}else{let N=d.p;N===null&&(d.p=N=new Map);const j=N.get(x);j===void 0?(d=Md(),N.set(x,d)):d=j}}const p=d;let h;if(d.s===kS)h=d.v;else if(h=e.apply(null,arguments),o++,a){const v=l?.deref?.()??l;v!=null&&a(v,h)&&(h=v,o!==0&&o--),l=typeof h=="object"&&h!==null||typeof h=="function"?new e4(h):h}return p.s=kS,p.v=h,h}return u.clearCache=()=>{n=Md(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function r4(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let o=0,u=0,d,f={},p=l.pop();typeof p=="object"&&(f=p,p=l.pop()),YI(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const h={...n,...f},{memoize:v,memoizeOptions:b=[],argsMemoize:x=az,argsMemoizeOptions:N=[]}=h,j=MS(b),S=MS(N),C=XI(l),A=v(function(){return o++,p.apply(null,arguments)},...j),w=x(function(){u++;const D=ZI(C,arguments);return d=A.apply(null,D),d},...S);return Object.assign(w,{resultFunc:p,memoizedResultFunc:A,dependencies:C,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:x})};return Object.assign(a,{withTypes:()=>a}),a}var oe=r4(az),n4=Object.assign((e,t=oe)=>{KI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return t(a,(...o)=>o.reduce((u,d,f)=>(u[n[f]]=d,u),{}))},{withTypes:()=>n4}),Ag={},zg={},Og={},PS;function a4(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,l,o)=>{if(a!==l){const u=t(a),d=t(l);if(u===d&&u===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?d-u:u-d}return 0};e.compareValues=n})(Og)),Og}var Dg={},Mg={},TS;function iz(){return TS||(TS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Mg)),Mg}var qS;function i4(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iz(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})(Dg)),Dg}var RS;function s4(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a4(),n=i4(),a=Fb();function l(o,u,d,f){if(o==null)return[];d=f?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(x=>String(x));const p=(x,N)=>{let j=x;for(let S=0;S<N.length&&j!=null;++S)j=j[N[S]];return j},h=(x,N)=>N==null||x==null?N:typeof x=="object"&&"key"in x?Object.hasOwn(N,x.key)?N[x.key]:p(N,x.path):typeof x=="function"?x(N):Array.isArray(x)?p(N,x):typeof N=="object"?N[x]:N,v=u.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:a.toPath(x)}));return o.map(x=>({original:x,criteria:v.map(N=>h(N,x))})).slice().sort((x,N)=>{for(let j=0;j<v.length;j++){const S=t.compareValues(x.criteria[j],N.criteria[j],d[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=l})(zg)),zg}var kg={},IS;function l4(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const l=[],o=Math.floor(a),u=(d,f)=>{for(let p=0;p<d.length;p++){const h=d[p];Array.isArray(h)&&f<o?u(h,f+1):l.push(h)}};return u(n,0),l}e.flatten=t})(kg)),kg}var Pg={},LS;function sz(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nz(),n=Vb(),a=XA(),l=JA();function o(u,d,f){return a.isObject(f)&&(typeof d=="number"&&n.isArrayLike(f)&&t.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?l.isEqualsSameValueZero(f[d],u):!1}e.isIterateeCall=o})(Pg)),Pg}var $S;function o4(){return $S||($S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s4(),n=l4(),a=sz();function l(o,...u){const d=u.length;return d>1&&a.isIterateeCall(o,u[0],u[1])?u=[]:d>2&&a.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(o,n.flatten(u),["asc"])}e.sortBy=l})(Ag)),Ag}var Tg,BS;function c4(){return BS||(BS=1,Tg=o4().sortBy),Tg}var u4=c4();const yf=Xa(u4);var lz=e=>e.legend.settings,d4=e=>e.legend.size,m4=e=>e.legend.payload;oe([m4,lz],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?yf(a,n):a});var kd=1;function f4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=g.useState({height:0,left:0,top:0,width:0}),a=g.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-t.height)>kd||Math.abs(u.left-t.left)>kd||Math.abs(u.top-t.top)>kd||Math.abs(u.width-t.width)>kd)&&n({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function yr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var p4=typeof Symbol=="function"&&Symbol.observable||"@@observable",US=p4,qg=()=>Math.random().toString(36).substring(7).split("").join("."),h4={INIT:`@@redux/INIT${qg()}`,REPLACE:`@@redux/REPLACE${qg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${qg()}`},xm=h4;function Wb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function oz(e,t,n){if(typeof e!="function")throw new Error(yr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(yr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(yr(1));return n(oz)(e,t)}let a=e,l=t,o=new Map,u=o,d=0,f=!1;function p(){u===o&&(u=new Map,o.forEach((S,C)=>{u.set(C,S)}))}function h(){if(f)throw new Error(yr(3));return l}function v(S){if(typeof S!="function")throw new Error(yr(4));if(f)throw new Error(yr(5));let C=!0;p();const A=d++;return u.set(A,S),function(){if(C){if(f)throw new Error(yr(6));C=!1,p(),u.delete(A),o=null}}}function b(S){if(!Wb(S))throw new Error(yr(7));if(typeof S.type>"u")throw new Error(yr(8));if(typeof S.type!="string")throw new Error(yr(17));if(f)throw new Error(yr(9));try{f=!0,l=a(l,S)}finally{f=!1}return(o=u).forEach(A=>{A()}),S}function x(S){if(typeof S!="function")throw new Error(yr(10));a=S,b({type:xm.REPLACE})}function N(){const S=v;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(yr(11));function A(){const E=C;E.next&&E.next(h())}return A(),{unsubscribe:S(A)}},[US](){return this}}}return b({type:xm.INIT}),{dispatch:b,subscribe:v,getState:h,replaceReducer:x,[US]:N}}function v4(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:xm.INIT})>"u")throw new Error(yr(12));if(typeof n(void 0,{type:xm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(yr(13))})}function cz(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(n[u]=e[u])}const a=Object.keys(n);let l;try{v4(n)}catch(o){l=o}return function(u={},d){if(l)throw l;let f=!1;const p={};for(let h=0;h<a.length;h++){const v=a[h],b=n[v],x=u[v],N=b(x,d);if(typeof N>"u")throw d&&d.type,new Error(yr(14));p[v]=N,f=f||N!==x}return f=f||a.length!==Object.keys(u).length,f?p:u}}function bm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function g4(...e){return t=>(n,a)=>{const l=t(n,a);let o=()=>{throw new Error(yr(15))};const u={getState:l.getState,dispatch:(f,...p)=>o(f,...p)},d=e.map(f=>f(u));return o=bm(...d)(l.dispatch),{...l,dispatch:o}}}function uz(e){return Wb(e)&&"type"in e&&typeof e.type=="string"}var dz=Symbol.for("immer-nothing"),FS=Symbol.for("immer-draftable"),Pr=Symbol.for("immer-state");function Bn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var un=Object,ao=un.getPrototypeOf,ym="constructor",jf="prototype",Px="configurable",jm="enumerable",rm="writable",Tc="value",Ga=e=>!!e&&!!e[Pr];function Vn(e){return e?mz(e)||_f(e)||!!e[FS]||!!e[ym]?.[FS]||Sf(e)||wf(e):!1}var x4=un[jf][ym].toString(),GS=new WeakMap;function mz(e){if(!e||!Xb(e))return!1;const t=ao(e);if(t===null||t===un[jf])return!0;const n=un.hasOwnProperty.call(t,ym)&&t[ym];if(n===Object)return!0;if(!Vl(n))return!1;let a=GS.get(n);return a===void 0&&(a=Function.toString.call(n),GS.set(n,a)),a===x4}function Nf(e,t,n=!0){eu(e)===0?(n?Reflect.ownKeys(e):un.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function eu(e){const t=e[Pr];return t?t.type_:_f(e)?1:Sf(e)?2:wf(e)?3:0}var HS=(e,t,n=eu(e))=>n===2?e.has(t):un[jf].hasOwnProperty.call(e,t),Tx=(e,t,n=eu(e))=>n===2?e.get(t):e[t],Nm=(e,t,n,a=eu(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function b4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var _f=Array.isArray,Sf=e=>e instanceof Map,wf=e=>e instanceof Set,Xb=e=>typeof e=="object",Vl=e=>typeof e=="function",Rg=e=>typeof e=="boolean";function y4(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var qa=e=>e.copy_||e.base_,Zb=e=>e.modified_?e.copy_:e.base_;function qx(e,t){if(Sf(e))return new Map(e);if(wf(e))return new Set(e);if(_f(e))return Array[jf].slice.call(e);const n=mz(e);if(t===!0||t==="class_only"&&!n){const a=un.getOwnPropertyDescriptors(e);delete a[Pr];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d[rm]===!1&&(d[rm]=!0,d[Px]=!0),(d.get||d.set)&&(a[u]={[Px]:!0,[rm]:!0,[jm]:d[jm],[Tc]:e[u]})}return un.create(ao(e),a)}else{const a=ao(e);if(a!==null&&n)return{...e};const l=un.create(a);return un.assign(l,e)}}function Jb(e,t=!1){return Cf(e)||Ga(e)||!Vn(e)||(eu(e)>1&&un.defineProperties(e,{set:Pd,add:Pd,clear:Pd,delete:Pd}),un.freeze(e),t&&Nf(e,(n,a)=>{Jb(a,!0)},!1)),e}function j4(){Bn(2)}var Pd={[Tc]:j4};function Cf(e){return e===null||!Xb(e)?!0:un.isFrozen(e)}var _m="MapSet",Rx="Patches",QS="ArrayMethods",fz={};function Ts(e){const t=fz[e];return t||Bn(0,e),t}var VS=e=>!!fz[e],qc,pz=()=>qc,N4=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:VS(_m)?Ts(_m):void 0,arrayMethodsPlugin_:VS(QS)?Ts(QS):void 0});function YS(e,t){t&&(e.patchPlugin_=Ts(Rx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ix(e){Lx(e),e.drafts_.forEach(_4),e.drafts_=null}function Lx(e){e===qc&&(qc=e.parent_)}var KS=e=>qc=N4(qc,e);function _4(e){const t=e[Pr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function WS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Pr].modified_&&(Ix(t),Bn(4)),Vn(e)&&(e=XS(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(n[Pr].base_,e,t)}else e=XS(t,n);return S4(t,e,!0),Ix(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dz?e:void 0}function XS(e,t){if(Cf(t))return t;const n=t[Pr];if(!n)return Sm(t,e.handledSet_,e);if(!Ef(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);gz(n,e)}return n.copy_}function S4(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Jb(t,n)}function hz(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ef=(e,t)=>e.scope_===t,w4=[];function vz(e,t,n,a){const l=qa(e),o=e.type_;if(a!==void 0&&Tx(l,a,o)===t){Nm(l,a,n,o);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;Nf(l,(f,p)=>{if(Ga(p)){const h=d.get(p)||[];h.push(f),d.set(p,h)}})}const u=e.draftLocations_.get(t)??w4;for(const d of u)Nm(l,d,n,o)}function C4(e,t,n){e.callbacks_.push(function(l){const o=t;if(!o||!Ef(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=Zb(o);vz(e,o.draft_??o,u,n),gz(o,l)})}function gz(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}hz(e)}}function E4(e,t,n){const{scope_:a}=e;if(Ga(n)){const l=n[Pr];Ef(l,a)&&l.callbacks_.push(function(){nm(e);const u=Zb(l);vz(e,n,u,t)})}else Vn(n)&&e.callbacks_.push(function(){const o=qa(e);e.type_===3?o.has(n)&&Sm(n,a.handledSet_,a):Tx(o,t,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Sm(Tx(e.copy_,t,e.type_),a.handledSet_,a)})}function Sm(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ga(e)||t.has(e)||!Vn(e)||Cf(e)||(t.add(e),Nf(e,(a,l)=>{if(Ga(l)){const o=l[Pr];if(Ef(o,n)){const u=Zb(o);Nm(e,a,u,e.type_),hz(o)}}else Vn(l)&&Sm(l,t,n)})),e}function A4(e,t){const n=_f(e),a={type_:n?1:0,scope_:t?t.scope_:pz(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=wm;n&&(l=[a],o=Rc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,[d,a]}var wm={get(e,t){if(t===Pr)return e;let n=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const l=qa(e);if(!HS(l,t,e.type_))return z4(e,l,t);const o=l[t];if(e.finalized_||!Vn(o)||a&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&y4(t))return o;if(o===Ig(e.base_,t)){nm(e);const u=e.type_===1?+t:t,d=Bx(e.scope_,o,e,u);return e.copy_[u]=d}return o},has(e,t){return t in qa(e)},ownKeys(e){return Reflect.ownKeys(qa(e))},set(e,t,n){const a=xz(qa(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Ig(qa(e),t),o=l?.[Pr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(b4(n,l)&&(n!==void 0||HS(e.base_,t,e.type_)))return!0;nm(e),$x(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),E4(e,t,n)),!0},deleteProperty(e,t){return nm(e),Ig(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),$x(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=qa(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[rm]:!0,[Px]:e.type_!==1||t!=="length",[jm]:a[jm],[Tc]:n[t]}},defineProperty(){Bn(11)},getPrototypeOf(e){return ao(e.base_)},setPrototypeOf(){Bn(12)}},Rc={};for(let e in wm){let t=wm[e];Rc[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Rc.deleteProperty=function(e,t){return Rc.set.call(this,e,t,void 0)};Rc.set=function(e,t,n){return wm.set.call(this,e[0],t,n,e[0])};function Ig(e,t){const n=e[Pr];return(n?qa(n):e)[t]}function z4(e,t,n){const a=xz(t,n);return a?Tc in a?a[Tc]:a.get?.call(e.draft_):void 0}function xz(e,t){if(!(t in e))return;let n=ao(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=ao(n)}}function $x(e){e.modified_||(e.modified_=!0,e.parent_&&$x(e.parent_))}function nm(e){e.copy_||(e.assigned_=new Map,e.copy_=qx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var O4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,l)=>{if(Vl(n)&&!Vl(a)){const u=a;a=n;const d=this;return function(p=u,...h){return d.produce(p,v=>a.call(this,v,...h))}}Vl(a)||Bn(6),l!==void 0&&!Vl(l)&&Bn(7);let o;if(Vn(n)){const u=KS(this),d=Bx(u,n,void 0);let f=!0;try{o=a(d),f=!1}finally{f?Ix(u):Lx(u)}return YS(u,l),WS(o,u)}else if(!n||!Xb(n)){if(o=a(n),o===void 0&&(o=n),o===dz&&(o=void 0),this.autoFreeze_&&Jb(o,!0),l){const u=[],d=[];Ts(Rx).generateReplacementPatches_(n,o,{patches_:u,inversePatches_:d}),l(u,d)}return o}else Bn(1,n)},this.produceWithPatches=(n,a)=>{if(Vl(n))return(d,...f)=>this.produceWithPatches(d,p=>n(p,...f));let l,o;return[this.produce(n,a,(d,f)=>{l=d,o=f}),l,o]},Rg(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Rg(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Rg(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Vn(t)||Bn(8),Ga(t)&&(t=Gn(t));const n=KS(this),a=Bx(n,t,void 0);return a[Pr].isManual_=!0,Lx(n),a}finishDraft(t,n){const a=t&&t[Pr];(!a||!a.isManual_)&&Bn(9);const{scope_:l}=a;return YS(l,n),WS(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const o=n[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(n=n.slice(a+1));const l=Ts(Rx).applyPatches_;return Ga(t)?l(t,n):this.produce(t,o=>l(o,n))}};function Bx(e,t,n,a){const[l,o]=Sf(t)?Ts(_m).proxyMap_(t,n):wf(t)?Ts(_m).proxySet_(t,n):A4(t,n);return(n?.scope_??pz()).drafts_.push(l),o.callbacks_=n?.callbacks_??[],o.key_=a,n&&a!==void 0?C4(n,o,a):o.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:p}=f;o.modified_&&p&&p.generatePatches_(o,[],f)}),l}function Gn(e){return Ga(e)||Bn(10,e),bz(e)}function bz(e){if(!Vn(e)||Cf(e))return e;const t=e[Pr];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=qx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=qx(e,!0);return Nf(n,(l,o)=>{Nm(n,l,bz(o))},a),t&&(t.finalized_=!1),n}var D4=new O4,yz=D4.produce;function jz(e){return({dispatch:n,getState:a})=>l=>o=>typeof o=="function"?o(n,a,e):l(o)}var M4=jz(),k4=jz,P4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bm:bm.apply(null,arguments)};function kn(e,t){function n(...a){if(t){let l=t(...a);if(!l)throw new Error(mn(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>uz(a)&&a.type===e,n}var Nz=class Cc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Cc.prototype)}static get[Symbol.species](){return Cc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Cc(...t[0].concat(this)):new Cc(...t.concat(this))}};function ZS(e){return Vn(e)?yz(e,()=>{}):e}function Td(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function T4(e){return typeof e=="boolean"}var q4=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let u=new Nz;return n&&(T4(n)?u.push(M4):u.push(k4(n.extraArgument))),u},_z="RTK_autoBatch",Ot=()=>e=>({payload:e,meta:{[_z]:!0}}),JS=e=>t=>{setTimeout(t,e)},Sz=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let l=!0,o=!1,u=!1;const d=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:JS(10):e.type==="callback"?e.queueNotification:JS(e.timeout),p=()=>{u=!1,o&&(o=!1,d.forEach(h=>h()))};return Object.assign({},a,{subscribe(h){const v=()=>l&&h(),b=a.subscribe(v);return d.add(h),()=>{b(),d.delete(h)}},dispatch(h){try{return l=!h?.meta?.[_z],o=!l,o&&(u||(u=!0,f(p))),a.dispatch(h)}finally{l=!0}}})},R4=e=>function(n){const{autoBatch:a=!0}=n??{};let l=new Nz(e);return a&&l.push(Sz(typeof a=="object"?a:void 0)),l};function I4(e){const t=q4(),{reducer:n=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(Wb(n))d=cz(n);else throw new Error(mn(1));let f;typeof a=="function"?f=a(t):f=t();let p=bm;l&&(p=P4({trace:!1,...typeof l=="object"&&l}));const h=g4(...f),v=R4(h);let b=typeof u=="function"?u(v):v();const x=p(...b);return oz(d,o,x)}function wz(e){const t={},n=[];let a;const l={addCase(o,u){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(mn(28));if(d in t)throw new Error(mn(29));return t[d]=u,l},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&n.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return n.push({matcher:o,reducer:u}),l},addDefaultCase(o){return a=o,l}};return e(l),[t,n,a]}function L4(e){return typeof e=="function"}function $4(e,t){let[n,a,l]=wz(t),o;if(L4(e))o=()=>ZS(e());else{const d=ZS(e);o=()=>d}function u(d=o(),f){let p=[n[f.type],...a.filter(({matcher:h})=>h(f)).map(({reducer:h})=>h)];return p.filter(h=>!!h).length===0&&(p=[l]),p.reduce((h,v)=>{if(v)if(Ga(h)){const x=v(h,f);return x===void 0?h:x}else{if(Vn(h))return yz(h,b=>v(b,f));{const b=v(h,f);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},d)}return u.getInitialState=o,u}var B4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",U4=(e=21)=>{let t="",n=e;for(;n--;)t+=B4[Math.random()*64|0];return t},F4=Symbol.for("rtk-slice-createasyncthunk");function G4(e,t){return`${e}/${t}`}function H4({creators:e}={}){const t=e?.asyncThunk?.[F4];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(mn(11));const u=(typeof a.reducers=="function"?a.reducers(V4()):a.reducers)||{},d=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(w,E){const D=typeof w=="string"?w:w.type;if(!D)throw new Error(mn(12));if(D in f.sliceCaseReducersByType)throw new Error(mn(13));return f.sliceCaseReducersByType[D]=E,p},addMatcher(w,E){return f.sliceMatchers.push({matcher:w,reducer:E}),p},exposeAction(w,E){return f.actionCreators[w]=E,p},exposeCaseReducer(w,E){return f.sliceCaseReducersByName[w]=E,p}};d.forEach(w=>{const E=u[w],D={reducerName:w,type:G4(l,w),createNotation:typeof a.reducers=="function"};K4(E)?X4(D,E,p,t):Y4(D,E,p)});function h(){const[w={},E=[],D=void 0]=typeof a.extraReducers=="function"?wz(a.extraReducers):[a.extraReducers],O={...w,...f.sliceCaseReducersByType};return $4(a.initialState,T=>{for(let P in O)T.addCase(P,O[P]);for(let P of f.sliceMatchers)T.addMatcher(P.matcher,P.reducer);for(let P of E)T.addMatcher(P.matcher,P.reducer);D&&T.addDefaultCase(D)})}const v=w=>w,b=new Map,x=new WeakMap;let N;function j(w,E){return N||(N=h()),N(w,E)}function S(){return N||(N=h()),N.getInitialState()}function C(w,E=!1){function D(T){let P=T[w];return typeof P>"u"&&E&&(P=Td(x,D,S)),P}function O(T=v){const P=Td(b,E,()=>new WeakMap);return Td(P,T,()=>{const I={};for(const[R,F]of Object.entries(a.selectors??{}))I[R]=Q4(F,T,()=>Td(x,T,S),E);return I})}return{reducerPath:w,getSelectors:O,get selectors(){return O(D)},selectSlice:D}}const A={name:l,reducer:j,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,...C(o),injectInto(w,{reducerPath:E,...D}={}){const O=E??o;return w.inject({reducerPath:O,reducer:j},D),{...A,...C(O,!0)}}};return A}}function Q4(e,t,n,a){function l(o,...u){let d=t(o);return typeof d>"u"&&a&&(d=n()),e(d,...u)}return l.unwrapped=e,l}var Kr=H4();function V4(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Y4({type:e,reducerName:t,createNotation:n},a,l){let o,u;if("reducer"in a){if(n&&!W4(a))throw new Error(mn(17));o=a.reducer,u=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?kn(e,u):kn(e))}function K4(e){return e._reducerDefinitionType==="asyncThunk"}function W4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function X4({type:e,reducerName:t},n,a,l){if(!l)throw new Error(mn(18));const{payloadCreator:o,fulfilled:u,pending:d,rejected:f,settled:p,options:h}=n,v=l(e,o,h);a.exposeAction(t,v),u&&a.addCase(v.fulfilled,u),d&&a.addCase(v.pending,d),f&&a.addCase(v.rejected,f),p&&a.addMatcher(v.settled,p),a.exposeCaseReducer(t,{fulfilled:u||qd,pending:d||qd,rejected:f||qd,settled:p||qd})}function qd(){}var Z4="task",Cz="listener",Ez="completed",ey="cancelled",J4=`task-${ey}`,e6=`task-${Ez}`,Ux=`${Cz}-${ey}`,t6=`${Cz}-${Ez}`,Af=class{constructor(e){this.code=e,this.message=`${Z4} ${ey} (reason: ${e})`}name="TaskAbortError";message},ty=(e,t)=>{if(typeof e!="function")throw new TypeError(mn(32))},Cm=()=>{},Az=(e,t=Cm)=>(e.catch(t),e),zz=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Os=e=>{if(e.aborted)throw new Af(e.reason)};function Oz(e,t){let n=Cm;return new Promise((a,l)=>{const o=()=>l(new Af(e.reason));if(e.aborted){o();return}n=zz(e,o),t.finally(()=>n()).then(a,l)}).finally(()=>{n=Cm})}var r6=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Af?"cancelled":"rejected",error:n}}finally{t?.()}},Em=e=>t=>Az(Oz(e,t).then(n=>(Os(e),n))),Dz=e=>{const t=Em(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:Jl}=Object,ew={},zf="listenerMiddleware",n6=(e,t)=>{const n=a=>zz(e,()=>a.abort(e.reason));return(a,l)=>{ty(a);const o=new AbortController;n(o);const u=r6(async()=>{Os(e),Os(o.signal);const d=await a({pause:Em(o.signal),delay:Dz(o.signal),signal:o.signal});return Os(o.signal),d},()=>o.abort(e6));return l?.autoJoin&&t.push(u.catch(Cm)),{result:Em(e)(u),cancel(){o.abort(J4)}}}},a6=(e,t)=>{const n=async(a,l)=>{Os(t);let o=()=>{};const d=[new Promise((f,p)=>{let h=e({predicate:a,effect:(v,b)=>{b.unsubscribe(),f([v,b.getState(),b.getOriginalState()])}});o=()=>{h(),p()}})];l!=null&&d.push(new Promise(f=>setTimeout(f,l,null)));try{const f=await Oz(t,Promise.race(d));return Os(t),f}finally{o()}};return(a,l)=>Az(n(a,l))},Mz=e=>{let{type:t,actionCreator:n,matcher:a,predicate:l,effect:o}=e;if(t)l=kn(t).match;else if(n)t=n.type,l=n.match;else if(a)l=a;else if(!l)throw new Error(mn(21));return ty(o),{predicate:l,type:t,effect:o}},kz=Jl(e=>{const{type:t,predicate:n,effect:a}=Mz(e);return{id:U4(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(mn(22))}}},{withTypes:()=>kz}),tw=(e,t)=>{const{type:n,effect:a,predicate:l}=Mz(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===l)&&o.effect===a)},Fx=e=>{e.pending.forEach(t=>{t.abort(Ux)})},i6=(e,t)=>()=>{for(const n of t.keys())Fx(n);e.clear()},rw=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},Pz=Jl(kn(`${zf}/add`),{withTypes:()=>Pz}),s6=kn(`${zf}/removeAll`),Tz=Jl(kn(`${zf}/remove`),{withTypes:()=>Tz}),l6=(...e)=>{console.error(`${zf}/error`,...e)},tu=(e={})=>{const t=new Map,n=new Map,a=x=>{const N=n.get(x)??0;n.set(x,N+1)},l=x=>{const N=n.get(x)??1;N===1?n.delete(x):n.set(x,N-1)},{extra:o,onError:u=l6}=e;ty(u);const d=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),N=>{x.unsubscribe(),N?.cancelActive&&Fx(x)}),f=x=>{const N=tw(t,x)??kz(x);return d(N)};Jl(f,{withTypes:()=>f});const p=x=>{const N=tw(t,x);return N&&(N.unsubscribe(),x.cancelActive&&Fx(N)),!!N};Jl(p,{withTypes:()=>p});const h=async(x,N,j,S)=>{const C=new AbortController,A=a6(f,C.signal),w=[];try{x.pending.add(C),a(x),await Promise.resolve(x.effect(N,Jl({},j,{getOriginalState:S,condition:(E,D)=>A(E,D).then(Boolean),take:A,delay:Dz(C.signal),pause:Em(C.signal),extra:o,signal:C.signal,fork:n6(C.signal,w),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((E,D,O)=>{E!==C&&(E.abort(Ux),O.delete(E))})},cancel:()=>{C.abort(Ux),x.pending.delete(C)},throwIfCancelled:()=>{Os(C.signal)}})))}catch(E){E instanceof Af||rw(u,E,{raisedBy:"effect"})}finally{await Promise.all(w),C.abort(t6),l(x),x.pending.delete(C)}},v=i6(t,n);return{middleware:x=>N=>j=>{if(!uz(j))return N(j);if(Pz.match(j))return f(j.payload);if(s6.match(j)){v();return}if(Tz.match(j))return p(j.payload);let S=x.getState();const C=()=>{if(S===ew)throw new Error(mn(23));return S};let A;try{if(A=N(j),t.size>0){const w=x.getState(),E=Array.from(t.values());for(const D of E){let O=!1;try{O=D.predicate(j,w,S)}catch(T){O=!1,rw(u,T,{raisedBy:"predicate"})}O&&h(D,j,x,C)}}}finally{S=ew}return A},startListening:f,stopListening:p,clearListeners:v}};function mn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var o6={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},qz=Kr({name:"chartLayout",initialState:o6,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,l,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:c6,setLayout:u6,setChartSize:d6,setScale:m6}=qz.actions,f6=qz.reducer;function Rz(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function at(e){return Number.isFinite(e)}function fa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Wl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(n),!0).forEach(function(a){p6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function p6(e,t,n){return(t=h6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h6(e){var t=v6(e,"string");return typeof t=="symbol"?t:t+""}function v6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zt(e,t,n){return Tt(e)||Tt(t)?n:ma(t)?no(e,t,n):typeof t=="function"?t(e):n}var g6=(e,t,n)=>{if(t&&n){var{width:a,height:l}=n,{align:o,verticalAlign:u,layout:d}=t;if((d==="vertical"||d==="horizontal"&&u==="middle")&&o!=="center"&&Ae(e[o]))return Wl(Wl({},e),{},{[o]:e[o]+(a||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&u!=="middle"&&Ae(e[u]))return Wl(Wl({},e),{},{[u]:e[u]+(l||0)})}return e},Ja=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Iz=(e,t,n,a)=>{if(a)return e.map(d=>d.coordinate);var l,o,u=e.map(d=>(d.coordinate===t&&(l=!0),d.coordinate===n&&(o=!0),d.coordinate));return l||u.push(t),o||u.push(n),u},Lz=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:l,range:o,scale:u,realScaleType:d,isCategorical:f,categoricalDomain:p,tickCount:h,ticks:v,niceTicks:b,axisType:x}=e;if(!u)return null;var N=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,j=l==="category"&&u.bandwidth?u.bandwidth()/N:0;if(j=x==="angleAxis"&&o&&o.length>=2?Qr(o[0]-o[1])*2*j:j,v||b){var S=(v||b||[]).map((C,A)=>{var w=a?a.indexOf(C):C,E=u.map(w);return at(E)?{coordinate:E+j,value:C,offset:j,index:A}:null}).filter(Vr);return S}return f&&p?p.map((C,A)=>{var w=u.map(C);return at(w)?{coordinate:w+j,value:C,index:A,offset:j}:null}).filter(Vr):u.ticks&&h!=null?u.ticks(h).map((C,A)=>{var w=u.map(C);return at(w)?{coordinate:w+j,value:C,index:A,offset:j}:null}).filter(Vr):u.domain().map((C,A)=>{var w=u.map(C);return at(w)?{coordinate:w+j,value:a?a[C]:C,index:A,offset:j}:null}).filter(Vr)},x6=(e,t)=>{if(!t||t.length!==2||!Ae(t[0])||!Ae(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!Ae(e[0])||e[0]<n)&&(l[0]=n),(!Ae(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<n&&(l[1]=n),l},b6=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0,d=0;d<n;++d){var f=e[d],p=f?.[l];if(p!=null){var h=p[1],v=p[0],b=da(h)?v:h;b>=0?(p[0]=o,o+=b,p[1]=o):(p[0]=u,u+=b,p[1]=u)}}}},y6=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0;u<n;++u){var d=e[u],f=d?.[l];if(f!=null){var p=da(f[1])?f[0]:f[1];p>=0?(f[0]=o,o+=p,f[1]=o):(f[0]=0,f[1]=0)}}}},j6={sign:b6,expand:K5,none:ks,silhouette:W5,wiggle:X5,positive:y6},N6=(e,t,n)=>{var a,l=(a=j6[n])!==null&&a!==void 0?a:ks,o=Y5().keys(t).value((d,f)=>Number(Zt(d,f,0))).order(Mx).offset(l),u=o(e);return u.forEach((d,f)=>{d.forEach((p,h)=>{var v=Zt(e[h],t[f],0);Array.isArray(v)&&v.length===2&&Ae(v[0])&&Ae(v[1])&&(p[0]=v[0],p[1]=v[1])})}),u};function _6(e){return e==null?void 0:String(e)}function aw(e){var{axis:t,ticks:n,bandSize:a,entry:l,index:o,dataKey:u}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Tt(l[t.dataKey])){var d=QA(n,"value",l[t.dataKey]);if(d)return d.coordinate+a/2}return n!=null&&n[o]?n[o].coordinate+a/2:null}var f=Zt(l,Tt(u)?t.dataKey:u),p=t.scale.map(f);return Ae(p)?p:null}var iw=e=>{var{axis:t,ticks:n,offset:a,bandSize:l,entry:o,index:u}=e;if(t.type==="category")return n[u]?n[u].coordinate+a:null;var d=Zt(o,t.dataKey,t.scale.domain()[u]);if(Tt(d))return null;var f=t.scale.map(d);return Ae(f)?f-l/2+a:null},S6=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var a=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return a<=0&&l>=0?0:l<0?l:a}return n[0]},w6=e=>{var t=e.flat(2).filter(Ae);return[Math.min(...t),Math.max(...t)]},C6=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],E6=(e,t,n)=>{if(e!=null)return C6(Object.keys(e).reduce((a,l)=>{var o=e[l];if(!o)return a;var{stackedData:u}=o,d=u.reduce((f,p)=>{var h=Rz(p,t,n),v=w6(h);return!at(v[0])||!at(v[1])?f:[Math.min(f[0],v[0]),Math.max(f[1],v[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]))},sw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,io=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var l=yf(t,h=>h.coordinate),o=1/0,u=1,d=l.length;u<d;u++){var f=l[u],p=l[u-1];o=Math.min((f?.coordinate||0)-(p?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function ow(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:l,name:o}=e;return Wl(Wl({},t),{},{dataKey:n,payload:a,value:l,name:o})}function Of(e,t){if(e)return String(e);if(typeof t=="string")return t}var A6=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},z6=(e,t)=>t==="centric"?e.angle:e.radius,ei=e=>e.layout.width,ti=e=>e.layout.height,O6=e=>e.layout.scale,$z=e=>e.layout.margin,Df=oe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Mf=oe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),D6="data-recharts-item-index",M6="data-recharts-item-id",ru=60;function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(a){k6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function k6(e,t,n){return(t=P6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P6(e){var t=T6(e,"string");return typeof t=="symbol"?t:t+""}function T6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q6=e=>e.brush.height;function R6(e){var t=Mf(e);return t.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:ru;return n+l}return n},0)}function I6(e){var t=Mf(e);return t.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:ru;return n+l}return n},0)}function L6(e){var t=Df(e);return t.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function $6(e){var t=Df(e);return t.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var dr=oe([ei,ti,$z,q6,R6,I6,L6,$6,lz,d4],(e,t,n,a,l,o,u,d,f,p)=>{var h={left:(n.left||0)+l,right:(n.right||0)+o},v={top:(n.top||0)+u,bottom:(n.bottom||0)+d},b=Rd(Rd({},v),h),x=b.bottom;b.bottom+=a,b=g6(b,f,p);var N=e-b.left-b.right,j=t-b.top-b.bottom;return Rd(Rd({brushBottom:x},b),{},{width:Math.max(N,0),height:Math.max(j,0)})}),B6=oe(dr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ry=oe(ei,ti,(e,t)=>({x:0,y:0,width:e,height:t})),U6=g.createContext(null),Ar=()=>g.useContext(U6)!=null,kf=e=>e.brush,Pf=oe([kf,dr,$z],(e,t,n)=>({height:e.height,x:Ae(e.x)?e.x:t.left,y:Ae(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Ae(e.width)?e.width:t.width})),Lg={},$g={},Bg={},uw;function F6(){return uw||(uw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:l,edges:o}={}){let u,d=null;const f=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),h=()=>{d!==null&&(n.apply(u,d),u=void 0,d=null)},v=()=>{p&&h(),j()};let b=null;const x=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,v()},a)},N=()=>{b!==null&&(clearTimeout(b),b=null)},j=()=>{N(),u=void 0,d=null},S=()=>{h()},C=function(...A){if(l?.aborted)return;u=this,d=A;const w=b==null;x(),f&&w&&h()};return C.schedule=x,C.cancel=j,C.flush=S,l?.addEventListener("abort",j,{once:!0}),C}e.debounce=t})(Bg)),Bg}var dw;function G6(){return dw||(dw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F6();function n(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:d=!0,maxWait:f}=o,p=Array(2);u&&(p[0]="leading"),d&&(p[1]="trailing");let h,v=null;const b=t.debounce(function(...j){h=a.apply(this,j),v=null},l,{edges:p}),x=function(...j){return f!=null&&(v===null&&(v=Date.now()),Date.now()-v>=f)?(h=a.apply(this,j),v=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,j),h)},N=()=>(b.flush(),h);return x.cancel=b.cancel,x.flush=N,x}e.debounce=n})($g)),$g}var mw;function H6(){return mw||(mw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G6();function n(a,l=0,o={}){const{leading:u=!0,trailing:d=!0}=o;return t.debounce(a,l,{leading:u,maxWait:l,trailing:d})}e.throttle=n})(Lg)),Lg}var Ug,fw;function Q6(){return fw||(fw=1,Ug=H6().throttle),Ug}var V6=Q6();const Y6=Xa(V6);var Am=function(t,n){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(n.replace(/%s/g,()=>l[u++]))}},la={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},Bz=(e,t,n)=>{var{width:a=la.width,height:l=la.height,aspect:o,maxHeight:u}=n,d=Ps(a)?e:Number(a),f=Ps(l)?t:Number(l);return o&&o>0&&(d?f=d/o:f&&(d=f*o),u&&f!=null&&f>u&&(f=u)),{calculatedWidth:d,calculatedHeight:f}},K6={width:0,height:0,overflow:"visible"},W6={width:0,overflowX:"visible"},X6={height:0,overflowY:"visible"},Z6={},J6=e=>{var{width:t,height:n}=e,a=Ps(t),l=Ps(n);return a&&l?K6:a?W6:l?X6:Z6};function eL(e){var{width:t,height:n,aspect:a}=e,l=t,o=n;return l===void 0&&o===void 0?(l=la.width,o=la.height):l===void 0?l=a&&a>0?void 0:la.width:o===void 0&&(o=a&&a>0?void 0:la.height),{width:l,height:o}}function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gx.apply(null,arguments)}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(a){tL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tL(e,t,n){return(t=rL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rL(e){var t=nL(e,"string");return typeof t=="symbol"?t:t+""}function nL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uz=g.createContext(la.initialDimension);function aL(e){return fa(e.width)&&fa(e.height)}function Fz(e){var{children:t,width:n,height:a}=e,l=g.useMemo(()=>({width:n,height:a}),[n,a]);return aL(l)?g.createElement(Uz.Provider,{value:l},t):null}var ny=()=>g.useContext(Uz),iL=g.forwardRef((e,t)=>{var{aspect:n,initialDimension:a=la.initialDimension,width:l,height:o,minWidth:u=la.minWidth,minHeight:d,maxHeight:f,children:p,debounce:h=la.debounce,id:v,className:b,onResize:x,style:N={}}=e,j=g.useRef(null),S=g.useRef();S.current=x,g.useImperativeHandle(t,()=>j.current);var[C,A]=g.useState({containerWidth:a.width,containerHeight:a.height}),w=g.useCallback((P,I)=>{A(R=>{var F=Math.round(P),B=Math.round(I);return R.containerWidth===F&&R.containerHeight===B?R:{containerWidth:F,containerHeight:B}})},[]);g.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Gs;var P=B=>{var G,V=B[0];if(V!=null){var{width:M,height:q}=V.contentRect;w(M,q),(G=S.current)===null||G===void 0||G.call(S,M,q)}};h>0&&(P=Y6(P,h,{trailing:!0,leading:!1}));var I=new ResizeObserver(P),{width:R,height:F}=j.current.getBoundingClientRect();return w(R,F),I.observe(j.current),()=>{I.disconnect()}},[w,h]);var{containerWidth:E,containerHeight:D}=C;Am(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:O,calculatedHeight:T}=Bz(E,D,{width:l,height:o,aspect:n,maxHeight:f});return Am(O!=null&&O>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,T,l,o,u,d,n),g.createElement("div",{id:v?"".concat(v):void 0,className:jt("recharts-responsive-container",b),style:hw(hw({},N),{},{width:l,height:o,minWidth:u,minHeight:d,maxHeight:f}),ref:j},g.createElement("div",{style:J6({width:l,height:o})},g.createElement(Fz,{width:O,height:T},p)))}),vw=g.forwardRef((e,t)=>{var n=ny();if(fa(n.width)&&fa(n.height))return e.children;var{width:a,height:l}=eL({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=Bz(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Ae(o)&&Ae(u)?g.createElement(Fz,{width:o,height:u},e.children):g.createElement(iL,Gx({},e,{width:a,height:l,ref:t}))});function ay(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Tf=()=>{var e,t=Ar(),n=Te(B6),a=Te(Pf),l=(e=Te(kf))===null||e===void 0?void 0:e.padding;return!t||!a||!l?n:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},sL={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Gz=()=>{var e;return(e=Te(dr))!==null&&e!==void 0?e:sL},Hz=()=>Te(ei),Qz=()=>Te(ti),ht=e=>e.layout.layoutType,Hs=()=>Te(ht),Vz=()=>{var e=Hs();if(e==="horizontal"||e==="vertical")return e},Yz=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},lL=()=>{var e=Hs();return e!==void 0},nu=e=>{var t=Qt(),n=Ar(),{width:a,height:l}=e,o=ny(),u=a,d=l;return o&&(u=o.width>0?o.width:a,d=o.height>0?o.height:l),g.useEffect(()=>{!n&&fa(u)&&fa(d)&&t(d6({width:u,height:d}))},[t,n,u,d]),null},Kz=Symbol.for("immer-nothing"),gw=Symbol.for("immer-draftable"),fn=Symbol.for("immer-state");function Un(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ic=Object.getPrototypeOf;function so(e){return!!e&&!!e[fn]}function qs(e){return e?Wz(e)||Array.isArray(e)||!!e[gw]||!!e.constructor?.[gw]||au(e)||Rf(e):!1}var oL=Object.prototype.constructor.toString(),xw=new WeakMap;function Wz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=xw.get(n);return a===void 0&&(a=Function.toString.call(n),xw.set(n,a)),a===oL}function zm(e,t,n=!0){qf(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function qf(e){const t=e[fn];return t?t.type_:Array.isArray(e)?1:au(e)?2:Rf(e)?3:0}function Hx(e,t){return qf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Xz(e,t,n){const a=qf(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function cL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function au(e){return e instanceof Map}function Rf(e){return e instanceof Set}function js(e){return e.copy_||e.base_}function Qx(e,t){if(au(e))return new Map(e);if(Rf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Wz(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[fn];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(a[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(Ic(e),a)}else{const a=Ic(e);if(a!==null&&n)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function iy(e,t=!1){return If(e)||so(e)||!qs(e)||(qf(e)>1&&Object.defineProperties(e,{set:Id,add:Id,clear:Id,delete:Id}),Object.freeze(e),t&&Object.values(e).forEach(n=>iy(n,!0))),e}function uL(){Un(2)}var Id={value:uL};function If(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var dL={};function Rs(e){const t=dL[e];return t||Un(0,e),t}var Lc;function Zz(){return Lc}function mL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function bw(e,t){t&&(Rs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Vx(e){Yx(e),e.drafts_.forEach(fL),e.drafts_=null}function Yx(e){e===Lc&&(Lc=e.parent_)}function yw(e){return Lc=mL(Lc,e)}function fL(e){const t=e[fn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function jw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[fn].modified_&&(Vx(t),Un(4)),qs(e)&&(e=Om(t,e),t.parent_||Dm(t,e)),t.patches_&&Rs("Patches").generateReplacementPatches_(n[fn].base_,e,t.patches_,t.inversePatches_)):e=Om(t,n,[]),Vx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Kz?e:void 0}function Om(e,t,n){if(If(t))return t;const a=e.immer_.shouldUseStrictIteration(),l=t[fn];if(!l)return zm(t,(o,u)=>Nw(e,l,t,o,u,n),a),t;if(l.scope_!==e)return t;if(!l.modified_)return Dm(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,d=!1;l.type_===3&&(u=new Set(o),o.clear(),d=!0),zm(u,(f,p)=>Nw(e,l,o,f,p,n,d),a),Dm(e,o,!1),n&&e.patches_&&Rs("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function Nw(e,t,n,a,l,o,u){if(l==null||typeof l!="object"&&!u)return;const d=If(l);if(!(d&&!u)){if(so(l)){const f=o&&t&&t.type_!==3&&!Hx(t.assigned_,a)?o.concat(a):void 0,p=Om(e,l,f);if(Xz(n,a,p),so(p))e.canAutoFreeze_=!1;else return}else u&&n.add(l);if(qs(l)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===l&&d)return;Om(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(au(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&Dm(e,l)}}}function Dm(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&iy(t,n)}function pL(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:Zz(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=sy;n&&(l=[a],o=$c);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,d}var sy={get(e,t){if(t===fn)return e;const n=js(e);if(!Hx(n,t))return hL(e,n,t);const a=n[t];return e.finalized_||!qs(a)?a:a===Fg(e.base_,t)?(Gg(e),e.copy_[t]=Wx(a,e)):a},has(e,t){return t in js(e)},ownKeys(e){return Reflect.ownKeys(js(e))},set(e,t,n){const a=Jz(js(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Fg(js(e),t),o=l?.[fn];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(cL(n,l)&&(n!==void 0||Hx(e.base_,t)))return!0;Gg(e),Kx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Fg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Gg(e),Kx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=js(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){Un(11)},getPrototypeOf(e){return Ic(e.base_)},setPrototypeOf(){Un(12)}},$c={};zm(sy,(e,t)=>{$c[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$c.deleteProperty=function(e,t){return $c.set.call(this,e,t,void 0)};$c.set=function(e,t,n){return sy.set.call(this,e[0],t,n,e[0])};function Fg(e,t){const n=e[fn];return(n?js(n):e)[t]}function hL(e,t,n){const a=Jz(t,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function Jz(e,t){if(!(t in e))return;let n=Ic(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Ic(n)}}function Kx(e){e.modified_||(e.modified_=!0,e.parent_&&Kx(e.parent_))}function Gg(e){e.copy_||(e.copy_=Qx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const u=this;return function(f=o,...p){return u.produce(f,h=>n.call(this,h,...p))}}typeof n!="function"&&Un(6),a!==void 0&&typeof a!="function"&&Un(7);let l;if(qs(t)){const o=yw(this),u=Wx(t,void 0);let d=!0;try{l=n(u),d=!1}finally{d?Vx(o):Yx(o)}return bw(o,a),jw(l,o)}else if(!t||typeof t!="object"){if(l=n(t),l===void 0&&(l=t),l===Kz&&(l=void 0),this.autoFreeze_&&iy(l,!0),a){const o=[],u=[];Rs("Patches").generateReplacementPatches_(t,l,o,u),a(o,u)}return l}else Un(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(u,...d)=>this.produceWithPatches(u,f=>t(f,...d));let a,l;return[this.produce(t,n,(u,d)=>{a=u,l=d}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){qs(e)||Un(8),so(e)&&(e=gL(e));const t=yw(this),n=Wx(e,void 0);return n[fn].isManual_=!0,Yx(t),n}finishDraft(e,t){const n=e&&e[fn];(!n||!n.isManual_)&&Un(9);const{scope_:a}=n;return bw(a,t),jw(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const l=t[n];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}n>-1&&(t=t.slice(n+1));const a=Rs("Patches").applyPatches_;return so(e)?a(e,t):this.produce(e,l=>a(l,t))}};function Wx(e,t){const n=au(e)?Rs("MapSet").proxyMap_(e,t):Rf(e)?Rs("MapSet").proxySet_(e,t):pL(e,t);return(t?t.scope_:Zz()).drafts_.push(n),n}function gL(e){return so(e)||Un(10,e),eO(e)}function eO(e){if(!qs(e)||If(e))return e;const t=e[fn];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Qx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Qx(e,!0);return zm(n,(l,o)=>{Xz(n,l,eO(o))},a),t&&(t.finalized_=!1),n}var xL=new vL;xL.produce;var bL={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tO=Kr({name:"legend",initialState:bL,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ot()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,l=Gn(e).payload.indexOf(n);l>-1&&(e.payload[l]=a)},prepare:Ot()},removeLegendPayload:{reducer(e,t){var n=Gn(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Ot()}}}),{setLegendSize:Cee,setLegendSettings:Eee,addLegendPayload:yL,replaceLegendPayload:jL,removeLegendPayload:NL}=tO.actions,_L=tO.reducer;function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xx.apply(null,arguments)}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(a){SL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SL(e,t,n){return(t=wL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wL(e){var t=CL(e,"string");return typeof t=="symbol"?t:t+""}function CL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EL(e){return Array.isArray(e)&&ma(e[0])&&ma(e[1])?e.join(" ~ "):e}var $l={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},AL=e=>{var{separator:t=$l.separator,contentStyle:n,itemStyle:a,labelStyle:l=$l.labelStyle,payload:o,formatter:u,itemSorter:d,wrapperClassName:f,labelClassName:p,label:h,labelFormatter:v,accessibilityLayer:b=$l.accessibilityLayer}=e,x=()=>{if(o&&o.length){var D={padding:0,margin:0},O=(d?yf(o,d):o).map((T,P)=>{if(T.type==="none")return null;var I=T.formatter||u||EL,{value:R,name:F}=T,B=R,G=F;if(I){var V=I(R,F,T,P,o);if(Array.isArray(V))[B,G]=V;else if(V!=null)B=V;else return null}var M=fc(fc({},$l.itemStyle),{},{color:T.color||$l.itemStyle.color},a);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:M},ma(G)?g.createElement("span",{className:"recharts-tooltip-item-name"},G):null,ma(G)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},B),g.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:D},O)}return null},N=fc(fc({},$l.contentStyle),n),j=fc({margin:0},l),S=!Tt(h),C=S?h:"",A=jt("recharts-default-tooltip",f),w=jt("recharts-tooltip-label",p);S&&v&&o!==void 0&&o!==null&&(C=v(h,o));var E=b?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",Xx({className:A,style:N},E),g.createElement("p",{className:w,style:j},g.isValidElement(C)?C:"".concat(C)),x())},pc="recharts-tooltip-wrapper",zL={visibility:"hidden"};function OL(e){var{coordinate:t,translateX:n,translateY:a}=e;return jt(pc,{["".concat(pc,"-right")]:Ae(n)&&t&&Ae(t.x)&&n>=t.x,["".concat(pc,"-left")]:Ae(n)&&t&&Ae(t.x)&&n<t.x,["".concat(pc,"-bottom")]:Ae(a)&&t&&Ae(t.y)&&a>=t.y,["".concat(pc,"-top")]:Ae(a)&&t&&Ae(t.y)&&a<t.y})}function Sw(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offset:l,position:o,reverseDirection:u,tooltipDimension:d,viewBox:f,viewBoxDimension:p}=e;if(o&&Ae(o[a]))return o[a];var h=n[a]-d-(l>0?l:0),v=n[a]+l;if(t[a])return u[a]?h:v;var b=f[a];if(b==null)return 0;if(u[a]){var x=h,N=b;return x<N?Math.max(v,b):Math.max(h,b)}if(p==null)return 0;var j=v+d,S=b+p;return j>S?Math.max(h,b):Math.max(v,b)}function DL(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function ML(e){var{allowEscapeViewBox:t,coordinate:n,offsetTop:a,offsetLeft:l,position:o,reverseDirection:u,tooltipBox:d,useTranslate3d:f,viewBox:p}=e,h,v,b;return d.height>0&&d.width>0&&n?(v=Sw({allowEscapeViewBox:t,coordinate:n,key:"x",offset:l,position:o,reverseDirection:u,tooltipDimension:d.width,viewBox:p,viewBoxDimension:p.width}),b=Sw({allowEscapeViewBox:t,coordinate:n,key:"y",offset:a,position:o,reverseDirection:u,tooltipDimension:d.height,viewBox:p,viewBoxDimension:p.height}),h=DL({translateX:v,translateY:b,useTranslate3d:f})):h=zL,{cssProperties:h,cssClasses:OL({translateX:v,translateY:b,coordinate:n})}}function ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(n),!0).forEach(function(a){Zx(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ww(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Zx(e,t,n){return(t=kL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kL(e){var t=PL(e,"string");return typeof t=="symbol"?t:t+""}function PL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TL extends g.PureComponent{constructor(){super(...arguments),Zx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Zx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:l,children:o,coordinate:u,hasPayload:d,isAnimationActive:f,offset:p,position:h,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:N,lastBoundingBox:j,innerRef:S,hasPortalFromProps:C}=this.props,A=typeof p=="number"?p:p.x,w=typeof p=="number"?p:p.y,{cssClasses:E,cssProperties:D}=ML({allowEscapeViewBox:n,coordinate:u,offsetLeft:A,offsetTop:w,position:h,reverseDirection:v,tooltipBox:{height:j.height,width:j.width},useTranslate3d:b,viewBox:x}),O=C?{}:Ld(Ld({transition:f&&t?"transform ".concat(a,"ms ").concat(l):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),T=Ld(Ld({},O),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},N);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:T,ref:S},o)}}var rO=()=>{var e;return(e=Te(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jx.apply(null,arguments)}function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(a){qL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qL(e,t,n){return(t=RL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RL(e){var t=IL(e,"string");return typeof t=="symbol"?t:t+""}function IL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aw={curveBasisClosed:R5,curveBasisOpen:I5,curveBasis:q5,curveBumpX:N5,curveBumpY:_5,curveLinearClosed:L5,curveLinear:xf,curveMonotoneX:$5,curveMonotoneY:B5,curveNatural:U5,curveStep:F5,curveStepAfter:H5,curveStepBefore:G5},Mm=e=>at(e.x)&&at(e.y),zw=e=>e.base!=null&&Mm(e.base)&&Mm(e),hc=e=>e.x,vc=e=>e.y,LL=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Jc(e));if((n==="curveMonotone"||n==="curveBump")&&t){var a=Aw["".concat(n).concat(t==="vertical"?"Y":"X")];if(a)return a}return Aw[n]||xf},Ow={connectNulls:!1,type:"linear"},$L=e=>{var{type:t=Ow.type,points:n=[],baseLine:a,layout:l,connectNulls:o=Ow.connectNulls}=e,u=LL(t,l),d=o?n.filter(Mm):n;if(Array.isArray(a)){var f,p=n.map((N,j)=>Ew(Ew({},N),{},{base:a[j]}));l==="vertical"?f=Dd().y(vc).x1(hc).x0(N=>N.base.x):f=Dd().x(hc).y1(vc).y0(N=>N.base.y);var h=f.defined(zw).curve(u),v=o?p.filter(zw):p;return h(v)}var b;l==="vertical"&&Ae(a)?b=Dd().y(vc).x1(hc).x0(a):Ae(a)?b=Dd().x(hc).y1(vc).y0(a):b=kA().x(hc).y(vc);var x=b.defined(Mm).curve(u);return x(d)},nO=e=>{var{className:t,points:n,path:a,pathRef:l}=e,o=Hs();if((!n||!n.length)&&!a)return null;var u={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},d=n&&n.length?$L(u):a;return g.createElement("path",Jx({},Hn(e),Hb(e),{className:jt("recharts-curve",t),d:d===null?void 0:d,ref:l}))},BL=["x","y","top","left","width","height","className"];function eb(){return eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eb.apply(null,arguments)}function Dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function UL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dw(Object(n),!0).forEach(function(a){FL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FL(e,t,n){return(t=GL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GL(e){var t=HL(e,"string");return typeof t=="symbol"?t:t+""}function HL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QL(e,t){if(e==null)return{};var n,a,l=VL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function VL(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var YL=(e,t,n,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(n),KL=e=>{var{x:t=0,y:n=0,top:a=0,left:l=0,width:o=0,height:u=0,className:d}=e,f=QL(e,BL),p=UL({x:t,y:n,top:a,left:l,width:o,height:u},f);return!Ae(t)||!Ae(n)||!Ae(o)||!Ae(u)||!Ae(a)||!Ae(l)?null:g.createElement("path",eb({},kr(p),{className:jt("recharts-cross",d),d:YL(t,n,o,u,a,l)}))};function WL(e,t,n,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-l,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function kw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(n),!0).forEach(function(a){XL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XL(e,t,n){return(t=ZL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZL(e){var t=JL(e,"string");return typeof t=="symbol"?t:t+""}function JL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),aO=(e,t,n)=>e.map(a=>"".concat(e8(a)," ").concat(t,"ms ").concat(n)).join(","),t8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(l=>a.includes(l))),Bc=(e,t)=>Object.keys(t).reduce((n,a)=>kw(kw({},n),{},{[a]:e(a,t[a])}),{});function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(n),!0).forEach(function(a){r8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function r8(e,t,n){return(t=n8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n8(e){var t=a8(e,"string");return typeof t=="symbol"?t:t+""}function a8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var km=(e,t,n)=>e+(t-e)*n,tb=e=>{var{from:t,to:n}=e;return t!==n},iO=(e,t,n)=>{var a=Bc((l,o)=>{if(tb(o)){var[u,d]=e(o.from,o.to,o.velocity);return tr(tr({},o),{},{from:u,velocity:d})}return o},t);return n<1?Bc((l,o)=>tb(o)&&a[l]!=null?tr(tr({},o),{},{velocity:km(o.velocity,a[l].velocity,n),from:km(o.from,a[l].from,n)}):o,t):iO(e,a,n-1)};function i8(e,t,n,a,l,o){var u,d=a.reduce((b,x)=>tr(tr({},b),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),f=()=>Bc((b,x)=>x.from,d),p=()=>!Object.values(d).filter(tb).length,h=null,v=b=>{u||(u=b);var x=b-u,N=x/n.dt;d=iO(n,d,N),l(tr(tr(tr({},e),t),f())),u=b,p()||(h=o.setTimeout(v))};return()=>(h=o.setTimeout(v),()=>{var b;(b=h)===null||b===void 0||b()})}function s8(e,t,n,a,l,o,u){var d=null,f=l.reduce((v,b)=>{var x=e[b],N=t[b];return x==null||N==null?v:tr(tr({},v),{},{[b]:[x,N]})},{}),p,h=v=>{p||(p=v);var b=(v-p)/a,x=Bc((j,S)=>km(...S,n(b)),f);if(o(tr(tr(tr({},e),t),x)),b<1)d=u.setTimeout(h);else{var N=Bc((j,S)=>km(...S,n(1)),f);o(tr(tr(tr({},e),t),N))}};return()=>(d=u.setTimeout(h),()=>{var v;(v=d)===null||v===void 0||v()})}const l8=(e,t,n,a,l,o)=>{var u=t8(e,t);return n==null?()=>(l(tr(tr({},e),t)),()=>{}):n.isStepper===!0?i8(e,t,n,u,l,o):s8(e,t,n,a,u,l,o)};var Pm=1e-4,sO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],lO=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),Tw=(e,t)=>n=>{var a=sO(e,t);return lO(a,n)},o8=(e,t)=>n=>{var a=sO(e,t),l=[...a.map((o,u)=>o*u).slice(1),0];return lO(l,n)},c8=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var a=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var l=a.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},u8=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=c8(n[0]);if(l)return l}}return n.length===4?n:[0,0,1,1]},d8=(e,t,n,a)=>{var l=Tw(e,n),o=Tw(t,a),u=o8(e,n),d=p=>p>1?1:p<0?0:p,f=p=>{for(var h=p>1?1:p,v=h,b=0;b<8;++b){var x=l(v)-h,N=u(v);if(Math.abs(x-h)<Pm||N<Pm)return o(v);v=d(v-x/N)}return o(v)};return f.isStepper=!1,f},qw=function(){return d8(...u8(...arguments))},m8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:l=17}=t,o=(u,d,f)=>{var p=-(u-d)*n,h=f*a,v=f+(p-h)*l/1e3,b=f*l/1e3+u;return Math.abs(b-d)<Pm&&Math.abs(v)<Pm?[d,0]:[b,v]};return o.isStepper=!0,o.dt=l,o},f8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qw(e);case"spring":return m8();default:if(e.split("(")[0]==="cubic-bezier")return qw(e)}return typeof e=="function"?e:null};function p8(e){var t,n=()=>null,a=!1,l=null,o=u=>{if(!a){if(Array.isArray(u)){if(!u.length)return;var d=u,[f,...p]=d;if(typeof f=="number"){l=e.setTimeout(o.bind(null,p),f);return}o(f),l=e.setTimeout(o.bind(null,p));return}typeof u=="string"&&(t=u,n(t)),typeof u=="object"&&(t=u,n(t)),typeof u=="function"&&u()}};return{stop:()=>{a=!0},start:u=>{a=!1,l&&(l(),l=null),o(u)},subscribe:u=>(n=u,()=>{n=()=>null}),getTimeoutController:()=>e}}class h8{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=u=>{u-a>=n?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function v8(){return p8(new h8)}var g8=g.createContext(v8);function x8(e,t){var n=g.useContext(g8);return g.useMemo(()=>t??n(e),[e,t,n])}var b8=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Lf={isSsr:b8()},y8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Rw={t:0},Hg={t:1};function $f(e){var t=Tr(e,y8),{isActive:n,canBegin:a,duration:l,easing:o,begin:u,onAnimationEnd:d,onAnimationStart:f,children:p}=t,h=n==="auto"?!Lf.isSsr:n,v=x8(t.animationId,t.animationManager),[b,x]=g.useState(h?Rw:Hg),N=g.useRef(null);return g.useEffect(()=>{h||x(Hg)},[h]),g.useEffect(()=>{if(!h||!a)return Gs;var j=l8(Rw,Hg,f8(o),l,x,v.getTimeoutController()),S=()=>{N.current=j()};return v.start([f,u,S,l,d]),()=>{v.stop(),N.current&&N.current(),d()}},[h,a,l,o,u,f,d,v]),p(b.t)}function Bf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=g.useRef(Pc(t)),a=g.useRef(e);return a.current!==e&&(n.current=Pc(t),a.current=e),n.current}var j8=["radius"],N8=["radius"],Iw,Lw,$w,Bw,Uw,Fw,Gw,Hw,Qw,Vw;function Yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Kw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(n),!0).forEach(function(a){_8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _8(e,t,n){return(t=S8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S8(e){var t=w8(e,"string");return typeof t=="symbol"?t:t+""}function w8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tm.apply(null,arguments)}function Ww(e,t){if(e==null)return{};var n,a,l=C8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function C8(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function na(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Xw=(e,t,n,a,l)=>{var o=Ii(n),u=Ii(a),d=Math.min(Math.abs(o)/2,Math.abs(u)/2),f=u>=0?1:-1,p=o>=0?1:-1,h=u>=0&&o>=0||u<0&&o<0?1:0,v;if(d>0&&Array.isArray(l)){for(var b=[0,0,0,0],x=0,N=4;x<N;x++){var j,S=(j=l[x])!==null&&j!==void 0?j:0;b[x]=S>d?d:S}v=Bt(Iw||(Iw=na(["M",",",""])),e,t+f*b[0]),b[0]>0&&(v+=Bt(Lw||(Lw=na(["A ",",",",0,0,",",",",",""])),b[0],b[0],h,e+p*b[0],t)),v+=Bt($w||($w=na(["L ",",",""])),e+n-p*b[1],t),b[1]>0&&(v+=Bt(Bw||(Bw=na(["A ",",",",0,0,",`,
        `,",",""])),b[1],b[1],h,e+n,t+f*b[1])),v+=Bt(Uw||(Uw=na(["L ",",",""])),e+n,t+a-f*b[2]),b[2]>0&&(v+=Bt(Fw||(Fw=na(["A ",",",",0,0,",`,
        `,",",""])),b[2],b[2],h,e+n-p*b[2],t+a)),v+=Bt(Gw||(Gw=na(["L ",",",""])),e+p*b[3],t+a),b[3]>0&&(v+=Bt(Hw||(Hw=na(["A ",",",",0,0,",`,
        `,",",""])),b[3],b[3],h,e,t+a-f*b[3])),v+="Z"}else if(d>0&&l===+l&&l>0){var C=Math.min(d,l);v=Bt(Qw||(Qw=na(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+f*C,C,C,h,e+p*C,t,e+n-p*C,t,C,C,h,e+n,t+f*C,e+n,t+a-f*C,C,C,h,e+n-p*C,t+a,e+p*C,t+a,C,C,h,e,t+a-f*C)}else v=Bt(Vw||(Vw=na(["M ",","," h "," v "," h "," Z"])),e,t,n,a,-n);return v},Zw={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oO=e=>{var t=Tr(e,Zw),n=g.useRef(null),[a,l]=g.useState(-1);g.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var X=n.current.getTotalLength();X&&l(X)}catch{}},[]);var{x:o,y:u,width:d,height:f,radius:p,className:h}=t,{animationEasing:v,animationDuration:b,animationBegin:x,isAnimationActive:N,isUpdateAnimationActive:j}=t,S=g.useRef(d),C=g.useRef(f),A=g.useRef(o),w=g.useRef(u),E=g.useMemo(()=>({x:o,y:u,width:d,height:f,radius:p}),[o,u,d,f,p]),D=Bf(E,"rectangle-");if(o!==+o||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var O=jt("recharts-rectangle",h);if(!j){var T=kr(t),{radius:P}=T,I=Ww(T,j8);return g.createElement("path",Tm({},I,{x:Ii(o),y:Ii(u),width:Ii(d),height:Ii(f),radius:typeof p=="number"?p:void 0,className:O,d:Xw(o,u,d,f,p)}))}var R=S.current,F=C.current,B=A.current,G=w.current,V="0px ".concat(a===-1?1:a,"px"),M="".concat(a,"px 0px"),q=aO(["strokeDasharray"],b,typeof v=="string"?v:Zw.animationEasing);return g.createElement($f,{animationId:D,key:D,canBegin:a>0,duration:b,easing:v,isActive:j,begin:x},X=>{var Q=Ut(R,d,X),$=Ut(F,f,X),L=Ut(B,o,X),pe=Ut(G,u,X);n.current&&(S.current=Q,C.current=$,A.current=L,w.current=pe);var te;N?X>0?te={transition:q,strokeDasharray:M}:te={strokeDasharray:V}:te={strokeDasharray:M};var de=kr(t),{radius:me}=de,xe=Ww(de,N8);return g.createElement("path",Tm({},xe,{radius:typeof p=="number"?p:void 0,className:O,d:Xw(L,pe,Q,$,p),ref:n,style:Kw(Kw({},te),t.style)}))})};function Jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function eC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(n),!0).forEach(function(a){E8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function E8(e,t,n){return(t=A8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A8(e){var t=z8(e,"string");return typeof t=="symbol"?t:t+""}function z8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qm=Math.PI/180,O8=e=>e*180/Math.PI,Nr=(e,t,n,a)=>({x:e+Math.cos(-qm*a)*n,y:t+Math.sin(-qm*a)*n}),D8=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},M8=(e,t)=>{var{x:n,y:a}=e,{x:l,y:o}=t;return Math.sqrt((n-l)**2+(a-o)**2)},k8=(e,t)=>{var{x:n,y:a}=e,{cx:l,cy:o}=t,u=M8({x:n,y:a},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var d=(n-l)/u,f=Math.acos(d);return a>o&&(f=2*Math.PI-f),{radius:u,angle:O8(f),angleInRadian:f}},P8=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),l=Math.floor(n/360),o=Math.min(a,l);return{startAngle:t-o*360,endAngle:n-o*360}},T8=(e,t)=>{var{startAngle:n,endAngle:a}=t,l=Math.floor(n/360),o=Math.floor(a/360),u=Math.min(l,o);return e+u*360},q8=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:l,angle:o}=k8({x:n,y:a},t),{innerRadius:u,outerRadius:d}=t;if(l<u||l>d||l===0)return null;var{startAngle:f,endAngle:p}=P8(t),h=o,v;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;v=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;v=h>=p&&h<=f}return v?eC(eC({},t),{},{radius:l,angle:T8(h,t)}):null};function cO(e){var{cx:t,cy:n,radius:a,startAngle:l,endAngle:o}=e,u=Nr(t,n,a,l),d=Nr(t,n,a,o);return{points:[u,d],cx:t,cy:n,radius:a,startAngle:l,endAngle:o}}var tC,rC,nC,aC,iC,sC,lC;function rb(){return rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rb.apply(null,arguments)}function _s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R8=(e,t)=>{var n=Qr(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},$d=e=>{var{cx:t,cy:n,radius:a,angle:l,sign:o,isExternal:u,cornerRadius:d,cornerIsExternal:f}=e,p=d*(u?1:-1)+a,h=Math.asin(d/p)/qm,v=f?l:l+o*h,b=Nr(t,n,p,v),x=Nr(t,n,a,v),N=f?l-o*h:l,j=Nr(t,n,p*Math.cos(h*qm),N);return{center:b,circleTangency:x,lineTangency:j,theta:h}},uO=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:o,endAngle:u}=e,d=R8(o,u),f=o+d,p=Nr(t,n,l,o),h=Nr(t,n,l,f),v=Bt(tC||(tC=_s(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,l,l,+(Math.abs(d)>180),+(o>f),h.x,h.y);if(a>0){var b=Nr(t,n,a,o),x=Nr(t,n,a,f);v+=Bt(rC||(rC=_s(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,a,a,+(Math.abs(d)>180),+(o<=f),b.x,b.y)}else v+=Bt(nC||(nC=_s(["L ",","," Z"])),t,n);return v},I8=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:p}=e,h=Qr(p-f),{circleTangency:v,lineTangency:b,theta:x}=$d({cx:t,cy:n,radius:l,angle:f,sign:h,cornerRadius:o,cornerIsExternal:d}),{circleTangency:N,lineTangency:j,theta:S}=$d({cx:t,cy:n,radius:l,angle:p,sign:-h,cornerRadius:o,cornerIsExternal:d}),C=d?Math.abs(f-p):Math.abs(f-p)-x-S;if(C<0)return u?Bt(aC||(aC=_s(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),b.x,b.y,o,o,o*2,o,o,-o*2):uO({cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:f,endAngle:p});var A=Bt(iC||(iC=_s(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),b.x,b.y,o,o,+(h<0),v.x,v.y,l,l,+(C>180),+(h<0),N.x,N.y,o,o,+(h<0),j.x,j.y);if(a>0){var{circleTangency:w,lineTangency:E,theta:D}=$d({cx:t,cy:n,radius:a,angle:f,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:O,lineTangency:T,theta:P}=$d({cx:t,cy:n,radius:a,angle:p,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),I=d?Math.abs(f-p):Math.abs(f-p)-D-P;if(I<0&&o===0)return"".concat(A,"L").concat(t,",").concat(n,"Z");A+=Bt(sC||(sC=_s(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,o,o,+(h<0),O.x,O.y,a,a,+(I>180),+(h>0),w.x,w.y,o,o,+(h<0),E.x,E.y)}else A+=Bt(lC||(lC=_s(["L",",","Z"])),t,n);return A},L8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dO=e=>{var t=Tr(e,L8),{cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:f,startAngle:p,endAngle:h,className:v}=t;if(o<l||p===h)return null;var b=jt("recharts-sector",v),x=o-l,N=Qn(u,x,0,!0),j;return N>0&&Math.abs(p-h)<360?j=I8({cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(N,x/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:p,endAngle:h}):j=uO({cx:n,cy:a,innerRadius:l,outerRadius:o,startAngle:p,endAngle:h}),g.createElement("path",rb({},kr(t),{className:b,d:j}))};function $8(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(KA(t)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:u,angle:d}=t,f=Nr(a,l,o,d),p=Nr(a,l,u,d);return[{x:f.x,y:f.y},{x:p.x,y:p.y}]}return cO(t)}}var Qg={},Vg={},Yg={},oC;function B8(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iz();function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(Yg)),Yg}var cC;function U8(){return cC||(cC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B8();function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(Vg)),Vg}var uC;function F8(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sz(),n=U8();function a(l,o,u){u&&typeof u!="number"&&t.isIterateeCall(l,o,u)&&(o=u=void 0),l=n.toFinite(l),o===void 0?(o=l,l=0):o=n.toFinite(o),u=u===void 0?l<o?1:-1:n.toFinite(u);const d=Math.max(Math.ceil((o-l)/(u||1)),0),f=new Array(d);for(let p=0;p<d;p++)f[p]=l,l+=u;return f}e.range=a})(Qg)),Qg}var Kg,dC;function G8(){return dC||(dC=1,Kg=F8().range),Kg}var H8=G8();const mO=Xa(H8);function $i(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Q8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ly(e){let t,n,a;e.length!==2?(t=$i,n=(d,f)=>$i(e(d),f),a=(d,f)=>e(d)-f):(t=e===$i||e===Q8?e:V8,n=e,a=e);function l(d,f,p=0,h=d.length){if(p<h){if(t(f,f)!==0)return h;do{const v=p+h>>>1;n(d[v],f)<0?p=v+1:h=v}while(p<h)}return p}function o(d,f,p=0,h=d.length){if(p<h){if(t(f,f)!==0)return h;do{const v=p+h>>>1;n(d[v],f)<=0?p=v+1:h=v}while(p<h)}return p}function u(d,f,p=0,h=d.length){const v=l(d,f,p,h-1);return v>p&&a(d[v-1],f)>-a(d[v],f)?v-1:v}return{left:l,center:u,right:o}}function V8(){return 0}function fO(e){return e===null?NaN:+e}function*Y8(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const K8=ly($i),iu=K8.right;ly(fO).center;class mC extends Map{constructor(t,n=Z8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,l]of t)this.set(a,l)}get(t){return super.get(fC(this,t))}has(t){return super.has(fC(this,t))}set(t,n){return super.set(W8(this,t),n)}delete(t){return super.delete(X8(this,t))}}function fC({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function W8({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function X8({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function Z8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function J8(e=$i){if(e===$i)return pO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function pO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e$=Math.sqrt(50),t$=Math.sqrt(10),r$=Math.sqrt(2);function Rm(e,t,n){const a=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),u=o>=e$?10:o>=t$?5:o>=r$?2:1;let d,f,p;return l<0?(p=Math.pow(10,-l)/u,d=Math.round(e*p),f=Math.round(t*p),d/p<e&&++d,f/p>t&&--f,p=-p):(p=Math.pow(10,l)*u,d=Math.round(e/p),f=Math.round(t/p),d*p<e&&++d,f*p>t&&--f),f<d&&.5<=n&&n<2?Rm(e,t,n*2):[d,f,p]}function nb(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[l,o,u]=a?Rm(t,e,n):Rm(e,t,n);if(!(o>=l))return[];const d=o-l+1,f=new Array(d);if(a)if(u<0)for(let p=0;p<d;++p)f[p]=(o-p)/-u;else for(let p=0;p<d;++p)f[p]=(o-p)*u;else if(u<0)for(let p=0;p<d;++p)f[p]=(l+p)/-u;else for(let p=0;p<d;++p)f[p]=(l+p)*u;return f}function ab(e,t,n){return t=+t,e=+e,n=+n,Rm(e,t,n)[2]}function ib(e,t,n){t=+t,e=+e,n=+n;const a=t<e,l=a?ab(t,e,n):ab(e,t,n);return(a?-1:1)*(l<0?1/-l:l)}function pC(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function hC(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function hO(e,t,n=0,a=1/0,l){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(l=l===void 0?pO:J8(l);a>n;){if(a-n>600){const f=a-n+1,p=t-n+1,h=Math.log(f),v=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*v*(f-v)/f)*(p-f/2<0?-1:1),x=Math.max(n,Math.floor(t-p*v/f+b)),N=Math.min(a,Math.floor(t+(f-p)*v/f+b));hO(e,t,x,N,l)}const o=e[t];let u=n,d=a;for(gc(e,n,t),l(e[a],o)>0&&gc(e,n,a);u<d;){for(gc(e,u,d),++u,--d;l(e[u],o)<0;)++u;for(;l(e[d],o)>0;)--d}l(e[n],o)===0?gc(e,n,d):(++d,gc(e,d,a)),d<=t&&(n=d+1),t<=d&&(a=d-1)}return e}function gc(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function n$(e,t,n){if(e=Float64Array.from(Y8(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return hC(e);if(t>=1)return pC(e);var a,l=(a-1)*t,o=Math.floor(l),u=pC(hO(e,o).subarray(0,o+1)),d=hC(e.subarray(o+1));return u+(d-u)*(l-o)}}function a$(e,t,n=fO){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,l=(a-1)*t,o=Math.floor(l),u=+n(e[o],o,e),d=+n(e[o+1],o+1,e);return u+(d-u)*(l-o)}}function i$(e,t,n){e=+e,t=+t,n=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+n;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(l);++a<l;)o[a]=e+a*n;return o}function Tn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ri(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const sb=Symbol("implicit");function oy(){var e=new mC,t=[],n=[],a=sb;function l(o){let u=e.get(o);if(u===void 0){if(a!==sb)return a;e.set(o,u=t.push(o)-1)}return n[u%n.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new mC;for(const u of o)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(o){return arguments.length?(n=Array.from(o),l):n.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return oy(t,n).unknown(a)},Tn.apply(l,arguments),l}function cy(){var e=oy().unknown(void 0),t=e.domain,n=e.range,a=0,l=1,o,u,d=!1,f=0,p=0,h=.5;delete e.unknown;function v(){var b=t().length,x=l<a,N=x?l:a,j=x?a:l;o=(j-N)/Math.max(1,b-f+p*2),d&&(o=Math.floor(o)),N+=(j-N-o*(b-f))*h,u=o*(1-f),d&&(N=Math.round(N),u=Math.round(u));var S=i$(b).map(function(C){return N+o*C});return n(x?S.reverse():S)}return e.domain=function(b){return arguments.length?(t(b),v()):t()},e.range=function(b){return arguments.length?([a,l]=b,a=+a,l=+l,v()):[a,l]},e.rangeRound=function(b){return[a,l]=b,a=+a,l=+l,d=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(b){return arguments.length?(d=!!b,v()):d},e.padding=function(b){return arguments.length?(f=Math.min(1,p=+b),v()):f},e.paddingInner=function(b){return arguments.length?(f=Math.min(1,b),v()):f},e.paddingOuter=function(b){return arguments.length?(p=+b,v()):p},e.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),v()):h},e.copy=function(){return cy(t(),[a,l]).round(d).paddingInner(f).paddingOuter(p).align(h)},Tn.apply(v(),arguments)}function vO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vO(t())},e}function s$(){return vO(cy.apply(null,arguments).paddingInner(1))}function uy(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gO(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function su(){}var Uc=.7,Im=1/Uc,eo="\\s*([+-]?\\d+)\\s*",Fc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l$=/^#([0-9a-f]{3,8})$/,o$=new RegExp(`^rgb\\(${eo},${eo},${eo}\\)$`),c$=new RegExp(`^rgb\\(${ua},${ua},${ua}\\)$`),u$=new RegExp(`^rgba\\(${eo},${eo},${eo},${Fc}\\)$`),d$=new RegExp(`^rgba\\(${ua},${ua},${ua},${Fc}\\)$`),m$=new RegExp(`^hsl\\(${Fc},${ua},${ua}\\)$`),f$=new RegExp(`^hsla\\(${Fc},${ua},${ua},${Fc}\\)$`),vC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uy(su,Gc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gC,formatHex:gC,formatHex8:p$,formatHsl:h$,formatRgb:xC,toString:xC});function gC(){return this.rgb().formatHex()}function p$(){return this.rgb().formatHex8()}function h$(){return xO(this).formatHsl()}function xC(){return this.rgb().formatRgb()}function Gc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bC(t):n===3?new Yr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=o$.exec(e))?new Yr(t[1],t[2],t[3],1):(t=c$.exec(e))?new Yr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=u$.exec(e))?Bd(t[1],t[2],t[3],t[4]):(t=d$.exec(e))?Bd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=m$.exec(e))?NC(t[1],t[2]/100,t[3]/100,1):(t=f$.exec(e))?NC(t[1],t[2]/100,t[3]/100,t[4]):vC.hasOwnProperty(e)?bC(vC[e]):e==="transparent"?new Yr(NaN,NaN,NaN,0):null}function bC(e){return new Yr(e>>16&255,e>>8&255,e&255,1)}function Bd(e,t,n,a){return a<=0&&(e=t=n=NaN),new Yr(e,t,n,a)}function v$(e){return e instanceof su||(e=Gc(e)),e?(e=e.rgb(),new Yr(e.r,e.g,e.b,e.opacity)):new Yr}function lb(e,t,n,a){return arguments.length===1?v$(e):new Yr(e,t,n,a??1)}function Yr(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}uy(Yr,lb,gO(su,{brighter(e){return e=e==null?Im:Math.pow(Im,e),new Yr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Uc:Math.pow(Uc,e),new Yr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yr(Ds(this.r),Ds(this.g),Ds(this.b),Lm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yC,formatHex:yC,formatHex8:g$,formatRgb:jC,toString:jC}));function yC(){return`#${Ss(this.r)}${Ss(this.g)}${Ss(this.b)}`}function g$(){return`#${Ss(this.r)}${Ss(this.g)}${Ss(this.b)}${Ss((isNaN(this.opacity)?1:this.opacity)*255)}`}function jC(){const e=Lm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ds(this.r)}, ${Ds(this.g)}, ${Ds(this.b)}${e===1?")":`, ${e})`}`}function Lm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ds(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ss(e){return e=Ds(e),(e<16?"0":"")+e.toString(16)}function NC(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fn(e,t,n,a)}function xO(e){if(e instanceof Fn)return new Fn(e.h,e.s,e.l,e.opacity);if(e instanceof su||(e=Gc(e)),!e)return new Fn;if(e instanceof Fn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,l=Math.min(t,n,a),o=Math.max(t,n,a),u=NaN,d=o-l,f=(o+l)/2;return d?(t===o?u=(n-a)/d+(n<a)*6:n===o?u=(a-t)/d+2:u=(t-n)/d+4,d/=f<.5?o+l:2-o-l,u*=60):d=f>0&&f<1?0:u,new Fn(u,d,f,e.opacity)}function x$(e,t,n,a){return arguments.length===1?xO(e):new Fn(e,t,n,a??1)}function Fn(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}uy(Fn,x$,gO(su,{brighter(e){return e=e==null?Im:Math.pow(Im,e),new Fn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Uc:Math.pow(Uc,e),new Fn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,l=2*n-a;return new Yr(Wg(e>=240?e-240:e+120,l,a),Wg(e,l,a),Wg(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new Fn(_C(this.h),Ud(this.s),Ud(this.l),Lm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lm(this.opacity);return`${e===1?"hsl(":"hsla("}${_C(this.h)}, ${Ud(this.s)*100}%, ${Ud(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _C(e){return e=(e||0)%360,e<0?e+360:e}function Ud(e){return Math.max(0,Math.min(1,e||0))}function Wg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const dy=e=>()=>e;function b$(e,t){return function(n){return e+n*t}}function y$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function j$(e){return(e=+e)==1?bO:function(t,n){return n-t?y$(t,n,e):dy(isNaN(t)?n:t)}}function bO(e,t){var n=t-e;return n?b$(e,n):dy(isNaN(e)?t:e)}const SC=(function e(t){var n=j$(t);function a(l,o){var u=n((l=lb(l)).r,(o=lb(o)).r),d=n(l.g,o.g),f=n(l.b,o.b),p=bO(l.opacity,o.opacity);return function(h){return l.r=u(h),l.g=d(h),l.b=f(h),l.opacity=p(h),l+""}}return a.gamma=e,a})(1);function N$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),l;return function(o){for(l=0;l<n;++l)a[l]=e[l]*(1-o)+t[l]*o;return a}}function _$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function S$(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,l=new Array(a),o=new Array(n),u;for(u=0;u<a;++u)l[u]=uo(e[u],t[u]);for(;u<n;++u)o[u]=t[u];return function(d){for(u=0;u<a;++u)o[u]=l[u](d);return o}}function w$(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function $m(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function C$(e,t){var n={},a={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?n[l]=uo(e[l],t[l]):a[l]=t[l];return function(o){for(l in n)a[l]=n[l](o);return a}}var ob=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xg=new RegExp(ob.source,"g");function E$(e){return function(){return e}}function A$(e){return function(t){return e(t)+""}}function z$(e,t){var n=ob.lastIndex=Xg.lastIndex=0,a,l,o,u=-1,d=[],f=[];for(e=e+"",t=t+"";(a=ob.exec(e))&&(l=Xg.exec(t));)(o=l.index)>n&&(o=t.slice(n,o),d[u]?d[u]+=o:d[++u]=o),(a=a[0])===(l=l[0])?d[u]?d[u]+=l:d[++u]=l:(d[++u]=null,f.push({i:u,x:$m(a,l)})),n=Xg.lastIndex;return n<t.length&&(o=t.slice(n),d[u]?d[u]+=o:d[++u]=o),d.length<2?f[0]?A$(f[0].x):E$(t):(t=f.length,function(p){for(var h=0,v;h<t;++h)d[(v=f[h]).i]=v.x(p);return d.join("")})}function uo(e,t){var n=typeof t,a;return t==null||n==="boolean"?dy(t):(n==="number"?$m:n==="string"?(a=Gc(t))?(t=a,SC):z$:t instanceof Gc?SC:t instanceof Date?w$:_$(t)?N$:Array.isArray(t)?S$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?C$:$m)(e,t)}function my(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function O$(e,t){t===void 0&&(t=e,e=uo);for(var n=0,a=t.length-1,l=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(l,l=t[++n]);return function(u){var d=Math.max(0,Math.min(a-1,Math.floor(u*=a)));return o[d](u-d)}}function D$(e){return function(){return e}}function Bm(e){return+e}var wC=[0,1];function Dr(e){return e}function cb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:D$(isNaN(t)?NaN:.5)}function M$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function k$(e,t,n){var a=e[0],l=e[1],o=t[0],u=t[1];return l<a?(a=cb(l,a),o=n(u,o)):(a=cb(a,l),o=n(o,u)),function(d){return o(a(d))}}function P$(e,t,n){var a=Math.min(e.length,t.length)-1,l=new Array(a),o=new Array(a),u=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<a;)l[u]=cb(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(d){var f=iu(e,d,1,a)-1;return o[f](l[f](d))}}function lu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Uf(){var e=wC,t=wC,n=uo,a,l,o,u=Dr,d,f,p;function h(){var b=Math.min(e.length,t.length);return u!==Dr&&(u=M$(e[0],e[b-1])),d=b>2?P$:k$,f=p=null,v}function v(b){return b==null||isNaN(b=+b)?o:(f||(f=d(e.map(a),t,n)))(a(u(b)))}return v.invert=function(b){return u(l((p||(p=d(t,e.map(a),$m)))(b)))},v.domain=function(b){return arguments.length?(e=Array.from(b,Bm),h()):e.slice()},v.range=function(b){return arguments.length?(t=Array.from(b),h()):t.slice()},v.rangeRound=function(b){return t=Array.from(b),n=my,h()},v.clamp=function(b){return arguments.length?(u=b?!0:Dr,h()):u!==Dr},v.interpolate=function(b){return arguments.length?(n=b,h()):n},v.unknown=function(b){return arguments.length?(o=b,v):o},function(b,x){return a=b,l=x,h()}}function fy(){return Uf()(Dr,Dr)}function T$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Um(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function lo(e){return e=Um(Math.abs(e)),e?e[1]:NaN}function q$(e,t){return function(n,a){for(var l=n.length,o=[],u=0,d=e[0],f=0;l>0&&d>0&&(f+d+1>a&&(d=Math.max(1,a-f)),o.push(n.substring(l-=d,l+d)),!((f+=d+1)>a));)d=e[u=(u+1)%e.length];return o.reverse().join(t)}}function R$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var I$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hc(e){if(!(t=I$.exec(e)))throw new Error("invalid format: "+e);var t;return new py({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Hc.prototype=py.prototype;function py(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}py.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function L$(e){e:for(var t=e.length,n=1,a=-1,l;n<t;++n)switch(e[n]){case".":a=l=n;break;case"0":a===0&&(a=n),l=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var Fm;function $$(e,t){var n=Um(e,t);if(!n)return Fm=void 0,e.toPrecision(t);var a=n[0],l=n[1],o=l-(Fm=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+Um(e,Math.max(0,t+o-1))[0]}function CC(e,t){var n=Um(e,t);if(!n)return e+"";var a=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const EC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:T$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CC(e*100,t),r:CC,s:$$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function AC(e){return e}var zC=Array.prototype.map,OC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function B$(e){var t=e.grouping===void 0||e.thousands===void 0?AC:q$(zC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?AC:R$(zC.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function p(v,b){v=Hc(v);var x=v.fill,N=v.align,j=v.sign,S=v.symbol,C=v.zero,A=v.width,w=v.comma,E=v.precision,D=v.trim,O=v.type;O==="n"?(w=!0,O="g"):EC[O]||(E===void 0&&(E=12),D=!0,O="g"),(C||x==="0"&&N==="=")&&(C=!0,x="0",N="=");var T=(b&&b.prefix!==void 0?b.prefix:"")+(S==="$"?n:S==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():""),P=(S==="$"?a:/[%p]/.test(O)?u:"")+(b&&b.suffix!==void 0?b.suffix:""),I=EC[O],R=/[defgprs%]/.test(O);E=E===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function F(B){var G=T,V=P,M,q,X;if(O==="c")V=I(B)+V,B="";else{B=+B;var Q=B<0||1/B<0;if(B=isNaN(B)?f:I(Math.abs(B),E),D&&(B=L$(B)),Q&&+B==0&&j!=="+"&&(Q=!1),G=(Q?j==="("?j:d:j==="-"||j==="("?"":j)+G,V=(O==="s"&&!isNaN(B)&&Fm!==void 0?OC[8+Fm/3]:"")+V+(Q&&j==="("?")":""),R){for(M=-1,q=B.length;++M<q;)if(X=B.charCodeAt(M),48>X||X>57){V=(X===46?l+B.slice(M+1):B.slice(M))+V,B=B.slice(0,M);break}}}w&&!C&&(B=t(B,1/0));var $=G.length+B.length+V.length,L=$<A?new Array(A-$+1).join(x):"";switch(w&&C&&(B=t(L+B,L.length?A-V.length:1/0),L=""),N){case"<":B=G+B+V+L;break;case"=":B=G+L+B+V;break;case"^":B=L.slice(0,$=L.length>>1)+G+B+V+L.slice($);break;default:B=L+G+B+V;break}return o(B)}return F.toString=function(){return v+""},F}function h(v,b){var x=Math.max(-8,Math.min(8,Math.floor(lo(b)/3)))*3,N=Math.pow(10,-x),j=p((v=Hc(v),v.type="f",v),{suffix:OC[8+x/3]});return function(S){return j(N*S)}}return{format:p,formatPrefix:h}}var Fd,hy,yO;U$({thousands:",",grouping:[3],currency:["$",""]});function U$(e){return Fd=B$(e),hy=Fd.format,yO=Fd.formatPrefix,Fd}function F$(e){return Math.max(0,-lo(Math.abs(e)))}function G$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lo(t)/3)))*3-lo(Math.abs(e)))}function H$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,lo(t)-lo(e))+1}function jO(e,t,n,a){var l=ib(e,t,n),o;switch(a=Hc(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=G$(l,u))&&(a.precision=o),yO(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=H$(l,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=F$(l))&&(a.precision=o-(a.type==="%")*2);break}}return hy(a)}function Yi(e){var t=e.domain;return e.ticks=function(n){var a=t();return nb(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var l=t();return jO(l[0],l[l.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),l=0,o=a.length-1,u=a[l],d=a[o],f,p,h=10;for(d<u&&(p=u,u=d,d=p,p=l,l=o,o=p);h-- >0;){if(p=ab(u,d,n),p===f)return a[l]=u,a[o]=d,t(a);if(p>0)u=Math.floor(u/p)*p,d=Math.ceil(d/p)*p;else if(p<0)u=Math.ceil(u*p)/p,d=Math.floor(d*p)/p;else break;f=p}return e},e}function NO(){var e=fy();return e.copy=function(){return lu(e,NO())},Tn.apply(e,arguments),Yi(e)}function _O(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Bm),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return _O(e).unknown(t)},e=arguments.length?Array.from(e,Bm):[0,1],Yi(n)}function SO(e,t){e=e.slice();var n=0,a=e.length-1,l=e[n],o=e[a],u;return o<l&&(u=n,n=a,a=u,u=l,l=o,o=u),e[n]=t.floor(l),e[a]=t.ceil(o),e}function DC(e){return Math.log(e)}function MC(e){return Math.exp(e)}function Q$(e){return-Math.log(-e)}function V$(e){return-Math.exp(-e)}function Y$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function K$(e){return e===10?Y$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function W$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kC(e){return(t,n)=>-e(-t,n)}function vy(e){const t=e(DC,MC),n=t.domain;let a=10,l,o;function u(){return l=W$(a),o=K$(a),n()[0]<0?(l=kC(l),o=kC(o),e(Q$,V$)):e(DC,MC),t}return t.base=function(d){return arguments.length?(a=+d,u()):a},t.domain=function(d){return arguments.length?(n(d),u()):n()},t.ticks=d=>{const f=n();let p=f[0],h=f[f.length-1];const v=h<p;v&&([p,h]=[h,p]);let b=l(p),x=l(h),N,j;const S=d==null?10:+d;let C=[];if(!(a%1)&&x-b<S){if(b=Math.floor(b),x=Math.ceil(x),p>0){for(;b<=x;++b)for(N=1;N<a;++N)if(j=b<0?N/o(-b):N*o(b),!(j<p)){if(j>h)break;C.push(j)}}else for(;b<=x;++b)for(N=a-1;N>=1;--N)if(j=b>0?N/o(-b):N*o(b),!(j<p)){if(j>h)break;C.push(j)}C.length*2<S&&(C=nb(p,h,S))}else C=nb(b,x,Math.min(x-b,S)).map(o);return v?C.reverse():C},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=a===10?"s":","),typeof f!="function"&&(!(a%1)&&(f=Hc(f)).precision==null&&(f.trim=!0),f=hy(f)),d===1/0)return f;const p=Math.max(1,a*d/t.ticks().length);return h=>{let v=h/o(Math.round(l(h)));return v*a<a-.5&&(v*=a),v<=p?f(h):""}},t.nice=()=>n(SO(n(),{floor:d=>o(Math.floor(l(d))),ceil:d=>o(Math.ceil(l(d)))})),t}function wO(){const e=vy(Uf()).domain([1,10]);return e.copy=()=>lu(e,wO()).base(e.base()),Tn.apply(e,arguments),e}function PC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function TC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function gy(e){var t=1,n=e(PC(t),TC(t));return n.constant=function(a){return arguments.length?e(PC(t=+a),TC(t)):t},Yi(n)}function CO(){var e=gy(Uf());return e.copy=function(){return lu(e,CO()).constant(e.constant())},Tn.apply(e,arguments)}function qC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function X$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Z$(e){return e<0?-e*e:e*e}function xy(e){var t=e(Dr,Dr),n=1;function a(){return n===1?e(Dr,Dr):n===.5?e(X$,Z$):e(qC(n),qC(1/n))}return t.exponent=function(l){return arguments.length?(n=+l,a()):n},Yi(t)}function by(){var e=xy(Uf());return e.copy=function(){return lu(e,by()).exponent(e.exponent())},Tn.apply(e,arguments),e}function J$(){return by.apply(null,arguments).exponent(.5)}function RC(e){return Math.sign(e)*e*e}function e7(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function EO(){var e=fy(),t=[0,1],n=!1,a;function l(o){var u=e7(e(o));return isNaN(u)?a:n?Math.round(u):u}return l.invert=function(o){return e.invert(RC(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,Bm)).map(RC)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(n=!!o,l):n},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return EO(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Tn.apply(l,arguments),Yi(l)}function AO(){var e=[],t=[],n=[],a;function l(){var u=0,d=Math.max(1,t.length);for(n=new Array(d-1);++u<d;)n[u-1]=a$(e,u/d);return o}function o(u){return u==null||isNaN(u=+u)?a:t[iu(n,u)]}return o.invertExtent=function(u){var d=t.indexOf(u);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort($i),l()},o.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},o.unknown=function(u){return arguments.length?(a=u,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return AO().domain(e).range(t).unknown(a)},Tn.apply(o,arguments)}function zO(){var e=0,t=1,n=1,a=[.5],l=[0,1],o;function u(f){return f!=null&&f<=f?l[iu(a,f,0,n)]:o}function d(){var f=-1;for(a=new Array(n);++f<n;)a[f]=((f+1)*t-(f-n)*e)/(n+1);return u}return u.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},u.range=function(f){return arguments.length?(n=(l=Array.from(f)).length-1,d()):l.slice()},u.invertExtent=function(f){var p=l.indexOf(f);return p<0?[NaN,NaN]:p<1?[e,a[0]]:p>=n?[a[n-1],t]:[a[p-1],a[p]]},u.unknown=function(f){return arguments.length&&(o=f),u},u.thresholds=function(){return a.slice()},u.copy=function(){return zO().domain([e,t]).range(l).unknown(o)},Tn.apply(Yi(u),arguments)}function OO(){var e=[.5],t=[0,1],n,a=1;function l(o){return o!=null&&o<=o?t[iu(e,o,0,a)]:n}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var u=t.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return OO().domain(e).range(t).unknown(n)},Tn.apply(l,arguments)}const Zg=new Date,Jg=new Date;function rr(e,t,n,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const u=l(o),d=l.ceil(o);return o-u<d-o?u:d},l.offset=(o,u)=>(t(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,d)=>{const f=[];if(o=l.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return f;let p;do f.push(p=new Date(+o)),t(o,d),e(o);while(p<o&&o<u);return f},l.filter=o=>rr(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;t(u,-1),!o(u););else for(;--d>=0;)for(;t(u,1),!o(u););}),n&&(l.count=(o,u)=>(Zg.setTime(+o),Jg.setTime(+u),e(Zg),e(Jg),Math.floor(n(Zg,Jg))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?u=>a(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const Gm=rr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Gm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Gm);Gm.range;const Ia=1e3,On=Ia*60,La=On*60,Ha=La*24,yy=Ha*7,IC=Ha*30,ex=Ha*365,ws=rr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ia)},(e,t)=>(t-e)/Ia,e=>e.getUTCSeconds());ws.range;const jy=rr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ia)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getMinutes());jy.range;const Ny=rr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getUTCMinutes());Ny.range;const _y=rr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ia-e.getMinutes()*On)},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getHours());_y.range;const Sy=rr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getUTCHours());Sy.range;const ou=rr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*On)/Ha,e=>e.getDate()-1);ou.range;const Ff=rr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>e.getUTCDate()-1);Ff.range;const DO=rr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>Math.floor(e/Ha));DO.range;function Qs(e){return rr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*On)/yy)}const Gf=Qs(0),Hm=Qs(1),t7=Qs(2),r7=Qs(3),oo=Qs(4),n7=Qs(5),a7=Qs(6);Gf.range;Hm.range;t7.range;r7.range;oo.range;n7.range;a7.range;function Vs(e){return rr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/yy)}const Hf=Vs(0),Qm=Vs(1),i7=Vs(2),s7=Vs(3),co=Vs(4),l7=Vs(5),o7=Vs(6);Hf.range;Qm.range;i7.range;s7.range;co.range;l7.range;o7.range;const wy=rr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wy.range;const Cy=rr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Cy.range;const Qa=rr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qa.range;const Va=rr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Va.range;function MO(e,t,n,a,l,o){const u=[[ws,1,Ia],[ws,5,5*Ia],[ws,15,15*Ia],[ws,30,30*Ia],[o,1,On],[o,5,5*On],[o,15,15*On],[o,30,30*On],[l,1,La],[l,3,3*La],[l,6,6*La],[l,12,12*La],[a,1,Ha],[a,2,2*Ha],[n,1,yy],[t,1,IC],[t,3,3*IC],[e,1,ex]];function d(p,h,v){const b=h<p;b&&([p,h]=[h,p]);const x=v&&typeof v.range=="function"?v:f(p,h,v),N=x?x.range(p,+h+1):[];return b?N.reverse():N}function f(p,h,v){const b=Math.abs(h-p)/v,x=ly(([,,S])=>S).right(u,b);if(x===u.length)return e.every(ib(p/ex,h/ex,v));if(x===0)return Gm.every(Math.max(ib(p,h,v),1));const[N,j]=u[b/u[x-1][2]<u[x][2]/b?x-1:x];return N.every(j)}return[d,f]}const[c7,u7]=MO(Va,Cy,Hf,DO,Sy,Ny),[d7,m7]=MO(Qa,wy,Gf,ou,_y,jy);function tx(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function rx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function f7(e){var t=e.dateTime,n=e.date,a=e.time,l=e.periods,o=e.days,u=e.shortDays,d=e.months,f=e.shortMonths,p=bc(l),h=yc(l),v=bc(o),b=yc(o),x=bc(u),N=yc(u),j=bc(d),S=yc(d),C=bc(f),A=yc(f),w={a:X,A:Q,b:$,B:L,c:null,d:GC,e:GC,f:q7,g:Q7,G:Y7,H:k7,I:P7,j:T7,L:kO,m:R7,M:I7,p:pe,q:te,Q:VC,s:YC,S:L7,u:$7,U:B7,V:U7,w:F7,W:G7,x:null,X:null,y:H7,Y:V7,Z:K7,"%":QC},E={a:de,A:me,b:xe,B:Y,c:null,d:HC,e:HC,f:J7,g:cB,G:dB,H:W7,I:X7,j:Z7,L:TO,m:eB,M:tB,p:he,q:Pe,Q:VC,s:YC,S:rB,u:nB,U:aB,V:iB,w:sB,W:lB,x:null,X:null,y:oB,Y:uB,Z:mB,"%":QC},D={a:R,A:F,b:B,B:G,c:V,d:UC,e:UC,f:z7,g:BC,G:$C,H:FC,I:FC,j:w7,L:A7,m:S7,M:C7,p:I,q:_7,Q:D7,s:M7,S:E7,u:x7,U:b7,V:y7,w:g7,W:j7,x:M,X:q,y:BC,Y:$C,Z:N7,"%":O7};w.x=O(n,w),w.X=O(a,w),w.c=O(t,w),E.x=O(n,E),E.X=O(a,E),E.c=O(t,E);function O(se,J){return function(H){var ce=[],Z=-1,_e=0,Fe=se.length,Ve,We,Ft;for(H instanceof Date||(H=new Date(+H));++Z<Fe;)se.charCodeAt(Z)===37&&(ce.push(se.slice(_e,Z)),(We=LC[Ve=se.charAt(++Z)])!=null?Ve=se.charAt(++Z):We=Ve==="e"?" ":"0",(Ft=J[Ve])&&(Ve=Ft(H,We)),ce.push(Ve),_e=Z+1);return ce.push(se.slice(_e,Z)),ce.join("")}}function T(se,J){return function(H){var ce=xc(1900,void 0,1),Z=P(ce,se,H+="",0),_e,Fe;if(Z!=H.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(J&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(_e=rx(xc(ce.y,0,1)),Fe=_e.getUTCDay(),_e=Fe>4||Fe===0?Qm.ceil(_e):Qm(_e),_e=Ff.offset(_e,(ce.V-1)*7),ce.y=_e.getUTCFullYear(),ce.m=_e.getUTCMonth(),ce.d=_e.getUTCDate()+(ce.w+6)%7):(_e=tx(xc(ce.y,0,1)),Fe=_e.getDay(),_e=Fe>4||Fe===0?Hm.ceil(_e):Hm(_e),_e=ou.offset(_e,(ce.V-1)*7),ce.y=_e.getFullYear(),ce.m=_e.getMonth(),ce.d=_e.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Fe="Z"in ce?rx(xc(ce.y,0,1)).getUTCDay():tx(xc(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Fe+5)%7:ce.w+ce.U*7-(Fe+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,rx(ce)):tx(ce)}}function P(se,J,H,ce){for(var Z=0,_e=J.length,Fe=H.length,Ve,We;Z<_e;){if(ce>=Fe)return-1;if(Ve=J.charCodeAt(Z++),Ve===37){if(Ve=J.charAt(Z++),We=D[Ve in LC?J.charAt(Z++):Ve],!We||(ce=We(se,H,ce))<0)return-1}else if(Ve!=H.charCodeAt(ce++))return-1}return ce}function I(se,J,H){var ce=p.exec(J.slice(H));return ce?(se.p=h.get(ce[0].toLowerCase()),H+ce[0].length):-1}function R(se,J,H){var ce=x.exec(J.slice(H));return ce?(se.w=N.get(ce[0].toLowerCase()),H+ce[0].length):-1}function F(se,J,H){var ce=v.exec(J.slice(H));return ce?(se.w=b.get(ce[0].toLowerCase()),H+ce[0].length):-1}function B(se,J,H){var ce=C.exec(J.slice(H));return ce?(se.m=A.get(ce[0].toLowerCase()),H+ce[0].length):-1}function G(se,J,H){var ce=j.exec(J.slice(H));return ce?(se.m=S.get(ce[0].toLowerCase()),H+ce[0].length):-1}function V(se,J,H){return P(se,t,J,H)}function M(se,J,H){return P(se,n,J,H)}function q(se,J,H){return P(se,a,J,H)}function X(se){return u[se.getDay()]}function Q(se){return o[se.getDay()]}function $(se){return f[se.getMonth()]}function L(se){return d[se.getMonth()]}function pe(se){return l[+(se.getHours()>=12)]}function te(se){return 1+~~(se.getMonth()/3)}function de(se){return u[se.getUTCDay()]}function me(se){return o[se.getUTCDay()]}function xe(se){return f[se.getUTCMonth()]}function Y(se){return d[se.getUTCMonth()]}function he(se){return l[+(se.getUTCHours()>=12)]}function Pe(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var J=O(se+="",w);return J.toString=function(){return se},J},parse:function(se){var J=T(se+="",!1);return J.toString=function(){return se},J},utcFormat:function(se){var J=O(se+="",E);return J.toString=function(){return se},J},utcParse:function(se){var J=T(se+="",!0);return J.toString=function(){return se},J}}}var LC={"-":"",_:" ",0:"0"},mr=/^\s*\d+/,p7=/^%/,h7=/[\\^$*+?|[\]().{}]/g;function ot(e,t,n){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<n?new Array(n-o+1).join(t)+l:l)}function v7(e){return e.replace(h7,"\\$&")}function bc(e){return new RegExp("^(?:"+e.map(v7).join("|")+")","i")}function yc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function g7(e,t,n){var a=mr.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function x7(e,t,n){var a=mr.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function b7(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function y7(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function j7(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function $C(e,t,n){var a=mr.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function BC(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function N7(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function _7(e,t,n){var a=mr.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function S7(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function UC(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function w7(e,t,n){var a=mr.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function FC(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function C7(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function E7(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function A7(e,t,n){var a=mr.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function z7(e,t,n){var a=mr.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function O7(e,t,n){var a=p7.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function D7(e,t,n){var a=mr.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function M7(e,t,n){var a=mr.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function GC(e,t){return ot(e.getDate(),t,2)}function k7(e,t){return ot(e.getHours(),t,2)}function P7(e,t){return ot(e.getHours()%12||12,t,2)}function T7(e,t){return ot(1+ou.count(Qa(e),e),t,3)}function kO(e,t){return ot(e.getMilliseconds(),t,3)}function q7(e,t){return kO(e,t)+"000"}function R7(e,t){return ot(e.getMonth()+1,t,2)}function I7(e,t){return ot(e.getMinutes(),t,2)}function L7(e,t){return ot(e.getSeconds(),t,2)}function $7(e){var t=e.getDay();return t===0?7:t}function B7(e,t){return ot(Gf.count(Qa(e)-1,e),t,2)}function PO(e){var t=e.getDay();return t>=4||t===0?oo(e):oo.ceil(e)}function U7(e,t){return e=PO(e),ot(oo.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function F7(e){return e.getDay()}function G7(e,t){return ot(Hm.count(Qa(e)-1,e),t,2)}function H7(e,t){return ot(e.getFullYear()%100,t,2)}function Q7(e,t){return e=PO(e),ot(e.getFullYear()%100,t,2)}function V7(e,t){return ot(e.getFullYear()%1e4,t,4)}function Y7(e,t){var n=e.getDay();return e=n>=4||n===0?oo(e):oo.ceil(e),ot(e.getFullYear()%1e4,t,4)}function K7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ot(t/60|0,"0",2)+ot(t%60,"0",2)}function HC(e,t){return ot(e.getUTCDate(),t,2)}function W7(e,t){return ot(e.getUTCHours(),t,2)}function X7(e,t){return ot(e.getUTCHours()%12||12,t,2)}function Z7(e,t){return ot(1+Ff.count(Va(e),e),t,3)}function TO(e,t){return ot(e.getUTCMilliseconds(),t,3)}function J7(e,t){return TO(e,t)+"000"}function eB(e,t){return ot(e.getUTCMonth()+1,t,2)}function tB(e,t){return ot(e.getUTCMinutes(),t,2)}function rB(e,t){return ot(e.getUTCSeconds(),t,2)}function nB(e){var t=e.getUTCDay();return t===0?7:t}function aB(e,t){return ot(Hf.count(Va(e)-1,e),t,2)}function qO(e){var t=e.getUTCDay();return t>=4||t===0?co(e):co.ceil(e)}function iB(e,t){return e=qO(e),ot(co.count(Va(e),e)+(Va(e).getUTCDay()===4),t,2)}function sB(e){return e.getUTCDay()}function lB(e,t){return ot(Qm.count(Va(e)-1,e),t,2)}function oB(e,t){return ot(e.getUTCFullYear()%100,t,2)}function cB(e,t){return e=qO(e),ot(e.getUTCFullYear()%100,t,2)}function uB(e,t){return ot(e.getUTCFullYear()%1e4,t,4)}function dB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?co(e):co.ceil(e),ot(e.getUTCFullYear()%1e4,t,4)}function mB(){return"+0000"}function QC(){return"%"}function VC(e){return+e}function YC(e){return Math.floor(+e/1e3)}var Bl,RO,IO;fB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fB(e){return Bl=f7(e),RO=Bl.format,Bl.parse,IO=Bl.utcFormat,Bl.utcParse,Bl}function pB(e){return new Date(e)}function hB(e){return e instanceof Date?+e:+new Date(+e)}function Ey(e,t,n,a,l,o,u,d,f,p){var h=fy(),v=h.invert,b=h.domain,x=p(".%L"),N=p(":%S"),j=p("%I:%M"),S=p("%I %p"),C=p("%a %d"),A=p("%b %d"),w=p("%B"),E=p("%Y");function D(O){return(f(O)<O?x:d(O)<O?N:u(O)<O?j:o(O)<O?S:a(O)<O?l(O)<O?C:A:n(O)<O?w:E)(O)}return h.invert=function(O){return new Date(v(O))},h.domain=function(O){return arguments.length?b(Array.from(O,hB)):b().map(pB)},h.ticks=function(O){var T=b();return e(T[0],T[T.length-1],O??10)},h.tickFormat=function(O,T){return T==null?D:p(T)},h.nice=function(O){var T=b();return(!O||typeof O.range!="function")&&(O=t(T[0],T[T.length-1],O??10)),O?b(SO(T,O)):h},h.copy=function(){return lu(h,Ey(e,t,n,a,l,o,u,d,f,p))},h}function vB(){return Tn.apply(Ey(d7,m7,Qa,wy,Gf,ou,_y,jy,ws,RO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gB(){return Tn.apply(Ey(c7,u7,Va,Cy,Hf,Ff,Sy,Ny,ws,IO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qf(){var e=0,t=1,n,a,l,o,u=Dr,d=!1,f;function p(v){return v==null||isNaN(v=+v)?f:u(l===0?.5:(v=(o(v)-n)*l,d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),a=o(t=+t),l=n===a?0:1/(a-n),p):[e,t]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function h(v){return function(b){var x,N;return arguments.length?([x,N]=b,u=v(x,N),p):[u(0),u(1)]}}return p.range=h(uo),p.rangeRound=h(my),p.unknown=function(v){return arguments.length?(f=v,p):f},function(v){return o=v,n=v(e),a=v(t),l=n===a?0:1/(a-n),p}}function Ki(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function LO(){var e=Yi(Qf()(Dr));return e.copy=function(){return Ki(e,LO())},ri.apply(e,arguments)}function $O(){var e=vy(Qf()).domain([1,10]);return e.copy=function(){return Ki(e,$O()).base(e.base())},ri.apply(e,arguments)}function BO(){var e=gy(Qf());return e.copy=function(){return Ki(e,BO()).constant(e.constant())},ri.apply(e,arguments)}function Ay(){var e=xy(Qf());return e.copy=function(){return Ki(e,Ay()).exponent(e.exponent())},ri.apply(e,arguments)}function xB(){return Ay.apply(null,arguments).exponent(.5)}function UO(){var e=[],t=Dr;function n(a){if(a!=null&&!isNaN(a=+a))return t((iu(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort($i),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,l)=>t(l/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(l,o)=>n$(e,o/a))},n.copy=function(){return UO(t).domain(e)},ri.apply(n,arguments)}function Vf(){var e=0,t=.5,n=1,a=1,l,o,u,d,f,p=Dr,h,v=!1,b;function x(j){return isNaN(j=+j)?b:(j=.5+((j=+h(j))-o)*(a*j<a*o?d:f),p(v?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,n]=j,l=h(e=+e),o=h(t=+t),u=h(n=+n),d=l===o?0:.5/(o-l),f=o===u?0:.5/(u-o),a=o<l?-1:1,x):[e,t,n]},x.clamp=function(j){return arguments.length?(v=!!j,x):v},x.interpolator=function(j){return arguments.length?(p=j,x):p};function N(j){return function(S){var C,A,w;return arguments.length?([C,A,w]=S,p=O$(j,[C,A,w]),x):[p(0),p(.5),p(1)]}}return x.range=N(uo),x.rangeRound=N(my),x.unknown=function(j){return arguments.length?(b=j,x):b},function(j){return h=j,l=j(e),o=j(t),u=j(n),d=l===o?0:.5/(o-l),f=o===u?0:.5/(u-o),a=o<l?-1:1,x}}function FO(){var e=Yi(Vf()(Dr));return e.copy=function(){return Ki(e,FO())},ri.apply(e,arguments)}function GO(){var e=vy(Vf()).domain([.1,1,10]);return e.copy=function(){return Ki(e,GO()).base(e.base())},ri.apply(e,arguments)}function HO(){var e=gy(Vf());return e.copy=function(){return Ki(e,HO()).constant(e.constant())},ri.apply(e,arguments)}function zy(){var e=xy(Vf());return e.copy=function(){return Ki(e,zy()).exponent(e.exponent())},ri.apply(e,arguments)}function bB(){return zy.apply(null,arguments).exponent(.5)}const Ec=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cy,scaleDiverging:FO,scaleDivergingLog:GO,scaleDivergingPow:zy,scaleDivergingSqrt:bB,scaleDivergingSymlog:HO,scaleIdentity:_O,scaleImplicit:sb,scaleLinear:NO,scaleLog:wO,scaleOrdinal:oy,scalePoint:s$,scalePow:by,scaleQuantile:AO,scaleQuantize:zO,scaleRadial:EO,scaleSequential:LO,scaleSequentialLog:$O,scaleSequentialPow:Ay,scaleSequentialQuantile:UO,scaleSequentialSqrt:xB,scaleSequentialSymlog:BO,scaleSqrt:J$,scaleSymlog:CO,scaleThreshold:OO,scaleTime:vB,scaleUtc:gB,tickFormat:jO},Symbol.toStringTag,{value:"Module"}));var ni=e=>e.chartData,QO=oe([ni],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Oy=(e,t,n,a)=>a?QO(e):ni(e),yB=(e,t,n)=>n?QO(e):ni(e);function Ya(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(at(t)&&at(n))return!0}return!1}function KC(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function VO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,l,o;if(at(n))l=n;else if(typeof n=="function")return;if(at(a))o=a;else if(typeof a=="function")return;var u=[l,o];if(Ya(u))return u}}function jB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(Ya(a))return KC(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,d;if(l==="auto")t!=null&&(u=Math.min(...t));else if(Ae(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&sw.test(l)){var f=sw.exec(l);if(f==null||f[1]==null||t==null)u=void 0;else{var p=+f[1];u=t[0]-p}}else u=t?.[0];if(o==="auto")t!=null&&(d=Math.max(...t));else if(Ae(o))d=o;else if(typeof o=="function")try{t!=null&&(d=o(t?.[1]))}catch{}else if(typeof o=="string"&&lw.test(o)){var h=lw.exec(o);if(h==null||h[1]==null||t==null)d=void 0;else{var v=+h[1];d=t[1]+v}}else d=t?.[1];var b=[u,d];if(Ya(b))return t==null?b:KC(b,t,n)}}}var mo=1e9,NB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},My,Dt=!0,Pn="[DecimalError] ",Ms=Pn+"Invalid argument: ",Dy=Pn+"Exponent out of range: ",fo=Math.floor,Ns=Math.pow,_B=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,on,cr=1e7,At=7,YO=9007199254740991,Vm=fo(YO/At),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,n,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,t=0,n=a<l?a:l;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*At;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ce.dividedBy=Ce.div=function(e){return Ba(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,n=t.constructor;return St(Ba(t,new n(e),0,1),n.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return Jt(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,n=this,a=n.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(on))throw Error(Pn+"NaN");if(n.s<1)throw Error(Pn+(n.s?"NaN":"-Infinity"));return n.eq(on)?new a(0):(Dt=!1,t=Ba(Qc(n,o),Qc(e,o),o),Dt=!0,St(t,l))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XO(t,e):KO(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,n=this,a=n.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(Pn+"NaN");return n.s?(Dt=!1,t=Ba(n,e,0,1).times(e),Dt=!0,n.minus(t)):St(new a(n),l)};Ce.naturalExponential=Ce.exp=function(){return WO(this)};Ce.naturalLogarithm=Ce.ln=function(){return Qc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KO(t,e):XO(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,n,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ms+e);if(t=Jt(l)+1,a=l.d.length-1,n=a*At+1,a=l.d[a],a){for(;a%10==0;a/=10)n--;for(a=l.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};Ce.squareRoot=Ce.sqrt=function(){var e,t,n,a,l,o,u,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(Pn+"NaN")}for(e=Jt(d),Dt=!1,l=Math.sqrt(+d),l==0||l==1/0?(t=oa(d.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=fo((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new f(t)):a=new f(l.toString()),n=f.precision,l=u=n+3;;)if(o=a,a=o.plus(Ba(d,o,u+2)).times(.5),oa(o.d).slice(0,u)===(t=oa(a.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(St(o,n+1,0),o.times(o).eq(d)){a=o;break}}else if(t!="9999")break;u+=4}return Dt=!0,St(a,n)};Ce.times=Ce.mul=function(e){var t,n,a,l,o,u,d,f,p,h=this,v=h.constructor,b=h.d,x=(e=new v(e)).d;if(!h.s||!e.s)return new v(0);for(e.s*=h.s,n=h.e+e.e,f=b.length,p=x.length,f<p&&(o=b,b=x,x=o,u=f,f=p,p=u),o=[],u=f+p,a=u;a--;)o.push(0);for(a=p;--a>=0;){for(t=0,l=f+a;l>a;)d=o[l]+x[a]*b[l-a-1]+t,o[l--]=d%cr|0,t=d/cr|0;o[l]=(o[l]+t)%cr|0}for(;!o[--u];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,Dt?St(e,v.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(pa(e,0,mo),t===void 0?t=a.rounding:pa(t,0,8),St(n,e+Jt(n)+1,t))};Ce.toExponential=function(e,t){var n,a=this,l=a.constructor;return e===void 0?n=Is(a,!0):(pa(e,0,mo),t===void 0?t=l.rounding:pa(t,0,8),a=St(new l(a),e+1,t),n=Is(a,!0,e+1)),n};Ce.toFixed=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?Is(l):(pa(e,0,mo),t===void 0?t=o.rounding:pa(t,0,8),a=St(new o(l),e+Jt(l)+1,t),n=Is(a.abs(),!1,e+Jt(a)+1),l.isneg()&&!l.isZero()?"-"+n:n)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return St(new t(e),Jt(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,n,a,l,o,u,d=this,f=d.constructor,p=12,h=+(e=new f(e));if(!e.s)return new f(on);if(d=new f(d),!d.s){if(e.s<1)throw Error(Pn+"Infinity");return d}if(d.eq(on))return d;if(a=f.precision,e.eq(on))return St(d,a);if(t=e.e,n=e.d.length-1,u=t>=n,o=d.s,u){if((n=h<0?-h:h)<=YO){for(l=new f(on),t=Math.ceil(a/At+4),Dt=!1;n%2&&(l=l.times(d),XC(l.d,t)),n=fo(n/2),n!==0;)d=d.times(d),XC(d.d,t);return Dt=!0,e.s<0?new f(on).div(l):St(l,a)}}else if(o<0)throw Error(Pn+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,Dt=!1,l=e.times(Qc(d,a+p)),Dt=!0,l=WO(l),l.s=o,l};Ce.toPrecision=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?(n=Jt(l),a=Is(l,n<=o.toExpNeg||n>=o.toExpPos)):(pa(e,1,mo),t===void 0?t=o.rounding:pa(t,0,8),l=St(new o(l),e,t),n=Jt(l),a=Is(l,e<=n||n<=o.toExpNeg,e)),a};Ce.toSignificantDigits=Ce.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(pa(e,1,mo),t===void 0?t=a.rounding:pa(t,0,8)),St(new a(n),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jt(e),n=e.constructor;return Is(e,t<=n.toExpNeg||t>=n.toExpPos)};function KO(e,t){var n,a,l,o,u,d,f,p,h=e.constructor,v=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Dt?St(t,v):t;if(f=e.d,p=t.d,u=e.e,l=t.e,f=f.slice(),o=u-l,o){for(o<0?(a=f,o=-o,d=p.length):(a=p,l=u,d=f.length),u=Math.ceil(v/At),d=u>d?u+1:d+1,o>d&&(o=d,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(d=f.length,o=p.length,d-o<0&&(o=d,a=p,p=f,f=a),n=0;o;)n=(f[--o]=f[o]+p[o]+n)/cr|0,f[o]%=cr;for(n&&(f.unshift(n),++l),d=f.length;f[--d]==0;)f.pop();return t.d=f,t.e=l,Dt?St(t,v):t}function pa(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ms+e)}function oa(e){var t,n,a,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,t=1;t<l;t++)a=e[t]+"",n=At-a.length,n&&(o+=Ti(n)),o+=a;u=e[t],a=u+"",n=At-a.length,n&&(o+=Ti(n))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var Ba=(function(){function e(a,l){var o,u=0,d=a.length;for(a=a.slice();d--;)o=a[d]*l+u,a[d]=o%cr|0,u=o/cr|0;return u&&a.unshift(u),a}function t(a,l,o,u){var d,f;if(o!=u)f=o>u?1:-1;else for(d=f=0;d<o;d++)if(a[d]!=l[d]){f=a[d]>l[d]?1:-1;break}return f}function n(a,l,o){for(var u=0;o--;)a[o]-=u,u=a[o]<l[o]?1:0,a[o]=u*cr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,u){var d,f,p,h,v,b,x,N,j,S,C,A,w,E,D,O,T,P,I=a.constructor,R=a.s==l.s?1:-1,F=a.d,B=l.d;if(!a.s)return new I(a);if(!l.s)throw Error(Pn+"Division by zero");for(f=a.e-l.e,T=B.length,D=F.length,x=new I(R),N=x.d=[],p=0;B[p]==(F[p]||0);)++p;if(B[p]>(F[p]||0)&&--f,o==null?A=o=I.precision:u?A=o+(Jt(a)-Jt(l))+1:A=o,A<0)return new I(0);if(A=A/At+2|0,p=0,T==1)for(h=0,B=B[0],A++;(p<D||h)&&A--;p++)w=h*cr+(F[p]||0),N[p]=w/B|0,h=w%B|0;else{for(h=cr/(B[0]+1)|0,h>1&&(B=e(B,h),F=e(F,h),T=B.length,D=F.length),E=T,j=F.slice(0,T),S=j.length;S<T;)j[S++]=0;P=B.slice(),P.unshift(0),O=B[0],B[1]>=cr/2&&++O;do h=0,d=t(B,j,T,S),d<0?(C=j[0],T!=S&&(C=C*cr+(j[1]||0)),h=C/O|0,h>1?(h>=cr&&(h=cr-1),v=e(B,h),b=v.length,S=j.length,d=t(v,j,b,S),d==1&&(h--,n(v,T<b?P:B,b))):(h==0&&(d=h=1),v=B.slice()),b=v.length,b<S&&v.unshift(0),n(j,v,S),d==-1&&(S=j.length,d=t(B,j,T,S),d<1&&(h++,n(j,T<S?P:B,S))),S=j.length):d===0&&(h++,j=[0]),N[p++]=h,d&&j[0]?j[S++]=F[E]||0:(j=[F[E]],S=1);while((E++<D||j[0]!==void 0)&&A--)}return N[0]||N.shift(),x.e=f,St(x,u?o+Jt(x)+1:o)}})();function WO(e,t){var n,a,l,o,u,d,f=0,p=0,h=e.constructor,v=h.precision;if(Jt(e)>16)throw Error(Dy+Jt(e));if(!e.s)return new h(on);for(Dt=!1,d=v,u=new h(.03125);e.abs().gte(.1);)e=e.times(u),p+=5;for(a=Math.log(Ns(2,p))/Math.LN10*2+5|0,d+=a,n=l=o=new h(on),h.precision=d;;){if(l=St(l.times(e),d),n=n.times(++f),u=o.plus(Ba(l,n,d)),oa(u.d).slice(0,d)===oa(o.d).slice(0,d)){for(;p--;)o=St(o.times(o),d);return h.precision=v,t==null?(Dt=!0,St(o,v)):o}o=u}}function Jt(e){for(var t=e.e*At,n=e.d[0];n>=10;n/=10)t++;return t}function nx(e,t,n){if(t>e.LN10.sd())throw Dt=!0,n&&(e.precision=n),Error(Pn+"LN10 precision limit exceeded");return St(new e(e.LN10),t)}function Ti(e){for(var t="";e--;)t+="0";return t}function Qc(e,t){var n,a,l,o,u,d,f,p,h,v=1,b=10,x=e,N=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Pn+(x.s?"NaN":"-Infinity"));if(x.eq(on))return new j(0);if(t==null?(Dt=!1,p=S):p=t,x.eq(10))return t==null&&(Dt=!0),nx(j,p);if(p+=b,j.precision=p,n=oa(N),a=n.charAt(0),o=Jt(x),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(e),n=oa(x.d),a=n.charAt(0),v++;o=Jt(x),a>1?(x=new j("0."+n),o++):x=new j(a+"."+n.slice(1))}else return f=nx(j,p+2,S).times(o+""),x=Qc(new j(a+"."+n.slice(1)),p-b).plus(f),j.precision=S,t==null?(Dt=!0,St(x,S)):x;for(d=u=x=Ba(x.minus(on),x.plus(on),p),h=St(x.times(x),p),l=3;;){if(u=St(u.times(h),p),f=d.plus(Ba(u,new j(l),p)),oa(f.d).slice(0,p)===oa(d.d).slice(0,p))return d=d.times(2),o!==0&&(d=d.plus(nx(j,p+2,S).times(o+""))),d=Ba(d,new j(v),p),j.precision=S,t==null?(Dt=!0,St(d,S)):d;d=f,l+=2}}function WC(e,t){var n,a,l;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(a,l),t){if(l-=a,n=n-a-1,e.e=fo(n/At),e.d=[],a=(n+1)%At,n<0&&(a+=At),a<l){for(a&&e.d.push(+t.slice(0,a)),l-=At;a<l;)e.d.push(+t.slice(a,a+=At));t=t.slice(a),a=At-t.length}else a-=l;for(;a--;)t+="0";if(e.d.push(+t),Dt&&(e.e>Vm||e.e<-Vm))throw Error(Dy+n)}else e.s=0,e.e=0,e.d=[0];return e}function St(e,t,n){var a,l,o,u,d,f,p,h,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(a=t-u,a<0)a+=At,l=t,p=v[h=0];else{if(h=Math.ceil((a+1)/At),o=v.length,h>=o)return e;for(p=o=v[h],u=1;o>=10;o/=10)u++;a%=At,l=a-At+u}if(n!==void 0&&(o=Ns(10,u-l-1),d=p/o%10|0,f=t<0||v[h+1]!==void 0||p%o,f=n<4?(d||f)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||f||n==6&&(a>0?l>0?p/Ns(10,u-l):0:v[h-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return f?(o=Jt(e),v.length=1,t=t-o-1,v[0]=Ns(10,(At-t%At)%At),e.e=fo(-t/At)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(a==0?(v.length=h,o=1,h--):(v.length=h+1,o=Ns(10,At-a),v[h]=l>0?(p/Ns(10,u-l)%Ns(10,l)|0)*o:0),f)for(;;)if(h==0){(v[0]+=o)==cr&&(v[0]=1,++e.e);break}else{if(v[h]+=o,v[h]!=cr)break;v[h--]=0,o=1}for(a=v.length;v[--a]===0;)v.pop();if(Dt&&(e.e>Vm||e.e<-Vm))throw Error(Dy+Jt(e));return e}function XO(e,t){var n,a,l,o,u,d,f,p,h,v,b=e.constructor,x=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),Dt?St(t,x):t;if(f=e.d,v=t.d,a=t.e,p=e.e,f=f.slice(),u=p-a,u){for(h=u<0,h?(n=f,u=-u,d=v.length):(n=v,a=p,d=f.length),l=Math.max(Math.ceil(x/At),d)+2,u>l&&(u=l,n.length=1),n.reverse(),l=u;l--;)n.push(0);n.reverse()}else{for(l=f.length,d=v.length,h=l<d,h&&(d=l),l=0;l<d;l++)if(f[l]!=v[l]){h=f[l]<v[l];break}u=0}for(h&&(n=f,f=v,v=n,t.s=-t.s),d=f.length,l=v.length-d;l>0;--l)f[d++]=0;for(l=v.length;l>u;){if(f[--l]<v[l]){for(o=l;o&&f[--o]===0;)f[o]=cr-1;--f[o],f[l]+=cr}f[l]-=v[l]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--a;return f[0]?(t.d=f,t.e=a,Dt?St(t,x):t):new b(0)}function Is(e,t,n){var a,l=Jt(e),o=oa(e.d),u=o.length;return t?(n&&(a=n-u)>0?o=o.charAt(0)+"."+o.slice(1)+Ti(a):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+Ti(-l-1)+o,n&&(a=n-u)>0&&(o+=Ti(a))):l>=u?(o+=Ti(l+1-u),n&&(a=n-l-1)>0&&(o=o+"."+Ti(a))):((a=l+1)<u&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-u)>0&&(l+1===u&&(o+="."),o+=Ti(a))),e.s<0?"-"+o:o}function XC(e,t){if(e.length>t)return e.length=t,!0}function ZO(e){var t,n,a;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ms+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return WC(u,o.toString())}else if(typeof o!="string")throw Error(Ms+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,_B.test(o))WC(u,o);else throw Error(Ms+o)}if(l.prototype=Ce,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=ZO,l.config=l.set=SB,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return l.config(e),l}function SB(e){if(!e||typeof e!="object")throw Error(Pn+"Object expected");var t,n,a,l=["precision",1,mo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((a=e[n=l[t]])!==void 0)if(fo(a)===a&&a>=l[t+1]&&a<=l[t+2])this[n]=a;else throw Error(Ms+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(Ms+n+": "+a);return this}var My=ZO(NB);on=new My(1);const pt=My;function JO(e){var t;return e===0?t=1:t=Math.floor(new pt(e).abs().log(10).toNumber())+1,t}function eD(e,t,n){for(var a=new pt(e),l=0,o=[];a.lt(t)&&l<1e5;)o.push(a.toNumber()),a=a.add(n),l++;return o}var tD=e=>{var[t,n]=e,[a,l]=[t,n];return t>n&&([a,l]=[n,t]),[a,l]},rD=(e,t,n)=>{if(e.lte(0))return new pt(0);var a=JO(e.toNumber()),l=new pt(10).pow(a),o=e.div(l),u=a!==1?.05:.1,d=new pt(Math.ceil(o.div(u).toNumber())).add(n).mul(u),f=d.mul(l);return t?new pt(f.toNumber()):new pt(Math.ceil(f.toNumber()))},wB=(e,t,n)=>{var a=new pt(1),l=new pt(e);if(!l.isint()&&n){var o=Math.abs(e);o<1?(a=new pt(10).pow(JO(e)-1),l=new pt(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new pt(Math.floor(e)))}else e===0?l=new pt(Math.floor((t-1)/2)):n||(l=new pt(Math.floor(e)));for(var u=Math.floor((t-1)/2),d=[],f=0;f<t;f++)d.push(l.add(new pt(f-u).mul(a)).toNumber());return d},nD=function(t,n,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new pt(0),tickMin:new pt(0),tickMax:new pt(0)};var u=rD(new pt(n).sub(t).div(a-1),l,o),d;t<=0&&n>=0?d=new pt(0):(d=new pt(t).add(n).div(2),d=d.sub(new pt(d).mod(u)));var f=Math.ceil(d.sub(t).div(u).toNumber()),p=Math.ceil(new pt(n).sub(d).div(u).toNumber()),h=f+p+1;return h>a?nD(t,n,a,l,o+1):(h<a&&(p=n>0?p+(a-h):p,f=n>0?f:f+(a-h)),{step:u,tickMin:d.sub(new pt(f).mul(u)),tickMax:d.add(new pt(p).mul(u))})},CB=function(t){var[n,a]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[d,f]=tD([n,a]);if(d===-1/0||f===1/0){var p=f===1/0?[d,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),f];return n>a?p.reverse():p}if(d===f)return wB(d,l,o);var{step:h,tickMin:v,tickMax:b}=nD(d,f,u,o,0),x=eD(v,b.add(new pt(.1).mul(h)),h);return n>a?x.reverse():x},EB=function(t,n){var[a,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=tD([a,l]);if(u===-1/0||d===1/0)return[a,l];if(u===d)return[u];var f=Math.max(n,2),p=rD(new pt(d).sub(u).div(f-1),o,0),h=[...eD(new pt(u),new pt(d),p),d];return o===!1&&(h=h.map(v=>Math.round(v))),a>l?h.reverse():h},aD=e=>e.rootProps.maxBarSize,AB=e=>e.rootProps.barGap,iD=e=>e.rootProps.barCategoryGap,zB=e=>e.rootProps.barSize,Yf=e=>e.rootProps.stackOffset,sD=e=>e.rootProps.reverseStackOrder,ky=e=>e.options.chartName,Py=e=>e.rootProps.syncId,lD=e=>e.rootProps.syncMethod,Ty=e=>e.options.eventEmitter,ur={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},xs={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},aa={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Kf=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Wf(e,t,n){if(n!=="auto")return n;if(e!=null)return Ja(e,t)?"category":"number"}function ZC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(n),!0).forEach(function(a){OB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function OB(e,t,n){return(t=DB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DB(e){var t=MB(e,"string");return typeof t=="symbol"?t:t+""}function MB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JC={allowDataOverflow:xs.allowDataOverflow,allowDecimals:xs.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:xs.angleAxisId,includeHidden:!1,name:void 0,reversed:xs.reversed,scale:xs.scale,tick:xs.tick,tickCount:void 0,ticks:void 0,type:xs.type,unit:void 0},e2={allowDataOverflow:aa.allowDataOverflow,allowDecimals:aa.allowDecimals,allowDuplicatedCategory:aa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:aa.radiusAxisId,includeHidden:aa.includeHidden,name:void 0,reversed:aa.reversed,scale:aa.scale,tick:aa.tick,tickCount:aa.tickCount,ticks:void 0,type:aa.type,unit:void 0},kB=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},qy=oe([kB,Yz],(e,t)=>{var n;if(e!=null)return e;var a=(n=Wf(t,"angleAxis",JC.type))!==null&&n!==void 0?n:"category";return Ym(Ym({},JC),{},{type:a})}),PB=(e,t)=>e.polarAxis.radiusAxis[t],Ry=oe([PB,Yz],(e,t)=>{var n;if(e!=null)return e;var a=(n=Wf(t,"radiusAxis",e2.type))!==null&&n!==void 0?n:"category";return Ym(Ym({},e2),{},{type:a})}),Xf=e=>e.polarOptions,Iy=oe([ei,ti,dr],D8),oD=oe([Xf,Iy],(e,t)=>{if(e!=null)return Qn(e.innerRadius,t,0)}),cD=oe([Xf,Iy],(e,t)=>{if(e!=null)return Qn(e.outerRadius,t,t*.8)}),TB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},uD=oe([Xf],TB);oe([qy,uD],Kf);var dD=oe([Iy,oD,cD],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});oe([Ry,dD],Kf);var mD=oe([ht,Xf,oD,cD,ei,ti],(e,t,n,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:u,cy:d,startAngle:f,endAngle:p}=t;return{cx:Qn(u,l,l/2),cy:Qn(d,o,o/2),innerRadius:n,outerRadius:a,startAngle:f,endAngle:p,clockWise:!1}}}),fr=(e,t)=>t,Zf=(e,t,n)=>n;function Ly(e){return e?.id}function fD(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=n,u=new Map;return e.forEach(d=>{var f,p=(f=d.data)!==null&&f!==void 0?f:a;if(!(p==null||p.length===0)){var h=Ly(d);p.forEach((v,b)=>{var x=o==null||l?b:String(Zt(v,o,null)),N=Zt(v,d.dataKey,0),j;u.has(x)?j=u.get(x):j={},Object.assign(j,{[h]:N}),u.set(x,j)})}}),Array.from(u.values())}function Jf(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var ep=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function tp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function qB(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var pr=e=>{var t=ht(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},po=e=>e.tooltip.settings.axisId;function RB(e){if(e in Ec)return Ec[e]();var t="scale".concat(Jc(e));if(t in Ec)return Ec[t]()}function t2(e){var t=e.ticks,n=e.bandwidth,a=e.range(),l=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(o){function u(){return o.apply(this,arguments)}return u.toString=function(){return o.toString()},u})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var u=l[0],d=l[1];return u<=d?o>=u&&o<=d:o>=d&&o<=u},bandwidth:n?()=>n.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,u)=>{var d=e(o);if(d!=null){if(e.bandwidth&&u!==null&&u!==void 0&&u.position){var f=e.bandwidth();switch(u.position){case"middle":d+=f/2;break;case"end":d+=f;break}}return d}}}}function r2(e,t,n){if(typeof e=="function")return t2(e.copy().domain(t).range(n));if(e!=null){var a=RB(e);if(a!=null)return a.domain(t).range(n),t2(a)}}var IB=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Ya(t)){for(var n,a,l=0;l<t.length;l++){var o=t[l];at(o)&&((n===void 0||o<n)&&(n=o),(a===void 0||o>a)&&(a=o))}return n!==void 0&&a!==void 0?[n,a]:void 0}return t}default:return t}};function n2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Km(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(n),!0).forEach(function(a){LB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function LB(e,t,n){return(t=$B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $B(e){var t=BB(e,"string");return typeof t=="symbol"?t:t+""}function BB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ub=[0,"auto"],lr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},pD=(e,t)=>e.cartesianAxis.xAxis[t],ai=(e,t)=>{var n=pD(e,t);return n??lr},or={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ub,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ru},hD=(e,t)=>e.cartesianAxis.yAxis[t],ii=(e,t)=>{var n=hD(e,t);return n??or},UB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},$y=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??UB},qr=(e,t,n)=>{switch(t){case"xAxis":return ai(e,n);case"yAxis":return ii(e,n);case"zAxis":return $y(e,n);case"angleAxis":return qy(e,n);case"radiusAxis":return Ry(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},FB=(e,t,n)=>{switch(t){case"xAxis":return ai(e,n);case"yAxis":return ii(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},cu=(e,t,n)=>{switch(t){case"xAxis":return ai(e,n);case"yAxis":return ii(e,n);case"angleAxis":return qy(e,n);case"radiusAxis":return Ry(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},vD=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function gD(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var rp=e=>e.graphicalItems.cartesianItems,GB=oe([fr,Zf],gD),xD=(e,t,n)=>e.filter(n).filter(a=>t?.includeHidden===!0?!0:!a.hide),uu=oe([rp,qr,GB],xD,{memoizeOptions:{resultEqualityCheck:tp}}),bD=oe([uu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Jf)),yD=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),HB=oe([uu],yD),jD=e=>e.map(t=>t.data).filter(Boolean).flat(1),QB=oe([uu],jD,{memoizeOptions:{resultEqualityCheck:tp}}),ND=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:l}=t;return e.length>0?e:n.slice(a,l+1)},By=oe([QB,Oy],ND),_D=(e,t,n)=>t?.dataKey!=null?e.map(a=>({value:Zt(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:Zt(l,a)}))):e.map(a=>({value:a})),np=oe([By,qr,uu],_D);function SD(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function am(e){if(ma(e)||e instanceof Date){var t=Number(e);if(at(t))return t}}function a2(e){if(Array.isArray(e)){var t=[am(e[0]),am(e[1])];return Ya(t)?t:void 0}var n=am(e);if(n!=null)return[n,n]}function Ka(e){return e.map(am).filter(Vr)}function VB(e,t,n){return!n||typeof t!="number"||da(t)?[]:n.length?Ka(n.flatMap(a=>{var l=Zt(e,a.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!at(o)||!at(u)))return[t-o,t+u]})):[]}var nr=e=>{var t=pr(e),n=po(e);return cu(e,t,n)},du=oe([nr],e=>e?.dataKey),YB=oe([bD,Oy,nr],fD),wD=(e,t,n,a)=>{var l={},o=t.reduce((u,d)=>{if(d.stackId==null)return u;var f=u[d.stackId];return f==null&&(f=[]),f.push(d),u[d.stackId]=f,u},l);return Object.fromEntries(Object.entries(o).map(u=>{var[d,f]=u,p=a?[...f].reverse():f,h=p.map(Ly);return[d,{stackedData:N6(e,h,n),graphicalItems:p}]}))},db=oe([YB,bD,Yf,sD],wD),CD=(e,t,n,a)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(a==null&&n!=="zAxis"){var u=E6(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},KB=oe([qr],e=>e.allowDataOverflow),Uy=e=>{var t;if(e==null||!("domain"in e))return ub;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Ka(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:ub},ED=oe([qr],Uy),AD=oe([ED,KB],VO),WB=oe([db,ni,fr,AD],CD,{memoizeOptions:{resultEqualityCheck:ep}}),Fy=e=>e.errorBars,XB=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>SD(n,a)),Wm=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=n.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),d=Math.max(...o);return[u,d]}},zD=(e,t,n,a,l)=>{var o,u;if(n.length>0&&e.forEach(d=>{n.forEach(f=>{var p,h,v=(p=a[f.id])===null||p===void 0?void 0:p.filter(C=>SD(l,C)),b=Zt(d,(h=t.dataKey)!==null&&h!==void 0?h:f.dataKey),x=VB(d,b,v);if(x.length>=2){var N=Math.min(...x),j=Math.max(...x);(o==null||N<o)&&(o=N),(u==null||j>u)&&(u=j)}var S=a2(b);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),u=u==null?S[1]:Math.max(u,S[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var f=a2(Zt(d,t.dataKey));f!=null&&(o=o==null?f[0]:Math.min(o,f[0]),u=u==null?f[1]:Math.max(u,f[1]))}),at(o)&&at(u))return[o,u]},ZB=oe([By,qr,HB,Fy,fr],zD,{memoizeOptions:{resultEqualityCheck:ep}});function JB(e){var{value:t}=e;if(ma(t)||t instanceof Date)return t}var e9=(e,t,n)=>{var a=e.map(JB).filter(l=>l!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&HA(a))?mO(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},OD=e=>e.referenceElements.dots,ho=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),t9=oe([OD,fr,Zf],ho),DD=e=>e.referenceElements.areas,r9=oe([DD,fr,Zf],ho),MD=e=>e.referenceElements.lines,n9=oe([MD,fr,Zf],ho),kD=(e,t)=>{if(e!=null){var n=Ka(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},a9=oe(t9,fr,kD),PD=(e,t)=>{if(e!=null){var n=Ka(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},i9=oe([r9,fr],PD);function s9(e){var t;if(e.x!=null)return Ka([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return n==null||n.length===0?[]:Ka(n)}function l9(e){var t;if(e.y!=null)return Ka([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return n==null||n.length===0?[]:Ka(n)}var TD=(e,t)=>{if(e!=null){var n=e.flatMap(a=>t==="xAxis"?s9(a):l9(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},o9=oe([n9,fr],TD),c9=oe(a9,o9,i9,(e,t,n)=>Wm(e,n,t)),qD=(e,t,n,a,l,o,u,d)=>{if(n!=null)return n;var f=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",p=f?Wm(a,o,l):Wm(o,l);return jB(t,p,e.allowDataOverflow)},u9=oe([qr,ED,AD,WB,ZB,c9,ht,fr],qD,{memoizeOptions:{resultEqualityCheck:ep}}),d9=[0,1],RD=(e,t,n,a,l,o,u)=>{if(!((e==null||n==null||n.length===0)&&u===void 0)){var{dataKey:d,type:f}=e,p=Ja(t,o);if(p&&d==null){var h;return mO(0,(h=n?.length)!==null&&h!==void 0?h:0)}return f==="category"?e9(a,e,p):l==="expand"?d9:u}},Gy=oe([qr,ht,By,np,Yf,fr,u9],RD);function m9(e){return e in Ec}var ID=(e,t,n)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(Jc(a));return m9(o)?o:"point"}}},vo=oe([qr,vD,ky],ID);function Hy(e,t,n,a){if(!(n==null||a==null))return typeof e.scale=="function"?r2(e.scale,n,a):r2(t,n,a)}var LD=(e,t,n)=>{var a=Uy(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Ya(e))return CB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ya(e))return EB(e,t.tickCount,t.allowDecimals)}},Qy=oe([Gy,cu,vo],LD),$D=(e,t,n,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Ya(t)&&Array.isArray(n)&&n.length>0){var l,o,u=t[0],d=(l=n[0])!==null&&l!==void 0?l:0,f=t[1],p=(o=n[n.length-1])!==null&&o!==void 0?o:0;return[Math.min(u,d),Math.max(f,p)]}return t},f9=oe([qr,Gy,Qy,fr],$D),p9=oe(np,qr,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(Ka(e.map(v=>v.value))).sort((v,b)=>v-b),l=a[0],o=a[a.length-1];if(l==null||o==null)return 1/0;var u=o-l;if(u===0)return 1/0;for(var d=0;d<a.length-1;d++){var f=a[d],p=a[d+1];if(!(f==null||p==null)){var h=p-f;n=Math.min(n,h)}}return n/u}}),BD=oe(p9,ht,iD,dr,(e,t,n,a,l)=>l,(e,t,n,a,l)=>{if(!at(e))return 0;var o=t==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=Qn(n,e*o),d=e*o/2;return d-u-(d-u)/o*u}return 0}),h9=(e,t,n)=>{var a=ai(e,t);return a==null||typeof a.padding!="string"?0:BD(e,"xAxis",t,n,a.padding)},v9=(e,t,n)=>{var a=ii(e,t);return a==null||typeof a.padding!="string"?0:BD(e,"yAxis",t,n,a.padding)},g9=oe(ai,h9,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((n=l.left)!==null&&n!==void 0?n:0)+t,right:((a=l.right)!==null&&a!==void 0?a:0)+t}}),x9=oe(ii,v9,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((n=l.top)!==null&&n!==void 0?n:0)+t,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+t}}),b9=oe([dr,g9,Pf,kf,(e,t,n)=>n],(e,t,n,a,l)=>{var{padding:o}=a;return l?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),y9=oe([dr,ht,x9,Pf,kf,(e,t,n)=>n],(e,t,n,a,l,o)=>{var{padding:u}=l;return o?[a.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),mu=(e,t,n,a)=>{var l;switch(t){case"xAxis":return b9(e,n,a);case"yAxis":return y9(e,n,a);case"zAxis":return(l=$y(e,n))===null||l===void 0?void 0:l.range;case"angleAxis":return uD(e);case"radiusAxis":return dD(e,n);default:return}},UD=oe([qr,mu],Kf),j9=oe([vo,f9],IB),ap=oe([qr,vo,j9,UD],Hy);oe([uu,Fy,fr],XB);function FD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ip=(e,t)=>t,sp=(e,t,n)=>n,N9=oe(Df,ip,sp,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(FD)),_9=oe(Mf,ip,sp,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(FD)),GD=(e,t)=>({width:e.width,height:t.height}),S9=(e,t)=>{var n=typeof t.width=="number"?t.width:ru;return{width:n,height:e.height}},HD=oe(dr,ai,GD),w9=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},C9=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},E9=oe(ti,dr,N9,ip,sp,(e,t,n,a,l)=>{var o={},u;return n.forEach(d=>{var f=GD(t,d);u==null&&(u=w9(t,a,e));var p=a==="top"&&!l||a==="bottom"&&l;o[d.id]=u-Number(p)*f.height,u+=(p?-1:1)*f.height}),o}),A9=oe(ei,dr,_9,ip,sp,(e,t,n,a,l)=>{var o={},u;return n.forEach(d=>{var f=S9(t,d);u==null&&(u=C9(t,a,e));var p=a==="left"&&!l||a==="right"&&l;o[d.id]=u-Number(p)*f.width,u+=(p?-1:1)*f.width}),o}),z9=(e,t)=>{var n=ai(e,t);if(n!=null)return E9(e,n.orientation,n.mirror)},O9=oe([dr,ai,z9,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),D9=(e,t)=>{var n=ii(e,t);if(n!=null)return A9(e,n.orientation,n.mirror)},M9=oe([dr,ii,D9,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),QD=oe(dr,ii,(e,t)=>{var n=typeof t.width=="number"?t.width:ru;return{width:n,height:e.height}}),i2=(e,t,n)=>{switch(t){case"xAxis":return HD(e,n).width;case"yAxis":return QD(e,n).height;default:return}},VD=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=n,d=Ja(e,a),f=t.map(p=>p.value);if(u&&d&&o==="category"&&l&&HA(f))return f}},Vy=oe([ht,np,qr,fr],VD),YD=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:o}=n,u=Ja(e,a);if(u&&(l==="number"||o!=="auto"))return t.map(d=>d.value)}},Yy=oe([ht,np,cu,fr],YD),s2=oe([ht,FB,vo,ap,Vy,Yy,mu,Qy,fr],(e,t,n,a,l,o,u,d,f)=>{if(t!=null){var p=Ja(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:o,duplicateDomain:l,isCategorical:p,niceTicks:d,range:u,realScaleType:n,scale:a}}}),k9=(e,t,n,a,l,o,u,d,f)=>{if(!(t==null||a==null)){var p=Ja(e,f),{type:h,ticks:v,tickCount:b}=t,x=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,N=h==="category"&&a.bandwidth?a.bandwidth()/x:0;N=f==="angleAxis"&&o!=null&&o.length>=2?Qr(o[0]-o[1])*2*N:N;var j=v||l;return j?j.map((S,C)=>{var A=u?u.indexOf(S):S,w=a.map(A);return at(w)?{index:C,coordinate:w+N,value:S,offset:N}:null}).filter(Vr):p&&d?d.map((S,C)=>{var A=a.map(S);return at(A)?{coordinate:A+N,value:S,index:C,offset:N}:null}).filter(Vr):a.ticks?a.ticks(b).map((S,C)=>{var A=a.map(S);return at(A)?{coordinate:A+N,value:S,index:C,offset:N}:null}).filter(Vr):a.domain().map((S,C)=>{var A=a.map(S);return at(A)?{coordinate:A+N,value:u?u[S]:S,index:C,offset:N}:null}).filter(Vr)}},KD=oe([ht,cu,vo,ap,Qy,mu,Vy,Yy,fr],k9),P9=(e,t,n,a,l,o,u)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var d=Ja(e,u),{tickCount:f}=t,p=0;return p=u==="angleAxis"&&a?.length>=2?Qr(a[0]-a[1])*2*p:p,d&&o?o.map((h,v)=>{var b=n.map(h);return at(b)?{coordinate:b+p,value:h,index:v,offset:p}:null}).filter(Vr):n.ticks?n.ticks(f).map((h,v)=>{var b=n.map(h);return at(b)?{coordinate:b+p,value:h,index:v,offset:p}:null}).filter(Vr):n.domain().map((h,v)=>{var b=n.map(h);return at(b)?{coordinate:b+p,value:l?l[h]:h,index:v,offset:p}:null}).filter(Vr)}},Qi=oe([ht,cu,ap,mu,Vy,Yy,fr],P9),Vi=oe(qr,ap,(e,t)=>{if(!(e==null||t==null))return Km(Km({},e),{},{scale:t})}),T9=oe([qr,vo,Gy,UD],Hy);oe((e,t,n)=>$y(e,n),T9,(e,t)=>{if(!(e==null||t==null))return Km(Km({},e),{},{scale:t})});var q9=oe([ht,Df,Mf],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),WD=e=>e.options.defaultTooltipEventType,XD=e=>e.options.validateTooltipEventTypes;function ZD(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function Ky(e,t){var n=WD(e),a=XD(e);return ZD(t,n,a)}function R9(e){return Te(t=>Ky(t,e))}var JD=(e,t)=>{var n,a=Number(t);if(!(da(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},I9=e=>e.tooltip.settings,Ri={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},L9={itemInteraction:{click:Ri,hover:Ri},axisInteraction:{click:Ri,hover:Ri},keyboardInteraction:Ri,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},eM=Kr({name:"tooltip",initialState:L9,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ot()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,l=Gn(e).tooltipItemPayloads.indexOf(n);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:Ot()},removeTooltipEntrySettings:{reducer(e,t){var n=Gn(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Ot()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:$9,replaceTooltipEntrySettings:B9,removeTooltipEntrySettings:U9,setTooltipSettingsState:F9,setActiveMouseOverItemIndex:tM,mouseLeaveItem:G9,mouseLeaveChart:rM,setActiveClickItemIndex:H9,setMouseOverAxisIndex:nM,setMouseClickAxisIndex:Q9,setSyncInteraction:mb,setKeyboardInteraction:fb}=eM.actions,V9=eM.reducer;function l2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(n),!0).forEach(function(a){Y9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Y9(e,t,n){return(t=K9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K9(e){var t=W9(e,"string");return typeof t=="symbol"?t:t+""}function W9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X9(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Z9(e){return e.index!=null}var aM=(e,t,n,a)=>{if(t==null)return Ri;var l=X9(e,t,n);if(l==null)return Ri;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(Z9(l)){if(o)return Gd(Gd({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Gd(Gd({},Ri),{},{coordinate:l.coordinate})};function J9(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function eU(e,t){var n=J9(e),a=t[0],l=t[1];if(n===void 0)return!1;var o=Math.min(a,l),u=Math.max(a,l);return n>=o&&n<=u}function tU(e,t,n){if(n==null||t==null)return!0;var a=Zt(e,t);return a==null||!Ya(n)?!0:eU(a,n)}var Wy=(e,t,n,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!at(o))return l;var u=0,d=1/0;t.length>0&&(d=t.length-1);var f=Math.max(u,Math.min(o,d)),p=t[f];return p==null||tU(p,n,a)?String(f):null},iM=(e,t,n,a,l,o,u)=>{if(o!=null){var d=u[0],f=d?.getPosition(o);if(f!=null)return f;var p=l?.[Number(o)];if(p)return n==="horizontal"?{x:p.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:p.coordinate}}},sM=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(n==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(u=>{var d;return((d=u.settings)===null||d===void 0?void 0:d.graphicalItemId)===l})},lM=e=>e.options.tooltipPayloadSearcher,go=e=>e.tooltip;function o2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function c2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(n),!0).forEach(function(a){rU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rU(e,t,n){return(t=nU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nU(e){var t=aU(e,"string");return typeof t=="symbol"?t:t+""}function aU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iU(e,t){return e??t}var oM=(e,t,n,a,l,o,u)=>{if(!(t==null||o==null)){var{chartData:d,computedData:f,dataStartIndex:p,dataEndIndex:h}=n,v=[];return e.reduce((b,x)=>{var N,{dataDefinedOnItem:j,settings:S}=x,C=iU(j,d),A=Array.isArray(C)?Rz(C,p,h):C,w=(N=S?.dataKey)!==null&&N!==void 0?N:a,E=S?.nameKey,D;if(a&&Array.isArray(A)&&!Array.isArray(A[0])&&u==="axis"?D=QA(A,a,l):D=o(A,t,f,E),Array.isArray(D))D.forEach(T=>{var P=c2(c2({},S),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});b.push(ow({tooltipEntrySettings:P,dataKey:T.dataKey,payload:T.payload,value:Zt(T.payload,T.dataKey),name:T.name}))});else{var O;b.push(ow({tooltipEntrySettings:S,dataKey:w,payload:D,value:Zt(D,w),name:(O=Zt(D,E))!==null&&O!==void 0?O:S?.name}))}return b},v)}},Xy=oe([nr,vD,ky],ID),sU=oe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),lU=oe([pr,po],gD),xo=oe([sU,nr,lU],xD,{memoizeOptions:{resultEqualityCheck:tp}}),oU=oe([xo],e=>e.filter(Jf)),cU=oe([xo],jD,{memoizeOptions:{resultEqualityCheck:tp}}),bo=oe([cU,ni],ND),uU=oe([oU,ni,nr],fD),Zy=oe([bo,nr,xo],_D),cM=oe([nr],Uy),dU=oe([nr],e=>e.allowDataOverflow),uM=oe([cM,dU],VO),mU=oe([xo],e=>e.filter(Jf)),fU=oe([uU,mU,Yf,sD],wD),pU=oe([fU,ni,pr,uM],CD),hU=oe([xo],yD),vU=oe([bo,nr,hU,Fy,pr],zD,{memoizeOptions:{resultEqualityCheck:ep}}),gU=oe([OD,pr,po],ho),xU=oe([gU,pr],kD),bU=oe([DD,pr,po],ho),yU=oe([bU,pr],PD),jU=oe([MD,pr,po],ho),NU=oe([jU,pr],TD),_U=oe([xU,NU,yU],Wm),SU=oe([nr,cM,uM,pU,vU,_U,ht,pr],qD),fu=oe([nr,ht,bo,Zy,Yf,pr,SU],RD),wU=oe([fu,nr,Xy],LD),CU=oe([nr,fu,wU,pr],$D),dM=e=>{var t=pr(e),n=po(e),a=!1;return mu(e,t,n,a)},mM=oe([nr,dM],Kf),fM=oe([nr,Xy,CU,mM],Hy),EU=oe([ht,Zy,nr,pr],VD),AU=oe([ht,Zy,nr,pr],YD),zU=(e,t,n,a,l,o,u,d)=>{if(t){var{type:f}=t,p=Ja(e,d);if(a){var h=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,v=f==="category"&&a.bandwidth?a.bandwidth()/h:0;return v=d==="angleAxis"&&l!=null&&l?.length>=2?Qr(l[0]-l[1])*2*v:v,p&&u?u.map((b,x)=>{var N=a.map(b);return at(N)?{coordinate:N+v,value:b,index:x,offset:v}:null}).filter(Vr):a.domain().map((b,x)=>{var N=a.map(b);return at(N)?{coordinate:N+v,value:o?o[b]:b,index:x,offset:v}:null}).filter(Vr)}}},si=oe([ht,nr,Xy,fM,dM,EU,AU,pr],zU),Jy=oe([WD,XD,I9],(e,t,n)=>ZD(n.shared,e,t)),pM=e=>e.tooltip.settings.trigger,ej=e=>e.tooltip.settings.defaultIndex,pu=oe([go,Jy,pM,ej],aM),Ls=oe([pu,bo,du,fu],Wy),hM=oe([si,Ls],JD),vM=oe([pu],e=>{if(e)return e.dataKey});oe([pu],e=>{if(e)return e.graphicalItemId});var gM=oe([go,Jy,pM,ej],sM),OU=oe([ei,ti,ht,dr,si,ej,gM],iM),DU=oe([pu,OU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),MU=oe([pu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),kU=oe([gM,Ls,ni,du,hM,lM,Jy],oM),PU=oe([kU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function u2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function d2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u2(Object(n),!0).forEach(function(a){TU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TU(e,t,n){return(t=qU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qU(e){var t=RU(e,"string");return typeof t=="symbol"?t:t+""}function RU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IU=()=>Te(nr),LU=()=>{var e=IU(),t=Te(si),n=Te(fM);return io(!e||!n?void 0:d2(d2({},e),{},{scale:n}),t)};function m2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ul(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(n),!0).forEach(function(a){$U(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $U(e,t,n){return(t=BU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BU(e){var t=UU(e,"string");return typeof t=="symbol"?t:t+""}function UU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FU=(e,t,n,a)=>{var l=t.find(o=>o&&o.index===n);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},GU=(e,t,n,a)=>{var l=t.find(p=>p&&p.index===n);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=a;return Ul(Ul(Ul({},a),Nr(a.cx,a.cy,u,o)),{},{angle:o,radius:u})}var d=l.coordinate,{angle:f}=a;return Ul(Ul(Ul({},a),Nr(a.cx,a.cy,d,f)),{},{angle:f,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function HU(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var xM=(e,t,n,a,l)=>{var o,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var d=0;d<u;d++){var f,p,h,v,b,x=d>0?(f=n[d-1])===null||f===void 0?void 0:f.coordinate:(p=n[u-1])===null||p===void 0?void 0:p.coordinate,N=(h=n[d])===null||h===void 0?void 0:h.coordinate,j=d>=u-1?(v=n[0])===null||v===void 0?void 0:v.coordinate:(b=n[d+1])===null||b===void 0?void 0:b.coordinate,S=void 0;if(!(x==null||N==null||j==null))if(Qr(N-x)!==Qr(j-N)){var C=[];if(Qr(j-N)===Qr(l[1]-l[0])){S=j;var A=N+l[1]-l[0];C[0]=Math.min(A,(A+x)/2),C[1]=Math.max(A,(A+x)/2)}else{S=x;var w=j+l[1]-l[0];C[0]=Math.min(N,(w+N)/2),C[1]=Math.max(N,(w+N)/2)}var E=[Math.min(N,(S+N)/2),Math.max(N,(S+N)/2)];if(e>E[0]&&e<=E[1]||e>=C[0]&&e<=C[1]){var D;return(D=n[d])===null||D===void 0?void 0:D.index}}else{var O=Math.min(x,j),T=Math.max(x,j);if(e>(O+N)/2&&e<=(T+N)/2){var P;return(P=n[d])===null||P===void 0?void 0:P.index}}}else if(t)for(var I=0;I<u;I++){var R=t[I];if(R!=null){var F=t[I+1],B=t[I-1];if(I===0&&F!=null&&e<=(R.coordinate+F.coordinate)/2||I===u-1&&B!=null&&e>(R.coordinate+B.coordinate)/2||I>0&&I<u-1&&B!=null&&F!=null&&e>(R.coordinate+B.coordinate)/2&&e<=(R.coordinate+F.coordinate)/2)return R.index}}return-1},QU=()=>Te(ky),tj=(e,t)=>t,bM=(e,t,n)=>n,rj=(e,t,n,a)=>a,VU=oe(si,e=>yf(e,t=>t.coordinate)),nj=oe([go,tj,bM,rj],aM),aj=oe([nj,bo,du,fu],Wy),YU=(e,t,n)=>{if(t!=null){var a=go(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},yM=oe([go,tj,bM,rj],sM),Xm=oe([ei,ti,ht,dr,si,rj,yM],iM),KU=oe([nj,Xm],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),jM=oe([si,aj],JD),WU=oe([yM,aj,ni,du,jM,lM,tj],oM),XU=oe([nj,aj],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),ZU=(e,t,n,a,l,o,u)=>{if(!(!e||!n||!a||!l)&&HU(e,u)){var d=A6(e,t),f=xM(d,o,l,n,a),p=FU(t,l,f,e);return{activeIndex:String(f),activeCoordinate:p}}},JU=(e,t,n,a,l,o,u)=>{if(!(!e||!a||!l||!o||!n)){var d=q8(e,n);if(d){var f=z6(d,t),p=xM(f,u,o,a,l),h=GU(t,o,p,d);return{activeIndex:String(p),activeCoordinate:h}}}},eF=(e,t,n,a,l,o,u,d)=>{if(!(!e||!t||!a||!l||!o))return t==="horizontal"||t==="vertical"?ZU(e,t,a,l,o,u,d):JU(e,t,n,a,l,o,u)},tF=oe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var a=e[t];if(a!=null)return n?a.panoramaElement:a.element}}),rF=oe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(ur)),n=Array.from(new Set(t));return n.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:qB}});function f2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function p2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(n),!0).forEach(function(a){nF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nF(e,t,n){return(t=aF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aF(e){var t=iF(e,"string");return typeof t=="symbol"?t:t+""}function iF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sF={},lF={zIndexMap:Object.values(ur).reduce((e,t)=>p2(p2({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),sF)},oF=new Set(Object.values(ur));function cF(e){return oF.has(e)}var NM=Kr({name:"zIndex",initialState:lF,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ot()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!cF(n)&&delete e.zIndexMap[n])},prepare:Ot()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:a,isPanorama:l}=t.payload;e.zIndexMap[n]?l?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:l?void 0:a,panoramaElement:l?a:void 0}},prepare:Ot()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:Ot()}}}),{registerZIndexPortal:uF,unregisterZIndexPortal:dF,registerZIndexPortalElement:mF,unregisterZIndexPortalElement:fF}=NM.actions,pF=NM.reducer;function qn(e){var{zIndex:t,children:n}=e,a=lL(),l=a&&t!==void 0&&t!==0,o=Ar(),u=Qt();g.useLayoutEffect(()=>l?(u(uF({zIndex:t})),()=>{u(dF({zIndex:t}))}):Gs,[u,t,l]);var d=Te(f=>tF(f,t,o));return l?d?nA.createPortal(n,d):null:n}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pb.apply(null,arguments)}function h2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Hd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h2(Object(n),!0).forEach(function(a){hF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hF(e,t,n){return(t=vF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vF(e){var t=gF(e,"string");return typeof t=="symbol"?t:t+""}function gF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xF(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return g.isValidElement(t)?g.cloneElement(t,a):g.createElement(n,a)}function bF(e){var t,{coordinate:n,payload:a,index:l,offset:o,tooltipAxisBandSize:u,layout:d,cursor:f,tooltipEventType:p,chartName:h}=e,v=n,b=a,x=l;if(!f||!v||h!=="ScatterChart"&&p!=="axis")return null;var N,j,S;if(h==="ScatterChart")N=v,j=KL,S=ur.cursorLine;else if(h==="BarChart")N=WL(d,v,o,u),j=oO,S=ur.cursorRectangle;else if(d==="radial"&&KA(v)){var{cx:C,cy:A,radius:w,startAngle:E,endAngle:D}=cO(v);N={cx:C,cy:A,startAngle:E,endAngle:D,innerRadius:w,outerRadius:w},j=dO,S=ur.cursorLine}else N={points:$8(d,v,o)},j=nO,S=ur.cursorLine;var O=typeof f=="object"&&"className"in f?f.className:void 0,T=Hd(Hd(Hd(Hd({stroke:"#ccc",pointerEvents:"none"},o),N),Zc(f)),{},{payload:b,payloadIndex:x,className:jt("recharts-tooltip-cursor",O)});return g.createElement(qn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},g.createElement(xF,{cursor:f,cursorComp:j,cursorProps:T}))}function yF(e){var t=LU(),n=Gz(),a=Hs(),l=QU();return t==null||n==null||a==null||l==null?null:g.createElement(bF,pb({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:l}))}var _M=g.createContext(null),jF=()=>g.useContext(_M),ax={exports:{}},v2;function NF(){return v2||(v2=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function l(f,p,h){this.fn=f,this.context=p,this.once=h||!1}function o(f,p,h,v,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new l(h,v||f,b),N=n?n+p:p;return f._events[N]?f._events[N].fn?f._events[N]=[f._events[N],x]:f._events[N].push(x):(f._events[N]=x,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new a:delete f._events[p]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],h,v;if(this._eventsCount===0)return p;for(v in h=this._events)t.call(h,v)&&p.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},d.prototype.listeners=function(p){var h=n?n+p:p,v=this._events[h];if(!v)return[];if(v.fn)return[v.fn];for(var b=0,x=v.length,N=new Array(x);b<x;b++)N[b]=v[b].fn;return N},d.prototype.listenerCount=function(p){var h=n?n+p:p,v=this._events[h];return v?v.fn?1:v.length:0},d.prototype.emit=function(p,h,v,b,x,N){var j=n?n+p:p;if(!this._events[j])return!1;var S=this._events[j],C=arguments.length,A,w;if(S.fn){switch(S.once&&this.removeListener(p,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,v),!0;case 4:return S.fn.call(S.context,h,v,b),!0;case 5:return S.fn.call(S.context,h,v,b,x),!0;case 6:return S.fn.call(S.context,h,v,b,x,N),!0}for(w=1,A=new Array(C-1);w<C;w++)A[w-1]=arguments[w];S.fn.apply(S.context,A)}else{var E=S.length,D;for(w=0;w<E;w++)switch(S[w].once&&this.removeListener(p,S[w].fn,void 0,!0),C){case 1:S[w].fn.call(S[w].context);break;case 2:S[w].fn.call(S[w].context,h);break;case 3:S[w].fn.call(S[w].context,h,v);break;case 4:S[w].fn.call(S[w].context,h,v,b);break;default:if(!A)for(D=1,A=new Array(C-1);D<C;D++)A[D-1]=arguments[D];S[w].fn.apply(S[w].context,A)}}return!0},d.prototype.on=function(p,h,v){return o(this,p,h,v,!1)},d.prototype.once=function(p,h,v){return o(this,p,h,v,!0)},d.prototype.removeListener=function(p,h,v,b){var x=n?n+p:p;if(!this._events[x])return this;if(!h)return u(this,x),this;var N=this._events[x];if(N.fn)N.fn===h&&(!b||N.once)&&(!v||N.context===v)&&u(this,x);else{for(var j=0,S=[],C=N.length;j<C;j++)(N[j].fn!==h||b&&!N[j].once||v&&N[j].context!==v)&&S.push(N[j]);S.length?this._events[x]=S.length===1?S[0]:S:u(this,x)}return this},d.prototype.removeAllListeners=function(p){var h;return p?(h=n?n+p:p,this._events[h]&&u(this,h)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(ax)),ax.exports}var _F=NF();const SF=Xa(_F);var Vc=new SF,hb="recharts.syncEvent.tooltip",g2="recharts.syncEvent.brush",SM=(e,t)=>{if(t&&Array.isArray(e)){var n=Number.parseInt(t,10);if(!da(n))return e[n]}},wF={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},wM=Kr({name:"options",initialState:wF,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),CF=wM.reducer,{createEventEmitter:EF}=wM.actions;function AF(e){return e.tooltip.syncInteraction}var zF={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},CM=Kr({name:"chartData",initialState:zF,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:x2,setDataStartEndIndexes:OF,setComputedData:Aee}=CM.actions,DF=CM.reducer,MF=["x","y"];function b2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b2(Object(n),!0).forEach(function(a){kF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kF(e,t,n){return(t=PF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PF(e){var t=TF(e,"string");return typeof t=="symbol"?t:t+""}function TF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qF(e,t){if(e==null)return{};var n,a,l=RF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function RF(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function IF(){var e=Te(Py),t=Te(Ty),n=Qt(),a=Te(lD),l=Te(si),o=Hs(),u=Tf(),d=Te(f=>f.rootProps.className);g.useEffect(()=>{if(e==null)return Gs;var f=(p,h,v)=>{if(t!==v&&e===p){if(a==="index"){var b;if(u&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var x=h.payload.coordinate,{x:N,y:j}=x,S=qF(x,MF),{x:C,y:A,width:w,height:E}=h.payload.sourceViewBox,D=Fl(Fl({},S),{},{x:u.x+(w?(N-C)/w:0)*u.width,y:u.y+(E?(j-A)/E:0)*u.height});n(Fl(Fl({},h),{},{payload:Fl(Fl({},h.payload),{},{coordinate:D})}))}else n(h);return}if(l!=null){var O;if(typeof a=="function"){var T={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},P=a(l,T);O=l[P]}else a==="value"&&(O=l.find(q=>String(q.value)===h.payload.label));var{coordinate:I}=h.payload;if(O==null||h.payload.active===!1||I==null||u==null){n(mb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:R,y:F}=I,B=Math.min(R,u.x+u.width),G=Math.min(F,u.y+u.height),V={x:o==="horizontal"?O.coordinate:B,y:o==="horizontal"?G:O.coordinate},M=mb({active:h.payload.active,coordinate:V,dataKey:h.payload.dataKey,index:String(O.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(M)}}};return Vc.on(hb,f),()=>{Vc.off(hb,f)}},[d,n,t,e,a,l,o,u])}function LF(){var e=Te(Py),t=Te(Ty),n=Qt();g.useEffect(()=>{if(e==null)return Gs;var a=(l,o,u)=>{t!==u&&e===l&&n(OF(o))};return Vc.on(g2,a),()=>{Vc.off(g2,a)}},[n,t,e])}function $F(){var e=Qt();g.useEffect(()=>{e(EF())},[e]),IF(),LF()}function BF(e,t,n,a,l,o){var u=Te(x=>YU(x,e,t)),d=Te(Ty),f=Te(Py),p=Te(lD),h=Te(AF),v=h?.active,b=Tf();g.useEffect(()=>{if(!v&&f!=null&&d!=null){var x=mb({active:o,coordinate:n,dataKey:u,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:b,graphicalItemId:void 0});Vc.emit(hb,f,x,d)}},[v,n,u,l,a,d,f,p,o,b])}function y2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function j2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(n),!0).forEach(function(a){UF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function UF(e,t,n){return(t=FF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FF(e){var t=GF(e,"string");return typeof t=="symbol"?t:t+""}function GF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HF(e){return e.dataKey}function QF(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(AL,t)}var N2=[],VF={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function _2(e){var t,n,a=Tr(e,VF),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:f,filterNull:p,isAnimationActive:h,offset:v,payloadUniqBy:b,position:x,reverseDirection:N,useTranslate3d:j,wrapperStyle:S,cursor:C,shared:A,trigger:w,defaultIndex:E,portal:D,axisId:O}=a,T=Qt(),P=typeof E=="number"?String(E):E;g.useEffect(()=>{T(F9({shared:A,trigger:w,axisId:O,active:l,defaultIndex:P}))},[T,A,w,O,l,P]);var I=Tf(),R=rO(),F=R9(A),{activeIndex:B,isActive:G}=(t=Te(he=>XU(he,F,w,P)))!==null&&t!==void 0?t:{},V=Te(he=>WU(he,F,w,P)),M=Te(he=>jM(he,F,w,P)),q=Te(he=>KU(he,F,w,P)),X=V,Q=jF(),$=(n=l??G)!==null&&n!==void 0?n:!1,[L,pe]=f4([X,$]),te=F==="axis"?M:void 0;BF(F,w,q,te,B,$);var de=D??Q;if(de==null||I==null||F==null)return null;var me=X??N2;$||(me=N2),p&&me.length&&(me=LI(me.filter(he=>he.value!=null&&(he.hide!==!0||a.includeHidden)),b,HF));var xe=me.length>0,Y=g.createElement(TL,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:h,active:$,coordinate:q,hasPayload:xe,offset:v,position:x,reverseDirection:N,useTranslate3d:j,viewBox:I,wrapperStyle:S,lastBoundingBox:L,innerRef:pe,hasPortalFromProps:!!D},QF(f,j2(j2({},a),{},{payload:me,label:te,active:$,activeIndex:B,coordinate:q,accessibilityLayer:R})));return g.createElement(g.Fragment,null,nA.createPortal(Y,de),$&&g.createElement(yF,{cursor:C,tooltipEventType:F,coordinate:q,payload:me,index:B}))}var ij=e=>null;ij.displayName="Cell";function YF(e,t,n){return(t=KF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KF(e){var t=WF(e,"string");return typeof t=="symbol"?t:t+""}function WF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class XF{constructor(t){YF(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function S2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ZF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(n),!0).forEach(function(a){JF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JF(e,t,n){return(t=eG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eG(e){var t=tG(e,"string");return typeof t=="symbol"?t:t+""}function tG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rG={cacheSize:2e3,enableCache:!0},EM=ZF({},rG),w2=new XF(EM.cacheSize),nG={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},C2="recharts_measurement_span";function aG(e,t){var n=t.fontSize||"",a=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",u=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(d)}var E2=(e,t)=>{try{var n=document.getElementById(C2);n||(n=document.createElement("span"),n.setAttribute("id",C2),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,nG,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},Oc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lf.isSsr)return{width:0,height:0};if(!EM.enableCache)return E2(t,n);var a=aG(t,n),l=w2.get(a);if(l)return l;var o=E2(t,n);return w2.set(a,o),o},AM;function iG(e,t,n){return(t=sG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sG(e){var t=lG(e,"string");return typeof t=="symbol"?t:t+""}function lG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,z2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dG=["cm","mm","pt","pc","in","Q","px"];function mG(e){return dG.includes(e)}var Xl="NaN";function fG(e,t){return e*uG[t]}class jr{static parse(t){var n,[,a,l]=(n=cG.exec(t))!==null&&n!==void 0?n:[];return a==null?jr.NaN:new jr(parseFloat(a),l??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,da(t)&&(this.unit=""),n!==""&&!oG.test(n)&&(this.num=NaN,this.unit=""),mG(n)&&(this.num=fG(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new jr(NaN,""):new jr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new jr(NaN,""):new jr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new jr(NaN,""):new jr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new jr(NaN,""):new jr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return da(this.num)}}AM=jr;iG(jr,"NaN",new AM(NaN,""));function zM(e){if(e==null||e.includes(Xl))return Xl;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,l,o]=(n=A2.exec(t))!==null&&n!==void 0?n:[],u=jr.parse(a??""),d=jr.parse(o??""),f=l==="*"?u.multiply(d):u.divide(d);if(f.isNaN())return Xl;t=t.replace(A2,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,h,v,b]=(p=z2.exec(t))!==null&&p!==void 0?p:[],x=jr.parse(h??""),N=jr.parse(b??""),j=v==="+"?x.add(N):x.subtract(N);if(j.isNaN())return Xl;t=t.replace(z2,j.toString())}return t}var O2=/\(([^()]*)\)/;function pG(e){for(var t=e,n;(n=O2.exec(t))!=null;){var[,a]=n;t=t.replace(O2,zM(a))}return t}function hG(e){var t=e.replace(/\s+/g,"");return t=pG(t),t=zM(t),t}function vG(e){try{return hG(e)}catch{return Xl}}function ix(e){var t=vG(e.slice(5,-1));return t===Xl?"":t}var gG=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],xG=["dx","dy","angle","className","breakAll"];function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vb.apply(null,arguments)}function D2(e,t){if(e==null)return{};var n,a,l=bG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function bG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var OM=/[ \f\n\r\t\v\u2028\u2029]+/,DM=e=>{var{children:t,breakAll:n,style:a}=e;try{var l=[];Tt(t)||(n?l=t.toString().split(""):l=t.toString().split(OM));var o=l.map(d=>({word:d,width:Oc(d,a).width})),u=n?0:Oc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function yG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var MM=(e,t,n,a)=>e.reduce((l,o)=>{var{word:u,width:d}=o,f=l[l.length-1];if(f&&d!=null&&(t==null||a||f.width+d+n<Number(t)))f.words.push(u),f.width+=d+n;else{var p={words:[u],width:d};l.push(p)}return l},[]),kM=e=>e.reduce((t,n)=>t.width>n.width?t:n),jG="",M2=(e,t,n,a,l,o,u,d)=>{var f=e.slice(0,t),p=DM({breakAll:n,style:a,children:f+jG});if(!p)return[!1,[]];var h=MM(p.wordsWithComputedWidth,o,u,d),v=h.length>l||kM(h).width>Number(o);return[v,h]},NG=(e,t,n,a,l)=>{var{maxLines:o,children:u,style:d,breakAll:f}=e,p=Ae(o),h=String(u),v=MM(t,a,n,l);if(!p||l)return v;var b=v.length>o||kM(v).width>Number(a);if(!b)return v;for(var x=0,N=h.length-1,j=0,S;x<=N&&j<=h.length-1;){var C=Math.floor((x+N)/2),A=C-1,[w,E]=M2(h,A,f,d,o,a,n,l),[D]=M2(h,C,f,d,o,a,n,l);if(!w&&!D&&(x=C+1),w&&D&&(N=C-1),!w&&D){S=E;break}j++}return S||v},k2=e=>{var t=Tt(e)?[]:e.toString().split(OM);return[{words:t,width:void 0}]},_G=e=>{var{width:t,scaleToFit:n,children:a,style:l,breakAll:o,maxLines:u}=e;if((t||n)&&!Lf.isSsr){var d,f,p=DM({breakAll:o,children:a,style:l});if(p){var{wordsWithComputedWidth:h,spaceWidth:v}=p;d=h,f=v}else return k2(a);return NG({breakAll:o,children:a,maxLines:u,style:l},d,f,t,!!n)}return k2(a)},PM="#808080",SG={angle:0,breakAll:!1,capHeight:"0.71em",fill:PM,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},sj=g.forwardRef((e,t)=>{var n=Tr(e,SG),{x:a,y:l,lineHeight:o,capHeight:u,fill:d,scaleToFit:f,textAnchor:p,verticalAnchor:h}=n,v=D2(n,gG),b=g.useMemo(()=>_G({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),{dx:x,dy:N,angle:j,className:S,breakAll:C}=v,A=D2(v,xG);if(!ma(a)||!ma(l)||b.length===0)return null;var w=Number(a)+(Ae(x)?x:0),E=Number(l)+(Ae(N)?N:0);if(!at(w)||!at(E))return null;var D;switch(h){case"start":D=ix("calc(".concat(u,")"));break;case"middle":D=ix("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:D=ix("calc(".concat(b.length-1," * -").concat(o,")"));break}var O=[],T=b[0];if(f&&T!=null){var P=T.width,{width:I}=v;O.push("scale(".concat(Ae(I)&&Ae(P)?I/P:1,")"))}return j&&O.push("rotate(".concat(j,", ").concat(w,", ").concat(E,")")),O.length&&(A.transform=O.join(" ")),g.createElement("text",vb({},kr(A),{ref:t,x:w,y:E,className:jt("recharts-text",S),textAnchor:p,fill:d.includes("url")?PM:d}),b.map((R,F)=>{var B=R.words.join(C?"":" ");return g.createElement("tspan",{x:w,dy:F===0?D:o,key:"".concat(B,"-").concat(F)},B)}))});sj.displayName="Text";function P2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(n),!0).forEach(function(a){wG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wG(e,t,n){return(t=CG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CG(e){var t=EG(e,"string");return typeof t=="symbol"?t:t+""}function EG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AG=e=>{var{viewBox:t,position:n,offset:a=0,parentViewBox:l}=e,{x:o,y:u,height:d,upperWidth:f,lowerWidth:p}=ay(t),h=o,v=o+(f-p)/2,b=(h+v)/2,x=(f+p)/2,N=h+f/2,j=d>=0?1:-1,S=j*a,C=j>0?"end":"start",A=j>0?"start":"end",w=f>=0?1:-1,E=w*a,D=w>0?"end":"start",O=w>0?"start":"end",T=l;if(n==="top"){var P={x:h+f/2,y:u-S,horizontalAnchor:"middle",verticalAnchor:C};return T&&(P.height=Math.max(u-T.y,0),P.width=f),P}if(n==="bottom"){var I={x:v+p/2,y:u+d+S,horizontalAnchor:"middle",verticalAnchor:A};return T&&(I.height=Math.max(T.y+T.height-(u+d),0),I.width=p),I}if(n==="left"){var R={x:b-E,y:u+d/2,horizontalAnchor:D,verticalAnchor:"middle"};return T&&(R.width=Math.max(R.x-T.x,0),R.height=d),R}if(n==="right"){var F={x:b+x+E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"};return T&&(F.width=Math.max(T.x+T.width-F.x,0),F.height=d),F}var B=T?{width:x,height:d}:{};return n==="insideLeft"?ia({x:b+E,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"},B):n==="insideRight"?ia({x:b+x-E,y:u+d/2,horizontalAnchor:D,verticalAnchor:"middle"},B):n==="insideTop"?ia({x:h+f/2,y:u+S,horizontalAnchor:"middle",verticalAnchor:A},B):n==="insideBottom"?ia({x:v+p/2,y:u+d-S,horizontalAnchor:"middle",verticalAnchor:C},B):n==="insideTopLeft"?ia({x:h+E,y:u+S,horizontalAnchor:O,verticalAnchor:A},B):n==="insideTopRight"?ia({x:h+f-E,y:u+S,horizontalAnchor:D,verticalAnchor:A},B):n==="insideBottomLeft"?ia({x:v+E,y:u+d-S,horizontalAnchor:O,verticalAnchor:C},B):n==="insideBottomRight"?ia({x:v+p-E,y:u+d-S,horizontalAnchor:D,verticalAnchor:C},B):n&&typeof n=="object"&&(Ae(n.x)||Ps(n.x))&&(Ae(n.y)||Ps(n.y))?ia({x:o+Qn(n.x,x),y:u+Qn(n.y,d),horizontalAnchor:"end",verticalAnchor:"end"},B):ia({x:N,y:u+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},B)},zG=["labelRef"],OG=["content"];function T2(e,t){if(e==null)return{};var n,a,l=DG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function DG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function q2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ac(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(n),!0).forEach(function(a){MG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function MG(e,t,n){return(t=kG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kG(e){var t=PG(e,"string");return typeof t=="symbol"?t:t+""}function PG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ra.apply(null,arguments)}var TM=g.createContext(null),TG=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:u,children:d}=e,f=g.useMemo(()=>({x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:u}),[t,n,a,l,o,u]);return g.createElement(TM.Provider,{value:f},d)},qM=()=>{var e=g.useContext(TM),t=Tf();return e||(t?ay(t):void 0)},qG=g.createContext(null),RG=()=>{var e=g.useContext(qG),t=Te(mD);return e||t},IG=e=>{var{value:t,formatter:n}=e,a=Tt(e.children)?t:e.children;return typeof n=="function"?n(a):a},lj=e=>e!=null&&typeof e=="function",LG=(e,t)=>{var n=Qr(t-e),a=Math.min(Math.abs(t-e),360);return n*a},$G=(e,t,n,a,l)=>{var{offset:o,className:u}=e,{cx:d,cy:f,innerRadius:p,outerRadius:h,startAngle:v,endAngle:b,clockWise:x}=l,N=(p+h)/2,j=LG(v,b),S=j>=0?1:-1,C,A;switch(t){case"insideStart":C=v+S*o,A=x;break;case"insideEnd":C=b-S*o,A=!x;break;case"end":C=b+S*o,A=x;break;default:throw new Error("Unsupported position ".concat(t))}A=j<=0?A:!A;var w=Nr(d,f,N,C),E=Nr(d,f,N,C+(A?1:-1)*359),D="M".concat(w.x,",").concat(w.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),O=Tt(e.id)?Pc("recharts-radial-line-"):e.id;return g.createElement("text",Ra({},a,{dominantBaseline:"central",className:jt("recharts-radial-bar-label",u)}),g.createElement("defs",null,g.createElement("path",{id:O,d:D})),g.createElement("textPath",{xlinkHref:"#".concat(O)},n))},BG=(e,t,n)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:u,startAngle:d,endAngle:f}=e,p=(d+f)/2;if(n==="outside"){var{x:h,y:v}=Nr(a,l,u+t,p);return{x:h,y:v,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(o+u)/2,{x,y:N}=Nr(a,l,b,p);return{x,y:N,textAnchor:"middle",verticalAnchor:"middle"}},im=e=>e!=null&&"cx"in e&&Ae(e.cx),UG={angle:0,offset:5,zIndex:ur.label,position:"middle",textBreakAll:!1};function FG(e){if(!im(e))return e;var{cx:t,cy:n,outerRadius:a}=e,l=a*2;return{x:t-a,y:n-a,width:l,upperWidth:l,lowerWidth:l,height:l}}function qi(e){var t=Tr(e,UG),{viewBox:n,parentViewBox:a,position:l,value:o,children:u,content:d,className:f="",textBreakAll:p,labelRef:h}=t,v=RG(),b=qM(),x=l==="center"?b:v??b,N,j,S;n==null?N=x:im(n)?N=n:N=ay(n);var C=FG(N);if(!N||Tt(o)&&Tt(u)&&!g.isValidElement(d)&&typeof d!="function")return null;var A=Ac(Ac({},t),{},{viewBox:N});if(g.isValidElement(d)){var{labelRef:w}=A,E=T2(A,zG);return g.cloneElement(d,E)}if(typeof d=="function"){var{content:D}=A,O=T2(A,OG);if(j=g.createElement(d,O),g.isValidElement(j))return j}else j=IG(t);var T=kr(t);if(im(N)){if(l==="insideStart"||l==="insideEnd"||l==="end")return $G(t,l,j,T,N);S=BG(N,t.offset,t.position)}else{if(!C)return null;var P=AG({viewBox:C,position:l,offset:t.offset,parentViewBox:im(a)?void 0:a});S=Ac(Ac({x:P.x,y:P.y,textAnchor:P.horizontalAnchor,verticalAnchor:P.verticalAnchor},P.width!==void 0?{width:P.width}:{}),P.height!==void 0?{height:P.height}:{})}return g.createElement(qn,{zIndex:t.zIndex},g.createElement(sj,Ra({ref:h,className:jt("recharts-label",f)},T,S,{textAnchor:yG(T.textAnchor)?T.textAnchor:S.textAnchor,breakAll:p}),j))}qi.displayName="Label";var GG=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?g.createElement(qi,Ra({key:"label-implicit"},a)):ma(e)?g.createElement(qi,Ra({key:"label-implicit",value:e},a)):g.isValidElement(e)?e.type===qi?g.cloneElement(e,Ac({key:"label-implicit"},a)):g.createElement(qi,Ra({key:"label-implicit",content:e},a)):lj(e)?g.createElement(qi,Ra({key:"label-implicit",content:e},a)):e&&typeof e=="object"?g.createElement(qi,Ra({},e,{key:"label-implicit"},a)):null};function HG(e){var{label:t,labelRef:n}=e,a=qM();return GG(t,a,n)||null}var sx={},lx={},R2;function QG(){return R2||(R2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(lx)),lx}var ox={},I2;function VG(){return I2||(I2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(ox)),ox}var L2;function YG(){return L2||(L2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QG(),n=VG(),a=Vb();function l(o){if(a.isArrayLike(o))return t.last(n.toArray(o))}e.last=l})(sx)),sx}var cx,$2;function KG(){return $2||($2=1,cx=YG().last),cx}var WG=KG();const XG=Xa(WG);var ZG=["valueAccessor"],JG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zm.apply(null,arguments)}function B2(e,t){if(e==null)return{};var n,a,l=eH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function eH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var tH=e=>Array.isArray(e.value)?XG(e.value):e.value,RM=g.createContext(void 0),IM=RM.Provider,LM=g.createContext(void 0);LM.Provider;function rH(){return g.useContext(RM)}function nH(){return g.useContext(LM)}function sm(e){var{valueAccessor:t=tH}=e,n=B2(e,ZG),{dataKey:a,clockWise:l,id:o,textBreakAll:u,zIndex:d}=n,f=B2(n,JG),p=rH(),h=nH(),v=p||h;return!v||!v.length?null:g.createElement(qn,{zIndex:d??ur.label},g.createElement(Mn,{className:"recharts-label-list"},v.map((b,x)=>{var N,j=Tt(a)?t(b,x):Zt(b.payload,a),S=Tt(o)?{}:{id:"".concat(o,"-").concat(x)};return g.createElement(qi,Zm({key:"label-".concat(x)},kr(b),f,S,{fill:(N=n.fill)!==null&&N!==void 0?N:b.fill,parentViewBox:b.parentViewBox,value:j,textBreakAll:u,viewBox:b.viewBox,index:x,zIndex:0}))})))}sm.displayName="LabelList";function $M(e){var{label:t}=e;return t?t===!0?g.createElement(sm,{key:"labelList-implicit"}):g.isValidElement(t)||lj(t)?g.createElement(sm,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(sm,Zm({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function gb(){return gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gb.apply(null,arguments)}var BM=e=>{var{cx:t,cy:n,r:a,className:l}=e,o=jt("recharts-dot",l);return Ae(t)&&Ae(n)&&Ae(a)?g.createElement("circle",gb({},Hn(e),Hb(e),{className:o,cx:t,cy:n,r:a})):null},aH={radiusAxis:{},angleAxis:{}},UM=Kr({name:"polarAxis",initialState:aH,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:zee,removeRadiusAxis:Oee,addAngleAxis:Dee,removeAngleAxis:Mee}=UM.actions,iH=UM.reducer;function sH(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var ux={exports:{}},bt={};var U2;function lH(){if(U2)return bt;U2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function N(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case n:case l:case a:case f:case p:case b:return j;default:switch(j=j&&j.$$typeof,j){case u:case d:case v:case h:return j;case o:return j;default:return S}}case t:return S}}}return bt.ContextConsumer=o,bt.ContextProvider=u,bt.Element=e,bt.ForwardRef=d,bt.Fragment=n,bt.Lazy=v,bt.Memo=h,bt.Portal=t,bt.Profiler=l,bt.StrictMode=a,bt.Suspense=f,bt.SuspenseList=p,bt.isContextConsumer=function(j){return N(j)===o},bt.isContextProvider=function(j){return N(j)===u},bt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},bt.isForwardRef=function(j){return N(j)===d},bt.isFragment=function(j){return N(j)===n},bt.isLazy=function(j){return N(j)===v},bt.isMemo=function(j){return N(j)===h},bt.isPortal=function(j){return N(j)===t},bt.isProfiler=function(j){return N(j)===l},bt.isStrictMode=function(j){return N(j)===a},bt.isSuspense=function(j){return N(j)===f},bt.isSuspenseList=function(j){return N(j)===p},bt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===l||j===a||j===f||j===p||typeof j=="object"&&j!==null&&(j.$$typeof===v||j.$$typeof===h||j.$$typeof===u||j.$$typeof===o||j.$$typeof===d||j.$$typeof===x||j.getModuleId!==void 0)},bt.typeOf=N,bt}var F2;function oH(){return F2||(F2=1,ux.exports=lH()),ux.exports}var cH=oH(),G2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",H2=null,dx=null,FM=e=>{if(e===H2&&Array.isArray(dx))return dx;var t=[];return g.Children.forEach(e,n=>{Tt(n)||(cH.isFragment(n)?t=t.concat(FM(n.props.children)):t.push(n))}),dx=t,H2=e,t};function uH(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(l=>G2(l)):a=[G2(t)],FM(e).forEach(l=>{var o=no(l,"type.displayName")||no(l,"type.name");o&&a.indexOf(o)!==-1&&n.push(l)}),n}var GM=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,mx={},Q2;function dH(){return Q2||(Q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const l=n[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${l}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(mx)),mx}var fx,V2;function mH(){return V2||(V2=1,fx=dH().isPlainObject),fx}var fH=mH();const pH=Xa(fH);var Y2,K2,W2,X2,Z2;function J2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function eE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(n),!0).forEach(function(a){hH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hH(e,t,n){return(t=vH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vH(e){var t=gH(e,"string");return typeof t=="symbol"?t:t+""}function gH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jm(){return Jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jm.apply(null,arguments)}function jc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var tE=(e,t,n,a,l)=>{var o=n-a,u;return u=Bt(Y2||(Y2=jc(["M ",",",""])),e,t),u+=Bt(K2||(K2=jc(["L ",",",""])),e+n,t),u+=Bt(W2||(W2=jc(["L ",",",""])),e+n-o/2,t+l),u+=Bt(X2||(X2=jc(["L ",",",""])),e+n-o/2-a,t+l),u+=Bt(Z2||(Z2=jc(["L ",","," Z"])),e,t),u},xH={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bH=e=>{var t=Tr(e,xH),{x:n,y:a,upperWidth:l,lowerWidth:o,height:u,className:d}=t,{animationEasing:f,animationDuration:p,animationBegin:h,isUpdateAnimationActive:v}=t,b=g.useRef(null),[x,N]=g.useState(-1),j=g.useRef(l),S=g.useRef(o),C=g.useRef(u),A=g.useRef(n),w=g.useRef(a),E=Bf(e,"trapezoid-");if(g.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var V=b.current.getTotalLength();V&&N(V)}catch{}},[]),n!==+n||a!==+a||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var D=jt("recharts-trapezoid",d);if(!v)return g.createElement("g",null,g.createElement("path",Jm({},kr(t),{className:D,d:tE(n,a,l,o,u)})));var O=j.current,T=S.current,P=C.current,I=A.current,R=w.current,F="0px ".concat(x===-1?1:x,"px"),B="".concat(x,"px 0px"),G=aO(["strokeDasharray"],p,f);return g.createElement($f,{animationId:E,key:E,canBegin:x>0,duration:p,easing:f,isActive:v,begin:h},V=>{var M=Ut(O,l,V),q=Ut(T,o,V),X=Ut(P,u,V),Q=Ut(I,n,V),$=Ut(R,a,V);b.current&&(j.current=M,S.current=q,C.current=X,A.current=Q,w.current=$);var L=V>0?{transition:G,strokeDasharray:B}:{strokeDasharray:F};return g.createElement("path",Jm({},kr(t),{className:D,d:tE(Q,$,M,q,X),ref:b,style:eE(eE({},L),t.style)}))})},yH=["option","shapeType","activeClassName"];function jH(e,t){if(e==null)return{};var n,a,l=NH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function NH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rE(Object(n),!0).forEach(function(a){_H(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _H(e,t,n){return(t=SH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SH(e){var t=wH(e,"string");return typeof t=="symbol"?t:t+""}function wH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CH(e,t){return ef(ef({},t),e)}function EH(e,t){return e==="symbols"}function nE(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return g.createElement(oO,n);case"trapezoid":return g.createElement(bH,n);case"sector":return g.createElement(dO,n);case"symbols":if(EH(t))return g.createElement(YA,n);break;case"curve":return g.createElement(nO,n);default:return null}}function AH(e){return g.isValidElement(e)?e.props:e}function HM(e){var{option:t,shapeType:n,activeClassName:a="recharts-active-shape"}=e,l=jH(e,yH),o;if(g.isValidElement(t))o=g.cloneElement(t,ef(ef({},l),AH(t)));else if(typeof t=="function")o=t(l,l.index);else if(pH(t)&&typeof t!="boolean"){var u=CH(t,l);o=g.createElement(nE,{shapeType:n,elementProps:u})}else{var d=l;o=g.createElement(nE,{shapeType:n,elementProps:d})}return l.isActive?g.createElement(Mn,{className:a},o):o}var QM=(e,t,n)=>{var a=Qt();return(l,o)=>u=>{e?.(l,o,u),a(tM({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}},VM=e=>{var t=Qt();return(n,a)=>l=>{e?.(n,a,l),t(G9())}},YM=(e,t,n)=>{var a=Qt();return(l,o)=>u=>{e?.(l,o,u),a(H9({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}};function KM(e){var{tooltipEntrySettings:t}=e,n=Qt(),a=Ar(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n($9(t)):l.current!==t&&n(B9({prev:l.current,next:t})),l.current=t)},[t,n,a]),g.useLayoutEffect(()=>()=>{l.current&&(n(U9(l.current)),l.current=null)},[n]),null}function WM(e){var{legendPayload:t}=e,n=Qt(),a=Ar(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n(yL(t)):l.current!==t&&n(jL({prev:l.current,next:t})),l.current=t)},[n,a,t]),g.useLayoutEffect(()=>()=>{l.current&&(n(NL(l.current)),l.current=null)},[n]),null}var px,zH=()=>{var[e]=g.useState(()=>Pc("uid-"));return e},OH=(px=_q.useId)!==null&&px!==void 0?px:zH;function DH(e,t){var n=OH();return t||(e?"".concat(e,"-").concat(n):n)}var MH=g.createContext(void 0),XM=e=>{var{id:t,type:n,children:a}=e,l=DH("recharts-".concat(n),t);return g.createElement(MH.Provider,{value:l},a(l))},kH={cartesianItems:[],polarItems:[]},ZM=Kr({name:"graphicalItems",initialState:kH,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ot()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,l=Gn(e).cartesianItems.indexOf(n);l>-1&&(e.cartesianItems[l]=a)},prepare:Ot()},removeCartesianGraphicalItem:{reducer(e,t){var n=Gn(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Ot()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ot()},removePolarGraphicalItem:{reducer(e,t){var n=Gn(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Ot()}}}),{addCartesianGraphicalItem:PH,replaceCartesianGraphicalItem:TH,removeCartesianGraphicalItem:qH,addPolarGraphicalItem:kee,removePolarGraphicalItem:Pee}=ZM.actions,RH=ZM.reducer,IH=e=>{var t=Qt(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(PH(e)):n.current!==e&&t(TH({prev:n.current,next:e})),n.current=e},[t,e]),g.useLayoutEffect(()=>()=>{n.current&&(t(qH(n.current)),n.current=null)},[t]),null},JM=g.memo(IH),LH=["points"];function aE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function hx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(n),!0).forEach(function(a){$H(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $H(e,t,n){return(t=BH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BH(e){var t=UH(e,"string");return typeof t=="symbol"?t:t+""}function UH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tf(){return tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tf.apply(null,arguments)}function FH(e,t){if(e==null)return{};var n,a,l=GH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function GH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function HH(e){var{option:t,dotProps:n,className:a}=e;if(g.isValidElement(t))return g.cloneElement(t,n);if(typeof t=="function")return t(n);var l=jt(a,typeof t!="boolean"?t.className:""),o=n??{},{points:u}=o,d=FH(o,LH);return g.createElement(BM,tf({},d,{className:l}))}function QH(e,t){return e==null?!1:t?!0:e.length===1}function VH(e){var{points:t,dot:n,className:a,dotClassName:l,dataKey:o,baseProps:u,needClip:d,clipPathId:f,zIndex:p=ur.scatter}=e;if(!QH(t,n))return null;var h=GM(n),v=d5(n),b=t.map((N,j)=>{var S,C,A=hx(hx(hx({r:3},u),v),{},{index:j,cx:(S=N.x)!==null&&S!==void 0?S:void 0,cy:(C=N.y)!==null&&C!==void 0?C:void 0,dataKey:o,value:N.value,payload:N.payload,points:t});return g.createElement(HH,{key:"dot-".concat(j),option:n,dotProps:A,className:l})}),x={};return d&&f!=null&&(x.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(f,")")),g.createElement(qn,{zIndex:p},g.createElement(Mn,tf({className:a},x),b))}function iE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(n),!0).forEach(function(a){YH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YH(e,t,n){return(t=KH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ek=0,XH={xAxis:{},yAxis:{},zAxis:{}},tk=Kr({name:"cartesianAxis",initialState:XH,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ot()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:Ot()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ot()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ot()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:Ot()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ot()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ot()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:Ot()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ot()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,l=e.yAxis[n];if(l){var o,u=l.widthHistory||[];if(u.length===3&&u[0]===u[2]&&a===u[1]&&a!==l.width&&Math.abs(a-((o=u[0])!==null&&o!==void 0?o:0))<=1)return;var d=[...u,a].slice(-3);e.yAxis[n]=sE(sE({},l),{},{width:a,widthHistory:d})}}}}),{addXAxis:ZH,replaceXAxis:JH,removeXAxis:eQ,addYAxis:tQ,replaceYAxis:rQ,removeYAxis:nQ,addZAxis:Tee,replaceZAxis:qee,removeZAxis:Ree,updateYAxisWidth:aQ}=tk.actions,iQ=tk.reducer,sQ=oe([dr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),lQ=oe([sQ,ei,ti],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),oj=()=>Te(lQ),oQ=()=>Te(PU);function lE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function vx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(n),!0).forEach(function(a){cQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cQ(e,t,n){return(t=uQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uQ(e){var t=dQ(e,"string");return typeof t=="symbol"?t:t+""}function dQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mQ=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||t.x==null||t.y==null)return null;var d={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},f=vx(vx(vx({},d),Zc(l)),Hb(l)),p;return g.isValidElement(l)?p=g.cloneElement(l,f):typeof l=="function"?p=l(f):p=g.createElement(BM,f),g.createElement(Mn,{className:"recharts-active-dot",clipPath:u},p)};function fQ(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:l,clipPath:o,zIndex:u=ur.activeDot}=e,d=Te(Ls),f=oQ();if(t==null||f==null)return null;var p=t.find(h=>f.includes(h.payload));return Tt(p)?null:g.createElement(qn,{zIndex:u},g.createElement(mQ,{point:p,childIndex:Number(d),mainColor:n,dataKey:l,activeDot:a,clipPath:o}))}var oE=(e,t,n)=>{var a=n??e;if(!Tt(a))return Qn(a,t,0)},pQ=(e,t,n)=>{var a={},l=e.filter(Jf),o=e.filter(p=>p.stackId==null),u=l.reduce((p,h)=>{var v=p[h.stackId];return v==null&&(v=[]),v.push(h),p[h.stackId]=v,p},a),d=Object.entries(u).map(p=>{var h,[v,b]=p,x=b.map(j=>j.dataKey),N=oE(t,n,(h=b[0])===null||h===void 0?void 0:h.barSize);return{stackId:v,dataKeys:x,barSize:N}}),f=o.map(p=>{var h=[p.dataKey].filter(b=>b!=null),v=oE(t,n,p.barSize);return{stackId:void 0,dataKeys:h,barSize:v}});return[...d,...f]};function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(a){hQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hQ(e,t,n){return(t=vQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vQ(e){var t=gQ(e,"string");return typeof t=="symbol"?t:t+""}function gQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xQ(e,t,n,a,l){var o,u=a.length;if(!(u<1)){var d=Qn(e,n,0,!0),f,p=[];if(at((o=a[0])===null||o===void 0?void 0:o.barSize)){var h=!1,v=n/u,b=a.reduce((A,w)=>A+(w.barSize||0),0);b+=(u-1)*d,b>=n&&(b-=(u-1)*d,d=0),b>=n&&v>0&&(h=!0,v*=.9,b=u*v);var x=(n-b)/2>>0,N={offset:x-d,size:0};f=a.reduce((A,w)=>{var E,D={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:N.offset+N.size+d,size:h?v:(E=w.barSize)!==null&&E!==void 0?E:0}},O=[...A,D];return N=D.position,O},p)}else{var j=Qn(t,n,0,!0);n-2*j-(u-1)*d<=0&&(d=0);var S=(n-2*j-(u-1)*d)/u;S>1&&(S>>=0);var C=at(l)?Math.min(S,l):S;f=a.reduce((A,w,E)=>[...A,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:j+(S+d)*E+(S-C)/2,size:C}}],p)}return f}}var bQ=(e,t,n,a,l,o,u)=>{var d=Tt(u)?t:u,f=xQ(n,a,l!==o?l:o,e,d);return l!==o&&f!=null&&(f=f.map(p=>Qd(Qd({},p),{},{position:Qd(Qd({},p.position),{},{offset:p.position.offset-l/2})}))),f},yQ=(e,t)=>{var n=Ly(t);if(!(!e||n==null||t==null)){var{stackId:a}=t;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(u=>u.key===n)}}}},jQ=(e,t)=>{if(!(e==null||t==null)){var n=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(n!=null)return n.position}};function NQ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&at(e.zIndex)?e.zIndex:t}var _Q=e=>{var{chartData:t}=e,n=Qt(),a=Ar();return g.useEffect(()=>a?()=>{}:(n(x2(t)),()=>{n(x2(void 0))}),[t,n,a]),null},uE={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},rk=Kr({name:"brush",initialState:uE,reducers:{setBrushSettings(e,t){return t.payload==null?uE:t.payload}}}),{setBrushSettings:Iee}=rk.actions,SQ=rk.reducer;function wQ(e){return(e%180+180)%180}var CQ=function(t){var{width:n,height:a}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=wQ(l),u=o*Math.PI/180,d=Math.atan(a/n),f=u>d&&u<Math.PI-d?a/Math.sin(u):n/Math.cos(u);return Math.abs(f)},EQ={dots:[],areas:[],lines:[]},nk=Kr({name:"referenceElements",initialState:EQ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Gn(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Gn(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Gn(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Lee,removeDot:$ee,addArea:Bee,removeArea:Uee,addLine:Fee,removeLine:Gee}=nk.actions,AQ=nk.reducer,zQ=g.createContext(void 0),OQ=e=>{var{children:t}=e,[n]=g.useState("".concat(Pc("recharts"),"-clip")),a=oj();if(a==null)return null;var{x:l,y:o,width:u,height:d}=a;return g.createElement(zQ.Provider,{value:n},g.createElement("defs",null,g.createElement("clipPath",{id:n},g.createElement("rect",{x:l,y:o,height:d,width:u}))),t)};function ak(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],a=0;a<e.length;a+=t){var l=e[a];l!==void 0&&n.push(l)}return n}function DQ(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return CQ(a,n)}function MQ(e,t,n){var a=n==="width",{x:l,y:o,width:u,height:d}=e;return t===1?{start:a?l:o,end:a?l+u:o+d}:{start:a?l+u:o+d,end:a?l:o}}function Yc(e,t,n,a,l){if(e*t<e*a||e*t>e*l)return!1;var o=n();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-l)<=0}function kQ(e,t){return ak(e,t+1)}function PQ(e,t,n,a,l){for(var o=(a||[]).slice(),{start:u,end:d}=t,f=0,p=1,h=u,v=function(){var N=a?.[f];if(N===void 0)return{v:ak(a,p)};var j=f,S,C=()=>(S===void 0&&(S=n(N,j)),S),A=N.coordinate,w=f===0||Yc(e,A,C,h,d);w||(f=0,h=u,p+=1),w&&(h=A+e*(C()/2+l),f+=p)},b;p<=o.length;)if(b=v(),b)return b.v;return[]}function TQ(e,t,n,a,l){var o=(a||[]).slice(),u=o.length;if(u===0)return[];for(var{start:d,end:f}=t,p=1;p<=u;p++){for(var h=(u-1)%p,v=d,b=!0,x=function(){var E=a[j];if(E==null)return 0;var D=j,O,T=()=>(O===void 0&&(O=n(E,D)),O),P=E.coordinate,I=j===h||Yc(e,P,T,v,f);if(!I)return b=!1,1;I&&(v=P+e*(T()/2+l))},N,j=h;j<u&&(N=x(),!(N!==0&&N===1));j+=p);if(b){for(var S=[],C=h;C<u;C+=p){var A=a[C];A!=null&&S.push(A)}return S}}return[]}function dE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(n),!0).forEach(function(a){qQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qQ(e,t,n){return(t=RQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RQ(e){var t=IQ(e,"string");return typeof t=="symbol"?t:t+""}function IQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LQ(e,t,n,a,l){for(var o=(a||[]).slice(),u=o.length,{start:d}=t,{end:f}=t,p=function(b){var x=o[b];if(x==null)return 1;var N=x,j,S=()=>(j===void 0&&(j=n(x,b)),j);if(b===u-1){var C=e*(N.coordinate+e*S()/2-f);o[b]=N=wr(wr({},N),{},{tickCoord:C>0?N.coordinate-C*e:N.coordinate})}else o[b]=N=wr(wr({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var A=Yc(e,N.tickCoord,S,d,f);A&&(f=N.tickCoord-e*(S()/2+l),o[b]=wr(wr({},N),{},{isShow:!0}))}},h=u-1;h>=0;h--)p(h);return o}function $Q(e,t,n,a,l,o){var u=(a||[]).slice(),d=u.length,{start:f,end:p}=t;if(o){var h=a[d-1];if(h!=null){var v=n(h,d-1),b=e*(h.coordinate+e*v/2-p);if(u[d-1]=h=wr(wr({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate}),h.tickCoord!=null){var x=Yc(e,h.tickCoord,()=>v,f,p);x&&(p=h.tickCoord-e*(v/2+l),u[d-1]=wr(wr({},h),{},{isShow:!0}))}}}for(var N=o?d-1:d,j=function(A){var w=u[A];if(w==null)return 1;var E=w,D,O=()=>(D===void 0&&(D=n(w,A)),D);if(A===0){var T=e*(E.coordinate-e*O()/2-f);u[A]=E=wr(wr({},E),{},{tickCoord:T<0?E.coordinate-T*e:E.coordinate})}else u[A]=E=wr(wr({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var P=Yc(e,E.tickCoord,O,f,p);P&&(f=E.tickCoord+e*(O()/2+l),u[A]=wr(wr({},E),{},{isShow:!0}))}},S=0;S<N;S++)j(S);return u}function cj(e,t,n){var{tick:a,ticks:l,viewBox:o,minTickGap:u,orientation:d,interval:f,tickFormatter:p,unit:h,angle:v}=e;if(!l||!l.length||!a)return[];if(Ae(f)||Lf.isSsr){var b;return(b=kQ(l,Ae(f)?f:0))!==null&&b!==void 0?b:[]}var x=[],N=d==="top"||d==="bottom"?"width":"height",j=h&&N==="width"?Oc(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(D,O)=>{var T=typeof p=="function"?p(D.value,O):D.value;return N==="width"?DQ(Oc(T,{fontSize:t,letterSpacing:n}),j,v):Oc(T,{fontSize:t,letterSpacing:n})[N]},C=l[0],A=l[1],w=l.length>=2&&C!=null&&A!=null?Qr(A.coordinate-C.coordinate):1,E=MQ(o,w,N);return f==="equidistantPreserveStart"?PQ(w,E,S,l,u):f==="equidistantPreserveEnd"?TQ(w,E,S,l,u):(f==="preserveStart"||f==="preserveStartEnd"?x=$Q(w,E,S,l,u,f==="preserveStartEnd"):x=LQ(w,E,S,l,u),x.filter(D=>D.isShow))}var BQ=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(t){Array.from(t).forEach(h=>{if(h){var v=h.getBoundingClientRect();v.width>u&&(u=v.width)}});var d=n?n.getBoundingClientRect().width:0,f=l+o,p=u+f+d+(n?a:0);return Math.round(p)}return 0},UQ=["axisLine","width","height","className","hide","ticks","axisType"];function FQ(e,t){if(e==null)return{};var n,a,l=GQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function GQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function $s(){return $s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$s.apply(null,arguments)}function mE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(n),!0).forEach(function(a){HQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function HQ(e,t,n){return(t=QQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QQ(e){var t=VQ(e,"string");return typeof t=="symbol"?t:t+""}function VQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ua={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ur.axis};function YQ(e){var{x:t,y:n,width:a,height:l,orientation:o,mirror:u,axisLine:d,otherSvgProps:f}=e;if(!d)return null;var p=Lt(Lt(Lt({},f),Hn(d)),{},{fill:"none"});if(o==="top"||o==="bottom"){var h=+(o==="top"&&!u||o==="bottom"&&u);p=Lt(Lt({},p),{},{x1:t,y1:n+h*l,x2:t+a,y2:n+h*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);p=Lt(Lt({},p),{},{x1:t+v*a,y1:n,x2:t+v*a,y2:n+l})}return g.createElement("line",$s({},p,{className:jt("recharts-cartesian-axis-line",no(d,"className"))}))}function KQ(e,t,n,a,l,o,u,d,f){var p,h,v,b,x,N,j=d?-1:1,S=e.tickSize||u,C=Ae(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":p=h=e.coordinate,b=n+ +!d*l,v=b-j*S,N=v-j*f,x=C;break;case"left":v=b=e.coordinate,h=t+ +!d*a,p=h-j*S,x=p-j*f,N=C;break;case"right":v=b=e.coordinate,h=t+ +d*a,p=h+j*S,x=p+j*f,N=C;break;default:p=h=e.coordinate,b=n+ +d*l,v=b+j*S,N=v+j*f,x=C;break}return{line:{x1:p,y1:v,x2:h,y2:b},tick:{x,y:N}}}function WQ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function XQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function ZQ(e){var{option:t,tickProps:n,value:a}=e,l,o=jt(n.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))l=g.cloneElement(t,Lt(Lt({},n),{},{className:o}));else if(typeof t=="function")l=t(Lt(Lt({},n),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=jt(u,sH(t))),l=g.createElement(sj,$s({},n,{className:u}),a)}return l}var JQ=g.forwardRef((e,t)=>{var{ticks:n=[],tick:a,tickLine:l,stroke:o,tickFormatter:u,unit:d,padding:f,tickTextProps:p,orientation:h,mirror:v,x:b,y:x,width:N,height:j,tickSize:S,tickMargin:C,fontSize:A,letterSpacing:w,getTicksConfig:E,events:D,axisType:O}=e,T=cj(Lt(Lt({},E),{},{ticks:n}),A,w),P=WQ(h,v),I=XQ(h,v),R=Hn(E),F=Zc(a),B={};typeof l=="object"&&(B=l);var G=Lt(Lt({},R),{},{fill:"none"},B),V=T.map(X=>Lt({entry:X},KQ(X,b,x,N,j,h,S,v,C))),M=V.map(X=>{var{entry:Q,line:$}=X;return g.createElement(Mn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},l&&g.createElement("line",$s({},G,$,{className:jt("recharts-cartesian-axis-tick-line",no(l,"className"))})))}),q=V.map((X,Q)=>{var $,L,{entry:pe,tick:te}=X,de=Lt(Lt(Lt(Lt({verticalAnchor:I},R),{},{textAnchor:P,stroke:"none",fill:o},te),{},{index:Q,payload:pe,visibleTicksCount:T.length,tickFormatter:u,padding:f},p),{},{angle:($=(L=p?.angle)!==null&&L!==void 0?L:R.angle)!==null&&$!==void 0?$:0}),me=Lt(Lt({},de),F);return g.createElement(Mn,$s({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(pe.value,"-").concat(pe.coordinate,"-").concat(pe.tickCoord)},Qb(D,pe,Q)),a&&g.createElement(ZQ,{option:a,tickProps:me,value:"".concat(typeof u=="function"?u(pe.value,Q):pe.value).concat(d||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(O,"-ticks")},q.length>0&&g.createElement(qn,{zIndex:ur.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(O,"-tick-labels"),ref:t},q)),M.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(O,"-tick-lines")},M))}),eV=g.forwardRef((e,t)=>{var{axisLine:n,width:a,height:l,className:o,hide:u,ticks:d,axisType:f}=e,p=FQ(e,UQ),[h,v]=g.useState(""),[b,x]=g.useState(""),N=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return BQ({ticks:N.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=g.useCallback(S=>{if(S){var C=S.getElementsByClassName("recharts-cartesian-axis-tick-value");N.current=C;var A=C[0];if(A){var w=window.getComputedStyle(A),E=w.fontSize,D=w.letterSpacing;(E!==h||D!==b)&&(v(E),x(D))}}},[h,b]);return u||a!=null&&a<=0||l!=null&&l<=0?null:g.createElement(qn,{zIndex:e.zIndex},g.createElement(Mn,{className:jt("recharts-cartesian-axis",o)},g.createElement(YQ,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Hn(e)}),g.createElement(JQ,{ref:j,axisType:f,events:p,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(TG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(HG,{label:e.label,labelRef:e.labelRef}),e.children)))}),uj=g.forwardRef((e,t)=>{var n=Tr(e,Ua);return g.createElement(eV,$s({},n,{ref:t}))});uj.displayName="CartesianAxis";var tV=["x1","y1","x2","y2","key"],rV=["offset"],nV=["xAxisId","yAxisId"],aV=["xAxisId","yAxisId"];function fE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(n),!0).forEach(function(a){iV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function iV(e,t,n){return(t=sV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sV(e){var t=lV(e,"string");return typeof t=="symbol"?t:t+""}function lV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cs.apply(null,arguments)}function rf(e,t){if(e==null)return{};var n,a,l=oV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function oV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var cV=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:l,width:o,height:u,ry:d}=e;return g.createElement("rect",{x:a,y:l,ry:d,width:o,height:u,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function ik(e){var{option:t,lineItemProps:n}=e,a;if(g.isValidElement(t))a=g.cloneElement(t,n);else if(typeof t=="function")a=t(n);else{var l,{x1:o,y1:u,x2:d,y2:f,key:p}=n,h=rf(n,tV),v=(l=Hn(h))!==null&&l!==void 0?l:{},{offset:b}=v,x=rf(v,rV);a=g.createElement("line",Cs({},x,{x1:o,y1:u,x2:d,y2:f,fill:"none",key:p}))}return a}function uV(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=rf(e,nV),f=l.map((p,h)=>{var v=Cr(Cr({},d),{},{x1:t,y1:p,x2:t+n,y2:p,key:"line-".concat(h),index:h});return g.createElement(ik,{key:"line-".concat(h),option:a,lineItemProps:v})});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function dV(e){var{y:t,height:n,vertical:a=!0,verticalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=rf(e,aV),f=l.map((p,h)=>{var v=Cr(Cr({},d),{},{x1:p,y1:t,x2:p,y2:t+n,key:"line-".concat(h),index:h});return g.createElement(ik,{option:a,lineItemProps:v,key:"line-".concat(h)})});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function mV(e){var{horizontalFill:t,fillOpacity:n,x:a,y:l,width:o,height:u,horizontalPoints:d,horizontal:f=!0}=e;if(!f||!t||!t.length||d==null)return null;var p=d.map(v=>Math.round(v+l-l)).sort((v,b)=>v-b);l!==p[0]&&p.unshift(0);var h=p.map((v,b)=>{var x=p[b+1],N=x==null,j=N?l+u-v:x-v;if(j<=0)return null;var S=b%t.length;return g.createElement("rect",{key:"react-".concat(b),y:v,x:a,height:j,width:o,stroke:"none",fill:t[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function fV(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:l,y:o,width:u,height:d,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var p=f.map(v=>Math.round(v+l-l)).sort((v,b)=>v-b);l!==p[0]&&p.unshift(0);var h=p.map((v,b)=>{var x=p[b+1],N=x==null,j=N?l+u-v:x-v;if(j<=0)return null;var S=b%n.length;return g.createElement("rect",{key:"react-".concat(b),x:v,y:o,width:j,height:d,stroke:"none",fill:n[S],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var pV=(e,t)=>{var{xAxis:n,width:a,height:l,offset:o}=e;return Iz(cj(Cr(Cr(Cr({},Ua),n),{},{ticks:Lz(n),viewBox:{x:0,y:0,width:a,height:l}})),o.left,o.left+o.width,t)},hV=(e,t)=>{var{yAxis:n,width:a,height:l,offset:o}=e;return Iz(cj(Cr(Cr(Cr({},Ua),n),{},{ticks:Lz(n),viewBox:{x:0,y:0,width:a,height:l}})),o.top,o.top+o.height,t)},vV={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ur.grid};function xb(e){var t=Hz(),n=Qz(),a=Gz(),l=Cr(Cr({},Tr(e,vV)),{},{x:Ae(e.x)?e.x:a.left,y:Ae(e.y)?e.y:a.top,width:Ae(e.width)?e.width:a.width,height:Ae(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:u,x:d,y:f,width:p,height:h,syncWithTicks:v,horizontalValues:b,verticalValues:x}=l,N=Ar(),j=Te(I=>s2(I,"xAxis",o,N)),S=Te(I=>s2(I,"yAxis",u,N));if(!fa(p)||!fa(h)||!Ae(d)||!Ae(f))return null;var C=l.verticalCoordinatesGenerator||pV,A=l.horizontalCoordinatesGenerator||hV,{horizontalPoints:w,verticalPoints:E}=l;if((!w||!w.length)&&typeof A=="function"){var D=b&&b.length,O=A({yAxis:S?Cr(Cr({},S),{},{ticks:D?b:S.ticks}):void 0,width:t??p,height:n??h,offset:a},D?!0:v);Am(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(w=O)}if((!E||!E.length)&&typeof C=="function"){var T=x&&x.length,P=C({xAxis:j?Cr(Cr({},j),{},{ticks:T?x:j.ticks}):void 0,width:t??p,height:n??h,offset:a},T?!0:v);Am(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(E=P)}return g.createElement(qn,{zIndex:l.zIndex},g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(cV,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),g.createElement(mV,Cs({},l,{horizontalPoints:w})),g.createElement(fV,Cs({},l,{verticalPoints:E})),g.createElement(uV,Cs({},l,{offset:a,horizontalPoints:w,xAxis:j,yAxis:S})),g.createElement(dV,Cs({},l,{offset:a,verticalPoints:E,xAxis:j,yAxis:S}))))}xb.displayName="CartesianGrid";var gV={},sk=Kr({name:"errorBars",initialState:gV,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:l}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:Hee,replaceErrorBar:Qee,removeErrorBar:Vee}=sk.actions,xV=sk.reducer,bV=["children"];function yV(e,t){if(e==null)return{};var n,a,l=jV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function jV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var NV={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},_V=g.createContext(NV);function lk(e){var{children:t}=e,n=yV(e,bV);return g.createElement(_V.Provider,{value:n},t)}function dj(e,t){var n,a,l=Te(p=>ai(p,e)),o=Te(p=>ii(p,t)),u=(n=l?.allowDataOverflow)!==null&&n!==void 0?n:lr.allowDataOverflow,d=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:or.allowDataOverflow,f=u||d;return{needClip:f,needClipX:u,needClipY:d}}function ok(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,l=oj(),{needClipX:o,needClipY:u,needClip:d}=dj(t,n);if(!d||!l)return null;var{x:f,y:p,width:h,height:v}=l;return g.createElement("clipPath",{id:"clipPath-".concat(a)},g.createElement("rect",{x:o?f:f-h/2,y:u?p:p-v/2,width:o?h:h*2,height:u?v:v*2}))}var ck=(e,t,n,a)=>Vi(e,"xAxis",t,a),uk=(e,t,n,a)=>Qi(e,"xAxis",t,a),dk=(e,t,n,a)=>Vi(e,"yAxis",n,a),mk=(e,t,n,a)=>Qi(e,"yAxis",n,a),SV=oe([ht,ck,dk,uk,mk],(e,t,n,a,l)=>Ja(e,"xAxis")?io(t,a,!1):io(n,l,!1)),wV=(e,t,n,a,l)=>l;function CV(e){return e.type==="line"}var EV=oe([rp,wV],(e,t)=>e.filter(CV).find(n=>n.id===t)),AV=oe([ht,ck,dk,uk,mk,EV,SV,Oy],(e,t,n,a,l,o,u,d)=>{var{chartData:f,dataStartIndex:p,dataEndIndex:h}=d;if(!(o==null||t==null||n==null||a==null||l==null||a.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:b}=o,x;if(b!=null&&b.length>0?x=b:x=f?.slice(p,h+1),x!=null)return hY({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:x})}});function zV(e){var t=Zc(e),n=3,a=2;if(t!=null){var{r:l,strokeWidth:o}=t,u=Number(l),d=Number(o);return(Number.isNaN(u)||u<0)&&(u=n),(Number.isNaN(d)||d<0)&&(d=a),{r:u,strokeWidth:d}}return{r:n,strokeWidth:a}}var gx={exports:{}},xx={};var pE;function OV(){if(pE)return xx;pE=1;var e=mf();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,d=e.useDebugValue;return xx.useSyncExternalStoreWithSelector=function(f,p,h,v,b){var x=l(null);if(x.current===null){var N={hasValue:!1,value:null};x.current=N}else N=x.current;x=u(function(){function S(D){if(!C){if(C=!0,A=D,D=v(D),b!==void 0&&N.hasValue){var O=N.value;if(b(O,D))return w=O}return w=D}if(O=w,n(A,D))return O;var T=v(D);return b!==void 0&&b(O,T)?(A=D,O):(A=D,w=T)}var C=!1,A,w,E=h===void 0?null:h;return[function(){return S(p())},E===null?void 0:function(){return S(E())}]},[p,h,v,b]);var j=a(f,x[0],x[1]);return o(function(){N.hasValue=!0,N.value=j},[j]),d(j),j},xx}var hE;function DV(){return hE||(hE=1,gx.exports=OV()),gx.exports}DV();function MV(e){e()}function kV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){MV(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const l=t={callback:n,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var vE={notify(){},get:()=>[]};function PV(e,t){let n,a=vE,l=0,o=!1;function u(j){h();const S=a.subscribe(j);let C=!1;return()=>{C||(C=!0,S(),v())}}function d(){a.notify()}function f(){N.onStateChange&&N.onStateChange()}function p(){return o}function h(){l++,n||(n=e.subscribe(f),a=kV())}function v(){l--,n&&l===0&&(n(),n=void 0,a.clear(),a=vE)}function b(){o||(o=!0,h())}function x(){o&&(o=!1,v())}const N={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:p,trySubscribe:b,tryUnsubscribe:x,getListeners:()=>a};return N}var TV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qV=TV(),RV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",IV=RV(),LV=()=>qV||IV?g.useLayoutEffect:g.useEffect,$V=LV();function gE(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function BV(e,t){if(gE(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(!Object.prototype.hasOwnProperty.call(t,n[l])||!gE(e[n[l]],t[n[l]]))return!1;return!0}var UV=Symbol.for("react-redux-context"),FV=typeof globalThis<"u"?globalThis:{};function GV(){if(!g.createContext)return{};const e=FV[UV]??=new Map;let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var HV=GV();function QV(e){const{children:t,context:n,serverState:a,store:l}=e,o=g.useMemo(()=>{const f=PV(l);return{store:l,subscription:f,getServerState:a?()=>a:void 0}},[l,a]),u=g.useMemo(()=>l.getState(),[l]);$V(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==l.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,u]);const d=n||HV;return g.createElement(d.Provider,{value:o},t)}var VV=QV,YV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function KV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function lp(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(YV.has(a)){if(e[a]==null&&t[a]==null)continue;if(!BV(e[a],t[a]))return!1}else if(!KV(e[a],t[a]))return!1;return!0}var WV=["id"],XV=["type","layout","connectNulls","needClip","shape"],ZV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kc.apply(null,arguments)}function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(n),!0).forEach(function(a){JV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JV(e,t,n){return(t=eY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eY(e){var t=tY(e,"string");return typeof t=="symbol"?t:t+""}function tY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mj(e,t){if(e==null)return{};var n,a,l=rY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function rY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var nY=e=>{var{dataKey:t,name:n,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:Of(n,t),payload:e}]},aY=g.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:l,fill:o,name:u,hide:d,unit:f,tooltipType:p,id:h}=e,v={dataDefinedOnItem:n,getPosition:Gs,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:Of(u,t),hide:d,type:p,color:a,unit:f,graphicalItemId:h}};return g.createElement(KM,{tooltipEntrySettings:v})}),fk=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function iY(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],l=0;l<t;++l)a=[...a,...n];return a}var sY=(e,t,n)=>{var a=n.reduce((x,N)=>x+N);if(!a)return fk(t,e);for(var l=Math.floor(e/a),o=e%a,u=t-e,d=[],f=0,p=0;f<n.length;p+=(h=n[f])!==null&&h!==void 0?h:0,++f){var h,v=n[f];if(v!=null&&p+v>o){d=[...n.slice(0,f),o-p];break}}var b=d.length%2===0?[0,u]:[u];return[...iY(n,l),...d,...b].map(x=>"".concat(x,"px")).join(", ")};function lY(e){var{clipPathId:t,points:n,props:a}=e,{dot:l,dataKey:o,needClip:u}=a,{id:d}=a,f=mj(a,WV),p=Hn(f);return g.createElement(VH,{points:n,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:p,needClip:u,clipPathId:t})}function oY(e){var{showLabels:t,children:n,points:a}=e,l=g.useMemo(()=>a?.map(o=>{var u,d,f={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return sa(sa({},f),{},{value:o.value,payload:o.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[a]);return g.createElement(IM,{value:t?l:void 0},n)}function bE(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:l,props:o}=e,{type:u,layout:d,connectNulls:f,needClip:p,shape:h}=o,v=mj(o,XV),b=sa(sa({},kr(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(t,")"):void 0,points:a,type:u,layout:d,connectNulls:f,strokeDasharray:l??o.strokeDasharray});return g.createElement(g.Fragment,null,a?.length>1&&g.createElement(HM,Kc({shapeType:"curve",option:h},b,{pathRef:n})),g.createElement(lY,{points:a,clipPathId:t,props:o}))}function cY(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function uY(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:d,isAnimationActive:f,animationBegin:p,animationDuration:h,animationEasing:v,animateNewValues:b,width:x,height:N,onAnimationEnd:j,onAnimationStart:S}=n,C=l.current,A=Bf(u,"recharts-line-"),w=g.useRef(A),[E,D]=g.useState(!1),O=!E,T=g.useCallback(()=>{typeof j=="function"&&j(),D(!1)},[j]),P=g.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),I=cY(a.current),R=g.useRef(0);w.current!==A&&(R.current=o.current,w.current=A);var F=R.current;return g.createElement(oY,{points:u,showLabels:O},n.children,g.createElement($f,{animationId:A,begin:p,duration:h,isActive:f,easing:v,onAnimationEnd:T,onAnimationStart:P,key:A},B=>{var G=Ut(F,I+F,B),V=Math.min(G,I),M;if(f)if(d){var q="".concat(d).split(/[,\s]+/gim).map($=>parseFloat($));M=sY(V,I,q)}else M=fk(I,V);else M=d==null?void 0:String(d);if(B>0&&I>0&&(l.current=u,o.current=Math.max(o.current,V)),C){var X=C.length/u.length,Q=B===1?u:u.map(($,L)=>{var pe=Math.floor(L*X);if(C[pe]){var te=C[pe];return sa(sa({},$),{},{x:Ut(te.x,$.x,B),y:Ut(te.y,$.y,B)})}return b?sa(sa({},$),{},{x:Ut(x*2,$.x,B),y:Ut(N/2,$.y,B)}):sa(sa({},$),{},{x:$.x,y:$.y})});return l.current=Q,g.createElement(bE,{props:n,points:Q,clipPathId:t,pathRef:a,strokeDasharray:M})}return g.createElement(bE,{props:n,points:u,clipPathId:t,pathRef:a,strokeDasharray:M})}),g.createElement($M,{label:n.label}))}function dY(e){var{clipPathId:t,props:n}=e,a=g.useRef(null),l=g.useRef(0),o=g.useRef(null);return g.createElement(uY,{props:n,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var mY=(e,t)=>{var n,a;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Zt(e.payload,t)}};class fY extends g.Component{render(){var{hide:t,dot:n,points:a,className:l,xAxisId:o,yAxisId:u,top:d,left:f,width:p,height:h,id:v,needClip:b,zIndex:x}=this.props;if(t)return null;var N=jt("recharts-line",l),j=v,{r:S,strokeWidth:C}=zV(n),A=GM(n),w=S*2+C,E=b?"url(#clipPath-".concat(A?"":"dots-").concat(j,")"):void 0;return g.createElement(qn,{zIndex:x},g.createElement(Mn,{className:N},b&&g.createElement("defs",null,g.createElement(ok,{clipPathId:j,xAxisId:o,yAxisId:u}),!A&&g.createElement("clipPath",{id:"clipPath-dots-".concat(j)},g.createElement("rect",{x:f-w/2,y:d-w/2,width:p+w,height:h+w}))),g.createElement(lk,{xAxisId:o,yAxisId:u,data:a,dataPointFormatter:mY,errorBarOffset:0},g.createElement(dY,{props:this.props,clipPathId:j}))),g.createElement(fQ,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:E}))}}var pk={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ur.line,type:"linear"};function pY(e){var t=Tr(e,pk),{activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:f,hide:p,isAnimationActive:h,label:v,legendType:b,xAxisId:x,yAxisId:N,id:j}=t,S=mj(t,ZV),{needClip:C}=dj(x,N),A=oj(),w=Hs(),E=Ar(),D=Te(R=>AV(R,x,N,E,j));if(w!=="horizontal"&&w!=="vertical"||D==null||A==null)return null;var{height:O,width:T,x:P,y:I}=A;return g.createElement(fY,Kc({},S,{id:j,connectNulls:d,dot:f,activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:h,hide:p,label:v,legendType:b,xAxisId:x,yAxisId:N,points:D,layout:w,height:O,width:T,left:P,top:I,needClip:C}))}function hY(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:d,displayedData:f}=e;return f.map((p,h)=>{var v=Zt(p,u);if(t==="horizontal"){var b=aw({axis:n,ticks:l,bandSize:d,entry:p,index:h}),x=Tt(v)?null:a.scale.map(v);return{x:b,y:x??null,value:v,payload:p}}var N=Tt(v)?null:n.scale.map(v),j=aw({axis:a,ticks:o,bandSize:d,entry:p,index:h});return N==null||j==null?null:{x:N,y:j,value:v,payload:p}}).filter(Boolean)}function vY(e){var t=Tr(e,pk),n=Ar();return g.createElement(XM,{id:t.id,type:"line"},a=>g.createElement(g.Fragment,null,g.createElement(WM,{legendPayload:nY(t)}),g.createElement(aY,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),g.createElement(JM,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),g.createElement(pY,Kc({},t,{id:a}))))}var hk=g.memo(vY,lp);hk.displayName="Line";function Ys(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&n!==void 0?n:ek}function Ks(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&n!==void 0?n:ek}var gY="Invariant failed";function xY(e,t){throw new Error(gY)}function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bb.apply(null,arguments)}function nf(e){return g.createElement(HM,bb({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var bY=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(Ae(t))return t;var o=Ae(a)||Tt(a);return o?t(a,l):(o||xY(),n)}},yY=(e,t,n)=>n,jY=(e,t)=>t,hu=oe([rp,jY],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),NY=oe([hu],e=>e?.maxBarSize),_Y=(e,t,n,a)=>a,SY=oe([ht,rp,Ys,Ks,yY],(e,t,n,a,l)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),wY=(e,t,n)=>{var a=ht(e),l=Ys(e,t),o=Ks(e,t);if(!(l==null||o==null))return a==="horizontal"?db(e,"yAxis",o,n):db(e,"xAxis",l,n)},CY=(e,t)=>{var n=ht(e),a=Ys(e,t),l=Ks(e,t);if(!(a==null||l==null))return n==="horizontal"?i2(e,"xAxis",a):i2(e,"yAxis",l)},EY=oe([SY,zB,CY],pQ),AY=(e,t,n)=>{var a,l,o=hu(e,t);if(o==null)return 0;var u=Ys(e,t),d=Ks(e,t);if(u==null||d==null)return 0;var f=ht(e),p=aD(e),{maxBarSize:h}=o,v=Tt(h)?p:h,b,x;return f==="horizontal"?(b=Vi(e,"xAxis",u,n),x=Qi(e,"xAxis",u,n)):(b=Vi(e,"yAxis",d,n),x=Qi(e,"yAxis",d,n)),(a=(l=io(b,x,!0))!==null&&l!==void 0?l:v)!==null&&a!==void 0?a:0},vk=(e,t,n)=>{var a=ht(e),l=Ys(e,t),o=Ks(e,t);if(!(l==null||o==null)){var u,d;return a==="horizontal"?(u=Vi(e,"xAxis",l,n),d=Qi(e,"xAxis",l,n)):(u=Vi(e,"yAxis",o,n),d=Qi(e,"yAxis",o,n)),io(u,d)}},zY=oe([EY,aD,AB,iD,AY,vk,NY],bQ),OY=(e,t,n)=>{var a=Ys(e,t);if(a!=null)return Vi(e,"xAxis",a,n)},DY=(e,t,n)=>{var a=Ks(e,t);if(a!=null)return Vi(e,"yAxis",a,n)},MY=(e,t,n)=>{var a=Ys(e,t);if(a!=null)return Qi(e,"xAxis",a,n)},kY=(e,t,n)=>{var a=Ks(e,t);if(a!=null)return Qi(e,"yAxis",a,n)},PY=oe([zY,hu],jQ),TY=oe([wY,hu],yQ),qY=oe([dr,ry,OY,DY,MY,kY,PY,ht,yB,vk,TY,hu,_Y],(e,t,n,a,l,o,u,d,f,p,h,v,b)=>{var{chartData:x,dataStartIndex:N,dataEndIndex:j}=f;if(!(v==null||u==null||t==null||d!=="horizontal"&&d!=="vertical"||n==null||a==null||l==null||o==null||p==null)){var{data:S}=v,C;if(S!=null&&S.length>0?C=S:C=x?.slice(N,j+1),C!=null)return uK({layout:d,barSettings:v,pos:u,parentViewBox:t,bandSize:p,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:h,displayedData:C,offset:e,cells:b,dataStartIndex:N})}}),RY=["index"];function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yb.apply(null,arguments)}function IY(e,t){if(e==null)return{};var n,a,l=LY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function LY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var gk=g.createContext(void 0),$Y=e=>{var t=g.useContext(gk);if(t!=null)return t.stackId;if(e!=null)return _6(e)},BY=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),UY=e=>{var t=g.useContext(gk);if(t!=null){var{stackId:n}=t;return"url(#".concat(BY(n,e),")")}},xk=e=>{var{index:t}=e,n=IY(e,RY),a=UY(t);return g.createElement(Mn,yb({className:"recharts-bar-stack-layer",clipPath:a},n))},FY=["onMouseEnter","onMouseLeave","onClick"],GY=["value","background","tooltipPosition"],HY=["id"],QY=["onMouseEnter","onClick","onMouseLeave"];function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wa.apply(null,arguments)}function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(a){VY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function VY(e,t,n){return(t=YY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YY(e){var t=KY(e,"string");return typeof t=="symbol"?t:t+""}function KY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function af(e,t){if(e==null)return{};var n,a,l=WY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function WY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var XY=e=>{var{dataKey:t,name:n,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:Of(n,t),payload:e}]},ZY=g.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:a,fill:l,name:o,hide:u,unit:d,tooltipType:f,id:p}=e,h={dataDefinedOnItem:void 0,getPosition:Gs,settings:{stroke:n,strokeWidth:a,fill:l,dataKey:t,nameKey:void 0,name:Of(o,t),hide:u,type:f,color:l,unit:d,graphicalItemId:p}};return g.createElement(KM,{tooltipEntrySettings:h})});function JY(e){var t=Te(Ls),{data:n,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:d,onClick:f}=o,p=af(o,FY),h=QM(u,a,o.id),v=VM(d),b=YM(f,a,o.id);if(!l||n==null)return null;var x=Zc(l);return g.createElement(qn,{zIndex:NQ(l,ur.barBackground)},n.map((N,j)=>{var{value:S,background:C,tooltipPosition:A}=N,w=af(N,GY);if(!C)return null;var E=h(N,j),D=v(N,j),O=b(N,j),T=Or(Or(Or(Or(Or({option:l,isActive:String(j)===t},w),{},{fill:"#eee"},C),x),Qb(p,N,j)),{},{onMouseEnter:E,onMouseLeave:D,onClick:O,dataKey:a,index:j,className:"recharts-bar-background-rectangle"});return g.createElement(nf,Wa({key:"background-bar-".concat(j)},T))}))}function eK(e){var{showLabels:t,children:n,rects:a}=e,l=a?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Or(Or({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return g.createElement(IM,{value:t?l:void 0},n)}function tK(e){var{shape:t,activeBar:n,baseProps:a,entry:l,index:o,dataKey:u}=e,d=Te(Ls),f=Te(vM),p=n&&String(o)===d&&(f==null||u===f),h=p?n:t;return p?g.createElement(qn,{zIndex:ur.activeBar},g.createElement(xk,{index:o},g.createElement(nf,Wa({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u})))):g.createElement(nf,Wa({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u}))}function rK(e){var{shape:t,baseProps:n,entry:a,index:l,dataKey:o}=e;return g.createElement(nf,Wa({},n,{name:String(n.name)},a,{isActive:!1,option:t,index:l,dataKey:o}))}function nK(e){var t,{data:n,props:a}=e,l=(t=Hn(a))!==null&&t!==void 0?t:{},{id:o}=l,u=af(l,HY),{shape:d,dataKey:f,activeBar:p}=a,{onMouseEnter:h,onClick:v,onMouseLeave:b}=a,x=af(a,QY),N=QM(h,f,o),j=VM(b),S=YM(v,f,o);return n?g.createElement(g.Fragment,null,n.map((C,A)=>g.createElement(xk,Wa({index:A,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(A),className:"recharts-bar-rectangle"},Qb(x,C,A),{onMouseEnter:N(C,A),onMouseLeave:j(C,A),onClick:S(C,A)}),p?g.createElement(tK,{shape:d,activeBar:p,baseProps:u,entry:C,index:A,dataKey:f}):g.createElement(rK,{shape:d,baseProps:u,entry:C,index:A,dataKey:f})))):null}function aK(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:u,animationDuration:d,animationEasing:f,onAnimationEnd:p,onAnimationStart:h}=t,v=n.current,b=Bf(t,"recharts-bar-"),[x,N]=g.useState(!1),j=!x,S=g.useCallback(()=>{typeof p=="function"&&p(),N(!1)},[p]),C=g.useCallback(()=>{typeof h=="function"&&h(),N(!0)},[h]);return g.createElement(eK,{showLabels:j,rects:a},g.createElement($f,{animationId:b,begin:u,duration:d,isActive:o,easing:f,onAnimationEnd:S,onAnimationStart:C,key:b},A=>{var w=A===1?a:a?.map((E,D)=>{var O=v&&v[D];if(O)return Or(Or({},E),{},{x:Ut(O.x,E.x,A),y:Ut(O.y,E.y,A),width:Ut(O.width,E.width,A),height:Ut(O.height,E.height,A)});if(l==="horizontal"){var T=Ut(0,E.height,A),P=Ut(E.stackedBarStart,E.y,A);return Or(Or({},E),{},{y:P,height:T})}var I=Ut(0,E.width,A),R=Ut(E.stackedBarStart,E.x,A);return Or(Or({},E),{},{width:I,x:R})});return A>0&&(n.current=w??null),w==null?null:g.createElement(Mn,null,g.createElement(nK,{props:t,data:w}))}),g.createElement($M,{label:t.label}),t.children)}function iK(e){var t=g.useRef(null);return g.createElement(aK,{previousRectanglesRef:t,props:e})}var bk=0,sK=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Zt(e,t)}};class lK extends g.PureComponent{render(){var{hide:t,data:n,dataKey:a,className:l,xAxisId:o,yAxisId:u,needClip:d,background:f,id:p}=this.props;if(t||n==null)return null;var h=jt("recharts-bar",l),v=p;return g.createElement(Mn,{className:h,id:p},d&&g.createElement("defs",null,g.createElement(ok,{clipPathId:v,xAxisId:o,yAxisId:u})),g.createElement(Mn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(v,")"):void 0},g.createElement(JY,{data:n,dataKey:a,background:f,allOtherBarProps:this.props}),g.createElement(iK,this.props)))}}var oK={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:bk,xAxisId:0,yAxisId:0,zIndex:ur.bar};function cK(e){var{xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:f,animationEasing:p,isAnimationActive:h}=e,{needClip:v}=dj(t,n),b=Hs(),x=Ar(),N=uH(e.children,ij),j=Te(A=>qY(A,e.id,x,N));if(b!=="vertical"&&b!=="horizontal")return null;var S,C=j?.[0];return C==null||C.height==null||C.width==null?S=0:S=b==="vertical"?C.height/2:C.width/2,g.createElement(lk,{xAxisId:t,yAxisId:n,data:j,dataPointFormatter:sK,errorBarOffset:S},g.createElement(lK,Wa({},e,{layout:b,needClip:v,data:j,xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:f,animationEasing:p,isAnimationActive:h})))}function uK(e){var{layout:t,barSettings:{dataKey:n,minPointSize:a},pos:l,bandSize:o,xAxis:u,yAxis:d,xAxisTicks:f,yAxisTicks:p,stackedData:h,displayedData:v,offset:b,cells:x,parentViewBox:N,dataStartIndex:j}=e,S=t==="horizontal"?d:u,C=h?S.scale.domain():null,A=S6({numericAxis:S}),w=S.scale.map(A);return v.map((E,D)=>{var O,T,P,I,R,F;if(h){var B=h[D+j];if(B==null)return null;O=x6(B,C)}else O=Zt(E,n),Array.isArray(O)||(O=[A,O]);var G=bY(a,bk)(O[1],D);if(t==="horizontal"){var V,M=d.scale.map(O[0]),q=d.scale.map(O[1]);if(M==null||q==null)return null;T=iw({axis:u,ticks:f,bandSize:o,offset:l.offset,entry:E,index:D}),P=(V=q??M)!==null&&V!==void 0?V:void 0,I=l.size;var X=M-q;if(R=da(X)?0:X,F={x:T,y:b.top,width:I,height:b.height},Math.abs(G)>0&&Math.abs(R)<Math.abs(G)){var Q=Qr(R||G)*(Math.abs(G)-Math.abs(R));P-=Q,R+=Q}}else{var $=u.scale.map(O[0]),L=u.scale.map(O[1]);if($==null||L==null)return null;if(T=$,P=iw({axis:d,ticks:p,bandSize:o,offset:l.offset,entry:E,index:D}),I=L-$,R=l.size,F={x:b.left,y:P,width:b.width,height:R},Math.abs(G)>0&&Math.abs(I)<Math.abs(G)){var pe=Qr(I||G)*(Math.abs(G)-Math.abs(I));I+=pe}}if(T==null||P==null||I==null||R==null)return null;var te=Or(Or({},E),{},{stackedBarStart:w,x:T,y:P,width:I,height:R,value:h?O:O[1],payload:E,background:F,tooltipPosition:{x:T+I/2,y:P+R/2},parentViewBox:N},x&&x[D]&&x[D].props);return te}).filter(Boolean)}function dK(e){var t=Tr(e,oK),n=$Y(t.stackId),a=Ar();return g.createElement(XM,{id:t.id,type:"bar"},l=>g.createElement(g.Fragment,null,g.createElement(WM,{legendPayload:XY(t)}),g.createElement(ZY,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),g.createElement(JM,{type:"bar",id:l,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),g.createElement(qn,{zIndex:t.zIndex},g.createElement(cK,Wa({},t,{id:l})))))}var yk=g.memo(dK,lp);yk.displayName="Bar";var mK=["domain","range"],fK=["domain","range"];function jE(e,t){if(e==null)return{};var n,a,l=pK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function pK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function NE(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function jk(e,t){if(e===t)return!0;var{domain:n,range:a}=e,l=jE(e,mK),{domain:o,range:u}=t,d=jE(t,fK);return!NE(n,o)||!NE(a,u)?!1:lp(l,d)}var hK=["type"],vK=["dangerouslySetInnerHTML","ticks","scale"],gK=["id","scale"];function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jb.apply(null,arguments)}function _E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function SE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_E(Object(n),!0).forEach(function(a){xK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_E(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xK(e,t,n){return(t=bK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bK(e){var t=yK(e,"string");return typeof t=="symbol"?t:t+""}function yK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nb(e,t){if(e==null)return{};var n,a,l=jK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function jK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function NK(e){var t=Qt(),n=g.useRef(null),a=Vz(),{type:l}=e,o=Nb(e,hK),u=Wf(a,"xAxis",l),d=g.useMemo(()=>{if(u!=null)return SE(SE({},o),{},{type:u})},[o,u]);return g.useLayoutEffect(()=>{d!=null&&(n.current===null?t(ZH(d)):n.current!==d&&t(JH({prev:n.current,next:d})),n.current=d)},[d,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(eQ(n.current)),n.current=null)},[t]),null}var _K=e=>{var{xAxisId:t,className:n}=e,a=Te(ry),l=Ar(),o="xAxis",u=Te(C=>KD(C,o,t,l)),d=Te(C=>HD(C,t)),f=Te(C=>O9(C,t)),p=Te(C=>pD(C,t));if(d==null||f==null||p==null)return null;var{dangerouslySetInnerHTML:h,ticks:v,scale:b}=e,x=Nb(e,vK),{id:N,scale:j}=p,S=Nb(p,gK);return g.createElement(uj,jb({},x,S,{x:f.x,y:f.y,width:d.width,height:d.height,className:jt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:u,axisType:o}))},SK={allowDataOverflow:lr.allowDataOverflow,allowDecimals:lr.allowDecimals,allowDuplicatedCategory:lr.allowDuplicatedCategory,angle:lr.angle,axisLine:Ua.axisLine,height:lr.height,hide:!1,includeHidden:lr.includeHidden,interval:lr.interval,label:!1,minTickGap:lr.minTickGap,mirror:lr.mirror,orientation:lr.orientation,padding:lr.padding,reversed:lr.reversed,scale:lr.scale,tick:lr.tick,tickCount:lr.tickCount,tickLine:Ua.tickLine,tickSize:Ua.tickSize,type:lr.type,xAxisId:0},wK=e=>{var t=Tr(e,SK);return g.createElement(g.Fragment,null,g.createElement(NK,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),g.createElement(_K,t))},_b=g.memo(wK,jk);_b.displayName="XAxis";var CK=["type"],EK=["dangerouslySetInnerHTML","ticks","scale"],AK=["id","scale"];function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sb.apply(null,arguments)}function wE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function CE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(n),!0).forEach(function(a){zK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zK(e,t,n){return(t=OK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OK(e){var t=DK(e,"string");return typeof t=="symbol"?t:t+""}function DK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wb(e,t){if(e==null)return{};var n,a,l=MK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function MK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function kK(e){var t=Qt(),n=g.useRef(null),a=Vz(),{type:l}=e,o=wb(e,CK),u=Wf(a,"yAxis",l),d=g.useMemo(()=>{if(u!=null)return CE(CE({},o),{},{type:u})},[u,o]);return g.useLayoutEffect(()=>{d!=null&&(n.current===null?t(tQ(d)):n.current!==d&&t(rQ({prev:n.current,next:d})),n.current=d)},[d,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(nQ(n.current)),n.current=null)},[t]),null}function PK(e){var{yAxisId:t,className:n,width:a,label:l}=e,o=g.useRef(null),u=g.useRef(null),d=Te(ry),f=Ar(),p=Qt(),h="yAxis",v=Te(O=>QD(O,t)),b=Te(O=>M9(O,t)),x=Te(O=>KD(O,h,t,f)),N=Te(O=>hD(O,t));if(g.useLayoutEffect(()=>{if(!(a!=="auto"||!v||lj(l)||g.isValidElement(l)||N==null)){var O=o.current;if(O){var T=O.getCalculatedWidth();Math.round(v.width)!==Math.round(T)&&p(aQ({id:t,width:T}))}}},[x,v,p,l,t,a,N]),v==null||b==null||N==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:C}=e,A=wb(e,EK),{id:w,scale:E}=N,D=wb(N,AK);return g.createElement(uj,Sb({},A,D,{ref:o,labelRef:u,x:b.x,y:b.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:v.width,height:v.height,className:jt("recharts-".concat(h," ").concat(h),n),viewBox:d,ticks:x,axisType:h}))}var TK={allowDataOverflow:or.allowDataOverflow,allowDecimals:or.allowDecimals,allowDuplicatedCategory:or.allowDuplicatedCategory,angle:or.angle,axisLine:Ua.axisLine,hide:!1,includeHidden:or.includeHidden,interval:or.interval,label:!1,minTickGap:or.minTickGap,mirror:or.mirror,orientation:or.orientation,padding:or.padding,reversed:or.reversed,scale:or.scale,tick:or.tick,tickCount:or.tickCount,tickLine:Ua.tickLine,tickSize:Ua.tickSize,type:or.type,width:or.width,yAxisId:0},qK=e=>{var t=Tr(e,TK);return g.createElement(g.Fragment,null,g.createElement(kK,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),g.createElement(PK,t))},Cb=g.memo(qK,jk);Cb.displayName="YAxis";var RK=(e,t)=>t,fj=oe([RK,ht,mD,pr,mM,si,VU,dr],eF),pj=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},Nk=kn("mouseClick"),_k=tu();_k.startListening({actionCreator:Nk,effect:(e,t)=>{var n=e.payload,a=fj(t.getState(),pj(n));a?.activeIndex!=null&&t.dispatch(Q9({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Eb=kn("mouseMove"),Sk=tu(),Vd=null;Sk.startListening({actionCreator:Eb,effect:(e,t)=>{var n=e.payload;Vd!==null&&cancelAnimationFrame(Vd);var a=pj(n);Vd=requestAnimationFrame(()=>{var l=t.getState(),o=Ky(l,l.tooltip.settings.shared);if(o==="axis"){var u=fj(l,a);u?.activeIndex!=null?t.dispatch(nM({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(rM())}Vd=null})}});function IK(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var EE={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},wk=Kr({name:"rootProps",initialState:EE,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:EE.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),LK=wk.reducer,{updateOptions:$K}=wk.actions,BK=null,UK={updatePolarOptions:(e,t)=>t.payload},Ck=Kr({name:"polarOptions",initialState:BK,reducers:UK}),{updatePolarOptions:Yee}=Ck.actions,FK=Ck.reducer,Ek=kn("keyDown"),Ak=kn("focus"),hj=tu();hj.startListening({actionCreator:Ek,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=Wy(l,bo(n),du(n),fu(n)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var f=si(n);if(o==="Enter"){var p=Xm(n,"axis","hover",String(l.index));t.dispatch(fb({active:!l.active,activeIndex:l.index,activeCoordinate:p}));return}var h=q9(n),v=h==="left-to-right"?1:-1,b=o==="ArrowRight"?1:-1,x=d+b*v;if(!(f==null||x>=f.length||x<0)){var N=Xm(n,"axis","hover",String(x));t.dispatch(fb({active:!0,activeIndex:x.toString(),activeCoordinate:N}))}}}}}});hj.startListening({actionCreator:Ak,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var o="0",u=Xm(n,"axis","hover",String(o));t.dispatch(fb({active:!0,activeIndex:o,activeCoordinate:u}))}}}});var zn=kn("externalEvent"),zk=tu(),bx=new Map;zk.startListening({actionCreator:zn,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var l=a.type,o=bx.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var d=t.getState(),f={activeCoordinate:DU(d),activeDataKey:vM(d),activeIndex:Ls(d),activeLabel:hM(d),activeTooltipIndex:Ls(d),isTooltipActive:MU(d)};n(f,a)}finally{bx.delete(l)}});bx.set(l,u)}}});var GK=oe([go],e=>e.tooltipItemPayloads),HK=oe([GK,(e,t)=>t,(e,t,n)=>n],(e,t,n)=>{if(t!=null){var a=e.find(o=>o.settings.graphicalItemId===n);if(a!=null){var{getPosition:l}=a;if(l!=null)return l(t)}}}),Ok=kn("touchMove"),Dk=tu();Dk.startListening({actionCreator:Ok,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=t.getState(),l=Ky(a,a.tooltip.settings.shared);if(l==="axis"){var o=n.touches[0];if(o==null)return;var u=fj(a,pj({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));u?.activeIndex!=null&&t.dispatch(nM({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(l==="item"){var d,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var p=document.elementFromPoint(f.clientX,f.clientY);if(!p||!p.getAttribute)return;var h=p.getAttribute(D6),v=(d=p.getAttribute(M6))!==null&&d!==void 0?d:void 0,b=xo(a).find(j=>j.id===v);if(h==null||b==null||v==null)return;var{dataKey:x}=b,N=HK(a,h,v);t.dispatch(tM({activeDataKey:x,activeIndex:h,activeCoordinate:N,activeGraphicalItemId:v}))}}}});var QK=cz({brush:SQ,cartesianAxis:iQ,chartData:DF,errorBars:xV,graphicalItems:RH,layout:f6,legend:_L,options:CF,polarAxis:iH,polarOptions:FK,referenceElements:AQ,rootProps:LK,tooltip:V9,zIndex:pF}),VK=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return I4({reducer:QK,preloadedState:t,middleware:a=>{var l;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([_k.middleware,Sk.middleware,hj.middleware,zk.middleware,Dk.middleware])},enhancers:a=>{var l=a;return typeof a=="function"&&(l=a()),l.concat(Sz({type:"raf"}))},devTools:{serialize:{replacer:IK},name:"recharts-".concat(n)}})};function YK(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,l=Ar(),o=g.useRef(null);if(l)return n;o.current==null&&(o.current=VK(t,a));var u=Kb;return g.createElement(VV,{context:u,store:o.current},n)}function KK(e){var{layout:t,margin:n}=e,a=Qt(),l=Ar();return g.useEffect(()=>{l||(a(u6(t)),a(c6(n)))},[a,l,t,n]),null}var WK=g.memo(KK,lp);function XK(e){var t=Qt();return g.useEffect(()=>{t($K(e))},[t,e]),null}function AE(e){var{zIndex:t,isPanorama:n}=e,a=g.useRef(null),l=Qt();return g.useLayoutEffect(()=>(a.current&&l(mF({zIndex:t,element:a.current,isPanorama:n})),()=>{l(fF({zIndex:t,isPanorama:n}))}),[l,t,n]),g.createElement("g",{tabIndex:-1,ref:a})}function zE(e){var{children:t,isPanorama:n}=e,a=Te(rF);if(!a||a.length===0)return t;var l=a.filter(u=>u<0),o=a.filter(u=>u>0);return g.createElement(g.Fragment,null,l.map(u=>g.createElement(AE,{key:u,zIndex:u,isPanorama:n})),t,o.map(u=>g.createElement(AE,{key:u,zIndex:u,isPanorama:n})))}var ZK=["children"];function JK(e,t){if(e==null)return{};var n,a,l=eW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function eW(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sf.apply(null,arguments)}var tW={width:"100%",height:"100%",display:"block"},rW=g.forwardRef((e,t)=>{var n=Hz(),a=Qz(),l=rO();if(!fa(n)||!fa(a))return null;var{children:o,otherAttributes:u,title:d,desc:f}=e,p,h;return u!=null&&(typeof u.tabIndex=="number"?p=u.tabIndex:p=l?0:void 0,typeof u.role=="string"?h=u.role:h=l?"application":void 0),g.createElement(EA,sf({},u,{title:d,desc:f,role:h,tabIndex:p,width:n,height:a,style:tW,ref:t}),o)}),nW=e=>{var{children:t}=e,n=Te(Pf);if(!n)return null;var{width:a,height:l,y:o,x:u}=n;return g.createElement(EA,{width:a,height:l,x:u,y:o},t)},OE=g.forwardRef((e,t)=>{var{children:n}=e,a=JK(e,ZK),l=Ar();return l?g.createElement(nW,null,g.createElement(zE,{isPanorama:!0},n)):g.createElement(rW,sf({ref:t},a),g.createElement(zE,{isPanorama:!1},n))});function aW(){var e=Qt(),[t,n]=g.useState(null),a=Te(O6);return g.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;at(o)&&o!==a&&e(m6(o))}},[t,e,a]),n}function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function iW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(n),!0).forEach(function(a){sW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sW(e,t,n){return(t=lW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lW(e){var t=oW(e,"string");return typeof t=="symbol"?t:t+""}function oW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bi.apply(null,arguments)}var cW=()=>($F(),null);function lf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var uW=g.forwardRef((e,t)=>{var n,a,l=g.useRef(null),[o,u]=g.useState({containerWidth:lf((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:lf((a=e.style)===null||a===void 0?void 0:a.height)}),d=g.useCallback((p,h)=>{u(v=>{var b=Math.round(p),x=Math.round(h);return v.containerWidth===b&&v.containerHeight===x?v:{containerWidth:b,containerHeight:x}})},[]),f=g.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null&&typeof ResizeObserver<"u"){var{width:h,height:v}=p.getBoundingClientRect();d(h,v);var b=N=>{var j=N[0];if(j!=null){var{width:S,height:C}=j.contentRect;d(S,C)}},x=new ResizeObserver(b);x.observe(p),l.current=x}},[t,d]);return g.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[d]),g.createElement(g.Fragment,null,g.createElement(nu,{width:o.containerWidth,height:o.containerHeight}),g.createElement("div",Bi({ref:f},e)))}),dW=g.forwardRef((e,t)=>{var{width:n,height:a}=e,[l,o]=g.useState({containerWidth:lf(n),containerHeight:lf(a)}),u=g.useCallback((f,p)=>{o(h=>{var v=Math.round(f),b=Math.round(p);return h.containerWidth===v&&h.containerHeight===b?h:{containerWidth:v,containerHeight:b}})},[]),d=g.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:p,height:h}=f.getBoundingClientRect();u(p,h)}},[t,u]);return g.createElement(g.Fragment,null,g.createElement(nu,{width:l.containerWidth,height:l.containerHeight}),g.createElement("div",Bi({ref:d},e)))}),mW=g.forwardRef((e,t)=>{var{width:n,height:a}=e;return g.createElement(g.Fragment,null,g.createElement(nu,{width:n,height:a}),g.createElement("div",Bi({ref:t},e)))}),fW=g.forwardRef((e,t)=>{var{width:n,height:a}=e;return typeof n=="string"||typeof a=="string"?g.createElement(dW,Bi({},e,{ref:t})):typeof n=="number"&&typeof a=="number"?g.createElement(mW,Bi({},e,{width:n,height:a,ref:t})):g.createElement(g.Fragment,null,g.createElement(nu,{width:n,height:a}),g.createElement("div",Bi({ref:t},e)))});function pW(e){return e?uW:fW}var hW=g.forwardRef((e,t)=>{var{children:n,className:a,height:l,onClick:o,onContextMenu:u,onDoubleClick:d,onMouseDown:f,onMouseEnter:p,onMouseLeave:h,onMouseMove:v,onMouseUp:b,onTouchEnd:x,onTouchMove:N,onTouchStart:j,style:S,width:C,responsive:A,dispatchTouchEvents:w=!0}=e,E=g.useRef(null),D=Qt(),[O,T]=g.useState(null),[P,I]=g.useState(null),R=aW(),F=ny(),B=F?.width>0?F.width:C,G=F?.height>0?F.height:l,V=g.useCallback(se=>{R(se),typeof t=="function"&&t(se),T(se),I(se),se!=null&&(E.current=se)},[R,t,T,I]),M=g.useCallback(se=>{D(Nk(se)),D(zn({handler:o,reactEvent:se}))},[D,o]),q=g.useCallback(se=>{D(Eb(se)),D(zn({handler:p,reactEvent:se}))},[D,p]),X=g.useCallback(se=>{D(rM()),D(zn({handler:h,reactEvent:se}))},[D,h]),Q=g.useCallback(se=>{D(Eb(se)),D(zn({handler:v,reactEvent:se}))},[D,v]),$=g.useCallback(()=>{D(Ak())},[D]),L=g.useCallback(se=>{D(Ek(se.key))},[D]),pe=g.useCallback(se=>{D(zn({handler:u,reactEvent:se}))},[D,u]),te=g.useCallback(se=>{D(zn({handler:d,reactEvent:se}))},[D,d]),de=g.useCallback(se=>{D(zn({handler:f,reactEvent:se}))},[D,f]),me=g.useCallback(se=>{D(zn({handler:b,reactEvent:se}))},[D,b]),xe=g.useCallback(se=>{D(zn({handler:j,reactEvent:se}))},[D,j]),Y=g.useCallback(se=>{w&&D(Ok(se)),D(zn({handler:N,reactEvent:se}))},[D,w,N]),he=g.useCallback(se=>{D(zn({handler:x,reactEvent:se}))},[D,x]),Pe=pW(A);return g.createElement(_M.Provider,{value:O},g.createElement(x5.Provider,{value:P},g.createElement(Pe,{width:B??S?.width,height:G??S?.height,className:jt("recharts-wrapper",a),style:iW({position:"relative",cursor:"default",width:B,height:G},S),onClick:M,onContextMenu:pe,onDoubleClick:te,onFocus:$,onKeyDown:L,onMouseDown:de,onMouseEnter:q,onMouseLeave:X,onMouseMove:Q,onMouseUp:me,onTouchEnd:he,onTouchMove:Y,onTouchStart:xe,ref:V},g.createElement(cW,null),n)))}),vW=["width","height","responsive","children","className","style","compact","title","desc"];function gW(e,t){if(e==null)return{};var n,a,l=xW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function xW(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var bW=g.forwardRef((e,t)=>{var{width:n,height:a,responsive:l,children:o,className:u,style:d,compact:f,title:p,desc:h}=e,v=gW(e,vW),b=Hn(v);return f?g.createElement(g.Fragment,null,g.createElement(nu,{width:n,height:a}),g.createElement(OE,{otherAttributes:b,title:p,desc:h},o)):g.createElement(hW,{className:u,style:d,width:n,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(OE,{otherAttributes:b,title:p,desc:h,ref:t},g.createElement(OQ,null,o)))});function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ab.apply(null,arguments)}var yW={top:5,right:5,bottom:5,left:5},jW={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:yW,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Mk=g.forwardRef(function(t,n){var a,l=Tr(t.categoricalChartProps,jW),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:p}=t,h={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return g.createElement(YK,{preloadedState:{options:h},reduxStoreName:(a=p.id)!==null&&a!==void 0?a:o},g.createElement(_Q,{chartData:p.data}),g.createElement(WK,{layout:l.layout,margin:l.margin}),g.createElement(XK,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),g.createElement(bW,Ab({},l,{ref:n})))}),NW=["axis"],_W=g.forwardRef((e,t)=>g.createElement(Mk,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:NW,tooltipPayloadSearcher:SM,categoricalChartProps:e,ref:t})),SW=["axis","item"],wW=g.forwardRef((e,t)=>g.createElement(Mk,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:SW,tooltipPayloadSearcher:SM,categoricalChartProps:e,ref:t}));const CW=8,EW=12,AW=14,zW=1;function vj(e){return e instanceof Oe?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function ME(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function op(){const e=new Date,t=e.getDay(),n=t===0?-6:1-t,a=new Date(e);return a.setDate(e.getDate()+n),a.setHours(0,0,0,0),a}function OW(){const e=op(),t=new Date(e);return t.setDate(e.getDate()+6),t.setHours(23,59,59,999),t}function yx(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function cp(e){try{const t=De(Ne(W,"quiz_results"),we("userId","==",e),Xe("datePassage","desc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){return console.error("Erreur rcupration rsultats lve:",t),[]}}async function DW(e){try{const t=await cp(e);if(t.length===0)return[];const n=new Map;t.forEach(o=>{const u=o.disciplineId;n.has(u)||n.set(u,[]),n.get(u).push(o)});const a=[];n.forEach((o,u)=>{if(o.length<zW)return;const d=o.map(S=>S.pourcentage/100*20),f=d.reduce((S,C)=>S+C,0)/d.length;if(f>=AW)return;let p="stable";if(d.length>=3){const S=d.slice(0,2),C=d.slice(2,4),A=S.reduce((D,O)=>D+O,0)/S.length,w=C.reduce((D,O)=>D+O,0)/C.length,E=A-w;E>1.5?p="hausse":E<-1.5&&(p="baisse")}let h="modere";f<CW?h="critique":f<EW&&(h="important");const v=d[0],b=Math.max(...d),x=Math.min(...d),N=vj(o[0].datePassage),j=o[0].disciplineNom||"Discipline inconnue";a.push({id:`lacune_${u}`,disciplineId:u,disciplineNom:j,moyenne:Math.round(f*10)/10,nombreQuiz:o.length,tendance:p,niveauUrgence:h,dernierQuizDate:N,scoreDetails:{dernierScore:Math.round(v*10)/10,meilleurScore:Math.round(b*10)/10,pireScore:Math.round(x*10)/10}})});const l={critique:0,important:1,modere:2};return a.sort((o,u)=>{const d=l[o.niveauUrgence]-l[u.niveauUrgence];return d!==0?d:o.moyenne-u.moyenne}),a}catch(t){return console.error("Erreur dtection lacunes:",t),[]}}function MW(e){const t=[];let n=1;return e.forEach(a=>{const{id:l,disciplineNom:o,niveauUrgence:u,moyenne:d,tendance:f}=a;switch(u){case"critique":t.push({id:`reco_cours_${l}`,lacuneId:l,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${d}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),t.push({id:`reco_quiz_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":t.push({id:`reco_exercice_${l}`,lacuneId:l,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${d}/20 de moyenne, concentre-toi sur les exercices pratiques. ${f==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),t.push({id:`reco_cours2_${l}`,lacuneId:l,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":t.push({id:`reco_consolider_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${d}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break}}),t}async function kW(e){try{const t=await cp(e);if(t.length===0)return{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;t.forEach(j=>{const S=vj(j.datePassage),C=`${S.getFullYear()}-${S.getMonth()}-${S.getDate()}`;n.add(C)});const a=Array.from(n).map(j=>{const[S,C,A]=j.split("-").map(Number);return new Date(S,C,A)}).sort((j,S)=>S.getTime()-j.getTime()),l=a.length,o=a[0];let u=0;const d=new Date;d.setHours(0,0,0,0);const f=a[0];if(yx(f,d)<=1){u=1;for(let j=1;j<a.length&&yx(a[j],a[j-1])===1;j++)u++}let h=0,v=1;for(let j=1;j<a.length;j++)yx(a[j],a[j-1])===1?v++:(h=Math.max(h,v),v=1);h=Math.max(h,v,u);const b=op(),x=[];for(let j=0;j<7;j++){const S=new Date(b);S.setDate(b.getDate()+j);const C=a.some(A=>ME(A,S));x.push(C)}const N=[];for(let j=0;j<4;j++){const S=new Date(b);S.setDate(b.getDate()-j*7);let C=0;for(let w=0;w<7;w++){const E=new Date(S);E.setDate(S.getDate()+w),a.some(D=>ME(D,E))&&C++}const A=Math.ceil((S.getDate()+new Date(S.getFullYear(),S.getMonth(),1).getDay())/7);N.push({semaine:j===0?"Cette sem.":`Sem. -${j}`,joursActifs:C})}return{userId:e,streakActuel:u,meilleurStreak:h,dernierJourActif:o,totalJoursActifs:l,semaineCourante:x,historiqueHebdo:N.reverse()}}catch(t){return console.error("Erreur calcul streak:",t),{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function PW(e,t,n){const a=[],l=op(),o=OW(),u=t.length>2?5:3;if(a.push({id:`obj_quiz_${e}_${l.getTime()}`,userId:e,titre:`Passer ${u} quiz cette semaine`,description:`Entrane-toi en passant au moins ${u} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:u,progression:0,statut:"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Travailleur"'}),t.length>0){const f=t[0],p=Math.min(f.moyenne+3,14);a.push({id:`obj_score_${e}_${l.getTime()}`,userId:e,titre:`Atteindre ${Math.round(p)}/20 en ${f.disciplineNom}`,description:`Ta moyenne actuelle est de ${f.moyenne}/20. Vise ${Math.round(p)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(p),progression:Math.round(f.moyenne),statut:"en_cours",disciplineId:f.disciplineId,disciplineNom:f.disciplineNom,dateDebut:l,dateFin:o,recompense:' Badge "En progrs"'})}const d=n.streakActuel>=5?7:n.streakActuel+2;return a.push({id:`obj_streak_${e}_${l.getTime()}`,userId:e,titre:`Maintenir un streak de ${d} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:d,progression:n.streakActuel,statut:n.streakActuel>=d?"atteint":"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Flamme"'}),a}function TW(e,t,n,a){let l=0;if(a.length>0){const v=a.reduce((b,x)=>b+x.pourcentage/100*20,0)/a.length;l=Math.min(v/20*100,100)}let o=100;const u=e.filter(v=>v.niveauUrgence==="critique").length,d=e.filter(v=>v.niveauUrgence==="important").length;o-=u*25,o-=d*15,o=Math.max(o,0);const f=Math.min(t.streakActuel/7*100,100);let p=0;n.length>0&&(p=n.filter(b=>b.statut==="atteint").length/n.length*100);const h=l*.4+o*.25+f*.2+p*.15;return Math.round(Math.min(Math.max(h,0),100))}function qW(e,t,n){const a=op(),l=t.filter(o=>vj(o.datePassage)>=a);return e.map(o=>{const u={...o};switch(o.type){case"quiz_count":u.progression=l.length;break;case"score_min":if(o.disciplineId){const d=l.filter(f=>f.disciplineId===o.disciplineId);if(d.length>0){const f=Math.max(...d.map(p=>p.pourcentage));u.progression=Math.round(f/100*20)}}break;case"streak":u.progression=n.streakActuel;break}return u.progression>=u.cible&&(u.statut="atteint"),u})}async function gj(e){try{const t=await DW(e),n=MW(t),a=await kW(e);let l=PW(e,t,a);const o=await cp(e);l=qW(l,o,a);const u=TW(t,a,l,o);return{lacunes:t,recommandations:n,streak:a,objectifs:l,scoreGlobal:u}}catch(t){return console.error("Erreur suivi complet:",t),{lacunes:[],recommandations:[],streak:{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function of(e){switch(e){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function kk(e){switch(e){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function Pk(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function RW(e){return e>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":e>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":e>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":e>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function IW(e){return e.cible===0?0:Math.min(Math.round(e.progression/e.cible*100),100)}const LW="PEDA",$W=4,BW=5,UW=40,Tk=5;function $a(e){return e instanceof Oe?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function qk(e){const t=new Date,n=t.getDay(),a=n===0?-6:1-n,l=new Date(t);return l.setDate(t.getDate()+a),l.setHours(0,0,0,0),l}function FW(e){const t=qk(),n=new Date(t);return n.setDate(t.getDate()+6),n.setHours(23,59,59,999),n}function kE(e){const t=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${e.getDate()} ${t[e.getMonth()]}`}function Rk(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function GW(e){try{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",a="";for(let u=0;u<$W;u++)n+=t.charAt(Math.floor(Math.random()*t.length)),a+=t.charAt(Math.floor(Math.random()*t.length));const l=`${LW}-${n}-${a}`,o=je(W,"users",e);return await Qe(o,{codeParent:l,codeParentGenere:new Date}),l}catch(t){throw console.error("Erreur gnration code invitation:",t),new Error("Impossible de gnrer le code d'invitation")}}async function HW(e){try{const t=je(W,"users",e),n=await Mt(t);if(!n.exists())throw new Error("lve introuvable");const a=n.data();return a.codeParent?a.codeParent:await GW(e)}catch(t){throw console.error("Erreur rcupration code invitation:",t),new Error("Impossible de rcuprer le code d'invitation")}}async function QW(e,t){try{const n=t.trim().toUpperCase(),a=Ne(W,"users"),l=De(a,we("codeParent","==",n),we("role","==","eleve"),_r(1)),o=await ze(l);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=o.docs[0],d=u.data(),f=u.id,p=Ne(W,"liens_parent_enfant"),h=De(p,we("parentId","==",e),we("enfantId","==",f),we("statut","==","actif"),_r(1));if(!(await ze(h)).empty)throw new Error("Cet enfant est dj li  votre compte.");const b={parentId:e,enfantId:f,enfantNom:d.displayName||d.email,enfantEmail:d.email,enfantClasse:d.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await kt(p,b)).id,...b}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function VW(e){try{const t=Ne(W,"liens_parent_enfant"),n=De(t,we("parentId","==",e),we("statut","==","actif"),Xe("dateCreation","desc"));return(await ze(n)).docs.map(l=>({id:l.id,...l.data(),dateCreation:$a(l.data().dateCreation),dateDerniereConsultation:l.data().dateDerniereConsultation?$a(l.data().dateDerniereConsultation):void 0}))}catch(t){return console.error("Erreur rcupration enfants lis:",t),[]}}async function YW(e,t){try{const n=je(W,"liens_parent_enfant",e),a=await Mt(n);if(!a.exists())throw new Error("Lien introuvable");if(a.data().parentId!==t)throw new Error("Action non autorise");await Qe(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function KW(e,t){try{const n=Ne(W,"liens_parent_enfant"),a=De(n,we("parentId","==",e),we("enfantId","==",t),we("statut","==","actif"),_r(1)),l=await ze(a);if(l.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=je(W,"users",t),u=await Mt(o);if(!u.exists())throw new Error("Profil de l'enfant introuvable.");const d=u.data(),f=await gj(t),p=await cp(t),h=p.slice(0,Tk).map(N=>({quizTitre:N.quizTitre||"Quiz",disciplineNom:N.disciplineNom||"Discipline",pourcentage:N.pourcentage,noteSur20:Math.round(N.pourcentage/100*20*10)/10,reussi:N.reussi,datePassage:$a(N.datePassage)})),v=await WW(e,t,d.displayName||d.email,f.lacunes,f.streak,f.scoreGlobal,p),b=XW(t,d.displayName||d.email,f,p),x=l.docs[0];return await Qe(je(W,"liens_parent_enfant",x.id),{dateDerniereConsultation:new Date}),{enfant:{id:t,nom:d.displayName||d.email,email:d.email,classe:d.classe||void 0,derniereConnexion:d.lastLogin?$a(d.lastLogin):void 0},scoreGlobal:f.scoreGlobal,streak:{actuel:f.streak.streakActuel,meilleur:f.streak.meilleurStreak,semaineCourante:f.streak.semaineCourante},lacunes:f.lacunes.map(N=>({disciplineNom:N.disciplineNom,moyenne:N.moyenne,niveauUrgence:N.niveauUrgence,tendance:N.tendance})),objectifs:f.objectifs.map(N=>({titre:N.titre,progression:N.progression,cible:N.cible,statut:N.statut})),derniersQuiz:h,resume:b,alertes:v}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function WW(e,t,n,a,l,o,u){const d=[],f=new Date;if(a.filter(h=>h.niveauUrgence==="critique").forEach(h=>{d.push({id:`alerte_parent_lacune_${h.id}`,parentId:e,enfantId:t,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${h.disciplineNom}`,message:`${n} a une moyenne de ${h.moyenne}/20 en ${h.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:f})}),l.dernierJourActif){const h=Rk($a(l.dernierJourActif),f);h>=BW&&d.push({id:`alerte_parent_inactif_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${h} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:f})}else u.length===0&&d.push({id:`alerte_parent_jamais_actif_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:f});o<UW&&u.length>0&&d.push({id:`alerte_parent_score_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${n} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:f}),a.filter(h=>h.tendance==="hausse").forEach(h=>{d.push({id:`alerte_parent_progression_${h.id}`,parentId:e,enfantId:t,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${h.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${h.disciplineNom}.`,lue:!1,dateCreation:f})}),l.streakActuel>=5&&d.push({id:`alerte_parent_streak_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${l.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${l.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:f});const p={critique:0,important:1,modere:2,info:3};return d.sort((h,v)=>p[h.niveau]-p[v.niveau]),d}function XW(e,t,n,a){const l=qk(),o=FW(),u=new Date(l);u.setDate(u.getDate()-7);const d=new Date(o);d.setDate(d.getDate()-7);const f=a.filter(E=>{const D=$a(E.datePassage);return D>=l&&D<=o}),p=a.filter(E=>{const D=$a(E.datePassage);return D>=u&&D<=d}),h=f.slice(0,Tk).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:$a(E.datePassage)})),v=ZW(f,p),b=new Set;f.forEach(E=>{const D=$a(E.datePassage);b.add(`${D.getFullYear()}-${D.getMonth()}-${D.getDate()}`)});const x=f.reduce((E,D)=>E+(D.tempsEcoule||5),0);let N=0;if(p.length>0){const E=p.reduce((D,O)=>D+O.pourcentage,0)/p.length;N=Math.round(E)}let j="stable";const S=n.scoreGlobal-N;S>5?j="hausse":S<-5&&(j="baisse");const C=n.lacunes.filter(E=>E.niveauUrgence==="critique"||E.niveauUrgence==="important").map(E=>E.disciplineNom),A=n.objectifs.filter(E=>E.statut==="atteint").length,w=`${kE(l)} - ${kE(o)} ${o.getFullYear()}`;return{enfantId:e,enfantNom:t,semaine:w,dateDebut:l,dateFin:o,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:N,evolutionScore:j,nombreQuizSemaine:f.length,tempsEstimeMinutes:Math.round(x),joursActifsSemaine:b.size,streakActuel:n.streak.streakActuel,derniersQuiz:h,evolutionDisciplines:v,lacunesCritiques:n.lacunes.filter(E=>E.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(E=>E.niveauUrgence==="important").length,disciplinesEnDifficulte:C,objectifsAtteints:A,objectifsTotal:n.objectifs.length}}function ZW(e,t){const n=new Map;e.forEach(o=>{n.has(o.disciplineId)||n.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),n.get(o.disciplineId).scores.push(o.pourcentage)});const a=new Map;t.forEach(o=>{a.has(o.disciplineId)||a.set(o.disciplineId,[]),a.get(o.disciplineId).push(o.pourcentage)});const l=[];return n.forEach((o,u)=>{const d=o.scores.reduce((N,j)=>N+j,0)/o.scores.length,f=a.get(u)||[],p=f.length>0?f.reduce((N,j)=>N+j,0)/f.length:d,h=Math.round(d/100*20*10)/10,v=Math.round(p/100*20*10)/10,b=Math.round((h-v)*10)/10;let x="stable";b>1?x="hausse":b<-1&&(x="baisse"),l.push({disciplineNom:o.nom,disciplineId:u,moyenneSemainePrecedente:v,moyenneSemaineCourante:h,evolution:x,ecart:b})}),l}function JW(e){return of(e)}function eX(e){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[e]||"Alerte"}function PE(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function tX(e){return e>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":e>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":e>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":e>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function jx(e){const n=Rk(e,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const rX="PROF",nX=4,Yd="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",Ik=8,aX=7,iX=16;function Bs(e){return e instanceof Oe?e.toDate():e instanceof Date?e:e?.seconds?new Oe(e.seconds,e.nanoseconds||0).toDate():new Date(e)}function sX(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function Lk(){let e=0;const t=10;for(;e<t;){let n="",a="";for(let d=0;d<nX;d++)n+=Yd.charAt(Math.floor(Math.random()*Yd.length)),a+=Yd.charAt(Math.floor(Math.random()*Yd.length));const l=`${rX}-${n}-${a}`,o=De(Ne(W,"groupes_prof"),we("codeInvitation","==",l),_r(1));if((await ze(o)).empty)return l;e++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function lX(e,t,n){try{const a=await Lk(),l={profId:e,profNom:t,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:a,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await kt(Ne(W,"groupes_prof"),l);return console.log(` Groupe "${n.nom}" cr avec code: ${a}`),{id:o.id,...l}}catch(a){throw console.error(" Erreur cration groupe:",a),new Error("Impossible de crer le groupe. Ressayez.")}}async function $k(e){try{const t=De(Ne(W,"groupes_prof"),we("profId","==",e),Xe("dateCreation","desc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data(),dateCreation:Bs(a.data().dateCreation),dateMiseAJour:a.data().dateMiseAJour?Bs(a.data().dateMiseAJour):void 0}))}catch(t){throw console.error(" Erreur rcupration groupes:",t),new Error("Impossible de charger vos groupes.")}}async function oX(e){try{const t=await Mt(je(W,"groupes_prof",e));if(!t.exists())return null;const n=t.data();return{id:t.id,...n,dateCreation:Bs(n.dateCreation),dateMiseAJour:n.dateMiseAJour?Bs(n.dateMiseAJour):void 0}}catch(t){return console.error(" Erreur rcupration groupe:",t),null}}async function Bk(e,t){try{const n=je(W,"groupes_prof",e);await Qe(n,{...t,dateMiseAJour:new Date}),console.log(` Groupe ${e} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function cX(e){try{const t=Dn(W),n=De(Ne(W,"inscriptions_groupe"),we("groupeId","==",e));(await ze(n)).docs.forEach(l=>t.delete(l.ref)),t.delete(je(W,"groupes_prof",e)),await t.commit(),console.log(` Groupe ${e} et ses inscriptions supprims`)}catch(t){throw console.error(" Erreur suppression groupe:",t),new Error("Impossible de supprimer le groupe.")}}async function uX(e){await Bk(e,{statut:"archive"})}async function dX(e){try{const t=await Lk();return await Qe(je(W,"groupes_prof",e),{codeInvitation:t,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${e}: ${t}`),t}catch(t){throw console.error(" Erreur rgnration code:",t),new Error("Impossible de rgnrer le code.")}}async function mX(e,t,n,a){try{const l=a.trim().toUpperCase(),o=De(Ne(W,"groupes_prof"),we("codeInvitation","==",l),_r(1)),u=await ze(o);if(u.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const d=u.docs[0],f=d.data();if(f.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const p=De(Ne(W,"inscriptions_groupe"),we("groupeId","==",d.id),we("eleveId","==",e),we("statut","==","actif"),_r(1));if(!(await ze(p)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const v={groupeId:d.id,eleveId:e,eleveNom:t,eleveEmail:n,statut:"actif",dateInscription:new Date},b=await kt(Ne(W,"inscriptions_groupe"),v);return await Qe(je(W,"groupes_prof",d.id),{nombreInscrits:Fs(1),dateMiseAJour:new Date}),console.log(` lve ${t} inscrit au groupe "${f.nom}"`),{id:b.id,...v}}catch(l){throw console.error(" Erreur inscription groupe:",l),l}}async function up(e,t="actif"){try{const n=De(Ne(W,"inscriptions_groupe"),we("groupeId","==",e),we("statut","==",t),Xe("dateInscription","asc"));return(await ze(n)).docs.map(l=>({id:l.id,...l.data(),dateInscription:Bs(l.data().dateInscription),dateRetrait:l.data().dateRetrait?Bs(l.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function fX(e){try{const t=De(Ne(W,"inscriptions_groupe"),we("eleveId","==",e),we("statut","==","actif")),n=await ze(t);if(n.empty)return[];const a=[];for(const l of n.docs){const o=l.data().groupeId,u=await oX(o);u&&u.statut==="actif"&&a.push(u)}return a}catch(t){return console.error(" Erreur rcupration groupes lve:",t),[]}}async function pX(e,t){try{await Qe(je(W,"inscriptions_groupe",e),{statut:"retire",dateRetrait:new Date}),await Qe(je(W,"groupes_prof",t),{nombreInscrits:Fs(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function xj(e){try{const n=(await up(e)).map(b=>b.eleveId);if(n.length===0)return{groupeId:e,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const a=[],l=[];for(let b=0;b<n.length;b+=10)l.push(n.slice(b,b+10));for(const b of l){const x=De(Ne(W,"quiz_results"),we("userId","in",b));(await ze(x)).docs.forEach(j=>a.push({id:j.id,...j.data()}))}const o=new Map;for(const b of a){const x=b.userId;o.has(x)||o.set(x,{total:0,somme:0,reussis:0});const N=o.get(x);N.total++,N.somme+=b.score||0,(b.score||0)>=10&&N.reussis++}let u=0,d=0,f=0,p=0,h=20,v=0;for(const[,b]of o){const x=b.total>0?b.somme/b.total:0;u+=x,d++,v+=b.total,x<Ik&&f++,x>p&&(p=x),x<h&&(h=x)}return d===0&&(h=0),{groupeId:e,nombreEleves:n.length,moyenneClasse:d>0?Math.round(u/d*10)/10:0,tauxReussite:v>0?Math.round(Array.from(o.values()).reduce((b,x)=>b+x.reussis,0)/v*100):0,tauxParticipation:Math.round(d/n.length*100),totalQuizPasses:v,elevesEnDifficulte:f,meilleureNote:Math.round(p*10)/10,pireNote:Math.round(h*10)/10,derniereMiseAJour:new Date}}catch(t){throw console.error(" Erreur calcul stats groupe:",t),new Error("Impossible de calculer les statistiques du groupe.")}}async function hX(e){try{const t=await up(e);if(t.length===0)return[];const n=[];for(const a of t)try{const l=await gj(a.eleveId),o=De(Ne(W,"quiz_results"),we("userId","==",a.eleveId),Xe("datePassage","desc")),d=(await ze(o)).docs.map(x=>x.data());let f=0,p=0,h;if(d.length>0){const x=d.reduce((N,j)=>N+(j.score||0),0);f=Math.round(x/d.length*10)/10,p=Math.round(d.filter(N=>(N.score||0)>=10).length/d.length*100),h=Bs(d[0].datePassage)}let v="stable";if(d.length>=4){const x=d.slice(0,Math.ceil(d.length/2)),N=d.slice(Math.ceil(d.length/2)),j=x.reduce((C,A)=>C+(A.score||0),0)/x.length,S=N.reduce((C,A)=>C+(A.score||0),0)/N.length;j-S>1?v="hausse":S-j>1&&(v="baisse")}const b=l.lacunes.map(x=>({disciplineNom:x.disciplineNom,chapitre:x.chapitre,moyenne:x.moyenne,niveauUrgence:x.niveauUrgence}));n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:f,totalQuiz:d.length,tauxReussite:p,scoreGlobal:l.scoreGlobal,streak:{actuel:l.streak.streakActuel,meilleur:l.streak.meilleurStreak},lacunes:b,dernierQuiz:h,tendance:v})}catch(l){console.warn(` Suivi incomplet pour lve ${a.eleveNom}:`,l),n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((a,l)=>l.moyenne-a.moyenne),n}catch(t){throw console.error(" Erreur stats lves groupe:",t),new Error("Impossible de charger les statistiques des lves.")}}async function vX(e,t,n){try{const l=(await up(e)).map(x=>x.eleveId);if(l.length===0)return null;let o=null,u="quiz_results";if(n!=="quizzes_v2"){if(n!=="quizzes"){const x=await Mt(je(W,"quizzes_v2",t));if(x.exists())o=x.data(),u="quiz_results_v2";else{const N=await Mt(je(W,"quizzes",t));N.exists()&&(o=N.data(),u="quiz_results")}}}if(!o)return null;const d=[],f=[];for(let x=0;x<l.length;x+=10)f.push(l.slice(x,x+10));for(const x of f){const N=De(Ne(W,u),we("quizId","==",t),we("userId","in",x));(await ze(N)).docs.forEach(S=>d.push(S.data()))}if(d.length===0)return null;const p=u==="quiz_results_v2",h=d.map(x=>p?x.note20||(x.scoreMax>0?x.score/x.scoreMax*20:0):x.score||0),v=d.map(x=>x.tempsEcoule||0),b=[];if(p&&o.questions)for(let x=0;x<o.questions.length;x++){const N=o.questions[x];let j=0,S=0;for(const w of d){const E=w.detailsParQuestion?.find(D=>D.questionId===N.id);E&&(S++,E.isCorrect||j++)}const C=S>0?Math.round(j/S*100):0,A=N.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${x+1}`;b.push({questionIndex:x,questionTexte:A,tauxEchec:C,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let x=0;x<o.questions.length;x++){const N=o.questions[x];let j=0;const S=new Map;for(const w of d){const E=w.reponses?.[x];E!==void 0&&(S.set(E,(S.get(E)||0)+1),E!==N.reponseCorrecte&&j++)}const C=Math.round(j/d.length*100),A=Array.from(S.entries()).filter(([w])=>w!==N.reponseCorrecte).map(([w,E])=>({reponse:N.options?.[w]||`Option ${w+1}`,nombre:E})).sort((w,E)=>E.nombre-w.nombre);b.push({questionIndex:x,questionTexte:N.question,tauxEchec:C,reponseCorrecte:N.options?.[N.reponseCorrecte]||"N/A",reponsesFrequentes:A})}return b.sort((x,N)=>N.tauxEchec-x.tauxEchec),{quizId:t,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:d.length,moyenneScore:Math.round(h.reduce((x,N)=>x+N,0)/h.length*10)/10,tauxReussite:Math.round(h.filter(x=>x>=10).length/h.length*100),tempsEcouleMoyen:Math.round(v.reduce((x,N)=>x+N,0)/v.length),questionsRatees:b}}catch(a){return console.error(" Erreur analyse quiz groupe:",a),null}}async function gX(e){try{const t=[];try{const n=De(Ne(W,"quizzes"),we("disciplineId","==",e),Xe("createdAt","desc"));(await ze(n)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(n){console.warn(" Recherche quizzes choue (index manquant ?):",n)}try{const n=De(Ne(W,"quizzes_v2"),we("disciplineId","==",e),Xe("createdAt","desc"));(await ze(n)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(n){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",n)}return console.log(` ${t.length} quiz trouv(s) pour discipline ${e}`),t}catch(t){return console.error(" Erreur rcupration quiz par matire:",t),[]}}function xX(e,t){const n=[],a=new Date;for(const o of e){if(o.totalQuiz>0&&o.moyenne<Ik&&n.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(u=>u.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:a}),o.dernierQuiz){const u=sX(o.dernierQuiz,a);u>=aX&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a pas fait de quiz depuis ${u} jours.`,niveauUrgence:u>=14?"important":"info",dateCreation:a})}else o.totalQuiz===0&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:a});o.tendance==="baisse"&&o.totalQuiz>=4&&n.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:a}),o.moyenne>=iX&&o.totalQuiz>=3&&n.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:a})}const l={critique:0,important:1,info:2};return n.sort((o,u)=>l[o.niveauUrgence]-l[u.niveauUrgence]),n}function bX(e,t){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],a=e.map(o=>{const u=o.lacunes.map(d=>`${d.disciplineNom} (${d.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${u}"`,o.tendance].join(",")});return"\uFEFF"+[n.join(","),...a].join(`
`)}function yX(e,t){const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`${t}.csv`,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}const jX=()=>{const{currentUser:e}=rt(),[t,n]=g.useState([]),[a,l]=g.useState(!1),[o,u]=g.useState(""),[d,f]=g.useState(!0),[p,h]=g.useState(!1),[v,b]=g.useState(null),[x,N]=g.useState(null),j=g.useCallback(async()=>{if(e?.uid)try{f(!0);const C=await fX(e.uid);n(C)}catch(C){console.error("Erreur chargement groupes:",C)}finally{f(!1)}},[e?.uid]);g.useEffect(()=>{j()},[j]);const S=async C=>{if(C.preventDefault(),!(!e?.uid||!o.trim()))try{h(!0),b(null),N(null),await mX(e.uid,e.displayName||e.email||"lve",e.email||"",o),N("Tu as rejoint le groupe avec succs ! "),u(""),l(!1),await j(),setTimeout(()=>N(null),5e3)}catch(A){b(A.message||"Impossible de rejoindre le groupe.")}finally{h(!1)}};return r.jsxs("div",{className:"rejoindre-groupe-section",children:[r.jsxs("div",{className:"rejoindre-groupe-header",children:[r.jsx("h3",{children:" Mes groupes-classes"}),r.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>l(!a),children:a?" Annuler":" Rejoindre un groupe"})]}),v&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",v,r.jsx("button",{onClick:()=>b(null),className:"prof-alert-close",children:""})]}),x&&r.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:x}),a&&r.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[r.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),r.jsxs("form",{onSubmit:S,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:C=>u(C.target.value.toUpperCase()),maxLength:14,disabled:p,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:p||o.length<14,children:p?" Vrification...":" Rejoindre"})]})]}),d?r.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):t.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[r.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),r.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map(C=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[r.jsxs("div",{children:[r.jsx("strong",{style:{color:"#1f2937"},children:C.nom}),r.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[C.matiereNom,"  Prof: ",C.profNom]})]}),r.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},C.id))})]})},NX=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":e>0?"#ef4444":"#d1d5db",TE=({pourcentage:e,label:t,size:n="md",showPercent:a=!0,color:l,showCheck:o=!0,className:u=""})=>{const[d,f]=g.useState(0);g.useEffect(()=>{const x=setTimeout(()=>{f(Math.min(100,Math.max(0,e)))},100);return()=>clearTimeout(x)},[e]);const h={sm:"4px",md:"8px",lg:"12px"}[n],v=l||NX(e),b=e>=100;return r.jsxs("div",{className:`progress-bar-wrapper ${u}`,children:[(t||a)&&r.jsxs("div",{className:"progress-bar-header",children:[t&&r.jsx("span",{className:"progress-bar-label",children:t}),a&&r.jsxs("span",{className:"progress-bar-percent",style:{color:v},children:[b&&o?" ":"",e,"%"]})]}),r.jsx("div",{className:"progress-bar-track",style:{height:h},children:r.jsx("div",{className:"progress-bar-fill",style:{width:`${d}%`,backgroundColor:v,height:"100%"}})})]})},_X=()=>{const e=it(),{currentUser:t}=rt(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[f,p]=g.useState([]),[h,v]=g.useState([]),[b,x]=g.useState(null),[N,j]=g.useState([]),[S,C]=g.useState("all"),[A,w]=g.useState(!0),[E,D]=g.useState("overview"),[O,T]=g.useState(null),[P,I]=g.useState(!1),[R,F]=g.useState(!1),B=async()=>{if(t){I(!0);try{const Q=await HW(t.uid);T(Q)}catch(Q){console.error("Erreur gnration code parent :",Q)}finally{I(!1)}}},G=()=>{O&&(navigator.clipboard.writeText(O),F(!0),setTimeout(()=>F(!1),2e3))};if(g.useEffect(()=>{(async()=>{if(t){w(!0);try{await i5(t.uid);const[$,L,pe,te,de,me]=await Promise.all([KR(t.uid),WR(t.uid),XR(t.uid,20),vf(t.uid,10),vA().catch(()=>[]),r5(t.uid)]);a($),o(L),d(pe),p(te),v(de),x(me);const xe=s5($,L,me);j(xe)}catch($){console.error("Erreur chargement dashboard :",$)}finally{w(!1)}}})()},[t]),A)return r.jsxs("div",{className:"sd-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const V=N.filter(Q=>Q.obtenu),M=N.length,q=t?.displayName||t?.email?.split("@")[0]||"lve",X=S==="all"?N:N.filter(Q=>Q.categorie===S);return r.jsxs("div",{className:"student-dashboard",children:[r.jsxs("div",{className:"sd-welcome",children:[r.jsxs("div",{className:"sd-welcome-text",children:[r.jsxs("h1",{children:["Bienvenue, ",q," "]}),r.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),r.jsxs("div",{className:"sd-welcome-badges-row",children:[t?.isPremium&&r.jsxs("span",{className:"sd-premium-badge",children:[r.jsx(cn,{size:14})," Premium"]}),b&&b.streakActuel>0&&r.jsxs("span",{className:"sd-streak-badge",children:[" ",b.streakActuel," jour",b.streakActuel>1?"s":""]})]})]}),r.jsxs("div",{className:"sd-stats-grid",children:[r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:r.jsx(dn,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),r.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:r.jsx(zv,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",style:{color:Ql(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),r.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:r.jsx(Zl,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsx("span",{className:"sd-stat-value",children:b?.totalRessourcesVues||0}),r.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:r.jsx(aA,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[b?.streakActuel||0," "]}),r.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:r.jsx(iA,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),r.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:r.jsx(Hi,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[b?.disciplinesCompletees||0,"/",b?.disciplinesCommencees||0]}),r.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),r.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[r.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),O?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[r.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:O}),r.jsx("button",{className:"sd-btn",onClick:G,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:R?"#10b981":"#f3f4f6",color:R?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:R?" Copi !":" Copier"})]}):r.jsx("button",{className:"sd-btn sd-btn-primary",onClick:B,disabled:P,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:P?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):r.jsx(r.Fragment,{children:" Gnrer mon code"})})]}),r.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:r.jsx(jX,{})}),r.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(dn,{size:18})," Cours en ligne"]}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Des cours complets du programme sngalais, accessibles partout."}),r.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e("/cours"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Yl,{size:16})," Accder aux cours"]})]}),r.jsxs("div",{className:"sd-tabs",children:[r.jsxs("button",{className:`sd-tab ${E==="overview"?"active":""}`,onClick:()=>D("overview"),children:[r.jsx(zs,{size:16})," Vue d'ensemble"]}),r.jsxs("button",{className:`sd-tab ${E==="progression"?"active":""}`,onClick:()=>D("progression"),children:[r.jsx(wc,{size:16})," Progression"]}),r.jsxs("button",{className:`sd-tab ${E==="history"?"active":""}`,onClick:()=>D("history"),children:[r.jsx(Ov,{size:16})," Historique"]}),r.jsxs("button",{className:`sd-tab ${E==="badges"?"active":""}`,onClick:()=>D("badges"),children:[r.jsx(Hi,{size:16})," Badges (",V.length,"/",M,")"]})]}),E==="overview"&&r.jsxs("div",{className:"sd-overview",children:[u.length>1&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(wc,{size:18})," volution de vos scores"]}),r.jsx("div",{className:"sd-chart-container",children:r.jsx(vw,{width:"100%",height:280,children:r.jsxs(_W,{data:u,children:[r.jsx(xb,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(_b,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),r.jsx(Cb,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),r.jsx(_2,{formatter:Q=>[`${Q}%`,"Score"],labelFormatter:Q=>`Date : ${Q}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),r.jsx(hk,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),l.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(zs,{size:18})," Moyennes par discipline"]}),r.jsx("div",{className:"sd-chart-container",children:r.jsx(vw,{width:"100%",height:280,children:r.jsxs(wW,{data:l,layout:"vertical",children:[r.jsx(xb,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),r.jsx(_b,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),r.jsx(Cb,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),r.jsx(_2,{formatter:Q=>[`${Q}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),r.jsx(yk,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:l.map((Q,$)=>r.jsx(ij,{fill:Ql(Q.moyenne)},$))})]})})})]}),h.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(Yl,{size:18})," Quiz disponibles"]}),r.jsx("div",{className:"sd-quiz-grid",children:h.slice(0,6).map(Q=>{const $=Q.isPremium&&!t?.isPremium;return r.jsxs("div",{className:`sd-quiz-card ${$?"locked":""}`,onClick:()=>!$&&e(`/quiz/${Q.id}`),children:[Q.isPremium&&r.jsxs("span",{className:"sd-quiz-badge-premium",children:[$?r.jsx(Sx,{size:10}):r.jsx(cn,{size:10})," Premium"]}),r.jsx("h4",{className:"sd-quiz-title",children:Q.titre}),r.jsxs("div",{className:"sd-quiz-meta",children:[r.jsxs("span",{children:[r.jsx(dn,{size:12})," ",Q.questions.length," questions"]}),r.jsxs("span",{children:[r.jsx(to,{size:12})," ",Q.duree," min"]})]}),!$&&r.jsxs("button",{className:"sd-quiz-play-btn",children:[r.jsx(Yl,{size:14})," Commencer"]}),$&&r.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:L=>{L.stopPropagation(),e("/premium")},children:[r.jsx(Sx,{size:14})," Dbloquer"]})]},Q.id)})})]}),n&&n.totalQuizPasses===0&&(!b||b.totalRessourcesVues===0)&&r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(zv,{size:48}),r.jsx("h3",{children:"Commencez votre parcours !"}),r.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),h.length>0&&r.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e(`/quiz/${h[0].id}`),children:[r.jsx(Yl,{size:18})," Passer un quiz"]})]})]}),E==="progression"&&r.jsxs("div",{className:"sd-progression",children:[r.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(wc,{size:18})," Avancement global"]}),r.jsx(TE,{pourcentage:b?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),r.jsxs("div",{className:"sd-prog-stats-row",children:[r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:b?.totalRessourcesVues||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:b?.totalQuizReussis||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:b?.disciplinesCommencees||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsxs("span",{className:"sd-prog-stat-number",children:[" ",b?.streakActuel||0]}),r.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",b?.meilleurStreak||0,")"]})]})]})]}),b&&b.parDiscipline.length>0?r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(zs,{size:18})," Par discipline"]}),r.jsx("div",{className:"sd-prog-disciplines",children:b.parDiscipline.map(Q=>r.jsxs("div",{className:"sd-prog-disc-card",children:[r.jsxs("div",{className:"sd-prog-disc-header",children:[r.jsx("span",{className:"sd-prog-disc-name",children:Q.disciplineNom}),Q.pourcentage>=100&&r.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),r.jsx(TE,{pourcentage:Q.pourcentage,size:"md",showPercent:!0}),r.jsxs("div",{className:"sd-prog-disc-details",children:[r.jsxs("span",{children:[r.jsx(Zl,{size:12})," ",Q.ressourcesVues.length,"/",Q.totalRessources," ressources"]}),r.jsxs("span",{children:[r.jsx($t,{size:12})," ",Q.quizReussis.length,"/",Q.totalQuiz," quiz russis"]})]})]},Q.disciplineId))})]}):r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(Zl,{size:48}),r.jsx("h3",{children:"Aucune progression enregistre"}),r.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),l.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(zv,{size:18})," Performance quiz par discipline"]}),r.jsx("div",{className:"sd-disc-list",children:l.map(Q=>r.jsxs("div",{className:"sd-disc-card",children:[r.jsxs("div",{className:"sd-disc-header",children:[r.jsx("span",{className:"sd-disc-name",children:Q.disciplineNom}),r.jsxs("span",{className:"sd-disc-tendance",children:[Q.tendance==="up"&&r.jsx(wc,{size:16,className:"tendance-up"}),Q.tendance==="down"&&r.jsx(d3,{size:16,className:"tendance-down"}),Q.tendance==="stable"&&r.jsx(m3,{size:16,className:"tendance-stable"})]})]}),r.jsxs("div",{className:"sd-disc-stats",children:[r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",style:{color:Ql(Q.moyenne)},children:[Q.moyenne,"%"]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsx("span",{className:"sd-disc-stat-value",children:Q.nombreQuiz}),r.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",children:[Q.meilleurScore,"%"]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",children:[Q.quizReussis,"/",Q.nombreQuiz]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),r.jsx("div",{className:"sd-disc-bar",children:r.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${Q.moyenne}%`,background:Ql(Q.moyenne)}})})]},Q.disciplineId))})]})]}),E==="history"&&r.jsx("div",{className:"sd-history",children:f.length===0?r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(Ov,{size:48}),r.jsx("h3",{children:"Aucun quiz pass"}),r.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):r.jsx("div",{className:"sd-history-list",children:f.map(Q=>{const $=Q.datePassage?.toDate?Q.datePassage.toDate():new Date(Q.datePassage);return r.jsxs("div",{className:`sd-history-item ${Q.reussi?"success":"fail"}`,children:[r.jsx("div",{className:`sd-history-icon ${Q.reussi?"success":"fail"}`,children:Q.reussi?r.jsx($t,{size:20}):r.jsx(wx,{size:20})}),r.jsxs("div",{className:"sd-history-content",children:[r.jsxs("div",{className:"sd-history-top",children:[r.jsx("span",{className:"sd-history-title",children:Q.quizTitre}),r.jsx("span",{className:"sd-history-discipline",children:Q.disciplineNom})]}),r.jsxs("div",{className:"sd-history-meta",children:[r.jsxs("span",{children:[r.jsx(Ov,{size:12}),$.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),r.jsxs("span",{children:[r.jsx(to,{size:12})," ",NA(Q.tempsEcoule)]}),r.jsxs("span",{children:[r.jsx($t,{size:12})," ",Q.bonnesReponses,"/",Q.nombreQuestions]})]})]}),r.jsxs("div",{className:"sd-history-score",style:{color:Ql(Q.pourcentage)},children:[r.jsxs("span",{className:"sd-history-score-value",children:[Q.pourcentage,"%"]}),r.jsx("span",{className:"sd-history-score-label",children:_A(Q.pourcentage)})]})]},Q.id)})})}),E==="badges"&&r.jsxs("div",{className:"sd-badges",children:[r.jsxs("div",{className:"sd-badges-summary",children:[r.jsxs("div",{className:"sd-badges-circle",children:[r.jsx("span",{className:"sd-badges-count",children:V.length}),r.jsxs("span",{className:"sd-badges-total",children:["/ ",M]})]}),r.jsx("p",{children:"badges obtenus"}),r.jsx("div",{className:"sd-badges-progress",children:r.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${V.length/M*100}%`}})})]}),r.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(Q=>r.jsx("button",{className:`sd-badge-filter-btn ${S===Q.key?"active":""}`,onClick:()=>C(Q.key),children:Q.label},Q.key))}),r.jsx("div",{className:"sd-badges-grid",children:X.map(Q=>r.jsxs("div",{className:`sd-badge-card ${Q.obtenu?"obtained":"locked"}`,children:[r.jsx("span",{className:"sd-badge-icon",children:Q.icone}),r.jsx("h4",{className:"sd-badge-name",children:Q.nom}),r.jsx("p",{className:"sd-badge-description",children:Q.description}),r.jsx("span",{className:"sd-badge-condition",children:Q.condition}),Q.obtenu&&r.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),r.jsx("span",{className:"sd-badge-category",children:Q.categorie})]},Q.id))}),X.length===0&&r.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[r.jsx(Pb,{size:36}),r.jsx("h3",{children:"Aucun badge dans cette catgorie"}),r.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},SX=()=>{const{currentUser:e}=rt(),t=it(),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),f=["L","M","M","J","V","S","D"],p=g.useCallback(async()=>{if(e?.uid)try{o(!0),d(null);const w=await gj(e.uid);a(w)}catch(w){console.error("Erreur chargement suivi:",w),d("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[e?.uid]);g.useEffect(()=>{p()},[p]);const h=(()=>{const w=new Date().getDay();return w===0?6:w-1})();if(l)return r.jsx("div",{className:"suivi-page",children:r.jsx("div",{className:"suivi-container",children:r.jsxs("div",{className:"suivi-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(u)return r.jsx("div",{className:"suivi-page",children:r.jsx("div",{className:"suivi-container",children:r.jsxs("div",{className:"suivi-error",children:[r.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),r.jsx("p",{className:"suivi-error-text",children:u}),r.jsx("button",{className:"suivi-btn-retry",onClick:p,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:v,recommandations:b,streak:x,objectifs:N,scoreGlobal:j}=n,S=2*Math.PI*40,C=S-j/100*S,A=j>=60?"#10b981":j>=30?"#f59e0b":"#ef4444";return r.jsx("div",{className:"suivi-page",children:r.jsxs("div",{className:"suivi-container",children:[r.jsx("div",{className:"suivi-header",children:r.jsxs("div",{className:"suivi-header-content",children:[r.jsxs("div",{children:[r.jsx("h1",{children:" Mes points  amliorer"}),r.jsx("p",{className:"suivi-motivation",children:RW(j)})]}),r.jsxs("div",{className:"score-global-circle",children:[r.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[r.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),r.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:A,strokeDasharray:S,strokeDashoffset:C}),r.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:j})]}),r.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),r.jsxs("div",{className:"streak-card",children:[r.jsxs("div",{className:"streak-header",children:[r.jsx("span",{className:"streak-flamme",children:x.streakActuel>0?"":""}),r.jsxs("div",{children:[r.jsx("div",{className:"streak-nombre",children:x.streakActuel}),r.jsx("div",{className:"streak-label",children:x.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),r.jsx("div",{className:"streak-semaine",children:f.map((w,E)=>r.jsxs("div",{className:"streak-jour",children:[r.jsx("span",{className:"streak-jour-label",children:w}),r.jsx("div",{className:`streak-jour-indicateur ${x.semaineCourante[E]?"actif":"inactif"} ${E===h?"aujourd-hui":""}`,children:x.semaineCourante[E]?"":""})]},E))}),r.jsxs("div",{className:"streak-stats",children:[r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsx("span",{className:"streak-stat-value",children:x.meilleurStreak}),r.jsx("span",{className:"streak-stat-label",children:"record"})]}),r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsx("span",{className:"streak-stat-value",children:x.totalJoursActifs}),r.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),x.dernierJourActif&&r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(x.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),r.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",r.jsx("span",{className:"suivi-section-badge",children:N.length})]}),N.length>0?r.jsx("div",{className:"objectifs-grid",children:N.map(w=>{const E=IW(w);return r.jsxs("div",{className:`objectif-card ${w.statut==="atteint"?"atteint":""}`,children:[r.jsxs("div",{className:"objectif-header",children:[r.jsx("span",{className:"objectif-titre",children:w.titre}),w.recompense&&r.jsx("span",{className:"objectif-recompense",children:w.recompense})]}),r.jsx("p",{className:"objectif-description",children:w.description}),r.jsxs("div",{className:"objectif-progress",children:[r.jsxs("div",{className:"objectif-progress-labels",children:[r.jsxs("span",{className:"objectif-progress-value",children:[w.progression," / ",w.cible]}),r.jsxs("span",{className:"objectif-progress-cible",children:[E,"%"]})]}),r.jsx("div",{className:"objectif-progress-track",children:r.jsx("div",{className:`objectif-progress-fill ${w.statut==="atteint"?"atteint":""}`,style:{width:`${E}%`}})})]}),r.jsx("p",{className:`objectif-statut ${w.statut}`,children:w.statut==="atteint"?" Objectif atteint !":w.statut==="en_cours"?" En cours...":" Non commenc"})]},w.id)})}):r.jsxs("div",{className:"suivi-empty",children:[r.jsx("div",{className:"suivi-empty-icon",children:""}),r.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),r.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),r.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",v.length>0&&r.jsx("span",{className:"suivi-section-badge",children:v.length})]}),v.length>0?r.jsx("div",{className:"lacunes-grid",children:v.map(w=>r.jsxs("div",{className:`lacune-card ${w.niveauUrgence}`,children:[r.jsxs("div",{className:"lacune-card-header",children:[r.jsx("span",{className:"lacune-discipline",children:w.disciplineNom}),r.jsx("span",{className:`lacune-badge ${w.niveauUrgence}`,children:kk(w.niveauUrgence)})]}),r.jsxs("div",{className:"lacune-score-bar",children:[r.jsxs("div",{className:"lacune-score-labels",children:[r.jsxs("span",{className:"lacune-score-value",style:{color:of(w.niveauUrgence)},children:[w.moyenne,"/20"]}),r.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),r.jsx("div",{className:"lacune-progress-track",children:r.jsx("div",{className:`lacune-progress-fill ${w.niveauUrgence}`,style:{width:`${w.moyenne/20*100}%`}})})]}),r.jsxs("div",{className:"lacune-details",children:[r.jsxs("span",{className:"lacune-detail-tag",children:[Pk(w.tendance)," ",w.tendance]}),r.jsxs("span",{className:"lacune-detail-tag",children:[" ",w.nombreQuiz," quiz"]}),r.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",w.scoreDetails.dernierScore,"/20"]})]})]},w.id))}):r.jsxs("div",{className:"suivi-empty",children:[r.jsx("div",{className:"suivi-empty-icon",children:""}),r.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),r.jsx("p",{className:"suivi-empty-text",children:j>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),r.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),b.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",r.jsx("span",{className:"suivi-section-badge",children:b.length})]}),r.jsx("div",{className:"recommandations-list",children:b.map(w=>r.jsxs("div",{className:"recommandation-card",children:[r.jsx("div",{className:"recommandation-priorite",children:w.priorite}),r.jsxs("div",{className:"recommandation-content",children:[r.jsx("p",{className:"recommandation-titre",children:w.titre}),r.jsx("p",{className:"recommandation-description",children:w.description}),r.jsx("span",{className:"recommandation-discipline-tag",children:w.disciplineNom})]})]},w.id))})]}),r.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:r.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),children:" Passer un quiz maintenant"})})]})})},wX=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1,l=[];for(let o=-1;o<=3;o++){const u=a+o;l.push(`${u}-${u+1}`)}return l},qE=wX(),Nc=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1;return`${a}-${a+1}`},RE=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],CX=({onSelectGroupe:e})=>{const{currentUser:t}=rt(),[n,a]=g.useState([]),[l,o]=g.useState(new Map),[u,d]=g.useState([]),[f,p]=g.useState(!0),[h,v]=g.useState(null),[b,x]=g.useState(!1),[N,j]=g.useState(!1),[S,C]=g.useState(null),[A,w]=g.useState(null),[E,D]=g.useState(null),[O,T]=g.useState(!1),[P,I]=g.useState(null),[R,F]=g.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Nc()}),[B,G]=g.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Nc()}),[V,M]=g.useState("actif");g.useEffect(()=>{(async()=>{try{const H=await Za.getAll();d(H.map(ce=>({id:ce.id,nom:ce.nom,classe:ce.classe||""})))}catch(H){console.warn(" Impossible de charger les disciplines:",H)}})()},[]);const q=g.useCallback(async()=>{if(t?.uid)try{p(!0),v(null);const J=await $k(t.uid);a(J);const H=new Map;for(const ce of J)if(ce.statut==="actif")try{const Z=await xj(ce.id);H.set(ce.id,Z)}catch{console.warn(`Stats indisponibles pour ${ce.nom}`)}o(H)}catch(J){console.error("Erreur chargement groupes:",J),v("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{p(!1)}},[t?.uid]);g.useEffect(()=>{q()},[q]);const X=(J,H=!1)=>{const ce=u.find(_e=>_e.id===J),Z=ce?`${ce.nom}${ce.classe?` (${ce.classe})`:""}`:"";H?G(_e=>({..._e,matiereId:J,matiereNom:Z})):F(_e=>({..._e,matiereId:J,matiereNom:Z}))},Q=async J=>{if(J.preventDefault(),!(!t?.uid||!R.nom.trim()||!R.matiereId))try{j(!0),await lX(t.uid,t.displayName||t.email||"Professeur",R),F({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Nc()}),x(!1),I("Groupe cr avec succs !"),setTimeout(()=>I(null),3e3),await q()}catch(H){v(H.message||"Erreur lors de la cration du groupe.")}finally{j(!1)}},$=J=>{D(J),G({nom:J.nom,description:J.description||"",matiereId:J.matiereId,matiereNom:J.matiereNom,classeNiveau:J.classeNiveau,anneeScolaire:J.anneeScolaire}),x(!1)},L=()=>{D(null),G({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Nc()})},pe=async J=>{if(J.preventDefault(),!(!E||!B.nom.trim()||!B.matiereId))try{T(!0),await Bk(E.id,{nom:B.nom.trim(),description:B.description?.trim()||"",matiereId:B.matiereId,matiereNom:B.matiereNom,classeNiveau:B.classeNiveau,anneeScolaire:B.anneeScolaire}),D(null),I("Groupe modifi avec succs !"),setTimeout(()=>I(null),3e3),await q()}catch(H){v(H.message||"Erreur lors de la modification du groupe.")}finally{T(!1)}},te=async J=>{try{await navigator.clipboard.writeText(J),C(J),setTimeout(()=>C(null),2e3)}catch{const H=document.createElement("textarea");H.value=J,document.body.appendChild(H),H.select(),document.execCommand("copy"),document.body.removeChild(H),C(J),setTimeout(()=>C(null),2e3)}},de=async J=>{try{await cX(J),w(null),await q()}catch(H){v(H.message)}},me=async J=>{try{await uX(J),await q()}catch(H){v(H.message)}},xe=async J=>{try{await dX(J),await q()}catch(H){v(H.message)}},Y=(J,H)=>{F(ce=>({...ce,[J]:H}))},he=(J,H)=>{G(ce=>({...ce,[J]:H}))},Pe=n.filter(J=>V==="tous"?!0:J.statut===V),se=(J,H,ce)=>r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:J,children:"Discipline / Matire *"}),r.jsxs("select",{id:J,value:H,onChange:Z=>ce(Z.target.value),className:"prof-select",required:!0,children:[r.jsx("option",{value:"",children:" Slectionner une discipline "}),u.map(Z=>r.jsxs("option",{value:Z.id,children:[Z.nom,Z.classe?` (${Z.classe})`:""]},Z.id))]}),u.length===0&&r.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return f?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):r.jsxs("div",{className:"groupe-manager",children:[r.jsxs("div",{className:"groupe-manager-header",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),r.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",Nc()]})]}),r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{x(!b),E&&L()},children:b?" Annuler":" Nouveau groupe"})]}),h&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[r.jsx("span",{children:""})," ",h,r.jsx("button",{onClick:()=>v(null),className:"prof-alert-close",children:""})]}),P&&r.jsxs("div",{className:"prof-alert prof-alert-success",children:[r.jsx("span",{children:""})," ",P,r.jsx("button",{onClick:()=>I(null),className:"prof-alert-close",children:""})]}),b&&r.jsxs("div",{className:"groupe-form-container",children:[r.jsx("h3",{children:"Crer un nouveau groupe-classe"}),r.jsxs("form",{onSubmit:Q,className:"groupe-form",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),r.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:R.nom,onChange:J=>Y("nom",J.target.value),required:!0,className:"prof-input",maxLength:60})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),r.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:R.description||"",onChange:J=>Y("description",J.target.value),className:"prof-input",maxLength:120})]}),r.jsxs("div",{className:"prof-form-row",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),r.jsx("select",{id:"groupe-niveau",value:R.classeNiveau,onChange:J=>Y("classeNiveau",J.target.value),className:"prof-select",children:RE.map(J=>r.jsx("option",{value:J.value,children:J.label},J.value))})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),r.jsx("select",{id:"groupe-annee",value:R.anneeScolaire,onChange:J=>Y("anneeScolaire",J.target.value),className:"prof-select",children:qE.map(J=>r.jsx("option",{value:J,children:J},J))})]})]}),se("groupe-discipline",R.matiereId,J=>X(J,!1)),r.jsx("div",{className:"prof-form-actions",children:r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:N||!R.nom.trim()||!R.matiereId,children:N?" Cration...":" Crer le groupe"})})]})]}),E&&r.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[r.jsxs("h3",{children:[" Modifier le groupe : ",E.nom]}),r.jsxs("form",{onSubmit:pe,className:"groupe-form",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),r.jsx("input",{id:"edit-groupe-nom",type:"text",value:B.nom,onChange:J=>he("nom",J.target.value),required:!0,className:"prof-input",maxLength:60})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),r.jsx("input",{id:"edit-groupe-desc",type:"text",value:B.description||"",onChange:J=>he("description",J.target.value),className:"prof-input",maxLength:120})]}),r.jsxs("div",{className:"prof-form-row",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),r.jsx("select",{id:"edit-groupe-niveau",value:B.classeNiveau,onChange:J=>he("classeNiveau",J.target.value),className:"prof-select",children:RE.map(J=>r.jsx("option",{value:J.value,children:J.label},J.value))})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),r.jsx("select",{id:"edit-groupe-annee",value:B.anneeScolaire,onChange:J=>he("anneeScolaire",J.target.value),className:"prof-select",children:qE.map(J=>r.jsx("option",{value:J,children:J},J))})]})]}),se("edit-groupe-discipline",B.matiereId,J=>X(J,!0)),r.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:O||!B.nom.trim()||!B.matiereId,children:O?" Enregistrement...":" Enregistrer"}),r.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:L,disabled:O,children:" Annuler"})]})]})]}),r.jsxs("div",{className:"groupe-filtres",children:[r.jsxs("button",{className:`prof-filtre-btn ${V==="actif"?"active":""}`,onClick:()=>M("actif"),children:["Actifs (",n.filter(J=>J.statut==="actif").length,")"]}),r.jsxs("button",{className:`prof-filtre-btn ${V==="archive"?"active":""}`,onClick:()=>M("archive"),children:["Archivs (",n.filter(J=>J.statut==="archive").length,")"]}),r.jsxs("button",{className:`prof-filtre-btn ${V==="tous"?"active":""}`,onClick:()=>M("tous"),children:["Tous (",n.length,")"]})]}),Pe.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:V==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),r.jsx("p",{children:V==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),V!=="archive"&&r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>x(!0),children:" Crer mon premier groupe"})]}):r.jsx("div",{className:"groupe-grid",children:Pe.map(J=>{const H=l.get(J.id),ce=E?.id===J.id;return r.jsxs("div",{className:`groupe-card ${J.statut==="archive"?"groupe-card-archive":""} ${ce?"groupe-card-editing":""}`,children:[r.jsxs("div",{className:"groupe-card-header",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"groupe-card-titre",children:J.nom}),r.jsx("span",{className:"groupe-card-matiere",children:J.matiereNom})]}),r.jsx("span",{className:`groupe-badge groupe-badge-${J.statut}`,children:J.statut==="actif"?" Actif":" Archiv"})]}),J.description&&r.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:J.description}),r.jsxs("div",{className:"groupe-card-infos",children:[r.jsxs("span",{children:[" ",J.classeNiveau]}),r.jsxs("span",{children:[" ",J.anneeScolaire]}),r.jsxs("span",{children:[" ",J.nombreInscrits," lve",J.nombreInscrits!==1?"s":""]})]}),r.jsxs("div",{className:"groupe-card-code",children:[r.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),r.jsxs("div",{className:"groupe-code-box",children:[r.jsx("code",{className:"groupe-code-value",children:J.codeInvitation}),r.jsx("button",{className:"prof-btn-icon",onClick:Z=>{Z.stopPropagation(),te(J.codeInvitation)},title:"Copier le code",children:S===J.codeInvitation?"":""}),J.statut==="actif"&&r.jsx("button",{className:"prof-btn-icon",onClick:Z=>{Z.stopPropagation(),xe(J.id)},title:"Rgnrer le code",children:""})]})]}),H&&H.nombreEleves>0&&r.jsxs("div",{className:"groupe-card-stats",children:[r.jsxs("div",{className:"groupe-stat-item",children:[r.jsx("span",{className:"groupe-stat-value",children:H.moyenneClasse}),r.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),r.jsxs("div",{className:"groupe-stat-item",children:[r.jsxs("span",{className:"groupe-stat-value",children:[H.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),r.jsxs("div",{className:"groupe-stat-item",children:[r.jsx("span",{className:"groupe-stat-value",children:H.elevesEnDifficulte}),r.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),r.jsxs("div",{className:"groupe-card-actions",children:[J.statut==="actif"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>e(J),children:" Voir dtails"}),r.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>$(J),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>me(J.id),children:" Archiver"})]}),A===J.id?r.jsxs("div",{className:"groupe-confirm-suppression",children:[r.jsx("span",{children:"Confirmer ?"}),r.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>de(J.id),children:"Oui, supprimer"}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>w(null),children:"Non"})]}):r.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>w(J.id),children:" Supprimer"})]})]},J.id)})})]})},EX=({groupe:e,onRetour:t})=>{const[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[f,p]=g.useState([]),[h,v]=g.useState(null),[b,x]=g.useState(!0),[N,j]=g.useState(null),[S,C]=g.useState("apercu"),[A,w]=g.useState("moyenne_desc"),[E,D]=g.useState(null),[O,T]=g.useState(null),[P,I]=g.useState(!1),[R,F]=g.useState(null),B=g.useCallback(async()=>{try{x(!0),j(null);const[L,pe,te]=await Promise.all([xj(e.id),hX(e.id),gX(e.matiereId)]);a(L),o(pe),p(te);const de=xX(pe,e.nom);d(de)}catch(L){console.error("Erreur chargement dtail groupe:",L),j("Impossible de charger les donnes du groupe.")}finally{x(!1)}},[e.id,e.matiereId,e.nom]);g.useEffect(()=>{B()},[B]);const G=async L=>{try{I(!0),T(L);const pe=await vX(e.id,L);v(pe)}catch(pe){console.error("Erreur analyse quiz:",pe)}finally{I(!1)}},V=()=>{const L=bX(l,e.nom),pe=`PedaClic_${e.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;yX(L,pe)},M=async L=>{try{F(L);const te=(await up(e.id)).find(de=>de.eleveId===L);te&&(await pX(te.id,e.id),await B())}catch(pe){j(pe.message)}finally{F(null)}},q=[...l].sort((L,pe)=>{switch(A){case"moyenne_desc":return pe.moyenne-L.moyenne;case"moyenne_asc":return L.moyenne-pe.moyenne;case"nom":return L.eleveNom.localeCompare(pe.eleveNom);case"streak":return pe.streak.actuel-L.streak.actuel;case"quiz_count":return pe.totalQuiz-L.totalQuiz;default:return 0}}),X=L=>L>=16?"prof-note-excellent":L>=12?"prof-note-bien":L>=10?"prof-note-passable":L>=8?"prof-note-insuffisant":"prof-note-critique",Q=L=>{switch(L){case"hausse":return"";case"baisse":return"";default:return""}},$=L=>{switch(L){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return b?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsxs("p",{children:['Chargement des donnes de "',e.nom,'"...']})]}):r.jsxs("div",{className:"groupe-detail",children:[r.jsxs("div",{className:"groupe-detail-header",children:[r.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:t,children:" Retour aux groupes"}),r.jsxs("div",{className:"groupe-detail-titre-section",children:[r.jsx("h2",{className:"groupe-detail-titre",children:e.nom}),r.jsxs("p",{className:"groupe-detail-subtitle",children:[e.matiereNom,"  ",e.classeNiveau,"  ",e.anneeScolaire]})]}),r.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:V,children:" Export CSV"})]}),N&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",N,r.jsx("button",{onClick:()=>j(null),className:"prof-alert-close",children:""})]}),r.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:l.length},{id:"quiz",label:" Quiz",count:f.length},{id:"alertes",label:" Alertes",count:u.length}].map(L=>r.jsxs("button",{className:`groupe-onglet ${S===L.id?"active":""}`,onClick:()=>C(L.id),children:[L.label,L.count!==null&&L.count>0&&r.jsx("span",{className:"groupe-onglet-badge",children:L.count})]},L.id))}),S==="apercu"&&n&&r.jsxs("div",{className:"groupe-apercu",children:[r.jsxs("div",{className:"groupe-stats-grid",children:[r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:`groupe-stat-card-value ${X(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),r.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),r.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),r.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),r.jsx("div",{className:"groupe-apercu-notes",children:r.jsxs("div",{className:"groupe-note-range",children:[r.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),r.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),r.jsx("div",{className:"groupe-note-barre",children:r.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),r.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),l.length>=3&&r.jsxs("div",{className:"groupe-apercu-classement",children:[r.jsxs("div",{className:"groupe-classement-section",children:[r.jsx("h4",{children:" Top 3"}),l.slice(0,3).map((L,pe)=>r.jsxs("div",{className:"groupe-classement-item",children:[r.jsx("span",{className:"groupe-classement-rang",children:pe===0?"":pe===1?"":""}),r.jsx("span",{className:"groupe-classement-nom",children:L.eleveNom}),r.jsxs("span",{className:`groupe-classement-note ${X(L.moyenne)}`,children:[L.moyenne,"/20"]})]},L.eleveId))]}),r.jsxs("div",{className:"groupe-classement-section",children:[r.jsx("h4",{children:"  surveiller"}),l.filter(L=>L.moyenne<8&&L.totalQuiz>0).slice(0,3).map(L=>r.jsxs("div",{className:"groupe-classement-item",children:[r.jsx("span",{className:"groupe-classement-rang",children:""}),r.jsx("span",{className:"groupe-classement-nom",children:L.eleveNom}),r.jsxs("span",{className:`groupe-classement-note ${X(L.moyenne)}`,children:[L.moyenne,"/20"]})]},L.eleveId)),l.filter(L=>L.moyenne<8&&L.totalQuiz>0).length===0&&r.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),S==="eleves"&&r.jsxs("div",{className:"groupe-eleves",children:[r.jsxs("div",{className:"groupe-eleves-toolbar",children:[r.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),r.jsxs("select",{id:"tri-eleves",value:A,onChange:L=>w(L.target.value),className:"prof-select prof-select-sm",children:[r.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),r.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),r.jsx("option",{value:"nom",children:"Nom (A-Z)"}),r.jsx("option",{value:"streak",children:"Streak ()"}),r.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),r.jsxs("span",{className:"groupe-eleves-count",children:[l.length," lve",l.length!==1?"s":""]})]}),l.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Aucun lve inscrit"}),r.jsxs("p",{children:["Partagez le code ",r.jsx("strong",{children:e.codeInvitation}),"  vos lves."]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"groupe-eleves-table-wrapper",children:r.jsxs("table",{className:"groupe-eleves-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"#"}),r.jsx("th",{children:"lve"}),r.jsx("th",{children:"Moyenne"}),r.jsx("th",{children:"Quiz"}),r.jsx("th",{children:"Russite"}),r.jsx("th",{children:"Streak"}),r.jsx("th",{children:"Tendance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:q.map((L,pe)=>r.jsxs("tr",{className:`${E===L.eleveId?"groupe-eleve-row-active":""}`,children:[r.jsx("td",{className:"groupe-eleve-rang",children:pe+1}),r.jsx("td",{className:"groupe-eleve-nom-cell",children:r.jsxs("div",{children:[r.jsx("strong",{children:L.eleveNom}),r.jsx("span",{className:"groupe-eleve-email",children:L.eleveEmail})]})}),r.jsx("td",{children:r.jsxs("span",{className:`groupe-note-badge ${X(L.moyenne)}`,children:[L.moyenne,"/20"]})}),r.jsx("td",{children:L.totalQuiz}),r.jsxs("td",{children:[L.tauxReussite,"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"groupe-streak",children:[" ",L.streak.actuel,"j"]})}),r.jsxs("td",{children:[Q(L.tendance)," ",L.tendance]}),r.jsxs("td",{className:"groupe-eleve-actions",children:[r.jsx("button",{className:"prof-btn-icon",onClick:()=>D(E===L.eleveId?null:L.eleveId),title:"Voir dtails",children:E===L.eleveId?"":""}),r.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>M(L.eleveId),disabled:R===L.eleveId,title:"Retirer du groupe",children:R===L.eleveId?"":""})]})]},L.eleveId))})]})}),E&&(()=>{const L=l.find(pe=>pe.eleveId===E);return L?r.jsxs("div",{className:"groupe-eleve-detail",children:[r.jsxs("div",{className:"groupe-eleve-detail-header",children:[r.jsxs("h3",{children:[" Dtail  ",L.eleveNom]}),r.jsx("button",{className:"prof-btn-icon",onClick:()=>D(null),children:""})]}),r.jsxs("div",{className:"groupe-eleve-detail-grid",children:[r.jsxs("div",{className:"groupe-eleve-detail-card",children:[r.jsx("h4",{children:"Score global"}),r.jsx("div",{className:"groupe-eleve-score-circle",children:r.jsxs("span",{className:X(L.scoreGlobal/5),children:[L.scoreGlobal,"/100"]})})]}),r.jsxs("div",{className:"groupe-eleve-detail-card",children:[r.jsx("h4",{children:" Streak"}),r.jsxs("p",{children:["Actuel : ",r.jsxs("strong",{children:[L.streak.actuel," jour",L.streak.actuel!==1?"s":""]})]}),r.jsxs("p",{children:["Meilleur : ",L.streak.meilleur," jours"]})]}),r.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[r.jsx("h4",{children:" Lacunes dtectes"}),L.lacunes.length===0?r.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):r.jsx("ul",{className:"groupe-lacunes-liste",children:L.lacunes.map((pe,te)=>r.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${pe.niveauUrgence}`,children:[r.jsxs("span",{className:"groupe-lacune-nom",children:[pe.disciplineNom,pe.chapitre&&`  ${pe.chapitre}`]}),r.jsxs("span",{className:"groupe-lacune-moyenne",children:[pe.moyenne,"/20"]}),r.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${pe.niveauUrgence}`,children:pe.niveauUrgence})]},te))})]})]})]}):null})()]})]}),S==="quiz"&&r.jsxs("div",{className:"groupe-quiz",children:[r.jsxs("div",{className:"groupe-quiz-selector",children:[r.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),r.jsxs("select",{id:"select-quiz",value:O||"",onChange:L=>{L.target.value&&G(L.target.value)},className:"prof-select",children:[r.jsx("option",{value:"",children:" Choisir un quiz "}),f.map(L=>r.jsx("option",{value:L.id,children:L.titre},L.id))]})]}),!O&&r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Analyse par quiz"}),r.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),P&&r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Analyse en cours..."})]}),h&&!P&&r.jsxs("div",{className:"groupe-quiz-resultats",children:[r.jsxs("div",{className:"groupe-quiz-stats-header",children:[r.jsx("h3",{children:h.quizTitre}),r.jsxs("div",{className:"groupe-quiz-stats-grid",children:[r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsx("span",{className:"groupe-stat-mini-value",children:h.totalPassages}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:`groupe-stat-mini-value ${X(h.moyenneScore)}`,children:[h.moyenneScore,"/20"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:"groupe-stat-mini-value",children:[h.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(h.tempsEcouleMoyen/60),"min"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),r.jsxs("div",{className:"groupe-quiz-questions",children:[r.jsx("h4",{children:" Questions les plus rates"}),h.questionsRatees.filter(L=>L.tauxEchec>30).map((L,pe)=>r.jsxs("div",{className:"groupe-quiz-question-card",children:[r.jsxs("div",{className:"groupe-quiz-question-header",children:[r.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",L.questionIndex+1]}),r.jsxs("span",{className:"groupe-quiz-question-echec",children:[L.tauxEchec,"% d'chec"]})]}),r.jsx("p",{className:"groupe-quiz-question-texte",children:L.questionTexte}),r.jsx("div",{className:"groupe-quiz-question-reponse",children:r.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",L.reponseCorrecte]})}),L.reponsesFrequentes.length>0&&r.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[r.jsx("span",{children:"Erreurs frquentes :"}),L.reponsesFrequentes.slice(0,2).map((te,de)=>r.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",te.reponse," (",te.nombre," lve",te.nombre>1?"s":"",")"]},de))]})]},pe)),h.questionsRatees.filter(L=>L.tauxEchec>30).length===0&&r.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),S==="alertes"&&r.jsx("div",{className:"groupe-alertes",children:u.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Aucune alerte"}),r.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):r.jsx("div",{className:"groupe-alertes-liste",children:u.map(L=>r.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${L.niveauUrgence}`,children:[r.jsxs("div",{className:"groupe-alerte-header",children:[r.jsx("span",{className:"groupe-alerte-emoji",children:$(L.type)}),r.jsx("span",{className:"groupe-alerte-eleve",children:L.eleveNom}),r.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${L.niveauUrgence}`,children:L.niveauUrgence})]}),r.jsx("p",{className:"groupe-alerte-message",children:L.message}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{C("eleves"),D(L.eleveId)},children:" Voir dtail"})]},L.id))})})]})},AX=()=>{const{currentUser:e}=rt(),t=it(),[n,a]=g.useState("overview"),[l,o]=g.useState(null),[u,d]=g.useState(0),[f,p]=g.useState(0),[h,v]=g.useState(0),[b,x]=g.useState(0),[N,j]=g.useState([]),[S,C]=g.useState(!0),A=g.useCallback(async()=>{if(e?.uid)try{C(!0);const O=(await $k(e.uid)).filter(B=>B.statut==="actif");d(O.length);let T=0,P=0,I=0,R=0;const F=[];for(const B of O)try{const G=await xj(B.id);T+=G.nombreEleves,G.nombreEleves>0&&(P+=G.moyenneClasse,I++),R+=G.elevesEnDifficulte,F.push({...B,stats:G})}catch{F.push({...B})}p(T),v(I>0?Math.round(P/I*10)/10:0),x(R),j(F)}catch(D){console.error("Erreur chargement rsum prof:",D)}finally{C(!1)}},[e?.uid]);g.useEffect(()=>{A()},[A]);const w=D=>{o(D),a("detail")},E=()=>{o(null),a("groupes"),A()};return S?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement de votre espace professeur..."})]}):r.jsxs("div",{className:"prof-dashboard",children:[r.jsx("header",{className:"prof-dashboard-header",children:r.jsxs("div",{children:[r.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),r.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",e?.displayName||"Professeur"," "]})]})}),n!=="detail"&&r.jsxs("nav",{className:"prof-nav",children:[r.jsx("button",{className:`prof-nav-btn ${n==="overview"?"active":""}`,onClick:()=>a("overview"),children:" Vue d'ensemble"}),r.jsx("button",{className:`prof-nav-btn ${n==="groupes"?"active":""}`,onClick:()=>a("groupes"),children:" Mes groupes-classes"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/cahiers"),children:" Cahier de textes"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/sequences"),children:" Squences pdagogiques"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/cours"),children:" Cours en ligne"})]}),n==="overview"&&r.jsxs("div",{className:"prof-overview",children:[r.jsxs("div",{className:"prof-overview-cards",children:[r.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>a("groupes"),children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:"prof-overview-card-value",children:u}),r.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",u!==1?"s":""," actif",u!==1?"s":""]})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:"prof-overview-card-value",children:f}),r.jsxs("span",{className:"prof-overview-card-label",children:["lve",f!==1?"s":""," inscrit",f!==1?"s":""]})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),r.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:`prof-overview-card-value ${b>0?"prof-note-critique":""}`,children:b}),r.jsxs("span",{className:"prof-overview-card-label",children:["lve",b!==1?"s":""," en difficult"]})]})]})]}),N.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),r.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>a("groupes"),children:" Crer un groupe-classe"})]}):r.jsxs("div",{className:"prof-overview-groupes",children:[r.jsx("h2",{children:"Mes groupes"}),r.jsx("div",{className:"prof-overview-groupes-grid",children:N.map(D=>r.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>w(D),children:[r.jsxs("div",{className:"prof-overview-groupe-header",children:[r.jsx("h3",{children:D.nom}),r.jsx("span",{className:"prof-overview-groupe-matiere",children:D.matiereNom})]}),D.stats&&r.jsxs("div",{className:"prof-overview-groupe-stats",children:[r.jsxs("div",{children:[r.jsx("span",{className:"prof-overview-groupe-stat-value",children:D.stats.nombreEleves}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[D.stats.moyenneClasse,"/20"]}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[D.stats.tauxReussite,"%"]}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),r.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},D.id))})]})]}),n==="groupes"&&r.jsx(CX,{onSelectGroupe:w}),n==="detail"&&l&&r.jsx(EX,{groupe:l,onRetour:E})]})},zX=e=>{if(!e?.length)return{label:"",color:"#9ca3af"};const t=e.map(a=>a.difficulte),n=t.reduce((a,l)=>a+(l==="facile"?1:l==="moyen"?2:3),0)/t.length;return n<1.5?{label:"Facile",color:"#059669"}:n<2.5?{label:"Moyen",color:"#d97706"}:{label:"Difficile",color:"#dc2626"}},OX=e=>e?.reduce((t,n)=>t+(n.points??0),0)??0,DX=()=>{const e=it(),{currentUser:t}=rt(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(""),[f,p]=g.useState("");g.useEffect(()=>{(async()=>{try{const b=await bA();a(b)}catch{d("Impossible de charger les quiz.")}finally{o(!1)}})()},[]);const h=n.filter(v=>v.titre.toLowerCase().includes(f.toLowerCase())||(v.description??"").toLowerCase().includes(f.toLowerCase()));return r.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"2rem 1rem"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:800,color:"#1f2937",margin:"0 0 0.4rem"},children:" Quiz disponibles"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.95rem",margin:0},children:"Testez vos connaissances avec nos quiz interactifs"})]}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsx("input",{type:"text",placeholder:"Rechercher un quiz...",value:f,onChange:v=>p(v.target.value),style:{width:"100%",maxWidth:400,padding:"0.6rem 1rem",border:"1.5px solid #e5e7eb",borderRadius:10,fontSize:"0.9rem",outline:"none",boxSizing:"border-box"}})}),l&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:[r.jsx("div",{style:{width:36,height:36,border:"3px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto 1rem"}}),"Chargement des quiz..."]}),u&&r.jsxs("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.9rem 1.2rem",borderRadius:10,marginBottom:"1.5rem"},children:[" ",u]}),!l&&!u&&h.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#9ca3af"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.75rem",opacity:.4},children:""}),r.jsx("p",{style:{margin:0},children:f?"Aucun quiz ne correspond  votre recherche.":"Aucun quiz disponible pour le moment."})]}),!l&&!u&&h.length>0&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.25rem"},children:h.map(v=>{const b=zX(v.questions),x=OX(v.questions),N=v.questions?.length??0,j=v.isPremium,S=!j||t?.isPremium;return r.jsxs("div",{onClick:()=>S&&e(`/quiz-avance/${v.id}`),style:{background:"white",borderRadius:14,boxShadow:"0 2px 10px rgba(0,0,0,0.08)",padding:"1.25rem",cursor:S?"pointer":"default",opacity:S?1:.65,transition:"transform 0.15s, box-shadow 0.15s",border:"1.5px solid #f3f4f6",display:"flex",flexDirection:"column",gap:"0.6rem",position:"relative"},onMouseEnter:C=>{S&&(C.currentTarget.style.transform="translateY(-3px)",C.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.12)")},onMouseLeave:C=>{C.currentTarget.style.transform="",C.currentTarget.style.boxShadow="0 2px 10px rgba(0,0,0,0.08)"},children:[j&&r.jsx("span",{style:{position:"absolute",top:12,right:12,background:"#fef3c7",color:"#d97706",fontSize:"0.7rem",fontWeight:700,padding:"0.15rem 0.5rem",borderRadius:20},children:" Premium"}),r.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0,lineHeight:1.3,paddingRight:j?"4rem":0},children:v.titre}),v.description&&r.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:0,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},dangerouslySetInnerHTML:{__html:v.description}}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginTop:"0.25rem"},children:[r.jsxs("span",{style:{fontSize:"0.75rem",background:"#eff6ff",color:"#2563eb",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",N," question",N>1?"s":""]}),r.jsxs("span",{style:{fontSize:"0.75rem",background:"#f3f4f6",color:"#374151",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",v.duree," min"]}),x>0&&r.jsxs("span",{style:{fontSize:"0.75rem",background:"#f0fdf4",color:"#059669",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",x," pts"]}),r.jsx("span",{style:{fontSize:"0.75rem",background:"#fafafa",color:b.color,padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:700,border:`1px solid ${b.color}30`},children:b.label})]}),r.jsx("button",{disabled:!S,onClick:C=>{C.stopPropagation(),S&&e(`/quiz-avance/${v.id}`)},style:{marginTop:"auto",padding:"0.55rem 1rem",background:S?"#2563eb":"#e5e7eb",color:S?"white":"#9ca3af",border:"none",borderRadius:8,fontWeight:600,fontSize:"0.85rem",cursor:S?"pointer":"not-allowed",transition:"background 0.15s"},children:S?" Commencer le quiz":" Premium requis"})]},v.id)})}),!l&&h.length>0&&r.jsxs("p",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.8rem",marginTop:"2rem"},children:[h.length," quiz",(h.length>1,"")," disponible",h.length>1?"s":""]})]})},MX="quizzes",kX="quizzes_v2",IE=50;function PX(e){const t=e.data();return{id:e.id,titre:t.titre||"Quiz sans titre",description:t.description||"",matiere:t.matiere||t.disciplineId||"",niveau:t.niveau||"",classe:t.classe||"",nombreQuestions:Array.isArray(t.questions)?t.questions.length:0,duree:t.duree||void 0,difficulte:t.difficulte||"moyen",source:"quizzes",isPremium:!1,createdAt:t.createdAt||void 0}}function TX(e){const t=e.data();return{id:e.id,titre:t.titre||"Quiz sans titre",description:t.description||"",matiere:t.matiere||"",niveau:t.niveau||"",classe:t.classe||"",nombreQuestions:Array.isArray(t.questions)?t.questions.length:0,duree:t.dureeEstimee||void 0,difficulte:t.difficulte||"moyen",source:"quizzes_v2",isPremium:!1,createdAt:t.createdAt||void 0}}async function Uk(){const[e,t]=await Promise.all([ze(De(Ne(W,MX),we("isPremium","==",!1),Xe("createdAt","desc"),_r(IE))),ze(De(Ne(W,kX),we("isPremium","==",!1),Xe("createdAt","desc"),_r(IE)))]),n=e.docs.map(PX),a=t.docs.map(TX);return[...n,...a].sort((l,o)=>{const u=l.createdAt?.toMillis()??0;return(o.createdAt?.toMillis()??0)-u})}async function qX(){return(await Uk()).slice(0,3)}const RX={"6eme":1,"6me":1,"5eme":2,"5me":2,"4eme":3,"4me":3,"3eme":4,"3me":4,"2nde":5,seconde:5,"1ere":6,"1re":6,terminale:7};function LE(e){const t=e.toLowerCase().trim();return RX[t]??99}function dp(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{let f=!1;async function p(){o(!0),d(null);try{const h=De(Ne(W,"disciplines"),Xe("ordre")),v=await ze(h);if(f)return;const b=new Set,x=new Set;v.forEach(S=>{const C=S.data();C.nom&&typeof C.nom=="string"&&b.add(C.nom.trim()),C.classe&&typeof C.classe=="string"&&x.add(C.classe.trim())});const N=Array.from(b).sort((S,C)=>S.localeCompare(C,"fr")).map(S=>({valeur:S,label:S})),j=Array.from(x).sort((S,C)=>{const A=LE(S),w=LE(C);return A!==w?A-w:S.localeCompare(C,"fr")}).map(S=>({valeur:S,label:S}));t(N),a(j)}catch(h){f||(console.error("[useDisciplinesOptions] Erreur Firestore :",h),d("Impossible de charger les matires/niveaux."))}finally{f||o(!1)}}return p(),()=>{f=!0}},[]),{matieres:e,niveaux:n,loading:l,error:u}}const IX={facile:{label:"Facile",color:"#059669",bg:"#d1fae5"},moyen:{label:"Moyen",color:"#d97706",bg:"#fef3c7"},difficile:{label:"Difficile",color:"#dc2626",bg:"#fee2e2"}},LX=({quiz:e,onJouer:t,estConnecte:n})=>{const a=IX[e.difficulte??"moyen"];return r.jsxs("div",{className:"qg-card",onClick:()=>t(e),children:[r.jsxs("div",{className:"qg-card__header",children:[r.jsx("span",{className:`qg-card__source qg-card__source--${e.source}`,children:e.source==="quizzes_v2"?" Quiz avanc":" Quiz"}),r.jsx("span",{className:"qg-card__difficulte",style:{color:a.color,background:a.bg},children:a.label})]}),r.jsx("h3",{className:"qg-card__titre",children:e.titre}),e.description&&r.jsx("p",{className:"qg-card__description",children:e.description}),r.jsxs("div",{className:"qg-card__meta",children:[e.matiere&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.matiere]}),e.classe&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.classe]}),r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.nombreQuestions," question",e.nombreQuestions>1?"s":""]}),e.duree&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.duree," min"]})]}),r.jsx("button",{className:"qg-card__btn",children:n?" Commencer":" Aperu"})]})},$X=()=>r.jsxs("div",{className:"qg-banniere qg-banniere--inscription",children:[r.jsx("div",{className:"qg-banniere__icone",children:""}),r.jsxs("div",{className:"qg-banniere__texte",children:[r.jsx("h3",{children:"Connectez-vous pour accder  tous les quiz gratuits"}),r.jsx("p",{children:"Crez un compte gratuitement et commencez  vous entraner ds maintenant."})]}),r.jsxs("div",{className:"qg-banniere__actions",children:[r.jsx(Le,{to:"/inscription",className:"btn btn-primary",children:"Crer un compte gratuit"}),r.jsx(Le,{to:"/connexion",className:"btn btn-secondary",children:"Se connecter"})]})]}),BX=()=>r.jsxs("div",{className:"qg-banniere qg-banniere--premium",children:[r.jsx("div",{className:"qg-banniere__icone",children:""}),r.jsxs("div",{className:"qg-banniere__texte",children:[r.jsx("h3",{children:"Dbloquez les Quiz Avancs Premium"}),r.jsx("p",{children:"Accdez  des centaines de quiz avancs avec corrections dtailles, suivi de progression et bien plus encore."}),r.jsxs("p",{className:"qg-banniere__prix",children:[r.jsx("strong",{children:"2 000 FCFA/mois"}),"  ",r.jsx("strong",{children:"20 000 FCFA/an"})]})]}),r.jsx(Le,{to:"/premium",className:"btn btn-premium",children:" Devenir Premium"})]}),UX=()=>{const e=it(),{currentUser:t}=rt(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(""),[f,p]=g.useState(""),[h,v]=g.useState(""),[b,x]=g.useState(""),{matieres:N}=dp(),j=!!t,S=t?.isPremium??!1,C=t?.role==="prof"||t?.role==="admin";g.useEffect(()=>{(async()=>{o(!0),d("");try{const D=j?await Uk():await qX();a(D)}catch(D){console.error("Erreur chargement quiz gratuits:",D),d("Impossible de charger les quiz. Veuillez ressayer.")}finally{o(!1)}})()},[j]);const A=n.filter(E=>{const D=!b||E.titre.toLowerCase().includes(b.toLowerCase())||E.matiere.toLowerCase().includes(b.toLowerCase()),O=!f||E.matiere.toLowerCase().includes(f.toLowerCase()),T=!h||(E.niveau??"").toLowerCase().includes(h.toLowerCase())||(E.classe??"").toLowerCase().includes(h.toLowerCase());return D&&O&&T}),w=E=>{if(!j){e("/connexion");return}E.source==="quizzes_v2"?e(`/quiz-avance/${E.id}`):e(`/quiz/${E.id}`)};return r.jsxs("div",{className:"qg-page",children:[r.jsxs("div",{className:"qg-hero",children:[r.jsxs("div",{className:"qg-hero__content",children:[r.jsx("h1",{className:"qg-hero__titre",children:" Quiz Gratuits"}),r.jsx("p",{className:"qg-hero__sous-titre",children:"Entranez-vous gratuitement avec nos quiz de rvision pour tous les niveaux du collge au lyce."}),r.jsxs("div",{className:"qg-hero__stats",children:[r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:n.length}),j?" quiz disponibles":"+ quiz"]}),r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:"100%"})," gratuit"]}),r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:"6me"}),"  ",r.jsx("strong",{children:"Terminale"})]})]})]}),(S||C)&&r.jsx(Le,{to:"/quizzes",className:"qg-hero__lien-premium",children:" Voir les Quiz Premium "})]}),r.jsxs("div",{className:"qg-filtres",children:[r.jsx("div",{className:"qg-filtres__recherche",children:r.jsx("input",{type:"text",placeholder:" Rechercher un quiz...",value:b,onChange:E=>x(E.target.value),className:"qg-filtres__input"})}),r.jsxs("select",{value:f,onChange:E=>p(E.target.value),className:"qg-filtres__select",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),N.map(E=>r.jsx("option",{value:E.valeur,children:E.label},E.valeur))]}),(f||h||b)&&r.jsx("button",{className:"qg-filtres__reset",onClick:()=>{p(""),v(""),x("")},children:" Rinitialiser"})]}),r.jsxs("div",{className:"qg-contenu",children:[l&&r.jsxs("div",{className:"qg-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des quiz..."})]}),!l&&u&&r.jsxs("div",{className:"qg-erreur",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"Ressayer"})]}),!l&&!u&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"qg-compteur",children:[A.length," quiz",A.length>1?"s":"",f?` en ${f}`:"",j?"":" (aperu  connectez-vous pour tout voir)"]}),A.length>0?r.jsx("div",{className:"qg-grille",children:A.map(E=>r.jsx(LX,{quiz:E,onJouer:w,estConnecte:j},`${E.source}-${E.id}`))}):r.jsxs("div",{className:"qg-vide",children:[r.jsx("p",{children:" Aucun quiz trouv pour ces critres."}),r.jsx("button",{onClick:()=>{p(""),x("")},className:"btn btn-secondary",children:"Voir tous les quiz"})]}),!j&&r.jsx($X,{}),j&&!S&&!C&&r.jsx(BX,{})]})]})]})},Ws="cahiers_textes",Wn="entrees_cahier",FX="groupes_prof",GX="ebooks";async function HX(e,t){const n=[we("profId","==",e),Xe("updatedAt","desc")],a=De(Ne(W,Ws),...n);return(await ze(a)).docs.map(o=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...o.data(),id:o.id}))}const Fk=e=>HX(e);function QX(e,t,n,a){const l=[we("profId","==",e),Xe("updatedAt","desc")];t&&l.splice(1,0,we("anneeScolaire","==",t));const o=De(Ne(W,Ws),...l);return hf(o,u=>{n(u.docs.map(d=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...d.data(),id:d.id})))},a)}async function Gk(e){const t=await Mt(je(W,Ws,e));return t.exists()?{groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...t.data(),id:t.id}:null}const Hk=e=>eZ(e);async function VX(e){const t=await Mt(je(W,Wn,e));return t.exists()?{id:t.id,...t.data()}:null}async function YX(e,t,n,a){const l=`${Date.now()}_${n.name}`,o=`cahiers/${e}/${t}/${l}`,u=Mr(Er,o),d=Mb(u,n);return new Promise((f,p)=>{d.on("state_changed",h=>{},p,async()=>{const h=await ca(d.snapshot.ref);f({id:l,nom:n.name,url:h,type:n.type,taille:n.size,mimeType:n.type,uploadedAt:new Date().toISOString()})})})}async function $E(e,t,n){await Qe(je(W,Wn,e),{piecesJointes:Db(...n),updatedAt:Oe.now()})}async function KX(e,t,n){const a=t.find(l=>l.url===n);try{a?.id&&await zc(Mr(Er,`cahiers/${a.id}`))}catch{}a&&await Qe(je(W,Wn,e),{piecesJointes:$q(a),updatedAt:Oe.now()})}async function WX(e,t){const n=Oe.now(),a=t.titre?.trim()||`${t.matiere} ${t.classe} ${t.anneeScolaire}`;return(await kt(Ne(W,Ws),{profId:e,titre:a,matiere:t.matiere,classe:t.classe,anneeScolaire:t.anneeScolaire,description:t.description||"",couleur:t.couleur,nombreSeancesPrevu:t.nombreSeancesPrevu,nombreSeancesRealise:0,isArchived:!1,groupeIds:t.groupeIds??[],groupeNoms:t.groupeNoms??[],isPartage:t.isPartage??!1,createdAt:n,updatedAt:n})).id}async function cf(e,t){const n={...t};if("matiere"in t&&"classe"in t&&!("id"in t)){const a=t;a.titre?.trim()||(n.titre=`${a.matiere} ${a.classe} ${a.anneeScolaire}`)}await Qe(je(W,Ws,e),{...n,updatedAt:Oe.now()})}async function XX(e){await pn(je(W,Ws,e))}async function ZX(e){const t=await Mt(je(W,Ws,e));if(!t.exists())return null;const n=t.data();return n.isPartage?{id:t.id,...n}:null}async function Qk(e){const t=De(Ne(W,FX),we("profId","==",e),Xe("nom","asc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}async function JX(){return(await ze(Ne(W,GX))).docs.map(t=>({id:t.id,...t.data()}))}async function eZ(e){const t=De(Ne(W,Wn),we("cahierId","==",e),Xe("ordre","asc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}const tZ=async(e,t,n)=>{const a=Oe.fromDate(new Date(t,n,1)),l=Oe.fromDate(new Date(t,n+1,0,23,59,59)),o=De(Ne(W,Wn),we("cahierId","==",e),we("date",">=",a),we("date","<=",l),Xe("date","asc"));return(await ze(o)).docs.map(d=>({id:d.id,...d.data()}))},rZ=async(e,t)=>{const n=[we("profId","==",e),we("isMarqueEvaluation","==",!0),Xe("date","desc")];t&&n.unshift(we("cahierId","==",t));const a=De(Ne(W,Wn),...n);return(await ze(a)).docs.map(o=>({id:o.id,...o.data()}))},nZ=async e=>{const n=(await ze(De(Ne(W,Wn),we("cahierId","==",e)))).docs.map(u=>u.data()),a=n.length,l={realise:0,planifie:0,annule:0,reporte:0},o={};for(const u of n){const d=u.statut;d in l&&l[d]++,u.typeContenu&&(o[u.typeContenu]=(o[u.typeContenu]??0)+1)}return{total:a,...l,parType:o,tauxRealisation:a>0?Math.round(l.realise/a*100):0}};async function aZ(e){const t=De(Ne(W,Wn),we("cahierId","==",e),we("statut","==","realise"),Xe("date","desc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}async function iZ(e,t,n){const a=Oe.now();let l;if(typeof e=="string"){const u=n;l={cahierId:e,profId:t,date:Oe.fromDate(new Date(u.date)),heureDebut:u.heureDebut||"",heureFin:u.heureFin||"",chapitre:u.chapitre,typeContenu:u.typeContenu,contenu:u.contenu,objectifs:u.objectifs||"",competences:u.competences||[],statut:u.statut,motifAnnulation:u.motifAnnulation||"",dateReport:u.dateReport?Oe.fromDate(new Date(u.dateReport)):null,notesPrivees:u.notesPrivees||"",isMarqueEvaluation:u.isMarqueEvaluation,typeEvaluation:u.typeEvaluation||null,dateEvaluationPrevue:u.dateEvaluationPrevue?Oe.fromDate(new Date(u.dateEvaluationPrevue)):null,statutEvaluation:u.statutEvaluation,ordre:Date.now(),piecesJointes:[],liens:[],ebooksLies:[]}}else l={liens:[],ebooksLies:[],piecesJointes:[],...e};return(await kt(Ne(W,Wn),{...l,createdAt:a,updatedAt:a})).id}async function Dc(e,t,n){let a;if(typeof t=="string"&&n){const l=n;a={date:Oe.fromDate(new Date(l.date)),heureDebut:l.heureDebut||"",heureFin:l.heureFin||"",chapitre:l.chapitre,typeContenu:l.typeContenu,contenu:l.contenu,objectifs:l.objectifs||"",competences:l.competences||[],statut:l.statut,motifAnnulation:l.motifAnnulation||"",dateReport:l.dateReport?Oe.fromDate(new Date(l.dateReport)):null,notesPrivees:l.notesPrivees||"",isMarqueEvaluation:l.isMarqueEvaluation,typeEvaluation:l.typeEvaluation||null,dateEvaluationPrevue:l.dateEvaluationPrevue?Oe.fromDate(new Date(l.dateEvaluationPrevue)):null,statutEvaluation:l.statutEvaluation}}else a={...t};await Qe(je(W,Wn,e),{...a,updatedAt:Oe.now()})}async function sZ(e){await pn(je(W,Wn,e))}const mp=["6me","5me","4me","3me","2nde","1re","Terminale"],BE=["2023-2024","2024-2025","2025-2026","2026-2027"],lZ=["#2563eb","#7c3aed","#059669","#d97706","#dc2626","#0891b2","#db2777","#65a30d"],Ui={cours:{label:"Cours",emoji:"",color:"#3b82f6"},exercices:{label:"Exercices",emoji:"",color:"#8b5cf6"},correction:{label:"Correction",emoji:"",color:"#10b981"},devoir_surveille:{label:"Devoir surveill",emoji:"",color:"#f59e0b"},devoir_maison:{label:"Devoir  la maison",emoji:"",color:"#6366f1"},travaux_pratiques:{label:"Travaux pratiques",emoji:"",color:"#14b8a6"},evaluation:{label:"valuation",emoji:"",color:"#ef4444"},revision:{label:"Rvision",emoji:"",color:"#f97316"}},Mc={realise:{label:"Ralis",color:"#059669",bg:"#d1fae5"},planifie:{label:"Planifi",color:"#d97706",bg:"#fef3c7"},annule:{label:"Annul",color:"#dc2626",bg:"#fee2e2"},reporte:{label:"Report",color:"#2563eb",bg:"#dbeafe"}},Vk={interro:"Interrogation",ds:"Devoir Surveill",examen:"Examen",oral:"Oral",autre:"Autre"},Yk={devoir:{label:"Devoir  corriger",emoji:""},evaluation:{label:"valuation  prparer",emoji:""},notes:{label:"Notes  saisir",emoji:""},cours:{label:"Cours  prparer",emoji:""},personnalise:{label:"Rappel personnalis",emoji:""}},oZ=["Communiquer  l'crit","Communiquer  l'oral","Raisonner et rsoudre des problmes","Chercher et s'informer","Modliser","Reprsenter","Calculer et algorithmiser","Analyser et interprter","Exprimenter et observer","Cooprer et mutualiser"],UE=()=>({classe:"3me",matiere:"Mathmatiques",anneeScolaire:"2025-2026",titre:"",description:"",couleur:"#2563eb",nombreSeancesPrevu:30,groupeIds:[],groupeNoms:[],isPartage:!1}),cZ=()=>{const{currentUser:e}=rt(),t=it(),[n]=rA(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,f]=g.useState("2025-2026"),[p,h]=g.useState(!1),[v,b]=g.useState(null),[x,N]=g.useState(UE()),[j,S]=g.useState(!1),[C,A]=g.useState(""),{matieres:w,loading:E}=dp(),[D,O]=g.useState([]),[T,P]=g.useState([]);if(!e?.isPremium)return r.jsx("div",{className:"cahier-textes-page",children:r.jsxs("div",{className:"premium-gate",children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h2",{children:"Cahier de Textes Numrique"}),r.jsxs("p",{children:["Cette fonctionnalit est rserve aux enseignants Premium.",r.jsx("br",{}),"Passez au Premium pour organiser, planifier et suivre votre enseignement."]}),r.jsx("button",{className:"btn-primary",onClick:()=>t("/premium"),children:" Passer au Premium  2 000 FCFA/mois"})]})});g.useEffect(()=>{if(!e?.uid)return;u(!0);const M=QX(e.uid,d||void 0,q=>{l(q),u(!1)},q=>{console.error("Erreur chargement cahiers:",q),u(!1)});return()=>M()},[e?.uid,d]),g.useEffect(()=>{if(!e?.uid)return;Qk(e.uid).then(O).catch(Q=>console.error("Erreur chargement groupes:",Q));const M=n.get("groupeId"),q=n.get("groupeNom"),X=n.get("classe");M&&q&&(P([M]),N(Q=>({...Q,classe:X||Q.classe,groupeIds:[M],groupeNoms:[q]})),b(null),A(""),h(!0))},[e?.uid]);const I=()=>{b(null),N(UE()),P([]),A(""),h(!0)},R=(M,q)=>{q.stopPropagation(),b(M),P(M.groupeIds??[]),N({classe:M.classe,matiere:M.matiere,anneeScolaire:M.anneeScolaire,titre:M.titre,description:M.description||"",couleur:M.couleur,nombreSeancesPrevu:M.nombreSeancesPrevu,groupeIds:M.groupeIds??[],groupeNoms:M.groupeNoms??[],isPartage:M.isPartage??!1}),A(""),h(!0)},F=M=>{P(q=>{const X=q.includes(M)?q.filter($=>$!==M):[...q,M],Q=X.map($=>D.find(L=>L.id===$)?.nom??"").filter(Boolean);return N($=>({...$,groupeIds:X,groupeNoms:Q})),X})},B=async M=>{if(M.preventDefault(),!!e?.uid){S(!0),A("");try{v?await cf(v.id,x):await WX(e.uid,x),h(!1)}catch(q){const X=q instanceof Error?q.message:String(q);A("Erreur : "+X)}finally{S(!1)}}},G=async(M,q)=>{if(q.stopPropagation(),!!confirm(`Supprimer le cahier "${M.titre}" et toutes ses entres ?`))try{await XX(M.id),l(X=>X.filter(Q=>Q.id!==M.id))}catch{alert("Erreur lors de la suppression.")}},V=M=>M.nombreSeancesPrevu>0?Math.min(100,Math.round(M.nombreSeancesRealise/M.nombreSeancesPrevu*100)):0;return r.jsxs("div",{className:"cahier-textes-page",children:[r.jsxs("div",{className:"cahier-page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"cahier-page-title",children:" Cahier de Textes"}),r.jsx("p",{className:"cahier-page-subtitle",children:"Organisez et planifiez votre enseignement"})]}),r.jsx("button",{className:"btn-primary",onClick:I,children:"+ Nouveau cahier"})]}),r.jsxs("div",{className:"cahier-filtres",children:[r.jsx("label",{style:{fontSize:"0.85rem",color:"#6b7280",fontWeight:600},children:"Anne scolaire :"}),r.jsxs("select",{className:"filtre-select",value:d,onChange:M=>f(M.target.value),children:[r.jsx("option",{value:"",children:"Toutes les annes"}),BE.map(M=>r.jsx("option",{value:M,children:M},M))]})]}),o?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):a.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{style:{fontSize:"3rem",opacity:.3,marginBottom:"0.75rem"},children:""}),r.jsxs("h3",{children:["Aucun cahier pour ",d||"cette priode"]}),r.jsx("p",{children:"Crez votre premier cahier de textes pour commencer  planifier votre enseignement."}),r.jsx("button",{className:"btn-primary",onClick:I,style:{marginTop:"1rem"},children:"+ Crer mon premier cahier"})]}):r.jsx("div",{className:"cahiers-grid",children:a.map(M=>{const q=V(M);return r.jsxs("div",{className:"cahier-card",onClick:()=>t(`/prof/cahiers/${M.id}`),children:[r.jsx("div",{style:{height:4,background:M.couleur,borderRadius:"12px 12px 0 0"}}),r.jsx("div",{className:"cahier-card-header",children:r.jsxs("div",{style:{flex:1},children:[r.jsx("h3",{className:"cahier-card-titre",children:M.titre}),r.jsxs("div",{className:"cahier-card-meta",children:[r.jsx("span",{className:"badge-classe",children:M.classe}),r.jsx("span",{className:"badge-matiere",children:M.matiere}),r.jsx("span",{className:"badge-annee",children:M.anneeScolaire})]}),(M.groupeIds?.length??0)>0&&r.jsxs("span",{className:`badge-partage ${M.isPartage?"actif":""}`,style:{marginTop:6,display:"inline-flex"},children:[M.isPartage?" Partag avec":" Li "," ",M.groupeIds.length," groupe",M.groupeIds.length>1?"s":""]})]})}),r.jsxs("div",{className:"cahier-card-body",children:[M.description&&r.jsxs("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 0.75rem",lineHeight:1.5},children:[M.description.substring(0,80),M.description.length>80?"...":""]}),r.jsxs("div",{className:"progression-bar-wrap",children:[r.jsxs("div",{className:"progression-label",children:[r.jsx("span",{children:"Progression"}),r.jsxs("span",{style:{fontWeight:700,color:M.couleur},children:[q,"%"]})]}),r.jsx("div",{className:"progression-bar-bg",children:r.jsx("div",{className:"progression-bar-fill",style:{width:`${q}%`,background:M.couleur}})}),r.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:"0.3rem"},children:[M.nombreSeancesRealise," / ",M.nombreSeancesPrevu," sances ralises"]})]})]}),r.jsxs("div",{className:"cahier-card-footer",children:[r.jsxs("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["Mis  jour le ",M.updatedAt?.toDate().toLocaleDateString("fr-FR")||""]}),r.jsxs("div",{className:"cahier-actions",children:[r.jsx("button",{className:"btn-icon",onClick:X=>R(M,X),title:"Modifier",children:""}),r.jsx("button",{className:"btn-icon",onClick:X=>G(M,X),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]})]},M.id)})}),p&&r.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:r.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),children:[r.jsxs("h2",{className:"modal-title",children:[" ",v?"Modifier le cahier":"Nouveau cahier de textes"]}),r.jsxs("form",{onSubmit:B,children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Classe *"}),r.jsx("select",{className:"form-select",value:x.classe,onChange:M=>N(q=>({...q,classe:M.target.value})),required:!0,children:mp.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Matire *"}),r.jsxs("select",{className:"form-select",value:x.matiere,onChange:M=>N(q=>({...q,matiere:M.target.value})),required:!0,disabled:E,children:[r.jsx("option",{value:"",children:E?"Chargement":" Slectionner "}),w.map(M=>r.jsx("option",{value:M.valeur,children:M.label},M.valeur)),x.matiere&&!w.find(M=>M.valeur===x.matiere)&&r.jsx("option",{value:x.matiere,children:x.matiere})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Anne scolaire *"}),r.jsx("select",{className:"form-select",value:x.anneeScolaire,onChange:M=>N(q=>({...q,anneeScolaire:M.target.value})),children:BE.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Titre personnalis"}),r.jsx("input",{className:"form-input",placeholder:`Ex: Maths 3me A - ${x.anneeScolaire}`,value:x.titre,onChange:M=>N(q=>({...q,titre:M.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Nombre de sances prvues"}),r.jsx("input",{type:"number",className:"form-input",min:"1",max:"200",value:x.nombreSeancesPrevu,onChange:M=>N(q=>({...q,nombreSeancesPrevu:Number(M.target.value)}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description / Objectifs (optionnel)"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Objectifs gnraux, groupe classe, notes...",value:x.description,onChange:M=>N(q=>({...q,description:M.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Couleur du cahier"}),r.jsx("div",{className:"couleur-picker",children:lZ.map(M=>r.jsx("div",{className:`couleur-option ${x.couleur===M?"selected":""}`,style:{background:M},onClick:()=>N(q=>({...q,couleur:M})),title:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Groupes classes lis"," ",r.jsx("span",{style:{fontWeight:400,color:"#9ca3af"},children:"(optionnel)"})]}),D.length===0?r.jsxs("p",{style:{fontSize:"0.82rem",color:"#9ca3af",margin:0},children:["Aucun groupe cr."," ",r.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:0,fontSize:"0.82rem"},onClick:()=>t("/prof/groupes"),children:"Crer un groupe "})]}):r.jsx("div",{className:"groupe-selector",children:D.map(M=>{const q=T.includes(M.id);return r.jsxs("div",{className:`groupe-option ${q?"selected":""}`,onClick:()=>F(M.id),children:[r.jsx("input",{type:"checkbox",checked:q,readOnly:!0,tabIndex:-1}),r.jsxs("span",{children:[r.jsx("strong",{children:M.nom}),"  ",M.classe," (",M.anneeScolaire,")"]})]},M.id)})}),T.length>0&&r.jsx("div",{className:"groupes-tags",children:T.map(M=>{const q=D.find(X=>X.id===M);return q?r.jsxs("span",{className:"groupe-tag",children:[q.nom,r.jsx("button",{type:"button",onClick:()=>F(M),"aria-label":`Retirer ${q.nom}`,children:""})]},M):null})}),T.length>0&&r.jsxs("label",{className:"toggle-partage",style:{marginTop:10},children:[r.jsx("input",{type:"checkbox",checked:x.isPartage??!1,onChange:M=>N(q=>({...q,isPartage:M.target.checked}))}),r.jsx("span",{children:" Rendre visible aux lves des groupes lis"})]})]}),C&&r.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem",marginBottom:"0.75rem",background:"#fee2e2",padding:"0.5rem 0.75rem",borderRadius:8},children:C}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>h(!1),children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:j,children:j?"Enregistrement...":v?"Mettre  jour":"Crer le cahier"})]})]})]})})]})},uZ=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],dZ=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],mZ=(e,t,n)=>{const a=new Date(e,t,1),l=new Date(e,t+1,0);let o=a.getDay()-1;o<0&&(o=6);const u=new Date,d=[];for(let p=o-1;p>=0;p--){const h=new Date(e,t,-p);d.push({date:h,isCurrentMonth:!1,isToday:!1,entrees:[]})}for(let p=1;p<=l.getDate();p++){const h=new Date(e,t,p),v=h.toDateString()===u.toDateString(),b=n.filter(x=>{const N=x.date.toDate();return N.getFullYear()===e&&N.getMonth()===t&&N.getDate()===p});d.push({date:h,isCurrentMonth:!0,isToday:v,entrees:b})}let f=1;for(;d.length<42;){const p=new Date(e,t+1,f++);d.push({date:p,isCurrentMonth:!1,isToday:!1,entrees:[]})}return d},fZ=({cahierId:e})=>{const t=it(),n=new Date,[a,l]=g.useState(n.getFullYear()),[o,u]=g.useState(n.getMonth()),[d,f]=g.useState([]),[p,h]=g.useState(!1),[v,b]=g.useState(null),[x,N]=g.useState({x:0,y:0});g.useEffect(()=>{(async()=>{h(!0);try{const E=await tZ(e,a,o);f(E)}catch(E){console.error("Erreur chargement entres calendrier:",E)}finally{h(!1)}})()},[e,a,o]);const j=mZ(a,o,d),S=()=>{o===0?(l(w=>w-1),u(11)):u(w=>w-1)},C=()=>{o===11?(l(w=>w+1),u(0)):u(w=>w+1)},A=(w,E)=>{if(!w.isCurrentMonth||w.entrees.length===0)return;const D=E.target.getBoundingClientRect();N({x:D.left,y:D.bottom+window.scrollY+8}),b(w)};return r.jsxs("div",{className:"cahier-calendar",onClick:()=>b(null),children:[r.jsxs("div",{className:"calendar-nav",children:[r.jsx("button",{className:"calendar-nav-btn",onClick:S,"aria-label":"Mois prcdent",children:""}),r.jsxs("span",{className:"calendar-nav-title",children:[dZ[o]," ",a,p&&" ..."]}),r.jsx("button",{className:"calendar-nav-btn",onClick:C,"aria-label":"Mois suivant",children:""})]}),r.jsx("div",{className:"calendar-weekdays",children:uZ.map(w=>r.jsx("div",{className:"calendar-weekday",children:w},w))}),r.jsx("div",{className:"calendar-grid",onClick:w=>w.stopPropagation(),children:j.map((w,E)=>r.jsxs("div",{className:`calendar-day ${w.isCurrentMonth?"":"other-month"} ${w.isToday?"today":""} ${v?.date.toDateString()===w.date.toDateString()?"selected":""}`,onClick:D=>A(w,D),children:[r.jsx("div",{className:"calendar-day-num",children:w.date.getDate()}),r.jsxs("div",{className:"calendar-day-events",children:[w.entrees.slice(0,3).map(D=>{const O=Ui[D.typeContenu];return r.jsxs("div",{className:"calendar-event-dot",style:{background:O.color},title:D.chapitre,children:[O.emoji," ",D.chapitre.substring(0,12)]},D.id)}),w.entrees.length>3&&r.jsxs("div",{className:"calendar-more",children:["+",w.entrees.length-3]})]})]},E))}),r.jsx("div",{className:"calendar-legend",children:Object.entries(Ui).slice(0,5).map(([w,E])=>r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-dot",style:{background:E.color}}),E.label]},w))}),v&&v.entrees.length>0&&r.jsxs("div",{className:"calendar-day-popup",style:{top:x.y,left:Math.min(x.x,window.innerWidth-300)},onClick:w=>w.stopPropagation(),children:[r.jsxs("div",{className:"calendar-day-popup-title",children:[" ",v.date.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})]}),v.entrees.map(w=>{const E=Ui[w.typeContenu];return r.jsxs("div",{className:"calendar-popup-entree",onClick:()=>t(`/prof/cahiers/${e}/modifier/${w.id}`),children:[r.jsx("span",{className:"calendar-popup-entree-type",children:E.emoji}),r.jsxs("div",{className:"calendar-popup-entree-info",children:[r.jsx("div",{className:"calendar-popup-entree-chapitre",children:w.chapitre}),w.heureDebut&&r.jsxs("div",{className:"calendar-popup-entree-heure",children:[w.heureDebut,w.heureFin?`  ${w.heureFin}`:""]})]})]},w.id)})]})]})},fp="rappels_prof",pZ=async(e,t)=>(await kt(Ne(W,fp),{profId:e,titre:t.titre,description:t.description||"",typeRappel:t.typeRappel,dateRappel:Oe.fromDate(new Date(t.dateRappel)),recurrence:t.recurrence,priorite:t.priorite,cahierId:t.cahierId||null,isLu:!1,isDone:!1,createdAt:Oe.now()})).id,hZ=async e=>{const t=De(Ne(W,fp),we("profId","==",e),we("isDone","==",!1),Xe("dateRappel","asc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))},vZ=async(e,t)=>{await Qe(je(W,fp,e),{isDone:t,isLu:t})},gZ=async e=>{await pn(je(W,fp,e))},FE=()=>({titre:"",description:"",typeRappel:"personnalise",dateRappel:new Date(Date.now()+36e5).toISOString().slice(0,16),recurrence:"unique",priorite:"normale"}),Kd=({profId:e,cahierId:t})=>{const[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(!1),[f,p]=g.useState(FE()),[h,v]=g.useState(!1),b=async()=>{try{o(!0);const w=await hZ(e);a(w)}catch(w){console.error("Erreur rappels:",w)}finally{o(!1)}};g.useEffect(()=>{b()},[e]);const x=async w=>{if(w.preventDefault(),!!f.titre.trim()){v(!0);try{await pZ(e,{...f,cahierId:t}),d(!1),p(FE()),await b()}catch(E){console.error("Erreur cration rappel:",E)}finally{v(!1)}}},N=async w=>{await vZ(w,!0),a(E=>E.filter(D=>D.id!==w))},j=async w=>{confirm("Supprimer ce rappel ?")&&(await gZ(w),a(E=>E.filter(D=>D.id!==w)))},S=new Date,C=n.filter(w=>w.dateRappel.toDate()<=S),A=n.filter(w=>w.dateRappel.toDate()>S);return r.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.1rem"},children:""}),r.jsx("span",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937"},children:"Rappels"}),C.length>0&&r.jsx("span",{style:{background:"#dc2626",color:"white",borderRadius:20,padding:"1px 7px",fontSize:"0.7rem",fontWeight:700},children:C.length})]}),r.jsx("button",{className:"btn-primary",style:{padding:"0.35rem 0.75rem",fontSize:"0.8rem"},onClick:()=>d(w=>!w),children:"+ Ajouter"})]}),u&&r.jsxs("form",{onSubmit:x,style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",background:"#f9fafb"},children:[r.jsx("div",{className:"form-group",children:r.jsx("input",{className:"form-input",placeholder:"Titre du rappel *",value:f.titre,onChange:w=>p(E=>({...E,titre:w.target.value})),required:!0})}),r.jsx("div",{className:"form-group",children:r.jsx("select",{className:"form-select",value:f.typeRappel,onChange:w=>p(E=>({...E,typeRappel:w.target.value})),children:Object.entries(Yk).map(([w,E])=>r.jsxs("option",{value:w,children:[E.emoji," ",E.label]},w))})}),r.jsx("div",{className:"form-group",children:r.jsx("input",{type:"datetime-local",className:"form-input",value:f.dateRappel,onChange:w=>p(E=>({...E,dateRappel:w.target.value})),required:!0})}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("select",{className:"form-select",value:f.priorite,onChange:w=>p(E=>({...E,priorite:w.target.value})),children:[r.jsx("option",{value:"normale",children:"Normale"}),r.jsx("option",{value:"urgente",children:" Urgente"})]}),r.jsxs("select",{className:"form-select",value:f.recurrence,onChange:w=>p(E=>({...E,recurrence:w.target.value})),children:[r.jsx("option",{value:"unique",children:"Une fois"}),r.jsx("option",{value:"hebdomadaire",children:"Hebdo"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[r.jsx("button",{type:"submit",className:"btn-primary",disabled:h,style:{flex:1},children:h?"...":"Enregistrer"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Annuler"})]})]}),r.jsx("div",{style:{padding:"0.75rem 1.25rem"},children:l?r.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:"Chargement..."}):n.length===0?r.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:[r.jsx("div",{children:""}),r.jsx("div",{children:"Aucun rappel actif"})]}):r.jsxs(r.Fragment,{children:[C.length>0&&r.jsxs("div",{style:{marginBottom:"0.75rem"},children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#dc2626",textTransform:"uppercase",marginBottom:"0.4rem"},children:" En retard"}),C.map(w=>r.jsx(GE,{rappel:w,onDone:N,onDelete:j},w.id))]}),A.length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#6b7280",textTransform:"uppercase",marginBottom:"0.4rem"},children:" venir"}),A.slice(0,5).map(w=>r.jsx(GE,{rappel:w,onDone:N,onDelete:j},w.id))]})]})})]})},GE=({rappel:e,onDone:t,onDelete:n})=>{const a=Yk[e.typeRappel],l=e.dateRappel.toDate(),o=e.priorite==="urgente",u=l<=new Date;return r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.5rem 0",borderBottom:"1px solid #f9fafb"},children:[r.jsx("button",{onClick:()=>t(e.id),style:{width:20,height:20,border:`2px solid ${o?"#dc2626":"#d1d5db"}`,borderRadius:4,background:"white",cursor:"pointer",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",marginTop:2},title:"Marquer termin"}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{fontSize:"0.82rem",fontWeight:600,color:u?"#dc2626":"#1f2937",display:"flex",alignItems:"center",gap:"0.3rem"},children:[a.emoji," ",e.titre,o&&r.jsx("span",{style:{fontSize:"0.65rem",color:"#dc2626"},children:""})]}),r.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:2},children:[l.toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),"  ",l.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),r.jsx("button",{onClick:()=>n(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"0.9rem",flexShrink:0},title:"Supprimer",children:""})]})},xZ=({profId:e,cahierId:t})=>{const n=it(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,f]=g.useState("tous");g.useEffect(()=>{(async()=>{u(!0);try{const x=await rZ(e,t);l(x)}catch(x){console.error("Erreur signets:",x)}finally{u(!1)}})()},[e,t]);const p=async(b,x)=>{try{await Dc(b.id,{statutEvaluation:x}),l(N=>N.map(j=>j.id===b.id?{...j,statutEvaluation:x}:j))}catch(N){console.error("Erreur mise  jour statut:",N)}},h=d==="tous"?a:a.filter(b=>b.statutEvaluation===d),v=[{value:"tous",label:"Tous",color:"#6b7280"},{value:"a_evaluer",label:" valuer",color:"#d97706"},{value:"evaluation_creee",label:"Cre",color:"#2563eb"},{value:"evaluation_terminee",label:"Termine",color:"#059669"}];return r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:700,color:"#1f2937",margin:0},children:[" Signets d'valuation (",a.length,")"]})}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:v.map(b=>r.jsx("button",{onClick:()=>f(b.value),style:{padding:"0.3rem 0.85rem",borderRadius:20,border:`1.5px solid ${d===b.value?b.color:"#e5e7eb"}`,background:d===b.value?b.color:"white",color:d===b.value?"white":"#4b5563",fontSize:"0.8rem",fontWeight:600,cursor:"pointer",transition:"all 0.15s"},children:b.label},b.value))}),o?r.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Chargement..."}):h.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"#9ca3af"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),r.jsx("div",{style:{fontWeight:600,color:"#6b7280",marginBottom:"0.25rem"},children:"Aucun signet trouv"}),r.jsx("div",{style:{fontSize:"0.85rem"},children:"Marquez des entres pour valuation depuis l'diteur de sance."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:h.map(b=>{const x=Ui[b.typeContenu];return Mc[b.statut],r.jsxs("div",{style:{background:"white",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:"1rem",borderLeft:"4px solid #f59e0b"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,color:"#1f2937"},children:b.chapitre}),r.jsx("div",{style:{fontSize:"0.78rem",color:"#9ca3af",marginTop:"0.15rem"},children:b.date.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),r.jsx("button",{onClick:()=>n(`/prof/cahiers/${t}/modifier/${b.id}`),style:{background:"none",border:"none",cursor:"pointer",color:"#2563eb",fontSize:"0.8rem",fontWeight:600,whiteSpace:"nowrap"},children:" Modifier"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:x.color+"22",color:x.color},children:[x.emoji," ",x.label]}),b.typeEvaluation&&r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:"#fef3c7",color:"#92400e"},children:[" ",Vk[b.typeEvaluation]]}),b.dateEvaluationPrevue&&r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",background:"#f3f4f6",color:"#4b5563"},children:[" ",b.dateEvaluationPrevue.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),r.jsx("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:["a_evaluer","evaluation_creee","evaluation_terminee"].map(N=>{const j=b.statutEvaluation===N,S={a_evaluer:" valuer",evaluation_creee:"Cre",evaluation_terminee:" Termine"},C={a_evaluer:"#d97706",evaluation_creee:"#2563eb",evaluation_terminee:"#059669"};return r.jsx("button",{onClick:()=>p(b,N),style:{padding:"0.25rem 0.7rem",borderRadius:20,border:`1.5px solid ${j?C[N]:"#e5e7eb"}`,background:j?C[N]:"white",color:j?"white":"#6b7280",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:S[N]},N)})})]},b.id)})})]})},bZ=({cahier:e})=>{const[t,n]=g.useState(null),[a,l]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const d=await nZ(e.id);n(d)}catch{}finally{l(!1)}})()},[e.id]);const o=e.nombreSeancesPrevu>0?Math.min(100,Math.round(e.nombreSeancesRealise/e.nombreSeancesPrevu*100)):0;return a?r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#9ca3af",fontSize:"0.85rem"},children:"Chargement des stats..."}):t?r.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"1.25rem"},children:[r.jsx("div",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Statistiques du cahier"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsx(Wd,{value:t.total,label:"Sances total",color:"#2563eb",bg:"#dbeafe"}),r.jsx(Wd,{value:t.realise,label:"Ralises",color:"#059669",bg:"#d1fae5"}),r.jsx(Wd,{value:t.planifie,label:"Planifies",color:"#d97706",bg:"#fef3c7"}),r.jsx(Wd,{value:`${t.tauxRealisation}%`,label:"Taux de ralisation",color:"#7c3aed",bg:"#ede9fe"})]}),r.jsxs("div",{style:{marginBottom:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.4rem"},children:[r.jsx("span",{children:"Progression du programme"}),r.jsxs("span",{style:{fontWeight:700,color:e.couleur},children:[o,"%"]})]}),r.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:10,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${o}%`,background:e.couleur,borderRadius:10,transition:"width 0.5s ease"}})}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.3rem"},children:[e.nombreSeancesRealise," / ",e.nombreSeancesPrevu," sances prvues"]})]}),Object.keys(t.parType).length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.78rem",fontWeight:700,color:"#9ca3af",textTransform:"uppercase",marginBottom:"0.6rem"},children:"Rpartition par type"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:Object.entries(t.parType).sort((u,d)=>d[1]-u[1]).map(([u,d])=>{const f=Ui[u];if(!f)return null;const p=t.total>0?Math.round(d/t.total*100):0;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"#4b5563",marginBottom:"0.2rem"},children:[r.jsxs("span",{children:[f.emoji," ",f.label]}),r.jsxs("span",{style:{fontWeight:600},children:[d," (",p,"%)"]})]}),r.jsx("div",{style:{height:4,background:"#f3f4f6",borderRadius:10,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${p}%`,background:f.color,borderRadius:10}})})]},u)})})]})]}):null},Wd=({value:e,label:t,color:n,bg:a})=>r.jsxs("div",{style:{background:a,borderRadius:10,padding:"0.75rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:n},children:e}),r.jsx("div",{style:{fontSize:"0.72rem",color:"#6b7280",marginTop:"0.15rem"},children:t})]}),yZ=()=>{const{cahierId:e}=Yn(),{currentUser:t}=rt(),n=it(),[a,l]=g.useState(null),[o,u]=g.useState([]),[d,f]=g.useState(!1),[p,h]=g.useState(!0),[v,b]=g.useState(!0),[x,N]=g.useState("liste"),[j,S]=g.useState("tous"),[C,A]=g.useState("tous"),[w,E]=g.useState("tous");g.useEffect(()=>{if(!e)return;(async()=>{h(!0);try{const F=await Gk(e);if(!F){n("/prof/cahiers");return}l(F)}finally{h(!1)}})()},[e]);const D=g.useCallback(async()=>{if(e){b(!0);try{const R=await Hk(e);u(R),f(!1)}finally{b(!1)}}},[e]);g.useEffect(()=>{D()},[e]);const O=async R=>{if(confirm(`Supprimer la sance "${R.chapitre}" ?`))try{await sZ(R.id);const F=o.filter(G=>G.id!==R.id);u(F);const B=F.filter(G=>G.statut==="realise").length;await cf(e,{nombreSeancesRealise:B}),l(G=>G&&{...G,nombreSeancesRealise:B})}catch{alert("Erreur lors de la suppression.")}},T=async(R,F)=>{try{await Dc(R.id,{statut:F});const B=o.map(V=>V.id===R.id?{...V,statut:F}:V);u(B);const G=B.filter(V=>V.statut==="realise").length;await cf(e,{nombreSeancesRealise:G}),l(V=>V&&{...V,nombreSeancesRealise:G})}catch{alert("Erreur mise  jour statut.")}},P=Array.from(new Set(o.map(R=>{const F=R.date.toDate();return`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}`}))).sort().reverse(),I=o.filter(R=>{const F=j==="tous"||R.statut===j,B=C==="tous"||R.typeContenu===C,G=w==="tous"||(()=>{const V=R.date.toDate();return`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`===w})();return F&&B&&G});return p?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):a?r.jsxs("div",{className:"cahier-detail-page",children:[r.jsxs("div",{className:"cahier-detail-header",children:[r.jsx("button",{onClick:()=>n("/prof/cahiers"),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem",padding:"0 0.5rem"},title:"Retour",children:""}),r.jsx("div",{style:{width:6,minHeight:60,borderRadius:4,background:a.couleur,alignSelf:"stretch"}}),r.jsxs("div",{className:"cahier-detail-info",children:[r.jsx("h1",{className:"cahier-detail-titre",children:a.titre}),r.jsxs("div",{className:"cahier-detail-badges",children:[r.jsx("span",{className:"badge-classe",children:a.classe}),r.jsx("span",{className:"badge-matiere",children:a.matiere}),r.jsx("span",{className:"badge-annee",children:a.anneeScolaire})]}),a.description&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",margin:0},children:a.description})]}),r.jsx("div",{className:"cahier-detail-actions",children:r.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),children:"+ Nouvelle sance"})})]}),r.jsx("div",{className:"view-tabs",children:[{id:"liste",label:" Liste"},{id:"calendrier",label:" Calendrier"},{id:"signets",label:" Signets"},{id:"stats",label:" Statistiques"}].map(R=>r.jsx("button",{className:`view-tab ${x===R.id?"active":""}`,onClick:()=>N(R.id),children:R.label},R.id))}),x==="calendrier"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx("div",{children:r.jsx(fZ,{cahierId:a.id})}),r.jsx("div",{children:r.jsx(Kd,{profId:t.uid,cahierId:a.id})})]}),x==="signets"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx(xZ,{profId:t.uid,cahierId:a.id}),r.jsx(Kd,{profId:t.uid,cahierId:a.id})]}),x==="stats"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx(bZ,{cahier:{...a,nombreSeancesRealise:o.filter(R=>R.statut==="realise").length}}),r.jsx(Kd,{profId:t.uid,cahierId:a.id})]}),x==="liste"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[["tous","realise","planifie","annule","reporte"].map(R=>{const F=R==="tous"?null:Mc[R];return r.jsx("button",{onClick:()=>S(R),style:{padding:"0.3rem 0.75rem",borderRadius:20,border:`1.5px solid ${j===R?F?.color||"#2563eb":"#e5e7eb"}`,background:j===R?F?.bg||"#dbeafe":"white",color:j===R?F?.color||"#2563eb":"#4b5563",fontSize:"0.78rem",fontWeight:600,cursor:"pointer"},children:R==="tous"?"Tous":F?.label},R)}),r.jsxs("select",{className:"filtre-select",value:C,onChange:R=>A(R.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[r.jsx("option",{value:"tous",children:"Tous types"}),Object.entries(Ui).map(([R,F])=>r.jsxs("option",{value:R,children:[F.emoji," ",F.label]},R))]}),r.jsxs("select",{className:"filtre-select",value:w,onChange:R=>E(R.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[r.jsx("option",{value:"tous",children:"Tous les mois"}),P.map(R=>{const[F,B]=R.split("-"),G=new Date(Number(F),Number(B)-1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"});return r.jsx("option",{value:R,children:G},R)})]})]}),v&&I.length===0?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):I.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{style:{fontSize:"2.5rem",opacity:.3,marginBottom:"0.5rem"},children:""}),r.jsxs("h3",{children:["Aucune sance",j!=="tous"||C!=="tous"?" (avec ce filtre)":""]}),r.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),style:{marginTop:"1rem"},children:"+ Ajouter la premire sance"})]}):r.jsxs("div",{className:"entrees-list",children:[I.map(R=>{const F=Ui[R.typeContenu],B=Mc[R.statut],G=R.date.toDate();return r.jsxs("div",{className:"entree-card",style:{borderLeftColor:F.color,cursor:"pointer"},onClick:()=>n(`/prof/cahiers/${e}/modifier/${R.id}`),children:[r.jsxs("div",{className:"entree-card-top",children:[r.jsxs("div",{className:"entree-card-gauche",children:[r.jsxs("div",{className:"entree-date",children:[" ",G.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),R.heureDebut&&r.jsxs("span",{style:{marginLeft:"0.5rem"},children:[" ",R.heureDebut,R.heureFin?`  ${R.heureFin}`:""]})]}),r.jsx("h3",{className:"entree-chapitre",children:R.chapitre}),r.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[r.jsxs("span",{className:"entree-type-badge",style:{background:F.color},children:[F.emoji," ",F.label]}),r.jsx("span",{className:"entree-statut-badge",style:{background:B.bg,color:B.color},children:B.label}),R.isMarqueEvaluation&&r.jsx("span",{className:"signet-badge",children:" valuation"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.25rem",flexShrink:0},children:[r.jsx("button",{className:"btn-icon",onClick:V=>{V.stopPropagation(),n(`/prof/cahiers/${e}/modifier/${R.id}`)},title:"Modifier",children:""}),r.jsx("button",{className:"btn-icon",onClick:V=>{V.stopPropagation(),O(R)},title:"Supprimer",style:{color:"#ef4444"},children:""})]})]}),R.contenu&&r.jsx("div",{className:"entree-contenu-preview",dangerouslySetInnerHTML:{__html:R.contenu}}),R.objectifs&&r.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem",fontStyle:"italic"},children:[" ",R.objectifs]}),R.piecesJointes&&R.piecesJointes.length>0&&r.jsxs("div",{style:{fontSize:"0.78rem",color:"#2563eb",marginTop:"0.4rem"},children:[" ",R.piecesJointes.length," pice(s) jointe(s)"]}),r.jsx("div",{className:"entree-card-footer",children:r.jsx("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap"},children:["realise","planifie","annule"].map(V=>{const M=Mc[V],q=R.statut===V;return r.jsx("button",{onClick:X=>{X.stopPropagation(),T(R,V)},style:{padding:"0.2rem 0.6rem",borderRadius:20,border:`1.5px solid ${q?M.color:"#e5e7eb"}`,background:q?M.bg:"white",color:q?M.color:"#9ca3af",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:M.label},V)})})})]},R.id)}),d&&r.jsx("div",{style:{textAlign:"center",padding:"1rem"},children:r.jsx("button",{className:"btn-secondary",onClick:()=>D(),disabled:v,children:v?"Chargement...":"Charger plus de sances"})})]})]}),r.jsx("div",{children:r.jsx(Kd,{profId:t.uid,cahierId:a.id})})]})]}):null};function jZ(e){return{video:"",article:"",exercice:"",autre:""}[e]??""}function NZ(e){const t=/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]{11})/,n=e.match(t);return n?n[1]:null}const _Z=({onAjouter:e,onAnnuler:t})=>{const[n,a]=g.useState(""),[l,o]=g.useState(""),[u,d]=g.useState("article"),[f,p]=g.useState(""),[h,v]=g.useState("");function b(N){o(N),(N.includes("youtube.com")||N.includes("youtu.be"))&&d("video")}function x(){if(!n.trim()){v("Le titre est requis.");return}if(!l.trim()||!l.startsWith("http://")&&!l.startsWith("https://")){v("Entrez une URL valide commenant par https://");return}const N={id:String(Date.now()),titre:n.trim(),url:l.trim(),type:u,description:f.trim()||void 0};e(N)}return r.jsxs("div",{className:"lien-form",children:[r.jsx("input",{type:"text",placeholder:"Titre du lien *",value:n,onChange:N=>a(N.target.value),"aria-label":"Titre du lien"}),r.jsx("input",{type:"url",placeholder:"https://... *",value:l,onChange:N=>b(N.target.value),"aria-label":"URL du lien"}),r.jsxs("select",{value:u,onChange:N=>d(N.target.value),"aria-label":"Type de lien",children:[r.jsx("option",{value:"article",children:" Article"}),r.jsx("option",{value:"video",children:" Vido"}),r.jsx("option",{value:"exercice",children:" Exercice"}),r.jsx("option",{value:"autre",children:" Autre"})]}),r.jsx("textarea",{placeholder:"Description (optionnelle)",value:f,onChange:N=>p(N.target.value),rows:2,"aria-label":"Description du lien"}),h&&r.jsx("p",{style:{color:"#dc2626",fontSize:"0.8rem",margin:0},children:h}),r.jsxs("div",{className:"lien-form-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:t,type:"button",children:"Annuler"}),r.jsx("button",{className:"btn-pedaclic",onClick:x,type:"button",children:" Ajouter"})]})]})},SZ=({videoId:e})=>r.jsx("div",{className:"youtube-embed",children:r.jsx("iframe",{src:`https://www.youtube.com/embed/${e}`,title:"Vido YouTube",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}),Kk=({liens:e,onChange:t,readonly:n=!1})=>{const[a,l]=g.useState(!1);function o(d){t([...e,d]),l(!1)}function u(d){t(e.filter(f=>f.id!==d))}return r.jsxs("section",{className:"liens-section","aria-label":"Liens externes",children:[r.jsx("h4",{children:" Liens et ressources"}),e.length>0&&r.jsx("div",{className:"liens-liste",children:e.map(d=>{const f=NZ(d.url);return r.jsxs("div",{className:"lien-card",children:[r.jsx("span",{className:"lien-icone","aria-hidden":"true",children:jZ(d.type)}),r.jsxs("div",{className:"lien-infos",children:[r.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"lien-titre",title:d.url,children:d.titre}),d.description&&r.jsx("p",{className:"lien-description",children:d.description}),f&&r.jsx(SZ,{videoId:f})]}),!n&&r.jsx("button",{className:"lien-suppr",onClick:()=>u(d.id),title:"Supprimer ce lien",type:"button","aria-label":`Supprimer le lien ${d.titre}`,children:""})]},d.id)})}),e.length===0&&!n&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun lien ajout. Ajoutez des ressources pour enrichir cette sance."}),!n&&r.jsx(r.Fragment,{children:a?r.jsx(_Z,{onAjouter:o,onAnnuler:()=>l(!1)}):r.jsx("button",{className:"btn-secondary",onClick:()=>l(!0),type:"button",children:" Ajouter un lien"})})]})},wZ=({selectedIds:e,onSelect:t,onFermer:n})=>{const[a,l]=g.useState(""),[o,u]=g.useState([]),[d,f]=g.useState(!0),[p,h]=g.useState("");g.useEffect(()=>{async function x(){try{const N=await JX();u(N)}catch{h("Impossible de charger la bibliothque.")}finally{f(!1)}}x()},[]);const v=g.useMemo(()=>{const x=a.toLowerCase().trim();return x?o.filter(N=>N.titre.toLowerCase().includes(x)||N.auteur.toLowerCase().includes(x)||N.categorie.toLowerCase().includes(x)):o},[o,a]);function b(x){x.target===x.currentTarget&&n()}return r.jsx("div",{className:"ebook-selector-overlay",onClick:b,role:"dialog","aria-modal":"true","aria-label":"Slectionner un ebook",children:r.jsxs("div",{className:"ebook-selector-panel",children:[r.jsxs("div",{className:"ebook-selector-header",children:[r.jsx("h3",{children:" Bibliothque PedaClic"}),r.jsx("button",{onClick:n,"aria-label":"Fermer",style:{background:"none",border:"none",fontSize:"1.3rem",cursor:"pointer",color:"#6b7280"},type:"button",children:""})]}),r.jsx("div",{className:"ebook-search",children:r.jsx("input",{type:"search",placeholder:" Rechercher par titre, auteur ou catgorie...",value:a,onChange:x=>l(x.target.value),autoFocus:!0,"aria-label":"Recherche ebook"})}),r.jsxs("div",{className:"ebook-liste",children:[d&&r.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:" Chargement de la bibliothque"}),p&&r.jsx("p",{style:{color:"#dc2626",textAlign:"center"},children:p}),!d&&!p&&v.length===0&&r.jsx("p",{style:{color:"#9ca3af",textAlign:"center"},children:"Aucun ebook ne correspond  votre recherche."}),!d&&v.map(x=>{const N=e.includes(x.id);return r.jsxs("button",{type:"button",className:`ebook-item ${N?"selected":""}`,onClick:()=>!N&&t(x),disabled:N,"aria-pressed":N,"aria-label":`${N?"Dj li : ":""}${x.titre}`,children:[x.couvertureUrl?r.jsx("img",{src:x.couvertureUrl,alt:`Couverture de ${x.titre}`,loading:"lazy"}):r.jsx("div",{style:{width:36,height:48,background:"#e5e7eb",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",flexShrink:0},"aria-hidden":"true",children:""}),r.jsxs("div",{className:"ebook-item-info",children:[r.jsx("div",{className:"ebook-item-titre",children:x.titre}),r.jsxs("div",{className:"ebook-item-meta",children:[x.auteur,"  ",x.categorie]}),N&&r.jsx("div",{style:{fontSize:"0.75rem",color:"#2563eb",marginTop:2},children:" Dj li  cette sance"})]})]},x.id)})]})]})})},Wk=({ebooksLies:e,onChange:t,readonly:n=!1})=>{const[a,l]=g.useState(!1),o=e.map(f=>f.ebookId);function u(f){const p={ebookId:f.id,titre:f.titre,categorie:f.categorie,auteur:f.auteur};t([...e,p]),l(!1)}function d(f){t(e.filter(p=>p.ebookId!==f))}return r.jsxs("section",{"aria-label":"Ebooks lis  la sance",style:{marginTop:16},children:[r.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 8px"},children:" Ebooks de la bibliothque"}),e.length>0&&r.jsx("div",{className:"ebooks-lies",children:e.map(f=>r.jsxs("span",{className:"ebook-chip",children:[r.jsxs("a",{href:`/bibliotheque/${f.ebookId}`,className:"ebook-chip",style:{textDecoration:"none"},title:`Lire : ${f.titre}`,children:[" ",f.titre]}),!n&&r.jsx("button",{onClick:()=>d(f.ebookId),title:`Retirer ${f.titre}`,type:"button","aria-label":`Retirer l'ebook ${f.titre}`,children:""})]},f.ebookId))}),e.length===0&&!n&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 8px"},children:"Aucun ebook li. Associez un ebook de la bibliothque  cette sance."}),!n&&r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(!0),style:{marginTop:8},children:" Choisir dans la bibliothque"}),a&&r.jsx(wZ,{selectedIds:o,onSelect:u,onFermer:()=>l(!1)})]})},CZ=()=>({date:new Date().toISOString().slice(0,10),heureDebut:"",heureFin:"",chapitre:"",typeContenu:"cours",contenu:"",objectifs:"",competences:[],statut:"realise",motifAnnulation:"",dateReport:"",notesPrivees:"",isMarqueEvaluation:!1,typeEvaluation:"",dateEvaluationPrevue:"",statutEvaluation:"a_evaluer"}),EZ=({value:e,onChange:t,placeholder:n})=>{const a=g.useRef(null);g.useEffect(()=>{a.current&&a.current.innerHTML!==e&&(a.current.innerHTML=e)},[]);const l=(d,f)=>{document.execCommand(d,!1,f),a.current?.focus(),o()},o=()=>{a.current&&t(a.current.innerHTML)},u=d=>{try{return document.queryCommandState(d)}catch{return!1}};return r.jsxs("div",{children:[r.jsxs("div",{className:"rich-editor-toolbar",children:[[{cmd:"bold",label:"G",title:"Gras"},{cmd:"italic",label:"I",title:"Italique"},{cmd:"underline",label:"S",title:"Soulign"}].map(({cmd:d,label:f,title:p})=>r.jsx("button",{type:"button",className:`toolbar-btn ${u(d)?"active":""}`,onMouseDown:h=>{h.preventDefault(),l(d)},title:p,children:f},d)),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertUnorderedList")},title:"Liste  puces",children:""}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertOrderedList")},title:"Liste numrote",children:"1."}),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),["h2","h3","p"].map(d=>r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:f=>{f.preventDefault(),l("formatBlock",d)},title:d==="p"?"Paragraphe":d.toUpperCase(),children:d==="p"?"":d.toUpperCase()},d)),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("removeFormat")},title:"Effacer",children:""})]}),r.jsx("div",{ref:a,className:"rich-editor-area",contentEditable:!0,suppressContentEditableWarning:!0,onInput:o,"data-placeholder":n||"Dcrivez le contenu de la sance...",style:{position:"relative"}})]})},HE=()=>{const{cahierId:e,entreeId:t}=Yn(),{currentUser:n}=rt(),a=it(),[l,o]=g.useState(null),[u,d]=g.useState(null),[f,p]=g.useState(CZ()),[h,v]=g.useState([]),[b,x]=g.useState(!0),[N,j]=g.useState(!1),[S,C]=g.useState(!1),[A,w]=g.useState(""),[E,D]=g.useState([]),[O,T]=g.useState([]),P=!!t;g.useEffect(()=>{if(!e)return;(async()=>{x(!0);try{const V=await Gk(e);if(!V){a("/prof/cahiers");return}if(o(V),P&&t){const M=await VX(t);M&&(d(M),v(M.piecesJointes||[]),D(M.liens??[]),T(M.ebooksLies??[]),p({date:M.date.toDate().toISOString().slice(0,10),heureDebut:M.heureDebut||"",heureFin:M.heureFin||"",chapitre:M.chapitre,typeContenu:M.typeContenu,contenu:M.contenu,objectifs:M.objectifs||"",competences:M.competences||[],statut:M.statut,motifAnnulation:M.motifAnnulation||"",dateReport:M.dateReport?M.dateReport.toDate().toISOString().slice(0,10):"",notesPrivees:M.notesPrivees||"",isMarqueEvaluation:M.isMarqueEvaluation,typeEvaluation:M.typeEvaluation||"",dateEvaluationPrevue:M.dateEvaluationPrevue?M.dateEvaluationPrevue.toDate().toISOString().slice(0,10):"",statutEvaluation:M.statutEvaluation||"a_evaluer"}))}}finally{x(!1)}})()},[e,t]);const I=G=>{p(V=>({...V,competences:V.competences.includes(G)?V.competences.filter(M=>M!==G):[...V.competences,G]}))},R=async G=>{if(!G.target.files?.length||!n?.uid||!e)return;const V=G.target.files[0];if(V.size>10*1024*1024){alert("Fichier trop volumineux (max 10 Mo)");return}C(!0);try{const M=await YX(n.uid,e,V),q=[...h,M];v(q),P&&t&&u&&await $E(t,h,[M])}catch{alert("Erreur upload fichier.")}finally{C(!1),G.target.value=""}},F=async G=>{if(!t){v(V=>V.filter(M=>M.url!==G));return}try{await KX(t,h,G),v(V=>V.filter(M=>M.url!==G))}catch{alert("Erreur suppression fichier.")}},B=async G=>{if(G.preventDefault(),!f.chapitre.trim()){w("Le chapitre est obligatoire.");return}if(!f.date){w("La date est obligatoire.");return}if(!(!n?.uid||!e)){j(!0),w("");try{if(P&&t)await Dc(t,e,f),await Dc(t,{liens:E,ebooksLies:O});else{const q=await iZ(e,n.uid,f);h.length>0&&await $E(q,[],h),(E.length>0||O.length>0)&&await Dc(q,{liens:E,ebooksLies:O})}const M=(await Hk(e)).filter(q=>q.statut==="realise").length;await cf(e,{nombreSeancesRealise:M}),a(`/prof/cahiers/${e}`)}catch(V){const M=V instanceof Error?V.message:String(V);w("Erreur : "+M)}finally{j(!1)}}};return b?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):l?r.jsxs("div",{className:"entree-editor-page",children:[r.jsxs("div",{className:"editor-header",children:[r.jsx("button",{onClick:()=>a(`/prof/cahiers/${e}`),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem"},children:""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.4rem",fontWeight:700,color:"#1f2937",margin:"0 0 0.2rem"},children:P?" Modifier la sance":" Nouvelle sance"}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[l.titre,"  ",l.classe,"  ",l.matiere]})]})]}),r.jsxs("form",{onSubmit:B,children:[r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Informations de la sance"}),r.jsxs("div",{className:"form-row",style:{gridTemplateColumns:"1.5fr 1fr 1fr"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date *"}),r.jsx("input",{type:"date",className:"form-input",value:f.date,onChange:G=>p(V=>({...V,date:G.target.value})),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Heure dbut"}),r.jsx("input",{type:"time",className:"form-input",value:f.heureDebut,onChange:G=>p(V=>({...V,heureDebut:G.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Heure fin"}),r.jsx("input",{type:"time",className:"form-input",value:f.heureFin,onChange:G=>p(V=>({...V,heureFin:G.target.value}))})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Chapitre / Titre de la sance *"}),r.jsx("input",{className:"form-input",placeholder:"Ex: Chapitre 3  Les fonctions affines",value:f.chapitre,onChange:G=>p(V=>({...V,chapitre:G.target.value})),required:!0})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Type de sance"}),r.jsx("select",{className:"form-select",value:f.typeContenu,onChange:G=>p(V=>({...V,typeContenu:G.target.value})),children:Object.entries(Ui).map(([G,V])=>r.jsxs("option",{value:G,children:[V.emoji," ",V.label]},G))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Statut"}),r.jsx("select",{className:"form-select",value:f.statut,onChange:G=>p(V=>({...V,statut:G.target.value})),children:Object.entries(Mc).map(([G,V])=>r.jsx("option",{value:G,children:V.label},G))})]})]}),f.statut==="annule"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Motif d'annulation"}),r.jsx("input",{className:"form-input",placeholder:"Ex: Grve enseignants, sortie scolaire...",value:f.motifAnnulation,onChange:G=>p(V=>({...V,motifAnnulation:G.target.value}))})]}),f.statut==="reporte"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Nouvelle date (report)"}),r.jsx("input",{type:"date",className:"form-input",value:f.dateReport,onChange:G=>p(V=>({...V,dateReport:G.target.value}))})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Contenu de la sance"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contenu (mise en forme riche)"}),r.jsx(EZ,{value:f.contenu,onChange:G=>p(V=>({...V,contenu:G})),placeholder:"Dcrivez le contenu enseign, les exemples traits, les formules vues..."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Ex: L'lve sera capable de rsoudre une quation du second degr...",value:f.objectifs,onChange:G=>p(V=>({...V,objectifs:G.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Comptences vises"}),r.jsx("div",{className:"competences-container",children:oZ.map(G=>r.jsx("button",{type:"button",className:`competence-tag ${f.competences.includes(G)?"selected":""}`,onClick:()=>I(G),children:G},G))})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Signet d'valuation"}),r.jsxs("div",{className:"signet-section",children:[r.jsxs("div",{className:"signet-toggle",onClick:()=>p(G=>({...G,isMarqueEvaluation:!G.isMarqueEvaluation})),children:[r.jsx("div",{className:`toggle-switch ${f.isMarqueEvaluation?"on":""}`}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1f2937"},children:"Marquer pour valuation"}),r.jsx("div",{style:{fontSize:"0.78rem",color:"#6b7280"},children:"Ce contenu sera valu ultrieurement"})]})]}),f.isMarqueEvaluation&&r.jsx("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Type d'valuation"}),r.jsxs("select",{className:"form-select",value:f.typeEvaluation,onChange:G=>p(V=>({...V,typeEvaluation:G.target.value})),children:[r.jsx("option",{value:"",children:"Choisir..."}),Object.entries(Vk).map(([G,V])=>r.jsx("option",{value:G,children:V},G))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date prvue d'valuation"}),r.jsx("input",{type:"date",className:"form-input",value:f.dateEvaluationPrevue,onChange:G=>p(V=>({...V,dateEvaluationPrevue:G.target.value}))})]})]})})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Pices jointes"}),h.length>0&&r.jsx("div",{className:"pieces-jointes-list",children:h.map(G=>r.jsxs("div",{className:"piece-jointe-item",children:[r.jsx("span",{children:""}),r.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",children:G.nom}),r.jsxs("span",{style:{color:"#9ca3af",fontSize:"0.75rem"},children:["(",Math.round((G.taille??0)/1024)," Ko)"]}),r.jsx("button",{type:"button",onClick:()=>F(G.url),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",marginLeft:"auto"},children:""})]},G.url))}),r.jsxs("label",{className:"upload-zone",children:[S?"Envoi en cours...":" Cliquer pour ajouter un fichier (PDF, image  max 10 Mo)",r.jsx("input",{type:"file",style:{display:"none"},accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.ppt,.pptx",onChange:R,disabled:S})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Ressources enrichies"}),r.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 4px"},children:"Ajoutez des liens ou des ebooks pour enrichir cette sance."}),r.jsx(Kk,{liens:E,onChange:D}),r.jsx(Wk,{ebooksLies:O,onChange:T})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Notes prives"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Notes personnelles (non visibles par l'administration)...",value:f.notesPrivees,onChange:G=>p(V=>({...V,notesPrivees:G.target.value})),rows:3}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Ces notes sont uniquement visibles par vous."})]}),A&&r.jsx("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.85rem"},children:A}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingBottom:"2rem"},children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(`/prof/cahiers/${e}`),children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:N,style:{minWidth:160},children:N?"Enregistrement...":P?" Mettre  jour":" Enregistrer la sance"})]})]})]}):null},Wi="sequences_pedagogiques",AZ="entrees_cahier";function Xk(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function pp(e){return e.filter(t=>t.estEvaluation&&t.typeEvaluation).map(t=>({id:t.id,titre:t.titre,type:t.typeEvaluation,seanceNumero:t.numero,noteMax:t.noteMax??20,coefficient:t.coefficient??1,datePrevue:t.datePrevue}))}async function zZ(e){const t=De(Ne(W,Wi),we("profId","==",e),Xe("updatedAt","desc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}async function Wc(e){const t=await Mt(je(W,Wi,e));return t.exists()?{id:t.id,...t.data()}:null}async function OZ(e,t){const n=Oe.now(),a=t.seances.map(u=>({...u,id:u.id||Xk(),exporterVersCahier:u.exporterVersCahier??!0,entreesCahierIds:u.entreesCahierIds??[]})),l=pp(a);return(await kt(Ne(W,Wi),{...t,profId:e,seances:a,evaluationsPrevues:l,statut:t.statut??"brouillon",genereeParIA:t.genereeParIA??!1,competences:t.competences??[],createdAt:n,updatedAt:n})).id}async function DZ(e,t){const n={...t,updatedAt:Oe.now()};t.seances&&(n.evaluationsPrevues=pp(t.seances)),await Qe(je(W,Wi,e),n)}async function MZ(e,t){await Qe(je(W,Wi,e),{statut:t,updatedAt:Oe.now()})}async function Zk(e){await pn(je(W,Wi,e))}async function kZ(e,t){const n=await Wc(e);if(!n)throw new Error(`Squence ${e} introuvable`);const a=Oe.now(),l=n.seances.map(u=>({...u,id:Xk(),exporterVersCahier:!0,entreesCahierIds:[],datePrevue:void 0}));return(await kt(Ne(W,Wi),{titre:`[Copie] ${n.titre}`,description:n.description,niveau:n.niveau,matiere:n.matiere,theme:n.theme,competences:n.competences,objectifGeneral:n.objectifGeneral,prerequis:n.prerequis,nombreSeances:n.nombreSeances,dureeSeanceMinutes:n.dureeSeanceMinutes,trimestre:n.trimestre,seances:l,evaluationsPrevues:pp(l),genereeParIA:n.genereeParIA,profId:t,statut:"brouillon",groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0,createdAt:a,updatedAt:a})).id}async function PZ(e){const{sequenceId:t,cahierDeTextesId:n,profId:a,datesParSeance:l}=e,o=await Wc(t);if(!o)throw new Error(`Squence ${t} introuvable`);const u=Oe.now(),d=[],f=[],p=Object.keys(l),h=[...o.seances];for(const v of p){const b=h.findIndex(j=>j.id===v);if(b===-1){f.push(v);continue}const x=h[b],N=l[v];try{const j={cahierId:n,profId:a,date:N,chapitre:x.titre,typeContenu:"cours",contenu:x.contenu,objectifs:x.objectifSpecifique,statut:"planifie",notesPrivees:x.ressources.length>0?`Ressources : ${x.ressources.join(" | ")}`:void 0,isMarqueEvaluation:!1,ordre:b,liens:[],ebooksLies:[],piecesJointes:[]},S=await kt(Ne(W,AZ),{...j,createdAt:u,updatedAt:u});d.push(S.id),h[b]={...x,exporterVersCahier:!1,entreesCahierIds:[...x.entreesCahierIds??[],S.id]}}catch(j){console.error(`[exporterVersCahier] Erreur sance ${v}:`,j),f.push(v)}}return d.length>0&&await Qe(je(W,Wi,t),{seances:h,evaluationsPrevues:pp(h),cahierDeTextesId:n,cahierDeTextesNom:o.cahierDeTextesNom??"",exporteAt:u,updatedAt:u}),{nbExportees:d.length,idsEntrees:d,erreurs:f}}function TZ(e,t){return e.filter(n=>{if(t.matiere&&n.matiere!==t.matiere||t.niveau&&n.niveau!==t.niveau||t.statut&&n.statut!==t.statut||t.groupeClasseId&&n.groupeClasseId!==t.groupeClasseId)return!1;if(t.recherche){const a=t.recherche.toLowerCase();if(!(n.titre.toLowerCase().includes(a)||n.matiere.toLowerCase().includes(a)||n.theme.toLowerCase().includes(a)||n.description.toLowerCase().includes(a)))return!1}return!0})}const uf={cours:"Cours",td:"TD",tp:"TP",evaluation:"valuation",revision:"Rvision",projet:"Projet",correction:"Correction"},bj={formative:"Formative",sommative:"Sommative",diagnostique:"Diagnostique",devoir:"Devoir sur table",composition:"Composition (BFEM/BAC)",interrogation:"Interrogation"},hp={brouillon:{label:"Brouillon",couleur:"#6b7280"},active:{label:"En cours",couleur:"#2563eb"},terminee:{label:"Termine",couleur:"#16a34a"},archivee:{label:"Archive",couleur:"#9ca3af"}},vu=[{valeur:"6eme",label:"6me"},{valeur:"5eme",label:"5me"},{valeur:"4eme",label:"4me"},{valeur:"3eme",label:"3me (BFEM)"},{valeur:"2nde",label:"2nde"},{valeur:"1ere",label:"1re"},{valeur:"terminale",label:"Terminale (BAC)"}],df=[30,45,55,60,90,120],Jk=["Mathmatiques","Franais","Sciences de la Vie et de la Terre (SVT)","Histoire-Gographie","Physique-Chimie","Anglais","Philosophie","Sciences conomiques et Sociales","ducation Civique","Arts Plastiques","ducation Physique et Sportive"],qZ=({statut:e})=>{const{label:t}=hp[e];return r.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[r.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),t]})},RZ=({sequence:e,onView:t,onEdit:n,onDuplicate:a,onDelete:l})=>{const o=e.seances.filter(u=>u.estEvaluation).length;return r.jsxs("article",{className:"sequence-card",onClick:t,role:"button",tabIndex:0,onKeyDown:u=>u.key==="Enter"&&t(),children:[r.jsxs("div",{className:"sequence-card__badges",children:[r.jsx(qZ,{statut:e.statut}),e.genereeParIA&&r.jsx("span",{className:"badge-ia",children:" IA"})]}),r.jsx("h3",{className:"sequence-card__title",children:e.titre}),r.jsxs("div",{className:"sequence-card__meta",children:[r.jsx("span",{className:"sequence-card__meta-chip",children:e.matiere}),r.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:vu.find(u=>u.valeur===e.niveau)?.label??e.niveau}),e.trimestre&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",e.trimestre]})]}),e.description&&r.jsx("p",{className:"sequence-card__desc",children:e.description}),r.jsxs("div",{className:"sequence-card__footer",children:[r.jsxs("span",{className:"sequence-card__seances-count",children:[" ",e.seances.length," sance",e.seances.length>1?"s":"",o>0&&`   ${o} val.`]}),e.groupeClasseNom&&r.jsxs("span",{className:"sequence-card__groupe",children:[" ",e.groupeClasseNom]})]}),r.jsxs("div",{className:"sequence-card__actions",onClick:u=>u.stopPropagation(),children:[r.jsx("button",{className:"sequence-card__action-btn",onClick:n,title:"Modifier","aria-label":"Modifier la squence",children:""}),r.jsx("button",{className:"sequence-card__action-btn",onClick:a,title:"Dupliquer","aria-label":"Dupliquer la squence",children:""}),r.jsx("button",{className:"sequence-card__action-btn sequence-card__action-btn--danger",onClick:l,title:"Supprimer","aria-label":"Supprimer la squence",children:""})]})]})},IZ=()=>{const e=it(),{currentUser:t}=rt(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[f,p]=g.useState(null),[h,v]=g.useState({matiere:"",niveau:"",statut:"",recherche:""}),b=g.useCallback(async()=>{if(t?.uid){o(!0),d(null);try{const A=await zZ(t.uid);a(A)}catch(A){console.error("[SequencesPage] Chargement:",A),d("Impossible de charger vos squences. Vrifiez votre connexion.")}finally{o(!1)}}},[t?.uid]);if(g.useEffect(()=>{b()},[b]),!t?.isPremium)return r.jsxs("div",{className:"premium-gate",children:[r.jsx("span",{className:"premium-gate__icon",children:""}),r.jsx("h2",{className:"premium-gate__title",children:"Fonctionnalit Premium"}),r.jsx("p",{className:"premium-gate__text",children:"Le Gnrateur de Squences Pdagogiques est rserv aux enseignants Premium. Passez  Premium pour crer des squences structures et les exporter vers votre Cahier de Textes."}),r.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/premium"),children:" Passer  Premium  2 000 FCFA/mois"})]});const x=TZ(n,h),N=[...new Set(n.map(A=>A.matiere))].sort(),j=async A=>{if(window.confirm(`Supprimer la squence "${A.titre}" ?

Cette action est irrversible.`)){p(A.id);try{await Zk(A.id),a(E=>E.filter(D=>D.id!==A.id))}catch(E){console.error("[SequencesPage] Suppression:",E),d("Erreur lors de la suppression. Ressayez.")}finally{p(null)}}},S=async A=>{if(t?.uid){p(A.id);try{const w=await kZ(A.id,t.uid);e(`/prof/sequences/${w}/modifier`)}catch(w){console.error("[SequencesPage] Duplication:",w),d("Erreur lors de la duplication. Ressayez."),p(null)}}},C={total:n.length,active:n.filter(A=>A.statut==="active").length,terminee:n.filter(A=>A.statut==="terminee").length,ia:n.filter(A=>A.genereeParIA).length};return r.jsxs("div",{className:"sequences-page",children:[r.jsxs("div",{className:"sequences-page__header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"sequences-page__title",children:" Squences Pdagogiques"}),r.jsxs("p",{className:"sequences-page__subtitle",children:[C.total," squence",C.total>1?"s":"",C.active>0&&`  ${C.active} en cours`,C.ia>0&&`  ${C.ia} assiste${C.ia>1?"s":""} par IA`]})]}),r.jsx("button",{className:"sequences-page__btn-new",onClick:()=>e("/prof/sequences/nouvelle"),children:"+ Nouvelle squence"})]}),u&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",u,r.jsx("button",{onClick:b,style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontWeight:600},children:"Ressayer"})]}),r.jsxs("div",{className:"sequences-filters",role:"search",children:[r.jsx("input",{type:"search",className:"sequences-filters__search",placeholder:" Rechercher une squence...",value:h.recherche??"",onChange:A=>v(w=>({...w,recherche:A.target.value})),"aria-label":"Rechercher une squence"}),r.jsxs("select",{className:"sequences-filters__select",value:h.matiere??"",onChange:A=>v(w=>({...w,matiere:A.target.value})),"aria-label":"Filtrer par matire",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),N.map(A=>r.jsx("option",{value:A,children:A},A))]}),r.jsxs("select",{className:"sequences-filters__select",value:h.niveau??"",onChange:A=>v(w=>({...w,niveau:A.target.value})),"aria-label":"Filtrer par niveau",children:[r.jsx("option",{value:"",children:"Tous les niveaux"}),vu.map(A=>r.jsx("option",{value:A.valeur,children:A.label},A.valeur))]}),r.jsxs("select",{className:"sequences-filters__select",value:h.statut??"",onChange:A=>v(w=>({...w,statut:A.target.value})),"aria-label":"Filtrer par statut",children:[r.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(hp).map(([A,{label:w}])=>r.jsx("option",{value:A,children:w},A))]})]}),l?r.jsx("div",{className:"sequences-grid",children:[1,2,3].map(A=>r.jsxs("div",{className:"sequence-card",style:{minHeight:180},children:[r.jsx("div",{className:"skeleton",style:{height:20,width:"40%",marginBottom:10}}),r.jsx("div",{className:"skeleton",style:{height:22,width:"80%",marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:14,width:"60%"}})]},A))}):r.jsx("div",{className:"sequences-grid",role:"list",children:x.length===0?r.jsxs("div",{className:"sequences-empty",children:[r.jsx("span",{className:"sequences-empty__icon",children:""}),r.jsx("p",{className:"sequences-empty__text",children:n.length===0?"Aucune squence pour l'instant":"Aucune squence ne correspond  vos filtres"}),r.jsx("p",{className:"sequences-empty__hint",children:n.length===0?'Cliquez sur "+ Nouvelle squence" pour commencer':"Modifiez ou effacez les filtres pour voir plus de rsultats"})]}):x.map(A=>r.jsx("div",{role:"listitem",style:{opacity:f===A.id?.6:1},children:r.jsx(RZ,{sequence:A,onView:()=>e(`/prof/sequences/${A.id}`),onEdit:()=>e(`/prof/sequences/${A.id}/modifier`),onDuplicate:()=>S(A),onDelete:()=>j(A)})},A.id))})]})},LZ="https://votre-app.railway.app",$Z=["cours","td","tp","evaluation","revision","projet","correction"],BZ=["formative","sommative","diagnostique","devoir","composition","interrogation"];function UZ(e){return $Z.includes(e)?e:"cours"}function FZ(e){if(e)return BZ.includes(e)?e:"formative"}function GZ(e){if(!e||typeof e!="object")throw new Error("Rponse IA invalide : non-objet");if(!Array.isArray(e.seances)||e.seances.length===0)throw new Error("Rponse IA invalide : tableau seances absent ou vide");const t=e.seances.map((n,a)=>({numero:Number(n.numero)||a+1,titre:String(n.titre??`Sance ${a+1}`),dureeMinutes:Number(n.dureeMinutes)||55,objectifSpecifique:String(n.objectifSpecifique??""),contenu:String(n.contenu??""),ressources:Array.isArray(n.ressources)?n.ressources.map(String):[],typeActivite:UZ(String(n.typeActivite??"cours")),estEvaluation:!!n.estEvaluation,typeEvaluation:FZ(n.typeEvaluation),noteMax:typeof n.noteMax=="number"?n.noteMax:void 0,coefficient:typeof n.coefficient=="number"?n.coefficient:void 0}));return{titre:String(e.titre??""),description:String(e.description??""),objectifGeneral:String(e.objectifGeneral??""),prerequis:String(e.prerequis??""),competences:Array.isArray(e.competences)?e.competences.map(String):[],seances:t}}function HZ(){return`Tu es un expert en ingnierie pdagogique pour le systme ducatif sngalais 
(programme du Ministre de l'ducation Nationale du Sngal).

Tu gnres des squences pdagogiques structures pour des professeurs du secondaire 
(collges et lyces sngalais, niveaux 6me  Terminale).

RPONDRE UNIQUEMENT EN JSON valide. Aucun texte avant ou aprs le JSON.
Aucune balise markdown, aucun \`\`\`json.

Structure JSON attendue :
{
  "titre": "string",
  "description": "string (2-3 phrases contextuelles)",
  "objectifGeneral": "string (formulation en termes de comptences, verbes d'action)",
  "prerequis": "string (connaissances ncessaires avant cette squence)",
  "competences": ["string", "string", ...],
  "seances": [
    {
      "numero": 1,
      "titre": "string",
      "dureeMinutes": 55,
      "objectifSpecifique": "string (verbe d'action + contenu)",
      "contenu": "string (droulement dtaill de la sance)",
      "ressources": ["string", ...],
      "typeActivite": "cours|td|tp|evaluation|revision|projet|correction",
      "estEvaluation": false,
      "typeEvaluation": null,
      "noteMax": null,
      "coefficient": null
    }
  ]
}

Rgles :
- Respecte les programmes officiels sngalais
- Les trimestres au Sngal : 1er (Oct-Dc), 2me (Jan-Mars), 3me (Avr-Juin)
- Inclure des sances de rvision avant les valuations
- Pour les valuations (estEvaluation=true), prciser typeEvaluation
- Les contenus doivent tre adapts aux ralits sngalaises (exemples locaux)
- Note maximale habituelle : 20 (systme franais)
- Niveaux  fort enjeu : 3me (BFEM), Terminale (BAC)
- Langue : franais`}async function QZ(e){const t=`
Gnre une squence pdagogique complte pour :
- Matire : ${e.matiere}
- Niveau : ${e.niveau}
- Thme/Chapitre : ${e.theme}
- Nombre de sances : ${e.nombreSeances}
- Dure par sance : ${e.dureeSeanceMinutes} minutes
${e.trimestre?`- Trimestre : ${e.trimestre}me trimestre`:""}
${e.instructionsSupplementaires?`- Instructions supplmentaires : ${e.instructionsSupplementaires}`:""}

Distribue intelligemment les sances : cours  TD/TP  rvision  valuation.
Assure-toi que les objectifs spcifiques sont progressifs et mesurables.
  `.trim();let n;try{n=await fetch(`${LZ}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({systemPrompt:HZ(),userPrompt:t,maxTokens:4e3})})}catch{throw new Error("Impossible de contacter le serveur IA. Vrifiez votre connexion Internet.")}if(!n.ok){const d=await n.text().catch(()=>"Erreur inconnue");throw new Error(`Erreur serveur IA (${n.status}) : ${d}`)}const a=await n.json(),l=a.content??a.result??a.text??"";if(!l)throw new Error("Rponse IA vide  le serveur a renvoy un contenu vide.");const o=l.replace(/^```json\s*/i,"").replace(/^```\s*/,"").replace(/```\s*$/,"").trim();let u;try{u=JSON.parse(o)}catch{throw new Error(`Rponse IA non parsable : ${o.substring(0,200)}...`)}return GZ(u)}function eP(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function VZ(e){return{id:eP(),numero:e,titre:"",dureeMinutes:55,objectifSpecifique:"",contenu:"",ressources:[],typeActivite:"cours",estEvaluation:!1,exporterVersCahier:!0,entreesCahierIds:[]}}const YZ=({seance:e,onChange:t,onDelete:n,onMoveUp:a,onMoveDown:l,isFirst:o,isLast:u})=>{const[d,f]=g.useState(e.titre===""),[p,h]=g.useState(""),v=N=>t({...e,...N}),b=()=>{const N=p.trim();N&&(v({ressources:[...e.ressources,N]}),h(""))},x=N=>v({ressources:e.ressources.filter((j,S)=>S!==N)});return r.jsxs("div",{className:"seance-card",children:[r.jsxs("div",{className:"seance-card__header",onClick:()=>f(N=>!N),children:[r.jsx("div",{className:`seance-card__numero${e.estEvaluation?" seance-card__numero--eval":""}`,children:e.numero}),r.jsx("span",{className:"seance-card__header-title",children:e.titre||`Sance ${e.numero} (sans titre)`}),r.jsxs("div",{className:"seance-card__header-badges",children:[r.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:uf[e.typeActivite]}),r.jsxs("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:[e.dureeMinutes,"min"]})]}),r.jsx("span",{className:`seance-card__toggle-icon${d?" seance-card__toggle-icon--open":""}`,children:""})]}),d&&r.jsxs("div",{className:"seance-card__body",children:[r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsxs("label",{children:["Titre de la sance ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Introduction aux vecteurs",value:e.titre,onChange:N=>v({titre:N.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type d'activit"}),r.jsx("select",{className:"form-control",value:e.typeActivite,onChange:N=>v({typeActivite:N.target.value,estEvaluation:N.target.value==="evaluation"?!0:e.estEvaluation}),children:Object.entries(uf).map(([N,j])=>r.jsx("option",{value:N,children:j},N))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure (minutes)"}),r.jsxs("select",{className:"form-control",value:e.dureeMinutes,onChange:N=>v({dureeMinutes:Number(N.target.value)}),children:[df.map(N=>r.jsxs("option",{value:N,children:[N," min"]},N)),r.jsx("option",{value:e.dureeMinutes,children:df.includes(e.dureeMinutes)?null:`${e.dureeMinutes} min (personnalis)`})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Objectif spcifique"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Ex : L'lve sera capable de calculer le module d'un vecteur",value:e.objectifSpecifique,onChange:N=>v({objectifSpecifique:N.target.value}),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Contenu / Droulement"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Dcrivez le droulement de la sance : activits, tapes, mthodes...",value:e.contenu,onChange:N=>v({contenu:N.target.value}),rows:4})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Supports / Ressources"}),e.ressources.length>0&&r.jsx("div",{className:"timeline-card__ressources",style:{marginBottom:6},children:e.ressources.map((N,j)=>r.jsxs("span",{className:"ressource-chip",style:{cursor:"pointer"},onClick:()=>x(j),title:"Cliquer pour supprimer",children:[N," "]},j))}),r.jsxs("div",{className:"competence-input-row",children:[r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Manuel p.42, GeoGebra, Calculatrice...",value:p,onChange:N=>h(N.target.value),onKeyDown:N=>N.key==="Enter"&&(N.preventDefault(),b())}),r.jsx("button",{type:"button",className:"btn-add-competence",onClick:b,children:"+ Ajouter"})]})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[r.jsx("input",{type:"checkbox",checked:e.estEvaluation,onChange:N=>v({estEvaluation:N.target.checked,typeEvaluation:N.target.checked?e.typeEvaluation??"formative":void 0}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Cette sance est une valuation"]})}),e.estEvaluation&&r.jsxs("div",{className:"editor-form-grid",style:{background:"#fef2f2",padding:12,borderRadius:8,border:"1px solid #fecaca"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type d'valuation"}),r.jsx("select",{className:"form-control",value:e.typeEvaluation??"formative",onChange:N=>v({typeEvaluation:N.target.value}),children:Object.entries(bj).map(([N,j])=>r.jsx("option",{value:N,children:j},N))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Note maximale"}),r.jsx("input",{type:"number",className:"form-control",min:1,max:100,value:e.noteMax??20,onChange:N=>v({noteMax:Number(N.target.value)})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Coefficient"}),r.jsx("input",{type:"number",className:"form-control",min:1,max:10,step:.5,value:e.coefficient??1,onChange:N=>v({coefficient:Number(N.target.value)})})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[r.jsx("input",{type:"checkbox",checked:e.exporterVersCahier,onChange:N=>v({exporterVersCahier:N.target.checked}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Inclure dans l'export vers le Cahier de Textes"]}),e.entreesCahierIds&&e.entreesCahierIds.length>0&&r.jsxs("span",{className:"export-seance-row__exported",style:{marginTop:4},children:[" Dj exporte (",e.entreesCahierIds.length," entre",e.entreesCahierIds.length>1?"s":"",")"]})]}),r.jsxs("div",{className:"seance-card__actions",children:[r.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:a,disabled:o,title:"Monter",children:""}),r.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:l,disabled:u,title:"Descendre",children:""}),r.jsx("button",{type:"button",className:"btn-seance-action btn-seance-action--delete",onClick:n,children:" Supprimer cette sance"})]})]})]})},KZ=({onSequenceGeneree:e,defaultMatiere:t,defaultNiveau:n,matieres:a})=>{const[l,o]=g.useState(t??""),[u,d]=g.useState(n??""),[f,p]=g.useState(""),[h,v]=g.useState(8),[b,x]=g.useState(55),[N,j]=g.useState(1),[S,C]=g.useState(""),[A,w]=g.useState(!1),[E,D]=g.useState({type:"idle",message:""}),O=async()=>{if(!l||!u||!f){D({type:"error",message:"Veuillez remplir la matire, le niveau et le thme."});return}w(!0),D({type:"loading",message:"L'IA gnre votre squence... (30-45 secondes)"});try{const T=await QZ({matiere:l,niveau:u,theme:f,nombreSeances:h,dureeSeanceMinutes:b,trimestre:N,instructionsSupplementaires:S||void 0}),P=T.seances.map(I=>({...I,ressources:I.ressources??[]}));e({titre:T.titre,description:T.description,objectifGeneral:T.objectifGeneral,prerequis:T.prerequis,competences:T.competences,seances:P}),D({type:"success",message:` Squence gnre avec ${P.length} sances ! Vrifiez et compltez les informations.`})}catch(T){const P=T instanceof Error?T.message:"Erreur inconnue";D({type:"error",message:`Erreur IA : ${P}`})}finally{w(!1)}};return r.jsxs("div",{className:"ia-panel",children:[r.jsx("h3",{className:"ia-panel__title",children:" Gnration assiste par IA"}),r.jsx("p",{className:"ia-panel__subtitle",children:"Dcrivez votre squence et Claude gnre la structure complte"}),r.jsxs("div",{className:"ia-panel__form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Matire ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l,onChange:T=>o(T.target.value),children:[r.jsx("option",{value:"",children:"Slectionner..."}),a.length>0?a.map(T=>r.jsx("option",{value:T,children:T},T)):Jk.map(T=>r.jsx("option",{value:T,children:T},T))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Niveau ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:u,onChange:T=>d(T.target.value),children:[r.jsx("option",{value:"",children:"Slectionner..."}),vu.map(T=>r.jsx("option",{value:T.valeur,children:T.label},T.valeur))]})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[r.jsxs("label",{children:["Thme / Chapitre ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines, La photosynthse, La Rvolution franaise...",value:f,onChange:T=>p(T.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Nombre de sances"}),r.jsx("input",{type:"number",className:"form-control",min:2,max:25,value:h,onChange:T=>v(Number(T.target.value))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure par sance"}),r.jsx("select",{className:"form-control",value:b,onChange:T=>x(Number(T.target.value)),children:df.map(T=>r.jsxs("option",{value:T,children:[T," min"]},T))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Trimestre"}),r.jsxs("select",{className:"form-control",value:N,onChange:T=>j(Number(T.target.value)),children:[r.jsx("option",{value:1,children:"1er trimestre (OctDc)"}),r.jsx("option",{value:2,children:"2me trimestre (JanMars)"}),r.jsx("option",{value:3,children:"3me trimestre (AvrJuin)"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Instructions supplmentaires (optionnel)"}),r.jsx("textarea",{className:"ia-panel__instructions",placeholder:"Ex : Insister sur la rsolution graphique, Inclure un TP sur GeoGebra, Prvoir une sance de remdiation...",value:S,onChange:T=>C(T.target.value),rows:2})]}),r.jsxs("button",{type:"button",className:"ia-panel__btn-generate",onClick:O,disabled:A,children:[A?r.jsx("span",{className:"spinner"}):"",A?"Gnration en cours...":"Gnrer avec l'IA"]}),E.type!=="idle"&&r.jsxs("div",{className:`ia-panel__status ia-panel__status--${E.type}`,children:[E.type==="loading"&&r.jsx("span",{className:"spinner spinner--blue"}),E.message]})]})},QE=()=>{const e=it(),{id:t}=Yn(),{currentUser:n}=rt(),a=!!t,[l,o]=g.useState({titre:"",description:"",niveau:"",matiere:"",theme:"",competences:[],objectifGeneral:"",prerequis:"",nombreSeances:6,dureeSeanceMinutes:55,seances:[],evaluationsPrevues:[],statut:"brouillon",genereeParIA:!1,trimestre:void 0,groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0}),[u,d]=g.useState([]),[f,p]=g.useState([]),[h,v]=g.useState([]),[b,x]=g.useState([]),[N,j]=g.useState(a),[S,C]=g.useState(!1),[A,w]=g.useState(null),[E,D]=g.useState(null),[O,T]=g.useState(""),[P,I]=g.useState(!a);g.useEffect(()=>{(async()=>{if(!n?.uid)return;const[L,pe,te]=await Promise.all([Fk(n.uid).catch(()=>[]),Qk(n.uid).catch(()=>[]),Za.getAll().catch(()=>[])]);p(L),v(pe);const de=[...new Set(te.map(me=>me.nom))].sort();if(x(de),a&&t){j(!0);try{const me=await Wc(t);if(!me){w("Squence introuvable.");return}if(me.profId!==n.uid){w("Accs non autoris.");return}o({titre:me.titre,description:me.description,niveau:me.niveau,matiere:me.matiere,theme:me.theme,competences:me.competences,objectifGeneral:me.objectifGeneral,prerequis:me.prerequis,nombreSeances:me.nombreSeances,dureeSeanceMinutes:me.dureeSeanceMinutes,statut:me.statut,genereeParIA:me.genereeParIA,trimestre:me.trimestre,groupeClasseId:me.groupeClasseId,groupeClasseNom:me.groupeClasseNom,cahierDeTextesId:me.cahierDeTextesId,cahierDeTextesNom:me.cahierDeTextesNom}),d(me.seances)}catch{w("Erreur de chargement. Ressayez.")}finally{j(!1)}}})()},[n?.uid,t,a]);const R=()=>{d($=>[...$,VZ($.length+1)])},F=($,L)=>{d(pe=>pe.map((te,de)=>de===$?L:te))},B=$=>{d(L=>L.filter((pe,te)=>te!==$).map((pe,te)=>({...pe,numero:te+1})))},G=$=>{$!==0&&d(L=>{const pe=[...L];return[pe[$-1],pe[$]]=[pe[$],pe[$-1]],pe.map((te,de)=>({...te,numero:de+1}))})},V=$=>{d(L=>{if($===L.length-1)return L;const pe=[...L];return[pe[$],pe[$+1]]=[pe[$+1],pe[$]],pe.map((te,de)=>({...te,numero:de+1}))})},M=()=>{const $=O.trim();$&&(o(L=>({...L,competences:[...L.competences??[],$]})),T(""))},q=$=>{o(L=>({...L,competences:(L.competences??[]).filter((pe,te)=>te!==$)}))},X=$=>{o(pe=>({...pe,titre:$.titre,description:$.description,objectifGeneral:$.objectifGeneral,prerequis:$.prerequis,competences:$.competences,genereeParIA:!0}));const L=$.seances.map(pe=>({...pe,id:eP(),exporterVersCahier:!0,entreesCahierIds:[]}));d(L),I(!1),window.scrollTo({top:0,behavior:"smooth"})},Q=async()=>{if(!n?.uid)return;if(!l.titre?.trim()){w("Le titre est obligatoire.");return}if(!l.matiere?.trim()){w("La matire est obligatoire.");return}if(!l.niveau?.trim()){w("Le niveau est obligatoire.");return}const $=u.find(de=>!de.titre.trim());if($){w(`La sance n${$.numero} n'a pas de titre.`);return}C(!0),w(null);const L=h.find(de=>de.id===l.groupeClasseId),pe=f.find(de=>de.id===l.cahierDeTextesId),te={titre:l.titre.trim(),description:l.description?.trim()??"",niveau:l.niveau,matiere:l.matiere.trim(),theme:l.theme?.trim()??"",competences:l.competences??[],objectifGeneral:l.objectifGeneral?.trim()??"",prerequis:l.prerequis?.trim()??"",nombreSeances:u.length,dureeSeanceMinutes:l.dureeSeanceMinutes??55,statut:l.statut??"brouillon",genereeParIA:l.genereeParIA??!1,trimestre:l.trimestre??null,seances:u,evaluationsPrevues:[],groupeClasseId:l.groupeClasseId||null,groupeClasseNom:L?.nom||l.groupeClasseNom||null,cahierDeTextesId:l.cahierDeTextesId||null,cahierDeTextesNom:pe?.titre||l.cahierDeTextesNom||null};try{if(a&&t)await DZ(t,te),D("Squence mise  jour avec succs !"),setTimeout(()=>e(`/prof/sequences/${t}`),1200);else{const de=await OZ(n.uid,te);D("Squence cre avec succs !"),setTimeout(()=>e(`/prof/sequences/${de}`),1200)}}catch(de){console.error("[SequenceEditorPage] Sauvegarde:",de),w("Erreur lors de la sauvegarde. Ressayez.")}finally{C(!1)}};return N?r.jsxs("div",{className:"sequence-editor",children:[r.jsx("div",{className:"skeleton",style:{height:30,width:"50%",marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:200,borderRadius:12}})]}):r.jsxs("div",{className:"sequence-editor",children:[r.jsxs("div",{className:"sequence-editor__header",children:[r.jsxs("p",{className:"sequence-editor__breadcrumb",children:[r.jsx("a",{onClick:()=>e("/prof/sequences"),style:{cursor:"pointer"},children:" Squences"})," / ",a?"Modifier":"Nouvelle squence"]}),r.jsx("h1",{className:"sequence-editor__title",children:a?" Modifier la squence":" Nouvelle squence"})]}),A&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",A]}),E&&r.jsxs("div",{className:"success-banner",role:"status",children:[" ",E]}),r.jsx("div",{style:{marginBottom:8},children:r.jsx("button",{type:"button",className:"btn-secondary",style:{marginBottom:12},onClick:()=>I($=>!$),children:P?" Masquer":" Gnrer avec l'IA"})}),P&&r.jsx(KZ,{onSequenceGeneree:X,defaultMatiere:l.matiere,defaultNiveau:l.niveau,matieres:b}),r.jsxs("section",{className:"editor-section",children:[r.jsx("h2",{className:"editor-section__title",children:" Informations gnrales"}),r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsxs("label",{children:["Titre de la squence ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines  Terminale S",value:l.titre??"",onChange:$=>o(L=>({...L,titre:$.target.value})),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Matire ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l.matiere??"",onChange:$=>o(L=>({...L,matiere:$.target.value})),children:[r.jsx("option",{value:"",children:"Slectionner..."}),b.length>0?b.map($=>r.jsx("option",{value:$,children:$},$)):Jk.map($=>r.jsx("option",{value:$,children:$},$))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Niveau ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l.niveau??"",onChange:$=>o(L=>({...L,niveau:$.target.value})),children:[r.jsx("option",{value:"",children:"Slectionner..."}),vu.map($=>r.jsx("option",{value:$.valeur,children:$.label},$.valeur))]})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Thme / Chapitre du programme"}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Chapitre 4  Les vecteurs du plan",value:l.theme??"",onChange:$=>o(L=>({...L,theme:$.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Trimestre"}),r.jsxs("select",{className:"form-control",value:l.trimestre??"",onChange:$=>o(L=>({...L,trimestre:$.target.value?Number($.target.value):void 0})),children:[r.jsx("option",{value:"",children:"Non prcis"}),r.jsx("option",{value:"1",children:"1er trimestre (OctDc)"}),r.jsx("option",{value:"2",children:"2me trimestre (JanMars)"}),r.jsx("option",{value:"3",children:"3me trimestre (AvrJuin)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure standard d'une sance"}),r.jsx("select",{className:"form-control",value:l.dureeSeanceMinutes??55,onChange:$=>o(L=>({...L,dureeSeanceMinutes:Number($.target.value)})),children:df.map($=>r.jsxs("option",{value:$,children:[$," minutes"]},$))})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Description / Contexte"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Contexte de la squence dans le programme, niveau de la classe, prrequis globaux...",value:l.description??"",onChange:$=>o(L=>({...L,description:$.target.value})),rows:3})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Objectif gnral"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:" la fin de cette squence, les lves seront capables de...",value:l.objectifGeneral??"",onChange:$=>o(L=>({...L,objectifGeneral:$.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Prrequis"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Connaissances ncessaires avant cette squence...",value:l.prerequis??"",onChange:$=>o(L=>({...L,prerequis:$.target.value})),rows:2})]})]}),r.jsxs("div",{className:"form-group",style:{marginTop:14},children:[r.jsx("label",{children:"Comptences vises"}),r.jsx("div",{className:"competences-list",children:(l.competences??[]).map(($,L)=>r.jsxs("span",{className:"competence-tag",children:[$,r.jsx("button",{type:"button",className:"competence-tag__remove",onClick:()=>q(L),"aria-label":"Supprimer la comptence",children:""})]},L))}),r.jsxs("div",{className:"competence-input-row",children:[r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Rsoudre une quation du second degr",value:O,onChange:$=>T($.target.value),onKeyDown:$=>$.key==="Enter"&&($.preventDefault(),M())}),r.jsx("button",{type:"button",className:"btn-add-competence",onClick:M,children:"+ Ajouter"})]})]})]}),r.jsxs("section",{className:"editor-section",children:[r.jsx("h2",{className:"editor-section__title",children:" Liens optionnels"}),r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Groupe-classe"}),r.jsxs("select",{className:"form-control",value:l.groupeClasseId??"",onChange:$=>o(L=>({...L,groupeClasseId:$.target.value||void 0})),children:[r.jsx("option",{value:"",children:"Aucun groupe"}),h.map($=>r.jsxs("option",{value:$.id,children:[$.nom,"  ",$.classe]},$.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Cahier de Textes"}),r.jsxs("select",{className:"form-control",value:l.cahierDeTextesId??"",onChange:$=>o(L=>({...L,cahierDeTextesId:$.target.value||void 0})),children:[r.jsx("option",{value:"",children:" Aucun cahier "}),f.filter($=>l.matiere&&l.niveau?$.matiere===l.matiere&&$.classe===l.niveau:l.matiere?$.matiere===l.matiere:l.niveau?$.classe===l.niveau:!0).map($=>r.jsxs("option",{value:$.id,children:[$.titre,"  ",$.classe,"  ",$.anneeScolaire]},$.id))]}),l.niveau&&l.matiere&&f.filter($=>$.classe===l.niveau&&$.matiere===l.matiere).length===0&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#f59e0b",marginTop:6},children:[" Aucun cahier pour ",l.matiere,"  ",l.niveau,"."," ",r.jsx("a",{href:"/prof/cahiers",style:{color:"#2563eb",textDecoration:"underline"},children:"Crer un cahier"})]}),(!l.niveau||!l.matiere)&&f.length>0&&r.jsx("p",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:6},children:" Slectionnez la matire et le niveau pour filtrer les cahiers."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Statut"}),r.jsxs("select",{className:"form-control",value:l.statut??"brouillon",onChange:$=>o(L=>({...L,statut:$.target.value})),children:[r.jsx("option",{value:"brouillon",children:"Brouillon"}),r.jsx("option",{value:"active",children:"En cours"}),r.jsx("option",{value:"terminee",children:"Termine"}),r.jsx("option",{value:"archivee",children:"Archive"})]})]})]})]}),r.jsxs("section",{className:"editor-section",children:[r.jsxs("div",{className:"seances-editor__header",children:[r.jsx("h2",{className:"editor-section__title",style:{margin:0},children:" Sances"}),r.jsxs("span",{className:"seances-editor__count",children:[u.length," sance",u.length>1?"s":"",u.filter($=>$.estEvaluation).length>0&&`  ${u.filter($=>$.estEvaluation).length} val.`]})]}),r.jsx("div",{className:"seances-list",children:u.length===0?r.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",textAlign:"center",padding:"20px 0"},children:"Aucune sance. Utilisez le bouton ci-dessous ou gnrez avec l'IA."}):u.map(($,L)=>r.jsx(YZ,{seance:$,onChange:pe=>F(L,pe),onDelete:()=>B(L),onMoveUp:()=>G(L),onMoveDown:()=>V(L),isFirst:L===0,isLast:L===u.length-1},$.id))}),r.jsx("button",{type:"button",className:"btn-add-seance",style:{marginTop:14},onClick:R,children:"+ Ajouter une sance"})]}),r.jsxs("div",{style:{position:"sticky",bottom:16,display:"flex",justifyContent:"flex-end",gap:10,background:"rgba(248,250,252,0.95)",backdropFilter:"blur(6px)",padding:"12px 0",zIndex:10},children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>e("/prof/sequences"),disabled:S,children:"Annuler"}),r.jsx("button",{type:"button",className:"btn-primary",onClick:Q,disabled:S,children:S?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Enregistrement..."]}):a?" Mettre  jour":" Crer la squence"})]})]})},WZ=({statut:e})=>{const{label:t}=hp[e];return r.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[r.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),t]})},XZ=({sequence:e,cahiers:t,profId:n,onClose:a,onSuccess:l})=>{const[o,u]=g.useState(e.cahierDeTextesId??(t.length===1?t[0].id:"")),[d,f]=g.useState(()=>{const C=new Date().toISOString().split("T")[0],A={};return e.seances.forEach(w=>{A[w.id]=C}),A}),[p,h]=g.useState(()=>{const C={};return e.seances.forEach(A=>{C[A.id]=A.exporterVersCahier&&(!A.entreesCahierIds||A.entreesCahierIds.length===0)}),C}),[v,b]=g.useState(!1),[x,N]=g.useState(null),j=Object.values(p).filter(Boolean).length,S=async()=>{if(!o){N("Veuillez slectionner un Cahier de Textes.");return}if(j===0){N("Slectionnez au moins une sance  exporter.");return}b(!0),N(null);const C={};e.seances.filter(A=>p[A.id]).forEach(A=>{const w=d[A.id];if(w){const E=Oe.fromDate(new Date(w+"T08:00:00"));C[A.id]=E}});try{const A=await PZ({sequenceId:e.id,cahierDeTextesId:o,profId:n,datesParSeance:C});A.erreurs.length>0&&N(`${A.erreurs.length} sance(s) n'ont pas pu tre exportes.`),l(A.nbExportees)}catch(A){const w=A instanceof Error?A.message:"Erreur inconnue";N(`Erreur d'export : ${w}`)}finally{b(!1)}};return g.useEffect(()=>{const C=A=>{A.key==="Escape"&&a()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[a]),r.jsx("div",{className:"export-modal__overlay",onClick:C=>C.target===C.currentTarget&&a(),children:r.jsxs("div",{className:"export-modal",role:"dialog","aria-modal":"true","aria-labelledby":"export-modal-title",children:[r.jsxs("div",{className:"export-modal__header",children:[r.jsx("h2",{className:"export-modal__title",id:"export-modal-title",children:" Exporter vers le Cahier de Textes"}),r.jsx("button",{className:"export-modal__close",onClick:a,"aria-label":"Fermer",children:""})]}),r.jsxs("div",{className:"export-modal__body",children:[r.jsxs("div",{className:"form-group",style:{marginBottom:16},children:[r.jsxs("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:["Cahier de Textes cible ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.length===0?r.jsx("p",{style:{color:"#dc2626",fontSize:"0.875rem"},children:"Aucun Cahier de Textes trouv. Crez-en un d'abord."}):r.jsxs("select",{className:"form-control",value:o,onChange:C=>u(C.target.value),children:[r.jsx("option",{value:"",children:"Slectionner un cahier..."}),t.map(C=>r.jsxs("option",{value:C.id,children:[C.titre,"  ",C.classe," (",C.anneeScolaire,")"]},C.id))]})]}),r.jsx("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:12},children:"Slectionnez les sances  exporter et assignez leur une date. Chaque sance deviendra une entre dans le Cahier de Textes."}),e.seances.map(C=>{const A=(C.entreesCahierIds?.length??0)>0;return r.jsxs("div",{className:"export-seance-row",children:[r.jsx("input",{type:"checkbox",className:"export-seance-row__check",checked:!!p[C.id],onChange:w=>h(E=>({...E,[C.id]:w.target.checked})),id:`export-${C.id}`,"aria-label":`Exporter la sance ${C.numero}`}),r.jsxs("div",{className:"export-seance-row__info",children:[r.jsx("label",{htmlFor:`export-${C.id}`,style:{cursor:"pointer"},children:r.jsxs("div",{className:"export-seance-row__titre",children:[C.numero,". ",C.titre||`Sance ${C.numero}`]})}),r.jsxs("div",{className:"export-seance-row__type",children:[uf[C.typeActivite],"  ",C.dureeMinutes,"min",A&&r.jsx("span",{className:"export-seance-row__exported",style:{marginLeft:6},children:" Dj exporte"})]})]}),r.jsx("input",{type:"date",className:"export-seance-row__date",value:d[C.id]??"",onChange:w=>f(E=>({...E,[C.id]:w.target.value})),disabled:!p[C.id],"aria-label":`Date pour la sance ${C.numero}`})]},C.id)}),x&&r.jsxs("div",{className:"error-banner",style:{marginTop:12},children:[" ",x]})]}),r.jsxs("div",{className:"export-modal__footer",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:a,disabled:v,children:"Annuler"}),r.jsx("button",{type:"button",className:"btn-success",onClick:S,disabled:v||j===0||!o,children:v?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Export en cours..."]}):` Exporter ${j} sance${j>1?"s":""}`})]})]})})},ZZ=()=>{const e=it(),{id:t}=Yn(),{currentUser:n}=rt(),[a,l]=g.useState(null),[o,u]=g.useState([]),[d,f]=g.useState(!0),[p,h]=g.useState(null),[v,b]=g.useState(null),[x,N]=g.useState("seances"),[j,S]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!(!n?.uid||!t)){f(!0);try{const[O,T]=await Promise.all([Wc(t),Fk(n.uid)]);if(!O){h("Squence introuvable.");return}if(O.profId!==n.uid){h("Accs non autoris.");return}l(O),u(T)}catch{h("Erreur de chargement.")}finally{f(!1)}}})()},[n?.uid,t]);const C=async()=>{if(!(!a||!window.confirm(`Supprimer "${a.titre}" ?
Cette action est irrversible.`)))try{await Zk(a.id),e("/prof/sequences")}catch{h("Erreur lors de la suppression.")}},A=async D=>{if(a)try{await MZ(a.id,D),l(O=>O?{...O,statut:D}:null)}catch{h("Erreur de mise  jour du statut.")}},w=D=>{S(!1),b(` ${D} sance${D>1?"s":""} exporte${D>1?"s":""} vers le Cahier de Textes !`),t&&Wc(t).then(O=>O&&l(O)).catch(()=>null),setTimeout(()=>b(null),5e3)};if(d)return r.jsxs("div",{className:"sequence-detail",children:[r.jsx("div",{className:"skeleton",style:{height:28,width:"50%",marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:180,borderRadius:12,marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:400,borderRadius:12}})]});if(p||!a)return r.jsxs("div",{className:"sequence-detail",children:[r.jsxs("div",{className:"error-banner",children:[" ",p??"Squence introuvable."]}),r.jsx("button",{className:"btn-secondary",onClick:()=>e("/prof/sequences"),children:" Retour"})]});const E=vu.find(D=>D.valeur===a.niveau)?.label??a.niveau;return r.jsxs("div",{className:"sequence-detail",children:[j&&r.jsx(XZ,{sequence:a,cahiers:o,profId:n.uid,onClose:()=>S(!1),onSuccess:w}),p&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",p]}),v&&r.jsx("div",{className:"success-banner",role:"status",children:v}),r.jsxs("div",{className:"sequence-detail__header",children:[r.jsxs("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:8},children:[r.jsx("a",{onClick:()=>e("/prof/sequences"),style:{color:"#2563eb",cursor:"pointer",fontWeight:500},children:" Squences"})," / ",a.titre]}),r.jsxs("div",{className:"sequence-detail__header-top",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"sequence-detail__title",children:a.titre}),r.jsxs("div",{className:"sequence-detail__meta",style:{marginTop:8},children:[r.jsx(WZ,{statut:a.statut}),a.genereeParIA&&r.jsx("span",{className:"badge-ia",children:" IA"}),r.jsx("span",{className:"sequence-card__meta-chip",children:a.matiere}),r.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:E}),a.trimestre&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",a.trimestre]}),a.groupeClasseNom&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:[" ",a.groupeClasseNom]})]})]}),r.jsxs("div",{className:"sequence-detail__actions",children:[r.jsx("select",{className:"form-control",style:{width:"auto",fontSize:"0.8rem"},value:a.statut,onChange:D=>A(D.target.value),"aria-label":"Changer le statut",children:Object.entries(hp).map(([D,{label:O}])=>r.jsx("option",{value:D,children:O},D))}),r.jsx("button",{className:"btn-success",onClick:()=>S(!0),title:"Exporter les sances vers le Cahier de Textes",children:" Exporter"}),r.jsx("button",{className:"btn-secondary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Modifier"}),r.jsx("button",{className:"btn-danger",onClick:C,children:""})]})]}),a.objectifGeneral&&r.jsxs("div",{className:"sequence-detail__objectif",children:[r.jsx("strong",{children:" Objectif :"})," ",a.objectifGeneral]}),r.jsxs("div",{style:{display:"flex",gap:16,marginTop:12,flexWrap:"wrap",fontSize:"0.8125rem",color:"#64748b"},children:[r.jsxs("span",{children:[" ",a.seances.length," sances"]}),r.jsxs("span",{children:[" ",a.evaluationsPrevues.length," valuation",a.evaluationsPrevues.length>1?"s":""]}),r.jsxs("span",{children:[" ",a.seances.reduce((D,O)=>D+O.dureeMinutes,0)," min total"]}),a.cahierDeTextesNom&&r.jsxs("span",{children:[" ",a.cahierDeTextesNom]}),a.exporteAt&&r.jsxs("span",{children:[" Export le ",a.exporteAt.toDate().toLocaleDateString("fr-FR")]})]})]}),r.jsxs("div",{className:"sequence-tabs",role:"tablist",children:[r.jsxs("button",{role:"tab",className:`sequence-tab${x==="seances"?" sequence-tab--active":""}`,onClick:()=>N("seances"),"aria-selected":x==="seances",children:[" Sances (",a.seances.length,")"]}),r.jsxs("button",{role:"tab",className:`sequence-tab${x==="evaluations"?" sequence-tab--active":""}`,onClick:()=>N("evaluations"),"aria-selected":x==="evaluations",children:[" valuations (",a.evaluationsPrevues.length,")"]}),r.jsx("button",{role:"tab",className:`sequence-tab${x==="infos"?" sequence-tab--active":""}`,onClick:()=>N("infos"),"aria-selected":x==="infos",children:" Dtails"})]}),x==="seances"&&r.jsx("div",{role:"tabpanel",children:a.seances.length===0?r.jsxs("div",{className:"sequences-empty",children:[r.jsx("span",{className:"sequences-empty__icon",children:""}),r.jsx("p",{className:"sequences-empty__text",children:"Aucune sance planifie"}),r.jsx("button",{className:"btn-primary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Ajouter des sances"})]}):r.jsx("div",{className:"sequence-timeline",children:a.seances.map(D=>r.jsx(JZ,{seance:D},D.id))})}),x==="evaluations"&&r.jsxs("div",{role:"tabpanel",className:"evaluations-panel",children:[r.jsx("h3",{className:"evaluations-panel__title",children:" valuations prvues"}),a.evaluationsPrevues.length===0?r.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:'Aucune valuation marque dans cette squence. Modifiez une sance et cochez "Cette sance est une valuation".'}):a.evaluationsPrevues.map(D=>r.jsxs("div",{className:"evaluation-row",children:[r.jsxs("div",{className:"evaluation-row__numero",children:["S",D.seanceNumero]}),r.jsxs("div",{className:"evaluation-row__info",children:[r.jsx("div",{className:"evaluation-row__titre",children:D.titre}),r.jsxs("div",{className:"evaluation-row__type",children:[bj[D.type],D.datePrevue&&`  ${D.datePrevue.toDate().toLocaleDateString("fr-FR")}`]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"evaluation-row__note",children:["/",D.noteMax]}),r.jsxs("div",{className:"evaluation-row__coeff",children:["Coeff. ",D.coefficient]})]})]},D.id))]}),x==="infos"&&r.jsx("div",{role:"tabpanel",children:r.jsxs("div",{className:"editor-section",children:[a.competences.length>0&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:8},children:"Comptences vises"}),r.jsx("div",{className:"competences-list",children:a.competences.map((D,O)=>r.jsx("span",{className:"competence-tag",children:D},O))})]}),a.prerequis&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Prrequis"}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.prerequis})]}),a.description&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Description"}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.description})]}),r.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:12,fontSize:"0.8rem",color:"#94a3b8"},children:[r.jsxs("p",{children:["Cre le ",a.createdAt.toDate().toLocaleDateString("fr-FR")]}),r.jsxs("p",{children:["Modifie le ",a.updatedAt.toDate().toLocaleDateString("fr-FR")]}),a.genereeParIA&&r.jsx("p",{children:" Gnre avec l'IA Claude"})]})]})})]})},JZ=({seance:e})=>{const[t,n]=g.useState(!1),a=(e.entreesCahierIds?.length??0)>0;return r.jsx("div",{className:`timeline-item${e.estEvaluation?" timeline-item--eval":""}`,children:r.jsxs("div",{className:"timeline-card",children:[r.jsxs("div",{className:"timeline-card__header",onClick:()=>n(l=>!l),style:{cursor:"pointer"},children:[r.jsxs("h3",{className:"timeline-card__title",children:[e.numero,". ",e.titre||`Sance ${e.numero}`]}),r.jsxs("div",{className:"timeline-card__meta",children:[r.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:uf[e.typeActivite]}),r.jsxs("span",{className:"timeline-card__duree",children:[e.dureeMinutes,"min"]}),a&&r.jsx("span",{className:"export-seance-row__exported",children:" Exporte"}),r.jsx("span",{style:{color:"#94a3b8",fontSize:"0.7rem"},children:t?"":""})]})]}),e.objectifSpecifique&&r.jsxs("p",{className:"timeline-card__objectif",children:[" ",e.objectifSpecifique]}),t&&r.jsxs(r.Fragment,{children:[e.contenu&&r.jsx("p",{className:"timeline-card__contenu",style:{marginTop:8},children:e.contenu}),e.ressources.length>0&&r.jsx("div",{className:"timeline-card__ressources",children:e.ressources.map((l,o)=>r.jsx("span",{className:"ressource-chip",children:l},o))}),e.estEvaluation&&e.typeEvaluation&&r.jsxs("div",{style:{marginTop:10,padding:"8px 12px",background:"#fef2f2",borderRadius:6,fontSize:"0.8rem",color:"#dc2626"},children:[" ",bj[e.typeEvaluation],e.noteMax&&`  /${e.noteMax}`,e.coefficient&&`  Coeff. ${e.coefficient}`]})]})]})})},eJ=50*1024*1024,tJ="image/jpeg,image/png,image/gif,image/webp,audio/mpeg,audio/wav,audio/ogg,video/mp4";function rJ(e){return e.startsWith("image/")?"image":e.startsWith("audio/")?"audio":e.startsWith("video/")?"video":"autre"}function tP(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/1024/1024).toFixed(1)} Mo`}const nJ=({src:e,alt:t,onFermer:n})=>r.jsx("div",{className:"image-fullscreen-overlay",onClick:n,role:"dialog","aria-modal":"true","aria-label":"Image en plein cran",children:r.jsx("img",{src:e,alt:t})}),aJ=({pj:e,onSupprimer:t,readonly:n=!1})=>{const[a,l]=g.useState(!1);return r.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",marginBottom:10,background:"#fff"},children:[e.type==="image"&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:e.url,alt:e.nom,className:"media-image",onClick:()=>l(!0),style:{maxWidth:"100%",display:"block"},loading:"lazy"}),a&&r.jsx(nJ,{src:e.url,alt:e.nom,onFermer:()=>l(!1)})]}),e.type==="audio"&&r.jsx("div",{className:"media-player",children:r.jsxs("audio",{controls:!0,preload:"metadata",children:[r.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture audio."]})}),e.type==="video"&&r.jsx("div",{className:"media-player",children:r.jsxs("video",{controls:!0,preload:"none",playsInline:!0,children:[r.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture vido."]})}),(e.type==="pdf"||e.type==="autre")&&r.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",textDecoration:"none",color:"#2563eb"},children:[" ",e.nom]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 12px",background:"#f9fafb",borderTop:"1px solid #f3f4f6"},children:[r.jsxs("span",{style:{fontSize:"0.78rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.nom,e.taille&&`  ${tP(e.taille)}`]}),!n&&t&&r.jsx("button",{type:"button",onClick:()=>t(e.id),title:"Supprimer ce fichier",style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"1rem",padding:"0 4px"},"aria-label":`Supprimer ${e.nom}`,children:""})]})]})},iJ=({piecesJointes:e,entreeId:t,profId:n,onChange:a,readonly:l=!1})=>{const o=g.useRef(null),[u,d]=g.useState(null),[f,p]=g.useState("");async function h(b){const x=b.target.files?.[0];if(!x)return;if(x.size>eJ){p(`Fichier trop volumineux (max 50 Mo). Ce fichier fait ${tP(x.size)}.`);return}p("");const N=`${Date.now()}_${x.name}`,j=`cahiers/${n}/${t}/${N}`,S=Mr(Er,j),C=Mb(S,x);C.on("state_changed",A=>{const w=Math.round(A.bytesTransferred/A.totalBytes*100);d(w)},A=>{p(`Erreur d'envoi : ${A.message}`),d(null)},async()=>{const A=await ca(C.snapshot.ref),w=rJ(x.type),E={id:String(Date.now()),nom:x.name,url:A,type:w,taille:x.size,mimeType:x.type};a([...e,E]),d(null),o.current&&(o.current.value="")})}function v(b){a(e.filter(x=>x.id!==b))}return r.jsxs("section",{"aria-label":"Fichiers mdias",style:{marginTop:20},children:[r.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 12px"},children:" Fichiers mdias"}),e.map(b=>r.jsx(aJ,{pj:b,onSupprimer:v,readonly:l},b.id)),e.length===0&&!l&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun fichier ajout. Formats accepts : images, audio, vido (max 50 Mo)."}),!l&&r.jsxs(r.Fragment,{children:[u!==null&&r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:9999,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${u}%`,background:"#2563eb",transition:"width 0.3s ease"},role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100})}),r.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:"4px 0 0"},children:["Envoi en cours ",u,"%"]})]}),f&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#dc2626",margin:"0 0 8px"},children:[" ",f]}),r.jsx("input",{ref:o,type:"file",accept:tJ,onChange:h,style:{display:"none"},"aria-label":"Choisir un fichier mdia"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o.current?.click(),disabled:u!==null,children:" Ajouter un fichier (image / audio / vido)"}),r.jsx("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:6},children:"Max 50 Mo  JPG, PNG, GIF, WebP, MP3, WAV, OGG, MP4"})]})]})};function sJ(e){return e.toDate().toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}const lJ=()=>{const{cahierId:e}=Yn(),t=it(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState(!0),[f,p]=g.useState(""),[h,v]=g.useState(null);g.useEffect(()=>{async function x(){if(e){d(!0);try{const N=await ZX(e);if(!N){p("Ce cahier n'est pas accessible ou n'existe pas.");return}a(N);const j=await aZ(e);o(j)}catch{p("Une erreur est survenue lors du chargement.")}finally{d(!1)}}}x()},[e]);function b(x){v(N=>N===x?null:x)}return u?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"2rem"},children:""}),r.jsx("p",{children:"Chargement du cahier de textes"})]}):f||!n?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[r.jsx("div",{style:{fontSize:"2.5rem"},children:""}),r.jsx("p",{style:{color:"#dc2626",fontWeight:600},children:f||"Accs non autoris"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>t(-1),style:{marginTop:12},children:" Retour"})]}):r.jsxs("main",{style:{maxWidth:760,margin:"0 auto",padding:"20px 16px"},children:[r.jsxs("header",{className:"eleve-cahier-header",children:[r.jsx("button",{type:"button",onClick:()=>t(-1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff",cursor:"pointer",borderRadius:8,padding:"4px 10px",fontSize:"0.85rem",marginBottom:10,display:"inline-flex",alignItems:"center",gap:4},children:" Retour"}),r.jsx("h1",{children:n.titre}),r.jsxs("p",{children:[n.matiere,"  ",n.classe,"  ",n.anneeScolaire]}),r.jsx("span",{className:"badge-lecture-seule",children:" Lecture seule  Sances ralises"})]}),n.description&&r.jsx("div",{style:{background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:10,padding:14,marginBottom:20,fontSize:"0.9rem",color:"#0c4a6e"},children:n.description}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:16},children:l.length===0?"Aucune sance ralise pour l'instant.":`${l.length} sance${l.length>1?"s":""} ralise${l.length>1?"s":""}`}),l.length===0&&r.jsxs("div",{className:"eleve-vide",children:[r.jsx("span",{className:"emoji",children:""}),r.jsx("p",{children:"Votre professeur n'a pas encore enregistr de sance ralise."}),r.jsx("p",{style:{fontSize:"0.8rem"},children:"Revenez plus tard !"})]}),l.map(x=>{const N=h===x.id,j=(x.piecesJointes?.length??0)>0,S=(x.liens?.length??0)>0,C=(x.ebooksLies?.length??0)>0;return r.jsxs("article",{className:"seance-card-eleve",children:[r.jsxs("button",{type:"button",onClick:()=>b(x.id),style:{width:"100%",background:"none",border:"none",cursor:"pointer",textAlign:"left",padding:0},"aria-expanded":N,"aria-controls":`seance-corps-${x.id}`,children:[r.jsxs("div",{className:"seance-card-eleve-date",children:[" ",sJ(x.date),x.heureDebut?`  ${x.heureDebut}${x.heureFin?`  ${x.heureFin}`:""}`:""]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0},children:x.chapitre}),r.jsx("span",{style:{fontSize:"1.1rem",transition:"transform 0.2s",transform:N?"rotate(180deg)":"rotate(0)",display:"inline-block"},"aria-hidden":"true",children:""})]}),r.jsxs("div",{style:{display:"flex",gap:6,marginTop:6,flexWrap:"wrap"},children:[S&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#eff6ff",color:"#2563eb",padding:"2px 8px",borderRadius:9999},children:" Ressources"}),C&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:9999},children:" Ebooks"}),j&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#f0fdf4",color:"#16a34a",padding:"2px 8px",borderRadius:9999},children:" Mdias"})]})]}),N&&r.jsxs("div",{id:`seance-corps-${x.id}`,style:{marginTop:14,borderTop:"1px solid #f3f4f6",paddingTop:14},children:[x.objectifs&&r.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8,padding:10,fontSize:"0.875rem",color:"#166534",marginBottom:12},children:[r.jsx("strong",{children:" Objectifs :"})," ",x.objectifs]}),r.jsx("div",{className:"seance-card-eleve-contenu",children:x.contenu}),S&&r.jsx(Kk,{liens:x.liens??[],onChange:()=>{},readonly:!0}),C&&r.jsx(Wk,{ebooksLies:x.ebooksLies??[],onChange:()=>{},readonly:!0}),j&&r.jsx(iJ,{piecesJointes:x.piecesJointes??[],entreeId:x.id,profId:"",onChange:()=>{},readonly:!0})]})]},x.id)})]})},oJ=()=>{const{currentUser:e}=rt(),t=e?.uid||"",n=e?.displayName||"Parent",[a,l]=g.useState([]),[o,u]=g.useState(null),[d,f]=g.useState(null),[p,h]=g.useState(!0),[v,b]=g.useState(!1),[x,N]=g.useState(null),[j,S]=g.useState(!1),[C,A]=g.useState(""),[w,E]=g.useState(!1),[D,O]=g.useState(null),[T,P]=g.useState(null),[I,R]=g.useState("apercu");g.useEffect(()=>{F()},[t]),g.useEffect(()=>{o&&B(o)},[o]);const F=async()=>{try{h(!0),N(null);const M=await VW(t);l(M),M.length===1&&u(M[0].enfantId)}catch(M){N("Erreur lors du chargement des enfants."),console.error(M)}finally{h(!1)}},B=async M=>{try{b(!0),N(null);const q=await KW(t,M);f(q)}catch(q){N(q.message||"Erreur lors du chargement du suivi."),f(null)}finally{b(!1)}},G=async M=>{if(M.preventDefault(),O(null),P(null),!C.trim()){O("Veuillez saisir le code d'invitation.");return}try{E(!0);const q=await QW(t,C);P(`${q.enfantNom} a t ajout avec succs !`),A(""),S(!1),await F(),u(q.enfantId)}catch(q){O(q.message||"Erreur lors de la liaison.")}finally{E(!1)}},V=async M=>{if(window.confirm(`tes-vous sr de vouloir retirer ${M.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await YW(M.id,t),o===M.enfantId&&(u(null),f(null)),await F()}catch(X){N(X.message||"Erreur lors de la suppression.")}};return p?r.jsxs("div",{className:"parent-loading",children:[r.jsx("div",{className:"parent-spinner"}),r.jsx("p",{children:"Chargement de votre espace parent..."})]}):r.jsxs("div",{className:"parent-dashboard",children:[r.jsxs("header",{className:"parent-header",children:[r.jsxs("div",{className:"parent-header-info",children:[r.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),r.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",r.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{S(!j),O(null),P(null)},children:" Ajouter un enfant"})]}),x&&r.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[r.jsxs("span",{children:[" ",x]}),r.jsx("button",{onClick:()=>N(null),children:""})]}),T&&r.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[r.jsxs("span",{children:[" ",T]}),r.jsx("button",{onClick:()=>P(null),children:""})]}),j&&r.jsxs("div",{className:"parent-form-liaison",children:[r.jsx("h3",{children:" Lier un enfant  votre compte"}),r.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),r.jsxs("form",{onSubmit:G,className:"parent-form",children:[r.jsxs("div",{className:"parent-form-group",children:[r.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),r.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:C,onChange:M=>A(M.target.value.toUpperCase()),maxLength:14,disabled:w,className:"parent-input"})]}),D&&r.jsxs("p",{className:"parent-form-erreur",children:[" ",D]}),r.jsxs("div",{className:"parent-form-actions",children:[r.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:w,children:w?"Vrification...":" Valider"}),r.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>S(!1),children:"Annuler"})]})]})]}),a.length===0?r.jsxs("div",{className:"parent-empty-state",children:[r.jsx("div",{className:"parent-empty-icon",children:""}),r.jsx("h2",{children:"Aucun enfant li"}),r.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>S(!0),children:" Ajouter mon premier enfant"})]}):r.jsxs("div",{className:"parent-content",children:[r.jsxs("aside",{className:"parent-sidebar",children:[r.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),r.jsx("ul",{className:"parent-enfants-liste",children:a.map(M=>r.jsxs("li",{className:`parent-enfant-card ${o===M.enfantId?"parent-enfant-actif":""}`,onClick:()=>u(M.enfantId),children:[r.jsx("div",{className:"parent-enfant-avatar",children:M.enfantNom.charAt(0).toUpperCase()}),r.jsxs("div",{className:"parent-enfant-info",children:[r.jsx("span",{className:"parent-enfant-nom",children:M.enfantNom}),M.enfantClasse&&r.jsx("span",{className:"parent-enfant-classe",children:M.enfantClasse})]}),r.jsx("button",{className:"parent-enfant-supprimer",onClick:q=>{q.stopPropagation(),V(M)},title:"Retirer cet enfant",children:""})]},M.id))})]}),r.jsx("main",{className:"parent-main",children:o?v?r.jsxs("div",{className:"parent-loading",children:[r.jsx("div",{className:"parent-spinner"}),r.jsx("p",{children:"Chargement du suivi..."})]}):d?r.jsxs("div",{className:"parent-dashboard-detail",children:[r.jsxs("div",{className:"parent-enfant-header",children:[r.jsxs("div",{className:"parent-enfant-header-info",children:[r.jsx("h2",{children:d.enfant.nom}),d.enfant.classe&&r.jsx("span",{className:"parent-badge",children:d.enfant.classe}),d.enfant.derniereConnexion&&r.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",jx(d.enfant.derniereConnexion)]})]}),r.jsx("p",{className:"parent-message-motivation",children:tX(d.scoreGlobal)})]}),r.jsxs("div",{className:"parent-indicateurs",children:[r.jsxs("div",{className:"parent-card parent-card-score",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Score Global"}),r.jsxs("span",{className:`parent-card-value parent-score-${d.scoreGlobal>=60?"bon":d.scoreGlobal>=40?"moyen":"bas"}`,children:[d.scoreGlobal,"/100"]})]})]}),r.jsxs("div",{className:"parent-card parent-card-streak",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Streak"}),r.jsxs("span",{className:"parent-card-value",children:[d.streak.actuel," jour",d.streak.actuel>1?"s":""]})]})]}),r.jsxs("div",{className:"parent-card parent-card-lacunes",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Lacunes"}),r.jsxs("span",{className:"parent-card-value",children:[d.lacunes.length," matire",d.lacunes.length>1?"s":""]})]})]}),r.jsxs("div",{className:"parent-card parent-card-objectifs",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Objectifs"}),r.jsxs("span",{className:"parent-card-value",children:[d.objectifs.filter(M=>M.statut==="atteint").length,"/",d.objectifs.length]})]})]})]}),r.jsxs("div",{className:"parent-section parent-section-semaine",children:[r.jsx("h3",{children:" Activit de la semaine"}),r.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((M,q)=>r.jsxs("div",{className:`parent-jour ${d.streak.semaineCourante[q]?"parent-jour-actif":"parent-jour-inactif"}`,children:[r.jsx("span",{className:"parent-jour-label",children:M}),r.jsx("span",{className:"parent-jour-icon",children:d.streak.semaineCourante[q]?"":""})]},M))})]}),r.jsxs("div",{className:"parent-onglets",children:[r.jsx("button",{className:`parent-onglet ${I==="apercu"?"parent-onglet-actif":""}`,onClick:()=>R("apercu"),children:" Aperu"}),r.jsxs("button",{className:`parent-onglet ${I==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>R("lacunes"),children:[" Lacunes (",d.lacunes.length,")"]}),r.jsxs("button",{className:`parent-onglet ${I==="alertes"?"parent-onglet-actif":""}`,onClick:()=>R("alertes"),children:[" Alertes (",d.alertes.length,")"]}),r.jsx("button",{className:`parent-onglet ${I==="resume"?"parent-onglet-actif":""}`,onClick:()=>R("resume"),children:" Rsum"})]}),r.jsxs("div",{className:"parent-onglet-contenu",children:[I==="apercu"&&r.jsxs("div",{className:"parent-tab-apercu",children:[r.jsxs("div",{className:"parent-section",children:[r.jsx("h3",{children:" Derniers quiz passs"}),d.derniersQuiz.length===0?r.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):r.jsx("div",{className:"parent-quiz-liste",children:d.derniersQuiz.map((M,q)=>r.jsxs("div",{className:`parent-quiz-item ${M.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[r.jsxs("div",{className:"parent-quiz-info",children:[r.jsx("span",{className:"parent-quiz-discipline",children:M.disciplineNom}),r.jsx("span",{className:"parent-quiz-titre",children:M.quizTitre})]}),r.jsxs("div",{className:"parent-quiz-score",children:[r.jsxs("span",{className:`parent-quiz-note ${M.reussi?"note-ok":"note-ko"}`,children:[M.noteSur20,"/20"]}),r.jsx("span",{className:"parent-quiz-statut",children:M.reussi?" Russi":" chou"})]}),r.jsx("span",{className:"parent-quiz-date",children:jx(M.datePassage)})]},q))})]}),r.jsxs("div",{className:"parent-section",children:[r.jsx("h3",{children:" Objectifs de la semaine"}),d.objectifs.length===0?r.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):r.jsx("div",{className:"parent-objectifs-liste",children:d.objectifs.map((M,q)=>r.jsxs("div",{className:"parent-objectif-item",children:[r.jsxs("div",{className:"parent-objectif-header",children:[r.jsx("span",{className:"parent-objectif-titre",children:M.titre}),r.jsx("span",{className:`parent-objectif-statut parent-statut-${M.statut}`,children:M.statut==="atteint"?" Atteint":M.statut==="en_cours"?" En cours":M.statut==="echoue"?" chou":" Non commenc"})]}),r.jsx("div",{className:"parent-progress-bar",children:r.jsx("div",{className:`parent-progress-fill parent-progress-${M.statut}`,style:{width:`${Math.min(M.progression/M.cible*100,100)}%`}})}),r.jsxs("span",{className:"parent-objectif-detail",children:[M.progression,"/",M.cible]})]},q))})]})]}),I==="lacunes"&&r.jsx("div",{className:"parent-tab-lacunes",children:d.lacunes.length===0?r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):r.jsx("div",{className:"parent-lacunes-liste",children:d.lacunes.map((M,q)=>r.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:of(M.niveauUrgence)},children:[r.jsxs("div",{className:"parent-lacune-header",children:[r.jsx("span",{className:"parent-lacune-discipline",children:M.disciplineNom}),r.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:of(M.niveauUrgence),color:"#fff"},children:kk(M.niveauUrgence)})]}),r.jsxs("div",{className:"parent-lacune-details",children:[r.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",r.jsxs("strong",{children:[M.moyenne,"/20"]})]}),r.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",Pk(M.tendance)," ",M.tendance==="hausse"?"En hausse":M.tendance==="baisse"?"En baisse":"Stable"]})]}),r.jsx("p",{className:"parent-lacune-conseil",children:M.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":M.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},q))})}),I==="alertes"&&r.jsx("div",{className:"parent-tab-alertes",children:d.alertes.length===0?r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):r.jsx("div",{className:"parent-alertes-liste",children:d.alertes.map((M,q)=>r.jsxs("div",{className:`parent-alerte-item parent-alerte-${M.niveau}`,children:[r.jsxs("div",{className:"parent-alerte-header",children:[r.jsx("span",{className:"parent-alerte-titre",children:M.titre}),r.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:JW(M.niveau),color:"#fff"},children:eX(M.type)})]}),r.jsx("p",{className:"parent-alerte-message",children:M.message}),r.jsx("span",{className:"parent-alerte-date",children:jx(M.dateCreation)})]},q))})}),I==="resume"&&d.resume&&r.jsxs("div",{className:"parent-tab-resume",children:[r.jsxs("div",{className:"parent-resume-header",children:[r.jsxs("h3",{children:[" Rsum : ",d.resume.semaine]}),r.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",d.resume.scoreGlobal,"/100"," ",PE(d.resume.evolutionScore)]})]}),r.jsxs("div",{className:"parent-resume-stats",children:[r.jsxs("div",{className:"parent-resume-stat",children:[r.jsx("span",{className:"parent-resume-stat-value",children:d.resume.nombreQuizSemaine}),r.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.joursActifsSemaine,"/7"]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.tempsEstimeMinutes," min"]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.objectifsAtteints,"/",d.resume.objectifsTotal]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),d.resume.evolutionDisciplines.length>0&&r.jsxs("div",{className:"parent-section",children:[r.jsx("h4",{children:" volution par matire"}),r.jsx("div",{className:"parent-evolution-liste",children:d.resume.evolutionDisciplines.map((M,q)=>r.jsxs("div",{className:"parent-evolution-item",children:[r.jsx("span",{className:"parent-evolution-discipline",children:M.disciplineNom}),r.jsxs("div",{className:"parent-evolution-scores",children:[r.jsxs("span",{className:"parent-evolution-prec",children:[M.moyenneSemainePrecedente,"/20"]}),r.jsx("span",{className:"parent-evolution-fleche",children:PE(M.evolution)}),r.jsxs("span",{className:"parent-evolution-courante",children:[M.moyenneSemaineCourante,"/20"]}),r.jsxs("span",{className:`parent-evolution-ecart ${M.ecart>0?"ecart-positif":M.ecart<0?"ecart-negatif":""}`,children:["(",M.ecart>0?"+":"",M.ecart,")"]})]})]},q))})]}),d.resume.disciplinesEnDifficulte.length>0&&r.jsxs("div",{className:"parent-section parent-section-warning",children:[r.jsx("h4",{children:" Matires ncessitant une attention"}),r.jsx("ul",{className:"parent-disciplines-difficulte",children:d.resume.disciplinesEnDifficulte.map((M,q)=>r.jsx("li",{children:M},q))})]})]}),I==="resume"&&!d.resume&&r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):r.jsxs("div",{className:"parent-erreur-dashboard",children:[r.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&B(o),children:" Ressayer"})]}):r.jsx("div",{className:"parent-select-enfant",children:r.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},rP="https://api.pedaclic.sn",cJ=12e4,uJ=1,Gl={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},dJ={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},Xd={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function mJ(e,t,n=cJ){const a=new AbortController,l=setTimeout(()=>a.abort(),n);try{const o=await fetch(e,{...t,signal:a.signal});return clearTimeout(l),o}catch(o){throw clearTimeout(l),o.name==="AbortError"?new Error(`La gnration a pris trop de temps (>${n/1e3}s). Le serveur est peut-tre surcharg. Veuillez ressayer dans quelques instants.`):o}}async function nP(e,t=uJ){try{return await e()}catch(n){if(t<=0)throw n;return console.warn(`[aiGeneratorService] chec, nouvelle tentative dans 3s... (${t} restante(s))`),await new Promise(a=>setTimeout(a,3e3)),nP(e,t-1)}}async function VE(){try{await fetch(`${rP}/health`,{method:"GET"}),console.log("[aiGeneratorService] Ping Railway OK")}catch{}}async function fJ(e){const t=JSON.stringify(e),n={method:"POST",headers:{"Content-Type":"application/json"},body:t},a=await nP(()=>mJ(`${rP}/api/generate`,n)).catch(o=>{throw console.error("[aiGeneratorService] Erreur gnration:",o),o instanceof TypeError&&o.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):o});if(!a.ok){const u=(await a.json().catch(()=>({}))).error||`Erreur serveur (${a.status})`;throw new Error(u)}const l=await a.json();if(!l.success)throw new Error(l.error||"La gnration a chou.");return l}async function pJ(e,t,n,a){try{const l=await kt(Ne(W,"generated_content"),{userId:e,type:t.type,discipline:t.discipline,disciplineId:a,classe:t.classe,chapitre:t.chapitre,content:n,options:t.options||null,createdAt:Oe.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",l.id),l.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",l),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function hJ(e,t,n,a){try{const l=n.map((d,f)=>({id:`q_${Date.now()}_${f}`,question:d.question,options:d.options,reponseCorrecte:d.reponseCorrecte,explication:d.explication||"",difficulte:d.difficulte||"moyen",points:d.points||2})),o={disciplineId:a,titre:`Quiz IA  ${t.chapitre}`,description:`Quiz auto-gnr pour ${t.discipline} (${t.classe})  Chapitre : ${t.chapitre}`,questions:l,duree:15,isPremium:!0,noteMinimale:10,auteurId:e,source:"ia_generator",createdAt:Oe.now()},u=await kt(Ne(W,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",u.id),u.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",l),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function YE(e,t=20){try{const n=De(Ne(W,"generated_content"),we("userId","==",e),Xe("createdAt","desc")),a=await ze(n),l=[];return a.forEach(o=>{l.length<t&&l.push({id:o.id,...o.data()})}),l}catch(n){throw console.error("[aiGeneratorService] Erreur chargement historique:",n),new Error("Erreur lors du chargement de l'historique.")}}async function vJ(e){try{await pn(je(W,"generated_content",e)),console.log("[aiGeneratorService] Contenu supprim:",e)}catch(t){throw console.error("[aiGeneratorService] Erreur suppression:",t),new Error("Erreur lors de la suppression du contenu.")}}const gJ=["6me","5me","4me","3me","2nde","1re","Terminale"],xJ=[30,45,60,90,120],bJ=()=>{const{currentUser:e}=rt(),[t,n]=g.useState(1),[a,l]=g.useState([]),[o,u]=g.useState(null),[d,f]=g.useState(""),[p,h]=g.useState(""),[v,b]=g.useState(""),[x,N]=g.useState(null),[j,S]=g.useState({}),[C,A]=g.useState(!1),[w,E]=g.useState(null),[D,O]=g.useState(null),[T,P]=g.useState(!1),[I,R]=g.useState(!1),[F,B]=g.useState(null),[G,V]=g.useState(!1),[M,q]=g.useState([]),[X,Q]=g.useState(!1),[$,L]=g.useState(!0),pe=g.useMemo(()=>{const Z=new Map;return a.forEach(_e=>{Z.has(_e.nom)||Z.set(_e.nom,_e)}),Array.from(Z.values())},[a]);g.useEffect(()=>{(async()=>{try{L(!0);const _e=De(Ne(W,"disciplines"),Xe("nom")),Fe=await ze(_e),Ve=[];Fe.forEach(We=>{const Ft=We.data();Ft.nom&&Ft.nom.trim()&&Ve.push({id:We.id,nom:Ft.nom||"",classe:Ft.classe||"",niveau:Ft.niveau||""})}),l(Ve)}catch(_e){console.error("[AIGenerator] Erreur chargement disciplines:",_e),O("Impossible de charger les disciplines.")}finally{L(!1)}})()},[]);const te=Z=>{u(Z),O(null)},de=()=>{const Z=[];if(o||Z.push("discipline"),d||Z.push("classe"),(!p||p<1)&&Z.push("dure de la leon"),Z.length>0){O(`Champs requis manquants : ${Z.join(", ")}`);return}n(2),O(null)},me=()=>{if(!v.trim()){O("Veuillez saisir le titre du chapitre.");return}n(3),O(null)},xe=Z=>{N(Z),n(4),O(null)},Y=()=>{t>1&&(n(Z=>Z-1),O(null),t===5&&(E(null),R(!1),B(null)))},he=()=>{n(1),u(null),f(""),h(""),b(""),N(null),S({}),E(null),O(null),R(!1),B(null)},Pe=async()=>{if(!o||!x||!v.trim()||!d){O("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}A(!0),O(null);try{const Z={...j,duree:typeof p=="number"?p:void 0},_e={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:Object.keys(Z).length>0?Z:void 0},Fe=await fJ(_e);E(Fe),n(5)}catch(Z){const _e=Z instanceof Error?Z.message:"Erreur inconnue";O(_e)}finally{A(!1)}},se=async()=>{if(!(!e||!w||!o||!x)){P(!0),O(null);try{let Z;const Fe=a.find(We=>We.nom===o.nom&&We.classe===d)?.id||o.id,Ve={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:{...j,duree:typeof p=="number"?p:void 0}};w.type==="quiz"&&w.data.questions?Z=await hJ(e.uid,Ve,w.data.questions,Fe):Z=await pJ(e.uid,Ve,w.data.content||"",Fe),B(Z),R(!0);try{const We=await YE(e.uid);q(We)}catch{}}catch(Z){const _e=Z instanceof Error?Z.message:"Erreur de sauvegarde";O(_e)}finally{P(!1)}}},J=async()=>{if(e){Q(!0);try{const Z=await YE(e.uid);q(Z),V(!0)}catch(Z){console.error("[AIGenerator] Erreur historique:",Z)}finally{Q(!1)}}},H=async Z=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await vJ(Z),q(_e=>_e.filter(Fe=>Fe.id!==Z))}catch(_e){console.error("[AIGenerator] Erreur suppression:",_e)}},ce=g.useCallback(Z=>{if(!Z)return"";let _e=Z.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return _e=_e.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,Fe=>"<ul>"+Fe.replace(/<br \/>/g,"")+"</ul>"),`<p>${_e}</p>`},[]);return e?e.isPremium?r.jsxs("div",{className:"ai-generator",children:[r.jsxs("div",{className:"ai-generator__header",children:[r.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),r.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),r.jsxs("div",{className:"ai-generator__header-actions",children:[r.jsx("button",{className:"btn btn--outline btn--sm",onClick:J,disabled:X,children:X?" Chargement...":" Historique"}),t>1&&r.jsx("button",{className:"btn btn--outline btn--sm",onClick:he,children:" Recommencer"})]})]}),r.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(Z=>r.jsxs("div",{className:`ai-generator__step-indicator ${Z===t?"ai-generator__step-indicator--active":""} ${Z<t?"ai-generator__step-indicator--done":""}`,children:[r.jsx("span",{className:"ai-generator__step-number",children:Z<t?"":Z}),r.jsxs("span",{className:"ai-generator__step-label",children:[Z===1&&"Paramtres",Z===2&&"Chapitre",Z===3&&"Type",Z===4&&"Options",Z===5&&"Rsultat"]})]},Z))}),D&&r.jsxs("div",{className:"ai-generator__error",children:[r.jsx("span",{className:"ai-generator__error-icon",children:""}),D,r.jsx("button",{className:"ai-generator__error-close",onClick:()=>O(null),children:""})]}),r.jsxs("div",{className:"ai-generator__content",children:[t===1&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{className:"ai-generator__label",children:["Discipline ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),$?r.jsxs("div",{className:"ai-generator__loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des disciplines..."})]}):pe.length===0?r.jsx("div",{className:"ai-generator__empty",children:r.jsx("p",{children:"Aucune discipline disponible."})}):r.jsx("div",{className:"ai-generator__discipline-grid",children:pe.map(Z=>r.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===Z.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>te(Z),children:r.jsx("span",{className:"ai-generator__discipline-name",children:Z.nom})},Z.id))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{className:"ai-generator__label",children:["Classe ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),r.jsx("div",{className:"ai-generator__classe-grid",children:gJ.map(Z=>r.jsx("button",{className:`ai-generator__classe-btn ${d===Z?"ai-generator__classe-btn--selected":""}`,onClick:()=>{f(Z),O(null)},children:Z},Z))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),r.jsxs("div",{className:"ai-generator__duree-group",children:[r.jsx("div",{className:"ai-generator__duree-presets",children:xJ.map(Z=>r.jsxs("button",{className:`ai-generator__duree-btn ${p===Z?"ai-generator__duree-btn--selected":""}`,onClick:()=>{h(Z),O(null)},children:[Z," min"]},Z))}),r.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:p,onChange:Z=>{const _e=parseInt(Z.target.value);h(isNaN(_e)?"":_e),O(null)},placeholder:"Autre dure..."})]})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("div",{})," ",r.jsx("button",{className:"btn btn--primary",onClick:de,disabled:!o||!d||!p,children:"Continuer "})]})]}),t===2&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),r.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:v,onChange:Z=>b(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&me(),autoFocus:!0})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("button",{className:"btn btn--outline",onClick:Y,children:" Retour"}),r.jsx("button",{className:"btn btn--primary",onClick:me,disabled:!v.trim(),children:"Continuer "})]})]}),t===3&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v})]}),r.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(Gl).map(Z=>r.jsxs("button",{className:"ai-generator__type-card",onClick:()=>xe(Z),children:[r.jsx("span",{className:"ai-generator__type-icon",children:Xd[Z]}),r.jsx("span",{className:"ai-generator__type-name",children:Gl[Z]}),r.jsx("span",{className:"ai-generator__type-desc",children:dJ[Z]})]},Z))}),r.jsx("div",{className:"ai-generator__nav",children:r.jsx("button",{className:"btn btn--outline",onClick:Y,children:" Retour"})})]}),t===4&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v}),r.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Xd[x]," ",x&&Gl[x]]})]}),r.jsxs("div",{className:"ai-generator__options",children:[r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),r.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(Z=>r.jsxs("label",{className:"ai-generator__radio",children:[r.jsx("input",{type:"radio",name:"difficulte",value:Z,checked:j.difficulte===Z,onChange:()=>S(_e=>({..._e,difficulte:Z}))}),r.jsxs("span",{className:"ai-generator__radio-label",children:[Z==="facile"&&" Facile",Z==="moyen"&&" Moyen",Z==="difficile"&&" Difficile"]})]},Z))})]}),x==="sujet_examen"&&r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),r.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(Z=>r.jsxs("label",{className:"ai-generator__radio",children:[r.jsx("input",{type:"radio",name:"typeExamen",value:Z,checked:j.typeExamen===Z,onChange:()=>S(_e=>({..._e,typeExamen:Z}))}),r.jsx("span",{className:"ai-generator__radio-label",children:Z})]},Z))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),r.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:j.objectifs||"",onChange:Z=>S(_e=>({..._e,objectifs:Z.target.value||void 0}))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),r.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:j.consignesSpeciales||"",onChange:Z=>S(_e=>({..._e,consignesSpeciales:Z.target.value||void 0}))})]})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("button",{className:"btn btn--outline",onClick:Y,children:" Retour"}),r.jsx("button",{className:"btn btn--primary btn--lg",onClick:Pe,disabled:C,children:C?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),C&&r.jsxs("div",{className:"ai-generator__generating",children:[r.jsxs("div",{className:"ai-generator__generating-animation",children:[r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""})]}),r.jsxs("p",{children:["L'IA rdige votre"," ",x&&Gl[x].toLowerCase(),"..."]}),r.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),t===5&&w&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),r.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Xd[x]," ",x&&Gl[x]]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v})]}),r.jsxs("div",{className:"ai-generator__preview",children:[r.jsxs("div",{className:"ai-generator__preview-header",children:[r.jsx("h3",{children:"Prvisualisation"}),r.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const Z=w.type==="quiz"?JSON.stringify(w.data.questions,null,2):w.data.content||"";navigator.clipboard.writeText(Z),alert("Contenu copi dans le presse-papier !")},children:" Copier"})]}),r.jsx("div",{className:"ai-generator__preview-body",children:w.type==="quiz"&&w.data.questions?r.jsxs("div",{className:"ai-generator__quiz-preview",children:[r.jsxs("p",{className:"ai-generator__quiz-count",children:[w.data.questions.length," questions gnres"]}),w.data.questions.map((Z,_e)=>r.jsxs("div",{className:"ai-generator__quiz-item",children:[r.jsxs("div",{className:"ai-generator__quiz-question",children:[r.jsxs("strong",{children:["Q",_e+1,"."]})," ",Z.question,r.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${Z.difficulte}`,children:Z.difficulte})]}),r.jsx("div",{className:"ai-generator__quiz-options",children:Z.options.map((Fe,Ve)=>r.jsxs("div",{className:`ai-generator__quiz-option ${Ve===Z.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[r.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+Ve)}),Fe,Ve===Z.reponseCorrecte&&" "]},Ve))}),Z.explication&&r.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",Z.explication]})]},_e))]}):r.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:ce(w.data.content||"")}})})]}),r.jsxs("div",{className:"ai-generator__actions",children:[I?r.jsxs("div",{className:"ai-generator__save-success",children:[r.jsx("span",{children:" Sauvegard avec succs !"}),w.type==="quiz"&&F&&r.jsx(Le,{to:`/quiz/${F}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):r.jsx("button",{className:"btn btn--primary btn--lg",onClick:se,disabled:T,children:T?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):r.jsx(r.Fragment,{children:" Sauvegarder dans PedaClic"})}),r.jsx("button",{className:"btn btn--outline",onClick:he,children:" Nouvelle gnration"})]})]})]}),G&&r.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>V(!1),children:r.jsxs("div",{className:"ai-generator__modal",onClick:Z=>Z.stopPropagation(),children:[r.jsxs("div",{className:"ai-generator__modal-header",children:[r.jsx("h2",{children:" Historique des gnrations"}),r.jsx("button",{className:"ai-generator__modal-close",onClick:()=>V(!1),children:""})]}),r.jsx("div",{className:"ai-generator__modal-body",children:M.length===0?r.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):r.jsx("div",{className:"ai-generator__history-list",children:M.map(Z=>r.jsxs("div",{className:"ai-generator__history-item",children:[r.jsxs("div",{className:"ai-generator__history-info",children:[r.jsxs("span",{className:"ai-generator__history-type",children:[Xd[Z.type]," ",Gl[Z.type]]}),r.jsxs("span",{className:"ai-generator__history-details",children:[Z.discipline," (",Z.classe,")  ",Z.chapitre]}),r.jsx("span",{className:"ai-generator__history-date",children:Z.createdAt?.toDate?Z.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),r.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>Z.id&&H(Z.id),title:"Supprimer",children:""})]},Z.id))})})]})})]}):r.jsx("div",{className:"ai-generator",children:r.jsxs("div",{className:"ai-generator__gate",children:[r.jsx("div",{className:"ai-generator__gate-icon",children:""}),r.jsx("h2",{children:"Fonctionnalit Premium"}),r.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),r.jsxs("div",{className:"ai-generator__gate-price",children:[r.jsx("span",{className:"price",children:"2 000 FCFA"}),r.jsx("span",{className:"period",children:"/mois"})]}),r.jsx(Le,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):r.jsx("div",{className:"ai-generator",children:r.jsxs("div",{className:"ai-generator__gate",children:[r.jsx("div",{className:"ai-generator__gate-icon",children:""}),r.jsx("h2",{children:"Connexion requise"}),r.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),r.jsx(Le,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},Fi={manuel:"Manuels scolaires",annale:"Annales corriges",guide:"Guides de rvision",litterature:"Culture gnrale & Littrature",fiche:"Fiches de lectures"},Gi={manuel:"",annale:"",guide:"",litterature:"",fiche:""},li="ebooks";async function yJ(){try{const e=De(Ne(W,li),we("isActive","==",!0),Xe("ordre","asc"));return(await ze(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks:",e),e}}async function jJ(){try{const e=De(Ne(W,li),Xe("ordre","asc"));return(await ze(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks admin:",e),e}}async function NJ(e){try{const t=await Mt(je(W,li,e));return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||null}:null}catch(t){throw console.error(" Erreur rcupration ebook:",t),t}}function _J(e,t){let n=[...e];if(t.categorie&&t.categorie!=="all"&&(n=n.filter(a=>a.categorie===t.categorie)),t.niveau&&t.niveau!=="all"&&(n=n.filter(a=>a.niveau===t.niveau)),t.classe&&t.classe!=="all"&&(n=n.filter(a=>a.classe===t.classe||a.classe==="all")),t.matiere&&(n=n.filter(a=>a.matiere?.toLowerCase().includes(t.matiere.toLowerCase()))),t.recherche){const a=t.recherche.toLowerCase();n=n.filter(l=>l.titre.toLowerCase().includes(a)||l.auteur.toLowerCase().includes(a)||l.description.toLowerCase().includes(a)||l.tags?.some(o=>o.toLowerCase().includes(a)))}return n}async function SJ(e,t,n,a,l){try{const o=Mr(Er,`ebooks/pdf/${Date.now()}_${t.name}`);await Es(o,t);const u=await ca(o);let d="";if(n){const v=Mr(Er,`ebooks/covers/${Date.now()}_${n.name}`);await Es(v,n),d=await ca(v)}let f="";if(a){const v=Mr(Er,`ebooks/previews/${Date.now()}_${a.name}`);await Es(v,a),f=await ca(v)}const p={...e,fichierURL:u,couvertureURL:d,aperuURL:f,tailleFichier:t.size,nombreTelechargements:0,nombreVues:0,uploadedBy:l||"admin",createdAt:yt(),updatedAt:yt()},h=await kt(Ne(W,li),p);return console.log(` Ebook ajout : ${e.titre} (ID: ${h.id})`),h.id}catch(o){throw console.error(" Erreur ajout ebook:",o),o}}async function wJ(e,t,n,a,l){try{const o={...t,updatedAt:yt()};if(n){const u=Mr(Er,`ebooks/pdf/${Date.now()}_${n.name}`);await Es(u,n),o.fichierURL=await ca(u),o.tailleFichier=n.size}if(a){const u=Mr(Er,`ebooks/covers/${Date.now()}_${a.name}`);await Es(u,a),o.couvertureURL=await ca(u)}if(l){const u=Mr(Er,`ebooks/previews/${Date.now()}_${l.name}`);await Es(u,l),o.aperuURL=await ca(u)}await Qe(je(W,li,e),o),console.log(` Ebook mis  jour : ${e}`)}catch(o){throw console.error(" Erreur mise  jour ebook:",o),o}}async function CJ(e){try{const t=await NJ(e);if(!t)throw new Error("Ebook introuvable");try{if(t.fichierURL){const n=Mr(Er,t.fichierURL);await zc(n)}if(t.couvertureURL){const n=Mr(Er,t.couvertureURL);await zc(n)}if(t.aperuURL){const n=Mr(Er,t.aperuURL);await zc(n)}}catch{console.warn(" Fichiers Storage non supprims (peut-tre dj supprims)")}await pn(je(W,li,e)),console.log(` Ebook supprim : ${e}`)}catch(t){throw console.error(" Erreur suppression ebook:",t),t}}async function EJ(e,t){try{await Qe(je(W,li,e),{isActive:t,updatedAt:yt()})}catch(n){throw console.error(" Erreur toggle ebook:",n),n}}async function AJ(e){try{await Qe(je(W,li,e),{nombreVues:Fs(1)})}catch(t){console.error(" Erreur incrment vues:",t)}}async function zJ(e){try{await Qe(je(W,li,e),{nombreTelechargements:Fs(1)})}catch(t){console.error(" Erreur incrment tlchargements:",t)}}function OJ(e){const t={totalEbooks:e.length,totalTelechargements:0,totalVues:0,parCategorie:{manuel:0,annale:0,guide:0,litterature:0,fiche:0},ebooksActifs:0};return e.forEach(n=>{t.totalTelechargements+=n.nombreTelechargements||0,t.totalVues+=n.nombreVues||0,t.parCategorie[n.categorie]=(t.parCategorie[n.categorie]||0)+1,n.isActive&&t.ebooksActifs++}),t}function kc(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/(1024*1024)).toFixed(1)} Mo`}const aP=["Mathmatiques","Physique-Chimie","SVT","Franais","Anglais","Histoire-Gographie","Philosophie","conomie","Comptabilit","ducation civique","Arabe","Espagnol","Informatique"],DJ=({isPremium:e,onReadEbook:t})=>{const[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[f,p]=g.useState({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""}),[h,v]=g.useState("grid");g.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0),d(null);const C=await yJ();a(C)}catch(C){d("Erreur lors du chargement de la bibliothque"),console.error(C)}finally{o(!1)}},x=g.useMemo(()=>_J(n,f),[n,f]),N=g.useMemo(()=>{const C={all:n.length};return n.forEach(A=>{C[A.categorie]=(C[A.categorie]||0)+1}),C},[n]),j=(C,A)=>{p(w=>({...w,[C]:A}))},S=()=>{p({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""})};return l?r.jsx("div",{className:"ebook-library",children:r.jsxs("div",{className:"ebook-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement de la bibliothque..."})]})}):u?r.jsx("div",{className:"ebook-library",children:r.jsxs("div",{className:"ebook-error",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{onClick:b,className:"btn-retry",children:"Ressayer"})]})}):r.jsxs("div",{className:"ebook-library",children:[r.jsxs("div",{className:"ebook-library-header",children:[r.jsxs("div",{className:"ebook-header-content",children:[r.jsx("h1",{children:" Bibliothque PedaClic"}),r.jsxs("p",{className:"ebook-subtitle",children:["Manuels, annales, fiches de rvision et bien plus encore",!e&&r.jsx("span",{className:"preview-badge",children:"Aperu gratuit disponible"})]})]}),r.jsxs("div",{className:"ebook-search-bar",children:[r.jsx("input",{type:"text",placeholder:"Rechercher un ebook (titre, auteur, mot-cl)...",value:f.recherche||"",onChange:C=>j("recherche",C.target.value),className:"search-input"}),r.jsx("span",{className:"search-icon",children:""})]})]}),r.jsxs("div",{className:"ebook-categories",children:[r.jsxs("button",{className:`category-tab ${f.categorie==="all"?"active":""}`,onClick:()=>j("categorie","all"),children:[" Tous",r.jsx("span",{className:"category-count",children:N.all||0})]}),Object.keys(Fi).map(C=>r.jsxs("button",{className:`category-tab ${f.categorie===C?"active":""}`,onClick:()=>j("categorie",C),children:[Gi[C]," ",Fi[C],r.jsx("span",{className:"category-count",children:N[C]||0})]},C))]}),r.jsxs("div",{className:"ebook-filters",children:[r.jsxs("select",{value:f.niveau||"all",onChange:C=>j("niveau",C.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"Tous les niveaux"}),r.jsx("option",{value:"college",children:"Collge"}),r.jsx("option",{value:"lycee",children:"Lyce"})]}),r.jsxs("select",{value:f.classe||"all",onChange:C=>j("classe",C.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"Toutes les classes"}),r.jsx("option",{value:"6eme",children:"6me"}),r.jsx("option",{value:"5eme",children:"5me"}),r.jsx("option",{value:"4eme",children:"4me"}),r.jsx("option",{value:"3eme",children:"3me"}),r.jsx("option",{value:"2nde",children:"2nde"}),r.jsx("option",{value:"1ere",children:"1re"}),r.jsx("option",{value:"Terminale",children:"Terminale"})]}),r.jsxs("select",{value:f.matiere||"",onChange:C=>j("matiere",C.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),aP.map(C=>r.jsx("option",{value:C,children:C},C))]}),r.jsxs("div",{className:"view-toggle",children:[r.jsx("button",{className:h==="grid"?"active":"",onClick:()=>v("grid"),title:"Vue grille",children:""}),r.jsx("button",{className:h==="list"?"active":"",onClick:()=>v("list"),title:"Vue liste",children:""})]}),(f.categorie!=="all"||f.niveau!=="all"||f.classe!=="all"||f.matiere||f.recherche)&&r.jsx("button",{onClick:S,className:"btn-reset-filters",children:" Rinitialiser"})]}),r.jsx("div",{className:"ebook-results-info",children:r.jsxs("span",{children:[x.length," ebook",x.length>1?"s":""," trouv",x.length>1?"s":""]})}),x.length===0?r.jsxs("div",{className:"ebook-empty",children:[r.jsx("p",{children:" Aucun ebook trouv avec ces filtres."}),r.jsx("button",{onClick:S,className:"btn-reset-filters",children:"Voir tous les ebooks"})]}):r.jsx("div",{className:`ebook-grid ${h==="list"?"list-view":""}`,children:x.map(C=>r.jsx(MJ,{ebook:C,isPremium:e,onRead:()=>t(C),viewMode:h},C.id))}),!e&&x.length>0&&r.jsx("div",{className:"ebook-premium-banner",children:r.jsxs("div",{className:"premium-banner-content",children:[r.jsx("h3",{children:" Accdez  tous les ebooks en illimit"}),r.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour lire et tlcharger tous les manuels, annales et fiches de rvision sans limite."}),r.jsx("a",{href:"/premium",className:"btn-premium",children:"S'abonner  2 000 FCFA/mois"})]})})]})},MJ=({ebook:e,isPremium:t,onRead:n,viewMode:a})=>r.jsxs("div",{className:`ebook-card ${a==="list"?"ebook-card-list":""}`,children:[r.jsxs("div",{className:"ebook-cover",onClick:n,children:[e.couvertureURL?r.jsx("img",{src:e.couvertureURL,alt:e.titre,loading:"lazy"}):r.jsxs("div",{className:"ebook-cover-placeholder",children:[r.jsx("span",{className:"cover-icon",children:Gi[e.categorie]}),r.jsx("span",{className:"cover-title",children:e.titre})]}),!t&&r.jsx("div",{className:"ebook-badge-premium",children:r.jsx("span",{children:" Premium"})}),r.jsx("div",{className:"ebook-badge-category",children:Fi[e.categorie]})]}),r.jsxs("div",{className:"ebook-info",children:[r.jsx("h3",{className:"ebook-title",onClick:n,children:e.titre}),r.jsx("p",{className:"ebook-author",children:e.auteur}),r.jsx("p",{className:"ebook-description",children:e.description}),r.jsxs("div",{className:"ebook-meta",children:[e.classe!=="all"&&r.jsx("span",{className:"meta-tag",children:e.classe}),e.matiere&&r.jsx("span",{className:"meta-tag",children:e.matiere}),r.jsxs("span",{className:"meta-pages",children:[e.nombrePages," pages"]}),r.jsx("span",{className:"meta-size",children:kc(e.tailleFichier)})]}),r.jsxs("div",{className:"ebook-actions",children:[r.jsx("button",{className:"btn-read",onClick:n,children:t?" Lire":` Aperu (${e.pagesApercu} pages)`}),t&&r.jsx("a",{href:e.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn-download",download:!0,children:" Tlcharger"})]})]})]}),kJ=({ebook:e,isPremium:t,onBack:n,onGoPremium:a})=>{const[l,o]=g.useState(!0),[u,d]=g.useState("info");g.useEffect(()=>{AJ(e.id)},[e.id]);const f=()=>t?e.fichierURL:e.aperuURL?e.aperuURL:null,p=async()=>{if(!t){a();return}await zJ(e.id),window.open(e.fichierURL,"_blank")},h=()=>{o(!1)};return r.jsxs("div",{className:"ebook-viewer",children:[r.jsxs("div",{className:"viewer-navbar",children:[r.jsx("button",{onClick:n,className:"btn-back",children:" Retour  la bibliothque"}),r.jsxs("div",{className:"viewer-title-bar",children:[r.jsxs("span",{className:"viewer-category",children:[Gi[e.categorie]," ",Fi[e.categorie]]}),r.jsx("h2",{className:"viewer-title",children:e.titre})]}),r.jsxs("div",{className:"viewer-actions-bar",children:[r.jsx("button",{className:`btn-tab ${u==="info"?"active":""}`,onClick:()=>d("info"),children:" Dtails"}),r.jsxs("button",{className:`btn-tab ${u==="read"?"active":""}`,onClick:()=>d("read"),children:[" ",t?"Lire":"Aperu"]})]})]}),u==="info"&&r.jsx("div",{className:"viewer-info-panel",children:r.jsxs("div",{className:"info-layout",children:[r.jsxs("div",{className:"info-cover-column",children:[e.couvertureURL?r.jsx("img",{src:e.couvertureURL,alt:e.titre,className:"info-cover-image"}):r.jsxs("div",{className:"info-cover-placeholder",children:[r.jsx("span",{children:Gi[e.categorie]}),r.jsx("span",{children:e.titre})]}),r.jsxs("div",{className:"info-actions",children:[r.jsxs("button",{className:"btn-action-read",onClick:()=>d("read"),children:[" ",t?"Lire le document":`Aperu (${e.pagesApercu} pages)`]}),t?r.jsx("button",{className:"btn-action-download",onClick:p,children:" Tlcharger le PDF"}):r.jsx("button",{className:"btn-action-premium",onClick:a,children:" Accs complet  Passer Premium"})]})]}),r.jsxs("div",{className:"info-details-column",children:[r.jsx("h1",{className:"info-title",children:e.titre}),r.jsxs("p",{className:"info-author",children:["par ",e.auteur]}),r.jsxs("div",{className:"info-description",children:[r.jsx("h3",{children:"Description"}),r.jsx("p",{children:e.description})]}),r.jsxs("div",{className:"info-metadata",children:[r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Catgorie"}),r.jsxs("span",{className:"metadata-value",children:[Gi[e.categorie]," ",Fi[e.categorie]]})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Niveau"}),r.jsx("span",{className:"metadata-value",children:e.niveau==="college"?"Collge":"Lyce"})]}),e.classe!=="all"&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Classe"}),r.jsx("span",{className:"metadata-value",children:e.classe})]}),e.matiere&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Matire"}),r.jsx("span",{className:"metadata-value",children:e.matiere})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Pages"}),r.jsx("span",{className:"metadata-value",children:e.nombrePages})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Taille"}),r.jsx("span",{className:"metadata-value",children:kc(e.tailleFichier)})]}),e.annee&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Anne"}),r.jsx("span",{className:"metadata-value",children:e.annee})]}),e.editeur&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"diteur"}),r.jsx("span",{className:"metadata-value",children:e.editeur})]})]}),r.jsxs("div",{className:"info-stats",children:[r.jsxs("span",{children:[" ",e.nombreVues," vue",e.nombreVues>1?"s":""]}),r.jsxs("span",{children:[" ",e.nombreTelechargements," tlchargement",e.nombreTelechargements>1?"s":""]})]}),e.tags&&e.tags.length>0&&r.jsx("div",{className:"info-tags",children:e.tags.map((v,b)=>r.jsx("span",{className:"info-tag",children:v},b))})]})]})}),u==="read"&&r.jsx("div",{className:"viewer-read-panel",children:f()?r.jsxs(r.Fragment,{children:[l&&r.jsxs("div",{className:"viewer-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement du document..."})]}),r.jsx("iframe",{src:`${f()}#toolbar=1&navpanes=0`,className:"pdf-iframe",title:e.titre,onLoad:h,style:{display:l?"none":"block"}}),!t&&r.jsx("div",{className:"viewer-premium-overlay",children:r.jsxs("div",{className:"overlay-content",children:[r.jsx("div",{className:"overlay-lock",children:""}),r.jsxs("h3",{children:["Aperu limit  ",e.pagesApercu," pages"]}),r.jsxs("p",{children:["Pour lire l'intgralit de ce document (",e.nombrePages," pages) et le tlcharger, passez  PedaClic Premium."]}),r.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),r.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})]}):r.jsx("div",{className:"viewer-no-preview",children:r.jsxs("div",{className:"no-preview-content",children:[r.jsx("div",{className:"overlay-lock",children:""}),r.jsx("h3",{children:"Document rserv aux abonns Premium"}),r.jsxs("p",{children:["Ce document de ",e.nombrePages," pages est accessible uniquement avec un abonnement PedaClic Premium."]}),r.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),r.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})})]})},PJ=()=>{const{currentUser:e}=rt(),t=it(),[n,a]=g.useState(null),l=d=>{a(d)},o=()=>{a(null)},u=()=>{t("/premium")};return n?r.jsx(kJ,{ebook:n,isPremium:e?.isPremium||!1,onBack:o,onGoPremium:u}):r.jsx(DJ,{isPremium:e?.isPremium||!1,onReadEbook:l})},TJ=()=>{const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null),[u,d]=g.useState(null),[f,p]=g.useState(!1),[h,v]=g.useState(null),[b,x]=g.useState(G()),[N,j]=g.useState(!1),[S,C]=g.useState(null),[A,w]=g.useState(null),[E,D]=g.useState(null),[O,T]=g.useState(null),P=g.useRef(null),I=g.useRef(null),R=g.useRef(null),[F,B]=g.useState(null);function G(){return{titre:"",auteur:"",description:"",categorie:"manuel",niveau:"college",classe:"all",matiere:"",nombrePages:0,pagesApercu:5,annee:"",editeur:"",isbn:"",tags:[],ordre:0,isActive:!0}}g.useEffect(()=>{V()},[]);const V=async()=>{try{a(!0),o(null);const te=await jJ();t(te),d(OJ(te))}catch(te){o("Erreur lors du chargement des ebooks"),console.error(te)}finally{a(!1)}},M=te=>{const{name:de,value:me,type:xe}=te.target;x(xe==="number"?Y=>({...Y,[de]:parseInt(me)||0}):xe==="checkbox"?Y=>({...Y,[de]:te.target.checked}):Y=>({...Y,[de]:me}))},q=te=>{const de=te.target.value.split(",").map(me=>me.trim()).filter(Boolean);x(me=>({...me,tags:de}))},X=async te=>{if(te.preventDefault(),!b.titre.trim()){o("Le titre est obligatoire");return}if(!h&&!A){o("Le fichier PDF est obligatoire");return}try{j(!0),o(null),h?(await wJ(h.id,b,A,E,O),C(` Ebook "${b.titre}" modifi avec succs`)):(await SJ(b,A,E,O),C(` Ebook "${b.titre}" ajout avec succs`)),pe(),await V(),setTimeout(()=>C(null),4e3)}catch(de){o(de.message||"Erreur lors de la sauvegarde")}finally{j(!1)}},Q=te=>{v(te),x({titre:te.titre,auteur:te.auteur,description:te.description,categorie:te.categorie,niveau:te.niveau,classe:te.classe,matiere:te.matiere||"",nombrePages:te.nombrePages,pagesApercu:te.pagesApercu,annee:te.annee||"",editeur:te.editeur||"",isbn:te.isbn||"",tags:te.tags||[],ordre:te.ordre,isActive:te.isActive}),p(!0),window.scrollTo({top:0,behavior:"smooth"})},$=async te=>{try{await CJ(te),B(null),C(" Ebook supprim avec succs"),await V(),setTimeout(()=>C(null),4e3)}catch(de){o(de.message||"Erreur lors de la suppression")}},L=async(te,de)=>{try{await EJ(te,!de),await V()}catch(me){o(me.message)}},pe=()=>{x(G()),v(null),w(null),D(null),T(null),p(!1),P.current&&(P.current.value=""),I.current&&(I.current.value=""),R.current&&(R.current.value="")};return n?r.jsx("div",{className:"admin-ebooks",children:r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement des ebooks..."})]})}):r.jsxs("div",{className:"admin-ebooks",children:[r.jsxs("div",{className:"admin-ebooks-header",children:[r.jsx("h1",{children:" Gestion de la Bibliothque"}),r.jsx("button",{className:"btn-add-ebook",onClick:()=>{pe(),p(!f)},children:f?" Fermer":"+ Ajouter un ebook"})]}),l&&r.jsxs("div",{className:"admin-alert error",children:[" ",l]}),S&&r.jsx("div",{className:"admin-alert success",children:S}),u&&r.jsxs("div",{className:"admin-stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalEbooks}),r.jsx("span",{className:"stat-label",children:"Total ebooks"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.ebooksActifs}),r.jsx("span",{className:"stat-label",children:"Actifs"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalVues}),r.jsx("span",{className:"stat-label",children:"Vues totales"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalTelechargements}),r.jsx("span",{className:"stat-label",children:"Tlchargements"})]})]}),f&&r.jsxs("div",{className:"admin-ebook-form-container",children:[r.jsx("h2",{children:h?" Modifier l'ebook":" Ajouter un ebook"}),r.jsxs("form",{onSubmit:X,className:"admin-ebook-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"titre",children:"Titre *"}),r.jsx("input",{id:"titre",name:"titre",type:"text",value:b.titre,onChange:M,placeholder:"Ex: Mathmatiques 3me - Programme complet",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"auteur",children:"Auteur(s) *"}),r.jsx("input",{id:"auteur",name:"auteur",type:"text",value:b.auteur,onChange:M,placeholder:"Ex: Pr. Diallo Moussa",required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description *"}),r.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:M,placeholder:"Dcrivez le contenu de cet ebook...",rows:3,required:!0})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"categorie",children:"Catgorie *"}),r.jsx("select",{id:"categorie",name:"categorie",value:b.categorie,onChange:M,children:Object.keys(Fi).map(te=>r.jsxs("option",{value:te,children:[Gi[te]," ",Fi[te]]},te))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),r.jsxs("select",{id:"niveau",name:"niveau",value:b.niveau,onChange:M,children:[r.jsx("option",{value:"college",children:"Collge"}),r.jsx("option",{value:"lycee",children:"Lyce"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"classe",children:"Classe"}),r.jsxs("select",{id:"classe",name:"classe",value:b.classe,onChange:M,children:[r.jsx("option",{value:"all",children:"Toutes les classes"}),r.jsx("option",{value:"6eme",children:"6me"}),r.jsx("option",{value:"5eme",children:"5me"}),r.jsx("option",{value:"4eme",children:"4me"}),r.jsx("option",{value:"3eme",children:"3me"}),r.jsx("option",{value:"2nde",children:"2nde"}),r.jsx("option",{value:"1ere",children:"1re"}),r.jsx("option",{value:"Terminale",children:"Terminale"})]})]})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"matiere",children:"Matire"}),r.jsxs("select",{id:"matiere",name:"matiere",value:b.matiere,onChange:M,children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),aP.map(te=>r.jsx("option",{value:te,children:te},te))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"annee",children:"Anne"}),r.jsx("input",{id:"annee",name:"annee",type:"text",value:b.annee,onChange:M,placeholder:"Ex: 2024-2025"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"editeur",children:"diteur"}),r.jsx("input",{id:"editeur",name:"editeur",type:"text",value:b.editeur,onChange:M,placeholder:"Ex: INEADE"})]})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"nombrePages",children:"Nombre de pages *"}),r.jsx("input",{id:"nombrePages",name:"nombrePages",type:"number",value:b.nombrePages,onChange:M,min:"1",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pagesApercu",children:"Pages en aperu gratuit"}),r.jsx("input",{id:"pagesApercu",name:"pagesApercu",type:"number",value:b.pagesApercu,onChange:M,min:"1",max:"20"}),r.jsx("small",{children:"Nombre de pages visibles sans Premium (1-20)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"ordre",children:"Ordre d'affichage"}),r.jsx("input",{id:"ordre",name:"ordre",type:"number",value:b.ordre,onChange:M,min:"0"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"tags",children:"Tags (spars par des virgules)"}),r.jsx("input",{id:"tags",type:"text",value:b.tags?.join(", ")||"",onChange:q,placeholder:"Ex: BFEM, annales, mathmatiques, gomtrie"})]}),r.jsxs("div",{className:"form-files-section",children:[r.jsx("h3",{children:" Fichiers"}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["Fichier PDF complet ",!h&&"*",h&&r.jsx("small",{children:"(laisser vide pour garder l'actuel)"})]}),r.jsx("input",{ref:P,type:"file",accept:".pdf",onChange:te=>w(te.target.files?.[0]||null),className:"file-input"}),A&&r.jsxs("span",{className:"file-info",children:[" ",A.name," (",kc(A.size),")"]})]}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["Image de couverture",r.jsx("small",{children:"(JPG, PNG  recommand : 400560px)"})]}),r.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:te=>D(te.target.files?.[0]||null),className:"file-input"}),E&&r.jsxs("span",{className:"file-info",children:[" ",E.name," (",kc(E.size),")"]})]}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["PDF Aperu (premires pages uniquement)",r.jsx("small",{children:"(optionnel  sinon le PDF complet est affich aux non-Premium)"})]}),r.jsx("input",{ref:R,type:"file",accept:".pdf",onChange:te=>T(te.target.files?.[0]||null),className:"file-input"}),O&&r.jsxs("span",{className:"file-info",children:[" ",O.name," (",kc(O.size),")"]})]})]}),r.jsx("div",{className:"form-group checkbox-group",children:r.jsxs("label",{children:[r.jsx("input",{type:"checkbox",name:"isActive",checked:b.isActive,onChange:M}),"Ebook actif (visible dans la bibliothque)"]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"btn-save",disabled:N,children:N?" Enregistrement...":h?" Modifier l'ebook":" Ajouter l'ebook"}),r.jsx("button",{type:"button",className:"btn-cancel",onClick:pe,children:"Annuler"})]})]})]}),r.jsxs("div",{className:"admin-ebooks-list",children:[r.jsxs("h2",{children:[" Liste des ebooks (",e.length,")"]}),e.length===0?r.jsxs("div",{className:"admin-empty",children:[r.jsx("p",{children:"Aucun ebook pour le moment."}),r.jsx("button",{className:"btn-add-ebook",onClick:()=>p(!0),children:"+ Ajouter le premier ebook"})]}):r.jsx("div",{className:"admin-ebooks-table-wrapper",children:r.jsxs("table",{className:"admin-ebooks-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Couverture"}),r.jsx("th",{children:"Titre / Auteur"}),r.jsx("th",{children:"Catgorie"}),r.jsx("th",{children:"Classe"}),r.jsx("th",{children:"Pages"}),r.jsx("th",{children:"Vues / DL"}),r.jsx("th",{children:"Statut"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(te=>r.jsxs("tr",{className:te.isActive?"":"row-inactive",children:[r.jsx("td",{className:"td-cover",children:te.couvertureURL?r.jsx("img",{src:te.couvertureURL,alt:"",className:"mini-cover"}):r.jsx("div",{className:"mini-cover-placeholder",children:Gi[te.categorie]})}),r.jsxs("td",{className:"td-title",children:[r.jsx("strong",{children:te.titre}),r.jsx("span",{className:"td-author",children:te.auteur})]}),r.jsx("td",{children:r.jsxs("span",{className:"badge-category",children:[Gi[te.categorie]," ",Fi[te.categorie]]})}),r.jsx("td",{children:te.classe==="all"?"Toutes":te.classe}),r.jsx("td",{children:te.nombrePages}),r.jsx("td",{children:r.jsxs("span",{className:"td-stats",children:[" ",te.nombreVues,r.jsx("br",{})," ",te.nombreTelechargements]})}),r.jsx("td",{children:r.jsx("button",{className:`btn-status ${te.isActive?"active":"inactive"}`,onClick:()=>L(te.id,te.isActive),title:te.isActive?"Dsactiver":"Activer",children:te.isActive?" Actif":" Inactif"})}),r.jsxs("td",{className:"td-actions",children:[r.jsx("button",{className:"btn-edit",onClick:()=>Q(te),title:"Modifier",children:""}),F===te.id?r.jsxs("div",{className:"delete-confirm",children:[r.jsx("span",{children:"Supprimer ?"}),r.jsx("button",{className:"btn-confirm-yes",onClick:()=>$(te.id),children:"Oui"}),r.jsx("button",{className:"btn-confirm-no",onClick:()=>B(null),children:"Non"})]}):r.jsx("button",{className:"btn-delete",onClick:()=>B(te.id),title:"Supprimer",children:""})]})]},te.id))})]})})]})]})},Xn="cours_en_ligne",Xs="cours_sections";function qJ(e){const t=[/(?:youtube\.com\/watch\?v=)([^&\n?#]+)/,/(?:youtu\.be\/)([^&\n?#]+)/,/(?:youtube\.com\/embed\/)([^&\n?#]+)/];for(const n of t){const a=e.match(n);if(a)return a[1]}return null}async function RJ(e){let t=De(Ne(W,Xn),we("statut","==","publie"),Xe("updatedAt","desc"),_r(50));return(await ze(t)).docs.map(l=>({id:l.id,...l.data()}))}async function iP(e){const t=await Mt(je(W,Xn,e));return t.exists()?{id:t.id,...t.data()}:null}async function IJ(e){const t=De(Ne(W,Xn),we("profId","==",e),Xe("updatedAt","desc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}async function LJ(e,t,n){const a=Oe.now();return(await kt(Ne(W,Xn),{...n,profId:e,profNom:t,statut:n.statut??"brouillon",nombreInscrits:0,nombreSections:0,createdAt:a,updatedAt:a})).id}async function $J(e,t){await Qe(je(W,Xn,e),{...t,updatedAt:Oe.now()})}async function zb(e){await Qe(je(W,Xn,e),{statut:"publie",publieAt:Oe.now(),updatedAt:Oe.now()})}async function BJ(e){await Qe(je(W,Xn,e),{statut:"archive",updatedAt:Oe.now()})}async function UJ(e){const t=Dn(W);(await ze(De(Ne(W,Xs),we("coursId","==",e)))).docs.forEach(a=>t.delete(a.ref)),t.delete(je(W,Xn,e)),await t.commit()}async function sP(e){const t=De(Ne(W,Xs),we("coursId","==",e),Xe("ordre","asc"));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}async function FJ(e,t){const n=Dn(W),a=Oe.now(),l=je(Ne(W,Xs));return n.set(l,{...t,coursId:e,blocs:t.blocs??[],createdAt:a,updatedAt:a}),n.update(je(W,Xn,e),{nombreSections:Fs(1),updatedAt:a}),await n.commit(),l.id}async function KE(e,t){const n=Oe.now();let a={...t,updatedAt:n};t.blocs&&(a.dureeEstimee=lP(t.blocs)),await Qe(je(W,Xs,e),a)}async function GJ(e,t){const n=Dn(W),a=Oe.now();n.delete(je(W,Xs,e)),n.update(je(W,Xn,t),{nombreSections:Fs(-1),updatedAt:a}),await n.commit()}async function HJ(e){const t=Dn(W),n=Oe.now();e.forEach(({id:a,ordre:l})=>{t.update(je(W,Xs,a),{ordre:l,updatedAt:n})}),await t.commit()}async function QJ(e,t){const n=t.map((a,l)=>({...a,ordre:l}));await Qe(je(W,Xs,e),{blocs:n,dureeEstimee:lP(n),updatedAt:Oe.now()})}function lP(e){let t=0;return e.forEach(n=>{switch(n.type){case"texte":t+=Math.max(1,Math.ceil(n.contenu.split(" ").length/200));break;case"video":t+=5;break;case"quiz":t+=2;break;case"exercice":t+=n.difficulte==="difficile"?10:n.difficulte==="moyen"?5:3;break;case"image":case"encadre":t+=1;break}}),Math.max(1,t)}async function VJ(e){await Qe(je(W,Xn,e),{nombreInscrits:Fs(1)})}const Ob={texte:{label:"Texte",emoji:"",description:"Paragraphe format"},image:{label:"Image",emoji:"",description:"Image avec lgende"},video:{label:"Vido",emoji:"",description:"Vido YouTube"},encadre:{label:"Encadr",emoji:"",description:"Dfinition, remarque, astuce..."},quiz:{label:"Quiz",emoji:"",description:"Question  choix multiple"},exercice:{label:"Exercice",emoji:"",description:"Problme avec correction"}},oP={definition:{label:"Dfinition",emoji:"",bg:"#eff6ff",border:"#2563eb",color:"#1d4ed8"},remarque:{label:"Remarque",emoji:"",bg:"#fefce8",border:"#ca8a04",color:"#854d0e"},attention:{label:"Attention",emoji:"",bg:"#fef2f2",border:"#dc2626",color:"#991b1b"},astuce:{label:"Astuce",emoji:"",bg:"#f0fdf4",border:"#16a34a",color:"#15803d"},exemple:{label:"Exemple",emoji:"",bg:"#f8fafc",border:"#64748b",color:"#475569"}},yj=mp.map(e=>({valeur:e,label:e==="3me"?"3me (BFEM)":e==="Terminale"?"Terminale (BAC)":e})),YJ={brouillon:{label:"Brouillon",couleur:"#6b7280",bg:"#f3f4f6"},publie:{label:"Publi",couleur:"#16a34a",bg:"#f0fdf4"},archive:{label:"Archiv",couleur:"#9ca3af",bg:"#f9fafb"}};function KJ({cours:e,onClick:t}){const n=e.dureeEstimee>=60?`${Math.floor(e.dureeEstimee/60)}h${e.dureeEstimee%60>0?e.dureeEstimee%60:""}`:`${e.dureeEstimee} min`,a=yj.find(l=>l.valeur===e.niveau)?.label??e.niveau;return r.jsxs("article",{className:"cours-card",onClick:t,role:"button",tabIndex:0,onKeyDown:l=>l.key==="Enter"&&t(),"aria-label":`Cours : ${e.titre}`,children:[r.jsxs("div",{className:"cours-card__cover",children:[e.couvertureUrl?r.jsx("img",{src:e.couvertureUrl,alt:e.titre,loading:"lazy"}):r.jsx("div",{className:"cours-card__cover-placeholder",children:r.jsx("span",{children:e.matiere.charAt(0)})}),e.isPremium&&r.jsx("span",{className:"cours-card__badge cours-card__badge--premium",children:" Premium"}),!e.isPremium&&r.jsx("span",{className:"cours-card__badge cours-card__badge--gratuit",children:" Gratuit"})]}),r.jsxs("div",{className:"cours-card__body",children:[r.jsxs("div",{className:"cours-card__meta",children:[r.jsx("span",{className:"cours-card__matiere",children:e.matiere}),r.jsx("span",{className:"cours-card__niveau",children:a})]}),r.jsx("h3",{className:"cours-card__titre",children:e.titre}),r.jsx("p",{className:"cours-card__description",children:e.description}),r.jsxs("div",{className:"cours-card__footer",children:[r.jsxs("span",{className:"cours-card__prof",children:[" ",e.profNom]}),r.jsxs("div",{className:"cours-card__stats",children:[r.jsxs("span",{children:[" ",e.nombreSections," section",e.nombreSections>1?"s":""]}),r.jsxs("span",{children:[" ",n]}),r.jsxs("span",{children:[" ",e.nombreInscrits]})]})]})]})]})}function WE(){const e=it(),{matieres:t}=dp(),[n,a]=g.useState([]),[l,o]=g.useState([]),[u,d]=g.useState(!0),[f,p]=g.useState(null),[h,v]=g.useState({matiere:"",niveau:"",recherche:"",isPremium:""});g.useEffect(()=>{b()},[]);async function b(){d(!0),p(null);try{const S=await RJ();a(S),o(S)}catch(S){console.error("[CoursPage] Erreur chargement :",S),p("Impossible de charger les cours. Vrifiez votre connexion.")}finally{d(!1)}}const x=g.useCallback(S=>{v(S);let C=[...n];if(S.matiere&&(C=C.filter(A=>A.matiere===S.matiere)),S.niveau&&(C=C.filter(A=>A.niveau===S.niveau)),S.isPremium!==""&&S.isPremium!==void 0&&(C=C.filter(A=>A.isPremium===S.isPremium)),S.recherche){const A=S.recherche.toLowerCase();C=C.filter(w=>w.titre.toLowerCase().includes(A)||w.description.toLowerCase().includes(A)||w.matiere.toLowerCase().includes(A)||w.tags.some(E=>E.toLowerCase().includes(A)))}o(C)},[n]),N=()=>{v({matiere:"",niveau:"",recherche:"",isPremium:""}),o(n)},j=!!(h.matiere||h.niveau||h.recherche||h.isPremium!=="");return r.jsxs("div",{className:"cours-catalogue",children:[r.jsx("section",{className:"cours-catalogue__hero","aria-label":"Introduction aux cours",children:r.jsxs("div",{className:"cours-catalogue__hero-content",children:[r.jsx("h1",{className:"cours-catalogue__hero-titre",children:" Cours en ligne"}),r.jsx("p",{className:"cours-catalogue__hero-sous-titre",children:"Des cours complets du programme sngalais  de la 6me au Bac. Crs par vos professeurs, accessibles partout, mme hors-ligne."}),r.jsxs("div",{className:"cours-catalogue__hero-stats","aria-label":"Statistiques de la plateforme",children:[r.jsxs("div",{className:"cours-catalogue__stat",children:[r.jsx("span",{className:"cours-catalogue__stat-val",children:n.length}),r.jsx("span",{className:"cours-catalogue__stat-label",children:"Cours disponibles"})]}),r.jsxs("div",{className:"cours-catalogue__stat",children:[r.jsx("span",{className:"cours-catalogue__stat-val",children:n.filter(S=>!S.isPremium).length}),r.jsx("span",{className:"cours-catalogue__stat-label",children:"Cours gratuits"})]}),r.jsxs("div",{className:"cours-catalogue__stat",children:[r.jsx("span",{className:"cours-catalogue__stat-val",children:[...new Set(n.map(S=>S.matiere))].length}),r.jsx("span",{className:"cours-catalogue__stat-label",children:"Matires"})]})]})]})}),r.jsx("section",{className:"cours-catalogue__filtres","aria-label":"Filtres de recherche",children:r.jsxs("div",{className:"cours-catalogue__filtres-inner",children:[r.jsxs("div",{className:"cours-catalogue__search",children:[r.jsx("span",{className:"cours-catalogue__search-icon","aria-hidden":"true",children:""}),r.jsx("input",{type:"search",placeholder:"Rechercher un cours, une matire, un tag...",value:h.recherche,onChange:S=>x({...h,recherche:S.target.value}),className:"cours-catalogue__search-input","aria-label":"Rechercher dans les cours"})]}),r.jsxs("select",{value:h.matiere,onChange:S=>x({...h,matiere:S.target.value}),className:"cours-catalogue__select","aria-label":"Filtrer par matire",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),t.map(S=>r.jsx("option",{value:S.valeur,children:S.label},S.valeur))]}),r.jsxs("select",{value:h.niveau,onChange:S=>x({...h,niveau:S.target.value}),className:"cours-catalogue__select","aria-label":"Filtrer par niveau",children:[r.jsx("option",{value:"",children:"Tous les niveaux"}),mp.map(S=>r.jsx("option",{value:S,children:S},S))]}),r.jsxs("select",{value:String(h.isPremium),onChange:S=>{const C=S.target.value===""?"":S.target.value==="true";x({...h,isPremium:C})},className:"cours-catalogue__select","aria-label":"Filtrer par accs",children:[r.jsx("option",{value:"",children:"Tous les accs"}),r.jsx("option",{value:"false",children:" Gratuits"}),r.jsx("option",{value:"true",children:" Premium"})]}),j&&r.jsx("button",{className:"btn-secondary btn--sm",onClick:N,"aria-label":"Effacer les filtres",children:" Effacer les filtres"})]})}),r.jsxs("main",{className:"cours-catalogue__contenu",children:[f&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",f,r.jsx("button",{className:"btn-link",onClick:b,children:"Ressayer"})]}),u&&r.jsx("div",{className:"cours-catalogue__grille","aria-busy":"true","aria-label":"Chargement des cours",children:[1,2,3,4,5,6].map(S=>r.jsxs("div",{className:"cours-card cours-card--skeleton",children:[r.jsx("div",{className:"skeleton cours-card__cover"}),r.jsxs("div",{className:"cours-card__body",children:[r.jsx("div",{className:"skeleton",style:{height:16,width:"60%",marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:20,marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:14,width:"80%"}})]})]},S))}),!u&&l.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"cours-catalogue__compteur","aria-live":"polite",children:[l.length," cours trouv",l.length>1?"s":"",j&&" pour ces critres"]}),r.jsx("div",{className:"cours-catalogue__grille",children:l.map(S=>r.jsx(KJ,{cours:S,onClick:()=>e(`/cours/${S.id}`)},S.id))})]}),!u&&l.length===0&&!f&&r.jsxs("div",{className:"cours-catalogue__vide",role:"status",children:[r.jsx("span",{"aria-hidden":"true",children:""}),r.jsx("h3",{children:"Aucun cours trouv"}),r.jsx("p",{children:j?"Essayez de modifier ou supprimer vos filtres.":"Les cours seront disponibles bientt. Revenez dans quelques jours !"}),j&&r.jsx("button",{className:"btn-secondary",onClick:N,children:"Afficher tous les cours"})]})]})]})}const Us="progression_cours";async function XE(e,t){const n=De(Ne(W,Us),we("userId","==",e),we("coursId","==",t)),a=await ze(n);if(a.empty)return null;const l=a.docs[0];return{id:l.id,...l.data()}}async function WJ(e){const t=De(Ne(W,Us),we("coursId","==",e));return(await ze(t)).docs.map(a=>({id:a.id,...a.data()}))}async function XJ(e,t){const n=Oe.now(),a=await kt(Ne(W,Us),{userId:e,coursId:t,sectionsLues:[],reponsesQuiz:[],pourcentageProgression:0,scoreQuiz:0,tentativesQuiz:0,debutLe:n,dernierAcces:n,estTermine:!1});return await VJ(t),a.id}async function ZJ(e,t,n){const a=await Mt(je(W,Us,e));if(!a.exists())return;const l=a.data();if(l.sectionsLues.includes(t))return;const o=[...l.sectionsLues,t],u=Math.round(o.length/n*100),d=o.length>=n;await Qe(je(W,Us,e),{sectionsLues:Db(t),pourcentageProgression:u,estTermine:d,dernierAcces:Oe.now()})}async function JJ(e,t){const n=await Mt(je(W,Us,e));if(!n.exists())return;const a=n.data(),l=a.reponsesQuiz??[];if(l.some(p=>p.blocId===t.blocId))return;const u=[...l,t],d=u.filter(p=>p.estCorrecte).length,f=u.length>0?Math.round(d/u.length*100):0;await Qe(je(W,Us,e),{reponsesQuiz:Db(t),scoreQuiz:f,tentativesQuiz:a.tentativesQuiz+1,dernierAcces:Oe.now()})}function eee(e){if(e.length===0)return{nombreInscrits:0,nombreTermines:0,tauxCompletion:0,progressionMoyenne:0,scoreMoyen:0};const t=e.filter(l=>l.estTermine).length,n=Math.round(e.reduce((l,o)=>l+o.pourcentageProgression,0)/e.length),a=Math.round(e.reduce((l,o)=>l+o.scoreQuiz,0)/e.length);return{nombreInscrits:e.length,nombreTermines:t,tauxCompletion:Math.round(t/e.length*100),progressionMoyenne:n,scoreMoyen:a}}function tee({bloc:e}){const t=e.contenu.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/gs,"<ul>$1</ul>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br/>");return r.jsx("div",{className:"bloc-texte",dangerouslySetInnerHTML:{__html:`<p>${t}</p>`}})}function ree({bloc:e}){return r.jsxs("figure",{className:"bloc-image",children:[r.jsx("img",{src:e.url,alt:e.alt,loading:"lazy"}),e.legende&&r.jsx("figcaption",{children:e.legende})]})}function nee({bloc:e}){const t=qJ(e.urlYoutube);return t?r.jsxs("div",{className:"bloc-video",children:[e.titre&&r.jsxs("h4",{className:"bloc-video__titre",children:[" ",e.titre]}),e.description&&r.jsx("p",{className:"bloc-video__description",children:e.description}),r.jsx("div",{className:"bloc-video__embed",children:r.jsx("iframe",{src:`https://www.youtube.com/embed/${t}`,title:e.titre||"Vido pdagogique",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})]}):null}function aee({bloc:e}){const t=oP[e.variante];return r.jsxs("div",{className:"bloc-encadre",style:{background:t.bg,borderLeftColor:t.border,color:t.color},children:[r.jsxs("p",{className:"bloc-encadre__titre",children:[t.emoji," ",e.titre]}),r.jsx("p",{className:"bloc-encadre__contenu",children:e.contenu})]})}function iee({bloc:e,onReponse:t,reponseExistante:n}){const[a,l]=g.useState(n??null),o=a!==null;function u(d,f){o||(l(d),t(d,f))}return r.jsxs("div",{className:"bloc-quiz",children:[r.jsxs("p",{className:"bloc-quiz__question",children:[" ",e.question]}),r.jsx("div",{className:"bloc-quiz__options",children:e.options.map(d=>{let f="";return o&&(d.id===a?f=d.estCorrecte?"correct":"incorrect":d.estCorrecte&&(f="attendu")),r.jsxs("button",{className:`bloc-quiz__option bloc-quiz__option--${f||"neutre"}`,onClick:()=>u(d.id,d.estCorrecte),disabled:o,"aria-pressed":d.id===a,children:[f==="correct"&&" ",f==="incorrect"&&" ",f==="attendu"&&" ",d.texte]},d.id)})}),o&&e.explication&&r.jsxs("div",{className:"bloc-quiz__explication",children:[" ",r.jsx("strong",{children:"Explication :"})," ",e.explication]})]})}function see({bloc:e}){const[t,n]=g.useState(!1),a={facile:"#16a34a",moyen:"#ca8a04",difficile:"#dc2626"};return r.jsxs("div",{className:"bloc-exercice",children:[r.jsxs("div",{className:"bloc-exercice__header",children:[r.jsx("span",{className:"bloc-exercice__titre",children:" Exercice"}),r.jsxs("span",{className:"bloc-exercice__difficulte",style:{color:a[e.difficulte]},children:[e.difficulte.charAt(0).toUpperCase()+e.difficulte.slice(1),e.points&&`  ${e.points} pt${e.points>1?"s":""}`]})]}),r.jsx("p",{className:"bloc-exercice__enonce",children:e.enonce}),t?r.jsxs("div",{className:"bloc-exercice__correction",children:[r.jsx("p",{className:"bloc-exercice__correction-titre",children:" Correction"}),r.jsx("p",{children:e.correction})]}):r.jsx("button",{className:"btn-secondary btn--sm",onClick:()=>n(!0),children:" Voir la correction"})]})}function lee({bloc:e,isPremiumVerrou:t,onReponseQuiz:n,reponseExistante:a}){if(t)return r.jsxs("div",{className:"bloc-premium-verrou","aria-label":"Contenu Premium",children:[r.jsx("span",{children:""}),r.jsx("p",{children:"Ce contenu est rserv aux abonns Premium."})]});switch(e.type){case"texte":return r.jsx(tee,{bloc:e});case"image":return r.jsx(ree,{bloc:e});case"video":return r.jsx(nee,{bloc:e});case"encadre":return r.jsx(aee,{bloc:e});case"quiz":return r.jsx(iee,{bloc:e,reponseExistante:a,onReponse:(l,o)=>n(e.id,l,o)});case"exercice":return r.jsx(see,{bloc:e});default:return null}}function ZE(){const{coursId:e}=Yn(),t=it(),{currentUser:n}=rt(),a=n?.isPremium??!1,[l,o]=g.useState(null),[u,d]=g.useState([]),[f,p]=g.useState(null),[h,v]=g.useState(null),[b,x]=g.useState(!0),[N,j]=g.useState(null),S=g.useRef(null);g.useEffect(()=>{e&&C()},[e,n]);async function C(){if(e){x(!0),j(null);try{const[P,I]=await Promise.all([iP(e),sP(e)]);if(!P||P.statut!=="publie"){j("Ce cours n'est pas disponible."),x(!1);return}if(o(P),d(I),I.length>0&&v(I[0].id),n){let R=await XE(n.uid,e);R||(await XJ(n.uid,e),R=await XE(n.uid,e)),p(R)}}catch(P){console.error("[CoursDetailPage] Erreur chargement :",P),j("Erreur de chargement. Vrifiez votre connexion.")}finally{x(!1)}}}async function A(P){if(!(!n||!f||!l)&&!f.sectionsLues.includes(P))try{await ZJ(f.id,P,l.nombreSections),p(I=>I?{...I,sectionsLues:[...I.sectionsLues,P],pourcentageProgression:Math.round((I.sectionsLues.length+1)/l.nombreSections*100)}:null)}catch(I){console.error("[CoursDetailPage] Erreur marquer section :",I)}}async function w(P,I,R){if(!(!n||!f))try{await JJ(f.id,{blocId:P,optionChoisieId:I,estCorrecte:R,reponduAt:Oe.now()})}catch(F){console.error("[CoursDetailPage] Erreur enregistrement quiz :",F)}}function E(P){return!!(P.estGratuite||P.ordre===1||!l?.isPremium||a)}if(b)return r.jsxs("div",{className:"cours-detail__loading","aria-busy":"true",children:[r.jsx("div",{className:"spinner spinner--blue"}),r.jsx("p",{children:"Chargement du cours..."})]});if(N||!l)return r.jsxs("div",{className:"cours-detail__erreur",role:"alert",children:[r.jsx("span",{"aria-hidden":"true",children:""}),r.jsx("p",{children:N??"Cours introuvable."}),r.jsx("button",{className:"btn-secondary",onClick:()=>t("/cours"),children:" Retour au catalogue"})]});const D=yj.find(P=>P.valeur===l.niveau)?.label??l.niveau,O=u.find(P=>P.id===h),T=O?E(O):!1;return r.jsxs("div",{className:"cours-detail",children:[r.jsxs("header",{className:"cours-detail__header",children:[r.jsxs("p",{className:"cours-detail__breadcrumb",children:[r.jsx("button",{className:"btn-link",onClick:()=>t("/cours"),children:" Cours"})," / ",r.jsx("span",{children:l.matiere})," / ",r.jsx("span",{children:l.titre})]}),r.jsxs("div",{className:"cours-detail__header-grid",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"cours-detail__badges",children:[r.jsx("span",{className:"badge badge--matiere",children:l.matiere}),r.jsx("span",{className:"badge badge--niveau",children:D}),l.isPremium?r.jsx("span",{className:"badge badge--premium",children:" Premium"}):r.jsx("span",{className:"badge badge--gratuit",children:" Gratuit"})]}),r.jsx("h1",{className:"cours-detail__titre",children:l.titre}),r.jsx("p",{className:"cours-detail__description",children:l.description}),r.jsxs("p",{className:"cours-detail__prof",children:[" Cours de ",r.jsx("strong",{children:l.profNom})]}),l.objectifs.length>0&&r.jsxs("div",{className:"cours-detail__objectifs",children:[r.jsx("h3",{children:" Objectifs du cours"}),r.jsx("ul",{children:l.objectifs.map((P,I)=>r.jsx("li",{children:P},I))})]})]}),n&&f&&r.jsxs("div",{className:"cours-detail__progression-card",children:[r.jsx("h3",{children:" Ma progression"}),r.jsx("div",{className:"progression-bar",children:r.jsx("div",{className:"progression-bar__fill",style:{width:`${f.pourcentageProgression}%`},role:"progressbar","aria-valuenow":f.pourcentageProgression,"aria-valuemin":0,"aria-valuemax":100})}),r.jsxs("p",{className:"progression-bar__label",children:[f.pourcentageProgression,"%  ",f.sectionsLues.length,"/",l.nombreSections," section",l.nombreSections>1?"s":""," lue",f.sectionsLues.length>1?"s":""]}),f.scoreQuiz>0&&r.jsxs("p",{className:"progression-bar__score",children:[" Score quiz : ",r.jsxs("strong",{children:[f.scoreQuiz,"%"]})]}),f.estTermine&&r.jsx("div",{className:"cours-detail__termine-badge",children:" Cours termin !"})]})]})]}),r.jsxs("div",{className:"cours-detail__layout",children:[r.jsxs("nav",{className:"cours-detail__sidebar","aria-label":"Sections du cours",children:[r.jsx("h2",{className:"cours-detail__sidebar-titre",children:" Sections"}),r.jsx("ol",{className:"cours-detail__sections-liste",children:u.map(P=>{const I=f?.sectionsLues.includes(P.id)??!1,R=P.id===h,F=E(P);return r.jsx("li",{children:r.jsxs("button",{className:["cours-detail__section-btn",R?"cours-detail__section-btn--active":"",I?"cours-detail__section-btn--lue":"",F?"":"cours-detail__section-btn--verrou"].join(" "),onClick:()=>v(P.id),"aria-current":R?"true":void 0,children:[r.jsx("span",{className:"cours-detail__section-icone","aria-hidden":"true",children:F?I?"":`${P.ordre}.`:""}),r.jsx("span",{className:"cours-detail__section-nom",children:P.titre}),r.jsxs("span",{className:"cours-detail__section-duree",children:[P.dureeEstimee," min"]})]})},P.id)})})]}),r.jsx("main",{className:"cours-detail__contenu",ref:S,"aria-live":"polite",children:O?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"cours-detail__section-header",children:[r.jsxs("h2",{className:"cours-detail__section-titre",children:[O.ordre,". ",O.titre]}),r.jsxs("span",{className:"cours-detail__section-duree-label",children:[" ",O.dureeEstimee," min de lecture"]})]}),T?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"cours-detail__blocs",children:O.blocs.sort((P,I)=>P.ordre-I.ordre).map(P=>{const I=P.isPremium&&!a&&!O.estGratuite,R=f?.reponsesQuiz.find(F=>F.blocId===P.id)?.optionChoisieId;return r.jsx("div",{className:`cours-detail__bloc cours-detail__bloc--${P.type}`,children:r.jsx(lee,{bloc:P,isPremiumVerrou:I,onReponseQuiz:w,reponseExistante:R})},P.id)})}),n&&!f?.sectionsLues.includes(O.id)&&r.jsx("div",{className:"cours-detail__action-lu",children:r.jsx("button",{className:"btn-primary",onClick:()=>A(O.id),children:" Marquer cette section comme lue"})}),r.jsxs("div",{className:"cours-detail__nav-sections",children:[O.ordre>1&&r.jsx("button",{className:"btn-secondary",onClick:()=>{const P=u.find(I=>I.ordre===O.ordre-1);P&&v(P.id)},children:" Section prcdente"}),O.ordre<u.length&&r.jsx("button",{className:"btn-primary",onClick:()=>{const P=u.find(I=>I.ordre===O.ordre+1);P&&v(P.id)},children:"Section suivante "})]})]}):r.jsxs("div",{className:"cours-detail__premium-gate",children:[r.jsx("span",{className:"cours-detail__premium-gate-icon","aria-hidden":"true",children:""}),r.jsx("h3",{children:"Contenu Premium"}),r.jsxs("p",{children:["Cette section ncessite un abonnement Premium PedaClic.",r.jsx("br",{}),"Accdez  tous les cours complets  partir de ",r.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),n?r.jsx("button",{className:"btn-primary",onClick:()=>t("/premium"),children:" Passer Premium"}):r.jsx("button",{className:"btn-primary",onClick:()=>t("/connexion"),children:"Se connecter pour accder"})]})]}):r.jsx("div",{className:"cours-detail__vide-section",role:"status",children:r.jsx("p",{children:"Slectionnez une section dans le menu de gauche pour commencer."})})})]})]})}const oee=["image/jpeg","image/png","image/gif","image/webp"],cee=".jpg,.jpeg,.png,.gif,.webp",cP=({storagePath:e,existingUrl:t,onUploadComplete:n,onUploadStart:a,onUploadError:l,placeholder:o="Glissez une image ici ou cliquez pour parcourir",disabled:u=!1,maxSizeMo:d=5})=>{const[f,p]=g.useState({status:"idle",progress:0,errorMessage:null,previewUrl:t||null}),[h,v]=g.useState(!1),b=g.useRef(null),x=g.useCallback(R=>{if(!oee.includes(R.type))return`Type non support : ${R.type}. Utilisez JPG, PNG, GIF ou WebP.`;const F=R.size/(1024*1024);return F>d?`Fichier trop lourd : ${F.toFixed(1)} Mo (max ${d} Mo).`:null},[d]),N=R=>{const F=Date.now(),B=R.split(".").pop()?.toLowerCase()||"jpg";return`${R.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_").slice(0,30)}_${F}.${B}`},j=g.useCallback(async R=>{const F=x(R);if(F){p(X=>({...X,status:"error",errorMessage:F})),l?.(F);return}const B=URL.createObjectURL(R);p({status:"uploading",progress:0,errorMessage:null,previewUrl:B}),a?.();const G=N(R.name),V=`${e}/${G}`,M=Mr(Er,V),q=Mb(M,R,{contentType:R.type,customMetadata:{uploadedBy:"pedaclic-prof",originalName:R.name}});q.on("state_changed",X=>{const Q=Math.round(X.bytesTransferred/X.totalBytes*100);p($=>({...$,progress:Q}))},X=>{URL.revokeObjectURL(B);const Q=`Erreur upload : ${X.message}`;p($=>({...$,status:"error",errorMessage:Q,previewUrl:t||null})),l?.(Q)},async()=>{URL.revokeObjectURL(B);try{const X=await ca(q.snapshot.ref);p({status:"success",progress:100,errorMessage:null,previewUrl:X}),n(X)}catch{const Q="Impossible de rcuprer l'URL de tlchargement.";p($=>({...$,status:"error",errorMessage:Q})),l?.(Q)}})},[e,t,x,a,n,l]),S=R=>{const F=R.target.files?.[0];F&&j(F),R.target.value=""},C=R=>{R.preventDefault(),u||v(!0)},A=R=>{R.preventDefault(),v(!1)},w=R=>{if(R.preventDefault(),v(!1),u)return;const F=R.dataTransfer.files?.[0];F&&j(F)},E=async()=>{f.previewUrl&&(p({status:"idle",progress:0,errorMessage:null,previewUrl:null}),n(""))},{status:D,progress:O,errorMessage:T,previewUrl:P}=f,I=D==="uploading";return r.jsxs("div",{className:`image-uploader ${h?"image-uploader--drag-over":""} ${u?"image-uploader--disabled":""}`,children:[P&&r.jsxs("div",{className:"image-uploader__preview",children:[r.jsx("img",{src:P,alt:"Aperu",className:"image-uploader__preview-img"}),I&&r.jsx("div",{className:"image-uploader__overlay",children:r.jsx("div",{className:"image-uploader__spinner"})}),!I&&!u&&r.jsx("button",{type:"button",className:"image-uploader__remove-btn",onClick:E,title:"Supprimer l'image","aria-label":"Supprimer l'image",children:""})]}),!P&&r.jsxs("div",{className:"image-uploader__dropzone",onDragOver:C,onDragLeave:A,onDrop:w,onClick:()=>!u&&b.current?.click(),role:"button",tabIndex:u?-1:0,"aria-label":"Zone d'upload d'image",onKeyDown:R=>{(R.key==="Enter"||R.key===" ")&&!u&&b.current?.click()},children:[r.jsx("span",{className:"image-uploader__icon","aria-hidden":"true",children:""}),r.jsx("p",{className:"image-uploader__text",children:o}),r.jsxs("p",{className:"image-uploader__subtext",children:["JPG, PNG, GIF, WebP  max ",d," Mo"]}),r.jsx("button",{type:"button",className:"image-uploader__browse-btn",disabled:u,tabIndex:-1,"aria-hidden":"true",children:"Parcourir"})]}),I&&r.jsxs("div",{className:"image-uploader__progress",role:"progressbar","aria-valuenow":O,"aria-valuemin":0,"aria-valuemax":100,children:[r.jsx("div",{className:"image-uploader__progress-bar",style:{width:`${O}%`}}),r.jsxs("span",{className:"image-uploader__progress-text",children:["Upload en cours ",O,"%"]})]}),D==="success"&&r.jsx("p",{className:"image-uploader__success",children:" Image uploade avec succs"}),T&&r.jsxs("p",{className:"image-uploader__error",role:"alert",children:[" ",T]}),r.jsx("input",{ref:b,type:"file",accept:cee,onChange:S,disabled:u||I,style:{display:"none"},"aria-hidden":"true"})]})},lm=()=>crypto.randomUUID();function uee(e,t){const n={id:lm(),type:e,ordre:t,isPremium:!1};switch(e){case"texte":return{...n,type:"texte",contenu:""};case"image":return{...n,type:"image",url:"",alt:"",legende:""};case"video":return{...n,type:"video",urlYoutube:"",titre:"",description:""};case"encadre":return{...n,type:"encadre",variante:"definition",titre:"Dfinition",contenu:""};case"quiz":return{...n,type:"quiz",question:"",options:[{id:lm(),texte:"",estCorrecte:!0},{id:lm(),texte:"",estCorrecte:!1}],explication:""};case"exercice":return{...n,type:"exercice",enonce:"",correction:"",difficulte:"moyen"}}}function dee({bloc:e,index:t,total:n,onUpdate:a,onDelete:l,onMoveUp:o,onMoveDown:u,isDragging:d,onDragStart:f,onDragOver:p,onDrop:h,onDragEnd:v,dragOverIndex:b,storageBasePath:x,onBlocUploadStart:N,onBlocUploadEnd:j}){const S=Ob[e.type],C=b===t;function A(){switch(e.type){case"texte":return r.jsx("textarea",{className:"editor-bloc__textarea",placeholder:"Texte du paragraphe (Markdown : **gras**, *italique*, - liste)",value:e.contenu,onChange:w=>a({...e,contenu:w.target.value}),rows:4});case"image":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx(cP,{storagePath:`${x}/bloc-${t}`,existingUrl:e.url,placeholder:"Glissez l'image ici ou cliquez",onUploadStart:()=>N(t),onUploadComplete:w=>{a({...e,url:w}),j(t)},onUploadError:()=>j(t),maxSizeMo:5}),r.jsx("input",{type:"text",placeholder:"Texte alternatif (accessibilit)",value:e.alt,onChange:w=>a({...e,alt:w.target.value}),className:"editor-bloc__input"}),r.jsx("input",{type:"text",placeholder:"Lgende (optionnelle)",value:e.legende??"",onChange:w=>a({...e,legende:w.target.value}),className:"editor-bloc__input"})]});case"video":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("input",{type:"url",placeholder:"URL YouTube (ex: https://www.youtube.com/watch?v=...)",value:e.urlYoutube,onChange:w=>a({...e,urlYoutube:w.target.value}),className:"editor-bloc__input"}),r.jsx("input",{type:"text",placeholder:"Titre de la vido",value:e.titre,onChange:w=>a({...e,titre:w.target.value}),className:"editor-bloc__input"}),r.jsx("input",{type:"text",placeholder:"Description courte (optionnelle)",value:e.description??"",onChange:w=>a({...e,description:w.target.value}),className:"editor-bloc__input"})]});case"encadre":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("select",{value:e.variante,onChange:w=>a({...e,variante:w.target.value}),className:"editor-bloc__select",children:Object.entries(oP).map(([w,E])=>r.jsxs("option",{value:w,children:[E.emoji," ",E.label]},w))}),r.jsx("input",{type:"text",placeholder:"Titre de l'encadr",value:e.titre,onChange:w=>a({...e,titre:w.target.value}),className:"editor-bloc__input"}),r.jsx("textarea",{placeholder:"Contenu de l'encadr",value:e.contenu,onChange:w=>a({...e,contenu:w.target.value}),className:"editor-bloc__textarea",rows:3})]});case"quiz":{const w=e;return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("input",{type:"text",placeholder:"Question",value:w.question,onChange:E=>a({...w,question:E.target.value}),className:"editor-bloc__input"}),r.jsxs("div",{className:"editor-bloc__quiz-options",children:[w.options.map((E,D)=>r.jsxs("div",{className:"editor-bloc__quiz-option",children:[r.jsx("input",{type:"radio",name:`quiz-correct-${e.id}`,checked:E.estCorrecte,onChange:()=>a({...w,options:w.options.map((O,T)=>({...O,estCorrecte:T===D}))}),title:"Marquer comme bonne rponse"}),r.jsx("input",{type:"text",placeholder:`Option ${D+1}`,value:E.texte,onChange:O=>a({...w,options:w.options.map((T,P)=>P===D?{...T,texte:O.target.value}:T)}),className:"editor-bloc__input"}),w.options.length>2&&r.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:()=>a({...w,options:w.options.filter((O,T)=>T!==D)}),title:"Supprimer cette option",children:""})]},E.id)),w.options.length<4&&r.jsx("button",{type:"button",className:"btn-link",onClick:()=>a({...w,options:[...w.options,{id:lm(),texte:"",estCorrecte:!1}]}),children:"+ Ajouter une option"})]}),r.jsx("input",{type:"text",placeholder:"Explication aprs rponse (optionnelle)",value:w.explication??"",onChange:E=>a({...w,explication:E.target.value}),className:"editor-bloc__input"})]})}case"exercice":return r.jsxs("div",{className:"editor-bloc__form-grid",children:[r.jsx("textarea",{placeholder:"nonc de l'exercice",value:e.enonce,onChange:w=>a({...e,enonce:w.target.value}),className:"editor-bloc__textarea",rows:3}),r.jsx("textarea",{placeholder:"Correction (masque pour l'lve jusqu'au clic)",value:e.correction,onChange:w=>a({...e,correction:w.target.value}),className:"editor-bloc__textarea editor-bloc__textarea--correction",rows:3}),r.jsxs("div",{className:"editor-bloc__row",children:[r.jsxs("select",{value:e.difficulte,onChange:w=>a({...e,difficulte:w.target.value}),className:"editor-bloc__select",children:[r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]}),r.jsx("input",{type:"number",placeholder:"Points (opt.)",value:e.points??"",onChange:w=>a({...e,points:Number(w.target.value)||void 0}),className:"editor-bloc__input editor-bloc__input--sm",min:1})]})]});default:return null}}return r.jsxs("div",{className:["editor-bloc",d?"editor-bloc--dragging":"",C?"editor-bloc--drag-over":""].join(" "),draggable:!0,onDragStart:w=>f(w,t),onDragOver:w=>p(w,t),onDrop:w=>h(w,t),onDragEnd:v,children:[r.jsxs("div",{className:"editor-bloc__header",children:[r.jsx("span",{className:"editor-bloc__drag-handle",title:"Dplacer","aria-hidden":"true",children:""}),r.jsxs("span",{className:"editor-bloc__type-label",children:[S.emoji," ",S.label]}),r.jsxs("label",{className:"editor-bloc__premium-toggle",title:"Rserver aux abonns Premium",children:[r.jsx("input",{type:"checkbox",checked:e.isPremium,onChange:w=>a({...e,isPremium:w.target.checked})}),r.jsx("span",{children:" Premium"})]}),r.jsxs("div",{className:"editor-bloc__actions",children:[r.jsx("button",{type:"button",className:"btn-icon",onClick:o,disabled:t===0,title:"Monter","aria-label":"Monter ce bloc",children:""}),r.jsx("button",{type:"button",className:"btn-icon",onClick:u,disabled:t===n-1,title:"Descendre","aria-label":"Descendre ce bloc",children:""}),r.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:l,title:"Supprimer ce bloc","aria-label":"Supprimer ce bloc",children:""})]})]}),r.jsx("div",{className:"editor-bloc__form",children:A()})]})}function Zd(){const{coursId:e}=Yn(),t=it(),{currentUser:n}=rt(),a=!!e,{matieres:l}=dp(),[o]=g.useState(()=>je(Ne(W,"cours_en_ligne")).id),u=`cours-images/${a?e:o}`,[d,f]=g.useState({titre:"",description:"",matiere:"Mathmatiques",niveau:"3me",classe:"",isPremium:!1,statut:"brouillon",couvertureUrl:"",dureeEstimee:0,objectifs:[""],prerequis:"",tags:[]}),[p,h]=g.useState([]),[v,b]=g.useState(null),[x,N]=g.useState([]),[j,S]=g.useState(""),C=g.useRef(null),[A,w]=g.useState(null),E=g.useRef(null),[D,O]=g.useState(null),[T,P]=g.useState(null),[I,R]=g.useState(!1),[F,B]=g.useState(!1),[G,V]=g.useState(null),[M,q]=g.useState(null),[X,Q]=g.useState("infos"),[$,L]=g.useState(!1),[pe,te]=g.useState({});$||Object.values(pe).some(Boolean),g.useEffect(()=>{a&&e&&de(e)},[e]);async function de(le){R(!0);try{const[ye,Se]=await Promise.all([iP(le),sP(le)]);ye&&f({titre:ye.titre,description:ye.description,matiere:ye.matiere,niveau:ye.niveau,classe:ye.classe??"",isPremium:ye.isPremium,statut:ye.statut,couvertureUrl:ye.couvertureUrl??"",dureeEstimee:ye.dureeEstimee,objectifs:ye.objectifs.length>0?ye.objectifs:[""],prerequis:ye.prerequis??"",tags:ye.tags}),h(Se),Se.length>0&&(b(Se[0].id),N(Se[0].blocs),S(Se[0].titre))}catch{V("Erreur de chargement du cours.")}finally{R(!1)}}g.useEffect(()=>{if(!v)return;const le=p.find(ye=>ye.id===v);le&&(N([...le.blocs].sort((ye,Se)=>ye.ordre-Se.ordre)),S(le.titre))},[v]);const me=(le,ye)=>f(Se=>({...Se,[le]:ye})),xe=(le,ye)=>{const Se=[...d.objectifs];Se[le]=ye,me("objectifs",Se)},Y=()=>me("objectifs",[...d.objectifs,""]),he=le=>me("objectifs",d.objectifs.filter((ye,Se)=>Se!==le)),[Pe,se]=g.useState(""),J=()=>{const le=Pe.trim();le&&!d.tags.includes(le)&&me("tags",[...d.tags,le]),se("")},H=le=>me("tags",d.tags.filter(ye=>ye!==le));async function ce(le=!1){if(n){if(!d.titre.trim()){V("Le titre du cours est obligatoire.");return}B(!0),V(null);try{const ye={...d,objectifs:d.objectifs.filter(Se=>Se.trim()),statut:le?"publie":d.statut};if(a&&e)await $J(e,ye),le&&await zb(e),Z(le?" Cours publi !":" Cours sauvegard.");else{const Se=n.displayName??"Professeur",Ge=await LJ(n.uid,Se,ye);le&&await zb(Ge),Z(" Cours cr ! Ajoutez maintenant vos sections."),t(`/prof/cours/${Ge}/modifier`)}}catch(ye){console.error("[CoursEditorPage] Erreur sauvegarde :",ye),V("Erreur lors de la sauvegarde. Ressayez.")}finally{B(!1)}}}function Z(le){q(le),setTimeout(()=>q(null),4e3)}async function _e(){if(!e){V("Sauvegardez d'abord le cours pour ajouter des sections.");return}const le=p.length+1,ye=`Section ${le}`;try{const Se=await FJ(e,{titre:ye,ordre:le,blocs:[],dureeEstimee:0,estGratuite:le===1}),Ge=Oe.now(),qt={id:Se,coursId:e,titre:ye,ordre:le,blocs:[],dureeEstimee:0,estGratuite:le===1,createdAt:Ge,updatedAt:Ge};h(Pt=>[...Pt,qt]),b(Se),N([]),S(ye)}catch{V("Erreur lors de la cration de la section.")}}async function Fe(le){if(e&&confirm("Supprimer cette section et tous ses blocs ?"))try{await GJ(le,e);const ye=p.filter(Se=>Se.id!==le).map((Se,Ge)=>({...Se,ordre:Ge+1}));h(ye),v===le&&b(ye[0]?.id??null)}catch{V("Erreur lors de la suppression.")}}async function Ve(){if(v)try{await KE(v,{titre:j}),h(le=>le.map(ye=>ye.id===v?{...ye,titre:j}:ye))}catch{V("Erreur lors de la mise  jour du titre.")}}function We(le,ye){C.current=ye,le.dataTransfer.effectAllowed="move"}function Ft(le,ye){le.preventDefault(),le.dataTransfer.dropEffect="move",w(ye)}async function Wr(le,ye){le.preventDefault(),w(null);const Se=C.current;if(Se===null||Se===ye)return;const Ge=[...p],[qt]=Ge.splice(Se,1);Ge.splice(ye,0,qt);const Pt=Ge.map((vn,Xi)=>({...vn,ordre:Xi+1}));h(Pt);try{await HJ(Pt.map(vn=>({id:vn.id,ordre:vn.ordre})))}catch{V("Erreur lors du rordonnancement. Rechargez la page.")}C.current=null}function Rr(le){const ye=uee(le,x.length),Se=[...x,ye];N(Se),ct(Se)}function Rn(le,ye){const Se=x.map((Ge,qt)=>qt===le?ye:Ge);N(Se),ct(Se)}function fe(le){const ye=x.filter((Se,Ge)=>Ge!==le);N(ye),ct(ye)}function Me(le){if(le===0)return;const ye=[...x];[ye[le-1],ye[le]]=[ye[le],ye[le-1]],N(ye),ct(ye)}function Re(le){if(le===x.length-1)return;const ye=[...x];[ye[le],ye[le+1]]=[ye[le+1],ye[le]],N(ye),ct(ye)}const He=g.useRef(null);function ct(le){v&&(He.current&&clearTimeout(He.current),He.current=setTimeout(async()=>{try{await QJ(v,le),h(ye=>ye.map(Se=>Se.id===v?{...Se,blocs:le}:Se))}catch(ye){console.error("[CoursEditorPage] Erreur sauvegarde blocs :",ye)}},1500))}function ar(le,ye){E.current=ye,P(ye),le.dataTransfer.effectAllowed="move"}function hn(le,ye){le.preventDefault(),le.dataTransfer.dropEffect="move",O(ye)}function oi(le,ye){le.preventDefault(),O(null),P(null);const Se=E.current;if(Se===null||Se===ye)return;const Ge=[...x],[qt]=Ge.splice(Se,1);Ge.splice(ye,0,qt);const Pt=Ge.map((vn,Xi)=>({...vn,ordre:Xi}));N(Pt),ct(Pt),E.current=null}function Ir(){O(null),P(null),E.current=null}return I?r.jsxs("div",{className:"cours-editor__loading","aria-busy":"true",children:[r.jsx("div",{className:"spinner spinner--blue"}),r.jsx("p",{children:"Chargement de l'diteur..."})]}):r.jsxs("div",{className:"cours-editor",children:[r.jsxs("header",{className:"cours-editor__header",children:[r.jsxs("p",{className:"cours-editor__breadcrumb",children:[r.jsx("button",{className:"btn-link",onClick:()=>t("/prof/cours"),children:" Mes cours"})," / ",a?"Modifier le cours":"Nouveau cours"]}),r.jsxs("div",{className:"cours-editor__header-actions",children:[r.jsx("h1",{className:"cours-editor__titre",children:a?" Modifier le cours":" Nouveau cours"}),r.jsxs("div",{className:"cours-editor__btn-group",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>t("/prof/cours"),disabled:F,children:"Annuler"}),r.jsx("button",{className:"btn-secondary",onClick:()=>ce(!1),disabled:F,children:F?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Sauvegarde..."]}):" Sauvegarder"}),r.jsx("button",{className:"btn-primary",onClick:()=>ce(!0),disabled:F||d.statut==="publie",children:d.statut==="publie"?" Publi":" Publier"})]})]}),G&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",G]}),M&&r.jsx("div",{className:"success-banner",role:"status",children:M})]}),r.jsxs("div",{className:"cours-editor__tabs",role:"tablist",children:[r.jsx("button",{className:`cours-editor__tab ${X==="infos"?"cours-editor__tab--active":""}`,onClick:()=>Q("infos"),role:"tab","aria-selected":X==="infos",children:" Informations du cours"}),r.jsxs("button",{className:`cours-editor__tab ${X==="sections"?"cours-editor__tab--active":""}`,onClick:()=>Q("sections"),role:"tab","aria-selected":X==="sections",disabled:!a&&!e,children:[" Sections et contenu ",p.length>0&&`(${p.length})`]})]}),X==="infos"&&r.jsxs("section",{className:"cours-editor__form","aria-label":"Informations du cours",children:[r.jsxs("div",{className:"cours-editor__card",children:[r.jsx("h2",{className:"cours-editor__card-titre",children:" Informations gnrales"}),r.jsxs("div",{className:"cours-editor__form-grid",children:[r.jsxs("div",{className:"cours-editor__field cours-editor__field--full",children:[r.jsx("label",{htmlFor:"titre",children:"Titre du cours *"}),r.jsx("input",{id:"titre",type:"text",value:d.titre,onChange:le=>me("titre",le.target.value),placeholder:"Ex : Les fonctions affines  Terminale S",className:"cours-editor__input",required:!0})]}),r.jsxs("div",{className:"cours-editor__field cours-editor__field--full",children:[r.jsx("label",{htmlFor:"description",children:"Description *"}),r.jsx("textarea",{id:"description",value:d.description,onChange:le=>me("description",le.target.value),placeholder:"Description courte affiche dans le catalogue",className:"cours-editor__textarea",rows:3})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"matiere",children:"Matire *"}),r.jsx("select",{id:"matiere",value:d.matiere,onChange:le=>me("matiere",le.target.value),className:"cours-editor__select",children:l.map(le=>r.jsx("option",{value:le.valeur,children:le.label},le.valeur))})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),r.jsx("select",{id:"niveau",value:d.niveau,onChange:le=>me("niveau",le.target.value),className:"cours-editor__select",children:mp.map(le=>r.jsx("option",{value:le,children:le},le))})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"classe",children:"Classe (optionnelle)"}),r.jsx("input",{id:"classe",type:"text",value:d.classe??"",onChange:le=>me("classe",le.target.value),placeholder:"Ex : 3me A, TS, L2",className:"cours-editor__input"})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsxs("label",{htmlFor:"couverture",children:[" Image de couverture",r.jsx("span",{className:"cours-editor__label-hint",children:"(JPG, PNG, WebP  max 5 Mo)"})]}),r.jsx(cP,{storagePath:`${u}/couverture`,existingUrl:d.couvertureUrl,placeholder:"Glissez l'image de couverture ici ou cliquez",disabled:F,onUploadStart:()=>L(!0),onUploadComplete:le=>{me("couvertureUrl",le),L(!1)},onUploadError:le=>{console.error("[Phase 25] Erreur couverture:",le),L(!1)},maxSizeMo:5}),$&&r.jsx("p",{className:"cours-editor__upload-hint",children:" Upload en cours, patientez avant d'enregistrer"})]}),r.jsx("div",{className:"cours-editor__field cours-editor__field--full",children:r.jsxs("label",{className:"cours-editor__toggle-label",children:[r.jsx("input",{type:"checkbox",checked:d.isPremium,onChange:le=>me("isPremium",le.target.checked)}),r.jsx("span",{children:" Cours Premium  Les sections (sauf la 1re) ncessitent un abonnement"})]})})]})]}),r.jsxs("div",{className:"cours-editor__card",children:[r.jsx("h2",{className:"cours-editor__card-titre",children:" Objectifs pdagogiques"}),d.objectifs.map((le,ye)=>r.jsxs("div",{className:"cours-editor__objectif-row",children:[r.jsx("input",{type:"text",value:le,onChange:Se=>xe(ye,Se.target.value),placeholder:`Objectif ${ye+1} (ex : Savoir calculer une drive)`,className:"cours-editor__input"}),d.objectifs.length>1&&r.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:()=>he(ye),title:"Supprimer cet objectif",children:""})]},ye)),r.jsx("button",{type:"button",className:"btn-link",onClick:Y,children:"+ Ajouter un objectif"})]}),r.jsxs("div",{className:"cours-editor__card",children:[r.jsx("h2",{className:"cours-editor__card-titre",children:" Prrequis et tags"}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{htmlFor:"prerequis",children:"Prrequis conseills"}),r.jsx("input",{id:"prerequis",type:"text",value:d.prerequis??"",onChange:le=>me("prerequis",le.target.value),placeholder:"Ex : Matriser les quations du 2nd degr",className:"cours-editor__input"})]}),r.jsxs("div",{className:"cours-editor__field",children:[r.jsx("label",{children:"Tags (aide  la recherche)"}),r.jsxs("div",{className:"cours-editor__tags-wrapper",children:[d.tags.map(le=>r.jsxs("span",{className:"cours-editor__tag",children:[le,r.jsx("button",{type:"button",onClick:()=>H(le),"aria-label":`Supprimer le tag ${le}`,children:""})]},le)),r.jsxs("div",{className:"cours-editor__tag-input-row",children:[r.jsx("input",{type:"text",value:Pe,onChange:le=>se(le.target.value),onKeyDown:le=>le.key==="Enter"&&(le.preventDefault(),J()),placeholder:"Ajouter un tag...",className:"cours-editor__input cours-editor__input--sm"}),r.jsx("button",{type:"button",className:"btn-secondary btn--sm",onClick:J,children:"+ Tag"})]})]})]})]})]}),X==="sections"&&r.jsx("section",{className:"cours-editor__sections","aria-label":"diteur de sections",children:a?r.jsxs("div",{className:"cours-editor__sections-layout",children:[r.jsxs("aside",{className:"cours-editor__sections-sidebar",children:[r.jsxs("div",{className:"cours-editor__sections-sidebar-header",children:[r.jsx("h2",{children:" Sections"}),r.jsx("button",{className:"btn-primary btn--sm",onClick:_e,children:"+ Ajouter"})]}),p.length===0?r.jsx("p",{className:"cours-editor__sections-empty-hint",children:'Aucune section. Cliquez sur "+ Ajouter" pour commencer.'}):r.jsx("ol",{className:"cours-editor__sections-liste",children:p.map((le,ye)=>r.jsxs("li",{className:["cours-editor__section-item",le.id===v?"cours-editor__section-item--active":"",A===ye?"cours-editor__section-item--drag-over":""].join(" "),draggable:!0,onDragStart:Se=>We(Se,ye),onDragOver:Se=>Ft(Se,ye),onDrop:Se=>Wr(Se,ye),onDragEnd:()=>w(null),children:[r.jsx("span",{className:"cours-editor__section-drag","aria-hidden":"true",children:""}),r.jsxs("button",{className:"cours-editor__section-btn",onClick:()=>b(le.id),"aria-current":le.id===v?"true":void 0,children:[r.jsx("span",{className:"cours-editor__section-ordre",children:le.ordre}),r.jsxs("span",{className:"cours-editor__section-nom",children:[le.titre,le.estGratuite&&r.jsx("span",{className:"cours-editor__section-gratuite",title:"Section gratuite",children:"G"})]}),r.jsxs("span",{className:"cours-editor__section-blocs-count",children:[le.blocs.length," bloc",le.blocs.length>1?"s":""]})]}),r.jsx("button",{className:"btn-icon btn-icon--danger btn-icon--xs",onClick:()=>Fe(le.id),title:"Supprimer cette section","aria-label":`Supprimer la section ${le.titre}`,children:""})]},le.id))})]}),v?r.jsxs("div",{className:"cours-editor__section-content",children:[r.jsxs("div",{className:"cours-editor__section-titre-row",children:[r.jsx("input",{type:"text",value:j,onChange:le=>S(le.target.value),onBlur:Ve,className:"cours-editor__section-titre-input",placeholder:"Titre de la section","aria-label":"Titre de la section"}),r.jsxs("label",{className:"cours-editor__toggle-label",children:[r.jsx("input",{type:"checkbox",checked:p.find(le=>le.id===v)?.estGratuite??!1,onChange:async le=>{try{await KE(v,{estGratuite:le.target.checked}),h(ye=>ye.map(Se=>Se.id===v?{...Se,estGratuite:le.target.checked}:Se))}catch{}}}),r.jsx("span",{children:"Gratuite"})]})]}),r.jsxs("div",{className:"cours-editor__palette","aria-label":"Ajouter un bloc",children:[r.jsx("span",{className:"cours-editor__palette-label",children:"Ajouter un bloc :"}),Object.keys(Ob).map(le=>{const ye=Ob[le];return r.jsxs("button",{className:"cours-editor__palette-btn",onClick:()=>Rr(le),title:ye.description,children:[ye.emoji," ",ye.label]},le)})]}),x.length===0?r.jsxs("div",{className:"cours-editor__blocs-empty",children:[r.jsx("p",{children:" Aucun bloc dans cette section."}),r.jsx("p",{children:"Utilisez la palette ci-dessus pour ajouter du contenu."})]}):r.jsx("div",{className:"cours-editor__blocs-liste","aria-label":"Blocs de la section",children:x.map((le,ye)=>r.jsx(dee,{bloc:le,index:ye,total:x.length,onUpdate:Se=>Rn(ye,Se),onDelete:()=>fe(ye),onMoveUp:()=>Me(ye),onMoveDown:()=>Re(ye),isDragging:T===ye,onDragStart:ar,onDragOver:hn,onDrop:oi,onDragEnd:Ir,dragOverIndex:D,storageBasePath:`${u}/section-${v}`,onBlocUploadStart:Se=>{const Ge=`${v}-${Se}`;te(qt=>({...qt,[Ge]:!0}))},onBlocUploadEnd:Se=>{const Ge=`${v}-${Se}`;te(qt=>({...qt,[Ge]:!1}))}},le.id))})]}):r.jsx("div",{className:"cours-editor__section-content-empty",children:r.jsx("p",{children:"Slectionnez ou crez une section pour commencer  diter."})})]}):r.jsxs("div",{className:"cours-editor__sections-empty",children:[r.jsx("p",{children:"Sauvegardez d'abord les informations du cours pour ajouter des sections."}),r.jsx("button",{className:"btn-primary",onClick:()=>Q("infos"),children:" Revenir aux informations"})]})})]})}function mee({cours:e,onModifier:t,onPublier:n,onArchiver:a,onSupprimer:l,onVoirStats:o}){const u=YJ[e.statut],d=yj.find(f=>f.valeur===e.niveau)?.label??e.niveau;return r.jsxs("article",{className:"prof-cours-card",children:[r.jsxs("div",{className:"prof-cours-card__header",children:[r.jsxs("div",{className:"prof-cours-card__header-left",children:[r.jsx("span",{className:"prof-cours-card__statut",style:{color:u.couleur,background:u.bg},children:u.label}),e.isPremium&&r.jsx("span",{className:"badge badge--premium",children:" Premium"})]}),r.jsxs("div",{className:"prof-cours-card__actions",children:[r.jsx("button",{className:"btn-icon",onClick:t,title:"Modifier","aria-label":`Modifier ${e.titre}`,children:""}),e.statut==="brouillon"&&r.jsx("button",{className:"btn-icon btn-icon--success",onClick:n,title:"Publier","aria-label":`Publier ${e.titre}`,children:""}),e.statut==="publie"&&r.jsx("button",{className:"btn-icon",onClick:a,title:"Archiver","aria-label":`Archiver ${e.titre}`,children:""}),r.jsx("button",{className:"btn-icon btn-icon--info",onClick:o,title:"Voir les statistiques","aria-label":`Statistiques de ${e.titre}`,children:""}),r.jsx("button",{className:"btn-icon btn-icon--danger",onClick:l,title:"Supprimer","aria-label":`Supprimer ${e.titre}`,children:""})]})]}),r.jsxs("div",{className:"prof-cours-card__body",children:[r.jsx("h3",{className:"prof-cours-card__titre",children:e.titre}),r.jsx("p",{className:"prof-cours-card__description",children:e.description}),r.jsxs("div",{className:"prof-cours-card__meta",children:[r.jsx("span",{className:"badge badge--matiere",children:e.matiere}),r.jsx("span",{className:"badge badge--niveau",children:d}),e.classe&&r.jsx("span",{className:"badge badge--classe",children:e.classe})]})]}),r.jsxs("div",{className:"prof-cours-card__footer",children:[r.jsxs("span",{title:"Sections",children:[" ",e.nombreSections," section",e.nombreSections>1?"s":""]}),r.jsxs("span",{title:"Dure estime",children:[" ",e.dureeEstimee," min"]}),r.jsxs("span",{title:"lves inscrits",children:[" ",e.nombreInscrits," lve",e.nombreInscrits>1?"s":""]})]})]})}function fee({cours:e,onClose:t}){const[n,a]=g.useState(null),[l,o]=g.useState(!0);g.useEffect(()=>{u()},[e.id]);async function u(){try{const d=await WJ(e.id);a(eee(d))}catch(d){console.error("[StatsModal] Erreur :",d)}finally{o(!1)}}return r.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":`Statistiques du cours : ${e.titre}`,onClick:d=>{d.target===d.currentTarget&&t()},children:r.jsxs("div",{className:"modal-content",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:[" Statistiques  ",e.titre]}),r.jsx("button",{className:"btn-icon",onClick:t,"aria-label":"Fermer",children:""})]}),r.jsx("div",{className:"modal-body",children:l?r.jsxs("div",{className:"modal-loading",children:[r.jsx("div",{className:"spinner spinner--blue"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):n?r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stats-card",children:[r.jsx("span",{className:"stats-card__val",children:n.nombreInscrits}),r.jsx("span",{className:"stats-card__label",children:"lves inscrits"})]}),r.jsxs("div",{className:"stats-card stats-card--success",children:[r.jsx("span",{className:"stats-card__val",children:n.nombreTermines}),r.jsx("span",{className:"stats-card__label",children:"Cours termins"})]}),r.jsxs("div",{className:"stats-card stats-card--info",children:[r.jsxs("span",{className:"stats-card__val",children:[n.tauxCompletion,"%"]}),r.jsx("span",{className:"stats-card__label",children:"Taux de compltion"})]}),r.jsxs("div",{className:"stats-card",children:[r.jsxs("span",{className:"stats-card__val",children:[n.progressionMoyenne,"%"]}),r.jsx("span",{className:"stats-card__label",children:"Progression moyenne"})]}),r.jsxs("div",{className:"stats-card stats-card--primary",children:[r.jsxs("span",{className:"stats-card__val",children:[n.scoreMoyen,"%"]}),r.jsx("span",{className:"stats-card__label",children:"Score moyen aux quiz"})]}),r.jsxs("div",{className:"stats-progress-bar-wrapper",children:[r.jsx("label",{children:"Progression globale des lves"}),r.jsx("div",{className:"progression-bar",children:r.jsx("div",{className:"progression-bar__fill",style:{width:`${n.progressionMoyenne}%`}})})]})]}):r.jsx("p",{className:"modal-vide",children:"Aucune donne disponible pour ce cours."})})]})})}function JE(){const e=it(),{currentUser:t}=rt(),[n,a]=g.useState([]),[l,o]=g.useState([]),[u,d]=g.useState(!0),[f,p]=g.useState(null),[h,v]=g.useState(null),[b,x]=g.useState(""),[N,j]=g.useState(null);g.useEffect(()=>{t&&S()},[t]);async function S(){if(t){d(!0),p(null);try{const O=await IJ(t.uid);a(O),o(O)}catch{p("Impossible de charger vos cours.")}finally{d(!1)}}}function C(O){x(O),o(O?n.filter(T=>T.statut===O):n)}async function A(O){if(confirm("Publier ce cours dans le catalogue ?"))try{await zb(O),a(T=>T.map(P=>P.id===O?{...P,statut:"publie"}:P)),o(T=>T.map(P=>P.id===O?{...P,statut:"publie"}:P)),D(" Cours publi dans le catalogue !")}catch{p("Erreur lors de la publication.")}}async function w(O){if(confirm("Archiver ce cours ? Il ne sera plus visible dans le catalogue."))try{await BJ(O),a(T=>T.map(P=>P.id===O?{...P,statut:"archive"}:P)),o(T=>T.map(P=>P.id===O?{...P,statut:"archive"}:P)),D(" Cours archiv.")}catch{p("Erreur lors de l'archivage.")}}async function E(O,T){if(confirm(`Supprimer dfinitivement le cours "${T}" et tout son contenu ? Cette action est irrversible.`))try{await UJ(O);const P=n.filter(I=>I.id!==O);a(P),o(P.filter(I=>!b||I.statut===b)),D(" Cours supprim.")}catch{p("Erreur lors de la suppression.")}}function D(O){v(O),setTimeout(()=>v(null),4e3)}return r.jsxs("div",{className:"prof-cours-page",children:[r.jsxs("header",{className:"prof-cours-page__header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"prof-cours-page__titre",children:" Mes cours en ligne"}),r.jsx("p",{className:"prof-cours-page__sous-titre",children:"Crez, grez et publiez vos cours pour vos lves."})]}),r.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/cours/nouveau"),children:" Crer un cours"})]}),f&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",f]}),h&&r.jsx("div",{className:"success-banner",role:"status",children:h}),!u&&n.length>0&&r.jsxs("div",{className:"prof-cours-page__stats","aria-label":"Rsum de mes cours",children:[r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",children:n.length}),r.jsx("span",{children:"Total"})]}),r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#16a34a"},children:n.filter(O=>O.statut==="publie").length}),r.jsx("span",{children:"Publis"})]}),r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#ca8a04"},children:n.filter(O=>O.statut==="brouillon").length}),r.jsx("span",{children:"Brouillons"})]}),r.jsxs("div",{className:"prof-cours-page__stat",children:[r.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#2563eb"},children:n.reduce((O,T)=>O+T.nombreInscrits,0)}),r.jsx("span",{children:"lves inscrits"})]})]}),!u&&n.length>0&&r.jsx("div",{className:"prof-cours-page__filtres",role:"tablist","aria-label":"Filtrer par statut",children:[{val:"",label:`Tous (${n.length})`},{val:"publie",label:`Publis (${n.filter(O=>O.statut==="publie").length})`},{val:"brouillon",label:`Brouillons (${n.filter(O=>O.statut==="brouillon").length})`},{val:"archive",label:`Archivs (${n.filter(O=>O.statut==="archive").length})`}].map(O=>r.jsx("button",{className:`prof-cours-page__filtre-btn ${b===O.val?"prof-cours-page__filtre-btn--active":""}`,onClick:()=>C(O.val),role:"tab","aria-selected":b===O.val,children:O.label},O.val))}),r.jsxs("main",{className:"prof-cours-page__grille",children:[u&&r.jsx("div",{className:"prof-cours-page__grille-inner","aria-busy":"true",children:[1,2,3].map(O=>r.jsxs("div",{className:"prof-cours-card prof-cours-card--skeleton",children:[r.jsx("div",{className:"skeleton",style:{height:20,marginBottom:12}}),r.jsx("div",{className:"skeleton",style:{height:16,width:"60%",marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:14,width:"80%"}})]},O))}),!u&&l.length>0&&r.jsx("div",{className:"prof-cours-page__grille-inner",children:l.map(O=>r.jsx(mee,{cours:O,onModifier:()=>e(`/prof/cours/${O.id}/modifier`),onPublier:()=>A(O.id),onArchiver:()=>w(O.id),onSupprimer:()=>E(O.id,O.titre),onVoirStats:()=>j(O)},O.id))}),!u&&l.length===0&&r.jsxs("div",{className:"prof-cours-page__vide",role:"status",children:[r.jsx("span",{"aria-hidden":"true",children:""}),r.jsx("h3",{children:n.length===0?"Vous n'avez pas encore cr de cours.":"Aucun cours dans cette catgorie."}),n.length===0&&r.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/cours/nouveau"),children:" Crer mon premier cours"})]})]}),N&&r.jsx(fee,{cours:N,onClose:()=>j(null)})]})}function pee(e){return e.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}const hee=({notif:e,onLire:t,onArchiver:n,onSupprimer:a,onNavigate:l})=>{const o=um[e.type],u=e.statut==="non_lue";return r.jsxs("article",{className:`notif-page__item ${u?"notif-page__item--unread":""}`,"aria-label":`Notification : ${e.titre}`,children:[r.jsx("div",{className:"notif-page__item-icon",style:{background:o.couleur+"20",color:o.couleur},"aria-hidden":"true",children:o.icone}),r.jsxs("div",{className:"notif-page__item-body",children:[r.jsxs("div",{className:"notif-page__item-header",children:[r.jsx("h3",{className:"notif-page__item-titre",children:e.titre}),u&&r.jsx("span",{className:"notif-page__item-badge",children:"Nouvelle"})]}),r.jsx("p",{className:"notif-page__item-message",children:e.message}),r.jsxs("div",{className:"notif-page__item-meta",children:[e.emetteurNom&&r.jsxs("span",{className:"notif-page__item-emetteur",children:["De : ",e.emetteurNom]}),r.jsx("span",{className:"notif-page__item-date",children:pee(e.createdAt)}),r.jsx("span",{className:"notif-page__item-type",style:{color:o.couleur},children:qb[e.type]})]}),e.lienAction&&r.jsx("button",{className:"notif-page__item-action-btn",onClick:()=>l(e),children:e.labelAction||"Voir "})]}),r.jsxs("div",{className:"notif-page__item-actions",children:[u&&r.jsx("button",{className:"notif-page__action-btn notif-page__action-btn--read",onClick:()=>t(e.id),title:"Marquer comme lu","aria-label":"Marquer comme lu",children:""}),e.statut!=="archivee"&&r.jsx("button",{className:"notif-page__action-btn notif-page__action-btn--archive",onClick:()=>n(e.id),title:"Archiver","aria-label":"Archiver la notification",children:""}),r.jsx("button",{className:"notif-page__action-btn notif-page__action-btn--delete",onClick:()=>a(e.id),title:"Supprimer","aria-label":"Supprimer la notification",children:""})]})]})},vee=()=>{const{currentUser:e}=rt(),t=it(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[f,p]=g.useState("toutes"),[h,v]=g.useState("tous"),[b,x]=g.useState(!1),N=g.useCallback(async()=>{if(e){o(!0),d(null);try{const O=await P3(e.uid,{includeArchived:f==="archivee",limitCount:100});a(O)}catch(O){d("Impossible de charger les notifications."),console.error("[Phase 26] Erreur chargement notifications:",O)}finally{o(!1)}}},[e,f]);g.useEffect(()=>{N()},[N]);const j=n.filter(O=>{const T=f==="toutes"||O.statut===f,P=h==="tous"||O.type===h;return T&&P}),S=n.filter(O=>O.statut==="non_lue").length,C=async O=>{await Cx(O),a(T=>T.map(P=>P.id===O?{...P,statut:"lue",luAt:new Date}:P))},A=async O=>{await q3(O),a(T=>T.map(P=>P.id===O?{...P,statut:"archivee"}:P))},w=async O=>{window.confirm("Supprimer cette notification ?")&&(await R3(O),a(T=>T.filter(P=>P.id!==O)))},E=async O=>{O.statut==="non_lue"&&await Cx(O.id),O.lienAction&&t(O.lienAction)},D=async()=>{if(!(!e||b)){x(!0);try{await cA(e.uid),a(O=>O.map(T=>T.statut==="non_lue"?{...T,statut:"lue",luAt:new Date}:T))}finally{x(!1)}}};return r.jsxs("div",{className:"notif-page",children:[r.jsxs("div",{className:"notif-page__header",children:[r.jsxs("div",{className:"notif-page__header-left",children:[r.jsx("h1",{className:"notif-page__title",children:" Notifications"}),S>0&&r.jsxs("span",{className:"notif-page__unread-count",children:[S," non ",S>1?"lues":"lue"]})]}),S>0&&r.jsx("button",{className:"notif-page__mark-all-btn",onClick:D,disabled:b,children:b?"En cours":" Tout marquer comme lu"})]}),r.jsxs("div",{className:"notif-page__filters",children:[r.jsxs("div",{className:"notif-page__filter-group",children:[r.jsx("label",{className:"notif-page__filter-label",children:"Statut"}),r.jsx("div",{className:"notif-page__filter-tabs",children:["toutes","non_lue","lue","archivee"].map(O=>r.jsx("button",{className:`notif-page__filter-tab ${f===O?"notif-page__filter-tab--active":""}`,onClick:()=>p(O),children:O==="toutes"?"Toutes":O==="non_lue"?" Non lues":O==="lue"?" Lues":" Archives"},O))})]}),r.jsxs("div",{className:"notif-page__filter-group",children:[r.jsx("label",{className:"notif-page__filter-label",children:"Type"}),r.jsxs("select",{className:"notif-page__filter-select",value:h,onChange:O=>v(O.target.value),children:[r.jsx("option",{value:"tous",children:"Tous les types"}),Object.entries(qb).map(([O,T])=>r.jsx("option",{value:O,children:T},O))]})]})]}),l?r.jsx("div",{className:"notif-page__loading",children:[1,2,3].map(O=>r.jsx("div",{className:"notif-page__skeleton"},O))}):u?r.jsxs("div",{className:"notif-page__error",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{onClick:N,className:"notif-page__retry-btn",children:"Ressayer"})]}):j.length===0?r.jsxs("div",{className:"notif-page__empty",children:[r.jsx("span",{className:"notif-page__empty-icon",children:""}),r.jsx("p",{className:"notif-page__empty-title",children:"Aucune notification"}),r.jsx("p",{className:"notif-page__empty-sub",children:f==="non_lue"?"Vous tes  jour, aucune notification non lue.":"Aucune notification correspondant  vos filtres."})]}):r.jsx("div",{className:"notif-page__list",children:j.map(O=>r.jsx(hee,{notif:O,onLire:C,onArchiver:A,onSupprimer:w,onNavigate:E},O.id))})]})},eA={type:"annonce",titre:"",message:"",lienAction:"",labelAction:"",modeDestinataire:"role",destinataireEmail:"",destinataireId:"",groupeId:"",roleDestinataire:"eleve",canal:"les_deux"},tA=()=>{const{currentUser:e}=rt(),t=it(),[n,a]=g.useState(eA),[l,o]=g.useState([]),[u,d]=g.useState("idle"),[f,p]=g.useState(null),[h,v]=g.useState(0);g.useEffect(()=>{if(!e)return;const A=e.role==="admin"?De(Ne(W,"groupes_prof")):De(Ne(W,"groupes_prof"),we("profId","==",e.uid));ze(A).then(w=>{o(w.docs.map(E=>({id:E.id,nom:E.data().nom,classe:E.data().classe,nombreInscrits:E.data().nombreInscrits??0})))})},[e]);const b=(C,A)=>{a(w=>({...w,[C]:A}))},x=C=>{const A=um[C];a(w=>({...w,type:C,titre:A.titreDefaut,message:A.messageDefaut}))},N=()=>!(!n.titre.trim()||!n.message.trim()||n.modeDestinataire==="individuel"&&!n.destinataireEmail.trim()||n.modeDestinataire==="groupe"&&!n.groupeId),j=async()=>{if(!(!e||!N())){d("sending"),p(null);try{const C={type:n.type,titre:n.titre,message:n.message,lienAction:n.lienAction||void 0,labelAction:n.labelAction||void 0,emetteurId:e.uid,emetteurNom:e.displayName||e.email||"PedaClic",canal:n.canal};if(n.modeDestinataire==="individuel")await D3({...C,destinataireId:n.destinataireId||n.destinataireEmail,destinataireRole:"eleve",emailDestinataire:n.canal!=="in_app"?n.destinataireEmail:void 0,emailDestinatairNom:n.destinataireEmail}),v(1);else if(n.modeDestinataire==="groupe"){const A=await M3(n.groupeId,{...C,destinataireRole:"eleve"});v(A)}else{const A=await k3(n.roleDestinataire,C);v(A)}d("success")}catch(C){p(C instanceof Error?C.message:"Erreur inconnue"),d("error")}}},S=()=>{a(eA),d("idle"),p(null),v(0)};return u==="success"?r.jsx("div",{className:"notif-composer notif-composer--success",children:r.jsxs("div",{className:"notif-composer__success-card",children:[r.jsx("span",{className:"notif-composer__success-icon",children:""}),r.jsx("h2",{children:"Notification envoye !"}),r.jsxs("p",{children:[r.jsx("strong",{children:h})," destinataire",h>1?"s":""," notifi",h>1?"s":"","."]}),r.jsxs("div",{className:"notif-composer__success-actions",children:[r.jsx("button",{className:"notif-composer__btn notif-composer__btn--primary",onClick:S,children:" Nouvelle notification"}),r.jsx("button",{className:"notif-composer__btn notif-composer__btn--secondary",onClick:()=>t(-1),children:" Retour"})]})]})}):r.jsxs("div",{className:"notif-composer",children:[r.jsxs("div",{className:"notif-composer__header",children:[r.jsx("button",{className:"notif-composer__back-btn",onClick:()=>t(-1),children:" Retour"}),r.jsx("h1",{className:"notif-composer__title",children:" Envoyer une notification"})]}),r.jsxs("div",{className:"notif-composer__form",children:[r.jsxs("section",{className:"notif-composer__section",children:[r.jsx("h2",{className:"notif-composer__section-title",children:"1. Type de notification"}),r.jsx("div",{className:"notif-composer__type-grid",children:Object.entries(qb).filter(([C])=>!["bienvenue","nouveau_abonnement","resultat_quiz"].includes(C)).map(([C,A])=>{const w=um[C];return r.jsxs("button",{className:`notif-composer__type-card ${n.type===C?"notif-composer__type-card--active":""}`,onClick:()=>x(C),style:n.type===C?{borderColor:w.couleur,background:w.couleur+"12"}:{},children:[r.jsx("span",{className:"notif-composer__type-icon",children:w.icone}),r.jsx("span",{className:"notif-composer__type-label",children:A})]},C)})})]}),r.jsxs("section",{className:"notif-composer__section",children:[r.jsx("h2",{className:"notif-composer__section-title",children:"2. Destinataires"}),r.jsx("div",{className:"notif-composer__mode-tabs",children:[{value:"role",label:" Par rle"},{value:"groupe",label:" Groupe-classe"},{value:"individuel",label:" Individuel"}].map(({value:C,label:A})=>r.jsx("button",{className:`notif-composer__mode-tab ${n.modeDestinataire===C?"notif-composer__mode-tab--active":""}`,onClick:()=>b("modeDestinataire",C),children:A},C))}),n.modeDestinataire==="role"&&r.jsxs("div",{className:"notif-composer__field",children:[r.jsx("label",{className:"notif-composer__label",children:"Envoyer  :"}),r.jsx("div",{className:"notif-composer__role-grid",children:Object.entries(I3).map(([C,A])=>r.jsx("button",{className:`notif-composer__role-card ${n.roleDestinataire===C?"notif-composer__role-card--active":""}`,onClick:()=>b("roleDestinataire",C),children:A},C))})]}),n.modeDestinataire==="groupe"&&r.jsxs("div",{className:"notif-composer__field",children:[r.jsx("label",{className:"notif-composer__label",children:"Groupe-classe :"}),l.length===0?r.jsx("p",{className:"notif-composer__hint",children:"Aucun groupe-classe disponible."}):r.jsxs("select",{className:"notif-composer__select",value:n.groupeId,onChange:C=>b("groupeId",C.target.value),children:[r.jsx("option",{value:"",children:" Choisir un groupe "}),l.map(C=>r.jsxs("option",{value:C.id,children:[C.nom,"  ",C.classe," (",C.nombreInscrits," lves)"]},C.id))]})]}),n.modeDestinataire==="individuel"&&r.jsxs("div",{className:"notif-composer__field",children:[r.jsx("label",{className:"notif-composer__label",children:"Email du destinataire :"}),r.jsx("input",{type:"email",className:"notif-composer__input",placeholder:"eleve@exemple.sn",value:n.destinataireEmail,onChange:C=>b("destinataireEmail",C.target.value)}),r.jsx("p",{className:"notif-composer__hint",children:"L'utilisateur doit tre inscrit sur PedaClic."})]})]}),r.jsxs("section",{className:"notif-composer__section",children:[r.jsx("h2",{className:"notif-composer__section-title",children:"3. Contenu"}),r.jsxs("div",{className:"notif-composer__field",children:[r.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-titre",children:["Titre ",r.jsx("span",{className:"notif-composer__required",children:"*"})]}),r.jsx("input",{id:"notif-titre",type:"text",className:"notif-composer__input",placeholder:"Ex : Nouveau devoir de mathmatiques",value:n.titre,onChange:C=>b("titre",C.target.value),maxLength:100}),r.jsxs("span",{className:"notif-composer__char-count",children:[n.titre.length,"/100"]})]}),r.jsxs("div",{className:"notif-composer__field",children:[r.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-message",children:["Message ",r.jsx("span",{className:"notif-composer__required",children:"*"})]}),r.jsx("textarea",{id:"notif-message",className:"notif-composer__textarea",placeholder:"Rdigez votre message ici",value:n.message,onChange:C=>b("message",C.target.value),rows:4,maxLength:500}),r.jsxs("span",{className:"notif-composer__char-count",children:[n.message.length,"/500"]})]}),r.jsxs("div",{className:"notif-composer__field-row",children:[r.jsxs("div",{className:"notif-composer__field",children:[r.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-lien",children:["Lien d'action ",r.jsx("span",{className:"notif-composer__optional",children:"(optionnel)"})]}),r.jsx("input",{id:"notif-lien",type:"text",className:"notif-composer__input",placeholder:"/cours/abc123",value:n.lienAction,onChange:C=>b("lienAction",C.target.value)})]}),r.jsxs("div",{className:"notif-composer__field",children:[r.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-label",children:["Texte du bouton ",r.jsx("span",{className:"notif-composer__optional",children:"(optionnel)"})]}),r.jsx("input",{id:"notif-label",type:"text",className:"notif-composer__input",placeholder:"Voir le cours",value:n.labelAction,onChange:C=>b("labelAction",C.target.value)})]})]})]}),r.jsxs("section",{className:"notif-composer__section",children:[r.jsx("h2",{className:"notif-composer__section-title",children:"4. Canal d'envoi"}),r.jsx("div",{className:"notif-composer__canal-grid",children:[{value:"in_app",label:" In-app seulement",desc:"Cloche dans l'interface"},{value:"email",label:" Email seulement",desc:"Via Resend"},{value:"les_deux",label:" In-app + Email",desc:"Les deux canaux"}].map(({value:C,label:A,desc:w})=>r.jsxs("button",{className:`notif-composer__canal-card ${n.canal===C?"notif-composer__canal-card--active":""}`,onClick:()=>b("canal",C),children:[r.jsx("span",{className:"notif-composer__canal-label",children:A}),r.jsx("span",{className:"notif-composer__canal-desc",children:w})]},C))}),(n.canal==="email"||n.canal==="les_deux")&&n.modeDestinataire!=="individuel"&&r.jsx("p",{className:"notif-composer__canal-warning",children:" Pour l'envoi par email en mode groupe/rle, assurez-vous que Railway est bien dploy et que la cl API Resend est configure."})]}),u==="error"&&f&&r.jsxs("div",{className:"notif-composer__error",children:[" ",f]}),r.jsxs("div",{className:"notif-composer__footer",children:[r.jsx("button",{className:"notif-composer__btn notif-composer__btn--secondary",onClick:()=>t(-1),disabled:u==="sending",children:"Annuler"}),r.jsx("button",{className:"notif-composer__btn notif-composer__btn--primary",onClick:j,disabled:!N()||u==="sending",children:u==="sending"?" Envoi en cours":" Envoyer la notification"})]})]})]})},gee=()=>{const[e,t]=g.useState(null),[n,a]=g.useState(!1),[l,o]=g.useState(!1),[u,d]=g.useState(!1),f=()=>/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream,p=()=>window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0,h=g.useCallback(()=>{try{return parseInt(localStorage.getItem("pedaclic_visit_count")||"0",10)}catch{return 0}},[]),v=g.useCallback(()=>{try{const j=h()+1;localStorage.setItem("pedaclic_visit_count",j.toString())}catch{}},[h]),b=()=>{try{return localStorage.getItem("pedaclic_install_dismissed")==="true"}catch{return!1}};g.useEffect(()=>{if(p()||b())return;v();const j=C=>{C.preventDefault(),t(C),h()>=2&&a(!0)};window.addEventListener("beforeinstallprompt",j),f()&&h()>=2&&(o(!0),a(!0));const S=()=>{a(!1),t(null)};return window.addEventListener("appinstalled",S),()=>{window.removeEventListener("beforeinstallprompt",j),window.removeEventListener("appinstalled",S)}},[h,v]);const x=async()=>{if(e){d(!0);try{await e.prompt();const{outcome:j}=await e.userChoice;j==="accepted"&&a(!1)}catch(j){console.error("Erreur installation PWA:",j)}finally{d(!1),t(null)}}},N=()=>{a(!1);try{localStorage.setItem("pedaclic_install_dismissed","true")}catch{}};return n?r.jsx("div",{className:"install-prompt",children:r.jsxs("div",{className:"install-prompt__container",children:[r.jsxs("div",{className:"install-prompt__content",children:[r.jsx("div",{className:"install-prompt__icon",children:r.jsx(f3,{size:24})}),r.jsxs("div",{className:"install-prompt__text",children:[r.jsx("h3",{className:"install-prompt__title",children:"Installer PedaClic"}),r.jsx("p",{className:"install-prompt__description",children:l?"Accde  tes cours mme sans connexion !":"Installe l'app pour un accs rapide, mme hors-ligne !"})]})]}),r.jsxs("div",{className:"install-prompt__actions",children:[!l&&e&&r.jsx("button",{className:"install-prompt__btn install-prompt__btn--primary",onClick:x,disabled:u,children:u?"Installation...":"Installer"}),l&&r.jsx("div",{className:"install-prompt__ios",children:r.jsxs("p",{className:"install-prompt__ios-text",children:["Appuie sur ",r.jsx(p3,{size:16,className:"install-prompt__ios-icon"})," puis",r.jsxs("span",{className:"install-prompt__ios-highlight",children:[r.jsx(Sc,{size:14})," Sur l'cran d'accueil"]})]})}),r.jsx("button",{className:"install-prompt__btn install-prompt__btn--close",onClick:N,"aria-label":"Fermer la bannire d'installation",children:r.jsx(Li,{size:20})})]})]})}):null};function xee(){const[e,t]=g.useState(typeof navigator<"u"?navigator.onLine:!0);return g.useEffect(()=>{const n=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",n),window.addEventListener("offline",a),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}},[]),e}const bee=()=>{const e=xee(),[t,n]=g.useState(!1),[a,l]=g.useState(!1);return g.useEffect(()=>{if(!e)l(!0),n(!1);else if(a){n(!0);const o=setTimeout(()=>{n(!1),l(!1)},3e3);return()=>clearTimeout(o)}},[e,a]),e&&!t?null:r.jsx("div",{className:`network-indicator ${e?"network-indicator--online":"network-indicator--offline"}`,children:r.jsx("div",{className:"network-indicator__content",children:e?r.jsxs(r.Fragment,{children:[r.jsx(h3,{size:14}),r.jsx("span",{children:"Connexion rtablie"})]}):r.jsxs(r.Fragment,{children:[r.jsx(v3,{size:14}),r.jsx("span",{children:"Pas de connexion  mode hors-ligne"})]})})})},yee=()=>(g.useEffect(()=>{VE();const e=setInterval(VE,600*1e3);return()=>clearInterval(e)},[]),r.jsxs(E3,{children:[r.jsx(gee,{}),r.jsx(bee,{}),r.jsxs(Sq,{children:[r.jsx(Ie,{path:"/",element:r.jsx(dt,{children:r.jsx(F3,{})})}),r.jsx(Ie,{path:"/disciplines",element:r.jsx(dt,{children:r.jsx(K3,{})})}),r.jsx(Ie,{path:"/disciplines/:id",element:r.jsx(dt,{children:r.jsx(Z3,{})})}),r.jsx(Ie,{path:"/premium",element:r.jsx(dt,{children:r.jsx(tR,{})})}),r.jsx(Ie,{path:"/cours",element:r.jsx(WE,{})}),r.jsx(Ie,{path:"/cours/:coursId",element:r.jsx(ZE,{})}),r.jsx(Ie,{path:"/prof/cours",element:r.jsx(JE,{})}),r.jsx(Ie,{path:"/prof/cours/nouveau",element:r.jsx(Zd,{})}),r.jsx(Ie,{path:"/prof/cours/:coursId/modifier",element:r.jsx(Zd,{})}),r.jsx(Ie,{path:"/connexion",element:r.jsx(G3,{})}),r.jsx(Ie,{path:"/inscription",element:r.jsx(H3,{})}),r.jsx(Ie,{path:"/mot-de-passe-oublie",element:r.jsx(Y3,{})}),r.jsx(Ie,{path:"/admin",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(nR,{})})})}),r.jsx(Ie,{path:"/admin/disciplines",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(aR,{})})})}),r.jsx(Ie,{path:"/admin/chapitres",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(iR,{})})})}),r.jsx(Ie,{path:"/admin/ressources",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(sR,{})})})}),r.jsx(Ie,{path:"/admin/quiz",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(mR,{})})})}),r.jsx(Ie,{path:"/admin/quiz/nouveau",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(q1,{})})})}),r.jsx(Ie,{path:"/admin/quiz/modifier/:quizId",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(q1,{})})})}),r.jsx(Ie,{path:"/admin/quiz-avance",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx($R,{})})})}),r.jsx(Ie,{path:"/admin/utilisateurs",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(yR,{})})})}),r.jsx(Ie,{path:"/admin/resultats",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(jR,{})})})}),r.jsx(Ie,{path:"/admin/settings",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(NR,{})})})}),r.jsx(Ie,{path:"/admin/ebooks",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(TJ,{})})})}),r.jsx(Ie,{path:"/admin/premium",element:r.jsx(h1,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),r.jsx(Ie,{path:"/quizzes",element:r.jsx(Kl,{allowedRoles:["eleve","prof","admin"],children:r.jsx(dt,{children:r.jsx(DX,{})})})}),r.jsx(Ie,{path:"/quiz/:quizId",element:r.jsx(dt,{children:r.jsx(l5,{})})}),r.jsx(Ie,{path:"/quiz-avance/:quizId",element:r.jsx(dt,{children:r.jsx(VR,{})})}),r.jsx(Ie,{path:"/quiz-gratuits",element:r.jsx(dt,{children:r.jsx(UX,{})})}),r.jsx(Ie,{path:"/eleve/dashboard",element:r.jsx(dt,{children:r.jsx(_X,{})})}),r.jsx(Ie,{path:"/eleve/suivi",element:r.jsx(dt,{children:r.jsx(SX,{})})}),r.jsx(Ie,{path:"/prof/dashboard",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(AX,{})})})}),r.jsx(Ie,{path:"/prof/cahiers",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(cZ,{})})})}),r.jsx(Ie,{path:"/prof/cahiers/:cahierId",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(yZ,{})})})}),r.jsx(Ie,{path:"/prof/cahiers/:cahierId/nouvelle",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(HE,{})})})}),r.jsx(Ie,{path:"/prof/cahiers/:cahierId/modifier/:entreeId",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(HE,{})})})}),"        ",r.jsx(Ie,{path:"/prof/sequences",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(IZ,{})})})}),"        ",r.jsx(Ie,{path:"/prof/sequences/nouvelle",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(QE,{})})})}),"        ",r.jsx(Ie,{path:"/prof/sequences/:id",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(ZZ,{})})})}),"        ",r.jsx(Ie,{path:"/prof/sequences/:id/modifier",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(QE,{})})})}),r.jsx(Ie,{path:"/eleve/cahiers/:cahierId",element:r.jsx(Kl,{allowedRoles:["eleve","admin"],children:r.jsx(dt,{children:r.jsx(lJ,{})})})}),r.jsx(Ie,{path:"/parent/dashboard",element:r.jsx(Kl,{allowedRoles:["parent","admin"],children:r.jsx(dt,{children:r.jsx(oJ,{})})})}),r.jsx(Ie,{path:"/generateur",element:r.jsx(dt,{children:r.jsx(bJ,{})})}),r.jsx(Ie,{path:"/ebooks",element:r.jsx(dt,{children:r.jsx(PJ,{})})}),r.jsx(Ie,{path:"/cours",element:r.jsx(dt,{children:r.jsx(WE,{})})}),r.jsx(Ie,{path:"/cours/:coursId",element:r.jsx(dt,{children:r.jsx(ZE,{})})}),r.jsx(Ie,{path:"/prof/cours",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(JE,{})})})}),r.jsx(Ie,{path:"/prof/cours/nouveau",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(Zd,{})})})}),r.jsx(Ie,{path:"/prof/cours/:coursId/modifier",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(Zd,{})})})}),r.jsx(Ie,{path:"/notifications",element:r.jsx(Kl,{allowedRoles:["eleve","prof","admin","parent"],children:r.jsx(dt,{children:r.jsx(vee,{})})})}),r.jsx(Ie,{path:"/prof/notifications/nouvelle",element:r.jsx(sn,{children:r.jsx(dt,{children:r.jsx(tA,{})})})}),r.jsx(Ie,{path:"/admin/notifications/nouvelle",element:r.jsx(an,{children:r.jsx(ln,{children:r.jsx(tA,{})})})}),r.jsx(Ie,{path:"*",element:r.jsx(h1,{to:"/",replace:!0})})]})]})),uP=document.getElementById("root");if(!uP)throw new Error("L'lment #root n'existe pas");const jee=S3.createRoot(uP);jee.render(r.jsx(wq.StrictMode,{children:r.jsx(Cq,{children:r.jsx(yee,{})})}));
//# sourceMappingURL=index-De8jsoQb.js.map
