import{a as rm,b as UP,g as Ga,r as y,u as yt,c as nm,L as qe,d as Ha,e as z2,f as O2,R as FP,h as GP,i as Ge,N as Z_,j as HP,B as QP}from"./vendor-react-BMsfgiGx.js";import{i as VP,g as YP,a as KP,p as XP,b as WP,c as ZP,o as JP,d as je,u as Ze,s as mt,e as eq,f as tq,h as rq,j as nq,k as It,l as am,q as Re,m as Je,n as be,r as gy,t as Cn,v as Lt,w as Ce,x as De,y as Sc,z as Br,A as gc,B as bs,C as Ta,D as Nn,T as Le,E as im,F as aq,G as iq,H as D2}from"./vendor-firebase-E23-SjE9.js";import{H as dx,B as jn,G as js,L as J_,S as sq,C as Ns,a as dc,b as Jd,U as lq,c as oq,d as e1,X as Ti,M as cq,e as Hd,f as uq,P as dq,g as fq,h as mq,F as pq,i as xy,j as Qd,k as hq,T as vq,I as gq,l as xq,Y as yq,m as Zr,A as fs,n as xc,o as Tt,Z as M2,p as T2,q as Fl,r as Li,s as ef,t as fc,u as k2,v as yy,w as fx,E as $l,x as bq,y as t1,z as jq,D as Nq,J as _q,R as Sq,K as wq,N as Cq,O as mc,Q as mx,V as xv,W as Aq,_ as Eq,$ as px,a0 as yv,a1 as bv,a2 as zq,a3 as Oq,a4 as Dq,a5 as Mq,a6 as Tq,a7 as kq}from"./vendor-icons-hkj4svf_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var jv={exports:{}},Zo={};var r1;function Pq(){if(r1)return Zo;r1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:u,ref:l!==void 0?l:null,props:o}}return Zo.Fragment=t,Zo.jsx=n,Zo.jsxs=n,Zo}var n1;function qq(){return n1||(n1=1,jv.exports=Pq()),jv.exports}var r=qq(),Nv={exports:{}},Jo={},_v={exports:{}},Sv={};var a1;function Rq(){return a1||(a1=1,(function(e){function t(k,J){var Q=k.length;k.push(J);e:for(;0<Q;){var B=Q-1>>>1,q=k[B];if(0<l(q,J))k[B]=J,k[Q]=q,Q=B;else break e}}function n(k){return k.length===0?null:k[0]}function a(k){if(k.length===0)return null;var J=k[0],Q=k.pop();if(Q!==J){k[0]=Q;e:for(var B=0,q=k.length,fe=q>>>1;B<fe;){var te=2*(B+1)-1,ue=k[te],he=te+1,xe=k[he];if(0>l(ue,Q))he<q&&0>l(xe,ue)?(k[B]=xe,k[he]=Q,B=he):(k[B]=ue,k[te]=Q,B=te);else if(he<q&&0>l(xe,Q))k[B]=xe,k[he]=Q,B=he;else break e}}return J}function l(k,J){var Q=k.sortIndex-J.sortIndex;return Q!==0?Q:k.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],p=[],h=1,v=null,b=3,g=!1,_=!1,j=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(k){for(var J=n(p);J!==null;){if(J.callback===null)a(p);else if(J.startTime<=k)a(p),J.sortIndex=J.expirationTime,t(m,J);else break;J=n(p)}}function O(k){if(j=!1,A(k),!_)if(n(m)!==null)_=!0,T||(T=!0,U());else{var J=n(p);J!==null&&M(O,J.startTime-k)}}var T=!1,P=-1,R=5,I=-1;function L(){return S?!0:!(e.unstable_now()-I<R)}function K(){if(S=!1,T){var k=e.unstable_now();I=k;var J=!0;try{e:{_=!1,j&&(j=!1,E(P),P=-1),g=!0;var Q=b;try{t:{for(A(k),v=n(m);v!==null&&!(v.expirationTime>k&&L());){var B=v.callback;if(typeof B=="function"){v.callback=null,b=v.priorityLevel;var q=B(v.expirationTime<=k);if(k=e.unstable_now(),typeof q=="function"){v.callback=q,A(k),J=!0;break t}v===n(m)&&a(m),A(k)}else a(m);v=n(m)}if(v!==null)J=!0;else{var fe=n(p);fe!==null&&M(O,fe.startTime-k),J=!1}}break e}finally{v=null,b=Q,g=!1}J=void 0}}finally{J?U():T=!1}}}var U;if(typeof C=="function")U=function(){C(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,V=G.port2;G.port1.onmessage=K,U=function(){V.postMessage(null)}}else U=function(){w(K,0)};function M(k,J){P=w(function(){k(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(k){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var Q=b;b=J;try{return k()}finally{b=Q}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(k,J){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Q=b;b=k;try{return J()}finally{b=Q}},e.unstable_scheduleCallback=function(k,J,Q){var B=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?B+Q:B):Q=B,k){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Q+q,k={id:h++,callback:J,priorityLevel:k,startTime:Q,expirationTime:q,sortIndex:-1},Q>B?(k.sortIndex=Q,t(p,k),n(m)===null&&k===n(p)&&(j?(E(P),P=-1):j=!0,M(O,Q-B))):(k.sortIndex=q,t(m,k),_||g||(_=!0,T||(T=!0,U()))),k},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(k){var J=b;return function(){var Q=b;b=J;try{return k.apply(this,arguments)}finally{b=Q}}}})(Sv)),Sv}var i1;function Iq(){return i1||(i1=1,_v.exports=Rq()),_v.exports}var s1;function Lq(){if(s1)return Jo;s1=1;var e=Iq(),t=rm(),n=UP();function a(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(a(188))}function p(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(a(188));return s!==i?null:i}for(var c=i,f=s;;){var x=c.return;if(x===null)break;var N=x.alternate;if(N===null){if(f=x.return,f!==null){c=f;continue}break}if(x.child===N.child){for(N=x.child;N;){if(N===c)return m(x),i;if(N===f)return m(x),s;N=N.sibling}throw Error(a(188))}if(c.return!==f.return)c=x,f=N;else{for(var z=!1,D=x.child;D;){if(D===c){z=!0,c=x,f=N;break}if(D===f){z=!0,f=x,c=N;break}D=D.sibling}if(!z){for(D=N.child;D;){if(D===c){z=!0,c=N,f=x;break}if(D===f){z=!0,f=N,c=x;break}D=D.sibling}if(!z)throw Error(a(189))}}if(c.alternate!==f)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?i:s}function h(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=h(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=K&&i[K]||i["@@iterator"],typeof i=="function"?i:null)}var G=Symbol.for("react.client.reference");function V(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===G?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case T:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case C:return i.displayName||"Context";case E:return(i._context.displayName||"Context")+".Consumer";case A:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return s=i.displayName||null,s!==null?s:V(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return V(i(s))}catch{}}return null}var M=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},B=[],q=-1;function fe(i){return{current:i}}function te(i){0>q||(i.current=B[q],B[q]=null,q--)}function ue(i,s){q++,B[q]=i.current,i.current=s}var he=fe(null),xe=fe(null),H=fe(null),pe=fe(null);function Ee(i,s){switch(ue(H,s),ue(xe,i),ue(he,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?j_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=j_(s),i=N_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(he),ue(he,i)}function le(){te(he),te(xe),te(H)}function W(i){i.memoizedState!==null&&ue(pe,i);var s=he.current,c=N_(s,i.type);s!==c&&(ue(xe,i),ue(he,c))}function F(i){xe.current===i&&(te(he),te(xe)),pe.current===i&&(te(pe),Yo._currentValue=Q)}var oe,X;function ye(i){if(oe===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);oe=s&&s[1]||"",X=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+i+X}var Ie=!1;function $e(i,s){if(!i||Ie)return"";Ie=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ce){var ae=ce}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(ce){ae=ce}i.call(ge.prototype)}}else{try{throw Error()}catch(ce){ae=ce}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ce){if(ce&&ae&&typeof ce.stack=="string")return[ce.stack,ae.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=f.DetermineComponentFrameRoot(),z=N[0],D=N[1];if(z&&D){var $=z.split(`
`),ne=D.split(`
`);for(x=f=0;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;for(;x<ne.length&&!ne[x].includes("DetermineComponentFrameRoot");)x++;if(f===$.length||x===ne.length)for(f=$.length-1,x=ne.length-1;1<=f&&0<=x&&$[f]!==ne[x];)x--;for(;1<=f&&0<=x;f--,x--)if($[f]!==ne[x]){if(f!==1||x!==1)do if(f--,x--,0>x||$[f]!==ne[x]){var me=`
`+$[f].replace(" at new "," at ");return i.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",i.displayName)),me}while(1<=f&&0<=x);break}}}finally{Ie=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ye(c):""}function Ve(i,s){switch(i.tag){case 26:case 27:case 5:return ye(i.type);case 16:return ye("Lazy");case 13:return i.child!==s&&s!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return $e(i.type,!1);case 11:return $e(i.type.render,!1);case 1:return $e(i.type,!0);case 31:return ye("Activity");default:return""}}function Yt(i){try{var s="",c=null;do s+=Ve(i,c),c=i,i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var zn=Object.prototype.hasOwnProperty,rn=e.unstable_scheduleCallback,sa=e.unstable_cancelCallback,de=e.unstable_shouldYield,Ae=e.unstable_requestPaint,ke=e.unstable_now,Be=e.unstable_getCurrentPriorityLevel,St=e.unstable_ImmediatePriority,gr=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,Us=e.unstable_LowPriority,nn=e.unstable_IdlePriority,ri=e.log,ap=e.unstable_setDisableYieldValue,xr=null,bt=null;function Fn(i){if(typeof ri=="function"&&ap(i),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(xr,i)}catch{}}var _r=Math.clz32?Math.clz32:sp,ou=Math.log,ip=Math.LN2;function sp(i){return i>>>=0,i===0?32:31-(ou(i)/ip|0)|0}var Fs=256,Gs=262144,Hs=4194304;function la(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Gn(i,s,c){var f=i.pendingLanes;if(f===0)return 0;var x=0,N=i.suspendedLanes,z=i.pingedLanes;i=i.warmLanes;var D=f&134217727;return D!==0?(f=D&~N,f!==0?x=la(f):(z&=D,z!==0?x=la(z):c||(c=D&~i,c!==0&&(x=la(c))))):(D=f&~N,D!==0?x=la(D):z!==0?x=la(z):c||(c=f&~i,c!==0&&(x=la(c)))),x===0?0:s!==0&&s!==x&&(s&N)===0&&(N=x&-x,c=s&-s,N>=c||N===32&&(c&4194048)!==0)?s:x}function Hi(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function ee(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Me(){var i=Hs;return Hs<<=1,(Hs&62914560)===0&&(Hs=4194304),i}function ht(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function yr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function lo(i,s,c,f,x,N){var z=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var D=i.entanglements,$=i.expirationTimes,ne=i.hiddenUpdates;for(c=z&~c;0<c;){var me=31-_r(c),ge=1<<me;D[me]=0,$[me]=-1;var ae=ne[me];if(ae!==null)for(ne[me]=null,me=0;me<ae.length;me++){var ce=ae[me];ce!==null&&(ce.lane&=-536870913)}c&=~ge}f!==0&&Qi(i,f,0),N!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=N&~(z&~s))}function Qi(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var f=31-_r(s);i.entangledLanes|=s,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function a0(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var f=31-_r(c),x=1<<f;x&s|i[f]&s&&(i[f]|=s),c&=~x}}function i0(i,s){var c=s&-s;return c=(c&42)!==0?1:lp(c),(c&(i.suspendedLanes|s))!==0?0:c}function lp(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function op(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function s0(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:H_(i.type))}function l0(i,s){var c=J.p;try{return J.p=i,s()}finally{J.p=c}}var ni=Math.random().toString(36).slice(2),cr="__reactFiber$"+ni,Dr="__reactProps$"+ni,Qs="__reactContainer$"+ni,cp="__reactEvents$"+ni,DT="__reactListeners$"+ni,MT="__reactHandles$"+ni,o0="__reactResources$"+ni,oo="__reactMarker$"+ni;function up(i){delete i[cr],delete i[Dr],delete i[cp],delete i[DT],delete i[MT]}function Vs(i){var s=i[cr];if(s)return s;for(var c=i.parentNode;c;){if(s=c[Qs]||c[cr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=z_(i);i!==null;){if(c=i[cr])return c;i=z_(i)}return s}i=c,c=i.parentNode}return null}function Ys(i){if(i=i[cr]||i[Qs]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function co(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(a(33))}function Ks(i){var s=i[o0];return s||(s=i[o0]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Jt(i){i[oo]=!0}var c0=new Set,u0={};function Vi(i,s){Xs(i,s),Xs(i+"Capture",s)}function Xs(i,s){for(u0[i]=s,i=0;i<s.length;i++)c0.add(s[i])}var TT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),d0={},f0={};function kT(i){return zn.call(f0,i)?!0:zn.call(d0,i)?!1:TT.test(i)?f0[i]=!0:(d0[i]=!0,!1)}function cu(i,s,c){if(kT(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function uu(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function oa(i,s,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+f)}}function an(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function m0(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function PT(i,s,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,N=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return x.call(this)},set:function(z){c=""+z,N.call(this,z)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(z){c=""+z},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function dp(i){if(!i._valueTracker){var s=m0(i)?"checked":"value";i._valueTracker=PT(i,s,""+i[s])}}function p0(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return i&&(f=m0(i)?i.checked?"true":"false":i.value),i=f,i!==c?(s.setValue(i),!0):!1}function du(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var qT=/[\n"\\]/g;function sn(i){return i.replace(qT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fp(i,s,c,f,x,N,z,D){i.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?i.type=z:i.removeAttribute("type"),s!=null?z==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+an(s)):i.value!==""+an(s)&&(i.value=""+an(s)):z!=="submit"&&z!=="reset"||i.removeAttribute("value"),s!=null?mp(i,z,an(s)):c!=null?mp(i,z,an(c)):f!=null&&i.removeAttribute("value"),x==null&&N!=null&&(i.defaultChecked=!!N),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+an(D):i.removeAttribute("name")}function h0(i,s,c,f,x,N,z,D){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.type=N),s!=null||c!=null){if(!(N!=="submit"&&N!=="reset"||s!=null)){dp(i);return}c=c!=null?""+an(c):"",s=s!=null?""+an(s):c,D||s===i.value||(i.value=s),i.defaultValue=s}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=D?i.checked:!!f,i.defaultChecked=!!f,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(i.name=z),dp(i)}function mp(i,s,c){s==="number"&&du(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Ws(i,s,c,f){if(i=i.options,s){s={};for(var x=0;x<c.length;x++)s["$"+c[x]]=!0;for(c=0;c<i.length;c++)x=s.hasOwnProperty("$"+i[c].value),i[c].selected!==x&&(i[c].selected=x),x&&f&&(i[c].defaultSelected=!0)}else{for(c=""+an(c),s=null,x=0;x<i.length;x++){if(i[x].value===c){i[x].selected=!0,f&&(i[x].defaultSelected=!0);return}s!==null||i[x].disabled||(s=i[x])}s!==null&&(s.selected=!0)}}function v0(i,s,c){if(s!=null&&(s=""+an(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+an(c):""}function g0(i,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(a(92));if(M(f)){if(1<f.length)throw Error(a(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=an(s),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),dp(i)}function Zs(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var RT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function x0(i,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":f?i.setProperty(s,c):typeof c!="number"||c===0||RT.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function y0(i,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var x in s)f=s[x],s.hasOwnProperty(x)&&c[x]!==f&&x0(i,x,f)}else for(var N in s)s.hasOwnProperty(N)&&x0(i,N,s[N])}function pp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fu(i){return LT.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ca(){}var hp=null;function vp(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Js=null,el=null;function b0(i){var s=Ys(i);if(s&&(i=s.stateNode)){var c=i[Dr]||null;e:switch(i=s.stateNode,s.type){case"input":if(fp(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+sn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==i&&f.form===i.form){var x=f[Dr]||null;if(!x)throw Error(a(90));fp(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===i.form&&p0(f)}break e;case"textarea":v0(i,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Ws(i,!!c.multiple,s,!1)}}}var gp=!1;function j0(i,s,c){if(gp)return i(s,c);gp=!0;try{var f=i(s);return f}finally{if(gp=!1,(Js!==null||el!==null)&&(Ju(),Js&&(s=Js,i=el,el=Js=null,b0(s),i)))for(s=0;s<i.length;s++)b0(i[s])}}function uo(i,s){var c=i.stateNode;if(c===null)return null;var f=c[Dr]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xp=!1;if(ua)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){xp=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{xp=!1}var ai=null,yp=null,mu=null;function N0(){if(mu)return mu;var i,s=yp,c=s.length,f,x="value"in ai?ai.value:ai.textContent,N=x.length;for(i=0;i<c&&s[i]===x[i];i++);var z=c-i;for(f=1;f<=z&&s[c-f]===x[N-f];f++);return mu=x.slice(i,1<f?1-f:void 0)}function pu(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function hu(){return!0}function _0(){return!1}function Mr(i){function s(c,f,x,N,z){this._reactName=c,this._targetInst=x,this.type=f,this.nativeEvent=N,this.target=z,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(N):N[D]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?hu:_0,this.isPropagationStopped=_0,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),s}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vu=Mr(Yi),mo=v({},Yi,{view:0,detail:0}),$T=Mr(mo),bp,jp,po,gu=v({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==po&&(po&&i.type==="mousemove"?(bp=i.screenX-po.screenX,jp=i.screenY-po.screenY):jp=bp=0,po=i),bp)},movementY:function(i){return"movementY"in i?i.movementY:jp}}),S0=Mr(gu),BT=v({},gu,{dataTransfer:0}),UT=Mr(BT),FT=v({},mo,{relatedTarget:0}),Np=Mr(FT),GT=v({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),HT=Mr(GT),QT=v({},Yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),VT=Mr(QT),YT=v({},Yi,{data:0}),w0=Mr(YT),KT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=WT[i])?!!s[i]:!1}function _p(){return ZT}var JT=v({},mo,{key:function(i){if(i.key){var s=KT[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=pu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?XT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(i){return i.type==="keypress"?pu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ek=Mr(JT),tk=v({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C0=Mr(tk),rk=v({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),nk=Mr(rk),ak=v({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ik=Mr(ak),sk=v({},gu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),lk=Mr(sk),ok=v({},Yi,{newState:0,oldState:0}),ck=Mr(ok),uk=[9,13,27,32],Sp=ua&&"CompositionEvent"in window,ho=null;ua&&"documentMode"in document&&(ho=document.documentMode);var dk=ua&&"TextEvent"in window&&!ho,A0=ua&&(!Sp||ho&&8<ho&&11>=ho),E0=" ",z0=!1;function O0(i,s){switch(i){case"keyup":return uk.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var tl=!1;function fk(i,s){switch(i){case"compositionend":return D0(s);case"keypress":return s.which!==32?null:(z0=!0,E0);case"textInput":return i=s.data,i===E0&&z0?null:i;default:return null}}function mk(i,s){if(tl)return i==="compositionend"||!Sp&&O0(i,s)?(i=N0(),mu=yp=ai=null,tl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return A0&&s.locale!=="ko"?null:s.data;default:return null}}var pk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!pk[i.type]:s==="textarea"}function T0(i,s,c,f){Js?el?el.push(f):el=[f]:Js=f,s=sd(s,"onChange"),0<s.length&&(c=new vu("onChange","change",null,c,f),i.push({event:c,listeners:s}))}var vo=null,go=null;function hk(i){h_(i,0)}function xu(i){var s=co(i);if(p0(s))return i}function k0(i,s){if(i==="change")return s}var P0=!1;if(ua){var wp;if(ua){var Cp="oninput"in document;if(!Cp){var q0=document.createElement("div");q0.setAttribute("oninput","return;"),Cp=typeof q0.oninput=="function"}wp=Cp}else wp=!1;P0=wp&&(!document.documentMode||9<document.documentMode)}function R0(){vo&&(vo.detachEvent("onpropertychange",I0),go=vo=null)}function I0(i){if(i.propertyName==="value"&&xu(go)){var s=[];T0(s,go,i,vp(i)),j0(hk,s)}}function vk(i,s,c){i==="focusin"?(R0(),vo=s,go=c,vo.attachEvent("onpropertychange",I0)):i==="focusout"&&R0()}function gk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xu(go)}function xk(i,s){if(i==="click")return xu(s)}function yk(i,s){if(i==="input"||i==="change")return xu(s)}function bk(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Gr=typeof Object.is=="function"?Object.is:bk;function xo(i,s){if(Gr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var x=c[f];if(!zn.call(s,x)||!Gr(i[x],s[x]))return!1}return!0}function L0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $0(i,s){var c=L0(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=s&&f>=s)return{node:c,offset:s-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=L0(c)}}function B0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?B0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function U0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=du(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=du(i.document)}return s}function Ap(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var jk=ua&&"documentMode"in document&&11>=document.documentMode,rl=null,Ep=null,yo=null,zp=!1;function F0(i,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;zp||rl==null||rl!==du(f)||(f=rl,"selectionStart"in f&&Ap(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),yo&&xo(yo,f)||(yo=f,f=sd(Ep,"onSelect"),0<f.length&&(s=new vu("onSelect","select",null,s,c),i.push({event:s,listeners:f}),s.target=rl)))}function Ki(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var nl={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},Op={},G0={};ua&&(G0=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function Xi(i){if(Op[i])return Op[i];if(!nl[i])return i;var s=nl[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in G0)return Op[i]=s[c];return i}var H0=Xi("animationend"),Q0=Xi("animationiteration"),V0=Xi("animationstart"),Nk=Xi("transitionrun"),_k=Xi("transitionstart"),Sk=Xi("transitioncancel"),Y0=Xi("transitionend"),K0=new Map,Dp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dp.push("scrollEnd");function On(i,s){K0.set(i,s),Vi(s,[i])}var yu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ln=[],al=0,Mp=0;function bu(){for(var i=al,s=Mp=al=0;s<i;){var c=ln[s];ln[s++]=null;var f=ln[s];ln[s++]=null;var x=ln[s];ln[s++]=null;var N=ln[s];if(ln[s++]=null,f!==null&&x!==null){var z=f.pending;z===null?x.next=x:(x.next=z.next,z.next=x),f.pending=x}N!==0&&X0(c,x,N)}}function ju(i,s,c,f){ln[al++]=i,ln[al++]=s,ln[al++]=c,ln[al++]=f,Mp|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Tp(i,s,c,f){return ju(i,s,c,f),Nu(i)}function Wi(i,s){return ju(i,null,null,s),Nu(i)}function X0(i,s,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var x=!1,N=i.return;N!==null;)N.childLanes|=c,f=N.alternate,f!==null&&(f.childLanes|=c),N.tag===22&&(i=N.stateNode,i===null||i._visibility&1||(x=!0)),i=N,N=N.return;return i.tag===3?(N=i.stateNode,x&&s!==null&&(x=31-_r(c),i=N.hiddenUpdates,f=i[x],f===null?i[x]=[s]:f.push(s),s.lane=c|536870912),N):null}function Nu(i){if(50<Bo)throw Bo=0,Uh=null,Error(a(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var il={};function wk(i,s,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(i,s,c,f){return new wk(i,s,c,f)}function kp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function da(i,s){var c=i.alternate;return c===null?(c=Hr(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function W0(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function _u(i,s,c,f,x,N){var z=0;if(f=i,typeof i=="function")kp(i)&&(z=1);else if(typeof i=="string")z=OP(i,c,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=Hr(31,c,s,x),i.elementType=I,i.lanes=N,i;case j:return Zi(c.children,x,N,s);case S:z=8,x|=24;break;case w:return i=Hr(12,c,s,x|2),i.elementType=w,i.lanes=N,i;case O:return i=Hr(13,c,s,x),i.elementType=O,i.lanes=N,i;case T:return i=Hr(19,c,s,x),i.elementType=T,i.lanes=N,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:z=10;break e;case E:z=9;break e;case A:z=11;break e;case P:z=14;break e;case R:z=16,f=null;break e}z=29,c=Error(a(130,i===null?"null":typeof i,"")),f=null}return s=Hr(z,c,s,x),s.elementType=i,s.type=f,s.lanes=N,s}function Zi(i,s,c,f){return i=Hr(7,i,f,s),i.lanes=c,i}function Pp(i,s,c){return i=Hr(6,i,null,s),i.lanes=c,i}function Z0(i){var s=Hr(18,null,null,0);return s.stateNode=i,s}function qp(i,s,c){return s=Hr(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var J0=new WeakMap;function on(i,s){if(typeof i=="object"&&i!==null){var c=J0.get(i);return c!==void 0?c:(s={value:i,source:s,stack:Yt(s)},J0.set(i,s),s)}return{value:i,source:s,stack:Yt(s)}}var sl=[],ll=0,Su=null,bo=0,cn=[],un=0,ii=null,Hn=1,Qn="";function fa(i,s){sl[ll++]=bo,sl[ll++]=Su,Su=i,bo=s}function ej(i,s,c){cn[un++]=Hn,cn[un++]=Qn,cn[un++]=ii,ii=i;var f=Hn;i=Qn;var x=32-_r(f)-1;f&=~(1<<x),c+=1;var N=32-_r(s)+x;if(30<N){var z=x-x%5;N=(f&(1<<z)-1).toString(32),f>>=z,x-=z,Hn=1<<32-_r(s)+x|c<<x|f,Qn=N+i}else Hn=1<<N|c<<x|f,Qn=i}function Rp(i){i.return!==null&&(fa(i,1),ej(i,1,0))}function Ip(i){for(;i===Su;)Su=sl[--ll],sl[ll]=null,bo=sl[--ll],sl[ll]=null;for(;i===ii;)ii=cn[--un],cn[un]=null,Qn=cn[--un],cn[un]=null,Hn=cn[--un],cn[un]=null}function tj(i,s){cn[un++]=Hn,cn[un++]=Qn,cn[un++]=ii,Hn=s.id,Qn=s.overflow,ii=i}var ur=null,jt=null,Xe=!1,si=null,dn=!1,Lp=Error(a(519));function li(i){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jo(on(s,i)),Lp}function rj(i){var s=i.stateNode,c=i.type,f=i.memoizedProps;switch(s[cr]=i,s[Dr]=f,c){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(c=0;c<Fo.length;c++)Qe(Fo[c],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),h0(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),g0(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||y_(s.textContent,c)?(f.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),f.onScroll!=null&&Qe("scroll",s),f.onScrollEnd!=null&&Qe("scrollend",s),f.onClick!=null&&(s.onclick=ca),s=!0):s=!1,s||li(i,!0)}function nj(i){for(ur=i.return;ur;)switch(ur.tag){case 5:case 31:case 13:dn=!1;return;case 27:case 3:dn=!0;return;default:ur=ur.return}}function ol(i){if(i!==ur)return!1;if(!Xe)return nj(i),Xe=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||nv(i.type,i.memoizedProps)),c=!c),c&&jt&&li(i),nj(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));jt=E_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));jt=E_(i)}else s===27?(s=jt,ji(i.type)?(i=ov,ov=null,jt=i):jt=s):jt=ur?mn(i.stateNode.nextSibling):null;return!0}function Ji(){jt=ur=null,Xe=!1}function $p(){var i=si;return i!==null&&(qr===null?qr=i:qr.push.apply(qr,i),si=null),i}function jo(i){si===null?si=[i]:si.push(i)}var Bp=fe(null),es=null,ma=null;function oi(i,s,c){ue(Bp,s._currentValue),s._currentValue=c}function pa(i){i._currentValue=Bp.current,te(Bp)}function Up(i,s,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===c)break;i=i.return}}function Fp(i,s,c,f){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var N=x.dependencies;if(N!==null){var z=x.child;N=N.firstContext;e:for(;N!==null;){var D=N;N=x;for(var $=0;$<s.length;$++)if(D.context===s[$]){N.lanes|=c,D=N.alternate,D!==null&&(D.lanes|=c),Up(N.return,c,i),f||(z=null);break e}N=D.next}}else if(x.tag===18){if(z=x.return,z===null)throw Error(a(341));z.lanes|=c,N=z.alternate,N!==null&&(N.lanes|=c),Up(z,c,i),z=null}else z=x.child;if(z!==null)z.return=x;else for(z=x;z!==null;){if(z===i){z=null;break}if(x=z.sibling,x!==null){x.return=z.return,z=x;break}z=z.return}x=z}}function cl(i,s,c,f){i=null;for(var x=s,N=!1;x!==null;){if(!N){if((x.flags&524288)!==0)N=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var z=x.alternate;if(z===null)throw Error(a(387));if(z=z.memoizedProps,z!==null){var D=x.type;Gr(x.pendingProps.value,z.value)||(i!==null?i.push(D):i=[D])}}else if(x===pe.current){if(z=x.alternate,z===null)throw Error(a(387));z.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(Yo):i=[Yo])}x=x.return}i!==null&&Fp(s,i,c,f),s.flags|=262144}function wu(i){for(i=i.firstContext;i!==null;){if(!Gr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ts(i){es=i,ma=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dr(i){return aj(es,i)}function Cu(i,s){return es===null&&ts(i),aj(i,s)}function aj(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ma===null){if(i===null)throw Error(a(308));ma=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ma=ma.next=s;return c}var Ck=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},Ak=e.unstable_scheduleCallback,Ek=e.unstable_NormalPriority,Bt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gp(){return{controller:new Ck,data:new Map,refCount:0}}function No(i){i.refCount--,i.refCount===0&&Ak(Ek,function(){i.controller.abort()})}var _o=null,Hp=0,ul=0,dl=null;function zk(i,s){if(_o===null){var c=_o=[];Hp=0,ul=Yh(),dl={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Hp++,s.then(ij,ij),s}function ij(){if(--Hp===0&&_o!==null){dl!==null&&(dl.status="fulfilled");var i=_o;_o=null,ul=0,dl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function Ok(i,s){var c=[],f={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return i.then(function(){f.status="fulfilled",f.value=s;for(var x=0;x<c.length;x++)(0,c[x])(s)},function(x){for(f.status="rejected",f.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),f}var sj=k.S;k.S=function(i,s){FN=ke(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&zk(i,s),sj!==null&&sj(i,s)};var rs=fe(null);function Qp(){var i=rs.current;return i!==null?i:vt.pooledCache}function Au(i,s){s===null?ue(rs,rs.current):ue(rs,s.pool)}function lj(){var i=Qp();return i===null?null:{parent:Bt._currentValue,pool:i}}var fl=Error(a(460)),Vp=Error(a(474)),Eu=Error(a(542)),zu={then:function(){}};function oj(i){return i=i.status,i==="fulfilled"||i==="rejected"}function cj(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(ca,ca),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,dj(i),i;default:if(typeof s.status=="string")s.then(ca,ca);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=s,i.status="pending",i.then(function(f){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=f}},function(f){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,dj(i),i}throw as=s,fl}}function ns(i){try{var s=i._init;return s(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(as=c,fl):c}}var as=null;function uj(){if(as===null)throw Error(a(459));var i=as;return as=null,i}function dj(i){if(i===fl||i===Eu)throw Error(a(483))}var ml=null,So=0;function Ou(i){var s=So;return So+=1,ml===null&&(ml=[]),cj(ml,i,s)}function wo(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Du(i,s){throw s.$$typeof===b?Error(a(525)):(i=Object.prototype.toString.call(s),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function fj(i){function s(Z,Y){if(i){var re=Z.deletions;re===null?(Z.deletions=[Y],Z.flags|=16):re.push(Y)}}function c(Z,Y){if(!i)return null;for(;Y!==null;)s(Z,Y),Y=Y.sibling;return null}function f(Z){for(var Y=new Map;Z!==null;)Z.key!==null?Y.set(Z.key,Z):Y.set(Z.index,Z),Z=Z.sibling;return Y}function x(Z,Y){return Z=da(Z,Y),Z.index=0,Z.sibling=null,Z}function N(Z,Y,re){return Z.index=re,i?(re=Z.alternate,re!==null?(re=re.index,re<Y?(Z.flags|=67108866,Y):re):(Z.flags|=67108866,Y)):(Z.flags|=1048576,Y)}function z(Z){return i&&Z.alternate===null&&(Z.flags|=67108866),Z}function D(Z,Y,re,ve){return Y===null||Y.tag!==6?(Y=Pp(re,Z.mode,ve),Y.return=Z,Y):(Y=x(Y,re),Y.return=Z,Y)}function $(Z,Y,re,ve){var Oe=re.type;return Oe===j?me(Z,Y,re.props.children,ve,re.key):Y!==null&&(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===R&&ns(Oe)===Y.type)?(Y=x(Y,re.props),wo(Y,re),Y.return=Z,Y):(Y=_u(re.type,re.key,re.props,null,Z.mode,ve),wo(Y,re),Y.return=Z,Y)}function ne(Z,Y,re,ve){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==re.containerInfo||Y.stateNode.implementation!==re.implementation?(Y=qp(re,Z.mode,ve),Y.return=Z,Y):(Y=x(Y,re.children||[]),Y.return=Z,Y)}function me(Z,Y,re,ve,Oe){return Y===null||Y.tag!==7?(Y=Zi(re,Z.mode,ve,Oe),Y.return=Z,Y):(Y=x(Y,re),Y.return=Z,Y)}function ge(Z,Y,re){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Pp(""+Y,Z.mode,re),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return re=_u(Y.type,Y.key,Y.props,null,Z.mode,re),wo(re,Y),re.return=Z,re;case _:return Y=qp(Y,Z.mode,re),Y.return=Z,Y;case R:return Y=ns(Y),ge(Z,Y,re)}if(M(Y)||U(Y))return Y=Zi(Y,Z.mode,re,null),Y.return=Z,Y;if(typeof Y.then=="function")return ge(Z,Ou(Y),re);if(Y.$$typeof===C)return ge(Z,Cu(Z,Y),re);Du(Z,Y)}return null}function ae(Z,Y,re,ve){var Oe=Y!==null?Y.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Oe!==null?null:D(Z,Y,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case g:return re.key===Oe?$(Z,Y,re,ve):null;case _:return re.key===Oe?ne(Z,Y,re,ve):null;case R:return re=ns(re),ae(Z,Y,re,ve)}if(M(re)||U(re))return Oe!==null?null:me(Z,Y,re,ve,null);if(typeof re.then=="function")return ae(Z,Y,Ou(re),ve);if(re.$$typeof===C)return ae(Z,Y,Cu(Z,re),ve);Du(Z,re)}return null}function ce(Z,Y,re,ve,Oe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Z=Z.get(re)||null,D(Y,Z,""+ve,Oe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case g:return Z=Z.get(ve.key===null?re:ve.key)||null,$(Y,Z,ve,Oe);case _:return Z=Z.get(ve.key===null?re:ve.key)||null,ne(Y,Z,ve,Oe);case R:return ve=ns(ve),ce(Z,Y,re,ve,Oe)}if(M(ve)||U(ve))return Z=Z.get(re)||null,me(Y,Z,ve,Oe,null);if(typeof ve.then=="function")return ce(Z,Y,re,Ou(ve),Oe);if(ve.$$typeof===C)return ce(Z,Y,re,Cu(Y,ve),Oe);Du(Y,ve)}return null}function _e(Z,Y,re,ve){for(var Oe=null,et=null,we=Y,Fe=Y=0,Ke=null;we!==null&&Fe<re.length;Fe++){we.index>Fe?(Ke=we,we=null):Ke=we.sibling;var tt=ae(Z,we,re[Fe],ve);if(tt===null){we===null&&(we=Ke);break}i&&we&&tt.alternate===null&&s(Z,we),Y=N(tt,Y,Fe),et===null?Oe=tt:et.sibling=tt,et=tt,we=Ke}if(Fe===re.length)return c(Z,we),Xe&&fa(Z,Fe),Oe;if(we===null){for(;Fe<re.length;Fe++)we=ge(Z,re[Fe],ve),we!==null&&(Y=N(we,Y,Fe),et===null?Oe=we:et.sibling=we,et=we);return Xe&&fa(Z,Fe),Oe}for(we=f(we);Fe<re.length;Fe++)Ke=ce(we,Z,Fe,re[Fe],ve),Ke!==null&&(i&&Ke.alternate!==null&&we.delete(Ke.key===null?Fe:Ke.key),Y=N(Ke,Y,Fe),et===null?Oe=Ke:et.sibling=Ke,et=Ke);return i&&we.forEach(function(Ci){return s(Z,Ci)}),Xe&&fa(Z,Fe),Oe}function Pe(Z,Y,re,ve){if(re==null)throw Error(a(151));for(var Oe=null,et=null,we=Y,Fe=Y=0,Ke=null,tt=re.next();we!==null&&!tt.done;Fe++,tt=re.next()){we.index>Fe?(Ke=we,we=null):Ke=we.sibling;var Ci=ae(Z,we,tt.value,ve);if(Ci===null){we===null&&(we=Ke);break}i&&we&&Ci.alternate===null&&s(Z,we),Y=N(Ci,Y,Fe),et===null?Oe=Ci:et.sibling=Ci,et=Ci,we=Ke}if(tt.done)return c(Z,we),Xe&&fa(Z,Fe),Oe;if(we===null){for(;!tt.done;Fe++,tt=re.next())tt=ge(Z,tt.value,ve),tt!==null&&(Y=N(tt,Y,Fe),et===null?Oe=tt:et.sibling=tt,et=tt);return Xe&&fa(Z,Fe),Oe}for(we=f(we);!tt.done;Fe++,tt=re.next())tt=ce(we,Z,Fe,tt.value,ve),tt!==null&&(i&&tt.alternate!==null&&we.delete(tt.key===null?Fe:tt.key),Y=N(tt,Y,Fe),et===null?Oe=tt:et.sibling=tt,et=tt);return i&&we.forEach(function(BP){return s(Z,BP)}),Xe&&fa(Z,Fe),Oe}function dt(Z,Y,re,ve){if(typeof re=="object"&&re!==null&&re.type===j&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case g:e:{for(var Oe=re.key;Y!==null;){if(Y.key===Oe){if(Oe=re.type,Oe===j){if(Y.tag===7){c(Z,Y.sibling),ve=x(Y,re.props.children),ve.return=Z,Z=ve;break e}}else if(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===R&&ns(Oe)===Y.type){c(Z,Y.sibling),ve=x(Y,re.props),wo(ve,re),ve.return=Z,Z=ve;break e}c(Z,Y);break}else s(Z,Y);Y=Y.sibling}re.type===j?(ve=Zi(re.props.children,Z.mode,ve,re.key),ve.return=Z,Z=ve):(ve=_u(re.type,re.key,re.props,null,Z.mode,ve),wo(ve,re),ve.return=Z,Z=ve)}return z(Z);case _:e:{for(Oe=re.key;Y!==null;){if(Y.key===Oe)if(Y.tag===4&&Y.stateNode.containerInfo===re.containerInfo&&Y.stateNode.implementation===re.implementation){c(Z,Y.sibling),ve=x(Y,re.children||[]),ve.return=Z,Z=ve;break e}else{c(Z,Y);break}else s(Z,Y);Y=Y.sibling}ve=qp(re,Z.mode,ve),ve.return=Z,Z=ve}return z(Z);case R:return re=ns(re),dt(Z,Y,re,ve)}if(M(re))return _e(Z,Y,re,ve);if(U(re)){if(Oe=U(re),typeof Oe!="function")throw Error(a(150));return re=Oe.call(re),Pe(Z,Y,re,ve)}if(typeof re.then=="function")return dt(Z,Y,Ou(re),ve);if(re.$$typeof===C)return dt(Z,Y,Cu(Z,re),ve);Du(Z,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Y!==null&&Y.tag===6?(c(Z,Y.sibling),ve=x(Y,re),ve.return=Z,Z=ve):(c(Z,Y),ve=Pp(re,Z.mode,ve),ve.return=Z,Z=ve),z(Z)):c(Z,Y)}return function(Z,Y,re,ve){try{So=0;var Oe=dt(Z,Y,re,ve);return ml=null,Oe}catch(we){if(we===fl||we===Eu)throw we;var et=Hr(29,we,null,Z.mode);return et.lanes=ve,et.return=Z,et}}}var is=fj(!0),mj=fj(!1),ci=!1;function Yp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kp(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ui(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function di(i,s,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(nt&2)!==0){var x=f.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),f.pending=s,s=Nu(i),X0(i,null,c),s}return ju(i,f,s,c),Nu(i)}function Co(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,a0(i,c)}}function Xp(i,s){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var x=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var z={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};N===null?x=N=z:N=N.next=z,c=c.next}while(c!==null);N===null?x=N=s:N=N.next=s}else x=N=s;c={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:N,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var Wp=!1;function Ao(){if(Wp){var i=dl;if(i!==null)throw i}}function Eo(i,s,c,f){Wp=!1;var x=i.updateQueue;ci=!1;var N=x.firstBaseUpdate,z=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var $=D,ne=$.next;$.next=null,z===null?N=ne:z.next=ne,z=$;var me=i.alternate;me!==null&&(me=me.updateQueue,D=me.lastBaseUpdate,D!==z&&(D===null?me.firstBaseUpdate=ne:D.next=ne,me.lastBaseUpdate=$))}if(N!==null){var ge=x.baseState;z=0,me=ne=$=null,D=N;do{var ae=D.lane&-536870913,ce=ae!==D.lane;if(ce?(Ye&ae)===ae:(f&ae)===ae){ae!==0&&ae===ul&&(Wp=!0),me!==null&&(me=me.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var _e=i,Pe=D;ae=s;var dt=c;switch(Pe.tag){case 1:if(_e=Pe.payload,typeof _e=="function"){ge=_e.call(dt,ge,ae);break e}ge=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Pe.payload,ae=typeof _e=="function"?_e.call(dt,ge,ae):_e,ae==null)break e;ge=v({},ge,ae);break e;case 2:ci=!0}}ae=D.callback,ae!==null&&(i.flags|=64,ce&&(i.flags|=8192),ce=x.callbacks,ce===null?x.callbacks=[ae]:ce.push(ae))}else ce={lane:ae,tag:D.tag,payload:D.payload,callback:D.callback,next:null},me===null?(ne=me=ce,$=ge):me=me.next=ce,z|=ae;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,x.lastBaseUpdate=ce,x.shared.pending=null}}while(!0);me===null&&($=ge),x.baseState=$,x.firstBaseUpdate=ne,x.lastBaseUpdate=me,N===null&&(x.shared.lanes=0),vi|=z,i.lanes=z,i.memoizedState=ge}}function pj(i,s){if(typeof i!="function")throw Error(a(191,i));i.call(s)}function hj(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)pj(c[i],s)}var pl=fe(null),Mu=fe(0);function vj(i,s){i=_a,ue(Mu,i),ue(pl,s),_a=i|s.baseLanes}function Zp(){ue(Mu,_a),ue(pl,pl.current)}function Jp(){_a=Mu.current,te(pl),te(Mu)}var Qr=fe(null),fn=null;function fi(i){var s=i.alternate;ue(qt,qt.current&1),ue(Qr,i),fn===null&&(s===null||pl.current!==null||s.memoizedState!==null)&&(fn=i)}function eh(i){ue(qt,qt.current),ue(Qr,i),fn===null&&(fn=i)}function gj(i){i.tag===22?(ue(qt,qt.current),ue(Qr,i),fn===null&&(fn=i)):mi()}function mi(){ue(qt,qt.current),ue(Qr,Qr.current)}function Vr(i){te(Qr),fn===i&&(fn=null),te(qt)}var qt=fe(0);function Tu(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||sv(c)||lv(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ha=0,Ue=null,ct=null,Ut=null,ku=!1,hl=!1,ss=!1,Pu=0,zo=0,vl=null,Dk=0;function Ot(){throw Error(a(321))}function th(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!Gr(i[c],s[c]))return!1;return!0}function rh(i,s,c,f,x,N){return ha=N,Ue=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=i===null||i.memoizedState===null?eN:gh,ss=!1,N=c(f,x),ss=!1,hl&&(N=yj(s,c,f,x)),xj(i),N}function xj(i){k.H=Mo;var s=ct!==null&&ct.next!==null;if(ha=0,Ut=ct=Ue=null,ku=!1,zo=0,vl=null,s)throw Error(a(300));i===null||Ft||(i=i.dependencies,i!==null&&wu(i)&&(Ft=!0))}function yj(i,s,c,f){Ue=i;var x=0;do{if(hl&&(vl=null),zo=0,hl=!1,25<=x)throw Error(a(301));if(x+=1,Ut=ct=null,i.updateQueue!=null){var N=i.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}k.H=tN,N=s(c,f)}while(hl);return N}function Mk(){var i=k.H,s=i.useState()[0];return s=typeof s.then=="function"?Oo(s):s,i=i.useState()[0],(ct!==null?ct.memoizedState:null)!==i&&(Ue.flags|=1024),s}function nh(){var i=Pu!==0;return Pu=0,i}function ah(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function ih(i){if(ku){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ku=!1}ha=0,Ut=ct=Ue=null,hl=!1,zo=Pu=0,vl=null}function Sr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ue.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function Rt(){if(ct===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=ct.next;var s=Ut===null?Ue.memoizedState:Ut.next;if(s!==null)Ut=s,ct=i;else{if(i===null)throw Ue.alternate===null?Error(a(467)):Error(a(310));ct=i,i={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ut===null?Ue.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(i){var s=zo;return zo+=1,vl===null&&(vl=[]),i=cj(vl,i,s),s=Ue,(Ut===null?s.memoizedState:Ut.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?eN:gh),i}function Ru(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Oo(i);if(i.$$typeof===C)return dr(i)}throw Error(a(438,String(i)))}function sh(i){var s=null,c=Ue.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=Ue.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=qu(),Ue.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),f=0;f<i;f++)c[f]=L;return s.index++,c}function va(i,s){return typeof s=="function"?s(i):s}function Iu(i){var s=Rt();return lh(s,ct,i)}function lh(i,s,c){var f=i.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=c;var x=i.baseQueue,N=f.pending;if(N!==null){if(x!==null){var z=x.next;x.next=N.next,N.next=z}s.baseQueue=x=N,f.pending=null}if(N=i.baseState,x===null)i.memoizedState=N;else{s=x.next;var D=z=null,$=null,ne=s,me=!1;do{var ge=ne.lane&-536870913;if(ge!==ne.lane?(Ye&ge)===ge:(ha&ge)===ge){var ae=ne.revertLane;if(ae===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),ge===ul&&(me=!0);else if((ha&ae)===ae){ne=ne.next,ae===ul&&(me=!0);continue}else ge={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},$===null?(D=$=ge,z=N):$=$.next=ge,Ue.lanes|=ae,vi|=ae;ge=ne.action,ss&&c(N,ge),N=ne.hasEagerState?ne.eagerState:c(N,ge)}else ae={lane:ge,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},$===null?(D=$=ae,z=N):$=$.next=ae,Ue.lanes|=ge,vi|=ge;ne=ne.next}while(ne!==null&&ne!==s);if($===null?z=N:$.next=D,!Gr(N,i.memoizedState)&&(Ft=!0,me&&(c=dl,c!==null)))throw c;i.memoizedState=N,i.baseState=z,i.baseQueue=$,f.lastRenderedState=N}return x===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function oh(i){var s=Rt(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=c.dispatch,x=c.pending,N=s.memoizedState;if(x!==null){c.pending=null;var z=x=x.next;do N=i(N,z.action),z=z.next;while(z!==x);Gr(N,s.memoizedState)||(Ft=!0),s.memoizedState=N,s.baseQueue===null&&(s.baseState=N),c.lastRenderedState=N}return[N,f]}function bj(i,s,c){var f=Ue,x=Rt(),N=Xe;if(N){if(c===void 0)throw Error(a(407));c=c()}else c=s();var z=!Gr((ct||x).memoizedState,c);if(z&&(x.memoizedState=c,Ft=!0),x=x.queue,dh(_j.bind(null,f,x,i),[i]),x.getSnapshot!==s||z||Ut!==null&&Ut.memoizedState.tag&1){if(f.flags|=2048,gl(9,{destroy:void 0},Nj.bind(null,f,x,c,s),null),vt===null)throw Error(a(349));N||(ha&127)!==0||jj(f,s,c)}return c}function jj(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Ue.updateQueue,s===null?(s=qu(),Ue.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function Nj(i,s,c,f){s.value=c,s.getSnapshot=f,Sj(s)&&wj(i)}function _j(i,s,c){return c(function(){Sj(s)&&wj(i)})}function Sj(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!Gr(i,c)}catch{return!0}}function wj(i){var s=Wi(i,2);s!==null&&Rr(s,i,2)}function ch(i){var s=Sr();if(typeof i=="function"){var c=i;if(i=c(),ss){Fn(!0);try{c()}finally{Fn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:i},s}function Cj(i,s,c,f){return i.baseState=c,lh(i,ct,typeof f=="function"?f:va)}function Tk(i,s,c,f,x){if(Bu(i))throw Error(a(485));if(i=s.action,i!==null){var N={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){N.listeners.push(z)}};k.T!==null?c(!0):N.isTransition=!1,f(N),c=s.pending,c===null?(N.next=s.pending=N,Aj(s,N)):(N.next=c.next,s.pending=c.next=N)}}function Aj(i,s){var c=s.action,f=s.payload,x=i.state;if(s.isTransition){var N=k.T,z={};k.T=z;try{var D=c(x,f),$=k.S;$!==null&&$(z,D),Ej(i,s,D)}catch(ne){uh(i,s,ne)}finally{N!==null&&z.types!==null&&(N.types=z.types),k.T=N}}else try{N=c(x,f),Ej(i,s,N)}catch(ne){uh(i,s,ne)}}function Ej(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){zj(i,s,f)},function(f){return uh(i,s,f)}):zj(i,s,c)}function zj(i,s,c){s.status="fulfilled",s.value=c,Oj(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,Aj(i,c)))}function uh(i,s,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,Oj(s),s=s.next;while(s!==f)}i.action=null}function Oj(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Dj(i,s){return s}function Mj(i,s){if(Xe){var c=vt.formState;if(c!==null){e:{var f=Ue;if(Xe){if(jt){t:{for(var x=jt,N=dn;x.nodeType!==8;){if(!N){x=null;break t}if(x=mn(x.nextSibling),x===null){x=null;break t}}N=x.data,x=N==="F!"||N==="F"?x:null}if(x){jt=mn(x.nextSibling),f=x.data==="F!";break e}}li(f)}f=!1}f&&(s=c[0])}}return c=Sr(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dj,lastRenderedState:s},c.queue=f,c=Wj.bind(null,Ue,f),f.dispatch=c,f=ch(!1),N=vh.bind(null,Ue,!1,f.queue),f=Sr(),x={state:s,dispatch:null,action:i,pending:null},f.queue=x,c=Tk.bind(null,Ue,x,N,c),x.dispatch=c,f.memoizedState=i,[s,c,!1]}function Tj(i){var s=Rt();return kj(s,ct,i)}function kj(i,s,c){if(s=lh(i,s,Dj)[0],i=Iu(va)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Oo(s)}catch(z){throw z===fl?Eu:z}else f=s;s=Rt();var x=s.queue,N=x.dispatch;return c!==s.memoizedState&&(Ue.flags|=2048,gl(9,{destroy:void 0},kk.bind(null,x,c),null)),[f,N,i]}function kk(i,s){i.action=s}function Pj(i){var s=Rt(),c=ct;if(c!==null)return kj(s,c,i);Rt(),s=s.memoizedState,c=Rt();var f=c.queue.dispatch;return c.memoizedState=i,[s,f,!1]}function gl(i,s,c,f){return i={tag:i,create:c,deps:f,inst:s,next:null},s=Ue.updateQueue,s===null&&(s=qu(),Ue.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,s.lastEffect=i),i}function qj(){return Rt().memoizedState}function Lu(i,s,c,f){var x=Sr();Ue.flags|=i,x.memoizedState=gl(1|s,{destroy:void 0},c,f===void 0?null:f)}function $u(i,s,c,f){var x=Rt();f=f===void 0?null:f;var N=x.memoizedState.inst;ct!==null&&f!==null&&th(f,ct.memoizedState.deps)?x.memoizedState=gl(s,N,c,f):(Ue.flags|=i,x.memoizedState=gl(1|s,N,c,f))}function Rj(i,s){Lu(8390656,8,i,s)}function dh(i,s){$u(2048,8,i,s)}function Pk(i){Ue.flags|=4;var s=Ue.updateQueue;if(s===null)s=qu(),Ue.updateQueue=s,s.events=[i];else{var c=s.events;c===null?s.events=[i]:c.push(i)}}function Ij(i){var s=Rt().memoizedState;return Pk({ref:s,nextImpl:i}),function(){if((nt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function Lj(i,s){return $u(4,2,i,s)}function $j(i,s){return $u(4,4,i,s)}function Bj(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Uj(i,s,c){c=c!=null?c.concat([i]):null,$u(4,4,Bj.bind(null,s,i),c)}function fh(){}function Fj(i,s){var c=Rt();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&th(s,f[1])?f[0]:(c.memoizedState=[i,s],i)}function Gj(i,s){var c=Rt();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&th(s,f[1]))return f[0];if(f=i(),ss){Fn(!0);try{i()}finally{Fn(!1)}}return c.memoizedState=[f,s],f}function mh(i,s,c){return c===void 0||(ha&1073741824)!==0&&(Ye&261930)===0?i.memoizedState=s:(i.memoizedState=c,i=HN(),Ue.lanes|=i,vi|=i,c)}function Hj(i,s,c,f){return Gr(c,s)?c:pl.current!==null?(i=mh(i,c,f),Gr(i,s)||(Ft=!0),i):(ha&42)===0||(ha&1073741824)!==0&&(Ye&261930)===0?(Ft=!0,i.memoizedState=c):(i=HN(),Ue.lanes|=i,vi|=i,s)}function Qj(i,s,c,f,x){var N=J.p;J.p=N!==0&&8>N?N:8;var z=k.T,D={};k.T=D,vh(i,!1,s,c);try{var $=x(),ne=k.S;if(ne!==null&&ne(D,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var me=Ok($,f);Do(i,s,me,Xr(i))}else Do(i,s,f,Xr(i))}catch(ge){Do(i,s,{then:function(){},status:"rejected",reason:ge},Xr())}finally{J.p=N,z!==null&&D.types!==null&&(z.types=D.types),k.T=z}}function qk(){}function ph(i,s,c,f){if(i.tag!==5)throw Error(a(476));var x=Vj(i).queue;Qj(i,x,s,Q,c===null?qk:function(){return Yj(i),c(f)})}function Vj(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:Q},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Yj(i){var s=Vj(i);s.next===null&&(s=i.alternate.memoizedState),Do(i,s.next.queue,{},Xr())}function hh(){return dr(Yo)}function Kj(){return Rt().memoizedState}function Xj(){return Rt().memoizedState}function Rk(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=Xr();i=ui(c);var f=di(s,i,c);f!==null&&(Rr(f,s,c),Co(f,s,c)),s={cache:Gp()},i.payload=s;return}s=s.return}}function Ik(i,s,c){var f=Xr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Bu(i)?Zj(s,c):(c=Tp(i,s,c,f),c!==null&&(Rr(c,i,f),Jj(c,s,f)))}function Wj(i,s,c){var f=Xr();Do(i,s,c,f)}function Do(i,s,c,f){var x={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Bu(i))Zj(s,x);else{var N=i.alternate;if(i.lanes===0&&(N===null||N.lanes===0)&&(N=s.lastRenderedReducer,N!==null))try{var z=s.lastRenderedState,D=N(z,c);if(x.hasEagerState=!0,x.eagerState=D,Gr(D,z))return ju(i,s,x,0),vt===null&&bu(),!1}catch{}if(c=Tp(i,s,x,f),c!==null)return Rr(c,i,f),Jj(c,s,f),!0}return!1}function vh(i,s,c,f){if(f={lane:2,revertLane:Yh(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Bu(i)){if(s)throw Error(a(479))}else s=Tp(i,c,f,2),s!==null&&Rr(s,i,2)}function Bu(i){var s=i.alternate;return i===Ue||s!==null&&s===Ue}function Zj(i,s){hl=ku=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function Jj(i,s,c){if((c&4194048)!==0){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,a0(i,c)}}var Mo={readContext:dr,use:Ru,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Mo.useEffectEvent=Ot;var eN={readContext:dr,use:Ru,useCallback:function(i,s){return Sr().memoizedState=[i,s===void 0?null:s],i},useContext:dr,useEffect:Rj,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,Lu(4194308,4,Bj.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Lu(4194308,4,i,s)},useInsertionEffect:function(i,s){Lu(4,2,i,s)},useMemo:function(i,s){var c=Sr();s=s===void 0?null:s;var f=i();if(ss){Fn(!0);try{i()}finally{Fn(!1)}}return c.memoizedState=[f,s],f},useReducer:function(i,s,c){var f=Sr();if(c!==void 0){var x=c(s);if(ss){Fn(!0);try{c(s)}finally{Fn(!1)}}}else x=s;return f.memoizedState=f.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},f.queue=i,i=i.dispatch=Ik.bind(null,Ue,i),[f.memoizedState,i]},useRef:function(i){var s=Sr();return i={current:i},s.memoizedState=i},useState:function(i){i=ch(i);var s=i.queue,c=Wj.bind(null,Ue,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:fh,useDeferredValue:function(i,s){var c=Sr();return mh(c,i,s)},useTransition:function(){var i=ch(!1);return i=Qj.bind(null,Ue,i.queue,!0,!1),Sr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var f=Ue,x=Sr();if(Xe){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),vt===null)throw Error(a(349));(Ye&127)!==0||jj(f,s,c)}x.memoizedState=c;var N={value:c,getSnapshot:s};return x.queue=N,Rj(_j.bind(null,f,N,i),[i]),f.flags|=2048,gl(9,{destroy:void 0},Nj.bind(null,f,N,c,s),null),c},useId:function(){var i=Sr(),s=vt.identifierPrefix;if(Xe){var c=Qn,f=Hn;c=(f&~(1<<32-_r(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Pu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=Dk++,s="_"+s+"r_"+c.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:hh,useFormState:Mj,useActionState:Mj,useOptimistic:function(i){var s=Sr();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=vh.bind(null,Ue,!0,c),c.dispatch=s,[i,s]},useMemoCache:sh,useCacheRefresh:function(){return Sr().memoizedState=Rk.bind(null,Ue)},useEffectEvent:function(i){var s=Sr(),c={impl:i};return s.memoizedState=c,function(){if((nt&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},gh={readContext:dr,use:Ru,useCallback:Fj,useContext:dr,useEffect:dh,useImperativeHandle:Uj,useInsertionEffect:Lj,useLayoutEffect:$j,useMemo:Gj,useReducer:Iu,useRef:qj,useState:function(){return Iu(va)},useDebugValue:fh,useDeferredValue:function(i,s){var c=Rt();return Hj(c,ct.memoizedState,i,s)},useTransition:function(){var i=Iu(va)[0],s=Rt().memoizedState;return[typeof i=="boolean"?i:Oo(i),s]},useSyncExternalStore:bj,useId:Kj,useHostTransitionStatus:hh,useFormState:Tj,useActionState:Tj,useOptimistic:function(i,s){var c=Rt();return Cj(c,ct,i,s)},useMemoCache:sh,useCacheRefresh:Xj};gh.useEffectEvent=Ij;var tN={readContext:dr,use:Ru,useCallback:Fj,useContext:dr,useEffect:dh,useImperativeHandle:Uj,useInsertionEffect:Lj,useLayoutEffect:$j,useMemo:Gj,useReducer:oh,useRef:qj,useState:function(){return oh(va)},useDebugValue:fh,useDeferredValue:function(i,s){var c=Rt();return ct===null?mh(c,i,s):Hj(c,ct.memoizedState,i,s)},useTransition:function(){var i=oh(va)[0],s=Rt().memoizedState;return[typeof i=="boolean"?i:Oo(i),s]},useSyncExternalStore:bj,useId:Kj,useHostTransitionStatus:hh,useFormState:Pj,useActionState:Pj,useOptimistic:function(i,s){var c=Rt();return ct!==null?Cj(c,ct,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:sh,useCacheRefresh:Xj};tN.useEffectEvent=Ij;function xh(i,s,c,f){s=i.memoizedState,c=c(f,s),c=c==null?s:v({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var yh={enqueueSetState:function(i,s,c){i=i._reactInternals;var f=Xr(),x=ui(f);x.payload=s,c!=null&&(x.callback=c),s=di(i,x,f),s!==null&&(Rr(s,i,f),Co(s,i,f))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var f=Xr(),x=ui(f);x.tag=1,x.payload=s,c!=null&&(x.callback=c),s=di(i,x,f),s!==null&&(Rr(s,i,f),Co(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=Xr(),f=ui(c);f.tag=2,s!=null&&(f.callback=s),s=di(i,f,c),s!==null&&(Rr(s,i,c),Co(s,i,c))}};function rN(i,s,c,f,x,N,z){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,N,z):s.prototype&&s.prototype.isPureReactComponent?!xo(c,f)||!xo(x,N):!0}function nN(i,s,c,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==i&&yh.enqueueReplaceState(s,s.state,null)}function ls(i,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(i=i.defaultProps){c===s&&(c=v({},c));for(var x in i)c[x]===void 0&&(c[x]=i[x])}return c}function aN(i){yu(i)}function iN(i){console.error(i)}function sN(i){yu(i)}function Uu(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function lN(i,s,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function bh(i,s,c){return c=ui(c),c.tag=3,c.payload={element:null},c.callback=function(){Uu(i,s)},c}function oN(i){return i=ui(i),i.tag=3,i}function cN(i,s,c,f){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var N=f.value;i.payload=function(){return x(N)},i.callback=function(){lN(s,c,f)}}var z=c.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(i.callback=function(){lN(s,c,f),typeof x!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function Lk(i,s,c,f,x){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&cl(s,c,x,!0),c=Qr.current,c!==null){switch(c.tag){case 31:case 13:return fn===null?ed():c.alternate===null&&Dt===0&&(Dt=3),c.flags&=-257,c.flags|=65536,c.lanes=x,f===zu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),Hh(i,f,x)),!1;case 22:return c.flags|=65536,f===zu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),Hh(i,f,x)),!1}throw Error(a(435,c.tag))}return Hh(i,f,x),ed(),!1}if(Xe)return s=Qr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,f!==Lp&&(i=Error(a(422),{cause:f}),jo(on(i,c)))):(f!==Lp&&(s=Error(a(423),{cause:f}),jo(on(s,c))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,f=on(f,c),x=bh(i.stateNode,f,x),Xp(i,x),Dt!==4&&(Dt=2)),!1;var N=Error(a(520),{cause:f});if(N=on(N,c),$o===null?$o=[N]:$o.push(N),Dt!==4&&(Dt=2),s===null)return!0;f=on(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=x&-x,c.lanes|=i,i=bh(c.stateNode,f,i),Xp(c,i),!1;case 1:if(s=c.type,N=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(gi===null||!gi.has(N))))return c.flags|=65536,x&=-x,c.lanes|=x,x=oN(x),cN(x,i,c,f),Xp(c,x),!1}c=c.return}while(c!==null);return!1}var jh=Error(a(461)),Ft=!1;function fr(i,s,c,f){s.child=i===null?mj(s,null,c,f):is(s,i.child,c,f)}function uN(i,s,c,f,x){c=c.render;var N=s.ref;if("ref"in f){var z={};for(var D in f)D!=="ref"&&(z[D]=f[D])}else z=f;return ts(s),f=rh(i,s,c,z,N,x),D=nh(),i!==null&&!Ft?(ah(i,s,x),ga(i,s,x)):(Xe&&D&&Rp(s),s.flags|=1,fr(i,s,f,x),s.child)}function dN(i,s,c,f,x){if(i===null){var N=c.type;return typeof N=="function"&&!kp(N)&&N.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=N,fN(i,s,N,f,x)):(i=_u(c.type,null,f,s,s.mode,x),i.ref=s.ref,i.return=s,s.child=i)}if(N=i.child,!zh(i,x)){var z=N.memoizedProps;if(c=c.compare,c=c!==null?c:xo,c(z,f)&&i.ref===s.ref)return ga(i,s,x)}return s.flags|=1,i=da(N,f),i.ref=s.ref,i.return=s,s.child=i}function fN(i,s,c,f,x){if(i!==null){var N=i.memoizedProps;if(xo(N,f)&&i.ref===s.ref)if(Ft=!1,s.pendingProps=f=N,zh(i,x))(i.flags&131072)!==0&&(Ft=!0);else return s.lanes=i.lanes,ga(i,s,x)}return Nh(i,s,c,f,x)}function mN(i,s,c,f){var x=f.children,N=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(N=N!==null?N.baseLanes|c:c,i!==null){for(f=s.child=i.child,x=0;f!==null;)x=x|f.lanes|f.childLanes,f=f.sibling;f=x&~N}else f=0,s.child=null;return pN(i,s,N,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Au(s,N!==null?N.cachePool:null),N!==null?vj(s,N):Zp(),gj(s);else return f=s.lanes=536870912,pN(i,s,N!==null?N.baseLanes|c:c,c,f)}else N!==null?(Au(s,N.cachePool),vj(s,N),mi(),s.memoizedState=null):(i!==null&&Au(s,null),Zp(),mi());return fr(i,s,x,c),s.child}function To(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function pN(i,s,c,f,x){var N=Qp();return N=N===null?null:{parent:Bt._currentValue,pool:N},s.memoizedState={baseLanes:c,cachePool:N},i!==null&&Au(s,null),Zp(),gj(s),i!==null&&cl(i,s,f,!0),s.childLanes=x,null}function Fu(i,s){return s=Hu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function hN(i,s,c){return is(s,i.child,null,c),i=Fu(s,s.pendingProps),i.flags|=2,Vr(s),s.memoizedState=null,i}function $k(i,s,c){var f=s.pendingProps,x=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Xe){if(f.mode==="hidden")return i=Fu(s,f),s.lanes=536870912,To(null,i);if(eh(s),(i=jt)?(i=A_(i,dn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ii!==null?{id:Hn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},c=Z0(i),c.return=s,s.child=c,ur=s,jt=null)):i=null,i===null)throw li(s);return s.lanes=536870912,null}return Fu(s,f)}var N=i.memoizedState;if(N!==null){var z=N.dehydrated;if(eh(s),x)if(s.flags&256)s.flags&=-257,s=hN(i,s,c);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(a(558));else if(Ft||cl(i,s,c,!1),x=(c&i.childLanes)!==0,Ft||x){if(f=vt,f!==null&&(z=i0(f,c),z!==0&&z!==N.retryLane))throw N.retryLane=z,Wi(i,z),Rr(f,i,z),jh;ed(),s=hN(i,s,c)}else i=N.treeContext,jt=mn(z.nextSibling),ur=s,Xe=!0,si=null,dn=!1,i!==null&&tj(s,i),s=Fu(s,f),s.flags|=4096;return s}return i=da(i.child,{mode:f.mode,children:f.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Gu(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function Nh(i,s,c,f,x){return ts(s),c=rh(i,s,c,f,void 0,x),f=nh(),i!==null&&!Ft?(ah(i,s,x),ga(i,s,x)):(Xe&&f&&Rp(s),s.flags|=1,fr(i,s,c,x),s.child)}function vN(i,s,c,f,x,N){return ts(s),s.updateQueue=null,c=yj(s,f,c,x),xj(i),f=nh(),i!==null&&!Ft?(ah(i,s,N),ga(i,s,N)):(Xe&&f&&Rp(s),s.flags|=1,fr(i,s,c,N),s.child)}function gN(i,s,c,f,x){if(ts(s),s.stateNode===null){var N=il,z=c.contextType;typeof z=="object"&&z!==null&&(N=dr(z)),N=new c(f,N),s.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=yh,s.stateNode=N,N._reactInternals=s,N=s.stateNode,N.props=f,N.state=s.memoizedState,N.refs={},Yp(s),z=c.contextType,N.context=typeof z=="object"&&z!==null?dr(z):il,N.state=s.memoizedState,z=c.getDerivedStateFromProps,typeof z=="function"&&(xh(s,c,z,f),N.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(z=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),z!==N.state&&yh.enqueueReplaceState(N,N.state,null),Eo(s,f,N,x),Ao(),N.state=s.memoizedState),typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(i===null){N=s.stateNode;var D=s.memoizedProps,$=ls(c,D);N.props=$;var ne=N.context,me=c.contextType;z=il,typeof me=="object"&&me!==null&&(z=dr(me));var ge=c.getDerivedStateFromProps;me=typeof ge=="function"||typeof N.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,me||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(D||ne!==z)&&nN(s,N,f,z),ci=!1;var ae=s.memoizedState;N.state=ae,Eo(s,f,N,x),Ao(),ne=s.memoizedState,D||ae!==ne||ci?(typeof ge=="function"&&(xh(s,c,ge,f),ne=s.memoizedState),($=ci||rN(s,c,$,f,ae,ne,z))?(me||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(s.flags|=4194308)):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=ne),N.props=f,N.state=ne,N.context=z,f=$):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{N=s.stateNode,Kp(i,s),z=s.memoizedProps,me=ls(c,z),N.props=me,ge=s.pendingProps,ae=N.context,ne=c.contextType,$=il,typeof ne=="object"&&ne!==null&&($=dr(ne)),D=c.getDerivedStateFromProps,(ne=typeof D=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(z!==ge||ae!==$)&&nN(s,N,f,$),ci=!1,ae=s.memoizedState,N.state=ae,Eo(s,f,N,x),Ao();var ce=s.memoizedState;z!==ge||ae!==ce||ci||i!==null&&i.dependencies!==null&&wu(i.dependencies)?(typeof D=="function"&&(xh(s,c,D,f),ce=s.memoizedState),(me=ci||rN(s,c,me,f,ae,ce,$)||i!==null&&i.dependencies!==null&&wu(i.dependencies))?(ne||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(f,ce,$),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(f,ce,$)),typeof N.componentDidUpdate=="function"&&(s.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof N.componentDidUpdate!="function"||z===i.memoizedProps&&ae===i.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&ae===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=ce),N.props=f,N.state=ce,N.context=$,f=me):(typeof N.componentDidUpdate!="function"||z===i.memoizedProps&&ae===i.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&ae===i.memoizedState||(s.flags|=1024),f=!1)}return N=f,Gu(i,s),f=(s.flags&128)!==0,N||f?(N=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:N.render(),s.flags|=1,i!==null&&f?(s.child=is(s,i.child,null,x),s.child=is(s,null,c,x)):fr(i,s,c,x),s.memoizedState=N.state,i=s.child):i=ga(i,s,x),i}function xN(i,s,c,f){return Ji(),s.flags|=256,fr(i,s,c,f),s.child}var _h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sh(i){return{baseLanes:i,cachePool:lj()}}function wh(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=Kr),i}function yN(i,s,c){var f=s.pendingProps,x=!1,N=(s.flags&128)!==0,z;if((z=N)||(z=i!==null&&i.memoizedState===null?!1:(qt.current&2)!==0),z&&(x=!0,s.flags&=-129),z=(s.flags&32)!==0,s.flags&=-33,i===null){if(Xe){if(x?fi(s):mi(),(i=jt)?(i=A_(i,dn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ii!==null?{id:Hn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},c=Z0(i),c.return=s,s.child=c,ur=s,jt=null)):i=null,i===null)throw li(s);return lv(i)?s.lanes=32:s.lanes=536870912,null}var D=f.children;return f=f.fallback,x?(mi(),x=s.mode,D=Hu({mode:"hidden",children:D},x),f=Zi(f,x,c,null),D.return=s,f.return=s,D.sibling=f,s.child=D,f=s.child,f.memoizedState=Sh(c),f.childLanes=wh(i,z,c),s.memoizedState=_h,To(null,f)):(fi(s),Ch(s,D))}var $=i.memoizedState;if($!==null&&(D=$.dehydrated,D!==null)){if(N)s.flags&256?(fi(s),s.flags&=-257,s=Ah(i,s,c)):s.memoizedState!==null?(mi(),s.child=i.child,s.flags|=128,s=null):(mi(),D=f.fallback,x=s.mode,f=Hu({mode:"visible",children:f.children},x),D=Zi(D,x,c,null),D.flags|=2,f.return=s,D.return=s,f.sibling=D,s.child=f,is(s,i.child,null,c),f=s.child,f.memoizedState=Sh(c),f.childLanes=wh(i,z,c),s.memoizedState=_h,s=To(null,f));else if(fi(s),lv(D)){if(z=D.nextSibling&&D.nextSibling.dataset,z)var ne=z.dgst;z=ne,f=Error(a(419)),f.stack="",f.digest=z,jo({value:f,source:null,stack:null}),s=Ah(i,s,c)}else if(Ft||cl(i,s,c,!1),z=(c&i.childLanes)!==0,Ft||z){if(z=vt,z!==null&&(f=i0(z,c),f!==0&&f!==$.retryLane))throw $.retryLane=f,Wi(i,f),Rr(z,i,f),jh;sv(D)||ed(),s=Ah(i,s,c)}else sv(D)?(s.flags|=192,s.child=i.child,s=null):(i=$.treeContext,jt=mn(D.nextSibling),ur=s,Xe=!0,si=null,dn=!1,i!==null&&tj(s,i),s=Ch(s,f.children),s.flags|=4096);return s}return x?(mi(),D=f.fallback,x=s.mode,$=i.child,ne=$.sibling,f=da($,{mode:"hidden",children:f.children}),f.subtreeFlags=$.subtreeFlags&65011712,ne!==null?D=da(ne,D):(D=Zi(D,x,c,null),D.flags|=2),D.return=s,f.return=s,f.sibling=D,s.child=f,To(null,f),f=s.child,D=i.child.memoizedState,D===null?D=Sh(c):(x=D.cachePool,x!==null?($=Bt._currentValue,x=x.parent!==$?{parent:$,pool:$}:x):x=lj(),D={baseLanes:D.baseLanes|c,cachePool:x}),f.memoizedState=D,f.childLanes=wh(i,z,c),s.memoizedState=_h,To(i.child,f)):(fi(s),c=i.child,i=c.sibling,c=da(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,i!==null&&(z=s.deletions,z===null?(s.deletions=[i],s.flags|=16):z.push(i)),s.child=c,s.memoizedState=null,c)}function Ch(i,s){return s=Hu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Hu(i,s){return i=Hr(22,i,null,s),i.lanes=0,i}function Ah(i,s,c){return is(s,i.child,null,c),i=Ch(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function bN(i,s,c){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),Up(i.return,s,c)}function Eh(i,s,c,f,x,N){var z=i.memoizedState;z===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:x,treeForkCount:N}:(z.isBackwards=s,z.rendering=null,z.renderingStartTime=0,z.last=f,z.tail=c,z.tailMode=x,z.treeForkCount=N)}function jN(i,s,c){var f=s.pendingProps,x=f.revealOrder,N=f.tail;f=f.children;var z=qt.current,D=(z&2)!==0;if(D?(z=z&1|2,s.flags|=128):z&=1,ue(qt,z),fr(i,s,f,c),f=Xe?bo:0,!D&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&bN(i,c,s);else if(i.tag===19)bN(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(c=s.child,x=null;c!==null;)i=c.alternate,i!==null&&Tu(i)===null&&(x=c),c=c.sibling;c=x,c===null?(x=s.child,s.child=null):(x=c.sibling,c.sibling=null),Eh(s,!1,x,c,N,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=s.child,s.child=null;x!==null;){if(i=x.alternate,i!==null&&Tu(i)===null){s.child=x;break}i=x.sibling,x.sibling=c,c=x,x=i}Eh(s,!0,c,null,N,f);break;case"together":Eh(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function ga(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),vi|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(cl(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(a(153));if(s.child!==null){for(i=s.child,c=da(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=da(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function zh(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&wu(i)))}function Bk(i,s,c){switch(s.tag){case 3:Ee(s,s.stateNode.containerInfo),oi(s,Bt,i.memoizedState.cache),Ji();break;case 27:case 5:W(s);break;case 4:Ee(s,s.stateNode.containerInfo);break;case 10:oi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,eh(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(fi(s),s.flags|=128,null):(c&s.child.childLanes)!==0?yN(i,s,c):(fi(s),i=ga(i,s,c),i!==null?i.sibling:null);fi(s);break;case 19:var x=(i.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(cl(i,s,c,!1),f=(c&s.childLanes)!==0),x){if(f)return jN(i,s,c);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ue(qt,qt.current),f)break;return null;case 22:return s.lanes=0,mN(i,s,c,s.pendingProps);case 24:oi(s,Bt,i.memoizedState.cache)}return ga(i,s,c)}function NN(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ft=!0;else{if(!zh(i,c)&&(s.flags&128)===0)return Ft=!1,Bk(i,s,c);Ft=(i.flags&131072)!==0}else Ft=!1,Xe&&(s.flags&1048576)!==0&&ej(s,bo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(i=ns(s.elementType),s.type=i,typeof i=="function")kp(i)?(f=ls(i,f),s.tag=1,s=gN(null,s,i,f,c)):(s.tag=0,s=Nh(null,s,i,f,c));else{if(i!=null){var x=i.$$typeof;if(x===A){s.tag=11,s=uN(null,s,i,f,c);break e}else if(x===P){s.tag=14,s=dN(null,s,i,f,c);break e}}throw s=V(i)||i,Error(a(306,s,""))}}return s;case 0:return Nh(i,s,s.type,s.pendingProps,c);case 1:return f=s.type,x=ls(f,s.pendingProps),gN(i,s,f,x,c);case 3:e:{if(Ee(s,s.stateNode.containerInfo),i===null)throw Error(a(387));f=s.pendingProps;var N=s.memoizedState;x=N.element,Kp(i,s),Eo(s,f,null,c);var z=s.memoizedState;if(f=z.cache,oi(s,Bt,f),f!==N.cache&&Fp(s,[Bt],c,!0),Ao(),f=z.element,N.isDehydrated)if(N={element:f,isDehydrated:!1,cache:z.cache},s.updateQueue.baseState=N,s.memoizedState=N,s.flags&256){s=xN(i,s,f,c);break e}else if(f!==x){x=on(Error(a(424)),s),jo(x),s=xN(i,s,f,c);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,jt=mn(i.firstChild),ur=s,Xe=!0,si=null,dn=!0,c=mj(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ji(),f===x){s=ga(i,s,c);break e}fr(i,s,f,c)}s=s.child}return s;case 26:return Gu(i,s),i===null?(c=T_(s.type,null,s.pendingProps,null))?s.memoizedState=c:Xe||(c=s.type,i=s.pendingProps,f=ld(H.current).createElement(c),f[cr]=s,f[Dr]=i,mr(f,c,i),Jt(f),s.stateNode=f):s.memoizedState=T_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return W(s),i===null&&Xe&&(f=s.stateNode=O_(s.type,s.pendingProps,H.current),ur=s,dn=!0,x=jt,ji(s.type)?(ov=x,jt=mn(f.firstChild)):jt=x),fr(i,s,s.pendingProps.children,c),Gu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Xe&&((x=f=jt)&&(f=gP(f,s.type,s.pendingProps,dn),f!==null?(s.stateNode=f,ur=s,jt=mn(f.firstChild),dn=!1,x=!0):x=!1),x||li(s)),W(s),x=s.type,N=s.pendingProps,z=i!==null?i.memoizedProps:null,f=N.children,nv(x,N)?f=null:z!==null&&nv(x,z)&&(s.flags|=32),s.memoizedState!==null&&(x=rh(i,s,Mk,null,null,c),Yo._currentValue=x),Gu(i,s),fr(i,s,f,c),s.child;case 6:return i===null&&Xe&&((i=c=jt)&&(c=xP(c,s.pendingProps,dn),c!==null?(s.stateNode=c,ur=s,jt=null,i=!0):i=!1),i||li(s)),null;case 13:return yN(i,s,c);case 4:return Ee(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=is(s,null,f,c):fr(i,s,f,c),s.child;case 11:return uN(i,s,s.type,s.pendingProps,c);case 7:return fr(i,s,s.pendingProps,c),s.child;case 8:return fr(i,s,s.pendingProps.children,c),s.child;case 12:return fr(i,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,oi(s,s.type,f.value),fr(i,s,f.children,c),s.child;case 9:return x=s.type._context,f=s.pendingProps.children,ts(s),x=dr(x),f=f(x),s.flags|=1,fr(i,s,f,c),s.child;case 14:return dN(i,s,s.type,s.pendingProps,c);case 15:return fN(i,s,s.type,s.pendingProps,c);case 19:return jN(i,s,c);case 31:return $k(i,s,c);case 22:return mN(i,s,c,s.pendingProps);case 24:return ts(s),f=dr(Bt),i===null?(x=Qp(),x===null&&(x=vt,N=Gp(),x.pooledCache=N,N.refCount++,N!==null&&(x.pooledCacheLanes|=c),x=N),s.memoizedState={parent:f,cache:x},Yp(s),oi(s,Bt,x)):((i.lanes&c)!==0&&(Kp(i,s),Eo(s,null,null,c),Ao()),x=i.memoizedState,N=s.memoizedState,x.parent!==f?(x={parent:f,cache:f},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),oi(s,Bt,f)):(f=N.cache,oi(s,Bt,f),f!==x.cache&&Fp(s,[Bt],c,!0))),fr(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function xa(i){i.flags|=4}function Oh(i,s,c,f,x){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(KN())i.flags|=8192;else throw as=zu,Vp}else i.flags&=-16777217}function _N(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!I_(s))if(KN())i.flags|=8192;else throw as=zu,Vp}function Qu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Me():536870912,i.lanes|=s,jl|=s)}function ko(i,s){if(!Xe)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Nt(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(s)for(var x=i.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=f,i.childLanes=c,s}function Uk(i,s,c){var f=s.pendingProps;switch(Ip(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Nt(s),null;case 3:return c=s.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),pa(Bt),le(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ol(s)?xa(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$p())),Nt(s),null;case 26:var x=s.type,N=s.memoizedState;return i===null?(xa(s),N!==null?(Nt(s),_N(s,N)):(Nt(s),Oh(s,x,null,f,c))):N?N!==i.memoizedState?(xa(s),Nt(s),_N(s,N)):(Nt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==f&&xa(s),Nt(s),Oh(s,x,i,f,c)),null;case 27:if(F(s),c=H.current,x=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return Nt(s),null}i=he.current,ol(s)?rj(s):(i=O_(x,f,c),s.stateNode=i,xa(s))}return Nt(s),null;case 5:if(F(s),x=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return Nt(s),null}if(N=he.current,ol(s))rj(s);else{var z=ld(H.current);switch(N){case 1:N=z.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:N=z.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":N=z.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":N=z.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":N=z.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof f.is=="string"?z.createElement("select",{is:f.is}):z.createElement("select"),f.multiple?N.multiple=!0:f.size&&(N.size=f.size);break;default:N=typeof f.is=="string"?z.createElement(x,{is:f.is}):z.createElement(x)}}N[cr]=s,N[Dr]=f;e:for(z=s.child;z!==null;){if(z.tag===5||z.tag===6)N.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===s)break e;for(;z.sibling===null;){if(z.return===null||z.return===s)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}s.stateNode=N;e:switch(mr(N,x,f),x){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&xa(s)}}return Nt(s),Oh(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,c),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==f&&xa(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(a(166));if(i=H.current,ol(s)){if(i=s.stateNode,c=s.memoizedProps,f=null,x=ur,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}i[cr]=s,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||y_(i.nodeValue,c)),i||li(s,!0)}else i=ld(i).createTextNode(f),i[cr]=s,s.stateNode=i}return Nt(s),null;case 31:if(c=s.memoizedState,i===null||i.memoizedState!==null){if(f=ol(s),c!==null){if(i===null){if(!f)throw Error(a(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[cr]=s}else Ji(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),i=!1}else c=$p(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return s.flags&256?(Vr(s),s):(Vr(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Nt(s),null;case 13:if(f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=ol(s),f!==null&&f.dehydrated!==null){if(i===null){if(!x)throw Error(a(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(a(317));x[cr]=s}else Ji(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),x=!1}else x=$p(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return s.flags&256?(Vr(s),s):(Vr(s),null)}return Vr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=s.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool),N=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(N=f.memoizedState.cachePool.pool),N!==x&&(f.flags|=2048)),c!==i&&c&&(s.child.flags|=8192),Qu(s,s.updateQueue),Nt(s),null);case 4:return le(),i===null&&Zh(s.stateNode.containerInfo),Nt(s),null;case 10:return pa(s.type),Nt(s),null;case 19:if(te(qt),f=s.memoizedState,f===null)return Nt(s),null;if(x=(s.flags&128)!==0,N=f.rendering,N===null)if(x)ko(f,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(N=Tu(i),N!==null){for(s.flags|=128,ko(f,!1),i=N.updateQueue,s.updateQueue=i,Qu(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)W0(c,i),c=c.sibling;return ue(qt,qt.current&1|2),Xe&&fa(s,f.treeForkCount),s.child}i=i.sibling}f.tail!==null&&ke()>Wu&&(s.flags|=128,x=!0,ko(f,!1),s.lanes=4194304)}else{if(!x)if(i=Tu(N),i!==null){if(s.flags|=128,x=!0,i=i.updateQueue,s.updateQueue=i,Qu(s,i),ko(f,!0),f.tail===null&&f.tailMode==="hidden"&&!N.alternate&&!Xe)return Nt(s),null}else 2*ke()-f.renderingStartTime>Wu&&c!==536870912&&(s.flags|=128,x=!0,ko(f,!1),s.lanes=4194304);f.isBackwards?(N.sibling=s.child,s.child=N):(i=f.last,i!==null?i.sibling=N:s.child=N,f.last=N)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=ke(),i.sibling=null,c=qt.current,ue(qt,x?c&1|2:c&1),Xe&&fa(s,f.treeForkCount),i):(Nt(s),null);case 22:case 23:return Vr(s),Jp(),f=s.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),c=s.updateQueue,c!==null&&Qu(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),i!==null&&te(rs),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),pa(Bt),Nt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function Fk(i,s){switch(Ip(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return pa(Bt),le(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return F(s),null;case 31:if(s.memoizedState!==null){if(Vr(s),s.alternate===null)throw Error(a(340));Ji()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Vr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Ji()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return te(qt),null;case 4:return le(),null;case 10:return pa(s.type),null;case 22:case 23:return Vr(s),Jp(),i!==null&&te(rs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return pa(Bt),null;case 25:return null;default:return null}}function SN(i,s){switch(Ip(s),s.tag){case 3:pa(Bt),le();break;case 26:case 27:case 5:F(s);break;case 4:le();break;case 31:s.memoizedState!==null&&Vr(s);break;case 13:Vr(s);break;case 19:te(qt);break;case 10:pa(s.type);break;case 22:case 23:Vr(s),Jp(),i!==null&&te(rs);break;case 24:pa(Bt)}}function Po(i,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var x=f.next;c=x;do{if((c.tag&i)===i){f=void 0;var N=c.create,z=c.inst;f=N(),z.destroy=f}c=c.next}while(c!==x)}}catch(D){it(s,s.return,D)}}function pi(i,s,c){try{var f=s.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var N=x.next;f=N;do{if((f.tag&i)===i){var z=f.inst,D=z.destroy;if(D!==void 0){z.destroy=void 0,x=s;var $=c,ne=D;try{ne()}catch(me){it(x,$,me)}}}f=f.next}while(f!==N)}}catch(me){it(s,s.return,me)}}function wN(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{hj(s,c)}catch(f){it(i,i.return,f)}}}function CN(i,s,c){c.props=ls(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){it(i,s,f)}}function qo(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(x){it(i,s,x)}}function Vn(i,s){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(x){it(i,s,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){it(i,s,x)}else c.current=null}function AN(i){var s=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(x){it(i,i.return,x)}}function Dh(i,s,c){try{var f=i.stateNode;dP(f,i.type,c,s),f[Dr]=s}catch(x){it(i,i.return,x)}}function EN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ji(i.type)||i.tag===4}function Mh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||EN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ji(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Th(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=ca));else if(f!==4&&(f===27&&ji(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for(Th(i,s,c),i=i.sibling;i!==null;)Th(i,s,c),i=i.sibling}function Vu(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(f!==4&&(f===27&&ji(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Vu(i,s,c),i=i.sibling;i!==null;)Vu(i,s,c),i=i.sibling}function zN(i){var s=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,x=s.attributes;x.length;)s.removeAttributeNode(x[0]);mr(s,f,c),s[cr]=i,s[Dr]=c}catch(N){it(i,i.return,N)}}var ya=!1,Gt=!1,kh=!1,ON=typeof WeakSet=="function"?WeakSet:Set,er=null;function Gk(i,s){if(i=i.containerInfo,tv=pd,i=U0(i),Ap(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var x=f.anchorOffset,N=f.focusNode;f=f.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var z=0,D=-1,$=-1,ne=0,me=0,ge=i,ae=null;t:for(;;){for(var ce;ge!==c||x!==0&&ge.nodeType!==3||(D=z+x),ge!==N||f!==0&&ge.nodeType!==3||($=z+f),ge.nodeType===3&&(z+=ge.nodeValue.length),(ce=ge.firstChild)!==null;)ae=ge,ge=ce;for(;;){if(ge===i)break t;if(ae===c&&++ne===x&&(D=z),ae===N&&++me===f&&($=z),(ce=ge.nextSibling)!==null)break;ge=ae,ae=ge.parentNode}ge=ce}c=D===-1||$===-1?null:{start:D,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(rv={focusedElem:i,selectionRange:c},pd=!1,er=s;er!==null;)if(s=er,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,er=i;else for(;er!==null;){switch(s=er,N=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)x=i[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&N!==null){i=void 0,c=s,x=N.memoizedProps,N=N.memoizedState,f=c.stateNode;try{var _e=ls(c.type,x);i=f.getSnapshotBeforeUpdate(_e,N),f.__reactInternalSnapshotBeforeUpdate=i}catch(Pe){it(c,c.return,Pe)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)iv(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":iv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=s.sibling,i!==null){i.return=s.return,er=i;break}er=s.return}}function DN(i,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ja(i,c),f&4&&Po(5,c);break;case 1:if(ja(i,c),f&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(z){it(c,c.return,z)}else{var x=ls(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(x,s,i.__reactInternalSnapshotBeforeUpdate)}catch(z){it(c,c.return,z)}}f&64&&wN(c),f&512&&qo(c,c.return);break;case 3:if(ja(i,c),f&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{hj(i,s)}catch(z){it(c,c.return,z)}}break;case 27:s===null&&f&4&&zN(c);case 26:case 5:ja(i,c),s===null&&f&4&&AN(c),f&512&&qo(c,c.return);break;case 12:ja(i,c);break;case 31:ja(i,c),f&4&&kN(i,c);break;case 13:ja(i,c),f&4&&PN(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=Jk.bind(null,c),yP(i,c))));break;case 22:if(f=c.memoizedState!==null||ya,!f){s=s!==null&&s.memoizedState!==null||Gt,x=ya;var N=Gt;ya=f,(Gt=s)&&!N?Na(i,c,(c.subtreeFlags&8772)!==0):ja(i,c),ya=x,Gt=N}break;case 30:break;default:ja(i,c)}}function MN(i){var s=i.alternate;s!==null&&(i.alternate=null,MN(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&up(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wt=null,Tr=!1;function ba(i,s,c){for(c=c.child;c!==null;)TN(i,s,c),c=c.sibling}function TN(i,s,c){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(xr,c)}catch{}switch(c.tag){case 26:Gt||Vn(c,s),ba(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Gt||Vn(c,s);var f=wt,x=Tr;ji(c.type)&&(wt=c.stateNode,Tr=!1),ba(i,s,c),Ho(c.stateNode),wt=f,Tr=x;break;case 5:Gt||Vn(c,s);case 6:if(f=wt,x=Tr,wt=null,ba(i,s,c),wt=f,Tr=x,wt!==null)if(Tr)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(c.stateNode)}catch(N){it(c,s,N)}else try{wt.removeChild(c.stateNode)}catch(N){it(c,s,N)}break;case 18:wt!==null&&(Tr?(i=wt,w_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),zl(i)):w_(wt,c.stateNode));break;case 4:f=wt,x=Tr,wt=c.stateNode.containerInfo,Tr=!0,ba(i,s,c),wt=f,Tr=x;break;case 0:case 11:case 14:case 15:pi(2,c,s),Gt||pi(4,c,s),ba(i,s,c);break;case 1:Gt||(Vn(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&CN(c,s,f)),ba(i,s,c);break;case 21:ba(i,s,c);break;case 22:Gt=(f=Gt)||c.memoizedState!==null,ba(i,s,c),Gt=f;break;default:ba(i,s,c)}}function kN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{zl(i)}catch(c){it(s,s.return,c)}}}function PN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{zl(i)}catch(c){it(s,s.return,c)}}function Hk(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new ON),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new ON),s;default:throw Error(a(435,i.tag))}}function Yu(i,s){var c=Hk(i);s.forEach(function(f){if(!c.has(f)){c.add(f);var x=eP.bind(null,i,f);f.then(x,x)}})}function kr(i,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var x=c[f],N=i,z=s,D=z;e:for(;D!==null;){switch(D.tag){case 27:if(ji(D.type)){wt=D.stateNode,Tr=!1;break e}break;case 5:wt=D.stateNode,Tr=!1;break e;case 3:case 4:wt=D.stateNode.containerInfo,Tr=!0;break e}D=D.return}if(wt===null)throw Error(a(160));TN(N,z,x),wt=null,Tr=!1,N=x.alternate,N!==null&&(N.return=null),x.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)qN(s,i),s=s.sibling}var Dn=null;function qN(i,s){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:kr(s,i),Pr(i),f&4&&(pi(3,i,i.return),Po(3,i),pi(5,i,i.return));break;case 1:kr(s,i),Pr(i),f&512&&(Gt||c===null||Vn(c,c.return)),f&64&&ya&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var x=Dn;if(kr(s,i),Pr(i),f&512&&(Gt||c===null||Vn(c,c.return)),f&4){var N=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":N=x.getElementsByTagName("title")[0],(!N||N[oo]||N[cr]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=x.createElement(f),x.head.insertBefore(N,x.querySelector("head > title"))),mr(N,f,c),N[cr]=i,Jt(N),f=N;break e;case"link":var z=q_("link","href",x).get(f+(c.href||""));if(z){for(var D=0;D<z.length;D++)if(N=z[D],N.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&N.getAttribute("rel")===(c.rel==null?null:c.rel)&&N.getAttribute("title")===(c.title==null?null:c.title)&&N.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){z.splice(D,1);break t}}N=x.createElement(f),mr(N,f,c),x.head.appendChild(N);break;case"meta":if(z=q_("meta","content",x).get(f+(c.content||""))){for(D=0;D<z.length;D++)if(N=z[D],N.getAttribute("content")===(c.content==null?null:""+c.content)&&N.getAttribute("name")===(c.name==null?null:c.name)&&N.getAttribute("property")===(c.property==null?null:c.property)&&N.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&N.getAttribute("charset")===(c.charSet==null?null:c.charSet)){z.splice(D,1);break t}}N=x.createElement(f),mr(N,f,c),x.head.appendChild(N);break;default:throw Error(a(468,f))}N[cr]=i,Jt(N),f=N}i.stateNode=f}else R_(x,i.type,i.stateNode);else i.stateNode=P_(x,f,i.memoizedProps);else N!==f?(N===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):N.count--,f===null?R_(x,i.type,i.stateNode):P_(x,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Dh(i,i.memoizedProps,c.memoizedProps)}break;case 27:kr(s,i),Pr(i),f&512&&(Gt||c===null||Vn(c,c.return)),c!==null&&f&4&&Dh(i,i.memoizedProps,c.memoizedProps);break;case 5:if(kr(s,i),Pr(i),f&512&&(Gt||c===null||Vn(c,c.return)),i.flags&32){x=i.stateNode;try{Zs(x,"")}catch(_e){it(i,i.return,_e)}}f&4&&i.stateNode!=null&&(x=i.memoizedProps,Dh(i,x,c!==null?c.memoizedProps:x)),f&1024&&(kh=!0);break;case 6:if(kr(s,i),Pr(i),f&4){if(i.stateNode===null)throw Error(a(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(_e){it(i,i.return,_e)}}break;case 3:if(ud=null,x=Dn,Dn=od(s.containerInfo),kr(s,i),Dn=x,Pr(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{zl(s.containerInfo)}catch(_e){it(i,i.return,_e)}kh&&(kh=!1,RN(i));break;case 4:f=Dn,Dn=od(i.stateNode.containerInfo),kr(s,i),Pr(i),Dn=f;break;case 12:kr(s,i),Pr(i);break;case 31:kr(s,i),Pr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Yu(i,f)));break;case 13:kr(s,i),Pr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Xu=ke()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Yu(i,f)));break;case 22:x=i.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,ne=ya,me=Gt;if(ya=ne||x,Gt=me||$,kr(s,i),Gt=me,ya=ne,Pr(i),f&8192)e:for(s=i.stateNode,s._visibility=x?s._visibility&-2:s._visibility|1,x&&(c===null||$||ya||Gt||os(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){$=c=s;try{if(N=$.stateNode,x)z=N.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{D=$.stateNode;var ge=$.memoizedProps.style,ae=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;D.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(_e){it($,$.return,_e)}}}else if(s.tag===6){if(c===null){$=s;try{$.stateNode.nodeValue=x?"":$.memoizedProps}catch(_e){it($,$.return,_e)}}}else if(s.tag===18){if(c===null){$=s;try{var ce=$.stateNode;x?C_(ce,!0):C_($.stateNode,!1)}catch(_e){it($,$.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Yu(i,c))));break;case 19:kr(s,i),Pr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Yu(i,f)));break;case 30:break;case 21:break;default:kr(s,i),Pr(i)}}function Pr(i){var s=i.flags;if(s&2){try{for(var c,f=i.return;f!==null;){if(EN(f)){c=f;break}f=f.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var x=c.stateNode,N=Mh(i);Vu(i,N,x);break;case 5:var z=c.stateNode;c.flags&32&&(Zs(z,""),c.flags&=-33);var D=Mh(i);Vu(i,D,z);break;case 3:case 4:var $=c.stateNode.containerInfo,ne=Mh(i);Th(i,ne,$);break;default:throw Error(a(161))}}catch(me){it(i,i.return,me)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function RN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;RN(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ja(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)DN(i,s.alternate,s),s=s.sibling}function os(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:pi(4,s,s.return),os(s);break;case 1:Vn(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&CN(s,s.return,c),os(s);break;case 27:Ho(s.stateNode);case 26:case 5:Vn(s,s.return),os(s);break;case 22:s.memoizedState===null&&os(s);break;case 30:os(s);break;default:os(s)}i=i.sibling}}function Na(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,x=i,N=s,z=N.flags;switch(N.tag){case 0:case 11:case 15:Na(x,N,c),Po(4,N);break;case 1:if(Na(x,N,c),f=N,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ne){it(f,f.return,ne)}if(f=N,x=f.updateQueue,x!==null){var D=f.stateNode;try{var $=x.shared.hiddenCallbacks;if($!==null)for(x.shared.hiddenCallbacks=null,x=0;x<$.length;x++)pj($[x],D)}catch(ne){it(f,f.return,ne)}}c&&z&64&&wN(N),qo(N,N.return);break;case 27:zN(N);case 26:case 5:Na(x,N,c),c&&f===null&&z&4&&AN(N),qo(N,N.return);break;case 12:Na(x,N,c);break;case 31:Na(x,N,c),c&&z&4&&kN(x,N);break;case 13:Na(x,N,c),c&&z&4&&PN(x,N);break;case 22:N.memoizedState===null&&Na(x,N,c),qo(N,N.return);break;case 30:break;default:Na(x,N,c)}s=s.sibling}}function Ph(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&No(c))}function qh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&No(i))}function Mn(i,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)IN(i,s,c,f),s=s.sibling}function IN(i,s,c,f){var x=s.flags;switch(s.tag){case 0:case 11:case 15:Mn(i,s,c,f),x&2048&&Po(9,s);break;case 1:Mn(i,s,c,f);break;case 3:Mn(i,s,c,f),x&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&No(i)));break;case 12:if(x&2048){Mn(i,s,c,f),i=s.stateNode;try{var N=s.memoizedProps,z=N.id,D=N.onPostCommit;typeof D=="function"&&D(z,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){it(s,s.return,$)}}else Mn(i,s,c,f);break;case 31:Mn(i,s,c,f);break;case 13:Mn(i,s,c,f);break;case 23:break;case 22:N=s.stateNode,z=s.alternate,s.memoizedState!==null?N._visibility&2?Mn(i,s,c,f):Ro(i,s):N._visibility&2?Mn(i,s,c,f):(N._visibility|=2,xl(i,s,c,f,(s.subtreeFlags&10256)!==0||!1)),x&2048&&Ph(z,s);break;case 24:Mn(i,s,c,f),x&2048&&qh(s.alternate,s);break;default:Mn(i,s,c,f)}}function xl(i,s,c,f,x){for(x=x&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var N=i,z=s,D=c,$=f,ne=z.flags;switch(z.tag){case 0:case 11:case 15:xl(N,z,D,$,x),Po(8,z);break;case 23:break;case 22:var me=z.stateNode;z.memoizedState!==null?me._visibility&2?xl(N,z,D,$,x):Ro(N,z):(me._visibility|=2,xl(N,z,D,$,x)),x&&ne&2048&&Ph(z.alternate,z);break;case 24:xl(N,z,D,$,x),x&&ne&2048&&qh(z.alternate,z);break;default:xl(N,z,D,$,x)}s=s.sibling}}function Ro(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,f=s,x=f.flags;switch(f.tag){case 22:Ro(c,f),x&2048&&Ph(f.alternate,f);break;case 24:Ro(c,f),x&2048&&qh(f.alternate,f);break;default:Ro(c,f)}s=s.sibling}}var Io=8192;function yl(i,s,c){if(i.subtreeFlags&Io)for(i=i.child;i!==null;)LN(i,s,c),i=i.sibling}function LN(i,s,c){switch(i.tag){case 26:yl(i,s,c),i.flags&Io&&i.memoizedState!==null&&DP(c,Dn,i.memoizedState,i.memoizedProps);break;case 5:yl(i,s,c);break;case 3:case 4:var f=Dn;Dn=od(i.stateNode.containerInfo),yl(i,s,c),Dn=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Io,Io=16777216,yl(i,s,c),Io=f):yl(i,s,c));break;default:yl(i,s,c)}}function $N(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Lo(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];er=f,UN(f,i)}$N(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)BN(i),i=i.sibling}function BN(i){switch(i.tag){case 0:case 11:case 15:Lo(i),i.flags&2048&&pi(9,i,i.return);break;case 3:Lo(i);break;case 12:Lo(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Ku(i)):Lo(i);break;default:Lo(i)}}function Ku(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];er=f,UN(f,i)}$N(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:pi(8,s,s.return),Ku(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Ku(s));break;default:Ku(s)}i=i.sibling}}function UN(i,s){for(;er!==null;){var c=er;switch(c.tag){case 0:case 11:case 15:pi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:No(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,er=f;else e:for(c=i;er!==null;){f=er;var x=f.sibling,N=f.return;if(MN(f),f===c){er=null;break e}if(x!==null){x.return=N,er=x;break e}er=N}}}var Qk={getCacheForType:function(i){var s=dr(Bt),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c},cacheSignal:function(){return dr(Bt).controller.signal}},Vk=typeof WeakMap=="function"?WeakMap:Map,nt=0,vt=null,He=null,Ye=0,at=0,Yr=null,hi=!1,bl=!1,Rh=!1,_a=0,Dt=0,vi=0,cs=0,Ih=0,Kr=0,jl=0,$o=null,qr=null,Lh=!1,Xu=0,FN=0,Wu=1/0,Zu=null,gi=null,Kt=0,xi=null,Nl=null,Sa=0,$h=0,Bh=null,GN=null,Bo=0,Uh=null;function Xr(){return(nt&2)!==0&&Ye!==0?Ye&-Ye:k.T!==null?Yh():s0()}function HN(){if(Kr===0)if((Ye&536870912)===0||Xe){var i=Gs;Gs<<=1,(Gs&3932160)===0&&(Gs=262144),Kr=i}else Kr=536870912;return i=Qr.current,i!==null&&(i.flags|=32),Kr}function Rr(i,s,c){(i===vt&&(at===2||at===9)||i.cancelPendingCommit!==null)&&(_l(i,0),yi(i,Ye,Kr,!1)),yr(i,c),((nt&2)===0||i!==vt)&&(i===vt&&((nt&2)===0&&(cs|=c),Dt===4&&yi(i,Ye,Kr,!1)),Yn(i))}function QN(i,s,c){if((nt&6)!==0)throw Error(a(327));var f=!c&&(s&127)===0&&(s&i.expiredLanes)===0||Hi(i,s),x=f?Xk(i,s):Gh(i,s,!0),N=f;do{if(x===0){bl&&!f&&yi(i,s,0,!1);break}else{if(c=i.current.alternate,N&&!Yk(c)){x=Gh(i,s,!1),N=!1;continue}if(x===2){if(N=s,i.errorRecoveryDisabledLanes&N)var z=0;else z=i.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){s=z;e:{var D=i;x=$o;var $=D.current.memoizedState.isDehydrated;if($&&(_l(D,z).flags|=256),z=Gh(D,z,!1),z!==2){if(Rh&&!$){D.errorRecoveryDisabledLanes|=N,cs|=N,x=4;break e}N=qr,qr=x,N!==null&&(qr===null?qr=N:qr.push.apply(qr,N))}x=z}if(N=!1,x!==2)continue}}if(x===1){_l(i,0),yi(i,s,0,!0);break}e:{switch(f=i,N=x,N){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:yi(f,s,Kr,!hi);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(x=Xu+300-ke(),10<x)){if(yi(f,s,Kr,!hi),Gn(f,0,!0)!==0)break e;Sa=s,f.timeoutHandle=__(VN.bind(null,f,c,qr,Zu,Lh,s,Kr,cs,jl,hi,N,"Throttled",-0,0),x);break e}VN(f,c,qr,Zu,Lh,s,Kr,cs,jl,hi,N,null,-0,0)}}break}while(!0);Yn(i)}function VN(i,s,c,f,x,N,z,D,$,ne,me,ge,ae,ce){if(i.timeoutHandle=-1,ge=s.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},LN(s,N,ge);var _e=(N&62914560)===N?Xu-ke():(N&4194048)===N?FN-ke():0;if(_e=MP(ge,_e),_e!==null){Sa=N,i.cancelPendingCommit=_e(t_.bind(null,i,s,N,c,f,x,z,D,$,me,ge,null,ae,ce)),yi(i,N,z,!ne);return}}t_(i,s,N,c,f,x,z,D,$)}function Yk(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var x=c[f],N=x.getSnapshot;x=x.value;try{if(!Gr(N(),x))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(i,s,c,f){s&=~Ih,s&=~cs,i.suspendedLanes|=s,i.pingedLanes&=~s,f&&(i.warmLanes|=s),f=i.expirationTimes;for(var x=s;0<x;){var N=31-_r(x),z=1<<N;f[N]=-1,x&=~z}c!==0&&Qi(i,c,s)}function Ju(){return(nt&6)===0?(Uo(0),!1):!0}function Fh(){if(He!==null){if(at===0)var i=He.return;else i=He,ma=es=null,ih(i),ml=null,So=0,i=He;for(;i!==null;)SN(i.alternate,i),i=i.return;He=null}}function _l(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,pP(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Sa=0,Fh(),vt=i,He=c=da(i.current,null),Ye=s,at=0,Yr=null,hi=!1,bl=Hi(i,s),Rh=!1,jl=Kr=Ih=cs=vi=Dt=0,qr=$o=null,Lh=!1,(s&8)!==0&&(s|=s&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=s;0<f;){var x=31-_r(f),N=1<<x;s|=i[x],f&=~N}return _a=s,bu(),c}function YN(i,s){Ue=null,k.H=Mo,s===fl||s===Eu?(s=uj(),at=3):s===Vp?(s=uj(),at=4):at=s===jh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yr=s,He===null&&(Dt=1,Uu(i,on(s,i.current)))}function KN(){var i=Qr.current;return i===null?!0:(Ye&4194048)===Ye?fn===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?i===fn:!1}function XN(){var i=k.H;return k.H=Mo,i===null?Mo:i}function WN(){var i=k.A;return k.A=Qk,i}function ed(){Dt=4,hi||(Ye&4194048)!==Ye&&Qr.current!==null||(bl=!0),(vi&134217727)===0&&(cs&134217727)===0||vt===null||yi(vt,Ye,Kr,!1)}function Gh(i,s,c){var f=nt;nt|=2;var x=XN(),N=WN();(vt!==i||Ye!==s)&&(Zu=null,_l(i,s)),s=!1;var z=Dt;e:do try{if(at!==0&&He!==null){var D=He,$=Yr;switch(at){case 8:Fh(),z=6;break e;case 3:case 2:case 9:case 6:Qr.current===null&&(s=!0);var ne=at;if(at=0,Yr=null,Sl(i,D,$,ne),c&&bl){z=0;break e}break;default:ne=at,at=0,Yr=null,Sl(i,D,$,ne)}}Kk(),z=Dt;break}catch(me){YN(i,me)}while(!0);return s&&i.shellSuspendCounter++,ma=es=null,nt=f,k.H=x,k.A=N,He===null&&(vt=null,Ye=0,bu()),z}function Kk(){for(;He!==null;)ZN(He)}function Xk(i,s){var c=nt;nt|=2;var f=XN(),x=WN();vt!==i||Ye!==s?(Zu=null,Wu=ke()+500,_l(i,s)):bl=Hi(i,s);e:do try{if(at!==0&&He!==null){s=He;var N=Yr;t:switch(at){case 1:at=0,Yr=null,Sl(i,s,N,1);break;case 2:case 9:if(oj(N)){at=0,Yr=null,JN(s);break}s=function(){at!==2&&at!==9||vt!==i||(at=7),Yn(i)},N.then(s,s);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:oj(N)?(at=0,Yr=null,JN(s)):(at=0,Yr=null,Sl(i,s,N,7));break;case 5:var z=null;switch(He.tag){case 26:z=He.memoizedState;case 5:case 27:var D=He;if(z?I_(z):D.stateNode.complete){at=0,Yr=null;var $=D.sibling;if($!==null)He=$;else{var ne=D.return;ne!==null?(He=ne,td(ne)):He=null}break t}}at=0,Yr=null,Sl(i,s,N,5);break;case 6:at=0,Yr=null,Sl(i,s,N,6);break;case 8:Fh(),Dt=6;break e;default:throw Error(a(462))}}Wk();break}catch(me){YN(i,me)}while(!0);return ma=es=null,k.H=f,k.A=x,nt=c,He!==null?0:(vt=null,Ye=0,bu(),Dt)}function Wk(){for(;He!==null&&!de();)ZN(He)}function ZN(i){var s=NN(i.alternate,i,_a);i.memoizedProps=i.pendingProps,s===null?td(i):He=s}function JN(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=vN(c,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=vN(c,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:ih(s);default:SN(c,s),s=He=W0(s,_a),s=NN(c,s,_a)}i.memoizedProps=i.pendingProps,s===null?td(i):He=s}function Sl(i,s,c,f){ma=es=null,ih(s),ml=null,So=0;var x=s.return;try{if(Lk(i,x,s,c,Ye)){Dt=1,Uu(i,on(c,i.current)),He=null;return}}catch(N){if(x!==null)throw He=x,N;Dt=1,Uu(i,on(c,i.current)),He=null;return}s.flags&32768?(Xe||f===1?i=!0:bl||(Ye&536870912)!==0?i=!1:(hi=i=!0,(f===2||f===9||f===3||f===6)&&(f=Qr.current,f!==null&&f.tag===13&&(f.flags|=16384))),e_(s,i)):td(s)}function td(i){var s=i;do{if((s.flags&32768)!==0){e_(s,hi);return}i=s.return;var c=Uk(s.alternate,s,_a);if(c!==null){He=c;return}if(s=s.sibling,s!==null){He=s;return}He=s=i}while(s!==null);Dt===0&&(Dt=5)}function e_(i,s){do{var c=Fk(i.alternate,i);if(c!==null){c.flags&=32767,He=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){He=i;return}He=i=c}while(i!==null);Dt=6,He=null}function t_(i,s,c,f,x,N,z,D,$){i.cancelPendingCommit=null;do rd();while(Kt!==0);if((nt&6)!==0)throw Error(a(327));if(s!==null){if(s===i.current)throw Error(a(177));if(N=s.lanes|s.childLanes,N|=Mp,lo(i,c,N,z,D,$),i===vt&&(He=vt=null,Ye=0),Nl=s,xi=i,Sa=c,$h=N,Bh=x,GN=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,tP(Un,function(){return s_(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=k.T,k.T=null,x=J.p,J.p=2,z=nt,nt|=4;try{Gk(i,s,c)}finally{nt=z,J.p=x,k.T=f}}Kt=1,r_(),n_(),a_()}}function r_(){if(Kt===1){Kt=0;var i=xi,s=Nl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=k.T,k.T=null;var f=J.p;J.p=2;var x=nt;nt|=4;try{qN(s,i);var N=rv,z=U0(i.containerInfo),D=N.focusedElem,$=N.selectionRange;if(z!==D&&D&&D.ownerDocument&&B0(D.ownerDocument.documentElement,D)){if($!==null&&Ap(D)){var ne=$.start,me=$.end;if(me===void 0&&(me=ne),"selectionStart"in D)D.selectionStart=ne,D.selectionEnd=Math.min(me,D.value.length);else{var ge=D.ownerDocument||document,ae=ge&&ge.defaultView||window;if(ae.getSelection){var ce=ae.getSelection(),_e=D.textContent.length,Pe=Math.min($.start,_e),dt=$.end===void 0?Pe:Math.min($.end,_e);!ce.extend&&Pe>dt&&(z=dt,dt=Pe,Pe=z);var Z=$0(D,Pe),Y=$0(D,dt);if(Z&&Y&&(ce.rangeCount!==1||ce.anchorNode!==Z.node||ce.anchorOffset!==Z.offset||ce.focusNode!==Y.node||ce.focusOffset!==Y.offset)){var re=ge.createRange();re.setStart(Z.node,Z.offset),ce.removeAllRanges(),Pe>dt?(ce.addRange(re),ce.extend(Y.node,Y.offset)):(re.setEnd(Y.node,Y.offset),ce.addRange(re))}}}}for(ge=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&ge.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ge.length;D++){var ve=ge[D];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}pd=!!tv,rv=tv=null}finally{nt=x,J.p=f,k.T=c}}i.current=s,Kt=2}}function n_(){if(Kt===2){Kt=0;var i=xi,s=Nl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=k.T,k.T=null;var f=J.p;J.p=2;var x=nt;nt|=4;try{DN(i,s.alternate,s)}finally{nt=x,J.p=f,k.T=c}}Kt=3}}function a_(){if(Kt===4||Kt===3){Kt=0,Ae();var i=xi,s=Nl,c=Sa,f=GN;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Kt=5:(Kt=0,Nl=xi=null,i_(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(gi=null),op(c),s=s.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(xr,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=k.T,x=J.p,J.p=2,k.T=null;try{for(var N=i.onRecoverableError,z=0;z<f.length;z++){var D=f[z];N(D.value,{componentStack:D.stack})}}finally{k.T=s,J.p=x}}(Sa&3)!==0&&rd(),Yn(i),x=i.pendingLanes,(c&261930)!==0&&(x&42)!==0?i===Uh?Bo++:(Bo=0,Uh=i):Bo=0,Uo(0)}}function i_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,No(s)))}function rd(){return r_(),n_(),a_(),s_()}function s_(){if(Kt!==5)return!1;var i=xi,s=$h;$h=0;var c=op(Sa),f=k.T,x=J.p;try{J.p=32>c?32:c,k.T=null,c=Bh,Bh=null;var N=xi,z=Sa;if(Kt=0,Nl=xi=null,Sa=0,(nt&6)!==0)throw Error(a(331));var D=nt;if(nt|=4,BN(N.current),IN(N,N.current,z,c),nt=D,Uo(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(xr,N)}catch{}return!0}finally{J.p=x,k.T=f,i_(i,s)}}function l_(i,s,c){s=on(c,s),s=bh(i.stateNode,s,2),i=di(i,s,2),i!==null&&(yr(i,2),Yn(i))}function it(i,s,c){if(i.tag===3)l_(i,i,c);else for(;s!==null;){if(s.tag===3){l_(s,i,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(gi===null||!gi.has(f))){i=on(c,i),c=oN(2),f=di(s,c,2),f!==null&&(cN(c,f,s,i),yr(f,2),Yn(f));break}}s=s.return}}function Hh(i,s,c){var f=i.pingCache;if(f===null){f=i.pingCache=new Vk;var x=new Set;f.set(s,x)}else x=f.get(s),x===void 0&&(x=new Set,f.set(s,x));x.has(c)||(Rh=!0,x.add(c),i=Zk.bind(null,i,s,c),s.then(i,i))}function Zk(i,s,c){var f=i.pingCache;f!==null&&f.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,vt===i&&(Ye&c)===c&&(Dt===4||Dt===3&&(Ye&62914560)===Ye&&300>ke()-Xu?(nt&2)===0&&_l(i,0):Ih|=c,jl===Ye&&(jl=0)),Yn(i)}function o_(i,s){s===0&&(s=Me()),i=Wi(i,s),i!==null&&(yr(i,s),Yn(i))}function Jk(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),o_(i,c)}function eP(i,s){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,x=i.memoizedState;x!==null&&(c=x.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(s),o_(i,c)}function tP(i,s){return rn(i,s)}var nd=null,wl=null,Qh=!1,ad=!1,Vh=!1,bi=0;function Yn(i){i!==wl&&i.next===null&&(wl===null?nd=wl=i:wl=wl.next=i),ad=!0,Qh||(Qh=!0,nP())}function Uo(i,s){if(!Vh&&ad){Vh=!0;do for(var c=!1,f=nd;f!==null;){if(i!==0){var x=f.pendingLanes;if(x===0)var N=0;else{var z=f.suspendedLanes,D=f.pingedLanes;N=(1<<31-_r(42|i)+1)-1,N&=x&~(z&~D),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(c=!0,f_(f,N))}else N=Ye,N=Gn(f,f===vt?N:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(N&3)===0||Hi(f,N)||(c=!0,f_(f,N));f=f.next}while(c);Vh=!1}}function rP(){c_()}function c_(){ad=Qh=!1;var i=0;bi!==0&&mP()&&(i=bi);for(var s=ke(),c=null,f=nd;f!==null;){var x=f.next,N=u_(f,s);N===0?(f.next=null,c===null?nd=x:c.next=x,x===null&&(wl=c)):(c=f,(i!==0||(N&3)!==0)&&(ad=!0)),f=x}Kt!==0&&Kt!==5||Uo(i),bi!==0&&(bi=0)}function u_(i,s){for(var c=i.suspendedLanes,f=i.pingedLanes,x=i.expirationTimes,N=i.pendingLanes&-62914561;0<N;){var z=31-_r(N),D=1<<z,$=x[z];$===-1?((D&c)===0||(D&f)!==0)&&(x[z]=ee(D,s)):$<=s&&(i.expiredLanes|=D),N&=~D}if(s=vt,c=Ye,c=Gn(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===s&&(at===2||at===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&sa(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Hi(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(f!==null&&sa(f),op(c)){case 2:case 8:c=gr;break;case 32:c=Un;break;case 268435456:c=nn;break;default:c=Un}return f=d_.bind(null,i),c=rn(c,f),i.callbackPriority=s,i.callbackNode=c,s}return f!==null&&f!==null&&sa(f),i.callbackPriority=2,i.callbackNode=null,2}function d_(i,s){if(Kt!==0&&Kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(rd()&&i.callbackNode!==c)return null;var f=Ye;return f=Gn(i,i===vt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(QN(i,f,s),u_(i,ke()),i.callbackNode!=null&&i.callbackNode===c?d_.bind(null,i):null)}function f_(i,s){if(rd())return null;QN(i,s,!0)}function nP(){hP(function(){(nt&6)!==0?rn(St,rP):c_()})}function Yh(){if(bi===0){var i=ul;i===0&&(i=Fs,Fs<<=1,(Fs&261888)===0&&(Fs=256)),bi=i}return bi}function m_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:fu(""+i)}function p_(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function aP(i,s,c,f,x){if(s==="submit"&&c&&c.stateNode===x){var N=m_((x[Dr]||null).action),z=f.submitter;z&&(s=(s=z[Dr]||null)?m_(s.formAction):z.getAttribute("formAction"),s!==null&&(N=s,z=null));var D=new vu("action","action",null,f,x);i.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(bi!==0){var $=z?p_(x,z):new FormData(x);ph(c,{pending:!0,data:$,method:x.method,action:N},null,$)}}else typeof N=="function"&&(D.preventDefault(),$=z?p_(x,z):new FormData(x),ph(c,{pending:!0,data:$,method:x.method,action:N},N,$))},currentTarget:x}]})}}for(var Kh=0;Kh<Dp.length;Kh++){var Xh=Dp[Kh],iP=Xh.toLowerCase(),sP=Xh[0].toUpperCase()+Xh.slice(1);On(iP,"on"+sP)}On(H0,"onAnimationEnd"),On(Q0,"onAnimationIteration"),On(V0,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(Nk,"onTransitionRun"),On(_k,"onTransitionStart"),On(Sk,"onTransitionCancel"),On(Y0,"onTransitionEnd"),Xs("onMouseEnter",["mouseout","mouseover"]),Xs("onMouseLeave",["mouseout","mouseover"]),Xs("onPointerEnter",["pointerout","pointerover"]),Xs("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fo));function h_(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],x=f.event;f=f.listeners;e:{var N=void 0;if(s)for(var z=f.length-1;0<=z;z--){var D=f[z],$=D.instance,ne=D.currentTarget;if(D=D.listener,$!==N&&x.isPropagationStopped())break e;N=D,x.currentTarget=ne;try{N(x)}catch(me){yu(me)}x.currentTarget=null,N=$}else for(z=0;z<f.length;z++){if(D=f[z],$=D.instance,ne=D.currentTarget,D=D.listener,$!==N&&x.isPropagationStopped())break e;N=D,x.currentTarget=ne;try{N(x)}catch(me){yu(me)}x.currentTarget=null,N=$}}}}function Qe(i,s){var c=s[cp];c===void 0&&(c=s[cp]=new Set);var f=i+"__bubble";c.has(f)||(v_(s,i,2,!1),c.add(f))}function Wh(i,s,c){var f=0;s&&(f|=4),v_(c,i,f,s)}var id="_reactListening"+Math.random().toString(36).slice(2);function Zh(i){if(!i[id]){i[id]=!0,c0.forEach(function(c){c!=="selectionchange"&&(lP.has(c)||Wh(c,!1,i),Wh(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[id]||(s[id]=!0,Wh("selectionchange",!1,s))}}function v_(i,s,c,f){switch(H_(s)){case 2:var x=PP;break;case 8:x=qP;break;default:x=mv}c=x.bind(null,s,c,i),x=void 0,!xp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),f?x!==void 0?i.addEventListener(s,c,{capture:!0,passive:x}):i.addEventListener(s,c,!0):x!==void 0?i.addEventListener(s,c,{passive:x}):i.addEventListener(s,c,!1)}function Jh(i,s,c,f,x){var N=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var z=f.tag;if(z===3||z===4){var D=f.stateNode.containerInfo;if(D===x)break;if(z===4)for(z=f.return;z!==null;){var $=z.tag;if(($===3||$===4)&&z.stateNode.containerInfo===x)return;z=z.return}for(;D!==null;){if(z=Vs(D),z===null)return;if($=z.tag,$===5||$===6||$===26||$===27){f=N=z;continue e}D=D.parentNode}}f=f.return}j0(function(){var ne=N,me=vp(c),ge=[];e:{var ae=K0.get(i);if(ae!==void 0){var ce=vu,_e=i;switch(i){case"keypress":if(pu(c)===0)break e;case"keydown":case"keyup":ce=ek;break;case"focusin":_e="focus",ce=Np;break;case"focusout":_e="blur",ce=Np;break;case"beforeblur":case"afterblur":ce=Np;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=UT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=nk;break;case H0:case Q0:case V0:ce=HT;break;case Y0:ce=ik;break;case"scroll":case"scrollend":ce=$T;break;case"wheel":ce=lk;break;case"copy":case"cut":case"paste":ce=VT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=C0;break;case"toggle":case"beforetoggle":ce=ck}var Pe=(s&4)!==0,dt=!Pe&&(i==="scroll"||i==="scrollend"),Z=Pe?ae!==null?ae+"Capture":null:ae;Pe=[];for(var Y=ne,re;Y!==null;){var ve=Y;if(re=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||re===null||Z===null||(ve=uo(Y,Z),ve!=null&&Pe.push(Go(Y,ve,re))),dt)break;Y=Y.return}0<Pe.length&&(ae=new ce(ae,_e,null,c,me),ge.push({event:ae,listeners:Pe}))}}if((s&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",ae&&c!==hp&&(_e=c.relatedTarget||c.fromElement)&&(Vs(_e)||_e[Qs]))break e;if((ce||ae)&&(ae=me.window===me?me:(ae=me.ownerDocument)?ae.defaultView||ae.parentWindow:window,ce?(_e=c.relatedTarget||c.toElement,ce=ne,_e=_e?Vs(_e):null,_e!==null&&(dt=o(_e),Pe=_e.tag,_e!==dt||Pe!==5&&Pe!==27&&Pe!==6)&&(_e=null)):(ce=null,_e=ne),ce!==_e)){if(Pe=S0,ve="onMouseLeave",Z="onMouseEnter",Y="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=C0,ve="onPointerLeave",Z="onPointerEnter",Y="pointer"),dt=ce==null?ae:co(ce),re=_e==null?ae:co(_e),ae=new Pe(ve,Y+"leave",ce,c,me),ae.target=dt,ae.relatedTarget=re,ve=null,Vs(me)===ne&&(Pe=new Pe(Z,Y+"enter",_e,c,me),Pe.target=re,Pe.relatedTarget=dt,ve=Pe),dt=ve,ce&&_e)t:{for(Pe=oP,Z=ce,Y=_e,re=0,ve=Z;ve;ve=Pe(ve))re++;ve=0;for(var Oe=Y;Oe;Oe=Pe(Oe))ve++;for(;0<re-ve;)Z=Pe(Z),re--;for(;0<ve-re;)Y=Pe(Y),ve--;for(;re--;){if(Z===Y||Y!==null&&Z===Y.alternate){Pe=Z;break t}Z=Pe(Z),Y=Pe(Y)}Pe=null}else Pe=null;ce!==null&&g_(ge,ae,ce,Pe,!1),_e!==null&&dt!==null&&g_(ge,dt,_e,Pe,!0)}}e:{if(ae=ne?co(ne):window,ce=ae.nodeName&&ae.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ae.type==="file")var et=k0;else if(M0(ae))if(P0)et=yk;else{et=gk;var we=vk}else ce=ae.nodeName,!ce||ce.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ne&&pp(ne.elementType)&&(et=k0):et=xk;if(et&&(et=et(i,ne))){T0(ge,et,c,me);break e}we&&we(i,ae,ne),i==="focusout"&&ne&&ae.type==="number"&&ne.memoizedProps.value!=null&&mp(ae,"number",ae.value)}switch(we=ne?co(ne):window,i){case"focusin":(M0(we)||we.contentEditable==="true")&&(rl=we,Ep=ne,yo=null);break;case"focusout":yo=Ep=rl=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,F0(ge,c,me);break;case"selectionchange":if(jk)break;case"keydown":case"keyup":F0(ge,c,me)}var Fe;if(Sp)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else tl?O0(i,c)&&(Ke="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ke="onCompositionStart");Ke&&(A0&&c.locale!=="ko"&&(tl||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&tl&&(Fe=N0()):(ai=me,yp="value"in ai?ai.value:ai.textContent,tl=!0)),we=sd(ne,Ke),0<we.length&&(Ke=new w0(Ke,i,null,c,me),ge.push({event:Ke,listeners:we}),Fe?Ke.data=Fe:(Fe=D0(c),Fe!==null&&(Ke.data=Fe)))),(Fe=dk?fk(i,c):mk(i,c))&&(Ke=sd(ne,"onBeforeInput"),0<Ke.length&&(we=new w0("onBeforeInput","beforeinput",null,c,me),ge.push({event:we,listeners:Ke}),we.data=Fe)),aP(ge,i,ne,c,me)}h_(ge,s)})}function Go(i,s,c){return{instance:i,listener:s,currentTarget:c}}function sd(i,s){for(var c=s+"Capture",f=[];i!==null;){var x=i,N=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||N===null||(x=uo(i,c),x!=null&&f.unshift(Go(i,x,N)),x=uo(i,s),x!=null&&f.push(Go(i,x,N))),i.tag===3)return f;i=i.return}return[]}function oP(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function g_(i,s,c,f,x){for(var N=s._reactName,z=[];c!==null&&c!==f;){var D=c,$=D.alternate,ne=D.stateNode;if(D=D.tag,$!==null&&$===f)break;D!==5&&D!==26&&D!==27||ne===null||($=ne,x?(ne=uo(c,N),ne!=null&&z.unshift(Go(c,ne,$))):x||(ne=uo(c,N),ne!=null&&z.push(Go(c,ne,$)))),c=c.return}z.length!==0&&i.push({event:s,listeners:z})}var cP=/\r\n?/g,uP=/\u0000|\uFFFD/g;function x_(i){return(typeof i=="string"?i:""+i).replace(cP,`
`).replace(uP,"")}function y_(i,s){return s=x_(s),x_(i)===s}function ut(i,s,c,f,x,N){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Zs(i,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Zs(i,""+f);break;case"className":uu(i,"class",f);break;case"tabIndex":uu(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":uu(i,c,f);break;case"style":y0(i,f,N);break;case"data":if(s!=="object"){uu(i,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=fu(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(c==="formAction"?(s!=="input"&&ut(i,s,"name",x.name,x,null),ut(i,s,"formEncType",x.formEncType,x,null),ut(i,s,"formMethod",x.formMethod,x,null),ut(i,s,"formTarget",x.formTarget,x,null)):(ut(i,s,"encType",x.encType,x,null),ut(i,s,"method",x.method,x,null),ut(i,s,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=fu(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=ca);break;case"onScroll":f!=null&&Qe("scroll",i);break;case"onScrollEnd":f!=null&&Qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(x.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=fu(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":Qe("beforetoggle",i),Qe("toggle",i),cu(i,"popover",f);break;case"xlinkActuate":oa(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":oa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":oa(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":oa(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":oa(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":oa(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":oa(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":oa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":oa(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":cu(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=IT.get(c)||c,cu(i,c,f))}}function ev(i,s,c,f,x,N){switch(c){case"style":y0(i,f,N);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(x.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Zs(i,f):(typeof f=="number"||typeof f=="bigint")&&Zs(i,""+f);break;case"onScroll":f!=null&&Qe("scroll",i);break;case"onScrollEnd":f!=null&&Qe("scrollend",i);break;case"onClick":f!=null&&(i.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!u0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),s=c.slice(2,x?c.length-7:void 0),N=i[Dr]||null,N=N!=null?N[c]:null,typeof N=="function"&&i.removeEventListener(s,N,x),typeof f=="function")){typeof N!="function"&&N!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,f,x);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):cu(i,c,f)}}}function mr(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",i),Qe("load",i);var f=!1,x=!1,N;for(N in c)if(c.hasOwnProperty(N)){var z=c[N];if(z!=null)switch(N){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ut(i,s,N,z,c,null)}}x&&ut(i,s,"srcSet",c.srcSet,c,null),f&&ut(i,s,"src",c.src,c,null);return;case"input":Qe("invalid",i);var D=N=z=x=null,$=null,ne=null;for(f in c)if(c.hasOwnProperty(f)){var me=c[f];if(me!=null)switch(f){case"name":x=me;break;case"type":z=me;break;case"checked":$=me;break;case"defaultChecked":ne=me;break;case"value":N=me;break;case"defaultValue":D=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,s));break;default:ut(i,s,f,me,c,null)}}h0(i,N,D,$,ne,z,x,!1);return;case"select":Qe("invalid",i),f=z=N=null;for(x in c)if(c.hasOwnProperty(x)&&(D=c[x],D!=null))switch(x){case"value":N=D;break;case"defaultValue":z=D;break;case"multiple":f=D;default:ut(i,s,x,D,c,null)}s=N,c=z,i.multiple=!!f,s!=null?Ws(i,!!f,s,!1):c!=null&&Ws(i,!!f,c,!0);return;case"textarea":Qe("invalid",i),N=x=f=null;for(z in c)if(c.hasOwnProperty(z)&&(D=c[z],D!=null))switch(z){case"value":f=D;break;case"defaultValue":x=D;break;case"children":N=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(a(91));break;default:ut(i,s,z,D,c,null)}g0(i,f,x,N);return;case"option":for($ in c)c.hasOwnProperty($)&&(f=c[$],f!=null)&&($==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":ut(i,s,$,f,c,null));return;case"dialog":Qe("beforetoggle",i),Qe("toggle",i),Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":Qe("load",i);break;case"video":case"audio":for(f=0;f<Fo.length;f++)Qe(Fo[f],i);break;case"image":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"embed":case"source":case"link":Qe("error",i),Qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in c)if(c.hasOwnProperty(ne)&&(f=c[ne],f!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ut(i,s,ne,f,c,null)}return;default:if(pp(s)){for(me in c)c.hasOwnProperty(me)&&(f=c[me],f!==void 0&&ev(i,s,me,f,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(f=c[D],f!=null&&ut(i,s,D,f,c,null))}function dP(i,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,N=null,z=null,D=null,$=null,ne=null,me=null;for(ce in c){var ge=c[ce];if(c.hasOwnProperty(ce)&&ge!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":$=ge;default:f.hasOwnProperty(ce)||ut(i,s,ce,null,f,ge)}}for(var ae in f){var ce=f[ae];if(ge=c[ae],f.hasOwnProperty(ae)&&(ce!=null||ge!=null))switch(ae){case"type":N=ce;break;case"name":x=ce;break;case"checked":ne=ce;break;case"defaultChecked":me=ce;break;case"value":z=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(137,s));break;default:ce!==ge&&ut(i,s,ae,ce,f,ge)}}fp(i,z,D,$,ne,me,N,x);return;case"select":ce=z=D=ae=null;for(N in c)if($=c[N],c.hasOwnProperty(N)&&$!=null)switch(N){case"value":break;case"multiple":ce=$;default:f.hasOwnProperty(N)||ut(i,s,N,null,f,$)}for(x in f)if(N=f[x],$=c[x],f.hasOwnProperty(x)&&(N!=null||$!=null))switch(x){case"value":ae=N;break;case"defaultValue":D=N;break;case"multiple":z=N;default:N!==$&&ut(i,s,x,N,f,$)}s=D,c=z,f=ce,ae!=null?Ws(i,!!c,ae,!1):!!f!=!!c&&(s!=null?Ws(i,!!c,s,!0):Ws(i,!!c,c?[]:"",!1));return;case"textarea":ce=ae=null;for(D in c)if(x=c[D],c.hasOwnProperty(D)&&x!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:ut(i,s,D,null,f,x)}for(z in f)if(x=f[z],N=c[z],f.hasOwnProperty(z)&&(x!=null||N!=null))switch(z){case"value":ae=x;break;case"defaultValue":ce=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(91));break;default:x!==N&&ut(i,s,z,x,f,N)}v0(i,ae,ce);return;case"option":for(var _e in c)ae=c[_e],c.hasOwnProperty(_e)&&ae!=null&&!f.hasOwnProperty(_e)&&(_e==="selected"?i.selected=!1:ut(i,s,_e,null,f,ae));for($ in f)ae=f[$],ce=c[$],f.hasOwnProperty($)&&ae!==ce&&(ae!=null||ce!=null)&&($==="selected"?i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol":ut(i,s,$,ae,f,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in c)ae=c[Pe],c.hasOwnProperty(Pe)&&ae!=null&&!f.hasOwnProperty(Pe)&&ut(i,s,Pe,null,f,ae);for(ne in f)if(ae=f[ne],ce=c[ne],f.hasOwnProperty(ne)&&ae!==ce&&(ae!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,s));break;default:ut(i,s,ne,ae,f,ce)}return;default:if(pp(s)){for(var dt in c)ae=c[dt],c.hasOwnProperty(dt)&&ae!==void 0&&!f.hasOwnProperty(dt)&&ev(i,s,dt,void 0,f,ae);for(me in f)ae=f[me],ce=c[me],!f.hasOwnProperty(me)||ae===ce||ae===void 0&&ce===void 0||ev(i,s,me,ae,f,ce);return}}for(var Z in c)ae=c[Z],c.hasOwnProperty(Z)&&ae!=null&&!f.hasOwnProperty(Z)&&ut(i,s,Z,null,f,ae);for(ge in f)ae=f[ge],ce=c[ge],!f.hasOwnProperty(ge)||ae===ce||ae==null&&ce==null||ut(i,s,ge,ae,f,ce)}function b_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fP(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var x=c[f],N=x.transferSize,z=x.initiatorType,D=x.duration;if(N&&D&&b_(z)){for(z=0,D=x.responseEnd,f+=1;f<c.length;f++){var $=c[f],ne=$.startTime;if(ne>D)break;var me=$.transferSize,ge=$.initiatorType;me&&b_(ge)&&($=$.responseEnd,z+=me*($<D?1:(D-ne)/($-ne)))}if(--f,s+=8*(N+z)/(x.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var tv=null,rv=null;function ld(i){return i.nodeType===9?i:i.ownerDocument}function j_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function nv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var av=null;function mP(){var i=window.event;return i&&i.type==="popstate"?i===av?!1:(av=i,!0):(av=null,!1)}var __=typeof setTimeout=="function"?setTimeout:void 0,pP=typeof clearTimeout=="function"?clearTimeout:void 0,S_=typeof Promise=="function"?Promise:void 0,hP=typeof queueMicrotask=="function"?queueMicrotask:typeof S_<"u"?function(i){return S_.resolve(null).then(i).catch(vP)}:__;function vP(i){setTimeout(function(){throw i})}function ji(i){return i==="head"}function w_(i,s){var c=s,f=0;do{var x=c.nextSibling;if(i.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(x),zl(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Ho(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Ho(c);for(var N=c.firstChild;N;){var z=N.nextSibling,D=N.nodeName;N[oo]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&N.rel.toLowerCase()==="stylesheet"||c.removeChild(N),N=z}}else c==="body"&&Ho(i.ownerDocument.body);c=x}while(c);zl(s)}function C_(i,s){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function iv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":iv(c),up(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function gP(i,s,c,f){for(;i.nodeType===1;){var x=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[oo])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(N=i.getAttribute("rel"),N==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(N!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(N=i.getAttribute("src"),(N!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&N&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var N=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===N)return i}else return i;if(i=mn(i.nextSibling),i===null)break}return null}function xP(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=mn(i.nextSibling),i===null))return null;return i}function A_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=mn(i.nextSibling),i===null))return null;return i}function sv(i){return i.data==="$?"||i.data==="$~"}function lv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yP(i,s){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function mn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var ov=null;function E_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(s===0)return mn(i.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}i=i.nextSibling}return null}function z_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return i;s--}else c!=="/$"&&c!=="/&"||s++}i=i.previousSibling}return null}function O_(i,s,c){switch(s=ld(c),i){case"html":if(i=s.documentElement,!i)throw Error(a(452));return i;case"head":if(i=s.head,!i)throw Error(a(453));return i;case"body":if(i=s.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function Ho(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);up(i)}var pn=new Map,D_=new Set;function od(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wa=J.d;J.d={f:bP,r:jP,D:NP,C:_P,L:SP,m:wP,X:AP,S:CP,M:EP};function bP(){var i=wa.f(),s=Ju();return i||s}function jP(i){var s=Ys(i);s!==null&&s.tag===5&&s.type==="form"?Yj(s):wa.r(i)}var Cl=typeof document>"u"?null:document;function M_(i,s,c){var f=Cl;if(f&&typeof s=="string"&&s){var x=sn(s);x='link[rel="'+i+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),D_.has(x)||(D_.add(x),i={rel:i,crossOrigin:c,href:s},f.querySelector(x)===null&&(s=f.createElement("link"),mr(s,"link",i),Jt(s),f.head.appendChild(s)))}}function NP(i){wa.D(i),M_("dns-prefetch",i,null)}function _P(i,s){wa.C(i,s),M_("preconnect",i,s)}function SP(i,s,c){wa.L(i,s,c);var f=Cl;if(f&&i&&s){var x='link[rel="preload"][as="'+sn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+sn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+sn(c.imageSizes)+'"]')):x+='[href="'+sn(i)+'"]';var N=x;switch(s){case"style":N=Al(i);break;case"script":N=El(i)}pn.has(N)||(i=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),pn.set(N,i),f.querySelector(x)!==null||s==="style"&&f.querySelector(Qo(N))||s==="script"&&f.querySelector(Vo(N))||(s=f.createElement("link"),mr(s,"link",i),Jt(s),f.head.appendChild(s)))}}function wP(i,s){wa.m(i,s);var c=Cl;if(c&&i){var f=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+sn(f)+'"][href="'+sn(i)+'"]',N=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=El(i)}if(!pn.has(N)&&(i=v({rel:"modulepreload",href:i},s),pn.set(N,i),c.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Vo(N)))return}f=c.createElement("link"),mr(f,"link",i),Jt(f),c.head.appendChild(f)}}}function CP(i,s,c){wa.S(i,s,c);var f=Cl;if(f&&i){var x=Ks(f).hoistableStyles,N=Al(i);s=s||"default";var z=x.get(N);if(!z){var D={loading:0,preload:null};if(z=f.querySelector(Qo(N)))D.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},c),(c=pn.get(N))&&cv(i,c);var $=z=f.createElement("link");Jt($),mr($,"link",i),$._p=new Promise(function(ne,me){$.onload=ne,$.onerror=me}),$.addEventListener("load",function(){D.loading|=1}),$.addEventListener("error",function(){D.loading|=2}),D.loading|=4,cd(z,s,f)}z={type:"stylesheet",instance:z,count:1,state:D},x.set(N,z)}}}function AP(i,s){wa.X(i,s);var c=Cl;if(c&&i){var f=Ks(c).hoistableScripts,x=El(i),N=f.get(x);N||(N=c.querySelector(Vo(x)),N||(i=v({src:i,async:!0},s),(s=pn.get(x))&&uv(i,s),N=c.createElement("script"),Jt(N),mr(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(x,N))}}function EP(i,s){wa.M(i,s);var c=Cl;if(c&&i){var f=Ks(c).hoistableScripts,x=El(i),N=f.get(x);N||(N=c.querySelector(Vo(x)),N||(i=v({src:i,async:!0,type:"module"},s),(s=pn.get(x))&&uv(i,s),N=c.createElement("script"),Jt(N),mr(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(x,N))}}function T_(i,s,c,f){var x=(x=H.current)?od(x):null;if(!x)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Al(c.href),c=Ks(x).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Al(c.href);var N=Ks(x).hoistableStyles,z=N.get(i);if(z||(x=x.ownerDocument||x,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(i,z),(N=x.querySelector(Qo(i)))&&!N._p&&(z.instance=N,z.state.loading=5),pn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},pn.set(i,c),N||zP(x,i,c,z.state))),s&&f===null)throw Error(a(528,""));return z}if(s&&f!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=El(c),c=Ks(x).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function Al(i){return'href="'+sn(i)+'"'}function Qo(i){return'link[rel="stylesheet"]['+i+"]"}function k_(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function zP(i,s,c,f){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=i.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),mr(s,"link",c),Jt(s),i.head.appendChild(s))}function El(i){return'[src="'+sn(i)+'"]'}function Vo(i){return"script[async]"+i}function P_(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=i.querySelector('style[data-href~="'+sn(c.href)+'"]');if(f)return s.instance=f,Jt(f),f;var x=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Jt(f),mr(f,"style",x),cd(f,c.precedence,i),s.instance=f;case"stylesheet":x=Al(c.href);var N=i.querySelector(Qo(x));if(N)return s.state.loading|=4,s.instance=N,Jt(N),N;f=k_(c),(x=pn.get(x))&&cv(f,x),N=(i.ownerDocument||i).createElement("link"),Jt(N);var z=N;return z._p=new Promise(function(D,$){z.onload=D,z.onerror=$}),mr(N,"link",f),s.state.loading|=4,cd(N,c.precedence,i),s.instance=N;case"script":return N=El(c.src),(x=i.querySelector(Vo(N)))?(s.instance=x,Jt(x),x):(f=c,(x=pn.get(N))&&(f=v({},c),uv(f,x)),i=i.ownerDocument||i,x=i.createElement("script"),Jt(x),mr(x,"link",f),i.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,cd(f,c.precedence,i));return s.instance}function cd(i,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,N=x,z=0;z<f.length;z++){var D=f[z];if(D.dataset.precedence===s)N=D;else if(N!==x)break}N?N.parentNode.insertBefore(i,N.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function cv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function uv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var ud=null;function q_(i,s,c){if(ud===null){var f=new Map,x=ud=new Map;x.set(c,f)}else x=ud,f=x.get(c),f||(f=new Map,x.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),x=0;x<c.length;x++){var N=c[x];if(!(N[oo]||N[cr]||i==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var z=N.getAttribute(s)||"";z=i+z;var D=f.get(z);D?D.push(N):f.set(z,[N])}}return f}function R_(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function OP(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function I_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function DP(i,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Al(f.href),N=s.querySelector(Qo(x));if(N){s=N._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=dd.bind(i),s.then(i,i)),c.state.loading|=4,c.instance=N,Jt(N);return}N=s.ownerDocument||s,f=k_(f),(x=pn.get(x))&&cv(f,x),N=N.createElement("link"),Jt(N);var z=N;z._p=new Promise(function(D,$){z.onload=D,z.onerror=$}),mr(N,"link",f),c.instance=N}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=dd.bind(i),s.addEventListener("load",c),s.addEventListener("error",c))}}var dv=0;function MP(i,s){return i.stylesheets&&i.count===0&&md(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&md(i,i.stylesheets),i.unsuspend){var N=i.unsuspend;i.unsuspend=null,N()}},6e4+s);0<i.imgBytes&&dv===0&&(dv=62500*fP());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&md(i,i.stylesheets),i.unsuspend)){var N=i.unsuspend;i.unsuspend=null,N()}},(i.imgBytes>dv?50:800)+s);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(x)}}:null}function dd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)md(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var fd=null;function md(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,fd=new Map,s.forEach(TP,i),fd=null,dd.call(i))}function TP(i,s){if(!(s.state.loading&4)){var c=fd.get(i);if(c)var f=c.get(null);else{c=new Map,fd.set(i,c);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<x.length;N++){var z=x[N];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(c.set(z.dataset.precedence,z),f=z)}f&&c.set(null,f)}x=s.instance,z=x.getAttribute("data-precedence"),N=c.get(z)||f,N===f&&c.set(null,x),c.set(z,x),this.count++,f=dd.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),N?N.parentNode.insertBefore(x,N.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),s.state.loading|=4}}var Yo={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function kP(i,s,c,f,x,N,z,D,$){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ht(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.hiddenUpdates=ht(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=N,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function L_(i,s,c,f,x,N,z,D,$,ne,me,ge){return i=new kP(i,s,c,z,$,ne,me,ge,D),s=1,N===!0&&(s|=24),N=Hr(3,null,null,s),i.current=N,N.stateNode=i,s=Gp(),s.refCount++,i.pooledCache=s,s.refCount++,N.memoizedState={element:f,isDehydrated:c,cache:s},Yp(N),i}function $_(i){return i?(i=il,i):il}function B_(i,s,c,f,x,N){x=$_(x),f.context===null?f.context=x:f.pendingContext=x,f=ui(s),f.payload={element:c},N=N===void 0?null:N,N!==null&&(f.callback=N),c=di(i,f,s),c!==null&&(Rr(c,i,s),Co(c,i,s))}function U_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function fv(i,s){U_(i,s),(i=i.alternate)&&U_(i,s)}function F_(i){if(i.tag===13||i.tag===31){var s=Wi(i,67108864);s!==null&&Rr(s,i,67108864),fv(i,67108864)}}function G_(i){if(i.tag===13||i.tag===31){var s=Xr();s=lp(s);var c=Wi(i,s);c!==null&&Rr(c,i,s),fv(i,s)}}var pd=!0;function PP(i,s,c,f){var x=k.T;k.T=null;var N=J.p;try{J.p=2,mv(i,s,c,f)}finally{J.p=N,k.T=x}}function qP(i,s,c,f){var x=k.T;k.T=null;var N=J.p;try{J.p=8,mv(i,s,c,f)}finally{J.p=N,k.T=x}}function mv(i,s,c,f){if(pd){var x=pv(f);if(x===null)Jh(i,s,f,hd,c),Q_(i,f);else if(IP(x,i,s,c,f))f.stopPropagation();else if(Q_(i,f),s&4&&-1<RP.indexOf(i)){for(;x!==null;){var N=Ys(x);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var z=la(N.pendingLanes);if(z!==0){var D=N;for(D.pendingLanes|=2,D.entangledLanes|=2;z;){var $=1<<31-_r(z);D.entanglements[1]|=$,z&=~$}Yn(N),(nt&6)===0&&(Wu=ke()+500,Uo(0))}}break;case 31:case 13:D=Wi(N,2),D!==null&&Rr(D,N,2),Ju(),fv(N,2)}if(N=pv(f),N===null&&Jh(i,s,f,hd,c),N===x)break;x=N}x!==null&&f.stopPropagation()}else Jh(i,s,f,null,c)}}function pv(i){return i=vp(i),hv(i)}var hd=null;function hv(i){if(hd=null,i=Vs(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=u(s),i!==null)return i;i=null}else if(c===31){if(i=d(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return hd=i,null}function H_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case St:return 2;case gr:return 8;case Un:case Us:return 32;case nn:return 268435456;default:return 32}default:return 32}}var vv=!1,Ni=null,_i=null,Si=null,Ko=new Map,Xo=new Map,wi=[],RP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Q_(i,s){switch(i){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":Si=null;break;case"pointerover":case"pointerout":Ko.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(s.pointerId)}}function Wo(i,s,c,f,x,N){return i===null||i.nativeEvent!==N?(i={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:N,targetContainers:[x]},s!==null&&(s=Ys(s),s!==null&&F_(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),i)}function IP(i,s,c,f,x){switch(s){case"focusin":return Ni=Wo(Ni,i,s,c,f,x),!0;case"dragenter":return _i=Wo(_i,i,s,c,f,x),!0;case"mouseover":return Si=Wo(Si,i,s,c,f,x),!0;case"pointerover":var N=x.pointerId;return Ko.set(N,Wo(Ko.get(N)||null,i,s,c,f,x)),!0;case"gotpointercapture":return N=x.pointerId,Xo.set(N,Wo(Xo.get(N)||null,i,s,c,f,x)),!0}return!1}function V_(i){var s=Vs(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){i.blockedOn=s,l0(i.priority,function(){G_(c)});return}}else if(s===31){if(s=d(c),s!==null){i.blockedOn=s,l0(i.priority,function(){G_(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=pv(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);hp=f,c.target.dispatchEvent(f),hp=null}else return s=Ys(c),s!==null&&F_(s),i.blockedOn=c,!1;s.shift()}return!0}function Y_(i,s,c){vd(i)&&c.delete(s)}function LP(){vv=!1,Ni!==null&&vd(Ni)&&(Ni=null),_i!==null&&vd(_i)&&(_i=null),Si!==null&&vd(Si)&&(Si=null),Ko.forEach(Y_),Xo.forEach(Y_)}function gd(i,s){i.blockedOn===s&&(i.blockedOn=null,vv||(vv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,LP)))}var xd=null;function K_(i){xd!==i&&(xd=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){xd===i&&(xd=null);for(var s=0;s<i.length;s+=3){var c=i[s],f=i[s+1],x=i[s+2];if(typeof f!="function"){if(hv(f||c)===null)continue;break}var N=Ys(c);N!==null&&(i.splice(s,3),s-=3,ph(N,{pending:!0,data:x,method:c.method,action:f},f,x))}}))}function zl(i){function s($){return gd($,i)}Ni!==null&&gd(Ni,i),_i!==null&&gd(_i,i),Si!==null&&gd(Si,i),Ko.forEach(s),Xo.forEach(s);for(var c=0;c<wi.length;c++){var f=wi[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<wi.length&&(c=wi[0],c.blockedOn===null);)V_(c),c.blockedOn===null&&wi.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var x=c[f],N=c[f+1],z=x[Dr]||null;if(typeof N=="function")z||K_(c);else if(z){var D=null;if(N&&N.hasAttribute("formAction")){if(x=N,z=N[Dr]||null)D=z.formAction;else if(hv(x)!==null)continue}else D=z.action;typeof D=="function"?c[f+1]=D:(c.splice(f,3),f-=3),K_(c)}}}function X_(){function i(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(z){return x=z})},focusReset:"manual",scroll:"manual"})}function s(){x!==null&&(x(),x=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),x!==null&&(x(),x=null)}}}function gv(i){this._internalRoot=i}yd.prototype.render=gv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,f=Xr();B_(c,f,i,s,null,null)},yd.prototype.unmount=gv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;B_(i.current,2,null,i,null,null),Ju(),s[Qs]=null}};function yd(i){this._internalRoot=i}yd.prototype.unstable_scheduleHydration=function(i){if(i){var s=s0();i={blockedOn:null,target:i,priority:s};for(var c=0;c<wi.length&&s!==0&&s<wi[c].priority;c++);wi.splice(c,0,i),c===0&&V_(i)}};var W_=t.version;if(W_!=="19.2.4")throw Error(a(527,W_,"19.2.4"));J.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=p(s),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var $P={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bd.isDisabled&&bd.supportsFiber)try{xr=bd.inject($P),bt=bd}catch{}}return Jo.createRoot=function(i,s){if(!l(i))throw Error(a(299));var c=!1,f="",x=aN,N=iN,z=sN;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(N=s.onCaughtError),s.onRecoverableError!==void 0&&(z=s.onRecoverableError)),s=L_(i,1,!1,null,null,c,f,null,x,N,z,X_),i[Qs]=s.current,Zh(i),new gv(s)},Jo.hydrateRoot=function(i,s,c){if(!l(i))throw Error(a(299));var f=!1,x="",N=aN,z=iN,D=sN,$=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(N=c.onUncaughtError),c.onCaughtError!==void 0&&(z=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&($=c.formState)),s=L_(i,1,!0,s,c??null,f,x,$,N,z,D,X_),s.context=$_(null),c=s.current,f=Xr(),f=lp(f),x=ui(f),x.callback=null,di(c,x,f),c=f,s.current.lanes=c,yr(s,c),Yn(s),i[Qs]=s.current,Zh(i),new yd(s)},Jo.version="19.2.4",Jo}var l1;function $q(){if(l1)return Nv.exports;l1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Nv.exports=Lq(),Nv.exports}var Bq=$q();const Uq=Ga(Bq),Fq={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},by=VP(Fq),jd=YP(by),ie=KP(by,{localCache:XP({tabManager:ZP()})}),Ur=WP(by),o1={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},c1=e=>o1[e]||o1.default,P2=y.createContext(null),Gq=({children:e})=>{const[t,n]=y.useState(null),[a,l]=y.useState(!0),o=async b=>{try{const g=await It(je(ie,"users",b));if(g.exists()){const _=g.data();return{uid:b,email:_.email,displayName:_.displayName,role:_.role,isPremium:_.isPremium||!1,subscriptionEnd:_.subscriptionEnd?.toDate()||null,photoURL:_.photoURL,createdAt:_.createdAt?.toDate()||new Date,lastLogin:_.lastLogin?.toDate()}}return null}catch(g){return console.error("Erreur lors de la rcupration des donnes utilisateur:",g),null}},u=async(b,g)=>{const _=je(ie,"users",b.uid);(await It(_)).exists()?await Ze(_,{lastLogin:mt()}):await am(_,{email:b.email,displayName:b.displayName||g?.displayName||"",role:g?.role||"eleve",isPremium:!1,photoURL:b.photoURL,createdAt:mt(),lastLogin:mt()})},d=async(b,g)=>{try{const _=await nq(jd,b,g);await u(_.user)}catch(_){throw new Error(c1(_.code))}},m=async b=>{try{if(b.password!==b.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const g=await tq(jd,b.email,b.password);await rq(g.user,{displayName:b.displayName}),await u(g.user,{displayName:b.displayName,role:b.role})}catch(g){throw g.message?g:new Error(c1(g.code))}},p=async()=>{try{await eq(jd),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},h=async b=>{if(!t)throw new Error("Aucun utilisateur connect.");try{const g=je(ie,"users",t.uid);await Ze(g,{...b,updatedAt:mt()}),n(_=>_?{..._,...b}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};y.useEffect(()=>{const b=JP(jd,async g=>{if(g){const _=await o(g.uid);n(_)}else n(null);l(!1)});return()=>b()},[]);const v={currentUser:t,loading:a,login:d,register:m,logout:p,updateProfile:h};return r.jsx(P2.Provider,{value:v,children:a?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement..."})]}):e})},lt=()=>{const e=y.useContext(P2);if(!e)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return e},yc=({children:e,allowedRoles:t,requirePremium:n=!1})=>{const{currentUser:a,loading:l}=lt();return l?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Vrification des autorisations..."})]}):a?t&&!t.includes(a.role)?r.jsxs("div",{className:"error-container",children:[r.jsx("h2",{children:"Accs non autoris"}),r.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),r.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!a.isPremium?r.jsxs("div",{className:"error-container premium-required",children:[r.jsx("h2",{children:"Contenu Premium"}),r.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),r.jsxs("div",{className:"premium-cta",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",r.jsx("strong",{children:"20 000 FCFA/an"})]}),r.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):r.jsx(r.Fragment,{children:e}):r.jsxs("div",{className:"error-container",children:[r.jsx("h2",{children:"Accs refus"}),r.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),r.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},hn=({children:e})=>r.jsx(yc,{allowedRoles:["admin"],children:e}),Ca=({children:e})=>r.jsx(yc,{allowedRoles:["admin","prof"],children:e}),Hq=()=>{const{currentUser:e,logout:t,loading:n}=lt(),a=yt(),l=nm(),[o,u]=y.useState(!1),[d,m]=y.useState(!1),[p,h]=y.useState(!1),v=y.useRef(null),b=[{path:"/",label:"Accueil",icon:r.jsx(dx,{size:18})},{path:"/disciplines",label:"Disciplines",icon:r.jsx(jn,{size:18})},{path:"/ebooks",label:"Bibliothque",icon:r.jsx(jn,{size:18})},{path:"/quiz-gratuits",label:"Quiz",icon:r.jsx(js,{size:18}),requireAuth:!1},{path:"/quizzes",label:"Quiz Avancs",icon:r.jsx(js,{size:18}),requireAuth:!0,requirePremium:!0},{path:e?.role==="eleve"?"/eleve/dashboard":e?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:r.jsx(J_,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:r.jsx(sq,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:r.jsx(Ns,{size:18}),requireAuth:!0,requireRole:["parent"]}];y.useEffect(()=>{const A=O=>{v.current&&!v.current.contains(O.target)&&m(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]),y.useEffect(()=>{u(!1),m(!1)},[l.pathname]),y.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const g=async()=>{try{h(!0),await t(),m(!1),a("/")}catch(A){console.error("Erreur lors de la dconnexion:",A)}finally{h(!1)}},_=()=>{u(!o)},j=()=>{m(!d)},S=A=>!(A.requireAuth&&!e||A.requirePremium&&e&&!e.isPremium||A.requireRole&&e&&!A.requireRole.includes(e.role)),w=A=>A==="/"?l.pathname==="/":l.pathname.startsWith(A),E=A=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[A]||A,C=()=>e?e.displayName?e.displayName.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase():"?";return r.jsxs("header",{className:"header",children:[r.jsxs("div",{className:"header__container",children:[r.jsxs(qe,{to:"/",className:"header__logo",children:[r.jsx(js,{className:"header__logo-icon",size:32}),r.jsxs("div",{className:"header__logo-text",children:[r.jsx("span",{className:"header__logo-name",children:"PedaClic"}),r.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),r.jsx("nav",{className:"header__nav header__nav--desktop",children:r.jsx("ul",{className:"header__nav-list",children:b.map(A=>S(A)&&r.jsx("li",{className:"header__nav-item",children:r.jsxs(qe,{to:A.path,className:`header__nav-link ${w(A.path)?"header__nav-link--active":""}`,children:[A.icon,r.jsx("span",{children:A.label}),A.requirePremium&&r.jsx(dc,{size:14,className:"header__premium-badge"})]})},A.path))})}),r.jsxs("div",{className:"header__actions",children:[n?r.jsx("div",{className:"header__loading",children:r.jsx("div",{className:"header__spinner"})}):e?r.jsxs("div",{className:"header__user",ref:v,children:[e.isPremium&&r.jsxs("span",{className:"header__premium-tag",children:[r.jsx(dc,{size:14}),"Premium"]}),r.jsxs("button",{className:"header__user-button",onClick:j,"aria-expanded":d,"aria-haspopup":"true",children:[r.jsx("div",{className:"header__avatar",children:e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):r.jsx("span",{className:"header__avatar-initials",children:C()})}),r.jsx("span",{className:"header__user-name",children:e.displayName||e.email.split("@")[0]}),r.jsx(Jd,{size:16,className:`header__chevron ${d?"header__chevron--open":""}`})]}),d&&r.jsxs("div",{className:"header__dropdown",children:[r.jsxs("div",{className:"header__dropdown-header",children:[r.jsx("p",{className:"header__dropdown-email",children:e.email}),r.jsx("span",{className:`header__dropdown-role header__dropdown-role--${e.role}`,children:E(e.role)})]}),r.jsx("div",{className:"header__dropdown-divider"}),r.jsxs("nav",{className:"header__dropdown-nav",children:[r.jsxs(qe,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[r.jsx(J_,{size:18}),r.jsx("span",{children:"Tableau de bord"})]}),e.role==="eleve"&&r.jsxs(qe,{to:"/eleve/suivi",className:"header__dropdown-link",children:[r.jsx(Ns,{size:18}),r.jsx("span",{children:"Mes points  amliorer"})]}),e.role==="parent"&&r.jsxs(qe,{to:"/parent/dashboard",className:"header__dropdown-link",children:[r.jsx(Ns,{size:18}),r.jsx("span",{children:"Espace Parent"})]}),r.jsxs(qe,{to:"/profil",className:"header__dropdown-link",children:[r.jsx(lq,{size:18}),r.jsx("span",{children:"Mon profil"})]}),e.role==="admin"&&r.jsxs(qe,{to:"/admin",className:"header__dropdown-link",children:[r.jsx(oq,{size:18}),r.jsx("span",{children:"Administration"})]}),!e.isPremium&&r.jsxs(qe,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[r.jsx(dc,{size:18}),r.jsx("span",{children:"Passer Premium"})]})]}),r.jsx("div",{className:"header__dropdown-divider"}),r.jsxs("button",{className:"header__dropdown-logout",onClick:g,disabled:p,children:[r.jsx(e1,{size:18}),r.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]}):r.jsxs("div",{className:"header__auth-buttons",children:[r.jsx(qe,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),r.jsx(qe,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),r.jsx("button",{className:"header__mobile-toggle",onClick:_,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?r.jsx(Ti,{size:24}):r.jsx(cq,{size:24})})]})]}),r.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[r.jsx("div",{className:"header__mobile-overlay",onClick:()=>u(!1)}),r.jsxs("div",{className:"header__mobile-content",children:[r.jsx("nav",{className:"header__mobile-nav",children:r.jsx("ul",{className:"header__mobile-list",children:b.map(A=>S(A)&&r.jsx("li",{className:"header__mobile-item",children:r.jsxs(qe,{to:A.path,className:`header__mobile-link ${w(A.path)?"header__mobile-link--active":""}`,children:[A.icon,r.jsx("span",{children:A.label}),A.requirePremium&&r.jsx(dc,{size:14,className:"header__premium-badge"})]})},A.path))})}),!e&&r.jsxs("div",{className:"header__mobile-auth",children:[r.jsx(qe,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),r.jsx(qe,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),e&&r.jsxs("div",{className:"header__mobile-user",children:[r.jsxs("div",{className:"header__mobile-user-info",children:[r.jsx("div",{className:"header__avatar header__avatar--large",children:e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):r.jsx("span",{className:"header__avatar-initials",children:C()})}),r.jsxs("div",{className:"header__mobile-user-details",children:[r.jsx("p",{className:"header__mobile-user-name",children:e.displayName||e.email.split("@")[0]}),r.jsx("p",{className:"header__mobile-user-email",children:e.email})]})]}),r.jsxs("button",{className:"header__mobile-logout",onClick:g,disabled:p,children:[r.jsx(e1,{size:18}),r.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},Qq=()=>{const e=new Date().getFullYear(),t=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],n=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],a=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:r.jsx(hq,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:r.jsx(vq,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:r.jsx(gq,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:r.jsx(xq,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:r.jsx(yq,{size:20})}];return r.jsxs("footer",{className:"footer",children:[r.jsx("div",{className:"footer__main",children:r.jsxs("div",{className:"footer__container",children:[r.jsxs("div",{className:"footer__column footer__column--about",children:[r.jsxs(qe,{to:"/",className:"footer__logo",children:[r.jsx(js,{className:"footer__logo-icon",size:36}),r.jsxs("div",{className:"footer__logo-text",children:[r.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),r.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),r.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),r.jsxs("div",{className:"footer__stats",children:[r.jsxs("div",{className:"footer__stat",children:[r.jsx(jn,{size:18}),r.jsx("span",{children:"500+ cours"})]}),r.jsxs("div",{className:"footer__stat",children:[r.jsx(Hd,{size:18}),r.jsx("span",{children:"10 000+ lves"})]})]})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),r.jsx("nav",{className:"footer__nav",children:r.jsx("ul",{className:"footer__list",children:t.map((l,o)=>r.jsx("li",{className:"footer__item",children:r.jsx(qe,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),r.jsx("nav",{className:"footer__nav",children:r.jsx("ul",{className:"footer__list",children:n.map((l,o)=>r.jsx("li",{className:"footer__item",children:r.jsx(qe,{to:l.path,className:"footer__link",children:l.label})},o))})})]}),r.jsxs("div",{className:"footer__column",children:[r.jsxs("h3",{className:"footer__title",children:[r.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),r.jsxs("div",{className:"footer__contact",children:[r.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[r.jsx(uq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"contact@pedaclic.sn"})]}),r.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[r.jsx(dq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"+221 77 000 00 00"})]}),r.jsxs("div",{className:"footer__contact-item",children:[r.jsx(fq,{size:16,className:"footer__contact-icon"}),r.jsx("span",{children:"Dakar, Sngal"})]})]}),r.jsxs("div",{className:"footer__social",children:[r.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),r.jsx("div",{className:"footer__social-links",children:a.map((l,o)=>r.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:l.name,children:l.icon},o))})]})]})]})}),r.jsx("div",{className:"footer__bottom",children:r.jsxs("div",{className:"footer__container footer__bottom-content",children:[r.jsxs("p",{className:"footer__copyright",children:[" ",e," PedaClic. Tous droits rservs."]}),r.jsxs("p",{className:"footer__made-with",children:["Fait avec ",r.jsx(mq,{size:14,className:"footer__heart"})," au Sngal "]}),r.jsxs("nav",{className:"footer__legal",children:[r.jsxs(qe,{to:"/mentions-legales",className:"footer__legal-link",children:[r.jsx(pq,{size:14})," Mentions lgales"]}),r.jsxs(qe,{to:"/confidentialite",className:"footer__legal-link",children:[r.jsx(xy,{size:14})," Confidentialit"]}),r.jsxs(qe,{to:"/aide",className:"footer__legal-link",children:[r.jsx(Qd,{size:14})," Aide"]})]})]})})]})},Et=({children:e,hideHeader:t=!1,hideFooter:n=!1,className:a=""})=>r.jsxs("div",{className:"layout",children:[!t&&r.jsx(Hq,{}),r.jsx("main",{className:`layout__main ${t?"":"layout__main--with-header"} ${a}`,children:e}),!n&&r.jsx(Qq,{})]}),Vq=()=>{const{currentUser:e}=lt();return r.jsxs("div",{className:"home-page",children:[r.jsxs("section",{className:"home-page__hero",children:[r.jsxs("div",{className:"home-page__hero-content",children:[r.jsxs("div",{className:"home-page__hero-badge",children:[r.jsx(Zr,{size:14}),r.jsx("span",{children:"Plateforme N1 au Sngal"})]}),r.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",r.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),r.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),r.jsx("div",{className:"home-page__hero-cta",children:e?r.jsxs(qe,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",r.jsx(fs,{size:20})]}):r.jsxs(r.Fragment,{children:[r.jsxs(qe,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",r.jsx(fs,{size:20})]}),r.jsxs(qe,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[r.jsx(xc,{size:18}),"Dcouvrir les cours"]})]})}),r.jsxs("div",{className:"home-page__hero-stats",children:[r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"10 000+"}),r.jsx("span",{children:"lves inscrits"})]}),r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"500+"}),r.jsx("span",{children:"Cours disponibles"})]}),r.jsxs("div",{className:"home-page__hero-stat",children:[r.jsx("strong",{children:"95%"}),r.jsx("span",{children:"Taux de russite"})]})]})]}),r.jsx("div",{className:"home-page__hero-image",children:r.jsxs("div",{className:"home-page__hero-illustration",children:[r.jsx(js,{size:120}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),r.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),r.jsx("section",{className:"home-page__levels",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),r.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),r.jsxs("div",{className:"home-page__levels-grid",children:[r.jsxs(qe,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[r.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),r.jsx("h3",{children:"Collge"}),r.jsx("p",{children:"6me  3me"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx(Tt,{size:16})," Prparation au BFEM"]}),r.jsxs("li",{children:[r.jsx(Tt,{size:16})," 9 matires disponibles"]}),r.jsxs("li",{children:[r.jsx(Tt,{size:16})," Exercices corrigs"]})]}),r.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",r.jsx(fs,{size:16})]})]}),r.jsxs(qe,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[r.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),r.jsx("h3",{children:"Lyce"}),r.jsx("p",{children:"2nde  Terminale"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx(Tt,{size:16})," Prparation au BAC"]}),r.jsxs("li",{children:[r.jsx(Tt,{size:16})," 12 matires disponibles"]}),r.jsxs("li",{children:[r.jsx(Tt,{size:16})," Annales d'examens"]})]}),r.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",r.jsx(fs,{size:16})]})]})]})]})}),r.jsx("section",{className:"home-page__features",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),r.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),r.jsxs("div",{className:"home-page__features-grid",children:[r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon",children:r.jsx(jn,{size:28})}),r.jsx("h3",{children:"Cours complets"}),r.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:r.jsx(M2,{size:28})}),r.jsx("h3",{children:"Quiz interactifs"}),r.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:r.jsx(T2,{size:28})}),r.jsx("h3",{children:"Suivi de progression"}),r.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:r.jsx(xy,{size:28})}),r.jsx("h3",{children:"Contenu vrifi"}),r.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:r.jsx(Fl,{size:28})}),r.jsx("h3",{children:"Accessible 24/7"}),r.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),r.jsxs("div",{className:"home-page__feature-card",children:[r.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:r.jsx(Li,{size:28})}),r.jsx("h3",{children:"Certificats"}),r.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),r.jsx("section",{className:"home-page__premium",children:r.jsx("div",{className:"home-page__container",children:r.jsxs("div",{className:"home-page__premium-content",children:[r.jsxs("div",{className:"home-page__premium-text",children:[r.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),r.jsx("h2",{children:"Passez  la vitesse suprieure"}),r.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",r.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),r.jsxs("ul",{className:"home-page__premium-features",children:[r.jsxs("li",{children:[r.jsx(Tt,{size:18})," Quiz illimits dans toutes les matires"]}),r.jsxs("li",{children:[r.jsx(Tt,{size:18})," Corrections dtailles des exercices"]}),r.jsxs("li",{children:[r.jsx(Tt,{size:18})," Annales des examens (BFEM, BAC)"]}),r.jsxs("li",{children:[r.jsx(Tt,{size:18})," Support prioritaire"]})]}),r.jsxs(qe,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",r.jsx(fs,{size:20})]})]}),r.jsx("div",{className:"home-page__premium-pricing",children:r.jsxs("div",{className:"home-page__pricing-card",children:[r.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),r.jsx("h3",{children:"Abonnement Annuel"}),r.jsxs("div",{className:"home-page__pricing-price",children:[r.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),r.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),r.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),r.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),r.jsx(qe,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),r.jsx("section",{className:"home-page__testimonials",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),r.jsxs("div",{className:"home-page__testimonials-grid",children:[r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(Zr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Fatou Adara"}),r.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(Zr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Moussa Diallo"}),r.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),r.jsxs("div",{className:"home-page__testimonial-card",children:[r.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(t=>r.jsx(Zr,{size:16,fill:"#f59e0b",color:"#f59e0b"},t))}),r.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),r.jsxs("div",{className:"home-page__testimonial-author",children:[r.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),r.jsxs("div",{children:[r.jsx("strong",{children:"Aminata Ndiaye"}),r.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),r.jsx("section",{className:"home-page__final-cta",children:r.jsxs("div",{className:"home-page__container",children:[r.jsx("h2",{children:"Prt  russir ?"}),r.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!e&&r.jsxs(qe,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",r.jsx(fs,{size:24})]})]})})]})},Yq=()=>{const{login:e}=lt(),t=yt(),a=nm().state?.from||"/",[l,o]=y.useState({email:"",password:""}),[u,d]=y.useState(!1),[m,p]=y.useState(""),[h,v]=y.useState(!1),b=j=>{const{name:S,value:w}=j.target;o(E=>({...E,[S]:w})),m&&p("")},g=()=>l.email.trim()?l.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)?!0:(p("Veuillez entrer une adresse email valide."),!1):(p("Veuillez entrer votre mot de passe."),!1):(p("Veuillez entrer votre adresse email."),!1),_=async j=>{if(j.preventDefault(),!!g()){d(!0),p("");try{await e(l.email,l.password),t(a,{replace:!0})}catch(S){S instanceof Error?p(S.message):p("Une erreur est survenue lors de la connexion.")}finally{d(!1)}}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-container",children:[r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs(qe,{to:"/",className:"auth-logo",children:[r.jsx("div",{className:"auth-logo__icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),r.jsx("span",{children:"PedaClic"})]}),r.jsx("h1",{className:"auth-title",children:"Connexion"}),r.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),m&&r.jsxs("div",{className:"auth-error",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 8v4M12 16h.01"})]}),r.jsx("span",{children:m})]}),r.jsxs("form",{onSubmit:_,className:"auth-form",children:[r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:b,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:u})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),r.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),r.jsx("input",{type:h?"text":"password",id:"password",name:"password",value:l.password,onChange:b,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:u}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!h),"aria-label":h?"Masquer le mot de passe":"Afficher le mot de passe",children:h?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsx("div",{className:"auth-forgot",children:r.jsx(qe,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),r.jsx("button",{type:"submit",className:"auth-button",disabled:u,children:u?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"ou"})}),r.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",r.jsx(qe,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),r.jsxs("div",{className:"auth-welcome",children:[r.jsx("h2",{children:"Bienvenue sur PedaClic !"}),r.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),r.jsxs("ul",{className:"auth-features",children:[r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),r.jsxs("li",{children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},Kq=()=>{const{register:e}=lt(),t=yt(),[n,a]=y.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[l,o]=y.useState(!1),[u,d]=y.useState(""),[m,p]=y.useState(!1),[h,v]=y.useState(!1),[b,g]=y.useState(!1),_=w=>{const{name:E,value:C}=w.target;a(A=>({...A,[E]:C})),u&&d("")},j=()=>n.displayName.trim()?n.displayName.trim().length<2?(d("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(d("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(d("Les mots de passe ne correspondent pas."),!1):b?!0:(d("Veuillez accepter les conditions d'utilisation."),!1):(d("Veuillez entrer un mot de passe."),!1):(d("Veuillez entrer une adresse email valide."),!1):(d("Veuillez entrer votre adresse email."),!1):(d("Veuillez entrer votre nom complet."),!1),S=async w=>{if(w.preventDefault(),!!j()){o(!0),d("");try{await e(n),t("/disciplines",{replace:!0})}catch(E){E instanceof Error?d(E.message):d("Une erreur est survenue lors de l'inscription.")}finally{o(!1)}}};return r.jsx("div",{className:"auth-page",children:r.jsxs("div",{className:"auth-container",children:[r.jsxs("div",{className:"auth-card auth-card--register",children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs(qe,{to:"/",className:"auth-logo",children:[r.jsx("div",{className:"auth-logo__icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),r.jsx("span",{children:"PedaClic"})]}),r.jsx("h1",{className:"auth-title",children:"Crer un compte"}),r.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),u&&r.jsxs("div",{className:"auth-error",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 8v4M12 16h.01"})]}),r.jsx("span",{children:u})]}),r.jsxs("form",{onSubmit:S,className:"auth-form",children:[r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:_,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:l})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:_,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:l})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{className:"auth-label",children:"Je suis :"}),r.jsxs("div",{className:"auth-role-selector",children:[r.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:_,className:"auth-role-input",disabled:l}),r.jsxs("div",{className:"auth-role-content",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),r.jsx("span",{children:"lve"})]})]}),r.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:_,className:"auth-role-input",disabled:l}),r.jsxs("div",{className:"auth-role-content",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),r.jsx("span",{children:"Professeur"})]})]}),r.jsxs("label",{className:`auth-role-option ${n.role==="parent"?"auth-role-option--selected":""}`,children:[r.jsx("input",{type:"radio",name:"role",value:"parent",checked:n.role==="parent",onChange:_,className:"auth-role-input",disabled:l}),r.jsxs("div",{className:"auth-role-content",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),r.jsx("span",{children:"Parent d'lve"})]})]})]})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),r.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),r.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:n.password,onChange:_,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:l}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>p(!m),"aria-label":m?"Masquer":"Afficher",children:m?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),r.jsxs("div",{className:"auth-field",children:[r.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),r.jsxs("div",{className:"auth-input-wrapper",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),r.jsx("input",{type:h?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:_,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:l}),r.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!h),"aria-label":h?"Masquer":"Afficher",children:h?r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsx("div",{className:"auth-checkbox-field",children:r.jsxs("label",{className:"auth-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:b,onChange:w=>g(w.target.checked),className:"auth-checkbox",disabled:l}),r.jsx("span",{className:"auth-checkbox-custom"}),r.jsxs("span",{children:["J'accepte les"," ",r.jsx(qe,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",r.jsx(qe,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),r.jsx("button",{type:"submit",className:"auth-button",disabled:l,children:l?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"ou"})}),r.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",r.jsx(qe,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),r.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[r.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),r.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),r.jsxs("div",{className:"auth-stats",children:[r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"10 000+"}),r.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"500+"}),r.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),r.jsxs("div",{className:"auth-stat",children:[r.jsx("span",{className:"auth-stat-number",children:"95%"}),r.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),r.jsxs("div",{className:"auth-testimonial",children:[r.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),r.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},q2=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],R2=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],I2=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],L2={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function u1(e){switch(e){case"college":return q2;case"lycee":return R2;case"formation_libre":return I2;default:return[]}}function $2(e){return[...q2,...R2,...I2].find(n=>n.value===e)?.label||e}const d1=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],Xq=()=>{const[e,t]=y.useState("college"),[n,a]=y.useState([]),[l,o]=y.useState(!0),u=yt();y.useEffect(()=>{const p=Re(be(ie,"disciplines"),Je("ordre")),h=gy(p,v=>{const b=v.docs.map(g=>({id:g.id,...g.data(),createdAt:g.data().createdAt?.toDate()||new Date,updatedAt:g.data().updatedAt?.toDate()||new Date}));a(b),o(!1)});return()=>h()},[]);const d=n.filter(p=>p.niveau===e),m=d1.find(p=>p.niveau===e);return r.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[r.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[r.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),r.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:d1.map(p=>{const h=e===p.niveau;return r.jsxs("button",{onClick:()=>t(p.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${h?p.color:"#e2e8f0"}`,background:h?p.bgLight:"#fff",color:h?p.color:"#718096",fontSize:"1rem",fontWeight:h?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:h?`0 2px 8px ${p.color}20`:"none"},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:p.icon}),p.label]},p.niveau)})}),l&&r.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!l&&d.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[r.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",L2[e]," pour le moment."]})]}),!l&&d.length>0&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:d.map(p=>r.jsxs("div",{onClick:()=>u(`/disciplines/${p.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${p.couleur||m.color}`},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[r.jsx("span",{style:{fontSize:"1.8rem"},children:p.icone||""}),r.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:p.nom})]}),p.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:p.description.length>100?`${p.description.slice(0,100)}...`:p.description}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:r.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:m.bgLight,color:m.color},children:$2(p.classe)})}),p.coefficient!==void 0&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",p.coefficient]})]},p.id))})]})},ec="disciplines",f1=e=>{const t=e.data();return{id:e.id,nom:t.nom,niveau:t.niveau,classe:t.classe,ordre:t.ordre,coefficient:t.coefficient,couleur:t.couleur,icone:t.icone,description:t.description,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Qa={async getAll(e){try{const t=[Je("ordre","asc")];e?.niveau&&t.unshift(Ce("niveau","==",e.niveau)),e?.classe&&t.unshift(Ce("classe","==",e.classe));const n=Re(be(ie,ec),...t);return(await De(n)).docs.map(f1)}catch(t){throw console.error("Erreur lors de la rcupration des disciplines:",t),new Error("Impossible de rcuprer les disciplines")}},async getById(e){try{const t=je(ie,ec,e),n=await It(t);return n.exists()?f1(n):null}catch(t){throw console.error("Erreur lors de la rcupration de la discipline:",t),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(e){return this.getAll({niveau:e})},async getByClasse(e){return this.getAll({classe:e})},async create(e){try{return(await Lt(be(ie,ec),{...e,createdAt:mt(),updatedAt:mt()})).id}catch(t){throw console.error("Erreur lors de la cration de la discipline:",t),new Error("Impossible de crer la discipline")}},async update(e,t){try{const n=je(ie,ec,e);await Ze(n,{...t,updatedAt:mt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(e){try{const t=je(ie,ec,e);await Cn(t)}catch(t){throw console.error("Erreur lors de la suppression de la discipline:",t),new Error("Impossible de supprimer la discipline")}},async exists(e){return await this.getById(e)!==null},async countByNiveau(e){return(await this.getByNiveau(e)).length}},us="ressources",Wq="ressources",m1=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,titre:t.titre,type:t.type,contenu:t.contenu,description:t.description,isPremium:t.isPremium||!1,ordre:t.ordre||0,chapitre:t.chapitre,fichierURL:t.fichierURL,dureeEstimee:t.dureeEstimee,tags:t.tags||[],auteurId:t.auteurId,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Zq=e=>{const t=Date.now(),n=e.split(".").pop();return`${e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${t}.${n}`},Aa={async getAll(e,t){try{const n=[Je("ordre","asc")];e?.disciplineId&&n.unshift(Ce("disciplineId","==",e.disciplineId)),e?.chapitreId&&n.unshift(Ce("chapitre","==",e.chapitreId)),e?.type&&n.unshift(Ce("type","==",e.type)),e?.isPremium!==void 0&&n.unshift(Ce("isPremium","==",e.isPremium)),e?.auteurId&&n.unshift(Ce("auteurId","==",e.auteurId)),t&&n.push(Nn(t));const a=Re(be(ie,us),...n);return(await De(a)).docs.map(m1)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(e){try{const t=je(ie,us,e),n=await It(t);return n.exists()?m1(n):null}catch(t){throw console.error("Erreur lors de la rcupration de la ressource:",t),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(e){return this.getAll({disciplineId:e})},async getByChapitre(e){return this.getAll({chapitreId:e})},async getByType(e){return this.getAll({type:e})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(e,t){try{return(await Lt(be(ie,us),{...e,auteurId:t,createdAt:mt(),updatedAt:mt()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(e,t){try{const n=je(ie,us,e);await Ze(n,{...t,updatedAt:mt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(e){try{const t=await this.getById(e);t?.fichierURL&&await this.deleteFile(t.fichierURL);const n=je(ie,us,e);await Cn(n)}catch(t){throw console.error("Erreur lors de la suppression de la ressource:",t),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),n=Sc(ie);for(const a of t){a.fichierURL&&await this.deleteFile(a.fichierURL);const l=je(ie,us,a.id);n.delete(l)}await n.commit()}catch(t){throw console.error("Erreur lors de la suppression des ressources:",t),new Error("Impossible de supprimer les ressources")}},async uploadFile(e,t){try{const n=Zq(e.name),a=`${Wq}/${t}/${n}`,l=Br(Ur,a);return await bs(l,e),await Ta(l)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(e){try{const t=Br(Ur,e);await gc(t)}catch(t){console.warn("Fichier non trouv ou dj supprim:",t)}},async reorder(e,t){try{const n=Sc(ie);t.forEach((a,l)=>{const o=je(ie,us,a);n.update(o,{ordre:l+1,updatedAt:mt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(e,t){await this.update(e,{isPremium:t})},async countByType(e){return(await this.getByType(e)).length},async getStats(){try{const e=await this.getAll(),t={total:e.length,premium:e.filter(n=>n.isPremium).length,gratuit:e.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return e.forEach(n=>{t.parType[n.type]!==void 0&&t.parType[n.type]++}),t}catch(e){throw console.error("Erreur lors du calcul des statistiques:",e),new Error("Impossible de calculer les statistiques")}}},Jq=()=>{const{id:e}=Ha(),t=yt(),[n,a]=y.useState(null),[l,o]=y.useState([]),[u,d]=y.useState([]),[m,p]=y.useState(!0),[h,v]=y.useState(null),[b,g]=y.useState("tous"),[_,j]=y.useState(new Set),S=y.useCallback(async()=>{if(e)try{p(!0),v(null);const I=await Qa.getById(e);if(!I){v("Discipline introuvable."),p(!1);return}a(I);const L=await Aa.getAll({disciplineId:e}),K=new Map,U=[];for(const V of L){const M=V.chapitre||V.chapitreId;M?(K.has(M)||K.set(M,[]),K.get(M).push(V)):U.push(V)}const G=Array.from(K.entries()).map(([V,M])=>({chapitreNom:V,ressources:M.sort((k,J)=>k.ordre-J.ordre)})).sort((V,M)=>V.chapitreNom.localeCompare(M.chapitreNom,"fr"));o(G),d(U),G.length>0&&j(new Set([G[0].chapitreNom]))}catch(I){console.error("Erreur chargement discipline:",I),v("Impossible de charger les donnes. Ressayez plus tard.")}finally{p(!1)}},[e]);y.useEffect(()=>{S()},[S]);const w=I=>{j(L=>{const K=new Set(L);return K.has(I)?K.delete(I):K.add(I),K})},E=I=>b==="tous"?I:I.filter(L=>L.type===b),C=I=>{switch(I){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},A=I=>{switch(I){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return I}},O=I=>{switch(I){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},T=I=>I==="college"?"Collge":"Lyce";if(m)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[r.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),r.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),r.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(h||!n)return r.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:h||"Discipline introuvable"}),r.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),r.jsx("button",{onClick:()=>t("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const P=[...l.flatMap(I=>I.ressources),...u],R=[...new Set(P.map(I=>I.type))];return r.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[r.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[r.jsx(qe,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),r.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),r.jsx(qe,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),r.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),r.jsx("span",{style:{color:"#374151"},children:n.nom})]}),r.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&r.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",T(n.niveau),"  ",n.classe]}),r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",P.length," ressource",P.length!==1?"s":""]}),n.coefficient&&r.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),R.length>1&&r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[r.jsxs("button",{onClick:()=>g("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:b==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:b==="tous"?"#2563eb":"#fff",color:b==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",P.length,")"]}),R.map(I=>{const L=P.filter(U=>U.type===I).length,K=b===I;return r.jsxs("button",{onClick:()=>g(I),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:K?`2px solid ${O(I)}`:"1px solid #d1d5db",background:K?O(I):"#fff",color:K?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[C(I)," ",A(I)," (",L,")"]},I)})]}),l.length===0&&u.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),r.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.map(I=>{const L=E(I.ressources);if(L.length===0&&b!=="tous")return null;const K=_.has(I.chapitreNom),U=b==="tous"?I.ressources:L;return r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:K?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[r.jsx("button",{onClick:()=>w(I.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:K?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.25rem",transform:K?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:I.chapitreNom}),r.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[I.ressources.length," ressource",I.ressources.length!==1?"s":""]})]})]})}),K&&r.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:U.map(G=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:V=>V.currentTarget.style.background="#eef2ff",onMouseLeave:V=>V.currentTarget.style.background="#f9fafb",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:C(G.type)}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:G.titre}),G.description&&r.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:G.description})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(G.type)},children:A(G.type)}),G.isPremium&&r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),G.dureeEstimee&&r.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",G.dureeEstimee," min"]})]})]},G.id))})]},I.chapitreNom)}),E(u).length>0&&r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:E(u).map(I=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:C(I.type)}),r.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:I.titre})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:O(I.type)},children:A(I.type)}),I.isPremium&&r.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},I.id))})]})]}),r.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:r.jsx(qe,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},wv=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],eR=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],tR=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],rR=()=>{const{currentUser:e}=lt(),t=nm(),n=yt(),[a,l]=y.useState("annuel"),[o,u]=y.useState(!1),[d,m]=y.useState(null),[p,h]=y.useState(null);t.state?.from;const v=()=>!e||!e.isPremium?!1:e.subscriptionEnd?(e.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e.subscriptionEnd))>new Date:!0,b=async()=>{if(!e){n("/connexion",{state:{from:"/premium"}});return}if(v()){m("Vous tes dj abonn Premium !");return}try{u(!0),m(null);const j=wv.find(A=>A.id===a);if(!j)throw new Error("Plan invalide");const S=await Lt(be(ie,"transactions"),{userId:e.uid,userEmail:e.email,planType:a,montant:j.prix,devise:"XOF",statut:"pending",dateTransaction:mt(),createdAt:mt()}),w={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${j.nom}`,item_price:j.prix,currency:"XOF",ref_command:S.id,success_url:`${window.location.origin}/premium/success?ref=${S.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${S.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:e.uid,planType:a,transactionId:S.id}),env:"test"},C=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:w.apiKey,API_SECRET:w.apiSecret},body:JSON.stringify({item_name:w.item_name,item_price:w.item_price,currency:w.currency,ref_command:w.ref_command,command_name:`Abonnement Premium ${j.nom} - ${e.email}`,env:w.env,ipn_url:w.ipn_url,success_url:w.success_url,cancel_url:w.cancel_url,custom_field:w.custom_field})})).json();if(C.success===1&&C.redirect_url)window.location.href=C.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const A=new Date,O=new Date(A);a==="mensuel"?O.setMonth(O.getMonth()+1):O.setFullYear(O.getFullYear()+1),await Ze(je(ie,"users",e.uid),{isPremium:!0,subscriptionEnd:O,subscriptionPlan:a,updatedAt:mt()}),await Ze(je(ie,"transactions",S.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:O,updatedAt:mt()}),n("/premium/success",{state:{plan:j.nom,montant:j.prix,expiration:O.toLocaleDateString("fr-FR")}})}}catch(j){console.error("Erreur paiement:",j),m("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{u(!1)}},g=j=>{h(p===j?null:j)},_=j=>j.toLocaleString("fr-FR")+" FCFA";if(v()){const j=e?.subscriptionEnd instanceof Date?e.subscriptionEnd:new Date(e?.subscriptionEnd||Date.now());return r.jsx("div",{className:"premium-page",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"premium-already",children:[r.jsx("span",{className:"premium-already__icon",children:""}),r.jsx("h1",{children:"Vous tes dj Premium !"}),r.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",r.jsx("strong",{children:j.toLocaleDateString("fr-FR")})]}),r.jsxs("div",{className:"premium-already__actions",children:[r.jsx(qe,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),r.jsx(qe,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return r.jsxs("div",{className:"premium-page",children:[r.jsx("section",{className:"premium-hero",children:r.jsxs("div",{className:"container",children:[r.jsx("span",{className:"premium-hero__badge",children:" Premium"}),r.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",r.jsx("span",{children:"PedaClic"})]}),r.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),r.jsx("section",{className:"premium-pricing",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),r.jsx("div",{className:"pricing-cards",children:wv.map(j=>r.jsxs("div",{className:`pricing-card ${a===j.id?"pricing-card--selected":""} ${j.popular?"pricing-card--popular":""}`,onClick:()=>l(j.id),children:[j.popular&&r.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),r.jsxs("div",{className:"pricing-card__header",children:[r.jsx("h3",{className:"pricing-card__name",children:j.nom}),r.jsx("p",{className:"pricing-card__duration",children:j.duree})]}),r.jsxs("div",{className:"pricing-card__price",children:[j.prixOriginal&&r.jsx("span",{className:"pricing-card__original",children:_(j.prixOriginal)}),r.jsx("span",{className:"pricing-card__amount",children:_(j.prix)}),j.id==="mensuel"&&r.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),j.economie&&r.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",j.economie]}),r.jsx("div",{className:"pricing-card__radio",children:r.jsx("span",{className:`radio-dot ${a===j.id?"radio-dot--active":""}`})})]},j.id))}),r.jsxs("div",{className:"pricing-cta",children:[d&&r.jsxs("div",{className:"pricing-error",children:[r.jsx("span",{children:""})," ",d]}),e?r.jsx("button",{className:"btn btn--premium btn--lg",onClick:b,disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):r.jsxs(r.Fragment,{children:["Payer ",_(wv.find(j=>j.id===a)?.prix||0)]})}):r.jsxs("div",{className:"pricing-login",children:[r.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),r.jsx(qe,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),r.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",r.jsx(qe,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),r.jsxs("div",{className:"payment-methods",children:[r.jsx("p",{children:"Paiement scuris par"}),r.jsxs("div",{className:"payment-methods__logos",children:[r.jsx("span",{className:"payment-logo",children:" Orange Money"}),r.jsx("span",{className:"payment-logo",children:" Wave"}),r.jsx("span",{className:"payment-logo",children:" Free Money"}),r.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),r.jsx("section",{className:"premium-features",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),r.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),r.jsx("div",{className:"features-grid",children:eR.map((j,S)=>r.jsxs("div",{className:"feature-card",children:[r.jsx("span",{className:"feature-card__icon",children:j.icone}),r.jsx("h3",{className:"feature-card__title",children:j.titre}),r.jsx("p",{className:"feature-card__description",children:j.description})]},S))})]})}),r.jsx("section",{className:"premium-comparison",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),r.jsxs("div",{className:"comparison-table",children:[r.jsxs("div",{className:"comparison-header",children:[r.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),r.jsx("div",{className:"comparison-free",children:"Gratuit"}),r.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((j,S)=>r.jsxs("div",{className:"comparison-row",children:[r.jsx("div",{className:"comparison-feature",children:j.feature}),r.jsx("div",{className:"comparison-free",children:j.free?r.jsx("span",{className:"check",children:""}):r.jsx("span",{className:"cross",children:""})}),r.jsx("div",{className:"comparison-premium",children:r.jsx("span",{className:"check check--premium",children:""})})]},S))]})]})}),r.jsx("section",{className:"premium-testimonials",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),r.jsxs("div",{className:"testimonials-grid",children:[r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),r.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),r.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),r.jsxs("div",{className:"testimonial-card",children:[r.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),r.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),r.jsxs("div",{className:"testimonial-card__author",children:[r.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),r.jsxs("div",{children:[r.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),r.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),r.jsx("section",{className:"premium-faq",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{className:"section-title",children:"Questions frquentes"}),r.jsx("div",{className:"faq-list",children:tR.map((j,S)=>r.jsxs("div",{className:`faq-item ${p===S?"faq-item--open":""}`,children:[r.jsxs("button",{className:"faq-item__question",onClick:()=>g(S),"aria-expanded":p===S,children:[r.jsx("span",{children:j.question}),r.jsx("span",{className:"faq-item__icon",children:p===S?"":"+"})]}),p===S&&r.jsx("div",{className:"faq-item__answer",children:r.jsx("p",{children:j.reponse})})]},S))})]})}),r.jsx("section",{className:"premium-cta-final",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{children:"Prt  russir vos examens ?"}),r.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),r.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},nR=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"},{id:"ebooks",label:"Bibliothque Ebooks",icon:"",href:"/admin/ebooks"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],vn=({children:e,currentPage:t="dashboard"})=>{const{currentUser:n,logout:a}=lt(),[l,o]=y.useState(!0),[u,d]=y.useState(!1),m=nm(),p=async()=>{try{d(!0),await a(),window.location.href="/connexion"}catch(g){console.error("Erreur lors de la dconnexion:",g),d(!1)}},h=()=>n?.displayName?n.displayName.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2):"AD",v=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},b=g=>g.href==="/admin"?m.pathname==="/admin"||m.pathname==="/admin/":m.pathname.startsWith(g.href);return r.jsxs("div",{className:"admin-layout",children:[r.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[r.jsx("header",{className:"admin-sidebar__header",children:r.jsxs(qe,{to:"/",className:"admin-sidebar__logo",children:[r.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),r.jsx("span",{children:"PedaClic"})]})}),r.jsx("nav",{className:"admin-sidebar__nav",children:nR.map((g,_)=>r.jsxs("div",{className:"admin-nav__section",children:[r.jsx("h3",{className:"admin-nav__title",children:g.title}),r.jsx("ul",{className:"admin-nav__list",children:g.items.map(j=>r.jsx("li",{className:"admin-nav__item",children:r.jsxs(qe,{to:j.href,className:`admin-nav__link ${b(j)?"admin-nav__link--active":""}`,children:[r.jsx("span",{className:"admin-nav__icon",children:j.icon}),r.jsx("span",{className:"admin-nav__label",children:j.label})]})},j.id))})]},_))}),r.jsx("footer",{className:"admin-sidebar__footer",children:r.jsxs("div",{className:"admin-user",children:[r.jsx("div",{className:"admin-user__avatar",children:h()}),r.jsxs("div",{className:"admin-user__info",children:[r.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),r.jsx("div",{className:"admin-user__role",children:v()})]}),r.jsx("button",{onClick:p,disabled:u,className:"admin-logout-btn",title:"Se dconnecter",children:u?"...":""})]})})]}),r.jsxs("main",{className:"admin-content",children:[r.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!l),"aria-label":"Toggle sidebar",children:""}),e]}),r.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Ai="chapitres",Cv=e=>{const t=e.data();return{id:e.id,disciplineId:t.disciplineId,numero:t.numero,titre:t.titre,description:t.description,objectifs:t.objectifs||[],dureeEstimee:t.dureeEstimee,isPremium:t.isPremium||!1,actif:t.actif!==!1,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()}},Ei={async getByDiscipline(e){try{const t=Re(be(ie,Ai),Ce("disciplineId","==",e),Je("numero","asc"));return(await De(t)).docs.map(Cv)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const e=Re(be(ie,Ai),Je("numero","asc"));return(await De(e)).docs.map(Cv)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getById(e){try{const t=je(ie,Ai,e),n=await It(t);return n.exists()?Cv(n):null}catch(t){throw console.error("Erreur lors de la rcupration du chapitre:",t),new Error("Impossible de rcuprer le chapitre")}},async create(e){try{return(await Lt(be(ie,Ai),{...e,actif:e.actif!==!1,createdAt:mt(),updatedAt:mt()})).id}catch(t){throw console.error("Erreur lors de la cration du chapitre:",t),new Error("Impossible de crer le chapitre")}},async update(e,t){try{const n=je(ie,Ai,e);await Ze(n,{...t,updatedAt:mt()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(e){try{const t=je(ie,Ai,e);await Cn(t)}catch(t){throw console.error("Erreur lors de la suppression du chapitre:",t),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(e){try{const t=await this.getByDiscipline(e),n=Sc(ie);t.forEach(a=>{const l=je(ie,Ai,a.id);n.delete(l)}),await n.commit()}catch(t){throw console.error("Erreur lors de la suppression des chapitres:",t),new Error("Impossible de supprimer les chapitres")}},async reorder(e,t){try{const n=Sc(ie);t.forEach((a,l)=>{const o=je(ie,Ai,a);n.update(o,{numero:l+1,updatedAt:mt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(e,t){await this.update(e,{actif:t})},async countByDiscipline(e){return(await this.getByDiscipline(e)).length},async getNextNumero(e){return await this.countByDiscipline(e)+1}},aR=()=>{const{currentUser:e}=lt(),t=yt(),[n,a]=y.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[l,o]=y.useState(!0),[u,d]=y.useState(null);return y.useEffect(()=>{(async()=>{try{o(!0),d(null);const[p,h,v,b,g]=await Promise.all([Qa.getAll(),Ei.getAll(),Aa.getStats(),De(be(ie,"quizzes")),De(be(ie,"quizzes_v2"))]);a({totalDisciplines:p.length,totalChapitres:h.length,totalRessources:v.total,ressourcesPremium:v.premium,ressourcesGratuites:v.gratuit,totalQuiz:b.size,totalQuizAvances:g.size,ressourcesParType:v.parType})}catch(p){console.error("Erreur lors du chargement des statistiques:",p),d("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),r.jsxs("div",{className:"admin-dashboard",children:[r.jsx("header",{className:"admin-page-header",children:r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),r.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",e?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:u})})]}),l?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/disciplines"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),r.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/chapitres"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),r.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalRessources}),r.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/ressources"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),r.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),r.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),r.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>t("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&t("/admin/quiz-avance"),children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),r.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),r.jsxs("section",{className:"content-card",children:[r.jsx("div",{className:"content-card__header",children:r.jsx("h2",{children:"Rpartition des ressources par type"})}),r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"resource-type-grid",children:[r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),r.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),r.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),r.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/ressources"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),r.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),r.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>t("/admin/quiz"),role:"button",tabIndex:0,children:[r.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),r.jsxs("div",{className:"resource-type-info",children:[r.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),r.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),r.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[r.jsx("div",{className:"content-card__header",children:r.jsx("h2",{children:"Actions rapides"})}),r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"quick-actions-grid",children:[r.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les disciplines"}),r.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),r.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les chapitres"}),r.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),r.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les ressources"}),r.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),r.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les quiz"}),r.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),r.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Quiz avancs"}),r.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),r.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[r.jsx("div",{className:"quick-action-icon",children:""}),r.jsxs("div",{className:"quick-action-content",children:[r.jsx("h3",{children:"Grer les utilisateurs"}),r.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),r.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},Te={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},Av={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},iR=()=>{const[e,t]=y.useState([]),[n,a]=y.useState(Av),[l,o]=y.useState(null),[u,d]=y.useState(!1),[m,p]=y.useState("all");y.useEffect(()=>{const E=Re(be(ie,"disciplines"),Je("nom")),C=gy(E,A=>{const O=A.docs.map(T=>({id:T.id,...T.data(),createdAt:T.data().createdAt?.toDate()||new Date,updatedAt:T.data().updatedAt?.toDate()||new Date}));t(O)});return()=>C()},[]);const h=y.useCallback(E=>{const C=u1(E)[0]?.value||"6eme";a(A=>({...A,niveau:E,classe:C,coefficient:E==="formation_libre"?void 0:A.coefficient}))},[]),v=async E=>{if(E.preventDefault(),!!n.nom.trim()){d(!0);try{const C={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:Le.now()};l?await Ze(je(ie,"disciplines",l),C):await Lt(be(ie,"disciplines"),{...C,createdAt:Le.now()}),a(Av),o(null)}catch(C){console.error("Erreur lors de la sauvegarde :",C),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{d(!1)}}},b=E=>{a({nom:E.nom,niveau:E.niveau,classe:E.classe,ordre:E.ordre,coefficient:E.coefficient,couleur:E.couleur||"",icone:E.icone||"",description:E.description||""}),o(E.id)},g=async(E,C)=>{if(window.confirm(`Supprimer la discipline "${C}" ? Cette action est irrversible.`))try{await Cn(je(ie,"disciplines",E))}catch(A){console.error("Erreur lors de la suppression :",A)}},_=()=>{a(Av),o(null)},j=u1(n.niveau),S=m==="all"?e:e.filter(E=>E.niveau===m),w=E=>({...Te.badge,...E==="college"?Te.badgeCollege:{},...E==="lycee"?Te.badgeLycee:{},...E==="formation_libre"?Te.badgeFormationLibre:{}});return r.jsxs("div",{style:Te.container,children:[r.jsx("h2",{style:Te.title,children:" Gestion des Disciplines"}),r.jsxs("form",{style:Te.form,onSubmit:v,children:[r.jsx("h3",{style:Te.formTitle,children:l?" Modifier la discipline":" Ajouter une discipline"}),r.jsxs("div",{style:Te.formGrid,children:[r.jsxs("div",{style:Te.fieldGroup,children:[r.jsx("label",{style:Te.label,children:"Nom de la discipline"}),r.jsx("input",{type:"text",style:Te.input,value:n.nom,onChange:E=>a({...n,nom:E.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),r.jsxs("div",{style:Te.fieldGroup,children:[r.jsx("label",{style:Te.label,children:"Niveau"}),r.jsxs("select",{style:Te.select,value:n.niveau,onChange:E=>h(E.target.value),children:[r.jsx("option",{value:"college",children:" Collge"}),r.jsx("option",{value:"lycee",children:" Lyce"}),r.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),r.jsxs("div",{style:Te.fieldGroup,children:[r.jsx("label",{style:Te.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),r.jsx("select",{style:Te.select,value:n.classe,onChange:E=>a({...n,classe:E.target.value}),children:j.map(({value:E,label:C})=>r.jsx("option",{value:E,children:C},E))})]}),r.jsxs("div",{style:Te.fieldGroup,children:[r.jsx("label",{style:Te.label,children:"Ordre d'affichage"}),r.jsx("input",{type:"number",style:Te.input,value:n.ordre,onChange:E=>a({...n,ordre:Number(E.target.value)}),placeholder:"Ex : 1",min:"0"})]}),r.jsxs("div",{style:Te.fieldGroup,children:[r.jsxs("label",{style:Te.label,children:["Coefficient",n.niveau==="formation_libre"&&r.jsx("span",{style:Te.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"number",style:Te.input,value:n.coefficient??"",onChange:E=>a({...n,coefficient:E.target.value?Number(E.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),r.jsxs("div",{style:Te.fieldGroup,children:[r.jsxs("label",{style:Te.label,children:["Couleur",r.jsx("span",{style:Te.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"color",style:{...Te.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:E=>a({...n,couleur:E.target.value})})]})]}),r.jsxs("div",{style:{...Te.fieldGroup,marginBottom:"20px"},children:[r.jsxs("label",{style:Te.label,children:["Description",r.jsx("span",{style:Te.labelOptional,children:"(optionnel)"})]}),r.jsx("textarea",{style:Te.textarea,value:n.description,onChange:E=>a({...n,description:E.target.value}),placeholder:"Brve description de la discipline..."})]}),r.jsxs("div",{style:{...Te.fieldGroup,marginBottom:"20px"},children:[r.jsxs("label",{style:Te.label,children:["Icne (emoji)",r.jsx("span",{style:Te.labelOptional,children:"(optionnel)"})]}),r.jsx("input",{type:"text",style:{...Te.input,maxWidth:"120px"},value:n.icone,onChange:E=>a({...n,icone:E.target.value}),placeholder:""})]}),r.jsxs("div",{children:[r.jsx("button",{type:"submit",style:Te.btnPrimary,disabled:u,children:u?"Enregistrement...":l?"Mettre  jour":"Ajouter la discipline"}),l&&r.jsx("button",{type:"button",style:Te.btnSecondary,onClick:_,children:"Annuler"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{style:Te.formTitle,children:[" Disciplines existantes (",S.length,")"]}),r.jsxs("div",{style:Te.tabs,children:[r.jsx("button",{style:{...Te.tab,...m==="all"?Te.tabActive:{}},onClick:()=>p("all"),children:"Toutes"}),r.jsx("button",{style:{...Te.tab,...m==="college"?Te.tabActive:{}},onClick:()=>p("college"),children:" Collge"}),r.jsx("button",{style:{...Te.tab,...m==="lycee"?Te.tabActive:{}},onClick:()=>p("lycee"),children:" Lyce"}),r.jsx("button",{style:{...Te.tab,...m==="formation_libre"?Te.tabActive:{}},onClick:()=>p("formation_libre"),children:" Formation libre"})]}),S.length===0?r.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):S.map(E=>r.jsxs("div",{style:Te.card,children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[E.icone&&r.jsx("span",{style:{fontSize:"1.2rem"},children:E.icone}),r.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:E.nom}),r.jsx("span",{style:w(E.niveau),children:L2[E.niveau]})]}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[E.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",$2(E.classe),E.coefficient!==void 0&&r.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",E.coefficient]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r.jsx("button",{style:Te.btnEdit,onClick:()=>b(E),children:"Modifier"}),r.jsx("button",{style:Te.btnDanger,onClick:()=>g(E.id,E.nom),children:"Supprimer"})]})]},E.id))]})]})},p1={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},sR=()=>{const[e,t]=y.useState([]),[n,a]=y.useState([]),[l,o]=y.useState(""),[u,d]=y.useState(!0),[m,p]=y.useState(!1),[h,v]=y.useState(!1),[b,g]=y.useState(null),[_,j]=y.useState(null),[S,w]=y.useState(null),[E,C]=y.useState(!1),[A,O]=y.useState(!1),[T,P]=y.useState(null),[R,I]=y.useState(null),[L,K]=y.useState({...p1,disciplineId:""}),[U,G]=y.useState({}),[V,M]=y.useState(""),k=y.useCallback(async()=>{try{d(!0);const F=await Qa.getAll();t(F),F.length>0&&!l&&o(F[0].id)}catch(F){console.error("Erreur lors du chargement des disciplines:",F),j("Impossible de charger les disciplines.")}finally{d(!1)}},[l]),J=y.useCallback(async()=>{if(!l){a([]);return}try{p(!0);const F=await Ei.getByDiscipline(l);a(F)}catch(F){console.error("Erreur lors du chargement des chapitres:",F),j("Impossible de charger les chapitres.")}finally{p(!1)}},[l]);y.useEffect(()=>{k()},[k]),y.useEffect(()=>{J()},[J]);const Q=()=>{const F={};return L.disciplineId||(F.disciplineId="Veuillez slectionner une discipline"),L.titre.trim()?L.titre.length<3&&(F.titre="Le titre doit contenir au moins 3 caractres"):F.titre="Le titre du chapitre est requis",L.numero<1&&(F.numero="Le numro doit tre suprieur  0"),G(F),Object.keys(F).length===0},B=F=>{o(F),j(null)},q=async()=>{const F=await Ei.getNextNumero(l);P(null),K({...p1,disciplineId:l,numero:F}),G({}),M(""),C(!0)},fe=F=>{P(F),K({disciplineId:F.disciplineId,numero:F.numero,titre:F.titre,description:F.description,objectifs:F.objectifs||[],dureeEstimee:F.dureeEstimee,isPremium:F.isPremium,actif:F.actif}),G({}),M(""),C(!0)},te=F=>{I(F),O(!0)},ue=()=>{C(!1),O(!1),P(null),I(null),G({}),M("")},he=F=>{const{name:oe,value:X,type:ye}=F.target,Ie=F.target.checked;K($e=>({...$e,[oe]:ye==="checkbox"?Ie:ye==="number"?Number(X):X})),U[oe]&&G($e=>({...$e,[oe]:void 0}))},xe=()=>{V.trim()&&(K(F=>({...F,objectifs:[...F.objectifs||[],V.trim()]})),M(""))},H=F=>{K(oe=>({...oe,objectifs:(oe.objectifs||[]).filter((X,ye)=>ye!==F)}))},pe=async F=>{if(F.preventDefault(),!!Q())try{v(!0),j(null),T?(await Ei.update(T.id,L),w("Chapitre modifi avec succs !")):(await Ei.create(L),w("Chapitre cr avec succs !")),ue(),await J(),setTimeout(()=>w(null),3e3)}catch(oe){console.error("Erreur lors de la sauvegarde:",oe),j("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{v(!1)}},Ee=async()=>{if(R)try{g(R.id),await Ei.delete(R.id),w("Chapitre supprim avec succs !"),ue(),await J(),setTimeout(()=>w(null),3e3)}catch(F){console.error("Erreur lors de la suppression:",F),j("Erreur lors de la suppression. Veuillez ressayer.")}finally{g(null)}},le=async F=>{try{await Ei.toggleActive(F.id,!F.actif),await J(),w(F.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>w(null),2e3)}catch{j("Erreur lors de la mise  jour")}},W=F=>{const oe=e.find(X=>X.id===F);return oe?oe.nom:"Non trouve"};return r.jsxs("div",{className:"chapitre-manager",children:[r.jsxs("header",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsxs("button",{onClick:q,className:"btn btn--primary",disabled:!l||u,children:[r.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),_&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:_})}),r.jsx("button",{onClick:()=>j(null),className:"alert__close",children:""})]}),S&&r.jsxs("div",{className:"alert alert--success",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:S})})]}),r.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"discipline-selector",children:[r.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),u?r.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?r.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",r.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):r.jsx("div",{className:"discipline-tabs",children:e.map(F=>r.jsxs("button",{className:`discipline-tab ${l===F.id?"discipline-tab--active":""}`,onClick:()=>B(F.id),style:{"--discipline-color":F.couleur||"#2563eb"},children:[r.jsx("span",{className:"discipline-tab__icon",children:F.icone||""}),r.jsx("span",{className:"discipline-tab__name",children:F.nom}),r.jsx("span",{className:"discipline-tab__class",children:F.classe})]},F.id))})]})})}),r.jsxs("div",{className:"admin-table-container",children:[r.jsx("div",{className:"admin-table-header",children:r.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${W(l)}`,n.length>0&&` (${n.length})`]})}),m?r.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des chapitres..."})]}):l?n.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),r.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),r.jsx("button",{onClick:q,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):r.jsx("div",{className:"chapitres-list",children:n.map(F=>r.jsxs("div",{className:`chapitre-card ${F.actif?"":"chapitre-card--inactive"}`,children:[r.jsx("div",{className:"chapitre-card__number",children:F.numero}),r.jsxs("div",{className:"chapitre-card__content",children:[r.jsxs("h3",{className:"chapitre-card__title",children:[F.titre,F.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"}),!F.actif&&r.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),F.description&&r.jsx("p",{className:"chapitre-card__description",children:F.description}),r.jsxs("div",{className:"chapitre-card__meta",children:[F.dureeEstimee&&r.jsxs("span",{children:[" ",F.dureeEstimee,"h estime"]}),F.objectifs&&F.objectifs.length>0&&r.jsxs("span",{children:[" ",F.objectifs.length," objectif(s)"]})]})]}),r.jsxs("div",{className:"chapitre-card__actions",children:[r.jsx("button",{onClick:()=>le(F),className:`table-action-btn ${F.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:F.actif?"Dsactiver":"Activer",children:F.actif?"":""}),r.jsx("button",{onClick:()=>fe(F),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),r.jsx("button",{onClick:()=>te(F),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:b===F.id,children:b===F.id?"":""})]})]},F.id))}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),r.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),E&&r.jsx("div",{className:"modal-overlay",onClick:ue,children:r.jsxs("div",{className:"modal modal--lg",onClick:F=>F.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:T?"Modifier le chapitre":"Nouveau chapitre"}),r.jsx("button",{onClick:ue,className:"modal__close",children:""})]}),r.jsxs("form",{onSubmit:pe,children:[r.jsxs("div",{className:"modal__body",children:[!T&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),r.jsxs("select",{name:"disciplineId",className:`form-select ${U.disciplineId?"form-select--error":""}`,value:L.disciplineId,onChange:he,children:[r.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(F=>r.jsxs("option",{value:F.id,children:[F.icone," ",F.nom," (",F.classe,")"]},F.id))]}),U.disciplineId&&r.jsx("span",{className:"form-error",children:U.disciplineId})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[r.jsx("label",{className:"form-label form-label--required",children:"N"}),r.jsx("input",{type:"number",name:"numero",className:`form-input ${U.numero?"form-input--error":""}`,min:"1",value:L.numero,onChange:he}),U.numero&&r.jsx("span",{className:"form-error",children:U.numero})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),r.jsx("input",{type:"text",name:"titre",className:`form-input ${U.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:L.titre,onChange:he}),U.titre&&r.jsx("span",{className:"form-error",children:U.titre})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:L.description||"",onChange:he})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),r.jsxs("div",{className:"objectifs-input",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:V,onChange:F=>M(F.target.value),onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),xe())}),r.jsx("button",{type:"button",onClick:xe,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),L.objectifs&&L.objectifs.length>0&&r.jsx("ul",{className:"objectifs-list",children:L.objectifs.map((F,oe)=>r.jsxs("li",{className:"objectif-item",children:[r.jsxs("span",{children:[" ",F]}),r.jsx("button",{type:"button",onClick:()=>H(oe),className:"objectif-remove",children:""})]},oe))})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),r.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:L.dureeEstimee||"",onChange:he})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Options"}),r.jsxs("div",{className:"form-options",children:[r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"isPremium",checked:L.isPremium,onChange:he}),r.jsx("span",{children:"Contenu Premium "})]}),r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"actif",checked:L.actif!==!1,onChange:he}),r.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{type:"button",onClick:ue,className:"btn btn--outline",disabled:h,children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn btn--primary",disabled:h,children:h?"Enregistrement...":T?"Mettre  jour":"Crer le chapitre"})]})]})]})}),A&&R&&r.jsx("div",{className:"modal-overlay",onClick:ue,children:r.jsxs("div",{className:"modal",onClick:F=>F.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),r.jsx("button",{onClick:ue,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[r.jsxs("p",{children:["Supprimer le chapitre ",r.jsxs("strong",{children:[R.numero,". ",R.titre]})," ?"]}),r.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{onClick:ue,className:"btn btn--outline",children:"Annuler"}),r.jsx("button",{onClick:Ee,className:"btn btn--danger",disabled:b!==null,children:b?"Suppression...":"Supprimer"})]})]})}),r.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},Nd=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],_d={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},Ev=50,h1={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},lR=()=>{const{currentUser:e}=lt(),[t,n]=y.useState([]),[a,l]=y.useState([]),[o,u]=y.useState([]),[d,m]=y.useState([]),[p,h]=y.useState(""),[v,b]=y.useState(""),[g,_]=y.useState(""),[j,S]=y.useState(""),[w,E]=y.useState(""),[C,A]=y.useState(!0),[O,T]=y.useState(!1),[P,R]=y.useState(!1),[I,L]=y.useState(!1),[K,U]=y.useState(null),[G,V]=y.useState(!1),[M,k]=y.useState(0),[J,Q]=y.useState(null),[B,q]=y.useState(null),[fe,te]=y.useState(!1),[ue,he]=y.useState(!1),[xe,H]=y.useState(!1),[pe,Ee]=y.useState(null),[le,W]=y.useState(null),[F,oe]=y.useState(null),[X,ye]=y.useState({...h1,disciplineId:""}),[Ie,$e]=y.useState({}),[Ve,Yt]=y.useState(null),[zn,rn]=y.useState(null),sa=y.useRef(null),[de,Ae]=y.useState(""),ke=y.useCallback(async()=>{try{A(!0);const ee=await Qa.getAll();n(ee),ee.length>0&&!p&&h(ee[0].id)}catch(ee){console.error("Erreur lors du chargement des disciplines:",ee),Q("Impossible de charger les disciplines.")}finally{A(!1)}},[p]),Be=y.useCallback(async()=>{if(!p){l([]);return}try{T(!0);const ee=await Ei.getByDiscipline(p);l(ee)}catch(ee){console.error("Erreur lors du chargement des chapitres:",ee)}finally{T(!1)}},[p]),St=y.useCallback(async()=>{if(!p){u([]),m([]);return}try{R(!0);const ee=await Aa.getByDiscipline(p);u(ee),m(ee)}catch(ee){console.error("Erreur lors du chargement des ressources:",ee),Q("Impossible de charger les ressources.")}finally{R(!1)}},[p]);y.useEffect(()=>{ke()},[ke]),y.useEffect(()=>{Be()},[Be]),y.useEffect(()=>{St()},[St]),y.useEffect(()=>{let ee=[...o];if(v&&(ee=ee.filter(Me=>Me.chapitre===v)),g&&(ee=ee.filter(Me=>Me.type===g)),j==="premium"?ee=ee.filter(Me=>Me.isPremium):j==="free"&&(ee=ee.filter(Me=>!Me.isPremium)),w){const Me=w.toLowerCase();ee=ee.filter(ht=>ht.titre.toLowerCase().includes(Me)||ht.description?.toLowerCase().includes(Me)||ht.tags?.some(yr=>yr.toLowerCase().includes(Me)))}m(ee)},[o,v,g,j,w]);const gr=()=>{const ee={};if(X.disciplineId||(ee.disciplineId="Veuillez slectionner une discipline"),X.titre.trim()?X.titre.length<3&&(ee.titre="Le titre doit contenir au moins 3 caractres"):ee.titre="Le titre est requis",X.type||(ee.type="Veuillez slectionner un type de ressource"),Ve){const Me="."+Ve.name.split(".").pop()?.toLowerCase(),ht=_d[X.type];ht.includes(Me)||(ee.fichier=`Extension non autorise. Extensions acceptes : ${ht.join(", ")}`),Ve.size/(1024*1024)>Ev&&(ee.fichier=`Le fichier est trop volumineux (max ${Ev} Mo)`)}return $e(ee),Object.keys(ee).length===0},Un=ee=>{h(ee),b(""),Q(null)},Us=()=>{Ee(null),ye({...h1,disciplineId:p}),$e({}),Yt(null),rn(null),Ae(""),te(!0)},nn=ee=>{Ee(ee),ye({disciplineId:ee.disciplineId,titre:ee.titre,type:ee.type,description:ee.description,contenu:ee.contenu,chapitre:ee.chapitre||"",ordre:ee.ordre,isPremium:ee.isPremium,actif:ee.actif,tags:ee.tags||[],duree:ee.duree,urlExterne:ee.urlExterne||""}),$e({}),Yt(null),rn(ee.fichierURL||null),Ae(""),te(!0)},ri=ee=>{oe(ee),H(!0)},ap=ee=>{W(ee),he(!0)},xr=()=>{te(!1),he(!1),H(!1),Ee(null),W(null),oe(null),$e({}),Yt(null),rn(null),Ae("")},bt=ee=>{const{name:Me,value:ht,type:yr}=ee.target,lo=ee.target.checked;ye(Qi=>({...Qi,[Me]:yr==="checkbox"?lo:yr==="number"?Number(ht):ht})),Ie[Me]&&$e(Qi=>({...Qi,[Me]:void 0}))},Fn=ee=>{const Me=ee.target.files?.[0];if(Me)if(Yt(Me),$e(ht=>({...ht,fichier:void 0})),Me.type.startsWith("image/")||Me.type.startsWith("video/")){const ht=new FileReader;ht.onloadend=()=>{rn(ht.result)},ht.readAsDataURL(Me)}else rn(null)},_r=()=>{Yt(null),rn(null),sa.current&&(sa.current.value="")},ou=()=>{de.trim()&&!X.tags?.includes(de.trim())&&(ye(ee=>({...ee,tags:[...ee.tags||[],de.trim()]})),Ae(""))},ip=ee=>{ye(Me=>({...Me,tags:(Me.tags||[]).filter((ht,yr)=>yr!==ee)}))},sp=async ee=>{if(ee.preventDefault(),!!gr())try{L(!0),Q(null);let Me=pe?.fichierURL,ht=pe?.fichierNom;if(Ve){V(!0);const lo=pe?.id||`temp_${Date.now()}`;Me=await Aa.uploadFile(Ve,lo),ht=Ve?.name||"fichier",V(!1)}const yr={...X,fichierURL:Me,fichierNom:ht};pe?(await Aa.update(pe.id,yr),q("Ressource modifie avec succs !")):(await Aa.create(yr,"admin"),q("Ressource cre avec succs !")),xr(),await St(),setTimeout(()=>q(null),3e3)}catch(Me){console.error("Erreur lors de la sauvegarde:",Me),Q("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{L(!1),V(!1),k(0)}},Fs=async()=>{if(le)try{U(le.id),le.fichierURL&&await Aa.deleteFile(le.fichierURL),await Aa.delete(le.id),q("Ressource supprime avec succs !"),xr(),await St(),setTimeout(()=>q(null),3e3)}catch(ee){console.error("Erreur lors de la suppression:",ee),Q("Erreur lors de la suppression. Veuillez ressayer.")}finally{U(null)}},Gs=async ee=>{try{await Aa.togglePremium(ee.id,!ee.isPremium),await St(),q(ee.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>q(null),2e3)}catch{Q("Erreur lors de la mise  jour")}},Hs=ee=>{const Me=t.find(ht=>ht.id===ee);return Me?Me.nom:"Non trouve"},la=ee=>{const Me=a.find(ht=>ht.id===ee);return Me?`${Me.numero}. ${Me.titre}`:""},Gn=ee=>Nd.find(Me=>Me.value===ee)||Nd[0],Hi=ee=>ee<1024?ee+" o":ee<1024*1024?(ee/1024).toFixed(1)+" Ko":(ee/(1024*1024)).toFixed(1)+" Mo";return r.jsxs("div",{className:"resource-manager",children:[r.jsxs("header",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsxs("button",{onClick:Us,className:"btn btn--primary",disabled:!p||C,children:[r.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),J&&r.jsxs("div",{className:"alert alert--error",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:J})}),r.jsx("button",{onClick:()=>Q(null),className:"alert__close",children:""})]}),B&&r.jsxs("div",{className:"alert alert--success",children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:B})})]}),r.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:r.jsx("div",{className:"content-card__body",children:r.jsxs("div",{className:"discipline-selector",children:[r.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),C?r.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?r.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",r.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):r.jsx("div",{className:"discipline-tabs",children:t.map(ee=>r.jsxs("button",{className:`discipline-tab ${p===ee.id?"discipline-tab--active":""}`,onClick:()=>Un(ee.id),style:{"--discipline-color":ee.couleur||"#2563eb"},children:[r.jsx("span",{className:"discipline-tab__icon",children:ee.icone||""}),r.jsx("span",{className:"discipline-tab__name",children:ee.nom}),r.jsx("span",{className:"discipline-tab__class",children:ee.classe})]},ee.id))})]})})}),r.jsxs("div",{className:"admin-table-container",children:[r.jsxs("div",{className:"admin-table-header",children:[r.jsxs("h2",{className:"admin-table-title",children:["Ressources ",p&&`- ${Hs(p)}`,d.length>0&&` (${d.length})`]}),r.jsxs("div",{className:"admin-table-actions",children:[r.jsxs("div",{className:"search-input",children:[r.jsx("span",{className:"search-input__icon",children:""}),r.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:w,onChange:ee=>E(ee.target.value)})]}),r.jsxs("select",{className:"form-select form-select--sm",value:v,onChange:ee=>b(ee.target.value),disabled:O||a.length===0,children:[r.jsx("option",{value:"",children:"Tous les chapitres"}),a.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.numero,". ",ee.titre]},ee.id))]}),r.jsxs("select",{className:"form-select form-select--sm",value:g,onChange:ee=>_(ee.target.value),children:[r.jsx("option",{value:"",children:"Tous les types"}),Nd.map(ee=>r.jsxs("option",{value:ee.value,children:[ee.icon," ",ee.label]},ee.value))]}),r.jsxs("select",{className:"form-select form-select--sm",value:j,onChange:ee=>S(ee.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"premium",children:" Premium"}),r.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),P?r.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des ressources..."})]}):p?d.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),r.jsx("p",{className:"empty-state__message",children:w||g||j||v?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!w&&!g&&!j&&!v&&r.jsx("button",{onClick:Us,className:"btn btn--primary",children:"Crer la premire ressource"})]}):r.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:d.map(ee=>{const Me=Gn(ee.type);return r.jsxs("div",{className:"resource-item",children:[r.jsx("div",{className:`resource-item__icon resource-item__icon--${ee.type}`,style:{backgroundColor:`${Me.color}15`,color:Me.color},children:Me.icon}),r.jsxs("div",{className:"resource-item__content",children:[r.jsxs("div",{className:"resource-item__title",children:[ee.titre,ee.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"}),!ee.actif&&r.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),r.jsxs("div",{className:"resource-item__meta",children:[r.jsx("span",{children:Me.label}),ee.chapitre&&r.jsxs("span",{children:[" ",la(ee.chapitre)]}),ee.duree&&r.jsxs("span",{children:[" ",ee.duree," min"]}),ee.fichierNom&&r.jsxs("span",{children:[" ",ee.fichierNom]}),ee.tags&&ee.tags.length>0&&r.jsxs("span",{children:[" ",ee.tags.join(", ")]})]})]}),r.jsxs("div",{className:"resource-item__actions",children:[r.jsx("button",{onClick:()=>Gs(ee),className:`table-action-btn ${ee.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:ee.isPremium?"Passer en gratuit":"Passer en Premium",children:ee.isPremium?"":""}),(ee.fichierURL||ee.urlExterne)&&r.jsx("button",{onClick:()=>ri(ee),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),r.jsx("button",{onClick:()=>nn(ee),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),r.jsx("button",{onClick:()=>ap(ee),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:K===ee.id,children:K===ee.id?"":""})]})]},ee.id)})}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:""}),r.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),r.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),fe&&r.jsx("div",{className:"modal-overlay",onClick:xr,children:r.jsxs("div",{className:"modal modal--xl",onClick:ee=>ee.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:pe?"Modifier la ressource":"Nouvelle ressource"}),r.jsx("button",{onClick:xr,className:"modal__close",children:""})]}),r.jsxs("form",{onSubmit:sp,children:[r.jsxs("div",{className:"modal__body",children:[!pe&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),r.jsxs("select",{name:"disciplineId",className:`form-select ${Ie.disciplineId?"form-select--error":""}`,value:X.disciplineId,onChange:bt,children:[r.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.icone," ",ee.nom," (",ee.classe,")"]},ee.id))]}),Ie.disciplineId&&r.jsx("span",{className:"form-error",children:Ie.disciplineId})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsx("label",{className:"form-label form-label--required",children:"Titre"}),r.jsx("input",{type:"text",name:"titre",className:`form-input ${Ie.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:X.titre,onChange:bt}),Ie.titre&&r.jsx("span",{className:"form-error",children:Ie.titre})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{className:"form-label form-label--required",children:"Type"}),r.jsx("select",{name:"type",className:`form-select ${Ie.type?"form-select--error":""}`,value:X.type,onChange:bt,children:Nd.map(ee=>r.jsxs("option",{value:ee.value,children:[ee.icon," ",ee.label]},ee.value))}),Ie.type&&r.jsx("span",{className:"form-error",children:Ie.type})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),r.jsxs("select",{name:"chapitreId",className:"form-select",value:X.chapitre||"",onChange:bt,disabled:O,children:[r.jsx("option",{value:"",children:"Aucun chapitre"}),a.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.numero,". ",ee.titre]},ee.id))]})]}),r.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[r.jsx("label",{className:"form-label",children:"Ordre"}),r.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:X.ordre,onChange:bt})]}),r.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[r.jsx("label",{className:"form-label",children:"Dure (min)"}),r.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:X.duree||"",onChange:bt})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:X.description||"",onChange:bt})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Fichier",r.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",_d[X.type].join(", ")," - max ",Ev," Mo)"]})]}),r.jsxs("div",{className:"file-upload",children:[r.jsx("input",{ref:sa,type:"file",accept:_d[X.type].join(","),onChange:Fn,className:"file-upload__input",id:"file-input"}),!Ve&&!zn?r.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[r.jsx("div",{className:"file-upload__icon",children:""}),r.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),r.jsx("p",{className:"file-upload__hint",children:_d[X.type].join(", ")})]}):r.jsxs("div",{className:"file-upload__preview",children:[Ve?.type.startsWith("image/")&&zn&&r.jsx("img",{src:zn,alt:"Aperu",className:"file-preview__image"}),Ve?.type.startsWith("video/")&&zn&&r.jsx("video",{src:zn,controls:!0,className:"file-preview__video"}),!Ve?.type.startsWith("image/")&&!Ve?.type.startsWith("video/")&&r.jsx("div",{className:"file-preview__document",children:r.jsx("span",{className:"file-preview__icon",children:Gn(X.type).icon})}),r.jsxs("div",{className:"file-preview__info",children:[r.jsx("p",{className:"file-preview__name",children:Ve?.name||pe?.fichierNom}),Ve&&r.jsx("p",{className:"file-preview__size",children:Hi(Ve.size)})]}),r.jsx("button",{type:"button",onClick:_r,className:"file-preview__remove",children:""})]})]}),Ie.fichier&&r.jsx("span",{className:"form-error",children:Ie.fichier}),G&&r.jsxs("div",{className:"upload-progress",children:[r.jsx("div",{className:"upload-progress__bar",style:{width:`${M}%`}}),r.jsxs("span",{className:"upload-progress__text",children:[M,"%"]})]})]}),X.type==="video"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),r.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:X.urlExterne||"",onChange:bt}),r.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),X.type==="cours"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contenu du cours"}),r.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:X.contenu||"",onChange:bt}),r.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Tags"}),r.jsxs("div",{className:"tags-input",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:de,onChange:ee=>Ae(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&(ee.preventDefault(),ou())}),r.jsx("button",{type:"button",onClick:ou,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),X.tags&&X.tags.length>0&&r.jsx("div",{className:"tags-list",children:X.tags.map((ee,Me)=>r.jsxs("span",{className:"tag",children:[ee,r.jsx("button",{type:"button",onClick:()=>ip(Me),className:"tag__remove",children:""})]},Me))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Options"}),r.jsxs("div",{className:"form-options",children:[r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"isPremium",checked:X.isPremium,onChange:bt}),r.jsx("span",{children:"Contenu Premium "})]}),r.jsxs("label",{className:"form-checkbox",children:[r.jsx("input",{type:"checkbox",name:"actif",checked:X.actif!==!1,onChange:bt}),r.jsx("span",{children:"Ressource active"})]})]})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{type:"button",onClick:xr,className:"btn btn--outline",disabled:I||G,children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn btn--primary",disabled:I||G,children:I||G?G?`Upload ${M}%...`:"Enregistrement...":pe?"Mettre  jour":"Crer la ressource"})]})]})]})}),xe&&F&&r.jsx("div",{className:"modal-overlay",onClick:xr,children:r.jsxs("div",{className:"modal modal--xl",onClick:ee=>ee.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsxs("h2",{className:"modal__title",children:[Gn(F.type).icon," ",F.titre]}),r.jsx("button",{onClick:xr,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[F.type==="video"&&F.urlExterne?r.jsx("div",{className:"preview-video",children:r.jsx("iframe",{src:F.urlExterne.replace("watch?v=","embed/"),title:F.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):F.fichierURL?r.jsx("div",{className:"preview-file",children:F.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?r.jsx("img",{src:F.fichierURL,alt:F.titre}):F.fichierURL.match(/\.(mp4|webm)$/i)?r.jsx("video",{src:F.fichierURL,controls:!0}):F.fichierURL.match(/\.pdf$/i)?r.jsx("iframe",{src:F.fichierURL,title:F.titre}):r.jsxs("div",{className:"preview-download",children:[r.jsx("span",{className:"preview-download__icon",children:Gn(F.type).icon}),r.jsx("p",{children:F.fichierNom}),r.jsx("a",{href:F.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):F.contenu?r.jsx("div",{className:"preview-content",children:r.jsx("p",{children:F.contenu})}):r.jsx("div",{className:"preview-empty",children:r.jsx("p",{children:"Aucun contenu  prvisualiser"})}),r.jsxs("div",{className:"preview-info",children:[F.description&&r.jsx("p",{className:"preview-description",children:F.description}),r.jsxs("div",{className:"preview-meta",children:[r.jsxs("span",{children:["Type : ",Gn(F.type).label]}),F.duree&&r.jsxs("span",{children:["Dure : ",F.duree," min"]}),F.isPremium&&r.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),ue&&le&&r.jsx("div",{className:"modal-overlay",onClick:xr,children:r.jsxs("div",{className:"modal",onClick:ee=>ee.stopPropagation(),children:[r.jsxs("div",{className:"modal__header",children:[r.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),r.jsx("button",{onClick:xr,className:"modal__close",children:""})]}),r.jsxs("div",{className:"modal__body",children:[r.jsxs("p",{children:["Supprimer la ressource ",r.jsx("strong",{children:le.titre})," ?"]}),le.fichierURL&&r.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[r.jsx("span",{className:"alert__icon",children:""}),r.jsx("div",{className:"alert__content",children:r.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),r.jsxs("div",{className:"modal__footer",children:[r.jsx("button",{onClick:xr,className:"btn btn--outline",children:"Annuler"}),r.jsx("button",{onClick:Fs,className:"btn btn--danger",disabled:K!==null,children:K?"Suppression...":"Supprimer"})]})]})}),r.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},B2=be(ie,"quizzes"),U2=async e=>{try{let t=Re(B2,Je("titre","asc"));e?.disciplineId;let a=(await De(t)).docs.map(l=>({id:l.id,...l.data()}));return e?.isPremium,e?.difficulte,a}catch(t){throw console.error("Erreur lors de la rcupration des quiz :",t),t}},oR=async e=>{try{const t=await It(je(ie,"quizzes",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){throw console.error("Erreur lors de la rcupration du quiz :",t),t}},cR=async e=>{try{return(await Lt(B2,{...e,createdAt:Le.now(),updatedAt:Le.now()})).id}catch(t){throw console.error("Erreur lors de la cration du quiz :",t),t}},uR=async(e,t)=>{try{await Ze(je(ie,"quizzes",e),{...t,updatedAt:Le.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},dR=async e=>{try{await Cn(je(ie,"quizzes",e))}catch(t){throw console.error("Erreur lors de la suppression du quiz :",t),t}},fR=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,v1=()=>({id:fR(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),g1=e=>{const t=e.questions||[],n=t.reduce((l,o)=>l+(o.points||1),0),a={facile:t.filter(l=>l.difficulte==="facile").length,moyen:t.filter(l=>l.difficulte==="moyen").length,difficile:t.filter(l=>l.difficulte==="difficile").length};return{nombreQuestions:t.length,totalPoints:n,parDifficulte:a,duree:e.duree||0}},mR=()=>{const[e,t]=y.useState([]),[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,p]=y.useState(null),[h,v]=y.useState(""),[b,g]=y.useState(""),[_,j]=y.useState(""),[S,w]=y.useState(""),[E,C]=y.useState(!1),[A,O]=y.useState("list"),[T,P]=y.useState(null),[R,I]=y.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[L,K]=y.useState(null),[U,G]=y.useState(!1),[V,M]=y.useState(null),[k,J]=y.useState(null),[Q,B]=y.useState({}),[q,fe]=y.useState(!1),te=y.useCallback(async()=>{o(!0),d(null);try{const[de,Ae]=await Promise.all([U2(),Qa.getAll()]);t(de),a(Ae.map(ke=>({id:ke.id,nom:ke.nom||ke.name||ke.id})))}catch(de){d("Erreur lors du chargement des donnes."),console.error(de)}finally{o(!1)}},[]);y.useEffect(()=>{te()},[te]),y.useEffect(()=>{if(m){const de=setTimeout(()=>p(null),4e3);return()=>clearTimeout(de)}},[m]);const ue=e.filter(de=>{if(h){const Ae=h.toLowerCase();if(!de.titre.toLowerCase().includes(Ae))return!1}return!(b&&de.disciplineId!==b||_==="true"&&!de.isPremium||_==="false"&&de.isPremium||S&&!de.questions?.some(ke=>ke.difficulte===S))}),he=()=>{P(null),I({disciplineId:"",titre:"",questions:[v1()],duree:15,isPremium:!1,noteMinimale:50}),K(null),O("form")},xe=de=>{P(de),I({disciplineId:de.disciplineId,titre:de.titre,questions:de.questions||[],duree:de.duree||15,isPremium:de.isPremium||!1,noteMinimale:de.noteMinimale||50}),K(null),O("form")},H=async()=>{if(!R.titre.trim()){d("Le titre du quiz est obligatoire.");return}if(!R.disciplineId){d("Veuillez slectionner une discipline.");return}if(R.questions.length===0){d("Le quiz doit contenir au moins une question.");return}for(let de=0;de<R.questions.length;de++){const Ae=R.questions[de];if(!Ae.question.trim()){d(`La question ${de+1} n'a pas d'nonc.`);return}if(Ae.options.filter(Be=>!Be.trim()).length>0){d(`La question ${de+1} a des options vides.`);return}}G(!0),d(null);try{T?(await uR(T.id,R),p("Quiz mis  jour avec succs !")):(await cR(R),p("Quiz cr avec succs !")),await te(),O("list")}catch(de){d("Erreur lors de la sauvegarde du quiz."),console.error(de)}finally{G(!1)}},pe=async de=>{try{await dR(de),p("Quiz supprim avec succs."),M(null),await te()}catch(Ae){d("Erreur lors de la suppression du quiz."),console.error(Ae)}},Ee=()=>{const de=v1();I(Ae=>({...Ae,questions:[...Ae.questions,de]})),K(de.id)},le=de=>{const Ae=R.questions.find(gr=>gr.id===de);if(!Ae)return;const ke={...Ae,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${Ae.question} (copie)`},Be=R.questions.findIndex(gr=>gr.id===de),St=[...R.questions];St.splice(Be+1,0,ke),I(gr=>({...gr,questions:St})),K(ke.id)},W=de=>{I(Ae=>({...Ae,questions:Ae.questions.filter(ke=>ke.id!==de)})),L===de&&K(null)},F=(de,Ae,ke)=>{I(Be=>({...Be,questions:Be.questions.map(St=>St.id===de?{...St,[Ae]:ke}:St)}))},oe=(de,Ae,ke)=>{I(Be=>({...Be,questions:Be.questions.map(St=>St.id===de?{...St,options:St.options.map((gr,Un)=>Un===Ae?ke:gr)}:St)}))},X=de=>{J(de),B({}),fe(!1),O("preview")},ye=(de,Ae)=>{q||B(ke=>({...ke,[de]:Ae}))},Ie=()=>{fe(!0)},$e=de=>n.find(Ae=>Ae.id===de)?.nom||de,Ve=({level:de})=>{const Ae={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return r.jsx("span",{className:`quiz-badge ${Ae[de]||"quiz-badge-moyen"}`,children:de.charAt(0).toUpperCase()+de.slice(1)})},Yt=()=>r.jsxs(r.Fragment,{children:[u&&r.jsxs("div",{className:"admin-message admin-message-error",children:[r.jsx(ef,{size:18}),r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:r.jsx(Ti,{size:16})})]}),m&&r.jsxs("div",{className:"admin-message admin-message-success",children:[r.jsx(Tt,{size:18}),r.jsx("span",{children:m})]})]}),zn=()=>r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(jn,{size:24})," Gestion des Quiz"]}),r.jsxs("p",{className:"admin-subtitle",children:[e.length," quiz au total  ",ue.length," affich(s)"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:he,children:[r.jsx(fc,{size:18})," Nouveau Quiz"]})]}),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search-wrapper",children:[r.jsx(k2,{size:18,className:"admin-search-icon"}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:h,onChange:de=>v(de.target.value)})]}),r.jsxs("button",{className:`admin-btn admin-btn-outline ${E?"active":""}`,onClick:()=>C(!E),children:[r.jsx(yy,{size:16})," Filtres",E?r.jsx(fx,{size:14}):r.jsx(Jd,{size:14})]})]}),E&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Discipline"}),r.jsxs("select",{className:"admin-select",value:b,onChange:de=>g(de.target.value),children:[r.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(de=>r.jsx("option",{value:de.id,children:de.nom},de.id))]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Accs"}),r.jsxs("select",{className:"admin-select",value:_,onChange:de=>j(de.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"false",children:"Gratuit"}),r.jsx("option",{value:"true",children:"Premium"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Difficult"}),r.jsxs("select",{className:"admin-select",value:S,onChange:de=>w(de.target.value),children:[r.jsx("option",{value:"",children:"Toutes"}),r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{g(""),j(""),w(""),v("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des quiz..."})]}):ue.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx(Qd,{size:48}),r.jsx("h3",{children:"Aucun quiz trouv"}),r.jsx("p",{children:e.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),e.length===0&&r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:he,children:[r.jsx(fc,{size:18})," Crer un quiz"]})]}):r.jsx("div",{className:"quiz-grid",children:ue.map(de=>{const Ae=g1(de);return r.jsxs("div",{className:"quiz-card",children:[r.jsxs("div",{className:"quiz-card-header",children:[r.jsxs("div",{className:"quiz-card-title-row",children:[r.jsx("h3",{className:"quiz-card-title",children:de.titre}),de.isPremium&&r.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[r.jsx(Zr,{size:12})," Premium"]})]}),r.jsx("span",{className:"quiz-card-discipline",children:$e(de.disciplineId)})]}),r.jsxs("div",{className:"quiz-card-stats",children:[r.jsxs("div",{className:"quiz-stat",children:[r.jsx(Qd,{size:14}),r.jsxs("span",{children:[Ae.nombreQuestions," question(s)"]})]}),r.jsxs("div",{className:"quiz-stat",children:[r.jsx(Li,{size:14}),r.jsxs("span",{children:[Ae.totalPoints," pts"]})]}),r.jsxs("div",{className:"quiz-stat",children:[r.jsx(Fl,{size:14}),r.jsxs("span",{children:[Ae.duree," min"]})]})]}),r.jsxs("div",{className:"quiz-card-difficulty",children:[Ae.parDifficulte.facile>0&&r.jsx(Ve,{level:"facile"}),Ae.parDifficulte.moyen>0&&r.jsx(Ve,{level:"moyen"}),Ae.parDifficulte.difficile>0&&r.jsx(Ve,{level:"difficile"})]}),r.jsxs("div",{className:"quiz-card-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>X(de),title:"Prvisualiser",children:[r.jsx($l,{size:14})," Aperu"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>xe(de),title:"Modifier",children:[r.jsx(bq,{size:14})," Modifier"]}),V===de.id?r.jsxs("div",{className:"quiz-delete-confirm",children:[r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>pe(de.id),children:"Confirmer"}),r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>M(null),children:"Annuler"})]}):r.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>M(de.id),title:"Supprimer",children:r.jsx(t1,{size:14})})]})]},de.id)})})]}),rn=()=>r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(jn,{size:24}),T?"Modifier le quiz":"Nouveau quiz"]}),r.jsxs("p",{className:"admin-subtitle",children:[R.questions.length," question(s) ajoute(s)"]})]}),r.jsxs("div",{className:"admin-header-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>O("list"),children:[r.jsx(Ti,{size:18})," Annuler"]}),r.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:H,disabled:U,children:[r.jsx(jq,{size:18})," ",U?"Enregistrement...":"Enregistrer"]})]})]}),r.jsxs("div",{className:"admin-card quiz-form-section",children:[r.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),r.jsxs("div",{className:"quiz-form-grid",children:[r.jsxs("div",{className:"admin-form-group quiz-form-full",children:[r.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),r.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:R.titre,onChange:de=>I(Ae=>({...Ae,titre:de.target.value}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Discipline *"}),r.jsxs("select",{className:"admin-select",value:R.disciplineId,onChange:de=>I(Ae=>({...Ae,disciplineId:de.target.value})),children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(de=>r.jsx("option",{value:de.id,children:de.nom},de.id))]})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),r.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:R.duree,onChange:de=>I(Ae=>({...Ae,duree:parseInt(de.target.value)||15}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),r.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:R.noteMinimale,onChange:de=>I(Ae=>({...Ae,noteMinimale:parseInt(de.target.value)||50}))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Accs"}),r.jsxs("div",{className:`quiz-toggle ${R.isPremium?"quiz-toggle-active":""}`,onClick:()=>I(de=>({...de,isPremium:!de.isPremium})),children:[r.jsx(Zr,{size:16}),r.jsx("span",{children:R.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),r.jsxs("div",{className:"admin-card quiz-form-section",children:[r.jsxs("div",{className:"quiz-questions-header",children:[r.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",R.questions.length,")"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Ee,children:[r.jsx(fc,{size:14})," Ajouter une question"]})]}),R.questions.length===0?r.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[r.jsx(Qd,{size:36}),r.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):r.jsx("div",{className:"quiz-questions-list",children:R.questions.map((de,Ae)=>r.jsxs("div",{className:`quiz-question-item ${L===de.id?"expanded":""}`,children:[r.jsxs("div",{className:"quiz-question-header",onClick:()=>K(L===de.id?null:de.id),children:[r.jsxs("div",{className:"quiz-question-header-left",children:[r.jsx(Nq,{size:16,className:"quiz-grip-icon"}),r.jsxs("span",{className:"quiz-question-number",children:["Q",Ae+1]}),r.jsx("span",{className:"quiz-question-preview",children:de.question||"Question sans nonc..."})]}),r.jsxs("div",{className:"quiz-question-header-right",children:[r.jsx(Ve,{level:de.difficulte||"moyen"}),r.jsxs("span",{className:"quiz-question-points",children:[de.points," pt(s)"]}),L===de.id?r.jsx(fx,{size:16}):r.jsx(Jd,{size:16})]})]}),L===de.id&&r.jsxs("div",{className:"quiz-question-body",children:[r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"nonc de la question *"}),r.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:de.question,onChange:ke=>F(de.id,"question",ke.target.value)})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),r.jsx("div",{className:"quiz-options-grid",children:de.options.map((ke,Be)=>r.jsxs("div",{className:`quiz-option-item ${de.reponseCorrecte===Be?"quiz-option-correct":""}`,children:[r.jsx("button",{type:"button",className:`quiz-option-radio ${de.reponseCorrecte===Be?"active":""}`,onClick:()=>F(de.id,"reponseCorrecte",Be),title:de.reponseCorrecte===Be?"Bonne rponse":"Marquer comme bonne rponse",children:de.reponseCorrecte===Be?r.jsx(Tt,{size:16}):r.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+Be)})}),r.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+Be)}`,value:ke,onChange:St=>oe(de.id,Be,St.target.value)})]},Be))})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),r.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:de.explication,onChange:ke=>F(de.id,"explication",ke.target.value)})]}),r.jsxs("div",{className:"quiz-question-meta",children:[r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Difficult"}),r.jsxs("select",{className:"admin-select",value:de.difficulte,onChange:ke=>F(de.id,"difficulte",ke.target.value),children:[r.jsx("option",{value:"facile",children:"Facile"}),r.jsx("option",{value:"moyen",children:"Moyen"}),r.jsx("option",{value:"difficile",children:"Difficile"})]})]}),r.jsxs("div",{className:"admin-form-group",children:[r.jsx("label",{className:"admin-label",children:"Points"}),r.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:de.points,onChange:ke=>F(de.id,"points",parseInt(ke.target.value)||1)})]})]}),r.jsxs("div",{className:"quiz-question-actions",children:[r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>le(de.id),children:[r.jsx(_q,{size:14})," Dupliquer"]}),r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>W(de.id),children:[r.jsx(t1,{size:14})," Supprimer"]})]})]})]},de.id))}),R.questions.length>0&&r.jsx("div",{className:"quiz-add-question-bottom",children:r.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Ee,children:[r.jsx(fc,{size:16})," Ajouter une question"]})})]})]}),sa=()=>{if(!k)return null;const de=g1(k);let Ae=0,ke=0;return q&&k.questions.forEach(Be=>{ke+=Be.points||1,Q[Be.id]===Be.reponseCorrecte&&(Ae+=Be.points||1)}),r.jsxs("div",{className:"quiz-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx($l,{size:24})," Prvisualisation : ",k.titre]}),r.jsxs("p",{className:"admin-subtitle",children:[$e(k.disciplineId),"  ",de.nombreQuestions," questions  ",de.duree," min"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{O("list"),J(null)},children:[r.jsx(Ti,{size:18})," Fermer"]})]}),q&&r.jsxs("div",{className:`quiz-preview-score ${Ae/ke>=(k.noteMinimale||50)/100?"success":"fail"}`,children:[r.jsx(Li,{size:32}),r.jsxs("div",{children:[r.jsxs("h3",{children:["Score : ",Ae,"/",ke," (",Math.round(Ae/ke*100),"%)"]}),r.jsxs("p",{children:["Note minimale : ",k.noteMinimale||50,"% "," ",Ae/ke>=(k.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),r.jsx("div",{className:"quiz-preview-questions",children:k.questions.map((Be,St)=>{const gr=Q[Be.id],Un=gr===Be.reponseCorrecte;return r.jsxs("div",{className:"admin-card quiz-preview-question",children:[r.jsxs("div",{className:"quiz-preview-question-header",children:[r.jsxs("span",{className:"quiz-question-number",children:["Q",St+1]}),r.jsx(Ve,{level:Be.difficulte||"moyen"}),r.jsxs("span",{className:"quiz-question-points",children:[Be.points," pt(s)"]})]}),r.jsx("p",{className:"quiz-preview-question-text",children:Be.question}),r.jsx("div",{className:"quiz-preview-options",children:Be.options.map((Us,nn)=>{let ri="quiz-preview-option";return q?nn===Be.reponseCorrecte?ri+=" correct":nn===gr&&!Un&&(ri+=" incorrect"):gr===nn&&(ri+=" selected"),r.jsxs("button",{className:ri,onClick:()=>ye(Be.id,nn),disabled:q,children:[r.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+nn)}),r.jsx("span",{children:Us}),q&&nn===Be.reponseCorrecte&&r.jsx(Tt,{size:16,className:"quiz-preview-check"})]},nn)})}),q&&Be.explication&&r.jsxs("div",{className:"quiz-preview-explication",children:[r.jsx("strong",{children:"Explication :"})," ",Be.explication]})]},Be.id)})}),!q&&r.jsx("div",{className:"quiz-preview-submit",children:r.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:Ie,disabled:Object.keys(Q).length<k.questions.length,children:[r.jsx(Tt,{size:18})," Soumettre (",Object.keys(Q).length,"/",k.questions.length,")"]})})]})};return r.jsxs("div",{className:"admin-container",children:[Yt(),A==="list"&&zn(),A==="form"&&rn(),A==="preview"&&sa()]})},F2=be(ie,"users"),pR=be(ie,"quizResults"),hR=async e=>{try{let t=Re(F2,Je("displayName","asc"));e?.role;let a=(await De(t)).docs.map(l=>({uid:l.id,...l.data()}));return e?.isPremium,e?.isActive,e?.search,a}catch(t){throw console.error("Erreur lors de la rcupration des utilisateurs :",t),t}},vR=async(e,t)=>{try{await Ze(je(ie,"users",e),{role:t,updatedAt:Le.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},gR=async(e,t)=>{try{const n={isPremium:t,updatedAt:Le.now()};if(t){const a=new Date;a.setDate(a.getDate()+30),n.subscriptionEnd=Le.fromDate(a)}else n.subscriptionEnd=null;await Ze(je(ie,"users",e),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},xR=async(e,t)=>{try{await Ze(je(ie,"users",e),{isActive:t,updatedAt:Le.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},yR=async e=>{try{const t=Re(pR,Ce("userId","==",e)),a=(await De(t)).docs.map(m=>({id:m.id,...m.data()})),l=a.length,o=a.filter(m=>m.reussi).length,u=l>0?Math.round(a.reduce((m,p)=>m+p.score,0)/l):0,d=a.length>0?new Date(Math.max(...a.map(m=>{const p=m.datePassage;return p?.toDate?p.toDate().getTime():new Date(p).getTime()}))):null;return{totalQuizPasses:l,scoresMoyens:u,quizReussis:o,dernierQuiz:d}}catch(t){return console.error("Erreur lors du calcul des statistiques :",t),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},bR=async()=>{try{const t=(await De(F2)).docs.map(n=>n.data());return{total:t.length,admins:t.filter(n=>n.role==="admin").length,profs:t.filter(n=>n.role==="prof").length,eleves:t.filter(n=>n.role==="eleve").length,premium:t.filter(n=>n.isPremium).length,actifs:t.filter(n=>n.isActive!==!1).length}}catch(e){throw console.error("Erreur lors du calcul des stats globales :",e),e}},jR=()=>{const[e,t]=y.useState([]),[n,a]=y.useState(null),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,p]=y.useState(null),[h,v]=y.useState(""),[b,g]=y.useState(""),[_,j]=y.useState(""),[S,w]=y.useState(""),[E,C]=y.useState(!1),[A]=z2();y.useEffect(()=>{A.get("filter")==="premium"&&j("true")},[A]);const[O,T]=y.useState(null),[P,R]=y.useState(null),[I,L]=y.useState(!1),[K,U]=y.useState(null),[G,V]=y.useState(null),M=y.useCallback(async()=>{o(!0),d(null);try{const[H,pe]=await Promise.all([hR(),bR()]);t(H),a(pe)}catch(H){d("Erreur lors du chargement des utilisateurs."),console.error(H)}finally{o(!1)}},[]);y.useEffect(()=>{M()},[M]),y.useEffect(()=>{if(m){const H=setTimeout(()=>p(null),4e3);return()=>clearTimeout(H)}},[m]);const k=e.filter(H=>{if(h){const pe=h.toLowerCase();if(!H.displayName?.toLowerCase().includes(pe)&&!H.email?.toLowerCase().includes(pe))return!1}return!(b&&H.role!==b||_==="true"&&!H.isPremium||_==="false"&&H.isPremium||S==="true"&&H.isActive===!1||S==="false"&&H.isActive!==!1)}),J=async H=>{T(H),L(!0);try{const pe=await yR(H.uid);R(pe)}catch(pe){console.error("Erreur lors du chargement des statistiques :",pe),R(null)}finally{L(!1)}},Q=async()=>{if(G){U(G.userId);try{switch(G.type){case"role":await vR(G.userId,G.value),p("Rle mis  jour avec succs.");break;case"premium":await gR(G.userId,G.value),p(G.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await xR(G.userId,G.value),p(G.value?"Compte ractiv.":"Compte dsactiv.");break}await M()}catch(H){d("Erreur lors de l'excution de l'action."),console.error(H)}finally{U(null),V(null)}}},B=({role:H})=>{const pe={admin:{icon:r.jsx(xy,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:r.jsx(js,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:r.jsx(jn,{size:12}),className:"user-badge-eleve",label:"lve"}},Ee=pe[H]||pe.eleve;return r.jsxs("span",{className:`user-badge ${Ee.className}`,children:[Ee.icon," ",Ee.label]})},q=H=>H?(H?.toDate?H.toDate():new Date(H)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",fe=H=>H?H.charAt(0).toUpperCase():"?",te=()=>r.jsxs(r.Fragment,{children:[u&&r.jsxs("div",{className:"admin-message admin-message-error",children:[r.jsx(ef,{size:18}),r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:r.jsx(Ti,{size:16})})]}),m&&r.jsxs("div",{className:"admin-message admin-message-success",children:[r.jsx(Tt,{size:18}),r.jsx("span",{children:m})]})]}),ue=()=>{if(!n)return null;const H=[{label:"Total",value:n.total,icon:r.jsx(Hd,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:r.jsx(jn,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:r.jsx(js,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:r.jsx(Zr,{size:20}),color:"stat-gold"}];return r.jsx("div",{className:"user-stats-grid",children:H.map(pe=>r.jsxs("div",{className:`user-stat-card ${pe.color}`,children:[r.jsx("div",{className:"user-stat-icon",children:pe.icon}),r.jsxs("div",{className:"user-stat-info",children:[r.jsx("span",{className:"user-stat-value",children:pe.value}),r.jsx("span",{className:"user-stat-label",children:pe.label})]})]},pe.label))})},he=()=>G?r.jsx("div",{className:"admin-modal-overlay",onClick:()=>V(null),children:r.jsxs("div",{className:"admin-modal",onClick:H=>H.stopPropagation(),children:[r.jsxs("div",{className:"admin-modal-header",children:[r.jsx("h3",{children:"Confirmer l'action"}),r.jsx("button",{className:"admin-modal-close",onClick:()=>V(null),children:r.jsx(Ti,{size:20})})]}),r.jsx("div",{className:"admin-modal-body",children:r.jsx("p",{children:G.label})}),r.jsxs("div",{className:"admin-modal-footer",children:[r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>V(null),children:"Annuler"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:Q,disabled:K===G.userId,children:K===G.userId?"En cours...":"Confirmer"})]})]})}):null,xe=()=>O?r.jsx("div",{className:"admin-modal-overlay",onClick:()=>T(null),children:r.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:H=>H.stopPropagation(),children:[r.jsxs("div",{className:"admin-modal-header",children:[r.jsx("h3",{children:"Dtail de l'utilisateur"}),r.jsx("button",{className:"admin-modal-close",onClick:()=>T(null),children:r.jsx(Ti,{size:20})})]}),r.jsxs("div",{className:"admin-modal-body",children:[r.jsxs("div",{className:"user-detail-profile",children:[r.jsx("div",{className:"user-detail-avatar",children:fe(O.displayName)}),r.jsxs("div",{className:"user-detail-info",children:[r.jsx("h4",{children:O.displayName||"Sans nom"}),r.jsx("p",{children:O.email}),r.jsxs("div",{className:"user-detail-badges",children:[r.jsx(B,{role:O.role}),O.isPremium&&r.jsxs("span",{className:"user-badge user-badge-premium",children:[r.jsx(Zr,{size:12})," Premium"]}),r.jsx("span",{className:`user-badge ${O.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:O.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),r.jsxs("div",{className:"user-detail-dates",children:[r.jsxs("div",{children:[r.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),r.jsx("span",{children:q(O.createdAt)})]}),O.isPremium&&O.subscriptionEnd&&r.jsxs("div",{children:[r.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),r.jsx("span",{children:q(O.subscriptionEnd)})]})]}),r.jsxs("div",{className:"user-detail-stats-section",children:[r.jsxs("h4",{children:[r.jsx(Ns,{size:18})," Statistiques"]}),I?r.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des statistiques..."})]}):P?r.jsxs("div",{className:"user-detail-stats-grid",children:[r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(jn,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:P.totalQuizPasses}),r.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(mc,{size:20}),r.jsxs("span",{className:"user-detail-stat-value",children:[P.scoresMoyens,"%"]}),r.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(Li,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:P.quizReussis}),r.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),r.jsxs("div",{className:"user-detail-stat",children:[r.jsx(Fl,{size:20}),r.jsx("span",{className:"user-detail-stat-value",children:P.dernierQuiz?q(P.dernierQuiz):"Aucun"}),r.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):r.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return r.jsxs("div",{className:"admin-container",children:[te(),he(),xe(),r.jsxs("div",{className:"user-manager",children:[r.jsxs("div",{className:"admin-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"admin-title",children:[r.jsx(Hd,{size:24})," Gestion des Utilisateurs"]}),r.jsxs("p",{className:"admin-subtitle",children:[e.length," utilisateur(s) au total  ",k.length," affich(s)"]})]}),r.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:M,children:[r.jsx(Sq,{size:16})," Actualiser"]})]}),ue(),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search-wrapper",children:[r.jsx(k2,{size:18,className:"admin-search-icon"}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:h,onChange:H=>v(H.target.value)})]}),r.jsxs("button",{className:`admin-btn admin-btn-outline ${E?"active":""}`,onClick:()=>C(!E),children:[r.jsx(yy,{size:16})," Filtres",E?r.jsx(fx,{size:14}):r.jsx(Jd,{size:14})]})]}),E&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Rle"}),r.jsxs("select",{className:"admin-select",value:b,onChange:H=>g(H.target.value),children:[r.jsx("option",{value:"",children:"Tous les rles"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"prof",children:"Professeur"}),r.jsx("option",{value:"eleve",children:"lve"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),r.jsxs("select",{className:"admin-select",value:_,onChange:H=>j(H.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Premium"}),r.jsx("option",{value:"false",children:"Gratuit"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Statut"}),r.jsxs("select",{className:"admin-select",value:S,onChange:H=>w(H.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Actifs"}),r.jsx("option",{value:"false",children:"Dsactivs"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{g(""),j(""),w(""),v("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des utilisateurs..."})]}):k.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx(Hd,{size:48}),r.jsx("h3",{children:"Aucun utilisateur trouv"}),r.jsx("p",{children:e.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):r.jsx("div",{className:"user-table-wrapper",children:r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Utilisateur"}),r.jsx("th",{children:"Rle"}),r.jsx("th",{children:"Abonnement"}),r.jsx("th",{children:"Statut"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:k.map(H=>r.jsxs("tr",{className:H.isActive===!1?"user-row-inactive":"",children:[r.jsx("td",{children:r.jsxs("div",{className:"user-cell-info",children:[r.jsx("div",{className:"user-avatar-sm",children:fe(H.displayName)}),r.jsxs("div",{children:[r.jsx("span",{className:"user-cell-name",children:H.displayName||"Sans nom"}),r.jsx("span",{className:"user-cell-email",children:H.email})]})]})}),r.jsx("td",{children:r.jsxs("select",{className:"admin-select admin-select-sm",value:H.role,onChange:pe=>V({type:"role",userId:H.uid,value:pe.target.value,label:`Changer le rle de "${H.displayName||H.email}" en "${pe.target.value}" ?`}),children:[r.jsx("option",{value:"eleve",children:"lve"}),r.jsx("option",{value:"prof",children:"Professeur"}),r.jsx("option",{value:"admin",children:"Admin"})]})}),r.jsx("td",{children:r.jsx("button",{className:`user-premium-toggle ${H.isPremium?"active":""}`,onClick:()=>V({type:"premium",userId:H.uid,value:!H.isPremium,label:H.isPremium?`Dsactiver le statut Premium de "${H.displayName||H.email}" ?`:`Activer le statut Premium de "${H.displayName||H.email}" pour 30 jours ?`}),disabled:K===H.uid,children:H.isPremium?r.jsxs(r.Fragment,{children:[r.jsx(dc,{size:14})," Premium"]}):r.jsxs(r.Fragment,{children:[r.jsx(Zr,{size:14})," Gratuit"]})})}),r.jsx("td",{children:r.jsx("button",{className:`user-status-toggle ${H.isActive!==!1?"active":"inactive"}`,onClick:()=>V({type:"active",userId:H.uid,value:H.isActive===!1,label:H.isActive===!1?`Ractiver le compte de "${H.displayName||H.email}" ?`:`Dsactiver le compte de "${H.displayName||H.email}" ?`}),disabled:K===H.uid,children:H.isActive!==!1?r.jsxs(r.Fragment,{children:[r.jsx(wq,{size:14})," Actif"]}):r.jsxs(r.Fragment,{children:[r.jsx(Cq,{size:14})," Dsactiv"]})})}),r.jsx("td",{children:r.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>J(H),title:"Voir les statistiques",children:[r.jsx($l,{size:14})," Dtail"]})})]},H.uid))})]})})]})]})},NR=()=>{const[e,t]=y.useState([]),[n,a]=y.useState(null),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,p]=y.useState(""),[h,v]=y.useState(""),[b,g]=y.useState(""),[_,j]=y.useState(!1),S=y.useCallback(async()=>{try{o(!0),d(null);const O=await De(be(ie,"users")),T=new Map;O.docs.forEach(ue=>{const he=ue.data();T.set(ue.id,{name:he.displayName||"Sans nom",email:he.email||""})});const P=await De(be(ie,"quizzes")),R=new Map;P.docs.forEach(ue=>{const he=ue.data();R.set(ue.id,{titre:he.titre||he.quizTitre||"Quiz sans titre",discipline:he.disciplineNom||he.matiereNom||""})});const I=await De(be(ie,"quizzes_v2")),L=new Map;I.docs.forEach(ue=>{const he=ue.data();L.set(ue.id,{titre:he.titre||"Quiz avanc sans titre",discipline:he.disciplineNom||""})});const K=[];try{(await De(Re(be(ie,"quiz_results"),Je("datePassage","desc"),Nn(200)))).docs.forEach(he=>{const xe=he.data(),H=T.get(xe.userId)||{name:"Inconnu",email:""},pe=R.get(xe.quizId)||{titre:xe.quizTitre||"Quiz",discipline:xe.disciplineNom||""},Ee=xe.pourcentage??(xe.totalPoints>0?Math.round(xe.score/xe.totalPoints*100):xe.score>0?Math.round(xe.score/20*100):0);K.push({id:he.id,quizId:xe.quizId||"",quizTitre:pe.titre,userId:xe.userId||"",userName:H.name,userEmail:H.email,score:xe.score||0,scoreMax:xe.totalPoints||20,pourcentage:Ee,reussi:xe.reussi??Ee>=50,tempsEcoule:xe.tempsEcoule||0,datePassage:xe.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:pe.discipline})})}catch(ue){console.warn("Pas de rsultats v1 ou index manquant:",ue)}const U=[];try{(await De(Re(be(ie,"quiz_results_v2"),Je("datePassage","desc"),Nn(200)))).docs.forEach(he=>{const xe=he.data(),H=T.get(xe.userId)||{name:"Inconnu",email:""},pe=L.get(xe.quizId)||{titre:xe.quizTitre||"Quiz avanc",discipline:xe.disciplineNom||""},Ee=xe.scoreMax>0?Math.round(xe.score/xe.scoreMax*100):0;U.push({id:he.id,quizId:xe.quizId||"",quizTitre:pe.titre,userId:xe.userId||"",userName:H.name,userEmail:H.email,score:xe.score||0,scoreMax:xe.scoreMax||0,pourcentage:Ee,reussi:xe.reussi??Ee>=50,tempsEcoule:xe.tempsTotal||xe.tempsEcoule||0,datePassage:xe.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:pe.discipline})})}catch(ue){console.warn("Pas de rsultats v2 ou index manquant:",ue)}const G=[...K,...U].sort((ue,he)=>he.datePassage.getTime()-ue.datePassage.getTime());t(G);const V=new Date,M=new Date(V.getFullYear(),V.getMonth(),V.getDate()),k=new Date(M.getTime()-10080*60*1e3),J=G.length,Q=J>0?Math.round(G.reduce((ue,he)=>ue+he.pourcentage,0)/J):0,B=J>0?Math.round(G.filter(ue=>ue.reussi).length/J*100):0,q=J>0?Math.round(G.reduce((ue,he)=>ue+he.tempsEcoule,0)/J):0,fe=G.filter(ue=>ue.datePassage>=M).length,te=G.filter(ue=>ue.datePassage>=k).length;a({totalResultats:J,moyenneGenerale:Q,tauxReussite:B,tempsEcouleMoyen:q,resultatsAujourdHui:fe,resultats7Jours:te})}catch(O){console.error("Erreur chargement rsultats:",O),d("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);y.useEffect(()=>{S()},[S]);const w=e.filter(O=>{if(m&&O.type!==m||h==="true"&&!O.reussi||h==="false"&&O.reussi)return!1;if(b){const T=b.toLowerCase();if(!O.userName.toLowerCase().includes(T)&&!O.userEmail.toLowerCase().includes(T)&&!O.quizTitre.toLowerCase().includes(T)&&!O.disciplineNom.toLowerCase().includes(T))return!1}return!0}),E=O=>{if(O<60)return`${O}s`;const T=Math.floor(O/60),P=O%60;return P>0?`${T}min ${P}s`:`${T}min`},C=O=>O.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),A=O=>O>=80?"results-score--excellent":O>=60?"results-score--bien":O>=40?"results-score--moyen":"results-score--faible";return r.jsxs("div",{className:"results-admin",children:[r.jsxs("div",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),r.jsx("div",{className:"admin-page-header__actions",children:r.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:S,children:" Actualiser"})})]}),n&&r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.totalResultats}),r.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsxs("div",{className:"stat-card__value",children:[n.moyenneGenerale,"%"]}),r.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsxs("div",{className:"stat-card__value",children:[n.tauxReussite,"%"]}),r.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),r.jsxs("div",{className:"stat-card__content",children:[r.jsx("div",{className:"stat-card__value",children:n.resultatsAujourdHui}),r.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),r.jsxs("div",{className:"admin-toolbar",children:[r.jsxs("div",{className:"admin-search",children:[r.jsx("span",{className:"admin-search-icon",children:""}),r.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:b,onChange:O=>g(O.target.value)})]}),r.jsx("button",{className:`admin-btn admin-btn-ghost ${_?"active":""}`,onClick:()=>j(!_),children:" Filtres"})]}),_&&r.jsxs("div",{className:"admin-filters-panel",children:[r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),r.jsxs("select",{className:"admin-select",value:m,onChange:O=>p(O.target.value),children:[r.jsx("option",{value:"",children:"Tous les types"}),r.jsx("option",{value:"classique",children:"Classique (v1)"}),r.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),r.jsxs("div",{className:"admin-filter-group",children:[r.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),r.jsxs("select",{className:"admin-select",value:h,onChange:O=>v(O.target.value),children:[r.jsx("option",{value:"",children:"Tous"}),r.jsx("option",{value:"true",children:"Russis"}),r.jsx("option",{value:"false",children:"chous"})]})]}),r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{p(""),v(""),g("")},children:"Rinitialiser"})]}),l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des rsultats..."})]}):u?r.jsxs("div",{className:"admin-error",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,children:"Ressayer"})]}):w.length===0?r.jsxs("div",{className:"admin-empty-state",children:[r.jsx("span",{style:{fontSize:"3rem"},children:""}),r.jsx("h3",{children:"Aucun rsultat trouv"}),r.jsx("p",{children:e.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):r.jsxs("div",{className:"results-table-wrapper",children:[r.jsxs("table",{className:"results-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"lve"}),r.jsx("th",{children:"Quiz"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Score"}),r.jsx("th",{children:"Rsultat"}),r.jsx("th",{children:"Dure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:w.map(O=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"results-cell-user",children:[r.jsx("span",{className:"results-cell-name",children:O.userName}),r.jsx("span",{className:"results-cell-email",children:O.userEmail})]})}),r.jsx("td",{children:r.jsxs("div",{className:"results-cell-quiz",children:[r.jsx("span",{className:"results-cell-quiz-title",children:O.quizTitre}),O.disciplineNom&&r.jsx("span",{className:"results-cell-discipline",children:O.disciplineNom})]})}),r.jsx("td",{children:r.jsx("span",{className:`results-badge results-badge--${O.type}`,children:O.type==="classique"?" Classique":" Avanc"})}),r.jsxs("td",{children:[r.jsxs("span",{className:`results-score ${A(O.pourcentage)}`,children:[O.pourcentage,"%"]}),r.jsxs("span",{className:"results-score-detail",children:[O.score,"/",O.scoreMax]})]}),r.jsx("td",{children:r.jsx("span",{className:`results-status ${O.reussi?"results-status--success":"results-status--fail"}`,children:O.reussi?" Russi":" chou"})}),r.jsx("td",{className:"results-cell-duration",children:E(O.tempsEcoule)}),r.jsx("td",{className:"results-cell-date",children:C(O.datePassage)})]},`${O.type}-${O.id}`))})]}),r.jsx("div",{className:"results-footer",children:r.jsxs("p",{children:[w.length," rsultat",w.length>1?"s":""," affich",w.length>1?"s":"",w.length!==e.length&&` sur ${e.length} au total`]})})]})]})},Ol={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premiumMensuel:2e3,premiumAnnuel:2e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !"},_R=()=>{const[e,t]=y.useState(Ol),[n,a]=y.useState(Ol),[l,o]=y.useState(!0),[u,d]=y.useState(!1),[m,p]=y.useState(null),[h,v]=y.useState(null),[b,g]=y.useState(!1),_=y.useCallback(async()=>{try{o(!0),p(null);const C=je(ie,"settings","platform"),A=await It(C);if(A.exists()){const O=A.data(),T={...Ol,...O};t(T),a(T)}else t(Ol),a(Ol)}catch(C){console.error("Erreur chargement paramtres:",C),p("Impossible de charger les paramtres.")}finally{o(!1)}},[]);y.useEffect(()=>{_()},[_]),y.useEffect(()=>{if(h){const C=setTimeout(()=>v(null),4e3);return()=>clearTimeout(C)}},[h]),y.useEffect(()=>{const C=JSON.stringify(e)!==JSON.stringify(n);g(C)},[e,n]);const j=(C,A)=>{t(O=>({...O,[C]:A}))},S=async()=>{try{if(d(!0),p(null),e.premiumMensuel<0||e.premiumAnnuel<0){p("Les tarifs ne peuvent pas tre ngatifs.");return}if(e.quizNoteMinimale<0||e.quizNoteMinimale>20){p("La note minimale doit tre entre 0 et 20.");return}const C=je(ie,"settings","platform");await am(C,{...e,updatedAt:mt()}),a(e),g(!1),v("Paramtres sauvegards avec succs !")}catch(C){console.error("Erreur sauvegarde paramtres:",C),p("Impossible de sauvegarder les paramtres.")}finally{d(!1)}},w=()=>{t(n),g(!1)},E=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&t(Ol)};return l?r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement des paramtres..."})]}):r.jsxs("div",{className:"settings-admin",children:[r.jsxs("div",{className:"admin-page-header",children:[r.jsxs("div",{className:"admin-page-header__info",children:[r.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),r.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),r.jsxs("div",{className:"admin-page-header__actions",children:[b&&r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:w,children:"Annuler"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!b||u,children:u?" Sauvegarde...":" Sauvegarder"})]})]}),b&&r.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),m&&r.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",m]}),h&&r.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",h]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),r.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Nom du site"}),r.jsx("input",{type:"text",className:"admin-input",value:e.siteName,onChange:C=>j("siteName",C.target.value)})]}),r.jsxs("div",{className:"settings-field settings-field--full",children:[r.jsx("label",{className:"settings-label",children:"Description"}),r.jsx("input",{type:"text",className:"admin-input",value:e.siteDescription,onChange:C=>j("siteDescription",C.target.value)})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Email de contact"}),r.jsx("input",{type:"email",className:"admin-input",value:e.contactEmail,onChange:C=>j("contactEmail",C.target.value)})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Tlphone"}),r.jsx("input",{type:"tel",className:"admin-input",value:e.contactPhone,onChange:C=>j("contactPhone",C.target.value)})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),r.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Abonnement mensuel (FCFA)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.premiumMensuel,onChange:C=>j("premiumMensuel",parseInt(C.target.value)||0),min:0,step:500}),r.jsxs("span",{className:"settings-hint",children:["Actuellement : ",e.premiumMensuel.toLocaleString("fr-FR")," FCFA/mois"]})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Abonnement annuel (FCFA)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.premiumAnnuel,onChange:C=>j("premiumAnnuel",parseInt(C.target.value)||0),min:0,step:1e3}),r.jsxs("span",{className:"settings-hint",children:["conomie : ",(e.premiumMensuel*12-e.premiumAnnuel).toLocaleString("fr-FR")," FCFA/an"]})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),r.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizDureeDefaut,onChange:C=>j("quizDureeDefaut",parseInt(C.target.value)||0),min:1,max:120})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizNoteMinimale,onChange:C=>j("quizNoteMinimale",parseInt(C.target.value)||0),min:0,max:20})]}),r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),r.jsx("input",{type:"number",className:"admin-input",value:e.quizTentativesMax,onChange:C=>j("quizTentativesMax",parseInt(C.target.value)||0),min:1,max:10}),r.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),r.jsxs("div",{className:"settings-section",children:[r.jsxs("div",{className:"settings-section__header",children:[r.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),r.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("div",{className:"settings-field",children:[r.jsx("label",{className:"settings-label",children:"Mode maintenance"}),r.jsxs("div",{className:"settings-toggle-wrapper",children:[r.jsx("button",{className:`settings-toggle ${e.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>j("maintenanceMode",!e.maintenanceMode),children:r.jsx("span",{className:"settings-toggle__knob"})}),r.jsx("span",{className:`settings-toggle-label ${e.maintenanceMode?"settings-toggle-label--active":""}`,children:e.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),r.jsxs("div",{className:"settings-field settings-field--full",children:[r.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),r.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:e.maintenanceMessage,onChange:C=>j("maintenanceMessage",C.target.value),disabled:!e.maintenanceMode})]})]})]}),r.jsxs("div",{className:"settings-actions",children:[r.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:E,children:" Rinitialiser aux valeurs par dfaut"}),r.jsx("button",{className:"admin-btn admin-btn-primary",onClick:S,disabled:!b||u,children:u?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},SR=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],wR=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],CR=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],qa=({value:e,onChange:t,placeholder:n="Saisissez votre texte...",minHeight:a=100,maxHeight:l=400,toolbar:o=SR,disabled:u=!1,className:d=""})=>{const m=y.useRef(null),p=y.useRef(!1),[h,v]=y.useState(!1),[b,g]=y.useState(!1);y.useEffect(()=>{m.current&&!p.current&&m.current.innerHTML!==e&&(m.current.innerHTML=e||""),p.current=!1},[e]);const _=y.useCallback(()=>{m.current&&(p.current=!0,t(m.current.innerHTML))},[t]),j=y.useCallback((C,A)=>{m.current?.focus(),document.execCommand(C,!1,A),_()},[_]),S=y.useCallback(()=>{const C=prompt("URL du lien :","https://");C&&j("createLink",C)},[j]),w=y.useCallback(()=>{j("removeFormat"),j("formatBlock","p")},[j]);y.useEffect(()=>{const C=()=>{v(!1),g(!1)};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const E=C=>{switch(C){case"bold":return r.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:A=>{A.preventDefault(),j("bold")},children:r.jsx("strong",{children:"G"})},"bold");case"italic":return r.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:A=>{A.preventDefault(),j("italic")},children:r.jsx("em",{children:"I"})},"italic");case"underline":return r.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:A=>{A.preventDefault(),j("underline")},children:r.jsx("u",{children:"S"})},"underline");case"strikethrough":return r.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:A=>{A.preventDefault(),j("strikeThrough")},children:r.jsx("s",{children:"B"})},"strike");case"heading":return r.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:A=>{A.preventDefault(),j("formatBlock","h3")},children:"H"},"heading");case"color":return r.jsxs("span",{className:"rte-dropdown-wrapper",onClick:A=>A.stopPropagation(),children:[r.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{v(!h),g(!1)},children:r.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),h&&r.jsx("div",{className:"rte-color-picker",children:wR.map(A=>r.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:A,border:A==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:O=>{O.preventDefault(),j("foreColor",A),v(!1)}},A))})]},"color");case"highlight":return r.jsxs("span",{className:"rte-dropdown-wrapper",onClick:A=>A.stopPropagation(),children:[r.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{g(!b),v(!1)},children:r.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),b&&r.jsx("div",{className:"rte-color-picker",children:CR.map(A=>r.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:A==="transparent"?"#fff":A,border:"1px solid #ccc"},onMouseDown:O=>{O.preventDefault(),j("hiliteColor",A),g(!1)},children:A==="transparent"?"":""},A))})]},"highlight");case"alignLeft":return r.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:A=>{A.preventDefault(),j("justifyLeft")},children:""},"alignL");case"alignCenter":return r.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:A=>{A.preventDefault(),j("justifyCenter")},children:""},"alignC");case"alignRight":return r.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:A=>{A.preventDefault(),j("justifyRight")},children:""},"alignR");case"bulletList":return r.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:A=>{A.preventDefault(),j("insertUnorderedList")},children:""},"ul");case"numberedList":return r.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:A=>{A.preventDefault(),j("insertOrderedList")},children:"1"},"ol");case"subscript":return r.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:A=>{A.preventDefault(),j("subscript")},children:["X",r.jsx("sub",{children:""})]},"sub");case"superscript":return r.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:A=>{A.preventDefault(),j("superscript")},children:["X",r.jsx("sup",{children:""})]},"sup");case"link":return r.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:A=>{A.preventDefault(),S()},children:""},"link");case"clean":return r.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:A=>{A.preventDefault(),w()},children:""},"clean");default:return null}};return r.jsxs("div",{className:`rte-container ${u?"rte-disabled":""} ${d}`,children:[!u&&r.jsx("div",{className:"rte-toolbar",children:o.map(C=>E(C))}),r.jsx("div",{ref:m,className:"rte-editor",contentEditable:!u,onInput:_,onBlur:_,"data-placeholder":n,style:{minHeight:`${a}px`,maxHeight:`${l}px`},suppressContentEditableWarning:!0})]})},Gl={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},tf={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},rf={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Ht(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function AR(e,t){const n={id:Ht("q"),type:e,enonce:"",difficulte:"moyen",points:2,ordre:t};switch(e){case"qcm_unique":return{...n,typeData:{options:[{id:Ht("opt"),texte:"",isCorrect:!0},{id:Ht("opt"),texte:"",isCorrect:!1},{id:Ht("opt"),texte:"",isCorrect:!1},{id:Ht("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:Ht("opt"),texte:"",isCorrect:!0},{id:Ht("opt"),texte:"",isCorrect:!0},{id:Ht("opt"),texte:"",isCorrect:!1},{id:Ht("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:Ht("item"),texte:"",ordreCorrect:1},{id:Ht("item"),texte:"",ordreCorrect:2},{id:Ht("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:Ht("pair"),gauche:"",droite:""},{id:Ht("pair"),gauche:"",droite:""},{id:Ht("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const Uc="quizzes_v2",ER="quiz_results_v2";async function zR(e,t){try{const n=await Lt(be(ie,Uc),{...e,auteurId:t,createdAt:mt(),updatedAt:mt()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function OR(e,t){try{const n=je(ie,Uc,e);await Ze(n,{...t,updatedAt:mt()}),console.log(" Quiz avanc mis  jour :",e)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function DR(e){try{await Cn(je(ie,Uc,e)),console.log(" Quiz avanc supprim :",e)}catch(t){throw console.error(" Erreur suppression quiz :",t),new Error("Impossible de supprimer le quiz")}}async function G2(e){try{const t=await It(je(ie,Uc,e));if(!t.exists())return null;const n=t.data();return{id:t.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(t){throw console.error(" Erreur rcupration quiz :",t),new Error("Impossible de rcuprer le quiz")}}async function H2(){try{const e=Re(be(ie,Uc),Je("createdAt","desc"));return(await De(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||void 0}})}catch(e){throw console.error(" Erreur rcupration tous les quiz :",e),new Error("Impossible de rcuprer les quiz")}}function MR(e,t){let n=0,a=0;const l=[];for(const o of e.questions){a+=o.points;const u=t.find(v=>v.questionId===o.id);if(!u){l.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let d=0,m=!1,p=!1,h=!1;switch(o.type){case"qcm_unique":{const b=o.typeData.options.find(g=>g.isCorrect);b&&u.selectedOptionId===b.id&&(d=o.points,m=!0);break}case"qcm_multiple":{const v=o.typeData,b=v.options.filter(w=>w.isCorrect).map(w=>w.id),g=v.options.filter(w=>!w.isCorrect).map(w=>w.id),_=u.selectedOptionIds||[],j=_.some(w=>g.includes(w)),S=_.filter(w=>b.includes(w)).length;!j&&S===b.length?(d=o.points,m=!0):v.scoringPartiel&&S>0&&!j&&(d=Math.round(o.points*S/b.length*100)/100,p=!0);break}case"drag_drop":{const v=o.typeData,b=u.ordrePropose||[],g=v.items.sort((j,S)=>j.ordreCorrect-S.ordreCorrect).map(j=>j.id);let _=0;for(let j=0;j<g.length;j++)b[j]===g[j]&&_++;_===g.length?(d=o.points,m=!0):_>0&&(d=Math.round(o.points*_/g.length*100)/100,p=!0);break}case"mise_en_relation":{const v=o.typeData,b=u.relationsProposees||{};let g=0;for(const _ of v.paires)b[_.id]===_.id&&g++;g===v.paires.length?(d=o.points,m=!0):g>0&&(d=Math.round(o.points*g/v.paires.length*100)/100,p=!0);break}case"essai":{const v=o.typeData,b=u.texteReponse||"";if(v.correctionMode==="mots_cles"&&v.motsCles.length>0){const g=b.toLowerCase().replace(/<[^>]*>/g,"");let _=0,j=0;for(const S of v.motsCles)_+=S.poids,g.includes(S.mot.toLowerCase())&&(j+=S.poids);_>0&&(d=Math.round(o.points*j/_*100)/100,m=j===_,p=j>0&&j<_)}else h=!0;break}}n+=d,l.push({questionId:o.id,type:o.type,pointsObtenus:d,pointsMax:o.points,isCorrect:m,isPartiel:p,correctionManuelleRequise:h})}return{score:n,scoreMax:a,details:l}}async function TR(e,t,n,a){try{const{score:l,scoreMax:o,details:u}=MR(e,n),d=o>0?Math.round(l/o*20*100)/100:0,m=u.some(v=>v.correctionManuelleRequise),p={quizId:e.id,userId:t,reponses:n,score:l,scoreMax:o,note20:d,tempsEcoule:a,datePassage:new Date,reussi:d>=e.noteMinimale,correctionManuelle:m,detailsParQuestion:u},h=await Lt(be(ie,ER),{...p,datePassage:mt()});return console.log(" Rsultat quiz enregistr :",h.id),{id:h.id,...p}}catch(l){throw console.error(" Erreur soumission quiz :",l),new Error("Impossible d'enregistrer le rsultat")}}const kR=({existingQuiz:e,disciplines:t,auteurId:n,onSave:a,onCancel:l})=>{const[o,u]=y.useState(e?.titre||""),[d,m]=y.useState(e?.description||""),[p,h]=y.useState(e?.disciplineId||""),[v,b]=y.useState(e?.duree||30),[g,_]=y.useState(e?.isPremium??!0),[j,S]=y.useState(e?.noteMinimale||10),[w,E]=y.useState(e?.melangerQuestions??!1),[C,A]=y.useState(e?.melangerOptions??!1),[O,T]=y.useState(e?.afficherCorrection??!0),[P,R]=y.useState(e?.tentativesMax||0),[I,L]=y.useState(e?.questions||[]),[K,U]=y.useState(null),[G,V]=y.useState(!1),[M,k]=y.useState(null),[J,Q]=y.useState(!1),B=y.useCallback(H=>{const pe=AR(H,I.length+1);L(Ee=>[...Ee,pe]),U(I.length),Q(!1)},[I.length]),q=y.useCallback(H=>{confirm("Supprimer cette question ?")&&(L(pe=>pe.filter((le,W)=>W!==H).map((le,W)=>({...le,ordre:W+1}))),U(null))},[]),fe=y.useCallback(H=>{L(pe=>{const Ee=pe[H],le={...JSON.parse(JSON.stringify(Ee)),id:Ht("q"),ordre:pe.length+1};return[...pe,le]})},[]),te=y.useCallback((H,pe)=>{L(Ee=>{const le=[...Ee],W=pe==="up"?H-1:H+1;return W<0||W>=le.length?Ee:([le[H],le[W]]=[le[W],le[H]],le.map((F,oe)=>({...F,ordre:oe+1})))}),U(pe==="up"?K!==null?K-1:null:K!==null?K+1:null)},[K]),ue=y.useCallback((H,pe)=>{L(Ee=>Ee.map((le,W)=>W===H?{...le,...pe}:le))},[]),he=async()=>{if(!o.trim()){k("Le titre est obligatoire");return}if(!p){k("Slectionnez une discipline");return}if(I.length===0){k("Ajoutez au moins une question");return}for(let H=0;H<I.length;H++)if(!I[H].enonce.replace(/<[^>]*>/g,"").trim()){k(`La question ${H+1} n'a pas d'nonc`),U(H);return}k(null),V(!0);try{const H={disciplineId:p,titre:o.trim(),description:d.trim()||void 0,questions:I,duree:v,isPremium:g,noteMinimale:j,melangerQuestions:w,melangerOptions:C,afficherCorrection:O,tentativesMax:P};let pe;e?.id?(await OR(e.id,H),pe=e.id):pe=await zR(H,n),a?.(pe)}catch(H){k(H.message||"Erreur lors de la sauvegarde")}finally{V(!1)}},xe=I.reduce((H,pe)=>H+pe.points,0);return r.jsxs("div",{className:"quiz-editor",children:[r.jsxs("div",{className:"quiz-editor__header",children:[r.jsx("h2",{children:e?" Modifier le quiz":" Nouveau quiz avanc"}),r.jsxs("div",{className:"quiz-editor__header-actions",children:[r.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",xe," pts"]}),r.jsxs("span",{className:"quiz-editor__count-badge",children:[I.length," question",I.length>1?"s":""]})]})]}),M&&r.jsxs("div",{className:"quiz-editor__error",children:[" ",M,r.jsx("button",{onClick:()=>k(null),children:""})]}),r.jsxs("div",{className:"quiz-editor__section",children:[r.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),r.jsxs("div",{className:"quiz-editor__grid",children:[r.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[r.jsx("label",{children:"Titre du quiz *"}),r.jsx("input",{type:"text",value:o,onChange:H=>u(H.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Discipline *"}),r.jsxs("select",{value:p,onChange:H=>h(H.target.value),className:"quiz-editor__select",children:[r.jsx("option",{value:"",children:" Slectionner "}),t.map(H=>r.jsxs("option",{value:H.id,children:[H.nom," (",H.classe,")"]},H.id))]})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Dure (minutes)"}),r.jsx("input",{type:"number",value:v,onChange:H=>b(Number(H.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Note minimale (/20)"}),r.jsx("input",{type:"number",value:j,onChange:H=>S(Number(H.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field",children:[r.jsx("label",{children:"Tentatives max (0 = illimit)"}),r.jsx("input",{type:"number",value:P,onChange:H=>R(Number(H.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),r.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[r.jsx("label",{children:"Description (optionnel)"}),r.jsx(qa,{value:d,onChange:m,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),r.jsxs("div",{className:"quiz-editor__options-row",children:[r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:H=>_(H.target.checked)}),r.jsx("span",{children:" Premium"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:H=>E(H.target.checked)}),r.jsx("span",{children:" Mlanger les questions"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:C,onChange:H=>A(H.target.checked)}),r.jsx("span",{children:" Mlanger les options QCM"})]}),r.jsxs("label",{className:"quiz-editor__checkbox",children:[r.jsx("input",{type:"checkbox",checked:O,onChange:H=>T(H.target.checked)}),r.jsx("span",{children:" Afficher la correction"})]})]})]}),r.jsxs("div",{className:"quiz-editor__section",children:[r.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),r.jsx("div",{className:"quiz-editor__questions-list",children:I.map((H,pe)=>r.jsx(PR,{question:H,index:pe,isActive:K===pe,onToggle:()=>U(K===pe?null:pe),onUpdate:Ee=>ue(pe,Ee),onDelete:()=>q(pe),onDuplicate:()=>fe(pe),onMoveUp:()=>te(pe,"up"),onMoveDown:()=>te(pe,"down"),isFirst:pe===0,isLast:pe===I.length-1},H.id))}),r.jsxs("div",{className:"quiz-editor__add-wrapper",children:[r.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>Q(!J),children:"+ Ajouter une question"}),J&&r.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(Gl).map(H=>r.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>B(H),children:[r.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:rf[H]},children:tf[H]}),r.jsx("span",{children:Gl[H]})]},H))})]})]}),r.jsxs("div",{className:"quiz-editor__actions",children:[r.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:l,disabled:G,children:"Annuler"}),r.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:he,disabled:G||I.length===0,children:G?" Sauvegarde...":e?" Mettre  jour":" Crer le quiz"})]})]})},PR=({question:e,index:t,isActive:n,onToggle:a,onUpdate:l,onDelete:o,onDuplicate:u,onMoveUp:d,onMoveDown:m,isFirst:p,isLast:h})=>{const v=rf[e.type],b=tf[e.type],g=Gl[e.type],_=j=>{const S=j.replace(/<[^>]*>/g,"").trim();return S.length>80?S.substring(0,80)+"...":S||"(sans nonc)"};return r.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:v},children:[r.jsxs("div",{className:"question-editor__header",onClick:a,children:[r.jsxs("div",{className:"question-editor__header-left",children:[r.jsx("span",{className:"question-editor__number",children:t+1}),r.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:v},children:[b," ",g]}),!n&&r.jsx("span",{className:"question-editor__preview",children:_(e.enonce)})]}),r.jsxs("div",{className:"question-editor__header-right",children:[r.jsxs("span",{className:"question-editor__points",children:[e.points," pts"]}),r.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&r.jsxs("div",{className:"question-editor__body",children:[r.jsxs("div",{className:"question-editor__toolbar",children:[r.jsx("button",{type:"button",onClick:d,disabled:p,title:"Monter",children:""}),r.jsx("button",{type:"button",onClick:m,disabled:h,title:"Descendre",children:""}),r.jsx("button",{type:"button",onClick:u,title:"Dupliquer",children:""}),r.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),r.jsxs("div",{className:"question-editor__field",children:[r.jsx("label",{children:"nonc de la question *"}),r.jsx(qa,{value:e.enonce,onChange:j=>l({enonce:j}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),r.jsxs("div",{className:"question-editor__params",children:[r.jsxs("div",{className:"question-editor__param",children:[r.jsx("label",{children:"Difficult"}),r.jsxs("select",{value:e.difficulte,onChange:j=>l({difficulte:j.target.value}),children:[r.jsx("option",{value:"facile",children:" Facile"}),r.jsx("option",{value:"moyen",children:" Moyen"}),r.jsx("option",{value:"difficile",children:" Difficile"})]})]}),r.jsxs("div",{className:"question-editor__param",children:[r.jsx("label",{children:"Points"}),r.jsx("input",{type:"number",value:e.points,onChange:j=>l({points:Number(j.target.value)}),min:1,max:20})]})]}),r.jsxs("div",{className:"question-editor__type-specific",children:[e.type==="qcm_unique"&&r.jsx(qR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="qcm_multiple"&&r.jsx(RR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="drag_drop"&&r.jsx(IR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="mise_en_relation"&&r.jsx(LR,{data:e.typeData,onChange:j=>l({typeData:j})}),e.type==="essai"&&r.jsx($R,{data:e.typeData,onChange:j=>l({typeData:j})})]}),r.jsxs("div",{className:"question-editor__field",children:[r.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),r.jsx(qa,{value:e.explication||"",onChange:j=>l({explication:j}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},qR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:u.isCorrect===!0?{...m,isCorrect:!1}:m);t({options:d})},a=()=>{e.options.length>=6||t({options:[...e.options,{id:Ht("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({options:e.options.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),e.options.map((o,u)=>r.jsxs("div",{className:"type-editor__option-row",children:[r.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>n(u,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(qa,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&r.jsx("span",{className:"type-editor__correct-badge",children:""}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),e.options.length<6&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"})]})},RR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:m);t({...e,options:d})},a=()=>{e.options.length>=8||t({...e,options:[...e.options,{id:Ht("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||t({...e,options:e.options.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),e.options.map((o,u)=>r.jsxs("div",{className:"type-editor__option-row",children:[r.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:d=>n(u,{isCorrect:d.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(qa,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&r.jsx("span",{className:"type-editor__correct-badge",children:""}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,children:""})]},o.id)),e.options.length<8&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"}),r.jsxs("label",{className:"type-editor__sub-option",children:[r.jsx("input",{type:"checkbox",checked:e.scoringPartiel,onChange:o=>t({...e,scoringPartiel:o.target.checked})}),r.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},IR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.items.map((m,p)=>p===o?{...m,...u}:m);t({...e,items:d})},a=()=>{e.items.length>=10||t({...e,items:[...e.items,{id:Ht("item"),texte:"",ordreCorrect:e.items.length+1}]})},l=o=>{if(e.items.length<=2)return;const u=e.items.filter((d,m)=>m!==o).map((d,m)=>({...d,ordreCorrect:m+1}));t({...e,items:u})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),r.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),r.jsxs("div",{className:"type-editor__field-inline",children:[r.jsx("label",{children:"Consigne :"}),r.jsx("input",{type:"text",value:e.consigneOrdre,onChange:o=>t({...e,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),e.items.map((o,u)=>r.jsxs("div",{className:"type-editor__drag-row",children:[r.jsx("span",{className:"type-editor__drag-number",children:u+1}),r.jsx("div",{className:"type-editor__option-text",children:r.jsx(qa,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`lment ${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.items.length<=2,children:""})]},o.id)),e.items.length<10&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter un lment"})]})},LR=({data:e,onChange:t})=>{const n=(o,u)=>{const d=e.paires.map((m,p)=>p===o?{...m,...u}:m);t({paires:d})},a=()=>{e.paires.length>=8||t({paires:[...e.paires,{id:Ht("pair"),gauche:"",droite:""}]})},l=o=>{e.paires.length<=2||t({paires:e.paires.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),r.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),r.jsxs("div",{className:"type-editor__relation-header",children:[r.jsx("span",{children:"Colonne A (gauche)"}),r.jsx("span",{}),r.jsx("span",{children:"Colonne B (droite)"}),r.jsx("span",{})]}),e.paires.map((o,u)=>r.jsxs("div",{className:"type-editor__relation-row",children:[r.jsx("div",{className:"type-editor__relation-cell",children:r.jsx(qa,{value:o.gauche,onChange:d=>n(u,{gauche:d}),placeholder:`lment A${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("span",{className:"type-editor__relation-arrow",children:""}),r.jsx("div",{className:"type-editor__relation-cell",children:r.jsx(qa,{value:o.droite,onChange:d=>n(u,{droite:d}),placeholder:`lment B${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.paires.length<=2,children:""})]},o.id)),e.paires.length<8&&r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une paire"})]})},$R=({data:e,onChange:t})=>{const n=()=>{t({...e,motsCles:[...e.motsCles,{mot:"",poids:1,obligatoire:!1}]})},a=(o,u)=>{const d=e.motsCles.map((m,p)=>p===o?{...m,...u}:m);t({...e,motsCles:d})},l=o=>{t({...e,motsCles:e.motsCles.filter((u,d)=>d!==o)})};return r.jsxs("div",{className:"type-editor",children:[r.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),r.jsxs("div",{className:"type-editor__params-row",children:[r.jsxs("div",{className:"type-editor__param-inline",children:[r.jsx("label",{children:"Mots minimum :"}),r.jsx("input",{type:"number",value:e.nombreMotsMin||"",onChange:o=>t({...e,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),r.jsxs("div",{className:"type-editor__param-inline",children:[r.jsx("label",{children:"Mots maximum :"}),r.jsx("input",{type:"number",value:e.nombreMotsMax||"",onChange:o=>t({...e,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),r.jsxs("div",{className:"type-editor__field-inline",children:[r.jsx("label",{children:"Mode de correction :"}),r.jsxs("select",{value:e.correctionMode,onChange:o=>t({...e,correctionMode:o.target.value}),children:[r.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),r.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),r.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(e.correctionMode==="mots_cles"||e.correctionMode==="semi_auto")&&r.jsxs("div",{className:"type-editor__keywords",children:[r.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),e.motsCles.map((o,u)=>r.jsxs("div",{className:"type-editor__keyword-row",children:[r.jsx("input",{type:"text",value:o.mot,onChange:d=>a(u,{mot:d.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),r.jsxs("select",{value:o.poids,onChange:d=>a(u,{poids:Number(d.target.value)}),className:"type-editor__keyword-weight",children:[r.jsx("option",{value:1,children:"Poids 1"}),r.jsx("option",{value:2,children:"Poids 2"}),r.jsx("option",{value:3,children:"Poids 3"}),r.jsx("option",{value:4,children:"Poids 4"}),r.jsx("option",{value:5,children:"Poids 5"})]}),r.jsxs("label",{className:"type-editor__keyword-required",children:[r.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:d=>a(u,{obligatoire:d.target.checked})}),r.jsx("span",{children:"Obligatoire"})]}),r.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),children:""})]},u)),r.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),r.jsxs("div",{className:"type-editor__field-block",children:[r.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),r.jsx(qa,{value:e.reponseModele||"",onChange:o=>t({...e,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},x1=()=>{const{quizId:e}=Ha(),t=yt(),{currentUser:n}=lt(),[a,l]=y.useState([]),[o,u]=y.useState(void 0),[d,m]=y.useState(!0),[p,h]=y.useState(null);return y.useEffect(()=>{(async()=>{try{m(!0);const b=await Qa.getAll();if(l(b.map(g=>({id:g.id,nom:g.nom,classe:g.classe||""}))),e){const g=await G2(e);g?u(g):h("Quiz introuvable")}}catch(b){console.error("Erreur chargement donnes:",b),h(b.message||"Erreur de chargement")}finally{m(!1)}})()},[e]),d?r.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:r.jsx("p",{children:" Chargement..."})}):p?r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsxs("p",{style:{color:"#dc2626"},children:[" ",p]}),r.jsx("button",{onClick:()=>t(-1),children:" Retour"})]}):r.jsx(kR,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:a,auteurId:n?.uid||"",onSave:v=>{alert(" Quiz sauvegard avec succs !"),t("/admin/quiz")},onCancel:()=>t(-1)})},BR=()=>{const e=yt(),{currentUser:t}=lt(),[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,p]=y.useState(null);y.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d(null);const j=await H2();a(j)}catch(j){console.error("Erreur chargement quiz:",j),d("Impossible de charger les quiz")}finally{o(!1)}},v=async j=>{try{await DR(j),a(S=>S.filter(w=>w.id!==j)),p(null)}catch(S){console.error("Erreur suppression:",S),alert("Erreur lors de la suppression : "+S.message)}},b=j=>{const S={};return j.questions.forEach(w=>{S[w.type]=(S[w.type]||0)+1}),Object.entries(S).map(([w,E])=>`${E} ${Gl[w]||w}`).join(", ")},g=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",_=j=>j.questions.reduce((S,w)=>S+w.points,0);return r.jsxs("div",{style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),r.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),r.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),u&&r.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",u,r.jsx("button",{onClick:h,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),l&&r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!l&&n.length===0&&!u&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),r.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),r.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!l&&n.length>0&&r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(j=>r.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:j.titre}),j.isPremium&&r.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.questions.length," question",j.questions.length!==1?"s":""]}),r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",_(j)," pts"]}),r.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.duree," min"]})]}),r.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",b(j)]}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",g(j.createdAt)]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>e(`/quiz-avance/${j.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),r.jsx("button",{onClick:()=>e(`/admin/quiz/modifier/${j.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),r.jsx("button",{onClick:()=>{const S=`${window.location.origin}/quiz-avance/${j.id}`;navigator.clipboard.writeText(S).then(()=>{alert(` Lien copi !

`+S+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),m===j.id?r.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[r.jsx("button",{onClick:()=>v(j.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),r.jsx("button",{onClick:()=>p(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):r.jsx("button",{onClick:()=>p(j.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},j.id))})]})},UR=({quiz:e,userId:t,onComplete:n,onQuit:a})=>{const l=y.useMemo(()=>{let R=[...e.questions];return e.melangerQuestions&&(R=R.sort(()=>Math.random()-.5)),R},[e]),[o,u]=y.useState(0),[d,m]=y.useState(new Map),[p,h]=y.useState(e.duree*60),[v,b]=y.useState(!1),[g,_]=y.useState(null),[j,S]=y.useState(!1),w=y.useRef(Date.now());y.useEffect(()=>{if(g)return;const R=setInterval(()=>{h(I=>I<=1?(clearInterval(R),T(),0):I-1)},1e3);return()=>clearInterval(R)},[g]);const E=R=>{const I=Math.floor(R/60),L=R%60;return`${I.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},C=l[o],A=y.useCallback((R,I)=>{m(L=>{const K=new Map(L),U=K.get(R)||{questionId:R,type:C.type};return K.set(R,{...U,...I}),K})},[C]),O=R=>{R>=0&&R<l.length&&u(R)},T=async()=>{S(!1),b(!0);try{const R=Array.from(d.values()),I=Math.round((Date.now()-w.current)/1e3),L=await TR(e,t,R,I);_(L),n?.(L)}catch(R){alert("Erreur lors de la soumission : "+R.message)}finally{b(!1)}},P=d.size;return g?r.jsx("div",{className:"quiz-player quiz-player--results",children:r.jsxs("div",{className:"quiz-results",children:[r.jsxs("div",{className:`quiz-results__header ${g.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[r.jsx("div",{className:"quiz-results__emoji",children:g.reussi?"":""}),r.jsx("h2",{children:g.reussi?"Flicitations !":"Quiz termin"}),r.jsxs("div",{className:"quiz-results__score",children:[r.jsxs("span",{className:"quiz-results__note",children:[g.note20,"/20"]}),r.jsxs("span",{className:"quiz-results__detail",children:[g.score,"/",g.scoreMax," points"]})]}),r.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",E(g.tempsEcoule)]}),g.correctionManuelle&&r.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),e.afficherCorrection&&r.jsxs("div",{className:"quiz-results__details",children:[r.jsx("h3",{children:" Dtail des rponses"}),l.map((R,I)=>{const L=g.detailsParQuestion.find(K=>K.questionId===R.id);return r.jsxs("div",{className:`quiz-results__question ${L?.isCorrect?"quiz-results__question--correct":L?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[r.jsxs("div",{className:"quiz-results__q-header",children:[r.jsxs("span",{children:["Q",I+1," "," ",r.jsxs("span",{style:{color:rf[R.type]},children:[tf[R.type]," ",Gl[R.type]]})]}),r.jsxs("span",{className:"quiz-results__q-score",children:[L?.pointsObtenus||0,"/",L?.pointsMax||R.points," pts",L?.isCorrect&&" ",L?.isPartiel&&" ",!L?.isCorrect&&!L?.isPartiel&&" "]})]}),r.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:R.enonce}}),R.explication&&r.jsxs("div",{className:"quiz-results__q-explanation",children:[r.jsx("strong",{children:" Explication :"}),r.jsx("div",{dangerouslySetInnerHTML:{__html:R.explication}})]})]},R.id)})]}),r.jsx("div",{className:"quiz-results__actions",children:r.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:a,children:"Retour au tableau de bord"})})]})}):r.jsxs("div",{className:"quiz-player",children:[r.jsxs("div",{className:"quiz-player__topbar",children:[r.jsxs("div",{className:"quiz-player__info",children:[r.jsx("span",{className:"quiz-player__title",children:e.titre}),r.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",l.length]})]}),r.jsxs("div",{className:"quiz-player__topbar-right",children:[r.jsxs("span",{className:`quiz-player__timer ${p<60?"quiz-player__timer--danger":p<300?"quiz-player__timer--warning":""}`,children:[" ",E(p)]}),r.jsxs("span",{className:"quiz-player__answered",children:[P,"/",l.length," rpondue",P>1?"s":""]})]})]}),r.jsx("div",{className:"quiz-player__progress-bar",children:r.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/l.length*100}%`}})}),r.jsxs("div",{className:"quiz-player__question-area",children:[r.jsxs("div",{className:"quiz-player__question-meta",children:[r.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:rf[C.type]},children:[tf[C.type]," ",Gl[C.type]]}),r.jsxs("span",{className:"quiz-player__points",children:[C.points," point",C.points>1?"s":""]})]}),r.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:C.enonce}}),r.jsxs("div",{className:"quiz-player__answer-area",children:[C.type==="qcm_unique"&&r.jsx(FR,{question:C,reponse:d.get(C.id),onUpdate:R=>A(C.id,R),melangerOptions:e.melangerOptions}),C.type==="qcm_multiple"&&r.jsx(GR,{question:C,reponse:d.get(C.id),onUpdate:R=>A(C.id,R),melangerOptions:e.melangerOptions}),C.type==="drag_drop"&&r.jsx(HR,{question:C,reponse:d.get(C.id),onUpdate:R=>A(C.id,R)}),C.type==="mise_en_relation"&&r.jsx(QR,{question:C,reponse:d.get(C.id),onUpdate:R=>A(C.id,R)}),C.type==="essai"&&r.jsx(VR,{question:C,reponse:d.get(C.id),onUpdate:R=>A(C.id,R)})]})]}),r.jsxs("div",{className:"quiz-player__nav",children:[r.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>O(o-1),disabled:o===0,children:" Prcdent"}),r.jsx("div",{className:"quiz-player__pagination",children:l.map((R,I)=>r.jsx("button",{className:`quiz-player__page-dot ${I===o?"quiz-player__page-dot--current":""} ${d.has(R.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>O(I),title:`Question ${I+1}`,children:I+1},R.id))}),o<l.length-1?r.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>O(o+1),children:"Suivant "}):r.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>S(!0),disabled:v,children:v?" Envoi...":" Soumettre le quiz"})]}),j&&r.jsx("div",{className:"quiz-player__modal-overlay",children:r.jsxs("div",{className:"quiz-player__modal",children:[r.jsx("h3",{children:"Soumettre le quiz ?"}),r.jsxs("p",{children:["Vous avez rpondu  ",r.jsx("strong",{children:P})," question",P>1?"s":""," sur"," ",r.jsx("strong",{children:l.length}),"."]}),P<l.length&&r.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",l.length-P," question",l.length-P>1?"s":""," sans rponse !"]}),r.jsxs("div",{className:"quiz-player__modal-actions",children:[r.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>S(!1),children:"Continuer le quiz"}),r.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:T,children:"Confirmer la soumission"})]})]})})]})},FR=({question:e,reponse:t,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=y.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]);return r.jsx("div",{className:"player-qcm",children:o.map(u=>r.jsxs("label",{className:`player-qcm__option ${t?.selectedOptionId===u.id?"player-qcm__option--selected":""}`,children:[r.jsx("input",{type:"radio",name:`q_${e.id}`,checked:t?.selectedOptionId===u.id,onChange:()=>n({selectedOptionId:u.id})}),r.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:u.texte}})]},u.id))})},GR=({question:e,reponse:t,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=y.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]),u=t?.selectedOptionIds||[],d=m=>{const p=u.includes(m)?u.filter(h=>h!==m):[...u,m];n({selectedOptionIds:p})};return r.jsxs("div",{className:"player-qcm",children:[r.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(m=>r.jsxs("label",{className:`player-qcm__option ${u.includes(m.id)?"player-qcm__option--selected":""}`,children:[r.jsx("input",{type:"checkbox",checked:u.includes(m.id),onChange:()=>d(m.id)}),r.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:m.texte}})]},m.id))]})},HR=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,[l,o]=y.useState(()=>t?.ordrePropose?t.ordrePropose.map(b=>a.items.find(g=>g.id===b)).filter(Boolean):[...a.items].sort(()=>Math.random()-.5)),[u,d]=y.useState(null);y.useEffect(()=>{n({ordrePropose:l.map(b=>b.id)})},[l]);const m=b=>{d(b)},p=(b,g)=>{if(b.preventDefault(),u===null||u===g)return;const _=[...l],[j]=_.splice(u,1);_.splice(g,0,j),o(_),d(g)},h=()=>{d(null)},v=(b,g)=>{const _=g==="up"?b-1:b+1;if(_<0||_>=l.length)return;const j=[...l];[j[b],j[_]]=[j[_],j[b]],o(j)};return r.jsxs("div",{className:"player-dragdrop",children:[r.jsx("p",{className:"player-dragdrop__consigne",children:a.consigneOrdre}),r.jsx("div",{className:"player-dragdrop__list",children:l.map((b,g)=>r.jsxs("div",{className:`player-dragdrop__item ${u===g?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>m(g),onDragOver:_=>p(_,g),onDragEnd:h,children:[r.jsx("span",{className:"player-dragdrop__handle",children:""}),r.jsx("span",{className:"player-dragdrop__number",children:g+1}),r.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:b.texte}}),r.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[r.jsx("button",{type:"button",onClick:()=>v(g,"up"),disabled:g===0,children:""}),r.jsx("button",{type:"button",onClick:()=>v(g,"down"),disabled:g===l.length-1,children:""})]})]},b.id))})]})},QR=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,l=y.useMemo(()=>[...a.paires].sort(()=>Math.random()-.5),[a.paires]),[o,u]=y.useState(t?.relationsProposees||{}),[d,m]=y.useState(null);y.useEffect(()=>{n({relationsProposees:o})},[o]);const p=g=>{m(g)},h=g=>{d&&(u(_=>({..._,[d]:g})),m(null))},v=g=>{u(_=>{const j={..._};return delete j[g],j})},b=new Set(Object.values(o));return r.jsxs("div",{className:"player-relation",children:[r.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),r.jsxs("div",{className:"player-relation__columns",children:[r.jsxs("div",{className:"player-relation__col",children:[r.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),a.paires.map(g=>r.jsxs("div",{className:`player-relation__item player-relation__item--left ${d===g.id?"player-relation__item--selected":""} ${o[g.id]?"player-relation__item--matched":""}`,onClick:()=>{o[g.id]?v(g.id):p(g.id)},children:[r.jsx("div",{dangerouslySetInnerHTML:{__html:g.gauche}}),o[g.id]&&r.jsx("span",{className:"player-relation__linked",children:""})]},g.id))]}),r.jsxs("div",{className:"player-relation__col",children:[r.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),l.map(g=>r.jsxs("div",{className:`player-relation__item player-relation__item--right ${b.has(g.id)?"player-relation__item--matched":""} ${d&&!b.has(g.id)?"player-relation__item--clickable":""}`,onClick:()=>{d&&!b.has(g.id)&&h(g.id)},children:[r.jsx("div",{dangerouslySetInnerHTML:{__html:g.droite}}),b.has(g.id)&&r.jsx("span",{className:"player-relation__linked",children:""})]},g.id))]})]})]})},VR=({question:e,reponse:t,onUpdate:n})=>{const a=e.typeData,[l,o]=y.useState(t?.texteReponse||""),u=l.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return y.useEffect(()=>{n({texteReponse:l})},[l]),r.jsxs("div",{className:"player-essai",children:[r.jsxs("div",{className:"player-essai__info",children:[a.nombreMotsMin&&r.jsxs("span",{className:u<a.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",a.nombreMotsMin," mots"]}),a.nombreMotsMax&&r.jsxs("span",{className:u>a.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",a.nombreMotsMax," mots"]}),r.jsxs("span",{className:"player-essai__count",children:[u," mot",u>1?"s":""]})]}),r.jsx("textarea",{className:"player-essai__textarea",value:l,onChange:d=>o(d.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},YR=()=>{const{quizId:e}=Ha(),t=yt(),{currentUser:n}=lt(),[a,l]=y.useState(null),[o,u]=y.useState(!0),[d,m]=y.useState(null);return y.useEffect(()=>{(async()=>{if(!e){m("ID du quiz manquant"),u(!1);return}try{const h=await G2(e);if(!h){m("Quiz introuvable");return}if(h.isPremium&&!n?.isPremium){m("Ce quiz est rserv aux abonns Premium");return}l(h)}catch(h){console.error("Erreur chargement quiz:",h),m(h.message||"Impossible de charger le quiz")}finally{u(!1)}})()},[e,n]),o?r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),r.jsx("p",{children:"Chargement du quiz..."})]}):d?r.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:r.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),r.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:d}),d.includes("Premium")&&r.jsx("button",{onClick:()=>t("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),r.jsx("button",{onClick:()=>t(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):a?r.jsx(UR,{quiz:a,userId:n?.uid||"",onComplete:p=>{console.log(" Quiz termin  Note:",p.note20,"/20")},onQuit:()=>t("/dashboard")}):r.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[r.jsx("p",{children:"Quiz introuvable"}),r.jsx("button",{onClick:()=>t(-1),children:" Retour"})]})},Q2=be(ie,"quiz_results"),jy=be(ie,"progressions"),KR=async e=>{try{const t=await Lt(Q2,{...e,datePassage:Le.now()});return e.reussi&&await t3(e.userId,e.disciplineId,e.disciplineNom,e.quizId),t.id}catch(t){throw console.error("Erreur lors de la sauvegarde du rsultat :",t),t}},sm=async(e,t)=>{try{let n=Re(Q2,Ce("userId","==",e),Je("datePassage","desc"));return t&&(n=Re(n,Nn(t))),(await De(n)).docs.map(l=>({id:l.id,...l.data()}))}catch(n){throw console.error("Erreur rcupration historique :",n),n}},XR=async e=>{try{const t=await sm(e);if(t.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=t.reduce((h,v)=>h+v.pourcentage,0),a=Math.round(n/t.length),l=Math.max(...t.map(h=>h.pourcentage)),o=t.reduce((h,v)=>h+(v.tempsEcoule||0),0),u=t.filter(h=>h.reussi).length;let d=0,m=0;for(const h of t)h.reussi?(d++,m=Math.max(m,d)):d=0;let p=0;for(const h of t)if(h.reussi)p++;else break;return{totalQuizPasses:t.length,totalQuizReussis:u,moyenneGenerale:a,tempsTotal:o,meilleurScore:l,serieReussites:p,meilleureSerieReussites:Math.max(m,p)}}catch(t){return console.error("Erreur calcul stats :",t),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},WR=async e=>{try{const t=await sm(e);if(t.length===0)return[];const n={};for(const a of t){const l=a.disciplineId;n[l]||(n[l]=[]),n[l].push(a)}return Object.entries(n).map(([a,l])=>{const o=Math.round(l.reduce((v,b)=>v+b.pourcentage,0)/l.length),u=Math.max(...l.map(v=>v.pourcentage)),d=l[0].pourcentage,m=l.filter(v=>v.reussi).length,p=l.reduce((v,b)=>v+(b.tempsEcoule||0),0);let h="stable";if(l.length>=4){const v=l.slice(0,3),b=l.slice(3,6),g=v.reduce((j,S)=>j+S.pourcentage,0)/v.length,_=b.reduce((j,S)=>j+S.pourcentage,0)/b.length;g-_>5?h="up":_-g>5&&(h="down")}return{disciplineId:a,disciplineNom:l[0].disciplineNom||a,nombreQuiz:l.length,moyenne:o,meilleurScore:u,dernierScore:d,quizReussis:m,tempsTotal:p,tendance:h}})}catch(t){return console.error("Erreur progression par discipline :",t),[]}},ZR=async(e,t)=>{try{return(await sm(e,t||20)).reverse().map(a=>({date:(a.datePassage?.toDate?a.datePassage.toDate():new Date(a.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:a.pourcentage,discipline:a.disciplineNom||a.disciplineId}))}catch(n){return console.error("Erreur donnes temporelles :",n),[]}},JR=async(e,t,n)=>{const a=`${e}_${t}`,l=je(jy,a),o=await It(l);if(o.exists())return{...o.data()};const[u,d]=await Promise.all([y1("ressources",t),y1("quizzes",t)]),m={userId:e,disciplineId:t,disciplineNom:n,ressourcesVues:[],quizReussis:[],totalRessources:u,totalQuiz:d,pourcentage:0,dernierAcces:Le.now(),createdAt:Le.now(),updatedAt:Le.now()};return await am(l,m),m},y1=async(e,t)=>{try{const n=Re(be(ie,e),Ce("disciplineId","==",t));return(await De(n)).size}catch{return 0}},e3=e=>{if(e.totalRessources+e.totalQuiz===0)return 0;const n=e.totalRessources>0?e.ressourcesVues.length/e.totalRessources*40:0,a=e.totalQuiz>0?e.quizReussis.length/e.totalQuiz*60:0;return e.totalRessources===0?Math.min(100,Math.round(e.quizReussis.length/e.totalQuiz*100)):e.totalQuiz===0?Math.min(100,Math.round(e.ressourcesVues.length/e.totalRessources*100)):Math.min(100,Math.round(n+a))},t3=async(e,t,n,a)=>{try{const l=`${e}_${t}`,o=je(jy,l),u=await JR(e,t,n);if(u.quizReussis.includes(a))return await Ze(o,{dernierAcces:Le.now()}),u;const d=[...u.quizReussis,a],m={...u,quizReussis:d,dernierAcces:Le.now(),updatedAt:Le.now(),pourcentage:0};return m.pourcentage=e3(m),await am(o,m),m}catch(l){throw console.error("Erreur enregistrement quiz russi :",l),l}},r3=async e=>{try{const t=Re(jy,Ce("userId","==",e));return(await De(t)).docs.map(a=>a.data())}catch(t){return console.error("Erreur rcupration progressions :",t),[]}},n3=async e=>{try{const t=await r3(e),n=await V2(e),a=t.reduce((d,m)=>d+m.ressourcesVues.length,0),l=t.reduce((d,m)=>d+m.quizReussis.length,0),o=t.length>0?Math.round(t.reduce((d,m)=>d+m.pourcentage,0)/t.length):0,u=t.filter(d=>d.pourcentage>=100).length;return{totalRessourcesVues:a,totalQuizReussis:l,pourcentageMoyen:o,disciplinesCommencees:t.length,disciplinesCompletees:u,streakActuel:n.streakActuel,meilleurStreak:n.meilleurStreak,parDiscipline:t}}catch(t){return console.error("Erreur progression globale :",t),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},a3=()=>new Date().toISOString().split("T")[0],i3=()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]},V2=async e=>{try{const t=je(ie,"users",e),n=await It(t);if(!n.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const a=n.data();return{streakActuel:a.streakActuel||0,meilleurStreak:a.meilleurStreak||0,dernierJourAcces:a.dernierJourAcces||""}}catch(t){return console.error("Erreur rcupration streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},s3=async e=>{try{const t=je(ie,"users",e),n=await V2(e),a=a3();if(n.dernierJourAcces===a)return n;const l=i3();let o;n.dernierJourAcces===l?o=n.streakActuel+1:o=1;const u=Math.max(n.meilleurStreak,o);return await Ze(t,{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}),{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}}catch(t){return console.error("Erreur mise  jour streak :",t),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},l3=(e,t,n)=>{const a=n?.totalRessourcesVues||0;n?.totalQuizReussis;const l=n?.disciplinesCompletees||0;n?.streakActuel;const o=n?.meilleurStreak||0,u=n?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:a>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:a>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:a>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:a>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:e.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:e.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:e.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:e.moyenneGenerale>=80&&e.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:l>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:u>=3||t.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:u>=5||t.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:a>=50&&e.totalQuizReussis>=20}]},Y2=e=>{if(e<60)return`${e} s`;const t=Math.floor(e/60),n=e%60;return n>0?`${t} min ${n.toString().padStart(2,"0")} s`:`${t} min`},ql=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":"#ef4444",K2=e=>e>=80?"Excellent":e>=60?"Bien":e>=40?"Passable":" amliorer",o3=()=>{const{quizId:e}=Ha(),t=yt(),{currentUser:n}=lt(),[a,l]=y.useState(null),[o,u]=y.useState(""),[d,m]=y.useState(!0),[p,h]=y.useState(null),[v,b]=y.useState("intro"),[g,_]=y.useState(0),[j,S]=y.useState({}),[w,E]=y.useState(0),[C,A]=y.useState(0),O=y.useRef(null),[T,P]=y.useState(0),[R,I]=y.useState(0),[L,K]=y.useState(0),[U,G]=y.useState(!1),[V,M]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e){h("ID du quiz manquant."),m(!1);return}try{const H=await oR(e);if(!H){h("Quiz introuvable."),m(!1);return}l(H),E(H.duree*60);try{const Ee=(await Qa.getAll()).find(le=>le.id===H.disciplineId);u(Ee?.nom||H.disciplineId)}catch{u(H.disciplineId)}}catch(H){h("Erreur lors du chargement du quiz."),console.error(H)}finally{m(!1)}})()},[e]),y.useEffect(()=>{if(v==="playing")return O.current=setInterval(()=>{E(xe=>xe<=1?(clearInterval(O.current),B(),0):xe-1),A(xe=>xe+1)},1e3),()=>{O.current&&clearInterval(O.current)}},[v]);const k=()=>{b("playing"),_(0),S({}),A(0),a&&E(a.duree*60)},J=(xe,H)=>{S(pe=>({...pe,[xe]:H}))},Q=xe=>{a&&xe>=0&&xe<a.questions.length&&_(xe)},B=y.useCallback(async()=>{if(!a||!n||v==="review")return;O.current&&clearInterval(O.current);let xe=0,H=0,pe=0;a.questions.forEach(W=>{const F=W.points||1;H+=F,j[W.id]===W.reponseCorrecte&&(xe+=F,pe++)});const Ee=H>0?Math.round(xe/H*100):0,le=Ee>=(a.noteMinimale||50);P(xe),I(H),K(pe),b("review"),G(!0);try{const W={quizId:a.id,quizTitre:a.titre,disciplineId:a.disciplineId,disciplineNom:o,userId:n.uid,reponses:a.questions.map(F=>j[F.id]??-1),tempsEcoule:C,score:xe,totalPoints:H,pourcentage:Ee,reussi:le,nombreQuestions:a.questions.length,bonnesReponses:pe};await KR(W),M(!0)}catch(W){console.error("Erreur lors de la sauvegarde :",W)}finally{G(!1)}},[a,n,j,C,o,v]),q=xe=>{const H=Math.floor(xe/60),pe=xe%60;return`${H.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},fe=()=>{if(!a)return"";const xe=a.duree*60,H=w/xe;return H<=.1?"timer-critical":H<=.25?"timer-warning":""},te=Object.keys(j).length;if(d)return r.jsxs("div",{className:"quiz-player-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement du quiz..."})]});if(p||!a)return r.jsxs("div",{className:"quiz-player-error",children:[r.jsx(ef,{size:48}),r.jsx("h3",{children:p||"Quiz introuvable"}),r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(dx,{size:18})," Retour au tableau de bord"]})]});if(a.isPremium&&!n?.isPremium)return r.jsx("div",{className:"quiz-player-locked",children:r.jsxs("div",{className:"qp-locked-card",children:[r.jsx(mx,{size:48}),r.jsx("h3",{children:"Quiz Premium"}),r.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),r.jsxs("p",{className:"qp-locked-price",children:[" partir de ",r.jsx("strong",{children:"2 000 FCFA/mois"})]}),r.jsxs("div",{className:"qp-locked-actions",children:[r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/premium"),children:[r.jsx(Zr,{size:18})," Devenir Premium"]}),r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(xv,{size:18})," Retour"]})]})]})});if(v==="intro")return r.jsx("div",{className:"quiz-player-intro",children:r.jsxs("div",{className:"qp-intro-card",children:[r.jsxs("div",{className:"qp-intro-header",children:[r.jsxs("button",{className:"qp-back-btn",onClick:()=>t(-1),children:[r.jsx(xv,{size:20})," Retour"]}),a.isPremium&&r.jsxs("span",{className:"qp-badge qp-badge-premium",children:[r.jsx(Zr,{size:12})," Premium"]})]}),r.jsxs("div",{className:"qp-intro-content",children:[r.jsx("h1",{className:"qp-intro-title",children:a.titre}),r.jsx("span",{className:"qp-intro-discipline",children:o}),r.jsxs("div",{className:"qp-intro-stats",children:[r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(jn,{size:20}),r.jsxs("div",{children:[r.jsx("span",{className:"qp-intro-stat-value",children:a.questions.length}),r.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(Fl,{size:20}),r.jsxs("div",{children:[r.jsxs("span",{className:"qp-intro-stat-value",children:[a.duree," min"]}),r.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),r.jsxs("div",{className:"qp-intro-stat",children:[r.jsx(Li,{size:20}),r.jsxs("div",{children:[r.jsxs("span",{className:"qp-intro-stat-value",children:[a.noteMinimale||50,"%"]}),r.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),r.jsxs("div",{className:"qp-intro-instructions",children:[r.jsx("h3",{children:"Instructions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),r.jsx("li",{children:"Chaque question a une seule bonne rponse"}),r.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),r.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),r.jsxs("li",{children:["Il faut obtenir au moins ",a.noteMinimale||50,"% pour russir"]})]})]})]}),r.jsxs("button",{className:"qp-btn qp-btn-start",onClick:k,children:[r.jsx(xc,{size:20})," Commencer le quiz"]})]})});if(v==="playing"){const xe=a.questions[g];return r.jsxs("div",{className:"quiz-player-game",children:[r.jsxs("div",{className:"qp-game-header",children:[r.jsxs("div",{className:"qp-game-info",children:[r.jsx("span",{className:"qp-game-title",children:a.titre}),r.jsx("span",{className:"qp-game-discipline",children:o})]}),r.jsxs("div",{className:`qp-timer ${fe()}`,children:[r.jsx(Aq,{size:18}),r.jsx("span",{children:q(w)})]})]}),r.jsx("div",{className:"qp-progress-bar",children:r.jsx("div",{className:"qp-progress-fill",style:{width:`${(g+1)/a.questions.length*100}%`}})}),r.jsxs("div",{className:"qp-game-content",children:[r.jsxs("div",{className:"qp-question-header",children:[r.jsxs("span",{className:"qp-question-number",children:["Question ",g+1,"/",a.questions.length]}),r.jsxs("span",{className:"qp-question-points",children:[xe.points||1," pt(s)"]})]}),r.jsx("h2",{className:"qp-question-text",children:xe.question}),r.jsx("div",{className:"qp-options-list",children:xe.options.map((H,pe)=>r.jsxs("button",{className:`qp-option ${j[xe.id]===pe?"selected":""}`,onClick:()=>J(xe.id,pe),children:[r.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+pe)}),r.jsx("span",{className:"qp-option-text",children:H}),j[xe.id]===pe&&r.jsx(Tt,{size:18,className:"qp-option-check"})]},pe))})]}),r.jsxs("div",{className:"qp-game-footer",children:[r.jsx("div",{className:"qp-question-indicators",children:a.questions.map((H,pe)=>r.jsx("button",{className:`qp-indicator ${pe===g?"active":""} ${j[H.id]!==void 0?"answered":""}`,onClick:()=>Q(pe),children:pe+1},H.id))}),r.jsxs("div",{className:"qp-nav-buttons",children:[r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>Q(g-1),disabled:g===0,children:[r.jsx(xv,{size:16})," Prcdent"]}),g<a.questions.length-1?r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>Q(g+1),children:["Suivant ",r.jsx(fs,{size:16})]}):r.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:B,disabled:te<a.questions.length,children:[r.jsx(Tt,{size:16}),"Soumettre (",te,"/",a.questions.length,")"]})]})]})]})}const ue=R>0?Math.round(T/R*100):0,he=ue>=(a.noteMinimale||50);return r.jsxs("div",{className:"quiz-player-review",children:[r.jsxs("div",{className:`qp-score-card ${he?"success":"fail"}`,children:[r.jsx("div",{className:"qp-score-icon",children:he?r.jsx(Li,{size:48}):r.jsx(ef,{size:48})}),r.jsx("h2",{className:"qp-score-title",children:he?"Flicitations ! ":"Continuez vos efforts ! "}),r.jsxs("div",{className:"qp-score-circle",style:{borderColor:ql(ue)},children:[r.jsxs("span",{className:"qp-score-value",children:[ue,"%"]}),r.jsx("span",{className:"qp-score-label",children:K2(ue)})]}),r.jsxs("div",{className:"qp-score-details",children:[r.jsxs("div",{className:"qp-score-detail",children:[r.jsxs("span",{children:[L,"/",a.questions.length]}),r.jsx("small",{children:"Bonnes rponses"})]}),r.jsxs("div",{className:"qp-score-detail",children:[r.jsxs("span",{children:[T,"/",R]}),r.jsx("small",{children:"Points"})]}),r.jsxs("div",{className:"qp-score-detail",children:[r.jsx("span",{children:Y2(C)}),r.jsx("small",{children:"Temps"})]})]}),U&&r.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),V&&r.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),r.jsxs("div",{className:"qp-review-actions",children:[r.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>t("/eleve/dashboard"),children:[r.jsx(dx,{size:18})," Tableau de bord"]}),r.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:k,children:[r.jsx(Eq,{size:18})," Recommencer"]})]}),r.jsxs("div",{className:"qp-review-questions",children:[r.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),a.questions.map((xe,H)=>{const pe=j[xe.id],Ee=pe===xe.reponseCorrecte;return r.jsxs("div",{className:`qp-review-question ${Ee?"correct":"incorrect"}`,children:[r.jsxs("div",{className:"qp-review-question-header",children:[r.jsxs("span",{className:"qp-review-q-number",children:["Q",H+1]}),Ee?r.jsxs("span",{className:"qp-review-badge correct",children:[r.jsx(Tt,{size:14})," Correct"]}):r.jsxs("span",{className:"qp-review-badge incorrect",children:[r.jsx(px,{size:14})," Incorrect"]}),r.jsxs("span",{className:"qp-review-q-points",children:[Ee?xe.points||1:0,"/",xe.points||1," pt(s)"]})]}),r.jsx("p",{className:"qp-review-q-text",children:xe.question}),r.jsx("div",{className:"qp-review-options",children:xe.options.map((le,W)=>{let F="qp-review-option";return W===xe.reponseCorrecte&&(F+=" correct-answer"),W===pe&&!Ee&&(F+=" wrong-answer"),r.jsxs("div",{className:F,children:[r.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+W)}),r.jsx("span",{children:le}),W===xe.reponseCorrecte&&r.jsx(Tt,{size:14,className:"qp-review-check"}),W===pe&&!Ee&&r.jsx(px,{size:14,className:"qp-review-x"})]},W)})}),xe.explication&&r.jsxs("div",{className:"qp-review-explication",children:[r.jsx("strong",{children:" Explication :"})," ",xe.explication]})]},xe.id)})]})]})};function X2(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=X2(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function pt(){for(var e,t,n=0,a="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=X2(e))&&(a&&(a+=" "),a+=t);return a}var c3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ny(e){if(typeof e!="string")return!1;var t=c3;return t.includes(e)}var u3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],d3=new Set(u3);function W2(e){return typeof e!="string"?!1:d3.has(e)}function Z2(e){return typeof e=="string"&&e.startsWith("data-")}function Rn(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(W2(n)||Z2(n))&&(t[n]=e[n]);return t}function Fc(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Rn(t)}return typeof e=="object"&&!Array.isArray(e)?Rn(e):null}function Ar(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(W2(n)||Z2(n)||Ny(n))&&(t[n]=e[n]);return t}function f3(e){return e==null?null:y.isValidElement(e)?Ar(e.props):typeof e=="object"&&!Array.isArray(e)?Ar(e):null}var m3=["children","width","height","viewBox","className","style","title","desc"];function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hx.apply(null,arguments)}function p3(e,t){if(e==null)return{};var n,a,l=h3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function h3(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var J2=y.forwardRef((e,t)=>{var{children:n,width:a,height:l,viewBox:o,className:u,style:d,title:m,desc:p}=e,h=p3(e,m3),v=o||{width:a,height:l,x:0,y:0},b=pt("recharts-surface",u);return y.createElement("svg",hx({},Ar(h),{className:b,width:a,height:l,style:d,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,p),n)}),v3=["children","className"];function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vx.apply(null,arguments)}function g3(e,t){if(e==null)return{};var n,a,l=x3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function x3(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var _n=y.forwardRef((e,t)=>{var{children:n,className:a}=e,l=g3(e,v3),o=pt("recharts-layer",a);return y.createElement("g",vx({className:o},Ar(l),{ref:t}),n)}),y3=y.createContext(null);function xt(e){return function(){return e}}const eE=Math.cos,nf=Math.sin,$n=Math.sqrt,af=Math.PI,lm=2*af,gx=Math.PI,xx=2*gx,ms=1e-6,b3=xx-ms;function tE(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function j3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tE;const n=10**t;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}class N3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tE:j3(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,l){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,n,a,l,o,u){this._append`C${+t},${+n},${+a},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(t,n,a,l,o){if(t=+t,n=+n,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,d=this._y1,m=a-t,p=l-n,h=u-t,v=d-n,b=h*h+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>ms)if(!(Math.abs(v*m-p*h)>ms)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=a-u,_=l-d,j=m*m+p*p,S=g*g+_*_,w=Math.sqrt(j),E=Math.sqrt(b),C=o*Math.tan((gx-Math.acos((j+b-S)/(2*w*E)))/2),A=C/E,O=C/w;Math.abs(A-1)>ms&&this._append`L${t+A*h},${n+A*v}`,this._append`A${o},${o},0,0,${+(v*g>h*_)},${this._x1=t+O*m},${this._y1=n+O*p}`}}arc(t,n,a,l,o,u){if(t=+t,n=+n,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(l),m=a*Math.sin(l),p=t+d,h=n+m,v=1^u,b=u?l-o:o-l;this._x1===null?this._append`M${p},${h}`:(Math.abs(this._x1-p)>ms||Math.abs(this._y1-h)>ms)&&this._append`L${p},${h}`,a&&(b<0&&(b=b%xx+xx),b>b3?this._append`A${a},${a},0,1,${v},${t-d},${n-m}A${a},${a},0,1,${v},${this._x1=p},${this._y1=h}`:b>ms&&this._append`A${a},${a},0,${+(b>=gx)},${v},${this._x1=t+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(t,n,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function _y(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new N3(t)}function Sy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rE(e){this._context=e}rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function om(e){return new rE(e)}function nE(e){return e[0]}function aE(e){return e[1]}function iE(e,t){var n=xt(!0),a=null,l=om,o=null,u=_y(d);e=typeof e=="function"?e:e===void 0?nE:xt(e),t=typeof t=="function"?t:t===void 0?aE:xt(t);function d(m){var p,h=(m=Sy(m)).length,v,b=!1,g;for(a==null&&(o=l(g=u())),p=0;p<=h;++p)!(p<h&&n(v=m[p],p,m))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(v,p,m),+t(v,p,m));if(g)return o=null,g+""||null}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:xt(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:xt(+m),d):t},d.defined=function(m){return arguments.length?(n=typeof m=="function"?m:xt(!!m),d):n},d.curve=function(m){return arguments.length?(l=m,a!=null&&(o=l(a)),d):l},d.context=function(m){return arguments.length?(m==null?a=o=null:o=l(a=m),d):a},d}function Sd(e,t,n){var a=null,l=xt(!0),o=null,u=om,d=null,m=_y(p);e=typeof e=="function"?e:e===void 0?nE:xt(+e),t=typeof t=="function"?t:xt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aE:xt(+n);function p(v){var b,g,_,j=(v=Sy(v)).length,S,w=!1,E,C=new Array(j),A=new Array(j);for(o==null&&(d=u(E=m())),b=0;b<=j;++b){if(!(b<j&&l(S=v[b],b,v))===w)if(w=!w)g=b,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),_=b-1;_>=g;--_)d.point(C[_],A[_]);d.lineEnd(),d.areaEnd()}w&&(C[b]=+e(S,b,v),A[b]=+t(S,b,v),d.point(a?+a(S,b,v):C[b],n?+n(S,b,v):A[b]))}if(E)return d=null,E+""||null}function h(){return iE().defined(l).curve(u).context(o)}return p.x=function(v){return arguments.length?(e=typeof v=="function"?v:xt(+v),a=null,p):e},p.x0=function(v){return arguments.length?(e=typeof v=="function"?v:xt(+v),p):e},p.x1=function(v){return arguments.length?(a=v==null?null:typeof v=="function"?v:xt(+v),p):a},p.y=function(v){return arguments.length?(t=typeof v=="function"?v:xt(+v),n=null,p):t},p.y0=function(v){return arguments.length?(t=typeof v=="function"?v:xt(+v),p):t},p.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:xt(+v),p):n},p.lineX0=p.lineY0=function(){return h().x(e).y(t)},p.lineY1=function(){return h().x(e).y(n)},p.lineX1=function(){return h().x(a).y(t)},p.defined=function(v){return arguments.length?(l=typeof v=="function"?v:xt(!!v),p):l},p.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),p):u},p.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),p):o},p}class sE{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function _3(e){return new sE(e,!0)}function S3(e){return new sE(e,!1)}const wy={draw(e,t){const n=$n(t/af);e.moveTo(n,0),e.arc(0,0,n,0,lm)}},w3={draw(e,t){const n=$n(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},lE=$n(1/3),C3=lE*2,A3={draw(e,t){const n=$n(t/C3),a=n*lE;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},E3={draw(e,t){const n=$n(t),a=-n/2;e.rect(a,a,n,n)}},z3=.8908130915292852,oE=nf(af/10)/nf(7*af/10),O3=nf(lm/10)*oE,D3=-eE(lm/10)*oE,M3={draw(e,t){const n=$n(t*z3),a=O3*n,l=D3*n;e.moveTo(0,-n),e.lineTo(a,l);for(let o=1;o<5;++o){const u=lm*o/5,d=eE(u),m=nf(u);e.lineTo(m*n,-d*n),e.lineTo(d*a-m*l,m*a+d*l)}e.closePath()}},zv=$n(3),T3={draw(e,t){const n=-$n(t/(zv*3));e.moveTo(0,n*2),e.lineTo(-zv*n,-n),e.lineTo(zv*n,-n),e.closePath()}},gn=-.5,xn=$n(3)/2,yx=1/$n(12),k3=(yx/2+1)*3,P3={draw(e,t){const n=$n(t/k3),a=n/2,l=n*yx,o=a,u=n*yx+n,d=-o,m=u;e.moveTo(a,l),e.lineTo(o,u),e.lineTo(d,m),e.lineTo(gn*a-xn*l,xn*a+gn*l),e.lineTo(gn*o-xn*u,xn*o+gn*u),e.lineTo(gn*d-xn*m,xn*d+gn*m),e.lineTo(gn*a+xn*l,gn*l-xn*a),e.lineTo(gn*o+xn*u,gn*u-xn*o),e.lineTo(gn*d+xn*m,gn*m-xn*d),e.closePath()}};function q3(e,t){let n=null,a=_y(l);e=typeof e=="function"?e:xt(e||wy),t=typeof t=="function"?t:xt(t===void 0?64:+t);function l(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:xt(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:xt(+o),l):t},l.context=function(o){return arguments.length?(n=o??null,l):n},l}function sf(){}function lf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cE(e){this._context=e}cE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function R3(e){return new cE(e)}function uE(e){this._context=e}uE.prototype={areaStart:sf,areaEnd:sf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:lf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I3(e){return new uE(e)}function dE(e){this._context=e}dE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:lf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function L3(e){return new dE(e)}function fE(e){this._context=e}fE.prototype={areaStart:sf,areaEnd:sf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function $3(e){return new fE(e)}function b1(e){return e<0?-1:1}function j1(e,t,n){var a=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),u=(n-e._y1)/(l||a<0&&-0),d=(o*l+u*a)/(a+l);return(b1(o)+b1(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(d))||0}function N1(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ov(e,t,n){var a=e._x0,l=e._y0,o=e._x1,u=e._y1,d=(o-a)/3;e._context.bezierCurveTo(a+d,l+d*t,o-d,u-d*n,o,u)}function of(e){this._context=e}of.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ov(this,this._t0,N1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ov(this,N1(this,n=j1(this,e,t)),n);break;default:Ov(this,this._t0,n=j1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function mE(e){this._context=new pE(e)}(mE.prototype=Object.create(of.prototype)).point=function(e,t){of.prototype.point.call(this,t,e)};function pE(e){this._context=e}pE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,l,o){this._context.bezierCurveTo(t,e,a,n,o,l)}};function B3(e){return new of(e)}function U3(e){return new mE(e)}function hE(e){this._context=e}hE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=_1(e),l=_1(t),o=0,u=1;u<n;++o,++u)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[u],t[u]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _1(e){var t,n=e.length-1,a,l=new Array(n),o=new Array(n),u=new Array(n);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],t=1;t<n-1;++t)l[t]=1,o[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[n-1]=2,o[n-1]=7,u[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=l[t]/o[t-1],o[t]-=a,u[t]-=a*u[t-1];for(l[n-1]=u[n-1]/o[n-1],t=n-2;t>=0;--t)l[t]=(u[t]-l[t+1])/o[t];for(o[n-1]=(e[n]+l[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function F3(e){return new hE(e)}function cm(e,t){this._context=e,this._t=t}cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function G3(e){return new cm(e,.5)}function H3(e){return new cm(e,0)}function Q3(e){return new cm(e,1)}function Cs(e,t){if((u=e.length)>1)for(var n=1,a,l,o=e[t[0]],u,d=o.length;n<u;++n)for(l=o,o=e[t[n]],a=0;a<d;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function bx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function V3(e,t){return e[t]}function Y3(e){const t=[];return t.key=e,t}function K3(){var e=xt([]),t=bx,n=Cs,a=V3;function l(o){var u=Array.from(e.apply(this,arguments),Y3),d,m=u.length,p=-1,h;for(const v of o)for(d=0,++p;d<m;++d)(u[d][p]=[0,+a(v,u[d].key,p,o)]).data=v;for(d=0,h=Sy(t(u));d<m;++d)u[h[d]].index=d;return n(u,h),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:xt(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:xt(+o),l):a},l.order=function(o){return arguments.length?(t=o==null?bx:typeof o=="function"?o:xt(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(n=o??Cs,l):n},l}function X3(e,t){if((a=e.length)>0){for(var n,a,l=0,o=e[0].length,u;l<o;++l){for(u=n=0;n<a;++n)u+=e[n][l][1]||0;if(u)for(n=0;n<a;++n)e[n][l][1]/=u}Cs(e,t)}}function W3(e,t){if((l=e.length)>0){for(var n=0,a=e[t[0]],l,o=a.length;n<o;++n){for(var u=0,d=0;u<l;++u)d+=e[u][n][1]||0;a[n][1]+=a[n][0]=-d/2}Cs(e,t)}}function Z3(e,t){if(!(!((u=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var n=0,a=1,l,o,u;a<o;++a){for(var d=0,m=0,p=0;d<u;++d){for(var h=e[t[d]],v=h[a][1]||0,b=h[a-1][1]||0,g=(v-b)/2,_=0;_<d;++_){var j=e[t[_]],S=j[a][1]||0,w=j[a-1][1]||0;g+=S-w}m+=v,p+=g*v}l[a-1][1]+=l[a-1][0]=n,m&&(n-=p/m)}l[a-1][1]+=l[a-1][0]=n,Cs(e,t)}}var Dv={},Mv={},S1;function J3(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Mv)),Mv}var Tv={},w1;function vE(){return w1||(w1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Tv)),Tv}var kv={},C1;function Cy(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(kv)),kv}var Pv={},qv={},A1;function e5(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=t})(qv)),qv}var E1;function Ay(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e5(),n=Cy();function a(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],u=l.length;if(u===0)return o;let d=0,m="",p="",h=!1;for(l.charCodeAt(0)===46&&(o.push(""),d++);d<u;){const v=l[d];p?v==="\\"&&d+1<u?(d++,m+=l[d]):v===p?p="":m+=v:h?v==='"'||v==="'"?p=v:v==="]"?(h=!1,o.push(m),m=""):m+=v:v==="["?(h=!0,m&&(o.push(m),m="")):v==="."?m&&(o.push(m),m=""):m+=v,d++}return m&&o.push(m),o}e.toPath=a})(Pv)),Pv}var z1;function Ey(){return z1||(z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J3(),n=vE(),a=Cy(),l=Ay();function o(d,m,p){if(d==null)return p;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?n.isDeepKey(m)?o(d,l.toPath(m),p):p:h}case"number":case"symbol":{typeof m=="number"&&(m=a.toKey(m));const h=d[m];return h===void 0?p:h}default:{if(Array.isArray(m))return u(d,m,p);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?p:h}}}function u(d,m,p){if(m.length===0)return p;let h=d;for(let v=0;v<m.length;v++){if(h==null||t.isUnsafeProperty(m[v]))return p;h=h[m[v]]}return h===void 0?p:h}e.get=o})(Dv)),Dv}var Rv,O1;function t5(){return O1||(O1=1,Rv=Ey().get),Rv}var r5=t5();const Hl=Ga(r5);var n5=4;function Mi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n5,n=10**t,a=Math.round(e*n)/n;return Object.is(a,-0)?0:a}function kt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.reduce((l,o,u)=>{var d=n[u-1];return typeof d=="string"?l+d+o:d!==void 0?l+Mi(d)+o:l+o},"")}var Ir=e=>e===0?0:e>0?1:-1,ra=e=>typeof e=="number"&&e!=+e,As=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Se=e=>(typeof e=="number"||e instanceof Number)&&!ra(e),na=e=>Se(e)||typeof e=="string",a5=0,wc=e=>{var t=++a5;return"".concat(e||"").concat(t)},In=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Se(t)&&typeof t!="string")return a;var o;if(As(t)){if(n==null)return a;var u=t.indexOf("%");o=n*parseFloat(t.slice(0,u))/100}else o=+t;return ra(o)&&(o=a),l&&n!=null&&o>n&&(o=n),o},gE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[String(e[a])])n[String(e[a])]=!0;else return!0;return!1};function Pt(e,t,n){return Se(e)&&Se(t)?Mi(e+n*(t-e)):t}function xE(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Hl(a,t))===n)}var zt=e=>e===null||typeof e>"u",Gc=e=>zt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Lr(e){return e!=null}function Ps(){}var i5=["type","size","sizeType"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jx.apply(null,arguments)}function D1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function M1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D1(Object(n),!0).forEach(function(a){s5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function s5(e,t,n){return(t=l5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l5(e){var t=o5(e,"string");return typeof t=="symbol"?t:t+""}function o5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c5(e,t){if(e==null)return{};var n,a,l=u5(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function u5(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var yE={symbolCircle:wy,symbolCross:w3,symbolDiamond:A3,symbolSquare:E3,symbolStar:M3,symbolTriangle:T3,symbolWye:P3},d5=Math.PI/180,f5=e=>{var t="symbol".concat(Gc(e));return yE[t]||wy},m5=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*d5;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},p5=(e,t)=>{yE["symbol".concat(Gc(e))]=t},bE=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,l=c5(e,i5),o=M1(M1({},l),{},{type:t,size:n,sizeType:a}),u="circle";typeof t=="string"&&(u=t);var d=()=>{var b=f5(u),g=q3().type(b).size(m5(n,a,u)),_=g();if(_!==null)return _},{className:m,cx:p,cy:h}=o,v=Ar(o);return Se(p)&&Se(h)&&Se(n)?y.createElement("path",jx({},v,{className:pt("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};bE.registerSymbol=p5;var jE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,zy=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(l=>{Ny(l)&&(a[l]=(o=>n[l](n,o)))}),a},h5=(e,t,n)=>a=>(e(t,n,a),null),Oy=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];Ny(l)&&typeof o=="function"&&(a||(a={}),a[l]=h5(o,t,n))}),a};function T1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function v5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T1(Object(n),!0).forEach(function(a){g5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function g5(e,t,n){return(t=x5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x5(e){var t=y5(e,"string");return typeof t=="symbol"?t:t+""}function y5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zr(e,t){var n=v5({},e),a=t,l=Object.keys(t),o=l.reduce((u,d)=>(u[d]===void 0&&a[d]!==void 0&&(u[d]=a[d]),u),n);return o}var Iv={},Lv={},k1;function b5(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const l=new Map;for(let o=0;o<n.length;o++){const u=n[o],d=a(u,o,n);l.has(d)||l.set(d,u)}return Array.from(l.values())}e.uniqBy=t})(Lv)),Lv}var $v={},P1;function j5(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return function(...l){return n.apply(this,l.slice(0,a))}}e.ary=t})($v)),$v}var Bv={},q1;function NE(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Bv)),Bv}var Uv={},Fv={},Gv={},R1;function N5(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Gv)),Gv}var I1;function Dy(){return I1||(I1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N5();function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(Fv)),Fv}var Hv={},L1;function _5(){return L1||(L1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Hv)),Hv}var $1;function S5(){return $1||($1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dy(),n=_5();function a(l){return n.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=a})(Uv)),Uv}var Qv={},Vv={},B1;function w5(){return B1||(B1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ey();function n(a){return function(l){return t.get(l,a)}}e.property=n})(Vv)),Vv}var Yv={},Kv={},Xv={},Wv={},U1;function _E(){return U1||(U1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Wv)),Wv}var Zv={},F1;function SE(){return F1||(F1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Zv)),Zv}var Jv={},G1;function wE(){return G1||(G1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(Jv)),Jv}var H1;function C5(){return H1||(H1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_E(),n=SE(),a=wE();function l(h,v,b){return typeof b!="function"?l(h,v,()=>{}):o(h,v,function g(_,j,S,w,E,C){const A=b(_,j,S,w,E,C);return A!==void 0?!!A:o(_,j,g,C)},new Map)}function o(h,v,b,g){if(v===h)return!0;switch(typeof v){case"object":return u(h,v,b,g);case"function":return Object.keys(v).length>0?o(h,{...v},b,g):a.isEqualsSameValueZero(h,v);default:return t.isObject(h)?typeof v=="string"?v==="":!0:a.isEqualsSameValueZero(h,v)}}function u(h,v,b,g){if(v==null)return!0;if(Array.isArray(v))return m(h,v,b,g);if(v instanceof Map)return d(h,v,b,g);if(v instanceof Set)return p(h,v,b,g);const _=Object.keys(v);if(h==null||n.isPrimitive(h))return _.length===0;if(_.length===0)return!0;if(g?.has(v))return g.get(v)===h;g?.set(v,h);try{for(let j=0;j<_.length;j++){const S=_[j];if(!n.isPrimitive(h)&&!(S in h)||v[S]===void 0&&h[S]!==void 0||v[S]===null&&h[S]!==null||!b(h[S],v[S],S,h,v,g))return!1}return!0}finally{g?.delete(v)}}function d(h,v,b,g){if(v.size===0)return!0;if(!(h instanceof Map))return!1;for(const[_,j]of v.entries()){const S=h.get(_);if(b(S,j,_,h,v,g)===!1)return!1}return!0}function m(h,v,b,g){if(v.length===0)return!0;if(!Array.isArray(h))return!1;const _=new Set;for(let j=0;j<v.length;j++){const S=v[j];let w=!1;for(let E=0;E<h.length;E++){if(_.has(E))continue;const C=h[E];let A=!1;if(b(C,S,j,h,v,g)&&(A=!0),A){_.add(E),w=!0;break}}if(!w)return!1}return!0}function p(h,v,b,g){return v.size===0?!0:h instanceof Set?m([...h],[...v],b,g):!1}e.isMatchWith=l,e.isSetMatch=p})(Xv)),Xv}var Q1;function CE(){return Q1||(Q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5();function n(a,l){return t.isMatchWith(a,l,()=>{})}e.isMatch=n})(Kv)),Kv}var eg={},tg={},rg={},V1;function A5(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(rg)),rg}var ng={},Y1;function My(){return Y1||(Y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(ng)),ng}var ag={},K1;function AE(){return K1||(K1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",d="[object Date]",m="[object Map]",p="[object Set]",h="[object Array]",v="[object Function]",b="[object ArrayBuffer]",g="[object Object]",_="[object Error]",j="[object DataView]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",A="[object BigUint64Array]",O="[object Int8Array]",T="[object Int16Array]",P="[object Int32Array]",R="[object BigInt64Array]",I="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=b,e.arrayTag=h,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=A,e.booleanTag=l,e.dataViewTag=j,e.dateTag=d,e.errorTag=_,e.float32ArrayTag=I,e.float64ArrayTag=L,e.functionTag=v,e.int16ArrayTag=T,e.int32ArrayTag=P,e.int8ArrayTag=O,e.mapTag=m,e.numberTag=a,e.objectTag=g,e.regexpTag=t,e.setTag=p,e.stringTag=n,e.symbolTag=u,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=w})(ag)),ag}var ig={},X1;function E5(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(ig)),ig}var W1;function EE(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5(),n=My(),a=AE(),l=SE(),o=E5();function u(h,v){return d(h,void 0,h,new Map,v)}function d(h,v,b,g=new Map,_=void 0){const j=_?.(h,v,b,g);if(j!==void 0)return j;if(l.isPrimitive(h))return h;if(g.has(h))return g.get(h);if(Array.isArray(h)){const S=new Array(h.length);g.set(h,S);for(let w=0;w<h.length;w++)S[w]=d(h[w],w,b,g,_);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;g.set(h,S);for(const[w,E]of h)S.set(w,d(E,w,b,g,_));return S}if(h instanceof Set){const S=new Set;g.set(h,S);for(const w of h)S.add(d(w,void 0,b,g,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);g.set(h,S);for(let w=0;w<h.length;w++)S[w]=d(h[w],w,b,g,_);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return g.set(h,S),m(S,h,b,g,_),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return g.set(h,S),m(S,h,b,g,_),S}if(typeof Blob<"u"&&h instanceof Blob){const S=new Blob([h],{type:h.type});return g.set(h,S),m(S,h,b,g,_),S}if(h instanceof Error){const S=new h.constructor;return g.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,m(S,h,b,g,_),S}if(h instanceof Boolean){const S=new Boolean(h.valueOf());return g.set(h,S),m(S,h,b,g,_),S}if(h instanceof Number){const S=new Number(h.valueOf());return g.set(h,S),m(S,h,b,g,_),S}if(h instanceof String){const S=new String(h.valueOf());return g.set(h,S),m(S,h,b,g,_),S}if(typeof h=="object"&&p(h)){const S=Object.create(Object.getPrototypeOf(h));return g.set(h,S),m(S,h,b,g,_),S}return h}function m(h,v,b=h,g,_){const j=[...Object.keys(v),...t.getSymbols(v)];for(let S=0;S<j.length;S++){const w=j[S],E=Object.getOwnPropertyDescriptor(h,w);(E==null||E.writable)&&(h[w]=d(v[w],w,b,g,_))}}function p(h){switch(n.getTag(h)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=m})(tg)),tg}var Z1;function z5(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EE();function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(eg)),eg}var J1;function O5(){return J1||(J1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CE(),n=z5();function a(l){return l=n.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=a})(Yv)),Yv}var sg={},lg={},og={},eS;function D5(){return eS||(eS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EE(),n=My(),a=AE();function l(o,u){return t.cloneDeepWith(o,(d,m,p,h)=>{const v=u?.(d,m,p,h);if(v!==void 0)return v;if(typeof o=="object"){if(n.getTag(o)===a.objectTag&&typeof o.constructor!="function"){const b={};return h.set(o,b),t.copyProperties(b,o,p,h),b}switch(Object.prototype.toString.call(o)){case a.numberTag:case a.stringTag:case a.booleanTag:{const b=new o.constructor(o?.valueOf());return t.copyProperties(b,o),b}case a.argumentsTag:{const b={};return t.copyProperties(b,o),b.length=o.length,b[Symbol.iterator]=o[Symbol.iterator],b}default:return}}})}e.cloneDeepWith=l})(og)),og}var tS;function M5(){return tS||(tS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D5();function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(lg)),lg}var cg={},ug={},rS;function zE(){return rS||(rS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(ug)),ug}var dg={},nS;function T5(){return nS||(nS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=My();function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(dg)),dg}var aS;function k5(){return aS||(aS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vE(),n=zE(),a=T5(),l=Ay();function o(u,d){let m;if(Array.isArray(d)?m=d:typeof d=="string"&&t.isDeepKey(d)&&u?.[d]==null?m=l.toPath(d):m=[d],m.length===0)return!1;let p=u;for(let h=0;h<m.length;h++){const v=m[h];if((p==null||!Object.hasOwn(p,v))&&!((Array.isArray(p)||a.isArguments(p))&&n.isIndex(v)&&v<p.length))return!1;p=p[v]}return!0}e.has=o})(cg)),cg}var iS;function P5(){return iS||(iS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CE(),n=Cy(),a=M5(),l=Ey(),o=k5();function u(d,m){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return m=a.cloneDeep(m),function(p){const h=l.get(p,d);return h===void 0?o.has(p,d):m===void 0?h===void 0:t.isMatch(h,m)}}e.matchesProperty=u})(sg)),sg}var sS;function q5(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NE(),n=w5(),a=O5(),l=P5();function o(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):a.matches(u);case"string":case"symbol":case"number":return n.property(u)}}e.iteratee=o})(Qv)),Qv}var lS;function R5(){return lS||(lS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b5(),n=j5(),a=NE(),l=S5(),o=q5();function u(d,m=a.identity){return l.isArrayLikeObject(d)?t.uniqBy(Array.from(d),n.ary(o.iteratee(m),1)):[]}e.uniqBy=u})(Iv)),Iv}var fg,oS;function I5(){return oS||(oS=1,fg=R5().uniqBy),fg}var L5=I5();const cS=Ga(L5);function $5(e,t,n){return t===!0?cS(e,n):typeof t=="function"?cS(e,t):e}var mg={exports:{}},pg={},hg={exports:{}},vg={};var uS;function B5(){if(uS)return vg;uS=1;var e=rm();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function d(v,b){var g=b(),_=a({inst:{value:g,getSnapshot:b}}),j=_[0].inst,S=_[1];return o(function(){j.value=g,j.getSnapshot=b,m(j)&&S({inst:j})},[v,g,b]),l(function(){return m(j)&&S({inst:j}),v(function(){m(j)&&S({inst:j})})},[v]),u(g),g}function m(v){var b=v.getSnapshot;v=v.value;try{var g=b();return!n(v,g)}catch{return!0}}function p(v,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return vg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,vg}var dS;function U5(){return dS||(dS=1,hg.exports=B5()),hg.exports}var fS;function F5(){if(fS)return pg;fS=1;var e=rm(),t=U5();function n(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var a=typeof Object.is=="function"?Object.is:n,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,d=e.useMemo,m=e.useDebugValue;return pg.useSyncExternalStoreWithSelector=function(p,h,v,b,g){var _=o(null);if(_.current===null){var j={hasValue:!1,value:null};_.current=j}else j=_.current;_=d(function(){function w(T){if(!E){if(E=!0,C=T,T=b(T),g!==void 0&&j.hasValue){var P=j.value;if(g(P,T))return A=P}return A=T}if(P=A,a(C,T))return P;var R=b(T);return g!==void 0&&g(P,R)?(C=T,P):(C=T,A=R)}var E=!1,C,A,O=v===void 0?null:v;return[function(){return w(h())},O===null?void 0:function(){return w(O())}]},[h,v,b,g]);var S=l(p,_[0],_[1]);return u(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},pg}var mS;function G5(){return mS||(mS=1,mg.exports=F5()),mg.exports}var H5=G5(),Ty=y.createContext(null),Q5=e=>e,$t=()=>{var e=y.useContext(Ty);return e?e.store.dispatch:Q5},Vd=()=>{},V5=()=>Vd,Y5=(e,t)=>e===t;function ze(e){var t=y.useContext(Ty),n=y.useMemo(()=>t?a=>{if(a!=null)return e(a)}:Vd,[t,e]);return H5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:V5,t?t.store.getState:Vd,t?t.store.getState:Vd,n,Y5)}function K5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function X5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function W5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var pS=e=>Array.isArray(e)?e:[e];function Z5(e){const t=Array.isArray(e[0])?e[0]:e;return W5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function J5(e,t){const n=[],{length:a}=e;for(let l=0;l<a;l++)n.push(e[l].apply(null,t));return n}var e6=class{constructor(e){this.value=e}deref(){return this.value}},t6=typeof WeakRef<"u"?WeakRef:e6,r6=0,hS=1;function wd(){return{s:r6,v:void 0,o:null,p:null}}function OE(e,t={}){let n=wd();const{resultEqualityCheck:a}=t;let l,o=0;function u(){let d=n;const{length:m}=arguments;for(let v=0,b=m;v<b;v++){const g=arguments[v];if(typeof g=="function"||typeof g=="object"&&g!==null){let _=d.o;_===null&&(d.o=_=new WeakMap);const j=_.get(g);j===void 0?(d=wd(),_.set(g,d)):d=j}else{let _=d.p;_===null&&(d.p=_=new Map);const j=_.get(g);j===void 0?(d=wd(),_.set(g,d)):d=j}}const p=d;let h;if(d.s===hS)h=d.v;else if(h=e.apply(null,arguments),o++,a){const v=l?.deref?.()??l;v!=null&&a(v,h)&&(h=v,o!==0&&o--),l=typeof h=="object"&&h!==null||typeof h=="function"?new t6(h):h}return p.s=hS,p.v=h,h}return u.clearCache=()=>{n=wd(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function n6(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let o=0,u=0,d,m={},p=l.pop();typeof p=="object"&&(m=p,p=l.pop()),K5(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const h={...n,...m},{memoize:v,memoizeOptions:b=[],argsMemoize:g=OE,argsMemoizeOptions:_=[]}=h,j=pS(b),S=pS(_),w=Z5(l),E=v(function(){return o++,p.apply(null,arguments)},...j),C=g(function(){u++;const O=J5(w,arguments);return d=E.apply(null,O),d},...S);return Object.assign(C,{resultFunc:p,memoizedResultFunc:E,dependencies:w,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:g})};return Object.assign(a,{withTypes:()=>a}),a}var se=n6(OE),a6=Object.assign((e,t=se)=>{X5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return t(a,(...o)=>o.reduce((u,d,m)=>(u[n[m]]=d,u),{}))},{withTypes:()=>a6}),gg={},xg={},yg={},vS;function i6(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,l,o)=>{if(a!==l){const u=t(a),d=t(l);if(u===d&&u===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?d-u:u-d}return 0};e.compareValues=n})(yg)),yg}var bg={},jg={},gS;function DE(){return gS||(gS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(jg)),jg}var xS;function s6(){return xS||(xS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DE(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})(bg)),bg}var yS;function l6(){return yS||(yS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i6(),n=s6(),a=Ay();function l(o,u,d,m){if(o==null)return[];d=m?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(g=>String(g));const p=(g,_)=>{let j=g;for(let S=0;S<_.length&&j!=null;++S)j=j[_[S]];return j},h=(g,_)=>_==null||g==null?_:typeof g=="object"&&"key"in g?Object.hasOwn(_,g.key)?_[g.key]:p(_,g.path):typeof g=="function"?g(_):Array.isArray(g)?p(_,g):typeof _=="object"?_[g]:_,v=u.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:a.toPath(g)}));return o.map(g=>({original:g,criteria:v.map(_=>h(_,g))})).slice().sort((g,_)=>{for(let j=0;j<v.length;j++){const S=t.compareValues(g.criteria[j],_.criteria[j],d[j]);if(S!==0)return S}return 0}).map(g=>g.original)}e.orderBy=l})(xg)),xg}var Ng={},bS;function o6(){return bS||(bS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const l=[],o=Math.floor(a),u=(d,m)=>{for(let p=0;p<d.length;p++){const h=d[p];Array.isArray(h)&&m<o?u(h,m+1):l.push(h)}};return u(n,0),l}e.flatten=t})(Ng)),Ng}var _g={},jS;function ME(){return jS||(jS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zE(),n=Dy(),a=_E(),l=wE();function o(u,d,m){return a.isObject(m)&&(typeof d=="number"&&n.isArrayLike(m)&&t.isIndex(d)&&d<m.length||typeof d=="string"&&d in m)?l.isEqualsSameValueZero(m[d],u):!1}e.isIterateeCall=o})(_g)),_g}var NS;function c6(){return NS||(NS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l6(),n=o6(),a=ME();function l(o,...u){const d=u.length;return d>1&&a.isIterateeCall(o,u[0],u[1])?u=[]:d>2&&a.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(o,n.flatten(u),["asc"])}e.sortBy=l})(gg)),gg}var Sg,_S;function u6(){return _S||(_S=1,Sg=c6().sortBy),Sg}var d6=u6();const um=Ga(d6);var TE=e=>e.legend.settings,f6=e=>e.legend.size,m6=e=>e.legend.payload;se([m6,TE],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?um(a,n):a});var Cd=1;function p6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=y.useState({height:0,left:0,top:0,width:0}),a=y.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-t.height)>Cd||Math.abs(u.left-t.left)>Cd||Math.abs(u.top-t.top)>Cd||Math.abs(u.width-t.width)>Cd)&&n({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function pr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var h6=typeof Symbol=="function"&&Symbol.observable||"@@observable",SS=h6,wg=()=>Math.random().toString(36).substring(7).split("").join("."),v6={INIT:`@@redux/INIT${wg()}`,REPLACE:`@@redux/REPLACE${wg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wg()}`},cf=v6;function ky(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function kE(e,t,n){if(typeof e!="function")throw new Error(pr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(pr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(pr(1));return n(kE)(e,t)}let a=e,l=t,o=new Map,u=o,d=0,m=!1;function p(){u===o&&(u=new Map,o.forEach((S,w)=>{u.set(w,S)}))}function h(){if(m)throw new Error(pr(3));return l}function v(S){if(typeof S!="function")throw new Error(pr(4));if(m)throw new Error(pr(5));let w=!0;p();const E=d++;return u.set(E,S),function(){if(w){if(m)throw new Error(pr(6));w=!1,p(),u.delete(E),o=null}}}function b(S){if(!ky(S))throw new Error(pr(7));if(typeof S.type>"u")throw new Error(pr(8));if(typeof S.type!="string")throw new Error(pr(17));if(m)throw new Error(pr(9));try{m=!0,l=a(l,S)}finally{m=!1}return(o=u).forEach(E=>{E()}),S}function g(S){if(typeof S!="function")throw new Error(pr(10));a=S,b({type:cf.REPLACE})}function _(){const S=v;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(pr(11));function E(){const A=w;A.next&&A.next(h())}return E(),{unsubscribe:S(E)}},[SS](){return this}}}return b({type:cf.INIT}),{dispatch:b,subscribe:v,getState:h,replaceReducer:g,[SS]:_}}function g6(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:cf.INIT})>"u")throw new Error(pr(12));if(typeof n(void 0,{type:cf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pr(13))})}function PE(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(n[u]=e[u])}const a=Object.keys(n);let l;try{g6(n)}catch(o){l=o}return function(u={},d){if(l)throw l;let m=!1;const p={};for(let h=0;h<a.length;h++){const v=a[h],b=n[v],g=u[v],_=b(g,d);if(typeof _>"u")throw d&&d.type,new Error(pr(14));p[v]=_,m=m||_!==g}return m=m||a.length!==Object.keys(u).length,m?p:u}}function uf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function x6(...e){return t=>(n,a)=>{const l=t(n,a);let o=()=>{throw new Error(pr(15))};const u={getState:l.getState,dispatch:(m,...p)=>o(m,...p)},d=e.map(m=>m(u));return o=uf(...d)(l.dispatch),{...l,dispatch:o}}}function qE(e){return ky(e)&&"type"in e&&typeof e.type=="string"}var RE=Symbol.for("immer-nothing"),wS=Symbol.for("immer-draftable"),Er=Symbol.for("immer-state");function Tn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Jr=Object,Ql=Jr.getPrototypeOf,df="constructor",dm="prototype",Nx="configurable",ff="enumerable",Yd="writable",Cc="value",Ra=e=>!!e&&!!e[Er];function Ln(e){return e?IE(e)||mm(e)||!!e[wS]||!!e[df]?.[wS]||pm(e)||hm(e):!1}var y6=Jr[dm][df].toString(),CS=new WeakMap;function IE(e){if(!e||!Py(e))return!1;const t=Ql(e);if(t===null||t===Jr[dm])return!0;const n=Jr.hasOwnProperty.call(t,df)&&t[df];if(n===Object)return!0;if(!Rl(n))return!1;let a=CS.get(n);return a===void 0&&(a=Function.toString.call(n),CS.set(n,a)),a===y6}function fm(e,t,n=!0){Hc(e)===0?(n?Reflect.ownKeys(e):Jr.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function Hc(e){const t=e[Er];return t?t.type_:mm(e)?1:pm(e)?2:hm(e)?3:0}var AS=(e,t,n=Hc(e))=>n===2?e.has(t):Jr[dm].hasOwnProperty.call(e,t),_x=(e,t,n=Hc(e))=>n===2?e.get(t):e[t],mf=(e,t,n,a=Hc(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function b6(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var mm=Array.isArray,pm=e=>e instanceof Map,hm=e=>e instanceof Set,Py=e=>typeof e=="object",Rl=e=>typeof e=="function",Cg=e=>typeof e=="boolean";function j6(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ea=e=>e.copy_||e.base_,qy=e=>e.modified_?e.copy_:e.base_;function Sx(e,t){if(pm(e))return new Map(e);if(hm(e))return new Set(e);if(mm(e))return Array[dm].slice.call(e);const n=IE(e);if(t===!0||t==="class_only"&&!n){const a=Jr.getOwnPropertyDescriptors(e);delete a[Er];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d[Yd]===!1&&(d[Yd]=!0,d[Nx]=!0),(d.get||d.set)&&(a[u]={[Nx]:!0,[Yd]:!0,[ff]:d[ff],[Cc]:e[u]})}return Jr.create(Ql(e),a)}else{const a=Ql(e);if(a!==null&&n)return{...e};const l=Jr.create(a);return Jr.assign(l,e)}}function Ry(e,t=!1){return vm(e)||Ra(e)||!Ln(e)||(Hc(e)>1&&Jr.defineProperties(e,{set:Ad,add:Ad,clear:Ad,delete:Ad}),Jr.freeze(e),t&&fm(e,(n,a)=>{Ry(a,!0)},!1)),e}function N6(){Tn(2)}var Ad={[Cc]:N6};function vm(e){return e===null||!Py(e)?!0:Jr.isFrozen(e)}var pf="MapSet",wx="Patches",ES="ArrayMethods",LE={};function Es(e){const t=LE[e];return t||Tn(0,e),t}var zS=e=>!!LE[e],Ac,$E=()=>Ac,_6=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:zS(pf)?Es(pf):void 0,arrayMethodsPlugin_:zS(ES)?Es(ES):void 0});function OS(e,t){t&&(e.patchPlugin_=Es(wx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cx(e){Ax(e),e.drafts_.forEach(S6),e.drafts_=null}function Ax(e){e===Ac&&(Ac=e.parent_)}var DS=e=>Ac=_6(Ac,e);function S6(e){const t=e[Er];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function MS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Er].modified_&&(Cx(t),Tn(4)),Ln(e)&&(e=TS(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(n[Er].base_,e,t)}else e=TS(t,n);return w6(t,e,!0),Cx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==RE?e:void 0}function TS(e,t){if(vm(t))return t;const n=t[Er];if(!n)return hf(t,e.handledSet_,e);if(!gm(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);FE(n,e)}return n.copy_}function w6(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ry(t,n)}function BE(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var gm=(e,t)=>e.scope_===t,C6=[];function UE(e,t,n,a){const l=Ea(e),o=e.type_;if(a!==void 0&&_x(l,a,o)===t){mf(l,a,n,o);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;fm(l,(m,p)=>{if(Ra(p)){const h=d.get(p)||[];h.push(m),d.set(p,h)}})}const u=e.draftLocations_.get(t)??C6;for(const d of u)mf(l,d,n,o)}function A6(e,t,n){e.callbacks_.push(function(l){const o=t;if(!o||!gm(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=qy(o);UE(e,o.draft_??o,u,n),FE(o,l)})}function FE(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}BE(e)}}function E6(e,t,n){const{scope_:a}=e;if(Ra(n)){const l=n[Er];gm(l,a)&&l.callbacks_.push(function(){Kd(e);const u=qy(l);UE(e,n,u,t)})}else Ln(n)&&e.callbacks_.push(function(){const o=Ea(e);e.type_===3?o.has(n)&&hf(n,a.handledSet_,a):_x(o,t,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&hf(_x(e.copy_,t,e.type_),a.handledSet_,a)})}function hf(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ra(e)||t.has(e)||!Ln(e)||vm(e)||(t.add(e),fm(e,(a,l)=>{if(Ra(l)){const o=l[Er];if(gm(o,n)){const u=qy(o);mf(e,a,u,e.type_),BE(o)}}else Ln(l)&&hf(l,t,n)})),e}function z6(e,t){const n=mm(e),a={type_:n?1:0,scope_:t?t.scope_:$E(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=vf;n&&(l=[a],o=Ec);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,[d,a]}var vf={get(e,t){if(t===Er)return e;let n=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const l=Ea(e);if(!AS(l,t,e.type_))return O6(e,l,t);const o=l[t];if(e.finalized_||!Ln(o)||a&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&j6(t))return o;if(o===Ag(e.base_,t)){Kd(e);const u=e.type_===1?+t:t,d=zx(e.scope_,o,e,u);return e.copy_[u]=d}return o},has(e,t){return t in Ea(e)},ownKeys(e){return Reflect.ownKeys(Ea(e))},set(e,t,n){const a=GE(Ea(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Ag(Ea(e),t),o=l?.[Er];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(b6(n,l)&&(n!==void 0||AS(e.base_,t,e.type_)))return!0;Kd(e),Ex(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),E6(e,t,n)),!0},deleteProperty(e,t){return Kd(e),Ag(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Ex(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ea(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[Yd]:!0,[Nx]:e.type_!==1||t!=="length",[ff]:a[ff],[Cc]:n[t]}},defineProperty(){Tn(11)},getPrototypeOf(e){return Ql(e.base_)},setPrototypeOf(){Tn(12)}},Ec={};for(let e in vf){let t=vf[e];Ec[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Ec.deleteProperty=function(e,t){return Ec.set.call(this,e,t,void 0)};Ec.set=function(e,t,n){return vf.set.call(this,e[0],t,n,e[0])};function Ag(e,t){const n=e[Er];return(n?Ea(n):e)[t]}function O6(e,t,n){const a=GE(t,n);return a?Cc in a?a[Cc]:a.get?.call(e.draft_):void 0}function GE(e,t){if(!(t in e))return;let n=Ql(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Ql(n)}}function Ex(e){e.modified_||(e.modified_=!0,e.parent_&&Ex(e.parent_))}function Kd(e){e.copy_||(e.assigned_=new Map,e.copy_=Sx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var D6=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,l)=>{if(Rl(n)&&!Rl(a)){const u=a;a=n;const d=this;return function(p=u,...h){return d.produce(p,v=>a.call(this,v,...h))}}Rl(a)||Tn(6),l!==void 0&&!Rl(l)&&Tn(7);let o;if(Ln(n)){const u=DS(this),d=zx(u,n,void 0);let m=!0;try{o=a(d),m=!1}finally{m?Cx(u):Ax(u)}return OS(u,l),MS(o,u)}else if(!n||!Py(n)){if(o=a(n),o===void 0&&(o=n),o===RE&&(o=void 0),this.autoFreeze_&&Ry(o,!0),l){const u=[],d=[];Es(wx).generateReplacementPatches_(n,o,{patches_:u,inversePatches_:d}),l(u,d)}return o}else Tn(1,n)},this.produceWithPatches=(n,a)=>{if(Rl(n))return(d,...m)=>this.produceWithPatches(d,p=>n(p,...m));let l,o;return[this.produce(n,a,(d,m)=>{l=d,o=m}),l,o]},Cg(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Cg(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Cg(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ln(t)||Tn(8),Ra(t)&&(t=qn(t));const n=DS(this),a=zx(n,t,void 0);return a[Er].isManual_=!0,Ax(n),a}finishDraft(t,n){const a=t&&t[Er];(!a||!a.isManual_)&&Tn(9);const{scope_:l}=a;return OS(l,n),MS(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const o=n[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(n=n.slice(a+1));const l=Es(wx).applyPatches_;return Ra(t)?l(t,n):this.produce(t,o=>l(o,n))}};function zx(e,t,n,a){const[l,o]=pm(t)?Es(pf).proxyMap_(t,n):hm(t)?Es(pf).proxySet_(t,n):z6(t,n);return(n?.scope_??$E()).drafts_.push(l),o.callbacks_=n?.callbacks_??[],o.key_=a,n&&a!==void 0?A6(n,o,a):o.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:p}=m;o.modified_&&p&&p.generatePatches_(o,[],m)}),l}function qn(e){return Ra(e)||Tn(10,e),HE(e)}function HE(e){if(!Ln(e)||vm(e))return e;const t=e[Er];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Sx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Sx(e,!0);return fm(n,(l,o)=>{mf(n,l,HE(o))},a),t&&(t.finalized_=!1),n}var M6=new D6,QE=M6.produce;function VE(e){return({dispatch:n,getState:a})=>l=>o=>typeof o=="function"?o(n,a,e):l(o)}var T6=VE(),k6=VE,P6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?uf:uf.apply(null,arguments)};function Sn(e,t){function n(...a){if(t){let l=t(...a);if(!l)throw new Error(en(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>qE(a)&&a.type===e,n}var YE=class pc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,pc.prototype)}static get[Symbol.species](){return pc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new pc(...t[0].concat(this)):new pc(...t.concat(this))}};function kS(e){return Ln(e)?QE(e,()=>{}):e}function Ed(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function q6(e){return typeof e=="boolean"}var R6=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let u=new YE;return n&&(q6(n)?u.push(T6):u.push(k6(n.extraArgument))),u},KE="RTK_autoBatch",Ct=()=>e=>({payload:e,meta:{[KE]:!0}}),PS=e=>t=>{setTimeout(t,e)},XE=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let l=!0,o=!1,u=!1;const d=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PS(10):e.type==="callback"?e.queueNotification:PS(e.timeout),p=()=>{u=!1,o&&(o=!1,d.forEach(h=>h()))};return Object.assign({},a,{subscribe(h){const v=()=>l&&h(),b=a.subscribe(v);return d.add(h),()=>{b(),d.delete(h)}},dispatch(h){try{return l=!h?.meta?.[KE],o=!l,o&&(u||(u=!0,m(p))),a.dispatch(h)}finally{l=!0}}})},I6=e=>function(n){const{autoBatch:a=!0}=n??{};let l=new YE(e);return a&&l.push(XE(typeof a=="object"?a:void 0)),l};function L6(e){const t=R6(),{reducer:n=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(ky(n))d=PE(n);else throw new Error(en(1));let m;typeof a=="function"?m=a(t):m=t();let p=uf;l&&(p=P6({trace:!1,...typeof l=="object"&&l}));const h=x6(...m),v=I6(h);let b=typeof u=="function"?u(v):v();const g=p(...b);return kE(d,o,g)}function WE(e){const t={},n=[];let a;const l={addCase(o,u){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(en(28));if(d in t)throw new Error(en(29));return t[d]=u,l},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&n.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return n.push({matcher:o,reducer:u}),l},addDefaultCase(o){return a=o,l}};return e(l),[t,n,a]}function $6(e){return typeof e=="function"}function B6(e,t){let[n,a,l]=WE(t),o;if($6(e))o=()=>kS(e());else{const d=kS(e);o=()=>d}function u(d=o(),m){let p=[n[m.type],...a.filter(({matcher:h})=>h(m)).map(({reducer:h})=>h)];return p.filter(h=>!!h).length===0&&(p=[l]),p.reduce((h,v)=>{if(v)if(Ra(h)){const g=v(h,m);return g===void 0?h:g}else{if(Ln(h))return QE(h,b=>v(b,m));{const b=v(h,m);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},d)}return u.getInitialState=o,u}var U6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",F6=(e=21)=>{let t="",n=e;for(;n--;)t+=U6[Math.random()*64|0];return t},G6=Symbol.for("rtk-slice-createasyncthunk");function H6(e,t){return`${e}/${t}`}function Q6({creators:e}={}){const t=e?.asyncThunk?.[G6];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(en(11));const u=(typeof a.reducers=="function"?a.reducers(Y6()):a.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(C,A){const O=typeof C=="string"?C:C.type;if(!O)throw new Error(en(12));if(O in m.sliceCaseReducersByType)throw new Error(en(13));return m.sliceCaseReducersByType[O]=A,p},addMatcher(C,A){return m.sliceMatchers.push({matcher:C,reducer:A}),p},exposeAction(C,A){return m.actionCreators[C]=A,p},exposeCaseReducer(C,A){return m.sliceCaseReducersByName[C]=A,p}};d.forEach(C=>{const A=u[C],O={reducerName:C,type:H6(l,C),createNotation:typeof a.reducers=="function"};X6(A)?Z6(O,A,p,t):K6(O,A,p)});function h(){const[C={},A=[],O=void 0]=typeof a.extraReducers=="function"?WE(a.extraReducers):[a.extraReducers],T={...C,...m.sliceCaseReducersByType};return B6(a.initialState,P=>{for(let R in T)P.addCase(R,T[R]);for(let R of m.sliceMatchers)P.addMatcher(R.matcher,R.reducer);for(let R of A)P.addMatcher(R.matcher,R.reducer);O&&P.addDefaultCase(O)})}const v=C=>C,b=new Map,g=new WeakMap;let _;function j(C,A){return _||(_=h()),_(C,A)}function S(){return _||(_=h()),_.getInitialState()}function w(C,A=!1){function O(P){let R=P[C];return typeof R>"u"&&A&&(R=Ed(g,O,S)),R}function T(P=v){const R=Ed(b,A,()=>new WeakMap);return Ed(R,P,()=>{const I={};for(const[L,K]of Object.entries(a.selectors??{}))I[L]=V6(K,P,()=>Ed(g,P,S),A);return I})}return{reducerPath:C,getSelectors:T,get selectors(){return T(O)},selectSlice:O}}const E={name:l,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...w(o),injectInto(C,{reducerPath:A,...O}={}){const T=A??o;return C.inject({reducerPath:T,reducer:j},O),{...E,...w(T,!0)}}};return E}}function V6(e,t,n,a){function l(o,...u){let d=t(o);return typeof d>"u"&&a&&(d=n()),e(d,...u)}return l.unwrapped=e,l}var Fr=Q6();function Y6(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function K6({type:e,reducerName:t,createNotation:n},a,l){let o,u;if("reducer"in a){if(n&&!W6(a))throw new Error(en(17));o=a.reducer,u=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?Sn(e,u):Sn(e))}function X6(e){return e._reducerDefinitionType==="asyncThunk"}function W6(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Z6({type:e,reducerName:t},n,a,l){if(!l)throw new Error(en(18));const{payloadCreator:o,fulfilled:u,pending:d,rejected:m,settled:p,options:h}=n,v=l(e,o,h);a.exposeAction(t,v),u&&a.addCase(v.fulfilled,u),d&&a.addCase(v.pending,d),m&&a.addCase(v.rejected,m),p&&a.addMatcher(v.settled,p),a.exposeCaseReducer(t,{fulfilled:u||zd,pending:d||zd,rejected:m||zd,settled:p||zd})}function zd(){}var J6="task",ZE="listener",JE="completed",Iy="cancelled",e4=`task-${Iy}`,t4=`task-${JE}`,Ox=`${ZE}-${Iy}`,r4=`${ZE}-${JE}`,xm=class{constructor(e){this.code=e,this.message=`${J6} ${Iy} (reason: ${e})`}name="TaskAbortError";message},Ly=(e,t)=>{if(typeof e!="function")throw new TypeError(en(32))},gf=()=>{},ez=(e,t=gf)=>(e.catch(t),e),tz=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),_s=e=>{if(e.aborted)throw new xm(e.reason)};function rz(e,t){let n=gf;return new Promise((a,l)=>{const o=()=>l(new xm(e.reason));if(e.aborted){o();return}n=tz(e,o),t.finally(()=>n()).then(a,l)}).finally(()=>{n=gf})}var n4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof xm?"cancelled":"rejected",error:n}}finally{t?.()}},xf=e=>t=>ez(rz(e,t).then(n=>(_s(e),n))),nz=e=>{const t=xf(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:Bl}=Object,qS={},ym="listenerMiddleware",a4=(e,t)=>{const n=a=>tz(e,()=>a.abort(e.reason));return(a,l)=>{Ly(a);const o=new AbortController;n(o);const u=n4(async()=>{_s(e),_s(o.signal);const d=await a({pause:xf(o.signal),delay:nz(o.signal),signal:o.signal});return _s(o.signal),d},()=>o.abort(t4));return l?.autoJoin&&t.push(u.catch(gf)),{result:xf(e)(u),cancel(){o.abort(e4)}}}},i4=(e,t)=>{const n=async(a,l)=>{_s(t);let o=()=>{};const d=[new Promise((m,p)=>{let h=e({predicate:a,effect:(v,b)=>{b.unsubscribe(),m([v,b.getState(),b.getOriginalState()])}});o=()=>{h(),p()}})];l!=null&&d.push(new Promise(m=>setTimeout(m,l,null)));try{const m=await rz(t,Promise.race(d));return _s(t),m}finally{o()}};return(a,l)=>ez(n(a,l))},az=e=>{let{type:t,actionCreator:n,matcher:a,predicate:l,effect:o}=e;if(t)l=Sn(t).match;else if(n)t=n.type,l=n.match;else if(a)l=a;else if(!l)throw new Error(en(21));return Ly(o),{predicate:l,type:t,effect:o}},iz=Bl(e=>{const{type:t,predicate:n,effect:a}=az(e);return{id:F6(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(en(22))}}},{withTypes:()=>iz}),RS=(e,t)=>{const{type:n,effect:a,predicate:l}=az(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===l)&&o.effect===a)},Dx=e=>{e.pending.forEach(t=>{t.abort(Ox)})},s4=(e,t)=>()=>{for(const n of t.keys())Dx(n);e.clear()},IS=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},sz=Bl(Sn(`${ym}/add`),{withTypes:()=>sz}),l4=Sn(`${ym}/removeAll`),lz=Bl(Sn(`${ym}/remove`),{withTypes:()=>lz}),o4=(...e)=>{console.error(`${ym}/error`,...e)},Qc=(e={})=>{const t=new Map,n=new Map,a=g=>{const _=n.get(g)??0;n.set(g,_+1)},l=g=>{const _=n.get(g)??1;_===1?n.delete(g):n.set(g,_-1)},{extra:o,onError:u=o4}=e;Ly(u);const d=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),_=>{g.unsubscribe(),_?.cancelActive&&Dx(g)}),m=g=>{const _=RS(t,g)??iz(g);return d(_)};Bl(m,{withTypes:()=>m});const p=g=>{const _=RS(t,g);return _&&(_.unsubscribe(),g.cancelActive&&Dx(_)),!!_};Bl(p,{withTypes:()=>p});const h=async(g,_,j,S)=>{const w=new AbortController,E=i4(m,w.signal),C=[];try{g.pending.add(w),a(g),await Promise.resolve(g.effect(_,Bl({},j,{getOriginalState:S,condition:(A,O)=>E(A,O).then(Boolean),take:E,delay:nz(w.signal),pause:xf(w.signal),extra:o,signal:w.signal,fork:a4(w.signal,C),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((A,O,T)=>{A!==w&&(A.abort(Ox),T.delete(A))})},cancel:()=>{w.abort(Ox),g.pending.delete(w)},throwIfCancelled:()=>{_s(w.signal)}})))}catch(A){A instanceof xm||IS(u,A,{raisedBy:"effect"})}finally{await Promise.all(C),w.abort(r4),l(g),g.pending.delete(w)}},v=s4(t,n);return{middleware:g=>_=>j=>{if(!qE(j))return _(j);if(sz.match(j))return m(j.payload);if(l4.match(j)){v();return}if(lz.match(j))return p(j.payload);let S=g.getState();const w=()=>{if(S===qS)throw new Error(en(23));return S};let E;try{if(E=_(j),t.size>0){const C=g.getState(),A=Array.from(t.values());for(const O of A){let T=!1;try{T=O.predicate(j,C,S)}catch(P){T=!1,IS(u,P,{raisedBy:"predicate"})}T&&h(O,j,g,w)}}}finally{S=qS}return E},startListening:m,stopListening:p,clearListeners:v}};function en(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var c4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},oz=Fr({name:"chartLayout",initialState:c4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,l,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:u4,setLayout:d4,setChartSize:f4,setScale:m4}=oz.actions,p4=oz.reducer;function cz(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function We(e){return Number.isFinite(e)}function aa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function LS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Il(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LS(Object(n),!0).forEach(function(a){h4(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function h4(e,t,n){return(t=v4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v4(e){var t=g4(e,"string");return typeof t=="symbol"?t:t+""}function g4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qt(e,t,n){return zt(e)||zt(t)?n:na(t)?Hl(e,t,n):typeof t=="function"?t(e):n}var x4=(e,t,n)=>{if(t&&n){var{width:a,height:l}=n,{align:o,verticalAlign:u,layout:d}=t;if((d==="vertical"||d==="horizontal"&&u==="middle")&&o!=="center"&&Se(e[o]))return Il(Il({},e),{},{[o]:e[o]+(a||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&u!=="middle"&&Se(e[u]))return Il(Il({},e),{},{[u]:e[u]+(l||0)})}return e},Va=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",uz=(e,t,n,a)=>{if(a)return e.map(d=>d.coordinate);var l,o,u=e.map(d=>(d.coordinate===t&&(l=!0),d.coordinate===n&&(o=!0),d.coordinate));return l||u.push(t),o||u.push(n),u},dz=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:l,range:o,scale:u,realScaleType:d,isCategorical:m,categoricalDomain:p,tickCount:h,ticks:v,niceTicks:b,axisType:g}=e;if(!u)return null;var _=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,j=l==="category"&&u.bandwidth?u.bandwidth()/_:0;if(j=g==="angleAxis"&&o&&o.length>=2?Ir(o[0]-o[1])*2*j:j,v||b){var S=(v||b||[]).map((w,E)=>{var C=a?a.indexOf(w):w,A=u.map(C);return We(A)?{coordinate:A+j,value:w,offset:j,index:E}:null}).filter(Lr);return S}return m&&p?p.map((w,E)=>{var C=u.map(w);return We(C)?{coordinate:C+j,value:w,index:E,offset:j}:null}).filter(Lr):u.ticks&&h!=null?u.ticks(h).map((w,E)=>{var C=u.map(w);return We(C)?{coordinate:C+j,value:w,index:E,offset:j}:null}).filter(Lr):u.domain().map((w,E)=>{var C=u.map(w);return We(C)?{coordinate:C+j,value:a?a[w]:w,index:E,offset:j}:null}).filter(Lr)},y4=(e,t)=>{if(!t||t.length!==2||!Se(t[0])||!Se(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!Se(e[0])||e[0]<n)&&(l[0]=n),(!Se(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<n&&(l[1]=n),l},b4=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0,d=0;d<n;++d){var m=e[d],p=m?.[l];if(p!=null){var h=p[1],v=p[0],b=ra(h)?v:h;b>=0?(p[0]=o,o+=b,p[1]=o):(p[0]=u,u+=b,p[1]=u)}}}},j4=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0;u<n;++u){var d=e[u],m=d?.[l];if(m!=null){var p=ra(m[1])?m[0]:m[1];p>=0?(m[0]=o,o+=p,m[1]=o):(m[0]=0,m[1]=0)}}}},N4={sign:b4,expand:X3,none:Cs,silhouette:W3,wiggle:Z3,positive:j4},_4=(e,t,n)=>{var a,l=(a=N4[n])!==null&&a!==void 0?a:Cs,o=K3().keys(t).value((d,m)=>Number(Qt(d,m,0))).order(bx).offset(l),u=o(e);return u.forEach((d,m)=>{d.forEach((p,h)=>{var v=Qt(e[h],t[m],0);Array.isArray(v)&&v.length===2&&Se(v[0])&&Se(v[1])&&(p[0]=v[0],p[1]=v[1])})}),u};function S4(e){return e==null?void 0:String(e)}function $S(e){var{axis:t,ticks:n,bandSize:a,entry:l,index:o,dataKey:u}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!zt(l[t.dataKey])){var d=xE(n,"value",l[t.dataKey]);if(d)return d.coordinate+a/2}return n!=null&&n[o]?n[o].coordinate+a/2:null}var m=Qt(l,zt(u)?t.dataKey:u),p=t.scale.map(m);return Se(p)?p:null}var BS=e=>{var{axis:t,ticks:n,offset:a,bandSize:l,entry:o,index:u}=e;if(t.type==="category")return n[u]?n[u].coordinate+a:null;var d=Qt(o,t.dataKey,t.scale.domain()[u]);if(zt(d))return null;var m=t.scale.map(d);return Se(m)?m-l/2+a:null},w4=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var a=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return a<=0&&l>=0?0:l<0?l:a}return n[0]},C4=e=>{var t=e.flat(2).filter(Se);return[Math.min(...t),Math.max(...t)]},A4=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],E4=(e,t,n)=>{if(e!=null)return A4(Object.keys(e).reduce((a,l)=>{var o=e[l];if(!o)return a;var{stackedData:u}=o,d=u.reduce((m,p)=>{var h=cz(p,t,n),v=C4(h);return!We(v[0])||!We(v[1])?m:[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]))},US=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vl=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var l=um(t,h=>h.coordinate),o=1/0,u=1,d=l.length;u<d;u++){var m=l[u],p=l[u-1];o=Math.min((m?.coordinate||0)-(p?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function GS(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:l,name:o}=e;return Il(Il({},t),{},{dataKey:n,payload:a,value:l,name:o})}function bm(e,t){if(e)return String(e);if(typeof t=="string")return t}var z4=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},O4=(e,t)=>t==="centric"?e.angle:e.radius,Ya=e=>e.layout.width,Ka=e=>e.layout.height,D4=e=>e.layout.scale,fz=e=>e.layout.margin,jm=se(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Nm=se(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),M4="data-recharts-item-index",T4="data-recharts-item-id",Vc=60;function HS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Od(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HS(Object(n),!0).forEach(function(a){k4(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function k4(e,t,n){return(t=P4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P4(e){var t=q4(e,"string");return typeof t=="symbol"?t:t+""}function q4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R4=e=>e.brush.height;function I4(e){var t=Nm(e);return t.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Vc;return n+l}return n},0)}function L4(e){var t=Nm(e);return t.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Vc;return n+l}return n},0)}function $4(e){var t=jm(e);return t.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function B4(e){var t=jm(e);return t.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var ir=se([Ya,Ka,fz,R4,I4,L4,$4,B4,TE,f6],(e,t,n,a,l,o,u,d,m,p)=>{var h={left:(n.left||0)+l,right:(n.right||0)+o},v={top:(n.top||0)+u,bottom:(n.bottom||0)+d},b=Od(Od({},v),h),g=b.bottom;b.bottom+=a,b=x4(b,m,p);var _=e-b.left-b.right,j=t-b.top-b.bottom;return Od(Od({brushBottom:g},b),{},{width:Math.max(_,0),height:Math.max(j,0)})}),U4=se(ir,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),$y=se(Ya,Ka,(e,t)=>({x:0,y:0,width:e,height:t})),F4=y.createContext(null),Nr=()=>y.useContext(F4)!=null,_m=e=>e.brush,Sm=se([_m,ir,fz],(e,t,n)=>({height:e.height,x:Se(e.x)?e.x:t.left,y:Se(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Se(e.width)?e.width:t.width})),Eg={},zg={},Og={},QS;function G4(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:l,edges:o}={}){let u,d=null;const m=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),h=()=>{d!==null&&(n.apply(u,d),u=void 0,d=null)},v=()=>{p&&h(),j()};let b=null;const g=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,v()},a)},_=()=>{b!==null&&(clearTimeout(b),b=null)},j=()=>{_(),u=void 0,d=null},S=()=>{h()},w=function(...E){if(l?.aborted)return;u=this,d=E;const C=b==null;g(),m&&C&&h()};return w.schedule=g,w.cancel=j,w.flush=S,l?.addEventListener("abort",j,{once:!0}),w}e.debounce=t})(Og)),Og}var VS;function H4(){return VS||(VS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G4();function n(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:d=!0,maxWait:m}=o,p=Array(2);u&&(p[0]="leading"),d&&(p[1]="trailing");let h,v=null;const b=t.debounce(function(...j){h=a.apply(this,j),v=null},l,{edges:p}),g=function(...j){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(h=a.apply(this,j),v=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,j),h)},_=()=>(b.flush(),h);return g.cancel=b.cancel,g.flush=_,g}e.debounce=n})(zg)),zg}var YS;function Q4(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H4();function n(a,l=0,o={}){const{leading:u=!0,trailing:d=!0}=o;return t.debounce(a,l,{leading:u,maxWait:l,trailing:d})}e.throttle=n})(Eg)),Eg}var Dg,KS;function V4(){return KS||(KS=1,Dg=Q4().throttle),Dg}var Y4=V4();const K4=Ga(Y4);var yf=function(t,n){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(n.replace(/%s/g,()=>l[u++]))}},Jn={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},mz=(e,t,n)=>{var{width:a=Jn.width,height:l=Jn.height,aspect:o,maxHeight:u}=n,d=As(a)?e:Number(a),m=As(l)?t:Number(l);return o&&o>0&&(d?m=d/o:m&&(d=m*o),u&&m!=null&&m>u&&(m=u)),{calculatedWidth:d,calculatedHeight:m}},X4={width:0,height:0,overflow:"visible"},W4={width:0,overflowX:"visible"},Z4={height:0,overflowY:"visible"},J4={},eI=e=>{var{width:t,height:n}=e,a=As(t),l=As(n);return a&&l?X4:a?W4:l?Z4:J4};function tI(e){var{width:t,height:n,aspect:a}=e,l=t,o=n;return l===void 0&&o===void 0?(l=Jn.width,o=Jn.height):l===void 0?l=a&&a>0?void 0:Jn.width:o===void 0&&(o=a&&a>0?void 0:Jn.height),{width:l,height:o}}function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mx.apply(null,arguments)}function XS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function WS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(n),!0).forEach(function(a){rI(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rI(e,t,n){return(t=nI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nI(e){var t=aI(e,"string");return typeof t=="symbol"?t:t+""}function aI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pz=y.createContext(Jn.initialDimension);function iI(e){return aa(e.width)&&aa(e.height)}function hz(e){var{children:t,width:n,height:a}=e,l=y.useMemo(()=>({width:n,height:a}),[n,a]);return iI(l)?y.createElement(pz.Provider,{value:l},t):null}var By=()=>y.useContext(pz),sI=y.forwardRef((e,t)=>{var{aspect:n,initialDimension:a=Jn.initialDimension,width:l,height:o,minWidth:u=Jn.minWidth,minHeight:d,maxHeight:m,children:p,debounce:h=Jn.debounce,id:v,className:b,onResize:g,style:_={}}=e,j=y.useRef(null),S=y.useRef();S.current=g,y.useImperativeHandle(t,()=>j.current);var[w,E]=y.useState({containerWidth:a.width,containerHeight:a.height}),C=y.useCallback((R,I)=>{E(L=>{var K=Math.round(R),U=Math.round(I);return L.containerWidth===K&&L.containerHeight===U?L:{containerWidth:K,containerHeight:U}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Ps;var R=U=>{var G,V=U[0];if(V!=null){var{width:M,height:k}=V.contentRect;C(M,k),(G=S.current)===null||G===void 0||G.call(S,M,k)}};h>0&&(R=K4(R,h,{trailing:!0,leading:!1}));var I=new ResizeObserver(R),{width:L,height:K}=j.current.getBoundingClientRect();return C(L,K),I.observe(j.current),()=>{I.disconnect()}},[C,h]);var{containerWidth:A,containerHeight:O}=w;yf(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:T,calculatedHeight:P}=mz(A,O,{width:l,height:o,aspect:n,maxHeight:m});return yf(T!=null&&T>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,P,l,o,u,d,n),y.createElement("div",{id:v?"".concat(v):void 0,className:pt("recharts-responsive-container",b),style:WS(WS({},_),{},{width:l,height:o,minWidth:u,minHeight:d,maxHeight:m}),ref:j},y.createElement("div",{style:eI({width:l,height:o})},y.createElement(hz,{width:T,height:P},p)))}),ZS=y.forwardRef((e,t)=>{var n=By();if(aa(n.width)&&aa(n.height))return e.children;var{width:a,height:l}=tI({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=mz(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Se(o)&&Se(u)?y.createElement(hz,{width:o,height:u},e.children):y.createElement(sI,Mx({},e,{width:a,height:l,ref:t}))});function Uy(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var wm=()=>{var e,t=Nr(),n=ze(U4),a=ze(Sm),l=(e=ze(_m))===null||e===void 0?void 0:e.padding;return!t||!a||!l?n:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},lI={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},vz=()=>{var e;return(e=ze(ir))!==null&&e!==void 0?e:lI},gz=()=>ze(Ya),xz=()=>ze(Ka),ot=e=>e.layout.layoutType,qs=()=>ze(ot),yz=()=>{var e=qs();if(e==="horizontal"||e==="vertical")return e},bz=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},oI=()=>{var e=qs();return e!==void 0},Yc=e=>{var t=$t(),n=Nr(),{width:a,height:l}=e,o=By(),u=a,d=l;return o&&(u=o.width>0?o.width:a,d=o.height>0?o.height:l),y.useEffect(()=>{!n&&aa(u)&&aa(d)&&t(f4({width:u,height:d}))},[t,n,u,d]),null},jz=Symbol.for("immer-nothing"),JS=Symbol.for("immer-draftable"),tn=Symbol.for("immer-state");function kn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var zc=Object.getPrototypeOf;function Yl(e){return!!e&&!!e[tn]}function zs(e){return e?Nz(e)||Array.isArray(e)||!!e[JS]||!!e.constructor?.[JS]||Kc(e)||Am(e):!1}var cI=Object.prototype.constructor.toString(),ew=new WeakMap;function Nz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=ew.get(n);return a===void 0&&(a=Function.toString.call(n),ew.set(n,a)),a===cI}function bf(e,t,n=!0){Cm(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function Cm(e){const t=e[tn];return t?t.type_:Array.isArray(e)?1:Kc(e)?2:Am(e)?3:0}function Tx(e,t){return Cm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _z(e,t,n){const a=Cm(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function uI(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Kc(e){return e instanceof Map}function Am(e){return e instanceof Set}function ps(e){return e.copy_||e.base_}function kx(e,t){if(Kc(e))return new Map(e);if(Am(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Nz(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[tn];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(a[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(zc(e),a)}else{const a=zc(e);if(a!==null&&n)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function Fy(e,t=!1){return Em(e)||Yl(e)||!zs(e)||(Cm(e)>1&&Object.defineProperties(e,{set:Dd,add:Dd,clear:Dd,delete:Dd}),Object.freeze(e),t&&Object.values(e).forEach(n=>Fy(n,!0))),e}function dI(){kn(2)}var Dd={value:dI};function Em(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var fI={};function Os(e){const t=fI[e];return t||kn(0,e),t}var Oc;function Sz(){return Oc}function mI(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function tw(e,t){t&&(Os("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Px(e){qx(e),e.drafts_.forEach(pI),e.drafts_=null}function qx(e){e===Oc&&(Oc=e.parent_)}function rw(e){return Oc=mI(Oc,e)}function pI(e){const t=e[tn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[tn].modified_&&(Px(t),kn(4)),zs(e)&&(e=jf(t,e),t.parent_||Nf(t,e)),t.patches_&&Os("Patches").generateReplacementPatches_(n[tn].base_,e,t.patches_,t.inversePatches_)):e=jf(t,n,[]),Px(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jz?e:void 0}function jf(e,t,n){if(Em(t))return t;const a=e.immer_.shouldUseStrictIteration(),l=t[tn];if(!l)return bf(t,(o,u)=>aw(e,l,t,o,u,n),a),t;if(l.scope_!==e)return t;if(!l.modified_)return Nf(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,d=!1;l.type_===3&&(u=new Set(o),o.clear(),d=!0),bf(u,(m,p)=>aw(e,l,o,m,p,n,d),a),Nf(e,o,!1),n&&e.patches_&&Os("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function aw(e,t,n,a,l,o,u){if(l==null||typeof l!="object"&&!u)return;const d=Em(l);if(!(d&&!u)){if(Yl(l)){const m=o&&t&&t.type_!==3&&!Tx(t.assigned_,a)?o.concat(a):void 0,p=jf(e,l,m);if(_z(n,a,p),Yl(p))e.canAutoFreeze_=!1;else return}else u&&n.add(l);if(zs(l)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===l&&d)return;jf(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(Kc(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&Nf(e,l)}}}function Nf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fy(t,n)}function hI(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:Sz(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=Gy;n&&(l=[a],o=Dc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,d}var Gy={get(e,t){if(t===tn)return e;const n=ps(e);if(!Tx(n,t))return vI(e,n,t);const a=n[t];return e.finalized_||!zs(a)?a:a===Mg(e.base_,t)?(Tg(e),e.copy_[t]=Ix(a,e)):a},has(e,t){return t in ps(e)},ownKeys(e){return Reflect.ownKeys(ps(e))},set(e,t,n){const a=wz(ps(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Mg(ps(e),t),o=l?.[tn];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(uI(n,l)&&(n!==void 0||Tx(e.base_,t)))return!0;Tg(e),Rx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Mg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Tg(e),Rx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ps(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){kn(11)},getPrototypeOf(e){return zc(e.base_)},setPrototypeOf(){kn(12)}},Dc={};bf(Gy,(e,t)=>{Dc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Dc.deleteProperty=function(e,t){return Dc.set.call(this,e,t,void 0)};Dc.set=function(e,t,n){return Gy.set.call(this,e[0],t,n,e[0])};function Mg(e,t){const n=e[tn];return(n?ps(n):e)[t]}function vI(e,t,n){const a=wz(t,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function wz(e,t){if(!(t in e))return;let n=zc(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=zc(n)}}function Rx(e){e.modified_||(e.modified_=!0,e.parent_&&Rx(e.parent_))}function Tg(e){e.copy_||(e.copy_=kx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var gI=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const u=this;return function(m=o,...p){return u.produce(m,h=>n.call(this,h,...p))}}typeof n!="function"&&kn(6),a!==void 0&&typeof a!="function"&&kn(7);let l;if(zs(t)){const o=rw(this),u=Ix(t,void 0);let d=!0;try{l=n(u),d=!1}finally{d?Px(o):qx(o)}return tw(o,a),nw(l,o)}else if(!t||typeof t!="object"){if(l=n(t),l===void 0&&(l=t),l===jz&&(l=void 0),this.autoFreeze_&&Fy(l,!0),a){const o=[],u=[];Os("Patches").generateReplacementPatches_(t,l,o,u),a(o,u)}return l}else kn(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(u,...d)=>this.produceWithPatches(u,m=>t(m,...d));let a,l;return[this.produce(t,n,(u,d)=>{a=u,l=d}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){zs(e)||kn(8),Yl(e)&&(e=xI(e));const t=rw(this),n=Ix(e,void 0);return n[tn].isManual_=!0,qx(t),n}finishDraft(e,t){const n=e&&e[tn];(!n||!n.isManual_)&&kn(9);const{scope_:a}=n;return tw(a,t),nw(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const l=t[n];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}n>-1&&(t=t.slice(n+1));const a=Os("Patches").applyPatches_;return Yl(e)?a(e,t):this.produce(e,l=>a(l,t))}};function Ix(e,t){const n=Kc(e)?Os("MapSet").proxyMap_(e,t):Am(e)?Os("MapSet").proxySet_(e,t):hI(e,t);return(t?t.scope_:Sz()).drafts_.push(n),n}function xI(e){return Yl(e)||kn(10,e),Cz(e)}function Cz(e){if(!zs(e)||Em(e))return e;const t=e[tn];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=kx(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=kx(e,!0);return bf(n,(l,o)=>{_z(n,l,Cz(o))},a),t&&(t.finalized_=!1),n}var yI=new gI;yI.produce;var bI={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Az=Fr({name:"legend",initialState:bI,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ct()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,l=qn(e).payload.indexOf(n);l>-1&&(e.payload[l]=a)},prepare:Ct()},removeLegendPayload:{reducer(e,t){var n=qn(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Ct()}}}),{setLegendSize:QZ,setLegendSettings:VZ,addLegendPayload:jI,replaceLegendPayload:NI,removeLegendPayload:_I}=Az.actions,SI=Az.reducer;function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lx.apply(null,arguments)}function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function tc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(n),!0).forEach(function(a){wI(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wI(e,t,n){return(t=CI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CI(e){var t=AI(e,"string");return typeof t=="symbol"?t:t+""}function AI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EI(e){return Array.isArray(e)&&na(e[0])&&na(e[1])?e.join(" ~ "):e}var Dl={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},zI=e=>{var{separator:t=Dl.separator,contentStyle:n,itemStyle:a,labelStyle:l=Dl.labelStyle,payload:o,formatter:u,itemSorter:d,wrapperClassName:m,labelClassName:p,label:h,labelFormatter:v,accessibilityLayer:b=Dl.accessibilityLayer}=e,g=()=>{if(o&&o.length){var O={padding:0,margin:0},T=(d?um(o,d):o).map((P,R)=>{if(P.type==="none")return null;var I=P.formatter||u||EI,{value:L,name:K}=P,U=L,G=K;if(I){var V=I(L,K,P,R,o);if(Array.isArray(V))[U,G]=V;else if(V!=null)U=V;else return null}var M=tc(tc({},Dl.itemStyle),{},{color:P.color||Dl.itemStyle.color},a);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:M},na(G)?y.createElement("span",{className:"recharts-tooltip-item-name"},G):null,na(G)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},U),y.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:O},T)}return null},_=tc(tc({},Dl.contentStyle),n),j=tc({margin:0},l),S=!zt(h),w=S?h:"",E=pt("recharts-default-tooltip",m),C=pt("recharts-tooltip-label",p);S&&v&&o!==void 0&&o!==null&&(w=v(h,o));var A=b?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Lx({className:E,style:_},A),y.createElement("p",{className:C,style:j},y.isValidElement(w)?w:"".concat(w)),g())},rc="recharts-tooltip-wrapper",OI={visibility:"hidden"};function DI(e){var{coordinate:t,translateX:n,translateY:a}=e;return pt(rc,{["".concat(rc,"-right")]:Se(n)&&t&&Se(t.x)&&n>=t.x,["".concat(rc,"-left")]:Se(n)&&t&&Se(t.x)&&n<t.x,["".concat(rc,"-bottom")]:Se(a)&&t&&Se(t.y)&&a>=t.y,["".concat(rc,"-top")]:Se(a)&&t&&Se(t.y)&&a<t.y})}function sw(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offset:l,position:o,reverseDirection:u,tooltipDimension:d,viewBox:m,viewBoxDimension:p}=e;if(o&&Se(o[a]))return o[a];var h=n[a]-d-(l>0?l:0),v=n[a]+l;if(t[a])return u[a]?h:v;var b=m[a];if(b==null)return 0;if(u[a]){var g=h,_=b;return g<_?Math.max(v,b):Math.max(h,b)}if(p==null)return 0;var j=v+d,S=b+p;return j>S?Math.max(h,b):Math.max(v,b)}function MI(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function TI(e){var{allowEscapeViewBox:t,coordinate:n,offsetTop:a,offsetLeft:l,position:o,reverseDirection:u,tooltipBox:d,useTranslate3d:m,viewBox:p}=e,h,v,b;return d.height>0&&d.width>0&&n?(v=sw({allowEscapeViewBox:t,coordinate:n,key:"x",offset:l,position:o,reverseDirection:u,tooltipDimension:d.width,viewBox:p,viewBoxDimension:p.width}),b=sw({allowEscapeViewBox:t,coordinate:n,key:"y",offset:a,position:o,reverseDirection:u,tooltipDimension:d.height,viewBox:p,viewBoxDimension:p.height}),h=MI({translateX:v,translateY:b,useTranslate3d:m})):h=OI,{cssProperties:h,cssClasses:DI({translateX:v,translateY:b,coordinate:n})}}function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(a){$x(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $x(e,t,n){return(t=kI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kI(e){var t=PI(e,"string");return typeof t=="symbol"?t:t+""}function PI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qI extends y.PureComponent{constructor(){super(...arguments),$x(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$x(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:l,children:o,coordinate:u,hasPayload:d,isAnimationActive:m,offset:p,position:h,reverseDirection:v,useTranslate3d:b,viewBox:g,wrapperStyle:_,lastBoundingBox:j,innerRef:S,hasPortalFromProps:w}=this.props,E=typeof p=="number"?p:p.x,C=typeof p=="number"?p:p.y,{cssClasses:A,cssProperties:O}=TI({allowEscapeViewBox:n,coordinate:u,offsetLeft:E,offsetTop:C,position:h,reverseDirection:v,tooltipBox:{height:j.height,width:j.width},useTranslate3d:b,viewBox:g}),T=w?{}:Md(Md({transition:m&&t?"transform ".concat(a,"ms ").concat(l):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),P=Md(Md({},T),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},_);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:A,style:P,ref:S},o)}}var Ez=()=>{var e;return(e=ze(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bx.apply(null,arguments)}function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function cw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(n),!0).forEach(function(a){RI(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RI(e,t,n){return(t=II(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function II(e){var t=LI(e,"string");return typeof t=="symbol"?t:t+""}function LI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uw={curveBasisClosed:I3,curveBasisOpen:L3,curveBasis:R3,curveBumpX:_3,curveBumpY:S3,curveLinearClosed:$3,curveLinear:om,curveMonotoneX:B3,curveMonotoneY:U3,curveNatural:F3,curveStep:G3,curveStepAfter:Q3,curveStepBefore:H3},_f=e=>We(e.x)&&We(e.y),dw=e=>e.base!=null&&_f(e.base)&&_f(e),nc=e=>e.x,ac=e=>e.y,$I=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Gc(e));if((n==="curveMonotone"||n==="curveBump")&&t){var a=uw["".concat(n).concat(t==="vertical"?"Y":"X")];if(a)return a}return uw[n]||om},fw={connectNulls:!1,type:"linear"},BI=e=>{var{type:t=fw.type,points:n=[],baseLine:a,layout:l,connectNulls:o=fw.connectNulls}=e,u=$I(t,l),d=o?n.filter(_f):n;if(Array.isArray(a)){var m,p=n.map((_,j)=>cw(cw({},_),{},{base:a[j]}));l==="vertical"?m=Sd().y(ac).x1(nc).x0(_=>_.base.x):m=Sd().x(nc).y1(ac).y0(_=>_.base.y);var h=m.defined(dw).curve(u),v=o?p.filter(dw):p;return h(v)}var b;l==="vertical"&&Se(a)?b=Sd().y(ac).x1(nc).x0(a):Se(a)?b=Sd().x(nc).y1(ac).y0(a):b=iE().x(nc).y(ac);var g=b.defined(_f).curve(u);return g(d)},zz=e=>{var{className:t,points:n,path:a,pathRef:l}=e,o=qs();if((!n||!n.length)&&!a)return null;var u={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},d=n&&n.length?BI(u):a;return y.createElement("path",Bx({},Rn(e),zy(e),{className:pt("recharts-curve",t),d:d===null?void 0:d,ref:l}))},UI=["x","y","top","left","width","height","className"];function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ux.apply(null,arguments)}function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function FI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(a){GI(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function GI(e,t,n){return(t=HI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HI(e){var t=QI(e,"string");return typeof t=="symbol"?t:t+""}function QI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VI(e,t){if(e==null)return{};var n,a,l=YI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function YI(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var KI=(e,t,n,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(n),XI=e=>{var{x:t=0,y:n=0,top:a=0,left:l=0,width:o=0,height:u=0,className:d}=e,m=VI(e,UI),p=FI({x:t,y:n,top:a,left:l,width:o,height:u},m);return!Se(t)||!Se(n)||!Se(o)||!Se(u)||!Se(a)||!Se(l)?null:y.createElement("path",Ux({},Ar(p),{className:pt("recharts-cross",d),d:KI(t,n,o,u,a,l)}))};function WI(e,t,n,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-l,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(a){ZI(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZI(e,t,n){return(t=JI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JI(e){var t=eL(e,"string");return typeof t=="symbol"?t:t+""}function eL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tL=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Oz=(e,t,n)=>e.map(a=>"".concat(tL(a)," ").concat(t,"ms ").concat(n)).join(","),rL=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(l=>a.includes(l))),Mc=(e,t)=>Object.keys(t).reduce((n,a)=>hw(hw({},n),{},{[a]:e(a,t[a])}),{});function vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vw(Object(n),!0).forEach(function(a){nL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nL(e,t,n){return(t=aL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aL(e){var t=iL(e,"string");return typeof t=="symbol"?t:t+""}function iL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sf=(e,t,n)=>e+(t-e)*n,Fx=e=>{var{from:t,to:n}=e;return t!==n},Dz=(e,t,n)=>{var a=Mc((l,o)=>{if(Fx(o)){var[u,d]=e(o.from,o.to,o.velocity);return Xt(Xt({},o),{},{from:u,velocity:d})}return o},t);return n<1?Mc((l,o)=>Fx(o)&&a[l]!=null?Xt(Xt({},o),{},{velocity:Sf(o.velocity,a[l].velocity,n),from:Sf(o.from,a[l].from,n)}):o,t):Dz(e,a,n-1)};function sL(e,t,n,a,l,o){var u,d=a.reduce((b,g)=>Xt(Xt({},b),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),m=()=>Mc((b,g)=>g.from,d),p=()=>!Object.values(d).filter(Fx).length,h=null,v=b=>{u||(u=b);var g=b-u,_=g/n.dt;d=Dz(n,d,_),l(Xt(Xt(Xt({},e),t),m())),u=b,p()||(h=o.setTimeout(v))};return()=>(h=o.setTimeout(v),()=>{var b;(b=h)===null||b===void 0||b()})}function lL(e,t,n,a,l,o,u){var d=null,m=l.reduce((v,b)=>{var g=e[b],_=t[b];return g==null||_==null?v:Xt(Xt({},v),{},{[b]:[g,_]})},{}),p,h=v=>{p||(p=v);var b=(v-p)/a,g=Mc((j,S)=>Sf(...S,n(b)),m);if(o(Xt(Xt(Xt({},e),t),g)),b<1)d=u.setTimeout(h);else{var _=Mc((j,S)=>Sf(...S,n(1)),m);o(Xt(Xt(Xt({},e),t),_))}};return()=>(d=u.setTimeout(h),()=>{var v;(v=d)===null||v===void 0||v()})}const oL=(e,t,n,a,l,o)=>{var u=rL(e,t);return n==null?()=>(l(Xt(Xt({},e),t)),()=>{}):n.isStepper===!0?sL(e,t,n,u,l,o):lL(e,t,n,a,u,l,o)};var wf=1e-4,Mz=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Tz=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),gw=(e,t)=>n=>{var a=Mz(e,t);return Tz(a,n)},cL=(e,t)=>n=>{var a=Mz(e,t),l=[...a.map((o,u)=>o*u).slice(1),0];return Tz(l,n)},uL=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var a=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var l=a.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},dL=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=uL(n[0]);if(l)return l}}return n.length===4?n:[0,0,1,1]},fL=(e,t,n,a)=>{var l=gw(e,n),o=gw(t,a),u=cL(e,n),d=p=>p>1?1:p<0?0:p,m=p=>{for(var h=p>1?1:p,v=h,b=0;b<8;++b){var g=l(v)-h,_=u(v);if(Math.abs(g-h)<wf||_<wf)return o(v);v=d(v-g/_)}return o(v)};return m.isStepper=!1,m},xw=function(){return fL(...dL(...arguments))},mL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:l=17}=t,o=(u,d,m)=>{var p=-(u-d)*n,h=m*a,v=m+(p-h)*l/1e3,b=m*l/1e3+u;return Math.abs(b-d)<wf&&Math.abs(v)<wf?[d,0]:[b,v]};return o.isStepper=!0,o.dt=l,o},pL=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return xw(e);case"spring":return mL();default:if(e.split("(")[0]==="cubic-bezier")return xw(e)}return typeof e=="function"?e:null};function hL(e){var t,n=()=>null,a=!1,l=null,o=u=>{if(!a){if(Array.isArray(u)){if(!u.length)return;var d=u,[m,...p]=d;if(typeof m=="number"){l=e.setTimeout(o.bind(null,p),m);return}o(m),l=e.setTimeout(o.bind(null,p));return}typeof u=="string"&&(t=u,n(t)),typeof u=="object"&&(t=u,n(t)),typeof u=="function"&&u()}};return{stop:()=>{a=!0},start:u=>{a=!1,l&&(l(),l=null),o(u)},subscribe:u=>(n=u,()=>{n=()=>null}),getTimeoutController:()=>e}}class vL{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=u=>{u-a>=n?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function gL(){return hL(new vL)}var xL=y.createContext(gL);function yL(e,t){var n=y.useContext(xL);return y.useMemo(()=>t??n(e),[e,t,n])}var bL=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zm={isSsr:bL()},jL={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},yw={t:0},kg={t:1};function Om(e){var t=zr(e,jL),{isActive:n,canBegin:a,duration:l,easing:o,begin:u,onAnimationEnd:d,onAnimationStart:m,children:p}=t,h=n==="auto"?!zm.isSsr:n,v=yL(t.animationId,t.animationManager),[b,g]=y.useState(h?yw:kg),_=y.useRef(null);return y.useEffect(()=>{h||g(kg)},[h]),y.useEffect(()=>{if(!h||!a)return Ps;var j=oL(yw,kg,pL(o),l,g,v.getTimeoutController()),S=()=>{_.current=j()};return v.start([m,u,S,l,d]),()=>{v.stop(),_.current&&_.current(),d()}},[h,a,l,o,u,m,d,v]),p(b.t)}function Dm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=y.useRef(wc(t)),a=y.useRef(e);return a.current!==e&&(n.current=wc(t),a.current=e),n.current}var NL=["radius"],_L=["radius"],bw,jw,Nw,_w,Sw,ww,Cw,Aw,Ew,zw;function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ow(Object(n),!0).forEach(function(a){SL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SL(e,t,n){return(t=wL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wL(e){var t=CL(e,"string");return typeof t=="symbol"?t:t+""}function CL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cf.apply(null,arguments)}function Mw(e,t){if(e==null)return{};var n,a,l=AL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function AL(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Kn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Tw=(e,t,n,a,l)=>{var o=Mi(n),u=Mi(a),d=Math.min(Math.abs(o)/2,Math.abs(u)/2),m=u>=0?1:-1,p=o>=0?1:-1,h=u>=0&&o>=0||u<0&&o<0?1:0,v;if(d>0&&Array.isArray(l)){for(var b=[0,0,0,0],g=0,_=4;g<_;g++){var j,S=(j=l[g])!==null&&j!==void 0?j:0;b[g]=S>d?d:S}v=kt(bw||(bw=Kn(["M",",",""])),e,t+m*b[0]),b[0]>0&&(v+=kt(jw||(jw=Kn(["A ",",",",0,0,",",",",",""])),b[0],b[0],h,e+p*b[0],t)),v+=kt(Nw||(Nw=Kn(["L ",",",""])),e+n-p*b[1],t),b[1]>0&&(v+=kt(_w||(_w=Kn(["A ",",",",0,0,",`,
        `,",",""])),b[1],b[1],h,e+n,t+m*b[1])),v+=kt(Sw||(Sw=Kn(["L ",",",""])),e+n,t+a-m*b[2]),b[2]>0&&(v+=kt(ww||(ww=Kn(["A ",",",",0,0,",`,
        `,",",""])),b[2],b[2],h,e+n-p*b[2],t+a)),v+=kt(Cw||(Cw=Kn(["L ",",",""])),e+p*b[3],t+a),b[3]>0&&(v+=kt(Aw||(Aw=Kn(["A ",",",",0,0,",`,
        `,",",""])),b[3],b[3],h,e,t+a-m*b[3])),v+="Z"}else if(d>0&&l===+l&&l>0){var w=Math.min(d,l);v=kt(Ew||(Ew=Kn(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*w,w,w,h,e+p*w,t,e+n-p*w,t,w,w,h,e+n,t+m*w,e+n,t+a-m*w,w,w,h,e+n-p*w,t+a,e+p*w,t+a,w,w,h,e,t+a-m*w)}else v=kt(zw||(zw=Kn(["M ",","," h "," v "," h "," Z"])),e,t,n,a,-n);return v},kw={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kz=e=>{var t=zr(e,kw),n=y.useRef(null),[a,l]=y.useState(-1);y.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&l(J)}catch{}},[]);var{x:o,y:u,width:d,height:m,radius:p,className:h}=t,{animationEasing:v,animationDuration:b,animationBegin:g,isAnimationActive:_,isUpdateAnimationActive:j}=t,S=y.useRef(d),w=y.useRef(m),E=y.useRef(o),C=y.useRef(u),A=y.useMemo(()=>({x:o,y:u,width:d,height:m,radius:p}),[o,u,d,m,p]),O=Dm(A,"rectangle-");if(o!==+o||u!==+u||d!==+d||m!==+m||d===0||m===0)return null;var T=pt("recharts-rectangle",h);if(!j){var P=Ar(t),{radius:R}=P,I=Mw(P,NL);return y.createElement("path",Cf({},I,{x:Mi(o),y:Mi(u),width:Mi(d),height:Mi(m),radius:typeof p=="number"?p:void 0,className:T,d:Tw(o,u,d,m,p)}))}var L=S.current,K=w.current,U=E.current,G=C.current,V="0px ".concat(a===-1?1:a,"px"),M="".concat(a,"px 0px"),k=Oz(["strokeDasharray"],b,typeof v=="string"?v:kw.animationEasing);return y.createElement(Om,{animationId:O,key:O,canBegin:a>0,duration:b,easing:v,isActive:j,begin:g},J=>{var Q=Pt(L,d,J),B=Pt(K,m,J),q=Pt(U,o,J),fe=Pt(G,u,J);n.current&&(S.current=Q,w.current=B,E.current=q,C.current=fe);var te;_?J>0?te={transition:k,strokeDasharray:M}:te={strokeDasharray:V}:te={strokeDasharray:M};var ue=Ar(t),{radius:he}=ue,xe=Mw(ue,_L);return y.createElement("path",Cf({},xe,{radius:typeof p=="number"?p:void 0,className:T,d:Tw(q,fe,Q,B,p),ref:n,style:Dw(Dw({},te),t.style)}))})};function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function qw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(n),!0).forEach(function(a){EL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function EL(e,t,n){return(t=zL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zL(e){var t=OL(e,"string");return typeof t=="symbol"?t:t+""}function OL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Af=Math.PI/180,DL=e=>e*180/Math.PI,vr=(e,t,n,a)=>({x:e+Math.cos(-Af*a)*n,y:t+Math.sin(-Af*a)*n}),ML=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},TL=(e,t)=>{var{x:n,y:a}=e,{x:l,y:o}=t;return Math.sqrt((n-l)**2+(a-o)**2)},kL=(e,t)=>{var{x:n,y:a}=e,{cx:l,cy:o}=t,u=TL({x:n,y:a},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var d=(n-l)/u,m=Math.acos(d);return a>o&&(m=2*Math.PI-m),{radius:u,angle:DL(m),angleInRadian:m}},PL=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),l=Math.floor(n/360),o=Math.min(a,l);return{startAngle:t-o*360,endAngle:n-o*360}},qL=(e,t)=>{var{startAngle:n,endAngle:a}=t,l=Math.floor(n/360),o=Math.floor(a/360),u=Math.min(l,o);return e+u*360},RL=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:l,angle:o}=kL({x:n,y:a},t),{innerRadius:u,outerRadius:d}=t;if(l<u||l>d||l===0)return null;var{startAngle:m,endAngle:p}=PL(t),h=o,v;if(m<=p){for(;h>p;)h-=360;for(;h<m;)h+=360;v=h>=m&&h<=p}else{for(;h>m;)h-=360;for(;h<p;)h+=360;v=h>=p&&h<=m}return v?qw(qw({},t),{},{radius:l,angle:qL(h,t)}):null};function Pz(e){var{cx:t,cy:n,radius:a,startAngle:l,endAngle:o}=e,u=vr(t,n,a,l),d=vr(t,n,a,o);return{points:[u,d],cx:t,cy:n,radius:a,startAngle:l,endAngle:o}}var Rw,Iw,Lw,$w,Bw,Uw,Fw;function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gx.apply(null,arguments)}function vs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var IL=(e,t)=>{var n=Ir(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},Td=e=>{var{cx:t,cy:n,radius:a,angle:l,sign:o,isExternal:u,cornerRadius:d,cornerIsExternal:m}=e,p=d*(u?1:-1)+a,h=Math.asin(d/p)/Af,v=m?l:l+o*h,b=vr(t,n,p,v),g=vr(t,n,a,v),_=m?l-o*h:l,j=vr(t,n,p*Math.cos(h*Af),_);return{center:b,circleTangency:g,lineTangency:j,theta:h}},qz=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:o,endAngle:u}=e,d=IL(o,u),m=o+d,p=vr(t,n,l,o),h=vr(t,n,l,m),v=kt(Rw||(Rw=vs(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,l,l,+(Math.abs(d)>180),+(o>m),h.x,h.y);if(a>0){var b=vr(t,n,a,o),g=vr(t,n,a,m);v+=kt(Iw||(Iw=vs(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,a,a,+(Math.abs(d)>180),+(o<=m),b.x,b.y)}else v+=kt(Lw||(Lw=vs(["L ",","," Z"])),t,n);return v},LL=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:p}=e,h=Ir(p-m),{circleTangency:v,lineTangency:b,theta:g}=Td({cx:t,cy:n,radius:l,angle:m,sign:h,cornerRadius:o,cornerIsExternal:d}),{circleTangency:_,lineTangency:j,theta:S}=Td({cx:t,cy:n,radius:l,angle:p,sign:-h,cornerRadius:o,cornerIsExternal:d}),w=d?Math.abs(m-p):Math.abs(m-p)-g-S;if(w<0)return u?kt($w||($w=vs(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),b.x,b.y,o,o,o*2,o,o,-o*2):qz({cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:m,endAngle:p});var E=kt(Bw||(Bw=vs(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),b.x,b.y,o,o,+(h<0),v.x,v.y,l,l,+(w>180),+(h<0),_.x,_.y,o,o,+(h<0),j.x,j.y);if(a>0){var{circleTangency:C,lineTangency:A,theta:O}=Td({cx:t,cy:n,radius:a,angle:m,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:T,lineTangency:P,theta:R}=Td({cx:t,cy:n,radius:a,angle:p,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),I=d?Math.abs(m-p):Math.abs(m-p)-O-R;if(I<0&&o===0)return"".concat(E,"L").concat(t,",").concat(n,"Z");E+=kt(Uw||(Uw=vs(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),P.x,P.y,o,o,+(h<0),T.x,T.y,a,a,+(I>180),+(h>0),C.x,C.y,o,o,+(h<0),A.x,A.y)}else E+=kt(Fw||(Fw=vs(["L",",","Z"])),t,n);return E},$L={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Rz=e=>{var t=zr(e,$L),{cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h,className:v}=t;if(o<l||p===h)return null;var b=pt("recharts-sector",v),g=o-l,_=In(u,g,0,!0),j;return _>0&&Math.abs(p-h)<360?j=LL({cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(_,g/2),forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h}):j=qz({cx:n,cy:a,innerRadius:l,outerRadius:o,startAngle:p,endAngle:h}),y.createElement("path",Gx({},Ar(t),{className:b,d:j}))};function BL(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(jE(t)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:u,angle:d}=t,m=vr(a,l,o,d),p=vr(a,l,u,d);return[{x:m.x,y:m.y},{x:p.x,y:p.y}]}return Pz(t)}}var Pg={},qg={},Rg={},Gw;function UL(){return Gw||(Gw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DE();function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(Rg)),Rg}var Hw;function FL(){return Hw||(Hw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UL();function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(qg)),qg}var Qw;function GL(){return Qw||(Qw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ME(),n=FL();function a(l,o,u){u&&typeof u!="number"&&t.isIterateeCall(l,o,u)&&(o=u=void 0),l=n.toFinite(l),o===void 0?(o=l,l=0):o=n.toFinite(o),u=u===void 0?l<o?1:-1:n.toFinite(u);const d=Math.max(Math.ceil((o-l)/(u||1)),0),m=new Array(d);for(let p=0;p<d;p++)m[p]=l,l+=u;return m}e.range=a})(Pg)),Pg}var Ig,Vw;function HL(){return Vw||(Vw=1,Ig=GL().range),Ig}var QL=HL();const Iz=Ga(QL);function ki(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function VL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hy(e){let t,n,a;e.length!==2?(t=ki,n=(d,m)=>ki(e(d),m),a=(d,m)=>e(d)-m):(t=e===ki||e===VL?e:YL,n=e,a=e);function l(d,m,p=0,h=d.length){if(p<h){if(t(m,m)!==0)return h;do{const v=p+h>>>1;n(d[v],m)<0?p=v+1:h=v}while(p<h)}return p}function o(d,m,p=0,h=d.length){if(p<h){if(t(m,m)!==0)return h;do{const v=p+h>>>1;n(d[v],m)<=0?p=v+1:h=v}while(p<h)}return p}function u(d,m,p=0,h=d.length){const v=l(d,m,p,h-1);return v>p&&a(d[v-1],m)>-a(d[v],m)?v-1:v}return{left:l,center:u,right:o}}function YL(){return 0}function Lz(e){return e===null?NaN:+e}function*KL(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const XL=Hy(ki),Xc=XL.right;Hy(Lz).center;class Yw extends Map{constructor(t,n=JL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,l]of t)this.set(a,l)}get(t){return super.get(Kw(this,t))}has(t){return super.has(Kw(this,t))}set(t,n){return super.set(WL(this,t),n)}delete(t){return super.delete(ZL(this,t))}}function Kw({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function WL({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function ZL({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function JL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function e8(e=ki){if(e===ki)return $z;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function $z(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const t8=Math.sqrt(50),r8=Math.sqrt(10),n8=Math.sqrt(2);function Ef(e,t,n){const a=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),u=o>=t8?10:o>=r8?5:o>=n8?2:1;let d,m,p;return l<0?(p=Math.pow(10,-l)/u,d=Math.round(e*p),m=Math.round(t*p),d/p<e&&++d,m/p>t&&--m,p=-p):(p=Math.pow(10,l)*u,d=Math.round(e/p),m=Math.round(t/p),d*p<e&&++d,m*p>t&&--m),m<d&&.5<=n&&n<2?Ef(e,t,n*2):[d,m,p]}function Hx(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[l,o,u]=a?Ef(t,e,n):Ef(e,t,n);if(!(o>=l))return[];const d=o-l+1,m=new Array(d);if(a)if(u<0)for(let p=0;p<d;++p)m[p]=(o-p)/-u;else for(let p=0;p<d;++p)m[p]=(o-p)*u;else if(u<0)for(let p=0;p<d;++p)m[p]=(l+p)/-u;else for(let p=0;p<d;++p)m[p]=(l+p)*u;return m}function Qx(e,t,n){return t=+t,e=+e,n=+n,Ef(e,t,n)[2]}function Vx(e,t,n){t=+t,e=+e,n=+n;const a=t<e,l=a?Qx(t,e,n):Qx(e,t,n);return(a?-1:1)*(l<0?1/-l:l)}function Xw(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function Ww(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function Bz(e,t,n=0,a=1/0,l){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(l=l===void 0?$z:e8(l);a>n;){if(a-n>600){const m=a-n+1,p=t-n+1,h=Math.log(m),v=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*v*(m-v)/m)*(p-m/2<0?-1:1),g=Math.max(n,Math.floor(t-p*v/m+b)),_=Math.min(a,Math.floor(t+(m-p)*v/m+b));Bz(e,t,g,_,l)}const o=e[t];let u=n,d=a;for(ic(e,n,t),l(e[a],o)>0&&ic(e,n,a);u<d;){for(ic(e,u,d),++u,--d;l(e[u],o)<0;)++u;for(;l(e[d],o)>0;)--d}l(e[n],o)===0?ic(e,n,d):(++d,ic(e,d,a)),d<=t&&(n=d+1),t<=d&&(a=d-1)}return e}function ic(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function a8(e,t,n){if(e=Float64Array.from(KL(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return Ww(e);if(t>=1)return Xw(e);var a,l=(a-1)*t,o=Math.floor(l),u=Xw(Bz(e,o).subarray(0,o+1)),d=Ww(e.subarray(o+1));return u+(d-u)*(l-o)}}function i8(e,t,n=Lz){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,l=(a-1)*t,o=Math.floor(l),u=+n(e[o],o,e),d=+n(e[o+1],o+1,e);return u+(d-u)*(l-o)}}function s8(e,t,n){e=+e,t=+t,n=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+n;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(l);++a<l;)o[a]=e+a*n;return o}function An(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Xa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Yx=Symbol("implicit");function Qy(){var e=new Yw,t=[],n=[],a=Yx;function l(o){let u=e.get(o);if(u===void 0){if(a!==Yx)return a;e.set(o,u=t.push(o)-1)}return n[u%n.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Yw;for(const u of o)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(o){return arguments.length?(n=Array.from(o),l):n.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return Qy(t,n).unknown(a)},An.apply(l,arguments),l}function Vy(){var e=Qy().unknown(void 0),t=e.domain,n=e.range,a=0,l=1,o,u,d=!1,m=0,p=0,h=.5;delete e.unknown;function v(){var b=t().length,g=l<a,_=g?l:a,j=g?a:l;o=(j-_)/Math.max(1,b-m+p*2),d&&(o=Math.floor(o)),_+=(j-_-o*(b-m))*h,u=o*(1-m),d&&(_=Math.round(_),u=Math.round(u));var S=s8(b).map(function(w){return _+o*w});return n(g?S.reverse():S)}return e.domain=function(b){return arguments.length?(t(b),v()):t()},e.range=function(b){return arguments.length?([a,l]=b,a=+a,l=+l,v()):[a,l]},e.rangeRound=function(b){return[a,l]=b,a=+a,l=+l,d=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(b){return arguments.length?(d=!!b,v()):d},e.padding=function(b){return arguments.length?(m=Math.min(1,p=+b),v()):m},e.paddingInner=function(b){return arguments.length?(m=Math.min(1,b),v()):m},e.paddingOuter=function(b){return arguments.length?(p=+b,v()):p},e.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),v()):h},e.copy=function(){return Vy(t(),[a,l]).round(d).paddingInner(m).paddingOuter(p).align(h)},An.apply(v(),arguments)}function Uz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Uz(t())},e}function l8(){return Uz(Vy.apply(null,arguments).paddingInner(1))}function Yy(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fz(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Wc(){}var Tc=.7,zf=1/Tc,Ul="\\s*([+-]?\\d+)\\s*",kc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o8=/^#([0-9a-f]{3,8})$/,c8=new RegExp(`^rgb\\(${Ul},${Ul},${Ul}\\)$`),u8=new RegExp(`^rgb\\(${ta},${ta},${ta}\\)$`),d8=new RegExp(`^rgba\\(${Ul},${Ul},${Ul},${kc}\\)$`),f8=new RegExp(`^rgba\\(${ta},${ta},${ta},${kc}\\)$`),m8=new RegExp(`^hsl\\(${kc},${ta},${ta}\\)$`),p8=new RegExp(`^hsla\\(${kc},${ta},${ta},${kc}\\)$`),Zw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yy(Wc,Pc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jw,formatHex:Jw,formatHex8:h8,formatHsl:v8,formatRgb:eC,toString:eC});function Jw(){return this.rgb().formatHex()}function h8(){return this.rgb().formatHex8()}function v8(){return Gz(this).formatHsl()}function eC(){return this.rgb().formatRgb()}function Pc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=o8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?tC(t):n===3?new $r(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=c8.exec(e))?new $r(t[1],t[2],t[3],1):(t=u8.exec(e))?new $r(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=d8.exec(e))?kd(t[1],t[2],t[3],t[4]):(t=f8.exec(e))?kd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=m8.exec(e))?aC(t[1],t[2]/100,t[3]/100,1):(t=p8.exec(e))?aC(t[1],t[2]/100,t[3]/100,t[4]):Zw.hasOwnProperty(e)?tC(Zw[e]):e==="transparent"?new $r(NaN,NaN,NaN,0):null}function tC(e){return new $r(e>>16&255,e>>8&255,e&255,1)}function kd(e,t,n,a){return a<=0&&(e=t=n=NaN),new $r(e,t,n,a)}function g8(e){return e instanceof Wc||(e=Pc(e)),e?(e=e.rgb(),new $r(e.r,e.g,e.b,e.opacity)):new $r}function Kx(e,t,n,a){return arguments.length===1?g8(e):new $r(e,t,n,a??1)}function $r(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Yy($r,Kx,Fz(Wc,{brighter(e){return e=e==null?zf:Math.pow(zf,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Tc:Math.pow(Tc,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $r(Ss(this.r),Ss(this.g),Ss(this.b),Of(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rC,formatHex:rC,formatHex8:x8,formatRgb:nC,toString:nC}));function rC(){return`#${gs(this.r)}${gs(this.g)}${gs(this.b)}`}function x8(){return`#${gs(this.r)}${gs(this.g)}${gs(this.b)}${gs((isNaN(this.opacity)?1:this.opacity)*255)}`}function nC(){const e=Of(this.opacity);return`${e===1?"rgb(":"rgba("}${Ss(this.r)}, ${Ss(this.g)}, ${Ss(this.b)}${e===1?")":`, ${e})`}`}function Of(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ss(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gs(e){return e=Ss(e),(e<16?"0":"")+e.toString(16)}function aC(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pn(e,t,n,a)}function Gz(e){if(e instanceof Pn)return new Pn(e.h,e.s,e.l,e.opacity);if(e instanceof Wc||(e=Pc(e)),!e)return new Pn;if(e instanceof Pn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,l=Math.min(t,n,a),o=Math.max(t,n,a),u=NaN,d=o-l,m=(o+l)/2;return d?(t===o?u=(n-a)/d+(n<a)*6:n===o?u=(a-t)/d+2:u=(t-n)/d+4,d/=m<.5?o+l:2-o-l,u*=60):d=m>0&&m<1?0:u,new Pn(u,d,m,e.opacity)}function y8(e,t,n,a){return arguments.length===1?Gz(e):new Pn(e,t,n,a??1)}function Pn(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Yy(Pn,y8,Fz(Wc,{brighter(e){return e=e==null?zf:Math.pow(zf,e),new Pn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Tc:Math.pow(Tc,e),new Pn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,l=2*n-a;return new $r(Lg(e>=240?e-240:e+120,l,a),Lg(e,l,a),Lg(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new Pn(iC(this.h),Pd(this.s),Pd(this.l),Of(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Of(this.opacity);return`${e===1?"hsl(":"hsla("}${iC(this.h)}, ${Pd(this.s)*100}%, ${Pd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iC(e){return e=(e||0)%360,e<0?e+360:e}function Pd(e){return Math.max(0,Math.min(1,e||0))}function Lg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ky=e=>()=>e;function b8(e,t){return function(n){return e+n*t}}function j8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function N8(e){return(e=+e)==1?Hz:function(t,n){return n-t?j8(t,n,e):Ky(isNaN(t)?n:t)}}function Hz(e,t){var n=t-e;return n?b8(e,n):Ky(isNaN(e)?t:e)}const sC=(function e(t){var n=N8(t);function a(l,o){var u=n((l=Kx(l)).r,(o=Kx(o)).r),d=n(l.g,o.g),m=n(l.b,o.b),p=Hz(l.opacity,o.opacity);return function(h){return l.r=u(h),l.g=d(h),l.b=m(h),l.opacity=p(h),l+""}}return a.gamma=e,a})(1);function _8(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),l;return function(o){for(l=0;l<n;++l)a[l]=e[l]*(1-o)+t[l]*o;return a}}function S8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function w8(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,l=new Array(a),o=new Array(n),u;for(u=0;u<a;++u)l[u]=Zl(e[u],t[u]);for(;u<n;++u)o[u]=t[u];return function(d){for(u=0;u<a;++u)o[u]=l[u](d);return o}}function C8(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Df(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function A8(e,t){var n={},a={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?n[l]=Zl(e[l],t[l]):a[l]=t[l];return function(o){for(l in n)a[l]=n[l](o);return a}}var Xx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$g=new RegExp(Xx.source,"g");function E8(e){return function(){return e}}function z8(e){return function(t){return e(t)+""}}function O8(e,t){var n=Xx.lastIndex=$g.lastIndex=0,a,l,o,u=-1,d=[],m=[];for(e=e+"",t=t+"";(a=Xx.exec(e))&&(l=$g.exec(t));)(o=l.index)>n&&(o=t.slice(n,o),d[u]?d[u]+=o:d[++u]=o),(a=a[0])===(l=l[0])?d[u]?d[u]+=l:d[++u]=l:(d[++u]=null,m.push({i:u,x:Df(a,l)})),n=$g.lastIndex;return n<t.length&&(o=t.slice(n),d[u]?d[u]+=o:d[++u]=o),d.length<2?m[0]?z8(m[0].x):E8(t):(t=m.length,function(p){for(var h=0,v;h<t;++h)d[(v=m[h]).i]=v.x(p);return d.join("")})}function Zl(e,t){var n=typeof t,a;return t==null||n==="boolean"?Ky(t):(n==="number"?Df:n==="string"?(a=Pc(t))?(t=a,sC):O8:t instanceof Pc?sC:t instanceof Date?C8:S8(t)?_8:Array.isArray(t)?w8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?A8:Df)(e,t)}function Xy(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function D8(e,t){t===void 0&&(t=e,e=Zl);for(var n=0,a=t.length-1,l=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(l,l=t[++n]);return function(u){var d=Math.max(0,Math.min(a-1,Math.floor(u*=a)));return o[d](u-d)}}function M8(e){return function(){return e}}function Mf(e){return+e}var lC=[0,1];function Cr(e){return e}function Wx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:M8(isNaN(t)?NaN:.5)}function T8(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function k8(e,t,n){var a=e[0],l=e[1],o=t[0],u=t[1];return l<a?(a=Wx(l,a),o=n(u,o)):(a=Wx(a,l),o=n(o,u)),function(d){return o(a(d))}}function P8(e,t,n){var a=Math.min(e.length,t.length)-1,l=new Array(a),o=new Array(a),u=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<a;)l[u]=Wx(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(d){var m=Xc(e,d,1,a)-1;return o[m](l[m](d))}}function Zc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Mm(){var e=lC,t=lC,n=Zl,a,l,o,u=Cr,d,m,p;function h(){var b=Math.min(e.length,t.length);return u!==Cr&&(u=T8(e[0],e[b-1])),d=b>2?P8:k8,m=p=null,v}function v(b){return b==null||isNaN(b=+b)?o:(m||(m=d(e.map(a),t,n)))(a(u(b)))}return v.invert=function(b){return u(l((p||(p=d(t,e.map(a),Df)))(b)))},v.domain=function(b){return arguments.length?(e=Array.from(b,Mf),h()):e.slice()},v.range=function(b){return arguments.length?(t=Array.from(b),h()):t.slice()},v.rangeRound=function(b){return t=Array.from(b),n=Xy,h()},v.clamp=function(b){return arguments.length?(u=b?!0:Cr,h()):u!==Cr},v.interpolate=function(b){return arguments.length?(n=b,h()):n},v.unknown=function(b){return arguments.length?(o=b,v):o},function(b,g){return a=b,l=g,h()}}function Wy(){return Mm()(Cr,Cr)}function q8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Tf(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Kl(e){return e=Tf(Math.abs(e)),e?e[1]:NaN}function R8(e,t){return function(n,a){for(var l=n.length,o=[],u=0,d=e[0],m=0;l>0&&d>0&&(m+d+1>a&&(d=Math.max(1,a-m)),o.push(n.substring(l-=d,l+d)),!((m+=d+1)>a));)d=e[u=(u+1)%e.length];return o.reverse().join(t)}}function I8(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var L8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qc(e){if(!(t=L8.exec(e)))throw new Error("invalid format: "+e);var t;return new Zy({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qc.prototype=Zy.prototype;function Zy(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $8(e){e:for(var t=e.length,n=1,a=-1,l;n<t;++n)switch(e[n]){case".":a=l=n;break;case"0":a===0&&(a=n),l=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var kf;function B8(e,t){var n=Tf(e,t);if(!n)return kf=void 0,e.toPrecision(t);var a=n[0],l=n[1],o=l-(kf=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+Tf(e,Math.max(0,t+o-1))[0]}function oC(e,t){var n=Tf(e,t);if(!n)return e+"";var a=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const cC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:q8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>oC(e*100,t),r:oC,s:B8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uC(e){return e}var dC=Array.prototype.map,fC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function U8(e){var t=e.grouping===void 0||e.thousands===void 0?uC:R8(dC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?uC:I8(dC.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function p(v,b){v=qc(v);var g=v.fill,_=v.align,j=v.sign,S=v.symbol,w=v.zero,E=v.width,C=v.comma,A=v.precision,O=v.trim,T=v.type;T==="n"?(C=!0,T="g"):cC[T]||(A===void 0&&(A=12),O=!0,T="g"),(w||g==="0"&&_==="=")&&(w=!0,g="0",_="=");var P=(b&&b.prefix!==void 0?b.prefix:"")+(S==="$"?n:S==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),R=(S==="$"?a:/[%p]/.test(T)?u:"")+(b&&b.suffix!==void 0?b.suffix:""),I=cC[T],L=/[defgprs%]/.test(T);A=A===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function K(U){var G=P,V=R,M,k,J;if(T==="c")V=I(U)+V,U="";else{U=+U;var Q=U<0||1/U<0;if(U=isNaN(U)?m:I(Math.abs(U),A),O&&(U=$8(U)),Q&&+U==0&&j!=="+"&&(Q=!1),G=(Q?j==="("?j:d:j==="-"||j==="("?"":j)+G,V=(T==="s"&&!isNaN(U)&&kf!==void 0?fC[8+kf/3]:"")+V+(Q&&j==="("?")":""),L){for(M=-1,k=U.length;++M<k;)if(J=U.charCodeAt(M),48>J||J>57){V=(J===46?l+U.slice(M+1):U.slice(M))+V,U=U.slice(0,M);break}}}C&&!w&&(U=t(U,1/0));var B=G.length+U.length+V.length,q=B<E?new Array(E-B+1).join(g):"";switch(C&&w&&(U=t(q+U,q.length?E-V.length:1/0),q=""),_){case"<":U=G+U+V+q;break;case"=":U=G+q+U+V;break;case"^":U=q.slice(0,B=q.length>>1)+G+U+V+q.slice(B);break;default:U=q+G+U+V;break}return o(U)}return K.toString=function(){return v+""},K}function h(v,b){var g=Math.max(-8,Math.min(8,Math.floor(Kl(b)/3)))*3,_=Math.pow(10,-g),j=p((v=qc(v),v.type="f",v),{suffix:fC[8+g/3]});return function(S){return j(_*S)}}return{format:p,formatPrefix:h}}var qd,Jy,Qz;F8({thousands:",",grouping:[3],currency:["$",""]});function F8(e){return qd=U8(e),Jy=qd.format,Qz=qd.formatPrefix,qd}function G8(e){return Math.max(0,-Kl(Math.abs(e)))}function H8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kl(t)/3)))*3-Kl(Math.abs(e)))}function Q8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kl(t)-Kl(e))+1}function Vz(e,t,n,a){var l=Vx(e,t,n),o;switch(a=qc(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=H8(l,u))&&(a.precision=o),Qz(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=Q8(l,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=G8(l))&&(a.precision=o-(a.type==="%")*2);break}}return Jy(a)}function Ui(e){var t=e.domain;return e.ticks=function(n){var a=t();return Hx(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var l=t();return Vz(l[0],l[l.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),l=0,o=a.length-1,u=a[l],d=a[o],m,p,h=10;for(d<u&&(p=u,u=d,d=p,p=l,l=o,o=p);h-- >0;){if(p=Qx(u,d,n),p===m)return a[l]=u,a[o]=d,t(a);if(p>0)u=Math.floor(u/p)*p,d=Math.ceil(d/p)*p;else if(p<0)u=Math.ceil(u*p)/p,d=Math.floor(d*p)/p;else break;m=p}return e},e}function Yz(){var e=Wy();return e.copy=function(){return Zc(e,Yz())},An.apply(e,arguments),Ui(e)}function Kz(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Mf),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return Kz(e).unknown(t)},e=arguments.length?Array.from(e,Mf):[0,1],Ui(n)}function Xz(e,t){e=e.slice();var n=0,a=e.length-1,l=e[n],o=e[a],u;return o<l&&(u=n,n=a,a=u,u=l,l=o,o=u),e[n]=t.floor(l),e[a]=t.ceil(o),e}function mC(e){return Math.log(e)}function pC(e){return Math.exp(e)}function V8(e){return-Math.log(-e)}function Y8(e){return-Math.exp(-e)}function K8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function X8(e){return e===10?K8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function W8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function hC(e){return(t,n)=>-e(-t,n)}function eb(e){const t=e(mC,pC),n=t.domain;let a=10,l,o;function u(){return l=W8(a),o=X8(a),n()[0]<0?(l=hC(l),o=hC(o),e(V8,Y8)):e(mC,pC),t}return t.base=function(d){return arguments.length?(a=+d,u()):a},t.domain=function(d){return arguments.length?(n(d),u()):n()},t.ticks=d=>{const m=n();let p=m[0],h=m[m.length-1];const v=h<p;v&&([p,h]=[h,p]);let b=l(p),g=l(h),_,j;const S=d==null?10:+d;let w=[];if(!(a%1)&&g-b<S){if(b=Math.floor(b),g=Math.ceil(g),p>0){for(;b<=g;++b)for(_=1;_<a;++_)if(j=b<0?_/o(-b):_*o(b),!(j<p)){if(j>h)break;w.push(j)}}else for(;b<=g;++b)for(_=a-1;_>=1;--_)if(j=b>0?_/o(-b):_*o(b),!(j<p)){if(j>h)break;w.push(j)}w.length*2<S&&(w=Hx(p,h,S))}else w=Hx(b,g,Math.min(g-b,S)).map(o);return v?w.reverse():w},t.tickFormat=(d,m)=>{if(d==null&&(d=10),m==null&&(m=a===10?"s":","),typeof m!="function"&&(!(a%1)&&(m=qc(m)).precision==null&&(m.trim=!0),m=Jy(m)),d===1/0)return m;const p=Math.max(1,a*d/t.ticks().length);return h=>{let v=h/o(Math.round(l(h)));return v*a<a-.5&&(v*=a),v<=p?m(h):""}},t.nice=()=>n(Xz(n(),{floor:d=>o(Math.floor(l(d))),ceil:d=>o(Math.ceil(l(d)))})),t}function Wz(){const e=eb(Mm()).domain([1,10]);return e.copy=()=>Zc(e,Wz()).base(e.base()),An.apply(e,arguments),e}function vC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tb(e){var t=1,n=e(vC(t),gC(t));return n.constant=function(a){return arguments.length?e(vC(t=+a),gC(t)):t},Ui(n)}function Zz(){var e=tb(Mm());return e.copy=function(){return Zc(e,Zz()).constant(e.constant())},An.apply(e,arguments)}function xC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Z8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function J8(e){return e<0?-e*e:e*e}function rb(e){var t=e(Cr,Cr),n=1;function a(){return n===1?e(Cr,Cr):n===.5?e(Z8,J8):e(xC(n),xC(1/n))}return t.exponent=function(l){return arguments.length?(n=+l,a()):n},Ui(t)}function nb(){var e=rb(Mm());return e.copy=function(){return Zc(e,nb()).exponent(e.exponent())},An.apply(e,arguments),e}function e$(){return nb.apply(null,arguments).exponent(.5)}function yC(e){return Math.sign(e)*e*e}function t$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Jz(){var e=Wy(),t=[0,1],n=!1,a;function l(o){var u=t$(e(o));return isNaN(u)?a:n?Math.round(u):u}return l.invert=function(o){return e.invert(yC(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,Mf)).map(yC)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(n=!!o,l):n},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return Jz(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},An.apply(l,arguments),Ui(l)}function eO(){var e=[],t=[],n=[],a;function l(){var u=0,d=Math.max(1,t.length);for(n=new Array(d-1);++u<d;)n[u-1]=i8(e,u/d);return o}function o(u){return u==null||isNaN(u=+u)?a:t[Xc(n,u)]}return o.invertExtent=function(u){var d=t.indexOf(u);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(ki),l()},o.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},o.unknown=function(u){return arguments.length?(a=u,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return eO().domain(e).range(t).unknown(a)},An.apply(o,arguments)}function tO(){var e=0,t=1,n=1,a=[.5],l=[0,1],o;function u(m){return m!=null&&m<=m?l[Xc(a,m,0,n)]:o}function d(){var m=-1;for(a=new Array(n);++m<n;)a[m]=((m+1)*t-(m-n)*e)/(n+1);return u}return u.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,d()):[e,t]},u.range=function(m){return arguments.length?(n=(l=Array.from(m)).length-1,d()):l.slice()},u.invertExtent=function(m){var p=l.indexOf(m);return p<0?[NaN,NaN]:p<1?[e,a[0]]:p>=n?[a[n-1],t]:[a[p-1],a[p]]},u.unknown=function(m){return arguments.length&&(o=m),u},u.thresholds=function(){return a.slice()},u.copy=function(){return tO().domain([e,t]).range(l).unknown(o)},An.apply(Ui(u),arguments)}function rO(){var e=[.5],t=[0,1],n,a=1;function l(o){return o!=null&&o<=o?t[Xc(e,o,0,a)]:n}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var u=t.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return rO().domain(e).range(t).unknown(n)},An.apply(l,arguments)}const Bg=new Date,Ug=new Date;function Wt(e,t,n,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const u=l(o),d=l.ceil(o);return o-u<d-o?u:d},l.offset=(o,u)=>(t(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,d)=>{const m=[];if(o=l.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return m;let p;do m.push(p=new Date(+o)),t(o,d),e(o);while(p<o&&o<u);return m},l.filter=o=>Wt(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;t(u,-1),!o(u););else for(;--d>=0;)for(;t(u,1),!o(u););}),n&&(l.count=(o,u)=>(Bg.setTime(+o),Ug.setTime(+u),e(Bg),e(Ug),Math.floor(n(Bg,Ug))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?u=>a(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const Pf=Wt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Pf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Pf);Pf.range;const Oa=1e3,bn=Oa*60,Da=bn*60,Ia=Da*24,ab=Ia*7,bC=Ia*30,Fg=Ia*365,xs=Wt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getUTCSeconds());xs.range;const ib=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oa)},(e,t)=>{e.setTime(+e+t*bn)},(e,t)=>(t-e)/bn,e=>e.getMinutes());ib.range;const sb=Wt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*bn)},(e,t)=>(t-e)/bn,e=>e.getUTCMinutes());sb.range;const lb=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oa-e.getMinutes()*bn)},(e,t)=>{e.setTime(+e+t*Da)},(e,t)=>(t-e)/Da,e=>e.getHours());lb.range;const ob=Wt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Da)},(e,t)=>(t-e)/Da,e=>e.getUTCHours());ob.range;const Jc=Wt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bn)/Ia,e=>e.getDate()-1);Jc.range;const Tm=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>e.getUTCDate()-1);Tm.range;const nO=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>Math.floor(e/Ia));nO.range;function Rs(e){return Wt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*bn)/ab)}const km=Rs(0),qf=Rs(1),r$=Rs(2),n$=Rs(3),Xl=Rs(4),a$=Rs(5),i$=Rs(6);km.range;qf.range;r$.range;n$.range;Xl.range;a$.range;i$.range;function Is(e){return Wt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ab)}const Pm=Is(0),Rf=Is(1),s$=Is(2),l$=Is(3),Wl=Is(4),o$=Is(5),c$=Is(6);Pm.range;Rf.range;s$.range;l$.range;Wl.range;o$.range;c$.range;const cb=Wt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());cb.range;const ub=Wt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ub.range;const La=Wt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());La.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});La.range;const $a=Wt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$a.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});$a.range;function aO(e,t,n,a,l,o){const u=[[xs,1,Oa],[xs,5,5*Oa],[xs,15,15*Oa],[xs,30,30*Oa],[o,1,bn],[o,5,5*bn],[o,15,15*bn],[o,30,30*bn],[l,1,Da],[l,3,3*Da],[l,6,6*Da],[l,12,12*Da],[a,1,Ia],[a,2,2*Ia],[n,1,ab],[t,1,bC],[t,3,3*bC],[e,1,Fg]];function d(p,h,v){const b=h<p;b&&([p,h]=[h,p]);const g=v&&typeof v.range=="function"?v:m(p,h,v),_=g?g.range(p,+h+1):[];return b?_.reverse():_}function m(p,h,v){const b=Math.abs(h-p)/v,g=Hy(([,,S])=>S).right(u,b);if(g===u.length)return e.every(Vx(p/Fg,h/Fg,v));if(g===0)return Pf.every(Math.max(Vx(p,h,v),1));const[_,j]=u[b/u[g-1][2]<u[g][2]/b?g-1:g];return _.every(j)}return[d,m]}const[u$,d$]=aO($a,ub,Pm,nO,ob,sb),[f$,m$]=aO(La,cb,km,Jc,lb,ib);function Gg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function p$(e){var t=e.dateTime,n=e.date,a=e.time,l=e.periods,o=e.days,u=e.shortDays,d=e.months,m=e.shortMonths,p=lc(l),h=oc(l),v=lc(o),b=oc(o),g=lc(u),_=oc(u),j=lc(d),S=oc(d),w=lc(m),E=oc(m),C={a:J,A:Q,b:B,B:q,c:null,d:CC,e:CC,f:R$,g:V$,G:K$,H:k$,I:P$,j:q$,L:iO,m:I$,M:L$,p:fe,q:te,Q:zC,s:OC,S:$$,u:B$,U:U$,V:F$,w:G$,W:H$,x:null,X:null,y:Q$,Y:Y$,Z:X$,"%":EC},A={a:ue,A:he,b:xe,B:H,c:null,d:AC,e:AC,f:e7,g:u7,G:f7,H:W$,I:Z$,j:J$,L:lO,m:t7,M:r7,p:pe,q:Ee,Q:zC,s:OC,S:n7,u:a7,U:i7,V:s7,w:l7,W:o7,x:null,X:null,y:c7,Y:d7,Z:m7,"%":EC},O={a:L,A:K,b:U,B:G,c:V,d:SC,e:SC,f:O$,g:_C,G:NC,H:wC,I:wC,j:C$,L:z$,m:w$,M:A$,p:I,q:S$,Q:M$,s:T$,S:E$,u:y$,U:b$,V:j$,w:x$,W:N$,x:M,X:k,y:_C,Y:NC,Z:_$,"%":D$};C.x=T(n,C),C.X=T(a,C),C.c=T(t,C),A.x=T(n,A),A.X=T(a,A),A.c=T(t,A);function T(le,W){return function(F){var oe=[],X=-1,ye=0,Ie=le.length,$e,Ve,Yt;for(F instanceof Date||(F=new Date(+F));++X<Ie;)le.charCodeAt(X)===37&&(oe.push(le.slice(ye,X)),(Ve=jC[$e=le.charAt(++X)])!=null?$e=le.charAt(++X):Ve=$e==="e"?" ":"0",(Yt=W[$e])&&($e=Yt(F,Ve)),oe.push($e),ye=X+1);return oe.push(le.slice(ye,X)),oe.join("")}}function P(le,W){return function(F){var oe=sc(1900,void 0,1),X=R(oe,le,F+="",0),ye,Ie;if(X!=F.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(W&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(ye=Hg(sc(oe.y,0,1)),Ie=ye.getUTCDay(),ye=Ie>4||Ie===0?Rf.ceil(ye):Rf(ye),ye=Tm.offset(ye,(oe.V-1)*7),oe.y=ye.getUTCFullYear(),oe.m=ye.getUTCMonth(),oe.d=ye.getUTCDate()+(oe.w+6)%7):(ye=Gg(sc(oe.y,0,1)),Ie=ye.getDay(),ye=Ie>4||Ie===0?qf.ceil(ye):qf(ye),ye=Jc.offset(ye,(oe.V-1)*7),oe.y=ye.getFullYear(),oe.m=ye.getMonth(),oe.d=ye.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Ie="Z"in oe?Hg(sc(oe.y,0,1)).getUTCDay():Gg(sc(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Ie+5)%7:oe.w+oe.U*7-(Ie+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,Hg(oe)):Gg(oe)}}function R(le,W,F,oe){for(var X=0,ye=W.length,Ie=F.length,$e,Ve;X<ye;){if(oe>=Ie)return-1;if($e=W.charCodeAt(X++),$e===37){if($e=W.charAt(X++),Ve=O[$e in jC?W.charAt(X++):$e],!Ve||(oe=Ve(le,F,oe))<0)return-1}else if($e!=F.charCodeAt(oe++))return-1}return oe}function I(le,W,F){var oe=p.exec(W.slice(F));return oe?(le.p=h.get(oe[0].toLowerCase()),F+oe[0].length):-1}function L(le,W,F){var oe=g.exec(W.slice(F));return oe?(le.w=_.get(oe[0].toLowerCase()),F+oe[0].length):-1}function K(le,W,F){var oe=v.exec(W.slice(F));return oe?(le.w=b.get(oe[0].toLowerCase()),F+oe[0].length):-1}function U(le,W,F){var oe=w.exec(W.slice(F));return oe?(le.m=E.get(oe[0].toLowerCase()),F+oe[0].length):-1}function G(le,W,F){var oe=j.exec(W.slice(F));return oe?(le.m=S.get(oe[0].toLowerCase()),F+oe[0].length):-1}function V(le,W,F){return R(le,t,W,F)}function M(le,W,F){return R(le,n,W,F)}function k(le,W,F){return R(le,a,W,F)}function J(le){return u[le.getDay()]}function Q(le){return o[le.getDay()]}function B(le){return m[le.getMonth()]}function q(le){return d[le.getMonth()]}function fe(le){return l[+(le.getHours()>=12)]}function te(le){return 1+~~(le.getMonth()/3)}function ue(le){return u[le.getUTCDay()]}function he(le){return o[le.getUTCDay()]}function xe(le){return m[le.getUTCMonth()]}function H(le){return d[le.getUTCMonth()]}function pe(le){return l[+(le.getUTCHours()>=12)]}function Ee(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var W=T(le+="",C);return W.toString=function(){return le},W},parse:function(le){var W=P(le+="",!1);return W.toString=function(){return le},W},utcFormat:function(le){var W=T(le+="",A);return W.toString=function(){return le},W},utcParse:function(le){var W=P(le+="",!0);return W.toString=function(){return le},W}}}var jC={"-":"",_:" ",0:"0"},sr=/^\s*\d+/,h$=/^%/,v$=/[\\^$*+?|[\]().{}]/g;function rt(e,t,n){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<n?new Array(n-o+1).join(t)+l:l)}function g$(e){return e.replace(v$,"\\$&")}function lc(e){return new RegExp("^(?:"+e.map(g$).join("|")+")","i")}function oc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function x$(e,t,n){var a=sr.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function y$(e,t,n){var a=sr.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function b$(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function j$(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function N$(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function NC(e,t,n){var a=sr.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function _C(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function _$(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function S$(e,t,n){var a=sr.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function w$(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function SC(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function C$(e,t,n){var a=sr.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function wC(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function A$(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function E$(e,t,n){var a=sr.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function z$(e,t,n){var a=sr.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function O$(e,t,n){var a=sr.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function D$(e,t,n){var a=h$.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function M$(e,t,n){var a=sr.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function T$(e,t,n){var a=sr.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function CC(e,t){return rt(e.getDate(),t,2)}function k$(e,t){return rt(e.getHours(),t,2)}function P$(e,t){return rt(e.getHours()%12||12,t,2)}function q$(e,t){return rt(1+Jc.count(La(e),e),t,3)}function iO(e,t){return rt(e.getMilliseconds(),t,3)}function R$(e,t){return iO(e,t)+"000"}function I$(e,t){return rt(e.getMonth()+1,t,2)}function L$(e,t){return rt(e.getMinutes(),t,2)}function $$(e,t){return rt(e.getSeconds(),t,2)}function B$(e){var t=e.getDay();return t===0?7:t}function U$(e,t){return rt(km.count(La(e)-1,e),t,2)}function sO(e){var t=e.getDay();return t>=4||t===0?Xl(e):Xl.ceil(e)}function F$(e,t){return e=sO(e),rt(Xl.count(La(e),e)+(La(e).getDay()===4),t,2)}function G$(e){return e.getDay()}function H$(e,t){return rt(qf.count(La(e)-1,e),t,2)}function Q$(e,t){return rt(e.getFullYear()%100,t,2)}function V$(e,t){return e=sO(e),rt(e.getFullYear()%100,t,2)}function Y$(e,t){return rt(e.getFullYear()%1e4,t,4)}function K$(e,t){var n=e.getDay();return e=n>=4||n===0?Xl(e):Xl.ceil(e),rt(e.getFullYear()%1e4,t,4)}function X$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+rt(t/60|0,"0",2)+rt(t%60,"0",2)}function AC(e,t){return rt(e.getUTCDate(),t,2)}function W$(e,t){return rt(e.getUTCHours(),t,2)}function Z$(e,t){return rt(e.getUTCHours()%12||12,t,2)}function J$(e,t){return rt(1+Tm.count($a(e),e),t,3)}function lO(e,t){return rt(e.getUTCMilliseconds(),t,3)}function e7(e,t){return lO(e,t)+"000"}function t7(e,t){return rt(e.getUTCMonth()+1,t,2)}function r7(e,t){return rt(e.getUTCMinutes(),t,2)}function n7(e,t){return rt(e.getUTCSeconds(),t,2)}function a7(e){var t=e.getUTCDay();return t===0?7:t}function i7(e,t){return rt(Pm.count($a(e)-1,e),t,2)}function oO(e){var t=e.getUTCDay();return t>=4||t===0?Wl(e):Wl.ceil(e)}function s7(e,t){return e=oO(e),rt(Wl.count($a(e),e)+($a(e).getUTCDay()===4),t,2)}function l7(e){return e.getUTCDay()}function o7(e,t){return rt(Rf.count($a(e)-1,e),t,2)}function c7(e,t){return rt(e.getUTCFullYear()%100,t,2)}function u7(e,t){return e=oO(e),rt(e.getUTCFullYear()%100,t,2)}function d7(e,t){return rt(e.getUTCFullYear()%1e4,t,4)}function f7(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Wl(e):Wl.ceil(e),rt(e.getUTCFullYear()%1e4,t,4)}function m7(){return"+0000"}function EC(){return"%"}function zC(e){return+e}function OC(e){return Math.floor(+e/1e3)}var Ml,cO,uO;p7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function p7(e){return Ml=p$(e),cO=Ml.format,Ml.parse,uO=Ml.utcFormat,Ml.utcParse,Ml}function h7(e){return new Date(e)}function v7(e){return e instanceof Date?+e:+new Date(+e)}function db(e,t,n,a,l,o,u,d,m,p){var h=Wy(),v=h.invert,b=h.domain,g=p(".%L"),_=p(":%S"),j=p("%I:%M"),S=p("%I %p"),w=p("%a %d"),E=p("%b %d"),C=p("%B"),A=p("%Y");function O(T){return(m(T)<T?g:d(T)<T?_:u(T)<T?j:o(T)<T?S:a(T)<T?l(T)<T?w:E:n(T)<T?C:A)(T)}return h.invert=function(T){return new Date(v(T))},h.domain=function(T){return arguments.length?b(Array.from(T,v7)):b().map(h7)},h.ticks=function(T){var P=b();return e(P[0],P[P.length-1],T??10)},h.tickFormat=function(T,P){return P==null?O:p(P)},h.nice=function(T){var P=b();return(!T||typeof T.range!="function")&&(T=t(P[0],P[P.length-1],T??10)),T?b(Xz(P,T)):h},h.copy=function(){return Zc(h,db(e,t,n,a,l,o,u,d,m,p))},h}function g7(){return An.apply(db(f$,m$,La,cb,km,Jc,lb,ib,xs,cO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function x7(){return An.apply(db(u$,d$,$a,ub,Pm,Tm,ob,sb,xs,uO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qm(){var e=0,t=1,n,a,l,o,u=Cr,d=!1,m;function p(v){return v==null||isNaN(v=+v)?m:u(l===0?.5:(v=(o(v)-n)*l,d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),a=o(t=+t),l=n===a?0:1/(a-n),p):[e,t]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function h(v){return function(b){var g,_;return arguments.length?([g,_]=b,u=v(g,_),p):[u(0),u(1)]}}return p.range=h(Zl),p.rangeRound=h(Xy),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return o=v,n=v(e),a=v(t),l=n===a?0:1/(a-n),p}}function Fi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dO(){var e=Ui(qm()(Cr));return e.copy=function(){return Fi(e,dO())},Xa.apply(e,arguments)}function fO(){var e=eb(qm()).domain([1,10]);return e.copy=function(){return Fi(e,fO()).base(e.base())},Xa.apply(e,arguments)}function mO(){var e=tb(qm());return e.copy=function(){return Fi(e,mO()).constant(e.constant())},Xa.apply(e,arguments)}function fb(){var e=rb(qm());return e.copy=function(){return Fi(e,fb()).exponent(e.exponent())},Xa.apply(e,arguments)}function y7(){return fb.apply(null,arguments).exponent(.5)}function pO(){var e=[],t=Cr;function n(a){if(a!=null&&!isNaN(a=+a))return t((Xc(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ki),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,l)=>t(l/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(l,o)=>a8(e,o/a))},n.copy=function(){return pO(t).domain(e)},Xa.apply(n,arguments)}function Rm(){var e=0,t=.5,n=1,a=1,l,o,u,d,m,p=Cr,h,v=!1,b;function g(j){return isNaN(j=+j)?b:(j=.5+((j=+h(j))-o)*(a*j<a*o?d:m),p(v?Math.max(0,Math.min(1,j)):j))}g.domain=function(j){return arguments.length?([e,t,n]=j,l=h(e=+e),o=h(t=+t),u=h(n=+n),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,g):[e,t,n]},g.clamp=function(j){return arguments.length?(v=!!j,g):v},g.interpolator=function(j){return arguments.length?(p=j,g):p};function _(j){return function(S){var w,E,C;return arguments.length?([w,E,C]=S,p=D8(j,[w,E,C]),g):[p(0),p(.5),p(1)]}}return g.range=_(Zl),g.rangeRound=_(Xy),g.unknown=function(j){return arguments.length?(b=j,g):b},function(j){return h=j,l=j(e),o=j(t),u=j(n),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,g}}function hO(){var e=Ui(Rm()(Cr));return e.copy=function(){return Fi(e,hO())},Xa.apply(e,arguments)}function vO(){var e=eb(Rm()).domain([.1,1,10]);return e.copy=function(){return Fi(e,vO()).base(e.base())},Xa.apply(e,arguments)}function gO(){var e=tb(Rm());return e.copy=function(){return Fi(e,gO()).constant(e.constant())},Xa.apply(e,arguments)}function mb(){var e=rb(Rm());return e.copy=function(){return Fi(e,mb()).exponent(e.exponent())},Xa.apply(e,arguments)}function b7(){return mb.apply(null,arguments).exponent(.5)}const hc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Vy,scaleDiverging:hO,scaleDivergingLog:vO,scaleDivergingPow:mb,scaleDivergingSqrt:b7,scaleDivergingSymlog:gO,scaleIdentity:Kz,scaleImplicit:Yx,scaleLinear:Yz,scaleLog:Wz,scaleOrdinal:Qy,scalePoint:l8,scalePow:nb,scaleQuantile:eO,scaleQuantize:tO,scaleRadial:Jz,scaleSequential:dO,scaleSequentialLog:fO,scaleSequentialPow:fb,scaleSequentialQuantile:pO,scaleSequentialSqrt:y7,scaleSequentialSymlog:mO,scaleSqrt:e$,scaleSymlog:Zz,scaleThreshold:rO,scaleTime:g7,scaleUtc:x7,tickFormat:Vz},Symbol.toStringTag,{value:"Module"}));var Wa=e=>e.chartData,xO=se([Wa],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),pb=(e,t,n,a)=>a?xO(e):Wa(e),j7=(e,t,n)=>n?xO(e):Wa(e);function Ba(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(We(t)&&We(n))return!0}return!1}function DC(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function yO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,l,o;if(We(n))l=n;else if(typeof n=="function")return;if(We(a))o=a;else if(typeof a=="function")return;var u=[l,o];if(Ba(u))return u}}function N7(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(Ba(a))return DC(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,d;if(l==="auto")t!=null&&(u=Math.min(...t));else if(Se(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&US.test(l)){var m=US.exec(l);if(m==null||m[1]==null||t==null)u=void 0;else{var p=+m[1];u=t[0]-p}}else u=t?.[0];if(o==="auto")t!=null&&(d=Math.max(...t));else if(Se(o))d=o;else if(typeof o=="function")try{t!=null&&(d=o(t?.[1]))}catch{}else if(typeof o=="string"&&FS.test(o)){var h=FS.exec(o);if(h==null||h[1]==null||t==null)d=void 0;else{var v=+h[1];d=t[1]+v}}else d=t?.[1];var b=[u,d];if(Ba(b))return t==null?b:DC(b,t,n)}}}var Jl=1e9,_7={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vb,At=!0,wn="[DecimalError] ",ws=wn+"Invalid argument: ",hb=wn+"Exponent out of range: ",eo=Math.floor,hs=Math.pow,S7=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wr,nr=1e7,_t=7,bO=9007199254740991,If=eo(bO/_t),Ne={};Ne.absoluteValue=Ne.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ne.comparedTo=Ne.cmp=function(e){var t,n,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,t=0,n=a<l?a:l;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};Ne.decimalPlaces=Ne.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*_t;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ne.dividedBy=Ne.div=function(e){return ka(this,new this.constructor(e))};Ne.dividedToIntegerBy=Ne.idiv=function(e){var t=this,n=t.constructor;return gt(ka(t,new n(e),0,1),n.precision)};Ne.equals=Ne.eq=function(e){return!this.cmp(e)};Ne.exponent=function(){return Vt(this)};Ne.greaterThan=Ne.gt=function(e){return this.cmp(e)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(e){return this.cmp(e)>=0};Ne.isInteger=Ne.isint=function(){return this.e>this.d.length-2};Ne.isNegative=Ne.isneg=function(){return this.s<0};Ne.isPositive=Ne.ispos=function(){return this.s>0};Ne.isZero=function(){return this.s===0};Ne.lessThan=Ne.lt=function(e){return this.cmp(e)<0};Ne.lessThanOrEqualTo=Ne.lte=function(e){return this.cmp(e)<1};Ne.logarithm=Ne.log=function(e){var t,n=this,a=n.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Wr))throw Error(wn+"NaN");if(n.s<1)throw Error(wn+(n.s?"NaN":"-Infinity"));return n.eq(Wr)?new a(0):(At=!1,t=ka(Rc(n,o),Rc(e,o),o),At=!0,gt(t,l))};Ne.minus=Ne.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_O(t,e):jO(t,(e.s=-e.s,e))};Ne.modulo=Ne.mod=function(e){var t,n=this,a=n.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(wn+"NaN");return n.s?(At=!1,t=ka(n,e,0,1).times(e),At=!0,n.minus(t)):gt(new a(n),l)};Ne.naturalExponential=Ne.exp=function(){return NO(this)};Ne.naturalLogarithm=Ne.ln=function(){return Rc(this)};Ne.negated=Ne.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ne.plus=Ne.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?jO(t,e):_O(t,(e.s=-e.s,e))};Ne.precision=Ne.sd=function(e){var t,n,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ws+e);if(t=Vt(l)+1,a=l.d.length-1,n=a*_t+1,a=l.d[a],a){for(;a%10==0;a/=10)n--;for(a=l.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};Ne.squareRoot=Ne.sqrt=function(){var e,t,n,a,l,o,u,d=this,m=d.constructor;if(d.s<1){if(!d.s)return new m(0);throw Error(wn+"NaN")}for(e=Vt(d),At=!1,l=Math.sqrt(+d),l==0||l==1/0?(t=ea(d.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=eo((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new m(t)):a=new m(l.toString()),n=m.precision,l=u=n+3;;)if(o=a,a=o.plus(ka(d,o,u+2)).times(.5),ea(o.d).slice(0,u)===(t=ea(a.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(gt(o,n+1,0),o.times(o).eq(d)){a=o;break}}else if(t!="9999")break;u+=4}return At=!0,gt(a,n)};Ne.times=Ne.mul=function(e){var t,n,a,l,o,u,d,m,p,h=this,v=h.constructor,b=h.d,g=(e=new v(e)).d;if(!h.s||!e.s)return new v(0);for(e.s*=h.s,n=h.e+e.e,m=b.length,p=g.length,m<p&&(o=b,b=g,g=o,u=m,m=p,p=u),o=[],u=m+p,a=u;a--;)o.push(0);for(a=p;--a>=0;){for(t=0,l=m+a;l>a;)d=o[l]+g[a]*b[l-a-1]+t,o[l--]=d%nr|0,t=d/nr|0;o[l]=(o[l]+t)%nr|0}for(;!o[--u];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,At?gt(e,v.precision):e};Ne.toDecimalPlaces=Ne.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(ia(e,0,Jl),t===void 0?t=a.rounding:ia(t,0,8),gt(n,e+Vt(n)+1,t))};Ne.toExponential=function(e,t){var n,a=this,l=a.constructor;return e===void 0?n=Ds(a,!0):(ia(e,0,Jl),t===void 0?t=l.rounding:ia(t,0,8),a=gt(new l(a),e+1,t),n=Ds(a,!0,e+1)),n};Ne.toFixed=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?Ds(l):(ia(e,0,Jl),t===void 0?t=o.rounding:ia(t,0,8),a=gt(new o(l),e+Vt(l)+1,t),n=Ds(a.abs(),!1,e+Vt(a)+1),l.isneg()&&!l.isZero()?"-"+n:n)};Ne.toInteger=Ne.toint=function(){var e=this,t=e.constructor;return gt(new t(e),Vt(e)+1,t.rounding)};Ne.toNumber=function(){return+this};Ne.toPower=Ne.pow=function(e){var t,n,a,l,o,u,d=this,m=d.constructor,p=12,h=+(e=new m(e));if(!e.s)return new m(Wr);if(d=new m(d),!d.s){if(e.s<1)throw Error(wn+"Infinity");return d}if(d.eq(Wr))return d;if(a=m.precision,e.eq(Wr))return gt(d,a);if(t=e.e,n=e.d.length-1,u=t>=n,o=d.s,u){if((n=h<0?-h:h)<=bO){for(l=new m(Wr),t=Math.ceil(a/_t+4),At=!1;n%2&&(l=l.times(d),TC(l.d,t)),n=eo(n/2),n!==0;)d=d.times(d),TC(d.d,t);return At=!0,e.s<0?new m(Wr).div(l):gt(l,a)}}else if(o<0)throw Error(wn+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,At=!1,l=e.times(Rc(d,a+p)),At=!0,l=NO(l),l.s=o,l};Ne.toPrecision=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?(n=Vt(l),a=Ds(l,n<=o.toExpNeg||n>=o.toExpPos)):(ia(e,1,Jl),t===void 0?t=o.rounding:ia(t,0,8),l=gt(new o(l),e,t),n=Vt(l),a=Ds(l,e<=n||n<=o.toExpNeg,e)),a};Ne.toSignificantDigits=Ne.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(ia(e,1,Jl),t===void 0?t=a.rounding:ia(t,0,8)),gt(new a(n),e,t)};Ne.toString=Ne.valueOf=Ne.val=Ne.toJSON=Ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Vt(e),n=e.constructor;return Ds(e,t<=n.toExpNeg||t>=n.toExpPos)};function jO(e,t){var n,a,l,o,u,d,m,p,h=e.constructor,v=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),At?gt(t,v):t;if(m=e.d,p=t.d,u=e.e,l=t.e,m=m.slice(),o=u-l,o){for(o<0?(a=m,o=-o,d=p.length):(a=p,l=u,d=m.length),u=Math.ceil(v/_t),d=u>d?u+1:d+1,o>d&&(o=d,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(d=m.length,o=p.length,d-o<0&&(o=d,a=p,p=m,m=a),n=0;o;)n=(m[--o]=m[o]+p[o]+n)/nr|0,m[o]%=nr;for(n&&(m.unshift(n),++l),d=m.length;m[--d]==0;)m.pop();return t.d=m,t.e=l,At?gt(t,v):t}function ia(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ws+e)}function ea(e){var t,n,a,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,t=1;t<l;t++)a=e[t]+"",n=_t-a.length,n&&(o+=zi(n)),o+=a;u=e[t],a=u+"",n=_t-a.length,n&&(o+=zi(n))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var ka=(function(){function e(a,l){var o,u=0,d=a.length;for(a=a.slice();d--;)o=a[d]*l+u,a[d]=o%nr|0,u=o/nr|0;return u&&a.unshift(u),a}function t(a,l,o,u){var d,m;if(o!=u)m=o>u?1:-1;else for(d=m=0;d<o;d++)if(a[d]!=l[d]){m=a[d]>l[d]?1:-1;break}return m}function n(a,l,o){for(var u=0;o--;)a[o]-=u,u=a[o]<l[o]?1:0,a[o]=u*nr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,u){var d,m,p,h,v,b,g,_,j,S,w,E,C,A,O,T,P,R,I=a.constructor,L=a.s==l.s?1:-1,K=a.d,U=l.d;if(!a.s)return new I(a);if(!l.s)throw Error(wn+"Division by zero");for(m=a.e-l.e,P=U.length,O=K.length,g=new I(L),_=g.d=[],p=0;U[p]==(K[p]||0);)++p;if(U[p]>(K[p]||0)&&--m,o==null?E=o=I.precision:u?E=o+(Vt(a)-Vt(l))+1:E=o,E<0)return new I(0);if(E=E/_t+2|0,p=0,P==1)for(h=0,U=U[0],E++;(p<O||h)&&E--;p++)C=h*nr+(K[p]||0),_[p]=C/U|0,h=C%U|0;else{for(h=nr/(U[0]+1)|0,h>1&&(U=e(U,h),K=e(K,h),P=U.length,O=K.length),A=P,j=K.slice(0,P),S=j.length;S<P;)j[S++]=0;R=U.slice(),R.unshift(0),T=U[0],U[1]>=nr/2&&++T;do h=0,d=t(U,j,P,S),d<0?(w=j[0],P!=S&&(w=w*nr+(j[1]||0)),h=w/T|0,h>1?(h>=nr&&(h=nr-1),v=e(U,h),b=v.length,S=j.length,d=t(v,j,b,S),d==1&&(h--,n(v,P<b?R:U,b))):(h==0&&(d=h=1),v=U.slice()),b=v.length,b<S&&v.unshift(0),n(j,v,S),d==-1&&(S=j.length,d=t(U,j,P,S),d<1&&(h++,n(j,P<S?R:U,S))),S=j.length):d===0&&(h++,j=[0]),_[p++]=h,d&&j[0]?j[S++]=K[A]||0:(j=[K[A]],S=1);while((A++<O||j[0]!==void 0)&&E--)}return _[0]||_.shift(),g.e=m,gt(g,u?o+Vt(g)+1:o)}})();function NO(e,t){var n,a,l,o,u,d,m=0,p=0,h=e.constructor,v=h.precision;if(Vt(e)>16)throw Error(hb+Vt(e));if(!e.s)return new h(Wr);for(At=!1,d=v,u=new h(.03125);e.abs().gte(.1);)e=e.times(u),p+=5;for(a=Math.log(hs(2,p))/Math.LN10*2+5|0,d+=a,n=l=o=new h(Wr),h.precision=d;;){if(l=gt(l.times(e),d),n=n.times(++m),u=o.plus(ka(l,n,d)),ea(u.d).slice(0,d)===ea(o.d).slice(0,d)){for(;p--;)o=gt(o.times(o),d);return h.precision=v,t==null?(At=!0,gt(o,v)):o}o=u}}function Vt(e){for(var t=e.e*_t,n=e.d[0];n>=10;n/=10)t++;return t}function Qg(e,t,n){if(t>e.LN10.sd())throw At=!0,n&&(e.precision=n),Error(wn+"LN10 precision limit exceeded");return gt(new e(e.LN10),t)}function zi(e){for(var t="";e--;)t+="0";return t}function Rc(e,t){var n,a,l,o,u,d,m,p,h,v=1,b=10,g=e,_=g.d,j=g.constructor,S=j.precision;if(g.s<1)throw Error(wn+(g.s?"NaN":"-Infinity"));if(g.eq(Wr))return new j(0);if(t==null?(At=!1,p=S):p=t,g.eq(10))return t==null&&(At=!0),Qg(j,p);if(p+=b,j.precision=p,n=ea(_),a=n.charAt(0),o=Vt(g),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)g=g.times(e),n=ea(g.d),a=n.charAt(0),v++;o=Vt(g),a>1?(g=new j("0."+n),o++):g=new j(a+"."+n.slice(1))}else return m=Qg(j,p+2,S).times(o+""),g=Rc(new j(a+"."+n.slice(1)),p-b).plus(m),j.precision=S,t==null?(At=!0,gt(g,S)):g;for(d=u=g=ka(g.minus(Wr),g.plus(Wr),p),h=gt(g.times(g),p),l=3;;){if(u=gt(u.times(h),p),m=d.plus(ka(u,new j(l),p)),ea(m.d).slice(0,p)===ea(d.d).slice(0,p))return d=d.times(2),o!==0&&(d=d.plus(Qg(j,p+2,S).times(o+""))),d=ka(d,new j(v),p),j.precision=S,t==null?(At=!0,gt(d,S)):d;d=m,l+=2}}function MC(e,t){var n,a,l;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(a,l),t){if(l-=a,n=n-a-1,e.e=eo(n/_t),e.d=[],a=(n+1)%_t,n<0&&(a+=_t),a<l){for(a&&e.d.push(+t.slice(0,a)),l-=_t;a<l;)e.d.push(+t.slice(a,a+=_t));t=t.slice(a),a=_t-t.length}else a-=l;for(;a--;)t+="0";if(e.d.push(+t),At&&(e.e>If||e.e<-If))throw Error(hb+n)}else e.s=0,e.e=0,e.d=[0];return e}function gt(e,t,n){var a,l,o,u,d,m,p,h,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(a=t-u,a<0)a+=_t,l=t,p=v[h=0];else{if(h=Math.ceil((a+1)/_t),o=v.length,h>=o)return e;for(p=o=v[h],u=1;o>=10;o/=10)u++;a%=_t,l=a-_t+u}if(n!==void 0&&(o=hs(10,u-l-1),d=p/o%10|0,m=t<0||v[h+1]!==void 0||p%o,m=n<4?(d||m)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||m||n==6&&(a>0?l>0?p/hs(10,u-l):0:v[h-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return m?(o=Vt(e),v.length=1,t=t-o-1,v[0]=hs(10,(_t-t%_t)%_t),e.e=eo(-t/_t)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(a==0?(v.length=h,o=1,h--):(v.length=h+1,o=hs(10,_t-a),v[h]=l>0?(p/hs(10,u-l)%hs(10,l)|0)*o:0),m)for(;;)if(h==0){(v[0]+=o)==nr&&(v[0]=1,++e.e);break}else{if(v[h]+=o,v[h]!=nr)break;v[h--]=0,o=1}for(a=v.length;v[--a]===0;)v.pop();if(At&&(e.e>If||e.e<-If))throw Error(hb+Vt(e));return e}function _O(e,t){var n,a,l,o,u,d,m,p,h,v,b=e.constructor,g=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),At?gt(t,g):t;if(m=e.d,v=t.d,a=t.e,p=e.e,m=m.slice(),u=p-a,u){for(h=u<0,h?(n=m,u=-u,d=v.length):(n=v,a=p,d=m.length),l=Math.max(Math.ceil(g/_t),d)+2,u>l&&(u=l,n.length=1),n.reverse(),l=u;l--;)n.push(0);n.reverse()}else{for(l=m.length,d=v.length,h=l<d,h&&(d=l),l=0;l<d;l++)if(m[l]!=v[l]){h=m[l]<v[l];break}u=0}for(h&&(n=m,m=v,v=n,t.s=-t.s),d=m.length,l=v.length-d;l>0;--l)m[d++]=0;for(l=v.length;l>u;){if(m[--l]<v[l]){for(o=l;o&&m[--o]===0;)m[o]=nr-1;--m[o],m[l]+=nr}m[l]-=v[l]}for(;m[--d]===0;)m.pop();for(;m[0]===0;m.shift())--a;return m[0]?(t.d=m,t.e=a,At?gt(t,g):t):new b(0)}function Ds(e,t,n){var a,l=Vt(e),o=ea(e.d),u=o.length;return t?(n&&(a=n-u)>0?o=o.charAt(0)+"."+o.slice(1)+zi(a):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+zi(-l-1)+o,n&&(a=n-u)>0&&(o+=zi(a))):l>=u?(o+=zi(l+1-u),n&&(a=n-l-1)>0&&(o=o+"."+zi(a))):((a=l+1)<u&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-u)>0&&(l+1===u&&(o+="."),o+=zi(a))),e.s<0?"-"+o:o}function TC(e,t){if(e.length>t)return e.length=t,!0}function SO(e){var t,n,a;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(ws+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return MC(u,o.toString())}else if(typeof o!="string")throw Error(ws+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,S7.test(o))MC(u,o);else throw Error(ws+o)}if(l.prototype=Ne,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=SO,l.config=l.set=w7,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return l.config(e),l}function w7(e){if(!e||typeof e!="object")throw Error(wn+"Object expected");var t,n,a,l=["precision",1,Jl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((a=e[n=l[t]])!==void 0)if(eo(a)===a&&a>=l[t+1]&&a<=l[t+2])this[n]=a;else throw Error(ws+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(ws+n+": "+a);return this}var vb=SO(_7);Wr=new vb(1);const st=vb;function wO(e){var t;return e===0?t=1:t=Math.floor(new st(e).abs().log(10).toNumber())+1,t}function CO(e,t,n){for(var a=new st(e),l=0,o=[];a.lt(t)&&l<1e5;)o.push(a.toNumber()),a=a.add(n),l++;return o}var AO=e=>{var[t,n]=e,[a,l]=[t,n];return t>n&&([a,l]=[n,t]),[a,l]},EO=(e,t,n)=>{if(e.lte(0))return new st(0);var a=wO(e.toNumber()),l=new st(10).pow(a),o=e.div(l),u=a!==1?.05:.1,d=new st(Math.ceil(o.div(u).toNumber())).add(n).mul(u),m=d.mul(l);return t?new st(m.toNumber()):new st(Math.ceil(m.toNumber()))},C7=(e,t,n)=>{var a=new st(1),l=new st(e);if(!l.isint()&&n){var o=Math.abs(e);o<1?(a=new st(10).pow(wO(e)-1),l=new st(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new st(Math.floor(e)))}else e===0?l=new st(Math.floor((t-1)/2)):n||(l=new st(Math.floor(e)));for(var u=Math.floor((t-1)/2),d=[],m=0;m<t;m++)d.push(l.add(new st(m-u).mul(a)).toNumber());return d},zO=function(t,n,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new st(0),tickMin:new st(0),tickMax:new st(0)};var u=EO(new st(n).sub(t).div(a-1),l,o),d;t<=0&&n>=0?d=new st(0):(d=new st(t).add(n).div(2),d=d.sub(new st(d).mod(u)));var m=Math.ceil(d.sub(t).div(u).toNumber()),p=Math.ceil(new st(n).sub(d).div(u).toNumber()),h=m+p+1;return h>a?zO(t,n,a,l,o+1):(h<a&&(p=n>0?p+(a-h):p,m=n>0?m:m+(a-h)),{step:u,tickMin:d.sub(new st(m).mul(u)),tickMax:d.add(new st(p).mul(u))})},A7=function(t){var[n,a]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[d,m]=AO([n,a]);if(d===-1/0||m===1/0){var p=m===1/0?[d,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),m];return n>a?p.reverse():p}if(d===m)return C7(d,l,o);var{step:h,tickMin:v,tickMax:b}=zO(d,m,u,o,0),g=CO(v,b.add(new st(.1).mul(h)),h);return n>a?g.reverse():g},E7=function(t,n){var[a,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=AO([a,l]);if(u===-1/0||d===1/0)return[a,l];if(u===d)return[u];var m=Math.max(n,2),p=EO(new st(d).sub(u).div(m-1),o,0),h=[...CO(new st(u),new st(d),p),d];return o===!1&&(h=h.map(v=>Math.round(v))),a>l?h.reverse():h},OO=e=>e.rootProps.maxBarSize,z7=e=>e.rootProps.barGap,DO=e=>e.rootProps.barCategoryGap,O7=e=>e.rootProps.barSize,Im=e=>e.rootProps.stackOffset,MO=e=>e.rootProps.reverseStackOrder,gb=e=>e.options.chartName,xb=e=>e.rootProps.syncId,TO=e=>e.rootProps.syncMethod,yb=e=>e.options.eventEmitter,ar={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ds={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Xn={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Lm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function $m(e,t,n){if(n!=="auto")return n;if(e!=null)return Va(e,t)?"category":"number"}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Lf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(a){D7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function D7(e,t,n){return(t=M7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M7(e){var t=T7(e,"string");return typeof t=="symbol"?t:t+""}function T7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PC={allowDataOverflow:ds.allowDataOverflow,allowDecimals:ds.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ds.angleAxisId,includeHidden:!1,name:void 0,reversed:ds.reversed,scale:ds.scale,tick:ds.tick,tickCount:void 0,ticks:void 0,type:ds.type,unit:void 0},qC={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:Xn.allowDecimals,allowDuplicatedCategory:Xn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xn.radiusAxisId,includeHidden:Xn.includeHidden,name:void 0,reversed:Xn.reversed,scale:Xn.scale,tick:Xn.tick,tickCount:Xn.tickCount,ticks:void 0,type:Xn.type,unit:void 0},k7=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},bb=se([k7,bz],(e,t)=>{var n;if(e!=null)return e;var a=(n=$m(t,"angleAxis",PC.type))!==null&&n!==void 0?n:"category";return Lf(Lf({},PC),{},{type:a})}),P7=(e,t)=>e.polarAxis.radiusAxis[t],jb=se([P7,bz],(e,t)=>{var n;if(e!=null)return e;var a=(n=$m(t,"radiusAxis",qC.type))!==null&&n!==void 0?n:"category";return Lf(Lf({},qC),{},{type:a})}),Bm=e=>e.polarOptions,Nb=se([Ya,Ka,ir],ML),kO=se([Bm,Nb],(e,t)=>{if(e!=null)return In(e.innerRadius,t,0)}),PO=se([Bm,Nb],(e,t)=>{if(e!=null)return In(e.outerRadius,t,t*.8)}),q7=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},qO=se([Bm],q7);se([bb,qO],Lm);var RO=se([Nb,kO,PO],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});se([jb,RO],Lm);var IO=se([ot,Bm,kO,PO,Ya,Ka],(e,t,n,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:u,cy:d,startAngle:m,endAngle:p}=t;return{cx:In(u,l,l/2),cy:In(d,o,o/2),innerRadius:n,outerRadius:a,startAngle:m,endAngle:p,clockWise:!1}}}),lr=(e,t)=>t,Um=(e,t,n)=>n;function _b(e){return e?.id}function LO(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=n,u=new Map;return e.forEach(d=>{var m,p=(m=d.data)!==null&&m!==void 0?m:a;if(!(p==null||p.length===0)){var h=_b(d);p.forEach((v,b)=>{var g=o==null||l?b:String(Qt(v,o,null)),_=Qt(v,d.dataKey,0),j;u.has(g)?j=u.get(g):j={},Object.assign(j,{[h]:_}),u.set(g,j)})}}),Array.from(u.values())}function Fm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Gm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Hm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function R7(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var or=e=>{var t=ot(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},to=e=>e.tooltip.settings.axisId;function I7(e){if(e in hc)return hc[e]();var t="scale".concat(Gc(e));if(t in hc)return hc[t]()}function RC(e){var t=e.ticks,n=e.bandwidth,a=e.range(),l=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(o){function u(){return o.apply(this,arguments)}return u.toString=function(){return o.toString()},u})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var u=l[0],d=l[1];return u<=d?o>=u&&o<=d:o>=d&&o<=u},bandwidth:n?()=>n.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,u)=>{var d=e(o);if(d!=null){if(e.bandwidth&&u!==null&&u!==void 0&&u.position){var m=e.bandwidth();switch(u.position){case"middle":d+=m/2;break;case"end":d+=m;break}}return d}}}}function IC(e,t,n){if(typeof e=="function")return RC(e.copy().domain(t).range(n));if(e!=null){var a=I7(e);if(a!=null)return a.domain(t).range(n),RC(a)}}var L7=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Ba(t)){for(var n,a,l=0;l<t.length;l++){var o=t[l];We(o)&&((n===void 0||o<n)&&(n=o),(a===void 0||o>a)&&(a=o))}return n!==void 0&&a!==void 0?[n,a]:void 0}return t}default:return t}};function LC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function $f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(n),!0).forEach(function(a){$7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $7(e,t,n){return(t=B7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B7(e){var t=U7(e,"string");return typeof t=="symbol"?t:t+""}function U7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zx=[0,"auto"],tr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},$O=(e,t)=>e.cartesianAxis.xAxis[t],Za=(e,t)=>{var n=$O(e,t);return n??tr},rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Zx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Vc},BO=(e,t)=>e.cartesianAxis.yAxis[t],Ja=(e,t)=>{var n=BO(e,t);return n??rr},F7={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Sb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??F7},Or=(e,t,n)=>{switch(t){case"xAxis":return Za(e,n);case"yAxis":return Ja(e,n);case"zAxis":return Sb(e,n);case"angleAxis":return bb(e,n);case"radiusAxis":return jb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},G7=(e,t,n)=>{switch(t){case"xAxis":return Za(e,n);case"yAxis":return Ja(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},eu=(e,t,n)=>{switch(t){case"xAxis":return Za(e,n);case"yAxis":return Ja(e,n);case"angleAxis":return bb(e,n);case"radiusAxis":return jb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},UO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function FO(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Qm=e=>e.graphicalItems.cartesianItems,H7=se([lr,Um],FO),GO=(e,t,n)=>e.filter(n).filter(a=>t?.includeHidden===!0?!0:!a.hide),tu=se([Qm,Or,H7],GO,{memoizeOptions:{resultEqualityCheck:Hm}}),HO=se([tu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Fm)),QO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Q7=se([tu],QO),VO=e=>e.map(t=>t.data).filter(Boolean).flat(1),V7=se([tu],VO,{memoizeOptions:{resultEqualityCheck:Hm}}),YO=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:l}=t;return e.length>0?e:n.slice(a,l+1)},wb=se([V7,pb],YO),KO=(e,t,n)=>t?.dataKey!=null?e.map(a=>({value:Qt(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:Qt(l,a)}))):e.map(a=>({value:a})),Vm=se([wb,Or,tu],KO);function XO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Xd(e){if(na(e)||e instanceof Date){var t=Number(e);if(We(t))return t}}function $C(e){if(Array.isArray(e)){var t=[Xd(e[0]),Xd(e[1])];return Ba(t)?t:void 0}var n=Xd(e);if(n!=null)return[n,n]}function Ua(e){return e.map(Xd).filter(Lr)}function Y7(e,t,n){return!n||typeof t!="number"||ra(t)?[]:n.length?Ua(n.flatMap(a=>{var l=Qt(e,a.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!We(o)||!We(u)))return[t-o,t+u]})):[]}var Zt=e=>{var t=or(e),n=to(e);return eu(e,t,n)},ru=se([Zt],e=>e?.dataKey),K7=se([HO,pb,Zt],LO),WO=(e,t,n,a)=>{var l={},o=t.reduce((u,d)=>{if(d.stackId==null)return u;var m=u[d.stackId];return m==null&&(m=[]),m.push(d),u[d.stackId]=m,u},l);return Object.fromEntries(Object.entries(o).map(u=>{var[d,m]=u,p=a?[...m].reverse():m,h=p.map(_b);return[d,{stackedData:_4(e,h,n),graphicalItems:p}]}))},Jx=se([K7,HO,Im,MO],WO),ZO=(e,t,n,a)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(a==null&&n!=="zAxis"){var u=E4(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},X7=se([Or],e=>e.allowDataOverflow),Cb=e=>{var t;if(e==null||!("domain"in e))return Zx;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Ua(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Zx},JO=se([Or],Cb),eD=se([JO,X7],yO),W7=se([Jx,Wa,lr,eD],ZO,{memoizeOptions:{resultEqualityCheck:Gm}}),Ab=e=>e.errorBars,Z7=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>XO(n,a)),Bf=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=n.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),d=Math.max(...o);return[u,d]}},tD=(e,t,n,a,l)=>{var o,u;if(n.length>0&&e.forEach(d=>{n.forEach(m=>{var p,h,v=(p=a[m.id])===null||p===void 0?void 0:p.filter(w=>XO(l,w)),b=Qt(d,(h=t.dataKey)!==null&&h!==void 0?h:m.dataKey),g=Y7(d,b,v);if(g.length>=2){var _=Math.min(...g),j=Math.max(...g);(o==null||_<o)&&(o=_),(u==null||j>u)&&(u=j)}var S=$C(b);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),u=u==null?S[1]:Math.max(u,S[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var m=$C(Qt(d,t.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),u=u==null?m[1]:Math.max(u,m[1]))}),We(o)&&We(u))return[o,u]},J7=se([wb,Or,Q7,Ab,lr],tD,{memoizeOptions:{resultEqualityCheck:Gm}});function eB(e){var{value:t}=e;if(na(t)||t instanceof Date)return t}var tB=(e,t,n)=>{var a=e.map(eB).filter(l=>l!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&gE(a))?Iz(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},rD=e=>e.referenceElements.dots,ro=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),rB=se([rD,lr,Um],ro),nD=e=>e.referenceElements.areas,nB=se([nD,lr,Um],ro),aD=e=>e.referenceElements.lines,aB=se([aD,lr,Um],ro),iD=(e,t)=>{if(e!=null){var n=Ua(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},iB=se(rB,lr,iD),sD=(e,t)=>{if(e!=null){var n=Ua(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},sB=se([nB,lr],sD);function lB(e){var t;if(e.x!=null)return Ua([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return n==null||n.length===0?[]:Ua(n)}function oB(e){var t;if(e.y!=null)return Ua([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return n==null||n.length===0?[]:Ua(n)}var lD=(e,t)=>{if(e!=null){var n=e.flatMap(a=>t==="xAxis"?lB(a):oB(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},cB=se([aB,lr],lD),uB=se(iB,cB,sB,(e,t,n)=>Bf(e,n,t)),oD=(e,t,n,a,l,o,u,d)=>{if(n!=null)return n;var m=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",p=m?Bf(a,o,l):Bf(o,l);return N7(t,p,e.allowDataOverflow)},dB=se([Or,JO,eD,W7,J7,uB,ot,lr],oD,{memoizeOptions:{resultEqualityCheck:Gm}}),fB=[0,1],cD=(e,t,n,a,l,o,u)=>{if(!((e==null||n==null||n.length===0)&&u===void 0)){var{dataKey:d,type:m}=e,p=Va(t,o);if(p&&d==null){var h;return Iz(0,(h=n?.length)!==null&&h!==void 0?h:0)}return m==="category"?tB(a,e,p):l==="expand"?fB:u}},Eb=se([Or,ot,wb,Vm,Im,lr,dB],cD);function mB(e){return e in hc}var uD=(e,t,n)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(Gc(a));return mB(o)?o:"point"}}},no=se([Or,UO,gb],uD);function zb(e,t,n,a){if(!(n==null||a==null))return typeof e.scale=="function"?IC(e.scale,n,a):IC(t,n,a)}var dD=(e,t,n)=>{var a=Cb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Ba(e))return A7(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ba(e))return E7(e,t.tickCount,t.allowDecimals)}},Ob=se([Eb,eu,no],dD),fD=(e,t,n,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Ba(t)&&Array.isArray(n)&&n.length>0){var l,o,u=t[0],d=(l=n[0])!==null&&l!==void 0?l:0,m=t[1],p=(o=n[n.length-1])!==null&&o!==void 0?o:0;return[Math.min(u,d),Math.max(m,p)]}return t},pB=se([Or,Eb,Ob,lr],fD),hB=se(Vm,Or,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(Ua(e.map(v=>v.value))).sort((v,b)=>v-b),l=a[0],o=a[a.length-1];if(l==null||o==null)return 1/0;var u=o-l;if(u===0)return 1/0;for(var d=0;d<a.length-1;d++){var m=a[d],p=a[d+1];if(!(m==null||p==null)){var h=p-m;n=Math.min(n,h)}}return n/u}}),mD=se(hB,ot,DO,ir,(e,t,n,a,l)=>l,(e,t,n,a,l)=>{if(!We(e))return 0;var o=t==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=In(n,e*o),d=e*o/2;return d-u-(d-u)/o*u}return 0}),vB=(e,t,n)=>{var a=Za(e,t);return a==null||typeof a.padding!="string"?0:mD(e,"xAxis",t,n,a.padding)},gB=(e,t,n)=>{var a=Ja(e,t);return a==null||typeof a.padding!="string"?0:mD(e,"yAxis",t,n,a.padding)},xB=se(Za,vB,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((n=l.left)!==null&&n!==void 0?n:0)+t,right:((a=l.right)!==null&&a!==void 0?a:0)+t}}),yB=se(Ja,gB,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((n=l.top)!==null&&n!==void 0?n:0)+t,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+t}}),bB=se([ir,xB,Sm,_m,(e,t,n)=>n],(e,t,n,a,l)=>{var{padding:o}=a;return l?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),jB=se([ir,ot,yB,Sm,_m,(e,t,n)=>n],(e,t,n,a,l,o)=>{var{padding:u}=l;return o?[a.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),nu=(e,t,n,a)=>{var l;switch(t){case"xAxis":return bB(e,n,a);case"yAxis":return jB(e,n,a);case"zAxis":return(l=Sb(e,n))===null||l===void 0?void 0:l.range;case"angleAxis":return qO(e);case"radiusAxis":return RO(e,n);default:return}},pD=se([Or,nu],Lm),NB=se([no,pB],L7),Ym=se([Or,no,NB,pD],zb);se([tu,Ab,lr],Z7);function hD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Km=(e,t)=>t,Xm=(e,t,n)=>n,_B=se(jm,Km,Xm,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(hD)),SB=se(Nm,Km,Xm,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(hD)),vD=(e,t)=>({width:e.width,height:t.height}),wB=(e,t)=>{var n=typeof t.width=="number"?t.width:Vc;return{width:n,height:e.height}},gD=se(ir,Za,vD),CB=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},AB=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},EB=se(Ka,ir,_B,Km,Xm,(e,t,n,a,l)=>{var o={},u;return n.forEach(d=>{var m=vD(t,d);u==null&&(u=CB(t,a,e));var p=a==="top"&&!l||a==="bottom"&&l;o[d.id]=u-Number(p)*m.height,u+=(p?-1:1)*m.height}),o}),zB=se(Ya,ir,SB,Km,Xm,(e,t,n,a,l)=>{var o={},u;return n.forEach(d=>{var m=wB(t,d);u==null&&(u=AB(t,a,e));var p=a==="left"&&!l||a==="right"&&l;o[d.id]=u-Number(p)*m.width,u+=(p?-1:1)*m.width}),o}),OB=(e,t)=>{var n=Za(e,t);if(n!=null)return EB(e,n.orientation,n.mirror)},DB=se([ir,Za,OB,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),MB=(e,t)=>{var n=Ja(e,t);if(n!=null)return zB(e,n.orientation,n.mirror)},TB=se([ir,Ja,MB,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),xD=se(ir,Ja,(e,t)=>{var n=typeof t.width=="number"?t.width:Vc;return{width:n,height:e.height}}),BC=(e,t,n)=>{switch(t){case"xAxis":return gD(e,n).width;case"yAxis":return xD(e,n).height;default:return}},yD=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=n,d=Va(e,a),m=t.map(p=>p.value);if(u&&d&&o==="category"&&l&&gE(m))return m}},Db=se([ot,Vm,Or,lr],yD),bD=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:o}=n,u=Va(e,a);if(u&&(l==="number"||o!=="auto"))return t.map(d=>d.value)}},Mb=se([ot,Vm,eu,lr],bD),UC=se([ot,G7,no,Ym,Db,Mb,nu,Ob,lr],(e,t,n,a,l,o,u,d,m)=>{if(t!=null){var p=Va(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:o,duplicateDomain:l,isCategorical:p,niceTicks:d,range:u,realScaleType:n,scale:a}}}),kB=(e,t,n,a,l,o,u,d,m)=>{if(!(t==null||a==null)){var p=Va(e,m),{type:h,ticks:v,tickCount:b}=t,g=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,_=h==="category"&&a.bandwidth?a.bandwidth()/g:0;_=m==="angleAxis"&&o!=null&&o.length>=2?Ir(o[0]-o[1])*2*_:_;var j=v||l;return j?j.map((S,w)=>{var E=u?u.indexOf(S):S,C=a.map(E);return We(C)?{index:w,coordinate:C+_,value:S,offset:_}:null}).filter(Lr):p&&d?d.map((S,w)=>{var E=a.map(S);return We(E)?{coordinate:E+_,value:S,index:w,offset:_}:null}).filter(Lr):a.ticks?a.ticks(b).map((S,w)=>{var E=a.map(S);return We(E)?{coordinate:E+_,value:S,index:w,offset:_}:null}).filter(Lr):a.domain().map((S,w)=>{var E=a.map(S);return We(E)?{coordinate:E+_,value:u?u[S]:S,index:w,offset:_}:null}).filter(Lr)}},jD=se([ot,eu,no,Ym,Ob,nu,Db,Mb,lr],kB),PB=(e,t,n,a,l,o,u)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var d=Va(e,u),{tickCount:m}=t,p=0;return p=u==="angleAxis"&&a?.length>=2?Ir(a[0]-a[1])*2*p:p,d&&o?o.map((h,v)=>{var b=n.map(h);return We(b)?{coordinate:b+p,value:h,index:v,offset:p}:null}).filter(Lr):n.ticks?n.ticks(m).map((h,v)=>{var b=n.map(h);return We(b)?{coordinate:b+p,value:h,index:v,offset:p}:null}).filter(Lr):n.domain().map((h,v)=>{var b=n.map(h);return We(b)?{coordinate:b+p,value:l?l[h]:h,index:v,offset:p}:null}).filter(Lr)}},$i=se([ot,eu,Ym,nu,Db,Mb,lr],PB),Bi=se(Or,Ym,(e,t)=>{if(!(e==null||t==null))return $f($f({},e),{},{scale:t})}),qB=se([Or,no,Eb,pD],zb);se((e,t,n)=>Sb(e,n),qB,(e,t)=>{if(!(e==null||t==null))return $f($f({},e),{},{scale:t})});var RB=se([ot,jm,Nm],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ND=e=>e.options.defaultTooltipEventType,_D=e=>e.options.validateTooltipEventTypes;function SD(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function Tb(e,t){var n=ND(e),a=_D(e);return SD(t,n,a)}function IB(e){return ze(t=>Tb(t,e))}var wD=(e,t)=>{var n,a=Number(t);if(!(ra(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},LB=e=>e.tooltip.settings,Di={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},$B={itemInteraction:{click:Di,hover:Di},axisInteraction:{click:Di,hover:Di},keyboardInteraction:Di,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},CD=Fr({name:"tooltip",initialState:$B,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ct()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,l=qn(e).tooltipItemPayloads.indexOf(n);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:Ct()},removeTooltipEntrySettings:{reducer(e,t){var n=qn(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Ct()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:BB,replaceTooltipEntrySettings:UB,removeTooltipEntrySettings:FB,setTooltipSettingsState:GB,setActiveMouseOverItemIndex:AD,mouseLeaveItem:HB,mouseLeaveChart:ED,setActiveClickItemIndex:QB,setMouseOverAxisIndex:zD,setMouseClickAxisIndex:VB,setSyncInteraction:ey,setKeyboardInteraction:ty}=CD.actions,YB=CD.reducer;function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(n),!0).forEach(function(a){KB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function KB(e,t,n){return(t=XB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XB(e){var t=WB(e,"string");return typeof t=="symbol"?t:t+""}function WB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZB(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function JB(e){return e.index!=null}var OD=(e,t,n,a)=>{if(t==null)return Di;var l=ZB(e,t,n);if(l==null)return Di;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(JB(l)){if(o)return Rd(Rd({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Rd(Rd({},Di),{},{coordinate:l.coordinate})};function e9(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function t9(e,t){var n=e9(e),a=t[0],l=t[1];if(n===void 0)return!1;var o=Math.min(a,l),u=Math.max(a,l);return n>=o&&n<=u}function r9(e,t,n){if(n==null||t==null)return!0;var a=Qt(e,t);return a==null||!Ba(n)?!0:t9(a,n)}var kb=(e,t,n,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!We(o))return l;var u=0,d=1/0;t.length>0&&(d=t.length-1);var m=Math.max(u,Math.min(o,d)),p=t[m];return p==null||r9(p,n,a)?String(m):null},DD=(e,t,n,a,l,o,u)=>{if(o!=null){var d=u[0],m=d?.getPosition(o);if(m!=null)return m;var p=l?.[Number(o)];if(p)return n==="horizontal"?{x:p.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:p.coordinate}}},MD=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(n==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(u=>{var d;return((d=u.settings)===null||d===void 0?void 0:d.graphicalItemId)===l})},TD=e=>e.options.tooltipPayloadSearcher,ao=e=>e.tooltip;function GC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function HC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(n),!0).forEach(function(a){n9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function n9(e,t,n){return(t=a9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a9(e){var t=i9(e,"string");return typeof t=="symbol"?t:t+""}function i9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s9(e,t){return e??t}var kD=(e,t,n,a,l,o,u)=>{if(!(t==null||o==null)){var{chartData:d,computedData:m,dataStartIndex:p,dataEndIndex:h}=n,v=[];return e.reduce((b,g)=>{var _,{dataDefinedOnItem:j,settings:S}=g,w=s9(j,d),E=Array.isArray(w)?cz(w,p,h):w,C=(_=S?.dataKey)!==null&&_!==void 0?_:a,A=S?.nameKey,O;if(a&&Array.isArray(E)&&!Array.isArray(E[0])&&u==="axis"?O=xE(E,a,l):O=o(E,t,m,A),Array.isArray(O))O.forEach(P=>{var R=HC(HC({},S),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});b.push(GS({tooltipEntrySettings:R,dataKey:P.dataKey,payload:P.payload,value:Qt(P.payload,P.dataKey),name:P.name}))});else{var T;b.push(GS({tooltipEntrySettings:S,dataKey:C,payload:O,value:Qt(O,C),name:(T=Qt(O,A))!==null&&T!==void 0?T:S?.name}))}return b},v)}},Pb=se([Zt,UO,gb],uD),l9=se([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),o9=se([or,to],FO),io=se([l9,Zt,o9],GO,{memoizeOptions:{resultEqualityCheck:Hm}}),c9=se([io],e=>e.filter(Fm)),u9=se([io],VO,{memoizeOptions:{resultEqualityCheck:Hm}}),so=se([u9,Wa],YO),d9=se([c9,Wa,Zt],LO),qb=se([so,Zt,io],KO),PD=se([Zt],Cb),f9=se([Zt],e=>e.allowDataOverflow),qD=se([PD,f9],yO),m9=se([io],e=>e.filter(Fm)),p9=se([d9,m9,Im,MO],WO),h9=se([p9,Wa,or,qD],ZO),v9=se([io],QO),g9=se([so,Zt,v9,Ab,or],tD,{memoizeOptions:{resultEqualityCheck:Gm}}),x9=se([rD,or,to],ro),y9=se([x9,or],iD),b9=se([nD,or,to],ro),j9=se([b9,or],sD),N9=se([aD,or,to],ro),_9=se([N9,or],lD),S9=se([y9,_9,j9],Bf),w9=se([Zt,PD,qD,h9,g9,S9,ot,or],oD),au=se([Zt,ot,so,qb,Im,or,w9],cD),C9=se([au,Zt,Pb],dD),A9=se([Zt,au,C9,or],fD),RD=e=>{var t=or(e),n=to(e),a=!1;return nu(e,t,n,a)},ID=se([Zt,RD],Lm),LD=se([Zt,Pb,A9,ID],zb),E9=se([ot,qb,Zt,or],yD),z9=se([ot,qb,Zt,or],bD),O9=(e,t,n,a,l,o,u,d)=>{if(t){var{type:m}=t,p=Va(e,d);if(a){var h=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,v=m==="category"&&a.bandwidth?a.bandwidth()/h:0;return v=d==="angleAxis"&&l!=null&&l?.length>=2?Ir(l[0]-l[1])*2*v:v,p&&u?u.map((b,g)=>{var _=a.map(b);return We(_)?{coordinate:_+v,value:b,index:g,offset:v}:null}).filter(Lr):a.domain().map((b,g)=>{var _=a.map(b);return We(_)?{coordinate:_+v,value:o?o[b]:b,index:g,offset:v}:null}).filter(Lr)}}},ei=se([ot,Zt,Pb,LD,RD,E9,z9,or],O9),Rb=se([ND,_D,LB],(e,t,n)=>SD(n.shared,e,t)),$D=e=>e.tooltip.settings.trigger,Ib=e=>e.tooltip.settings.defaultIndex,iu=se([ao,Rb,$D,Ib],OD),Ms=se([iu,so,ru,au],kb),BD=se([ei,Ms],wD),UD=se([iu],e=>{if(e)return e.dataKey});se([iu],e=>{if(e)return e.graphicalItemId});var FD=se([ao,Rb,$D,Ib],MD),D9=se([Ya,Ka,ot,ir,ei,Ib,FD],DD),M9=se([iu,D9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),T9=se([iu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),k9=se([FD,Ms,Wa,ru,BD,TD,Rb],kD),P9=se([k9],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function QC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function VC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(n),!0).forEach(function(a){q9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function q9(e,t,n){return(t=R9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e){var t=I9(e,"string");return typeof t=="symbol"?t:t+""}function I9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L9=()=>ze(Zt),$9=()=>{var e=L9(),t=ze(ei),n=ze(LD);return Vl(!e||!n?void 0:VC(VC({},e),{},{scale:n}),t)};function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(n),!0).forEach(function(a){B9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function B9(e,t,n){return(t=U9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U9(e){var t=F9(e,"string");return typeof t=="symbol"?t:t+""}function F9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G9=(e,t,n,a)=>{var l=t.find(o=>o&&o.index===n);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},H9=(e,t,n,a)=>{var l=t.find(p=>p&&p.index===n);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=a;return Tl(Tl(Tl({},a),vr(a.cx,a.cy,u,o)),{},{angle:o,radius:u})}var d=l.coordinate,{angle:m}=a;return Tl(Tl(Tl({},a),vr(a.cx,a.cy,d,m)),{},{angle:m,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Q9(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var GD=(e,t,n,a,l)=>{var o,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var d=0;d<u;d++){var m,p,h,v,b,g=d>0?(m=n[d-1])===null||m===void 0?void 0:m.coordinate:(p=n[u-1])===null||p===void 0?void 0:p.coordinate,_=(h=n[d])===null||h===void 0?void 0:h.coordinate,j=d>=u-1?(v=n[0])===null||v===void 0?void 0:v.coordinate:(b=n[d+1])===null||b===void 0?void 0:b.coordinate,S=void 0;if(!(g==null||_==null||j==null))if(Ir(_-g)!==Ir(j-_)){var w=[];if(Ir(j-_)===Ir(l[1]-l[0])){S=j;var E=_+l[1]-l[0];w[0]=Math.min(E,(E+g)/2),w[1]=Math.max(E,(E+g)/2)}else{S=g;var C=j+l[1]-l[0];w[0]=Math.min(_,(C+_)/2),w[1]=Math.max(_,(C+_)/2)}var A=[Math.min(_,(S+_)/2),Math.max(_,(S+_)/2)];if(e>A[0]&&e<=A[1]||e>=w[0]&&e<=w[1]){var O;return(O=n[d])===null||O===void 0?void 0:O.index}}else{var T=Math.min(g,j),P=Math.max(g,j);if(e>(T+_)/2&&e<=(P+_)/2){var R;return(R=n[d])===null||R===void 0?void 0:R.index}}}else if(t)for(var I=0;I<u;I++){var L=t[I];if(L!=null){var K=t[I+1],U=t[I-1];if(I===0&&K!=null&&e<=(L.coordinate+K.coordinate)/2||I===u-1&&U!=null&&e>(L.coordinate+U.coordinate)/2||I>0&&I<u-1&&U!=null&&K!=null&&e>(L.coordinate+U.coordinate)/2&&e<=(L.coordinate+K.coordinate)/2)return L.index}}return-1},V9=()=>ze(gb),Lb=(e,t)=>t,HD=(e,t,n)=>n,$b=(e,t,n,a)=>a,Y9=se(ei,e=>um(e,t=>t.coordinate)),Bb=se([ao,Lb,HD,$b],OD),Ub=se([Bb,so,ru,au],kb),K9=(e,t,n)=>{if(t!=null){var a=ao(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},QD=se([ao,Lb,HD,$b],MD),Uf=se([Ya,Ka,ot,ir,ei,$b,QD],DD),X9=se([Bb,Uf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),VD=se([ei,Ub],wD),W9=se([QD,Ub,Wa,ru,VD,TD,Lb],kD),Z9=se([Bb,Ub],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),J9=(e,t,n,a,l,o,u)=>{if(!(!e||!n||!a||!l)&&Q9(e,u)){var d=z4(e,t),m=GD(d,o,l,n,a),p=G9(t,l,m,e);return{activeIndex:String(m),activeCoordinate:p}}},eU=(e,t,n,a,l,o,u)=>{if(!(!e||!a||!l||!o||!n)){var d=RL(e,n);if(d){var m=O4(d,t),p=GD(m,u,o,a,l),h=H9(t,o,p,d);return{activeIndex:String(p),activeCoordinate:h}}}},tU=(e,t,n,a,l,o,u,d)=>{if(!(!e||!t||!a||!l||!o))return t==="horizontal"||t==="vertical"?J9(e,t,a,l,o,u,d):eU(e,t,n,a,l,o,u)},rU=se(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var a=e[t];if(a!=null)return n?a.panoramaElement:a.element}}),nU=se(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(ar)),n=Array.from(new Set(t));return n.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:R7}});function KC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function XC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(n),!0).forEach(function(a){aU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aU(e,t,n){return(t=iU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iU(e){var t=sU(e,"string");return typeof t=="symbol"?t:t+""}function sU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lU={},oU={zIndexMap:Object.values(ar).reduce((e,t)=>XC(XC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),lU)},cU=new Set(Object.values(ar));function uU(e){return cU.has(e)}var YD=Fr({name:"zIndex",initialState:oU,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ct()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!uU(n)&&delete e.zIndexMap[n])},prepare:Ct()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:a,isPanorama:l}=t.payload;e.zIndexMap[n]?l?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:l?void 0:a,panoramaElement:l?a:void 0}},prepare:Ct()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:Ct()}}}),{registerZIndexPortal:dU,unregisterZIndexPortal:fU,registerZIndexPortalElement:mU,unregisterZIndexPortalElement:pU}=YD.actions,hU=YD.reducer;function En(e){var{zIndex:t,children:n}=e,a=oI(),l=a&&t!==void 0&&t!==0,o=Nr(),u=$t();y.useLayoutEffect(()=>l?(u(dU({zIndex:t})),()=>{u(fU({zIndex:t}))}):Ps,[u,t,l]);var d=ze(m=>rU(m,t,o));return l?d?O2.createPortal(n,d):null:n}function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ry.apply(null,arguments)}function WC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Id(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WC(Object(n),!0).forEach(function(a){vU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vU(e,t,n){return(t=gU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gU(e){var t=xU(e,"string");return typeof t=="symbol"?t:t+""}function xU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yU(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return y.isValidElement(t)?y.cloneElement(t,a):y.createElement(n,a)}function bU(e){var t,{coordinate:n,payload:a,index:l,offset:o,tooltipAxisBandSize:u,layout:d,cursor:m,tooltipEventType:p,chartName:h}=e,v=n,b=a,g=l;if(!m||!v||h!=="ScatterChart"&&p!=="axis")return null;var _,j,S;if(h==="ScatterChart")_=v,j=XI,S=ar.cursorLine;else if(h==="BarChart")_=WI(d,v,o,u),j=kz,S=ar.cursorRectangle;else if(d==="radial"&&jE(v)){var{cx:w,cy:E,radius:C,startAngle:A,endAngle:O}=Pz(v);_={cx:w,cy:E,startAngle:A,endAngle:O,innerRadius:C,outerRadius:C},j=Rz,S=ar.cursorLine}else _={points:BL(d,v,o)},j=zz,S=ar.cursorLine;var T=typeof m=="object"&&"className"in m?m.className:void 0,P=Id(Id(Id(Id({stroke:"#ccc",pointerEvents:"none"},o),_),Fc(m)),{},{payload:b,payloadIndex:g,className:pt("recharts-tooltip-cursor",T)});return y.createElement(En,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(yU,{cursor:m,cursorComp:j,cursorProps:P}))}function jU(e){var t=$9(),n=vz(),a=qs(),l=V9();return t==null||n==null||a==null||l==null?null:y.createElement(bU,ry({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:l}))}var KD=y.createContext(null),NU=()=>y.useContext(KD),Vg={exports:{}},ZC;function _U(){return ZC||(ZC=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function l(m,p,h){this.fn=m,this.context=p,this.once=h||!1}function o(m,p,h,v,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new l(h,v||m,b),_=n?n+p:p;return m._events[_]?m._events[_].fn?m._events[_]=[m._events[_],g]:m._events[_].push(g):(m._events[_]=g,m._eventsCount++),m}function u(m,p){--m._eventsCount===0?m._events=new a:delete m._events[p]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],h,v;if(this._eventsCount===0)return p;for(v in h=this._events)t.call(h,v)&&p.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},d.prototype.listeners=function(p){var h=n?n+p:p,v=this._events[h];if(!v)return[];if(v.fn)return[v.fn];for(var b=0,g=v.length,_=new Array(g);b<g;b++)_[b]=v[b].fn;return _},d.prototype.listenerCount=function(p){var h=n?n+p:p,v=this._events[h];return v?v.fn?1:v.length:0},d.prototype.emit=function(p,h,v,b,g,_){var j=n?n+p:p;if(!this._events[j])return!1;var S=this._events[j],w=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(p,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,v),!0;case 4:return S.fn.call(S.context,h,v,b),!0;case 5:return S.fn.call(S.context,h,v,b,g),!0;case 6:return S.fn.call(S.context,h,v,b,g,_),!0}for(C=1,E=new Array(w-1);C<w;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var A=S.length,O;for(C=0;C<A;C++)switch(S[C].once&&this.removeListener(p,S[C].fn,void 0,!0),w){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,h);break;case 3:S[C].fn.call(S[C].context,h,v);break;case 4:S[C].fn.call(S[C].context,h,v,b);break;default:if(!E)for(O=1,E=new Array(w-1);O<w;O++)E[O-1]=arguments[O];S[C].fn.apply(S[C].context,E)}}return!0},d.prototype.on=function(p,h,v){return o(this,p,h,v,!1)},d.prototype.once=function(p,h,v){return o(this,p,h,v,!0)},d.prototype.removeListener=function(p,h,v,b){var g=n?n+p:p;if(!this._events[g])return this;if(!h)return u(this,g),this;var _=this._events[g];if(_.fn)_.fn===h&&(!b||_.once)&&(!v||_.context===v)&&u(this,g);else{for(var j=0,S=[],w=_.length;j<w;j++)(_[j].fn!==h||b&&!_[j].once||v&&_[j].context!==v)&&S.push(_[j]);S.length?this._events[g]=S.length===1?S[0]:S:u(this,g)}return this},d.prototype.removeAllListeners=function(p){var h;return p?(h=n?n+p:p,this._events[h]&&u(this,h)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(Vg)),Vg.exports}var SU=_U();const wU=Ga(SU);var Ic=new wU,ny="recharts.syncEvent.tooltip",JC="recharts.syncEvent.brush",XD=(e,t)=>{if(t&&Array.isArray(e)){var n=Number.parseInt(t,10);if(!ra(n))return e[n]}},CU={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},WD=Fr({name:"options",initialState:CU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),AU=WD.reducer,{createEventEmitter:EU}=WD.actions;function zU(e){return e.tooltip.syncInteraction}var OU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ZD=Fr({name:"chartData",initialState:OU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:eA,setDataStartEndIndexes:DU,setComputedData:YZ}=ZD.actions,MU=ZD.reducer,TU=["x","y"];function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function kl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(n),!0).forEach(function(a){kU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kU(e,t,n){return(t=PU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PU(e){var t=qU(e,"string");return typeof t=="symbol"?t:t+""}function qU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RU(e,t){if(e==null)return{};var n,a,l=IU(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function IU(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function LU(){var e=ze(xb),t=ze(yb),n=$t(),a=ze(TO),l=ze(ei),o=qs(),u=wm(),d=ze(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Ps;var m=(p,h,v)=>{if(t!==v&&e===p){if(a==="index"){var b;if(u&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var g=h.payload.coordinate,{x:_,y:j}=g,S=RU(g,TU),{x:w,y:E,width:C,height:A}=h.payload.sourceViewBox,O=kl(kl({},S),{},{x:u.x+(C?(_-w)/C:0)*u.width,y:u.y+(A?(j-E)/A:0)*u.height});n(kl(kl({},h),{},{payload:kl(kl({},h.payload),{},{coordinate:O})}))}else n(h);return}if(l!=null){var T;if(typeof a=="function"){var P={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},R=a(l,P);T=l[R]}else a==="value"&&(T=l.find(k=>String(k.value)===h.payload.label));var{coordinate:I}=h.payload;if(T==null||h.payload.active===!1||I==null||u==null){n(ey({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:K}=I,U=Math.min(L,u.x+u.width),G=Math.min(K,u.y+u.height),V={x:o==="horizontal"?T.coordinate:U,y:o==="horizontal"?G:T.coordinate},M=ey({active:h.payload.active,coordinate:V,dataKey:h.payload.dataKey,index:String(T.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(M)}}};return Ic.on(ny,m),()=>{Ic.off(ny,m)}},[d,n,t,e,a,l,o,u])}function $U(){var e=ze(xb),t=ze(yb),n=$t();y.useEffect(()=>{if(e==null)return Ps;var a=(l,o,u)=>{t!==u&&e===l&&n(DU(o))};return Ic.on(JC,a),()=>{Ic.off(JC,a)}},[n,t,e])}function BU(){var e=$t();y.useEffect(()=>{e(EU())},[e]),LU(),$U()}function UU(e,t,n,a,l,o){var u=ze(g=>K9(g,e,t)),d=ze(yb),m=ze(xb),p=ze(TO),h=ze(zU),v=h?.active,b=wm();y.useEffect(()=>{if(!v&&m!=null&&d!=null){var g=ey({active:o,coordinate:n,dataKey:u,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:b,graphicalItemId:void 0});Ic.emit(ny,m,g,d)}},[v,n,u,l,a,d,m,p,o,b])}function rA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function nA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(n),!0).forEach(function(a){FU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FU(e,t,n){return(t=GU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GU(e){var t=HU(e,"string");return typeof t=="symbol"?t:t+""}function HU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QU(e){return e.dataKey}function VU(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(zI,t)}var aA=[],YU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function iA(e){var t,n,a=zr(e,YU),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:m,filterNull:p,isAnimationActive:h,offset:v,payloadUniqBy:b,position:g,reverseDirection:_,useTranslate3d:j,wrapperStyle:S,cursor:w,shared:E,trigger:C,defaultIndex:A,portal:O,axisId:T}=a,P=$t(),R=typeof A=="number"?String(A):A;y.useEffect(()=>{P(GB({shared:E,trigger:C,axisId:T,active:l,defaultIndex:R}))},[P,E,C,T,l,R]);var I=wm(),L=Ez(),K=IB(E),{activeIndex:U,isActive:G}=(t=ze(pe=>Z9(pe,K,C,R)))!==null&&t!==void 0?t:{},V=ze(pe=>W9(pe,K,C,R)),M=ze(pe=>VD(pe,K,C,R)),k=ze(pe=>X9(pe,K,C,R)),J=V,Q=NU(),B=(n=l??G)!==null&&n!==void 0?n:!1,[q,fe]=p6([J,B]),te=K==="axis"?M:void 0;UU(K,C,k,te,U,B);var ue=O??Q;if(ue==null||I==null||K==null)return null;var he=J??aA;B||(he=aA),p&&he.length&&(he=$5(he.filter(pe=>pe.value!=null&&(pe.hide!==!0||a.includeHidden)),b,QU));var xe=he.length>0,H=y.createElement(qI,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:h,active:B,coordinate:k,hasPayload:xe,offset:v,position:g,reverseDirection:_,useTranslate3d:j,viewBox:I,wrapperStyle:S,lastBoundingBox:q,innerRef:fe,hasPortalFromProps:!!O},VU(m,nA(nA({},a),{},{payload:he,label:te,active:B,activeIndex:U,coordinate:k,accessibilityLayer:L})));return y.createElement(y.Fragment,null,O2.createPortal(H,ue),B&&y.createElement(jU,{cursor:w,tooltipEventType:K,coordinate:k,payload:he,index:U}))}var Fb=e=>null;Fb.displayName="Cell";function KU(e,t,n){return(t=XU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XU(e){var t=WU(e,"string");return typeof t=="symbol"?t:t+""}function WU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ZU{constructor(t){KU(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function JU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(n),!0).forEach(function(a){eF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eF(e,t,n){return(t=tF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tF(e){var t=rF(e,"string");return typeof t=="symbol"?t:t+""}function rF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nF={cacheSize:2e3,enableCache:!0},JD=JU({},nF),lA=new ZU(JD.cacheSize),aF={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oA="recharts_measurement_span";function iF(e,t){var n=t.fontSize||"",a=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",u=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(d)}var cA=(e,t)=>{try{var n=document.getElementById(oA);n||(n=document.createElement("span"),n.setAttribute("id",oA),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,aF,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},bc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zm.isSsr)return{width:0,height:0};if(!JD.enableCache)return cA(t,n);var a=iF(t,n),l=lA.get(a);if(l)return l;var o=cA(t,n);return lA.set(a,o),o},eM;function sF(e,t,n){return(t=lF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lF(e){var t=oF(e,"string");return typeof t=="symbol"?t:t+""}function oF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},fF=["cm","mm","pt","pc","in","Q","px"];function mF(e){return fF.includes(e)}var Ll="NaN";function pF(e,t){return e*dF[t]}class hr{static parse(t){var n,[,a,l]=(n=uF.exec(t))!==null&&n!==void 0?n:[];return a==null?hr.NaN:new hr(parseFloat(a),l??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,ra(t)&&(this.unit=""),n!==""&&!cF.test(n)&&(this.num=NaN,this.unit=""),mF(n)&&(this.num=pF(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ra(this.num)}}eM=hr;sF(hr,"NaN",new eM(NaN,""));function tM(e){if(e==null||e.includes(Ll))return Ll;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,l,o]=(n=uA.exec(t))!==null&&n!==void 0?n:[],u=hr.parse(a??""),d=hr.parse(o??""),m=l==="*"?u.multiply(d):u.divide(d);if(m.isNaN())return Ll;t=t.replace(uA,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,h,v,b]=(p=dA.exec(t))!==null&&p!==void 0?p:[],g=hr.parse(h??""),_=hr.parse(b??""),j=v==="+"?g.add(_):g.subtract(_);if(j.isNaN())return Ll;t=t.replace(dA,j.toString())}return t}var fA=/\(([^()]*)\)/;function hF(e){for(var t=e,n;(n=fA.exec(t))!=null;){var[,a]=n;t=t.replace(fA,tM(a))}return t}function vF(e){var t=e.replace(/\s+/g,"");return t=hF(t),t=tM(t),t}function gF(e){try{return vF(e)}catch{return Ll}}function Yg(e){var t=gF(e.slice(5,-1));return t===Ll?"":t}var xF=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],yF=["dx","dy","angle","className","breakAll"];function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ay.apply(null,arguments)}function mA(e,t){if(e==null)return{};var n,a,l=bF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function bF(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var rM=/[ \f\n\r\t\v\u2028\u2029]+/,nM=e=>{var{children:t,breakAll:n,style:a}=e;try{var l=[];zt(t)||(n?l=t.toString().split(""):l=t.toString().split(rM));var o=l.map(d=>({word:d,width:bc(d,a).width})),u=n?0:bc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function jF(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var aM=(e,t,n,a)=>e.reduce((l,o)=>{var{word:u,width:d}=o,m=l[l.length-1];if(m&&d!=null&&(t==null||a||m.width+d+n<Number(t)))m.words.push(u),m.width+=d+n;else{var p={words:[u],width:d};l.push(p)}return l},[]),iM=e=>e.reduce((t,n)=>t.width>n.width?t:n),NF="",pA=(e,t,n,a,l,o,u,d)=>{var m=e.slice(0,t),p=nM({breakAll:n,style:a,children:m+NF});if(!p)return[!1,[]];var h=aM(p.wordsWithComputedWidth,o,u,d),v=h.length>l||iM(h).width>Number(o);return[v,h]},_F=(e,t,n,a,l)=>{var{maxLines:o,children:u,style:d,breakAll:m}=e,p=Se(o),h=String(u),v=aM(t,a,n,l);if(!p||l)return v;var b=v.length>o||iM(v).width>Number(a);if(!b)return v;for(var g=0,_=h.length-1,j=0,S;g<=_&&j<=h.length-1;){var w=Math.floor((g+_)/2),E=w-1,[C,A]=pA(h,E,m,d,o,a,n,l),[O]=pA(h,w,m,d,o,a,n,l);if(!C&&!O&&(g=w+1),C&&O&&(_=w-1),!C&&O){S=A;break}j++}return S||v},hA=e=>{var t=zt(e)?[]:e.toString().split(rM);return[{words:t,width:void 0}]},SF=e=>{var{width:t,scaleToFit:n,children:a,style:l,breakAll:o,maxLines:u}=e;if((t||n)&&!zm.isSsr){var d,m,p=nM({breakAll:o,children:a,style:l});if(p){var{wordsWithComputedWidth:h,spaceWidth:v}=p;d=h,m=v}else return hA(a);return _F({breakAll:o,children:a,maxLines:u,style:l},d,m,t,!!n)}return hA(a)},sM="#808080",wF={angle:0,breakAll:!1,capHeight:"0.71em",fill:sM,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Gb=y.forwardRef((e,t)=>{var n=zr(e,wF),{x:a,y:l,lineHeight:o,capHeight:u,fill:d,scaleToFit:m,textAnchor:p,verticalAnchor:h}=n,v=mA(n,xF),b=y.useMemo(()=>SF({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:g,dy:_,angle:j,className:S,breakAll:w}=v,E=mA(v,yF);if(!na(a)||!na(l)||b.length===0)return null;var C=Number(a)+(Se(g)?g:0),A=Number(l)+(Se(_)?_:0);if(!We(C)||!We(A))return null;var O;switch(h){case"start":O=Yg("calc(".concat(u,")"));break;case"middle":O=Yg("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:O=Yg("calc(".concat(b.length-1," * -").concat(o,")"));break}var T=[],P=b[0];if(m&&P!=null){var R=P.width,{width:I}=v;T.push("scale(".concat(Se(I)&&Se(R)?I/R:1,")"))}return j&&T.push("rotate(".concat(j,", ").concat(C,", ").concat(A,")")),T.length&&(E.transform=T.join(" ")),y.createElement("text",ay({},Ar(E),{ref:t,x:C,y:A,className:pt("recharts-text",S),textAnchor:p,fill:d.includes("url")?sM:d}),b.map((L,K)=>{var U=L.words.join(w?"":" ");return y.createElement("tspan",{x:C,dy:K===0?O:o,key:"".concat(U,"-").concat(K)},U)}))});Gb.displayName="Text";function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(a){CF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function CF(e,t,n){return(t=AF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AF(e){var t=EF(e,"string");return typeof t=="symbol"?t:t+""}function EF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zF=e=>{var{viewBox:t,position:n,offset:a=0,parentViewBox:l}=e,{x:o,y:u,height:d,upperWidth:m,lowerWidth:p}=Uy(t),h=o,v=o+(m-p)/2,b=(h+v)/2,g=(m+p)/2,_=h+m/2,j=d>=0?1:-1,S=j*a,w=j>0?"end":"start",E=j>0?"start":"end",C=m>=0?1:-1,A=C*a,O=C>0?"end":"start",T=C>0?"start":"end",P=l;if(n==="top"){var R={x:h+m/2,y:u-S,horizontalAnchor:"middle",verticalAnchor:w};return P&&(R.height=Math.max(u-P.y,0),R.width=m),R}if(n==="bottom"){var I={x:v+p/2,y:u+d+S,horizontalAnchor:"middle",verticalAnchor:E};return P&&(I.height=Math.max(P.y+P.height-(u+d),0),I.width=p),I}if(n==="left"){var L={x:b-A,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"};return P&&(L.width=Math.max(L.x-P.x,0),L.height=d),L}if(n==="right"){var K={x:b+g+A,y:u+d/2,horizontalAnchor:T,verticalAnchor:"middle"};return P&&(K.width=Math.max(P.x+P.width-K.x,0),K.height=d),K}var U=P?{width:g,height:d}:{};return n==="insideLeft"?Wn({x:b+A,y:u+d/2,horizontalAnchor:T,verticalAnchor:"middle"},U):n==="insideRight"?Wn({x:b+g-A,y:u+d/2,horizontalAnchor:O,verticalAnchor:"middle"},U):n==="insideTop"?Wn({x:h+m/2,y:u+S,horizontalAnchor:"middle",verticalAnchor:E},U):n==="insideBottom"?Wn({x:v+p/2,y:u+d-S,horizontalAnchor:"middle",verticalAnchor:w},U):n==="insideTopLeft"?Wn({x:h+A,y:u+S,horizontalAnchor:T,verticalAnchor:E},U):n==="insideTopRight"?Wn({x:h+m-A,y:u+S,horizontalAnchor:O,verticalAnchor:E},U):n==="insideBottomLeft"?Wn({x:v+A,y:u+d-S,horizontalAnchor:T,verticalAnchor:w},U):n==="insideBottomRight"?Wn({x:v+p-A,y:u+d-S,horizontalAnchor:O,verticalAnchor:w},U):n&&typeof n=="object"&&(Se(n.x)||As(n.x))&&(Se(n.y)||As(n.y))?Wn({x:o+In(n.x,g),y:u+In(n.y,d),horizontalAnchor:"end",verticalAnchor:"end"},U):Wn({x:_,y:u+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},U)},OF=["labelRef"],DF=["content"];function gA(e,t){if(e==null)return{};var n,a,l=MF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function MF(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function vc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(a){TF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TF(e,t,n){return(t=kF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kF(e){var t=PF(e,"string");return typeof t=="symbol"?t:t+""}function PF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},za.apply(null,arguments)}var lM=y.createContext(null),qF=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:u,children:d}=e,m=y.useMemo(()=>({x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:u}),[t,n,a,l,o,u]);return y.createElement(lM.Provider,{value:m},d)},oM=()=>{var e=y.useContext(lM),t=wm();return e||(t?Uy(t):void 0)},RF=y.createContext(null),IF=()=>{var e=y.useContext(RF),t=ze(IO);return e||t},LF=e=>{var{value:t,formatter:n}=e,a=zt(e.children)?t:e.children;return typeof n=="function"?n(a):a},Hb=e=>e!=null&&typeof e=="function",$F=(e,t)=>{var n=Ir(t-e),a=Math.min(Math.abs(t-e),360);return n*a},BF=(e,t,n,a,l)=>{var{offset:o,className:u}=e,{cx:d,cy:m,innerRadius:p,outerRadius:h,startAngle:v,endAngle:b,clockWise:g}=l,_=(p+h)/2,j=$F(v,b),S=j>=0?1:-1,w,E;switch(t){case"insideStart":w=v+S*o,E=g;break;case"insideEnd":w=b-S*o,E=!g;break;case"end":w=b+S*o,E=g;break;default:throw new Error("Unsupported position ".concat(t))}E=j<=0?E:!E;var C=vr(d,m,_,w),A=vr(d,m,_,w+(E?1:-1)*359),O="M".concat(C.x,",").concat(C.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(E?0:1,`,
    `).concat(A.x,",").concat(A.y),T=zt(e.id)?wc("recharts-radial-line-"):e.id;return y.createElement("text",za({},a,{dominantBaseline:"central",className:pt("recharts-radial-bar-label",u)}),y.createElement("defs",null,y.createElement("path",{id:T,d:O})),y.createElement("textPath",{xlinkHref:"#".concat(T)},n))},UF=(e,t,n)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:u,startAngle:d,endAngle:m}=e,p=(d+m)/2;if(n==="outside"){var{x:h,y:v}=vr(a,l,u+t,p);return{x:h,y:v,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(o+u)/2,{x:g,y:_}=vr(a,l,b,p);return{x:g,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Wd=e=>e!=null&&"cx"in e&&Se(e.cx),FF={angle:0,offset:5,zIndex:ar.label,position:"middle",textBreakAll:!1};function GF(e){if(!Wd(e))return e;var{cx:t,cy:n,outerRadius:a}=e,l=a*2;return{x:t-a,y:n-a,width:l,upperWidth:l,lowerWidth:l,height:l}}function Oi(e){var t=zr(e,FF),{viewBox:n,parentViewBox:a,position:l,value:o,children:u,content:d,className:m="",textBreakAll:p,labelRef:h}=t,v=IF(),b=oM(),g=l==="center"?b:v??b,_,j,S;n==null?_=g:Wd(n)?_=n:_=Uy(n);var w=GF(_);if(!_||zt(o)&&zt(u)&&!y.isValidElement(d)&&typeof d!="function")return null;var E=vc(vc({},t),{},{viewBox:_});if(y.isValidElement(d)){var{labelRef:C}=E,A=gA(E,OF);return y.cloneElement(d,A)}if(typeof d=="function"){var{content:O}=E,T=gA(E,DF);if(j=y.createElement(d,T),y.isValidElement(j))return j}else j=LF(t);var P=Ar(t);if(Wd(_)){if(l==="insideStart"||l==="insideEnd"||l==="end")return BF(t,l,j,P,_);S=UF(_,t.offset,t.position)}else{if(!w)return null;var R=zF({viewBox:w,position:l,offset:t.offset,parentViewBox:Wd(a)?void 0:a});S=vc(vc({x:R.x,y:R.y,textAnchor:R.horizontalAnchor,verticalAnchor:R.verticalAnchor},R.width!==void 0?{width:R.width}:{}),R.height!==void 0?{height:R.height}:{})}return y.createElement(En,{zIndex:t.zIndex},y.createElement(Gb,za({ref:h,className:pt("recharts-label",m)},P,S,{textAnchor:jF(P.textAnchor)?P.textAnchor:S.textAnchor,breakAll:p}),j))}Oi.displayName="Label";var HF=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?y.createElement(Oi,za({key:"label-implicit"},a)):na(e)?y.createElement(Oi,za({key:"label-implicit",value:e},a)):y.isValidElement(e)?e.type===Oi?y.cloneElement(e,vc({key:"label-implicit"},a)):y.createElement(Oi,za({key:"label-implicit",content:e},a)):Hb(e)?y.createElement(Oi,za({key:"label-implicit",content:e},a)):e&&typeof e=="object"?y.createElement(Oi,za({},e,{key:"label-implicit"},a)):null};function QF(e){var{label:t,labelRef:n}=e,a=oM();return HF(t,a,n)||null}var Kg={},Xg={},yA;function VF(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Xg)),Xg}var Wg={},bA;function YF(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Wg)),Wg}var jA;function KF(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VF(),n=YF(),a=Dy();function l(o){if(a.isArrayLike(o))return t.last(n.toArray(o))}e.last=l})(Kg)),Kg}var Zg,NA;function XF(){return NA||(NA=1,Zg=KF().last),Zg}var WF=XF();const ZF=Ga(WF);var JF=["valueAccessor"],eG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ff.apply(null,arguments)}function _A(e,t){if(e==null)return{};var n,a,l=tG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function tG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var rG=e=>Array.isArray(e.value)?ZF(e.value):e.value,cM=y.createContext(void 0),uM=cM.Provider,dM=y.createContext(void 0);dM.Provider;function nG(){return y.useContext(cM)}function aG(){return y.useContext(dM)}function Zd(e){var{valueAccessor:t=rG}=e,n=_A(e,JF),{dataKey:a,clockWise:l,id:o,textBreakAll:u,zIndex:d}=n,m=_A(n,eG),p=nG(),h=aG(),v=p||h;return!v||!v.length?null:y.createElement(En,{zIndex:d??ar.label},y.createElement(_n,{className:"recharts-label-list"},v.map((b,g)=>{var _,j=zt(a)?t(b,g):Qt(b.payload,a),S=zt(o)?{}:{id:"".concat(o,"-").concat(g)};return y.createElement(Oi,Ff({key:"label-".concat(g)},Ar(b),m,S,{fill:(_=n.fill)!==null&&_!==void 0?_:b.fill,parentViewBox:b.parentViewBox,value:j,textBreakAll:u,viewBox:b.viewBox,index:g,zIndex:0}))})))}Zd.displayName="LabelList";function fM(e){var{label:t}=e;return t?t===!0?y.createElement(Zd,{key:"labelList-implicit"}):y.isValidElement(t)||Hb(t)?y.createElement(Zd,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(Zd,Ff({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},iy.apply(null,arguments)}var mM=e=>{var{cx:t,cy:n,r:a,className:l}=e,o=pt("recharts-dot",l);return Se(t)&&Se(n)&&Se(a)?y.createElement("circle",iy({},Rn(e),zy(e),{className:o,cx:t,cy:n,r:a})):null},iG={radiusAxis:{},angleAxis:{}},pM=Fr({name:"polarAxis",initialState:iG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:KZ,removeRadiusAxis:XZ,addAngleAxis:WZ,removeAngleAxis:ZZ}=pM.actions,sG=pM.reducer;function lG(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Jg={exports:{}},ft={};var SA;function oG(){if(SA)return ft;SA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function _(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case n:case l:case a:case m:case p:case b:return j;default:switch(j=j&&j.$$typeof,j){case u:case d:case v:case h:return j;case o:return j;default:return S}}case t:return S}}}return ft.ContextConsumer=o,ft.ContextProvider=u,ft.Element=e,ft.ForwardRef=d,ft.Fragment=n,ft.Lazy=v,ft.Memo=h,ft.Portal=t,ft.Profiler=l,ft.StrictMode=a,ft.Suspense=m,ft.SuspenseList=p,ft.isContextConsumer=function(j){return _(j)===o},ft.isContextProvider=function(j){return _(j)===u},ft.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},ft.isForwardRef=function(j){return _(j)===d},ft.isFragment=function(j){return _(j)===n},ft.isLazy=function(j){return _(j)===v},ft.isMemo=function(j){return _(j)===h},ft.isPortal=function(j){return _(j)===t},ft.isProfiler=function(j){return _(j)===l},ft.isStrictMode=function(j){return _(j)===a},ft.isSuspense=function(j){return _(j)===m},ft.isSuspenseList=function(j){return _(j)===p},ft.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===l||j===a||j===m||j===p||typeof j=="object"&&j!==null&&(j.$$typeof===v||j.$$typeof===h||j.$$typeof===u||j.$$typeof===o||j.$$typeof===d||j.$$typeof===g||j.getModuleId!==void 0)},ft.typeOf=_,ft}var wA;function cG(){return wA||(wA=1,Jg.exports=oG()),Jg.exports}var uG=cG(),CA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",AA=null,ex=null,hM=e=>{if(e===AA&&Array.isArray(ex))return ex;var t=[];return y.Children.forEach(e,n=>{zt(n)||(uG.isFragment(n)?t=t.concat(hM(n.props.children)):t.push(n))}),ex=t,AA=e,t};function dG(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(l=>CA(l)):a=[CA(t)],hM(e).forEach(l=>{var o=Hl(l,"type.displayName")||Hl(l,"type.name");o&&a.indexOf(o)!==-1&&n.push(l)}),n}var vM=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,tx={},EA;function fG(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const l=n[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${l}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(tx)),tx}var rx,zA;function mG(){return zA||(zA=1,rx=fG().isPlainObject),rx}var pG=mG();const hG=Ga(pG);var OA,DA,MA,TA,kA;function PA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function qA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(n),!0).forEach(function(a){vG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vG(e,t,n){return(t=gG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gG(e){var t=xG(e,"string");return typeof t=="symbol"?t:t+""}function xG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gf.apply(null,arguments)}function cc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var RA=(e,t,n,a,l)=>{var o=n-a,u;return u=kt(OA||(OA=cc(["M ",",",""])),e,t),u+=kt(DA||(DA=cc(["L ",",",""])),e+n,t),u+=kt(MA||(MA=cc(["L ",",",""])),e+n-o/2,t+l),u+=kt(TA||(TA=cc(["L ",",",""])),e+n-o/2-a,t+l),u+=kt(kA||(kA=cc(["L ",","," Z"])),e,t),u},yG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bG=e=>{var t=zr(e,yG),{x:n,y:a,upperWidth:l,lowerWidth:o,height:u,className:d}=t,{animationEasing:m,animationDuration:p,animationBegin:h,isUpdateAnimationActive:v}=t,b=y.useRef(null),[g,_]=y.useState(-1),j=y.useRef(l),S=y.useRef(o),w=y.useRef(u),E=y.useRef(n),C=y.useRef(a),A=Dm(e,"trapezoid-");if(y.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var V=b.current.getTotalLength();V&&_(V)}catch{}},[]),n!==+n||a!==+a||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var O=pt("recharts-trapezoid",d);if(!v)return y.createElement("g",null,y.createElement("path",Gf({},Ar(t),{className:O,d:RA(n,a,l,o,u)})));var T=j.current,P=S.current,R=w.current,I=E.current,L=C.current,K="0px ".concat(g===-1?1:g,"px"),U="".concat(g,"px 0px"),G=Oz(["strokeDasharray"],p,m);return y.createElement(Om,{animationId:A,key:A,canBegin:g>0,duration:p,easing:m,isActive:v,begin:h},V=>{var M=Pt(T,l,V),k=Pt(P,o,V),J=Pt(R,u,V),Q=Pt(I,n,V),B=Pt(L,a,V);b.current&&(j.current=M,S.current=k,w.current=J,E.current=Q,C.current=B);var q=V>0?{transition:G,strokeDasharray:U}:{strokeDasharray:K};return y.createElement("path",Gf({},Ar(t),{className:O,d:RA(Q,B,M,k,J),ref:b,style:qA(qA({},q),t.style)}))})},jG=["option","shapeType","activeClassName"];function NG(e,t){if(e==null)return{};var n,a,l=_G(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function _G(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function IA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(n),!0).forEach(function(a){SG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SG(e,t,n){return(t=wG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wG(e){var t=CG(e,"string");return typeof t=="symbol"?t:t+""}function CG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AG(e,t){return Hf(Hf({},t),e)}function EG(e,t){return e==="symbols"}function LA(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return y.createElement(kz,n);case"trapezoid":return y.createElement(bG,n);case"sector":return y.createElement(Rz,n);case"symbols":if(EG(t))return y.createElement(bE,n);break;case"curve":return y.createElement(zz,n);default:return null}}function zG(e){return y.isValidElement(e)?e.props:e}function gM(e){var{option:t,shapeType:n,activeClassName:a="recharts-active-shape"}=e,l=NG(e,jG),o;if(y.isValidElement(t))o=y.cloneElement(t,Hf(Hf({},l),zG(t)));else if(typeof t=="function")o=t(l,l.index);else if(hG(t)&&typeof t!="boolean"){var u=AG(t,l);o=y.createElement(LA,{shapeType:n,elementProps:u})}else{var d=l;o=y.createElement(LA,{shapeType:n,elementProps:d})}return l.isActive?y.createElement(_n,{className:a},o):o}var xM=(e,t,n)=>{var a=$t();return(l,o)=>u=>{e?.(l,o,u),a(AD({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}},yM=e=>{var t=$t();return(n,a)=>l=>{e?.(n,a,l),t(HB())}},bM=(e,t,n)=>{var a=$t();return(l,o)=>u=>{e?.(l,o,u),a(QB({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}};function jM(e){var{tooltipEntrySettings:t}=e,n=$t(),a=Nr(),l=y.useRef(null);return y.useLayoutEffect(()=>{a||(l.current===null?n(BB(t)):l.current!==t&&n(UB({prev:l.current,next:t})),l.current=t)},[t,n,a]),y.useLayoutEffect(()=>()=>{l.current&&(n(FB(l.current)),l.current=null)},[n]),null}function NM(e){var{legendPayload:t}=e,n=$t(),a=Nr(),l=y.useRef(null);return y.useLayoutEffect(()=>{a||(l.current===null?n(jI(t)):l.current!==t&&n(NI({prev:l.current,next:t})),l.current=t)},[n,a,t]),y.useLayoutEffect(()=>()=>{l.current&&(n(_I(l.current)),l.current=null)},[n]),null}var nx,OG=()=>{var[e]=y.useState(()=>wc("uid-"));return e},DG=(nx=FP.useId)!==null&&nx!==void 0?nx:OG;function MG(e,t){var n=DG();return t||(e?"".concat(e,"-").concat(n):n)}var TG=y.createContext(void 0),_M=e=>{var{id:t,type:n,children:a}=e,l=MG("recharts-".concat(n),t);return y.createElement(TG.Provider,{value:l},a(l))},kG={cartesianItems:[],polarItems:[]},SM=Fr({name:"graphicalItems",initialState:kG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ct()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,l=qn(e).cartesianItems.indexOf(n);l>-1&&(e.cartesianItems[l]=a)},prepare:Ct()},removeCartesianGraphicalItem:{reducer(e,t){var n=qn(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Ct()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ct()},removePolarGraphicalItem:{reducer(e,t){var n=qn(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Ct()}}}),{addCartesianGraphicalItem:PG,replaceCartesianGraphicalItem:qG,removeCartesianGraphicalItem:RG,addPolarGraphicalItem:JZ,removePolarGraphicalItem:eJ}=SM.actions,IG=SM.reducer,LG=e=>{var t=$t(),n=y.useRef(null);return y.useLayoutEffect(()=>{n.current===null?t(PG(e)):n.current!==e&&t(qG({prev:n.current,next:e})),n.current=e},[t,e]),y.useLayoutEffect(()=>()=>{n.current&&(t(RG(n.current)),n.current=null)},[t]),null},wM=y.memo(LG),$G=["points"];function $A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ax(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(n),!0).forEach(function(a){BG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function BG(e,t,n){return(t=UG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UG(e){var t=FG(e,"string");return typeof t=="symbol"?t:t+""}function FG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qf.apply(null,arguments)}function GG(e,t){if(e==null)return{};var n,a,l=HG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function HG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function QG(e){var{option:t,dotProps:n,className:a}=e;if(y.isValidElement(t))return y.cloneElement(t,n);if(typeof t=="function")return t(n);var l=pt(a,typeof t!="boolean"?t.className:""),o=n??{},{points:u}=o,d=GG(o,$G);return y.createElement(mM,Qf({},d,{className:l}))}function VG(e,t){return e==null?!1:t?!0:e.length===1}function YG(e){var{points:t,dot:n,className:a,dotClassName:l,dataKey:o,baseProps:u,needClip:d,clipPathId:m,zIndex:p=ar.scatter}=e;if(!VG(t,n))return null;var h=vM(n),v=f3(n),b=t.map((_,j)=>{var S,w,E=ax(ax(ax({r:3},u),v),{},{index:j,cx:(S=_.x)!==null&&S!==void 0?S:void 0,cy:(w=_.y)!==null&&w!==void 0?w:void 0,dataKey:o,value:_.value,payload:_.payload,points:t});return y.createElement(QG,{key:"dot-".concat(j),option:n,dotProps:E,className:l})}),g={};return d&&m!=null&&(g.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(m,")")),y.createElement(En,{zIndex:p},y.createElement(_n,Qf({className:a},g),b))}function BA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function UA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(n),!0).forEach(function(a){KG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function KG(e,t,n){return(t=XG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XG(e){var t=WG(e,"string");return typeof t=="symbol"?t:t+""}function WG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CM=0,ZG={xAxis:{},yAxis:{},zAxis:{}},AM=Fr({name:"cartesianAxis",initialState:ZG,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ct()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:Ct()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ct()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ct()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:Ct()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ct()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ct()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:Ct()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ct()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,l=e.yAxis[n];if(l){var o,u=l.widthHistory||[];if(u.length===3&&u[0]===u[2]&&a===u[1]&&a!==l.width&&Math.abs(a-((o=u[0])!==null&&o!==void 0?o:0))<=1)return;var d=[...u,a].slice(-3);e.yAxis[n]=UA(UA({},l),{},{width:a,widthHistory:d})}}}}),{addXAxis:JG,replaceXAxis:eH,removeXAxis:tH,addYAxis:rH,replaceYAxis:nH,removeYAxis:aH,addZAxis:tJ,replaceZAxis:rJ,removeZAxis:nJ,updateYAxisWidth:iH}=AM.actions,sH=AM.reducer,lH=se([ir],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),oH=se([lH,Ya,Ka],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Qb=()=>ze(oH),cH=()=>ze(P9);function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ix(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(a){uH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uH(e,t,n){return(t=dH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dH(e){var t=fH(e,"string");return typeof t=="symbol"?t:t+""}function fH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mH=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||t.x==null||t.y==null)return null;var d={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=ix(ix(ix({},d),Fc(l)),zy(l)),p;return y.isValidElement(l)?p=y.cloneElement(l,m):typeof l=="function"?p=l(m):p=y.createElement(mM,m),y.createElement(_n,{className:"recharts-active-dot",clipPath:u},p)};function pH(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:l,clipPath:o,zIndex:u=ar.activeDot}=e,d=ze(Ms),m=cH();if(t==null||m==null)return null;var p=t.find(h=>m.includes(h.payload));return zt(p)?null:y.createElement(En,{zIndex:u},y.createElement(mH,{point:p,childIndex:Number(d),mainColor:n,dataKey:l,activeDot:a,clipPath:o}))}var GA=(e,t,n)=>{var a=n??e;if(!zt(a))return In(a,t,0)},hH=(e,t,n)=>{var a={},l=e.filter(Fm),o=e.filter(p=>p.stackId==null),u=l.reduce((p,h)=>{var v=p[h.stackId];return v==null&&(v=[]),v.push(h),p[h.stackId]=v,p},a),d=Object.entries(u).map(p=>{var h,[v,b]=p,g=b.map(j=>j.dataKey),_=GA(t,n,(h=b[0])===null||h===void 0?void 0:h.barSize);return{stackId:v,dataKeys:g,barSize:_}}),m=o.map(p=>{var h=[p.dataKey].filter(b=>b!=null),v=GA(t,n,p.barSize);return{stackId:void 0,dataKeys:h,barSize:v}});return[...d,...m]};function HA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(n),!0).forEach(function(a){vH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vH(e,t,n){return(t=gH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gH(e){var t=xH(e,"string");return typeof t=="symbol"?t:t+""}function xH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yH(e,t,n,a,l){var o,u=a.length;if(!(u<1)){var d=In(e,n,0,!0),m,p=[];if(We((o=a[0])===null||o===void 0?void 0:o.barSize)){var h=!1,v=n/u,b=a.reduce((E,C)=>E+(C.barSize||0),0);b+=(u-1)*d,b>=n&&(b-=(u-1)*d,d=0),b>=n&&v>0&&(h=!0,v*=.9,b=u*v);var g=(n-b)/2>>0,_={offset:g-d,size:0};m=a.reduce((E,C)=>{var A,O={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:_.offset+_.size+d,size:h?v:(A=C.barSize)!==null&&A!==void 0?A:0}},T=[...E,O];return _=O.position,T},p)}else{var j=In(t,n,0,!0);n-2*j-(u-1)*d<=0&&(d=0);var S=(n-2*j-(u-1)*d)/u;S>1&&(S>>=0);var w=We(l)?Math.min(S,l):S;m=a.reduce((E,C,A)=>[...E,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:j+(S+d)*A+(S-w)/2,size:w}}],p)}return m}}var bH=(e,t,n,a,l,o,u)=>{var d=zt(u)?t:u,m=yH(n,a,l!==o?l:o,e,d);return l!==o&&m!=null&&(m=m.map(p=>Ld(Ld({},p),{},{position:Ld(Ld({},p.position),{},{offset:p.position.offset-l/2})}))),m},jH=(e,t)=>{var n=_b(t);if(!(!e||n==null||t==null)){var{stackId:a}=t;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(u=>u.key===n)}}}},NH=(e,t)=>{if(!(e==null||t==null)){var n=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(n!=null)return n.position}};function _H(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&We(e.zIndex)?e.zIndex:t}var SH=e=>{var{chartData:t}=e,n=$t(),a=Nr();return y.useEffect(()=>a?()=>{}:(n(eA(t)),()=>{n(eA(void 0))}),[t,n,a]),null},QA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},EM=Fr({name:"brush",initialState:QA,reducers:{setBrushSettings(e,t){return t.payload==null?QA:t.payload}}}),{setBrushSettings:aJ}=EM.actions,wH=EM.reducer;function CH(e){return(e%180+180)%180}var AH=function(t){var{width:n,height:a}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=CH(l),u=o*Math.PI/180,d=Math.atan(a/n),m=u>d&&u<Math.PI-d?a/Math.sin(u):n/Math.cos(u);return Math.abs(m)},EH={dots:[],areas:[],lines:[]},zM=Fr({name:"referenceElements",initialState:EH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=qn(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=qn(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=qn(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:iJ,removeDot:sJ,addArea:lJ,removeArea:oJ,addLine:cJ,removeLine:uJ}=zM.actions,zH=zM.reducer,OH=y.createContext(void 0),DH=e=>{var{children:t}=e,[n]=y.useState("".concat(wc("recharts"),"-clip")),a=Qb();if(a==null)return null;var{x:l,y:o,width:u,height:d}=a;return y.createElement(OH.Provider,{value:n},y.createElement("defs",null,y.createElement("clipPath",{id:n},y.createElement("rect",{x:l,y:o,height:d,width:u}))),t)};function OM(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],a=0;a<e.length;a+=t){var l=e[a];l!==void 0&&n.push(l)}return n}function MH(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return AH(a,n)}function TH(e,t,n){var a=n==="width",{x:l,y:o,width:u,height:d}=e;return t===1?{start:a?l:o,end:a?l+u:o+d}:{start:a?l+u:o+d,end:a?l:o}}function Lc(e,t,n,a,l){if(e*t<e*a||e*t>e*l)return!1;var o=n();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-l)<=0}function kH(e,t){return OM(e,t+1)}function PH(e,t,n,a,l){for(var o=(a||[]).slice(),{start:u,end:d}=t,m=0,p=1,h=u,v=function(){var _=a?.[m];if(_===void 0)return{v:OM(a,p)};var j=m,S,w=()=>(S===void 0&&(S=n(_,j)),S),E=_.coordinate,C=m===0||Lc(e,E,w,h,d);C||(m=0,h=u,p+=1),C&&(h=E+e*(w()/2+l),m+=p)},b;p<=o.length;)if(b=v(),b)return b.v;return[]}function qH(e,t,n,a,l){var o=(a||[]).slice(),u=o.length;if(u===0)return[];for(var{start:d,end:m}=t,p=1;p<=u;p++){for(var h=(u-1)%p,v=d,b=!0,g=function(){var A=a[j];if(A==null)return 0;var O=j,T,P=()=>(T===void 0&&(T=n(A,O)),T),R=A.coordinate,I=j===h||Lc(e,R,P,v,m);if(!I)return b=!1,1;I&&(v=R+e*(P()/2+l))},_,j=h;j<u&&(_=g(),!(_!==0&&_===1));j+=p);if(b){for(var S=[],w=h;w<u;w+=p){var E=a[w];E!=null&&S.push(E)}return S}}return[]}function VA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VA(Object(n),!0).forEach(function(a){RH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RH(e,t,n){return(t=IH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IH(e){var t=LH(e,"string");return typeof t=="symbol"?t:t+""}function LH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $H(e,t,n,a,l){for(var o=(a||[]).slice(),u=o.length,{start:d}=t,{end:m}=t,p=function(b){var g=o[b];if(g==null)return 1;var _=g,j,S=()=>(j===void 0&&(j=n(g,b)),j);if(b===u-1){var w=e*(_.coordinate+e*S()/2-m);o[b]=_=br(br({},_),{},{tickCoord:w>0?_.coordinate-w*e:_.coordinate})}else o[b]=_=br(br({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var E=Lc(e,_.tickCoord,S,d,m);E&&(m=_.tickCoord-e*(S()/2+l),o[b]=br(br({},_),{},{isShow:!0}))}},h=u-1;h>=0;h--)p(h);return o}function BH(e,t,n,a,l,o){var u=(a||[]).slice(),d=u.length,{start:m,end:p}=t;if(o){var h=a[d-1];if(h!=null){var v=n(h,d-1),b=e*(h.coordinate+e*v/2-p);if(u[d-1]=h=br(br({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate}),h.tickCoord!=null){var g=Lc(e,h.tickCoord,()=>v,m,p);g&&(p=h.tickCoord-e*(v/2+l),u[d-1]=br(br({},h),{},{isShow:!0}))}}}for(var _=o?d-1:d,j=function(E){var C=u[E];if(C==null)return 1;var A=C,O,T=()=>(O===void 0&&(O=n(C,E)),O);if(E===0){var P=e*(A.coordinate-e*T()/2-m);u[E]=A=br(br({},A),{},{tickCoord:P<0?A.coordinate-P*e:A.coordinate})}else u[E]=A=br(br({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var R=Lc(e,A.tickCoord,T,m,p);R&&(m=A.tickCoord+e*(T()/2+l),u[E]=br(br({},A),{},{isShow:!0}))}},S=0;S<_;S++)j(S);return u}function Vb(e,t,n){var{tick:a,ticks:l,viewBox:o,minTickGap:u,orientation:d,interval:m,tickFormatter:p,unit:h,angle:v}=e;if(!l||!l.length||!a)return[];if(Se(m)||zm.isSsr){var b;return(b=kH(l,Se(m)?m:0))!==null&&b!==void 0?b:[]}var g=[],_=d==="top"||d==="bottom"?"width":"height",j=h&&_==="width"?bc(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(O,T)=>{var P=typeof p=="function"?p(O.value,T):O.value;return _==="width"?MH(bc(P,{fontSize:t,letterSpacing:n}),j,v):bc(P,{fontSize:t,letterSpacing:n})[_]},w=l[0],E=l[1],C=l.length>=2&&w!=null&&E!=null?Ir(E.coordinate-w.coordinate):1,A=TH(o,C,_);return m==="equidistantPreserveStart"?PH(C,A,S,l,u):m==="equidistantPreserveEnd"?qH(C,A,S,l,u):(m==="preserveStart"||m==="preserveStartEnd"?g=BH(C,A,S,l,u,m==="preserveStartEnd"):g=$H(C,A,S,l,u),g.filter(O=>O.isShow))}var UH=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(t){Array.from(t).forEach(h=>{if(h){var v=h.getBoundingClientRect();v.width>u&&(u=v.width)}});var d=n?n.getBoundingClientRect().width:0,m=l+o,p=u+m+d+(n?a:0);return Math.round(p)}return 0},FH=["axisLine","width","height","className","hide","ticks","axisType"];function GH(e,t){if(e==null)return{};var n,a,l=HH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function HH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ts.apply(null,arguments)}function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(n),!0).forEach(function(a){QH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QH(e,t,n){return(t=VH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VH(e){var t=YH(e,"string");return typeof t=="symbol"?t:t+""}function YH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pa={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ar.axis};function KH(e){var{x:t,y:n,width:a,height:l,orientation:o,mirror:u,axisLine:d,otherSvgProps:m}=e;if(!d)return null;var p=Mt(Mt(Mt({},m),Rn(d)),{},{fill:"none"});if(o==="top"||o==="bottom"){var h=+(o==="top"&&!u||o==="bottom"&&u);p=Mt(Mt({},p),{},{x1:t,y1:n+h*l,x2:t+a,y2:n+h*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);p=Mt(Mt({},p),{},{x1:t+v*a,y1:n,x2:t+v*a,y2:n+l})}return y.createElement("line",Ts({},p,{className:pt("recharts-cartesian-axis-line",Hl(d,"className"))}))}function XH(e,t,n,a,l,o,u,d,m){var p,h,v,b,g,_,j=d?-1:1,S=e.tickSize||u,w=Se(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":p=h=e.coordinate,b=n+ +!d*l,v=b-j*S,_=v-j*m,g=w;break;case"left":v=b=e.coordinate,h=t+ +!d*a,p=h-j*S,g=p-j*m,_=w;break;case"right":v=b=e.coordinate,h=t+ +d*a,p=h+j*S,g=p+j*m,_=w;break;default:p=h=e.coordinate,b=n+ +d*l,v=b+j*S,_=v+j*m,g=w;break}return{line:{x1:p,y1:v,x2:h,y2:b},tick:{x:g,y:_}}}function WH(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function ZH(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function JH(e){var{option:t,tickProps:n,value:a}=e,l,o=pt(n.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))l=y.cloneElement(t,Mt(Mt({},n),{},{className:o}));else if(typeof t=="function")l=t(Mt(Mt({},n),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=pt(u,lG(t))),l=y.createElement(Gb,Ts({},n,{className:u}),a)}return l}var eQ=y.forwardRef((e,t)=>{var{ticks:n=[],tick:a,tickLine:l,stroke:o,tickFormatter:u,unit:d,padding:m,tickTextProps:p,orientation:h,mirror:v,x:b,y:g,width:_,height:j,tickSize:S,tickMargin:w,fontSize:E,letterSpacing:C,getTicksConfig:A,events:O,axisType:T}=e,P=Vb(Mt(Mt({},A),{},{ticks:n}),E,C),R=WH(h,v),I=ZH(h,v),L=Rn(A),K=Fc(a),U={};typeof l=="object"&&(U=l);var G=Mt(Mt({},L),{},{fill:"none"},U),V=P.map(J=>Mt({entry:J},XH(J,b,g,_,j,h,S,v,w))),M=V.map(J=>{var{entry:Q,line:B}=J;return y.createElement(_n,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},l&&y.createElement("line",Ts({},G,B,{className:pt("recharts-cartesian-axis-tick-line",Hl(l,"className"))})))}),k=V.map((J,Q)=>{var B,q,{entry:fe,tick:te}=J,ue=Mt(Mt(Mt(Mt({verticalAnchor:I},L),{},{textAnchor:R,stroke:"none",fill:o},te),{},{index:Q,payload:fe,visibleTicksCount:P.length,tickFormatter:u,padding:m},p),{},{angle:(B=(q=p?.angle)!==null&&q!==void 0?q:L.angle)!==null&&B!==void 0?B:0}),he=Mt(Mt({},ue),K);return y.createElement(_n,Ts({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(fe.value,"-").concat(fe.coordinate,"-").concat(fe.tickCoord)},Oy(O,fe,Q)),a&&y.createElement(JH,{option:a,tickProps:he,value:"".concat(typeof u=="function"?u(fe.value,Q):fe.value).concat(d||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},k.length>0&&y.createElement(En,{zIndex:ar.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},k)),M.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},M))}),tQ=y.forwardRef((e,t)=>{var{axisLine:n,width:a,height:l,className:o,hide:u,ticks:d,axisType:m}=e,p=GH(e,FH),[h,v]=y.useState(""),[b,g]=y.useState(""),_=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return UH({ticks:_.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(S=>{if(S){var w=S.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=w;var E=w[0];if(E){var C=window.getComputedStyle(E),A=C.fontSize,O=C.letterSpacing;(A!==h||O!==b)&&(v(A),g(O))}}},[h,b]);return u||a!=null&&a<=0||l!=null&&l<=0?null:y.createElement(En,{zIndex:e.zIndex},y.createElement(_n,{className:pt("recharts-cartesian-axis",o)},y.createElement(KH,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Rn(e)}),y.createElement(eQ,{ref:j,axisType:m,events:p,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(qF,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(QF,{label:e.label,labelRef:e.labelRef}),e.children)))}),Yb=y.forwardRef((e,t)=>{var n=zr(e,Pa);return y.createElement(tQ,Ts({},n,{ref:t}))});Yb.displayName="CartesianAxis";var rQ=["x1","y1","x2","y2","key"],nQ=["offset"],aQ=["xAxisId","yAxisId"],iQ=["xAxisId","yAxisId"];function KA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(n),!0).forEach(function(a){sQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sQ(e,t,n){return(t=lQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lQ(e){var t=oQ(e,"string");return typeof t=="symbol"?t:t+""}function oQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ys.apply(null,arguments)}function Vf(e,t){if(e==null)return{};var n,a,l=cQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function cQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var uQ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:l,width:o,height:u,ry:d}=e;return y.createElement("rect",{x:a,y:l,ry:d,width:o,height:u,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function DM(e){var{option:t,lineItemProps:n}=e,a;if(y.isValidElement(t))a=y.cloneElement(t,n);else if(typeof t=="function")a=t(n);else{var l,{x1:o,y1:u,x2:d,y2:m,key:p}=n,h=Vf(n,rQ),v=(l=Rn(h))!==null&&l!==void 0?l:{},{offset:b}=v,g=Vf(v,nQ);a=y.createElement("line",ys({},g,{x1:o,y1:u,x2:d,y2:m,fill:"none",key:p}))}return a}function dQ(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=Vf(e,aQ),m=l.map((p,h)=>{var v=jr(jr({},d),{},{x1:t,y1:p,x2:t+n,y2:p,key:"line-".concat(h),index:h});return y.createElement(DM,{key:"line-".concat(h),option:a,lineItemProps:v})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function fQ(e){var{y:t,height:n,vertical:a=!0,verticalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=Vf(e,iQ),m=l.map((p,h)=>{var v=jr(jr({},d),{},{x1:p,y1:t,x2:p,y2:t+n,key:"line-".concat(h),index:h});return y.createElement(DM,{option:a,lineItemProps:v,key:"line-".concat(h)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function mQ(e){var{horizontalFill:t,fillOpacity:n,x:a,y:l,width:o,height:u,horizontalPoints:d,horizontal:m=!0}=e;if(!m||!t||!t.length||d==null)return null;var p=d.map(v=>Math.round(v+l-l)).sort((v,b)=>v-b);l!==p[0]&&p.unshift(0);var h=p.map((v,b)=>{var g=p[b+1],_=g==null,j=_?l+u-v:g-v;if(j<=0)return null;var S=b%t.length;return y.createElement("rect",{key:"react-".concat(b),y:v,x:a,height:j,width:o,stroke:"none",fill:t[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function pQ(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:l,y:o,width:u,height:d,verticalPoints:m}=e;if(!t||!n||!n.length)return null;var p=m.map(v=>Math.round(v+l-l)).sort((v,b)=>v-b);l!==p[0]&&p.unshift(0);var h=p.map((v,b)=>{var g=p[b+1],_=g==null,j=_?l+u-v:g-v;if(j<=0)return null;var S=b%n.length;return y.createElement("rect",{key:"react-".concat(b),x:v,y:o,width:j,height:d,stroke:"none",fill:n[S],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var hQ=(e,t)=>{var{xAxis:n,width:a,height:l,offset:o}=e;return uz(Vb(jr(jr(jr({},Pa),n),{},{ticks:dz(n),viewBox:{x:0,y:0,width:a,height:l}})),o.left,o.left+o.width,t)},vQ=(e,t)=>{var{yAxis:n,width:a,height:l,offset:o}=e;return uz(Vb(jr(jr(jr({},Pa),n),{},{ticks:dz(n),viewBox:{x:0,y:0,width:a,height:l}})),o.top,o.top+o.height,t)},gQ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ar.grid};function sy(e){var t=gz(),n=xz(),a=vz(),l=jr(jr({},zr(e,gQ)),{},{x:Se(e.x)?e.x:a.left,y:Se(e.y)?e.y:a.top,width:Se(e.width)?e.width:a.width,height:Se(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:u,x:d,y:m,width:p,height:h,syncWithTicks:v,horizontalValues:b,verticalValues:g}=l,_=Nr(),j=ze(I=>UC(I,"xAxis",o,_)),S=ze(I=>UC(I,"yAxis",u,_));if(!aa(p)||!aa(h)||!Se(d)||!Se(m))return null;var w=l.verticalCoordinatesGenerator||hQ,E=l.horizontalCoordinatesGenerator||vQ,{horizontalPoints:C,verticalPoints:A}=l;if((!C||!C.length)&&typeof E=="function"){var O=b&&b.length,T=E({yAxis:S?jr(jr({},S),{},{ticks:O?b:S.ticks}):void 0,width:t??p,height:n??h,offset:a},O?!0:v);yf(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(C=T)}if((!A||!A.length)&&typeof w=="function"){var P=g&&g.length,R=w({xAxis:j?jr(jr({},j),{},{ticks:P?g:j.ticks}):void 0,width:t??p,height:n??h,offset:a},P?!0:v);yf(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(A=R)}return y.createElement(En,{zIndex:l.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(uQ,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),y.createElement(mQ,ys({},l,{horizontalPoints:C})),y.createElement(pQ,ys({},l,{verticalPoints:A})),y.createElement(dQ,ys({},l,{offset:a,horizontalPoints:C,xAxis:j,yAxis:S})),y.createElement(fQ,ys({},l,{offset:a,verticalPoints:A,xAxis:j,yAxis:S}))))}sy.displayName="CartesianGrid";var xQ={},MM=Fr({name:"errorBars",initialState:xQ,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:l}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:dJ,replaceErrorBar:fJ,removeErrorBar:mJ}=MM.actions,yQ=MM.reducer,bQ=["children"];function jQ(e,t){if(e==null)return{};var n,a,l=NQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function NQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var _Q={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},SQ=y.createContext(_Q);function TM(e){var{children:t}=e,n=jQ(e,bQ);return y.createElement(SQ.Provider,{value:n},t)}function Kb(e,t){var n,a,l=ze(p=>Za(p,e)),o=ze(p=>Ja(p,t)),u=(n=l?.allowDataOverflow)!==null&&n!==void 0?n:tr.allowDataOverflow,d=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:rr.allowDataOverflow,m=u||d;return{needClip:m,needClipX:u,needClipY:d}}function kM(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,l=Qb(),{needClipX:o,needClipY:u,needClip:d}=Kb(t,n);if(!d||!l)return null;var{x:m,y:p,width:h,height:v}=l;return y.createElement("clipPath",{id:"clipPath-".concat(a)},y.createElement("rect",{x:o?m:m-h/2,y:u?p:p-v/2,width:o?h:h*2,height:u?v:v*2}))}var PM=(e,t,n,a)=>Bi(e,"xAxis",t,a),qM=(e,t,n,a)=>$i(e,"xAxis",t,a),RM=(e,t,n,a)=>Bi(e,"yAxis",n,a),IM=(e,t,n,a)=>$i(e,"yAxis",n,a),wQ=se([ot,PM,RM,qM,IM],(e,t,n,a,l)=>Va(e,"xAxis")?Vl(t,a,!1):Vl(n,l,!1)),CQ=(e,t,n,a,l)=>l;function AQ(e){return e.type==="line"}var EQ=se([Qm,CQ],(e,t)=>e.filter(AQ).find(n=>n.id===t)),zQ=se([ot,PM,RM,qM,IM,EQ,wQ,pb],(e,t,n,a,l,o,u,d)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:h}=d;if(!(o==null||t==null||n==null||a==null||l==null||a.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:b}=o,g;if(b!=null&&b.length>0?g=b:g=m?.slice(p,h+1),g!=null)return vV({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:g})}});function OQ(e){var t=Fc(e),n=3,a=2;if(t!=null){var{r:l,strokeWidth:o}=t,u=Number(l),d=Number(o);return(Number.isNaN(u)||u<0)&&(u=n),(Number.isNaN(d)||d<0)&&(d=a),{r:u,strokeWidth:d}}return{r:n,strokeWidth:a}}var sx={exports:{}},lx={};var XA;function DQ(){if(XA)return lx;XA=1;var e=rm();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,d=e.useDebugValue;return lx.useSyncExternalStoreWithSelector=function(m,p,h,v,b){var g=l(null);if(g.current===null){var _={hasValue:!1,value:null};g.current=_}else _=g.current;g=u(function(){function S(O){if(!w){if(w=!0,E=O,O=v(O),b!==void 0&&_.hasValue){var T=_.value;if(b(T,O))return C=T}return C=O}if(T=C,n(E,O))return T;var P=v(O);return b!==void 0&&b(T,P)?(E=O,T):(E=O,C=P)}var w=!1,E,C,A=h===void 0?null:h;return[function(){return S(p())},A===null?void 0:function(){return S(A())}]},[p,h,v,b]);var j=a(m,g[0],g[1]);return o(function(){_.hasValue=!0,_.value=j},[j]),d(j),j},lx}var WA;function MQ(){return WA||(WA=1,sx.exports=DQ()),sx.exports}MQ();function TQ(e){e()}function kQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){TQ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const l=t={callback:n,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var ZA={notify(){},get:()=>[]};function PQ(e,t){let n,a=ZA,l=0,o=!1;function u(j){h();const S=a.subscribe(j);let w=!1;return()=>{w||(w=!0,S(),v())}}function d(){a.notify()}function m(){_.onStateChange&&_.onStateChange()}function p(){return o}function h(){l++,n||(n=e.subscribe(m),a=kQ())}function v(){l--,n&&l===0&&(n(),n=void 0,a.clear(),a=ZA)}function b(){o||(o=!0,h())}function g(){o&&(o=!1,v())}const _={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:p,trySubscribe:b,tryUnsubscribe:g,getListeners:()=>a};return _}var qQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RQ=qQ(),IQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",LQ=IQ(),$Q=()=>RQ||LQ?y.useLayoutEffect:y.useEffect,BQ=$Q();function JA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function UQ(e,t){if(JA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(!Object.prototype.hasOwnProperty.call(t,n[l])||!JA(e[n[l]],t[n[l]]))return!1;return!0}var FQ=Symbol.for("react-redux-context"),GQ=typeof globalThis<"u"?globalThis:{};function HQ(){if(!y.createContext)return{};const e=GQ[FQ]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var QQ=HQ();function VQ(e){const{children:t,context:n,serverState:a,store:l}=e,o=y.useMemo(()=>{const m=PQ(l);return{store:l,subscription:m,getServerState:a?()=>a:void 0}},[l,a]),u=y.useMemo(()=>l.getState(),[l]);BQ(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==l.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,u]);const d=n||QQ;return y.createElement(d.Provider,{value:o},t)}var YQ=VQ,KQ=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function XQ(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Wm(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(KQ.has(a)){if(e[a]==null&&t[a]==null)continue;if(!UQ(e[a],t[a]))return!1}else if(!XQ(e[a],t[a]))return!1;return!0}var WQ=["id"],ZQ=["type","layout","connectNulls","needClip","shape"],JQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$c.apply(null,arguments)}function e2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(n),!0).forEach(function(a){eV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eV(e,t,n){return(t=tV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tV(e){var t=rV(e,"string");return typeof t=="symbol"?t:t+""}function rV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xb(e,t){if(e==null)return{};var n,a,l=nV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function nV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var aV=e=>{var{dataKey:t,name:n,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:bm(n,t),payload:e}]},iV=y.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:l,fill:o,name:u,hide:d,unit:m,tooltipType:p,id:h}=e,v={dataDefinedOnItem:n,getPosition:Ps,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:bm(u,t),hide:d,type:p,color:a,unit:m,graphicalItemId:h}};return y.createElement(jM,{tooltipEntrySettings:v})}),LM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function sV(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],l=0;l<t;++l)a=[...a,...n];return a}var lV=(e,t,n)=>{var a=n.reduce((g,_)=>g+_);if(!a)return LM(t,e);for(var l=Math.floor(e/a),o=e%a,u=t-e,d=[],m=0,p=0;m<n.length;p+=(h=n[m])!==null&&h!==void 0?h:0,++m){var h,v=n[m];if(v!=null&&p+v>o){d=[...n.slice(0,m),o-p];break}}var b=d.length%2===0?[0,u]:[u];return[...sV(n,l),...d,...b].map(g=>"".concat(g,"px")).join(", ")};function oV(e){var{clipPathId:t,points:n,props:a}=e,{dot:l,dataKey:o,needClip:u}=a,{id:d}=a,m=Xb(a,WQ),p=Rn(m);return y.createElement(YG,{points:n,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:p,needClip:u,clipPathId:t})}function cV(e){var{showLabels:t,children:n,points:a}=e,l=y.useMemo(()=>a?.map(o=>{var u,d,m={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Zn(Zn({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return y.createElement(uM,{value:t?l:void 0},n)}function t2(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:l,props:o}=e,{type:u,layout:d,connectNulls:m,needClip:p,shape:h}=o,v=Xb(o,ZQ),b=Zn(Zn({},Ar(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(t,")"):void 0,points:a,type:u,layout:d,connectNulls:m,strokeDasharray:l??o.strokeDasharray});return y.createElement(y.Fragment,null,a?.length>1&&y.createElement(gM,$c({shapeType:"curve",option:h},b,{pathRef:n})),y.createElement(oV,{points:a,clipPathId:t,props:o}))}function uV(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function dV(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:d,isAnimationActive:m,animationBegin:p,animationDuration:h,animationEasing:v,animateNewValues:b,width:g,height:_,onAnimationEnd:j,onAnimationStart:S}=n,w=l.current,E=Dm(u,"recharts-line-"),C=y.useRef(E),[A,O]=y.useState(!1),T=!A,P=y.useCallback(()=>{typeof j=="function"&&j(),O(!1)},[j]),R=y.useCallback(()=>{typeof S=="function"&&S(),O(!0)},[S]),I=uV(a.current),L=y.useRef(0);C.current!==E&&(L.current=o.current,C.current=E);var K=L.current;return y.createElement(cV,{points:u,showLabels:T},n.children,y.createElement(Om,{animationId:E,begin:p,duration:h,isActive:m,easing:v,onAnimationEnd:P,onAnimationStart:R,key:E},U=>{var G=Pt(K,I+K,U),V=Math.min(G,I),M;if(m)if(d){var k="".concat(d).split(/[,\s]+/gim).map(B=>parseFloat(B));M=lV(V,I,k)}else M=LM(I,V);else M=d==null?void 0:String(d);if(U>0&&I>0&&(l.current=u,o.current=Math.max(o.current,V)),w){var J=w.length/u.length,Q=U===1?u:u.map((B,q)=>{var fe=Math.floor(q*J);if(w[fe]){var te=w[fe];return Zn(Zn({},B),{},{x:Pt(te.x,B.x,U),y:Pt(te.y,B.y,U)})}return b?Zn(Zn({},B),{},{x:Pt(g*2,B.x,U),y:Pt(_/2,B.y,U)}):Zn(Zn({},B),{},{x:B.x,y:B.y})});return l.current=Q,y.createElement(t2,{props:n,points:Q,clipPathId:t,pathRef:a,strokeDasharray:M})}return y.createElement(t2,{props:n,points:u,clipPathId:t,pathRef:a,strokeDasharray:M})}),y.createElement(fM,{label:n.label}))}function fV(e){var{clipPathId:t,props:n}=e,a=y.useRef(null),l=y.useRef(0),o=y.useRef(null);return y.createElement(dV,{props:n,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var mV=(e,t)=>{var n,a;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Qt(e.payload,t)}};class pV extends y.Component{render(){var{hide:t,dot:n,points:a,className:l,xAxisId:o,yAxisId:u,top:d,left:m,width:p,height:h,id:v,needClip:b,zIndex:g}=this.props;if(t)return null;var _=pt("recharts-line",l),j=v,{r:S,strokeWidth:w}=OQ(n),E=vM(n),C=S*2+w,A=b?"url(#clipPath-".concat(E?"":"dots-").concat(j,")"):void 0;return y.createElement(En,{zIndex:g},y.createElement(_n,{className:_},b&&y.createElement("defs",null,y.createElement(kM,{clipPathId:j,xAxisId:o,yAxisId:u}),!E&&y.createElement("clipPath",{id:"clipPath-dots-".concat(j)},y.createElement("rect",{x:m-C/2,y:d-C/2,width:p+C,height:h+C}))),y.createElement(TM,{xAxisId:o,yAxisId:u,data:a,dataPointFormatter:mV,errorBarOffset:0},y.createElement(fV,{props:this.props,clipPathId:j}))),y.createElement(pH,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var $M={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ar.line,type:"linear"};function hV(e){var t=zr(e,$M),{activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:m,hide:p,isAnimationActive:h,label:v,legendType:b,xAxisId:g,yAxisId:_,id:j}=t,S=Xb(t,JQ),{needClip:w}=Kb(g,_),E=Qb(),C=qs(),A=Nr(),O=ze(L=>zQ(L,g,_,A,j));if(C!=="horizontal"&&C!=="vertical"||O==null||E==null)return null;var{height:T,width:P,x:R,y:I}=E;return y.createElement(pV,$c({},S,{id:j,connectNulls:d,dot:m,activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:h,hide:p,label:v,legendType:b,xAxisId:g,yAxisId:_,points:O,layout:C,height:T,width:P,left:R,top:I,needClip:w}))}function vV(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:d,displayedData:m}=e;return m.map((p,h)=>{var v=Qt(p,u);if(t==="horizontal"){var b=$S({axis:n,ticks:l,bandSize:d,entry:p,index:h}),g=zt(v)?null:a.scale.map(v);return{x:b,y:g??null,value:v,payload:p}}var _=zt(v)?null:n.scale.map(v),j=$S({axis:a,ticks:o,bandSize:d,entry:p,index:h});return _==null||j==null?null:{x:_,y:j,value:v,payload:p}}).filter(Boolean)}function gV(e){var t=zr(e,$M),n=Nr();return y.createElement(_M,{id:t.id,type:"line"},a=>y.createElement(y.Fragment,null,y.createElement(NM,{legendPayload:aV(t)}),y.createElement(iV,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),y.createElement(wM,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),y.createElement(hV,$c({},t,{id:a}))))}var BM=y.memo(gV,Wm);BM.displayName="Line";function Ls(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&n!==void 0?n:CM}function $s(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&n!==void 0?n:CM}var xV="Invariant failed";function yV(e,t){throw new Error(xV)}function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ly.apply(null,arguments)}function Yf(e){return y.createElement(gM,ly({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var bV=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(Se(t))return t;var o=Se(a)||zt(a);return o?t(a,l):(o||yV(),n)}},jV=(e,t,n)=>n,NV=(e,t)=>t,su=se([Qm,NV],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),_V=se([su],e=>e?.maxBarSize),SV=(e,t,n,a)=>a,wV=se([ot,Qm,Ls,$s,jV],(e,t,n,a,l)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),CV=(e,t,n)=>{var a=ot(e),l=Ls(e,t),o=$s(e,t);if(!(l==null||o==null))return a==="horizontal"?Jx(e,"yAxis",o,n):Jx(e,"xAxis",l,n)},AV=(e,t)=>{var n=ot(e),a=Ls(e,t),l=$s(e,t);if(!(a==null||l==null))return n==="horizontal"?BC(e,"xAxis",a):BC(e,"yAxis",l)},EV=se([wV,O7,AV],hH),zV=(e,t,n)=>{var a,l,o=su(e,t);if(o==null)return 0;var u=Ls(e,t),d=$s(e,t);if(u==null||d==null)return 0;var m=ot(e),p=OO(e),{maxBarSize:h}=o,v=zt(h)?p:h,b,g;return m==="horizontal"?(b=Bi(e,"xAxis",u,n),g=$i(e,"xAxis",u,n)):(b=Bi(e,"yAxis",d,n),g=$i(e,"yAxis",d,n)),(a=(l=Vl(b,g,!0))!==null&&l!==void 0?l:v)!==null&&a!==void 0?a:0},UM=(e,t,n)=>{var a=ot(e),l=Ls(e,t),o=$s(e,t);if(!(l==null||o==null)){var u,d;return a==="horizontal"?(u=Bi(e,"xAxis",l,n),d=$i(e,"xAxis",l,n)):(u=Bi(e,"yAxis",o,n),d=$i(e,"yAxis",o,n)),Vl(u,d)}},OV=se([EV,OO,z7,DO,zV,UM,_V],bH),DV=(e,t,n)=>{var a=Ls(e,t);if(a!=null)return Bi(e,"xAxis",a,n)},MV=(e,t,n)=>{var a=$s(e,t);if(a!=null)return Bi(e,"yAxis",a,n)},TV=(e,t,n)=>{var a=Ls(e,t);if(a!=null)return $i(e,"xAxis",a,n)},kV=(e,t,n)=>{var a=$s(e,t);if(a!=null)return $i(e,"yAxis",a,n)},PV=se([OV,su],NH),qV=se([CV,su],jH),RV=se([ir,$y,DV,MV,TV,kV,PV,ot,j7,UM,qV,su,SV],(e,t,n,a,l,o,u,d,m,p,h,v,b)=>{var{chartData:g,dataStartIndex:_,dataEndIndex:j}=m;if(!(v==null||u==null||t==null||d!=="horizontal"&&d!=="vertical"||n==null||a==null||l==null||o==null||p==null)){var{data:S}=v,w;if(S!=null&&S.length>0?w=S:w=g?.slice(_,j+1),w!=null)return dY({layout:d,barSettings:v,pos:u,parentViewBox:t,bandSize:p,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:h,displayedData:w,offset:e,cells:b,dataStartIndex:_})}}),IV=["index"];function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oy.apply(null,arguments)}function LV(e,t){if(e==null)return{};var n,a,l=$V(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function $V(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var FM=y.createContext(void 0),BV=e=>{var t=y.useContext(FM);if(t!=null)return t.stackId;if(e!=null)return S4(e)},UV=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),FV=e=>{var t=y.useContext(FM);if(t!=null){var{stackId:n}=t;return"url(#".concat(UV(n,e),")")}},GM=e=>{var{index:t}=e,n=LV(e,IV),a=FV(t);return y.createElement(_n,oy({className:"recharts-bar-stack-layer",clipPath:a},n))},GV=["onMouseEnter","onMouseLeave","onClick"],HV=["value","background","tooltipPosition"],QV=["id"],VV=["onMouseEnter","onClick","onMouseLeave"];function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fa.apply(null,arguments)}function r2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r2(Object(n),!0).forEach(function(a){YV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YV(e,t,n){return(t=KV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KV(e){var t=XV(e,"string");return typeof t=="symbol"?t:t+""}function XV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kf(e,t){if(e==null)return{};var n,a,l=WV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function WV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var ZV=e=>{var{dataKey:t,name:n,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:bm(n,t),payload:e}]},JV=y.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:a,fill:l,name:o,hide:u,unit:d,tooltipType:m,id:p}=e,h={dataDefinedOnItem:void 0,getPosition:Ps,settings:{stroke:n,strokeWidth:a,fill:l,dataKey:t,nameKey:void 0,name:bm(o,t),hide:u,type:m,color:l,unit:d,graphicalItemId:p}};return y.createElement(jM,{tooltipEntrySettings:h})});function eY(e){var t=ze(Ms),{data:n,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:d,onClick:m}=o,p=Kf(o,GV),h=xM(u,a,o.id),v=yM(d),b=bM(m,a,o.id);if(!l||n==null)return null;var g=Fc(l);return y.createElement(En,{zIndex:_H(l,ar.barBackground)},n.map((_,j)=>{var{value:S,background:w,tooltipPosition:E}=_,C=Kf(_,HV);if(!w)return null;var A=h(_,j),O=v(_,j),T=b(_,j),P=wr(wr(wr(wr(wr({option:l,isActive:String(j)===t},C),{},{fill:"#eee"},w),g),Oy(p,_,j)),{},{onMouseEnter:A,onMouseLeave:O,onClick:T,dataKey:a,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(Yf,Fa({key:"background-bar-".concat(j)},P))}))}function tY(e){var{showLabels:t,children:n,rects:a}=e,l=a?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return wr(wr({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return y.createElement(uM,{value:t?l:void 0},n)}function rY(e){var{shape:t,activeBar:n,baseProps:a,entry:l,index:o,dataKey:u}=e,d=ze(Ms),m=ze(UD),p=n&&String(o)===d&&(m==null||u===m),h=p?n:t;return p?y.createElement(En,{zIndex:ar.activeBar},y.createElement(GM,{index:o},y.createElement(Yf,Fa({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u})))):y.createElement(Yf,Fa({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u}))}function nY(e){var{shape:t,baseProps:n,entry:a,index:l,dataKey:o}=e;return y.createElement(Yf,Fa({},n,{name:String(n.name)},a,{isActive:!1,option:t,index:l,dataKey:o}))}function aY(e){var t,{data:n,props:a}=e,l=(t=Rn(a))!==null&&t!==void 0?t:{},{id:o}=l,u=Kf(l,QV),{shape:d,dataKey:m,activeBar:p}=a,{onMouseEnter:h,onClick:v,onMouseLeave:b}=a,g=Kf(a,VV),_=xM(h,m,o),j=yM(b),S=bM(v,m,o);return n?y.createElement(y.Fragment,null,n.map((w,E)=>y.createElement(GM,Fa({index:E,key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(E),className:"recharts-bar-rectangle"},Oy(g,w,E),{onMouseEnter:_(w,E),onMouseLeave:j(w,E),onClick:S(w,E)}),p?y.createElement(rY,{shape:d,activeBar:p,baseProps:u,entry:w,index:E,dataKey:m}):y.createElement(nY,{shape:d,baseProps:u,entry:w,index:E,dataKey:m})))):null}function iY(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:u,animationDuration:d,animationEasing:m,onAnimationEnd:p,onAnimationStart:h}=t,v=n.current,b=Dm(t,"recharts-bar-"),[g,_]=y.useState(!1),j=!g,S=y.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),w=y.useCallback(()=>{typeof h=="function"&&h(),_(!0)},[h]);return y.createElement(tY,{showLabels:j,rects:a},y.createElement(Om,{animationId:b,begin:u,duration:d,isActive:o,easing:m,onAnimationEnd:S,onAnimationStart:w,key:b},E=>{var C=E===1?a:a?.map((A,O)=>{var T=v&&v[O];if(T)return wr(wr({},A),{},{x:Pt(T.x,A.x,E),y:Pt(T.y,A.y,E),width:Pt(T.width,A.width,E),height:Pt(T.height,A.height,E)});if(l==="horizontal"){var P=Pt(0,A.height,E),R=Pt(A.stackedBarStart,A.y,E);return wr(wr({},A),{},{y:R,height:P})}var I=Pt(0,A.width,E),L=Pt(A.stackedBarStart,A.x,E);return wr(wr({},A),{},{width:I,x:L})});return E>0&&(n.current=C??null),C==null?null:y.createElement(_n,null,y.createElement(aY,{props:t,data:C}))}),y.createElement(fM,{label:t.label}),t.children)}function sY(e){var t=y.useRef(null);return y.createElement(iY,{previousRectanglesRef:t,props:e})}var HM=0,lY=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Qt(e,t)}};class oY extends y.PureComponent{render(){var{hide:t,data:n,dataKey:a,className:l,xAxisId:o,yAxisId:u,needClip:d,background:m,id:p}=this.props;if(t||n==null)return null;var h=pt("recharts-bar",l),v=p;return y.createElement(_n,{className:h,id:p},d&&y.createElement("defs",null,y.createElement(kM,{clipPathId:v,xAxisId:o,yAxisId:u})),y.createElement(_n,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(v,")"):void 0},y.createElement(eY,{data:n,dataKey:a,background:m,allOtherBarProps:this.props}),y.createElement(sY,this.props)))}}var cY={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:HM,xAxisId:0,yAxisId:0,zIndex:ar.bar};function uY(e){var{xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h}=e,{needClip:v}=Kb(t,n),b=qs(),g=Nr(),_=dG(e.children,Fb),j=ze(E=>RV(E,e.id,g,_));if(b!=="vertical"&&b!=="horizontal")return null;var S,w=j?.[0];return w==null||w.height==null||w.width==null?S=0:S=b==="vertical"?w.height/2:w.width/2,y.createElement(TM,{xAxisId:t,yAxisId:n,data:j,dataPointFormatter:lY,errorBarOffset:S},y.createElement(oY,Fa({},e,{layout:b,needClip:v,data:j,xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h})))}function dY(e){var{layout:t,barSettings:{dataKey:n,minPointSize:a},pos:l,bandSize:o,xAxis:u,yAxis:d,xAxisTicks:m,yAxisTicks:p,stackedData:h,displayedData:v,offset:b,cells:g,parentViewBox:_,dataStartIndex:j}=e,S=t==="horizontal"?d:u,w=h?S.scale.domain():null,E=w4({numericAxis:S}),C=S.scale.map(E);return v.map((A,O)=>{var T,P,R,I,L,K;if(h){var U=h[O+j];if(U==null)return null;T=y4(U,w)}else T=Qt(A,n),Array.isArray(T)||(T=[E,T]);var G=bV(a,HM)(T[1],O);if(t==="horizontal"){var V,M=d.scale.map(T[0]),k=d.scale.map(T[1]);if(M==null||k==null)return null;P=BS({axis:u,ticks:m,bandSize:o,offset:l.offset,entry:A,index:O}),R=(V=k??M)!==null&&V!==void 0?V:void 0,I=l.size;var J=M-k;if(L=ra(J)?0:J,K={x:P,y:b.top,width:I,height:b.height},Math.abs(G)>0&&Math.abs(L)<Math.abs(G)){var Q=Ir(L||G)*(Math.abs(G)-Math.abs(L));R-=Q,L+=Q}}else{var B=u.scale.map(T[0]),q=u.scale.map(T[1]);if(B==null||q==null)return null;if(P=B,R=BS({axis:d,ticks:p,bandSize:o,offset:l.offset,entry:A,index:O}),I=q-B,L=l.size,K={x:b.left,y:R,width:b.width,height:L},Math.abs(G)>0&&Math.abs(I)<Math.abs(G)){var fe=Ir(I||G)*(Math.abs(G)-Math.abs(I));I+=fe}}if(P==null||R==null||I==null||L==null)return null;var te=wr(wr({},A),{},{stackedBarStart:C,x:P,y:R,width:I,height:L,value:h?T:T[1],payload:A,background:K,tooltipPosition:{x:P+I/2,y:R+L/2},parentViewBox:_},g&&g[O]&&g[O].props);return te}).filter(Boolean)}function fY(e){var t=zr(e,cY),n=BV(t.stackId),a=Nr();return y.createElement(_M,{id:t.id,type:"bar"},l=>y.createElement(y.Fragment,null,y.createElement(NM,{legendPayload:ZV(t)}),y.createElement(JV,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),y.createElement(wM,{type:"bar",id:l,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),y.createElement(En,{zIndex:t.zIndex},y.createElement(uY,Fa({},t,{id:l})))))}var QM=y.memo(fY,Wm);QM.displayName="Bar";var mY=["domain","range"],pY=["domain","range"];function n2(e,t){if(e==null)return{};var n,a,l=hY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function hY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function a2(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function VM(e,t){if(e===t)return!0;var{domain:n,range:a}=e,l=n2(e,mY),{domain:o,range:u}=t,d=n2(t,pY);return!a2(n,o)||!a2(a,u)?!1:Wm(l,d)}var vY=["type"],gY=["dangerouslySetInnerHTML","ticks","scale"],xY=["id","scale"];function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cy.apply(null,arguments)}function i2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function s2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(n),!0).forEach(function(a){yY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yY(e,t,n){return(t=bY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bY(e){var t=jY(e,"string");return typeof t=="symbol"?t:t+""}function jY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uy(e,t){if(e==null)return{};var n,a,l=NY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function NY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function _Y(e){var t=$t(),n=y.useRef(null),a=yz(),{type:l}=e,o=uy(e,vY),u=$m(a,"xAxis",l),d=y.useMemo(()=>{if(u!=null)return s2(s2({},o),{},{type:u})},[o,u]);return y.useLayoutEffect(()=>{d!=null&&(n.current===null?t(JG(d)):n.current!==d&&t(eH({prev:n.current,next:d})),n.current=d)},[d,t]),y.useLayoutEffect(()=>()=>{n.current&&(t(tH(n.current)),n.current=null)},[t]),null}var SY=e=>{var{xAxisId:t,className:n}=e,a=ze($y),l=Nr(),o="xAxis",u=ze(w=>jD(w,o,t,l)),d=ze(w=>gD(w,t)),m=ze(w=>DB(w,t)),p=ze(w=>$O(w,t));if(d==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:h,ticks:v,scale:b}=e,g=uy(e,gY),{id:_,scale:j}=p,S=uy(p,xY);return y.createElement(Yb,cy({},g,S,{x:m.x,y:m.y,width:d.width,height:d.height,className:pt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:u,axisType:o}))},wY={allowDataOverflow:tr.allowDataOverflow,allowDecimals:tr.allowDecimals,allowDuplicatedCategory:tr.allowDuplicatedCategory,angle:tr.angle,axisLine:Pa.axisLine,height:tr.height,hide:!1,includeHidden:tr.includeHidden,interval:tr.interval,label:!1,minTickGap:tr.minTickGap,mirror:tr.mirror,orientation:tr.orientation,padding:tr.padding,reversed:tr.reversed,scale:tr.scale,tick:tr.tick,tickCount:tr.tickCount,tickLine:Pa.tickLine,tickSize:Pa.tickSize,type:tr.type,xAxisId:0},CY=e=>{var t=zr(e,wY);return y.createElement(y.Fragment,null,y.createElement(_Y,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(SY,t))},dy=y.memo(CY,VM);dy.displayName="XAxis";var AY=["type"],EY=["dangerouslySetInnerHTML","ticks","scale"],zY=["id","scale"];function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fy.apply(null,arguments)}function l2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function o2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(n),!0).forEach(function(a){OY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function OY(e,t,n){return(t=DY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DY(e){var t=MY(e,"string");return typeof t=="symbol"?t:t+""}function MY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function my(e,t){if(e==null)return{};var n,a,l=TY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function TY(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function kY(e){var t=$t(),n=y.useRef(null),a=yz(),{type:l}=e,o=my(e,AY),u=$m(a,"yAxis",l),d=y.useMemo(()=>{if(u!=null)return o2(o2({},o),{},{type:u})},[u,o]);return y.useLayoutEffect(()=>{d!=null&&(n.current===null?t(rH(d)):n.current!==d&&t(nH({prev:n.current,next:d})),n.current=d)},[d,t]),y.useLayoutEffect(()=>()=>{n.current&&(t(aH(n.current)),n.current=null)},[t]),null}function PY(e){var{yAxisId:t,className:n,width:a,label:l}=e,o=y.useRef(null),u=y.useRef(null),d=ze($y),m=Nr(),p=$t(),h="yAxis",v=ze(T=>xD(T,t)),b=ze(T=>TB(T,t)),g=ze(T=>jD(T,h,t,m)),_=ze(T=>BO(T,t));if(y.useLayoutEffect(()=>{if(!(a!=="auto"||!v||Hb(l)||y.isValidElement(l)||_==null)){var T=o.current;if(T){var P=T.getCalculatedWidth();Math.round(v.width)!==Math.round(P)&&p(iH({id:t,width:P}))}}},[g,v,p,l,t,a,_]),v==null||b==null||_==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:w}=e,E=my(e,EY),{id:C,scale:A}=_,O=my(_,zY);return y.createElement(Yb,fy({},E,O,{ref:o,labelRef:u,x:b.x,y:b.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:v.width,height:v.height,className:pt("recharts-".concat(h," ").concat(h),n),viewBox:d,ticks:g,axisType:h}))}var qY={allowDataOverflow:rr.allowDataOverflow,allowDecimals:rr.allowDecimals,allowDuplicatedCategory:rr.allowDuplicatedCategory,angle:rr.angle,axisLine:Pa.axisLine,hide:!1,includeHidden:rr.includeHidden,interval:rr.interval,label:!1,minTickGap:rr.minTickGap,mirror:rr.mirror,orientation:rr.orientation,padding:rr.padding,reversed:rr.reversed,scale:rr.scale,tick:rr.tick,tickCount:rr.tickCount,tickLine:Pa.tickLine,tickSize:Pa.tickSize,type:rr.type,width:rr.width,yAxisId:0},RY=e=>{var t=zr(e,qY);return y.createElement(y.Fragment,null,y.createElement(kY,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(PY,t))},py=y.memo(RY,VM);py.displayName="YAxis";var IY=(e,t)=>t,Wb=se([IY,ot,IO,or,ID,ei,Y9,ir],tU),Zb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},YM=Sn("mouseClick"),KM=Qc();KM.startListening({actionCreator:YM,effect:(e,t)=>{var n=e.payload,a=Wb(t.getState(),Zb(n));a?.activeIndex!=null&&t.dispatch(VB({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var hy=Sn("mouseMove"),XM=Qc(),$d=null;XM.startListening({actionCreator:hy,effect:(e,t)=>{var n=e.payload;$d!==null&&cancelAnimationFrame($d);var a=Zb(n);$d=requestAnimationFrame(()=>{var l=t.getState(),o=Tb(l,l.tooltip.settings.shared);if(o==="axis"){var u=Wb(l,a);u?.activeIndex!=null?t.dispatch(zD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(ED())}$d=null})}});function LY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var c2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},WM=Fr({name:"rootProps",initialState:c2,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:c2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),$Y=WM.reducer,{updateOptions:BY}=WM.actions,UY=null,FY={updatePolarOptions:(e,t)=>t.payload},ZM=Fr({name:"polarOptions",initialState:UY,reducers:FY}),{updatePolarOptions:pJ}=ZM.actions,GY=ZM.reducer,JM=Sn("keyDown"),eT=Sn("focus"),Jb=Qc();Jb.startListening({actionCreator:JM,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=kb(l,so(n),ru(n),au(n)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var m=ei(n);if(o==="Enter"){var p=Uf(n,"axis","hover",String(l.index));t.dispatch(ty({active:!l.active,activeIndex:l.index,activeCoordinate:p}));return}var h=RB(n),v=h==="left-to-right"?1:-1,b=o==="ArrowRight"?1:-1,g=d+b*v;if(!(m==null||g>=m.length||g<0)){var _=Uf(n,"axis","hover",String(g));t.dispatch(ty({active:!0,activeIndex:g.toString(),activeCoordinate:_}))}}}}}});Jb.startListening({actionCreator:eT,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var o="0",u=Uf(n,"axis","hover",String(o));t.dispatch(ty({active:!0,activeIndex:o,activeCoordinate:u}))}}}});var yn=Sn("externalEvent"),tT=Qc(),ox=new Map;tT.startListening({actionCreator:yn,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var l=a.type,o=ox.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var d=t.getState(),m={activeCoordinate:M9(d),activeDataKey:UD(d),activeIndex:Ms(d),activeLabel:BD(d),activeTooltipIndex:Ms(d),isTooltipActive:T9(d)};n(m,a)}finally{ox.delete(l)}});ox.set(l,u)}}});var HY=se([ao],e=>e.tooltipItemPayloads),QY=se([HY,(e,t)=>t,(e,t,n)=>n],(e,t,n)=>{if(t!=null){var a=e.find(o=>o.settings.graphicalItemId===n);if(a!=null){var{getPosition:l}=a;if(l!=null)return l(t)}}}),rT=Sn("touchMove"),nT=Qc();nT.startListening({actionCreator:rT,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=t.getState(),l=Tb(a,a.tooltip.settings.shared);if(l==="axis"){var o=n.touches[0];if(o==null)return;var u=Wb(a,Zb({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));u?.activeIndex!=null&&t.dispatch(zD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(l==="item"){var d,m=n.touches[0];if(document.elementFromPoint==null||m==null)return;var p=document.elementFromPoint(m.clientX,m.clientY);if(!p||!p.getAttribute)return;var h=p.getAttribute(M4),v=(d=p.getAttribute(T4))!==null&&d!==void 0?d:void 0,b=io(a).find(j=>j.id===v);if(h==null||b==null||v==null)return;var{dataKey:g}=b,_=QY(a,h,v);t.dispatch(AD({activeDataKey:g,activeIndex:h,activeCoordinate:_,activeGraphicalItemId:v}))}}}});var VY=PE({brush:wH,cartesianAxis:sH,chartData:MU,errorBars:yQ,graphicalItems:IG,layout:p4,legend:SI,options:AU,polarAxis:sG,polarOptions:GY,referenceElements:zH,rootProps:$Y,tooltip:YB,zIndex:hU}),YY=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return L6({reducer:VY,preloadedState:t,middleware:a=>{var l;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([KM.middleware,XM.middleware,Jb.middleware,tT.middleware,nT.middleware])},enhancers:a=>{var l=a;return typeof a=="function"&&(l=a()),l.concat(XE({type:"raf"}))},devTools:{serialize:{replacer:LY},name:"recharts-".concat(n)}})};function KY(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,l=Nr(),o=y.useRef(null);if(l)return n;o.current==null&&(o.current=YY(t,a));var u=Ty;return y.createElement(YQ,{context:u,store:o.current},n)}function XY(e){var{layout:t,margin:n}=e,a=$t(),l=Nr();return y.useEffect(()=>{l||(a(d4(t)),a(u4(n)))},[a,l,t,n]),null}var WY=y.memo(XY,Wm);function ZY(e){var t=$t();return y.useEffect(()=>{t(BY(e))},[t,e]),null}function u2(e){var{zIndex:t,isPanorama:n}=e,a=y.useRef(null),l=$t();return y.useLayoutEffect(()=>(a.current&&l(mU({zIndex:t,element:a.current,isPanorama:n})),()=>{l(pU({zIndex:t,isPanorama:n}))}),[l,t,n]),y.createElement("g",{tabIndex:-1,ref:a})}function d2(e){var{children:t,isPanorama:n}=e,a=ze(nU);if(!a||a.length===0)return t;var l=a.filter(u=>u<0),o=a.filter(u=>u>0);return y.createElement(y.Fragment,null,l.map(u=>y.createElement(u2,{key:u,zIndex:u,isPanorama:n})),t,o.map(u=>y.createElement(u2,{key:u,zIndex:u,isPanorama:n})))}var JY=["children"];function eK(e,t){if(e==null)return{};var n,a,l=tK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function tK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Xf(){return Xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xf.apply(null,arguments)}var rK={width:"100%",height:"100%",display:"block"},nK=y.forwardRef((e,t)=>{var n=gz(),a=xz(),l=Ez();if(!aa(n)||!aa(a))return null;var{children:o,otherAttributes:u,title:d,desc:m}=e,p,h;return u!=null&&(typeof u.tabIndex=="number"?p=u.tabIndex:p=l?0:void 0,typeof u.role=="string"?h=u.role:h=l?"application":void 0),y.createElement(J2,Xf({},u,{title:d,desc:m,role:h,tabIndex:p,width:n,height:a,style:rK,ref:t}),o)}),aK=e=>{var{children:t}=e,n=ze(Sm);if(!n)return null;var{width:a,height:l,y:o,x:u}=n;return y.createElement(J2,{width:a,height:l,x:u,y:o},t)},f2=y.forwardRef((e,t)=>{var{children:n}=e,a=eK(e,JY),l=Nr();return l?y.createElement(aK,null,y.createElement(d2,{isPanorama:!0},n)):y.createElement(nK,Xf({ref:t},a),y.createElement(d2,{isPanorama:!1},n))});function iK(){var e=$t(),[t,n]=y.useState(null),a=ze(D4);return y.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;We(o)&&o!==a&&e(m4(o))}},[t,e,a]),n}function m2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(n),!0).forEach(function(a){lK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function lK(e,t,n){return(t=oK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oK(e){var t=cK(e,"string");return typeof t=="symbol"?t:t+""}function cK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pi(){return Pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pi.apply(null,arguments)}var uK=()=>(BU(),null);function Wf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var dK=y.forwardRef((e,t)=>{var n,a,l=y.useRef(null),[o,u]=y.useState({containerWidth:Wf((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Wf((a=e.style)===null||a===void 0?void 0:a.height)}),d=y.useCallback((p,h)=>{u(v=>{var b=Math.round(p),g=Math.round(h);return v.containerWidth===b&&v.containerHeight===g?v:{containerWidth:b,containerHeight:g}})},[]),m=y.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null&&typeof ResizeObserver<"u"){var{width:h,height:v}=p.getBoundingClientRect();d(h,v);var b=_=>{var j=_[0];if(j!=null){var{width:S,height:w}=j.contentRect;d(S,w)}},g=new ResizeObserver(b);g.observe(p),l.current=g}},[t,d]);return y.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[d]),y.createElement(y.Fragment,null,y.createElement(Yc,{width:o.containerWidth,height:o.containerHeight}),y.createElement("div",Pi({ref:m},e)))}),fK=y.forwardRef((e,t)=>{var{width:n,height:a}=e,[l,o]=y.useState({containerWidth:Wf(n),containerHeight:Wf(a)}),u=y.useCallback((m,p)=>{o(h=>{var v=Math.round(m),b=Math.round(p);return h.containerWidth===v&&h.containerHeight===b?h:{containerWidth:v,containerHeight:b}})},[]),d=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:p,height:h}=m.getBoundingClientRect();u(p,h)}},[t,u]);return y.createElement(y.Fragment,null,y.createElement(Yc,{width:l.containerWidth,height:l.containerHeight}),y.createElement("div",Pi({ref:d},e)))}),mK=y.forwardRef((e,t)=>{var{width:n,height:a}=e;return y.createElement(y.Fragment,null,y.createElement(Yc,{width:n,height:a}),y.createElement("div",Pi({ref:t},e)))}),pK=y.forwardRef((e,t)=>{var{width:n,height:a}=e;return typeof n=="string"||typeof a=="string"?y.createElement(fK,Pi({},e,{ref:t})):typeof n=="number"&&typeof a=="number"?y.createElement(mK,Pi({},e,{width:n,height:a,ref:t})):y.createElement(y.Fragment,null,y.createElement(Yc,{width:n,height:a}),y.createElement("div",Pi({ref:t},e)))});function hK(e){return e?dK:pK}var vK=y.forwardRef((e,t)=>{var{children:n,className:a,height:l,onClick:o,onContextMenu:u,onDoubleClick:d,onMouseDown:m,onMouseEnter:p,onMouseLeave:h,onMouseMove:v,onMouseUp:b,onTouchEnd:g,onTouchMove:_,onTouchStart:j,style:S,width:w,responsive:E,dispatchTouchEvents:C=!0}=e,A=y.useRef(null),O=$t(),[T,P]=y.useState(null),[R,I]=y.useState(null),L=iK(),K=By(),U=K?.width>0?K.width:w,G=K?.height>0?K.height:l,V=y.useCallback(le=>{L(le),typeof t=="function"&&t(le),P(le),I(le),le!=null&&(A.current=le)},[L,t,P,I]),M=y.useCallback(le=>{O(YM(le)),O(yn({handler:o,reactEvent:le}))},[O,o]),k=y.useCallback(le=>{O(hy(le)),O(yn({handler:p,reactEvent:le}))},[O,p]),J=y.useCallback(le=>{O(ED()),O(yn({handler:h,reactEvent:le}))},[O,h]),Q=y.useCallback(le=>{O(hy(le)),O(yn({handler:v,reactEvent:le}))},[O,v]),B=y.useCallback(()=>{O(eT())},[O]),q=y.useCallback(le=>{O(JM(le.key))},[O]),fe=y.useCallback(le=>{O(yn({handler:u,reactEvent:le}))},[O,u]),te=y.useCallback(le=>{O(yn({handler:d,reactEvent:le}))},[O,d]),ue=y.useCallback(le=>{O(yn({handler:m,reactEvent:le}))},[O,m]),he=y.useCallback(le=>{O(yn({handler:b,reactEvent:le}))},[O,b]),xe=y.useCallback(le=>{O(yn({handler:j,reactEvent:le}))},[O,j]),H=y.useCallback(le=>{C&&O(rT(le)),O(yn({handler:_,reactEvent:le}))},[O,C,_]),pe=y.useCallback(le=>{O(yn({handler:g,reactEvent:le}))},[O,g]),Ee=hK(E);return y.createElement(KD.Provider,{value:T},y.createElement(y3.Provider,{value:R},y.createElement(Ee,{width:U??S?.width,height:G??S?.height,className:pt("recharts-wrapper",a),style:sK({position:"relative",cursor:"default",width:U,height:G},S),onClick:M,onContextMenu:fe,onDoubleClick:te,onFocus:B,onKeyDown:q,onMouseDown:ue,onMouseEnter:k,onMouseLeave:J,onMouseMove:Q,onMouseUp:he,onTouchEnd:pe,onTouchMove:H,onTouchStart:xe,ref:V},y.createElement(uK,null),n)))}),gK=["width","height","responsive","children","className","style","compact","title","desc"];function xK(e,t){if(e==null)return{};var n,a,l=yK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function yK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var bK=y.forwardRef((e,t)=>{var{width:n,height:a,responsive:l,children:o,className:u,style:d,compact:m,title:p,desc:h}=e,v=xK(e,gK),b=Rn(v);return m?y.createElement(y.Fragment,null,y.createElement(Yc,{width:n,height:a}),y.createElement(f2,{otherAttributes:b,title:p,desc:h},o)):y.createElement(vK,{className:u,style:d,width:n,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(f2,{otherAttributes:b,title:p,desc:h,ref:t},y.createElement(DH,null,o)))});function vy(){return vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vy.apply(null,arguments)}var jK={top:5,right:5,bottom:5,left:5},NK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:jK,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},aT=y.forwardRef(function(t,n){var a,l=zr(t.categoricalChartProps,NK),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,categoricalChartProps:p}=t,h={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(KY,{preloadedState:{options:h},reduxStoreName:(a=p.id)!==null&&a!==void 0?a:o},y.createElement(SH,{chartData:p.data}),y.createElement(WY,{layout:l.layout,margin:l.margin}),y.createElement(ZY,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),y.createElement(bK,vy({},l,{ref:n})))}),_K=["axis"],SK=y.forwardRef((e,t)=>y.createElement(aT,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_K,tooltipPayloadSearcher:XD,categoricalChartProps:e,ref:t})),wK=["axis","item"],CK=y.forwardRef((e,t)=>y.createElement(aT,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wK,tooltipPayloadSearcher:XD,categoricalChartProps:e,ref:t}));const AK=8,EK=12,zK=14,OK=1;function e0(e){return e instanceof Le?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function p2(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function Zm(){const e=new Date,t=e.getDay(),n=t===0?-6:1-t,a=new Date(e);return a.setDate(e.getDate()+n),a.setHours(0,0,0,0),a}function DK(){const e=Zm(),t=new Date(e);return t.setDate(e.getDate()+6),t.setHours(23,59,59,999),t}function cx(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function Jm(e){try{const t=Re(be(ie,"quiz_results"),Ce("userId","==",e),Je("datePassage","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){return console.error("Erreur rcupration rsultats lve:",t),[]}}async function MK(e){try{const t=await Jm(e);if(t.length===0)return[];const n=new Map;t.forEach(o=>{const u=o.disciplineId;n.has(u)||n.set(u,[]),n.get(u).push(o)});const a=[];n.forEach((o,u)=>{if(o.length<OK)return;const d=o.map(S=>S.pourcentage/100*20),m=d.reduce((S,w)=>S+w,0)/d.length;if(m>=zK)return;let p="stable";if(d.length>=3){const S=d.slice(0,2),w=d.slice(2,4),E=S.reduce((O,T)=>O+T,0)/S.length,C=w.reduce((O,T)=>O+T,0)/w.length,A=E-C;A>1.5?p="hausse":A<-1.5&&(p="baisse")}let h="modere";m<AK?h="critique":m<EK&&(h="important");const v=d[0],b=Math.max(...d),g=Math.min(...d),_=e0(o[0].datePassage),j=o[0].disciplineNom||"Discipline inconnue";a.push({id:`lacune_${u}`,disciplineId:u,disciplineNom:j,moyenne:Math.round(m*10)/10,nombreQuiz:o.length,tendance:p,niveauUrgence:h,dernierQuizDate:_,scoreDetails:{dernierScore:Math.round(v*10)/10,meilleurScore:Math.round(b*10)/10,pireScore:Math.round(g*10)/10}})});const l={critique:0,important:1,modere:2};return a.sort((o,u)=>{const d=l[o.niveauUrgence]-l[u.niveauUrgence];return d!==0?d:o.moyenne-u.moyenne}),a}catch(t){return console.error("Erreur dtection lacunes:",t),[]}}function TK(e){const t=[];let n=1;return e.forEach(a=>{const{id:l,disciplineNom:o,niveauUrgence:u,moyenne:d,tendance:m}=a;switch(u){case"critique":t.push({id:`reco_cours_${l}`,lacuneId:l,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${d}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),t.push({id:`reco_quiz_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":t.push({id:`reco_exercice_${l}`,lacuneId:l,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${d}/20 de moyenne, concentre-toi sur les exercices pratiques. ${m==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),t.push({id:`reco_cours2_${l}`,lacuneId:l,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":t.push({id:`reco_consolider_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${d}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break}}),t}async function kK(e){try{const t=await Jm(e);if(t.length===0)return{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;t.forEach(j=>{const S=e0(j.datePassage),w=`${S.getFullYear()}-${S.getMonth()}-${S.getDate()}`;n.add(w)});const a=Array.from(n).map(j=>{const[S,w,E]=j.split("-").map(Number);return new Date(S,w,E)}).sort((j,S)=>S.getTime()-j.getTime()),l=a.length,o=a[0];let u=0;const d=new Date;d.setHours(0,0,0,0);const m=a[0];if(cx(m,d)<=1){u=1;for(let j=1;j<a.length&&cx(a[j],a[j-1])===1;j++)u++}let h=0,v=1;for(let j=1;j<a.length;j++)cx(a[j],a[j-1])===1?v++:(h=Math.max(h,v),v=1);h=Math.max(h,v,u);const b=Zm(),g=[];for(let j=0;j<7;j++){const S=new Date(b);S.setDate(b.getDate()+j);const w=a.some(E=>p2(E,S));g.push(w)}const _=[];for(let j=0;j<4;j++){const S=new Date(b);S.setDate(b.getDate()-j*7);let w=0;for(let C=0;C<7;C++){const A=new Date(S);A.setDate(S.getDate()+C),a.some(O=>p2(O,A))&&w++}const E=Math.ceil((S.getDate()+new Date(S.getFullYear(),S.getMonth(),1).getDay())/7);_.push({semaine:j===0?"Cette sem.":`Sem. -${j}`,joursActifs:w})}return{userId:e,streakActuel:u,meilleurStreak:h,dernierJourActif:o,totalJoursActifs:l,semaineCourante:g,historiqueHebdo:_.reverse()}}catch(t){return console.error("Erreur calcul streak:",t),{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function PK(e,t,n){const a=[],l=Zm(),o=DK(),u=t.length>2?5:3;if(a.push({id:`obj_quiz_${e}_${l.getTime()}`,userId:e,titre:`Passer ${u} quiz cette semaine`,description:`Entrane-toi en passant au moins ${u} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:u,progression:0,statut:"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Travailleur"'}),t.length>0){const m=t[0],p=Math.min(m.moyenne+3,14);a.push({id:`obj_score_${e}_${l.getTime()}`,userId:e,titre:`Atteindre ${Math.round(p)}/20 en ${m.disciplineNom}`,description:`Ta moyenne actuelle est de ${m.moyenne}/20. Vise ${Math.round(p)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(p),progression:Math.round(m.moyenne),statut:"en_cours",disciplineId:m.disciplineId,disciplineNom:m.disciplineNom,dateDebut:l,dateFin:o,recompense:' Badge "En progrs"'})}const d=n.streakActuel>=5?7:n.streakActuel+2;return a.push({id:`obj_streak_${e}_${l.getTime()}`,userId:e,titre:`Maintenir un streak de ${d} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:d,progression:n.streakActuel,statut:n.streakActuel>=d?"atteint":"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Flamme"'}),a}function qK(e,t,n,a){let l=0;if(a.length>0){const v=a.reduce((b,g)=>b+g.pourcentage/100*20,0)/a.length;l=Math.min(v/20*100,100)}let o=100;const u=e.filter(v=>v.niveauUrgence==="critique").length,d=e.filter(v=>v.niveauUrgence==="important").length;o-=u*25,o-=d*15,o=Math.max(o,0);const m=Math.min(t.streakActuel/7*100,100);let p=0;n.length>0&&(p=n.filter(b=>b.statut==="atteint").length/n.length*100);const h=l*.4+o*.25+m*.2+p*.15;return Math.round(Math.min(Math.max(h,0),100))}function RK(e,t,n){const a=Zm(),l=t.filter(o=>e0(o.datePassage)>=a);return e.map(o=>{const u={...o};switch(o.type){case"quiz_count":u.progression=l.length;break;case"score_min":if(o.disciplineId){const d=l.filter(m=>m.disciplineId===o.disciplineId);if(d.length>0){const m=Math.max(...d.map(p=>p.pourcentage));u.progression=Math.round(m/100*20)}}break;case"streak":u.progression=n.streakActuel;break}return u.progression>=u.cible&&(u.statut="atteint"),u})}async function t0(e){try{const t=await MK(e),n=TK(t),a=await kK(e);let l=PK(e,t,a);const o=await Jm(e);l=RK(l,o,a);const u=qK(t,a,l,o);return{lacunes:t,recommandations:n,streak:a,objectifs:l,scoreGlobal:u}}catch(t){return console.error("Erreur suivi complet:",t),{lacunes:[],recommandations:[],streak:{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function Zf(e){switch(e){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function iT(e){switch(e){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function sT(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function IK(e){return e>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":e>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":e>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":e>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function LK(e){return e.cible===0?0:Math.min(Math.round(e.progression/e.cible*100),100)}const $K="PEDA",BK=4,UK=5,FK=40,lT=5;function Ma(e){return e instanceof Le?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function oT(e){const t=new Date,n=t.getDay(),a=n===0?-6:1-n,l=new Date(t);return l.setDate(t.getDate()+a),l.setHours(0,0,0,0),l}function GK(e){const t=oT(),n=new Date(t);return n.setDate(t.getDate()+6),n.setHours(23,59,59,999),n}function h2(e){const t=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${e.getDate()} ${t[e.getMonth()]}`}function cT(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function HK(e){try{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",a="";for(let u=0;u<BK;u++)n+=t.charAt(Math.floor(Math.random()*t.length)),a+=t.charAt(Math.floor(Math.random()*t.length));const l=`${$K}-${n}-${a}`,o=je(ie,"users",e);return await Ze(o,{codeParent:l,codeParentGenere:new Date}),l}catch(t){throw console.error("Erreur gnration code invitation:",t),new Error("Impossible de gnrer le code d'invitation")}}async function QK(e){try{const t=je(ie,"users",e),n=await It(t);if(!n.exists())throw new Error("lve introuvable");const a=n.data();return a.codeParent?a.codeParent:await HK(e)}catch(t){throw console.error("Erreur rcupration code invitation:",t),new Error("Impossible de rcuprer le code d'invitation")}}async function VK(e,t){try{const n=t.trim().toUpperCase(),a=be(ie,"users"),l=Re(a,Ce("codeParent","==",n),Ce("role","==","eleve"),Nn(1)),o=await De(l);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=o.docs[0],d=u.data(),m=u.id,p=be(ie,"liens_parent_enfant"),h=Re(p,Ce("parentId","==",e),Ce("enfantId","==",m),Ce("statut","==","actif"),Nn(1));if(!(await De(h)).empty)throw new Error("Cet enfant est dj li  votre compte.");const b={parentId:e,enfantId:m,enfantNom:d.displayName||d.email,enfantEmail:d.email,enfantClasse:d.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await Lt(p,b)).id,...b}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function YK(e){try{const t=be(ie,"liens_parent_enfant"),n=Re(t,Ce("parentId","==",e),Ce("statut","==","actif"),Je("dateCreation","desc"));return(await De(n)).docs.map(l=>({id:l.id,...l.data(),dateCreation:Ma(l.data().dateCreation),dateDerniereConsultation:l.data().dateDerniereConsultation?Ma(l.data().dateDerniereConsultation):void 0}))}catch(t){return console.error("Erreur rcupration enfants lis:",t),[]}}async function KK(e,t){try{const n=je(ie,"liens_parent_enfant",e),a=await It(n);if(!a.exists())throw new Error("Lien introuvable");if(a.data().parentId!==t)throw new Error("Action non autorise");await Ze(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function XK(e,t){try{const n=be(ie,"liens_parent_enfant"),a=Re(n,Ce("parentId","==",e),Ce("enfantId","==",t),Ce("statut","==","actif"),Nn(1)),l=await De(a);if(l.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=je(ie,"users",t),u=await It(o);if(!u.exists())throw new Error("Profil de l'enfant introuvable.");const d=u.data(),m=await t0(t),p=await Jm(t),h=p.slice(0,lT).map(_=>({quizTitre:_.quizTitre||"Quiz",disciplineNom:_.disciplineNom||"Discipline",pourcentage:_.pourcentage,noteSur20:Math.round(_.pourcentage/100*20*10)/10,reussi:_.reussi,datePassage:Ma(_.datePassage)})),v=await WK(e,t,d.displayName||d.email,m.lacunes,m.streak,m.scoreGlobal,p),b=ZK(t,d.displayName||d.email,m,p),g=l.docs[0];return await Ze(je(ie,"liens_parent_enfant",g.id),{dateDerniereConsultation:new Date}),{enfant:{id:t,nom:d.displayName||d.email,email:d.email,classe:d.classe||void 0,derniereConnexion:d.lastLogin?Ma(d.lastLogin):void 0},scoreGlobal:m.scoreGlobal,streak:{actuel:m.streak.streakActuel,meilleur:m.streak.meilleurStreak,semaineCourante:m.streak.semaineCourante},lacunes:m.lacunes.map(_=>({disciplineNom:_.disciplineNom,moyenne:_.moyenne,niveauUrgence:_.niveauUrgence,tendance:_.tendance})),objectifs:m.objectifs.map(_=>({titre:_.titre,progression:_.progression,cible:_.cible,statut:_.statut})),derniersQuiz:h,resume:b,alertes:v}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function WK(e,t,n,a,l,o,u){const d=[],m=new Date;if(a.filter(h=>h.niveauUrgence==="critique").forEach(h=>{d.push({id:`alerte_parent_lacune_${h.id}`,parentId:e,enfantId:t,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${h.disciplineNom}`,message:`${n} a une moyenne de ${h.moyenne}/20 en ${h.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:m})}),l.dernierJourActif){const h=cT(Ma(l.dernierJourActif),m);h>=UK&&d.push({id:`alerte_parent_inactif_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${h} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:m})}else u.length===0&&d.push({id:`alerte_parent_jamais_actif_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:m});o<FK&&u.length>0&&d.push({id:`alerte_parent_score_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${n} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:m}),a.filter(h=>h.tendance==="hausse").forEach(h=>{d.push({id:`alerte_parent_progression_${h.id}`,parentId:e,enfantId:t,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${h.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${h.disciplineNom}.`,lue:!1,dateCreation:m})}),l.streakActuel>=5&&d.push({id:`alerte_parent_streak_${t}`,parentId:e,enfantId:t,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${l.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${l.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:m});const p={critique:0,important:1,modere:2,info:3};return d.sort((h,v)=>p[h.niveau]-p[v.niveau]),d}function ZK(e,t,n,a){const l=oT(),o=GK(),u=new Date(l);u.setDate(u.getDate()-7);const d=new Date(o);d.setDate(d.getDate()-7);const m=a.filter(A=>{const O=Ma(A.datePassage);return O>=l&&O<=o}),p=a.filter(A=>{const O=Ma(A.datePassage);return O>=u&&O<=d}),h=m.slice(0,lT).map(A=>({quizTitre:A.quizTitre||"Quiz",disciplineNom:A.disciplineNom||"Discipline",pourcentage:A.pourcentage,noteSur20:Math.round(A.pourcentage/100*20*10)/10,reussi:A.reussi,datePassage:Ma(A.datePassage)})),v=JK(m,p),b=new Set;m.forEach(A=>{const O=Ma(A.datePassage);b.add(`${O.getFullYear()}-${O.getMonth()}-${O.getDate()}`)});const g=m.reduce((A,O)=>A+(O.tempsEcoule||5),0);let _=0;if(p.length>0){const A=p.reduce((O,T)=>O+T.pourcentage,0)/p.length;_=Math.round(A)}let j="stable";const S=n.scoreGlobal-_;S>5?j="hausse":S<-5&&(j="baisse");const w=n.lacunes.filter(A=>A.niveauUrgence==="critique"||A.niveauUrgence==="important").map(A=>A.disciplineNom),E=n.objectifs.filter(A=>A.statut==="atteint").length,C=`${h2(l)} - ${h2(o)} ${o.getFullYear()}`;return{enfantId:e,enfantNom:t,semaine:C,dateDebut:l,dateFin:o,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:_,evolutionScore:j,nombreQuizSemaine:m.length,tempsEstimeMinutes:Math.round(g),joursActifsSemaine:b.size,streakActuel:n.streak.streakActuel,derniersQuiz:h,evolutionDisciplines:v,lacunesCritiques:n.lacunes.filter(A=>A.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(A=>A.niveauUrgence==="important").length,disciplinesEnDifficulte:w,objectifsAtteints:E,objectifsTotal:n.objectifs.length}}function JK(e,t){const n=new Map;e.forEach(o=>{n.has(o.disciplineId)||n.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),n.get(o.disciplineId).scores.push(o.pourcentage)});const a=new Map;t.forEach(o=>{a.has(o.disciplineId)||a.set(o.disciplineId,[]),a.get(o.disciplineId).push(o.pourcentage)});const l=[];return n.forEach((o,u)=>{const d=o.scores.reduce((_,j)=>_+j,0)/o.scores.length,m=a.get(u)||[],p=m.length>0?m.reduce((_,j)=>_+j,0)/m.length:d,h=Math.round(d/100*20*10)/10,v=Math.round(p/100*20*10)/10,b=Math.round((h-v)*10)/10;let g="stable";b>1?g="hausse":b<-1&&(g="baisse"),l.push({disciplineNom:o.nom,disciplineId:u,moyenneSemainePrecedente:v,moyenneSemaineCourante:h,evolution:g,ecart:b})}),l}function eX(e){return Zf(e)}function tX(e){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[e]||"Alerte"}function v2(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function rX(e){return e>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":e>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":e>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":e>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function ux(e){const n=cT(e,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const nX="PROF",aX=4,Bd="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",uT=8,iX=7,sX=16;function ks(e){return e instanceof Le?e.toDate():e instanceof Date?e:e?.seconds?new Le(e.seconds,e.nanoseconds||0).toDate():new Date(e)}function lX(e,t){return Math.floor(Math.abs(t.getTime()-e.getTime())/864e5)}async function dT(){let e=0;const t=10;for(;e<t;){let n="",a="";for(let d=0;d<aX;d++)n+=Bd.charAt(Math.floor(Math.random()*Bd.length)),a+=Bd.charAt(Math.floor(Math.random()*Bd.length));const l=`${nX}-${n}-${a}`,o=Re(be(ie,"groupes_prof"),Ce("codeInvitation","==",l),Nn(1));if((await De(o)).empty)return l;e++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function oX(e,t,n){try{const a=await dT(),l={profId:e,profNom:t,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:a,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await Lt(be(ie,"groupes_prof"),l);return console.log(` Groupe "${n.nom}" cr avec code: ${a}`),{id:o.id,...l}}catch(a){throw console.error(" Erreur cration groupe:",a),new Error("Impossible de crer le groupe. Ressayez.")}}async function fT(e){try{const t=Re(be(ie,"groupes_prof"),Ce("profId","==",e),Je("dateCreation","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data(),dateCreation:ks(a.data().dateCreation),dateMiseAJour:a.data().dateMiseAJour?ks(a.data().dateMiseAJour):void 0}))}catch(t){throw console.error(" Erreur rcupration groupes:",t),new Error("Impossible de charger vos groupes.")}}async function cX(e){try{const t=await It(je(ie,"groupes_prof",e));if(!t.exists())return null;const n=t.data();return{id:t.id,...n,dateCreation:ks(n.dateCreation),dateMiseAJour:n.dateMiseAJour?ks(n.dateMiseAJour):void 0}}catch(t){return console.error(" Erreur rcupration groupe:",t),null}}async function mT(e,t){try{const n=je(ie,"groupes_prof",e);await Ze(n,{...t,dateMiseAJour:new Date}),console.log(` Groupe ${e} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function uX(e){try{const t=Sc(ie),n=Re(be(ie,"inscriptions_groupe"),Ce("groupeId","==",e));(await De(n)).docs.forEach(l=>t.delete(l.ref)),t.delete(je(ie,"groupes_prof",e)),await t.commit(),console.log(` Groupe ${e} et ses inscriptions supprims`)}catch(t){throw console.error(" Erreur suppression groupe:",t),new Error("Impossible de supprimer le groupe.")}}async function dX(e){await mT(e,{statut:"archive"})}async function fX(e){try{const t=await dT();return await Ze(je(ie,"groupes_prof",e),{codeInvitation:t,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${e}: ${t}`),t}catch(t){throw console.error(" Erreur rgnration code:",t),new Error("Impossible de rgnrer le code.")}}async function mX(e,t,n,a){try{const l=a.trim().toUpperCase(),o=Re(be(ie,"groupes_prof"),Ce("codeInvitation","==",l),Nn(1)),u=await De(o);if(u.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const d=u.docs[0],m=d.data();if(m.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const p=Re(be(ie,"inscriptions_groupe"),Ce("groupeId","==",d.id),Ce("eleveId","==",e),Ce("statut","==","actif"),Nn(1));if(!(await De(p)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const v={groupeId:d.id,eleveId:e,eleveNom:t,eleveEmail:n,statut:"actif",dateInscription:new Date},b=await Lt(be(ie,"inscriptions_groupe"),v);return await Ze(je(ie,"groupes_prof",d.id),{nombreInscrits:im(1),dateMiseAJour:new Date}),console.log(` lve ${t} inscrit au groupe "${m.nom}"`),{id:b.id,...v}}catch(l){throw console.error(" Erreur inscription groupe:",l),l}}async function ep(e,t="actif"){try{const n=Re(be(ie,"inscriptions_groupe"),Ce("groupeId","==",e),Ce("statut","==",t),Je("dateInscription","asc"));return(await De(n)).docs.map(l=>({id:l.id,...l.data(),dateInscription:ks(l.data().dateInscription),dateRetrait:l.data().dateRetrait?ks(l.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function pX(e){try{const t=Re(be(ie,"inscriptions_groupe"),Ce("eleveId","==",e),Ce("statut","==","actif")),n=await De(t);if(n.empty)return[];const a=[];for(const l of n.docs){const o=l.data().groupeId,u=await cX(o);u&&u.statut==="actif"&&a.push(u)}return a}catch(t){return console.error(" Erreur rcupration groupes lve:",t),[]}}async function hX(e,t){try{await Ze(je(ie,"inscriptions_groupe",e),{statut:"retire",dateRetrait:new Date}),await Ze(je(ie,"groupes_prof",t),{nombreInscrits:im(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function r0(e){try{const n=(await ep(e)).map(b=>b.eleveId);if(n.length===0)return{groupeId:e,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const a=[],l=[];for(let b=0;b<n.length;b+=10)l.push(n.slice(b,b+10));for(const b of l){const g=Re(be(ie,"quiz_results"),Ce("userId","in",b));(await De(g)).docs.forEach(j=>a.push({id:j.id,...j.data()}))}const o=new Map;for(const b of a){const g=b.userId;o.has(g)||o.set(g,{total:0,somme:0,reussis:0});const _=o.get(g);_.total++,_.somme+=b.score||0,(b.score||0)>=10&&_.reussis++}let u=0,d=0,m=0,p=0,h=20,v=0;for(const[,b]of o){const g=b.total>0?b.somme/b.total:0;u+=g,d++,v+=b.total,g<uT&&m++,g>p&&(p=g),g<h&&(h=g)}return d===0&&(h=0),{groupeId:e,nombreEleves:n.length,moyenneClasse:d>0?Math.round(u/d*10)/10:0,tauxReussite:v>0?Math.round(Array.from(o.values()).reduce((b,g)=>b+g.reussis,0)/v*100):0,tauxParticipation:Math.round(d/n.length*100),totalQuizPasses:v,elevesEnDifficulte:m,meilleureNote:Math.round(p*10)/10,pireNote:Math.round(h*10)/10,derniereMiseAJour:new Date}}catch(t){throw console.error(" Erreur calcul stats groupe:",t),new Error("Impossible de calculer les statistiques du groupe.")}}async function vX(e){try{const t=await ep(e);if(t.length===0)return[];const n=[];for(const a of t)try{const l=await t0(a.eleveId),o=Re(be(ie,"quiz_results"),Ce("userId","==",a.eleveId),Je("datePassage","desc")),d=(await De(o)).docs.map(g=>g.data());let m=0,p=0,h;if(d.length>0){const g=d.reduce((_,j)=>_+(j.score||0),0);m=Math.round(g/d.length*10)/10,p=Math.round(d.filter(_=>(_.score||0)>=10).length/d.length*100),h=ks(d[0].datePassage)}let v="stable";if(d.length>=4){const g=d.slice(0,Math.ceil(d.length/2)),_=d.slice(Math.ceil(d.length/2)),j=g.reduce((w,E)=>w+(E.score||0),0)/g.length,S=_.reduce((w,E)=>w+(E.score||0),0)/_.length;j-S>1?v="hausse":S-j>1&&(v="baisse")}const b=l.lacunes.map(g=>({disciplineNom:g.disciplineNom,chapitre:g.chapitre,moyenne:g.moyenne,niveauUrgence:g.niveauUrgence}));n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:m,totalQuiz:d.length,tauxReussite:p,scoreGlobal:l.scoreGlobal,streak:{actuel:l.streak.streakActuel,meilleur:l.streak.meilleurStreak},lacunes:b,dernierQuiz:h,tendance:v})}catch(l){console.warn(` Suivi incomplet pour lve ${a.eleveNom}:`,l),n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((a,l)=>l.moyenne-a.moyenne),n}catch(t){throw console.error(" Erreur stats lves groupe:",t),new Error("Impossible de charger les statistiques des lves.")}}async function gX(e,t,n){try{const l=(await ep(e)).map(g=>g.eleveId);if(l.length===0)return null;let o=null,u="quiz_results";if(n!=="quizzes_v2"){if(n!=="quizzes"){const g=await It(je(ie,"quizzes_v2",t));if(g.exists())o=g.data(),u="quiz_results_v2";else{const _=await It(je(ie,"quizzes",t));_.exists()&&(o=_.data(),u="quiz_results")}}}if(!o)return null;const d=[],m=[];for(let g=0;g<l.length;g+=10)m.push(l.slice(g,g+10));for(const g of m){const _=Re(be(ie,u),Ce("quizId","==",t),Ce("userId","in",g));(await De(_)).docs.forEach(S=>d.push(S.data()))}if(d.length===0)return null;const p=u==="quiz_results_v2",h=d.map(g=>p?g.note20||(g.scoreMax>0?g.score/g.scoreMax*20:0):g.score||0),v=d.map(g=>g.tempsEcoule||0),b=[];if(p&&o.questions)for(let g=0;g<o.questions.length;g++){const _=o.questions[g];let j=0,S=0;for(const C of d){const A=C.detailsParQuestion?.find(O=>O.questionId===_.id);A&&(S++,A.isCorrect||j++)}const w=S>0?Math.round(j/S*100):0,E=_.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${g+1}`;b.push({questionIndex:g,questionTexte:E,tauxEchec:w,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let g=0;g<o.questions.length;g++){const _=o.questions[g];let j=0;const S=new Map;for(const C of d){const A=C.reponses?.[g];A!==void 0&&(S.set(A,(S.get(A)||0)+1),A!==_.reponseCorrecte&&j++)}const w=Math.round(j/d.length*100),E=Array.from(S.entries()).filter(([C])=>C!==_.reponseCorrecte).map(([C,A])=>({reponse:_.options?.[C]||`Option ${C+1}`,nombre:A})).sort((C,A)=>A.nombre-C.nombre);b.push({questionIndex:g,questionTexte:_.question,tauxEchec:w,reponseCorrecte:_.options?.[_.reponseCorrecte]||"N/A",reponsesFrequentes:E})}return b.sort((g,_)=>_.tauxEchec-g.tauxEchec),{quizId:t,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:d.length,moyenneScore:Math.round(h.reduce((g,_)=>g+_,0)/h.length*10)/10,tauxReussite:Math.round(h.filter(g=>g>=10).length/h.length*100),tempsEcouleMoyen:Math.round(v.reduce((g,_)=>g+_,0)/v.length),questionsRatees:b}}catch(a){return console.error(" Erreur analyse quiz groupe:",a),null}}async function xX(e){try{const t=[];try{const n=Re(be(ie,"quizzes"),Ce("disciplineId","==",e),Je("createdAt","desc"));(await De(n)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(n){console.warn(" Recherche quizzes choue (index manquant ?):",n)}try{const n=Re(be(ie,"quizzes_v2"),Ce("disciplineId","==",e),Je("createdAt","desc"));(await De(n)).docs.forEach(l=>{t.push({id:l.id,titre:l.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(n){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",n)}return console.log(` ${t.length} quiz trouv(s) pour discipline ${e}`),t}catch(t){return console.error(" Erreur rcupration quiz par matire:",t),[]}}function yX(e,t){const n=[],a=new Date;for(const o of e){if(o.totalQuiz>0&&o.moyenne<uT&&n.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(u=>u.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:a}),o.dernierQuiz){const u=lX(o.dernierQuiz,a);u>=iX&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a pas fait de quiz depuis ${u} jours.`,niveauUrgence:u>=14?"important":"info",dateCreation:a})}else o.totalQuiz===0&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:a});o.tendance==="baisse"&&o.totalQuiz>=4&&n.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:a}),o.moyenne>=sX&&o.totalQuiz>=3&&n.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:t,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:a})}const l={critique:0,important:1,info:2};return n.sort((o,u)=>l[o.niveauUrgence]-l[u.niveauUrgence]),n}function bX(e,t){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],a=e.map(o=>{const u=o.lacunes.map(d=>`${d.disciplineNom} (${d.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${u}"`,o.tendance].join(",")});return"\uFEFF"+[n.join(","),...a].join(`
`)}function jX(e,t){const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`${t}.csv`,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}const NX=()=>{const{currentUser:e}=lt(),[t,n]=y.useState([]),[a,l]=y.useState(!1),[o,u]=y.useState(""),[d,m]=y.useState(!0),[p,h]=y.useState(!1),[v,b]=y.useState(null),[g,_]=y.useState(null),j=y.useCallback(async()=>{if(e?.uid)try{m(!0);const w=await pX(e.uid);n(w)}catch(w){console.error("Erreur chargement groupes:",w)}finally{m(!1)}},[e?.uid]);y.useEffect(()=>{j()},[j]);const S=async w=>{if(w.preventDefault(),!(!e?.uid||!o.trim()))try{h(!0),b(null),_(null),await mX(e.uid,e.displayName||e.email||"lve",e.email||"",o),_("Tu as rejoint le groupe avec succs ! "),u(""),l(!1),await j(),setTimeout(()=>_(null),5e3)}catch(E){b(E.message||"Impossible de rejoindre le groupe.")}finally{h(!1)}};return r.jsxs("div",{className:"rejoindre-groupe-section",children:[r.jsxs("div",{className:"rejoindre-groupe-header",children:[r.jsx("h3",{children:" Mes groupes-classes"}),r.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>l(!a),children:a?" Annuler":" Rejoindre un groupe"})]}),v&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",v,r.jsx("button",{onClick:()=>b(null),className:"prof-alert-close",children:""})]}),g&&r.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:g}),a&&r.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[r.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),r.jsxs("form",{onSubmit:S,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:w=>u(w.target.value.toUpperCase()),maxLength:14,disabled:p,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:p||o.length<14,children:p?" Vrification...":" Rejoindre"})]})]}),d?r.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):t.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[r.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),r.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map(w=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[r.jsxs("div",{children:[r.jsx("strong",{style:{color:"#1f2937"},children:w.nom}),r.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[w.matiereNom,"  Prof: ",w.profNom]})]}),r.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},w.id))})]})},_X=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":e>0?"#ef4444":"#d1d5db",g2=({pourcentage:e,label:t,size:n="md",showPercent:a=!0,color:l,showCheck:o=!0,className:u=""})=>{const[d,m]=y.useState(0);y.useEffect(()=>{const g=setTimeout(()=>{m(Math.min(100,Math.max(0,e)))},100);return()=>clearTimeout(g)},[e]);const h={sm:"4px",md:"8px",lg:"12px"}[n],v=l||_X(e),b=e>=100;return r.jsxs("div",{className:`progress-bar-wrapper ${u}`,children:[(t||a)&&r.jsxs("div",{className:"progress-bar-header",children:[t&&r.jsx("span",{className:"progress-bar-label",children:t}),a&&r.jsxs("span",{className:"progress-bar-percent",style:{color:v},children:[b&&o?" ":"",e,"%"]})]}),r.jsx("div",{className:"progress-bar-track",style:{height:h},children:r.jsx("div",{className:"progress-bar-fill",style:{width:`${d}%`,backgroundColor:v,height:"100%"}})})]})},SX=()=>{const e=yt(),{currentUser:t}=lt(),[n,a]=y.useState(null),[l,o]=y.useState([]),[u,d]=y.useState([]),[m,p]=y.useState([]),[h,v]=y.useState([]),[b,g]=y.useState(null),[_,j]=y.useState([]),[S,w]=y.useState("all"),[E,C]=y.useState(!0),[A,O]=y.useState("overview"),[T,P]=y.useState(null),[R,I]=y.useState(!1),[L,K]=y.useState(!1),U=async()=>{if(t){I(!0);try{const Q=await QK(t.uid);P(Q)}catch(Q){console.error("Erreur gnration code parent :",Q)}finally{I(!1)}}},G=()=>{T&&(navigator.clipboard.writeText(T),K(!0),setTimeout(()=>K(!1),2e3))};if(y.useEffect(()=>{(async()=>{if(t){C(!0);try{await s3(t.uid);const[B,q,fe,te,ue,he]=await Promise.all([XR(t.uid),WR(t.uid),ZR(t.uid,20),sm(t.uid,10),U2().catch(()=>[]),n3(t.uid)]);a(B),o(q),d(fe),p(te),v(ue),g(he);const xe=l3(B,q,he);j(xe)}catch(B){console.error("Erreur chargement dashboard :",B)}finally{C(!1)}}})()},[t]),E)return r.jsxs("div",{className:"sd-loading",children:[r.jsx("div",{className:"admin-spinner"}),r.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const V=_.filter(Q=>Q.obtenu),M=_.length,k=t?.displayName||t?.email?.split("@")[0]||"lve",J=S==="all"?_:_.filter(Q=>Q.categorie===S);return r.jsxs("div",{className:"student-dashboard",children:[r.jsxs("div",{className:"sd-welcome",children:[r.jsxs("div",{className:"sd-welcome-text",children:[r.jsxs("h1",{children:["Bienvenue, ",k," "]}),r.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),r.jsxs("div",{className:"sd-welcome-badges-row",children:[t?.isPremium&&r.jsxs("span",{className:"sd-premium-badge",children:[r.jsx(Zr,{size:14})," Premium"]}),b&&b.streakActuel>0&&r.jsxs("span",{className:"sd-streak-badge",children:[" ",b.streakActuel," jour",b.streakActuel>1?"s":""]})]})]}),r.jsxs("div",{className:"sd-stats-grid",children:[r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:r.jsx(jn,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),r.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:r.jsx(yv,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",style:{color:ql(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),r.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:r.jsx($l,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsx("span",{className:"sd-stat-value",children:b?.totalRessourcesVues||0}),r.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:r.jsx(M2,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[b?.streakActuel||0," "]}),r.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:r.jsx(T2,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),r.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),r.jsxs("div",{className:"sd-stat-card",children:[r.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:r.jsx(Li,{size:22})}),r.jsxs("div",{className:"sd-stat-content",children:[r.jsxs("span",{className:"sd-stat-value",children:[b?.disciplinesCompletees||0,"/",b?.disciplinesCommencees||0]}),r.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),r.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[r.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),T?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[r.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:T}),r.jsx("button",{className:"sd-btn",onClick:G,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:L?"#10b981":"#f3f4f6",color:L?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:L?" Copi !":" Copier"})]}):r.jsx("button",{className:"sd-btn sd-btn-primary",onClick:U,disabled:R,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:R?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):r.jsx(r.Fragment,{children:" Gnrer mon code"})})]}),r.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:r.jsx(NX,{})}),r.jsxs("div",{className:"sd-tabs",children:[r.jsxs("button",{className:`sd-tab ${A==="overview"?"active":""}`,onClick:()=>O("overview"),children:[r.jsx(Ns,{size:16})," Vue d'ensemble"]}),r.jsxs("button",{className:`sd-tab ${A==="progression"?"active":""}`,onClick:()=>O("progression"),children:[r.jsx(mc,{size:16})," Progression"]}),r.jsxs("button",{className:`sd-tab ${A==="history"?"active":""}`,onClick:()=>O("history"),children:[r.jsx(bv,{size:16})," Historique"]}),r.jsxs("button",{className:`sd-tab ${A==="badges"?"active":""}`,onClick:()=>O("badges"),children:[r.jsx(Li,{size:16})," Badges (",V.length,"/",M,")"]})]}),A==="overview"&&r.jsxs("div",{className:"sd-overview",children:[u.length>1&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(mc,{size:18})," volution de vos scores"]}),r.jsx("div",{className:"sd-chart-container",children:r.jsx(ZS,{width:"100%",height:280,children:r.jsxs(SK,{data:u,children:[r.jsx(sy,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(dy,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),r.jsx(py,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),r.jsx(iA,{formatter:Q=>[`${Q}%`,"Score"],labelFormatter:Q=>`Date : ${Q}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),r.jsx(BM,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),l.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(Ns,{size:18})," Moyennes par discipline"]}),r.jsx("div",{className:"sd-chart-container",children:r.jsx(ZS,{width:"100%",height:280,children:r.jsxs(CK,{data:l,layout:"vertical",children:[r.jsx(sy,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),r.jsx(dy,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),r.jsx(py,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),r.jsx(iA,{formatter:Q=>[`${Q}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),r.jsx(QM,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:l.map((Q,B)=>r.jsx(Fb,{fill:ql(Q.moyenne)},B))})]})})})]}),h.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(xc,{size:18})," Quiz disponibles"]}),r.jsx("div",{className:"sd-quiz-grid",children:h.slice(0,6).map(Q=>{const B=Q.isPremium&&!t?.isPremium;return r.jsxs("div",{className:`sd-quiz-card ${B?"locked":""}`,onClick:()=>!B&&e(`/quiz/${Q.id}`),children:[Q.isPremium&&r.jsxs("span",{className:"sd-quiz-badge-premium",children:[B?r.jsx(mx,{size:10}):r.jsx(Zr,{size:10})," Premium"]}),r.jsx("h4",{className:"sd-quiz-title",children:Q.titre}),r.jsxs("div",{className:"sd-quiz-meta",children:[r.jsxs("span",{children:[r.jsx(jn,{size:12})," ",Q.questions.length," questions"]}),r.jsxs("span",{children:[r.jsx(Fl,{size:12})," ",Q.duree," min"]})]}),!B&&r.jsxs("button",{className:"sd-quiz-play-btn",children:[r.jsx(xc,{size:14})," Commencer"]}),B&&r.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:q=>{q.stopPropagation(),e("/premium")},children:[r.jsx(mx,{size:14})," Dbloquer"]})]},Q.id)})})]}),n&&n.totalQuizPasses===0&&(!b||b.totalRessourcesVues===0)&&r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(yv,{size:48}),r.jsx("h3",{children:"Commencez votre parcours !"}),r.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),h.length>0&&r.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e(`/quiz/${h[0].id}`),children:[r.jsx(xc,{size:18})," Passer un quiz"]})]})]}),A==="progression"&&r.jsxs("div",{className:"sd-progression",children:[r.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(mc,{size:18})," Avancement global"]}),r.jsx(g2,{pourcentage:b?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),r.jsxs("div",{className:"sd-prog-stats-row",children:[r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:b?.totalRessourcesVues||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:b?.totalQuizReussis||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsx("span",{className:"sd-prog-stat-number",children:b?.disciplinesCommencees||0}),r.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),r.jsxs("div",{className:"sd-prog-stat-item",children:[r.jsxs("span",{className:"sd-prog-stat-number",children:[" ",b?.streakActuel||0]}),r.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",b?.meilleurStreak||0,")"]})]})]})]}),b&&b.parDiscipline.length>0?r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(Ns,{size:18})," Par discipline"]}),r.jsx("div",{className:"sd-prog-disciplines",children:b.parDiscipline.map(Q=>r.jsxs("div",{className:"sd-prog-disc-card",children:[r.jsxs("div",{className:"sd-prog-disc-header",children:[r.jsx("span",{className:"sd-prog-disc-name",children:Q.disciplineNom}),Q.pourcentage>=100&&r.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),r.jsx(g2,{pourcentage:Q.pourcentage,size:"md",showPercent:!0}),r.jsxs("div",{className:"sd-prog-disc-details",children:[r.jsxs("span",{children:[r.jsx($l,{size:12})," ",Q.ressourcesVues.length,"/",Q.totalRessources," ressources"]}),r.jsxs("span",{children:[r.jsx(Tt,{size:12})," ",Q.quizReussis.length,"/",Q.totalQuiz," quiz russis"]})]})]},Q.disciplineId))})]}):r.jsxs("div",{className:"sd-empty-state",children:[r.jsx($l,{size:48}),r.jsx("h3",{children:"Aucune progression enregistre"}),r.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),l.length>0&&r.jsxs("div",{className:"sd-chart-card",children:[r.jsxs("h3",{className:"sd-section-title",children:[r.jsx(yv,{size:18})," Performance quiz par discipline"]}),r.jsx("div",{className:"sd-disc-list",children:l.map(Q=>r.jsxs("div",{className:"sd-disc-card",children:[r.jsxs("div",{className:"sd-disc-header",children:[r.jsx("span",{className:"sd-disc-name",children:Q.disciplineNom}),r.jsxs("span",{className:"sd-disc-tendance",children:[Q.tendance==="up"&&r.jsx(mc,{size:16,className:"tendance-up"}),Q.tendance==="down"&&r.jsx(zq,{size:16,className:"tendance-down"}),Q.tendance==="stable"&&r.jsx(Oq,{size:16,className:"tendance-stable"})]})]}),r.jsxs("div",{className:"sd-disc-stats",children:[r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",style:{color:ql(Q.moyenne)},children:[Q.moyenne,"%"]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsx("span",{className:"sd-disc-stat-value",children:Q.nombreQuiz}),r.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",children:[Q.meilleurScore,"%"]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),r.jsxs("div",{className:"sd-disc-stat",children:[r.jsxs("span",{className:"sd-disc-stat-value",children:[Q.quizReussis,"/",Q.nombreQuiz]}),r.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),r.jsx("div",{className:"sd-disc-bar",children:r.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${Q.moyenne}%`,background:ql(Q.moyenne)}})})]},Q.disciplineId))})]})]}),A==="history"&&r.jsx("div",{className:"sd-history",children:m.length===0?r.jsxs("div",{className:"sd-empty-state",children:[r.jsx(bv,{size:48}),r.jsx("h3",{children:"Aucun quiz pass"}),r.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):r.jsx("div",{className:"sd-history-list",children:m.map(Q=>{const B=Q.datePassage?.toDate?Q.datePassage.toDate():new Date(Q.datePassage);return r.jsxs("div",{className:`sd-history-item ${Q.reussi?"success":"fail"}`,children:[r.jsx("div",{className:`sd-history-icon ${Q.reussi?"success":"fail"}`,children:Q.reussi?r.jsx(Tt,{size:20}):r.jsx(px,{size:20})}),r.jsxs("div",{className:"sd-history-content",children:[r.jsxs("div",{className:"sd-history-top",children:[r.jsx("span",{className:"sd-history-title",children:Q.quizTitre}),r.jsx("span",{className:"sd-history-discipline",children:Q.disciplineNom})]}),r.jsxs("div",{className:"sd-history-meta",children:[r.jsxs("span",{children:[r.jsx(bv,{size:12}),B.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),r.jsxs("span",{children:[r.jsx(Fl,{size:12})," ",Y2(Q.tempsEcoule)]}),r.jsxs("span",{children:[r.jsx(Tt,{size:12})," ",Q.bonnesReponses,"/",Q.nombreQuestions]})]})]}),r.jsxs("div",{className:"sd-history-score",style:{color:ql(Q.pourcentage)},children:[r.jsxs("span",{className:"sd-history-score-value",children:[Q.pourcentage,"%"]}),r.jsx("span",{className:"sd-history-score-label",children:K2(Q.pourcentage)})]})]},Q.id)})})}),A==="badges"&&r.jsxs("div",{className:"sd-badges",children:[r.jsxs("div",{className:"sd-badges-summary",children:[r.jsxs("div",{className:"sd-badges-circle",children:[r.jsx("span",{className:"sd-badges-count",children:V.length}),r.jsxs("span",{className:"sd-badges-total",children:["/ ",M]})]}),r.jsx("p",{children:"badges obtenus"}),r.jsx("div",{className:"sd-badges-progress",children:r.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${V.length/M*100}%`}})})]}),r.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(Q=>r.jsx("button",{className:`sd-badge-filter-btn ${S===Q.key?"active":""}`,onClick:()=>w(Q.key),children:Q.label},Q.key))}),r.jsx("div",{className:"sd-badges-grid",children:J.map(Q=>r.jsxs("div",{className:`sd-badge-card ${Q.obtenu?"obtained":"locked"}`,children:[r.jsx("span",{className:"sd-badge-icon",children:Q.icone}),r.jsx("h4",{className:"sd-badge-name",children:Q.nom}),r.jsx("p",{className:"sd-badge-description",children:Q.description}),r.jsx("span",{className:"sd-badge-condition",children:Q.condition}),Q.obtenu&&r.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),r.jsx("span",{className:"sd-badge-category",children:Q.categorie})]},Q.id))}),J.length===0&&r.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[r.jsx(yy,{size:36}),r.jsx("h3",{children:"Aucun badge dans cette catgorie"}),r.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},wX=()=>{const{currentUser:e}=lt(),t=yt(),[n,a]=y.useState(null),[l,o]=y.useState(!0),[u,d]=y.useState(null),m=["L","M","M","J","V","S","D"],p=y.useCallback(async()=>{if(e?.uid)try{o(!0),d(null);const C=await t0(e.uid);a(C)}catch(C){console.error("Erreur chargement suivi:",C),d("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[e?.uid]);y.useEffect(()=>{p()},[p]);const h=(()=>{const C=new Date().getDay();return C===0?6:C-1})();if(l)return r.jsx("div",{className:"suivi-page",children:r.jsx("div",{className:"suivi-container",children:r.jsxs("div",{className:"suivi-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(u)return r.jsx("div",{className:"suivi-page",children:r.jsx("div",{className:"suivi-container",children:r.jsxs("div",{className:"suivi-error",children:[r.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),r.jsx("p",{className:"suivi-error-text",children:u}),r.jsx("button",{className:"suivi-btn-retry",onClick:p,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:v,recommandations:b,streak:g,objectifs:_,scoreGlobal:j}=n,S=2*Math.PI*40,w=S-j/100*S,E=j>=60?"#10b981":j>=30?"#f59e0b":"#ef4444";return r.jsx("div",{className:"suivi-page",children:r.jsxs("div",{className:"suivi-container",children:[r.jsx("div",{className:"suivi-header",children:r.jsxs("div",{className:"suivi-header-content",children:[r.jsxs("div",{children:[r.jsx("h1",{children:" Mes points  amliorer"}),r.jsx("p",{className:"suivi-motivation",children:IK(j)})]}),r.jsxs("div",{className:"score-global-circle",children:[r.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[r.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),r.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:E,strokeDasharray:S,strokeDashoffset:w}),r.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:j})]}),r.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),r.jsxs("div",{className:"streak-card",children:[r.jsxs("div",{className:"streak-header",children:[r.jsx("span",{className:"streak-flamme",children:g.streakActuel>0?"":""}),r.jsxs("div",{children:[r.jsx("div",{className:"streak-nombre",children:g.streakActuel}),r.jsx("div",{className:"streak-label",children:g.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),r.jsx("div",{className:"streak-semaine",children:m.map((C,A)=>r.jsxs("div",{className:"streak-jour",children:[r.jsx("span",{className:"streak-jour-label",children:C}),r.jsx("div",{className:`streak-jour-indicateur ${g.semaineCourante[A]?"actif":"inactif"} ${A===h?"aujourd-hui":""}`,children:g.semaineCourante[A]?"":""})]},A))}),r.jsxs("div",{className:"streak-stats",children:[r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsx("span",{className:"streak-stat-value",children:g.meilleurStreak}),r.jsx("span",{className:"streak-stat-label",children:"record"})]}),r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsx("span",{className:"streak-stat-value",children:g.totalJoursActifs}),r.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),g.dernierJourActif&&r.jsxs("div",{className:"streak-stat",children:[r.jsx("span",{className:"streak-stat-icon",children:""}),r.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(g.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),r.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",r.jsx("span",{className:"suivi-section-badge",children:_.length})]}),_.length>0?r.jsx("div",{className:"objectifs-grid",children:_.map(C=>{const A=LK(C);return r.jsxs("div",{className:`objectif-card ${C.statut==="atteint"?"atteint":""}`,children:[r.jsxs("div",{className:"objectif-header",children:[r.jsx("span",{className:"objectif-titre",children:C.titre}),C.recompense&&r.jsx("span",{className:"objectif-recompense",children:C.recompense})]}),r.jsx("p",{className:"objectif-description",children:C.description}),r.jsxs("div",{className:"objectif-progress",children:[r.jsxs("div",{className:"objectif-progress-labels",children:[r.jsxs("span",{className:"objectif-progress-value",children:[C.progression," / ",C.cible]}),r.jsxs("span",{className:"objectif-progress-cible",children:[A,"%"]})]}),r.jsx("div",{className:"objectif-progress-track",children:r.jsx("div",{className:`objectif-progress-fill ${C.statut==="atteint"?"atteint":""}`,style:{width:`${A}%`}})})]}),r.jsx("p",{className:`objectif-statut ${C.statut}`,children:C.statut==="atteint"?" Objectif atteint !":C.statut==="en_cours"?" En cours...":" Non commenc"})]},C.id)})}):r.jsxs("div",{className:"suivi-empty",children:[r.jsx("div",{className:"suivi-empty-icon",children:""}),r.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),r.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),r.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",v.length>0&&r.jsx("span",{className:"suivi-section-badge",children:v.length})]}),v.length>0?r.jsx("div",{className:"lacunes-grid",children:v.map(C=>r.jsxs("div",{className:`lacune-card ${C.niveauUrgence}`,children:[r.jsxs("div",{className:"lacune-card-header",children:[r.jsx("span",{className:"lacune-discipline",children:C.disciplineNom}),r.jsx("span",{className:`lacune-badge ${C.niveauUrgence}`,children:iT(C.niveauUrgence)})]}),r.jsxs("div",{className:"lacune-score-bar",children:[r.jsxs("div",{className:"lacune-score-labels",children:[r.jsxs("span",{className:"lacune-score-value",style:{color:Zf(C.niveauUrgence)},children:[C.moyenne,"/20"]}),r.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),r.jsx("div",{className:"lacune-progress-track",children:r.jsx("div",{className:`lacune-progress-fill ${C.niveauUrgence}`,style:{width:`${C.moyenne/20*100}%`}})})]}),r.jsxs("div",{className:"lacune-details",children:[r.jsxs("span",{className:"lacune-detail-tag",children:[sT(C.tendance)," ",C.tendance]}),r.jsxs("span",{className:"lacune-detail-tag",children:[" ",C.nombreQuiz," quiz"]}),r.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",C.scoreDetails.dernierScore,"/20"]})]})]},C.id))}):r.jsxs("div",{className:"suivi-empty",children:[r.jsx("div",{className:"suivi-empty-icon",children:""}),r.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),r.jsx("p",{className:"suivi-empty-text",children:j>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),r.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),b.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",r.jsx("span",{className:"suivi-section-badge",children:b.length})]}),r.jsx("div",{className:"recommandations-list",children:b.map(C=>r.jsxs("div",{className:"recommandation-card",children:[r.jsx("div",{className:"recommandation-priorite",children:C.priorite}),r.jsxs("div",{className:"recommandation-content",children:[r.jsx("p",{className:"recommandation-titre",children:C.titre}),r.jsx("p",{className:"recommandation-description",children:C.description}),r.jsx("span",{className:"recommandation-discipline-tag",children:C.disciplineNom})]})]},C.id))})]}),r.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:r.jsx("button",{className:"suivi-cta-btn",onClick:()=>t("/disciplines"),children:" Passer un quiz maintenant"})})]})})},CX=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1,l=[];for(let o=-1;o<=3;o++){const u=a+o;l.push(`${u}-${u+1}`)}return l},x2=CX(),uc=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()>=9?t:t-1;return`${a}-${a+1}`},y2=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],AX=({onSelectGroupe:e})=>{const{currentUser:t}=lt(),[n,a]=y.useState([]),[l,o]=y.useState(new Map),[u,d]=y.useState([]),[m,p]=y.useState(!0),[h,v]=y.useState(null),[b,g]=y.useState(!1),[_,j]=y.useState(!1),[S,w]=y.useState(null),[E,C]=y.useState(null),[A,O]=y.useState(null),[T,P]=y.useState(!1),[R,I]=y.useState(null),[L,K]=y.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:uc()}),[U,G]=y.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:uc()}),[V,M]=y.useState("actif");y.useEffect(()=>{(async()=>{try{const F=await Qa.getAll();d(F.map(oe=>({id:oe.id,nom:oe.nom,classe:oe.classe||""})))}catch(F){console.warn(" Impossible de charger les disciplines:",F)}})()},[]);const k=y.useCallback(async()=>{if(t?.uid)try{p(!0),v(null);const W=await fT(t.uid);a(W);const F=new Map;for(const oe of W)if(oe.statut==="actif")try{const X=await r0(oe.id);F.set(oe.id,X)}catch{console.warn(`Stats indisponibles pour ${oe.nom}`)}o(F)}catch(W){console.error("Erreur chargement groupes:",W),v("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{p(!1)}},[t?.uid]);y.useEffect(()=>{k()},[k]);const J=(W,F=!1)=>{const oe=u.find(ye=>ye.id===W),X=oe?`${oe.nom}${oe.classe?` (${oe.classe})`:""}`:"";F?G(ye=>({...ye,matiereId:W,matiereNom:X})):K(ye=>({...ye,matiereId:W,matiereNom:X}))},Q=async W=>{if(W.preventDefault(),!(!t?.uid||!L.nom.trim()||!L.matiereId))try{j(!0),await oX(t.uid,t.displayName||t.email||"Professeur",L),K({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:uc()}),g(!1),I("Groupe cr avec succs !"),setTimeout(()=>I(null),3e3),await k()}catch(F){v(F.message||"Erreur lors de la cration du groupe.")}finally{j(!1)}},B=W=>{O(W),G({nom:W.nom,description:W.description||"",matiereId:W.matiereId,matiereNom:W.matiereNom,classeNiveau:W.classeNiveau,anneeScolaire:W.anneeScolaire}),g(!1)},q=()=>{O(null),G({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:uc()})},fe=async W=>{if(W.preventDefault(),!(!A||!U.nom.trim()||!U.matiereId))try{P(!0),await mT(A.id,{nom:U.nom.trim(),description:U.description?.trim()||"",matiereId:U.matiereId,matiereNom:U.matiereNom,classeNiveau:U.classeNiveau,anneeScolaire:U.anneeScolaire}),O(null),I("Groupe modifi avec succs !"),setTimeout(()=>I(null),3e3),await k()}catch(F){v(F.message||"Erreur lors de la modification du groupe.")}finally{P(!1)}},te=async W=>{try{await navigator.clipboard.writeText(W),w(W),setTimeout(()=>w(null),2e3)}catch{const F=document.createElement("textarea");F.value=W,document.body.appendChild(F),F.select(),document.execCommand("copy"),document.body.removeChild(F),w(W),setTimeout(()=>w(null),2e3)}},ue=async W=>{try{await uX(W),C(null),await k()}catch(F){v(F.message)}},he=async W=>{try{await dX(W),await k()}catch(F){v(F.message)}},xe=async W=>{try{await fX(W),await k()}catch(F){v(F.message)}},H=(W,F)=>{K(oe=>({...oe,[W]:F}))},pe=(W,F)=>{G(oe=>({...oe,[W]:F}))},Ee=n.filter(W=>V==="tous"?!0:W.statut===V),le=(W,F,oe)=>r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:W,children:"Discipline / Matire *"}),r.jsxs("select",{id:W,value:F,onChange:X=>oe(X.target.value),className:"prof-select",required:!0,children:[r.jsx("option",{value:"",children:" Slectionner une discipline "}),u.map(X=>r.jsxs("option",{value:X.id,children:[X.nom,X.classe?` (${X.classe})`:""]},X.id))]}),u.length===0&&r.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return m?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):r.jsxs("div",{className:"groupe-manager",children:[r.jsxs("div",{className:"groupe-manager-header",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),r.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",uc()]})]}),r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{g(!b),A&&q()},children:b?" Annuler":" Nouveau groupe"})]}),h&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[r.jsx("span",{children:""})," ",h,r.jsx("button",{onClick:()=>v(null),className:"prof-alert-close",children:""})]}),R&&r.jsxs("div",{className:"prof-alert prof-alert-success",children:[r.jsx("span",{children:""})," ",R,r.jsx("button",{onClick:()=>I(null),className:"prof-alert-close",children:""})]}),b&&r.jsxs("div",{className:"groupe-form-container",children:[r.jsx("h3",{children:"Crer un nouveau groupe-classe"}),r.jsxs("form",{onSubmit:Q,className:"groupe-form",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),r.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:L.nom,onChange:W=>H("nom",W.target.value),required:!0,className:"prof-input",maxLength:60})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),r.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:L.description||"",onChange:W=>H("description",W.target.value),className:"prof-input",maxLength:120})]}),r.jsxs("div",{className:"prof-form-row",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),r.jsx("select",{id:"groupe-niveau",value:L.classeNiveau,onChange:W=>H("classeNiveau",W.target.value),className:"prof-select",children:y2.map(W=>r.jsx("option",{value:W.value,children:W.label},W.value))})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),r.jsx("select",{id:"groupe-annee",value:L.anneeScolaire,onChange:W=>H("anneeScolaire",W.target.value),className:"prof-select",children:x2.map(W=>r.jsx("option",{value:W,children:W},W))})]})]}),le("groupe-discipline",L.matiereId,W=>J(W,!1)),r.jsx("div",{className:"prof-form-actions",children:r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:_||!L.nom.trim()||!L.matiereId,children:_?" Cration...":" Crer le groupe"})})]})]}),A&&r.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[r.jsxs("h3",{children:[" Modifier le groupe : ",A.nom]}),r.jsxs("form",{onSubmit:fe,className:"groupe-form",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),r.jsx("input",{id:"edit-groupe-nom",type:"text",value:U.nom,onChange:W=>pe("nom",W.target.value),required:!0,className:"prof-input",maxLength:60})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),r.jsx("input",{id:"edit-groupe-desc",type:"text",value:U.description||"",onChange:W=>pe("description",W.target.value),className:"prof-input",maxLength:120})]}),r.jsxs("div",{className:"prof-form-row",children:[r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),r.jsx("select",{id:"edit-groupe-niveau",value:U.classeNiveau,onChange:W=>pe("classeNiveau",W.target.value),className:"prof-select",children:y2.map(W=>r.jsx("option",{value:W.value,children:W.label},W.value))})]}),r.jsxs("div",{className:"prof-form-group",children:[r.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),r.jsx("select",{id:"edit-groupe-annee",value:U.anneeScolaire,onChange:W=>pe("anneeScolaire",W.target.value),className:"prof-select",children:x2.map(W=>r.jsx("option",{value:W,children:W},W))})]})]}),le("edit-groupe-discipline",U.matiereId,W=>J(W,!0)),r.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:T||!U.nom.trim()||!U.matiereId,children:T?" Enregistrement...":" Enregistrer"}),r.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:q,disabled:T,children:" Annuler"})]})]})]}),r.jsxs("div",{className:"groupe-filtres",children:[r.jsxs("button",{className:`prof-filtre-btn ${V==="actif"?"active":""}`,onClick:()=>M("actif"),children:["Actifs (",n.filter(W=>W.statut==="actif").length,")"]}),r.jsxs("button",{className:`prof-filtre-btn ${V==="archive"?"active":""}`,onClick:()=>M("archive"),children:["Archivs (",n.filter(W=>W.statut==="archive").length,")"]}),r.jsxs("button",{className:`prof-filtre-btn ${V==="tous"?"active":""}`,onClick:()=>M("tous"),children:["Tous (",n.length,")"]})]}),Ee.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:V==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),r.jsx("p",{children:V==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),V!=="archive"&&r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>g(!0),children:" Crer mon premier groupe"})]}):r.jsx("div",{className:"groupe-grid",children:Ee.map(W=>{const F=l.get(W.id),oe=A?.id===W.id;return r.jsxs("div",{className:`groupe-card ${W.statut==="archive"?"groupe-card-archive":""} ${oe?"groupe-card-editing":""}`,children:[r.jsxs("div",{className:"groupe-card-header",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"groupe-card-titre",children:W.nom}),r.jsx("span",{className:"groupe-card-matiere",children:W.matiereNom})]}),r.jsx("span",{className:`groupe-badge groupe-badge-${W.statut}`,children:W.statut==="actif"?" Actif":" Archiv"})]}),W.description&&r.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:W.description}),r.jsxs("div",{className:"groupe-card-infos",children:[r.jsxs("span",{children:[" ",W.classeNiveau]}),r.jsxs("span",{children:[" ",W.anneeScolaire]}),r.jsxs("span",{children:[" ",W.nombreInscrits," lve",W.nombreInscrits!==1?"s":""]})]}),r.jsxs("div",{className:"groupe-card-code",children:[r.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),r.jsxs("div",{className:"groupe-code-box",children:[r.jsx("code",{className:"groupe-code-value",children:W.codeInvitation}),r.jsx("button",{className:"prof-btn-icon",onClick:X=>{X.stopPropagation(),te(W.codeInvitation)},title:"Copier le code",children:S===W.codeInvitation?"":""}),W.statut==="actif"&&r.jsx("button",{className:"prof-btn-icon",onClick:X=>{X.stopPropagation(),xe(W.id)},title:"Rgnrer le code",children:""})]})]}),F&&F.nombreEleves>0&&r.jsxs("div",{className:"groupe-card-stats",children:[r.jsxs("div",{className:"groupe-stat-item",children:[r.jsx("span",{className:"groupe-stat-value",children:F.moyenneClasse}),r.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),r.jsxs("div",{className:"groupe-stat-item",children:[r.jsxs("span",{className:"groupe-stat-value",children:[F.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),r.jsxs("div",{className:"groupe-stat-item",children:[r.jsx("span",{className:"groupe-stat-value",children:F.elevesEnDifficulte}),r.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),r.jsxs("div",{className:"groupe-card-actions",children:[W.statut==="actif"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>e(W),children:" Voir dtails"}),r.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>B(W),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>he(W.id),children:" Archiver"})]}),E===W.id?r.jsxs("div",{className:"groupe-confirm-suppression",children:[r.jsx("span",{children:"Confirmer ?"}),r.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>ue(W.id),children:"Oui, supprimer"}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>C(null),children:"Non"})]}):r.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>C(W.id),children:" Supprimer"})]})]},W.id)})})]})},EX=({groupe:e,onRetour:t})=>{const[n,a]=y.useState(null),[l,o]=y.useState([]),[u,d]=y.useState([]),[m,p]=y.useState([]),[h,v]=y.useState(null),[b,g]=y.useState(!0),[_,j]=y.useState(null),[S,w]=y.useState("apercu"),[E,C]=y.useState("moyenne_desc"),[A,O]=y.useState(null),[T,P]=y.useState(null),[R,I]=y.useState(!1),[L,K]=y.useState(null),U=y.useCallback(async()=>{try{g(!0),j(null);const[q,fe,te]=await Promise.all([r0(e.id),vX(e.id),xX(e.matiereId)]);a(q),o(fe),p(te);const ue=yX(fe,e.nom);d(ue)}catch(q){console.error("Erreur chargement dtail groupe:",q),j("Impossible de charger les donnes du groupe.")}finally{g(!1)}},[e.id,e.matiereId,e.nom]);y.useEffect(()=>{U()},[U]);const G=async q=>{try{I(!0),P(q);const fe=await gX(e.id,q);v(fe)}catch(fe){console.error("Erreur analyse quiz:",fe)}finally{I(!1)}},V=()=>{const q=bX(l,e.nom),fe=`PedaClic_${e.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;jX(q,fe)},M=async q=>{try{K(q);const te=(await ep(e.id)).find(ue=>ue.eleveId===q);te&&(await hX(te.id,e.id),await U())}catch(fe){j(fe.message)}finally{K(null)}},k=[...l].sort((q,fe)=>{switch(E){case"moyenne_desc":return fe.moyenne-q.moyenne;case"moyenne_asc":return q.moyenne-fe.moyenne;case"nom":return q.eleveNom.localeCompare(fe.eleveNom);case"streak":return fe.streak.actuel-q.streak.actuel;case"quiz_count":return fe.totalQuiz-q.totalQuiz;default:return 0}}),J=q=>q>=16?"prof-note-excellent":q>=12?"prof-note-bien":q>=10?"prof-note-passable":q>=8?"prof-note-insuffisant":"prof-note-critique",Q=q=>{switch(q){case"hausse":return"";case"baisse":return"";default:return""}},B=q=>{switch(q){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return b?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsxs("p",{children:['Chargement des donnes de "',e.nom,'"...']})]}):r.jsxs("div",{className:"groupe-detail",children:[r.jsxs("div",{className:"groupe-detail-header",children:[r.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:t,children:" Retour aux groupes"}),r.jsxs("div",{className:"groupe-detail-titre-section",children:[r.jsx("h2",{className:"groupe-detail-titre",children:e.nom}),r.jsxs("p",{className:"groupe-detail-subtitle",children:[e.matiereNom,"  ",e.classeNiveau,"  ",e.anneeScolaire]})]}),r.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:V,children:" Export CSV"})]}),_&&r.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",_,r.jsx("button",{onClick:()=>j(null),className:"prof-alert-close",children:""})]}),r.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:l.length},{id:"quiz",label:" Quiz",count:m.length},{id:"alertes",label:" Alertes",count:u.length}].map(q=>r.jsxs("button",{className:`groupe-onglet ${S===q.id?"active":""}`,onClick:()=>w(q.id),children:[q.label,q.count!==null&&q.count>0&&r.jsx("span",{className:"groupe-onglet-badge",children:q.count})]},q.id))}),S==="apercu"&&n&&r.jsxs("div",{className:"groupe-apercu",children:[r.jsxs("div",{className:"groupe-stats-grid",children:[r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:`groupe-stat-card-value ${J(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),r.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),r.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),r.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),r.jsxs("div",{className:"groupe-stat-card",children:[r.jsx("div",{className:"groupe-stat-card-icon",children:""}),r.jsxs("div",{className:"groupe-stat-card-content",children:[r.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),r.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),r.jsx("div",{className:"groupe-apercu-notes",children:r.jsxs("div",{className:"groupe-note-range",children:[r.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),r.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),r.jsx("div",{className:"groupe-note-barre",children:r.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),r.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),l.length>=3&&r.jsxs("div",{className:"groupe-apercu-classement",children:[r.jsxs("div",{className:"groupe-classement-section",children:[r.jsx("h4",{children:" Top 3"}),l.slice(0,3).map((q,fe)=>r.jsxs("div",{className:"groupe-classement-item",children:[r.jsx("span",{className:"groupe-classement-rang",children:fe===0?"":fe===1?"":""}),r.jsx("span",{className:"groupe-classement-nom",children:q.eleveNom}),r.jsxs("span",{className:`groupe-classement-note ${J(q.moyenne)}`,children:[q.moyenne,"/20"]})]},q.eleveId))]}),r.jsxs("div",{className:"groupe-classement-section",children:[r.jsx("h4",{children:"  surveiller"}),l.filter(q=>q.moyenne<8&&q.totalQuiz>0).slice(0,3).map(q=>r.jsxs("div",{className:"groupe-classement-item",children:[r.jsx("span",{className:"groupe-classement-rang",children:""}),r.jsx("span",{className:"groupe-classement-nom",children:q.eleveNom}),r.jsxs("span",{className:`groupe-classement-note ${J(q.moyenne)}`,children:[q.moyenne,"/20"]})]},q.eleveId)),l.filter(q=>q.moyenne<8&&q.totalQuiz>0).length===0&&r.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),S==="eleves"&&r.jsxs("div",{className:"groupe-eleves",children:[r.jsxs("div",{className:"groupe-eleves-toolbar",children:[r.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),r.jsxs("select",{id:"tri-eleves",value:E,onChange:q=>C(q.target.value),className:"prof-select prof-select-sm",children:[r.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),r.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),r.jsx("option",{value:"nom",children:"Nom (A-Z)"}),r.jsx("option",{value:"streak",children:"Streak ()"}),r.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),r.jsxs("span",{className:"groupe-eleves-count",children:[l.length," lve",l.length!==1?"s":""]})]}),l.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Aucun lve inscrit"}),r.jsxs("p",{children:["Partagez le code ",r.jsx("strong",{children:e.codeInvitation}),"  vos lves."]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"groupe-eleves-table-wrapper",children:r.jsxs("table",{className:"groupe-eleves-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"#"}),r.jsx("th",{children:"lve"}),r.jsx("th",{children:"Moyenne"}),r.jsx("th",{children:"Quiz"}),r.jsx("th",{children:"Russite"}),r.jsx("th",{children:"Streak"}),r.jsx("th",{children:"Tendance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:k.map((q,fe)=>r.jsxs("tr",{className:`${A===q.eleveId?"groupe-eleve-row-active":""}`,children:[r.jsx("td",{className:"groupe-eleve-rang",children:fe+1}),r.jsx("td",{className:"groupe-eleve-nom-cell",children:r.jsxs("div",{children:[r.jsx("strong",{children:q.eleveNom}),r.jsx("span",{className:"groupe-eleve-email",children:q.eleveEmail})]})}),r.jsx("td",{children:r.jsxs("span",{className:`groupe-note-badge ${J(q.moyenne)}`,children:[q.moyenne,"/20"]})}),r.jsx("td",{children:q.totalQuiz}),r.jsxs("td",{children:[q.tauxReussite,"%"]}),r.jsx("td",{children:r.jsxs("span",{className:"groupe-streak",children:[" ",q.streak.actuel,"j"]})}),r.jsxs("td",{children:[Q(q.tendance)," ",q.tendance]}),r.jsxs("td",{className:"groupe-eleve-actions",children:[r.jsx("button",{className:"prof-btn-icon",onClick:()=>O(A===q.eleveId?null:q.eleveId),title:"Voir dtails",children:A===q.eleveId?"":""}),r.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>M(q.eleveId),disabled:L===q.eleveId,title:"Retirer du groupe",children:L===q.eleveId?"":""})]})]},q.eleveId))})]})}),A&&(()=>{const q=l.find(fe=>fe.eleveId===A);return q?r.jsxs("div",{className:"groupe-eleve-detail",children:[r.jsxs("div",{className:"groupe-eleve-detail-header",children:[r.jsxs("h3",{children:[" Dtail  ",q.eleveNom]}),r.jsx("button",{className:"prof-btn-icon",onClick:()=>O(null),children:""})]}),r.jsxs("div",{className:"groupe-eleve-detail-grid",children:[r.jsxs("div",{className:"groupe-eleve-detail-card",children:[r.jsx("h4",{children:"Score global"}),r.jsx("div",{className:"groupe-eleve-score-circle",children:r.jsxs("span",{className:J(q.scoreGlobal/5),children:[q.scoreGlobal,"/100"]})})]}),r.jsxs("div",{className:"groupe-eleve-detail-card",children:[r.jsx("h4",{children:" Streak"}),r.jsxs("p",{children:["Actuel : ",r.jsxs("strong",{children:[q.streak.actuel," jour",q.streak.actuel!==1?"s":""]})]}),r.jsxs("p",{children:["Meilleur : ",q.streak.meilleur," jours"]})]}),r.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[r.jsx("h4",{children:" Lacunes dtectes"}),q.lacunes.length===0?r.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):r.jsx("ul",{className:"groupe-lacunes-liste",children:q.lacunes.map((fe,te)=>r.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${fe.niveauUrgence}`,children:[r.jsxs("span",{className:"groupe-lacune-nom",children:[fe.disciplineNom,fe.chapitre&&`  ${fe.chapitre}`]}),r.jsxs("span",{className:"groupe-lacune-moyenne",children:[fe.moyenne,"/20"]}),r.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${fe.niveauUrgence}`,children:fe.niveauUrgence})]},te))})]})]})]}):null})()]})]}),S==="quiz"&&r.jsxs("div",{className:"groupe-quiz",children:[r.jsxs("div",{className:"groupe-quiz-selector",children:[r.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),r.jsxs("select",{id:"select-quiz",value:T||"",onChange:q=>{q.target.value&&G(q.target.value)},className:"prof-select",children:[r.jsx("option",{value:"",children:" Choisir un quiz "}),m.map(q=>r.jsx("option",{value:q.id,children:q.titre},q.id))]})]}),!T&&r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Analyse par quiz"}),r.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),R&&r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Analyse en cours..."})]}),h&&!R&&r.jsxs("div",{className:"groupe-quiz-resultats",children:[r.jsxs("div",{className:"groupe-quiz-stats-header",children:[r.jsx("h3",{children:h.quizTitre}),r.jsxs("div",{className:"groupe-quiz-stats-grid",children:[r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsx("span",{className:"groupe-stat-mini-value",children:h.totalPassages}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:`groupe-stat-mini-value ${J(h.moyenneScore)}`,children:[h.moyenneScore,"/20"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:"groupe-stat-mini-value",children:[h.tauxReussite,"%"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),r.jsxs("div",{className:"groupe-stat-mini",children:[r.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(h.tempsEcouleMoyen/60),"min"]}),r.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),r.jsxs("div",{className:"groupe-quiz-questions",children:[r.jsx("h4",{children:" Questions les plus rates"}),h.questionsRatees.filter(q=>q.tauxEchec>30).map((q,fe)=>r.jsxs("div",{className:"groupe-quiz-question-card",children:[r.jsxs("div",{className:"groupe-quiz-question-header",children:[r.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",q.questionIndex+1]}),r.jsxs("span",{className:"groupe-quiz-question-echec",children:[q.tauxEchec,"% d'chec"]})]}),r.jsx("p",{className:"groupe-quiz-question-texte",children:q.questionTexte}),r.jsx("div",{className:"groupe-quiz-question-reponse",children:r.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",q.reponseCorrecte]})}),q.reponsesFrequentes.length>0&&r.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[r.jsx("span",{children:"Erreurs frquentes :"}),q.reponsesFrequentes.slice(0,2).map((te,ue)=>r.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",te.reponse," (",te.nombre," lve",te.nombre>1?"s":"",")"]},ue))]})]},fe)),h.questionsRatees.filter(q=>q.tauxEchec>30).length===0&&r.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),S==="alertes"&&r.jsx("div",{className:"groupe-alertes",children:u.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Aucune alerte"}),r.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):r.jsx("div",{className:"groupe-alertes-liste",children:u.map(q=>r.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${q.niveauUrgence}`,children:[r.jsxs("div",{className:"groupe-alerte-header",children:[r.jsx("span",{className:"groupe-alerte-emoji",children:B(q.type)}),r.jsx("span",{className:"groupe-alerte-eleve",children:q.eleveNom}),r.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${q.niveauUrgence}`,children:q.niveauUrgence})]}),r.jsx("p",{className:"groupe-alerte-message",children:q.message}),r.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{w("eleves"),O(q.eleveId)},children:" Voir dtail"})]},q.id))})})]})},zX=()=>{const{currentUser:e}=lt(),t=yt(),[n,a]=y.useState("overview"),[l,o]=y.useState(null),[u,d]=y.useState(0),[m,p]=y.useState(0),[h,v]=y.useState(0),[b,g]=y.useState(0),[_,j]=y.useState([]),[S,w]=y.useState(!0),E=y.useCallback(async()=>{if(e?.uid)try{w(!0);const T=(await fT(e.uid)).filter(U=>U.statut==="actif");d(T.length);let P=0,R=0,I=0,L=0;const K=[];for(const U of T)try{const G=await r0(U.id);P+=G.nombreEleves,G.nombreEleves>0&&(R+=G.moyenneClasse,I++),L+=G.elevesEnDifficulte,K.push({...U,stats:G})}catch{K.push({...U})}p(P),v(I>0?Math.round(R/I*10)/10:0),g(L),j(K)}catch(O){console.error("Erreur chargement rsum prof:",O)}finally{w(!1)}},[e?.uid]);y.useEffect(()=>{E()},[E]);const C=O=>{o(O),a("detail")},A=()=>{o(null),a("groupes"),E()};return S?r.jsxs("div",{className:"prof-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement de votre espace professeur..."})]}):r.jsxs("div",{className:"prof-dashboard",children:[r.jsx("header",{className:"prof-dashboard-header",children:r.jsxs("div",{children:[r.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),r.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",e?.displayName||"Professeur"," "]})]})}),n!=="detail"&&r.jsxs("nav",{className:"prof-nav",children:[r.jsx("button",{className:`prof-nav-btn ${n==="overview"?"active":""}`,onClick:()=>a("overview"),children:" Vue d'ensemble"}),r.jsx("button",{className:`prof-nav-btn ${n==="groupes"?"active":""}`,onClick:()=>a("groupes"),children:" Mes groupes-classes"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/cahiers"),children:" Cahier de textes"}),r.jsx("button",{className:"prof-nav-btn",onClick:()=>t("/prof/sequences"),children:" Squences pdagogiques"})]}),n==="overview"&&r.jsxs("div",{className:"prof-overview",children:[r.jsxs("div",{className:"prof-overview-cards",children:[r.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>a("groupes"),children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:"prof-overview-card-value",children:u}),r.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",u!==1?"s":""," actif",u!==1?"s":""]})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:"prof-overview-card-value",children:m}),r.jsxs("span",{className:"prof-overview-card-label",children:["lve",m!==1?"s":""," inscrit",m!==1?"s":""]})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),r.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),r.jsxs("div",{className:"prof-overview-card",children:[r.jsx("div",{className:"prof-overview-card-icon",children:""}),r.jsxs("div",{className:"prof-overview-card-content",children:[r.jsx("span",{className:`prof-overview-card-value ${b>0?"prof-note-critique":""}`,children:b}),r.jsxs("span",{className:"prof-overview-card-label",children:["lve",b!==1?"s":""," en difficult"]})]})]})]}),_.length===0?r.jsxs("div",{className:"prof-empty-state",children:[r.jsx("div",{className:"prof-empty-icon",children:""}),r.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),r.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),r.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>a("groupes"),children:" Crer un groupe-classe"})]}):r.jsxs("div",{className:"prof-overview-groupes",children:[r.jsx("h2",{children:"Mes groupes"}),r.jsx("div",{className:"prof-overview-groupes-grid",children:_.map(O=>r.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>C(O),children:[r.jsxs("div",{className:"prof-overview-groupe-header",children:[r.jsx("h3",{children:O.nom}),r.jsx("span",{className:"prof-overview-groupe-matiere",children:O.matiereNom})]}),O.stats&&r.jsxs("div",{className:"prof-overview-groupe-stats",children:[r.jsxs("div",{children:[r.jsx("span",{className:"prof-overview-groupe-stat-value",children:O.stats.nombreEleves}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[O.stats.moyenneClasse,"/20"]}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[O.stats.tauxReussite,"%"]}),r.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),r.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},O.id))})]})]}),n==="groupes"&&r.jsx(AX,{onSelectGroupe:C}),n==="detail"&&l&&r.jsx(EX,{groupe:l,onRetour:A})]})},OX=e=>{if(!e?.length)return{label:"",color:"#9ca3af"};const t=e.map(a=>a.difficulte),n=t.reduce((a,l)=>a+(l==="facile"?1:l==="moyen"?2:3),0)/t.length;return n<1.5?{label:"Facile",color:"#059669"}:n<2.5?{label:"Moyen",color:"#d97706"}:{label:"Difficile",color:"#dc2626"}},DX=e=>e?.reduce((t,n)=>t+(n.points??0),0)??0,MX=()=>{const e=yt(),{currentUser:t}=lt(),[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(""),[m,p]=y.useState("");y.useEffect(()=>{(async()=>{try{const b=await H2();a(b)}catch{d("Impossible de charger les quiz.")}finally{o(!1)}})()},[]);const h=n.filter(v=>v.titre.toLowerCase().includes(m.toLowerCase())||(v.description??"").toLowerCase().includes(m.toLowerCase()));return r.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"2rem 1rem"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:800,color:"#1f2937",margin:"0 0 0.4rem"},children:" Quiz disponibles"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"0.95rem",margin:0},children:"Testez vos connaissances avec nos quiz interactifs"})]}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsx("input",{type:"text",placeholder:"Rechercher un quiz...",value:m,onChange:v=>p(v.target.value),style:{width:"100%",maxWidth:400,padding:"0.6rem 1rem",border:"1.5px solid #e5e7eb",borderRadius:10,fontSize:"0.9rem",outline:"none",boxSizing:"border-box"}})}),l&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:[r.jsx("div",{style:{width:36,height:36,border:"3px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto 1rem"}}),"Chargement des quiz..."]}),u&&r.jsxs("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.9rem 1.2rem",borderRadius:10,marginBottom:"1.5rem"},children:[" ",u]}),!l&&!u&&h.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#9ca3af"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.75rem",opacity:.4},children:""}),r.jsx("p",{style:{margin:0},children:m?"Aucun quiz ne correspond  votre recherche.":"Aucun quiz disponible pour le moment."})]}),!l&&!u&&h.length>0&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.25rem"},children:h.map(v=>{const b=OX(v.questions),g=DX(v.questions),_=v.questions?.length??0,j=v.isPremium,S=!j||t?.isPremium;return r.jsxs("div",{onClick:()=>S&&e(`/quiz-avance/${v.id}`),style:{background:"white",borderRadius:14,boxShadow:"0 2px 10px rgba(0,0,0,0.08)",padding:"1.25rem",cursor:S?"pointer":"default",opacity:S?1:.65,transition:"transform 0.15s, box-shadow 0.15s",border:"1.5px solid #f3f4f6",display:"flex",flexDirection:"column",gap:"0.6rem",position:"relative"},onMouseEnter:w=>{S&&(w.currentTarget.style.transform="translateY(-3px)",w.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.12)")},onMouseLeave:w=>{w.currentTarget.style.transform="",w.currentTarget.style.boxShadow="0 2px 10px rgba(0,0,0,0.08)"},children:[j&&r.jsx("span",{style:{position:"absolute",top:12,right:12,background:"#fef3c7",color:"#d97706",fontSize:"0.7rem",fontWeight:700,padding:"0.15rem 0.5rem",borderRadius:20},children:" Premium"}),r.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0,lineHeight:1.3,paddingRight:j?"4rem":0},children:v.titre}),v.description&&r.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:0,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},dangerouslySetInnerHTML:{__html:v.description}}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginTop:"0.25rem"},children:[r.jsxs("span",{style:{fontSize:"0.75rem",background:"#eff6ff",color:"#2563eb",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",_," question",_>1?"s":""]}),r.jsxs("span",{style:{fontSize:"0.75rem",background:"#f3f4f6",color:"#374151",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",v.duree," min"]}),g>0&&r.jsxs("span",{style:{fontSize:"0.75rem",background:"#f0fdf4",color:"#059669",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",g," pts"]}),r.jsx("span",{style:{fontSize:"0.75rem",background:"#fafafa",color:b.color,padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:700,border:`1px solid ${b.color}30`},children:b.label})]}),r.jsx("button",{disabled:!S,onClick:w=>{w.stopPropagation(),S&&e(`/quiz-avance/${v.id}`)},style:{marginTop:"auto",padding:"0.55rem 1rem",background:S?"#2563eb":"#e5e7eb",color:S?"white":"#9ca3af",border:"none",borderRadius:8,fontWeight:600,fontSize:"0.85rem",cursor:S?"pointer":"not-allowed",transition:"background 0.15s"},children:S?" Commencer le quiz":" Premium requis"})]},v.id)})}),!l&&h.length>0&&r.jsxs("p",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.8rem",marginTop:"2rem"},children:[h.length," quiz",(h.length>1,"")," disponible",h.length>1?"s":""]})]})},TX="quizzes",kX="quizzes_v2",b2=50;function PX(e){const t=e.data();return{id:e.id,titre:t.titre||"Quiz sans titre",description:t.description||"",matiere:t.matiere||t.disciplineId||"",niveau:t.niveau||"",classe:t.classe||"",nombreQuestions:Array.isArray(t.questions)?t.questions.length:0,duree:t.duree||void 0,difficulte:t.difficulte||"moyen",source:"quizzes",isPremium:!1,createdAt:t.createdAt||void 0}}function qX(e){const t=e.data();return{id:e.id,titre:t.titre||"Quiz sans titre",description:t.description||"",matiere:t.matiere||"",niveau:t.niveau||"",classe:t.classe||"",nombreQuestions:Array.isArray(t.questions)?t.questions.length:0,duree:t.dureeEstimee||void 0,difficulte:t.difficulte||"moyen",source:"quizzes_v2",isPremium:!1,createdAt:t.createdAt||void 0}}async function pT(){const[e,t]=await Promise.all([De(Re(be(ie,TX),Ce("isPremium","==",!1),Je("createdAt","desc"),Nn(b2))),De(Re(be(ie,kX),Ce("isPremium","==",!1),Je("createdAt","desc"),Nn(b2)))]),n=e.docs.map(PX),a=t.docs.map(qX);return[...n,...a].sort((l,o)=>{const u=l.createdAt?.toMillis()??0;return(o.createdAt?.toMillis()??0)-u})}async function RX(){return(await pT()).slice(0,3)}const IX={"6eme":1,"6me":1,"5eme":2,"5me":2,"4eme":3,"4me":3,"3eme":4,"3me":4,"2nde":5,seconde:5,"1ere":6,"1re":6,terminale:7};function j2(e){const t=e.toLowerCase().trim();return IX[t]??99}function hT(){const[e,t]=y.useState([]),[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null);return y.useEffect(()=>{let m=!1;async function p(){o(!0),d(null);try{const h=Re(be(ie,"disciplines"),Je("ordre")),v=await De(h);if(m)return;const b=new Set,g=new Set;v.forEach(S=>{const w=S.data();w.nom&&typeof w.nom=="string"&&b.add(w.nom.trim()),w.classe&&typeof w.classe=="string"&&g.add(w.classe.trim())});const _=Array.from(b).sort((S,w)=>S.localeCompare(w,"fr")).map(S=>({valeur:S,label:S})),j=Array.from(g).sort((S,w)=>{const E=j2(S),C=j2(w);return E!==C?E-C:S.localeCompare(w,"fr")}).map(S=>({valeur:S,label:S}));t(_),a(j)}catch(h){m||(console.error("[useDisciplinesOptions] Erreur Firestore :",h),d("Impossible de charger les matires/niveaux."))}finally{m||o(!1)}}return p(),()=>{m=!0}},[]),{matieres:e,niveaux:n,loading:l,error:u}}const LX={facile:{label:"Facile",color:"#059669",bg:"#d1fae5"},moyen:{label:"Moyen",color:"#d97706",bg:"#fef3c7"},difficile:{label:"Difficile",color:"#dc2626",bg:"#fee2e2"}},$X=({quiz:e,onJouer:t,estConnecte:n})=>{const a=LX[e.difficulte??"moyen"];return r.jsxs("div",{className:"qg-card",onClick:()=>t(e),children:[r.jsxs("div",{className:"qg-card__header",children:[r.jsx("span",{className:`qg-card__source qg-card__source--${e.source}`,children:e.source==="quizzes_v2"?" Quiz avanc":" Quiz"}),r.jsx("span",{className:"qg-card__difficulte",style:{color:a.color,background:a.bg},children:a.label})]}),r.jsx("h3",{className:"qg-card__titre",children:e.titre}),e.description&&r.jsx("p",{className:"qg-card__description",children:e.description}),r.jsxs("div",{className:"qg-card__meta",children:[e.matiere&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.matiere]}),e.classe&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.classe]}),r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.nombreQuestions," question",e.nombreQuestions>1?"s":""]}),e.duree&&r.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.duree," min"]})]}),r.jsx("button",{className:"qg-card__btn",children:n?" Commencer":" Aperu"})]})},BX=()=>r.jsxs("div",{className:"qg-banniere qg-banniere--inscription",children:[r.jsx("div",{className:"qg-banniere__icone",children:""}),r.jsxs("div",{className:"qg-banniere__texte",children:[r.jsx("h3",{children:"Connectez-vous pour accder  tous les quiz gratuits"}),r.jsx("p",{children:"Crez un compte gratuitement et commencez  vous entraner ds maintenant."})]}),r.jsxs("div",{className:"qg-banniere__actions",children:[r.jsx(qe,{to:"/inscription",className:"btn btn-primary",children:"Crer un compte gratuit"}),r.jsx(qe,{to:"/connexion",className:"btn btn-secondary",children:"Se connecter"})]})]}),UX=()=>r.jsxs("div",{className:"qg-banniere qg-banniere--premium",children:[r.jsx("div",{className:"qg-banniere__icone",children:""}),r.jsxs("div",{className:"qg-banniere__texte",children:[r.jsx("h3",{children:"Dbloquez les Quiz Avancs Premium"}),r.jsx("p",{children:"Accdez  des centaines de quiz avancs avec corrections dtailles, suivi de progression et bien plus encore."}),r.jsxs("p",{className:"qg-banniere__prix",children:[r.jsx("strong",{children:"2 000 FCFA/mois"}),"  ",r.jsx("strong",{children:"20 000 FCFA/an"})]})]}),r.jsx(qe,{to:"/premium",className:"btn btn-premium",children:" Devenir Premium"})]}),FX=()=>{const e=yt(),{currentUser:t}=lt(),[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(""),[m,p]=y.useState(""),[h,v]=y.useState(""),[b,g]=y.useState(""),{matieres:_}=hT(),j=!!t,S=t?.isPremium??!1,w=t?.role==="prof"||t?.role==="admin";y.useEffect(()=>{(async()=>{o(!0),d("");try{const O=j?await pT():await RX();a(O)}catch(O){console.error("Erreur chargement quiz gratuits:",O),d("Impossible de charger les quiz. Veuillez ressayer.")}finally{o(!1)}})()},[j]);const E=n.filter(A=>{const O=!b||A.titre.toLowerCase().includes(b.toLowerCase())||A.matiere.toLowerCase().includes(b.toLowerCase()),T=!m||A.matiere.toLowerCase().includes(m.toLowerCase()),P=!h||(A.niveau??"").toLowerCase().includes(h.toLowerCase())||(A.classe??"").toLowerCase().includes(h.toLowerCase());return O&&T&&P}),C=A=>{if(!j){e("/connexion");return}A.source==="quizzes_v2"?e(`/quiz-avance/${A.id}`):e(`/quiz/${A.id}`)};return r.jsxs("div",{className:"qg-page",children:[r.jsxs("div",{className:"qg-hero",children:[r.jsxs("div",{className:"qg-hero__content",children:[r.jsx("h1",{className:"qg-hero__titre",children:" Quiz Gratuits"}),r.jsx("p",{className:"qg-hero__sous-titre",children:"Entranez-vous gratuitement avec nos quiz de rvision pour tous les niveaux du collge au lyce."}),r.jsxs("div",{className:"qg-hero__stats",children:[r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:n.length}),j?" quiz disponibles":"+ quiz"]}),r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:"100%"})," gratuit"]}),r.jsxs("span",{className:"qg-hero__stat",children:[r.jsx("strong",{children:"6me"}),"  ",r.jsx("strong",{children:"Terminale"})]})]})]}),(S||w)&&r.jsx(qe,{to:"/quizzes",className:"qg-hero__lien-premium",children:" Voir les Quiz Premium "})]}),r.jsxs("div",{className:"qg-filtres",children:[r.jsx("div",{className:"qg-filtres__recherche",children:r.jsx("input",{type:"text",placeholder:" Rechercher un quiz...",value:b,onChange:A=>g(A.target.value),className:"qg-filtres__input"})}),r.jsxs("select",{value:m,onChange:A=>p(A.target.value),className:"qg-filtres__select",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),_.map(A=>r.jsx("option",{value:A.valeur,children:A.label},A.valeur))]}),(m||h||b)&&r.jsx("button",{className:"qg-filtres__reset",onClick:()=>{p(""),v(""),g("")},children:" Rinitialiser"})]}),r.jsxs("div",{className:"qg-contenu",children:[l&&r.jsxs("div",{className:"qg-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des quiz..."})]}),!l&&u&&r.jsxs("div",{className:"qg-erreur",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"Ressayer"})]}),!l&&!u&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"qg-compteur",children:[E.length," quiz",E.length>1?"s":"",m?` en ${m}`:"",j?"":" (aperu  connectez-vous pour tout voir)"]}),E.length>0?r.jsx("div",{className:"qg-grille",children:E.map(A=>r.jsx($X,{quiz:A,onJouer:C,estConnecte:j},`${A.source}-${A.id}`))}):r.jsxs("div",{className:"qg-vide",children:[r.jsx("p",{children:" Aucun quiz trouv pour ces critres."}),r.jsx("button",{onClick:()=>{p(""),g("")},className:"btn btn-secondary",children:"Voir tous les quiz"})]}),!j&&r.jsx(BX,{}),j&&!S&&!w&&r.jsx(UX,{})]})]})]})},Bs="cahiers_textes",Bn="entrees_cahier",GX="groupes_prof",HX="ebooks";async function QX(e,t){const n=[Ce("profId","==",e),Je("updatedAt","desc")],a=Re(be(ie,Bs),...n);return(await De(a)).docs.map(o=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...o.data(),id:o.id}))}const vT=e=>QX(e);function VX(e,t,n,a){const l=[Ce("profId","==",e),Je("updatedAt","desc")];t&&l.splice(1,0,Ce("anneeScolaire","==",t));const o=Re(be(ie,Bs),...l);return gy(o,u=>{n(u.docs.map(d=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...d.data(),id:d.id})))},a)}async function gT(e){const t=await It(je(ie,Bs,e));return t.exists()?{groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...t.data(),id:t.id}:null}const xT=e=>tW(e);async function YX(e){const t=await It(je(ie,Bn,e));return t.exists()?{id:t.id,...t.data()}:null}async function KX(e,t,n,a){const l=`${Date.now()}_${n.name}`,o=`cahiers/${e}/${t}/${l}`,u=Br(Ur,o),d=D2(u,n);return new Promise((m,p)=>{d.on("state_changed",h=>{},p,async()=>{const h=await Ta(d.snapshot.ref);m({id:l,nom:n.name,url:h,type:n.type,taille:n.size,mimeType:n.type,uploadedAt:new Date().toISOString()})})})}async function N2(e,t,n){await Ze(je(ie,Bn,e),{piecesJointes:aq(...n),updatedAt:Le.now()})}async function XX(e,t,n){const a=t.find(l=>l.url===n);try{a?.id&&await gc(Br(Ur,`cahiers/${a.id}`))}catch{}a&&await Ze(je(ie,Bn,e),{piecesJointes:iq(a),updatedAt:Le.now()})}async function WX(e,t){const n=Le.now(),a=t.titre?.trim()||`${t.matiere} ${t.classe} ${t.anneeScolaire}`;return(await Lt(be(ie,Bs),{profId:e,titre:a,matiere:t.matiere,classe:t.classe,anneeScolaire:t.anneeScolaire,description:t.description||"",couleur:t.couleur,nombreSeancesPrevu:t.nombreSeancesPrevu,nombreSeancesRealise:0,isArchived:!1,groupeIds:t.groupeIds??[],groupeNoms:t.groupeNoms??[],isPartage:t.isPartage??!1,createdAt:n,updatedAt:n})).id}async function Jf(e,t){const n={...t};if("matiere"in t&&"classe"in t&&!("id"in t)){const a=t;a.titre?.trim()||(n.titre=`${a.matiere} ${a.classe} ${a.anneeScolaire}`)}await Ze(je(ie,Bs,e),{...n,updatedAt:Le.now()})}async function ZX(e){await Cn(je(ie,Bs,e))}async function JX(e){const t=await It(je(ie,Bs,e));if(!t.exists())return null;const n=t.data();return n.isPartage?{id:t.id,...n}:null}async function yT(e){const t=Re(be(ie,GX),Ce("profId","==",e),Je("nom","asc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function eW(){return(await De(be(ie,HX))).docs.map(t=>({id:t.id,...t.data()}))}async function tW(e){const t=Re(be(ie,Bn),Ce("cahierId","==",e),Je("ordre","asc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}const rW=async(e,t,n)=>{const a=Le.fromDate(new Date(t,n,1)),l=Le.fromDate(new Date(t,n+1,0,23,59,59)),o=Re(be(ie,Bn),Ce("cahierId","==",e),Ce("date",">=",a),Ce("date","<=",l),Je("date","asc"));return(await De(o)).docs.map(d=>({id:d.id,...d.data()}))},nW=async(e,t)=>{const n=[Ce("profId","==",e),Ce("isMarqueEvaluation","==",!0),Je("date","desc")];t&&n.unshift(Ce("cahierId","==",t));const a=Re(be(ie,Bn),...n);return(await De(a)).docs.map(o=>({id:o.id,...o.data()}))},aW=async e=>{const n=(await De(Re(be(ie,Bn),Ce("cahierId","==",e)))).docs.map(u=>u.data()),a=n.length,l={realise:0,planifie:0,annule:0,reporte:0},o={};for(const u of n){const d=u.statut;d in l&&l[d]++,u.typeContenu&&(o[u.typeContenu]=(o[u.typeContenu]??0)+1)}return{total:a,...l,parType:o,tauxRealisation:a>0?Math.round(l.realise/a*100):0}};async function iW(e){const t=Re(be(ie,Bn),Ce("cahierId","==",e),Ce("statut","==","realise"),Je("date","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function sW(e,t,n){const a=Le.now();let l;if(typeof e=="string"){const u=n;l={cahierId:e,profId:t,date:Le.fromDate(new Date(u.date)),heureDebut:u.heureDebut||"",heureFin:u.heureFin||"",chapitre:u.chapitre,typeContenu:u.typeContenu,contenu:u.contenu,objectifs:u.objectifs||"",competences:u.competences||[],statut:u.statut,motifAnnulation:u.motifAnnulation||"",dateReport:u.dateReport?Le.fromDate(new Date(u.dateReport)):null,notesPrivees:u.notesPrivees||"",isMarqueEvaluation:u.isMarqueEvaluation,typeEvaluation:u.typeEvaluation||null,dateEvaluationPrevue:u.dateEvaluationPrevue?Le.fromDate(new Date(u.dateEvaluationPrevue)):null,statutEvaluation:u.statutEvaluation,ordre:Date.now(),piecesJointes:[],liens:[],ebooksLies:[]}}else l={liens:[],ebooksLies:[],piecesJointes:[],...e};return(await Lt(be(ie,Bn),{...l,createdAt:a,updatedAt:a})).id}async function jc(e,t,n){let a;if(typeof t=="string"&&n){const l=n;a={date:Le.fromDate(new Date(l.date)),heureDebut:l.heureDebut||"",heureFin:l.heureFin||"",chapitre:l.chapitre,typeContenu:l.typeContenu,contenu:l.contenu,objectifs:l.objectifs||"",competences:l.competences||[],statut:l.statut,motifAnnulation:l.motifAnnulation||"",dateReport:l.dateReport?Le.fromDate(new Date(l.dateReport)):null,notesPrivees:l.notesPrivees||"",isMarqueEvaluation:l.isMarqueEvaluation,typeEvaluation:l.typeEvaluation||null,dateEvaluationPrevue:l.dateEvaluationPrevue?Le.fromDate(new Date(l.dateEvaluationPrevue)):null,statutEvaluation:l.statutEvaluation}}else a={...t};await Ze(je(ie,Bn,e),{...a,updatedAt:Le.now()})}async function lW(e){await Cn(je(ie,Bn,e))}const oW=["6me","5me","4me","3me","2nde","1re","Terminale"],_2=["2023-2024","2024-2025","2025-2026","2026-2027"],cW=["#2563eb","#7c3aed","#059669","#d97706","#dc2626","#0891b2","#db2777","#65a30d"],qi={cours:{label:"Cours",emoji:"",color:"#3b82f6"},exercices:{label:"Exercices",emoji:"",color:"#8b5cf6"},correction:{label:"Correction",emoji:"",color:"#10b981"},devoir_surveille:{label:"Devoir surveill",emoji:"",color:"#f59e0b"},devoir_maison:{label:"Devoir  la maison",emoji:"",color:"#6366f1"},travaux_pratiques:{label:"Travaux pratiques",emoji:"",color:"#14b8a6"},evaluation:{label:"valuation",emoji:"",color:"#ef4444"},revision:{label:"Rvision",emoji:"",color:"#f97316"}},Nc={realise:{label:"Ralis",color:"#059669",bg:"#d1fae5"},planifie:{label:"Planifi",color:"#d97706",bg:"#fef3c7"},annule:{label:"Annul",color:"#dc2626",bg:"#fee2e2"},reporte:{label:"Report",color:"#2563eb",bg:"#dbeafe"}},bT={interro:"Interrogation",ds:"Devoir Surveill",examen:"Examen",oral:"Oral",autre:"Autre"},jT={devoir:{label:"Devoir  corriger",emoji:""},evaluation:{label:"valuation  prparer",emoji:""},notes:{label:"Notes  saisir",emoji:""},cours:{label:"Cours  prparer",emoji:""},personnalise:{label:"Rappel personnalis",emoji:""}},uW=["Communiquer  l'crit","Communiquer  l'oral","Raisonner et rsoudre des problmes","Chercher et s'informer","Modliser","Reprsenter","Calculer et algorithmiser","Analyser et interprter","Exprimenter et observer","Cooprer et mutualiser"],S2=()=>({classe:"3me",matiere:"Mathmatiques",anneeScolaire:"2025-2026",titre:"",description:"",couleur:"#2563eb",nombreSeancesPrevu:30,groupeIds:[],groupeNoms:[],isPartage:!1}),dW=()=>{const{currentUser:e}=lt(),t=yt(),[n]=z2(),[a,l]=y.useState([]),[o,u]=y.useState(!0),[d,m]=y.useState("2025-2026"),[p,h]=y.useState(!1),[v,b]=y.useState(null),[g,_]=y.useState(S2()),[j,S]=y.useState(!1),[w,E]=y.useState(""),{matieres:C,loading:A}=hT(),[O,T]=y.useState([]),[P,R]=y.useState([]);if(!e?.isPremium)return r.jsx("div",{className:"cahier-textes-page",children:r.jsxs("div",{className:"premium-gate",children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h2",{children:"Cahier de Textes Numrique"}),r.jsxs("p",{children:["Cette fonctionnalit est rserve aux enseignants Premium.",r.jsx("br",{}),"Passez au Premium pour organiser, planifier et suivre votre enseignement."]}),r.jsx("button",{className:"btn-primary",onClick:()=>t("/premium"),children:" Passer au Premium  2 000 FCFA/mois"})]})});y.useEffect(()=>{if(!e?.uid)return;u(!0);const M=VX(e.uid,d||void 0,k=>{l(k),u(!1)},k=>{console.error("Erreur chargement cahiers:",k),u(!1)});return()=>M()},[e?.uid,d]),y.useEffect(()=>{if(!e?.uid)return;yT(e.uid).then(T).catch(Q=>console.error("Erreur chargement groupes:",Q));const M=n.get("groupeId"),k=n.get("groupeNom"),J=n.get("classe");M&&k&&(R([M]),_(Q=>({...Q,classe:J||Q.classe,groupeIds:[M],groupeNoms:[k]})),b(null),E(""),h(!0))},[e?.uid]);const I=()=>{b(null),_(S2()),R([]),E(""),h(!0)},L=(M,k)=>{k.stopPropagation(),b(M),R(M.groupeIds??[]),_({classe:M.classe,matiere:M.matiere,anneeScolaire:M.anneeScolaire,titre:M.titre,description:M.description||"",couleur:M.couleur,nombreSeancesPrevu:M.nombreSeancesPrevu,groupeIds:M.groupeIds??[],groupeNoms:M.groupeNoms??[],isPartage:M.isPartage??!1}),E(""),h(!0)},K=M=>{R(k=>{const J=k.includes(M)?k.filter(B=>B!==M):[...k,M],Q=J.map(B=>O.find(q=>q.id===B)?.nom??"").filter(Boolean);return _(B=>({...B,groupeIds:J,groupeNoms:Q})),J})},U=async M=>{if(M.preventDefault(),!!e?.uid){S(!0),E("");try{v?await Jf(v.id,g):await WX(e.uid,g),h(!1)}catch(k){const J=k instanceof Error?k.message:String(k);E("Erreur : "+J)}finally{S(!1)}}},G=async(M,k)=>{if(k.stopPropagation(),!!confirm(`Supprimer le cahier "${M.titre}" et toutes ses entres ?`))try{await ZX(M.id),l(J=>J.filter(Q=>Q.id!==M.id))}catch{alert("Erreur lors de la suppression.")}},V=M=>M.nombreSeancesPrevu>0?Math.min(100,Math.round(M.nombreSeancesRealise/M.nombreSeancesPrevu*100)):0;return r.jsxs("div",{className:"cahier-textes-page",children:[r.jsxs("div",{className:"cahier-page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"cahier-page-title",children:" Cahier de Textes"}),r.jsx("p",{className:"cahier-page-subtitle",children:"Organisez et planifiez votre enseignement"})]}),r.jsx("button",{className:"btn-primary",onClick:I,children:"+ Nouveau cahier"})]}),r.jsxs("div",{className:"cahier-filtres",children:[r.jsx("label",{style:{fontSize:"0.85rem",color:"#6b7280",fontWeight:600},children:"Anne scolaire :"}),r.jsxs("select",{className:"filtre-select",value:d,onChange:M=>m(M.target.value),children:[r.jsx("option",{value:"",children:"Toutes les annes"}),_2.map(M=>r.jsx("option",{value:M,children:M},M))]})]}),o?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):a.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{style:{fontSize:"3rem",opacity:.3,marginBottom:"0.75rem"},children:""}),r.jsxs("h3",{children:["Aucun cahier pour ",d||"cette priode"]}),r.jsx("p",{children:"Crez votre premier cahier de textes pour commencer  planifier votre enseignement."}),r.jsx("button",{className:"btn-primary",onClick:I,style:{marginTop:"1rem"},children:"+ Crer mon premier cahier"})]}):r.jsx("div",{className:"cahiers-grid",children:a.map(M=>{const k=V(M);return r.jsxs("div",{className:"cahier-card",onClick:()=>t(`/prof/cahiers/${M.id}`),children:[r.jsx("div",{style:{height:4,background:M.couleur,borderRadius:"12px 12px 0 0"}}),r.jsx("div",{className:"cahier-card-header",children:r.jsxs("div",{style:{flex:1},children:[r.jsx("h3",{className:"cahier-card-titre",children:M.titre}),r.jsxs("div",{className:"cahier-card-meta",children:[r.jsx("span",{className:"badge-classe",children:M.classe}),r.jsx("span",{className:"badge-matiere",children:M.matiere}),r.jsx("span",{className:"badge-annee",children:M.anneeScolaire})]}),(M.groupeIds?.length??0)>0&&r.jsxs("span",{className:`badge-partage ${M.isPartage?"actif":""}`,style:{marginTop:6,display:"inline-flex"},children:[M.isPartage?" Partag avec":" Li "," ",M.groupeIds.length," groupe",M.groupeIds.length>1?"s":""]})]})}),r.jsxs("div",{className:"cahier-card-body",children:[M.description&&r.jsxs("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 0.75rem",lineHeight:1.5},children:[M.description.substring(0,80),M.description.length>80?"...":""]}),r.jsxs("div",{className:"progression-bar-wrap",children:[r.jsxs("div",{className:"progression-label",children:[r.jsx("span",{children:"Progression"}),r.jsxs("span",{style:{fontWeight:700,color:M.couleur},children:[k,"%"]})]}),r.jsx("div",{className:"progression-bar-bg",children:r.jsx("div",{className:"progression-bar-fill",style:{width:`${k}%`,background:M.couleur}})}),r.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:"0.3rem"},children:[M.nombreSeancesRealise," / ",M.nombreSeancesPrevu," sances ralises"]})]})]}),r.jsxs("div",{className:"cahier-card-footer",children:[r.jsxs("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["Mis  jour le ",M.updatedAt?.toDate().toLocaleDateString("fr-FR")||""]}),r.jsxs("div",{className:"cahier-actions",children:[r.jsx("button",{className:"btn-icon",onClick:J=>L(M,J),title:"Modifier",children:""}),r.jsx("button",{className:"btn-icon",onClick:J=>G(M,J),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]})]},M.id)})}),p&&r.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:r.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),children:[r.jsxs("h2",{className:"modal-title",children:[" ",v?"Modifier le cahier":"Nouveau cahier de textes"]}),r.jsxs("form",{onSubmit:U,children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Classe *"}),r.jsx("select",{className:"form-select",value:g.classe,onChange:M=>_(k=>({...k,classe:M.target.value})),required:!0,children:oW.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Matire *"}),r.jsxs("select",{className:"form-select",value:g.matiere,onChange:M=>_(k=>({...k,matiere:M.target.value})),required:!0,disabled:A,children:[r.jsx("option",{value:"",children:A?"Chargement":" Slectionner "}),C.map(M=>r.jsx("option",{value:M.valeur,children:M.label},M.valeur)),g.matiere&&!C.find(M=>M.valeur===g.matiere)&&r.jsx("option",{value:g.matiere,children:g.matiere})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Anne scolaire *"}),r.jsx("select",{className:"form-select",value:g.anneeScolaire,onChange:M=>_(k=>({...k,anneeScolaire:M.target.value})),children:_2.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Titre personnalis"}),r.jsx("input",{className:"form-input",placeholder:`Ex: Maths 3me A - ${g.anneeScolaire}`,value:g.titre,onChange:M=>_(k=>({...k,titre:M.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Nombre de sances prvues"}),r.jsx("input",{type:"number",className:"form-input",min:"1",max:"200",value:g.nombreSeancesPrevu,onChange:M=>_(k=>({...k,nombreSeancesPrevu:Number(M.target.value)}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description / Objectifs (optionnel)"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Objectifs gnraux, groupe classe, notes...",value:g.description,onChange:M=>_(k=>({...k,description:M.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Couleur du cahier"}),r.jsx("div",{className:"couleur-picker",children:cW.map(M=>r.jsx("div",{className:`couleur-option ${g.couleur===M?"selected":""}`,style:{background:M},onClick:()=>_(k=>({...k,couleur:M})),title:M},M))})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Groupes classes lis"," ",r.jsx("span",{style:{fontWeight:400,color:"#9ca3af"},children:"(optionnel)"})]}),O.length===0?r.jsxs("p",{style:{fontSize:"0.82rem",color:"#9ca3af",margin:0},children:["Aucun groupe cr."," ",r.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:0,fontSize:"0.82rem"},onClick:()=>t("/prof/groupes"),children:"Crer un groupe "})]}):r.jsx("div",{className:"groupe-selector",children:O.map(M=>{const k=P.includes(M.id);return r.jsxs("div",{className:`groupe-option ${k?"selected":""}`,onClick:()=>K(M.id),children:[r.jsx("input",{type:"checkbox",checked:k,readOnly:!0,tabIndex:-1}),r.jsxs("span",{children:[r.jsx("strong",{children:M.nom}),"  ",M.classe," (",M.anneeScolaire,")"]})]},M.id)})}),P.length>0&&r.jsx("div",{className:"groupes-tags",children:P.map(M=>{const k=O.find(J=>J.id===M);return k?r.jsxs("span",{className:"groupe-tag",children:[k.nom,r.jsx("button",{type:"button",onClick:()=>K(M),"aria-label":`Retirer ${k.nom}`,children:""})]},M):null})}),P.length>0&&r.jsxs("label",{className:"toggle-partage",style:{marginTop:10},children:[r.jsx("input",{type:"checkbox",checked:g.isPartage??!1,onChange:M=>_(k=>({...k,isPartage:M.target.checked}))}),r.jsx("span",{children:" Rendre visible aux lves des groupes lis"})]})]}),w&&r.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem",marginBottom:"0.75rem",background:"#fee2e2",padding:"0.5rem 0.75rem",borderRadius:8},children:w}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>h(!1),children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:j,children:j?"Enregistrement...":v?"Mettre  jour":"Crer le cahier"})]})]})]})})]})},fW=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],mW=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],pW=(e,t,n)=>{const a=new Date(e,t,1),l=new Date(e,t+1,0);let o=a.getDay()-1;o<0&&(o=6);const u=new Date,d=[];for(let p=o-1;p>=0;p--){const h=new Date(e,t,-p);d.push({date:h,isCurrentMonth:!1,isToday:!1,entrees:[]})}for(let p=1;p<=l.getDate();p++){const h=new Date(e,t,p),v=h.toDateString()===u.toDateString(),b=n.filter(g=>{const _=g.date.toDate();return _.getFullYear()===e&&_.getMonth()===t&&_.getDate()===p});d.push({date:h,isCurrentMonth:!0,isToday:v,entrees:b})}let m=1;for(;d.length<42;){const p=new Date(e,t+1,m++);d.push({date:p,isCurrentMonth:!1,isToday:!1,entrees:[]})}return d},hW=({cahierId:e})=>{const t=yt(),n=new Date,[a,l]=y.useState(n.getFullYear()),[o,u]=y.useState(n.getMonth()),[d,m]=y.useState([]),[p,h]=y.useState(!1),[v,b]=y.useState(null),[g,_]=y.useState({x:0,y:0});y.useEffect(()=>{(async()=>{h(!0);try{const A=await rW(e,a,o);m(A)}catch(A){console.error("Erreur chargement entres calendrier:",A)}finally{h(!1)}})()},[e,a,o]);const j=pW(a,o,d),S=()=>{o===0?(l(C=>C-1),u(11)):u(C=>C-1)},w=()=>{o===11?(l(C=>C+1),u(0)):u(C=>C+1)},E=(C,A)=>{if(!C.isCurrentMonth||C.entrees.length===0)return;const O=A.target.getBoundingClientRect();_({x:O.left,y:O.bottom+window.scrollY+8}),b(C)};return r.jsxs("div",{className:"cahier-calendar",onClick:()=>b(null),children:[r.jsxs("div",{className:"calendar-nav",children:[r.jsx("button",{className:"calendar-nav-btn",onClick:S,"aria-label":"Mois prcdent",children:""}),r.jsxs("span",{className:"calendar-nav-title",children:[mW[o]," ",a,p&&" ..."]}),r.jsx("button",{className:"calendar-nav-btn",onClick:w,"aria-label":"Mois suivant",children:""})]}),r.jsx("div",{className:"calendar-weekdays",children:fW.map(C=>r.jsx("div",{className:"calendar-weekday",children:C},C))}),r.jsx("div",{className:"calendar-grid",onClick:C=>C.stopPropagation(),children:j.map((C,A)=>r.jsxs("div",{className:`calendar-day ${C.isCurrentMonth?"":"other-month"} ${C.isToday?"today":""} ${v?.date.toDateString()===C.date.toDateString()?"selected":""}`,onClick:O=>E(C,O),children:[r.jsx("div",{className:"calendar-day-num",children:C.date.getDate()}),r.jsxs("div",{className:"calendar-day-events",children:[C.entrees.slice(0,3).map(O=>{const T=qi[O.typeContenu];return r.jsxs("div",{className:"calendar-event-dot",style:{background:T.color},title:O.chapitre,children:[T.emoji," ",O.chapitre.substring(0,12)]},O.id)}),C.entrees.length>3&&r.jsxs("div",{className:"calendar-more",children:["+",C.entrees.length-3]})]})]},A))}),r.jsx("div",{className:"calendar-legend",children:Object.entries(qi).slice(0,5).map(([C,A])=>r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-dot",style:{background:A.color}}),A.label]},C))}),v&&v.entrees.length>0&&r.jsxs("div",{className:"calendar-day-popup",style:{top:g.y,left:Math.min(g.x,window.innerWidth-300)},onClick:C=>C.stopPropagation(),children:[r.jsxs("div",{className:"calendar-day-popup-title",children:[" ",v.date.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})]}),v.entrees.map(C=>{const A=qi[C.typeContenu];return r.jsxs("div",{className:"calendar-popup-entree",onClick:()=>t(`/prof/cahiers/${e}/modifier/${C.id}`),children:[r.jsx("span",{className:"calendar-popup-entree-type",children:A.emoji}),r.jsxs("div",{className:"calendar-popup-entree-info",children:[r.jsx("div",{className:"calendar-popup-entree-chapitre",children:C.chapitre}),C.heureDebut&&r.jsxs("div",{className:"calendar-popup-entree-heure",children:[C.heureDebut,C.heureFin?`  ${C.heureFin}`:""]})]})]},C.id)})]})]})},tp="rappels_prof",vW=async(e,t)=>(await Lt(be(ie,tp),{profId:e,titre:t.titre,description:t.description||"",typeRappel:t.typeRappel,dateRappel:Le.fromDate(new Date(t.dateRappel)),recurrence:t.recurrence,priorite:t.priorite,cahierId:t.cahierId||null,isLu:!1,isDone:!1,createdAt:Le.now()})).id,gW=async e=>{const t=Re(be(ie,tp),Ce("profId","==",e),Ce("isDone","==",!1),Je("dateRappel","asc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))},xW=async(e,t)=>{await Ze(je(ie,tp,e),{isDone:t,isLu:t})},yW=async e=>{await Cn(je(ie,tp,e))},w2=()=>({titre:"",description:"",typeRappel:"personnalise",dateRappel:new Date(Date.now()+36e5).toISOString().slice(0,16),recurrence:"unique",priorite:"normale"}),Ud=({profId:e,cahierId:t})=>{const[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(!1),[m,p]=y.useState(w2()),[h,v]=y.useState(!1),b=async()=>{try{o(!0);const C=await gW(e);a(C)}catch(C){console.error("Erreur rappels:",C)}finally{o(!1)}};y.useEffect(()=>{b()},[e]);const g=async C=>{if(C.preventDefault(),!!m.titre.trim()){v(!0);try{await vW(e,{...m,cahierId:t}),d(!1),p(w2()),await b()}catch(A){console.error("Erreur cration rappel:",A)}finally{v(!1)}}},_=async C=>{await xW(C,!0),a(A=>A.filter(O=>O.id!==C))},j=async C=>{confirm("Supprimer ce rappel ?")&&(await yW(C),a(A=>A.filter(O=>O.id!==C)))},S=new Date,w=n.filter(C=>C.dateRappel.toDate()<=S),E=n.filter(C=>C.dateRappel.toDate()>S);return r.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.1rem"},children:""}),r.jsx("span",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937"},children:"Rappels"}),w.length>0&&r.jsx("span",{style:{background:"#dc2626",color:"white",borderRadius:20,padding:"1px 7px",fontSize:"0.7rem",fontWeight:700},children:w.length})]}),r.jsx("button",{className:"btn-primary",style:{padding:"0.35rem 0.75rem",fontSize:"0.8rem"},onClick:()=>d(C=>!C),children:"+ Ajouter"})]}),u&&r.jsxs("form",{onSubmit:g,style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",background:"#f9fafb"},children:[r.jsx("div",{className:"form-group",children:r.jsx("input",{className:"form-input",placeholder:"Titre du rappel *",value:m.titre,onChange:C=>p(A=>({...A,titre:C.target.value})),required:!0})}),r.jsx("div",{className:"form-group",children:r.jsx("select",{className:"form-select",value:m.typeRappel,onChange:C=>p(A=>({...A,typeRappel:C.target.value})),children:Object.entries(jT).map(([C,A])=>r.jsxs("option",{value:C,children:[A.emoji," ",A.label]},C))})}),r.jsx("div",{className:"form-group",children:r.jsx("input",{type:"datetime-local",className:"form-input",value:m.dateRappel,onChange:C=>p(A=>({...A,dateRappel:C.target.value})),required:!0})}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("select",{className:"form-select",value:m.priorite,onChange:C=>p(A=>({...A,priorite:C.target.value})),children:[r.jsx("option",{value:"normale",children:"Normale"}),r.jsx("option",{value:"urgente",children:" Urgente"})]}),r.jsxs("select",{className:"form-select",value:m.recurrence,onChange:C=>p(A=>({...A,recurrence:C.target.value})),children:[r.jsx("option",{value:"unique",children:"Une fois"}),r.jsx("option",{value:"hebdomadaire",children:"Hebdo"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[r.jsx("button",{type:"submit",className:"btn-primary",disabled:h,style:{flex:1},children:h?"...":"Enregistrer"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Annuler"})]})]}),r.jsx("div",{style:{padding:"0.75rem 1.25rem"},children:l?r.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:"Chargement..."}):n.length===0?r.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:[r.jsx("div",{children:""}),r.jsx("div",{children:"Aucun rappel actif"})]}):r.jsxs(r.Fragment,{children:[w.length>0&&r.jsxs("div",{style:{marginBottom:"0.75rem"},children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#dc2626",textTransform:"uppercase",marginBottom:"0.4rem"},children:" En retard"}),w.map(C=>r.jsx(C2,{rappel:C,onDone:_,onDelete:j},C.id))]}),E.length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#6b7280",textTransform:"uppercase",marginBottom:"0.4rem"},children:" venir"}),E.slice(0,5).map(C=>r.jsx(C2,{rappel:C,onDone:_,onDelete:j},C.id))]})]})})]})},C2=({rappel:e,onDone:t,onDelete:n})=>{const a=jT[e.typeRappel],l=e.dateRappel.toDate(),o=e.priorite==="urgente",u=l<=new Date;return r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.5rem 0",borderBottom:"1px solid #f9fafb"},children:[r.jsx("button",{onClick:()=>t(e.id),style:{width:20,height:20,border:`2px solid ${o?"#dc2626":"#d1d5db"}`,borderRadius:4,background:"white",cursor:"pointer",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",marginTop:2},title:"Marquer termin"}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{fontSize:"0.82rem",fontWeight:600,color:u?"#dc2626":"#1f2937",display:"flex",alignItems:"center",gap:"0.3rem"},children:[a.emoji," ",e.titre,o&&r.jsx("span",{style:{fontSize:"0.65rem",color:"#dc2626"},children:""})]}),r.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:2},children:[l.toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),"  ",l.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),r.jsx("button",{onClick:()=>n(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"0.9rem",flexShrink:0},title:"Supprimer",children:""})]})},bW=({profId:e,cahierId:t})=>{const n=yt(),[a,l]=y.useState([]),[o,u]=y.useState(!0),[d,m]=y.useState("tous");y.useEffect(()=>{(async()=>{u(!0);try{const g=await nW(e,t);l(g)}catch(g){console.error("Erreur signets:",g)}finally{u(!1)}})()},[e,t]);const p=async(b,g)=>{try{await jc(b.id,{statutEvaluation:g}),l(_=>_.map(j=>j.id===b.id?{...j,statutEvaluation:g}:j))}catch(_){console.error("Erreur mise  jour statut:",_)}},h=d==="tous"?a:a.filter(b=>b.statutEvaluation===d),v=[{value:"tous",label:"Tous",color:"#6b7280"},{value:"a_evaluer",label:" valuer",color:"#d97706"},{value:"evaluation_creee",label:"Cre",color:"#2563eb"},{value:"evaluation_terminee",label:"Termine",color:"#059669"}];return r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:700,color:"#1f2937",margin:0},children:[" Signets d'valuation (",a.length,")"]})}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:v.map(b=>r.jsx("button",{onClick:()=>m(b.value),style:{padding:"0.3rem 0.85rem",borderRadius:20,border:`1.5px solid ${d===b.value?b.color:"#e5e7eb"}`,background:d===b.value?b.color:"white",color:d===b.value?"white":"#4b5563",fontSize:"0.8rem",fontWeight:600,cursor:"pointer",transition:"all 0.15s"},children:b.label},b.value))}),o?r.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Chargement..."}):h.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"#9ca3af"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),r.jsx("div",{style:{fontWeight:600,color:"#6b7280",marginBottom:"0.25rem"},children:"Aucun signet trouv"}),r.jsx("div",{style:{fontSize:"0.85rem"},children:"Marquez des entres pour valuation depuis l'diteur de sance."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:h.map(b=>{const g=qi[b.typeContenu];return Nc[b.statut],r.jsxs("div",{style:{background:"white",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:"1rem",borderLeft:"4px solid #f59e0b"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,color:"#1f2937"},children:b.chapitre}),r.jsx("div",{style:{fontSize:"0.78rem",color:"#9ca3af",marginTop:"0.15rem"},children:b.date.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),r.jsx("button",{onClick:()=>n(`/prof/cahiers/${t}/modifier/${b.id}`),style:{background:"none",border:"none",cursor:"pointer",color:"#2563eb",fontSize:"0.8rem",fontWeight:600,whiteSpace:"nowrap"},children:" Modifier"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:g.color+"22",color:g.color},children:[g.emoji," ",g.label]}),b.typeEvaluation&&r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:"#fef3c7",color:"#92400e"},children:[" ",bT[b.typeEvaluation]]}),b.dateEvaluationPrevue&&r.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",background:"#f3f4f6",color:"#4b5563"},children:[" ",b.dateEvaluationPrevue.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),r.jsx("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:["a_evaluer","evaluation_creee","evaluation_terminee"].map(_=>{const j=b.statutEvaluation===_,S={a_evaluer:" valuer",evaluation_creee:"Cre",evaluation_terminee:" Termine"},w={a_evaluer:"#d97706",evaluation_creee:"#2563eb",evaluation_terminee:"#059669"};return r.jsx("button",{onClick:()=>p(b,_),style:{padding:"0.25rem 0.7rem",borderRadius:20,border:`1.5px solid ${j?w[_]:"#e5e7eb"}`,background:j?w[_]:"white",color:j?"white":"#6b7280",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:S[_]},_)})})]},b.id)})})]})},jW=({cahier:e})=>{const[t,n]=y.useState(null),[a,l]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const d=await aW(e.id);n(d)}catch{}finally{l(!1)}})()},[e.id]);const o=e.nombreSeancesPrevu>0?Math.min(100,Math.round(e.nombreSeancesRealise/e.nombreSeancesPrevu*100)):0;return a?r.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#9ca3af",fontSize:"0.85rem"},children:"Chargement des stats..."}):t?r.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"1.25rem"},children:[r.jsx("div",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Statistiques du cahier"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsx(Fd,{value:t.total,label:"Sances total",color:"#2563eb",bg:"#dbeafe"}),r.jsx(Fd,{value:t.realise,label:"Ralises",color:"#059669",bg:"#d1fae5"}),r.jsx(Fd,{value:t.planifie,label:"Planifies",color:"#d97706",bg:"#fef3c7"}),r.jsx(Fd,{value:`${t.tauxRealisation}%`,label:"Taux de ralisation",color:"#7c3aed",bg:"#ede9fe"})]}),r.jsxs("div",{style:{marginBottom:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.4rem"},children:[r.jsx("span",{children:"Progression du programme"}),r.jsxs("span",{style:{fontWeight:700,color:e.couleur},children:[o,"%"]})]}),r.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:10,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${o}%`,background:e.couleur,borderRadius:10,transition:"width 0.5s ease"}})}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.3rem"},children:[e.nombreSeancesRealise," / ",e.nombreSeancesPrevu," sances prvues"]})]}),Object.keys(t.parType).length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.78rem",fontWeight:700,color:"#9ca3af",textTransform:"uppercase",marginBottom:"0.6rem"},children:"Rpartition par type"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:Object.entries(t.parType).sort((u,d)=>d[1]-u[1]).map(([u,d])=>{const m=qi[u];if(!m)return null;const p=t.total>0?Math.round(d/t.total*100):0;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"#4b5563",marginBottom:"0.2rem"},children:[r.jsxs("span",{children:[m.emoji," ",m.label]}),r.jsxs("span",{style:{fontWeight:600},children:[d," (",p,"%)"]})]}),r.jsx("div",{style:{height:4,background:"#f3f4f6",borderRadius:10,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${p}%`,background:m.color,borderRadius:10}})})]},u)})})]})]}):null},Fd=({value:e,label:t,color:n,bg:a})=>r.jsxs("div",{style:{background:a,borderRadius:10,padding:"0.75rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:n},children:e}),r.jsx("div",{style:{fontSize:"0.72rem",color:"#6b7280",marginTop:"0.15rem"},children:t})]}),NW=()=>{const{cahierId:e}=Ha(),{currentUser:t}=lt(),n=yt(),[a,l]=y.useState(null),[o,u]=y.useState([]),[d,m]=y.useState(!1),[p,h]=y.useState(!0),[v,b]=y.useState(!0),[g,_]=y.useState("liste"),[j,S]=y.useState("tous"),[w,E]=y.useState("tous"),[C,A]=y.useState("tous");y.useEffect(()=>{if(!e)return;(async()=>{h(!0);try{const K=await gT(e);if(!K){n("/prof/cahiers");return}l(K)}finally{h(!1)}})()},[e]);const O=y.useCallback(async()=>{if(e){b(!0);try{const L=await xT(e);u(L),m(!1)}finally{b(!1)}}},[e]);y.useEffect(()=>{O()},[e]);const T=async L=>{if(confirm(`Supprimer la sance "${L.chapitre}" ?`))try{await lW(L.id);const K=o.filter(G=>G.id!==L.id);u(K);const U=K.filter(G=>G.statut==="realise").length;await Jf(e,{nombreSeancesRealise:U}),l(G=>G&&{...G,nombreSeancesRealise:U})}catch{alert("Erreur lors de la suppression.")}},P=async(L,K)=>{try{await jc(L.id,{statut:K});const U=o.map(V=>V.id===L.id?{...V,statut:K}:V);u(U);const G=U.filter(V=>V.statut==="realise").length;await Jf(e,{nombreSeancesRealise:G}),l(V=>V&&{...V,nombreSeancesRealise:G})}catch{alert("Erreur mise  jour statut.")}},R=Array.from(new Set(o.map(L=>{const K=L.date.toDate();return`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}`}))).sort().reverse(),I=o.filter(L=>{const K=j==="tous"||L.statut===j,U=w==="tous"||L.typeContenu===w,G=C==="tous"||(()=>{const V=L.date.toDate();return`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`===C})();return K&&U&&G});return p?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):a?r.jsxs("div",{className:"cahier-detail-page",children:[r.jsxs("div",{className:"cahier-detail-header",children:[r.jsx("button",{onClick:()=>n("/prof/cahiers"),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem",padding:"0 0.5rem"},title:"Retour",children:""}),r.jsx("div",{style:{width:6,minHeight:60,borderRadius:4,background:a.couleur,alignSelf:"stretch"}}),r.jsxs("div",{className:"cahier-detail-info",children:[r.jsx("h1",{className:"cahier-detail-titre",children:a.titre}),r.jsxs("div",{className:"cahier-detail-badges",children:[r.jsx("span",{className:"badge-classe",children:a.classe}),r.jsx("span",{className:"badge-matiere",children:a.matiere}),r.jsx("span",{className:"badge-annee",children:a.anneeScolaire})]}),a.description&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",margin:0},children:a.description})]}),r.jsx("div",{className:"cahier-detail-actions",children:r.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),children:"+ Nouvelle sance"})})]}),r.jsx("div",{className:"view-tabs",children:[{id:"liste",label:" Liste"},{id:"calendrier",label:" Calendrier"},{id:"signets",label:" Signets"},{id:"stats",label:" Statistiques"}].map(L=>r.jsx("button",{className:`view-tab ${g===L.id?"active":""}`,onClick:()=>_(L.id),children:L.label},L.id))}),g==="calendrier"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx("div",{children:r.jsx(hW,{cahierId:a.id})}),r.jsx("div",{children:r.jsx(Ud,{profId:t.uid,cahierId:a.id})})]}),g==="signets"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx(bW,{profId:t.uid,cahierId:a.id}),r.jsx(Ud,{profId:t.uid,cahierId:a.id})]}),g==="stats"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsx(jW,{cahier:{...a,nombreSeancesRealise:o.filter(L=>L.statut==="realise").length}}),r.jsx(Ud,{profId:t.uid,cahierId:a.id})]}),g==="liste"&&r.jsxs("div",{className:"cahier-detail-layout",children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[["tous","realise","planifie","annule","reporte"].map(L=>{const K=L==="tous"?null:Nc[L];return r.jsx("button",{onClick:()=>S(L),style:{padding:"0.3rem 0.75rem",borderRadius:20,border:`1.5px solid ${j===L?K?.color||"#2563eb":"#e5e7eb"}`,background:j===L?K?.bg||"#dbeafe":"white",color:j===L?K?.color||"#2563eb":"#4b5563",fontSize:"0.78rem",fontWeight:600,cursor:"pointer"},children:L==="tous"?"Tous":K?.label},L)}),r.jsxs("select",{className:"filtre-select",value:w,onChange:L=>E(L.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[r.jsx("option",{value:"tous",children:"Tous types"}),Object.entries(qi).map(([L,K])=>r.jsxs("option",{value:L,children:[K.emoji," ",K.label]},L))]}),r.jsxs("select",{className:"filtre-select",value:C,onChange:L=>A(L.target.value),style:{fontSize:"0.78rem",padding:"0.3rem 0.75rem"},children:[r.jsx("option",{value:"tous",children:"Tous les mois"}),R.map(L=>{const[K,U]=L.split("-"),G=new Date(Number(K),Number(U)-1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"});return r.jsx("option",{value:L,children:G},L)})]})]}),v&&I.length===0?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):I.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{style:{fontSize:"2.5rem",opacity:.3,marginBottom:"0.5rem"},children:""}),r.jsxs("h3",{children:["Aucune sance",j!=="tous"||w!=="tous"?" (avec ce filtre)":""]}),r.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),style:{marginTop:"1rem"},children:"+ Ajouter la premire sance"})]}):r.jsxs("div",{className:"entrees-list",children:[I.map(L=>{const K=qi[L.typeContenu],U=Nc[L.statut],G=L.date.toDate();return r.jsxs("div",{className:"entree-card",style:{borderLeftColor:K.color,cursor:"pointer"},onClick:()=>n(`/prof/cahiers/${e}/modifier/${L.id}`),children:[r.jsxs("div",{className:"entree-card-top",children:[r.jsxs("div",{className:"entree-card-gauche",children:[r.jsxs("div",{className:"entree-date",children:[" ",G.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),L.heureDebut&&r.jsxs("span",{style:{marginLeft:"0.5rem"},children:[" ",L.heureDebut,L.heureFin?`  ${L.heureFin}`:""]})]}),r.jsx("h3",{className:"entree-chapitre",children:L.chapitre}),r.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[r.jsxs("span",{className:"entree-type-badge",style:{background:K.color},children:[K.emoji," ",K.label]}),r.jsx("span",{className:"entree-statut-badge",style:{background:U.bg,color:U.color},children:U.label}),L.isMarqueEvaluation&&r.jsx("span",{className:"signet-badge",children:" valuation"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.25rem",flexShrink:0},children:[r.jsx("button",{className:"btn-icon",onClick:V=>{V.stopPropagation(),n(`/prof/cahiers/${e}/modifier/${L.id}`)},title:"Modifier",children:""}),r.jsx("button",{className:"btn-icon",onClick:V=>{V.stopPropagation(),T(L)},title:"Supprimer",style:{color:"#ef4444"},children:""})]})]}),L.contenu&&r.jsx("div",{className:"entree-contenu-preview",dangerouslySetInnerHTML:{__html:L.contenu}}),L.objectifs&&r.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.4rem",fontStyle:"italic"},children:[" ",L.objectifs]}),L.piecesJointes&&L.piecesJointes.length>0&&r.jsxs("div",{style:{fontSize:"0.78rem",color:"#2563eb",marginTop:"0.4rem"},children:[" ",L.piecesJointes.length," pice(s) jointe(s)"]}),r.jsx("div",{className:"entree-card-footer",children:r.jsx("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap"},children:["realise","planifie","annule"].map(V=>{const M=Nc[V],k=L.statut===V;return r.jsx("button",{onClick:J=>{J.stopPropagation(),P(L,V)},style:{padding:"0.2rem 0.6rem",borderRadius:20,border:`1.5px solid ${k?M.color:"#e5e7eb"}`,background:k?M.bg:"white",color:k?M.color:"#9ca3af",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:M.label},V)})})})]},L.id)}),d&&r.jsx("div",{style:{textAlign:"center",padding:"1rem"},children:r.jsx("button",{className:"btn-secondary",onClick:()=>O(),disabled:v,children:v?"Chargement...":"Charger plus de sances"})})]})]}),r.jsx("div",{children:r.jsx(Ud,{profId:t.uid,cahierId:a.id})})]})]}):null};function _W(e){return{video:"",article:"",exercice:"",autre:""}[e]??""}function SW(e){const t=/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]{11})/,n=e.match(t);return n?n[1]:null}const wW=({onAjouter:e,onAnnuler:t})=>{const[n,a]=y.useState(""),[l,o]=y.useState(""),[u,d]=y.useState("article"),[m,p]=y.useState(""),[h,v]=y.useState("");function b(_){o(_),(_.includes("youtube.com")||_.includes("youtu.be"))&&d("video")}function g(){if(!n.trim()){v("Le titre est requis.");return}if(!l.trim()||!l.startsWith("http://")&&!l.startsWith("https://")){v("Entrez une URL valide commenant par https://");return}const _={id:String(Date.now()),titre:n.trim(),url:l.trim(),type:u,description:m.trim()||void 0};e(_)}return r.jsxs("div",{className:"lien-form",children:[r.jsx("input",{type:"text",placeholder:"Titre du lien *",value:n,onChange:_=>a(_.target.value),"aria-label":"Titre du lien"}),r.jsx("input",{type:"url",placeholder:"https://... *",value:l,onChange:_=>b(_.target.value),"aria-label":"URL du lien"}),r.jsxs("select",{value:u,onChange:_=>d(_.target.value),"aria-label":"Type de lien",children:[r.jsx("option",{value:"article",children:" Article"}),r.jsx("option",{value:"video",children:" Vido"}),r.jsx("option",{value:"exercice",children:" Exercice"}),r.jsx("option",{value:"autre",children:" Autre"})]}),r.jsx("textarea",{placeholder:"Description (optionnelle)",value:m,onChange:_=>p(_.target.value),rows:2,"aria-label":"Description du lien"}),h&&r.jsx("p",{style:{color:"#dc2626",fontSize:"0.8rem",margin:0},children:h}),r.jsxs("div",{className:"lien-form-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:t,type:"button",children:"Annuler"}),r.jsx("button",{className:"btn-pedaclic",onClick:g,type:"button",children:" Ajouter"})]})]})},CW=({videoId:e})=>r.jsx("div",{className:"youtube-embed",children:r.jsx("iframe",{src:`https://www.youtube.com/embed/${e}`,title:"Vido YouTube",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}),NT=({liens:e,onChange:t,readonly:n=!1})=>{const[a,l]=y.useState(!1);function o(d){t([...e,d]),l(!1)}function u(d){t(e.filter(m=>m.id!==d))}return r.jsxs("section",{className:"liens-section","aria-label":"Liens externes",children:[r.jsx("h4",{children:" Liens et ressources"}),e.length>0&&r.jsx("div",{className:"liens-liste",children:e.map(d=>{const m=SW(d.url);return r.jsxs("div",{className:"lien-card",children:[r.jsx("span",{className:"lien-icone","aria-hidden":"true",children:_W(d.type)}),r.jsxs("div",{className:"lien-infos",children:[r.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"lien-titre",title:d.url,children:d.titre}),d.description&&r.jsx("p",{className:"lien-description",children:d.description}),m&&r.jsx(CW,{videoId:m})]}),!n&&r.jsx("button",{className:"lien-suppr",onClick:()=>u(d.id),title:"Supprimer ce lien",type:"button","aria-label":`Supprimer le lien ${d.titre}`,children:""})]},d.id)})}),e.length===0&&!n&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun lien ajout. Ajoutez des ressources pour enrichir cette sance."}),!n&&r.jsx(r.Fragment,{children:a?r.jsx(wW,{onAjouter:o,onAnnuler:()=>l(!1)}):r.jsx("button",{className:"btn-secondary",onClick:()=>l(!0),type:"button",children:" Ajouter un lien"})})]})},AW=({selectedIds:e,onSelect:t,onFermer:n})=>{const[a,l]=y.useState(""),[o,u]=y.useState([]),[d,m]=y.useState(!0),[p,h]=y.useState("");y.useEffect(()=>{async function g(){try{const _=await eW();u(_)}catch{h("Impossible de charger la bibliothque.")}finally{m(!1)}}g()},[]);const v=y.useMemo(()=>{const g=a.toLowerCase().trim();return g?o.filter(_=>_.titre.toLowerCase().includes(g)||_.auteur.toLowerCase().includes(g)||_.categorie.toLowerCase().includes(g)):o},[o,a]);function b(g){g.target===g.currentTarget&&n()}return r.jsx("div",{className:"ebook-selector-overlay",onClick:b,role:"dialog","aria-modal":"true","aria-label":"Slectionner un ebook",children:r.jsxs("div",{className:"ebook-selector-panel",children:[r.jsxs("div",{className:"ebook-selector-header",children:[r.jsx("h3",{children:" Bibliothque PedaClic"}),r.jsx("button",{onClick:n,"aria-label":"Fermer",style:{background:"none",border:"none",fontSize:"1.3rem",cursor:"pointer",color:"#6b7280"},type:"button",children:""})]}),r.jsx("div",{className:"ebook-search",children:r.jsx("input",{type:"search",placeholder:" Rechercher par titre, auteur ou catgorie...",value:a,onChange:g=>l(g.target.value),autoFocus:!0,"aria-label":"Recherche ebook"})}),r.jsxs("div",{className:"ebook-liste",children:[d&&r.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:" Chargement de la bibliothque"}),p&&r.jsx("p",{style:{color:"#dc2626",textAlign:"center"},children:p}),!d&&!p&&v.length===0&&r.jsx("p",{style:{color:"#9ca3af",textAlign:"center"},children:"Aucun ebook ne correspond  votre recherche."}),!d&&v.map(g=>{const _=e.includes(g.id);return r.jsxs("button",{type:"button",className:`ebook-item ${_?"selected":""}`,onClick:()=>!_&&t(g),disabled:_,"aria-pressed":_,"aria-label":`${_?"Dj li : ":""}${g.titre}`,children:[g.couvertureUrl?r.jsx("img",{src:g.couvertureUrl,alt:`Couverture de ${g.titre}`,loading:"lazy"}):r.jsx("div",{style:{width:36,height:48,background:"#e5e7eb",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",flexShrink:0},"aria-hidden":"true",children:""}),r.jsxs("div",{className:"ebook-item-info",children:[r.jsx("div",{className:"ebook-item-titre",children:g.titre}),r.jsxs("div",{className:"ebook-item-meta",children:[g.auteur,"  ",g.categorie]}),_&&r.jsx("div",{style:{fontSize:"0.75rem",color:"#2563eb",marginTop:2},children:" Dj li  cette sance"})]})]},g.id)})]})]})})},_T=({ebooksLies:e,onChange:t,readonly:n=!1})=>{const[a,l]=y.useState(!1),o=e.map(m=>m.ebookId);function u(m){const p={ebookId:m.id,titre:m.titre,categorie:m.categorie,auteur:m.auteur};t([...e,p]),l(!1)}function d(m){t(e.filter(p=>p.ebookId!==m))}return r.jsxs("section",{"aria-label":"Ebooks lis  la sance",style:{marginTop:16},children:[r.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 8px"},children:" Ebooks de la bibliothque"}),e.length>0&&r.jsx("div",{className:"ebooks-lies",children:e.map(m=>r.jsxs("span",{className:"ebook-chip",children:[r.jsxs("a",{href:`/bibliotheque/${m.ebookId}`,className:"ebook-chip",style:{textDecoration:"none"},title:`Lire : ${m.titre}`,children:[" ",m.titre]}),!n&&r.jsx("button",{onClick:()=>d(m.ebookId),title:`Retirer ${m.titre}`,type:"button","aria-label":`Retirer l'ebook ${m.titre}`,children:""})]},m.ebookId))}),e.length===0&&!n&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 8px"},children:"Aucun ebook li. Associez un ebook de la bibliothque  cette sance."}),!n&&r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(!0),style:{marginTop:8},children:" Choisir dans la bibliothque"}),a&&r.jsx(AW,{selectedIds:o,onSelect:u,onFermer:()=>l(!1)})]})},EW=()=>({date:new Date().toISOString().slice(0,10),heureDebut:"",heureFin:"",chapitre:"",typeContenu:"cours",contenu:"",objectifs:"",competences:[],statut:"realise",motifAnnulation:"",dateReport:"",notesPrivees:"",isMarqueEvaluation:!1,typeEvaluation:"",dateEvaluationPrevue:"",statutEvaluation:"a_evaluer"}),zW=({value:e,onChange:t,placeholder:n})=>{const a=y.useRef(null);y.useEffect(()=>{a.current&&a.current.innerHTML!==e&&(a.current.innerHTML=e)},[]);const l=(d,m)=>{document.execCommand(d,!1,m),a.current?.focus(),o()},o=()=>{a.current&&t(a.current.innerHTML)},u=d=>{try{return document.queryCommandState(d)}catch{return!1}};return r.jsxs("div",{children:[r.jsxs("div",{className:"rich-editor-toolbar",children:[[{cmd:"bold",label:"G",title:"Gras"},{cmd:"italic",label:"I",title:"Italique"},{cmd:"underline",label:"S",title:"Soulign"}].map(({cmd:d,label:m,title:p})=>r.jsx("button",{type:"button",className:`toolbar-btn ${u(d)?"active":""}`,onMouseDown:h=>{h.preventDefault(),l(d)},title:p,children:m},d)),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertUnorderedList")},title:"Liste  puces",children:""}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("insertOrderedList")},title:"Liste numrote",children:"1."}),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),["h2","h3","p"].map(d=>r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:m=>{m.preventDefault(),l("formatBlock",d)},title:d==="p"?"Paragraphe":d.toUpperCase(),children:d==="p"?"":d.toUpperCase()},d)),r.jsx("div",{style:{width:1,background:"#e5e7eb",margin:"0 0.25rem"}}),r.jsx("button",{type:"button",className:"toolbar-btn",onMouseDown:d=>{d.preventDefault(),l("removeFormat")},title:"Effacer",children:""})]}),r.jsx("div",{ref:a,className:"rich-editor-area",contentEditable:!0,suppressContentEditableWarning:!0,onInput:o,"data-placeholder":n||"Dcrivez le contenu de la sance...",style:{position:"relative"}})]})},A2=()=>{const{cahierId:e,entreeId:t}=Ha(),{currentUser:n}=lt(),a=yt(),[l,o]=y.useState(null),[u,d]=y.useState(null),[m,p]=y.useState(EW()),[h,v]=y.useState([]),[b,g]=y.useState(!0),[_,j]=y.useState(!1),[S,w]=y.useState(!1),[E,C]=y.useState(""),[A,O]=y.useState([]),[T,P]=y.useState([]),R=!!t;y.useEffect(()=>{if(!e)return;(async()=>{g(!0);try{const V=await gT(e);if(!V){a("/prof/cahiers");return}if(o(V),R&&t){const M=await YX(t);M&&(d(M),v(M.piecesJointes||[]),O(M.liens??[]),P(M.ebooksLies??[]),p({date:M.date.toDate().toISOString().slice(0,10),heureDebut:M.heureDebut||"",heureFin:M.heureFin||"",chapitre:M.chapitre,typeContenu:M.typeContenu,contenu:M.contenu,objectifs:M.objectifs||"",competences:M.competences||[],statut:M.statut,motifAnnulation:M.motifAnnulation||"",dateReport:M.dateReport?M.dateReport.toDate().toISOString().slice(0,10):"",notesPrivees:M.notesPrivees||"",isMarqueEvaluation:M.isMarqueEvaluation,typeEvaluation:M.typeEvaluation||"",dateEvaluationPrevue:M.dateEvaluationPrevue?M.dateEvaluationPrevue.toDate().toISOString().slice(0,10):"",statutEvaluation:M.statutEvaluation||"a_evaluer"}))}}finally{g(!1)}})()},[e,t]);const I=G=>{p(V=>({...V,competences:V.competences.includes(G)?V.competences.filter(M=>M!==G):[...V.competences,G]}))},L=async G=>{if(!G.target.files?.length||!n?.uid||!e)return;const V=G.target.files[0];if(V.size>10*1024*1024){alert("Fichier trop volumineux (max 10 Mo)");return}w(!0);try{const M=await KX(n.uid,e,V),k=[...h,M];v(k),R&&t&&u&&await N2(t,h,[M])}catch{alert("Erreur upload fichier.")}finally{w(!1),G.target.value=""}},K=async G=>{if(!t){v(V=>V.filter(M=>M.url!==G));return}try{await XX(t,h,G),v(V=>V.filter(M=>M.url!==G))}catch{alert("Erreur suppression fichier.")}},U=async G=>{if(G.preventDefault(),!m.chapitre.trim()){C("Le chapitre est obligatoire.");return}if(!m.date){C("La date est obligatoire.");return}if(!(!n?.uid||!e)){j(!0),C("");try{if(R&&t)await jc(t,e,m),await jc(t,{liens:A,ebooksLies:T});else{const k=await sW(e,n.uid,m);h.length>0&&await N2(k,[],h),(A.length>0||T.length>0)&&await jc(k,{liens:A,ebooksLies:T})}const M=(await xT(e)).filter(k=>k.statut==="realise").length;await Jf(e,{nombreSeancesRealise:M}),a(`/prof/cahiers/${e}`)}catch(V){const M=V instanceof Error?V.message:String(V);C("Erreur : "+M)}finally{j(!1)}}};return b?r.jsx("div",{className:"loading-spinner",children:r.jsx("div",{className:"spinner-circle"})}):l?r.jsxs("div",{className:"entree-editor-page",children:[r.jsxs("div",{className:"editor-header",children:[r.jsx("button",{onClick:()=>a(`/prof/cahiers/${e}`),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem"},children:""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.4rem",fontWeight:700,color:"#1f2937",margin:"0 0 0.2rem"},children:R?" Modifier la sance":" Nouvelle sance"}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[l.titre,"  ",l.classe,"  ",l.matiere]})]})]}),r.jsxs("form",{onSubmit:U,children:[r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Informations de la sance"}),r.jsxs("div",{className:"form-row",style:{gridTemplateColumns:"1.5fr 1fr 1fr"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date *"}),r.jsx("input",{type:"date",className:"form-input",value:m.date,onChange:G=>p(V=>({...V,date:G.target.value})),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Heure dbut"}),r.jsx("input",{type:"time",className:"form-input",value:m.heureDebut,onChange:G=>p(V=>({...V,heureDebut:G.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Heure fin"}),r.jsx("input",{type:"time",className:"form-input",value:m.heureFin,onChange:G=>p(V=>({...V,heureFin:G.target.value}))})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Chapitre / Titre de la sance *"}),r.jsx("input",{className:"form-input",placeholder:"Ex: Chapitre 3  Les fonctions affines",value:m.chapitre,onChange:G=>p(V=>({...V,chapitre:G.target.value})),required:!0})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Type de sance"}),r.jsx("select",{className:"form-select",value:m.typeContenu,onChange:G=>p(V=>({...V,typeContenu:G.target.value})),children:Object.entries(qi).map(([G,V])=>r.jsxs("option",{value:G,children:[V.emoji," ",V.label]},G))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Statut"}),r.jsx("select",{className:"form-select",value:m.statut,onChange:G=>p(V=>({...V,statut:G.target.value})),children:Object.entries(Nc).map(([G,V])=>r.jsx("option",{value:G,children:V.label},G))})]})]}),m.statut==="annule"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Motif d'annulation"}),r.jsx("input",{className:"form-input",placeholder:"Ex: Grve enseignants, sortie scolaire...",value:m.motifAnnulation,onChange:G=>p(V=>({...V,motifAnnulation:G.target.value}))})]}),m.statut==="reporte"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Nouvelle date (report)"}),r.jsx("input",{type:"date",className:"form-input",value:m.dateReport,onChange:G=>p(V=>({...V,dateReport:G.target.value}))})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Contenu de la sance"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Contenu (mise en forme riche)"}),r.jsx(zW,{value:m.contenu,onChange:G=>p(V=>({...V,contenu:G})),placeholder:"Dcrivez le contenu enseign, les exemples traits, les formules vues..."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Ex: L'lve sera capable de rsoudre une quation du second degr...",value:m.objectifs,onChange:G=>p(V=>({...V,objectifs:G.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Comptences vises"}),r.jsx("div",{className:"competences-container",children:uW.map(G=>r.jsx("button",{type:"button",className:`competence-tag ${m.competences.includes(G)?"selected":""}`,onClick:()=>I(G),children:G},G))})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Signet d'valuation"}),r.jsxs("div",{className:"signet-section",children:[r.jsxs("div",{className:"signet-toggle",onClick:()=>p(G=>({...G,isMarqueEvaluation:!G.isMarqueEvaluation})),children:[r.jsx("div",{className:`toggle-switch ${m.isMarqueEvaluation?"on":""}`}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1f2937"},children:"Marquer pour valuation"}),r.jsx("div",{style:{fontSize:"0.78rem",color:"#6b7280"},children:"Ce contenu sera valu ultrieurement"})]})]}),m.isMarqueEvaluation&&r.jsx("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Type d'valuation"}),r.jsxs("select",{className:"form-select",value:m.typeEvaluation,onChange:G=>p(V=>({...V,typeEvaluation:G.target.value})),children:[r.jsx("option",{value:"",children:"Choisir..."}),Object.entries(bT).map(([G,V])=>r.jsx("option",{value:G,children:V},G))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date prvue d'valuation"}),r.jsx("input",{type:"date",className:"form-input",value:m.dateEvaluationPrevue,onChange:G=>p(V=>({...V,dateEvaluationPrevue:G.target.value}))})]})]})})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Pices jointes"}),h.length>0&&r.jsx("div",{className:"pieces-jointes-list",children:h.map(G=>r.jsxs("div",{className:"piece-jointe-item",children:[r.jsx("span",{children:""}),r.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",children:G.nom}),r.jsxs("span",{style:{color:"#9ca3af",fontSize:"0.75rem"},children:["(",Math.round((G.taille??0)/1024)," Ko)"]}),r.jsx("button",{type:"button",onClick:()=>K(G.url),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",marginLeft:"auto"},children:""})]},G.url))}),r.jsxs("label",{className:"upload-zone",children:[S?"Envoi en cours...":" Cliquer pour ajouter un fichier (PDF, image  max 10 Mo)",r.jsx("input",{type:"file",style:{display:"none"},accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.ppt,.pptx",onChange:L,disabled:S})]})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Ressources enrichies"}),r.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 4px"},children:"Ajoutez des liens ou des ebooks pour enrichir cette sance."}),r.jsx(NT,{liens:A,onChange:O}),r.jsx(_T,{ebooksLies:T,onChange:P})]}),r.jsxs("div",{className:"editor-card",children:[r.jsx("div",{className:"editor-section-title",children:" Notes prives"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Notes personnelles (non visibles par l'administration)...",value:m.notesPrivees,onChange:G=>p(V=>({...V,notesPrivees:G.target.value})),rows:3}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Ces notes sont uniquement visibles par vous."})]}),E&&r.jsx("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.85rem"},children:E}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingBottom:"2rem"},children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(`/prof/cahiers/${e}`),children:"Annuler"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:_,style:{minWidth:160},children:_?"Enregistrement...":R?" Mettre  jour":" Enregistrer la sance"})]})]})]}):null},Gi="sequences_pedagogiques",OW="entrees_cahier";function ST(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function rp(e){return e.filter(t=>t.estEvaluation&&t.typeEvaluation).map(t=>({id:t.id,titre:t.titre,type:t.typeEvaluation,seanceNumero:t.numero,noteMax:t.noteMax??20,coefficient:t.coefficient??1,datePrevue:t.datePrevue}))}async function DW(e){const t=Re(be(ie,Gi),Ce("profId","==",e),Je("updatedAt","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}async function Bc(e){const t=await It(je(ie,Gi,e));return t.exists()?{id:t.id,...t.data()}:null}async function MW(e,t){const n=Le.now(),a=t.seances.map(u=>({...u,id:u.id||ST(),exporterVersCahier:u.exporterVersCahier??!0,entreesCahierIds:u.entreesCahierIds??[]})),l=rp(a);return(await Lt(be(ie,Gi),{...t,profId:e,seances:a,evaluationsPrevues:l,statut:t.statut??"brouillon",genereeParIA:t.genereeParIA??!1,competences:t.competences??[],createdAt:n,updatedAt:n})).id}async function TW(e,t){const n={...t,updatedAt:Le.now()};t.seances&&(n.evaluationsPrevues=rp(t.seances)),await Ze(je(ie,Gi,e),n)}async function kW(e,t){await Ze(je(ie,Gi,e),{statut:t,updatedAt:Le.now()})}async function wT(e){await Cn(je(ie,Gi,e))}async function PW(e,t){const n=await Bc(e);if(!n)throw new Error(`Squence ${e} introuvable`);const a=Le.now(),l=n.seances.map(u=>({...u,id:ST(),exporterVersCahier:!0,entreesCahierIds:[],datePrevue:void 0}));return(await Lt(be(ie,Gi),{titre:`[Copie] ${n.titre}`,description:n.description,niveau:n.niveau,matiere:n.matiere,theme:n.theme,competences:n.competences,objectifGeneral:n.objectifGeneral,prerequis:n.prerequis,nombreSeances:n.nombreSeances,dureeSeanceMinutes:n.dureeSeanceMinutes,trimestre:n.trimestre,seances:l,evaluationsPrevues:rp(l),genereeParIA:n.genereeParIA,profId:t,statut:"brouillon",groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0,createdAt:a,updatedAt:a})).id}async function qW(e){const{sequenceId:t,cahierDeTextesId:n,profId:a,datesParSeance:l}=e,o=await Bc(t);if(!o)throw new Error(`Squence ${t} introuvable`);const u=Le.now(),d=[],m=[],p=Object.keys(l),h=[...o.seances];for(const v of p){const b=h.findIndex(j=>j.id===v);if(b===-1){m.push(v);continue}const g=h[b],_=l[v];try{const j={cahierId:n,profId:a,date:_,chapitre:g.titre,typeContenu:"cours",contenu:g.contenu,objectifs:g.objectifSpecifique,statut:"planifie",notesPrivees:g.ressources.length>0?`Ressources : ${g.ressources.join(" | ")}`:void 0,isMarqueEvaluation:!1,ordre:b,liens:[],ebooksLies:[],piecesJointes:[]},S=await Lt(be(ie,OW),{...j,createdAt:u,updatedAt:u});d.push(S.id),h[b]={...g,exporterVersCahier:!1,entreesCahierIds:[...g.entreesCahierIds??[],S.id]}}catch(j){console.error(`[exporterVersCahier] Erreur sance ${v}:`,j),m.push(v)}}return d.length>0&&await Ze(je(ie,Gi,t),{seances:h,evaluationsPrevues:rp(h),cahierDeTextesId:n,cahierDeTextesNom:o.cahierDeTextesNom??"",exporteAt:u,updatedAt:u}),{nbExportees:d.length,idsEntrees:d,erreurs:m}}function RW(e,t){return e.filter(n=>{if(t.matiere&&n.matiere!==t.matiere||t.niveau&&n.niveau!==t.niveau||t.statut&&n.statut!==t.statut||t.groupeClasseId&&n.groupeClasseId!==t.groupeClasseId)return!1;if(t.recherche){const a=t.recherche.toLowerCase();if(!(n.titre.toLowerCase().includes(a)||n.matiere.toLowerCase().includes(a)||n.theme.toLowerCase().includes(a)||n.description.toLowerCase().includes(a)))return!1}return!0})}const em={cours:"Cours",td:"TD",tp:"TP",evaluation:"valuation",revision:"Rvision",projet:"Projet",correction:"Correction"},n0={formative:"Formative",sommative:"Sommative",diagnostique:"Diagnostique",devoir:"Devoir sur table",composition:"Composition (BFEM/BAC)",interrogation:"Interrogation"},np={brouillon:{label:"Brouillon",couleur:"#6b7280"},active:{label:"En cours",couleur:"#2563eb"},terminee:{label:"Termine",couleur:"#16a34a"},archivee:{label:"Archive",couleur:"#9ca3af"}},lu=[{valeur:"6eme",label:"6me"},{valeur:"5eme",label:"5me"},{valeur:"4eme",label:"4me"},{valeur:"3eme",label:"3me (BFEM)"},{valeur:"2nde",label:"2nde"},{valeur:"1ere",label:"1re"},{valeur:"terminale",label:"Terminale (BAC)"}],tm=[30,45,55,60,90,120],CT=["Mathmatiques","Franais","Sciences de la Vie et de la Terre (SVT)","Histoire-Gographie","Physique-Chimie","Anglais","Philosophie","Sciences conomiques et Sociales","ducation Civique","Arts Plastiques","ducation Physique et Sportive"],IW=({statut:e})=>{const{label:t}=np[e];return r.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[r.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),t]})},LW=({sequence:e,onView:t,onEdit:n,onDuplicate:a,onDelete:l})=>{const o=e.seances.filter(u=>u.estEvaluation).length;return r.jsxs("article",{className:"sequence-card",onClick:t,role:"button",tabIndex:0,onKeyDown:u=>u.key==="Enter"&&t(),children:[r.jsxs("div",{className:"sequence-card__badges",children:[r.jsx(IW,{statut:e.statut}),e.genereeParIA&&r.jsx("span",{className:"badge-ia",children:" IA"})]}),r.jsx("h3",{className:"sequence-card__title",children:e.titre}),r.jsxs("div",{className:"sequence-card__meta",children:[r.jsx("span",{className:"sequence-card__meta-chip",children:e.matiere}),r.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:lu.find(u=>u.valeur===e.niveau)?.label??e.niveau}),e.trimestre&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",e.trimestre]})]}),e.description&&r.jsx("p",{className:"sequence-card__desc",children:e.description}),r.jsxs("div",{className:"sequence-card__footer",children:[r.jsxs("span",{className:"sequence-card__seances-count",children:[" ",e.seances.length," sance",e.seances.length>1?"s":"",o>0&&`   ${o} val.`]}),e.groupeClasseNom&&r.jsxs("span",{className:"sequence-card__groupe",children:[" ",e.groupeClasseNom]})]}),r.jsxs("div",{className:"sequence-card__actions",onClick:u=>u.stopPropagation(),children:[r.jsx("button",{className:"sequence-card__action-btn",onClick:n,title:"Modifier","aria-label":"Modifier la squence",children:""}),r.jsx("button",{className:"sequence-card__action-btn",onClick:a,title:"Dupliquer","aria-label":"Dupliquer la squence",children:""}),r.jsx("button",{className:"sequence-card__action-btn sequence-card__action-btn--danger",onClick:l,title:"Supprimer","aria-label":"Supprimer la squence",children:""})]})]})},$W=()=>{const e=yt(),{currentUser:t}=lt(),[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,p]=y.useState(null),[h,v]=y.useState({matiere:"",niveau:"",statut:"",recherche:""}),b=y.useCallback(async()=>{if(t?.uid){o(!0),d(null);try{const E=await DW(t.uid);a(E)}catch(E){console.error("[SequencesPage] Chargement:",E),d("Impossible de charger vos squences. Vrifiez votre connexion.")}finally{o(!1)}}},[t?.uid]);if(y.useEffect(()=>{b()},[b]),!t?.isPremium)return r.jsxs("div",{className:"premium-gate",children:[r.jsx("span",{className:"premium-gate__icon",children:""}),r.jsx("h2",{className:"premium-gate__title",children:"Fonctionnalit Premium"}),r.jsx("p",{className:"premium-gate__text",children:"Le Gnrateur de Squences Pdagogiques est rserv aux enseignants Premium. Passez  Premium pour crer des squences structures et les exporter vers votre Cahier de Textes."}),r.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/premium"),children:" Passer  Premium  2 000 FCFA/mois"})]});const g=RW(n,h),_=[...new Set(n.map(E=>E.matiere))].sort(),j=async E=>{if(window.confirm(`Supprimer la squence "${E.titre}" ?

Cette action est irrversible.`)){p(E.id);try{await wT(E.id),a(A=>A.filter(O=>O.id!==E.id))}catch(A){console.error("[SequencesPage] Suppression:",A),d("Erreur lors de la suppression. Ressayez.")}finally{p(null)}}},S=async E=>{if(t?.uid){p(E.id);try{const C=await PW(E.id,t.uid);e(`/prof/sequences/${C}/modifier`)}catch(C){console.error("[SequencesPage] Duplication:",C),d("Erreur lors de la duplication. Ressayez."),p(null)}}},w={total:n.length,active:n.filter(E=>E.statut==="active").length,terminee:n.filter(E=>E.statut==="terminee").length,ia:n.filter(E=>E.genereeParIA).length};return r.jsxs("div",{className:"sequences-page",children:[r.jsxs("div",{className:"sequences-page__header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"sequences-page__title",children:" Squences Pdagogiques"}),r.jsxs("p",{className:"sequences-page__subtitle",children:[w.total," squence",w.total>1?"s":"",w.active>0&&`  ${w.active} en cours`,w.ia>0&&`  ${w.ia} assiste${w.ia>1?"s":""} par IA`]})]}),r.jsx("button",{className:"sequences-page__btn-new",onClick:()=>e("/prof/sequences/nouvelle"),children:"+ Nouvelle squence"})]}),u&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",u,r.jsx("button",{onClick:b,style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontWeight:600},children:"Ressayer"})]}),r.jsxs("div",{className:"sequences-filters",role:"search",children:[r.jsx("input",{type:"search",className:"sequences-filters__search",placeholder:" Rechercher une squence...",value:h.recherche??"",onChange:E=>v(C=>({...C,recherche:E.target.value})),"aria-label":"Rechercher une squence"}),r.jsxs("select",{className:"sequences-filters__select",value:h.matiere??"",onChange:E=>v(C=>({...C,matiere:E.target.value})),"aria-label":"Filtrer par matire",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),_.map(E=>r.jsx("option",{value:E,children:E},E))]}),r.jsxs("select",{className:"sequences-filters__select",value:h.niveau??"",onChange:E=>v(C=>({...C,niveau:E.target.value})),"aria-label":"Filtrer par niveau",children:[r.jsx("option",{value:"",children:"Tous les niveaux"}),lu.map(E=>r.jsx("option",{value:E.valeur,children:E.label},E.valeur))]}),r.jsxs("select",{className:"sequences-filters__select",value:h.statut??"",onChange:E=>v(C=>({...C,statut:E.target.value})),"aria-label":"Filtrer par statut",children:[r.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(np).map(([E,{label:C}])=>r.jsx("option",{value:E,children:C},E))]})]}),l?r.jsx("div",{className:"sequences-grid",children:[1,2,3].map(E=>r.jsxs("div",{className:"sequence-card",style:{minHeight:180},children:[r.jsx("div",{className:"skeleton",style:{height:20,width:"40%",marginBottom:10}}),r.jsx("div",{className:"skeleton",style:{height:22,width:"80%",marginBottom:8}}),r.jsx("div",{className:"skeleton",style:{height:14,width:"60%"}})]},E))}):r.jsx("div",{className:"sequences-grid",role:"list",children:g.length===0?r.jsxs("div",{className:"sequences-empty",children:[r.jsx("span",{className:"sequences-empty__icon",children:""}),r.jsx("p",{className:"sequences-empty__text",children:n.length===0?"Aucune squence pour l'instant":"Aucune squence ne correspond  vos filtres"}),r.jsx("p",{className:"sequences-empty__hint",children:n.length===0?'Cliquez sur "+ Nouvelle squence" pour commencer':"Modifiez ou effacez les filtres pour voir plus de rsultats"})]}):g.map(E=>r.jsx("div",{role:"listitem",style:{opacity:m===E.id?.6:1},children:r.jsx(LW,{sequence:E,onView:()=>e(`/prof/sequences/${E.id}`),onEdit:()=>e(`/prof/sequences/${E.id}/modifier`),onDuplicate:()=>S(E),onDelete:()=>j(E)})},E.id))})]})},BW="https://votre-app.railway.app",UW=["cours","td","tp","evaluation","revision","projet","correction"],FW=["formative","sommative","diagnostique","devoir","composition","interrogation"];function GW(e){return UW.includes(e)?e:"cours"}function HW(e){if(e)return FW.includes(e)?e:"formative"}function QW(e){if(!e||typeof e!="object")throw new Error("Rponse IA invalide : non-objet");if(!Array.isArray(e.seances)||e.seances.length===0)throw new Error("Rponse IA invalide : tableau seances absent ou vide");const t=e.seances.map((n,a)=>({numero:Number(n.numero)||a+1,titre:String(n.titre??`Sance ${a+1}`),dureeMinutes:Number(n.dureeMinutes)||55,objectifSpecifique:String(n.objectifSpecifique??""),contenu:String(n.contenu??""),ressources:Array.isArray(n.ressources)?n.ressources.map(String):[],typeActivite:GW(String(n.typeActivite??"cours")),estEvaluation:!!n.estEvaluation,typeEvaluation:HW(n.typeEvaluation),noteMax:typeof n.noteMax=="number"?n.noteMax:void 0,coefficient:typeof n.coefficient=="number"?n.coefficient:void 0}));return{titre:String(e.titre??""),description:String(e.description??""),objectifGeneral:String(e.objectifGeneral??""),prerequis:String(e.prerequis??""),competences:Array.isArray(e.competences)?e.competences.map(String):[],seances:t}}function VW(){return`Tu es un expert en ingnierie pdagogique pour le systme ducatif sngalais 
(programme du Ministre de l'ducation Nationale du Sngal).

Tu gnres des squences pdagogiques structures pour des professeurs du secondaire 
(collges et lyces sngalais, niveaux 6me  Terminale).

RPONDRE UNIQUEMENT EN JSON valide. Aucun texte avant ou aprs le JSON.
Aucune balise markdown, aucun \`\`\`json.

Structure JSON attendue :
{
  "titre": "string",
  "description": "string (2-3 phrases contextuelles)",
  "objectifGeneral": "string (formulation en termes de comptences, verbes d'action)",
  "prerequis": "string (connaissances ncessaires avant cette squence)",
  "competences": ["string", "string", ...],
  "seances": [
    {
      "numero": 1,
      "titre": "string",
      "dureeMinutes": 55,
      "objectifSpecifique": "string (verbe d'action + contenu)",
      "contenu": "string (droulement dtaill de la sance)",
      "ressources": ["string", ...],
      "typeActivite": "cours|td|tp|evaluation|revision|projet|correction",
      "estEvaluation": false,
      "typeEvaluation": null,
      "noteMax": null,
      "coefficient": null
    }
  ]
}

Rgles :
- Respecte les programmes officiels sngalais
- Les trimestres au Sngal : 1er (Oct-Dc), 2me (Jan-Mars), 3me (Avr-Juin)
- Inclure des sances de rvision avant les valuations
- Pour les valuations (estEvaluation=true), prciser typeEvaluation
- Les contenus doivent tre adapts aux ralits sngalaises (exemples locaux)
- Note maximale habituelle : 20 (systme franais)
- Niveaux  fort enjeu : 3me (BFEM), Terminale (BAC)
- Langue : franais`}async function YW(e){const t=`
Gnre une squence pdagogique complte pour :
- Matire : ${e.matiere}
- Niveau : ${e.niveau}
- Thme/Chapitre : ${e.theme}
- Nombre de sances : ${e.nombreSeances}
- Dure par sance : ${e.dureeSeanceMinutes} minutes
${e.trimestre?`- Trimestre : ${e.trimestre}me trimestre`:""}
${e.instructionsSupplementaires?`- Instructions supplmentaires : ${e.instructionsSupplementaires}`:""}

Distribue intelligemment les sances : cours  TD/TP  rvision  valuation.
Assure-toi que les objectifs spcifiques sont progressifs et mesurables.
  `.trim();let n;try{n=await fetch(`${BW}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({systemPrompt:VW(),userPrompt:t,maxTokens:4e3})})}catch{throw new Error("Impossible de contacter le serveur IA. Vrifiez votre connexion Internet.")}if(!n.ok){const d=await n.text().catch(()=>"Erreur inconnue");throw new Error(`Erreur serveur IA (${n.status}) : ${d}`)}const a=await n.json(),l=a.content??a.result??a.text??"";if(!l)throw new Error("Rponse IA vide  le serveur a renvoy un contenu vide.");const o=l.replace(/^```json\s*/i,"").replace(/^```\s*/,"").replace(/```\s*$/,"").trim();let u;try{u=JSON.parse(o)}catch{throw new Error(`Rponse IA non parsable : ${o.substring(0,200)}...`)}return QW(u)}function AT(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function KW(e){return{id:AT(),numero:e,titre:"",dureeMinutes:55,objectifSpecifique:"",contenu:"",ressources:[],typeActivite:"cours",estEvaluation:!1,exporterVersCahier:!0,entreesCahierIds:[]}}const XW=({seance:e,onChange:t,onDelete:n,onMoveUp:a,onMoveDown:l,isFirst:o,isLast:u})=>{const[d,m]=y.useState(e.titre===""),[p,h]=y.useState(""),v=_=>t({...e,..._}),b=()=>{const _=p.trim();_&&(v({ressources:[...e.ressources,_]}),h(""))},g=_=>v({ressources:e.ressources.filter((j,S)=>S!==_)});return r.jsxs("div",{className:"seance-card",children:[r.jsxs("div",{className:"seance-card__header",onClick:()=>m(_=>!_),children:[r.jsx("div",{className:`seance-card__numero${e.estEvaluation?" seance-card__numero--eval":""}`,children:e.numero}),r.jsx("span",{className:"seance-card__header-title",children:e.titre||`Sance ${e.numero} (sans titre)`}),r.jsxs("div",{className:"seance-card__header-badges",children:[r.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:em[e.typeActivite]}),r.jsxs("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:[e.dureeMinutes,"min"]})]}),r.jsx("span",{className:`seance-card__toggle-icon${d?" seance-card__toggle-icon--open":""}`,children:""})]}),d&&r.jsxs("div",{className:"seance-card__body",children:[r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsxs("label",{children:["Titre de la sance ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Introduction aux vecteurs",value:e.titre,onChange:_=>v({titre:_.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type d'activit"}),r.jsx("select",{className:"form-control",value:e.typeActivite,onChange:_=>v({typeActivite:_.target.value,estEvaluation:_.target.value==="evaluation"?!0:e.estEvaluation}),children:Object.entries(em).map(([_,j])=>r.jsx("option",{value:_,children:j},_))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure (minutes)"}),r.jsxs("select",{className:"form-control",value:e.dureeMinutes,onChange:_=>v({dureeMinutes:Number(_.target.value)}),children:[tm.map(_=>r.jsxs("option",{value:_,children:[_," min"]},_)),r.jsx("option",{value:e.dureeMinutes,children:tm.includes(e.dureeMinutes)?null:`${e.dureeMinutes} min (personnalis)`})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Objectif spcifique"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Ex : L'lve sera capable de calculer le module d'un vecteur",value:e.objectifSpecifique,onChange:_=>v({objectifSpecifique:_.target.value}),rows:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Contenu / Droulement"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Dcrivez le droulement de la sance : activits, tapes, mthodes...",value:e.contenu,onChange:_=>v({contenu:_.target.value}),rows:4})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Supports / Ressources"}),e.ressources.length>0&&r.jsx("div",{className:"timeline-card__ressources",style:{marginBottom:6},children:e.ressources.map((_,j)=>r.jsxs("span",{className:"ressource-chip",style:{cursor:"pointer"},onClick:()=>g(j),title:"Cliquer pour supprimer",children:[_," "]},j))}),r.jsxs("div",{className:"competence-input-row",children:[r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Manuel p.42, GeoGebra, Calculatrice...",value:p,onChange:_=>h(_.target.value),onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),b())}),r.jsx("button",{type:"button",className:"btn-add-competence",onClick:b,children:"+ Ajouter"})]})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[r.jsx("input",{type:"checkbox",checked:e.estEvaluation,onChange:_=>v({estEvaluation:_.target.checked,typeEvaluation:_.target.checked?e.typeEvaluation??"formative":void 0}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Cette sance est une valuation"]})}),e.estEvaluation&&r.jsxs("div",{className:"editor-form-grid",style:{background:"#fef2f2",padding:12,borderRadius:8,border:"1px solid #fecaca"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type d'valuation"}),r.jsx("select",{className:"form-control",value:e.typeEvaluation??"formative",onChange:_=>v({typeEvaluation:_.target.value}),children:Object.entries(n0).map(([_,j])=>r.jsx("option",{value:_,children:j},_))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Note maximale"}),r.jsx("input",{type:"number",className:"form-control",min:1,max:100,value:e.noteMax??20,onChange:_=>v({noteMax:Number(_.target.value)})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Coefficient"}),r.jsx("input",{type:"number",className:"form-control",min:1,max:10,step:.5,value:e.coefficient??1,onChange:_=>v({coefficient:Number(_.target.value)})})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[r.jsx("input",{type:"checkbox",checked:e.exporterVersCahier,onChange:_=>v({exporterVersCahier:_.target.checked}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Inclure dans l'export vers le Cahier de Textes"]}),e.entreesCahierIds&&e.entreesCahierIds.length>0&&r.jsxs("span",{className:"export-seance-row__exported",style:{marginTop:4},children:[" Dj exporte (",e.entreesCahierIds.length," entre",e.entreesCahierIds.length>1?"s":"",")"]})]}),r.jsxs("div",{className:"seance-card__actions",children:[r.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:a,disabled:o,title:"Monter",children:""}),r.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:l,disabled:u,title:"Descendre",children:""}),r.jsx("button",{type:"button",className:"btn-seance-action btn-seance-action--delete",onClick:n,children:" Supprimer cette sance"})]})]})]})},WW=({onSequenceGeneree:e,defaultMatiere:t,defaultNiveau:n,matieres:a})=>{const[l,o]=y.useState(t??""),[u,d]=y.useState(n??""),[m,p]=y.useState(""),[h,v]=y.useState(8),[b,g]=y.useState(55),[_,j]=y.useState(1),[S,w]=y.useState(""),[E,C]=y.useState(!1),[A,O]=y.useState({type:"idle",message:""}),T=async()=>{if(!l||!u||!m){O({type:"error",message:"Veuillez remplir la matire, le niveau et le thme."});return}C(!0),O({type:"loading",message:"L'IA gnre votre squence... (30-45 secondes)"});try{const P=await YW({matiere:l,niveau:u,theme:m,nombreSeances:h,dureeSeanceMinutes:b,trimestre:_,instructionsSupplementaires:S||void 0}),R=P.seances.map(I=>({...I,ressources:I.ressources??[]}));e({titre:P.titre,description:P.description,objectifGeneral:P.objectifGeneral,prerequis:P.prerequis,competences:P.competences,seances:R}),O({type:"success",message:` Squence gnre avec ${R.length} sances ! Vrifiez et compltez les informations.`})}catch(P){const R=P instanceof Error?P.message:"Erreur inconnue";O({type:"error",message:`Erreur IA : ${R}`})}finally{C(!1)}};return r.jsxs("div",{className:"ia-panel",children:[r.jsx("h3",{className:"ia-panel__title",children:" Gnration assiste par IA"}),r.jsx("p",{className:"ia-panel__subtitle",children:"Dcrivez votre squence et Claude gnre la structure complte"}),r.jsxs("div",{className:"ia-panel__form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Matire ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l,onChange:P=>o(P.target.value),children:[r.jsx("option",{value:"",children:"Slectionner..."}),a.length>0?a.map(P=>r.jsx("option",{value:P,children:P},P)):CT.map(P=>r.jsx("option",{value:P,children:P},P))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Niveau ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:u,onChange:P=>d(P.target.value),children:[r.jsx("option",{value:"",children:"Slectionner..."}),lu.map(P=>r.jsx("option",{value:P.valeur,children:P.label},P.valeur))]})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[r.jsxs("label",{children:["Thme / Chapitre ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines, La photosynthse, La Rvolution franaise...",value:m,onChange:P=>p(P.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Nombre de sances"}),r.jsx("input",{type:"number",className:"form-control",min:2,max:25,value:h,onChange:P=>v(Number(P.target.value))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure par sance"}),r.jsx("select",{className:"form-control",value:b,onChange:P=>g(Number(P.target.value)),children:tm.map(P=>r.jsxs("option",{value:P,children:[P," min"]},P))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Trimestre"}),r.jsxs("select",{className:"form-control",value:_,onChange:P=>j(Number(P.target.value)),children:[r.jsx("option",{value:1,children:"1er trimestre (OctDc)"}),r.jsx("option",{value:2,children:"2me trimestre (JanMars)"}),r.jsx("option",{value:3,children:"3me trimestre (AvrJuin)"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Instructions supplmentaires (optionnel)"}),r.jsx("textarea",{className:"ia-panel__instructions",placeholder:"Ex : Insister sur la rsolution graphique, Inclure un TP sur GeoGebra, Prvoir une sance de remdiation...",value:S,onChange:P=>w(P.target.value),rows:2})]}),r.jsxs("button",{type:"button",className:"ia-panel__btn-generate",onClick:T,disabled:E,children:[E?r.jsx("span",{className:"spinner"}):"",E?"Gnration en cours...":"Gnrer avec l'IA"]}),A.type!=="idle"&&r.jsxs("div",{className:`ia-panel__status ia-panel__status--${A.type}`,children:[A.type==="loading"&&r.jsx("span",{className:"spinner spinner--blue"}),A.message]})]})},E2=()=>{const e=yt(),{id:t}=Ha(),{currentUser:n}=lt(),a=!!t,[l,o]=y.useState({titre:"",description:"",niveau:"",matiere:"",theme:"",competences:[],objectifGeneral:"",prerequis:"",nombreSeances:6,dureeSeanceMinutes:55,seances:[],evaluationsPrevues:[],statut:"brouillon",genereeParIA:!1,trimestre:void 0,groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0}),[u,d]=y.useState([]),[m,p]=y.useState([]),[h,v]=y.useState([]),[b,g]=y.useState([]),[_,j]=y.useState(a),[S,w]=y.useState(!1),[E,C]=y.useState(null),[A,O]=y.useState(null),[T,P]=y.useState(""),[R,I]=y.useState(!a);y.useEffect(()=>{(async()=>{if(!n?.uid)return;const[q,fe,te]=await Promise.all([vT(n.uid).catch(()=>[]),yT(n.uid).catch(()=>[]),Qa.getAll().catch(()=>[])]);p(q),v(fe);const ue=[...new Set(te.map(he=>he.nom))].sort();if(g(ue),a&&t){j(!0);try{const he=await Bc(t);if(!he){C("Squence introuvable.");return}if(he.profId!==n.uid){C("Accs non autoris.");return}o({titre:he.titre,description:he.description,niveau:he.niveau,matiere:he.matiere,theme:he.theme,competences:he.competences,objectifGeneral:he.objectifGeneral,prerequis:he.prerequis,nombreSeances:he.nombreSeances,dureeSeanceMinutes:he.dureeSeanceMinutes,statut:he.statut,genereeParIA:he.genereeParIA,trimestre:he.trimestre,groupeClasseId:he.groupeClasseId,groupeClasseNom:he.groupeClasseNom,cahierDeTextesId:he.cahierDeTextesId,cahierDeTextesNom:he.cahierDeTextesNom}),d(he.seances)}catch{C("Erreur de chargement. Ressayez.")}finally{j(!1)}}})()},[n?.uid,t,a]);const L=()=>{d(B=>[...B,KW(B.length+1)])},K=(B,q)=>{d(fe=>fe.map((te,ue)=>ue===B?q:te))},U=B=>{d(q=>q.filter((fe,te)=>te!==B).map((fe,te)=>({...fe,numero:te+1})))},G=B=>{B!==0&&d(q=>{const fe=[...q];return[fe[B-1],fe[B]]=[fe[B],fe[B-1]],fe.map((te,ue)=>({...te,numero:ue+1}))})},V=B=>{d(q=>{if(B===q.length-1)return q;const fe=[...q];return[fe[B],fe[B+1]]=[fe[B+1],fe[B]],fe.map((te,ue)=>({...te,numero:ue+1}))})},M=()=>{const B=T.trim();B&&(o(q=>({...q,competences:[...q.competences??[],B]})),P(""))},k=B=>{o(q=>({...q,competences:(q.competences??[]).filter((fe,te)=>te!==B)}))},J=B=>{o(fe=>({...fe,titre:B.titre,description:B.description,objectifGeneral:B.objectifGeneral,prerequis:B.prerequis,competences:B.competences,genereeParIA:!0}));const q=B.seances.map(fe=>({...fe,id:AT(),exporterVersCahier:!0,entreesCahierIds:[]}));d(q),I(!1),window.scrollTo({top:0,behavior:"smooth"})},Q=async()=>{if(!n?.uid)return;if(!l.titre?.trim()){C("Le titre est obligatoire.");return}if(!l.matiere?.trim()){C("La matire est obligatoire.");return}if(!l.niveau?.trim()){C("Le niveau est obligatoire.");return}const B=u.find(ue=>!ue.titre.trim());if(B){C(`La sance n${B.numero} n'a pas de titre.`);return}w(!0),C(null);const q=h.find(ue=>ue.id===l.groupeClasseId),fe=m.find(ue=>ue.id===l.cahierDeTextesId),te={titre:l.titre.trim(),description:l.description?.trim()??"",niveau:l.niveau,matiere:l.matiere.trim(),theme:l.theme?.trim()??"",competences:l.competences??[],objectifGeneral:l.objectifGeneral?.trim()??"",prerequis:l.prerequis?.trim()??"",nombreSeances:u.length,dureeSeanceMinutes:l.dureeSeanceMinutes??55,statut:l.statut??"brouillon",genereeParIA:l.genereeParIA??!1,trimestre:l.trimestre??null,seances:u,evaluationsPrevues:[],groupeClasseId:l.groupeClasseId||null,groupeClasseNom:q?.nom||l.groupeClasseNom||null,cahierDeTextesId:l.cahierDeTextesId||null,cahierDeTextesNom:fe?.titre||l.cahierDeTextesNom||null};try{if(a&&t)await TW(t,te),O("Squence mise  jour avec succs !"),setTimeout(()=>e(`/prof/sequences/${t}`),1200);else{const ue=await MW(n.uid,te);O("Squence cre avec succs !"),setTimeout(()=>e(`/prof/sequences/${ue}`),1200)}}catch(ue){console.error("[SequenceEditorPage] Sauvegarde:",ue),C("Erreur lors de la sauvegarde. Ressayez.")}finally{w(!1)}};return _?r.jsxs("div",{className:"sequence-editor",children:[r.jsx("div",{className:"skeleton",style:{height:30,width:"50%",marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:200,borderRadius:12}})]}):r.jsxs("div",{className:"sequence-editor",children:[r.jsxs("div",{className:"sequence-editor__header",children:[r.jsxs("p",{className:"sequence-editor__breadcrumb",children:[r.jsx("a",{onClick:()=>e("/prof/sequences"),style:{cursor:"pointer"},children:" Squences"})," / ",a?"Modifier":"Nouvelle squence"]}),r.jsx("h1",{className:"sequence-editor__title",children:a?" Modifier la squence":" Nouvelle squence"})]}),E&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",E]}),A&&r.jsxs("div",{className:"success-banner",role:"status",children:[" ",A]}),r.jsx("div",{style:{marginBottom:8},children:r.jsx("button",{type:"button",className:"btn-secondary",style:{marginBottom:12},onClick:()=>I(B=>!B),children:R?" Masquer":" Gnrer avec l'IA"})}),R&&r.jsx(WW,{onSequenceGeneree:J,defaultMatiere:l.matiere,defaultNiveau:l.niveau,matieres:b}),r.jsxs("section",{className:"editor-section",children:[r.jsx("h2",{className:"editor-section__title",children:" Informations gnrales"}),r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsxs("label",{children:["Titre de la squence ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines  Terminale S",value:l.titre??"",onChange:B=>o(q=>({...q,titre:B.target.value})),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Matire ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l.matiere??"",onChange:B=>o(q=>({...q,matiere:B.target.value})),children:[r.jsx("option",{value:"",children:"Slectionner..."}),b.length>0?b.map(B=>r.jsx("option",{value:B,children:B},B)):CT.map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:["Niveau ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{className:"form-control",value:l.niveau??"",onChange:B=>o(q=>({...q,niveau:B.target.value})),children:[r.jsx("option",{value:"",children:"Slectionner..."}),lu.map(B=>r.jsx("option",{value:B.valeur,children:B.label},B.valeur))]})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Thme / Chapitre du programme"}),r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Chapitre 4  Les vecteurs du plan",value:l.theme??"",onChange:B=>o(q=>({...q,theme:B.target.value}))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Trimestre"}),r.jsxs("select",{className:"form-control",value:l.trimestre??"",onChange:B=>o(q=>({...q,trimestre:B.target.value?Number(B.target.value):void 0})),children:[r.jsx("option",{value:"",children:"Non prcis"}),r.jsx("option",{value:"1",children:"1er trimestre (OctDc)"}),r.jsx("option",{value:"2",children:"2me trimestre (JanMars)"}),r.jsx("option",{value:"3",children:"3me trimestre (AvrJuin)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Dure standard d'une sance"}),r.jsx("select",{className:"form-control",value:l.dureeSeanceMinutes??55,onChange:B=>o(q=>({...q,dureeSeanceMinutes:Number(B.target.value)})),children:tm.map(B=>r.jsxs("option",{value:B,children:[B," minutes"]},B))})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Description / Contexte"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Contexte de la squence dans le programme, niveau de la classe, prrequis globaux...",value:l.description??"",onChange:B=>o(q=>({...q,description:B.target.value})),rows:3})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Objectif gnral"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:" la fin de cette squence, les lves seront capables de...",value:l.objectifGeneral??"",onChange:B=>o(q=>({...q,objectifGeneral:B.target.value})),rows:2})]}),r.jsxs("div",{className:"form-group editor-form-grid--full",children:[r.jsx("label",{children:"Prrequis"}),r.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Connaissances ncessaires avant cette squence...",value:l.prerequis??"",onChange:B=>o(q=>({...q,prerequis:B.target.value})),rows:2})]})]}),r.jsxs("div",{className:"form-group",style:{marginTop:14},children:[r.jsx("label",{children:"Comptences vises"}),r.jsx("div",{className:"competences-list",children:(l.competences??[]).map((B,q)=>r.jsxs("span",{className:"competence-tag",children:[B,r.jsx("button",{type:"button",className:"competence-tag__remove",onClick:()=>k(q),"aria-label":"Supprimer la comptence",children:""})]},q))}),r.jsxs("div",{className:"competence-input-row",children:[r.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Rsoudre une quation du second degr",value:T,onChange:B=>P(B.target.value),onKeyDown:B=>B.key==="Enter"&&(B.preventDefault(),M())}),r.jsx("button",{type:"button",className:"btn-add-competence",onClick:M,children:"+ Ajouter"})]})]})]}),r.jsxs("section",{className:"editor-section",children:[r.jsx("h2",{className:"editor-section__title",children:" Liens optionnels"}),r.jsxs("div",{className:"editor-form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Groupe-classe"}),r.jsxs("select",{className:"form-control",value:l.groupeClasseId??"",onChange:B=>o(q=>({...q,groupeClasseId:B.target.value||void 0})),children:[r.jsx("option",{value:"",children:"Aucun groupe"}),h.map(B=>r.jsxs("option",{value:B.id,children:[B.nom,"  ",B.classe]},B.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Cahier de Textes"}),r.jsxs("select",{className:"form-control",value:l.cahierDeTextesId??"",onChange:B=>o(q=>({...q,cahierDeTextesId:B.target.value||void 0})),children:[r.jsx("option",{value:"",children:" Aucun cahier "}),m.filter(B=>l.matiere&&l.niveau?B.matiere===l.matiere&&B.classe===l.niveau:l.matiere?B.matiere===l.matiere:l.niveau?B.classe===l.niveau:!0).map(B=>r.jsxs("option",{value:B.id,children:[B.titre,"  ",B.classe,"  ",B.anneeScolaire]},B.id))]}),l.niveau&&l.matiere&&m.filter(B=>B.classe===l.niveau&&B.matiere===l.matiere).length===0&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#f59e0b",marginTop:6},children:[" Aucun cahier pour ",l.matiere,"  ",l.niveau,"."," ",r.jsx("a",{href:"/prof/cahiers",style:{color:"#2563eb",textDecoration:"underline"},children:"Crer un cahier"})]}),(!l.niveau||!l.matiere)&&m.length>0&&r.jsx("p",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:6},children:" Slectionnez la matire et le niveau pour filtrer les cahiers."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Statut"}),r.jsxs("select",{className:"form-control",value:l.statut??"brouillon",onChange:B=>o(q=>({...q,statut:B.target.value})),children:[r.jsx("option",{value:"brouillon",children:"Brouillon"}),r.jsx("option",{value:"active",children:"En cours"}),r.jsx("option",{value:"terminee",children:"Termine"}),r.jsx("option",{value:"archivee",children:"Archive"})]})]})]})]}),r.jsxs("section",{className:"editor-section",children:[r.jsxs("div",{className:"seances-editor__header",children:[r.jsx("h2",{className:"editor-section__title",style:{margin:0},children:" Sances"}),r.jsxs("span",{className:"seances-editor__count",children:[u.length," sance",u.length>1?"s":"",u.filter(B=>B.estEvaluation).length>0&&`  ${u.filter(B=>B.estEvaluation).length} val.`]})]}),r.jsx("div",{className:"seances-list",children:u.length===0?r.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",textAlign:"center",padding:"20px 0"},children:"Aucune sance. Utilisez le bouton ci-dessous ou gnrez avec l'IA."}):u.map((B,q)=>r.jsx(XW,{seance:B,onChange:fe=>K(q,fe),onDelete:()=>U(q),onMoveUp:()=>G(q),onMoveDown:()=>V(q),isFirst:q===0,isLast:q===u.length-1},B.id))}),r.jsx("button",{type:"button",className:"btn-add-seance",style:{marginTop:14},onClick:L,children:"+ Ajouter une sance"})]}),r.jsxs("div",{style:{position:"sticky",bottom:16,display:"flex",justifyContent:"flex-end",gap:10,background:"rgba(248,250,252,0.95)",backdropFilter:"blur(6px)",padding:"12px 0",zIndex:10},children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>e("/prof/sequences"),disabled:S,children:"Annuler"}),r.jsx("button",{type:"button",className:"btn-primary",onClick:Q,disabled:S,children:S?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Enregistrement..."]}):a?" Mettre  jour":" Crer la squence"})]})]})},ZW=({statut:e})=>{const{label:t}=np[e];return r.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[r.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),t]})},JW=({sequence:e,cahiers:t,profId:n,onClose:a,onSuccess:l})=>{const[o,u]=y.useState(e.cahierDeTextesId??(t.length===1?t[0].id:"")),[d,m]=y.useState(()=>{const w=new Date().toISOString().split("T")[0],E={};return e.seances.forEach(C=>{E[C.id]=w}),E}),[p,h]=y.useState(()=>{const w={};return e.seances.forEach(E=>{w[E.id]=E.exporterVersCahier&&(!E.entreesCahierIds||E.entreesCahierIds.length===0)}),w}),[v,b]=y.useState(!1),[g,_]=y.useState(null),j=Object.values(p).filter(Boolean).length,S=async()=>{if(!o){_("Veuillez slectionner un Cahier de Textes.");return}if(j===0){_("Slectionnez au moins une sance  exporter.");return}b(!0),_(null);const w={};e.seances.filter(E=>p[E.id]).forEach(E=>{const C=d[E.id];if(C){const A=Le.fromDate(new Date(C+"T08:00:00"));w[E.id]=A}});try{const E=await qW({sequenceId:e.id,cahierDeTextesId:o,profId:n,datesParSeance:w});E.erreurs.length>0&&_(`${E.erreurs.length} sance(s) n'ont pas pu tre exportes.`),l(E.nbExportees)}catch(E){const C=E instanceof Error?E.message:"Erreur inconnue";_(`Erreur d'export : ${C}`)}finally{b(!1)}};return y.useEffect(()=>{const w=E=>{E.key==="Escape"&&a()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[a]),r.jsx("div",{className:"export-modal__overlay",onClick:w=>w.target===w.currentTarget&&a(),children:r.jsxs("div",{className:"export-modal",role:"dialog","aria-modal":"true","aria-labelledby":"export-modal-title",children:[r.jsxs("div",{className:"export-modal__header",children:[r.jsx("h2",{className:"export-modal__title",id:"export-modal-title",children:" Exporter vers le Cahier de Textes"}),r.jsx("button",{className:"export-modal__close",onClick:a,"aria-label":"Fermer",children:""})]}),r.jsxs("div",{className:"export-modal__body",children:[r.jsxs("div",{className:"form-group",style:{marginBottom:16},children:[r.jsxs("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:["Cahier de Textes cible ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.length===0?r.jsx("p",{style:{color:"#dc2626",fontSize:"0.875rem"},children:"Aucun Cahier de Textes trouv. Crez-en un d'abord."}):r.jsxs("select",{className:"form-control",value:o,onChange:w=>u(w.target.value),children:[r.jsx("option",{value:"",children:"Slectionner un cahier..."}),t.map(w=>r.jsxs("option",{value:w.id,children:[w.titre,"  ",w.classe," (",w.anneeScolaire,")"]},w.id))]})]}),r.jsx("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:12},children:"Slectionnez les sances  exporter et assignez leur une date. Chaque sance deviendra une entre dans le Cahier de Textes."}),e.seances.map(w=>{const E=(w.entreesCahierIds?.length??0)>0;return r.jsxs("div",{className:"export-seance-row",children:[r.jsx("input",{type:"checkbox",className:"export-seance-row__check",checked:!!p[w.id],onChange:C=>h(A=>({...A,[w.id]:C.target.checked})),id:`export-${w.id}`,"aria-label":`Exporter la sance ${w.numero}`}),r.jsxs("div",{className:"export-seance-row__info",children:[r.jsx("label",{htmlFor:`export-${w.id}`,style:{cursor:"pointer"},children:r.jsxs("div",{className:"export-seance-row__titre",children:[w.numero,". ",w.titre||`Sance ${w.numero}`]})}),r.jsxs("div",{className:"export-seance-row__type",children:[em[w.typeActivite],"  ",w.dureeMinutes,"min",E&&r.jsx("span",{className:"export-seance-row__exported",style:{marginLeft:6},children:" Dj exporte"})]})]}),r.jsx("input",{type:"date",className:"export-seance-row__date",value:d[w.id]??"",onChange:C=>m(A=>({...A,[w.id]:C.target.value})),disabled:!p[w.id],"aria-label":`Date pour la sance ${w.numero}`})]},w.id)}),g&&r.jsxs("div",{className:"error-banner",style:{marginTop:12},children:[" ",g]})]}),r.jsxs("div",{className:"export-modal__footer",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:a,disabled:v,children:"Annuler"}),r.jsx("button",{type:"button",className:"btn-success",onClick:S,disabled:v||j===0||!o,children:v?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner"})," Export en cours..."]}):` Exporter ${j} sance${j>1?"s":""}`})]})]})})},eZ=()=>{const e=yt(),{id:t}=Ha(),{currentUser:n}=lt(),[a,l]=y.useState(null),[o,u]=y.useState([]),[d,m]=y.useState(!0),[p,h]=y.useState(null),[v,b]=y.useState(null),[g,_]=y.useState("seances"),[j,S]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!(!n?.uid||!t)){m(!0);try{const[T,P]=await Promise.all([Bc(t),vT(n.uid)]);if(!T){h("Squence introuvable.");return}if(T.profId!==n.uid){h("Accs non autoris.");return}l(T),u(P)}catch{h("Erreur de chargement.")}finally{m(!1)}}})()},[n?.uid,t]);const w=async()=>{if(!(!a||!window.confirm(`Supprimer "${a.titre}" ?
Cette action est irrversible.`)))try{await wT(a.id),e("/prof/sequences")}catch{h("Erreur lors de la suppression.")}},E=async O=>{if(a)try{await kW(a.id,O),l(T=>T?{...T,statut:O}:null)}catch{h("Erreur de mise  jour du statut.")}},C=O=>{S(!1),b(` ${O} sance${O>1?"s":""} exporte${O>1?"s":""} vers le Cahier de Textes !`),t&&Bc(t).then(T=>T&&l(T)).catch(()=>null),setTimeout(()=>b(null),5e3)};if(d)return r.jsxs("div",{className:"sequence-detail",children:[r.jsx("div",{className:"skeleton",style:{height:28,width:"50%",marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:180,borderRadius:12,marginBottom:20}}),r.jsx("div",{className:"skeleton",style:{height:400,borderRadius:12}})]});if(p||!a)return r.jsxs("div",{className:"sequence-detail",children:[r.jsxs("div",{className:"error-banner",children:[" ",p??"Squence introuvable."]}),r.jsx("button",{className:"btn-secondary",onClick:()=>e("/prof/sequences"),children:" Retour"})]});const A=lu.find(O=>O.valeur===a.niveau)?.label??a.niveau;return r.jsxs("div",{className:"sequence-detail",children:[j&&r.jsx(JW,{sequence:a,cahiers:o,profId:n.uid,onClose:()=>S(!1),onSuccess:C}),p&&r.jsxs("div",{className:"error-banner",role:"alert",children:[" ",p]}),v&&r.jsx("div",{className:"success-banner",role:"status",children:v}),r.jsxs("div",{className:"sequence-detail__header",children:[r.jsxs("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:8},children:[r.jsx("a",{onClick:()=>e("/prof/sequences"),style:{color:"#2563eb",cursor:"pointer",fontWeight:500},children:" Squences"})," / ",a.titre]}),r.jsxs("div",{className:"sequence-detail__header-top",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"sequence-detail__title",children:a.titre}),r.jsxs("div",{className:"sequence-detail__meta",style:{marginTop:8},children:[r.jsx(ZW,{statut:a.statut}),a.genereeParIA&&r.jsx("span",{className:"badge-ia",children:" IA"}),r.jsx("span",{className:"sequence-card__meta-chip",children:a.matiere}),r.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:A}),a.trimestre&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",a.trimestre]}),a.groupeClasseNom&&r.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:[" ",a.groupeClasseNom]})]})]}),r.jsxs("div",{className:"sequence-detail__actions",children:[r.jsx("select",{className:"form-control",style:{width:"auto",fontSize:"0.8rem"},value:a.statut,onChange:O=>E(O.target.value),"aria-label":"Changer le statut",children:Object.entries(np).map(([O,{label:T}])=>r.jsx("option",{value:O,children:T},O))}),r.jsx("button",{className:"btn-success",onClick:()=>S(!0),title:"Exporter les sances vers le Cahier de Textes",children:" Exporter"}),r.jsx("button",{className:"btn-secondary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Modifier"}),r.jsx("button",{className:"btn-danger",onClick:w,children:""})]})]}),a.objectifGeneral&&r.jsxs("div",{className:"sequence-detail__objectif",children:[r.jsx("strong",{children:" Objectif :"})," ",a.objectifGeneral]}),r.jsxs("div",{style:{display:"flex",gap:16,marginTop:12,flexWrap:"wrap",fontSize:"0.8125rem",color:"#64748b"},children:[r.jsxs("span",{children:[" ",a.seances.length," sances"]}),r.jsxs("span",{children:[" ",a.evaluationsPrevues.length," valuation",a.evaluationsPrevues.length>1?"s":""]}),r.jsxs("span",{children:[" ",a.seances.reduce((O,T)=>O+T.dureeMinutes,0)," min total"]}),a.cahierDeTextesNom&&r.jsxs("span",{children:[" ",a.cahierDeTextesNom]}),a.exporteAt&&r.jsxs("span",{children:[" Export le ",a.exporteAt.toDate().toLocaleDateString("fr-FR")]})]})]}),r.jsxs("div",{className:"sequence-tabs",role:"tablist",children:[r.jsxs("button",{role:"tab",className:`sequence-tab${g==="seances"?" sequence-tab--active":""}`,onClick:()=>_("seances"),"aria-selected":g==="seances",children:[" Sances (",a.seances.length,")"]}),r.jsxs("button",{role:"tab",className:`sequence-tab${g==="evaluations"?" sequence-tab--active":""}`,onClick:()=>_("evaluations"),"aria-selected":g==="evaluations",children:[" valuations (",a.evaluationsPrevues.length,")"]}),r.jsx("button",{role:"tab",className:`sequence-tab${g==="infos"?" sequence-tab--active":""}`,onClick:()=>_("infos"),"aria-selected":g==="infos",children:" Dtails"})]}),g==="seances"&&r.jsx("div",{role:"tabpanel",children:a.seances.length===0?r.jsxs("div",{className:"sequences-empty",children:[r.jsx("span",{className:"sequences-empty__icon",children:""}),r.jsx("p",{className:"sequences-empty__text",children:"Aucune sance planifie"}),r.jsx("button",{className:"btn-primary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Ajouter des sances"})]}):r.jsx("div",{className:"sequence-timeline",children:a.seances.map(O=>r.jsx(tZ,{seance:O},O.id))})}),g==="evaluations"&&r.jsxs("div",{role:"tabpanel",className:"evaluations-panel",children:[r.jsx("h3",{className:"evaluations-panel__title",children:" valuations prvues"}),a.evaluationsPrevues.length===0?r.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:'Aucune valuation marque dans cette squence. Modifiez une sance et cochez "Cette sance est une valuation".'}):a.evaluationsPrevues.map(O=>r.jsxs("div",{className:"evaluation-row",children:[r.jsxs("div",{className:"evaluation-row__numero",children:["S",O.seanceNumero]}),r.jsxs("div",{className:"evaluation-row__info",children:[r.jsx("div",{className:"evaluation-row__titre",children:O.titre}),r.jsxs("div",{className:"evaluation-row__type",children:[n0[O.type],O.datePrevue&&`  ${O.datePrevue.toDate().toLocaleDateString("fr-FR")}`]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"evaluation-row__note",children:["/",O.noteMax]}),r.jsxs("div",{className:"evaluation-row__coeff",children:["Coeff. ",O.coefficient]})]})]},O.id))]}),g==="infos"&&r.jsx("div",{role:"tabpanel",children:r.jsxs("div",{className:"editor-section",children:[a.competences.length>0&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:8},children:"Comptences vises"}),r.jsx("div",{className:"competences-list",children:a.competences.map((O,T)=>r.jsx("span",{className:"competence-tag",children:O},T))})]}),a.prerequis&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Prrequis"}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.prerequis})]}),a.description&&r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Description"}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.description})]}),r.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:12,fontSize:"0.8rem",color:"#94a3b8"},children:[r.jsxs("p",{children:["Cre le ",a.createdAt.toDate().toLocaleDateString("fr-FR")]}),r.jsxs("p",{children:["Modifie le ",a.updatedAt.toDate().toLocaleDateString("fr-FR")]}),a.genereeParIA&&r.jsx("p",{children:" Gnre avec l'IA Claude"})]})]})})]})},tZ=({seance:e})=>{const[t,n]=y.useState(!1),a=(e.entreesCahierIds?.length??0)>0;return r.jsx("div",{className:`timeline-item${e.estEvaluation?" timeline-item--eval":""}`,children:r.jsxs("div",{className:"timeline-card",children:[r.jsxs("div",{className:"timeline-card__header",onClick:()=>n(l=>!l),style:{cursor:"pointer"},children:[r.jsxs("h3",{className:"timeline-card__title",children:[e.numero,". ",e.titre||`Sance ${e.numero}`]}),r.jsxs("div",{className:"timeline-card__meta",children:[r.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:em[e.typeActivite]}),r.jsxs("span",{className:"timeline-card__duree",children:[e.dureeMinutes,"min"]}),a&&r.jsx("span",{className:"export-seance-row__exported",children:" Exporte"}),r.jsx("span",{style:{color:"#94a3b8",fontSize:"0.7rem"},children:t?"":""})]})]}),e.objectifSpecifique&&r.jsxs("p",{className:"timeline-card__objectif",children:[" ",e.objectifSpecifique]}),t&&r.jsxs(r.Fragment,{children:[e.contenu&&r.jsx("p",{className:"timeline-card__contenu",style:{marginTop:8},children:e.contenu}),e.ressources.length>0&&r.jsx("div",{className:"timeline-card__ressources",children:e.ressources.map((l,o)=>r.jsx("span",{className:"ressource-chip",children:l},o))}),e.estEvaluation&&e.typeEvaluation&&r.jsxs("div",{style:{marginTop:10,padding:"8px 12px",background:"#fef2f2",borderRadius:6,fontSize:"0.8rem",color:"#dc2626"},children:[" ",n0[e.typeEvaluation],e.noteMax&&`  /${e.noteMax}`,e.coefficient&&`  Coeff. ${e.coefficient}`]})]})]})})},rZ=50*1024*1024,nZ="image/jpeg,image/png,image/gif,image/webp,audio/mpeg,audio/wav,audio/ogg,video/mp4";function aZ(e){return e.startsWith("image/")?"image":e.startsWith("audio/")?"audio":e.startsWith("video/")?"video":"autre"}function ET(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/1024/1024).toFixed(1)} Mo`}const iZ=({src:e,alt:t,onFermer:n})=>r.jsx("div",{className:"image-fullscreen-overlay",onClick:n,role:"dialog","aria-modal":"true","aria-label":"Image en plein cran",children:r.jsx("img",{src:e,alt:t})}),sZ=({pj:e,onSupprimer:t,readonly:n=!1})=>{const[a,l]=y.useState(!1);return r.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",marginBottom:10,background:"#fff"},children:[e.type==="image"&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:e.url,alt:e.nom,className:"media-image",onClick:()=>l(!0),style:{maxWidth:"100%",display:"block"},loading:"lazy"}),a&&r.jsx(iZ,{src:e.url,alt:e.nom,onFermer:()=>l(!1)})]}),e.type==="audio"&&r.jsx("div",{className:"media-player",children:r.jsxs("audio",{controls:!0,preload:"metadata",children:[r.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture audio."]})}),e.type==="video"&&r.jsx("div",{className:"media-player",children:r.jsxs("video",{controls:!0,preload:"none",playsInline:!0,children:[r.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture vido."]})}),(e.type==="pdf"||e.type==="autre")&&r.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",textDecoration:"none",color:"#2563eb"},children:[" ",e.nom]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 12px",background:"#f9fafb",borderTop:"1px solid #f3f4f6"},children:[r.jsxs("span",{style:{fontSize:"0.78rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.nom,e.taille&&`  ${ET(e.taille)}`]}),!n&&t&&r.jsx("button",{type:"button",onClick:()=>t(e.id),title:"Supprimer ce fichier",style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"1rem",padding:"0 4px"},"aria-label":`Supprimer ${e.nom}`,children:""})]})]})},lZ=({piecesJointes:e,entreeId:t,profId:n,onChange:a,readonly:l=!1})=>{const o=y.useRef(null),[u,d]=y.useState(null),[m,p]=y.useState("");async function h(b){const g=b.target.files?.[0];if(!g)return;if(g.size>rZ){p(`Fichier trop volumineux (max 50 Mo). Ce fichier fait ${ET(g.size)}.`);return}p("");const _=`${Date.now()}_${g.name}`,j=`cahiers/${n}/${t}/${_}`,S=Br(Ur,j),w=D2(S,g);w.on("state_changed",E=>{const C=Math.round(E.bytesTransferred/E.totalBytes*100);d(C)},E=>{p(`Erreur d'envoi : ${E.message}`),d(null)},async()=>{const E=await Ta(w.snapshot.ref),C=aZ(g.type),A={id:String(Date.now()),nom:g.name,url:E,type:C,taille:g.size,mimeType:g.type};a([...e,A]),d(null),o.current&&(o.current.value="")})}function v(b){a(e.filter(g=>g.id!==b))}return r.jsxs("section",{"aria-label":"Fichiers mdias",style:{marginTop:20},children:[r.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 12px"},children:" Fichiers mdias"}),e.map(b=>r.jsx(sZ,{pj:b,onSupprimer:v,readonly:l},b.id)),e.length===0&&!l&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun fichier ajout. Formats accepts : images, audio, vido (max 50 Mo)."}),!l&&r.jsxs(r.Fragment,{children:[u!==null&&r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:9999,overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${u}%`,background:"#2563eb",transition:"width 0.3s ease"},role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100})}),r.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:"4px 0 0"},children:["Envoi en cours ",u,"%"]})]}),m&&r.jsxs("p",{style:{fontSize:"0.8rem",color:"#dc2626",margin:"0 0 8px"},children:[" ",m]}),r.jsx("input",{ref:o,type:"file",accept:nZ,onChange:h,style:{display:"none"},"aria-label":"Choisir un fichier mdia"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o.current?.click(),disabled:u!==null,children:" Ajouter un fichier (image / audio / vido)"}),r.jsx("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:6},children:"Max 50 Mo  JPG, PNG, GIF, WebP, MP3, WAV, OGG, MP4"})]})]})};function oZ(e){return e.toDate().toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}const cZ=()=>{const{cahierId:e}=Ha(),t=yt(),[n,a]=y.useState(null),[l,o]=y.useState([]),[u,d]=y.useState(!0),[m,p]=y.useState(""),[h,v]=y.useState(null);y.useEffect(()=>{async function g(){if(e){d(!0);try{const _=await JX(e);if(!_){p("Ce cahier n'est pas accessible ou n'existe pas.");return}a(_);const j=await iW(e);o(j)}catch{p("Une erreur est survenue lors du chargement.")}finally{d(!1)}}}g()},[e]);function b(g){v(_=>_===g?null:g)}return u?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"2rem"},children:""}),r.jsx("p",{children:"Chargement du cahier de textes"})]}):m||!n?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[r.jsx("div",{style:{fontSize:"2.5rem"},children:""}),r.jsx("p",{style:{color:"#dc2626",fontWeight:600},children:m||"Accs non autoris"}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>t(-1),style:{marginTop:12},children:" Retour"})]}):r.jsxs("main",{style:{maxWidth:760,margin:"0 auto",padding:"20px 16px"},children:[r.jsxs("header",{className:"eleve-cahier-header",children:[r.jsx("button",{type:"button",onClick:()=>t(-1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff",cursor:"pointer",borderRadius:8,padding:"4px 10px",fontSize:"0.85rem",marginBottom:10,display:"inline-flex",alignItems:"center",gap:4},children:" Retour"}),r.jsx("h1",{children:n.titre}),r.jsxs("p",{children:[n.matiere,"  ",n.classe,"  ",n.anneeScolaire]}),r.jsx("span",{className:"badge-lecture-seule",children:" Lecture seule  Sances ralises"})]}),n.description&&r.jsx("div",{style:{background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:10,padding:14,marginBottom:20,fontSize:"0.9rem",color:"#0c4a6e"},children:n.description}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:16},children:l.length===0?"Aucune sance ralise pour l'instant.":`${l.length} sance${l.length>1?"s":""} ralise${l.length>1?"s":""}`}),l.length===0&&r.jsxs("div",{className:"eleve-vide",children:[r.jsx("span",{className:"emoji",children:""}),r.jsx("p",{children:"Votre professeur n'a pas encore enregistr de sance ralise."}),r.jsx("p",{style:{fontSize:"0.8rem"},children:"Revenez plus tard !"})]}),l.map(g=>{const _=h===g.id,j=(g.piecesJointes?.length??0)>0,S=(g.liens?.length??0)>0,w=(g.ebooksLies?.length??0)>0;return r.jsxs("article",{className:"seance-card-eleve",children:[r.jsxs("button",{type:"button",onClick:()=>b(g.id),style:{width:"100%",background:"none",border:"none",cursor:"pointer",textAlign:"left",padding:0},"aria-expanded":_,"aria-controls":`seance-corps-${g.id}`,children:[r.jsxs("div",{className:"seance-card-eleve-date",children:[" ",oZ(g.date),g.heureDebut?`  ${g.heureDebut}${g.heureFin?`  ${g.heureFin}`:""}`:""]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0},children:g.chapitre}),r.jsx("span",{style:{fontSize:"1.1rem",transition:"transform 0.2s",transform:_?"rotate(180deg)":"rotate(0)",display:"inline-block"},"aria-hidden":"true",children:""})]}),r.jsxs("div",{style:{display:"flex",gap:6,marginTop:6,flexWrap:"wrap"},children:[S&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#eff6ff",color:"#2563eb",padding:"2px 8px",borderRadius:9999},children:" Ressources"}),w&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:9999},children:" Ebooks"}),j&&r.jsx("span",{style:{fontSize:"0.72rem",background:"#f0fdf4",color:"#16a34a",padding:"2px 8px",borderRadius:9999},children:" Mdias"})]})]}),_&&r.jsxs("div",{id:`seance-corps-${g.id}`,style:{marginTop:14,borderTop:"1px solid #f3f4f6",paddingTop:14},children:[g.objectifs&&r.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8,padding:10,fontSize:"0.875rem",color:"#166534",marginBottom:12},children:[r.jsx("strong",{children:" Objectifs :"})," ",g.objectifs]}),r.jsx("div",{className:"seance-card-eleve-contenu",children:g.contenu}),S&&r.jsx(NT,{liens:g.liens??[],onChange:()=>{},readonly:!0}),w&&r.jsx(_T,{ebooksLies:g.ebooksLies??[],onChange:()=>{},readonly:!0}),j&&r.jsx(lZ,{piecesJointes:g.piecesJointes??[],entreeId:g.id,profId:"",onChange:()=>{},readonly:!0})]})]},g.id)})]})},uZ=()=>{const{currentUser:e}=lt(),t=e?.uid||"",n=e?.displayName||"Parent",[a,l]=y.useState([]),[o,u]=y.useState(null),[d,m]=y.useState(null),[p,h]=y.useState(!0),[v,b]=y.useState(!1),[g,_]=y.useState(null),[j,S]=y.useState(!1),[w,E]=y.useState(""),[C,A]=y.useState(!1),[O,T]=y.useState(null),[P,R]=y.useState(null),[I,L]=y.useState("apercu");y.useEffect(()=>{K()},[t]),y.useEffect(()=>{o&&U(o)},[o]);const K=async()=>{try{h(!0),_(null);const M=await YK(t);l(M),M.length===1&&u(M[0].enfantId)}catch(M){_("Erreur lors du chargement des enfants."),console.error(M)}finally{h(!1)}},U=async M=>{try{b(!0),_(null);const k=await XK(t,M);m(k)}catch(k){_(k.message||"Erreur lors du chargement du suivi."),m(null)}finally{b(!1)}},G=async M=>{if(M.preventDefault(),T(null),R(null),!w.trim()){T("Veuillez saisir le code d'invitation.");return}try{A(!0);const k=await VK(t,w);R(`${k.enfantNom} a t ajout avec succs !`),E(""),S(!1),await K(),u(k.enfantId)}catch(k){T(k.message||"Erreur lors de la liaison.")}finally{A(!1)}},V=async M=>{if(window.confirm(`tes-vous sr de vouloir retirer ${M.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await KK(M.id,t),o===M.enfantId&&(u(null),m(null)),await K()}catch(J){_(J.message||"Erreur lors de la suppression.")}};return p?r.jsxs("div",{className:"parent-loading",children:[r.jsx("div",{className:"parent-spinner"}),r.jsx("p",{children:"Chargement de votre espace parent..."})]}):r.jsxs("div",{className:"parent-dashboard",children:[r.jsxs("header",{className:"parent-header",children:[r.jsxs("div",{className:"parent-header-info",children:[r.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),r.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",r.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{S(!j),T(null),R(null)},children:" Ajouter un enfant"})]}),g&&r.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[r.jsxs("span",{children:[" ",g]}),r.jsx("button",{onClick:()=>_(null),children:""})]}),P&&r.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[r.jsxs("span",{children:[" ",P]}),r.jsx("button",{onClick:()=>R(null),children:""})]}),j&&r.jsxs("div",{className:"parent-form-liaison",children:[r.jsx("h3",{children:" Lier un enfant  votre compte"}),r.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),r.jsxs("form",{onSubmit:G,className:"parent-form",children:[r.jsxs("div",{className:"parent-form-group",children:[r.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),r.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:w,onChange:M=>E(M.target.value.toUpperCase()),maxLength:14,disabled:C,className:"parent-input"})]}),O&&r.jsxs("p",{className:"parent-form-erreur",children:[" ",O]}),r.jsxs("div",{className:"parent-form-actions",children:[r.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:C,children:C?"Vrification...":" Valider"}),r.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>S(!1),children:"Annuler"})]})]})]}),a.length===0?r.jsxs("div",{className:"parent-empty-state",children:[r.jsx("div",{className:"parent-empty-icon",children:""}),r.jsx("h2",{children:"Aucun enfant li"}),r.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>S(!0),children:" Ajouter mon premier enfant"})]}):r.jsxs("div",{className:"parent-content",children:[r.jsxs("aside",{className:"parent-sidebar",children:[r.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),r.jsx("ul",{className:"parent-enfants-liste",children:a.map(M=>r.jsxs("li",{className:`parent-enfant-card ${o===M.enfantId?"parent-enfant-actif":""}`,onClick:()=>u(M.enfantId),children:[r.jsx("div",{className:"parent-enfant-avatar",children:M.enfantNom.charAt(0).toUpperCase()}),r.jsxs("div",{className:"parent-enfant-info",children:[r.jsx("span",{className:"parent-enfant-nom",children:M.enfantNom}),M.enfantClasse&&r.jsx("span",{className:"parent-enfant-classe",children:M.enfantClasse})]}),r.jsx("button",{className:"parent-enfant-supprimer",onClick:k=>{k.stopPropagation(),V(M)},title:"Retirer cet enfant",children:""})]},M.id))})]}),r.jsx("main",{className:"parent-main",children:o?v?r.jsxs("div",{className:"parent-loading",children:[r.jsx("div",{className:"parent-spinner"}),r.jsx("p",{children:"Chargement du suivi..."})]}):d?r.jsxs("div",{className:"parent-dashboard-detail",children:[r.jsxs("div",{className:"parent-enfant-header",children:[r.jsxs("div",{className:"parent-enfant-header-info",children:[r.jsx("h2",{children:d.enfant.nom}),d.enfant.classe&&r.jsx("span",{className:"parent-badge",children:d.enfant.classe}),d.enfant.derniereConnexion&&r.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",ux(d.enfant.derniereConnexion)]})]}),r.jsx("p",{className:"parent-message-motivation",children:rX(d.scoreGlobal)})]}),r.jsxs("div",{className:"parent-indicateurs",children:[r.jsxs("div",{className:"parent-card parent-card-score",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Score Global"}),r.jsxs("span",{className:`parent-card-value parent-score-${d.scoreGlobal>=60?"bon":d.scoreGlobal>=40?"moyen":"bas"}`,children:[d.scoreGlobal,"/100"]})]})]}),r.jsxs("div",{className:"parent-card parent-card-streak",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Streak"}),r.jsxs("span",{className:"parent-card-value",children:[d.streak.actuel," jour",d.streak.actuel>1?"s":""]})]})]}),r.jsxs("div",{className:"parent-card parent-card-lacunes",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Lacunes"}),r.jsxs("span",{className:"parent-card-value",children:[d.lacunes.length," matire",d.lacunes.length>1?"s":""]})]})]}),r.jsxs("div",{className:"parent-card parent-card-objectifs",children:[r.jsx("div",{className:"parent-card-icon",children:""}),r.jsxs("div",{className:"parent-card-content",children:[r.jsx("span",{className:"parent-card-label",children:"Objectifs"}),r.jsxs("span",{className:"parent-card-value",children:[d.objectifs.filter(M=>M.statut==="atteint").length,"/",d.objectifs.length]})]})]})]}),r.jsxs("div",{className:"parent-section parent-section-semaine",children:[r.jsx("h3",{children:" Activit de la semaine"}),r.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((M,k)=>r.jsxs("div",{className:`parent-jour ${d.streak.semaineCourante[k]?"parent-jour-actif":"parent-jour-inactif"}`,children:[r.jsx("span",{className:"parent-jour-label",children:M}),r.jsx("span",{className:"parent-jour-icon",children:d.streak.semaineCourante[k]?"":""})]},M))})]}),r.jsxs("div",{className:"parent-onglets",children:[r.jsx("button",{className:`parent-onglet ${I==="apercu"?"parent-onglet-actif":""}`,onClick:()=>L("apercu"),children:" Aperu"}),r.jsxs("button",{className:`parent-onglet ${I==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>L("lacunes"),children:[" Lacunes (",d.lacunes.length,")"]}),r.jsxs("button",{className:`parent-onglet ${I==="alertes"?"parent-onglet-actif":""}`,onClick:()=>L("alertes"),children:[" Alertes (",d.alertes.length,")"]}),r.jsx("button",{className:`parent-onglet ${I==="resume"?"parent-onglet-actif":""}`,onClick:()=>L("resume"),children:" Rsum"})]}),r.jsxs("div",{className:"parent-onglet-contenu",children:[I==="apercu"&&r.jsxs("div",{className:"parent-tab-apercu",children:[r.jsxs("div",{className:"parent-section",children:[r.jsx("h3",{children:" Derniers quiz passs"}),d.derniersQuiz.length===0?r.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):r.jsx("div",{className:"parent-quiz-liste",children:d.derniersQuiz.map((M,k)=>r.jsxs("div",{className:`parent-quiz-item ${M.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[r.jsxs("div",{className:"parent-quiz-info",children:[r.jsx("span",{className:"parent-quiz-discipline",children:M.disciplineNom}),r.jsx("span",{className:"parent-quiz-titre",children:M.quizTitre})]}),r.jsxs("div",{className:"parent-quiz-score",children:[r.jsxs("span",{className:`parent-quiz-note ${M.reussi?"note-ok":"note-ko"}`,children:[M.noteSur20,"/20"]}),r.jsx("span",{className:"parent-quiz-statut",children:M.reussi?" Russi":" chou"})]}),r.jsx("span",{className:"parent-quiz-date",children:ux(M.datePassage)})]},k))})]}),r.jsxs("div",{className:"parent-section",children:[r.jsx("h3",{children:" Objectifs de la semaine"}),d.objectifs.length===0?r.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):r.jsx("div",{className:"parent-objectifs-liste",children:d.objectifs.map((M,k)=>r.jsxs("div",{className:"parent-objectif-item",children:[r.jsxs("div",{className:"parent-objectif-header",children:[r.jsx("span",{className:"parent-objectif-titre",children:M.titre}),r.jsx("span",{className:`parent-objectif-statut parent-statut-${M.statut}`,children:M.statut==="atteint"?" Atteint":M.statut==="en_cours"?" En cours":M.statut==="echoue"?" chou":" Non commenc"})]}),r.jsx("div",{className:"parent-progress-bar",children:r.jsx("div",{className:`parent-progress-fill parent-progress-${M.statut}`,style:{width:`${Math.min(M.progression/M.cible*100,100)}%`}})}),r.jsxs("span",{className:"parent-objectif-detail",children:[M.progression,"/",M.cible]})]},k))})]})]}),I==="lacunes"&&r.jsx("div",{className:"parent-tab-lacunes",children:d.lacunes.length===0?r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):r.jsx("div",{className:"parent-lacunes-liste",children:d.lacunes.map((M,k)=>r.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:Zf(M.niveauUrgence)},children:[r.jsxs("div",{className:"parent-lacune-header",children:[r.jsx("span",{className:"parent-lacune-discipline",children:M.disciplineNom}),r.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:Zf(M.niveauUrgence),color:"#fff"},children:iT(M.niveauUrgence)})]}),r.jsxs("div",{className:"parent-lacune-details",children:[r.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",r.jsxs("strong",{children:[M.moyenne,"/20"]})]}),r.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",sT(M.tendance)," ",M.tendance==="hausse"?"En hausse":M.tendance==="baisse"?"En baisse":"Stable"]})]}),r.jsx("p",{className:"parent-lacune-conseil",children:M.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":M.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},k))})}),I==="alertes"&&r.jsx("div",{className:"parent-tab-alertes",children:d.alertes.length===0?r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):r.jsx("div",{className:"parent-alertes-liste",children:d.alertes.map((M,k)=>r.jsxs("div",{className:`parent-alerte-item parent-alerte-${M.niveau}`,children:[r.jsxs("div",{className:"parent-alerte-header",children:[r.jsx("span",{className:"parent-alerte-titre",children:M.titre}),r.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:eX(M.niveau),color:"#fff"},children:tX(M.type)})]}),r.jsx("p",{className:"parent-alerte-message",children:M.message}),r.jsx("span",{className:"parent-alerte-date",children:ux(M.dateCreation)})]},k))})}),I==="resume"&&d.resume&&r.jsxs("div",{className:"parent-tab-resume",children:[r.jsxs("div",{className:"parent-resume-header",children:[r.jsxs("h3",{children:[" Rsum : ",d.resume.semaine]}),r.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",d.resume.scoreGlobal,"/100"," ",v2(d.resume.evolutionScore)]})]}),r.jsxs("div",{className:"parent-resume-stats",children:[r.jsxs("div",{className:"parent-resume-stat",children:[r.jsx("span",{className:"parent-resume-stat-value",children:d.resume.nombreQuizSemaine}),r.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.joursActifsSemaine,"/7"]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.tempsEstimeMinutes," min"]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),r.jsxs("div",{className:"parent-resume-stat",children:[r.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.objectifsAtteints,"/",d.resume.objectifsTotal]}),r.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),d.resume.evolutionDisciplines.length>0&&r.jsxs("div",{className:"parent-section",children:[r.jsx("h4",{children:" volution par matire"}),r.jsx("div",{className:"parent-evolution-liste",children:d.resume.evolutionDisciplines.map((M,k)=>r.jsxs("div",{className:"parent-evolution-item",children:[r.jsx("span",{className:"parent-evolution-discipline",children:M.disciplineNom}),r.jsxs("div",{className:"parent-evolution-scores",children:[r.jsxs("span",{className:"parent-evolution-prec",children:[M.moyenneSemainePrecedente,"/20"]}),r.jsx("span",{className:"parent-evolution-fleche",children:v2(M.evolution)}),r.jsxs("span",{className:"parent-evolution-courante",children:[M.moyenneSemaineCourante,"/20"]}),r.jsxs("span",{className:`parent-evolution-ecart ${M.ecart>0?"ecart-positif":M.ecart<0?"ecart-negatif":""}`,children:["(",M.ecart>0?"+":"",M.ecart,")"]})]})]},k))})]}),d.resume.disciplinesEnDifficulte.length>0&&r.jsxs("div",{className:"parent-section parent-section-warning",children:[r.jsx("h4",{children:" Matires ncessitant une attention"}),r.jsx("ul",{className:"parent-disciplines-difficulte",children:d.resume.disciplinesEnDifficulte.map((M,k)=>r.jsx("li",{children:M},k))})]})]}),I==="resume"&&!d.resume&&r.jsxs("div",{className:"parent-vide-section",children:[r.jsx("span",{className:"parent-vide-icon",children:""}),r.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):r.jsxs("div",{className:"parent-erreur-dashboard",children:[r.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),r.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&U(o),children:" Ressayer"})]}):r.jsx("div",{className:"parent-select-enfant",children:r.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},dZ="https://api.pedaclic.sn",Pl={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},fZ={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},Gd={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function mZ(e){try{const t=await fetch(`${dZ}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.error||`Erreur serveur (${t.status})`)}const n=await t.json();if(!n.success)throw new Error(n.error||"La gnration a chou.");return n}catch(t){throw console.error("[aiGeneratorService] Erreur gnration:",t),t instanceof TypeError&&t.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):t}}async function pZ(e,t,n,a){try{const l=await Lt(be(ie,"generated_content"),{userId:e,type:t.type,discipline:t.discipline,disciplineId:a,classe:t.classe,chapitre:t.chapitre,content:n,options:t.options||null,createdAt:Le.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",l.id),l.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",l),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function hZ(e,t,n,a){try{const l=n.map((d,m)=>({id:`q_${Date.now()}_${m}`,question:d.question,options:d.options,reponseCorrecte:d.reponseCorrecte,explication:d.explication||"",difficulte:d.difficulte||"moyen",points:d.points||2})),o={disciplineId:a,titre:`Quiz IA  ${t.chapitre}`,description:`Quiz auto-gnr pour ${t.discipline} (${t.classe})  Chapitre : ${t.chapitre}`,questions:l,duree:15,isPremium:!0,noteMinimale:10,auteurId:e,source:"ia_generator",createdAt:Le.now()},u=await Lt(be(ie,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",u.id),u.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",l),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function vZ(e,t=20){try{const n=Re(be(ie,"generated_content"),Ce("userId","==",e),Je("createdAt","desc")),a=await De(n),l=[];return a.forEach(o=>{l.length<t&&l.push({id:o.id,...o.data()})}),l}catch(n){throw console.error("[aiGeneratorService] Erreur chargement historique:",n),new Error("Erreur lors du chargement de l'historique.")}}async function gZ(e){try{await Cn(je(ie,"generated_content",e)),console.log("[aiGeneratorService] Contenu supprim:",e)}catch(t){throw console.error("[aiGeneratorService] Erreur suppression:",t),new Error("Erreur lors de la suppression du contenu.")}}const xZ=["6me","5me","4me","3me","2nde","1re","Terminale"],yZ=[30,45,60,90,120],bZ=()=>{const{currentUser:e}=lt(),[t,n]=y.useState(1),[a,l]=y.useState([]),[o,u]=y.useState(null),[d,m]=y.useState(""),[p,h]=y.useState(""),[v,b]=y.useState(""),[g,_]=y.useState(null),[j,S]=y.useState({}),[w,E]=y.useState(!1),[C,A]=y.useState(null),[O,T]=y.useState(null),[P,R]=y.useState(!1),[I,L]=y.useState(!1),[K,U]=y.useState(null),[G,V]=y.useState(!1),[M,k]=y.useState([]),[J,Q]=y.useState(!1),[B,q]=y.useState(!0),fe=y.useMemo(()=>{const X=new Map;return a.forEach(ye=>{X.has(ye.nom)||X.set(ye.nom,ye)}),Array.from(X.values())},[a]);y.useEffect(()=>{(async()=>{try{q(!0);const ye=Re(be(ie,"disciplines"),Je("nom")),Ie=await De(ye),$e=[];Ie.forEach(Ve=>{const Yt=Ve.data();Yt.nom&&Yt.nom.trim()&&$e.push({id:Ve.id,nom:Yt.nom||"",classe:Yt.classe||"",niveau:Yt.niveau||""})}),l($e)}catch(ye){console.error("[AIGenerator] Erreur chargement disciplines:",ye),T("Impossible de charger les disciplines.")}finally{q(!1)}})()},[]);const te=X=>{u(X),T(null)},ue=()=>{const X=[];if(o||X.push("discipline"),d||X.push("classe"),(!p||p<1)&&X.push("dure de la leon"),X.length>0){T(`Champs requis manquants : ${X.join(", ")}`);return}n(2),T(null)},he=()=>{if(!v.trim()){T("Veuillez saisir le titre du chapitre.");return}n(3),T(null)},xe=X=>{_(X),n(4),T(null)},H=()=>{t>1&&(n(X=>X-1),T(null),t===5&&(A(null),L(!1),U(null)))},pe=()=>{n(1),u(null),m(""),h(""),b(""),_(null),S({}),A(null),T(null),L(!1),U(null)},Ee=async()=>{if(!o||!g||!v.trim()||!d){T("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}E(!0),T(null);try{const X={...j,duree:typeof p=="number"?p:void 0},ye={type:g,discipline:o.nom,classe:d,chapitre:v.trim(),options:Object.keys(X).length>0?X:void 0},Ie=await mZ(ye);A(Ie),n(5)}catch(X){const ye=X instanceof Error?X.message:"Erreur inconnue";T(ye)}finally{E(!1)}},le=async()=>{if(!(!e||!C||!o||!g)){R(!0),T(null);try{let X;const Ie=a.find(Ve=>Ve.nom===o.nom&&Ve.classe===d)?.id||o.id,$e={type:g,discipline:o.nom,classe:d,chapitre:v.trim(),options:{...j,duree:typeof p=="number"?p:void 0}};C.type==="quiz"&&C.data.questions?X=await hZ(e.uid,$e,C.data.questions,Ie):X=await pZ(e.uid,$e,C.data.content||"",Ie),U(X),L(!0)}catch(X){const ye=X instanceof Error?X.message:"Erreur de sauvegarde";T(ye)}finally{R(!1)}}},W=async()=>{if(e){Q(!0);try{const X=await vZ(e.uid);k(X),V(!0)}catch(X){console.error("[AIGenerator] Erreur historique:",X)}finally{Q(!1)}}},F=async X=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await gZ(X),k(ye=>ye.filter(Ie=>Ie.id!==X))}catch(ye){console.error("[AIGenerator] Erreur suppression:",ye)}},oe=y.useCallback(X=>{if(!X)return"";let ye=X.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return ye=ye.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,Ie=>"<ul>"+Ie.replace(/<br \/>/g,"")+"</ul>"),`<p>${ye}</p>`},[]);return e?e.isPremium?r.jsxs("div",{className:"ai-generator",children:[r.jsxs("div",{className:"ai-generator__header",children:[r.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),r.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),r.jsxs("div",{className:"ai-generator__header-actions",children:[r.jsx("button",{className:"btn btn--outline btn--sm",onClick:W,disabled:J,children:J?" Chargement...":" Historique"}),t>1&&r.jsx("button",{className:"btn btn--outline btn--sm",onClick:pe,children:" Recommencer"})]})]}),r.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(X=>r.jsxs("div",{className:`ai-generator__step-indicator ${X===t?"ai-generator__step-indicator--active":""} ${X<t?"ai-generator__step-indicator--done":""}`,children:[r.jsx("span",{className:"ai-generator__step-number",children:X<t?"":X}),r.jsxs("span",{className:"ai-generator__step-label",children:[X===1&&"Paramtres",X===2&&"Chapitre",X===3&&"Type",X===4&&"Options",X===5&&"Rsultat"]})]},X))}),O&&r.jsxs("div",{className:"ai-generator__error",children:[r.jsx("span",{className:"ai-generator__error-icon",children:""}),O,r.jsx("button",{className:"ai-generator__error-close",onClick:()=>T(null),children:""})]}),r.jsxs("div",{className:"ai-generator__content",children:[t===1&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{className:"ai-generator__label",children:["Discipline ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),B?r.jsxs("div",{className:"ai-generator__loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Chargement des disciplines..."})]}):fe.length===0?r.jsx("div",{className:"ai-generator__empty",children:r.jsx("p",{children:"Aucune discipline disponible."})}):r.jsx("div",{className:"ai-generator__discipline-grid",children:fe.map(X=>r.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===X.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>te(X),children:r.jsx("span",{className:"ai-generator__discipline-name",children:X.nom})},X.id))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{className:"ai-generator__label",children:["Classe ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),r.jsx("div",{className:"ai-generator__classe-grid",children:xZ.map(X=>r.jsx("button",{className:`ai-generator__classe-btn ${d===X?"ai-generator__classe-btn--selected":""}`,onClick:()=>{m(X),T(null)},children:X},X))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",r.jsx("span",{className:"ai-generator__required",children:"*"})]}),r.jsxs("div",{className:"ai-generator__duree-group",children:[r.jsx("div",{className:"ai-generator__duree-presets",children:yZ.map(X=>r.jsxs("button",{className:`ai-generator__duree-btn ${p===X?"ai-generator__duree-btn--selected":""}`,onClick:()=>{h(X),T(null)},children:[X," min"]},X))}),r.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:p,onChange:X=>{const ye=parseInt(X.target.value);h(isNaN(ye)?"":ye),T(null)},placeholder:"Autre dure..."})]})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("div",{})," ",r.jsx("button",{className:"btn btn--primary",onClick:ue,disabled:!o||!d||!p,children:"Continuer "})]})]}),t===2&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),r.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:v,onChange:X=>b(X.target.value),onKeyDown:X=>X.key==="Enter"&&he(),autoFocus:!0})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("button",{className:"btn btn--outline",onClick:H,children:" Retour"}),r.jsx("button",{className:"btn btn--primary",onClick:he,disabled:!v.trim(),children:"Continuer "})]})]}),t===3&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v})]}),r.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(Pl).map(X=>r.jsxs("button",{className:"ai-generator__type-card",onClick:()=>xe(X),children:[r.jsx("span",{className:"ai-generator__type-icon",children:Gd[X]}),r.jsx("span",{className:"ai-generator__type-name",children:Pl[X]}),r.jsx("span",{className:"ai-generator__type-desc",children:fZ[X]})]},X))}),r.jsx("div",{className:"ai-generator__nav",children:r.jsx("button",{className:"btn btn--outline",onClick:H,children:" Retour"})})]}),t===4&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),r.jsxs("div",{className:"ai-generator__recap",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v}),r.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[g&&Gd[g]," ",g&&Pl[g]]})]}),r.jsxs("div",{className:"ai-generator__options",children:[r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),r.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(X=>r.jsxs("label",{className:"ai-generator__radio",children:[r.jsx("input",{type:"radio",name:"difficulte",value:X,checked:j.difficulte===X,onChange:()=>S(ye=>({...ye,difficulte:X}))}),r.jsxs("span",{className:"ai-generator__radio-label",children:[X==="facile"&&" Facile",X==="moyen"&&" Moyen",X==="difficile"&&" Difficile"]})]},X))})]}),g==="sujet_examen"&&r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),r.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(X=>r.jsxs("label",{className:"ai-generator__radio",children:[r.jsx("input",{type:"radio",name:"typeExamen",value:X,checked:j.typeExamen===X,onChange:()=>S(ye=>({...ye,typeExamen:X}))}),r.jsx("span",{className:"ai-generator__radio-label",children:X})]},X))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),r.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:j.objectifs||"",onChange:X=>S(ye=>({...ye,objectifs:X.target.value||void 0}))})]}),r.jsxs("div",{className:"ai-generator__field",children:[r.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),r.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:j.consignesSpeciales||"",onChange:X=>S(ye=>({...ye,consignesSpeciales:X.target.value||void 0}))})]})]}),r.jsxs("div",{className:"ai-generator__nav",children:[r.jsx("button",{className:"btn btn--outline",onClick:H,children:" Retour"}),r.jsx("button",{className:"btn btn--primary btn--lg",onClick:Ee,disabled:w,children:w?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),w&&r.jsxs("div",{className:"ai-generator__generating",children:[r.jsxs("div",{className:"ai-generator__generating-animation",children:[r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""})]}),r.jsxs("p",{children:["L'IA rdige votre"," ",g&&Pl[g].toLowerCase(),"..."]}),r.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),t===5&&C&&r.jsxs("div",{className:"ai-generator__step-content",children:[r.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),r.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[r.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[g&&Gd[g]," ",g&&Pl[g]]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),r.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),r.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),r.jsx("span",{className:"ai-generator__recap-value",children:d}),r.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),r.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),r.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),r.jsx("span",{className:"ai-generator__recap-value",children:v})]}),r.jsxs("div",{className:"ai-generator__preview",children:[r.jsxs("div",{className:"ai-generator__preview-header",children:[r.jsx("h3",{children:"Prvisualisation"}),r.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const X=C.type==="quiz"?JSON.stringify(C.data.questions,null,2):C.data.content||"";navigator.clipboard.writeText(X),alert("Contenu copi dans le presse-papier !")},children:" Copier"})]}),r.jsx("div",{className:"ai-generator__preview-body",children:C.type==="quiz"&&C.data.questions?r.jsxs("div",{className:"ai-generator__quiz-preview",children:[r.jsxs("p",{className:"ai-generator__quiz-count",children:[C.data.questions.length," questions gnres"]}),C.data.questions.map((X,ye)=>r.jsxs("div",{className:"ai-generator__quiz-item",children:[r.jsxs("div",{className:"ai-generator__quiz-question",children:[r.jsxs("strong",{children:["Q",ye+1,"."]})," ",X.question,r.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${X.difficulte}`,children:X.difficulte})]}),r.jsx("div",{className:"ai-generator__quiz-options",children:X.options.map((Ie,$e)=>r.jsxs("div",{className:`ai-generator__quiz-option ${$e===X.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[r.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+$e)}),Ie,$e===X.reponseCorrecte&&" "]},$e))}),X.explication&&r.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",X.explication]})]},ye))]}):r.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:oe(C.data.content||"")}})})]}),r.jsxs("div",{className:"ai-generator__actions",children:[I?r.jsxs("div",{className:"ai-generator__save-success",children:[r.jsx("span",{children:" Sauvegard avec succs !"}),C.type==="quiz"&&K&&r.jsx(qe,{to:`/quiz/${K}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):r.jsx("button",{className:"btn btn--primary btn--lg",onClick:le,disabled:P,children:P?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):r.jsx(r.Fragment,{children:" Sauvegarder dans PedaClic"})}),r.jsx("button",{className:"btn btn--outline",onClick:pe,children:" Nouvelle gnration"})]})]})]}),G&&r.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>V(!1),children:r.jsxs("div",{className:"ai-generator__modal",onClick:X=>X.stopPropagation(),children:[r.jsxs("div",{className:"ai-generator__modal-header",children:[r.jsx("h2",{children:" Historique des gnrations"}),r.jsx("button",{className:"ai-generator__modal-close",onClick:()=>V(!1),children:""})]}),r.jsx("div",{className:"ai-generator__modal-body",children:M.length===0?r.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):r.jsx("div",{className:"ai-generator__history-list",children:M.map(X=>r.jsxs("div",{className:"ai-generator__history-item",children:[r.jsxs("div",{className:"ai-generator__history-info",children:[r.jsxs("span",{className:"ai-generator__history-type",children:[Gd[X.type]," ",Pl[X.type]]}),r.jsxs("span",{className:"ai-generator__history-details",children:[X.discipline," (",X.classe,")  ",X.chapitre]}),r.jsx("span",{className:"ai-generator__history-date",children:X.createdAt?.toDate?X.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),r.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>X.id&&F(X.id),title:"Supprimer",children:""})]},X.id))})})]})})]}):r.jsx("div",{className:"ai-generator",children:r.jsxs("div",{className:"ai-generator__gate",children:[r.jsx("div",{className:"ai-generator__gate-icon",children:""}),r.jsx("h2",{children:"Fonctionnalit Premium"}),r.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),r.jsxs("div",{className:"ai-generator__gate-price",children:[r.jsx("span",{className:"price",children:"2 000 FCFA"}),r.jsx("span",{className:"period",children:"/mois"})]}),r.jsx(qe,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):r.jsx("div",{className:"ai-generator",children:r.jsxs("div",{className:"ai-generator__gate",children:[r.jsx("div",{className:"ai-generator__gate-icon",children:""}),r.jsx("h2",{children:"Connexion requise"}),r.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),r.jsx(qe,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},Ri={manuel:"Manuels scolaires",annale:"Annales corriges",guide:"Guides de rvision",litterature:"Culture gnrale & Littrature",fiche:"Fiches de lectures"},Ii={manuel:"",annale:"",guide:"",litterature:"",fiche:""},ti="ebooks";async function jZ(){try{const e=Re(be(ie,ti),Ce("isActive","==",!0),Je("ordre","asc"));return(await De(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks:",e),e}}async function NZ(){try{const e=Re(be(ie,ti),Je("ordre","asc"));return(await De(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks admin:",e),e}}async function _Z(e){try{const t=await It(je(ie,ti,e));return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||null}:null}catch(t){throw console.error(" Erreur rcupration ebook:",t),t}}function SZ(e,t){let n=[...e];if(t.categorie&&t.categorie!=="all"&&(n=n.filter(a=>a.categorie===t.categorie)),t.niveau&&t.niveau!=="all"&&(n=n.filter(a=>a.niveau===t.niveau)),t.classe&&t.classe!=="all"&&(n=n.filter(a=>a.classe===t.classe||a.classe==="all")),t.matiere&&(n=n.filter(a=>a.matiere?.toLowerCase().includes(t.matiere.toLowerCase()))),t.recherche){const a=t.recherche.toLowerCase();n=n.filter(l=>l.titre.toLowerCase().includes(a)||l.auteur.toLowerCase().includes(a)||l.description.toLowerCase().includes(a)||l.tags?.some(o=>o.toLowerCase().includes(a)))}return n}async function wZ(e,t,n,a,l){try{const o=Br(Ur,`ebooks/pdf/${Date.now()}_${t.name}`);await bs(o,t);const u=await Ta(o);let d="";if(n){const v=Br(Ur,`ebooks/covers/${Date.now()}_${n.name}`);await bs(v,n),d=await Ta(v)}let m="";if(a){const v=Br(Ur,`ebooks/previews/${Date.now()}_${a.name}`);await bs(v,a),m=await Ta(v)}const p={...e,fichierURL:u,couvertureURL:d,aperuURL:m,tailleFichier:t.size,nombreTelechargements:0,nombreVues:0,uploadedBy:l||"admin",createdAt:mt(),updatedAt:mt()},h=await Lt(be(ie,ti),p);return console.log(` Ebook ajout : ${e.titre} (ID: ${h.id})`),h.id}catch(o){throw console.error(" Erreur ajout ebook:",o),o}}async function CZ(e,t,n,a,l){try{const o={...t,updatedAt:mt()};if(n){const u=Br(Ur,`ebooks/pdf/${Date.now()}_${n.name}`);await bs(u,n),o.fichierURL=await Ta(u),o.tailleFichier=n.size}if(a){const u=Br(Ur,`ebooks/covers/${Date.now()}_${a.name}`);await bs(u,a),o.couvertureURL=await Ta(u)}if(l){const u=Br(Ur,`ebooks/previews/${Date.now()}_${l.name}`);await bs(u,l),o.aperuURL=await Ta(u)}await Ze(je(ie,ti,e),o),console.log(` Ebook mis  jour : ${e}`)}catch(o){throw console.error(" Erreur mise  jour ebook:",o),o}}async function AZ(e){try{const t=await _Z(e);if(!t)throw new Error("Ebook introuvable");try{if(t.fichierURL){const n=Br(Ur,t.fichierURL);await gc(n)}if(t.couvertureURL){const n=Br(Ur,t.couvertureURL);await gc(n)}if(t.aperuURL){const n=Br(Ur,t.aperuURL);await gc(n)}}catch{console.warn(" Fichiers Storage non supprims (peut-tre dj supprims)")}await Cn(je(ie,ti,e)),console.log(` Ebook supprim : ${e}`)}catch(t){throw console.error(" Erreur suppression ebook:",t),t}}async function EZ(e,t){try{await Ze(je(ie,ti,e),{isActive:t,updatedAt:mt()})}catch(n){throw console.error(" Erreur toggle ebook:",n),n}}async function zZ(e){try{await Ze(je(ie,ti,e),{nombreVues:im(1)})}catch(t){console.error(" Erreur incrment vues:",t)}}async function OZ(e){try{await Ze(je(ie,ti,e),{nombreTelechargements:im(1)})}catch(t){console.error(" Erreur incrment tlchargements:",t)}}function DZ(e){const t={totalEbooks:e.length,totalTelechargements:0,totalVues:0,parCategorie:{manuel:0,annale:0,guide:0,litterature:0,fiche:0},ebooksActifs:0};return e.forEach(n=>{t.totalTelechargements+=n.nombreTelechargements||0,t.totalVues+=n.nombreVues||0,t.parCategorie[n.categorie]=(t.parCategorie[n.categorie]||0)+1,n.isActive&&t.ebooksActifs++}),t}function _c(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/(1024*1024)).toFixed(1)} Mo`}const zT=["Mathmatiques","Physique-Chimie","SVT","Franais","Anglais","Histoire-Gographie","Philosophie","conomie","Comptabilit","ducation civique","Arabe","Espagnol","Informatique"],MZ=({isPremium:e,onReadEbook:t})=>{const[n,a]=y.useState([]),[l,o]=y.useState(!0),[u,d]=y.useState(null),[m,p]=y.useState({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""}),[h,v]=y.useState("grid");y.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0),d(null);const w=await jZ();a(w)}catch(w){d("Erreur lors du chargement de la bibliothque"),console.error(w)}finally{o(!1)}},g=y.useMemo(()=>SZ(n,m),[n,m]),_=y.useMemo(()=>{const w={all:n.length};return n.forEach(E=>{w[E.categorie]=(w[E.categorie]||0)+1}),w},[n]),j=(w,E)=>{p(C=>({...C,[w]:E}))},S=()=>{p({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""})};return l?r.jsx("div",{className:"ebook-library",children:r.jsxs("div",{className:"ebook-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement de la bibliothque..."})]})}):u?r.jsx("div",{className:"ebook-library",children:r.jsxs("div",{className:"ebook-error",children:[r.jsxs("p",{children:[" ",u]}),r.jsx("button",{onClick:b,className:"btn-retry",children:"Ressayer"})]})}):r.jsxs("div",{className:"ebook-library",children:[r.jsxs("div",{className:"ebook-library-header",children:[r.jsxs("div",{className:"ebook-header-content",children:[r.jsx("h1",{children:" Bibliothque PedaClic"}),r.jsxs("p",{className:"ebook-subtitle",children:["Manuels, annales, fiches de rvision et bien plus encore",!e&&r.jsx("span",{className:"preview-badge",children:"Aperu gratuit disponible"})]})]}),r.jsxs("div",{className:"ebook-search-bar",children:[r.jsx("input",{type:"text",placeholder:"Rechercher un ebook (titre, auteur, mot-cl)...",value:m.recherche||"",onChange:w=>j("recherche",w.target.value),className:"search-input"}),r.jsx("span",{className:"search-icon",children:""})]})]}),r.jsxs("div",{className:"ebook-categories",children:[r.jsxs("button",{className:`category-tab ${m.categorie==="all"?"active":""}`,onClick:()=>j("categorie","all"),children:[" Tous",r.jsx("span",{className:"category-count",children:_.all||0})]}),Object.keys(Ri).map(w=>r.jsxs("button",{className:`category-tab ${m.categorie===w?"active":""}`,onClick:()=>j("categorie",w),children:[Ii[w]," ",Ri[w],r.jsx("span",{className:"category-count",children:_[w]||0})]},w))]}),r.jsxs("div",{className:"ebook-filters",children:[r.jsxs("select",{value:m.niveau||"all",onChange:w=>j("niveau",w.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"Tous les niveaux"}),r.jsx("option",{value:"college",children:"Collge"}),r.jsx("option",{value:"lycee",children:"Lyce"})]}),r.jsxs("select",{value:m.classe||"all",onChange:w=>j("classe",w.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"Toutes les classes"}),r.jsx("option",{value:"6eme",children:"6me"}),r.jsx("option",{value:"5eme",children:"5me"}),r.jsx("option",{value:"4eme",children:"4me"}),r.jsx("option",{value:"3eme",children:"3me"}),r.jsx("option",{value:"2nde",children:"2nde"}),r.jsx("option",{value:"1ere",children:"1re"}),r.jsx("option",{value:"Terminale",children:"Terminale"})]}),r.jsxs("select",{value:m.matiere||"",onChange:w=>j("matiere",w.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Toutes les matires"}),zT.map(w=>r.jsx("option",{value:w,children:w},w))]}),r.jsxs("div",{className:"view-toggle",children:[r.jsx("button",{className:h==="grid"?"active":"",onClick:()=>v("grid"),title:"Vue grille",children:""}),r.jsx("button",{className:h==="list"?"active":"",onClick:()=>v("list"),title:"Vue liste",children:""})]}),(m.categorie!=="all"||m.niveau!=="all"||m.classe!=="all"||m.matiere||m.recherche)&&r.jsx("button",{onClick:S,className:"btn-reset-filters",children:" Rinitialiser"})]}),r.jsx("div",{className:"ebook-results-info",children:r.jsxs("span",{children:[g.length," ebook",g.length>1?"s":""," trouv",g.length>1?"s":""]})}),g.length===0?r.jsxs("div",{className:"ebook-empty",children:[r.jsx("p",{children:" Aucun ebook trouv avec ces filtres."}),r.jsx("button",{onClick:S,className:"btn-reset-filters",children:"Voir tous les ebooks"})]}):r.jsx("div",{className:`ebook-grid ${h==="list"?"list-view":""}`,children:g.map(w=>r.jsx(TZ,{ebook:w,isPremium:e,onRead:()=>t(w),viewMode:h},w.id))}),!e&&g.length>0&&r.jsx("div",{className:"ebook-premium-banner",children:r.jsxs("div",{className:"premium-banner-content",children:[r.jsx("h3",{children:" Accdez  tous les ebooks en illimit"}),r.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour lire et tlcharger tous les manuels, annales et fiches de rvision sans limite."}),r.jsx("a",{href:"/premium",className:"btn-premium",children:"S'abonner  2 000 FCFA/mois"})]})})]})},TZ=({ebook:e,isPremium:t,onRead:n,viewMode:a})=>r.jsxs("div",{className:`ebook-card ${a==="list"?"ebook-card-list":""}`,children:[r.jsxs("div",{className:"ebook-cover",onClick:n,children:[e.couvertureURL?r.jsx("img",{src:e.couvertureURL,alt:e.titre,loading:"lazy"}):r.jsxs("div",{className:"ebook-cover-placeholder",children:[r.jsx("span",{className:"cover-icon",children:Ii[e.categorie]}),r.jsx("span",{className:"cover-title",children:e.titre})]}),!t&&r.jsx("div",{className:"ebook-badge-premium",children:r.jsx("span",{children:" Premium"})}),r.jsx("div",{className:"ebook-badge-category",children:Ri[e.categorie]})]}),r.jsxs("div",{className:"ebook-info",children:[r.jsx("h3",{className:"ebook-title",onClick:n,children:e.titre}),r.jsx("p",{className:"ebook-author",children:e.auteur}),r.jsx("p",{className:"ebook-description",children:e.description}),r.jsxs("div",{className:"ebook-meta",children:[e.classe!=="all"&&r.jsx("span",{className:"meta-tag",children:e.classe}),e.matiere&&r.jsx("span",{className:"meta-tag",children:e.matiere}),r.jsxs("span",{className:"meta-pages",children:[e.nombrePages," pages"]}),r.jsx("span",{className:"meta-size",children:_c(e.tailleFichier)})]}),r.jsxs("div",{className:"ebook-actions",children:[r.jsx("button",{className:"btn-read",onClick:n,children:t?" Lire":` Aperu (${e.pagesApercu} pages)`}),t&&r.jsx("a",{href:e.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn-download",download:!0,children:" Tlcharger"})]})]})]}),kZ=({ebook:e,isPremium:t,onBack:n,onGoPremium:a})=>{const[l,o]=y.useState(!0),[u,d]=y.useState("info");y.useEffect(()=>{zZ(e.id)},[e.id]);const m=()=>t?e.fichierURL:e.aperuURL?e.aperuURL:null,p=async()=>{if(!t){a();return}await OZ(e.id),window.open(e.fichierURL,"_blank")},h=()=>{o(!1)};return r.jsxs("div",{className:"ebook-viewer",children:[r.jsxs("div",{className:"viewer-navbar",children:[r.jsx("button",{onClick:n,className:"btn-back",children:" Retour  la bibliothque"}),r.jsxs("div",{className:"viewer-title-bar",children:[r.jsxs("span",{className:"viewer-category",children:[Ii[e.categorie]," ",Ri[e.categorie]]}),r.jsx("h2",{className:"viewer-title",children:e.titre})]}),r.jsxs("div",{className:"viewer-actions-bar",children:[r.jsx("button",{className:`btn-tab ${u==="info"?"active":""}`,onClick:()=>d("info"),children:" Dtails"}),r.jsxs("button",{className:`btn-tab ${u==="read"?"active":""}`,onClick:()=>d("read"),children:[" ",t?"Lire":"Aperu"]})]})]}),u==="info"&&r.jsx("div",{className:"viewer-info-panel",children:r.jsxs("div",{className:"info-layout",children:[r.jsxs("div",{className:"info-cover-column",children:[e.couvertureURL?r.jsx("img",{src:e.couvertureURL,alt:e.titre,className:"info-cover-image"}):r.jsxs("div",{className:"info-cover-placeholder",children:[r.jsx("span",{children:Ii[e.categorie]}),r.jsx("span",{children:e.titre})]}),r.jsxs("div",{className:"info-actions",children:[r.jsxs("button",{className:"btn-action-read",onClick:()=>d("read"),children:[" ",t?"Lire le document":`Aperu (${e.pagesApercu} pages)`]}),t?r.jsx("button",{className:"btn-action-download",onClick:p,children:" Tlcharger le PDF"}):r.jsx("button",{className:"btn-action-premium",onClick:a,children:" Accs complet  Passer Premium"})]})]}),r.jsxs("div",{className:"info-details-column",children:[r.jsx("h1",{className:"info-title",children:e.titre}),r.jsxs("p",{className:"info-author",children:["par ",e.auteur]}),r.jsxs("div",{className:"info-description",children:[r.jsx("h3",{children:"Description"}),r.jsx("p",{children:e.description})]}),r.jsxs("div",{className:"info-metadata",children:[r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Catgorie"}),r.jsxs("span",{className:"metadata-value",children:[Ii[e.categorie]," ",Ri[e.categorie]]})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Niveau"}),r.jsx("span",{className:"metadata-value",children:e.niveau==="college"?"Collge":"Lyce"})]}),e.classe!=="all"&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Classe"}),r.jsx("span",{className:"metadata-value",children:e.classe})]}),e.matiere&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Matire"}),r.jsx("span",{className:"metadata-value",children:e.matiere})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Pages"}),r.jsx("span",{className:"metadata-value",children:e.nombrePages})]}),r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Taille"}),r.jsx("span",{className:"metadata-value",children:_c(e.tailleFichier)})]}),e.annee&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"Anne"}),r.jsx("span",{className:"metadata-value",children:e.annee})]}),e.editeur&&r.jsxs("div",{className:"metadata-item",children:[r.jsx("span",{className:"metadata-label",children:"diteur"}),r.jsx("span",{className:"metadata-value",children:e.editeur})]})]}),r.jsxs("div",{className:"info-stats",children:[r.jsxs("span",{children:[" ",e.nombreVues," vue",e.nombreVues>1?"s":""]}),r.jsxs("span",{children:[" ",e.nombreTelechargements," tlchargement",e.nombreTelechargements>1?"s":""]})]}),e.tags&&e.tags.length>0&&r.jsx("div",{className:"info-tags",children:e.tags.map((v,b)=>r.jsx("span",{className:"info-tag",children:v},b))})]})]})}),u==="read"&&r.jsx("div",{className:"viewer-read-panel",children:m()?r.jsxs(r.Fragment,{children:[l&&r.jsxs("div",{className:"viewer-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement du document..."})]}),r.jsx("iframe",{src:`${m()}#toolbar=1&navpanes=0`,className:"pdf-iframe",title:e.titre,onLoad:h,style:{display:l?"none":"block"}}),!t&&r.jsx("div",{className:"viewer-premium-overlay",children:r.jsxs("div",{className:"overlay-content",children:[r.jsx("div",{className:"overlay-lock",children:""}),r.jsxs("h3",{children:["Aperu limit  ",e.pagesApercu," pages"]}),r.jsxs("p",{children:["Pour lire l'intgralit de ce document (",e.nombrePages," pages) et le tlcharger, passez  PedaClic Premium."]}),r.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),r.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})]}):r.jsx("div",{className:"viewer-no-preview",children:r.jsxs("div",{className:"no-preview-content",children:[r.jsx("div",{className:"overlay-lock",children:""}),r.jsx("h3",{children:"Document rserv aux abonns Premium"}),r.jsxs("p",{children:["Ce document de ",e.nombrePages," pages est accessible uniquement avec un abonnement PedaClic Premium."]}),r.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),r.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})})]})},PZ=()=>{const{currentUser:e}=lt(),t=yt(),[n,a]=y.useState(null),l=d=>{a(d)},o=()=>{a(null)},u=()=>{t("/premium")};return n?r.jsx(kZ,{ebook:n,isPremium:e?.isPremium||!1,onBack:o,onGoPremium:u}):r.jsx(MZ,{isPremium:e?.isPremium||!1,onReadEbook:l})},qZ=()=>{const[e,t]=y.useState([]),[n,a]=y.useState(!0),[l,o]=y.useState(null),[u,d]=y.useState(null),[m,p]=y.useState(!1),[h,v]=y.useState(null),[b,g]=y.useState(G()),[_,j]=y.useState(!1),[S,w]=y.useState(null),[E,C]=y.useState(null),[A,O]=y.useState(null),[T,P]=y.useState(null),R=y.useRef(null),I=y.useRef(null),L=y.useRef(null),[K,U]=y.useState(null);function G(){return{titre:"",auteur:"",description:"",categorie:"manuel",niveau:"college",classe:"all",matiere:"",nombrePages:0,pagesApercu:5,annee:"",editeur:"",isbn:"",tags:[],ordre:0,isActive:!0}}y.useEffect(()=>{V()},[]);const V=async()=>{try{a(!0),o(null);const te=await NZ();t(te),d(DZ(te))}catch(te){o("Erreur lors du chargement des ebooks"),console.error(te)}finally{a(!1)}},M=te=>{const{name:ue,value:he,type:xe}=te.target;g(xe==="number"?H=>({...H,[ue]:parseInt(he)||0}):xe==="checkbox"?H=>({...H,[ue]:te.target.checked}):H=>({...H,[ue]:he}))},k=te=>{const ue=te.target.value.split(",").map(he=>he.trim()).filter(Boolean);g(he=>({...he,tags:ue}))},J=async te=>{if(te.preventDefault(),!b.titre.trim()){o("Le titre est obligatoire");return}if(!h&&!E){o("Le fichier PDF est obligatoire");return}try{j(!0),o(null),h?(await CZ(h.id,b,E,A,T),w(` Ebook "${b.titre}" modifi avec succs`)):(await wZ(b,E,A,T),w(` Ebook "${b.titre}" ajout avec succs`)),fe(),await V(),setTimeout(()=>w(null),4e3)}catch(ue){o(ue.message||"Erreur lors de la sauvegarde")}finally{j(!1)}},Q=te=>{v(te),g({titre:te.titre,auteur:te.auteur,description:te.description,categorie:te.categorie,niveau:te.niveau,classe:te.classe,matiere:te.matiere||"",nombrePages:te.nombrePages,pagesApercu:te.pagesApercu,annee:te.annee||"",editeur:te.editeur||"",isbn:te.isbn||"",tags:te.tags||[],ordre:te.ordre,isActive:te.isActive}),p(!0),window.scrollTo({top:0,behavior:"smooth"})},B=async te=>{try{await AZ(te),U(null),w(" Ebook supprim avec succs"),await V(),setTimeout(()=>w(null),4e3)}catch(ue){o(ue.message||"Erreur lors de la suppression")}},q=async(te,ue)=>{try{await EZ(te,!ue),await V()}catch(he){o(he.message)}},fe=()=>{g(G()),v(null),C(null),O(null),P(null),p(!1),R.current&&(R.current.value=""),I.current&&(I.current.value=""),L.current&&(L.current.value="")};return n?r.jsx("div",{className:"admin-ebooks",children:r.jsxs("div",{className:"admin-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Chargement des ebooks..."})]})}):r.jsxs("div",{className:"admin-ebooks",children:[r.jsxs("div",{className:"admin-ebooks-header",children:[r.jsx("h1",{children:" Gestion de la Bibliothque"}),r.jsx("button",{className:"btn-add-ebook",onClick:()=>{fe(),p(!m)},children:m?" Fermer":"+ Ajouter un ebook"})]}),l&&r.jsxs("div",{className:"admin-alert error",children:[" ",l]}),S&&r.jsx("div",{className:"admin-alert success",children:S}),u&&r.jsxs("div",{className:"admin-stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalEbooks}),r.jsx("span",{className:"stat-label",children:"Total ebooks"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.ebooksActifs}),r.jsx("span",{className:"stat-label",children:"Actifs"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalVues}),r.jsx("span",{className:"stat-label",children:"Vues totales"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"stat-number",children:u.totalTelechargements}),r.jsx("span",{className:"stat-label",children:"Tlchargements"})]})]}),m&&r.jsxs("div",{className:"admin-ebook-form-container",children:[r.jsx("h2",{children:h?" Modifier l'ebook":" Ajouter un ebook"}),r.jsxs("form",{onSubmit:J,className:"admin-ebook-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"titre",children:"Titre *"}),r.jsx("input",{id:"titre",name:"titre",type:"text",value:b.titre,onChange:M,placeholder:"Ex: Mathmatiques 3me - Programme complet",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"auteur",children:"Auteur(s) *"}),r.jsx("input",{id:"auteur",name:"auteur",type:"text",value:b.auteur,onChange:M,placeholder:"Ex: Pr. Diallo Moussa",required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description *"}),r.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:M,placeholder:"Dcrivez le contenu de cet ebook...",rows:3,required:!0})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"categorie",children:"Catgorie *"}),r.jsx("select",{id:"categorie",name:"categorie",value:b.categorie,onChange:M,children:Object.keys(Ri).map(te=>r.jsxs("option",{value:te,children:[Ii[te]," ",Ri[te]]},te))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),r.jsxs("select",{id:"niveau",name:"niveau",value:b.niveau,onChange:M,children:[r.jsx("option",{value:"college",children:"Collge"}),r.jsx("option",{value:"lycee",children:"Lyce"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"classe",children:"Classe"}),r.jsxs("select",{id:"classe",name:"classe",value:b.classe,onChange:M,children:[r.jsx("option",{value:"all",children:"Toutes les classes"}),r.jsx("option",{value:"6eme",children:"6me"}),r.jsx("option",{value:"5eme",children:"5me"}),r.jsx("option",{value:"4eme",children:"4me"}),r.jsx("option",{value:"3eme",children:"3me"}),r.jsx("option",{value:"2nde",children:"2nde"}),r.jsx("option",{value:"1ere",children:"1re"}),r.jsx("option",{value:"Terminale",children:"Terminale"})]})]})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"matiere",children:"Matire"}),r.jsxs("select",{id:"matiere",name:"matiere",value:b.matiere,onChange:M,children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),zT.map(te=>r.jsx("option",{value:te,children:te},te))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"annee",children:"Anne"}),r.jsx("input",{id:"annee",name:"annee",type:"text",value:b.annee,onChange:M,placeholder:"Ex: 2024-2025"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"editeur",children:"diteur"}),r.jsx("input",{id:"editeur",name:"editeur",type:"text",value:b.editeur,onChange:M,placeholder:"Ex: INEADE"})]})]}),r.jsxs("div",{className:"form-row form-row-3",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"nombrePages",children:"Nombre de pages *"}),r.jsx("input",{id:"nombrePages",name:"nombrePages",type:"number",value:b.nombrePages,onChange:M,min:"1",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pagesApercu",children:"Pages en aperu gratuit"}),r.jsx("input",{id:"pagesApercu",name:"pagesApercu",type:"number",value:b.pagesApercu,onChange:M,min:"1",max:"20"}),r.jsx("small",{children:"Nombre de pages visibles sans Premium (1-20)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"ordre",children:"Ordre d'affichage"}),r.jsx("input",{id:"ordre",name:"ordre",type:"number",value:b.ordre,onChange:M,min:"0"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"tags",children:"Tags (spars par des virgules)"}),r.jsx("input",{id:"tags",type:"text",value:b.tags?.join(", ")||"",onChange:k,placeholder:"Ex: BFEM, annales, mathmatiques, gomtrie"})]}),r.jsxs("div",{className:"form-files-section",children:[r.jsx("h3",{children:" Fichiers"}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["Fichier PDF complet ",!h&&"*",h&&r.jsx("small",{children:"(laisser vide pour garder l'actuel)"})]}),r.jsx("input",{ref:R,type:"file",accept:".pdf",onChange:te=>C(te.target.files?.[0]||null),className:"file-input"}),E&&r.jsxs("span",{className:"file-info",children:[" ",E.name," (",_c(E.size),")"]})]}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["Image de couverture",r.jsx("small",{children:"(JPG, PNG  recommand : 400560px)"})]}),r.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:te=>O(te.target.files?.[0]||null),className:"file-input"}),A&&r.jsxs("span",{className:"file-info",children:[" ",A.name," (",_c(A.size),")"]})]}),r.jsxs("div",{className:"form-group file-group",children:[r.jsxs("label",{children:["PDF Aperu (premires pages uniquement)",r.jsx("small",{children:"(optionnel  sinon le PDF complet est affich aux non-Premium)"})]}),r.jsx("input",{ref:L,type:"file",accept:".pdf",onChange:te=>P(te.target.files?.[0]||null),className:"file-input"}),T&&r.jsxs("span",{className:"file-info",children:[" ",T.name," (",_c(T.size),")"]})]})]}),r.jsx("div",{className:"form-group checkbox-group",children:r.jsxs("label",{children:[r.jsx("input",{type:"checkbox",name:"isActive",checked:b.isActive,onChange:M}),"Ebook actif (visible dans la bibliothque)"]})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"submit",className:"btn-save",disabled:_,children:_?" Enregistrement...":h?" Modifier l'ebook":" Ajouter l'ebook"}),r.jsx("button",{type:"button",className:"btn-cancel",onClick:fe,children:"Annuler"})]})]})]}),r.jsxs("div",{className:"admin-ebooks-list",children:[r.jsxs("h2",{children:[" Liste des ebooks (",e.length,")"]}),e.length===0?r.jsxs("div",{className:"admin-empty",children:[r.jsx("p",{children:"Aucun ebook pour le moment."}),r.jsx("button",{className:"btn-add-ebook",onClick:()=>p(!0),children:"+ Ajouter le premier ebook"})]}):r.jsx("div",{className:"admin-ebooks-table-wrapper",children:r.jsxs("table",{className:"admin-ebooks-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Couverture"}),r.jsx("th",{children:"Titre / Auteur"}),r.jsx("th",{children:"Catgorie"}),r.jsx("th",{children:"Classe"}),r.jsx("th",{children:"Pages"}),r.jsx("th",{children:"Vues / DL"}),r.jsx("th",{children:"Statut"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(te=>r.jsxs("tr",{className:te.isActive?"":"row-inactive",children:[r.jsx("td",{className:"td-cover",children:te.couvertureURL?r.jsx("img",{src:te.couvertureURL,alt:"",className:"mini-cover"}):r.jsx("div",{className:"mini-cover-placeholder",children:Ii[te.categorie]})}),r.jsxs("td",{className:"td-title",children:[r.jsx("strong",{children:te.titre}),r.jsx("span",{className:"td-author",children:te.auteur})]}),r.jsx("td",{children:r.jsxs("span",{className:"badge-category",children:[Ii[te.categorie]," ",Ri[te.categorie]]})}),r.jsx("td",{children:te.classe==="all"?"Toutes":te.classe}),r.jsx("td",{children:te.nombrePages}),r.jsx("td",{children:r.jsxs("span",{className:"td-stats",children:[" ",te.nombreVues,r.jsx("br",{})," ",te.nombreTelechargements]})}),r.jsx("td",{children:r.jsx("button",{className:`btn-status ${te.isActive?"active":"inactive"}`,onClick:()=>q(te.id,te.isActive),title:te.isActive?"Dsactiver":"Activer",children:te.isActive?" Actif":" Inactif"})}),r.jsxs("td",{className:"td-actions",children:[r.jsx("button",{className:"btn-edit",onClick:()=>Q(te),title:"Modifier",children:""}),K===te.id?r.jsxs("div",{className:"delete-confirm",children:[r.jsx("span",{children:"Supprimer ?"}),r.jsx("button",{className:"btn-confirm-yes",onClick:()=>B(te.id),children:"Oui"}),r.jsx("button",{className:"btn-confirm-no",onClick:()=>U(null),children:"Non"})]}):r.jsx("button",{className:"btn-delete",onClick:()=>U(te.id),title:"Supprimer",children:""})]})]},te.id))})]})})]})]})},RZ=()=>{const[e,t]=y.useState(null),[n,a]=y.useState(!1),[l,o]=y.useState(!1),[u,d]=y.useState(!1),m=()=>/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream,p=()=>window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0,h=y.useCallback(()=>{try{return parseInt(localStorage.getItem("pedaclic_visit_count")||"0",10)}catch{return 0}},[]),v=y.useCallback(()=>{try{const j=h()+1;localStorage.setItem("pedaclic_visit_count",j.toString())}catch{}},[h]),b=()=>{try{return localStorage.getItem("pedaclic_install_dismissed")==="true"}catch{return!1}};y.useEffect(()=>{if(p()||b())return;v();const j=w=>{w.preventDefault(),t(w),h()>=2&&a(!0)};window.addEventListener("beforeinstallprompt",j),m()&&h()>=2&&(o(!0),a(!0));const S=()=>{a(!1),t(null)};return window.addEventListener("appinstalled",S),()=>{window.removeEventListener("beforeinstallprompt",j),window.removeEventListener("appinstalled",S)}},[h,v]);const g=async()=>{if(e){d(!0);try{await e.prompt();const{outcome:j}=await e.userChoice;j==="accepted"&&a(!1)}catch(j){console.error("Erreur installation PWA:",j)}finally{d(!1),t(null)}}},_=()=>{a(!1);try{localStorage.setItem("pedaclic_install_dismissed","true")}catch{}};return n?r.jsx("div",{className:"install-prompt",children:r.jsxs("div",{className:"install-prompt__container",children:[r.jsxs("div",{className:"install-prompt__content",children:[r.jsx("div",{className:"install-prompt__icon",children:r.jsx(Dq,{size:24})}),r.jsxs("div",{className:"install-prompt__text",children:[r.jsx("h3",{className:"install-prompt__title",children:"Installer PedaClic"}),r.jsx("p",{className:"install-prompt__description",children:l?"Accde  tes cours mme sans connexion !":"Installe l'app pour un accs rapide, mme hors-ligne !"})]})]}),r.jsxs("div",{className:"install-prompt__actions",children:[!l&&e&&r.jsx("button",{className:"install-prompt__btn install-prompt__btn--primary",onClick:g,disabled:u,children:u?"Installation...":"Installer"}),l&&r.jsx("div",{className:"install-prompt__ios",children:r.jsxs("p",{className:"install-prompt__ios-text",children:["Appuie sur ",r.jsx(Mq,{size:16,className:"install-prompt__ios-icon"})," puis",r.jsxs("span",{className:"install-prompt__ios-highlight",children:[r.jsx(fc,{size:14})," Sur l'cran d'accueil"]})]})}),r.jsx("button",{className:"install-prompt__btn install-prompt__btn--close",onClick:_,"aria-label":"Fermer la bannire d'installation",children:r.jsx(Ti,{size:20})})]})]})}):null};function IZ(){const[e,t]=y.useState(typeof navigator<"u"?navigator.onLine:!0);return y.useEffect(()=>{const n=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",n),window.addEventListener("offline",a),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}},[]),e}const LZ=()=>{const e=IZ(),[t,n]=y.useState(!1),[a,l]=y.useState(!1);return y.useEffect(()=>{if(!e)l(!0),n(!1);else if(a){n(!0);const o=setTimeout(()=>{n(!1),l(!1)},3e3);return()=>clearTimeout(o)}},[e,a]),e&&!t?null:r.jsx("div",{className:`network-indicator ${e?"network-indicator--online":"network-indicator--offline"}`,children:r.jsx("div",{className:"network-indicator__content",children:e?r.jsxs(r.Fragment,{children:[r.jsx(Tq,{size:14}),r.jsx("span",{children:"Connexion rtablie"})]}):r.jsxs(r.Fragment,{children:[r.jsx(kq,{size:14}),r.jsx("span",{children:"Pas de connexion  mode hors-ligne"})]})})})},$Z=()=>r.jsxs(Gq,{children:[r.jsx(RZ,{}),r.jsx(LZ,{}),r.jsxs(GP,{children:[r.jsx(Ge,{path:"/",element:r.jsx(Et,{children:r.jsx(Vq,{})})}),r.jsx(Ge,{path:"/disciplines",element:r.jsx(Et,{children:r.jsx(Xq,{})})}),r.jsx(Ge,{path:"/disciplines/:id",element:r.jsx(Et,{children:r.jsx(Jq,{})})}),r.jsx(Ge,{path:"/premium",element:r.jsx(Et,{children:r.jsx(rR,{})})}),r.jsx(Ge,{path:"/connexion",element:r.jsx(Yq,{})}),r.jsx(Ge,{path:"/inscription",element:r.jsx(Kq,{})}),r.jsx(Ge,{path:"/admin",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(aR,{})})})}),r.jsx(Ge,{path:"/admin/disciplines",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(iR,{})})})}),r.jsx(Ge,{path:"/admin/chapitres",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(sR,{})})})}),r.jsx(Ge,{path:"/admin/ressources",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(lR,{})})})}),r.jsx(Ge,{path:"/admin/quiz",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(mR,{})})})}),r.jsx(Ge,{path:"/admin/quiz/nouveau",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(x1,{})})})}),r.jsx(Ge,{path:"/admin/quiz/modifier/:quizId",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(x1,{})})})}),r.jsx(Ge,{path:"/admin/quiz-avance",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(BR,{})})})}),r.jsx(Ge,{path:"/admin/utilisateurs",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(jR,{})})})}),r.jsx(Ge,{path:"/admin/resultats",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(NR,{})})})}),r.jsx(Ge,{path:"/admin/settings",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(_R,{})})})}),r.jsx(Ge,{path:"/admin/ebooks",element:r.jsx(hn,{children:r.jsx(vn,{children:r.jsx(qZ,{})})})}),r.jsx(Ge,{path:"/admin/premium",element:r.jsx(Z_,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),r.jsx(Ge,{path:"/quizzes",element:r.jsx(yc,{allowedRoles:["eleve","prof","admin"],children:r.jsx(Et,{children:r.jsx(MX,{})})})}),r.jsx(Ge,{path:"/quiz/:quizId",element:r.jsx(Et,{children:r.jsx(o3,{})})}),r.jsx(Ge,{path:"/quiz-avance/:quizId",element:r.jsx(Et,{children:r.jsx(YR,{})})}),r.jsx(Ge,{path:"/quiz-gratuits",element:r.jsx(Et,{children:r.jsx(FX,{})})}),r.jsx(Ge,{path:"/eleve/dashboard",element:r.jsx(Et,{children:r.jsx(SX,{})})}),r.jsx(Ge,{path:"/eleve/suivi",element:r.jsx(Et,{children:r.jsx(wX,{})})}),r.jsx(Ge,{path:"/prof/dashboard",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(zX,{})})})}),r.jsx(Ge,{path:"/prof/cahiers",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(dW,{})})})}),r.jsx(Ge,{path:"/prof/cahiers/:cahierId",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(NW,{})})})}),r.jsx(Ge,{path:"/prof/cahiers/:cahierId/nouvelle",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(A2,{})})})}),r.jsx(Ge,{path:"/prof/cahiers/:cahierId/modifier/:entreeId",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(A2,{})})})}),"        ",r.jsx(Ge,{path:"/prof/sequences",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx($W,{})})})}),"        ",r.jsx(Ge,{path:"/prof/sequences/nouvelle",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(E2,{})})})}),"        ",r.jsx(Ge,{path:"/prof/sequences/:id",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(eZ,{})})})}),"        ",r.jsx(Ge,{path:"/prof/sequences/:id/modifier",element:r.jsx(Ca,{children:r.jsx(Et,{children:r.jsx(E2,{})})})}),r.jsx(Ge,{path:"/eleve/cahiers/:cahierId",element:r.jsx(yc,{allowedRoles:["eleve","admin"],children:r.jsx(Et,{children:r.jsx(cZ,{})})})}),r.jsx(Ge,{path:"/parent/dashboard",element:r.jsx(yc,{allowedRoles:["parent","admin"],children:r.jsx(Et,{children:r.jsx(uZ,{})})})}),r.jsx(Ge,{path:"/generateur",element:r.jsx(Et,{children:r.jsx(bZ,{})})}),r.jsx(Ge,{path:"/ebooks",element:r.jsx(Et,{children:r.jsx(PZ,{})})}),r.jsx(Ge,{path:"*",element:r.jsx(Z_,{to:"/",replace:!0})})]})]}),OT=document.getElementById("root");if(!OT)throw new Error("L'lment #root n'existe pas");const BZ=Uq.createRoot(OT);BZ.render(r.jsx(HP.StrictMode,{children:r.jsx(QP,{children:r.jsx($Z,{})})}));
//# sourceMappingURL=index-BaKY6nbu.js.map
